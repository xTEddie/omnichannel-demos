(this["webpackJsonpbotframework-webchat-control"]=this["webpackJsonpbotframework-webchat-control"]||[]).push([[0],{1004:function(e,t){},1006:function(e,t){},1028:function(e,t){},1030:function(e,t){},1058:function(e,t){},1059:function(e,t){},1065:function(e,t){},1084:function(e,t){},1102:function(e,t){},1104:function(e,t){},1729:function(e,t){},1730:function(e,t){},1731:function(e,t){},1831:function(e,t){},1841:function(e,t){},1842:function(e,t){},1843:function(e,t){},1858:function(e,t){},1994:function(e,t,n){},1995:function(e,t,n){},1996:function(e,t,n){},1997:function(e,t,n){},1998:function(e,t,n){},1999:function(e,t,n){},2e3:function(e,t,n){},2003:function(e,t,n){"use strict";n.r(t);var a,c=n(1),o=n.n(c),i=n(211),r=n.n(i),l=(n(845),n(3)),s=n.n(l),d=n(44),u=n(8),v=n(12),h=n(284),b=n(0),g=n(2),f="error-alert",m=function(){function e(){Object(b.a)(this,e)}return Object(g.a)(e,[{key:"validate",value:function(e,t){var n=!!e;return n||t.push("A required field cannot be empty"),n}}]),e}(),p=function(){function e(){Object(b.a)(this,e)}return Object(g.a)(e,[{key:"validate",value:function(e,t){var n=!!e&&"true"===e.toLowerCase();return console.log(n),n||t.push("A required field cannot be empty"),n}}]),e}(),j=function(){function e(){Object(b.a)(this,e)}return Object(g.a)(e,[{key:"attachFieldValidator",value:function(e,t,n){var a=this;if(e.isInteractive){e.onValueChanged=function(e){return a.validateInput(e)},e.validators=[];var c=JSON.parse(t.id).IsRequired;c&&e.validators.push(new m),"Input.Toggle"===t.type&&c&&e.validators.push(new p)}}},{key:"canSubmitSurvey",value:function(e){var t=this;return e.map((function(e){return t.validateInput(e)})).every((function(e){return e}))}},{key:"enableSubmitButton",value:function(e){var t=document.querySelector("button.ac-pushButton");e?null===t||void 0===t||t.removeAttribute("disabled"):null===t||void 0===t||t.setAttribute("disabled","true"),null===t||void 0===t||t.setAttribute("aria-disabled",e?"false":"true")}},{key:"validateInput",value:function(e){if(!e.validators.length)return e.isValid=function(){return!0},!0;var t=[];return e.validators.length&&(e.isValid=function(){return e.validators.every((function(n){return n.validate(e.value,t)}))}),e.isValid()?(this.enableSubmitButton(!0),this.removeErrors(e),!0):(this.enableSubmitButton(!1),this.renderErrors(e,t),!1)}},{key:"createErrorElement",value:function(e,t){var n=document.createElement("div");return n.id=t,n.innerHTML='\n            <span style="font-size: 16px; color: #a80000">\n                &#9888;\n            </span>\n            <span style="font-size: 12px; color: #a80000">\n                '.concat(e,"\n            </span>\n        "),n}},{key:"renderErrors",value:function(e,t){var n=this;t.forEach((function(t){var a="".concat(f,"-").concat(e.id),c=n.createErrorElement(t,a);e.renderedElement.parentNode.insertBefore(c,e.renderedElement.nextSibling)}))}},{key:"removeErrors",value:function(e){var t=document.getElementById("".concat(f,"-").concat(e.id));null===t||void 0===t||t.remove()}}]),e}(),y=n(285),O=n.n(y),C=n(824),x=n(10);!function(e){e[e.SET_CHAT_STARTED=0]="SET_CHAT_STARTED",e[e.SET_MESSAGES=1]="SET_MESSAGES",e[e.SET_TYPING=2]="SET_TYPING",e[e.SET_AGENT_END_SESSION_EVENT=3]="SET_AGENT_END_SESSION_EVENT",e[e.SET_LOADING=4]="SET_LOADING"}(a||(a={}));var w={hasChatStarted:!1,messages:[],isTyping:!1,agentEndSessionEvent:!1,isLoading:!1},S=function(e,t){switch(t.type){case a.SET_CHAT_STARTED:return Object(d.a)(Object(d.a)({},e),{},{type:t.type,hasChatStarted:t.payload});case a.SET_MESSAGES:return Object(d.a)(Object(d.a)({},e),{},{type:t.type,messages:t.payload});case a.SET_TYPING:return Object(d.a)(Object(d.a)({},e),{},{type:t.type,isTyping:t.payload});case a.SET_AGENT_END_SESSION_EVENT:return Object(d.a)(Object(d.a)({},e),{},{type:t.type,agentEndSessionEvent:t.payload});case a.SET_LOADING:return Object(d.a)(Object(d.a)({},e),{},{type:t.type,isLoading:t.payload});default:return e}},V=Object(c.createContext)({}),k=V.Provider,E=function(e){var t=Object(c.useReducer)(S,w),n=Object(v.a)(t,2),a=n[0],o=n[1];return Object(x.jsx)(k,{value:{state:a,dispatch:o},children:e.children})},M=n(828),T=n.n(M);n(1993),n(1994);var q=function(){return Object(x.jsx)("div",{className:"loading",children:Object(x.jsx)(T.a,{type:"Puff",color:"#00BFFF",height:100,width:100})})},z=n(2015);n(1995);var H=function(e){return Object(x.jsx)("div",{className:"chat-button",onClick:e.onClick,children:Object(x.jsx)(z.a,{color:"white"})})},A=n(2016);n(1996);var N=function(e){return Object(x.jsxs)("div",{className:"chat-header",children:[Object(x.jsxs)("span",{children:[" ",e.title," "]}),Object(x.jsx)("div",{onClick:e.onClick,children:Object(x.jsx)(A.a,{})})]})},I=n(2020),D=n(2018),_=n(2021),L=n(2022),R=n(2017),U=n(2019);n(1997);var B=function(e){return Object(x.jsxs)("div",{className:"incoming-call-pop-up",children:[Object(x.jsx)("span",{children:" Incoming call "}),Object(x.jsxs)("div",{children:[Object(x.jsx)(R.a,{className:"reject-call-button",onClick:e.rejectCall}),Object(x.jsx)(D.a,{className:"accept-video-call-button",onClick:e.acceptVideoCall}),Object(x.jsx)(U.a,{className:"accept-voice-call-button",onClick:e.acceptVoiceCall})]})]})},W=(n(1998),function(){console.log("[WebChat][adjustWebChatHeightInVideoCall]");var e=document.getElementsByClassName("webchat__basic-transcript")[0],t=document.getElementById("remoteVideo"),n=document.getElementsByClassName("current-call-action-bar")[0],a=e.clientHeight-t.clientHeight-n.clientHeight;e.style.marginTop="".concat(t.clientHeight+n.clientHeight,"px"),e.style.height="".concat(a,"px")}),F=function(){console.log("[WebChat][adjustWebChatHeightIncomingCall]");var e=document.getElementsByClassName("webchat__basic-transcript")[0],t=document.getElementsByClassName("incoming-call-pop-up")[0],n=e.clientHeight-t.clientHeight;e.style.height="".concat(n,"px")},G=function(){console.log("[WebChat][adjustWebChatHeightInVoiceCall]");var e=document.getElementsByClassName("webchat__basic-transcript")[0],t=document.getElementsByClassName("current-call-action-bar")[0],n=e.clientHeight-t.clientHeight;e.style.marginTop="".concat(t.clientHeight,"px"),e.style.height="".concat(n,"px")},P=function(){console.log("[WebChat][adjustWebChatHeightNoCall]");var e=document.getElementsByClassName("webchat__basic-transcript")[0];e.style.marginTop="",e.style.height=""};var K=function(e){var t=Object(c.useState)(!1),n=Object(v.a)(t,2),a=n[0],o=n[1],i=Object(c.useState)(!1),r=Object(v.a)(i,2),l=r[0],d=r[1],h=Object(c.useState)(!1),b=Object(v.a)(h,2),g=b[0],f=b[1],m=Object(c.useState)(!1),p=Object(v.a)(m,2),j=p[0],y=p[1],O=Object(c.useState)(!1),C=Object(v.a)(O,2),w=C[0],S=C[1],V=Object(c.useState)(!1),k=Object(v.a)(V,2),E=(k[0],k[1]),M=Object(c.useState)(!1),T=Object(v.a)(M,2),q=T[0],z=T[1];Object(c.useEffect)((function(){var t=function(){var t=Object(u.a)(s.a.mark((function t(){var n,c,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.VoiceVideoCallingSDK,c=e.OCClient,i=e.chatToken,n&&i&&c){t.next=3;break}return t.abrupt("return");case 3:if(!a){t.next=5;break}return t.abrupt("return");case 5:return t.prev=5,t.next=8,n.initialize({chatToken:i,selfVideoHTMLElementId:"selfVideo",remoteVideoHTMLElementId:"remoteVideo",environment:"test",OCClient:c});case 8:o(!0),console.log("[WebChat][Calling] VoiceVideoCallingProxy initialized!"),console.log(n),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(5),console.error("[WebChat][Calling] Failed to initialize VoiceVideoCalling!"),console.error(t.t0);case 17:n.onCallAdded((function(){console.log("[WebChat][Calling][CallAdded]"),d(!0),F()})),n.onCallDisconnected((function(){console.log("[WebChat][Calling][CallDisconnected]"),P(),d(!1),f(!1),y(!1)})),n.onLocalVideoStreamAdded((function(){console.log("[WebChat][Calling][LocalVideoStreamAdded]");var e=n.isMicrophoneMuted();S(e);var t=n.isRemoteVideoEnabled();E(t);var a=n.isLocalVideoEnabled();z(a),a||t?(d(!1),f(!0),y(!1)):(d(!1),f(!1),y(!0))})),n.onLocalVideoStreamRemoved((function(){console.log("[WebChat][Calling][LocalVideoStreamRemoved]");var e=n.isMicrophoneMuted();S(e);var t=n.isRemoteVideoEnabled();E(t);var a=n.isLocalVideoEnabled();z(a),a||t?(d(!1),f(!0),y(!1)):(d(!1),f(!1),y(!0))})),n.onRemoteVideoStreamAdded((function(){console.log("[WebChat][Calling][RemoteVideoStreamAdded]");var e=n.isMicrophoneMuted();S(e);var t=n.isRemoteVideoEnabled();E(t);var a=n.isLocalVideoEnabled();z(a),a||t?(d(!1),f(!0),y(!1)):(d(!1),f(!1),y(!0))})),n.onRemoteVideoStreamRemoved((function(){console.log("[WebChat][Calling][RemoteVideoStreamRemoved]");var e=n.isMicrophoneMuted();S(e);var t=n.isRemoteVideoEnabled();E(t);var a=n.isLocalVideoEnabled();z(a),a||t?(d(!1),f(!0),y(!1)):(d(!1),f(!1),y(!0))}));case 23:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(){return t.apply(this,arguments)}}();t()}),[e,a]);var H=Object(c.useCallback)(Object(u.a)(s.a.mark((function t(){var n,a,c,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("[WebChat][Calling][Accept][Voice]"),n=e.VoiceVideoCallingSDK,t.next=4,n.acceptCall({withVideo:!1});case 4:d(!1),f(!1),y(!0),G(),a=n.isMicrophoneMuted(),S(a),c=n.isRemoteVideoEnabled(),E(c),o=n.isLocalVideoEnabled(),z(o);case 14:case"end":return t.stop()}}),t)}))),[e]),A=Object(c.useCallback)(Object(u.a)(s.a.mark((function t(){var n,a,c,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("[WebChat][Calling][Accept][Video]"),n=e.VoiceVideoCallingSDK,t.next=4,n.acceptCall({withVideo:!0});case 4:d(!1),f(!0),y(!1),W(),a=n.isMicrophoneMuted(),S(a),c=n.isRemoteVideoEnabled(),E(c),o=n.isLocalVideoEnabled(),z(o);case 14:case"end":return t.stop()}}),t)}))),[e]),N=Object(c.useCallback)(Object(u.a)(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("[WebChat][Calling][Reject]"),n=e.VoiceVideoCallingSDK,t.next=4,n.rejectCall();case 4:d(!1),f(!1),y(!1);case 7:case"end":return t.stop()}}),t)}))),[e]),U=Object(c.useCallback)(Object(u.a)(s.a.mark((function t(){var n,a,c,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("[WebChat][Calling][toggleLocalVideo]"),n=e.VoiceVideoCallingSDK,t.next=4,n.toggleLocalVideo();case 4:a=n.isMicrophoneMuted(),S(a),c=n.isRemoteVideoEnabled(),E(c),o=n.isLocalVideoEnabled(),z(o),o||c?(d(!1),f(!0),y(!1)):(d(!1),f(!1),y(!0));case 11:case"end":return t.stop()}}),t)}))),[e]),K=Object(c.useCallback)(Object(u.a)(s.a.mark((function t(){var n,a,c,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("[WebChat][Calling][toggleMute]"),n=e.VoiceVideoCallingSDK,t.next=4,n.toggleMute();case 4:a=n.isMicrophoneMuted(),S(a),c=n.isRemoteVideoEnabled(),E(c),o=n.isLocalVideoEnabled(),z(o),o||c?(d(!1),f(!0),y(!1)):(d(!1),f(!1),y(!0));case 11:case"end":return t.stop()}}),t)}))),[e]),J=Object(c.useCallback)(Object(u.a)(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("[WebChat][Calling][stopCall]"),n=e.VoiceVideoCallingSDK,t.next=4,n.stopCall();case 4:case"end":return t.stop()}}),t)}))),[e]);return Object(x.jsxs)(x.Fragment,{children:[l&&Object(x.jsx)(B,{rejectCall:N,acceptVideoCall:A,acceptVoiceCall:H}),Object(x.jsxs)("div",{className:"calling ".concat(g||j?"active":""),children:[Object(x.jsxs)("div",{className:"video-container ".concat(g?"active":""),children:[Object(x.jsx)("div",{id:"remoteVideo"}),Object(x.jsx)("div",{id:"selfVideo"})]}),Object(x.jsx)("div",{children:(g||j)&&Object(x.jsxs)("div",{className:"current-call-action-bar",children:[q?Object(x.jsx)(D.a,{className:"toggle-video-button",onClick:U}):Object(x.jsx)(I.a,{className:"toggle-video-button",onClick:U}),w?Object(x.jsx)(_.a,{className:"toggle-mute-button",onClick:K}):Object(x.jsx)(L.a,{className:"toggle-mute-button",onClick:K}),Object(x.jsx)(R.a,{className:"stop-call-button",onClick:J})]})})]})]})},J=n(2023),Y=n(2024);n(1999);var $=function(e){var t=Object(c.useState)(!1),n=Object(v.a)(t,2),a=n[0],o=n[1],i=Object(c.useState)(!1),r=Object(v.a)(i,2),l=r[0],s=r[1],d=Object(c.useCallback)((function(){o(!0)}),[]),u=Object(c.useCallback)((function(){o(!1)}),[]),h=Object(c.useCallback)((function(){s(!0)}),[]),b=Object(c.useCallback)((function(){s(!1)}),[]);return Object(x.jsxs)("div",{className:"action-bar",children:[Object(x.jsx)(J.a,{size:"16",color:a?"rgb(22, 27, 34)":"rgb(22, 27, 34, 0.5)",className:"download-button",onClick:e.onDownloadClick,onMouseEnter:d,onMouseLeave:u}),Object(x.jsx)(Y.a,{size:"16",color:l?"rgb(22, 27, 34)":"rgb(22, 27, 34, 0.5)",className:"email-button",onClick:e.onEmailTranscriptClick,onMouseEnter:h,onMouseLeave:b})]})},Q="DIRECT_LINE/INCOMING_ACTIVITY",X=function(){function e(){Object(b.a)(this,e),this.middlewares=void 0,this.middlewares={}}return Object(g.a)(e,[{key:"subscribe",value:function(e,t){this.middlewares[e]=t}},{key:"create",value:function(){var e=this;return console.log("[CustomStore][create]"),Object(y.createStore)({},(function(t){var n=t.dispatch;return function(t){return function(a){a.type===Q&&(a.payload.activity&&(a.payload.activity.actionType=Q));var c=a;if(a&&a.payload)for(var o=0,i=Object.keys(e.middlewares);o<i.length;o++){var r=i[o],l=e.middlewares[r];if(l.applicable(c)){var s=l.apply(c);s.dispatchAction&&n(s.dispatchAction),s.nextAction&&(c=s.nextAction)}}return t(c)}}}))}}],[{key:"getInstance",value:function(){return this._instance||(this._instance=new e),this._instance}}]),e}();X._instance=void 0;var Z,ee=function(){return console.log("[createCustomStore]"),X.getInstance()},te=function(){function e(t){Object(b.a)(this,e),this.dataMaskingRules=void 0,this.dataMaskingRules=t,console.log("[DataMaskingRules]"),console.log(this.dataMaskingRules)}return Object(g.a)(e,[{key:"applicable",value:function(e){var t=e.payload.text;return!!(Object.keys(this.dataMaskingRules).length>0&&t&&"WEB_CHAT/SEND_MESSAGE"===e.type)}},{key:"apply",value:function(e){return{dispatchAction:null,nextAction:this.applyDataMasking(e)}}},{key:"applyDataMasking",value:function(e){var t=e.payload.text;if(Object.keys(this.dataMaskingRules).length>0)for(var n=0,a=Object.values(this.dataMaskingRules);n<a.length;n++)for(var c=a[n],o=new RegExp(c,"g"),i=void 0;i=o.exec(t);){var r=i[0].replace(/./g,"#");t=t.replace(i[0],r)}return e.payload.text=t,e}}]),e}(),ne=function(e){return console.log("[createDataMaskingMiddleware]"),new te(e)};!function(e){e.User="user",e.Bot="bot",e.Channel="channel"}(Z||(Z={}));var ae,ce=Z;!function(e){e.THREAD="Thread"}(ae||(ae={}));var oe,ie=function(){console.log("[createActivityMiddleware]");return function(){return function(e){return function(t){if(console.log("%c [ActivityMiddleware]","background: #2a9fd4; color: #fff"),console.log(t),t.activity){if(t.activity.from&&t.activity.from.role===ce.Channel)return t.activity.channelData&&t.activity.channelData.type&&t.activity.channelData.type===ae.THREAD&&(n=t.activity.channelData,console.log("%c [ActivityMiddleware][handleThreadUpdate]","background: #2a9fd4; color: #fff"),console.log(n)),function(){return!1};if(t.activity.channelData&&t.activity.channelData.tags&&t.activity.channelData.tags.includes("system"))return console.log("%c [ActivityMiddleware][Message][System] ".concat(t.activity.text),"background: #2a9fd4; color: #fff"),function(n){return Object(x.jsx)("div",{className:"system-message",children:e(t)(n)},t.activity.id)};if(void 0===t.activity.text||null==t.activity.text)return e(t);"bot"===t.activity.from.role&&console.log("%c [ActivityMiddleware][Message][Agent] ".concat(t.activity.text),"background: #2a9fd4; color: #fff"),"user"===t.activity.from.role&&console.log("%c [ActivityMiddleware][Message][Customer] ".concat(t.activity.text),"background: #2a9fd4; color: #fff")}var n;return e(t)}}}},re=n(2025),le=function(e){if(e){var t=e.split(/\s/).reduce((function(e,t){return e+t.slice(0,1)}),"");return t.length>1?t.substring(0,2).toUpperCase():e.substring(0,2).toUpperCase()}return""},se=function(){console.log("[createAvatarMiddleware]");return function(){return function(e){return function(t){console.log("[AvatarMiddleware]");var n=t.activity,a=n.channelData.tags,c=n.from.name,o=n.text,i=t.fromUser;return console.log(t),a&&a.includes("system")?(console.log("[AvatarMiddleware][Message][System] ".concat(o)),Object(x.jsx)("div",{children:Object(x.jsx)(re.a,{color:"red",size:20})})):void 0!==i&&null!==i&&(i?i?(console.log("[AvatarMiddleware][Message][Customer] ".concat(o)),Object(x.jsx)("div",{className:"webchat__avatar",children:Object(x.jsxs)("p",{className:"webchat__avatar_initials",children:[" ",le(c)||"CU","  "]})})):e(t):(console.log("[AvatarMiddleware][Message][Agent] ".concat(o)),Object(x.jsx)("div",{className:"webchat__avatar",children:Object(x.jsxs)("p",{className:"webchat__avatar_initials",children:[" ",le(c)," "]})})))}}}};!function(e){e.Sending="sending",e.SendFailed="send failed",e.Sent="sent"}(oe||(oe={}));var de,ue=function(){return function(){return function(e){return function(e){console.log("%c [activityStatusMiddleware]","background: #238636; color: #fff"),console.log(e);var t="";!function(e){return e.activity.channelData&&e.activity.channelData.tags&&e.activity.channelData.tags.includes("system")}(e)?!function(e){return"bot"===e.activity.from.role}(e)?function(e){return"user"===e.activity.from.role}(e)&&(t="Customer"):t="Agent":t="System",console.log("%c [activityStatusMiddleware][Message][".concat(t,"] ").concat(e.activity.text),"background: #238636; color: #fff"),e.sendState===oe.Sent?console.log("%c [activityStatusMiddleware][Message][".concat(t,"][Status] Sent!"),"background: #238636; color: #fff"):e.sendState===oe.Sending?console.log("%c [activityStatusMiddleware][Message][".concat(t,"][Status] Sending..."),"background: #238636; color: #fff"):e.sendState===oe.SendFailed&&console.log("%c [activityStatusMiddleware][Message][".concat(t,"][Status] Failed :("),"background: #238636; color: #fff")}}}},ve=function(e){return Object(x.jsx)("div",{style:{fontSize:"14px",display:"flex",alignItems:"center"},children:e.children})},he=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:14,n=Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",width:t,height:t,children:Object(x.jsx)("path",{d:"M1792 0q27 0 50 10t40 27 28 41 10 50v480q0 45-9 77t-24 58-31 46-31 40-23 44-10 55v992q0 27-10 50t-27 40-41 28-50 10H256V0h1536zM640 128v384h256V128H640zm1024 800q0-31-9-54t-24-44-31-41-31-45-23-58-10-78V128h-512v512H768v128H640V640H512V128H384v1792h384v-128h128v128h768V928zm128-800h-128v480q0 24 4 42t13 33 20 29 27 32q15-17 26-31t20-30 13-33 5-42V128zM640 896h128v128H640V896zm0 256h128v128H640v-128zm0 256h128v128H640v-128zm128 256v128H640v-128h128zm0-768V768h128v128H768zm0 256v-128h128v128H768zm0 256v-128h128v128H768zm0 256v-128h128v128H768z"})}),a=Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",width:t,height:t,children:Object(x.jsx)("path",{d:"M1792 1408q0 62-29 109t-76 80-104 50-111 17q-54 0-111-17t-103-49-76-80-30-110q0-61 29-109t76-80 104-50 111-17q51 0 100 12t92 39V226L768 450v1214q0 62-29 109t-76 80-104 50-111 17q-54 0-111-17t-103-49-76-80-30-110q0-61 29-109t76-80 104-50 111-17q51 0 100 12t92 39V350L1792 62v1346z"})}),c=Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",width:t,height:t,children:Object(x.jsx)("path",{d:"M549 0h1243v1755l-293 293H256V293L549 0zm1115 1701V128H603L384 347v1573h1061l219-219z"})}),o=Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",width:t,height:t,children:Object(x.jsx)("path",{d:"M2048 475v1445q0 27-10 50t-27 40-41 28-50 10H640q-27 0-50-10t-40-27-28-41-10-50v-256H115q-24 0-44-9t-37-25-25-36-9-45V627q0-24 9-44t25-37 36-25 45-9h397V128q0-27 10-50t27-40 41-28 50-10h933q26 0 49 9t42 28l347 347q18 18 27 41t10 50zm-384-256v165h165l-165-165zM261 1424h189q2-4 12-23t25-45 29-55 29-53 23-41 10-17q27 59 60 118t65 116h187l-209-339 205-333H707q-31 57-60 114t-63 112q-29-57-57-113t-57-113H279l199 335-217 337zm379 496h1280V512h-256q-27 0-50-10t-40-27-28-41-10-50V128H640v384h397q24 0 44 9t37 25 25 36 9 45v922q0 24-9 44t-25 37-36 25-45 9H640v256zm640-1024V768h512v128h-512zm0 256v-128h512v128h-512zm0 256v-128h512v128h-512z"})}),i=Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",width:t,height:t,children:Object(x.jsx)("path",{d:"M256 1920h1536v128H128V0h1115l549 549v91h-640V128H256v1792zM1280 512h293l-293-293v293zm768 256v1024H640V768h1408zM768 896v421l320-319 416 416 160-160 256 256V896H768zm987 768h139l-230-230-69 70 160 160zm-987 0h805l-485-486-320 321v165zm960-512q-26 0-45-19t-19-45q0-26 19-45t45-19q26 0 45 19t19 45q0 26-19 45t-45 19z"})}),r=Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",width:t,height:t,children:Object(x.jsx)("path",{d:"M1963 128q35 0 60 25t25 60v1622q0 35-25 60t-60 25H597q-35 0-60-25t-25-60v-299H85q-35 0-60-25t-25-60V597q0-35 25-60t60-25h427V213q0-35 25-60t60-25h1366zM389 939l242 420h152V689H635v429L402 689H241v670h148V939zm1531 853v-256h-256v256h256zm0-384v-256h-256v256h256zm0-384V768h-256v256h256zm0-384V256H640v256h299q35 0 60 25t25 60v854q0 35-25 60t-60 25H640v256h896V640h384z"})}),l=Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",width:t,height:t,children:Object(x.jsx)("path",{d:"M1920 1664h-128v384H128v-384H0V640h128V0h1243l421 421v219h128v1024zM1408 384h165l-165-165v165zM256 640h1408V512h-384V128H256v512zm1408 1024H256v256h1408v-256zm128-896H128v768h1664V768zM448 896q40 0 75 15t61 41 41 61 15 75q0 40-15 75t-41 61-61 41-75 15h-64v128H256V896h192zm0 256q26 0 45-19t19-45q0-26-19-45t-45-19h-64v128h64zm448-256q53 0 99 20t82 55 55 81 20 100q0 53-20 99t-55 82-81 55-100 20H768V896h128zm0 384q27 0 50-10t40-27 28-41 10-50q0-27-10-50t-27-40-41-28-50-10v256zm384-384h320v128h-192v128h192v128h-192v128h-128V896z"})}),s=Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",width:t,height:t,children:Object(x.jsx)("path",{d:"M2048 475v1445q0 27-10 50t-27 40-41 28-50 10H640q-27 0-50-10t-40-27-28-41-10-50v-256H115q-24 0-44-9t-37-25-25-36-9-45V627q0-24 9-44t25-37 36-25 45-9h397V128q0-27 10-50t27-40 41-28 50-10h933q26 0 49 9t42 28l347 347q18 18 27 41t10 50zm-384-256v165h165l-165-165zM368 752v672h150v-226h100q52 0 97-15t78-46 53-72 20-97q0-56-17-97t-50-67-76-39-97-13H368zm1552 1168V512h-256q-27 0-50-10t-40-27-28-41-10-50V128H640v384h397q24 0 44 9t37 25 25 36 9 45v922q0 24-9 44t-25 37-36 25-45 9H640v256h1280zM1536 640q79 0 149 30t122 82 83 123 30 149h-384V640zm-128 128v384h384q0 80-30 149t-82 122-123 83-149 30q-33 0-65-6t-63-18V792q31-11 63-17t65-7zm-804 300h-86V883h90q47 0 74 20t27 70q0 52-28 73t-77 22z"})}),d=Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",width:t,height:t,children:Object(x.jsx)("path",{d:"M0 256h2048v1408H0V256zm256 1280v-128H128v128h128zm0-256v-128H128v128h128zm0-256V896H128v128h128zm0-256V640H128v128h128zm0-256V384H128v128h128zm1408 786V384H384v823l411-549 741 878-329-558 137-137 320 457zm256 238v-128h-128v128h128zm0-256v-128h-128v128h128zm0-256V896h-128v128h128zm0-256V640h-128v128h128zm0-256V384h-128v128h128z"})}),u=Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",width:t,height:t,children:Object(x.jsx)("path",{d:"M2048 475v1445q0 27-10 50t-27 40-41 28-50 10H640q-27 0-50-10t-40-27-28-41-10-50v-256H115q-24 0-44-9t-37-25-25-36-9-45V627q0-24 9-44t25-37 36-25 45-9h397V128q0-27 10-50t27-40 41-28 50-10h933q26 0 49 9t42 28l347 347q18 18 27 41t10 50zm-384-256v165h165l-165-165zM493 1424h163l255-672H745l-147 427q-5 16-10 31t-11 31q-41-123-82-244t-84-245H241l248 662 4 10zm147 496h1280V512h-256q-27 0-50-10t-40-27-28-41-10-50V128H640v384h397q24 0 44 9t37 25 25 36 9 45v922q0 24-9 44t-25 37-36 25-45 9H640v256zm960-1280l192 192-128 128v448h-256v128h-128v-384h128v128h128V960l-128-128 192-192z"})}),v=Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",width:t,height:t,children:Object(x.jsx)("path",{d:"M2048 475v1445q0 27-10 50t-27 40-41 28-50 10H640q-27 0-50-10t-40-27-28-41-10-50v-256H115q-24 0-44-9t-37-25-25-36-9-45V627q0-24 9-44t25-37 36-25 45-9h397V128q0-27 10-50t27-40 41-28 50-10h933q26 0 49 9t42 28l347 347q18 18 27 41t10 50zm-384-256v165h165l-165-165zM320 1424h161q2-8 9-43t18-83 21-103 22-101 16-76 8-31l7 30q7 30 17 77t23 100 23 103 19 84 10 43h160l148-672H834l-80 438-100-438H502l-96 440-86-440H170l150 672zm320 496h1280V512h-256q-27 0-50-10t-40-27-28-41-10-50V128H640v384h397q24 0 44 9t37 25 25 36 9 45v922q0 24-9 44t-25 37-36 25-45 9H640v256zm640-1024V768h512v128h-512zm0 256v-128h512v128h-512zm0 256v-128h512v128h-512z"})}),h={aac:a,aiff:a,alac:a,avchd:d,avi:d,bmp:i,doc:v,docx:v,flac:a,flv:d,gif:i,jiff:i,jpeg:i,jpg:i,mpe:d,mpeg:d,mpg:d,mpv:d,mp2:a,mp3:a,mp4:d,m4p:d,m4v:d,mov:d,one:r,pcm:a,pdf:l,png:i,ppt:s,pptx:s,qt:d,rar:n,swf:d,tar:n,"tar.gz":n,tgz:n,txt:c,vsd:u,vsdx:u,wav:a,webm:d,wma:a,wmv:d,xls:o,xlsx:o,zip:n,zipx:n,"7z":n},b=e.startsWith(".")?e.slice(1):e||"",g=h[b.toLowerCase()]||c;return g},be=function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1,e.name.length)||e.name;return Object(x.jsx)("div",{style:{padding:"0 0 0 8px"},children:he(t)})},ge=/(\.)(jpeg|jpg|jiff|png|gif|bmp)$/i,fe=/(\.)(aac|aiff|alac|flac|mp2|mp3|pcm|wav|wma)$/i,me=/(\.)(avchd|avi|flv|mpe|mpeg|mpg|mpv|mp4|m4p|m4v|mov|qt|swf|webm|wmv)$/i;!function(e){e.UnknownFileType="application/octet-stream"}(de||(de={}));var pe=["application/vnd.microsoft.card.adaptive","application/vnd.microsoft.card.audio","application/vnd.microsoft.card.hero","application/vnd.microsoft.card.receipt","application/vnd.microsoft.card.thumbnail","application/vnd.microsoft.card.signin","application/vnd.microsoft.card.oauth"];function je(e,t){var n=e.activity,a=e.attachment,c=Object.assign({},a);c.contentType=t.contentType,c.thumbnailUrl=t.thumbnailUrl;var o=n.attachments.map((function(e){return e===a?c:e})),i=Object.assign({},n);return i.attachments=o,{activity:i,attachment:c}}var ye,Oe=function(){console.log("[createAttachmentMiddleware]");return function(){return function(e){return function(t){console.log("%c [AttachmentMiddleware]","background: #ff69b4; color: #fff"),console.log(t);var n=t.activity.attachments,a=t.attachment;if(!n||!n.length||!a)return e(t);var c=a||{content:"",contentType:""},o=c.content,i=c.contentType,r=(o||{type:""}).type;if(!r&&o&&pe.includes(i))try{r=(o=JSON.parse(o)).type,t.attachment.content=o}catch(h){}if("AdaptiveCard"===r||pe.includes(i))return e(t);t.activity.channelData&&t.activity.channelData.middlewareData?a.contentUrl=t.activity.channelData.middlewareData[a.name]:a.tempContentUrl&&(a.contentUrl=a.tempContentUrl);var l=ge.test(a.name),s=fe.test(a.name),d=me.test(a.name);if(l){var u=je(t,{contentType:de.UnknownFileType,thumbnailUrl:void 0});return Object(x.jsxs)("div",{children:[t&&e(t),Object(x.jsxs)(ve,{children:[Object(x.jsx)(be,{name:a.name}),u&&e(u)]})]})}if((s||d)&&t.activity.actionType&&t.activity.actionType===Q){var v=je(t,{contentType:de.UnknownFileType,thumbnailUrl:void 0});return Object(x.jsxs)("div",{children:[t&&e(t),Object(x.jsxs)(ve,{children:[Object(x.jsx)(be,{name:a.name}),v&&e(v)]})]})}return Object(x.jsxs)(ve,{children:[Object(x.jsx)(be,{name:a.name}),e(t)]})}}}};!function(e){e.Bridged="bridged",e.Unbridged="unbridged"}(ye||(ye={}));var Ce=function(){function e(t){Object(b.a)(this,e),this.omnichannelConfig=t}return Object(g.a)(e,[{key:"applicable",value:function(e){return"DIRECT_LINE/POST_ACTIVITY_PENDING"===e.type&&e.payload&&e.payload.activity&&e.payload.activity.channelData}},{key:"apply",value:function(e){var t="ChannelId-lcw",n="FromCustomer",a=e;return a.payload.activity.channelData.tags?(a.payload.activity.channelData.tags.includes(t)||a.payload.activity.channelData.tags.push(t),a.payload.activity.channelData.tags.includes(n)||a.payload.activity.channelData.tags.push(n)):(a.payload.activity.channelData.tags=[t],a.payload.activity.channelData.tags.push(n)),a.payload.activity.channelData.metadata={deliveryMode:ye.Bridged,widgetId:this.omnichannelConfig.widgetId},{dispatchAction:null,nextAction:a}}}]),e}(),xe=function(e){return console.log("[createChannelDataMiddleware]"),new Ce(e)},we=function e(){Object(b.a)(this,e)};we.liveChatVersion=1,we.canUploadAttachment=!1,we.isPersistentChat=!1,we.isChatReconnect=!1;var Se=function(e){var t=e.LiveWSAndLiveChatEngJoin,n=e.LiveChatVersion,a="true"===t.msdyn_enablefileattachmentsforcustomers||!1,c="192350001"===t.msdyn_conversationmode||!1,o="192350000"===t.msdyn_conversationmode&&"true"===t.msdyn_enablechatreconnect||!1;return we.liveChatVersion=parseInt(n)||1,we.canUploadAttachment=a,we.isPersistentChat=c,we.isChatReconnect=o,we},Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};console.log("[createTypingIndicatorMiddleware]");var t=function(){return function(t){return function(t){console.log("%c [typingIndicatorMiddleware]","background: #2266e3; color: #fff"),console.log(t);var n=t.activeTyping,a=t.visible;if(!n||1===we.liveChatVersion&&!a)return null;var c=Object.keys(n).map((function(e){return n[e]}));return c.filter((function(e){return"user"===e.role})).length&&2===we.liveChatVersion&&!a?(e(),null):c&&c.length>0&&Object(x.jsxs)("div",{className:"webchat__typingIndicator",children:[Object(x.jsx)("div",{className:"bubble",style:{background:"#2266e3"}}),Object(x.jsx)("div",{className:"bubble",style:{background:"#2266e3"}}),Object(x.jsx)("div",{className:"bubble",style:{background:"#2266e3"}}),Object(x.jsxs)("div",{children:[" ","".concat(c[0].name||"Agent"," is typing...")," "]})]})}}};return t},ke=function(){var e={orgId:"d367c413-e0b9-408b-ae1c-382499b369ae",orgUrl:"https://omnichannel-crm.omnichannelengagementhub.com",widgetId:"3a352b95-5d67-4e47-af28-eca029b03928"},t=new URLSearchParams(window.location.search);return null!==t.get("orgUrl")&&(e.orgUrl=t.get("orgUrl")),null!==t.get("orgId")&&(e.orgId=t.get("orgId")),null!==t.get("widgetId")&&(e.widgetId=t.get("widgetId")),e},Ee=function(){var e={telemetry:{disable:!1,ariaTelemetryKey:""}},t=new URLSearchParams(window.location.search);return null!==t.get("telemetry")&&(e.telemetry.disable="true"!=t.get("telemetry")),null!==t.get("ariaTelemetryKey")&&(e.telemetry.ariaTelemetryKey=t.get("ariaTelemetryKey")||""),e},Me=function(){var e={disable:!0},t=new URLSearchParams(window.location.search);return null!==t.get("calling")&&(e.disable="false"==t.get("calling")),e},Te=function(){var e={disable:!0},t=new URLSearchParams(window.location.search);return null!==t.get("debug")&&(e.disable="true"!=t.get("debug")),e},qe=function(){var e={reconnectId:null},t=new URLSearchParams(window.location.search);return null!==t.get("oc.reconnectid")&&(e.reconnectId=t.get("oc.reconnectid")||null),e},ze=(n(2e3),ke()),He=Ee(),Ae=Me(),Ne=Te(),Ie=qe();console.log("%c [OmnichannelConfig]","background-color:#001433;color:#fff"),console.log(ze),console.log("%c [telemetryConfig]","background-color:#001433;color:#fff"),console.log(He),console.log("%c [callingConfig]","background-color:#001433;color:#fff"),console.log(Ae),console.log("%c [debugConfig]","background-color:#001433;color:#fff"),console.log(Ne);var De=se(),_e=ie(),Le=ue(),Re=xe(ze),Ue=Oe(),Be={bubbleBorderRadius:10,bubbleNubSize:10,bubbleNubOffset:15,bubbleFromUserBorderRadius:10,bubbleFromUserNubSize:10,bubbleFromUserNubOffset:15,bubbleFromUserBackground:"rgb(246, 246, 246)"};var We=function(){var e=Object(c.useContext)(V),t=e.state,n=e.dispatch,o=Object(c.useState)(),i=Object(v.a)(o,2),r=i[0],l=i[1],b=Object(c.useState)(void 0),g=Object(v.a)(b,2),f=g[0],m=g[1],p=Object(c.useState)(void 0),y=Object(v.a)(p,2),w=y[0],S=y[1],k=Object(c.useState)(void 0),E=Object(v.a)(k,2),M=E[0],T=E[1],z=Object(c.useState)(void 0),A=Object(v.a)(z,2),I=A[0],D=A[1],_=Object(c.useState)(void 0),L=Object(v.a)(_,2),R=L[0],U=L[1],B=Object(c.useState)(void 0),W=Object(v.a)(B,2),F=W[0],G=W[1],P=Object(c.useState)(void 0),J=Object(v.a)(P,2),Y=J[0],Q=J[1],X=Object(c.useState)(void 0),Z=Object(v.a)(X,2),te=Z[0],ae=Z[1],ce=Object(c.useState)(!1),oe=Object(v.a)(ce,2),ie=oe[0],re=oe[1];Object(c.useEffect)((function(){var e=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n,a,c,o,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(d.a)(Object(d.a)({},He),{},{chatReconnect:{disable:!1}}),(n=new C.OmnichannelChatSDK(ze,t)).setDebug(!Ne.disable),e.next=5,n.initialize();case 5:return l(n),e.next=8,n.getLiveChatConfig();case 8:if(a=e.sent,Se(a),(c=localStorage.getItem("liveChatContext"))&&Object.keys(JSON.parse(c)).length>0&&(console.log("[liveChatContext]"),console.log(c),m(c)),!n.getVoiceVideoCalling||Ae.disable){e.next=25;break}return e.prev=13,e.next=16,n.getVoiceVideoCalling();case 16:(o=e.sent).setDebug(!0),Q(o),console.log("VoiceVideoCalling loaded"),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(13),console.log("Failed to load VoiceVideoCalling: ".concat(e.t0));case 25:return e.next=27,n.getPreChatSurvey(!1);case 27:(i=e.sent)&&(console.info("[PreChatSurvey]"),r=i,i=JSON.parse(r.replaceAll("&#42;","*")),console.log(i),S(i));case 29:case"end":return e.stop()}var r}),e,null,[[13,22]])})));return function(){return e.apply(this,arguments)}}();console.log(t),e()}),[]);var le=Object(c.useMemo)((function(){return Object(d.a)(Object(d.a)({},Be),{},{hideUploadButton:!we.canUploadAttachment,hideSendBox:ie})}),[we.canUploadAttachment,ie]),se=Object(c.useCallback)((function(e){console.log("[onNewMessage] ".concat(e.content)),n({type:a.SET_LOADING,payload:!1})}),[n]),de=Object(c.useCallback)((function(){console.log("[onTypingEvent]")}),[]),ue=Object(c.useCallback)((function(){console.log("[onAgentEndSession]"),re(!0)}),[]),ve=Object(c.useCallback)(function(){var e=Object(u.a)(s.a.mark((function e(c){var o,i,l,d,u,v,h,b,g=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=g.length>1&&void 0!==g[1]?g[1]:{},!t.hasChatStarted){e.next=3;break}return e.abrupt("return");case 3:return console.log("[startChat]"),i=Ve((function(){null===r||void 0===r||r.sendTypingEvent()})),ae((function(){return i})),e.next=8,null===r||void 0===r?void 0:r.getDataMaskingRules();case 8:if(l=e.sent,d=ee(),U(d.create()),d.subscribe("DataMasking",ne(l)),d.subscribe("ChannelData",Re),f&&Object.keys(JSON.parse(f)).length>0&&(console.log("[liveChatContext]"),o.liveChatContext=JSON.parse(f)),n({type:a.SET_CHAT_STARTED,payload:!0}),!we.isChatReconnect||!Ie.reconnectId){e.next=21;break}return e.next=18,null===r||void 0===r?void 0:r.getChatReconnectContext({reconnectId:Ie.reconnectId});case 18:(null===(u=e.sent)||void 0===u?void 0:u.redirectURL)&&window.location.replace(null===u||void 0===u?void 0:u.redirectURL),(null===u||void 0===u?void 0:u.reconnectId)&&(o.reconnectId=null===u||void 0===u?void 0:u.reconnectId);case 21:if(!f&&w&&!Ie.reconnectId){e.next=49;break}return n({type:a.SET_LOADING,payload:!0}),e.prev=23,e.next=26,null===r||void 0===r?void 0:r.startChat(o);case 26:e.next=32;break;case 28:return e.prev=28,e.t0=e.catch(23),console.log("Unable to start chat: ".concat(e.t0.message)),e.abrupt("return");case 32:return e.next=34,null===r||void 0===r?void 0:r.getCurrentLiveChatContext();case 34:return(v=e.sent)&&Object.keys(v).length&&(console.log("[newliveChatContext]"),console.log(v),localStorage.setItem("liveChatContext",JSON.stringify(v))),null===r||void 0===r||r.onNewMessage(se,{rehydrate:!0}),null===r||void 0===r||r.onTypingEvent(de),null===r||void 0===r||r.onAgentEndSession(ue),e.next=41,null===r||void 0===r?void 0:r.createChatAdapter();case 41:if(h=e.sent,D(h),n({type:a.SET_LOADING,payload:!1}),!(null===r||void 0===r?void 0:r.getVoiceVideoCalling)){e.next=49;break}return e.next=47,null===r||void 0===r?void 0:r.getChatToken();case 47:b=e.sent,G(b);case 49:case"end":return e.stop()}}),e,null,[[23,28]])})));return function(t){return e.apply(this,arguments)}}(),[r,t,n,ue,se,de,f,w]),he=Object(c.useCallback)(Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[endChat]"),e.next=3,null===r||void 0===r?void 0:r.endChat();case 3:I.end&&I.end(),null===Y||void 0===Y||Y.close(),D(void 0),G(void 0),m(void 0),S(void 0),T(void 0),re(!1),localStorage.removeItem("liveChatContext"),n({type:a.SET_CHAT_STARTED,payload:!1});case 13:case"end":return e.stop()}}),e)}))),[r,I,n,Y]),be=Object(c.useCallback)(Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[downloadTranscript]"),e.next=3,null===r||void 0===r?void 0:r.getLiveChatTranscript();case 3:t=e.sent,console.log(t);case 5:case"end":return e.stop()}}),e)}))),[r]),ge=Object(c.useCallback)(Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[emailTranscript]"),t={emailAddress:"foo@bar.com",attachmentMessage:"Transcript"},e.next=4,null===r||void 0===r?void 0:r.emailLiveChatTranscript(t);case 4:case"end":return e.stop()}}),e)}))),[r]),fe=Object(c.useCallback)((function(){var e=new j,t=new h.AdaptiveCard,c=new h.SerializationContext;c.onParseElement=function(t,n,a){e.attachFieldValidator(t,n,a)},t.parse(w,c),t.onExecuteAction=function(){var c=Object(u.a)(s.a.mark((function c(o){var i,l,d,u,v,h,b;return s.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(i=t.getAllInputs(),l=e.canSubmitSurvey(i),console.log("[canSubmitSurvey] ".concat(l)),l){c.next=5;break}return c.abrupt("return");case 5:return d=o.data,T(d),u={},d&&(u.preChatResponse=d),n({type:a.SET_LOADING,payload:!0}),c.prev=10,c.next=13,null===r||void 0===r?void 0:r.startChat(u);case 13:c.next=19;break;case 15:return c.prev=15,c.t0=c.catch(10),console.log("Unable to start chat: ".concat(c.t0.message)),c.abrupt("return");case 19:return c.next=21,null===r||void 0===r?void 0:r.getCurrentLiveChatContext();case 21:return(v=c.sent)&&Object.keys(v).length&&localStorage.setItem("liveChatContext",JSON.stringify(v)),null===r||void 0===r||r.onNewMessage(se,{rehydrate:!0}),null===r||void 0===r||r.onTypingEvent(de),null===r||void 0===r||r.onAgentEndSession(ue),c.next=28,null===r||void 0===r?void 0:r.createChatAdapter();case 28:if(h=c.sent,D(h),n({type:a.SET_LOADING,payload:!1}),!(null===r||void 0===r?void 0:r.getVoiceVideoCalling)){c.next=36;break}return c.next=34,null===r||void 0===r?void 0:r.getChatToken();case 34:b=c.sent,G(b);case 36:case"end":return c.stop()}}),c,null,[[10,15]])})));return function(e){return c.apply(this,arguments)}}();var o=t.render();return Object(x.jsx)("div",{ref:function(e){e&&e.firstChild&&e.removeChild(e.firstChild),o&&e&&e.appendChild(o)}})}),[r,w]);return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{children:!t.hasChatStarted&&Object(x.jsx)(H,{onClick:ve})}),t.hasChatStarted&&Object(x.jsxs)("div",{className:ie?"chat-container noSendBox":"chat-container",children:[Object(x.jsx)(N,{title:"Live Chat via Chat SDK",onClick:he}),(!f||!Object.keys(f).length)&&w&&!M&&fe(),t.isLoading&&Object(x.jsx)(q,{}),!Ae.disable&&Y&&F&&Object(x.jsx)(K,{VoiceVideoCallingSDK:Y,OCClient:null===r||void 0===r?void 0:r.OCClient,chatToken:F}),!t.isLoading&&t.hasChatStarted&&I&&R&&_e&&te&&Object(x.jsx)(O.a,{activityMiddleware:_e,avatarMiddleware:De,activityStatusMiddleware:Le,typingIndicatorMiddleware:te,attachmentMiddleware:Ue,userID:"teamsvisitor",directLine:I,sendTypingIndicator:!0,store:R,styleOptions:le}),!t.isLoading&&t.hasChatStarted&&I&&Object(x.jsx)($,{onDownloadClick:be,onEmailTranscriptClick:ge})]})]})},Fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,2026)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),o(e),i(e)}))};r.a.render(Object(x.jsx)(o.a.StrictMode,{children:Object(x.jsx)(E,{children:Object(x.jsx)(We,{})})}),document.getElementById("root")),Fe()},437:function(e,t){},438:function(e,t){},823:function(e,t){},845:function(e,t,n){}},[[2003,1,2]]]);
//# sourceMappingURL=main.78973ad8.chunk.js.map