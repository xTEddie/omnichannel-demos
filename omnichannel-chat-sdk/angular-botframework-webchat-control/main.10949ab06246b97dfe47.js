(self.webpackChunkangular_botframework_webchat_control=self.webpackChunkangular_botframework_webchat_control||[]).push([[179],{8255:K=>{function m(u){return Promise.resolve().then(()=>{var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s})}m.keys=()=>[],m.resolve=m,m.id=8255,K.exports=m},4637:(K,m,u)=>{"use strict";u.d(m,{_:()=>f});var s=u(4762),_=new WeakMap,h=new WeakMap,p=function(){function I(){this.onabort=null,_.set(this,[]),h.set(this,!1)}return Object.defineProperty(I.prototype,"aborted",{get:function(){if(!h.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");return h.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(I,"none",{get:function(){return new I},enumerable:!1,configurable:!0}),I.prototype.addEventListener=function(b,c){if(!_.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");_.get(this).push(c)},I.prototype.removeEventListener=function(b,c){if(!_.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");var d=_.get(this),C=d.indexOf(c);C>-1&&d.splice(C,1)},I.prototype.dispatchEvent=function(b){throw new Error("This is a stub dispatchEvent implementation that should not be used.  It only exists for type-checking purposes.")},I}();function E(I){if(!I.aborted){I.onabort&&I.onabort.call(I);var b=_.get(I);b&&b.slice().forEach(function(c){c.call(I,{type:"abort"})}),h.set(I,!0)}}var f=function(I){function b(c){var d=I.call(this,c)||this;return d.name="AbortError",d}return(0,s.ZT)(b,I),b}(Error);!function(){function I(b){var c=this;if(this._signal=new p,b){Array.isArray(b)||(b=arguments);for(var d=0,C=b;d<C.length;d++){var w=C[d];w.aborted?this.abort():w.addEventListener("abort",function(){c.abort()})}}}Object.defineProperty(I.prototype,"signal",{get:function(){return this._signal},enumerable:!1,configurable:!0}),I.prototype.abort=function(){E(this._signal)},I.timeout=function(b){var c=new p,d=setTimeout(E,b,c);return"function"==typeof d.unref&&d.unref(),c}}()},7623:(K,m,u)=>{"use strict";u.r(m),u.d(m,{ChatClient:()=>Ia,ChatThreadClient:()=>Oo});var s={};u.r(s),u.d(s,{AddChatParticipantsRequest:()=>dt,AddChatParticipantsResult:()=>Ze,ChatError:()=>xt,ChatMessage:()=>he,ChatMessageContent:()=>Ve,ChatMessageReadReceipt:()=>At,ChatMessageReadReceiptsCollection:()=>yt,ChatMessagesCollection:()=>Xi,ChatParticipant:()=>Ee,ChatParticipantsCollection:()=>gt,ChatThreadItem:()=>Eo,ChatThreadProperties:()=>cn,ChatThreadsItemCollection:()=>Bn,CommunicationErrorResponse:()=>et,CommunicationIdentifierModel:()=>Ot,CommunicationUserIdentifierModel:()=>zt,CreateChatThreadRequest:()=>vn,CreateChatThreadResult:()=>an,MicrosoftTeamsUserIdentifierModel:()=>Jn,PhoneNumberIdentifierModel:()=>Qn,SendChatMessageRequest:()=>Li,SendChatMessageResult:()=>Fi,SendReadReceiptRequest:()=>pr,SendTypingNotificationRequest:()=>Dn,UpdateChatMessageRequest:()=>tt,UpdateChatThreadRequest:()=>Ct});var _=u(8239),h=u(4762),p=u(1326);const E=(0,p.YR)("communication-chat");var f=u(3105),v=u(2305),b=u(1643),c=u(1259);const d=(0,c.q)({packagePrefix:"Azure.Communication",namespace:"Microsoft.Communication"});var C=u(8199);const g=V=>{const{id:O}=V,U=(0,h._T)(V,["id"]);return Object.assign(Object.assign({},U),{communicationIdentifier:(0,C.J)(O)})},M=V=>{const{communicationIdentifier:O}=V,U=(0,h._T)(V,["communicationIdentifier"]);return Object.assign(Object.assign({},U),{id:(0,C.H)(O)})},R=V=>{const{participants:O,initiatorCommunicationIdentifier:U}=V,G=(0,h._T)(V,["participants","initiatorCommunicationIdentifier"]);let J=Object.assign({},G);if(U){const ae=(0,C.H)(U);J=Object.assign(Object.assign({},J),{initiator:ae})}return O&&(J=Object.assign(Object.assign({},J),{participants:null==O?void 0:O.map(ae=>M(ae))})),J},S=V=>{const{content:O,senderCommunicationIdentifier:U}=V,G=(0,h._T)(V,["content","senderCommunicationIdentifier"]);let J=Object.assign({},G);if(O&&(J=Object.assign(Object.assign({},J),{content:R(O)})),U){const ae=(0,C.H)(U);J=Object.assign(Object.assign({},J),{sender:ae})}return J},P=V=>{const{createdByCommunicationIdentifier:O}=V,U=(0,h._T)(V,["createdByCommunicationIdentifier"]);return O?Object.assign(Object.assign({},U),{createdBy:(0,C.H)(O)}):Object.assign({},U)},A=V=>{const{senderCommunicationIdentifier:O}=V,U=(0,h._T)(V,["senderCommunicationIdentifier"]);return Object.assign(Object.assign({},U),{sender:(0,C.H)(O)})};function F(V,O){return"Composite"!==O&&"Dictionary"!==O&&("string"==typeof V||"number"==typeof V||"boolean"==typeof V||null!==(null==O?void 0:O.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i))||null==V)}const q=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,ue=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;function ie(V,O){var U,G;const J=V.parsedHeaders;if("HEAD"===V.request.method)return Object.assign(Object.assign({},J),{body:V.parsedBody});const ae=O&&O.bodyMapper,oe=Boolean(null==ae?void 0:ae.nullable),ge=null==ae?void 0:ae.type.name;if("Stream"===ge)return Object.assign(Object.assign({},J),{blobBody:V.blobBody,readableStreamBody:V.readableStreamBody});const Ne="Composite"===ge&&ae.type.modelProperties||{},De=Object.keys(Ne).some(Me=>""===Ne[Me].serializedName);if("Sequence"===ge||De){const Me=null!==(U=V.parsedBody)&&void 0!==U?U:[];for(const $e of Object.keys(Ne))Ne[$e].serializedName&&(Me[$e]=null===(G=V.parsedBody)||void 0===G?void 0:G[$e]);if(J)for(const $e of Object.keys(J))Me[$e]=J[$e];return!oe||V.parsedBody||J||0!==Object.getOwnPropertyNames(Ne).length?Me:null}return function(V){const O=Object.assign(Object.assign({},V.headers),V.body);return V.hasNullableType&&0===Object.getOwnPropertyNames(O).length?V.shouldWrapBody?{body:null}:null:V.shouldWrapBody?Object.assign(Object.assign({},V.headers),{body:V.body}):O}({body:V.parsedBody,headers:J,hasNullableType:oe,shouldWrapBody:F(V.parsedBody,ge)})}function Te(V){let O="";for(let U=0;U<V.length;U++)O+=String.fromCharCode(V[U]);return btoa(O)}function te(V){const O=atob(V),U=new Uint8Array(O.length);for(let G=0;G<O.length;G++)U[G]=O.charCodeAt(G);return U}const le="$",Z="_";class z{constructor(O={},U=!1){this.modelMappers=O,this.isXML=U}validateConstraints(O,U,G){const J=(ae,oe)=>{throw new Error(`"${G}" with value "${U}" should satisfy the constraint "${ae}": ${oe}.`)};if(O.constraints&&null!=U){const{ExclusiveMaximum:ae,ExclusiveMinimum:oe,InclusiveMaximum:ge,InclusiveMinimum:Ne,MaxItems:De,MaxLength:Me,MinItems:$e,MinLength:Je,MultipleOf:wt,Pattern:Dt,UniqueItems:Ft}=O.constraints;if(void 0!==ae&&U>=ae&&J("ExclusiveMaximum",ae),void 0!==oe&&U<=oe&&J("ExclusiveMinimum",oe),void 0!==ge&&U>ge&&J("InclusiveMaximum",ge),void 0!==Ne&&U<Ne&&J("InclusiveMinimum",Ne),void 0!==De&&U.length>De&&J("MaxItems",De),void 0!==Me&&U.length>Me&&J("MaxLength",Me),void 0!==$e&&U.length<$e&&J("MinItems",$e),void 0!==Je&&U.length<Je&&J("MinLength",Je),void 0!==wt&&U%wt!=0&&J("MultipleOf",wt),Dt){const hn="string"==typeof Dt?new RegExp(Dt):Dt;("string"!=typeof U||null===U.match(hn))&&J("Pattern",Dt)}Ft&&U.some((hn,gn,Mn)=>Mn.indexOf(hn)!==gn)&&J("UniqueItems",Ft)}}serialize(O,U,G,J={xml:{}}){var ae,oe,ge;const Ne={xml:{rootName:null!==(ae=J.xml.rootName)&&void 0!==ae?ae:"",includeRoot:null!==(oe=J.xml.includeRoot)&&void 0!==oe&&oe,xmlCharKey:null!==(ge=J.xml.xmlCharKey)&&void 0!==ge?ge:Z}};let De={};const Me=O.type.name;G||(G=O.serializedName),null!==Me.match(/^Sequence$/i)&&(De=[]),O.isConstant&&(U=O.defaultValue);const{required:$e,nullable:Je}=O;if($e&&Je&&void 0===U)throw new Error(`${G} cannot be undefined.`);if($e&&!Je&&null==U)throw new Error(`${G} cannot be null or undefined.`);if(!$e&&!1===Je&&null===U)throw new Error(`${G} cannot be null.`);return null==U?De=U:(this.validateConstraints(O,U,G),null!==Me.match(/^any$/i)?De=U:null!==Me.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)?De=function(V,O,U){if(null!=U)if(null!==V.match(/^Number$/i)){if("number"!=typeof U)throw new Error(`${O} with value ${U} must be of type number.`)}else if(null!==V.match(/^String$/i)){if("string"!=typeof U.valueOf())throw new Error(`${O} with value "${U}" must be of type string.`)}else if(null!==V.match(/^Uuid$/i)){if("string"!=typeof U.valueOf()||!function(V){return ue.test(V)}(U))throw new Error(`${O} with value "${U}" must be of type string and a valid uuid.`)}else if(null!==V.match(/^Boolean$/i)){if("boolean"!=typeof U)throw new Error(`${O} with value ${U} must be of type boolean.`)}else if(!(null===V.match(/^Stream$/i)||"string"==typeof U||"function"==typeof U.pipe||U instanceof ArrayBuffer||ArrayBuffer.isView(U)||("function"==typeof Blob||"object"==typeof Blob)&&U instanceof Blob))throw new Error(`${O} must be a string, Blob, ArrayBuffer, ArrayBufferView, or NodeJS.ReadableStream.`);return U}(Me,G,U):null!==Me.match(/^Enum$/i)?De=function(V,O,U){if(!O)throw new Error(`Please provide a set of allowedValues to validate ${V} as an Enum Type.`);if(!O.some(J=>"string"==typeof J.valueOf()?J.toLowerCase()===U.toLowerCase():J===U))throw new Error(`${U} is not a valid value for ${V}. The valid values are: ${JSON.stringify(O)}.`);return U}(G,O.type.allowedValues,U):null!==Me.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)?De=function(V,O,U){if(null!=O)if(null!==V.match(/^Date$/i)){if(!(O instanceof Date||"string"==typeof O.valueOf()&&!isNaN(Date.parse(O))))throw new Error(`${U} must be an instanceof Date or a string in ISO8601 format.`);O=O instanceof Date?O.toISOString().substring(0,10):new Date(O).toISOString().substring(0,10)}else if(null!==V.match(/^DateTime$/i)){if(!(O instanceof Date||"string"==typeof O.valueOf()&&!isNaN(Date.parse(O))))throw new Error(`${U} must be an instanceof Date or a string in ISO8601 format.`);O=O instanceof Date?O.toISOString():new Date(O).toISOString()}else if(null!==V.match(/^DateTimeRfc1123$/i)){if(!(O instanceof Date||"string"==typeof O.valueOf()&&!isNaN(Date.parse(O))))throw new Error(`${U} must be an instanceof Date or a string in RFC-1123 format.`);O=O instanceof Date?O.toUTCString():new Date(O).toUTCString()}else if(null!==V.match(/^UnixTime$/i)){if(!(O instanceof Date||"string"==typeof O.valueOf()&&!isNaN(Date.parse(O))))throw new Error(`${U} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);O=function(V){if(V)return"string"==typeof V.valueOf()&&(V=new Date(V)),Math.floor(V.getTime()/1e3)}(O)}else if(null!==V.match(/^TimeSpan$/i)&&!function(V){return q.test(V)}(O))throw new Error(`${U} must be a string in ISO 8601 format. Instead was "${O}".`);return O}(Me,U,G):null!==Me.match(/^ByteArray$/i)?De=function(V,O){if(null!=O){if(!(O instanceof Uint8Array))throw new Error(`${V} must be of type Uint8Array.`);O=Te(O)}return O}(G,U):null!==Me.match(/^Base64Url$/i)?De=function(V,O){if(null!=O){if(!(O instanceof Uint8Array))throw new Error(`${V} must be of type Uint8Array.`);O=function(V){if(V){if(!(V instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");return function(V,O){let U=V.length;for(;U-1>=0&&"="===V[U-1];)--U;return V.substr(0,U)}(Te(V)).replace(/\+/g,"-").replace(/\//g,"_")}}(O)}return O}(G,U):null!==Me.match(/^Sequence$/i)?De=function(V,O,U,G,J,ae){var oe;if(!Array.isArray(U))throw new Error(`${G} must be of type Array.`);let ge=O.type.element;if(!ge||"object"!=typeof ge)throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${G}.`);"Composite"===ge.type.name&&ge.type.className&&(ge=null!==(oe=V.modelMappers[ge.type.className])&&void 0!==oe?oe:ge);const Ne=[];for(let De=0;De<U.length;De++){const Me=V.serialize(ge,U[De],G,ae);if(J&&ge.xmlNamespace){const $e=ge.xmlNamespacePrefix?`xmlns:${ge.xmlNamespacePrefix}`:"xmlns";"Composite"===ge.type.name?(Ne[De]=Object.assign({},Me),Ne[De][le]={[$e]:ge.xmlNamespace}):(Ne[De]={},Ne[De][ae.xml.xmlCharKey]=Me,Ne[De][le]={[$e]:ge.xmlNamespace})}else Ne[De]=Me}return Ne}(this,O,U,G,Boolean(this.isXML),Ne):null!==Me.match(/^Dictionary$/i)?De=function(V,O,U,G,J,ae){if("object"!=typeof U)throw new Error(`${G} must be of type object.`);const oe=O.type.value;if(!oe||"object"!=typeof oe)throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${G}.`);const ge={};for(const Ne of Object.keys(U)){const De=V.serialize(oe,U[Ne],G,ae);ge[Ne]=st(oe,De,J,ae)}if(J&&O.xmlNamespace){const De=ge;return De[le]={[O.xmlNamespacePrefix?`xmlns:${O.xmlNamespacePrefix}`:"xmlns"]:O.xmlNamespace},De}return ge}(this,O,U,G,Boolean(this.isXML),Ne):null!==Me.match(/^Composite$/i)&&(De=function(V,O,U,G,J,ae){if(Ae(V,O)&&(O=Zt(V,O,U,"clientName")),null!=U){const oe={},ge=Xe(V,O,G);for(const De of Object.keys(ge)){const Me=ge[De];if(Me.readOnly)continue;let $e,Je=oe;if(V.isXML)$e=Me.xmlIsWrapped?Me.xmlName:Me.xmlElementName||Me.xmlName;else{const wt=re(Me.serializedName);$e=wt.pop();for(const Dt of wt)null==Je[Dt]&&(null!=U[De]||void 0!==Me.defaultValue)&&(Je[Dt]={}),Je=Je[Dt]}if(null!=Je){if(J&&O.xmlNamespace){const gn=O.xmlNamespacePrefix?`xmlns:${O.xmlNamespacePrefix}`:"xmlns";Je[le]=Object.assign(Object.assign({},Je[le]),{[gn]:O.xmlNamespace})}const wt=""!==Me.serializedName?G+"."+Me.serializedName:G;let Dt=U[De];const Ft=Ae(V,O);Ft&&Ft.clientName===De&&null==Dt&&(Dt=O.serializedName);const hn=V.serialize(Me,Dt,wt,ae);if(void 0!==hn&&null!=$e){const gn=st(Me,hn,J,ae);J&&Me.xmlIsAttribute?(Je[le]=Je[le]||{},Je[le][$e]=hn):Je[$e]=J&&Me.xmlIsWrapped?{[Me.xmlElementName]:gn}:gn}}}const Ne=function(V,O,U){const G=O.type.additionalProperties;if(!G&&O.type.className){const J=Ye(V,O,U);return null==J?void 0:J.type.additionalProperties}return G}(V,O,G);if(Ne){const De=Object.keys(ge);for(const Me in U)De.every(Je=>Je!==Me)&&(oe[Me]=V.serialize(Ne,U[Me],G+'["'+Me+'"]',ae))}return oe}return U}(this,O,U,G,Boolean(this.isXML),Ne))),De}deserialize(O,U,G,J={xml:{}}){var ae,oe,ge;const Ne={xml:{rootName:null!==(ae=J.xml.rootName)&&void 0!==ae?ae:"",includeRoot:null!==(oe=J.xml.includeRoot)&&void 0!==oe&&oe,xmlCharKey:null!==(ge=J.xml.xmlCharKey)&&void 0!==ge?ge:Z}};if(null==U)return this.isXML&&"Sequence"===O.type.name&&!O.xmlIsWrapped&&(U=[]),void 0!==O.defaultValue&&(U=O.defaultValue),U;let De;const Me=O.type.name;if(G||(G=O.serializedName),null!==Me.match(/^Composite$/i))De=function(V,O,U,G,J){var ae;Ae(V,O)&&(O=Zt(V,O,U,"serializedName"));const oe=Xe(V,O,G);let ge={};const Ne=[];for(const Me of Object.keys(oe)){const $e=oe[Me],Je=re(oe[Me].serializedName);Ne.push(Je[0]);const{serializedName:wt,xmlName:Dt,xmlElementName:Ft}=$e;let hn=G;""!==wt&&void 0!==wt&&(hn=G+"."+wt);const gn=$e.headerCollectionPrefix;if(gn){const Mn={};for(const En of Object.keys(U))En.startsWith(gn)&&(Mn[En.substring(gn.length)]=V.deserialize($e.type.value,U[En],hn,J)),Ne.push(En);ge[Me]=Mn}else if(V.isXML)if($e.xmlIsAttribute&&U[le])ge[Me]=V.deserialize($e,U[le][Dt],hn,J);else{const Mn=Ft||Dt||wt;if($e.xmlIsWrapped){const En=U[Dt],Tr=null!==(ae=null==En?void 0:En[Ft])&&void 0!==ae?ae:[];ge[Me]=V.deserialize($e,Tr,hn,J)}else ge[Me]=V.deserialize($e,U[Mn],hn,J)}else{let Mn,En=U;for(const Vr of Je){if(!En)break;En=En[Vr]}Mn=En;const Tr=O.type.polymorphicDiscriminator;let ii;if(Tr&&Me===Tr.clientName&&null==Mn&&(Mn=O.serializedName),Array.isArray(U[Me])&&""===oe[Me].serializedName){Mn=U[Me];const Vr=V.deserialize($e,Mn,hn,J);for(const[fo,is]of Object.entries(ge))Object.prototype.hasOwnProperty.call(Vr,fo)||(Vr[fo]=is);ge=Vr}else(void 0!==Mn||void 0!==$e.defaultValue)&&(ii=V.deserialize($e,Mn,hn,J),ge[Me]=ii)}}const De=O.type.additionalProperties;if(De){const Me=$e=>{for(const Je in oe)if(re(oe[Je].serializedName)[0]===$e)return!1;return!0};for(const $e in U)Me($e)&&(ge[$e]=V.deserialize(De,U[$e],G+'["'+$e+'"]',J))}else if(U)for(const Me of Object.keys(U))void 0===ge[Me]&&!Ne.includes(Me)&&!Ue(Me,J)&&(ge[Me]=U[Me]);return ge}(this,O,U,G,Ne);else{if(this.isXML){const $e=Ne.xml.xmlCharKey;void 0!==U[le]&&void 0!==U[$e]&&(U=U[$e])}null!==Me.match(/^Number$/i)?(De=parseFloat(U),isNaN(De)&&(De=U)):null!==Me.match(/^Boolean$/i)?De="true"===U||"false"!==U&&U:null!==Me.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)?De=U:null!==Me.match(/^(Date|DateTime|DateTimeRfc1123)$/i)?De=new Date(U):null!==Me.match(/^UnixTime$/i)?De=function(V){if(V)return new Date(1e3*V)}(U):null!==Me.match(/^ByteArray$/i)?De=te(U):null!==Me.match(/^Base64Url$/i)?De=function(V){if(V){if(V&&"string"!=typeof V.valueOf())throw new Error("Please provide an input of type string for converting to Uint8Array");return te(V=V.replace(/-/g,"+").replace(/_/g,"/"))}}(U):null!==Me.match(/^Sequence$/i)?De=function(V,O,U,G,J){var ae;let oe=O.type.element;if(!oe||"object"!=typeof oe)throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${G}`);if(U){Array.isArray(U)||(U=[U]),"Composite"===oe.type.name&&oe.type.className&&(oe=null!==(ae=V.modelMappers[oe.type.className])&&void 0!==ae?ae:oe);const ge=[];for(let Ne=0;Ne<U.length;Ne++)ge[Ne]=V.deserialize(oe,U[Ne],`${G}[${Ne}]`,J);return ge}return U}(this,O,U,G,Ne):null!==Me.match(/^Dictionary$/i)&&(De=function(V,O,U,G,J){const ae=O.type.value;if(!ae||"object"!=typeof ae)throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${G}`);if(U){const oe={};for(const ge of Object.keys(U))oe[ge]=V.deserialize(ae,U[ge],G,J);return oe}return U}(this,O,U,G,Ne))}return O.isConstant&&(De=O.defaultValue),De}}function ne(V={},O=!1){return new z(V,O)}function re(V){const O=[];let U="";if(V){const G=V.split(".");for(const J of G)"\\"===J.charAt(J.length-1)?U+=J.substr(0,J.length-1)+".":(U+=J,O.push(U),U="")}return O}function Ye(V,O,U){const G=O.type.className;if(!G)throw new Error(`Class name for model "${U}" is not provided in the mapper "${JSON.stringify(O,void 0,2)}".`);return V.modelMappers[G]}function Xe(V,O,U){let G=O.type.modelProperties;if(!G){const J=Ye(V,O,U);if(!J)throw new Error(`mapper() cannot be null or undefined for model "${O.type.className}".`);if(G=null==J?void 0:J.type.modelProperties,!G)throw new Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(J)}" of type "${O.type.className}" for object "${U}".`)}return G}function st(V,O,U,G){if(!U||!V.xmlNamespace)return O;const ae={[V.xmlNamespacePrefix?`xmlns:${V.xmlNamespacePrefix}`:"xmlns"]:V.xmlNamespace};if(["Composite"].includes(V.type.name)){if(O[le])return O;{const ge=Object.assign({},O);return ge[le]=ae,ge}}const oe={};return oe[G.xml.xmlCharKey]=O,oe[le]=ae,oe}function Ue(V,O){return[le,O.xml.xmlCharKey].includes(V)}function Zt(V,O,U,G){const J=Ae(V,O);if(J){let ae=J[G];if(ae){"serializedName"===G&&(ae=ae.replace(/\\/gi,""));const oe=U[ae];if(null!=oe){const ge=O.type.uberParent||O.type.className,De=V.modelMappers.discriminators[oe===ge?oe:ge+"."+oe];De&&(O=De)}}}return O}function Ae(V,O){return O.type.polymorphicDiscriminator||ze(V,O.type.uberParent)||ze(V,O.type.className)}function ze(V,O){return O&&V.modelMappers[O]&&V.modelMappers[O].type.polymorphicDiscriminator}const yt={type:{name:"Composite",className:"ChatMessageReadReceiptsCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatMessageReadReceipt"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},At={type:{name:"Composite",className:"ChatMessageReadReceipt",modelProperties:{senderCommunicationIdentifier:{serializedName:"senderCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},chatMessageId:{serializedName:"chatMessageId",required:!0,type:{name:"String"}},readOn:{serializedName:"readOn",required:!0,type:{name:"DateTime"}}}}},Ot={type:{name:"Composite",className:"CommunicationIdentifierModel",modelProperties:{rawId:{serializedName:"rawId",type:{name:"String"}},communicationUser:{serializedName:"communicationUser",type:{name:"Composite",className:"CommunicationUserIdentifierModel"}},phoneNumber:{serializedName:"phoneNumber",type:{name:"Composite",className:"PhoneNumberIdentifierModel"}},microsoftTeamsUser:{serializedName:"microsoftTeamsUser",type:{name:"Composite",className:"MicrosoftTeamsUserIdentifierModel"}}}}},zt={type:{name:"Composite",className:"CommunicationUserIdentifierModel",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}}}}},Qn={type:{name:"Composite",className:"PhoneNumberIdentifierModel",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"String"}}}}},Jn={type:{name:"Composite",className:"MicrosoftTeamsUserIdentifierModel",modelProperties:{userId:{serializedName:"userId",required:!0,type:{name:"String"}},isAnonymous:{serializedName:"isAnonymous",type:{name:"Boolean"}},cloud:{serializedName:"cloud",type:{name:"String"}}}}},et={type:{name:"Composite",className:"CommunicationErrorResponse",modelProperties:{error:{serializedName:"error",type:{name:"Composite",className:"ChatError"}}}}},xt={type:{name:"Composite",className:"ChatError",modelProperties:{code:{serializedName:"code",required:!0,type:{name:"String"}},message:{serializedName:"message",required:!0,type:{name:"String"}},target:{serializedName:"target",readOnly:!0,type:{name:"String"}},details:{serializedName:"details",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}},innerError:{serializedName:"innererror",type:{name:"Composite",className:"ChatError"}}}}},pr={type:{name:"Composite",className:"SendReadReceiptRequest",modelProperties:{chatMessageId:{serializedName:"chatMessageId",required:!0,type:{name:"String"}}}}},Li={type:{name:"Composite",className:"SendChatMessageRequest",modelProperties:{content:{serializedName:"content",required:!0,type:{name:"String"}},senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}},type:{serializedName:"type",type:{name:"Enum",allowedValues:["text","html","topicUpdated","participantAdded","participantRemoved"]}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},Fi={type:{name:"Composite",className:"SendChatMessageResult",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}}}}},Xi={type:{name:"Composite",className:"ChatMessagesCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatMessage"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},he={type:{name:"Composite",className:"ChatMessage",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},type:{serializedName:"type",required:!0,type:{name:"Enum",allowedValues:["text","html","topicUpdated","participantAdded","participantRemoved"]}},sequenceId:{serializedName:"sequenceId",required:!0,type:{name:"String"}},version:{serializedName:"version",required:!0,type:{name:"String"}},content:{serializedName:"content",type:{name:"Composite",className:"ChatMessageContent"}},senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}},createdOn:{serializedName:"createdOn",required:!0,type:{name:"DateTime"}},senderCommunicationIdentifier:{serializedName:"senderCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},editedOn:{serializedName:"editedOn",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},Ve={type:{name:"Composite",className:"ChatMessageContent",modelProperties:{message:{serializedName:"message",type:{name:"String"}},topic:{serializedName:"topic",type:{name:"String"}},participants:{serializedName:"participants",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},initiatorCommunicationIdentifier:{serializedName:"initiatorCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}}}}},Ee={type:{name:"Composite",className:"ChatParticipant",modelProperties:{communicationIdentifier:{serializedName:"communicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},displayName:{serializedName:"displayName",type:{name:"String"}},shareHistoryTime:{serializedName:"shareHistoryTime",type:{name:"DateTime"}}}}},tt={type:{name:"Composite",className:"UpdateChatMessageRequest",modelProperties:{content:{serializedName:"content",type:{name:"String"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},gt={type:{name:"Composite",className:"ChatParticipantsCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},dt={type:{name:"Composite",className:"AddChatParticipantsRequest",modelProperties:{participants:{serializedName:"participants",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}}}}},Ze={type:{name:"Composite",className:"AddChatParticipantsResult",modelProperties:{invalidParticipants:{serializedName:"invalidParticipants",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}}}}},vn={type:{name:"Composite",className:"CreateChatThreadRequest",modelProperties:{topic:{serializedName:"topic",required:!0,type:{name:"String"}},participants:{serializedName:"participants",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}}}}},an={type:{name:"Composite",className:"CreateChatThreadResult",modelProperties:{chatThread:{serializedName:"chatThread",type:{name:"Composite",className:"ChatThreadProperties"}},invalidParticipants:{serializedName:"invalidParticipants",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}}}}},cn={type:{name:"Composite",className:"ChatThreadProperties",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},topic:{serializedName:"topic",required:!0,type:{name:"String"}},createdOn:{serializedName:"createdOn",required:!0,type:{name:"DateTime"}},createdByCommunicationIdentifier:{serializedName:"createdByCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}}}}},Bn={type:{name:"Composite",className:"ChatThreadsItemCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatThreadItem"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Eo={type:{name:"Composite",className:"ChatThreadItem",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},topic:{serializedName:"topic",required:!0,type:{name:"String"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},lastMessageReceivedOn:{serializedName:"lastMessageReceivedOn",readOnly:!0,type:{name:"DateTime"}}}}},Ct={type:{name:"Composite",className:"UpdateChatThreadRequest",modelProperties:{topic:{serializedName:"topic",type:{name:"String"}}}}},Dn={type:{name:"Composite",className:"SendTypingNotificationRequest",modelProperties:{senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}}}}},un={parameterPath:"accept",mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},ln={parameterPath:"endpoint",mapper:{serializedName:"endpoint",required:!0,type:{name:"String"}},skipEncoding:!0},Cn={parameterPath:"chatThreadId",mapper:{serializedName:"chatThreadId",required:!0,type:{name:"String"}}},Gn={parameterPath:["options","maxPageSize"],mapper:{serializedName:"maxPageSize",type:{name:"Number"}}},Rn={parameterPath:["options","skip"],mapper:{serializedName:"skip",type:{name:"Number"}}},Xt={parameterPath:"apiVersion",mapper:{defaultValue:"2021-09-07",isConstant:!0,serializedName:"api-version",type:{name:"String"}}},Qr={parameterPath:["options","contentType"],mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},ea={parameterPath:"sendReadReceiptRequest",mapper:pr},jn={parameterPath:"sendChatMessageRequest",mapper:Li},Jr={parameterPath:["options","startTime"],mapper:{serializedName:"startTime",type:{name:"DateTime"}}},Ko={parameterPath:"chatMessageId",mapper:{serializedName:"chatMessageId",required:!0,type:{name:"String"}}},gr={parameterPath:["options","contentType"],mapper:{defaultValue:"application/merge-patch+json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},Qo={parameterPath:"updateChatMessageRequest",mapper:tt},eo={parameterPath:"participantCommunicationIdentifier",mapper:Ot},Pu={parameterPath:"addChatParticipantsRequest",mapper:dt},ta={parameterPath:"updateChatThreadRequest",mapper:Ct},_o={parameterPath:["options","sendTypingNotificationRequest"],mapper:Dn},Tn={parameterPath:"nextLink",mapper:{serializedName:"nextLink",required:!0,type:{name:"String"}},skipEncoding:!0},Kt={parameterPath:"createChatThreadRequest",mapper:vn};class Ar{constructor(O){this.client=O}listChatReadReceipts(O,U){return this.client.sendOperationRequest({chatThreadId:O,options:U},$t)}sendChatReadReceipt(O,U,G){return this.client.sendOperationRequest({chatThreadId:O,sendReadReceiptRequest:U,options:G},na)}sendChatMessage(O,U,G){return this.client.sendOperationRequest({chatThreadId:O,sendChatMessageRequest:U,options:G},Pr)}listChatMessages(O,U){return this.client.sendOperationRequest({chatThreadId:O,options:U},Er)}getChatMessage(O,U,G){return this.client.sendOperationRequest({chatThreadId:O,chatMessageId:U,options:G},Jo)}updateChatMessage(O,U,G,J){return this.client.sendOperationRequest({chatThreadId:O,chatMessageId:U,updateChatMessageRequest:G,options:J},ra)}deleteChatMessage(O,U,G){return this.client.sendOperationRequest({chatThreadId:O,chatMessageId:U,options:G},ia)}listChatParticipants(O,U){return this.client.sendOperationRequest({chatThreadId:O,options:U},Ui)}removeChatParticipant(O,U,G){return this.client.sendOperationRequest({chatThreadId:O,participantCommunicationIdentifier:U,options:G},Ci)}addChatParticipants(O,U,G){return this.client.sendOperationRequest({chatThreadId:O,addChatParticipantsRequest:U,options:G},wo)}updateChatThreadProperties(O,U,G){return this.client.sendOperationRequest({chatThreadId:O,updateChatThreadRequest:U,options:G},ar)}getChatThreadProperties(O,U){return this.client.sendOperationRequest({chatThreadId:O,options:U},Yo)}sendTypingNotification(O,U){return this.client.sendOperationRequest({chatThreadId:O,options:U},mt)}listChatReadReceiptsNext(O,U,G){return this.client.sendOperationRequest({chatThreadId:O,nextLink:U,options:G},Vi)}listChatMessagesNext(O,U,G){return this.client.sendOperationRequest({chatThreadId:O,nextLink:U,options:G},Zo)}listChatParticipantsNext(O,U,G){return this.client.sendOperationRequest({chatThreadId:O,nextLink:U,options:G},Yr)}}const wn=ne(s,!1),$t={path:"/chat/threads/{chatThreadId}/readReceipts",httpMethod:"GET",responses:{200:{bodyMapper:yt},401:{bodyMapper:et,isError:!0},403:{bodyMapper:et,isError:!0},429:{bodyMapper:et,isError:!0},503:{bodyMapper:et,isError:!0}},queryParameters:[Gn,Rn,Xt],urlParameters:[ln,Cn],headerParameters:[un],serializer:wn},na={path:"/chat/threads/{chatThreadId}/readReceipts",httpMethod:"POST",responses:{200:{},401:{bodyMapper:et,isError:!0},403:{bodyMapper:et,isError:!0},429:{bodyMapper:et,isError:!0},503:{bodyMapper:et,isError:!0}},requestBody:ea,queryParameters:[Xt],urlParameters:[ln,Cn],headerParameters:[un,Qr],mediaType:"json",serializer:wn},Pr={path:"/chat/threads/{chatThreadId}/messages",httpMethod:"POST",responses:{201:{bodyMapper:Fi},401:{bodyMapper:et,isError:!0},403:{bodyMapper:et,isError:!0},429:{bodyMapper:et,isError:!0},503:{bodyMapper:et,isError:!0}},requestBody:jn,queryParameters:[Xt],urlParameters:[ln,Cn],headerParameters:[un,Qr],mediaType:"json",serializer:wn},Er={path:"/chat/threads/{chatThreadId}/messages",httpMethod:"GET",responses:{200:{bodyMapper:Xi},401:{bodyMapper:et,isError:!0},403:{bodyMapper:et,isError:!0},429:{bodyMapper:et,isError:!0},503:{bodyMapper:et,isError:!0}},queryParameters:[Gn,Xt,Jr],urlParameters:[ln,Cn],headerParameters:[un],serializer:wn},Jo={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"GET",responses:{200:{bodyMapper:he},401:{bodyMapper:et,isError:!0},403:{bodyMapper:et,isError:!0},429:{bodyMapper:et,isError:!0},503:{bodyMapper:et,isError:!0}},queryParameters:[Xt],urlParameters:[ln,Cn,Ko],headerParameters:[un],serializer:wn},ra={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"PATCH",responses:{204:{},401:{bodyMapper:et,isError:!0},403:{bodyMapper:et,isError:!0},429:{bodyMapper:et,isError:!0},503:{bodyMapper:et,isError:!0}},requestBody:Qo,queryParameters:[Xt],urlParameters:[ln,Cn,Ko],headerParameters:[un,gr],mediaType:"json",serializer:wn},ia={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"DELETE",responses:{204:{},401:{bodyMapper:et,isError:!0},403:{bodyMapper:et,isError:!0},429:{bodyMapper:et,isError:!0},503:{bodyMapper:et,isError:!0}},queryParameters:[Xt],urlParameters:[ln,Cn,Ko],headerParameters:[un],serializer:wn},Ui={path:"/chat/threads/{chatThreadId}/participants",httpMethod:"GET",responses:{200:{bodyMapper:gt},401:{bodyMapper:et,isError:!0},403:{bodyMapper:et,isError:!0},429:{bodyMapper:et,isError:!0},503:{bodyMapper:et,isError:!0}},queryParameters:[Gn,Rn,Xt],urlParameters:[ln,Cn],headerParameters:[un],serializer:wn},Ci={path:"/chat/threads/{chatThreadId}/participants/:remove",httpMethod:"POST",responses:{204:{},401:{bodyMapper:et,isError:!0},403:{bodyMapper:et,isError:!0},429:{bodyMapper:et,isError:!0},503:{bodyMapper:et,isError:!0}},requestBody:eo,queryParameters:[Xt],urlParameters:[ln,Cn],headerParameters:[un,Qr],mediaType:"json",serializer:wn},wo={path:"/chat/threads/{chatThreadId}/participants/:add",httpMethod:"POST",responses:{201:{bodyMapper:Ze},401:{bodyMapper:et,isError:!0},403:{bodyMapper:et,isError:!0},429:{bodyMapper:et,isError:!0},503:{bodyMapper:et,isError:!0}},requestBody:Pu,queryParameters:[Xt],urlParameters:[ln,Cn],headerParameters:[un,Qr],mediaType:"json",serializer:wn},ar={path:"/chat/threads/{chatThreadId}",httpMethod:"PATCH",responses:{204:{},401:{bodyMapper:et,isError:!0},403:{bodyMapper:et,isError:!0},429:{bodyMapper:et,isError:!0},503:{bodyMapper:et,isError:!0}},requestBody:ta,queryParameters:[Xt],urlParameters:[ln,Cn],headerParameters:[un,gr],mediaType:"json",serializer:wn},Yo={path:"/chat/threads/{chatThreadId}",httpMethod:"GET",responses:{200:{bodyMapper:cn},401:{bodyMapper:et,isError:!0},403:{bodyMapper:et,isError:!0},429:{bodyMapper:et,isError:!0},503:{bodyMapper:et,isError:!0}},queryParameters:[Xt],urlParameters:[ln,Cn],headerParameters:[un],serializer:wn},mt={path:"/chat/threads/{chatThreadId}/typing",httpMethod:"POST",responses:{200:{},401:{bodyMapper:et,isError:!0},403:{bodyMapper:et,isError:!0},429:{bodyMapper:et,isError:!0},503:{bodyMapper:et,isError:!0}},requestBody:_o,queryParameters:[Xt],urlParameters:[ln,Cn],headerParameters:[un,Qr],mediaType:"json",serializer:wn},Vi={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:yt},401:{bodyMapper:et,isError:!0},403:{bodyMapper:et,isError:!0},429:{bodyMapper:et,isError:!0},503:{bodyMapper:et,isError:!0}},queryParameters:[Gn,Rn,Xt],urlParameters:[ln,Cn,Tn],headerParameters:[un],serializer:wn},Zo={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Xi},401:{bodyMapper:et,isError:!0},403:{bodyMapper:et,isError:!0},429:{bodyMapper:et,isError:!0},503:{bodyMapper:et,isError:!0}},queryParameters:[Gn,Xt,Jr],urlParameters:[ln,Cn,Tn],headerParameters:[un],serializer:wn},Yr={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:gt},401:{bodyMapper:et,isError:!0},403:{bodyMapper:et,isError:!0},429:{bodyMapper:et,isError:!0},503:{bodyMapper:et,isError:!0}},queryParameters:[Gn,Rn,Xt],urlParameters:[ln,Cn,Tn],headerParameters:[un],serializer:wn};class to{constructor(O){this.client=O}createChatThread(O,U){return this.client.sendOperationRequest({createChatThreadRequest:O,options:U},mr)}listChatThreads(O){return this.client.sendOperationRequest({options:O},Yn)}deleteChatThread(O,U){return this.client.sendOperationRequest({chatThreadId:O,options:U},ku)}listChatThreadsNext(O,U){return this.client.sendOperationRequest({nextLink:O,options:U},Nu)}}const So=ne(s,!1),mr={path:"/chat/threads",httpMethod:"POST",responses:{201:{bodyMapper:an},401:{bodyMapper:et,isError:!0},403:{bodyMapper:et,isError:!0},429:{bodyMapper:et,isError:!0},503:{bodyMapper:et,isError:!0}},requestBody:Kt,queryParameters:[Xt],urlParameters:[ln],headerParameters:[un,Qr,{parameterPath:["options","repeatabilityRequestId"],mapper:{serializedName:"repeatability-request-id",type:{name:"String"}}}],mediaType:"json",serializer:So},Yn={path:"/chat/threads",httpMethod:"GET",responses:{200:{bodyMapper:Bn},401:{bodyMapper:et,isError:!0},403:{bodyMapper:et,isError:!0},429:{bodyMapper:et,isError:!0},503:{bodyMapper:et,isError:!0}},queryParameters:[Gn,Xt,Jr],urlParameters:[ln],headerParameters:[un],serializer:So},ku={path:"/chat/threads/{chatThreadId}",httpMethod:"DELETE",responses:{204:{},401:{bodyMapper:et,isError:!0},403:{bodyMapper:et,isError:!0},429:{bodyMapper:et,isError:!0},503:{bodyMapper:et,isError:!0}},queryParameters:[Xt],urlParameters:[ln,Cn],headerParameters:[un],serializer:So},Nu={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Bn},401:{bodyMapper:et,isError:!0},403:{bodyMapper:et,isError:!0},429:{bodyMapper:et,isError:!0},503:{bodyMapper:et,isError:!0}},queryParameters:[Gn,Xt,Jr],urlParameters:[ln,Tn],headerParameters:[un],serializer:So};function nn(V){return V.toLowerCase()}class Io{constructor(O){if(this._headersMap=new Map,O)for(const U of Object.keys(O))this.set(U,O[U])}set(O,U){this._headersMap.set(nn(O),{name:O,value:String(U)})}get(O){var U;return null===(U=this._headersMap.get(nn(O)))||void 0===U?void 0:U.value}has(O){return this._headersMap.has(nn(O))}delete(O){this._headersMap.delete(nn(O))}toJSON(O={}){const U={};if(O.preserveCase)for(const G of this._headersMap.values())U[G.name]=G.value;else for(const[G,J]of this._headersMap)U[G]=J.value;return U}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return function*(V){for(const O of V.values())yield[O.name,O.value]}(this._headersMap)}}function sa(V){return new Io(V)}var no,Ht=new Uint8Array(16);function xu(){if(!no&&!(no="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return no(Ht)}const aa=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Gt=function(V){return"string"==typeof V&&aa.test(V)};for(var dn=[],Zr=0;Zr<256;++Zr)dn.push((Zr+256).toString(16).substr(1));const _r=function(V,O,U){var G=(V=V||{}).random||(V.rng||xu)();if(G[6]=15&G[6]|64,G[8]=63&G[8]|128,O){U=U||0;for(var J=0;J<16;++J)O[U+J]=G[J];return O}return function(V){var O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,U=(dn[V[O+0]]+dn[V[O+1]]+dn[V[O+2]]+dn[V[O+3]]+"-"+dn[V[O+4]]+dn[V[O+5]]+"-"+dn[V[O+6]]+dn[V[O+7]]+"-"+dn[V[O+8]]+dn[V[O+9]]+"-"+dn[V[O+10]]+dn[V[O+11]]+dn[V[O+12]]+dn[V[O+13]]+dn[V[O+14]]+dn[V[O+15]]).toLowerCase();if(!Gt(U))throw TypeError("Stringified UUID is invalid");return U}(G)};class ua{constructor(O){var U,G,J,ae,oe,ge;this.url=O.url,this.body=O.body,this.headers=null!==(U=O.headers)&&void 0!==U?U:sa(),this.method=null!==(G=O.method)&&void 0!==G?G:"GET",this.timeout=null!==(J=O.timeout)&&void 0!==J?J:0,this.formData=O.formData,this.disableKeepAlive=null!==(ae=O.disableKeepAlive)&&void 0!==ae&&ae,this.proxySettings=O.proxySettings,this.streamResponseStatusCodes=O.streamResponseStatusCodes,this.withCredentials=null!==(oe=O.withCredentials)&&void 0!==oe&&oe,this.abortSignal=O.abortSignal,this.tracingOptions=O.tracingOptions,this.onUploadProgress=O.onUploadProgress,this.onDownloadProgress=O.onDownloadProgress,this.requestId=O.requestId||_r(),this.allowInsecureConnection=null!==(ge=O.allowInsecureConnection)&&void 0!==ge&&ge}}function wr(V){const{parameterPath:O,mapper:U}=V;let G;return G="string"==typeof O?O:Array.isArray(O)?O.join("."):U.serializedName,G}function Or(V,O,U){let G=O.parameterPath;const J=O.mapper;let ae;if("string"==typeof G&&(G=[G]),Array.isArray(G)){if(G.length>0)if(J.isConstant)ae=J.defaultValue;else{let oe=Bi(V,G);!oe.propertyFound&&U&&(oe=Bi(U,G));let ge=!1;oe.propertyFound||(ge=J.required||"options"===G[0]&&2===G.length),ae=ge?J.defaultValue:oe.propertyValue}}else{J.required&&(ae={});for(const oe in G){const De=Or(V,{parameterPath:G[oe],mapper:J.type.modelProperties[oe]},U);void 0!==De&&(ae||(ae={}),ae[oe]=De)}}return ae}function Bi(V,O){const U={propertyFound:!1};let G=0;for(;G<O.length;++G){const J=O[G];if(!V||!(J in V))break;V=V[J]}return G===O.length&&(U.propertyValue=V,U.propertyFound=!0),U}const ei=new WeakMap;function kr(V){let O=ei.get(V);return O||(O={},ei.set(V,O)),O}const Ro={CSV:",",SSV:" ",Multi:"Multi",TSV:"\t",Pipes:"|"};function kn(V,O){let U=V;for(const[G,J]of O)U=U.split(G).join(J);return U}var it=u(4637);const kt={};var Qt;const er="undefined"!=typeof process&&Boolean(process.version)&&Boolean(null===(Qt=process.versions)||void 0===Qt?void 0:Qt.node);function tr(V,O){return new Promise(U=>setTimeout(()=>U(O),V))}const en=URL,xr=(URLSearchParams,"REDACTED"),It=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent"],ao=["api-version"];class ni{constructor({additionalAllowedHeaderNames:O=[],additionalAllowedQueryParameters:U=[]}={}){O=It.concat(O),U=ao.concat(U),this.allowedHeaderNames=new Set(O.map(G=>G.toLowerCase())),this.allowedQueryParameters=new Set(U.map(G=>G.toLowerCase()))}sanitize(O){const U=new Set;return JSON.stringify(O,(G,J)=>{if(J instanceof Error)return Object.assign(Object.assign({},J),{name:J.name,message:J.message});if("headers"===G)return this.sanitizeHeaders(J);if("url"===G)return this.sanitizeUrl(J);if("query"===G)return this.sanitizeQuery(J);if("body"!==G&&"response"!==G&&"operationSpec"!==G){if(Array.isArray(J)||!("object"!=typeof(V=J)||null===V||Array.isArray(V)||V instanceof RegExp||V instanceof Date)){if(U.has(J))return"[Circular]";U.add(J)}var V;return J}},2)}sanitizeHeaders(O){const U={};for(const G of Object.keys(O))U[G]=this.allowedHeaderNames.has(G.toLowerCase())?O[G]:xr;return U}sanitizeQuery(O){if("object"!=typeof O||null===O)return O;const U={};for(const G of Object.keys(O))U[G]=this.allowedQueryParameters.has(G.toLowerCase())?O[G]:xr;return U}sanitizeUrl(O){if("string"!=typeof O||null===O)return O;const U=new en(O);if(!U.search)return O;for(const[G]of U.searchParams)this.allowedQueryParameters.has(G.toLowerCase())||U.searchParams.set(G,xr);return U.toString()}}const Mo=new ni;let se,nr=(()=>{class V extends Error{constructor(U,G={}){super(U),this.name="RestError",this.code=G.code,this.statusCode=G.statusCode,this.request=G.request,this.response=G.response,Object.setPrototypeOf(this,V.prototype)}[kt](){return`RestError: ${this.message} \n ${Mo.sanitize(this)}`}}return V.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",V.PARSE_ERROR="PARSE_ERROR",V})();class bi{sendRequest(O){return(0,_.Z)(function*(){var U;if("https:"!==new URL(O.url).protocol&&!O.allowInsecureConnection)throw new Error(`Cannot connect to ${O.url} while allowInsecureConnection is false.`);const ae=new XMLHttpRequest;if(O.proxySettings)throw new Error("HTTP proxy is not supported in browser environment");const oe=O.abortSignal;if(oe){if(oe.aborted)throw new it._("The operation was aborted.");const ge=()=>{ae.abort()};oe.addEventListener("abort",ge),ae.addEventListener("readystatechange",()=>{ae.readyState===XMLHttpRequest.DONE&&oe.removeEventListener("abort",ge)})}ur(ae.upload,O.onUploadProgress),ur(ae,O.onDownloadProgress),ae.open(O.method,O.url),ae.timeout=O.timeout,ae.withCredentials=O.withCredentials;for(const[ge,Ne]of O.headers)ae.setRequestHeader(ge,Ne);if(ae.responseType=(null===(U=O.streamResponseStatusCodes)||void 0===U?void 0:U.size)?"blob":"text",(V=O.body)&&"function"==typeof V.pipe)throw new Error("Node streams are not supported in browser environment.");var V;return ae.send(void 0===O.body?null:O.body),new Promise("blob"===ae.responseType?(ge,Ne)=>{(function(V,O,U,G){V.addEventListener("readystatechange",()=>{var J,ae;if(V.readyState===XMLHttpRequest.HEADERS_RECEIVED)if((null===(J=O.streamResponseStatusCodes)||void 0===J?void 0:J.has(Number.POSITIVE_INFINITY))||(null===(ae=O.streamResponseStatusCodes)||void 0===ae?void 0:ae.has(V.status))){const oe=new Promise((ge,Ne)=>{V.addEventListener("load",()=>{ge(V.response)}),k(O,V,Ne)});U({request:O,status:V.status,headers:H(V),blobBody:oe})}else V.addEventListener("load",()=>{V.response?V.response.text().then(oe=>{U({request:O,status:V.status,headers:H(V),bodyAsText:oe})}).catch(oe=>{G(oe)}):U({request:O,status:V.status,headers:H(V)})})})})(ae,O,ge,Ne),k(O,ae,Ne)}:function(ge,Ne){ae.addEventListener("load",()=>ge({request:O,status:ae.status,headers:H(ae),bodyAsText:ae.responseText})),k(O,ae,Ne)})})()}}function ur(V,O){O&&V.addEventListener("progress",U=>O({loadedBytes:U.loaded}))}function H(V){const O=sa(),U=V.getAllResponseHeaders().trim().split(/[\r\n]+/);for(const G of U){const J=G.indexOf(":"),ae=G.slice(0,J),oe=G.slice(J+2);O.set(ae,oe)}return O}function k(V,O,U){O.addEventListener("error",()=>U(new nr(`Failed to send request to ${V.url}`,{code:nr.REQUEST_SEND_ERROR,request:V})));const G=new it._("The operation was aborted.");O.addEventListener("abort",()=>U(G)),O.addEventListener("timeout",()=>U(G))}const Oe=new Set(["Deserialize","Serialize","Retry"]);class Pe{constructor(O=[]){this._policies=[],this._policies=O,this._orderedPolicies=void 0}addPolicy(O,U={}){if(U.phase&&U.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(U.phase&&!Oe.has(U.phase))throw new Error(`Invalid phase name: ${U.phase}`);if(U.afterPhase&&!Oe.has(U.afterPhase))throw new Error(`Invalid afterPhase name: ${U.afterPhase}`);this._policies.push({policy:O,options:U}),this._orderedPolicies=void 0}removePolicy(O){const U=[];return this._policies=this._policies.filter(G=>!(O.name&&G.policy.name===O.name||O.phase&&G.options.phase===O.phase)||(U.push(G.policy),!1)),this._orderedPolicies=void 0,U}sendRequest(O,U){return this.getOrderedPolicies().reduceRight((ae,oe)=>ge=>oe.sendRequest(ge,ae),ae=>O.sendRequest(ae))(U)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new Pe(this._policies)}static create(){return new Pe}orderPolicies(){const O=[],U=new Map,G=new Set,J=new Set,ae=new Set,oe=new Set,ge=[G,J,ae,oe];function Ne($e){return"Retry"===$e?oe:"Serialize"===$e?G:"Deserialize"===$e?ae:J}for(const $e of this._policies){const Je=$e.policy,wt=$e.options,Dt=Je.name;if(U.has(Dt))throw new Error("Duplicate policy names not allowed in pipeline");const Ft={policy:Je,dependsOn:new Set,dependants:new Set};wt.afterPhase&&(Ft.afterPhase=Ne(wt.afterPhase)),U.set(Dt,Ft),Ne(wt.phase).add(Ft)}for(const $e of this._policies){const{policy:Je,options:wt}=$e,Dt=Je.name,Ft=U.get(Dt);if(!Ft)throw new Error(`Missing node for policy ${Dt}`);if(wt.afterPolicies)for(const hn of wt.afterPolicies){const gn=U.get(hn);gn&&(Ft.dependsOn.add(gn),gn.dependants.add(Ft))}if(wt.beforePolicies)for(const hn of wt.beforePolicies){const gn=U.get(hn);gn&&(gn.dependsOn.add(Ft),Ft.dependants.add(gn))}}function De($e){for(const Je of $e)if(!(Je.afterPhase&&Je.afterPhase.size||0!==Je.dependsOn.size)){O.push(Je.policy);for(const wt of Je.dependants)wt.dependsOn.delete(Je);U.delete(Je.policy.name),$e.delete(Je)}}function Me(){let $e=!1;for(const Je of ge)if(De(Je),Je===J&&($e=!0),Je.size>0&&Je!==J)return void(!1===$e&&De(J))}for(;U.size>0;){const $e=O.length;if(Me(),O.length<=$e)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return O}}const je=new Error("decompressResponsePolicy is not supported in browser environment"),Pt=(0,p.YR)("core-rest-pipeline"),ft=new Error("proxyPolicy is not supported in browser environment"),Lr=["GET","HEAD"];function lo(V,O,U){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,_.Z)(function*(V,O,U,G=0){const{request:J,status:ae,headers:oe}=O,ge=oe.get("location");if(ge&&(300===ae||301===ae&&Lr.includes(J.method)||302===ae&&Lr.includes(J.method)||303===ae&&"POST"===J.method||307===ae)&&G<U){const Ne=new en(ge,J.url);J.url=Ne.toString(),303===ae&&(J.method="GET",J.headers.delete("Content-Length"),delete J.body);const De=yield V(J);return lo(V,De,U,G+1)}return O})).apply(this,arguments)}var Bh=u(4874);function ca(V){const O=new Map;O.set("core-rest-pipeline","1.3.3"),function(V){const O=self.navigator;V.set("OS",(O.oscpu||O.platform).replace(" ",""))}(O);const U=function(V){const O=[];for(const[U,G]of V)O.push(G?`${U}/${G}`:U);return O.join(" ")}(O);return V?`${V} ${U}`:U}const da=(0,c.q)({packagePrefix:"",namespace:""});const Ao="x-ms-useragent";function Vu(V){try{const O=Number(V);if(Number.isNaN(O)){const U=Date.now(),J=Date.parse(V)-U;return Number.isNaN(J)?void 0:J}return 1e3*O}catch(O){return}}function fa(V){return Boolean(V&&(429===V.status||503===V.status)&&V.headers.get("Retry-After")&&Vu(V.headers.get("Retry-After")))}function _c(V={}){var O,U;const G=null!==(O=V.retryDelayInMs)&&void 0!==O?O:1e3,J=null!==(U=V.maxRetryDelayInMs)&&void 0!==U?U:64e3;let ae=G;return{name:"exponentialRetryStrategy",retry({retryCount:oe,response:ge,responseError:Ne}){const De=function(V){return!!V&&("ETIMEDOUT"===V.code||"ESOCKETTIMEDOUT"===V.code||"ECONNREFUSED"===V.code||"ECONNRESET"===V.code||"ENOENT"===V.code)}(Ne),Me=De&&V.ignoreSystemErrors,$e=function(V){return Boolean(V&&void 0!==V.status&&(V.status>=500||408===V.status)&&501!==V.status&&505!==V.status)}(ge),Je=$e&&V.ignoreHttpStatusCodes;if(ge&&(fa(ge)||!$e)||Je||Me)return{skipStrategy:!0};if(Ne&&!De)return{errorToThrow:Ne};const Dt=ae*Math.pow(2,oe),Ft=Math.min(J,Dt);return ae=Ft/2+function(V,O){return V=Math.ceil(V),O=Math.floor(O),Math.floor(Math.random()*(O-V+1))+V}(0,Ft/2),{retryAfterInMs:ae}}}}const pa=(0,p.YR)("core-rest-pipeline retryPolicy");function ga(V,O={maxRetries:10}){const U=O.logger||pa;return{name:"retryPolicy",sendRequest:(G,J)=>(0,_.Z)(function*(){var ae,oe;let ge,Ne,De=-1;e:for(;;){De+=1,ge=void 0,Ne=void 0;try{U.info(`Retry ${De}: Attempting to send request`,G.requestId),ge=yield J(G),U.info(`Retry ${De}: Received a response from request`,G.requestId)}catch(Me){if(U.error(`Retry ${De}: Received an error from request`,G.requestId),Ne=Me,!Me||"RestError"!==Ne.name)throw Me;ge=Ne.response}if(null===(ae=G.abortSignal)||void 0===ae?void 0:ae.aborted)throw U.error(`Retry ${De}: Request aborted.`),new it._;if(De>=(null!==(oe=O.maxRetries)&&void 0!==oe?oe:10)){if(U.info(`Retry ${De}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),void 0!==ge)return ge;throw Ne}U.info(`Retry ${De}: Processing ${V.length} retry strategies.`);t:for(const Me of V){const $e=Me.logger||pa;$e.info(`Retry ${De}: Processing retry strategy ${Me.name}.`);const Je=Me.retry({retryCount:De,response:ge,responseError:Ne});if(Je.skipStrategy){$e.info(`Retry ${De}: Skipped.`);continue t}const{errorToThrow:wt,retryAfterInMs:Dt,redirectTo:Ft}=Je;if(wt)throw $e.error(`Retry ${De}: Retry strategy ${Me.name} throws error:`,wt),wt;if(Dt){$e.info(`Retry ${De}: Retry strategy ${Me.name} retries after ${Dt}`),yield tr(Dt);continue e}if(Ft){$e.info(`Retry ${De}: Retry strategy ${Me.name} redirects to ${Ft}`),G.url=Ft;continue e}}if(ge)return U.info("Returning the last received response."),ge}})()}}function Hu(V){const O=Pe.create();return er&&(O.addPolicy(function(){throw ft}()),O.addPolicy(function(){throw je}())),O.addPolicy({name:"formDataPolicy",sendRequest:(V,O)=>(0,_.Z)(function*(){if(V.formData){const U=V.formData,G=new FormData;for(const ae of Object.keys(U)){const oe=U[ae];if(Array.isArray(oe))for(const ge of oe)G.append(ae,ge);else G.append(ae,oe)}V.body=G,V.formData=void 0;const J=V.headers.get("Content-Type");J&&-1!==J.indexOf("application/x-www-form-urlencoded")?V.body=new URLSearchParams(G).toString():J&&-1!==J.indexOf("multipart/form-data")&&V.headers.delete("Content-Type")}return O(V)})()}),O.addPolicy(function(V={}){const O=ca(V.userAgentPrefix);return{name:"userAgentPolicy",sendRequest:(U,G)=>(0,_.Z)(function*(){return U.headers.has(Ao)||U.headers.set(Ao,O),G(U)})()}}(V.userAgentOptions)),O.addPolicy(function(V="x-ms-client-request-id"){return{name:"setClientRequestIdPolicy",sendRequest:(O,U)=>(0,_.Z)(function*(){return O.headers.has(V)||O.headers.set(V,O.requestId),U(O)})()}}()),O.addPolicy(function(V={}){var O;return{name:"defaultRetryPolicy",sendRequest:ga([{name:"throttlingRetryStrategy",retry:({response:V})=>fa(V)?{retryAfterInMs:Vu(V.headers.get("Retry-After"))}:{skipStrategy:!0}},_c(V)],{maxRetries:null!==(O=V.maxRetries)&&void 0!==O?O:10}).sendRequest}}(V.retryOptions),{phase:"Retry"}),O.addPolicy(function(V={}){const O=ca(V.userAgentPrefix);return{name:"tracingPolicy",sendRequest:(U,G)=>(0,_.Z)(function*(){var J;if(!(null===(J=U.tracingOptions)||void 0===J?void 0:J.tracingContext))return G(U);const ae=function(V,O){var U,G,J;try{const ae=Object.assign(Object.assign({},null===(U=V.tracingOptions)||void 0===U?void 0:U.spanOptions),{kind:b.MU.CLIENT}),ge=new en(V.url).pathname||"/",{span:Ne}=da(ge,{tracingOptions:Object.assign(Object.assign({},V.tracingOptions),{spanOptions:ae})});if(!Ne.isRecording())return void Ne.end();const De=null===(J=null===(G=V.tracingOptions)||void 0===G?void 0:G.tracingContext)||void 0===J?void 0:J.getValue(Symbol.for("az.namespace"));"string"==typeof De&&Ne.setAttribute("az.namespace",De),Ne.setAttributes({"http.method":V.method,"http.url":V.url,requestId:V.requestId}),O&&Ne.setAttribute("http.user_agent",O);const Me=Ne.spanContext(),$e=(0,Bh.O)(Me);if($e&&(0,b.BM)(Me)){V.headers.set("traceparent",$e);const Je=Me.traceState&&Me.traceState.serialize();Je&&V.headers.set("tracestate",Je)}return Ne}catch(ae){return void Pt.warning(`Skipping creating a tracing span due to an error: ${ae.message}`)}}(U,O);if(!ae)return G(U);try{const oe=yield G(U);return function(V,O){try{V.setAttribute("http.status_code",O.status);const U=O.headers.get("x-ms-request-id");U&&V.setAttribute("serviceRequestId",U),V.setStatus({code:b.Qn.OK}),V.end()}catch(U){Pt.warning(`Skipping tracing span processing due to an error: ${U.message}`)}}(ae,oe),oe}catch(oe){throw function(V,O){try{V.setStatus({code:b.Qn.ERROR,message:O.message}),O.statusCode&&V.setAttribute("http.status_code",O.statusCode),V.end()}catch(U){Pt.warning(`Skipping tracing span processing due to an error: ${U.message}`)}}(ae,oe),oe}})()}}(V.userAgentOptions),{afterPhase:"Retry"}),O.addPolicy(function(V={}){const{maxRetries:O=20}=V;return{name:"redirectPolicy",sendRequest:(U,G)=>(0,_.Z)(function*(){const J=yield G(U);return lo(G,J,O)})()}}(V.redirectOptions),{afterPhase:"Retry"}),O.addPolicy(function(V={}){var O;const U=null!==(O=V.logger)&&void 0!==O?O:Pt.info,G=new ni({additionalAllowedHeaderNames:V.additionalAllowedHeaderNames,additionalAllowedQueryParameters:V.additionalAllowedQueryParameters});return{name:"logPolicy",sendRequest:(J,ae)=>(0,_.Z)(function*(){if(!U.enabled)return ae(J);U(`Request: ${G.sanitize(J)}`);const oe=yield ae(J);return U(`Response status code: ${oe.status}`),U(`Headers: ${G.sanitize(oe.headers)}`),oe})()}}(V.loggingOptions),{afterPhase:"Retry"}),O}const Sc={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4};function ma(){return(ma=(0,_.Z)(function*(V,O,U){function G(){return J.apply(this,arguments)}function J(){return(J=(0,_.Z)(function*(){if(!(Date.now()<U)){const oe=yield V();if(null===oe)throw new Error("Failed to refresh access token.");return oe}try{return yield V()}catch(oe){return null}})).apply(this,arguments)}let ae=yield G();for(;null===ae;)yield tr(O),ae=yield G();return ae})).apply(this,arguments)}function Cr(V){return ya.apply(this,arguments)}function ya(){return(ya=(0,_.Z)(function*(V){const{scopes:O,getAccessToken:U,request:G}=V,J={abortSignal:G.abortSignal,tracingOptions:G.tracingOptions},ae=yield U(O,J);ae&&V.request.headers.set("Authorization",`Bearer ${ae.token}`)})).apply(this,arguments)}function $i(V){var O;const{credential:U,scopes:G,challengeCallbacks:J,logger:ae}=V,oe=Object.assign({authorizeRequest:null!==(O=null==J?void 0:J.authorizeRequest)&&void 0!==O?O:Cr,authorizeRequestOnChallenge:null==J?void 0:J.authorizeRequestOnChallenge},J),ge=U?function(V,O){let U=null,G=null;const J=Object.assign(Object.assign({},Sc),O),ae={get isRefreshing(){return null!==U},get shouldRefresh(){var ge;return!ae.isRefreshing&&(null!==(ge=null==G?void 0:G.expiresOnTimestamp)&&void 0!==ge?ge:0)-J.refreshWindowInMs<Date.now()},get mustRefresh(){return null===G||G.expiresOnTimestamp-J.forcedRefreshWindowInMs<Date.now()}};function oe(ge,Ne){var De;return ae.isRefreshing||(U=function(V,O,U){return ma.apply(this,arguments)}(()=>V.getToken(ge,Ne),J.retryIntervalInMs,null!==(De=null==G?void 0:G.expiresOnTimestamp)&&void 0!==De?De:Date.now()).then($e=>(U=null,G=$e,G)).catch($e=>{throw U=null,G=null,$e})),U}return function(){var ge=(0,_.Z)(function*(Ne,De){return ae.mustRefresh?oe(Ne,De):(ae.shouldRefresh&&oe(Ne,De),G)});return function(Ne,De){return ge.apply(this,arguments)}}()}(U):()=>Promise.resolve(null);return{name:"bearerTokenAuthenticationPolicy",sendRequest:(Ne,De)=>(0,_.Z)(function*(){if(!Ne.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");let Me,$e;yield oe.authorizeRequest({scopes:Array.isArray(G)?G:[G],request:Ne,getAccessToken:ge,logger:ae});try{Me=yield De(Ne)}catch(Je){$e=Je,Me=Je.response}if(oe.authorizeRequestOnChallenge&&401===(null==Me?void 0:Me.status)&&function(V){const O=V.headers.get("WWW-Authenticate");if(401===V.status&&O)return O}(Me)&&(yield oe.authorizeRequestOnChallenge({scopes:Array.isArray(G)?G:[G],request:Ne,response:Me,getAccessToken:ge,logger:ae})))return De(Ne);if($e)throw $e;return Me})()}}const lr=["application/json","text/json"],$u=["application/xml","application/atom+xml"];function _i(V){let O;const G=kr(V.request),J=null==G?void 0:G.operationSpec;return J&&(O=(null==G?void 0:G.operationResponseGetter)?null==G?void 0:G.operationResponseGetter(J,V):J.responses[V.status]),O}function qu(V){const U=kr(V.request),G=null==U?void 0:U.shouldDeserialize;let J;return J=void 0===G||("boolean"==typeof G?G:G(V)),J}function bt(){return(bt=(0,_.Z)(function*(V,O,U,G,J){const ae=yield Rc(V,O,U,G,J);if(!qu(ae))return ae;const oe=kr(ae.request),ge=null==oe?void 0:oe.operationSpec;if(!ge||!ge.responses)return ae;const Ne=_i(ae),{error:De,shouldReturnResponse:Me}=Dc(ae,ge,Ne);if(De)throw De;if(Me)return ae;if(Ne){if(Ne.bodyMapper){let $e=ae.parsedBody;ge.isXML&&"Sequence"===Ne.bodyMapper.type.name&&($e="object"==typeof $e?$e[Ne.bodyMapper.xmlElementName]:[]);try{ae.parsedBody=ge.serializer.deserialize(Ne.bodyMapper,$e,"operationRes.parsedBody")}catch(Je){throw new nr(`Error ${Je} occurred in deserializing the responseBody - ${ae.bodyAsText}`,{statusCode:ae.status,request:ae.request,response:ae})}}else"HEAD"===ge.httpMethod&&(ae.parsedBody=U.status>=200&&U.status<300);Ne.headersMapper&&(ae.parsedHeaders=ge.serializer.deserialize(Ne.headersMapper,ae.headers.toJSON(),"operationRes.parsedHeaders"))}return ae})).apply(this,arguments)}function Dc(V,O,U){var G;const J=200<=V.status&&V.status<300;if(function(V){const O=Object.keys(V.responses);return 0===O.length||1===O.length&&"default"===O[0]}(O)?J:U){if(!U)return{error:null,shouldReturnResponse:!1};if(!U.isError)return{error:null,shouldReturnResponse:!1}}const oe=null!=U?U:O.responses.default,ge=(null===(G=V.request.streamResponseStatusCodes)||void 0===G?void 0:G.has(V.status))?`Unexpected status code: ${V.status}`:V.bodyAsText,Ne=new nr(ge,{statusCode:V.status,request:V.request,response:V});if(!oe)throw Ne;const De=oe.bodyMapper,Me=oe.headersMapper;try{if(V.parsedBody){const $e=V.parsedBody;let Je;if(De){let Dt=$e;if(O.isXML&&"Sequence"===De.type.name){Dt=[];const Ft=De.xmlElementName;"object"==typeof $e&&Ft&&(Dt=$e[Ft])}Je=O.serializer.deserialize(De,Dt,"error.response.parsedBody")}const wt=$e.error||Je||$e;Ne.code=wt.code,wt.message&&(Ne.message=wt.message),De&&(Ne.response.parsedBody=Je)}V.headers&&Me&&(Ne.response.parsedHeaders=O.serializer.deserialize(Me,V.headers.toJSON(),"operationRes.parsedHeaders"))}catch($e){Ne.message=`Error "${$e.message}" occurred in deserializing the responseBody - "${V.bodyAsText}" for the default response.`}return{error:Ne,shouldReturnResponse:!1}}function Rc(V,O,U,G,J){return ba.apply(this,arguments)}function ba(){return(ba=(0,_.Z)(function*(V,O,U,G,J){var ae;if(!(null===(ae=U.request.streamResponseStatusCodes)||void 0===ae?void 0:ae.has(U.status))&&U.bodyAsText){const oe=U.bodyAsText,ge=U.headers.get("Content-Type")||"",Ne=ge?ge.split(";").map(De=>De.toLowerCase()):[];try{if(0===Ne.length||Ne.some(De=>-1!==V.indexOf(De)))return U.parsedBody=JSON.parse(oe),U;if(Ne.some(De=>-1!==O.indexOf(De))){if(!J)throw new Error("Parsing XML not supported.");const De=yield J(oe,G.xml);return U.parsedBody=De,U}}catch(De){throw new nr(`Error "${De}" occurred while parsing the response body - ${U.bodyAsText}.`,{code:De.code||nr.PARSE_ERROR,statusCode:U.status,request:U.request,response:U})}}return U})).apply(this,arguments)}class ns extends class extends class{constructor(O={}){this._requestContentType=O.requestContentType,this._baseUri=O.baseUri,this._allowInsecureConnection=O.allowInsecureConnection,this._httpClient=O.httpClient||(se||(se=new bi),se),this.pipeline=O.pipeline||function(V){const O=function(V){if(V.credentialScopes){const O=V.credentialScopes;return Array.isArray(O)?O.map(U=>new URL(U).toString()):new URL(O).toString()}if(V.baseUri)return`${V.baseUri}/.default`;if(V.credential&&!V.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a baseUri or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}(V),U=V.credential&&O?{credentialScopes:O,credential:V.credential}:void 0;return function(V={}){const O=Hu(null!=V?V:{});return V.credentialOptions&&O.addPolicy($i({credential:V.credentialOptions.credential,scopes:V.credentialOptions.credentialScopes})),O.addPolicy(function(V={}){const O=V.stringifyXML;return{name:"serializationPolicy",sendRequest:(U,G)=>(0,_.Z)(function*(){const J=kr(U),ae=null==J?void 0:J.operationSpec,oe=null==J?void 0:J.operationArguments;return ae&&oe&&(function(V,O,U){var G,J;if(U.headerParameters)for(const oe of U.headerParameters){let ge=Or(O,oe);if(null!=ge||oe.mapper.required){ge=U.serializer.serialize(oe.mapper,ge,wr(oe));const Ne=oe.mapper.headerCollectionPrefix;if(Ne)for(const De of Object.keys(ge))V.headers.set(Ne+De,ge[De]);else V.headers.set(oe.mapper.serializedName||wr(oe),ge)}}const ae=null===(J=null===(G=O.options)||void 0===G?void 0:G.requestOptions)||void 0===J?void 0:J.customHeaders;if(ae)for(const oe of Object.keys(ae))V.headers.set(oe,ae[oe])}(U,oe,ae),function(V,O,U,G=function(){throw new Error("XML serialization unsupported!")}){var J,ae,oe,ge,Ne;const De=null===(J=O.options)||void 0===J?void 0:J.serializerOptions,Me={xml:{rootName:null!==(ae=null==De?void 0:De.xml.rootName)&&void 0!==ae?ae:"",includeRoot:null!==(oe=null==De?void 0:De.xml.includeRoot)&&void 0!==oe&&oe,xmlCharKey:null!==(ge=null==De?void 0:De.xml.xmlCharKey)&&void 0!==ge?ge:Z}},$e=Me.xml.xmlCharKey;if(U.requestBody&&U.requestBody.mapper){V.body=Or(O,U.requestBody);const Je=U.requestBody.mapper,{required:wt,serializedName:Dt,xmlName:Ft,xmlElementName:hn,xmlNamespace:gn,xmlNamespacePrefix:Mn,nullable:En}=Je,Tr=Je.type.name;try{if(null!=V.body||En&&null===V.body||wt){const ii=wr(U.requestBody);V.body=U.serializer.serialize(Je,V.body,ii,Me);const Vr="Stream"===Tr;if(U.isXML){const fo=Mn?`xmlns:${Mn}`:"xmlns",is=function(V,O,U,G,J){if(V&&!["Composite","Sequence","Dictionary"].includes(U)){const ae={};return ae[J.xml.xmlCharKey]=G,ae[le]={[O]:V},ae}return G}(gn,fo,Tr,V.body,Me);"Sequence"===Tr?V.body=G(function(V,O,U,G){if(Array.isArray(V)||(V=[V]),!U||!G)return{[O]:V};const J={[O]:V};return J[le]={[U]:G},J}(is,hn||Ft||Dt,fo,gn),{rootName:Ft||Dt,xmlCharKey:$e}):Vr||(V.body=G(is,{rootName:Ft||Dt,xmlCharKey:$e}))}else{if("String"===Tr&&((null===(Ne=U.contentType)||void 0===Ne?void 0:Ne.match("text/plain"))||"text"===U.mediaType))return;Vr||(V.body=JSON.stringify(V.body))}}}catch(ii){throw new Error(`Error "${ii.message}" occurred in serializing the payload - ${JSON.stringify(Dt,void 0,"  ")}.`)}}else if(U.formDataParameters&&U.formDataParameters.length>0){V.formData={};for(const Je of U.formDataParameters){const wt=Or(O,Je);if(null!=wt){const Dt=Je.mapper.serializedName||wr(Je);V.formData[Dt]=U.serializer.serialize(Je.mapper,wt,wr(Je),Me)}}}}(U,oe,ae,O)),G(U)})()}}(V.serializationOptions),{phase:"Serialize"}),O.addPolicy(function(V={}){var O,U,G,J,ae,oe,ge;const Ne=null!==(U=null===(O=V.expectedContentTypes)||void 0===O?void 0:O.json)&&void 0!==U?U:lr,De=null!==(J=null===(G=V.expectedContentTypes)||void 0===G?void 0:G.xml)&&void 0!==J?J:$u,Me=V.parseXML,$e=V.serializerOptions,Je={xml:{rootName:null!==(ae=null==$e?void 0:$e.xml.rootName)&&void 0!==ae?ae:"",includeRoot:null!==(oe=null==$e?void 0:$e.xml.includeRoot)&&void 0!==oe&&oe,xmlCharKey:null!==(ge=null==$e?void 0:$e.xml.xmlCharKey)&&void 0!==ge?ge:Z}};return{name:"deserializationPolicy",sendRequest:(wt,Dt)=>(0,_.Z)(function*(){const Ft=yield Dt(wt);return function(V,O,U,G,J){return bt.apply(this,arguments)}(Ne,De,Ft,Je,Me)})()}}(V.deserializationOptions),{phase:"Deserialize"}),O}(Object.assign(Object.assign({},V),{credentialOptions:U}))}(O)}sendRequest(O){var U=this;return(0,_.Z)(function*(){return U.pipeline.sendRequest(U._httpClient,O)})()}sendOperationRequest(O,U){var G=this;return(0,_.Z)(function*(){const J=U.baseUrl||G._baseUri;if(!J)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a baseUri string property that contains the base URL to use.");const ae=function(V,O,U,G){const J=function(V,O,U){var G;const J=new Map;if(null===(G=V.urlParameters)||void 0===G?void 0:G.length)for(const ae of V.urlParameters){let oe=Or(O,ae,U);const ge=wr(ae);oe=V.serializer.serialize(ae.mapper,oe,ge),ae.skipEncoding||(oe=encodeURIComponent(oe)),J.set(`{${ae.mapper.serializedName||ge}}`,oe)}return J}(O,U,G);let ae=!1,oe=kn(V,J);if(O.path){const De=kn(O.path,J);!function(V){return V.includes("://")}(De)?oe=function(V,O){if(!O)return V;const U=new URL(V);let G=U.pathname;G.endsWith("/")||(G=`${G}/`),O.startsWith("/")&&(O=O.substring(1));const J=O.indexOf("?");if(-1!==J){const ae=O.substring(0,J),oe=O.substring(J+1);G+=ae,oe&&(U.search=U.search?`${U.search}&${oe}`:oe)}else G+=O;return U.pathname=G,U.toString()}(oe,De):(oe=De,ae=!0)}const{queryParams:ge,sequenceParams:Ne}=function(V,O,U){var G;const J=new Map,ae=new Set;if(null===(G=V.queryParameters)||void 0===G?void 0:G.length)for(const oe of V.queryParameters){"Sequence"===oe.mapper.type.name&&oe.mapper.serializedName&&ae.add(oe.mapper.serializedName);let ge=Or(O,oe,U);if(null!=ge||oe.mapper.required){ge=V.serializer.serialize(oe.mapper,ge,wr(oe));const Ne=oe.collectionFormat?Ro[oe.collectionFormat]:"";if(Array.isArray(ge)&&(ge=ge.map(De=>null==De?"":De)),"Multi"===oe.collectionFormat&&0===ge.length)continue;Array.isArray(ge)&&("SSV"===oe.collectionFormat||"TSV"===oe.collectionFormat)&&(ge=ge.join(Ne)),oe.skipEncoding||(ge=Array.isArray(ge)?ge.map(De=>encodeURIComponent(De)):encodeURIComponent(ge)),Array.isArray(ge)&&("CSV"===oe.collectionFormat||"Pipes"===oe.collectionFormat)&&(ge=ge.join(Ne)),J.set(oe.mapper.serializedName||wr(oe),ge)}}return{queryParams:J,sequenceParams:ae}}(O,U,G);return oe=function(V,O,U,G=!1){if(0===O.size)return V;const J=new URL(V),ae=function(V){const O=new Map;if(!V||"?"!==V[0])return O;const U=(V=V.slice(1)).split("&");for(const G of U){const[J,ae]=G.split("=",2),oe=O.get(J);oe?Array.isArray(oe)?oe.push(ae):O.set(J,[oe,ae]):O.set(J,ae)}return O}(J.search);for(const[ge,Ne]of O){const De=ae.get(ge);if(Array.isArray(De))if(Array.isArray(Ne)){De.push(...Ne);const Me=new Set(De);ae.set(ge,Array.from(Me))}else De.push(Ne);else De?(Array.isArray(Ne)?Ne.unshift(De):U.has(ge)&&ae.set(ge,[De,Ne]),G||ae.set(ge,Ne)):ae.set(ge,Ne)}const oe=[];for(const[ge,Ne]of ae)if("string"==typeof Ne)oe.push(`${ge}=${Ne}`);else if(Array.isArray(Ne))for(const De of Ne)oe.push(`${ge}=${De}`);else oe.push(`${ge}=${Ne}`);return J.search=oe.length?`?${oe.join("&")}`:"",J.toString()}(oe,ge,Ne,ae),oe}(J,U,O,G),oe=new ua({url:ae});oe.method=U.httpMethod;const ge=kr(oe);ge.operationSpec=U,ge.operationArguments=O;const Ne=U.contentType||G._requestContentType;Ne&&U.requestBody&&oe.headers.set("Content-Type",Ne);const De=O.options;if(De){const Me=De.requestOptions;Me&&(Me.timeout&&(oe.timeout=Me.timeout),Me.onUploadProgress&&(oe.onUploadProgress=Me.onUploadProgress),Me.onDownloadProgress&&(oe.onDownloadProgress=Me.onDownloadProgress),void 0!==Me.shouldDeserialize&&(ge.shouldDeserialize=Me.shouldDeserialize),Me.allowInsecureConnection&&(oe.allowInsecureConnection=!0)),De.abortSignal&&(oe.abortSignal=De.abortSignal),De.tracingOptions&&(oe.tracingOptions=De.tracingOptions)}G._allowInsecureConnection&&(oe.allowInsecureConnection=!0),void 0===oe.streamResponseStatusCodes&&(oe.streamResponseStatusCodes=function(V){const O=new Set;for(const U in V.responses){const G=V.responses[U];G.bodyMapper&&"Stream"===G.bodyMapper.type.name&&O.add(Number(U))}return O}(U));try{const Me=yield G.sendRequest(oe),$e=ie(Me,U.responses[Me.status]);return(null==De?void 0:De.onResponse)&&De.onResponse(Me,$e),$e}catch(Me){throw Me.response&&(Me.details=ie(Me.response,U.responses[Me.statusCode]||U.responses.default)),Me}})()}}{constructor(O,U){if(void 0===O)throw new Error("'endpoint' cannot be null");U||(U={});const J="azsdk-js-azure-communication-chat/1.1.0",ae=U.userAgentOptions&&U.userAgentOptions.userAgentPrefix?`${U.userAgentOptions.userAgentPrefix} ${J}`:`${J}`;super(Object.assign(Object.assign(Object.assign({},{requestContentType:"application/json; charset=utf-8"}),U),{userAgentOptions:{userAgentPrefix:ae},baseUri:U.endpoint||"{endpoint}"})),this.endpoint=O,this.apiVersion=U.apiVersion||"2021-09-07"}}{constructor(O,U){super(O,U),this.chatThread=new Ar(this),this.chat=new to(this)}}const Pc=V=>$i({credential:{getToken:(U,G)=>V.getToken({abortSignal:null==G?void 0:G.abortSignal})},scopes:[]});class Oo{constructor(O,U,G,J={}){this.endpoint=O,this.timeOfLastTypingRequest=void 0,this.threadId=U,this.tokenCredential=G;const ae=Object.assign(Object.assign({},J),{loggingOptions:{logger:E.info}});this.client=new ns(this.endpoint,Object.assign({endpoint:this.endpoint},ae));const oe=Pc(this.tokenCredential);this.client.pipeline.addPolicy(oe)}getProperties(O={}){var U=this;return(0,_.Z)(function*(){const{span:G,updatedOptions:J}=d("ChatClient-GetProperties",O);try{const ae=yield U.client.chatThread.getChatThreadProperties(U.threadId,J);return P(ae)}catch(ae){throw G.setStatus({code:b.Qn.ERROR,message:ae.message}),ae}finally{G.end()}})()}updateTopic(O,U={}){var G=this;return(0,_.Z)(function*(){const{span:J,updatedOptions:ae}=d("ChatThreadClient-UpdateTopic",U);try{yield G.client.chatThread.updateChatThreadProperties(G.threadId,{topic:O},ae)}catch(oe){throw J.setStatus({code:b.Qn.ERROR,message:oe.message}),oe}finally{J.end()}})()}sendMessage(O,U={}){var G=this;return(0,_.Z)(function*(){const{span:J,updatedOptions:ae}=d("ChatThreadClient-SendMessage",U);try{return G.timeOfLastTypingRequest=void 0,yield G.client.chatThread.sendChatMessage(G.threadId,Object.assign(Object.assign({},O),U),ae)}catch(oe){throw J.setStatus({code:b.Qn.ERROR,message:oe.message}),oe}finally{J.end()}})()}getMessage(O,U={}){var G=this;return(0,_.Z)(function*(){const{span:J,updatedOptions:ae}=d("ChatThreadClient-GetMessage",U);try{const oe=yield G.client.chatThread.getChatMessage(G.threadId,O,ae);return S(oe)}catch(oe){throw J.setStatus({code:b.Qn.ERROR,message:oe.message}),oe}finally{J.end()}})()}listMessagesPage(O,U={}){return(0,h.FC)(this,arguments,function*(){if(!O.continuationToken){const J=yield(0,h.qq)(this.client.chatThread.listChatMessages(this.threadId,U));O.continuationToken=J.nextLink,J.value&&(yield yield(0,h.qq)(J.value.map(S,this)))}for(;O.continuationToken;){const J=yield(0,h.qq)(this.client.chatThread.listChatMessagesNext(this.threadId,O.continuationToken,U));if(O.continuationToken=J.nextLink,!J.value)break;yield yield(0,h.qq)(J.value.map(S,this))}})}listMessagesAll(O){return(0,h.FC)(this,arguments,function*(){var G,J;try{for(var oe,ae=(0,h.KL)(this.listMessagesPage({},O));!(oe=yield(0,h.qq)(ae.next())).done;){const ge=oe.value;yield(0,h.qq)(yield*(0,h.V2)((0,h.KL)(ge)))}}catch(ge){G={error:ge}}finally{try{oe&&!oe.done&&(J=ae.return)&&(yield(0,h.qq)(J.call(ae)))}finally{if(G)throw G.error}}})}listMessages(O={}){const{span:U,updatedOptions:G}=d("ChatThreadClient-ListMessages",O);try{const J=this.listMessagesAll(G);return{next:()=>J.next(),[Symbol.asyncIterator](){return this},byPage:(ae={})=>this.listMessagesPage(ae,G)}}catch(J){throw U.setStatus({code:b.Qn.ERROR,message:J.message}),J}finally{U.end()}}deleteMessage(O,U={}){var G=this;return(0,_.Z)(function*(){const{span:J,updatedOptions:ae}=d("ChatThreadClient-DeleteMessage",U);try{yield G.client.chatThread.deleteChatMessage(G.threadId,O,ae)}catch(oe){throw J.setStatus({code:b.Qn.ERROR,message:oe.message}),oe}finally{J.end()}})()}updateMessage(O,U={}){var G=this;return(0,_.Z)(function*(){const{span:J,updatedOptions:ae}=d("ChatThreadClient-UpdateMessage",U);try{yield G.client.chatThread.updateChatMessage(G.threadId,O,U,ae)}catch(oe){throw J.setStatus({code:b.Qn.ERROR,message:oe.message}),oe}finally{J.end()}})()}addParticipants(O,U={}){var G=this;return(0,_.Z)(function*(){const{span:J,updatedOptions:ae}=d("ChatThreadClient-AddParticipants",U);try{return yield G.client.chatThread.addChatParticipants(G.threadId,(V=>{var O;return{participants:null===(O=V.participants)||void 0===O?void 0:O.map(U=>g(U))}})(O),ae)}catch(oe){throw J.setStatus({code:b.Qn.ERROR,message:oe.message}),oe}finally{J.end()}})()}listParticipantsPage(O,U={}){return(0,h.FC)(this,arguments,function*(){if(!O.continuationToken){const J=yield(0,h.qq)(this.client.chatThread.listChatParticipants(this.threadId,U));O.continuationToken=J.nextLink,J.value&&(yield yield(0,h.qq)(J.value.map(M,this)))}for(;O.continuationToken;){const J=yield(0,h.qq)(this.client.chatThread.listChatParticipantsNext(this.threadId,O.continuationToken,U));if(O.continuationToken=J.nextLink,!J.value)break;yield yield(0,h.qq)(J.value.map(M,this))}})}listParticipantsAll(O){return(0,h.FC)(this,arguments,function*(){var G,J;try{for(var oe,ae=(0,h.KL)(this.listParticipantsPage({},O));!(oe=yield(0,h.qq)(ae.next())).done;){const ge=oe.value;yield(0,h.qq)(yield*(0,h.V2)((0,h.KL)(ge)))}}catch(ge){G={error:ge}}finally{try{oe&&!oe.done&&(J=ae.return)&&(yield(0,h.qq)(J.call(ae)))}finally{if(G)throw G.error}}})}listParticipants(O={}){const{span:U,updatedOptions:G}=d("ChatThreadClient-ListParticipants",O);try{const J=this.listParticipantsAll(G);return{next:()=>J.next(),[Symbol.asyncIterator](){return this},byPage:(ae={})=>this.listParticipantsPage(ae,G)}}catch(J){throw U.setStatus({code:b.Qn.ERROR,message:J.message}),J}finally{U.end()}}removeParticipant(O,U={}){var G=this;return(0,_.Z)(function*(){const{span:J,updatedOptions:ae}=d("ChatThreadClient-RemoveParticipant",U);try{yield G.client.chatThread.removeChatParticipant(G.threadId,(0,C.J)(O),ae)}catch(oe){throw J.setStatus({code:b.Qn.ERROR,message:oe.message}),oe}finally{J.end()}})()}sendTypingNotification(O={}){var U=this;return(0,_.Z)(function*(){const{span:G,updatedOptions:J}=d("ChatThreadClient-SendTypingNotification",O);try{const ae=new Date,{senderDisplayName:oe}=J,ge=(0,h._T)(J,["senderDisplayName"]);return U.canPostTypingNotification(ae)?(yield U.client.chatThread.sendTypingNotification(U.threadId,Object.assign({sendTypingNotificationRequest:{senderDisplayName:oe}},ge)),U.timeOfLastTypingRequest=ae,!0):(E.info(`Typing Notification NOT Send. [thread_id=${U.threadId}]`),!1)}catch(ae){throw G.setStatus({code:b.Qn.ERROR,message:ae.message}),ae}finally{G.end()}})()}sendReadReceipt(O,U={}){var G=this;return(0,_.Z)(function*(){const{span:J,updatedOptions:ae}=d("ChatThreadClient-SendReadReceipt",U);try{yield G.client.chatThread.sendChatReadReceipt(G.threadId,O,ae)}catch(oe){throw J.setStatus({code:b.Qn.ERROR,message:oe.message}),oe}finally{J.end()}})()}listReadReceiptsPage(O,U={}){return(0,h.FC)(this,arguments,function*(){if(!O.continuationToken){const J=yield(0,h.qq)(this.client.chatThread.listChatReadReceipts(this.threadId,U));O.continuationToken=J.nextLink,J.value&&(yield yield(0,h.qq)(J.value.map(A,this)))}for(;O.continuationToken;){const J=yield(0,h.qq)(this.client.chatThread.listChatReadReceiptsNext(this.threadId,O.continuationToken,U));if(O.continuationToken=J.nextLink,!J.value)break;yield yield(0,h.qq)(J.value.map(A,this))}})}listReadReceiptsAll(O){return(0,h.FC)(this,arguments,function*(){var G,J;try{for(var oe,ae=(0,h.KL)(this.listReadReceiptsPage({},O));!(oe=yield(0,h.qq)(ae.next())).done;){const ge=oe.value;yield(0,h.qq)(yield*(0,h.V2)((0,h.KL)(ge)))}}catch(ge){G={error:ge}}finally{try{oe&&!oe.done&&(J=ae.return)&&(yield(0,h.qq)(J.call(ae)))}finally{if(G)throw G.error}}})}listReadReceipts(O={}){const{span:U,updatedOptions:G}=d("ChatThreadClient-ListChatReadReceipts",O);try{const J=this.listReadReceiptsAll(G);return{next:()=>J.next(),[Symbol.asyncIterator](){return this},byPage:(ae={})=>this.listReadReceiptsPage(ae,G)}}catch(J){throw U.setStatus({code:b.Qn.ERROR,message:J.message}),J}finally{U.end()}}canPostTypingNotification(O){return!(this.timeOfLastTypingRequest&&O.getTime()-this.timeOfLastTypingRequest.getTime()<8e3&&(E.info(`Typing interval check failed. [last_request=${this.timeOfLastTypingRequest}]`),1))}}var qi,Wn=new Uint8Array(16);function Ur(){if(!qi&&!(qi="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return qi(Wn)}const zu=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,ri=function(V){return"string"==typeof V&&zu.test(V)};for(var xn=[],rs=0;rs<256;++rs)xn.push((rs+256).toString(16).substr(1));const Sa=function(V,O,U){var G=(V=V||{}).random||(V.rng||Ur)();if(G[6]=15&G[6]|64,G[8]=63&G[8]|128,O){U=U||0;for(var J=0;J<16;++J)O[U+J]=G[J];return O}return function(V){var O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,U=(xn[V[O+0]]+xn[V[O+1]]+xn[V[O+2]]+xn[V[O+3]]+"-"+xn[V[O+4]]+xn[V[O+5]]+"-"+xn[V[O+6]]+xn[V[O+7]]+"-"+xn[V[O+8]]+xn[V[O+9]]+"-"+xn[V[O+10]]+xn[V[O+11]]+xn[V[O+12]]+xn[V[O+13]]+xn[V[O+14]]+xn[V[O+15]]).toLowerCase();if(!ri(U))throw TypeError("Stringified UUID is invalid");return U}(G)};class Ia{constructor(O,U,G={}){this.endpoint=O,this.signalingClient=void 0,this.emitter=new f.EventEmitter,this.isRealtimeNotificationsStarted=!1,this.tokenCredential=U,this.clientOptions=Object.assign({},G);const J=Object.assign(Object.assign({},G),{loggingOptions:{logger:E.info}});this.client=new ns(this.endpoint,Object.assign({endpoint:this.endpoint},J));const ae=Pc(this.tokenCredential);this.client.pipeline.addPolicy(ae),this.signalingClient=((V,O,U)=>{var G;return new v.CommunicationSignalingClient(V,O,{environment:null!==(G=null==U?void 0:U.environment)&&void 0!==G?G:void 0})})(U,E,G.signalingClientOptions)}getChatThreadClient(O){return new Oo(this.endpoint,O,this.tokenCredential,this.clientOptions)}createChatThread(O,U={}){var G=this;return(0,_.Z)(function*(){var J,ae;const{span:oe,updatedOptions:ge}=d("ChatClient-CreateChatThread",U);try{ge.idempotencyToken=null!==(J=ge.idempotencyToken)&&void 0!==J?J:Sa();const Ne=(V=>{const{idempotencyToken:U}=V,G=(0,h._T)(V,["participants","idempotencyToken"]);return Object.assign({repeatabilityRequestId:U},G)})(ge);return(V=>{const{chatThread:O}=V,U=(0,h._T)(V,["chatThread"]);return O?Object.assign(Object.assign({},U),{chatThread:P(O)}):Object.assign({},U)})(yield G.client.chat.createChatThread({topic:O.topic,participants:null===(ae=U.participants)||void 0===ae?void 0:ae.map(Me=>g(Me))},Ne))}catch(Ne){throw oe.setStatus({code:b.Qn.ERROR,message:Ne.message}),Ne}finally{oe.end()}})()}listChatThreadsPage(O,U={}){return(0,h.FC)(this,arguments,function*(){if(!O.continuationToken){const J=yield(0,h.qq)(this.client.chat.listChatThreads(U));O.continuationToken=J.nextLink,J.value&&(yield yield(0,h.qq)(J.value))}for(;O.continuationToken;){const J=yield(0,h.qq)(this.client.chat.listChatThreadsNext(O.continuationToken,U));if(O.continuationToken=J.nextLink,!J.value)break;yield yield(0,h.qq)(J.value)}})}listChatThreadsAll(O){return(0,h.FC)(this,arguments,function*(){var G,J;try{for(var oe,ae=(0,h.KL)(this.listChatThreadsPage({},O));!(oe=yield(0,h.qq)(ae.next())).done;){const ge=oe.value;yield(0,h.qq)(yield*(0,h.V2)((0,h.KL)(ge)))}}catch(ge){G={error:ge}}finally{try{oe&&!oe.done&&(J=ae.return)&&(yield(0,h.qq)(J.call(ae)))}finally{if(G)throw G.error}}})}listChatThreads(O={}){const{span:U,updatedOptions:G}=d("ChatClient-ListChatThreads",O);try{const J=this.listChatThreadsAll(G);return{next:()=>J.next(),[Symbol.asyncIterator](){return this},byPage:(ae={})=>this.listChatThreadsPage(ae,G)}}catch(J){throw U.setStatus({code:b.Qn.ERROR,message:J.message}),J}finally{U.end()}}deleteChatThread(O,U={}){var G=this;return(0,_.Z)(function*(){const{span:J,updatedOptions:ae}=d("ChatClient-DeleteChatThread",U);try{yield G.client.chat.deleteChatThread(O,ae)}catch(oe){throw J.setStatus({code:b.Qn.ERROR,message:oe.message}),oe}finally{J.end()}})()}startRealtimeNotifications(){var O=this;return(0,_.Z)(function*(){if(void 0===O.signalingClient)throw new Error("Realtime notifications are not supported in node js.");O.isRealtimeNotificationsStarted||(O.isRealtimeNotificationsStarted=!0,yield O.signalingClient.start(),O.subscribeToSignalingEvents())})()}stopRealtimeNotifications(){var O=this;return(0,_.Z)(function*(){if(void 0===O.signalingClient)throw new Error("Realtime notifications are not supported in node js.");O.isRealtimeNotificationsStarted=!1,yield O.signalingClient.stop(),O.emitter.removeAllListeners()})()}on(O,U){if(void 0===this.signalingClient)throw new Error("Realtime notifications are only supported in the browser.");if(!this.isRealtimeNotificationsStarted)throw new Error("You must call startRealtimeNotifications before you can subscribe to events.");this.emitter.on(O,U)}off(O,U){if(void 0===this.signalingClient)throw new Error("Realtime notifications are only supported in the browser.");this.emitter.removeListener(O,U)}subscribeToSignalingEvents(){if(void 0===this.signalingClient)throw new Error("Realtime notifications are only supported in the browser.");this.signalingClient.on("chatMessageReceived",O=>{this.emitter.emit("chatMessageReceived",O)}),this.signalingClient.on("chatMessageEdited",O=>{this.emitter.emit("chatMessageEdited",O)}),this.signalingClient.on("chatMessageDeleted",O=>{this.emitter.emit("chatMessageDeleted",O)}),this.signalingClient.on("typingIndicatorReceived",O=>{this.emitter.emit("typingIndicatorReceived",O)}),this.signalingClient.on("readReceiptReceived",O=>{this.emitter.emit("readReceiptReceived",O)}),this.signalingClient.on("chatThreadCreated",O=>{this.emitter.emit("chatThreadCreated",O)}),this.signalingClient.on("chatThreadDeleted",O=>{this.emitter.emit("chatThreadDeleted",O)}),this.signalingClient.on("chatThreadPropertiesUpdated",O=>{this.emitter.emit("chatThreadPropertiesUpdated",O)}),this.signalingClient.on("participantsAdded",O=>{this.emitter.emit("participantsAdded",O)}),this.signalingClient.on("participantsRemoved",O=>{this.emitter.emit("participantsRemoved",O)})}}},8199:(K,m,u)=>{"use strict";u.d(m,{J:()=>f,H:()=>v});var s=u(4762),_=u(6361);const h=(I,b)=>void 0===b?I:Object.assign(Object.assign({},I),{rawId:b}),p=(I,b)=>{const c=Object.keys(I)[0],d=I[c];if(b in d)return d[b];throw new Error(`Property ${b} is required for identifier of type ${c}.`)},f=I=>{var b,c;const d=(0,_.n9)(I);switch(d.kind){case"communicationUser":return{communicationUser:{id:d.communicationUserId}};case"phoneNumber":return h({phoneNumber:{value:d.phoneNumber}},d.rawId);case"microsoftTeamsUser":return h({microsoftTeamsUser:{userId:d.microsoftTeamsUserId,isAnonymous:null!==(b=d.isAnonymous)&&void 0!==b&&b,cloud:null!==(c=d.cloud)&&void 0!==c?c:"public"}},d.rawId);case"unknown":return{rawId:d.id};default:throw new Error(`Can't serialize an identifier with kind ${d.kind}`)}},v=I=>{(I=>{const c=(0,s._T)(I,["rawId"]),d=Object.keys(c);if(d.length>1)throw new Error(`Only one of the properties in ${JSON.stringify(d)} should be present.`)})(I);const{communicationUser:b,microsoftTeamsUser:c,phoneNumber:d}=I;return b?{kind:"communicationUser",communicationUserId:p({communicationUser:b},"id")}:d?{kind:"phoneNumber",phoneNumber:p({phoneNumber:d},"value"),rawId:p({phoneNumber:I},"rawId")}:c?{kind:"microsoftTeamsUser",microsoftTeamsUserId:p({microsoftTeamsUser:c},"userId"),isAnonymous:p({microsoftTeamsUser:c},"isAnonymous"),cloud:p({microsoftTeamsUser:c},"cloud"),rawId:p({microsoftTeamsUser:I},"rawId")}:{kind:"unknown",id:p({unknown:I},"rawId")}}},6361:(K,m,u)=>{"use strict";u.d(m,{sE:()=>s,Nc:()=>_,OU:()=>h,vJ:()=>p,n9:()=>E});const s=f=>"string"==typeof f.communicationUserId,_=f=>"string"==typeof f.phoneNumber,h=f=>"string"==typeof f.microsoftTeamsUserId,p=f=>"string"==typeof f.id,E=f=>s(f)?Object.assign(Object.assign({},f),{kind:"communicationUser"}):_(f)?Object.assign(Object.assign({},f),{kind:"phoneNumber"}):h(f)?Object.assign(Object.assign({},f),{kind:"microsoftTeamsUser"}):Object.assign(Object.assign({},f),{kind:"unknown"})},9116:(K,m,u)=>{"use strict";u.r(m),u.d(m,{AzureCommunicationTokenCredential:()=>c,createCommunicationAccessKeyCredentialPolicy:()=>y,createCommunicationAuthPolicy:()=>j,deserializeCommunicationIdentifier:()=>Z.H,getIdentifierKind:()=>le.n9,isCommunicationUserIdentifier:()=>le.sE,isKeyCredential:()=>te,isMicrosoftTeamsUserIdentifier:()=>le.OU,isPhoneNumberIdentifier:()=>le.Nc,isUnknownIdentifier:()=>le.vJ,parseClientArguments:()=>Y,parseConnectionString:()=>ie,serializeCommunicationIdentifier:()=>Z.J});var s=u(8239),_=u(4934),h=u.n(_);const p=z=>{const{exp:ne}=h()(z);return{token:z,expiresOnTimestamp:1e3*ne}};class E{constructor(ne){this.token=ne}getToken(){var ne=this;return(0,s.Z)(function*(){return ne.token})()}dispose(){}}const f={token:"",expiresOnTimestamp:-10};class b{constructor(ne){this.refreshingIntervalInMs=6e5,this.activeTokenFetching=null,this.activeTokenUpdating=null,this.disposed=!1;const{tokenRefresher:Ce,token:we,refreshProactively:_e}=ne;this.refresh=Ce,this.currentToken=we?p(we):f,this.refreshProactively=null!=_e&&_e,this.refreshProactively&&this.scheduleRefresh()}getToken(ne){var Ce=this;return(0,s.Z)(function*(){if(!Ce.isCurrentTokenExpiringSoon)return Ce.currentToken;const we=Ce.updateTokenAndReschedule(null==ne?void 0:ne.abortSignal);return Ce.isCurrentTokenValid||(yield we),Ce.currentToken})()}dispose(){this.disposed=!0,this.activeTokenFetching=null,this.activeTokenUpdating=null,this.currentToken=f,this.activeTimeout&&clearTimeout(this.activeTimeout)}updateTokenAndReschedule(ne){var Ce=this;return(0,s.Z)(function*(){if(Ce.activeTokenUpdating)return Ce.activeTokenUpdating;Ce.activeTokenUpdating=Ce.refreshTokenAndReschedule(ne);try{yield Ce.activeTokenUpdating}finally{Ce.activeTokenUpdating=null}})()}refreshTokenAndReschedule(ne){var Ce=this;return(0,s.Z)(function*(){Ce.currentToken=yield Ce.refreshToken(ne),Ce.refreshProactively&&Ce.scheduleRefresh()})()}refreshToken(ne){var Ce=this;return(0,s.Z)(function*(){try{return Ce.activeTokenFetching||(Ce.activeTokenFetching=Ce.refresh(ne)),p(yield Ce.activeTokenFetching)}finally{Ce.activeTokenFetching=null}})()}scheduleRefresh(){if(this.disposed)return;this.activeTimeout&&clearTimeout(this.activeTimeout);const ne=this.currentToken.expiresOnTimestamp-Date.now()-this.refreshingIntervalInMs;this.activeTimeout=setTimeout(()=>this.updateTokenAndReschedule(),ne)}get isCurrentTokenValid(){return this.currentToken&&Date.now()<this.currentToken.expiresOnTimestamp}get isCurrentTokenExpiringSoon(){return!this.currentToken||Date.now()>=this.currentToken.expiresOnTimestamp-this.refreshingIntervalInMs}}class c{constructor(ne){this.disposed=!1,this.tokenCredential="string"==typeof ne?new E(p(ne)):new b(ne)}getToken(ne){var Ce=this;return(0,s.Z)(function*(){Ce.throwIfDisposed();const we=yield Ce.tokenCredential.getToken(ne);return Ce.throwIfDisposed(),we})()}dispose(){this.disposed=!0,this.tokenCredential.dispose()}throwIfDisposed(){if(this.disposed)throw new Error("User credential is disposed")}}var d=u(2462),C=u(369),w=u(7694);const g=z=>(new TextEncoder).encode(z);function M(z){if("function"!=typeof btoa)throw new Error("Your browser environment is missing the global `btoa` function");const ne=new Uint8Array(z);let Ce="";for(const we of ne)Ce+=String.fromCharCode(we);return btoa(Ce)}const R=globalThis,S=()=>{if(!R)throw new Error("Could not find global");if(!R.crypto||!R.crypto.subtle)throw new Error("Browser does not support cryptography functions");return R.crypto.subtle},N=function(){var z=(0,s.Z)(function*(ne){const Ce=g(ne);return M(yield S().digest("SHA-256",Ce))});return function(Ce){return z.apply(this,arguments)}}(),P=function(){var z=(0,s.Z)(function*(ne,Ce){const we={name:"HMAC",hash:{name:"SHA-256"}},_e=g(Ce),re=function(z){if("function"!=typeof atob)throw new Error("Your browser environment is missing the global `atob` function");const ne=atob(z),Ce=new Uint8Array(ne.length);for(let we=0;we<ne.length;we++)Ce[we]=ne.charCodeAt(we);return Ce}(ne),fe=S(),me=yield fe.importKey("raw",re,we,!1,["sign"]);return M(yield fe.sign(we,me,_e))});return function(Ce,we){return z.apply(this,arguments)}}(),y=z=>({create:(ne,Ce)=>new A(z,ne,Ce)});class A extends d.U{constructor(ne,Ce,we){super(Ce,we),this.accessKey=ne}signRequest(ne){var Ce=this;return(0,s.Z)(function*(){const we=ne.method.toUpperCase(),_e=(new Date).toUTCString(),re=yield N(ne.body||""),fe="x-ms-date",me=`${fe};host;x-ms-content-sha256`,ve=C.UK.parse(ne.url),be=ve.getQuery(),Ie=be?`${ve.getPath()}?${be}`:ve.getPath(),ke=ve.getPort(),qe=ke?`${ve.getHost()}:${ke}`:ve.getHost(),Re=`${we}\n${Ie}\n${_e};${qe};${re}`,xe=yield P(Ce.accessKey.key,Re);return w.UG&&ne.headers.set("Host",qe||""),ne.headers.set(fe,_e),ne.headers.set("x-ms-content-sha256",re),ne.headers.set("Authorization",`HMAC-SHA256 SignedHeaders=${me}&Signature=${xe}`),ne})()}sendRequest(ne){var Ce=this;return(0,s.Z)(function*(){if(!ne)throw new Error("webResource cannot be null or undefined");return Ce._nextPolicy.sendRequest(yield Ce.signRequest(ne))})()}}var F=u(434),q=u(6354);const j=z=>(0,F.c)(z)?(0,q.v)(z,"https://communication.azure.com//.default"):y(z);class ue{constructor(ne){if(!ne)throw new Error("key must be a non-empty string");this._key=ne}get key(){return this._key}update(ne){this._key=ne}}const ee=/endpoint=(.*);accesskey=(.*)/i,ie=z=>{const ne=(z=>{const ne=z.match(ee);if((null==ne?void 0:ne[1])&&ne[2])return{endpoint:ne[1],credential:new ue(ne[2])}})(z);if(ne)return ne;throw new Error(`Invalid connection string ${z}`)},Te=z=>{if(!(z=>{var ne;const Ce=C.UK.parse(z);return!!(null===(ne=Ce.getScheme())||void 0===ne?void 0:ne.match(/^http[s]?/))&&void 0!==Ce.getHost()&&""!==Ce.getHost()&&(void 0===Ce.getPath()||""===Ce.getPath()||"/"===Ce.getPath())})(z))throw new Error(`Invalid endpoint url ${z}`)},te=z=>z&&"string"==typeof z.key&&void 0===z.getToken,Y=(z,ne)=>{if(te(ne)||(0,F.c)(ne))return Te(z),{url:z,credential:ne};{const{endpoint:Ce,credential:we}=ie(z);return Te(Ce),{url:Ce,credential:we}}};var le=u(6361),Z=u(8199)},2305:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";function _interopDefault(K){return K&&"object"==typeof K&&"default"in K?K.default:K}var coreHttp=_interopDefault(__webpack_require__(6036)),commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function unwrapExports(K){return K&&K.__esModule&&Object.prototype.hasOwnProperty.call(K,"default")?K.default:K}function createCommonjsModule(K,m){return K(m={exports:{}},m.exports),m.exports}var tsregistrar=createCommonjsModule(function(K,m){K.exports=function(u){function s(h){if(_[h])return _[h].exports;var p=_[h]={i:h,l:!1,exports:{}};return u[h].call(p.exports,p,p.exports,s),p.l=!0,p.exports}var _={};return s.m=u,s.c=_,s.i=function(h){return h},s.d=function(h,p,E){s.o(h,p)||Object.defineProperty(h,p,{configurable:!1,enumerable:!0,get:E})},s.n=function(h){var p=h&&h.__esModule?function(){return h.default}:function(){return h};return s.d(p,"a",p),p},s.o=function(h,p){return Object.prototype.hasOwnProperty.call(h,p)},s.p="",s(s.s=1)}([function(u,s,_){Object.defineProperty(s,"__esModule",{value:!0}),s.toJson=function(E){try{return JSON.stringify(E)}catch(f){return"Unable to serialize object of type "+typeof E}};var p=function(){function E(){this.start=Date.now()}return Object.defineProperty(E.prototype,"duration",{get:function(){return Date.now()-this.start},enumerable:!0,configurable:!0}),Object.defineProperty(E.prototype,"startTime",{get:function(){return this.start},enumerable:!0,configurable:!0}),E.prototype.reset=function(){this.start=Date.now()},E}();s.Timespan=p},function(u,s,_){var d,p=this&&this.__extends||(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,w){C.__proto__=w}||function(C,w){for(var g in w)w.hasOwnProperty(g)&&(C[g]=w[g])},function(C,w){function g(){this.constructor=C}d(C,w),C.prototype=null===w?Object.create(w):(g.prototype=w.prototype,new g)}),E=this&&this.__awaiter||function(d,C,w,g){return new(w||(w=Promise))(function(T,M){function R(P){try{N(g.next(P))}catch(y){M(y)}}function S(P){try{N(g.throw(P))}catch(y){M(y)}}function N(P){P.done?T(P.value):new w(function(y){y(P.value)}).then(R,S)}N((g=g.apply(d,C||[])).next())})},f=this&&this.__generator||function(d,C){function w(P){return function(y){return function(P){if(T)throw new TypeError("Generator is already executing.");for(;N;)try{if(T=1,M&&(R=2&P[0]?M.return:P[0]?M.throw||((R=M.return)&&R.call(M),0):M.next)&&!(R=R.call(M,P[1])).done)return R;switch(M=0,R&&(P=[2&P[0],R.value]),P[0]){case 0:case 1:R=P;break;case 4:return N.label++,{value:P[1],done:!1};case 5:N.label++,M=P[1],P=[0];continue;case 7:P=N.ops.pop(),N.trys.pop();continue;default:if(!(R=(R=N.trys).length>0&&R[R.length-1])&&(6===P[0]||2===P[0])){N=0;continue}if(3===P[0]&&(!R||P[1]>R[0]&&P[1]<R[3])){N.label=P[1];break}if(6===P[0]&&N.label<R[1]){N.label=R[1],R=P;break}if(R&&N.label<R[2]){N.label=R[2],N.ops.push(P);break}R[2]&&N.ops.pop(),N.trys.pop();continue}P=C.call(d,N)}catch(y){P=[6,y],M=0}finally{T=R=0}if(5&P[0])throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}([P,y])}}var T,M,R,S,N={label:0,sent:function(){if(1&R[0])throw R[1];return R[1]},trys:[],ops:[]};return S={next:w(0),throw:w(1),return:w(2)},"function"==typeof Symbol&&(S[Symbol.iterator]=function(){return this}),S};Object.defineProperty(s,"__esModule",{value:!0});var v=_(0),I=function(d){function C(w){var g=d.call(this,w)||this;return g.name="CancelationError",g}return p(C,d),C}(Error),b=function(){function d(C,w,g){this.logger=C,this.maxBackoffInMs=w,this.initialDelay=g,this.backoffCount=0,this.id=++d.idCounter}return d.prototype.delay=function(C){var w=this;if(void 0!==this.timerHandle)throw new Error("Retry sequence logical failure");if(-1===this.backoffCount)return new Promise(function(T,M){M(new I("Cancelled"))});var g=this.calculateNextBackoffMs();return this.backoffCount++,this.logger.info("[RegistrarClient] Backing off "+C+" for "+g+" milliseconds with ID "+this.id),new Promise(function(T,M){w.cancelFunc=M,w.timerHandle=setTimeout(function(){w.logger.info("[RegistrarClient] Back off for "+C+" with ID "+w.id+" complete"),w.timerHandle=void 0,T()},g)})},d.prototype.cancel=function(){void 0!==this.timerHandle&&(this.logger.debug("Resetting back off"),clearTimeout(this.timerHandle),void 0!==this.cancelFunc&&this.cancelFunc(new I("Cancelled"))),this.backoffCount=-1},d.prototype.calculateNextBackoffMs=function(){var C=1+.4*(Math.random()-.5),w=this.initialDelay*Math.pow(2,this.backoffCount)*C;return w=Math.round(w),Math.min(this.maxBackoffInMs,w)},d.idCounter=0,d}(),c=function(){function d(C,w,g){this.logger=C,this.skypeTokenProvider=w,this.options=g,this.backoffs={}}return d.prototype.setTelemetryLogger=function(C){this.eventLogger=C},d.prototype.register=function(C,w){return E(this,void 0,void 0,function(){return f(this,function(g){switch(g.label){case 0:return[4,this.performRegistration(C,w,"pr_set_registration")];case 1:return g.sent(),this.cachedRegistrationParams=[C,w],[2]}})})},d.prototype.unregister=function(){return E(this,void 0,void 0,function(){var C;return f(this,function(w){switch(w.label){case 0:return this.logger.info("[RegistrarClient] sending unregister request"),C=new Request(this.options.registrarUrl+"/"+this.options.registrationId,{method:"DELETE",mode:"cors",headers:new Headers({accept:"application/json, text/javascript"})}),[4,this.callRegistrar(C,"pr_delete_registration")];case 1:return w.sent(),[2]}})})},d.prototype.cancelPendingRequests=function(){var C=this;Object.keys(this.backoffs).forEach(function(w){C.backoffs[w].cancel()}),this.backoffs={}},d.prototype.resendRegistration=function(){return E(this,void 0,void 0,function(){return f(this,function(C){switch(C.label){case 0:if(!this.cachedRegistrationParams)throw new Error("Re-registration failed because there is no registration parameters cached");return[4,this.performRegistration(this.cachedRegistrationParams[0],this.cachedRegistrationParams[1],"pr_resend_registration")];case 1:return C.sent(),[2]}})})},d.prototype.performRegistration=function(C,w,g){return E(this,void 0,void 0,function(){var T,M;return f(this,function(R){switch(R.label){case 0:return this.logger.info("[RegistrarClient] Sending register request"),T={clientDescription:C,registrationId:this.options.registrationId,nodeId:"",transports:w},M=new Request(this.options.registrarUrl,{method:"POST",mode:"cors",headers:new Headers({"content-type":"application/json",accept:"application/json, text/javascript"}),body:v.toJson(T)}),[4,this.callRegistrar(M,g)];case 1:return R.sent(),[2]}})})},d.prototype.startBackoff=function(){var C=new b(this.logger,this.options.maxRetryDelayMs,this.options.initialRetryDelayMs);return this.backoffs[C.id]=C,C},d.prototype.stopBackoff=function(C){C.cancel(),delete this.backoffs[C.id]},d.prototype.getSkypeToken=function(){return E(this,void 0,void 0,function(){var C,w,T;return f(this,function(M){switch(M.label){case 0:C=this.startBackoff(),M.label=1;case 1:return M.trys.push([1,3,,8]),this.logger.info("[RegistrarClient] Asking for a new skypetoken"),[4,this.skypeTokenProvider(!0)];case 2:return w=M.sent(),this.stopBackoff(C),[2,w];case 3:M.sent(),M.label=4;case 4:return M.trys.push([4,6,,7]),[4,C.delay("Fetching a new skypetoken")];case 5:return M.sent(),[3,8];case 6:throw T=M.sent(),this.stopBackoff(C),T;case 7:return[3,8];case 8:return[3,1];case 9:return[2]}})})},d.prototype.callRegistrar=function(C,w){return E(this,void 0,void 0,function(){var g,T,M,R,S,N,P,y,A,F,q,j,ee;return f(this,function($){switch($.label){case 0:return g=this.startBackoff(),[4,this.skypeTokenProvider(!1)];case 1:T=$.sent(),this.setSkypeTokenHeader(C,T),M=new v.Timespan,$.label=2;case 2:R=void 0,$.label=3;case 3:return $.trys.push([3,8,13,14]),S=C.clone(),[4,this.fetchWithTimeout(S)];case 4:return 401!==(R=$.sent()).status?[3,6]:(N=this.setSkypeTokenHeader,P=[C],[4,this.getSkypeToken()]);case 5:return N.apply(this,P.concat([$.sent()])),[3,20];case 6:if(R.status>=500&&R.status<600)throw new Error("Fetch for '"+C.url+"' failed with "+R.status+" "+R.statusText);$.label=7;case 7:return[3,14];case 8:y=$.sent(),this.logger.error("[RegistrarClient] Request failed with "+y),$.label=9;case 9:return $.trys.push([9,11,,12]),[4,g.delay("Registrar call retry")];case 10:return $.sent(),[3,20];case 11:throw A=$.sent(),this.logger.error("[RegistrarClient] Request cancelled"),this.stopBackoff(g),A;case 12:return[3,14];case 13:return this.sendTelemetryEvent(w,C,R,M),[7];case 14:return this.stopBackoff(g),R.ok?[2,R]:[3,15];case 15:F=void 0,$.label=16;case 16:return $.trys.push([16,18,,19]),j=(q=JSON).stringify,[4,R.json()];case 17:return F=j.apply(q,[$.sent()]),[3,19];case 18:return $.sent(),F="no details",[3,19];case 19:throw ee="Fetch for '"+C.url+"' failed with "+R.status+" "+R.statusText+" ("+F+", MS-CV: "+R.headers.get("MS-CV")+")",this.logger.error("[RegistrarClient] "+ee),new Error(ee);case 20:return[3,2];case 21:return[2]}})})},d.prototype.setSkypeTokenHeader=function(C,w){C.headers.set("X-Skypetoken",w)},d.prototype.fetchWithTimeout=function(C){var w=this;return new Promise(function(g,T){fetch(C).then(g).catch(T),0!==w.options.requestTimeoutMs&&setTimeout(T,w.options.requestTimeoutMs,new Error("Fetch for '"+C.url+"' timed out"))})},d.prototype.sendTelemetryEvent=function(C,w,g,T){void 0!==this.eventLogger&&this.eventLogger.logEvent({name:C,properties:{url:{value:w.url},result_code:{value:void 0!==g?g.status:0},begin_timestamp:{value:T.startTime},elapsed:{value:T.duration}}})},d}();s.RegistrarClient=c,s.createRegistrarClient=function(d,C,w){return new c(d,C,w)}}])});unwrapExports(tsregistrar);var tstrouter=createCommonjsModule(function(module,exports){var m;m=function(__WEBPACK_EXTERNAL_MODULE_20__){return function(K){function m(s){if(u[s])return u[s].exports;var _=u[s]={i:s,l:!1,exports:{}};return K[s].call(_.exports,_,_.exports,m),_.l=!0,_.exports}var u={};return m.m=K,m.c=u,m.i=function(s){return s},m.d=function(s,_,h){m.o(s,_)||Object.defineProperty(s,_,{configurable:!1,enumerable:!0,get:h})},m.n=function(s){var _=s&&s.__esModule?function(){return s.default}:function(){return s};return m.d(_,"a",_),_},m.o=function(s,_){return Object.prototype.hasOwnProperty.call(s,_)},m.p="",m(m.s=19)}([function(K,m,u){Object.defineProperty(m,"__esModule",{value:!0});var s=function(){function _(h,p){this.name=h,this.logger=p}return _.prototype.debug=function(h){this.logger.debug("["+this.name+"] "+h)},_.prototype.info=function(h){this.logger.info("["+this.name+"] "+h)},_.prototype.warn=function(h){this.logger.warn("["+this.name+"] "+h)},_.prototype.error=function(h){this.logger.error("["+this.name+"] "+h)},_}();m.Logger=s},function(K,m,u){Object.defineProperty(m,"__esModule",{value:!0}),m.constants={TROUTER_INIT:"trouterinit",TROUTER_READY_EVENT:"trouterReadyEvent",TROUTER_READY_TIMEOUT:"trouterReadyTimeout",TROUTER_TOKEN_REQUEST:"trouterTokenRequest",TROUTER_TOKEN_GET_SUCCEEDED:"trouterTokenGetSucceeded",TROUTER_TOKEN_GET_FAILED:"trouterTokenGetFailed",TROUTER_RECONNECTING:"trouterReconnecting",RENEWAL:"renewal",NEW_CONNECTION:"newConnection",ENDPOINT_REGISTRATION_FAILED:"endpointRegistrationFailed"},m.CLIENT_VERSION="2021.32.00.1",m.HANDLED_MESSAGE_ACK=200,m.UNHANDLED_MESSAGE_ACK=404,m.FAILED_MESSAGE_ACK=500},function(K,m,u){var _;Object.defineProperty(m,"__esModule",{value:!0}),(_=m.UserActivityState||(m.UserActivityState={}))[_.Unknown=0]="Unknown",_[_.Active=1]="Active",_[_.Inactive=2]="Inactive",m.HttpHeaders=function(){},function(_){_[_.Unknown=0]="Unknown",_[_.Connected=2]="Connected",_[_.Disconnected=3]="Disconnected",_[_.Switching=9]="Switching"}(m.TrouterState||(m.TrouterState={}))},function(K,m,u){Object.defineProperty(m,"__esModule",{value:!0}),m.toJson=function(f){try{return JSON.stringify(f)}catch(v){return"Unable to serialize object of type "+typeof f}},m.calculateTtlInSec=function(f){var v=Math.round((new Date).getTime()/1e3);return void 0!==f&&f>v?f-v:0},m.calculateExpireTsInSec=function(f){return Math.round((new Date).getTime()/1e3)+f};var p=function(){function f(v){this.base=void 0!==v?v:this.createCorrelationVectorBase(),this.extension=0}return f.extend=function(v){return new f(v)},f.prototype.increase=function(){this.extension++},f.prototype.value=function(){return this.base+"."+this.extension},f.prototype.createCorrelationVectorBase=function(){for(var v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0987654321/+",I="AQgw",b="",c=0;c<21;c++)b+=v.charAt(Math.floor(Math.random()*v.length));return b+I.charAt(Math.floor(Math.random()*I.length))},f}();m.CorrelationVector=p;var E=function(){function f(){this.start=Date.now()}return Object.defineProperty(f.prototype,"duration",{get:function(){return Date.now()-this.start},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"startTime",{get:function(){return this.start},enumerable:!0,configurable:!0}),f.prototype.reset=function(){this.start=Date.now()},f}();m.Timespan=E},function(K,m){var u;u=function(){return this}();try{u=u||Function("return this")()||(0,eval)("this")}catch(s){"object"==typeof window&&(u=window)}K.exports=u},function(K,m,u){Object.defineProperty(m,"__esModule",{value:!0});var h,s=u(3),_=function(){function h(p,E,f,v,I,b,c){this.connectionId=p,this.connectedClientId=E,this.domId=f,this.unsecureUrl=v,this.url=I,this.c2cUrlBase=b,this.expirationTsSec=c}return h.prototype.getRemainingTtlInSec=function(){return s.calculateTtlInSec(this.expirationTsSec)},h}();m.ServerState=_,(h=m.UserActivityEventReason||(m.UserActivityEventReason={}))[h.Unknown=0]="Unknown",h[h.Modified=1]="Modified",h[h.Snapshot=2]="Snapshot",h[h.Connected=3]="Connected"},function(K,m,u){Object.defineProperty(m,"__esModule",{value:!0});var s=u(1),_=function(){function h(p){this.logger=p,this.messageHandlers=[]}return h.prototype.register=function(p){if(this.messageHandlers.some(function(E){return E===p}))throw new Error("Registering the same handler twice is not allowed");this.messageHandlers.push(p)},h.prototype.clear=function(){this.logger.debug("Clearing message handlers"),this.messageHandlers=[]},h.prototype.active=function(){return this.messageHandlers.length>0},h.prototype.handleMessage=function(p){for(var E={resultCode:s.UNHANDLED_MESSAGE_ACK,isHandled:!1},f=0,v=this.messageHandlers;f<v.length;f++){var b=this.safeExecuteHandle(v[f],p);if(void 0!==b&&(void 0===b.isHandled||b.isHandled))return void 0===b.resultCode&&(b.resultCode=s.HANDLED_MESSAGE_ACK),b}return E},h.prototype.safeExecuteHandle=function(p,E){try{return p.handleMessage(E)}catch(f){return void this.logger.warn("A trouter message handler is throwing exceptions. exception: "+f)}},h}();m.MessageHandlerRegistry=_},function(K,m,u){var _=this&&this.__awaiter||function(p,E,f,v){return new(f||(f=Promise))(function(I,b){function c(w){try{C(v.next(w))}catch(g){b(g)}}function d(w){try{C(v.throw(w))}catch(g){b(g)}}function C(w){w.done?I(w.value):new f(function(g){g(w.value)}).then(c,d)}C((v=v.apply(p,E||[])).next())})},h=this&&this.__generator||function(p,E){function f(w){return function(g){return function(w){if(I)throw new TypeError("Generator is already executing.");for(;C;)try{if(I=1,b&&(c=2&w[0]?b.return:w[0]?b.throw||((c=b.return)&&c.call(b),0):b.next)&&!(c=c.call(b,w[1])).done)return c;switch(b=0,c&&(w=[2&w[0],c.value]),w[0]){case 0:case 1:c=w;break;case 4:return C.label++,{value:w[1],done:!1};case 5:C.label++,b=w[1],w=[0];continue;case 7:w=C.ops.pop(),C.trys.pop();continue;default:if(!(c=(c=C.trys).length>0&&c[c.length-1])&&(6===w[0]||2===w[0])){C=0;continue}if(3===w[0]&&(!c||w[1]>c[0]&&w[1]<c[3])){C.label=w[1];break}if(6===w[0]&&C.label<c[1]){C.label=c[1],c=w;break}if(c&&C.label<c[2]){C.label=c[2],C.ops.push(w);break}c[2]&&C.ops.pop(),C.trys.pop();continue}w=E.call(p,C)}catch(g){w=[6,g],b=0}finally{I=c=0}if(5&w[0])throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}([w,g])}}var I,b,c,d,C={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return d={next:f(0),throw:f(1),return:f(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d};Object.defineProperty(m,"__esModule",{value:!0}),m.addCacheAsBackupTo=function(p){var E,f=this;return function(v){return _(f,void 0,void 0,function(){return h(this,function(I){return v&&(E=void 0),[2,new Promise(function(b,c){p(v).then(function(d){E=d,b(d)}).catch(function(d){void 0!==E&&E.length>0&&b(E),c(d)})})]})})}}},function(K,m,u){var s=this&&this.__awaiter||function(c,d,C,w){return new(C||(C=Promise))(function(g,T){function M(N){try{S(w.next(N))}catch(P){T(P)}}function R(N){try{S(w.throw(N))}catch(P){T(P)}}function S(N){N.done?g(N.value):new C(function(P){P(N.value)}).then(M,R)}S((w=w.apply(c,d||[])).next())})},_=this&&this.__generator||function(c,d){function C(N){return function(P){return function(N){if(g)throw new TypeError("Generator is already executing.");for(;S;)try{if(g=1,T&&(M=2&N[0]?T.return:N[0]?T.throw||((M=T.return)&&M.call(T),0):T.next)&&!(M=M.call(T,N[1])).done)return M;switch(T=0,M&&(N=[2&N[0],M.value]),N[0]){case 0:case 1:M=N;break;case 4:return S.label++,{value:N[1],done:!1};case 5:S.label++,T=N[1],N=[0];continue;case 7:N=S.ops.pop(),S.trys.pop();continue;default:if(!(M=(M=S.trys).length>0&&M[M.length-1])&&(6===N[0]||2===N[0])){S=0;continue}if(3===N[0]&&(!M||N[1]>M[0]&&N[1]<M[3])){S.label=N[1];break}if(6===N[0]&&S.label<M[1]){S.label=M[1],M=N;break}if(M&&S.label<M[2]){S.label=M[2],S.ops.push(N);break}M[2]&&S.ops.pop(),S.trys.pop();continue}N=d.call(c,S)}catch(P){N=[6,P],T=0}finally{g=M=0}if(5&N[0])throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}([N,P])}}var g,T,M,R,S={label:0,sent:function(){if(1&M[0])throw M[1];return M[1]},trys:[],ops:[]};return R={next:C(0),throw:C(1),return:C(2)},"function"==typeof Symbol&&(R[Symbol.iterator]=function(){return this}),R};Object.defineProperty(m,"__esModule",{value:!0});var h=u(3),p=u(2),E=u(0),f=u(16),v=u(18),I=function(){function c(d,C){this.state=d,this.correlationVector=void 0!==C?C:h.CorrelationVector.extend()}return c.prototype.getStateString=function(){switch(this.state){case p.UserActivityState.Active:return"active";case p.UserActivityState.Inactive:return"inactive";case p.UserActivityState.Unknown:return"unknown";default:return"undefined"}},c.prototype.toEventObject=function(){return{state:this.getStateString(),cv:this.correlationVector.value()}},c.prototype.toEventJSON=function(){return h.toJson(this.toEventObject())},c}();m.UserActivityObject=I;var b=function(){function c(d,C,w,g){this.logFunc=d,this.options=C,this.tokenProvider=w,this.listener=g,this.logger=new E.Logger("Manager",d),this.logger.info("Created TrouterManager with options "+h.toJson(this.options)),this.fsm=new v.TrouterManagerFsm(d,this),this.baseEndpointUrl="",this.processedMessageLoss={},this.userActivityObject=new I(p.UserActivityState.Unknown)}return c.prototype.start=function(){this.fsm.start()},c.prototype.stop=function(d){this.fsm.stop(d)},c.prototype.configure=function(d){this.options=d,void 0!==this.firstConnection&&this.firstConnection.configure(d),void 0!==this.secondConnection&&this.secondConnection.configure(d),this.logger.info("Reconfigured TrouterManager with options "+h.toJson(this.options))},c.prototype.checkConnection=function(d){void 0!==this.firstConnection&&this.firstConnection.checkConnection(d),void 0!==this.secondConnection&&this.secondConnection.checkConnection(d)},c.prototype.resendRegistration=function(){return s(this,void 0,void 0,function(){return _(this,function(d){return void 0!==this.secondConnection?(this.logger.info("Resending registration on the second/new connection"),[2,this.secondConnection.resendRegistration()]):void 0!==this.firstConnection?(this.logger.info("Resending registration on the first/current connection"),[2,this.firstConnection.resendRegistration()]):(this.logger.info("No connection to resend registration on, will be done upon (re)connect"),[2])})})},c.prototype.getServerState=function(){if(void 0!==this.firstConnection)return this.firstConnection.getServerState()},c.prototype.getState=function(){return this.fsm.getState()},c.prototype.startFirstConnection=function(){var d=new f.TrouterConnection(this.logFunc,this.options,this,this.tokenProvider,this.userActivityObject);this.firstConnection=d,this.getConnectionCache().then(function(C){d.start(C)}).catch()},c.prototype.startSecondConnection=function(){this.secondConnection=new f.TrouterConnection(this.logFunc,this.options,this,this.tokenProvider,this.userActivityObject),this.secondConnection.start()},c.prototype.stopFirstConnection=function(d){void 0!==this.firstConnection&&(this.firstConnection.stop(d),this.storedFirstConnection=this.firstConnection,this.firstConnection=void 0)},c.prototype.stopSecondConnection=function(d){void 0!==this.secondConnection&&(this.secondConnection.stop(d),this.secondConnection=void 0)},c.prototype.stopSecondConnectionDelayed=function(){if(void 0!==this.secondConnection){var d=this.secondConnection;this.secondConnection=void 0,this.logger.info("Closing an inactive connection in "+Math.round(this.options.lingeringConnectionDelayMs/1e3)+"s"),setTimeout(function(){d.stop(!0)},this.options.lingeringConnectionDelayMs)}},c.prototype.forceStopLingeringConnection=function(){this.storedFirstConnection&&(this.storedFirstConnection.stop(!1),this.storedFirstConnection=void 0)},c.prototype.switchConnections=function(){var d=this.firstConnection;this.firstConnection=this.secondConnection,this.secondConnection=d},c.prototype.doesSecondConnectionExist=function(){return void 0!==this.secondConnection},c.prototype.dispatchConnected=function(){if(void 0!==this.firstConnection){var d=this.firstConnection.getServerState(),C="/"===d.url.slice(-1)?d.url.slice(0,-1):d.url,w={baseEndpointUrl:C,newEndpointUrl:C!==this.baseEndpointUrl,c2cUrlBase:d.c2cUrlBase,clientId:d.connectedClientId,connectionId:d.connectionId,connectionTtlSec:d.getRemainingTtlInSec()};this.baseEndpointUrl=C,this.listener.onTrouterConnected(d.url,w)}},c.prototype.dispatchReconnecting=function(){this.listener.onTrouterDisconnected&&this.listener.onTrouterDisconnected()},c.prototype.dispatchStopped=function(){this.listener.onTrouterDisconnected&&this.listener.onTrouterDisconnected()},c.prototype.dispatchRegistrationState=function(d){this.options.registrationStateCallback&&this.options.registrationStateCallback(d)},c.prototype.onDownstreamRequest=function(d,C,w){var T={id:C.id,status:0,headers:{},body:"",send:function(){return T.status<=100||T.status>=999?3:(w.writeHead(T.status,T.headers),w.end(T.body))}};this.listener.onTrouterRequest({id:C.id,method:C.method,path:"/"+C.shortUrl,body:C.body,headers:C.headers},T)},c.prototype.onConnected=function(d){this.fsm.onConnected(d===this.firstConnection)},c.prototype.onRegistered=function(d){this.fsm.onRegistered(d===this.firstConnection)},c.prototype.onUnregistered=function(d){this.fsm.onUnregistered(d===this.firstConnection||d===this.storedFirstConnection)},c.prototype.onReconnecting=function(d){this.fsm.onReconnecting(d===this.firstConnection)},c.prototype.onReconnectIsRequired=function(d){this.fsm.onReconnectionRequired(d===this.firstConnection)},c.prototype.onDisconnected=function(d){this.fsm.onDisconnected(d===this.storedFirstConnection),this.storedFirstConnection=void 0},c.prototype.onUserActivityStateAccepted=function(d){this.listener.onTrouterUserActivityStateAccepted&&this.listener.onTrouterUserActivityStateAccepted(d)},c.prototype.onConnectionParametersUpdated=function(d){this.setConnectionCache(d)},c.prototype.setUserActivityState=function(d,C){return this.userActivityObject=new I(d,h.CorrelationVector.extend(C)),void 0!==this.secondConnection?(this.logger.info("Setting user activity "+this.userActivityObject.toEventJSON()+" on the second/new connection"),void this.secondConnection.setUserActivityState(this.userActivityObject)):void 0!==this.firstConnection?(this.logger.info("Setting user activity "+this.userActivityObject.toEventJSON()+" on the first/current connection"),void this.firstConnection.setUserActivityState(this.userActivityObject)):void 0},c.prototype.onTrouterMessageLost=function(d){var C=this;if(this.listener.onTrouterMessageLoss)if(d&&d.length){var w=d.filter(function(T){return void 0!==C.processedMessageLoss[T.tag+"-"+T.etag]});if(w.length&&(this.logger.warn("onTrouterMessageLoss - removing duplicates and sending event to server"),this.sendProcessedDroppedIndicators(w),!(d=d.filter(function(T){return void 0===C.processedMessageLoss[T.tag+"-"+T.etag]})).length))return void this.logger.warn("onTrouterMessageLoss - All the data are duplicated");if(!this.listener.onTrouterMessageLoss(d.map(function(T){return T.tag})))return void this.logger.warn("onTrouterMessageLoss - flow tags have not been processed by listeners");d.forEach(function(T){C.processedMessageLoss[T.tag+"-"+T.etag]=""}),this.sendProcessedDroppedIndicators(d)}else this.logger.warn("onTrouterMessageLoss - no flow tags have been provided")},c.prototype.getConnectionCache=function(){var d=this;return this.options.connectionCache?(this.logger.debug("Querying host's connection cache"),this.options.connectionCache.onGetTrouterConnectionCache().then(function(C){return C?JSON.parse(C):void 0}).catch(function(C){return d.logger.warn("Invalid connection cache content provided: "+C),d.connectionCache})):Promise.resolve(this.connectionCache)},c.prototype.setConnectionCache=function(d){if(this.connectionCache=d,this.options.connectionCache)try{this.options.connectionCache.onSetTrouterConnectionCache(JSON.stringify(d))}catch(C){this.logger.warn("Error setting external connection cache: "+C)}},c.prototype.sendProcessedDroppedIndicators=function(d){return void 0!==this.firstConnection?void this.firstConnection.sendProcessedDroppedIndicators(d):void 0!==this.secondConnection?void this.secondConnection.sendProcessedDroppedIndicators(d):void 0},c}();m.TrouterManager=b},function(K,m,u){Object.defineProperty(m,"__esModule",{value:!0});var s=function(){function _(h){this.logger=h}return _.prototype.getPromise=function(){var h=this;return void 0!==this.url?(this.logger.debug("[TrouterUrlPromise] returning previously resolved url: "+this.url),Promise.resolve(this.url)):(void 0===this.pendingPromise?(this.logger.debug("[TrouterUrlPromise] creating and returning promise"),this.pendingPromise=new Promise(function(p,E){h.pendingPromiseResolveRef=p,h.pendingPromiseRejectRef=E})):this.logger.debug("[TrouterUrlPromise] returning existing promise"),this.pendingPromise)},_.prototype.resolveUrl=function(h){this.url=h,this.logger.debug("[TrouterUrlPromise] got url: "+this.url);var p=this.pendingPromiseResolveRef;this.pendingPromise=void 0,this.pendingPromiseResolveRef=void 0,this.pendingPromiseRejectRef=void 0,void 0!==p&&(this.logger.debug("[TrouterUrlPromise] resolving promise"),p(h))},_.prototype.rejectUrl=function(h){this.logger.debug("[TrouterUrlPromise] aborting");var p=this.pendingPromiseRejectRef;this.url=void 0,this.pendingPromise=void 0,this.pendingPromiseResolveRef=void 0,this.pendingPromiseRejectRef=void 0,void 0!==p&&(this.logger.debug("[TrouterUrlPromise] rejecting promise"),p(h))},_.prototype.resetUrl=function(){this.logger.debug("[TrouterUrlPromise] resetting url"),this.url=void 0},_}();m.TrouterUrlPromise=s},function(module,exports,__nested_webpack_require_43418__){(function(global,module){var K,m,u;K=module.exports,m=void 0===global?window:global,u=K,u.version="0.9.6",u.protocol=1,u.transports=[],u.j=[],u.sockets={},u.connect=function(s,_){var h,p,E=u.util.parseUri(s);m&&m.location&&(E.protocol=E.protocol||m.location.protocol.slice(0,-1),E.host=E.host||(m.document?m.document.domain:m.location.hostname),E.port=E.port||m.location.port),h=u.util.uniqueUri(E);var f={host:E.host,secure:"https"==E.protocol,port:E.port||("https"==E.protocol?443:80),query:E.query||""};return u.util.merge(f,_),!f["force new connection"]&&u.sockets[h]||(p=new u.Socket(f)),!f["force new connection"]&&p&&(u.sockets[h]=p),(p=p||u.sockets[h]).of(E.path.length>1?E.path:"")};var io=module.exports;(function(K,m){var u=K.util={},s=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,_=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];u.parseUri=function(p){for(var E=s.exec(p||""),f={},v=14;v--;)f[_[v]]=E[v]||"";return f},u.uniqueUri=function(p){var E=p.protocol,f=p.host,v=p.port;return"document"in m?(f=f||document.domain,v=v||("https"==E&&"https:"!==document.location.protocol?443:document.location.port)):(f=f||"localhost",v||"https"!=E||(v=443)),(E||"http")+"://"+f+":"+(v||80)},u.query=function(p,E){var f=u.chunkQuery(p||""),v=[];for(var I in u.merge(f,u.chunkQuery(E||"")),f)f.hasOwnProperty(I)&&v.push(I+"="+f[I]);return v.length?"?"+v.join("&"):""},u.chunkQuery=function(p){for(var E,f={},v=p.split("&"),I=0,b=v.length;I<b;++I)(E=v[I].split("="))[0]&&(f[E[0]]=E[1]);return f};var h=!1;u.load=function(p){if("document"in m&&"complete"===document.readyState||h)return p();u.on(m,"load",p,!1)},u.on=function(p,E,f,v){p.attachEvent?p.attachEvent("on"+E,f):p.addEventListener&&p.addEventListener(E,f,v)},u.request=function(p){if(p&&"undefined"!=typeof XDomainRequest)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!p||u.ua.hasCORS))return new XMLHttpRequest;if(!p)try{return new(window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(E){}return null},"undefined"!=typeof window&&u.load(function(){h=!0}),u.defer=function(p){if(!u.ua.webkit||"undefined"!=typeof importScripts)return p();u.load(function(){setTimeout(p,100)})},u.merge=function(p,E,f,v){var I,b=v||[],c=void 0===f?2:f;for(I in E)E.hasOwnProperty(I)&&u.indexOf(b,I)<0&&("object"==typeof p[I]&&c?u.merge(p[I],E[I],c-1,b):(p[I]=E[I],b.push(E[I])));return p},u.mixin=function(p,E){u.merge(p.prototype,E.prototype)},u.inherit=function(p,E){function f(){}f.prototype=E.prototype,p.prototype=new f},u.isArray=Array.isArray||function(p){return"[object Array]"===Object.prototype.toString.call(p)},u.intersect=function(p,E){for(var f=[],v=p.length>E.length?p:E,I=p.length>E.length?E:p,b=0,c=I.length;b<c;b++)~u.indexOf(v,I[b])&&f.push(I[b]);return f},u.indexOf=function(p,E,f){var v=p.length;for(f=f<0?f+v<0?0:f+v:f||0;f<v&&p[f]!==E;f++);return v<=f?-1:f},u.toArray=function(p){for(var E=[],f=0,v=p.length;f<v;f++)E.push(p[f]);return E},u.ua={},u.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var p=new XMLHttpRequest}catch(E){return!1}return null!=p.withCredentials}(),u.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent)})(void 0!==io?io:module.exports,void 0===global?window:global),function(K,m){function u(){}K.EventEmitter=u,u.prototype.addListener=u.prototype.on=function(s,_){return this.$events||(this.$events={}),this.$events[s]?m.util.isArray(this.$events[s])?this.$events[s].push(_):this.$events[s]=[this.$events[s],_]:this.$events[s]=_,this},u.prototype.once=function(s,_){function h(){p.removeListener(s,h),_.apply(this,arguments)}var p=this;return h.listener=_,this.on(s,h),this},u.prototype.removeListener=function(s,_){if(this.$events&&this.$events[s]){var h=this.$events[s];if(m.util.isArray(h)){for(var p=-1,E=0,f=h.length;E<f;E++)if(h[E]===_||h[E].listener&&h[E].listener===_){p=E;break}if(p<0)return this;h.splice(p,1),h.length||delete this.$events[s]}else(h===_||h.listener&&h.listener===_)&&delete this.$events[s]}return this},u.prototype.removeAllListeners=function(s){return this.$events&&this.$events[s]&&(this.$events[s]=null),this},u.prototype.listeners=function(s){return this.$events||(this.$events={}),this.$events[s]||(this.$events[s]=[]),m.util.isArray(this.$events[s])||(this.$events[s]=[this.$events[s]]),this.$events[s]},u.prototype.emit=function(s){if(!this.$events)return!1;var _=this.$events[s];if(!_)return!1;var h=Array.prototype.slice.call(arguments,1);if("function"==typeof _)_.apply(this,h);else{if(!m.util.isArray(_))return!1;for(var p=_.slice(),E=0,f=p.length;E<f;E++)p[E].apply(this,h)}return!0}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),function(exports,nativeJSON){function f(K){return K<10?"0"+K:K}function date(K,m){return isFinite(K.valueOf())?K.getUTCFullYear()+"-"+f(K.getUTCMonth()+1)+"-"+f(K.getUTCDate())+"T"+f(K.getUTCHours())+":"+f(K.getUTCMinutes())+":"+f(K.getUTCSeconds())+"Z":null}function quote(K){return escapable.lastIndex=0,escapable.test(K)?'"'+K.replace(escapable,function(m){var u=meta[m];return"string"==typeof u?u:"\\u"+("0000"+m.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+K+'"'}function str(K,m){var u,s,_,h,p,E=gap,f=m[K];switch(f instanceof Date&&(f=date(K)),"function"==typeof rep&&(f=rep.call(m,K,f)),typeof f){case"string":return quote(f);case"number":return isFinite(f)?String(f):"null";case"boolean":case"null":return String(f);case"object":if(!f)return"null";if(gap+=indent,p=[],"[object Array]"===Object.prototype.toString.apply(f)){for(h=f.length,u=0;u<h;u+=1)p[u]=str(u,f)||"null";return _=0===p.length?"[]":gap?"[\n"+gap+p.join(",\n"+gap)+"\n"+E+"]":"["+p.join(",")+"]",gap=E,_}if(rep&&"object"==typeof rep)for(h=rep.length,u=0;u<h;u+=1)"string"==typeof rep[u]&&(_=str(s=rep[u],f))&&p.push(quote(s)+(gap?": ":":")+_);else for(s in f)Object.prototype.hasOwnProperty.call(f,s)&&(_=str(s,f))&&p.push(quote(s)+(gap?": ":":")+_);return _=0===p.length?"{}":gap?"{\n"+gap+p.join(",\n"+gap)+"\n"+E+"}":"{"+p.join(",")+"}",gap=E,_}}if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={},cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;JSON.stringify=function(K,m,u){var s;if(gap="",indent="","number"==typeof u)for(s=0;s<u;s+=1)indent+=" ";else"string"==typeof u&&(indent=u);if(rep=m,m&&"function"!=typeof m&&("object"!=typeof m||"number"!=typeof m.length))throw new Error("JSON.stringify");return str("",{"":K})},JSON.parse=function(text,reviver){function walk(K,m){var u,s,_=K[m];if(_&&"object"==typeof _)for(u in _)Object.prototype.hasOwnProperty.call(_,u)&&(void 0!==(s=walk(_,u))?_[u]=s:delete _[u]);return reviver.call(K,m,_)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(K){return"\\u"+("0000"+K.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}(void 0!==io?io:module.exports,"undefined"!=typeof JSON?JSON:void 0),function(K,m){var u=K.parser={},s=u.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],_=u.reasons=["transport not supported","client not handshaken","unauthorized"],h=u.advice=["reconnect"],p=m.JSON,E=m.util.indexOf;u.encodePacket=function(v){var I=E(s,v.type),b=v.id||"",c=v.endpoint||"",d=v.ack,C=null;switch(v.type){case"error":var w=v.reason?E(_,v.reason):"",g=v.advice?E(h,v.advice):"";""===w&&""===g||(C=w+(""!==g?"+"+g:""));break;case"message":""!==v.data&&(C=v.data);break;case"event":var T={name:v.name};v.args&&v.args.length&&(T.args=v.args),C=p.stringify(T);break;case"json":C=p.stringify(v.data);break;case"connect":v.qs&&(C=v.qs);break;case"ack":C=v.ackId+(v.args&&v.args.length?"+"+p.stringify(v.args):"")}var M=[I,b+("data"==d?"+":""),c];return null!=C&&M.push(C),M.join(":")},u.encodePayload=function(v){var I="";if(1==v.length)return v[0];for(var b=0,c=v.length;b<c;b++)I+="\ufffd"+v[b].length+"\ufffd"+v[b];return I};var f=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;u.decodePacket=function(v){if(!(I=v.match(f)))return{};var b=I[2]||"",c=(v=I[5]||"",{type:s[I[1]],endpoint:I[4]||""});switch(b&&(c.id=b,c.ack=!I[3]||"data"),c.type){case"error":var I=v.split("+");c.reason=_[I[0]]||"",c.advice=h[I[1]]||"";break;case"message":c.data=v||"";break;case"event":try{var d=p.parse(v);c.name=d.name,c.args=d.args}catch(w){}c.args=c.args||[];break;case"json":try{c.data=p.parse(v)}catch(w){}break;case"connect":c.qs=v||"";break;case"ack":if((I=v.match(/^([0-9]+)(\+)?(.*)/))&&(c.ackId=I[1],c.args=[],I[3]))try{c.args=I[3]?p.parse(I[3]):[]}catch(w){}break;case"disconnect":c.reason=v}return c},u.decodePayload=function(v){if("\ufffd"==v.charAt(0)){for(var I=[],b=1,c="";b<v.length;b++)"\ufffd"==v.charAt(b)?(I.push(u.decodePacket(v.substr(b+1).substr(0,c))),b+=Number(c)+1,c=""):c+=v.charAt(b);return I}return[u.decodePacket(v)]}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),function(K,m){function u(s,_){this.socket=s,this.sessid=_,this.connectErrorCallback=void 0,this.isOpened=!1}K.Transport=u,m.util.mixin(u,m.EventEmitter),u.prototype.onData=function(s){if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),""!==s){var _=m.parser.decodePayload(s);if(_&&_.length)for(var h=0,p=_.length;h<p;h++)this.onPacket(_[h])}return this},u.prototype.onPacket=function(s){return this.socket.setHeartbeatTimeout(),"heartbeat"==s.type?this.onHeartbeat():("connect"==s.type&&""==s.endpoint&&this.onConnect(),"error"==s.type&&"reconnect"==s.advice&&(this.isOpened=!1),this.socket.onPacket(s),this)},u.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var s=this;this.closeTimeout=setTimeout(function(){s.onDisconnect()},this.socket.closeTimeout)}},u.prototype.onDisconnect=function(){return this.close&&this.isOpened&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},u.prototype.onConnect=function(){return this.socket.onConnect(),this.connectErrorCallback=void 0,this},u.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},u.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},u.prototype.packet=function(s){this.send(m.parser.encodePacket(s))},u.prototype.onHeartbeat=function(s){this.packet({type:"heartbeat"})},u.prototype.onOpen=function(){this.isOpened=!0,this.clearCloseTimeout(),this.socket.onOpen()},u.prototype.onClose=function(){this.isOpened=!1,this.socket.onClose(),this.onDisconnect()},u.prototype.prepareUrl=function(){var s=this.socket.options;return this.scheme()+"://"+s.host+":"+s.port+"/"+s.resource+"/"+m.protocol+"/"+this.name+"/"+this.sessid},u.prototype.ready=function(s,_){_.call(this)},u.prototype.clearEventHandlers=function(){return this}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),function(K,m,u){function s(h){if(this.options={port:80,secure:!1,document:"document"in u&&document,resource:"socket.io",transports:m.transports.slice(),"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!0,"auto connect":!0,"flash policy port":10843},m.util.merge(this.options,h),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.disconnected=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||m.util.ua.hasCORS)){var p=this;m.util.on(u,"unload",function(){p.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function _(){}K.Socket=s,m.util.mixin(s,m.EventEmitter),s.prototype.of=function(h){return this.namespaces[h]||(this.namespaces[h]=new m.SocketNamespace(this,h),""!==h&&this.namespaces[h].packet({type:"connect"})),this.namespaces[h]},s.prototype.publish=function(){var h;for(var p in this.emit.apply(this,arguments),this.namespaces)this.namespaces.hasOwnProperty(p)&&(h=this.of(p)).$emit.apply(h,arguments)},s.prototype.handshake=function(h){function p(d){d instanceof Error?E.onError(d.message):h.apply(null,d.split(":"))}var E=this,f=this.options;if(!E.disconnected){var v=["http"+(f.secure?"s":"")+":/",f.host+":"+f.port,f.resource,m.protocol,m.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!m.util.ua.hasCORS){var I=document.getElementsByTagName("script")[0],b=document.createElement("script");b.src=v+"&jsonp="+m.j.length,I.parentNode.insertBefore(b,I),m.j.push(function(d){p(d),b.parentNode.removeChild(b)})}else{var c=m.util.request();c.open("GET",v,!0),c.withCredentials=!0,c.onreadystatechange=function(){4==c.readyState&&(c.onreadystatechange=_,200==c.status?p(c.responseText):!E.reconnecting&&E.onError(c.responseText))},c.send(null)}}},s.prototype.getTransport=function(h){for(var p,E=h||this.transports,f=0;p=E[f];f++)if(m.Transport[p]&&m.Transport[p].check(this)&&(!this.isXDomain()||m.Transport[p].xdomainCheck()))return new m.Transport[p](this,this.sessionid);return null},s.prototype.connect=function(h){if(this.connecting||this.disconnected)return this;var p=this;return this.handshake(function(E,f,v,I){function b(){if(!p.connected&&!p.disconnected)if(p.connecting=!1,clearTimeout(p.connectTimeoutTimer),p.options["try multiple transports"]){for(;p.remainingTransports.length>0&&p.remainingTransports.splice(0,1)[0]!=p.transport.name;);p.remainingTransports.length?c(p.remainingTransports):p.publish("connect_failed")}else p.publish("connect_failed")}function c(d){if(p.transport&&(p.transport.clearTimeouts(),p.transport.clearEventHandlers()),p.transport=p.getTransport(d),!p.transport||p.disconnected)return p.publish("connect_failed");p.transport.ready(p,function(){p.connecting=!0,p.publish("connecting",p.transport.name),p.transport.open(b),p.options["connect timeout"]&&(p.connectTimeoutTimer=setTimeout(function(){b()},p.options["connect timeout"]))})}p.sessionid=E,p.closeTimeout=1e3*v+2e3,p.heartbeatTimeout=1e3*f+2e3,p.transports=I?m.util.intersect(I.split(","),p.options.transports):p.options.transports,p.setHeartbeatTimeout(),p.remainingTransports=p.transports.slice(0),c(p.transports),p.once("connect",function(){clearTimeout(p.connectTimeoutTimer),h&&"function"==typeof h&&h()})}),this},s.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);var h=this;this.heartbeatTimeoutTimer=setTimeout(function(){h.transport.onClose()},this.heartbeatTimeout)},s.prototype.packet=function(h){return this.connected&&!this.doBuffer?this.transport.packet(h):this.buffer.push(h),this},s.prototype.setBuffer=function(h){this.doBuffer=h,!h&&this.connected&&this.buffer.length&&(this.transport.payload(this.buffer),this.buffer=[])},s.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this.disconnected=!0,this},s.prototype.disconnectSync=function(){m.util.request().open("GET",this.resource+"/"+m.protocol+"/"+this.sessionid,!0),this.onDisconnect("booted")},s.prototype.isXDomain=function(){return this.options.host!==u.location.hostname||this.options.port!=(u.location.port||("https:"==u.location.protocol?443:80))},s.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},s.prototype.onOpen=function(){this.open=!0},s.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},s.prototype.onPacket=function(h){this.of(h.endpoint).onPacket(h)},s.prototype.onError=function(h){h&&h.advice&&"reconnect"===h.advice&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",h&&h.reason?h.reason:h)},s.prototype.onDisconnect=function(h){var p=this.connected,E=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1,(p||E)&&(this.transport.close(),this.transport.clearTimeouts(),p&&(this.publish("disconnect",h),"booted"!=h&&this.options.reconnect&&!this.reconnecting&&this.reconnect()))},s.prototype.reconnect=function(){function h(){if(E.connected){for(var b in E.namespaces)E.namespaces.hasOwnProperty(b)&&""!==b&&E.namespaces[b].packet({type:"connect"});E.publish("reconnect",E.transport.name,E.reconnectionAttempts)}clearTimeout(E.reconnectionTimer),E.removeListener("connect_failed",p),E.removeListener("connect",p),E.reconnecting=!1,delete E.reconnectionAttempts,delete E.reconnectionDelay,delete E.reconnectionTimer,delete E.redoTransports,E.options["try multiple transports"]=v}function p(){if(E.reconnecting)return E.connected?h():E.connecting&&E.reconnecting?E.reconnectionTimer=setTimeout(p,1e3):void(E.reconnectionAttempts++>=f?E.redoTransports?(E.publish("reconnect_failed"),h()):(E.on("connect_failed",p),E.options["try multiple transports"]=!0,E.transport=E.getTransport(),E.redoTransports=!0,E.connect()):(E.reconnectionDelay<I&&(E.reconnectionDelay*=2),E.connect(),E.publish("reconnecting",E.reconnectionDelay,E.reconnectionAttempts),E.reconnectionTimer=setTimeout(p,E.reconnectionDelay)))}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var E=this,f=this.options["max reconnection attempts"],v=this.options["try multiple transports"],I=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(p,this.reconnectionDelay),this.on("connect",p)}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports,void 0===global?window:global),function(K,m){function u(_,h){this.socket=_,this.name=h||"",this.flags={},this.json=new s(this,"json"),this.ackPackets=0,this.acks={}}function s(_,h){this.namespace=_,this.name=h}K.SocketNamespace=u,m.util.mixin(u,m.EventEmitter),u.prototype.$emit=m.EventEmitter.prototype.emit,u.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},u.prototype.packet=function(_){return _.endpoint=this.name,this.socket.packet(_),this.flags={},this},u.prototype.send=function(_,h){var p={type:this.flags.json?"json":"message",data:_};return"function"==typeof h&&(p.id=++this.ackPackets,p.ack=!0,this.acks[p.id]=h),this.packet(p)},u.prototype.emit=function(_){var h=Array.prototype.slice.call(arguments,1),p=h[h.length-1],E={type:"event",name:_};return"function"==typeof p&&(E.id=++this.ackPackets,E.ack="data",this.acks[E.id]=p,h=h.slice(0,h.length-1)),E.args=h,this.packet(E)},u.prototype.disconnect=function(){return""===this.name?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},u.prototype.onPacket=function(_){function h(){p.packet({type:"ack",args:m.util.toArray(arguments),ackId:_.id})}var p=this;switch(_.type){case"connect":this.$emit("connect");break;case"disconnect":""===this.name?this.socket.onDisconnect(_.reason||"booted"):this.$emit("disconnect",_.reason||"");break;case"message":case"json":var E=["message",_.data];"data"==_.ack?E.push(h):_.ack&&this.packet({type:"ack",ackId:_.id}),this.$emit.apply(this,E);break;case"event":E=[_.name].concat(_.args),"data"==_.ack&&E.push(h),this.$emit.apply(this,E);break;case"ack":this.acks[_.ackId]&&(this.acks[_.ackId].apply(this,_.args),delete this.acks[_.ackId]);break;case"error":_.advice?this.socket.onError(_):this.$emit("unauthorized"==_.reason?"connect_failed":"error",_.reason)}},s.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},s.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),function(K,m,u){function s(h){m.Transport.apply(this,arguments)}function _(){}K.websocket=s,m.util.inherit(s,m.Transport),s.prototype.name="websocket",s.prototype.open=function(h){var p,E=m.util.query(this.socket.options.query),f=this;return this.connectErrorCallback=h,p||(p=u.MozWebSocket||u.WebSocket),this.websocket=new p(this.prepareUrl()+E),this.websocket.onopen=function(){f.onOpen(),f.socket.setBuffer(!1)},this.websocket.onmessage=function(v){f.onData(v.data)},this.websocket.onclose=function(){f.onClose(),f.socket.setBuffer(!0)},this.websocket.onerror=function(v){f.onError(v)},this},s.prototype.send=function(h){return this.websocket.send(h),this},s.prototype.payload=function(h){for(var p=0,E=h.length;p<E;p++)this.packet(h[p]);return this},s.prototype.close=function(){return this.websocket.close(),this},s.prototype.onError=function(h){void 0!==this.connectErrorCallback&&(this.connectErrorCallback(),this.connectErrorCallback=void 0),this.socket.onError(h)},s.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},s.check=function(){return"WebSocket"in u&&!("__addTask"in WebSocket)||"MozWebSocket"in u},s.xdomainCheck=function(){return!0},s.prototype.clearEventHandlers=function(){return this.websocket&&(this.websocket.onopen=this.websocket.onmessage=this.websocket.onclose=this.websocket.onerror=_),this},m.transports.push("websocket")}(void 0!==io?io.Transport:module.exports,void 0!==io?io:module.parent.exports,void 0===global?window:global),function(K,m,u){function s(h){h&&(m.Transport.apply(this,arguments),this.sendBuffer=[])}function _(){}K.XHR=s,m.util.inherit(s,m.Transport),s.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},s.prototype.payload=function(h){for(var p=[],E=0,f=h.length;E<f;E++)p.push(m.parser.encodePacket(h[E]));this.send(m.parser.encodePayload(p))},s.prototype.send=function(h){return this.post(h),this},s.prototype.post=function(h){var f=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),u.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=function(){this.onload=_,f.socket.setBuffer(!1)}:this.sendXHR.onreadystatechange=function(){4==this.readyState&&(this.onreadystatechange=_,f.posting=!1,200==this.status?(f.socket.setBuffer(!1),clearTimeout(f.sendXHR.ackTimeoutTimer)):f.onClose())},this.sendXHR.send(h),f.sendXHR.ackTimeoutTimer=setTimeout(function(){f.onClose()},f.socket.options.ackTimeoutMs)},s.prototype.close=function(){return this.onClose(),this},s.prototype.request=function(h){var p=m.util.request(this.socket.isXDomain()),E=m.util.query(this.socket.options.query,"t="+ +new Date);if(p.open(h||"GET",this.prepareUrl()+E,!0),"POST"==h)try{p.setRequestHeader?p.setRequestHeader("Content-type","text/plain;charset=UTF-8"):p.contentType="text/plain"}catch(f){}return p},s.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},s.check=function(h,p){try{var E=m.util.request(p),f=u.XDomainRequest&&E instanceof XDomainRequest;if(E&&(!f||(h&&h.options&&h.options.secure?"https:":"http:")==u.location.protocol))return!0}catch(b){}return!1},s.xdomainCheck=function(){return s.check(null,!0)},s.prototype.clearEventHandlers=function(){return this.sendXHR&&(this.sendXHR.onreadystatechange=this.sendXHR.onload=_),this}}(void 0!==io?io.Transport:module.exports,void 0!==io?io:module.parent.exports,void 0===global?window:global),function(K,m,u){function s(){m.Transport.XHR.apply(this,arguments)}function _(){}K["xhr-polling"]=s,m.util.inherit(s,m.Transport.XHR),m.util.merge(s,m.Transport.XHR),s.prototype.name="xhr-polling",s.prototype.open=function(h){return this.connectErrorCallback=h,m.Transport.XHR.prototype.open.call(this),!1},s.prototype.get=function(){if(this.isOpened){var f=this;this.xhr=this.request(),u.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=function(){f.connectErrorCallback=void 0,this.onload=_,this.onerror=_,f.onData(this.responseText),f.get()},this.xhr.onerror=function(){f.onClose(),void 0!==f.connectErrorCallback&&(f.connectErrorCallback(),f.connectErrorCallback=void 0)}):this.xhr.onreadystatechange=function(){4==this.readyState&&(this.onreadystatechange=_,200==this.status?(f.connectErrorCallback=void 0,f.onData(this.responseText),f.get()):(f.onClose(),void 0!==f.connectErrorCallback&&(f.connectErrorCallback(),f.connectErrorCallback=void 0)))},this.xhr.send(null)}},s.prototype.onClose=function(){if(m.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=_;try{this.xhr.abort()}catch(h){}this.xhr=null}},s.prototype.ready=function(h,p){var E=this;m.util.defer(function(){p.call(E)})},s.prototype.clearEventHandlers=function(){return m.Transport.XHR.prototype.clearEventHandlers.call(this),this.xhr&&(this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=_),this},m.transports.push("xhr-polling")}(void 0!==io?io.Transport:module.exports,void 0!==io?io:module.parent.exports,void 0===global?window:global),exports.io=io}).call(exports,__nested_webpack_require_43418__(4),__nested_webpack_require_43418__(13)(module))},function(K,m,u){(function(s,_){K.exports=function(){function p(Ae){return"function"==typeof Ae}function I(){var Ae=setTimeout;return function(){return Ae(b,1)}}function b(){for(var Ae=0;Ae<me;Ae+=2)(0,Ye[Ae])(Ye[Ae+1]),Ye[Ae]=void 0,Ye[Ae+1]=void 0;me=0}function c(Ae,ze){var ot=arguments,yt=this,At=new this.constructor(C);void 0===At[We]&&Te(At);var zt,Ot=yt._state;return Ot?(zt=ot[Ot-1],Ie(function(){return $(Ot,At,zt,yt._result)})):q(yt,At,Ae,ze),At}function d(Ae){if(Ae&&"object"==typeof Ae&&Ae.constructor===this)return Ae;var ot=new this(C);return P(ot,Ae),ot}function C(){}function T(Ae){try{return Ae.then}catch(ze){return nt.error=ze,nt}}function N(Ae,ze,ot){ze.constructor===Ae.constructor&&ot===c&&ze.constructor.resolve===d?function(Ae,ze){ze._state===Ue?A(Ae,ze._result):ze._state===ut?F(Ae,ze._result):q(ze,void 0,function(ot){return P(Ae,ot)},function(ot){return F(Ae,ot)})}(Ae,ze):ot===nt?F(Ae,nt.error):void 0===ot?A(Ae,ze):p(ot)?function(Ae,ze,ot){Ie(function(yt){var At=!1,Ot=function(Ae,ze,ot,yt){try{Ae.call(ze,ot,yt)}catch(At){return At}}(ot,ze,function(zt){At||(At=!0,ze!==zt?P(yt,zt):A(yt,zt))},function(zt){At||(At=!0,F(yt,zt))});!At&&Ot&&(At=!0,F(yt,Ot))},Ae)}(Ae,ze,ot):A(Ae,ze)}function P(Ae,ze){Ae===ze?F(Ae,new TypeError("You cannot resolve a promise with itself")):function(Ae){return"function"==typeof Ae||"object"==typeof Ae&&null!==Ae}(ze)?N(Ae,ze,T(ze)):A(Ae,ze)}function y(Ae){Ae._onerror&&Ae._onerror(Ae._result),j(Ae)}function A(Ae,ze){Ae._state===st&&(Ae._result=ze,Ae._state=Ue,0!==Ae._subscribers.length&&Ie(j,Ae))}function F(Ae,ze){Ae._state===st&&(Ae._state=ut,Ae._result=ze,Ie(y,Ae))}function q(Ae,ze,ot,yt){var At=Ae._subscribers,Ot=At.length;Ae._onerror=null,At[Ot]=ze,At[Ot+Ue]=ot,At[Ot+ut]=yt,0===Ot&&Ae._state&&Ie(j,Ae)}function j(Ae){var ze=Ae._subscribers,ot=Ae._state;if(0!==ze.length){for(var yt=void 0,At=void 0,Ot=Ae._result,zt=0;zt<ze.length;zt+=3)At=ze[zt+ot],(yt=ze[zt])?$(ot,yt,At,Ot):At(Ot);Ae._subscribers.length=0}}function ue(){this.error=null}function $(Ae,ze,ot,yt){var At=p(ot),Ot=void 0,zt=void 0,Qn=void 0,Jn=void 0;if(At){if((Ot=function(Ae,ze){try{return Ae(ze)}catch(ot){return Wt.error=ot,Wt}}(ot,yt))===Wt?(Jn=!0,zt=Ot.error,Ot=null):Qn=!0,ze===Ot)return void F(ze,new TypeError("A promises callback cannot return that same promise."))}else Ot=yt,Qn=!0;ze._state!==st||(At&&Qn?P(ze,Ot):Jn?F(ze,zt):Ae===Ue?A(ze,Ot):Ae===ut&&F(ze,Ot))}function Te(Ae){Ae[We]=Zt++,Ae._state=void 0,Ae._result=void 0,Ae._subscribers=[]}function te(Ae,ze){this._instanceConstructor=Ae,this.promise=new Ae(C),this.promise[We]||Te(this.promise),fe(ze)?(this._input=ze,this.length=ze.length,this._remaining=ze.length,this._result=new Array(this.length),0===this.length?A(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&A(this.promise,this._result))):F(this.promise,new Error("Array Methods must be provided an Array"))}function we(Ae){this[We]=Zt++,this._result=this._state=void 0,this._subscribers=[],C!==Ae&&("function"!=typeof Ae&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof we?function(Ae,ze){try{ze(function(ot){P(Ae,ot)},function(ot){F(Ae,ot)})}catch(ot){F(Ae,ot)}}(this,Ae):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}var Ae,ze,ot,fe=Array.isArray?Array.isArray:function(Ae){return"[object Array]"===Object.prototype.toString.call(Ae)},me=0,ve=void 0,be=void 0,Ie=function(Ae,ze){Ye[me]=Ae,Ye[me+1]=ze,2===(me+=2)&&(be?be(b):Xe())},ke="undefined"!=typeof window?window:void 0,qe=ke||{},Re=qe.MutationObserver||qe.WebKitMutationObserver,xe="undefined"==typeof self&&void 0!==s&&"[object process]"==={}.toString.call(s),Ge="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Ye=new Array(1e3),Xe=void 0;Xe=xe?function(){return s.nextTick(b)}:Re?(Ae=0,ze=new Re(b),ot=document.createTextNode(""),ze.observe(ot,{characterData:!0}),function(){ot.data=Ae=++Ae%2}):Ge?function(){var Ae=new MessageChannel;return Ae.port1.onmessage=b,function(){return Ae.port2.postMessage(0)}}():void 0===ke?function(){try{var Ae=u(21);return void 0!==(ve=Ae.runOnLoop||Ae.runOnContext)?function(){ve(b)}:I()}catch(ze){return I()}}():I();var We=Math.random().toString(36).substring(16),st=void 0,Ue=1,ut=2,nt=new ue,Wt=new ue,Zt=0;return te.prototype._enumerate=function(){for(var Ae=this.length,ze=this._input,ot=0;this._state===st&&ot<Ae;ot++)this._eachEntry(ze[ot],ot)},te.prototype._eachEntry=function(Ae,ze){var ot=this._instanceConstructor,yt=ot.resolve;if(yt===d){var At=T(Ae);if(At===c&&Ae._state!==st)this._settledAt(Ae._state,ze,Ae._result);else if("function"!=typeof At)this._remaining--,this._result[ze]=Ae;else if(ot===we){var Ot=new ot(C);N(Ot,Ae,At),this._willSettleAt(Ot,ze)}else this._willSettleAt(new ot(function(zt){return zt(Ae)}),ze)}else this._willSettleAt(yt(Ae),ze)},te.prototype._settledAt=function(Ae,ze,ot){var yt=this.promise;yt._state===st&&(this._remaining--,Ae===ut?F(yt,ot):this._result[ze]=ot),0===this._remaining&&A(yt,this._result)},te.prototype._willSettleAt=function(Ae,ze){var ot=this;q(Ae,void 0,function(yt){return ot._settledAt(Ue,ze,yt)},function(yt){return ot._settledAt(ut,ze,yt)})},we.all=function(Ae){return new te(this,Ae).promise},we.race=function(Ae){var ze=this;return new ze(fe(Ae)?function(ot,yt){for(var At=Ae.length,Ot=0;Ot<At;Ot++)ze.resolve(Ae[Ot]).then(ot,yt)}:function(ot,yt){return yt(new TypeError("You must pass an array to race."))})},we.resolve=d,we.reject=function(Ae){var ot=new this(C);return F(ot,Ae),ot},we._setScheduler=function(Ae){be=Ae},we._setAsap=function(Ae){Ie=Ae},we._asap=Ie,we.prototype={constructor:we,then:c,catch:function(Ae){return this.then(null,Ae)}},we.polyfill=function(){var Ae=void 0;if(void 0!==_)Ae=_;else if("undefined"!=typeof self)Ae=self;else try{Ae=Function("return this")()}catch(yt){throw new Error("polyfill failed because global object is unavailable in this environment")}var ze=Ae.Promise;if(ze){var ot=null;try{ot=Object.prototype.toString.call(ze.resolve())}catch(yt){}if("[object Promise]"===ot&&!ze.cast)return}Ae.Promise=we},we.Promise=we,we}()}).call(m,u(12),u(4))},function(K,m){function u(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function _(T){if(I===setTimeout)return setTimeout(T,0);if((I===u||!I)&&setTimeout)return I=setTimeout,setTimeout(T,0);try{return I(T,0)}catch(M){try{return I.call(null,T,0)}catch(R){return I.call(this,T,0)}}}function p(){w&&d&&(w=!1,d.length?C=d.concat(C):g=-1,C.length&&E())}function E(){if(!w){var T=_(p);w=!0;for(var M=C.length;M;){for(d=C,C=[];++g<M;)d&&d[g].run();g=-1,M=C.length}d=null,w=!1,function(T){if(b===clearTimeout)return clearTimeout(T);if((b===s||!b)&&clearTimeout)return b=clearTimeout,clearTimeout(T);try{b(T)}catch(M){try{return b.call(null,T)}catch(R){return b.call(this,T)}}}(T)}}function f(T,M){this.fun=T,this.array=M}function v(){}var I,b,c=K.exports={};!function(){try{I="function"==typeof setTimeout?setTimeout:u}catch(T){I=u}try{b="function"==typeof clearTimeout?clearTimeout:s}catch(T){b=s}}();var d,C=[],w=!1,g=-1;c.nextTick=function(T){var M=new Array(arguments.length-1);if(arguments.length>1)for(var R=1;R<arguments.length;R++)M[R-1]=arguments[R];C.push(new f(T,M)),1!==C.length||w||_(E)},f.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=v,c.addListener=v,c.once=v,c.off=v,c.removeListener=v,c.removeAllListeners=v,c.emit=v,c.prependListener=v,c.prependOnceListener=v,c.listeners=function(T){return[]},c.binding=function(T){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(T){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(K,m){K.exports=function(u){return u.webpackPolyfill||(u.deprecate=function(){},u.paths=[],u.children||(u.children=[]),Object.defineProperty(u,"loaded",{enumerable:!0,get:function(){return u.l}}),Object.defineProperty(u,"id",{enumerable:!0,get:function(){return u.i}}),u.webpackPolyfill=1),u}},function(K,m,u){Object.defineProperty(m,"__esModule",{value:!0});var E,d,s=u(3),_=u(1),h=u(0);m.ResponseData=function(C){this.id=C,this.status=200,this.headers={},this.body=""},(d=E=m.ClientEventName||(m.ClientEventName={})).Connected="trouter_js_client_connected",d.Disconnected="trouter_js_client_disconnected",d.Error="trouter_js_client_error",d.Progress="trouter_js_client_progress",d.Response="trouter_js_client_response",d.Request="trouter_js_client_request",d.CheckConnection="trouter_js_client_check_connection",d.Registration="trouter_js_client_registration",d.Unregistration="trouter_js_client_unregistration";var f=function(C,w,g,T,M){this.stepName=C,this.operation=w,this.delta=g,this.ts=T,this.error=M};m.TrackerStep=f,m.Properties=function(){};var I=function(){this.numberOfPingReplies=0,this.connectedTimestamp=0,this.isNewUrl=!1,this.transportType="",this.connectionNumber=0},b=function(){this.enabled=!1,this.numberOfStepsToMaintain=40,this.logHealthCheckError=!1,this.sendProgressTimeoutSecs=55,this.logSendPingError=!1,this.maxBackoffInMs=12e4,this.trouter_js_client_connected=!1,this.trouter_js_client_disconnected=!1,this.trouter_js_client_error=!1,this.trouter_js_client_progress=!1,this.trouter_js_client_response=!1,this.trouter_js_client_request=!1,this.trouter_js_client_registration=!1,this.trouter_js_client_unregistration=!1,this.trouter_js_client_check_connection=!0},c=function(){function d(C,w,g,T,M,R,S){this.clientId=w,this.clientInfo=g,this.getServerState=T,this.endpointId=M,this.clientCorrelationID=R,this.environment=S,this.logger=new h.Logger("ConnectionTracker",C),this.clientCorrelationID=void 0!==R?R:"",this.steps=[],this.connectionAttempt=0,this.totalStepCount=0,this.beginTimestamp=new s.Timespan,this.eventLogSettings=new b,this.connectedInfo=new I}return d.prototype.enable=function(C){this.eventLogSettings.enabled=!0,this.eventLogger=C},d.prototype.disable=function(){this.eventLogSettings.enabled=!1},d.prototype.sendProgress=function(C){this.steps.length>0&&this.sendTelemetry(E.Progress,C,this.steps)},d.prototype.cancelProgressTimer=function(){void 0!==this.progressTimeout&&(clearTimeout(this.progressTimeout),this.progressTimeout=void 0)},d.prototype.resetProgressSendTimer=function(){var C=this;this.cancelProgressTimer(),void 0!==this.eventLogSettings.sendProgressTimeoutSecs&&this.eventLogSettings.sendProgressTimeoutSecs>0&&(this.progressTimeout=setTimeout(function(){C.sendProgress({reason:"timeout",timeoutSecs:C.eventLogSettings.sendProgressTimeoutSecs})},1e3*this.eventLogSettings.sendProgressTimeoutSecs))},d.prototype.setConnectedInfo=function(C,w){this.connectedInfo.numberOfPingReplies=0,this.connectedInfo.connectedTimestamp=Date.now(),this.connectedInfo.isNewUrl=C,this.connectedInfo.transportType=w,++this.connectedInfo.connectionNumber},d.prototype.clearConnectedInfo=function(){this.connectedInfo.numberOfPingReplies=0,this.connectedInfo.connectedTimestamp=0,this.connectedInfo.isNewUrl=!0,this.connectedInfo.transportType=""},d.prototype.copyProperties=function(C,w){for(var g=0,T=Object.keys(w);g<T.length;g++){var M=T[g];w.hasOwnProperty(M)&&void 0!==w[M]&&(C[M.replace(/-/g,"_")]={value:w[M]})}},d.prototype.increasePingResponseCount=function(){++this.connectedInfo.numberOfPingReplies},d.prototype.sendTelemetry=function(C,w,g){try{if(!0===this.eventLogSettings.enabled&&!0===this.eventLogSettings[C]&&void 0!==this.eventLogger){var T=this.getServerState(),M={name:C,properties:{connectionAttempt:{value:this.connectionAttempt},epid:{value:this.endpointId},clientCorrelationID:{value:this.clientCorrelationID},steps:{value:s.toJson(g)},clientID:{value:this.clientId},eventVersion:{value:3},environment:{value:this.environment},cv:{value:_.CLIENT_VERSION},ua:{value:this.clientInfo.ua},connectionId:{value:T.connectionId},connectedClientId:{value:T.connectedClientId},domId:{value:T.domId},url:{value:T.unsecureUrl},surl:{value:T.url},ttlInSecs:{value:T.getRemainingTtlInSec()},numberOfPingReplies:{value:this.connectedInfo.numberOfPingReplies},connectedTimestamp:{value:this.connectedInfo.connectedTimestamp},isNewUrl:{value:this.connectedInfo.isNewUrl},transportType:{value:this.connectedInfo.transportType},connectionNumber:{value:this.connectedInfo.connectionNumber}}};this.copyProperties(M.properties,w),this.eventLogger.logEvent(M)}}catch(R){this.logger.warn("error in sending event "+C+": "+s.toJson(R))}},d.prototype.createStep=function(C,w,g){return new f(C,w,this.beginTimestamp.duration,Date.now(),g)},d.prototype.addStep=function(C,w,g){if(!1!==this.eventLogSettings.enabled&&(0===this.steps.length&&this.beginTimestamp.reset(),this.steps.push(this.createStep(C,w,g)),++this.totalStepCount,void 0!==this.eventLogSettings.numberOfStepsToMaintain&&this.steps.length>this.eventLogSettings.numberOfStepsToMaintain)){var T=this.steps.slice(0);this.steps.length=0,this.sendTelemetry(E.Progress,{reason:"flush"},T)}},d.prototype.trackStart=function(C){this.addStep(C,"start")},d.prototype.trackEnd=function(C){this.addStep(C,"end")},d.prototype.trackError=function(C,w,g,T){void 0===g&&(g=!0),"health"===C&&!0!==this.eventLogSettings.logHealthCheckError||"ping"===C&&!1===this.eventLogSettings.logSendPingError||(void 0===T&&(T="error"),!0===g&&this.addStep(C,T,w),this.sendTelemetry(E.Error,{},[this.createStep(C,T,w)]))},d.prototype.trackProgress=function(C,w){this.addStep(C,w)},d.prototype.trackConnected=function(C,w){this.setConnectedInfo(C,w);var g=this.steps.slice(0),T=this.totalStepCount,M=this.beginTimestamp.duration;this.steps.length=0,this.totalStepCount=0,this.sendTelemetry(E.Connected,{stepCount:g.length,totalStepCount:T,connectionEstablishmentMs_Total:M},g),this.cancelProgressTimer()},d.prototype.trackDisconnected=function(C){C.sessionLengthMS=Date.now()-this.connectedInfo.connectedTimestamp,this.sendTelemetry(E.Disconnected,C,[]),this.resetProgressSendTimer()},d.prototype.trackNewConnection=function(){++this.connectionAttempt},d.prototype.trackRequest=function(C,w){var g={};void 0!==w&&(g.hasError=!0,g.error=w);try{if(C){g.requestID=C.id,g.httpMethod=C.method,g.url=C.url,g.bodyLength=C.body.length,g.shortUrl=C.shortUrl,g.requestTimeStamp=C.startTS,g.correlationVector=C.correlationVector;for(var T=C.headers,M=0,R=Object.keys(T);M<R.length;M++){var S=R[M];T.hasOwnProperty(S)&&(g[S]=T[S])}}}catch(N){g.hasError=!0,g.error=g.error+" error creating request context "+s.toJson(N)}this.sendTelemetry(E.Request,g,[])},d.prototype.trackResponse=function(C,w,g,T){var M={};void 0!==T&&(M.hasError=!0,M.error=T);try{if(M.responseTimestamp=void 0!==g?g.sentTS:Date.now(),C){M.requestID=C.id,M.httpMethod=C.method,M.shortUrl=C.shortUrl,M.correlationVector=C.correlationVector;for(var R=C.headers,S=0,N=Object.keys(R);S<N.length;S++){var P=N[S];R.hasOwnProperty(P)&&(M[P]=R[P])}}g&&(M.latencyMS=w,M.responseCode=g.status,M.responseLength=g.body.length)}catch(y){M.hasError=!0,M.error=M.error+" error creating response context "+s.toJson(y)}this.sendTelemetry(E.Response,M,[])},d.prototype.sendResponseError=function(C,w,g){this.trackResponse(w,void 0,g,C)},d.prototype.close=function(){this.sendProgress({reason:"closed"}),this.steps.length=0,this.cancelProgressTimer()},d.prototype.mergeSettings=function(C){if(C){this.eventLogSettings.numberOfStepsToMaintain=Math.min(40,Math.max(10,void 0!==C.numberOfStepsToMaintain?C.numberOfStepsToMaintain:0));var w=Math.min(3600,Math.max(55,void 0!==C.sendProgressTimeoutSecs?C.sendProgressTimeoutSecs:0));this.eventLogSettings.logHealthCheckError=C.logHealthCheckError,this.eventLogSettings.logSendPingError=C.logSendPingError;for(var g=0,T=Object.keys(E).map(function(R){return E[R]});g<T.length;g++){var M=T[g];C.hasOwnProperty(M)&&void 0!==C[M]&&(this.eventLogSettings[M]=C[M])}this.eventLogSettings.sendProgressTimeoutSecs!==w&&(this.eventLogSettings.sendProgressTimeoutSecs=w,this.resetProgressSendTimer())}},d}();m.ConnectionTracker=c},function(K,m,u){Object.defineProperty(m,"__esModule",{value:!0});var s=function(){function _(h,p){this.logger=h,this.maxBackoffInMs=p,this.backoffId=0,this.backoffCount=0}return _.calculateNextBackoffMs=function(h,p){var E=1+.4*(Math.random()-.5),f=1e3*Math.pow(2,h)*E;return f=Math.round(f),Math.min(p,f)},_.prototype.setMaxBackoffMs=function(h){this.maxBackoffInMs=h},_.prototype.backoff=function(h,p){var E=this;void 0!==this.timerHandle&&(this.logger.debug("Clearing current back off"),clearTimeout(this.timerHandle),this.timerHandle=void 0);var f=_.calculateNextBackoffMs(this.backoffCount,this.maxBackoffInMs);this.backoffId++,this.backoffCount++,this.logger.info("Backing off "+h+" for "+f+" milliseconds with ID "+this.backoffId),this.timerHandle=setTimeout(function(){E.logger.info("Back off for "+h+" with ID "+E.backoffId+" complete, invoking handler"),E.timerHandle=void 0,p()},f)},_.prototype.reset=function(){void 0!==this.timerHandle&&(this.logger.debug("Resetting back off"),clearTimeout(this.timerHandle),this.timerHandle=void 0),this.backoffCount=0},_}();m.ExponentialBackoff=s},function(K,m,u){var s=this&&this.__assign||Object.assign||function(P){for(var y,A=1,F=arguments.length;A<F;A++)for(var q in y=arguments[A])Object.prototype.hasOwnProperty.call(y,q)&&(P[q]=y[q]);return P};Object.defineProperty(m,"__esModule",{value:!0});var _=u(20),h=u(11),p=u(3),E=u(14),f=u(1),v=u(15),I=u(2),b=u(5),c=u(0),d=u(17),C=u(10),w=function(){this.cv=f.CLIENT_VERSION,this.ua="",this.hr="",this.v=""},g=function(){this["force new connection"]=!0,this.reconnect=!1,this.query="",this.ackTimeoutMs=5e3},T="MS-CV",M=function(){function P(y){this.cvCounter=0;var A=JSON.parse(y);this.startTS=A.hasOwnProperty("startTS")?A.startTS:0,this.url=A.hasOwnProperty("url")?A.url:"",this.shortUrl=A.hasOwnProperty("shortUrl")?A.shortUrl:"",this.body=A.hasOwnProperty("body")?A.body:"",this.headers=A.hasOwnProperty("headers")?A.headers:{},this.id=A.hasOwnProperty("id")&&"number"==typeof A.id?A.id:-1,this.method=A.hasOwnProperty("method")?A.method:"",this.replied=!1,this.timedout=!1,this.timeoutTimerId=0,this.receivedCv=this.headers[T],this.updateCvHeader()}return Object.defineProperty(P.prototype,"correlationVector",{get:function(){return this.receivedCv?this.receivedCv+"."+this.cvCounter:""},enumerable:!0,configurable:!0}),P.prototype.on=function(y,A){"data"===y?this.dataCallback=A:"end"===y&&("function"==typeof this.dataCallback&&this.dataCallback(this.body),A())},P.prototype.incrementCorrelationVector=function(){++this.cvCounter,this.updateCvHeader()},P.prototype.updateCvHeader=function(){var y=this.correlationVector;y&&(this.headers[T]=y)},P}(),R=function(){function P(y,A,F){this.request=y,this.responseData=A,this.sendResponse=F}return P.prototype.writeHead=function(y,A){this.responseData.status=y,this.responseData.headers=A},P.prototype.write=function(y){this.responseData.body+=y},P.prototype.end=function(y){return y&&(this.responseData.body+=y),this.sendResponse(this.request,this.responseData)},P}(),S=function(y){this.name=y,this.args={},this.timeoutTimerId=0},N=function(){function P(y,A,F,q,j){var ue=this;this.options=A,this.manager=F,this.tokenProvider=q,this.connectionId="",this.inIncallMode=!1,this.connectionAttempt=0,this.connectedClientId="",this.c2cUrlBase="",this.pendingTimers={},this.lastDisconnectReason="",this.UNKNOWN_TRANSPORT="unknown_transport",this.logger=new c.Logger("Connection",y),this.timeoutOptions=this.options.timeoutOptions,this.healthBackoff=new v.ExponentialBackoff(this.logger,this.timeoutOptions.maxBackoffMs),this.tokenBackoff=new v.ExponentialBackoff(this.logger,this.timeoutOptions.maxBackoffMs),this.clientID=Date.now(),"undefined"!=typeof window&&window.location&&(this.domId=window.location.hostname),this.clientInfo=new w,this.clientInfo.cv=f.CLIENT_VERSION,this.clientInfo.ua="",this.options&&this.options.clientInfo&&(this.clientInfo.ua=this.safeString(this.options.clientInfo.ua),this.clientInfo.v=this.safeString(this.options.clientInfo.v)),this.connectionTracker=new E.ConnectionTracker(y,this.clientID,this.clientInfo,function(){return ue.getServerState()},this.options.endpointId,this.options.clientCorrelationID,this.options.environment),this.applyConnectionTrackerOptions(A),this.fsm=new d.TrouterFsm(y,this,this.options.incallModeTimeoutMs>0),A.registration&&(this.registrarClient=_.createRegistrarClient(y,this.tokenProvider,{registrarUrl:A.registration.registrarUrl,registrationId:A.registration.registrationId,requestTimeoutMs:A.timeoutOptions.fetchTimeoutMs,initialRetryDelayMs:1e3,maxRetryDelayMs:A.timeoutOptions.maxBackoffMs})),this.userActivityState=j}return P.prototype.start=function(y){this.logger.info("Starting"),this.externalConnectParams=y,this.fsm.start()},P.prototype.stop=function(y){this.logger.info("Stopping"),this.connectionTracker.close(),this.fsm.stop(y)},P.prototype.configure=function(y){var A=this.options.trouterUrl!==y.trouterUrl;this.options=y,this.applyConnectionTrackerOptions(y),A&&this.onTrouterReconnect()},P.prototype.checkConnection=function(y){this.logger.info("checkConnection called with "+y),this.fsm.checkConnection(y),y&&this.connectionTracker.sendTelemetry(E.ClientEventName.CheckConnection,{disconnectDetected:y},[])},P.prototype.getServerState=function(){return new b.ServerState(this.connectionId,this.connectedClientId,this.domId?this.domId:"",this.allocateResult?this.allocateResult.url:"",this.allocateResult?this.allocateResult.surl:"",this.c2cUrlBase,this.connectionExpireTimestampInSecs)},P.prototype.getToken=function(y,A){var F=this;this.logger.info("Getting token "+(A?"with backoff":"without backoff"));var q=function(){F.connectionTracker.trackStart("token"),F.tokenProvider(!y).then(function(j){F.logger.debug("token is received"),F.connectionTracker.trackEnd("token"),F.fsm.onTokenReceived(j)}).catch(function(j){var ue=p.toJson(j.stack);F.logger.error("Getting token failed, will retry after timeout. Error: "+ue),F.connectionTracker.trackError("token",ue),F.getToken(y,!0)})};A?this.tokenBackoff.backoff("getting token",q):(this.tokenBackoff.reset(),q())},P.prototype.startConnectionTimer=function(){var y=this;this.stopConnectionTimer(),this.logger.debug("Starting connection timeout for "+this.timeoutOptions.connectionTimeoutMs+" ms"),this.connectionTimeoutId=setTimeout(function(){y.logger.info("Connection timeout is fired"),y.fsm.onConnectingTimeout()},this.timeoutOptions.connectionTimeoutMs)},P.prototype.stopConnectionTimer=function(){this.connectionTimeoutId&&(this.logger.debug("Stopping connection timeout"),clearTimeout(this.connectionTimeoutId),this.connectionTimeoutId=void 0)},P.prototype.startPingTimer=function(){var y=this;"websocket"===this.transportTypeName?(this.logger.debug("Starting ping timeout for "+this.timeoutOptions.pingTimeoutMs+" ms"),this.pingTimerId=setInterval(function(){y.logger.info("Ping interval fired"),y.fsm.onPingInterval()},this.timeoutOptions.pingTimeoutMs)):this.logger.debug("Not starting ping for transport "+this.transportTypeName)},P.prototype.stopPingTimer=function(){this.pingTimerId&&(this.logger.debug("Stopping ping timeout"),this.clearPingResponseTimer(),clearInterval(this.pingTimerId),this.pingTimerId=void 0)},P.prototype.shouldSkipRegistration=function(){return void 0===this.options.registration},P.prototype.hasCustomRegisterTtl=function(){return this.options.registration&&this.options.registration.registrarTtlSec},P.prototype.startRegisterTimer=function(){var y=this;void 0!==this.registrationTimerId&&this.stopRegisterTimer();var A=this.getRegistrationTtl()-30;this.logger.debug("Starting registration timeout for "+A+" sec"),this.registrationTimerId=setTimeout(function(){y.logger.info("Registration timeout is fired"),y.registrationTimerId=setTimeout(function(){y.registrationTimerId=void 0,y.logger.debug("Re-registration did not happen in time"),y.dispatchUnregistered()},3e4),y.fsm.onRegistrationTimeout()},1e3*A)},P.prototype.stopRegisterTimer=function(){this.registrationTimerId&&(this.logger.debug("Stopping registration timeout"),clearTimeout(this.registrationTimerId),this.registrationTimerId=void 0)},P.prototype.resendRegistration=function(){if(!this.registrarClient)throw new Error("Trouter Client not configured to handle registrations");return this.registrarClient.resendRegistration()},P.prototype.buildSocketIoUrlParams=function(){if(!this.allocateResult)throw new Error("Allocate result is undefined in buildSocketIoUrlParams()");var y={};if(this.allocateResult.connectparams)for(var A=this.allocateResult.connectparams,F=0,q=Object.keys(A);F<q.length;F++){var j=q[F];A.hasOwnProperty(j)&&void 0!==A[j]&&(y[j]=A[j])}return y.v="v4",y.tc=encodeURI(p.toJson(this.clientInfo)),y.timeout=this.timeoutOptions.pingTimeoutMs/1e3,y.auth="true",this.options.endpointId&&(y.epid=this.options.endpointId),this.userActivityState.state!==I.UserActivityState.Unknown&&(y.userActivity=encodeURI(p.toJson(this.userActivityState.toEventObject()))),this.appendConnectedClientIds(this.buildQuery(y),!0)},P.prototype.startSocketIo=function(){var y=this;if(this.logger.info("Starting socket io"),this.connectionTracker.trackStart("connectSocket"),!this.allocateResult)throw new Error("Allocate result is undefined in startSocketIo()");var A=this.options.ioOptions||new g;if(A["force new connection"]=!0,A.reconnect=!1,A.query=this.buildSocketIoUrlParams(),this.logger.info("connecting to "+this.allocateResult.socketio+"?"+A.query),this.stopSocketIo(),this.socket=(this.options.io||C).connect(this.allocateResult.socketio,A),void 0===this.socket)throw new Error("Can't create Socket.io object");this.socket.on("connecting",function(F){y.onSocketConnecting(F)}),this.socket.on("connect",function(){y.onSocketConnect()}),this.socket.on("connect_failed",function(F){y.onSocketConnectFailed(F)}),this.socket.on("disconnect",function(F){y.onSocketDisconnect(F)}),this.socket.on("reconnect",function(){y.onSocketReconnect()}),this.socket.on("reconnect_failed",function(F){y.onSocketReconnectFailed(F)}),this.socket.on("reconnecting",function(){y.onSocketReconnecting()}),this.socket.on("error",function(F){y.onSocketError(F)}),this.socket.on("message",function(F){y.onSocketMessage(F)}),this.socket.on("trouter.connected",function(F){y.onTrouterConnected(F)}),this.socket.on("trouter.reconnect",function(){y.onTrouterReconnect()}),this.socket.on("trouter.message_loss",function(F){y.onTrouterMessageLoss(F)})},P.prototype.stopSocketIo=function(){if(this.socket){this.logger.info("clearing socket.io");try{for(var y=0,A=["connecting","connect","connect_failed","disconnect","reconnect","reconnect_failed","reconnecting","error","message","trouter.connected","trouter.reconnect","trouter.message_loss"];y<A.length;y++)this.socket.removeAllListeners(A[y]);this.socket.disconnect(),this.logger.debug("cleared socket"),this.socket=void 0}catch(q){this.logger.error("exception in disconnecting previous socket. Error: "+p.toJson(q.stack))}}},P.prototype.dispatchConnected=function(){this.logger.info("dispatching connected"),this.manager.onConnected(this)},P.prototype.dispatchRegistered=function(){this.logger.info("dispatching registered"),this.manager.onRegistered(this)},P.prototype.dispatchUnregistered=function(){this.logger.info("dispatching unregistered"),this.manager.onUnregistered(this)},P.prototype.dispatchDownstreamRequest=function(y){var A=this;this.logger.info("dispatching downstream request");try{var F=new R(y,new E.ResponseData(y.id),function(q,j){return A.logger.info("sending response to downstream"),A.sendResponse(q,j)});this.manager.onDownstreamRequest(this,y,F)}catch(q){this.logger.error("exception in socket.on message. Error : "+p.toJson(q.stack))}},P.prototype.dispatchReconnecting=function(){this.logger.info("dispatching reconnecting"),this.manager.onReconnecting(this)},P.prototype.dispatchReconnectIsRequired=function(){this.logger.info("dispatching reconnect is required by server"),this.manager.onReconnectIsRequired(this)},P.prototype.dispatchDisconnected=function(){this.logger.info("dispatching disconnected"),this.manager.onDisconnected(this)},P.prototype.dispatchTrouterMessageLost=function(y){this.logger.info("dispatching trouter lost message"),this.manager.onTrouterMessageLost(y)},P.prototype.sendProcessedDroppedIndicators=function(y){var A=this;try{this.logger.info("emitting processed flow tags to the server");var F=new S("trouter.processed_message_loss");F.args={droppedIndicators:y},this.sendDownstreamEvent(F,function(){A.logger.info("emitted processed flow tags to the server")})}catch(j){var q=p.toJson(j.stack);this.logger.error("unable to send processed message loss event. Error: "+q),this.connectionTracker.trackError("trouter.processed_message_loss",q,!1)}},P.prototype.resetAllocationConnectionParams=function(){this.allocateResult&&(this.logger.info("Resetting allocation connection parameters"),this.allocateResult.connectparams=void 0)},P.prototype.sendAllocateRequest=function(y){var A=this;this.connectionAttempt++,this.connectionTracker.trackNewConnection();var F=this.options.trouterUrl,q=F,j=this.allocateResult&&this.allocateResult.connectparams;if(!j){var ue=this.externalConnectParams;ue&&ue.se&&parseInt(ue.se,10)<=Date.now()+36e5&&(this.logger.warn("Dropping expired cached connection parameters: "+new Date(parseInt(ue.se,10))),this.externalConnectParams=ue=void 0),ue&&ue.serviceUrl!==q&&(this.logger.warn("Dropping cached connection parameters for a different environment ("+ue.serviceUrl+", now "+q+")"),this.externalConnectParams=ue=void 0),ue&&ue.reconnectUrl?(q=ue.reconnectUrl,j=s({},ue,{reconnectUrl:void 0})):j=ue}q=this.appendCorrelationIds(q,!1),q=this.appendEndpointId(q,!1),j&&(q+="&"+this.buildQuery(j),j.v||(q+="&v=v4"));var ee=new Request(q,{method:"POST",mode:"cors",headers:new Headers({"X-Skypetoken":y,"Content-Type":"text/plain"})});this.logger.info("sendAllocateRequest: POST "+q),this.connectionTracker.trackStart("allocation");var $=-1;this.fetchWithTimeout(ee,this.timeoutOptions.fetchTimeoutMs).then(function(ie){if($=ie.status,!ie.ok)throw new Error(ie.statusText);var ce=ie.headers.get("content-type");if(!ce||"application/json"!==ce&&"application/json;"!==ce.substring(0,17))throw new Error("Content-type '"+ce+"' is unexpected");return A.connectionTracker.trackEnd("allocation"),ie.json()}).then(function(ie){A.onAllocationResponse(ie,F)}).catch(function(ie){var ce=ie+", status code "+$;A.logger.error("Allocation request failed. Error: "+ce),A.connectionTracker.trackError("allocation",ce),A.externalConnectParams&&A.connectionAttempt>2&&($>=400&&$<=599?(A.logger.warn(A.connectionAttempt+" connection attempts, server-side failure: erasing external connection parameters"),A.externalConnectParams=void 0):A.externalConnectParams.reconnectUrl&&(A.logger.warn(A.connectionAttempt+" connection attempts, erasing reconnect URL"),delete A.externalConnectParams.reconnectUrl)),A.fsm.onAllocationFailed(401===$)})},P.prototype.sendPingRequest=function(){var y=this;if(this.socket&&void 0===this.pingResponseTimerId)try{this.logger.info("emitting ping event"),this.socket.emit("ping",function(){y.onPingResponse()}),this.pingResponseTimerId=setTimeout(function(){y.logger.error("Ping response timeout is fired"),y.clearPingResponseTimer(),y.fsm.onPingResponseTimeout()},this.timeoutOptions.pongTimeoutMs)}catch(F){var A=p.toJson(F.stack);this.logger.error("unable to send ping. Error: "+A),this.connectionTracker.trackError("ping",A,!1)}},P.prototype.setUserActivityState=function(y){var A=y.state!==this.userActivityState.state;this.userActivityState=y,this.fsm.onSetUserActivityState(y,A)},P.prototype.sendUserActivityState=function(y,A){this.userActivityState.state!==I.UserActivityState.Unknown&&("websocket"===this.transportTypeName&&A?this.sendUserActivityStateMultiple(y===b.UserActivityEventReason.Connected?2:1):"xhr-polling"===this.transportTypeName&&y===b.UserActivityEventReason.Modified&&this.fsm.forceReconnect())},P.prototype.sendRegisterRequest=function(){var y=this;if(!this.options.registration||!this.registrarClient)throw new Error("Internal error - options.registration is undefined");if(!this.allocateResult)throw new Error("Allocate result is undefined in sendRegisterRequest()");this.logger.info("sending register request");var A=new p.Timespan;this.connectionTracker.trackStart("registration"),this.registrarClient.register({appId:this.options.registration.pnhAppId,aesKey:"",languageId:"en-US",platform:this.options.registration.platform,templateKey:this.options.registration.pnhTemplateKey,platformUIVersion:this.options.registration.platformUIVersion,productContext:this.options.registration.productContext},{TROUTER:[{context:this.options.registration.context,path:this.allocateResult.surl,ttl:this.getRegistrationTtl()}]}).then(function(){y.logger.info("Register request successful"),y.connectionTracker.trackEnd("registration"),y.fsm.onRegistrationSucceed(),y.connectionTracker.sendTelemetry(E.ClientEventName.Registration,{duration:A.duration},[])}).catch(function(F){y.logger.error("Register request failed. Error: "+F),y.connectionTracker.trackError("registration",F.message),y.fsm.onRegistrationFailed(!1),y.connectionTracker.sendTelemetry(E.ClientEventName.Registration,{duration:A.duration},[])})},P.prototype.sendUnregisterRequest=function(){var y=this;this.logger.info("sending unregister request");var A=new p.Timespan;if(!this.options.registration||!this.registrarClient)throw new Error("Internal error - options.registration is undefined");this.connectionTracker.trackStart("unregistration"),this.registrarClient.unregister().then(function(){y.logger.info("Unregister request successful"),y.connectionTracker.trackEnd("unregistration"),y.fsm.onUnregistrationSucceed(),y.connectionTracker.sendTelemetry(E.ClientEventName.Unregistration,{duration:A.duration},[])}).catch(function(F){y.logger.error("Unregister request failed. Error: "+F),y.connectionTracker.trackError("unregistration",F.message),y.fsm.onUnregistrationFailed(!1),y.connectionTracker.sendTelemetry(E.ClientEventName.Unregistration,{duration:A.duration},[])})},P.prototype.fetchWithTimeout=function(y,A){return new h.Promise(function(F,q){fetch(y).then(F).catch(q),0!==A&&setTimeout(q,A,new Error("Fetch for '"+y.url+"' timed out"))})},P.prototype.resetTokenBackoff=function(){this.tokenBackoff.reset()},P.prototype.resetRegisterBackoff=function(){this.registrarClient&&this.registrarClient.cancelPendingRequests()},P.prototype.clearTimers=function(){this.logger.debug("Clearing all pending downstream events related timers");for(var y=0,A=Object.keys(this.pendingTimers);y<A.length;y++)this.clearTimer(Number(A[y]))},P.prototype.restartIncallModeTimer=function(){var y=this;this.clearIncallModeTimerId(),this.logger.debug("Restarting incall mode timer"),this.incallModeTimerId=setTimeout(function(){y.logger.info("Call mode timer fired"),y.fsm.onIncallModeTimer()},this.options.incallModeTimeoutMs)},P.prototype.enterIncallMode=function(){this.logger.info("Entering incall mode"),this.timeoutOptions=this.options.incallTimeoutOptions,this.healthBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.tokenBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.inIncallMode=!0},P.prototype.exitIncallMode=function(){this.logger.info("Exiting incall mode"),this.clearIncallModeTimerId(),this.timeoutOptions=this.options.timeoutOptions,this.healthBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.tokenBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.inIncallMode=!1},P.prototype.isIncallMode=function(){return this.inIncallMode},P.prototype.onSocketConnecting=function(y){this.logger.info("onSocketConnecting("+y+")"),this.transportTypeName=y,this.connectionTracker.trackProgress("connecting",this.transportTypeName),this.fsm.onConnecting()},P.prototype.onSocketConnect=function(){this.logger.info("onSocketConnect")},P.prototype.onSocketConnectFailed=function(y){this.logger.error("onSocketConnectFailed"),this.connectionTracker.trackError("connect_failed",y,!0,this.transportTypeName?this.transportTypeName:this.UNKNOWN_TRANSPORT),this.fsm.onConnectingFailed()},P.prototype.onSocketDisconnect=function(y){this.logger.error("onSocketDisconnect, reason: "+y);var A={reason:y,serverClosed:!this.fsm.isActive()};this.connectionTracker.trackDisconnected(A),this.connectionTracker.clearConnectedInfo();var F=A.sessionLengthMS||0;"dup"===y&&"dup"===this.lastDisconnectReason&&F<this.options.duplicateDisconnectThresholdMs&&(this.logger.warn("Socket was closed by server as Duplicate for the second time in a row after "+F+" ms which is below the threshold of "+this.options.duplicateDisconnectThresholdMs+" ms. Resetting cached connection parameters and making a new allocation."),this.resetAllocationConnectionParams()),this.lastDisconnectReason=y,this.fsm.onSocketError(void 0),this.connectionExpireTimestampInSecs=void 0},P.prototype.onSocketReconnect=function(){this.logger.error("onSocketReconnect"),this.fsm.onTrouterConnected()},P.prototype.onSocketReconnectFailed=function(y){this.logger.error("onSocketReconnectFailed with '"+y+"'"),this.fsm.onSocketError("string"==typeof y?y:void 0)},P.prototype.onSocketReconnecting=function(){this.logger.error("onSocketReconnecting")},P.prototype.onSocketError=function(y){this.logger.error("onSocketError with '"+p.toJson(y)+"'"),this.connectionTracker.trackError("connectSocket",y),this.fsm.onSocketError("string"==typeof y?y:void 0)},P.prototype.onSocketMessage=function(y){var F,A=this;this.logger.info("onSocketMessage");try{var q=(F=new M(y)).headers&&F.headers["X-Microsoft-Skype-Chain-ID"];this.logger.info("Received request N "+F.id+(q?" Chain-Id "+q:"")+" CV "+F.correlationVector+" to '"+F.url+"'"),F.startTS=Date.now(),F.url&&this.urlPath&&0===F.url.indexOf(this.urlPath)&&(F.shortUrl=F.url.substring(this.urlPath.length))}catch(ee){var ue=p.toJson(ee.stack);return this.logger.error("unable to parse request. Error: "+ue),this.connectionTracker.trackRequest(void 0,ue),void this.connectionTracker.sendResponseError("unable to parse request, error: "+ee)}F.timeoutTimerId=setTimeout(function(){if(!F.replied){A.logger.error("Request "+F.id+" timed out");var ee=new E.ResponseData(F.id);ee.status=504,ee.headers={"Trouter-Responder":"ClientLib"},A.sendResponse(F,ee),F.timedout=!0}},this.timeoutOptions.requestTimeoutMs);try{this.connectionTracker.trackRequest(F),this.fsm.onDownstreamRequest(F)}catch(ee){this.logger.error("exception in socket.on message. Error: "+p.toJson(ee.stack)),this.connectionTracker.sendResponseError(ee.message,F,void 0)}},P.prototype.onTrouterConnected=function(y){if(this.allocateResult){this.logger.info("onTrouterConnected: "+this.allocateResult.url),this.socket&&this.socket.socket&&this.socket.socket.options&&this.socket.socket.options.query&&(this.socket.socket.options.query+="&connected=true"),this.urlPath=this.allocateResult.url.replace(/https?:\/\/([A-z0-9\:\$\-\_\.\+\!\*\"\(\)\,]*)\//,"/");var A=this.connectedUrl!==this.allocateResult.url;this.connectedUrl=this.allocateResult.url,this.connectionExpireTimestampInSecs=p.calculateExpireTsInSec(y.ttl),this.connectionTracker.trackEnd("connectSocket"),this.connectionTracker.trackConnected(A,this.transportTypeName?this.transportTypeName:this.UNKNOWN_TRANSPORT),this.fsm.onTrouterConnected()}else this.logger.error("Invalid internal state - received onTrouterConnected while allocateResult is not set")},P.prototype.onTrouterReconnect=function(){this.logger.info("onTrouterReconnect"),this.fsm.onReconnectRequired()},P.prototype.onTrouterMessageLoss=function(y){this.logger.info("onTrouterMessageLoss"),this.fsm.onTrouterMessageLost(y.droppedIndicators)},P.prototype.onAllocationResponse=function(y,A){if(this.logger.info("Received allocation response "+JSON.stringify(y)),this.allocateResult=y,this.externalConnectParams=void 0,this.connectionExpireTimestampInSecs=p.calculateExpireTsInSec(+y.ttl),this.connectionId=this.allocateResult.id||"",this.connectedClientId=this.allocateResult.ccid,this.logger.info("connected client id set {connectedClientId:"+this.connectedClientId+"}"),this.c2cUrlBase=y.curlb||"",""===this.c2cUrlBase){var q=y.surl.indexOf("://");q>=0&&(q=y.surl.indexOf("/",q+3))>=5&&":3443"===y.surl.substr(q-5,5)&&(this.c2cUrlBase=y.surl.substr(0,q-5))}var j=s({serviceUrl:A,reconnectUrl:y.socketio+"v4/a"},y.connectparams);this.manager.onConnectionParametersUpdated(j),this.fsm.onAllocationSucceed()},P.prototype.onPingResponse=function(){this.logger.info("onPingResponse"),this.connectionTracker.increasePingResponseCount(),this.clearPingResponseTimer(),this.fsm.onPingResponse()},P.prototype.clearPingResponseTimer=function(){void 0!==this.pingResponseTimerId&&(clearTimeout(this.pingResponseTimerId),this.pingResponseTimerId=void 0)},P.prototype.buildQuery=function(y){for(var A=[],F=0,q=Object.keys(y);F<q.length;F++){var j=q[F];y.hasOwnProperty(j)&&void 0!==y[j]&&A.push(j+"="+y[j])}return A.join("&")},P.prototype.appendConnectedClientIds=function(y,A){var F="";y.indexOf("ccid=")<0&&(F="ccid="+this.connectedClientId+"&"),this.domId&&(F+="dom="+this.domId+"&"),F.length>0&&(F=F.slice(0,-1));var q=A||-1!==y.indexOf("?")?"&":"?";return this.appendCorrelationIds(y+q+F,A)},P.prototype.appendEndpointId=function(y,A){var F=A||-1!==y.indexOf("?")?"&":"?";return y.indexOf("epid")<0&&this.options.endpointId?""+y+F+"epid="+this.options.endpointId:y},P.prototype.appendCorrelationIds=function(y,A){var F=A||-1!==y.indexOf("?")?"&":"?";return y.indexOf("cor_id")<0?""+y+F+"cor_id="+this.options.clientCorrelationID+"&con_num="+this.clientID+"_"+this.connectionAttempt:y},P.prototype.getHealthUrl=function(y){return y.substring(0,y.lastIndexOf("/a"))+"/h"},P.prototype.safeString=function(y){return"string"==typeof y?y:""},P.prototype.sendResponse=function(y,A){if(y.timedout)return this.logger.error("Request "+y.id+" already timed out"),1;if(y.replied)return this.logger.error("Response for request "+y.id+" already sent"),2;clearTimeout(y.timeoutTimerId),y.timeoutTimerId=0,y.replied=!0,A.headers=A.headers||{};var F=y.correlationVector;this.logger.info("Sending response for request N "+y.id+" CV "+F+" with status "+A.status),F&&(A.headers[T]=F),y.headers&&y.headers["trouter-request"]&&!A.headers["trouter-request"]&&(A.headers["trouter-request"]=y.headers["trouter-request"]);var q=Date.now()-y.startTS;if(A.headers["trouter-client"]=p.toJson({cd:q}),this.logger.debug("response: "+p.toJson(A)),!this.socket)return this.connectionTracker.sendResponseError("no socket",y,A),4;try{return this.socket.send(p.toJson(A)),A.sentTS=Date.now(),y.incrementCorrelationVector(),this.connectionTracker.trackResponse(y,q,A),"websocket"===this.transportTypeName&&this.sendPingRequest(),0}catch(ue){var j="unable to send data on response.end. Error: "+p.toJson(ue.stack);return this.logger.error(j),this.connectionTracker.sendResponseError(j,y,A),4}},P.prototype.sendUserActivityStateMultiple=function(y){var A=this,F=new S("user.activity"),q=this.userActivityState.toEventObject();F.args=q,this.userActivityState.correlationVector.increase(),this.logger.debug("Sending user activity '"+this.userActivityState.toEventJSON()+"', remaining "+(y-1)),this.sendDownstreamEvent(F,function(){if(A.logger.info("User activity state: "+q.state+", cv: "+q.cv+" accepted"),A.manager.onUserActivityStateAccepted&&A.manager.onUserActivityStateAccepted(q.cv),A.clearTimer(F.timeoutTimerId),y>1){var j=setTimeout(function(){A.clearTimer(j),A.sendUserActivityStateMultiple(y-1)},A.options.userActivitySecondResendDelayMs);A.registerTimer(j,"user.activity/resend")}}),F.timeoutTimerId=setTimeout(function(){A.logger.error("Activity state response timeout is fired"),A.fsm.onActivityStateResponseTimeout(),A.clearTimer(F.timeoutTimerId)},this.timeoutOptions.userActivityResponseTimeoutMs),this.registerTimer(F.timeoutTimerId,"user.activity/response")},P.prototype.sendDownstreamEvent=function(y,A){this.logger.info("Sending downstream event "+y.name),this.socket&&this.socket.emit(y.name,y.args,A)},P.prototype.registerTimer=function(y,A){this.logger.debug("registering timer "+y+" -> "+A),this.pendingTimers[y]=A},P.prototype.clearTimer=function(y){this.logger.debug("clearing timer "+y+" -> "+this.pendingTimers[y]),delete this.pendingTimers[y],clearTimeout(y)},P.prototype.getRegistrationTtl=function(){var y=p.calculateTtlInSec(this.connectionExpireTimestampInSecs);return this.logger.debug("Current connectionID will expire in "+y+" seconds"),this.options.registration&&this.options.registration.registrarTtlSec&&y>0?Math.min(this.options.registration.registrarTtlSec,y):this.options.registration&&this.options.registration.registrarTtlSec?this.options.registration.registrarTtlSec:y>0?y:3600},P.prototype.clearIncallModeTimerId=function(){void 0!==this.incallModeTimerId&&(this.logger.debug("Clearing in-call mode timer"),clearTimeout(this.incallModeTimerId),this.incallModeTimerId=void 0)},P.prototype.applyConnectionTrackerOptions=function(y){try{y.eventLogger&&"function"==typeof y.eventLogger.logEvent?(this.connectionTracker.mergeSettings(y.telemetrySettings),this.connectionTracker.enable(y.eventLogger)):this.logger.warn("Trouter client event logging disabled due to invalid configuration.")}catch(A){this.logger.warn("Trouter client event logging disabled. Error: "+p.toJson(A.stack)),this.connectionTracker.disable()}},P}();m.TrouterConnection=N},function(K,m,u){Object.defineProperty(m,"__esModule",{value:!0});var s,f,p,_=u(5),h=u(0);(f=s=m.State||(m.State={}))[f.Initial=0]="Initial",f[f.RetrievingToken=1]="RetrievingToken",f[f.Allocating=2]="Allocating",f[f.Handshaking=3]="Handshaking",f[f.Connecting=4]="Connecting",f[f.Connected=5]="Connected",f[f.UnregisteringRetrievingToken=6]="UnregisteringRetrievingToken",f[f.Unregistering=7]="Unregistering",function(f){f[f.Initial=0]="Initial",f[f.RetrievingToken=1]="RetrievingToken",f[f.Registering=2]="Registering",f[f.Registered=3]="Registered",f[f.NotRegistered=4]="NotRegistered"}(p||(p={}));var E=function(){function f(v,I,b){this.worker=I,this.incallModeEnabled=b,this.state=s.Initial,this.connectionErrors=0,this.logger=new h.Logger("ConnectionFsm",v),this.connectedSubstate=p.Initial}return f.prototype.getState=function(){return this.state},f.prototype.isActive=function(){return this.state===s.Allocating||this.state===s.Connected||this.state===s.Handshaking||this.state===s.Connecting||this.state===s.RetrievingToken},f.prototype.start=function(){return this.state===s.Initial?(this.setState(s.RetrievingToken),this.worker.getToken(!0,!1),!0):(this.showIgnored("start"),!1)},f.prototype.stop=function(v){v&&(this.connectedSubstate=p.Initial),this.worker.isIncallMode()&&this.worker.exitIncallMode(),this.worker.resetTokenBackoff(),this.worker.resetRegisterBackoff(),this.worker.stopConnectionTimer(),this.worker.stopPingTimer(),this.worker.clearTimers(),this.state!==s.Connecting&&this.state!==s.Handshaking&&this.state!==s.Connected||this.worker.stopSocketIo(),this.isRegistered()&&this.state!==s.UnregisteringRetrievingToken&&this.state!==s.Unregistering?(this.setState(s.UnregisteringRetrievingToken),this.worker.stopRegisterTimer(),this.worker.getToken(!0,!1)):(this.setState(s.Initial),this.worker.dispatchDisconnected())},f.prototype.onTokenReceived=function(v){this.state===s.RetrievingToken?(this.setState(s.Allocating),this.worker.startConnectionTimer(),this.worker.sendAllocateRequest(v)):this.state===s.Connected&&this.connectedSubstate===p.RetrievingToken?(this.connectedSubstate=p.Registering,this.worker.sendRegisterRequest()):this.state===s.UnregisteringRetrievingToken?(this.setState(s.Unregistering),this.worker.sendUnregisterRequest()):this.showIgnored("onTokenReceived")},f.prototype.checkConnection=function(v){v&&this.onPingInterval()},f.prototype.onAllocationSucceed=function(){return this.state===s.Allocating?(this.setState(s.Handshaking),this.connectedSubstate===p.Registered&&this.worker.dispatchUnregistered(),this.connectedSubstate=p.Initial,this.worker.startSocketIo(),!0):(this.showIgnored("onAllocationSucceed"),!1)},f.prototype.onAllocationFailed=function(v){this.state===s.Allocating?(this.setState(s.RetrievingToken),this.worker.stopConnectionTimer(),this.worker.getToken(!v,!0)):this.showIgnored("onAllocationFailed")},f.prototype.onConnectingTimeout=function(){this.state===s.Allocating||this.state===s.Connecting||this.state===s.Handshaking?(this.setState(s.RetrievingToken),this.resetAllocationIfNecessary(void 0),this.worker.stopSocketIo(),this.worker.getToken(!0,!1)):this.showIgnored("onConnectingTimeout")},f.prototype.onConnecting=function(){this.state===s.Handshaking?this.setState(s.Connecting):this.showIgnored("onConnecting")},f.prototype.onConnectingFailed=function(){this.state===s.Connecting?this.onConnectingTimeout():this.state===s.Handshaking?(this.logger.error("Unexpected error in Socket.io - no valid transports"),this.onConnectingTimeout()):this.showIgnored("onConnectingFailed")},f.prototype.onSocketError=function(v){this.state===s.Handshaking||this.state===s.Connected?(this.worker.stopSocketIo(),this.worker.stopPingTimer(),this.worker.clearTimers(),this.worker.stopConnectionTimer(),this.state!==s.Connected&&this.worker.resetAllocationConnectionParams(),this.setState(s.RetrievingToken),this.worker.dispatchReconnecting(),this.worker.getToken(!0,!1)):this.showIgnored("onSocketError")},f.prototype.onTrouterConnected=function(){this.state===s.Connecting?(this.setState(s.Connected),this.worker.resetTokenBackoff(),this.worker.stopConnectionTimer(),this.worker.sendUserActivityState(_.UserActivityEventReason.Connected,!0),this.worker.startPingTimer(),this.worker.dispatchConnected(),this.connectionErrors=0,this.worker.shouldSkipRegistration()?(this.connectedSubstate=p.NotRegistered,this.worker.dispatchRegistered()):(this.connectedSubstate=p.RetrievingToken,this.worker.getToken(!0,!1))):this.showIgnored("onTrouterConnected")},f.prototype.onReconnectRequired=function(){this.worker.dispatchReconnectIsRequired()},f.prototype.onDownstreamRequest=function(v){this.state===s.Connected?(this.switchToIncallModeIfEnabled(),this.worker.dispatchDownstreamRequest(v)):this.showIgnored("onDownstreamRequest")},f.prototype.onTrouterMessageLost=function(v){this.state===s.Connected?this.worker.dispatchTrouterMessageLost(v):this.showIgnored("onTrouterMessageLost")},f.prototype.onPingInterval=function(){this.state===s.Connected?this.worker.sendPingRequest():this.showIgnored("onPingInterval")},f.prototype.onPingResponseTimeout=function(){this.onMissedResponse("onPingResponseTimeout")},f.prototype.onPingResponse=function(){this.state===s.Connected||this.showIgnored("onPingResponse")},f.prototype.onRegistrationFailed=function(v){this.state===s.Connected&&this.connectedSubstate===p.Registering?(this.connectedSubstate=p.RetrievingToken,this.worker.getToken(!v,!0)):this.showIgnored("onRegistrationFailed")},f.prototype.onRegistrationSucceed=function(){this.state===s.Connected?(this.connectedSubstate===p.Registering&&(this.connectedSubstate=p.Registered,this.worker.dispatchRegistered()),this.worker.hasCustomRegisterTtl()&&this.worker.startRegisterTimer()):this.showIgnored("onRegistrationSucceed")},f.prototype.onRegistrationTimeout=function(){this.state===s.Connected&&this.connectedSubstate!==p.NotRegistered?(this.connectedSubstate=p.RetrievingToken,this.worker.getToken(!0,!1)):this.showIgnored("onRegistrationTimeout")},f.prototype.onUnregistrationFailed=function(v){this.state===s.Unregistering?(this.setState(s.UnregisteringRetrievingToken),this.worker.getToken(!v,!v)):this.showIgnored("onUnregistrationFailed")},f.prototype.onUnregistrationSucceed=function(){this.state===s.Unregistering?(this.setState(s.Initial),this.worker.dispatchUnregistered(),this.worker.dispatchDisconnected()):this.showIgnored("onUnregistrationSucceed")},f.prototype.onIncallModeTimer=function(){this.worker.exitIncallMode(),this.state===s.Connected?(this.worker.stopPingTimer(),this.worker.startPingTimer()):this.showIgnored("onIncallModeTimer")},f.prototype.onSetUserActivityState=function(v,I){I?(this.logger.info("Changing user activity state to '"+v.toEventJSON()+"'"),this.worker.sendUserActivityState(_.UserActivityEventReason.Modified,this.state===s.Connected)):this.logger.debug("Not changing the same user activity state '"+v.toEventJSON()+"'")},f.prototype.onActivityStateResponseTimeout=function(){this.onMissedResponse("onActivityStateResponseTimeout")},f.prototype.forceReconnect=function(){this.setState(s.RetrievingToken),this.worker.resetTokenBackoff(),this.worker.stopConnectionTimer(),this.worker.stopPingTimer(),this.worker.clearTimers(),this.worker.stopSocketIo(),this.worker.dispatchReconnecting(),this.worker.getToken(!0,!1)},f.prototype.onMissedResponse=function(v){this.state===s.Connected?(this.setState(s.RetrievingToken),this.worker.stopPingTimer(),this.worker.clearTimers(),this.worker.stopSocketIo(),this.worker.dispatchReconnecting(),this.worker.getToken(!0,!1)):this.showIgnored(v)},f.prototype.showIgnored=function(v){this.logger.debug("Ignoring event '"+v+"' in state '"+s[this.state]+"'")},f.prototype.setState=function(v){this.logger.info("Switching from state '"+s[this.state]+"' to state '"+s[v]+"'"),this.state!==v?this.state=v:this.logger.error("Attempt to switching into the current state '"+s[v]+"'")},f.prototype.resetAllocationIfNecessary=function(v){this.connectionErrors++,this.connectionErrors>=2||void 0!==v&&/^4\d\d /.test(v)?(this.logger.error("Connection error count is "+this.connectionErrors+" - will reset allocation"),this.connectionErrors=0):this.logger.info("Connection error count is "+this.connectionErrors+" - will NOT reset allocation")},f.prototype.isRegistered=function(){return this.connectedSubstate===p.Registered||this.connectedSubstate===p.Registering},f.prototype.switchToIncallModeIfEnabled=function(){this.incallModeEnabled&&(this.worker.isIncallMode()||(this.worker.enterIncallMode(),this.worker.stopPingTimer(),this.worker.startPingTimer()),this.worker.restartIncallModeTimer())},f}();m.TrouterFsm=E},function(K,m,u){Object.defineProperty(m,"__esModule",{value:!0});var s=u(2),_=u(0),h=function(){function p(E,f){this.worker=f,this.state=s.TrouterState.Unknown,this.logger=new _.Logger("ManagerFsm",E)}return p.prototype.start=function(){this.state===s.TrouterState.Unknown?(this.setState(s.TrouterState.Disconnected),this.worker.forceStopLingeringConnection(),this.worker.startFirstConnection()):this.showIgnored("start")},p.prototype.stop=function(E){this.state!==s.TrouterState.Unknown?(this.setState(s.TrouterState.Unknown),this.worker.stopFirstConnection(!0===E),this.worker.stopSecondConnection(!0===E)):this.showIgnored("stop")},p.prototype.getState=function(){return this.state},p.prototype.onConnected=function(E){this.state===s.TrouterState.Disconnected&&E?this.worker.doesSecondConnectionExist()?this.setState(s.TrouterState.Switching):(this.setState(s.TrouterState.Connected),this.worker.dispatchConnected()):this.showIgnored("onConnected("+E+")")},p.prototype.onRegistered=function(E){this.state!==s.TrouterState.Disconnected||E?this.state!==s.TrouterState.Switching||E||(this.setState(s.TrouterState.Connected),this.worker.switchConnections(),this.worker.stopSecondConnectionDelayed(),this.worker.dispatchConnected()):(this.setState(s.TrouterState.Connected),this.worker.switchConnections(),this.worker.stopSecondConnection(!0),this.worker.dispatchConnected()),this.worker.dispatchRegistrationState(!0)},p.prototype.onUnregistered=function(E){E&&this.worker.dispatchRegistrationState(!1)},p.prototype.onReconnecting=function(E){this.state===s.TrouterState.Connected&&E||this.state===s.TrouterState.Switching&&E?(this.setState(s.TrouterState.Disconnected),this.worker.dispatchReconnecting()):this.showIgnored("onReconnecting("+E+")")},p.prototype.onReconnectionRequired=function(E){this.state===s.TrouterState.Connected&&E?(this.setState(s.TrouterState.Switching),this.worker.startSecondConnection()):this.state===s.TrouterState.Disconnected&&E?this.worker.startSecondConnection():this.showIgnored("onReconnectionRequired("+E+")")},p.prototype.onDisconnected=function(E){this.state===s.TrouterState.Unknown&&E?this.worker.dispatchStopped():this.showIgnored("onDisconnected("+E+")")},p.prototype.showIgnored=function(E){this.logger.info("Ignoring event '"+E+"' in state '"+s.TrouterState[this.state]+"'")},p.prototype.setState=function(E){this.logger.info("Switching from state '"+s.TrouterState[this.state]+"' to state '"+s.TrouterState[E]+"'"),this.state!==E?this.state=E:this.logger.error("Attempt to switching into the current state '"+s.TrouterState[E]+"'")},p}();m.TrouterManagerFsm=h},function(K,m,u){function s(R,S){if(!S)return R;var N=f({},R,{enabled:S.TelemetryEnabled});return void 0!==S.ClientTelemetryEventEnabled&&(N=f({},N,S.ClientTelemetryEventEnabled)),N}function _(R,S){return{clientInfo:{ua:R.trouterSettings.productName,v:R.trouterSettings.version},ioOptions:{ackTimeoutMs:5e3},clientCorrelationID:R.trouterSettings.sessionId,environment:R.trouterSettings.environment,telemetrySettings:s(R.telemetryConfig.settings,S),eventLogger:R.telemetryConfig.eventLogger,endpointId:R.trouterSettings.registrationId,trouterUrl:S&&S.TrouterConnectionUrl||R.trouterSettings.trouterServiceUrl,registration:R.trouterSettings.registrarServiceUrl?{registrarUrl:R.trouterSettings.registrarServiceUrl,registrationId:R.trouterSettings.registrationId||"",pnhAppId:R.trouterSettings.pnhAppId||"",platform:R.trouterSettings.platform||"",pnhTemplateKey:R.trouterSettings.pnhTemplate||"",platformUIVersion:R.trouterSettings.platformUIVersion||"",productContext:R.trouterSettings.pnhProductContext||void 0,context:R.trouterSettings.pnhContext||"",registrarTtlSec:(R.trouterSettings.maxRegistrationTimeInMs||0)/1e3}:void 0,timeoutOptions:f({connectionTimeoutMs:R.trouterSettings.trouterConnectTimeoutInMs||3e4,fetchTimeoutMs:1e4,pingTimeoutMs:4e4,pongTimeoutMs:5e3,maxBackoffMs:3e4,requestTimeoutMs:5e3,userActivityResponseTimeoutMs:1e4},R.trouterSettings.timeoutOptions),incallTimeoutOptions:f({connectionTimeoutMs:1e4,fetchTimeoutMs:5e3,pingTimeoutMs:5e3,pongTimeoutMs:2e3,maxBackoffMs:1e4,requestTimeoutMs:5e3,userActivityResponseTimeoutMs:1e4},R.trouterSettings.incallTimeoutOptions),incallModeTimeoutMs:R.trouterSettings.incallModeTimeoutMs||0,lingeringConnectionDelayMs:6e4,userActivitySecondResendDelayMs:R.trouterSettings.userActivitySecondResendDelayMs||1e4,duplicateDisconnectThresholdMs:1e4,connectionCache:R.connectionCache,registrationStateCallback:R.registrationStateCallbackForAcsDoNotUse}}var f=this&&this.__assign||Object.assign||function(R){for(var S,N=1,P=arguments.length;N<P;N++)for(var y in S=arguments[N])Object.prototype.hasOwnProperty.call(S,y)&&(R[y]=S[y]);return R},v=this&&this.__awaiter||function(R,S,N,P){return new(N||(N=Promise))(function(y,A){function F(ue){try{j(P.next(ue))}catch(ee){A(ee)}}function q(ue){try{j(P.throw(ue))}catch(ee){A(ee)}}function j(ue){ue.done?y(ue.value):new N(function(ee){ee(ue.value)}).then(F,q)}j((P=P.apply(R,S||[])).next())})},I=this&&this.__generator||function(R,S){function N(ue){return function(ee){return function(ue){if(y)throw new TypeError("Generator is already executing.");for(;j;)try{if(y=1,A&&(F=2&ue[0]?A.return:ue[0]?A.throw||((F=A.return)&&F.call(A),0):A.next)&&!(F=F.call(A,ue[1])).done)return F;switch(A=0,F&&(ue=[2&ue[0],F.value]),ue[0]){case 0:case 1:F=ue;break;case 4:return j.label++,{value:ue[1],done:!1};case 5:j.label++,A=ue[1],ue=[0];continue;case 7:ue=j.ops.pop(),j.trys.pop();continue;default:if(!(F=(F=j.trys).length>0&&F[F.length-1])&&(6===ue[0]||2===ue[0])){j=0;continue}if(3===ue[0]&&(!F||ue[1]>F[0]&&ue[1]<F[3])){j.label=ue[1];break}if(6===ue[0]&&j.label<F[1]){j.label=F[1],F=ue;break}if(F&&j.label<F[2]){j.label=F[2],j.ops.push(ue);break}F[2]&&j.ops.pop(),j.trys.pop();continue}ue=S.call(R,j)}catch(ee){ue=[6,ee],A=0}finally{y=F=0}if(5&ue[0])throw ue[1];return{value:ue[0]?ue[1]:void 0,done:!0}}([ue,ee])}}var y,A,F,q,j={label:0,sent:function(){if(1&F[0])throw F[1];return F[1]},trys:[],ops:[]};return q={next:N(0),throw:N(1),return:N(2)},"function"==typeof Symbol&&(q[Symbol.iterator]=function(){return this}),q};Object.defineProperty(m,"__esModule",{value:!0});var b=u(1),c=u(2);m.TrouterState=c.TrouterState,m.UserActivityState=c.UserActivityState;var d=u(0),C=u(6),w=u(7),g=u(8),T=u(9),M=function(){function R(S){this.logProvider=S,this.stateChangedListeners=[],this.logger=new d.Logger("Trouter",S),this.trouterUrlPromise=new T.TrouterUrlPromise(S),this.messageHandlers=new C.MessageHandlerRegistry(S),this.listeners={},this.connectionInfo=null,this.logger.info("Created TrouterService version "+b.CLIENT_VERSION)}return R.prototype.start=function(S){this.logger.info("Start"),S.trouterSettings.disableInternalSkypeTokenCache||(S.skypeTokenProvider=w.addCacheAsBackupTo(S.skypeTokenProvider)),this.trouterCfg=S;var P=_(S,this.ecsCfg);void 0===this.trouterServer&&(this.trouterServer=new g.TrouterManager(this.logProvider,P,S.skypeTokenProvider,this)),this.trouterServer.start()},R.prototype.stop=function(S){this.logger.info("close connection"),this.trouterUrlPromise.rejectUrl(new Error("TrouterService is stopped")),void 0!==this.trouterServer&&this.trouterServer.stop(S)},R.prototype.setEcsConfig=function(S){return v(this,void 0,void 0,function(){var N=this;return I(this,function(P){return[2,new Promise(function(y,A){if(N.ecsCfg=S.TrouterJScriptClient,N.logger.info("Setting ECS configuration to "+JSON.stringify(N.ecsCfg)),void 0!==N.trouterServer&&void 0!==N.trouterCfg){var F=_(N.trouterCfg,N.ecsCfg);N.trouterServer.configure(F)}y()})]})})},R.prototype.checkConnection=function(S){void 0!==this.trouterServer&&this.trouterServer.checkConnection(S||!1)},R.prototype.resendRegistration=function(){return v(this,void 0,void 0,function(){return I(this,function(S){if(!this.trouterServer)throw new Error("resendRegistration called too early");return[2,this.trouterServer.resendRegistration()]})})},R.prototype.registerListener=function(S,N){return""===N||"/"!==N[0]||N.indexOf("?")>=0||N.indexOf("#")>=0?(this.logger.error("Listener path '"+N+"' is not valid"),!1):this.listeners[N]?(this.logger.error("Another listener is already registered for path '"+N+"'"),!1):(this.listeners[N]=S,this.logger.debug("Listener for path '"+N+"' registered"),this.connectionInfo&&S.onTrouterConnected(this.connectionInfo.baseEndpointUrl+N,this.connectionInfo),!0)},R.prototype.unregisterListener=function(S){for(var N=[],P=0,y=Object.keys(this.listeners);P<y.length;P++)this.listeners[A=y[P]]===S&&N.push(A);if(0===N.length)return!1;for(var F=0,q=N;F<q.length;F++){var A;delete this.listeners[A=q[F]]}return this.logger.debug("Listener for path(s) '"+N.join("', '")+"' unregistered"),!0},R.prototype.onTrouterConnected=function(S,N){this.logger.debug("Trouter is now connected");for(var P=0,y=Object.keys(this.listeners);P<y.length;P++){var A=y[P];try{this.listeners[A].onTrouterConnected(N.baseEndpointUrl+A,N)}catch(F){this.logger.error("Listener '"+A+"' threw an exception from onTrouterConnected(): "+F)}}this.connectionInfo=N,this.trouterUrlPromise.resolveUrl(S),this.notifyStateChanged(c.TrouterState.Connected,{url:S,getRemainingTtlInSec:function(){return N.connectionTtlSec}})},R.prototype.onTrouterDisconnected=function(){this.logger.debug("Trouter is now disconnected"),this.connectionInfo=null;for(var S=0,N=Object.keys(this.listeners);S<N.length;S++){var P=N[S],y=this.listeners[P];if(y.onTrouterDisconnected)try{y.onTrouterDisconnected()}catch(A){this.logger.error("Listener '"+P+"' threw an exception from onTrouterDisconnected(): "+A)}}this.notifyStateChanged(c.TrouterState.Disconnected)},R.prototype.onTrouterRequest=function(S,N){for(var P="",y=0,A=Object.keys(this.listeners);y<A.length;y++){var F=A[y];S.path.substring(0,F.length)===F&&F.length>P.length&&(P=F)}if(""===P)this.tryMessageHandlers(S,N)||(N.status=404,N.headers={"Trouter-Responder":"ClientLib"},N.send());else try{this.listeners[P].onTrouterRequest(S,N)}catch(q){this.logger.error("Listener '"+P+"' threw an exception from onTrouterRequest(): "+q),N.status=500,N.headers={"Trouter-Responder":"ClientLib"},N.send()}},R.prototype.onTrouterMessageLoss=function(S){this.logger.info("onTrouterMessageLoss called with value "+S);for(var N=!0,P=0,y=Object.keys(this.listeners);P<y.length;P++){var A=y[P],F=this.listeners[A];if(F.onTrouterMessageLoss)try{void 0===(N=F.onTrouterMessageLoss(S)&&N)&&(this.logger.error("Listener '"+A+"' did not response with boolean value onTrouterMessageLoss()"),N=!1)}catch(q){this.logger.error("Listener '"+A+"' threw an exception from onTrouterMessageLoss(): "+q),N=!1}}return N},R.prototype.onTrouterUserActivityStateAccepted=function(S){this.logger.debug("onTrouterUserActivityStateAccepted cv: "+S);for(var N=0,P=Object.keys(this.listeners);N<P.length;N++){var y=P[N],A=this.listeners[y];if(A.onTrouterUserActivityStateAccepted)try{A.onTrouterUserActivityStateAccepted(S)}catch(F){this.logger.error("Listener '"+y+"' threw an exception from onTrouterUserActivityStateAccepted(): "+F)}}},R.prototype.setUserActivityState=function(S,N){if(S!==c.UserActivityState.Active&&S!==c.UserActivityState.Inactive)throw new Error("setUserActivityState called with unsupported value "+S);if(this.logger.info("setUserActivityState called with value "+c.UserActivityState[S]),!this.trouterServer||this.state()===c.TrouterState.Unknown)throw new Error("setUserActivityState called too early");this.trouterServer.setUserActivityState(S,N)},R.prototype.state=function(){return void 0!==this.trouterServer?this.trouterServer.getState():c.TrouterState.Unknown},R.prototype.getServerState=function(){if(void 0!==this.trouterServer)return this.trouterServer.getServerState()},R.prototype.getTrouterUrlAsync=function(){return void 0!==this.trouterServer?this.trouterUrlPromise.getPromise():Promise.reject(new Error("TrouterService has not been started"))},R.prototype.onStateChanged=function(S){if(this.logger.info("onStateChanged called"),void 0===S)this.stateChangedListeners=this.stateChangedListeners.filter(function(P){return void 0===P.wrappedCallback});else{this.offStateChanged(S);var N=function(P,y){S(P,y?y.url:"")};N.wrappedCallback=S,this.stateChangedListeners.push(N)}},R.prototype.offStateChanged=function(S){this.logger.info("offStateChanged called");var N=this.stateChangedListeners.length;return this.stateChangedListeners=this.stateChangedListeners.filter(function(P){return P.wrappedCallback!==S}),N>this.stateChangedListeners.length},R.prototype.addCallback=function(S){this.logger.info("addListener called"),-1===this.stateChangedListeners.indexOf(S,0)&&void 0!==S&&this.stateChangedListeners.push(S)},R.prototype.removeCallback=function(S){this.logger.info("removeListener called");var N=this.stateChangedListeners.indexOf(S,0);return N>-1&&(this.stateChangedListeners.splice(N,1),!0)},R.prototype.registerMessageHandler=function(S){this.logger.info("registerMessageHandler is called"),this.messageHandlers.register(S)},R.prototype.clearMessageHandlers=function(){this.logger.info("clearMessageHandlers is called"),this.messageHandlers.clear()},R.prototype.notifyStateChanged=function(S,N){var P=this;this.logger.info("notifyStateChanged called, will forward to "+this.stateChangedListeners.length+" listeners"),this.stateChangedListeners.forEach(function(y){try{y(S,N)}catch(A){P.logger.error("Error in callback "+A)}})},R.prototype.tryMessageHandlers=function(S,N){if(!this.messageHandlers.active())return!1;var P,y=null;try{y=(P=JSON.parse(S.body))&&(P.evt||P.eventId)||null}catch(q){}var F=this.messageHandlers.handleMessage({eventId:y,url:(this.connectionInfo?this.connectionInfo.baseEndpointUrl:"")+S.path,body:P,rawBody:S.body,headers:S.headers});return!!F.isHandled&&(N.status=F.resultCode,F.responseHeaders&&(N.headers=F.responseHeaders),F.responseBody&&(N.body=F.responseBody),N.send(),!0)},R}();m.TrouterService=M,m.createTrouterService=function(R){return new M(R)},m.getTrouterServiceVersion=function(){return b.CLIENT_VERSION},m.replaceTrouterUrlBase=function(R,S){var N=R.indexOf("://");if(N>=0){var P=R.indexOf("/",N+3);if(P>=0)return S+R.substr(P)}return""}},function(K,m){K.exports=__WEBPACK_EXTERNAL_MODULE_20__},function(K,m){}])},module.exports=m(tsregistrar)});unwrapExports(tstrouter);var constants=createCommonjsModule(function(K,m){var _;m.__esModule=!0,m.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES=3,m.GCCHIGH_TROUTER_SERVICE_URL="https://go.trouter.gov.teams.microsoft.us/v4/a",m.GCCHIGH_REGISTRAR_SERVICE_URL="https://registrar.gov.teams.microsoft.us/V3/registrations",m.DOD_TROUTER_SERVICE_URL="https://go.trouter.dod.teams.microsoft.us/v4/a",m.DOD_REGISTRAR_SERVICE_URL="https://registrar.dod.teams.microsoft.us/V3/registrations",m.INT_TROUTER_SERVICE_URL="https://go.trouter-int.skype.net/v4/a",m.INT_REGISTRAR_SERVICE_URL="https://edge.skype.net/registrar/testenv/v3/registrations",m.PUBLIC_TROUTER_SERVICE_URL="https://go.trouter.skype.com/v4/a",m.PUBLIC_REGISTRAR_SERVICE_URL="https://edge.skype.com/registrar/prod/v3/registrations",(_=m.CloudType||(m.CloudType={})).Public="Public",_.GccHigh="GCC High",_.Dod="DoD",function(_){_.OrgId="orgid",_.Acs="acs",_.Spool="spool",_.GccHigh="gcch",_.GccHighAcs="gcch-acs",_.Dod="dod",_.DodAcs="dod-acs"}(m.CloudPrefix||(m.CloudPrefix={}))});unwrapExports(constants);var constants_1=constants.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES,constants_2=constants.GCCHIGH_TROUTER_SERVICE_URL,constants_3=constants.GCCHIGH_REGISTRAR_SERVICE_URL,constants_4=constants.DOD_TROUTER_SERVICE_URL,constants_5=constants.DOD_REGISTRAR_SERVICE_URL,constants_6=constants.INT_TROUTER_SERVICE_URL,constants_7=constants.INT_REGISTRAR_SERVICE_URL,constants_8=constants.PUBLIC_TROUTER_SERVICE_URL,constants_9=constants.PUBLIC_REGISTRAR_SERVICE_URL,constants_10=constants.CloudType,constants_11=constants.CloudPrefix,TrouterUtils=createCommonjsModule(function(K,m){var u=commonjsGlobal&&commonjsGlobal.__awaiter||function(M,R,S,N){return new(S||(S=Promise))(function(y,A){function F(ue){try{j(N.next(ue))}catch(ee){A(ee)}}function q(ue){try{j(N.throw(ue))}catch(ee){A(ee)}}function j(ue){ue.done?y(ue.value):function(y){return y instanceof S?y:new S(function(A){A(y)})}(ue.value).then(F,q)}j((N=N.apply(M,R||[])).next())})},s=commonjsGlobal&&commonjsGlobal.__generator||function(M,R){var N,P,y,A,S={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return A={next:F(0),throw:F(1),return:F(2)},"function"==typeof Symbol&&(A[Symbol.iterator]=function(){return this}),A;function F(j){return function(ue){return function(j){if(N)throw new TypeError("Generator is already executing.");for(;S;)try{if(N=1,P&&(y=2&j[0]?P.return:j[0]?P.throw||((y=P.return)&&y.call(P),0):P.next)&&!(y=y.call(P,j[1])).done)return y;switch(P=0,y&&(j=[2&j[0],y.value]),j[0]){case 0:case 1:y=j;break;case 4:return S.label++,{value:j[1],done:!1};case 5:S.label++,P=j[1],j=[0];continue;case 7:j=S.ops.pop(),S.trys.pop();continue;default:if(!(y=(y=S.trys).length>0&&y[y.length-1])&&(6===j[0]||2===j[0])){S=0;continue}if(3===j[0]&&(!y||j[1]>y[0]&&j[1]<y[3])){S.label=j[1];break}if(6===j[0]&&S.label<y[1]){S.label=y[1],y=j;break}if(y&&S.label<y[2]){S.label=y[2],S.ops.push(j);break}y[2]&&S.ops.pop(),S.trys.pop();continue}j=R.call(M,S)}catch(ue){j=[6,ue],P=0}finally{N=y=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}([j,ue])}}};m.__esModule=!0;var _=new Map([["chatMessageReceived",200],["typingIndicatorReceived",245],["readReceiptReceived",246],["chatMessageEdited",247],["chatMessageDeleted",248],["chatThreadCreated",257],["chatThreadPropertiesUpdated",258],["chatThreadDeleted",259],["participantsAdded",260],["participantsRemoved",261]]),h="8:orgid:",p="8:dod:",E="8:gcch:",f="8:teamsvisitor:";m.toMessageHandler=function(M,R){var S=_.get(M);return{handleMessage:function(N){var P=null;if((null==N?void 0:N.rawBody)&&(P=JSON.parse(N.rawBody)),null!==P&&P.eventId===S){var y=c(M,P);if(null!==y)return R(y),{isHandled:!0,resultCode:200}}}}};var c=function(M,R){if("chatMessageReceived"===M)return{threadId:(S=R).groupId,sender:d(S.senderId),senderDisplayName:S.senderDisplayName,recipient:d(S.recipientMri),id:S.messageId,createdOn:new Date(S.originalArrivalTime),version:S.version,type:S.messageType,message:S.messageBody,metadata:C(S.acsChatMessageMetadata)};if("chatMessageEdited"===M)return{threadId:(S=R).groupId,sender:d(S.senderId),senderDisplayName:S.senderDisplayName,recipient:d(S.recipientMri),id:S.messageId,createdOn:new Date(S.originalArrivalTime),version:S.version,message:S.messageBody,editedOn:new Date(S.edittime),type:S.messageType,metadata:C(S.acsChatMessageMetadata)};if("chatMessageDeleted"===M)return{threadId:(S=R).groupId,sender:d(S.senderId),senderDisplayName:S.senderDisplayName,recipient:d(S.recipientMri),id:S.messageId,createdOn:new Date(S.originalArrivalTime),version:S.version,deletedOn:new Date(S.deletetime),type:S.messageType};if("typingIndicatorReceived"===M)return{threadId:(S=R).groupId,sender:d(S.senderId),senderDisplayName:S.senderDisplayName,recipient:d(S.recipientMri),version:S.version,receivedOn:new Date(S.originalArrivalTime)};if("readReceiptReceived"===M){var S=R,y=JSON.parse(S.messageBody).consumptionhorizon.split(";");return{threadId:S.groupId,sender:d(S.senderId),senderDisplayName:"",recipient:d(S.recipientMri),chatMessageId:S.messageId,readOn:new Date(+y[1])}}if("chatThreadCreated"===M){S=R;var A=JSON.parse(unescape(S.createdBy)),F=JSON.parse(unescape(S.members)),q=JSON.parse(unescape(S.properties)),j={id:d(A.participantId),displayName:A.displayName},ue=F.map(function(we){return{id:d(we.participantId),displayName:we.displayName}});return{threadId:S.threadId,createdOn:new Date(S.createTime),createdBy:j,version:S.version,participants:ue,properties:q}}if("chatThreadPropertiesUpdated"===M){S=R;var ee=JSON.parse(unescape(S.editedBy)),$=(q=JSON.parse(unescape(S.properties)),{id:d(ee.participantId),displayName:ee.displayName});return{threadId:S.threadId,updatedOn:new Date(S.editTime),updatedBy:$,version:S.version,properties:q}}if("chatThreadDeleted"===M){S=R;var ie=JSON.parse(unescape(S.deletedBy)),ce={id:d(ie.participantId),displayName:ie.displayName};return{threadId:S.threadId,deletedOn:new Date(S.deleteTime),deletedBy:ce,version:S.version}}if("participantsAdded"===M){S=R;var Te=JSON.parse(unescape(S.addedBy)),te=JSON.parse(unescape(S.participantsAdded)),Y={id:d(Te.participantId),displayName:Te.displayName};return ue=te.map(function(_e){return{id:d(_e.participantId),displayName:_e.displayName,shareHistoryTime:new Date(_e.shareHistoryTime)}}),{threadId:S.threadId,addedOn:new Date(S.time),addedBy:Y,version:S.version,participantsAdded:ue}}if("participantsRemoved"===M){S=R;var le=JSON.parse(unescape(S.removedBy)),Z=JSON.parse(unescape(S.participantsRemoved)),z={id:d(le.participantId),displayName:le.displayName};return ue=Z.map(function(_e){return{id:d(_e.participantId),displayName:_e.displayName,shareHistoryTime:new Date(_e.shareHistoryTime)}}),{threadId:S.threadId,removedOn:new Date(S.time),removedBy:z,version:S.version,participantsRemoved:ue}}return null};m.toLogProvider=function(M){return{log:function(){for(var R=[],S=0;S<arguments.length;S++)R[S]=arguments[S];return M.info(R)},warn:function(){for(var R=[],S=0;S<arguments.length;S++)R[S]=arguments[S];return M.warning(R)},error:function(){for(var R=[],S=0;S<arguments.length;S++)R[S]=arguments[S];return M.error(R)},debug:function(){for(var R=[],S=0;S<arguments.length;S++)R[S]=arguments[S];return M.verbose(R)},info:function(){for(var R=[],S=0;S<arguments.length;S++)R[S]=arguments[S];return M.verbose(R)}}},m.toTelemetrySender=function(M){return{logEvent:function(R){return M.info(R)}}};var d=function(M){return M.startsWith(h)?{kind:"microsoftTeamsUser",rawId:M,microsoftTeamsUserId:M.substring(h.length),isAnonymous:!1,cloud:"public"}:M.startsWith(p)?{kind:"microsoftTeamsUser",rawId:M,microsoftTeamsUserId:M.substring(p.length),isAnonymous:!1,cloud:"dod"}:M.startsWith(E)?{kind:"microsoftTeamsUser",rawId:M,microsoftTeamsUserId:M.substring(E.length),isAnonymous:!1,cloud:"gcch"}:M.startsWith(f)?{kind:"microsoftTeamsUser",rawId:M,microsoftTeamsUserId:M.substring(f.length),isAnonymous:!0}:M.startsWith("4:")?{kind:"phoneNumber",rawId:M,phoneNumber:M.substring("4:".length)}:M.startsWith("8:acs:")||M.startsWith("8:spool:")?{kind:"communicationUser",communicationUserId:M}:{kind:"unknown",id:M}},C=function(M){return null==M||""===M||"null"===M?{}:JSON.parse(M)};function w(M){return coreHttp.isNode?Buffer.from(M,"base64").toString():atob(M)}function T(M){switch(M.substring(0,M.indexOf(":"))){case constants.CloudPrefix.OrgId:case constants.CloudPrefix.Acs:case constants.CloudPrefix.Spool:return constants.CloudType.Public;case constants.CloudPrefix.GccHigh:case constants.CloudPrefix.GccHighAcs:return constants.CloudType.GccHigh;case constants.CloudPrefix.Dod:case constants.CloudPrefix.DodAcs:return constants.CloudType.Dod;default:return constants.CloudType.Public}}m.base64decode=w,m.getCloudTypeFromCredential=function(M){return u(void 0,void 0,void 0,function(){var R;return s(this,function(y){switch(y.label){case 0:return[4,M.getToken()];case 1:return R=y.sent(),[2,T(function(M){var S=(null==M?void 0:M.split("."))[1];if(void 0===S)throw new Error("Invalid token");return S=S.replace(/-/g,"+").replace(/_/g,"/"),JSON.parse(decodeURIComponent(escape(w(S))))}(null==R?void 0:R.token).skypeid)]}})})}});unwrapExports(TrouterUtils);var TrouterUtils_1=TrouterUtils.toMessageHandler,TrouterUtils_2=TrouterUtils.toLogProvider,TrouterUtils_3=TrouterUtils.toTelemetrySender,TrouterUtils_4=TrouterUtils.base64decode,TrouterUtils_5=TrouterUtils.getCloudTypeFromCredential,TrouterSettings=createCommonjsModule(function(K,m){var u=commonjsGlobal&&commonjsGlobal.__awaiter||function(v,I,b,c){return new(b||(b=Promise))(function(C,w){function g(R){try{M(c.next(R))}catch(S){w(S)}}function T(R){try{M(c.throw(R))}catch(S){w(S)}}function M(R){R.done?C(R.value):function(C){return C instanceof b?C:new b(function(w){w(C)})}(R.value).then(g,T)}M((c=c.apply(v,I||[])).next())})},s=commonjsGlobal&&commonjsGlobal.__generator||function(v,I){var c,d,C,w,b={label:0,sent:function(){if(1&C[0])throw C[1];return C[1]},trys:[],ops:[]};return w={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function g(M){return function(R){return function(M){if(c)throw new TypeError("Generator is already executing.");for(;b;)try{if(c=1,d&&(C=2&M[0]?d.return:M[0]?d.throw||((C=d.return)&&C.call(d),0):d.next)&&!(C=C.call(d,M[1])).done)return C;switch(d=0,C&&(M=[2&M[0],C.value]),M[0]){case 0:case 1:C=M;break;case 4:return b.label++,{value:M[1],done:!1};case 5:b.label++,d=M[1],M=[0];continue;case 7:M=b.ops.pop(),b.trys.pop();continue;default:if(!(C=(C=b.trys).length>0&&C[C.length-1])&&(6===M[0]||2===M[0])){b=0;continue}if(3===M[0]&&(!C||M[1]>C[0]&&M[1]<C[3])){b.label=M[1];break}if(6===M[0]&&b.label<C[1]){b.label=C[1],C=M;break}if(C&&b.label<C[2]){b.label=C[2],b.ops.push(M);break}C[2]&&b.ops.pop(),b.trys.pop();continue}M=I.call(v,b)}catch(R){M=[6,R],d=0}finally{c=C=0}if(5&M[0])throw M[1];return{value:M[0]?M[1]:void 0,done:!0}}([M,R])}}};m.__esModule=!0;var _={version:"1.0.0",registrationId:"",sessionId:"",pnhAppId:"AcsWeb",pnhTemplate:"AcsWeb_Chat_1.2",platform:"SPOOL",platformUIVersion:"0.0.0",environment:"",productName:"acs-chat-web",trouterServiceUrl:constants.PUBLIC_TROUTER_SERVICE_URL,registrarServiceUrl:constants.PUBLIC_REGISTRAR_SERVICE_URL,registrarRefreshTimeoutInMs:35e4,timeoutOptions:{connectionTimeoutMs:2e4,fetchTimeoutMs:1e4,pingTimeoutMs:4e4,pongTimeoutMs:5e3,maxBackoffMs:5e4,requestTimeoutMs:5e3},maxRegistrationTimeInMs:72e5},h=function(){var v=_;return v.registrationId=coreHttp.generateUuid(),v.sessionId=coreHttp.generateUuid(),v};m.createSettings=function(v,I){return u(void 0,void 0,void 0,function(){var b,c,d;return s(this,function(C){switch(C.label){case 0:return"INT"!==(null==I?void 0:I.environment)?[3,1]:(b=function(){var v=h();return v.pnhAppId="cns-e2e-test",v.pnhTemplate="cns-e2e-test:1.2",v.registrarServiceUrl=constants.INT_REGISTRAR_SERVICE_URL,v.trouterServiceUrl=constants.INT_TROUTER_SERVICE_URL,v}(),[3,3]);case 1:return[4,TrouterUtils.getCloudTypeFromCredential(v)];case 2:c=C.sent(),b=c===constants.CloudType.GccHigh?function(){var v=h();return v.registrarServiceUrl=constants.GCCHIGH_REGISTRAR_SERVICE_URL,v.trouterServiceUrl=constants.GCCHIGH_TROUTER_SERVICE_URL,v}():c===constants.CloudType.Dod?function(){var v=h();return v.registrarServiceUrl=constants.DOD_REGISTRAR_SERVICE_URL,v.trouterServiceUrl=constants.DOD_TROUTER_SERVICE_URL,v}():h(),C.label=3;case 3:return b.maxRegistrationTimeInMs=null!==(d=null==I?void 0:I.registrationTimeInMs)&&void 0!==d?d:_.maxRegistrationTimeInMs,[2,b]}})})},m.defaultTelemetrySettings={enabled:!1}});unwrapExports(TrouterSettings);var TrouterSettings_1=TrouterSettings.createSettings,TrouterSettings_2=TrouterSettings.defaultTelemetrySettings,SignalingClient=createCommonjsModule(function(K,m){var p,u=commonjsGlobal&&commonjsGlobal.__awaiter||function(p,E,f,v){return new(f||(f=Promise))(function(b,c){function d(g){try{w(v.next(g))}catch(T){c(T)}}function C(g){try{w(v.throw(g))}catch(T){c(T)}}function w(g){g.done?b(g.value):function(b){return b instanceof f?b:new f(function(c){c(b)})}(g.value).then(d,C)}w((v=v.apply(p,E||[])).next())})},s=commonjsGlobal&&commonjsGlobal.__generator||function(p,E){var v,I,b,c,f={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return c={next:d(0),throw:d(1),return:d(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function d(w){return function(g){return function(w){if(v)throw new TypeError("Generator is already executing.");for(;f;)try{if(v=1,I&&(b=2&w[0]?I.return:w[0]?I.throw||((b=I.return)&&b.call(I),0):I.next)&&!(b=b.call(I,w[1])).done)return b;switch(I=0,b&&(w=[2&w[0],b.value]),w[0]){case 0:case 1:b=w;break;case 4:return f.label++,{value:w[1],done:!1};case 5:f.label++,I=w[1],w=[0];continue;case 7:w=f.ops.pop(),f.trys.pop();continue;default:if(!(b=(b=f.trys).length>0&&b[b.length-1])&&(6===w[0]||2===w[0])){f=0;continue}if(3===w[0]&&(!b||w[1]>b[0]&&w[1]<b[3])){f.label=w[1];break}if(6===w[0]&&f.label<b[1]){f.label=b[1],b=w;break}if(b&&f.label<b[2]){f.label=b[2],f.ops.push(w);break}b[2]&&f.ops.pop(),f.trys.pop();continue}w=E.call(p,f)}catch(g){w=[6,g],I=0}finally{v=b=0}if(5&w[0])throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}([w,g])}}};m.__esModule=!0,(p=m.ConnectionState||(m.ConnectionState={}))[p.Unknown=0]="Unknown",p[p.Connected=2]="Connected",p[p.Disconnected=3]="Disconnected",p[p.Switching=9]="Switching";var h=function(){function p(E,f,v){this.credential=E,this.logger=f,this.options=v,this.stateChangedListener=null,this.tokenFetchRetries=0,this.trouter=tstrouter.createTrouterService(TrouterUtils.toLogProvider(f))}return p.prototype.start=function(){return u(this,void 0,void 0,function(){var E,f,v=this;return s(this,function(I){switch(I.label){case 0:return void 0!==this.config?[3,2]:(E=this,f={},[4,TrouterSettings.createSettings(this.credential,this.options)]);case 1:E.config=(f.trouterSettings=I.sent(),f.skypeTokenProvider=function(b){return u(v,void 0,void 0,function(){var c,d;return s(this,function(C){switch(C.label){case 0:return b?(this.tokenFetchRetries+=1,this.tokenFetchRetries>constants.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES?[4,this.stop(!0)]:[3,2]):[3,3];case 1:throw C.sent(),new Error("Access token is expired and failed to fetch a valid one after "+constants.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES+" retries");case 2:return[3,4];case 3:this.tokenFetchRetries=0,C.label=4;case 4:return d=(c=Promise).resolve,[4,this.credential.getToken()];case 5:return[2,d.apply(c,[C.sent().token])]}})})},f.telemetryConfig={eventLogger:TrouterUtils.toTelemetrySender(this.logger),settings:TrouterSettings.defaultTelemetrySettings},f),I.label=2;case 2:return this.trouter.start(this.config),this.trouter.setUserActivityState(tstrouter.UserActivityState.Active),[2]}})})},p.prototype.stop=function(E){return u(this,void 0,void 0,function(){return s(this,function(f){return this.trouter.offStateChanged(this.stateChangedListener),this.trouter.clearMessageHandlers(),this.trouter.stop(null!=E?E:this.tokenFetchRetries>constants.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES),[2]})})},p.prototype.on=function(E,f){if("connectionChanged"===E)return this.trouter.offStateChanged(this.stateChangedListener),this.stateChangedListener=function(v,I){return f(v)},void this.trouter.onStateChanged(this.stateChangedListener);this.trouter.registerMessageHandler(TrouterUtils.toMessageHandler(E,f))},p}();m.CommunicationSignalingClient=h});unwrapExports(SignalingClient);var SignalingClient_1=SignalingClient.ConnectionState,SignalingClient_2=SignalingClient.CommunicationSignalingClient,src=createCommonjsModule(function(K,m){m.__esModule=!0,function(s){for(var _ in s)m.hasOwnProperty(_)||(m[_]=s[_])}(SignalingClient)}),index=unwrapExports(src);module.exports=index},3369:()=>{"use strict";(void 0===typeof Symbol||!Symbol.asyncIterator)&&(Symbol.asyncIterator=Symbol.for("Symbol.asyncIterator"))},434:(K,m,u)=>{"use strict";function s(_){return _&&"function"==typeof _.getToken&&(void 0===_.signRequest||_.getToken.length>0)}u.d(m,{c:()=>s})},6036:(K,m,u)=>{"use strict";function s(H){return H.toLowerCase()}function _(H){if(H&&"object"==typeof H){const k=H;if("function"==typeof k.rawHeaders&&"function"==typeof k.clone&&"function"==typeof k.get&&"function"==typeof k.set&&"function"==typeof k.contains&&"function"==typeof k.remove&&"function"==typeof k.headersArray&&"function"==typeof k.headerValues&&"function"==typeof k.headerNames&&"function"==typeof k.toJson)return!0}return!1}u.r(m),u.d(m,{AccessTokenRefresher:()=>ni,ApiKeyCredentials:()=>bi,BaseRequestPolicy:()=>nt.U,BasicAuthenticationCredentials:()=>Hn,Constants:()=>jn.g,DefaultHttpClient:()=>Re,ExpiringAccessTokenCache:()=>ao,HttpHeaders:()=>h,HttpPipelineLogLevel:()=>We.M,MapperType:()=>ne,QueryCollectionFormat:()=>ar,RequestPolicyOptions:()=>nt._,RestError:()=>qe,RetryMode:()=>eo,Serializer:()=>b,ServiceClient:()=>Zn,TopicCredentials:()=>Ei,URLBuilder:()=>re.UK,URLQuery:()=>re.$4,WebResource:()=>we,XML_ATTRKEY:()=>I.c,XML_CHARKEY:()=>I.I,applyMixins:()=>v.ef,bearerTokenAuthenticationPolicy:()=>mt.v,createPipelineFromOptions:()=>Qt,createSpanFunction:()=>xr,delay:()=>Jr.g,deserializationPolicy:()=>pr,deserializeResponseBody:()=>tt,disableResponseDecompressionPolicy:()=>Zo,encodeUri:()=>v.Hh,executePromisesSequentially:()=>v.Zf,exponentialRetryPolicy:()=>Qo,flattenResponse:()=>en,generateClientRequestIdPolicy:()=>to,generateUuid:()=>v.Rl,getDefaultProxySettings:()=>oa,getDefaultUserAgentValue:()=>Ui,isDuration:()=>v._9,isNode:()=>v.UG,isTokenCredential:()=>na.c,isValidUuid:()=>v.TP,keepAlivePolicy:()=>an,logPolicy:()=>Kt,operationOptionsToRequestOptionsBase:()=>Ue,parseXML:()=>Ae,promiseToCallback:()=>v._Q,promiseToServiceCallback:()=>v.yj,proxyPolicy:()=>Io,redirectPolicy:()=>Ct,serializeObject:()=>Z,signingPolicy:()=>Xo,stringifyXML:()=>Jn,stripRequest:()=>v.Fl,stripResponse:()=>v.eg,systemErrorRetryPolicy:()=>Xr,throttlingRetryPolicy:()=>Bi,tracingPolicy:()=>Sr,userAgentPolicy:()=>Ci});class h{constructor(k){if(this._headersMap={},k)for(const L in k)this.set(L,k[L])}set(k,L){this._headersMap[s(k)]={name:k,value:L.toString()}}get(k){const L=this._headersMap[s(k)];return L?L.value:void 0}contains(k){return!!this._headersMap[s(k)]}remove(k){const L=this.contains(k);return delete this._headersMap[s(k)],L}rawHeaders(){return this.toJson({preserveCase:!0})}headersArray(){const k=[];for(const L in this._headersMap)k.push(this._headersMap[L]);return k}headerNames(){const k=[],L=this.headersArray();for(let W=0;W<L.length;++W)k.push(L[W].name);return k}headerValues(){const k=[],L=this.headersArray();for(let W=0;W<L.length;++W)k.push(L[W].value);return k}toJson(k={}){const L={};if(k.preserveCase)for(const W in this._headersMap){const se=this._headersMap[W];L[se.name]=se.value}else for(const W in this._headersMap){const se=this._headersMap[W];L[s(se.name)]=se.value}return L}toString(){return JSON.stringify(this.toJson({preserveCase:!0}))}clone(){const k={};for(const L in this._headersMap){const W=this._headersMap[L];k[W.name]=W.value}return new h(k)}}function E(H){let k="";for(let L=0;L<H.length;L++)k+=String.fromCharCode(H[L]);return btoa(k)}function f(H){const k=atob(H),L=new Uint8Array(k.length);for(let W=0;W<k.length;W++)L[W]=k.charCodeAt(W);return L}var v=u(7694),I=u(4510);class b{constructor(k={},L){this.modelMappers=k,this.isXML=L}validateConstraints(k,L,W){const se=(ye,Oe)=>{throw new Error(`"${W}" with value "${L}" should satisfy the constraint "${ye}": ${Oe}.`)};if(k.constraints&&null!=L){const ye=L,{ExclusiveMaximum:Oe,ExclusiveMinimum:Pe,InclusiveMaximum:Be,InclusiveMinimum:je,MaxItems:Le,MaxLength:rt,MinItems:pt,MinLength:lt,MultipleOf:Pt,Pattern:_t,UniqueItems:ht}=k.constraints;null!=Oe&&ye>=Oe&&se("ExclusiveMaximum",Oe),null!=Pe&&ye<=Pe&&se("ExclusiveMinimum",Pe),null!=Be&&ye>Be&&se("InclusiveMaximum",Be),null!=je&&ye<je&&se("InclusiveMinimum",je);const ft=L;if(null!=Le&&ft.length>Le&&se("MaxItems",Le),null!=rt&&ft.length>rt&&se("MaxLength",rt),null!=pt&&ft.length<pt&&se("MinItems",pt),null!=lt&&ft.length<lt&&se("MinLength",lt),null!=Pt&&ye%Pt!=0&&se("MultipleOf",Pt),_t){const qt="string"==typeof _t?new RegExp(_t):_t;("string"!=typeof L||null===L.match(qt))&&se("Pattern",_t)}ht&&ft.some((qt,Jt,yr)=>yr.indexOf(qt)!==Jt)&&se("UniqueItems",ht)}}serialize(k,L,W,se={}){var ye,Oe,Pe;const Be={rootName:null!==(ye=se.rootName)&&void 0!==ye?ye:"",includeRoot:null!==(Oe=se.includeRoot)&&void 0!==Oe&&Oe,xmlCharKey:null!==(Pe=se.xmlCharKey)&&void 0!==Pe?Pe:I.I};let je={};const Le=k.type.name;W||(W=k.serializedName),null!==Le.match(/^Sequence$/i)&&(je=[]),k.isConstant&&(L=k.defaultValue);const{required:rt,nullable:pt}=k;if(rt&&pt&&void 0===L)throw new Error(`${W} cannot be undefined.`);if(rt&&!pt&&null==L)throw new Error(`${W} cannot be null or undefined.`);if(!rt&&!1===pt&&null===L)throw new Error(`${W} cannot be null.`);return null==L?je=L:(this.validateConstraints(k,L,W),null!==Le.match(/^any$/i)?je=L:null!==Le.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)?je=function(H,k,L){if(null!=L)if(null!==H.match(/^Number$/i)){if("number"!=typeof L)throw new Error(`${k} with value ${L} must be of type number.`)}else if(null!==H.match(/^String$/i)){if("string"!=typeof L.valueOf())throw new Error(`${k} with value "${L}" must be of type string.`)}else if(null!==H.match(/^Uuid$/i)){if("string"!=typeof L.valueOf()||!v.TP(L))throw new Error(`${k} with value "${L}" must be of type string and a valid uuid.`)}else if(null!==H.match(/^Boolean$/i)){if("boolean"!=typeof L)throw new Error(`${k} with value ${L} must be of type boolean.`)}else if(null!==H.match(/^Stream$/i)){const W=typeof L;if(!("string"===W||"function"===W||L instanceof ArrayBuffer||ArrayBuffer.isView(L)||("function"==typeof Blob||"object"==typeof Blob)&&L instanceof Blob))throw new Error(`${k} must be a string, Blob, ArrayBuffer, ArrayBufferView, or a function returning NodeJS.ReadableStream.`)}return L}(Le,W,L):null!==Le.match(/^Enum$/i)?je=function(H,k,L){if(!k)throw new Error(`Please provide a set of allowedValues to validate ${H} as an Enum Type.`);if(!k.some(se=>"string"==typeof se.valueOf()?se.toLowerCase()===L.toLowerCase():se===L))throw new Error(`${L} is not a valid value for ${H}. The valid values are: ${JSON.stringify(k)}.`);return L}(W,k.type.allowedValues,L):null!==Le.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)?je=function(H,k,L){if(null!=k)if(null!==H.match(/^Date$/i)){if(!(k instanceof Date||"string"==typeof k.valueOf()&&!isNaN(Date.parse(k))))throw new Error(`${L} must be an instanceof Date or a string in ISO8601 format.`);k=k instanceof Date?k.toISOString().substring(0,10):new Date(k).toISOString().substring(0,10)}else if(null!==H.match(/^DateTime$/i)){if(!(k instanceof Date||"string"==typeof k.valueOf()&&!isNaN(Date.parse(k))))throw new Error(`${L} must be an instanceof Date or a string in ISO8601 format.`);k=k instanceof Date?k.toISOString():new Date(k).toISOString()}else if(null!==H.match(/^DateTimeRfc1123$/i)){if(!(k instanceof Date||"string"==typeof k.valueOf()&&!isNaN(Date.parse(k))))throw new Error(`${L} must be an instanceof Date or a string in RFC-1123 format.`);k=k instanceof Date?k.toUTCString():new Date(k).toUTCString()}else if(null!==H.match(/^UnixTime$/i)){if(!(k instanceof Date||"string"==typeof k.valueOf()&&!isNaN(Date.parse(k))))throw new Error(`${L} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);k=function(H){if(H)return"string"==typeof H.valueOf()&&(H=new Date(H)),Math.floor(H.getTime()/1e3)}(k)}else if(null!==H.match(/^TimeSpan$/i)&&!v._9(k))throw new Error(`${L} must be a string in ISO 8601 format. Instead was "${k}".`);return k}(Le,L,W):null!==Le.match(/^ByteArray$/i)?je=function(H,k){let L="";if(null!=k){if(!(k instanceof Uint8Array))throw new Error(`${H} must be of type Uint8Array.`);L=E(k)}return L}(W,L):null!==Le.match(/^Base64Url$/i)?je=function(H,k){let L="";if(null!=k){if(!(k instanceof Uint8Array))throw new Error(`${H} must be of type Uint8Array.`);L=function(H){if(H){if(!(H instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");return function(H,k){let L=H.length;for(;L-1>=0&&"="===H[L-1];)--L;return H.substr(0,L)}(E(H)).replace(/\+/g,"-").replace(/\//g,"_")}}(k)||""}return L}(W,L):null!==Le.match(/^Sequence$/i)?je=function(H,k,L,W,se,ye){if(!Array.isArray(L))throw new Error(`${W} must be of type Array.`);const Oe=k.type.element;if(!Oe||"object"!=typeof Oe)throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${W}.`);const Pe=[];for(let Be=0;Be<L.length;Be++){const je=H.serialize(Oe,L[Be],W,ye);if(se&&Oe.xmlNamespace){const Le=Oe.xmlNamespacePrefix?`xmlns:${Oe.xmlNamespacePrefix}`:"xmlns";"Composite"===Oe.type.name?(Pe[Be]=Object.assign({},je),Pe[Be][I.c]={[Le]:Oe.xmlNamespace}):(Pe[Be]={},Pe[Be][ye.xmlCharKey]=je,Pe[Be][I.c]={[Le]:Oe.xmlNamespace})}else Pe[Be]=je}return Pe}(this,k,L,W,Boolean(this.isXML),Be):null!==Le.match(/^Dictionary$/i)?je=function(H,k,L,W,se,ye){if("object"!=typeof L)throw new Error(`${W} must be of type object.`);const Oe=k.type.value;if(!Oe||"object"!=typeof Oe)throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${W}.`);const Pe={};for(const Be of Object.keys(L)){const je=H.serialize(Oe,L[Be],W,ye);Pe[Be]=ee(Oe,je,se,ye)}if(se&&k.xmlNamespace){const je=Pe;return je[I.c]={[k.xmlNamespacePrefix?`xmlns:${k.xmlNamespacePrefix}`:"xmlns"]:k.xmlNamespace},je}return Pe}(this,k,L,W,Boolean(this.isXML),Be):null!==Le.match(/^Composite$/i)&&(je=function(H,k,L,W,se,ye){if(Y(H,k)&&(k=te(H,k,L,"clientName")),null!=L){const Oe={},Pe=j(H,k,W);for(const je of Object.keys(Pe)){const Le=Pe[je];if(Le.readOnly)continue;let rt,pt=Oe;if(H.isXML)rt=Le.xmlIsWrapped?Le.xmlName:Le.xmlElementName||Le.xmlName;else{const lt=w(Le.serializedName);rt=lt.pop();for(const Pt of lt)null==pt[Pt]&&(null!=L[je]||void 0!==Le.defaultValue)&&(pt[Pt]={}),pt=pt[Pt]}if(null!=pt){if(se&&k.xmlNamespace){const ft=k.xmlNamespacePrefix?`xmlns:${k.xmlNamespacePrefix}`:"xmlns";pt[I.c]=Object.assign(Object.assign({},pt[I.c]),{[ft]:k.xmlNamespace})}const lt=""!==Le.serializedName?W+"."+Le.serializedName:W;let Pt=L[je];const _t=Y(H,k);_t&&_t.clientName===je&&null==Pt&&(Pt=k.serializedName);const ht=H.serialize(Le,Pt,lt,ye);if(void 0!==ht&&null!=rt){const ft=ee(Le,ht,se,ye);se&&Le.xmlIsAttribute?(pt[I.c]=pt[I.c]||{},pt[I.c][rt]=ht):pt[rt]=se&&Le.xmlIsWrapped?{[Le.xmlElementName]:ft}:ft}}}const Be=function(H,k,L){const W=k.type.additionalProperties;if(!W&&k.type.className){const se=q(H,k,L);return null==se?void 0:se.type.additionalProperties}return W}(H,k,W);if(Be){const je=Object.keys(Pe);for(const Le in L)je.every(pt=>pt!==Le)&&(Oe[Le]=H.serialize(Be,L[Le],W+'["'+Le+'"]',ye))}return Oe}return L}(this,k,L,W,Boolean(this.isXML),Be))),je}deserialize(k,L,W,se={}){var ye,Oe,Pe;const Be={rootName:null!==(ye=se.rootName)&&void 0!==ye?ye:"",includeRoot:null!==(Oe=se.includeRoot)&&void 0!==Oe&&Oe,xmlCharKey:null!==(Pe=se.xmlCharKey)&&void 0!==Pe?Pe:I.I};if(null==L)return this.isXML&&"Sequence"===k.type.name&&!k.xmlIsWrapped&&(L=[]),void 0!==k.defaultValue&&(L=k.defaultValue),L;let je;const Le=k.type.name;if(W||(W=k.serializedName),null!==Le.match(/^Composite$/i))je=function(H,k,L,W,se){var ye;Y(H,k)&&(k=te(H,k,L,"serializedName"));const Oe=j(H,k,W);let Pe={};const Be=[];for(const Le of Object.keys(Oe)){const rt=Oe[Le],pt=w(Oe[Le].serializedName);Be.push(pt[0]);const{serializedName:lt,xmlName:Pt,xmlElementName:_t}=rt;let ht=W;""!==lt&&void 0!==lt&&(ht=W+"."+lt);const ft=rt.headerCollectionPrefix;if(ft){const qt={};for(const Jt of Object.keys(L))Jt.startsWith(ft)&&(qt[Jt.substring(ft.length)]=H.deserialize(rt.type.value,L[Jt],ht,se)),Be.push(Jt);Pe[Le]=qt}else if(H.isXML)if(rt.xmlIsAttribute&&L[I.c])Pe[Le]=H.deserialize(rt,L[I.c][Pt],ht,se);else{const qt=_t||Pt||lt;if(rt.xmlIsWrapped){const Jt=L[Pt],yr=null!==(ye=null==Jt?void 0:Jt[_t])&&void 0!==ye?ye:[];Pe[Le]=H.deserialize(rt,yr,ht,se)}else Pe[Le]=H.deserialize(rt,L[qt],ht,se)}else{let qt,Jt=L;for(const Lr of pt){if(!Jt)break;Jt=Jt[Lr]}qt=Jt;const yr=k.type.polymorphicDiscriminator;let ji;if(yr&&Le===yr.clientName&&null==qt&&(qt=k.serializedName),Array.isArray(L[Le])&&""===Oe[Le].serializedName){qt=L[Le];const Lr=H.deserialize(rt,qt,ht,se);for(const[uo,lo]of Object.entries(Pe))Object.prototype.hasOwnProperty.call(Lr,uo)||(Lr[uo]=lo);Pe=Lr}else(void 0!==qt||void 0!==rt.defaultValue)&&(ji=H.deserialize(rt,qt,ht,se),Pe[Le]=ji)}}const je=k.type.additionalProperties;if(je){const Le=rt=>{for(const pt in Oe)if(w(Oe[pt].serializedName)[0]===rt)return!1;return!0};for(const rt in L)Le(rt)&&(Pe[rt]=H.deserialize(je,L[rt],W+'["'+rt+'"]',se))}else if(L)for(const Le of Object.keys(L))void 0===Pe[Le]&&!Be.includes(Le)&&!$(Le,se)&&(Pe[Le]=L[Le]);return Pe}(this,k,L,W,Be);else{if(this.isXML){const rt=Be.xmlCharKey,pt=L;null!=pt[I.c]&&null!=pt[rt]&&(L=pt[rt])}null!==Le.match(/^Number$/i)?(je=parseFloat(L),isNaN(je)&&(je=L)):null!==Le.match(/^Boolean$/i)?je="true"===L||"false"!==L&&L:null!==Le.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)?je=L:null!==Le.match(/^(Date|DateTime|DateTimeRfc1123)$/i)?je=new Date(L):null!==Le.match(/^UnixTime$/i)?je=function(H){if(H)return new Date(1e3*H)}(L):null!==Le.match(/^ByteArray$/i)?je=f(L):null!==Le.match(/^Base64Url$/i)?je=function(H){if(H){if(H&&"string"!=typeof H.valueOf())throw new Error("Please provide an input of type string for converting to Uint8Array");return f(H=H.replace(/-/g,"+").replace(/_/g,"/"))}}(L):null!==Le.match(/^Sequence$/i)?je=function(H,k,L,W,se){const ye=k.type.element;if(!ye||"object"!=typeof ye)throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${W}`);if(L){Array.isArray(L)||(L=[L]);const Oe=[];for(let Pe=0;Pe<L.length;Pe++)Oe[Pe]=H.deserialize(ye,L[Pe],`${W}[${Pe}]`,se);return Oe}return L}(this,k,L,W,Be):null!==Le.match(/^Dictionary$/i)&&(je=function(H,k,L,W,se){const ye=k.type.value;if(!ye||"object"!=typeof ye)throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${W}`);if(L){const Oe={};for(const Pe of Object.keys(L))Oe[Pe]=H.deserialize(ye,L[Pe],W,se);return Oe}return L}(this,k,L,W,Be))}return k.isConstant&&(je=k.defaultValue),je}}function w(H){const k=[];let L="";if(H){const W=H.split(".");for(const se of W)"\\"===se.charAt(se.length-1)?L+=se.substr(0,se.length-1)+".":(L+=se,k.push(L),L="")}return k}function q(H,k,L){const W=k.type.className;if(!W)throw new Error(`Class name for model "${L}" is not provided in the mapper "${JSON.stringify(k,void 0,2)}".`);return H.modelMappers[W]}function j(H,k,L){let W=k.type.modelProperties;if(!W){const se=q(H,k,L);if(!se)throw new Error(`mapper() cannot be null or undefined for model "${k.type.className}".`);if(W=null==se?void 0:se.type.modelProperties,!W)throw new Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(se)}" of type "${k.type.className}" for object "${L}".`)}return W}function ee(H,k,L,W){if(!L||!H.xmlNamespace)return k;const ye={[H.xmlNamespacePrefix?`xmlns:${H.xmlNamespacePrefix}`:"xmlns"]:H.xmlNamespace};if(["Composite"].includes(H.type.name)){if(k[I.c])return k;{const Pe=Object.assign({},k);return Pe[I.c]=ye,Pe}}const Oe={};return Oe[W.xmlCharKey]=k,Oe[I.c]=ye,Oe}function $(H,k){return[I.c,k.xmlCharKey].includes(H)}function te(H,k,L,W){const se=Y(H,k);if(se){const ye=se[W];if(null!=ye){const Oe=L[ye];if(null!=Oe){const Pe=k.type.uberParent||k.type.className,je=H.modelMappers.discriminators[Oe===Pe?Oe:Pe+"."+Oe];je&&(k=je)}}}return k}function Y(H,k){return k.type.polymorphicDiscriminator||le(H,k.type.uberParent)||le(H,k.type.className)}function le(H,k){return k&&H.modelMappers[k]&&H.modelMappers[k].type.polymorphicDiscriminator}function Z(H){const k=H;if(null!=H){if(H instanceof Uint8Array)return E(H);if(H instanceof Date)return H.toISOString();if(Array.isArray(H)){const L=[];for(let W=0;W<H.length;W++)L.push(Z(H[W]));return L}if("object"==typeof H){const L={};for(const W in H)L[W]=Z(k[W]);return L}return H}}const ne=function(H){const k={};for(const L of["Base64Url","Boolean","ByteArray","Composite","Date","DateTime","DateTimeRfc1123","Dictionary","Enum","Number","Object","Sequence","String","Stream","TimeSpan","UnixTime"])k[L]=L;return k}();class we{constructor(k,L,W,se,ye,Oe,Pe,Be,je,Le,rt,pt,lt,Pt,_t){this.streamResponseBody=Oe,this.streamResponseStatusCodes=_t,this.url=k||"",this.method=L||"GET",this.headers=_(ye)?ye:new h(ye),this.body=W,this.query=se,this.formData=void 0,this.withCredentials=Pe||!1,this.abortSignal=Be,this.timeout=je||0,this.onUploadProgress=Le,this.onDownloadProgress=rt,this.proxySettings=pt,this.keepAlive=lt,this.decompressResponse=Pt,this.requestId=this.headers.get("x-ms-client-request-id")||(0,v.Rl)()}validateRequestProperties(){if(!this.method)throw new Error("WebResource.method is required.");if(!this.url)throw new Error("WebResource.url is required.")}prepare(k){if(!k)throw new Error("options object is required");if(null==k.method||"string"!=typeof k.method.valueOf())throw new Error("options.method must be a string.");if(k.url&&k.pathTemplate)throw new Error("options.url and options.pathTemplate are mutually exclusive. Please provide exactly one of them.");if(!(null!=k.pathTemplate&&"string"==typeof k.pathTemplate.valueOf()||null!=k.url&&"string"==typeof k.url.valueOf()))throw new Error("Please provide exactly one of options.pathTemplate or options.url.");if(k.url){if("string"!=typeof k.url)throw new Error('options.url must be of type "string".');this.url=k.url}if(k.method){const L=["GET","PUT","HEAD","DELETE","OPTIONS","POST","PATCH","TRACE"];if(-1===L.indexOf(k.method.toUpperCase()))throw new Error('The provided method "'+k.method+'" is invalid. Supported HTTP methods are: '+JSON.stringify(L))}if(this.method=k.method.toUpperCase(),k.pathTemplate){const{pathTemplate:L,pathParameters:W}=k;if("string"!=typeof L)throw new Error('options.pathTemplate must be of type "string".');k.baseUrl||(k.baseUrl="https://management.azure.com");const se=k.baseUrl;let ye=se+(se.endsWith("/")?"":"/")+(L.startsWith("/")?L.slice(1):L);const Oe=ye.match(/({[\w-]*\s*[\w-]*})/gi);if(Oe&&Oe.length){if(!W)throw new Error(`pathTemplate: ${L} has been provided. Hence, options.pathParameters must also be provided.`);Oe.forEach(function(Pe){const Be=Pe.slice(1,-1),je=W[Be];if(null==je||"string"!=typeof je&&"object"!=typeof je){const Le=JSON.stringify(W,void 0,2);throw new Error(`pathTemplate: ${L} contains the path parameter ${Be} however, it is not present in parameters: ${Le}.The value of the path parameter can either be a "string" of the form { ${Be}: "some sample value" } or it can be an "object" of the form { "${Be}": { value: "some sample value", skipUrlEncoding: true } }.`)}if("string"==typeof je.valueOf()&&(ye=ye.replace(Pe,encodeURIComponent(je))),"object"==typeof je.valueOf()){if(!je.value)throw new Error(`options.pathParameters[${Be}] is of type "object" but it does not contain a "value" property.`);ye=ye.replace(Pe,je.skipUrlEncoding?je.value:encodeURIComponent(je.value))}})}this.url=ye}if(k.queryParameters){const L=k.queryParameters;if("object"!=typeof L)throw new Error('options.queryParameters must be of type object. It should be a JSON object of "query-parameter-name" as the key and the "query-parameter-value" as the value. The "query-parameter-value" may be fo type "string" or an "object" of the form { value: "query-parameter-value", skipUrlEncoding: true }.');this.url&&-1===this.url.indexOf("?")&&(this.url+="?");const W=[];this.query={};for(const se in L){const ye=L[se];if(ye)if("string"==typeof ye)W.push(se+"="+encodeURIComponent(ye)),this.query[se]=encodeURIComponent(ye);else if("object"==typeof ye){if(!ye.value)throw new Error(`options.queryParameters[${se}] is of type "object" but it does not contain a "value" property.`);ye.skipUrlEncoding?(W.push(se+"="+ye.value),this.query[se]=ye.value):(W.push(se+"="+encodeURIComponent(ye.value)),this.query[se]=encodeURIComponent(ye.value))}}this.url+=W.join("&")}if(k.headers){const L=k.headers;for(const W of Object.keys(k.headers))this.headers.set(W,L[W])}return this.headers.get("accept-language")||this.headers.set("accept-language","en-US"),!this.headers.get("x-ms-client-request-id")&&!k.disableClientRequestId&&this.headers.set("x-ms-client-request-id",this.requestId),this.headers.get("Content-Type")||this.headers.set("Content-Type","application/json; charset=utf-8"),this.body=k.body,null!=k.body&&(k.bodyIsStream?(this.headers.get("Transfer-Encoding")||this.headers.set("Transfer-Encoding","chunked"),"application/octet-stream"!==this.headers.get("Content-Type")&&this.headers.set("Content-Type","application/octet-stream")):(k.serializationMapper&&(this.body=new b(k.mappers).serialize(k.serializationMapper,k.body,"requestBody")),k.disableJsonStringifyOnBody||(this.body=JSON.stringify(k.body)))),k.spanOptions&&(this.spanOptions=k.spanOptions),k.tracingContext&&(this.tracingContext=k.tracingContext),this.abortSignal=k.abortSignal,this.onDownloadProgress=k.onDownloadProgress,this.onUploadProgress=k.onUploadProgress,this}clone(){const k=new we(this.url,this.method,this.body,this.query,this.headers&&this.headers.clone(),this.streamResponseBody,this.withCredentials,this.abortSignal,this.timeout,this.onUploadProgress,this.onDownloadProgress,this.proxySettings,this.keepAlive,this.decompressResponse,this.streamResponseStatusCodes);return this.formData&&(k.formData=this.formData),this.operationSpec&&(k.operationSpec=this.operationSpec),this.shouldDeserialize&&(k.shouldDeserialize=this.shouldDeserialize),this.operationResponseGetter&&(k.operationResponseGetter=this.operationResponseGetter),k}}var _e=u(4637),re=u(369);const fe="REDACTED",me=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent"],ve=["api-version"];class be{constructor({allowedHeaderNames:k=[],allowedQueryParameters:L=[]}={}){k=Array.isArray(k)?me.concat(k):me,L=Array.isArray(L)?ve.concat(L):ve,this.allowedHeaderNames=new Set(k.map(W=>W.toLowerCase())),this.allowedQueryParameters=new Set(L.map(W=>W.toLowerCase()))}sanitize(k){const L=new Set;return JSON.stringify(k,(W,se)=>{if(se instanceof Error)return Object.assign(Object.assign({},se),{name:se.name,message:se.message});if("_headersMap"===W)return this.sanitizeHeaders(se);if("url"===W)return this.sanitizeUrl(se);if("query"===W)return this.sanitizeQuery(se);if("body"!==W&&"response"!==W&&"operationSpec"!==W){if(Array.isArray(se)||(0,v.Kn)(se)){if(L.has(se))return"[Circular]";L.add(se)}return se}},2)}sanitizeHeaders(k){return this.sanitizeObject(k,this.allowedHeaderNames,(L,W)=>L[W].value)}sanitizeQuery(k){return this.sanitizeObject(k,this.allowedQueryParameters,(L,W)=>L[W])}sanitizeObject(k,L,W){if("object"!=typeof k||null===k)return k;const se={};for(const ye of Object.keys(k))se[ye]=L.has(ye.toLowerCase())?W(k,ye):fe;return se}sanitizeUrl(k){if("string"!=typeof k||null===k)return k;const L=re.UK.parse(k),W=L.getQuery();if(!W)return k;const se=re.$4.parse(W);for(const ye of se.keys())this.allowedQueryParameters.has(ye.toLowerCase())||se.set(ye,fe);return L.setQuery(se.toString()),L.toString()}}const Ie={},ke=new be;let qe=(()=>{class H extends Error{constructor(L,W,se,ye,Oe){super(L),this.name="RestError",this.code=W,this.statusCode=se,this.request=ye,this.response=Oe,Object.setPrototypeOf(this,H.prototype)}[Ie](){return`RestError: ${this.message} \n ${ke.sanitize(this)}`}}return H.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",H.PARSE_ERROR="PARSE_ERROR",H})();class Re{sendRequest(k){var L;const W=new XMLHttpRequest;if(k.proxySettings)throw new Error("HTTP proxy is not supported in browser environment");const se=k.abortSignal;if(se){if(se.aborted)return Promise.reject(new _e._("The operation was aborted."));const ye=()=>{W.abort()};se.addEventListener("abort",ye),W.addEventListener("readystatechange",()=>{W.readyState===XMLHttpRequest.DONE&&se.removeEventListener("abort",ye)})}if(Ge(W.upload,k.onUploadProgress),Ge(W,k.onDownloadProgress),k.formData){const ye=k.formData,Oe=new FormData,Pe=(je,Le)=>{Le&&Object.prototype.hasOwnProperty.call(Le,"value")&&Object.prototype.hasOwnProperty.call(Le,"options")?Oe.append(je,Le.value,Le.options):Oe.append(je,Le)};for(const je of Object.keys(ye)){const Le=ye[je];if(Array.isArray(Le))for(let rt=0;rt<Le.length;rt++)Pe(je,Le[rt]);else Pe(je,Le)}k.body=Oe,k.formData=void 0;const Be=k.headers.get("Content-Type");Be&&-1!==Be.indexOf("multipart/form-data")&&k.headers.remove("Content-Type")}W.open(k.method,k.url),W.timeout=k.timeout,W.withCredentials=k.withCredentials;for(const ye of k.headers.headersArray())W.setRequestHeader(ye.name,ye.value);return W.responseType=(null===(L=k.streamResponseStatusCodes)||void 0===L?void 0:L.size)||k.streamResponseBody?"blob":"text",W.send(void 0===k.body?null:k.body),new Promise("blob"===W.responseType?(ye,Oe)=>{(function(H,k,L,W){H.addEventListener("readystatechange",()=>{var se;if(H.readyState===XMLHttpRequest.HEADERS_RECEIVED)if(k.streamResponseBody||(null===(se=k.streamResponseStatusCodes)||void 0===se?void 0:se.has(H.status))){const ye=new Promise((Oe,Pe)=>{H.addEventListener("load",()=>{Oe(H.response)}),Xe(k,H,Pe)});L({request:k,status:H.status,headers:Ye(H),blobBody:ye})}else H.addEventListener("load",()=>{if(H.response){const ye=new FileReader;ye.onload=function(Oe){var Pe;const Be=null===(Pe=Oe.target)||void 0===Pe?void 0:Pe.result;L({request:k,status:H.status,headers:Ye(H),bodyAsText:Be})},ye.onerror=function(Oe){W(ye.error)},ye.readAsText(H.response,"UTF-8")}else L({request:k,status:H.status,headers:Ye(H)})})})})(W,k,ye,Oe),Xe(k,W,Oe)}:function(ye,Oe){W.addEventListener("load",()=>ye({request:k,status:W.status,headers:Ye(W),bodyAsText:W.responseText})),Xe(k,W,Oe)})}}function Ge(H,k){k&&H.addEventListener("progress",L=>k({loadedBytes:L.loaded}))}function Ye(H){const k=new h,L=H.getAllResponseHeaders().trim().split(/[\r\n]+/);for(const W of L){const se=W.indexOf(":"),ye=W.slice(0,se),Oe=W.slice(se+2);k.set(ye,Oe)}return k}function Xe(H,k,L){k.addEventListener("error",()=>L(new qe(`Failed to send request to ${H.url}`,qe.REQUEST_SEND_ERROR,void 0,H)));const W=new _e._("The operation was aborted.");k.addEventListener("abort",()=>L(W)),k.addEventListener("timeout",()=>L(W))}var We=u(1138),st=u(4762);function Ue(H){var k;const{requestOptions:L,tracingOptions:W}=H;let ye=(0,st._T)(H,["requestOptions","tracingOptions"]);return L&&(ye=Object.assign(Object.assign({},ye),L)),W&&(ye.tracingContext=W.tracingContext,ye.spanOptions=null===(k=W)||void 0===k?void 0:k.spanOptions),ye}var ut=u(8239),nt=u(2462);if(!(self.document&&self.DOMParser&&self.Node&&self.XMLSerializer))throw new Error('This library depends on the following DOM objects: ["document", "DOMParser", "Node", "XMLSerializer"] to parse XML, but some of these are undefined. You may provide a polyfill to make these globally available in order to support your environment. For more information, please refer to https://aka.ms/azsdk/js/web-workers. ');const Wt=document.implementation.createDocument(null,null,null),Zt=new DOMParser;function Ae(H,k={}){var L,W,se;try{const ye={rootName:null!==(L=k.rootName)&&void 0!==L?L:"",includeRoot:null!==(W=k.includeRoot)&&void 0!==W&&W,xmlCharKey:null!==(se=k.xmlCharKey)&&void 0!==se?se:I.I},Oe=Zt.parseFromString(H,"application/xml");let Pe;return function(H){const k=H.getElementsByTagName("parsererror");if(k.length>0&&function(){var H;if(void 0===ze)try{ze=null!==(H=Zt.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI)&&void 0!==H?H:""}catch(k){ze=""}return ze}())for(let L=0;L<k.length;L++)if(k[L].namespaceURI===ze)throw new Error(k[L].innerHTML)}(Oe),Pe=zt(ye.includeRoot?Oe:Oe.childNodes[0],ye),Promise.resolve(Pe)}catch(ye){return Promise.reject(ye)}}let ze;function zt(H,k){let L={};const W=H.childNodes.length,se=H.childNodes[0],ye=se&&1===W&&se.nodeType===Node.TEXT_NODE&&se.nodeValue||void 0,Oe=function(H){return function(H){return!!H.attributes}(H)&&H.hasAttributes()?H:void 0}(H);if(Oe){L[I.c]={};for(let Pe=0;Pe<Oe.attributes.length;Pe++){const Be=Oe.attributes[Pe];L[I.c][Be.nodeName]=Be.nodeValue}ye&&(L[k.xmlCharKey]=ye)}else 0===W?L="":ye&&(L=ye);if(!ye)for(let Pe=0;Pe<W;Pe++){const Be=H.childNodes[Pe];if(Be.nodeType!==Node.TEXT_NODE){const je=zt(Be,k);L[Be.nodeName]?Array.isArray(L[Be.nodeName])?L[Be.nodeName].push(je):L[Be.nodeName]=[L[Be.nodeName],je]:L[Be.nodeName]=je}}return L}const Qn=new XMLSerializer;function Jn(H,k={}){var L,W,se;const ye={rootName:null!==(L=k.rootName)&&void 0!==L?L:"root",includeRoot:null!==(W=k.includeRoot)&&void 0!==W&&W,xmlCharKey:null!==(se=k.xmlCharKey)&&void 0!==se?se:I.I},Oe=xt(H,ye.rootName,ye)[0];return'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+Qn.serializeToString(Oe)}function et(H){const k=[];for(const L of Object.keys(H)){const W=Wt.createAttribute(L);W.value=H[L].toString(),k.push(W)}return k}function xt(H,k,L){if(null==H||"string"==typeof H||"number"==typeof H||"boolean"==typeof H){const W=Wt.createElement(k);return W.textContent=null==H?"":H.toString(),[W]}if(Array.isArray(H)){const W=[];for(const se of H)for(const ye of xt(se,k,L))W.push(ye);return W}if("object"==typeof H){const W=Wt.createElement(k);for(const se of Object.keys(H))if(se===I.c)for(const ye of et(H[se]))W.attributes.setNamedItem(ye);else if(se===L.xmlCharKey)W.textContent=H[se].toString();else for(const ye of xt(H[se],se,L))W.appendChild(ye);return[W]}throw new Error(`Illegal value passed to buildObject: ${H}`)}function pr(H,k){return{create:(L,W)=>new he(L,W,H,k)}}const Li=["application/json","text/json"],Fi=["application/xml","application/atom+xml"],Xi={expectedContentTypes:{json:Li,xml:Fi}};class he extends nt.U{constructor(k,L,W,se={}){var ye;super(k,L),this.jsonContentTypes=W&&W.json||Li,this.xmlContentTypes=W&&W.xml||Fi,this.xmlCharKey=null!==(ye=se.xmlCharKey)&&void 0!==ye?ye:I.I}sendRequest(k){var L=this;return(0,ut.Z)(function*(){return L._nextPolicy.sendRequest(k).then(W=>tt(L.jsonContentTypes,L.xmlContentTypes,W,{xmlCharKey:L.xmlCharKey}))})()}}function tt(H,k,L,W={}){var se,ye,Oe;const Pe={rootName:null!==(se=W.rootName)&&void 0!==se?se:"",includeRoot:null!==(ye=W.includeRoot)&&void 0!==ye&&ye,xmlCharKey:null!==(Oe=W.xmlCharKey)&&void 0!==Oe?Oe:I.I};return function(H,k,L,W){var se;const ye=Pe=>{const Le=new qe(`Error "${Pe}" occurred while parsing the response body - ${L.bodyAsText}.`,Pe.code||qe.PARSE_ERROR,L.status,L.request,L);return Promise.reject(Le)};if(!(null===(se=L.request.streamResponseStatusCodes)||void 0===se?void 0:se.has(L.status))&&!L.request.streamResponseBody&&L.bodyAsText){const Pe=L.bodyAsText,Be=L.headers.get("Content-Type")||"",je=Be?Be.split(";").map(Le=>Le.toLowerCase()):[];if(0===je.length||je.some(Le=>-1!==H.indexOf(Le)))return new Promise(Le=>{L.parsedBody=JSON.parse(Pe),Le(L)}).catch(ye);if(je.some(Le=>-1!==k.indexOf(Le)))return Ae(Pe,W).then(Le=>(L.parsedBody=Le,L)).catch(ye)}return Promise.resolve(L)}(H,k,L,Pe).then(Be=>{if(!function(H){const k=H.request.shouldDeserialize;let L;return L=void 0===k||("boolean"==typeof k?k:k(H)),L}(Be))return Be;const je=Be.request.operationSpec;if(!je||!je.responses)return Be;const Le=function(H){let k;const L=H.request,W=L.operationSpec;if(W){const se=L.operationResponseGetter;k=se?se(W,H):W.responses[H.status]}return k}(Be),{error:rt,shouldReturnResponse:pt}=function(H,k,L){var W;const se=200<=H.status&&H.status<300;if(function(H){const k=Object.keys(H.responses);return 0===k.length||1===k.length&&"default"===k[0]}(k)?se:L){if(!L)return{error:null,shouldReturnResponse:!1};if(!L.isError)return{error:null,shouldReturnResponse:!1}}const Oe=null!=L?L:k.responses.default,Be=(null===(W=H.request.streamResponseStatusCodes)||void 0===W?void 0:W.has(H.status))||H.request.streamResponseBody?`Unexpected status code: ${H.status}`:H.bodyAsText,je=new qe(Be,void 0,H.status,H.request,H);if(!Oe)throw je;const Le=Oe.bodyMapper,rt=Oe.headersMapper;try{if(H.parsedBody){const pt=H.parsedBody;let lt;if(Le){let _t=pt;k.isXML&&Le.type.name===ne.Sequence&&(_t="object"==typeof pt?pt[Le.xmlElementName]:[]),lt=k.serializer.deserialize(Le,_t,"error.response.parsedBody")}const Pt=pt.error||lt||pt;je.code=Pt.code,Pt.message&&(je.message=Pt.message),Le&&(je.response.parsedBody=lt)}H.headers&&rt&&(je.response.parsedHeaders=k.serializer.deserialize(rt,H.headers.rawHeaders(),"operationRes.parsedHeaders"))}catch(pt){je.message=`Error "${pt.message}" occurred in deserializing the responseBody - "${H.bodyAsText}" for the default response.`}return{error:je,shouldReturnResponse:!1}}(Be,je,Le);if(rt)throw rt;if(pt)return Be;if(Le){if(Le.bodyMapper){let lt=Be.parsedBody;je.isXML&&Le.bodyMapper.type.name===ne.Sequence&&(lt="object"==typeof lt?lt[Le.bodyMapper.xmlElementName]:[]);try{Be.parsedBody=je.serializer.deserialize(Le.bodyMapper,lt,"operationRes.parsedBody",W)}catch(Pt){throw new qe(`Error ${Pt} occurred in deserializing the responseBody - ${Be.bodyAsText}`,void 0,Be.status,Be.request,Be)}}else"HEAD"===je.httpMethod&&(Be.parsedBody=L.status>=200&&L.status<300);Le.headersMapper&&(Be.parsedHeaders=je.serializer.deserialize(Le.headersMapper,Be.headers.rawHeaders(),"operationRes.parsedHeaders",W))}return Be})}const vn={enable:!0};function an(H){return{create:(k,L)=>new cn(k,L,H||vn)}}class cn extends nt.U{constructor(k,L,W){super(k,L),this.keepAliveOptions=W}sendRequest(k){var L=this;return(0,ut.Z)(function*(){return k.keepAlive=L.keepAliveOptions.enable,L._nextPolicy.sendRequest(k)})()}}const Bn=["GET","HEAD"],Eo={handleRedirects:!0,maxRetries:20};function Ct(H=20){return{create:(k,L)=>new Dn(k,L,H)}}class Dn extends nt.U{constructor(k,L,W=20){super(k,L),this.maxRetries=W}sendRequest(k){return this._nextPolicy.sendRequest(k).then(L=>un(this,L,0))}}function un(H,k,L){const{request:W,status:se}=k,ye=k.headers.get("location");if(ye&&(300===se||301===se&&Bn.includes(W.method)||302===se&&Bn.includes(W.method)||303===se&&"POST"===W.method||307===se)&&(!H.maxRetries||L<H.maxRetries)){const Oe=re.UK.parse(W.url);return Oe.setPath(ye),W.url=Oe.toString(),303===se&&(W.method="GET",delete W.body),H._nextPolicy.sendRequest(W).then(Pe=>un(H,Pe,L+1))}return Promise.resolve(k)}function Xt(H){return"number"==typeof H}function Qr(H,k,L,W,se){return!!k(W,se)&&L.retryCount<H}function ea(H,k={retryCount:0,retryInterval:0},L){L&&(k.error&&(L.innerError=k.error),k.error=L),k.retryCount++;let W=Math.pow(2,k.retryCount-1)-1;return W*=.8*H.retryInterval+Math.floor(Math.random()*(.4*H.retryInterval)),k.retryInterval=Math.min(H.minRetryInterval+W,H.maxRetryInterval),k}var jn=u(8006),Jr=u(969);const gr=(0,u(1326).YR)("core-http");function Qo(H,k,L){return{create:(W,se)=>new ta(W,se,H,k,L)}}var eo=(()=>{return(H=eo||(eo={}))[H.Exponential=0]="Exponential",eo;var H})();const Pu={maxRetries:3,retryDelayInMs:3e4,maxRetryDelayInMs:9e4};class ta extends nt.U{constructor(k,L,W,se,ye){super(k,L),this.retryCount=Xt(W)?W:3,this.retryInterval=Xt(se)?se:3e4,this.maxRetryInterval=Xt(ye)?ye:9e4}sendRequest(k){return this._nextPolicy.sendRequest(k.clone()).then(L=>_o(this,k,L)).catch(L=>_o(this,k,L.response,void 0,L))}}function _o(H,k,L,W,se){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,ut.Z)(function*(H,k,L,W,se){W=ea({retryInterval:H.retryInterval,minRetryInterval:0,maxRetryInterval:H.maxRetryInterval},W,se);const Oe=k.abortSignal&&k.abortSignal.aborted;if(Oe||!Qr(H.retryCount,function(Pe){const Be=null==Pe?void 0:Pe.status;return!(503===Be&&(null==L?void 0:L.headers.get(jn.g.HeaderConstants.RETRY_AFTER))||void 0===Be||Be<500&&408!==Be||501===Be||505===Be)},W,L)){if(Oe||se||!L)throw W.error||new qe("Failed to send the request.",qe.REQUEST_SEND_ERROR,L&&L.status,L&&L.request,L);return L}gr.info(`Retrying request in ${W.retryInterval}`);try{yield(0,Jr.g)(W.retryInterval);const Pe=yield H._nextPolicy.sendRequest(k.clone());return _o(H,k,Pe,W)}catch(Pe){return _o(H,k,L,W,Pe)}})).apply(this,arguments)}function Kt(H={}){return{create:(k,L)=>new Ou(k,L,H)}}class Ou extends nt.U{constructor(k,L,{logger:W=gr.info,allowedHeaderNames:se=[],allowedQueryParameters:ye=[]}={}){super(k,L),this.logger=W,this.sanitizer=new be({allowedHeaderNames:se,allowedQueryParameters:ye})}get allowedHeaderNames(){return this.sanitizer.allowedHeaderNames}set allowedHeaderNames(k){this.sanitizer.allowedHeaderNames=k}get allowedQueryParameters(){return this.sanitizer.allowedQueryParameters}set allowedQueryParameters(k){this.sanitizer.allowedQueryParameters=k}sendRequest(k){return this.logger.enabled?(this.logRequest(k),this._nextPolicy.sendRequest(k).then(L=>this.logResponse(L))):this._nextPolicy.sendRequest(k)}logRequest(k){this.logger(`Request: ${this.sanitizer.sanitize(k)}`)}logResponse(k){return this.logger(`Response status code: ${k.status}`),this.logger(`Headers: ${this.sanitizer.sanitize(k.headers)}`),k}}function Ar(H){return wn(H.parameterPath,H.mapper)}function wn(H,k){let L;return L="string"==typeof H?H:Array.isArray(H)?H.join("."):k.serializedName,L}var na=u(434);const ia=function(){return"x-ms-useragent"};function Ui(){const H=[{key:"core-http",value:jn.g.coreHttpVersion}],k=function(){const H=self.navigator;return[{key:"OS",value:(H.oscpu||H.platform).replace(" ","")}]}();return function(H,k=" ",L="/"){return H.map(W=>`${W.key}${W.value?`${L}${W.value}`:""}`).join(k)}(H.concat(k))}function Ci(H){const k=H&&null!=H.key?H.key:"x-ms-useragent",L=H&&null!=H.value?H.value:Ui();return{create:(W,se)=>new wo(W,se,k,L)}}class wo extends nt.U{constructor(k,L,W,se){super(k,L),this._nextPolicy=k,this._options=L,this.headerKey=W,this.headerValue=se}sendRequest(k){return this.addUserAgentHeader(k),this._nextPolicy.sendRequest(k)}addUserAgentHeader(k){k.headers||(k.headers=new h),!k.headers.get(this.headerKey)&&this.headerValue&&k.headers.set(this.headerKey,this.headerValue)}}var ar=(()=>{return(H=ar||(ar={})).Csv=",",H.Ssv=" ",H.Tsv="\t",H.Pipes="|",H.Multi="Multi",ar;var H})();const Yo=URL;var mt=u(6354);const Vi=new Error("DisableResponseDecompressionPolicy is not supported in browser environment");function Zo(){return{create:(H,k)=>{throw Vi}}}function to(H="x-ms-client-request-id"){return{create:(k,L)=>new So(k,L,H)}}class So extends nt.U{constructor(k,L,W){super(k,L),this._requestIdHeaderName=W}sendRequest(k){return k.headers.contains(this._requestIdHeaderName)||k.headers.set(this._requestIdHeaderName,k.requestId),this._nextPolicy.sendRequest(k)}}let mr;class Nu extends nt.U{constructor(k,L){super(k,L)}sendRequest(k){var L=this;return(0,ut.Z)(function*(){if("string"==typeof k.body&&k.body.startsWith("[")){const W=JSON.parse(k.body);Array.isArray(W)&&(k.body=W.map(se=>JSON.stringify(se)+"\n").join(""))}return L._nextPolicy.sendRequest(k)})()}}const nn=new Error("ProxyPolicy is not supported in browser environment");function oa(H){}function Io(H){return{create:(k,L)=>{throw nn}}}class Ht extends nt.U{constructor(k,L,W=30){super(k,L),this._retryTimeout=W}sendRequest(k){return this._nextPolicy.sendRequest(k.clone()).then(L=>function(H,k,L){if(409===L.status){const W=function(H){let k,L;if(H){try{L=JSON.parse(H)}catch(W){}if(L&&L.error&&L.error.message&&L.error.code&&"MissingSubscriptionRegistration"===L.error.code){const W=L.error.message.match(/.*'(.*)'/i);W&&(k=W.pop())}}return k}(L.bodyAsText);if(W){const se=function(H){let k;const L=H.match(/.*\/subscriptions\/[a-f0-9-]+\//gi);if(!L||!L[0])throw new Error(`Unable to extract subscriptionId from the given url - ${H}.`);return k=L[0],k}(k.url);return function(H,k,L,W){return Zr.apply(this,arguments)}(H,se,W,k).catch(()=>!1).then(ye=>ye?(k.headers.set("x-ms-client-request-id",v.Rl()),H._nextPolicy.sendRequest(k.clone())):L)}}return Promise.resolve(L)}(this,k,L))}}function aa(H,k=!1){const L=H.clone();return k&&(L.url=H.url),L.headers.set("x-ms-client-request-id",v.Rl()),L.headers.set("Content-Type","application/json; charset=utf-8"),L}function Zr(){return(Zr=(0,ut.Z)(function*(H,k,L,W){const se=`${k}providers/${L}/register?api-version=2016-02-01`,ye=`${k}providers/${L}?api-version=2016-02-01`,Oe=aa(W);if(Oe.method="POST",Oe.url=se,200!==(yield H._nextPolicy.sendRequest(Oe)).status)throw new Error(`Autoregistration of ${L} failed. Please try registering manually.`);return ro(H,ye,W)})).apply(this,arguments)}function ro(H,k,L){return io.apply(this,arguments)}function io(){return(io=(0,ut.Z)(function*(H,k,L){const W=aa(L);W.url=k,W.method="GET";const se=yield H._nextPolicy.sendRequest(W),ye=se.parsedBody;return!(!se.parsedBody||!ye.registrationState||"Registered"!==ye.registrationState)||(yield(0,Jr.g)(1e3*H._retryTimeout),ro(H,k,L))})).apply(this,arguments)}function Xo(H){return{create:(k,L)=>new _r(k,L,H)}}class _r extends nt.U{constructor(k,L,W){super(k,L),this.authenticationProvider=W}signRequest(k){return this.authenticationProvider.signRequest(k)}sendRequest(k){return this.signRequest(k).then(L=>this._nextPolicy.sendRequest(L))}}function Xr(H,k,L,W){return{create:(se,ye)=>new ua(se,ye,H,k,L,W)}}class ua extends nt.U{constructor(k,L,W,se,ye,Oe){super(k,L),this.retryCount=Xt(W)?W:3,this.retryInterval=Xt(se)?se:3e4,this.minRetryInterval=Xt(ye)?ye:3e3,this.maxRetryInterval=Xt(Oe)?Oe:9e4}sendRequest(k){return this._nextPolicy.sendRequest(k.clone()).catch(L=>oo(this,k,L.response,L))}}function oo(H,k,L,W,se){return Do.apply(this,arguments)}function Do(){return(Do=(0,ut.Z)(function*(H,k,L,W,se){if(se=ea(H,se,W),!Qr(H.retryCount,function(Oe,Pe){return!(!Pe||!Pe.code||"ETIMEDOUT"!==Pe.code&&"ESOCKETTIMEDOUT"!==Pe.code&&"ECONNREFUSED"!==Pe.code&&"ECONNRESET"!==Pe.code&&"ENOENT"!==Pe.code)},se,L,W))return W?Promise.reject(se.error):L;try{return yield(0,Jr.g)(se.retryInterval),H._nextPolicy.sendRequest(k.clone())}catch(Oe){return oo(H,k,L,Oe,se)}})).apply(this,arguments)}const Or=jn.g.HttpConstants.StatusCodes;function Bi(){return{create:(H,k)=>new kr(H,k)}}const ei="The operation was aborted.";class kr extends nt.U{constructor(k,L,W){super(k,L),this.numberOfRetries=0,this._handleResponse=W||this._defaultResponseHandler}sendRequest(k){var L=this;return(0,ut.Z)(function*(){const W=yield L._nextPolicy.sendRequest(k.clone());return W.status!==Or.TooManyRequests&&W.status!==Or.ServiceUnavailable?W:L._handleResponse(k,W)})()}_defaultResponseHandler(k,L){var W=this;return(0,ut.Z)(function*(){var se;const ye=L.headers.get(jn.g.HeaderConstants.RETRY_AFTER);if(ye){const Oe=kr.parseRetryAfterHeader(ye);if(Oe){if(W.numberOfRetries+=1,yield(0,Jr.g)(Oe,void 0,{abortSignal:k.abortSignal,abortErrorMsg:ei}),null===(se=k.abortSignal)||void 0===se?void 0:se.aborted)throw new _e._(ei);return W.numberOfRetries<3?W.sendRequest(k):W._nextPolicy.sendRequest(k)}}return L})()}static parseRetryAfterHeader(k){const L=Number(k);return Number.isNaN(L)?kr.parseDateRetryAfterHeader(k):1e3*L}static parseDateRetryAfterHeader(k){try{const L=Date.now(),se=Date.parse(k)-L;return Number.isNaN(se)?void 0:se}catch(L){return}}}var Ro=u(1259),On=u(1643),kn=u(4874);const Nn=(0,Ro.q)({packagePrefix:"",namespace:""});function Sr(H={}){return{create:(k,L)=>new ti(k,L,H)}}class ti extends nt.U{constructor(k,L,W){super(k,L),this.userAgent=W.userAgent}sendRequest(k){var L=this;return(0,ut.Z)(function*(){if(!k.tracingContext)return L._nextPolicy.sendRequest(k);const W=L.tryCreateSpan(k);if(!W)return L._nextPolicy.sendRequest(k);try{const se=yield L._nextPolicy.sendRequest(k);return L.tryProcessResponse(W,se),se}catch(se){throw L.tryProcessError(W,se),se}})()}tryCreateSpan(k){var L;try{const W=re.UK.parse(k.url).getPath()||"/",{span:se}=Nn(W,{tracingOptions:{spanOptions:Object.assign(Object.assign({},k.spanOptions),{kind:On.MU.CLIENT}),tracingContext:k.tracingContext}});if(!se.isRecording())return void se.end();const ye=null===(L=k.tracingContext)||void 0===L?void 0:L.getValue(Symbol.for("az.namespace"));"string"==typeof ye&&se.setAttribute("az.namespace",ye),se.setAttributes({"http.method":k.method,"http.url":k.url,requestId:k.requestId}),this.userAgent&&se.setAttribute("http.user_agent",this.userAgent);const Oe=se.spanContext(),Pe=(0,kn.O)(Oe);if(Pe&&(0,On.BM)(Oe)){k.headers.set("traceparent",Pe);const Be=Oe.traceState&&Oe.traceState.serialize();Be&&k.headers.set("tracestate",Be)}return se}catch(W){return void gr.warning(`Skipping creating a tracing span due to an error: ${W.message}`)}}tryProcessError(k,L){try{k.setStatus({code:On.Qn.ERROR,message:L.message}),L.statusCode&&k.setAttribute("http.status_code",L.statusCode),k.end()}catch(W){gr.warning(`Skipping tracing span processing due to an error: ${W.message}`)}}tryProcessResponse(k,L){try{k.setAttribute("http.status_code",L.status);const W=L.headers.get("x-ms-request-id");W&&k.setAttribute("serviceRequestId",W),k.setStatus({code:On.Qn.OK}),k.end()}catch(W){gr.warning(`Skipping tracing span processing due to an error: ${W.message}`)}}}class Zn{constructor(k,L){let W;if(L||(L={}),this._withCredentials=L.withCredentials||!1,this._httpClient=L.httpClient||(mr||(mr=new Re),mr),this._requestPolicyOptions=new nt._(L.httpPipelineLogger),Array.isArray(L.requestPolicyFactories))gr.info("ServiceClient: using custom request policies"),W=L.requestPolicyFactories;else{let se;if((0,na.c)(k))gr.info("ServiceClient: creating bearer token authentication policy from provided credentials"),se=(()=>{let Oe;const Pe=this,Be=L;return{create(je,Le){const rt=function(H,k){if(null==H?void 0:H.credentialScopes){const L=H.credentialScopes;return Array.isArray(L)?L.map(W=>new Yo(W).toString()):new Yo(L).toString()}if(k)return`${k}/.default`}(Be,Pe.baseUri);if(!rt)throw new Error("When using credential, the ServiceClient must contain a baseUri or a credentialScopes in ServiceClientOptions. Unable to create a bearerTokenAuthenticationPolicy");return null==Oe&&(Oe=(0,mt.v)(k,rt)),Oe.create(je,Le)}}})();else if(k&&"function"==typeof k.signRequest)gr.info("ServiceClient: creating signing policy from provided credentials"),se=Xo(k);else if(null!=k)throw new Error("The credentials argument must implement the TokenCredential interface");if(gr.info("ServiceClient: using default request policies"),W=function(H,k){const L=[];k.generateClientRequestIdHeader&&L.push(to(k.clientRequestIdHeaderName)),H&&L.push(H);const W=it(k.userAgentHeaderName,ia),se=it(k.userAgent,Ui);return W&&se&&L.push(Ci({key:W,value:se})),L.push(Ct()),L.push(function(H=30){return{create:(k,L)=>new Ht(k,L,H)}}(k.rpRegistrationRetryTimeout)),k.noRetryPolicy||(L.push(Qo()),L.push(Xr()),L.push(Bi())),L.push(pr(k.deserializationContentTypes)),v.UG&&L.push(Io()),L.push(Kt({logger:gr.info})),L}(se,L),L.requestPolicyFactories){const ye=L.requestPolicyFactories(W);ye&&(W=ye)}}this._requestPolicyFactories=W}sendRequest(k){if(null==k||"object"!=typeof k)throw new Error("options cannot be null or undefined and it must be of type object.");let L;try{!function(H){if(H&&"object"==typeof H){const k=H;if("string"==typeof k.url&&"string"==typeof k.method&&"object"==typeof k.headers&&_(k.headers)&&"function"==typeof k.validateRequestProperties&&"function"==typeof k.prepare&&"function"==typeof k.clone)return!0}return!1}(k)?(L=new we,L=L.prepare(k)):(k.validateRequestProperties(),L=k)}catch(se){return Promise.reject(se)}let W=this._httpClient;if(this._requestPolicyFactories&&this._requestPolicyFactories.length>0)for(let se=this._requestPolicyFactories.length-1;se>=0;--se)W=this._requestPolicyFactories[se].create(W,this._requestPolicyOptions);return W.sendRequest(L)}sendOperationRequest(k,L,W){var se=this;return(0,ut.Z)(function*(){var ye;"function"==typeof k.options&&(W=k.options,k.options=void 0);const Oe=null===(ye=k.options)||void 0===ye?void 0:ye.serializerOptions,Pe=new we;let Be;try{const Le=L.baseUrl||se.baseUri;if(!Le)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a baseUri string property that contains the base URL to use.");Pe.method=L.httpMethod,Pe.operationSpec=L;const rt=re.UK.parse(Le);if(L.path&&rt.appendPath(L.path),L.urlParameters&&L.urlParameters.length>0)for(const ht of L.urlParameters){let ft=tr(se,k,ht,L.serializer);ft=L.serializer.serialize(ht.mapper,ft,Ar(ht),Oe),ht.skipEncoding||(ft=encodeURIComponent(ft)),rt.replaceAll(`{${ht.mapper.serializedName||Ar(ht)}}`,ft)}if(L.queryParameters&&L.queryParameters.length>0)for(const ht of L.queryParameters){let ft=tr(se,k,ht,L.serializer);if(null!=ft){if(ft=L.serializer.serialize(ht.mapper,ft,Ar(ht),Oe),null!=ht.collectionFormat)if(ht.collectionFormat===ar.Multi){if(0===ft.length)continue;for(const qt in ft){const Jt=ft[qt];ft[qt]=null==Jt?"":Jt.toString()}}else(ht.collectionFormat===ar.Ssv||ht.collectionFormat===ar.Tsv)&&(ft=ft.join(ht.collectionFormat));if(!ht.skipEncoding)if(Array.isArray(ft))for(const qt in ft)null!=ft[qt]&&(ft[qt]=encodeURIComponent(ft[qt]));else ft=encodeURIComponent(ft);null!=ht.collectionFormat&&ht.collectionFormat!==ar.Multi&&ht.collectionFormat!==ar.Ssv&&ht.collectionFormat!==ar.Tsv&&(ft=ft.join(ht.collectionFormat)),rt.setQueryParameter(ht.mapper.serializedName||Ar(ht),ft)}}Pe.url=rt.toString();const pt=L.contentType||se.requestContentType;if(pt&&L.requestBody&&Pe.headers.set("Content-Type",pt),L.headerParameters)for(const ht of L.headerParameters){let ft=tr(se,k,ht,L.serializer);if(null!=ft){ft=L.serializer.serialize(ht.mapper,ft,Ar(ht),Oe);const qt=ht.mapper.headerCollectionPrefix;if(qt)for(const Jt of Object.keys(ft))Pe.headers.set(qt+Jt,ft[Jt]);else Pe.headers.set(ht.mapper.serializedName||Ar(ht),ft)}}const lt=k.options;if(lt){if(lt.customHeaders)for(const ht in lt.customHeaders)Pe.headers.set(ht,lt.customHeaders[ht]);lt.abortSignal&&(Pe.abortSignal=lt.abortSignal),lt.timeout&&(Pe.timeout=lt.timeout),lt.onUploadProgress&&(Pe.onUploadProgress=lt.onUploadProgress),lt.onDownloadProgress&&(Pe.onDownloadProgress=lt.onDownloadProgress),lt.spanOptions&&(Pe.spanOptions=lt.spanOptions),lt.tracingContext&&(Pe.tracingContext=lt.tracingContext),null!=lt.shouldDeserialize&&(Pe.shouldDeserialize=lt.shouldDeserialize)}let Pt,_t;Pe.withCredentials=se._withCredentials,function(H,k,L,W){var se,ye,Oe,Pe,Be,je;const Le=null!==(ye=null===(se=L.options)||void 0===se?void 0:se.serializerOptions)&&void 0!==ye?ye:{},rt={rootName:null!==(Oe=Le.rootName)&&void 0!==Oe?Oe:"",includeRoot:null!==(Pe=Le.includeRoot)&&void 0!==Pe&&Pe,xmlCharKey:null!==(Be=Le.xmlCharKey)&&void 0!==Be?Be:I.I},pt=Le.xmlCharKey;if(W.requestBody&&W.requestBody.mapper){k.body=tr(H,L,W.requestBody,W.serializer);const lt=W.requestBody.mapper,{required:Pt,xmlName:_t,xmlElementName:ht,serializedName:ft,xmlNamespace:qt,xmlNamespacePrefix:Jt}=lt,yr=lt.type.name;try{if(null!=k.body||Pt){const ji=Ar(W.requestBody);k.body=W.serializer.serialize(lt,k.body,ji,rt);const Lr=yr===ne.Stream;if(W.isXML){const uo=Jt?`xmlns:${Jt}`:"xmlns",lo=function(H,k,L,W,se){if(H&&!["Composite","Sequence","Dictionary"].includes(L)){const ye={};return ye[se.xmlCharKey]=W,ye[I.c]={[k]:H},ye}return W}(qt,uo,yr,k.body,rt);yr===ne.Sequence?k.body=Jn(v.WQ(lo,ht||_t||ft,uo,qt),{rootName:_t||ft,xmlCharKey:pt}):Lr||(k.body=Jn(lo,{rootName:_t||ft,xmlCharKey:pt}))}else{if(yr===ne.String&&((null===(je=W.contentType)||void 0===je?void 0:je.match("text/plain"))||"text"===W.mediaType))return;Lr||(k.body=JSON.stringify(k.body))}}}catch(ji){throw new Error(`Error "${ji.message}" occurred in serializing the payload - ${JSON.stringify(ft,void 0,"  ")}.`)}}else if(W.formDataParameters&&W.formDataParameters.length>0){k.formData={};for(const lt of W.formDataParameters){const Pt=tr(H,L,lt,W.serializer);if(null!=Pt){const _t=lt.mapper.serializedName||Ar(lt);k.formData[_t]=W.serializer.serialize(lt.mapper,Pt,Ar(lt),rt)}}}}(se,Pe,k,L),void 0===Pe.streamResponseStatusCodes&&(Pe.streamResponseStatusCodes=function(H){const k=new Set;for(const L in H.responses){const W=H.responses[L];W.bodyMapper&&W.bodyMapper.type.name===ne.Stream&&k.add(Number(L))}return k}(L));try{Pt=yield se.sendRequest(Pe)}catch(ht){_t=ht}_t?(_t.response&&(_t.details=en(_t.response,L.responses[_t.statusCode]||L.responses.default)),Be=Promise.reject(_t)):Be=Promise.resolve(en(Pt,L.responses[Pt.status]))}catch(Le){Be=Promise.reject(Le)}const je=W;return je&&Be.then(Le=>je(null,Le._response.parsedBody,Le._response.request,Le._response)).catch(Le=>je(Le)),Be})()}}function it(H,k){let L;return"string"==typeof H?L=H:(L=k(),"function"==typeof H&&(L=H(L))),L}function Qt(H,k){const L=[];let W;if(H.sendStreamingJson&&L.push({create:(H,k)=>new Nu(H,k)}),H.userAgentOptions&&H.userAgentOptions.userAgentPrefix){const je=[];je.push(H.userAgentOptions.userAgentPrefix);const Le=Ui();-1===je.indexOf(Le)&&je.push(Le),W=je.join(" ")}const se=Object.assign(Object.assign({},vn),H.keepAliveOptions),ye=Object.assign(Object.assign({},Pu),H.retryOptions),Oe=Object.assign(Object.assign({},Eo),H.redirectOptions);v.UG&&L.push(Io());const Pe=Object.assign(Object.assign({},Xi),H.deserializationOptions),Be=Object.assign({},H.loggingOptions);return L.push(Sr({userAgent:W}),an(se),Ci({value:W}),to(),pr(Pe.expectedContentTypes),Bi(),Xr(),Qo(ye.maxRetries,ye.retryDelayInMs,ye.maxRetryDelayInMs)),Oe.handleRedirects&&L.push(Ct(Oe.maxRetries)),k&&L.push(k),L.push(Kt(Be)),v.UG&&!1===H.decompressResponse&&L.push(Zo()),{httpClient:H.httpClient,requestPolicyFactories:L}}function tr(H,k,L,W){return pn(H,k,L.parameterPath,L.mapper,W)}function pn(H,k,L,W,se){var ye;let Oe;"string"==typeof L&&(L=[L]);const Pe=null===(ye=k.options)||void 0===ye?void 0:ye.serializerOptions;if(Array.isArray(L)){if(L.length>0){if(W.isConstant)Oe=W.defaultValue;else{let je=Nr(k,L);je.propertyFound||(je=Nr(H,L));let Le=!1;je.propertyFound||(Le=W.required||"options"===L[0]&&2===L.length),Oe=Le?W.defaultValue:je.propertyValue}const Be=wn(L,W);se.serialize(W,Oe,Be,Pe)}}else{W.required&&(Oe={});for(const Be in L){const je=W.type.modelProperties[Be],Le=L[Be],rt=pn(H,k,Le,je,se),pt=wn(Le,je);se.serialize(je,rt,pt,Pe),null!=rt&&(Oe||(Oe={}),Oe[Be]=rt)}}return Oe}function Nr(H,k){const L={propertyFound:!1};let W=0;for(;W<k.length;++W){const se=k[W];if(null==H||!(se in H))break;H=H[se]}return W===k.length&&(L.propertyValue=H,L.propertyFound=!0),L}function en(H,k){const L=H.parsedHeaders,W=k&&k.bodyMapper,se=ye=>Object.defineProperty(ye,"_response",{value:H});if(W){const ye=W.type.name;if("Stream"===ye)return se(Object.assign(Object.assign({},L),{blobBody:H.blobBody,readableStreamBody:H.readableStreamBody}));const Oe="Composite"===ye&&W.type.modelProperties||{},Pe=Object.keys(Oe).some(Be=>""===Oe[Be].serializedName);if("Sequence"===ye||Pe){const Be=[...H.parsedBody||[]];for(const je of Object.keys(Oe))Oe[je].serializedName&&(Be[je]=H.parsedBody[je]);if(L)for(const je of Object.keys(L))Be[je]=L[je];return se(Be),Be}if("Composite"===ye||"Dictionary"===ye)return se(Object.assign(Object.assign({},L),H.parsedBody))}return W||"HEAD"===H.request.method||v.ty(H.parsedBody)?se(Object.assign(Object.assign({},L),{body:H.parsedBody})):se(Object.assign(Object.assign({},L),H.parsedBody))}function xr(H){return(0,Ro.q)(H)}class ao{constructor(k=12e4){this.cachedToken=void 0,this.tokenRefreshBufferMs=k}setCachedToken(k){this.cachedToken=k}getCachedToken(){return this.cachedToken&&Date.now()+this.tokenRefreshBufferMs>=this.cachedToken.expiresOnTimestamp&&(this.cachedToken=void 0),this.cachedToken}}class ni{constructor(k,L,W=3e4){this.credential=k,this.scopes=L,this.requiredMillisecondsBeforeNewRefresh=W,this.lastCalled=0}isReady(){return!this.lastCalled||Date.now()-this.lastCalled>this.requiredMillisecondsBeforeNewRefresh}getToken(k){var L=this;return(0,ut.Z)(function*(){L.lastCalled=Date.now();const W=yield L.credential.getToken(L.scopes,k);return L.promise=void 0,W||void 0})()}refresh(k){return this.promise||(this.promise=this.getToken(k)),this.promise}}const Mo=jn.g.HeaderConstants;class Hn{constructor(k,L,W="Basic"){if(this.authorizationScheme="Basic",null==k||"string"!=typeof k.valueOf())throw new Error("userName cannot be null or undefined and must be of type string.");if(null==L||"string"!=typeof L.valueOf())throw new Error("password cannot be null or undefined and must be of type string.");this.userName=k,this.password=L,this.authorizationScheme=W}signRequest(k){const W=`${this.authorizationScheme} ${H=`${this.userName}:${this.password}`,btoa(H)}`;var H;return k.headers||(k.headers=new h),k.headers.set(Mo.AUTHORIZATION,W),Promise.resolve(k)}}class bi{constructor(k){if(!k||k&&!k.inHeader&&!k.inQuery)throw new Error('options cannot be null or undefined. Either "inHeader" or "inQuery" property of the options object needs to be provided.');this.inHeader=k.inHeader,this.inQuery=k.inQuery}signRequest(k){if(!k)return Promise.reject(new Error('webResource cannot be null or undefined and must be of type "object".'));if(this.inHeader){k.headers||(k.headers=new h);for(const L in this.inHeader)k.headers.set(L,this.inHeader[L])}if(this.inQuery){if(!k.url)return Promise.reject(new Error("url cannot be null in the request object."));k.url.indexOf("?")<0&&(k.url+="?");for(const L in this.inQuery)k.url.endsWith("?")||(k.url+="&"),k.url+=`${L}=${this.inQuery[L]}`}return Promise.resolve(k)}}class Ei extends bi{constructor(k){if(!k||k&&"string"!=typeof k)throw new Error("topicKey cannot be null or undefined and must be of type string.");super({inHeader:{"aeg-sas-key":k}})}}u(3369)},1138:(K,m,u)=>{"use strict";u.d(m,{M:()=>s});var s=(()=>{return(_=s||(s={}))[_.OFF=0]="OFF",_[_.ERROR=1]="ERROR",_[_.WARNING=2]="WARNING",_[_.INFO=3]="INFO",s;var _})()},6354:(K,m,u)=>{"use strict";u.d(m,{v:()=>b});var s=u(8239),_=u(2462),h=u(8006),p=u(969);const E={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4};function v(){return(v=(0,s.Z)(function*(c,d,C){function w(){return g.apply(this,arguments)}function g(){return(g=(0,s.Z)(function*(){if(!(Date.now()<C)){const M=yield c();if(null===M)throw new Error("Failed to refresh access token.");return M}try{return yield c()}catch(M){return null}})).apply(this,arguments)}let T=yield w();for(;null===T;)yield(0,p.g)(d),T=yield w();return T})).apply(this,arguments)}function b(c,d){const C=function(c,d,C){let w=null,g=null;const T=Object.assign(Object.assign({},E),C),M={get isRefreshing(){return null!==w},get shouldRefresh(){var S;return!M.isRefreshing&&(null!==(S=null==g?void 0:g.expiresOnTimestamp)&&void 0!==S?S:0)-T.refreshWindowInMs<Date.now()},get mustRefresh(){return null===g||g.expiresOnTimestamp-T.forcedRefreshWindowInMs<Date.now()}};function R(S){var N;return M.isRefreshing||(w=function(c,d,C){return v.apply(this,arguments)}(()=>c.getToken(d,S),T.retryIntervalInMs,null!==(N=null==g?void 0:g.expiresOnTimestamp)&&void 0!==N?N:Date.now()).then(y=>(w=null,g=y,g)).catch(y=>{throw w=null,g=null,y})),w}return function(){var S=(0,s.Z)(function*(N){return M.mustRefresh?R(N):(M.shouldRefresh&&R(N),g)});return function(N){return S.apply(this,arguments)}}()}(c,d);class w extends _.U{constructor(T,M){super(T,M)}sendRequest(T){var M=this;return(0,s.Z)(function*(){if(!T.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");const{token:R}=yield C({abortSignal:T.abortSignal,tracingOptions:{tracingContext:T.tracingContext}});return T.headers.set(h.g.HeaderConstants.AUTHORIZATION,`Bearer ${R}`),M._nextPolicy.sendRequest(T)})()}}return{create:(g,T)=>new w(g,T)}}},2462:(K,m,u)=>{"use strict";u.d(m,{U:()=>_,_:()=>h});var s=u(1138);class _{constructor(E,f){this._nextPolicy=E,this._options=f}shouldLog(E){return this._options.shouldLog(E)}log(E,f){this._options.log(E,f)}}class h{constructor(E){this._logger=E}shouldLog(E){return!!this._logger&&E!==s.M.OFF&&E<=this._logger.minimumLogLevel}log(E,f){this._logger&&this.shouldLog(E)&&this._logger.log(E,f)}}},369:(K,m,u)=>{"use strict";u.d(m,{$4:()=>_,UK:()=>h});var s=u(7694);class _{constructor(){this._rawQuery={}}any(){return Object.keys(this._rawQuery).length>0}keys(){return Object.keys(this._rawQuery)}set(A,F){const q=F;if(A)if(null!=q){const j=Array.isArray(q)?q:q.toString();this._rawQuery[A]=j}else delete this._rawQuery[A]}get(A){return A?this._rawQuery[A]:void 0}toString(){let A="";for(const F in this._rawQuery){A&&(A+="&");const q=this._rawQuery[F];if(Array.isArray(q)){const j=[];for(const ue of q)j.push(`${F}=${ue}`);A+=j.join("&")}else A+=`${F}=${q}`}return A}static parse(A){const F=new _;if(A){A.startsWith("?")&&(A=A.substring(1));let q="ParameterName",j="",ue="";for(let ee=0;ee<A.length;++ee){const $=A[ee];switch(q){case"ParameterName":switch($){case"=":q="ParameterValue";break;case"&":j="",ue="";break;default:j+=$}break;case"ParameterValue":switch($){case"&":F.set(j,ue),j="",ue="",q="ParameterName";break;default:ue+=$}break;default:throw new Error("Unrecognized URLQuery parse state: "+q)}}"ParameterValue"===q&&F.set(j,ue)}return F}}class h{setScheme(A){A?this.set(A,"SCHEME"):this._scheme=void 0}getScheme(){return this._scheme}setHost(A){A?this.set(A,"SCHEME_OR_HOST"):this._host=void 0}getHost(){return this._host}setPort(A){null==A||""===A?this._port=void 0:this.set(A.toString(),"PORT")}getPort(){return this._port}setPath(A){if(A){const F=A.indexOf("://");if(-1!==F){const q=A.lastIndexOf("/",F);this.set(-1===q?A:A.substr(q+1),"SCHEME")}else this.set(A,"PATH")}else this._path=void 0}appendPath(A){if(A){let F=this.getPath();F&&(F.endsWith("/")||(F+="/"),A.startsWith("/")&&(A=A.substring(1)),A=F+A),this.set(A,"PATH")}}getPath(){return this._path}setQuery(A){this._query=A?_.parse(A):void 0}setQueryParameter(A,F){A&&(this._query||(this._query=new _),this._query.set(A,F))}getQueryParameterValue(A){return this._query?this._query.get(A):void 0}getQuery(){return this._query?this._query.toString():void 0}set(A,F){const q=new f(A,F);for(;q.next();){const j=q.current();let ue;if(j)switch(j.type){case"SCHEME":this._scheme=j.text||void 0;break;case"HOST":this._host=j.text||void 0;break;case"PORT":this._port=j.text||void 0;break;case"PATH":ue=j.text||void 0,(!this._path||"/"===this._path||"/"!==ue)&&(this._path=ue);break;case"QUERY":this._query=_.parse(j.text);break;default:throw new Error(`Unrecognized URLTokenType: ${j.type}`)}}}toString(){let A="";return this._scheme&&(A+=`${this._scheme}://`),this._host&&(A+=this._host),this._port&&(A+=`:${this._port}`),this._path&&(this._path.startsWith("/")||(A+="/"),A+=this._path),this._query&&this._query.any()&&(A+=`?${this._query.toString()}`),A}replaceAll(A,F){A&&(this.setScheme((0,s.ko)(this.getScheme(),A,F)),this.setHost((0,s.ko)(this.getHost(),A,F)),this.setPort((0,s.ko)(this.getPort(),A,F)),this.setPath((0,s.ko)(this.getPath(),A,F)),this.setQuery((0,s.ko)(this.getQuery(),A,F)))}static parse(A){const F=new h;return F.set(A,"SCHEME_OR_HOST"),F}}class p{constructor(A,F){this.text=A,this.type=F}static scheme(A){return new p(A,"SCHEME")}static host(A){return new p(A,"HOST")}static port(A){return new p(A,"PORT")}static path(A){return new p(A,"PATH")}static query(A){return new p(A,"QUERY")}}class f{constructor(A,F){this._text=A,this._textLength=A?A.length:0,this._currentState=null!=F?F:"SCHEME_OR_HOST",this._currentIndex=0}current(){return this._currentToken}next(){if(I(this))switch(this._currentState){case"SCHEME":!function(y){const A=function(y){return C(y,A=>function(y){const A=y.charCodeAt(0);return 48<=A&&A<=57||65<=A&&A<=90||97<=A&&A<=122}(A))}(y);y._currentToken=p.scheme(A),y._currentState=I(y)?"HOST":"DONE"}(this);break;case"SCHEME_OR_HOST":!function(y){const A=g(y,":","/","?");I(y)?":"===b(y)?"://"===d(y,3)?(y._currentToken=p.scheme(A),y._currentState="HOST"):(y._currentToken=p.host(A),y._currentState="PORT"):(y._currentToken=p.host(A),y._currentState="/"===b(y)?"PATH":"QUERY"):(y._currentToken=p.host(A),y._currentState="DONE")}(this);break;case"HOST":!function(y){"://"===d(y,3)&&c(y,3);const A=g(y,":","/","?");y._currentToken=p.host(A),y._currentState=I(y)?":"===b(y)?"PORT":"/"===b(y)?"PATH":"QUERY":"DONE"}(this);break;case"PORT":!function(y){":"===b(y)&&c(y);const A=g(y,"/","?");y._currentToken=p.port(A),y._currentState=I(y)?"/"===b(y)?"PATH":"QUERY":"DONE"}(this);break;case"PATH":!function(y){const A=g(y,"?");y._currentToken=p.path(A),y._currentState=I(y)?"QUERY":"DONE"}(this);break;case"QUERY":!function(y){"?"===b(y)&&c(y);const A=function(y){let A="";return y._currentIndex<y._textLength&&(A=y._text.substring(y._currentIndex),y._currentIndex=y._textLength),A}(y);y._currentToken=p.query(A),y._currentState="DONE"}(this);break;default:throw new Error(`Unrecognized URLTokenizerState: ${this._currentState}`)}else this._currentToken=void 0;return!!this._currentToken}}function I(y){return y._currentIndex<y._textLength}function b(y){return y._text[y._currentIndex]}function c(y,A){I(y)&&(A||(A=1),y._currentIndex+=A)}function d(y,A){let F=y._currentIndex+A;return y._textLength<F&&(F=y._textLength),y._text.substring(y._currentIndex,F)}function C(y,A){let F="";for(;I(y);){const q=b(y);if(!A(q))break;F+=q,c(y)}return F}function g(y,...A){return C(y,F=>-1===A.indexOf(F))}},8006:(K,m,u)=>{"use strict";u.d(m,{g:()=>s});const s={coreHttpVersion:"2.2.3",HTTP:"http:",HTTPS:"https:",HTTP_PROXY:"HTTP_PROXY",HTTPS_PROXY:"HTTPS_PROXY",NO_PROXY:"NO_PROXY",ALL_PROXY:"ALL_PROXY",HttpConstants:{HttpVerbs:{PUT:"PUT",GET:"GET",DELETE:"DELETE",POST:"POST",MERGE:"MERGE",HEAD:"HEAD",PATCH:"PATCH"},StatusCodes:{TooManyRequests:429,ServiceUnavailable:503}},HeaderConstants:{AUTHORIZATION:"authorization",AUTHORIZATION_SCHEME:"Bearer",RETRY_AFTER:"Retry-After",USER_AGENT:"User-Agent"}}},969:(K,m,u)=>{"use strict";u.d(m,{g:()=>p});var s=u(4637);function p(E,f,v){return new Promise((I,b)=>{let c,d;const C=()=>b(new s._((null==v?void 0:v.abortErrorMsg)?null==v?void 0:v.abortErrorMsg:"The operation was aborted.")),w=()=>{(null==v?void 0:v.abortSignal)&&d&&v.abortSignal.removeEventListener("abort",d)};if(d=()=>(function(E){return null!=E}(c)&&clearTimeout(c),w(),C()),(null==v?void 0:v.abortSignal)&&v.abortSignal.aborted)return C();c=setTimeout(()=>{w(),I(f)},E),(null==v?void 0:v.abortSignal)&&v.abortSignal.addEventListener("abort",d)})}},4510:(K,m,u)=>{"use strict";u.d(m,{c:()=>s,I:()=>_});const s="$",_="_"},7694:(K,m,u)=>{"use strict";u.d(m,{ef:()=>ue,Hh:()=>R,Zf:()=>A,Rl:()=>y,_9:()=>$,UG:()=>T,Kn:()=>te,ty:()=>ce,TP:()=>P,WQ:()=>j,_Q:()=>F,yj:()=>q,ko:()=>ie,Fl:()=>N,eg:()=>S});var _,s=u(4510),h=new Uint8Array(16);function p(){if(!_&&!(_="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _(h)}const E=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,v=function(Y){return"string"==typeof Y&&E.test(Y)};for(var I=[],b=0;b<256;++b)I.push((b+256).toString(16).substr(1));const w=function(Y,le,Z){var z=(Y=Y||{}).random||(Y.rng||p)();if(z[6]=15&z[6]|64,z[8]=63&z[8]|128,le){Z=Z||0;for(var ne=0;ne<16;++ne)le[Z+ne]=z[ne];return le}return function(Y){var le=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Z=(I[Y[le+0]]+I[Y[le+1]]+I[Y[le+2]]+I[Y[le+3]]+"-"+I[Y[le+4]]+I[Y[le+5]]+"-"+I[Y[le+6]]+I[Y[le+7]]+"-"+I[Y[le+8]]+I[Y[le+9]]+"-"+I[Y[le+10]]+I[Y[le+11]]+I[Y[le+12]]+I[Y[le+13]]+I[Y[le+14]]+I[Y[le+15]]).toLowerCase();if(!v(Z))throw TypeError("Stringified UUID is invalid");return Z}(z)},g=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i,T="undefined"!=typeof process&&!!process.version&&!!process.versions&&!!process.versions.node;function R(Y){return encodeURIComponent(Y).replace(/!/g,"%21").replace(/"/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function S(Y){const le={};return le.body=Y.bodyAsText,le.headers=Y.headers,le.status=Y.status,le}function N(Y){const le=Y.clone();return le.headers&&le.headers.remove("authorization"),le}function P(Y){return g.test(Y)}function y(){return w()}function A(Y,le){let Z=Promise.resolve(le);return Y.forEach(z=>{Z=Z.then(z)}),Z}function F(Y){if("function"!=typeof Y.then)throw new Error("The provided input is not a Promise.");return le=>{Y.then(Z=>le(void 0,Z)).catch(Z=>{le(Z)})}}function q(Y){if("function"!=typeof Y.then)throw new Error("The provided input is not a Promise.");return le=>{Y.then(Z=>process.nextTick(le,void 0,Z.parsedBody,Z.request,Z)).catch(Z=>{process.nextTick(le,Z)})}}function j(Y,le,Z,z){if(Array.isArray(Y)||(Y=[Y]),!Z||!z)return{[le]:Y};const ne={[le]:Y};return ne[s.c]={[Z]:z},ne}function ue(Y,le){const Z=Y;le.forEach(z=>{Object.getOwnPropertyNames(z.prototype).forEach(ne=>{Z.prototype[ne]=z.prototype[ne]})})}const ee=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function $(Y){return ee.test(Y)}function ie(Y,le,Z){return Y&&le?Y.split(le).join(Z||""):Y}function ce(Y){return"object"!=typeof Y&&"function"!=typeof Y||null===Y}function te(Y){return!("object"!=typeof Y||null===Y||Array.isArray(Y)||Y instanceof RegExp||Y instanceof Date)}},1259:(K,m,u)=>{"use strict";u.d(m,{q:()=>p});var s=u(1643),_=u(8853);function p(E){return function(f,v){const I=(0,s.Yz)(),b=(null==v?void 0:v.tracingOptions)||{},c=Object.assign({kind:s.MU.INTERNAL},b.spanOptions),d=E.packagePrefix?`${E.packagePrefix}.${f}`:f;let C;C=function(){var E;if("undefined"==typeof process)return!1;const f=null===(E=process.env.AZURE_TRACING_DISABLED)||void 0===E?void 0:E.toLowerCase();return"false"!==f&&"0"!==f&&Boolean(f)}()?_.g4.wrapSpanContext(_.Rr):I.startSpan(d,c,b.tracingContext),E.namespace&&C.setAttribute("az.namespace",E.namespace);let w=b.spanOptions||{};C.isRecording()&&E.namespace&&(w=Object.assign(Object.assign({},b.spanOptions),{attributes:Object.assign(Object.assign({},c.attributes),{"az.namespace":E.namespace})}));const g=Object.assign(Object.assign({},b),{spanOptions:w,tracingContext:(0,s.WZ)(b.tracingContext||s.Do.active(),C)});return{span:C,updatedOptions:Object.assign(Object.assign({},v),{tracingOptions:g})}}}},1643:(K,m,u)=>{"use strict";u.d(m,{MU:()=>_,WZ:()=>p,BM:()=>v,Yz:()=>I,Do:()=>b,Qn:()=>c});var s=u(8853),_=(()=>{return(d=_||(_={}))[d.INTERNAL=0]="INTERNAL",d[d.SERVER=1]="SERVER",d[d.CLIENT=2]="CLIENT",d[d.PRODUCER=3]="PRODUCER",d[d.CONSUMER=4]="CONSUMER",_;var d})();function p(d,C){return s.g4.setSpan(d,C)}function v(d){return s.g4.isSpanContextValid(d)}function I(d,C){return s.g4.getTracer(d||"azure/core-tracing",C)}const b=s.Do;var c=(()=>{return(d=c||(c={}))[d.UNSET=0]="UNSET",d[d.OK=1]="OK",d[d.ERROR=2]="ERROR",c;var d})()},4874:(K,m,u)=>{"use strict";function h(p){const E=[];if(p.traceId||E.push("traceId"),p.spanId||E.push("spanId"),E.length)return;const v=(p.traceFlags||0).toString(16);return`00-${p.traceId}-${p.spanId}-${1===v.length?`0${v}`:v}`}u.d(m,{O:()=>h})},1326:(K,m,u)=>{"use strict";u.d(m,{YR:()=>F});const _="undefined"!=typeof process&&process.env&&process.env.DEBUG||void 0;let h,p=[],E=[];const f=[];_&&I(_);const v=Object.assign($=>d($),{enable:I,enabled:b,disable:function(){const $=h||"";return I(""),$},log:function(...$){if($.length>0){const ie=String($[0]);ie.includes(":error")?console.error(...$):ie.includes(":warning")?console.warn(...$):ie.includes(":info")?console.info(...$):(ie.includes(":verbose"),console.debug(...$))}}});function I($){h=$,p=[],E=[];const ie=/\*/g,ce=$.split(",").map(Te=>Te.trim().replace(ie,".*?"));for(const Te of ce)Te.startsWith("-")?E.push(new RegExp(`^${Te.substr(1)}$`)):p.push(new RegExp(`^${Te}$`));for(const Te of f)Te.enabled=b(Te.namespace)}function b($){if($.endsWith("*"))return!0;for(const ie of E)if(ie.test($))return!1;for(const ie of p)if(ie.test($))return!0;return!1}function d($){const ie=Object.assign(function(...Te){!ie.enabled||(Te.length>0&&(Te[0]=`${$} ${Te[0]}`),ie.log(...Te))},{enabled:b($),destroy:C,log:v.log,namespace:$,extend:w});return f.push(ie),ie}function C(){const $=f.indexOf(this);return $>=0&&(f.splice($,1),!0)}function w($){const ie=d(`${this.namespace}:${$}`);return ie.log=this.log,ie}const g=v,T=new Set,M="undefined"!=typeof process&&process.env&&process.env.AZURE_LOG_LEVEL||void 0;let R;const S=g("azure");S.log=(...$)=>{g.log(...$)};const N=["verbose","info","warning","error"];M&&(ee(M)?function($){if($&&!ee($))throw new Error(`Unknown log level '${$}'. Acceptable values: ${N.join(",")}`);R=$;const ie=[];for(const ce of T)ue(ce)&&ie.push(ce.namespace);g.enable(ie.join(","))}(M):console.error(`AZURE_LOG_LEVEL set to unknown log level '${M}'; logging is not enabled. Acceptable values: ${N.join(", ")}.`));const A={verbose:400,info:300,warning:200,error:100};function F($){const ie=S.extend($);return q(S,ie),{error:j(ie,"error"),warning:j(ie,"warning"),info:j(ie,"info"),verbose:j(ie,"verbose")}}function q($,ie){ie.log=(...ce)=>{$.log(...ce)}}function j($,ie){const ce=Object.assign($.extend(ie),{level:ie});if(q($,ce),ue(ce)){const Te=g.disable();g.enable(Te+","+ce.namespace)}return T.add(ce),ce}function ue($){return!!(R&&A[$.level]<=A[R])}function ee($){return N.includes($)}},5413:(K,m,u)=>{"use strict";var s=u(1127);Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var _=s(u(8884)),h=s(u(1819)),p=u(2e3),E=function f(){(0,_.default)(this,f)};m.default=E,(0,h.default)(E,"requiredOmnichannelConfigurationParameters",["orgUrl","orgId","widgetId"]),(0,h.default)(E,"defaultHeaders",{"Content-Type":"application/json"}),(0,h.default)(E,"bypassCacheHeaders",{"cache-control":"no-store, must-revalidate, no-cache"}),(0,h.default)(E,"defaultChannelId",p.ChannelId.LCW),(0,h.default)(E,"defaultLocale","en-us"),(0,h.default)(E,"noContentStatusCode",204),(0,h.default)(E,"sensitiveProperties",["AuthenticatedUserToken"]),(0,h.default)(E,"transactionid","transaction-id"),(0,h.default)(E,"customerDisplayName","customerDisplayName")},2e3:(K,m)=>{"use strict";var u,v,s,_,h,p,E,f;Object.defineProperty(m,"__esModule",{value:!0}),m.LiveChatVersion=m.OCSDKTelemetryEvent=m.ChannelId=m.OperatingSystem=m.DeviceType=m.Browser=m.BrowserVendor=void 0,m.BrowserVendor=u,(v=u||(m.BrowserVendor=u={})).IE="IE",v.CHROME="Chrome",v.FIREFOX="Firefox",v.SAFARI="Safari",v.EDGE="Edge",v.EDGE_CHROMIUM="Edg",v.OPERA="Opera",v.UNKNOWN="Unknown",m.Browser=s,function(v){v[v.Chrome=0]="Chrome",v[v.Firefox=1]="Firefox",v[v.Ie=2]="Ie",v[v.Edge=3]="Edge",v[v.Safari=4]="Safari",v[v.None=5]="None"}(s||(m.Browser=s={})),m.DeviceType=_,function(v){v.Desktop="Desktop",v.Mobile="Mobile",v.Tablet="Tablet"}(_||(m.DeviceType=_={})),m.OperatingSystem=h,function(v){v.WINDOWS="Windows",v.MACOSX="Mac OS X",v.WINDOWS_PHONE="Windows Phone",v.WINDOWS_RT="Windows RT",v.IOS="iOS",v.ANDROID="Android",v.LINUX="Linux",v.UNKNOWN="Unknown"}(h||(m.OperatingSystem=h={})),m.ChannelId=p,function(v){v.LCW="lcw",v.SMS="sms",v.FACEBOOK="facebook",v.WECHAT="wechat"}(p||(m.ChannelId=p={})),m.OCSDKTelemetryEvent=E,function(v){v.GETCHATCONFIG="GetChatConfig",v.GETCHATCONFIGSUCCESS="GetChatConfigSucceeded",v.GETRECONNECTABLECHATS="GetReconnnectableChats",v.GETRECONNECTAVAILABILITY="GetReconnnectableAvailability",v.GETCHATTOKENSTARTED="GetChatTokenStarted",v.GETCHATTOKENSUCCEEDED="GetChatTokenSucceeded",v.GETCHATTOKENFAILED="GetChatTokenFailed",v.GETLWISTATUSSTARTED="GetLwiStatusStarted",v.GETLWISTATUSSUCCEEDED="GetLwiStatusSucceeded",v.GETLWISTATUSFAILED="GetLwiStatusFailed",v.SESSIONINITSTARTED="SessionInitStarted",v.SESSIONINITSUCCEEDED="SessionInitSucceeded",v.SESSIONINITFAILED="SessionInitFailed",v.SESSIONCLOSESTARTED="SessionCloseStarted",v.SESSIONCLOSESUCCEEDED="SessionCloseSucceeded",v.SESSIONCLOSEFAILED="SessionCloseFailed",v.SUBMITPOSTCHATSTARTED="SubmitPostChatStarted",v.SUBMITPOSTCHATSUCCEEDED="SubmitPostChatSucceeded",v.SUBMITPOSTCHATFAILED="SubmitPostChatFailed",v.GETCHATTRANSCRIPTSTARTED="GetChatTranscriptStarted",v.GETCHATTRANSCRIPTSUCCEEDED="GetChatTranscriptSucceeded",v.GETCHATTRANSCRIPTFAILED="GetChatTranscriptFailed",v.EMAILTRANSCRIPTSTARTED="EmailTranscriptStarted",v.EMAILTRANSCRIPTSUCCEEDED="EmailTranscriptSucceeded",v.EMAILTRANSCRIPTFAILED="EmailTranscriptFailed",v.FETCHDATAMASKINGSTARTED="FetchDataMaskingStarted",v.FETCHDATAMASKINGSUCCEEDED="FetchDataMaskingSucceeded",v.FETCHDATAMASKINGFAILED="FetchDataMaskingFailed",v.SECONDARYCHANNELEVENTREQUESTSTARTED="SecondaryChannelEventRequestStarted",v.SECONDARYCHANNELEVENTREQUESTSUCCEEDED="SecondaryChannelEventRequestSucceeded",v.SECONDARYCHANNELEVENTREQUESTFAILED="SecondaryChannelEventRequestFailed",v.GETSURVEYINVITELINKSTARTED="GetSurveyInviteLinkStarted",v.GETSURVEYINVITELINKSUCCEEDED="GetSurveyInviteLinkSucceeded",v.GETSURVEYINVITELINKFAILED="GetSurveyInviteLinkFailed",v.VALIDATEAUTHCHATRECORDSTARTED="ValidateAuthChatRecordStarted",v.VALIDATEAUTHCHATRECORDSUCCEEDED="ValidateAuthChatRecordSucceeded",v.VALIDATEAUTHCHATRECORDFAILED="ValidateAuthChatRecordFailed",v.GETQUEUEAVAILABILITYSTARTED="GetQueueAvailabilityStarted",v.GETQUEUEAVAILABILITYSUCCEEDED="GetQueueAvailabilitySucceeded",v.GETQUEUEAVAILABILITYFAILED="GetQueueAvailabilityFailed",v.SENDTYPINGINDICATORFAILED="SendTypingIndicatorFailed",v.SENDTYPINGINDICATORSUCCEEDED="SendTypingIndicatorSucceeded"}(E||(m.OCSDKTelemetryEvent=E={})),m.LiveChatVersion=f,function(v){v[v.V1=1]="V1",v[v.V2=2]="V2"}(f||(m.LiveChatVersion=f={}))},3096:(K,m,u)=>{"use strict";var s=u(1127);Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var _=s(u(8884)),h=s(u(2805));m.default=function(){function E(){(0,_.default)(this,E)}return(0,h.default)(E,null,[{key:"OCSDKLOAD",get:function(){return"oc:sdk:load"}}]),E}()},4950:(K,m,u)=>{"use strict";var s=u(1127);Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var _=s(u(8884)),h=s(u(1819)),p=function E(){(0,_.default)(this,E)};m.default=p,(0,h.default)(p,"supportedLocales",["ar-sa","bg-bg","ca-es","cs-cz","da-dk","de-de","el-gr","en-us","es-es","et-ee","eu-es","fi-fi","fr-fr","gl-es","he-il","hi-in","hr-hr","hu-hu","id-id","it-it","ja-jp","kk-kz","ko-kr","lt-lt","lv-lv","ms-my","nb-no","nl-nl","pl-pl","pt-br","pt-pt","ro-ro","ru-ru","sk-sk","sl-si","sr-cyrl-cs","sr-latn-cs","sv-se","th-th","tr-tr","uk-ua","vi-vn","zh-cn","zh-hk","zh-tw"])},4162:(K,m,u)=>{"use strict";var s=u(1127);Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var _=s(u(8884)),h=s(u(2805)),p=s(u(1819)),E=s(u(7276));m.default=function(){function v(I){(0,_.default)(this,v),(0,p.default)(this,"logger",void 0),this.logger=I}return(0,h.default)(v,[{key:"log",value:function(b,c,d,C){if(this.isLoggingEnabled()){var w=E.default.GETTELEMETRYEVENTDATA(c,d,C);this.logEvent(b,w)}}},{key:"logEvent",value:function(b,c){this.isLoggingEnabled()&&setTimeout(this.logger.logClientSdkTelemetryEvent.bind(this.logger),0,b,c)}},{key:"isLoggingEnabled",value:function(){return!this.isNullOrUndefined(this.logger)}},{key:"isNullOrUndefined",value:function(b){return null==b}}]),v}()},2172:(K,m,u)=>{"use strict";var s=u(1127);Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var _=s(u(8884)),h=s(u(1819)),p=function E(){(0,_.default)(this,E)};m.default=p,(0,h.default)(p,"LiveChatConfigPath","livechatconnector/config"),(0,h.default)(p,"LiveChatSessionInitPath","livechatconnector/sessioninit"),(0,h.default)(p,"LiveChatAuthSessionInitPath","livechatconnector/auth/sessioninit"),(0,h.default)(p,"LiveChatGetChatTokenPath","livechatconnector/getchattoken"),(0,h.default)(p,"LiveChatv2GetChatTokenPath","livechatconnector/v2/getchattoken"),(0,h.default)(p,"LiveChatAuthGetChatTokenPath","livechatconnector/auth/getchattoken"),(0,h.default)(p,"LiveChatv2AuthGetChatTokenPath","livechatconnector/v2/auth/getchattoken"),(0,h.default)(p,"LiveChatSessionClosePath","livechatconnector/sessionclose"),(0,h.default)(p,"LiveChatAuthSessionClosePath","livechatconnector/auth/sessionclose"),(0,h.default)(p,"LiveChatSubmitPostChatPath","survey/submitpostchat"),(0,h.default)(p,"LiveChatAuthSubmitPostChatPath","survey/auth/submitpostchat"),(0,h.default)(p,"LiveChatGetSurveyInviteLinkPath","livechatconnector/getsurveyinvite"),(0,h.default)(p,"LiveChatAuthGetSurveyInviteLinkPath","livechatconnector/auth/getsurveyinvite"),(0,h.default)(p,"LiveChatGetChatTranscriptPath","livechatconnector/getchattranscripts"),(0,h.default)(p,"LiveChatv2GetChatTranscriptPath","livechatconnector/v2/getchattranscripts"),(0,h.default)(p,"LiveChatAuthGetChatTranscriptPath","livechatconnector/auth/getchattranscripts"),(0,h.default)(p,"LiveChatv2AuthGetChatTranscriptPath","livechatconnector/v2/auth/getchattranscripts"),(0,h.default)(p,"LiveChatTranscriptEmailRequestPath","livechatconnector/createemailrequest"),(0,h.default)(p,"LiveChatAuthTranscriptEmailRequestPath","livechatconnector/auth/createemailrequest"),(0,h.default)(p,"LiveChatFetchDataMaskingInfoPath","livechatconnector/fetchdatamaskinginfo"),(0,h.default)(p,"LiveChatSecondaryChannelEventPath","livechatconnector/secondarychannelevent"),(0,h.default)(p,"LiveChatAuthSecondaryChannelEventPath","livechatconnector/auth/secondarychannelevent"),(0,h.default)(p,"LiveChatLiveWorkItemDetailsPath","livechatconnector/getliveworkitemdetails"),(0,h.default)(p,"LiveChatAuthLiveWorkItemDetailsPath","livechatconnector/auth/getliveworkitemdetails"),(0,h.default)(p,"LiveChatGetReconnectableChatsPath","livechatconnector/auth/reconnectablechats"),(0,h.default)(p,"LiveChatReconnectAvailabilityPath","livechatconnector/reconnect"),(0,h.default)(p,"LiveChatValidateAuthChatMapRecordPath","livechatconnector/auth/validateauthchatmaprecord"),(0,h.default)(p,"GetQueueAvailabilityPath","livechatconnector/auth/getqueueavailability"),(0,h.default)(p,"SendTypingIndicatorPath","inbound/typingindicator/livechat/sendtypingindicator")},1858:(K,m,u)=>{"use strict";var s=u(1127);Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var _=s(u(8884)),h=s(u(1819)),p=function E(){(0,_.default)(this,E)};m.default=p,(0,h.default)(p,"authenticatedUserToken","AuthenticatedUserToken"),(0,h.default)(p,"authorization","Authorization"),(0,h.default)(p,"organizationId","OrganizationId"),(0,h.default)(p,"widgetAppId","widgetAppId"),(0,h.default)(p,"requestId","Request-Id")},6528:(K,m)=>{"use strict";var u,s;Object.defineProperty(m,"__esModule",{value:!0}),m.LogLevel=void 0,m.LogLevel=u,(s=u||(m.LogLevel=u={})).INFO="INFO",s.DEBUG="DEBUG",s.WARN="WARN",s.ERROR="ERROR"},8634:(K,m,u)=>{"use strict";var s=u(1127);Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var _=s(u(6533)),h=s(u(1907)),p=s(u(1298)),E=s(u(8884)),f=s(u(2805)),v=s(u(1819)),I=u(2e3),b=s(u(8686)),c=u(4717),d=s(u(5413)),C=u(6812),w=s(u(4950)),g=u(9569),T=u(6528),M=u(7169),R=s(u(2172)),S=s(u(1858)),N=u(3945),P=s(u(1729)),y=u(8566);function A($,ie){var ce=Object.keys($);if(Object.getOwnPropertySymbols){var Te=Object.getOwnPropertySymbols($);ie&&(Te=Te.filter(function(te){return Object.getOwnPropertyDescriptor($,te).enumerable})),ce.push.apply(ce,Te)}return ce}function F($){for(var ie=1;ie<arguments.length;ie++){var ce=null!=arguments[ie]?arguments[ie]:{};ie%2?A(Object(ce),!0).forEach(function(Te){(0,v.default)($,Te,ce[Te])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(ce)):A(Object(ce)).forEach(function(Te){Object.defineProperty($,Te,Object.getOwnPropertyDescriptor(ce,Te))})}return $}function q($,ie){var ce="undefined"!=typeof Symbol&&$[Symbol.iterator]||$["@@iterator"];if(!ce){if(Array.isArray($)||(ce=function($,ie){if($){if("string"==typeof $)return ue($,undefined);var ce=Object.prototype.toString.call($).slice(8,-1);if("Object"===ce&&$.constructor&&(ce=$.constructor.name),"Map"===ce||"Set"===ce)return Array.from($);if("Arguments"===ce||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ce))return ue($,undefined)}}($))||ie&&$&&"number"==typeof $.length){ce&&($=ce);var Te=0,te=function(){};return{s:te,n:function(){return Te>=$.length?{done:!0}:{done:!1,value:$[Te++]}},e:function(ne){throw ne},f:te}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Z,Y=!0,le=!1;return{s:function(){ce=ce.call($)},n:function(){var ne=ce.next();return Y=ne.done,ne},e:function(ne){le=!0,Z=ne},f:function(){try{!Y&&null!=ce.return&&ce.return()}finally{if(le)throw Z}}}}function ue($,ie){(null==ie||ie>$.length)&&(ie=$.length);for(var ce=0,Te=new Array(ie);ce<ie;ce++)Te[ce]=$[ce];return Te}var ee=function(){function $(ie){var ce=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$.defaultConfiguration,Te=arguments.length>2?arguments[2]:void 0;(0,E.default)(this,$),this.omnichannelConfiguration=ie,this.configuration=ce,this.logger=Te,(0,v.default)(this,"liveChatVersion",void 0),(!Object.keys(this.configuration).length||"object"!==(0,p.default)(ce))&&(this.configuration=$.defaultConfiguration);for(var te=0,Y=Object.keys($.defaultConfiguration);te<Y.length;te++){var le=Y[te];if(!this.configuration.hasOwnProperty(le))throw new Error("Missing '".concat(le,"' in SDKConfiguration"))}var Z=ie.channelId;if(!Object.values(I.ChannelId).includes(Z))throw new Error("Invalid channelId");var Ce,z=Object.keys(ie),ne=q(d.default.requiredOmnichannelConfigurationParameters);try{for(ne.s();!(Ce=ne.n()).done;){var we=Ce.value;if(!z.includes(we))throw new Error("Missing '".concat(we,"' in OmnichannelConfiguration"))}}catch(_e){ne.e(_e)}finally{ne.f()}this.liveChatVersion=I.LiveChatVersion.V1}return(0,f.default)($,[{key:"getChatConfig",value:(ie=(0,h.default)(_.default.mark(function Te(te){var Y,le,Z,z,ne,Ce,we,_e,re=arguments;return _.default.wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return Y=re.length>1&&void 0!==re[1]&&re[1],le=N.Timer.TIMER(),this.logger&&this.logger.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.GETCHATCONFIG,{RequestId:te},"Get Chat Config Started"),te||(te=(0,y.uuidv4)()),Z="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(R.default.LiveChatConfigPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"?requestId=").concat(te,"&channelId=").concat(this.omnichannelConfiguration.channelId),z=b.default.create(),(0,P.default)(z,{retries:this.configuration.maxRequestRetriesOnFailure}),ne={},Y&&(ne=F(F({},d.default.bypassCacheHeaders),ne)),me.next=11,z.get(Z,{headers:ne});case 11:return we=le.milliSecondsElapsed,(_e=(Ce=me.sent).data).LiveChatVersion&&_e.LiveChatVersion===I.LiveChatVersion.V2&&(this.liveChatVersion=_e.LiveChatVersion),_e.headers={},Ce.headers&&Ce.headers.date&&(_e.headers.date=Ce.headers.date),this.logger&&this.logger.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.GETCHATCONFIGSUCCESS,{RequestId:te,Region:Ce.data.Region,ElapsedTimeInMilliseconds:we,TransactionId:Ce.headers["transaction-id"]},"Get Chat config succeeded"),me.abrupt("return",_e);case 19:case"end":return me.stop()}},Te,this)})),function(Te){return ie.apply(this,arguments)})},{key:"getLWIDetails",value:function(){var ie=(0,h.default)(_.default.mark(function Te(te){var le,Z,z,ne,Ce,we,_e,re,Y=this,fe=arguments;return _.default.wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return le=fe.length>1&&void 0!==fe[1]?fe[1]:{},Z=N.Timer.TIMER(),this.logger&&this.logger.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.GETLWISTATUSSTARTED,{RequestId:te},"Get LWI Details Started"),te||(te=(0,y.uuidv4)()),z="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(R.default.LiveChatLiveWorkItemDetailsPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(te),ne=b.default.create(),(0,P.default)(ne,{retries:this.configuration.maxRequestRetriesOnFailure}),we=le.reconnectId,_e=d.default.defaultHeaders,(Ce=le.authenticatedUserToken)&&(z="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(R.default.LiveChatAuthLiveWorkItemDetailsPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(te),_e[S.default.authenticatedUserToken]=Ce),we&&(z+="/".concat(we)),z+="?channelId=".concat(this.omnichannelConfiguration.channelId),re={headers:_e,method:"GET",url:z},ve.abrupt("return",new Promise(function(){var be=(0,h.default)(_.default.mark(function Ie(ke,qe){var Re,xe,Ge,Ye;return _.default.wrap(function(We){for(;;)switch(We.prev=We.next){case 0:return We.prev=0,We.next=3,ne(re);case 3:xe=Z.milliSecondsElapsed,Ge=(Re=We.sent).data,Y.logger&&Y.logger.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.GETLWISTATUSSUCCEEDED,{RequestId:te,Region:Re.data.Region,ElapsedTimeInMilliseconds:xe,TransactionId:Re.headers["transaction-id"]},"Get LWI Details succeeded"),ke(Ge),We.next=18;break;case 10:if(We.prev=10,We.t0=We.catch(0),Ye=Z.milliSecondsElapsed,!Y.logger){We.next=17;break}return We.next=16,g.LoggingSanitizer.stripErrorSensitiveProperties(We.t0);case 16:Y.logger.log(T.LogLevel.ERROR,I.OCSDKTelemetryEvent.GETLWISTATUSFAILED,{RequestId:te,ExceptionDetails:We.t0,ElapsedTimeInMilliseconds:Ye},"Get LWI Details failed");case 17:qe();case 18:case"end":return We.stop()}},Ie,null,[[0,10]])}));return function(Ie,ke){return be.apply(this,arguments)}}()));case 14:case"end":return ve.stop()}},Te,this)}));return function(Te){return ie.apply(this,arguments)}}()},{key:"getChatToken",value:function(){var ie=(0,h.default)(_.default.mark(function Te(te){var le,Z,z,ne,Ce,we,_e,re,fe,me,Y=this,ve=arguments;return _.default.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(le=ve.length>1&&void 0!==ve[1]?ve[1]:{},Z=ve.length>2&&void 0!==ve[2]?ve[2]:0,z=N.Timer.TIMER(),ne=le.reconnectId,Ce=le.authenticatedUserToken,we=le.currentLiveChatVersion,this.logger&&this.logger.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.GETCHATTOKENSTARTED,{RequestId:te},"Get Chat Token Started"),!(Z<0)){Ie.next=7;break}throw new Error("Invalid currentRetryCount");case 7:return te||(te=(0,y.uuidv4)()),_e=d.default.defaultHeaders,re="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(R.default.LiveChatGetChatTokenPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(te),this.liveChatVersion===I.LiveChatVersion.V2||we&&we===I.LiveChatVersion.V2?(re="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(R.default.LiveChatv2GetChatTokenPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(te),Ce&&(re="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(R.default.LiveChatv2AuthGetChatTokenPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(te),_e[S.default.authenticatedUserToken]=Ce)):Ce&&(re="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(R.default.LiveChatAuthGetChatTokenPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(te),_e[S.default.authenticatedUserToken]=Ce),ne&&(re+="/".concat(ne)),re+="?channelId=".concat(this.omnichannelConfiguration.channelId),fe={headers:_e,method:"GET",url:re},me=b.default.create(),(0,P.default)(me,{retries:this.configuration.maxRequestRetriesOnFailure}),Ie.abrupt("return",new Promise(function(){var ke=(0,h.default)(_.default.mark(function qe(Re,xe){var Ge,Ye,Xe,We;return _.default.wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Ue.prev=0,Ue.next=3,me(fe);case 3:if(Ye=z.milliSecondsElapsed,!(Xe=(Ge=Ue.sent).data)){Ue.next=11;break}return Xe.requestId=te,Y.logger&&Y.logger.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.GETCHATTOKENSUCCEEDED,{RequestId:te,Region:Ge.data.Region,ElapsedTimeInMilliseconds:Ye,TransactionId:Ge.headers["transaction-id"]},"Get Chat Token Succeeded"),Re(Xe),Ue.abrupt("return");case 11:if(!ne||Ge.status!==d.default.noContentStatusCode){Ue.next=14;break}return xe(Ge),Ue.abrupt("return");case 14:Ue.next=25;break;case 16:if(Ue.prev=16,Ue.t0=Ue.catch(0),We=z.milliSecondsElapsed,!Y.logger){Ue.next=23;break}return Ue.next=22,g.LoggingSanitizer.stripErrorSensitiveProperties(Ue.t0);case 22:Y.logger.log(T.LogLevel.ERROR,I.OCSDKTelemetryEvent.GETCHATTOKENFAILED,{RequestId:te,ExceptionDetails:Ue.t0,ElapsedTimeInMilliseconds:We},"Get Chat Token Failed");case 23:return xe(Ue.t0),Ue.abrupt("return");case 25:if(!(Z+1>=Y.configuration.getChatTokenRetryCount)){Ue.next=28;break}return xe(new Error("The retry for getchattoken has exceeded its max value of ".concat(Y.configuration.getChatTokenRetryCount))),Ue.abrupt("return");case 28:setTimeout(function(){Y.getChatToken(te,le,Z+1).then(function(ut){return Re(ut)}).catch(function(ut){return xe(ut)})},Y.configuration.getChatTokenTimeBetweenRetriesOnFailure);case 29:case"end":return Ue.stop()}},qe,null,[[0,16]])}));return function(qe,Re){return ke.apply(this,arguments)}}()));case 17:case"end":return Ie.stop()}},Te,this)}));return function(Te){return ie.apply(this,arguments)}}()},{key:"getReconnectableChats",value:function(){var ie=(0,h.default)(_.default.mark(function Te(te){var le,Z,z,ne,Ce,we,Y=this;return _.default.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return le=N.Timer.TIMER(),Z=te.authenticatedUserToken,this.logger&&this.logger.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.GETRECONNECTABLECHATS,"Get Reconnectable chat Started"),z="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(R.default.LiveChatGetReconnectableChatsPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(this.omnichannelConfiguration.orgId,"?channelId=").concat(this.omnichannelConfiguration.channelId),(ne=d.default.defaultHeaders)[S.default.authenticatedUserToken]=Z,Ce={headers:ne,method:"GET",url:z},we=b.default.create(),re.abrupt("return",new Promise(function(){var fe=(0,h.default)(_.default.mark(function me(ve,be){var Ie,ke,qe,Re;return _.default.wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:return Ge.prev=0,Ge.next=3,we(Ce);case 3:if(ke=le.milliSecondsElapsed,!(qe=(Ie=Ge.sent).data)){Ge.next=10;break}return Y.logger&&Y.logger.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.GETRECONNECTABLECHATS,{Region:Ie.data.Region,ElapsedTimeInMilliseconds:ke,TransactionId:Ie.headers[d.default.transactionid]},"Get Reconnectable Chats Succeeded and old session returned"),ve(qe),Ge.abrupt("return");case 10:return ve(),Ge.abrupt("return");case 14:if(Ge.prev=14,Ge.t0=Ge.catch(0),Re=le.milliSecondsElapsed,!Y.logger){Ge.next=21;break}return Ge.next=20,g.LoggingSanitizer.stripErrorSensitiveProperties(Ge.t0);case 20:Y.logger.log(T.LogLevel.ERROR,I.OCSDKTelemetryEvent.GETRECONNECTABLECHATS,{ExceptionDetails:Ge.t0,ElapsedTimeInMilliseconds:Re},"Get Reconnectable Chats Failed");case 21:return be(Ge.t0),Ge.abrupt("return");case 23:case"end":return Ge.stop()}},me,null,[[0,14]])}));return function(me,ve){return fe.apply(this,arguments)}}()));case 9:case"end":return re.stop()}},Te,this)}));return function(Te){return ie.apply(this,arguments)}}()},{key:"getReconnectAvailability",value:function(){var ie=(0,h.default)(_.default.mark(function Te(te){var le,Z,ne,Ce,Y=this;return _.default.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return le=N.Timer.TIMER(),this.logger&&this.logger.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.GETRECONNECTAVAILABILITY,"Get Reconnect availability started"),Z="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(R.default.LiveChatReconnectAvailabilityPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(te),ne={headers:d.default.defaultHeaders,method:"GET",url:Z},Ce=b.default.create(),_e.abrupt("return",new Promise(function(){var re=(0,h.default)(_.default.mark(function fe(me,ve){var be,Ie,ke,qe;return _.default.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return xe.prev=0,xe.next=3,Ce(ne);case 3:if(Ie=le.milliSecondsElapsed,!(ke=(be=xe.sent).data)){xe.next=10;break}return Y.logger&&Y.logger.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.GETRECONNECTAVAILABILITY,{Region:be.data.Region,ElapsedTimeInMilliseconds:Ie,TransactionId:be.headers[d.default.transactionid]},"Get Reconnect availability Succeeded"),me(ke),xe.abrupt("return");case 10:return Y.logger&&Y.logger.log(T.LogLevel.WARN,I.OCSDKTelemetryEvent.GETRECONNECTAVAILABILITY,{Region:be.data.Region,ElapsedTimeInMilliseconds:Ie,TransactionId:be.headers[d.default.transactionid]},"Get Reconnect availability didn't send any valid data."),me(),xe.abrupt("return");case 15:if(xe.prev=15,xe.t0=xe.catch(0),qe=le.milliSecondsElapsed,!Y.logger){xe.next=22;break}return xe.next=21,g.LoggingSanitizer.stripErrorSensitiveProperties(xe.t0);case 21:Y.logger.log(T.LogLevel.ERROR,I.OCSDKTelemetryEvent.GETRECONNECTAVAILABILITY,{ExceptionDetails:xe.t0,ElapsedTimeInMilliseconds:qe},"Get Reconnect Availability Failed");case 22:return ve(xe.t0),xe.abrupt("return");case 24:case"end":return xe.stop()}},fe,null,[[0,15]])}));return function(fe,me){return re.apply(this,arguments)}}()));case 7:case"end":return _e.stop()}},Te,this)}));return function(Te){return ie.apply(this,arguments)}}()},{key:"getQueueAvailability",value:function(){var ie=(0,h.default)(_.default.mark(function Te(te){var le,Z,z,ne,Ce,we,_e,re,fe,me,Y=this,ve=arguments;return _.default.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(le=ve.length>1&&void 0!==ve[1]?ve[1]:{},Z=N.Timer.TIMER(),this.logger&&this.logger.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.GETQUEUEAVAILABILITYSTARTED,{RequestId:te},"Get queue availability started"),z="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(R.default.GetQueueAvailabilityPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(te,"?channelId=lcw"),ne=b.default.create(),(0,P.default)(ne,{retries:this.configuration.maxRequestRetriesOnFailure}),we=le.initContext,_e=le.getContext,re=d.default.defaultHeaders,(Ce=le.authenticatedUserToken)&&(re[S.default.authenticatedUserToken]=Ce),fe=we||{},!_e||window.document){Ie.next=12;break}return Ie.abrupt("return",Promise.reject(new Error("getContext is only supported on web browsers")));case 12:if(_e&&(fe.browser=c.BrowserInfo.getBrowserName(),fe.device=C.DeviceInfo.getDeviceType(),fe.originurl=window.location.href,fe.os=M.OSInfo.getOsType()),fe.locale||(fe.locale=d.default.defaultLocale),!fe.locale||w.default.supportedLocales.includes(fe.locale)){Ie.next=16;break}return Ie.abrupt("return",Promise.reject(new Error("Unsupported locale: '".concat(fe.locale,"'"))));case 16:return me={data:fe,headers:re,method:"POST",url:z},Ie.abrupt("return",new Promise(function(){var ke=(0,h.default)(_.default.mark(function qe(Re,xe){var Ge,Ye,Xe,We;return _.default.wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Ue.prev=0,Ue.next=3,ne(me);case 3:Ye=Z.milliSecondsElapsed,(Xe=(Ge=Ue.sent).data)&&(Y.logger&&Y.logger.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.GETQUEUEAVAILABILITYSUCCEEDED,{RequestId:te,Region:Ge.data.Region,ElapsedTimeInMilliseconds:Ye,TransactionId:Ge.headers["transaction-id"]},"Get queue availability Succeeded"),Re(Xe)),Ue.next=17;break;case 9:if(Ue.prev=9,Ue.t0=Ue.catch(0),We=Z.milliSecondsElapsed,!Y.logger){Ue.next=16;break}return Ue.next=15,g.LoggingSanitizer.stripErrorSensitiveProperties(Ue.t0);case 15:Y.logger.log(T.LogLevel.ERROR,I.OCSDKTelemetryEvent.GETQUEUEAVAILABILITYFAILED,{RequestId:te,ExceptionDetails:Ue.t0,ElapsedTimeInMilliseconds:We},"Get queue availability failed");case 16:xe(Ue.t0);case 17:case"end":return Ue.stop()}},qe,null,[[0,9]])}));return function(qe,Re){return ke.apply(this,arguments)}}()));case 18:case"end":return Ie.stop()}},Te,this)}));return function(Te){return ie.apply(this,arguments)}}()},{key:"sessionInit",value:function(){var ie=(0,h.default)(_.default.mark(function Te(te){var le,Z,z,ne,Ce,we,_e,re,fe,me,ve,Y=this,be=arguments;return _.default.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:if(le=be.length>1&&void 0!==be[1]?be[1]:{},Z=N.Timer.TIMER(),this.logger&&this.logger.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.SESSIONINITSTARTED,{RequestId:te},"Session Init Started"),z=b.default.create(),(0,P.default)(z,{retries:this.configuration.maxRequestRetriesOnFailure}),ne=le.reconnectId,Ce=le.authenticatedUserToken,we=le.initContext,_e=le.getContext,re=d.default.defaultHeaders,fe="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(R.default.LiveChatSessionInitPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(te),Ce&&(fe="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(R.default.LiveChatAuthSessionInitPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(te),re[S.default.authenticatedUserToken]=Ce),ne&&(fe+="/".concat(ne)),fe+="?channelId=".concat(this.omnichannelConfiguration.channelId),me=we||{},!_e||window.document){ke.next=14;break}return ke.abrupt("return",Promise.reject(new Error("getContext is only supported on web browsers")));case 14:if(_e&&(me.browser=c.BrowserInfo.getBrowserName(),me.device=C.DeviceInfo.getDeviceType(),me.originurl=window.location.href,me.os=M.OSInfo.getOsType()),me.locale||(me.locale=d.default.defaultLocale),!me.locale||w.default.supportedLocales.includes(me.locale)){ke.next=18;break}return ke.abrupt("return",Promise.reject(new Error("Unsupported locale: '".concat(me.locale,"'"))));case 18:return ve={data:me,headers:re,method:"POST",url:fe},ke.abrupt("return",new Promise(function(){var qe=(0,h.default)(_.default.mark(function Re(xe,Ge){var Ye,Xe,We;return _.default.wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Ue.prev=0,Ue.next=3,z(ve);case 3:Ye=Ue.sent,Xe=Z.milliSecondsElapsed,Y.logger&&Y.logger.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.SESSIONINITSUCCEEDED,{RequestId:te,Region:Ye.data.Region,ElapsedTimeInMilliseconds:Xe,TransactionId:Ye.headers["transaction-id"]},"Session Init Succeeded"),xe(),Ue.next=17;break;case 9:if(Ue.prev=9,Ue.t0=Ue.catch(0),We=Z.milliSecondsElapsed,!Y.logger){Ue.next=16;break}return Ue.next=15,g.LoggingSanitizer.stripErrorSensitiveProperties(Ue.t0);case 15:Y.logger.log(T.LogLevel.ERROR,I.OCSDKTelemetryEvent.SESSIONINITFAILED,{RequestId:te,ExceptionDetails:Ue.t0,ElapsedTimeInMilliseconds:We},"Session Init Failed");case 16:Ge(Ue.t0);case 17:case"end":return Ue.stop()}},Re,null,[[0,9]])}));return function(Re,xe){return qe.apply(this,arguments)}}()));case 20:case"end":return ke.stop()}},Te,this)}));return function(Te){return ie.apply(this,arguments)}}()},{key:"sessionClose",value:function(){var ie=(0,h.default)(_.default.mark(function Te(te){var le,Z,z,ne,Ce,we,_e,fe,me,ve,Y=this,be=arguments;return _.default.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return le=be.length>1&&void 0!==be[1]?be[1]:{},Z=N.Timer.TIMER(),this.logger&&this.logger.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.SESSIONCLOSESTARTED,{RequestId:te},"Session Close Started"),z="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(R.default.LiveChatSessionClosePath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(te,"?channelId=").concat(this.omnichannelConfiguration.channelId),ne=b.default.create(),(0,P.default)(ne,{retries:this.configuration.maxRequestRetriesOnFailure}),Ce=le.authenticatedUserToken,we=le.isReconnectChat,_e=le.isPersistentChat,fe=d.default.defaultHeaders,(me={}).chatId=le.chatId,Ce&&(z="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(R.default.LiveChatAuthSessionClosePath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(te,"?channelId=").concat(this.omnichannelConfiguration.channelId),fe[S.default.authenticatedUserToken]=Ce),we&&(z+="&isReconnectChat=true"),_e&&(z+="&isPersistentChat=true"),ve={data:me,headers:fe,method:"POST",url:z},ke.abrupt("return",new Promise(function(){var qe=(0,h.default)(_.default.mark(function Re(xe,Ge){var Ye,Xe,We;return _.default.wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Ue.prev=0,Ue.next=3,ne(ve);case 3:Ye=Ue.sent,Xe=Z.milliSecondsElapsed,Y.logger&&Y.logger.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.SESSIONCLOSESUCCEEDED,{RequestId:te,Region:Ye.data.Region,ElapsedTimeInMilliseconds:Xe,TransactionId:Ye.headers["transaction-id"]},"Session Close Succeeded"),xe(),Ue.next=17;break;case 9:if(Ue.prev=9,Ue.t0=Ue.catch(0),We=Z.milliSecondsElapsed,!Y.logger){Ue.next=16;break}return Ue.next=15,g.LoggingSanitizer.stripErrorSensitiveProperties(Ue.t0);case 15:Y.logger.log(T.LogLevel.ERROR,I.OCSDKTelemetryEvent.SESSIONCLOSEFAILED,{RequestId:te,ExceptionDetails:Ue.t0,ElapsedTimeInMilliseconds:We},"Session Close Failed");case 16:Ge();case 17:case"end":return Ue.stop()}},Re,null,[[0,9]])}));return function(Re,xe){return qe.apply(this,arguments)}}()));case 15:case"end":return ke.stop()}},Te,this)}));return function(Te){return ie.apply(this,arguments)}}()},{key:"validateAuthChatRecord",value:function(){var ie=(0,h.default)(_.default.mark(function Te(te,Y){var le,Z,z,ne,Ce,we,_e,re,fe,me,ve,be,Ie,ke;return _.default.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return le=N.Timer.TIMER(),this.logger&&this.logger.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.VALIDATEAUTHCHATRECORDSTARTED,{RequestId:te},"Validate Auth Chat Record Started"),Z=Y.authenticatedUserToken,z=Y.chatId,ne="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(R.default.LiveChatValidateAuthChatMapRecordPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z,"/").concat(te,"?channelId=").concat(this.omnichannelConfiguration.channelId),Ce=b.default.create(),(0,P.default)(Ce,{retries:this.configuration.maxRequestRetriesOnFailure}),we=d.default.defaultHeaders,Z&&(we[S.default.authenticatedUserToken]=Z),_e={headers:we,method:"GET",url:ne},Re.prev=9,Re.next=12,Ce(_e);case 12:if(me=le.milliSecondsElapsed,!0!==(null===(re=(fe=Re.sent).data)||void 0===re?void 0:re.authChatExist)){Re.next=19;break}return null===(ve=this.logger)||void 0===ve||ve.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.VALIDATEAUTHCHATRECORDSUCCEEDED,{RequestId:te,Region:fe.data.Region,ElapsedTimeInMilliseconds:me,TransactionId:fe.headers["transaction-id"]},"Validate Auth Chat Record Succeeded"),Re.abrupt("return",Promise.resolve(fe.data));case 19:return null===(be=this.logger)||void 0===be||be.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.VALIDATEAUTHCHATRECORDFAILED,{RequestId:te,Region:fe.data.Region,ElapsedTimeInMilliseconds:me,TransactionId:fe.headers["transaction-id"],ErrorCode:fe.status},"Validate Auth Chat Record Failed. Record is not found or request is not authorized"),Re.abrupt("return",Promise.reject(new Error("Validate Auth Chat Record Failed. Record is not found or request is not authorized")));case 21:Re.next=34;break;case 23:return Re.prev=23,Re.t0=Re.catch(9),ke=le.milliSecondsElapsed,Re.next=28,g.LoggingSanitizer.stripErrorSensitiveProperties(Re.t0);case 28:if(null===(Ie=this.logger)||void 0===Ie||Ie.log(T.LogLevel.ERROR,I.OCSDKTelemetryEvent.VALIDATEAUTHCHATRECORDFAILED,{RequestId:te,ExceptionDetails:Re.t0,ElapsedTimeInMilliseconds:ke},"Validate Auth Chat Record Failed"),"Error: Request failed with status code 404"!==Re.t0.toString()){Re.next=33;break}return Re.abrupt("return",Promise.resolve({}));case 33:return Re.abrupt("return",Promise.reject());case 34:case"end":return Re.stop()}},Te,this,[[9,23]])}));return function(Te,te){return ie.apply(this,arguments)}}()},{key:"submitPostChatResponse",value:function(){var ie=(0,h.default)(_.default.mark(function Te(te,Y){var Z,z,ne,Ce,we,_e,re,le=this,fe=arguments;return _.default.wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return Z=fe.length>2&&void 0!==fe[2]?fe[2]:{},z=N.Timer.TIMER(),this.logger&&this.logger.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.SUBMITPOSTCHATSTARTED,{RequestId:te},"Submit Post Chat Started"),ne="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(R.default.LiveChatSubmitPostChatPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(te,"?channelId=").concat(this.omnichannelConfiguration.channelId),Ce=b.default.create(),(0,P.default)(Ce,{retries:this.configuration.maxRequestRetriesOnFailure}),_e=d.default.defaultHeaders,(we=Z.authenticatedUserToken)&&(ne="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(R.default.LiveChatAuthSubmitPostChatPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(te,"?channelId=").concat(this.omnichannelConfiguration.channelId),_e[S.default.authenticatedUserToken]=we),re={data:JSON.stringify(Y),headers:_e,method:"POST",url:ne},ve.abrupt("return",new Promise(function(){var be=(0,h.default)(_.default.mark(function Ie(ke,qe){var Re,xe,Ge;return _.default.wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:return Xe.prev=0,Xe.next=3,Ce(re);case 3:Re=Xe.sent,xe=z.milliSecondsElapsed,le.logger&&le.logger.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.SUBMITPOSTCHATSUCCEEDED,{RequestId:te,Region:Re.data.Region,ElapsedTimeInMilliseconds:xe,TransactionId:Re.headers["transaction-id"]},"Submit Post Chat Succeeded"),ke(),Xe.next=17;break;case 9:if(Xe.prev=9,Xe.t0=Xe.catch(0),Ge=z.milliSecondsElapsed,!le.logger){Xe.next=16;break}return Xe.next=15,g.LoggingSanitizer.stripErrorSensitiveProperties(Xe.t0);case 15:le.logger.log(T.LogLevel.ERROR,I.OCSDKTelemetryEvent.SUBMITPOSTCHATFAILED,{RequestId:te,ExceptionDetails:Xe.t0,ElapsedTimeInMilliseconds:Ge},"Submit Post Chat Failed");case 16:qe();case 17:case"end":return Xe.stop()}},Ie,null,[[0,9]])}));return function(Ie,ke){return be.apply(this,arguments)}}()));case 11:case"end":return ve.stop()}},Te,this)}));return function(Te,te){return ie.apply(this,arguments)}}()},{key:"getSurveyInviteLink",value:function(){var ie=(0,h.default)(_.default.mark(function Te(te,Y){var Z,z,ne,Ce,we,_e,re,fe,le=this,me=arguments;return _.default.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return Z=me.length>2&&void 0!==me[2]?me[2]:{},z=N.Timer.TIMER(),this.logger&&this.logger.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.GETSURVEYINVITELINKSTARTED,{SurveyOwnerId:te},"Get Survey Invite Link Started"),ne="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(R.default.LiveChatGetSurveyInviteLinkPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(te),Ce=b.default.create(),(0,P.default)(Ce,{retries:this.configuration.maxRequestRetriesOnFailure}),_e=Z.requestId,re=d.default.defaultHeaders,(we=Z.authenticatedUserToken)&&(ne="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(R.default.LiveChatAuthGetSurveyInviteLinkPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(te),re[S.default.authenticatedUserToken]=we,re[S.default.widgetAppId]=this.omnichannelConfiguration.widgetId),_e&&(re[S.default.requestId]=_e),fe={data:JSON.stringify(Y),headers:re,method:"POST",url:ne},be.abrupt("return",new Promise(function(){var Ie=(0,h.default)(_.default.mark(function ke(qe,Re){var xe,Ge,Ye,Xe;return _.default.wrap(function(st){for(;;)switch(st.prev=st.next){case 0:return st.prev=0,st.next=3,Ce(fe);case 3:Ge=(xe=st.sent).data,Ye=z.milliSecondsElapsed,le.logger&&le.logger.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.GETSURVEYINVITELINKSUCCEEDED,{Region:xe.data.Region,ElapsedTimeInMilliseconds:Ye,TransactionId:xe.headers["transaction-id"]},"Get Survey Invite Link Succeeded"),qe(Ge),st.next=18;break;case 10:if(st.prev=10,st.t0=st.catch(0),Xe=z.milliSecondsElapsed,!le.logger){st.next=17;break}return st.next=16,g.LoggingSanitizer.stripErrorSensitiveProperties(st.t0);case 16:le.logger.log(T.LogLevel.ERROR,I.OCSDKTelemetryEvent.GETSURVEYINVITELINKFAILED,{ExceptionDetails:st.t0,ElapsedTimeInMilliseconds:Xe},"Get Survey Invite Link Failed");case 17:Re();case 18:case"end":return st.stop()}},ke,null,[[0,10]])}));return function(ke,qe){return Ie.apply(this,arguments)}}()));case 12:case"end":return be.stop()}},Te,this)}));return function(Te,te){return ie.apply(this,arguments)}}()},{key:"getChatTranscripts",value:function(){var ie=(0,h.default)(_.default.mark(function Te(te,Y,le){var z,ne,Ce,we,_e,re,fe,me,Z=this,ve=arguments;return _.default.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return z=ve.length>3&&void 0!==ve[3]?ve[3]:{},ne=N.Timer.TIMER(),this.logger&&this.logger.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.GETCHATTRANSCRIPTSTARTED,{RequestId:te},"Get Chat Transcript Started"),Ce="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(R.default.LiveChatGetChatTranscriptPath,"/").concat(Y,"/").concat(te,"?channelId=").concat(this.omnichannelConfiguration.channelId),we=b.default.create(),(0,P.default)(we,{retries:this.configuration.maxRequestRetriesOnFailure}),_e=z.authenticatedUserToken,re=z.currentLiveChatVersion,(fe=d.default.defaultHeaders)[S.default.organizationId]=this.omnichannelConfiguration.orgId,fe[S.default.widgetAppId]=this.omnichannelConfiguration.widgetId,fe[S.default.authorization]=le,this.liveChatVersion===I.LiveChatVersion.V2||re&&re===I.LiveChatVersion.V2?(Ce="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(R.default.LiveChatv2GetChatTranscriptPath,"/").concat(Y,"/").concat(te,"?channelId=").concat(this.omnichannelConfiguration.channelId),_e&&(Ce="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(R.default.LiveChatv2AuthGetChatTranscriptPath,"/").concat(Y,"/").concat(te,"?channelId=").concat(this.omnichannelConfiguration.channelId))):_e&&(Ce="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(R.default.LiveChatAuthGetChatTranscriptPath,"/").concat(Y,"/").concat(te,"?channelId=").concat(this.omnichannelConfiguration.channelId)),me={headers:fe,method:"GET",url:Ce},Ie.abrupt("return",new Promise(function(){var ke=(0,h.default)(_.default.mark(function qe(Re,xe){var Ge,Ye,Xe,We;return _.default.wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Ue.prev=0,Ue.next=3,we(me);case 3:Ye=ne.milliSecondsElapsed,Xe=(Ge=Ue.sent).data,Z.logger&&Z.logger.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.GETCHATTRANSCRIPTSUCCEEDED,{RequestId:te,Region:Ge.data.Region,ElapsedTimeInMilliseconds:Ye,TransactionId:Ge.headers["transaction-id"]},"Get Chat Transcript Succeeded"),Re(Xe),Ue.next=18;break;case 10:if(Ue.prev=10,Ue.t0=Ue.catch(0),We=ne.milliSecondsElapsed,!Z.logger){Ue.next=17;break}return Ue.next=16,g.LoggingSanitizer.stripErrorSensitiveProperties(Ue.t0);case 16:Z.logger.log(T.LogLevel.ERROR,I.OCSDKTelemetryEvent.GETCHATTRANSCRIPTFAILED,{RequestId:te,ExceptionDetails:Ue.t0,ElapsedTimeInMilliseconds:We},"Get Chat Transcript Failed");case 17:xe(Ue.t0);case 18:case"end":return Ue.stop()}},qe,null,[[0,10]])}));return function(qe,Re){return ke.apply(this,arguments)}}()));case 14:case"end":return Ie.stop()}},Te,this)}));return function(Te,te,Y){return ie.apply(this,arguments)}}()},{key:"emailTranscript",value:function(){var ie=(0,h.default)(_.default.mark(function Te(te,Y,le){var z,ne,Ce,we,_e,re,fe,Z=this,me=arguments;return _.default.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return z=me.length>3&&void 0!==me[3]?me[3]:{},ne=N.Timer.TIMER(),this.logger&&this.logger.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.EMAILTRANSCRIPTSTARTED,{RequestId:te},"Email Transcript Started"),Ce="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(R.default.LiveChatTranscriptEmailRequestPath,"/").concat(te,"?channelId=").concat(this.omnichannelConfiguration.channelId),we=b.default.create(),(0,P.default)(we,{retries:this.configuration.maxRequestRetriesOnFailure}),_e=z.authenticatedUserToken,(re=d.default.defaultHeaders)[S.default.organizationId]=this.omnichannelConfiguration.orgId,re[S.default.widgetAppId]=this.omnichannelConfiguration.widgetId,re[S.default.authorization]=Y,_e&&(Ce="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(R.default.LiveChatAuthTranscriptEmailRequestPath,"/").concat(te,"?channelId=").concat(this.omnichannelConfiguration.channelId)),fe={data:JSON.stringify(le),headers:re,method:"POST",url:Ce},be.abrupt("return",new Promise(function(){var Ie=(0,h.default)(_.default.mark(function ke(qe,Re){var xe,Ge,Ye;return _.default.wrap(function(We){for(;;)switch(We.prev=We.next){case 0:return We.prev=0,We.next=3,we(fe);case 3:xe=We.sent,Ge=ne.milliSecondsElapsed,Z.logger&&Z.logger.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.EMAILTRANSCRIPTSUCCEEDED,{RequestId:te,Region:xe.data.Region,ElapsedTimeInMilliseconds:Ge,TransactionId:xe.headers["transaction-id"]},"Email Transcript Succeeded"),qe(),We.next=17;break;case 9:if(We.prev=9,We.t0=We.catch(0),Ye=ne.milliSecondsElapsed,!Z.logger){We.next=16;break}return We.next=15,g.LoggingSanitizer.stripErrorSensitiveProperties(We.t0);case 15:Z.logger.log(T.LogLevel.ERROR,I.OCSDKTelemetryEvent.EMAILTRANSCRIPTFAILED,{RequestId:te,ExceptionDetails:We.t0,ElapsedTimeInMilliseconds:Ye},"Email Transcript Failed");case 16:Re();case 17:case"end":return We.stop()}},ke,null,[[0,9]])}));return function(ke,qe){return Ie.apply(this,arguments)}}()));case 14:case"end":return be.stop()}},Te,this)}));return function(Te,te,Y){return ie.apply(this,arguments)}}()},{key:"fetchDataMaskingInfo",value:function(){var ie=(0,h.default)(_.default.mark(function Te(te){var le,Z,z,ne,Ce,Y=this;return _.default.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return le=N.Timer.TIMER(),this.logger&&this.logger.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.FETCHDATAMASKINGSTARTED,{RequestId:te},"Fetch Data Masking Started"),te||(te=(0,y.uuidv4)()),Z="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(R.default.LiveChatFetchDataMaskingInfoPath,"/").concat(this.omnichannelConfiguration.orgId),z=b.default.create(),(0,P.default)(z,{retries:this.configuration.maxRequestRetriesOnFailure}),(ne=d.default.defaultHeaders)[S.default.organizationId]=this.omnichannelConfiguration.orgId,ne[S.default.requestId]=te,Ce={headers:ne,method:"GET",url:Z},_e.abrupt("return",new Promise(function(){var re=(0,h.default)(_.default.mark(function fe(me,ve){var be,Ie,ke,qe;return _.default.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return xe.prev=0,xe.next=3,z(Ce);case 3:Ie=le.milliSecondsElapsed,ke=(be=xe.sent).data,Y.logger&&Y.logger.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.FETCHDATAMASKINGSUCCEEDED,{RequestId:te,Region:be.data.Region,ElapsedTimeInMilliseconds:Ie,TransactionId:be.headers["transaction-id"]},"Fetch Data Masking Succeeded"),me(ke),xe.next=18;break;case 10:if(xe.prev=10,xe.t0=xe.catch(0),qe=le.milliSecondsElapsed,!Y.logger){xe.next=17;break}return xe.next=16,g.LoggingSanitizer.stripErrorSensitiveProperties(xe.t0);case 16:Y.logger.log(T.LogLevel.ERROR,I.OCSDKTelemetryEvent.FETCHDATAMASKINGFAILED,{RequestId:te,ExceptionDetails:xe.t0,ElapsedTimeInMilliseconds:qe},"Fetch Data Masking Failed");case 17:ve();case 18:case"end":return xe.stop()}},fe,null,[[0,10]])}));return function(fe,me){return re.apply(this,arguments)}}()));case 11:case"end":return _e.stop()}},Te,this)}));return function(Te){return ie.apply(this,arguments)}}()},{key:"makeSecondaryChannelEventRequest",value:function(){var ie=(0,h.default)(_.default.mark(function Te(te,Y){var le,Z,z,ne,Ce,we,_e,re,fe,me,ve,be=arguments;return _.default.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return le=be.length>2&&void 0!==be[2]?be[2]:{},Z=N.Timer.TIMER(),this.logger&&this.logger.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.SECONDARYCHANNELEVENTREQUESTSTARTED,{RequestId:te},"Secondary Channel Event Request Started"),z="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(R.default.LiveChatSecondaryChannelEventPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(te),ne=b.default.create(),(0,P.default)(ne,{retries:this.configuration.maxRequestRetriesOnFailure}),Ce=le.authenticatedUserToken,(we=d.default.defaultHeaders)[S.default.organizationId]=this.omnichannelConfiguration.orgId,Ce&&(we[S.default.authenticatedUserToken]=Ce,z="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(R.default.LiveChatAuthSecondaryChannelEventPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(te)),z+="?channelId="+d.default.defaultChannelId,_e={data:JSON.stringify(Y),headers:we,method:"POST",url:z},ke.prev=12,ke.next=15,ne(_e);case 15:fe=Z.milliSecondsElapsed,me=(re=ke.sent).data,this.logger&&this.logger.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.SECONDARYCHANNELEVENTREQUESTSUCCEEDED,{RequestId:te,Region:me.Region,ElapsedTimeInMilliseconds:fe,TransactionId:re.headers["transaction-id"]},"Secondary Channel Event Request Succeeded"),ke.next=29;break;case 21:if(ke.prev=21,ke.t0=ke.catch(12),ve=Z.milliSecondsElapsed,!this.logger){ke.next=28;break}return ke.next=27,g.LoggingSanitizer.stripErrorSensitiveProperties(ke.t0);case 27:this.logger.log(T.LogLevel.ERROR,I.OCSDKTelemetryEvent.SECONDARYCHANNELEVENTREQUESTFAILED,{RequestId:te,ExceptionDetails:ke.t0,ElapsedTimeInMilliseconds:ve},"Secondary Channel Event Request Failed");case 28:throw ke.t0;case 29:case"end":return ke.stop()}},Te,this,[[12,21]])}));return function(Te,te){return ie.apply(this,arguments)}}()},{key:"sendTypingIndicator",value:function(){var ie=(0,h.default)(_.default.mark(function Te(te,Y){var Z,z,ne,Ce,we,_e,re,le=this,fe=arguments;return _.default.wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(Z=fe.length>2&&void 0!==fe[2]?fe[2]:{},Y&&Y===I.LiveChatVersion.V2){ve.next=3;break}return ve.abrupt("return",Promise.resolve());case 3:if(z=N.Timer.TIMER(),ne=Z.customerDisplayName,Y&&Y===I.LiveChatVersion.V2){ve.next=7;break}throw new Error("Typing indicator is only supported on v2");case 7:return Ce="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(R.default.SendTypingIndicatorPath,"/").concat(te),we=b.default.create(),(_e=d.default.defaultHeaders)[S.default.organizationId]=this.omnichannelConfiguration.orgId,ne&&(_e[d.default.customerDisplayName]=ne),re={headers:_e,method:"POST",url:Ce},ve.abrupt("return",new Promise(function(){var be=(0,h.default)(_.default.mark(function Ie(ke,qe){var Re,xe,Ge,Ye;return _.default.wrap(function(We){for(;;)switch(We.prev=We.next){case 0:return We.prev=0,We.next=3,we(re);case 3:xe=z.milliSecondsElapsed,Ge=(Re=We.sent).data,le.logger&&le.logger.log(T.LogLevel.INFO,I.OCSDKTelemetryEvent.SENDTYPINGINDICATORSUCCEEDED,{RequestId:te,Region:Ge.Region,ElapsedTimeInMilliseconds:xe,TransactionId:Re.headers["transaction-id"]},"Send Typing Indicator Succeeded"),ke(),We.next=18;break;case 10:if(We.prev=10,We.t0=We.catch(0),Ye=z.milliSecondsElapsed,!le.logger){We.next=17;break}return We.next=16,g.LoggingSanitizer.stripErrorSensitiveProperties(We.t0);case 16:le.logger.log(T.LogLevel.ERROR,I.OCSDKTelemetryEvent.SENDTYPINGINDICATORFAILED,{RequestId:te,ExceptionDetails:We.t0,ElapsedTimeInMilliseconds:Ye},"Send Typing Indicator Failed");case 17:qe(We.t0);case 18:case"end":return We.stop()}},Ie,null,[[0,10]])}));return function(Ie,ke){return be.apply(this,arguments)}}()));case 14:case"end":return ve.stop()}},Te,this)}));return function(Te,te){return ie.apply(this,arguments)}}()}]),$;var ie}();m.default=ee,(0,v.default)(ee,"defaultConfiguration",{getChatTokenRetryCount:35,getChatTokenTimeBetweenRetriesOnFailure:1e4,maxRequestRetriesOnFailure:3})},4491:(K,m,u)=>{"use strict";var s=u(1127);Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var _=s(u(8884)),h=s(u(2805)),p=s(u(5413)),E=s(u(4162)),f=s(u(8634));m.default=function(){function I(){(0,_.default)(this,I)}return(0,h.default)(I,null,[{key:"getSDK",value:function(c,d,C){var w=new E.default(C);return new f.default({channelId:c.channelId||p.default.defaultChannelId,orgId:c.orgId,orgUrl:c.orgUrl,widgetId:c.widgetId},d||{},w)}}]),I}()},4717:(K,m,u)=>{"use strict";var s=u(1127);Object.defineProperty(m,"__esModule",{value:!0}),m.BrowserInfo=m.UNKNOWN_VERSION=void 0;var _=s(u(8884)),h=s(u(2805)),p=s(u(1819)),E=u(2e3),f="([\\d,.]+)";m.UNKNOWN_VERSION="U";var I=function(){function b(){(0,_.default)(this,b)}return(0,h.default)(b,null,[{key:"getUserAgent",value:function(){return this.userAgent()}},{key:"userAgentContainsString",value:function(d){return this.getUserAgent().indexOf(d)>-1}},{key:"isChrome",value:function(){return this.userAgentContainsString(E.BrowserVendor.CHROME)&&!this.userAgentContainsString(E.BrowserVendor.EDGE)&&!this.userAgentContainsString(E.BrowserVendor.EDGE_CHROMIUM)}},{key:"isIe",value:function(){return this.userAgentContainsString("Trident")}},{key:"isEdge",value:function(){return this.userAgentContainsString(E.BrowserVendor.EDGE)||this.userAgentContainsString(E.BrowserVendor.EDGE_CHROMIUM)}},{key:"isOpera",value:function(){return this.userAgentContainsString("OPR/")}},{key:"getBrowserName",value:function(){return this.isOpera()?E.BrowserVendor.OPERA:this.isEdge()?E.BrowserVendor.EDGE:this.isChrome()?E.BrowserVendor.CHROME:this.userAgentContainsString(E.BrowserVendor.FIREFOX)?E.BrowserVendor.FIREFOX:this.userAgentContainsString(E.BrowserVendor.SAFARI)?E.BrowserVendor.SAFARI:this.isIe()?E.BrowserVendor.IE:E.BrowserVendor.UNKNOWN}},{key:"getBrowserVersion",value:function(){var d=this;return this.isIe()?function(){var T=d.getUserAgent(),M=T.match(new RegExp(E.BrowserVendor.IE+" "+f));if(M)return M[1];var R=T.match(new RegExp("rv:"+f));return R?R[1]:void 0}():function(T){T===E.BrowserVendor.SAFARI&&(T="Version"),T===E.BrowserVendor.OPERA&&(T="OPR"),T===E.BrowserVendor.EDGE&&(T="Edge?");var M=d.getUserAgent().match(new RegExp(T+"/"+f));return M?M[1]:"U"}(this.getBrowserName())}}]),b}();m.BrowserInfo=I,(0,p.default)(I,"userAgent",function(){return window.navigator.userAgent})},6812:(K,m,u)=>{"use strict";var s=u(1127);Object.defineProperty(m,"__esModule",{value:!0}),m.DeviceInfo=void 0;var _=s(u(8884)),h=s(u(2805)),p=u(2e3);m.DeviceInfo=function(){function f(){(0,_.default)(this,f)}return(0,h.default)(f,null,[{key:"getDeviceType",value:function(){return window.navigator.userAgent.match(/(android|ipod|windows phone|wpdesktop|windows ce|blackberry\w*|meego|webos|palm|symbian|pda|\w*?mobile\w*?|\w*?phone\w*?)/i)?p.DeviceType.Mobile:window.navigator.userAgent.match(/tablet|ipad/i)?p.DeviceType.Tablet:p.DeviceType.Desktop}}]),f}()},682:(K,m,u)=>{"use strict";var s=u(1127);Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var _=s(u(8884)),h=s(u(2805));m.default=function(){function E(){(0,_.default)(this,E)}return(0,h.default)(E,null,[{key:"raiseCustomEvent",value:function(v,I){var b=E.createCustomEvent(v,I);window.dispatchEvent(b)}},{key:"createCustomEvent",value:function(v,I){var b=I?{detail:I}:void 0,c=null;try{c=new CustomEvent(v,b)}catch(d){(c=document.createEvent("CustomEvent")).initCustomEvent(v,!0,!0,b)}return c}}]),E}()},9569:(K,m,u)=>{"use strict";var s=u(1127);Object.defineProperty(m,"__esModule",{value:!0}),m.LoggingSanitizer=void 0;var _=s(u(1298)),h=s(u(8884)),p=s(u(2805)),E=s(u(5413));m.LoggingSanitizer=function(){function v(){(0,h.default)(this,v)}return(0,p.default)(v,null,[{key:"stripErrorSensitiveProperties",value:function(b){var c,C,d=this;b&&"object"===(0,_.default)(b)&&(null===(c=Object.keys(b))||void 0===c?void 0:c.length)>0&&(null===(C=Object.keys(b))||void 0===C||C.forEach(function(w){-1!==E.default.sensitiveProperties.indexOf(w)&&delete b["".concat(w)],null===b["".concat(w)]||"object"!==(0,_.default)(b["".concat(w)])||d.stripErrorSensitiveProperties(b["".concat(w)])}))}}]),v}()},7169:(K,m,u)=>{"use strict";var s=u(1127);Object.defineProperty(m,"__esModule",{value:!0}),m.OSInfo=void 0;var _=s(u(8884)),h=s(u(2805)),p=u(2e3);m.OSInfo=function(){function f(){(0,_.default)(this,f)}return(0,h.default)(f,null,[{key:"getOsType",value:function(){var T=function(){return window.navigator.userAgent};return T().match(/windows\sphone\s\d+\.\d+/i)?p.OperatingSystem.WINDOWS_PHONE:T().match(/ arm;/i)?p.OperatingSystem.WINDOWS_RT:T().match(/(iPad|iPhone|iPod)(?=.*like Mac OS X)/i)?p.OperatingSystem.IOS:T().match(/android/i)?p.OperatingSystem.ANDROID:T().match(/(linux|joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|cros)/i)?p.OperatingSystem.LINUX:T().match(/(macintosh|mac os x)/i)?p.OperatingSystem.MACOSX:T().match(/(windows|win32)/i)?p.OperatingSystem.WINDOWS:p.OperatingSystem.UNKNOWN}}]),f}()},7276:(K,m,u)=>{"use strict";var s=u(1127);Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var _=s(u(8884)),h=s(u(2805));m.default=function(){function E(){(0,_.default)(this,E)}return(0,h.default)(E,null,[{key:"GETTELEMETRYEVENTDATA",value:function(v,I,b){return{Description:b,ElapsedTimeInMilliseconds:I.ElapsedTimeInMilliseconds,Event:v,ExceptionDetails:I.ExceptionDetails,Region:I.Region,RequestId:I.RequestId,TransactionId:I.TransactionId}}}]),E}()},3945:(K,m,u)=>{"use strict";var s=u(1127);Object.defineProperty(m,"__esModule",{value:!0}),m.Timer=void 0;var _=s(u(8884)),h=s(u(2805));m.Timer=function(){function E(){(0,_.default)(this,E)}return(0,h.default)(E,null,[{key:"TIMER",value:function(){var v=(new Date).getTime();return{get milliSecondsElapsed(){return(new Date).getTime()-v}}}}]),E}()},1729:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0,m.default=function(h,p){var E=p.retries,f=0;h.interceptors.response.use(void 0,function(c){var d=c.config;return d&&f<E?(f++,new Promise(function(w){return w(h(d))})):Promise.reject(c)})}},8566:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.uuidv4=void 0,m.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(_){var h=16*Math.random()|0;return("x"===_?h:3&h|8).toString(16)})}},3762:(K,m,u)=>{"use strict";var s=u(1127);Object.defineProperty(m,"__esModule",{value:!0}),Object.defineProperty(m,"SDKProvider",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(m,"uuidv4",{enumerable:!0,get:function(){return f.uuidv4}});var _=s(u(1298)),h=s(u(3096)),p=s(u(4491)),E=s(u(682)),f=u(8566);!function(){if(void 0===global.window&&(global.window=global),void 0===("undefined"==typeof window?"undefined":(0,_.default)(window)))throw new Error("window object not found");"Microsoft"in window||(window.Microsoft={}),"CRM"in window.Microsoft||(window.Microsoft.CRM={}),"Omnichannel"in window.Microsoft.CRM||(window.Microsoft.CRM.Omnichannel={}),"SDK"in window.Microsoft.CRM.Omnichannel||(window.Microsoft.CRM.Omnichannel.SDK={SDKProvider:p.default,Util:{uuidv4:f.uuidv4}}),window.document&&E.default.raiseCustomEvent(h.default.OCSDKLOAD)}()},7987:function(K,m){"use strict";var u=this&&this.__assign||function(){return(u=Object.assign||function(_){for(var h,p=1,E=arguments.length;p<E;p++)for(var f in h=arguments[p])Object.prototype.hasOwnProperty.call(h,f)&&(_[f]=h[f]);return _}).apply(this,arguments)};Object.defineProperty(m,"__esModule",{value:!0});var s=function(){function _(h){this.debug=!1,this.debug=!1,this.logger=h}return _.prototype.setDebug=function(h){this.debug=h},_.prototype.log=function(h,p,E){var f,v=u(u({},E),{Event:p});this.debug&&console.log(v),null===(f=this.logger)||void 0===f||f.logClientSdkTelemetryEvent(h,v)},_}();m.default=s},9237:function(K,m,u){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(M){for(var R,S=1,N=arguments.length;S<N;S++)for(var P in R=arguments[S])Object.prototype.hasOwnProperty.call(R,P)&&(M[P]=R[P]);return M}).apply(this,arguments)},_=this&&this.__awaiter||function(M,R,S,N){return new(S||(S=Promise))(function(y,A){function F(ue){try{j(N.next(ue))}catch(ee){A(ee)}}function q(ue){try{j(N.throw(ue))}catch(ee){A(ee)}}function j(ue){ue.done?y(ue.value):function(y){return y instanceof S?y:new S(function(A){A(y)})}(ue.value).then(F,q)}j((N=N.apply(M,R||[])).next())})},h=this&&this.__generator||function(M,R){var N,P,y,A,S={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return A={next:F(0),throw:F(1),return:F(2)},"function"==typeof Symbol&&(A[Symbol.iterator]=function(){return this}),A;function F(j){return function(ue){return function(j){if(N)throw new TypeError("Generator is already executing.");for(;S;)try{if(N=1,P&&(y=2&j[0]?P.return:j[0]?P.throw||((y=P.return)&&y.call(P),0):P.next)&&!(y=y.call(P,j[1])).done)return y;switch(P=0,y&&(j=[2&j[0],y.value]),j[0]){case 0:case 1:y=j;break;case 4:return S.label++,{value:j[1],done:!1};case 5:S.label++,P=j[1],j=[0];continue;case 7:j=S.ops.pop(),S.trys.pop();continue;default:if(!(y=(y=S.trys).length>0&&y[y.length-1])&&(6===j[0]||2===j[0])){S=0;continue}if(3===j[0]&&(!y||j[1]>y[0]&&j[1]<y[3])){S.label=j[1];break}if(6===j[0]&&S.label<y[1]){S.label=y[1],y=j;break}if(y&&S.label<y[2]){S.label=y[2],S.ops.push(j);break}y[2]&&S.ops.pop(),S.trys.pop();continue}j=R.call(M,S)}catch(ue){j=[6,ue],P=0}finally{N=y=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}([j,ue])}}};Object.defineProperty(m,"__esModule",{value:!0});var p=u(7643),E=(()=>{return(M=E||(E={})).Accept="Accept",M.AcceptEncoding="Accept-Encoding",M.BehaviorOverride="BehaviorOverride",M.Authorization="Authorization",M.ClientVersion="X-MS-Client-Version",M.ContentType="Content-Type",E;var M})(),f=(()=>{return(M=f||(f={})).applicationFormUrlEncoded="application/x-www-form-urlencoded",M.applicationJson="application/json",f;var M})(),v=(()=>{return(M=v||(v={})).Expired="expired",M.Failed="failed",M.InProgress="in progress",M.Malware="malware",M.Ready="ready",v;var M})(),I=["jpeg","jpg","gif","png","bmp","tiff","jfif"],b=function(M){M.regionGTMS||(M.regionGTMS={ams:"https://us-api.asm.skype.com"})},c=function(M){var R;return(R={})[E.Authorization]="skype_token "+M,R[E.ClientVersion]="os=Windows; osVer=10; proc=Win32; lcid=en-us; deviceType=1; country=IN; clientName=swc; clientVer=912/0.106.0.34//swc",R};m.default={skypeTokenAuth:function(M){return _(void 0,void 0,void 0,function(){var R,N,y,A,F;return h(this,function(q){switch(q.label){case 0:p.default.debug&&console.log("[API][skypeTokenAuth]"),b(M),R=(M.amsEndpoint||(null===(F=M.regionGTMS)||void 0===F?void 0:F.ams))+"/v1/skypetokenauth",(A={})[E.Authorization]="skype_token "+M.token,A[E.Accept]=f.applicationJson,A[E.BehaviorOverride]="redirectAs404",A[E.ContentType]=f.applicationFormUrlEncoded,N={headers:A,method:"POST",body:"skypetoken="+M.token},q.label=1;case 1:return q.trys.push([1,3,,4]),[4,fetch(R,N)];case 2:return[2,q.sent()];case 3:throw y=q.sent(),!p.default.silentError&&console.log(y),new Error("AMSAuth");case 4:return[2]}})})},createObject:function(M,R,S){return _(void 0,void 0,void 0,function(){var P,y,A,F,ue,ee,$,ie;return h(this,function(ce){switch(ce.label){case 0:p.default.debug&&console.log("[API][createObject]"),(ee={})[M]=["read"],P={filename:R.name,permissions:ee,type:R.type.includes("image")?"pish/image":"sharing/file"},b(S),y=(S.amsEndpoint||(null===(ie=null==S?void 0:S.regionGTMS)||void 0===ie?void 0:ie.ams))+"/v1/objects",A=s(s({},c(S.token)),(($={})[E.ContentType]=f.applicationJson,$)),F={headers:A,method:"POST",body:JSON.stringify(P),credentials:"include"},ce.label=1;case 1:return ce.trys.push([1,4,,5]),[4,fetch(y,F)];case 2:return[4,ce.sent().json()];case 3:return[2,ce.sent()];case 4:throw ue=ce.sent(),!p.default.silentError&&console.log(ue),new Error("AMSCreateObjectFailed");case 5:return[2]}})})},uploadDocument:function(M,R,S){return _(void 0,void 0,void 0,function(){var N,P,y,F,q,j;return h(this,function(ue){switch(ue.label){case 0:p.default.debug&&console.log("[API][uploadDocument]"),b(S),N=(S.amsEndpoint||(null===(j=null==S?void 0:S.regionGTMS)||void 0===j?void 0:j.ams))+"/v1/objects/"+M+"/content/"+(R.type.includes("image")?"imgpsh":"original"),P=s(s({},c(S.token)),((q={})[E.ContentType]=f.applicationFormUrlEncoded,q)),y={headers:P,method:"PUT",body:R.data?R.data:R},ue.label=1;case 1:return ue.trys.push([1,3,,4]),[4,fetch(N,y)];case 2:return ue.sent(),[2,{name:R.name,size:R.size,type:R.type,id:M,url:N,fileSharingProtocolType:0}];case 3:throw F=ue.sent(),!p.default.silentError&&console.log(F),new Error("AMSUploadDocumentFailed");case 4:return[2]}})})},getViewStatus:function(M,R){return _(void 0,void 0,void 0,function(){var S,N,P,A,F,q,ue,ee;return h(this,function($){switch($.label){case 0:p.default.debug&&console.log("[API][getViewStatus]"),b(R),S=(R.amsEndpoint||(null===(ee=null==R?void 0:R.regionGTMS)||void 0===ee?void 0:ee.ams))+"/v1/objects/"+M.id+"/views/"+(I.includes(M.type)?"imgpsh_fullsize_anim":"original")+"/status",N=c(R.token),P={headers:N,method:"GET"},$.label=1;case 1:return $.trys.push([1,4,,5]),[4,fetch(S,P)];case 2:return[4,$.sent().json()];case 3:if(A=$.sent(),F=A.content_state,q=A.view_state,!A.view_location)throw new Error("view_location is empty");if(q&&q!==v.Ready.toString()&&!p.default.silentError&&console.error("view_state is not ready"),F===v.Expired.toString())throw new Error("content_state is expired");return[2,A];case 4:throw ue=$.sent(),!p.default.silentError&&console.log(ue),new Error("AMSGetViewStatusFailed");case 5:return[2]}})})},getView:function(M,R,S){return _(void 0,void 0,void 0,function(){var N,P,y,q;return h(this,function(j){switch(j.label){case 0:p.default.debug&&console.log("[API][getView]"),b(S),N=R,P=c(S.token),I.includes(M.type)&&(P[E.Accept]="image/webp,image/ *,*/*;q=0.8",P[E.AcceptEncoding]="gzip, deflate, sdch, br"),y={headers:P,method:"GET"},j.label=1;case 1:return j.trys.push([1,4,,5]),[4,fetch(N,y)];case 2:return[4,j.sent().blob()];case 3:return[2,j.sent()];case 4:throw q=j.sent(),!p.default.silentError&&console.log(q),new Error("AMSGetViewFailed");case 5:return[2]}})})}}},4543:function(K,m,u){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(w){for(var g,T=1,M=arguments.length;T<M;T++)for(var R in g=arguments[T])Object.prototype.hasOwnProperty.call(g,R)&&(w[R]=g[R]);return w}).apply(this,arguments)},_=this&&this.__awaiter||function(w,g,T,M){return new(T||(T=Promise))(function(S,N){function P(F){try{A(M.next(F))}catch(q){N(q)}}function y(F){try{A(M.throw(F))}catch(q){N(q)}}function A(F){F.done?S(F.value):function(S){return S instanceof T?S:new T(function(N){N(S)})}(F.value).then(P,y)}A((M=M.apply(w,g||[])).next())})},h=this&&this.__generator||function(w,g){var M,R,S,N,T={label:0,sent:function(){if(1&S[0])throw S[1];return S[1]},trys:[],ops:[]};return N={next:P(0),throw:P(1),return:P(2)},"function"==typeof Symbol&&(N[Symbol.iterator]=function(){return this}),N;function P(A){return function(F){return function(A){if(M)throw new TypeError("Generator is already executing.");for(;T;)try{if(M=1,R&&(S=2&A[0]?R.return:A[0]?R.throw||((S=R.return)&&S.call(R),0):R.next)&&!(S=S.call(R,A[1])).done)return S;switch(R=0,S&&(A=[2&A[0],S.value]),A[0]){case 0:case 1:S=A;break;case 4:return T.label++,{value:A[1],done:!1};case 5:T.label++,R=A[1],A=[0];continue;case 7:A=T.ops.pop(),T.trys.pop();continue;default:if(!(S=(S=T.trys).length>0&&S[S.length-1])&&(6===A[0]||2===A[0])){T=0;continue}if(3===A[0]&&(!S||A[1]>S[0]&&A[1]<S[3])){T.label=A[1];break}if(6===A[0]&&T.label<S[1]){T.label=S[1],S=A;break}if(S&&T.label<S[2]){T.label=S[2],T.ops.push(A);break}S[2]&&T.ops.pop(),T.trys.pop();continue}A=g.call(w,T)}catch(F){A=[6,F],R=0}finally{M=S=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([A,F])}}};Object.defineProperty(m,"__esModule",{value:!0});var p=u(2782),E=u(7643),f=u(4239),v=u(9638),I=u(759),b=u(8202),c=p.sdkVersion,C=function(){function w(g,T){void 0===g&&(g=void 0),void 0===T&&(T=void 0),this.clientId=b.uuidv4(),this.origin=window.location.origin,this.requestCallbacks={},this.debug=!1,this.iframeLoaded=!1,this.logger=g,this.iframeId="Microsoft_Omnichannel_AMSClient_Iframe_Window",T&&T.multiClient&&(this.iframeId=this.clientId)}return w.prototype.setDebug=function(g){this.debug=g},w.prototype.setup=function(){return _(this,void 0,void 0,function(){var g=this;return h(this,function(T){switch(T.label){case 0:if(this.debug&&console.log("[FramedClient][initialize]"),this.onMessageEvent(function(M){return g.handleEvent(M)}),!f.default.isBrowser())throw new Error("FramedMode was used in non-Web platform");return[4,this.loadIframe()];case 1:return T.sent(),this.iframeLoaded||!E.default.silentError&&console.error("iframe not loaded"),[2]}})})},w.prototype.initialize=function(g){return _(this,void 0,void 0,function(){return h(this,function(T){switch(T.label){case 0:return this.debug&&console.log("[FramedClient][initialize]"),this.chatToken=g.chatToken,[4,this.skypeTokenAuth()];case 1:return T.sent(),[2]}})})},w.prototype.skypeTokenAuth=function(g){return void 0===g&&(g=null),_(this,void 0,void 0,function(){var T,M=this;return h(this,function(R){switch(R.label){case 0:return this.debug&&console.log("[FramedClient][skypeAuth]"),T={chatToken:g||this.chatToken},[4,this.loadIframe()];case 1:return R.sent(),[2,new Promise(function(S,N){M.postMessage(I.default.Request,v.default.SkypeTokenAuth,T,S,N)})]}})})},w.prototype.createObject=function(g,T,M){return void 0===M&&(M=null),_(this,void 0,void 0,function(){var R,S=this;return h(this,function(N){switch(N.label){case 0:return this.debug&&console.log("[FramedClient][createObject]"),R={id:g,file:T,chatToken:M||this.chatToken},[4,this.loadIframe()];case 1:return N.sent(),[2,new Promise(function(P,y){S.postMessage(I.default.Request,v.default.CreateObject,R,P,y)})]}})})},w.prototype.uploadDocument=function(g,T,M){return void 0===M&&(M=null),_(this,void 0,void 0,function(){var R,S=this;return h(this,function(N){switch(N.label){case 0:return this.debug&&console.log("[FramedClient][uploadDocument]"),R={documentId:g,file:T,chatToken:M||this.chatToken},[4,this.loadIframe()];case 1:return N.sent(),[2,new Promise(function(P,y){S.postMessage(I.default.Request,v.default.UploadDocument,R,P,y)})]}})})},w.prototype.getViewStatus=function(g,T){return void 0===T&&(T=null),_(this,void 0,void 0,function(){var M,R=this;return h(this,function(S){switch(S.label){case 0:return M={fileMetadata:g,chatToken:T||this.chatToken},[4,this.loadIframe()];case 1:return S.sent(),[2,new Promise(function(N,P){R.postMessage(I.default.Request,v.default.GetViewStatus,M,N,P)})]}})})},w.prototype.getView=function(g,T,M){return void 0===M&&(M=null),_(this,void 0,void 0,function(){var R,S=this;return h(this,function(N){switch(N.label){case 0:return R={fileMetadata:g,viewLocation:T,chatToken:M||this.chatToken},[4,this.loadIframe()];case 1:return N.sent(),[2,new Promise(function(P,y){S.postMessage(I.default.Request,v.default.GetView,R,P,y)})]}})})},w.prototype.fetchBlob=function(g){return _(this,void 0,void 0,function(){var R;return h(this,function(S){switch(S.label){case 0:return S.trys.push([0,3,,4]),[4,fetch(g)];case 1:return[4,S.sent().blob()];case 2:return[2,S.sent()];case 3:throw R=S.sent(),!E.default.silentError&&console.log(R),new Error("fetchBlob");case 4:return[2]}})})},w.prototype.onMessageEvent=function(g){window.addEventListener("message",g,!0)},w.prototype.postMessage=function(g,T,M,R,S){void 0===M&&(M={}),void 0===R&&(R=function(P){return{}}),void 0===S&&(S=function(P){return{}});var N=b.uuidv4();this.requestCallbacks[N]={resolve:R,reject:S},this.targetWindow?this.targetWindow.postMessage(s({clientId:this.clientId,requestId:N,eventType:g,eventName:T},M),"*"):!E.default.silentError&&console.error("Target window not found!")},w.prototype.handleEvent=function(g){var T;return _(this,void 0,void 0,function(){var M;return h(this,function(R){return g.origin===this.origin||p.baseUrl.includes(g.origin)?(g.data.clientId!==this.clientId||(this.debug&&console.log(g),g.source&&(this.targetWindow=g.source),g.data.eventType===I.default.Response&&(this.debug&&console.log("[FramedClient][Response]"),M=g.data,g.data.eventName===v.default.SkypeTokenAuth?M.requestId in this.requestCallbacks&&(this.requestCallbacks[M.requestId].resolve(),delete this.requestCallbacks[M.requestId]):g.data.eventName===v.default.CreateObject||g.data.eventName===v.default.UploadDocument||g.data.eventName===v.default.GetViewStatus||g.data.eventName===v.default.GetView?M.requestId in this.requestCallbacks&&(this.requestCallbacks[M.requestId].resolve(M.response),delete this.requestCallbacks[M.requestId]):g.data.eventName===v.default.SendTelemetry&&(null===(T=this.logger)||void 0===T||T.log(M.logLevel,M.logData.Event,M.logData)))),[2]):[2]})})},w.prototype.dispose=function(){var g;null===(g=document.getElementById(this.iframeId))||void 0===g||g.remove(),this.requestCallbacks={},this.iframeLoaded=!1},w.prototype.loadIframe=function(){return _(this,void 0,void 0,function(){var g=this;return h(this,function(T){return[2,new Promise(function(M,R){if(Array.from(document.getElementsByTagName("iframe")).filter(function(y){return y.id==g.iframeId}).length)return M();var P=document.createElement("iframe");P.id=g.iframeId,P.src=p.baseUrl+"/"+c+"/iframe.html?clientId="+g.clientId+"&debug="+g.debug+"&telemetry=true",P.addEventListener("load",function(){g.debug&&console.log("iframe loaded!"),g.iframeLoaded=!0,M()}),P.addEventListener("error",function(){R()}),document.head.append(P)})]})})},w}();m.default=C},1700:function(K,m,u){"use strict";var s=this&&this.__awaiter||function(b,c,d,C){return new(d||(d=Promise))(function(g,T){function M(N){try{S(C.next(N))}catch(P){T(P)}}function R(N){try{S(C.throw(N))}catch(P){T(P)}}function S(N){N.done?g(N.value):function(g){return g instanceof d?g:new d(function(T){T(g)})}(N.value).then(M,R)}S((C=C.apply(b,c||[])).next())})},_=this&&this.__generator||function(b,c){var C,w,g,T,d={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return T={next:M(0),throw:M(1),return:M(2)},"function"==typeof Symbol&&(T[Symbol.iterator]=function(){return this}),T;function M(S){return function(N){return function(S){if(C)throw new TypeError("Generator is already executing.");for(;d;)try{if(C=1,w&&(g=2&S[0]?w.return:S[0]?w.throw||((g=w.return)&&g.call(w),0):w.next)&&!(g=g.call(w,S[1])).done)return g;switch(w=0,g&&(S=[2&S[0],g.value]),S[0]){case 0:case 1:g=S;break;case 4:return d.label++,{value:S[1],done:!1};case 5:d.label++,w=S[1],S=[0];continue;case 7:S=d.ops.pop(),d.trys.pop();continue;default:if(!(g=(g=d.trys).length>0&&g[g.length-1])&&(6===S[0]||2===S[0])){d=0;continue}if(3===S[0]&&(!g||S[1]>g[0]&&S[1]<g[3])){d.label=S[1];break}if(6===S[0]&&d.label<g[1]){d.label=g[1],g=S;break}if(g&&d.label<g[2]){d.label=g[2],d.ops.push(S);break}g[2]&&d.ops.pop(),d.trys.pop();continue}S=c.call(b,d)}catch(N){S=[6,N],w=0}finally{C=g=0}if(5&S[0])throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}([S,N])}}};Object.defineProperty(m,"__esModule",{value:!0});var h=u(9237),p=u(5356),E=u(9638),f=u(4239),v=u(2782),I=function(){function b(c){void 0===c&&(c=void 0),this.debug=!1,this.logger=c,f.default.isBrowser()&&console.error("FramedMode should be used on Web platform")}return b.prototype.setDebug=function(c){this.debug=c},b.prototype.setup=function(){return s(this,void 0,void 0,function(){return _(this,function(c){return[2,Promise.resolve()]})})},b.prototype.initialize=function(c){return s(this,void 0,void 0,function(){return _(this,function(d){switch(d.label){case 0:return this.debug&&console.log("[FramedlessClient][initialize]"),this.chatToken=c.chatToken,[4,this.skypeTokenAuth()];case 1:return d.sent(),[2]}})})},b.prototype.skypeTokenAuth=function(c){var d,C,w;return void 0===c&&(c=null),s(this,void 0,void 0,function(){var g,T;return _(this,function(M){switch(M.label){case 0:return M.trys.push([0,2,,3]),[4,h.default.skypeTokenAuth(c||this.chatToken)];case 1:return(g=M.sent()).ok||null===(d=this.logger)||void 0===d||d.log(p.default.ERROR,E.default.SkypeTokenAuth,{ChatId:c?c.chatId:null===(C=this.chatToken)||void 0===C?void 0:C.chatId,AMSClientVersion:v.sdkVersion,ExceptionDetails:{status:g.status}}),[2,g];case 2:throw T=M.sent(),null===(w=this.logger)||void 0===w||w.log(p.default.ERROR,E.default.SkypeTokenAuth,{ChatId:c?c.chatId:this.chatToken.chatId,AMSClientVersion:v.sdkVersion,ExceptionDetails:T}),new Error("skypeTokenAuth");case 3:return[2]}})})},b.prototype.createObject=function(c,d,C){var w;return void 0===C&&(C=null),s(this,void 0,void 0,function(){var T;return _(this,function(M){switch(M.label){case 0:return M.trys.push([0,2,,3]),[4,h.default.createObject(c,d,C||this.chatToken)];case 1:return[2,M.sent()];case 2:throw T=M.sent(),null===(w=this.logger)||void 0===w||w.log(p.default.ERROR,E.default.CreateObject,{ChatId:C?C.chatId:this.chatToken.chatId,AMSClientVersion:v.sdkVersion,ExceptionDetails:T}),new Error("createObject");case 3:return[2]}})})},b.prototype.uploadDocument=function(c,d,C){var w;return void 0===C&&(C=null),s(this,void 0,void 0,function(){var T;return _(this,function(M){switch(M.label){case 0:return M.trys.push([0,2,,3]),[4,h.default.uploadDocument(c,d,C||this.chatToken)];case 1:return[2,M.sent()];case 2:throw T=M.sent(),null===(w=this.logger)||void 0===w||w.log(p.default.ERROR,E.default.UploadDocument,{ChatId:C?C.chatId:this.chatToken.chatId,AMSClientVersion:v.sdkVersion,ExceptionDetails:T}),new Error("uploadDocument");case 3:return[2]}})})},b.prototype.getViewStatus=function(c,d){var C;return void 0===d&&(d=null),s(this,void 0,void 0,function(){var g;return _(this,function(T){switch(T.label){case 0:return T.trys.push([0,2,,3]),[4,h.default.getViewStatus(c,d||this.chatToken)];case 1:return[2,T.sent()];case 2:throw g=T.sent(),null===(C=this.logger)||void 0===C||C.log(p.default.ERROR,E.default.GetViewStatus,{ChatId:d?d.chatId:this.chatToken.chatId,AMSClientVersion:v.sdkVersion,ExceptionDetails:g}),new Error("getViewStatus");case 3:return[2]}})})},b.prototype.getView=function(c,d,C){var w;return void 0===C&&(C=null),s(this,void 0,void 0,function(){var T;return _(this,function(M){switch(M.label){case 0:return M.trys.push([0,2,,3]),[4,h.default.getView(c,d,C||this.chatToken)];case 1:return[2,M.sent()];case 2:throw T=M.sent(),null===(w=this.logger)||void 0===w||w.log(p.default.ERROR,E.default.GetView,{ChatId:C?C.chatId:this.chatToken.chatId,AMSClientVersion:v.sdkVersion,ExceptionDetails:T}),new Error("getView");case 3:return[2]}})})},b.prototype.fetchBlob=function(c){return s(this,void 0,void 0,function(){var w;return _(this,function(g){switch(g.label){case 0:return g.trys.push([0,3,,4]),[4,fetch(c)];case 1:return[4,g.sent().blob()];case 2:return[2,g.sent()];case 3:throw w=g.sent(),console.log(w),new Error("fetchBlob");case 4:return[2]}})})},b}();m.default=I},7643:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=function(){function s(){}return s.silentError=!0,s.debug=!1,s}();m.default=u},5356:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=(()=>{return(s=u||(u={})).INFO="INFO",s.DEBUG="DEBUG",s.WARN="WARN",s.ERROR="ERROR",s.LOG="LOG",u;var s})();m.default=u},9638:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=(()=>{return(s=u||(u={})).IframeLoaded="AMSIframeLoaded",s.SkypeTokenAuth="AMSSkypeTokenAuth",s.CreateObject="AMSCreateObject",s.UploadDocument="AMSUploadDocument",s.GetViewStatus="AMSGetViewStatus",s.GetView="AMSGetView",s.SendTelemetry="AMSSendTelemetry",u;var s})();m.default=u},759:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=(()=>{return(s=u||(u={})).None="None",s.Request="Request",s.Response="Response",u;var s})();m.default=u},2782:(K,m)=>{m.baseUrl="https://comms.omnichannelengagementhub.com/ams",m.sdkVersion="0.1.0"},3285:function(K,m,u){"use strict";var s=this&&this.__awaiter||function(I,b,c,d){return new(c||(c=Promise))(function(w,g){function T(S){try{R(d.next(S))}catch(N){g(N)}}function M(S){try{R(d.throw(S))}catch(N){g(N)}}function R(S){S.done?w(S.value):function(w){return w instanceof c?w:new c(function(g){g(w)})}(S.value).then(T,M)}R((d=d.apply(I,b||[])).next())})},_=this&&this.__generator||function(I,b){var d,C,w,g,c={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return g={next:T(0),throw:T(1),return:T(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function T(R){return function(S){return function(R){if(d)throw new TypeError("Generator is already executing.");for(;c;)try{if(d=1,C&&(w=2&R[0]?C.return:R[0]?C.throw||((w=C.return)&&w.call(C),0):C.next)&&!(w=w.call(C,R[1])).done)return w;switch(C=0,w&&(R=[2&R[0],w.value]),R[0]){case 0:case 1:w=R;break;case 4:return c.label++,{value:R[1],done:!1};case 5:c.label++,C=R[1],R=[0];continue;case 7:R=c.ops.pop(),c.trys.pop();continue;default:if(!(w=(w=c.trys).length>0&&w[w.length-1])&&(6===R[0]||2===R[0])){c=0;continue}if(3===R[0]&&(!w||R[1]>w[0]&&R[1]<w[3])){c.label=R[1];break}if(6===R[0]&&c.label<w[1]){c.label=w[1],w=R;break}if(w&&c.label<w[2]){c.label=w[2],c.ops.push(R);break}w[2]&&c.ops.pop(),c.trys.pop();continue}R=b.call(I,c)}catch(S){R=[6,S],C=0}finally{d=w=0}if(5&R[0])throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}([R,S])}}};Object.defineProperty(m,"__esModule",{value:!0});var h=u(7987),p=u(4543),E=u(1700),f=u(7643);m.default=function(I){return s(void 0,void 0,void 0,function(){var b,c,d;return _(this,function(C){switch(C.label){case 0:return I.debug&&console.log("[createAMSClient] "+(I.framedMode?"FramedClient":"FramedlessClient")),b=new h.default(I.logger),c={multiClient:I.multiClient||!1},[4,(d=I.framedMode?new p.default(b,c):new E.default(b)).setup()];case 1:return C.sent(),I.debug&&d.setDebug(I.debug||!1),f.default.debug=I.debug||!1,f.default.silentError=I.silentError||!0,[2,d]}})})}},7463:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var s=u(3285),_=u(1700),h=u(4543);m.default=s.default,function(){if(void 0===typeof window)throw new Error("window object not found");"Microsoft"in window||(window.Microsoft={}),"CRM"in window.Microsoft||(window.Microsoft.CRM={}),"Omnichannel"in window.Microsoft.CRM||(window.Microsoft.CRM.Omnichannel={}),"AMSClient"in window.Microsoft.CRM.Omnichannel||(window.Microsoft.CRM.Omnichannel.AMS={SDK:{createAMSClient:s.default,FramedClient:h.default,FramedlessClient:_.default}})}()},4239:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.isReactNative=m.isNode=m.isBrowser=void 0,m.isBrowser=function(){return"undefined"!=typeof window&&void 0!==window.document},m.isNode=function(){return"undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node},m.isReactNative=function(){return"undefined"!=typeof navigator&&"ReactNative"==navigator.product},m.default={isBrowser:m.isBrowser,isNode:m.isNode,isReactNative:m.isReactNative}},8202:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.uuidv4=void 0,m.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){var _=16*Math.random()|0;return("x"===s?_:3&_|8).toString(16)})}},7626:function(K,m,u){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(_e){for(var re,fe=1,me=arguments.length;fe<me;fe++)for(var ve in re=arguments[fe])Object.prototype.hasOwnProperty.call(re,ve)&&(_e[ve]=re[ve]);return _e}).apply(this,arguments)},_=this&&this.__awaiter||function(_e,re,fe,me){return new(fe||(fe=Promise))(function(be,Ie){function ke(xe){try{Re(me.next(xe))}catch(Ge){Ie(Ge)}}function qe(xe){try{Re(me.throw(xe))}catch(Ge){Ie(Ge)}}function Re(xe){xe.done?be(xe.value):function(be){return be instanceof fe?be:new fe(function(Ie){Ie(be)})}(xe.value).then(ke,qe)}Re((me=me.apply(_e,re||[])).next())})},h=this&&this.__generator||function(_e,re){var me,ve,be,Ie,fe={label:0,sent:function(){if(1&be[0])throw be[1];return be[1]},trys:[],ops:[]};return Ie={next:ke(0),throw:ke(1),return:ke(2)},"function"==typeof Symbol&&(Ie[Symbol.iterator]=function(){return this}),Ie;function ke(Re){return function(xe){return function(Re){if(me)throw new TypeError("Generator is already executing.");for(;fe;)try{if(me=1,ve&&(be=2&Re[0]?ve.return:Re[0]?ve.throw||((be=ve.return)&&be.call(ve),0):ve.next)&&!(be=be.call(ve,Re[1])).done)return be;switch(ve=0,be&&(Re=[2&Re[0],be.value]),Re[0]){case 0:case 1:be=Re;break;case 4:return fe.label++,{value:Re[1],done:!1};case 5:fe.label++,ve=Re[1],Re=[0];continue;case 7:Re=fe.ops.pop(),fe.trys.pop();continue;default:if(!(be=(be=fe.trys).length>0&&be[be.length-1])&&(6===Re[0]||2===Re[0])){fe=0;continue}if(3===Re[0]&&(!be||Re[1]>be[0]&&Re[1]<be[3])){fe.label=Re[1];break}if(6===Re[0]&&fe.label<be[1]){fe.label=be[1],be=Re;break}if(be&&fe.label<be[2]){fe.label=be[2],fe.ops.push(Re);break}be[2]&&fe.ops.pop(),fe.trys.pop();continue}Re=re.call(_e,fe)}catch(xe){Re=[6,xe],ve=0}finally{me=be=0}if(5&Re[0])throw Re[1];return{value:Re[0]?Re[1]:void 0,done:!0}}([Re,xe])}}},p=this&&this.__spreadArrays||function(){for(var _e=0,re=0,fe=arguments.length;re<fe;re++)_e+=arguments[re].length;var me=Array(_e),ve=0;for(re=0;re<fe;re++)for(var be=arguments[re],Ie=0,ke=be.length;Ie<ke;Ie++,ve++)me[ve]=be[Ie];return me};Object.defineProperty(m,"__esModule",{value:!0});var E=u(2811),f=u(2902),v=u(3762),I=u(8098),b=u(641),c=u(8953),d=u(2921),C=u(6419),w=u(2562),g=u(7925),T=u(5480),M=u(3968),R=u(2900),S=u(4694),N=u(2217),P=u(6194),y=u(8191),A=u(5642),F=u(448),q=u(3372),j=u(4352),ue=u(5655),ee=u(1247),$=u(9600),ie=u(7463),ce=u(9340),Te=u(838),te=u(6633),Y=u(813),le=u(8290),Z=u(9425),z=u(1775),ne=u(6345),Ce=u(7616),we=function(){function _e(re,fe){var me,ve,be,Ie,ke,qe,Re;void 0===fe&&(fe=b.defaultChatSDKConfig),this.ACSClient=null,this.AMSClient=null,this.authSettings=null,this.authenticatedUserToken=null,this.conversation=null,this.callingOption=C.default.NoCalling,this.telemetry=null,this.ic3ClientLogger=null,this.ocSdkLogger=null,this.acsClientLogger=null,this.acsAdapterLogger=null,this.isPersistentChat=!1,this.isChatReconnect=!1,this.reconnectId=null,this.refreshTokenTimer=null,this.debug=!1,this.omnichannelConfig=re,this.chatSDKConfig=s(s({},b.defaultChatSDKConfig),fe),this.isInitialized=!1,this.liveChatVersion=y.default.V1,this.requestId=v.uuidv4(),this.chatToken={},this.liveChatConfig={},this.dataMaskingRules={},this.authSettings=null,this.preChatSurvey=null,this.telemetry=Te.default(this.debug),this.scenarioMarker=new ee.default(this.omnichannelConfig),this.ic3ClientLogger=E.createIC3ClientLogger(this.omnichannelConfig),this.ocSdkLogger=E.createOCSDKLogger(this.omnichannelConfig),this.acsClientLogger=E.createACSClientLogger(this.omnichannelConfig),this.acsAdapterLogger=E.createACSAdapterLogger(this.omnichannelConfig),this.scenarioMarker.useTelemetry(this.telemetry),this.ic3ClientLogger.useTelemetry(this.telemetry),this.ocSdkLogger.useTelemetry(this.telemetry),this.acsClientLogger.useTelemetry(this.telemetry),this.acsAdapterLogger.useTelemetry(this.telemetry),Ce.default(re),b.default(fe),(null===(me=this.chatSDKConfig.telemetry)||void 0===me?void 0:me.disable)&&(null===(ve=this.telemetry)||void 0===ve||ve.disable()),(null===(be=this.chatSDKConfig.telemetry)||void 0===be?void 0:be.ariaTelemetryKey)&&this.telemetry.initialize(this.chatSDKConfig.telemetry.ariaTelemetryKey),null===(Ie=this.ic3ClientLogger)||void 0===Ie||Ie.setRequestId(this.requestId),null===(ke=this.ocSdkLogger)||void 0===ke||ke.setRequestId(this.requestId),null===(qe=this.acsClientLogger)||void 0===qe||qe.setRequestId(this.requestId),null===(Re=this.acsAdapterLogger)||void 0===Re||Re.setRequestId(this.requestId)}return _e.prototype.setDebug=function(re){var fe,me,ve,be,Ie,ke;this.debug=re,null===(fe=this.AMSClient)||void 0===fe||fe.setDebug(re),null===(me=this.telemetry)||void 0===me||me.setDebug(re),this.scenarioMarker.setDebug(re),null===(ve=this.ic3ClientLogger)||void 0===ve||ve.setDebug(re),null===(be=this.ocSdkLogger)||void 0===be||be.setDebug(re),null===(Ie=this.acsClientLogger)||void 0===Ie||Ie.setDebug(re),null===(ke=this.acsAdapterLogger)||void 0===ke||ke.setDebug(re)},_e.prototype.initialize=function(){return _(this,void 0,void 0,function(){var re,fe,me;return h(this,function(be){switch(be.label){case 0:if(this.scenarioMarker.startScenario($.default.InitializeChatSDK),this.isInitialized)return this.scenarioMarker.completeScenario($.default.InitializeChatSDK),[2,this.liveChatConfig];be.label=1;case 1:return be.trys.push([1,8,,9]),this.OCSDKProvider=v.SDKProvider,re=this,[4,v.SDKProvider.getSDK(this.omnichannelConfig,{},this.ocSdkLogger)];case 2:return re.OCClient=be.sent(),[4,this.getChatConfig()];case 3:return be.sent(),this.liveChatVersion!==y.default.V2?[3,5]:(this.ACSClient=new f.default(this.acsClientLogger),fe=this,[4,ie.default({framedMode:I.isBrowser(),debug:!1,logger:void 0})]);case 4:return fe.AMSClient=be.sent(),[3,7];case 5:return me=this,[4,this.getIC3Client()];case 6:me.IC3Client=be.sent(),be.label=7;case 7:return this.isInitialized=!0,this.scenarioMarker.completeScenario($.default.InitializeChatSDK),[3,9];case 8:return be.sent(),this.scenarioMarker.failScenario($.default.InitializeChatSDK),[3,9];case 9:return[2,this.liveChatConfig]}})})},_e.prototype.getChatReconnectContext=function(re){return void 0===re&&(re={}),_(this,void 0,void 0,function(){var fe,ve,be,ke,qe,Ie;return h(this,function(Re){switch(Re.label){case 0:if(this.scenarioMarker.startScenario($.default.GetChatReconnectContext,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),fe={reconnectId:null,redirectURL:null},!this.authenticatedUserToken)return[3,5];Re.label=1;case 1:return Re.trys.push([1,3,,4]),[4,this.OCClient.getReconnectableChats({authenticatedUserToken:this.authenticatedUserToken})];case 2:return(ve=Re.sent())&&ve.reconnectid&&(fe.reconnectId=ve.reconnectid),this.scenarioMarker.completeScenario($.default.GetChatReconnectContext,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,4];case 3:return be=Re.sent(),Ie={response:"OCClientGetReconnectableChatsFailed"},this.scenarioMarker.failScenario($.default.GetChatReconnectContext,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(Ie)}),console.error("OmnichannelChatSDK/GetChatReconnectContext/error "+be),[3,4];case 4:return[3,9];case 5:if(!re.reconnectId)return[3,9];Re.label=6;case 6:return Re.trys.push([6,8,,9]),[4,this.OCClient.getReconnectAvailability(re.reconnectId)];case 7:return(ke=Re.sent())&&!ke.isReconnectAvailable?ke.reconnectRedirectionURL&&(fe.redirectURL=ke.reconnectRedirectionURL):fe.reconnectId=re.reconnectId,this.scenarioMarker.completeScenario($.default.GetChatReconnectContext,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,9];case 8:return qe=Re.sent(),Ie={response:"OCClientGetReconnectAvailabilityFailed"},this.scenarioMarker.failScenario($.default.GetChatReconnectContext,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(Ie)}),console.error("OmnichannelChatSDK/GetChatReconnectContext/error "+qe),[3,9];case 9:return[2,fe]}})})},_e.prototype.startChat=function(re){var fe,me,ve,be,Ie,ke,qe,Re,xe,Ge,Ye,Xe,We;return void 0===re&&(re={}),_(this,void 0,void 0,function(){var Ue,Wt,Zt,Ae,ze,ot,yt,At,zt,Qn,Jn,nt,et=this;return h(this,function(xt){switch(xt.label){case 0:if(this.scenarioMarker.startScenario($.default.StartChat,{RequestId:this.requestId}),this.isChatReconnect&&!(null===(fe=this.chatSDKConfig.chatReconnect)||void 0===fe?void 0:fe.disable)&&!this.isPersistentChat&&re.reconnectId&&(this.reconnectId=re.reconnectId),!this.isPersistentChat||(null===(me=this.chatSDKConfig.persistentChat)||void 0===me?void 0:me.disable))return[3,4];xt.label=1;case 1:return xt.trys.push([1,3,,4]),[4,this.OCClient.getReconnectableChats({authenticatedUserToken:this.authenticatedUserToken})];case 2:return(Ue=xt.sent())&&Ue.reconnectid&&(this.reconnectId=Ue.reconnectid),[3,4];case 3:throw xt.sent(),nt={response:"OCClientGetReconnectableChatsFailed"},Error(nt.response);case 4:return!re.liveChatContext||this.isPersistentChat||this.isChatReconnect?[3,6]:(this.chatToken=re.liveChatContext.chatToken||{},this.requestId=re.liveChatContext.requestId||v.uuidv4(),[4,this.getConversationDetails()]);case 5:if(Wt=xt.sent(),0===Object.keys(Wt).length)throw nt={response:"InvalidConversation"},this.scenarioMarker.failScenario($.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(nt)}),console.error("Conversation not found"),Error(nt.response);if(Wt.state===A.default.WrapUp||Wt.state===A.default.Closed)throw nt={response:"ClosedConversation"},this.scenarioMarker.failScenario($.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(nt)}),console.error("Unable to join conversation that's in '"+Wt.state+"' state"),Error(nt.response);xt.label=6;case 6:return this.chatToken&&0===Object.keys(this.chatToken).length?[4,this.getChatToken(!1)]:[3,8];case 7:xt.sent(),xt.label=8;case 8:null===(ve=this.ic3ClientLogger)||void 0===ve||ve.setChatId(this.chatToken.chatId||""),null===(be=this.ocSdkLogger)||void 0===be||be.setChatId(this.chatToken.chatId||""),null===(Ie=this.acsClientLogger)||void 0===Ie||Ie.setChatId(this.chatToken.chatId||""),null===(ke=this.acsAdapterLogger)||void 0===ke||ke.setChatId(this.chatToken.chatId||""),Zt={initContext:{}},this.isPersistentChat&&!(null===(qe=this.chatSDKConfig.persistentChat)||void 0===qe?void 0:qe.disable)&&(Zt.reconnectId=this.reconnectId),this.isChatReconnect&&!(null===(Re=this.chatSDKConfig.chatReconnect)||void 0===Re?void 0:Re.disable)&&!this.isPersistentChat&&(Zt.reconnectId=this.reconnectId),re.customContext&&(Zt.initContext.customContextData=re.customContext),re.browser&&(Zt.initContext.browser=re.browser),re.os&&(Zt.initContext.os=re.os),re.locale&&(Zt.initContext.locale=re.locale),re.device&&(Zt.initContext.device=re.device),re.preChatResponse&&(Zt.initContext.preChatResponse=re.preChatResponse),re.initContext&&(Zt.initContext=re.initContext),this.authenticatedUserToken&&(Zt.authenticatedUserToken=this.authenticatedUserToken),xt.label=9;case 9:return xt.trys.push([9,11,,12]),[4,this.OCClient.sessionInit(this.requestId,Zt)];case 10:return xt.sent(),[3,12];case 11:return Ae=xt.sent(),nt={response:"OCClientSessionInitFailed"},this.scenarioMarker.failScenario($.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(nt)}),console.error("OmnichannelChatSDK/startChat/sessionInit/error "+Ae),[2,Ae];case 12:if(this.liveChatVersion!==y.default.V2)return[3,23];ze={token:this.chatToken.token,id:this.chatToken.visitorId||"teamsvisitor",threadId:this.chatToken.chatId,environmentUrl:this.chatToken.acsEndpoint,pollingInterval:1e3},xt.label=13;case 13:return xt.trys.push([13,15,,16]),[4,null===(xe=this.ACSClient)||void 0===xe?void 0:xe.initialize({token:ze.token,environmentUrl:ze.environmentUrl})];case 14:return xt.sent(),[3,16];case 15:return ot=xt.sent(),nt={response:"ACSClientInitializeFailed"},this.scenarioMarker.failScenario($.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(nt)}),console.error("OmnichannelChatSDK/startChat/initialize/error "+ot),[2,ot];case 16:return xt.trys.push([16,18,,19]),yt=this,[4,null===(Ge=this.ACSClient)||void 0===Ge?void 0:Ge.joinConversation({id:ze.id,threadId:ze.threadId,pollingInterval:ze.pollingInterval})];case 17:return yt.conversation=xt.sent(),this.scenarioMarker.completeScenario($.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,19];case 18:throw At=xt.sent(),nt={response:"ACSClientJoinConversationFailed"},this.scenarioMarker.failScenario($.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(nt)}),console.error("OmnichannelChatSDK/startChat/joinConversation/error "+At),Error(nt.response);case 19:return xt.trys.push([19,21,,22]),[4,null===(Ye=this.AMSClient)||void 0===Ye?void 0:Ye.initialize({chatToken:this.chatToken})];case 20:return xt.sent(),[3,22];case 21:throw xt.sent(),nt={response:"AMSClientInitializeFailed"},this.scenarioMarker.failScenario($.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(nt)}),Error(nt.response);case 22:return[3,29];case 23:return xt.trys.push([23,25,,26]),[4,this.IC3Client.initialize({token:this.chatToken.token,regionGtms:this.chatToken.regionGTMS,visitor:!0})];case 24:return xt.sent(),[3,26];case 25:return zt=xt.sent(),nt={response:"IC3ClientInitializeFailed"},this.scenarioMarker.failScenario($.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(nt)}),console.error("OmnichannelChatSDK/startChat/initialize/error "+zt),[2,zt];case 26:return xt.trys.push([26,28,,29]),Qn=this,[4,this.IC3Client.joinConversation(this.chatToken.chatId)];case 27:return Qn.conversation=xt.sent(),this.scenarioMarker.completeScenario($.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,29];case 28:return Jn=xt.sent(),nt={response:"IC3ClientJoinConversationFailed"},this.scenarioMarker.failScenario($.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(nt)}),console.error("OmnichannelChatSDK/startChat/joinConversation/error "+Jn),[2,Jn];case 29:return this.isPersistentChat&&!(null===(Xe=this.chatSDKConfig.persistentChat)||void 0===Xe?void 0:Xe.disable)&&(this.refreshTokenTimer=setInterval(function(){return _(et,void 0,void 0,function(){return h(this,function(pr){switch(pr.label){case 0:return[4,this.getChatToken(!1)];case 1:return pr.sent(),this.updateChatToken(this.chatToken.token,this.chatToken.regionGTMS),[2]}})})},null===(We=this.chatSDKConfig.persistentChat)||void 0===We?void 0:We.tokenUpdateTime)),[2]}})})},_e.prototype.endChat=function(){var re,fe,me,ve,be,Ie,ke,qe,Re,xe,Ge;return _(this,void 0,void 0,function(){var Ye,Xe,st;return h(this,function(ut){switch(ut.label){case 0:this.scenarioMarker.startScenario($.default.EndChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),Ye={},this.isPersistentChat&&!(null===(re=this.chatSDKConfig.persistentChat)||void 0===re?void 0:re.disable)&&(Xe=null!==this.reconnectId,Ye.isPersistentChat=this.isPersistentChat,Ye.isReconnectChat=Xe),this.isChatReconnect&&!(null===(fe=this.chatSDKConfig.chatReconnect)||void 0===fe?void 0:fe.disable)&&!this.isPersistentChat&&(Ye.isReconnectChat=null!==this.reconnectId),this.authenticatedUserToken&&(Ye.authenticatedUserToken=this.authenticatedUserToken),ut.label=1;case 1:return ut.trys.push([1,3,,4]),[4,this.OCClient.sessionClose(this.requestId,Ye)];case 2:return ut.sent(),this.scenarioMarker.completeScenario($.default.EndChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),null===(me=this.conversation)||void 0===me||me.disconnect(),this.conversation=null,this.requestId=v.uuidv4(),this.chatToken={},this.reconnectId=null,null===(ve=this.ic3ClientLogger)||void 0===ve||ve.setRequestId(this.requestId),null===(be=this.ic3ClientLogger)||void 0===be||be.setChatId(""),null===(Ie=this.ocSdkLogger)||void 0===Ie||Ie.setRequestId(this.requestId),null===(ke=this.ocSdkLogger)||void 0===ke||ke.setChatId(""),null===(qe=this.acsClientLogger)||void 0===qe||qe.setRequestId(this.requestId),null===(Re=this.acsClientLogger)||void 0===Re||Re.setChatId(""),null===(xe=this.acsAdapterLogger)||void 0===xe||xe.setRequestId(this.requestId),null===(Ge=this.acsAdapterLogger)||void 0===Ge||Ge.setChatId(""),[3,4];case 3:return st=ut.sent(),this.scenarioMarker.failScenario($.default.EndChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify({response:"OCClientSessionCloseFailed"})}),console.error("OmnichannelChatSDK/endChat/error "+st),[2,st];case 4:return null!==this.refreshTokenTimer&&(clearInterval(this.refreshTokenTimer),this.refreshTokenTimer=null),[2]}})})},_e.prototype.getCurrentLiveChatContext=function(){return _(this,void 0,void 0,function(){var re,fe,me;return h(this,function(ve){switch(ve.label){case 0:return[4,this.getChatToken()];case 1:return re=ve.sent(),this.scenarioMarker.startScenario($.default.GetCurrentLiveChatContext,{RequestId:fe=this.requestId,ChatId:re.chatId}),me={chatToken:re,requestId:fe},0===Object.keys(me.chatToken).length?[2,{}]:(this.scenarioMarker.completeScenario($.default.GetCurrentLiveChatContext,{RequestId:fe,ChatId:re.chatId}),[2,me])}})})},_e.prototype.getConversationDetails=function(){var re,fe;return _(this,void 0,void 0,function(){var me,Ie,ke,qe;return h(this,function(Re){switch(Re.label){case 0:this.scenarioMarker.startScenario($.default.GetConversationDetails,{RequestId:this.requestId,ChatId:(null===(re=this.chatToken)||void 0===re?void 0:re.chatId)||""}),Re.label=1;case 1:return Re.trys.push([1,3,,4]),[4,this.OCClient.getLWIDetails(this.requestId)];case 2:return me=Re.sent(),ke={state:me.State,conversationId:me.ConversationId},(Ie=me.AgentAcceptedOn)&&(ke.agentAcceptedOn=Ie),this.scenarioMarker.completeScenario($.default.GetConversationDetails,{RequestId:this.requestId,ChatId:(null===(fe=this.chatToken)||void 0===fe?void 0:fe.chatId)||""}),[2,ke];case 3:return qe=Re.sent(),this.scenarioMarker.failScenario($.default.GetConversationDetails,{RequestId:this.requestId,ChatId:this.chatToken.chatId||""}),console.error("OmnichannelChatSDK/getConversationDetails/error "+qe),[3,4];case 4:return[2,{}]}})})},_e.prototype.getPreChatSurvey=function(re){return void 0===re&&(re=!0),_(this,void 0,void 0,function(){var fe;return h(this,function(me){this.scenarioMarker.startScenario($.default.GetPreChatSurvey);try{return fe=re?JSON.parse(this.preChatSurvey):this.preChatSurvey,this.scenarioMarker.completeScenario($.default.GetPreChatSurvey),[2,fe]}catch(ve){this.scenarioMarker.failScenario($.default.GetPreChatSurvey)}return[2]})})},_e.prototype.getLiveChatConfig=function(re){return void 0===re&&(re=!0),_(this,void 0,void 0,function(){return h(this,function(fe){return re?[2,this.liveChatConfig]:[2,this.getChatConfig()]})})},_e.prototype.getChatToken=function(re){var fe,me;return void 0===re&&(re=!0),_(this,void 0,void 0,function(){var ve,be,ke,Re,xe,Ge,Ye,Xe,We;return h(this,function(Ue){switch(Ue.label){case 0:if(this.scenarioMarker.startScenario($.default.GetChatToken,{RequestId:this.requestId}),re)return[3,5];Ue.label=1;case 1:return Ue.trys.push([1,3,,4]),ve={},this.authenticatedUserToken&&(ve.authenticatedUserToken=this.authenticatedUserToken),this.isPersistentChat&&!(null===(fe=this.chatSDKConfig.persistentChat)||void 0===fe?void 0:fe.disable)&&(ve.reconnectId=this.reconnectId),this.isChatReconnect&&!(null===(me=this.chatSDKConfig.chatReconnect)||void 0===me?void 0:me.disable)&&!this.isPersistentChat&&(ve.reconnectId=this.reconnectId),[4,this.OCClient.getChatToken(this.requestId,ve)];case 2:return be=Ue.sent(),ke=be.Token,Re=be.ExpiresIn,xe=be.VisitorId,Ge=be.VoiceVideoCallToken,Ye=be.ACSEndpoint,Xe=be.AttachmentConfiguration,this.chatToken={chatId:be.ChatId,regionGTMS:JSON.parse(be.RegionGtms),requestId:this.requestId,token:ke,expiresIn:Re,visitorId:xe,voiceVideoCallToken:Ge,acsEndpoint:Ye},Xe&&Xe.AttachmentServiceEndpoint&&(this.chatToken.amsEndpoint=Xe.AttachmentServiceEndpoint),this.scenarioMarker.completeScenario($.default.GetChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,4];case 3:return We=Ue.sent(),this.scenarioMarker.failScenario($.default.GetChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify({response:"OCClientGetChatTokenFailed"})}),console.error("OmnichannelChatSDK/getChatToken/error "+We),[3,4];case 4:return[3,6];case 5:this.scenarioMarker.completeScenario($.default.GetChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),Ue.label=6;case 6:return[2,this.chatToken]}})})},_e.prototype.getCallingToken=function(){return _(this,void 0,void 0,function(){return h(this,function(re){return this.chatToken&&0===Object.keys(this.chatToken).length?[2,""]:this.chatToken.voiceVideoCallToken?(this.debug&&console.log("calling:acs"),[2,this.chatToken.voiceVideoCallToken.Token]):(this.debug&&console.log("calling:skype"),[2,this.chatToken.token])})})},_e.prototype.getMessages=function(){var re;return _(this,void 0,void 0,function(){var fe;return h(this,function(ve){switch(ve.label){case 0:this.scenarioMarker.startScenario($.default.GetMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),ve.label=1;case 1:return ve.trys.push([1,3,,4]),[4,null===(re=this.conversation)||void 0===re?void 0:re.getMessages()];case 2:return fe=ve.sent(),this.scenarioMarker.completeScenario($.default.GetMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,fe];case 3:return ve.sent(),this.scenarioMarker.failScenario($.default.GetMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,4];case 4:return[2]}})})},_e.prototype.getDataMaskingRules=function(){return _(this,void 0,void 0,function(){return h(this,function(re){return[2,this.dataMaskingRules]})})},_e.prototype.sendMessage=function(re){var fe;return _(this,void 0,void 0,function(){var me,ve,be,Ie,ke,qe,xe,Ge,Ye,Xe,st;return h(this,function(ut){switch(ut.label){case 0:if(this.scenarioMarker.startScenario($.default.SendMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),ve=(me=this.chatSDKConfig.dataMasking).disable,be=me.maskingCharacter,Ie=re.content,Object.keys(this.dataMaskingRules).length>0&&!ve)for(ke=0,qe=Object.values(this.dataMaskingRules);ke<qe.length;ke++)for(xe=new RegExp(qe[ke],"g"),Ge=void 0;Ge=xe.exec(Ie);)Ye=Ge[0].replace(/./g,be),Ie=Ie.replace(Ge[0],Ye);if(re.content=Ie,this.liveChatVersion!==y.default.V2)return[3,5];(Xe={content:re.content}).metadata={widgetId:this.omnichannelConfig.widgetId,clientMessageId:Date.now().toString()},re.metadata&&(Xe.metadata=s(s({},Xe.metadata),re.metadata)),ut.label=1;case 1:return ut.trys.push([1,3,,4]),[4,null===(fe=this.conversation)||void 0===fe?void 0:fe.sendMessage(Xe)];case 2:return ut.sent(),this.scenarioMarker.completeScenario($.default.SendMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,4];case 3:throw ut.sent(),this.scenarioMarker.failScenario($.default.SendMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),new Error("ChatSDKSendMessageFailed");case 4:return[3,9];case 5:st={content:re.content,timestamp:new Date,contentType:F.default.Text,deliveryMode:R.default.Bridged,messageType:q.default.UserMessage,properties:void 0,tags:p(Y.defaultMessageTags),sender:{displayName:"Customer",id:"customer",type:j.default.User}},re.tags&&(st.tags=re.tags),re.timestamp&&(st.timestamp=re.timestamp),ut.label=6;case 6:return ut.trys.push([6,8,,9]),[4,this.conversation.sendMessage(st)];case 7:return ut.sent(),this.scenarioMarker.completeScenario($.default.SendMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,9];case 8:throw ut.sent(),this.scenarioMarker.failScenario($.default.SendMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),new Error("ChatSDKSendMessageFailed");case 9:return[2]}})})},_e.prototype.onNewMessage=function(re,fe){var me,ve;return void 0===fe&&(fe={}),_(this,void 0,void 0,function(){var be,ke,qe,xe,Ge,Ie,Ye,Xe,Re,We,st,Ue=this;return h(this,function(ut){switch(ut.label){case 0:return this.scenarioMarker.startScenario($.default.OnNewMessage,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.liveChatVersion!==y.default.V2?[3,3]:(be=new Set,fe.rehydrate?(this.debug&&console.log("[OmnichannelChatSDK][onNewMessage] rehydrate"),[4,this.getMessages()]):[3,2]);case 1:for(Ie=ut.sent(),ke=0,qe=Ie.reverse();ke<qe.length;ke++)!be.has(xe=(Re=qe[ke]).id)&&(be.add(xe),re(Re));ut.label=2;case 2:try{null===(me=this.conversation)||void 0===me||me.registerOnNewMessage(function(nt){var Wt=nt.id,Zt=ce.default(nt,{liveChatVersion:Ue.liveChatVersion,debug:Ue.debug});be.has(Wt)||(re(Zt),be.add(Wt))}),this.scenarioMarker.completeScenario($.default.OnNewMessage,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(nt){this.scenarioMarker.failScenario($.default.OnNewMessage,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}return[3,6];case 3:return Ge=new Set,fe.rehydrate?(this.debug&&console.log("[OmnichannelChatSDK][onNewMessage] rehydrate"),[4,this.getMessages()]):[3,5];case 4:if(Ie=ut.sent())for(Ye=0,Xe=Ie.reverse();Ye<Xe.length;Ye++)!Ge.has(We=(Re=Xe[Ye]).clientmessageid)&&(Ge.add(We),st=ce.default(Re,{liveChatVersion:this.liveChatVersion,debug:this.debug}),re(st));ut.label=5;case 5:try{null===(ve=this.conversation)||void 0===ve||ve.registerOnNewMessage(function(nt){var Wt=nt.clientmessageid,Zt=nt.messageType;if(!Z.isCustomerMessage(nt)&&!Ge.has(Wt)&&Zt!==q.default.Typing){var Ae=ce.default(nt,{liveChatVersion:Ue.liveChatVersion,debug:Ue.debug});re(Ae)}}),this.scenarioMarker.completeScenario($.default.OnNewMessage,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(nt){this.scenarioMarker.failScenario($.default.OnNewMessage,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}ut.label=6;case 6:return[2]}})})},_e.prototype.sendTypingEvent=function(){return _(this,void 0,void 0,function(){var fe,me,ve,be;return h(this,function(Ie){switch(Ie.label){case 0:if(this.scenarioMarker.startScenario($.default.SendTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.liveChatVersion!==y.default.V2)return[3,6];Ie.label=1;case 1:return Ie.trys.push([1,4,,5]),[4,this.OCClient.sendTypingIndicator(this.requestId,y.default.V2,{customerDisplayName:c.default.Customer})];case 2:return Ie.sent(),[4,this.conversation.sendTyping()];case 3:return Ie.sent(),this.scenarioMarker.completeScenario($.default.SendTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,5];case 4:throw Ie.sent(),this.scenarioMarker.failScenario($.default.SendTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),new Error("OCClientSendTypingFailed");case 5:return[3,12];case 6:fe="{isTyping: 0}",Ie.label=7;case 7:return Ie.trys.push([7,11,,12]),[4,this.conversation.indicateTypingStatus(0)];case 8:return Ie.sent(),[4,this.conversation.getMembers()];case 9:return me=Ie.sent(),ve=me.filter(function(ke){return ke.type===j.default.Bot}),[4,this.conversation.sendMessageToBot(ve[0].id,{payload:fe})];case 10:return Ie.sent(),this.scenarioMarker.completeScenario($.default.SendTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,12];case 11:return be=Ie.sent(),console.error("OmnichannelChatSDK/sendTypingEvent/error"),this.scenarioMarker.failScenario($.default.SendTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,be];case 12:return[2]}})})},_e.prototype.onTypingEvent=function(re){var fe;return _(this,void 0,void 0,function(){return h(this,function(me){if(this.scenarioMarker.startScenario($.default.OnTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.liveChatVersion===y.default.V2)try{this.conversation.onTypingEvent(re),this.scenarioMarker.completeScenario($.default.OnTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(ve){this.scenarioMarker.failScenario($.default.OnTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}else try{null===(fe=this.conversation)||void 0===fe||fe.registerOnNewMessage(function(ve){var be=ve.messageType;Z.isCustomerMessage(ve)||be===q.default.Typing&&re(ve)}),this.scenarioMarker.completeScenario($.default.OnTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(ve){this.scenarioMarker.failScenario($.default.OnTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}return[2]})})},_e.prototype.onAgentEndSession=function(re){var fe;return _(this,void 0,void 0,function(){var me=this;return h(this,function(ve){if(this.scenarioMarker.startScenario($.default.OnAgentEndSession,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.liveChatVersion===y.default.V2)try{this.conversation.registerOnThreadUpdate(function(be){re(be)}),this.scenarioMarker.completeScenario($.default.OnAgentEndSession,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(be){this.scenarioMarker.failScenario($.default.OnAgentEndSession,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}else try{null===(fe=this.conversation)||void 0===fe||fe.registerOnThreadUpdate(function(be){1===be.members.length&&(re(be),null!==me.refreshTokenTimer&&(clearInterval(me.refreshTokenTimer),me.refreshTokenTimer=null))}),this.scenarioMarker.completeScenario($.default.OnAgentEndSession,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(be){this.scenarioMarker.failScenario($.default.OnAgentEndSession,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}return[2]})})},_e.prototype.uploadFileAttachment=function(re){var fe,me,ve,be;return _(this,void 0,void 0,function(){var Ie,ke,qe,Re,xe,Ge,We,Ye,st;return h(this,function(Ue){switch(Ue.label){case 0:return this.scenarioMarker.startScenario($.default.UploadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.liveChatVersion!==y.default.V2?[3,7]:[4,null===(fe=this.AMSClient)||void 0===fe?void 0:fe.createObject(null===(me=this.chatToken)||void 0===me?void 0:me.chatId,re)];case 1:return Ie=Ue.sent(),ke=Ie.id,[4,null===(ve=this.AMSClient)||void 0===ve?void 0:ve.uploadDocument(ke,re)];case 2:qe=Ue.sent(),Re={amsReferences:JSON.stringify([ke])},xe={amsMetadata:JSON.stringify([{contentType:re.type,fileName:re.name}])},Ge={content:"",metadata:s(s({widgetId:this.omnichannelConfig.widgetId,clientMessageId:Date.now().toString()},Re),xe)},Ye={content:"",timestamp:new Date,contentType:F.default.Text,deliveryMode:R.default.Bridged,messageType:q.default.UserMessage,tags:p(Y.defaultMessageTags),sender:{displayName:"Customer",id:"customer",type:j.default.User},fileMetadata:qe},Ue.label=3;case 3:return Ue.trys.push([3,5,,6]),[4,null===(be=this.conversation)||void 0===be?void 0:be.sendMessage(Ge)];case 4:return Ue.sent(),this.scenarioMarker.completeScenario($.default.UploadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,Ye];case 5:return Ue.sent(),console.error("OmnichannelChatSDK/uploadFileAttachment/sendMessage/error"),this.scenarioMarker.failScenario($.default.UploadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,6];case 6:return[2,{}];case 7:return We=void 0,I.default.isReactNative()||I.default.isNode()?[4,this.conversation.sendFileData(re,S.default.AmsBasedFileSharing)]:[3,9];case 8:return We=Ue.sent(),[3,11];case 9:return[4,this.conversation.uploadFile(re,S.default.AmsBasedFileSharing)];case 10:We=Ue.sent(),Ue.label=11;case 11:Ye={content:"",timestamp:new Date,contentType:F.default.Text,deliveryMode:R.default.Bridged,messageType:q.default.UserMessage,tags:p(Y.defaultMessageTags),sender:{displayName:"Customer",id:"customer",type:j.default.User},fileMetadata:We},Ue.label=12;case 12:return Ue.trys.push([12,14,,15]),[4,this.conversation.sendFileMessage(We,Ye)];case 13:return Ue.sent(),this.scenarioMarker.completeScenario($.default.UploadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,Ye];case 14:return st=Ue.sent(),console.error("OmnichannelChatSDK/uploadFileAttachment/error: "+st),this.scenarioMarker.failScenario($.default.UploadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,st];case 15:return[2]}})})},_e.prototype.downloadFileAttachment=function(re){var fe,me;return _(this,void 0,void 0,function(){var ve,be,Ie,qe,Re;return h(this,function(xe){switch(xe.label){case 0:if(this.scenarioMarker.startScenario($.default.DownloadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.liveChatVersion!==y.default.V2)return[3,6];xe.label=1;case 1:return xe.trys.push([1,4,,5]),[4,null===(fe=this.AMSClient)||void 0===fe?void 0:fe.getViewStatus(re)];case 2:return ve=xe.sent(),be=ve.view_location,[4,null===(me=this.AMSClient)||void 0===me?void 0:me.getView(re,be)];case 3:return Ie=xe.sent(),this.scenarioMarker.completeScenario($.default.DownloadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,Ie];case 4:throw xe.sent(),this.scenarioMarker.failScenario($.default.DownloadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),new Error("DownloadFileAttachmentFailed");case 5:return[3,9];case 6:return xe.trys.push([6,8,,9]),[4,this.conversation.downloadFile(re)];case 7:return qe=xe.sent(),this.scenarioMarker.completeScenario($.default.DownloadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,qe];case 8:throw Re=xe.sent(),console.error("OmnichannelChatSDK/downloadFileAttachment/error: "+Re),this.scenarioMarker.failScenario($.default.DownloadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),new Error("DownloadFileAttachmentFailed");case 9:return[2]}})})},_e.prototype.emailLiveChatTranscript=function(re){return _(this,void 0,void 0,function(){var fe,ve;return h(this,function(be){fe={},this.scenarioMarker.startScenario($.default.EmailLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId});try{return this.authenticatedUserToken&&(fe.authenticatedUserToken=this.authenticatedUserToken),ve=this.OCClient.emailTranscript(this.requestId,this.chatToken.token,{ChatId:this.chatToken.chatId,EmailAddress:re.emailAddress,DefaultAttachmentMessage:re.attachmentMessage,CustomerLocale:re.locale},fe),this.scenarioMarker.completeScenario($.default.EmailLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,ve]}catch(Ie){console.error("OmnichannelChatSDK/emailLiveChatTranscript/error: "+Ie),this.scenarioMarker.failScenario($.default.EmailLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}return[2]})})},_e.prototype.getLiveChatTranscript=function(){return _(this,void 0,void 0,function(){var re,fe;return h(this,function(me){re={},this.scenarioMarker.startScenario($.default.GetLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId});try{return this.authenticatedUserToken&&(re.authenticatedUserToken=this.authenticatedUserToken),fe=this.OCClient.getChatTranscripts(this.requestId,this.chatToken.chatId,this.chatToken.token,re),this.scenarioMarker.completeScenario($.default.GetLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,fe]}catch(ve){this.scenarioMarker.failScenario($.default.GetLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}return[2]})})},_e.prototype.createChatAdapter=function(re){return void 0===re&&(re=null),_(this,void 0,void 0,function(){var fe,me=this;return h(this,function(ve){return I.default.isNode()||I.default.isReactNative()?[2,Promise.reject("ChatAdapter is only supported on browser")]:(fe=[w.default.ACS,w.default.IC3],re&&!fe.includes(re)?[2,Promise.reject("ChatAdapter for protocol "+re+" currently not supported")]:re===w.default.ACS||this.liveChatVersion===y.default.V2?[2,new Promise(function(be,Ie){return _(me,void 0,void 0,function(){var ke,qe,Re,xe,Ye,Ge=this;return h(this,function(Xe){switch(Xe.label){case 0:return ke=[T.default()],qe=[M.default()],Re={enableAdaptiveCards:!0,enableThreadMemberUpdateNotification:!0,enableLeaveThreadOnWindowClosed:!1,egressMiddleware:ke,ingressMiddleware:qe},xe=this.resolveChatAdapterUrl(re||w.default.ACS),null===(Ye=this.telemetry)||void 0===Ye||Ye.setCDNPackages({ACSAdapter:xe}),[4,ne.loadScript(xe,function(){Ge.debug&&console.debug("ACSAdapter loaded!");try{var We=window.ChatAdapter,st=new d.default(Ge.AMSClient,Ge.acsAdapterLogger),Ue=We.createACSAdapter(Ge.chatToken.token,Ge.chatToken.visitorId||"teamsvisitor",Ge.chatToken.chatId,Ge.chatToken.acsEndpoint,st,1e3,c.default.Customer,void 0,void 0,Re);be(Ue)}catch(ut){throw new Error("Failed to load ACSAdapter")}},function(){Ie("Failed to load ACSADapter")})];case 1:return Xe.sent(),[2]}})})})]:re===w.default.IC3||this.liveChatVersion===y.default.V1?[2,new Promise(function(be,Ie){return _(me,void 0,void 0,function(){var ke,Re,qe=this;return h(this,function(xe){switch(xe.label){case 0:return ke=this.resolveChatAdapterUrl(re||w.default.IC3),null===(Re=this.telemetry)||void 0===Re||Re.setCDNPackages({IC3Adapter:ke}),this.scenarioMarker.startScenario($.default.CreateIC3Adapter),[4,ne.loadScript(ke,function(){qe.debug&&console.debug("IC3Adapter loaded!");var Ge={chatToken:qe.chatToken,userDisplayName:"Customer",userId:"teamsvisitor",sdkURL:qe.resolveIC3ClientUrl(),sdk:qe.IC3Client},Ye=new window.Microsoft.BotFramework.WebChat.IC3Adapter(Ge);Ye.logger=qe.ic3ClientLogger,window.Microsoft.BotFramework.WebChat.IC3SDKProvider.disposeSdk=function(){},qe.scenarioMarker.completeScenario($.default.CreateIC3Adapter),be(Ye)},function(){qe.scenarioMarker.failScenario($.default.CreateIC3Adapter),Ie("Failed to load IC3Adapter")})];case 1:return xe.sent(),[2]}})})})]:[2,Promise.reject("ChatAdapter for protocol "+re+" currently not supported")])})})},_e.prototype.getVoiceVideoCalling=function(re){return void 0===re&&(re={}),_(this,void 0,void 0,function(){var fe,ve,be,Ie,ke=this;return h(this,function(qe){switch(qe.label){case 0:return I.default.isNode()||I.default.isReactNative()?[2,Promise.reject("VoiceVideoCalling is only supported on browser")]:this.callingOption.toString()===C.default.NoCalling.toString()?[2,Promise.reject("Voice and video call is not enabled")]:[4,this.getChatConfig()];case 1:return fe=qe.sent(),ve=fe.LiveWSAndLiveChatEngJoin.msdyn_widgetsnippet,be=new RegExp('src="(https:\\/\\/[\\w-.]+)[\\w-.\\/]+"'),(Ie=ve.match(be))&&Ie.length?[2,new Promise(function(Re,xe){return _(ke,void 0,void 0,function(){var Ge,Xe,Ye=this;return h(this,function(We){switch(We.label){case 0:return this.scenarioMarker.startScenario($.default.GetVoiceVideoCalling),Ge=Ie[1]+"/livechatwidget/WebChatControl/lib/CallingBundle.js",null===(Xe=this.telemetry)||void 0===Xe||Xe.setCDNPackages({VoiceVideoCalling:Ge}),[4,ne.loadScript(Ge,function(){return _(Ye,void 0,void 0,function(){var st;return h(this,function(Ue){switch(Ue.label){case 0:return this.debug&&console.debug(Ge+" loaded!"),[4,te.default(re)];case 1:return st=Ue.sent(),this.scenarioMarker.completeScenario($.default.GetVoiceVideoCalling),st.useScenarioMarker(this.scenarioMarker),Re(st),[2]}})})},function(){return _(Ye,void 0,void 0,function(){return h(this,function(Ue){return this.scenarioMarker.failScenario($.default.GetVoiceVideoCalling,{ExceptionDetails:JSON.stringify({response:"VoiceVideoCallingLoadFailed"})}),xe("Failed to load VoiceVideoCalling"),[2]})})})];case 1:return We.sent(),[2]}})})})]:[2]}})})},_e.prototype.getPostChatSurveyContext=function(){return _(this,void 0,void 0,function(){var re,fe,me,Ie,ke,qe,Re,xe,Ge,Ye,Xe,We,st,Ue,nt;return h(this,function(Wt){switch(Wt.label){case 0:this.scenarioMarker.startScenario($.default.GetPostChatSurveyContext,{RequestId:this.requestId}),Wt.label=1;case 1:return Wt.trys.push([1,6,,7]),Ie=(me=(fe=this.liveChatConfig).LiveWSAndLiveChatEngJoin).msfp_sourcesurveyidentifier,ke=me.postConversationSurveyOwnerId,Re=null!=(qe=fe.ChatWidgetLanguage.msdyn_localeid)?qe:"1033",me.msdyn_postconversationsurveyenable?[4,this.OCClient.getLWIDetails(this.requestId)]:[3,4];case 2:return xe=Wt.sent(),Ge=(null==xe?void 0:xe.CanRenderPostChat)&&"True"===(null==xe?void 0:xe.CanRenderPostChat),Ye={FormId:Ie,ConversationId:re=null==xe?void 0:xe.ConversationId,OCLocaleCode:le.getLocaleStringFromId(Re)},Xe={requestId:this.requestId},this.authenticatedUserToken&&(Xe.authenticatedUserToken=this.authenticatedUserToken),[4,this.OCClient.getSurveyInviteLink(ke,Ye)];case 3:return We=Wt.sent(),st=void 0,Ue=void 0,null!=We?null==We.inviteList||1!=We.inviteList.length?(this.scenarioMarker.failScenario($.default.GetPostChatSurveyContext,{ConversationId:re,RequestId:this.requestId,ExceptionDetails:"Survey Invite link failed to send response."}),[2,Promise.reject("Survey Invite link failed to send response.")]):(st=We.inviteList[0].invitationLink,null!=We.formsProLocaleCode&&(Ue=We.formsProLocaleCode),[2,Promise.resolve({participantJoined:Ge,surveyInviteLink:st,formsProLocale:Ue})]):(this.scenarioMarker.failScenario($.default.GetPostChatSurveyContext,{ConversationId:re,RequestId:this.requestId,ExceptionDetails:"surveyInviteLinkResponse is null."}),[2,Promise.reject("surveyInviteLinkResponse is null.")]);case 4:return this.scenarioMarker.failScenario($.default.GetPostChatSurveyContext,{RequestId:this.requestId,ExceptionDetails:"Post Chat Survey is disabled. Please check the Omnichannel Administration Portal."}),[2,Promise.reject("Post Chat is disabled from admin side.")];case 5:return[3,7];case 6:return nt=Wt.sent(),this.scenarioMarker.failScenario($.default.GetPostChatSurveyContext,{ConversationId:re,RequestId:this.requestId,ExceptionDetails:JSON.stringify(nt)}),[2,Promise.reject("Retrieving post chat context failed "+JSON.stringify(nt))];case 7:return[2]}})})},_e.prototype.getIC3Client=function(){return _(this,void 0,void 0,function(){var re,fe=this;return h(this,function(me){switch(me.label){case 0:return I.default.isNode()||I.default.isReactNative()?(this.debug&&console.debug("IC3Core"),this.scenarioMarker.startScenario($.default.GetIC3Client),this.IC3SDKProvider=P.SDKProvider,[4,P.SDKProvider.getSDK({hostType:N.default.Page,protocolType:ue.default.IC3V1SDK})]):[3,2];case 1:return(re=me.sent()).setDebug(this.debug),this.scenarioMarker.completeScenario($.default.GetIC3Client),[2,re];case 2:return this.debug&&console.debug("IC3Client"),[2,new Promise(function(ve,be){return _(fe,void 0,void 0,function(){var Ie,qe,ke=this;return h(this,function(Re){switch(Re.label){case 0:return Ie=this.resolveIC3ClientUrl(),null===(qe=this.telemetry)||void 0===qe||qe.setCDNPackages({IC3Client:Ie}),this.scenarioMarker.startScenario($.default.GetIC3Client),window.addEventListener("ic3:sdk:load",function(){return _(ke,void 0,void 0,function(){var xe,Ge,Ye;return h(this,function(Xe){switch(Xe.label){case 0:return this.debug&&console.debug("ic3:sdk:load"),xe=window.Microsoft.CRM.Omnichannel.IC3Client.SDK,this.IC3SDKProvider=Ge=xe.SDKProvider,[4,Ge.getSDK({hostType:N.default.IFrame,protocolType:ue.default.IC3V1SDK,logger:this.ic3ClientLogger})];case 1:return Ye=Xe.sent(),this.scenarioMarker.completeScenario($.default.GetIC3Client),ve(Ye),[2]}})})}),[4,ne.loadScript(Ie,function(){ke.debug&&console.debug("IC3Client loaded!")},function(){ke.scenarioMarker.failScenario($.default.GetIC3Client,{ExceptionDetails:JSON.stringify({response:"IC3ClientLoadFailed"})}),be("Failed to load IC3Client")})];case 1:return Re.sent(),[2]}})})})]}})})},_e.prototype.getChatConfig=function(){return _(this,void 0,void 0,function(){var re,fe,me,ve,ke,qe,Re,xe,Ge,Ye,Xe,We,st,ut;return h(this,function(nt){switch(nt.label){case 0:return nt.trys.push([0,8,,9]),[4,this.OCClient.getChatConfig()];case 1:if(re=nt.sent(),fe=re.DataMaskingInfo,me=re.LiveChatConfigAuthSettings,ve=re.LiveWSAndLiveChatEngJoin,this.liveChatVersion=re.LiveChatVersion||y.default.V1,this.debug&&console.log("[OmnichannelChatSDK][getChatConfig][liveChatVersion] "+this.liveChatVersion),fe.setting.msdyn_maskforcustomer&&(this.dataMaskingRules=fe.dataMaskingRules),me&&(this.authSettings=me),ke=ve.PreChatSurvey,Re=ve.msdyn_callingoptions,Ye=!0===(qe=ve.msdyn_prechatenabled)||"true"==qe,Xe=!0===(Ge=ve.msdyn_enablechatreconnect)||"true"==Ge,(null==(xe=ve.msdyn_conversationmode)?void 0:xe.toString())===g.default.PersistentChat.toString()&&(this.isPersistentChat=!0),Xe&&!this.isPersistentChat&&(this.isChatReconnect=!0),Ye&&ke&&ke.trim().length>0&&(this.preChatSurvey=ke),!this.authSettings)return[3,7];if(this.scenarioMarker.startScenario($.default.GetAuthToken),!this.chatSDKConfig.getAuthToken)return[3,6];nt.label=2;case 2:return nt.trys.push([2,4,,5]),[4,this.chatSDKConfig.getAuthToken()];case 3:return(We=nt.sent())?(this.authenticatedUserToken=We,this.scenarioMarker.completeScenario($.default.GetAuthToken)):(st={response:"UndefinedAuthToken"},this.scenarioMarker.failScenario($.default.GetAuthToken,{ExceptionDetails:JSON.stringify(st)})),[3,5];case 4:return nt.sent(),st={response:"GetAuthTokenFailed"},this.scenarioMarker.failScenario($.default.GetAuthToken,{ExceptionDetails:JSON.stringify(st)}),[3,5];case 5:return[3,7];case 6:st={response:"GetAuthTokenNotFound"},this.scenarioMarker.failScenario($.default.GetAuthToken,{ExceptionDetails:JSON.stringify(st)}),nt.label=7;case 7:return this.preChatSurvey&&this.debug&&console.log("Prechat Survey!"),this.callingOption=Re,this.liveChatConfig=re,[2,this.liveChatConfig];case 8:return ut=nt.sent(),console.error("OmnichannelChatSDK/getChatConfig/error "+ut),[2,ut];case 9:return[2]}})})},_e.prototype.resolveIC3ClientUrl=function(){return this.chatSDKConfig.ic3Config&&"ic3ClientCDNUrl"in this.chatSDKConfig.ic3Config?this.chatSDKConfig.ic3Config.ic3ClientCDNUrl:this.chatSDKConfig.ic3Config&&"ic3ClientVersion"in this.chatSDKConfig.ic3Config?z.default.getIC3ClientCDNUrl(this.chatSDKConfig.ic3Config.ic3ClientVersion):z.default.getIC3ClientCDNUrl()},_e.prototype.resolveChatAdapterUrl=function(re){if(re&&![w.default.ACS,w.default.IC3].includes(re))throw new Error("ChatAdapter for protocol "+re+" currently not supported");return re===w.default.ACS||this.liveChatVersion===y.default.V2?this.chatSDKConfig.chatAdapterConfig&&"webChatACSAdapterCDNUrl"in this.chatSDKConfig.chatAdapterConfig?this.chatSDKConfig.chatAdapterConfig.webChatACSAdapterCDNUrl:this.chatSDKConfig.chatAdapterConfig&&"webChatACSAdapterVersion"in this.chatSDKConfig.chatAdapterConfig?z.default.getACSAdapterCDNUrl(this.chatSDKConfig.chatAdapterConfig.webChatACSAdapterVersion):z.default.getACSAdapterCDNUrl():re===w.default.IC3||this.liveChatVersion===y.default.V1?this.chatSDKConfig.chatAdapterConfig&&"webChatIC3AdapterCDNUrl"in this.chatSDKConfig.chatAdapterConfig?this.chatSDKConfig.chatAdapterConfig.webChatIC3AdapterCDNUrl:this.chatSDKConfig.chatAdapterConfig&&"webChatIC3AdapterVersion"in this.chatSDKConfig.chatAdapterConfig?z.default.getIC3AdapterCDNUrl(this.chatSDKConfig.chatAdapterConfig.webChatIC3AdapterVersion):z.default.getIC3AdapterCDNUrl():""},_e.prototype.updateChatToken=function(re,fe){return _(this,void 0,void 0,function(){var ve;return h(this,function(Ie){switch(Ie.label){case 0:this.scenarioMarker.startScenario($.default.UpdateChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),Ie.label=1;case 1:return Ie.trys.push([1,3,,4]),[4,this.IC3Client.initialize({token:re,regionGtms:fe,visitor:!0})];case 2:return Ie.sent(),this.scenarioMarker.completeScenario($.default.UpdateChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,4];case 3:return ve=Ie.sent(),this.scenarioMarker.failScenario($.default.UpdateChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify({response:"UpdateChatTokenFailed"})}),console.error("OmnichannelChatSDK/updateChatToken/error "+ve),[3,4];case 4:return[2]}})})},_e}();m.default=we},6633:function(K,m,u){"use strict";var s=this&&this.__awaiter||function(b,c,d,C){return new(d||(d=Promise))(function(g,T){function M(N){try{S(C.next(N))}catch(P){T(P)}}function R(N){try{S(C.throw(N))}catch(P){T(P)}}function S(N){N.done?g(N.value):function(g){return g instanceof d?g:new d(function(T){T(g)})}(N.value).then(M,R)}S((C=C.apply(b,c||[])).next())})},_=this&&this.__generator||function(b,c){var C,w,g,T,d={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return T={next:M(0),throw:M(1),return:M(2)},"function"==typeof Symbol&&(T[Symbol.iterator]=function(){return this}),T;function M(S){return function(N){return function(S){if(C)throw new TypeError("Generator is already executing.");for(;d;)try{if(C=1,w&&(g=2&S[0]?w.return:S[0]?w.throw||((g=w.return)&&g.call(w),0):w.next)&&!(g=g.call(w,S[1])).done)return g;switch(w=0,g&&(S=[2&S[0],g.value]),S[0]){case 0:case 1:g=S;break;case 4:return d.label++,{value:S[1],done:!1};case 5:d.label++,w=S[1],S=[0];continue;case 7:S=d.ops.pop(),d.trys.pop();continue;default:if(!(g=(g=d.trys).length>0&&g[g.length-1])&&(6===S[0]||2===S[0])){d=0;continue}if(3===S[0]&&(!g||S[1]>g[0]&&S[1]<g[3])){d.label=S[1];break}if(6===S[0]&&d.label<g[1]){d.label=g[1],g=S;break}if(g&&d.label<g[2]){d.label=g[2],d.ops.push(S);break}g[2]&&d.ops.pop(),d.trys.pop();continue}S=c.call(b,d)}catch(N){S=[6,N],w=0}finally{C=g=0}if(5&S[0])throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}([S,N])}}};Object.defineProperty(m,"__esModule",{value:!0}),m.VoiceVideoCallingProxy=void 0;var h=u(9600),p=(()=>{return(b=p||(p={}))[b.Voice=19237e4]="Voice",b[b.Video=19238e4]="Video",b[b.Cobrowse=19239e4]="Cobrowse",p;var b})(),E=(()=>{return(b=E||(E={})).Accept="accept",b.Reject="reject",b.Connect="connect",b.End="end",E;var b})(),f=(()=>{return(b=f||(f={})).CallAdded="callAdded",b.LocalVideoStreamAdded="localVideoStreamAdded",b.LocalVideoStreamRemoved="localVideoStreamRemoved",b.RemoteVideoStreamAdded="remoteVideoStreamAdded",b.RemoteVideoStreamRemoved="remoteVideoStreamRemoved",b.CallDisconnected="callDisconnected",b.ParticipantDisconnected="participantDisconnected",b.IncomingCallEnded="incomingCallEnded",f;var b})(),v=function(){function b(){this.debug=!1,this.callClientName="ElevateToVoiceVideo",this.proxy=window["Microsoft.Omnichannel.Calling.SDK"].VoiceVideoCalling,this.proxyInstance=this.proxy.getInstance()}return b.getInstance=function(){return this._instance||(this._instance=new b),this._instance},b.prototype.setDebug=function(c){this.debug=c},b.prototype.useScenarioMarker=function(c){this.scenarioMarker=c},b.prototype.load=function(c){return void 0===c&&(c={}),s(this,void 0,void 0,function(){return _(this,function(d){return c.logger&&(this.logger=c.logger),this.proxyInstance.load(c),[2]})})},b.prototype.isInitialized=function(){return this.proxyInstance.isInitialized()},b.prototype.initialize=function(c){var d,C,w,g,T,M,R,S;return s(this,void 0,void 0,function(){var N;return _(this,function(P){switch(P.label){case 0:return this.debug&&console.debug("[VoiceVideoCallingProxy] VoiceVideoCallingParams: "+JSON.stringify(c)),this.callingParams=c,null===(d=this.scenarioMarker)||void 0===d||d.startScenario(h.default.InitializeVoiceVideoCallingSDK),this.debug&&console.debug("[VoiceVideoCallingProxy][initialize] _isLoaded: "+this.proxyInstance._isLoaded),this.proxyInstance._isLoaded?[3,2]:[4,this.proxyInstance.load(this.logger||{})];case 1:P.sent(),P.label=2;case 2:return P.trys.push([2,4,,5]),[4,this.proxyInstance.initialize({callClientName:this.callClientName,accesstoken:(null===(w=null===(C=this.callingParams)||void 0===C?void 0:C.chatToken.voiceVideoCallToken)||void 0===w?void 0:w.Token)||(null===(g=this.callingParams)||void 0===g?void 0:g.chatToken.token),selfVideoHTMLElementId:null===(T=this.callingParams)||void 0===T?void 0:T.selfVideoHTMLElementId,remoteVideoHTMLElementId:null===(M=this.callingParams)||void 0===M?void 0:M.remoteVideoHTMLElementId})];case 3:return P.sent(),null===(R=this.scenarioMarker)||void 0===R||R.completeScenario(h.default.InitializeVoiceVideoCallingSDK),[3,5];case 4:return N=P.sent(),console.log(N),null===(S=this.scenarioMarker)||void 0===S||S.failScenario(h.default.InitializeVoiceVideoCallingSDK),[3,5];case 5:return[2]}})})},b.prototype.addEventListener=function(c,d){var C=this;this.proxyInstance.registerEvent(c,function(w){var g=w.callId;c===f.CallAdded&&(C.callId=g),C.debug&&console.debug("[VoiceVideoCallingProxy]["+c+"] callId: "+g),g===C.callId&&d(w)})},b.prototype.isMicrophoneMuted=function(){return this.proxyInstance.isMicrophoneMuted({callClientName:this.callClientName,callId:this.callId})},b.prototype.acceptCall=function(c){var d,C,w,g,T,M;return void 0===c&&(c={}),s(this,void 0,void 0,function(){var R,S,N,A,y;return _(this,function(F){switch(F.label){case 0:S=(R=this).callClientName,N=R.callId,null===(d=this.scenarioMarker)||void 0===d||d.startScenario(c.withVideo?h.default.AcceptVideoCall:h.default.AcceptVoiceCall,{CallId:N||""}),this.debug&&console.debug("[VoiceVideoCallingProxy][acceptCall] callId: "+N),this.debug&&console.debug(c),F.label=1;case 1:return F.trys.push([1,3,,4]),[4,this.proxyInstance.acceptCall({callClientName:S,callId:N,withVideo:c.withVideo||!1})];case 2:return F.sent(),[3,4];case 3:return F.sent(),y={response:c.withVideo?"AcceptVideoCallFailed":"AcceptVoiceCallFailed"},null===(C=this.scenarioMarker)||void 0===C||C.failScenario(c.withVideo?h.default.AcceptVideoCall:h.default.AcceptVoiceCall,{CallId:N||"",ExceptionDetails:JSON.stringify(y)}),[3,4];case 4:A={SecondaryChannelType:c.withVideo?p.Video:p.Voice,SecondaryChannelEventType:E.Accept};try{null===(w=this.callingParams)||void 0===w||w.OCClient.makeSecondaryChannelEventRequest(null===(g=this.callingParams)||void 0===g?void 0:g.chatToken.requestId,A),null===(T=this.scenarioMarker)||void 0===T||T.completeScenario(c.withVideo?h.default.AcceptVideoCall:h.default.AcceptVoiceCall,{CallId:N||""}),this.debug&&console.debug("[VoiceVideoCallingProxy][acceptCall][makeSecondaryChannelEventRequest]")}catch(q){y={response:"OCClientMakeSecondaryChannelEventRequestFailed"},null===(M=this.scenarioMarker)||void 0===M||M.failScenario(c.withVideo?h.default.AcceptVideoCall:h.default.AcceptVoiceCall,{CallId:N||"",ExceptionDetails:JSON.stringify(y)}),console.error("[VoiceVideoCallingProxy][acceptCall][makeSecondaryChannelEventRequest] Failure "+q)}return[2]}})})},b.prototype.rejectCall=function(){var c,d,C,w,g,T;return s(this,void 0,void 0,function(){var M,R,S,y,P;return _(this,function(A){switch(A.label){case 0:R=(M=this).callClientName,S=M.callId,null===(c=this.scenarioMarker)||void 0===c||c.startScenario(h.default.RejectCall,{CallId:S||""}),this.debug&&console.debug("[VoiceVideoCallingProxy][rejectCall] callId: "+S),A.label=1;case 1:return A.trys.push([1,3,,4]),[4,this.proxyInstance.rejectCall({callClientName:R,callId:S})];case 2:return A.sent(),null===(d=this.scenarioMarker)||void 0===d||d.completeScenario(h.default.RejectCall,{CallId:S||""}),[3,4];case 3:return A.sent(),P={response:"RejectCallFailed"},null===(C=this.scenarioMarker)||void 0===C||C.failScenario(h.default.RejectCall,{CallId:S||"",ExceptionDetails:JSON.stringify(P)}),[3,4];case 4:y={SecondaryChannelType:this.isRemoteVideoEnabled()?p.Video:p.Voice,SecondaryChannelEventType:E.Reject};try{null===(w=this.callingParams)||void 0===w||w.OCClient.makeSecondaryChannelEventRequest(null===(g=this.callingParams)||void 0===g?void 0:g.chatToken.requestId,y),this.debug&&console.debug("[VoiceVideoCallingProxy][rejectCall][makeSecondaryChannelEventRequest]")}catch(F){return P={response:"OCClientMakeSecondaryChannelEventRequestFailed"},null===(T=this.scenarioMarker)||void 0===T||T.failScenario(h.default.RejectCall,{CallId:S||"",ExceptionDetails:JSON.stringify(P)}),console.error("[VoiceVideoCallingProxy][rejectCall][makeSecondaryChannelEventRequest] Failure "+F),[2,F]}return[2]}})})},b.prototype.stopCall=function(){var c,d,C,w,g;return s(this,void 0,void 0,function(){var T,M,R,S;return _(this,function(P){switch(P.label){case 0:M=(T=this).callClientName,R=T.callId,null===(c=this.scenarioMarker)||void 0===c||c.startScenario(h.default.StopCall,{CallId:R||""}),this.debug&&console.debug("[VoiceVideoCallingProxy][stopCall] callId: "+R),S=!!(null===(C=null===(d=this.callingParams)||void 0===d?void 0:d.chatToken.voiceVideoCallToken)||void 0===C?void 0:C.Token),P.label=1;case 1:return P.trys.push([1,3,,4]),[4,this.proxyInstance.stopCall({callClientName:M,callId:R,forEveryone:S})];case 2:return P.sent(),null===(w=this.scenarioMarker)||void 0===w||w.completeScenario(h.default.StopCall,{CallId:R||""}),[3,4];case 3:return P.sent(),null===(g=this.scenarioMarker)||void 0===g||g.failScenario(h.default.StopCall,{CallId:R||""}),[3,4];case 4:return[2]}})})},b.prototype.toggleMute=function(){return s(this,void 0,void 0,function(){var c;return _(this,function(w){return[2,this.proxyInstance.toggleMute({callClientName:(c=this).callClientName,callId:c.callId})]})})},b.prototype.isRemoteVideoEnabled=function(){return this.proxyInstance.isRemoteVideoEnabled({callClientName:this.callClientName,callId:this.callId})},b.prototype.isLocalVideoEnabled=function(){return this.proxyInstance.isLocalVideoEnabled({callClientName:this.callClientName,callId:this.callId})},b.prototype.toggleLocalVideo=function(){return s(this,void 0,void 0,function(){var c;return _(this,function(w){return[2,this.proxyInstance.toggleLocalVideo({callClientName:(c=this).callClientName,callId:c.callId})]})})},b.prototype.isInACall=function(){return this.proxyInstance.isInACall({callClientName:this.callClientName,callId:this.callId})},b.prototype.renderVideoStreams=function(){return this.proxyInstance.renderVideoStreams({callClientName:this.callClientName,callId:this.callId})},b.prototype.disposeVideoRenderers=function(){return this.proxyInstance.disposeVideoRenderers({callClientName:this.callClientName,callId:this.callId})},b.prototype.close=function(){this.debug&&console.debug("[VoiceVideoCallingProxy][close]"),this.proxyInstance.dispose(),this.callingParams=void 0,this.callId=void 0},b.prototype.onCallAdded=function(c){var d=f.CallAdded;this.debug&&console.debug("[VoiceVideoCallingProxy]["+d+"]"),this.addEventListener(d,c)},b.prototype.onLocalVideoStreamAdded=function(c){var d=f.LocalVideoStreamAdded;this.debug&&console.debug("[VoiceVideoCallingProxy]["+d+"]"),this.addEventListener(d,c)},b.prototype.onLocalVideoStreamRemoved=function(c){var d=f.LocalVideoStreamRemoved;this.debug&&console.debug("[VoiceVideoCallingProxy]["+d+"]"),this.addEventListener(d,c)},b.prototype.onRemoteVideoStreamAdded=function(c){var d=f.RemoteVideoStreamAdded;this.debug&&console.debug("[VoiceVideoCallingProxy]["+d+"]"),this.addEventListener(d,c)},b.prototype.onRemoteVideoStreamRemoved=function(c){var d=f.RemoteVideoStreamRemoved;this.debug&&console.debug("[VoiceVideoCallingProxy]["+d+"]"),this.addEventListener(d,c)},b.prototype.onCallDisconnected=function(c){var d=this,C=f.CallDisconnected;this.debug&&console.debug("[VoiceVideoCallingProxy]["+C+"]"),this.addEventListener(C,function(w){return s(d,void 0,void 0,function(){var g,T,M,R,S,N,P;return _(this,function(y){g={SecondaryChannelType:p.Voice,SecondaryChannelEventType:E.End},null===(M=this.scenarioMarker)||void 0===M||M.startScenario(h.default.OnCallDisconnected,{CallId:this.callId||""});try{null===(R=this.callingParams)||void 0===R||R.OCClient.makeSecondaryChannelEventRequest(null===(S=this.callingParams)||void 0===S?void 0:S.chatToken.requestId,g),this.debug&&console.debug("[VoiceVideoCallingProxy][onCallDisconnected][makeSecondaryChannelEventRequest]"),null===(N=this.scenarioMarker)||void 0===N||N.completeScenario(h.default.OnCallDisconnected,{CallId:this.callId||""})}catch(A){console.error("[VoiceVideoCallingProxy][onCallDisconnected][makeSecondaryChannelEventRequest] Failure "+A),T={response:"OCClientMakeSecondaryChannelEventRequestFailed"},null===(P=this.scenarioMarker)||void 0===P||P.failScenario(h.default.OnCallDisconnected,{CallId:this.callId||"",ExceptionDetails:JSON.stringify(T)})}return this.clearRemoteVideoElementChildren(),c(w),[2]})})})},b.prototype.clearRemoteVideoElementChildren=function(){var c,d;if(null===(c=this.callingParams)||void 0===c?void 0:c.remoteVideoHTMLElementId)for(var C=document.getElementById(null===(d=this.callingParams)||void 0===d?void 0:d.remoteVideoHTMLElementId);null==C?void 0:C.firstChild;)this.debug&&console.debug("[VoiceVideoCallingProxy][clearRemoteVideoElement]"),C.firstChild.remove()},b}();m.VoiceVideoCallingProxy=v,m.default=function(b){return void 0===b&&(b={}),s(void 0,void 0,void 0,function(){var c;return _(this,function(d){switch(d.label){case 0:return[4,(c=v.getInstance()).load(b.logger)];case 1:return d.sent(),[2,Promise.resolve(c)]}})})}},4151:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.ariaTelemetryKey=m.webChatACSAdapterVersion=m.webChatIC3AdapterVersion=m.ic3ClientVersion=void 0,m.ic3ClientVersion="2021.08.14.1",m.webChatIC3AdapterVersion="0.1.0-master.2dba07b",m.webChatACSAdapterVersion="0.0.35-beta.2",m.ariaTelemetryKey="c7655518acf1403f93ff6b9f77942f0a-d01a02fd-6b50-4de3-a566-62eda11f93bc-7083"},6419:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=(()=>{return(s=u||(u={}))[s.NoCalling=19235e4]="NoCalling",s[s.VideoAndVoiceCalling=192350001]="VideoAndVoiceCalling",s[s.VoiceOnly=192350002]="VoiceOnly",u;var s})();m.default=u},7925:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=(()=>{return(s=u||(u={}))[s.LiveChat=19235e4]="LiveChat",s[s.PersistentChat=192350001]="PersistentChat",u;var s})();m.default=u},8191:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=(()=>{return(s=u||(u={}))[s.V1=1]="V1",s[s.V2=2]="V2",u;var s})();m.default=u},5642:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=(()=>{return(s=u||(u={})).Active="Active",s.Closed="Closed",s.Open="Open",s.Waiting="Waiting",s.WrapUp="WrapUp",u;var s})();m.default=u},1974:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=(()=>{return(s=u||(u={})).Text="text",s.TopicUpdated="topicUpdated",s.ParticipantAdded="participantAdded",s.ParticipantRemoved="participantRemoved",u;var s})();m.default=u},2902:function(K,m,u){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(T){for(var M,R=1,S=arguments.length;R<S;R++)for(var N in M=arguments[R])Object.prototype.hasOwnProperty.call(M,N)&&(T[N]=M[N]);return T}).apply(this,arguments)},_=this&&this.__awaiter||function(T,M,R,S){return new(R||(R=Promise))(function(P,y){function A(j){try{q(S.next(j))}catch(ue){y(ue)}}function F(j){try{q(S.throw(j))}catch(ue){y(ue)}}function q(j){j.done?P(j.value):function(P){return P instanceof R?P:new R(function(y){y(P)})}(j.value).then(A,F)}q((S=S.apply(T,M||[])).next())})},h=this&&this.__generator||function(T,M){var S,N,P,y,R={label:0,sent:function(){if(1&P[0])throw P[1];return P[1]},trys:[],ops:[]};return y={next:A(0),throw:A(1),return:A(2)},"function"==typeof Symbol&&(y[Symbol.iterator]=function(){return this}),y;function A(q){return function(j){return function(q){if(S)throw new TypeError("Generator is already executing.");for(;R;)try{if(S=1,N&&(P=2&q[0]?N.return:q[0]?N.throw||((P=N.return)&&P.call(N),0):N.next)&&!(P=P.call(N,q[1])).done)return P;switch(N=0,P&&(q=[2&q[0],P.value]),q[0]){case 0:case 1:P=q;break;case 4:return R.label++,{value:q[1],done:!1};case 5:R.label++,N=q[1],q=[0];continue;case 7:q=R.ops.pop(),R.trys.pop();continue;default:if(!(P=(P=R.trys).length>0&&P[P.length-1])&&(6===q[0]||2===q[0])){R=0;continue}if(3===q[0]&&(!P||q[1]>P[0]&&q[1]<P[3])){R.label=q[1];break}if(6===q[0]&&R.label<P[1]){R.label=P[1],P=q;break}if(P&&R.label<P[2]){R.label=P[2],R.ops.push(q);break}P[2]&&R.ops.pop(),R.trys.pop();continue}q=M.call(T,R)}catch(j){q=[6,j],N=0}finally{S=P=0}if(5&q[0])throw q[1];return{value:q[0]?q[1]:void 0,done:!0}}([q,j])}}};Object.defineProperty(m,"__esModule",{value:!0}),m.ACSConversation=void 0;var p=u(1974),E=u(8953),f=u(7623),v=u(9116),I=u(9340),b=u(813),c=u(2900),d=u(8191),C=(()=>{return(T=C||(C={})).InitializeACSClient="InitializeACSClient",T.InitializeACSConversation="InitializeACSConversation",T.GetParticipants="GetParticipants",T.RegisterOnNewMessage="RegisterOnNewMessage",T.RegisterOnThreadUpdate="RegisterOnThreadUpdate",T.OnTypingEvent="OnTypingEvent",T.GetMessages="GetMessages",T.SendMessage="SendMessage",T.SendTyping="SendTyping",T.Disconnect="Disconnect",C;var T})(),w=function(){function T(M,R,S){void 0===S&&(S=null),this.logger=null,this.logger=S,this.tokenCredential=M,this.chatClient=R,this.eventListeners={}}return T.prototype.initialize=function(M){var R,S,N,P,y;return _(this,void 0,void 0,function(){var A,F,j,q,ue;return h(this,function(ee){switch(ee.label){case 0:null===(R=this.logger)||void 0===R||R.startScenario(C.InitializeACSConversation),this.sessionInfo=M,ee.label=1;case 1:return ee.trys.push([1,3,,4]),A=this,[4,null===(S=this.chatClient)||void 0===S?void 0:S.getChatThreadClient(M.threadId)];case 2:return A.chatThreadClient=ee.sent(),[3,4];case 3:throw F=ee.sent(),q={response:"ChatClientGetChatThreadClientFailure",errorObject:""+F},null===(N=this.logger)||void 0===N||N.failScenario(C.InitializeACSConversation,{ExceptionDetails:JSON.stringify(q)}),new Error("GetChatThreadClientFailed");case 4:return ee.trys.push([4,6,,7]),[4,this.chatClient.startRealtimeNotifications()];case 5:return ee.sent(),[3,7];case 6:throw j=ee.sent(),q={response:"StartRealtimeNotificationsFailed",errorObject:""+j},null===(P=this.logger)||void 0===P||P.failScenario(C.InitializeACSConversation,{ExceptionDetails:JSON.stringify(q)}),new Error(q.response);case 7:return ue=this,[4,this.createParticipantsMapping()];case 8:return ue.participantsMapping=ee.sent(),null===(y=this.logger)||void 0===y||y.completeScenario(C.InitializeACSConversation),[2]}})})},T.prototype.getMessages=function(){var M,R,S,N,P;return _(this,void 0,void 0,function(){var y,A,F,q,ee,$,ie;return h(this,function(ce){switch(ce.label){case 0:null===(M=this.logger)||void 0===M||M.startScenario(C.GetMessages),y=[],ce.label=1;case 1:return ce.trys.push([1,9,,10]),[4,this.chatThreadClient.listMessages()];case 2:return[4,(A=ce.sent()).next()];case 3:F=ce.sent(),ce.label=4;case 4:return F.done?[3,8]:(q=F.value).type===p.default.Text?[3,6]:[4,A.next()];case 5:return F=ce.sent(),[3,4];case 6:return(null===(R=q.content)||void 0===R?void 0:R.message)&&Object.assign(q,{content:null===(S=q.content)||void 0===S?void 0:S.message}),Object.assign(q.sender,{alias:this.participantsMapping[q.sender.communicationUserId].displayName}),ee=I.default(q,{liveChatVersion:d.default.V2}),y.push(ee),[4,A.next()];case 7:return F=ce.sent(),[3,4];case 8:return null===(N=this.logger)||void 0===N||N.completeScenario(C.GetMessages),[3,10];case 9:throw $=ce.sent(),ie={errorObject:""+$},null===(P=this.logger)||void 0===P||P.failScenario(C.GetMessages,{ExceptionDetails:JSON.stringify(ie)}),new Error(C.GetMessages);case 10:return[2,y]}})})},T.prototype.getParticipants=function(){var M,R,S;return _(this,void 0,void 0,function(){var N,P,y,F,q;return h(this,function(j){switch(j.label){case 0:null===(M=this.logger)||void 0===M||M.startScenario(C.GetParticipants),N=[],j.label=1;case 1:return j.trys.push([1,7,,8]),[4,this.chatThreadClient.listParticipants()];case 2:return[4,(P=j.sent()).next()];case 3:y=j.sent(),j.label=4;case 4:return y.done?[3,6]:(N.push(y.value),[4,P.next()]);case 5:return y=j.sent(),[3,4];case 6:return null===(R=this.logger)||void 0===R||R.completeScenario(C.GetParticipants),[3,8];case 7:throw F=j.sent(),q={errorObject:""+F},null===(S=this.logger)||void 0===S||S.failScenario(C.GetParticipants,{ExceptionDetails:JSON.stringify(q)}),new Error(C.GetParticipants);case 8:return[2,N]}})})},T.prototype.registerOnNewMessage=function(M){var R,S,N,P,y;return _(this,void 0,void 0,function(){var A,F,q,j,ue,ee,$=this;return h(this,function(ie){switch(ie.label){case 0:null===(R=this.logger)||void 0===R||R.startScenario(C.RegisterOnNewMessage),A=!1,F=new Set,ie.label=1;case 1:return ie.trys.push([1,3,,4]),[4,(q=function(ce){return _($,void 0,void 0,function(){var Te,te,Y,le,Z;return h(this,function(we){switch(we.label){case 0:if(A)return[2];we.label=1;case 1:return we.trys.push([1,3,,4]),[4,this.getMessages()];case 2:for(Te=we.sent(),te=0,Y=Te.reverse();te<Y.length;te++)Z=(le=Y[te]).id,le.sender.displayName!==E.default.Customer&&(F.has(Z)||(M(le),F.add(Z)));return[3,4];case 3:return we.sent(),[3,4];case 4:return setTimeout(function(){q(ce)},ce),[2]}})})})(null===(S=this.sessionInfo)||void 0===S?void 0:S.pollingInterval)];case 2:return ie.sent(),j=function(ce){var Te;A=!0;var te=ce.id,Y=ce.sender;Y.communicationUserId===(null===(Te=$.sessionInfo)||void 0===Te?void 0:Te.id)||F.has(te)||(ce.message&&Object.assign(ce,{content:ce.message}),Object.assign(ce.sender,{alias:$.participantsMapping[Y.communicationUserId].displayName}),M(ce),F.add(te))},null===(N=this.chatClient)||void 0===N||N.on("chatMessageReceived",j),this.trackListener("chatMessageReceived",j),null===(P=this.logger)||void 0===P||P.completeScenario(C.RegisterOnNewMessage),[3,4];case 3:throw ue=ie.sent(),ee={errorObject:""+ue},null===(y=this.logger)||void 0===y||y.failScenario(C.RegisterOnNewMessage,{ExceptionDetails:JSON.stringify(ee)}),new Error(C.RegisterOnNewMessage);case 4:return[2]}})})},T.prototype.registerOnThreadUpdate=function(M){var R,S,N,P;return _(this,void 0,void 0,function(){var y;return h(this,function(A){null===(R=this.logger)||void 0===R||R.startScenario(C.RegisterOnThreadUpdate);try{y=function(F){M(F)},null===(S=this.chatClient)||void 0===S||S.on("participantsRemoved",y),this.trackListener("participantsRemoved",y),null===(N=this.logger)||void 0===N||N.completeScenario(C.RegisterOnThreadUpdate)}catch(F){null===(P=this.logger)||void 0===P||P.failScenario(C.RegisterOnThreadUpdate)}return[2]})})},T.prototype.onTypingEvent=function(M){var R,S,N,P;return _(this,void 0,void 0,function(){var y;return h(this,function(A){null===(R=this.logger)||void 0===R||R.startScenario(C.OnTypingEvent);try{y=function(F){M(F)},null===(S=this.chatClient)||void 0===S||S.on("typingIndicatorReceived",y),this.trackListener("typingIndicatorReceived",y),null===(N=this.logger)||void 0===N||N.completeScenario(C.OnTypingEvent)}catch(F){null===(P=this.logger)||void 0===P||P.failScenario(C.OnTypingEvent)}return[2]})})},T.prototype.sendMessage=function(M){var R,S,N,P;return _(this,void 0,void 0,function(){var y,A;return h(this,function(q){switch(q.label){case 0:null===(R=this.logger)||void 0===R||R.startScenario(C.SendMessage),M.metadata||(M.metadata={}),y={content:M.content},A={senderDisplayName:E.default.Customer,metadata:s({deliveryMode:c.default.Bridged,tags:b.defaultMessageTags.join(",")},M.metadata)},q.label=1;case 1:return q.trys.push([1,3,,4]),[4,null===(S=this.chatThreadClient)||void 0===S?void 0:S.sendMessage(y,A)];case 2:return q.sent(),null===(N=this.logger)||void 0===N||N.completeScenario(C.SendMessage),[3,4];case 3:throw q.sent(),null===(P=this.logger)||void 0===P||P.failScenario(C.SendMessage),new Error("SendMessageFailed");case 4:return[2]}})})},T.prototype.sendTyping=function(){var M,R,S,N;return _(this,void 0,void 0,function(){return h(this,function(y){switch(y.label){case 0:null===(M=this.logger)||void 0===M||M.startScenario(C.SendTyping),y.label=1;case 1:return y.trys.push([1,3,,4]),[4,null===(R=this.chatThreadClient)||void 0===R?void 0:R.sendTypingNotification()];case 2:return y.sent(),null===(S=this.logger)||void 0===S||S.completeScenario(C.SendTyping),[3,4];case 3:throw y.sent(),null===(N=this.logger)||void 0===N||N.failScenario(C.SendTyping),new Error("SendTypingFailed");case 4:return[2]}})})},T.prototype.sendFileMessage=function(){return _(this,void 0,void 0,function(){return h(this,function(M){return[2,void 0]})})},T.prototype.sendFileData=function(){return _(this,void 0,void 0,function(){return h(this,function(M){return[2,void 0]})})},T.prototype.uploadFile=function(){return _(this,void 0,void 0,function(){return h(this,function(M){return[2,void 0]})})},T.prototype.downloadFile=function(){return _(this,void 0,void 0,function(){return h(this,function(M){return[2,void 0]})})},T.prototype.disconnect=function(){var M,R,S;return _(this,void 0,void 0,function(){var N,P,y,A,j=this;return h(this,function(ue){null===(M=this.logger)||void 0===M||M.startScenario(C.Disconnect);try{for(N=function(ee,$){$.forEach(function(ie){j.chatClient.off(ee,ie)})},P=0,y=Object.entries(this.eventListeners);P<y.length;P++)N((A=y[P])[0],A[1]);null===(R=this.logger)||void 0===R||R.completeScenario(C.Disconnect)}catch(ee){null===(S=this.logger)||void 0===S||S.failScenario(C.Disconnect)}return[2]})})},T.prototype.createParticipantsMapping=function(){return _(this,void 0,void 0,function(){var M,R,S,N,P,y,A;return h(this,function(F){switch(F.label){case 0:return[4,this.getParticipants()];case 1:for(M=F.sent(),R={},S=0,N=M;S<N.length;S++)y=(P=N[S]).id,Object.keys(R).includes(y.communicationUserId)||Object.assign(R,((A={})[y.communicationUserId]=P,A));return[2,R]}})})},T.prototype.trackListener=function(M,R){M in this.eventListeners||(this.eventListeners[M]=[]),this.eventListeners[M].push(R)},T}();m.ACSConversation=w;var g=function(){function T(M){void 0===M&&(M=null),this.logger=null,this.tokenCredential=null,this.chatClient=null,this.logger=M}return T.prototype.initialize=function(M){var R,S,N,P;return _(this,void 0,void 0,function(){var y;return h(this,function(A){null===(R=this.logger)||void 0===R||R.startScenario(C.InitializeACSClient);try{this.tokenCredential=new v.AzureCommunicationTokenCredential(M.token)}catch(F){throw y={response:"CreateTokenCredentialFailure",errorObject:""+F},null===(S=this.logger)||void 0===S||S.failScenario(C.InitializeACSClient,{ExceptionDetails:JSON.stringify(y)}),new Error("CreateTokenCredentialFailed")}try{this.chatClient=new f.ChatClient(M.environmentUrl,this.tokenCredential)}catch(F){throw y={response:"CreateChatClientFailure",errorObject:""+F},null===(N=this.logger)||void 0===N||N.failScenario(C.InitializeACSClient,{ExceptionDetails:JSON.stringify(y)}),new Error("CreateChatClientFailed")}return null===(P=this.logger)||void 0===P||P.completeScenario(C.InitializeACSClient),[2]})})},T.prototype.joinConversation=function(M){return _(this,void 0,void 0,function(){var R;return h(this,function(S){switch(S.label){case 0:return[4,(R=new w(this.tokenCredential,this.chatClient,this.logger)).initialize(M)];case 1:return S.sent(),[2,R]}})})},T}();m.default=g},8953:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=(()=>{return(s=u||(u={})).Customer="Customer",s.Agent="__agent__",s.System="__system__",u;var s})();m.default=u},2562:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.default={IC3:"IC3",DirectLine:"DirectLine",ACS:"ACS"}},813:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.defaultMessageTags=void 0,m.defaultMessageTags=["ChannelId-lcw","FromCustomer"]},3709:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.ResourceType=m.FileSharingProtocolType=m.PersonType=m.MessageType=m.DeliveryMode=m.MessageContentType=void 0;var u=function(){function f(){}return f.RichText="RichText",f.Text="Text",f}();m.MessageContentType=u;var s=function(){function f(){}return f.Bridged="bridged",f.Unbridged="unbridged",f}();m.DeliveryMode=s;var f,_=function(){function f(){}return f.UserMessage="UserMessage",f.SwiftCard="SwiftCard",f.Typing="Control/Typing",f.ClearTyping="Control/ClearTyping",f.LiveState="Control/LiveState",f}();m.MessageType=_,(f=m.PersonType||(m.PersonType={}))[f.Unknown=0]="Unknown",f[f.User=1]="User",f[f.Bot=2]="Bot",function(f){f[f.AmsBasedFileSharing=0]="AmsBasedFileSharing"}(m.FileSharingProtocolType||(m.FileSharingProtocolType={}));var E=function(){function f(){}return f.NewMessage="NewMessage",f.MessageUpdate="MessageUpdate",f.UserPresence="UserPresence",f.ConversationUpdate="ConversationUpdate",f.ThreadUpdate="ThreadUpdate",f}();m.ResourceType=E},2921:function(K,m){"use strict";var u=this&&this.__awaiter||function(E,f,v,I){return new(v||(v=Promise))(function(c,d){function C(T){try{g(I.next(T))}catch(M){d(M)}}function w(T){try{g(I.throw(T))}catch(M){d(M)}}function g(T){T.done?c(T.value):function(c){return c instanceof v?c:new v(function(d){d(c)})}(T.value).then(C,w)}g((I=I.apply(E,f||[])).next())})},s=this&&this.__generator||function(E,f){var I,b,c,d,v={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return d={next:C(0),throw:C(1),return:C(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d;function C(g){return function(T){return function(g){if(I)throw new TypeError("Generator is already executing.");for(;v;)try{if(I=1,b&&(c=2&g[0]?b.return:g[0]?b.throw||((c=b.return)&&c.call(b),0):b.next)&&!(c=c.call(b,g[1])).done)return c;switch(b=0,c&&(g=[2&g[0],c.value]),g[0]){case 0:case 1:c=g;break;case 4:return v.label++,{value:g[1],done:!1};case 5:v.label++,b=g[1],g=[0];continue;case 7:g=v.ops.pop(),v.trys.pop();continue;default:if(!(c=(c=v.trys).length>0&&c[c.length-1])&&(6===g[0]||2===g[0])){v=0;continue}if(3===g[0]&&(!c||g[1]>c[0]&&g[1]<c[3])){v.label=g[1];break}if(6===g[0]&&v.label<c[1]){v.label=c[1],c=g;break}if(c&&v.label<c[2]){v.label=c[2],v.ops.push(g);break}c[2]&&v.ops.pop(),v.trys.pop();continue}g=f.call(E,v)}catch(T){g=[6,T],b=0}finally{I=c=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([g,T])}}};Object.defineProperty(m,"__esModule",{value:!0});var h=(()=>{return(E=h||(h={})).AMSUpload="AMSUpload",E.AMSDownload="AMSDownload",E.GetFileIds="GetFileIds",E.CreateFileIdProperty="CreateFileIdProperty",E.GetFileMetadata="GetFileMetadata",E.CreateFileMetadataProperty="CreateFileMetadataProperty",h;var E})(),p=function(){function E(f,v){void 0===v&&(v=null),this.logger=v,this.amsClient=f}return E.prototype.uploadFiles=function(f){return u(this,void 0,void 0,function(){var v=this;return s(this,function(I){return[2,Promise.all(f.map(function(b){return u(v,void 0,void 0,function(){return s(this,function(c){return[2,this.uploadFileToAMS(b)]})})}))]})})},E.prototype.downloadFiles=function(f){return u(this,void 0,void 0,function(){var v=this;return s(this,function(I){return[2,Promise.all(f.map(function(b){return u(v,void 0,void 0,function(){return s(this,function(c){return[2,this.downloadFileFromAMS(b)]})})}))]})})},E.prototype.updatePermissions=function(){return u(this,void 0,void 0,function(){return s(this,function(f){return[2,void 0]})})},E.prototype.getFileIds=function(f){var v,I,b;null===(v=this.logger)||void 0===v||v.startScenario(h.GetFileIds);try{var c=JSON.parse(null==f?void 0:f.amsReferences);return null===(I=this.logger)||void 0===I||I.completeScenario(h.GetFileIds),c}catch(C){return void(null===(b=this.logger)||void 0===b||b.failScenario(h.GetFileIds,{ExceptionDetails:JSON.stringify({metadata:""+f,errorObject:""+C})}))}},E.prototype.createFileIdProperty=function(f){var v,I,b;null===(v=this.logger)||void 0===v||v.startScenario(h.CreateFileIdProperty);try{var c={amsReferences:JSON.stringify(f)};return null===(I=this.logger)||void 0===I||I.completeScenario(h.CreateFileIdProperty),c}catch(C){return void(null===(b=this.logger)||void 0===b||b.failScenario(h.CreateFileIdProperty,{ExceptionDetails:JSON.stringify({fileIds:""+f,errorObject:""+C})}))}},E.prototype.getFileMetadata=function(f){var v,I,b;null===(v=this.logger)||void 0===v||v.startScenario(h.GetFileMetadata);try{var c=JSON.parse(null==f?void 0:f.amsMetadata);return null===(I=this.logger)||void 0===I||I.completeScenario(h.GetFileMetadata),c}catch(C){return void(null===(b=this.logger)||void 0===b||b.failScenario(h.GetFileMetadata,{ExceptionDetails:JSON.stringify({metadata:""+f,errorObject:""+C})}))}},E.prototype.createFileMetadataProperty=function(f){var v,I,b;null===(v=this.logger)||void 0===v||v.startScenario(h.CreateFileMetadataProperty);try{var c={amsMetadata:JSON.stringify(f)};return null===(I=this.logger)||void 0===I||I.completeScenario(h.CreateFileMetadataProperty),c}catch(C){return void(null===(b=this.logger)||void 0===b||b.failScenario(h.CreateFileMetadataProperty,{ExceptionDetails:JSON.stringify({metadata:""+f,errorObject:""+C})}))}},E.prototype.uploadFileToAMS=function(f){var v,I,b,c,d;return u(this,void 0,void 0,function(){var C,w,T,M,R,S,g;return s(this,function(N){switch(N.label){case 0:if(null===(v=this.logger)||void 0===v||v.startScenario(h.AMSUpload),!f.contentUrl||!f.name)return[3,12];C=void 0,N.label=1;case 1:return N.trys.push([1,3,,4]),[4,this.amsClient.fetchBlob(f.contentUrl)];case 2:return C=N.sent(),[3,4];case 3:return w=N.sent(),g={response:"AMSFetchBlobFailure",errorObject:""+w},null===(I=this.logger)||void 0===I||I.failScenario(h.AMSUpload,{ExceptionDetails:JSON.stringify(g)}),[2,void 0];case 4:T=new File([C],f.name,{type:f.contentType}),M=void 0,N.label=5;case 5:return N.trys.push([5,7,,8]),[4,this.amsClient.createObject(this.amsClient.chatToken.chatId,T)];case 6:return M=N.sent(),[3,8];case 7:return R=N.sent(),g={response:"AMSCreateObjectFailure",errorObject:""+R},null===(b=this.logger)||void 0===b||b.failScenario(h.AMSUpload,{ExceptionDetails:JSON.stringify(g)}),[2,void 0];case 8:return N.trys.push([8,10,,11]),[4,this.amsClient.uploadDocument(M.id,T)];case 9:return N.sent(),[3,11];case 10:return S=N.sent(),g={response:"AMSUploadDocumentFailure",errorObject:""+S},null===(c=this.logger)||void 0===c||c.failScenario(h.AMSUpload,{ExceptionDetails:JSON.stringify(g)}),[2,void 0];case 11:return null===(d=this.logger)||void 0===d||d.completeScenario(h.AMSUpload),[2,{fileId:M.id,metadata:{contentType:f.contentType,fileName:f.name}}];case 12:return[2]}})})},E.prototype.downloadFileFromAMS=function(f){var v,I,b,c;return u(this,void 0,void 0,function(){var d,C,w,T,M,R,g,S;return s(this,function(N){switch(N.label){case 0:if(null===(v=this.logger)||void 0===v||v.startScenario(h.AMSDownload),!(f.fileId&&f.metadata&&f.metadata.fileName))return[3,9];d={id:f.fileId,type:f.metadata.contentType.split("/").pop()},C=void 0,N.label=1;case 1:return N.trys.push([1,3,,4]),[4,this.amsClient.getViewStatus(d)];case 2:return C=N.sent(),[3,4];case 3:return w=N.sent(),g={response:"AMSGetViewStatusFailure",errorObject:""+w},null===(I=this.logger)||void 0===I||I.failScenario(h.AMSDownload,{ExceptionDetails:JSON.stringify(g)}),[2,void 0];case 4:T=C.view_location,M=void 0,N.label=5;case 5:return N.trys.push([5,7,,8]),[4,this.amsClient.getView(d,T)];case 6:return M=N.sent(),[3,8];case 7:return R=N.sent(),g={response:"AMSGetViewFailure",errorObject:""+R},null===(b=this.logger)||void 0===b||b.failScenario(h.AMSDownload,{ExceptionDetails:JSON.stringify(g)}),[2,void 0];case 8:return S=new File([M],f.metadata.fileName,{type:f.metadata.contentType}),null===(c=this.logger)||void 0===c||c.completeScenario(h.AMSDownload),[2,S];case 9:return[2]}})})},E}();m.default=p},5480:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.default=function(){return function(){return function(_){return function(h){var p=JSON.parse(JSON.stringify(h));if(p&&p.channelData&&p.channelData.tags){var E=p.channelData.tags;if("string"==typeof E)return _(h);if(E instanceof Array)p.channelData.tags=E.toString();else if("object"==typeof p.channelData.tags)try{p.channelData.tags=JSON.stringify(E)}catch(f){console.error(f)}}return _(p)}}}}},3968:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.default=function(){return function(){return function(_){return function(h){var p=JSON.parse(JSON.stringify(h));if(p&&p.channelData&&p.channelData.tags){var E=p.channelData.tags;if("string"==typeof E)try{p.channelData.tags=JSON.parse(E)}catch(f){p.channelData.tags=E.split(",")}}return _(p)}}}}},9451:(K,m)=>{"use strict";var s;Object.defineProperty(m,"__esModule",{value:!0}),(s=m._BondDataType||(m._BondDataType={}))[s._BT_STOP=0]="_BT_STOP",s[s._BT_STOP_BASE=1]="_BT_STOP_BASE",s[s._BT_BOOL=2]="_BT_BOOL",s[s._BT_DOUBLE=8]="_BT_DOUBLE",s[s._BT_STRING=9]="_BT_STRING",s[s._BT_STRUCT=10]="_BT_STRUCT",s[s._BT_LIST=11]="_BT_LIST",s[s._BT_MAP=13]="_BT_MAP",s[s._BT_INT32=16]="_BT_INT32",s[s._BT_INT64=17]="_BT_INT64"},1464:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var s=u(6649),_=u(5644),h=u(514);m._Utf8_GetBytes=function(d){for(var C=[],w=0;w<d.length;++w){var g=d.charCodeAt(w);g<128?C.push(g):g<2048?C.push(192|g>>6,128|63&g):g<55296||g>=57344?C.push(224|g>>12,128|g>>6&63,128|63&g):(g=65536+((1023&g)<<10|1023&d.charCodeAt(++w)),C.push(240|g>>18,128|g>>12&63,128|g>>6&63,128|63&g))}return C},m._Base64_GetString=function(d){for(var C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=[],g=d.length%3,M=0,R=d.length-g;M<R;M+=3)w.push([C.charAt((P=S=(d[M]<<16)+(d[M+1]<<8)+d[M+2])>>18&63),C.charAt(P>>12&63),C.charAt(P>>6&63),C.charAt(63&P)].join(""));var P;switch(g){case 1:var S;w.push(C.charAt((S=d[d.length-1])>>2)),w.push(C.charAt(S<<4&63)),w.push("==");break;case 2:var N=(d[d.length-2]<<8)+d[d.length-1];w.push(C.charAt(N>>10)),w.push(C.charAt(N>>4&63)),w.push(C.charAt(N<<2&63)),w.push("=")}return w.join("")},m._Varint_GetBytes=function(d){for(var C=[];4294967168&d;)C.push(127&d|128),d>>>=7;return C.push(127&d),C},m._Varint64_GetBytes=function(d){for(var C=d.low,w=d.high,g=[];w||4294967168&C;)g.push(127&C|128),C=(127&w)<<25|C>>>7,w>>>=7;return g.push(127&C),g},m._Double_GetBytes=function(d){if(h.BrowserChecker._IsDataViewSupport()){var C=new DataView(new ArrayBuffer(8));C.setFloat64(0,d,!0);for(var w=[],g=0;g<8;++g)w.push(C.getUint8(g));return w}return _.FloatUtils._ConvertNumberToArray(d,!0)},m._Zigzag_EncodeZigzag32=function(d){return(d=s.Number._ToInt32(d))<<1^d>>31},m._Zigzag_EncodeZigzag64=function(d){var C=d.low,w=d.high,g=w<<1|C>>>31,T=C<<1;2147483648&w&&(g=~g,T=~T);var M=new s.UInt64("0");return M.low=T,M.high=g,M}},5644:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=function(){function s(){}return s._ConvertNumberToArray=function(_,h){if(!_)return h?this._doubleZero:this._floatZero;var E=h?52:23,f=(1<<(h?11:8)-1)-1,v=1-f,I=f,b=_<0?1:0;_=Math.abs(_);for(var c=Math.floor(_),d=_-c,C=2*(f+2)+E,w=new Array(C),g=0;g<C;)w[g++]=0;for(g=f+2;g&&c;)w[--g]=c%2,c=Math.floor(c/2);for(g=f+1;g<C-1&&d>0;)(d*=2)>=1?(w[++g]=1,--d):w[++g]=0;for(var T=0;T<C&&!w[T];)T++;var M=f+1-T,R=T+E;if(w[R+1]){for(g=R;g>T&&(w[g]=1-w[g],!w);--g);g===T&&++M}if(M>I||c)return b?h?this._doubleNegInifinity:this._floatNegInifinity:h?this._doubleInifinity:this._floatInifinity;if(M<v)return h?this._doubleZero:this._floatZero;if(h){var S=0;for(g=0;g<20;++g)S=S<<1|w[++T];for(var N=0;g<52;++g)N=N<<1|w[++T];return[255&N,N>>8&255,N>>16&255,N>>>24,255&(S=b<<31|2147483647&(S|=M+f<<20)),S>>8&255,S>>16&255,S>>>24]}var y=0;for(g=0;g<23;++g)y=y<<1|w[++T];return[255&(y=b<<31|2147483647&(y|=M+f<<23)),y>>8&255,y>>16&255,y>>>24]},s._floatZero=[0,0,0,0],s._doubleZero=[0,0,0,0,0,0,0,0],s._floatInifinity=[0,0,128,127],s._floatNegInifinity=[0,0,128,255],s._doubleInifinity=[0,0,0,0,0,0,240,127],s._doubleNegInifinity=[0,0,0,0,0,0,240,255],s}();m.FloatUtils=u},67:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var s=u(6649),_=function(){function h(){this._buffer=[]}return h.prototype._WriteByte=function(p){this._buffer.push(s.Number._ToByte(p))},h.prototype._Write=function(p,E,f){for(;f--;)this._WriteByte(p[E++])},h.prototype._GetBuffer=function(){return this._buffer},h}();m.MemoryStream=_},4356:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var s=u(9451);m._BondDataType=s._BondDataType;var _=u(1464);m._Encoding=_;var h=u(67);m.IO=h;var p=u(6649);m.Int64=p.Int64,m.UInt64=p.UInt64,m.Number=p.Number;var E=function(){function f(v){this._stream=v}return f.prototype._WriteBlob=function(v){this._stream._Write(v,0,v.length)},f.prototype._WriteBool=function(v){this._stream._WriteByte(v?1:0)},f.prototype._WriteContainerBegin=function(v,I){this._WriteUInt8(I),this._WriteUInt32(v)},f.prototype._WriteMapContainerBegin=function(v,I,b){this._WriteUInt8(I),this._WriteUInt8(b),this._WriteUInt32(v)},f.prototype._WriteDouble=function(v){var I=_._Double_GetBytes(v);this._stream._Write(I,0,I.length)},f.prototype._WriteFieldBegin=function(v,I,b){I<=5?this._stream._WriteByte(v|I<<5):I<=255?(this._stream._WriteByte(192|v),this._stream._WriteByte(I)):(this._stream._WriteByte(224|v),this._stream._WriteByte(I),this._stream._WriteByte(I>>8))},f.prototype._WriteInt32=function(v){v=_._Zigzag_EncodeZigzag32(v),this._WriteUInt32(v)},f.prototype._WriteInt64=function(v){this._WriteUInt64(_._Zigzag_EncodeZigzag64(v))},f.prototype._WriteString=function(v){if(""===v)this._WriteUInt32(0);else{var I=_._Utf8_GetBytes(v);this._WriteUInt32(I.length),this._stream._Write(I,0,I.length)}},f.prototype._WriteStructEnd=function(v){this._WriteUInt8(v?s._BondDataType._BT_STOP_BASE:s._BondDataType._BT_STOP)},f.prototype._WriteUInt32=function(v){var I=_._Varint_GetBytes(p.Number._ToUInt32(v));this._stream._Write(I,0,I.length)},f.prototype._WriteUInt64=function(v){var I=_._Varint64_GetBytes(v);this._stream._Write(I,0,I.length)},f.prototype._WriteUInt8=function(v){this._stream._WriteByte(p.Number._ToUInt8(v))},f}();m.CompactBinaryProtocolWriter=E},6649:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=function(){function h(p){this.low=0,this.high=0,this.low=parseInt(p,10),this.low<0&&(this.high=-1)}return h.prototype._Equals=function(p){var E=new h(p);return this.low===E.low&&this.high===E.high},h}();m.Int64=u;var s=function(){function h(p){this.low=0,this.high=0,this.low=parseInt(p,10)}return h.prototype._Equals=function(p){var E=new h(p);return this.low===E.low&&this.high===E.high},h}();m.UInt64=s;var _=function(){function h(){}return h._ToByte=function(p){return this._ToUInt8(p)},h._ToUInt8=function(p){return 255&p},h._ToInt32=function(p){return 2147483647&p|2147483648&p},h._ToUInt32=function(p){return 4294967295&p},h}();m.Number=_},514:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=function(){function s(){}return s._IsDataViewSupport=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},s}();m.BrowserChecker=u},4501:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=function(){function s(_){this.clockSkewRefreshDurationInMins=_,this._reset()}return s.prototype.allowRequestSending=function(){return this._isFirstRequest&&!this._clockSkewSet?(this._isFirstRequest=!1,this._allowRequestSending=!1,!0):this._allowRequestSending},s.prototype.shouldAddClockSkewHeaders=function(){return this._shouldAddClockSkewHeaders},s.prototype.getClockSkewHeaderValue=function(){return this._clockSkewHeaderValue},s.prototype.setClockSkew=function(_){this._clockSkewSet||(_?this._clockSkewHeaderValue=_:this._shouldAddClockSkewHeaders=!1,this._clockSkewSet=!0,this._allowRequestSending=!0)},s.prototype._reset=function(){var _=this;this._isFirstRequest=!0,this._clockSkewSet=!1,this._allowRequestSending=!0,this._shouldAddClockSkewHeaders=!0,this._clockSkewHeaderValue="use-collector-delta",this.clockSkewRefreshDurationInMins>0&&setTimeout(function(){return _._reset()},6e4*this.clockSkewRefreshDurationInMins)},s}();m.default=u},7190:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var s=function(){function _(){this._killedTokenDictionary={}}return _.prototype.setKillSwitchTenants=function(h,p){if(h&&p)try{var E=h.split(",");if("this-request-only"===p)return E;for(var f=1e3*parseInt(p,10),v=0;v<E.length;++v)this._killedTokenDictionary[E[v]]=Date.now()+f}catch(I){return[]}return[]},_.prototype.isTenantKilled=function(h){return void 0!==this._killedTokenDictionary[h]&&this._killedTokenDictionary[h]>Date.now()||(delete this._killedTokenDictionary[h],!1)},_}();m.default=s},2551:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=function(){function s(){}return s.addNotificationListener=function(_){this.listeners.push(_)},s.removeNotificationListener=function(_){for(var h=this.listeners.indexOf(_);h>-1;)this.listeners.splice(h,1),h=this.listeners.indexOf(_)},s.eventsSent=function(_){for(var h=this,p=function(v){E.listeners[v].eventsSent&&setTimeout(function(){return h.listeners[v].eventsSent(_)},0)},E=this,f=0;f<this.listeners.length;++f)p(f)},s.eventsDropped=function(_,h){for(var p=this,E=function(I){f.listeners[I].eventsDropped&&setTimeout(function(){return p.listeners[I].eventsDropped(_,h)},0)},f=this,v=0;v<this.listeners.length;++v)E(v)},s.eventsRetrying=function(_){for(var h=this,p=function(v){E.listeners[v].eventsRetrying&&setTimeout(function(){return h.listeners[v].eventsRetrying(_)},0)},E=this,f=0;f<this.listeners.length;++f)p(f)},s.eventsRejected=function(_,h){for(var p=this,E=function(I){f.listeners[I].eventsRejected&&setTimeout(function(){return p.listeners[I].eventsRejected(_,h)},0)},f=this,v=0;v<this.listeners.length;++v)E(v)},s.listeners=[],s}();m.default=u},2659:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var s=u(676),_=function(){function h(p,E){this._outboundQueue=p,this._maxNumberOfEvents=E,this._currentBatch={},this._currentNumEventsInBatch=0}return h.prototype.addEventToBatch=function(p){if(p.priority===s.AWTEventPriority.Immediate_sync){var E={};return E[p.apiKey]=[p],E}return this._currentNumEventsInBatch>=this._maxNumberOfEvents&&this.flushBatch(),void 0===this._currentBatch[p.apiKey]&&(this._currentBatch[p.apiKey]=[]),this._currentBatch[p.apiKey].push(p),this._currentNumEventsInBatch++,null},h.prototype.flushBatch=function(){this._currentNumEventsInBatch>0&&(this._outboundQueue.push(this._currentBatch),this._currentBatch={},this._currentNumEventsInBatch=0)},h.prototype.hasBatch=function(){return this._currentNumEventsInBatch>0},h}();m.default=_},7270:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var p=function(){function E(){}return E.shouldRetryForStatus=function(f){return!(f>=300&&f<500&&408!==f||501===f||505===f)},E.getMillisToBackoffForRetry=function(f){var v,c=Math.floor(1200*Math.random())+2400;return v=Math.pow(4,f)*c,Math.min(v,12e4)},E}();m.default=p},6064:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var s=u(4356),_=u(676),h=u(2551),p=u(5593),E=2936012,f=function(){function v(){}return v.getPayloadBlob=function(I,b){var d,c=!1,C=new s.IO.MemoryStream,w=new s.CompactBinaryProtocolWriter(C);for(var g in w._WriteFieldBegin(s._BondDataType._BT_MAP,3,null),w._WriteMapContainerBegin(b,s._BondDataType._BT_STRING,s._BondDataType._BT_LIST),I)if(c)d||(d={}),d[g]=I[g],delete I[g];else if(I.hasOwnProperty(g)){w._WriteString(g);var T=I[g];w._WriteContainerBegin(1,s._BondDataType._BT_STRUCT),w._WriteFieldBegin(s._BondDataType._BT_STRING,2,null),w._WriteString("act_default_source"),w._WriteFieldBegin(s._BondDataType._BT_STRING,5,null),w._WriteString(p.newGuid()),w._WriteFieldBegin(s._BondDataType._BT_INT64,6,null),w._WriteInt64(p.numberToBondInt64(Date.now())),w._WriteFieldBegin(s._BondDataType._BT_LIST,8,null);var M=C._GetBuffer().length+1;w._WriteContainerBegin(I[g].length,s._BondDataType._BT_STRUCT);for(var R=C._GetBuffer().length-M,S=0;S<T.length;++S){var N=C._GetBuffer().length;if(this.writeEvent(T[S],w),C._GetBuffer().length-N>E)h.default.eventsRejected([T[S]],_.AWTEventsRejectedReason.SizeLimitExceeded),T.splice(S--,1),C._GetBuffer().splice(N),this._addNewDataPackageSize(T.length,C,R,M);else if(C._GetBuffer().length>E){C._GetBuffer().splice(N),d||(d={}),I[g]=T.splice(0,S),d[g]=T,this._addNewDataPackageSize(I[g].length,C,R,M),c=!0;break}}w._WriteStructEnd(!1)}return w._WriteStructEnd(!1),{payloadBlob:C._GetBuffer(),remainingRequest:d}},v._addNewDataPackageSize=function(I,b,c,d){for(var C=s._Encoding._Varint_GetBytes(s.Number._ToUInt32(I)),w=0;w<c;++w){if(!(w<C.length)){b._GetBuffer().slice(d+w,c-w);break}b._GetBuffer()[d+w]=C[w]}},v.writeEvent=function(I,b){b._WriteFieldBegin(s._BondDataType._BT_STRING,1,null),b._WriteString(I.id),b._WriteFieldBegin(s._BondDataType._BT_INT64,3,null),b._WriteInt64(p.numberToBondInt64(I.timestamp)),b._WriteFieldBegin(s._BondDataType._BT_STRING,5,null),b._WriteString(I.type),b._WriteFieldBegin(s._BondDataType._BT_STRING,6,null),b._WriteString(I.name);var c={},d=0,C={},w=0,g={},T=0,M={},R=0,S={},N=0,P={},y=0,A={},F=0;for(var q in I.properties)if(I.properties.hasOwnProperty(q))if((j=I.properties[q]).cc>0)A[q]=j,F++;else if(j.pii>0)P[q]=j,y++;else switch(j.type){case _.AWTPropertyType.String:c[q]=j.value,d++;break;case _.AWTPropertyType.Int64:C[q]=j.value,w++;break;case _.AWTPropertyType.Double:g[q]=j.value,T++;break;case _.AWTPropertyType.Boolean:M[q]=j.value,R++;break;case _.AWTPropertyType.Date:S[q]=j.value,N++}if(d)for(var q in b._WriteFieldBegin(s._BondDataType._BT_MAP,13,null),b._WriteMapContainerBegin(d,s._BondDataType._BT_STRING,s._BondDataType._BT_STRING),c)if(c.hasOwnProperty(q)){var ue=c[q];b._WriteString(q),b._WriteString(ue.toString())}if(y)for(var q in b._WriteFieldBegin(s._BondDataType._BT_MAP,30,null),b._WriteMapContainerBegin(y,s._BondDataType._BT_STRING,s._BondDataType._BT_STRUCT),P)if(P.hasOwnProperty(q)){var j=P[q];b._WriteString(q),b._WriteFieldBegin(s._BondDataType._BT_INT32,1,null),b._WriteInt32(1),b._WriteFieldBegin(s._BondDataType._BT_INT32,2,null),b._WriteInt32(j.pii),b._WriteFieldBegin(s._BondDataType._BT_STRING,3,null),b._WriteString(j.value.toString()),b._WriteStructEnd(!1)}if(R)for(var q in b._WriteFieldBegin(s._BondDataType._BT_MAP,31,null),b._WriteMapContainerBegin(R,s._BondDataType._BT_STRING,s._BondDataType._BT_BOOL),M)M.hasOwnProperty(q)&&(ue=M[q],b._WriteString(q),b._WriteBool(ue));if(N)for(var q in b._WriteFieldBegin(s._BondDataType._BT_MAP,32,null),b._WriteMapContainerBegin(N,s._BondDataType._BT_STRING,s._BondDataType._BT_INT64),S)S.hasOwnProperty(q)&&(ue=S[q],b._WriteString(q),b._WriteInt64(p.numberToBondInt64(ue)));if(w)for(var q in b._WriteFieldBegin(s._BondDataType._BT_MAP,33,null),b._WriteMapContainerBegin(w,s._BondDataType._BT_STRING,s._BondDataType._BT_INT64),C)C.hasOwnProperty(q)&&(ue=C[q],b._WriteString(q),b._WriteInt64(p.numberToBondInt64(ue)));if(T)for(var q in b._WriteFieldBegin(s._BondDataType._BT_MAP,34,null),b._WriteMapContainerBegin(T,s._BondDataType._BT_STRING,s._BondDataType._BT_DOUBLE),g)g.hasOwnProperty(q)&&(ue=g[q],b._WriteString(q),b._WriteDouble(ue));if(F)for(var q in b._WriteFieldBegin(s._BondDataType._BT_MAP,36,null),b._WriteMapContainerBegin(F,s._BondDataType._BT_STRING,s._BondDataType._BT_STRUCT),A)A.hasOwnProperty(q)&&(j=A[q],b._WriteString(q),b._WriteFieldBegin(s._BondDataType._BT_INT32,1,null),b._WriteInt32(j.cc),b._WriteFieldBegin(s._BondDataType._BT_STRING,2,null),b._WriteString(j.value.toString()),b._WriteStructEnd(!1));b._WriteStructEnd(!1)},v.base64Encode=function(I){return s._Encoding._Base64_GetString(I)},v}();m.default=f},5816:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var s=u(5593),_=u(2551),h=u(676),E=function(){function f(){}return f.initialize=function(v){var I=this;this._sendStats=v,this._isInitalized=!0,_.default.addNotificationListener({eventsSent:function(b){I._addStat("records_sent_count",b.length,b[0].apiKey)},eventsDropped:function(b,c){switch(c){case h.AWTEventsDroppedReason.NonRetryableStatus:I._addStat("d_send_fail",b.length,b[0].apiKey),I._addStat("records_dropped_count",b.length,b[0].apiKey);break;case h.AWTEventsDroppedReason.MaxRetryLimit:I._addStat("d_retry_limit",b.length,b[0].apiKey),I._addStat("records_dropped_count",b.length,b[0].apiKey);break;case h.AWTEventsDroppedReason.QueueFull:I._addStat("d_queue_full",b.length,b[0].apiKey)}},eventsRejected:function(b,c){switch(c){case h.AWTEventsRejectedReason.InvalidEvent:I._addStat("r_inv",b.length,b[0].apiKey);break;case h.AWTEventsRejectedReason.KillSwitch:I._addStat("r_kl",b.length,b[0].apiKey);break;case h.AWTEventsRejectedReason.SizeLimitExceeded:I._addStat("r_size",b.length,b[0].apiKey)}I._addStat("r_count",b.length,b[0].apiKey)},eventsRetrying:null}),setTimeout(function(){return I.flush()},6e4)},f.teardown=function(){this._isInitalized&&(this.flush(),this._isInitalized=!1)},f.eventReceived=function(v){f._addStat("records_received_count",1,v)},f.flush=function(){var v=this;if(this._isInitalized){for(var I in this._stats)this._stats.hasOwnProperty(I)&&this._sendStats(this._stats[I],I);this._stats={},setTimeout(function(){return v.flush()},6e4)}},f._addStat=function(v,I,b){if(this._isInitalized&&b!==s.StatsApiKey){var c=s.getTenantId(b);this._stats[c]||(this._stats[c]={}),this._stats[c][v]=this._stats[c][v]?this._stats[c][v]+I:I}},f._isInitalized=!1,f._stats={},f}();m.default=E},676:(K,m)=>{"use strict";var f;Object.defineProperty(m,"__esModule",{value:!0}),(f=m.AWTPropertyType||(m.AWTPropertyType={}))[f.Unspecified=0]="Unspecified",f[f.String=1]="String",f[f.Int64=2]="Int64",f[f.Double=3]="Double",f[f.Boolean=4]="Boolean",f[f.Date=5]="Date",function(f){f[f.NotSet=0]="NotSet",f[f.DistinguishedName=1]="DistinguishedName",f[f.GenericData=2]="GenericData",f[f.IPV4Address=3]="IPV4Address",f[f.IPv6Address=4]="IPv6Address",f[f.MailSubject=5]="MailSubject",f[f.PhoneNumber=6]="PhoneNumber",f[f.QueryString=7]="QueryString",f[f.SipAddress=8]="SipAddress",f[f.SmtpAddress=9]="SmtpAddress",f[f.Identity=10]="Identity",f[f.Uri=11]="Uri",f[f.Fqdn=12]="Fqdn",f[f.IPV4AddressLegacy=13]="IPV4AddressLegacy"}(m.AWTPiiKind||(m.AWTPiiKind={})),function(f){f[f.NotSet=0]="NotSet",f[f.GenericContent=1]="GenericContent"}(m.AWTCustomerContentKind||(m.AWTCustomerContentKind={})),function(f){f[f.Low=1]="Low",f[f.Normal=2]="Normal",f[f.High=3]="High",f[f.Immediate_sync=5]="Immediate_sync"}(m.AWTEventPriority||(m.AWTEventPriority={})),function(f){f[f.NonRetryableStatus=1]="NonRetryableStatus",f[f.QueueFull=3]="QueueFull",f[f.MaxRetryLimit=4]="MaxRetryLimit"}(m.AWTEventsDroppedReason||(m.AWTEventsDroppedReason={})),function(f){f[f.InvalidEvent=1]="InvalidEvent",f[f.SizeLimitExceeded=2]="SizeLimitExceeded",f[f.KillSwitch=3]="KillSwitch"}(m.AWTEventsRejectedReason||(m.AWTEventsRejectedReason={}))},5593:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var s=u(6649),_=u(676),h=/[xy]/g,f=null;m.EventNameAndTypeRegex=/^[a-zA-Z]([a-zA-Z0-9]|_){2,98}[a-zA-Z0-9]$/,m.EventNameDotRegex=/\./g,m.PropertyNameRegex=/^[a-zA-Z](([a-zA-Z0-9|_|\.]){0,98}[a-zA-Z0-9])?$/,m.StatsApiKey="a387cfcf60114a43a7699f9fbb49289e-9bceb9fe-1c06-460f-96c5-6a0b247358bc-7238";var v=f,I=f,b=f;function C(z){return"string"==typeof z}function w(z){return"number"==typeof z}function g(z){return"boolean"==typeof z}function T(z){return z instanceof Date}function M(z){return 1e4*(z+621355968e5)}function j(){return!("undefined"==typeof navigator||!navigator.product)&&"ReactNative"===navigator.product}function ue(){return"object"==typeof self&&"ServiceWorkerGlobalScope"===self.constructor.name}function ee(z){return z<10?"0"+z:z.toString()}function Z(z){return void 0===z||z===f||""===z}m.numberToBondInt64=function(z){var ne=new s.Int64("0");return ne.low=4294967295&z,ne.high=Math.floor(z/4294967296),ne},m.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(h,function(z){var ne=16*Math.random()|0;return("x"===z?ne:3&ne|8).toString(16)})},m.isString=C,m.isNumber=w,m.isBoolean=g,m.isDate=T,m.msToTicks=M,m.getTenantId=function(z){var ne=z.indexOf("-");return ne>-1?z.substring(0,ne):""},m.isBeaconsSupported=function(){return v===f&&(v="undefined"!=typeof navigator&&Boolean(navigator.sendBeacon)),v},m.isUint8ArrayAvailable=function(){return I===f&&(I="undefined"!=typeof Uint8Array&&!function(){if("undefined"!=typeof navigator&&navigator.userAgent){var z=navigator.userAgent.toLowerCase();if((z.indexOf("safari")>=0||z.indexOf("firefox")>=0)&&z.indexOf("chrome")<0)return!0}return!1}()&&!j()),I},m.isPriority=function(z){return!(!w(z)||!(z>=1&&z<=3||5===z))},m.sanitizeProperty=function(z,ne){return!m.PropertyNameRegex.test(z)||Z(ne)||(Z(ne.value)&&(ne={value:ne,type:_.AWTPropertyType.Unspecified}),ne.type=function(z,ne){switch(ne=function(z){return!!(w(z)&&z>=0&&z<=4)}(ne)?ne:_.AWTPropertyType.Unspecified){case _.AWTPropertyType.Unspecified:return function(z){switch(typeof z){case"string":return _.AWTPropertyType.String;case"boolean":return _.AWTPropertyType.Boolean;case"number":return _.AWTPropertyType.Double;case"object":return T(z)?_.AWTPropertyType.Date:f}return f}(z);case _.AWTPropertyType.String:return C(z)?ne:f;case _.AWTPropertyType.Boolean:return g(z)?ne:f;case _.AWTPropertyType.Date:return T(z)&&NaN!==z.getTime()?ne:f;case _.AWTPropertyType.Int64:return w(z)&&z%1==0?ne:f;case _.AWTPropertyType.Double:return w(z)?ne:f}return f}(ne.value,ne.type),!ne.type)||(T(ne.value)&&(ne.value=M(ne.value.getTime())),ne.pii>0&&ne.cc>0)?f:ne.pii?function(z){return!!(w(z)&&z>=0&&z<=13)}(ne.pii)?ne:f:ne.cc?function(z){return!!(w(z)&&z>=0&&z<=1)}(ne.cc)?ne:f:ne},m.getISOString=function(z){return z.getUTCFullYear()+"-"+ee(z.getUTCMonth()+1)+"-"+ee(z.getUTCDate())+"T"+ee(z.getUTCHours())+":"+ee(z.getUTCMinutes())+":"+ee(z.getUTCSeconds())+"."+function(z){return z<10?"00"+z:z<100?"0"+z:z.toString()}(z.getUTCMilliseconds())+"Z"},m.useXDomainRequest=function(){if(b===f){var z=new XMLHttpRequest;b=void 0===z.withCredentials&&"undefined"!=typeof XDomainRequest}return b},m.useFetchRequest=function(){return j()||ue()},m.isReactNative=j,m.isServiceWorkerGlobalScope=ue},4094:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var s=u(5593),_="MicrosoftApplicationsTelemetryDeviceId",h="MicrosoftApplicationsTelemetryFirstLaunchTime",f_WIN=/(windows|win32)/i,f_WINRT=/ arm;/i,f_WINPHONE=/windows\sphone\s\d+\.\d+/i,f_OSX=/(macintosh|mac os x)/i,f_IOS=/(iPad|iPhone|iPod)(?=.*like Mac OS X)/i,f_LINUX=/(linux|joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)/i,f_ANDROID=/android/i,f_CROS=/CrOS/i,v={5.1:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1","10.0":"10"},I="([\\d,.]+)",c="Unknown",d="undefined",C=function(){function w(){}return w.addPropertyStorageOverride=function(g){return!!g&&(this._propertyStorage=g,!0)},w.autoCollect=function(g,T,M){if(this._semanticContext=g,this._disableCookies=T,this._autoCollect(),!M&&typeof navigator!==d&&(M=navigator.userAgent||""),this._autoCollectFromUserAgent(M),this._disableCookies&&!this._propertyStorage)return this._deleteCookie(_),void this._deleteCookie(h);(this._propertyStorage||this._areCookiesAvailable&&!this._disableCookies)&&this._autoCollectDeviceId()},w.checkAndSaveDeviceId=function(g){if(g){var T=this._getData(_),M=this._getData(h);T!==g&&(M=s.getISOString(new Date)),this._saveData(_,g),this._saveData(h,M),this._setFirstLaunchTime(M)}},w._autoCollectDeviceId=function(){var g=this._getData(_);g||(g=s.newGuid()),this._semanticContext.setDeviceId(g)},w._autoCollect=function(){typeof document!==d&&document.documentElement&&this._semanticContext.setAppLanguage(document.documentElement.lang),typeof navigator!==d&&this._semanticContext.setUserLanguage(navigator.userLanguage||navigator.language);var g=(new Date).getTimezoneOffset(),T=g%60,M=(g-T)/60,R="+";M>0&&(R="-"),M=Math.abs(M),T=Math.abs(T),this._semanticContext.setUserTimeZone(R+(M<10?"0"+M:M.toString())+":"+(T<10?"0"+T:T.toString()))},w._autoCollectFromUserAgent=function(g){if(g){var T=this._getBrowserName(g);this._semanticContext.setDeviceBrowserName(T),this._semanticContext.setDeviceBrowserVersion(this._getBrowserVersion(g,T));var M=this._getOsName(g);this._semanticContext.setDeviceOsName(M),this._semanticContext.setDeviceOsVersion(this._getOsVersion(g,M))}},w._getBrowserName=function(g){return this._userAgentContainsString("OPR/",g)?"Opera":this._userAgentContainsString("PhantomJS",g)?"PhantomJS":this._userAgentContainsString("Edge",g)||this._userAgentContainsString("Edg",g)?"Edge":this._userAgentContainsString("Electron",g)?"Electron":this._userAgentContainsString("Chrome",g)?"Chrome":this._userAgentContainsString("Trident",g)?"MSIE":this._userAgentContainsString("Firefox",g)?"Firefox":this._userAgentContainsString("Safari",g)?"Safari":this._userAgentContainsString("SkypeShell",g)?"SkypeShell":c},w._setFirstLaunchTime=function(g){if(!isNaN(g)){var T=new Date;T.setTime(parseInt(g,10)),g=s.getISOString(T)}this.firstLaunchTime=g},w._userAgentContainsString=function(g,T){return T.indexOf(g)>-1},w._getBrowserVersion=function(g,T){if("MSIE"===T)return this._getIeVersion(g);if("Edge"===T){var M=this._getOtherVersion(T,g);return M===c?this._getOtherVersion("Edg",g):M}return this._getOtherVersion(T,g)},w._getIeVersion=function(g){var T=g.match(new RegExp("MSIE "+I));if(T)return T[1];var M=g.match(new RegExp("rv:"+I));return M?M[1]:void 0},w._getOtherVersion=function(g,T){"Safari"===g&&(g="Version");var M=T.match(new RegExp(g+"/"+I));return M?M[1]:c},w._getOsName=function(g){return g.match(f_WINPHONE)?"Windows Phone":g.match(f_WINRT)?"Windows RT":g.match(f_IOS)?"iOS":g.match(f_ANDROID)?"Android":g.match(f_LINUX)?"Linux":g.match(f_OSX)?"Mac OS X":g.match(f_WIN)?"Windows":g.match(f_CROS)?"Chrome OS":c},w._getOsVersion=function(g,T){return"Windows"===T?this._getGenericOsVersion(g,"Windows NT"):"Android"===T?this._getGenericOsVersion(g,T):"Mac OS X"===T?this._getMacOsxVersion(g):c},w._getGenericOsVersion=function(g,T){var M=g.match(new RegExp(T+" "+I));return M?v[M[1]]?v[M[1]]:M[1]:c},w._getMacOsxVersion=function(g){var T=g.match(new RegExp("Mac OS X ([\\d,_,.]+)"));if(T){var M=T[1].replace(/_/g,".");if(M){var R=this._getDelimiter(M);return R?M.split(R)[0]:M}}return c},w._getDelimiter=function(g){return g.indexOf(".")>-1?".":g.indexOf("_")>-1?"_":null},w._saveData=function(g,T){if(this._propertyStorage)this._propertyStorage.setProperty(g,T);else if(this._areCookiesAvailable){var M=new Date;M.setTime(M.getTime()+31536e6);var R="expires="+M.toUTCString();document.cookie=g+"="+T+"; "+R}},w._getData=function(g){if(this._propertyStorage)return this._propertyStorage.getProperty(g)||"";if(this._areCookiesAvailable){g+="=";for(var T=document.cookie.split(";"),M=0;M<T.length;M++){for(var R=T[M],S=0;" "===R.charAt(S);)S++;if(0===(R=R.substring(S)).indexOf(g))return R.substring(g.length,R.length)}}return""},w._deleteCookie=function(g){this._areCookiesAvailable&&(document.cookie=g+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;")},w._disableCookies=!1,w._areCookiesAvailable=typeof document!==d&&typeof document.cookie!==d,w}();m.default=C},58:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var s=u(5593),_=u(676),h=function(){function p(E){this._event={name:"",properties:{}},E&&this.setName(E)}return p.prototype.setName=function(E){this._event.name=E},p.prototype.getName=function(){return this._event.name},p.prototype.setType=function(E){this._event.type=E},p.prototype.getType=function(){return this._event.type},p.prototype.setTimestamp=function(E){this._event.timestamp=E},p.prototype.getTimestamp=function(){return this._event.timestamp},p.prototype.setEventPriority=function(E){this._event.priority=E},p.prototype.getEventPriority=function(){return this._event.priority},p.prototype.setProperty=function(E,f,v){void 0===v&&(v=_.AWTPropertyType.Unspecified);var I={value:f,type:v,pii:_.AWTPiiKind.NotSet,cc:_.AWTCustomerContentKind.NotSet};null!==(I=s.sanitizeProperty(E,I))?this._event.properties[E]=I:delete this._event.properties[E]},p.prototype.setPropertyWithPii=function(E,f,v,I){void 0===I&&(I=_.AWTPropertyType.Unspecified);var b={value:f,type:I,pii:v,cc:_.AWTCustomerContentKind.NotSet};null!==(b=s.sanitizeProperty(E,b))?this._event.properties[E]=b:delete this._event.properties[E]},p.prototype.setPropertyWithCustomerContent=function(E,f,v,I){void 0===I&&(I=_.AWTPropertyType.Unspecified);var b={value:f,type:I,pii:_.AWTPiiKind.NotSet,cc:v};null!==(b=s.sanitizeProperty(E,b))?this._event.properties[E]=b:delete this._event.properties[E]},p.prototype.getPropertyMap=function(){return this._event.properties},p.prototype.getEvent=function(){return this._event},p}();m.default=h},9449:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var s=u(676),_=u(6064),h=u(7270),p=u(7190),E=u(4501),f=u(8779),v=u(5593),I=u(2551),b=u(4023),C="POST",w=function(){function g(T,M,R,S,N){var P=this;this._requestQueue=T,this._queueManager=R,this._httpInterface=S,this._urlString="?qsp=true&content-type=application%2Fbond-compact-binary&client-id=NO_AUTH&sdk-version="+f.FullVersionString,this._killSwitch=new p.default,this._paused=!1,this._useBeacons=!1,this._activeConnections=0,this._clockSkewManager=new E.default(N),v.isUint8ArrayAvailable()||(this._urlString+="&content-encoding=base64"),this._urlString=M+this._urlString,this._httpInterface||(this._useBeacons=!v.isReactNative(),this._httpInterface={sendPOST:function(y,A,F,q,j,ue){try{if(v.useFetchRequest())fetch(y,{body:A,method:C}).then(function(ie){var ce={};ie.headers&&ie.headers.forEach(function(Te,te){ce[te]=Te}),j(ie.status,ce)}).catch(function(ie){q(0,{})});else if(v.useXDomainRequest()){var ee=new XDomainRequest;ee.open(C,y),ee.onload=function(){j(200,null)},ee.onerror=function(){q(400,null)},ee.ontimeout=function(){F(500,null)},ee.send(A)}else{var $=new XMLHttpRequest;$.open(C,y,!ue),$.onload=function(){j($.status,P._convertAllHeadersToMap($.getAllResponseHeaders()))},$.onerror=function(){q($.status,P._convertAllHeadersToMap($.getAllResponseHeaders()))},$.ontimeout=function(){F($.status,P._convertAllHeadersToMap($.getAllResponseHeaders()))},$.send(A)}}catch(ie){q(400,null)}}})}return g.prototype.hasIdleConnection=function(){return this._activeConnections<2},g.prototype.sendQueuedRequests=function(){for(;this.hasIdleConnection()&&!this._paused&&this._requestQueue.length>0&&this._clockSkewManager.allowRequestSending();)this._activeConnections++,this._sendRequest(this._requestQueue.shift(),0,!1);this.hasIdleConnection()&&b.default.scheduleTimer()},g.prototype.isCompletelyIdle=function(){return 0===this._activeConnections},g.prototype.teardown=function(){for(;this._requestQueue.length>0;)this._sendRequest(this._requestQueue.shift(),0,!0)},g.prototype.pause=function(){this._paused=!0},g.prototype.resume=function(){this._paused=!1,this.sendQueuedRequests()},g.prototype.removeQueuedRequests=function(){this._requestQueue.length=0},g.prototype.sendSynchronousRequest=function(T,M){this._paused&&(T[M][0].priority=s.AWTEventPriority.High),this._activeConnections++,this._sendRequest(T,0,!1,!0)},g.prototype._sendRequest=function(T,M,R,S){var N=this;void 0===S&&(S=!1);try{if(this._paused)return this._activeConnections--,void this._queueManager.addBackRequest(T);var P=0,y="";for(var A in T)T.hasOwnProperty(A)&&(this._killSwitch.isTenantKilled(A)?(I.default.eventsRejected(T[A],s.AWTEventsRejectedReason.KillSwitch),delete T[A]):(y.length>0&&(y+=","),y+=A,P++));if(P>0){var F=_.default.getPayloadBlob(T,P);F.remainingRequest&&this._requestQueue.push(F.remainingRequest);var q=this._urlString+"&x-apikey="+y+"&client-time-epoch-millis="+Date.now().toString();this._clockSkewManager.shouldAddClockSkewHeaders()&&(q=q+"&time-delta-to-apply-millis="+this._clockSkewManager.getClockSkewHeaderValue());var j;for(var A in j=v.isUint8ArrayAvailable()?new Uint8Array(F.payloadBlob):_.default.base64Encode(F.payloadBlob),T)if(T.hasOwnProperty(A))for(var ue=0;ue<T[A].length;++ue)T[A][ue].sendAttempt>0?T[A][ue].sendAttempt++:T[A][ue].sendAttempt=1;if(this._useBeacons&&R&&v.isBeaconsSupported()&&navigator.sendBeacon(q,j))return;this._httpInterface.sendPOST(q,j,function(ee,$){N._retryRequestIfNeeded(ee,$,T,P,y,M,R,S)},function(ee,$){N._retryRequestIfNeeded(ee,$,T,P,y,M,R,S)},function(ee,$){N._retryRequestIfNeeded(ee,$,T,P,y,M,R,S)},R||S)}else R||this._handleRequestFinished(!1,{},R,S)}catch(ee){this._handleRequestFinished(!1,{},R,S)}},g.prototype._retryRequestIfNeeded=function(T,M,R,S,N,P,y,A){var F=this,q=!0;if(void 0!==T){if(M){var j=this._killSwitch.setKillSwitchTenants(M["kill-tokens"],M["kill-duration-seconds"]);this._clockSkewManager.setClockSkew(M["time-delta-millis"]);for(var ue=0;ue<j.length;++ue)I.default.eventsRejected(R[j[ue]],s.AWTEventsRejectedReason.KillSwitch),delete R[j[ue]],S--}else this._clockSkewManager.setClockSkew(null);if(200===T)return void this._handleRequestFinished(!0,R,y,A);(!h.default.shouldRetryForStatus(T)||S<=0)&&(q=!1)}if(q)if(A)this._activeConnections--,R[N][0].priority=s.AWTEventPriority.High,this._queueManager.addBackRequest(R);else if(P<1){for(var ee in R)R.hasOwnProperty(ee)&&I.default.eventsRetrying(R[ee]);setTimeout(function(){return F._sendRequest(R,P+1,!1)},h.default.getMillisToBackoffForRetry(P))}else this._activeConnections--,b.default.backOffTransmission(),this._queueManager.addBackRequest(R);else this._handleRequestFinished(!1,R,y,A)},g.prototype._handleRequestFinished=function(T,M,R,S){for(var N in T&&b.default.clearBackOff(),M)M.hasOwnProperty(N)&&(T?I.default.eventsSent(M[N]):I.default.eventsDropped(M[N],s.AWTEventsDroppedReason.NonRetryableStatus));this._activeConnections--,!S&&!R&&this.sendQueuedRequests()},g.prototype._convertAllHeadersToMap=function(T){var M={};if(T)for(var R=T.split("\n"),S=0;S<R.length;++S){var N=R[S].split(": ");M[N[0]]=N[1]}return M},g}();m.default=w},7613:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var s=u(676),_=u(5640),h=u(4189),p=u(6208),E=u(4023),f=u(2551),v=u(4094),I=function(){function b(){}return b.initialize=function(c,d){if(void 0===d&&(d={}),!this._isInitialized)return this._isInitialized=!0,h.default.defaultTenantToken=c,this._overrideValuesFromConfig(d),this._config.disableCookiesUsage&&!this._config.propertyStorageOverride&&(h.default.sessionEnabled=!1),v.default.addPropertyStorageOverride(this._config.propertyStorageOverride),v.default.autoCollect(h.default.semanticContext,this._config.disableCookiesUsage,this._config.userAgent),E.default.initialize(this._config),h.default.loggingEnabled=!0,this._config.enableAutoUserSession&&(this.getLogger().logSession(_.AWTSessionState.Started),window.addEventListener("beforeunload",this.flushAndTeardown)),this.getLogger()},b.getSemanticContext=function(){return h.default.semanticContext},b.flush=function(c){this._isInitialized&&!this._isDestroyed&&E.default.flush(c)},b.flushAndTeardown=function(){this._isInitialized&&!this._isDestroyed&&(this._config.enableAutoUserSession&&this.getLogger().logSession(_.AWTSessionState.Ended),E.default.flushAndTeardown(),h.default.loggingEnabled=!1,this._isDestroyed=!0)},b.pauseTransmission=function(){this._isInitialized&&!this._isDestroyed&&E.default.pauseTransmission()},b.resumeTransmision=function(){this._isInitialized&&!this._isDestroyed&&E.default.resumeTransmision()},b.setTransmitProfile=function(c){this._isInitialized&&!this._isDestroyed&&E.default.setTransmitProfile(c)},b.loadTransmitProfiles=function(c){this._isInitialized&&!this._isDestroyed&&E.default.loadTransmitProfiles(c)},b.setContext=function(c,d,C){void 0===C&&(C=s.AWTPropertyType.Unspecified),h.default.logManagerContext.setProperty(c,d,C)},b.setContextWithPii=function(c,d,C,w){void 0===w&&(w=s.AWTPropertyType.Unspecified),h.default.logManagerContext.setPropertyWithPii(c,d,C,w)},b.setContextWithCustomerContent=function(c,d,C,w){void 0===w&&(w=s.AWTPropertyType.Unspecified),h.default.logManagerContext.setPropertyWithCustomerContent(c,d,C,w)},b.getLogger=function(c){var d=c;return(!d||d===h.default.defaultTenantToken)&&(d=""),this._loggers[d]||(this._loggers[d]=new p.default(d)),this._loggers[d]},b.addNotificationListener=function(c){f.default.addNotificationListener(c)},b.removeNotificationListener=function(c){f.default.removeNotificationListener(c)},b._overrideValuesFromConfig=function(c){c.collectorUri&&(this._config.collectorUri=c.collectorUri),c.cacheMemorySizeLimitInNumberOfEvents>0&&(this._config.cacheMemorySizeLimitInNumberOfEvents=c.cacheMemorySizeLimitInNumberOfEvents),c.httpXHROverride&&c.httpXHROverride.sendPOST&&(this._config.httpXHROverride=c.httpXHROverride),c.propertyStorageOverride&&c.propertyStorageOverride.getProperty&&c.propertyStorageOverride.setProperty&&(this._config.propertyStorageOverride=c.propertyStorageOverride),c.userAgent&&(this._config.userAgent=c.userAgent),c.disableCookiesUsage&&(this._config.disableCookiesUsage=c.disableCookiesUsage),c.canSendStatEvent&&(this._config.canSendStatEvent=c.canSendStatEvent),c.enableAutoUserSession&&"undefined"!=typeof window&&window.addEventListener&&(this._config.enableAutoUserSession=c.enableAutoUserSession),c.clockSkewRefreshDurationInMins>0&&(this._config.clockSkewRefreshDurationInMins=c.clockSkewRefreshDurationInMins)},b._loggers={},b._isInitialized=!1,b._isDestroyed=!1,b._config={collectorUri:"https://browser.pipe.aria.microsoft.com/Collector/3.0/",cacheMemorySizeLimitInNumberOfEvents:1e4,disableCookiesUsage:!1,canSendStatEvent:function(c){return!0},clockSkewRefreshDurationInMins:0},b}();m.default=I},4189:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var s=u(58),_=u(1009),h=function(){function p(){}return p.logManagerContext=new s.default,p.sessionEnabled=!0,p.loggingEnabled=!1,p.defaultTenantToken="",p.semanticContext=new _.default(!0,p.logManagerContext),p}();m.default=h},6208:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var s=u(676),_=u(5640),h=u(58),p=u(5593),E=u(5816),f=u(2551),v=u(4023),I=u(4189),b=u(8779),c=u(1009),d=u(4094),C=function(){function w(g){this._apiKey=g,this._contextProperties=new h.default,this._semanticContext=new c.default(!1,this._contextProperties),this._sessionStartTime=0,this._createInitId()}return w.prototype.setContext=function(g,T,M){void 0===M&&(M=s.AWTPropertyType.Unspecified),this._contextProperties.setProperty(g,T,M)},w.prototype.setContextWithPii=function(g,T,M,R){void 0===R&&(R=s.AWTPropertyType.Unspecified),this._contextProperties.setPropertyWithPii(g,T,M,R)},w.prototype.setContextWithCustomerContent=function(g,T,M,R){void 0===R&&(R=s.AWTPropertyType.Unspecified),this._contextProperties.setPropertyWithCustomerContent(g,T,M,R)},w.prototype.getSemanticContext=function(){return this._semanticContext},w.prototype.logEvent=function(g){if(I.default.loggingEnabled){this._apiKey||(this._apiKey=I.default.defaultTenantToken,this._createInitId());var T=!0;p.isString(g)?g={name:g}:g instanceof h.default&&(g=g.getEvent(),T=!1),E.default.eventReceived(this._apiKey),w._logEvent(w._getInternalEvent(g,this._apiKey,T),this._contextProperties)}},w.prototype.logSession=function(g,T){if(I.default.sessionEnabled){var M={name:"session",type:"session",properties:{}};if(w._addPropertiesToEvent(M,T),M.priority=s.AWTEventPriority.High,g===_.AWTSessionState.Started){if(this._sessionStartTime>0)return;this._sessionStartTime=(new Date).getTime(),this._sessionId=p.newGuid(),this.setContext("Session.Id",this._sessionId),M.properties["Session.State"]="Started"}else{if(g!==_.AWTSessionState.Ended)return;if(0===this._sessionStartTime)return;var R=Math.floor(((new Date).getTime()-this._sessionStartTime)/1e3);M.properties["Session.Id"]=this._sessionId,M.properties["Session.State"]="Ended",M.properties["Session.Duration"]=R.toString(),M.properties["Session.DurationBucket"]=w._getSessionDurationFromTime(R),this._sessionStartTime=0,this.setContext("Session.Id",null),this._sessionId=void 0}M.properties["Session.FirstLaunchTime"]=d.default.firstLaunchTime,this.logEvent(M)}},w.prototype.getSessionId=function(){return this._sessionId},w.prototype.logFailure=function(g,T,M,R,S){if(g&&T){var N={name:"failure",type:"failure",properties:{}};w._addPropertiesToEvent(N,S),N.properties["Failure.Signature"]=g,N.properties["Failure.Detail"]=T,M&&(N.properties["Failure.Category"]=M),R&&(N.properties["Failure.Id"]=R),N.priority=s.AWTEventPriority.High,this.logEvent(N)}},w.prototype.logPageView=function(g,T,M,R,S,N){if(g&&T){var P={name:"pageview",type:"pageview",properties:{}};w._addPropertiesToEvent(P,N),P.properties["PageView.Id"]=g,P.properties["PageView.Name"]=T,M&&(P.properties["PageView.Category"]=M),R&&(P.properties["PageView.Uri"]=R),S&&(P.properties["PageView.ReferrerUri"]=S),this.logEvent(P)}},w.prototype._createInitId=function(){!w._initIdMap[this._apiKey]&&this._apiKey&&(w._initIdMap[this._apiKey]=p.newGuid())},w._addPropertiesToEvent=function(g,T){if(T)for(var M in T instanceof h.default&&(T=T.getEvent()),T.name&&(g.name=T.name),T.priority&&(g.priority=T.priority),T.properties)T.properties.hasOwnProperty(M)&&(g.properties[M]=T.properties[M])},w._getSessionDurationFromTime=function(g){return g<0?"Undefined":g<=3?"UpTo3Sec":g<=10?"UpTo10Sec":g<=30?"UpTo30Sec":g<=60?"UpTo60Sec":g<=180?"UpTo3Min":g<=600?"UpTo10Min":g<=1800?"UpTo30Min":"Above30Min"},w._logEvent=function(g,T){g.name&&p.isString(g.name)?(g.name=g.name.toLowerCase(),g.name=g.name.replace(p.EventNameDotRegex,"_"),g.type=g.type&&p.isString(g.type)?g.type.toLowerCase():"custom",p.EventNameAndTypeRegex.test(g.name)&&p.EventNameAndTypeRegex.test(g.type)?((!p.isNumber(g.timestamp)||g.timestamp<0)&&(g.timestamp=(new Date).getTime()),g.properties||(g.properties={}),this._addContextIfAbsent(g,T.getPropertyMap()),this._addContextIfAbsent(g,I.default.logManagerContext.getPropertyMap()),this._setDefaultProperty(g,"EventInfo.InitId",this._getInitId(g.apiKey)),this._setDefaultProperty(g,"EventInfo.Sequence",this._getSequenceId(g.apiKey)),this._setDefaultProperty(g,"EventInfo.SdkVersion",b.FullVersionString),this._setDefaultProperty(g,"EventInfo.Name",g.name),this._setDefaultProperty(g,"EventInfo.Time",new Date(g.timestamp).toISOString()),p.isPriority(g.priority)||(g.priority=s.AWTEventPriority.Normal),this._sendEvent(g)):f.default.eventsRejected([g],s.AWTEventsRejectedReason.InvalidEvent)):f.default.eventsRejected([g],s.AWTEventsRejectedReason.InvalidEvent)},w._addContextIfAbsent=function(g,T){if(T)for(var M in T)T.hasOwnProperty(M)&&(g.properties[M]||(g.properties[M]=T[M]))},w._setDefaultProperty=function(g,T,M){g.properties[T]={value:M,pii:s.AWTPiiKind.NotSet,type:s.AWTPropertyType.String}},w._sendEvent=function(g){v.default.sendEvent(g)},w._getInternalEvent=function(g,T,M){if(g.properties=g.properties||{},M)for(var R in g.properties)g.properties.hasOwnProperty(R)&&(g.properties[R]=p.sanitizeProperty(R,g.properties[R]),null===g.properties[R]&&delete g.properties[R]);var S=g;return S.id=p.newGuid(),S.apiKey=T,S},w._getInitId=function(g){return w._initIdMap[g]},w._getSequenceId=function(g){return void 0===w._sequenceIdMap[g]&&(w._sequenceIdMap[g]=0),(++w._sequenceIdMap[g]).toString()},w._sequenceIdMap={},w._initIdMap={},w}();m.default=C},4220:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var s=u(676),_=u(9449),h=u(4023),p=u(2659),E=u(2551),f=u(5593),c=function(){function d(C,w,g,T){this._queueSizeLimit=w,this._isCurrentlyUploadingNow=!1,this._uploadNowQueue=[],this._shouldDropEventsOnPause=!1,this._paused=!1,this._queueSize=0,this._outboundQueue=[],this._inboundQueues={},this._inboundQueues[s.AWTEventPriority.High]=[],this._inboundQueues[s.AWTEventPriority.Normal]=[],this._inboundQueues[s.AWTEventPriority.Low]=[],this._addEmptyQueues(),this._batcher=new p.default(this._outboundQueue,500),this._httpManager=new _.default(this._outboundQueue,C,this,g,T)}return d.prototype.addEvent=function(C){f.isPriority(C.priority)||(C.priority=s.AWTEventPriority.Normal),C.priority===s.AWTEventPriority.Immediate_sync?this._httpManager.sendSynchronousRequest(this._batcher.addEventToBatch(C),C.apiKey):this._queueSize<this._queueSizeLimit||this._dropEventWithPriorityOrLess(C.priority)?this._addEventToProperQueue(C):E.default.eventsDropped([C],s.AWTEventsDroppedReason.QueueFull)},d.prototype.sendEventsForPriorityAndAbove=function(C){this._batchEvents(C),this._httpManager.sendQueuedRequests()},d.prototype.hasEvents=function(){return(this._inboundQueues[s.AWTEventPriority.High][0].length>0||this._inboundQueues[s.AWTEventPriority.Normal][0].length>0||this._inboundQueues[s.AWTEventPriority.Low][0].length>0||this._batcher.hasBatch())&&this._httpManager.hasIdleConnection()},d.prototype.addBackRequest=function(C){if(!this._paused||!this._shouldDropEventsOnPause){for(var w in C)if(C.hasOwnProperty(w))for(var g=0;g<C[w].length;++g)C[w][g].sendAttempt<6?this.addEvent(C[w][g]):E.default.eventsDropped([C[w][g]],s.AWTEventsDroppedReason.MaxRetryLimit);h.default.scheduleTimer()}},d.prototype.teardown=function(){this._paused||(this._batchEvents(s.AWTEventPriority.Low),this._httpManager.teardown())},d.prototype.uploadNow=function(C){var w=this;this._addEmptyQueues(),this._isCurrentlyUploadingNow?this._uploadNowQueue.push(C):(this._isCurrentlyUploadingNow=!0,setTimeout(function(){return w._uploadNow(C)},0))},d.prototype.pauseTransmission=function(){this._paused=!0,this._httpManager.pause(),this._shouldDropEventsOnPause&&(this._queueSize-=this._inboundQueues[s.AWTEventPriority.High][0].length+this._inboundQueues[s.AWTEventPriority.Normal][0].length+this._inboundQueues[s.AWTEventPriority.Low][0].length,this._inboundQueues[s.AWTEventPriority.High][0]=[],this._inboundQueues[s.AWTEventPriority.Normal][0]=[],this._inboundQueues[s.AWTEventPriority.Low][0]=[],this._httpManager.removeQueuedRequests())},d.prototype.resumeTransmission=function(){this._paused=!1,this._httpManager.resume()},d.prototype.shouldDropEventsOnPause=function(C){this._shouldDropEventsOnPause=C},d.prototype._removeFirstQueues=function(){this._inboundQueues[s.AWTEventPriority.High].shift(),this._inboundQueues[s.AWTEventPriority.Normal].shift(),this._inboundQueues[s.AWTEventPriority.Low].shift()},d.prototype._addEmptyQueues=function(){this._inboundQueues[s.AWTEventPriority.High].push([]),this._inboundQueues[s.AWTEventPriority.Normal].push([]),this._inboundQueues[s.AWTEventPriority.Low].push([])},d.prototype._addEventToProperQueue=function(C){(!this._paused||!this._shouldDropEventsOnPause)&&(this._queueSize++,this._inboundQueues[C.priority][this._inboundQueues[C.priority].length-1].push(C))},d.prototype._dropEventWithPriorityOrLess=function(C){for(var w=s.AWTEventPriority.Low;w<=C;){if(this._inboundQueues[w][this._inboundQueues[w].length-1].length>0)return E.default.eventsDropped([this._inboundQueues[w][this._inboundQueues[w].length-1].shift()],s.AWTEventsDroppedReason.QueueFull),!0;w++}return!1},d.prototype._batchEvents=function(C){for(var w=s.AWTEventPriority.High;w>=C;){for(;this._inboundQueues[w][0].length>0;){var g=this._inboundQueues[w][0].pop();this._queueSize--,this._batcher.addEventToBatch(g)}w--}this._batcher.flushBatch()},d.prototype._uploadNow=function(C){var w=this;this.hasEvents()&&this.sendEventsForPriorityAndAbove(s.AWTEventPriority.Low),this._checkOutboundQueueEmptyAndSent(function(){w._removeFirstQueues(),null!=C&&C(),w._uploadNowQueue.length>0?setTimeout(function(){return w._uploadNow(w._uploadNowQueue.shift())},0):(w._isCurrentlyUploadingNow=!1,w.hasEvents()&&h.default.scheduleTimer())})},d.prototype._checkOutboundQueueEmptyAndSent=function(C){var w=this;this._httpManager.isCompletelyIdle()?C():setTimeout(function(){return w._checkOutboundQueueEmptyAndSent(C)},250)},d}();m.default=c},1009:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var s=u(4094),_=u(676),h=u(5640),p="UserInfo.IdType",E=function(){function f(v,I){this._allowDeviceFields=v,this._properties=I}return f.prototype.setAppId=function(v){this._addContext("AppInfo.Id",v)},f.prototype.setAppVersion=function(v){this._addContext("AppInfo.Version",v)},f.prototype.setAppLanguage=function(v){this._addContext("AppInfo.Language",v)},f.prototype.setDeviceId=function(v){this._allowDeviceFields&&(s.default.checkAndSaveDeviceId(v),this._addContext("DeviceInfo.Id",v))},f.prototype.setDeviceOsName=function(v){this._allowDeviceFields&&this._addContext("DeviceInfo.OsName",v)},f.prototype.setDeviceOsVersion=function(v){this._allowDeviceFields&&this._addContext("DeviceInfo.OsVersion",v)},f.prototype.setDeviceBrowserName=function(v){this._allowDeviceFields&&this._addContext("DeviceInfo.BrowserName",v)},f.prototype.setDeviceBrowserVersion=function(v){this._allowDeviceFields&&this._addContext("DeviceInfo.BrowserVersion",v)},f.prototype.setDeviceMake=function(v){this._allowDeviceFields&&this._addContext("DeviceInfo.Make",v)},f.prototype.setDeviceModel=function(v){this._allowDeviceFields&&this._addContext("DeviceInfo.Model",v)},f.prototype.setUserId=function(v,I,b){if(!isNaN(b)&&null!==b&&b>=0&&b<=12)this._addContext(p,b.toString());else{var c=void 0;switch(I){case _.AWTPiiKind.SipAddress:c=h.AWTUserIdType.SipAddress;break;case _.AWTPiiKind.PhoneNumber:c=h.AWTUserIdType.PhoneNumber;break;case _.AWTPiiKind.SmtpAddress:c=h.AWTUserIdType.EmailAddress;break;default:c=h.AWTUserIdType.Unknown}this._addContext(p,c.toString())}if(isNaN(I)||null===I||I===_.AWTPiiKind.NotSet||I>13)switch(b){case h.AWTUserIdType.Skype:I=_.AWTPiiKind.Identity;break;case h.AWTUserIdType.EmailAddress:I=_.AWTPiiKind.SmtpAddress;break;case h.AWTUserIdType.PhoneNumber:I=_.AWTPiiKind.PhoneNumber;break;case h.AWTUserIdType.SipAddress:I=_.AWTPiiKind.SipAddress;break;default:I=_.AWTPiiKind.NotSet}this._addContextWithPii("UserInfo.Id",v,I)},f.prototype.setUserAdvertisingId=function(v){this._addContext("UserInfo.AdvertisingId",v)},f.prototype.setUserTimeZone=function(v){this._addContext("UserInfo.TimeZone",v)},f.prototype.setUserLanguage=function(v){this._addContext("UserInfo.Language",v)},f.prototype._addContext=function(v,I){"string"==typeof I&&this._properties.setProperty(v,I)},f.prototype._addContextWithPii=function(v,I,b){"string"==typeof I&&this._properties.setPropertyWithPii(v,I,b)},f}();m.default=E},2621:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var s=u(4023),_=function(){function h(){}return h.setEventsHandler=function(p){s.default.setEventsHandler(p)},h.getEventsHandler=function(){return s.default.getEventsHandler()},h.scheduleTimer=function(){s.default.scheduleTimer()},h}();m.default=_},4023:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var s=u(1842),_=u(676),h=u(4220),p=u(5816),E=u(58),f=u(7613),v=u(5593),c="awt_stats",d=function(){function C(){}return C.setEventsHandler=function(w){this._eventHandler=w},C.getEventsHandler=function(){return this._eventHandler},C.scheduleTimer=function(){var w=this,g=this._profiles[this._currentProfile][2];this._timeout<0&&g>=0&&!this._paused&&(this._eventHandler.hasEvents()?(0===g&&this._currentBackoffCount>0&&(g=1),this._timeout=setTimeout(function(){return w._batchAndSendEvents()},g*(1<<this._currentBackoffCount)*1e3)):this._timerCount=0)},C.initialize=function(w){var g=this;this._newEventsAllowed=!0,this._config=w,this._eventHandler=new h.default(w.collectorUri,w.cacheMemorySizeLimitInNumberOfEvents,w.httpXHROverride,w.clockSkewRefreshDurationInMins),this._initializeProfiles(),p.default.initialize(function(T,M){if(g._config.canSendStatEvent(c)){var R=new E.default(c);for(var S in R.setEventPriority(_.AWTEventPriority.High),R.setProperty("TenantId",M),T)T.hasOwnProperty(S)&&R.setProperty(S,T[S].toString());f.default.getLogger(v.StatsApiKey).logEvent(R)}})},C.setTransmitProfile=function(w){this._currentProfile!==w&&void 0!==this._profiles[w]&&(this.clearTimeout(),this._currentProfile=w,this.scheduleTimer())},C.loadTransmitProfiles=function(w){for(var g in this._resetTransmitProfiles(),w)if(w.hasOwnProperty(g)){if(3!==w[g].length)continue;for(var T=2;T>=0;--T)if(w[g][T]<0){for(var M=T;M>=0;--M)w[g][M]=-1;break}for(T=2;T>0;--T)w[g][T]>0&&w[g][T-1]>0&&(w[g][T-1]=Math.ceil(w[g][T-1]/w[g][T])*w[g][T]);this._profiles[g]=w[g]}},C.sendEvent=function(w){this._newEventsAllowed&&(this._currentBackoffCount>0&&w.priority===_.AWTEventPriority.Immediate_sync&&(w.priority=_.AWTEventPriority.High),this._eventHandler.addEvent(w),this.scheduleTimer())},C.flush=function(w){var g=(new Date).getTime();!this._paused&&this._lastUploadNowCall+3e4<g&&(this._lastUploadNowCall=g,this._timeout>-1&&(clearTimeout(this._timeout),this._timeout=-1),this._eventHandler.uploadNow(w))},C.pauseTransmission=function(){this._paused||(this.clearTimeout(),this._eventHandler.pauseTransmission(),this._paused=!0)},C.resumeTransmision=function(){this._paused&&(this._paused=!1,this._eventHandler.resumeTransmission(),this.scheduleTimer())},C.flushAndTeardown=function(){p.default.teardown(),this._newEventsAllowed=!1,this.clearTimeout(),this._eventHandler.teardown()},C.backOffTransmission=function(){this._currentBackoffCount<4&&(this._currentBackoffCount++,this.clearTimeout(),this.scheduleTimer())},C.clearBackOff=function(){this._currentBackoffCount>0&&(this._currentBackoffCount=0,this.clearTimeout(),this.scheduleTimer())},C._resetTransmitProfiles=function(){this.clearTimeout(),this._initializeProfiles(),this._currentProfile=s.AWT_REAL_TIME,this.scheduleTimer()},C.clearTimeout=function(){this._timeout>0&&(clearTimeout(this._timeout),this._timeout=-1,this._timerCount=0)},C._batchAndSendEvents=function(){var w=_.AWTEventPriority.High;this._timerCount++,this._timerCount*this._profiles[this._currentProfile][2]===this._profiles[this._currentProfile][0]?(w=_.AWTEventPriority.Low,this._timerCount=0):this._timerCount*this._profiles[this._currentProfile][2]===this._profiles[this._currentProfile][1]&&(w=_.AWTEventPriority.Normal),this._eventHandler.sendEventsForPriorityAndAbove(w),this._timeout=-1,this.scheduleTimer()},C._initializeProfiles=function(){this._profiles={},this._profiles[s.AWT_REAL_TIME]=[4,2,1],this._profiles[s.AWT_NEAR_REAL_TIME]=[12,6,3],this._profiles[s.AWT_BEST_EFFORT]=[36,18,9]},C._newEventsAllowed=!1,C._currentProfile=s.AWT_REAL_TIME,C._timeout=-1,C._currentBackoffCount=0,C._paused=!1,C._timerCount=0,C._lastUploadNowCall=0,C}();m.default=d},5234:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var s=u(676);m.AWTPropertyType=s.AWTPropertyType,m.AWTPiiKind=s.AWTPiiKind,m.AWTEventPriority=s.AWTEventPriority,m.AWTEventsDroppedReason=s.AWTEventsDroppedReason,m.AWTEventsRejectedReason=s.AWTEventsRejectedReason,m.AWTCustomerContentKind=s.AWTCustomerContentKind;var _=u(5640);m.AWTUserIdType=_.AWTUserIdType,m.AWTSessionState=_.AWTSessionState;var h=u(1842);m.AWT_BEST_EFFORT=h.AWT_BEST_EFFORT,m.AWT_NEAR_REAL_TIME=h.AWT_NEAR_REAL_TIME,m.AWT_REAL_TIME=h.AWT_REAL_TIME;var p=u(58);m.AWTEventProperties=p.default;var E=u(6208);m.AWTLogger=E.default;var f=u(7613);m.AWTLogManager=f.default;var v=u(2621);m.AWTTransmissionManager=v.default;var I=u(6064);m.AWTSerializer=I.default;var b=u(1009);m.AWTSemanticContext=b.default,m.AWT_COLLECTOR_URL_UNITED_STATES="https://us.pipe.aria.microsoft.com/Collector/3.0/",m.AWT_COLLECTOR_URL_GERMANY="https://de.pipe.aria.microsoft.com/Collector/3.0/",m.AWT_COLLECTOR_URL_JAPAN="https://jp.pipe.aria.microsoft.com/Collector/3.0/",m.AWT_COLLECTOR_URL_AUSTRALIA="https://au.pipe.aria.microsoft.com/Collector/3.0/",m.AWT_COLLECTOR_URL_EUROPE="https://eu.pipe.aria.microsoft.com/Collector/3.0/",m.AWT_COLLECTOR_URL_USGOV_DOD="https://pf.pipe.aria.microsoft.com/Collector/3.0",m.AWT_COLLECTOR_URL_USGOV_DOJ="https://tb.pipe.aria.microsoft.com/Collector/3.0"},1842:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.AWT_REAL_TIME="REAL_TIME",m.AWT_NEAR_REAL_TIME="NEAR_REAL_TIME",m.AWT_BEST_EFFORT="BEST_EFFORT"},5640:(K,m)=>{"use strict";var _;Object.defineProperty(m,"__esModule",{value:!0}),(_=m.AWTUserIdType||(m.AWTUserIdType={}))[_.Unknown=0]="Unknown",_[_.MSACID=1]="MSACID",_[_.MSAPUID=2]="MSAPUID",_[_.ANID=3]="ANID",_[_.OrgIdCID=4]="OrgIdCID",_[_.OrgIdPUID=5]="OrgIdPUID",_[_.UserObjectId=6]="UserObjectId",_[_.Skype=7]="Skype",_[_.Yammer=8]="Yammer",_[_.EmailAddress=9]="EmailAddress",_[_.PhoneNumber=10]="PhoneNumber",_[_.SipAddress=11]="SipAddress",_[_.MUID=12]="MUID",function(_){_[_.Started=0]="Started",_[_.Ended=1]="Ended"}(m.AWTSessionState||(m.AWTSessionState={}))},8779:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.Version="1.8.7",m.FullVersionString="AWT-Web-JS-"+m.Version},5436:(K,m,u)=>{"use strict";m.Mg=void 0;u(3762),u(6194);var p=u(7626);m.Mg=p.default,u(448),u(2900),u(3372),u(4352);u(9425)},2235:function(K,m,u){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(d){for(var C,w=1,g=arguments.length;w<g;w++)for(var T in C=arguments[w])Object.prototype.hasOwnProperty.call(C,T)&&(d[T]=C[T]);return d}).apply(this,arguments)};Object.defineProperty(m,"__esModule",{value:!0});var _=u(4151),h=u(676),p=u(5234),E=u(7095),f=u(3037),v=u(4151),I=u(8098),b=(()=>((b||(b={})).ReactNative="ReactNative",b))(),c=function(){function d(){}return d.initialize=function(C){this._debug&&console.log("[AriaTelemetry][logger][initialize][custom]"),d._logger=p.AWTLogManager.initialize(C)},d.setDebug=function(C){d._debug=C},d.disable=function(){this._debug&&console.log("[AriaTelemetry][disable]"),d._disable=!0},d.setCDNPackages=function(C){d._CDNPackagesInfo=s(s({},d._CDNPackagesInfo),C)},d.info=function(C,w){var g;void 0===w&&(w=f.default.EVENTS);var T={name:f.default.EVENTS,properties:s(s(s(s(s({},d.populateBaseProperties()),d.fillWebPlatformData()),d.fillMobilePlatformData()),C),{LogLevel:E.default.INFO}),priority:h.AWTEventPriority.High};w==f.default.IC3CLIENT&&(T={name:f.default.IC3CLIENT,properties:s(s(s({},d.populateIC3ClientBaseProperties()),C),{LogLevel:E.default.INFO}),priority:h.AWTEventPriority.High}),w==f.default.OCSDK&&(T={name:f.default.OCSDK,properties:s(s(s({},d.populateOCSDKBaseProperties()),C),{LogLevel:E.default.INFO}),priority:h.AWTEventPriority.High}),w==f.default.ACSCLIENT&&(T={name:f.default.ACSCLIENT,properties:s(s(s({},d.populateACSClientBaseProperties()),C),{LogLevel:E.default.INFO}),priority:h.AWTEventPriority.High}),w==f.default.ACSADAPTER&&(T={name:f.default.ACSADAPTER,properties:s(s(s({},d.populateACSAdapterBaseProperties()),C),{LogLevel:E.default.INFO}),priority:h.AWTEventPriority.High}),this._debug&&console.log("[AriaTelemetry][info] "+w),this._debug&&console.log(T),this._debug&&console.log(T.properties.Event),!d._disable&&(null===(g=d.logger)||void 0===g||g.logEvent(T))},d.debug=function(C,w){var g;void 0===w&&(w=f.default.EVENTS);var T={name:f.default.EVENTS,properties:s(s(s(s(s({},d.populateBaseProperties()),d.fillWebPlatformData()),d.fillMobilePlatformData()),C),{LogLevel:E.default.DEBUG}),priority:h.AWTEventPriority.High};w==f.default.IC3CLIENT&&(T={name:f.default.IC3CLIENT,properties:s(s(s({},d.populateIC3ClientBaseProperties()),C),{LogLevel:E.default.DEBUG}),priority:h.AWTEventPriority.High}),w==f.default.OCSDK&&(T={name:f.default.OCSDK,properties:s(s(s({},d.populateOCSDKBaseProperties()),C),{LogLevel:E.default.DEBUG}),priority:h.AWTEventPriority.High}),w==f.default.ACSCLIENT&&(T={name:f.default.ACSCLIENT,properties:s(s(s({},d.populateACSClientBaseProperties()),C),{LogLevel:E.default.DEBUG}),priority:h.AWTEventPriority.High}),w==f.default.ACSADAPTER&&(T={name:f.default.ACSADAPTER,properties:s(s(s({},d.populateACSAdapterBaseProperties()),C),{LogLevel:E.default.DEBUG}),priority:h.AWTEventPriority.High}),this._debug&&console.log("[AriaTelemetry][debug] "+w),this._debug&&console.log(T),this._debug&&console.log(T.properties.Event),!d._disable&&(null===(g=d.logger)||void 0===g||g.logEvent(T))},d.warn=function(C,w){var g;void 0===w&&(w=f.default.EVENTS);var T={name:f.default.EVENTS,properties:s(s(s(s(s({},d.populateBaseProperties()),d.fillWebPlatformData()),d.fillMobilePlatformData()),C),{LogLevel:E.default.WARN}),priority:h.AWTEventPriority.High};w==f.default.IC3CLIENT&&(T={name:f.default.IC3CLIENT,properties:s(s(s({},d.populateIC3ClientBaseProperties()),C),{LogLevel:E.default.WARN}),priority:h.AWTEventPriority.High}),w==f.default.OCSDK&&(T={name:f.default.OCSDK,properties:s(s(s({},d.populateOCSDKBaseProperties()),C),{LogLevel:E.default.WARN}),priority:h.AWTEventPriority.High}),w==f.default.ACSCLIENT&&(T={name:f.default.ACSCLIENT,properties:s(s(s({},d.populateACSClientBaseProperties()),C),{LogLevel:E.default.WARN}),priority:h.AWTEventPriority.High}),w==f.default.ACSADAPTER&&(T={name:f.default.ACSADAPTER,properties:s(s(s({},d.populateACSAdapterBaseProperties()),C),{LogLevel:E.default.WARN}),priority:h.AWTEventPriority.High}),this._debug&&console.log("[AriaTelemetry][warn] "+w),this._debug&&console.log(T),this._debug&&console.log(T.properties.Event),!d._disable&&(null===(g=d.logger)||void 0===g||g.logEvent(T))},d.error=function(C,w){var g;void 0===w&&(w=f.default.EVENTS);var T={name:f.default.EVENTS,properties:s(s(s(s(s({},d.populateBaseProperties()),d.fillWebPlatformData()),d.fillMobilePlatformData()),C),{LogLevel:E.default.ERROR}),priority:h.AWTEventPriority.High};w==f.default.IC3CLIENT&&(T={name:f.default.IC3CLIENT,properties:s(s(s({},d.populateIC3ClientBaseProperties()),C),{LogLevel:E.default.ERROR}),priority:h.AWTEventPriority.High}),w==f.default.OCSDK&&(T={name:f.default.OCSDK,properties:s(s(s({},d.populateOCSDKBaseProperties()),C),{LogLevel:E.default.ERROR}),priority:h.AWTEventPriority.High}),w==f.default.ACSCLIENT&&(T={name:f.default.ACSCLIENT,properties:s(s(s({},d.populateACSClientBaseProperties()),C),{LogLevel:E.default.ERROR}),priority:h.AWTEventPriority.High}),w==f.default.ACSADAPTER&&(T={name:f.default.ACSADAPTER,properties:s(s(s({},d.populateACSAdapterBaseProperties()),C),{LogLevel:E.default.ERROR}),priority:h.AWTEventPriority.High}),this._debug&&console.log("[AriaTelemetry][error] "+w),this._debug&&console.log(T),this._debug&&console.log(T.properties.Event),!d._disable&&(null===(g=d.logger)||void 0===g||g.logEvent(T))},d.log=function(C,w){var g;void 0===w&&(w=f.default.EVENTS);var T={name:f.default.EVENTS,properties:s(s(s(s(s({},d.populateBaseProperties()),d.fillWebPlatformData()),d.fillMobilePlatformData()),C),{LogLevel:E.default.LOG}),priority:h.AWTEventPriority.High};w==f.default.IC3CLIENT&&(T={name:f.default.IC3CLIENT,properties:s(s(s({},d.populateIC3ClientBaseProperties()),C),{LogLevel:E.default.LOG}),priority:h.AWTEventPriority.High}),w==f.default.OCSDK&&(T={name:f.default.OCSDK,properties:s(s(s({},d.populateOCSDKBaseProperties()),C),{LogLevel:E.default.LOG}),priority:h.AWTEventPriority.High}),w==f.default.ACSCLIENT&&(T={name:f.default.ACSCLIENT,properties:s(s(s({},d.populateACSClientBaseProperties()),C),{LogLevel:E.default.LOG}),priority:h.AWTEventPriority.High}),w==f.default.ACSADAPTER&&(T={name:f.default.ACSADAPTER,properties:s(s(s({},d.populateACSAdapterBaseProperties()),C),{LogLevel:E.default.LOG}),priority:h.AWTEventPriority.High}),this._debug&&console.log("[AriaTelemetry][log]"),this._debug&&console.log(T),this._debug&&console.log(T.properties.Event),!d._disable&&(null===(g=d.logger)||void 0===g||g.logEvent(T))},Object.defineProperty(d,"logger",{get:function(){return d._logger||(this._debug&&console.log("[AriaTelemetry][logger][initialize]"),d._logger=p.AWTLogManager.initialize(_.ariaTelemetryKey)),d._logger},enumerable:!1,configurable:!0}),d.populateBaseProperties=function(){var C={OCSDK:u(1528).i8,IC3Core:u(5233).i8,ACSChat:u(2861).i8,ACSCommon:u(6638).i8,AMSClient:u(5500).i8};return{OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",CallId:"",Domain:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:"",ChatSDKVersion:u(8464).i8,NPMPackagesInfo:JSON.stringify(C),CDNPackagesInfo:JSON.stringify(d._CDNPackagesInfo),PlatformDetails:""}},d.fillMobilePlatformData=function(){var C={},w={};if(!I.isReactNative())return C;try{var T=u(Object(function(){var R=new Error("Cannot find module 'react-native'");throw R.code="MODULE_NOT_FOUND",R}())).Platform;w.Renderer=b.ReactNative,C.DeviceInfo_OsVersion=T.Version,w.DeviceInfo_OsVersion=T.Version,"android"===T.OS.toLowerCase()?(C.DeviceInfo_OsName="Android",w.DeviceInfo_OsName="Android"):"ios"===T.OS.toLowerCase()?(C.DeviceInfo_OsName="iOS",w.DeviceInfo_OsName="iOS"):(C.DeviceInfo_OsName=""+T.OS,w.DeviceInfo_OsName=""+T.OS),this._debug&&console.log("[AriaTelemetry][fillMobilePlatformData]["+C.DeviceInfo_OsName+"]")}catch(M){this._debug&&console.log("[AriaTelemetry][fillMobilePlatformData][Web]")}return C.PlatformDetails=JSON.stringify(w),C},d.fillWebPlatformData=function(){var C={};if(!I.isBrowser())return C;try{C.Domain=window.location.origin||"",this._debug&&console.log("[AriaTelemetry][fillWebPlatformData]")}catch(w){this._debug&&console.log("[AriaTelemetry][fillWebPlatformData][Error]")}return C},d.populateIC3ClientBaseProperties=function(){return{OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",Event:"",Description:"",SubscriptionId:"",EndpointId:"",EndpointUrl:"",ErrorCode:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:"",IC3ClientVersion:v.ic3ClientVersion}},d.populateOCSDKBaseProperties=function(){return{OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",TransactionId:"",Event:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:"",OCSDKVersion:u(1528).i8}},d.populateACSClientBaseProperties=function(){return{OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",Event:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:"",ACSChatVersion:u(2861).i8}},d.populateACSAdapterBaseProperties=function(){return{OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",Event:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:"",ACSAdapterVersion:v.webChatACSAdapterVersion}},d._debug=!1,d._disable=!1,d}();m.default=c},9066:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.failEvent=m.completeEvent=m.startEvent=void 0,m.startEvent=function(u){return u+"Started"},m.completeEvent=function(u){return u+"Completed"},m.failEvent=function(u){return u+"Failed"}},7095:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=(()=>{return(s=u||(u={})).INFO="INFO",s.DEBUG="DEBUG",s.WARN="WARN",s.ERROR="ERROR",s.LOG="LOG",u;var s})();m.default=u},1247:function(K,m,u){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(f){for(var v,I=1,b=arguments.length;I<b;I++)for(var c in v=arguments[I])Object.prototype.hasOwnProperty.call(v,c)&&(f[c]=v[c]);return f}).apply(this,arguments)};Object.defineProperty(m,"__esModule",{value:!0});var _=u(3037),h=u(8485),p=u(9066),E=function(){function f(v){this.omnichannelConfig=v,this.telemetry=null,this.debug=!1,this.telemetryEvents=new Map,this.scenarioType=_.default.EVENTS}return f.prototype.setDebug=function(v){var I;this.debug=v,null===(I=this.telemetry)||void 0===I||I.setDebug(v)},f.prototype.setScenarioType=function(v){this.scenarioType=v},f.prototype.useTelemetry=function(v){this.debug&&console.log("[ScenarioMarker][useTelemetry]"),this.telemetry=v},f.prototype.startScenario=function(v,I){var b;if(void 0===I&&(I={}),this.debug&&console.log("[ScenarioMarker][startScenario]"),!this.telemetryEvents.has(v)){var c=new h.default;c.start(),this.telemetryEvents.set(v,c)}var d=s({Event:p.startEvent(v),OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId},I);null===(b=this.telemetry)||void 0===b||b.info(d,this.scenarioType)},f.prototype.failScenario=function(v,I){var b;if(void 0===I&&(I={}),this.debug&&console.log("[ScenarioMarker][failScenario]"),this.telemetryEvents.has(v)){var c=this.telemetryEvents.get(v);this.telemetryEvents.delete(v);var d=s({Event:p.failEvent(v),OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,ElapsedTimeInMilliseconds:c.stop()},I);null===(b=this.telemetry)||void 0===b||b.error(d,this.scenarioType)}else console.warn("'"+v+"' event has not started.")},f.prototype.completeScenario=function(v,I){var b;if(void 0===I&&(I={}),this.debug&&console.log("[ScenarioMarker][completeScenario]"),this.telemetryEvents.has(v)){var c=this.telemetryEvents.get(v);this.telemetryEvents.delete(v);var d=s({Event:p.completeEvent(v),OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,ElapsedTimeInMilliseconds:c.stop()},I);null===(b=this.telemetry)||void 0===b||b.info(d,this.scenarioType)}else console.warn("'"+v+"' event has not started.")},f}();m.default=E},3037:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=(()=>{return(s=u||(u={})).EVENTS="occhatsdk_events",s.IC3CLIENT="occhatsdk_ic3clientevents",s.OCSDK="occhatsdk_ocsdkevents",s.ACSCLIENT="occhatsdk_acsclientevents",s.ACSADAPTER="occhatsdk_acsadapterevents",s.UNDEFINED="undefined",u;var s})();m.default=u},8485:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=function(){function s(){}return s.prototype.start=function(){this.timeStart=(new Date).getTime()},s.prototype.stop=function(){return(new Date).getTime()-this.timeStart},s}();m.default=u},9600:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=(()=>{return(s=u||(u={})).ValidateOmnichannelConfig="ValidateOmnichannelConfig",s.ValidateSDKConfig="ValidateSDKConfig",s.InitializeChatSDK="InitializeChatSDK",s.StartChat="StartChat",s.EndChat="EndChat",s.GetLiveChatConfig="GetLiveChatConfig",s.GetAuthToken="GetAuthToken",s.GetPreChatSurvey="GetPreChatSurvey",s.GetChatToken="GetChatToken",s.GetConversationDetails="GetConversationDetails",s.GetCurrentLiveChatContext="GetCurrentLiveChatContext",s.GetMessages="GetMessages",s.SendMessages="SendMessages",s.SendTypingEvent="SendTypingEvent",s.OnAgentEndSession="OnAgentEndSession",s.OnNewMessage="OnNewMessage",s.OnTypingEvent="OnTypingEvent",s.UploadFileAttachment="UploadFileAttachment",s.DownloadFileAttachment="DownloadFileAttachment",s.EmailLiveChatTranscript="EmailLiveChatTranscript",s.GetLiveChatTranscript="GetLiveChatTranscript",s.CreateIC3Adapter="CreateChatAdapter",s.CreateACSAdapter="CreateACSAdapter",s.GetVoiceVideoCalling="GetVoiceVideoCalling",s.GetIC3Client="GetIC3Client",s.InitializeVoiceVideoCallingSDK="InitializeVoiceVideoCallingSDK",s.AcceptVoiceCall="AcceptVoiceCall",s.AcceptVideoCall="AcceptVideoCall",s.RejectCall="RejectCall",s.StopCall="StopCall",s.OnCallDisconnected="OnCallDisconnected",s.UpdateChatToken="UpdateChatToken",s.GetChatReconnectContext="GetChatReconnectContext",s.GetPostChatSurveyContext="GetPostChatSurveyContext",u;var s})();m.default=u},6345:function(K,m){"use strict";var u=this&&this.__awaiter||function(h,p,E,f){return new(E||(E=Promise))(function(I,b){function c(w){try{C(f.next(w))}catch(g){b(g)}}function d(w){try{C(f.throw(w))}catch(g){b(g)}}function C(w){w.done?I(w.value):function(I){return I instanceof E?I:new E(function(b){b(I)})}(w.value).then(c,d)}C((f=f.apply(h,p||[])).next())})},s=this&&this.__generator||function(h,p){var f,v,I,b,E={label:0,sent:function(){if(1&I[0])throw I[1];return I[1]},trys:[],ops:[]};return b={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(b[Symbol.iterator]=function(){return this}),b;function c(C){return function(w){return function(C){if(f)throw new TypeError("Generator is already executing.");for(;E;)try{if(f=1,v&&(I=2&C[0]?v.return:C[0]?v.throw||((I=v.return)&&I.call(v),0):v.next)&&!(I=I.call(v,C[1])).done)return I;switch(v=0,I&&(C=[2&C[0],I.value]),C[0]){case 0:case 1:I=C;break;case 4:return E.label++,{value:C[1],done:!1};case 5:E.label++,v=C[1],C=[0];continue;case 7:C=E.ops.pop(),E.trys.pop();continue;default:if(!(I=(I=E.trys).length>0&&I[I.length-1])&&(6===C[0]||2===C[0])){E=0;continue}if(3===C[0]&&(!I||C[1]>I[0]&&C[1]<I[3])){E.label=C[1];break}if(6===C[0]&&E.label<I[1]){E.label=I[1],I=C;break}if(I&&E.label<I[2]){E.label=I[2],E.ops.push(C);break}I[2]&&E.ops.pop(),E.trys.pop();continue}C=p.call(h,E)}catch(w){C=[6,w],v=0}finally{f=I=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([C,w])}}};Object.defineProperty(m,"__esModule",{value:!0}),m.loadScript=void 0;var _=function(h,p,E){return void 0===p&&(p=function(){}),void 0===E&&(E=function(){}),u(void 0,void 0,void 0,function(){return s(this,function(f){return[2,new Promise(function(v,I){return u(void 0,void 0,void 0,function(){var d;return s(this,function(C){switch(C.label){case 0:return Array.from(document.getElementsByTagName("script")).filter(function(w){return w.src==h}).length?[4,p()]:[3,2];case 1:return C.sent(),[2,v()];case 2:return(d=document.createElement("script")).setAttribute("src",h),d.setAttribute("type","text/javascript"),document.head.appendChild(d),d.addEventListener("load",function(){return u(void 0,void 0,void 0,function(){return s(this,function(w){switch(w.label){case 0:return[4,p()];case 1:return w.sent(),v(),[2]}})})}),d.addEventListener("error",function(){return u(void 0,void 0,void 0,function(){return s(this,function(w){switch(w.label){case 0:return[4,E()];case 1:return w.sent(),I(),[2]}})})}),[2]}})})})]})})};m.loadScript=_,m.default={loadScript:_}},9340:function(K,m,u){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(E){for(var f,v=1,I=arguments.length;v<I;v++)for(var b in f=arguments[v])Object.prototype.hasOwnProperty.call(f,b)&&(E[b]=f[b]);return E}).apply(this,arguments)};Object.defineProperty(m,"__esModule",{value:!0});var _=u(8191),h=u(3709);m.default=function(E,f){var v={};if(v.liveChatVersion=f.liveChatVersion||_.default.V1,f.debug&&console.log(E),f.liveChatVersion===_.default.V2){var c=E.content,d=E.metadata,C=E.sender,w=E.senderDisplayName,g=E.createdOn;if(v.id=E.id,v.messageid=void 0,v.clientmessageid=void 0,v.deliveryMode=void 0,v.properties={},v.content=c||"",v.properties.tags=d&&d.tags?d.tags:[],v.tags=d&&d.tags?d.tags.replace(/\"/g,"").split(",").filter(function(N){return N.length>0}):[],v.timestamp=g,v.messageType=h.MessageType.UserMessage,v.sender={id:C.communicationUserId,displayName:w,type:h.PersonType.Bot},d&&d.amsMetadata&&d.amsReferences)try{var T=JSON.parse(d.amsReferences),R=JSON.parse(d.amsMetadata)[0].fileName;v.fileMetadata={},v.fileMetadata.fileSharingProtocolType=0,v.fileMetadata.id=T[0],v.fileMetadata.name=R,v.fileMetadata.size=0,v.fileMetadata.type=R.split(".").pop(),v.fileMetadata.url=""}catch(N){}}else v.id=E.clientmessageid,v=s({},E);return v}},838:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var s=u(2235);m.default=function(h){return void 0===h&&(h=!1),s.default.setDebug(h),s.default}},1775:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.getACSAdapterCDNUrl=m.getIC3AdapterCDNUrl=m.getIC3ClientCDNUrl=void 0;var s=u(4151),_=function(E){return void 0===E&&(E=s.ic3ClientVersion),"https://comms.omnichannelengagementhub.com/release/"+E+"/Scripts/SDK/SDK.min.js"};m.getIC3ClientCDNUrl=_;var h=function(E){return void 0===E&&(E=s.webChatIC3AdapterVersion),"https://webchatic3.blob.core.windows.net/webchat-ic3adapter/"+E+"/botframework-webchat-adapter-ic3.production.min.js"};m.getIC3AdapterCDNUrl=h;var p=function(E){return void 0===E&&(E=s.webChatACSAdapterVersion),"https://unpkg.com/acs_webchat-chat-adapter@"+E+"/dist/chat-adapter.js"};m.getACSAdapterCDNUrl=p,m.default={getIC3ClientCDNUrl:_,getIC3AdapterCDNUrl:h,getACSAdapterCDNUrl:p}},8290:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.getLocaleIdFromString=m.getLocaleStringFromId=void 0;var u={1025:"ar-sa",1026:"bg-bg",1027:"ca-es",1029:"cs-cz",1030:"da-dk",1031:"de-de",1032:"el-gr",1033:"en-us",3082:"es-es",1061:"et-ee",1069:"eu-es",1035:"fi-fi",1036:"fr-fr",1110:"gl-es",1037:"he-il",1081:"hi-in",1050:"hr-hr",1038:"hu-hu",1057:"id-id",1040:"it-it",1041:"ja-jp",1087:"kk-kz",1042:"ko-kr",1063:"lt-lt",1062:"lv-lv",1086:"ms-my",1044:"nb-no",1043:"nl-nl",1045:"pl-pl",1046:"pt-br",2070:"pt-pt",1048:"ro-ro",1049:"ru-ru",1051:"sk-sk",1060:"sl-si",3098:"sr-cyrl-cs",2074:"sr-latn-cs",1053:"sv-se",1054:"th-th",1055:"tr-tr",1058:"uk-ua",1066:"vi-vn",2052:"zh-cn",3076:"zh-hk",1028:"zh-tw"};m.getLocaleStringFromId=function(s){var _=Object.keys(u).find(function(h){return h===s});return _?u[_]:""},m.getLocaleIdFromString=function(s){var _=Object.keys(u).find(function(h){return u[h]===s});return null!=_?_:""}},2811:function(K,m,u){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(b){for(var c,d=1,C=arguments.length;d<C;d++)for(var w in c=arguments[d])Object.prototype.hasOwnProperty.call(c,w)&&(b[w]=c[w]);return b}).apply(this,arguments)};Object.defineProperty(m,"__esModule",{value:!0}),m.createACSAdapterLogger=m.createACSClientLogger=m.createOCSDKLogger=m.createIC3ClientLogger=m.ACSAdapterLogger=m.ACSClientLogger=m.OCSDKLogger=m.IC3ClientLogger=void 0;var _=u(7095),h=u(3037),p=u(1247),E=function(){function b(c){this.omnichannelConfig=c,this.debug=!1,this.requestId="",this.chatId="",this.telemetry=null,this.debug=!1}return b.prototype.setDebug=function(c){this.debug=c},b.prototype.setRequestId=function(c){this.requestId=c},b.prototype.setChatId=function(c){this.chatId=c},b.prototype.useTelemetry=function(c){this.debug&&console.log("[IC3ClientLogger][useTelemetry]"),this.telemetry=c},b.prototype.logClientSdkTelemetryEvent=function(c,d){var C,w,g,T;this.debug&&console.log("[IC3ClientLogger][logClientSdkTelemetryEvent]["+c+"]"),this.debug&&console.log(d);var M={OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,RequestId:this.requestId,ChatId:this.chatId},R=s(s({},d),{ExceptionDetails:d.ExceptionDetails?JSON.stringify(d.ExceptionDetails):""});switch(c){case _.default.DEBUG:null===(C=this.telemetry)||void 0===C||C.debug(s(s({},M),R),h.default.IC3CLIENT);break;case _.default.WARN:null===(w=this.telemetry)||void 0===w||w.warn(s(s({},M),R),h.default.IC3CLIENT);break;case _.default.ERROR:null===(g=this.telemetry)||void 0===g||g.error(s(s({},M),R),h.default.IC3CLIENT);break;case _.default.INFO:default:null===(T=this.telemetry)||void 0===T||T.info(s(s({},M),R),h.default.IC3CLIENT)}},b}();m.IC3ClientLogger=E;var f=function(){function b(c){this.omnichannelConfig=c,this.debug=!1,this.requestId="",this.chatId="",this.telemetry=null,this.debug=!1}return b.prototype.setDebug=function(c){this.debug=c},b.prototype.setRequestId=function(c){this.requestId=c},b.prototype.setChatId=function(c){this.chatId=c},b.prototype.useTelemetry=function(c){this.debug&&console.log("[OCSDKLogger][useTelemetry]"),this.telemetry=c},b.prototype.logClientSdkTelemetryEvent=function(c,d){var C,w,g,T;this.debug&&console.log("[OCSDKLogger][logClientSdkTelemetryEvent]["+c+"]"),this.debug&&console.log(d);var M={OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,RequestId:this.requestId,ChatId:this.chatId},R=s(s({},d),{ExceptionDetails:d.ExceptionDetails?JSON.stringify(d.ExceptionDetails):""});switch(c){case _.default.DEBUG:null===(C=this.telemetry)||void 0===C||C.debug(s(s({},M),R),h.default.OCSDK);break;case _.default.WARN:null===(w=this.telemetry)||void 0===w||w.warn(s(s({},M),R),h.default.OCSDK);break;case _.default.ERROR:null===(g=this.telemetry)||void 0===g||g.error(s(s({},M),R),h.default.OCSDK);break;case _.default.INFO:default:null===(T=this.telemetry)||void 0===T||T.info(s(s({},M),R),h.default.OCSDK)}},b}();m.OCSDKLogger=f;var v=function(){function b(c){this.omnichannelConfig=c,this.debug=!1,this.requestId="",this.chatId="",this.telemetry=null,this.scenarioMarker=null,this.debug=!1,this.scenarioMarker=new p.default(c),this.scenarioMarker.setScenarioType(h.default.ACSCLIENT)}return b.prototype.setDebug=function(c){var d;this.debug=c,null===(d=this.scenarioMarker)||void 0===d||d.setDebug(c)},b.prototype.setRequestId=function(c){this.requestId=c},b.prototype.setChatId=function(c){this.chatId=c},b.prototype.useTelemetry=function(c){var d;this.debug&&console.log("[ACSClientLogger][useTelemetry]"),this.telemetry=c,null===(d=this.scenarioMarker)||void 0===d||d.useTelemetry(this.telemetry)},b.prototype.logClientSdkTelemetryEvent=function(c,d){var C,w,g,T;this.debug&&console.log("[ACSClientLogger][logClientSdkTelemetryEvent]["+c+"]"),this.debug&&console.log(d);var M={OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,RequestId:this.requestId,ChatId:this.chatId},R=s(s({},d),{ExceptionDetails:d.ExceptionDetails?JSON.stringify(d.ExceptionDetails):""});switch(c){case _.default.DEBUG:null===(C=this.telemetry)||void 0===C||C.debug(s(s({},M),R),h.default.ACSCLIENT);break;case _.default.WARN:null===(w=this.telemetry)||void 0===w||w.warn(s(s({},M),R),h.default.ACSCLIENT);break;case _.default.ERROR:null===(g=this.telemetry)||void 0===g||g.error(s(s({},M),R),h.default.ACSCLIENT);break;case _.default.INFO:default:null===(T=this.telemetry)||void 0===T||T.info(s(s({},M),R),h.default.ACSCLIENT)}},b.prototype.startScenario=function(c,d){var C;void 0===d&&(d={}),null===(C=this.scenarioMarker)||void 0===C||C.startScenario(c,s(s({},{RequestId:this.requestId,ChatId:this.chatId}),d))},b.prototype.failScenario=function(c,d){var C;void 0===d&&(d={}),null===(C=this.scenarioMarker)||void 0===C||C.failScenario(c,s(s({},{RequestId:this.requestId,ChatId:this.chatId}),d))},b.prototype.completeScenario=function(c,d){var C;void 0===d&&(d={}),null===(C=this.scenarioMarker)||void 0===C||C.completeScenario(c,s(s({},{RequestId:this.requestId,ChatId:this.chatId}),d))},b}();m.ACSClientLogger=v;var I=function(){function b(c){this.omnichannelConfig=c,this.debug=!1,this.requestId="",this.chatId="",this.telemetry=null,this.scenarioMarker=null,this.debug=!1,this.scenarioMarker=new p.default(c),this.scenarioMarker.setScenarioType(h.default.ACSADAPTER)}return b.prototype.setDebug=function(c){var d;this.debug=c,null===(d=this.scenarioMarker)||void 0===d||d.setDebug(c)},b.prototype.setRequestId=function(c){this.requestId=c},b.prototype.setChatId=function(c){this.chatId=c},b.prototype.useTelemetry=function(c){var d;this.debug&&console.log("[ACSAdapterLogger][useTelemetry]"),this.telemetry=c,null===(d=this.scenarioMarker)||void 0===d||d.useTelemetry(this.telemetry)},b.prototype.logClientSdkTelemetryEvent=function(c,d){var C,w,g,T;this.debug&&console.log("[ACSAdapterLogger][logClientSdkTelemetryEvent]["+c+"]"),this.debug&&console.log(d);var M={OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,RequestId:this.requestId,ChatId:this.chatId},R=s(s({},d),{ExceptionDetails:d.ExceptionDetails?JSON.stringify(d.ExceptionDetails):""});switch(c){case _.default.DEBUG:null===(C=this.telemetry)||void 0===C||C.debug(s(s({},M),R),h.default.ACSADAPTER);break;case _.default.WARN:null===(w=this.telemetry)||void 0===w||w.warn(s(s({},M),R),h.default.ACSADAPTER);break;case _.default.ERROR:null===(g=this.telemetry)||void 0===g||g.error(s(s({},M),R),h.default.ACSADAPTER);break;case _.default.INFO:default:null===(T=this.telemetry)||void 0===T||T.info(s(s({},M),R),h.default.ACSADAPTER)}},b.prototype.startScenario=function(c,d){var C;void 0===d&&(d={}),null===(C=this.scenarioMarker)||void 0===C||C.startScenario(c,s(s({},{RequestId:this.requestId,ChatId:this.chatId}),d))},b.prototype.failScenario=function(c,d){var C;void 0===d&&(d={}),null===(C=this.scenarioMarker)||void 0===C||C.failScenario(c,s(s({},{RequestId:this.requestId,ChatId:this.chatId}),d))},b.prototype.completeScenario=function(c,d){var C;void 0===d&&(d={}),null===(C=this.scenarioMarker)||void 0===C||C.completeScenario(c,s(s({},{RequestId:this.requestId,ChatId:this.chatId}),d))},b}();m.ACSAdapterLogger=I,m.createIC3ClientLogger=function(b,c){void 0===c&&(c=!1);var d=new E(b);return d.setDebug(c),d},m.createOCSDKLogger=function(b,c){void 0===c&&(c=!1);var d=new f(b);return d.setDebug(c),d},m.createACSClientLogger=function(b,c){void 0===c&&(c=!1);var d=new v(b);return d.setDebug(c),d},m.createACSAdapterLogger=function(b,c){void 0===c&&(c=!1);var d=new I(b);return d.setDebug(c),d}},8098:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.isReactNative=m.isNode=m.isBrowser=void 0,m.isBrowser=function(){return"undefined"!=typeof window&&void 0!==window.document},m.isNode=function(){return"undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node},m.isReactNative=function(){return"undefined"!=typeof navigator&&"ReactNative"==navigator.product},m.default={isBrowser:m.isBrowser,isNode:m.isNode,isReactNative:m.isReactNative}},9425:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.isCustomerMessage=m.isSystemMessage=void 0;var s=u(3372),_=u(8953);m.isSystemMessage=function(h){var E=h.properties,f=h.messageType===s.default.UserMessage&&E&&E.tags&&E.tags.includes("system"),v=h.tags&&h.tags.includes("system");return f||v||!1},m.isCustomerMessage=function(h){var p=h.sender;return p&&p.id&&p.id.includes("contacts/8:")||p&&p.displayName&&p.displayName===_.default.Customer||!1}},7616:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=["orgUrl","orgId","widgetId"];m.default=function(_){if(!_)throw new Error("OmnichannelConfiguration not found");for(var h=Object.keys(_),p=0,E=u;p<E.length;p++){var f=E[p];if(!h.includes(f))throw new Error("Missing '"+f+"' in OmnichannelConfiguration")}}},641:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.defaultChatSDKConfig=void 0;var _={dataMasking:{disable:!1,maskingCharacter:"#"},telemetry:{disable:!1,ariaTelemetryKey:u(4151).ariaTelemetryKey},persistentChat:{disable:!0,tokenUpdateTime:216e5},chatReconnect:{disable:!0}};m.defaultChatSDKConfig=_,m.default=function(f){f.dataMasking&&function(f){"boolean"!=typeof f.disable&&(f.disable=_.dataMasking.disable),("string"!=typeof f.maskingCharacter||1!==f.maskingCharacter.length)&&(f.maskingCharacter=_.dataMasking.maskingCharacter)}(f.dataMasking),f.persistentChat&&function(f){("number"!=typeof f.tokenUpdateTime||!f.tokenUpdateTime)&&(f.tokenUpdateTime=_.persistentChat.tokenUpdateTime)}(f.persistentChat)}},5145:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=function(){function s(){}return s.read="read",s}();m.default=u},3865:function(K,m,u){"use strict";var s=this&&this.__awaiter||function(w,g,T,M){return new(T||(T=Promise))(function(S,N){function P(F){try{A(M.next(F))}catch(q){N(q)}}function y(F){try{A(M.throw(F))}catch(q){N(q)}}function A(F){F.done?S(F.value):function(S){return S instanceof T?S:new T(function(N){N(S)})}(F.value).then(P,y)}A((M=M.apply(w,g||[])).next())})},_=this&&this.__generator||function(w,g){var M,R,S,N,T={label:0,sent:function(){if(1&S[0])throw S[1];return S[1]},trys:[],ops:[]};return N={next:P(0),throw:P(1),return:P(2)},"function"==typeof Symbol&&(N[Symbol.iterator]=function(){return this}),N;function P(A){return function(F){return function(A){if(M)throw new TypeError("Generator is already executing.");for(;T;)try{if(M=1,R&&(S=2&A[0]?R.return:A[0]?R.throw||((S=R.return)&&S.call(R),0):R.next)&&!(S=S.call(R,A[1])).done)return S;switch(R=0,S&&(A=[2&A[0],S.value]),A[0]){case 0:case 1:S=A;break;case 4:return T.label++,{value:A[1],done:!1};case 5:T.label++,R=A[1],A=[0];continue;case 7:A=T.ops.pop(),T.trys.pop();continue;default:if(!(S=(S=T.trys).length>0&&S[S.length-1])&&(6===A[0]||2===A[0])){T=0;continue}if(3===A[0]&&(!S||A[1]>S[0]&&A[1]<S[3])){T.label=A[1];break}if(6===A[0]&&T.label<S[1]){T.label=S[1],S=A;break}if(S&&T.label<S[2]){T.label=S[2],T.ops.push(A);break}S[2]&&T.ops.pop(),T.trys.pop();continue}A=g.call(w,T)}catch(F){A=[6,F],R=0}finally{M=S=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([A,F])}}};Object.defineProperty(m,"__esModule",{value:!0});var h=u(501),p=u(6849),E=u(5874),f=u(2915),v=u(1927),I=u(6648),b=u(5145),c=u(6355),d=u(8636),C=function(){function w(){}return w.getDocumentTypeFromContentType=function(g){return d.default.isDocumentTypeImage(g)?h.default.DocumentTypeImage:h.default.DocumentTypeFile},w.createNewDocument=function(g,T,M){return s(this,void 0,void 0,function(){var S,N,P,y,A;return _(this,function(F){return(A={})[g]=[b.default[b.default.read]],S={filename:T.name,permissions:A,type:w.getDocumentTypeFromContentType(T.type)},N=v.default.getAmsObjectsUrl(M.RegionGtms),(P=I.default.getDefaultAMSHeaders(M.SkypeToken))[p.default.ContentTypeHeader]=h.default.ContentTypeJson,y={data:JSON.stringify(S),headers:P,type:E.default.POST,url:N},[2,f.HttpClient.MakeRequest(y)]})})},w.uploadDocument=function(g,T,M){return s(this,void 0,void 0,function(){var R,S,N;return _(this,function(y){return console.log("AmsHelper.ts uploadDocument(): "+g+", "+T+", "+M),R=d.default.isDocumentTypeImage(T.type),S=v.default.getAmsObjectContentUrl(g,M.RegionGtms,R),N=I.default.getDefaultAMSHeaders(M.SkypeToken),[2,f.HttpClient.MakeRequest({data:T.data,headers:N,processData:!1,type:E.default.PUT,url:S})]})})},w.getFileStatus=function(g,T){var M=d.default.isImageType(g.type),R=v.default.getAmsStatusUrl(g.id,T.RegionGtms,M);return this.getViewStatus(R,T).then(function(S){return S.scan&&S.scan.status===h.default.Malware?c.default.Error:S.view_state===h.default.Ready?c.default.Success:S.scan&&S.scan.status===h.default.InProgress||S.view_state&&S.view_state!==h.default.Failed?c.default.InProgress:c.default.Error}).catch(function(){return Promise.reject({})})},w.downloadDocument=function(g,T){var M=this,R=d.default.isImageType(g.type),S=v.default.getAmsStatusUrl(g.id,T.RegionGtms,R);return new Promise(function(N){M.getViewUri(S,T).then(function(P){var y=new Headers;return y.append("Authorization","skype_token "+T.SkypeToken),y.append("X-MS-Client-Version",h.default.ClientVersion),R&&(y.append("accept",h.default.AMSAcceptHeaderValue),y.append("Accept-Encoding",h.default.AMSAcceptEncodingHeaderValue)),fetch(P,{headers:y,method:E.default.GET}).then(function(F){N(F.blob())}).catch(function(){return Promise.reject({})})})})},w.getViewUri=function(g,T){var M=this;return this.getViewStatus(g,T).then(function(R){return!R.view_location||R.view_state===h.default.Failed||R.scan&&R.scan.status===h.default.Malware?Promise.reject({}):R.view_state&&R.view_state!==h.default.Ready?M.getViewUri(g,T):R.content_state===h.default.Expired?Promise.reject({}):Promise.resolve(R.view_location)}).catch(function(){return Promise.reject("")})},w.getViewStatus=function(g,T){var M=this;return console.log("AmsHelper.ts getViewStatus(): "+g+", "+T),new Promise(function(R){setTimeout(R,h.default.DelayForAms)}).then(function(){var R=I.default.getDefaultAMSViewHeaders(T.SkypeToken);return f.HttpClient.MakeRequest({headers:R,type:E.default.GET,url:g}).then(function(N){return N.status_location&&!N.view_state?M.getViewStatus(N.status_location,T):Promise.resolve(N)}).catch(function(N){return Promise.reject(401===N.status||403===N.status?"unauthorized":{})})})},w}();m.default=C},501:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=function(){function s(){}return s.NewMessageEvent="NewMessage",s.MessageUpdateEvent="MessageUpdate",s.ThreadUpdateEvent="ThreadUpdate",s.ConversationUpdateEvent="ConversationUpdate",s.HttpLongPoll="HttpLongPoll",s.ContentTypeJson="application/json",s.ContentTypeTextPlain="text/plain;charset=UTF-8",s.ContentTypeForm="application/x-www-form-urlencoded",s.RedirectAs404="redirectAs404",s.NoCache="no-cache",s.User="user",s.Web="web",s.ClientInfoValue="os=Windows; osVer=10; proc=Win32; lcid=en-us; deviceType=1; country=IN; clientName=swc; clientVer=912/0.106.0.34//swc",s.TextPlainMimeType="text/plain",s.SwcName="SWC",s.Image="image",s.ClientVersion="937/0.123.0.9",s.DelayForAms=50,s.Reset_Flag="reset_ic3_needed",s.Malware="malware",s.Ready="ready",s.InProgress="in progress",s.Failed="failed",s.Expired="expired",s.ImageView="imgpsh_fullsize_anim",s.FileView="original",s.DocumentTypeImage="pish/image",s.DocumentTypeFile="sharing/file",s.ImageContent="imgpsh",s.FileContent="original",s.AMSAcceptHeaderValue="image/webp,image/ *,*/*;q=0.8",s.AMSAcceptEncodingHeaderValue="gzip, deflate, sdch, br",s.AMSAuthorizationSkypeTokenValue="skype_token ",s.stabilizePollMaxRetryCount=50,s.timeBetweenStabilizingPoll=1e3,s.retryCount=2,s.retry404Count=3,s.retryOtherCount=3,s.liveStateRetryCount=3,s.timeBetweenOperationRetry=1e3,s.heartBeatDuration=3e4,s.endpointRequestLog="Endpoint request",s.subscriptionRequestLog="Subscription request",s.setPropertiesRequestLog="Set message properties request",s.unsubscribeRequestLog="Unsubscribe from endpoint request",s.pollRequestLog="Polling",s.oldInitializer="Old initializer",s.newInitializer="New Initializer",s.skypeTokenAuthURL="/v1/skypetokenauth",s.skypeTokenConstantForData="skypetoken=",s}();m.default=u},1927:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var s=u(501),_=u(6849),h=u(909),p=function(){function E(){}return E.getV2EndpointUrl=function(f,v){return v.chatService+"/v2/users/ME/endpoints/"+f},E.getThreadUrl=function(f,v){return v.chatService+"/v1/threads/"+f+"?view=msnp24Equivalent"},E.getMessagesUrl=function(f,v){return v.chatService+"/v1/users/ME/conversations/"+f+"/messages"},E.getBotMessagesUrl=function(f,v){return v.chatService+"/v1/agents/"+f+"/invoke"},E.getAmsObjectsUrl=function(f){return h.default.sanitizeUrlWithBackSlash(f.ams)+"v1/objects"},E.getAmsObjectContentUrl=function(f,v,I){void 0===I&&(I=!1);var b=I?s.default.ImageContent:s.default.FileContent;return h.default.sanitizeUrlWithBackSlash(v.ams)+"v1/objects/"+f+"/content/"+b},E.getAmsObjectViewUrl=function(f,v,I){void 0===I&&(I=!1);var b=I?s.default.ImageView:s.default.FileView;return h.default.sanitizeUrlWithBackSlash(v.ams)+"v1/objects/"+f+"/views/"+b},E.getAmsStatusUrl=function(f,v,I){void 0===I&&(I=!1);var b=I?s.default.ImageView:s.default.FileView;return h.default.sanitizeUrlWithBackSlash(v.ams)+"v1/objects/"+f+"/views/"+b+"/status"},E.getV1EndpointUrl=function(f){return f.chatService+"/v1/users/ME/endpoints"},E.getV1DeleteEndpointUrl=function(f,v){return f.chatService+"/v1/users/ME/endpoints/"+v},E.getV1SubscriptionUrl=function(f){return f.chatService+"/v1/users/ME/endpoints/SELF/subscriptions"},E.getV1PollUrl=function(f,v){return f.chatService+"/v1/users/ME/endpoints/SELF/subscriptions/"+v+"/poll"},E.getV1SetPropertiesUrl=function(f){return f.chatService+"/v1/users/ME/endpoints/SELF/properties?name="+_.default.SetEndpointProperty},E}();m.default=p},8636:function(K,m,u){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(g){for(var T,M=1,R=arguments.length;M<R;M++)for(var S in T=arguments[M])Object.prototype.hasOwnProperty.call(T,S)&&(g[S]=T[S]);return g}).apply(this,arguments)};Object.defineProperty(m,"__esModule",{value:!0});var _=u(501),h=u(2900),p=u(4694),E=u(9306),f=u(448),v=u(3207),I=u(3372),b=u(4352),c=u(1927),d=u(7708),C=u(909),w=function(){function g(){}return g.createMessageData=function(T){var R=T.content,S=g.createBaseMessageData(T.contentType===f.default.Text?v.default.Text:v.default.RichTextHtml,T.contentType.toString(),R);return S.properties=this.getMessageProperties(T),C.default.isNullOrUndefined(T.sender.displayName)||(S.imdisplayname=T.sender.displayName),S},g.createBaseMessageData=function(T,M,R){return{"Has-Mentions":"false",clientmessageid:Date.now().toString(),composetime:(new Date).toISOString(),content:R,contenttype:M,messagetype:T}},g.getMessageProperties=function(T){var M={};if(M.deliveryMode=T.deliveryMode.toString(),T.tags){var R=[];T.tags.forEach(function(S){R.push(S)}),M.tags=R.join()}return M},g.createTypingStatusThreadMessageData=function(T,M){var R="";switch(T){case d.default.Typing:R=v.default.ControlTyping;break;case d.default.ClearTyping:R=v.default.ControlClearTyping}var S=g.createBaseMessageData(R,f.default.Text,"");return C.default.isNullOrUndefined(M)||(S=s(s({},M),S)),S},g.createBotMessageData=function(T,M){return JSON.stringify({conversation:{id:T},value:M})},g.createFileMessage=function(T,M,R){var S=v.default.Text,N=f.default.Text.toString().toLowerCase(),P=g.createBaseMessageData(S,N.toString(),"");return P.amsreferences=JSON.stringify([T.id]),P.properties=JSON.stringify(this.createFileMessageProperties(T,M,R)),C.default.isNullOrUndefined(R.sender.displayName)||(P.imdisplayname=R.sender.displayName),P},g.createFileMessageProperties=function(T,M,R){var S={};if(S.deliveryMode=R.deliveryMode.toString(),S.files=JSON.stringify([this.createFileProperty(T,M)]),S.importance="",S.subject="",R.tags){var N=[];R.tags.forEach(function(P){N.push(P)}),S.tags=N.join()}return S},g.createFileProperty=function(T,M){var R=!!g.isDocumentTypeImage(T.type);return{"@type":"http://schema.skype.com/File",type:T.type,itemid:"",baseUrl:"",providerData:"",version:2,id:T.id,title:T.name,state:"active",objectUrl:c.default.getAmsObjectViewUrl(T.id,M.RegionGtms,R),fileName:T.name,fileType:g.getNameAndExtension(T.name).extension,botFileProperties:{url:c.default.getAmsObjectViewUrl(T.id,M.RegionGtms,R)},fileInfo:{fileUrl:c.default.getAmsObjectContentUrl(T.id,M.RegionGtms,R),siteUrl:"",serverRelativeUrl:""},filePreview:{previewUrl:""}}},g.getNameAndExtension=function(T){var M=(T||"").split("."),R="",S="";return M.length>1?(S=M.pop().toLowerCase(),R=M.join(".")):(S="",R=M[0]),{name:R,extension:S}},g.createIRawMessage=function(T,M,R){var N,P,S={clientmessageid:T.clientmessageid,content:T.content,contentType:g.getMessageContentType(T),deliveryMode:C.default.isNullOrUndefined(T.properties)||T.properties.deliveryMode!==h.default.Bridged?h.default.Unbridged:h.default.Bridged,messageType:g.getMessageType(T),properties:T.properties,sender:{displayName:T.imdisplayname,id:T.from,type:g.getPersonType(T.from)},timestamp:new Date(Date.parse(T.originalarrivaltime))};(R&&(S.resourceType=R),C.default.isNullOrUndefined(T.properties)||C.default.isNullOrEmptyString(T.properties.tags))||(N=T.properties.tags.split(","),S.tags=N);if(!C.default.isNullOrUndefined(T.properties)&&!C.default.isNullOrEmptyString(T.properties.files)&&(P=JSON.parse(T.properties.files)).length>0){var y=P[0].id;C.default.isNullOrUndefined(y)&&T.amsreferences&&(y=T.amsreferences[0]);var A=g.getFileUrl(P[0],y,M);S.fileMetadata={fileSharingProtocolType:p.default.AmsBasedFileSharing,id:y,name:P[0].fileName,size:P[0].version,type:P[0].fileType,url:A}}return S},g.createIRawThread=function(T){return{id:T.id,members:T.members,messages:T.messages,properties:T.properties,rosterVersion:T.rosterVersion,type:T.type,version:T.version}},g.getConversationIdFromUrl=function(T){var M=T&&T.match(/\/(\d+:[^\/]*)[\/]?/);return M&&M[1]?M[1]:void 0},g.isSystemMessage=function(T){var M=!1;return C.default.isNullOrEmptyString(T.messagetype)||(M=g.getSystemMessageTypes().reduce(function(R,S){return R||0===T.messagetype.toLowerCase().indexOf(S.toLowerCase())},M)),M},g.getPersonType=function(T){var M=b.default.Unknown,R=T.split("/").pop();return 0===R.indexOf("28:")?M=b.default.Bot:0===R.indexOf("19:")&&(M=b.default.User),M},g.isImageType=function(T){switch(T.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"bmp":case"tiff":case"jfif":return!0;default:return!1}},g.getMessageType=function(T){var M;switch(T.messagetype){case I.default.Typing:M=I.default.Typing;break;case I.default.ClearTyping:M=I.default.ClearTyping;break;default:M=I.default.UserMessage}return M},g.getMessageContentType=function(T){var R=T.contenttype?T.contenttype:T.messagetype;return R===v.default.Text.toLowerCase()||R.indexOf(_.default.TextPlainMimeType)>=0?f.default.Text:f.default.RichText},g.getSystemMessageTypes=function(){return["ThreadActivity"]},g.getFileUrl=function(T,M,R){var N,S=T.fileInfo;if(S&&S.fileUrl)N=S.fileUrl;else if(M){var P=g.isImageType(T.fileType);N=c.default.getAmsObjectContentUrl(M,R.RegionGtms,P)}return N},g.isDocumentTypeImage=function(T){return-1!==T.indexOf(_.default.Image)},g.getDomainRegexp=function(){return new RegExp(/^(https?:.+?\.microsoft\.com)/i)},g.parseDomain=function(T){var M=T.match(g.getDomainRegexp());return M?M[1]:null},g.parseChatServiceHostUrl=function(T){return g.parseDomain(T)},g.shouldRetryOnFailure=function(T){return T!==E.default.Accepted&&T!==E.default.Created},g}();m.default=w},909:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var s=u(6849),_=function(){function h(){}return h.isNullOrEmptyString=function(p){return h.isNullOrUndefined(p)||""===p},h.isNullOrUndefinedOrEmptyArray=function(p){return h.isNullOrUndefined(p)||0===p.length},h.isNullOrUndefined=function(p){return null==p},h.isPrimitiveString=function(p){return"string"==typeof p},h.convertStringToBoolean=function(p){return!h.isNullOrUndefined(p)&&"true"===p.toLowerCase()},h.sanitizeUrlWithBackSlash=function(p){return p.endsWith("/")?p:p+"/"},h.getRegistrationTokenValue=function(p){var E=p.match(/registrationToken=(.+); expires=(\d+)/);return E&&E.length>=2?s.default.RegistrationTokenHeaderValue+E[1]:""},h.addQueryParametersToPath=function(p,E){var f=p;if(!h.isNullOrUndefined(E))for(var v in f.indexOf("?")>=0||(f+="?"),E)if(E.hasOwnProperty(v)){var I=v+"="+E[v];"?"!==f[f.length-1]&&(I="&"+I),f+=I}return f},h.getResponseHeader=function(p,E){var f;return h.isNullOrUndefined(p)||(f=p.headers[E]),f},h.timer=function(){var p=(new Date).getTime();return{get milliSecondsElapsed(){return(new Date).getTime()-p}}},h.concatArrays=function(p,E){!h.isNullOrUndefined(p)&&!h.isNullOrUndefined(E)&&E.forEach(function(f){p.push(f)})},h}();m.default=_},1288:function(K,m,u){"use strict";var s=this&&this.__awaiter||function(f,v,I,b){return new(I||(I=Promise))(function(d,C){function w(M){try{T(b.next(M))}catch(R){C(R)}}function g(M){try{T(b.throw(M))}catch(R){C(R)}}function T(M){M.done?d(M.value):function(d){return d instanceof I?d:new I(function(C){C(d)})}(M.value).then(w,g)}T((b=b.apply(f,v||[])).next())})},_=this&&this.__generator||function(f,v){var b,c,d,C,I={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return C={next:w(0),throw:w(1),return:w(2)},"function"==typeof Symbol&&(C[Symbol.iterator]=function(){return this}),C;function w(T){return function(M){return function(T){if(b)throw new TypeError("Generator is already executing.");for(;I;)try{if(b=1,c&&(d=2&T[0]?c.return:T[0]?c.throw||((d=c.return)&&d.call(c),0):c.next)&&!(d=d.call(c,T[1])).done)return d;switch(c=0,d&&(T=[2&T[0],d.value]),T[0]){case 0:case 1:d=T;break;case 4:return I.label++,{value:T[1],done:!1};case 5:I.label++,c=T[1],T=[0];continue;case 7:T=I.ops.pop(),I.trys.pop();continue;default:if(!(d=(d=I.trys).length>0&&d[d.length-1])&&(6===T[0]||2===T[0])){I=0;continue}if(3===T[0]&&(!d||T[1]>d[0]&&T[1]<d[3])){I.label=T[1];break}if(6===T[0]&&I.label<d[1]){I.label=d[1],d=T;break}if(d&&I.label<d[2]){I.label=d[2],I.ops.push(T);break}d[2]&&I.ops.pop(),I.trys.pop();continue}T=v.call(f,I)}catch(M){T=[6,M],c=0}finally{b=d=0}if(5&T[0])throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}([T,M])}}};Object.defineProperty(m,"__esModule",{value:!0});var h=u(2217),p=u(737),E=function(){function f(v){this.hostType=h.default.Page,this.id=(0,p.uuidv4)(),this.protocolType=v,this.newConversationMessageListeners={},this.threadUpdateListeners={},this.debug=!1}return f.prototype.setDebug=function(v){this.debug=v},f.prototype.joinConversation=function(v,I){var b=this;return this.onJoinConversation(v,I).then(function(c){return{disconnect:b.disconnectFromConversation.bind(b,c),downloadFile:b.downloadFile.bind(b,c),getFileStatus:b.getFileStatus.bind(b,c),getMembers:b.getMembers.bind(b,c),getMessages:b.getMessages.bind(b,c),id:c.id,indicateTypingStatus:b.indicateTypingStatus.bind(b,c),registerOnNewMessage:b.registerOnNewMessage.bind(b,c),registerOnThreadUpdate:b.registerOnThreadUpdate.bind(b,c),sendFileMessage:b.sendFileMessage.bind(b,c),sendMessage:b.sendMessage.bind(b,c),sendMessageToBot:b.sendMessageToBot.bind(b,c),uploadFile:b.uploadFile.bind(b,c),sendFileData:b.sendFileData.bind(b,c)}})},f.prototype.registerOnNewMessage=function(v,I){return s(this,void 0,void 0,function(){return _(this,function(b){return[2,Promise.resolve()]})})},f.prototype.registerOnThreadUpdate=function(v,I){return s(this,void 0,void 0,function(){return _(this,function(b){return[2,Promise.resolve()]})})},f.prototype.uploadFile=function(v,I,b){return Promise.resolve()},f.prototype.downloadFile=function(v,I){return this.debug&&console.debug("IC3Core/ClientBridge/downloadFile"),this.downloadFileData(v,I).then(function(b){if(b&&b.size)return b;var d=new Blob([new Uint8Array(b)]);return!d||0===d.size&&""===d.type?b:d})},f}();m.default=E},2518:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var s=u(333),_=u(2217),h=function(){function p(){}return p.getClientBridge=function(E){switch(E.hostType){case _.default.IFrame:throw new Error("Framed bridge not implemented for "+E.hostType+" in IC3Core");case _.default.Page:return new s.default(E.protocolType);default:throw new Error("Client bridge not implemented for "+E.hostType+" in IC3Core")}},p}();m.default=h},333:function(K,m,u){"use strict";var I,s=this&&this.__extends||(I=function(b,c){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,C){d.__proto__=C}||function(d,C){for(var w in C)Object.prototype.hasOwnProperty.call(C,w)&&(d[w]=C[w])})(b,c)},function(b,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}I(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}),_=this&&this.__awaiter||function(I,b,c,d){return new(c||(c=Promise))(function(w,g){function T(S){try{R(d.next(S))}catch(N){g(N)}}function M(S){try{R(d.throw(S))}catch(N){g(N)}}function R(S){S.done?w(S.value):function(w){return w instanceof c?w:new c(function(g){g(w)})}(S.value).then(T,M)}R((d=d.apply(I,b||[])).next())})},h=this&&this.__generator||function(I,b){var d,C,w,g,c={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return g={next:T(0),throw:T(1),return:T(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function T(R){return function(S){return function(R){if(d)throw new TypeError("Generator is already executing.");for(;c;)try{if(d=1,C&&(w=2&R[0]?C.return:R[0]?C.throw||((w=C.return)&&w.call(C),0):C.next)&&!(w=w.call(C,R[1])).done)return w;switch(C=0,w&&(R=[2&R[0],w.value]),R[0]){case 0:case 1:w=R;break;case 4:return c.label++,{value:R[1],done:!1};case 5:c.label++,C=R[1],R=[0];continue;case 7:R=c.ops.pop(),c.trys.pop();continue;default:if(!(w=(w=c.trys).length>0&&w[w.length-1])&&(6===R[0]||2===R[0])){c=0;continue}if(3===R[0]&&(!w||R[1]>w[0]&&R[1]<w[3])){c.label=R[1];break}if(6===R[0]&&c.label<w[1]){c.label=w[1],w=R;break}if(w&&c.label<w[2]){c.label=w[2],c.ops.push(R);break}w[2]&&c.ops.pop(),c.trys.pop();continue}R=b.call(I,c)}catch(S){R=[6,S],C=0}finally{d=w=0}if(5&R[0])throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}([R,S])}}};Object.defineProperty(m,"__esModule",{value:!0});var p=u(1288),E=u(2217),f=u(9515),v=function(I){function b(c){var d=I.call(this,c)||this;return d.hostType=E.default.Page,d.protocolAdapter=new f.default("",d.hostType),d}return s(b,I),b.prototype.setup=function(c){return Promise.resolve()},b.prototype.update=function(c){return Promise.resolve()},b.prototype.onRegisterOnNewMessage=function(c){return Promise.resolve()},b.prototype.onRegisterOnThreadUpdate=function(c){return Promise.resolve()},b.prototype.initialize=function(c){return this.protocolAdapter.initialize(c)},b.prototype.dispose=function(){return this.protocolAdapter.dispose()},b.prototype.sendMessage=function(c,d){return this.protocolAdapter.sendMessage(c,d)},b.prototype.sendFileMessage=function(c,d,C){return this.protocolAdapter.sendFileMessage(c,d,C)},b.prototype.getMessages=function(c){return this.protocolAdapter.getMessages(c)},b.prototype.disconnectFromConversation=function(c){return this.protocolAdapter.disconnectFromConversation(c)},b.prototype.onJoinConversation=function(c,d){return this.protocolAdapter.joinConversation(c,d)},b.prototype.sendFileData=function(c,d,C){return this.protocolAdapter.sendFileData(c,d,C)},b.prototype.downloadFileData=function(c,d){return this.protocolAdapter.downloadFileData(c,d)},b.prototype.getFileStatus=function(c,d){return this.protocolAdapter.getFileStatus(c,d)},b.prototype.indicateTypingStatus=function(c,d,C){return this.protocolAdapter.indicateTypingStatus(c,d,C)},b.prototype.sendMessageToBot=function(c,d,C){return this.protocolAdapter.sendMessageToBot(c,d,C)},b.prototype.getMembers=function(c){return this.protocolAdapter.getMembers(c)},b.prototype.registerOnNewMessage=function(c,d){return _(this,void 0,void 0,function(){return h(this,function(C){return this.protocolAdapter.registerOnNewMessage(c,d),[2,Promise.resolve()]})})},b.prototype.registerOnThreadUpdate=function(c,d){return _(this,void 0,void 0,function(){return h(this,function(C){return this.protocolAdapter.registerOnThreadUpdate(c,d),[2,Promise.resolve()]})})},b.prototype.setDebug=function(c){void 0===c&&(c=!1),this.protocolAdapter.setDebug(c)},b}(p.default);m.default=v},1218:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var s=u(3865),_=u(501),h=u(4694),p=u(6355),E=u(2217),f=u(2915),v=u(5256),I=u(6849),b=u(5874),c=u(3671),d=u(752),C=u(448),w=u(3207),g=u(5655),T=u(6648),M=u(1927),R=u(8636),S=u(909),N=function(){function P(y){this.hostType=E.default.Page,this.protocolType=g.default.IC3V1SDK,this.id=y,this.conversations=[],this.newConversationMessageListeners={},this.threadUpdateListeners={},this.internalConversationsData={},this.liveStateFailureCount=0,this.debug=!1}return P.prototype.startPolling=function(){this.ic3Initializer&&this.ic3Initializer.startPolling()},P.prototype.stopPolling=function(){this.ic3Initializer&&this.ic3Initializer.stopPolling()},P.prototype.setup=function(y){return this.logger=y.logger,f.HttpClient.setLogger(this.logger),Promise.resolve()},P.prototype.initialize=function(y){return this.setupSession(y),Promise.resolve()},P.prototype.update=function(y){return Promise.resolve()},P.prototype.dispose=function(){return this.conversations=[],this.newConversationMessageListeners={},this.threadUpdateListeners={},this.internalConversationsData={},Promise.resolve()},P.prototype.joinConversation=function(y,A){var F;void 0===A&&(A=!0);var q=S.default.timer(),j={id:y};return-1===this.conversations.findIndex(function(ee){return ee.id===j.id})&&(this.conversations.push(j),this.newConversationMessageListeners[j.id]=this.newConversationMessageListeners[j.id]||[],this.threadUpdateListeners[j.id]=this.threadUpdateListeners[j.id]||[]),null===(F=this.logger)||void 0===F||F.log(d.default.INFO,c.default.JoinConversation,{ElapsedTimeInMilliseconds:q.milliSecondsElapsed,EndpointUrl:this.EndpointUrl,EndpointId:this.EndpointId}),!S.default.isNullOrUndefined(A)&&!0===A&&this.sendHeartBeat(j.id),Promise.resolve(j)},P.prototype.sendLiveState=function(y){var A=this;this.debug&&console.debug("IC3Core/sendLiveState");var j=R.default.createBaseMessageData(w.default.LiveState,C.default.Text,"");return this.sendMessageToIC3(y,j).then(function(){return A.liveStateFailureCount=0,Promise.resolve()}).catch(function(ue){var ee;A.liveStateFailureCount++,A.liveStateFailureCount>=_.default.liveStateRetryCount&&(null===(ee=A.logger)||void 0===ee||ee.log(d.default.ERROR,c.default.SendLiveStateFailure,{ExceptionDetails:ue,EndpointUrl:A.EndpointUrl,EndpointId:A.EndpointId}),A.stopHeartBeat(),A.liveStateFailureCount=0)})},P.prototype.sendHeartBeat=function(y){this.heartBeatTimer||(this.debug&&console.debug("IC3Core/sendHeartBeat"),this.sendLiveState(y),this.heartBeatTimer=window.setInterval(this.sendLiveState.bind(this,y),_.default.heartBeatDuration))},P.prototype.stopHeartBeat=function(){clearInterval(this.heartBeatTimer)},P.prototype.sendMessage=function(y,A){var F=R.default.createMessageData(A);return this.sendMessageToIC3(y.id,F)},P.prototype.getMessages=function(y){var A=this,F=T.default.getDefaultGetMessagesQueryParameters(),q=S.default.addQueryParametersToPath(M.default.getMessagesUrl(y.id,this.ic3Info.RegionGtms),F),j=T.default.getDefaultIC3Headers();return j[I.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,j[I.default.ContentTypeHeader]=_.default.ContentTypeJson,f.HttpClient.MakeRequest({enableExponentialBackoff:!0,headers:j,redirect404RetryCount:_.default.retryCount,retryCount:_.default.retryCount,shouldRedirectOn404:!1,shouldResetOnFailure:!1,shouldRetryOnFailure:R.default.shouldRetryOnFailure,timeBetweenRetry:_.default.timeBetweenOperationRetry,type:b.default.GET,url:q}).then(function(ee){for(var $=[],ie=0,ce=ee.messages;ie<ce.length;ie++){var Te=ce[ie];R.default.isSystemMessage(Te)||$.push(R.default.createIRawMessage(Te,A.ic3Info))}return A.getAllMessagesFromBackwardLinkUrl(ee._metadata.backwardLink,F.startTime,$)})},P.prototype.registerOnNewMessage=function(y,A){var F;return this.newConversationMessageListeners[y.id].push(A),null===(F=this.logger)||void 0===F||F.log(d.default.INFO,c.default.RegisterOnNewMessage,{EndpointUrl:this.EndpointUrl,EndpointId:this.EndpointId}),Promise.resolve()},P.prototype.registerOnThreadUpdate=function(y,A){var F;return this.threadUpdateListeners[y.id].push(A),null===(F=this.logger)||void 0===F||F.log(d.default.INFO,c.default.RegisterOnThreadUpdate,{EndpointUrl:this.EndpointUrl,EndpointId:this.EndpointId}),Promise.resolve()},P.prototype.disconnectFromConversation=function(y){return this.conversations.findIndex(function(A){return A.id===y.id}),delete this.internalConversationsData[y.id],this.ic3Info.visitor&&(this.stopHeartBeat(),this.stopPolling()),Promise.resolve()},P.prototype.sendFileData=function(y,A,F){var q=this;if(S.default.isNullOrUndefined(F)&&(F=h.default.AmsBasedFileSharing),A.size<=0)throw new Error("File size is lesser or equal to zero.");var j={fileSharingProtocolType:F,id:"",name:A.name,size:A.size,type:A.type,url:""};return new Promise(function(ue,ee){s.default.createNewDocument(y.id,A,q.ic3Info).then(function($){j.id=$.id;var ie=R.default.isDocumentTypeImage(A.type);j.url=M.default.getAmsObjectContentUrl($.id,q.ic3Info.RegionGtms,ie),s.default.uploadDocument($.id,A,q.ic3Info).then(function(){ue(j)}).catch(function(ce){ee(ce)})}).catch(function($){ee($)})})},P.prototype.sendFileMessage=function(y,A,F){return this.sendMessageToIC3(y.id,R.default.createFileMessage(A,this.ic3Info,F))},P.prototype.downloadFileData=function(y,A){var F=this;return this.debug&&console.debug("IC3Core/IC3ClientAdapter/downloadFileData"),new Promise(function(q,j){var ue=A.fileSharingProtocolType;S.default.isNullOrUndefined(ue)&&(ue=h.default.AmsBasedFileSharing),ue===h.default.AmsBasedFileSharing?s.default.downloadDocument(A,F.ic3Info).then(function(ee){q(ee)}).catch(function(ee){j(ee)}):j("This Protocol is not implemented")})},P.prototype.getFileStatus=function(y,A){var F=this;return new Promise(function(q,j){var ue=A.fileSharingProtocolType;S.default.isNullOrUndefined(ue)&&(ue=h.default.AmsBasedFileSharing),ue===h.default.AmsBasedFileSharing?s.default.getFileStatus(A,F.ic3Info).then(function(ee){q(ee)}).catch(function(ee){j(p.default.Error+" e")}):j("This Protocol is not implemented")})},P.prototype.indicateTypingStatus=function(y,A,F){var q=R.default.createTypingStatusThreadMessageData(A,F);return this.sendMessageToIC3(y.id,q)},P.prototype.sendMessageToBot=function(y,A,F){var q=R.default.createBotMessageData(y.id,F),j=M.default.getBotMessagesUrl(A,this.ic3Info.RegionGtms),ue=T.default.getDefaultIC3Headers();return ue[I.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,ue[I.default.ContentTypeHeader]=_.default.ContentTypeTextPlain,f.HttpClient.MakeRequest({data:q,dataType:v.default.TEXT,enableExponentialBackoff:!0,headers:ue,redirect404RetryCount:_.default.retryCount,retryCount:_.default.retryCount,shouldRedirectOn404:!1,shouldResetOnFailure:!1,shouldRetryOnFailure:R.default.shouldRetryOnFailure,timeBetweenRetry:_.default.timeBetweenOperationRetry,type:b.default.POST,url:j})},P.prototype.getMembers=function(y){var A=this.internalConversationsData[y.id].members,F=[];return S.default.isNullOrUndefinedOrEmptyArray(A)||A.forEach(function(q){var j={displayName:q.friendlyName,id:q.id,type:R.default.getPersonType(q.id)};F.push(j)}),Promise.resolve(F)},P.prototype.sendMessageToIC3=function(y,A){var F=M.default.getMessagesUrl(y,this.ic3Info.RegionGtms),q=T.default.getDefaultIC3Headers();q[I.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,q[I.default.ContentTypeHeader]=_.default.ContentTypeJson;var j={data:JSON.stringify(A),enableExponentialBackoff:!0,headers:q,redirect404RetryCount:_.default.retryCount,retryCount:_.default.retryCount,shouldRedirectOn404:!1,shouldResetOnFailure:!1,shouldRetryOnFailure:R.default.shouldRetryOnFailure,timeBetweenRetry:_.default.timeBetweenOperationRetry,type:b.default.POST,url:F};return f.HttpClient.MakeRequest(j)},P.prototype.onNewMessage=function(y,A,F){var j,q=this,ue=S.default.timer();try{y&&(S.default.isNullOrUndefined(this.newConversationMessageListeners[y.id])||R.default.isSystemMessage(A)||this.newConversationMessageListeners[y.id].forEach(function($){$(R.default.createIRawMessage(A,q.ic3Info,F))}))}catch($){return void(null===(j=this.logger)||void 0===j||j.log(d.default.ERROR,c.default.OnNewMessageFailure,{ExceptionDetails:$,ElapsedTimeInMilliseconds:ue.milliSecondsElapsed,EndpointUrl:this.EndpointUrl,EndpointId:this.EndpointId}))}},P.prototype.onThreadUpdate=function(y,A){var F,q=S.default.timer();try{y&&(S.default.isNullOrUndefined(this.threadUpdateListeners[y.id])||this.threadUpdateListeners[y.id].forEach(function(ue){ue(R.default.createIRawThread(A))}))}catch(ue){return void(null===(F=this.logger)||void 0===F||F.log(d.default.ERROR,c.default.OnThreadUpdateFailure,{ExceptionDetails:ue,ElapsedTimeInMilliseconds:q.milliSecondsElapsed,EndpointUrl:this.EndpointUrl,EndpointId:this.EndpointId}))}},P.prototype.getAllMessagesFromBackwardLinkUrl=function(y,A,F){var q=this;return S.default.isNullOrEmptyString(y)?Promise.resolve(F):this.getMessagesFromBackwardLinkUrl(y,A).then(function(j){for(var ue=0,ee=j.messages;ue<ee.length;ue++){var $=ee[ue];R.default.isSystemMessage($)||F.push(R.default.createIRawMessage($,q.ic3Info))}return q.getAllMessagesFromBackwardLinkUrl(j._metadata.backwardLink,A,F)})},P.prototype.getMessagesFromBackwardLinkUrl=function(y,A){var q=S.default.addQueryParametersToPath(y,{startTime:A}),j=T.default.getDefaultIC3Headers();return j[I.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,j[I.default.ContentTypeHeader]=_.default.ContentTypeJson,f.HttpClient.MakeRequest({enableExponentialBackoff:!0,headers:j,redirect404RetryCount:_.default.retryCount,retryCount:_.default.retryCount,shouldRedirectOn404:!1,shouldResetOnFailure:!1,shouldRetryOnFailure:R.default.shouldRetryOnFailure,timeBetweenRetry:_.default.timeBetweenOperationRetry,type:b.default.GET,url:q})},P.prototype.setupSession=function(y){this.ic3Info={SkypeToken:y.token,RegionGtms:y.regionGtms,visitor:y.visitor},S.default.isNullOrUndefined(this.ic3Info)||(this.EndpointId=this.ic3Info.endpointId,this.EndpointUrl=this.ic3Info.RegionGtms?this.ic3Info.RegionGtms.chatService:"")},P.prototype.setDebug=function(y){void 0===y&&(y=!1),this.debug=y},P}();m.default=N},9515:function(K,m,u){"use strict";var N,s=this&&this.__extends||(N=function(P,y){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,F){A.__proto__=F}||function(A,F){for(var q in F)Object.prototype.hasOwnProperty.call(F,q)&&(A[q]=F[q])})(P,y)},function(P,y){if("function"!=typeof y&&null!==y)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function A(){this.constructor=P}N(P,y),P.prototype=null===y?Object.create(y):(A.prototype=y.prototype,new A)}),_=this&&this.__awaiter||function(N,P,y,A){return new(y||(y=Promise))(function(q,j){function ue(ie){try{$(A.next(ie))}catch(ce){j(ce)}}function ee(ie){try{$(A.throw(ie))}catch(ce){j(ce)}}function $(ie){ie.done?q(ie.value):function(q){return q instanceof y?q:new y(function(j){j(q)})}(ie.value).then(ue,ee)}$((A=A.apply(N,P||[])).next())})},h=this&&this.__generator||function(N,P){var A,F,q,j,y={label:0,sent:function(){if(1&q[0])throw q[1];return q[1]},trys:[],ops:[]};return j={next:ue(0),throw:ue(1),return:ue(2)},"function"==typeof Symbol&&(j[Symbol.iterator]=function(){return this}),j;function ue($){return function(ie){return function($){if(A)throw new TypeError("Generator is already executing.");for(;y;)try{if(A=1,F&&(q=2&$[0]?F.return:$[0]?F.throw||((q=F.return)&&q.call(F),0):F.next)&&!(q=q.call(F,$[1])).done)return q;switch(F=0,q&&($=[2&$[0],q.value]),$[0]){case 0:case 1:q=$;break;case 4:return y.label++,{value:$[1],done:!1};case 5:y.label++,F=$[1],$=[0];continue;case 7:$=y.ops.pop(),y.trys.pop();continue;default:if(!(q=(q=y.trys).length>0&&q[q.length-1])&&(6===$[0]||2===$[0])){y=0;continue}if(3===$[0]&&(!q||$[1]>q[0]&&$[1]<q[3])){y.label=$[1];break}if(6===$[0]&&y.label<q[1]){y.label=q[1],q=$;break}if(q&&y.label<q[2]){y.label=q[2],y.ops.push($);break}q[2]&&y.ops.pop(),y.trys.pop();continue}$=P.call(N,y)}catch(ie){$=[6,ie],F=0}finally{A=q=0}if(5&$[0])throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}([$,ie])}}};Object.defineProperty(m,"__esModule",{value:!0});var p=u(501),E=u(6849),f=u(5874),v=u(1218),I=u(7037),b=u(3671),c=u(2915),d=u(752),C=u(5655),w=u(6648),g=u(5785),T=u(1927),M=u(8636),R=u(909),S=function(N){function P(y,A){var F=N.call(this,y)||this;return F.debug&&console.debug("IC3Core/Constructor"),F.protocolType=C.default.IC3V1SDK,F.hostType=A,F.ic3Initializer=new I.default,F}return s(P,N),P.prototype.startPolling=function(){N.prototype.startPolling.call(this)},P.prototype.stopPolling=function(){N.prototype.stopPolling.call(this)},P.prototype.setup=function(y){return N.prototype.setup.call(this,y)},P.prototype.initialize=function(y){var A=this;return N.prototype.initialize.call(this,y).then(function(){var q;return null===(q=A.ic3Initializer)||void 0===q?void 0:q.setup(A.logger).then(function(){return A.setSkypeTokenCookie()}).then(function(){var j;return null===(j=A.ic3Initializer)||void 0===j?void 0:j.setIc3Info(A.ic3Info)}).then(function(){var j;return null===(j=A.ic3Initializer)||void 0===j?void 0:j.initializeIC3(A.handlePollData.bind(A))}).then(function(j){A.ic3Info=j})})},P.prototype.update=function(y){var A=this;return N.prototype.update.call(this,y).then(function(){return A.updateToken({RegionGtms:y.regionGtms,SkypeToken:y.token,visitor:y.visitor})})},P.prototype.dispose=function(){var y;return _(this,void 0,void 0,function(){return h(this,function(A){return null===(y=this.ic3Initializer)||void 0===y||y.stopPolling(),this.heartBeatTimer&&clearInterval(this.heartBeatTimer),Promise.resolve(),[2]})})},P.prototype.joinConversation=function(y,A){var F=this,q=R.default.timer();return N.prototype.joinConversation.call(this,y,A).then(function(j){return F.getThreadRequest(j.id).then(function(ue){return F.internalConversationsData[j.id]={id:y,members:ue.members},j}).catch(function(ue){return F.logger&&F.logger.log(d.default.WARN,b.default.JoinConversationV1GetThreadRequestFailed,{Description:"Unable to retrieve thread: "+ue,ElapsedTimeInMilliseconds:q.milliSecondsElapsed,EndpointUrl:F.EndpointUrl,EndpointId:F.ic3Info.endpointId}),F.internalConversationsData[j.id]={id:y,members:[]},j})})},P.prototype.sendMessage=function(y,A){return N.prototype.sendMessage.call(this,y,A)},P.prototype.sendFileMessage=function(y,A,F){return N.prototype.sendFileMessage.call(this,y,A,F)},P.prototype.getMessages=function(y){return N.prototype.getMessages.call(this,y)},P.prototype.registerOnNewMessage=function(y,A){return N.prototype.registerOnNewMessage.call(this,y,A)},P.prototype.registerOnThreadUpdate=function(y,A){return N.prototype.registerOnThreadUpdate.call(this,y,A)},P.prototype.disconnectFromConversation=function(y){return N.prototype.disconnectFromConversation.call(this,y)},P.prototype.setSkypeTokenCookie=function(){var y=this.ic3Info.RegionGtms.ams.concat(p.default.skypeTokenAuthURL),A=w.default.getDefaultBaseIC3Headers();return A[E.default.ContentTypeHeader]=p.default.ContentTypeForm,c.HttpClient.MakeRequest({data:p.default.skypeTokenConstantForData+this.ic3Info.SkypeToken,enableExponentialBackoff:!0,useXHRWithCredentials:!0,headers:A,redirect404RetryCount:p.default.retryCount,retryCount:p.default.retryCount,shouldRedirectOn404:!1,shouldResetOnFailure:!1,shouldRetryOnFailure:M.default.shouldRetryOnFailure,timeBetweenRetry:p.default.timeBetweenOperationRetry,type:f.default.POST,url:y})},P.prototype.getThreadRequest=function(y){var A=T.default.getThreadUrl(y,this.ic3Info.RegionGtms),F=w.default.getDefaultBaseIC3Headers();return F[E.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,c.HttpClient.MakeRequest({enableExponentialBackoff:!0,headers:F,redirect404RetryCount:p.default.retryCount,retryCount:p.default.retryCount,shouldRedirectOn404:!0,shouldRetryOnFailure:M.default.shouldRetryOnFailure,timeBetweenRetry:p.default.timeBetweenOperationRetry,type:f.default.GET,url:A})},P.prototype.newMessageReceived=function(y,A,F){N.prototype.onNewMessage.call(this,y,A,F)},P.prototype.newThreadUpdate=function(y,A){N.prototype.onThreadUpdate.call(this,y,A)},P.prototype.handleNewMessageEvent=function(y){var A;A=y.resource&&y.resource.conversationid?y.resource.conversationid:M.default.getConversationIdFromUrl(y.resource.conversationLink?y.resource.conversationLink:y.resourceLink);var F=this.conversations.findIndex(function(j){return j.id===A});this.newMessageReceived(this.conversations[F],y.resource,y.resourceType)},P.prototype.handleConversationUpdateEvent=function(y){},P.prototype.handleThreadUpdate=function(y){if(y.resourceType===g.default.ThreadUpdate){var A;A=y.resource&&y.resource.id?y.resource.id:M.default.getConversationIdFromUrl(y.resource.messages?y.resource.messages:y.resourceLink);var F=this.conversations.findIndex(function(j){return j.id===A});this.newThreadUpdate(this.conversations[F],y.resource)}},P.prototype.handlePollData=function(y){if(y&&y.eventMessages)for(var A=0,F=y.eventMessages;A<F.length;A++)this.handlePollEventMessage(F[A])},P.prototype.handlePollEventMessage=function(y){y.resourceType===g.default.NewMessage||y.resourceType===g.default.MessageUpdate?this.handleNewMessageEvent(y):y.resourceType===g.default.ThreadUpdate?this.handleThreadUpdate(y):y.resourceType===g.default.ConversationUpdate&&this.handleConversationUpdateEvent(y)},P.prototype.updateToken=function(y){return _(this,void 0,void 0,function(){var A,F,q,j,ue,ee,$,ie,ce,Te,Y=this;return h(this,function(le){switch(le.label){case 0:return this.logger&&this.logger.log(d.default.INFO,b.default.UpdateToken,{EndpointUrl:this.EndpointUrl,EndpointId:this.ic3Info.endpointId}),A=[],F=function(Z){Z&&Z.eventMessages&&R.default.concatArrays(A,Z.eventMessages)},q=[],j=function(Z){Z&&Z.eventMessages&&R.default.concatArrays(q,Z.eventMessages)},ue=this.ic3Initializer,ee=new I.default,$=this.updateTokenClearTimeoutHandle,ie=this.ic3Info,ue.getPoller().onNewData=F,this.logger?[4,ee.setup(this.logger)]:[3,2];case 1:le.sent(),le.label=2;case 2:return[2,ee.setIc3Info(y).then(function(){return ee.initializeIC3(j)}).then(function(Z){ce=Z}).then(function(){return Y.getMatchingIC3EventIndex(A,q)}).then(function(Z){Te=Z}).then(function(){return ue.reset(!0)}).then(function(){return Y.syncPollingData(A,q,Te)}).then(function(){Y.ic3Info=ce,Y.ic3Initializer=ee,Y.ic3Initializer.getPoller().onNewData=Y.handlePollData.bind(Y)}).catch(function(Z){throw Y.updateTokenClearTimeoutHandle!==$&&(clearTimeout(Y.updateTokenClearTimeoutHandle),Y.updateTokenClearTimeoutHandle=$),Y.ic3Info=ie,Y.ic3Initializer.getPoller().onNewData=Y.handlePollData.bind(Y),Y.ic3Initializer.getPoller().start(),new Error("Update token failed: "+(Z&&Z.message))})]}})})},P.prototype.getMatchingIC3EventIndex=function(y,A,F){var q=this;return new Promise(function(j,ue){if((F=F||0)===p.default.stabilizePollMaxRetryCount)j({newPollIndex:-1,previousPollIndex:-1});else{for(var ee=0,$=0;ee<y.length&&$<A.length;){var ie=y[ee];if(ie.time===A[$].time)return void j({newPollIndex:$,previousPollIndex:ee});new Date(ie.time)<new Date(ie.time)?ee++:$++}setTimeout(function(){q.getMatchingIC3EventIndex(y,A,F+1).then(function(Te){j(Te)}).catch(function(Te){ue(Te)})},p.default.timeBetweenStabilizingPoll)}})},P.prototype.syncPollingData=function(y,A,F){this.logger&&this.logger.log(d.default.INFO,b.default.SyncingPollData,{EndpointUrl:this.EndpointUrl,EndpointId:this.ic3Info.endpointId});var q=F.previousPollIndex,j=F.newPollIndex+1;-1===F.previousPollIndex&&-1===F.newPollIndex&&(q=y.length-1,j=0);for(var ue=0;ue<=q;ue++)this.handlePollEventMessage(y[ue]);for(ue=j;ue<A.length;ue++)this.handlePollEventMessage(A[ue])},P}(v.default);m.default=S},7037:function(K,m,u){"use strict";var s=this&&this.__awaiter||function(S,N,P,y){return new(P||(P=Promise))(function(F,q){function j($){try{ee(y.next($))}catch(ie){q(ie)}}function ue($){try{ee(y.throw($))}catch(ie){q(ie)}}function ee($){$.done?F($.value):function(F){return F instanceof P?F:new P(function(q){q(F)})}($.value).then(j,ue)}ee((y=y.apply(S,N||[])).next())})},_=this&&this.__generator||function(S,N){var y,A,F,q,P={label:0,sent:function(){if(1&F[0])throw F[1];return F[1]},trys:[],ops:[]};return q={next:j(0),throw:j(1),return:j(2)},"function"==typeof Symbol&&(q[Symbol.iterator]=function(){return this}),q;function j(ee){return function($){return function(ee){if(y)throw new TypeError("Generator is already executing.");for(;P;)try{if(y=1,A&&(F=2&ee[0]?A.return:ee[0]?A.throw||((F=A.return)&&F.call(A),0):A.next)&&!(F=F.call(A,ee[1])).done)return F;switch(A=0,F&&(ee=[2&ee[0],F.value]),ee[0]){case 0:case 1:F=ee;break;case 4:return P.label++,{value:ee[1],done:!1};case 5:P.label++,A=ee[1],ee=[0];continue;case 7:ee=P.ops.pop(),P.trys.pop();continue;default:if(!(F=(F=P.trys).length>0&&F[F.length-1])&&(6===ee[0]||2===ee[0])){P=0;continue}if(3===ee[0]&&(!F||ee[1]>F[0]&&ee[1]<F[3])){P.label=ee[1];break}if(6===ee[0]&&P.label<F[1]){P.label=F[1],F=ee;break}if(F&&P.label<F[2]){P.label=F[2],P.ops.push(ee);break}F[2]&&P.ops.pop(),P.trys.pop();continue}ee=N.call(S,P)}catch($){ee=[6,$],A=0}finally{y=F=0}if(5&ee[0])throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}([ee,$])}}};Object.defineProperty(m,"__esModule",{value:!0});var h=u(501),p=u(6849),E=u(5850),f=u(8311),v=u(6648),I=u(1927),b=u(909),c=u(3805),d=u(752),C=u(3671),w=u(9306),g=u(8636),T=u(2915),M=u(5874),R=function(){function S(){this.debug=!1,this.current404RetryCount=0,this.currentOtherRetryCount=0,this.skipUnsubscribe=!1,this.telemetryMessage="",this.errorCode="",this.pollDataHandler=function(N){},this.resetRetryCount()}return S.prototype.setup=function(N){return s(this,void 0,void 0,function(){return _(this,function(P){return this.logger=N,[2]})})},S.prototype.getPoller=function(){var N=this.pollDataHandler.bind(this);return this.poller||(this.poller=new c.default(this.ic3Info,N,this.redirectErrorHandler.bind(this),this.onRequestCreationFailure.bind(this))),this.poller},S.prototype.setIc3Info=function(N){return s(this,void 0,void 0,function(){var P;return _(this,function(y){return P={RegionGtms:JSON.parse(JSON.stringify(N.RegionGtms)),SkypeToken:N.SkypeToken,visitor:N.visitor},this.ic3Info=P,[2]})})},S.prototype.initializeIC3=function(N){var y,P=this;return N&&(this.pollDataHandler=N),null===(y=this.logger)||void 0===y||y.log(d.default.INFO,C.default.IC3InitializationBegins,{Description:"Endpoint to poll is "+JSON.stringify(this.ic3Info.RegionGtms.chatService),EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.createEndpoint().then(function(){return P.createSubscription()}).then(function(){return P.setEndpointProperty()}).then(function(){return P.startPolling(N)}).then(function(){return P.resetRetryCount()}).then(function(){return Promise.resolve(P.ic3Info)}).catch(function(F){return P.redirectErrorHandler(F)})},S.prototype.startPolling=function(N){var P,y=!N&&this.pollDataHandler?this.pollDataHandler.bind(this):this.pollDataHandler;this.poller||(this.poller=new c.default(this.ic3Info,y,this.redirectErrorHandler.bind(this),this.onRequestCreationFailure.bind(this))),this.poller.ic3Info=this.ic3Info,null===(P=this.logger)||void 0===P||P.log(d.default.INFO,C.default.IC3StartedPolling,{EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.poller.start()},S.prototype.stopPolling=function(N){var P;null===(P=this.logger)||void 0===P||P.log(d.default.INFO,C.default.IC3StoppedPolling,{Description:(N?h.default.oldInitializer:h.default.newInitializer)+" stopped polling.",EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.poller&&this.poller.stop()},S.prototype.reset=function(N){return this.stopPolling(N),this.unsubscribeFromEndpoint()},S.prototype.resetRetryCount=function(){this.current404RetryCount=0,this.currentOtherRetryCount=0},S.prototype.onEndpointCreationFailure=function(N){this.onRequestCreationFailure(N,h.default.endpointRequestLog)},S.prototype.onEndpointCreationSuccess=function(N){var P,y,A=b.default.getResponseHeader(N,p.default.SetRegistrationTokenHeader);b.default.isNullOrUndefined(A)||(this.ic3Info.RegistrationToken=b.default.getRegistrationTokenValue(A));var F=b.default.getResponseHeader(N,p.default.LocationHeader);if(!b.default.isNullOrUndefined(F)){var q=F.match(/endpoints\/(%7B[\da-z\-]+%7D)/);this.ic3Info.endpointId=q&&q[1],null===(P=this.logger)||void 0===P||P.log(d.default.INFO,C.default.IC3EndpointCreationSuccess,{Description:"IC3 endpoint Id is "+this.ic3Info.endpointId,EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),N.status===w.default.Created&&g.default.parseChatServiceHostUrl(F)!==this.ic3Info.RegionGtms.chatService&&(this.ic3Info.RegionGtms.chatService=g.default.parseChatServiceHostUrl(F),null===(y=this.logger)||void 0===y||y.log(d.default.WARN,C.default.OnRequestCreationSuccessRedirect,{Description:"Endpoint changed",EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}))}},S.prototype.createEndpointRequest=function(){var N=I.default.getV1EndpointUrl(this.ic3Info.RegionGtms),P=v.default.getDefaultIC3Headers();P[p.default.AuthenticationHeader]=p.default.SkypeTokenHeaderValue+this.ic3Info.SkypeToken,P[p.default.ContentTypeHeader]=h.default.ContentTypeJson;var A={endpointFeatures:[f.default.Agent,f.default.InviteFree,f.default.MessageProperties].join(",")},F={callbackOnFailure:this.onEndpointCreationFailure.bind(this),callbackOnSuccess:this.onEndpointCreationSuccess.bind(this),data:JSON.stringify(A),enableExponentialBackoff:!0,headers:P,redirect404RetryCount:h.default.retryCount,retryCount:h.default.retryCount,shouldRedirectOn404:!0,shouldResetOnFailure:!0,shouldRetryOnFailure:g.default.shouldRetryOnFailure,timeBetweenRetry:h.default.timeBetweenOperationRetry,type:M.default.POST,url:N};return T.HttpClient.MakeRequest(F)},S.prototype.createEndpoint=function(){var N=this;return this.createEndpointRequest().then(function(P){return P.subscriptions&&P.subscriptions.length>0&&(N.ic3Info.subscriptionId=P.subscriptions[0].id),P})},S.prototype.onSubscriptionCreationFailure=function(N){this.onRequestCreationFailure(N,h.default.subscriptionRequestLog)},S.prototype.onSubscriptionCreationSuccess=function(N){var P,y=b.default.getResponseHeader(N,p.default.LocationHeader)||"";N.status===w.default.Created&&!b.default.isNullOrUndefined(y)&&g.default.parseChatServiceHostUrl(y)!==this.ic3Info.RegionGtms.chatService&&(this.ic3Info.RegionGtms.chatService=g.default.parseChatServiceHostUrl(y),null===(P=this.logger)||void 0===P||P.log(d.default.WARN,C.default.OnRequestCreationSuccessRedirect,{Description:"Endpoint changed",EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}));var A=y.match(/\/(\d+)$/);A&&(this.ic3Info.subscriptionId=A[1])},S.prototype.createSubscriptionRequest=function(){var N=I.default.getV1SubscriptionUrl(this.ic3Info.RegionGtms),P=v.default.getDefaultIC3Headers();P[p.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,P[p.default.ContentTypeHeader]=h.default.ContentTypeJson;var y={channelType:h.default.HttpLongPoll,interestedResources:[E.default.ConversationMessages,E.default.ConversationProperties,E.default.Threads,E.default.Contacts]},A={callbackOnFailure:this.onSubscriptionCreationFailure.bind(this),callbackOnSuccess:this.onSubscriptionCreationSuccess.bind(this),data:JSON.stringify(y),enableExponentialBackoff:!0,headers:P,redirect404RetryCount:h.default.retryCount,retryCount:h.default.retryCount,shouldRedirectOn404:!0,shouldResetOnFailure:!0,shouldRetryOnFailure:g.default.shouldRetryOnFailure,timeBetweenRetry:h.default.timeBetweenOperationRetry,type:M.default.POST,url:N};return T.HttpClient.MakeRequest(A)},S.prototype.createSubscription=function(){return this.createSubscriptionRequest()},S.prototype.onSetEndpointPropertyCreationFailure=function(N){this.onRequestCreationFailure(N,h.default.setPropertiesRequestLog)},S.prototype.setEndpointProperty=function(){if(this.ic3Info.visitor)return Promise.resolve();var N=I.default.getV1SetPropertiesUrl(this.ic3Info.RegionGtms),P={};P[p.default.SetEndpointProperty]=!0;var A=v.default.getDefaultIC3Headers();A[p.default.AuthenticationHeader]=p.default.SkypeTokenHeaderValue+this.ic3Info.SkypeToken,A[p.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,A[p.default.ContentTypeHeader]=h.default.ContentTypeJson;var F={callbackOnFailure:this.onSetEndpointPropertyCreationFailure.bind(this),data:JSON.stringify(P),enableExponentialBackoff:!0,headers:A,redirect404RetryCount:h.default.retryCount,retryCount:h.default.retryCount,shouldRedirectOn404:!0,shouldResetOnFailure:!0,shouldRetryOnFailure:g.default.shouldRetryOnFailure,timeBetweenRetry:h.default.timeBetweenOperationRetry,type:M.default.PUT,url:N};return T.HttpClient.MakeRequest(F)},S.prototype.onUnsubscribeCreationFailure=function(N){this.onRequestCreationFailure(N,h.default.unsubscribeRequestLog)},S.prototype.unsubscribeFromEndpoint=function(){if(this.ic3Info.visitor||b.default.isNullOrUndefined(this.ic3Info.endpointId)||this.skipUnsubscribe)return this.skipUnsubscribe=!0,Promise.resolve();var N=I.default.getV1DeleteEndpointUrl(this.ic3Info.RegionGtms,this.ic3Info.endpointId),P=v.default.getDefaultIC3Headers();P[p.default.AuthenticationHeader]=p.default.SkypeTokenHeaderValue+this.ic3Info.SkypeToken,P[p.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,P[p.default.ContentTypeHeader]=h.default.ContentTypeJson;var y={callbackOnFailure:this.onUnsubscribeCreationFailure.bind(this),enableExponentialBackoff:!0,headers:P,redirect404RetryCount:h.default.retryCount,retryCount:h.default.retryCount,shouldRedirectOn404:!0,shouldResetOnFailure:!0,shouldRetryOnFailure:g.default.shouldRetryOnFailure,timeBetweenRetry:h.default.timeBetweenOperationRetry,type:M.default.DELETE,url:N};return T.HttpClient.MakeRequest(y)},S.prototype.onRequestCreationFailure=function(N,P){var y,A,F=b.default.getResponseHeader(N,p.default.LocationHeader);this.telemetryMessage=P+" failed. Error Code: "+N.status+".",this.errorCode=N.status.toString(),this.skipUnsubscribe=!0,N.status!==w.default.Redirect||b.default.isNullOrEmptyString(F)?(null===(A=this.logger)||void 0===A||A.log(d.default.WARN,C.default.ResetOnRequestCreationFailure,{Description:this.telemetryMessage+" Trying to reset.",ErrorCode:N.status.toString(),EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.current404RetryCount=0,this.currentOtherRetryCount++):(null===(y=this.logger)||void 0===y||y.log(d.default.WARN,C.default.RedirectOnRequestCreationFailure,{Description:this.telemetryMessage+" Trying to redirect.",ErrorCode:N.status.toString(),EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.onRequestCreationFailureRedirect(N))},S.prototype.redirectErrorHandler=function(N){var y,P=this;return N.message===h.default.Reset_Flag&&this.current404RetryCount<=h.default.retry404Count&&this.currentOtherRetryCount<=h.default.retryCount?this.reset().then(function(){return P.initializeIC3()}):(null===(y=this.logger)||void 0===y||y.log(d.default.ERROR,C.default.MaxRetryCountReachedForRedirect,{Description:"Fatal Error. Initialization failed. Maximum retry count reached. Exiting. "+this.telemetryMessage,ErrorCode:this.errorCode,ExceptionDetails:N,EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.reset().then(function(){return Promise.reject(N.message)}))},S.prototype.onRequestCreationFailureRedirect=function(N){var P;this.current404RetryCount++,this.currentOtherRetryCount=0,this.ic3Info.RegionGtms.chatService=g.default.parseChatServiceHostUrl(b.default.getResponseHeader(N,p.default.LocationHeader)),null===(P=this.logger)||void 0===P||P.log(d.default.WARN,C.default.OnRequestCreationFailureRedirect,{Description:"Endpoint changed.",EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId})},S}();m.default=R},9202:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var s=u(2518),_=u(1356),h=function(){function p(){}return p.getSDK=function(E){return new Promise(function(f){var I=s.default.getClientBridge({hostType:E.hostType,protocolType:E.protocolType}),b={logger:new _.default(I,E.logger)};return I.setup(b).then(function(){var c={dispose:I.dispose.bind(I),id:I.id,initialize:I.initialize.bind(I),joinConversation:I.joinConversation.bind(I),update:I.update.bind(I),setDebug:I.setDebug.bind(I)};return f(c)})})},p}();m.default=h},2915:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.HttpClient=void 0;var s=u(909),_=u(501),h=u(3671),p=u(752),E=u(6849),f=u(9306),v=u(8686),I=function(){function b(){}return b.MakeRequest=function(c){return new Promise(function(C,w){var M=0,R=c.retryCount||1,S={url:c.url,method:c.type,data:c.data,timeout:c.timeout,headers:c.headers,withCredentials:c.useXHRWithCredentials||!1},N=function(){v.default.request(S).then(function(P){!function(P,y){if(y.status>=400){var A={ResponseText:y.statusText,Status:status};b.logWarning("Requesting "+c.url,y.status,A)}c.callbackOnSuccess&&c.callbackOnSuccess(y),C(P)}(P.data,P)}).catch(function(P){!function(P){var y,A,F,q,j,ue,ee,$,ie,ce,Te={ErrorThrown:P.message,ResponseText:null===(y=P.response)||void 0===y?void 0:y.statusText,Status:null===(A=P.response)||void 0===A?void 0:A.status},te=function(){var ne,Ce;b.logError("Request to "+c.url+" failed.",(null===(ne=P.response)||void 0===ne?void 0:ne.status)||0,Te),w(new Error((null===(Ce=P.response)||void 0===Ce?void 0:Ce.statusText)||""))},Y=function(){var ne;b.logError("Request to "+c.url+" failed. Resetting endpoint.",(null===(ne=P.response)||void 0===ne?void 0:ne.status)||0,Te),c.callbackOnFailure&&c.callbackOnFailure(P),w(new Error(_.default.Reset_Flag))},le=function(){var ne;M++;var Ce=c.timeBetweenRetry||0;(c.enableExponentialBackoff||(null===(ne=P.response)||void 0===ne?void 0:ne.status)===f.default.TooManyRequests)&&(Ce*=Math.exp(M)),setTimeout(function(){N()},Ce)},Z=null===(F=P.response)||void 0===F?void 0:F.headers[E.default.LocationHeader],z=null===(q=P.response)||void 0===q?void 0:q.headers[E.default.SetRegistrationTokenHeader];(null===(j=P.response)||void 0===j?void 0:j.status)!==f.default.Redirect||s.default.isNullOrEmptyString(Z)?(null===(ue=P.response)||void 0===ue?void 0:ue.status)!==f.default.Unauthorized&&(null===(ee=P.response)||void 0===ee?void 0:ee.status)!==f.default.Forbidden||s.default.isNullOrEmptyString(z)?M<=R&&c.shouldRetryOnFailure&&c.shouldRetryOnFailure((null===(ie=P.response)||void 0===ie?void 0:ie.status)||0)||(null===(ce=P.response)||void 0===ce?void 0:ce.status)===f.default.TooManyRequests?le():c.shouldResetOnFailure?Y():te():M<=R&&c.shouldRetryOnFailure&&c.shouldRetryOnFailure((null===($=P.response)||void 0===$?void 0:$.status)||0)?(c.headers&&(c.headers[E.default.RegistrationTokenHeader]=s.default.getRegistrationTokenValue(z)),le()):c.shouldResetOnFailure?Y():te():c.shouldRedirectOn404?Y():M<=R?(c.url=Z,le()):te()}(P)})};N()})},b.isClientError=function(c){if(!c)return!1;var d=c.message,C=!1;return s.default.isNullOrEmptyString(d)||(C=d.search(/Status- 40\d/)>=-1),C},b.setLogger=function(c){b.logger=c},b.logError=function(c,d,C){b.logger&&b.logger.log(p.default.ERROR,h.default.HTTPRequestFailed,{Description:c,ErrorCode:d.toString(),ExceptionDetails:C})},b.logWarning=function(c,d,C){b.logger&&b.logger.log(p.default.INFO,h.default.HTTPRequestUnusualResponse,{Description:c,ErrorCode:d.toString(),ExceptionDetails:C})},b}();m.HttpClient=I},9306:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=function(){function s(){}return s.OK=200,s.Created=201,s.Accepted=202,s.NoContent=204,s.Unauthorized=401,s.Forbidden=403,s.Redirect=404,s.TooManyRequests=429,s.InternalServerError=500,s.ServiceUnavailable=503,s.NotFound=729,s}();m.default=u},5256:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=function(){function s(){}return s.TEXT="text",s}();m.default=u},6849:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=function(){function s(){}return s.LocationHeader="location",s.SetRegistrationTokenHeader="set-registrationtoken",s.RegistrationTokenHeader="RegistrationToken",s.RegistrationTokenHeaderValue="registrationToken=",s.ContentTypeHeader="content-type",s.AuthenticationHeader="authentication",s.BehaviorOverrideHeader="behavioroverride",s.SkypeTokenHeaderValue="skypetoken=",s.SetEndpointProperty="supportsMessageProperties",s}();m.default=u},5874:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=(()=>{return(s=u||(u={})).GET="get",s.POST="post",s.PUT="put",s.DELETE="delete",u;var s})();m.default=u},6648:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var s=u(501),_=u(737),h=function(){function p(){}return p.getDefaultIC3Headers=function(){return{Accept:s.default.ContentTypeJson,BehaviorOverride:s.default.RedirectAs404,ClientInfo:s.default.ClientInfoValue,ContextId:"tcid="+(0,_.uuidv4)(),Expires:0,Pragma:s.default.NoCache,"x-ms-client-type":s.default.Web,"x-ms-user-type":s.default.User}},p.getDefaultBaseIC3Headers=function(){return{Accept:s.default.ContentTypeJson,BehaviorOverride:s.default.RedirectAs404,"content-type":s.default.ContentTypeJson}},p.getDefaultGetMessagesQueryParameters=function(){return{pageSize:20,startTime:0,view:"msnp24Equivalent|supportsMessageProperties"}},p.getDefaultAMSHeaders=function(E){return{Authorization:s.default.AMSAuthorizationSkypeTokenValue+E,"X-MS-Client-Version":s.default.ClientInfoValue}},p.getDefaultAMSViewHeaders=function(E){return{Accept:s.default.AMSAcceptHeaderValue,"Accept-Encoding":s.default.AMSAcceptEncodingHeaderValue,Authorization:s.default.AMSAuthorizationSkypeTokenValue+E,"X-MS-Client-Version":s.default.ClientInfoValue}},p}();m.default=h},6194:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.SDKProvider=void 0;var s=u(9202);m.SDKProvider=s.default},2217:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=function(){function s(){}return s.IFrame=0,s.Page=1,s}();m.default=u},5655:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=function(){function s(){}return s.IC3V1SDK=0,s.IC3V2SDK=1,s.MockIC3SDK=2,s}();m.default=u},3671:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=(()=>{return(s=u||(u={})).JoinConversation="JoinConversation",s.RegisterOnNewMessage="RegisterOnNewMessage",s.RegisterOnThreadUpdate="RegisterOnThreadUpdate",s.OnNewMessageFailure="OnNewMessageFailure",s.OnThreadUpdateFailure="OnThreadUpdateFailure",s.SendLiveStateFailure="SendLiveStateFailure",s.JoinConversationV1GetThreadRequestFailed="JoinConversationV1GetThreadRequestFailed",s.UpdateToken="UpdateToken",s.SyncingPollData="SyncingPollData",s.IC3InitializationBegins="IC3InitializationBegins",s.IC3StartedPolling="IC3StartedPolling",s.IC3StoppedPolling="IC3StoppedPolling",s.IC3EndpointCreationSuccess="IC3EndpointCreationSuccess",s.RedirectOnRequestCreationFailure="RedirectOnRequestCreationFailure",s.ResetOnRequestCreationFailure="ResetOnRequestCreationFailure",s.MaxRetryCountReachedForRedirect="MaxRetryCountReachedForRedirect",s.OnRequestCreationFailureRedirect="OnRequestCreationFailureRedirect",s.OnRequestCreationSuccessRedirect="OnRequestCreationSuccessRedirect",s.ErrorDuringPolling="ErrorDuringPolling",s.HTTPRequestFailed="HTTPRequestFailed",s.HTTPRequestUnusualResponse="HTTPRequestUnusualResponse",u;var s})();m.default=u},752:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=(()=>{return(s=u||(u={})).INFO="INFO",s.DEBUG="DEBUG",s.WARN="WARN",s.ERROR="ERROR",u;var s})();m.default=u},1356:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var s=u(909),_=u(8261),h=function(){function p(E,f){this.sdk=E,this.logger=f}return p.prototype.log=function(E,f,v){if(this.isLoggingEnabled()){var I=_.default.getTelemetryEventData(this.sdk,f,v);this.logEvent(E,I)}},p.prototype.logEvent=function(E,f){this.isLoggingEnabled()&&setTimeout(this.logger.logClientSdkTelemetryEvent.bind(this.logger),0,E,f)},p.prototype.isLoggingEnabled=function(){return!s.default.isNullOrUndefined(this.logger)},p}();m.default=h},8261:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=function(){function s(){}return s.getTelemetryEventData=function(_,h,p){return{Description:p.Description,ElapsedTimeInMilliseconds:p.ElapsedTimeInMilliseconds,EndpointUrl:p.EndpointUrl,EndpointId:p.EndpointId,ErrorCode:p.ErrorCode,Event:h,ExceptionDetails:p.ExceptionDetails,ShouldBubbleToHost:p.ShouldBubbleToHost,SubscriptionId:_.id}},s}();m.default=u},2900:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=function(){function s(){}return s.Bridged="bridged",s.Unbridged="unbridged",s}();m.default=u},4694:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=(()=>{return(s=u||(u={}))[s.AmsBasedFileSharing=0]="AmsBasedFileSharing",u;var s})();m.default=u},6355:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=(()=>{return(s=u||(u={}))[s.Unknown=0]="Unknown",s[s.InProgress=1]="InProgress",s[s.Success=2]="Success",s[s.Error=3]="Error",u;var s})();m.default=u},5850:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=function(){function s(){}return s.ConversationProperties="/v1/users/ME/conversations/ALL/properties",s.ConversationMessages="/v1/users/ME/conversations/ALL/messages",s.Threads="/v1/threads/ALL",s.Contacts="/v1/users/ME/contacts/ALL",s}();m.default=u},8311:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=function(){function s(){}return s.Agent="Agent",s.MessageProperties="MessageProperties",s.InviteFree="InviteFree",s}();m.default=u},448:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=function(){function s(){}return s.RichText="RichText",s.Text="Text",s}();m.default=u},3207:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=function(){function s(){}return s.Text="Text",s.RichText="RichText",s.RichTextHtml="RichText/Html",s.ControlTyping="Control/Typing",s.ControlClearTyping="Control/ClearTyping",s.LiveState="Control/LiveState",s}();m.default=u},3372:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=function(){function s(){}return s.UserMessage="UserMessage",s.SwiftCard="SwiftCard",s.Typing="Control/Typing",s.ClearTyping="Control/ClearTyping",s.LiveState="Control/LiveState",s}();m.default=u},4352:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=(()=>{return(s=u||(u={}))[s.Unknown=0]="Unknown",s[s.User=1]="User",s[s.Bot=2]="Bot",u;var s})();m.default=u},5785:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=function(){function s(){}return s.NewMessage="NewMessage",s.MessageUpdate="MessageUpdate",s.UserPresence="UserPresence",s.ConversationUpdate="ConversationUpdate",s.ThreadUpdate="ThreadUpdate",s}();m.default=u},7708:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var u=(()=>{return(s=u||(u={}))[s.Typing=0]="Typing",s[s.ClearTyping=1]="ClearTyping",u;var s})();m.default=u},3805:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var s=u(1927),_=u(2553),h=u(501),p=function(){function E(f,v,I,b){this.isPolling=!1,this._ic3Info=f,this._onNewData=v,this._onError=I,this.callbackOnFailure=b}return E.prototype.start=function(){return this.isPolling||(this.isPolling=!0,this.startPolling()),Promise.resolve()},E.prototype.stop=function(){return this.isPolling=!1,Promise.resolve()},Object.defineProperty(E.prototype,"onNewData",{get:function(){return this._onNewData},set:function(f){this._onNewData=f},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"onError",{get:function(){return this._onError},set:function(f){this._onError=f},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"setCallbackOnFailure",{set:function(f){this.setCallbackOnFailure=f},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"ic3Info",{get:function(){return this._ic3Info},set:function(f){this._ic3Info=f},enumerable:!1,configurable:!0}),E.prototype.startPolling=function(){var f=this;this.isPolling&&this.poll().then(function(v){f.isPolling&&f._onNewData&&f._onNewData(v)}).catch(function(v){f._onError&&f._onError(v)}).then(function(){f.startPolling()})},E.prototype.poll=function(){var f=s.default.getV1PollUrl(this._ic3Info.RegionGtms,this._ic3Info.subscriptionId);return _.default.poll(f,this._ic3Info.RegistrationToken,this.callbackOnEachRequestCompleted.bind(this))},E.prototype.callbackOnEachRequestCompleted=function(f){this.callbackOnFailure(f,h.default.pollRequestLog)},E}();m.default=p},2553:(K,m,u)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var s=u(501),_=u(2915),h=u(6849),p=u(5874),E=u(6648),f=u(8636),v=function(){function I(){}return I.poll=function(b,c,d){var C=E.default.getDefaultIC3Headers();C[h.default.RegistrationTokenHeader]=c,C[h.default.ContentTypeHeader]=s.default.ContentTypeJson;var w=JSON.stringify({});return _.HttpClient.MakeRequest({callbackOnFailure:d,data:w,enableExponentialBackoff:!0,headers:C,redirect404RetryCount:s.default.retryCount,retryCount:s.default.retryCount,shouldRedirectOn404:!0,shouldResetOnFailure:!0,shouldRetryOnFailure:f.default.shouldRetryOnFailure,timeBetweenRetry:s.default.timeBetweenOperationRetry,type:p.default.POST,url:b})},I}();m.default=v},737:(K,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.uuidv4=void 0,m.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){var _=16*Math.random()|0;return("x"===s?_:3&_|8).toString(16)})}},8853:(K,m,u)=>{"use strict";u.d(m,{Rr:()=>we,Do:()=>xt,g4:()=>pr});var s="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:{},_="1.0.4",h=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,E=function(he){var Ve=new Set([he]),Ee=new Set,tt=he.match(h);if(!tt)return function(){return!1};var gt_major=+tt[1],gt_minor=+tt[2],gt_patch=+tt[3];if(null!=tt[4])return function(an){return an===he};function dt(vn){return Ee.add(vn),!1}function Ze(vn){return Ve.add(vn),!0}return function(an){if(Ve.has(an))return!0;if(Ee.has(an))return!1;var cn=an.match(h);if(!cn)return dt(an);var Bn_minor=+cn[2],Bn_patch=+cn[3];return null!=cn[4]||gt_major!==+cn[1]?dt(an):0===gt_major?gt_minor===Bn_minor&&gt_patch<=Bn_patch?Ze(an):dt(an):gt_minor<=Bn_minor?Ze(an):dt(an)}}(_),f=_.split(".")[0],v=Symbol.for("opentelemetry.js.api."+f),I=s;function b(he,Ve,Ee,tt){var gt;void 0===tt&&(tt=!1);var dt=I[v]=null!==(gt=I[v])&&void 0!==gt?gt:{version:_};if(!tt&&dt[he]){var Ze=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+he);return Ee.error(Ze.stack||Ze.message),!1}return dt.version!==_?(Ze=new Error("@opentelemetry/api: All API registration versions must match"),Ee.error(Ze.stack||Ze.message),!1):(dt[he]=Ve,Ee.debug("@opentelemetry/api: Registered a global for "+he+" v"+_+"."),!0)}function c(he){var Ve,Ee,tt=null===(Ve=I[v])||void 0===Ve?void 0:Ve.version;if(tt&&E(tt))return null===(Ee=I[v])||void 0===Ee?void 0:Ee[he]}function d(he,Ve){Ve.debug("@opentelemetry/api: Unregistering a global for "+he+" v"+_+".");var Ee=I[v];Ee&&delete Ee[he]}var C=function(){function he(Ve){this._namespace=Ve.namespace||"DiagComponentLogger"}return he.prototype.debug=function(){for(var Ve=[],Ee=0;Ee<arguments.length;Ee++)Ve[Ee]=arguments[Ee];return w("debug",this._namespace,Ve)},he.prototype.error=function(){for(var Ve=[],Ee=0;Ee<arguments.length;Ee++)Ve[Ee]=arguments[Ee];return w("error",this._namespace,Ve)},he.prototype.info=function(){for(var Ve=[],Ee=0;Ee<arguments.length;Ee++)Ve[Ee]=arguments[Ee];return w("info",this._namespace,Ve)},he.prototype.warn=function(){for(var Ve=[],Ee=0;Ee<arguments.length;Ee++)Ve[Ee]=arguments[Ee];return w("warn",this._namespace,Ve)},he.prototype.verbose=function(){for(var Ve=[],Ee=0;Ee<arguments.length;Ee++)Ve[Ee]=arguments[Ee];return w("verbose",this._namespace,Ve)},he}();function w(he,Ve,Ee){var tt=c("diag");if(tt)return Ee.unshift(Ve),tt[he].apply(tt,Ee)}var g=(()=>{return(he=g||(g={}))[he.NONE=0]="NONE",he[he.ERROR=30]="ERROR",he[he.WARN=50]="WARN",he[he.INFO=60]="INFO",he[he.DEBUG=70]="DEBUG",he[he.VERBOSE=80]="VERBOSE",he[he.ALL=9999]="ALL",g;var he})(),R=function(){function he(){function Ve(tt){return function(){for(var gt=[],dt=0;dt<arguments.length;dt++)gt[dt]=arguments[dt];var Ze=c("diag");if(Ze)return Ze[tt].apply(Ze,gt)}}var Ee=this;Ee.setLogger=function(tt,gt){var dt,Ze;if(void 0===gt&&(gt=g.INFO),tt===Ee){var vn=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return Ee.error(null!==(dt=vn.stack)&&void 0!==dt?dt:vn.message),!1}var an=c("diag"),cn=function(he,Ve){function Ee(tt,gt){var dt=Ve[tt];return"function"==typeof dt&&he>=gt?dt.bind(Ve):function(){}}return he<g.NONE?he=g.NONE:he>g.ALL&&(he=g.ALL),Ve=Ve||{},{error:Ee("error",g.ERROR),warn:Ee("warn",g.WARN),info:Ee("info",g.INFO),debug:Ee("debug",g.DEBUG),verbose:Ee("verbose",g.VERBOSE)}}(gt,tt);if(an){var Bn=null!==(Ze=(new Error).stack)&&void 0!==Ze?Ze:"<failed to generate stacktrace>";an.warn("Current logger will be overwritten from "+Bn),cn.warn("Current logger will overwrite one already registered from "+Bn)}return b("diag",cn,Ee,!0)},Ee.disable=function(){d("diag",Ee)},Ee.createComponentLogger=function(tt){return new C(tt)},Ee.verbose=Ve("verbose"),Ee.debug=Ve("debug"),Ee.info=Ve("info"),Ee.warn=Ve("warn"),Ee.error=Ve("error")}return he.instance=function(){return this._instance||(this._instance=new he),this._instance},he}(),S=function(){function he(Ve){this._entries=Ve?new Map(Ve):new Map}return he.prototype.getEntry=function(Ve){var Ee=this._entries.get(Ve);if(Ee)return Object.assign({},Ee)},he.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(Ve){return[Ve[0],Ve[1]]})},he.prototype.setEntry=function(Ve,Ee){var tt=new he(this._entries);return tt._entries.set(Ve,Ee),tt},he.prototype.removeEntry=function(Ve){var Ee=new he(this._entries);return Ee._entries.delete(Ve),Ee},he.prototype.removeEntries=function(){for(var Ve=[],Ee=0;Ee<arguments.length;Ee++)Ve[Ee]=arguments[Ee];for(var tt=new he(this._entries),gt=0,dt=Ve;gt<dt.length;gt++){var Ze=dt[gt];tt._entries.delete(Ze)}return tt},he.prototype.clear=function(){return new he},he}();function y(he){return void 0===he&&(he={}),new S(new Map(Object.entries(he)))}Symbol("BaggageEntryMetadata"),R.instance();var j={get:function(he,Ve){if(null!=he)return he[Ve]},keys:function(he){return null==he?[]:Object.keys(he)}},ue={set:function(he,Ve,Ee){null!=he&&(he[Ve]=Ee)}};function ee(he){return Symbol.for(he)}var ie=new function he(Ve){var Ee=this;Ee._currentContext=Ve?new Map(Ve):new Map,Ee.getValue=function(tt){return Ee._currentContext.get(tt)},Ee.setValue=function(tt,gt){var dt=new he(Ee._currentContext);return dt._currentContext.set(tt,gt),dt},Ee.deleteValue=function(tt){var gt=new he(Ee._currentContext);return gt._currentContext.delete(tt),gt}},ce=function(he,Ve){for(var Ee=0,tt=Ve.length,gt=he.length;Ee<tt;Ee++,gt++)he[gt]=Ve[Ee];return he},Te=function(){function he(){}return he.prototype.active=function(){return ie},he.prototype.with=function(Ve,Ee,tt){for(var gt=[],dt=3;dt<arguments.length;dt++)gt[dt-3]=arguments[dt];return Ee.call.apply(Ee,ce([tt],gt))},he.prototype.bind=function(Ve,Ee){return Ee},he.prototype.enable=function(){return this},he.prototype.disable=function(){return this},he}(),te=function(he,Ve){for(var Ee=0,tt=Ve.length,gt=he.length;Ee<tt;Ee++,gt++)he[gt]=Ve[Ee];return he},Y="context",le=new Te,Z=function(){function he(){}return he.getInstance=function(){return this._instance||(this._instance=new he),this._instance},he.prototype.setGlobalContextManager=function(Ve){return b(Y,Ve,R.instance())},he.prototype.active=function(){return this._getContextManager().active()},he.prototype.with=function(Ve,Ee,tt){for(var gt,dt=[],Ze=3;Ze<arguments.length;Ze++)dt[Ze-3]=arguments[Ze];return(gt=this._getContextManager()).with.apply(gt,te([Ve,Ee,tt],dt))},he.prototype.bind=function(Ve,Ee){return this._getContextManager().bind(Ve,Ee)},he.prototype._getContextManager=function(){return c(Y)||le},he.prototype.disable=function(){this._getContextManager().disable(),d(Y,R.instance())},he}(),z=(()=>{return(he=z||(z={}))[he.NONE=0]="NONE",he[he.SAMPLED=1]="SAMPLED",z;var he})(),ne="0000000000000000",Ce="00000000000000000000000000000000",we={traceId:Ce,spanId:ne,traceFlags:z.NONE},_e=function(){function he(Ve){void 0===Ve&&(Ve=we),this._spanContext=Ve}return he.prototype.spanContext=function(){return this._spanContext},he.prototype.setAttribute=function(Ve,Ee){return this},he.prototype.setAttributes=function(Ve){return this},he.prototype.addEvent=function(Ve,Ee){return this},he.prototype.setStatus=function(Ve){return this},he.prototype.updateName=function(Ve){return this},he.prototype.end=function(Ve){},he.prototype.isRecording=function(){return!1},he.prototype.recordException=function(Ve,Ee){},he}(),re=ee("OpenTelemetry Context Key SPAN");function fe(he){return he.getValue(re)||void 0}function me(he,Ve){return he.setValue(re,Ve)}function ve(he){return he.deleteValue(re)}function be(he,Ve){return me(he,new _e(Ve))}function Ie(he){var Ve;return null===(Ve=fe(he))||void 0===Ve?void 0:Ve.spanContext()}var ke=/^([0-9a-f]{32})$/i,qe=/^[0-9a-f]{16}$/i;function Ge(he){return function(he){return ke.test(he)&&he!==Ce}(he.traceId)&&function(he){return qe.test(he)&&he!==ne}(he.spanId)}function Ye(he){return new _e(he)}var Xe=Z.getInstance(),We=function(){function he(){}return he.prototype.startSpan=function(Ve,Ee,tt){if(Boolean(null==Ee?void 0:Ee.root))return new _e;var dt=tt&&Ie(tt);return function(he){return"object"==typeof he&&"string"==typeof he.spanId&&"string"==typeof he.traceId&&"number"==typeof he.traceFlags}(dt)&&Ge(dt)?new _e(dt):new _e},he.prototype.startActiveSpan=function(Ve,Ee,tt,gt){var dt,Ze,vn;if(!(arguments.length<2)){2===arguments.length?vn=Ee:3===arguments.length?(dt=Ee,vn=tt):(dt=Ee,Ze=tt,vn=gt);var an=null!=Ze?Ze:Xe.active(),cn=this.startSpan(Ve,dt,an),Bn=me(an,cn);return Xe.with(Bn,vn,void 0,cn)}},he}(),Ue=new We,ut=function(){function he(Ve,Ee,tt){this._provider=Ve,this.name=Ee,this.version=tt}return he.prototype.startSpan=function(Ve,Ee,tt){return this._getTracer().startSpan(Ve,Ee,tt)},he.prototype.startActiveSpan=function(Ve,Ee,tt,gt){var dt=this._getTracer();return Reflect.apply(dt.startActiveSpan,dt,arguments)},he.prototype._getTracer=function(){if(this._delegate)return this._delegate;var Ve=this._provider.getDelegateTracer(this.name,this.version);return Ve?(this._delegate=Ve,this._delegate):Ue},he}(),Wt=new(function(){function he(){}return he.prototype.getTracer=function(Ve,Ee){return new We},he}()),Zt=function(){function he(){}return he.prototype.getTracer=function(Ve,Ee){var tt;return null!==(tt=this.getDelegateTracer(Ve,Ee))&&void 0!==tt?tt:new ut(this,Ve,Ee)},he.prototype.getDelegate=function(){var Ve;return null!==(Ve=this._delegate)&&void 0!==Ve?Ve:Wt},he.prototype.setDelegate=function(Ve){this._delegate=Ve},he.prototype.getDelegateTracer=function(Ve,Ee){var tt;return null===(tt=this._delegate)||void 0===tt?void 0:tt.getTracer(Ve,Ee)},he}(),Ae="trace",ze=function(){function he(){this._proxyTracerProvider=new Zt,this.wrapSpanContext=Ye,this.isSpanContextValid=Ge,this.deleteSpan=ve,this.getSpan=fe,this.getSpanContext=Ie,this.setSpan=me,this.setSpanContext=be}return he.getInstance=function(){return this._instance||(this._instance=new he),this._instance},he.prototype.setGlobalTracerProvider=function(Ve){var Ee=b(Ae,this._proxyTracerProvider,R.instance());return Ee&&this._proxyTracerProvider.setDelegate(Ve),Ee},he.prototype.getTracerProvider=function(){return c(Ae)||this._proxyTracerProvider},he.prototype.getTracer=function(Ve,Ee){return this.getTracerProvider().getTracer(Ve,Ee)},he.prototype.disable=function(){d(Ae,R.instance()),this._proxyTracerProvider=new Zt},he}(),ot=function(){function he(){}return he.prototype.inject=function(Ve,Ee){},he.prototype.extract=function(Ve,Ee){return Ve},he.prototype.fields=function(){return[]},he}(),yt=ee("OpenTelemetry Baggage Key");function At(he){return he.getValue(yt)||void 0}function Ot(he,Ve){return he.setValue(yt,Ve)}function zt(he){return he.deleteValue(yt)}var Qn="propagation",Jn=new ot,et=function(){function he(){this.createBaggage=y,this.getBaggage=At,this.setBaggage=Ot,this.deleteBaggage=zt}return he.getInstance=function(){return this._instance||(this._instance=new he),this._instance},he.prototype.setGlobalPropagator=function(Ve){return b(Qn,Ve,R.instance())},he.prototype.inject=function(Ve,Ee,tt){return void 0===tt&&(tt=ue),this._getGlobalPropagator().inject(Ve,Ee,tt)},he.prototype.extract=function(Ve,Ee,tt){return void 0===tt&&(tt=j),this._getGlobalPropagator().extract(Ve,Ee,tt)},he.prototype.fields=function(){return this._getGlobalPropagator().fields()},he.prototype.disable=function(){d(Qn,R.instance())},he.prototype._getGlobalPropagator=function(){return c(Qn)||Jn},he}(),xt=Z.getInstance(),pr=ze.getInstance();et.getInstance(),R.instance()},8686:(K,m,u)=>{K.exports=u(5454)},4054:(K,m,u)=>{"use strict";var s=u(9471),_=u(5650),h=u(300),p=u(7790),E=u(4634),f=u(1929),v=u(2984),I=u(5886);K.exports=function(c){return new Promise(function(C,w){var g=c.data,T=c.headers,M=c.responseType;s.isFormData(g)&&delete T["Content-Type"];var R=new XMLHttpRequest;if(c.auth){var S=c.auth.username||"",N=c.auth.password?unescape(encodeURIComponent(c.auth.password)):"";T.Authorization="Basic "+btoa(S+":"+N)}var P=E(c.baseURL,c.url);function y(){if(R){var F="getAllResponseHeaders"in R?f(R.getAllResponseHeaders()):null;_(C,w,{data:M&&"text"!==M&&"json"!==M?R.response:R.responseText,status:R.status,statusText:R.statusText,headers:F,config:c,request:R}),R=null}}if(R.open(c.method.toUpperCase(),p(P,c.params,c.paramsSerializer),!0),R.timeout=c.timeout,"onloadend"in R?R.onloadend=y:R.onreadystatechange=function(){!R||4!==R.readyState||0===R.status&&(!R.responseURL||0!==R.responseURL.indexOf("file:"))||setTimeout(y)},R.onabort=function(){!R||(w(I("Request aborted",c,"ECONNABORTED",R)),R=null)},R.onerror=function(){w(I("Network Error",c,null,R)),R=null},R.ontimeout=function(){var q="timeout of "+c.timeout+"ms exceeded";c.timeoutErrorMessage&&(q=c.timeoutErrorMessage),w(I(q,c,c.transitional&&c.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",R)),R=null},s.isStandardBrowserEnv()){var A=(c.withCredentials||v(P))&&c.xsrfCookieName?h.read(c.xsrfCookieName):void 0;A&&(T[c.xsrfHeaderName]=A)}"setRequestHeader"in R&&s.forEach(T,function(q,j){void 0===g&&"content-type"===j.toLowerCase()?delete T[j]:R.setRequestHeader(j,q)}),s.isUndefined(c.withCredentials)||(R.withCredentials=!!c.withCredentials),M&&"json"!==M&&(R.responseType=c.responseType),"function"==typeof c.onDownloadProgress&&R.addEventListener("progress",c.onDownloadProgress),"function"==typeof c.onUploadProgress&&R.upload&&R.upload.addEventListener("progress",c.onUploadProgress),c.cancelToken&&c.cancelToken.promise.then(function(q){!R||(R.abort(),w(q),R=null)}),g||(g=null),R.send(g)})}},5454:(K,m,u)=>{"use strict";var s=u(9471),_=u(1533),h=u(3227),p=u(4018);function f(I){var b=new h(I),c=_(h.prototype.request,b);return s.extend(c,h.prototype,b),s.extend(c,b),c}var v=f(u(2567));v.Axios=h,v.create=function(b){return f(p(v.defaults,b))},v.Cancel=u(8728),v.CancelToken=u(701),v.isCancel=u(2130),v.all=function(b){return Promise.all(b)},v.spread=u(8908),v.isAxiosError=u(9541),K.exports=v,K.exports.default=v},8728:K=>{"use strict";function m(u){this.message=u}m.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},m.prototype.__CANCEL__=!0,K.exports=m},701:(K,m,u)=>{"use strict";var s=u(8728);function _(h){if("function"!=typeof h)throw new TypeError("executor must be a function.");var p;this.promise=new Promise(function(v){p=v});var E=this;h(function(v){E.reason||(E.reason=new s(v),p(E.reason))})}_.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},_.source=function(){var p;return{token:new _(function(v){p=v}),cancel:p}},K.exports=_},2130:K=>{"use strict";K.exports=function(u){return!(!u||!u.__CANCEL__)}},3227:(K,m,u)=>{"use strict";var s=u(9471),_=u(7790),h=u(3976),p=u(6764),E=u(4018),f=u(3558),v=f.validators;function I(b){this.defaults=b,this.interceptors={request:new h,response:new h}}I.prototype.request=function(c){"string"==typeof c?(c=arguments[1]||{}).url=arguments[0]:c=c||{},(c=E(this.defaults,c)).method=c.method?c.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var d=c.transitional;void 0!==d&&f.assertOptions(d,{silentJSONParsing:v.transitional(v.boolean,"1.0.0"),forcedJSONParsing:v.transitional(v.boolean,"1.0.0"),clarifyTimeoutError:v.transitional(v.boolean,"1.0.0")},!1);var C=[],w=!0;this.interceptors.request.forEach(function(y){"function"==typeof y.runWhen&&!1===y.runWhen(c)||(w=w&&y.synchronous,C.unshift(y.fulfilled,y.rejected))});var T,g=[];if(this.interceptors.response.forEach(function(y){g.push(y.fulfilled,y.rejected)}),!w){var M=[p,void 0];for(Array.prototype.unshift.apply(M,C),M=M.concat(g),T=Promise.resolve(c);M.length;)T=T.then(M.shift(),M.shift());return T}for(var R=c;C.length;){var S=C.shift(),N=C.shift();try{R=S(R)}catch(P){N(P);break}}try{T=p(R)}catch(P){return Promise.reject(P)}for(;g.length;)T=T.then(g.shift(),g.shift());return T},I.prototype.getUri=function(c){return c=E(this.defaults,c),_(c.url,c.params,c.paramsSerializer).replace(/^\?/,"")},s.forEach(["delete","get","head","options"],function(c){I.prototype[c]=function(d,C){return this.request(E(C||{},{method:c,url:d,data:(C||{}).data}))}}),s.forEach(["post","put","patch"],function(c){I.prototype[c]=function(d,C,w){return this.request(E(w||{},{method:c,url:d,data:C}))}}),K.exports=I},3976:(K,m,u)=>{"use strict";var s=u(9471);function _(){this.handlers=[]}_.prototype.use=function(p,E,f){return this.handlers.push({fulfilled:p,rejected:E,synchronous:!!f&&f.synchronous,runWhen:f?f.runWhen:null}),this.handlers.length-1},_.prototype.eject=function(p){this.handlers[p]&&(this.handlers[p]=null)},_.prototype.forEach=function(p){s.forEach(this.handlers,function(f){null!==f&&p(f)})},K.exports=_},4634:(K,m,u)=>{"use strict";var s=u(5164),_=u(1540);K.exports=function(p,E){return p&&!s(E)?_(p,E):E}},5886:(K,m,u)=>{"use strict";var s=u(9570);K.exports=function(h,p,E,f,v){var I=new Error(h);return s(I,p,E,f,v)}},6764:(K,m,u)=>{"use strict";var s=u(9471),_=u(4284),h=u(2130),p=u(2567);function E(f){f.cancelToken&&f.cancelToken.throwIfRequested()}K.exports=function(v){return E(v),v.headers=v.headers||{},v.data=_.call(v,v.data,v.headers,v.transformRequest),v.headers=s.merge(v.headers.common||{},v.headers[v.method]||{},v.headers),s.forEach(["delete","get","head","post","put","patch","common"],function(c){delete v.headers[c]}),(v.adapter||p.adapter)(v).then(function(c){return E(v),c.data=_.call(v,c.data,c.headers,v.transformResponse),c},function(c){return h(c)||(E(v),c&&c.response&&(c.response.data=_.call(v,c.response.data,c.response.headers,v.transformResponse))),Promise.reject(c)})}},9570:K=>{"use strict";K.exports=function(u,s,_,h,p){return u.config=s,_&&(u.code=_),u.request=h,u.response=p,u.isAxiosError=!0,u.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},u}},4018:(K,m,u)=>{"use strict";var s=u(9471);K.exports=function(h,p){p=p||{};var E={},f=["url","method","data"],v=["headers","auth","proxy","params"],I=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],b=["validateStatus"];function c(g,T){return s.isPlainObject(g)&&s.isPlainObject(T)?s.merge(g,T):s.isPlainObject(T)?s.merge({},T):s.isArray(T)?T.slice():T}function d(g){s.isUndefined(p[g])?s.isUndefined(h[g])||(E[g]=c(void 0,h[g])):E[g]=c(h[g],p[g])}s.forEach(f,function(T){s.isUndefined(p[T])||(E[T]=c(void 0,p[T]))}),s.forEach(v,d),s.forEach(I,function(T){s.isUndefined(p[T])?s.isUndefined(h[T])||(E[T]=c(void 0,h[T])):E[T]=c(void 0,p[T])}),s.forEach(b,function(T){T in p?E[T]=c(h[T],p[T]):T in h&&(E[T]=c(void 0,h[T]))});var C=f.concat(v).concat(I).concat(b),w=Object.keys(h).concat(Object.keys(p)).filter(function(T){return-1===C.indexOf(T)});return s.forEach(w,d),E}},5650:(K,m,u)=>{"use strict";var s=u(5886);K.exports=function(h,p,E){var f=E.config.validateStatus;E.status&&f&&!f(E.status)?p(s("Request failed with status code "+E.status,E.config,null,E.request,E)):h(E)}},4284:(K,m,u)=>{"use strict";var s=u(9471),_=u(2567);K.exports=function(p,E,f){var v=this||_;return s.forEach(f,function(b){p=b.call(v,p,E)}),p}},2567:(K,m,u)=>{"use strict";var s=u(9471),_=u(2196),h=u(9570),p={"Content-Type":"application/x-www-form-urlencoded"};function E(b,c){!s.isUndefined(b)&&s.isUndefined(b["Content-Type"])&&(b["Content-Type"]=c)}var b,I={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(b=u(4054)),b),transformRequest:[function(c,d){return _(d,"Accept"),_(d,"Content-Type"),s.isFormData(c)||s.isArrayBuffer(c)||s.isBuffer(c)||s.isStream(c)||s.isFile(c)||s.isBlob(c)?c:s.isArrayBufferView(c)?c.buffer:s.isURLSearchParams(c)?(E(d,"application/x-www-form-urlencoded;charset=utf-8"),c.toString()):s.isObject(c)||d&&"application/json"===d["Content-Type"]?(E(d,"application/json"),function(b,c,d){if(s.isString(b))try{return(0,JSON.parse)(b),s.trim(b)}catch(C){if("SyntaxError"!==C.name)throw C}return(0,JSON.stringify)(b)}(c)):c}],transformResponse:[function(c){var d=this.transitional,g=!(d&&d.silentJSONParsing)&&"json"===this.responseType;if(g||d&&d.forcedJSONParsing&&s.isString(c)&&c.length)try{return JSON.parse(c)}catch(T){if(g)throw"SyntaxError"===T.name?h(T,this,"E_JSON_PARSE"):T}return c}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(c){return c>=200&&c<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};s.forEach(["delete","get","head"],function(c){I.headers[c]={}}),s.forEach(["post","put","patch"],function(c){I.headers[c]=s.merge(p)}),K.exports=I},1533:K=>{"use strict";K.exports=function(u,s){return function(){for(var h=new Array(arguments.length),p=0;p<h.length;p++)h[p]=arguments[p];return u.apply(s,h)}}},7790:(K,m,u)=>{"use strict";var s=u(9471);function _(h){return encodeURIComponent(h).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}K.exports=function(p,E,f){if(!E)return p;var v;if(f)v=f(E);else if(s.isURLSearchParams(E))v=E.toString();else{var I=[];s.forEach(E,function(d,C){null==d||(s.isArray(d)?C+="[]":d=[d],s.forEach(d,function(g){s.isDate(g)?g=g.toISOString():s.isObject(g)&&(g=JSON.stringify(g)),I.push(_(C)+"="+_(g))}))}),v=I.join("&")}if(v){var b=p.indexOf("#");-1!==b&&(p=p.slice(0,b)),p+=(-1===p.indexOf("?")?"?":"&")+v}return p}},1540:K=>{"use strict";K.exports=function(u,s){return s?u.replace(/\/+$/,"")+"/"+s.replace(/^\/+/,""):u}},300:(K,m,u)=>{"use strict";var s=u(9471);K.exports=s.isStandardBrowserEnv()?{write:function(p,E,f,v,I,b){var c=[];c.push(p+"="+encodeURIComponent(E)),s.isNumber(f)&&c.push("expires="+new Date(f).toGMTString()),s.isString(v)&&c.push("path="+v),s.isString(I)&&c.push("domain="+I),!0===b&&c.push("secure"),document.cookie=c.join("; ")},read:function(p){var E=document.cookie.match(new RegExp("(^|;\\s*)("+p+")=([^;]*)"));return E?decodeURIComponent(E[3]):null},remove:function(p){this.write(p,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},5164:K=>{"use strict";K.exports=function(u){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(u)}},9541:K=>{"use strict";K.exports=function(u){return"object"==typeof u&&!0===u.isAxiosError}},2984:(K,m,u)=>{"use strict";var s=u(9471);K.exports=s.isStandardBrowserEnv()?function(){var E,h=/(msie|trident)/i.test(navigator.userAgent),p=document.createElement("a");function f(v){var I=v;return h&&(p.setAttribute("href",I),I=p.href),p.setAttribute("href",I),{href:p.href,protocol:p.protocol?p.protocol.replace(/:$/,""):"",host:p.host,search:p.search?p.search.replace(/^\?/,""):"",hash:p.hash?p.hash.replace(/^#/,""):"",hostname:p.hostname,port:p.port,pathname:"/"===p.pathname.charAt(0)?p.pathname:"/"+p.pathname}}return E=f(window.location.href),function(I){var b=s.isString(I)?f(I):I;return b.protocol===E.protocol&&b.host===E.host}}():function(){return!0}},2196:(K,m,u)=>{"use strict";var s=u(9471);K.exports=function(h,p){s.forEach(h,function(f,v){v!==p&&v.toUpperCase()===p.toUpperCase()&&(h[p]=f,delete h[v])})}},1929:(K,m,u)=>{"use strict";var s=u(9471),_=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];K.exports=function(p){var f,v,I,E={};return p&&s.forEach(p.split("\n"),function(c){if(I=c.indexOf(":"),f=s.trim(c.substr(0,I)).toLowerCase(),v=s.trim(c.substr(I+1)),f){if(E[f]&&_.indexOf(f)>=0)return;E[f]="set-cookie"===f?(E[f]?E[f]:[]).concat([v]):E[f]?E[f]+", "+v:v}}),E}},8908:K=>{"use strict";K.exports=function(u){return function(_){return u.apply(null,_)}}},3558:(K,m,u)=>{"use strict";var s=u(8593),_={};["object","boolean","number","function","string","symbol"].forEach(function(v,I){_[v]=function(c){return typeof c===v||"a"+(I<1?"n ":" ")+v}});var h={},p=s.version.split(".");function E(v,I){for(var b=I?I.split("."):p,c=v.split("."),d=0;d<3;d++){if(b[d]>c[d])return!0;if(b[d]<c[d])return!1}return!1}_.transitional=function(I,b,c){var d=b&&E(b);function C(w,g){return"[Axios v"+s.version+"] Transitional option '"+w+"'"+g+(c?". "+c:"")}return function(w,g,T){if(!1===I)throw new Error(C(g," has been removed in "+b));return d&&!h[g]&&(h[g]=!0,console.warn(C(g," has been deprecated since v"+b+" and will be removed in the near future"))),!I||I(w,g,T)}},K.exports={isOlderVersion:E,assertOptions:function(v,I,b){if("object"!=typeof v)throw new TypeError("options must be an object");for(var c=Object.keys(v),d=c.length;d-- >0;){var C=c[d],w=I[C];if(w){var g=v[C],T=void 0===g||w(g,C,v);if(!0!==T)throw new TypeError("option "+C+" must be "+T)}else if(!0!==b)throw Error("Unknown option "+C)}},validators:_}},9471:(K,m,u)=>{"use strict";var s=u(1533),_=Object.prototype.toString;function h(j){return"[object Array]"===_.call(j)}function p(j){return void 0===j}function d(j){return null!==j&&"object"==typeof j}function C(j){if("[object Object]"!==_.call(j))return!1;var ue=Object.getPrototypeOf(j);return null===ue||ue===Object.prototype}function M(j){return"[object Function]"===_.call(j)}function y(j,ue){if(null!=j)if("object"!=typeof j&&(j=[j]),h(j))for(var ee=0,$=j.length;ee<$;ee++)ue.call(null,j[ee],ee,j);else for(var ie in j)Object.prototype.hasOwnProperty.call(j,ie)&&ue.call(null,j[ie],ie,j)}K.exports={isArray:h,isArrayBuffer:function(j){return"[object ArrayBuffer]"===_.call(j)},isBuffer:function(j){return null!==j&&!p(j)&&null!==j.constructor&&!p(j.constructor)&&"function"==typeof j.constructor.isBuffer&&j.constructor.isBuffer(j)},isFormData:function(j){return"undefined"!=typeof FormData&&j instanceof FormData},isArrayBufferView:function(j){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(j):j&&j.buffer&&j.buffer instanceof ArrayBuffer},isString:function(j){return"string"==typeof j},isNumber:function(j){return"number"==typeof j},isObject:d,isPlainObject:C,isUndefined:p,isDate:function(j){return"[object Date]"===_.call(j)},isFile:function(j){return"[object File]"===_.call(j)},isBlob:function(j){return"[object Blob]"===_.call(j)},isFunction:M,isStream:function(j){return d(j)&&M(j.pipe)},isURLSearchParams:function(j){return"undefined"!=typeof URLSearchParams&&j instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:y,merge:function A(){var j={};function ue(ie,ce){j[ce]=C(j[ce])&&C(ie)?A(j[ce],ie):C(ie)?A({},ie):h(ie)?ie.slice():ie}for(var ee=0,$=arguments.length;ee<$;ee++)y(arguments[ee],ue);return j},extend:function(j,ue,ee){return y(ue,function(ie,ce){j[ce]=ee&&"function"==typeof ie?s(ie,ee):ie}),j},trim:function(j){return j.trim?j.trim():j.replace(/^\s+|\s+$/g,"")},stripBOM:function(j){return 65279===j.charCodeAt(0)&&(j=j.slice(1)),j}}},3105:K=>{"use strict";var s,m="object"==typeof Reflect?Reflect:null,u=m&&"function"==typeof m.apply?m.apply:function(P,y,A){return Function.prototype.apply.call(P,y,A)};s=m&&"function"==typeof m.ownKeys?m.ownKeys:Object.getOwnPropertySymbols?function(P){return Object.getOwnPropertyNames(P).concat(Object.getOwnPropertySymbols(P))}:function(P){return Object.getOwnPropertyNames(P)};var h=Number.isNaN||function(P){return P!=P};function p(){p.init.call(this)}K.exports=p,K.exports.once=function(N,P){return new Promise(function(y,A){function F(j){N.removeListener(P,q),A(j)}function q(){"function"==typeof N.removeListener&&N.removeListener("error",F),y([].slice.call(arguments))}S(N,P,q,{once:!0}),"error"!==P&&function(N,P,y){"function"==typeof N.on&&S(N,"error",P,{once:!0})}(N,F)})},p.EventEmitter=p,p.prototype._events=void 0,p.prototype._eventsCount=0,p.prototype._maxListeners=void 0;var E=10;function f(N){if("function"!=typeof N)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof N)}function v(N){return void 0===N._maxListeners?p.defaultMaxListeners:N._maxListeners}function I(N,P,y,A){var F,q,j;if(f(y),void 0===(q=N._events)?(q=N._events=Object.create(null),N._eventsCount=0):(void 0!==q.newListener&&(N.emit("newListener",P,y.listener?y.listener:y),q=N._events),j=q[P]),void 0===j)j=q[P]=y,++N._eventsCount;else if("function"==typeof j?j=q[P]=A?[y,j]:[j,y]:A?j.unshift(y):j.push(y),(F=v(N))>0&&j.length>F&&!j.warned){j.warned=!0;var ue=new Error("Possible EventEmitter memory leak detected. "+j.length+" "+String(P)+" listeners added. Use emitter.setMaxListeners() to increase limit");ue.name="MaxListenersExceededWarning",ue.emitter=N,ue.type=P,ue.count=j.length,function(N){console&&console.warn&&console.warn(N)}(ue)}return N}function b(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(N,P,y){var A={fired:!1,wrapFn:void 0,target:N,type:P,listener:y},F=b.bind(A);return F.listener=y,A.wrapFn=F,F}function d(N,P,y){var A=N._events;if(void 0===A)return[];var F=A[P];return void 0===F?[]:"function"==typeof F?y?[F.listener||F]:[F]:y?function(N){for(var P=new Array(N.length),y=0;y<P.length;++y)P[y]=N[y].listener||N[y];return P}(F):w(F,F.length)}function C(N){var P=this._events;if(void 0!==P){var y=P[N];if("function"==typeof y)return 1;if(void 0!==y)return y.length}return 0}function w(N,P){for(var y=new Array(P),A=0;A<P;++A)y[A]=N[A];return y}function S(N,P,y,A){if("function"==typeof N.on)A.once?N.once(P,y):N.on(P,y);else{if("function"!=typeof N.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof N);N.addEventListener(P,function F(q){A.once&&N.removeEventListener(P,F),y(q)})}}Object.defineProperty(p,"defaultMaxListeners",{enumerable:!0,get:function(){return E},set:function(N){if("number"!=typeof N||N<0||h(N))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+N+".");E=N}}),p.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},p.prototype.setMaxListeners=function(P){if("number"!=typeof P||P<0||h(P))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+P+".");return this._maxListeners=P,this},p.prototype.getMaxListeners=function(){return v(this)},p.prototype.emit=function(P){for(var y=[],A=1;A<arguments.length;A++)y.push(arguments[A]);var F="error"===P,q=this._events;if(void 0!==q)F=F&&void 0===q.error;else if(!F)return!1;if(F){var j;if(y.length>0&&(j=y[0]),j instanceof Error)throw j;var ue=new Error("Unhandled error."+(j?" ("+j.message+")":""));throw ue.context=j,ue}var ee=q[P];if(void 0===ee)return!1;if("function"==typeof ee)u(ee,this,y);else{var $=ee.length,ie=w(ee,$);for(A=0;A<$;++A)u(ie[A],this,y)}return!0},p.prototype.on=p.prototype.addListener=function(P,y){return I(this,P,y,!1)},p.prototype.prependListener=function(P,y){return I(this,P,y,!0)},p.prototype.once=function(P,y){return f(y),this.on(P,c(this,P,y)),this},p.prototype.prependOnceListener=function(P,y){return f(y),this.prependListener(P,c(this,P,y)),this},p.prototype.off=p.prototype.removeListener=function(P,y){var A,F,q,j,ue;if(f(y),void 0===(F=this._events))return this;if(void 0===(A=F[P]))return this;if(A===y||A.listener===y)0==--this._eventsCount?this._events=Object.create(null):(delete F[P],F.removeListener&&this.emit("removeListener",P,A.listener||y));else if("function"!=typeof A){for(q=-1,j=A.length-1;j>=0;j--)if(A[j]===y||A[j].listener===y){ue=A[j].listener,q=j;break}if(q<0)return this;0===q?A.shift():function(N,P){for(;P+1<N.length;P++)N[P]=N[P+1];N.pop()}(A,q),1===A.length&&(F[P]=A[0]),void 0!==F.removeListener&&this.emit("removeListener",P,ue||y)}return this},p.prototype.removeAllListeners=function(P){var y,A,F;if(void 0===(A=this._events))return this;if(void 0===A.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==A[P]&&(0==--this._eventsCount?this._events=Object.create(null):delete A[P]),this;if(0===arguments.length){var j,q=Object.keys(A);for(F=0;F<q.length;++F)"removeListener"!==(j=q[F])&&this.removeAllListeners(j);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(y=A[P]))this.removeListener(P,y);else if(void 0!==y)for(F=y.length-1;F>=0;F--)this.removeListener(P,y[F]);return this},p.prototype.listeners=function(P){return d(this,P,!0)},p.prototype.rawListeners=function(P){return d(this,P,!1)},p.listenerCount=function(N,P){return"function"==typeof N.listenerCount?N.listenerCount(P):C.call(N,P)},p.prototype.listenerCount=C,p.prototype.eventNames=function(){return this._eventsCount>0?s(this._events):[]}},6099:K=>{function u(_){this.message=_}(u.prototype=new Error).name="InvalidCharacterError",K.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(_){var h=String(_).replace(/=+$/,"");if(h.length%4==1)throw new u("'atob' failed: The string to be decoded is not correctly encoded.");for(var E,f,p=0,v=0,I="";f=h.charAt(v++);~f&&(E=p%4?64*E+f:f,p++%4)?I+=String.fromCharCode(255&E>>(-2*p&6)):0)f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(f);return I}},4400:(K,m,u)=>{var s=u(6099);K.exports=function(h){var p=h.replace(/-/g,"+").replace(/_/g,"/");switch(p.length%4){case 0:break;case 2:p+="==";break;case 3:p+="=";break;default:throw"Illegal base64url string!"}try{return function(h){return decodeURIComponent(s(h).replace(/(.)/g,function(p,E){var f=E.charCodeAt(0).toString(16).toUpperCase();return f.length<2&&(f="0"+f),"%"+f}))}(p)}catch(E){return s(p)}}},4934:(K,m,u)=>{"use strict";var s=u(4400);function _(h){this.message=h}(_.prototype=new Error).name="InvalidTokenError",K.exports=function(h,p){if("string"!=typeof h)throw new _("Invalid token specified");var E=!0===(p=p||{}).header?0:1;try{return JSON.parse(s(h.split(".")[E]))}catch(f){throw new _("Invalid token specified: "+f.message)}},K.exports.InvalidTokenError=_},8228:K=>{"use strict";var m=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function _(p){if(null==p)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(p)}K.exports=function(){try{if(!Object.assign)return!1;var p=new String("abc");if(p[5]="de","5"===Object.getOwnPropertyNames(p)[0])return!1;for(var E={},f=0;f<10;f++)E["_"+String.fromCharCode(f)]=f;if("0123456789"!==Object.getOwnPropertyNames(E).map(function(b){return E[b]}).join(""))return!1;var I={};return"abcdefghijklmnopqrst".split("").forEach(function(b){I[b]=b}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},I)).join("")}catch(b){return!1}}()?Object.assign:function(p,E){for(var f,I,v=_(p),b=1;b<arguments.length;b++){for(var c in f=Object(arguments[b]))u.call(f,c)&&(v[c]=f[c]);if(m){I=m(f);for(var d=0;d<I.length;d++)s.call(f,I[d])&&(v[I[d]]=f[I[d]])}}return v}},5429:(K,m,u)=>{"use strict";var _=u(8228),h=60103;if("function"==typeof Symbol&&Symbol.for){var c=Symbol.for;h=c("react.element"),c("react.portal"),c("react.fragment"),c("react.strict_mode"),c("react.profiler"),c("react.provider"),c("react.context"),c("react.forward_ref"),c("react.suspense"),c("react.memo"),c("react.lazy")}"function"==typeof Symbol&&Symbol;function w(Z){for(var z="https://reactjs.org/docs/error-decoder.html?invariant="+Z,ne=1;ne<arguments.length;ne++)z+="&args[]="+encodeURIComponent(arguments[ne]);return"Minified React error #"+Z+"; visit "+z+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T={};function M(Z,z,ne){this.props=Z,this.context=z,this.refs=T,this.updater=ne||g}function R(){}function S(Z,z,ne){this.props=Z,this.context=z,this.refs=T,this.updater=ne||g}M.prototype.isReactComponent={},M.prototype.setState=function(Z,z){if("object"!=typeof Z&&"function"!=typeof Z&&null!=Z)throw Error(w(85));this.updater.enqueueSetState(this,Z,z,"setState")},M.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")},R.prototype=M.prototype;var N=S.prototype=new R;N.constructor=S,_(N,M.prototype),N.isPureReactComponent=!0;var P_current=null,y=Object.prototype.hasOwnProperty,A={key:!0,ref:!0,__self:!0,__source:!0};m.createElement=function(Z,z,ne){var Ce,we={},_e=null,re=null;if(null!=z)for(Ce in void 0!==z.ref&&(re=z.ref),void 0!==z.key&&(_e=""+z.key),z)y.call(z,Ce)&&!A.hasOwnProperty(Ce)&&(we[Ce]=z[Ce]);var fe=arguments.length-2;if(1===fe)we.children=ne;else if(1<fe){for(var me=Array(fe),ve=0;ve<fe;ve++)me[ve]=arguments[ve+2];we.children=me}if(Z&&Z.defaultProps)for(Ce in fe=Z.defaultProps)void 0===we[Ce]&&(we[Ce]=fe[Ce]);return{$$typeof:h,type:Z,key:_e,ref:re,props:we,_owner:P_current}}},8139:(K,m,u)=>{"use strict";K.exports=u(5429)},7941:K=>{var m=function(u){"use strict";var h,s=Object.prototype,_=s.hasOwnProperty,p="function"==typeof Symbol?Symbol:{},E=p.iterator||"@@iterator",f=p.asyncIterator||"@@asyncIterator",v=p.toStringTag||"@@toStringTag";function I(te,Y,le){return Object.defineProperty(te,Y,{value:le,enumerable:!0,configurable:!0,writable:!0}),te[Y]}try{I({},"")}catch(te){I=function(Y,le,Z){return Y[le]=Z}}function b(te,Y,le,Z){var ne=Object.create((Y&&Y.prototype instanceof M?Y:M).prototype),Ce=new ie(Z||[]);return ne._invoke=function(te,Y,le){var Z=d;return function(ne,Ce){if(Z===w)throw new Error("Generator is already running");if(Z===g){if("throw"===ne)throw Ce;return Te()}for(le.method=ne,le.arg=Ce;;){var we=le.delegate;if(we){var _e=ue(we,le);if(_e){if(_e===T)continue;return _e}}if("next"===le.method)le.sent=le._sent=le.arg;else if("throw"===le.method){if(Z===d)throw Z=g,le.arg;le.dispatchException(le.arg)}else"return"===le.method&&le.abrupt("return",le.arg);Z=w;var re=c(te,Y,le);if("normal"===re.type){if(Z=le.done?g:C,re.arg===T)continue;return{value:re.arg,done:le.done}}"throw"===re.type&&(Z=g,le.method="throw",le.arg=re.arg)}}}(te,le,Ce),ne}function c(te,Y,le){try{return{type:"normal",arg:te.call(Y,le)}}catch(Z){return{type:"throw",arg:Z}}}u.wrap=b;var d="suspendedStart",C="suspendedYield",w="executing",g="completed",T={};function M(){}function R(){}function S(){}var N={};I(N,E,function(){return this});var P=Object.getPrototypeOf,y=P&&P(P(ce([])));y&&y!==s&&_.call(y,E)&&(N=y);var A=S.prototype=M.prototype=Object.create(N);function F(te){["next","throw","return"].forEach(function(Y){I(te,Y,function(le){return this._invoke(Y,le)})})}function q(te,Y){function le(ne,Ce,we,_e){var re=c(te[ne],te,Ce);if("throw"!==re.type){var fe=re.arg,me=fe.value;return me&&"object"==typeof me&&_.call(me,"__await")?Y.resolve(me.__await).then(function(ve){le("next",ve,we,_e)},function(ve){le("throw",ve,we,_e)}):Y.resolve(me).then(function(ve){fe.value=ve,we(fe)},function(ve){return le("throw",ve,we,_e)})}_e(re.arg)}var Z;this._invoke=function(ne,Ce){function we(){return new Y(function(_e,re){le(ne,Ce,_e,re)})}return Z=Z?Z.then(we,we):we()}}function ue(te,Y){var le=te.iterator[Y.method];if(le===h){if(Y.delegate=null,"throw"===Y.method){if(te.iterator.return&&(Y.method="return",Y.arg=h,ue(te,Y),"throw"===Y.method))return T;Y.method="throw",Y.arg=new TypeError("The iterator does not provide a 'throw' method")}return T}var Z=c(le,te.iterator,Y.arg);if("throw"===Z.type)return Y.method="throw",Y.arg=Z.arg,Y.delegate=null,T;var z=Z.arg;return z?z.done?(Y[te.resultName]=z.value,Y.next=te.nextLoc,"return"!==Y.method&&(Y.method="next",Y.arg=h),Y.delegate=null,T):z:(Y.method="throw",Y.arg=new TypeError("iterator result is not an object"),Y.delegate=null,T)}function ee(te){var Y={tryLoc:te[0]};1 in te&&(Y.catchLoc=te[1]),2 in te&&(Y.finallyLoc=te[2],Y.afterLoc=te[3]),this.tryEntries.push(Y)}function $(te){var Y=te.completion||{};Y.type="normal",delete Y.arg,te.completion=Y}function ie(te){this.tryEntries=[{tryLoc:"root"}],te.forEach(ee,this),this.reset(!0)}function ce(te){if(te){var Y=te[E];if(Y)return Y.call(te);if("function"==typeof te.next)return te;if(!isNaN(te.length)){var le=-1,Z=function z(){for(;++le<te.length;)if(_.call(te,le))return z.value=te[le],z.done=!1,z;return z.value=h,z.done=!0,z};return Z.next=Z}}return{next:Te}}function Te(){return{value:h,done:!0}}return R.prototype=S,I(A,"constructor",S),I(S,"constructor",R),R.displayName=I(S,v,"GeneratorFunction"),u.isGeneratorFunction=function(te){var Y="function"==typeof te&&te.constructor;return!!Y&&(Y===R||"GeneratorFunction"===(Y.displayName||Y.name))},u.mark=function(te){return Object.setPrototypeOf?Object.setPrototypeOf(te,S):(te.__proto__=S,I(te,v,"GeneratorFunction")),te.prototype=Object.create(A),te},u.awrap=function(te){return{__await:te}},F(q.prototype),I(q.prototype,f,function(){return this}),u.AsyncIterator=q,u.async=function(te,Y,le,Z,z){void 0===z&&(z=Promise);var ne=new q(b(te,Y,le,Z),z);return u.isGeneratorFunction(Y)?ne:ne.next().then(function(Ce){return Ce.done?Ce.value:ne.next()})},F(A),I(A,v,"Generator"),I(A,E,function(){return this}),I(A,"toString",function(){return"[object Generator]"}),u.keys=function(te){var Y=[];for(var le in te)Y.push(le);return Y.reverse(),function Z(){for(;Y.length;){var z=Y.pop();if(z in te)return Z.value=z,Z.done=!1,Z}return Z.done=!0,Z}},u.values=ce,ie.prototype={constructor:ie,reset:function(te){if(this.prev=0,this.next=0,this.sent=this._sent=h,this.done=!1,this.delegate=null,this.method="next",this.arg=h,this.tryEntries.forEach($),!te)for(var Y in this)"t"===Y.charAt(0)&&_.call(this,Y)&&!isNaN(+Y.slice(1))&&(this[Y]=h)},stop:function(){this.done=!0;var Y=this.tryEntries[0].completion;if("throw"===Y.type)throw Y.arg;return this.rval},dispatchException:function(te){if(this.done)throw te;var Y=this;function le(_e,re){return ne.type="throw",ne.arg=te,Y.next=_e,re&&(Y.method="next",Y.arg=h),!!re}for(var Z=this.tryEntries.length-1;Z>=0;--Z){var z=this.tryEntries[Z],ne=z.completion;if("root"===z.tryLoc)return le("end");if(z.tryLoc<=this.prev){var Ce=_.call(z,"catchLoc"),we=_.call(z,"finallyLoc");if(Ce&&we){if(this.prev<z.catchLoc)return le(z.catchLoc,!0);if(this.prev<z.finallyLoc)return le(z.finallyLoc)}else if(Ce){if(this.prev<z.catchLoc)return le(z.catchLoc,!0)}else{if(!we)throw new Error("try statement without catch or finally");if(this.prev<z.finallyLoc)return le(z.finallyLoc)}}}},abrupt:function(te,Y){for(var le=this.tryEntries.length-1;le>=0;--le){var Z=this.tryEntries[le];if(Z.tryLoc<=this.prev&&_.call(Z,"finallyLoc")&&this.prev<Z.finallyLoc){var z=Z;break}}z&&("break"===te||"continue"===te)&&z.tryLoc<=Y&&Y<=z.finallyLoc&&(z=null);var ne=z?z.completion:{};return ne.type=te,ne.arg=Y,z?(this.method="next",this.next=z.finallyLoc,T):this.complete(ne)},complete:function(te,Y){if("throw"===te.type)throw te.arg;return"break"===te.type||"continue"===te.type?this.next=te.arg:"return"===te.type?(this.rval=this.arg=te.arg,this.method="return",this.next="end"):"normal"===te.type&&Y&&(this.next=Y),T},finish:function(te){for(var Y=this.tryEntries.length-1;Y>=0;--Y){var le=this.tryEntries[Y];if(le.finallyLoc===te)return this.complete(le.completion,le.afterLoc),$(le),T}},catch:function(te){for(var Y=this.tryEntries.length-1;Y>=0;--Y){var le=this.tryEntries[Y];if(le.tryLoc===te){var Z=le.completion;if("throw"===Z.type){var z=Z.arg;$(le)}return z}}throw new Error("illegal catch attempt")},delegateYield:function(te,Y,le){return this.delegate={iterator:ce(te),resultName:Y,nextLoc:le},"next"===this.method&&(this.arg=h),T}},u}(K.exports);try{regeneratorRuntime=m}catch(u){"object"==typeof globalThis?globalThis.regeneratorRuntime=m:Function("r","regeneratorRuntime = r")(m)}},8952:(K,m,u)=>{"use strict";function s(t){return"function"==typeof t}let _=!1;const h={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else _&&console.log("RxJS: Back to a better error behavior. Thank you. <3");_=t},get useDeprecatedSynchronousErrorHandling(){return _}};function p(t){setTimeout(()=>{throw t},0)}const E={closed:!0,next(t){},error(t){if(h.useDeprecatedSynchronousErrorHandling)throw t;p(t)},complete(){}},f=Array.isArray||(t=>t&&"number"==typeof t.length);function v(t){return null!==t&&"object"==typeof t}const b=(()=>{function t(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return t.prototype=Object.create(Error.prototype),t})();class c{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:r,_unsubscribe:i,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof c)n.remove(this);else if(null!==n)for(let a=0;a<n.length;++a)n[a].remove(this);if(s(i)){r&&(this._unsubscribe=void 0);try{i.call(this)}catch(a){e=a instanceof b?d(a.errors):[a]}}if(f(o)){let a=-1,l=o.length;for(;++a<l;){const D=o[a];if(v(D))try{D.unsubscribe()}catch(x){e=e||[],x instanceof b?e=e.concat(d(x.errors)):e.push(x)}}}if(e)throw new b(e)}add(e){let n=e;if(!e)return c.EMPTY;switch(typeof e){case"function":n=new c(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof c)){const o=n;n=new c,n._subscriptions=[o]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof c){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(e){const n=this._subscriptions;if(n){const r=n.indexOf(e);-1!==r&&n.splice(r,1)}}}var t;function d(t){return t.reduce((e,n)=>e.concat(n instanceof b?n.errors:n),[])}c.EMPTY=((t=new c).closed=!0,t);const C="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class g extends c{constructor(e,n,r){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=E;break;case 1:if(!e){this.destination=E;break}if("object"==typeof e){e instanceof g?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new T(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new T(this,e,n,r)}}[C](){return this}static create(e,n,r){const i=new g(e,n,r);return i.syncErrorThrowable=!1,i}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class T extends g{constructor(e,n,r,i){super(),this._parentSubscriber=e;let o,a=this;s(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==E&&(a=Object.create(n),s(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=r,this._complete=i}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:n}=this;h.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:n}=this,{useDeprecatedSynchronousErrorHandling:r}=h;if(this._error)r&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(n.syncErrorThrowable)r?(n.syncErrorValue=e,n.syncErrorThrown=!0):p(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;p(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const n=()=>this._complete.call(this._context);h.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,n){try{e.call(this._context,n)}catch(r){if(this.unsubscribe(),h.useDeprecatedSynchronousErrorHandling)throw r;p(r)}}__tryOrSetError(e,n,r){if(!h.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,r)}catch(i){return h.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(p(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const S="function"==typeof Symbol&&Symbol.observable||"@@observable";function N(t){return t}let A=(()=>{class t{constructor(n){this._isScalar=!1,n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const{operator:o}=this,a=function(t,e,n){if(t){if(t instanceof g)return t;if(t[C])return t[C]()}return t||e||n?new g(t,e,n):new g(E)}(n,r,i);if(a.add(o?o.call(a,this.source):this.source||h.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),h.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(n){try{return this._subscribe(n)}catch(r){h.useDeprecatedSynchronousErrorHandling&&(n.syncErrorThrown=!0,n.syncErrorValue=r),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof g?n:null}return!0}(n)?n.error(r):console.warn(r)}}forEach(n,r){return new(r=F(r))((i,o)=>{let a;a=this.subscribe(l=>{try{n(l)}catch(D){o(D),a&&a.unsubscribe()}},o,i)})}_subscribe(n){const{source:r}=this;return r&&r.subscribe(n)}[S](){return this}pipe(...n){return 0===n.length?this:function(t){return 0===t.length?N:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=F(n))((r,i)=>{let o;this.subscribe(a=>o=a,a=>i(a),()=>r(o))})}}return t.create=e=>new t(e),t})();function F(t){if(t||(t=h.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const j=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class ue extends c{constructor(e,n){super(),this.subject=e,this.subscriber=n,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,n=e.observers;if(this.subject=null,!n||0===n.length||e.isStopped||e.closed)return;const r=n.indexOf(this.subscriber);-1!==r&&n.splice(r,1)}}class ee extends g{constructor(e){super(e),this.destination=e}}let $=(()=>{class t extends A{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[C](){return new ee(this)}lift(n){const r=new ie(this,this);return r.operator=n,r}next(n){if(this.closed)throw new j;if(!this.isStopped){const{observers:r}=this,i=r.length,o=r.slice();for(let a=0;a<i;a++)o[a].next(n)}}error(n){if(this.closed)throw new j;this.hasError=!0,this.thrownError=n,this.isStopped=!0;const{observers:r}=this,i=r.length,o=r.slice();for(let a=0;a<i;a++)o[a].error(n);this.observers.length=0}complete(){if(this.closed)throw new j;this.isStopped=!0;const{observers:n}=this,r=n.length,i=n.slice();for(let o=0;o<r;o++)i[o].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(n){if(this.closed)throw new j;return super._trySubscribe(n)}_subscribe(n){if(this.closed)throw new j;return this.hasError?(n.error(this.thrownError),c.EMPTY):this.isStopped?(n.complete(),c.EMPTY):(this.observers.push(n),new ue(this,n))}asObservable(){const n=new A;return n.source=this,n}}return t.create=(e,n)=>new ie(e,n),t})();class ie extends ${constructor(e,n){super(),this.destination=e,this.source=n}next(e){const{destination:n}=this;n&&n.next&&n.next(e)}error(e){const{destination:n}=this;n&&n.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:n}=this;return n?this.source.subscribe(e):c.EMPTY}}function ce(t){return t&&"function"==typeof t.schedule}function Te(t,e){return function(r){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new te(t,e))}}class te{constructor(e,n){this.project=e,this.thisArg=n}call(e,n){return n.subscribe(new Y(e,this.project,this.thisArg))}}class Y extends g{constructor(e,n,r){super(e),this.project=n,this.count=0,this.thisArg=r||this}_next(e){let n;try{n=this.project.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(n)}}const le=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()},ne="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",re=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function fe(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const me=t=>{if(t&&"function"==typeof t[S])return(t=>e=>{const n=t[S]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)})(t);if(re(t))return le(t);if(fe(t))return(t=>e=>(t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,p),e))(t);if(t&&"function"==typeof t[ne])return(t=>e=>{const n=t[ne]();for(;;){let r;try{r=n.next()}catch(i){return e.error(i),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e})(t);{const n=`You provided ${v(t)?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(n)}};function Ie(t,e){return new A(n=>{const r=new c;let i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}function Ge(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[S]}(t))return function(t,e){return new A(n=>{const r=new c;return r.add(e.schedule(()=>{const i=t[S]();r.add(i.subscribe({next(o){r.add(e.schedule(()=>n.next(o)))},error(o){r.add(e.schedule(()=>n.error(o)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(fe(t))return function(t,e){return new A(n=>{const r=new c;return r.add(e.schedule(()=>t.then(i=>{r.add(e.schedule(()=>{n.next(i),r.add(e.schedule(()=>n.complete()))}))},i=>{r.add(e.schedule(()=>n.error(i)))}))),r})}(t,e);if(re(t))return Ie(t,e);if(function(t){return t&&"function"==typeof t[ne]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new A(n=>{const r=new c;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[ne](),r.add(e.schedule(function(){if(n.closed)return;let o,a;try{const l=i.next();o=l.value,a=l.done}catch(l){return void n.error(l)}a?n.complete():(n.next(o),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof A?t:new A(me(t))}class Ye extends g{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class We extends g{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function ut(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(ut((i,o)=>Ge(t(i,o)).pipe(Te((a,l)=>e(i,a,o,l))),n)):("number"==typeof e&&(n=e),r=>r.lift(new nt(t,n)))}class nt{constructor(e,n=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=n}call(e,n){return n.subscribe(new Wt(e,this.project,this.concurrent))}}class Wt extends We{constructor(e,n,r=Number.POSITIVE_INFINITY){super(e),this.project=n,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let n;const r=this.index++;try{n=this.project(e,r)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(n)}_innerSub(e){const n=new Ye(this),r=this.destination;r.add(n);const i=function(t,e){if(e.closed)return;if(t instanceof A)return t.subscribe(e);let n;try{n=me(t)(e)}catch(r){e.error(r)}return n}(e,n);i!==n&&r.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Ae(t=Number.POSITIVE_INFINITY){return ut(N,t)}function ze(t,e){return e?Ie(t,e):new A(le(t))}function yt(){return function(e){return e.lift(new At(e))}}class At{constructor(e){this.connectable=e}call(e,n){const{connectable:r}=this;r._refCount++;const i=new Ot(e,r),o=n.subscribe(i);return i.closed||(i.connection=r.connect()),o}}class Ot extends g{constructor(e,n){super(e),this.connectable=n}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const n=e._refCount;if(n<=0)return void(this.connection=null);if(e._refCount=n-1,n>1)return void(this.connection=null);const{connection:r}=this,i=e._connection;this.connection=null,i&&(!r||i===r)&&i.unsubscribe()}}class zt extends A{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new c,e.add(this.source.subscribe(new Jn(this.getSubject(),this))),e.closed&&(this._connection=null,e=c.EMPTY)),e}refCount(){return yt()(this)}}const Qn=(()=>{const t=zt.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class Jn extends ee{constructor(e,n){super(e),this.connectable=n}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const n=e._connection;e._refCount=0,e._subject=null,e._connection=null,n&&n.unsubscribe()}}}function Fi(){return new $}function he(t){for(let e in t)if(t[e]===he)return e;throw Error("Could not find renamed property on target object.")}function Ee(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Ee).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function tt(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const gt=he({__forward_ref__:he});function dt(t){return t.__forward_ref__=dt,t.toString=function(){return Ee(this())},t}function Ze(t){return function(t){return"function"==typeof t&&t.hasOwnProperty(gt)&&t.__forward_ref__===dt}(t)?t():t}class cn extends Error{constructor(e,n){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(e,n)),this.code=e}}function Dn(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():function(t){return"string"==typeof t?t:null==t?"":String(t)}(t)}function Gn(t,e){const n=e?` in ${e}`:"";throw new cn("201",`No provider for ${Dn(t)} found${n}`)}function Tn(t,e){null==t&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function $t(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Pr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Er(t){return Jo(t,Ci)||Jo(t,ar)}function Jo(t,e){return t.hasOwnProperty(e)?t[e]:null}function Ui(t){return t&&(t.hasOwnProperty(wo)||t.hasOwnProperty(Yo))?t[wo]:null}const Ci=he({\u0275prov:he}),wo=he({\u0275inj:he}),ar=he({ngInjectableDef:he}),Yo=he({ngInjectorDef:he});var mt=(()=>((mt=mt||{})[mt.Default=0]="Default",mt[mt.Host=1]="Host",mt[mt.Self=2]="Self",mt[mt.SkipSelf=4]="SkipSelf",mt[mt.Optional=8]="Optional",mt))();let Vi;function Yr(t){const e=Vi;return Vi=t,e}function to(t,e,n){const r=Er(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&mt.Optional?null:void 0!==e?e:void Gn(Ee(t),"Injector")}function mr(t){return{toString:t}.toString()}var Yn=(()=>((Yn=Yn||{})[Yn.OnPush=0]="OnPush",Yn[Yn.Default=1]="Default",Yn))(),nn=(()=>((nn=nn||{})[nn.Emulated=0]="Emulated",nn[nn.None=2]="None",nn[nn.ShadowDom=3]="ShadowDom",nn))();const oa="undefined"!=typeof globalThis&&globalThis,Io="undefined"!=typeof window&&window,sa="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,no="undefined"!=typeof global&&global,Ht=oa||no||Io||sa,Ti={},Gt=[],dn=he({\u0275cmp:he}),Zr=he({\u0275dir:he}),ro=he({\u0275pipe:he}),io=he({\u0275mod:he}),Xo=he({\u0275loc:he}),_r=he({\u0275fac:he}),Xr=he({__NG_ELEMENT_ID__:he});let ua=0;function oo(t){return mr(()=>{const n={},r={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Yn.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Gt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||nn.Emulated,id:"c",styles:t.styles||Gt,_:null,setInput:null,schemas:t.schemas||null,tView:null},i=t.directives,o=t.features,a=t.pipes;return r.id+=ua++,r.inputs=Ro(t.inputs,n),r.outputs=Ro(t.outputs),o&&o.forEach(l=>l(r)),r.directiveDefs=i?()=>("function"==typeof i?i():i).map(wr):null,r.pipeDefs=a?()=>("function"==typeof a?a():a).map(Or):null,r})}function wr(t){return Nn(t)||function(t){return t[Zr]||null}(t)}function Or(t){return function(t){return t[ro]||null}(t)}const Bi={};function ei(t){return mr(()=>{const e={type:t.type,bootstrap:t.bootstrap||Gt,declarations:t.declarations||Gt,imports:t.imports||Gt,exports:t.exports||Gt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(Bi[t.id]=t.type),e})}function Ro(t,e){if(null==t)return Ti;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const On=oo;function Nn(t){return t[dn]||null}function Zn(t,e){const n=t[io]||null;if(!n&&!0===e)throw new Error(`Type ${Ee(t)} does not have '\u0275mod' property.`);return n}const H=20;function Le(t){return Array.isArray(t)&&"object"==typeof t[1]}function rt(t){return Array.isArray(t)&&!0===t[1]}function pt(t){return 0!=(8&t.flags)}function lt(t){return 2==(2&t.flags)}function Pt(t){return 1==(1&t.flags)}function _t(t){return null!==t.template}function ht(t){return 0!=(512&t[2])}function Hi(t,e){return t.hasOwnProperty(_r)?t[_r]:null}class Fu{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Uu(t){return t.type.prototype.ngOnChanges&&(t.setInput=Vu),bc}function bc(){const t=Bu(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===Ti)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Vu(t,e,n,r){const i=Bu(t)||function(t,e){return t[fa]=e}(t,{previous:Ti,current:null}),o=i.current||(i.current={}),a=i.previous,l=this.declaredInputs[n],D=a[l];o[l]=new Fu(D&&D.currentValue,e,a===Ti),t[r]=e}const fa="__ngSimpleChanges__";function Bu(t){return t[fa]||null}let es;function fn(t){return!!t.listen}const Hu={createRenderer:(t,e)=>void 0!==es?es:"undefined"!=typeof document?document:void 0};function bn(t){for(;Array.isArray(t);)t=t[0];return t}function Cr(t,e){return bn(e[t.index])}function va(t,e){return t.data[e]}function lr(t,e){const n=e[t];return Le(n)?n:n[0]}function Ca(t){return 128==(128&t[2])}function _i(t,e){return null==e?null:t[e]}function qu(t){t[18]=0}function Ta(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const bt={lFrame:J(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Gu(){return bt.bindingsEnabled}function Ke(){return bt.lFrame.lView}function jt(){return bt.lFrame.tView}function Ea(t){return bt.lFrame.contextLView=t,t[8]}function Sn(){let t=Wu();for(;null!==t&&64===t.type;)t=t.parent;return t}function Wu(){return bt.lFrame.currentTNode}function Fr(t,e){const n=bt.lFrame;n.currentTNode=t,n.isParent=e}function _a(){return bt.lFrame.isParent}function Oo(){return bt.isInCheckNoChangesMode}function qi(t){bt.isInCheckNoChangesMode=t}function kc(t,e){const n=bt.lFrame;n.bindingIndex=n.bindingRootIndex=t,wa(e)}function wa(t){bt.lFrame.currentDirectiveIndex=t}function Ia(t){bt.lFrame.currentQueryIndex=t}function V(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function O(t,e,n){if(n&mt.SkipSelf){let i=e,o=t;for(;!(i=i.parent,null!==i||n&mt.Host||(i=V(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;e=i,t=o}const r=bt.lFrame=G();return r.currentTNode=e,r.lView=t,!0}function U(t){const e=G(),n=t[1];bt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function G(){const t=bt.lFrame,e=null===t?null:t.child;return null===e?J(t):e}function J(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ae(){const t=bt.lFrame;return bt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const oe=ae;function ge(){const t=ae();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Me(){return bt.lFrame.selectedIndex}function $e(t){bt.lFrame.selectedIndex=t}function En(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:l,ngAfterViewInit:D,ngAfterViewChecked:x,ngOnDestroy:B}=o;a&&(t.contentHooks||(t.contentHooks=[])).push(-n,a),l&&((t.contentHooks||(t.contentHooks=[])).push(n,l),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,l)),D&&(t.viewHooks||(t.viewHooks=[])).push(-n,D),x&&((t.viewHooks||(t.viewHooks=[])).push(n,x),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,x)),null!=B&&(t.destroyHooks||(t.destroyHooks=[])).push(n,B)}}function Tr(t,e,n){fo(t,e,3,n)}function ii(t,e,n,r){(3&t[2])===n&&fo(t,e,n,r)}function Vr(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function fo(t,e,n,r){const o=null!=r?r:-1,a=e.length-1;let l=0;for(let D=void 0!==r?65535&t[18]:0;D<a;D++)if("number"==typeof e[D+1]){if(l=e[D],null!=r&&l>=r)break}else e[D]<0&&(t[18]+=65536),(l<o||-1==o)&&(is(t,n,e,D),t[18]=(4294901760&t[18])+D+2),D++}function is(t,e,n,r){const i=n[r]<0,o=n[r+1],l=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(l)}finally{}}}else try{o.call(l)}finally{}}class Da{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Qu(t,e,n){const r=fn(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const a=n[i++],l=n[i++],D=n[i++];r?t.setAttribute(e,l,D,a):e.setAttributeNS(a,l,D)}else{const a=o,l=n[++i];Lc(a)?r&&t.setProperty(e,a,l):r?t.setAttribute(e,a,l):e.setAttribute(a,l),i++}}return i}function Xh(t){return 3===t||4===t||6===t}function Lc(t){return 64===t.charCodeAt(0)}function Ju(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||ep(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function ep(t,e,n,r,i){let o=0,a=t.length;if(-1===e)a=-1;else for(;o<t.length;){const l=t[o++];if("number"==typeof l){if(l===e){a=-1;break}if(l>e){a=o-1;break}}}for(;o<t.length;){const l=t[o];if("number"==typeof l)break;if(l===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==a&&(t.splice(a,0,e),o=a+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function tp(t){return-1!==t}function os(t){return 32767&t}function ss(t,e){let n=function(t){return t>>16}(t),r=e;for(;n>0;)r=r[15],n--;return r}let Fc=!0;function Yu(t){const e=Fc;return Fc=t,e}let Q0=0;function Ma(t,e){const n=Vc(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Uc(r.data,t),Uc(e,null),Uc(r.blueprint,null));const i=Zu(t,e),o=t.injectorIndex;if(tp(i)){const a=os(i),l=ss(i,e),D=l[1].data;for(let x=0;x<8;x++)e[o+x]=l[a+x]|D[a+x]}return e[o+8]=i,o}function Uc(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Vc(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Zu(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const o=i[1],a=o.type;if(r=2===a?o.declTNode:1===a?i[6]:null,null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Xu(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Xr)&&(r=n[Xr]),null==r&&(r=n[Xr]=Q0++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function ip(t,e,n){if(n&mt.Optional)return t;Gn(e,"NodeInjector")}function op(t,e,n,r){if(n&mt.Optional&&void 0===r&&(r=null),0==(n&(mt.Self|mt.Host))){const i=t[9],o=Yr(void 0);try{return i?i.get(e,r,n&mt.Optional):to(e,r,n&mt.Optional)}finally{Yr(o)}}return ip(r,e,n)}function sp(t,e,n,r=mt.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Xr)?t[Xr]:void 0;return"number"==typeof e?e>=0?255&e:Z0:e}(n);if("function"==typeof o){if(!O(e,t,r))return r&mt.Host?ip(i,n,r):op(e,n,r,i);try{const a=o(r);if(null!=a||r&mt.Optional)return a;Gn(n)}finally{oe()}}else if("number"==typeof o){let a=null,l=Vc(t,e),D=-1,x=r&mt.Host?e[16][6]:null;for((-1===l||r&mt.SkipSelf)&&(D=-1===l?Zu(t,e):e[l+8],-1!==D&&lp(r,!1)?(a=e[1],l=os(D),e=ss(D,e)):l=-1);-1!==l;){const B=e[1];if(up(o,l,B.data)){const Q=X0(l,e,n,a,r,x);if(Q!==ap)return Q}D=e[l+8],-1!==D&&lp(r,e[1].data[l+8]===x)&&up(o,l,e)?(a=B,l=os(D),e=ss(D,e)):l=-1}}}return op(e,n,r,i)}const ap={};function Z0(){return new as(Sn(),Ke())}function X0(t,e,n,r,i,o){const a=e[1],l=a.data[t+8],B=function(t,e,n,r,i){const o=t.providerIndexes,a=e.data,l=1048575&o,D=t.directiveStart,B=o>>20,X=i?l+B:t.directiveEnd;for(let de=r?l:l+B;de<X;de++){const pe=a[de];if(de<D&&n===pe||de>=D&&pe.type===n)return de}if(i){const de=a[D];if(de&&_t(de)&&de.type===n)return D}return null}(l,a,n,null==r?lt(l)&&Fc:r!=a&&0!=(3&l.type),i&mt.Host&&o===l);return null!==B?Aa(e,a,B,l):ap}function Aa(t,e,n,r){let i=t[n];const o=e.data;if(function(t){return t instanceof Da}(i)){const a=i;a.resolving&&function(t,e){throw new cn("200",`Circular dependency in DI detected for ${t}`)}(Dn(o[n]));const l=Yu(a.canSeeViewProviders);a.resolving=!0;const D=a.injectImpl?Yr(a.injectImpl):null;O(t,r,mt.Default);try{i=t[n]=a.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const a=Uu(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,a),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,a)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==D&&Yr(D),Yu(l),a.resolving=!1,oe()}}return i}function up(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function lp(t,e){return!(t&mt.Self||t&mt.Host&&e)}class as{constructor(e,n){this._tNode=e,this._lView=n}get(e,n){return sp(this._tNode,this._lView,e,void 0,n)}}const ls="__parameters__";function ko(t,e,n){return mr(()=>{const r=function(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const a=new i(...o);return l.annotation=a,l;function l(D,x,B){const Q=D.hasOwnProperty(ls)?D[ls]:Object.defineProperty(D,ls,{value:[]})[ls];for(;Q.length<=B;)Q.push(null);return(Q[B]=Q[B]||[]).push(a),D}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class rn{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=$t({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}function wi(t,e){t.forEach(n=>Array.isArray(n)?wi(n,e):e(n))}function nl(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function No(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const Na={},Wc="__NG_DI_FLAG__",fs="ngTempTokenPath",hT=/\n/gm,zc="__source",Kc=he({provide:String,useValue:he});let xa;function hs(t){const e=xa;return xa=t,e}function gT(t,e=mt.Default){if(void 0===xa)throw new Error("inject() must be called from an injection context");return null===xa?to(t,void 0,e):xa.get(t,e&mt.Optional?null:void 0,e)}function Vt(t,e=mt.Default){return(Vi||gT)(Ze(t),e)}function xo(t){const e=[];for(let n=0;n<t.length;n++){const r=Ze(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let i,o=mt.Default;for(let a=0;a<r.length;a++){const l=r[a],D=mT(l);"number"==typeof D?-1===D?i=l.token:o|=D:i=l}e.push(Vt(i,o))}else e.push(Vt(r))}return e}function La(t,e){return t[Wc]=e,t.prototype[Wc]=e,t}function mT(t){return t[Wc]}function gp(t,e,n,r){const i=t[fs];throw e[zc]&&i.unshift(e[zc]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=Ee(e);if(Array.isArray(e))i=e.map(Ee).join(" -> ");else if("object"==typeof e){let o=[];for(let a in e)if(e.hasOwnProperty(a)){let l=e[a];o.push(a+":"+("string"==typeof l?JSON.stringify(l):Ee(l)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(hT,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[fs]=null,t}const Fa=La(ko("Inject",t=>({token:t})),-1),Si=La(ko("Optional"),8),Lo=La(ko("SkipSelf"),4),xp="__ngContext__";function rr(t,e){t[xp]=e}function rd(t){const e=function(t){return t[xp]||null}(t);return e?Array.isArray(e)?e:e.lView:null}function ll(t){return t.ngOriginalError}function lb(t,...e){t.error(...e)}class Uo{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e),r=this._findContext(e),i=function(t){return t&&t.ngErrorLogger||lb}(e);i(this._console,"ERROR",e),n&&i(this._console,"ORIGINAL ERROR",n),r&&i(this._console,"ERROR CONTEXT",r)}_findContext(e){return e?function(t){return t.ngDebugContext}(e)||this._findContext(ll(e)):null}_findOriginalError(e){let n=e&&ll(e);for(;n&&ll(n);)n=ll(n);return n||null}}const qp=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ht))();function Ri(t){return t instanceof Function?t():t}var Rr=(()=>((Rr=Rr||{})[Rr.Important=1]="Important",Rr[Rr.DashCase=2]="DashCase",Rr))();function sd(t,e){return undefined(t,e)}function $a(t){const e=t[3];return rt(e)?e[3]:e}function ad(t){return Qp(t[13])}function ud(t){return Qp(t[4])}function Qp(t){for(;null!==t&&!rt(t);)t=t[4];return t}function ys(t,e,n,r,i){if(null!=r){let o,a=!1;rt(r)?o=r:Le(r)&&(a=!0,r=r[0]);const l=bn(r);0===t&&null!==n?null==i?tg(e,n,l):Vo(e,n,l,i||null,!0):1===t&&null!==n?Vo(e,n,l,i||null,!0):2===t?function(t,e,n){const r=dl(t,e);r&&function(t,e,n,r){fn(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,l,a):3===t&&e.destroyNode(l),null!=o&&function(t,e,n,r,i){const o=n[7];o!==bn(n)&&ys(e,t,r,o,i);for(let l=10;l<n.length;l++){const D=n[l];qa(D[1],D,t,e,r,o)}}(e,t,o,n,i)}}function cd(t,e,n){return fn(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Yp(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ta(i,-1)),n.splice(r,1)}function dd(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&Yp(i,r),e>0&&(t[n-1][4]=r[4]);const o=No(t,10+e);!function(t,e){qa(t,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function Zp(t,e){if(!(256&e[2])){const n=e[11];fn(n)&&n.destroyNode&&qa(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return fd(t[1],t);for(;e;){let n=null;if(Le(e))n=e[13];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)Le(e)&&fd(e[1],e),e=e[3];null===e&&(e=t),Le(e)&&fd(e[1],e),n=e&&e[4]}e=n}}(e)}}function fd(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Da)){const o=n[r+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){const l=i[o[a]],D=o[a+1];try{D.call(l)}finally{}}else try{o.call(i)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const a=n[o+1],l="function"==typeof a?a(e):bn(e[a]),D=r[i=n[o+2]],x=n[o+3];"boolean"==typeof x?l.removeEventListener(n[o],D,x):x>=0?r[i=x]():r[i=-x].unsubscribe(),o+=2}else{const a=r[i=n[o+1]];n[o].call(a)}if(null!==r){for(let o=i+1;o<r.length;o++)r[o]();e[7]=null}}(t,e),1===e[1].type&&fn(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&rt(e[3])){n!==e[3]&&Yp(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Xp(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const i=t.data[r.directiveStart].encapsulation;if(i===nn.None||i===nn.Emulated)return null}return Cr(r,n)}(t,e.parent,n)}function Vo(t,e,n,r,i){fn(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function tg(t,e,n){fn(t)?t.appendChild(e,n):e.appendChild(n)}function ng(t,e,n,r,i){null!==r?Vo(t,e,n,r,i):tg(t,e,n)}function dl(t,e){return fn(t)?t.parentNode(e):e.parentNode}let og=function(t,e,n){return 40&t.type?Cr(t,n):null};function fl(t,e,n,r){const i=Xp(t,r,e),o=e[11],l=function(t,e,n){return og(t,e,n)}(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let D=0;D<n.length;D++)ng(o,i,n[D],l,!1);else ng(o,i,n,l,!1)}function hl(t,e){if(null!==e){const n=e.type;if(3&n)return Cr(e,t);if(4&n)return pd(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return hl(t,r);{const i=t[e.index];return rt(i)?pd(-1,i):bn(i)}}if(32&n)return sd(e,t)()||bn(t[e.index]);{const r=ag(t,e);return null!==r?Array.isArray(r)?r[0]:hl($a(t[16]),r):hl(t,e.next)}}return null}function ag(t,e){return null!==e?t[16][6].projection[e.projection]:null}function pd(t,e){const n=10+t+1;if(n<e.length){const r=e[n],i=r[1].firstChild;if(null!==i)return hl(r,i)}return e[7]}function gd(t,e,n,r,i,o,a){for(;null!=n;){const l=r[n.index],D=n.type;if(a&&0===e&&(l&&rr(bn(l),r),n.flags|=4),64!=(64&n.flags))if(8&D)gd(t,e,n.child,r,i,o,!1),ys(e,t,i,l,o);else if(32&D){const x=sd(n,r);let B;for(;B=x();)ys(e,t,i,B,o);ys(e,t,i,l,o)}else 16&D?lg(t,e,r,n,i,o):ys(e,t,i,l,o);n=a?n.projectionNext:n.next}}function qa(t,e,n,r,i,o){gd(n,r,t.firstChild,e,i,o,!1)}function lg(t,e,n,r,i,o){const a=n[16],D=a[6].projection[r.projection];if(Array.isArray(D))for(let x=0;x<D.length;x++)ys(e,t,i,D[x],o);else gd(t,e,D,a[3],i,o,!0)}function cg(t,e,n){fn(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function md(t,e,n){fn(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function dg(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}const fg="ng-template";function xb(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==dg(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function hg(t){return 4===t.type&&t.value!==fg}function Lb(t,e,n){return e===(4!==t.type||n?t.value:fg)}function Fb(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Xh(t[e]))return e;return t.length}(i);let a=!1;for(let l=0;l<e.length;l++){const D=e[l];if("number"!=typeof D){if(!a)if(4&r){if(r=2|1&r,""!==D&&!Lb(t,D,n)||""===D&&1===e.length){if(oi(r))return!1;a=!0}}else{const x=8&r?D:e[++l];if(8&r&&null!==t.attrs){if(!xb(t.attrs,x,n)){if(oi(r))return!1;a=!0}continue}const Q=Ub(8&r?"class":D,i,hg(t),n);if(-1===Q){if(oi(r))return!1;a=!0;continue}if(""!==x){let X;X=Q>o?"":i[Q+1].toLowerCase();const de=8&r?X:null;if(de&&-1!==dg(de,x,0)||2&r&&x!==X){if(oi(r))return!1;a=!0}}}}else{if(!a&&!oi(r)&&!oi(D))return!1;if(a&&oi(D))continue;a=!1,r=D|1&r}}return oi(r)||a}function oi(t){return 0==(1&t)}function Ub(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){const a=e[i];if(a===t)return i;if(3===a||6===a)o=!0;else{if(1===a||2===a){let l=e[++i];for(;"string"==typeof l;)l=e[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=o?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function pg(t,e,n=!1){for(let r=0;r<e.length;r++)if(Fb(t,e[r],n))return!0;return!1}function gg(t,e){return t?":not("+e.trim()+")":e}function $b(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let a=t[n];if("string"==typeof a)if(2&r){const l=t[++n];i+="["+a+(l.length>0?'="'+l+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""!==i&&!oi(a)&&(e+=gg(o,i),i=""),r=a,o=o||!oi(r);n++}return""!==i&&(e+=gg(o,i)),e}const Rt={};function pl(t){mg(jt(),Ke(),Me()+t,Oo())}function mg(t,e,n,r){if(!r)if(3==(3&e[2])){const o=t.preOrderCheckHooks;null!==o&&Tr(e,o,n)}else{const o=t.preOrderHooks;null!==o&&ii(e,o,0,n)}$e(n)}function Ig(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const a=t.data[o];Ia(i),a.contentQueries(2,e[o],o)}}}function Ga(t,e,n,r,i,o,a,l,D,x){const B=e.blueprint.slice();return B[0]=i,B[2]=140|r,qu(B),B[3]=B[15]=t,B[8]=n,B[10]=a||t&&t[10],B[11]=l||t&&t[11],B[12]=D||t&&t[12]||null,B[9]=x||t&&t[9]||null,B[6]=o,B[16]=2==e.type?t[16]:B,B}function vs(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Wu(),a=_a(),D=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=D),null!==o&&(a?null==o.child&&null!==D.parent&&(o.child=D):null===o.next&&(o.next=D)),D}(t,e,n,r,i),bt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const a=function(){const t=bt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===a?-1:a.injectorIndex}return Fr(o,!0),o}function Cs(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Wa(t,e,n){U(e);try{const r=t.viewQuery;null!==r&&xd(1,r,n);const i=t.template;null!==i&&Dg(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Ig(t,e),t.staticViewQueries&&xd(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)EE(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,ge()}}function Ts(t,e,n,r){const i=e[2];if(256==(256&i))return;U(e);const o=Oo();try{qu(e),function(t){bt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&Dg(t,e,n,2,r);const a=3==(3&i);if(!o)if(a){const x=t.preOrderCheckHooks;null!==x&&Tr(e,x,null)}else{const x=t.preOrderHooks;null!==x&&ii(e,x,0,null),Vr(e,0)}if(function(t){for(let e=ad(t);null!==e;e=ud(e)){if(!e[2])continue;const n=e[9];for(let r=0;r<n.length;r++){const i=n[r],o=i[3];0==(1024&i[2])&&Ta(o,1),i[2]|=1024}}}(e),function(t){for(let e=ad(t);null!==e;e=ud(e))for(let n=10;n<e.length;n++){const r=e[n],i=r[1];Ca(r)&&Ts(i,r,i.template,r[8])}}(e),null!==t.contentQueries&&Ig(t,e),!o)if(a){const x=t.contentCheckHooks;null!==x&&Tr(e,x)}else{const x=t.contentHooks;null!==x&&ii(e,x,1),Vr(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)$e(~i);else{const o=i,a=n[++r],l=n[++r];kc(a,o),l(2,e[o])}}}finally{$e(-1)}}(t,e);const l=t.components;null!==l&&function(t,e){for(let n=0;n<e.length;n++)bE(t,e[n])}(e,l);const D=t.viewQuery;if(null!==D&&xd(2,D,r),!o)if(a){const x=t.viewCheckHooks;null!==x&&Tr(e,x)}else{const x=t.viewHooks;null!==x&&ii(e,x,2),Vr(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ta(e[3],-1))}finally{ge()}}function nE(t,e,n,r){const i=e[10],o=!Oo(),a=function(t){return 4==(4&t[2])}(e);try{o&&!a&&i.begin&&i.begin(),a&&Wa(t,e,r),Ts(t,e,n,r)}finally{o&&!a&&i.end&&i.end()}}function Dg(t,e,n,r,i){const o=Me(),a=2&r;try{$e(-1),a&&e.length>H&&mg(t,e,H,Oo()),n(r,i)}finally{$e(o)}}function Dd(t,e,n){!Gu()||(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Ma(n,e),rr(r,e);const a=n.initialInputs;for(let l=i;l<o;l++){const D=t.data[l],x=_t(D);x&&mE(e,n,D);const B=Aa(e,t,l,n);rr(B,e),null!==a&&yE(0,l-i,B,D,0,a),x&&(lr(n.index,e)[8]=B)}}(t,e,n,Cr(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,a=n.index,l=bt.lFrame.currentDirectiveIndex;try{$e(a);for(let D=r;D<i;D++){const x=t.data[D],B=e[D];wa(D),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&Lg(x,B)}}finally{$e(-1),wa(l)}}(t,e,n))}function Rd(t,e,n=Cr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const a=r[o+1],l=-1===a?n(e,t):t[a];t[i++]=l}}}function Mg(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=vl(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function vl(t,e,n,r,i,o,a,l,D,x){const B=H+r,Q=B+i,X=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Rt);return n}(B,Q),de="function"==typeof x?x():x;return X[1]={type:t,blueprint:X,template:n,queries:null,viewQuery:l,declTNode:e,data:X.slice().fill(null,B),bindingStartIndex:B,expandoStartIndex:Q,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:D,consts:de,incompleteFirstPass:!1}}function kg(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Md(t,e,n,r){let i=!1;if(Gu()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const a=r[o];pg(n,a.selectors,!1)&&(i||(i=[]),Xu(Ma(n,e),t,a.type),_t(a)?(Fg(t,n),i.unshift(a)):i.push(a))}return i}(t,e,n),a=null===r?null:{"":-1};if(null!==o){i=!0,Ug(n,t.data.length,o.length);for(let B=0;B<o.length;B++){const Q=o[B];Q.providersResolver&&Q.providersResolver(Q)}let l=!1,D=!1,x=Cs(t,e,o.length,null);for(let B=0;B<o.length;B++){const Q=o[B];n.mergedAttrs=Ju(n.mergedAttrs,Q.hostAttrs),Vg(t,n,e,x,Q),gE(x,Q,a),null!==Q.contentQueries&&(n.flags|=8),(null!==Q.hostBindings||null!==Q.hostAttrs||0!==Q.hostVars)&&(n.flags|=128);const X=Q.type.prototype;!l&&(X.ngOnChanges||X.ngOnInit||X.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),l=!0),!D&&(X.ngOnChanges||X.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),D=!0),x++}!function(t,e){const r=e.directiveEnd,i=t.data,o=e.attrs,a=[];let l=null,D=null;for(let x=e.directiveStart;x<r;x++){const B=i[x],Q=B.inputs,X=null===o||hg(e)?null:vE(Q,o);a.push(X),l=kg(Q,x,l),D=kg(B.outputs,x,D)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=16),l.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=a,e.inputs=l,e.outputs=D}(t,n)}a&&function(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const o=n[e[i+1]];if(null==o)throw new cn("301",`Export of name '${e[i+1]}' not found!`);r.push(e[i],o)}}}(n,r,a)}return n.mergedAttrs=Ju(n.mergedAttrs,n.attrs),i}function xg(t,e,n,r,i,o){const a=o.hostBindings;if(a){let l=t.hostBindingOpCodes;null===l&&(l=t.hostBindingOpCodes=[]);const D=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(l)!=D&&l.push(D),l.push(r,i,a)}}function Lg(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Fg(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function gE(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;_t(e)&&(n[""]=t)}}function Ug(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Vg(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=Hi(i.type)),a=new Da(o,_t(i),null);t.blueprint[r]=a,n[r]=a,xg(t,e,0,r,Cs(t,n,i.hostVars,Rt),i)}function mE(t,e,n){const r=Cr(e,t),i=Mg(n),o=t[10],a=Cl(t,Ga(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=a}function yE(t,e,n,r,i,o){const a=o[e];if(null!==a){const l=r.setInput;for(let D=0;D<a.length;){const x=a[D++],B=a[D++],Q=a[D++];null!==l?r.setInput(n,Q,x,B):n[B]=Q}}}function vE(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Bg(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function bE(t,e){const n=lr(e,t);if(Ca(n)){const r=n[1];80&n[2]?Ts(r,n,r.template,n[8]):n[5]>0&&Pd(n)}}function Pd(t){for(let r=ad(t);null!==r;r=ud(r))for(let i=10;i<r.length;i++){const o=r[i];if(1024&o[2]){const a=o[1];Ts(a,o,a.template,o[8])}else o[5]>0&&Pd(o)}const n=t[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=lr(n[r],t);Ca(i)&&i[5]>0&&Pd(i)}}function EE(t,e){const n=lr(e,t),r=n[1];(function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(r,n),Wa(r,n,n[8])}function Cl(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Od(t){for(;t;){t[2]|=64;const e=$a(t);if(ht(t)&&!e)return t;t=e}return null}function Nd(t,e,n){const r=e[10];r.begin&&r.begin();try{Ts(t,e,t.template,n)}catch(i){throw Gg(e,i),i}finally{r.end&&r.end()}}function jg(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=rd(n),i=r[1];nE(i,r,i.template,n)}}(t[8])}function xd(t,e,n){Ia(0),e(t,n)}const DE=(()=>Promise.resolve(null))();function Hg(t){return t[7]||(t[7]=[])}function $g(t){return t.cleanup||(t.cleanup=[])}function Gg(t,e){const n=t[9],r=n?n.get(Uo,null):null;r&&r.handleError(e)}function Wg(t,e,n,r,i){for(let o=0;o<n.length;){const a=n[o++],l=n[o++],D=e[a],x=t.data[a];null!==x.setInput?x.setInput(D,i,r,l):D[l]=i}}function Tl(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let a=0;a<e.length;a++){const l=e[a];"number"==typeof l?o=l:1==o?i=tt(i,l):2==o&&(r=tt(r,l+": "+e[++a]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const bs=new rn("INJECTOR",-1);class zg{get(e,n=Na){if(n===Na){const r=new Error(`NullInjectorError: No provider for ${Ee(e)}!`);throw r.name="NullInjectorError",r}return n}}const za=new rn("Set Injector scope."),Ka={},AE={};let Ld;function Kg(){return void 0===Ld&&(Ld=new zg),Ld}function Qg(t,e=null,n=null,r){return new OE(t,n,e||Kg(),r)}class OE{constructor(e,n,r,i=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const o=[];n&&wi(n,l=>this.processProvider(l,e,n)),wi([e],l=>this.processInjectorType(l,[],o)),this.records.set(bs,Es(void 0,this));const a=this.records.get(za);this.scope=null!=a?a.value:null,this.source=i||("object"==typeof e?null:Ee(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,n=Na,r=mt.Default){this.assertNotDestroyed();const i=hs(this),o=Yr(void 0);try{if(!(r&mt.SkipSelf)){let l=this.records.get(e);if(void 0===l){const D=function(t){return"function"==typeof t||"object"==typeof t&&t instanceof rn}(e)&&Er(e);l=D&&this.injectableDefInScope(D)?Es(Fd(e),Ka):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(r&mt.Self?Kg():this.parent).get(e,n=r&mt.Optional&&n===Na?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[fs]=a[fs]||[]).unshift(Ee(e)),i)throw a;return gp(a,e,"R3InjectorError",this.source)}throw a}finally{Yr(o),hs(i)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((r,i)=>e.push(Ee(i))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,n,r){if(!(e=Ze(e)))return!1;let i=Ui(e);const o=null==i&&e.ngModule||void 0,a=void 0===o?e:o,l=-1!==r.indexOf(a);if(void 0!==o&&(i=Ui(o)),null==i)return!1;if(null!=i.imports&&!l){let B;r.push(a);try{wi(i.imports,Q=>{this.processInjectorType(Q,n,r)&&(void 0===B&&(B=[]),B.push(Q))})}finally{}if(void 0!==B)for(let Q=0;Q<B.length;Q++){const{ngModule:X,providers:de}=B[Q];wi(de,pe=>this.processProvider(pe,X,de||Gt))}}this.injectorDefTypes.add(a);const D=Hi(a)||(()=>new a);this.records.set(a,Es(D,Ka));const x=i.providers;if(null!=x&&!l){const B=e;wi(x,Q=>this.processProvider(Q,B,x))}return void 0!==o&&void 0!==e.providers}processProvider(e,n,r){let i=_s(e=Ze(e))?e:Ze(e&&e.provide);const o=function(t,e,n){return Yg(t)?Es(void 0,t.useValue):Es(function(t,e,n){let r;if(_s(t)){const i=Ze(t);return Hi(i)||Fd(i)}if(Yg(t))r=()=>Ze(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...xo(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Vt(Ze(t.useExisting));else{const i=Ze(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return Hi(i)||Fd(i);r=()=>new i(...xo(t.deps))}return r}(t),Ka)}(e);if(_s(e)||!0!==e.multi)this.records.get(i);else{let a=this.records.get(i);a||(a=Es(void 0,Ka,!0),a.factory=()=>xo(a.multi),this.records.set(i,a)),i=e,a.multi.push(e)}this.records.set(i,o)}hydrate(e,n){return n.value===Ka&&(n.value=AE,n.value=n.factory()),"object"==typeof n.value&&n.value&&function(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this.onDestroy.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=Ze(e.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function Fd(t){const e=Er(t),n=null!==e?e.factory:Hi(t);if(null!==n)return n;if(t instanceof rn)throw new Error(`Token ${Ee(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const r=function(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?");throw new Error(`Can't resolve all parameters for ${Ee(t)}: (${r.join(", ")}).`)}const n=function(t){const e=t&&(t[Ci]||t[ar]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Es(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Yg(t){return null!==t&&"object"==typeof t&&Kc in t}function _s(t){return"function"==typeof t}const Zg=function(t,e,n){return function(t,e=null,n=null,r){const i=Qg(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};class tn{static create(e,n){return Array.isArray(e)?Zg(e,n,""):Zg(e.providers,e.parent,e.name||"")}}function XE(t,e){En(rd(t)[1],Sn())}tn.THROW_IF_NOT_FOUND=Na,tn.NULL=new zg,tn.\u0275prov=$t({token:tn,providedIn:"any",factory:()=>Vt(bs)}),tn.__NG_ELEMENT_ID__=-1;let bl=null;function ws(){if(!bl){const t=Ht.Symbol;if(t&&t.iterator)bl=t.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<e.length;++n){const r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(bl=r)}}}return bl}function Ja(t){return!!qd(t)&&(Array.isArray(t)||!(t instanceof Map)&&ws()in t)}function qd(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function _l(t,e,n,r,i,o,a,l){const D=Ke(),x=jt(),B=t+H,Q=x.firstCreatePass?function(t,e,n,r,i,o,a,l,D){const x=e.consts,B=vs(e,t,4,a||null,_i(x,l));Md(e,n,B,_i(x,D)),En(e,B);const Q=B.tViews=vl(2,B,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,x);return null!==e.queries&&(e.queries.template(e,B),Q.queries=e.queries.embeddedTView(B)),B}(B,x,D,e,n,r,i,o,a):x.data[B];Fr(Q,!1);const X=D[11].createComment("");fl(x,D,X,Q),rr(X,D),Cl(D,D[B]=Bg(X,D,X,Q)),Pt(Q)&&Dd(x,D,Q),null!=a&&Rd(D,Q,l)}function Ut(t,e=mt.Default){const n=Ke();return null===n?Vt(t,e):sp(Sn(),n,Ze(t),e)}function Za(t,e,n){const r=Ke();return function(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}(r,bt.lFrame.bindingIndex++,e)&&function(t,e,n,r,i,o,a,l){const D=Cr(e,n);let B,x=e.inputs;!l&&null!=x&&(B=x[r])?(Wg(t,n,B,r,i),lt(e)&&function(t,e){const n=lr(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=a?a(i,e.value||"",r):i,fn(o)?o.setProperty(D,r,i):Lc(r)||(D.setProperty?D.setProperty(r,i):D[r]=i))}(jt(),function(){const t=bt.lFrame;return va(t.tView,t.selectedIndex)}(),r,t,e,r[11],n,!1),Za}function Qd(t,e,n,r,i){const a=i?"class":"style";Wg(t,n,e.inputs[a],a,r)}function Pi(t,e,n,r){const i=Ke(),o=jt(),a=H+t,l=i[11],D=i[a]=cd(l,e,bt.lFrame.currentNamespace),x=o.firstCreatePass?function(t,e,n,r,i,o,a){const l=e.consts,x=vs(e,t,2,i,_i(l,o));return Md(e,n,x,_i(l,a)),null!==x.attrs&&Tl(x,x.attrs,!1),null!==x.mergedAttrs&&Tl(x,x.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,x),x}(a,o,i,0,e,n,r):o.data[a];Fr(x,!0);const B=x.mergedAttrs;null!==B&&Qu(l,D,B);const Q=x.classes;null!==Q&&md(l,D,Q);const X=x.styles;null!==X&&cg(l,D,X),64!=(64&x.flags)&&fl(o,i,D,x),0===bt.lFrame.elementDepthCount&&rr(D,i),bt.lFrame.elementDepthCount++,Pt(x)&&(Dd(o,i,x),function(t,e,n){if(pt(e)){const i=e.directiveEnd;for(let o=e.directiveStart;o<i;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}}(o,x,i)),null!==r&&Rd(i,x)}function Oi(){let t=Sn();_a()?bt.lFrame.isParent=!1:(t=t.parent,Fr(t,!1));const e=t;bt.lFrame.elementDepthCount--;const n=jt();n.firstCreatePass&&(En(n,t),pt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Qd(n,e,Ke(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Qd(n,e,Ke(),e.stylesWithoutHost,!1)}function Jd(){return Ke()}function Yd(t){return!!t&&"function"==typeof t.then}const Hm=function(t){return!!t&&"function"==typeof t.subscribe};function Sl(t,e,n,r){const i=Ke(),o=jt(),a=Sn();return function(t,e,n,r,i,o,a,l){const D=Pt(r),B=t.firstCreatePass&&$g(t),Q=e[8],X=Hg(e);let de=!0;if(3&r.type||l){const Se=Cr(r,e),Qe=l?l(Se):Se,He=X.length,ct=l?vt=>l(bn(vt[r.index])):r.index;if(fn(n)){let vt=null;if(!l&&D&&(vt=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const a=i[o];if(a===n&&i[o+1]===r){const l=e[7],D=i[o+2];return l.length>D?l[D]:null}"string"==typeof a&&(o+=2)}return null}(t,e,i,r.index)),null!==vt)(vt.__ngLastListenerFn__||vt).__ngNextListenerFn__=o,vt.__ngLastListenerFn__=o,de=!1;else{o=Zd(r,e,Q,o,!1);const Lt=n.listen(Qe,i,o);X.push(o,Lt),B&&B.push(i,ct,He,He+1)}}else o=Zd(r,e,Q,o,!0),Qe.addEventListener(i,o,a),X.push(o),B&&B.push(i,ct,He,a)}else o=Zd(r,e,Q,o,!1);const pe=r.outputs;let Fe;if(de&&null!==pe&&(Fe=pe[i])){const Se=Fe.length;if(Se)for(let Qe=0;Qe<Se;Qe+=2){const Vn=e[Fe[Qe]][Fe[Qe+1]].subscribe(o),Kr=X.length;X.push(o,Vn),B&&B.push(i,r.index,Kr,-(Kr+1))}}}(o,i,i[11],a,t,e,!!n,r),Sl}function Gm(t,e,n,r){try{return!1!==n(r)}catch(i){return Gg(t,i),!1}}function Zd(t,e,n,r,i){return function o(a){if(a===Function)return r;const l=2&t.flags?lr(t.index,e):e;0==(32&e[2])&&Od(l);let D=Gm(e,0,r,a),x=o.__ngNextListenerFn__;for(;x;)D=Gm(e,0,x,a)&&D,x=x.__ngNextListenerFn__;return i&&!1===D&&(a.preventDefault(),a.returnValue=!1),D}}function Il(t=1){return function(t){return(bt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,bt.lFrame.contextLView))[8]}(t)}function eu(t,e=""){const n=Ke(),r=jt(),i=t+H,o=r.firstCreatePass?vs(r,i,1,e,null):r.data[i],a=n[i]=function(t,e){return fn(t)?t.createText(e):t.createTextNode(e)}(n[11],e);fl(r,n,a,o),Fr(o,!1)}const jo=void 0;var Sw=["en",[["a","p"],["AM","PM"],jo],[["AM","PM"],jo,jo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],jo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],jo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",jo,"{1} 'at' {0}",jo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Ls={};function Fy(t){return t in Ls||(Ls[t]=Ht.ng&&Ht.ng.common&&Ht.ng.common.locales&&Ht.ng.common.locales[t]),Ls[t]}var at=(()=>((at=at||{})[at.LocaleId=0]="LocaleId",at[at.DayPeriodsFormat=1]="DayPeriodsFormat",at[at.DayPeriodsStandalone=2]="DayPeriodsStandalone",at[at.DaysFormat=3]="DaysFormat",at[at.DaysStandalone=4]="DaysStandalone",at[at.MonthsFormat=5]="MonthsFormat",at[at.MonthsStandalone=6]="MonthsStandalone",at[at.Eras=7]="Eras",at[at.FirstDayOfWeek=8]="FirstDayOfWeek",at[at.WeekendRange=9]="WeekendRange",at[at.DateFormat=10]="DateFormat",at[at.TimeFormat=11]="TimeFormat",at[at.DateTimeFormat=12]="DateTimeFormat",at[at.NumberSymbols=13]="NumberSymbols",at[at.NumberFormats=14]="NumberFormats",at[at.CurrencyCode=15]="CurrencyCode",at[at.CurrencySymbol=16]="CurrencySymbol",at[at.CurrencyName=17]="CurrencyName",at[at.Currencies=18]="Currencies",at[at.Directionality=19]="Directionality",at[at.PluralCase=20]="PluralCase",at[at.ExtraData=21]="ExtraData",at))();const Rl="en-US";let Uy=Rl;function nf(t){Tn(t,"Expected localeId to be defined"),"string"==typeof t&&(Uy=t.toLowerCase().replace(/_/g,"-"))}class lv{}const dv="ngComponent";class IS{resolveComponentFactory(e){throw function(t){const e=Error(`No component factory found for ${Ee(t)}. Did you add it to @NgModule.entryComponents?`);return e[dv]=t,e}(e)}}class Ho{}function kl(...t){}function Us(t,e){return new di(Cr(t,e))}Ho.NULL=new IS;const MS=function(){return Us(Sn(),Ke())};let di=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=MS,t})();class Nl{}let df=(()=>{class t{}return t.\u0275prov=$t({token:t,providedIn:"root",factory:()=>null}),t})();class ff{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const pv=new ff("12.2.2");class gv{constructor(){}supports(e){return Ja(e)}create(e){return new xS(e)}}const NS=(t,e)=>e;class xS{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||NS}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const a=!r||n&&n.currentIndex<yv(r,i,o)?n:r,l=yv(a,i,o),D=a.currentIndex;if(a===r)i--,r=r._nextRemoved;else if(n=n._next,null==a.previousIndex)i++;else{o||(o=[]);const x=l-i,B=D-i;if(x!=B){for(let X=0;X<x;X++){const de=X<o.length?o[X]:o[X]=0,pe=de+X;B<=pe&&pe<x&&(o[X]=de+1)}o[a.previousIndex]=B-x}}l!==D&&e(a,l,D)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!Ja(e))throw new Error(`Error trying to diff '${Ee(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,a,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let l=0;l<this.length;l++)o=e[l],a=this._trackByFn(l,o),null!==n&&Object.is(n.trackById,a)?(r&&(n=this._verifyReinsertion(n,o,a,l)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,a,l),r=!0),n=n._next}else i=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[ws()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,l=>{a=this._trackByFn(i,l),null!==n&&Object.is(n.trackById,a)?(r&&(n=this._verifyReinsertion(n,l,a,i)),Object.is(n.item,l)||this._addIdentityChange(n,l)):(n=this._mismatch(n,l,a,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new LS(n,r),o,i),e}_verifyReinsertion(e,n,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new mv),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new mv),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class LS{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class FS{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class mv{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new FS,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function yv(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class vv{constructor(){}supports(e){return e instanceof Map||qd(e)}create(){return new US}}class US{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||qd(e)))throw new Error(`Error trying to diff '${Ee(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const o=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,n);const o=i._prev,a=i._next;return o&&(o._next=a),a&&(a._prev=o),i._next=null,i._prev=null,i}const r=new VS(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}}class VS{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Cv(){return new ou([new gv])}let ou=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||Cv()),deps:[[t,new Lo,new Si]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new Error(`Cannot find a differ supporting object '${n}' of type '${function(t){return t.name||typeof t}(n)}'`)}}return t.\u0275prov=$t({token:t,providedIn:"root",factory:Cv}),t})();function Tv(){return new Vs([new vv])}let Vs=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||Tv()),deps:[[t,new Lo,new Si]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(r)return r;throw new Error(`Cannot find a differ supporting object '${n}'`)}}return t.\u0275prov=$t({token:t,providedIn:"root",factory:Tv}),t})();function xl(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(bn(o)),rt(o))for(let l=10;l<o.length;l++){const D=o[l],x=D[1].firstChild;null!==x&&xl(D[1],D,x,r)}const a=n.type;if(8&a)xl(t,e,n.child,r);else if(32&a){const l=sd(n,e);let D;for(;D=l();)r.push(D)}else if(16&a){const l=ag(e,n);if(Array.isArray(l))r.push(...l);else{const D=$a(e[16]);xl(D[1],D,l,r,!0)}}n=i?n.projectionNext:n.next}return r}class su{constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,n=e[1];return xl(n,e,n.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(rt(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(dd(e,r),No(n,r))}this._attachedToViewContainer=!1}Zp(this._lView[1],this._lView)}onDestroy(e){!function(t,e,n,r){const i=Hg(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&$g(t).push(r,i.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){Od(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Nd(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){qi(!0);try{Nd(t,e,n)}finally{qi(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(t,e){qa(t,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class jS extends su{constructor(e){super(e),this._view=e}detectChanges(){jg(this._view)}checkNoChanges(){!function(t){qi(!0);try{jg(t)}finally{qi(!1)}}(this._view)}get context(){return null}}const zS=[new vv],QS=new ou([new gv]),JS=new Vs(zS),ZS=function(){return function(t,e){return 4&t.type?new eI(e,t,Us(t,e)):null}(Sn(),Ke())};let Qi=(()=>{class t{}return t.__NG_ELEMENT_ID__=ZS,t})();const XS=Qi,eI=class extends XS{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(e){const n=this._declarationTContainer.tViews,r=Ga(this._declarationLView,n,e,16,null,n.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(n)),Wa(n,r,e),new su(r)}};class $o{}const iI=function(){return function(t,e){let n;const r=e[t.index];if(rt(r))n=r;else{let i;if(8&t.type)i=bn(r);else{const o=e[11];i=o.createComment("");const a=Cr(t,e);Vo(o,dl(o,a),i,function(t,e){return fn(t)?t.nextSibling(e):e.nextSibling}(o,a),!1)}e[t.index]=n=Bg(r,e,i,t),Cl(e,n)}return new bv(n,t,e)}(Sn(),Ke())};let xi=(()=>{class t{}return t.__NG_ELEMENT_ID__=iI,t})();const sI=xi,bv=class extends sI{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Us(this._hostTNode,this._hostLView)}get injector(){return new as(this._hostTNode,this._hostLView)}get parentInjector(){const e=Zu(this._hostTNode,this._hostLView);if(tp(e)){const n=ss(e,this._hostLView),r=os(e);return new as(n[1].data[r+8],n)}return new as(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=Ev(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,r){const i=e.createEmbeddedView(n||{});return this.insert(i,r),i}createComponent(e,n,r,i,o){const a=r||this.parentInjector;if(!o&&null==e.ngModule&&a){const D=a.get($o,null);D&&(o=D)}const l=e.create(a,i,void 0,o);return this.insert(l.hostView,n),l}insert(e,n){const r=e._lView,i=r[1];if(function(t){return rt(t[3])}(r)){const B=this.indexOf(e);if(-1!==B)this.detach(B);else{const Q=r[3],X=new bv(Q,Q[6],Q[3]);X.detach(X.indexOf(e))}}const o=this._adjustIndex(n),a=this._lContainer;!function(t,e,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],nl(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const a=e[17];null!==a&&n!==a&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(a,e);const l=e[19];null!==l&&l.insertView(t),e[2]|=128}(i,r,a,o);const l=pd(o,a),D=r[11],x=dl(D,a[7]);return null!==x&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,qa(t,r,n,1,i,o)}(i,a[6],D,r,x,l),e.attachToViewContainerRef(),nl(hf(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=Ev(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=dd(this._lContainer,n);r&&(No(hf(this._lContainer),n),Zp(r[1],r))}detach(e){const n=this._adjustIndex(e,-1),r=dd(this._lContainer,n);return r&&null!=No(hf(this._lContainer),n)?new su(r):null}_adjustIndex(e,n=0){return null==e?this.length+n:e}};function Ev(t){return t[8]}function hf(t){return t[8]||(t[8]=[])}const $s={};class $v extends Ho{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Nn(e);return new Gv(n,this.ngModule)}}function qv(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const nD=new rn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>qp});class Gv extends lv{constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function(t){return t.map($b).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return qv(this.componentDef.inputs)}get outputs(){return qv(this.componentDef.outputs)}create(e,n,r,i){const o=(i=i||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,$s,i);return o!==$s||r===$s?o:e.get(n,r,i)}}}(e,i.injector):e,a=o.get(Nl,Hu),l=o.get(df,null),D=a.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",B=r?function(t,e,n){if(fn(t))return t.selectRootElement(e,n===nn.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(D,r,this.componentDef.encapsulation):cd(a.createRenderer(null,this.componentDef),x,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(x)),Q=this.componentDef.onPush?576:528,X=function(t,e){return{components:[],scheduler:t||qp,clean:DE,playerHandler:e||null,flags:0}}(),de=vl(0,null,null,1,0,null,null,null,null,null),pe=Ga(null,de,X,Q,null,null,a,D,l,o);let Fe,Se;U(pe);try{const Qe=function(t,e,n,r,i,o){const a=n[1];n[20]=t;const D=vs(a,20,2,"#host",null),x=D.mergedAttrs=e.hostAttrs;null!==x&&(Tl(D,x,!0),null!==t&&(Qu(i,t,x),null!==D.classes&&md(i,t,D.classes),null!==D.styles&&cg(i,t,D.styles)));const B=r.createRenderer(t,e),Q=Ga(n,Mg(e),null,e.onPush?64:16,n[20],D,r,B,o||null,null);return a.firstCreatePass&&(Xu(Ma(D,n),a,e.type),Fg(a,D),Ug(D,n.length,1)),Cl(n,Q),n[20]=Q}(B,this.componentDef,pe,a,D);if(B)if(r)Qu(D,B,["ng-version",pv.full]);else{const{attrs:He,classes:ct}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!oi(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);He&&Qu(D,B,He),ct&&ct.length>0&&md(D,B,ct.join(" "))}if(Se=va(de,H),void 0!==n){const He=Se.projection=[];for(let ct=0;ct<this.ngContentSelectors.length;ct++){const vt=n[ct];He.push(null!=vt?Array.from(vt):null)}}Fe=function(t,e,n,r,i){const o=n[1],a=function(t,e,n){const r=Sn();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Vg(t,r,e,Cs(t,e,1,null),n));const i=Aa(e,t,r.directiveStart,r);rr(i,e);const o=Cr(r,e);return o&&rr(o,e),i}(o,n,e);if(r.components.push(a),t[8]=a,i&&i.forEach(D=>D(a,e)),e.contentQueries){const D=Sn();e.contentQueries(1,a,D.directiveStart)}const l=Sn();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||($e(l.index),xg(n[1],l,0,l.directiveStart,l.directiveEnd,e),Lg(e,a)),a}(Qe,this.componentDef,pe,X,[XE]),Wa(de,pe,null)}finally{ge()}return new oD(this.componentType,Fe,Us(Se,pe),pe,Se)}}class oD extends class{}{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=n,this.hostView=this.changeDetectorRef=new jS(i),this.componentType=e}get injector(){return new as(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const qs=new Map;class uD extends $o{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new $v(this);const r=Zn(e),i=function(t){return t[Xo]||null}(e);i&&nf(i),this._bootstrapComponents=Ri(r.bootstrap),this._r3Injector=Qg(e,n,[{provide:$o,useValue:this},{provide:Ho,useValue:this.componentFactoryResolver}],Ee(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,n=tn.THROW_IF_NOT_FOUND,r=mt.Default){return e===tn||e===$o||e===bs?this:this._r3Injector.get(e,n,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class If extends class{}{constructor(e){super(),this.moduleType=e,null!==Zn(e)&&function(t){const e=new Set;!function n(r){const i=Zn(r,!0),o=i.id;null!==o&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${Ee(e)} vs ${Ee(e.name)}`)}(o,qs.get(o),r),qs.set(o,r));const a=Ri(i.imports);for(const l of a)e.has(l)||(e.add(l),n(l))}(t)}(e)}create(e){return new uD(this.moduleType,e)}}function Df(t){return e=>{setTimeout(t,void 0,e)}}const Ji=class extends ${constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){var i,o,a;let l=e,D=n||(()=>null),x=r;if(e&&"object"==typeof e){const Q=e;l=null===(i=Q.next)||void 0===i?void 0:i.bind(Q),D=null===(o=Q.error)||void 0===o?void 0:o.bind(Q),x=null===(a=Q.complete)||void 0===a?void 0:a.bind(Q)}this.__isAsync&&(D=Df(D),l&&(l=Df(l)),x&&(x=Df(x)));const B=super.subscribe({next:l,error:D,complete:x});return e instanceof c&&e.add(B),B}};Symbol;const ql=new rn("Application Initializer");let Ws=(()=>{class t{constructor(n){this.appInits=n,this.resolve=kl,this.reject=kl,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(Yd(o))n.push(o);else if(Hm(o)){const a=new Promise((l,D)=>{o.subscribe({complete:l,error:D})});n.push(a)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(Vt(ql,8))},t.\u0275prov=$t({token:t,factory:t.\u0275fac}),t})();const vu=new rn("AppId"),hR={provide:vu,useFactory:function(){return`${Uf()}${Uf()}${Uf()}`},deps:[]};function Uf(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const bC=new rn("Platform Initializer"),Vf=new rn("Platform ID"),pR=new rn("appBootstrapListener");let Bf=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=$t({token:t,factory:t.\u0275fac}),t})();const vo=new rn("LocaleId"),EC=new rn("DefaultCurrencyCode");class mR{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}const jf=function(t){return new If(t)},yR=jf,vR=function(t){return Promise.resolve(jf(t))},_C=function(t){const e=jf(t),r=Ri(Zn(t).declarations).reduce((i,o)=>{const a=Nn(o);return a&&i.push(new Gv(a)),i},[]);return new mR(e,r)},CR=_C,TR=function(t){return Promise.resolve(_C(t))};let Wl=(()=>{class t{constructor(){this.compileModuleSync=yR,this.compileModuleAsync=vR,this.compileModuleAndAllComponentsSync=CR,this.compileModuleAndAllComponentsAsync=TR}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=$t({token:t,factory:t.\u0275fac}),t})();const _R=(()=>Promise.resolve(0))();function Hf(t){"undefined"==typeof Zone?_R.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class zn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ji(!1),this.onMicrotaskEmpty=new Ji(!1),this.onStable=new Ji(!1),this.onError=new Ji(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function(){let t=Ht.requestAnimationFrame,e=Ht.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Ht,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,qf(t),t.isCheckStableRunning=!0,$f(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),qf(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,a,l)=>{try{return wC(t),n.invokeTask(i,o,a,l)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),SC(t)}},onInvoke:(n,r,i,o,a,l,D)=>{try{return wC(t),n.invoke(i,o,a,l,D)}finally{t.shouldCoalesceRunChangeDetection&&e(),SC(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,qf(t),$f(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!zn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(zn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+i,e,SR,kl,kl);try{return o.runTask(a,n,r)}finally{o.cancelTask(a)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const SR={};function $f(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function qf(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function wC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function SC(t){t._nesting--,$f(t)}class RR{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ji,this.onMicrotaskEmpty=new Ji,this.onStable=new Ji,this.onError=new Ji}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}let Gf=(()=>{class t{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{zn.assertNotInAngularZone(),Hf(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Hf(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,r,i){return[]}}return t.\u0275fac=function(n){return new(n||t)(Vt(zn))},t.\u0275prov=$t({token:t,factory:t.\u0275fac}),t})(),IC=(()=>{class t{constructor(){this._applications=new Map,Wf.addToWindow(this)}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Wf.findTestabilityInTree(this,n,r)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=$t({token:t,factory:t.\u0275fac}),t})();class MR{addToWindow(e){}findTestabilityInTree(e,n,r){return null}}let Wf=new MR,DC=!0,RC=!1;let pi;const AC=new rn("AllowMultipleToken");function PC(t,e,n=[]){const r=`Platform: ${e}`,i=new rn(r);return(o=[])=>{let a=OC();if(!a||a.injector.get(AC,!1))if(t)t(n.concat(o).concat({provide:i,useValue:!0}));else{const l=n.concat(o).concat({provide:i,useValue:!0},{provide:za,useValue:"platform"});!function(t){if(pi&&!pi.destroyed&&!pi.injector.get(AC,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");pi=t.get(kC);const e=t.get(bC,null);e&&e.forEach(n=>n())}(tn.create({providers:l,name:r}))}return function(t){const e=OC();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function OC(){return pi&&!pi.destroyed?pi:null}let kC=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const l=function(t,e){let n;return n="noop"===t?new RR:("zone.js"===t?void 0:t)||new zn({enableLongStackTrace:(RC=!0,DC),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),D=[{provide:zn,useValue:l}];return l.run(()=>{const x=tn.create({providers:D,parent:this.injector,name:n.moduleType.name}),B=n.create(x),Q=B.injector.get(Uo,null);if(!Q)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return l.runOutsideAngular(()=>{const X=l.onError.subscribe({next:de=>{Q.handleError(de)}});B.onDestroy(()=>{zf(this._modules,B),X.unsubscribe()})}),function(t,e,n){try{const r=n();return Yd(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(Q,l,()=>{const X=B.injector.get(Ws);return X.runInitializers(),X.donePromise.then(()=>(nf(B.injector.get(vo,Rl)||Rl),this._moduleDoBootstrap(B),B))})})}bootstrapModule(n,r=[]){const i=NC({},r);return function(t,e,n){const r=new If(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(Cu);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new Error(`The module ${Ee(n.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(Vt(tn))},t.\u0275prov=$t({token:t,factory:t.\u0275fac}),t})();function NC(t,e){return Array.isArray(e)?e.reduce(NC,t):Object.assign(Object.assign({},t),e)}let Cu=(()=>{class t{constructor(n,r,i,o,a){this._zone=n,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=o,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new A(x=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{x.next(this._stable),x.complete()})}),D=new A(x=>{let B;this._zone.runOutsideAngular(()=>{B=this._zone.onStable.subscribe(()=>{zn.assertNotInAngularZone(),Hf(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,x.next(!0))})})});const Q=this._zone.onUnstable.subscribe(()=>{zn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{x.next(!1)}))});return()=>{B.unsubscribe(),Q.unsubscribe()}});this.isStable=function(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return ce(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof A?t[0]:Ae(e)(ze(t,n))}(l,D.pipe(t=>yt()(function(t,e){return function(r){let i;i="function"==typeof t?t:function(){return t};const o=Object.create(r,Qn);return o.source=r,o.subjectFactory=i,o}}(Fi)(t))))}bootstrap(n,r){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let i;i=n instanceof lv?n:this._componentFactoryResolver.resolveComponentFactory(n),this.componentTypes.push(i.componentType);const o=function(t){return t.isBoundToModule}(i)?void 0:this._injector.get($o),l=i.create(tn.NULL,[],r||i.selector,o),D=l.location.nativeElement,x=l.injector.get(Gf,null),B=x&&l.injector.get(IC);return x&&B&&B.registerApplication(D,x),l.onDestroy(()=>{this.detachView(l.hostView),zf(this.components,l),B&&B.unregisterApplication(D)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;zf(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(pR,[]).concat(this._bootstrapListeners).forEach(i=>i(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(n){return new(n||t)(Vt(zn),Vt(tn),Vt(Uo),Vt(Ho),Vt(Ws))},t.\u0275prov=$t({token:t,factory:t.\u0275fac}),t})();function zf(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const nM=PC(null,"core",[{provide:Vf,useValue:"unknown"},{provide:kC,deps:[tn]},{provide:IC,deps:[]},{provide:Bf,deps:[]}]),aM=[{provide:Cu,useClass:Cu,deps:[zn,tn,Uo,Ho,Ws]},{provide:nD,deps:[zn],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(n){e.push(n)}}},{provide:Ws,useClass:Ws,deps:[[new Si,ql]]},{provide:Wl,useClass:Wl,deps:[]},hR,{provide:ou,useFactory:function(){return QS},deps:[]},{provide:Vs,useFactory:function(){return JS},deps:[]},{provide:vo,useFactory:function(t){return nf(t=t||"undefined"!=typeof $localize&&$localize.locale||Rl),t},deps:[[new Fa(vo),new Si,new Lo]]},{provide:EC,useValue:"USD"}];let lM=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(Vt(Cu))},t.\u0275mod=ei({type:t}),t.\u0275inj=Pr({providers:aM}),t})(),nc=null;function wu(){return nc}const Kn=new rn("DocumentToken");var An=(()=>((An=An||{})[An.Zero=0]="Zero",An[An.One=1]="One",An[An.Two=2]="Two",An[An.Few=3]="Few",An[An.Many=4]="Many",An[An.Other=5]="Other",An))();const yA=function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Fy(e);if(n)return n;const r=e.split("-")[0];if(n=Fy(r),n)return n;if("en"===r)return Sw;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[at.PluralCase]};class fc{}let WA=(()=>{class t extends fc{constructor(n){super(),this.locale=n}getPluralCategory(n,r){switch(yA(r||this.locale)(n)){case An.Zero:return"zero";case An.One:return"one";case An.Two:return"two";case An.Few:return"few";case An.Many:return"many";default:return"other"}}}return t.\u0275fac=function(n){return new(n||t)(Vt(vo))},t.\u0275prov=$t({token:t,factory:t.\u0275fac}),t})(),C0=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new XA,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){T0("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){T0("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)(Ut(xi),Ut(Qi))},t.\u0275dir=On({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class XA{constructor(){this.$implicit=null,this.ngIf=null}}function T0(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Ee(e)}'.`)}let SP=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=ei({type:t}),t.\u0275inj=Pr({providers:[{provide:fc,useClass:WA}]}),t})();class Th extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(t){nc||(nc=t)}(new Th)}onAndCancel(e,n,r){return e.addEventListener(n,r,!1),()=>{e.removeEventListener(n,r,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=(Du=Du||document.querySelector("base"),Du?Du.getAttribute("href"):null);return null==n?null:function(t){hc=hc||document.createElement("a"),hc.setAttribute("href",t);const e=hc.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Du=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let hc,Du=null;const S0=new rn("TRANSITION_ID"),xP=[{provide:ql,useFactory:function(t,e,n){return()=>{n.get(Ws).donePromise.then(()=>{const r=wu(),i=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[S0,Kn,tn],multi:!0}];class bh{static init(){!function(t){Wf=t}(new bh)}addToWindow(e){Ht.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},Ht.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ht.getAllAngularRootElements=()=>e.getAllRootElements(),Ht.frameworkStabilizers||(Ht.frameworkStabilizers=[]),Ht.frameworkStabilizers.push(r=>{const i=Ht.getAllAngularTestabilities();let o=i.length,a=!1;const l=function(D){a=a||D,o--,0==o&&r(a)};i.forEach(function(D){D.whenStable(l)})})}findTestabilityInTree(e,n,r){if(null==n)return null;const i=e.getTestability(n);return null!=i?i:r?wu().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null}}let LP=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=$t({token:t,factory:t.\u0275fac}),t})();const Ru=new rn("EventManagerPlugins");let gc=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>i.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const a=i[o];if(a.supports(n))return this._eventNameToPlugin.set(n,a),a}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(Vt(Ru),Vt(zn))},t.\u0275prov=$t({token:t,factory:t.\u0275fac}),t})();class Eh{constructor(e){this._doc=e}addGlobalEventListener(e,n,r){const i=wu().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let D0=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=$t({token:t,factory:t.\u0275fac}),t})(),Mu=(()=>{class t extends D0{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,i){n.forEach(o=>{const a=this._doc.createElement("style");a.textContent=o,i.push(r.appendChild(a))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(R0),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(n,i,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(R0))}}return t.\u0275fac=function(n){return new(n||t)(Vt(Kn))},t.\u0275prov=$t({token:t,factory:t.\u0275fac}),t})();function R0(t){wu().remove(t)}const _h={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},wh=/%COMP%/g;function mc(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?mc(t,i,n):(i=i.replace(wh,t),n.push(i))}return n}function P0(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Sh=(()=>{class t{constructor(n,r,i){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Ih(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case nn.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new YP(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(n),i}case 1:case nn.ShadowDom:return new ZP(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const i=mc(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(Vt(gc),Vt(Mu),Vt(vu))},t.\u0275prov=$t({token:t,factory:t.\u0275fac}),t})();class Ih{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,n){return n?document.createElementNS(_h[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){e.appendChild(n)}insertBefore(e,n,r){e&&e.insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=_h[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=_h[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Rr.DashCase|Rr.Important)?e.style.setProperty(n,r,i&Rr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Rr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,P0(r)):this.eventManager.addEventListener(e,n,P0(r))}}class YP extends Ih{constructor(e,n,r,i){super(e),this.component=r;const o=mc(i+"-"+r.id,r.styles,[]);n.addStyles(o),this.contentAttr=function(t){return"_ngcontent-%COMP%".replace(wh,t)}(i+"-"+r.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(wh,t)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class ZP extends Ih{constructor(e,n,r,i){super(e),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=mc(i.id,i.styles,[]);for(let a=0;a<o.length;a++){const l=document.createElement("style");l.textContent=o[a],this.shadowRoot.appendChild(l)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let XP=(()=>{class t extends Eh{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return t.\u0275fac=function(n){return new(n||t)(Vt(Kn))},t.\u0275prov=$t({token:t,factory:t.\u0275fac}),t})();const N0=["alt","control","meta","shift"],sO={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},x0={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},aO={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let uO=(()=>{class t extends Eh{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const o=t.parseEventName(r),a=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>wu().onAndCancel(n,o.domEventName,a))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=t._normalizeKey(r.pop());let a="";if(N0.forEach(D=>{const x=r.indexOf(D);x>-1&&(r.splice(x,1),a+=D+".")}),a+=o,0!=r.length||0===o.length)return null;const l={};return l.domEventName=i,l.fullKey=a,l}static getEventFullKey(n){let r="",i=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&x0.hasOwnProperty(e)&&(e=x0[e]))}return sO[e]||e}(n);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),N0.forEach(o=>{o!=i&&aO[o](n)&&(r+=o+".")}),r+=i,r}static eventCallback(n,r,i){return o=>{t.getEventFullKey(o)===n&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){switch(n){case"esc":return"escape";default:return n}}}return t.\u0275fac=function(n){return new(n||t)(Vt(Kn))},t.\u0275prov=$t({token:t,factory:t.\u0275fac}),t})();const mO=PC(nM,"browser",[{provide:Vf,useValue:"browser"},{provide:bC,useValue:function(){Th.makeCurrent(),bh.init()},multi:!0},{provide:Kn,useFactory:function(){return function(t){es=t}(document),document},deps:[]}]),yO=[[],{provide:za,useValue:"root"},{provide:Uo,useFactory:function(){return new Uo},deps:[]},{provide:Ru,useClass:XP,multi:!0,deps:[Kn,zn,Vf]},{provide:Ru,useClass:uO,multi:!0,deps:[Kn]},[],{provide:Sh,useClass:Sh,deps:[gc,Mu,vu]},{provide:Nl,useExisting:Sh},{provide:D0,useExisting:Mu},{provide:Mu,useClass:Mu,deps:[Kn]},{provide:Gf,useClass:Gf,deps:[zn]},{provide:gc,useClass:gc,deps:[Ru,zn]},{provide:class{},useClass:LP,deps:[]},[]];let vO=(()=>{class t{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:t,providers:[{provide:vu,useValue:n.appId},{provide:S0,useExisting:vu},xP]}}}return t.\u0275fac=function(n){return new(n||t)(Vt(t,12))},t.\u0275mod=ei({type:t}),t.\u0275inj=Pr({providers:yO,imports:[SP,lM]}),t})();"undefined"!=typeof window&&window;var yc=u(8239),IO=u(5436);class Ph{constructor(){this.middlewares={}}static getInstance(){return this._instance||(this._instance=new Ph),this._instance}subscribe(e,n){this.middlewares[e]=n}create(){return console.log("[CustomStore][create]"),window.WebChat.createStore({},({dispatch:n})=>r=>i=>{let o=i;if(i&&i.payload)for(const a of Object.keys(this.middlewares)){const l=this.middlewares[a];if(l.applicable(o)){const D=l.apply(o);D.dispatchAction&&n(D.dispatchAction),D.nextAction&&(o=D.nextAction)}}return r(o)})}}var Qs=u(8139);const F0=t=>{if(t){const e=t.split(/\s/).reduce((n,r)=>n+r.slice(0,1),"");return e.length>1?e.substring(0,2).toUpperCase():t.substring(0,2).toUpperCase()}return""};var Js=(()=>(function(t){t.Sending="sending",t.SendFailed="send failed",t.Sent="sent"}(Js||(Js={})),Js))();class NO{constructor(e){this.dataMaskingRules=e,console.log("[DataMaskingRules]"),console.log(this.dataMaskingRules)}applicable(e){const{text:n}=e.payload;return!!(Object.keys(this.dataMaskingRules).length>0&&n&&"WEB_CHAT/SEND_MESSAGE"===e.type)}apply(e){return{dispatchAction:null,nextAction:this.applyDataMasking(e)}}applyDataMasking(e){let{text:r}=e.payload;if(Object.keys(this.dataMaskingRules).length>0)for(const i of Object.values(this.dataMaskingRules)){const o=new RegExp(i,"g");let a;for(;a=o.exec(r);){const l=a[0].replace(/./g,"#");r=r.replace(a[0],l)}}return e.payload.text=r,e}}const vc_omnichannelConfig_orgId="d367c413-e0b9-408b-ae1c-382499b369ae",vc_omnichannelConfig_orgUrl="https://omnichannel-crm.omnichannelengagementhub.com",vc_omnichannelConfig_widgetId="3a352b95-5d67-4e47-af28-eca029b03928";let Oh=(()=>{class t{}return t.canUploadAttachment=!1,t})();function Cc(t,e){return new A(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,a=0;for(let l=0;l<r;l++){const D=Ge(t[l]);let x=!1;n.add(D.subscribe({next:B=>{x||(x=!0,a++),i[l]=B},error:B=>n.error(B),complete:()=>{o++,(o===r||!x)&&(a===r&&n.next(e?e.reduce((B,Q,X)=>(B[Q]=i[X],B),{}):i),n.complete())}}))}})}class jO extends c{constructor(e,n){super()}schedule(e,n=0){return this}}class HO extends jO{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){if(this.closed)return this;this.state=e;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(i,this.id,n),this}requestAsyncId(e,n,r=0){return setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!==r&&this.delay===r&&!1===this.pending)return n;clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=!!o&&o||new Error(o)}if(r)return this.unsubscribe(),i}_unsubscribe(){const e=this.id,n=this.scheduler,r=n.actions,i=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&r.splice(i,1),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null}}let U0=(()=>{class t{constructor(n,r=t.now){this.SchedulerAction=n,this.now=r}schedule(n,r=0,i){return new this.SchedulerAction(this,n).schedule(i,r)}}return t.now=()=>Date.now(),t})();class bo extends U0{constructor(e,n=U0.now){super(e,()=>bo.delegate&&bo.delegate!==this?bo.delegate.now():n()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,n=0,r){return bo.delegate&&bo.delegate!==this?bo.delegate.schedule(e,n,r):super.schedule(e,n,r)}flush(e){const{actions:n}=this;if(this.active)return void n.push(e);let r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this.active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const GO=new class extends bo{}(class extends HO{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!==r&&r>0||null===r&&this.delay>0?super.requestAsyncId(e,n,r):e.flush(this)}}),WO=new A(t=>t.complete());class zr{constructor(e,n,r){this.kind=e,this.value=n,this.error=r,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,n,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return n&&n(this.error);case"C":return r&&r()}}accept(e,n,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,n,r)}toObservable(){switch(this.kind){case"N":return function(...t){let e=t[t.length-1];return ce(e)?(t.pop(),Ie(t,e)):ze(t)}(this.value);case"E":return function(t,e){return new A(n=>n.error(t))}(this.error);case"C":return function(t){return t?function(t){return new A(e=>t.schedule(()=>e.complete()))}(t):WO}()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new zr("N",e):zr.undefinedValueNotification}static createError(e){return new zr("E",void 0,e)}static createComplete(){return zr.completeNotification}}zr.completeNotification=new zr("C"),zr.undefinedValueNotification=new zr("N",void 0);class Tc extends g{constructor(e,n,r=0){super(e),this.scheduler=n,this.delay=r}static dispatch(e){const{notification:n,destination:r}=e;n.observe(r),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(Tc.dispatch,this.delay,new XO(e,this.destination)))}_next(e){this.scheduleMessage(zr.createNext(e))}_error(e){this.scheduleMessage(zr.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(zr.createComplete()),this.unsubscribe()}}class XO{constructor(e,n){this.notification=e,this.destination=n}}class V0 extends ${constructor(e=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const n=this._events;n.push(e),n.length>this._bufferSize&&n.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new e1(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;let a;if(this.closed)throw new j;if(this.isStopped||this.hasError?a=c.EMPTY:(this.observers.push(e),a=new ue(this,e)),i&&e.add(e=new Tc(e,i)),n)for(let l=0;l<o&&!e.closed;l++)e.next(r[l]);else for(let l=0;l<o&&!e.closed;l++)e.next(r[l].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),a}_getNow(){return(this.scheduler||GO).now()}_trimBufferThenGetEvents(){const e=this._getNow(),n=this._bufferSize,r=this._windowTime,i=this._events,o=i.length;let a=0;for(;a<o&&!(e-i[a].time<r);)a++;return o>n&&(a=Math.max(a,o-n)),a>0&&i.splice(0,a),i}}class e1{constructor(e,n){this.time=e,this.value=n}}let t1=(()=>{class t{constructor(n){this.document=n,this._loadedLibraries={}}lazyLoad(){return function(...t){if(1===t.length){const e=t[0];if(f(e))return Cc(e,null);if(v(e)&&Object.getPrototypeOf(e)===Object.prototype){const n=Object.keys(e);return Cc(n.map(r=>e[r]),n)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Cc(t=1===t.length&&f(t[0])?t[0]:t,null).pipe(Te(n=>e(...n)))}return Cc(t,null)}([this.loadScript("https://cdn.botframework.com/botframework-webchat/4.9.2/webchat.js")])}loadScript(n){if(this._loadedLibraries[n])return this._loadedLibraries[n].asObservable();this._loadedLibraries[n]=new V0;const r=this.document.createElement("script");return r.type="text/javascript",r.async=!0,r.src=n,r.onload=()=>{this._loadedLibraries[n].next(),this._loadedLibraries[n].complete()},this.document.body.appendChild(r),this._loadedLibraries[n].asObservable()}loadStyle(n){if(this._loadedLibraries[n])return this._loadedLibraries[n].asObservable();this._loadedLibraries[n]=new V0;const r=this.document.createElement("link");return r.type="text/css",r.href=n,r.rel="stylesheet",r.onload=()=>{this._loadedLibraries[n].next(),this._loadedLibraries[n].complete()},document.getElementsByTagName("head")[0].appendChild(r),this._loadedLibraries[n].asObservable()}}return t.\u0275fac=function(n){return new(n||t)(Vt(Kn))},t.\u0275prov=$t({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function n1(t,e){1&t&&(Pi(0,"div",8),Pi(1,"span",9),eu(2," \u{1f440} "),Oi(),Oi())}function r1(t,e){if(1&t){const n=Jd();Pi(0,"div",3),Pi(1,"div",4),eu(2,"LiveChat with Omnichannel Chat SDK "),Pi(3,"span",5),Sl("click",function(){return Ea(n),Il().endChat()}),eu(4," \u274c "),Oi(),Oi(),_l(5,n1,3,0,"div",6),function(t,e,n,r){Pi(t,e,n,r),Oi()}(6,"div",7),Oi()}if(2&t){const n=Il();pl(5),Za("ngIf",n.loading)}}function i1(t,e){if(1&t){const n=Jd();Pi(0,"div",10),Sl("click",function(){return Ea(n),Il().startChat()}),Pi(1,"span"),eu(2," \u{1f44b} "),Oi(),Oi()}}const B0=(()=>{const t={orgId:vc_omnichannelConfig_orgId||"",orgUrl:vc_omnichannelConfig_orgUrl||"",widgetId:vc_omnichannelConfig_widgetId||""},e=new URLSearchParams(window.location.search);return null!==e.get("orgUrl")&&(t.orgUrl=e.get("orgUrl")),null!==e.get("orgId")&&(t.orgId=e.get("orgId")),null!==e.get("widgetId")&&(t.widgetId=e.get("widgetId")),t})(),j0=(()=>{const t={telemetry:{disable:!1,ariaTelemetryKey:""}},e=new URLSearchParams(window.location.search);return null!==e.get("telemetry")&&(t.telemetry.disable="true"!=e.get("telemetry")),null!==e.get("ariaTelemetryKey")&&(t.telemetry.ariaTelemetryKey=e.get("ariaTelemetryKey")||""),t})(),H0=(()=>{const t={disable:!0},e=new URLSearchParams(window.location.search);return null!==e.get("debug")&&(t.disable="true"!=e.get("debug")),t})();console.log("%c [OmnichannelConfig]","background-color:#001433;color:#fff"),console.log(B0),console.log("%c [debugConfig]","background-color:#001433;color:#fff"),console.log(H0),console.log("%c [telemetryConfig]","background-color:#001433;color:#fff"),console.log(j0);const o1=(console.log("[createAvatarMiddleware]"),()=>e=>n=>{console.log("[AvatarMiddleware]");const{activity:{channelData:{tags:r},from:{name:i},text:o},fromUser:a}=n;return console.log(n),r&&r.includes("system")?(console.log(`[AvatarMiddleware][Message][System] ${o}`),Qs.createElement("div",null,"\u2757")):null!=a&&(a?a?(console.log(`[AvatarMiddleware][Message][Customer] ${o}`),Qs.createElement("div",{className:"webchat__avatar"},Qs.createElement("p",{className:"webchat__avatar_initials"}," ",F0(i)||"CU","  "))):e(n):(console.log(`[AvatarMiddleware][Message][Agent] ${o}`),Qs.createElement("div",{className:"webchat__avatar"},Qs.createElement("p",{className:"webchat__avatar_initials"}," ",F0(i)," "))))}),s1=(console.log("[createActivityMiddleware]"),()=>e=>n=>{if(console.log("%c [ActivityMiddleware]","background: #2a9fd4; color: #fff"),console.log(n),n.activity){if(n.activity.channelData&&n.activity.channelData.tags&&n.activity.channelData.tags.includes("system"))return console.log(`%c [ActivityMiddleware][Message][System] ${n.activity.text}`,"background: #2a9fd4; color: #fff"),r=>Qs.createElement("div",{key:n.activity.id,className:"system-message"},e(n)(r));if(void 0===n.activity.text||null==n.activity.text)return e(n);"bot"===n.activity.from.role&&console.log(`%c [ActivityMiddleware][Message][Agent] ${n.activity.text}`,"background: #2a9fd4; color: #fff"),"user"===n.activity.from.role&&console.log(`%c [ActivityMiddleware][Message][Customer] ${n.activity.text}`,"background: #2a9fd4; color: #fff")}return e(n)}),a1=()=>e=>n=>{console.log("%c [activityStatusMiddleware]","background: #238636; color: #fff"),console.log(n);let r="";(t=>t.activity.channelData&&t.activity.channelData.tags&&t.activity.channelData.tags.includes("system"))(n)?r="System":(t=>"bot"===t.activity.from.role)(n)?r="Agent":(t=>"user"===t.activity.from.role)(n)&&(r="Customer"),console.log(`%c [activityStatusMiddleware][Message][${r}] ${n.activity.text}`,"background: #238636; color: #fff"),n.sendState===Js.Sent?console.log(`%c [activityStatusMiddleware][Message][${r}][Status] Sent!`,"background: #238636; color: #fff"):n.sendState===Js.Sending?console.log(`%c [activityStatusMiddleware][Message][${r}][Status] Sending...`,"background: #238636; color: #fff"):n.sendState===Js.SendFailed&&console.log(`%c [activityStatusMiddleware][Message][${r}][Status] Failed :(`,"background: #238636; color: #fff")},$0={bubbleBorderRadius:10,bubbleNubSize:10,bubbleNubOffset:15,bubbleFromUserBorderRadius:10,bubbleFromUserNubSize:10,bubbleFromUserNubOffset:15,bubbleFromUserBackground:"rgb(246, 246, 246)"};let l1=(()=>{class t{constructor(n,r){this.webChatControlService=n,this.document=r,this.title="angular-botframework-webchat-control",this.webChat=null,this.chatSDK=null,this.chatAdapter=null,this.loading=!1,this.hasChatStarted=!1,this.webChatStore=null}ngOnInit(){var n=this;return(0,yc.Z)(function*(){console.log("[ngOnInit]"),n.webChatControlService.lazyLoad().subscribe(function(){var r=(0,yc.Z)(function*(i){n.webChat=window.WebChat;const o=Object.assign({},j0),a=new IO.Mg(B0,o);a.setDebug(!H0.disable),yield a.initialize(),n.chatSDK=a,n.webChat=window.WebChat,(t=>{Oh.canUploadAttachment="true"===t.LiveWSAndLiveChatEngJoin.msdyn_enablefileattachmentsforcustomers||!1})(yield a.getLiveChatConfig()),$0.hideUploadButton=!Oh.canUploadAttachment;const D=localStorage.getItem("liveChatContext");D&&Object.keys(JSON.parse(D)).length>0&&(console.log("[liveChatContext]"),console.log(D))});return function(i){return r.apply(this,arguments)}}())})()}startChat(){var n=this;return(0,yc.Z)(function*(){var r,i,o,a;console.log("[startChat]");const l=yield null===(r=n.chatSDK)||void 0===r?void 0:r.getDataMaskingRules();console.log(l);const D=(console.log("[createCustomStore]"),Ph.getInstance());n.webChatStore=D.create(),D.subscribe("DataMasking",(t=>(console.log("[createDataMaskingMiddleware]"),new NO(t)))(l));const x={},B=localStorage.getItem("liveChatContext");B&&Object.keys(JSON.parse(B)).length>0&&(console.log("[liveChatContext]"),x.liveChatContext=JSON.parse(B)),n.hasChatStarted=!0,n.loading=!0,yield null===(i=n.chatSDK)||void 0===i?void 0:i.startChat(x);const Q=yield null===(o=n.chatSDK)||void 0===o?void 0:o.getCurrentLiveChatContext();Q&&Object.keys(Q).length&&localStorage.setItem("liveChatContext",JSON.stringify(Q));const X=yield null===(a=n.chatSDK)||void 0===a?void 0:a.createChatAdapter();n.chatAdapter=X,n.loading=!1,n.webChat.renderWebChat({directLine:X,sendTypingIndicator:!0,styleOptions:$0,store:n.webChatStore,avatarMiddleware:o1,activityMiddleware:s1,activityStatusMiddleware:a1},n.document.getElementById("chat-container"))})()}endChat(){var n=this;return(0,yc.Z)(function*(){var r;console.log("[endChat]"),yield null===(r=n.chatSDK)||void 0===r?void 0:r.endChat(),n.hasChatStarted=!1;const i=n.document.getElementById("chat-container");for(;i.firstChild;)i.firstChild.remove()})()}}return t.\u0275fac=function(n){return new(n||t)(Ut(t1),Ut(Kn))},t.\u0275cmp=oo({type:t,selectors:[["app-root"]],decls:3,vars:2,consts:[["id","root"],["id","chat-root",4,"ngIf"],["id","chat-button",3,"click",4,"ngIf"],["id","chat-root"],[1,"chat-header"],[3,"click"],["id","loading-screen",4,"ngIf"],["id","chat-container"],["id","loading-screen"],["id","loader"],["id","chat-button",3,"click"]],template:function(n,r){1&n&&(Pi(0,"div",0),_l(1,r1,7,1,"div",1),_l(2,i1,3,0,"div",2),Oi()),2&n&&(pl(1),Za("ngIf",r.hasChatStarted),pl(1),Za("ngIf",!r.hasChatStarted&&!r.loading))},directives:[C0],styles:['body[_ngcontent-%COMP%]{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}code[_ngcontent-%COMP%]{font-family:source-code-pro,Menlo,Monaco,Consolas,"Courier New",monospace}#chat-root[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:400px;max-width:400px;min-height:600px;max-height:600px;width:400px;height:600px;position:fixed;right:0;bottom:0;border-radius:4px;margin:0 20px 60px 0;box-shadow:0 0 15px 2px #161b224d;font-family:"Segoe UI",Arial,sans-serif}#chat-container[_ngcontent-%COMP%]{width:100%;height:100%}.chat-header[_ngcontent-%COMP%]{border-bottom:#E6E6E6 solid 1px;padding:10px;display:flex;justify-content:space-between;cursor:pointer}#loading-screen[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:400px;max-width:400px;min-height:600px;max-height:600px;width:400px;height:600px;position:fixed;right:0;bottom:0;border-radius:4px;margin:0 20px 60px 0;box-shadow:0 0 15px 2px #161b224d;align-items:center;justify-content:center}@keyframes spin{to{transform:rotate(360deg)}}#loader[_ngcontent-%COMP%]{font-size:120px;animation:spin 2s linear infinite}#chat-button[_ngcontent-%COMP%]{position:fixed;right:0;bottom:0;border-radius:32px;background-color:#0078d4;box-shadow:0 0 5px 2px #0078d4;padding:10px;margin:0 20px 20px 0;color:#fff;font-size:32px;cursor:pointer}#chat-button[_ngcontent-%COMP%]:hover{box-shadow:0 0 20px 2px #0078d4;transition:all 2s}']}),t})(),c1=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=ei({type:t,bootstrap:[l1]}),t.\u0275inj=Pr({providers:[],imports:[[vO]]}),t})();(function(){if(RC)throw new Error("Cannot enable prod mode after platform setup.");DC=!1})(),mO().bootstrapModule(c1).catch(t=>console.error(t))},1907:K=>{function m(s,_,h,p,E,f,v){try{var I=s[f](v),b=I.value}catch(c){return void h(c)}I.done?_(b):Promise.resolve(b).then(p,E)}K.exports=function(s){return function(){var _=this,h=arguments;return new Promise(function(p,E){var f=s.apply(_,h);function v(b){m(f,p,E,v,I,"next",b)}function I(b){m(f,p,E,v,I,"throw",b)}v(void 0)})}},K.exports.__esModule=!0,K.exports.default=K.exports},8884:K=>{K.exports=function(u,s){if(!(u instanceof s))throw new TypeError("Cannot call a class as a function")},K.exports.__esModule=!0,K.exports.default=K.exports},2805:K=>{function m(s,_){for(var h=0;h<_.length;h++){var p=_[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(s,p.key,p)}}K.exports=function(s,_,h){return _&&m(s.prototype,_),h&&m(s,h),Object.defineProperty(s,"prototype",{writable:!1}),s},K.exports.__esModule=!0,K.exports.default=K.exports},1819:K=>{K.exports=function(u,s,_){return s in u?Object.defineProperty(u,s,{value:_,enumerable:!0,configurable:!0,writable:!0}):u[s]=_,u},K.exports.__esModule=!0,K.exports.default=K.exports},1127:K=>{K.exports=function(u){return u&&u.__esModule?u:{default:u}},K.exports.__esModule=!0,K.exports.default=K.exports},1298:K=>{function m(u){return K.exports=m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(s){return typeof s}:function(s){return s&&"function"==typeof Symbol&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},K.exports.__esModule=!0,K.exports.default=K.exports,m(u)}K.exports=m,K.exports.__esModule=!0,K.exports.default=K.exports},6533:(K,m,u)=>{K.exports=u(7941)},4762:(K,m,u)=>{"use strict";u.d(m,{ZT:()=>_,_T:()=>p,qq:()=>R,FC:()=>S,V2:()=>N,KL:()=>P});var s=function(ee,$){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ie,ce){ie.__proto__=ce}||function(ie,ce){for(var Te in ce)Object.prototype.hasOwnProperty.call(ce,Te)&&(ie[Te]=ce[Te])})(ee,$)};function _(ee,$){if("function"!=typeof $&&null!==$)throw new TypeError("Class extends value "+String($)+" is not a constructor or null");function ie(){this.constructor=ee}s(ee,$),ee.prototype=null===$?Object.create($):(ie.prototype=$.prototype,new ie)}function p(ee,$){var ie={};for(var ce in ee)Object.prototype.hasOwnProperty.call(ee,ce)&&$.indexOf(ce)<0&&(ie[ce]=ee[ce]);if(null!=ee&&"function"==typeof Object.getOwnPropertySymbols){var Te=0;for(ce=Object.getOwnPropertySymbols(ee);Te<ce.length;Te++)$.indexOf(ce[Te])<0&&Object.prototype.propertyIsEnumerable.call(ee,ce[Te])&&(ie[ce[Te]]=ee[ce[Te]])}return ie}function R(ee){return this instanceof R?(this.v=ee,this):new R(ee)}function S(ee,$,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Te,ce=ie.apply(ee,$||[]),te=[];return Te={},Y("next"),Y("throw"),Y("return"),Te[Symbol.asyncIterator]=function(){return this},Te;function Y(we){ce[we]&&(Te[we]=function(_e){return new Promise(function(re,fe){te.push([we,_e,re,fe])>1||le(we,_e)})})}function le(we,_e){try{!function(we){we.value instanceof R?Promise.resolve(we.value.v).then(z,ne):Ce(te[0][2],we)}(ce[we](_e))}catch(re){Ce(te[0][3],re)}}function z(we){le("next",we)}function ne(we){le("throw",we)}function Ce(we,_e){we(_e),te.shift(),te.length&&le(te[0][0],te[0][1])}}function N(ee){var $,ie;return $={},ce("next"),ce("throw",function(Te){throw Te}),ce("return"),$[Symbol.iterator]=function(){return this},$;function ce(Te,te){$[Te]=ee[Te]?function(Y){return(ie=!ie)?{value:R(ee[Te](Y)),done:"return"===Te}:te?te(Y):Y}:te}}function P(ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,$=ee[Symbol.asyncIterator];return $?$.call(ee):(ee=function(ee){var $="function"==typeof Symbol&&Symbol.iterator,ie=$&&ee[$],ce=0;if(ie)return ie.call(ee);if(ee&&"number"==typeof ee.length)return{next:function(){return ee&&ce>=ee.length&&(ee=void 0),{value:ee&&ee[ce++],done:!ee}}};throw new TypeError($?"Object is not iterable.":"Symbol.iterator is not defined.")}(ee),ie={},ce("next"),ce("throw"),ce("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function ce(te){ie[te]=ee[te]&&function(Y){return new Promise(function(le,Z){!function(te,Y,le,Z){Promise.resolve(Z).then(function(z){te({value:z,done:le})},Y)}(le,Z,(Y=ee[te](Y)).done,Y.value)})}}}},8239:(K,m,u)=>{"use strict";function s(h,p,E,f,v,I,b){try{var c=h[I](b),d=c.value}catch(C){return void E(C)}c.done?p(d):Promise.resolve(d).then(f,v)}function _(h){return function(){var p=this,E=arguments;return new Promise(function(f,v){var I=h.apply(p,E);function b(d){s(I,f,v,b,c,"next",d)}function c(d){s(I,f,v,b,c,"throw",d)}b(void 0)})}}u.d(m,{Z:()=>_})},2861:K=>{"use strict";K.exports={i8:"1.1.1"}},6638:K=>{"use strict";K.exports={i8:"1.1.0"}},1528:K=>{"use strict";K.exports={i8:"0.3.0"}},5500:K=>{"use strict";K.exports={i8:"0.1.0"}},8464:K=>{"use strict";K.exports=JSON.parse('{"i8":"1.0.1-main.a784a8b"}')},5233:K=>{"use strict";K.exports={i8:"0.1.2"}},8593:K=>{"use strict";K.exports=JSON.parse('{"_from":"axios@^0.21.4","_id":"axios@0.21.4","_inBundle":false,"_integrity":"sha512-ut5vewkiu8jjGBdqpM44XxjuCjq9LAKeHVmoVfHVzy8eHgxxq8SbAVQNovDA8mVi05kP0Ea/n/UzcSHcTJQfNg==","_location":"/axios","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"axios@^0.21.4","name":"axios","escapedName":"axios","rawSpec":"^0.21.4","saveSpec":null,"fetchSpec":"^0.21.4"},"_requiredBy":["/@microsoft/ocsdk","/@microsoft/omnichannel-ic3core"],"_resolved":"https://registry.npmjs.org/axios/-/axios-0.21.4.tgz","_shasum":"c67b90dc0568e5c1cf2b0b858c43ba28e2eda575","_spec":"axios@^0.21.4","_where":"/home/runner/work/omnichannel-demos/omnichannel-demos/angular-botframework-webchat-control/node_modules/@microsoft/ocsdk","author":{"name":"Matt Zabriskie"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"bugs":{"url":"https://github.com/axios/axios/issues"},"bundleDependencies":false,"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}],"dependencies":{"follow-redirects":"^1.14.0"},"deprecated":false,"description":"Promise based HTTP client for the browser and node.js","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"homepage":"https://axios-http.com","jsdelivr":"dist/axios.min.js","keywords":["xhr","http","ajax","promise","node"],"license":"MIT","main":"index.js","name":"axios","repository":{"type":"git","url":"git+https://github.com/axios/axios.git"},"scripts":{"build":"NODE_ENV=production grunt build","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","examples":"node ./examples/server.js","fix":"eslint --fix lib/**/*.js","postversion":"git push && git push --tags","preversion":"npm test","start":"node ./sandbox/server.js","test":"grunt test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},"typings":"./index.d.ts","unpkg":"dist/axios.min.js","version":"0.21.4"}')}},K=>{K(K.s=8952)}]);