(self.webpackChunkangular_botframework_webchat_control=self.webpackChunkangular_botframework_webchat_control||[]).push([[179],{8255:G=>{function g(c){return Promise.resolve().then(()=>{var u=new Error("Cannot find module '"+c+"'");throw u.code="MODULE_NOT_FOUND",u})}g.keys=()=>[],g.resolve=g,g.id=8255,G.exports=g},5413:(G,g,c)=>{"use strict";var u=c(1948);Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var I=u(c(5725)),v=u(c(3837)),_=c(2e3),T=function y(){(0,I.default)(this,y)};g.default=T,(0,v.default)(T,"requiredOmnichannelConfigurationParameters",["orgUrl","orgId","widgetId"]),(0,v.default)(T,"defaultHeaders",{"Content-Type":"application/json"}),(0,v.default)(T,"bypassCacheHeaders",{"cache-control":"no-store, must-revalidate, no-cache"}),(0,v.default)(T,"defaultChannelId",_.ChannelId.LCW),(0,v.default)(T,"defaultLocale","en-us"),(0,v.default)(T,"noContentStatusCode",204),(0,v.default)(T,"transactionid","transaction-id")},2e3:(G,g)=>{"use strict";var c,C,u,I,v,_,T,y;Object.defineProperty(g,"__esModule",{value:!0}),g.LiveChatVersion=g.OCSDKTelemetryEvent=g.ChannelId=g.OperatingSystem=g.DeviceType=g.Browser=g.BrowserVendor=void 0,g.BrowserVendor=c,(C=c||(g.BrowserVendor=c={})).IE="IE",C.CHROME="Chrome",C.FIREFOX="Firefox",C.SAFARI="Safari",C.EDGE="Edge",C.EDGE_CHROMIUM="Edg",C.OPERA="Opera",C.UNKNOWN="Unknown",g.Browser=u,function(C){C[C.Chrome=0]="Chrome",C[C.Firefox=1]="Firefox",C[C.Ie=2]="Ie",C[C.Edge=3]="Edge",C[C.Safari=4]="Safari",C[C.None=5]="None"}(u||(g.Browser=u={})),g.DeviceType=I,function(C){C.Desktop="Desktop",C.Mobile="Mobile",C.Tablet="Tablet"}(I||(g.DeviceType=I={})),g.OperatingSystem=v,function(C){C.WINDOWS="Windows",C.MACOSX="Mac OS X",C.WINDOWS_PHONE="Windows Phone",C.WINDOWS_RT="Windows RT",C.IOS="iOS",C.ANDROID="Android",C.LINUX="Linux",C.UNKNOWN="Unknown"}(v||(g.OperatingSystem=v={})),g.ChannelId=_,function(C){C.LCW="lcw",C.SMS="sms",C.FACEBOOK="facebook",C.WECHAT="wechat"}(_||(g.ChannelId=_={})),g.OCSDKTelemetryEvent=T,function(C){C.GETCHATCONFIG="GetChatConfig",C.GETCHATCONFIGSUCCESS="GetChatConfigSucceeded",C.GETRECONNECTABLECHATS="GetReconnnectableChats",C.GETRECONNECTAVAILABILITY="GetReconnnectableAvailability",C.GETCHATTOKENSTARTED="GetChatTokenStarted",C.GETCHATTOKENSUCCEEDED="GetChatTokenSucceeded",C.GETCHATTOKENFAILED="GetChatTokenFailed",C.GETLWISTATUSSTARTED="GetLwiStatusStarted",C.GETLWISTATUSSUCCEEDED="GetLwiStatusSucceeded",C.GETLWISTATUSFAILED="GetLwiStatusFailed",C.SESSIONINITSTARTED="SessionInitStarted",C.SESSIONINITSUCCEEDED="SessionInitSucceeded",C.SESSIONINITFAILED="SessionInitFailed",C.SESSIONCLOSESTARTED="SessionCloseStarted",C.SESSIONCLOSESUCCEEDED="SessionCloseSucceeded",C.SESSIONCLOSEFAILED="SessionCloseFailed",C.SUBMITPOSTCHATSTARTED="SubmitPostChatStarted",C.SUBMITPOSTCHATSUCCEEDED="SubmitPostChatSucceeded",C.SUBMITPOSTCHATFAILED="SubmitPostChatFailed",C.GETCHATTRANSCRIPTSTARTED="GetChatTranscriptStarted",C.GETCHATTRANSCRIPTSUCCEEDED="GetChatTranscriptSucceeded",C.GETCHATTRANSCRIPTFAILED="GetChatTranscriptFailed",C.EMAILTRANSCRIPTSTARTED="EmailTranscriptStarted",C.EMAILTRANSCRIPTSUCCEEDED="EmailTranscriptSucceeded",C.EMAILTRANSCRIPTFAILED="EmailTranscriptFailed",C.FETCHDATAMASKINGSTARTED="FetchDataMaskingStarted",C.FETCHDATAMASKINGSUCCEEDED="FetchDataMaskingSucceeded",C.FETCHDATAMASKINGFAILED="FetchDataMaskingFailed",C.SECONDARYCHANNELEVENTREQUESTSTARTED="SecondaryChannelEventRequestStarted",C.SECONDARYCHANNELEVENTREQUESTSUCCEEDED="SecondaryChannelEventRequestSucceeded",C.SECONDARYCHANNELEVENTREQUESTFAILED="SecondaryChannelEventRequestFailed",C.GETSURVEYINVITELINKSTARTED="GetSurveyInviteLinkStarted",C.GETSURVEYINVITELINKSUCCEEDED="GetSurveyInviteLinkSucceeded",C.GETSURVEYINVITELINKFAILED="GetSurveyInviteLinkFailed",C.VALIDATEAUTHCHATRECORDSTARTED="ValidateAuthChatRecordStarted",C.VALIDATEAUTHCHATRECORDSUCCEEDED="ValidateAuthChatRecordSucceeded",C.VALIDATEAUTHCHATRECORDFAILED="ValidateAuthChatRecordFailed",C.GETQUEUEAVAILABILITYSTARTED="GetQueueAvailabilityStarted",C.GETQUEUEAVAILABILITYSUCCEEDED="GetQueueAvailabilitySucceeded",C.GETQUEUEAVAILABILITYFAILED="GetQueueAvailabilityFailed",C.SENDTYPINGINDICATORFAILED="SendTypingIndicatorFailed",C.SENDTYPINGINDICATORSUCCEEDED="SendTypingIndicatorSucceeded"}(T||(g.OCSDKTelemetryEvent=T={})),g.LiveChatVersion=y,function(C){C[C.V1=1]="V1",C[C.V2=2]="V2"}(y||(g.LiveChatVersion=y={}))},3096:(G,g,c)=>{"use strict";var u=c(1948);Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var I=u(c(5725)),v=u(c(3560));g.default=function(){function T(){(0,I.default)(this,T)}return(0,v.default)(T,null,[{key:"OCSDKLOAD",get:function(){return"oc:sdk:load"}}]),T}()},4950:(G,g,c)=>{"use strict";var u=c(1948);Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var I=u(c(5725)),v=u(c(3837)),_=function T(){(0,I.default)(this,T)};g.default=_,(0,v.default)(_,"supportedLocales",["ar-sa","bg-bg","ca-es","cs-cz","da-dk","de-de","el-gr","en-us","es-es","et-ee","eu-es","fi-fi","fr-fr","gl-es","he-il","hi-in","hr-hr","hu-hu","id-id","it-it","ja-jp","kk-kz","ko-kr","lt-lt","lv-lv","ms-my","nb-no","nl-nl","pl-pl","pt-br","pt-pt","ro-ro","ru-ru","sk-sk","sl-si","sr-cyrl-cs","sr-latn-cs","sv-se","th-th","tr-tr","uk-ua","vi-vn","zh-cn","zh-hk","zh-tw"])},4162:(G,g,c)=>{"use strict";var u=c(1948);Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var I=u(c(5725)),v=u(c(3560)),_=u(c(3837)),T=u(c(7276));g.default=function(){function C(f){(0,I.default)(this,C),(0,_.default)(this,"logger",void 0),this.logger=f}return(0,v.default)(C,[{key:"log",value:function(h,p,S,A){if(this.isLoggingEnabled()){var b=T.default.GETTELEMETRYEVENTDATA(p,S,A);this.logEvent(h,b)}}},{key:"logEvent",value:function(h,p){this.isLoggingEnabled()&&setTimeout(this.logger.logClientSdkTelemetryEvent.bind(this.logger),0,h,p)}},{key:"isLoggingEnabled",value:function(){return!this.isNullOrUndefined(this.logger)}},{key:"isNullOrUndefined",value:function(h){return null==h}}]),C}()},2172:(G,g,c)=>{"use strict";var u=c(1948);Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var I=u(c(5725)),v=u(c(3837)),_=function T(){(0,I.default)(this,T)};g.default=_,(0,v.default)(_,"LiveChatConfigPath","livechatconnector/config"),(0,v.default)(_,"LiveChatSessionInitPath","livechatconnector/sessioninit"),(0,v.default)(_,"LiveChatAuthSessionInitPath","livechatconnector/auth/sessioninit"),(0,v.default)(_,"LiveChatGetChatTokenPath","livechatconnector/getchattoken"),(0,v.default)(_,"LiveChatv2GetChatTokenPath","livechatconnector/v2/getchattoken"),(0,v.default)(_,"LiveChatAuthGetChatTokenPath","livechatconnector/auth/getchattoken"),(0,v.default)(_,"LiveChatv2AuthGetChatTokenPath","livechatconnector/v2/auth/getchattoken"),(0,v.default)(_,"LiveChatSessionClosePath","livechatconnector/sessionclose"),(0,v.default)(_,"LiveChatAuthSessionClosePath","livechatconnector/auth/sessionclose"),(0,v.default)(_,"LiveChatSubmitPostChatPath","survey/submitpostchat"),(0,v.default)(_,"LiveChatAuthSubmitPostChatPath","survey/auth/submitpostchat"),(0,v.default)(_,"LiveChatGetSurveyInviteLinkPath","livechatconnector/getsurveyinvite"),(0,v.default)(_,"LiveChatAuthGetSurveyInviteLinkPath","livechatconnector/auth/getsurveyinvite"),(0,v.default)(_,"LiveChatGetChatTranscriptPath","livechatconnector/getchattranscripts"),(0,v.default)(_,"LiveChatv2GetChatTranscriptPath","livechatconnector/v2/getchattranscripts"),(0,v.default)(_,"LiveChatAuthGetChatTranscriptPath","livechatconnector/auth/getchattranscripts"),(0,v.default)(_,"LiveChatv2AuthGetChatTranscriptPath","livechatconnector/v2/auth/getchattranscripts"),(0,v.default)(_,"LiveChatTranscriptEmailRequestPath","livechatconnector/createemailrequest"),(0,v.default)(_,"LiveChatAuthTranscriptEmailRequestPath","livechatconnector/auth/createemailrequest"),(0,v.default)(_,"LiveChatFetchDataMaskingInfoPath","livechatconnector/fetchdatamaskinginfo"),(0,v.default)(_,"LiveChatSecondaryChannelEventPath","livechatconnector/secondarychannelevent"),(0,v.default)(_,"LiveChatAuthSecondaryChannelEventPath","livechatconnector/auth/secondarychannelevent"),(0,v.default)(_,"LiveChatLiveWorkItemDetailsPath","livechatconnector/getliveworkitemdetails"),(0,v.default)(_,"LiveChatAuthLiveWorkItemDetailsPath","livechatconnector/auth/getliveworkitemdetails"),(0,v.default)(_,"LiveChatGetReconnectableChatsPath","livechatconnector/auth/reconnectablechats"),(0,v.default)(_,"LiveChatReconnectAvailabilityPath","livechatconnector/reconnect"),(0,v.default)(_,"LiveChatValidateAuthChatMapRecordPath","livechatconnector/auth/validateauthchatmaprecord"),(0,v.default)(_,"GetQueueAvailabilityPath","livechatconnector/auth/getqueueavailability"),(0,v.default)(_,"SendTypingIndicatorPath","inbound/typingindicator/livechat/sendtypingindicator")},1858:(G,g,c)=>{"use strict";var u=c(1948);Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var I=u(c(5725)),v=u(c(3837)),_=function T(){(0,I.default)(this,T)};g.default=_,(0,v.default)(_,"authenticatedUserToken","AuthenticatedUserToken"),(0,v.default)(_,"authorization","Authorization"),(0,v.default)(_,"organizationId","OrganizationId"),(0,v.default)(_,"widgetAppId","widgetAppId"),(0,v.default)(_,"requestId","Request-Id")},6528:(G,g)=>{"use strict";var c,u;Object.defineProperty(g,"__esModule",{value:!0}),g.LogLevel=void 0,g.LogLevel=c,(u=c||(g.LogLevel=c={})).INFO="INFO",u.DEBUG="DEBUG",u.WARN="WARN",u.ERROR="ERROR"},8634:(G,g,c)=>{"use strict";var u=c(1948);Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var I=u(c(8774)),v=u(c(1052)),_=u(c(4321)),T=u(c(5725)),y=u(c(3560)),C=u(c(3837)),f=c(2e3),h=u(c(8686)),p=c(4717),S=u(c(5413)),A=c(6812),b=u(c(4950)),m=c(6528),D=c(7169),O=u(c(2172)),N=u(c(1858)),V=c(3945),W=u(c(1729)),B=c(8566);function F(z,ee){var ie=Object.keys(z);if(Object.getOwnPropertySymbols){var ue=Object.getOwnPropertySymbols(z);ee&&(ue=ue.filter(function(Z){return Object.getOwnPropertyDescriptor(z,Z).enumerable})),ie.push.apply(ie,ue)}return ie}function L(z){for(var ee=1;ee<arguments.length;ee++){var ie=null!=arguments[ee]?arguments[ee]:{};ee%2?F(Object(ie),!0).forEach(function(ue){(0,C.default)(z,ue,ie[ue])}):Object.getOwnPropertyDescriptors?Object.defineProperties(z,Object.getOwnPropertyDescriptors(ie)):F(Object(ie)).forEach(function(ue){Object.defineProperty(z,ue,Object.getOwnPropertyDescriptor(ie,ue))})}return z}function K(z,ee){var ie;if("undefined"==typeof Symbol||null==z[Symbol.iterator]){if(Array.isArray(z)||(ie=function(z,ee){if(z){if("string"==typeof z)return $(z,undefined);var ie=Object.prototype.toString.call(z).slice(8,-1);if("Object"===ie&&z.constructor&&(ie=z.constructor.name),"Map"===ie||"Set"===ie)return Array.from(z);if("Arguments"===ie||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ie))return $(z,undefined)}}(z))||ee&&z&&"number"==typeof z.length){ie&&(z=ie);var ue=0,Z=function(){};return{s:Z,n:function(){return ue>=z.length?{done:!0}:{done:!1,value:z[ue++]}},e:function(w){throw w},f:Z}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var j,k=!0,x=!1;return{s:function(){ie=z[Symbol.iterator]()},n:function(){var w=ie.next();return k=w.done,w},e:function(w){x=!0,j=w},f:function(){try{!k&&null!=ie.return&&ie.return()}finally{if(x)throw j}}}}function $(z,ee){(null==ee||ee>z.length)&&(ee=z.length);for(var ie=0,ue=new Array(ee);ie<ee;ie++)ue[ie]=z[ie];return ue}var ae=function(){function z(ee){var ie=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z.defaultConfiguration,ue=arguments.length>2?arguments[2]:void 0;(0,T.default)(this,z),this.omnichannelConfiguration=ee,this.configuration=ie,this.logger=ue,(0,C.default)(this,"liveChatVersion",void 0),(!Object.keys(this.configuration).length||"object"!==(0,_.default)(ie))&&(this.configuration=z.defaultConfiguration);for(var Z=0,k=Object.keys(z.defaultConfiguration);Z<k.length;Z++){var x=k[Z];if(!this.configuration.hasOwnProperty(x))throw new Error("Missing '".concat(x,"' in SDKConfiguration"))}var j=ee.channelId;if(!Object.values(f.ChannelId).includes(j))throw new Error("Invalid channelId");var H,R=Object.keys(ee),w=K(S.default.requiredOmnichannelConfigurationParameters);try{for(w.s();!(H=w.n()).done;){var X=H.value;if(!R.includes(X))throw new Error("Missing '".concat(X,"' in OmnichannelConfiguration"))}}catch(re){w.e(re)}finally{w.f()}this.liveChatVersion=f.LiveChatVersion.V1}return(0,y.default)(z,[{key:"getChatConfig",value:(ee=(0,v.default)(I.default.mark(function ue(Z){var k,x,j,R,w,H,X,re,Y=arguments;return I.default.wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return k=Y.length>1&&void 0!==Y[1]&&Y[1],x=V.Timer.TIMER(),this.logger&&this.logger.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.GETCHATCONFIG,{RequestId:Z},"Get Chat Config Started"),Z||(Z=(0,B.uuidv4)()),j="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(O.default.LiveChatConfigPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"?requestId=").concat(Z,"&channelId=").concat(this.omnichannelConfiguration.channelId),R=h.default.create(),(0,W.default)(R,{retries:this.configuration.maxRequestRetriesOnFailure}),w={},k&&(w=L(L({},S.default.bypassCacheHeaders),w)),se.next=11,R.get(j,{headers:w});case 11:return X=x.milliSecondsElapsed,(re=(H=se.sent).data).LiveChatVersion&&re.LiveChatVersion===f.LiveChatVersion.V2&&(this.liveChatVersion=re.LiveChatVersion),this.logger&&this.logger.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.GETCHATCONFIGSUCCESS,{RequestId:Z,Region:H.data.Region,ElapsedTimeInMilliseconds:X,TransactionId:H.headers["transaction-id"]},"Get Chat config succeeded"),se.abrupt("return",re);case 17:case"end":return se.stop()}},ue,this)})),function(ue){return ee.apply(this,arguments)})},{key:"getLWIDetails",value:function(){var ee=(0,v.default)(I.default.mark(function ue(Z){var x,j,R,w,H,X,re,Y,k=this,ne=arguments;return I.default.wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return x=ne.length>1&&void 0!==ne[1]?ne[1]:{},j=V.Timer.TIMER(),this.logger&&this.logger.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.GETLWISTATUSSTARTED,{RequestId:Z},"Get LWI Details Started"),Z||(Z=(0,B.uuidv4)()),R="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(O.default.LiveChatLiveWorkItemDetailsPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(Z),w=h.default.create(),(0,W.default)(w,{retries:this.configuration.maxRequestRetriesOnFailure}),X=x.reconnectId,re=S.default.defaultHeaders,(H=x.authenticatedUserToken)&&(R="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(O.default.LiveChatAuthLiveWorkItemDetailsPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(Z),re[N.default.authenticatedUserToken]=H),X&&(R+="/".concat(X)),R+="?channelId=".concat(this.omnichannelConfiguration.channelId),Y={headers:re,method:"GET",url:R},le.abrupt("return",new Promise(function(){var ce=(0,v.default)(I.default.mark(function pe(he,Re){var ve,Ce,_e,Ge;return I.default.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.prev=0,ke.next=3,w(Y);case 3:Ce=j.milliSecondsElapsed,_e=(ve=ke.sent).data,k.logger&&k.logger.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.GETLWISTATUSSUCCEEDED,{RequestId:Z,Region:ve.data.Region,ElapsedTimeInMilliseconds:Ce,TransactionId:ve.headers["transaction-id"]},"Get LWI Details succeeded"),he(_e),ke.next=15;break;case 10:ke.prev=10,ke.t0=ke.catch(0),Ge=j.milliSecondsElapsed,k.logger&&k.logger.log(m.LogLevel.ERROR,f.OCSDKTelemetryEvent.GETLWISTATUSFAILED,{RequestId:Z,ExceptionDetails:ke.t0,ElapsedTimeInMilliseconds:Ge},"Get LWI Details failed"),Re();case 15:case"end":return ke.stop()}},pe,null,[[0,10]])}));return function(pe,he){return ce.apply(this,arguments)}}()));case 14:case"end":return le.stop()}},ue,this)}));return function(ue){return ee.apply(this,arguments)}}()},{key:"getChatToken",value:function(){var ee=(0,v.default)(I.default.mark(function ue(Z){var x,j,R,w,H,X,re,Y,ne,se,k=this,le=arguments;return I.default.wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:if(x=le.length>1&&void 0!==le[1]?le[1]:{},j=le.length>2&&void 0!==le[2]?le[2]:0,R=V.Timer.TIMER(),w=x.reconnectId,H=x.authenticatedUserToken,X=x.currentLiveChatVersion,this.logger&&this.logger.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.GETCHATTOKENSTARTED,{RequestId:Z},"Get Chat Token Started"),!(j<0)){pe.next=7;break}throw new Error("Invalid currentRetryCount");case 7:return Z||(Z=(0,B.uuidv4)()),re=S.default.defaultHeaders,Y="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(O.default.LiveChatGetChatTokenPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(Z),this.liveChatVersion===f.LiveChatVersion.V2||X&&X===f.LiveChatVersion.V2?(Y="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(O.default.LiveChatv2GetChatTokenPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(Z),H&&(Y="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(O.default.LiveChatv2AuthGetChatTokenPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(Z),re[N.default.authenticatedUserToken]=H)):H&&(Y="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(O.default.LiveChatAuthGetChatTokenPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(Z),re[N.default.authenticatedUserToken]=H),w&&(Y+="/".concat(w)),Y+="?channelId=".concat(this.omnichannelConfiguration.channelId),ne={headers:re,method:"GET",url:Y},se=h.default.create(),(0,W.default)(se,{retries:this.configuration.maxRequestRetriesOnFailure}),pe.abrupt("return",new Promise(function(){var he=(0,v.default)(I.default.mark(function Re(ve,Ce){var _e,Ge,Ie,ke;return I.default.wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return ye.prev=0,ye.next=3,se(ne);case 3:if(Ge=R.milliSecondsElapsed,!(Ie=(_e=ye.sent).data)){ye.next=11;break}return Ie.requestId=Z,k.logger&&k.logger.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.GETCHATTOKENSUCCEEDED,{RequestId:Z,Region:_e.data.Region,ElapsedTimeInMilliseconds:Ge,TransactionId:_e.headers["transaction-id"]},"Get Chat Token Succeeded"),ve(Ie),ye.abrupt("return");case 11:if(!w||_e.status!==S.default.noContentStatusCode){ye.next=14;break}return Ce(_e),ye.abrupt("return");case 14:ye.next=22;break;case 16:return ye.prev=16,ye.t0=ye.catch(0),ke=R.milliSecondsElapsed,k.logger&&k.logger.log(m.LogLevel.ERROR,f.OCSDKTelemetryEvent.GETCHATTOKENFAILED,{RequestId:Z,ExceptionDetails:ye.t0,ElapsedTimeInMilliseconds:ke},"Get Chat Token Failed"),Ce(ye.t0),ye.abrupt("return");case 22:if(!(j+1>=k.configuration.getChatTokenRetryCount)){ye.next=25;break}return Ce(new Error("The retry for getchattoken has exceeded its max value of ".concat(k.configuration.getChatTokenRetryCount))),ye.abrupt("return");case 25:setTimeout(function(){k.getChatToken(Z,x,j+1).then(function(Vi){return ve(Vi)}).catch(function(Vi){return Ce(Vi)})},k.configuration.getChatTokenTimeBetweenRetriesOnFailure);case 26:case"end":return ye.stop()}},Re,null,[[0,16]])}));return function(Re,ve){return he.apply(this,arguments)}}()));case 17:case"end":return pe.stop()}},ue,this)}));return function(ue){return ee.apply(this,arguments)}}()},{key:"getReconnectableChats",value:function(){var ee=(0,v.default)(I.default.mark(function ue(Z){var x,j,R,w,H,X,k=this;return I.default.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return x=V.Timer.TIMER(),j=Z.authenticatedUserToken,this.logger&&this.logger.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.GETRECONNECTABLECHATS,"Get Reconnectable chat Started"),R="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(O.default.LiveChatGetReconnectableChatsPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(this.omnichannelConfiguration.orgId,"?channelId=").concat(this.omnichannelConfiguration.channelId),(w=S.default.defaultHeaders)[N.default.authenticatedUserToken]=j,H={headers:w,method:"GET",url:R},X=h.default.create(),Y.abrupt("return",new Promise(function(){var ne=(0,v.default)(I.default.mark(function se(le,ce){var pe,he,Re,ve;return I.default.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return _e.prev=0,_e.next=3,X(H);case 3:if(he=x.milliSecondsElapsed,!(Re=(pe=_e.sent).data)){_e.next=10;break}return k.logger&&k.logger.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.GETRECONNECTABLECHATS,{Region:pe.data.Region,ElapsedTimeInMilliseconds:he,TransactionId:pe.headers[S.default.transactionid]},"Get Reconnectable Chats Succeeded and old session returned"),le(Re),_e.abrupt("return");case 10:return le(),_e.abrupt("return");case 14:return _e.prev=14,_e.t0=_e.catch(0),ve=x.milliSecondsElapsed,k.logger&&k.logger.log(m.LogLevel.ERROR,f.OCSDKTelemetryEvent.GETCHATTOKENFAILED,{ExceptionDetails:_e.t0,ElapsedTimeInMilliseconds:ve},"Get Reconnectable Chats Failed"),ce(_e.t0),_e.abrupt("return");case 20:case"end":return _e.stop()}},se,null,[[0,14]])}));return function(se,le){return ne.apply(this,arguments)}}()));case 9:case"end":return Y.stop()}},ue,this)}));return function(ue){return ee.apply(this,arguments)}}()},{key:"getReconnectAvailability",value:function(){var ee=(0,v.default)(I.default.mark(function ue(Z){var x,j,w,H,k=this;return I.default.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return x=V.Timer.TIMER(),this.logger&&this.logger.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.GETRECONNECTAVAILABILITY,"Get Reconnect availability started"),j="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(O.default.LiveChatReconnectAvailabilityPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(Z),w={headers:S.default.defaultHeaders,method:"GET",url:j},H=h.default.create(),re.abrupt("return",new Promise(function(){var Y=(0,v.default)(I.default.mark(function ne(se,le){var ce,pe,he,Re;return I.default.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.prev=0,Ce.next=3,H(w);case 3:if(pe=x.milliSecondsElapsed,!(he=(ce=Ce.sent).data)){Ce.next=10;break}return k.logger&&k.logger.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.GETRECONNECTAVAILABILITY,{Region:ce.data.Region,ElapsedTimeInMilliseconds:pe,TransactionId:ce.headers[S.default.transactionid]},"Get Reconnect availability Succeeded"),se(he),Ce.abrupt("return");case 10:return k.logger&&k.logger.log(m.LogLevel.WARN,f.OCSDKTelemetryEvent.GETRECONNECTAVAILABILITY,{Region:ce.data.Region,ElapsedTimeInMilliseconds:pe,TransactionId:ce.headers[S.default.transactionid]},"Get Reconnect availability didn't send any valid data."),se(),Ce.abrupt("return");case 15:return Ce.prev=15,Ce.t0=Ce.catch(0),Re=x.milliSecondsElapsed,k.logger&&k.logger.log(m.LogLevel.ERROR,f.OCSDKTelemetryEvent.GETRECONNECTAVAILABILITY,{ExceptionDetails:Ce.t0,ElapsedTimeInMilliseconds:Re},"Get Reconnect Availability Failed"),le(Ce.t0),Ce.abrupt("return");case 21:case"end":return Ce.stop()}},ne,null,[[0,15]])}));return function(ne,se){return Y.apply(this,arguments)}}()));case 7:case"end":return re.stop()}},ue,this)}));return function(ue){return ee.apply(this,arguments)}}()},{key:"getQueueAvailability",value:function(){var ee=(0,v.default)(I.default.mark(function ue(Z){var x,j,R,w,H,X,re,Y,ne,se,k=this,le=arguments;return I.default.wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:if(x=le.length>1&&void 0!==le[1]?le[1]:{},j=V.Timer.TIMER(),this.logger&&this.logger.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.GETQUEUEAVAILABILITYSTARTED,{RequestId:Z},"Get queue availability started"),R="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(O.default.GetQueueAvailabilityPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(Z,"?channelId=lcw"),w=h.default.create(),(0,W.default)(w,{retries:this.configuration.maxRequestRetriesOnFailure}),X=x.initContext,re=x.getContext,Y=S.default.defaultHeaders,(H=x.authenticatedUserToken)&&(Y[N.default.authenticatedUserToken]=H),ne=X||{},!re||window.document){pe.next=12;break}return pe.abrupt("return",Promise.reject(new Error("getContext is only supported on web browsers")));case 12:if(re&&(ne.browser=p.BrowserInfo.getBrowserName(),ne.device=A.DeviceInfo.getDeviceType(),ne.originurl=window.location.href,ne.os=D.OSInfo.getOsType()),ne.locale||(ne.locale=S.default.defaultLocale),!ne.locale||b.default.supportedLocales.includes(ne.locale)){pe.next=16;break}return pe.abrupt("return",Promise.reject(new Error("Unsupported locale: '".concat(ne.locale,"'"))));case 16:return se={data:ne,headers:Y,method:"POST",url:R},pe.abrupt("return",new Promise(function(){var he=(0,v.default)(I.default.mark(function Re(ve,Ce){var _e,Ge,Ie,ke;return I.default.wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return ye.prev=0,ye.next=3,w(se);case 3:Ge=j.milliSecondsElapsed,(Ie=(_e=ye.sent).data)&&(k.logger&&k.logger.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.GETQUEUEAVAILABILITYSUCCEEDED,{RequestId:Z,Region:_e.data.Region,ElapsedTimeInMilliseconds:Ge,TransactionId:_e.headers["transaction-id"]},"Get queue availability Succeeded"),ve(Ie)),ye.next=14;break;case 9:ye.prev=9,ye.t0=ye.catch(0),ke=j.milliSecondsElapsed,k.logger&&k.logger.log(m.LogLevel.ERROR,f.OCSDKTelemetryEvent.GETQUEUEAVAILABILITYFAILED,{RequestId:Z,ExceptionDetails:ye.t0,ElapsedTimeInMilliseconds:ke},"Get queue availability failed"),Ce(ye.t0);case 14:case"end":return ye.stop()}},Re,null,[[0,9]])}));return function(Re,ve){return he.apply(this,arguments)}}()));case 18:case"end":return pe.stop()}},ue,this)}));return function(ue){return ee.apply(this,arguments)}}()},{key:"sessionInit",value:function(){var ee=(0,v.default)(I.default.mark(function ue(Z){var x,j,R,w,H,X,re,Y,ne,se,le,k=this,ce=arguments;return I.default.wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(x=ce.length>1&&void 0!==ce[1]?ce[1]:{},j=V.Timer.TIMER(),this.logger&&this.logger.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.SESSIONINITSTARTED,{RequestId:Z},"Session Init Started"),R=h.default.create(),(0,W.default)(R,{retries:this.configuration.maxRequestRetriesOnFailure}),w=x.reconnectId,H=x.authenticatedUserToken,X=x.initContext,re=x.getContext,Y=S.default.defaultHeaders,ne="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(O.default.LiveChatSessionInitPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(Z),H&&(ne="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(O.default.LiveChatAuthSessionInitPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(Z),Y[N.default.authenticatedUserToken]=H),w&&(ne+="/".concat(w)),ne+="?channelId=".concat(this.omnichannelConfiguration.channelId),se=X||{},!re||window.document){he.next=14;break}return he.abrupt("return",Promise.reject(new Error("getContext is only supported on web browsers")));case 14:if(re&&(se.browser=p.BrowserInfo.getBrowserName(),se.device=A.DeviceInfo.getDeviceType(),se.originurl=window.location.href,se.os=D.OSInfo.getOsType()),se.locale||(se.locale=S.default.defaultLocale),!se.locale||b.default.supportedLocales.includes(se.locale)){he.next=18;break}return he.abrupt("return",Promise.reject(new Error("Unsupported locale: '".concat(se.locale,"'"))));case 18:return le={data:se,headers:Y,method:"POST",url:ne},he.abrupt("return",new Promise(function(){var Re=(0,v.default)(I.default.mark(function ve(Ce,_e){var Ge,Ie,ke;return I.default.wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return ye.prev=0,ye.next=3,R(le);case 3:Ge=ye.sent,Ie=j.milliSecondsElapsed,k.logger&&k.logger.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.SESSIONINITSUCCEEDED,{RequestId:Z,Region:Ge.data.Region,ElapsedTimeInMilliseconds:Ie,TransactionId:Ge.headers["transaction-id"]},"Session Init Succeeded"),Ce(),ye.next=14;break;case 9:ye.prev=9,ye.t0=ye.catch(0),ke=j.milliSecondsElapsed,k.logger&&k.logger.log(m.LogLevel.ERROR,f.OCSDKTelemetryEvent.SESSIONINITFAILED,{RequestId:Z,ExceptionDetails:ye.t0,ElapsedTimeInMilliseconds:ke},"Session Init Failed"),_e(ye.t0);case 14:case"end":return ye.stop()}},ve,null,[[0,9]])}));return function(ve,Ce){return Re.apply(this,arguments)}}()));case 20:case"end":return he.stop()}},ue,this)}));return function(ue){return ee.apply(this,arguments)}}()},{key:"sessionClose",value:function(){var ee=(0,v.default)(I.default.mark(function ue(Z){var x,j,R,w,H,X,re,ne,se,le,k=this,ce=arguments;return I.default.wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return x=ce.length>1&&void 0!==ce[1]?ce[1]:{},j=V.Timer.TIMER(),this.logger&&this.logger.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.SESSIONCLOSESTARTED,{RequestId:Z},"Session Close Started"),R="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(O.default.LiveChatSessionClosePath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(Z,"?channelId=").concat(this.omnichannelConfiguration.channelId),w=h.default.create(),(0,W.default)(w,{retries:this.configuration.maxRequestRetriesOnFailure}),H=x.authenticatedUserToken,X=x.isReconnectChat,re=x.isPersistentChat,ne=S.default.defaultHeaders,(se={}).chatId=x.chatId,H&&(R="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(O.default.LiveChatAuthSessionClosePath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(Z,"?channelId=").concat(this.omnichannelConfiguration.channelId),ne[N.default.authenticatedUserToken]=H),X&&(R+="&isReconnectChat=true"),re&&(R+="&isPersistentChat=true"),le={data:se,headers:ne,method:"POST",url:R},he.abrupt("return",new Promise(function(){var Re=(0,v.default)(I.default.mark(function ve(Ce,_e){var Ge,Ie,ke;return I.default.wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return ye.prev=0,ye.next=3,w(le);case 3:Ge=ye.sent,Ie=j.milliSecondsElapsed,k.logger&&k.logger.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.SESSIONCLOSESUCCEEDED,{RequestId:Z,Region:Ge.data.Region,ElapsedTimeInMilliseconds:Ie,TransactionId:Ge.headers["transaction-id"]},"Session Close Succeeded"),Ce(),ye.next=14;break;case 9:ye.prev=9,ye.t0=ye.catch(0),ke=j.milliSecondsElapsed,k.logger&&k.logger.log(m.LogLevel.ERROR,f.OCSDKTelemetryEvent.SESSIONCLOSEFAILED,{RequestId:Z,ExceptionDetails:ye.t0,ElapsedTimeInMilliseconds:ke},"Session Close Failed"),_e();case 14:case"end":return ye.stop()}},ve,null,[[0,9]])}));return function(ve,Ce){return Re.apply(this,arguments)}}()));case 15:case"end":return he.stop()}},ue,this)}));return function(ue){return ee.apply(this,arguments)}}()},{key:"validateAuthChatRecord",value:function(){var ee=(0,v.default)(I.default.mark(function ue(Z,k){var x,j,R,w,H,X,re,Y,ne,se,le,ce,pe,he;return I.default.wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return x=V.Timer.TIMER(),this.logger&&this.logger.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.VALIDATEAUTHCHATRECORDSTARTED,{RequestId:Z},"Validate Auth Chat Record Started"),j=k.authenticatedUserToken,R=k.chatId,w="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(O.default.LiveChatValidateAuthChatMapRecordPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(R,"/").concat(Z,"?channelId=").concat(this.omnichannelConfiguration.channelId),H=h.default.create(),(0,W.default)(H,{retries:this.configuration.maxRequestRetriesOnFailure}),X=S.default.defaultHeaders,j&&(X[N.default.authenticatedUserToken]=j),re={headers:X,method:"GET",url:w},ve.prev=9,ve.next=12,H(re);case 12:if(se=x.milliSecondsElapsed,!0!==(null===(Y=(ne=ve.sent).data)||void 0===Y?void 0:Y.authChatExist)){ve.next=19;break}return null===(le=this.logger)||void 0===le||le.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.VALIDATEAUTHCHATRECORDSUCCEEDED,{RequestId:Z,Region:ne.data.Region,ElapsedTimeInMilliseconds:se,TransactionId:ne.headers["transaction-id"]},"Validate Auth Chat Record Succeeded"),ve.abrupt("return",Promise.resolve(ne.data));case 19:return null===(ce=this.logger)||void 0===ce||ce.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.VALIDATEAUTHCHATRECORDFAILED,{RequestId:Z,Region:ne.data.Region,ElapsedTimeInMilliseconds:se,TransactionId:ne.headers["transaction-id"],ErrorCode:ne.status},"Validate Auth Chat Record Failed. Record is not found or request is not authorized"),ve.abrupt("return",Promise.reject(new Error("Validate Auth Chat Record Failed. Record is not found or request is not authorized")));case 21:ve.next=32;break;case 23:if(ve.prev=23,ve.t0=ve.catch(9),he=x.milliSecondsElapsed,null===(pe=this.logger)||void 0===pe||pe.log(m.LogLevel.ERROR,f.OCSDKTelemetryEvent.VALIDATEAUTHCHATRECORDFAILED,{RequestId:Z,ExceptionDetails:ve.t0,ElapsedTimeInMilliseconds:he},"Validate Auth Chat Record Failed"),"Error: Request failed with status code 404"!==ve.t0.toString()){ve.next=31;break}return ve.abrupt("return",Promise.resolve({}));case 31:return ve.abrupt("return",Promise.reject());case 32:case"end":return ve.stop()}},ue,this,[[9,23]])}));return function(ue,Z){return ee.apply(this,arguments)}}()},{key:"submitPostChatResponse",value:function(){var ee=(0,v.default)(I.default.mark(function ue(Z,k){var j,R,w,H,X,re,Y,x=this,ne=arguments;return I.default.wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return j=ne.length>2&&void 0!==ne[2]?ne[2]:{},R=V.Timer.TIMER(),this.logger&&this.logger.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.SUBMITPOSTCHATSTARTED,{RequestId:Z},"Submit Post Chat Started"),w="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(O.default.LiveChatSubmitPostChatPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(Z,"?channelId=").concat(this.omnichannelConfiguration.channelId),H=h.default.create(),(0,W.default)(H,{retries:this.configuration.maxRequestRetriesOnFailure}),re=S.default.defaultHeaders,(X=j.authenticatedUserToken)&&(w="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(O.default.LiveChatAuthSubmitPostChatPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(Z,"?channelId=").concat(this.omnichannelConfiguration.channelId),re[N.default.authenticatedUserToken]=X),Y={data:JSON.stringify(k),headers:re,method:"POST",url:w},le.abrupt("return",new Promise(function(){var ce=(0,v.default)(I.default.mark(function pe(he,Re){var ve,Ce,_e;return I.default.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.prev=0,Ie.next=3,H(Y);case 3:ve=Ie.sent,Ce=R.milliSecondsElapsed,x.logger&&x.logger.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.SUBMITPOSTCHATSUCCEEDED,{RequestId:Z,Region:ve.data.Region,ElapsedTimeInMilliseconds:Ce,TransactionId:ve.headers["transaction-id"]},"Submit Post Chat Succeeded"),he(),Ie.next=14;break;case 9:Ie.prev=9,Ie.t0=Ie.catch(0),_e=R.milliSecondsElapsed,x.logger&&x.logger.log(m.LogLevel.ERROR,f.OCSDKTelemetryEvent.SUBMITPOSTCHATFAILED,{RequestId:Z,ExceptionDetails:Ie.t0,ElapsedTimeInMilliseconds:_e},"Submit Post Chat Failed"),Re();case 14:case"end":return Ie.stop()}},pe,null,[[0,9]])}));return function(pe,he){return ce.apply(this,arguments)}}()));case 11:case"end":return le.stop()}},ue,this)}));return function(ue,Z){return ee.apply(this,arguments)}}()},{key:"getSurveyInviteLink",value:function(){var ee=(0,v.default)(I.default.mark(function ue(Z,k){var j,R,w,H,X,re,Y,ne,x=this,se=arguments;return I.default.wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return j=se.length>2&&void 0!==se[2]?se[2]:{},R=V.Timer.TIMER(),this.logger&&this.logger.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.GETSURVEYINVITELINKSTARTED,{SurveyOwnerId:Z},"Get Survey Invite Link Started"),w="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(O.default.LiveChatGetSurveyInviteLinkPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(Z),H=h.default.create(),(0,W.default)(H,{retries:this.configuration.maxRequestRetriesOnFailure}),re=j.requestId,Y=S.default.defaultHeaders,(X=j.authenticatedUserToken)&&(w="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(O.default.LiveChatAuthGetSurveyInviteLinkPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(Z),Y[N.default.authenticatedUserToken]=X,Y[N.default.widgetAppId]=this.omnichannelConfiguration.widgetId),re&&(Y[N.default.requestId]=re),ne={data:JSON.stringify(k),headers:Y,method:"POST",url:w},ce.abrupt("return",new Promise(function(){var pe=(0,v.default)(I.default.mark(function he(Re,ve){var Ce,_e,Ge,Ie;return I.default.wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:return Ct.prev=0,Ct.next=3,H(ne);case 3:_e=(Ce=Ct.sent).data,Ge=R.milliSecondsElapsed,x.logger&&x.logger.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.GETSURVEYINVITELINKSUCCEEDED,{Region:Ce.data.Region,ElapsedTimeInMilliseconds:Ge,TransactionId:Ce.headers["transaction-id"]},"Get Survey Invite Link Succeeded"),Re(_e),Ct.next=15;break;case 10:Ct.prev=10,Ct.t0=Ct.catch(0),Ie=R.milliSecondsElapsed,x.logger&&x.logger.log(m.LogLevel.ERROR,f.OCSDKTelemetryEvent.GETSURVEYINVITELINKFAILED,{ExceptionDetails:Ct.t0,ElapsedTimeInMilliseconds:Ie},"Get Survey Invite Link Failed"),ve();case 15:case"end":return Ct.stop()}},he,null,[[0,10]])}));return function(he,Re){return pe.apply(this,arguments)}}()));case 12:case"end":return ce.stop()}},ue,this)}));return function(ue,Z){return ee.apply(this,arguments)}}()},{key:"getChatTranscripts",value:function(){var ee=(0,v.default)(I.default.mark(function ue(Z,k,x){var R,w,H,X,re,Y,ne,se,j=this,le=arguments;return I.default.wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return R=le.length>3&&void 0!==le[3]?le[3]:{},w=V.Timer.TIMER(),this.logger&&this.logger.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.GETCHATTRANSCRIPTSTARTED,{RequestId:Z},"Get Chat Transcript Started"),H="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(O.default.LiveChatGetChatTranscriptPath,"/").concat(k,"/").concat(Z,"?channelId=").concat(this.omnichannelConfiguration.channelId),X=h.default.create(),(0,W.default)(X,{retries:this.configuration.maxRequestRetriesOnFailure}),re=R.authenticatedUserToken,Y=R.currentLiveChatVersion,(ne=S.default.defaultHeaders)[N.default.organizationId]=this.omnichannelConfiguration.orgId,ne[N.default.widgetAppId]=this.omnichannelConfiguration.widgetId,ne[N.default.authorization]=x,this.liveChatVersion===f.LiveChatVersion.V2||Y&&Y===f.LiveChatVersion.V2?(H="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(O.default.LiveChatv2GetChatTranscriptPath,"/").concat(k,"/").concat(Z,"?channelId=").concat(this.omnichannelConfiguration.channelId),re&&(H="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(O.default.LiveChatv2AuthGetChatTranscriptPath,"/").concat(k,"/").concat(Z,"?channelId=").concat(this.omnichannelConfiguration.channelId))):re&&(H="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(O.default.LiveChatAuthGetChatTranscriptPath,"/").concat(k,"/").concat(Z,"?channelId=").concat(this.omnichannelConfiguration.channelId)),se={headers:ne,method:"GET",url:H},pe.abrupt("return",new Promise(function(){var he=(0,v.default)(I.default.mark(function Re(ve,Ce){var _e,Ge,Ie,ke;return I.default.wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return ye.prev=0,ye.next=3,X(se);case 3:Ge=w.milliSecondsElapsed,Ie=(_e=ye.sent).data,j.logger&&j.logger.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.GETCHATTRANSCRIPTSUCCEEDED,{RequestId:Z,Region:_e.data.Region,ElapsedTimeInMilliseconds:Ge,TransactionId:_e.headers["transaction-id"]},"Get Chat Transcript Succeeded"),ve(Ie),ye.next=15;break;case 10:ye.prev=10,ye.t0=ye.catch(0),ke=w.milliSecondsElapsed,j.logger&&j.logger.log(m.LogLevel.ERROR,f.OCSDKTelemetryEvent.GETCHATTRANSCRIPTFAILED,{RequestId:Z,ExceptionDetails:ye.t0,ElapsedTimeInMilliseconds:ke},"Get Chat Transcript Failed"),Ce(ye.t0);case 15:case"end":return ye.stop()}},Re,null,[[0,10]])}));return function(Re,ve){return he.apply(this,arguments)}}()));case 14:case"end":return pe.stop()}},ue,this)}));return function(ue,Z,k){return ee.apply(this,arguments)}}()},{key:"emailTranscript",value:function(){var ee=(0,v.default)(I.default.mark(function ue(Z,k,x){var R,w,H,X,re,Y,ne,j=this,se=arguments;return I.default.wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return R=se.length>3&&void 0!==se[3]?se[3]:{},w=V.Timer.TIMER(),this.logger&&this.logger.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.EMAILTRANSCRIPTSTARTED,{RequestId:Z},"Email Transcript Started"),H="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(O.default.LiveChatTranscriptEmailRequestPath,"/").concat(Z,"?channelId=").concat(this.omnichannelConfiguration.channelId),X=h.default.create(),(0,W.default)(X,{retries:this.configuration.maxRequestRetriesOnFailure}),re=R.authenticatedUserToken,(Y=S.default.defaultHeaders)[N.default.organizationId]=this.omnichannelConfiguration.orgId,Y[N.default.widgetAppId]=this.omnichannelConfiguration.widgetId,Y[N.default.authorization]=k,re&&(H="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(O.default.LiveChatAuthTranscriptEmailRequestPath,"/").concat(Z,"?channelId=").concat(this.omnichannelConfiguration.channelId)),ne={data:JSON.stringify(x),headers:Y,method:"POST",url:H},ce.abrupt("return",new Promise(function(){var pe=(0,v.default)(I.default.mark(function he(Re,ve){var Ce,_e,Ge;return I.default.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.prev=0,ke.next=3,X(ne);case 3:Ce=ke.sent,_e=w.milliSecondsElapsed,j.logger&&j.logger.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.EMAILTRANSCRIPTSUCCEEDED,{RequestId:Z,Region:Ce.data.Region,ElapsedTimeInMilliseconds:_e,TransactionId:Ce.headers["transaction-id"]},"Email Transcript Succeeded"),Re(),ke.next=14;break;case 9:ke.prev=9,ke.t0=ke.catch(0),Ge=w.milliSecondsElapsed,j.logger&&j.logger.log(m.LogLevel.ERROR,f.OCSDKTelemetryEvent.EMAILTRANSCRIPTFAILED,{RequestId:Z,ExceptionDetails:ke.t0,ElapsedTimeInMilliseconds:Ge},"Email Transcript Failed"),ve();case 14:case"end":return ke.stop()}},he,null,[[0,9]])}));return function(he,Re){return pe.apply(this,arguments)}}()));case 14:case"end":return ce.stop()}},ue,this)}));return function(ue,Z,k){return ee.apply(this,arguments)}}()},{key:"fetchDataMaskingInfo",value:function(){var ee=(0,v.default)(I.default.mark(function ue(Z){var x,j,R,w,H,k=this;return I.default.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return x=V.Timer.TIMER(),this.logger&&this.logger.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.FETCHDATAMASKINGSTARTED,{RequestId:Z},"Fetch Data Masking Started"),Z||(Z=(0,B.uuidv4)()),j="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(O.default.LiveChatFetchDataMaskingInfoPath,"/").concat(this.omnichannelConfiguration.orgId),R=h.default.create(),(0,W.default)(R,{retries:this.configuration.maxRequestRetriesOnFailure}),(w=S.default.defaultHeaders)[N.default.organizationId]=this.omnichannelConfiguration.orgId,w[N.default.requestId]=Z,H={headers:w,method:"GET",url:j},re.abrupt("return",new Promise(function(){var Y=(0,v.default)(I.default.mark(function ne(se,le){var ce,pe,he,Re;return I.default.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.prev=0,Ce.next=3,R(H);case 3:pe=x.milliSecondsElapsed,he=(ce=Ce.sent).data,k.logger&&k.logger.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.FETCHDATAMASKINGSUCCEEDED,{RequestId:Z,Region:ce.data.Region,ElapsedTimeInMilliseconds:pe,TransactionId:ce.headers["transaction-id"]},"Fetch Data Masking Succeeded"),se(he),Ce.next=15;break;case 10:Ce.prev=10,Ce.t0=Ce.catch(0),Re=x.milliSecondsElapsed,k.logger&&k.logger.log(m.LogLevel.ERROR,f.OCSDKTelemetryEvent.FETCHDATAMASKINGFAILED,{RequestId:Z,ExceptionDetails:Ce.t0,ElapsedTimeInMilliseconds:Re},"Fetch Data Masking Failed"),le();case 15:case"end":return Ce.stop()}},ne,null,[[0,10]])}));return function(ne,se){return Y.apply(this,arguments)}}()));case 11:case"end":return re.stop()}},ue,this)}));return function(ue){return ee.apply(this,arguments)}}()},{key:"makeSecondaryChannelEventRequest",value:function(){var ee=(0,v.default)(I.default.mark(function ue(Z,k){var x,j,R,w,H,X,re,Y,ne,se,le,ce=arguments;return I.default.wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return x=ce.length>2&&void 0!==ce[2]?ce[2]:{},j=V.Timer.TIMER(),this.logger&&this.logger.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.SECONDARYCHANNELEVENTREQUESTSTARTED,{RequestId:Z},"Secondary Channel Event Request Started"),R="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(O.default.LiveChatSecondaryChannelEventPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(Z),w=h.default.create(),(0,W.default)(w,{retries:this.configuration.maxRequestRetriesOnFailure}),H=x.authenticatedUserToken,(X=S.default.defaultHeaders)[N.default.organizationId]=this.omnichannelConfiguration.orgId,H&&(X[N.default.authenticatedUserToken]=H,R="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(O.default.LiveChatAuthSecondaryChannelEventPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(Z)),R+="?channelId="+S.default.defaultChannelId,re={data:JSON.stringify(k),headers:X,method:"POST",url:R},he.prev=12,he.next=15,w(re);case 15:ne=j.milliSecondsElapsed,se=(Y=he.sent).data,this.logger&&this.logger.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.SECONDARYCHANNELEVENTREQUESTSUCCEEDED,{RequestId:Z,Region:se.Region,ElapsedTimeInMilliseconds:ne,TransactionId:Y.headers["transaction-id"]},"Secondary Channel Event Request Succeeded"),he.next=26;break;case 21:throw he.prev=21,he.t0=he.catch(12),le=j.milliSecondsElapsed,this.logger&&this.logger.log(m.LogLevel.ERROR,f.OCSDKTelemetryEvent.SECONDARYCHANNELEVENTREQUESTFAILED,{RequestId:Z,ExceptionDetails:he.t0,ElapsedTimeInMilliseconds:le},"Secondary Channel Event Request Failed"),he.t0;case 26:case"end":return he.stop()}},ue,this,[[12,21]])}));return function(ue,Z){return ee.apply(this,arguments)}}()},{key:"sendTypingIndicator",value:function(){var ee=(0,v.default)(I.default.mark(function ue(Z,k){var j,R,w,H,X,x=this;return I.default.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(k&&k===f.LiveChatVersion.V2){Y.next=2;break}return Y.abrupt("return",Promise.resolve());case 2:if(j=V.Timer.TIMER(),k&&k===f.LiveChatVersion.V2){Y.next=5;break}throw new Error("Typing indicator is only supported on v2");case 5:return R="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(O.default.SendTypingIndicatorPath,"/").concat(Z),w=h.default.create(),(H=S.default.defaultHeaders)[N.default.organizationId]=this.omnichannelConfiguration.orgId,X={headers:H,method:"POST",url:R},Y.abrupt("return",new Promise(function(){var ne=(0,v.default)(I.default.mark(function se(le,ce){var pe,he,Re,ve;return I.default.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return _e.prev=0,_e.next=3,w(X);case 3:he=j.milliSecondsElapsed,Re=(pe=_e.sent).data,x.logger&&x.logger.log(m.LogLevel.INFO,f.OCSDKTelemetryEvent.SENDTYPINGINDICATORSUCCEEDED,{RequestId:Z,Region:Re.Region,ElapsedTimeInMilliseconds:he,TransactionId:pe.headers["transaction-id"]},"Send Typing Indicator Succeeded"),le(),_e.next=15;break;case 10:_e.prev=10,_e.t0=_e.catch(0),ve=j.milliSecondsElapsed,x.logger&&x.logger.log(m.LogLevel.ERROR,f.OCSDKTelemetryEvent.SENDTYPINGINDICATORFAILED,{RequestId:Z,ExceptionDetails:_e.t0,ElapsedTimeInMilliseconds:ve},"Send Typing Indicator Failed"),ce(_e.t0);case 15:case"end":return _e.stop()}},se,null,[[0,10]])}));return function(se,le){return ne.apply(this,arguments)}}()));case 11:case"end":return Y.stop()}},ue,this)}));return function(ue,Z){return ee.apply(this,arguments)}}()}]),z;var ee}();g.default=ae,(0,C.default)(ae,"defaultConfiguration",{getChatTokenRetryCount:35,getChatTokenTimeBetweenRetriesOnFailure:1e4,maxRequestRetriesOnFailure:3})},4491:(G,g,c)=>{"use strict";var u=c(1948);Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var I=u(c(5725)),v=u(c(3560)),_=u(c(5413)),T=u(c(4162)),y=u(c(8634));g.default=function(){function f(){(0,I.default)(this,f)}return(0,v.default)(f,null,[{key:"getSDK",value:function(p,S,A){var b=new T.default(A);return new y.default({channelId:p.channelId||_.default.defaultChannelId,orgId:p.orgId,orgUrl:p.orgUrl,widgetId:p.widgetId},S||{},b)}}]),f}()},4717:(G,g,c)=>{"use strict";var u=c(1948);Object.defineProperty(g,"__esModule",{value:!0}),g.BrowserInfo=g.UNKNOWN_VERSION=void 0;var I=u(c(5725)),v=u(c(3560)),_=u(c(3837)),T=c(2e3),y="([\\d,.]+)";g.UNKNOWN_VERSION="U";var f=function(){function h(){(0,I.default)(this,h)}return(0,v.default)(h,null,[{key:"getUserAgent",value:function(){return this.userAgent()}},{key:"userAgentContainsString",value:function(S){return this.getUserAgent().indexOf(S)>-1}},{key:"isChrome",value:function(){return this.userAgentContainsString(T.BrowserVendor.CHROME)&&!this.userAgentContainsString(T.BrowserVendor.EDGE)&&!this.userAgentContainsString(T.BrowserVendor.EDGE_CHROMIUM)}},{key:"isIe",value:function(){return this.userAgentContainsString("Trident")}},{key:"isEdge",value:function(){return this.userAgentContainsString(T.BrowserVendor.EDGE)||this.userAgentContainsString(T.BrowserVendor.EDGE_CHROMIUM)}},{key:"isOpera",value:function(){return this.userAgentContainsString("OPR/")}},{key:"getBrowserName",value:function(){return this.isOpera()?T.BrowserVendor.OPERA:this.isEdge()?T.BrowserVendor.EDGE:this.isChrome()?T.BrowserVendor.CHROME:this.userAgentContainsString(T.BrowserVendor.FIREFOX)?T.BrowserVendor.FIREFOX:this.userAgentContainsString(T.BrowserVendor.SAFARI)?T.BrowserVendor.SAFARI:this.isIe()?T.BrowserVendor.IE:T.BrowserVendor.UNKNOWN}},{key:"getBrowserVersion",value:function(){var S=this;return this.isIe()?function(){var D=S.getUserAgent(),O=D.match(new RegExp(T.BrowserVendor.IE+" "+y));if(O)return O[1];var N=D.match(new RegExp("rv:"+y));return N?N[1]:void 0}():function(D){D===T.BrowserVendor.SAFARI&&(D="Version"),D===T.BrowserVendor.OPERA&&(D="OPR"),D===T.BrowserVendor.EDGE&&(D="Edge?");var O=S.getUserAgent().match(new RegExp(D+"/"+y));return O?O[1]:"U"}(this.getBrowserName())}}]),h}();g.BrowserInfo=f,(0,_.default)(f,"userAgent",function(){return window.navigator.userAgent})},6812:(G,g,c)=>{"use strict";var u=c(1948);Object.defineProperty(g,"__esModule",{value:!0}),g.DeviceInfo=void 0;var I=u(c(5725)),v=u(c(3560)),_=c(2e3);g.DeviceInfo=function(){function y(){(0,I.default)(this,y)}return(0,v.default)(y,null,[{key:"getDeviceType",value:function(){return window.navigator.userAgent.match(/(android|ipod|windows phone|wpdesktop|windows ce|blackberry\w*|meego|webos|palm|symbian|pda|\w*?mobile\w*?|\w*?phone\w*?)/i)?_.DeviceType.Mobile:window.navigator.userAgent.match(/tablet|ipad/i)?_.DeviceType.Tablet:_.DeviceType.Desktop}}]),y}()},682:(G,g,c)=>{"use strict";var u=c(1948);Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var I=u(c(5725)),v=u(c(3560));g.default=function(){function T(){(0,I.default)(this,T)}return(0,v.default)(T,null,[{key:"raiseCustomEvent",value:function(C,f){var h=T.createCustomEvent(C,f);window.dispatchEvent(h)}},{key:"createCustomEvent",value:function(C,f){var h=f?{detail:f}:void 0,p=null;try{p=new CustomEvent(C,h)}catch(S){(p=document.createEvent("CustomEvent")).initCustomEvent(C,!0,!0,h)}return p}}]),T}()},7169:(G,g,c)=>{"use strict";var u=c(1948);Object.defineProperty(g,"__esModule",{value:!0}),g.OSInfo=void 0;var I=u(c(5725)),v=u(c(3560)),_=c(2e3);g.OSInfo=function(){function y(){(0,I.default)(this,y)}return(0,v.default)(y,null,[{key:"getOsType",value:function(){var D=function(){return window.navigator.userAgent};return D().match(/windows\sphone\s\d+\.\d+/i)?_.OperatingSystem.WINDOWS_PHONE:D().match(/ arm;/i)?_.OperatingSystem.WINDOWS_RT:D().match(/(iPad|iPhone|iPod)(?=.*like Mac OS X)/i)?_.OperatingSystem.IOS:D().match(/android/i)?_.OperatingSystem.ANDROID:D().match(/(linux|joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|cros)/i)?_.OperatingSystem.LINUX:D().match(/(macintosh|mac os x)/i)?_.OperatingSystem.MACOSX:D().match(/(windows|win32)/i)?_.OperatingSystem.WINDOWS:_.OperatingSystem.UNKNOWN}}]),y}()},7276:(G,g,c)=>{"use strict";var u=c(1948);Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var I=u(c(5725)),v=u(c(3560));g.default=function(){function T(){(0,I.default)(this,T)}return(0,v.default)(T,null,[{key:"GETTELEMETRYEVENTDATA",value:function(C,f,h){return{Description:h,ElapsedTimeInMilliseconds:f.ElapsedTimeInMilliseconds,Event:C,ExceptionDetails:f.ExceptionDetails,Region:f.Region,RequestId:f.RequestId,TransactionId:f.TransactionId}}}]),T}()},3945:(G,g,c)=>{"use strict";var u=c(1948);Object.defineProperty(g,"__esModule",{value:!0}),g.Timer=void 0;var I=u(c(5725)),v=u(c(3560));g.Timer=function(){function T(){(0,I.default)(this,T)}return(0,v.default)(T,null,[{key:"TIMER",value:function(){var C=(new Date).getTime();return{get milliSecondsElapsed(){return(new Date).getTime()-C}}}}]),T}()},1729:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0,g.default=function(v,_){var T=_.retries,y=0;v.interceptors.response.use(void 0,function(p){var S=p.config;return S&&y<T?(y++,new Promise(function(b){return b(v(S))})):Promise.reject(p)})}},8566:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.uuidv4=void 0,g.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(I){var v=16*Math.random()|0;return("x"===I?v:3&v|8).toString(16)})}},3762:(G,g,c)=>{"use strict";var u=c(1948);Object.defineProperty(g,"__esModule",{value:!0}),Object.defineProperty(g,"SDKProvider",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(g,"uuidv4",{enumerable:!0,get:function(){return y.uuidv4}});var I=u(c(4321)),v=u(c(3096)),_=u(c(4491)),T=u(c(682)),y=c(8566);!function(){if(void 0===global.window&&(global.window=global),void 0===("undefined"==typeof window?"undefined":(0,I.default)(window)))throw new Error("window object not found");"Microsoft"in window||(window.Microsoft={}),"CRM"in window.Microsoft||(window.Microsoft.CRM={}),"Omnichannel"in window.Microsoft.CRM||(window.Microsoft.CRM.Omnichannel={}),"SDK"in window.Microsoft.CRM.Omnichannel||(window.Microsoft.CRM.Omnichannel.SDK={SDKProvider:_.default,Util:{uuidv4:y.uuidv4}}),window.document&&T.default.raiseCustomEvent(v.default.OCSDKLOAD)}()},7626:function(G,g,c){"use strict";var u=this&&this.__assign||function(){return(u=Object.assign||function(Z){for(var k,x=1,j=arguments.length;x<j;x++)for(var R in k=arguments[x])Object.prototype.hasOwnProperty.call(k,R)&&(Z[R]=k[R]);return Z}).apply(this,arguments)},I=this&&this.__awaiter||function(Z,k,x,j){return new(x||(x=Promise))(function(w,H){function X(ne){try{Y(j.next(ne))}catch(se){H(se)}}function re(ne){try{Y(j.throw(ne))}catch(se){H(se)}}function Y(ne){ne.done?w(ne.value):function(w){return w instanceof x?w:new x(function(H){H(w)})}(ne.value).then(X,re)}Y((j=j.apply(Z,k||[])).next())})},v=this&&this.__generator||function(Z,k){var j,R,w,H,x={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return H={next:X(0),throw:X(1),return:X(2)},"function"==typeof Symbol&&(H[Symbol.iterator]=function(){return this}),H;function X(Y){return function(ne){return function(Y){if(j)throw new TypeError("Generator is already executing.");for(;x;)try{if(j=1,R&&(w=2&Y[0]?R.return:Y[0]?R.throw||((w=R.return)&&w.call(R),0):R.next)&&!(w=w.call(R,Y[1])).done)return w;switch(R=0,w&&(Y=[2&Y[0],w.value]),Y[0]){case 0:case 1:w=Y;break;case 4:return x.label++,{value:Y[1],done:!1};case 5:x.label++,R=Y[1],Y=[0];continue;case 7:Y=x.ops.pop(),x.trys.pop();continue;default:if(!(w=(w=x.trys).length>0&&w[w.length-1])&&(6===Y[0]||2===Y[0])){x=0;continue}if(3===Y[0]&&(!w||Y[1]>w[0]&&Y[1]<w[3])){x.label=Y[1];break}if(6===Y[0]&&x.label<w[1]){x.label=w[1],w=Y;break}if(w&&x.label<w[2]){x.label=w[2],x.ops.push(Y);break}w[2]&&x.ops.pop(),x.trys.pop();continue}Y=k.call(Z,x)}catch(ne){Y=[6,ne],R=0}finally{j=w=0}if(5&Y[0])throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}([Y,ne])}}},_=this&&this.__spreadArrays||function(){for(var Z=0,k=0,x=arguments.length;k<x;k++)Z+=arguments[k].length;var j=Array(Z),R=0;for(k=0;k<x;k++)for(var w=arguments[k],H=0,X=w.length;H<X;H++,R++)j[R]=w[H];return j};Object.defineProperty(g,"__esModule",{value:!0});var T=c(6419),y=c(6397),C=c(7925),f=c(2811),h=c(838),p=c(6633),S=c(2626),A=c(2900),b=c(4694),m=c(2217),D=c(9425),O=c(1775),N=c(5642),V=c(6345),W=c(448),B=c(3372),F=c(4352),L=c(8098),K=c(5655),q=c(1247),$=c(3762),ae=c(6194),z=c(9600),ee=c(7616),ie=c(641),ue=function(){function Z(k,x){var j,R,w,H,X;void 0===x&&(x=ie.defaultChatSDKConfig),this.authSettings=null,this.authenticatedUserToken=null,this.conversation=null,this.callingOption=T.default.NoCalling,this.telemetry=null,this.ic3ClientLogger=null,this.ocSdkLogger=null,this.isPersistentChat=!1,this.isChatReconnect=!1,this.reconnectId=null,this.refreshTokenTimer=null,this.debug=!1,this.omnichannelConfig=k,this.chatSDKConfig=u(u({},ie.defaultChatSDKConfig),x),this.isInitialized=!1,this.requestId=$.uuidv4(),this.chatToken={},this.liveChatConfig={},this.dataMaskingRules={},this.authSettings=null,this.preChatSurvey=null,this.telemetry=h.default(this.debug),this.scenarioMarker=new q.default(this.omnichannelConfig),this.ic3ClientLogger=f.createIC3ClientLogger(this.omnichannelConfig),this.ocSdkLogger=f.createOCSDKLogger(this.omnichannelConfig),this.scenarioMarker.useTelemetry(this.telemetry),this.ic3ClientLogger.useTelemetry(this.telemetry),this.ocSdkLogger.useTelemetry(this.telemetry),ee.default(k),ie.default(x),(null===(j=this.chatSDKConfig.telemetry)||void 0===j?void 0:j.disable)&&(null===(R=this.telemetry)||void 0===R||R.disable()),(null===(w=this.chatSDKConfig.telemetry)||void 0===w?void 0:w.ariaTelemetryKey)&&this.telemetry.initialize(this.chatSDKConfig.telemetry.ariaTelemetryKey),null===(H=this.ic3ClientLogger)||void 0===H||H.setRequestId(this.requestId),null===(X=this.ocSdkLogger)||void 0===X||X.setRequestId(this.requestId)}return Z.prototype.setDebug=function(k){var x,j,R;this.debug=k,null===(x=this.telemetry)||void 0===x||x.setDebug(k),this.scenarioMarker.setDebug(k),null===(j=this.ic3ClientLogger)||void 0===j||j.setDebug(k),null===(R=this.ocSdkLogger)||void 0===R||R.setDebug(k)},Z.prototype.initialize=function(){return I(this,void 0,void 0,function(){var k,x;return v(this,function(R){switch(R.label){case 0:if(this.scenarioMarker.startScenario(z.default.InitializeChatSDK),this.isInitialized)return this.scenarioMarker.completeScenario(z.default.InitializeChatSDK),[2,this.liveChatConfig];R.label=1;case 1:return R.trys.push([1,5,,6]),this.OCSDKProvider=$.SDKProvider,[4,$.SDKProvider.getSDK(this.omnichannelConfig,{},this.ocSdkLogger)];case 2:return k=R.sent(),[4,this.getIC3Client()];case 3:return x=R.sent(),this.OCClient=k,this.IC3Client=x,[4,this.getChatConfig()];case 4:return R.sent(),this.isInitialized=!0,this.scenarioMarker.completeScenario(z.default.InitializeChatSDK),[3,6];case 5:return R.sent(),this.scenarioMarker.failScenario(z.default.InitializeChatSDK),[3,6];case 6:return[2,this.liveChatConfig]}})})},Z.prototype.getChatReconnectContext=function(k){return void 0===k&&(k={}),I(this,void 0,void 0,function(){var x,R,w,X,re,H;return v(this,function(Y){switch(Y.label){case 0:if(this.scenarioMarker.startScenario(z.default.GetChatReconnectContext,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),x={reconnectId:null,redirectURL:null},!this.authenticatedUserToken)return[3,5];Y.label=1;case 1:return Y.trys.push([1,3,,4]),[4,this.OCClient.getReconnectableChats({authenticatedUserToken:this.authenticatedUserToken})];case 2:return(R=Y.sent())&&R.reconnectid&&(x.reconnectId=R.reconnectid),this.scenarioMarker.completeScenario(z.default.GetChatReconnectContext,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,4];case 3:return w=Y.sent(),H={response:"OCClientGetReconnectableChatsFailed"},this.scenarioMarker.failScenario(z.default.GetChatReconnectContext,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(H)}),console.error("OmnichannelChatSDK/GetChatReconnectContext/error "+w),[3,4];case 4:return[3,9];case 5:if(!k.reconnectId)return[3,9];Y.label=6;case 6:return Y.trys.push([6,8,,9]),[4,this.OCClient.getReconnectAvailability(k.reconnectId)];case 7:return(X=Y.sent())&&!X.isReconnectAvailable?X.reconnectRedirectionURL&&(x.redirectURL=X.reconnectRedirectionURL):x.reconnectId=k.reconnectId,this.scenarioMarker.completeScenario(z.default.GetChatReconnectContext,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,9];case 8:return re=Y.sent(),H={response:"OCClientGetReconnectAvailabilityFailed"},this.scenarioMarker.failScenario(z.default.GetChatReconnectContext,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(H)}),console.error("OmnichannelChatSDK/GetChatReconnectContext/error "+re),[3,9];case 9:return[2,x]}})})},Z.prototype.startChat=function(k){var x,j,R,w,H,X,re,Y;return void 0===k&&(k={}),I(this,void 0,void 0,function(){var se,pe,he,Re,ve,Ce,_e,ce,Ge=this;return v(this,function(Ie){switch(Ie.label){case 0:if(this.scenarioMarker.startScenario(z.default.StartChat,{RequestId:this.requestId}),this.isChatReconnect&&!(null===(x=this.chatSDKConfig.chatReconnect)||void 0===x?void 0:x.disable)&&!this.isPersistentChat&&k.reconnectId&&(this.reconnectId=k.reconnectId),!this.isPersistentChat||(null===(j=this.chatSDKConfig.persistentChat)||void 0===j?void 0:j.disable))return[3,4];Ie.label=1;case 1:return Ie.trys.push([1,3,,4]),[4,this.OCClient.getReconnectableChats({authenticatedUserToken:this.authenticatedUserToken})];case 2:return(se=Ie.sent())&&se.reconnectid&&(this.reconnectId=se.reconnectid),[3,4];case 3:throw Ie.sent(),ce={response:"OCClientGetReconnectableChatsFailed"},Error(ce.response);case 4:return!k.liveChatContext||this.isPersistentChat||this.isChatReconnect?[3,6]:(this.chatToken=k.liveChatContext.chatToken||{},this.requestId=k.liveChatContext.requestId||$.uuidv4(),[4,this.getConversationDetails()]);case 5:if(pe=Ie.sent(),0===Object.keys(pe).length)throw ce={response:"InvalidConversation"},this.scenarioMarker.failScenario(z.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(ce)}),console.error("Conversation not found"),Error(ce.response);if(pe.state===N.default.WrapUp||pe.state===N.default.Closed)throw ce={response:"ClosedConversation"},this.scenarioMarker.failScenario(z.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(ce)}),console.error("Unable to join conversation that's in '"+pe.state+"' state"),Error(ce.response);Ie.label=6;case 6:return this.chatToken&&0===Object.keys(this.chatToken).length?[4,this.getChatToken(!1)]:[3,8];case 7:Ie.sent(),Ie.label=8;case 8:null===(R=this.ic3ClientLogger)||void 0===R||R.setChatId(this.chatToken.chatId||""),null===(w=this.ocSdkLogger)||void 0===w||w.setChatId(this.chatToken.chatId||""),he={initContext:{}},this.isPersistentChat&&!(null===(H=this.chatSDKConfig.persistentChat)||void 0===H?void 0:H.disable)&&(he.reconnectId=this.reconnectId),this.isChatReconnect&&!(null===(X=this.chatSDKConfig.chatReconnect)||void 0===X?void 0:X.disable)&&!this.isPersistentChat&&(he.reconnectId=this.reconnectId),k.customContext&&(he.initContext.customContextData=k.customContext),k.browser&&(he.initContext.browser=k.browser),k.os&&(he.initContext.os=k.os),k.locale&&(he.initContext.locale=k.locale),k.device&&(he.initContext.device=k.device),k.preChatResponse&&(he.initContext.preChatResponse=k.preChatResponse),k.initContext&&(he.initContext=k.initContext),this.authenticatedUserToken&&(he.authenticatedUserToken=this.authenticatedUserToken),Ie.label=9;case 9:return Ie.trys.push([9,11,,12]),[4,this.OCClient.sessionInit(this.requestId,he)];case 10:return Ie.sent(),[3,12];case 11:return Re=Ie.sent(),ce={response:"OCClientSessionInitFailed"},this.scenarioMarker.failScenario(z.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(ce)}),console.error("OmnichannelChatSDK/startChat/sessionInit/error "+Re),[2,Re];case 12:return Ie.trys.push([12,14,,15]),[4,this.IC3Client.initialize({token:this.chatToken.token,regionGtms:this.chatToken.regionGTMS,visitor:!0})];case 13:return Ie.sent(),[3,15];case 14:return ve=Ie.sent(),ce={response:"IC3ClientInitializeFailed"},this.scenarioMarker.failScenario(z.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(ce)}),console.error("OmnichannelChatSDK/startChat/initialize/error "+ve),[2,ve];case 15:return Ie.trys.push([15,17,,18]),Ce=this,[4,this.IC3Client.joinConversation(this.chatToken.chatId)];case 16:return Ce.conversation=Ie.sent(),this.scenarioMarker.completeScenario(z.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,18];case 17:return _e=Ie.sent(),ce={response:"IC3ClientJoinConversationFailed"},this.scenarioMarker.failScenario(z.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(ce)}),console.error("OmnichannelChatSDK/startChat/joinConversation/error "+_e),[2,_e];case 18:return this.isPersistentChat&&!(null===(re=this.chatSDKConfig.persistentChat)||void 0===re?void 0:re.disable)&&(this.refreshTokenTimer=setInterval(function(){return I(Ge,void 0,void 0,function(){return v(this,function(ke){switch(ke.label){case 0:return[4,this.getChatToken(!1)];case 1:return ke.sent(),this.updateChatToken(this.chatToken.token,this.chatToken.regionGTMS),[2]}})})},null===(Y=this.chatSDKConfig.persistentChat)||void 0===Y?void 0:Y.tokenUpdateTime)),[2]}})})},Z.prototype.endChat=function(){var k,x,j,R,w,H;return I(this,void 0,void 0,function(){var X,re,ne;return v(this,function(le){switch(le.label){case 0:this.scenarioMarker.startScenario(z.default.EndChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),X={},this.isPersistentChat&&!(null===(k=this.chatSDKConfig.persistentChat)||void 0===k?void 0:k.disable)&&(re=null!==this.reconnectId,X.isPersistentChat=this.isPersistentChat,X.isReconnectChat=re),this.isChatReconnect&&!(null===(x=this.chatSDKConfig.chatReconnect)||void 0===x?void 0:x.disable)&&!this.isPersistentChat&&(X.isReconnectChat=null!==this.reconnectId),this.authenticatedUserToken&&(X.authenticatedUserToken=this.authenticatedUserToken),le.label=1;case 1:return le.trys.push([1,3,,4]),[4,this.OCClient.sessionClose(this.requestId,X)];case 2:return le.sent(),this.scenarioMarker.completeScenario(z.default.EndChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.conversation.disconnect(),this.conversation=null,this.requestId=$.uuidv4(),this.chatToken={},this.reconnectId=null,null===(j=this.ic3ClientLogger)||void 0===j||j.setRequestId(this.requestId),null===(R=this.ic3ClientLogger)||void 0===R||R.setChatId(""),null===(w=this.ocSdkLogger)||void 0===w||w.setRequestId(this.requestId),null===(H=this.ocSdkLogger)||void 0===H||H.setChatId(""),[3,4];case 3:return ne=le.sent(),this.scenarioMarker.failScenario(z.default.EndChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify({response:"OCClientSessionCloseFailed"})}),console.error("OmnichannelChatSDK/endChat/error "+ne),[2,ne];case 4:return null!==this.refreshTokenTimer&&(clearInterval(this.refreshTokenTimer),this.refreshTokenTimer=null),[2]}})})},Z.prototype.getCurrentLiveChatContext=function(){return I(this,void 0,void 0,function(){var k,j;return v(this,function(R){switch(R.label){case 0:return[4,this.getChatToken()];case 1:return k=R.sent(),j={chatToken:k,requestId:this.requestId},0===Object.keys(j.chatToken).length?[2,{}]:[2,j]}})})},Z.prototype.getConversationDetails=function(){var k,x;return I(this,void 0,void 0,function(){var j,H,X,re;return v(this,function(Y){switch(Y.label){case 0:this.scenarioMarker.startScenario(z.default.GetConversationDetails,{RequestId:this.requestId,ChatId:(null===(k=this.chatToken)||void 0===k?void 0:k.chatId)||""}),Y.label=1;case 1:return Y.trys.push([1,3,,4]),[4,this.OCClient.getLWIDetails(this.requestId)];case 2:return j=Y.sent(),X={state:j.State,conversationId:j.ConversationId},(H=j.AgentAcceptedOn)&&(X.agentAcceptedOn=H),this.scenarioMarker.completeScenario(z.default.GetConversationDetails,{RequestId:this.requestId,ChatId:(null===(x=this.chatToken)||void 0===x?void 0:x.chatId)||""}),[2,X];case 3:return re=Y.sent(),this.scenarioMarker.failScenario(z.default.GetConversationDetails,{RequestId:this.requestId,ChatId:this.chatToken.chatId||""}),console.error("OmnichannelChatSDK/getConversationDetails/error "+re),[3,4];case 4:return[2,{}]}})})},Z.prototype.getPreChatSurvey=function(k){return void 0===k&&(k=!0),I(this,void 0,void 0,function(){return v(this,function(x){return[2,k?JSON.parse(this.preChatSurvey):this.preChatSurvey]})})},Z.prototype.getLiveChatConfig=function(k){return void 0===k&&(k=!0),I(this,void 0,void 0,function(){return v(this,function(x){return k?[2,this.liveChatConfig]:[2,this.getChatConfig()]})})},Z.prototype.getChatToken=function(k){var x,j;return void 0===k&&(k=!0),I(this,void 0,void 0,function(){var R,w,X,Y,ne,se,le;return v(this,function(pe){switch(pe.label){case 0:if(this.scenarioMarker.startScenario(z.default.GetChatToken,{RequestId:this.requestId}),k)return[3,5];pe.label=1;case 1:return pe.trys.push([1,3,,4]),R={},this.authenticatedUserToken&&(R.authenticatedUserToken=this.authenticatedUserToken),this.isPersistentChat&&!(null===(x=this.chatSDKConfig.persistentChat)||void 0===x?void 0:x.disable)&&(R.reconnectId=this.reconnectId),this.isChatReconnect&&!(null===(j=this.chatSDKConfig.chatReconnect)||void 0===j?void 0:j.disable)&&!this.isPersistentChat&&(R.reconnectId=this.reconnectId),[4,this.OCClient.getChatToken(this.requestId,R)];case 2:return w=pe.sent(),X=w.Token,Y=w.ExpiresIn,ne=w.VisitorId,se=w.VoiceVideoCallToken,this.chatToken={chatId:w.ChatId,regionGTMS:JSON.parse(w.RegionGtms),requestId:this.requestId,token:X,expiresIn:Y,visitorId:ne,voiceVideoCallToken:se},this.scenarioMarker.completeScenario(z.default.GetChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,4];case 3:return le=pe.sent(),this.scenarioMarker.failScenario(z.default.GetChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify({response:"OCClientGetChatTokenFailed"})}),console.error("OmnichannelChatSDK/getChatToken/error "+le),[3,4];case 4:return[3,6];case 5:this.scenarioMarker.completeScenario(z.default.GetChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),pe.label=6;case 6:return[2,this.chatToken]}})})},Z.prototype.getCallingToken=function(){return I(this,void 0,void 0,function(){return v(this,function(k){return this.chatToken&&0===Object.keys(this.chatToken).length?[2,""]:this.chatToken.voiceVideoCallToken?(console.log("calling:acs"),[2,this.chatToken.voiceVideoCallToken.Token]):(console.log("calling:skype"),[2,this.chatToken.token])})})},Z.prototype.getMessages=function(){var k;return I(this,void 0,void 0,function(){return v(this,function(x){return[2,null===(k=this.conversation)||void 0===k?void 0:k.getMessages()]})})},Z.prototype.getDataMaskingRules=function(){return I(this,void 0,void 0,function(){return v(this,function(k){return[2,this.dataMaskingRules]})})},Z.prototype.sendMessage=function(k){return I(this,void 0,void 0,function(){var x,j,R,w,H,X,Y,ne,se,le;return v(this,function(ce){if(j=(x=this.chatSDKConfig.dataMasking).disable,R=x.maskingCharacter,w=k.content,Object.keys(this.dataMaskingRules).length>0&&!j)for(H=0,X=Object.values(this.dataMaskingRules);H<X.length;H++)for(Y=new RegExp(X[H],"g"),ne=void 0;ne=Y.exec(w);)se=ne[0].replace(/./g,R),w=w.replace(ne[0],se);return k.content=w,le={content:k.content,timestamp:new Date,contentType:W.default.Text,deliveryMode:A.default.Bridged,messageType:B.default.UserMessage,properties:void 0,tags:_(S.defaultMessageTags),sender:{displayName:"Customer",id:"customer",type:F.default.User}},k.tags&&(le.tags=k.tags),k.timestamp&&(le.timestamp=k.timestamp),[2,this.conversation.sendMessage(le)]})})},Z.prototype.onNewMessage=function(k,x){var j;return void 0===x&&(x={}),I(this,void 0,void 0,function(){var R,w,H,X,re,Y;return v(this,function(ne){switch(ne.label){case 0:return R=new Set,x.rehydrate?(this.debug&&console.log("[OmnichannelChatSDK][onNewMessage] rehydrate"),[4,this.getMessages()]):[3,2];case 1:for(w=ne.sent(),H=0,X=w.reverse();H<X.length;H++)!R.has(Y=(re=X[H]).clientmessageid)&&(R.add(Y),k(re));ne.label=2;case 2:return null===(j=this.conversation)||void 0===j||j.registerOnNewMessage(function(se){var le=se.clientmessageid,ce=se.messageType;D.isCustomerMessage(se)||R.has(le)||ce!==B.default.Typing&&k(se)}),[2]}})})},Z.prototype.sendTypingEvent=function(){return I(this,void 0,void 0,function(){var k,x,j,R;return v(this,function(w){switch(w.label){case 0:k="{isTyping: 0}",this.scenarioMarker.startScenario(z.default.SendTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),w.label=1;case 1:return w.trys.push([1,5,,6]),[4,this.conversation.indicateTypingStatus(0)];case 2:return w.sent(),[4,this.conversation.getMembers()];case 3:return x=w.sent(),j=x.filter(function(H){return H.type===F.default.Bot}),[4,this.conversation.sendMessageToBot(j[0].id,{payload:k})];case 4:return w.sent(),this.scenarioMarker.completeScenario(z.default.SendTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,6];case 5:return R=w.sent(),console.error("OmnichannelChatSDK/sendTypingEvent/error"),this.scenarioMarker.failScenario(z.default.SendTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,R];case 6:return[2]}})})},Z.prototype.onTypingEvent=function(k){var x;return I(this,void 0,void 0,function(){return v(this,function(j){return null===(x=this.conversation)||void 0===x||x.registerOnNewMessage(function(R){var w=R.messageType;D.isCustomerMessage(R)||w===B.default.Typing&&k(R)}),[2]})})},Z.prototype.onAgentEndSession=function(k){var x;return I(this,void 0,void 0,function(){var j=this;return v(this,function(R){this.scenarioMarker.startScenario(z.default.OnAgentEndSession,{RequestId:this.requestId,ChatId:this.chatToken.chatId});try{null===(x=this.conversation)||void 0===x||x.registerOnThreadUpdate(function(w){1===w.members.length&&(k(w),null!==j.refreshTokenTimer&&(clearInterval(j.refreshTokenTimer),j.refreshTokenTimer=null))}),this.scenarioMarker.completeScenario(z.default.OnAgentEndSession,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(w){this.scenarioMarker.failScenario(z.default.OnAgentEndSession,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}return[2]})})},Z.prototype.uploadFileAttachment=function(k){return I(this,void 0,void 0,function(){var x,j,R;return v(this,function(w){switch(w.label){case 0:return this.scenarioMarker.startScenario(z.default.UploadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),L.default.isReactNative()||L.default.isNode()?[4,this.conversation.sendFileData(k,b.default.AmsBasedFileSharing)]:[3,2];case 1:return x=w.sent(),[3,4];case 2:return[4,this.conversation.uploadFile(k,b.default.AmsBasedFileSharing)];case 3:x=w.sent(),w.label=4;case 4:j={content:"",timestamp:new Date,contentType:W.default.Text,deliveryMode:A.default.Bridged,messageType:B.default.UserMessage,tags:_(S.defaultMessageTags),sender:{displayName:"Customer",id:"customer",type:F.default.User},fileMetadata:x},w.label=5;case 5:return w.trys.push([5,7,,8]),[4,this.conversation.sendFileMessage(x,j)];case 6:return w.sent(),this.scenarioMarker.completeScenario(z.default.UploadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,j];case 7:return R=w.sent(),console.error("OmnichannelChatSDK/uploadFileAttachment/error: "+R),this.scenarioMarker.failScenario(z.default.UploadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,R];case 8:return[2]}})})},Z.prototype.downloadFileAttachment=function(k){return I(this,void 0,void 0,function(){var x,j;return v(this,function(R){switch(R.label){case 0:this.scenarioMarker.startScenario(z.default.DownloadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),R.label=1;case 1:return R.trys.push([1,3,,4]),[4,this.conversation.downloadFile(k)];case 2:return x=R.sent(),this.scenarioMarker.completeScenario(z.default.DownloadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,x];case 3:throw j=R.sent(),console.error("OmnichannelChatSDK/downloadFileAttachment/error: "+j),this.scenarioMarker.failScenario(z.default.DownloadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),new Error("DownloadFileAttachmentFailed");case 4:return[2]}})})},Z.prototype.emailLiveChatTranscript=function(k){return I(this,void 0,void 0,function(){var x,R;return v(this,function(w){x={},this.scenarioMarker.startScenario(z.default.EmailLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId});try{return this.authenticatedUserToken&&(x.authenticatedUserToken=this.authenticatedUserToken),R=this.OCClient.emailTranscript(this.requestId,this.chatToken.token,{ChatId:this.chatToken.chatId,EmailAddress:k.emailAddress,DefaultAttachmentMessage:k.attachmentMessage,CustomerLocale:k.locale},x),this.scenarioMarker.completeScenario(z.default.EmailLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,R]}catch(H){console.error("OmnichannelChatSDK/emailLiveChatTranscript/error: "+H),this.scenarioMarker.failScenario(z.default.EmailLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}return[2]})})},Z.prototype.getLiveChatTranscript=function(){return I(this,void 0,void 0,function(){var k,x;return v(this,function(j){k={},this.scenarioMarker.startScenario(z.default.GetLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId});try{return this.authenticatedUserToken&&(k.authenticatedUserToken=this.authenticatedUserToken),x=this.OCClient.getChatTranscripts(this.requestId,this.chatToken.chatId,this.chatToken.token,k),this.scenarioMarker.completeScenario(z.default.GetLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,x]}catch(R){this.scenarioMarker.failScenario(z.default.GetLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}return[2]})})},Z.prototype.createChatAdapter=function(k){return void 0===k&&(k=y.default.IC3),I(this,void 0,void 0,function(){var x=this;return v(this,function(j){return L.default.isNode()||L.default.isReactNative()?[2,Promise.reject("ChatAdapter is only supported on browser")]:k!==y.default.IC3?[2,Promise.reject("ChatAdapter for protocol "+k+" currently not supported")]:[2,new Promise(function(R,w){return I(x,void 0,void 0,function(){var H,re,X=this;return v(this,function(Y){switch(Y.label){case 0:return H=this.resolveChatAdapterUrl(k),null===(re=this.telemetry)||void 0===re||re.setCDNPackages({IC3Adapter:H}),this.scenarioMarker.startScenario(z.default.CreateIC3Adapter),[4,V.loadScript(H,function(){X.debug&&console.debug("IC3Adapter loaded!");var ne={chatToken:X.chatToken,userDisplayName:"Customer",userId:"teamsvisitor",sdkURL:X.resolveIC3ClientUrl(),sdk:X.IC3Client},se=new window.Microsoft.BotFramework.WebChat.IC3Adapter(ne);se.logger=X.ic3ClientLogger,window.Microsoft.BotFramework.WebChat.IC3SDKProvider.disposeSdk=function(){},X.scenarioMarker.completeScenario(z.default.CreateIC3Adapter),R(se)},function(){X.scenarioMarker.failScenario(z.default.CreateIC3Adapter),w("Failed to load IC3Adapter")})];case 1:return Y.sent(),[2]}})})})]})})},Z.prototype.getVoiceVideoCalling=function(k){return void 0===k&&(k={}),I(this,void 0,void 0,function(){var x,R,w,H,X=this;return v(this,function(re){switch(re.label){case 0:return L.default.isNode()||L.default.isReactNative()?[2,Promise.reject("VoiceVideoCalling is only supported on browser")]:this.callingOption.toString()===T.default.NoCalling.toString()?[2,Promise.reject("Voice and video call is not enabled")]:[4,this.getChatConfig()];case 1:return x=re.sent(),R=x.LiveWSAndLiveChatEngJoin.msdyn_widgetsnippet,w=new RegExp('src="(https:\\/\\/[\\w-.]+)[\\w-.\\/]+"'),(H=R.match(w))&&H.length?[2,new Promise(function(Y,ne){return I(X,void 0,void 0,function(){var se,le,pe,he,ce=this;return v(this,function(Re){switch(Re.label){case 0:return se=H[1]+"/livechatwidget/WebChatControl/lib/spool-sdk/sdk.bundle.js",null===(pe=this.telemetry)||void 0===pe||pe.setCDNPackages({SpoolSDK:se}),this.scenarioMarker.startScenario(z.default.GetVoiceVideoCalling),[4,V.loadScript(se,function(){ce.debug&&console.debug(se+" loaded!")},function(){ce.scenarioMarker.failScenario(z.default.GetVoiceVideoCalling,{ExceptionDetails:JSON.stringify({response:"SpoolSDKLoadFailed"})}),ne("Failed to load SpoolSDK")})];case 1:return Re.sent(),le=H[1]+"/livechatwidget/WebChatControl/lib/LiveChatWidgetLibs.min.js",null===(he=this.telemetry)||void 0===he||he.setCDNPackages({VoiceVideoCalling:le}),[4,V.loadScript(le,function(){return I(ce,void 0,void 0,function(){var ve;return v(this,function(Ce){switch(Ce.label){case 0:return this.debug&&console.debug(le+" loaded!"),[4,p.default(k)];case 1:return ve=Ce.sent(),this.scenarioMarker.completeScenario(z.default.GetVoiceVideoCalling),ve.useScenarioMarker(this.scenarioMarker),Y(ve),[2]}})})},function(){return I(ce,void 0,void 0,function(){return v(this,function(Ce){return this.scenarioMarker.failScenario(z.default.GetVoiceVideoCalling,{ExceptionDetails:JSON.stringify({response:"VoiceVideoCallingLoadFailed"})}),ne("Failed to load VoiceVideoCalling"),[2]})})})];case 2:return Re.sent(),[2]}})})})]:[2]}})})},Z.prototype.getIC3Client=function(){return I(this,void 0,void 0,function(){var k,x=this;return v(this,function(j){switch(j.label){case 0:return L.default.isNode()||L.default.isReactNative()?(this.debug&&console.debug("IC3Core"),this.scenarioMarker.startScenario(z.default.GetIC3Client),this.IC3SDKProvider=ae.SDKProvider,[4,ae.SDKProvider.getSDK({hostType:m.default.Page,protocolType:K.default.IC3V1SDK})]):[3,2];case 1:return(k=j.sent()).setDebug(this.debug),this.scenarioMarker.completeScenario(z.default.GetIC3Client),[2,k];case 2:return this.debug&&console.debug("IC3Client"),[2,new Promise(function(R,w){return I(x,void 0,void 0,function(){var H,re,X=this;return v(this,function(Y){switch(Y.label){case 0:return H=this.resolveIC3ClientUrl(),null===(re=this.telemetry)||void 0===re||re.setCDNPackages({IC3Client:H}),this.scenarioMarker.startScenario(z.default.GetIC3Client),window.addEventListener("ic3:sdk:load",function(){return I(X,void 0,void 0,function(){var ne,se,le;return v(this,function(ce){switch(ce.label){case 0:return this.debug&&console.debug("ic3:sdk:load"),ne=window.Microsoft.CRM.Omnichannel.IC3Client.SDK,this.IC3SDKProvider=se=ne.SDKProvider,[4,se.getSDK({hostType:m.default.IFrame,protocolType:K.default.IC3V1SDK,logger:this.ic3ClientLogger})];case 1:return le=ce.sent(),this.scenarioMarker.completeScenario(z.default.GetIC3Client),R(le),[2]}})})}),[4,V.loadScript(H,function(){X.debug&&console.debug("IC3Client loaded!")},function(){X.scenarioMarker.failScenario(z.default.GetIC3Client,{ExceptionDetails:JSON.stringify({response:"IC3ClientLoadFailed"})}),w("Failed to load IC3Client")})];case 1:return Y.sent(),[2]}})})})]}})})},Z.prototype.getChatConfig=function(){return I(this,void 0,void 0,function(){var k,x,j,R,H,X,re,Y,ne,se,le,ce,pe;return v(this,function(he){switch(he.label){case 0:return he.trys.push([0,5,,6]),[4,this.OCClient.getChatConfig()];case 1:return k=he.sent(),j=k.LiveChatConfigAuthSettings,R=k.LiveWSAndLiveChatEngJoin,(x=k.DataMaskingInfo).setting.msdyn_maskforcustomer&&(this.dataMaskingRules=x.dataMaskingRules),j&&(this.authSettings=j),H=R.PreChatSurvey,re=R.msdyn_callingoptions,se=!0===(X=R.msdyn_prechatenabled)||"true"==X,le=!0===(ne=R.msdyn_enablechatreconnect)||"true"==ne,(null==(Y=R.msdyn_conversationmode)?void 0:Y.toString())===C.default.PersistentChat.toString()&&(this.isPersistentChat=!0),le&&!this.isPersistentChat&&(this.isChatReconnect=!0),se&&H&&H.trim().length>0&&(this.preChatSurvey=H),this.authSettings?this.chatSDKConfig.getAuthToken?(this.debug&&console.log("OmnichannelChatSDK/getChatConfig/auth settings with auth and getAuthToken!",this.authSettings,this.chatSDKConfig.getAuthToken),[4,this.chatSDKConfig.getAuthToken()]):[3,3]:[3,4];case 2:return(ce=he.sent())?this.authenticatedUserToken=ce:console.warn("OmnichannelChatSDK/getChatConfig/auth, chat requires auth, but getAuthToken() returned null"),[3,4];case 3:console.warn("OmnichannelChatSDK/getChatConfig/auth, chat requires auth, but getAuthToken() is missing"),he.label=4;case 4:return this.preChatSurvey&&this.debug&&console.log("Prechat Survey!"),this.callingOption=re,this.liveChatConfig=k,[2,this.liveChatConfig];case 5:return pe=he.sent(),console.error("OmnichannelChatSDK/getChatConfig/error "+pe),[2,pe];case 6:return[2]}})})},Z.prototype.resolveIC3ClientUrl=function(){return this.chatSDKConfig.ic3Config&&"ic3ClientCDNUrl"in this.chatSDKConfig.ic3Config?this.chatSDKConfig.ic3Config.ic3ClientCDNUrl:this.chatSDKConfig.ic3Config&&"ic3ClientVersion"in this.chatSDKConfig.ic3Config?O.default.getIC3ClientCDNUrl(this.chatSDKConfig.ic3Config.ic3ClientVersion):O.default.getIC3ClientCDNUrl()},Z.prototype.resolveChatAdapterUrl=function(k){if(k!==y.default.IC3)throw new Error("ChatAdapter for protocol "+k+" currently not supported");return this.chatSDKConfig.chatAdapterConfig&&"webChatIC3AdapterCDNUrl"in this.chatSDKConfig.chatAdapterConfig?this.chatSDKConfig.chatAdapterConfig.webChatIC3AdapterCDNUrl:this.chatSDKConfig.chatAdapterConfig&&"webChatIC3AdapterVersion"in this.chatSDKConfig.chatAdapterConfig?O.default.getIC3AdapterCDNUrl(this.chatSDKConfig.chatAdapterConfig.webChatIC3AdapterVersion):O.default.getIC3AdapterCDNUrl()},Z.prototype.updateChatToken=function(k,x){return I(this,void 0,void 0,function(){var R;return v(this,function(H){switch(H.label){case 0:this.scenarioMarker.startScenario(z.default.UpdateChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),H.label=1;case 1:return H.trys.push([1,3,,4]),[4,this.IC3Client.initialize({token:k,regionGtms:x,visitor:!0})];case 2:return H.sent(),this.scenarioMarker.completeScenario(z.default.UpdateChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,4];case 3:return R=H.sent(),this.scenarioMarker.failScenario(z.default.UpdateChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify({response:"UpdateChatTokenFailed"})}),console.error("OmnichannelChatSDK/updateChatToken/error "+R),[3,4];case 4:return[2]}})})},Z}();g.default=ue},6633:function(G,g,c){"use strict";var u=this&&this.__awaiter||function(f,h,p,S){return new(p||(p=Promise))(function(b,m){function D(V){try{N(S.next(V))}catch(W){m(W)}}function O(V){try{N(S.throw(V))}catch(W){m(W)}}function N(V){V.done?b(V.value):function(b){return b instanceof p?b:new p(function(m){m(b)})}(V.value).then(D,O)}N((S=S.apply(f,h||[])).next())})},I=this&&this.__generator||function(f,h){var S,A,b,m,p={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return m={next:D(0),throw:D(1),return:D(2)},"function"==typeof Symbol&&(m[Symbol.iterator]=function(){return this}),m;function D(N){return function(V){return function(N){if(S)throw new TypeError("Generator is already executing.");for(;p;)try{if(S=1,A&&(b=2&N[0]?A.return:N[0]?A.throw||((b=A.return)&&b.call(A),0):A.next)&&!(b=b.call(A,N[1])).done)return b;switch(A=0,b&&(N=[2&N[0],b.value]),N[0]){case 0:case 1:b=N;break;case 4:return p.label++,{value:N[1],done:!1};case 5:p.label++,A=N[1],N=[0];continue;case 7:N=p.ops.pop(),p.trys.pop();continue;default:if(!(b=(b=p.trys).length>0&&b[b.length-1])&&(6===N[0]||2===N[0])){p=0;continue}if(3===N[0]&&(!b||N[1]>b[0]&&N[1]<b[3])){p.label=N[1];break}if(6===N[0]&&p.label<b[1]){p.label=b[1],b=N;break}if(b&&p.label<b[2]){p.label=b[2],p.ops.push(N);break}b[2]&&p.ops.pop(),p.trys.pop();continue}N=h.call(f,p)}catch(V){N=[6,V],A=0}finally{S=b=0}if(5&N[0])throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}([N,V])}}};Object.defineProperty(g,"__esModule",{value:!0}),g.VoiceVideoCallingProxy=void 0;var v=c(9600),_=(()=>{return(f=_||(_={}))[f.Voice=19237e4]="Voice",f[f.Video=19238e4]="Video",f[f.Cobrowse=19239e4]="Cobrowse",_;var f})(),T=(()=>{return(f=T||(T={})).Accept="accept",f.Reject="reject",f.Connect="connect",f.End="end",T;var f})(),y=function(){function f(){this.debug=!1,this.proxy=window.Microsoft.OmniChannel.SDK.VoiceVideoCalling,this.proxyInstance=this.proxy.getInstance()}return f.getInstance=function(){return this._instance||(this._instance=new f),this._instance},f.prototype.setDebug=function(h){this.debug=h},f.prototype.useScenarioMarker=function(h){this.scenarioMarker=h},f.prototype.load=function(h){return void 0===h&&(h={}),u(this,void 0,void 0,function(){return I(this,function(p){return h.logger&&(this.logger=h.logger),this.proxyInstance.load(h),[2]})})},f.prototype.isInitialized=function(){return this.proxyInstance.isInitialized()},f.prototype.initialize=function(h){var p,S,A,b,m,D,O,N,V;return u(this,void 0,void 0,function(){return I(this,function(B){switch(B.label){case 0:return this.debug&&console.debug("[VoiceVideoCallingProxy] VoiceVideoCallingParams: "+JSON.stringify(h)),this.callingParams=h,this.callId=null===(p=this.callingParams)||void 0===p?void 0:p.chatToken.chatId,null===(S=this.scenarioMarker)||void 0===S||S.startScenario(v.default.InitializeVoiceVideoCallingSDK,{CallId:this.callId||""}),this.debug&&console.debug("[VoiceVideoCallingProxy][initialize] _isLoaded: "+this.proxyInstance._isLoaded),this.proxyInstance._isLoaded?[3,2]:[4,this.proxyInstance.load(this.logger||{})];case 1:B.sent(),B.label=2;case 2:return B.trys.push([2,4,,5]),[4,this.proxyInstance.initialize({skypeid:null===(A=this.callingParams)||void 0===A?void 0:A.chatToken.visitorId,accesstoken:null===(b=this.callingParams)||void 0===b?void 0:b.chatToken.token,environment:(null===(m=this.callingParams)||void 0===m?void 0:m.environment)||"prod",selfVideoHTMLElementId:null===(D=this.callingParams)||void 0===D?void 0:D.selfVideoHTMLElementId,remoteVideoHTMLElementId:null===(O=this.callingParams)||void 0===O?void 0:O.remoteVideoHTMLElementId})];case 3:return B.sent(),null===(N=this.scenarioMarker)||void 0===N||N.completeScenario(v.default.InitializeVoiceVideoCallingSDK,{CallId:this.callId||""}),[3,5];case 4:return B.sent(),null===(V=this.scenarioMarker)||void 0===V||V.failScenario(v.default.InitializeVoiceVideoCallingSDK,{CallId:this.callId||""}),[3,5];case 5:return[2]}})})},f.prototype.addEventListener=function(h,p){var S=this;this.proxyInstance.registerEvent(h,function(A){var b,m=A.callId;S.debug&&console.debug("[VoiceVideoCallingProxy]["+h+"] callId: "+m),m===(null===(b=S.callingParams)||void 0===b?void 0:b.chatToken.chatId)&&p(A)})},f.prototype.isMicrophoneMuted=function(){return this.proxyInstance.isMicrophoneMuted({callId:this.callId})},f.prototype.acceptCall=function(h){var p,S,A,b,m,D;return void 0===h&&(h={}),u(this,void 0,void 0,function(){var O,W,V;return I(this,function(B){switch(B.label){case 0:O=this.callId,null===(p=this.scenarioMarker)||void 0===p||p.startScenario(h.withVideo?v.default.AcceptVideoCall:v.default.AcceptVoiceCall,{CallId:O||""}),this.debug&&console.debug("[VoiceVideoCallingProxy][acceptCall] callId: "+O),this.debug&&console.debug(h),B.label=1;case 1:return B.trys.push([1,3,,4]),[4,this.proxyInstance.acceptCall({callId:O,withVideo:h.withVideo||!1})];case 2:return B.sent(),[3,4];case 3:return B.sent(),V={response:h.withVideo?"AcceptVideoCallFailed":"AcceptVoiceCallFailed"},null===(S=this.scenarioMarker)||void 0===S||S.failScenario(h.withVideo?v.default.AcceptVideoCall:v.default.AcceptVoiceCall,{CallId:O||"",ExceptionDetails:JSON.stringify(V)}),[3,4];case 4:W={SecondaryChannelType:h.withVideo?_.Video:_.Voice,SecondaryChannelEventType:T.Accept};try{null===(A=this.callingParams)||void 0===A||A.OCClient.makeSecondaryChannelEventRequest(null===(b=this.callingParams)||void 0===b?void 0:b.chatToken.requestId,W),null===(m=this.scenarioMarker)||void 0===m||m.completeScenario(h.withVideo?v.default.AcceptVideoCall:v.default.AcceptVoiceCall,{CallId:O||""}),this.debug&&console.debug("[VoiceVideoCallingProxy][acceptCall][makeSecondaryChannelEventRequest]")}catch(F){V={response:"OCClientMakeSecondaryChannelEventRequestFailed"},null===(D=this.scenarioMarker)||void 0===D||D.failScenario(h.withVideo?v.default.AcceptVideoCall:v.default.AcceptVoiceCall,{CallId:O||"",ExceptionDetails:JSON.stringify(V)}),console.error("[VoiceVideoCallingProxy][acceptCall][makeSecondaryChannelEventRequest] Failure "+F)}return[2]}})})},f.prototype.rejectCall=function(){var h,p,S,A,b,m;return u(this,void 0,void 0,function(){var D,V,N;return I(this,function(W){switch(W.label){case 0:D=this.callId,null===(h=this.scenarioMarker)||void 0===h||h.startScenario(v.default.RejectCall,{CallId:D||""}),this.debug&&console.debug("[VoiceVideoCallingProxy][rejectCall] callId: "+D),W.label=1;case 1:return W.trys.push([1,3,,4]),[4,this.proxyInstance.rejectCall({callId:D})];case 2:return W.sent(),null===(p=this.scenarioMarker)||void 0===p||p.completeScenario(v.default.RejectCall,{CallId:D||""}),[3,4];case 3:return W.sent(),N={response:"RejectCallFailed"},null===(S=this.scenarioMarker)||void 0===S||S.failScenario(v.default.RejectCall,{CallId:D||"",ExceptionDetails:JSON.stringify(N)}),[3,4];case 4:V={SecondaryChannelType:this.isRemoteVideoEnabled()?_.Video:_.Voice,SecondaryChannelEventType:T.Reject};try{null===(A=this.callingParams)||void 0===A||A.OCClient.makeSecondaryChannelEventRequest(null===(b=this.callingParams)||void 0===b?void 0:b.chatToken.requestId,V),this.debug&&console.debug("[VoiceVideoCallingProxy][rejectCall][makeSecondaryChannelEventRequest]")}catch(B){return N={response:"OCClientMakeSecondaryChannelEventRequestFailed"},null===(m=this.scenarioMarker)||void 0===m||m.failScenario(v.default.RejectCall,{CallId:D||"",ExceptionDetails:JSON.stringify(N)}),console.error("[VoiceVideoCallingProxy][rejectCall][makeSecondaryChannelEventRequest] Failure "+B),[2,B]}return[2]}})})},f.prototype.stopCall=function(){var h,p,S;return u(this,void 0,void 0,function(){var A;return I(this,function(m){switch(m.label){case 0:A=this.callId,null===(h=this.scenarioMarker)||void 0===h||h.startScenario(v.default.StopCall,{CallId:A||""}),this.debug&&console.debug("[VoiceVideoCallingProxy][stopCall] callId: "+A),m.label=1;case 1:return m.trys.push([1,3,,4]),[4,this.proxyInstance.stopCall({callId:A})];case 2:return m.sent(),null===(p=this.scenarioMarker)||void 0===p||p.completeScenario(v.default.StopCall,{CallId:A||""}),[3,4];case 3:return m.sent(),null===(S=this.scenarioMarker)||void 0===S||S.failScenario(v.default.StopCall,{CallId:A||""}),[3,4];case 4:return[2]}})})},f.prototype.toggleMute=function(){return u(this,void 0,void 0,function(){return I(this,function(p){return[2,this.proxyInstance.toggleMute({callId:this.callId})]})})},f.prototype.isRemoteVideoEnabled=function(){return this.proxyInstance.isRemoteVideoEnabled({callId:this.callId})},f.prototype.isLocalVideoEnabled=function(){return this.proxyInstance.isLocalVideoEnabled({callId:this.callId})},f.prototype.toggleLocalVideo=function(){return u(this,void 0,void 0,function(){return I(this,function(p){return[2,this.proxyInstance.toggleLocalVideo({callId:this.callId})]})})},f.prototype.isInACall=function(){return this.proxyInstance.isInACall({callId:this.callId})},f.prototype.renderVideoStreams=function(){return this.proxyInstance.renderVideoStreams({callId:this.callId})},f.prototype.disposeVideoRenderers=function(){return this.proxyInstance.disposeVideoRenderers({callId:this.callId})},f.prototype.close=function(){this.debug&&console.debug("[VoiceVideoCallingProxy][close]"),this.proxyInstance.dispose(),this.callingParams=void 0,this.callId=void 0},f.prototype.onCallAdded=function(h){var p="callAdded";this.debug&&console.debug("[VoiceVideoCallingProxy]["+p+"]"),this.addEventListener(p,h)},f.prototype.onLocalVideoStreamAdded=function(h){var p="localVideoStreamAdded";this.debug&&console.debug("[VoiceVideoCallingProxy]["+p+"]"),this.addEventListener(p,h)},f.prototype.onLocalVideoStreamRemoved=function(h){var p="localVideoStreamRemoved";this.debug&&console.debug("[VoiceVideoCallingProxy]["+p+"]"),this.addEventListener(p,h)},f.prototype.onRemoteVideoStreamAdded=function(h){var p="remoteVideoStreamAdded";this.debug&&console.debug("[VoiceVideoCallingProxy]["+p+"]"),this.addEventListener(p,h)},f.prototype.onRemoteVideoStreamRemoved=function(h){var p="remoteVideoStreamRemoved";this.debug&&console.debug("[VoiceVideoCallingProxy]["+p+"]"),this.addEventListener(p,h)},f.prototype.onCallDisconnected=function(h){var p=this,S="callDisconnected";this.debug&&console.debug("[VoiceVideoCallingProxy]["+S+"]"),this.addEventListener(S,function(A){return u(p,void 0,void 0,function(){var b,m,D,O,N,V,W;return I(this,function(B){b={SecondaryChannelType:_.Voice,SecondaryChannelEventType:T.End},null===(D=this.scenarioMarker)||void 0===D||D.startScenario(v.default.OnCallDisconnected,{CallId:this.callId||""});try{null===(O=this.callingParams)||void 0===O||O.OCClient.makeSecondaryChannelEventRequest(null===(N=this.callingParams)||void 0===N?void 0:N.chatToken.requestId,b),this.debug&&console.debug("[VoiceVideoCallingProxy][onCallDisconnected][makeSecondaryChannelEventRequest]"),null===(V=this.scenarioMarker)||void 0===V||V.completeScenario(v.default.OnCallDisconnected,{CallId:this.callId||""})}catch(F){console.error("[VoiceVideoCallingProxy][onCallDisconnected][makeSecondaryChannelEventRequest] Failure "+F),m={response:"OCClientMakeSecondaryChannelEventRequestFailed"},null===(W=this.scenarioMarker)||void 0===W||W.failScenario(v.default.OnCallDisconnected,{CallId:this.callId||"",ExceptionDetails:JSON.stringify(m)})}return this.clearRemoteVideoElementChildren(),h(A),[2]})})})},f.prototype.clearRemoteVideoElementChildren=function(){var h,p;if(null===(h=this.callingParams)||void 0===h?void 0:h.remoteVideoHTMLElementId)for(var S=document.getElementById(null===(p=this.callingParams)||void 0===p?void 0:p.remoteVideoHTMLElementId);null==S?void 0:S.firstChild;)this.debug&&console.debug("[VoiceVideoCallingProxy][clearRemoteVideoElement]"),S.firstChild.remove()},f}();g.VoiceVideoCallingProxy=y,g.default=function(f){return void 0===f&&(f={}),u(void 0,void 0,void 0,function(){var h;return I(this,function(p){switch(p.label){case 0:return[4,(h=y.getInstance()).load(f.logger)];case 1:return p.sent(),[2,Promise.resolve(h)]}})})}},4151:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.ariaTelemetryKey=g.webChatIC3AdapterVersion=g.ic3ClientVersion=void 0,g.ic3ClientVersion="2021.08.14.1",g.webChatIC3AdapterVersion="0.1.0-master.2dba07b",g.ariaTelemetryKey="c7655518acf1403f93ff6b9f77942f0a-d01a02fd-6b50-4de3-a566-62eda11f93bc-7083"},6419:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=(()=>{return(u=c||(c={}))[u.NoCalling=19235e4]="NoCalling",u[u.VideoAndVoiceCalling=192350001]="VideoAndVoiceCalling",u[u.VoiceOnly=192350002]="VoiceOnly",c;var u})();g.default=c},6397:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.default={IC3:"IC3",DirectLine:"DirectLine"}},7925:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=(()=>{return(u=c||(c={}))[u.LiveChat=19235e4]="LiveChat",u[u.PersistentChat=192350001]="PersistentChat",c;var u})();g.default=c},5642:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=(()=>{return(u=c||(c={})).Active="Active",u.Closed="Closed",u.Open="Open",u.Waiting="Waiting",u.WrapUp="WrapUp",c;var u})();g.default=c},2626:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.defaultMessageTags=void 0,g.defaultMessageTags=["ChannelId-lcw"]},9451:(G,g)=>{"use strict";var u;Object.defineProperty(g,"__esModule",{value:!0}),(u=g._BondDataType||(g._BondDataType={}))[u._BT_STOP=0]="_BT_STOP",u[u._BT_STOP_BASE=1]="_BT_STOP_BASE",u[u._BT_BOOL=2]="_BT_BOOL",u[u._BT_DOUBLE=8]="_BT_DOUBLE",u[u._BT_STRING=9]="_BT_STRING",u[u._BT_STRUCT=10]="_BT_STRUCT",u[u._BT_LIST=11]="_BT_LIST",u[u._BT_MAP=13]="_BT_MAP",u[u._BT_INT32=16]="_BT_INT32",u[u._BT_INT64=17]="_BT_INT64"},1464:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var u=c(6649),I=c(5644),v=c(514);g._Utf8_GetBytes=function(S){for(var A=[],b=0;b<S.length;++b){var m=S.charCodeAt(b);m<128?A.push(m):m<2048?A.push(192|m>>6,128|63&m):m<55296||m>=57344?A.push(224|m>>12,128|m>>6&63,128|63&m):(m=65536+((1023&m)<<10|1023&S.charCodeAt(++b)),A.push(240|m>>18,128|m>>12&63,128|m>>6&63,128|63&m))}return A},g._Base64_GetString=function(S){for(var A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b=[],m=S.length%3,O=0,N=S.length-m;O<N;O+=3)b.push([A.charAt((B=V=(S[O]<<16)+(S[O+1]<<8)+S[O+2])>>18&63),A.charAt(B>>12&63),A.charAt(B>>6&63),A.charAt(63&B)].join(""));var B;switch(m){case 1:var V;b.push(A.charAt((V=S[S.length-1])>>2)),b.push(A.charAt(V<<4&63)),b.push("==");break;case 2:var W=(S[S.length-2]<<8)+S[S.length-1];b.push(A.charAt(W>>10)),b.push(A.charAt(W>>4&63)),b.push(A.charAt(W<<2&63)),b.push("=")}return b.join("")},g._Varint_GetBytes=function(S){for(var A=[];4294967168&S;)A.push(127&S|128),S>>>=7;return A.push(127&S),A},g._Varint64_GetBytes=function(S){for(var A=S.low,b=S.high,m=[];b||4294967168&A;)m.push(127&A|128),A=(127&b)<<25|A>>>7,b>>>=7;return m.push(127&A),m},g._Double_GetBytes=function(S){if(v.BrowserChecker._IsDataViewSupport()){var A=new DataView(new ArrayBuffer(8));A.setFloat64(0,S,!0);for(var b=[],m=0;m<8;++m)b.push(A.getUint8(m));return b}return I.FloatUtils._ConvertNumberToArray(S,!0)},g._Zigzag_EncodeZigzag32=function(S){return(S=u.Number._ToInt32(S))<<1^S>>31},g._Zigzag_EncodeZigzag64=function(S){var A=S.low,b=S.high,m=b<<1|A>>>31,D=A<<1;2147483648&b&&(m=~m,D=~D);var O=new u.UInt64("0");return O.low=D,O.high=m,O}},5644:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=function(){function u(){}return u._ConvertNumberToArray=function(I,v){if(!I)return v?this._doubleZero:this._floatZero;var T=v?52:23,y=(1<<(v?11:8)-1)-1,C=1-y,f=y,h=I<0?1:0;I=Math.abs(I);for(var p=Math.floor(I),S=I-p,A=2*(y+2)+T,b=new Array(A),m=0;m<A;)b[m++]=0;for(m=y+2;m&&p;)b[--m]=p%2,p=Math.floor(p/2);for(m=y+1;m<A-1&&S>0;)(S*=2)>=1?(b[++m]=1,--S):b[++m]=0;for(var D=0;D<A&&!b[D];)D++;var O=y+1-D,N=D+T;if(b[N+1]){for(m=N;m>D&&(b[m]=1-b[m],!b);--m);m===D&&++O}if(O>f||p)return h?v?this._doubleNegInifinity:this._floatNegInifinity:v?this._doubleInifinity:this._floatInifinity;if(O<C)return v?this._doubleZero:this._floatZero;if(v){var V=0;for(m=0;m<20;++m)V=V<<1|b[++D];for(var W=0;m<52;++m)W=W<<1|b[++D];return[255&W,W>>8&255,W>>16&255,W>>>24,255&(V=h<<31|2147483647&(V|=O+y<<20)),V>>8&255,V>>16&255,V>>>24]}var F=0;for(m=0;m<23;++m)F=F<<1|b[++D];return[255&(F=h<<31|2147483647&(F|=O+y<<23)),F>>8&255,F>>16&255,F>>>24]},u._floatZero=[0,0,0,0],u._doubleZero=[0,0,0,0,0,0,0,0],u._floatInifinity=[0,0,128,127],u._floatNegInifinity=[0,0,128,255],u._doubleInifinity=[0,0,0,0,0,0,240,127],u._doubleNegInifinity=[0,0,0,0,0,0,240,255],u}();g.FloatUtils=c},67:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var u=c(6649),I=function(){function v(){this._buffer=[]}return v.prototype._WriteByte=function(_){this._buffer.push(u.Number._ToByte(_))},v.prototype._Write=function(_,T,y){for(;y--;)this._WriteByte(_[T++])},v.prototype._GetBuffer=function(){return this._buffer},v}();g.MemoryStream=I},4356:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var u=c(9451);g._BondDataType=u._BondDataType;var I=c(1464);g._Encoding=I;var v=c(67);g.IO=v;var _=c(6649);g.Int64=_.Int64,g.UInt64=_.UInt64,g.Number=_.Number;var T=function(){function y(C){this._stream=C}return y.prototype._WriteBlob=function(C){this._stream._Write(C,0,C.length)},y.prototype._WriteBool=function(C){this._stream._WriteByte(C?1:0)},y.prototype._WriteContainerBegin=function(C,f){this._WriteUInt8(f),this._WriteUInt32(C)},y.prototype._WriteMapContainerBegin=function(C,f,h){this._WriteUInt8(f),this._WriteUInt8(h),this._WriteUInt32(C)},y.prototype._WriteDouble=function(C){var f=I._Double_GetBytes(C);this._stream._Write(f,0,f.length)},y.prototype._WriteFieldBegin=function(C,f,h){f<=5?this._stream._WriteByte(C|f<<5):f<=255?(this._stream._WriteByte(192|C),this._stream._WriteByte(f)):(this._stream._WriteByte(224|C),this._stream._WriteByte(f),this._stream._WriteByte(f>>8))},y.prototype._WriteInt32=function(C){C=I._Zigzag_EncodeZigzag32(C),this._WriteUInt32(C)},y.prototype._WriteInt64=function(C){this._WriteUInt64(I._Zigzag_EncodeZigzag64(C))},y.prototype._WriteString=function(C){if(""===C)this._WriteUInt32(0);else{var f=I._Utf8_GetBytes(C);this._WriteUInt32(f.length),this._stream._Write(f,0,f.length)}},y.prototype._WriteStructEnd=function(C){this._WriteUInt8(C?u._BondDataType._BT_STOP_BASE:u._BondDataType._BT_STOP)},y.prototype._WriteUInt32=function(C){var f=I._Varint_GetBytes(_.Number._ToUInt32(C));this._stream._Write(f,0,f.length)},y.prototype._WriteUInt64=function(C){var f=I._Varint64_GetBytes(C);this._stream._Write(f,0,f.length)},y.prototype._WriteUInt8=function(C){this._stream._WriteByte(_.Number._ToUInt8(C))},y}();g.CompactBinaryProtocolWriter=T},6649:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=function(){function v(_){this.low=0,this.high=0,this.low=parseInt(_,10),this.low<0&&(this.high=-1)}return v.prototype._Equals=function(_){var T=new v(_);return this.low===T.low&&this.high===T.high},v}();g.Int64=c;var u=function(){function v(_){this.low=0,this.high=0,this.low=parseInt(_,10)}return v.prototype._Equals=function(_){var T=new v(_);return this.low===T.low&&this.high===T.high},v}();g.UInt64=u;var I=function(){function v(){}return v._ToByte=function(_){return this._ToUInt8(_)},v._ToUInt8=function(_){return 255&_},v._ToInt32=function(_){return 2147483647&_|2147483648&_},v._ToUInt32=function(_){return 4294967295&_},v}();g.Number=I},514:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=function(){function u(){}return u._IsDataViewSupport=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},u}();g.BrowserChecker=c},4501:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=function(){function u(I){this.clockSkewRefreshDurationInMins=I,this._reset()}return u.prototype.allowRequestSending=function(){return this._isFirstRequest&&!this._clockSkewSet?(this._isFirstRequest=!1,this._allowRequestSending=!1,!0):this._allowRequestSending},u.prototype.shouldAddClockSkewHeaders=function(){return this._shouldAddClockSkewHeaders},u.prototype.getClockSkewHeaderValue=function(){return this._clockSkewHeaderValue},u.prototype.setClockSkew=function(I){this._clockSkewSet||(I?this._clockSkewHeaderValue=I:this._shouldAddClockSkewHeaders=!1,this._clockSkewSet=!0,this._allowRequestSending=!0)},u.prototype._reset=function(){var I=this;this._isFirstRequest=!0,this._clockSkewSet=!1,this._allowRequestSending=!0,this._shouldAddClockSkewHeaders=!0,this._clockSkewHeaderValue="use-collector-delta",this.clockSkewRefreshDurationInMins>0&&setTimeout(function(){return I._reset()},6e4*this.clockSkewRefreshDurationInMins)},u}();g.default=c},7190:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var u=function(){function I(){this._killedTokenDictionary={}}return I.prototype.setKillSwitchTenants=function(v,_){if(v&&_)try{var T=v.split(",");if("this-request-only"===_)return T;for(var y=1e3*parseInt(_,10),C=0;C<T.length;++C)this._killedTokenDictionary[T[C]]=Date.now()+y}catch(f){return[]}return[]},I.prototype.isTenantKilled=function(v){return void 0!==this._killedTokenDictionary[v]&&this._killedTokenDictionary[v]>Date.now()||(delete this._killedTokenDictionary[v],!1)},I}();g.default=u},2551:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=function(){function u(){}return u.addNotificationListener=function(I){this.listeners.push(I)},u.removeNotificationListener=function(I){for(var v=this.listeners.indexOf(I);v>-1;)this.listeners.splice(v,1),v=this.listeners.indexOf(I)},u.eventsSent=function(I){for(var v=this,_=function(C){T.listeners[C].eventsSent&&setTimeout(function(){return v.listeners[C].eventsSent(I)},0)},T=this,y=0;y<this.listeners.length;++y)_(y)},u.eventsDropped=function(I,v){for(var _=this,T=function(f){y.listeners[f].eventsDropped&&setTimeout(function(){return _.listeners[f].eventsDropped(I,v)},0)},y=this,C=0;C<this.listeners.length;++C)T(C)},u.eventsRetrying=function(I){for(var v=this,_=function(C){T.listeners[C].eventsRetrying&&setTimeout(function(){return v.listeners[C].eventsRetrying(I)},0)},T=this,y=0;y<this.listeners.length;++y)_(y)},u.eventsRejected=function(I,v){for(var _=this,T=function(f){y.listeners[f].eventsRejected&&setTimeout(function(){return _.listeners[f].eventsRejected(I,v)},0)},y=this,C=0;C<this.listeners.length;++C)T(C)},u.listeners=[],u}();g.default=c},2659:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var u=c(676),I=function(){function v(_,T){this._outboundQueue=_,this._maxNumberOfEvents=T,this._currentBatch={},this._currentNumEventsInBatch=0}return v.prototype.addEventToBatch=function(_){if(_.priority===u.AWTEventPriority.Immediate_sync){var T={};return T[_.apiKey]=[_],T}return this._currentNumEventsInBatch>=this._maxNumberOfEvents&&this.flushBatch(),void 0===this._currentBatch[_.apiKey]&&(this._currentBatch[_.apiKey]=[]),this._currentBatch[_.apiKey].push(_),this._currentNumEventsInBatch++,null},v.prototype.flushBatch=function(){this._currentNumEventsInBatch>0&&(this._outboundQueue.push(this._currentBatch),this._currentBatch={},this._currentNumEventsInBatch=0)},v.prototype.hasBatch=function(){return this._currentNumEventsInBatch>0},v}();g.default=I},7270:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var _=function(){function T(){}return T.shouldRetryForStatus=function(y){return!(y>=300&&y<500&&408!==y||501===y||505===y)},T.getMillisToBackoffForRetry=function(y){var C,p=Math.floor(1200*Math.random())+2400;return C=Math.pow(4,y)*p,Math.min(C,12e4)},T}();g.default=_},6064:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var u=c(4356),I=c(676),v=c(2551),_=c(5593),T=2936012,y=function(){function C(){}return C.getPayloadBlob=function(f,h){var S,p=!1,A=new u.IO.MemoryStream,b=new u.CompactBinaryProtocolWriter(A);for(var m in b._WriteFieldBegin(u._BondDataType._BT_MAP,3,null),b._WriteMapContainerBegin(h,u._BondDataType._BT_STRING,u._BondDataType._BT_LIST),f)if(p)S||(S={}),S[m]=f[m],delete f[m];else if(f.hasOwnProperty(m)){b._WriteString(m);var D=f[m];b._WriteContainerBegin(1,u._BondDataType._BT_STRUCT),b._WriteFieldBegin(u._BondDataType._BT_STRING,2,null),b._WriteString("act_default_source"),b._WriteFieldBegin(u._BondDataType._BT_STRING,5,null),b._WriteString(_.newGuid()),b._WriteFieldBegin(u._BondDataType._BT_INT64,6,null),b._WriteInt64(_.numberToBondInt64(Date.now())),b._WriteFieldBegin(u._BondDataType._BT_LIST,8,null);var O=A._GetBuffer().length+1;b._WriteContainerBegin(f[m].length,u._BondDataType._BT_STRUCT);for(var N=A._GetBuffer().length-O,V=0;V<D.length;++V){var W=A._GetBuffer().length;if(this.writeEvent(D[V],b),A._GetBuffer().length-W>T)v.default.eventsRejected([D[V]],I.AWTEventsRejectedReason.SizeLimitExceeded),D.splice(V--,1),A._GetBuffer().splice(W),this._addNewDataPackageSize(D.length,A,N,O);else if(A._GetBuffer().length>T){A._GetBuffer().splice(W),S||(S={}),f[m]=D.splice(0,V),S[m]=D,this._addNewDataPackageSize(f[m].length,A,N,O),p=!0;break}}b._WriteStructEnd(!1)}return b._WriteStructEnd(!1),{payloadBlob:A._GetBuffer(),remainingRequest:S}},C._addNewDataPackageSize=function(f,h,p,S){for(var A=u._Encoding._Varint_GetBytes(u.Number._ToUInt32(f)),b=0;b<p;++b){if(!(b<A.length)){h._GetBuffer().slice(S+b,p-b);break}h._GetBuffer()[S+b]=A[b]}},C.writeEvent=function(f,h){h._WriteFieldBegin(u._BondDataType._BT_STRING,1,null),h._WriteString(f.id),h._WriteFieldBegin(u._BondDataType._BT_INT64,3,null),h._WriteInt64(_.numberToBondInt64(f.timestamp)),h._WriteFieldBegin(u._BondDataType._BT_STRING,5,null),h._WriteString(f.type),h._WriteFieldBegin(u._BondDataType._BT_STRING,6,null),h._WriteString(f.name);var p={},S=0,A={},b=0,m={},D=0,O={},N=0,V={},W=0,B={},F=0,L={},K=0;for(var q in f.properties)if(f.properties.hasOwnProperty(q))if(($=f.properties[q]).cc>0)L[q]=$,K++;else if($.pii>0)B[q]=$,F++;else switch($.type){case I.AWTPropertyType.String:p[q]=$.value,S++;break;case I.AWTPropertyType.Int64:A[q]=$.value,b++;break;case I.AWTPropertyType.Double:m[q]=$.value,D++;break;case I.AWTPropertyType.Boolean:O[q]=$.value,N++;break;case I.AWTPropertyType.Date:V[q]=$.value,W++}if(S)for(var q in h._WriteFieldBegin(u._BondDataType._BT_MAP,13,null),h._WriteMapContainerBegin(S,u._BondDataType._BT_STRING,u._BondDataType._BT_STRING),p)if(p.hasOwnProperty(q)){var ae=p[q];h._WriteString(q),h._WriteString(ae.toString())}if(F)for(var q in h._WriteFieldBegin(u._BondDataType._BT_MAP,30,null),h._WriteMapContainerBegin(F,u._BondDataType._BT_STRING,u._BondDataType._BT_STRUCT),B)if(B.hasOwnProperty(q)){var $=B[q];h._WriteString(q),h._WriteFieldBegin(u._BondDataType._BT_INT32,1,null),h._WriteInt32(1),h._WriteFieldBegin(u._BondDataType._BT_INT32,2,null),h._WriteInt32($.pii),h._WriteFieldBegin(u._BondDataType._BT_STRING,3,null),h._WriteString($.value.toString()),h._WriteStructEnd(!1)}if(N)for(var q in h._WriteFieldBegin(u._BondDataType._BT_MAP,31,null),h._WriteMapContainerBegin(N,u._BondDataType._BT_STRING,u._BondDataType._BT_BOOL),O)O.hasOwnProperty(q)&&(ae=O[q],h._WriteString(q),h._WriteBool(ae));if(W)for(var q in h._WriteFieldBegin(u._BondDataType._BT_MAP,32,null),h._WriteMapContainerBegin(W,u._BondDataType._BT_STRING,u._BondDataType._BT_INT64),V)V.hasOwnProperty(q)&&(ae=V[q],h._WriteString(q),h._WriteInt64(_.numberToBondInt64(ae)));if(b)for(var q in h._WriteFieldBegin(u._BondDataType._BT_MAP,33,null),h._WriteMapContainerBegin(b,u._BondDataType._BT_STRING,u._BondDataType._BT_INT64),A)A.hasOwnProperty(q)&&(ae=A[q],h._WriteString(q),h._WriteInt64(_.numberToBondInt64(ae)));if(D)for(var q in h._WriteFieldBegin(u._BondDataType._BT_MAP,34,null),h._WriteMapContainerBegin(D,u._BondDataType._BT_STRING,u._BondDataType._BT_DOUBLE),m)m.hasOwnProperty(q)&&(ae=m[q],h._WriteString(q),h._WriteDouble(ae));if(K)for(var q in h._WriteFieldBegin(u._BondDataType._BT_MAP,36,null),h._WriteMapContainerBegin(K,u._BondDataType._BT_STRING,u._BondDataType._BT_STRUCT),L)L.hasOwnProperty(q)&&($=L[q],h._WriteString(q),h._WriteFieldBegin(u._BondDataType._BT_INT32,1,null),h._WriteInt32($.cc),h._WriteFieldBegin(u._BondDataType._BT_STRING,2,null),h._WriteString($.value.toString()),h._WriteStructEnd(!1));h._WriteStructEnd(!1)},C.base64Encode=function(f){return u._Encoding._Base64_GetString(f)},C}();g.default=y},5816:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var u=c(5593),I=c(2551),v=c(676),T=function(){function y(){}return y.initialize=function(C){var f=this;this._sendStats=C,this._isInitalized=!0,I.default.addNotificationListener({eventsSent:function(h){f._addStat("records_sent_count",h.length,h[0].apiKey)},eventsDropped:function(h,p){switch(p){case v.AWTEventsDroppedReason.NonRetryableStatus:f._addStat("d_send_fail",h.length,h[0].apiKey),f._addStat("records_dropped_count",h.length,h[0].apiKey);break;case v.AWTEventsDroppedReason.MaxRetryLimit:f._addStat("d_retry_limit",h.length,h[0].apiKey),f._addStat("records_dropped_count",h.length,h[0].apiKey);break;case v.AWTEventsDroppedReason.QueueFull:f._addStat("d_queue_full",h.length,h[0].apiKey)}},eventsRejected:function(h,p){switch(p){case v.AWTEventsRejectedReason.InvalidEvent:f._addStat("r_inv",h.length,h[0].apiKey);break;case v.AWTEventsRejectedReason.KillSwitch:f._addStat("r_kl",h.length,h[0].apiKey);break;case v.AWTEventsRejectedReason.SizeLimitExceeded:f._addStat("r_size",h.length,h[0].apiKey)}f._addStat("r_count",h.length,h[0].apiKey)},eventsRetrying:null}),setTimeout(function(){return f.flush()},6e4)},y.teardown=function(){this._isInitalized&&(this.flush(),this._isInitalized=!1)},y.eventReceived=function(C){y._addStat("records_received_count",1,C)},y.flush=function(){var C=this;if(this._isInitalized){for(var f in this._stats)this._stats.hasOwnProperty(f)&&this._sendStats(this._stats[f],f);this._stats={},setTimeout(function(){return C.flush()},6e4)}},y._addStat=function(C,f,h){if(this._isInitalized&&h!==u.StatsApiKey){var p=u.getTenantId(h);this._stats[p]||(this._stats[p]={}),this._stats[p][C]=this._stats[p][C]?this._stats[p][C]+f:f}},y._isInitalized=!1,y._stats={},y}();g.default=T},676:(G,g)=>{"use strict";var y;Object.defineProperty(g,"__esModule",{value:!0}),(y=g.AWTPropertyType||(g.AWTPropertyType={}))[y.Unspecified=0]="Unspecified",y[y.String=1]="String",y[y.Int64=2]="Int64",y[y.Double=3]="Double",y[y.Boolean=4]="Boolean",y[y.Date=5]="Date",function(y){y[y.NotSet=0]="NotSet",y[y.DistinguishedName=1]="DistinguishedName",y[y.GenericData=2]="GenericData",y[y.IPV4Address=3]="IPV4Address",y[y.IPv6Address=4]="IPv6Address",y[y.MailSubject=5]="MailSubject",y[y.PhoneNumber=6]="PhoneNumber",y[y.QueryString=7]="QueryString",y[y.SipAddress=8]="SipAddress",y[y.SmtpAddress=9]="SmtpAddress",y[y.Identity=10]="Identity",y[y.Uri=11]="Uri",y[y.Fqdn=12]="Fqdn",y[y.IPV4AddressLegacy=13]="IPV4AddressLegacy"}(g.AWTPiiKind||(g.AWTPiiKind={})),function(y){y[y.NotSet=0]="NotSet",y[y.GenericContent=1]="GenericContent"}(g.AWTCustomerContentKind||(g.AWTCustomerContentKind={})),function(y){y[y.Low=1]="Low",y[y.Normal=2]="Normal",y[y.High=3]="High",y[y.Immediate_sync=5]="Immediate_sync"}(g.AWTEventPriority||(g.AWTEventPriority={})),function(y){y[y.NonRetryableStatus=1]="NonRetryableStatus",y[y.QueueFull=3]="QueueFull",y[y.MaxRetryLimit=4]="MaxRetryLimit"}(g.AWTEventsDroppedReason||(g.AWTEventsDroppedReason={})),function(y){y[y.InvalidEvent=1]="InvalidEvent",y[y.SizeLimitExceeded=2]="SizeLimitExceeded",y[y.KillSwitch=3]="KillSwitch"}(g.AWTEventsRejectedReason||(g.AWTEventsRejectedReason={}))},5593:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var u=c(6649),I=c(676),v=/[xy]/g,y=null;g.EventNameAndTypeRegex=/^[a-zA-Z]([a-zA-Z0-9]|_){2,98}[a-zA-Z0-9]$/,g.EventNameDotRegex=/\./g,g.PropertyNameRegex=/^[a-zA-Z](([a-zA-Z0-9|_|\.]){0,98}[a-zA-Z0-9])?$/,g.StatsApiKey="a387cfcf60114a43a7699f9fbb49289e-9bceb9fe-1c06-460f-96c5-6a0b247358bc-7238";var C=y,f=y,h=y;function A(w){return"string"==typeof w}function b(w){return"number"==typeof w}function m(w){return"boolean"==typeof w}function D(w){return w instanceof Date}function O(w){return 1e4*(w+621355968e5)}function $(){return!("undefined"==typeof navigator||!navigator.product)&&"ReactNative"===navigator.product}function ae(){return"object"==typeof self&&"ServiceWorkerGlobalScope"===self.constructor.name}function z(w){return w<10?"0"+w:w.toString()}function R(w){return void 0===w||w===y||""===w}g.numberToBondInt64=function(w){var H=new u.Int64("0");return H.low=4294967295&w,H.high=Math.floor(w/4294967296),H},g.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(v,function(w){var H=16*Math.random()|0;return("x"===w?H:3&H|8).toString(16)})},g.isString=A,g.isNumber=b,g.isBoolean=m,g.isDate=D,g.msToTicks=O,g.getTenantId=function(w){var H=w.indexOf("-");return H>-1?w.substring(0,H):""},g.isBeaconsSupported=function(){return C===y&&(C="undefined"!=typeof navigator&&Boolean(navigator.sendBeacon)),C},g.isUint8ArrayAvailable=function(){return f===y&&(f="undefined"!=typeof Uint8Array&&!function(){if("undefined"!=typeof navigator&&navigator.userAgent){var w=navigator.userAgent.toLowerCase();if((w.indexOf("safari")>=0||w.indexOf("firefox")>=0)&&w.indexOf("chrome")<0)return!0}return!1}()&&!$()),f},g.isPriority=function(w){return!(!b(w)||!(w>=1&&w<=3||5===w))},g.sanitizeProperty=function(w,H){return!g.PropertyNameRegex.test(w)||R(H)||(R(H.value)&&(H={value:H,type:I.AWTPropertyType.Unspecified}),H.type=function(w,H){switch(H=function(w){return!!(b(w)&&w>=0&&w<=4)}(H)?H:I.AWTPropertyType.Unspecified){case I.AWTPropertyType.Unspecified:return function(w){switch(typeof w){case"string":return I.AWTPropertyType.String;case"boolean":return I.AWTPropertyType.Boolean;case"number":return I.AWTPropertyType.Double;case"object":return D(w)?I.AWTPropertyType.Date:y}return y}(w);case I.AWTPropertyType.String:return A(w)?H:y;case I.AWTPropertyType.Boolean:return m(w)?H:y;case I.AWTPropertyType.Date:return D(w)&&NaN!==w.getTime()?H:y;case I.AWTPropertyType.Int64:return b(w)&&w%1==0?H:y;case I.AWTPropertyType.Double:return b(w)?H:y}return y}(H.value,H.type),!H.type)||(D(H.value)&&(H.value=O(H.value.getTime())),H.pii>0&&H.cc>0)?y:H.pii?function(w){return!!(b(w)&&w>=0&&w<=13)}(H.pii)?H:y:H.cc?function(w){return!!(b(w)&&w>=0&&w<=1)}(H.cc)?H:y:H},g.getISOString=function(w){return w.getUTCFullYear()+"-"+z(w.getUTCMonth()+1)+"-"+z(w.getUTCDate())+"T"+z(w.getUTCHours())+":"+z(w.getUTCMinutes())+":"+z(w.getUTCSeconds())+"."+function(w){return w<10?"00"+w:w<100?"0"+w:w.toString()}(w.getUTCMilliseconds())+"Z"},g.useXDomainRequest=function(){if(h===y){var w=new XMLHttpRequest;h=void 0===w.withCredentials&&"undefined"!=typeof XDomainRequest}return h},g.useFetchRequest=function(){return $()||ae()},g.isReactNative=$,g.isServiceWorkerGlobalScope=ae},4094:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var u=c(5593),I="MicrosoftApplicationsTelemetryDeviceId",v="MicrosoftApplicationsTelemetryFirstLaunchTime",y_WIN=/(windows|win32)/i,y_WINRT=/ arm;/i,y_WINPHONE=/windows\sphone\s\d+\.\d+/i,y_OSX=/(macintosh|mac os x)/i,y_IOS=/(iPad|iPhone|iPod)(?=.*like Mac OS X)/i,y_LINUX=/(linux|joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)/i,y_ANDROID=/android/i,y_CROS=/CrOS/i,C={5.1:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1","10.0":"10"},f="([\\d,.]+)",p="Unknown",S="undefined",A=function(){function b(){}return b.addPropertyStorageOverride=function(m){return!!m&&(this._propertyStorage=m,!0)},b.autoCollect=function(m,D,O){if(this._semanticContext=m,this._disableCookies=D,this._autoCollect(),!O&&typeof navigator!==S&&(O=navigator.userAgent||""),this._autoCollectFromUserAgent(O),this._disableCookies&&!this._propertyStorage)return this._deleteCookie(I),void this._deleteCookie(v);(this._propertyStorage||this._areCookiesAvailable&&!this._disableCookies)&&this._autoCollectDeviceId()},b.checkAndSaveDeviceId=function(m){if(m){var D=this._getData(I),O=this._getData(v);D!==m&&(O=u.getISOString(new Date)),this._saveData(I,m),this._saveData(v,O),this._setFirstLaunchTime(O)}},b._autoCollectDeviceId=function(){var m=this._getData(I);m||(m=u.newGuid()),this._semanticContext.setDeviceId(m)},b._autoCollect=function(){typeof document!==S&&document.documentElement&&this._semanticContext.setAppLanguage(document.documentElement.lang),typeof navigator!==S&&this._semanticContext.setUserLanguage(navigator.userLanguage||navigator.language);var m=(new Date).getTimezoneOffset(),D=m%60,O=(m-D)/60,N="+";O>0&&(N="-"),O=Math.abs(O),D=Math.abs(D),this._semanticContext.setUserTimeZone(N+(O<10?"0"+O:O.toString())+":"+(D<10?"0"+D:D.toString()))},b._autoCollectFromUserAgent=function(m){if(m){var D=this._getBrowserName(m);this._semanticContext.setDeviceBrowserName(D),this._semanticContext.setDeviceBrowserVersion(this._getBrowserVersion(m,D));var O=this._getOsName(m);this._semanticContext.setDeviceOsName(O),this._semanticContext.setDeviceOsVersion(this._getOsVersion(m,O))}},b._getBrowserName=function(m){return this._userAgentContainsString("OPR/",m)?"Opera":this._userAgentContainsString("PhantomJS",m)?"PhantomJS":this._userAgentContainsString("Edge",m)||this._userAgentContainsString("Edg",m)?"Edge":this._userAgentContainsString("Electron",m)?"Electron":this._userAgentContainsString("Chrome",m)?"Chrome":this._userAgentContainsString("Trident",m)?"MSIE":this._userAgentContainsString("Firefox",m)?"Firefox":this._userAgentContainsString("Safari",m)?"Safari":this._userAgentContainsString("SkypeShell",m)?"SkypeShell":p},b._setFirstLaunchTime=function(m){if(!isNaN(m)){var D=new Date;D.setTime(parseInt(m,10)),m=u.getISOString(D)}this.firstLaunchTime=m},b._userAgentContainsString=function(m,D){return D.indexOf(m)>-1},b._getBrowserVersion=function(m,D){if("MSIE"===D)return this._getIeVersion(m);if("Edge"===D){var O=this._getOtherVersion(D,m);return O===p?this._getOtherVersion("Edg",m):O}return this._getOtherVersion(D,m)},b._getIeVersion=function(m){var D=m.match(new RegExp("MSIE "+f));if(D)return D[1];var O=m.match(new RegExp("rv:"+f));return O?O[1]:void 0},b._getOtherVersion=function(m,D){"Safari"===m&&(m="Version");var O=D.match(new RegExp(m+"/"+f));return O?O[1]:p},b._getOsName=function(m){return m.match(y_WINPHONE)?"Windows Phone":m.match(y_WINRT)?"Windows RT":m.match(y_IOS)?"iOS":m.match(y_ANDROID)?"Android":m.match(y_LINUX)?"Linux":m.match(y_OSX)?"Mac OS X":m.match(y_WIN)?"Windows":m.match(y_CROS)?"Chrome OS":p},b._getOsVersion=function(m,D){return"Windows"===D?this._getGenericOsVersion(m,"Windows NT"):"Android"===D?this._getGenericOsVersion(m,D):"Mac OS X"===D?this._getMacOsxVersion(m):p},b._getGenericOsVersion=function(m,D){var O=m.match(new RegExp(D+" "+f));return O?C[O[1]]?C[O[1]]:O[1]:p},b._getMacOsxVersion=function(m){var D=m.match(new RegExp("Mac OS X ([\\d,_,.]+)"));if(D){var O=D[1].replace(/_/g,".");if(O){var N=this._getDelimiter(O);return N?O.split(N)[0]:O}}return p},b._getDelimiter=function(m){return m.indexOf(".")>-1?".":m.indexOf("_")>-1?"_":null},b._saveData=function(m,D){if(this._propertyStorage)this._propertyStorage.setProperty(m,D);else if(this._areCookiesAvailable){var O=new Date;O.setTime(O.getTime()+31536e6);var N="expires="+O.toUTCString();document.cookie=m+"="+D+"; "+N}},b._getData=function(m){if(this._propertyStorage)return this._propertyStorage.getProperty(m)||"";if(this._areCookiesAvailable){m+="=";for(var D=document.cookie.split(";"),O=0;O<D.length;O++){for(var N=D[O],V=0;" "===N.charAt(V);)V++;if(0===(N=N.substring(V)).indexOf(m))return N.substring(m.length,N.length)}}return""},b._deleteCookie=function(m){this._areCookiesAvailable&&(document.cookie=m+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;")},b._disableCookies=!1,b._areCookiesAvailable=typeof document!==S&&typeof document.cookie!==S,b}();g.default=A},58:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var u=c(5593),I=c(676),v=function(){function _(T){this._event={name:"",properties:{}},T&&this.setName(T)}return _.prototype.setName=function(T){this._event.name=T},_.prototype.getName=function(){return this._event.name},_.prototype.setType=function(T){this._event.type=T},_.prototype.getType=function(){return this._event.type},_.prototype.setTimestamp=function(T){this._event.timestamp=T},_.prototype.getTimestamp=function(){return this._event.timestamp},_.prototype.setEventPriority=function(T){this._event.priority=T},_.prototype.getEventPriority=function(){return this._event.priority},_.prototype.setProperty=function(T,y,C){void 0===C&&(C=I.AWTPropertyType.Unspecified);var f={value:y,type:C,pii:I.AWTPiiKind.NotSet,cc:I.AWTCustomerContentKind.NotSet};null!==(f=u.sanitizeProperty(T,f))?this._event.properties[T]=f:delete this._event.properties[T]},_.prototype.setPropertyWithPii=function(T,y,C,f){void 0===f&&(f=I.AWTPropertyType.Unspecified);var h={value:y,type:f,pii:C,cc:I.AWTCustomerContentKind.NotSet};null!==(h=u.sanitizeProperty(T,h))?this._event.properties[T]=h:delete this._event.properties[T]},_.prototype.setPropertyWithCustomerContent=function(T,y,C,f){void 0===f&&(f=I.AWTPropertyType.Unspecified);var h={value:y,type:f,pii:I.AWTPiiKind.NotSet,cc:C};null!==(h=u.sanitizeProperty(T,h))?this._event.properties[T]=h:delete this._event.properties[T]},_.prototype.getPropertyMap=function(){return this._event.properties},_.prototype.getEvent=function(){return this._event},_}();g.default=v},9449:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var u=c(676),I=c(6064),v=c(7270),_=c(7190),T=c(4501),y=c(8779),C=c(5593),f=c(2551),h=c(4023),A="POST",b=function(){function m(D,O,N,V,W){var B=this;this._requestQueue=D,this._queueManager=N,this._httpInterface=V,this._urlString="?qsp=true&content-type=application%2Fbond-compact-binary&client-id=NO_AUTH&sdk-version="+y.FullVersionString,this._killSwitch=new _.default,this._paused=!1,this._useBeacons=!1,this._activeConnections=0,this._clockSkewManager=new T.default(W),C.isUint8ArrayAvailable()||(this._urlString+="&content-encoding=base64"),this._urlString=O+this._urlString,this._httpInterface||(this._useBeacons=!C.isReactNative(),this._httpInterface={sendPOST:function(F,L,K,q,$,ae){try{if(C.useFetchRequest())fetch(F,{body:L,method:A}).then(function(ie){var ue={};ie.headers&&ie.headers.forEach(function(Z,k){ue[k]=Z}),$(ie.status,ue)}).catch(function(ie){q(0,{})});else if(C.useXDomainRequest()){var z=new XDomainRequest;z.open(A,F),z.onload=function(){$(200,null)},z.onerror=function(){q(400,null)},z.ontimeout=function(){K(500,null)},z.send(L)}else{var ee=new XMLHttpRequest;ee.open(A,F,!ae),ee.onload=function(){$(ee.status,B._convertAllHeadersToMap(ee.getAllResponseHeaders()))},ee.onerror=function(){q(ee.status,B._convertAllHeadersToMap(ee.getAllResponseHeaders()))},ee.ontimeout=function(){K(ee.status,B._convertAllHeadersToMap(ee.getAllResponseHeaders()))},ee.send(L)}}catch(ie){q(400,null)}}})}return m.prototype.hasIdleConnection=function(){return this._activeConnections<2},m.prototype.sendQueuedRequests=function(){for(;this.hasIdleConnection()&&!this._paused&&this._requestQueue.length>0&&this._clockSkewManager.allowRequestSending();)this._activeConnections++,this._sendRequest(this._requestQueue.shift(),0,!1);this.hasIdleConnection()&&h.default.scheduleTimer()},m.prototype.isCompletelyIdle=function(){return 0===this._activeConnections},m.prototype.teardown=function(){for(;this._requestQueue.length>0;)this._sendRequest(this._requestQueue.shift(),0,!0)},m.prototype.pause=function(){this._paused=!0},m.prototype.resume=function(){this._paused=!1,this.sendQueuedRequests()},m.prototype.removeQueuedRequests=function(){this._requestQueue.length=0},m.prototype.sendSynchronousRequest=function(D,O){this._paused&&(D[O][0].priority=u.AWTEventPriority.High),this._activeConnections++,this._sendRequest(D,0,!1,!0)},m.prototype._sendRequest=function(D,O,N,V){var W=this;void 0===V&&(V=!1);try{if(this._paused)return this._activeConnections--,void this._queueManager.addBackRequest(D);var B=0,F="";for(var L in D)D.hasOwnProperty(L)&&(this._killSwitch.isTenantKilled(L)?(f.default.eventsRejected(D[L],u.AWTEventsRejectedReason.KillSwitch),delete D[L]):(F.length>0&&(F+=","),F+=L,B++));if(B>0){var K=I.default.getPayloadBlob(D,B);K.remainingRequest&&this._requestQueue.push(K.remainingRequest);var q=this._urlString+"&x-apikey="+F+"&client-time-epoch-millis="+Date.now().toString();this._clockSkewManager.shouldAddClockSkewHeaders()&&(q=q+"&time-delta-to-apply-millis="+this._clockSkewManager.getClockSkewHeaderValue());var $;for(var L in $=C.isUint8ArrayAvailable()?new Uint8Array(K.payloadBlob):I.default.base64Encode(K.payloadBlob),D)if(D.hasOwnProperty(L))for(var ae=0;ae<D[L].length;++ae)D[L][ae].sendAttempt>0?D[L][ae].sendAttempt++:D[L][ae].sendAttempt=1;if(this._useBeacons&&N&&C.isBeaconsSupported()&&navigator.sendBeacon(q,$))return;this._httpInterface.sendPOST(q,$,function(z,ee){W._retryRequestIfNeeded(z,ee,D,B,F,O,N,V)},function(z,ee){W._retryRequestIfNeeded(z,ee,D,B,F,O,N,V)},function(z,ee){W._retryRequestIfNeeded(z,ee,D,B,F,O,N,V)},N||V)}else N||this._handleRequestFinished(!1,{},N,V)}catch(z){this._handleRequestFinished(!1,{},N,V)}},m.prototype._retryRequestIfNeeded=function(D,O,N,V,W,B,F,L){var K=this,q=!0;if(void 0!==D){if(O){var $=this._killSwitch.setKillSwitchTenants(O["kill-tokens"],O["kill-duration-seconds"]);this._clockSkewManager.setClockSkew(O["time-delta-millis"]);for(var ae=0;ae<$.length;++ae)f.default.eventsRejected(N[$[ae]],u.AWTEventsRejectedReason.KillSwitch),delete N[$[ae]],V--}else this._clockSkewManager.setClockSkew(null);if(200===D)return void this._handleRequestFinished(!0,N,F,L);(!v.default.shouldRetryForStatus(D)||V<=0)&&(q=!1)}if(q)if(L)this._activeConnections--,N[W][0].priority=u.AWTEventPriority.High,this._queueManager.addBackRequest(N);else if(B<1){for(var z in N)N.hasOwnProperty(z)&&f.default.eventsRetrying(N[z]);setTimeout(function(){return K._sendRequest(N,B+1,!1)},v.default.getMillisToBackoffForRetry(B))}else this._activeConnections--,h.default.backOffTransmission(),this._queueManager.addBackRequest(N);else this._handleRequestFinished(!1,N,F,L)},m.prototype._handleRequestFinished=function(D,O,N,V){for(var W in D&&h.default.clearBackOff(),O)O.hasOwnProperty(W)&&(D?f.default.eventsSent(O[W]):f.default.eventsDropped(O[W],u.AWTEventsDroppedReason.NonRetryableStatus));this._activeConnections--,!V&&!N&&this.sendQueuedRequests()},m.prototype._convertAllHeadersToMap=function(D){var O={};if(D)for(var N=D.split("\n"),V=0;V<N.length;++V){var W=N[V].split(": ");O[W[0]]=W[1]}return O},m}();g.default=b},7613:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var u=c(676),I=c(5640),v=c(4189),_=c(6208),T=c(4023),y=c(2551),C=c(4094),f=function(){function h(){}return h.initialize=function(p,S){if(void 0===S&&(S={}),!this._isInitialized)return this._isInitialized=!0,v.default.defaultTenantToken=p,this._overrideValuesFromConfig(S),this._config.disableCookiesUsage&&!this._config.propertyStorageOverride&&(v.default.sessionEnabled=!1),C.default.addPropertyStorageOverride(this._config.propertyStorageOverride),C.default.autoCollect(v.default.semanticContext,this._config.disableCookiesUsage,this._config.userAgent),T.default.initialize(this._config),v.default.loggingEnabled=!0,this._config.enableAutoUserSession&&(this.getLogger().logSession(I.AWTSessionState.Started),window.addEventListener("beforeunload",this.flushAndTeardown)),this.getLogger()},h.getSemanticContext=function(){return v.default.semanticContext},h.flush=function(p){this._isInitialized&&!this._isDestroyed&&T.default.flush(p)},h.flushAndTeardown=function(){this._isInitialized&&!this._isDestroyed&&(this._config.enableAutoUserSession&&this.getLogger().logSession(I.AWTSessionState.Ended),T.default.flushAndTeardown(),v.default.loggingEnabled=!1,this._isDestroyed=!0)},h.pauseTransmission=function(){this._isInitialized&&!this._isDestroyed&&T.default.pauseTransmission()},h.resumeTransmision=function(){this._isInitialized&&!this._isDestroyed&&T.default.resumeTransmision()},h.setTransmitProfile=function(p){this._isInitialized&&!this._isDestroyed&&T.default.setTransmitProfile(p)},h.loadTransmitProfiles=function(p){this._isInitialized&&!this._isDestroyed&&T.default.loadTransmitProfiles(p)},h.setContext=function(p,S,A){void 0===A&&(A=u.AWTPropertyType.Unspecified),v.default.logManagerContext.setProperty(p,S,A)},h.setContextWithPii=function(p,S,A,b){void 0===b&&(b=u.AWTPropertyType.Unspecified),v.default.logManagerContext.setPropertyWithPii(p,S,A,b)},h.setContextWithCustomerContent=function(p,S,A,b){void 0===b&&(b=u.AWTPropertyType.Unspecified),v.default.logManagerContext.setPropertyWithCustomerContent(p,S,A,b)},h.getLogger=function(p){var S=p;return(!S||S===v.default.defaultTenantToken)&&(S=""),this._loggers[S]||(this._loggers[S]=new _.default(S)),this._loggers[S]},h.addNotificationListener=function(p){y.default.addNotificationListener(p)},h.removeNotificationListener=function(p){y.default.removeNotificationListener(p)},h._overrideValuesFromConfig=function(p){p.collectorUri&&(this._config.collectorUri=p.collectorUri),p.cacheMemorySizeLimitInNumberOfEvents>0&&(this._config.cacheMemorySizeLimitInNumberOfEvents=p.cacheMemorySizeLimitInNumberOfEvents),p.httpXHROverride&&p.httpXHROverride.sendPOST&&(this._config.httpXHROverride=p.httpXHROverride),p.propertyStorageOverride&&p.propertyStorageOverride.getProperty&&p.propertyStorageOverride.setProperty&&(this._config.propertyStorageOverride=p.propertyStorageOverride),p.userAgent&&(this._config.userAgent=p.userAgent),p.disableCookiesUsage&&(this._config.disableCookiesUsage=p.disableCookiesUsage),p.canSendStatEvent&&(this._config.canSendStatEvent=p.canSendStatEvent),p.enableAutoUserSession&&"undefined"!=typeof window&&window.addEventListener&&(this._config.enableAutoUserSession=p.enableAutoUserSession),p.clockSkewRefreshDurationInMins>0&&(this._config.clockSkewRefreshDurationInMins=p.clockSkewRefreshDurationInMins)},h._loggers={},h._isInitialized=!1,h._isDestroyed=!1,h._config={collectorUri:"https://browser.pipe.aria.microsoft.com/Collector/3.0/",cacheMemorySizeLimitInNumberOfEvents:1e4,disableCookiesUsage:!1,canSendStatEvent:function(p){return!0},clockSkewRefreshDurationInMins:0},h}();g.default=f},4189:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var u=c(58),I=c(1009),v=function(){function _(){}return _.logManagerContext=new u.default,_.sessionEnabled=!0,_.loggingEnabled=!1,_.defaultTenantToken="",_.semanticContext=new I.default(!0,_.logManagerContext),_}();g.default=v},6208:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var u=c(676),I=c(5640),v=c(58),_=c(5593),T=c(5816),y=c(2551),C=c(4023),f=c(4189),h=c(8779),p=c(1009),S=c(4094),A=function(){function b(m){this._apiKey=m,this._contextProperties=new v.default,this._semanticContext=new p.default(!1,this._contextProperties),this._sessionStartTime=0,this._createInitId()}return b.prototype.setContext=function(m,D,O){void 0===O&&(O=u.AWTPropertyType.Unspecified),this._contextProperties.setProperty(m,D,O)},b.prototype.setContextWithPii=function(m,D,O,N){void 0===N&&(N=u.AWTPropertyType.Unspecified),this._contextProperties.setPropertyWithPii(m,D,O,N)},b.prototype.setContextWithCustomerContent=function(m,D,O,N){void 0===N&&(N=u.AWTPropertyType.Unspecified),this._contextProperties.setPropertyWithCustomerContent(m,D,O,N)},b.prototype.getSemanticContext=function(){return this._semanticContext},b.prototype.logEvent=function(m){if(f.default.loggingEnabled){this._apiKey||(this._apiKey=f.default.defaultTenantToken,this._createInitId());var D=!0;_.isString(m)?m={name:m}:m instanceof v.default&&(m=m.getEvent(),D=!1),T.default.eventReceived(this._apiKey),b._logEvent(b._getInternalEvent(m,this._apiKey,D),this._contextProperties)}},b.prototype.logSession=function(m,D){if(f.default.sessionEnabled){var O={name:"session",type:"session",properties:{}};if(b._addPropertiesToEvent(O,D),O.priority=u.AWTEventPriority.High,m===I.AWTSessionState.Started){if(this._sessionStartTime>0)return;this._sessionStartTime=(new Date).getTime(),this._sessionId=_.newGuid(),this.setContext("Session.Id",this._sessionId),O.properties["Session.State"]="Started"}else{if(m!==I.AWTSessionState.Ended)return;if(0===this._sessionStartTime)return;var N=Math.floor(((new Date).getTime()-this._sessionStartTime)/1e3);O.properties["Session.Id"]=this._sessionId,O.properties["Session.State"]="Ended",O.properties["Session.Duration"]=N.toString(),O.properties["Session.DurationBucket"]=b._getSessionDurationFromTime(N),this._sessionStartTime=0,this.setContext("Session.Id",null),this._sessionId=void 0}O.properties["Session.FirstLaunchTime"]=S.default.firstLaunchTime,this.logEvent(O)}},b.prototype.getSessionId=function(){return this._sessionId},b.prototype.logFailure=function(m,D,O,N,V){if(m&&D){var W={name:"failure",type:"failure",properties:{}};b._addPropertiesToEvent(W,V),W.properties["Failure.Signature"]=m,W.properties["Failure.Detail"]=D,O&&(W.properties["Failure.Category"]=O),N&&(W.properties["Failure.Id"]=N),W.priority=u.AWTEventPriority.High,this.logEvent(W)}},b.prototype.logPageView=function(m,D,O,N,V,W){if(m&&D){var B={name:"pageview",type:"pageview",properties:{}};b._addPropertiesToEvent(B,W),B.properties["PageView.Id"]=m,B.properties["PageView.Name"]=D,O&&(B.properties["PageView.Category"]=O),N&&(B.properties["PageView.Uri"]=N),V&&(B.properties["PageView.ReferrerUri"]=V),this.logEvent(B)}},b.prototype._createInitId=function(){!b._initIdMap[this._apiKey]&&this._apiKey&&(b._initIdMap[this._apiKey]=_.newGuid())},b._addPropertiesToEvent=function(m,D){if(D)for(var O in D instanceof v.default&&(D=D.getEvent()),D.name&&(m.name=D.name),D.priority&&(m.priority=D.priority),D.properties)D.properties.hasOwnProperty(O)&&(m.properties[O]=D.properties[O])},b._getSessionDurationFromTime=function(m){return m<0?"Undefined":m<=3?"UpTo3Sec":m<=10?"UpTo10Sec":m<=30?"UpTo30Sec":m<=60?"UpTo60Sec":m<=180?"UpTo3Min":m<=600?"UpTo10Min":m<=1800?"UpTo30Min":"Above30Min"},b._logEvent=function(m,D){m.name&&_.isString(m.name)?(m.name=m.name.toLowerCase(),m.name=m.name.replace(_.EventNameDotRegex,"_"),m.type=m.type&&_.isString(m.type)?m.type.toLowerCase():"custom",_.EventNameAndTypeRegex.test(m.name)&&_.EventNameAndTypeRegex.test(m.type)?((!_.isNumber(m.timestamp)||m.timestamp<0)&&(m.timestamp=(new Date).getTime()),m.properties||(m.properties={}),this._addContextIfAbsent(m,D.getPropertyMap()),this._addContextIfAbsent(m,f.default.logManagerContext.getPropertyMap()),this._setDefaultProperty(m,"EventInfo.InitId",this._getInitId(m.apiKey)),this._setDefaultProperty(m,"EventInfo.Sequence",this._getSequenceId(m.apiKey)),this._setDefaultProperty(m,"EventInfo.SdkVersion",h.FullVersionString),this._setDefaultProperty(m,"EventInfo.Name",m.name),this._setDefaultProperty(m,"EventInfo.Time",new Date(m.timestamp).toISOString()),_.isPriority(m.priority)||(m.priority=u.AWTEventPriority.Normal),this._sendEvent(m)):y.default.eventsRejected([m],u.AWTEventsRejectedReason.InvalidEvent)):y.default.eventsRejected([m],u.AWTEventsRejectedReason.InvalidEvent)},b._addContextIfAbsent=function(m,D){if(D)for(var O in D)D.hasOwnProperty(O)&&(m.properties[O]||(m.properties[O]=D[O]))},b._setDefaultProperty=function(m,D,O){m.properties[D]={value:O,pii:u.AWTPiiKind.NotSet,type:u.AWTPropertyType.String}},b._sendEvent=function(m){C.default.sendEvent(m)},b._getInternalEvent=function(m,D,O){if(m.properties=m.properties||{},O)for(var N in m.properties)m.properties.hasOwnProperty(N)&&(m.properties[N]=_.sanitizeProperty(N,m.properties[N]),null===m.properties[N]&&delete m.properties[N]);var V=m;return V.id=_.newGuid(),V.apiKey=D,V},b._getInitId=function(m){return b._initIdMap[m]},b._getSequenceId=function(m){return void 0===b._sequenceIdMap[m]&&(b._sequenceIdMap[m]=0),(++b._sequenceIdMap[m]).toString()},b._sequenceIdMap={},b._initIdMap={},b}();g.default=A},4220:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var u=c(676),I=c(9449),v=c(4023),_=c(2659),T=c(2551),y=c(5593),p=function(){function S(A,b,m,D){this._queueSizeLimit=b,this._isCurrentlyUploadingNow=!1,this._uploadNowQueue=[],this._shouldDropEventsOnPause=!1,this._paused=!1,this._queueSize=0,this._outboundQueue=[],this._inboundQueues={},this._inboundQueues[u.AWTEventPriority.High]=[],this._inboundQueues[u.AWTEventPriority.Normal]=[],this._inboundQueues[u.AWTEventPriority.Low]=[],this._addEmptyQueues(),this._batcher=new _.default(this._outboundQueue,500),this._httpManager=new I.default(this._outboundQueue,A,this,m,D)}return S.prototype.addEvent=function(A){y.isPriority(A.priority)||(A.priority=u.AWTEventPriority.Normal),A.priority===u.AWTEventPriority.Immediate_sync?this._httpManager.sendSynchronousRequest(this._batcher.addEventToBatch(A),A.apiKey):this._queueSize<this._queueSizeLimit||this._dropEventWithPriorityOrLess(A.priority)?this._addEventToProperQueue(A):T.default.eventsDropped([A],u.AWTEventsDroppedReason.QueueFull)},S.prototype.sendEventsForPriorityAndAbove=function(A){this._batchEvents(A),this._httpManager.sendQueuedRequests()},S.prototype.hasEvents=function(){return(this._inboundQueues[u.AWTEventPriority.High][0].length>0||this._inboundQueues[u.AWTEventPriority.Normal][0].length>0||this._inboundQueues[u.AWTEventPriority.Low][0].length>0||this._batcher.hasBatch())&&this._httpManager.hasIdleConnection()},S.prototype.addBackRequest=function(A){if(!this._paused||!this._shouldDropEventsOnPause){for(var b in A)if(A.hasOwnProperty(b))for(var m=0;m<A[b].length;++m)A[b][m].sendAttempt<6?this.addEvent(A[b][m]):T.default.eventsDropped([A[b][m]],u.AWTEventsDroppedReason.MaxRetryLimit);v.default.scheduleTimer()}},S.prototype.teardown=function(){this._paused||(this._batchEvents(u.AWTEventPriority.Low),this._httpManager.teardown())},S.prototype.uploadNow=function(A){var b=this;this._addEmptyQueues(),this._isCurrentlyUploadingNow?this._uploadNowQueue.push(A):(this._isCurrentlyUploadingNow=!0,setTimeout(function(){return b._uploadNow(A)},0))},S.prototype.pauseTransmission=function(){this._paused=!0,this._httpManager.pause(),this._shouldDropEventsOnPause&&(this._queueSize-=this._inboundQueues[u.AWTEventPriority.High][0].length+this._inboundQueues[u.AWTEventPriority.Normal][0].length+this._inboundQueues[u.AWTEventPriority.Low][0].length,this._inboundQueues[u.AWTEventPriority.High][0]=[],this._inboundQueues[u.AWTEventPriority.Normal][0]=[],this._inboundQueues[u.AWTEventPriority.Low][0]=[],this._httpManager.removeQueuedRequests())},S.prototype.resumeTransmission=function(){this._paused=!1,this._httpManager.resume()},S.prototype.shouldDropEventsOnPause=function(A){this._shouldDropEventsOnPause=A},S.prototype._removeFirstQueues=function(){this._inboundQueues[u.AWTEventPriority.High].shift(),this._inboundQueues[u.AWTEventPriority.Normal].shift(),this._inboundQueues[u.AWTEventPriority.Low].shift()},S.prototype._addEmptyQueues=function(){this._inboundQueues[u.AWTEventPriority.High].push([]),this._inboundQueues[u.AWTEventPriority.Normal].push([]),this._inboundQueues[u.AWTEventPriority.Low].push([])},S.prototype._addEventToProperQueue=function(A){(!this._paused||!this._shouldDropEventsOnPause)&&(this._queueSize++,this._inboundQueues[A.priority][this._inboundQueues[A.priority].length-1].push(A))},S.prototype._dropEventWithPriorityOrLess=function(A){for(var b=u.AWTEventPriority.Low;b<=A;){if(this._inboundQueues[b][this._inboundQueues[b].length-1].length>0)return T.default.eventsDropped([this._inboundQueues[b][this._inboundQueues[b].length-1].shift()],u.AWTEventsDroppedReason.QueueFull),!0;b++}return!1},S.prototype._batchEvents=function(A){for(var b=u.AWTEventPriority.High;b>=A;){for(;this._inboundQueues[b][0].length>0;){var m=this._inboundQueues[b][0].pop();this._queueSize--,this._batcher.addEventToBatch(m)}b--}this._batcher.flushBatch()},S.prototype._uploadNow=function(A){var b=this;this.hasEvents()&&this.sendEventsForPriorityAndAbove(u.AWTEventPriority.Low),this._checkOutboundQueueEmptyAndSent(function(){b._removeFirstQueues(),null!=A&&A(),b._uploadNowQueue.length>0?setTimeout(function(){return b._uploadNow(b._uploadNowQueue.shift())},0):(b._isCurrentlyUploadingNow=!1,b.hasEvents()&&v.default.scheduleTimer())})},S.prototype._checkOutboundQueueEmptyAndSent=function(A){var b=this;this._httpManager.isCompletelyIdle()?A():setTimeout(function(){return b._checkOutboundQueueEmptyAndSent(A)},250)},S}();g.default=p},1009:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var u=c(4094),I=c(676),v=c(5640),_="UserInfo.IdType",T=function(){function y(C,f){this._allowDeviceFields=C,this._properties=f}return y.prototype.setAppId=function(C){this._addContext("AppInfo.Id",C)},y.prototype.setAppVersion=function(C){this._addContext("AppInfo.Version",C)},y.prototype.setAppLanguage=function(C){this._addContext("AppInfo.Language",C)},y.prototype.setDeviceId=function(C){this._allowDeviceFields&&(u.default.checkAndSaveDeviceId(C),this._addContext("DeviceInfo.Id",C))},y.prototype.setDeviceOsName=function(C){this._allowDeviceFields&&this._addContext("DeviceInfo.OsName",C)},y.prototype.setDeviceOsVersion=function(C){this._allowDeviceFields&&this._addContext("DeviceInfo.OsVersion",C)},y.prototype.setDeviceBrowserName=function(C){this._allowDeviceFields&&this._addContext("DeviceInfo.BrowserName",C)},y.prototype.setDeviceBrowserVersion=function(C){this._allowDeviceFields&&this._addContext("DeviceInfo.BrowserVersion",C)},y.prototype.setDeviceMake=function(C){this._allowDeviceFields&&this._addContext("DeviceInfo.Make",C)},y.prototype.setDeviceModel=function(C){this._allowDeviceFields&&this._addContext("DeviceInfo.Model",C)},y.prototype.setUserId=function(C,f,h){if(!isNaN(h)&&null!==h&&h>=0&&h<=12)this._addContext(_,h.toString());else{var p=void 0;switch(f){case I.AWTPiiKind.SipAddress:p=v.AWTUserIdType.SipAddress;break;case I.AWTPiiKind.PhoneNumber:p=v.AWTUserIdType.PhoneNumber;break;case I.AWTPiiKind.SmtpAddress:p=v.AWTUserIdType.EmailAddress;break;default:p=v.AWTUserIdType.Unknown}this._addContext(_,p.toString())}if(isNaN(f)||null===f||f===I.AWTPiiKind.NotSet||f>13)switch(h){case v.AWTUserIdType.Skype:f=I.AWTPiiKind.Identity;break;case v.AWTUserIdType.EmailAddress:f=I.AWTPiiKind.SmtpAddress;break;case v.AWTUserIdType.PhoneNumber:f=I.AWTPiiKind.PhoneNumber;break;case v.AWTUserIdType.SipAddress:f=I.AWTPiiKind.SipAddress;break;default:f=I.AWTPiiKind.NotSet}this._addContextWithPii("UserInfo.Id",C,f)},y.prototype.setUserAdvertisingId=function(C){this._addContext("UserInfo.AdvertisingId",C)},y.prototype.setUserTimeZone=function(C){this._addContext("UserInfo.TimeZone",C)},y.prototype.setUserLanguage=function(C){this._addContext("UserInfo.Language",C)},y.prototype._addContext=function(C,f){"string"==typeof f&&this._properties.setProperty(C,f)},y.prototype._addContextWithPii=function(C,f,h){"string"==typeof f&&this._properties.setPropertyWithPii(C,f,h)},y}();g.default=T},2621:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var u=c(4023),I=function(){function v(){}return v.setEventsHandler=function(_){u.default.setEventsHandler(_)},v.getEventsHandler=function(){return u.default.getEventsHandler()},v.scheduleTimer=function(){u.default.scheduleTimer()},v}();g.default=I},4023:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var u=c(1842),I=c(676),v=c(4220),_=c(5816),T=c(58),y=c(7613),C=c(5593),p="awt_stats",S=function(){function A(){}return A.setEventsHandler=function(b){this._eventHandler=b},A.getEventsHandler=function(){return this._eventHandler},A.scheduleTimer=function(){var b=this,m=this._profiles[this._currentProfile][2];this._timeout<0&&m>=0&&!this._paused&&(this._eventHandler.hasEvents()?(0===m&&this._currentBackoffCount>0&&(m=1),this._timeout=setTimeout(function(){return b._batchAndSendEvents()},m*(1<<this._currentBackoffCount)*1e3)):this._timerCount=0)},A.initialize=function(b){var m=this;this._newEventsAllowed=!0,this._config=b,this._eventHandler=new v.default(b.collectorUri,b.cacheMemorySizeLimitInNumberOfEvents,b.httpXHROverride,b.clockSkewRefreshDurationInMins),this._initializeProfiles(),_.default.initialize(function(D,O){if(m._config.canSendStatEvent(p)){var N=new T.default(p);for(var V in N.setEventPriority(I.AWTEventPriority.High),N.setProperty("TenantId",O),D)D.hasOwnProperty(V)&&N.setProperty(V,D[V].toString());y.default.getLogger(C.StatsApiKey).logEvent(N)}})},A.setTransmitProfile=function(b){this._currentProfile!==b&&void 0!==this._profiles[b]&&(this.clearTimeout(),this._currentProfile=b,this.scheduleTimer())},A.loadTransmitProfiles=function(b){for(var m in this._resetTransmitProfiles(),b)if(b.hasOwnProperty(m)){if(3!==b[m].length)continue;for(var D=2;D>=0;--D)if(b[m][D]<0){for(var O=D;O>=0;--O)b[m][O]=-1;break}for(D=2;D>0;--D)b[m][D]>0&&b[m][D-1]>0&&(b[m][D-1]=Math.ceil(b[m][D-1]/b[m][D])*b[m][D]);this._profiles[m]=b[m]}},A.sendEvent=function(b){this._newEventsAllowed&&(this._currentBackoffCount>0&&b.priority===I.AWTEventPriority.Immediate_sync&&(b.priority=I.AWTEventPriority.High),this._eventHandler.addEvent(b),this.scheduleTimer())},A.flush=function(b){var m=(new Date).getTime();!this._paused&&this._lastUploadNowCall+3e4<m&&(this._lastUploadNowCall=m,this._timeout>-1&&(clearTimeout(this._timeout),this._timeout=-1),this._eventHandler.uploadNow(b))},A.pauseTransmission=function(){this._paused||(this.clearTimeout(),this._eventHandler.pauseTransmission(),this._paused=!0)},A.resumeTransmision=function(){this._paused&&(this._paused=!1,this._eventHandler.resumeTransmission(),this.scheduleTimer())},A.flushAndTeardown=function(){_.default.teardown(),this._newEventsAllowed=!1,this.clearTimeout(),this._eventHandler.teardown()},A.backOffTransmission=function(){this._currentBackoffCount<4&&(this._currentBackoffCount++,this.clearTimeout(),this.scheduleTimer())},A.clearBackOff=function(){this._currentBackoffCount>0&&(this._currentBackoffCount=0,this.clearTimeout(),this.scheduleTimer())},A._resetTransmitProfiles=function(){this.clearTimeout(),this._initializeProfiles(),this._currentProfile=u.AWT_REAL_TIME,this.scheduleTimer()},A.clearTimeout=function(){this._timeout>0&&(clearTimeout(this._timeout),this._timeout=-1,this._timerCount=0)},A._batchAndSendEvents=function(){var b=I.AWTEventPriority.High;this._timerCount++,this._timerCount*this._profiles[this._currentProfile][2]===this._profiles[this._currentProfile][0]?(b=I.AWTEventPriority.Low,this._timerCount=0):this._timerCount*this._profiles[this._currentProfile][2]===this._profiles[this._currentProfile][1]&&(b=I.AWTEventPriority.Normal),this._eventHandler.sendEventsForPriorityAndAbove(b),this._timeout=-1,this.scheduleTimer()},A._initializeProfiles=function(){this._profiles={},this._profiles[u.AWT_REAL_TIME]=[4,2,1],this._profiles[u.AWT_NEAR_REAL_TIME]=[12,6,3],this._profiles[u.AWT_BEST_EFFORT]=[36,18,9]},A._newEventsAllowed=!1,A._currentProfile=u.AWT_REAL_TIME,A._timeout=-1,A._currentBackoffCount=0,A._paused=!1,A._timerCount=0,A._lastUploadNowCall=0,A}();g.default=S},5234:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var u=c(676);g.AWTPropertyType=u.AWTPropertyType,g.AWTPiiKind=u.AWTPiiKind,g.AWTEventPriority=u.AWTEventPriority,g.AWTEventsDroppedReason=u.AWTEventsDroppedReason,g.AWTEventsRejectedReason=u.AWTEventsRejectedReason,g.AWTCustomerContentKind=u.AWTCustomerContentKind;var I=c(5640);g.AWTUserIdType=I.AWTUserIdType,g.AWTSessionState=I.AWTSessionState;var v=c(1842);g.AWT_BEST_EFFORT=v.AWT_BEST_EFFORT,g.AWT_NEAR_REAL_TIME=v.AWT_NEAR_REAL_TIME,g.AWT_REAL_TIME=v.AWT_REAL_TIME;var _=c(58);g.AWTEventProperties=_.default;var T=c(6208);g.AWTLogger=T.default;var y=c(7613);g.AWTLogManager=y.default;var C=c(2621);g.AWTTransmissionManager=C.default;var f=c(6064);g.AWTSerializer=f.default;var h=c(1009);g.AWTSemanticContext=h.default,g.AWT_COLLECTOR_URL_UNITED_STATES="https://us.pipe.aria.microsoft.com/Collector/3.0/",g.AWT_COLLECTOR_URL_GERMANY="https://de.pipe.aria.microsoft.com/Collector/3.0/",g.AWT_COLLECTOR_URL_JAPAN="https://jp.pipe.aria.microsoft.com/Collector/3.0/",g.AWT_COLLECTOR_URL_AUSTRALIA="https://au.pipe.aria.microsoft.com/Collector/3.0/",g.AWT_COLLECTOR_URL_EUROPE="https://eu.pipe.aria.microsoft.com/Collector/3.0/",g.AWT_COLLECTOR_URL_USGOV_DOD="https://pf.pipe.aria.microsoft.com/Collector/3.0",g.AWT_COLLECTOR_URL_USGOV_DOJ="https://tb.pipe.aria.microsoft.com/Collector/3.0"},1842:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.AWT_REAL_TIME="REAL_TIME",g.AWT_NEAR_REAL_TIME="NEAR_REAL_TIME",g.AWT_BEST_EFFORT="BEST_EFFORT"},5640:(G,g)=>{"use strict";var I;Object.defineProperty(g,"__esModule",{value:!0}),(I=g.AWTUserIdType||(g.AWTUserIdType={}))[I.Unknown=0]="Unknown",I[I.MSACID=1]="MSACID",I[I.MSAPUID=2]="MSAPUID",I[I.ANID=3]="ANID",I[I.OrgIdCID=4]="OrgIdCID",I[I.OrgIdPUID=5]="OrgIdPUID",I[I.UserObjectId=6]="UserObjectId",I[I.Skype=7]="Skype",I[I.Yammer=8]="Yammer",I[I.EmailAddress=9]="EmailAddress",I[I.PhoneNumber=10]="PhoneNumber",I[I.SipAddress=11]="SipAddress",I[I.MUID=12]="MUID",function(I){I[I.Started=0]="Started",I[I.Ended=1]="Ended"}(g.AWTSessionState||(g.AWTSessionState={}))},8779:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.Version="1.8.7",g.FullVersionString="AWT-Web-JS-"+g.Version},5436:(G,g,c)=>{"use strict";g.Mg=void 0;c(3762),c(6194);var _=c(7626);g.Mg=_.default,c(448),c(2900),c(3372),c(4352);c(9425)},2235:function(G,g,c){"use strict";var u=this&&this.__assign||function(){return(u=Object.assign||function(h){for(var p,S=1,A=arguments.length;S<A;S++)for(var b in p=arguments[S])Object.prototype.hasOwnProperty.call(p,b)&&(h[b]=p[b]);return h}).apply(this,arguments)};Object.defineProperty(g,"__esModule",{value:!0});var I=c(4151),v=c(676),_=c(5234),T=c(7095),y=c(3037),C=c(4151),f=function(){function h(){}return h.initialize=function(p){this._debug&&console.log("[AriaTelemetry][logger][initialize][custom]"),h._logger=_.AWTLogManager.initialize(p)},h.setDebug=function(p){h._debug=p},h.disable=function(){this._debug&&console.log("[AriaTelemetry][disable]"),h._disable=!0},h.setCDNPackages=function(p){h._CDNPackagesInfo=u(u({},h._CDNPackagesInfo),p)},h.info=function(p,S){void 0===S&&(S=y.default.EVENTS);var A={name:y.default.EVENTS,properties:u(u(u(u({},h.populateBaseProperties()),h.fillMobilePlatformData()),p),{LogLevel:T.default.INFO}),priority:v.AWTEventPriority.High};S==y.default.IC3CLIENT&&(A={name:y.default.IC3CLIENT,properties:u(u(u({},h.populateIC3ClientBaseProperties()),p),{LogLevel:T.default.INFO}),priority:v.AWTEventPriority.High}),S==y.default.OCSDK&&(A={name:y.default.OCSDK,properties:u(u(u({},h.populateOCSDKBaseProperties()),p),{LogLevel:T.default.INFO}),priority:v.AWTEventPriority.High}),this._debug&&console.log("[AriaTelemetry][info] "+S),this._debug&&console.log(A),this._debug&&console.log(A.properties.Event),!h._disable&&h.logger.logEvent(A)},h.debug=function(p,S){void 0===S&&(S=y.default.EVENTS);var A={name:y.default.EVENTS,properties:u(u(u(u({},h.populateBaseProperties()),h.fillMobilePlatformData()),p),{LogLevel:T.default.DEBUG}),priority:v.AWTEventPriority.High};S==y.default.IC3CLIENT&&(A={name:y.default.IC3CLIENT,properties:u(u(u({},h.populateIC3ClientBaseProperties()),p),{LogLevel:T.default.DEBUG}),priority:v.AWTEventPriority.High}),S==y.default.OCSDK&&(A={name:y.default.OCSDK,properties:u(u(u({},h.populateOCSDKBaseProperties()),p),{LogLevel:T.default.DEBUG}),priority:v.AWTEventPriority.High}),this._debug&&console.log("[AriaTelemetry][debug] "+S),this._debug&&console.log(A),this._debug&&console.log(A.properties.Event),!h._disable&&h.logger.logEvent(A)},h.warn=function(p,S){void 0===S&&(S=y.default.EVENTS);var A={name:y.default.EVENTS,properties:u(u(u(u({},h.populateBaseProperties()),h.fillMobilePlatformData()),p),{LogLevel:T.default.WARN}),priority:v.AWTEventPriority.High};S==y.default.IC3CLIENT&&(A={name:y.default.IC3CLIENT,properties:u(u(u({},h.populateIC3ClientBaseProperties()),p),{LogLevel:T.default.WARN}),priority:v.AWTEventPriority.High}),S==y.default.OCSDK&&(A={name:y.default.OCSDK,properties:u(u(u({},h.populateOCSDKBaseProperties()),p),{LogLevel:T.default.WARN}),priority:v.AWTEventPriority.High}),this._debug&&console.log("[AriaTelemetry][warn] "+S),this._debug&&console.log(A),this._debug&&console.log(A.properties.Event),!h._disable&&h.logger.logEvent(A)},h.error=function(p,S){void 0===S&&(S=y.default.EVENTS);var A={name:y.default.EVENTS,properties:u(u(u(u({},h.populateBaseProperties()),h.fillMobilePlatformData()),p),{LogLevel:T.default.ERROR}),priority:v.AWTEventPriority.High};S==y.default.IC3CLIENT&&(A={name:y.default.IC3CLIENT,properties:u(u(u({},h.populateIC3ClientBaseProperties()),p),{LogLevel:T.default.ERROR}),priority:v.AWTEventPriority.High}),S==y.default.OCSDK&&(A={name:y.default.OCSDK,properties:u(u(u({},h.populateOCSDKBaseProperties()),p),{LogLevel:T.default.ERROR}),priority:v.AWTEventPriority.High}),this._debug&&console.log("[AriaTelemetry][error] "+S),this._debug&&console.log(A),this._debug&&console.log(A.properties.Event),!h._disable&&h.logger.logEvent(A)},h.log=function(p,S){void 0===S&&(S=y.default.EVENTS);var A={name:y.default.EVENTS,properties:u(u(u(u({},h.populateBaseProperties()),h.fillMobilePlatformData()),p),{LogLevel:T.default.LOG}),priority:v.AWTEventPriority.High};S==y.default.IC3CLIENT&&(A={name:y.default.IC3CLIENT,properties:u(u(u({},h.populateIC3ClientBaseProperties()),p),{LogLevel:T.default.LOG}),priority:v.AWTEventPriority.High}),S==y.default.OCSDK&&(A={name:y.default.OCSDK,properties:u(u(u({},h.populateOCSDKBaseProperties()),p),{LogLevel:T.default.LOG}),priority:v.AWTEventPriority.High}),this._debug&&console.log("[AriaTelemetry][log]"),this._debug&&console.log(A),this._debug&&console.log(A.properties.Event),!h._disable&&h.logger.logEvent(A)},Object.defineProperty(h,"logger",{get:function(){return h._logger||(this._debug&&console.log("[AriaTelemetry][logger][initialize]"),h._logger=_.AWTLogManager.initialize(I.ariaTelemetryKey)),h._logger},enumerable:!1,configurable:!0}),h.populateBaseProperties=function(){var p={OCSDK:c(1528).i8,IC3Core:c(5233).i8};return{OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",CallId:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:"",ChatSDKVersion:c(8464).i8,NPMPackagesInfo:JSON.stringify(p),CDNPackagesInfo:JSON.stringify(h._CDNPackagesInfo)}},h.fillMobilePlatformData=function(){var p={};try{var A=c(Object(function(){var m=new Error("Cannot find module 'react-native'");throw m.code="MODULE_NOT_FOUND",m}())).Platform;p.DeviceInfo_OsVersion=A.Version,p.DeviceInfo_OsName="android"===A.OS?"Android":"ios"===A.OS?"iOS":""+A.OS,this._debug&&console.log("[AriaTelemetry][fillMobilePlatformData]["+p.DeviceInfo_OsName+"]")}catch(b){this._debug&&console.log("[AriaTelemetry][fillMobilePlatformData][Web]")}return p},h.populateIC3ClientBaseProperties=function(){return{OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",Event:"",Description:"",SubscriptionId:"",EndpointId:"",EndpointUrl:"",ErrorCode:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:"",IC3ClientVersion:C.ic3ClientVersion}},h.populateOCSDKBaseProperties=function(){return{OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",TransactionId:"",Event:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:"",OCSDKVersion:c(1528).i8}},h._debug=!1,h._disable=!1,h}();g.default=f},7095:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=(()=>{return(u=c||(c={})).INFO="INFO",u.DEBUG="DEBUG",u.WARN="WARN",u.ERROR="ERROR",u.LOG="LOG",c;var u})();g.default=c},1247:function(G,g,c){"use strict";var u=this&&this.__assign||function(){return(u=Object.assign||function(T){for(var y,C=1,f=arguments.length;C<f;C++)for(var h in y=arguments[C])Object.prototype.hasOwnProperty.call(y,h)&&(T[h]=y[h]);return T}).apply(this,arguments)};Object.defineProperty(g,"__esModule",{value:!0});var I=c(8485),v=c(9600),_=function(){function T(y){this.omnichannelConfig=y,this.telemetry=null,this.debug=!1,this.telemetryEvents=new Map}return T.prototype.setDebug=function(y){var C;this.debug=y,null===(C=this.telemetry)||void 0===C||C.setDebug(y)},T.prototype.useTelemetry=function(y){this.debug&&console.log("[ScenarioMarker][useTelemetry]"),this.telemetry=y},T.prototype.startScenario=function(y,C){var f;if(void 0===C&&(C={}),this.debug&&console.log("[ScenarioMarker][startScenario]"),!this.telemetryEvents.has(y)){var h=new I.default;h.start(),this.telemetryEvents.set(y,h)}var p=u({Event:v.startEvent(y),OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId},C);null===(f=this.telemetry)||void 0===f||f.info(p)},T.prototype.failScenario=function(y,C){var f;if(void 0===C&&(C={}),this.debug&&console.log("[ScenarioMarker][failScenario]"),this.telemetryEvents.has(y)){var h=this.telemetryEvents.get(y);this.telemetryEvents.delete(y);var p=u({Event:v.failEvent(y),OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,ElapsedTimeInMilliseconds:h.stop()},C);null===(f=this.telemetry)||void 0===f||f.error(p)}else console.warn("'"+y+"' event has not started.")},T.prototype.completeScenario=function(y,C){var f;if(void 0===C&&(C={}),this.debug&&console.log("[ScenarioMarker][completeScenario]"),this.telemetryEvents.has(y)){var h=this.telemetryEvents.get(y);this.telemetryEvents.delete(y);var p=u({Event:v.completeEvent(y),OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,ElapsedTimeInMilliseconds:h.stop()},C);null===(f=this.telemetry)||void 0===f||f.info(p)}else console.warn("'"+y+"' event has not started.")},T}();g.default=_},3037:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=(()=>{return(u=c||(c={})).EVENTS="occhatsdk_events",u.IC3CLIENT="occhatsdk_ic3clientevents",u.OCSDK="occhatsdk_ocsdkevents",u.UNDEFINED="undefined",c;var u})();g.default=c},8485:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=function(){function u(){}return u.prototype.start=function(){this.timeStart=(new Date).getTime()},u.prototype.stop=function(){return(new Date).getTime()-this.timeStart},u}();g.default=c},9600:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.failEvent=g.completeEvent=g.startEvent=void 0;var c=(()=>{return(u=c||(c={})).ValidateOmnichannelConfig="ValidateOmnichannelConfig",u.ValidateSDKConfig="ValidateSDKConfig",u.InitializeChatSDK="InitializeChatSDK",u.StartChat="StartChat",u.EndChat="EndChat",u.GetLiveChatConfig="GetLiveChatConfig",u.GetChatToken="GetChatToken",u.GetConversationDetails="GetConversationDetails",u.SendTypingEvent="SendTypingEvent",u.OnAgentEndSession="OnAgentEndSession",u.UploadFileAttachment="UploadFileAttachment",u.DownloadFileAttachment="DownloadFileAttachment",u.EmailLiveChatTranscript="EmailLiveChatTranscript",u.GetLiveChatTranscript="GetLiveChatTranscript",u.CreateIC3Adapter="CreateChatAdapter",u.CreateACSAdapter="CreateACSAdapter",u.GetVoiceVideoCalling="GetVoiceVideoCalling",u.GetIC3Client="GetIC3Client",u.InitializeVoiceVideoCallingSDK="InitializeVoiceVideoCallingSDK",u.AcceptVoiceCall="AcceptVoiceCall",u.AcceptVideoCall="AcceptVideoCall",u.RejectCall="RejectCall",u.StopCall="StopCall",u.OnCallDisconnected="OnCallDisconnected",u.UpdateChatToken="UpdateChatToken",u.GetChatReconnectContext="GetChatReconnectContext",c;var u})();g.startEvent=function(u){return u+"Started"},g.completeEvent=function(u){return u+"Completed"},g.failEvent=function(u){return u+"Failed"},g.default=c},6345:function(G,g){"use strict";var c=this&&this.__awaiter||function(v,_,T,y){return new(T||(T=Promise))(function(f,h){function p(b){try{A(y.next(b))}catch(m){h(m)}}function S(b){try{A(y.throw(b))}catch(m){h(m)}}function A(b){b.done?f(b.value):function(f){return f instanceof T?f:new T(function(h){h(f)})}(b.value).then(p,S)}A((y=y.apply(v,_||[])).next())})},u=this&&this.__generator||function(v,_){var y,C,f,h,T={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return h={next:p(0),throw:p(1),return:p(2)},"function"==typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h;function p(A){return function(b){return function(A){if(y)throw new TypeError("Generator is already executing.");for(;T;)try{if(y=1,C&&(f=2&A[0]?C.return:A[0]?C.throw||((f=C.return)&&f.call(C),0):C.next)&&!(f=f.call(C,A[1])).done)return f;switch(C=0,f&&(A=[2&A[0],f.value]),A[0]){case 0:case 1:f=A;break;case 4:return T.label++,{value:A[1],done:!1};case 5:T.label++,C=A[1],A=[0];continue;case 7:A=T.ops.pop(),T.trys.pop();continue;default:if(!(f=(f=T.trys).length>0&&f[f.length-1])&&(6===A[0]||2===A[0])){T=0;continue}if(3===A[0]&&(!f||A[1]>f[0]&&A[1]<f[3])){T.label=A[1];break}if(6===A[0]&&T.label<f[1]){T.label=f[1],f=A;break}if(f&&T.label<f[2]){T.label=f[2],T.ops.push(A);break}f[2]&&T.ops.pop(),T.trys.pop();continue}A=_.call(v,T)}catch(b){A=[6,b],C=0}finally{y=f=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([A,b])}}};Object.defineProperty(g,"__esModule",{value:!0}),g.loadScript=void 0;var I=function(v,_,T){return void 0===_&&(_=function(){}),void 0===T&&(T=function(){}),c(void 0,void 0,void 0,function(){return u(this,function(y){return[2,new Promise(function(C,f){return c(void 0,void 0,void 0,function(){var S;return u(this,function(A){switch(A.label){case 0:return Array.from(document.getElementsByTagName("script")).filter(function(b){return b.src==v}).length?[4,_()]:[3,2];case 1:return A.sent(),[2,C()];case 2:return(S=document.createElement("script")).setAttribute("src",v),S.setAttribute("type","text/javascript"),document.head.appendChild(S),S.addEventListener("load",function(){return c(void 0,void 0,void 0,function(){return u(this,function(b){switch(b.label){case 0:return[4,_()];case 1:return b.sent(),C(),[2]}})})}),S.addEventListener("error",function(){return c(void 0,void 0,void 0,function(){return u(this,function(b){switch(b.label){case 0:return[4,T()];case 1:return b.sent(),f(),[2]}})})}),[2]}})})})]})})};g.loadScript=I,g.default={loadScript:I}},838:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var u=c(2235);g.default=function(v){return void 0===v&&(v=!1),u.default.setDebug(v),u.default}},1775:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.getIC3AdapterCDNUrl=g.getIC3ClientCDNUrl=void 0;var u=c(4151),I=function(_){return void 0===_&&(_=u.ic3ClientVersion),"https://comms.omnichannelengagementhub.com/release/"+_+"/Scripts/SDK/SDK.min.js"};g.getIC3ClientCDNUrl=I;var v=function(_){return void 0===_&&(_=u.webChatIC3AdapterVersion),"https://webchatic3.blob.core.windows.net/webchat-ic3adapter/"+_+"/botframework-webchat-adapter-ic3.production.min.js"};g.getIC3AdapterCDNUrl=v,g.default={getIC3ClientCDNUrl:I,getIC3AdapterCDNUrl:v}},2811:function(G,g,c){"use strict";var u=this&&this.__assign||function(){return(u=Object.assign||function(y){for(var C,f=1,h=arguments.length;f<h;f++)for(var p in C=arguments[f])Object.prototype.hasOwnProperty.call(C,p)&&(y[p]=C[p]);return y}).apply(this,arguments)};Object.defineProperty(g,"__esModule",{value:!0}),g.createOCSDKLogger=g.createIC3ClientLogger=g.OCSDKLogger=g.IC3ClientLogger=void 0;var I=c(752),v=c(3037),_=function(){function y(C){this.omnichannelConfig=C,this.debug=!1,this.requestId="",this.chatId="",this.telemetry=null,this.debug=!1}return y.prototype.setDebug=function(C){this.debug=C},y.prototype.setRequestId=function(C){this.requestId=C},y.prototype.setChatId=function(C){this.chatId=C},y.prototype.useTelemetry=function(C){this.debug&&console.log("[IC3ClientLogger][useTelemetry]"),this.telemetry=C},y.prototype.logClientSdkTelemetryEvent=function(C,f){var h,p,S,A;this.debug&&console.log("[IC3ClientLogger][logClientSdkTelemetryEvent]["+C+"]"),this.debug&&console.log(f);var b={OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,RequestId:this.requestId,ChatId:this.chatId},m=u(u({},f),{ExceptionDetails:f.ExceptionDetails?JSON.stringify(f.ExceptionDetails):""});switch(C){case I.default.DEBUG:null===(h=this.telemetry)||void 0===h||h.debug(u(u({},b),m),v.default.IC3CLIENT);break;case I.default.WARN:null===(p=this.telemetry)||void 0===p||p.warn(u(u({},b),m),v.default.IC3CLIENT);break;case I.default.ERROR:null===(S=this.telemetry)||void 0===S||S.error(u(u({},b),m),v.default.IC3CLIENT);break;case I.default.INFO:default:null===(A=this.telemetry)||void 0===A||A.info(u(u({},b),m),v.default.IC3CLIENT)}},y}();g.IC3ClientLogger=_;var T=function(){function y(C){this.omnichannelConfig=C,this.debug=!1,this.requestId="",this.chatId="",this.telemetry=null,this.debug=!1}return y.prototype.setDebug=function(C){this.debug=C},y.prototype.setRequestId=function(C){this.requestId=C},y.prototype.setChatId=function(C){this.chatId=C},y.prototype.useTelemetry=function(C){this.debug&&console.log("[OCSDKLogger][useTelemetry]"),this.telemetry=C},y.prototype.logClientSdkTelemetryEvent=function(C,f){var h,p,S,A;this.debug&&console.log("[OCSDKLogger][logClientSdkTelemetryEvent]["+C+"]"),this.debug&&console.log(f);var b={OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,RequestId:this.requestId,ChatId:this.chatId},m=u(u({},f),{ExceptionDetails:f.ExceptionDetails?JSON.stringify(f.ExceptionDetails):""});switch(C){case I.default.DEBUG:null===(h=this.telemetry)||void 0===h||h.debug(u(u({},b),m),v.default.OCSDK);break;case I.default.WARN:null===(p=this.telemetry)||void 0===p||p.warn(u(u({},b),m),v.default.OCSDK);break;case I.default.ERROR:null===(S=this.telemetry)||void 0===S||S.error(u(u({},b),m),v.default.OCSDK);break;case I.default.INFO:default:null===(A=this.telemetry)||void 0===A||A.info(u(u({},b),m),v.default.OCSDK)}},y}();g.OCSDKLogger=T,g.createIC3ClientLogger=function(y,C){void 0===C&&(C=!1);var f=new _(y);return f.setDebug(C),f},g.createOCSDKLogger=function(y,C){void 0===C&&(C=!1);var f=new T(y);return f.setDebug(C),f}},8098:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.isReactNative=g.isNode=g.isBrowser=void 0,g.isBrowser=function(){return"undefined"!=typeof window&&void 0!==window.document},g.isNode=function(){return"undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node},g.isReactNative=function(){return"undefined"!=typeof navigator&&"ReactNative"==navigator.product},g.default={isBrowser:g.isBrowser,isNode:g.isNode,isReactNative:g.isReactNative}},9425:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.isCustomerMessage=g.isSystemMessage=void 0;var u=c(3372);g.isSystemMessage=function(I){return I.messageType===u.default.UserMessage&&I.properties.tags.includes("system")},g.isCustomerMessage=function(I){return I.sender.id.includes("contacts/8:")}},7616:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=["orgUrl","orgId","widgetId"];g.default=function(I){if(!I)throw new Error("OmnichannelConfiguration not found");for(var v=Object.keys(I),_=0,T=c;_<T.length;_++){var y=T[_];if(!v.includes(y))throw new Error("Missing '"+y+"' in OmnichannelConfiguration")}}},641:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.defaultChatSDKConfig=void 0;var I={dataMasking:{disable:!1,maskingCharacter:"#"},telemetry:{disable:!1,ariaTelemetryKey:c(4151).ariaTelemetryKey},persistentChat:{disable:!0,tokenUpdateTime:216e5},chatReconnect:{disable:!0}};g.defaultChatSDKConfig=I,g.default=function(y){y.dataMasking&&function(y){"boolean"!=typeof y.disable&&(y.disable=I.dataMasking.disable),("string"!=typeof y.maskingCharacter||1!==y.maskingCharacter.length)&&(y.maskingCharacter=I.dataMasking.maskingCharacter)}(y.dataMasking),y.persistentChat&&function(y){("number"!=typeof y.tokenUpdateTime||!y.tokenUpdateTime)&&(y.tokenUpdateTime=I.persistentChat.tokenUpdateTime)}(y.persistentChat)}},5145:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=function(){function u(){}return u.read="read",u}();g.default=c},3865:function(G,g,c){"use strict";var u=this&&this.__awaiter||function(b,m,D,O){return new(D||(D=Promise))(function(V,W){function B(K){try{L(O.next(K))}catch(q){W(q)}}function F(K){try{L(O.throw(K))}catch(q){W(q)}}function L(K){K.done?V(K.value):function(V){return V instanceof D?V:new D(function(W){W(V)})}(K.value).then(B,F)}L((O=O.apply(b,m||[])).next())})},I=this&&this.__generator||function(b,m){var O,N,V,W,D={label:0,sent:function(){if(1&V[0])throw V[1];return V[1]},trys:[],ops:[]};return W={next:B(0),throw:B(1),return:B(2)},"function"==typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W;function B(L){return function(K){return function(L){if(O)throw new TypeError("Generator is already executing.");for(;D;)try{if(O=1,N&&(V=2&L[0]?N.return:L[0]?N.throw||((V=N.return)&&V.call(N),0):N.next)&&!(V=V.call(N,L[1])).done)return V;switch(N=0,V&&(L=[2&L[0],V.value]),L[0]){case 0:case 1:V=L;break;case 4:return D.label++,{value:L[1],done:!1};case 5:D.label++,N=L[1],L=[0];continue;case 7:L=D.ops.pop(),D.trys.pop();continue;default:if(!(V=(V=D.trys).length>0&&V[V.length-1])&&(6===L[0]||2===L[0])){D=0;continue}if(3===L[0]&&(!V||L[1]>V[0]&&L[1]<V[3])){D.label=L[1];break}if(6===L[0]&&D.label<V[1]){D.label=V[1],V=L;break}if(V&&D.label<V[2]){D.label=V[2],D.ops.push(L);break}V[2]&&D.ops.pop(),D.trys.pop();continue}L=m.call(b,D)}catch(K){L=[6,K],N=0}finally{O=V=0}if(5&L[0])throw L[1];return{value:L[0]?L[1]:void 0,done:!0}}([L,K])}}};Object.defineProperty(g,"__esModule",{value:!0});var v=c(501),_=c(6849),T=c(5874),y=c(2915),C=c(1927),f=c(6648),h=c(5145),p=c(6355),S=c(8636),A=function(){function b(){}return b.getDocumentTypeFromContentType=function(m){return S.default.isDocumentTypeImage(m)?v.default.DocumentTypeImage:v.default.DocumentTypeFile},b.createNewDocument=function(m,D,O){return u(this,void 0,void 0,function(){var V,W,B,F,L;return I(this,function(K){return(L={})[m]=[h.default[h.default.read]],V={filename:D.name,permissions:L,type:b.getDocumentTypeFromContentType(D.type)},W=C.default.getAmsObjectsUrl(O.RegionGtms),(B=f.default.getDefaultAMSHeaders(O.SkypeToken))[_.default.ContentTypeHeader]=v.default.ContentTypeJson,F={data:JSON.stringify(V),headers:B,type:T.default.POST,url:W},[2,y.HttpClient.MakeRequest(F)]})})},b.uploadDocument=function(m,D,O){return u(this,void 0,void 0,function(){var N,V,W;return I(this,function(F){return console.log("AmsHelper.ts uploadDocument(): "+m+", "+D+", "+O),N=S.default.isDocumentTypeImage(D.type),V=C.default.getAmsObjectContentUrl(m,O.RegionGtms,N),W=f.default.getDefaultAMSHeaders(O.SkypeToken),[2,y.HttpClient.MakeRequest({data:D.data,headers:W,processData:!1,type:T.default.PUT,url:V})]})})},b.getFileStatus=function(m,D){console.log("AmsHelper.ts getFileStatus(): "+m+", "+D);var O=S.default.isImageType(m.type),N=C.default.getAmsStatusUrl(m.id,D.RegionGtms,O);return this.getViewStatus(N,D).then(function(V){return V.scan&&V.scan.status===v.default.Malware?p.default.Error:V.view_state===v.default.Ready?p.default.Success:V.scan&&V.scan.status===v.default.InProgress||V.view_state&&V.view_state!==v.default.Failed?p.default.InProgress:p.default.Error}).catch(function(){return Promise.reject({})})},b.downloadDocument=function(m,D){var O=this;console.log("AmsHelper.ts downloadDocument(): "+m+", "+D);var N=S.default.isImageType(m.type),V=C.default.getAmsStatusUrl(m.id,D.RegionGtms,N);return new Promise(function(W){O.getViewUri(V,D).then(function(B){var F=new Headers;return F.append("Authorization","skype_token "+D.SkypeToken),F.append("X-MS-Client-Version",v.default.ClientVersion),N&&(F.append("accept",v.default.AMSAcceptHeaderValue),F.append("Accept-Encoding",v.default.AMSAcceptEncodingHeaderValue)),fetch(B,{headers:F,method:T.default.GET}).then(function(K){W(K.blob())}).catch(function(){return Promise.reject({})})})})},b.getViewUri=function(m,D){var O=this;return console.log("AmsHelper.ts getViewUri(): "+m+", "+D),this.getViewStatus(m,D).then(function(N){return!N.view_location||N.view_state===v.default.Failed||N.scan&&N.scan.status===v.default.Malware?Promise.reject({}):N.view_state&&N.view_state!==v.default.Ready?O.getViewUri(m,D):N.content_state===v.default.Expired?Promise.reject({}):Promise.resolve(N.view_location)}).catch(function(){return Promise.reject("")})},b.getViewStatus=function(m,D){var O=this;return console.log("AmsHelper.ts getViewStatus(): "+m+", "+D),new Promise(function(N){setTimeout(N,v.default.DelayForAms)}).then(function(){var N=f.default.getDefaultAMSViewHeaders(D.SkypeToken);return y.HttpClient.MakeRequest({headers:N,type:T.default.GET,url:m}).then(function(W){return W.status_location&&!W.view_state?O.getViewStatus(W.status_location,D):Promise.resolve(W)}).catch(function(W){return Promise.reject(401===W.status||403===W.status?"unauthorized":{})})})},b}();g.default=A},501:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=function(){function u(){}return u.NewMessageEvent="NewMessage",u.MessageUpdateEvent="MessageUpdate",u.ThreadUpdateEvent="ThreadUpdate",u.ConversationUpdateEvent="ConversationUpdate",u.HttpLongPoll="HttpLongPoll",u.ContentTypeJson="application/json",u.ContentTypeTextPlain="text/plain;charset=UTF-8",u.ContentTypeForm="application/x-www-form-urlencoded",u.RedirectAs404="redirectAs404",u.NoCache="no-cache",u.User="user",u.Web="web",u.ClientInfoValue="os=Windows; osVer=10; proc=Win32; lcid=en-us; deviceType=1; country=IN; clientName=swc; clientVer=912/0.106.0.34//swc",u.TextPlainMimeType="text/plain",u.SwcName="SWC",u.Image="image",u.ClientVersion="937/0.123.0.9",u.DelayForAms=50,u.Reset_Flag="reset_ic3_needed",u.Malware="malware",u.Ready="ready",u.InProgress="in progress",u.Failed="failed",u.Expired="expired",u.ImageView="imgpsh_fullsize_anim",u.FileView="original",u.DocumentTypeImage="pish/image",u.DocumentTypeFile="sharing/file",u.ImageContent="imgpsh",u.FileContent="original",u.AMSAcceptHeaderValue="image/webp,image/ *,*/*;q=0.8",u.AMSAcceptEncodingHeaderValue="gzip, deflate, sdch, br",u.AMSAuthorizationSkypeTokenValue="skype_token ",u.stabilizePollMaxRetryCount=50,u.timeBetweenStabilizingPoll=1e3,u.retryCount=2,u.retry404Count=3,u.retryOtherCount=3,u.liveStateRetryCount=3,u.timeBetweenOperationRetry=1e3,u.heartBeatDuration=3e4,u.endpointRequestLog="Endpoint request",u.subscriptionRequestLog="Subscription request",u.setPropertiesRequestLog="Set message properties request",u.unsubscribeRequestLog="Unsubscribe from endpoint request",u.pollRequestLog="Polling",u.oldInitializer="Old initializer",u.newInitializer="New Initializer",u.skypeTokenAuthURL="/v1/skypetokenauth",u.skypeTokenConstantForData="skypetoken=",u}();g.default=c},1927:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var u=c(501),I=c(6849),v=c(909),_=function(){function T(){}return T.getV2EndpointUrl=function(y,C){return C.chatService+"/v2/users/ME/endpoints/"+y},T.getThreadUrl=function(y,C){return C.chatService+"/v1/threads/"+y+"?view=msnp24Equivalent"},T.getMessagesUrl=function(y,C){return C.chatService+"/v1/users/ME/conversations/"+y+"/messages"},T.getBotMessagesUrl=function(y,C){return C.chatService+"/v1/agents/"+y+"/invoke"},T.getAmsObjectsUrl=function(y){return v.default.sanitizeUrlWithBackSlash(y.ams)+"v1/objects"},T.getAmsObjectContentUrl=function(y,C,f){void 0===f&&(f=!1);var h=f?u.default.ImageContent:u.default.FileContent;return v.default.sanitizeUrlWithBackSlash(C.ams)+"v1/objects/"+y+"/content/"+h},T.getAmsObjectViewUrl=function(y,C,f){void 0===f&&(f=!1);var h=f?u.default.ImageView:u.default.FileView;return v.default.sanitizeUrlWithBackSlash(C.ams)+"v1/objects/"+y+"/views/"+h},T.getAmsStatusUrl=function(y,C,f){void 0===f&&(f=!1);var h=f?u.default.ImageView:u.default.FileView;return v.default.sanitizeUrlWithBackSlash(C.ams)+"v1/objects/"+y+"/views/"+h+"/status"},T.getV1EndpointUrl=function(y){return y.chatService+"/v1/users/ME/endpoints"},T.getV1DeleteEndpointUrl=function(y,C){return y.chatService+"/v1/users/ME/endpoints/"+C},T.getV1SubscriptionUrl=function(y){return y.chatService+"/v1/users/ME/endpoints/SELF/subscriptions"},T.getV1PollUrl=function(y,C){return y.chatService+"/v1/users/ME/endpoints/SELF/subscriptions/"+C+"/poll"},T.getV1SetPropertiesUrl=function(y){return y.chatService+"/v1/users/ME/endpoints/SELF/properties?name="+I.default.SetEndpointProperty},T}();g.default=_},8636:function(G,g,c){"use strict";var u=this&&this.__assign||function(){return(u=Object.assign||function(m){for(var D,O=1,N=arguments.length;O<N;O++)for(var V in D=arguments[O])Object.prototype.hasOwnProperty.call(D,V)&&(m[V]=D[V]);return m}).apply(this,arguments)};Object.defineProperty(g,"__esModule",{value:!0});var I=c(501),v=c(2900),_=c(4694),T=c(9306),y=c(448),C=c(3207),f=c(3372),h=c(4352),p=c(1927),S=c(7708),A=c(909),b=function(){function m(){}return m.createMessageData=function(D){var N=D.content,V=m.createBaseMessageData(D.contentType===y.default.Text?C.default.Text:C.default.RichTextHtml,D.contentType.toString(),N);return V.properties=this.getMessageProperties(D),A.default.isNullOrUndefined(D.sender.displayName)||(V.imdisplayname=D.sender.displayName),V},m.createBaseMessageData=function(D,O,N){return{"Has-Mentions":"false",clientmessageid:Date.now().toString(),composetime:(new Date).toISOString(),content:N,contenttype:O,messagetype:D}},m.getMessageProperties=function(D){var O={};if(O.deliveryMode=D.deliveryMode.toString(),D.tags){var N=[];D.tags.forEach(function(V){N.push(V)}),O.tags=N.join()}return O},m.createTypingStatusThreadMessageData=function(D,O){var N="";switch(D){case S.default.Typing:N=C.default.ControlTyping;break;case S.default.ClearTyping:N=C.default.ControlClearTyping}var V=m.createBaseMessageData(N,y.default.Text,"");return A.default.isNullOrUndefined(O)||(V=u(u({},O),V)),V},m.createBotMessageData=function(D,O){return JSON.stringify({conversation:{id:D},value:O})},m.createFileMessage=function(D,O,N){var V=C.default.Text,W=y.default.Text.toString().toLowerCase(),B=m.createBaseMessageData(V,W.toString(),"");return B.amsreferences=JSON.stringify([D.id]),B.properties=JSON.stringify(this.createFileMessageProperties(D,O,N)),A.default.isNullOrUndefined(N.sender.displayName)||(B.imdisplayname=N.sender.displayName),B},m.createFileMessageProperties=function(D,O,N){var V={};if(V.deliveryMode=N.deliveryMode.toString(),V.files=JSON.stringify([this.createFileProperty(D,O)]),V.importance="",V.subject="",N.tags){var W=[];N.tags.forEach(function(B){W.push(B)}),V.tags=W.join()}return V},m.createFileProperty=function(D,O){var N=!!m.isDocumentTypeImage(D.type);return{"@type":"http://schema.skype.com/File",type:D.type,itemid:"",baseUrl:"",providerData:"",version:2,id:D.id,title:D.name,state:"active",objectUrl:p.default.getAmsObjectViewUrl(D.id,O.RegionGtms,N),fileName:D.name,fileType:m.getNameAndExtension(D.name).extension,botFileProperties:{url:p.default.getAmsObjectViewUrl(D.id,O.RegionGtms,N)},fileInfo:{fileUrl:p.default.getAmsObjectContentUrl(D.id,O.RegionGtms,N),siteUrl:"",serverRelativeUrl:""},filePreview:{previewUrl:""}}},m.getNameAndExtension=function(D){var O=(D||"").split("."),N="",V="";return O.length>1?(V=O.pop().toLowerCase(),N=O.join(".")):(V="",N=O[0]),{name:N,extension:V}},m.createIRawMessage=function(D,O,N){var W,B,V={clientmessageid:D.clientmessageid,content:D.content,contentType:m.getMessageContentType(D),deliveryMode:A.default.isNullOrUndefined(D.properties)||D.properties.deliveryMode!==v.default.Bridged?v.default.Unbridged:v.default.Bridged,messageType:m.getMessageType(D),properties:D.properties,sender:{displayName:D.imdisplayname,id:D.from,type:m.getPersonType(D.from)},timestamp:new Date(Date.parse(D.originalarrivaltime))};(N&&(V.resourceType=N),A.default.isNullOrUndefined(D.properties)||A.default.isNullOrEmptyString(D.properties.tags))||(W=D.properties.tags.split(","),V.tags=W);if(!A.default.isNullOrUndefined(D.properties)&&!A.default.isNullOrEmptyString(D.properties.files)&&(B=JSON.parse(D.properties.files)).length>0){var F=B[0].id;A.default.isNullOrUndefined(F)&&D.amsreferences&&(F=D.amsreferences[0]);var L=m.getFileUrl(B[0],F,O);V.fileMetadata={fileSharingProtocolType:_.default.AmsBasedFileSharing,id:F,name:B[0].fileName,size:B[0].version,type:B[0].fileType,url:L}}return V},m.createIRawThread=function(D){return{id:D.id,members:D.members,messages:D.messages,properties:D.properties,rosterVersion:D.rosterVersion,type:D.type,version:D.version}},m.getConversationIdFromUrl=function(D){var O=D&&D.match(/\/(\d+:[^\/]*)[\/]?/);return O&&O[1]?O[1]:void 0},m.isSystemMessage=function(D){var O=!1;return A.default.isNullOrEmptyString(D.messagetype)||(O=m.getSystemMessageTypes().reduce(function(N,V){return N||0===D.messagetype.toLowerCase().indexOf(V.toLowerCase())},O)),O},m.getPersonType=function(D){var O=h.default.Unknown,N=D.split("/").pop();return 0===N.indexOf("28:")?O=h.default.Bot:0===N.indexOf("19:")&&(O=h.default.User),O},m.isImageType=function(D){switch(D.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"bmp":case"tiff":case"jfif":return!0;default:return!1}},m.getMessageType=function(D){var O;switch(D.messagetype){case f.default.Typing:O=f.default.Typing;break;case f.default.ClearTyping:O=f.default.ClearTyping;break;default:O=f.default.UserMessage}return O},m.getMessageContentType=function(D){var N=D.contenttype?D.contenttype:D.messagetype;return N===C.default.Text.toLowerCase()||N.indexOf(I.default.TextPlainMimeType)>=0?y.default.Text:y.default.RichText},m.getSystemMessageTypes=function(){return["ThreadActivity"]},m.getFileUrl=function(D,O,N){var W,V=D.fileInfo;if(V&&V.fileUrl)W=V.fileUrl;else if(O){var B=m.isImageType(D.fileType);W=p.default.getAmsObjectContentUrl(O,N.RegionGtms,B)}return W},m.isDocumentTypeImage=function(D){return-1!==D.indexOf(I.default.Image)},m.getDomainRegexp=function(){return new RegExp(/^(https?:.+?\.microsoft\.com)/i)},m.parseDomain=function(D){var O=D.match(m.getDomainRegexp());return O?O[1]:null},m.parseChatServiceHostUrl=function(D){return m.parseDomain(D)},m.shouldRetryOnFailure=function(D){return D!==T.default.Accepted&&D!==T.default.Created},m}();g.default=b},909:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var u=c(6849),I=function(){function v(){}return v.isNullOrEmptyString=function(_){return v.isNullOrUndefined(_)||""===_},v.isNullOrUndefinedOrEmptyArray=function(_){return v.isNullOrUndefined(_)||0===_.length},v.isNullOrUndefined=function(_){return null==_},v.isPrimitiveString=function(_){return"string"==typeof _},v.convertStringToBoolean=function(_){return!v.isNullOrUndefined(_)&&"true"===_.toLowerCase()},v.sanitizeUrlWithBackSlash=function(_){return _.endsWith("/")?_:_+"/"},v.getRegistrationTokenValue=function(_){var T=_.match(/registrationToken=(.+); expires=(\d+)/);return T&&T.length>=2?u.default.RegistrationTokenHeaderValue+T[1]:""},v.addQueryParametersToPath=function(_,T){var y=_;if(!v.isNullOrUndefined(T))for(var C in y.indexOf("?")>=0||(y+="?"),T)if(T.hasOwnProperty(C)){var f=C+"="+T[C];"?"!==y[y.length-1]&&(f="&"+f),y+=f}return y},v.getResponseHeader=function(_,T){var y;return v.isNullOrUndefined(_)||(y=_.headers[T]),y},v.timer=function(){var _=(new Date).getTime();return{get milliSecondsElapsed(){return(new Date).getTime()-_}}},v.concatArrays=function(_,T){!v.isNullOrUndefined(_)&&!v.isNullOrUndefined(T)&&T.forEach(function(y){_.push(y)})},v}();g.default=I},1288:function(G,g,c){"use strict";var u=this&&this.__awaiter||function(y,C,f,h){return new(f||(f=Promise))(function(S,A){function b(O){try{D(h.next(O))}catch(N){A(N)}}function m(O){try{D(h.throw(O))}catch(N){A(N)}}function D(O){O.done?S(O.value):function(S){return S instanceof f?S:new f(function(A){A(S)})}(O.value).then(b,m)}D((h=h.apply(y,C||[])).next())})},I=this&&this.__generator||function(y,C){var h,p,S,A,f={label:0,sent:function(){if(1&S[0])throw S[1];return S[1]},trys:[],ops:[]};return A={next:b(0),throw:b(1),return:b(2)},"function"==typeof Symbol&&(A[Symbol.iterator]=function(){return this}),A;function b(D){return function(O){return function(D){if(h)throw new TypeError("Generator is already executing.");for(;f;)try{if(h=1,p&&(S=2&D[0]?p.return:D[0]?p.throw||((S=p.return)&&S.call(p),0):p.next)&&!(S=S.call(p,D[1])).done)return S;switch(p=0,S&&(D=[2&D[0],S.value]),D[0]){case 0:case 1:S=D;break;case 4:return f.label++,{value:D[1],done:!1};case 5:f.label++,p=D[1],D=[0];continue;case 7:D=f.ops.pop(),f.trys.pop();continue;default:if(!(S=(S=f.trys).length>0&&S[S.length-1])&&(6===D[0]||2===D[0])){f=0;continue}if(3===D[0]&&(!S||D[1]>S[0]&&D[1]<S[3])){f.label=D[1];break}if(6===D[0]&&f.label<S[1]){f.label=S[1],S=D;break}if(S&&f.label<S[2]){f.label=S[2],f.ops.push(D);break}S[2]&&f.ops.pop(),f.trys.pop();continue}D=C.call(y,f)}catch(O){D=[6,O],p=0}finally{h=S=0}if(5&D[0])throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}([D,O])}}};Object.defineProperty(g,"__esModule",{value:!0});var v=c(2217),_=c(737),T=function(){function y(C){this.hostType=v.default.Page,this.id=_.uuidv4(),this.protocolType=C,this.newConversationMessageListeners={},this.threadUpdateListeners={},this.debug=!1}return y.prototype.setDebug=function(C){this.debug=C},y.prototype.joinConversation=function(C,f){var h=this;return this.onJoinConversation(C,f).then(function(p){return{disconnect:h.disconnectFromConversation.bind(h,p),downloadFile:h.downloadFile.bind(h,p),getFileStatus:h.getFileStatus.bind(h,p),getMembers:h.getMembers.bind(h,p),getMessages:h.getMessages.bind(h,p),id:p.id,indicateTypingStatus:h.indicateTypingStatus.bind(h,p),registerOnNewMessage:h.registerOnNewMessage.bind(h,p),registerOnThreadUpdate:h.registerOnThreadUpdate.bind(h,p),sendFileMessage:h.sendFileMessage.bind(h,p),sendMessage:h.sendMessage.bind(h,p),sendMessageToBot:h.sendMessageToBot.bind(h,p),uploadFile:h.uploadFile.bind(h,p),sendFileData:h.sendFileData.bind(h,p)}})},y.prototype.registerOnNewMessage=function(C,f){return u(this,void 0,void 0,function(){return I(this,function(h){return[2,Promise.resolve()]})})},y.prototype.registerOnThreadUpdate=function(C,f){return u(this,void 0,void 0,function(){return I(this,function(h){return[2,Promise.resolve()]})})},y.prototype.uploadFile=function(C,f,h){return Promise.resolve()},y.prototype.downloadFile=function(C,f){return this.debug&&console.debug("IC3Core/ClientBridge/downloadFile"),this.downloadFileData(C,f).then(function(h){if(h&&h.size)return h;var S=new Blob([new Uint8Array(h)]);return!S||0===S.size&&""===S.type?h:S})},y}();g.default=T},2518:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var u=c(333),I=c(2217),v=function(){function _(){}return _.getClientBridge=function(T){switch(T.hostType){case I.default.IFrame:throw new Error("Framed bridge not implemented for "+T.hostType+" in IC3Core");case I.default.Page:return new u.default(T.protocolType);default:throw new Error("Client bridge not implemented for "+T.hostType+" in IC3Core")}},_}();g.default=v},333:function(G,g,c){"use strict";var f,u=this&&this.__extends||(f=function(h,p){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,A){S.__proto__=A}||function(S,A){for(var b in A)A.hasOwnProperty(b)&&(S[b]=A[b])})(h,p)},function(h,p){function S(){this.constructor=h}f(h,p),h.prototype=null===p?Object.create(p):(S.prototype=p.prototype,new S)}),I=this&&this.__awaiter||function(f,h,p,S){return new(p||(p=Promise))(function(b,m){function D(V){try{N(S.next(V))}catch(W){m(W)}}function O(V){try{N(S.throw(V))}catch(W){m(W)}}function N(V){V.done?b(V.value):function(b){return b instanceof p?b:new p(function(m){m(b)})}(V.value).then(D,O)}N((S=S.apply(f,h||[])).next())})},v=this&&this.__generator||function(f,h){var S,A,b,m,p={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return m={next:D(0),throw:D(1),return:D(2)},"function"==typeof Symbol&&(m[Symbol.iterator]=function(){return this}),m;function D(N){return function(V){return function(N){if(S)throw new TypeError("Generator is already executing.");for(;p;)try{if(S=1,A&&(b=2&N[0]?A.return:N[0]?A.throw||((b=A.return)&&b.call(A),0):A.next)&&!(b=b.call(A,N[1])).done)return b;switch(A=0,b&&(N=[2&N[0],b.value]),N[0]){case 0:case 1:b=N;break;case 4:return p.label++,{value:N[1],done:!1};case 5:p.label++,A=N[1],N=[0];continue;case 7:N=p.ops.pop(),p.trys.pop();continue;default:if(!(b=(b=p.trys).length>0&&b[b.length-1])&&(6===N[0]||2===N[0])){p=0;continue}if(3===N[0]&&(!b||N[1]>b[0]&&N[1]<b[3])){p.label=N[1];break}if(6===N[0]&&p.label<b[1]){p.label=b[1],b=N;break}if(b&&p.label<b[2]){p.label=b[2],p.ops.push(N);break}b[2]&&p.ops.pop(),p.trys.pop();continue}N=h.call(f,p)}catch(V){N=[6,V],A=0}finally{S=b=0}if(5&N[0])throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}([N,V])}}};Object.defineProperty(g,"__esModule",{value:!0});var _=c(1288),T=c(2217),y=c(9515),C=function(f){function h(p){var S=f.call(this,p)||this;return S.hostType=T.default.Page,S.protocolAdapter=new y.default("",S.hostType),S}return u(h,f),h.prototype.setup=function(p){return Promise.resolve()},h.prototype.update=function(p){return Promise.resolve()},h.prototype.onRegisterOnNewMessage=function(p){return Promise.resolve()},h.prototype.onRegisterOnThreadUpdate=function(p){return Promise.resolve()},h.prototype.initialize=function(p){return this.protocolAdapter.initialize(p)},h.prototype.dispose=function(){return this.protocolAdapter.dispose()},h.prototype.sendMessage=function(p,S){return this.protocolAdapter.sendMessage(p,S)},h.prototype.sendFileMessage=function(p,S,A){return this.protocolAdapter.sendFileMessage(p,S,A)},h.prototype.getMessages=function(p){return this.protocolAdapter.getMessages(p)},h.prototype.disconnectFromConversation=function(p){return this.protocolAdapter.disconnectFromConversation(p)},h.prototype.onJoinConversation=function(p,S){return this.protocolAdapter.joinConversation(p,S)},h.prototype.sendFileData=function(p,S,A){return this.protocolAdapter.sendFileData(p,S,A)},h.prototype.downloadFileData=function(p,S){return this.protocolAdapter.downloadFileData(p,S)},h.prototype.getFileStatus=function(p,S){return this.protocolAdapter.getFileStatus(p,S)},h.prototype.indicateTypingStatus=function(p,S,A){return this.protocolAdapter.indicateTypingStatus(p,S,A)},h.prototype.sendMessageToBot=function(p,S,A){return this.protocolAdapter.sendMessageToBot(p,S,A)},h.prototype.getMembers=function(p){return this.protocolAdapter.getMembers(p)},h.prototype.registerOnNewMessage=function(p,S){return I(this,void 0,void 0,function(){return v(this,function(A){return this.protocolAdapter.registerOnNewMessage(p,S),[2,Promise.resolve()]})})},h.prototype.registerOnThreadUpdate=function(p,S){return I(this,void 0,void 0,function(){return v(this,function(A){return this.protocolAdapter.registerOnThreadUpdate(p,S),[2,Promise.resolve()]})})},h.prototype.setDebug=function(p){void 0===p&&(p=!1),this.protocolAdapter.setDebug(p)},h}(_.default);g.default=C},1218:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var u=c(3865),I=c(501),v=c(4694),_=c(6355),T=c(2217),y=c(2915),C=c(5256),f=c(6849),h=c(5874),p=c(3671),S=c(752),A=c(448),b=c(3207),m=c(5655),D=c(6648),O=c(1927),N=c(8636),V=c(909),W=function(){function B(F){this.hostType=T.default.Page,this.protocolType=m.default.IC3V1SDK,this.id=F,this.conversations=[],this.newConversationMessageListeners={},this.threadUpdateListeners={},this.internalConversationsData={},this.liveStateFailureCount=0,this.debug=!1}return B.prototype.startPolling=function(){this.ic3Initializer&&this.ic3Initializer.startPolling()},B.prototype.stopPolling=function(){this.ic3Initializer&&this.ic3Initializer.stopPolling()},B.prototype.setup=function(F){return this.logger=F.logger,y.HttpClient.setLogger(this.logger),Promise.resolve()},B.prototype.initialize=function(F){return this.setupSession(F),Promise.resolve()},B.prototype.update=function(F){return Promise.resolve()},B.prototype.dispose=function(){return this.conversations=[],this.newConversationMessageListeners={},this.threadUpdateListeners={},this.internalConversationsData={},Promise.resolve()},B.prototype.joinConversation=function(F,L){var K;void 0===L&&(L=!0);var q=V.default.timer(),$={id:F};return-1===this.conversations.findIndex(function(z){return z.id===$.id})&&(this.conversations.push($),this.newConversationMessageListeners[$.id]=this.newConversationMessageListeners[$.id]||[],this.threadUpdateListeners[$.id]=this.threadUpdateListeners[$.id]||[]),null===(K=this.logger)||void 0===K||K.log(S.default.INFO,p.default.JoinConversation,{ElapsedTimeInMilliseconds:q.milliSecondsElapsed,EndpointUrl:this.EndpointUrl,EndpointId:this.EndpointId}),!V.default.isNullOrUndefined(L)&&!0===L&&this.sendHeartBeat($.id),Promise.resolve($)},B.prototype.sendLiveState=function(F){var L=this;this.debug&&console.debug("IC3Core/sendLiveState");var $=N.default.createBaseMessageData(b.default.LiveState,A.default.Text,"");return this.sendMessageToIC3(F,$).then(function(){return L.liveStateFailureCount=0,Promise.resolve()}).catch(function(ae){var z;L.liveStateFailureCount++,L.liveStateFailureCount>=I.default.liveStateRetryCount&&(null===(z=L.logger)||void 0===z||z.log(S.default.ERROR,p.default.SendLiveStateFailure,{ExceptionDetails:ae,EndpointUrl:L.EndpointUrl,EndpointId:L.EndpointId}),L.stopHeartBeat(),L.liveStateFailureCount=0)})},B.prototype.sendHeartBeat=function(F){this.heartBeatTimer||(this.debug&&console.debug("IC3Core/sendHeartBeat"),this.sendLiveState(F),this.heartBeatTimer=window.setInterval(this.sendLiveState.bind(this,F),I.default.heartBeatDuration))},B.prototype.stopHeartBeat=function(){clearInterval(this.heartBeatTimer)},B.prototype.sendMessage=function(F,L){var K=N.default.createMessageData(L);return this.sendMessageToIC3(F.id,K)},B.prototype.getMessages=function(F){var L=this,K=D.default.getDefaultGetMessagesQueryParameters(),q=V.default.addQueryParametersToPath(O.default.getMessagesUrl(F.id,this.ic3Info.RegionGtms),K),$=D.default.getDefaultIC3Headers();return $[f.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,$[f.default.ContentTypeHeader]=I.default.ContentTypeJson,y.HttpClient.MakeRequest({enableExponentialBackoff:!0,headers:$,redirect404RetryCount:I.default.retryCount,retryCount:I.default.retryCount,shouldRedirectOn404:!1,shouldResetOnFailure:!1,shouldRetryOnFailure:N.default.shouldRetryOnFailure,timeBetweenRetry:I.default.timeBetweenOperationRetry,type:h.default.GET,url:q}).then(function(z){for(var ee=[],ie=0,ue=z.messages;ie<ue.length;ie++){var Z=ue[ie];N.default.isSystemMessage(Z)||ee.push(N.default.createIRawMessage(Z,L.ic3Info))}return L.getAllMessagesFromBackwardLinkUrl(z._metadata.backwardLink,K.startTime,ee)})},B.prototype.registerOnNewMessage=function(F,L){var K;return this.newConversationMessageListeners[F.id].push(L),null===(K=this.logger)||void 0===K||K.log(S.default.INFO,p.default.RegisterOnNewMessage,{EndpointUrl:this.EndpointUrl,EndpointId:this.EndpointId}),Promise.resolve()},B.prototype.registerOnThreadUpdate=function(F,L){var K;return this.threadUpdateListeners[F.id].push(L),null===(K=this.logger)||void 0===K||K.log(S.default.INFO,p.default.RegisterOnThreadUpdate,{EndpointUrl:this.EndpointUrl,EndpointId:this.EndpointId}),Promise.resolve()},B.prototype.disconnectFromConversation=function(F){return this.conversations.findIndex(function(L){return L.id===F.id}),delete this.internalConversationsData[F.id],this.ic3Info.visitor&&(this.stopHeartBeat(),this.stopPolling()),Promise.resolve()},B.prototype.sendFileData=function(F,L,K){var q=this;if(V.default.isNullOrUndefined(K)&&(K=v.default.AmsBasedFileSharing),L.size<=0)throw new Error("File size is lesser or equal to zero.");var $={fileSharingProtocolType:K,id:"",name:L.name,size:L.size,type:L.type,url:""};return new Promise(function(ae,z){u.default.createNewDocument(F.id,L,q.ic3Info).then(function(ee){$.id=ee.id;var ie=N.default.isDocumentTypeImage(L.type);$.url=O.default.getAmsObjectContentUrl(ee.id,q.ic3Info.RegionGtms,ie),u.default.uploadDocument(ee.id,L,q.ic3Info).then(function(){ae($)}).catch(function(ue){z(ue)})}).catch(function(ee){z(ee)})})},B.prototype.sendFileMessage=function(F,L,K){return this.sendMessageToIC3(F.id,N.default.createFileMessage(L,this.ic3Info,K))},B.prototype.downloadFileData=function(F,L){var K=this;return this.debug&&console.debug("IC3Core/IC3ClientAdapter/downloadFileData"),new Promise(function(q,$){var ae=L.fileSharingProtocolType;V.default.isNullOrUndefined(ae)&&(ae=v.default.AmsBasedFileSharing),ae===v.default.AmsBasedFileSharing?u.default.downloadDocument(L,K.ic3Info).then(function(z){q(z)}).catch(function(z){$(z)}):$("This Protocol is not implemented")})},B.prototype.getFileStatus=function(F,L){var K=this;return new Promise(function(q,$){var ae=L.fileSharingProtocolType;V.default.isNullOrUndefined(ae)&&(ae=v.default.AmsBasedFileSharing),ae===v.default.AmsBasedFileSharing?u.default.getFileStatus(L,K.ic3Info).then(function(z){q(z)}).catch(function(z){$(_.default.Error+" e")}):$("This Protocol is not implemented")})},B.prototype.indicateTypingStatus=function(F,L,K){var q=N.default.createTypingStatusThreadMessageData(L,K);return this.sendMessageToIC3(F.id,q)},B.prototype.sendMessageToBot=function(F,L,K){var q=N.default.createBotMessageData(F.id,K),$=O.default.getBotMessagesUrl(L,this.ic3Info.RegionGtms),ae=D.default.getDefaultIC3Headers();return ae[f.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,ae[f.default.ContentTypeHeader]=I.default.ContentTypeTextPlain,y.HttpClient.MakeRequest({data:q,dataType:C.default.TEXT,enableExponentialBackoff:!0,headers:ae,redirect404RetryCount:I.default.retryCount,retryCount:I.default.retryCount,shouldRedirectOn404:!1,shouldResetOnFailure:!1,shouldRetryOnFailure:N.default.shouldRetryOnFailure,timeBetweenRetry:I.default.timeBetweenOperationRetry,type:h.default.POST,url:$})},B.prototype.getMembers=function(F){var L=this.internalConversationsData[F.id].members,K=[];return V.default.isNullOrUndefinedOrEmptyArray(L)||L.forEach(function(q){var $={displayName:q.friendlyName,id:q.id,type:N.default.getPersonType(q.id)};K.push($)}),Promise.resolve(K)},B.prototype.sendMessageToIC3=function(F,L){var K=O.default.getMessagesUrl(F,this.ic3Info.RegionGtms),q=D.default.getDefaultIC3Headers();q[f.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,q[f.default.ContentTypeHeader]=I.default.ContentTypeJson;var $={data:JSON.stringify(L),enableExponentialBackoff:!0,headers:q,redirect404RetryCount:I.default.retryCount,retryCount:I.default.retryCount,shouldRedirectOn404:!1,shouldResetOnFailure:!1,shouldRetryOnFailure:N.default.shouldRetryOnFailure,timeBetweenRetry:I.default.timeBetweenOperationRetry,type:h.default.POST,url:K};return y.HttpClient.MakeRequest($)},B.prototype.onNewMessage=function(F,L,K){var $,q=this,ae=V.default.timer();try{F&&(V.default.isNullOrUndefined(this.newConversationMessageListeners[F.id])||N.default.isSystemMessage(L)||this.newConversationMessageListeners[F.id].forEach(function(ee){ee(N.default.createIRawMessage(L,q.ic3Info,K))}))}catch(ee){return void(null===($=this.logger)||void 0===$||$.log(S.default.ERROR,p.default.OnNewMessageFailure,{ExceptionDetails:ee,ElapsedTimeInMilliseconds:ae.milliSecondsElapsed,EndpointUrl:this.EndpointUrl,EndpointId:this.EndpointId}))}},B.prototype.onThreadUpdate=function(F,L){var K,q=V.default.timer();try{F&&(V.default.isNullOrUndefined(this.threadUpdateListeners[F.id])||this.threadUpdateListeners[F.id].forEach(function(ae){ae(N.default.createIRawThread(L))}))}catch(ae){return void(null===(K=this.logger)||void 0===K||K.log(S.default.ERROR,p.default.OnThreadUpdateFailure,{ExceptionDetails:ae,ElapsedTimeInMilliseconds:q.milliSecondsElapsed,EndpointUrl:this.EndpointUrl,EndpointId:this.EndpointId}))}},B.prototype.getAllMessagesFromBackwardLinkUrl=function(F,L,K){var q=this;return V.default.isNullOrEmptyString(F)?Promise.resolve(K):this.getMessagesFromBackwardLinkUrl(F,L).then(function($){for(var ae=0,z=$.messages;ae<z.length;ae++){var ee=z[ae];N.default.isSystemMessage(ee)||K.push(N.default.createIRawMessage(ee,q.ic3Info))}return q.getAllMessagesFromBackwardLinkUrl($._metadata.backwardLink,L,K)})},B.prototype.getMessagesFromBackwardLinkUrl=function(F,L){var q=V.default.addQueryParametersToPath(F,{startTime:L}),$=D.default.getDefaultIC3Headers();return $[f.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,$[f.default.ContentTypeHeader]=I.default.ContentTypeJson,y.HttpClient.MakeRequest({enableExponentialBackoff:!0,headers:$,redirect404RetryCount:I.default.retryCount,retryCount:I.default.retryCount,shouldRedirectOn404:!1,shouldResetOnFailure:!1,shouldRetryOnFailure:N.default.shouldRetryOnFailure,timeBetweenRetry:I.default.timeBetweenOperationRetry,type:h.default.GET,url:q})},B.prototype.setupSession=function(F){this.ic3Info={SkypeToken:F.token,RegionGtms:F.regionGtms,visitor:F.visitor},V.default.isNullOrUndefined(this.ic3Info)||(this.EndpointId=this.ic3Info.endpointId,this.EndpointUrl=this.ic3Info.RegionGtms?this.ic3Info.RegionGtms.chatService:"")},B.prototype.setDebug=function(F){void 0===F&&(F=!1),this.debug=F},B}();g.default=W},9515:function(G,g,c){"use strict";var W,u=this&&this.__extends||(W=function(B,F){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,K){L.__proto__=K}||function(L,K){for(var q in K)K.hasOwnProperty(q)&&(L[q]=K[q])})(B,F)},function(B,F){function L(){this.constructor=B}W(B,F),B.prototype=null===F?Object.create(F):(L.prototype=F.prototype,new L)}),I=this&&this.__awaiter||function(W,B,F,L){return new(F||(F=Promise))(function(q,$){function ae(ie){try{ee(L.next(ie))}catch(ue){$(ue)}}function z(ie){try{ee(L.throw(ie))}catch(ue){$(ue)}}function ee(ie){ie.done?q(ie.value):function(q){return q instanceof F?q:new F(function($){$(q)})}(ie.value).then(ae,z)}ee((L=L.apply(W,B||[])).next())})},v=this&&this.__generator||function(W,B){var L,K,q,$,F={label:0,sent:function(){if(1&q[0])throw q[1];return q[1]},trys:[],ops:[]};return $={next:ae(0),throw:ae(1),return:ae(2)},"function"==typeof Symbol&&($[Symbol.iterator]=function(){return this}),$;function ae(ee){return function(ie){return function(ee){if(L)throw new TypeError("Generator is already executing.");for(;F;)try{if(L=1,K&&(q=2&ee[0]?K.return:ee[0]?K.throw||((q=K.return)&&q.call(K),0):K.next)&&!(q=q.call(K,ee[1])).done)return q;switch(K=0,q&&(ee=[2&ee[0],q.value]),ee[0]){case 0:case 1:q=ee;break;case 4:return F.label++,{value:ee[1],done:!1};case 5:F.label++,K=ee[1],ee=[0];continue;case 7:ee=F.ops.pop(),F.trys.pop();continue;default:if(!(q=(q=F.trys).length>0&&q[q.length-1])&&(6===ee[0]||2===ee[0])){F=0;continue}if(3===ee[0]&&(!q||ee[1]>q[0]&&ee[1]<q[3])){F.label=ee[1];break}if(6===ee[0]&&F.label<q[1]){F.label=q[1],q=ee;break}if(q&&F.label<q[2]){F.label=q[2],F.ops.push(ee);break}q[2]&&F.ops.pop(),F.trys.pop();continue}ee=B.call(W,F)}catch(ie){ee=[6,ie],K=0}finally{L=q=0}if(5&ee[0])throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}([ee,ie])}}};Object.defineProperty(g,"__esModule",{value:!0});var _=c(501),T=c(6849),y=c(5874),C=c(1218),f=c(7037),h=c(3671),p=c(2915),S=c(752),A=c(5655),b=c(6648),m=c(5785),D=c(1927),O=c(8636),N=c(909),V=function(W){function B(F,L){var K=W.call(this,F)||this;return K.debug&&console.debug("IC3Core/Constructor"),K.protocolType=A.default.IC3V1SDK,K.hostType=L,K.ic3Initializer=new f.default,K}return u(B,W),B.prototype.startPolling=function(){W.prototype.startPolling.call(this)},B.prototype.stopPolling=function(){W.prototype.stopPolling.call(this)},B.prototype.setup=function(F){return W.prototype.setup.call(this,F)},B.prototype.initialize=function(F){var L=this;return W.prototype.initialize.call(this,F).then(function(){var q;return null===(q=L.ic3Initializer)||void 0===q?void 0:q.setup(L.logger).then(function(){return L.setSkypeTokenCookie()}).then(function(){var $;return null===($=L.ic3Initializer)||void 0===$?void 0:$.setIc3Info(L.ic3Info)}).then(function(){var $;return null===($=L.ic3Initializer)||void 0===$?void 0:$.initializeIC3(L.handlePollData.bind(L))}).then(function($){L.ic3Info=$})})},B.prototype.update=function(F){var L=this;return W.prototype.update.call(this,F).then(function(){return L.updateToken({RegionGtms:F.regionGtms,SkypeToken:F.token,visitor:F.visitor})})},B.prototype.dispose=function(){var F;return I(this,void 0,void 0,function(){return v(this,function(L){return null===(F=this.ic3Initializer)||void 0===F||F.stopPolling(),this.heartBeatTimer&&clearInterval(this.heartBeatTimer),Promise.resolve(),[2]})})},B.prototype.joinConversation=function(F,L){var K=this,q=N.default.timer();return W.prototype.joinConversation.call(this,F,L).then(function($){return K.getThreadRequest($.id).then(function(ae){return K.internalConversationsData[$.id]={id:F,members:ae.members},$}).catch(function(ae){return K.logger&&K.logger.log(S.default.WARN,h.default.JoinConversationV1GetThreadRequestFailed,{Description:"Unable to retrieve thread: "+ae,ElapsedTimeInMilliseconds:q.milliSecondsElapsed,EndpointUrl:K.EndpointUrl,EndpointId:K.ic3Info.endpointId}),K.internalConversationsData[$.id]={id:F,members:[]},$})})},B.prototype.sendMessage=function(F,L){return W.prototype.sendMessage.call(this,F,L)},B.prototype.sendFileMessage=function(F,L,K){return W.prototype.sendFileMessage.call(this,F,L,K)},B.prototype.getMessages=function(F){return W.prototype.getMessages.call(this,F)},B.prototype.registerOnNewMessage=function(F,L){return W.prototype.registerOnNewMessage.call(this,F,L)},B.prototype.registerOnThreadUpdate=function(F,L){return W.prototype.registerOnThreadUpdate.call(this,F,L)},B.prototype.disconnectFromConversation=function(F){return W.prototype.disconnectFromConversation.call(this,F)},B.prototype.setSkypeTokenCookie=function(){var F=this.ic3Info.RegionGtms.ams.concat(_.default.skypeTokenAuthURL),L=b.default.getDefaultBaseIC3Headers();return L[T.default.ContentTypeHeader]=_.default.ContentTypeForm,p.HttpClient.MakeRequest({data:_.default.skypeTokenConstantForData+this.ic3Info.SkypeToken,enableExponentialBackoff:!0,useXHRWithCredentials:!0,headers:L,redirect404RetryCount:_.default.retryCount,retryCount:_.default.retryCount,shouldRedirectOn404:!1,shouldResetOnFailure:!1,shouldRetryOnFailure:O.default.shouldRetryOnFailure,timeBetweenRetry:_.default.timeBetweenOperationRetry,type:y.default.POST,url:F})},B.prototype.getThreadRequest=function(F){var L=D.default.getThreadUrl(F,this.ic3Info.RegionGtms),K=b.default.getDefaultBaseIC3Headers();return K[T.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,p.HttpClient.MakeRequest({enableExponentialBackoff:!0,headers:K,redirect404RetryCount:_.default.retryCount,retryCount:_.default.retryCount,shouldRedirectOn404:!0,shouldRetryOnFailure:O.default.shouldRetryOnFailure,timeBetweenRetry:_.default.timeBetweenOperationRetry,type:y.default.GET,url:L})},B.prototype.newMessageReceived=function(F,L,K){W.prototype.onNewMessage.call(this,F,L,K)},B.prototype.newThreadUpdate=function(F,L){W.prototype.onThreadUpdate.call(this,F,L)},B.prototype.handleNewMessageEvent=function(F){var L;L=F.resource&&F.resource.conversationid?F.resource.conversationid:O.default.getConversationIdFromUrl(F.resource.conversationLink?F.resource.conversationLink:F.resourceLink);var K=this.conversations.findIndex(function($){return $.id===L});this.newMessageReceived(this.conversations[K],F.resource,F.resourceType)},B.prototype.handleConversationUpdateEvent=function(F){},B.prototype.handleThreadUpdate=function(F){if(F.resourceType===m.default.ThreadUpdate){var L;L=F.resource&&F.resource.id?F.resource.id:O.default.getConversationIdFromUrl(F.resource.messages?F.resource.messages:F.resourceLink);var K=this.conversations.findIndex(function($){return $.id===L});this.newThreadUpdate(this.conversations[K],F.resource)}},B.prototype.handlePollData=function(F){if(F&&F.eventMessages)for(var L=0,K=F.eventMessages;L<K.length;L++)this.handlePollEventMessage(K[L])},B.prototype.handlePollEventMessage=function(F){F.resourceType===m.default.NewMessage||F.resourceType===m.default.MessageUpdate?this.handleNewMessageEvent(F):F.resourceType===m.default.ThreadUpdate?this.handleThreadUpdate(F):F.resourceType===m.default.ConversationUpdate&&this.handleConversationUpdateEvent(F)},B.prototype.updateToken=function(F){return I(this,void 0,void 0,function(){var L,K,q,$,ae,z,ee,ie,ue,Z,x=this;return v(this,function(j){switch(j.label){case 0:return this.logger&&this.logger.log(S.default.INFO,h.default.UpdateToken,{EndpointUrl:this.EndpointUrl,EndpointId:this.ic3Info.endpointId}),L=[],K=function(R){R&&R.eventMessages&&N.default.concatArrays(L,R.eventMessages)},q=[],$=function(R){R&&R.eventMessages&&N.default.concatArrays(q,R.eventMessages)},ae=this.ic3Initializer,z=new f.default,ee=this.updateTokenClearTimeoutHandle,ie=this.ic3Info,ae.getPoller().onNewData=K,this.logger?[4,z.setup(this.logger)]:[3,2];case 1:j.sent(),j.label=2;case 2:return[2,z.setIc3Info(F).then(function(){return z.initializeIC3($)}).then(function(R){ue=R}).then(function(){return x.getMatchingIC3EventIndex(L,q)}).then(function(R){Z=R}).then(function(){return ae.reset(!0)}).then(function(){return x.syncPollingData(L,q,Z)}).then(function(){x.ic3Info=ue,x.ic3Initializer=z,x.ic3Initializer.getPoller().onNewData=x.handlePollData.bind(x)}).catch(function(R){throw x.updateTokenClearTimeoutHandle!==ee&&(clearTimeout(x.updateTokenClearTimeoutHandle),x.updateTokenClearTimeoutHandle=ee),x.ic3Info=ie,x.ic3Initializer.getPoller().onNewData=x.handlePollData.bind(x),x.ic3Initializer.getPoller().start(),new Error("Update token failed: "+(R&&R.message))})]}})})},B.prototype.getMatchingIC3EventIndex=function(F,L,K){var q=this;return new Promise(function($,ae){if((K=K||0)===_.default.stabilizePollMaxRetryCount)$({newPollIndex:-1,previousPollIndex:-1});else{for(var z=0,ee=0;z<F.length&&ee<L.length;){var ie=F[z];if(ie.time===L[ee].time)return void $({newPollIndex:ee,previousPollIndex:z});new Date(ie.time)<new Date(ie.time)?z++:ee++}setTimeout(function(){q.getMatchingIC3EventIndex(F,L,K+1).then(function(Z){$(Z)}).catch(function(Z){ae(Z)})},_.default.timeBetweenStabilizingPoll)}})},B.prototype.syncPollingData=function(F,L,K){this.logger&&this.logger.log(S.default.INFO,h.default.SyncingPollData,{EndpointUrl:this.EndpointUrl,EndpointId:this.ic3Info.endpointId});var q=K.previousPollIndex,$=K.newPollIndex+1;-1===K.previousPollIndex&&-1===K.newPollIndex&&(q=F.length-1,$=0);for(var ae=0;ae<=q;ae++)this.handlePollEventMessage(F[ae]);for(ae=$;ae<L.length;ae++)this.handlePollEventMessage(L[ae])},B}(C.default);g.default=V},7037:function(G,g,c){"use strict";var u=this&&this.__awaiter||function(V,W,B,F){return new(B||(B=Promise))(function(K,q){function $(ee){try{z(F.next(ee))}catch(ie){q(ie)}}function ae(ee){try{z(F.throw(ee))}catch(ie){q(ie)}}function z(ee){ee.done?K(ee.value):function(K){return K instanceof B?K:new B(function(q){q(K)})}(ee.value).then($,ae)}z((F=F.apply(V,W||[])).next())})},I=this&&this.__generator||function(V,W){var F,L,K,q,B={label:0,sent:function(){if(1&K[0])throw K[1];return K[1]},trys:[],ops:[]};return q={next:$(0),throw:$(1),return:$(2)},"function"==typeof Symbol&&(q[Symbol.iterator]=function(){return this}),q;function $(z){return function(ee){return function(z){if(F)throw new TypeError("Generator is already executing.");for(;B;)try{if(F=1,L&&(K=2&z[0]?L.return:z[0]?L.throw||((K=L.return)&&K.call(L),0):L.next)&&!(K=K.call(L,z[1])).done)return K;switch(L=0,K&&(z=[2&z[0],K.value]),z[0]){case 0:case 1:K=z;break;case 4:return B.label++,{value:z[1],done:!1};case 5:B.label++,L=z[1],z=[0];continue;case 7:z=B.ops.pop(),B.trys.pop();continue;default:if(!(K=(K=B.trys).length>0&&K[K.length-1])&&(6===z[0]||2===z[0])){B=0;continue}if(3===z[0]&&(!K||z[1]>K[0]&&z[1]<K[3])){B.label=z[1];break}if(6===z[0]&&B.label<K[1]){B.label=K[1],K=z;break}if(K&&B.label<K[2]){B.label=K[2],B.ops.push(z);break}K[2]&&B.ops.pop(),B.trys.pop();continue}z=W.call(V,B)}catch(ee){z=[6,ee],L=0}finally{F=K=0}if(5&z[0])throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}([z,ee])}}};Object.defineProperty(g,"__esModule",{value:!0});var v=c(501),_=c(6849),T=c(5850),y=c(8311),C=c(6648),f=c(1927),h=c(909),p=c(3805),S=c(752),A=c(3671),b=c(9306),m=c(8636),D=c(2915),O=c(5874),N=function(){function V(){this.debug=!1,this.current404RetryCount=0,this.currentOtherRetryCount=0,this.skipUnsubscribe=!1,this.telemetryMessage="",this.errorCode="",this.pollDataHandler=function(W){},this.resetRetryCount()}return V.prototype.setup=function(W){return u(this,void 0,void 0,function(){return I(this,function(B){return this.logger=W,[2]})})},V.prototype.getPoller=function(){var W=this.pollDataHandler.bind(this);return this.poller||(this.poller=new p.default(this.ic3Info,W,this.redirectErrorHandler.bind(this),this.onRequestCreationFailure.bind(this))),this.poller},V.prototype.setIc3Info=function(W){return u(this,void 0,void 0,function(){var B;return I(this,function(F){return B={RegionGtms:JSON.parse(JSON.stringify(W.RegionGtms)),SkypeToken:W.SkypeToken,visitor:W.visitor},this.ic3Info=B,[2]})})},V.prototype.initializeIC3=function(W){var F,B=this;return W&&(this.pollDataHandler=W),null===(F=this.logger)||void 0===F||F.log(S.default.INFO,A.default.IC3InitializationBegins,{Description:"Endpoint to poll is "+JSON.stringify(this.ic3Info.RegionGtms.chatService),EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.createEndpoint().then(function(){return B.createSubscription()}).then(function(){return B.setEndpointProperty()}).then(function(){return B.startPolling(W)}).then(function(){return B.resetRetryCount()}).then(function(){return Promise.resolve(B.ic3Info)}).catch(function(K){return B.redirectErrorHandler(K)})},V.prototype.startPolling=function(W){var B,F=!W&&this.pollDataHandler?this.pollDataHandler.bind(this):this.pollDataHandler;this.poller||(this.poller=new p.default(this.ic3Info,F,this.redirectErrorHandler.bind(this),this.onRequestCreationFailure.bind(this))),this.poller.ic3Info=this.ic3Info,null===(B=this.logger)||void 0===B||B.log(S.default.INFO,A.default.IC3StartedPolling,{EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.poller.start()},V.prototype.stopPolling=function(W){var B;null===(B=this.logger)||void 0===B||B.log(S.default.INFO,A.default.IC3StoppedPolling,{Description:(W?v.default.oldInitializer:v.default.newInitializer)+" stopped polling.",EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.poller&&this.poller.stop()},V.prototype.reset=function(W){return this.stopPolling(W),this.unsubscribeFromEndpoint()},V.prototype.resetRetryCount=function(){this.current404RetryCount=0,this.currentOtherRetryCount=0},V.prototype.onEndpointCreationFailure=function(W){this.onRequestCreationFailure(W,v.default.endpointRequestLog)},V.prototype.onEndpointCreationSuccess=function(W){var B,F,L=h.default.getResponseHeader(W,_.default.SetRegistrationTokenHeader);h.default.isNullOrUndefined(L)||(this.ic3Info.RegistrationToken=h.default.getRegistrationTokenValue(L));var K=h.default.getResponseHeader(W,_.default.LocationHeader);if(!h.default.isNullOrUndefined(K)){var q=K.match(/endpoints\/(%7B[\da-z\-]+%7D)/);this.ic3Info.endpointId=q&&q[1],null===(B=this.logger)||void 0===B||B.log(S.default.INFO,A.default.IC3EndpointCreationSuccess,{Description:"IC3 endpoint Id is "+this.ic3Info.endpointId,EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),W.status===b.default.Created&&m.default.parseChatServiceHostUrl(K)!==this.ic3Info.RegionGtms.chatService&&(this.ic3Info.RegionGtms.chatService=m.default.parseChatServiceHostUrl(K),null===(F=this.logger)||void 0===F||F.log(S.default.WARN,A.default.OnRequestCreationSuccessRedirect,{Description:"Endpoint changed",EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}))}},V.prototype.createEndpointRequest=function(){var W=f.default.getV1EndpointUrl(this.ic3Info.RegionGtms),B=C.default.getDefaultIC3Headers();B[_.default.AuthenticationHeader]=_.default.SkypeTokenHeaderValue+this.ic3Info.SkypeToken,B[_.default.ContentTypeHeader]=v.default.ContentTypeJson;var L={endpointFeatures:[y.default.Agent,y.default.InviteFree,y.default.MessageProperties].join(",")},K={callbackOnFailure:this.onEndpointCreationFailure.bind(this),callbackOnSuccess:this.onEndpointCreationSuccess.bind(this),data:JSON.stringify(L),enableExponentialBackoff:!0,headers:B,redirect404RetryCount:v.default.retryCount,retryCount:v.default.retryCount,shouldRedirectOn404:!0,shouldResetOnFailure:!0,shouldRetryOnFailure:m.default.shouldRetryOnFailure,timeBetweenRetry:v.default.timeBetweenOperationRetry,type:O.default.POST,url:W};return D.HttpClient.MakeRequest(K)},V.prototype.createEndpoint=function(){var W=this;return this.createEndpointRequest().then(function(B){return B.subscriptions&&B.subscriptions.length>0&&(W.ic3Info.subscriptionId=B.subscriptions[0].id),B})},V.prototype.onSubscriptionCreationFailure=function(W){this.onRequestCreationFailure(W,v.default.subscriptionRequestLog)},V.prototype.onSubscriptionCreationSuccess=function(W){var B,F=h.default.getResponseHeader(W,_.default.LocationHeader)||"";W.status===b.default.Created&&!h.default.isNullOrUndefined(F)&&m.default.parseChatServiceHostUrl(F)!==this.ic3Info.RegionGtms.chatService&&(this.ic3Info.RegionGtms.chatService=m.default.parseChatServiceHostUrl(F),null===(B=this.logger)||void 0===B||B.log(S.default.WARN,A.default.OnRequestCreationSuccessRedirect,{Description:"Endpoint changed",EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}));var L=F.match(/\/(\d+)$/);L&&(this.ic3Info.subscriptionId=L[1])},V.prototype.createSubscriptionRequest=function(){var W=f.default.getV1SubscriptionUrl(this.ic3Info.RegionGtms),B=C.default.getDefaultIC3Headers();B[_.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,B[_.default.ContentTypeHeader]=v.default.ContentTypeJson;var F={channelType:v.default.HttpLongPoll,interestedResources:[T.default.ConversationMessages,T.default.ConversationProperties,T.default.Threads,T.default.Contacts]},L={callbackOnFailure:this.onSubscriptionCreationFailure.bind(this),callbackOnSuccess:this.onSubscriptionCreationSuccess.bind(this),data:JSON.stringify(F),enableExponentialBackoff:!0,headers:B,redirect404RetryCount:v.default.retryCount,retryCount:v.default.retryCount,shouldRedirectOn404:!0,shouldResetOnFailure:!0,shouldRetryOnFailure:m.default.shouldRetryOnFailure,timeBetweenRetry:v.default.timeBetweenOperationRetry,type:O.default.POST,url:W};return D.HttpClient.MakeRequest(L)},V.prototype.createSubscription=function(){return this.createSubscriptionRequest()},V.prototype.onSetEndpointPropertyCreationFailure=function(W){this.onRequestCreationFailure(W,v.default.setPropertiesRequestLog)},V.prototype.setEndpointProperty=function(){if(this.ic3Info.visitor)return Promise.resolve();var W=f.default.getV1SetPropertiesUrl(this.ic3Info.RegionGtms),B={};B[_.default.SetEndpointProperty]=!0;var L=C.default.getDefaultIC3Headers();L[_.default.AuthenticationHeader]=_.default.SkypeTokenHeaderValue+this.ic3Info.SkypeToken,L[_.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,L[_.default.ContentTypeHeader]=v.default.ContentTypeJson;var K={callbackOnFailure:this.onSetEndpointPropertyCreationFailure.bind(this),data:JSON.stringify(B),enableExponentialBackoff:!0,headers:L,redirect404RetryCount:v.default.retryCount,retryCount:v.default.retryCount,shouldRedirectOn404:!0,shouldResetOnFailure:!0,shouldRetryOnFailure:m.default.shouldRetryOnFailure,timeBetweenRetry:v.default.timeBetweenOperationRetry,type:O.default.PUT,url:W};return D.HttpClient.MakeRequest(K)},V.prototype.onUnsubscribeCreationFailure=function(W){this.onRequestCreationFailure(W,v.default.unsubscribeRequestLog)},V.prototype.unsubscribeFromEndpoint=function(){if(this.ic3Info.visitor||h.default.isNullOrUndefined(this.ic3Info.endpointId)||this.skipUnsubscribe)return this.skipUnsubscribe=!0,Promise.resolve();var W=f.default.getV1DeleteEndpointUrl(this.ic3Info.RegionGtms,this.ic3Info.endpointId),B=C.default.getDefaultIC3Headers();B[_.default.AuthenticationHeader]=_.default.SkypeTokenHeaderValue+this.ic3Info.SkypeToken,B[_.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,B[_.default.ContentTypeHeader]=v.default.ContentTypeJson;var F={callbackOnFailure:this.onUnsubscribeCreationFailure.bind(this),enableExponentialBackoff:!0,headers:B,redirect404RetryCount:v.default.retryCount,retryCount:v.default.retryCount,shouldRedirectOn404:!0,shouldResetOnFailure:!0,shouldRetryOnFailure:m.default.shouldRetryOnFailure,timeBetweenRetry:v.default.timeBetweenOperationRetry,type:O.default.DELETE,url:W};return D.HttpClient.MakeRequest(F)},V.prototype.onRequestCreationFailure=function(W,B){var F,L,K=h.default.getResponseHeader(W,_.default.LocationHeader);this.telemetryMessage=B+" failed. Error Code: "+W.status+".",this.errorCode=W.status.toString(),this.skipUnsubscribe=!0,W.status!==b.default.Redirect||h.default.isNullOrEmptyString(K)?(null===(L=this.logger)||void 0===L||L.log(S.default.WARN,A.default.ResetOnRequestCreationFailure,{Description:this.telemetryMessage+" Trying to reset.",ErrorCode:W.status.toString(),EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.current404RetryCount=0,this.currentOtherRetryCount++):(null===(F=this.logger)||void 0===F||F.log(S.default.WARN,A.default.RedirectOnRequestCreationFailure,{Description:this.telemetryMessage+" Trying to redirect.",ErrorCode:W.status.toString(),EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.onRequestCreationFailureRedirect(W))},V.prototype.redirectErrorHandler=function(W){var F,B=this;return W.message===v.default.Reset_Flag&&this.current404RetryCount<=v.default.retry404Count&&this.currentOtherRetryCount<=v.default.retryCount?this.reset().then(function(){return B.initializeIC3()}):(null===(F=this.logger)||void 0===F||F.log(S.default.ERROR,A.default.MaxRetryCountReachedForRedirect,{Description:"Fatal Error. Initialization failed. Maximum retry count reached. Exiting. "+this.telemetryMessage,ErrorCode:this.errorCode,ExceptionDetails:W,EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.reset().then(function(){return Promise.reject(W.message)}))},V.prototype.onRequestCreationFailureRedirect=function(W){var B;this.current404RetryCount++,this.currentOtherRetryCount=0,this.ic3Info.RegionGtms.chatService=m.default.parseChatServiceHostUrl(h.default.getResponseHeader(W,_.default.LocationHeader)),null===(B=this.logger)||void 0===B||B.log(S.default.WARN,A.default.OnRequestCreationFailureRedirect,{Description:"Endpoint changed.",EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId})},V}();g.default=N},9202:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var u=c(2518),I=c(1356),v=function(){function _(){}return _.getSDK=function(T){return new Promise(function(y){var f=u.default.getClientBridge({hostType:T.hostType,protocolType:T.protocolType}),h={logger:new I.default(f,T.logger)};return f.setup(h).then(function(){var p={dispose:f.dispose.bind(f),id:f.id,initialize:f.initialize.bind(f),joinConversation:f.joinConversation.bind(f),update:f.update.bind(f),setDebug:f.setDebug.bind(f)};return y(p)})})},_}();g.default=v},2915:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.HttpClient=void 0;var u=c(909),I=c(501),v=c(3671),_=c(752),T=c(6849),y=c(9306),C=c(8686),f=function(){function h(){}return h.MakeRequest=function(p){return new Promise(function(A,b){var O=0,N=p.retryCount||1,V={url:p.url,method:p.type,data:p.data,timeout:p.timeout,headers:p.headers,withCredentials:p.useXHRWithCredentials||!1},W=function(){C.default.request(V).then(function(B){!function(B,F){if(F.status>=400){var L={ResponseText:F.statusText,Status:status};h.logWarning("Requesting "+p.url,F.status,L)}p.callbackOnSuccess&&p.callbackOnSuccess(F),A(B)}(B.data,B)}).catch(function(B){!function(B){var F,L,K,q,$,ae,z,ee,ie,ue,Z={ErrorThrown:B.message,ResponseText:null===(F=B.response)||void 0===F?void 0:F.statusText,Status:null===(L=B.response)||void 0===L?void 0:L.status},k=function(){var H,X;h.logError("Request to "+p.url+" failed.",(null===(H=B.response)||void 0===H?void 0:H.status)||0,Z),b(new Error((null===(X=B.response)||void 0===X?void 0:X.statusText)||""))},x=function(){var H;h.logError("Request to "+p.url+" failed. Resetting endpoint.",(null===(H=B.response)||void 0===H?void 0:H.status)||0,Z),p.callbackOnFailure&&p.callbackOnFailure(B),b(new Error(I.default.Reset_Flag))},j=function(){var H;O++;var X=p.timeBetweenRetry||0;(p.enableExponentialBackoff||(null===(H=B.response)||void 0===H?void 0:H.status)===y.default.TooManyRequests)&&(X*=Math.exp(O)),setTimeout(function(){W()},X)},R=null===(K=B.response)||void 0===K?void 0:K.headers[T.default.LocationHeader],w=null===(q=B.response)||void 0===q?void 0:q.headers[T.default.SetRegistrationTokenHeader];(null===($=B.response)||void 0===$?void 0:$.status)!==y.default.Redirect||u.default.isNullOrEmptyString(R)?(null===(ae=B.response)||void 0===ae?void 0:ae.status)!==y.default.Unauthorized&&(null===(z=B.response)||void 0===z?void 0:z.status)!==y.default.Forbidden||u.default.isNullOrEmptyString(w)?O<=N&&p.shouldRetryOnFailure&&p.shouldRetryOnFailure((null===(ie=B.response)||void 0===ie?void 0:ie.status)||0)||(null===(ue=B.response)||void 0===ue?void 0:ue.status)===y.default.TooManyRequests?j():p.shouldResetOnFailure?x():k():O<=N&&p.shouldRetryOnFailure&&p.shouldRetryOnFailure((null===(ee=B.response)||void 0===ee?void 0:ee.status)||0)?(p.headers&&(p.headers[T.default.RegistrationTokenHeader]=u.default.getRegistrationTokenValue(w)),j()):p.shouldResetOnFailure?x():k():p.shouldRedirectOn404?x():O<=N?(p.url=R,j()):k()}(B)})};W()})},h.isClientError=function(p){if(!p)return!1;var S=p.message,A=!1;return u.default.isNullOrEmptyString(S)||(A=S.search(/Status- 40\d/)>=-1),A},h.setLogger=function(p){h.logger=p},h.logError=function(p,S,A){h.logger&&h.logger.log(_.default.ERROR,v.default.HTTPRequestFailed,{Description:p,ErrorCode:S.toString(),ExceptionDetails:A})},h.logWarning=function(p,S,A){h.logger&&h.logger.log(_.default.INFO,v.default.HTTPRequestUnusualResponse,{Description:p,ErrorCode:S.toString(),ExceptionDetails:A})},h}();g.HttpClient=f},9306:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=function(){function u(){}return u.OK=200,u.Created=201,u.Accepted=202,u.NoContent=204,u.Unauthorized=401,u.Forbidden=403,u.Redirect=404,u.TooManyRequests=429,u.InternalServerError=500,u.ServiceUnavailable=503,u.NotFound=729,u}();g.default=c},5256:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=function(){function u(){}return u.TEXT="text",u}();g.default=c},6849:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=function(){function u(){}return u.LocationHeader="location",u.SetRegistrationTokenHeader="set-registrationtoken",u.RegistrationTokenHeader="RegistrationToken",u.RegistrationTokenHeaderValue="registrationToken=",u.ContentTypeHeader="content-type",u.AuthenticationHeader="authentication",u.BehaviorOverrideHeader="behavioroverride",u.SkypeTokenHeaderValue="skypetoken=",u.SetEndpointProperty="supportsMessageProperties",u}();g.default=c},5874:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=(()=>{return(u=c||(c={})).GET="get",u.POST="post",u.PUT="put",u.DELETE="delete",c;var u})();g.default=c},6648:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var u=c(501),I=c(737),v=function(){function _(){}return _.getDefaultIC3Headers=function(){return{Accept:u.default.ContentTypeJson,BehaviorOverride:u.default.RedirectAs404,ClientInfo:u.default.ClientInfoValue,ContextId:"tcid="+I.uuidv4(),Expires:0,Pragma:u.default.NoCache,"x-ms-client-type":u.default.Web,"x-ms-user-type":u.default.User}},_.getDefaultBaseIC3Headers=function(){return{Accept:u.default.ContentTypeJson,BehaviorOverride:u.default.RedirectAs404,"content-type":u.default.ContentTypeJson}},_.getDefaultGetMessagesQueryParameters=function(){return{pageSize:20,startTime:0,view:"msnp24Equivalent|supportsMessageProperties"}},_.getDefaultAMSHeaders=function(T){return{Authorization:u.default.AMSAuthorizationSkypeTokenValue+T,"X-MS-Client-Version":u.default.ClientInfoValue}},_.getDefaultAMSViewHeaders=function(T){return{Accept:u.default.AMSAcceptHeaderValue,"Accept-Encoding":u.default.AMSAcceptEncodingHeaderValue,Authorization:u.default.AMSAuthorizationSkypeTokenValue+T,"X-MS-Client-Version":u.default.ClientInfoValue}},_}();g.default=v},6194:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.SDKProvider=void 0;var u=c(9202);g.SDKProvider=u.default},2217:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=function(){function u(){}return u.IFrame=0,u.Page=1,u}();g.default=c},5655:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=function(){function u(){}return u.IC3V1SDK=0,u.IC3V2SDK=1,u.MockIC3SDK=2,u}();g.default=c},3671:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=(()=>{return(u=c||(c={})).JoinConversation="JoinConversation",u.RegisterOnNewMessage="RegisterOnNewMessage",u.RegisterOnThreadUpdate="RegisterOnThreadUpdate",u.OnNewMessageFailure="OnNewMessageFailure",u.OnThreadUpdateFailure="OnThreadUpdateFailure",u.SendLiveStateFailure="SendLiveStateFailure",u.JoinConversationV1GetThreadRequestFailed="JoinConversationV1GetThreadRequestFailed",u.UpdateToken="UpdateToken",u.SyncingPollData="SyncingPollData",u.IC3InitializationBegins="IC3InitializationBegins",u.IC3StartedPolling="IC3StartedPolling",u.IC3StoppedPolling="IC3StoppedPolling",u.IC3EndpointCreationSuccess="IC3EndpointCreationSuccess",u.RedirectOnRequestCreationFailure="RedirectOnRequestCreationFailure",u.ResetOnRequestCreationFailure="ResetOnRequestCreationFailure",u.MaxRetryCountReachedForRedirect="MaxRetryCountReachedForRedirect",u.OnRequestCreationFailureRedirect="OnRequestCreationFailureRedirect",u.OnRequestCreationSuccessRedirect="OnRequestCreationSuccessRedirect",u.ErrorDuringPolling="ErrorDuringPolling",u.HTTPRequestFailed="HTTPRequestFailed",u.HTTPRequestUnusualResponse="HTTPRequestUnusualResponse",c;var u})();g.default=c},752:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=(()=>{return(u=c||(c={})).INFO="INFO",u.DEBUG="DEBUG",u.WARN="WARN",u.ERROR="ERROR",c;var u})();g.default=c},1356:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var u=c(909),I=c(8261),v=function(){function _(T,y){this.sdk=T,this.logger=y}return _.prototype.log=function(T,y,C){if(this.isLoggingEnabled()){var f=I.default.getTelemetryEventData(this.sdk,y,C);this.logEvent(T,f)}},_.prototype.logEvent=function(T,y){this.isLoggingEnabled()&&setTimeout(this.logger.logClientSdkTelemetryEvent.bind(this.logger),0,T,y)},_.prototype.isLoggingEnabled=function(){return!u.default.isNullOrUndefined(this.logger)},_}();g.default=v},8261:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=function(){function u(){}return u.getTelemetryEventData=function(I,v,_){return{Description:_.Description,ElapsedTimeInMilliseconds:_.ElapsedTimeInMilliseconds,EndpointUrl:_.EndpointUrl,EndpointId:_.EndpointId,ErrorCode:_.ErrorCode,Event:v,ExceptionDetails:_.ExceptionDetails,ShouldBubbleToHost:_.ShouldBubbleToHost,SubscriptionId:I.id}},u}();g.default=c},2900:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=function(){function u(){}return u.Bridged="bridged",u.Unbridged="unbridged",u}();g.default=c},4694:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=(()=>{return(u=c||(c={}))[u.AmsBasedFileSharing=0]="AmsBasedFileSharing",c;var u})();g.default=c},6355:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=(()=>{return(u=c||(c={}))[u.Unknown=0]="Unknown",u[u.InProgress=1]="InProgress",u[u.Success=2]="Success",u[u.Error=3]="Error",c;var u})();g.default=c},5850:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=function(){function u(){}return u.ConversationProperties="/v1/users/ME/conversations/ALL/properties",u.ConversationMessages="/v1/users/ME/conversations/ALL/messages",u.Threads="/v1/threads/ALL",u.Contacts="/v1/users/ME/contacts/ALL",u}();g.default=c},8311:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=function(){function u(){}return u.Agent="Agent",u.MessageProperties="MessageProperties",u.InviteFree="InviteFree",u}();g.default=c},448:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=function(){function u(){}return u.RichText="RichText",u.Text="Text",u}();g.default=c},3207:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=function(){function u(){}return u.Text="Text",u.RichText="RichText",u.RichTextHtml="RichText/Html",u.ControlTyping="Control/Typing",u.ControlClearTyping="Control/ClearTyping",u.LiveState="Control/LiveState",u}();g.default=c},3372:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=function(){function u(){}return u.UserMessage="UserMessage",u.SwiftCard="SwiftCard",u.Typing="Control/Typing",u.ClearTyping="Control/ClearTyping",u.LiveState="Control/LiveState",u}();g.default=c},4352:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=(()=>{return(u=c||(c={}))[u.Unknown=0]="Unknown",u[u.User=1]="User",u[u.Bot=2]="Bot",c;var u})();g.default=c},5785:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=function(){function u(){}return u.NewMessage="NewMessage",u.MessageUpdate="MessageUpdate",u.UserPresence="UserPresence",u.ConversationUpdate="ConversationUpdate",u.ThreadUpdate="ThreadUpdate",u}();g.default=c},7708:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var c=(()=>{return(u=c||(c={}))[u.Typing=0]="Typing",u[u.ClearTyping=1]="ClearTyping",c;var u})();g.default=c},3805:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var u=c(1927),I=c(2553),v=c(501),_=function(){function T(y,C,f,h){this.isPolling=!1,this._ic3Info=y,this._onNewData=C,this._onError=f,this.callbackOnFailure=h}return T.prototype.start=function(){return this.isPolling||(this.isPolling=!0,this.startPolling()),Promise.resolve()},T.prototype.stop=function(){return this.isPolling=!1,Promise.resolve()},Object.defineProperty(T.prototype,"onNewData",{get:function(){return this._onNewData},set:function(y){this._onNewData=y},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onError",{get:function(){return this._onError},set:function(y){this._onError=y},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"setCallbackOnFailure",{set:function(y){this.setCallbackOnFailure=y},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"ic3Info",{get:function(){return this._ic3Info},set:function(y){this._ic3Info=y},enumerable:!1,configurable:!0}),T.prototype.startPolling=function(){var y=this;this.isPolling&&this.poll().then(function(C){y.isPolling&&y._onNewData&&y._onNewData(C)}).catch(function(C){y._onError&&y._onError(C)}).then(function(){y.startPolling()})},T.prototype.poll=function(){var y=u.default.getV1PollUrl(this._ic3Info.RegionGtms,this._ic3Info.subscriptionId);return I.default.poll(y,this._ic3Info.RegistrationToken,this.callbackOnEachRequestCompleted.bind(this))},T.prototype.callbackOnEachRequestCompleted=function(y){this.callbackOnFailure(y,v.default.pollRequestLog)},T}();g.default=_},2553:(G,g,c)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});var u=c(501),I=c(2915),v=c(6849),_=c(5874),T=c(6648),y=c(8636),C=function(){function f(){}return f.poll=function(h,p,S){var A=T.default.getDefaultIC3Headers();A[v.default.RegistrationTokenHeader]=p,A[v.default.ContentTypeHeader]=u.default.ContentTypeJson;var b=JSON.stringify({});return I.HttpClient.MakeRequest({callbackOnFailure:S,data:b,enableExponentialBackoff:!0,headers:A,redirect404RetryCount:u.default.retryCount,retryCount:u.default.retryCount,shouldRedirectOn404:!0,shouldResetOnFailure:!0,shouldRetryOnFailure:y.default.shouldRetryOnFailure,timeBetweenRetry:u.default.timeBetweenOperationRetry,type:_.default.POST,url:h})},f}();g.default=C},737:(G,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.uuidv4=void 0,g.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var u=16*Math.random()|0;return("x"===c?u:3&u|8).toString(16)})}},8686:(G,g,c)=>{G.exports=c(5454)},4054:(G,g,c)=>{"use strict";var u=c(9471),I=c(5650),v=c(300),_=c(7790),T=c(4634),y=c(1929),C=c(2984),f=c(5886);G.exports=function(p){return new Promise(function(A,b){var m=p.data,D=p.headers;u.isFormData(m)&&delete D["Content-Type"];var O=new XMLHttpRequest;if(p.auth){var N=p.auth.username||"",V=p.auth.password?unescape(encodeURIComponent(p.auth.password)):"";D.Authorization="Basic "+btoa(N+":"+V)}var W=T(p.baseURL,p.url);if(O.open(p.method.toUpperCase(),_(W,p.params,p.paramsSerializer),!0),O.timeout=p.timeout,O.onreadystatechange=function(){if(O&&4===O.readyState&&(0!==O.status||O.responseURL&&0===O.responseURL.indexOf("file:"))){var L="getAllResponseHeaders"in O?y(O.getAllResponseHeaders()):null;I(A,b,{data:p.responseType&&"text"!==p.responseType?O.response:O.responseText,status:O.status,statusText:O.statusText,headers:L,config:p,request:O}),O=null}},O.onabort=function(){!O||(b(f("Request aborted",p,"ECONNABORTED",O)),O=null)},O.onerror=function(){b(f("Network Error",p,null,O)),O=null},O.ontimeout=function(){var L="timeout of "+p.timeout+"ms exceeded";p.timeoutErrorMessage&&(L=p.timeoutErrorMessage),b(f(L,p,"ECONNABORTED",O)),O=null},u.isStandardBrowserEnv()){var B=(p.withCredentials||C(W))&&p.xsrfCookieName?v.read(p.xsrfCookieName):void 0;B&&(D[p.xsrfHeaderName]=B)}if("setRequestHeader"in O&&u.forEach(D,function(L,K){void 0===m&&"content-type"===K.toLowerCase()?delete D[K]:O.setRequestHeader(K,L)}),u.isUndefined(p.withCredentials)||(O.withCredentials=!!p.withCredentials),p.responseType)try{O.responseType=p.responseType}catch(F){if("json"!==p.responseType)throw F}"function"==typeof p.onDownloadProgress&&O.addEventListener("progress",p.onDownloadProgress),"function"==typeof p.onUploadProgress&&O.upload&&O.upload.addEventListener("progress",p.onUploadProgress),p.cancelToken&&p.cancelToken.promise.then(function(L){!O||(O.abort(),b(L),O=null)}),m||(m=null),O.send(m)})}},5454:(G,g,c)=>{"use strict";var u=c(9471),I=c(1533),v=c(3227),_=c(4018);function y(f){var h=new v(f),p=I(v.prototype.request,h);return u.extend(p,v.prototype,h),u.extend(p,h),p}var C=y(c(2567));C.Axios=v,C.create=function(h){return y(_(C.defaults,h))},C.Cancel=c(8728),C.CancelToken=c(701),C.isCancel=c(2130),C.all=function(h){return Promise.all(h)},C.spread=c(8908),C.isAxiosError=c(9541),G.exports=C,G.exports.default=C},8728:G=>{"use strict";function g(c){this.message=c}g.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},g.prototype.__CANCEL__=!0,G.exports=g},701:(G,g,c)=>{"use strict";var u=c(8728);function I(v){if("function"!=typeof v)throw new TypeError("executor must be a function.");var _;this.promise=new Promise(function(C){_=C});var T=this;v(function(C){T.reason||(T.reason=new u(C),_(T.reason))})}I.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},I.source=function(){var _;return{token:new I(function(C){_=C}),cancel:_}},G.exports=I},2130:G=>{"use strict";G.exports=function(c){return!(!c||!c.__CANCEL__)}},3227:(G,g,c)=>{"use strict";var u=c(9471),I=c(7790),v=c(3976),_=c(6764),T=c(4018);function y(C){this.defaults=C,this.interceptors={request:new v,response:new v}}y.prototype.request=function(f){"string"==typeof f?(f=arguments[1]||{}).url=arguments[0]:f=f||{},(f=T(this.defaults,f)).method=f.method?f.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var h=[_,void 0],p=Promise.resolve(f);for(this.interceptors.request.forEach(function(A){h.unshift(A.fulfilled,A.rejected)}),this.interceptors.response.forEach(function(A){h.push(A.fulfilled,A.rejected)});h.length;)p=p.then(h.shift(),h.shift());return p},y.prototype.getUri=function(f){return f=T(this.defaults,f),I(f.url,f.params,f.paramsSerializer).replace(/^\?/,"")},u.forEach(["delete","get","head","options"],function(f){y.prototype[f]=function(h,p){return this.request(T(p||{},{method:f,url:h,data:(p||{}).data}))}}),u.forEach(["post","put","patch"],function(f){y.prototype[f]=function(h,p,S){return this.request(T(S||{},{method:f,url:h,data:p}))}}),G.exports=y},3976:(G,g,c)=>{"use strict";var u=c(9471);function I(){this.handlers=[]}I.prototype.use=function(_,T){return this.handlers.push({fulfilled:_,rejected:T}),this.handlers.length-1},I.prototype.eject=function(_){this.handlers[_]&&(this.handlers[_]=null)},I.prototype.forEach=function(_){u.forEach(this.handlers,function(y){null!==y&&_(y)})},G.exports=I},4634:(G,g,c)=>{"use strict";var u=c(5164),I=c(1540);G.exports=function(_,T){return _&&!u(T)?I(_,T):T}},5886:(G,g,c)=>{"use strict";var u=c(9570);G.exports=function(v,_,T,y,C){var f=new Error(v);return u(f,_,T,y,C)}},6764:(G,g,c)=>{"use strict";var u=c(9471),I=c(4284),v=c(2130),_=c(2567);function T(y){y.cancelToken&&y.cancelToken.throwIfRequested()}G.exports=function(C){return T(C),C.headers=C.headers||{},C.data=I(C.data,C.headers,C.transformRequest),C.headers=u.merge(C.headers.common||{},C.headers[C.method]||{},C.headers),u.forEach(["delete","get","head","post","put","patch","common"],function(p){delete C.headers[p]}),(C.adapter||_.adapter)(C).then(function(p){return T(C),p.data=I(p.data,p.headers,C.transformResponse),p},function(p){return v(p)||(T(C),p&&p.response&&(p.response.data=I(p.response.data,p.response.headers,C.transformResponse))),Promise.reject(p)})}},9570:G=>{"use strict";G.exports=function(c,u,I,v,_){return c.config=u,I&&(c.code=I),c.request=v,c.response=_,c.isAxiosError=!0,c.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},c}},4018:(G,g,c)=>{"use strict";var u=c(9471);G.exports=function(v,_){_=_||{};var T={},y=["url","method","data"],C=["headers","auth","proxy","params"],f=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],h=["validateStatus"];function p(m,D){return u.isPlainObject(m)&&u.isPlainObject(D)?u.merge(m,D):u.isPlainObject(D)?u.merge({},D):u.isArray(D)?D.slice():D}function S(m){u.isUndefined(_[m])?u.isUndefined(v[m])||(T[m]=p(void 0,v[m])):T[m]=p(v[m],_[m])}u.forEach(y,function(D){u.isUndefined(_[D])||(T[D]=p(void 0,_[D]))}),u.forEach(C,S),u.forEach(f,function(D){u.isUndefined(_[D])?u.isUndefined(v[D])||(T[D]=p(void 0,v[D])):T[D]=p(void 0,_[D])}),u.forEach(h,function(D){D in _?T[D]=p(v[D],_[D]):D in v&&(T[D]=p(void 0,v[D]))});var A=y.concat(C).concat(f).concat(h),b=Object.keys(v).concat(Object.keys(_)).filter(function(D){return-1===A.indexOf(D)});return u.forEach(b,S),T}},5650:(G,g,c)=>{"use strict";var u=c(5886);G.exports=function(v,_,T){var y=T.config.validateStatus;T.status&&y&&!y(T.status)?_(u("Request failed with status code "+T.status,T.config,null,T.request,T)):v(T)}},4284:(G,g,c)=>{"use strict";var u=c(9471);G.exports=function(v,_,T){return u.forEach(T,function(C){v=C(v,_)}),v}},2567:(G,g,c)=>{"use strict";var u=c(9471),I=c(2196),v={"Content-Type":"application/x-www-form-urlencoded"};function _(C,f){!u.isUndefined(C)&&u.isUndefined(C["Content-Type"])&&(C["Content-Type"]=f)}var C,y={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(C=c(4054)),C),transformRequest:[function(f,h){return I(h,"Accept"),I(h,"Content-Type"),u.isFormData(f)||u.isArrayBuffer(f)||u.isBuffer(f)||u.isStream(f)||u.isFile(f)||u.isBlob(f)?f:u.isArrayBufferView(f)?f.buffer:u.isURLSearchParams(f)?(_(h,"application/x-www-form-urlencoded;charset=utf-8"),f.toString()):u.isObject(f)?(_(h,"application/json;charset=utf-8"),JSON.stringify(f)):f}],transformResponse:[function(f){if("string"==typeof f)try{f=JSON.parse(f)}catch(h){}return f}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(f){return f>=200&&f<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};u.forEach(["delete","get","head"],function(f){y.headers[f]={}}),u.forEach(["post","put","patch"],function(f){y.headers[f]=u.merge(v)}),G.exports=y},1533:G=>{"use strict";G.exports=function(c,u){return function(){for(var v=new Array(arguments.length),_=0;_<v.length;_++)v[_]=arguments[_];return c.apply(u,v)}}},7790:(G,g,c)=>{"use strict";var u=c(9471);function I(v){return encodeURIComponent(v).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}G.exports=function(_,T,y){if(!T)return _;var C;if(y)C=y(T);else if(u.isURLSearchParams(T))C=T.toString();else{var f=[];u.forEach(T,function(S,A){null==S||(u.isArray(S)?A+="[]":S=[S],u.forEach(S,function(m){u.isDate(m)?m=m.toISOString():u.isObject(m)&&(m=JSON.stringify(m)),f.push(I(A)+"="+I(m))}))}),C=f.join("&")}if(C){var h=_.indexOf("#");-1!==h&&(_=_.slice(0,h)),_+=(-1===_.indexOf("?")?"?":"&")+C}return _}},1540:G=>{"use strict";G.exports=function(c,u){return u?c.replace(/\/+$/,"")+"/"+u.replace(/^\/+/,""):c}},300:(G,g,c)=>{"use strict";var u=c(9471);G.exports=u.isStandardBrowserEnv()?{write:function(_,T,y,C,f,h){var p=[];p.push(_+"="+encodeURIComponent(T)),u.isNumber(y)&&p.push("expires="+new Date(y).toGMTString()),u.isString(C)&&p.push("path="+C),u.isString(f)&&p.push("domain="+f),!0===h&&p.push("secure"),document.cookie=p.join("; ")},read:function(_){var T=document.cookie.match(new RegExp("(^|;\\s*)("+_+")=([^;]*)"));return T?decodeURIComponent(T[3]):null},remove:function(_){this.write(_,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},5164:G=>{"use strict";G.exports=function(c){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(c)}},9541:G=>{"use strict";G.exports=function(c){return"object"==typeof c&&!0===c.isAxiosError}},2984:(G,g,c)=>{"use strict";var u=c(9471);G.exports=u.isStandardBrowserEnv()?function(){var T,v=/(msie|trident)/i.test(navigator.userAgent),_=document.createElement("a");function y(C){var f=C;return v&&(_.setAttribute("href",f),f=_.href),_.setAttribute("href",f),{href:_.href,protocol:_.protocol?_.protocol.replace(/:$/,""):"",host:_.host,search:_.search?_.search.replace(/^\?/,""):"",hash:_.hash?_.hash.replace(/^#/,""):"",hostname:_.hostname,port:_.port,pathname:"/"===_.pathname.charAt(0)?_.pathname:"/"+_.pathname}}return T=y(window.location.href),function(f){var h=u.isString(f)?y(f):f;return h.protocol===T.protocol&&h.host===T.host}}():function(){return!0}},2196:(G,g,c)=>{"use strict";var u=c(9471);G.exports=function(v,_){u.forEach(v,function(y,C){C!==_&&C.toUpperCase()===_.toUpperCase()&&(v[_]=y,delete v[C])})}},1929:(G,g,c)=>{"use strict";var u=c(9471),I=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];G.exports=function(_){var y,C,f,T={};return _&&u.forEach(_.split("\n"),function(p){if(f=p.indexOf(":"),y=u.trim(p.substr(0,f)).toLowerCase(),C=u.trim(p.substr(f+1)),y){if(T[y]&&I.indexOf(y)>=0)return;T[y]="set-cookie"===y?(T[y]?T[y]:[]).concat([C]):T[y]?T[y]+", "+C:C}}),T}},8908:G=>{"use strict";G.exports=function(c){return function(I){return c.apply(null,I)}}},9471:(G,g,c)=>{"use strict";var u=c(1533),I=Object.prototype.toString;function v($){return"[object Array]"===I.call($)}function _($){return void 0===$}function S($){return null!==$&&"object"==typeof $}function A($){if("[object Object]"!==I.call($))return!1;var ae=Object.getPrototypeOf($);return null===ae||ae===Object.prototype}function O($){return"[object Function]"===I.call($)}function F($,ae){if(null!=$)if("object"!=typeof $&&($=[$]),v($))for(var z=0,ee=$.length;z<ee;z++)ae.call(null,$[z],z,$);else for(var ie in $)Object.prototype.hasOwnProperty.call($,ie)&&ae.call(null,$[ie],ie,$)}G.exports={isArray:v,isArrayBuffer:function($){return"[object ArrayBuffer]"===I.call($)},isBuffer:function($){return null!==$&&!_($)&&null!==$.constructor&&!_($.constructor)&&"function"==typeof $.constructor.isBuffer&&$.constructor.isBuffer($)},isFormData:function($){return"undefined"!=typeof FormData&&$ instanceof FormData},isArrayBufferView:function($){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView($):$&&$.buffer&&$.buffer instanceof ArrayBuffer},isString:function($){return"string"==typeof $},isNumber:function($){return"number"==typeof $},isObject:S,isPlainObject:A,isUndefined:_,isDate:function($){return"[object Date]"===I.call($)},isFile:function($){return"[object File]"===I.call($)},isBlob:function($){return"[object Blob]"===I.call($)},isFunction:O,isStream:function($){return S($)&&O($.pipe)},isURLSearchParams:function($){return"undefined"!=typeof URLSearchParams&&$ instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:F,merge:function L(){var $={};function ae(ie,ue){$[ue]=A($[ue])&&A(ie)?L($[ue],ie):A(ie)?L({},ie):v(ie)?ie.slice():ie}for(var z=0,ee=arguments.length;z<ee;z++)F(arguments[z],ae);return $},extend:function($,ae,z){return F(ae,function(ie,ue){$[ue]=z&&"function"==typeof ie?u(ie,z):ie}),$},trim:function($){return $.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function($){return 65279===$.charCodeAt(0)&&($=$.slice(1)),$}}},8228:G=>{"use strict";var g=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;function I(_){if(null==_)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(_)}G.exports=function(){try{if(!Object.assign)return!1;var _=new String("abc");if(_[5]="de","5"===Object.getOwnPropertyNames(_)[0])return!1;for(var T={},y=0;y<10;y++)T["_"+String.fromCharCode(y)]=y;if("0123456789"!==Object.getOwnPropertyNames(T).map(function(h){return T[h]}).join(""))return!1;var f={};return"abcdefghijklmnopqrst".split("").forEach(function(h){f[h]=h}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},f)).join("")}catch(h){return!1}}()?Object.assign:function(_,T){for(var y,f,C=I(_),h=1;h<arguments.length;h++){for(var p in y=Object(arguments[h]))c.call(y,p)&&(C[p]=y[p]);if(g){f=g(y);for(var S=0;S<f.length;S++)u.call(y,f[S])&&(C[f[S]]=y[f[S]])}}return C}},5429:(G,g,c)=>{"use strict";var I=c(8228),v=60103;if("function"==typeof Symbol&&Symbol.for){var p=Symbol.for;v=p("react.element"),p("react.portal"),p("react.fragment"),p("react.strict_mode"),p("react.profiler"),p("react.provider"),p("react.context"),p("react.forward_ref"),p("react.suspense"),p("react.memo"),p("react.lazy")}"function"==typeof Symbol&&Symbol;function b(R){for(var w="https://reactjs.org/docs/error-decoder.html?invariant="+R,H=1;H<arguments.length;H++)w+="&args[]="+encodeURIComponent(arguments[H]);return"Minified React error #"+R+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D={};function O(R,w,H){this.props=R,this.context=w,this.refs=D,this.updater=H||m}function N(){}function V(R,w,H){this.props=R,this.context=w,this.refs=D,this.updater=H||m}O.prototype.isReactComponent={},O.prototype.setState=function(R,w){if("object"!=typeof R&&"function"!=typeof R&&null!=R)throw Error(b(85));this.updater.enqueueSetState(this,R,w,"setState")},O.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")},N.prototype=O.prototype;var W=V.prototype=new N;W.constructor=V,I(W,O.prototype),W.isPureReactComponent=!0;var B_current=null,F=Object.prototype.hasOwnProperty,L={key:!0,ref:!0,__self:!0,__source:!0};g.createElement=function(R,w,H){var X,re={},Y=null,ne=null;if(null!=w)for(X in void 0!==w.ref&&(ne=w.ref),void 0!==w.key&&(Y=""+w.key),w)F.call(w,X)&&!L.hasOwnProperty(X)&&(re[X]=w[X]);var se=arguments.length-2;if(1===se)re.children=H;else if(1<se){for(var le=Array(se),ce=0;ce<se;ce++)le[ce]=arguments[ce+2];re.children=le}if(R&&R.defaultProps)for(X in se=R.defaultProps)void 0===re[X]&&(re[X]=se[X]);return{$$typeof:v,type:R,key:Y,ref:ne,props:re,_owner:B_current}}},8139:(G,g,c)=>{"use strict";G.exports=c(5429)},7941:G=>{var g=function(c){"use strict";var v,u=Object.prototype,I=u.hasOwnProperty,_="function"==typeof Symbol?Symbol:{},T=_.iterator||"@@iterator",y=_.asyncIterator||"@@asyncIterator",C=_.toStringTag||"@@toStringTag";function f(k,x,j){return Object.defineProperty(k,x,{value:j,enumerable:!0,configurable:!0,writable:!0}),k[x]}try{f({},"")}catch(k){f=function(x,j,R){return x[j]=R}}function h(k,x,j,R){var H=Object.create((x&&x.prototype instanceof O?x:O).prototype),X=new ie(R||[]);return H._invoke=function(k,x,j){var R=S;return function(H,X){if(R===b)throw new Error("Generator is already running");if(R===m){if("throw"===H)throw X;return Z()}for(j.method=H,j.arg=X;;){var re=j.delegate;if(re){var Y=ae(re,j);if(Y){if(Y===D)continue;return Y}}if("next"===j.method)j.sent=j._sent=j.arg;else if("throw"===j.method){if(R===S)throw R=m,j.arg;j.dispatchException(j.arg)}else"return"===j.method&&j.abrupt("return",j.arg);R=b;var ne=p(k,x,j);if("normal"===ne.type){if(R=j.done?m:A,ne.arg===D)continue;return{value:ne.arg,done:j.done}}"throw"===ne.type&&(R=m,j.method="throw",j.arg=ne.arg)}}}(k,j,X),H}function p(k,x,j){try{return{type:"normal",arg:k.call(x,j)}}catch(R){return{type:"throw",arg:R}}}c.wrap=h;var S="suspendedStart",A="suspendedYield",b="executing",m="completed",D={};function O(){}function N(){}function V(){}var W={};f(W,T,function(){return this});var B=Object.getPrototypeOf,F=B&&B(B(ue([])));F&&F!==u&&I.call(F,T)&&(W=F);var L=V.prototype=O.prototype=Object.create(W);function K(k){["next","throw","return"].forEach(function(x){f(k,x,function(j){return this._invoke(x,j)})})}function q(k,x){function j(H,X,re,Y){var ne=p(k[H],k,X);if("throw"!==ne.type){var se=ne.arg,le=se.value;return le&&"object"==typeof le&&I.call(le,"__await")?x.resolve(le.__await).then(function(ce){j("next",ce,re,Y)},function(ce){j("throw",ce,re,Y)}):x.resolve(le).then(function(ce){se.value=ce,re(se)},function(ce){return j("throw",ce,re,Y)})}Y(ne.arg)}var R;this._invoke=function(H,X){function re(){return new x(function(Y,ne){j(H,X,Y,ne)})}return R=R?R.then(re,re):re()}}function ae(k,x){var j=k.iterator[x.method];if(j===v){if(x.delegate=null,"throw"===x.method){if(k.iterator.return&&(x.method="return",x.arg=v,ae(k,x),"throw"===x.method))return D;x.method="throw",x.arg=new TypeError("The iterator does not provide a 'throw' method")}return D}var R=p(j,k.iterator,x.arg);if("throw"===R.type)return x.method="throw",x.arg=R.arg,x.delegate=null,D;var w=R.arg;return w?w.done?(x[k.resultName]=w.value,x.next=k.nextLoc,"return"!==x.method&&(x.method="next",x.arg=v),x.delegate=null,D):w:(x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,D)}function z(k){var x={tryLoc:k[0]};1 in k&&(x.catchLoc=k[1]),2 in k&&(x.finallyLoc=k[2],x.afterLoc=k[3]),this.tryEntries.push(x)}function ee(k){var x=k.completion||{};x.type="normal",delete x.arg,k.completion=x}function ie(k){this.tryEntries=[{tryLoc:"root"}],k.forEach(z,this),this.reset(!0)}function ue(k){if(k){var x=k[T];if(x)return x.call(k);if("function"==typeof k.next)return k;if(!isNaN(k.length)){var j=-1,R=function w(){for(;++j<k.length;)if(I.call(k,j))return w.value=k[j],w.done=!1,w;return w.value=v,w.done=!0,w};return R.next=R}}return{next:Z}}function Z(){return{value:v,done:!0}}return N.prototype=V,f(L,"constructor",V),f(V,"constructor",N),N.displayName=f(V,C,"GeneratorFunction"),c.isGeneratorFunction=function(k){var x="function"==typeof k&&k.constructor;return!!x&&(x===N||"GeneratorFunction"===(x.displayName||x.name))},c.mark=function(k){return Object.setPrototypeOf?Object.setPrototypeOf(k,V):(k.__proto__=V,f(k,C,"GeneratorFunction")),k.prototype=Object.create(L),k},c.awrap=function(k){return{__await:k}},K(q.prototype),f(q.prototype,y,function(){return this}),c.AsyncIterator=q,c.async=function(k,x,j,R,w){void 0===w&&(w=Promise);var H=new q(h(k,x,j,R),w);return c.isGeneratorFunction(x)?H:H.next().then(function(X){return X.done?X.value:H.next()})},K(L),f(L,C,"Generator"),f(L,T,function(){return this}),f(L,"toString",function(){return"[object Generator]"}),c.keys=function(k){var x=[];for(var j in k)x.push(j);return x.reverse(),function R(){for(;x.length;){var w=x.pop();if(w in k)return R.value=w,R.done=!1,R}return R.done=!0,R}},c.values=ue,ie.prototype={constructor:ie,reset:function(k){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(ee),!k)for(var x in this)"t"===x.charAt(0)&&I.call(this,x)&&!isNaN(+x.slice(1))&&(this[x]=v)},stop:function(){this.done=!0;var x=this.tryEntries[0].completion;if("throw"===x.type)throw x.arg;return this.rval},dispatchException:function(k){if(this.done)throw k;var x=this;function j(Y,ne){return H.type="throw",H.arg=k,x.next=Y,ne&&(x.method="next",x.arg=v),!!ne}for(var R=this.tryEntries.length-1;R>=0;--R){var w=this.tryEntries[R],H=w.completion;if("root"===w.tryLoc)return j("end");if(w.tryLoc<=this.prev){var X=I.call(w,"catchLoc"),re=I.call(w,"finallyLoc");if(X&&re){if(this.prev<w.catchLoc)return j(w.catchLoc,!0);if(this.prev<w.finallyLoc)return j(w.finallyLoc)}else if(X){if(this.prev<w.catchLoc)return j(w.catchLoc,!0)}else{if(!re)throw new Error("try statement without catch or finally");if(this.prev<w.finallyLoc)return j(w.finallyLoc)}}}},abrupt:function(k,x){for(var j=this.tryEntries.length-1;j>=0;--j){var R=this.tryEntries[j];if(R.tryLoc<=this.prev&&I.call(R,"finallyLoc")&&this.prev<R.finallyLoc){var w=R;break}}w&&("break"===k||"continue"===k)&&w.tryLoc<=x&&x<=w.finallyLoc&&(w=null);var H=w?w.completion:{};return H.type=k,H.arg=x,w?(this.method="next",this.next=w.finallyLoc,D):this.complete(H)},complete:function(k,x){if("throw"===k.type)throw k.arg;return"break"===k.type||"continue"===k.type?this.next=k.arg:"return"===k.type?(this.rval=this.arg=k.arg,this.method="return",this.next="end"):"normal"===k.type&&x&&(this.next=x),D},finish:function(k){for(var x=this.tryEntries.length-1;x>=0;--x){var j=this.tryEntries[x];if(j.finallyLoc===k)return this.complete(j.completion,j.afterLoc),ee(j),D}},catch:function(k){for(var x=this.tryEntries.length-1;x>=0;--x){var j=this.tryEntries[x];if(j.tryLoc===k){var R=j.completion;if("throw"===R.type){var w=R.arg;ee(j)}return w}}throw new Error("illegal catch attempt")},delegateYield:function(k,x,j){return this.delegate={iterator:ue(k),resultName:x,nextLoc:j},"next"===this.method&&(this.arg=v),D}},c}(G.exports);try{regeneratorRuntime=g}catch(c){"object"==typeof globalThis?globalThis.regeneratorRuntime=g:Function("r","regeneratorRuntime = r")(g)}},5618:(G,g,c)=>{"use strict";function u(t){return"function"==typeof t}let I=!1;const v={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else I&&console.log("RxJS: Back to a better error behavior. Thank you. <3");I=t},get useDeprecatedSynchronousErrorHandling(){return I}};function _(t){setTimeout(()=>{throw t},0)}const T={closed:!0,next(t){},error(t){if(v.useDeprecatedSynchronousErrorHandling)throw t;_(t)},complete(){}},y=Array.isArray||(t=>t&&"number"==typeof t.length);function C(t){return null!==t&&"object"==typeof t}const h=(()=>{function t(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return t.prototype=Object.create(Error.prototype),t})();class p{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:r,_unsubscribe:i,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof p)n.remove(this);else if(null!==n)for(let s=0;s<n.length;++s)n[s].remove(this);if(u(i)){r&&(this._unsubscribe=void 0);try{i.call(this)}catch(s){e=s instanceof h?S(s.errors):[s]}}if(y(o)){let s=-1,a=o.length;for(;++s<a;){const l=o[s];if(C(l))try{l.unsubscribe()}catch(d){e=e||[],d instanceof h?e=e.concat(S(d.errors)):e.push(d)}}}if(e)throw new h(e)}add(e){let n=e;if(!e)return p.EMPTY;switch(typeof e){case"function":n=new p(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof p)){const o=n;n=new p,n._subscriptions=[o]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof p){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(e){const n=this._subscriptions;if(n){const r=n.indexOf(e);-1!==r&&n.splice(r,1)}}}var t;function S(t){return t.reduce((e,n)=>e.concat(n instanceof h?n.errors:n),[])}p.EMPTY=((t=new p).closed=!0,t);const A="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class m extends p{constructor(e,n,r){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=T;break;case 1:if(!e){this.destination=T;break}if("object"==typeof e){e instanceof m?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new D(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new D(this,e,n,r)}}[A](){return this}static create(e,n,r){const i=new m(e,n,r);return i.syncErrorThrowable=!1,i}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class D extends m{constructor(e,n,r,i){super(),this._parentSubscriber=e;let o,s=this;u(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==T&&(s=Object.create(n),u(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=r,this._complete=i}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:n}=this;v.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:n}=this,{useDeprecatedSynchronousErrorHandling:r}=v;if(this._error)r&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(n.syncErrorThrowable)r?(n.syncErrorValue=e,n.syncErrorThrown=!0):_(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;_(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const n=()=>this._complete.call(this._context);v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,n){try{e.call(this._context,n)}catch(r){if(this.unsubscribe(),v.useDeprecatedSynchronousErrorHandling)throw r;_(r)}}__tryOrSetError(e,n,r){if(!v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,r)}catch(i){return v.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(_(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const V="function"==typeof Symbol&&Symbol.observable||"@@observable";function W(t){return t}let L=(()=>{class t{constructor(n){this._isScalar=!1,n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const{operator:o}=this,s=function(t,e,n){if(t){if(t instanceof m)return t;if(t[A])return t[A]()}return t||e||n?new m(t,e,n):new m(T)}(n,r,i);if(s.add(o?o.call(s,this.source):this.source||v.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),v.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){v.useDeprecatedSynchronousErrorHandling&&(n.syncErrorThrown=!0,n.syncErrorValue=r),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof m?n:null}return!0}(n)?n.error(r):console.warn(r)}}forEach(n,r){return new(r=K(r))((i,o)=>{let s;s=this.subscribe(a=>{try{n(a)}catch(l){o(l),s&&s.unsubscribe()}},o,i)})}_subscribe(n){const{source:r}=this;return r&&r.subscribe(n)}[V](){return this}pipe(...n){return 0===n.length?this:function(t){return 0===t.length?W:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=K(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function K(t){if(t||(t=v.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const $=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class ae extends p{constructor(e,n){super(),this.subject=e,this.subscriber=n,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,n=e.observers;if(this.subject=null,!n||0===n.length||e.isStopped||e.closed)return;const r=n.indexOf(this.subscriber);-1!==r&&n.splice(r,1)}}class z extends m{constructor(e){super(e),this.destination=e}}let ee=(()=>{class t extends L{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[A](){return new z(this)}lift(n){const r=new ie(this,this);return r.operator=n,r}next(n){if(this.closed)throw new $;if(!this.isStopped){const{observers:r}=this,i=r.length,o=r.slice();for(let s=0;s<i;s++)o[s].next(n)}}error(n){if(this.closed)throw new $;this.hasError=!0,this.thrownError=n,this.isStopped=!0;const{observers:r}=this,i=r.length,o=r.slice();for(let s=0;s<i;s++)o[s].error(n);this.observers.length=0}complete(){if(this.closed)throw new $;this.isStopped=!0;const{observers:n}=this,r=n.length,i=n.slice();for(let o=0;o<r;o++)i[o].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(n){if(this.closed)throw new $;return super._trySubscribe(n)}_subscribe(n){if(this.closed)throw new $;return this.hasError?(n.error(this.thrownError),p.EMPTY):this.isStopped?(n.complete(),p.EMPTY):(this.observers.push(n),new ae(this,n))}asObservable(){const n=new L;return n.source=this,n}}return t.create=(e,n)=>new ie(e,n),t})();class ie extends ee{constructor(e,n){super(),this.destination=e,this.source=n}next(e){const{destination:n}=this;n&&n.next&&n.next(e)}error(e){const{destination:n}=this;n&&n.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:n}=this;return n?this.source.subscribe(e):p.EMPTY}}function ue(t){return t&&"function"==typeof t.schedule}function Z(t,e){return function(r){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new k(t,e))}}class k{constructor(e,n){this.project=e,this.thisArg=n}call(e,n){return n.subscribe(new x(e,this.project,this.thisArg))}}class x extends m{constructor(e,n,r){super(e),this.project=n,this.count=0,this.thisArg=r||this}_next(e){let n;try{n=this.project.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(n)}}const j=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()},H="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",ne=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function se(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const le=t=>{if(t&&"function"==typeof t[V])return(t=>e=>{const n=t[V]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)})(t);if(ne(t))return j(t);if(se(t))return(t=>e=>(t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,_),e))(t);if(t&&"function"==typeof t[H])return(t=>e=>{const n=t[H]();for(;;){let r;try{r=n.next()}catch(i){return e.error(i),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e})(t);{const n=`You provided ${C(t)?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(n)}};function he(t,e){return new L(n=>{const r=new p;let i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}function Ge(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[V]}(t))return function(t,e){return new L(n=>{const r=new p;return r.add(e.schedule(()=>{const i=t[V]();r.add(i.subscribe({next(o){r.add(e.schedule(()=>n.next(o)))},error(o){r.add(e.schedule(()=>n.error(o)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(se(t))return function(t,e){return new L(n=>{const r=new p;return r.add(e.schedule(()=>t.then(i=>{r.add(e.schedule(()=>{n.next(i),r.add(e.schedule(()=>n.complete()))}))},i=>{r.add(e.schedule(()=>n.error(i)))}))),r})}(t,e);if(ne(t))return he(t,e);if(function(t){return t&&"function"==typeof t[H]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new L(n=>{const r=new p;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[H](),r.add(e.schedule(function(){if(n.closed)return;let o,s;try{const a=i.next();o=a.value,s=a.done}catch(a){return void n.error(a)}s?n.complete():(n.next(o),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof L?t:new L(le(t))}class Ie extends m{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Ct extends m{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function fd(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(fd((i,o)=>Ge(t(i,o)).pipe(Z((s,a)=>e(i,s,o,a))),n)):("number"==typeof e&&(n=e),r=>r.lift(new Vv(t,n)))}class Vv{constructor(e,n=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=n}call(e,n){return n.subscribe(new Bv(e,this.project,this.concurrent))}}class Bv extends Ct{constructor(e,n,r=Number.POSITIVE_INFINITY){super(e),this.project=n,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let n;const r=this.index++;try{n=this.project(e,r)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(n)}_innerSub(e){const n=new Ie(this),r=this.destination;r.add(n);const i=function(t,e){if(e.closed)return;if(t instanceof L)return t.subscribe(e);let n;try{n=le(t)(e)}catch(r){e.error(r)}return n}(e,n);i!==n&&r.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Uv(t=Number.POSITIVE_INFINITY){return fd(W,t)}function hd(t,e){return e?he(t,e):new L(j(t))}function pd(){return function(e){return e.lift(new jv(e))}}class jv{constructor(e){this.connectable=e}call(e,n){const{connectable:r}=this;r._refCount++;const i=new Wv(e,r),o=n.subscribe(i);return i.closed||(i.connection=r.connect()),o}}class Wv extends m{constructor(e,n){super(e),this.connectable=n}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const n=e._refCount;if(n<=0)return void(this.connection=null);if(e._refCount=n-1,n>1)return void(this.connection=null);const{connection:r}=this,i=e._connection;this.connection=null,i&&(!r||i===r)&&i.unsubscribe()}}class Gv extends L{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new p,e.add(this.source.subscribe(new Kv(this.getSubject(),this))),e.closed&&(this._connection=null,e=p.EMPTY)),e}refCount(){return pd()(this)}}const $v=(()=>{const t=Gv.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class Kv extends z{constructor(e,n){super(e),this.connectable=n}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const n=e._connection;e._refCount=0,e._subject=null,e._connection=null,n&&n.unsubscribe()}}}function Yv(){return new ee}function $e(t){for(let e in t)if(t[e]===$e)return e;throw Error("Could not find renamed property on target object.")}function Le(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Le).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Ua(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const Zv=$e({__forward_ref__:$e});function Ha(t){return t.__forward_ref__=Ha,t.toString=function(){return Le(this())},t}function De(t){return function(t){return"function"==typeof t&&t.hasOwnProperty(Zv)&&t.__forward_ref__===Ha}(t)?t():t}class gr extends Error{constructor(e,n){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(e,n)),this.code=e}}function At(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():function(t){return"string"==typeof t?t:null==t?"":String(t)}(t)}function Yo(t,e){const n=e?` in ${e}`:"";throw new gr("201",`No provider for ${At(t)} found${n}`)}function jt(t,e){null==t&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function Qe(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function mr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Gn(t){return md(t,Jo)||md(t,vd)}function md(t,e){return t.hasOwnProperty(e)?t[e]:null}function yd(t){return t&&(t.hasOwnProperty(Wa)||t.hasOwnProperty(oC))?t[Wa]:null}const Jo=$e({\u0275prov:$e}),Wa=$e({\u0275inj:$e}),vd=$e({ngInjectableDef:$e}),oC=$e({ngInjectorDef:$e});var we=(()=>((we=we||{})[we.Default=0]="Default",we[we.Host=1]="Host",we[we.Self=2]="Self",we[we.SkipSelf=4]="SkipSelf",we[we.Optional=8]="Optional",we))();let Ga;function tr(t){const e=Ga;return Ga=t,e}function Cd(t,e,n){const r=Gn(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&we.Optional?null:void 0!==e?e:void Yo(Le(t),"Injector")}function nr(t){return{toString:t}.toString()}var qt=(()=>((qt=qt||{})[qt.OnPush=0]="OnPush",qt[qt.Default=1]="Default",qt))(),ht=(()=>((ht=ht||{})[ht.Emulated=0]="Emulated",ht[ht.None=2]="None",ht[ht.ShadowDom=3]="ShadowDom",ht))();const aC="undefined"!=typeof globalThis&&globalThis,uC="undefined"!=typeof window&&window,lC="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,cC="undefined"!=typeof global&&global,Ke=aC||cC||uC||lC,Lr={},Ye=[],Zo=$e({\u0275cmp:$e}),$a=$e({\u0275dir:$e}),Ka=$e({\u0275pipe:$e}),_d=$e({\u0275mod:$e}),dC=$e({\u0275loc:$e}),$n=$e({\u0275fac:$e}),Bi=$e({__NG_ELEMENT_ID__:$e});let fC=0;function za(t){return nr(()=>{const n={},r={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===qt.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Ye,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||ht.Emulated,id:"c",styles:t.styles||Ye,_:null,setInput:null,schemas:t.schemas||null,tView:null},i=t.directives,o=t.features,s=t.pipes;return r.id+=fC++,r.inputs=Td(t.inputs,n),r.outputs=Td(t.outputs),o&&o.forEach(a=>a(r)),r.directiveDefs=i?()=>("function"==typeof i?i():i).map(Ed):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(Id):null,r})}function Ed(t){return Ot(t)||function(t){return t[$a]||null}(t)}function Id(t){return function(t){return t[Ka]||null}(t)}const Dd={};function Ui(t){return nr(()=>{const e={type:t.type,bootstrap:t.bootstrap||Ye,declarations:t.declarations||Ye,imports:t.imports||Ye,exports:t.exports||Ye,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(Dd[t.id]=t.type),e})}function Td(t,e){if(null==t)return Lr;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const Yt=za;function Ot(t){return t[Zo]||null}function Jt(t,e){const n=t[_d]||null;if(!n&&!0===e)throw new Error(`Type ${Le(t)} does not have '\u0275mod' property.`);return n}function Rn(t){return Array.isArray(t)&&"object"==typeof t[1]}function fn(t){return Array.isArray(t)&&!0===t[1]}function Ya(t){return 0!=(8&t.flags)}function ns(t){return 2==(2&t.flags)}function rs(t){return 1==(1&t.flags)}function hn(t){return null!==t.template}function CC(t){return 0!=(512&t[2])}function Er(t,e){return t.hasOwnProperty($n)?t[$n]:null}class wd{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Sd(t){return t.type.prototype.ngOnChanges&&(t.setInput=DC),IC}function IC(){const t=Md(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===Lr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function DC(t,e,n,r){const i=Md(t)||function(t,e){return t[Rd]=e}(t,{previous:Lr,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],l=s[a];o[a]=new wd(l&&l.currentValue,e,s===Lr),t[r]=e}const Rd="__ngSimpleChanges__";function Md(t){return t[Rd]||null}let Xa;function ot(t){return!!t.listen}const Pd={createRenderer:(t,e)=>void 0!==Xa?Xa:"undefined"!=typeof document?document:void 0};function ct(t){for(;Array.isArray(t);)t=t[0];return t}function en(t,e){return ct(e[t.index])}function tu(t,e){return t.data[e]}function Gt(t,e){const n=e[t];return Rn(n)?n:n[0]}function nu(t){return 128==(128&t[2])}function ir(t,e){return null==e?null:t[e]}function kd(t){t[18]=0}function ru(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Me={lFrame:jd(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function xd(){return Me.bindingsEnabled}function de(){return Me.lFrame.lView}function We(){return Me.lFrame.tView}function iu(t){return Me.lFrame.contextLView=t,t[8]}function pt(){let t=Fd();for(;null!==t&&64===t.type;)t=t.parent;return t}function Fd(){return Me.lFrame.currentTNode}function Mn(t,e){const n=Me.lFrame;n.currentTNode=t,n.isParent=e}function ou(){return Me.lFrame.isParent}function ss(){return Me.isInCheckNoChangesMode}function as(t){Me.isInCheckNoChangesMode=t}function VC(t,e){const n=Me.lFrame;n.bindingIndex=n.bindingRootIndex=t,au(e)}function au(t){Me.lFrame.currentDirectiveIndex=t}function lu(t){Me.lFrame.currentQueryIndex=t}function UC(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function Ud(t,e,n){if(n&we.SkipSelf){let i=e,o=t;for(;!(i=i.parent,null!==i||n&we.Host||(i=UC(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;e=i,t=o}const r=Me.lFrame=Hd();return r.currentTNode=e,r.lView=t,!0}function us(t){const e=Hd(),n=t[1];Me.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Hd(){const t=Me.lFrame,e=null===t?null:t.child;return null===e?jd(t):e}function jd(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Wd(){const t=Me.lFrame;return Me.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Gd=Wd;function ls(){const t=Wd();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Nt(){return Me.lFrame.selectedIndex}function or(t){Me.lFrame.selectedIndex=t}function cs(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:d,ngOnDestroy:E}=o;s&&(t.contentHooks||(t.contentHooks=[])).push(-n,s),a&&((t.contentHooks||(t.contentHooks=[])).push(n,a),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,a)),l&&(t.viewHooks||(t.viewHooks=[])).push(-n,l),d&&((t.viewHooks||(t.viewHooks=[])).push(n,d),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,d)),null!=E&&(t.destroyHooks||(t.destroyHooks=[])).push(n,E)}}function ds(t,e,n){$d(t,e,3,n)}function fs(t,e,n,r){(3&t[2])===n&&$d(t,e,n,r)}function cu(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function $d(t,e,n,r){const o=null!=r?r:-1,s=e.length-1;let a=0;for(let l=void 0!==r?65535&t[18]:0;l<s;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(t[18]+=65536),(a<o||-1==o)&&(qC(t,n,e,l),t[18]=(4294901760&t[18])+l+2),l++}function qC(t,e,n,r){const i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(a)}finally{}}}else try{o.call(a)}finally{}}class $i{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function hs(t,e,n){const r=ot(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],l=n[i++];r?t.setAttribute(e,a,l,s):e.setAttributeNS(s,a,l)}else{const s=o,a=n[++i];fu(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Kd(t){return 3===t||4===t||6===t}function fu(t){return 64===t.charCodeAt(0)}function ps(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||zd(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function zd(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Qd(t){return-1!==t}function Gr(t){return 32767&t}function $r(t,e){let n=function(t){return t>>16}(t),r=e;for(;n>0;)r=r[15],n--;return r}let hu=!0;function gs(t){const e=hu;return hu=t,e}let t_=0;function zi(t,e){const n=gu(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,pu(r.data,t),pu(e,null),pu(r.blueprint,null));const i=ms(t,e),o=t.injectorIndex;if(Qd(i)){const s=Gr(i),a=$r(i,e),l=a[1].data;for(let d=0;d<8;d++)e[o+d]=a[s+d]|l[s+d]}return e[o+8]=i,o}function pu(t,e){t.push(0,0,0,0,0,0,0,0,e)}function gu(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function ms(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const o=i[1],s=o.type;if(r=2===s?o.declTNode:1===s?i[6]:null,null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function ys(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Bi)&&(r=n[Bi]),null==r&&(r=n[Bi]=t_++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Jd(t,e,n){if(n&we.Optional)return t;Yo(e,"NodeInjector")}function Zd(t,e,n,r){if(n&we.Optional&&void 0===r&&(r=null),0==(n&(we.Self|we.Host))){const i=t[9],o=tr(void 0);try{return i?i.get(e,r,n&we.Optional):Cd(e,r,n&we.Optional)}finally{tr(o)}}return Jd(r,e,n)}function Xd(t,e,n,r=we.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Bi)?t[Bi]:void 0;return"number"==typeof e?e>=0?255&e:i_:e}(n);if("function"==typeof o){if(!Ud(e,t,r))return r&we.Host?Jd(i,n,r):Zd(e,n,r,i);try{const s=o(r);if(null!=s||r&we.Optional)return s;Yo(n)}finally{Gd()}}else if("number"==typeof o){let s=null,a=gu(t,e),l=-1,d=r&we.Host?e[16][6]:null;for((-1===a||r&we.SkipSelf)&&(l=-1===a?ms(t,e):e[a+8],-1!==l&&nf(r,!1)?(s=e[1],a=Gr(l),e=$r(l,e)):a=-1);-1!==a;){const E=e[1];if(tf(o,a,E.data)){const M=o_(a,e,n,s,r,d);if(M!==ef)return M}l=e[a+8],-1!==l&&nf(r,e[1].data[a+8]===d)&&tf(o,a,e)?(s=E,a=Gr(l),e=$r(l,e)):a=-1}}}return Zd(e,n,r,i)}const ef={};function i_(){return new Kr(pt(),de())}function o_(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],E=function(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,l=t.directiveStart,E=o>>20,P=i?a+E:t.directiveEnd;for(let U=r?a:a+E;U<P;U++){const Q=s[U];if(U<l&&n===Q||U>=l&&Q.type===n)return U}if(i){const U=s[l];if(U&&hn(U)&&U.type===n)return l}return null}(a,s,n,null==r?ns(a)&&hu:r!=s&&0!=(3&a.type),i&we.Host&&o===a);return null!==E?Qi(e,s,E,a):ef}function Qi(t,e,n,r){let i=t[n];const o=e.data;if(function(t){return t instanceof $i}(i)){const s=i;s.resolving&&function(t,e){throw new gr("200",`Circular dependency in DI detected for ${t}`)}(At(o[n]));const a=gs(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?tr(s.injectImpl):null;Ud(t,r,we.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=Sd(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==l&&tr(l),gs(a),s.resolving=!1,Gd()}}return i}function tf(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function nf(t,e){return!(t&we.Self||t&we.Host&&e)}class Kr{constructor(e,n){this._tNode=e,this._lView=n}get(e,n){return Xd(this._tNode,this._lView,e,void 0,n)}}const Qr="__parameters__";function Ir(t,e,n){return nr(()=>{const r=function(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(l,d,E){const M=l.hasOwnProperty(Qr)?l[Qr]:Object.defineProperty(l,Qr,{value:[]})[Qr];for(;M.length<=E;)M.push(null);return(M[E]=M[E]||[]).push(s),l}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Je{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Qe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}function On(t,e){t.forEach(n=>Array.isArray(n)?On(n,e):e(n))}function _s(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Dr(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const Zi={},Iu="__NG_DI_FLAG__",Jr="ngTempTokenPath",C_=/\n/gm,Du="__source",Tu=$e({provide:String,useValue:$e});let Xi;function Zr(t){const e=Xi;return Xi=t,e}function E_(t,e=we.Default){if(void 0===Xi)throw new Error("inject() must be called from an injection context");return null===Xi?Cd(t,void 0,e):Xi.get(t,e&we.Optional?null:void 0,e)}function He(t,e=we.Default){return(Ga||E_)(De(t),e)}function Tr(t){const e=[];for(let n=0;n<t.length;n++){const r=De(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let i,o=we.Default;for(let s=0;s<r.length;s++){const a=r[s],l=I_(a);"number"==typeof l?-1===l?i=a.token:o|=l:i=a}e.push(He(i,o))}else e.push(He(r))}return e}function eo(t,e){return t[Iu]=e,t.prototype[Iu]=e,t}function I_(t){return t[Iu]}function lf(t,e,n,r){const i=t[Jr];throw e[Du]&&i.unshift(e[Du]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=Le(e);if(Array.isArray(e))i=e.map(Le).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Le(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(C_,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[Jr]=null,t}const to=eo(Ir("Inject",t=>({token:t})),-1),Pn=eo(Ir("Optional"),8),br=eo(Ir("SkipSelf"),4),Mf="__ngContext__";function wt(t,e){t[Mf]=e}function Nu(t){const e=function(t){return t[Mf]||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Ss(t){return t.ngOriginalError}function gE(t,...e){t.error(...e)}class Sr{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e),r=this._findContext(e),i=function(t){return t&&t.ngErrorLogger||gE}(e);i(this._console,"ERROR",e),n&&i(this._console,"ORIGINAL ERROR",n),r&&i(this._console,"ERROR CONTEXT",r)}_findContext(e){return e?function(t){return t.ngDebugContext}(e)||this._findContext(Ss(e)):null}_findOriginalError(e){let n=e&&Ss(e);for(;n&&Ss(n);)n=Ss(n);return n||null}}const Vf=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ke))();function xn(t){return t instanceof Function?t():t}var zt=(()=>((zt=zt||{})[zt.Important=1]="Important",zt[zt.DashCase=2]="DashCase",zt))();function Fu(t,e){return undefined(t,e)}function ao(t){const e=t[3];return fn(e)?e[3]:e}function Lu(t){return Wf(t[13])}function Vu(t){return Wf(t[4])}function Wf(t){for(;null!==t&&!fn(t);)t=t[4];return t}function ni(t,e,n,r,i){if(null!=r){let o,s=!1;fn(r)?o=r:Rn(r)&&(s=!0,r=r[0]);const a=ct(r);0===t&&null!==n?null==i?qf(e,n,a):Rr(e,n,a,i||null,!0):1===t&&null!==n?Rr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Ms(t,e);r&&function(t,e,n,r){ot(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==ct(n)&&ni(e,t,r,o,i);for(let a=10;a<n.length;a++){const l=n[a];uo(l[1],l,t,e,r,o)}}(e,t,o,n,i)}}function Uu(t,e,n){return ot(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function $f(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,ru(i,-1)),n.splice(r,1)}function Hu(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&$f(i,r),e>0&&(t[n-1][4]=r[4]);const o=Dr(t,10+e);!function(t,e){uo(t,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const s=o[19];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function Kf(t,e){if(!(256&e[2])){const n=e[11];ot(n)&&n.destroyNode&&uo(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return ju(t[1],t);for(;e;){let n=null;if(Rn(e))n=e[13];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)Rn(e)&&ju(e[1],e),e=e[3];null===e&&(e=t),Rn(e)&&ju(e[1],e),n=e&&e[4]}e=n}}(e)}}function ju(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof $i)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],l=o[s+1];try{l.call(a)}finally{}}else try{o.call(i)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+1],a="function"==typeof s?s(e):ct(e[s]),l=r[i=n[o+2]],d=n[o+3];"boolean"==typeof d?a.removeEventListener(n[o],l,d):d>=0?r[i=d]():r[i=-d].unsubscribe(),o+=2}else{const s=r[i=n[o+1]];n[o].call(s)}if(null!==r){for(let o=i+1;o<r.length;o++)r[o]();e[7]=null}}(t,e),1===e[1].type&&ot(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&fn(e[3])){n!==e[3]&&$f(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function zf(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const i=t.data[r.directiveStart].encapsulation;if(i===ht.None||i===ht.Emulated)return null}return en(r,n)}(t,e.parent,n)}function Rr(t,e,n,r,i){ot(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function qf(t,e,n){ot(t)?t.appendChild(e,n):e.appendChild(n)}function Yf(t,e,n,r,i){null!==r?Rr(t,e,n,r,i):qf(t,e,n)}function Ms(t,e){return ot(t)?t.parentNode(e):e.parentNode}let Xf=function(t,e,n){return 40&t.type?en(t,n):null};function As(t,e,n,r){const i=zf(t,r,e),o=e[11],a=function(t,e,n){return Xf(t,e,n)}(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let l=0;l<n.length;l++)Yf(o,i,n[l],a,!1);else Yf(o,i,n,a,!1)}function Os(t,e){if(null!==e){const n=e.type;if(3&n)return en(e,t);if(4&n)return Gu(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Os(t,r);{const i=t[e.index];return fn(i)?Gu(-1,i):ct(i)}}if(32&n)return Fu(e,t)()||ct(t[e.index]);{const r=th(t,e);return null!==r?Array.isArray(r)?r[0]:Os(ao(t[16]),r):Os(t,e.next)}}return null}function th(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Gu(t,e){const n=10+t+1;if(n<e.length){const r=e[n],i=r[1].firstChild;if(null!==i)return Os(r,i)}return e[7]}function $u(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],l=n.type;if(s&&0===e&&(a&&wt(ct(a),r),n.flags|=4),64!=(64&n.flags))if(8&l)$u(t,e,n.child,r,i,o,!1),ni(e,t,i,a,o);else if(32&l){const d=Fu(n,r);let E;for(;E=d();)ni(e,t,i,E,o);ni(e,t,i,a,o)}else 16&l?rh(t,e,r,n,i,o):ni(e,t,i,a,o);n=s?n.projectionNext:n.next}}function uo(t,e,n,r,i,o){$u(n,r,t.firstChild,e,i,o,!1)}function rh(t,e,n,r,i,o){const s=n[16],l=s[6].projection[r.projection];if(Array.isArray(l))for(let d=0;d<l.length;d++)ni(e,t,i,l[d],o);else $u(t,e,l,s[3],i,o,!0)}function ih(t,e,n){ot(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Ku(t,e,n){ot(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function oh(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}const sh="ng-template";function HE(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==oh(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function ah(t){return 4===t.type&&t.value!==sh}function jE(t,e,n){return e===(4!==t.type||n?t.value:sh)}function WE(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Kd(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!s)if(4&r){if(r=2|1&r,""!==l&&!jE(t,l,n)||""===l&&1===e.length){if(pn(r))return!1;s=!0}}else{const d=8&r?l:e[++a];if(8&r&&null!==t.attrs){if(!HE(t.attrs,d,n)){if(pn(r))return!1;s=!0}continue}const M=GE(8&r?"class":l,i,ah(t),n);if(-1===M){if(pn(r))return!1;s=!0;continue}if(""!==d){let P;P=M>o?"":i[M+1].toLowerCase();const U=8&r?P:null;if(U&&-1!==oh(U,d,0)||2&r&&d!==P){if(pn(r))return!1;s=!0}}}}else{if(!s&&!pn(r)&&!pn(l))return!1;if(s&&pn(l))continue;s=!1,r=l|1&r}}return pn(r)||s}function pn(t){return 0==(1&t)}function GE(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){const s=e[i];if(s===t)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function uh(t,e,n=!1){for(let r=0;r<e.length;r++)if(WE(t,e[r],n))return!0;return!1}function lh(t,e){return t?":not("+e.trim()+")":e}function qE(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!pn(s)&&(e+=lh(o,i),i=""),r=s,o=o||!pn(r);n++}return""!==i&&(e+=lh(o,i)),e}const Oe={};function Ps(t){ch(We(),de(),Nt()+t,ss())}function ch(t,e,n,r){if(!r)if(3==(3&e[2])){const o=t.preOrderCheckHooks;null!==o&&ds(e,o,n)}else{const o=t.preOrderHooks;null!==o&&fs(e,o,0,n)}or(n)}function _h(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const s=t.data[o];lu(i),s.contentQueries(2,e[o],o)}}}function lo(t,e,n,r,i,o,s,a,l,d){const E=e.blueprint.slice();return E[0]=i,E[2]=140|r,kd(E),E[3]=E[15]=t,E[8]=n,E[10]=s||t&&t[10],E[11]=a||t&&t[11],E[12]=l||t&&t[12]||null,E[9]=d||t&&t[9]||null,E[6]=o,E[16]=2==e.type?t[16]:E,E}function ri(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Fd(),s=ou(),l=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=l),null!==o&&(s?null==o.child&&null!==l.parent&&(o.child=l):null===o.next&&(o.next=l)),l}(t,e,n,r,i),Me.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function(){const t=Me.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Mn(o,!0),o}function ii(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function co(t,e,n){us(e);try{const r=t.viewQuery;null!==r&&dl(1,r,n);const i=t.template;null!==i&&Eh(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&_h(t,e),t.staticViewQueries&&dl(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)R0(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,ls()}}function oi(t,e,n,r){const i=e[2];if(256==(256&i))return;us(e);const o=ss();try{kd(e),function(t){Me.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&Eh(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const d=t.preOrderCheckHooks;null!==d&&ds(e,d,null)}else{const d=t.preOrderHooks;null!==d&&fs(e,d,0,null),cu(e,0)}if(function(t){for(let e=Lu(t);null!==e;e=Vu(e)){if(!e[2])continue;const n=e[9];for(let r=0;r<n.length;r++){const i=n[r],o=i[3];0==(1024&i[2])&&ru(o,1),i[2]|=1024}}}(e),function(t){for(let e=Lu(t);null!==e;e=Vu(e))for(let n=10;n<e.length;n++){const r=e[n],i=r[1];nu(r)&&oi(i,r,i.template,r[8])}}(e),null!==t.contentQueries&&_h(t,e),!o)if(s){const d=t.contentCheckHooks;null!==d&&ds(e,d)}else{const d=t.contentHooks;null!==d&&fs(e,d,1),cu(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)or(~i);else{const o=i,s=n[++r],a=n[++r];VC(s,o),a(2,e[o])}}}finally{or(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)S0(t,e[n])}(e,a);const l=t.viewQuery;if(null!==l&&dl(2,l,r),!o)if(s){const d=t.viewCheckHooks;null!==d&&ds(e,d)}else{const d=t.viewHooks;null!==d&&fs(e,d,2),cu(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,ru(e[3],-1))}finally{ls()}}function u0(t,e,n,r){const i=e[10],o=!ss(),s=function(t){return 4==(4&t[2])}(e);try{o&&!s&&i.begin&&i.begin(),s&&co(t,e,r),oi(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Eh(t,e,n,r,i){const o=Nt(),s=2&r;try{or(-1),s&&e.length>20&&ch(t,e,20,ss()),n(r,i)}finally{or(o)}}function rl(t,e,n){!xd()||(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||zi(n,e),wt(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const l=t.data[a],d=hn(l);d&&I0(e,n,l);const E=Qi(e,t,a,n);wt(E,e),null!==s&&D0(0,a-i,E,l,0,s),d&&(Gt(n.index,e)[8]=E)}}(t,e,n,en(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,a=Me.lFrame.currentDirectiveIndex;try{or(s);for(let l=r;l<i;l++){const d=t.data[l],E=e[l];au(l),(null!==d.hostBindings||0!==d.hostVars||null!==d.hostAttrs)&&Ah(d,E)}}finally{or(-1),au(a)}}(t,e,n))}function il(t,e,n=en){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Dh(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Fs(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Fs(t,e,n,r,i,o,s,a,l,d){const E=20+r,M=E+i,P=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Oe);return n}(E,M),U="function"==typeof d?d():d;return P[1]={type:t,blueprint:P,template:n,queries:null,viewQuery:a,declTNode:e,data:P.slice().fill(null,E),bindingStartIndex:E,expandoStartIndex:M,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:U,incompleteFirstPass:!1}}function Sh(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function ol(t,e,n,r){let i=!1;if(xd()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];uh(n,s.selectors,!1)&&(i||(i=[]),ys(zi(n,e),t,s.type),hn(s)?(Oh(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Ph(n,t.data.length,o.length);for(let E=0;E<o.length;E++){const M=o[E];M.providersResolver&&M.providersResolver(M)}let a=!1,l=!1,d=ii(t,e,o.length,null);for(let E=0;E<o.length;E++){const M=o[E];n.mergedAttrs=ps(n.mergedAttrs,M.hostAttrs),Nh(t,n,e,d,M),E0(d,M,s),null!==M.contentQueries&&(n.flags|=8),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(n.flags|=128);const P=M.type.prototype;!a&&(P.ngOnChanges||P.ngOnInit||P.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),a=!0),!l&&(P.ngOnChanges||P.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),l=!0),d++}!function(t,e){const r=e.directiveEnd,i=t.data,o=e.attrs,s=[];let a=null,l=null;for(let d=e.directiveStart;d<r;d++){const E=i[d],M=E.inputs,P=null===o||ah(e)?null:T0(M,o);s.push(P),a=Sh(M,d,a),l=Sh(E.outputs,d,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=a,e.outputs=l}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const o=n[e[i+1]];if(null==o)throw new gr("301",`Export of name '${e[i+1]}' not found!`);r.push(e[i],o)}}}(n,r,s)}return n.mergedAttrs=ps(n.mergedAttrs,n.attrs),i}function Mh(t,e,n,r,i,o){const s=o.hostBindings;if(s){let a=t.hostBindingOpCodes;null===a&&(a=t.hostBindingOpCodes=[]);const l=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(a)!=l&&a.push(l),a.push(r,i,s)}}function Ah(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Oh(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function E0(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;hn(e)&&(n[""]=t)}}function Ph(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Nh(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=Er(i.type)),s=new $i(o,hn(i),null);t.blueprint[r]=s,n[r]=s,Mh(t,e,0,r,ii(t,n,i.hostVars,Oe),i)}function I0(t,e,n){const r=en(e,t),i=Dh(n),o=t[10],s=Ls(t,lo(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function D0(t,e,n,r,i,o){const s=o[e];if(null!==s){const a=r.setInput;for(let l=0;l<s.length;){const d=s[l++],E=s[l++],M=s[l++];null!==a?r.setInput(n,M,d,E):n[E]=M}}}function T0(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function kh(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function S0(t,e){const n=Gt(e,t);if(nu(n)){const r=n[1];80&n[2]?oi(r,n,r.template,n[8]):n[5]>0&&al(n)}}function al(t){for(let r=Lu(t);null!==r;r=Vu(r))for(let i=10;i<r.length;i++){const o=r[i];if(1024&o[2]){const s=o[1];oi(s,o,s.template,o[8])}else o[5]>0&&al(o)}const n=t[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=Gt(n[r],t);nu(i)&&i[5]>0&&al(i)}}function R0(t,e){const n=Gt(e,t),r=n[1];(function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(r,n),co(r,n,n[8])}function Ls(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function ul(t){for(;t;){t[2]|=64;const e=ao(t);if(CC(t)&&!e)return t;t=e}return null}function cl(t,e,n){const r=e[10];r.begin&&r.begin();try{oi(t,e,t.template,n)}catch(i){throw Bh(e,i),i}finally{r.end&&r.end()}}function xh(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Nu(n),i=r[1];u0(i,r,i.template,n)}}(t[8])}function dl(t,e,n){lu(0),e(t,n)}const N0=(()=>Promise.resolve(null))();function Fh(t){return t[7]||(t[7]=[])}function Lh(t){return t.cleanup||(t.cleanup=[])}function Bh(t,e){const n=t[9],r=n?n.get(Sr,null):null;r&&r.handleError(e)}function Uh(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],l=e[s],d=t.data[s];null!==d.setInput?d.setInput(l,i,r,a):l[a]=i}}function Vs(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=Ua(i,a):2==o&&(r=Ua(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const si=new Je("INJECTOR",-1);class Hh{get(e,n=Zi){if(n===Zi){const r=new Error(`NullInjectorError: No provider for ${Le(e)}!`);throw r.name="NullInjectorError",r}return n}}const fo=new Je("Set Injector scope."),ho={},F0={};let fl;function jh(){return void 0===fl&&(fl=new Hh),fl}function Wh(t,e=null,n=null,r){return new V0(t,n,e||jh(),r)}class V0{constructor(e,n,r,i=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const o=[];n&&On(n,a=>this.processProvider(a,e,n)),On([e],a=>this.processInjectorType(a,[],o)),this.records.set(si,ai(void 0,this));const s=this.records.get(fo);this.scope=null!=s?s.value:null,this.source=i||("object"==typeof e?null:Le(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,n=Zi,r=we.Default){this.assertNotDestroyed();const i=Zr(this),o=tr(void 0);try{if(!(r&we.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function(t){return"function"==typeof t||"object"==typeof t&&t instanceof Je}(e)&&Gn(e);a=l&&this.injectableDefInScope(l)?ai(hl(e),ho):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&we.Self?jh():this.parent).get(e,n=r&we.Optional&&n===Zi?null:n)}catch(s){if("NullInjectorError"===s.name){if((s[Jr]=s[Jr]||[]).unshift(Le(e)),i)throw s;return lf(s,e,"R3InjectorError",this.source)}throw s}finally{tr(o),Zr(i)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((r,i)=>e.push(Le(i))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,n,r){if(!(e=De(e)))return!1;let i=yd(e);const o=null==i&&e.ngModule||void 0,s=void 0===o?e:o,a=-1!==r.indexOf(s);if(void 0!==o&&(i=yd(o)),null==i)return!1;if(null!=i.imports&&!a){let E;r.push(s);try{On(i.imports,M=>{this.processInjectorType(M,n,r)&&(void 0===E&&(E=[]),E.push(M))})}finally{}if(void 0!==E)for(let M=0;M<E.length;M++){const{ngModule:P,providers:U}=E[M];On(U,Q=>this.processProvider(Q,P,U||Ye))}}this.injectorDefTypes.add(s);const l=Er(s)||(()=>new s);this.records.set(s,ai(l,ho));const d=i.providers;if(null!=d&&!a){const E=e;On(d,M=>this.processProvider(M,E,d))}return void 0!==o&&void 0!==e.providers}processProvider(e,n,r){let i=ui(e=De(e))?e:De(e&&e.provide);const o=function(t,e,n){return $h(t)?ai(void 0,t.useValue):ai(function(t,e,n){let r;if(ui(t)){const i=De(t);return Er(i)||hl(i)}if($h(t))r=()=>De(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Tr(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>He(De(t.useExisting));else{const i=De(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return Er(i)||hl(i);r=()=>new i(...Tr(t.deps))}return r}(t),ho)}(e);if(ui(e)||!0!==e.multi)this.records.get(i);else{let s=this.records.get(i);s||(s=ai(void 0,ho,!0),s.factory=()=>Tr(s.multi),this.records.set(i,s)),i=e,s.multi.push(e)}this.records.set(i,o)}hydrate(e,n){return n.value===ho&&(n.value=F0,n.value=n.factory()),"object"==typeof n.value&&n.value&&function(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this.onDestroy.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=De(e.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function hl(t){const e=Gn(t),n=null!==e?e.factory:Er(t);if(null!==n)return n;if(t instanceof Je)throw new Error(`Token ${Le(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const r=function(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?");throw new Error(`Can't resolve all parameters for ${Le(t)}: (${r.join(", ")}).`)}const n=function(t){const e=t&&(t[Jo]||t[vd]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function ai(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function $h(t){return null!==t&&"object"==typeof t&&Tu in t}function ui(t){return"function"==typeof t}const Kh=function(t,e,n){return function(t,e=null,n=null,r){const i=Wh(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};class qe{static create(e,n){return Array.isArray(e)?Kh(e,n,""):Kh(e.providers,e.parent,e.name||"")}}function oI(t,e){cs(Nu(t)[1],pt())}qe.THROW_IF_NOT_FOUND=Zi,qe.NULL=new Hh,qe.\u0275prov=Qe({token:qe,providedIn:"any",factory:()=>He(si)}),qe.__NG_ELEMENT_ID__=-1;let Bs=null;function li(){if(!Bs){const t=Ke.Symbol;if(t&&t.iterator)Bs=t.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<e.length;++n){const r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Bs=r)}}}return Bs}function go(t){return!!_l(t)&&(Array.isArray(t)||!(t instanceof Map)&&li()in t)}function _l(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Hs(t,e,n,r,i,o,s,a){const l=de(),d=We(),E=t+20,M=d.firstCreatePass?function(t,e,n,r,i,o,s,a,l){const d=e.consts,E=ri(e,t,4,s||null,ir(d,a));ol(e,n,E,ir(d,l)),cs(e,E);const M=E.tViews=Fs(2,E,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d);return null!==e.queries&&(e.queries.template(e,E),M.queries=e.queries.embeddedTView(E)),E}(E,d,l,e,n,r,i,o,s):d.data[E];Mn(M,!1);const P=l[11].createComment("");As(d,l,P,M),wt(P,l),Ls(l,l[E]=kh(P,l,P,M)),rs(M)&&rl(d,l,M),null!=s&&il(l,M,a)}function Ue(t,e=we.Default){const n=de();return null===n?He(t,e):Xd(pt(),n,De(t),e)}function yo(t,e,n){const r=de();return function(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}(r,Me.lFrame.bindingIndex++,e)&&function(t,e,n,r,i,o,s,a){const l=en(e,n);let E,d=e.inputs;!a&&null!=d&&(E=d[r])?(Uh(t,n,E,r,i),ns(e)&&function(t,e){const n=Gt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.value||"",r):i,ot(o)?o.setProperty(l,r,i):fu(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}(We(),function(){const t=Me.lFrame;return tu(t.tView,t.selectedIndex)}(),r,t,e,r[11],n,!1),yo}function bl(t,e,n,r,i){const s=i?"class":"style";Uh(t,n,e.inputs[s],s,r)}function Vn(t,e,n,r){const i=de(),o=We(),s=20+t,a=i[11],l=i[s]=Uu(a,e,Me.lFrame.currentNamespace),d=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,d=ri(e,t,2,i,ir(a,o));return ol(e,n,d,ir(a,s)),null!==d.attrs&&Vs(d,d.attrs,!1),null!==d.mergedAttrs&&Vs(d,d.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,d),d}(s,o,i,0,e,n,r):o.data[s];Mn(d,!0);const E=d.mergedAttrs;null!==E&&hs(a,l,E);const M=d.classes;null!==M&&Ku(a,l,M);const P=d.styles;null!==P&&ih(a,l,P),64!=(64&d.flags)&&As(o,i,l,d),0===Me.lFrame.elementDepthCount&&wt(l,i),Me.lFrame.elementDepthCount++,rs(d)&&(rl(o,i,d),function(t,e,n){if(Ya(e)){const i=e.directiveEnd;for(let o=e.directiveStart;o<i;o++){const s=t.data[o];s.contentQueries&&s.contentQueries(1,n[o],o)}}}(o,d,i)),null!==r&&il(i,d)}function Bn(){let t=pt();ou()?Me.lFrame.isParent=!1:(t=t.parent,Mn(t,!1));const e=t;Me.lFrame.elementDepthCount--;const n=We();n.firstCreatePass&&(cs(n,t),Ya(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&bl(n,e,de(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&bl(n,e,de(),e.stylesWithoutHost,!1)}function wl(){return de()}function Sl(t){return!!t&&"function"==typeof t.then}const Fp=function(t){return!!t&&"function"==typeof t.subscribe};function Ws(t,e,n,r){const i=de(),o=We(),s=pt();return function(t,e,n,r,i,o,s,a){const l=rs(r),E=t.firstCreatePass&&Lh(t),M=e[8],P=Fh(e);let U=!0;if(3&r.type||a){const J=en(r,e),fe=a?a(J):J,oe=P.length,Ee=a?Te=>a(ct(Te[r.index])):r.index;if(ot(n)){let Te=null;if(!a&&l&&(Te=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=e[7],l=i[o+2];return a.length>l?a[l]:null}"string"==typeof s&&(o+=2)}return null}(t,e,i,r.index)),null!==Te)(Te.__ngLastListenerFn__||Te).__ngNextListenerFn__=o,Te.__ngLastListenerFn__=o,U=!1;else{o=Rl(r,e,M,o,!1);const Ve=n.listen(fe,i,o);P.push(o,Ve),E&&E.push(i,Ee,oe,oe+1)}}else o=Rl(r,e,M,o,!0),fe.addEventListener(i,o,s),P.push(o),E&&E.push(i,Ee,oe,s)}else o=Rl(r,e,M,o,!1);const Q=r.outputs;let te;if(U&&null!==Q&&(te=Q[i])){const J=te.length;if(J)for(let fe=0;fe<J;fe+=2){const vt=e[te[fe]][te[fe+1]].subscribe(o),cn=P.length;P.push(o,vt),E&&E.push(i,r.index,cn,-(cn+1))}}}(o,i,i[11],s,t,e,!!n,r),Ws}function Bp(t,e,n,r){try{return!1!==n(r)}catch(i){return Bh(t,i),!1}}function Rl(t,e,n,r,i){return function o(s){if(s===Function)return r;const a=2&t.flags?Gt(t.index,e):e;0==(32&e[2])&&ul(a);let l=Bp(e,0,r,s),d=o.__ngNextListenerFn__;for(;d;)l=Bp(e,0,d,s)&&l,d=d.__ngNextListenerFn__;return i&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function Gs(t=1){return function(t){return(Me.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Me.lFrame.contextLView))[8]}(t)}function Co(t,e=""){const n=de(),r=We(),i=t+20,o=r.firstCreatePass?ri(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return ot(t)?t.createText(e):t.createTextNode(e)}(n[11],e);As(r,n,s,o),Mn(o,!1)}const Ar=void 0;var OD=["en",[["a","p"],["AM","PM"],Ar],[["AM","PM"],Ar,Ar],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ar,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ar,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ar,"{1} 'at' {0}",Ar],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Ei={};function Og(t){return t in Ei||(Ei[t]=Ke.ng&&Ke.ng.common&&Ke.ng.common.locales&&Ke.ng.common.locales[t]),Ei[t]}var me=(()=>((me=me||{})[me.LocaleId=0]="LocaleId",me[me.DayPeriodsFormat=1]="DayPeriodsFormat",me[me.DayPeriodsStandalone=2]="DayPeriodsStandalone",me[me.DaysFormat=3]="DaysFormat",me[me.DaysStandalone=4]="DaysStandalone",me[me.MonthsFormat=5]="MonthsFormat",me[me.MonthsStandalone=6]="MonthsStandalone",me[me.Eras=7]="Eras",me[me.FirstDayOfWeek=8]="FirstDayOfWeek",me[me.WeekendRange=9]="WeekendRange",me[me.DateFormat=10]="DateFormat",me[me.TimeFormat=11]="TimeFormat",me[me.DateTimeFormat=12]="DateTimeFormat",me[me.NumberSymbols=13]="NumberSymbols",me[me.NumberFormats=14]="NumberFormats",me[me.CurrencyCode=15]="CurrencyCode",me[me.CurrencySymbol=16]="CurrencySymbol",me[me.CurrencyName=17]="CurrencyName",me[me.Currencies=18]="Currencies",me[me.Directionality=19]="Directionality",me[me.PluralCase=20]="PluralCase",me[me.ExtraData=21]="ExtraData",me))();const Ks="en-US";let Pg=Ks;function Pl(t){jt(t,"Expected localeId to be defined"),"string"==typeof t&&(Pg=t.toLowerCase().replace(/_/g,"-"))}class rm{}const om="ngComponent";class PT{resolveComponentFactory(e){throw function(t){const e=Error(`No component factory found for ${Le(t)}. Did you add it to @NgModule.entryComponents?`);return e[om]=t,e}(e)}}class Or{}function Js(...t){}function Di(t,e){return new _n(en(t,e))}Or.NULL=new PT;const xT=function(){return Di(pt(),de())};let _n=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=xT,t})();class Zs{}let Ul=(()=>{class t{}return t.\u0275prov=Qe({token:t,providedIn:"root",factory:()=>null}),t})();class Hl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const um=new Hl("12.2.2");class lm{constructor(){}supports(e){return go(e)}create(e){return new HT(e)}}const UT=(t,e)=>e;class HT{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||UT}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const s=!r||n&&n.currentIndex<dm(r,i,o)?n:r,a=dm(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)i++;else{o||(o=[]);const d=a-i,E=l-i;if(d!=E){for(let P=0;P<d;P++){const U=P<o.length?o[P]:o[P]=0,Q=U+P;E<=Q&&Q<d&&(o[P]=U+1)}o[s.previousIndex]=E-d}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!go(e))throw new Error(`Error trying to diff '${Le(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,a),r=!0),n=n._next}else i=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[li()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new jT(n,r),o,i),e}_verifyReinsertion(e,n,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new cm),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new cm),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class jT{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class WT{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class cm{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new WT,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function dm(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class fm{constructor(){}supports(e){return e instanceof Map||_l(e)}create(){return new GT}}class GT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||_l(e)))throw new Error(`Error trying to diff '${Le(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const o=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,n);const o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}const r=new $T(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}}class $T{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function hm(){return new To([new lm])}let To=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||hm()),deps:[[t,new br,new Pn]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new Error(`Cannot find a differ supporting object '${n}' of type '${function(t){return t.name||typeof t}(n)}'`)}}return t.\u0275prov=Qe({token:t,providedIn:"root",factory:hm}),t})();function pm(){return new Ti([new fm])}let Ti=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||pm()),deps:[[t,new br,new Pn]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(r)return r;throw new Error(`Cannot find a differ supporting object '${n}'`)}}return t.\u0275prov=Qe({token:t,providedIn:"root",factory:pm}),t})();function Xs(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(ct(o)),fn(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1].firstChild;null!==d&&Xs(l[1],l,d,r)}const s=n.type;if(8&s)Xs(t,e,n.child,r);else if(32&s){const a=Fu(n,e);let l;for(;l=a();)r.push(l)}else if(16&s){const a=th(e,n);if(Array.isArray(a))r.push(...a);else{const l=ao(e[16]);Xs(l[1],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}class bo{constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,n=e[1];return Xs(n,e,n.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(fn(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Hu(e,r),Dr(n,r))}this._attachedToViewContainer=!1}Kf(this._lView[1],this._lView)}onDestroy(e){!function(t,e,n,r){const i=Fh(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Lh(t).push(r,i.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){ul(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){cl(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){as(!0);try{cl(t,e,n)}finally{as(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(t,e){uo(t,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class zT extends bo{constructor(e){super(e),this._view=e}detectChanges(){xh(this._view)}checkNoChanges(){!function(t){as(!0);try{xh(t)}finally{as(!1)}}(this._view)}get context(){return null}}const XT=[new fm],tb=new To([new lm]),nb=new Ti(XT),ib=function(){return function(t,e){return 4&t.type?new sb(e,t,Di(t,e)):null}(pt(),de())};let Jn=(()=>{class t{}return t.__NG_ELEMENT_ID__=ib,t})();const ob=Jn,sb=class extends ob{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(e){const n=this._declarationTContainer.tViews,r=lo(this._declarationLView,n,e,16,null,n.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(n)),co(n,r,e),new bo(r)}};class Pr{}const cb=function(){return function(t,e){let n;const r=e[t.index];if(fn(r))n=r;else{let i;if(8&t.type)i=ct(r);else{const o=e[11];i=o.createComment("");const s=en(t,e);Rr(o,Ms(o,s),i,function(t,e){return ot(t)?t.nextSibling(e):e.nextSibling}(o,s),!1)}e[t.index]=n=kh(r,e,i,t),Ls(e,n)}return new gm(n,t,e)}(pt(),de())};let jn=(()=>{class t{}return t.__NG_ELEMENT_ID__=cb,t})();const fb=jn,gm=class extends fb{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Di(this._hostTNode,this._hostLView)}get injector(){return new Kr(this._hostTNode,this._hostLView)}get parentInjector(){const e=ms(this._hostTNode,this._hostLView);if(Qd(e)){const n=$r(e,this._hostLView),r=Gr(e);return new Kr(n[1].data[r+8],n)}return new Kr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=mm(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,r){const i=e.createEmbeddedView(n||{});return this.insert(i,r),i}createComponent(e,n,r,i,o){const s=r||this.parentInjector;if(!o&&null==e.ngModule&&s){const l=s.get(Pr,null);l&&(o=l)}const a=e.create(s,i,void 0,o);return this.insert(a.hostView,n),a}insert(e,n){const r=e._lView,i=r[1];if(function(t){return fn(t[3])}(r)){const E=this.indexOf(e);if(-1!==E)this.detach(E);else{const M=r[3],P=new gm(M,M[6],M[3]);P.detach(P.indexOf(e))}}const o=this._adjustIndex(n),s=this._lContainer;!function(t,e,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],_s(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(i,r,s,o);const a=Gu(o,s),l=r[11],d=Ms(l,s[7]);return null!==d&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,uo(t,r,n,1,i,o)}(i,s[6],l,r,d,a),e.attachToViewContainerRef(),_s(jl(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=mm(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Hu(this._lContainer,n);r&&(Dr(jl(this._lContainer),n),Kf(r[1],r))}detach(e){const n=this._adjustIndex(e,-1),r=Hu(this._lContainer,n);return r&&null!=Dr(jl(this._lContainer),n)?new bo(r):null}_adjustIndex(e,n=0){return null==e?this.length+n:e}};function mm(t){return t[8]}function jl(t){return t[8]||(t[8]=[])}const Ri={};class Lm extends Or{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Ot(e);return new Bm(n,this.ngModule)}}function Vm(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const uw=new Je("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Vf});class Bm extends rm{constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function(t){return t.map(qE).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return Vm(this.componentDef.inputs)}get outputs(){return Vm(this.componentDef.outputs)}create(e,n,r,i){const o=(i=i||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Ri,i);return o!==Ri||r===Ri?o:e.get(n,r,i)}}}(e,i.injector):e,s=o.get(Zs,Pd),a=o.get(Ul,null),l=s.createRenderer(null,this.componentDef),d=this.componentDef.selectors[0][0]||"div",E=r?function(t,e,n){if(ot(t))return t.selectRootElement(e,n===ht.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(l,r,this.componentDef.encapsulation):Uu(s.createRenderer(null,this.componentDef),d,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(d)),M=this.componentDef.onPush?576:528,P=function(t,e){return{components:[],scheduler:t||Vf,clean:N0,playerHandler:e||null,flags:0}}(),U=Fs(0,null,null,1,0,null,null,null,null,null),Q=lo(null,U,P,M,null,null,s,l,a,o);let te,J;us(Q);try{const fe=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const l=ri(s,20,2,"#host",null),d=l.mergedAttrs=e.hostAttrs;null!==d&&(Vs(l,d,!0),null!==t&&(hs(i,t,d),null!==l.classes&&Ku(i,t,l.classes),null!==l.styles&&ih(i,t,l.styles)));const E=r.createRenderer(t,e),M=lo(n,Dh(e),null,e.onPush?64:16,n[20],l,r,E,o||null,null);return s.firstCreatePass&&(ys(zi(l,n),s,e.type),Oh(s,l),Ph(l,n.length,1)),Ls(n,M),n[20]=M}(E,this.componentDef,Q,s,l);if(E)if(r)hs(l,E,["ng-version",um.full]);else{const{attrs:oe,classes:Ee}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!pn(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);oe&&hs(l,E,oe),Ee&&Ee.length>0&&Ku(l,E,Ee.join(" "))}if(J=tu(U,20),void 0!==n){const oe=J.projection=[];for(let Ee=0;Ee<this.ngContentSelectors.length;Ee++){const Te=n[Ee];oe.push(null!=Te?Array.from(Te):null)}}te=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=pt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Nh(t,r,e,ii(t,e,1,null),n));const i=Qi(e,t,r.directiveStart,r);wt(i,e);const o=en(r,e);return o&&wt(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(l=>l(s,e)),e.contentQueries){const l=pt();e.contentQueries(1,s,l.directiveStart)}const a=pt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(or(a.index),Mh(n[1],a,0,a.directiveStart,a.directiveEnd,e),Ah(e,s)),s}(fe,this.componentDef,Q,P,[oI]),co(U,Q,null)}finally{ls()}return new dw(this.componentType,te,Di(J,Q),Q,J)}}class dw extends class{}{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=n,this.hostView=this.changeDetectorRef=new zT(i),this.componentType=e}get injector(){return new Kr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const Mi=new Map;class pw extends Pr{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Lm(this);const r=Jt(e),i=function(t){return t[dC]||null}(e);i&&Pl(i),this._bootstrapComponents=xn(r.bootstrap),this._r3Injector=Wh(e,n,[{provide:Pr,useValue:this},{provide:Or,useValue:this.componentFactoryResolver}],Le(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,n=qe.THROW_IF_NOT_FOUND,r=we.Default){return e===qe||e===Pr||e===si?this:this._r3Injector.get(e,n,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class tc extends class{}{constructor(e){super(),this.moduleType=e,null!==Jt(e)&&function(t){const e=new Set;!function n(r){const i=Jt(r,!0),o=i.id;null!==o&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${Le(e)} vs ${Le(e.name)}`)}(o,Mi.get(o),r),Mi.set(o,r));const s=xn(i.imports);for(const a of s)e.has(a)||(e.add(a),n(a))}(t)}(e)}create(e){return new pw(this.moduleType,e)}}function nc(t){return e=>{setTimeout(t,void 0,e)}}const Zn=class extends ee{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){var i,o,s;let a=e,l=n||(()=>null),d=r;if(e&&"object"==typeof e){const M=e;a=null===(i=M.next)||void 0===i?void 0:i.bind(M),l=null===(o=M.error)||void 0===o?void 0:o.bind(M),d=null===(s=M.complete)||void 0===s?void 0:s.bind(M)}this.__isAsync&&(l=nc(l),a&&(a=nc(a)),d&&(d=nc(d)));const E=super.subscribe({next:a,error:l,complete:d});return e instanceof p&&e.add(E),E}};Symbol;const ua=new Je("Application Initializer");let Oi=(()=>{class t{constructor(n){this.appInits=n,this.resolve=Js,this.reject=Js,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(Sl(o))n.push(o);else if(Fp(o)){const s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});n.push(s)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(He(ua,8))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})();const Lo=new Je("AppId"),CS={provide:Lo,useFactory:function(){return`${hc()}${hc()}${hc()}`},deps:[]};function hc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const gy=new Je("Platform Initializer"),pc=new Je("Platform ID"),_S=new Je("appBootstrapListener");let gc=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})();const dr=new Je("LocaleId"),my=new Je("DefaultCurrencyCode");class IS{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}const mc=function(t){return new tc(t)},DS=mc,TS=function(t){return Promise.resolve(mc(t))},yy=function(t){const e=mc(t),r=xn(Jt(t).declarations).reduce((i,o)=>{const s=Ot(o);return s&&i.push(new Bm(s)),i},[]);return new IS(e,r)},bS=yy,wS=function(t){return Promise.resolve(yy(t))};let ca=(()=>{class t{constructor(){this.compileModuleSync=DS,this.compileModuleAsync=TS,this.compileModuleAndAllComponentsSync=bS,this.compileModuleAndAllComponentsAsync=wS}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})();const MS=(()=>Promise.resolve(0))();function yc(t){"undefined"==typeof Zone?MS.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Dt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Zn(!1),this.onMicrotaskEmpty=new Zn(!1),this.onStable=new Zn(!1),this.onError=new Zn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function(){let t=Ke.requestAnimationFrame,e=Ke.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Ke,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Cc(t),t.isCheckStableRunning=!0,vc(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Cc(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return vy(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),Cy(t)}},onInvoke:(n,r,i,o,s,a,l)=>{try{return vy(t),n.invoke(i,o,s,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),Cy(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,Cc(t),vc(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Dt.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Dt.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,OS,Js,Js);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const OS={};function vc(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Cc(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function vy(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Cy(t){t._nesting--,vc(t)}class kS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Zn,this.onMicrotaskEmpty=new Zn,this.onStable=new Zn,this.onError=new Zn}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}let _c=(()=>{class t{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Dt.assertNotInAngularZone(),yc(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())yc(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,r,i){return[]}}return t.\u0275fac=function(n){return new(n||t)(He(Dt))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})(),_y=(()=>{class t{constructor(){this._applications=new Map,Ec.addToWindow(this)}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Ec.findTestabilityInTree(this,n,r)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})();class xS{addToWindow(e){}findTestabilityInTree(e,n,r){return null}}let Ec=new xS,Ey=!0,Iy=!1;let Dn;const Ty=new Je("AllowMultipleToken");function by(t,e,n=[]){const r=`Platform: ${e}`,i=new Je(r);return(o=[])=>{let s=wy();if(!s||s.injector.get(Ty,!1))if(t)t(n.concat(o).concat({provide:i,useValue:!0}));else{const a=n.concat(o).concat({provide:i,useValue:!0},{provide:fo,useValue:"platform"});!function(t){if(Dn&&!Dn.destroyed&&!Dn.injector.get(Ty,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Dn=t.get(Sy);const e=t.get(gy,null);e&&e.forEach(n=>n())}(qe.create({providers:a,name:r}))}return function(t){const e=wy();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function wy(){return Dn&&!Dn.destroyed?Dn:null}let Sy=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const a=function(t,e){let n;return n="noop"===t?new kS:("zone.js"===t?void 0:t)||new Dt({enableLongStackTrace:(Iy=!0,Ey),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),l=[{provide:Dt,useValue:a}];return a.run(()=>{const d=qe.create({providers:l,parent:this.injector,name:n.moduleType.name}),E=n.create(d),M=E.injector.get(Sr,null);if(!M)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return a.runOutsideAngular(()=>{const P=a.onError.subscribe({next:U=>{M.handleError(U)}});E.onDestroy(()=>{Ic(this._modules,E),P.unsubscribe()})}),function(t,e,n){try{const r=n();return Sl(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(M,a,()=>{const P=E.injector.get(Oi);return P.runInitializers(),P.donePromise.then(()=>(Pl(E.injector.get(dr,Ks)||Ks),this._moduleDoBootstrap(E),E))})})}bootstrapModule(n,r=[]){const i=Ry({},r);return function(t,e,n){const r=new tc(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(Vo);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new Error(`The module ${Le(n.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(He(qe))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})();function Ry(t,e){return Array.isArray(e)?e.reduce(Ry,t):Object.assign(Object.assign({},t),e)}let Vo=(()=>{class t{constructor(n,r,i,o,s){this._zone=n,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=o,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new L(d=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{d.next(this._stable),d.complete()})}),l=new L(d=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{Dt.assertNotInAngularZone(),yc(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,d.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{Dt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{d.next(!1)}))});return()=>{E.unsubscribe(),M.unsubscribe()}});this.isStable=function(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return ue(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof L?t[0]:Uv(e)(hd(t,n))}(a,l.pipe(t=>pd()(function(t,e){return function(r){let i;i="function"==typeof t?t:function(){return t};const o=Object.create(r,$v);return o.source=r,o.subjectFactory=i,o}}(Yv)(t))))}bootstrap(n,r){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let i;i=n instanceof rm?n:this._componentFactoryResolver.resolveComponentFactory(n),this.componentTypes.push(i.componentType);const o=function(t){return t.isBoundToModule}(i)?void 0:this._injector.get(Pr),a=i.create(qe.NULL,[],r||i.selector,o),l=a.location.nativeElement,d=a.injector.get(_c,null),E=d&&a.injector.get(_y);return d&&E&&E.registerApplication(l,d),a.onDestroy(()=>{this.detachView(a.hostView),Ic(this.components,a),E&&E.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Ic(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(_S,[]).concat(this._bootstrapListeners).forEach(i=>i(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(n){return new(n||t)(He(Dt),He(qe),He(Sr),He(Or),He(Oi))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})();function Ic(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const uR=by(null,"core",[{provide:pc,useValue:"unknown"},{provide:Sy,deps:[qe]},{provide:_y,deps:[]},{provide:gc,deps:[]}]),hR=[{provide:Vo,useClass:Vo,deps:[Dt,qe,Sr,Or,Oi]},{provide:uw,deps:[Dt],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(n){e.push(n)}}},{provide:Oi,useClass:Oi,deps:[[new Pn,ua]]},{provide:ca,useClass:ca,deps:[]},CS,{provide:To,useFactory:function(){return tb},deps:[]},{provide:Ti,useFactory:function(){return nb},deps:[]},{provide:dr,useFactory:function(t){return Pl(t=t||"undefined"!=typeof $localize&&$localize.locale||Ks),t},deps:[[new to(dr),new Pn,new br]]},{provide:my,useValue:"USD"}];let gR=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(He(Vo))},t.\u0275mod=Ui({type:t}),t.\u0275inj=mr({providers:hR}),t})(),_a=null;function Wo(){return _a}const Tt=new Je("DocumentToken");var dt=(()=>((dt=dt||{})[dt.Zero=0]="Zero",dt[dt.One=1]="One",dt[dt.Two=2]="Two",dt[dt.Few=3]="Few",dt[dt.Many=4]="Many",dt[dt.Other=5]="Other",dt))();const DM=function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Og(e);if(n)return n;const r=e.split("-")[0];if(n=Og(r),n)return n;if("en"===r)return OD;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[me.PluralCase]};class Aa{}let ZM=(()=>{class t extends Aa{constructor(n){super(),this.locale=n}getPluralCategory(n,r){switch(DM(r||this.locale)(n)){case dt.Zero:return"zero";case dt.One:return"one";case dt.Two:return"two";case dt.Few:return"few";case dt.Many:return"many";default:return"other"}}}return t.\u0275fac=function(n){return new(n||t)(He(dr))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})(),hv=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new oA,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){pv("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){pv("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)(Ue(jn),Ue(Jn))},t.\u0275dir=Yt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class oA{constructor(){this.$implicit=null,this.ngIf=null}}function pv(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Le(e)}'.`)}let OA=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Ui({type:t}),t.\u0275inj=mr({providers:[{provide:Aa,useClass:ZM}]}),t})();class qc extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(t){_a||(_a=t)}(new qc)}onAndCancel(e,n,r){return e.addEventListener(n,r,!1),()=>{e.removeEventListener(n,r,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=(Ko=Ko||document.querySelector("base"),Ko?Ko.getAttribute("href"):null);return null==n?null:function(t){Oa=Oa||document.createElement("a"),Oa.setAttribute("href",t);const e=Oa.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Ko=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Oa,Ko=null;const Cv=new Je("TRANSITION_ID"),HA=[{provide:ua,useFactory:function(t,e,n){return()=>{n.get(Oi).donePromise.then(()=>{const r=Wo(),i=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[Cv,Tt,qe],multi:!0}];class Yc{static init(){!function(t){Ec=t}(new Yc)}addToWindow(e){Ke.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},Ke.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ke.getAllAngularRootElements=()=>e.getAllRootElements(),Ke.frameworkStabilizers||(Ke.frameworkStabilizers=[]),Ke.frameworkStabilizers.push(r=>{const i=Ke.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(l){s=s||l,o--,0==o&&r(s)};i.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,n,r){if(null==n)return null;const i=e.getTestability(n);return null!=i?i:r?Wo().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null}}let jA=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})();const zo=new Je("EventManagerPlugins");let Na=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>i.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const s=i[o];if(s.supports(n))return this._eventNameToPlugin.set(n,s),s}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(He(zo),He(Dt))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})();class Jc{constructor(e){this._doc=e}addGlobalEventListener(e,n,r){const i=Wo().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let Ev=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})(),Qo=(()=>{class t extends Ev{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,i){n.forEach(o=>{const s=this._doc.createElement("style");s.textContent=o,i.push(r.appendChild(s))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(Iv),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(n,i,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(Iv))}}return t.\u0275fac=function(n){return new(n||t)(He(Tt))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})();function Iv(t){Wo().remove(t)}const Zc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Xc=/%COMP%/g;function ka(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?ka(t,i,n):(i=i.replace(Xc,t),n.push(i))}return n}function bv(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let ed=(()=>{class t{constructor(n,r,i){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new td(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case ht.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new r1(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(n),i}case 1:case ht.ShadowDom:return new i1(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const i=ka(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(He(Na),He(Qo),He(Lo))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})();class td{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,n){return n?document.createElementNS(Zc[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){e.appendChild(n)}insertBefore(e,n,r){e&&e.insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=Zc[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=Zc[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(zt.DashCase|zt.Important)?e.style.setProperty(n,r,i&zt.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&zt.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,bv(r)):this.eventManager.addEventListener(e,n,bv(r))}}class r1 extends td{constructor(e,n,r,i){super(e),this.component=r;const o=ka(i+"-"+r.id,r.styles,[]);n.addStyles(o),this.contentAttr=function(t){return"_ngcontent-%COMP%".replace(Xc,t)}(i+"-"+r.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(Xc,t)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class i1 extends td{constructor(e,n,r,i){super(e),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=ka(i.id,i.styles,[]);for(let s=0;s<o.length;s++){const a=document.createElement("style");a.textContent=o[s],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let o1=(()=>{class t extends Jc{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return t.\u0275fac=function(n){return new(n||t)(He(Tt))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})();const Rv=["alt","control","meta","shift"],f1={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Mv={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},h1={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let p1=(()=>{class t extends Jc{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const o=t.parseEventName(r),s=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Wo().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=t._normalizeKey(r.pop());let s="";if(Rv.forEach(l=>{const d=r.indexOf(l);d>-1&&(r.splice(d,1),s+=l+".")}),s+=o,0!=r.length||0===o.length)return null;const a={};return a.domEventName=i,a.fullKey=s,a}static getEventFullKey(n){let r="",i=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Mv.hasOwnProperty(e)&&(e=Mv[e]))}return f1[e]||e}(n);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Rv.forEach(o=>{o!=i&&h1[o](n)&&(r+=o+".")}),r+=i,r}static eventCallback(n,r,i){return o=>{t.getEventFullKey(o)===n&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){switch(n){case"esc":return"escape";default:return n}}}return t.\u0275fac=function(n){return new(n||t)(He(Tt))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac}),t})();const I1=by(uR,"browser",[{provide:pc,useValue:"browser"},{provide:gy,useValue:function(){qc.makeCurrent(),Yc.init()},multi:!0},{provide:Tt,useFactory:function(){return function(t){Xa=t}(document),document},deps:[]}]),D1=[[],{provide:fo,useValue:"root"},{provide:Sr,useFactory:function(){return new Sr},deps:[]},{provide:zo,useClass:o1,multi:!0,deps:[Tt,Dt,pc]},{provide:zo,useClass:p1,multi:!0,deps:[Tt]},[],{provide:ed,useClass:ed,deps:[Na,Qo,Lo]},{provide:Zs,useExisting:ed},{provide:Ev,useExisting:Qo},{provide:Qo,useClass:Qo,deps:[Tt]},{provide:_c,useClass:_c,deps:[Dt]},{provide:Na,useClass:Na,deps:[zo,Dt]},{provide:class{},useClass:jA,deps:[]},[]];let T1=(()=>{class t{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:t,providers:[{provide:Lo,useValue:n.appId},{provide:Cv,useExisting:Lo},HA]}}}return t.\u0275fac=function(n){return new(n||t)(He(t,12))},t.\u0275mod=Ui({type:t}),t.\u0275inj=mr({providers:D1,imports:[OA,gR]}),t})();function Ov(t,e,n,r,i,o,s){try{var a=t[o](s),l=a.value}catch(d){return void n(d)}a.done?e(l):Promise.resolve(l).then(r,i)}function xa(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function s(l){Ov(o,r,i,s,a,"next",l)}function a(l){Ov(o,r,i,s,a,"throw",l)}s(void 0)})}}"undefined"!=typeof window&&window;var P1=c(5436);class sd{constructor(){this.middlewares={}}static getInstance(){return this._instance||(this._instance=new sd),this._instance}subscribe(e,n){this.middlewares[e]=n}create(){return console.log("[CustomStore][create]"),window.WebChat.createStore({},({dispatch:n})=>r=>i=>{let o=i;if(i&&i.payload)for(const s of Object.keys(this.middlewares)){const a=this.middlewares[s];if(a.applicable(o)){const l=a.apply(o);l.dispatchAction&&n(l.dispatchAction),l.nextAction&&(o=l.nextAction)}}return r(o)})}}var ki=c(8139);const Pv=t=>{if(t){const e=t.split(/\s/).reduce((n,r)=>n+r.slice(0,1),"");return e.length>1?e.substring(0,2).toUpperCase():t.substring(0,2).toUpperCase()}return""};class F1{constructor(e){this.dataMaskingRules=e,console.log("[DataMaskingRules]"),console.log(this.dataMaskingRules)}applicable(e){const{text:n}=e.payload;return!!(Object.keys(this.dataMaskingRules).length>0&&n&&"WEB_CHAT/SEND_MESSAGE"===e.type)}apply(e){return{dispatchAction:null,nextAction:this.applyDataMasking(e)}}applyDataMasking(e){let{text:r}=e.payload;if(Object.keys(this.dataMaskingRules).length>0)for(const i of Object.values(this.dataMaskingRules)){const o=new RegExp(i,"g");let s;for(;s=o.exec(r);){const a=s[0].replace(/./g,"#");r=r.replace(s[0],a)}}return e.payload.text=r,e}}const Fa_omnichannelConfig_orgId="d367c413-e0b9-408b-ae1c-382499b369ae",Fa_omnichannelConfig_orgUrl="https://omnichannel-crm.omnichannelengagementhub.com",Fa_omnichannelConfig_widgetId="3a352b95-5d67-4e47-af28-eca029b03928";function La(t,e){return new L(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const l=Ge(t[a]);let d=!1;n.add(l.subscribe({next:E=>{d||(d=!0,s++),i[a]=E},error:E=>n.error(E),complete:()=>{o++,(o===r||!d)&&(s===r&&n.next(e?e.reduce((E,M,P)=>(E[M]=i[P],E),{}):i),n.complete())}}))}})}class j1 extends p{constructor(e,n){super()}schedule(e,n=0){return this}}class W1 extends j1{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){if(this.closed)return this;this.state=e;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(i,this.id,n),this}requestAsyncId(e,n,r=0){return setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!==r&&this.delay===r&&!1===this.pending)return n;clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=!!o&&o||new Error(o)}if(r)return this.unsubscribe(),i}_unsubscribe(){const e=this.id,n=this.scheduler,r=n.actions,i=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&r.splice(i,1),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null}}let Nv=(()=>{class t{constructor(n,r=t.now){this.SchedulerAction=n,this.now=r}schedule(n,r=0,i){return new this.SchedulerAction(this,n).schedule(i,r)}}return t.now=()=>Date.now(),t})();class pr extends Nv{constructor(e,n=Nv.now){super(e,()=>pr.delegate&&pr.delegate!==this?pr.delegate.now():n()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,n=0,r){return pr.delegate&&pr.delegate!==this?pr.delegate.schedule(e,n,r):super.schedule(e,n,r)}flush(e){const{actions:n}=this;if(this.active)return void n.push(e);let r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this.active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const K1=new class extends pr{}(class extends W1{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!==r&&r>0||null===r&&this.delay>0?super.requestAsyncId(e,n,r):e.flush(this)}}),z1=new L(t=>t.complete());class ln{constructor(e,n,r){this.kind=e,this.value=n,this.error=r,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,n,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return n&&n(this.error);case"C":return r&&r()}}accept(e,n,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,n,r)}toObservable(){switch(this.kind){case"N":return function(...t){let e=t[t.length-1];return ue(e)?(t.pop(),he(t,e)):hd(t)}(this.value);case"E":return function(t,e){return new L(n=>n.error(t))}(this.error);case"C":return function(t){return t?function(t){return new L(e=>t.schedule(()=>e.complete()))}(t):z1}()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new ln("N",e):ln.undefinedValueNotification}static createError(e){return new ln("E",void 0,e)}static createComplete(){return ln.completeNotification}}ln.completeNotification=new ln("C"),ln.undefinedValueNotification=new ln("N",void 0);class Va extends m{constructor(e,n,r=0){super(e),this.scheduler=n,this.delay=r}static dispatch(e){const{notification:n,destination:r}=e;n.observe(r),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(Va.dispatch,this.delay,new eO(e,this.destination)))}_next(e){this.scheduleMessage(ln.createNext(e))}_error(e){this.scheduleMessage(ln.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(ln.createComplete()),this.unsubscribe()}}class eO{constructor(e,n){this.notification=e,this.destination=n}}class kv extends ee{constructor(e=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const n=this._events;n.push(e),n.length>this._bufferSize&&n.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new tO(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;let s;if(this.closed)throw new $;if(this.isStopped||this.hasError?s=p.EMPTY:(this.observers.push(e),s=new ae(this,e)),i&&e.add(e=new Va(e,i)),n)for(let a=0;a<o&&!e.closed;a++)e.next(r[a]);else for(let a=0;a<o&&!e.closed;a++)e.next(r[a].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),s}_getNow(){return(this.scheduler||K1).now()}_trimBufferThenGetEvents(){const e=this._getNow(),n=this._bufferSize,r=this._windowTime,i=this._events,o=i.length;let s=0;for(;s<o&&!(e-i[s].time<r);)s++;return o>n&&(s=Math.max(s,o-n)),s>0&&i.splice(0,s),i}}class tO{constructor(e,n){this.time=e,this.value=n}}let nO=(()=>{class t{constructor(n){this.document=n,this._loadedLibraries={}}lazyLoad(){return function(...t){if(1===t.length){const e=t[0];if(y(e))return La(e,null);if(C(e)&&Object.getPrototypeOf(e)===Object.prototype){const n=Object.keys(e);return La(n.map(r=>e[r]),n)}}if("function"==typeof t[t.length-1]){const e=t.pop();return La(t=1===t.length&&y(t[0])?t[0]:t,null).pipe(Z(n=>e(...n)))}return La(t,null)}([this.loadScript("https://cdn.botframework.com/botframework-webchat/4.9.2/webchat.js")])}loadScript(n){if(this._loadedLibraries[n])return this._loadedLibraries[n].asObservable();this._loadedLibraries[n]=new kv;const r=this.document.createElement("script");return r.type="text/javascript",r.async=!0,r.src=n,r.onload=()=>{this._loadedLibraries[n].next(),this._loadedLibraries[n].complete()},this.document.body.appendChild(r),this._loadedLibraries[n].asObservable()}loadStyle(n){if(this._loadedLibraries[n])return this._loadedLibraries[n].asObservable();this._loadedLibraries[n]=new kv;const r=this.document.createElement("link");return r.type="text/css",r.href=n,r.rel="stylesheet",r.onload=()=>{this._loadedLibraries[n].next(),this._loadedLibraries[n].complete()},document.getElementsByTagName("head")[0].appendChild(r),this._loadedLibraries[n].asObservable()}}return t.\u0275fac=function(n){return new(n||t)(He(Tt))},t.\u0275prov=Qe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function rO(t,e){1&t&&(Vn(0,"div",8),Vn(1,"span",9),Co(2," \u{1f440} "),Bn(),Bn())}function iO(t,e){if(1&t){const n=wl();Vn(0,"div",3),Vn(1,"div",4),Co(2,"LiveChat with Omnichannel Chat SDK "),Vn(3,"span",5),Ws("click",function(){return iu(n),Gs().endChat()}),Co(4," \u274c "),Bn(),Bn(),Hs(5,rO,3,0,"div",6),function(t,e,n,r){Vn(t,e,n,r),Bn()}(6,"div",7),Bn()}if(2&t){const n=Gs();Ps(5),yo("ngIf",n.loading)}}function oO(t,e){if(1&t){const n=wl();Vn(0,"div",10),Ws("click",function(){return iu(n),Gs().startChat()}),Vn(1,"span"),Co(2," \u{1f44b} "),Bn(),Bn()}}const xv=(()=>{const t={orgId:Fa_omnichannelConfig_orgId||"",orgUrl:Fa_omnichannelConfig_orgUrl||"",widgetId:Fa_omnichannelConfig_widgetId||""},e=new URLSearchParams(window.location.search);return null!==e.get("orgUrl")&&(t.orgUrl=e.get("orgUrl")),null!==e.get("orgId")&&(t.orgId=e.get("orgId")),null!==e.get("widgetId")&&(t.widgetId=e.get("widgetId")),t})(),Fv=(()=>{const t={telemetry:{disable:!0,ariaTelemetryKey:""}},e=new URLSearchParams(window.location.search);return null!==e.get("telemetry")&&(t.telemetry.disable="true"!=e.get("telemetry")),null!==e.get("ariaTelemetryKey")&&(t.telemetry.ariaTelemetryKey=e.get("ariaTelemetryKey")||""),t})(),Lv=(()=>{const t={disable:!0},e=new URLSearchParams(window.location.search);return null!==e.get("debug")&&(t.disable="true"!=e.get("debug")),t})();console.log("%c [OmnichannelConfig]","background-color:#001433;color:#fff"),console.log(xv),console.log("%c [debugConfig]","background-color:#001433;color:#fff"),console.log(Lv),console.log("%c [telemetryConfig]","background-color:#001433;color:#fff"),console.log(Fv);const sO=(console.log("[createAvatarMiddleware]"),()=>e=>n=>{console.log("[AvatarMiddleware]");const{activity:{channelData:{tags:r},from:{name:i},text:o},fromUser:s}=n;return console.log(n),r&&r.includes("system")?(console.log(`[AvatarMiddleware][Message][System] ${o}`),ki.createElement("div",null,"\u2757")):null!=s&&(s?s?(console.log(`[AvatarMiddleware][Message][Customer] ${o}`),ki.createElement("div",{className:"webchat__avatar"},ki.createElement("p",{className:"webchat__avatar_initials"}," ",Pv(i)||"CU","  "))):e(n):(console.log(`[AvatarMiddleware][Message][Agent] ${o}`),ki.createElement("div",{className:"webchat__avatar"},ki.createElement("p",{className:"webchat__avatar_initials"}," ",Pv(i)," "))))}),aO=(console.log("[createActivityMiddleware]"),()=>e=>n=>{if(console.log("%c [ActivityMiddleware]","background: #2a9fd4; color: #fff"),console.log(n),n.activity){if(n.activity.channelData&&n.activity.channelData.tags&&n.activity.channelData.tags.includes("system"))return console.log(`%c [ActivityMiddleware][Message][System] ${n.activity.text}`,"background: #2a9fd4; color: #fff"),r=>ki.createElement("div",{key:n.activity.id,className:"system-message"},e(n)(r));if(void 0===n.activity.text||null==n.activity.text)return e(n);"bot"===n.activity.from.role&&console.log(`%c [ActivityMiddleware][Message][Agent] ${n.activity.text}`,"background: #2a9fd4; color: #fff"),"user"===n.activity.from.role&&console.log(`%c [ActivityMiddleware][Message][Customer] ${n.activity.text}`,"background: #2a9fd4; color: #fff")}return e(n)}),uO={bubbleBorderRadius:10,bubbleNubSize:10,bubbleNubOffset:15,bubbleFromUserBorderRadius:10,bubbleFromUserNubSize:10,bubbleFromUserNubOffset:15,bubbleFromUserBackground:"rgb(246, 246, 246)"};let lO=(()=>{class t{constructor(n,r){this.webChatControlService=n,this.document=r,this.title="angular-botframework-webchat-control",this.webChat=null,this.chatSDK=null,this.chatAdapter=null,this.loading=!1,this.hasChatStarted=!1,this.webChatStore=null}ngOnInit(){var n=this;return xa(function*(){console.log("[ngOnInit]"),n.webChatControlService.lazyLoad().subscribe(function(){var r=xa(function*(i){n.webChat=window.WebChat;const o=Object.assign({},Fv),s=new P1.Mg(xv,o);s.setDebug(!Lv.disable),yield s.initialize(),n.chatSDK=s,n.webChat=window.WebChat;const a=localStorage.getItem("liveChatContext");a&&Object.keys(JSON.parse(a)).length>0&&(console.log("[liveChatContext]"),console.log(a))});return function(i){return r.apply(this,arguments)}}())})()}startChat(){var n=this;return xa(function*(){var r,i,o,s;console.log("[startChat]");const a=yield null===(r=n.chatSDK)||void 0===r?void 0:r.getDataMaskingRules();console.log(a);const l=(console.log("[createCustomStore]"),sd.getInstance());n.webChatStore=l.create(),l.subscribe("DataMasking",(t=>(console.log("[createDataMaskingMiddleware]"),new F1(t)))(a));const d={},E=localStorage.getItem("liveChatContext");E&&Object.keys(JSON.parse(E)).length>0&&(console.log("[liveChatContext]"),d.liveChatContext=JSON.parse(E)),n.hasChatStarted=!0,n.loading=!0,yield null===(i=n.chatSDK)||void 0===i?void 0:i.startChat(d);const M=yield null===(o=n.chatSDK)||void 0===o?void 0:o.getCurrentLiveChatContext();M&&Object.keys(M).length&&localStorage.setItem("liveChatContext",JSON.stringify(M));const P=yield null===(s=n.chatSDK)||void 0===s?void 0:s.createChatAdapter();n.chatAdapter=P,n.loading=!1,n.webChat.renderWebChat({directLine:P,sendTypingIndicator:!0,styleOptions:uO,store:n.webChatStore,avatarMiddleware:sO,activityMiddleware:aO},n.document.getElementById("chat-container"))})()}endChat(){var n=this;return xa(function*(){var r;console.log("[endChat]"),yield null===(r=n.chatSDK)||void 0===r?void 0:r.endChat(),n.hasChatStarted=!1;const i=n.document.getElementById("chat-container");for(;i.firstChild;)i.firstChild.remove()})()}}return t.\u0275fac=function(n){return new(n||t)(Ue(nO),Ue(Tt))},t.\u0275cmp=za({type:t,selectors:[["app-root"]],decls:3,vars:2,consts:[["id","root"],["id","chat-root",4,"ngIf"],["id","chat-button",3,"click",4,"ngIf"],["id","chat-root"],[1,"chat-header"],[3,"click"],["id","loading-screen",4,"ngIf"],["id","chat-container"],["id","loading-screen"],["id","loader"],["id","chat-button",3,"click"]],template:function(n,r){1&n&&(Vn(0,"div",0),Hs(1,iO,7,1,"div",1),Hs(2,oO,3,0,"div",2),Bn()),2&n&&(Ps(1),yo("ngIf",r.hasChatStarted),Ps(1),yo("ngIf",!r.hasChatStarted&&!r.loading))},directives:[hv],styles:['body[_ngcontent-%COMP%]{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}code[_ngcontent-%COMP%]{font-family:source-code-pro,Menlo,Monaco,Consolas,"Courier New",monospace}#chat-root[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:400px;max-width:400px;min-height:600px;max-height:600px;width:400px;height:600px;position:fixed;right:0;bottom:0;border-radius:4px;margin:0 20px 60px 0;box-shadow:0 0 15px 2px #161b224d;font-family:"Segoe UI",Arial,sans-serif}#chat-container[_ngcontent-%COMP%]{width:100%;height:100%}.chat-header[_ngcontent-%COMP%]{border-bottom:#E6E6E6 solid 1px;padding:10px;display:flex;justify-content:space-between;cursor:pointer}#loading-screen[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:400px;max-width:400px;min-height:600px;max-height:600px;width:400px;height:600px;position:fixed;right:0;bottom:0;border-radius:4px;margin:0 20px 60px 0;box-shadow:0 0 15px 2px #161b224d;align-items:center;justify-content:center}@keyframes spin{to{transform:rotate(360deg)}}#loader[_ngcontent-%COMP%]{font-size:120px;animation:spin 2s linear infinite}#chat-button[_ngcontent-%COMP%]{position:fixed;right:0;bottom:0;border-radius:32px;background-color:#0078d4;box-shadow:0 0 5px 2px #0078d4;padding:10px;margin:0 20px 20px 0;color:#fff;font-size:32px;cursor:pointer}#chat-button[_ngcontent-%COMP%]:hover{box-shadow:0 0 20px 2px #0078d4;transition:all 2s}']}),t})(),cO=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Ui({type:t,bootstrap:[lO]}),t.\u0275inj=mr({providers:[],imports:[[T1]]}),t})();(function(){if(Iy)throw new Error("Cannot enable prod mode after platform setup.");Ey=!1})(),I1().bootstrapModule(cO).catch(t=>console.error(t))},1052:G=>{function g(u,I,v,_,T,y,C){try{var f=u[y](C),h=f.value}catch(p){return void v(p)}f.done?I(h):Promise.resolve(h).then(_,T)}G.exports=function(u){return function(){var I=this,v=arguments;return new Promise(function(_,T){var y=u.apply(I,v);function C(h){g(y,_,T,C,f,"next",h)}function f(h){g(y,_,T,C,f,"throw",h)}C(void 0)})}},G.exports.default=G.exports,G.exports.__esModule=!0},5725:G=>{G.exports=function(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")},G.exports.default=G.exports,G.exports.__esModule=!0},3560:G=>{function g(u,I){for(var v=0;v<I.length;v++){var _=I[v];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(u,_.key,_)}}G.exports=function(u,I,v){return I&&g(u.prototype,I),v&&g(u,v),u},G.exports.default=G.exports,G.exports.__esModule=!0},3837:G=>{G.exports=function(c,u,I){return u in c?Object.defineProperty(c,u,{value:I,enumerable:!0,configurable:!0,writable:!0}):c[u]=I,c},G.exports.default=G.exports,G.exports.__esModule=!0},1948:G=>{G.exports=function(c){return c&&c.__esModule?c:{default:c}},G.exports.default=G.exports,G.exports.__esModule=!0},4321:G=>{function g(c){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(G.exports=g=function(I){return typeof I},G.exports.default=G.exports,G.exports.__esModule=!0):(G.exports=g=function(I){return I&&"function"==typeof Symbol&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},G.exports.default=G.exports,G.exports.__esModule=!0),g(c)}G.exports=g,G.exports.default=G.exports,G.exports.__esModule=!0},8774:(G,g,c)=>{G.exports=c(7941)},1528:G=>{"use strict";G.exports={i8:"0.2.0"}},8464:G=>{"use strict";G.exports=JSON.parse('{"i8":"0.2.1-main.82a64df"}')},5233:G=>{"use strict";G.exports={i8:"0.1.1"}}},G=>{G(G.s=5618)}]);