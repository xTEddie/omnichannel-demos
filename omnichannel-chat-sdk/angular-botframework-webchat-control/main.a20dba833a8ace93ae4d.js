(self.webpackChunkangular_botframework_webchat_control=self.webpackChunkangular_botframework_webchat_control||[]).push([[179],{8255:K=>{function u(c){return Promise.resolve().then(()=>{var s=new Error("Cannot find module '"+c+"'");throw s.code="MODULE_NOT_FOUND",s})}u.keys=()=>[],u.resolve=u,u.id=8255,K.exports=u},4637:(K,u,c)=>{"use strict";c.d(u,{_:()=>l});var s=c(4762),E=new WeakMap,d=new WeakMap,p=function(){function P(){this.onabort=null,E.set(this,[]),d.set(this,!1)}return Object.defineProperty(P.prototype,"aborted",{get:function(){if(!d.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");return d.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(P,"none",{get:function(){return new P},enumerable:!1,configurable:!0}),P.prototype.addEventListener=function(w,f){if(!E.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");E.get(this).push(f)},P.prototype.removeEventListener=function(w,f){if(!E.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");var g=E.get(this),_=g.indexOf(f);_>-1&&g.splice(_,1)},P.prototype.dispatchEvent=function(w){throw new Error("This is a stub dispatchEvent implementation that should not be used.  It only exists for type-checking purposes.")},P}();function T(P){if(!P.aborted){P.onabort&&P.onabort.call(P);var w=E.get(P);w&&w.slice().forEach(function(f){f.call(P,{type:"abort"})}),d.set(P,!0)}}var l=function(P){function w(f){var g=P.call(this,f)||this;return g.name="AbortError",g}return(0,s.ZT)(w,P),w}(Error);!function(){function P(w){var f=this;if(this._signal=new p,w){Array.isArray(w)||(w=arguments);for(var g=0,_=w;g<_.length;g++){var b=_[g];b.aborted?this.abort():b.addEventListener("abort",function(){f.abort()})}}}Object.defineProperty(P.prototype,"signal",{get:function(){return this._signal},enumerable:!1,configurable:!0}),P.prototype.abort=function(){T(this._signal)},P.timeout=function(w){var f=new p,g=setTimeout(T,w,f);return"function"==typeof g.unref&&g.unref(),f}}()},351:(K,u,c)=>{"use strict";c.r(u),c.d(u,{ChatClient:()=>xs,ChatThreadClient:()=>ks});var s={};c.r(s),c.d(s,{AddChatParticipantsRequest:()=>Pn,AddChatParticipantsResult:()=>In,ChatError:()=>Ge,ChatMessage:()=>it,ChatMessageContent:()=>yt,ChatMessageReadReceipt:()=>ue,ChatMessageReadReceiptsCollection:()=>X,ChatMessagesCollection:()=>pt,ChatParticipant:()=>Gt,ChatParticipantsCollection:()=>Sn,ChatThreadItem:()=>Zt,ChatThreadProperties:()=>Zn,ChatThreadsItemCollection:()=>dn,CommunicationErrorResponse:()=>_e,CommunicationIdentifierModel:()=>ve,CommunicationUserIdentifierModel:()=>Ae,CreateChatThreadRequest:()=>Tn,CreateChatThreadResult:()=>An,MicrosoftTeamsUserIdentifierModel:()=>Me,PhoneNumberIdentifierModel:()=>we,SendChatMessageRequest:()=>nt,SendChatMessageResult:()=>ct,SendReadReceiptRequest:()=>Qe,SendTypingNotificationRequest:()=>Bt,UpdateChatMessageRequest:()=>ln,UpdateChatThreadRequest:()=>Nt});var E=c(8239),d=c(4762),p=c(1326);const T=(0,p.YR)("communication-chat");var l=c(3105);const C="1.1.0-beta.2";var P=c(2305),f=c(434),g=c(1126);const _=(0,p.YR)("core-http");var b=c(369),m=c(7694);const I="REDACTED",x=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent"],k=["api-version"];class F{constructor({allowedHeaderNames:y=[],allowedQueryParameters:D=[]}={}){y=Array.isArray(y)?x.concat(y):x,D=Array.isArray(D)?k.concat(D):k,this.allowedHeaderNames=new Set(y.map(B=>B.toLowerCase())),this.allowedQueryParameters=new Set(D.map(B=>B.toLowerCase()))}sanitize(y){const D=new Set;return JSON.stringify(y,(B,G)=>{if(G instanceof Error)return Object.assign(Object.assign({},G),{name:G.name,message:G.message});if("_headersMap"===B)return this.sanitizeHeaders(G);if("url"===B)return this.sanitizeUrl(G);if("query"===B)return this.sanitizeQuery(G);if("body"!==B&&"response"!==B&&"operationSpec"!==B){if(Array.isArray(G)||(0,m.Kn)(G)){if(D.has(G))return"[Circular]";D.add(G)}return G}},2)}sanitizeHeaders(y){return this.sanitizeObject(y,this.allowedHeaderNames,(D,B)=>D[B].value)}sanitizeQuery(y){return this.sanitizeObject(y,this.allowedQueryParameters,(D,B)=>D[B])}sanitizeObject(y,D,B){if("object"!=typeof y||null===y)return y;const G={};for(const Z of Object.keys(y))G[Z]=D.has(Z.toLowerCase())?B(y,Z):I;return G}sanitizeUrl(y){if("string"!=typeof y||null===y)return y;const D=b.UK.parse(y),B=D.getQuery();if(!B)return y;const G=b.$4.parse(B);for(const Z of G.keys())this.allowedQueryParameters.has(Z.toLowerCase())||G.set(Z,I);return D.setQuery(G.toString()),D.toString()}}function U(L={}){return{create:(y,D)=>new N(y,D,L)}}class N extends g.U{constructor(y,D,{logger:B=_.info,allowedHeaderNames:G=[],allowedQueryParameters:Z=[]}={}){super(y,D),this.logger=B,this.sanitizer=new F({allowedHeaderNames:G,allowedQueryParameters:Z})}get allowedHeaderNames(){return this.sanitizer.allowedHeaderNames}set allowedHeaderNames(y){this.sanitizer.allowedHeaderNames=y}get allowedQueryParameters(){return this.sanitizer.allowedQueryParameters}set allowedQueryParameters(y){this.sanitizer.allowedQueryParameters=y}sendRequest(y){return this.logger.enabled?(this.logRequest(y),this._nextPolicy.sendRequest(y).then(D=>this.logResponse(D))):this._nextPolicy.sendRequest(y)}logRequest(y){this.logger(`Request: ${this.sanitizer.sanitize(y)}`)}logResponse(y){return this.logger(`Response status code: ${y.status}`),this.logger(`Headers: ${this.sanitizer.sanitize(y.headers)}`),y}}function R(L){return M(L.parameterPath,L.mapper)}function M(L,y){let D;return D="string"==typeof L?L:Array.isArray(L)?L.join("."):y.serializedName,D}function W(L){let y="";for(let D=0;D<L.length;D++)y+=String.fromCharCode(L[D]);return btoa(y)}function $(L){const y=atob(L),D=new Uint8Array(y.length);for(let B=0;B<y.length;B++)D[B]=y.charCodeAt(B);return D}var ce=c(4510);class Q{constructor(y={},D){this.modelMappers=y,this.isXML=D}validateConstraints(y,D,B){const G=(Z,fe)=>{throw new Error(`"${B}" with value "${D}" should satisfy the constraint "${Z}": ${fe}.`)};if(y.constraints&&null!=D){const Z=D,{ExclusiveMaximum:fe,ExclusiveMinimum:be,InclusiveMaximum:Pe,InclusiveMinimum:Oe,MaxItems:Ne,MaxLength:Ze,MinItems:st,MinLength:lt,MultipleOf:Qt,Pattern:Jt,UniqueItems:ft}=y.constraints;null!=fe&&Z>=fe&&G("ExclusiveMaximum",fe),null!=be&&Z<=be&&G("ExclusiveMinimum",be),null!=Pe&&Z>Pe&&G("InclusiveMaximum",Pe),null!=Oe&&Z<Oe&&G("InclusiveMinimum",Oe);const dt=D;if(null!=Ne&&dt.length>Ne&&G("MaxItems",Ne),null!=Ze&&dt.length>Ze&&G("MaxLength",Ze),null!=st&&dt.length<st&&G("MinItems",st),null!=lt&&dt.length<lt&&G("MinLength",lt),null!=Qt&&Z%Qt!=0&&G("MultipleOf",Qt),Jt){const ut="string"==typeof Jt?new RegExp(Jt):Jt;("string"!=typeof D||null===D.match(ut))&&G("Pattern",Jt)}ft&&dt.some((ut,rn,Mr)=>Mr.indexOf(ut)!==rn)&&G("UniqueItems",ft)}}serialize(y,D,B,G={}){var Z,fe,be;const Pe={rootName:null!==(Z=G.rootName)&&void 0!==Z?Z:"",includeRoot:null!==(fe=G.includeRoot)&&void 0!==fe&&fe,xmlCharKey:null!==(be=G.xmlCharKey)&&void 0!==be?be:ce.I};let Oe={};const Ne=y.type.name;B||(B=y.serializedName),null!==Ne.match(/^Sequence$/i)&&(Oe=[]),y.isConstant&&(D=y.defaultValue);const{required:Ze,nullable:st}=y;if(Ze&&st&&void 0===D)throw new Error(`${B} cannot be undefined.`);if(Ze&&!st&&null==D)throw new Error(`${B} cannot be null or undefined.`);if(!Ze&&!1===st&&null===D)throw new Error(`${B} cannot be null.`);return null==D?Oe=D:(this.validateConstraints(y,D,B),null!==Ne.match(/^any$/i)?Oe=D:null!==Ne.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)?Oe=function(L,y,D){if(null!=D)if(null!==L.match(/^Number$/i)){if("number"!=typeof D)throw new Error(`${y} with value ${D} must be of type number.`)}else if(null!==L.match(/^String$/i)){if("string"!=typeof D.valueOf())throw new Error(`${y} with value "${D}" must be of type string.`)}else if(null!==L.match(/^Uuid$/i)){if("string"!=typeof D.valueOf()||!m.TP(D))throw new Error(`${y} with value "${D}" must be of type string and a valid uuid.`)}else if(null!==L.match(/^Boolean$/i)){if("boolean"!=typeof D)throw new Error(`${y} with value ${D} must be of type boolean.`)}else if(null!==L.match(/^Stream$/i)){const B=typeof D;if(!("string"===B||"function"===B||D instanceof ArrayBuffer||ArrayBuffer.isView(D)||("function"==typeof Blob||"object"==typeof Blob)&&D instanceof Blob))throw new Error(`${y} must be a string, Blob, ArrayBuffer, ArrayBufferView, or a function returning NodeJS.ReadableStream.`)}return D}(Ne,B,D):null!==Ne.match(/^Enum$/i)?Oe=function(L,y,D){if(!y)throw new Error(`Please provide a set of allowedValues to validate ${L} as an Enum Type.`);if(!y.some(G=>"string"==typeof G.valueOf()?G.toLowerCase()===D.toLowerCase():G===D))throw new Error(`${D} is not a valid value for ${L}. The valid values are: ${JSON.stringify(y)}.`);return D}(B,y.type.allowedValues,D):null!==Ne.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)?Oe=function(L,y,D){if(null!=y)if(null!==L.match(/^Date$/i)){if(!(y instanceof Date||"string"==typeof y.valueOf()&&!isNaN(Date.parse(y))))throw new Error(`${D} must be an instanceof Date or a string in ISO8601 format.`);y=y instanceof Date?y.toISOString().substring(0,10):new Date(y).toISOString().substring(0,10)}else if(null!==L.match(/^DateTime$/i)){if(!(y instanceof Date||"string"==typeof y.valueOf()&&!isNaN(Date.parse(y))))throw new Error(`${D} must be an instanceof Date or a string in ISO8601 format.`);y=y instanceof Date?y.toISOString():new Date(y).toISOString()}else if(null!==L.match(/^DateTimeRfc1123$/i)){if(!(y instanceof Date||"string"==typeof y.valueOf()&&!isNaN(Date.parse(y))))throw new Error(`${D} must be an instanceof Date or a string in RFC-1123 format.`);y=y instanceof Date?y.toUTCString():new Date(y).toUTCString()}else if(null!==L.match(/^UnixTime$/i)){if(!(y instanceof Date||"string"==typeof y.valueOf()&&!isNaN(Date.parse(y))))throw new Error(`${D} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);y=function(L){if(L)return"string"==typeof L.valueOf()&&(L=new Date(L)),Math.floor(L.getTime()/1e3)}(y)}else if(null!==L.match(/^TimeSpan$/i)&&!m._9(y))throw new Error(`${D} must be a string in ISO 8601 format. Instead was "${y}".`);return y}(Ne,D,B):null!==Ne.match(/^ByteArray$/i)?Oe=function(L,y){let D="";if(null!=y){if(!(y instanceof Uint8Array))throw new Error(`${L} must be of type Uint8Array.`);D=W(y)}return D}(B,D):null!==Ne.match(/^Base64Url$/i)?Oe=function(L,y){let D="";if(null!=y){if(!(y instanceof Uint8Array))throw new Error(`${L} must be of type Uint8Array.`);D=function(L){if(L){if(!(L instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");return function(L,y){let D=L.length;for(;D-1>=0&&"="===L[D-1];)--D;return L.substr(0,D)}(W(L)).replace(/\+/g,"-").replace(/\//g,"_")}}(y)||""}return D}(B,D):null!==Ne.match(/^Sequence$/i)?Oe=function(L,y,D,B,G,Z){if(!Array.isArray(D))throw new Error(`${B} must be of type Array.`);const fe=y.type.element;if(!fe||"object"!=typeof fe)throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${B}.`);const be=[];for(let Pe=0;Pe<D.length;Pe++){const Oe=L.serialize(fe,D[Pe],B,Z);if(G&&fe.xmlNamespace){const Ne=fe.xmlNamespacePrefix?`xmlns:${fe.xmlNamespacePrefix}`:"xmlns";"Composite"===fe.type.name?(be[Pe]=Object.assign({},Oe),be[Pe][ce.c]={[Ne]:fe.xmlNamespace}):(be[Pe]={},be[Pe][Z.xmlCharKey]=Oe,be[Pe][ce.c]={[Ne]:fe.xmlNamespace})}else be[Pe]=Oe}return be}(this,y,D,B,Boolean(this.isXML),Pe):null!==Ne.match(/^Dictionary$/i)?Oe=function(L,y,D,B,G,Z){if("object"!=typeof D)throw new Error(`${B} must be of type object.`);const fe=y.type.value;if(!fe||"object"!=typeof fe)throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${B}.`);const be={};for(const Pe of Object.keys(D)){const Oe=L.serialize(fe,D[Pe],B,Z);be[Pe]=De(fe,Oe,G,Z)}if(G&&y.xmlNamespace){const Oe=be;return Oe[ce.c]={[y.xmlNamespacePrefix?`xmlns:${y.xmlNamespacePrefix}`:"xmlns"]:y.xmlNamespace},Oe}return be}(this,y,D,B,Boolean(this.isXML),Pe):null!==Ne.match(/^Composite$/i)&&(Oe=function(L,y,D,B,G,Z){if($e(L,y)&&(y=Ve(L,y,D,"clientName")),null!=D){const fe={},be=ge(L,y,B);for(const Oe of Object.keys(be)){const Ne=be[Oe];if(Ne.readOnly)continue;let Ze,st=fe;if(L.isXML)Ze=Ne.xmlIsWrapped?Ne.xmlName:Ne.xmlElementName||Ne.xmlName;else{const lt=Se(Ne.serializedName);Ze=lt.pop();for(const Qt of lt)null==st[Qt]&&(null!=D[Oe]||void 0!==Ne.defaultValue)&&(st[Qt]={}),st=st[Qt]}if(null!=st){if(G&&y.xmlNamespace){const dt=y.xmlNamespacePrefix?`xmlns:${y.xmlNamespacePrefix}`:"xmlns";st[ce.c]=Object.assign(Object.assign({},st[ce.c]),{[dt]:y.xmlNamespace})}const lt=""!==Ne.serializedName?B+"."+Ne.serializedName:B;let Qt=D[Oe];const Jt=$e(L,y);Jt&&Jt.clientName===Oe&&null==Qt&&(Qt=y.serializedName);const ft=L.serialize(Ne,Qt,lt,Z);if(void 0!==ft&&null!=Ze){const dt=De(Ne,ft,G,Z);G&&Ne.xmlIsAttribute?(st[ce.c]=st[ce.c]||{},st[ce.c][Ze]=ft):st[Ze]=G&&Ne.xmlIsWrapped?{[Ne.xmlElementName]:dt}:dt}}}const Pe=function(L,y,D){const B=y.type.additionalProperties;if(!B&&y.type.className){const G=ye(L,y,D);return null==G?void 0:G.type.additionalProperties}return B}(L,y,B);if(Pe){const Oe=Object.keys(be);for(const Ne in D)Oe.every(st=>st!==Ne)&&(fe[Ne]=L.serialize(Pe,D[Ne],B+'["'+Ne+'"]',Z))}return fe}return D}(this,y,D,B,Boolean(this.isXML),Pe))),Oe}deserialize(y,D,B,G={}){var Z,fe,be;const Pe={rootName:null!==(Z=G.rootName)&&void 0!==Z?Z:"",includeRoot:null!==(fe=G.includeRoot)&&void 0!==fe&&fe,xmlCharKey:null!==(be=G.xmlCharKey)&&void 0!==be?be:ce.I};if(null==D)return this.isXML&&"Sequence"===y.type.name&&!y.xmlIsWrapped&&(D=[]),void 0!==y.defaultValue&&(D=y.defaultValue),D;let Oe;const Ne=y.type.name;if(B||(B=y.serializedName),null!==Ne.match(/^Composite$/i))Oe=function(L,y,D,B,G){var Z;$e(L,y)&&(y=Ve(L,y,D,"serializedName"));const fe=ge(L,y,B);let be={};const Pe=[];for(const Ne of Object.keys(fe)){const Ze=fe[Ne],st=Se(fe[Ne].serializedName);Pe.push(st[0]);const{serializedName:lt,xmlName:Qt,xmlElementName:Jt}=Ze;let ft=B;""!==lt&&void 0!==lt&&(ft=B+"."+lt);const dt=Ze.headerCollectionPrefix;if(dt){const ut={};for(const rn of Object.keys(D))rn.startsWith(dt)&&(ut[rn.substring(dt.length)]=L.deserialize(Ze.type.value,D[rn],ft,G)),Pe.push(rn);be[Ne]=ut}else if(L.isXML)if(Ze.xmlIsAttribute&&D[ce.c])be[Ne]=L.deserialize(Ze,D[ce.c][Qt],ft,G);else{const ut=Jt||Qt||lt;if(Ze.xmlIsWrapped){const rn=D[Qt],Mr=null!==(Z=null==rn?void 0:rn[Jt])&&void 0!==Z?Z:[];be[Ne]=L.deserialize(Ze,Mr,ft,G)}else be[Ne]=L.deserialize(Ze,D[ut],ft,G)}else{let ut,rn=D;for(const _o of st){if(!rn)break;rn=rn[_o]}ut=rn;const Mr=y.type.polymorphicDiscriminator;let Ls;if(Mr&&Ne===Mr.clientName&&null==ut&&(ut=y.serializedName),Array.isArray(D[Ne])&&""===fe[Ne].serializedName){ut=D[Ne];const _o=L.deserialize(Ze,ut,ft,G);for(const[Ea,Gu]of Object.entries(be))Object.prototype.hasOwnProperty.call(_o,Ea)||(_o[Ea]=Gu);be=_o}else(void 0!==ut||void 0!==Ze.defaultValue)&&(Ls=L.deserialize(Ze,ut,ft,G),be[Ne]=Ls)}}const Oe=y.type.additionalProperties;if(Oe){const Ne=Ze=>{for(const st in fe)if(Se(fe[st].serializedName)[0]===Ze)return!1;return!0};for(const Ze in D)Ne(Ze)&&(be[Ze]=L.deserialize(Oe,D[Ze],B+'["'+Ze+'"]',G))}else if(D)for(const Ne of Object.keys(D))void 0===be[Ne]&&!Pe.includes(Ne)&&!Fe(Ne,G)&&(be[Ne]=D[Ne]);return be}(this,y,D,B,Pe);else{if(this.isXML){const Ze=Pe.xmlCharKey,st=D;null!=st[ce.c]&&null!=st[Ze]&&(D=st[Ze])}null!==Ne.match(/^Number$/i)?(Oe=parseFloat(D),isNaN(Oe)&&(Oe=D)):null!==Ne.match(/^Boolean$/i)?Oe="true"===D||"false"!==D&&D:null!==Ne.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)?Oe=D:null!==Ne.match(/^(Date|DateTime|DateTimeRfc1123)$/i)?Oe=new Date(D):null!==Ne.match(/^UnixTime$/i)?Oe=function(L){if(L)return new Date(1e3*L)}(D):null!==Ne.match(/^ByteArray$/i)?Oe=$(D):null!==Ne.match(/^Base64Url$/i)?Oe=function(L){if(L){if(L&&"string"!=typeof L.valueOf())throw new Error("Please provide an input of type string for converting to Uint8Array");return $(L=L.replace(/-/g,"+").replace(/_/g,"/"))}}(D):null!==Ne.match(/^Sequence$/i)?Oe=function(L,y,D,B,G){const Z=y.type.element;if(!Z||"object"!=typeof Z)throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${B}`);if(D){Array.isArray(D)||(D=[D]);const fe=[];for(let be=0;be<D.length;be++)fe[be]=L.deserialize(Z,D[be],`${B}[${be}]`,G);return fe}return D}(this,y,D,B,Pe):null!==Ne.match(/^Dictionary$/i)&&(Oe=function(L,y,D,B,G){const Z=y.type.value;if(!Z||"object"!=typeof Z)throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${B}`);if(D){const fe={};for(const be of Object.keys(D))fe[be]=L.deserialize(Z,D[be],B,G);return fe}return D}(this,y,D,B,Pe))}return y.isConstant&&(Oe=y.defaultValue),Oe}}function Se(L){const y=[];let D="";if(L){const B=L.split(".");for(const G of B)"\\"===G.charAt(G.length-1)?D+=G.substr(0,G.length-1)+".":(D+=G,y.push(D),D="")}return y}function ye(L,y,D){const B=y.type.className;if(!B)throw new Error(`Class name for model "${D}" is not provided in the mapper "${JSON.stringify(y,void 0,2)}".`);return L.modelMappers[B]}function ge(L,y,D){let B=y.type.modelProperties;if(!B){const G=ye(L,y,D);if(!G)throw new Error(`mapper() cannot be null or undefined for model "${y.type.className}".`);if(B=null==G?void 0:G.type.modelProperties,!B)throw new Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(G)}" of type "${y.type.className}" for object "${D}".`)}return B}function De(L,y,D,B){if(!D||!L.xmlNamespace)return y;const Z={[L.xmlNamespacePrefix?`xmlns:${L.xmlNamespacePrefix}`:"xmlns"]:L.xmlNamespace};if(["Composite"].includes(L.type.name)){if(y[ce.c])return y;{const be=Object.assign({},y);return be[ce.c]=Z,be}}const fe={};return fe[B.xmlCharKey]=y,fe[ce.c]=Z,fe}function Fe(L,y){return[ce.c,y.xmlCharKey].includes(L)}function Ve(L,y,D,B){const G=$e(L,y);if(G){const Z=G[B];if(null!=Z){const fe=D[Z];if(null!=fe){const be=y.type.uberParent||y.type.className,Oe=L.modelMappers.discriminators[fe===be?fe:be+"."+fe];Oe&&(y=Oe)}}}return y}function $e(L,y){return y.type.polymorphicDiscriminator||Je(L,y.type.uberParent)||Je(L,y.type.className)}function Je(L,y){return y&&L.modelMappers[y]&&L.modelMappers[y].type.polymorphicDiscriminator}const tt=function(L){const y={};for(const D of["Base64Url","Boolean","ByteArray","Composite","Date","DateTime","DateTimeRfc1123","Dictionary","Enum","Number","Object","Sequence","String","Stream","TimeSpan","UnixTime"])y[D]=D;return y}(),Ht={},on=new F;let wn=(()=>{class L extends Error{constructor(D,B,G,Z,fe){super(D),this.name="RestError",this.code=B,this.statusCode=G,this.request=Z,this.response=fe,Object.setPrototypeOf(this,L.prototype)}[Ht](){return`RestError: ${this.message} \n ${on.sanitize(this)}`}}return L.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",L.PARSE_ERROR="PARSE_ERROR",L})();if(!(self.document&&self.DOMParser&&self.Node&&self.XMLSerializer))throw new Error('This library depends on the following DOM objects: ["document", "DOMParser", "Node", "XMLSerializer"] to parse XML, but some of these are undefined. You may provide a polyfill to make these globally available in order to support your environment. For more information, please refer to https://aka.ms/azsdk/js/web-workers. ');const ir=document.implementation.createDocument(null,null,null),Le=new DOMParser;function ze(L,y={}){var D,B,G;try{const Z={rootName:null!==(D=y.rootName)&&void 0!==D?D:"",includeRoot:null!==(B=y.includeRoot)&&void 0!==B&&B,xmlCharKey:null!==(G=y.xmlCharKey)&&void 0!==G?G:ce.I},fe=Le.parseFromString(L,"application/xml");let be;return function(L){const y=L.getElementsByTagName("parsererror");if(y.length>0&&function(){var L;if(void 0===Ye)try{Ye=null!==(L=Le.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI)&&void 0!==L?L:""}catch(y){Ye=""}return Ye}())for(let D=0;D<y.length;D++)if(y[D].namespaceURI===Ye)throw new Error(y[D].innerHTML)}(fe),be=kr(Z.includeRoot?fe:fe.childNodes[0],Z),Promise.resolve(be)}catch(Z){return Promise.reject(Z)}}let Ye;function kr(L,y){let D={};const B=L.childNodes.length,G=L.childNodes[0],Z=G&&1===B&&G.nodeType===Node.TEXT_NODE&&G.nodeValue||void 0,fe=function(L){return function(L){return!!L.attributes}(L)&&L.hasAttributes()?L:void 0}(L);if(fe){D[ce.c]={};for(let be=0;be<fe.attributes.length;be++){const Pe=fe.attributes[be];D[ce.c][Pe.nodeName]=Pe.nodeValue}Z&&(D[y.xmlCharKey]=Z)}else 0===B?D="":Z&&(D=Z);if(!Z)for(let be=0;be<B;be++){const Pe=L.childNodes[be];if(Pe.nodeType!==Node.TEXT_NODE){const Oe=kr(Pe,y);D[Pe.nodeName]?Array.isArray(D[Pe.nodeName])?D[Pe.nodeName].push(Oe):D[Pe.nodeName]=[D[Pe.nodeName],Oe]:D[Pe.nodeName]=Oe}}return D}const xt=new XMLSerializer;function Mo(L,y={}){var D,B,G;const Z={rootName:null!==(D=y.rootName)&&void 0!==D?D:"root",includeRoot:null!==(B=y.includeRoot)&&void 0!==B&&B,xmlCharKey:null!==(G=y.xmlCharKey)&&void 0!==G?G:ce.I},fe=us(L,Z.rootName,Z)[0];return'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+xt.serializeToString(fe)}function as(L){const y=[];for(const D of Object.keys(L)){const B=ir.createAttribute(D);B.value=L[D].toString(),y.push(B)}return y}function us(L,y,D){if(null==L||"string"==typeof L||"number"==typeof L||"boolean"==typeof L){const B=ir.createElement(y);return B.textContent=null==L?"":L.toString(),[B]}if(Array.isArray(L)){const B=[];for(const G of L)for(const Z of us(G,y,D))B.push(Z);return B}if("object"==typeof L){const B=ir.createElement(y);for(const G of Object.keys(L))if(G===ce.c)for(const Z of as(L[G]))B.attributes.setNamedItem(Z);else if(G===D.xmlCharKey)B.textContent=L[G].toString();else for(const Z of us(L[G],G,D))B.appendChild(Z);return[B]}throw new Error(`Illegal value passed to buildObject: ${L}`)}function Ys(L,y){return{create:(D,B)=>new cs(D,B,L,y)}}const Xs=["application/json","text/json"],Zs=["application/xml","application/atom+xml"],qt={expectedContentTypes:{json:Xs,xml:Zs}};class cs extends g.U{constructor(y,D,B,G={}){var Z;super(y,D),this.jsonContentTypes=B&&B.json||Xs,this.xmlContentTypes=B&&B.xml||Zs,this.xmlCharKey=null!==(Z=G.xmlCharKey)&&void 0!==Z?Z:ce.I}sendRequest(y){var D=this;return(0,E.Z)(function*(){return D._nextPolicy.sendRequest(y).then(B=>function(L,y,D,B={}){var G,Z,fe;const be={rootName:null!==(G=B.rootName)&&void 0!==G?G:"",includeRoot:null!==(Z=B.includeRoot)&&void 0!==Z&&Z,xmlCharKey:null!==(fe=B.xmlCharKey)&&void 0!==fe?fe:ce.I};return function(L,y,D,B){var G;const Z=be=>{const Ne=new wn(`Error "${be}" occurred while parsing the response body - ${D.bodyAsText}.`,be.code||wn.PARSE_ERROR,D.status,D.request,D);return Promise.reject(Ne)};if(!(null===(G=D.request.streamResponseStatusCodes)||void 0===G?void 0:G.has(D.status))&&!D.request.streamResponseBody&&D.bodyAsText){const be=D.bodyAsText,Pe=D.headers.get("Content-Type")||"",Oe=Pe?Pe.split(";").map(Ne=>Ne.toLowerCase()):[];if(0===Oe.length||Oe.some(Ne=>-1!==L.indexOf(Ne)))return new Promise(Ne=>{D.parsedBody=JSON.parse(be),Ne(D)}).catch(Z);if(Oe.some(Ne=>-1!==y.indexOf(Ne)))return ze(be,B).then(Ne=>(D.parsedBody=Ne,D)).catch(Z)}return Promise.resolve(D)}(L,y,D,be).then(Pe=>{if(!function(L){const y=L.request.shouldDeserialize;let D;return D=void 0===y||("boolean"==typeof y?y:y(L)),D}(Pe))return Pe;const Oe=Pe.request.operationSpec;if(!Oe||!Oe.responses)return Pe;const Ne=function(L){let y;const D=L.request,B=D.operationSpec;if(B){const G=D.operationResponseGetter;y=G?G(B,L):B.responses[L.status]}return y}(Pe),{error:Ze,shouldReturnResponse:st}=function(L,y,D){var B;const G=200<=L.status&&L.status<300;if(function(L){const y=Object.keys(L.responses);return 0===y.length||1===y.length&&"default"===y[0]}(y)?G:D){if(!D)return{error:null,shouldReturnResponse:!1};if(!D.isError)return{error:null,shouldReturnResponse:!1}}const fe=null!=D?D:y.responses.default,Pe=(null===(B=L.request.streamResponseStatusCodes)||void 0===B?void 0:B.has(L.status))||L.request.streamResponseBody?`Unexpected status code: ${L.status}`:L.bodyAsText,Oe=new wn(Pe,void 0,L.status,L.request,L);if(!fe)throw Oe;const Ne=fe.bodyMapper,Ze=fe.headersMapper;try{if(L.parsedBody){const st=L.parsedBody;let lt;if(Ne){let Jt=st;y.isXML&&Ne.type.name===tt.Sequence&&(Jt="object"==typeof st?st[Ne.xmlElementName]:[]),lt=y.serializer.deserialize(Ne,Jt,"error.response.parsedBody")}const Qt=st.error||lt||st;Oe.code=Qt.code,Qt.message&&(Oe.message=Qt.message),Ne&&(Oe.response.parsedBody=lt)}L.headers&&Ze&&(Oe.response.parsedHeaders=y.serializer.deserialize(Ze,L.headers.rawHeaders(),"operationRes.parsedHeaders"))}catch(st){Oe.message=`Error "${st.message}" occurred in deserializing the responseBody - "${L.bodyAsText}" for the default response.`}return{error:Oe,shouldReturnResponse:!1}}(Pe,Oe,Ne);if(Ze)throw Ze;if(st)return Pe;if(Ne){if(Ne.bodyMapper){let lt=Pe.parsedBody;Oe.isXML&&Ne.bodyMapper.type.name===tt.Sequence&&(lt="object"==typeof lt?lt[Ne.bodyMapper.xmlElementName]:[]);try{Pe.parsedBody=Oe.serializer.deserialize(Ne.bodyMapper,lt,"operationRes.parsedBody",B)}catch(Qt){throw new wn(`Error ${Qt} occurred in deserializing the responseBody - ${Pe.bodyAsText}`,void 0,Pe.status,Pe.request,Pe)}}else"HEAD"===Oe.httpMethod&&(Pe.parsedBody=D.status>=200&&D.status<300);Ne.headersMapper&&(Pe.parsedHeaders=Oe.serializer.deserialize(Ne.headersMapper,Pe.headers.rawHeaders(),"operationRes.parsedHeaders",B))}return Pe})}(D.jsonContentTypes,D.xmlContentTypes,B,{xmlCharKey:D.xmlCharKey}))})()}}function ht(L){return"number"==typeof L}function Mn(L,y,D,B,G){return!!y(B,G)&&D.retryCount<L}function ps(L,y={retryCount:0,retryInterval:0},D){D&&(y.error&&(D.innerError=y.error),y.error=D),y.retryCount++;let B=Math.pow(2,y.retryCount-1)-1;return B*=.8*L.retryInterval+Math.floor(Math.random()*(.4*L.retryInterval)),y.retryInterval=Math.min(L.minRetryInterval+B,L.maxRetryInterval),y}var xi=c(8006),No=c(969);function ai(L,y,D){return{create:(B,G)=>new hu(B,G,L,y,D)}}const Li={maxRetries:3,retryDelayInMs:3e4,maxRetryDelayInMs:9e4};class hu extends g.U{constructor(y,D,B,G,Z){super(y,D),this.retryCount=ht(B)?B:3,this.retryInterval=ht(G)?G:3e4,this.maxRetryInterval=ht(Z)?Z:9e4}sendRequest(y){return this._nextPolicy.sendRequest(y.clone()).then(D=>fo(this,y,D)).catch(D=>fo(this,y,D.response,void 0,D))}}function fo(L,y,D,B,G){return sr.apply(this,arguments)}function sr(){return(sr=(0,E.Z)(function*(L,y,D,B,G){B=ps({retryInterval:L.retryInterval,minRetryInterval:0,maxRetryInterval:L.maxRetryInterval},B,G);const fe=y.abortSignal&&y.abortSignal.aborted;if(fe||!Mn(L.retryCount,function(be){const Pe=null==be?void 0:be.status;return!(503===Pe&&(null==D?void 0:D.headers.get(xi.g.HeaderConstants.RETRY_AFTER))||void 0===Pe||Pe<500&&408!==Pe||501===Pe||505===Pe)},B,D)){if(fe||G||!D)throw B.error||new wn("Failed to send the request.",wn.REQUEST_SEND_ERROR,D&&D.status,D&&D.request,D);return D}_.info(`Retrying request in ${B.retryInterval}`);try{yield(0,No.g)(B.retryInterval);const be=yield L._nextPolicy.sendRequest(y.clone());return fo(L,y,be,B)}catch(be){return fo(L,y,D,B,be)}})).apply(this,arguments)}function pu(L="x-ms-client-request-id"){return{create:(y,D)=>new ko(y,D,L)}}class ko extends g.U{constructor(y,D,B){super(y,D),this._requestIdHeaderName=B}sendRequest(y){return y.headers.contains(this._requestIdHeaderName)||y.headers.set(this._requestIdHeaderName,y.requestId),this._nextPolicy.sendRequest(y)}}function ui(L){return L.toLowerCase()}function xr(L){if(L&&"object"==typeof L){const y=L;if("function"==typeof y.rawHeaders&&"function"==typeof y.clone&&"function"==typeof y.get&&"function"==typeof y.set&&"function"==typeof y.contains&&"function"==typeof y.remove&&"function"==typeof y.headersArray&&"function"==typeof y.headerValues&&"function"==typeof y.headerNames&&"function"==typeof y.toJson)return!0}return!1}class ho{constructor(y){if(this._headersMap={},y)for(const D in y)this.set(D,y[D])}set(y,D){this._headersMap[ui(y)]={name:y,value:D.toString()}}get(y){const D=this._headersMap[ui(y)];return D?D.value:void 0}contains(y){return!!this._headersMap[ui(y)]}remove(y){const D=this.contains(y);return delete this._headersMap[ui(y)],D}rawHeaders(){const y={};for(const D in this._headersMap){const B=this._headersMap[D];y[B.name.toLowerCase()]=B.value}return y}headersArray(){const y=[];for(const D in this._headersMap)y.push(this._headersMap[D]);return y}headerNames(){const y=[],D=this.headersArray();for(let B=0;B<D.length;++B)y.push(D[B].name);return y}headerValues(){const y=[],D=this.headersArray();for(let B=0;B<D.length;++B)y.push(D[B].value);return y}toJson(){return this.rawHeaders()}toString(){return JSON.stringify(this.toJson())}clone(){const y={};for(const D in this._headersMap){const B=this._headersMap[D];y[B.name]=B.value}return new ho(y)}}const Xt=function(){return"x-ms-useragent"};function xo(){const L=[{key:"core-http",value:xi.g.coreHttpVersion}],y=function(){const L=self.navigator;return[{key:"OS",value:(L.oscpu||L.platform).replace(" ","")}]}();return function(L,y=" ",D="/"){return L.map(B=>`${B.key}${B.value?`${D}${B.value}`:""}`).join(y)}(L.concat(y))}function na(L){const y=L&&null!=L.key?L.key:"x-ms-useragent",D=L&&null!=L.value?L.value:xo();return{create:(B,G)=>new Gc(B,G,y,D)}}class Gc extends g.U{constructor(y,D,B,G){super(y,D),this._nextPolicy=y,this._options=D,this.headerKey=B,this.headerValue=G}sendRequest(y){return this.addUserAgentHeader(y),this._nextPolicy.sendRequest(y)}addUserAgentHeader(y){y.headers||(y.headers=new ho),!y.headers.get(this.headerKey)&&this.headerValue&&y.headers.set(this.headerKey,this.headerValue)}}const Ft=["GET","HEAD"],$c={handleRedirects:!0,maxRetries:20};function zr(L=20){return{create:(y,D)=>new Lr(y,D,L)}}class Lr extends g.U{constructor(y,D,B=20){super(y,D),this.maxRetries=B}sendRequest(y){return this._nextPolicy.sendRequest(y).then(D=>gs(this,D,0))}}function gs(L,y,D){const{request:B,status:G}=y,Z=y.headers.get("location");if(Z&&(300===G||301===G&&Ft.includes(B.method)||302===G&&Ft.includes(B.method)||303===G&&"POST"===B.method||307===G)&&(!L.maxRetries||D<L.maxRetries)){const fe=b.UK.parse(B.url);return fe.setPath(Z),B.url=fe.toString(),303===G&&(B.method="GET",delete B.body),L._nextPolicy.sendRequest(B).then(be=>gs(L,be,D+1))}return Promise.resolve(y)}class vu extends g.U{constructor(y,D,B=30){super(y,D),this._retryTimeout=B}sendRequest(y){return this._nextPolicy.sendRequest(y.clone()).then(D=>function(L,y,D){if(409===D.status){const B=function(L){let y,D;if(L){try{D=JSON.parse(L)}catch(B){}if(D&&D.error&&D.error.message&&D.error.code&&"MissingSubscriptionRegistration"===D.error.code){const B=D.error.message.match(/.*'(.*)'/i);B&&(y=B.pop())}}return y}(D.bodyAsText);if(B){const G=function(L){let y;const D=L.match(/.*\/subscriptions\/[a-f0-9-]+\//gi);if(!D||!D[0])throw new Error(`Unable to extract subscriptionId from the given url - ${L}.`);return y=D[0],y}(y.url);return function(L,y,D,B){return rt.apply(this,arguments)}(L,G,B,y).catch(()=>!1).then(Z=>Z?(y.headers.set("x-ms-client-request-id",m.Rl()),L._nextPolicy.sendRequest(y.clone())):D)}}return Promise.resolve(D)}(this,y,D))}}function Fi(L,y=!1){const D=L.clone();return y&&(D.url=L.url),D.headers.set("x-ms-client-request-id",m.Rl()),D.headers.set("Content-Type","application/json; charset=utf-8"),D}function rt(){return(rt=(0,E.Z)(function*(L,y,D,B){const G=`${y}providers/${D}/register?api-version=2016-02-01`,Z=`${y}providers/${D}?api-version=2016-02-01`,fe=Fi(B);if(fe.method="POST",fe.url=G,200!==(yield L._nextPolicy.sendRequest(fe)).status)throw new Error(`Autoregistration of ${D} failed. Please try registering manually.`);return po(L,Z,B)})).apply(this,arguments)}function po(L,y,D){return vs.apply(this,arguments)}function vs(){return(vs=(0,E.Z)(function*(L,y,D){const B=Fi(D);B.url=y,B.method="GET";const G=yield L._nextPolicy.sendRequest(B),Z=G.parsedBody;return!(!G.parsedBody||!Z.registrationState||"Registered"!==Z.registrationState)||(yield(0,No.g)(1e3*L._retryTimeout),po(L,y,D))})).apply(this,arguments)}var wr=c(6354);function Ui(L,y,D,B){return{create:(G,Z)=>new ra(G,Z,L,y,D,B)}}class ra extends g.U{constructor(y,D,B,G,Z,fe){super(y,D),this.retryCount=ht(B)?B:3,this.retryInterval=ht(G)?G:3e4,this.minRetryInterval=ht(Z)?Z:3e3,this.maxRetryInterval=ht(fe)?fe:9e4}sendRequest(y){return this._nextPolicy.sendRequest(y.clone()).catch(D=>Jn(this,y,D.response,D))}}function Jn(L,y,D,B,G){return qn.apply(this,arguments)}function qn(){return(qn=(0,E.Z)(function*(L,y,D,B,G){if(G=ps(L,G,B),!Mn(L.retryCount,function(fe,be){return!(!be||!be.code||"ETIMEDOUT"!==be.code&&"ESOCKETTIMEDOUT"!==be.code&&"ECONNREFUSED"!==be.code&&"ECONNRESET"!==be.code&&"ENOENT"!==be.code)},G,D,B))return B?Promise.reject(G.error):D;try{return yield(0,No.g)(G.retryInterval),L._nextPolicy.sendRequest(y.clone())}catch(fe){return Jn(L,y,D,fe,G)}})).apply(this,arguments)}var Fr=(()=>{return(L=Fr||(Fr={})).Csv=",",L.Ssv=" ",L.Tsv="\t",L.Pipes="|",L.Multi="Multi",Fr;var L})();class sn{constructor(y,D,B,G,Z,fe,be,Pe,Oe,Ne,Ze,st,lt,Qt,Jt){this.streamResponseBody=fe,this.streamResponseStatusCodes=Jt,this.url=y||"",this.method=D||"GET",this.headers=xr(Z)?Z:new ho(Z),this.body=B,this.query=G,this.formData=void 0,this.withCredentials=be||!1,this.abortSignal=Pe,this.timeout=Oe||0,this.onUploadProgress=Ne,this.onDownloadProgress=Ze,this.proxySettings=st,this.keepAlive=lt,this.decompressResponse=Qt,this.requestId=this.headers.get("x-ms-client-request-id")||(0,m.Rl)()}validateRequestProperties(){if(!this.method)throw new Error("WebResource.method is required.");if(!this.url)throw new Error("WebResource.url is required.")}prepare(y){if(!y)throw new Error("options object is required");if(null==y.method||"string"!=typeof y.method.valueOf())throw new Error("options.method must be a string.");if(y.url&&y.pathTemplate)throw new Error("options.url and options.pathTemplate are mutually exclusive. Please provide exactly one of them.");if(!(null!=y.pathTemplate&&"string"==typeof y.pathTemplate.valueOf()||null!=y.url&&"string"==typeof y.url.valueOf()))throw new Error("Please provide exactly one of options.pathTemplate or options.url.");if(y.url){if("string"!=typeof y.url)throw new Error('options.url must be of type "string".');this.url=y.url}if(y.method){const D=["GET","PUT","HEAD","DELETE","OPTIONS","POST","PATCH","TRACE"];if(-1===D.indexOf(y.method.toUpperCase()))throw new Error('The provided method "'+y.method+'" is invalid. Supported HTTP methods are: '+JSON.stringify(D))}if(this.method=y.method.toUpperCase(),y.pathTemplate){const{pathTemplate:D,pathParameters:B}=y;if("string"!=typeof D)throw new Error('options.pathTemplate must be of type "string".');y.baseUrl||(y.baseUrl="https://management.azure.com");const G=y.baseUrl;let Z=G+(G.endsWith("/")?"":"/")+(D.startsWith("/")?D.slice(1):D);const fe=Z.match(/({[\w-]*\s*[\w-]*})/gi);if(fe&&fe.length){if(!B)throw new Error(`pathTemplate: ${D} has been provided. Hence, options.pathParameters must also be provided.`);fe.forEach(function(be){const Pe=be.slice(1,-1),Oe=B[Pe];if(null==Oe||"string"!=typeof Oe&&"object"!=typeof Oe){const Ne=JSON.stringify(B,void 0,2);throw new Error(`pathTemplate: ${D} contains the path parameter ${Pe} however, it is not present in parameters: ${Ne}.The value of the path parameter can either be a "string" of the form { ${Pe}: "some sample value" } or it can be an "object" of the form { "${Pe}": { value: "some sample value", skipUrlEncoding: true } }.`)}if("string"==typeof Oe.valueOf()&&(Z=Z.replace(be,encodeURIComponent(Oe))),"object"==typeof Oe.valueOf()){if(!Oe.value)throw new Error(`options.pathParameters[${Pe}] is of type "object" but it does not contain a "value" property.`);Z=Z.replace(be,Oe.skipUrlEncoding?Oe.value:encodeURIComponent(Oe.value))}})}this.url=Z}if(y.queryParameters){const D=y.queryParameters;if("object"!=typeof D)throw new Error('options.queryParameters must be of type object. It should be a JSON object of "query-parameter-name" as the key and the "query-parameter-value" as the value. The "query-parameter-value" may be fo type "string" or an "object" of the form { value: "query-parameter-value", skipUrlEncoding: true }.');this.url&&-1===this.url.indexOf("?")&&(this.url+="?");const B=[];this.query={};for(const G in D){const Z=D[G];if(Z)if("string"==typeof Z)B.push(G+"="+encodeURIComponent(Z)),this.query[G]=encodeURIComponent(Z);else if("object"==typeof Z){if(!Z.value)throw new Error(`options.queryParameters[${G}] is of type "object" but it does not contain a "value" property.`);Z.skipUrlEncoding?(B.push(G+"="+Z.value),this.query[G]=Z.value):(B.push(G+"="+encodeURIComponent(Z.value)),this.query[G]=encodeURIComponent(Z.value))}}this.url+=B.join("&")}if(y.headers){const D=y.headers;for(const B of Object.keys(y.headers))this.headers.set(B,D[B])}return this.headers.get("accept-language")||this.headers.set("accept-language","en-US"),!this.headers.get("x-ms-client-request-id")&&!y.disableClientRequestId&&this.headers.set("x-ms-client-request-id",this.requestId),this.headers.get("Content-Type")||this.headers.set("Content-Type","application/json; charset=utf-8"),this.body=y.body,null!=y.body&&(y.bodyIsStream?(this.headers.get("Transfer-Encoding")||this.headers.set("Transfer-Encoding","chunked"),"application/octet-stream"!==this.headers.get("Content-Type")&&this.headers.set("Content-Type","application/octet-stream")):(y.serializationMapper&&(this.body=new Q(y.mappers).serialize(y.serializationMapper,y.body,"requestBody")),y.disableJsonStringifyOnBody||(this.body=JSON.stringify(y.body)))),y.spanOptions&&(this.spanOptions=y.spanOptions),y.tracingContext&&(this.tracingContext=y.tracingContext),this.abortSignal=y.abortSignal,this.onDownloadProgress=y.onDownloadProgress,this.onUploadProgress=y.onUploadProgress,this}clone(){const y=new sn(this.url,this.method,this.body,this.query,this.headers&&this.headers.clone(),this.streamResponseBody,this.withCredentials,this.abortSignal,this.timeout,this.onUploadProgress,this.onDownloadProgress,this.proxySettings,this.keepAlive,this.decompressResponse,this.streamResponseStatusCodes);return this.formData&&(y.formData=this.formData),this.operationSpec&&(y.operationSpec=this.operationSpec),this.shouldDeserialize&&(y.shouldDeserialize=this.shouldDeserialize),this.operationResponseGetter&&(y.operationResponseGetter=this.operationResponseGetter),y}}const Cs=new Error("ProxyPolicy is not supported in browser environment");function Fo(L){return{create:(y,D)=>{throw Cs}}}var Rt=c(4637);const Tu=xi.g.HttpConstants.StatusCodes;function Ur(){return{create:(L,y)=>new Kr(L,y)}}const $t="The operation was aborted.";class Kr extends g.U{constructor(y,D,B){super(y,D),this.numberOfRetries=0,this._handleResponse=B||this._defaultResponseHandler}sendRequest(y){var D=this;return(0,E.Z)(function*(){const B=yield D._nextPolicy.sendRequest(y.clone());return B.status!==Tu.TooManyRequests&&B.status!==Tu.ServiceUnavailable?B:D._handleResponse(y,B)})()}_defaultResponseHandler(y,D){var B=this;return(0,E.Z)(function*(){var G;const Z=D.headers.get(xi.g.HeaderConstants.RETRY_AFTER);if(Z){const fe=Kr.parseRetryAfterHeader(Z);if(fe){if(B.numberOfRetries+=1,yield(0,No.g)(fe,void 0,{abortSignal:y.abortSignal,abortErrorMsg:$t}),null===(G=y.abortSignal)||void 0===G?void 0:G.aborted)throw new Rt._($t);return B.numberOfRetries<3?B.sendRequest(y):B._nextPolicy.sendRequest(y)}}return D})()}static parseRetryAfterHeader(y){const D=Number(y);return Number.isNaN(D)?Kr.parseDateRetryAfterHeader(y):1e3*D}static parseDateRetryAfterHeader(y){try{const D=Date.now(),G=Date.parse(y)-D;return Number.isNaN(G)?void 0:G}catch(D){return}}}class Ts extends g.U{constructor(y,D,B){super(y,D),this.authenticationProvider=B}signRequest(y){return this.authenticationProvider.signRequest(y)}sendRequest(y){return this.signRequest(y).then(D=>this._nextPolicy.sendRequest(D))}}const bs={enable:!0};class Vr extends g.U{constructor(y,D,B){super(y,D),this.keepAliveOptions=B}sendRequest(y){var D=this;return(0,E.Z)(function*(){return y.keepAlive=D.keepAliveOptions.enable,D._nextPolicy.sendRequest(y)})()}}var di="object"==typeof globalThis?globalThis:window,Bi="1.0.3",ji=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,Uo=function(L){var y=new Set([L]),D=new Set,B=L.match(ji);if(!B)return function(){return!1};var G_major=+B[1],G_minor=+B[2],G_patch=+B[3];if(null!=B[4])return function(Pe){return Pe===L};function Z(be){return D.add(be),!1}function fe(be){return y.add(be),!0}return function(Pe){if(y.has(Pe))return!0;if(D.has(Pe))return!1;var Oe=Pe.match(ji);if(!Oe)return Z(Pe);var Ne_minor=+Oe[2],Ne_patch=+Oe[3];return null!=Oe[4]||G_major!==+Oe[1]?Z(Pe):0===G_major?G_minor===Ne_minor&&G_patch<=Ne_patch?fe(Pe):Z(Pe):G_minor<=Ne_minor?fe(Pe):Z(Pe)}}(Bi),Vo=Bi.split(".")[0],fi=Symbol.for("opentelemetry.js.api."+Vo),Sr=di;function Bo(L,y,D,B){var G;void 0===B&&(B=!1);var Z=Sr[fi]=null!==(G=Sr[fi])&&void 0!==G?G:{version:Bi};if(!B&&Z[L]){var fe=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+L);return D.error(fe.stack||fe.message),!1}return Z.version!==Bi?(fe=new Error("@opentelemetry/api: All API registration versions must match"),D.error(fe.stack||fe.message),!1):(Z[L]=y,D.debug("@opentelemetry/api: Registered a global for "+L+" v"+Bi+"."),!0)}function hi(L){var y,D,B=null===(y=Sr[fi])||void 0===y?void 0:y.version;if(B&&Uo(B))return null===(D=Sr[fi])||void 0===D?void 0:D[L]}function Fn(L,y){y.debug("@opentelemetry/api: Unregistering a global for "+L+" v"+Bi+".");var D=Sr[fi];D&&delete D[L]}var Gn=function(){function L(y){this._namespace=y.namespace||"DiagComponentLogger"}return L.prototype.debug=function(){for(var y=[],D=0;D<arguments.length;D++)y[D]=arguments[D];return gn("debug",this._namespace,y)},L.prototype.error=function(){for(var y=[],D=0;D<arguments.length;D++)y[D]=arguments[D];return gn("error",this._namespace,y)},L.prototype.info=function(){for(var y=[],D=0;D<arguments.length;D++)y[D]=arguments[D];return gn("info",this._namespace,y)},L.prototype.warn=function(){for(var y=[],D=0;D<arguments.length;D++)y[D]=arguments[D];return gn("warn",this._namespace,y)},L.prototype.verbose=function(){for(var y=[],D=0;D<arguments.length;D++)y[D]=arguments[D];return gn("verbose",this._namespace,y)},L}();function gn(L,y,D){var B=hi("diag");if(B)return D.unshift(y),B[L].apply(B,D)}var mn=(()=>{return(L=mn||(mn={}))[L.NONE=0]="NONE",L[L.ERROR=30]="ERROR",L[L.WARN=50]="WARN",L[L.INFO=60]="INFO",L[L.DEBUG=70]="DEBUG",L[L.VERBOSE=80]="VERBOSE",L[L.ALL=9999]="ALL",mn;var L})(),Ir=function(){function L(){function y(B){return function(){var G=hi("diag");if(G)return G[B].apply(G,arguments)}}var D=this;D.setLogger=function(B,G){var Z,fe;if(void 0===G&&(G=mn.INFO),B===D){var be=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return D.error(null!==(Z=be.stack)&&void 0!==Z?Z:be.message),!1}var Pe=hi("diag"),Oe=function(L,y){function D(B,G){var Z=y[B];return"function"==typeof Z&&L>=G?Z.bind(y):function(){}}return L<mn.NONE?L=mn.NONE:L>mn.ALL&&(L=mn.ALL),y=y||{},{error:D("error",mn.ERROR),warn:D("warn",mn.WARN),info:D("info",mn.INFO),debug:D("debug",mn.DEBUG),verbose:D("verbose",mn.VERBOSE)}}(G,B);if(Pe){var Ne=null!==(fe=(new Error).stack)&&void 0!==fe?fe:"<failed to generate stacktrace>";Pe.warn("Current logger will be overwritten from "+Ne),Oe.warn("Current logger will overwrite one already registered from "+Ne)}return Bo("diag",Oe,D,!0)},D.disable=function(){Fn("diag",D)},D.createComponentLogger=function(B){return new Gn(B)},D.verbose=y("verbose"),D.debug=y("debug"),D.info=y("info"),D.warn=y("warn"),D.error=y("error")}return L.instance=function(){return this._instance||(this._instance=new L),this._instance},L}(),$n=function(){function L(y){this._entries=y?new Map(y):new Map}return L.prototype.getEntry=function(y){var D=this._entries.get(y);if(D)return Object.assign({},D)},L.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(y){return[y[0],y[1]]})},L.prototype.setEntry=function(y,D){var B=new L(this._entries);return B._entries.set(y,D),B},L.prototype.removeEntry=function(y){var D=new L(this._entries);return D._entries.delete(y),D},L.prototype.removeEntries=function(){for(var y=[],D=0;D<arguments.length;D++)y[D]=arguments[D];for(var B=new L(this._entries),G=0,Z=y;G<Z.length;G++){var fe=Z[G];B._entries.delete(fe)}return B},L.prototype.clear=function(){return new L},L}();function Wt(L){return void 0===L&&(L={}),new $n(new Map(Object.entries(L)))}Symbol("BaggageEntryMetadata"),Ir.instance();var Dr={get:function(L,y){if(null!=L)return L[y]},keys:function(L){return null==L?[]:Object.keys(L)}},hn={set:function(L,y,D){null!=L&&(L[y]=D)}};function Hi(L){return Symbol.for(L)}var bt=new function L(y){var D=this;D._currentContext=y?new Map(y):new Map,D.getValue=function(B){return D._currentContext.get(B)},D.setValue=function(B,G){var Z=new L(D._currentContext);return Z._currentContext.set(B,G),Z},D.deleteValue=function(B){var G=new L(D._currentContext);return G._currentContext.delete(B),G}},jo=function(L,y){for(var D=0,B=y.length,G=L.length;D<B;D++,G++)L[G]=y[D];return L},pr=function(){function L(){}return L.prototype.active=function(){return bt},L.prototype.with=function(y,D,B){for(var G=[],Z=3;Z<arguments.length;Z++)G[Z-3]=arguments[Z];return D.call.apply(D,jo([B],G))},L.prototype.bind=function(y,D){return D},L.prototype.enable=function(){return this},L.prototype.disable=function(){return this},L}(),Ho=function(L,y){for(var D=0,B=y.length,G=L.length;D<B;D++,G++)L[G]=y[D];return L},Qr="context",Wn=new pr,qi=function(){function L(){}return L.getInstance=function(){return this._instance||(this._instance=new L),this._instance},L.prototype.setGlobalContextManager=function(y){return Bo(Qr,y,Ir.instance())},L.prototype.active=function(){return this._getContextManager().active()},L.prototype.with=function(y,D,B){for(var G,Z=[],fe=3;fe<arguments.length;fe++)Z[fe-3]=arguments[fe];return(G=this._getContextManager()).with.apply(G,Ho([y,D,B],Z))},L.prototype.bind=function(y,D){return this._getContextManager().bind(y,D)},L.prototype._getContextManager=function(){return hi(Qr)||Wn},L.prototype.disable=function(){this._getContextManager().disable(),Fn(Qr,Ir.instance())},L}(),jr=(()=>{return(L=jr||(jr={}))[L.NONE=0]="NONE",L[L.SAMPLED=1]="SAMPLED",jr;var L})(),Un="0000000000000000",Yt="00000000000000000000000000000000",oa={traceId:Yt,spanId:Un,traceFlags:jr.NONE},Gi=function(){function L(y){void 0===y&&(y=oa),this._spanContext=y}return L.prototype.spanContext=function(){return this._spanContext},L.prototype.setAttribute=function(y,D){return this},L.prototype.setAttributes=function(y){return this},L.prototype.addEvent=function(y,D){return this},L.prototype.setStatus=function(y){return this},L.prototype.updateName=function(y){return this},L.prototype.end=function(y){},L.prototype.isRecording=function(){return!1},L.prototype.recordException=function(y,D){},L}(),$i=Hi("OpenTelemetry Context Key SPAN");function Wi(L){return L.getValue($i)||void 0}function gi(L,y){return L.setValue($i,y)}function go(L){return L.deleteValue($i)}function mi(L,y){return gi(L,new Gi(y))}function Dn(L){var y;return null===(y=Wi(L))||void 0===y?void 0:y.spanContext()}var _u=/^([0-9a-f]{32})$/i,gr=/^[0-9a-f]{16}$/i;function mo(L){return function(L){return _u.test(L)&&L!==Yt}(L.traceId)&&function(L){return gr.test(L)&&L!==Un}(L.spanId)}function yo(L){return new Gi(L)}var ur=qi.getInstance(),sa=function(){function L(){}return L.prototype.startSpan=function(y,D,B){if(Boolean(null==D?void 0:D.root))return new Gi;var Z=B&&Dn(B);return function(L){return"object"==typeof L&&"string"==typeof L.spanId&&"string"==typeof L.traceId&&"number"==typeof L.traceFlags}(Z)&&mo(Z)?new Gi(Z):new Gi},L.prototype.startActiveSpan=function(y,D,B,G){var Z,fe,be;if(!(arguments.length<2)){2===arguments.length?be=D:3===arguments.length?(Z=D,be=B):(Z=D,fe=B,be=G);var Pe=null!=fe?fe:ur.active(),Oe=this.startSpan(y,Z,Pe),Ne=gi(Pe,Oe);return ur.with(Ne,be,void 0,Oe)}},L}(),aa=new sa,_s=function(){function L(y,D,B){this._provider=y,this.name=D,this.version=B}return L.prototype.startSpan=function(y,D,B){return this._getTracer().startSpan(y,D,B)},L.prototype.startActiveSpan=function(y,D,B,G){var Z=this._getTracer();return Reflect.apply(Z.startActiveSpan,Z,arguments)},L.prototype._getTracer=function(){if(this._delegate)return this._delegate;var y=this._provider.getDelegateTracer(this.name,this.version);return y?(this._delegate=y,this._delegate):aa},L}(),wu=new(function(){function L(){}return L.prototype.getTracer=function(y,D){return new sa},L}()),Pr=function(){function L(){}return L.prototype.getTracer=function(y,D){var B;return null!==(B=this.getDelegateTracer(y,D))&&void 0!==B?B:new _s(this,y,D)},L.prototype.getDelegate=function(){var y;return null!==(y=this._delegate)&&void 0!==y?y:wu},L.prototype.setDelegate=function(y){this._delegate=y},L.prototype.getDelegateTracer=function(y,D){var B;return null===(B=this._delegate)||void 0===B?void 0:B.getTracer(y,D)},L}(),qo="trace",Qc=function(){function L(){this._proxyTracerProvider=new Pr,this.wrapSpanContext=yo,this.isSpanContextValid=mo,this.deleteSpan=go,this.getSpan=Wi,this.getSpanContext=Dn,this.setSpan=gi,this.setSpanContext=mi}return L.getInstance=function(){return this._instance||(this._instance=new L),this._instance},L.prototype.setGlobalTracerProvider=function(y){var D=Bo(qo,this._proxyTracerProvider,Ir.instance());return D&&this._proxyTracerProvider.setDelegate(y),D},L.prototype.getTracerProvider=function(){return hi(qo)||this._proxyTracerProvider},L.prototype.getTracer=function(y,D){return this.getTracerProvider().getTracer(y,D)},L.prototype.disable=function(){Fn(qo,Ir.instance()),this._proxyTracerProvider=new Pr},L}(),ua=function(){function L(){}return L.prototype.inject=function(y,D){},L.prototype.extract=function(y,D){return y},L.prototype.fields=function(){return[]},L}(),Su=Hi("OpenTelemetry Baggage Key");function Jc(L){return L.getValue(Su)||void 0}function ca(L,y){return L.setValue(Su,y)}function Yc(L){return L.deleteValue(Su)}var ws="propagation",Xc=new ua,Iu=function(){function L(){this.createBaggage=Wt,this.getBaggage=Jc,this.setBaggage=ca,this.deleteBaggage=Yc}return L.getInstance=function(){return this._instance||(this._instance=new L),this._instance},L.prototype.setGlobalPropagator=function(y){return Bo(ws,y,Ir.instance())},L.prototype.inject=function(y,D,B){return void 0===B&&(B=hn),this._getGlobalPropagator().inject(y,D,B)},L.prototype.extract=function(y,D,B){return void 0===B&&(B=Dr),this._getGlobalPropagator().extract(y,D,B)},L.prototype.fields=function(){return this._getGlobalPropagator().fields()},L.prototype.disable=function(){Fn(ws,Ir.instance())},L.prototype._getGlobalPropagator=function(){return hi(ws)||Xc},L}(),la=qi.getInstance(),zi=Qc.getInstance();Iu.getInstance(),Ir.instance();var Ki=(()=>{return(L=Ki||(Ki={}))[L.INTERNAL=0]="INTERNAL",L[L.SERVER=1]="SERVER",L[L.CLIENT=2]="CLIENT",L[L.PRODUCER=3]="PRODUCER",L[L.CONSUMER=4]="CONSUMER",Ki;var L})();function vi(L,y){return zi.setSpan(L,y)}const Pu=la;var cn=(()=>{return(L=cn||(cn={}))[L.UNSET=0]="UNSET",L[L.OK=1]="OK",L[L.ERROR=2]="ERROR",cn;var L})();function Jr(L){return function(y,D){const B=zi.getTracer("azure/core-tracing",void 0),G=(null==D?void 0:D.tracingOptions)||{},Z=Object.assign({kind:Ki.INTERNAL},G.spanOptions),fe=L.packagePrefix?`${L.packagePrefix}.${y}`:y;let be;be=function(){var L;if("undefined"==typeof process)return!1;const y=null===(L=process.env.AZURE_TRACING_DISABLED)||void 0===L?void 0:L.toLowerCase();return"false"!==y&&"0"!==y&&Boolean(y)}()?zi.wrapSpanContext(oa):B.startSpan(fe,Z,G.tracingContext),L.namespace&&be.setAttribute("az.namespace",L.namespace);let Pe=G.spanOptions||{};be.isRecording()&&L.namespace&&(Pe=Object.assign(Object.assign({},G.spanOptions),{attributes:Object.assign(Object.assign({},Z.attributes),{"az.namespace":L.namespace})}));const Oe=Object.assign(Object.assign({},G),{spanOptions:Pe,tracingContext:vi(G.tracingContext||Pu.active(),be)});return{span:be,updatedOptions:Object.assign(Object.assign({},D),{tracingOptions:Oe})}}}const Mu=Jr({packagePrefix:"",namespace:""});class vo extends g.U{constructor(y,D,B){super(y,D),this.userAgent=B.userAgent}sendRequest(y){var D=this;return(0,E.Z)(function*(){if(!y.tracingContext)return D._nextPolicy.sendRequest(y);const B=D.tryCreateSpan(y);if(!B)return D._nextPolicy.sendRequest(y);try{const G=yield D._nextPolicy.sendRequest(y);return D.tryProcessResponse(B,G),G}catch(G){throw D.tryProcessError(B,G),G}})()}tryCreateSpan(y){var D;try{const B=b.UK.parse(y.url).getPath()||"/",{span:G}=Mu(B,{tracingOptions:{spanOptions:Object.assign(Object.assign({},y.spanOptions),{kind:Ki.CLIENT}),tracingContext:y.tracingContext}});if(!G.isRecording())return void G.end();const Z=null===(D=y.tracingContext)||void 0===D?void 0:D.getValue(Symbol.for("az.namespace"));"string"==typeof Z&&G.setAttribute("az.namespace",Z),G.setAttributes({"http.method":y.method,"http.url":y.url,requestId:y.requestId}),this.userAgent&&G.setAttribute("http.user_agent",this.userAgent);const fe=G.spanContext(),be=function(L){const y=[];if(L.traceId||y.push("traceId"),L.spanId||y.push("spanId"),y.length)return;const B=(L.traceFlags||0).toString(16);return`00-${L.traceId}-${L.spanId}-${1===B.length?`0${B}`:B}`}(fe);if(be&&zi.isSpanContextValid(fe)){y.headers.set("traceparent",be);const Pe=fe.traceState&&fe.traceState.serialize();Pe&&y.headers.set("tracestate",Pe)}return G}catch(B){return void _.warning(`Skipping creating a tracing span due to an error: ${B.message}`)}}tryProcessError(y,D){try{y.setStatus({code:cn.ERROR,message:D.message}),D.statusCode&&y.setAttribute("http.status_code",D.statusCode),y.end()}catch(B){_.warning(`Skipping tracing span processing due to an error: ${B.message}`)}}tryProcessResponse(y,D){try{y.setAttribute("http.status_code",D.status);const B=D.headers.get("x-ms-request-id");B&&y.setAttribute("serviceRequestId",B),y.setStatus({code:cn.OK}),y.end()}catch(B){_.warning(`Skipping tracing span processing due to an error: ${B.message}`)}}}const Qi=new Error("DisableResponseDecompressionPolicy is not supported in browser environment");class fa extends g.U{constructor(y,D){super(y,D)}sendRequest(y){var D=this;return(0,E.Z)(function*(){if("string"==typeof y.body&&y.body.startsWith("[")){const B=JSON.parse(y.body);Array.isArray(B)&&(y.body=B.map(G=>JSON.stringify(G)+"\n").join(""))}return D._nextPolicy.sendRequest(y)})()}}const Ds=URL;class vn{sendRequest(y){var D;const B=new XMLHttpRequest;if(y.proxySettings)throw new Error("HTTP proxy is not supported in browser environment");const G=y.abortSignal;if(G){if(G.aborted)return Promise.reject(new Rt._("The operation was aborted."));const Z=()=>{B.abort()};G.addEventListener("abort",Z),B.addEventListener("readystatechange",()=>{B.readyState===XMLHttpRequest.DONE&&G.removeEventListener("abort",Z)})}if(ha(B.upload,y.onUploadProgress),ha(B,y.onDownloadProgress),y.formData){const Z=y.formData,fe=new FormData,be=(Oe,Ne)=>{Ne&&Object.prototype.hasOwnProperty.call(Ne,"value")&&Object.prototype.hasOwnProperty.call(Ne,"options")?fe.append(Oe,Ne.value,Ne.options):fe.append(Oe,Ne)};for(const Oe of Object.keys(Z)){const Ne=Z[Oe];if(Array.isArray(Ne))for(let Ze=0;Ze<Ne.length;Ze++)be(Oe,Ne[Ze]);else be(Oe,Ne)}y.body=fe,y.formData=void 0;const Pe=y.headers.get("Content-Type");Pe&&-1!==Pe.indexOf("multipart/form-data")&&y.headers.remove("Content-Type")}B.open(y.method,y.url),B.timeout=y.timeout,B.withCredentials=y.withCredentials;for(const Z of y.headers.headersArray())B.setRequestHeader(Z.name,Z.value);return B.responseType=(null===(D=y.streamResponseStatusCodes)||void 0===D?void 0:D.size)||y.streamResponseBody?"blob":"text",B.send(void 0===y.body?null:y.body),new Promise("blob"===B.responseType?(Z,fe)=>{(function(L,y,D,B){L.addEventListener("readystatechange",()=>{var G;if(L.readyState===XMLHttpRequest.HEADERS_RECEIVED)if(y.streamResponseBody||(null===(G=y.streamResponseStatusCodes)||void 0===G?void 0:G.has(L.status))){const Z=new Promise((fe,be)=>{L.addEventListener("load",()=>{fe(L.response)}),zn(y,L,be)});D({request:y,status:L.status,headers:Ji(L),blobBody:Z})}else L.addEventListener("load",()=>{if(L.response){const Z=new FileReader;Z.onload=function(fe){var be;const Pe=null===(be=fe.target)||void 0===be?void 0:be.result;D({request:y,status:L.status,headers:Ji(L),bodyAsText:Pe})},Z.onerror=function(fe){B(Z.error)},Z.readAsText(L.response,"UTF-8")}else D({request:y,status:L.status,headers:Ji(L)})})})})(B,y,Z,fe),zn(y,B,fe)}:function(Z,fe){B.addEventListener("load",()=>Z({request:y,status:B.status,headers:Ji(B),bodyAsText:B.responseText})),zn(y,B,fe)})}}function ha(L,y){y&&L.addEventListener("progress",D=>y({loadedBytes:D.loaded}))}function Ji(L){const y=new ho,D=L.getAllResponseHeaders().trim().split(/[\r\n]+/);for(const B of D){const G=B.indexOf(":"),Z=B.slice(0,G),fe=B.slice(G+2);y.set(Z,fe)}return y}function zn(L,y,D){y.addEventListener("error",()=>D(new wn(`Failed to send request to ${L.url}`,wn.REQUEST_SEND_ERROR,void 0,L)));const B=new Rt._("The operation was aborted.");y.addEventListener("abort",()=>D(B)),y.addEventListener("timeout",()=>D(B))}let As;function Wo(L,y){let D;return"string"==typeof L?D=L:(D=y(),"function"==typeof L&&(D=L(D))),D}function Ar(L,y){const D=[];let B;if(L.sendStreamingJson&&D.push({create:(L,y)=>new fa(L,y)}),L.userAgentOptions&&L.userAgentOptions.userAgentPrefix){const Oe=[];Oe.push(L.userAgentOptions.userAgentPrefix);const Ne=xo();-1===Oe.indexOf(Ne)&&Oe.push(Ne),B=Oe.join(" ")}const G=Object.assign(Object.assign({},bs),L.keepAliveOptions),Z=Object.assign(Object.assign({},Li),L.retryOptions),fe=Object.assign(Object.assign({},$c),L.redirectOptions);m.UG&&D.push(Fo());const be=Object.assign(Object.assign({},qt),L.deserializationOptions),Pe=Object.assign({},L.loggingOptions);return D.push(function(L={}){return{create:(y,D)=>new vo(y,D,L)}}({userAgent:B}),function(L){return{create:(y,D)=>new Vr(y,D,L||bs)}}(G),na({value:B}),pu(),Ys(be.expectedContentTypes),Ur(),Ui(),ai(Z.maxRetries,Z.retryDelayInMs,Z.maxRetryDelayInMs)),fe.handleRedirects&&D.push(zr(fe.maxRetries)),y&&D.push(y),D.push(U(Pe)),m.UG&&!1===L.decompressResponse&&D.push({create:(L,y)=>{throw Qi}}),{httpClient:L.httpClient,requestPolicyFactories:D}}function Ci(L,y,D,B){return Ct(L,y,D.parameterPath,D.mapper,B)}function Ct(L,y,D,B,G){var Z;let fe;"string"==typeof D&&(D=[D]);const be=null===(Z=y.options)||void 0===Z?void 0:Z.serializerOptions;if(Array.isArray(D)){if(D.length>0){if(B.isConstant)fe=B.defaultValue;else{let Oe=Co(y,D);Oe.propertyFound||(Oe=Co(L,D));let Ne=!1;Oe.propertyFound||(Ne=B.required||"options"===D[0]&&2===D.length),fe=Ne?B.defaultValue:Oe.propertyValue}const Pe=M(D,B);G.serialize(B,fe,Pe,be)}}else{B.required&&(fe={});for(const Pe in D){const Oe=B.type.modelProperties[Pe],Ne=D[Pe],Ze=Ct(L,y,Ne,Oe,G),st=M(Ne,Oe);G.serialize(Oe,Ze,st,be),null!=Ze&&(fe||(fe={}),fe[Pe]=Ze)}}return fe}function Co(L,y){const D={propertyFound:!1};let B=0;for(;B<y.length;++B){const G=y[B];if(null==L||!(G in L))break;L=L[G]}return B===y.length&&(D.propertyValue=L,D.propertyFound=!0),D}function Os(L,y){const D=L.parsedHeaders,B=y&&y.bodyMapper,G=Z=>Object.defineProperty(Z,"_response",{value:L});if(B){const Z=B.type.name;if("Stream"===Z)return G(Object.assign(Object.assign({},D),{blobBody:L.blobBody,readableStreamBody:L.readableStreamBody}));const fe="Composite"===Z&&B.type.modelProperties||{},be=Object.keys(fe).some(Pe=>""===fe[Pe].serializedName);if("Sequence"===Z||be){const Pe=[...L.parsedBody||[]];for(const Oe of Object.keys(fe))fe[Oe].serializedName&&(Pe[Oe]=L.parsedBody[Oe]);if(D)for(const Oe of Object.keys(D))Pe[Oe]=D[Oe];return G(Pe),Pe}if("Composite"===Z||"Dictionary"===Z)return G(Object.assign(Object.assign({},D),L.parsedBody))}return B||"HEAD"===L.request.method||m.ty(L.parsedBody)?G(Object.assign(Object.assign({},D),{body:L.parsedBody})):G(Object.assign(Object.assign({},D),L.parsedBody))}function Pt(L){var y;const{requestOptions:D,tracingOptions:B}=L;let Z=(0,d._T)(L,["requestOptions","tracingOptions"]);return D&&(Z=Object.assign(Object.assign({},Z),D)),B&&(Z.tracingContext=B.tracingContext,Z.spanOptions=null===(y=B)||void 0===y?void 0:y.spanOptions),Z}c(3369);const gt=Jr({packagePrefix:"Azure.Communication",namespace:"Microsoft.Communication"});var Hr=c(8199);const Ms=L=>{const{id:y}=L,D=(0,d._T)(L,["id"]);return Object.assign(Object.assign({},D),{communicationIdentifier:(0,Hr.J)(y)})},cr=L=>{const{communicationIdentifier:y}=L,D=(0,d._T)(L,["communicationIdentifier"]);return Object.assign(Object.assign({},D),{id:(0,Hr.H)(y)})},ma=L=>{const{participants:y,initiatorCommunicationIdentifier:D}=L,B=(0,d._T)(L,["participants","initiatorCommunicationIdentifier"]);let G=Object.assign({},B);if(D){const Z=(0,Hr.H)(D);G=Object.assign(Object.assign({},G),{initiator:Z})}return y&&(G=Object.assign(Object.assign({},G),{participants:null==y?void 0:y.map(Z=>cr(Z))})),G},S=L=>{const{content:y,senderCommunicationIdentifier:D}=L,B=(0,d._T)(L,["content","senderCommunicationIdentifier"]);let G=Object.assign({},B);if(y&&(G=Object.assign(Object.assign({},G),{content:ma(y)})),D){const Z=(0,Hr.H)(D);G=Object.assign(Object.assign({},G),{sender:Z})}return G},O=L=>{const{createdByCommunicationIdentifier:y}=L,D=(0,d._T)(L,["createdByCommunicationIdentifier"]);return y?Object.assign(Object.assign({},D),{createdBy:(0,Hr.H)(y)}):Object.assign({},D)},z=L=>{const{senderCommunicationIdentifier:y}=L,D=(0,d._T)(L,["senderCommunicationIdentifier"]);return Object.assign(Object.assign({},D),{sender:(0,Hr.H)(y)})},X={type:{name:"Composite",className:"ChatMessageReadReceiptsCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatMessageReadReceipt"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},ue={type:{name:"Composite",className:"ChatMessageReadReceipt",modelProperties:{senderCommunicationIdentifier:{serializedName:"senderCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},chatMessageId:{serializedName:"chatMessageId",required:!0,type:{name:"String"}},readOn:{serializedName:"readOn",required:!0,type:{name:"DateTime"}}}}},ve={type:{name:"Composite",className:"CommunicationIdentifierModel",modelProperties:{rawId:{serializedName:"rawId",type:{name:"String"}},communicationUser:{serializedName:"communicationUser",type:{name:"Composite",className:"CommunicationUserIdentifierModel"}},phoneNumber:{serializedName:"phoneNumber",type:{name:"Composite",className:"PhoneNumberIdentifierModel"}},microsoftTeamsUser:{serializedName:"microsoftTeamsUser",type:{name:"Composite",className:"MicrosoftTeamsUserIdentifierModel"}}}}},Ae={type:{name:"Composite",className:"CommunicationUserIdentifierModel",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}}}}},we={type:{name:"Composite",className:"PhoneNumberIdentifierModel",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"String"}}}}},Me={type:{name:"Composite",className:"MicrosoftTeamsUserIdentifierModel",modelProperties:{userId:{serializedName:"userId",required:!0,type:{name:"String"}},isAnonymous:{serializedName:"isAnonymous",type:{name:"Boolean"}},cloud:{serializedName:"cloud",type:{name:"String"}}}}},_e={type:{name:"Composite",className:"CommunicationErrorResponse",modelProperties:{error:{serializedName:"error",type:{name:"Composite",className:"ChatError"}}}}},Ge={type:{name:"Composite",className:"ChatError",modelProperties:{code:{serializedName:"code",required:!0,type:{name:"String"}},message:{serializedName:"message",required:!0,type:{name:"String"}},target:{serializedName:"target",readOnly:!0,type:{name:"String"}},details:{serializedName:"details",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}},innerError:{serializedName:"innererror",type:{name:"Composite",className:"ChatError"}}}}},Qe={type:{name:"Composite",className:"SendReadReceiptRequest",modelProperties:{chatMessageId:{serializedName:"chatMessageId",required:!0,type:{name:"String"}}}}},nt={type:{name:"Composite",className:"SendChatMessageRequest",modelProperties:{content:{serializedName:"content",required:!0,type:{name:"String"}},senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}},type:{serializedName:"type",type:{name:"Enum",allowedValues:["text","html","topicUpdated","participantAdded","participantRemoved"]}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},ct={type:{name:"Composite",className:"SendChatMessageResult",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}}}}},pt={type:{name:"Composite",className:"ChatMessagesCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatMessage"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},it={type:{name:"Composite",className:"ChatMessage",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},type:{serializedName:"type",required:!0,type:{name:"Enum",allowedValues:["text","html","topicUpdated","participantAdded","participantRemoved"]}},sequenceId:{serializedName:"sequenceId",required:!0,type:{name:"String"}},version:{serializedName:"version",required:!0,type:{name:"String"}},content:{serializedName:"content",type:{name:"Composite",className:"ChatMessageContent"}},senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}},createdOn:{serializedName:"createdOn",required:!0,type:{name:"DateTime"}},senderCommunicationIdentifier:{serializedName:"senderCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},editedOn:{serializedName:"editedOn",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},yt={type:{name:"Composite",className:"ChatMessageContent",modelProperties:{message:{serializedName:"message",type:{name:"String"}},topic:{serializedName:"topic",type:{name:"String"}},participants:{serializedName:"participants",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},initiatorCommunicationIdentifier:{serializedName:"initiatorCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}}}}},Gt={type:{name:"Composite",className:"ChatParticipant",modelProperties:{communicationIdentifier:{serializedName:"communicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},displayName:{serializedName:"displayName",type:{name:"String"}},shareHistoryTime:{serializedName:"shareHistoryTime",type:{name:"DateTime"}}}}},ln={type:{name:"Composite",className:"UpdateChatMessageRequest",modelProperties:{content:{serializedName:"content",type:{name:"String"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},Sn={type:{name:"Composite",className:"ChatParticipantsCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Pn={type:{name:"Composite",className:"AddChatParticipantsRequest",modelProperties:{participants:{serializedName:"participants",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}}}}},In={type:{name:"Composite",className:"AddChatParticipantsResult",modelProperties:{invalidParticipants:{serializedName:"invalidParticipants",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}}}}},Tn={type:{name:"Composite",className:"CreateChatThreadRequest",modelProperties:{topic:{serializedName:"topic",required:!0,type:{name:"String"}},participants:{serializedName:"participants",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}}}}},An={type:{name:"Composite",className:"CreateChatThreadResult",modelProperties:{chatThread:{serializedName:"chatThread",type:{name:"Composite",className:"ChatThreadProperties"}},invalidParticipants:{serializedName:"invalidParticipants",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}}}}},Zn={type:{name:"Composite",className:"ChatThreadProperties",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},topic:{serializedName:"topic",required:!0,type:{name:"String"}},createdOn:{serializedName:"createdOn",required:!0,type:{name:"DateTime"}},createdByCommunicationIdentifier:{serializedName:"createdByCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}}}}},dn={type:{name:"Composite",className:"ChatThreadsItemCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatThreadItem"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Zt={type:{name:"Composite",className:"ChatThreadItem",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},topic:{serializedName:"topic",required:!0,type:{name:"String"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},lastMessageReceivedOn:{serializedName:"lastMessageReceivedOn",readOnly:!0,type:{name:"DateTime"}}}}},Nt={type:{name:"Composite",className:"UpdateChatThreadRequest",modelProperties:{topic:{serializedName:"topic",type:{name:"String"}}}}},Bt={type:{name:"Composite",className:"SendTypingNotificationRequest",modelProperties:{senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}}}}},zt={parameterPath:"accept",mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},jt={parameterPath:"endpoint",mapper:{serializedName:"endpoint",required:!0,type:{name:"String"}},skipEncoding:!0},an={parameterPath:"chatThreadId",mapper:{serializedName:"chatThreadId",required:!0,type:{name:"String"}}},er={parameterPath:["options","maxPageSize"],mapper:{serializedName:"maxPageSize",type:{name:"Number"}}},vr={parameterPath:["options","skip"],mapper:{serializedName:"skip",type:{name:"Number"}}},Kt={parameterPath:"apiVersion",mapper:{defaultValue:"2021-04-05-preview6",isConstant:!0,serializedName:"api-version",type:{name:"String"}}},kn={parameterPath:["options","contentType"],mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},To={parameterPath:"sendReadReceiptRequest",mapper:Qe},zo={parameterPath:"sendChatMessageRequest",mapper:nt},Ti={parameterPath:["options","startTime"],mapper:{serializedName:"startTime",type:{name:"DateTime"}}},Ko={parameterPath:"chatMessageId",mapper:{serializedName:"chatMessageId",required:!0,type:{name:"String"}}},bo={parameterPath:["options","contentType"],mapper:{defaultValue:"application/merge-patch+json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},Or={parameterPath:"updateChatMessageRequest",mapper:ln},Xi={parameterPath:"participantCommunicationIdentifier",mapper:ve},Uu={parameterPath:"addChatParticipantsRequest",mapper:Pn},Vu={parameterPath:"updateChatThreadRequest",mapper:Nt},Eo={parameterPath:["options","sendTypingNotificationRequest"],mapper:Bt},Qo={parameterPath:"nextLink",mapper:{serializedName:"nextLink",required:!0,type:{name:"String"}},skipEncoding:!0},Md={parameterPath:"createChatThreadRequest",mapper:Tn};class kp{constructor(y){this.client=y}listChatReadReceipts(y,D){const B={chatThreadId:y,options:Pt(D||{})};return this.client.sendOperationRequest(B,ya)}sendChatReadReceipt(y,D,B){const G={chatThreadId:y,sendReadReceiptRequest:D,options:Pt(B||{})};return this.client.sendOperationRequest(G,nl)}sendChatMessage(y,D,B){const G={chatThreadId:y,sendChatMessageRequest:D,options:Pt(B||{})};return this.client.sendOperationRequest(G,Bu)}listChatMessages(y,D){const B={chatThreadId:y,options:Pt(D||{})};return this.client.sendOperationRequest(B,va)}getChatMessage(y,D,B){const G={chatThreadId:y,chatMessageId:D,options:Pt(B||{})};return this.client.sendOperationRequest(G,rl)}updateChatMessage(y,D,B,G){const Z={chatThreadId:y,chatMessageId:D,updateChatMessageRequest:B,options:Pt(G||{})};return this.client.sendOperationRequest(Z,il)}deleteChatMessage(y,D,B){const G={chatThreadId:y,chatMessageId:D,options:Pt(B||{})};return this.client.sendOperationRequest(G,Jo)}listChatParticipants(y,D){const B={chatThreadId:y,options:Pt(D||{})};return this.client.sendOperationRequest(B,kd)}removeChatParticipant(y,D,B){const G={chatThreadId:y,participantCommunicationIdentifier:D,options:Pt(B||{})};return this.client.sendOperationRequest(G,Yo)}addChatParticipants(y,D,B){const G={chatThreadId:y,addChatParticipantsRequest:D,options:Pt(B||{})};return this.client.sendOperationRequest(G,ju)}updateChatThreadProperties(y,D,B){const G={chatThreadId:y,updateChatThreadRequest:D,options:Pt(B||{})};return this.client.sendOperationRequest(G,Ca)}getChatThreadProperties(y,D){const B={chatThreadId:y,options:Pt(D||{})};return this.client.sendOperationRequest(B,xp)}sendTypingNotification(y,D){const B={chatThreadId:y,options:Pt(D||{})};return this.client.sendOperationRequest(B,ol)}listChatReadReceiptsNext(y,D,B){const G={chatThreadId:y,nextLink:D,options:Pt(B||{})};return this.client.sendOperationRequest(G,sl)}listChatMessagesNext(y,D,B){const G={chatThreadId:y,nextLink:D,options:Pt(B||{})};return this.client.sendOperationRequest(G,xd)}listChatParticipantsNext(y,D,B){const G={chatThreadId:y,nextLink:D,options:Pt(B||{})};return this.client.sendOperationRequest(G,Ld)}}const tr=new Q(s,!1),ya={path:"/chat/threads/{chatThreadId}/readReceipts",httpMethod:"GET",responses:{200:{bodyMapper:X},401:{bodyMapper:_e,isError:!0},403:{bodyMapper:_e,isError:!0},429:{bodyMapper:_e,isError:!0},503:{bodyMapper:_e,isError:!0}},queryParameters:[er,vr,Kt],urlParameters:[jt,an],headerParameters:[zt],serializer:tr},nl={path:"/chat/threads/{chatThreadId}/readReceipts",httpMethod:"POST",responses:{200:{},401:{bodyMapper:_e,isError:!0},403:{bodyMapper:_e,isError:!0},429:{bodyMapper:_e,isError:!0},503:{bodyMapper:_e,isError:!0}},requestBody:To,queryParameters:[Kt],urlParameters:[jt,an],headerParameters:[zt,kn],mediaType:"json",serializer:tr},Bu={path:"/chat/threads/{chatThreadId}/messages",httpMethod:"POST",responses:{201:{bodyMapper:ct},401:{bodyMapper:_e,isError:!0},403:{bodyMapper:_e,isError:!0},429:{bodyMapper:_e,isError:!0},503:{bodyMapper:_e,isError:!0}},requestBody:zo,queryParameters:[Kt],urlParameters:[jt,an],headerParameters:[zt,kn],mediaType:"json",serializer:tr},va={path:"/chat/threads/{chatThreadId}/messages",httpMethod:"GET",responses:{200:{bodyMapper:pt},401:{bodyMapper:_e,isError:!0},403:{bodyMapper:_e,isError:!0},429:{bodyMapper:_e,isError:!0},503:{bodyMapper:_e,isError:!0}},queryParameters:[er,Kt,Ti],urlParameters:[jt,an],headerParameters:[zt],serializer:tr},rl={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"GET",responses:{200:{bodyMapper:it},401:{bodyMapper:_e,isError:!0},403:{bodyMapper:_e,isError:!0},429:{bodyMapper:_e,isError:!0},503:{bodyMapper:_e,isError:!0}},queryParameters:[Kt],urlParameters:[jt,an,Ko],headerParameters:[zt],serializer:tr},il={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"PATCH",responses:{204:{},401:{bodyMapper:_e,isError:!0},403:{bodyMapper:_e,isError:!0},429:{bodyMapper:_e,isError:!0},503:{bodyMapper:_e,isError:!0}},requestBody:Or,queryParameters:[Kt],urlParameters:[jt,an,Ko],headerParameters:[zt,bo],mediaType:"json",serializer:tr},Jo={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"DELETE",responses:{204:{},401:{bodyMapper:_e,isError:!0},403:{bodyMapper:_e,isError:!0},429:{bodyMapper:_e,isError:!0},503:{bodyMapper:_e,isError:!0}},queryParameters:[Kt],urlParameters:[jt,an,Ko],headerParameters:[zt],serializer:tr},kd={path:"/chat/threads/{chatThreadId}/participants",httpMethod:"GET",responses:{200:{bodyMapper:Sn},401:{bodyMapper:_e,isError:!0},403:{bodyMapper:_e,isError:!0},429:{bodyMapper:_e,isError:!0},503:{bodyMapper:_e,isError:!0}},queryParameters:[er,vr,Kt],urlParameters:[jt,an],headerParameters:[zt],serializer:tr},Yo={path:"/chat/threads/{chatThreadId}/participants/:remove",httpMethod:"POST",responses:{204:{},401:{bodyMapper:_e,isError:!0},403:{bodyMapper:_e,isError:!0},429:{bodyMapper:_e,isError:!0},503:{bodyMapper:_e,isError:!0}},requestBody:Xi,queryParameters:[Kt],urlParameters:[jt,an],headerParameters:[zt,kn],mediaType:"json",serializer:tr},ju={path:"/chat/threads/{chatThreadId}/participants/:add",httpMethod:"POST",responses:{201:{bodyMapper:In},401:{bodyMapper:_e,isError:!0},403:{bodyMapper:_e,isError:!0},429:{bodyMapper:_e,isError:!0},503:{bodyMapper:_e,isError:!0}},requestBody:Uu,queryParameters:[Kt],urlParameters:[jt,an],headerParameters:[zt,kn],mediaType:"json",serializer:tr},Ca={path:"/chat/threads/{chatThreadId}",httpMethod:"PATCH",responses:{204:{},401:{bodyMapper:_e,isError:!0},403:{bodyMapper:_e,isError:!0},429:{bodyMapper:_e,isError:!0},503:{bodyMapper:_e,isError:!0}},requestBody:Vu,queryParameters:[Kt],urlParameters:[jt,an],headerParameters:[zt,bo],mediaType:"json",serializer:tr},xp={path:"/chat/threads/{chatThreadId}",httpMethod:"GET",responses:{200:{bodyMapper:Zn},401:{bodyMapper:_e,isError:!0},403:{bodyMapper:_e,isError:!0},429:{bodyMapper:_e,isError:!0},503:{bodyMapper:_e,isError:!0}},queryParameters:[Kt],urlParameters:[jt,an],headerParameters:[zt],serializer:tr},ol={path:"/chat/threads/{chatThreadId}/typing",httpMethod:"POST",responses:{200:{},401:{bodyMapper:_e,isError:!0},403:{bodyMapper:_e,isError:!0},429:{bodyMapper:_e,isError:!0},503:{bodyMapper:_e,isError:!0}},requestBody:Eo,queryParameters:[Kt],urlParameters:[jt,an],headerParameters:[zt,kn],mediaType:"json",serializer:tr},sl={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:X},401:{bodyMapper:_e,isError:!0},403:{bodyMapper:_e,isError:!0},429:{bodyMapper:_e,isError:!0},503:{bodyMapper:_e,isError:!0}},queryParameters:[er,vr,Kt],urlParameters:[jt,an,Qo],headerParameters:[zt],serializer:tr},xd={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:pt},401:{bodyMapper:_e,isError:!0},403:{bodyMapper:_e,isError:!0},429:{bodyMapper:_e,isError:!0},503:{bodyMapper:_e,isError:!0}},queryParameters:[er,Kt,Ti],urlParameters:[jt,an,Qo],headerParameters:[zt],serializer:tr},Ld={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Sn},401:{bodyMapper:_e,isError:!0},403:{bodyMapper:_e,isError:!0},429:{bodyMapper:_e,isError:!0},503:{bodyMapper:_e,isError:!0}},queryParameters:[er,vr,Kt],urlParameters:[jt,an,Qo],headerParameters:[zt],serializer:tr};class Ns{constructor(y){this.client=y}createChatThread(y,D){const B={createChatThreadRequest:y,options:Pt(D||{})};return this.client.sendOperationRequest(B,Hu)}listChatThreads(y){const D={options:Pt(y||{})};return this.client.sendOperationRequest(D,Ta)}deleteChatThread(y,D){const B={chatThreadId:y,options:Pt(D||{})};return this.client.sendOperationRequest(B,ba)}listChatThreadsNext(y,D){const B={nextLink:y,options:Pt(D||{})};return this.client.sendOperationRequest(B,Fd)}}const Xo=new Q(s,!1),Hu={path:"/chat/threads",httpMethod:"POST",responses:{201:{bodyMapper:An},401:{bodyMapper:_e,isError:!0},403:{bodyMapper:_e,isError:!0},429:{bodyMapper:_e,isError:!0},503:{bodyMapper:_e,isError:!0}},requestBody:Md,queryParameters:[Kt],urlParameters:[jt],headerParameters:[zt,kn,{parameterPath:["options","repeatabilityRequestId"],mapper:{serializedName:"repeatability-request-id",type:{name:"String"}}}],mediaType:"json",serializer:Xo},Ta={path:"/chat/threads",httpMethod:"GET",responses:{200:{bodyMapper:dn},401:{bodyMapper:_e,isError:!0},403:{bodyMapper:_e,isError:!0},429:{bodyMapper:_e,isError:!0},503:{bodyMapper:_e,isError:!0}},queryParameters:[er,Kt,Ti],urlParameters:[jt],headerParameters:[zt],serializer:Xo},ba={path:"/chat/threads/{chatThreadId}",httpMethod:"DELETE",responses:{204:{},401:{bodyMapper:_e,isError:!0},403:{bodyMapper:_e,isError:!0},429:{bodyMapper:_e,isError:!0},503:{bodyMapper:_e,isError:!0}},queryParameters:[Kt],urlParameters:[jt,an],headerParameters:[zt],serializer:Xo},Fd={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:dn},401:{bodyMapper:_e,isError:!0},403:{bodyMapper:_e,isError:!0},429:{bodyMapper:_e,isError:!0},503:{bodyMapper:_e,isError:!0}},queryParameters:[er,Kt,Ti],urlParameters:[jt,Qo],headerParameters:[zt],serializer:Xo};class qu extends class extends class{constructor(y,D){let B;if(D||(D={}),this._withCredentials=D.withCredentials||!1,this._httpClient=D.httpClient||(As||(As=new vn),As),this._requestPolicyOptions=new g._(D.httpPipelineLogger),Array.isArray(D.requestPolicyFactories))_.info("ServiceClient: using custom request policies"),B=D.requestPolicyFactories;else{let G;if((0,f.c)(y))_.info("ServiceClient: creating bearer token authentication policy from provided credentials"),G=(()=>{let fe;const be=this,Pe=D;return{create(Oe,Ne){const Ze=function(L,y){if(null==L?void 0:L.credentialScopes){const D=L.credentialScopes;return Array.isArray(D)?D.map(B=>new Ds(B).toString()):new Ds(D).toString()}if(y)return`${y}/.default`}(Pe,be.baseUri);if(!Ze)throw new Error("When using credential, the ServiceClient must contain a baseUri or a credentialScopes in ServiceClientOptions. Unable to create a bearerTokenAuthenticationPolicy");return null==fe&&(fe=(0,wr.v)(y,Ze)),fe.create(Oe,Ne)}}})();else if(y&&"function"==typeof y.signRequest)_.info("ServiceClient: creating signing policy from provided credentials"),L=y,G={create:(y,D)=>new Ts(y,D,L)};else if(null!=y)throw new Error("The credentials argument must implement the TokenCredential interface");if(_.info("ServiceClient: using default request policies"),B=function(L,y){const D=[];y.generateClientRequestIdHeader&&D.push(pu(y.clientRequestIdHeaderName)),L&&D.push(L);const B=Wo(y.userAgentHeaderName,Xt),G=Wo(y.userAgent,xo);return B&&G&&D.push(na({key:B,value:G})),D.push(zr()),D.push(function(L=30){return{create:(y,D)=>new vu(y,D,L)}}(y.rpRegistrationRetryTimeout)),y.noRetryPolicy||(D.push(ai()),D.push(Ui()),D.push(Ur())),D.push(Ys(y.deserializationContentTypes)),m.UG&&D.push(Fo()),D.push(U({logger:_.info})),D}(G,D),D.requestPolicyFactories){const Z=D.requestPolicyFactories(B);Z&&(B=Z)}}var L;this._requestPolicyFactories=B}sendRequest(y){if(null==y||"object"!=typeof y)throw new Error("options cannot be null or undefined and it must be of type object.");let D;try{!function(L){if(L&&"object"==typeof L){const y=L;if("string"==typeof y.url&&"string"==typeof y.method&&"object"==typeof y.headers&&xr(y.headers)&&"function"==typeof y.validateRequestProperties&&"function"==typeof y.prepare&&"function"==typeof y.clone)return!0}return!1}(y)?(D=new sn,D=D.prepare(y)):(y.validateRequestProperties(),D=y)}catch(G){return Promise.reject(G)}let B=this._httpClient;if(this._requestPolicyFactories&&this._requestPolicyFactories.length>0)for(let G=this._requestPolicyFactories.length-1;G>=0;--G)B=this._requestPolicyFactories[G].create(B,this._requestPolicyOptions);return B.sendRequest(D)}sendOperationRequest(y,D,B){var G=this;return(0,E.Z)(function*(){var Z;"function"==typeof y.options&&(B=y.options,y.options=void 0);const fe=null===(Z=y.options)||void 0===Z?void 0:Z.serializerOptions,be=new sn;let Pe;try{const Ne=D.baseUrl||G.baseUri;if(!Ne)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a baseUri string property that contains the base URL to use.");be.method=D.httpMethod,be.operationSpec=D;const Ze=b.UK.parse(Ne);if(D.path&&Ze.appendPath(D.path),D.urlParameters&&D.urlParameters.length>0)for(const ft of D.urlParameters){let dt=Ci(G,y,ft,D.serializer);dt=D.serializer.serialize(ft.mapper,dt,R(ft),fe),ft.skipEncoding||(dt=encodeURIComponent(dt)),Ze.replaceAll(`{${ft.mapper.serializedName||R(ft)}}`,dt)}if(D.queryParameters&&D.queryParameters.length>0)for(const ft of D.queryParameters){let dt=Ci(G,y,ft,D.serializer);if(null!=dt){if(dt=D.serializer.serialize(ft.mapper,dt,R(ft),fe),null!=ft.collectionFormat)if(ft.collectionFormat===Fr.Multi){if(0===dt.length)continue;for(const ut in dt){const rn=dt[ut];dt[ut]=null==rn?"":rn.toString()}}else(ft.collectionFormat===Fr.Ssv||ft.collectionFormat===Fr.Tsv)&&(dt=dt.join(ft.collectionFormat));if(!ft.skipEncoding)if(Array.isArray(dt))for(const ut in dt)null!=dt[ut]&&(dt[ut]=encodeURIComponent(dt[ut]));else dt=encodeURIComponent(dt);null!=ft.collectionFormat&&ft.collectionFormat!==Fr.Multi&&ft.collectionFormat!==Fr.Ssv&&ft.collectionFormat!==Fr.Tsv&&(dt=dt.join(ft.collectionFormat)),Ze.setQueryParameter(ft.mapper.serializedName||R(ft),dt)}}be.url=Ze.toString();const st=D.contentType||G.requestContentType;if(st&&D.requestBody&&be.headers.set("Content-Type",st),D.headerParameters)for(const ft of D.headerParameters){let dt=Ci(G,y,ft,D.serializer);if(null!=dt){dt=D.serializer.serialize(ft.mapper,dt,R(ft),fe);const ut=ft.mapper.headerCollectionPrefix;if(ut)for(const rn of Object.keys(dt))be.headers.set(ut+rn,dt[rn]);else be.headers.set(ft.mapper.serializedName||R(ft),dt)}}const lt=y.options;if(lt){if(lt.customHeaders)for(const ft in lt.customHeaders)be.headers.set(ft,lt.customHeaders[ft]);lt.abortSignal&&(be.abortSignal=lt.abortSignal),lt.timeout&&(be.timeout=lt.timeout),lt.onUploadProgress&&(be.onUploadProgress=lt.onUploadProgress),lt.onDownloadProgress&&(be.onDownloadProgress=lt.onDownloadProgress),lt.spanOptions&&(be.spanOptions=lt.spanOptions),lt.tracingContext&&(be.tracingContext=lt.tracingContext),null!=lt.shouldDeserialize&&(be.shouldDeserialize=lt.shouldDeserialize)}let Qt,Jt;be.withCredentials=G._withCredentials,function(L,y,D,B){var G,Z,fe,be,Pe,Oe;const Ne=null!==(Z=null===(G=D.options)||void 0===G?void 0:G.serializerOptions)&&void 0!==Z?Z:{},Ze={rootName:null!==(fe=Ne.rootName)&&void 0!==fe?fe:"",includeRoot:null!==(be=Ne.includeRoot)&&void 0!==be&&be,xmlCharKey:null!==(Pe=Ne.xmlCharKey)&&void 0!==Pe?Pe:ce.I},st=Ne.xmlCharKey;if(B.requestBody&&B.requestBody.mapper){y.body=Ci(L,D,B.requestBody,B.serializer);const lt=B.requestBody.mapper,{required:Qt,xmlName:Jt,xmlElementName:ft,serializedName:dt,xmlNamespace:ut,xmlNamespacePrefix:rn}=lt,Mr=lt.type.name;try{if(null!=y.body||Qt){const Ls=R(B.requestBody);y.body=B.serializer.serialize(lt,y.body,Ls,Ze);const _o=Mr===tt.Stream;if(B.isXML){const Ea=rn?`xmlns:${rn}`:"xmlns",Gu=function(L,y,D,B,G){if(L&&!["Composite","Sequence","Dictionary"].includes(D)){const Z={};return Z[G.xmlCharKey]=B,Z[ce.c]={[y]:L},Z}return B}(ut,Ea,Mr,y.body,Ze);Mr===tt.Sequence?y.body=Mo(m.WQ(Gu,ft||Jt||dt,Ea,ut),{rootName:Jt||dt,xmlCharKey:st}):_o||(y.body=Mo(Gu,{rootName:Jt||dt,xmlCharKey:st}))}else{if(Mr===tt.String&&((null===(Oe=B.contentType)||void 0===Oe?void 0:Oe.match("text/plain"))||"text"===B.mediaType))return;_o||(y.body=JSON.stringify(y.body))}}}catch(Ls){throw new Error(`Error "${Ls.message}" occurred in serializing the payload - ${JSON.stringify(dt,void 0,"  ")}.`)}}else if(B.formDataParameters&&B.formDataParameters.length>0){y.formData={};for(const lt of B.formDataParameters){const Qt=Ci(L,D,lt,B.serializer);if(null!=Qt){const Jt=lt.mapper.serializedName||R(lt);y.formData[Jt]=B.serializer.serialize(lt.mapper,Qt,R(lt),Ze)}}}}(G,be,y,D),void 0===be.streamResponseStatusCodes&&(be.streamResponseStatusCodes=function(L){const y=new Set;for(const D in L.responses){const B=L.responses[D];B.bodyMapper&&B.bodyMapper.type.name===tt.Stream&&y.add(Number(D))}return y}(D));try{Qt=yield G.sendRequest(be)}catch(ft){Jt=ft}Jt?(Jt.response&&(Jt.details=Os(Jt.response,D.responses[Jt.statusCode]||D.responses.default)),Pe=Promise.reject(Jt)):Pe=Promise.resolve(Os(Qt,D.responses[Qt.status]))}catch(Ne){Pe=Promise.reject(Ne)}const Oe=B;return Oe&&Pe.then(Ne=>Oe(null,Ne._response.parsedBody,Ne._response.request,Ne._response)).catch(Ne=>Oe(Ne)),Pe})()}}{constructor(y,D){if(void 0===y)throw new Error("'endpoint' cannot be null");if(D||(D={}),!D.userAgent){const B=xo();D.userAgent=`azure-communication-chat/1.1.0-beta.2 ${B}`}super(void 0,D),this.requestContentType="application/json; charset=utf-8",this.baseUri=D.endpoint||"{endpoint}",this.endpoint=y,this.apiVersion=D.apiVersion||"2021-04-05-preview6"}}{constructor(y,D){super(y,D),this.chatThread=new kp(this),this.chat=new Ns(this)}}const ll=L=>(0,wr.v)({getToken:(y,D)=>L.getToken({abortSignal:null==D?void 0:D.abortSignal})},[]);class ks{constructor(y,D,B,G={}){this.endpoint=y,this.timeOfLastTypingRequest=void 0,this.threadId=D,this.tokenCredential=B;const Z=`azsdk-js-communication-chat/${C}`;G.userAgentOptions||(G.userAgentOptions={});const fe=Object.assign({},G.userAgentOptions);fe.userAgentPrefix=G.userAgentOptions.userAgentPrefix?`${G.userAgentOptions.userAgentPrefix} ${Z}`:Z;const Oe=Ar(Object.assign(Object.assign({},Object.assign(Object.assign({},G),{userAgentOptions:fe})),{loggingOptions:{logger:T.info}}),ll(this.tokenCredential));this.client=new qu(this.endpoint,Oe)}getProperties(y={}){var D=this;return(0,E.Z)(function*(){const{span:B,updatedOptions:G}=gt("ChatClient-GetProperties",y);try{const Z=yield D.client.chatThread.getChatThreadProperties(D.threadId,Pt(G)),be=(0,d._T)(Z,["_response"]);return O(be)}catch(Z){throw B.setStatus({code:cn.ERROR,message:Z.message}),Z}finally{B.end()}})()}updateTopic(y,D={}){var B=this;return(0,E.Z)(function*(){const{span:G,updatedOptions:Z}=gt("ChatThreadClient-UpdateTopic",D);try{yield B.client.chatThread.updateChatThreadProperties(B.threadId,{topic:y},Pt(Z))}catch(fe){throw G.setStatus({code:cn.ERROR,message:fe.message}),fe}finally{G.end()}})()}sendMessage(y,D={}){var B=this;return(0,E.Z)(function*(){const{span:G,updatedOptions:Z}=gt("ChatThreadClient-SendMessage",D);try{B.timeOfLastTypingRequest=void 0;const fe=yield B.client.chatThread.sendChatMessage(B.threadId,Object.assign(Object.assign({},y),D),Pt(Z));return(0,d._T)(fe,["_response"])}catch(fe){throw G.setStatus({code:cn.ERROR,message:fe.message}),fe}finally{G.end()}})()}getMessage(y,D={}){var B=this;return(0,E.Z)(function*(){const{span:G,updatedOptions:Z}=gt("ChatThreadClient-GetMessage",D);try{const fe=yield B.client.chatThread.getChatMessage(B.threadId,y,Pt(Z)),Pe=(0,d._T)(fe,["_response"]);return S(Pe)}catch(fe){throw G.setStatus({code:cn.ERROR,message:fe.message}),fe}finally{G.end()}})()}listMessagesPage(y,D={}){return(0,d.FC)(this,arguments,function*(){const G=Pt(D);if(!y.continuationToken){const Z=yield(0,d.qq)(this.client.chatThread.listChatMessages(this.threadId,G));y.continuationToken=Z.nextLink,Z.value&&(yield yield(0,d.qq)(Z.value.map(S,this)))}for(;y.continuationToken;){const Z=yield(0,d.qq)(this.client.chatThread.listChatMessagesNext(this.threadId,y.continuationToken,G));if(y.continuationToken=Z.nextLink,!Z.value)break;yield yield(0,d.qq)(Z.value.map(S,this))}})}listMessagesAll(y){return(0,d.FC)(this,arguments,function*(){var B,G;try{for(var fe,Z=(0,d.KL)(this.listMessagesPage({},y));!(fe=yield(0,d.qq)(Z.next())).done;){const be=fe.value;yield(0,d.qq)(yield*(0,d.V2)((0,d.KL)(be)))}}catch(be){B={error:be}}finally{try{fe&&!fe.done&&(G=Z.return)&&(yield(0,d.qq)(G.call(Z)))}finally{if(B)throw B.error}}})}listMessages(y={}){const{span:D,updatedOptions:B}=gt("ChatThreadClient-ListMessages",y);try{const G=this.listMessagesAll(B);return{next:()=>G.next(),[Symbol.asyncIterator](){return this},byPage:(Z={})=>this.listMessagesPage(Z,B)}}catch(G){throw D.setStatus({code:cn.ERROR,message:G.message}),G}finally{D.end()}}deleteMessage(y,D={}){var B=this;return(0,E.Z)(function*(){const{span:G,updatedOptions:Z}=gt("ChatThreadClient-DeleteMessage",D);try{yield B.client.chatThread.deleteChatMessage(B.threadId,y,Pt(Z))}catch(fe){throw G.setStatus({code:cn.ERROR,message:fe.message}),fe}finally{G.end()}})()}updateMessage(y,D={}){var B=this;return(0,E.Z)(function*(){const{span:G,updatedOptions:Z}=gt("ChatThreadClient-UpdateMessage",D);try{yield B.client.chatThread.updateChatMessage(B.threadId,y,D,Pt(Z))}catch(fe){throw G.setStatus({code:cn.ERROR,message:fe.message}),fe}finally{G.end()}})()}addParticipants(y,D={}){var B=this;return(0,E.Z)(function*(){const{span:G,updatedOptions:Z}=gt("ChatThreadClient-AddParticipants",D);try{const fe=yield B.client.chatThread.addChatParticipants(B.threadId,(L=>{var y;return{participants:null===(y=L.participants)||void 0===y?void 0:y.map(D=>Ms(D))}})(y),Pt(Z));return(0,d._T)(fe,["_response"])}catch(fe){throw G.setStatus({code:cn.ERROR,message:fe.message}),fe}finally{G.end()}})()}listParticipantsPage(y,D={}){return(0,d.FC)(this,arguments,function*(){const G=Pt(D);if(!y.continuationToken){const Z=yield(0,d.qq)(this.client.chatThread.listChatParticipants(this.threadId,G));y.continuationToken=Z.nextLink,Z.value&&(yield yield(0,d.qq)(Z.value.map(cr,this)))}for(;y.continuationToken;){const Z=yield(0,d.qq)(this.client.chatThread.listChatParticipantsNext(this.threadId,y.continuationToken,G));if(y.continuationToken=Z.nextLink,!Z.value)break;yield yield(0,d.qq)(Z.value.map(cr,this))}})}listParticipantsAll(y){return(0,d.FC)(this,arguments,function*(){var B,G;try{for(var fe,Z=(0,d.KL)(this.listParticipantsPage({},y));!(fe=yield(0,d.qq)(Z.next())).done;){const be=fe.value;yield(0,d.qq)(yield*(0,d.V2)((0,d.KL)(be)))}}catch(be){B={error:be}}finally{try{fe&&!fe.done&&(G=Z.return)&&(yield(0,d.qq)(G.call(Z)))}finally{if(B)throw B.error}}})}listParticipants(y={}){const{span:D,updatedOptions:B}=gt("ChatThreadClient-ListParticipants",y);try{const G=this.listParticipantsAll(B);return{next:()=>G.next(),[Symbol.asyncIterator](){return this},byPage:(Z={})=>this.listParticipantsPage(Z,B)}}catch(G){throw D.setStatus({code:cn.ERROR,message:G.message}),G}finally{D.end()}}removeParticipant(y,D={}){var B=this;return(0,E.Z)(function*(){const{span:G,updatedOptions:Z}=gt("ChatThreadClient-RemoveParticipant",D);try{yield B.client.chatThread.removeChatParticipant(B.threadId,(0,Hr.J)(y),Pt(Z))}catch(fe){throw G.setStatus({code:cn.ERROR,message:fe.message}),fe}finally{G.end()}})()}sendTypingNotification(y={}){var D=this;return(0,E.Z)(function*(){const{span:B,updatedOptions:G}=gt("ChatThreadClient-SendTypingNotification",y);try{const Z=new Date,fe=Pt(G),{senderDisplayName:be}=fe,Pe=(0,d._T)(fe,["senderDisplayName"]);return D.canPostTypingNotification(Z)?(yield D.client.chatThread.sendTypingNotification(D.threadId,Object.assign({sendTypingNotificationRequest:{senderDisplayName:be}},Pe)),D.timeOfLastTypingRequest=Z,!0):(T.info(`Typing Notification NOT Send. [thread_id=${D.threadId}]`),!1)}catch(Z){throw B.setStatus({code:cn.ERROR,message:Z.message}),Z}finally{B.end()}})()}sendReadReceipt(y,D={}){var B=this;return(0,E.Z)(function*(){const{span:G,updatedOptions:Z}=gt("ChatThreadClient-SendReadReceipt",D);try{yield B.client.chatThread.sendChatReadReceipt(B.threadId,y,Pt(Z))}catch(fe){throw G.setStatus({code:cn.ERROR,message:fe.message}),fe}finally{G.end()}})()}listReadReceiptsPage(y,D={}){return(0,d.FC)(this,arguments,function*(){const G=Pt(D);if(!y.continuationToken){const Z=yield(0,d.qq)(this.client.chatThread.listChatReadReceipts(this.threadId,G));y.continuationToken=Z.nextLink,Z.value&&(yield yield(0,d.qq)(Z.value.map(z,this)))}for(;y.continuationToken;){const Z=yield(0,d.qq)(this.client.chatThread.listChatReadReceiptsNext(this.threadId,y.continuationToken,G));if(y.continuationToken=Z.nextLink,!Z.value)break;yield yield(0,d.qq)(Z.value.map(z,this))}})}listReadReceiptsAll(y){return(0,d.FC)(this,arguments,function*(){var B,G;try{for(var fe,Z=(0,d.KL)(this.listReadReceiptsPage({},y));!(fe=yield(0,d.qq)(Z.next())).done;){const be=fe.value;yield(0,d.qq)(yield*(0,d.V2)((0,d.KL)(be)))}}catch(be){B={error:be}}finally{try{fe&&!fe.done&&(G=Z.return)&&(yield(0,d.qq)(G.call(Z)))}finally{if(B)throw B.error}}})}listReadReceipts(y={}){const{span:D,updatedOptions:B}=gt("ChatThreadClient-ListChatReadReceipts",y);try{const G=this.listReadReceiptsAll(B);return{next:()=>G.next(),[Symbol.asyncIterator](){return this},byPage:(Z={})=>this.listReadReceiptsPage(Z,B)}}catch(G){throw D.setStatus({code:cn.ERROR,message:G.message}),G}finally{D.end()}}canPostTypingNotification(y){return!(this.timeOfLastTypingRequest&&y.getTime()-this.timeOfLastTypingRequest.getTime()<8e3&&(T.info(`Typing interval check failed. [last_request=${this.timeOfLastTypingRequest}]`),1))}}class xs{constructor(y,D,B={}){this.endpoint=y,this.signalingClient=void 0,this.emitter=new l.EventEmitter,this.isRealtimeNotificationsStarted=!1,this.tokenCredential=D,this.clientOptions=Object.assign({},B);const G=`azsdk-js-communication-chat/${C}`;B.userAgentOptions||(B.userAgentOptions={});const Z=Object.assign({},B.userAgentOptions);Z.userAgentPrefix=B.userAgentOptions.userAgentPrefix?`${B.userAgentOptions.userAgentPrefix} ${G}`:G;const Pe=Ar(Object.assign(Object.assign({},Object.assign(Object.assign({},B),{userAgentOptions:Z})),{loggingOptions:{logger:T.info}}),ll(this.tokenCredential));this.client=new qu(this.endpoint,Pe),this.signalingClient=((L,y)=>new P.CommunicationSignalingClient(L,y))(D,T)}getChatThreadClient(y){return new ks(this.endpoint,y,this.tokenCredential,this.clientOptions)}createChatThread(y,D={}){var B=this;return(0,E.Z)(function*(){var G,Z;const{span:fe,updatedOptions:be}=gt("ChatClient-CreateChatThread",D);try{be.idempotencyToken=null!==(G=be.idempotencyToken)&&void 0!==G?G:(0,m.Rl)();const Pe=(L=>{const{idempotencyToken:D}=L,B=(0,d._T)(L,["participants","idempotencyToken"]);return Object.assign({repeatabilityRequestId:D},B)})(be),Oe=yield B.client.chat.createChatThread({topic:y.topic,participants:null===(Z=D.participants)||void 0===Z?void 0:Z.map(st=>Ms(st))},Pt(Pe));return(L=>{const{chatThread:y}=L,D=(0,d._T)(L,["chatThread"]);return y?Object.assign(Object.assign({},D),{chatThread:O(y)}):Object.assign({},D)})((0,d._T)(Oe,["_response"]))}catch(Pe){throw fe.setStatus({code:cn.ERROR,message:Pe.message}),Pe}finally{fe.end()}})()}listChatThreadsPage(y,D={}){return(0,d.FC)(this,arguments,function*(){const G=Pt(D);if(!y.continuationToken){const Z=yield(0,d.qq)(this.client.chat.listChatThreads(G));y.continuationToken=Z.nextLink,Z.value&&(yield yield(0,d.qq)(Z.value))}for(;y.continuationToken;){const Z=yield(0,d.qq)(this.client.chat.listChatThreadsNext(y.continuationToken,G));if(y.continuationToken=Z.nextLink,!Z.value)break;yield yield(0,d.qq)(Z.value)}})}listChatThreadsAll(y){return(0,d.FC)(this,arguments,function*(){var B,G;try{for(var fe,Z=(0,d.KL)(this.listChatThreadsPage({},y));!(fe=yield(0,d.qq)(Z.next())).done;){const be=fe.value;yield(0,d.qq)(yield*(0,d.V2)((0,d.KL)(be)))}}catch(be){B={error:be}}finally{try{fe&&!fe.done&&(G=Z.return)&&(yield(0,d.qq)(G.call(Z)))}finally{if(B)throw B.error}}})}listChatThreads(y={}){const{span:D,updatedOptions:B}=gt("ChatClient-ListChatThreads",y);try{const G=this.listChatThreadsAll(B);return{next:()=>G.next(),[Symbol.asyncIterator](){return this},byPage:(Z={})=>this.listChatThreadsPage(Z,B)}}catch(G){throw D.setStatus({code:cn.ERROR,message:G.message}),G}finally{D.end()}}deleteChatThread(y,D={}){var B=this;return(0,E.Z)(function*(){const{span:G,updatedOptions:Z}=gt("ChatClient-DeleteChatThread",D);try{yield B.client.chat.deleteChatThread(y,Pt(Z))}catch(fe){throw G.setStatus({code:cn.ERROR,message:fe.message}),fe}finally{G.end()}})()}startRealtimeNotifications(){var y=this;return(0,E.Z)(function*(){if(void 0===y.signalingClient)throw new Error("Realtime notifications are not supported in node js.");y.isRealtimeNotificationsStarted||(y.isRealtimeNotificationsStarted=!0,y.signalingClient.start(),y.subscribeToSignalingEvents())})()}stopRealtimeNotifications(){var y=this;return(0,E.Z)(function*(){if(void 0===y.signalingClient)throw new Error("Realtime notifications are not supported in node js.");y.isRealtimeNotificationsStarted=!1,y.signalingClient.stop(),y.emitter.removeAllListeners()})()}on(y,D){if(void 0===this.signalingClient)throw new Error("Realtime notifications are only supported in the browser.");if(!this.isRealtimeNotificationsStarted)throw new Error("You must call startRealtimeNotifications before you can subscribe to events.");this.emitter.on(y,D)}off(y,D){if(void 0===this.signalingClient)throw new Error("Realtime notifications are only supported in the browser.");this.emitter.removeListener(y,D)}subscribeToSignalingEvents(){if(void 0===this.signalingClient)throw new Error("Realtime notifications are only supported in the browser.");this.signalingClient.on("chatMessageReceived",y=>{this.emitter.emit("chatMessageReceived",y)}),this.signalingClient.on("chatMessageEdited",y=>{this.emitter.emit("chatMessageEdited",y)}),this.signalingClient.on("chatMessageDeleted",y=>{this.emitter.emit("chatMessageDeleted",y)}),this.signalingClient.on("typingIndicatorReceived",y=>{this.emitter.emit("typingIndicatorReceived",y)}),this.signalingClient.on("readReceiptReceived",y=>{this.emitter.emit("readReceiptReceived",y)}),this.signalingClient.on("chatThreadCreated",y=>{this.emitter.emit("chatThreadCreated",y)}),this.signalingClient.on("chatThreadDeleted",y=>{this.emitter.emit("chatThreadDeleted",y)}),this.signalingClient.on("chatThreadPropertiesUpdated",y=>{this.emitter.emit("chatThreadPropertiesUpdated",y)}),this.signalingClient.on("participantsAdded",y=>{this.emitter.emit("participantsAdded",y)}),this.signalingClient.on("participantsRemoved",y=>{this.emitter.emit("participantsRemoved",y)})}}},8199:(K,u,c)=>{"use strict";c.d(u,{J:()=>l,H:()=>C});var s=c(4762),E=c(6361);const d=(P,w)=>void 0===w?P:Object.assign(Object.assign({},P),{rawId:w}),p=(P,w)=>{const f=Object.keys(P)[0],g=P[f];if(w in g)return g[w];throw new Error(`Property ${w} is required for identifier of type ${f}.`)},l=P=>{var w,f;const g=(0,E.n9)(P);switch(g.kind){case"communicationUser":return{communicationUser:{id:g.communicationUserId}};case"phoneNumber":return d({phoneNumber:{value:g.phoneNumber}},g.rawId);case"microsoftTeamsUser":return d({microsoftTeamsUser:{userId:g.microsoftTeamsUserId,isAnonymous:null!==(w=g.isAnonymous)&&void 0!==w&&w,cloud:null!==(f=g.cloud)&&void 0!==f?f:"public"}},g.rawId);case"unknown":return{rawId:g.id};default:throw new Error(`Can't serialize an identifier with kind ${g.kind}`)}},C=P=>{(P=>{const f=(0,s._T)(P,["rawId"]),g=Object.keys(f);if(g.length>1)throw new Error(`Only one of the properties in ${JSON.stringify(g)} should be present.`)})(P);const{communicationUser:w,microsoftTeamsUser:f,phoneNumber:g}=P;return w?{kind:"communicationUser",communicationUserId:p({communicationUser:w},"id")}:g?{kind:"phoneNumber",phoneNumber:p({phoneNumber:g},"value"),rawId:p({phoneNumber:P},"rawId")}:f?{kind:"microsoftTeamsUser",microsoftTeamsUserId:p({microsoftTeamsUser:f},"userId"),isAnonymous:p({microsoftTeamsUser:f},"isAnonymous"),cloud:p({microsoftTeamsUser:f},"cloud"),rawId:p({microsoftTeamsUser:P},"rawId")}:{kind:"unknown",id:p({unknown:P},"rawId")}}},6361:(K,u,c)=>{"use strict";c.d(u,{sE:()=>s,Nc:()=>E,OU:()=>d,vJ:()=>p,n9:()=>T});const s=l=>"string"==typeof l.communicationUserId,E=l=>"string"==typeof l.phoneNumber,d=l=>"string"==typeof l.microsoftTeamsUserId,p=l=>"string"==typeof l.id,T=l=>s(l)?Object.assign(Object.assign({},l),{kind:"communicationUser"}):E(l)?Object.assign(Object.assign({},l),{kind:"phoneNumber"}):d(l)?Object.assign(Object.assign({},l),{kind:"microsoftTeamsUser"}):Object.assign(Object.assign({},l),{kind:"unknown"})},9116:(K,u,c)=>{"use strict";c.r(u),c.d(u,{AzureCommunicationTokenCredential:()=>f,createCommunicationAccessKeyCredentialPolicy:()=>R,createCommunicationAuthPolicy:()=>$,deserializeCommunicationIdentifier:()=>re.H,getIdentifierKind:()=>pe.n9,isCommunicationUserIdentifier:()=>pe.sE,isKeyCredential:()=>oe,isMicrosoftTeamsUserIdentifier:()=>pe.OU,isPhoneNumberIdentifier:()=>pe.Nc,isUnknownIdentifier:()=>pe.vJ,parseClientArguments:()=>ne,parseConnectionString:()=>ae,serializeCommunicationIdentifier:()=>re.J});var s=c(8239),E=c(4934),d=c.n(E);const p=J=>{const{exp:se}=d()(J);return{token:J,expiresOnTimestamp:1e3*se}};class T{constructor(se){this.token=se}getToken(){var se=this;return(0,s.Z)(function*(){return se.token})()}dispose(){}}const l={token:"",expiresOnTimestamp:-10};class w{constructor(se){this.refreshingIntervalInMs=6e5,this.activeTokenFetching=null,this.activeTokenUpdating=null,this.disposed=!1;const{tokenRefresher:me,token:ee,refreshProactively:le}=se;this.refresh=me,this.currentToken=ee?p(ee):l,this.refreshProactively=null!=le&&le,this.refreshProactively&&this.scheduleRefresh()}getToken(se){var me=this;return(0,s.Z)(function*(){if(!me.isCurrentTokenExpiringSoon)return me.currentToken;const ee=me.updateTokenAndReschedule(null==se?void 0:se.abortSignal);return me.isCurrentTokenValid||(yield ee),me.currentToken})()}dispose(){this.disposed=!0,this.activeTokenFetching=null,this.activeTokenUpdating=null,this.currentToken=l,this.activeTimeout&&clearTimeout(this.activeTimeout)}updateTokenAndReschedule(se){var me=this;return(0,s.Z)(function*(){if(me.activeTokenUpdating)return me.activeTokenUpdating;me.activeTokenUpdating=me.refreshTokenAndReschedule(se);try{yield me.activeTokenUpdating}finally{me.activeTokenUpdating=null}})()}refreshTokenAndReschedule(se){var me=this;return(0,s.Z)(function*(){me.currentToken=yield me.refreshToken(se),me.refreshProactively&&me.scheduleRefresh()})()}refreshToken(se){var me=this;return(0,s.Z)(function*(){try{return me.activeTokenFetching||(me.activeTokenFetching=me.refresh(se)),p(yield me.activeTokenFetching)}finally{me.activeTokenFetching=null}})()}scheduleRefresh(){if(this.disposed)return;this.activeTimeout&&clearTimeout(this.activeTimeout);const se=this.currentToken.expiresOnTimestamp-Date.now()-this.refreshingIntervalInMs;this.activeTimeout=setTimeout(()=>this.updateTokenAndReschedule(),se)}get isCurrentTokenValid(){return this.currentToken&&Date.now()<this.currentToken.expiresOnTimestamp}get isCurrentTokenExpiringSoon(){return!this.currentToken||Date.now()>=this.currentToken.expiresOnTimestamp-this.refreshingIntervalInMs}}class f{constructor(se){this.disposed=!1,this.tokenCredential="string"==typeof se?new T(p(se)):new w(se)}getToken(se){var me=this;return(0,s.Z)(function*(){me.throwIfDisposed();const ee=yield me.tokenCredential.getToken(se);return me.throwIfDisposed(),ee})()}dispose(){this.disposed=!0,this.tokenCredential.dispose()}throwIfDisposed(){if(this.disposed)throw new Error("User credential is disposed")}}var g=c(1126),_=c(369),b=c(7694);const m=J=>(new TextEncoder).encode(J);function x(J){if("function"!=typeof btoa)throw new Error("Your browser environment is missing the global `btoa` function");const se=new Uint8Array(J);let me="";for(const ee of se)me+=String.fromCharCode(ee);return btoa(me)}const k=globalThis,F=()=>{if(!k)throw new Error("Could not find global");if(!k.crypto||!k.crypto.subtle)throw new Error("Browser does not support cryptography functions");return k.crypto.subtle},U=function(){var J=(0,s.Z)(function*(se){const me=m(se);return x(yield F().digest("SHA-256",me))});return function(me){return J.apply(this,arguments)}}(),N=function(){var J=(0,s.Z)(function*(se,me){const ee={name:"HMAC",hash:{name:"SHA-256"}},le=m(me),Ce=function(J){if("function"!=typeof atob)throw new Error("Your browser environment is missing the global `atob` function");const se=atob(J),me=new Uint8Array(se.length);for(let ee=0;ee<se.length;ee++)me[ee]=se.charCodeAt(ee);return me}(se),ye=F(),ge=yield ye.importKey("raw",Ce,ee,!1,["sign"]);return x(yield ye.sign(ee,ge,le))});return function(me,ee){return J.apply(this,arguments)}}(),R=J=>({create:(se,me)=>new M(J,se,me)});class M extends g.U{constructor(se,me,ee){super(me,ee),this.accessKey=se}signRequest(se){var me=this;return(0,s.Z)(function*(){const ee=se.method.toUpperCase(),le=(new Date).toUTCString(),Ce=yield U(se.body||""),ye="x-ms-date",ge=`${ye};host;x-ms-content-sha256`,Ee=_.UK.parse(se.url),De=Ee.getQuery(),Fe=De?`${Ee.getPath()}?${De}`:Ee.getPath(),Ie=Ee.getPort(),Be=Ie?`${Ee.getHost()}:${Ie}`:Ee.getHost(),He=`${ee}\n${Fe}\n${le};${Be};${Ce}`,Ve=yield N(me.accessKey.key,He);return b.UG&&se.headers.set("Host",Be||""),se.headers.set(ye,le),se.headers.set("x-ms-content-sha256",Ce),se.headers.set("Authorization",`HMAC-SHA256 SignedHeaders=${ge}&Signature=${Ve}`),se})()}sendRequest(se){var me=this;return(0,s.Z)(function*(){if(!se)throw new Error("webResource cannot be null or undefined");return me._nextPolicy.sendRequest(yield me.signRequest(se))})()}}var j=c(434),W=c(6354);const $=J=>(0,j.c)(J)?(0,W.v)(J,"https://communication.azure.com//.default"):R(J);class ce{constructor(se){if(!se)throw new Error("key must be a non-empty string");this._key=se}get key(){return this._key}update(se){this._key=se}}const Q=/endpoint=(.*);accesskey=(.*)/i,ae=J=>{const se=(J=>{const se=J.match(Q);if((null==se?void 0:se[1])&&se[2])return{endpoint:se[1],credential:new ce(se[2])}})(J);if(se)return se;throw new Error(`Invalid connection string ${J}`)},Se=J=>{if(!(J=>{var se;const me=_.UK.parse(J);return!!(null===(se=me.getScheme())||void 0===se?void 0:se.match(/^http[s]?/))&&void 0!==me.getHost()&&""!==me.getHost()&&(void 0===me.getPath()||""===me.getPath()||"/"===me.getPath())})(J))throw new Error(`Invalid endpoint url ${J}`)},oe=J=>J&&"string"==typeof J.key&&void 0===J.getToken,ne=(J,se)=>{if(oe(se)||(0,j.c)(se))return Se(J),{url:J,credential:se};{const{endpoint:me,credential:ee}=ae(J);return Se(me),{url:me,credential:ee}}};var pe=c(6361),re=c(8199)},2305:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";function _interopDefault(K){return K&&"object"==typeof K&&"default"in K?K.default:K}var coreHttp=_interopDefault(__webpack_require__(3700)),commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function unwrapExports(K){return K&&K.__esModule&&Object.prototype.hasOwnProperty.call(K,"default")?K.default:K}function createCommonjsModule(K,u){return K(u={exports:{}},u.exports),u.exports}var tsregistrar=createCommonjsModule(function(K,u){K.exports=function(c){function s(d){if(E[d])return E[d].exports;var p=E[d]={i:d,l:!1,exports:{}};return c[d].call(p.exports,p,p.exports,s),p.l=!0,p.exports}var E={};return s.m=c,s.c=E,s.i=function(d){return d},s.d=function(d,p,T){s.o(d,p)||Object.defineProperty(d,p,{configurable:!1,enumerable:!0,get:T})},s.n=function(d){var p=d&&d.__esModule?function(){return d.default}:function(){return d};return s.d(p,"a",p),p},s.o=function(d,p){return Object.prototype.hasOwnProperty.call(d,p)},s.p="",s(s.s=1)}([function(c,s,E){Object.defineProperty(s,"__esModule",{value:!0}),s.toJson=function(T){try{return JSON.stringify(T)}catch(l){return"Unable to serialize object of type "+typeof T}};var p=function(){function T(){this.start=Date.now()}return Object.defineProperty(T.prototype,"duration",{get:function(){return Date.now()-this.start},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"startTime",{get:function(){return this.start},enumerable:!0,configurable:!0}),T.prototype.reset=function(){this.start=Date.now()},T}();s.Timespan=p},function(c,s,E){var g,p=this&&this.__extends||(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,b){_.__proto__=b}||function(_,b){for(var m in b)b.hasOwnProperty(m)&&(_[m]=b[m])},function(_,b){function m(){this.constructor=_}g(_,b),_.prototype=null===b?Object.create(b):(m.prototype=b.prototype,new m)}),T=this&&this.__awaiter||function(g,_,b,m){return new(b||(b=Promise))(function(I,x){function k(N){try{U(m.next(N))}catch(R){x(R)}}function F(N){try{U(m.throw(N))}catch(R){x(R)}}function U(N){N.done?I(N.value):new b(function(R){R(N.value)}).then(k,F)}U((m=m.apply(g,_||[])).next())})},l=this&&this.__generator||function(g,_){function b(N){return function(R){return function(N){if(I)throw new TypeError("Generator is already executing.");for(;U;)try{if(I=1,x&&(k=2&N[0]?x.return:N[0]?x.throw||((k=x.return)&&k.call(x),0):x.next)&&!(k=k.call(x,N[1])).done)return k;switch(x=0,k&&(N=[2&N[0],k.value]),N[0]){case 0:case 1:k=N;break;case 4:return U.label++,{value:N[1],done:!1};case 5:U.label++,x=N[1],N=[0];continue;case 7:N=U.ops.pop(),U.trys.pop();continue;default:if(!(k=(k=U.trys).length>0&&k[k.length-1])&&(6===N[0]||2===N[0])){U=0;continue}if(3===N[0]&&(!k||N[1]>k[0]&&N[1]<k[3])){U.label=N[1];break}if(6===N[0]&&U.label<k[1]){U.label=k[1],k=N;break}if(k&&U.label<k[2]){U.label=k[2],U.ops.push(N);break}k[2]&&U.ops.pop(),U.trys.pop();continue}N=_.call(g,U)}catch(R){N=[6,R],x=0}finally{I=k=0}if(5&N[0])throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}([N,R])}}var I,x,k,F,U={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return F={next:b(0),throw:b(1),return:b(2)},"function"==typeof Symbol&&(F[Symbol.iterator]=function(){return this}),F};Object.defineProperty(s,"__esModule",{value:!0});var C=E(0),P=function(g){function _(b){var m=g.call(this,b)||this;return m.name="CancelationError",m}return p(_,g),_}(Error),w=function(){function g(_,b,m){this.logger=_,this.maxBackoffInMs=b,this.initialDelay=m,this.backoffCount=0,this.id=++g.idCounter}return g.prototype.delay=function(_){var b=this;if(void 0!==this.timerHandle)throw new Error("Retry sequence logical failure");if(-1===this.backoffCount)return new Promise(function(I,x){x(new P("Cancelled"))});var m=this.calculateNextBackoffMs();return this.backoffCount++,this.logger.info("[RegistrarClient] Backing off "+_+" for "+m+" milliseconds with ID "+this.id),new Promise(function(I,x){b.cancelFunc=x,b.timerHandle=setTimeout(function(){b.logger.info("[RegistrarClient] Back off for "+_+" with ID "+b.id+" complete"),b.timerHandle=void 0,I()},m)})},g.prototype.cancel=function(){void 0!==this.timerHandle&&(this.logger.debug("Resetting back off"),clearTimeout(this.timerHandle),void 0!==this.cancelFunc&&this.cancelFunc(new P("Cancelled"))),this.backoffCount=-1},g.prototype.calculateNextBackoffMs=function(){var _=1+.4*(Math.random()-.5),b=this.initialDelay*Math.pow(2,this.backoffCount)*_;return b=Math.round(b),Math.min(this.maxBackoffInMs,b)},g.idCounter=0,g}(),f=function(){function g(_,b,m){this.logger=_,this.skypeTokenProvider=b,this.options=m,this.backoffs={}}return g.prototype.setTelemetryLogger=function(_){this.eventLogger=_},g.prototype.register=function(_,b){return T(this,void 0,void 0,function(){return l(this,function(m){switch(m.label){case 0:return[4,this.performRegistration(_,b,"pr_set_registration")];case 1:return m.sent(),this.cachedRegistrationParams=[_,b],[2]}})})},g.prototype.unregister=function(){return T(this,void 0,void 0,function(){var _;return l(this,function(b){switch(b.label){case 0:return this.logger.info("[RegistrarClient] sending unregister request"),_=new Request(this.options.registrarUrl+"/"+this.options.registrationId,{method:"DELETE",mode:"cors",headers:new Headers({accept:"application/json, text/javascript"})}),[4,this.callRegistrar(_,"pr_delete_registration")];case 1:return b.sent(),[2]}})})},g.prototype.cancelPendingRequests=function(){var _=this;Object.keys(this.backoffs).forEach(function(b){_.backoffs[b].cancel()}),this.backoffs={}},g.prototype.resendRegistration=function(){return T(this,void 0,void 0,function(){return l(this,function(_){switch(_.label){case 0:if(!this.cachedRegistrationParams)throw new Error("Re-registration failed because there is no registration parameters cached");return[4,this.performRegistration(this.cachedRegistrationParams[0],this.cachedRegistrationParams[1],"pr_resend_registration")];case 1:return _.sent(),[2]}})})},g.prototype.performRegistration=function(_,b,m){return T(this,void 0,void 0,function(){var I,x;return l(this,function(k){switch(k.label){case 0:return this.logger.info("[RegistrarClient] Sending register request"),I={clientDescription:_,registrationId:this.options.registrationId,nodeId:"",transports:b},x=new Request(this.options.registrarUrl,{method:"POST",mode:"cors",headers:new Headers({"content-type":"application/json",accept:"application/json, text/javascript"}),body:C.toJson(I)}),[4,this.callRegistrar(x,m)];case 1:return k.sent(),[2]}})})},g.prototype.startBackoff=function(){var _=new w(this.logger,this.options.maxRetryDelayMs,this.options.initialRetryDelayMs);return this.backoffs[_.id]=_,_},g.prototype.stopBackoff=function(_){_.cancel(),delete this.backoffs[_.id]},g.prototype.getSkypeToken=function(){return T(this,void 0,void 0,function(){var _,b,I;return l(this,function(x){switch(x.label){case 0:_=this.startBackoff(),x.label=1;case 1:return x.trys.push([1,3,,8]),this.logger.info("[RegistrarClient] Asking for a new skypetoken"),[4,this.skypeTokenProvider(!0)];case 2:return b=x.sent(),this.stopBackoff(_),[2,b];case 3:x.sent(),x.label=4;case 4:return x.trys.push([4,6,,7]),[4,_.delay("Fetching a new skypetoken")];case 5:return x.sent(),[3,8];case 6:throw I=x.sent(),this.stopBackoff(_),I;case 7:return[3,8];case 8:return[3,1];case 9:return[2]}})})},g.prototype.callRegistrar=function(_,b){return T(this,void 0,void 0,function(){var m,I,x,k,F,U,N,R,M,j,W,$,Q;return l(this,function(te){switch(te.label){case 0:return m=this.startBackoff(),[4,this.skypeTokenProvider(!1)];case 1:I=te.sent(),this.setSkypeTokenHeader(_,I),x=new C.Timespan,te.label=2;case 2:k=void 0,te.label=3;case 3:return te.trys.push([3,8,13,14]),F=_.clone(),[4,this.fetchWithTimeout(F)];case 4:return 401!==(k=te.sent()).status?[3,6]:(U=this.setSkypeTokenHeader,N=[_],[4,this.getSkypeToken()]);case 5:return U.apply(this,N.concat([te.sent()])),[3,20];case 6:if(k.status>=500&&k.status<600)throw new Error("Fetch for '"+_.url+"' failed with "+k.status+" "+k.statusText);te.label=7;case 7:return[3,14];case 8:R=te.sent(),this.logger.error("[RegistrarClient] Request failed with "+R),te.label=9;case 9:return te.trys.push([9,11,,12]),[4,m.delay("Registrar call retry")];case 10:return te.sent(),[3,20];case 11:throw M=te.sent(),this.logger.error("[RegistrarClient] Request cancelled"),this.stopBackoff(m),M;case 12:return[3,14];case 13:return this.sendTelemetryEvent(b,_,k,x),[7];case 14:return this.stopBackoff(m),k.ok?[2,k]:[3,15];case 15:j=void 0,te.label=16;case 16:return te.trys.push([16,18,,19]),$=(W=JSON).stringify,[4,k.json()];case 17:return j=$.apply(W,[te.sent()]),[3,19];case 18:return te.sent(),j="no details",[3,19];case 19:throw Q="Fetch for '"+_.url+"' failed with "+k.status+" "+k.statusText+" ("+j+", MS-CV: "+k.headers.get("MS-CV")+")",this.logger.error("[RegistrarClient] "+Q),new Error(Q);case 20:return[3,2];case 21:return[2]}})})},g.prototype.setSkypeTokenHeader=function(_,b){_.headers.set("X-Skypetoken",b)},g.prototype.fetchWithTimeout=function(_){var b=this;return new Promise(function(m,I){fetch(_).then(m).catch(I),0!==b.options.requestTimeoutMs&&setTimeout(I,b.options.requestTimeoutMs,new Error("Fetch for '"+_.url+"' timed out"))})},g.prototype.sendTelemetryEvent=function(_,b,m,I){void 0!==this.eventLogger&&this.eventLogger.logEvent({name:_,properties:{url:{value:b.url},result_code:{value:void 0!==m?m.status:0},begin_timestamp:{value:I.startTime},elapsed:{value:I.duration}}})},g}();s.RegistrarClient=f,s.createRegistrarClient=function(g,_,b){return new f(g,_,b)}}])});unwrapExports(tsregistrar);var tstrouter=createCommonjsModule(function(module,exports){var u;u=function(__WEBPACK_EXTERNAL_MODULE_20__){return function(K){function u(s){if(c[s])return c[s].exports;var E=c[s]={i:s,l:!1,exports:{}};return K[s].call(E.exports,E,E.exports,u),E.l=!0,E.exports}var c={};return u.m=K,u.c=c,u.i=function(s){return s},u.d=function(s,E,d){u.o(s,E)||Object.defineProperty(s,E,{configurable:!1,enumerable:!0,get:d})},u.n=function(s){var E=s&&s.__esModule?function(){return s.default}:function(){return s};return u.d(E,"a",E),E},u.o=function(s,E){return Object.prototype.hasOwnProperty.call(s,E)},u.p="",u(u.s=19)}([function(K,u,c){Object.defineProperty(u,"__esModule",{value:!0});var s=function(){function E(d,p){this.name=d,this.logger=p}return E.prototype.debug=function(d){this.logger.debug("["+this.name+"] "+d)},E.prototype.info=function(d){this.logger.info("["+this.name+"] "+d)},E.prototype.warn=function(d){this.logger.warn("["+this.name+"] "+d)},E.prototype.error=function(d){this.logger.error("["+this.name+"] "+d)},E}();u.Logger=s},function(K,u,c){Object.defineProperty(u,"__esModule",{value:!0}),u.constants={TROUTER_INIT:"trouterinit",TROUTER_READY_EVENT:"trouterReadyEvent",TROUTER_READY_TIMEOUT:"trouterReadyTimeout",TROUTER_TOKEN_REQUEST:"trouterTokenRequest",TROUTER_TOKEN_GET_SUCCEEDED:"trouterTokenGetSucceeded",TROUTER_TOKEN_GET_FAILED:"trouterTokenGetFailed",TROUTER_RECONNECTING:"trouterReconnecting",RENEWAL:"renewal",NEW_CONNECTION:"newConnection",ENDPOINT_REGISTRATION_FAILED:"endpointRegistrationFailed"},u.CLIENT_VERSION="2021.32.00.1",u.HANDLED_MESSAGE_ACK=200,u.UNHANDLED_MESSAGE_ACK=404,u.FAILED_MESSAGE_ACK=500},function(K,u,c){var E;Object.defineProperty(u,"__esModule",{value:!0}),(E=u.UserActivityState||(u.UserActivityState={}))[E.Unknown=0]="Unknown",E[E.Active=1]="Active",E[E.Inactive=2]="Inactive",u.HttpHeaders=function(){},function(E){E[E.Unknown=0]="Unknown",E[E.Connected=2]="Connected",E[E.Disconnected=3]="Disconnected",E[E.Switching=9]="Switching"}(u.TrouterState||(u.TrouterState={}))},function(K,u,c){Object.defineProperty(u,"__esModule",{value:!0}),u.toJson=function(l){try{return JSON.stringify(l)}catch(C){return"Unable to serialize object of type "+typeof l}},u.calculateTtlInSec=function(l){var C=Math.round((new Date).getTime()/1e3);return void 0!==l&&l>C?l-C:0},u.calculateExpireTsInSec=function(l){return Math.round((new Date).getTime()/1e3)+l};var p=function(){function l(C){this.base=void 0!==C?C:this.createCorrelationVectorBase(),this.extension=0}return l.extend=function(C){return new l(C)},l.prototype.increase=function(){this.extension++},l.prototype.value=function(){return this.base+"."+this.extension},l.prototype.createCorrelationVectorBase=function(){for(var C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0987654321/+",P="AQgw",w="",f=0;f<21;f++)w+=C.charAt(Math.floor(Math.random()*C.length));return w+P.charAt(Math.floor(Math.random()*P.length))},l}();u.CorrelationVector=p;var T=function(){function l(){this.start=Date.now()}return Object.defineProperty(l.prototype,"duration",{get:function(){return Date.now()-this.start},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"startTime",{get:function(){return this.start},enumerable:!0,configurable:!0}),l.prototype.reset=function(){this.start=Date.now()},l}();u.Timespan=T},function(K,u){var c;c=function(){return this}();try{c=c||Function("return this")()||(0,eval)("this")}catch(s){"object"==typeof window&&(c=window)}K.exports=c},function(K,u,c){Object.defineProperty(u,"__esModule",{value:!0});var d,s=c(3),E=function(){function d(p,T,l,C,P,w,f){this.connectionId=p,this.connectedClientId=T,this.domId=l,this.unsecureUrl=C,this.url=P,this.c2cUrlBase=w,this.expirationTsSec=f}return d.prototype.getRemainingTtlInSec=function(){return s.calculateTtlInSec(this.expirationTsSec)},d}();u.ServerState=E,(d=u.UserActivityEventReason||(u.UserActivityEventReason={}))[d.Unknown=0]="Unknown",d[d.Modified=1]="Modified",d[d.Snapshot=2]="Snapshot",d[d.Connected=3]="Connected"},function(K,u,c){Object.defineProperty(u,"__esModule",{value:!0});var s=c(1),E=function(){function d(p){this.logger=p,this.messageHandlers=[]}return d.prototype.register=function(p){if(this.messageHandlers.some(function(T){return T===p}))throw new Error("Registering the same handler twice is not allowed");this.messageHandlers.push(p)},d.prototype.clear=function(){this.logger.debug("Clearing message handlers"),this.messageHandlers=[]},d.prototype.active=function(){return this.messageHandlers.length>0},d.prototype.handleMessage=function(p){for(var T={resultCode:s.UNHANDLED_MESSAGE_ACK,isHandled:!1},l=0,C=this.messageHandlers;l<C.length;l++){var w=this.safeExecuteHandle(C[l],p);if(void 0!==w&&(void 0===w.isHandled||w.isHandled))return void 0===w.resultCode&&(w.resultCode=s.HANDLED_MESSAGE_ACK),w}return T},d.prototype.safeExecuteHandle=function(p,T){try{return p.handleMessage(T)}catch(l){return void this.logger.warn("A trouter message handler is throwing exceptions. exception: "+l)}},d}();u.MessageHandlerRegistry=E},function(K,u,c){var E=this&&this.__awaiter||function(p,T,l,C){return new(l||(l=Promise))(function(P,w){function f(b){try{_(C.next(b))}catch(m){w(m)}}function g(b){try{_(C.throw(b))}catch(m){w(m)}}function _(b){b.done?P(b.value):new l(function(m){m(b.value)}).then(f,g)}_((C=C.apply(p,T||[])).next())})},d=this&&this.__generator||function(p,T){function l(b){return function(m){return function(b){if(P)throw new TypeError("Generator is already executing.");for(;_;)try{if(P=1,w&&(f=2&b[0]?w.return:b[0]?w.throw||((f=w.return)&&f.call(w),0):w.next)&&!(f=f.call(w,b[1])).done)return f;switch(w=0,f&&(b=[2&b[0],f.value]),b[0]){case 0:case 1:f=b;break;case 4:return _.label++,{value:b[1],done:!1};case 5:_.label++,w=b[1],b=[0];continue;case 7:b=_.ops.pop(),_.trys.pop();continue;default:if(!(f=(f=_.trys).length>0&&f[f.length-1])&&(6===b[0]||2===b[0])){_=0;continue}if(3===b[0]&&(!f||b[1]>f[0]&&b[1]<f[3])){_.label=b[1];break}if(6===b[0]&&_.label<f[1]){_.label=f[1],f=b;break}if(f&&_.label<f[2]){_.label=f[2],_.ops.push(b);break}f[2]&&_.ops.pop(),_.trys.pop();continue}b=T.call(p,_)}catch(m){b=[6,m],w=0}finally{P=f=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([b,m])}}var P,w,f,g,_={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return g={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g};Object.defineProperty(u,"__esModule",{value:!0}),u.addCacheAsBackupTo=function(p){var T,l=this;return function(C){return E(l,void 0,void 0,function(){return d(this,function(P){return C&&(T=void 0),[2,new Promise(function(w,f){p(C).then(function(g){T=g,w(g)}).catch(function(g){void 0!==T&&T.length>0&&w(T),f(g)})})]})})}}},function(K,u,c){var s=this&&this.__awaiter||function(f,g,_,b){return new(_||(_=Promise))(function(m,I){function x(U){try{F(b.next(U))}catch(N){I(N)}}function k(U){try{F(b.throw(U))}catch(N){I(N)}}function F(U){U.done?m(U.value):new _(function(N){N(U.value)}).then(x,k)}F((b=b.apply(f,g||[])).next())})},E=this&&this.__generator||function(f,g){function _(U){return function(N){return function(U){if(m)throw new TypeError("Generator is already executing.");for(;F;)try{if(m=1,I&&(x=2&U[0]?I.return:U[0]?I.throw||((x=I.return)&&x.call(I),0):I.next)&&!(x=x.call(I,U[1])).done)return x;switch(I=0,x&&(U=[2&U[0],x.value]),U[0]){case 0:case 1:x=U;break;case 4:return F.label++,{value:U[1],done:!1};case 5:F.label++,I=U[1],U=[0];continue;case 7:U=F.ops.pop(),F.trys.pop();continue;default:if(!(x=(x=F.trys).length>0&&x[x.length-1])&&(6===U[0]||2===U[0])){F=0;continue}if(3===U[0]&&(!x||U[1]>x[0]&&U[1]<x[3])){F.label=U[1];break}if(6===U[0]&&F.label<x[1]){F.label=x[1],x=U;break}if(x&&F.label<x[2]){F.label=x[2],F.ops.push(U);break}x[2]&&F.ops.pop(),F.trys.pop();continue}U=g.call(f,F)}catch(N){U=[6,N],I=0}finally{m=x=0}if(5&U[0])throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}([U,N])}}var m,I,x,k,F={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return k={next:_(0),throw:_(1),return:_(2)},"function"==typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k};Object.defineProperty(u,"__esModule",{value:!0});var d=c(3),p=c(2),T=c(0),l=c(16),C=c(18),P=function(){function f(g,_){this.state=g,this.correlationVector=void 0!==_?_:d.CorrelationVector.extend()}return f.prototype.getStateString=function(){switch(this.state){case p.UserActivityState.Active:return"active";case p.UserActivityState.Inactive:return"inactive";case p.UserActivityState.Unknown:return"unknown";default:return"undefined"}},f.prototype.toEventObject=function(){return{state:this.getStateString(),cv:this.correlationVector.value()}},f.prototype.toEventJSON=function(){return d.toJson(this.toEventObject())},f}();u.UserActivityObject=P;var w=function(){function f(g,_,b,m){this.logFunc=g,this.options=_,this.tokenProvider=b,this.listener=m,this.logger=new T.Logger("Manager",g),this.logger.info("Created TrouterManager with options "+d.toJson(this.options)),this.fsm=new C.TrouterManagerFsm(g,this),this.baseEndpointUrl="",this.processedMessageLoss={},this.userActivityObject=new P(p.UserActivityState.Unknown)}return f.prototype.start=function(){this.fsm.start()},f.prototype.stop=function(g){this.fsm.stop(g)},f.prototype.configure=function(g){this.options=g,void 0!==this.firstConnection&&this.firstConnection.configure(g),void 0!==this.secondConnection&&this.secondConnection.configure(g),this.logger.info("Reconfigured TrouterManager with options "+d.toJson(this.options))},f.prototype.checkConnection=function(g){void 0!==this.firstConnection&&this.firstConnection.checkConnection(g),void 0!==this.secondConnection&&this.secondConnection.checkConnection(g)},f.prototype.resendRegistration=function(){return s(this,void 0,void 0,function(){return E(this,function(g){return void 0!==this.secondConnection?(this.logger.info("Resending registration on the second/new connection"),[2,this.secondConnection.resendRegistration()]):void 0!==this.firstConnection?(this.logger.info("Resending registration on the first/current connection"),[2,this.firstConnection.resendRegistration()]):(this.logger.info("No connection to resend registration on, will be done upon (re)connect"),[2])})})},f.prototype.getServerState=function(){if(void 0!==this.firstConnection)return this.firstConnection.getServerState()},f.prototype.getState=function(){return this.fsm.getState()},f.prototype.startFirstConnection=function(){var g=new l.TrouterConnection(this.logFunc,this.options,this,this.tokenProvider,this.userActivityObject);this.firstConnection=g,this.getConnectionCache().then(function(_){g.start(_)}).catch()},f.prototype.startSecondConnection=function(){this.secondConnection=new l.TrouterConnection(this.logFunc,this.options,this,this.tokenProvider,this.userActivityObject),this.secondConnection.start()},f.prototype.stopFirstConnection=function(g){void 0!==this.firstConnection&&(this.firstConnection.stop(g),this.storedFirstConnection=this.firstConnection,this.firstConnection=void 0)},f.prototype.stopSecondConnection=function(g){void 0!==this.secondConnection&&(this.secondConnection.stop(g),this.secondConnection=void 0)},f.prototype.stopSecondConnectionDelayed=function(){if(void 0!==this.secondConnection){var g=this.secondConnection;this.secondConnection=void 0,this.logger.info("Closing an inactive connection in "+Math.round(this.options.lingeringConnectionDelayMs/1e3)+"s"),setTimeout(function(){g.stop(!0)},this.options.lingeringConnectionDelayMs)}},f.prototype.forceStopLingeringConnection=function(){this.storedFirstConnection&&(this.storedFirstConnection.stop(!1),this.storedFirstConnection=void 0)},f.prototype.switchConnections=function(){var g=this.firstConnection;this.firstConnection=this.secondConnection,this.secondConnection=g},f.prototype.doesSecondConnectionExist=function(){return void 0!==this.secondConnection},f.prototype.dispatchConnected=function(){if(void 0!==this.firstConnection){var g=this.firstConnection.getServerState(),_="/"===g.url.slice(-1)?g.url.slice(0,-1):g.url,b={baseEndpointUrl:_,newEndpointUrl:_!==this.baseEndpointUrl,c2cUrlBase:g.c2cUrlBase,clientId:g.connectedClientId,connectionId:g.connectionId,connectionTtlSec:g.getRemainingTtlInSec()};this.baseEndpointUrl=_,this.listener.onTrouterConnected(g.url,b)}},f.prototype.dispatchReconnecting=function(){this.listener.onTrouterDisconnected&&this.listener.onTrouterDisconnected()},f.prototype.dispatchStopped=function(){this.listener.onTrouterDisconnected&&this.listener.onTrouterDisconnected()},f.prototype.dispatchRegistrationState=function(g){this.options.registrationStateCallback&&this.options.registrationStateCallback(g)},f.prototype.onDownstreamRequest=function(g,_,b){var I={id:_.id,status:0,headers:{},body:"",send:function(){return I.status<=100||I.status>=999?3:(b.writeHead(I.status,I.headers),b.end(I.body))}};this.listener.onTrouterRequest({id:_.id,method:_.method,path:"/"+_.shortUrl,body:_.body,headers:_.headers},I)},f.prototype.onConnected=function(g){this.fsm.onConnected(g===this.firstConnection)},f.prototype.onRegistered=function(g){this.fsm.onRegistered(g===this.firstConnection)},f.prototype.onUnregistered=function(g){this.fsm.onUnregistered(g===this.firstConnection||g===this.storedFirstConnection)},f.prototype.onReconnecting=function(g){this.fsm.onReconnecting(g===this.firstConnection)},f.prototype.onReconnectIsRequired=function(g){this.fsm.onReconnectionRequired(g===this.firstConnection)},f.prototype.onDisconnected=function(g){this.fsm.onDisconnected(g===this.storedFirstConnection),this.storedFirstConnection=void 0},f.prototype.onUserActivityStateAccepted=function(g){this.listener.onTrouterUserActivityStateAccepted&&this.listener.onTrouterUserActivityStateAccepted(g)},f.prototype.onConnectionParametersUpdated=function(g){this.setConnectionCache(g)},f.prototype.setUserActivityState=function(g,_){return this.userActivityObject=new P(g,d.CorrelationVector.extend(_)),void 0!==this.secondConnection?(this.logger.info("Setting user activity "+this.userActivityObject.toEventJSON()+" on the second/new connection"),void this.secondConnection.setUserActivityState(this.userActivityObject)):void 0!==this.firstConnection?(this.logger.info("Setting user activity "+this.userActivityObject.toEventJSON()+" on the first/current connection"),void this.firstConnection.setUserActivityState(this.userActivityObject)):void 0},f.prototype.onTrouterMessageLost=function(g){var _=this;if(this.listener.onTrouterMessageLoss)if(g&&g.length){var b=g.filter(function(I){return void 0!==_.processedMessageLoss[I.tag+"-"+I.etag]});if(b.length&&(this.logger.warn("onTrouterMessageLoss - removing duplicates and sending event to server"),this.sendProcessedDroppedIndicators(b),!(g=g.filter(function(I){return void 0===_.processedMessageLoss[I.tag+"-"+I.etag]})).length))return void this.logger.warn("onTrouterMessageLoss - All the data are duplicated");if(!this.listener.onTrouterMessageLoss(g.map(function(I){return I.tag})))return void this.logger.warn("onTrouterMessageLoss - flow tags have not been processed by listeners");g.forEach(function(I){_.processedMessageLoss[I.tag+"-"+I.etag]=""}),this.sendProcessedDroppedIndicators(g)}else this.logger.warn("onTrouterMessageLoss - no flow tags have been provided")},f.prototype.getConnectionCache=function(){var g=this;return this.options.connectionCache?(this.logger.debug("Querying host's connection cache"),this.options.connectionCache.onGetTrouterConnectionCache().then(function(_){return _?JSON.parse(_):void 0}).catch(function(_){return g.logger.warn("Invalid connection cache content provided: "+_),g.connectionCache})):Promise.resolve(this.connectionCache)},f.prototype.setConnectionCache=function(g){if(this.connectionCache=g,this.options.connectionCache)try{this.options.connectionCache.onSetTrouterConnectionCache(JSON.stringify(g))}catch(_){this.logger.warn("Error setting external connection cache: "+_)}},f.prototype.sendProcessedDroppedIndicators=function(g){return void 0!==this.firstConnection?void this.firstConnection.sendProcessedDroppedIndicators(g):void 0!==this.secondConnection?void this.secondConnection.sendProcessedDroppedIndicators(g):void 0},f}();u.TrouterManager=w},function(K,u,c){Object.defineProperty(u,"__esModule",{value:!0});var s=function(){function E(d){this.logger=d}return E.prototype.getPromise=function(){var d=this;return void 0!==this.url?(this.logger.debug("[TrouterUrlPromise] returning previously resolved url: "+this.url),Promise.resolve(this.url)):(void 0===this.pendingPromise?(this.logger.debug("[TrouterUrlPromise] creating and returning promise"),this.pendingPromise=new Promise(function(p,T){d.pendingPromiseResolveRef=p,d.pendingPromiseRejectRef=T})):this.logger.debug("[TrouterUrlPromise] returning existing promise"),this.pendingPromise)},E.prototype.resolveUrl=function(d){this.url=d,this.logger.debug("[TrouterUrlPromise] got url: "+this.url);var p=this.pendingPromiseResolveRef;this.pendingPromise=void 0,this.pendingPromiseResolveRef=void 0,this.pendingPromiseRejectRef=void 0,void 0!==p&&(this.logger.debug("[TrouterUrlPromise] resolving promise"),p(d))},E.prototype.rejectUrl=function(d){this.logger.debug("[TrouterUrlPromise] aborting");var p=this.pendingPromiseRejectRef;this.url=void 0,this.pendingPromise=void 0,this.pendingPromiseResolveRef=void 0,this.pendingPromiseRejectRef=void 0,void 0!==p&&(this.logger.debug("[TrouterUrlPromise] rejecting promise"),p(d))},E.prototype.resetUrl=function(){this.logger.debug("[TrouterUrlPromise] resetting url"),this.url=void 0},E}();u.TrouterUrlPromise=s},function(module,exports,__nested_webpack_require_43418__){(function(global,module){var K,u,c;K=module.exports,u=void 0===global?window:global,c=K,c.version="0.9.6",c.protocol=1,c.transports=[],c.j=[],c.sockets={},c.connect=function(s,E){var d,p,T=c.util.parseUri(s);u&&u.location&&(T.protocol=T.protocol||u.location.protocol.slice(0,-1),T.host=T.host||(u.document?u.document.domain:u.location.hostname),T.port=T.port||u.location.port),d=c.util.uniqueUri(T);var l={host:T.host,secure:"https"==T.protocol,port:T.port||("https"==T.protocol?443:80),query:T.query||""};return c.util.merge(l,E),!l["force new connection"]&&c.sockets[d]||(p=new c.Socket(l)),!l["force new connection"]&&p&&(c.sockets[d]=p),(p=p||c.sockets[d]).of(T.path.length>1?T.path:"")};var io=module.exports;(function(K,u){var c=K.util={},s=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,E=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];c.parseUri=function(p){for(var T=s.exec(p||""),l={},C=14;C--;)l[E[C]]=T[C]||"";return l},c.uniqueUri=function(p){var T=p.protocol,l=p.host,C=p.port;return"document"in u?(l=l||document.domain,C=C||("https"==T&&"https:"!==document.location.protocol?443:document.location.port)):(l=l||"localhost",C||"https"!=T||(C=443)),(T||"http")+"://"+l+":"+(C||80)},c.query=function(p,T){var l=c.chunkQuery(p||""),C=[];for(var P in c.merge(l,c.chunkQuery(T||"")),l)l.hasOwnProperty(P)&&C.push(P+"="+l[P]);return C.length?"?"+C.join("&"):""},c.chunkQuery=function(p){for(var T,l={},C=p.split("&"),P=0,w=C.length;P<w;++P)(T=C[P].split("="))[0]&&(l[T[0]]=T[1]);return l};var d=!1;c.load=function(p){if("document"in u&&"complete"===document.readyState||d)return p();c.on(u,"load",p,!1)},c.on=function(p,T,l,C){p.attachEvent?p.attachEvent("on"+T,l):p.addEventListener&&p.addEventListener(T,l,C)},c.request=function(p){if(p&&"undefined"!=typeof XDomainRequest)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!p||c.ua.hasCORS))return new XMLHttpRequest;if(!p)try{return new(window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(T){}return null},"undefined"!=typeof window&&c.load(function(){d=!0}),c.defer=function(p){if(!c.ua.webkit||"undefined"!=typeof importScripts)return p();c.load(function(){setTimeout(p,100)})},c.merge=function(p,T,l,C){var P,w=C||[],f=void 0===l?2:l;for(P in T)T.hasOwnProperty(P)&&c.indexOf(w,P)<0&&("object"==typeof p[P]&&f?c.merge(p[P],T[P],f-1,w):(p[P]=T[P],w.push(T[P])));return p},c.mixin=function(p,T){c.merge(p.prototype,T.prototype)},c.inherit=function(p,T){function l(){}l.prototype=T.prototype,p.prototype=new l},c.isArray=Array.isArray||function(p){return"[object Array]"===Object.prototype.toString.call(p)},c.intersect=function(p,T){for(var l=[],C=p.length>T.length?p:T,P=p.length>T.length?T:p,w=0,f=P.length;w<f;w++)~c.indexOf(C,P[w])&&l.push(P[w]);return l},c.indexOf=function(p,T,l){var C=p.length;for(l=l<0?l+C<0?0:l+C:l||0;l<C&&p[l]!==T;l++);return C<=l?-1:l},c.toArray=function(p){for(var T=[],l=0,C=p.length;l<C;l++)T.push(p[l]);return T},c.ua={},c.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var p=new XMLHttpRequest}catch(T){return!1}return null!=p.withCredentials}(),c.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent)})(void 0!==io?io:module.exports,void 0===global?window:global),function(K,u){function c(){}K.EventEmitter=c,c.prototype.addListener=c.prototype.on=function(s,E){return this.$events||(this.$events={}),this.$events[s]?u.util.isArray(this.$events[s])?this.$events[s].push(E):this.$events[s]=[this.$events[s],E]:this.$events[s]=E,this},c.prototype.once=function(s,E){function d(){p.removeListener(s,d),E.apply(this,arguments)}var p=this;return d.listener=E,this.on(s,d),this},c.prototype.removeListener=function(s,E){if(this.$events&&this.$events[s]){var d=this.$events[s];if(u.util.isArray(d)){for(var p=-1,T=0,l=d.length;T<l;T++)if(d[T]===E||d[T].listener&&d[T].listener===E){p=T;break}if(p<0)return this;d.splice(p,1),d.length||delete this.$events[s]}else(d===E||d.listener&&d.listener===E)&&delete this.$events[s]}return this},c.prototype.removeAllListeners=function(s){return this.$events&&this.$events[s]&&(this.$events[s]=null),this},c.prototype.listeners=function(s){return this.$events||(this.$events={}),this.$events[s]||(this.$events[s]=[]),u.util.isArray(this.$events[s])||(this.$events[s]=[this.$events[s]]),this.$events[s]},c.prototype.emit=function(s){if(!this.$events)return!1;var E=this.$events[s];if(!E)return!1;var d=Array.prototype.slice.call(arguments,1);if("function"==typeof E)E.apply(this,d);else{if(!u.util.isArray(E))return!1;for(var p=E.slice(),T=0,l=p.length;T<l;T++)p[T].apply(this,d)}return!0}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),function(exports,nativeJSON){function f(K){return K<10?"0"+K:K}function date(K,u){return isFinite(K.valueOf())?K.getUTCFullYear()+"-"+f(K.getUTCMonth()+1)+"-"+f(K.getUTCDate())+"T"+f(K.getUTCHours())+":"+f(K.getUTCMinutes())+":"+f(K.getUTCSeconds())+"Z":null}function quote(K){return escapable.lastIndex=0,escapable.test(K)?'"'+K.replace(escapable,function(u){var c=meta[u];return"string"==typeof c?c:"\\u"+("0000"+u.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+K+'"'}function str(K,u){var c,s,E,d,p,T=gap,l=u[K];switch(l instanceof Date&&(l=date(K)),"function"==typeof rep&&(l=rep.call(u,K,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,p=[],"[object Array]"===Object.prototype.toString.apply(l)){for(d=l.length,c=0;c<d;c+=1)p[c]=str(c,l)||"null";return E=0===p.length?"[]":gap?"[\n"+gap+p.join(",\n"+gap)+"\n"+T+"]":"["+p.join(",")+"]",gap=T,E}if(rep&&"object"==typeof rep)for(d=rep.length,c=0;c<d;c+=1)"string"==typeof rep[c]&&(E=str(s=rep[c],l))&&p.push(quote(s)+(gap?": ":":")+E);else for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(E=str(s,l))&&p.push(quote(s)+(gap?": ":":")+E);return E=0===p.length?"{}":gap?"{\n"+gap+p.join(",\n"+gap)+"\n"+T+"}":"{"+p.join(",")+"}",gap=T,E}}if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={},cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;JSON.stringify=function(K,u,c){var s;if(gap="",indent="","number"==typeof c)for(s=0;s<c;s+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=u,u&&"function"!=typeof u&&("object"!=typeof u||"number"!=typeof u.length))throw new Error("JSON.stringify");return str("",{"":K})},JSON.parse=function(text,reviver){function walk(K,u){var c,s,E=K[u];if(E&&"object"==typeof E)for(c in E)Object.prototype.hasOwnProperty.call(E,c)&&(void 0!==(s=walk(E,c))?E[c]=s:delete E[c]);return reviver.call(K,u,E)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(K){return"\\u"+("0000"+K.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}(void 0!==io?io:module.exports,"undefined"!=typeof JSON?JSON:void 0),function(K,u){var c=K.parser={},s=c.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],E=c.reasons=["transport not supported","client not handshaken","unauthorized"],d=c.advice=["reconnect"],p=u.JSON,T=u.util.indexOf;c.encodePacket=function(C){var P=T(s,C.type),w=C.id||"",f=C.endpoint||"",g=C.ack,_=null;switch(C.type){case"error":var b=C.reason?T(E,C.reason):"",m=C.advice?T(d,C.advice):"";""===b&&""===m||(_=b+(""!==m?"+"+m:""));break;case"message":""!==C.data&&(_=C.data);break;case"event":var I={name:C.name};C.args&&C.args.length&&(I.args=C.args),_=p.stringify(I);break;case"json":_=p.stringify(C.data);break;case"connect":C.qs&&(_=C.qs);break;case"ack":_=C.ackId+(C.args&&C.args.length?"+"+p.stringify(C.args):"")}var x=[P,w+("data"==g?"+":""),f];return null!=_&&x.push(_),x.join(":")},c.encodePayload=function(C){var P="";if(1==C.length)return C[0];for(var w=0,f=C.length;w<f;w++)P+="\ufffd"+C[w].length+"\ufffd"+C[w];return P};var l=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;c.decodePacket=function(C){if(!(P=C.match(l)))return{};var w=P[2]||"",f=(C=P[5]||"",{type:s[P[1]],endpoint:P[4]||""});switch(w&&(f.id=w,f.ack=!P[3]||"data"),f.type){case"error":var P=C.split("+");f.reason=E[P[0]]||"",f.advice=d[P[1]]||"";break;case"message":f.data=C||"";break;case"event":try{var g=p.parse(C);f.name=g.name,f.args=g.args}catch(b){}f.args=f.args||[];break;case"json":try{f.data=p.parse(C)}catch(b){}break;case"connect":f.qs=C||"";break;case"ack":if((P=C.match(/^([0-9]+)(\+)?(.*)/))&&(f.ackId=P[1],f.args=[],P[3]))try{f.args=P[3]?p.parse(P[3]):[]}catch(b){}break;case"disconnect":f.reason=C}return f},c.decodePayload=function(C){if("\ufffd"==C.charAt(0)){for(var P=[],w=1,f="";w<C.length;w++)"\ufffd"==C.charAt(w)?(P.push(c.decodePacket(C.substr(w+1).substr(0,f))),w+=Number(f)+1,f=""):f+=C.charAt(w);return P}return[c.decodePacket(C)]}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),function(K,u){function c(s,E){this.socket=s,this.sessid=E,this.connectErrorCallback=void 0,this.isOpened=!1}K.Transport=c,u.util.mixin(c,u.EventEmitter),c.prototype.onData=function(s){if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),""!==s){var E=u.parser.decodePayload(s);if(E&&E.length)for(var d=0,p=E.length;d<p;d++)this.onPacket(E[d])}return this},c.prototype.onPacket=function(s){return this.socket.setHeartbeatTimeout(),"heartbeat"==s.type?this.onHeartbeat():("connect"==s.type&&""==s.endpoint&&this.onConnect(),"error"==s.type&&"reconnect"==s.advice&&(this.isOpened=!1),this.socket.onPacket(s),this)},c.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var s=this;this.closeTimeout=setTimeout(function(){s.onDisconnect()},this.socket.closeTimeout)}},c.prototype.onDisconnect=function(){return this.close&&this.isOpened&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},c.prototype.onConnect=function(){return this.socket.onConnect(),this.connectErrorCallback=void 0,this},c.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},c.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},c.prototype.packet=function(s){this.send(u.parser.encodePacket(s))},c.prototype.onHeartbeat=function(s){this.packet({type:"heartbeat"})},c.prototype.onOpen=function(){this.isOpened=!0,this.clearCloseTimeout(),this.socket.onOpen()},c.prototype.onClose=function(){this.isOpened=!1,this.socket.onClose(),this.onDisconnect()},c.prototype.prepareUrl=function(){var s=this.socket.options;return this.scheme()+"://"+s.host+":"+s.port+"/"+s.resource+"/"+u.protocol+"/"+this.name+"/"+this.sessid},c.prototype.ready=function(s,E){E.call(this)},c.prototype.clearEventHandlers=function(){return this}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),function(K,u,c){function s(d){if(this.options={port:80,secure:!1,document:"document"in c&&document,resource:"socket.io",transports:u.transports.slice(),"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!0,"auto connect":!0,"flash policy port":10843},u.util.merge(this.options,d),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.disconnected=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||u.util.ua.hasCORS)){var p=this;u.util.on(c,"unload",function(){p.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function E(){}K.Socket=s,u.util.mixin(s,u.EventEmitter),s.prototype.of=function(d){return this.namespaces[d]||(this.namespaces[d]=new u.SocketNamespace(this,d),""!==d&&this.namespaces[d].packet({type:"connect"})),this.namespaces[d]},s.prototype.publish=function(){var d;for(var p in this.emit.apply(this,arguments),this.namespaces)this.namespaces.hasOwnProperty(p)&&(d=this.of(p)).$emit.apply(d,arguments)},s.prototype.handshake=function(d){function p(g){g instanceof Error?T.onError(g.message):d.apply(null,g.split(":"))}var T=this,l=this.options;if(!T.disconnected){var C=["http"+(l.secure?"s":"")+":/",l.host+":"+l.port,l.resource,u.protocol,u.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!u.util.ua.hasCORS){var P=document.getElementsByTagName("script")[0],w=document.createElement("script");w.src=C+"&jsonp="+u.j.length,P.parentNode.insertBefore(w,P),u.j.push(function(g){p(g),w.parentNode.removeChild(w)})}else{var f=u.util.request();f.open("GET",C,!0),f.withCredentials=!0,f.onreadystatechange=function(){4==f.readyState&&(f.onreadystatechange=E,200==f.status?p(f.responseText):!T.reconnecting&&T.onError(f.responseText))},f.send(null)}}},s.prototype.getTransport=function(d){for(var p,T=d||this.transports,l=0;p=T[l];l++)if(u.Transport[p]&&u.Transport[p].check(this)&&(!this.isXDomain()||u.Transport[p].xdomainCheck()))return new u.Transport[p](this,this.sessionid);return null},s.prototype.connect=function(d){if(this.connecting||this.disconnected)return this;var p=this;return this.handshake(function(T,l,C,P){function w(){if(!p.connected&&!p.disconnected)if(p.connecting=!1,clearTimeout(p.connectTimeoutTimer),p.options["try multiple transports"]){for(;p.remainingTransports.length>0&&p.remainingTransports.splice(0,1)[0]!=p.transport.name;);p.remainingTransports.length?f(p.remainingTransports):p.publish("connect_failed")}else p.publish("connect_failed")}function f(g){if(p.transport&&(p.transport.clearTimeouts(),p.transport.clearEventHandlers()),p.transport=p.getTransport(g),!p.transport||p.disconnected)return p.publish("connect_failed");p.transport.ready(p,function(){p.connecting=!0,p.publish("connecting",p.transport.name),p.transport.open(w),p.options["connect timeout"]&&(p.connectTimeoutTimer=setTimeout(function(){w()},p.options["connect timeout"]))})}p.sessionid=T,p.closeTimeout=1e3*C+2e3,p.heartbeatTimeout=1e3*l+2e3,p.transports=P?u.util.intersect(P.split(","),p.options.transports):p.options.transports,p.setHeartbeatTimeout(),p.remainingTransports=p.transports.slice(0),f(p.transports),p.once("connect",function(){clearTimeout(p.connectTimeoutTimer),d&&"function"==typeof d&&d()})}),this},s.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);var d=this;this.heartbeatTimeoutTimer=setTimeout(function(){d.transport.onClose()},this.heartbeatTimeout)},s.prototype.packet=function(d){return this.connected&&!this.doBuffer?this.transport.packet(d):this.buffer.push(d),this},s.prototype.setBuffer=function(d){this.doBuffer=d,!d&&this.connected&&this.buffer.length&&(this.transport.payload(this.buffer),this.buffer=[])},s.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this.disconnected=!0,this},s.prototype.disconnectSync=function(){u.util.request().open("GET",this.resource+"/"+u.protocol+"/"+this.sessionid,!0),this.onDisconnect("booted")},s.prototype.isXDomain=function(){return this.options.host!==c.location.hostname||this.options.port!=(c.location.port||("https:"==c.location.protocol?443:80))},s.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},s.prototype.onOpen=function(){this.open=!0},s.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},s.prototype.onPacket=function(d){this.of(d.endpoint).onPacket(d)},s.prototype.onError=function(d){d&&d.advice&&"reconnect"===d.advice&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",d&&d.reason?d.reason:d)},s.prototype.onDisconnect=function(d){var p=this.connected,T=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1,(p||T)&&(this.transport.close(),this.transport.clearTimeouts(),p&&(this.publish("disconnect",d),"booted"!=d&&this.options.reconnect&&!this.reconnecting&&this.reconnect()))},s.prototype.reconnect=function(){function d(){if(T.connected){for(var w in T.namespaces)T.namespaces.hasOwnProperty(w)&&""!==w&&T.namespaces[w].packet({type:"connect"});T.publish("reconnect",T.transport.name,T.reconnectionAttempts)}clearTimeout(T.reconnectionTimer),T.removeListener("connect_failed",p),T.removeListener("connect",p),T.reconnecting=!1,delete T.reconnectionAttempts,delete T.reconnectionDelay,delete T.reconnectionTimer,delete T.redoTransports,T.options["try multiple transports"]=C}function p(){if(T.reconnecting)return T.connected?d():T.connecting&&T.reconnecting?T.reconnectionTimer=setTimeout(p,1e3):void(T.reconnectionAttempts++>=l?T.redoTransports?(T.publish("reconnect_failed"),d()):(T.on("connect_failed",p),T.options["try multiple transports"]=!0,T.transport=T.getTransport(),T.redoTransports=!0,T.connect()):(T.reconnectionDelay<P&&(T.reconnectionDelay*=2),T.connect(),T.publish("reconnecting",T.reconnectionDelay,T.reconnectionAttempts),T.reconnectionTimer=setTimeout(p,T.reconnectionDelay)))}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var T=this,l=this.options["max reconnection attempts"],C=this.options["try multiple transports"],P=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(p,this.reconnectionDelay),this.on("connect",p)}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports,void 0===global?window:global),function(K,u){function c(E,d){this.socket=E,this.name=d||"",this.flags={},this.json=new s(this,"json"),this.ackPackets=0,this.acks={}}function s(E,d){this.namespace=E,this.name=d}K.SocketNamespace=c,u.util.mixin(c,u.EventEmitter),c.prototype.$emit=u.EventEmitter.prototype.emit,c.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},c.prototype.packet=function(E){return E.endpoint=this.name,this.socket.packet(E),this.flags={},this},c.prototype.send=function(E,d){var p={type:this.flags.json?"json":"message",data:E};return"function"==typeof d&&(p.id=++this.ackPackets,p.ack=!0,this.acks[p.id]=d),this.packet(p)},c.prototype.emit=function(E){var d=Array.prototype.slice.call(arguments,1),p=d[d.length-1],T={type:"event",name:E};return"function"==typeof p&&(T.id=++this.ackPackets,T.ack="data",this.acks[T.id]=p,d=d.slice(0,d.length-1)),T.args=d,this.packet(T)},c.prototype.disconnect=function(){return""===this.name?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},c.prototype.onPacket=function(E){function d(){p.packet({type:"ack",args:u.util.toArray(arguments),ackId:E.id})}var p=this;switch(E.type){case"connect":this.$emit("connect");break;case"disconnect":""===this.name?this.socket.onDisconnect(E.reason||"booted"):this.$emit("disconnect",E.reason||"");break;case"message":case"json":var T=["message",E.data];"data"==E.ack?T.push(d):E.ack&&this.packet({type:"ack",ackId:E.id}),this.$emit.apply(this,T);break;case"event":T=[E.name].concat(E.args),"data"==E.ack&&T.push(d),this.$emit.apply(this,T);break;case"ack":this.acks[E.ackId]&&(this.acks[E.ackId].apply(this,E.args),delete this.acks[E.ackId]);break;case"error":E.advice?this.socket.onError(E):this.$emit("unauthorized"==E.reason?"connect_failed":"error",E.reason)}},s.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},s.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),function(K,u,c){function s(d){u.Transport.apply(this,arguments)}function E(){}K.websocket=s,u.util.inherit(s,u.Transport),s.prototype.name="websocket",s.prototype.open=function(d){var p,T=u.util.query(this.socket.options.query),l=this;return this.connectErrorCallback=d,p||(p=c.MozWebSocket||c.WebSocket),this.websocket=new p(this.prepareUrl()+T),this.websocket.onopen=function(){l.onOpen(),l.socket.setBuffer(!1)},this.websocket.onmessage=function(C){l.onData(C.data)},this.websocket.onclose=function(){l.onClose(),l.socket.setBuffer(!0)},this.websocket.onerror=function(C){l.onError(C)},this},s.prototype.send=function(d){return this.websocket.send(d),this},s.prototype.payload=function(d){for(var p=0,T=d.length;p<T;p++)this.packet(d[p]);return this},s.prototype.close=function(){return this.websocket.close(),this},s.prototype.onError=function(d){void 0!==this.connectErrorCallback&&(this.connectErrorCallback(),this.connectErrorCallback=void 0),this.socket.onError(d)},s.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},s.check=function(){return"WebSocket"in c&&!("__addTask"in WebSocket)||"MozWebSocket"in c},s.xdomainCheck=function(){return!0},s.prototype.clearEventHandlers=function(){return this.websocket&&(this.websocket.onopen=this.websocket.onmessage=this.websocket.onclose=this.websocket.onerror=E),this},u.transports.push("websocket")}(void 0!==io?io.Transport:module.exports,void 0!==io?io:module.parent.exports,void 0===global?window:global),function(K,u,c){function s(d){d&&(u.Transport.apply(this,arguments),this.sendBuffer=[])}function E(){}K.XHR=s,u.util.inherit(s,u.Transport),s.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},s.prototype.payload=function(d){for(var p=[],T=0,l=d.length;T<l;T++)p.push(u.parser.encodePacket(d[T]));this.send(u.parser.encodePayload(p))},s.prototype.send=function(d){return this.post(d),this},s.prototype.post=function(d){var l=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),c.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=function(){this.onload=E,l.socket.setBuffer(!1)}:this.sendXHR.onreadystatechange=function(){4==this.readyState&&(this.onreadystatechange=E,l.posting=!1,200==this.status?(l.socket.setBuffer(!1),clearTimeout(l.sendXHR.ackTimeoutTimer)):l.onClose())},this.sendXHR.send(d),l.sendXHR.ackTimeoutTimer=setTimeout(function(){l.onClose()},l.socket.options.ackTimeoutMs)},s.prototype.close=function(){return this.onClose(),this},s.prototype.request=function(d){var p=u.util.request(this.socket.isXDomain()),T=u.util.query(this.socket.options.query,"t="+ +new Date);if(p.open(d||"GET",this.prepareUrl()+T,!0),"POST"==d)try{p.setRequestHeader?p.setRequestHeader("Content-type","text/plain;charset=UTF-8"):p.contentType="text/plain"}catch(l){}return p},s.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},s.check=function(d,p){try{var T=u.util.request(p),l=c.XDomainRequest&&T instanceof XDomainRequest;if(T&&(!l||(d&&d.options&&d.options.secure?"https:":"http:")==c.location.protocol))return!0}catch(w){}return!1},s.xdomainCheck=function(){return s.check(null,!0)},s.prototype.clearEventHandlers=function(){return this.sendXHR&&(this.sendXHR.onreadystatechange=this.sendXHR.onload=E),this}}(void 0!==io?io.Transport:module.exports,void 0!==io?io:module.parent.exports,void 0===global?window:global),function(K,u,c){function s(){u.Transport.XHR.apply(this,arguments)}function E(){}K["xhr-polling"]=s,u.util.inherit(s,u.Transport.XHR),u.util.merge(s,u.Transport.XHR),s.prototype.name="xhr-polling",s.prototype.open=function(d){return this.connectErrorCallback=d,u.Transport.XHR.prototype.open.call(this),!1},s.prototype.get=function(){if(this.isOpened){var l=this;this.xhr=this.request(),c.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=function(){l.connectErrorCallback=void 0,this.onload=E,this.onerror=E,l.onData(this.responseText),l.get()},this.xhr.onerror=function(){l.onClose(),void 0!==l.connectErrorCallback&&(l.connectErrorCallback(),l.connectErrorCallback=void 0)}):this.xhr.onreadystatechange=function(){4==this.readyState&&(this.onreadystatechange=E,200==this.status?(l.connectErrorCallback=void 0,l.onData(this.responseText),l.get()):(l.onClose(),void 0!==l.connectErrorCallback&&(l.connectErrorCallback(),l.connectErrorCallback=void 0)))},this.xhr.send(null)}},s.prototype.onClose=function(){if(u.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=E;try{this.xhr.abort()}catch(d){}this.xhr=null}},s.prototype.ready=function(d,p){var T=this;u.util.defer(function(){p.call(T)})},s.prototype.clearEventHandlers=function(){return u.Transport.XHR.prototype.clearEventHandlers.call(this),this.xhr&&(this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=E),this},u.transports.push("xhr-polling")}(void 0!==io?io.Transport:module.exports,void 0!==io?io:module.parent.exports,void 0===global?window:global),exports.io=io}).call(exports,__nested_webpack_require_43418__(4),__nested_webpack_require_43418__(13)(module))},function(K,u,c){(function(s,E){K.exports=function(){function p(Le){return"function"==typeof Le}function P(){var Le=setTimeout;return function(){return Le(w,1)}}function w(){for(var Le=0;Le<ge;Le+=2)(0,Je[Le])(Je[Le+1]),Je[Le]=void 0,Je[Le+1]=void 0;ge=0}function f(Le,ze){var Ye=arguments,Et=this,At=new this.constructor(_);void 0===At[je]&&Se(At);var nn,Mt=Et._state;return Mt?(nn=Ye[Mt-1],Fe(function(){return te(Mt,At,nn,Et._result)})):W(Et,At,Le,ze),At}function g(Le){if(Le&&"object"==typeof Le&&Le.constructor===this)return Le;var Ye=new this(_);return N(Ye,Le),Ye}function _(){}function I(Le){try{return Le.then}catch(ze){return on.error=ze,on}}function U(Le,ze,Ye){ze.constructor===Le.constructor&&Ye===f&&ze.constructor.resolve===g?function(Le,ze){ze._state===ke?M(Le,ze._result):ze._state===Ht?j(Le,ze._result):W(ze,void 0,function(Ye){return N(Le,Ye)},function(Ye){return j(Le,Ye)})}(Le,ze):Ye===on?j(Le,on.error):void 0===Ye?M(Le,ze):p(Ye)?function(Le,ze,Ye){Fe(function(Et){var At=!1,Mt=function(Le,ze,Ye,Et){try{Le.call(ze,Ye,Et)}catch(At){return At}}(Ye,ze,function(nn){At||(At=!0,ze!==nn?N(Et,nn):M(Et,nn))},function(nn){At||(At=!0,j(Et,nn))});!At&&Mt&&(At=!0,j(Et,Mt))},Le)}(Le,ze,Ye):M(Le,ze)}function N(Le,ze){Le===ze?j(Le,new TypeError("You cannot resolve a promise with itself")):function(Le){return"function"==typeof Le||"object"==typeof Le&&null!==Le}(ze)?U(Le,ze,I(ze)):M(Le,ze)}function R(Le){Le._onerror&&Le._onerror(Le._result),$(Le)}function M(Le,ze){Le._state===tt&&(Le._result=ze,Le._state=ke,0!==Le._subscribers.length&&Fe($,Le))}function j(Le,ze){Le._state===tt&&(Le._state=Ht,Le._result=ze,Fe(R,Le))}function W(Le,ze,Ye,Et){var At=Le._subscribers,Mt=At.length;Le._onerror=null,At[Mt]=ze,At[Mt+ke]=Ye,At[Mt+Ht]=Et,0===Mt&&Le._state&&Fe($,Le)}function $(Le){var ze=Le._subscribers,Ye=Le._state;if(0!==ze.length){for(var Et=void 0,At=void 0,Mt=Le._result,nn=0;nn<ze.length;nn+=3)At=ze[nn+Ye],(Et=ze[nn])?te(Ye,Et,At,Mt):At(Mt);Le._subscribers.length=0}}function ce(){this.error=null}function te(Le,ze,Ye,Et){var At=p(Ye),Mt=void 0,nn=void 0,kr=void 0,xt=void 0;if(At){if((Mt=function(Le,ze){try{return Le(ze)}catch(Ye){return wn.error=Ye,wn}}(Ye,Et))===wn?(xt=!0,nn=Mt.error,Mt=null):kr=!0,ze===Mt)return void j(ze,new TypeError("A promises callback cannot return that same promise."))}else Mt=Et,kr=!0;ze._state!==tt||(At&&kr?N(ze,Mt):xt?j(ze,nn):Le===ke?M(ze,Mt):Le===Ht&&j(ze,Mt))}function Se(Le){Le[je]=ir++,Le._state=void 0,Le._result=void 0,Le._subscribers=[]}function oe(Le,ze){this._instanceConstructor=Le,this.promise=new Le(_),this.promise[je]||Se(this.promise),ye(ze)?(this._input=ze,this.length=ze.length,this._remaining=ze.length,this._result=new Array(this.length),0===this.length?M(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&M(this.promise,this._result))):j(this.promise,new Error("Array Methods must be provided an Array"))}function ee(Le){this[je]=ir++,this._result=this._state=void 0,this._subscribers=[],_!==Le&&("function"!=typeof Le&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof ee?function(Le,ze){try{ze(function(Ye){N(Le,Ye)},function(Ye){j(Le,Ye)})}catch(Ye){j(Le,Ye)}}(this,Le):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}var Le,ze,Ye,ye=Array.isArray?Array.isArray:function(Le){return"[object Array]"===Object.prototype.toString.call(Le)},ge=0,Ee=void 0,De=void 0,Fe=function(Le,ze){Je[ge]=Le,Je[ge+1]=ze,2===(ge+=2)&&(De?De(w):Ke())},Ie="undefined"!=typeof window?window:void 0,Be=Ie||{},He=Be.MutationObserver||Be.WebKitMutationObserver,Ve="undefined"==typeof self&&void 0!==s&&"[object process]"==={}.toString.call(s),$e="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Je=new Array(1e3),Ke=void 0;Ke=Ve?function(){return s.nextTick(w)}:He?(Le=0,ze=new He(w),Ye=document.createTextNode(""),ze.observe(Ye,{characterData:!0}),function(){Ye.data=Le=++Le%2}):$e?function(){var Le=new MessageChannel;return Le.port1.onmessage=w,function(){return Le.port2.postMessage(0)}}():void 0===Ie?function(){try{var Le=c(21);return void 0!==(Ee=Le.runOnLoop||Le.runOnContext)?function(){Ee(w)}:P()}catch(ze){return P()}}():P();var je=Math.random().toString(36).substring(16),tt=void 0,ke=1,Ht=2,on=new ce,wn=new ce,ir=0;return oe.prototype._enumerate=function(){for(var Le=this.length,ze=this._input,Ye=0;this._state===tt&&Ye<Le;Ye++)this._eachEntry(ze[Ye],Ye)},oe.prototype._eachEntry=function(Le,ze){var Ye=this._instanceConstructor,Et=Ye.resolve;if(Et===g){var At=I(Le);if(At===f&&Le._state!==tt)this._settledAt(Le._state,ze,Le._result);else if("function"!=typeof At)this._remaining--,this._result[ze]=Le;else if(Ye===ee){var Mt=new Ye(_);U(Mt,Le,At),this._willSettleAt(Mt,ze)}else this._willSettleAt(new Ye(function(nn){return nn(Le)}),ze)}else this._willSettleAt(Et(Le),ze)},oe.prototype._settledAt=function(Le,ze,Ye){var Et=this.promise;Et._state===tt&&(this._remaining--,Le===Ht?j(Et,Ye):this._result[ze]=Ye),0===this._remaining&&M(Et,this._result)},oe.prototype._willSettleAt=function(Le,ze){var Ye=this;W(Le,void 0,function(Et){return Ye._settledAt(ke,ze,Et)},function(Et){return Ye._settledAt(Ht,ze,Et)})},ee.all=function(Le){return new oe(this,Le).promise},ee.race=function(Le){var ze=this;return new ze(ye(Le)?function(Ye,Et){for(var At=Le.length,Mt=0;Mt<At;Mt++)ze.resolve(Le[Mt]).then(Ye,Et)}:function(Ye,Et){return Et(new TypeError("You must pass an array to race."))})},ee.resolve=g,ee.reject=function(Le){var Ye=new this(_);return j(Ye,Le),Ye},ee._setScheduler=function(Le){De=Le},ee._setAsap=function(Le){Fe=Le},ee._asap=Fe,ee.prototype={constructor:ee,then:f,catch:function(Le){return this.then(null,Le)}},ee.polyfill=function(){var Le=void 0;if(void 0!==E)Le=E;else if("undefined"!=typeof self)Le=self;else try{Le=Function("return this")()}catch(Et){throw new Error("polyfill failed because global object is unavailable in this environment")}var ze=Le.Promise;if(ze){var Ye=null;try{Ye=Object.prototype.toString.call(ze.resolve())}catch(Et){}if("[object Promise]"===Ye&&!ze.cast)return}Le.Promise=ee},ee.Promise=ee,ee}()}).call(u,c(12),c(4))},function(K,u){function c(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function E(I){if(P===setTimeout)return setTimeout(I,0);if((P===c||!P)&&setTimeout)return P=setTimeout,setTimeout(I,0);try{return P(I,0)}catch(x){try{return P.call(null,I,0)}catch(k){return P.call(this,I,0)}}}function p(){b&&g&&(b=!1,g.length?_=g.concat(_):m=-1,_.length&&T())}function T(){if(!b){var I=E(p);b=!0;for(var x=_.length;x;){for(g=_,_=[];++m<x;)g&&g[m].run();m=-1,x=_.length}g=null,b=!1,function(I){if(w===clearTimeout)return clearTimeout(I);if((w===s||!w)&&clearTimeout)return w=clearTimeout,clearTimeout(I);try{w(I)}catch(x){try{return w.call(null,I)}catch(k){return w.call(this,I)}}}(I)}}function l(I,x){this.fun=I,this.array=x}function C(){}var P,w,f=K.exports={};!function(){try{P="function"==typeof setTimeout?setTimeout:c}catch(I){P=c}try{w="function"==typeof clearTimeout?clearTimeout:s}catch(I){w=s}}();var g,_=[],b=!1,m=-1;f.nextTick=function(I){var x=new Array(arguments.length-1);if(arguments.length>1)for(var k=1;k<arguments.length;k++)x[k-1]=arguments[k];_.push(new l(I,x)),1!==_.length||b||E(T)},l.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=C,f.addListener=C,f.once=C,f.off=C,f.removeListener=C,f.removeAllListeners=C,f.emit=C,f.prependListener=C,f.prependOnceListener=C,f.listeners=function(I){return[]},f.binding=function(I){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(I){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(K,u){K.exports=function(c){return c.webpackPolyfill||(c.deprecate=function(){},c.paths=[],c.children||(c.children=[]),Object.defineProperty(c,"loaded",{enumerable:!0,get:function(){return c.l}}),Object.defineProperty(c,"id",{enumerable:!0,get:function(){return c.i}}),c.webpackPolyfill=1),c}},function(K,u,c){Object.defineProperty(u,"__esModule",{value:!0});var T,g,s=c(3),E=c(1),d=c(0);u.ResponseData=function(_){this.id=_,this.status=200,this.headers={},this.body=""},(g=T=u.ClientEventName||(u.ClientEventName={})).Connected="trouter_js_client_connected",g.Disconnected="trouter_js_client_disconnected",g.Error="trouter_js_client_error",g.Progress="trouter_js_client_progress",g.Response="trouter_js_client_response",g.Request="trouter_js_client_request",g.CheckConnection="trouter_js_client_check_connection",g.Registration="trouter_js_client_registration",g.Unregistration="trouter_js_client_unregistration";var l=function(_,b,m,I,x){this.stepName=_,this.operation=b,this.delta=m,this.ts=I,this.error=x};u.TrackerStep=l,u.Properties=function(){};var P=function(){this.numberOfPingReplies=0,this.connectedTimestamp=0,this.isNewUrl=!1,this.transportType="",this.connectionNumber=0},w=function(){this.enabled=!1,this.numberOfStepsToMaintain=40,this.logHealthCheckError=!1,this.sendProgressTimeoutSecs=55,this.logSendPingError=!1,this.maxBackoffInMs=12e4,this.trouter_js_client_connected=!1,this.trouter_js_client_disconnected=!1,this.trouter_js_client_error=!1,this.trouter_js_client_progress=!1,this.trouter_js_client_response=!1,this.trouter_js_client_request=!1,this.trouter_js_client_registration=!1,this.trouter_js_client_unregistration=!1,this.trouter_js_client_check_connection=!0},f=function(){function g(_,b,m,I,x,k,F){this.clientId=b,this.clientInfo=m,this.getServerState=I,this.endpointId=x,this.clientCorrelationID=k,this.environment=F,this.logger=new d.Logger("ConnectionTracker",_),this.clientCorrelationID=void 0!==k?k:"",this.steps=[],this.connectionAttempt=0,this.totalStepCount=0,this.beginTimestamp=new s.Timespan,this.eventLogSettings=new w,this.connectedInfo=new P}return g.prototype.enable=function(_){this.eventLogSettings.enabled=!0,this.eventLogger=_},g.prototype.disable=function(){this.eventLogSettings.enabled=!1},g.prototype.sendProgress=function(_){this.steps.length>0&&this.sendTelemetry(T.Progress,_,this.steps)},g.prototype.cancelProgressTimer=function(){void 0!==this.progressTimeout&&(clearTimeout(this.progressTimeout),this.progressTimeout=void 0)},g.prototype.resetProgressSendTimer=function(){var _=this;this.cancelProgressTimer(),void 0!==this.eventLogSettings.sendProgressTimeoutSecs&&this.eventLogSettings.sendProgressTimeoutSecs>0&&(this.progressTimeout=setTimeout(function(){_.sendProgress({reason:"timeout",timeoutSecs:_.eventLogSettings.sendProgressTimeoutSecs})},1e3*this.eventLogSettings.sendProgressTimeoutSecs))},g.prototype.setConnectedInfo=function(_,b){this.connectedInfo.numberOfPingReplies=0,this.connectedInfo.connectedTimestamp=Date.now(),this.connectedInfo.isNewUrl=_,this.connectedInfo.transportType=b,++this.connectedInfo.connectionNumber},g.prototype.clearConnectedInfo=function(){this.connectedInfo.numberOfPingReplies=0,this.connectedInfo.connectedTimestamp=0,this.connectedInfo.isNewUrl=!0,this.connectedInfo.transportType=""},g.prototype.copyProperties=function(_,b){for(var m=0,I=Object.keys(b);m<I.length;m++){var x=I[m];b.hasOwnProperty(x)&&void 0!==b[x]&&(_[x.replace(/-/g,"_")]={value:b[x]})}},g.prototype.increasePingResponseCount=function(){++this.connectedInfo.numberOfPingReplies},g.prototype.sendTelemetry=function(_,b,m){try{if(!0===this.eventLogSettings.enabled&&!0===this.eventLogSettings[_]&&void 0!==this.eventLogger){var I=this.getServerState(),x={name:_,properties:{connectionAttempt:{value:this.connectionAttempt},epid:{value:this.endpointId},clientCorrelationID:{value:this.clientCorrelationID},steps:{value:s.toJson(m)},clientID:{value:this.clientId},eventVersion:{value:3},environment:{value:this.environment},cv:{value:E.CLIENT_VERSION},ua:{value:this.clientInfo.ua},connectionId:{value:I.connectionId},connectedClientId:{value:I.connectedClientId},domId:{value:I.domId},url:{value:I.unsecureUrl},surl:{value:I.url},ttlInSecs:{value:I.getRemainingTtlInSec()},numberOfPingReplies:{value:this.connectedInfo.numberOfPingReplies},connectedTimestamp:{value:this.connectedInfo.connectedTimestamp},isNewUrl:{value:this.connectedInfo.isNewUrl},transportType:{value:this.connectedInfo.transportType},connectionNumber:{value:this.connectedInfo.connectionNumber}}};this.copyProperties(x.properties,b),this.eventLogger.logEvent(x)}}catch(k){this.logger.warn("error in sending event "+_+": "+s.toJson(k))}},g.prototype.createStep=function(_,b,m){return new l(_,b,this.beginTimestamp.duration,Date.now(),m)},g.prototype.addStep=function(_,b,m){if(!1!==this.eventLogSettings.enabled&&(0===this.steps.length&&this.beginTimestamp.reset(),this.steps.push(this.createStep(_,b,m)),++this.totalStepCount,void 0!==this.eventLogSettings.numberOfStepsToMaintain&&this.steps.length>this.eventLogSettings.numberOfStepsToMaintain)){var I=this.steps.slice(0);this.steps.length=0,this.sendTelemetry(T.Progress,{reason:"flush"},I)}},g.prototype.trackStart=function(_){this.addStep(_,"start")},g.prototype.trackEnd=function(_){this.addStep(_,"end")},g.prototype.trackError=function(_,b,m,I){void 0===m&&(m=!0),"health"===_&&!0!==this.eventLogSettings.logHealthCheckError||"ping"===_&&!1===this.eventLogSettings.logSendPingError||(void 0===I&&(I="error"),!0===m&&this.addStep(_,I,b),this.sendTelemetry(T.Error,{},[this.createStep(_,I,b)]))},g.prototype.trackProgress=function(_,b){this.addStep(_,b)},g.prototype.trackConnected=function(_,b){this.setConnectedInfo(_,b);var m=this.steps.slice(0),I=this.totalStepCount,x=this.beginTimestamp.duration;this.steps.length=0,this.totalStepCount=0,this.sendTelemetry(T.Connected,{stepCount:m.length,totalStepCount:I,connectionEstablishmentMs_Total:x},m),this.cancelProgressTimer()},g.prototype.trackDisconnected=function(_){_.sessionLengthMS=Date.now()-this.connectedInfo.connectedTimestamp,this.sendTelemetry(T.Disconnected,_,[]),this.resetProgressSendTimer()},g.prototype.trackNewConnection=function(){++this.connectionAttempt},g.prototype.trackRequest=function(_,b){var m={};void 0!==b&&(m.hasError=!0,m.error=b);try{if(_){m.requestID=_.id,m.httpMethod=_.method,m.url=_.url,m.bodyLength=_.body.length,m.shortUrl=_.shortUrl,m.requestTimeStamp=_.startTS,m.correlationVector=_.correlationVector;for(var I=_.headers,x=0,k=Object.keys(I);x<k.length;x++){var F=k[x];I.hasOwnProperty(F)&&(m[F]=I[F])}}}catch(U){m.hasError=!0,m.error=m.error+" error creating request context "+s.toJson(U)}this.sendTelemetry(T.Request,m,[])},g.prototype.trackResponse=function(_,b,m,I){var x={};void 0!==I&&(x.hasError=!0,x.error=I);try{if(x.responseTimestamp=void 0!==m?m.sentTS:Date.now(),_){x.requestID=_.id,x.httpMethod=_.method,x.shortUrl=_.shortUrl,x.correlationVector=_.correlationVector;for(var k=_.headers,F=0,U=Object.keys(k);F<U.length;F++){var N=U[F];k.hasOwnProperty(N)&&(x[N]=k[N])}}m&&(x.latencyMS=b,x.responseCode=m.status,x.responseLength=m.body.length)}catch(R){x.hasError=!0,x.error=x.error+" error creating response context "+s.toJson(R)}this.sendTelemetry(T.Response,x,[])},g.prototype.sendResponseError=function(_,b,m){this.trackResponse(b,void 0,m,_)},g.prototype.close=function(){this.sendProgress({reason:"closed"}),this.steps.length=0,this.cancelProgressTimer()},g.prototype.mergeSettings=function(_){if(_){this.eventLogSettings.numberOfStepsToMaintain=Math.min(40,Math.max(10,void 0!==_.numberOfStepsToMaintain?_.numberOfStepsToMaintain:0));var b=Math.min(3600,Math.max(55,void 0!==_.sendProgressTimeoutSecs?_.sendProgressTimeoutSecs:0));this.eventLogSettings.logHealthCheckError=_.logHealthCheckError,this.eventLogSettings.logSendPingError=_.logSendPingError;for(var m=0,I=Object.keys(T).map(function(k){return T[k]});m<I.length;m++){var x=I[m];_.hasOwnProperty(x)&&void 0!==_[x]&&(this.eventLogSettings[x]=_[x])}this.eventLogSettings.sendProgressTimeoutSecs!==b&&(this.eventLogSettings.sendProgressTimeoutSecs=b,this.resetProgressSendTimer())}},g}();u.ConnectionTracker=f},function(K,u,c){Object.defineProperty(u,"__esModule",{value:!0});var s=function(){function E(d,p){this.logger=d,this.maxBackoffInMs=p,this.backoffId=0,this.backoffCount=0}return E.calculateNextBackoffMs=function(d,p){var T=1+.4*(Math.random()-.5),l=1e3*Math.pow(2,d)*T;return l=Math.round(l),Math.min(p,l)},E.prototype.setMaxBackoffMs=function(d){this.maxBackoffInMs=d},E.prototype.backoff=function(d,p){var T=this;void 0!==this.timerHandle&&(this.logger.debug("Clearing current back off"),clearTimeout(this.timerHandle),this.timerHandle=void 0);var l=E.calculateNextBackoffMs(this.backoffCount,this.maxBackoffInMs);this.backoffId++,this.backoffCount++,this.logger.info("Backing off "+d+" for "+l+" milliseconds with ID "+this.backoffId),this.timerHandle=setTimeout(function(){T.logger.info("Back off for "+d+" with ID "+T.backoffId+" complete, invoking handler"),T.timerHandle=void 0,p()},l)},E.prototype.reset=function(){void 0!==this.timerHandle&&(this.logger.debug("Resetting back off"),clearTimeout(this.timerHandle),this.timerHandle=void 0),this.backoffCount=0},E}();u.ExponentialBackoff=s},function(K,u,c){var s=this&&this.__assign||Object.assign||function(N){for(var R,M=1,j=arguments.length;M<j;M++)for(var W in R=arguments[M])Object.prototype.hasOwnProperty.call(R,W)&&(N[W]=R[W]);return N};Object.defineProperty(u,"__esModule",{value:!0});var E=c(20),d=c(11),p=c(3),T=c(14),l=c(1),C=c(15),P=c(2),w=c(5),f=c(0),g=c(17),_=c(10),b=function(){this.cv=l.CLIENT_VERSION,this.ua="",this.hr="",this.v=""},m=function(){this["force new connection"]=!0,this.reconnect=!1,this.query="",this.ackTimeoutMs=5e3},I="MS-CV",x=function(){function N(R){this.cvCounter=0;var M=JSON.parse(R);this.startTS=M.hasOwnProperty("startTS")?M.startTS:0,this.url=M.hasOwnProperty("url")?M.url:"",this.shortUrl=M.hasOwnProperty("shortUrl")?M.shortUrl:"",this.body=M.hasOwnProperty("body")?M.body:"",this.headers=M.hasOwnProperty("headers")?M.headers:{},this.id=M.hasOwnProperty("id")&&"number"==typeof M.id?M.id:-1,this.method=M.hasOwnProperty("method")?M.method:"",this.replied=!1,this.timedout=!1,this.timeoutTimerId=0,this.receivedCv=this.headers[I],this.updateCvHeader()}return Object.defineProperty(N.prototype,"correlationVector",{get:function(){return this.receivedCv?this.receivedCv+"."+this.cvCounter:""},enumerable:!0,configurable:!0}),N.prototype.on=function(R,M){"data"===R?this.dataCallback=M:"end"===R&&("function"==typeof this.dataCallback&&this.dataCallback(this.body),M())},N.prototype.incrementCorrelationVector=function(){++this.cvCounter,this.updateCvHeader()},N.prototype.updateCvHeader=function(){var R=this.correlationVector;R&&(this.headers[I]=R)},N}(),k=function(){function N(R,M,j){this.request=R,this.responseData=M,this.sendResponse=j}return N.prototype.writeHead=function(R,M){this.responseData.status=R,this.responseData.headers=M},N.prototype.write=function(R){this.responseData.body+=R},N.prototype.end=function(R){return R&&(this.responseData.body+=R),this.sendResponse(this.request,this.responseData)},N}(),F=function(R){this.name=R,this.args={},this.timeoutTimerId=0},U=function(){function N(R,M,j,W,$){var ce=this;this.options=M,this.manager=j,this.tokenProvider=W,this.connectionId="",this.inIncallMode=!1,this.connectionAttempt=0,this.connectedClientId="",this.c2cUrlBase="",this.pendingTimers={},this.lastDisconnectReason="",this.UNKNOWN_TRANSPORT="unknown_transport",this.logger=new f.Logger("Connection",R),this.timeoutOptions=this.options.timeoutOptions,this.healthBackoff=new C.ExponentialBackoff(this.logger,this.timeoutOptions.maxBackoffMs),this.tokenBackoff=new C.ExponentialBackoff(this.logger,this.timeoutOptions.maxBackoffMs),this.clientID=Date.now(),"undefined"!=typeof window&&window.location&&(this.domId=window.location.hostname),this.clientInfo=new b,this.clientInfo.cv=l.CLIENT_VERSION,this.clientInfo.ua="",this.options&&this.options.clientInfo&&(this.clientInfo.ua=this.safeString(this.options.clientInfo.ua),this.clientInfo.v=this.safeString(this.options.clientInfo.v)),this.connectionTracker=new T.ConnectionTracker(R,this.clientID,this.clientInfo,function(){return ce.getServerState()},this.options.endpointId,this.options.clientCorrelationID,this.options.environment),this.applyConnectionTrackerOptions(M),this.fsm=new g.TrouterFsm(R,this,this.options.incallModeTimeoutMs>0),M.registration&&(this.registrarClient=E.createRegistrarClient(R,this.tokenProvider,{registrarUrl:M.registration.registrarUrl,registrationId:M.registration.registrationId,requestTimeoutMs:M.timeoutOptions.fetchTimeoutMs,initialRetryDelayMs:1e3,maxRetryDelayMs:M.timeoutOptions.maxBackoffMs})),this.userActivityState=$}return N.prototype.start=function(R){this.logger.info("Starting"),this.externalConnectParams=R,this.fsm.start()},N.prototype.stop=function(R){this.logger.info("Stopping"),this.connectionTracker.close(),this.fsm.stop(R)},N.prototype.configure=function(R){var M=this.options.trouterUrl!==R.trouterUrl;this.options=R,this.applyConnectionTrackerOptions(R),M&&this.onTrouterReconnect()},N.prototype.checkConnection=function(R){this.logger.info("checkConnection called with "+R),this.fsm.checkConnection(R),R&&this.connectionTracker.sendTelemetry(T.ClientEventName.CheckConnection,{disconnectDetected:R},[])},N.prototype.getServerState=function(){return new w.ServerState(this.connectionId,this.connectedClientId,this.domId?this.domId:"",this.allocateResult?this.allocateResult.url:"",this.allocateResult?this.allocateResult.surl:"",this.c2cUrlBase,this.connectionExpireTimestampInSecs)},N.prototype.getToken=function(R,M){var j=this;this.logger.info("Getting token "+(M?"with backoff":"without backoff"));var W=function(){j.connectionTracker.trackStart("token"),j.tokenProvider(!R).then(function($){j.logger.debug("token is received"),j.connectionTracker.trackEnd("token"),j.fsm.onTokenReceived($)}).catch(function($){var ce=p.toJson($.stack);j.logger.error("Getting token failed, will retry after timeout. Error: "+ce),j.connectionTracker.trackError("token",ce),j.getToken(R,!0)})};M?this.tokenBackoff.backoff("getting token",W):(this.tokenBackoff.reset(),W())},N.prototype.startConnectionTimer=function(){var R=this;this.stopConnectionTimer(),this.logger.debug("Starting connection timeout for "+this.timeoutOptions.connectionTimeoutMs+" ms"),this.connectionTimeoutId=setTimeout(function(){R.logger.info("Connection timeout is fired"),R.fsm.onConnectingTimeout()},this.timeoutOptions.connectionTimeoutMs)},N.prototype.stopConnectionTimer=function(){this.connectionTimeoutId&&(this.logger.debug("Stopping connection timeout"),clearTimeout(this.connectionTimeoutId),this.connectionTimeoutId=void 0)},N.prototype.startPingTimer=function(){var R=this;"websocket"===this.transportTypeName?(this.logger.debug("Starting ping timeout for "+this.timeoutOptions.pingTimeoutMs+" ms"),this.pingTimerId=setInterval(function(){R.logger.info("Ping interval fired"),R.fsm.onPingInterval()},this.timeoutOptions.pingTimeoutMs)):this.logger.debug("Not starting ping for transport "+this.transportTypeName)},N.prototype.stopPingTimer=function(){this.pingTimerId&&(this.logger.debug("Stopping ping timeout"),this.clearPingResponseTimer(),clearInterval(this.pingTimerId),this.pingTimerId=void 0)},N.prototype.shouldSkipRegistration=function(){return void 0===this.options.registration},N.prototype.hasCustomRegisterTtl=function(){return this.options.registration&&this.options.registration.registrarTtlSec},N.prototype.startRegisterTimer=function(){var R=this;void 0!==this.registrationTimerId&&this.stopRegisterTimer();var M=this.getRegistrationTtl()-30;this.logger.debug("Starting registration timeout for "+M+" sec"),this.registrationTimerId=setTimeout(function(){R.logger.info("Registration timeout is fired"),R.registrationTimerId=setTimeout(function(){R.registrationTimerId=void 0,R.logger.debug("Re-registration did not happen in time"),R.dispatchUnregistered()},3e4),R.fsm.onRegistrationTimeout()},1e3*M)},N.prototype.stopRegisterTimer=function(){this.registrationTimerId&&(this.logger.debug("Stopping registration timeout"),clearTimeout(this.registrationTimerId),this.registrationTimerId=void 0)},N.prototype.resendRegistration=function(){if(!this.registrarClient)throw new Error("Trouter Client not configured to handle registrations");return this.registrarClient.resendRegistration()},N.prototype.buildSocketIoUrlParams=function(){if(!this.allocateResult)throw new Error("Allocate result is undefined in buildSocketIoUrlParams()");var R={};if(this.allocateResult.connectparams)for(var M=this.allocateResult.connectparams,j=0,W=Object.keys(M);j<W.length;j++){var $=W[j];M.hasOwnProperty($)&&void 0!==M[$]&&(R[$]=M[$])}return R.v="v4",R.tc=encodeURI(p.toJson(this.clientInfo)),R.timeout=this.timeoutOptions.pingTimeoutMs/1e3,R.auth="true",this.options.endpointId&&(R.epid=this.options.endpointId),this.userActivityState.state!==P.UserActivityState.Unknown&&(R.userActivity=encodeURI(p.toJson(this.userActivityState.toEventObject()))),this.appendConnectedClientIds(this.buildQuery(R),!0)},N.prototype.startSocketIo=function(){var R=this;if(this.logger.info("Starting socket io"),this.connectionTracker.trackStart("connectSocket"),!this.allocateResult)throw new Error("Allocate result is undefined in startSocketIo()");var M=this.options.ioOptions||new m;if(M["force new connection"]=!0,M.reconnect=!1,M.query=this.buildSocketIoUrlParams(),this.logger.info("connecting to "+this.allocateResult.socketio+"?"+M.query),this.stopSocketIo(),this.socket=(this.options.io||_).connect(this.allocateResult.socketio,M),void 0===this.socket)throw new Error("Can't create Socket.io object");this.socket.on("connecting",function(j){R.onSocketConnecting(j)}),this.socket.on("connect",function(){R.onSocketConnect()}),this.socket.on("connect_failed",function(j){R.onSocketConnectFailed(j)}),this.socket.on("disconnect",function(j){R.onSocketDisconnect(j)}),this.socket.on("reconnect",function(){R.onSocketReconnect()}),this.socket.on("reconnect_failed",function(j){R.onSocketReconnectFailed(j)}),this.socket.on("reconnecting",function(){R.onSocketReconnecting()}),this.socket.on("error",function(j){R.onSocketError(j)}),this.socket.on("message",function(j){R.onSocketMessage(j)}),this.socket.on("trouter.connected",function(j){R.onTrouterConnected(j)}),this.socket.on("trouter.reconnect",function(){R.onTrouterReconnect()}),this.socket.on("trouter.message_loss",function(j){R.onTrouterMessageLoss(j)})},N.prototype.stopSocketIo=function(){if(this.socket){this.logger.info("clearing socket.io");try{for(var R=0,M=["connecting","connect","connect_failed","disconnect","reconnect","reconnect_failed","reconnecting","error","message","trouter.connected","trouter.reconnect","trouter.message_loss"];R<M.length;R++)this.socket.removeAllListeners(M[R]);this.socket.disconnect(),this.logger.debug("cleared socket"),this.socket=void 0}catch(W){this.logger.error("exception in disconnecting previous socket. Error: "+p.toJson(W.stack))}}},N.prototype.dispatchConnected=function(){this.logger.info("dispatching connected"),this.manager.onConnected(this)},N.prototype.dispatchRegistered=function(){this.logger.info("dispatching registered"),this.manager.onRegistered(this)},N.prototype.dispatchUnregistered=function(){this.logger.info("dispatching unregistered"),this.manager.onUnregistered(this)},N.prototype.dispatchDownstreamRequest=function(R){var M=this;this.logger.info("dispatching downstream request");try{var j=new k(R,new T.ResponseData(R.id),function(W,$){return M.logger.info("sending response to downstream"),M.sendResponse(W,$)});this.manager.onDownstreamRequest(this,R,j)}catch(W){this.logger.error("exception in socket.on message. Error : "+p.toJson(W.stack))}},N.prototype.dispatchReconnecting=function(){this.logger.info("dispatching reconnecting"),this.manager.onReconnecting(this)},N.prototype.dispatchReconnectIsRequired=function(){this.logger.info("dispatching reconnect is required by server"),this.manager.onReconnectIsRequired(this)},N.prototype.dispatchDisconnected=function(){this.logger.info("dispatching disconnected"),this.manager.onDisconnected(this)},N.prototype.dispatchTrouterMessageLost=function(R){this.logger.info("dispatching trouter lost message"),this.manager.onTrouterMessageLost(R)},N.prototype.sendProcessedDroppedIndicators=function(R){var M=this;try{this.logger.info("emitting processed flow tags to the server");var j=new F("trouter.processed_message_loss");j.args={droppedIndicators:R},this.sendDownstreamEvent(j,function(){M.logger.info("emitted processed flow tags to the server")})}catch($){var W=p.toJson($.stack);this.logger.error("unable to send processed message loss event. Error: "+W),this.connectionTracker.trackError("trouter.processed_message_loss",W,!1)}},N.prototype.resetAllocationConnectionParams=function(){this.allocateResult&&(this.logger.info("Resetting allocation connection parameters"),this.allocateResult.connectparams=void 0)},N.prototype.sendAllocateRequest=function(R){var M=this;this.connectionAttempt++,this.connectionTracker.trackNewConnection();var j=this.options.trouterUrl,W=j,$=this.allocateResult&&this.allocateResult.connectparams;if(!$){var ce=this.externalConnectParams;ce&&ce.se&&parseInt(ce.se,10)<=Date.now()+36e5&&(this.logger.warn("Dropping expired cached connection parameters: "+new Date(parseInt(ce.se,10))),this.externalConnectParams=ce=void 0),ce&&ce.serviceUrl!==W&&(this.logger.warn("Dropping cached connection parameters for a different environment ("+ce.serviceUrl+", now "+W+")"),this.externalConnectParams=ce=void 0),ce&&ce.reconnectUrl?(W=ce.reconnectUrl,$=s({},ce,{reconnectUrl:void 0})):$=ce}W=this.appendCorrelationIds(W,!1),W=this.appendEndpointId(W,!1),$&&(W+="&"+this.buildQuery($),$.v||(W+="&v=v4"));var Q=new Request(W,{method:"POST",mode:"cors",headers:new Headers({"X-Skypetoken":R,"Content-Type":"text/plain"})});this.logger.info("sendAllocateRequest: POST "+W),this.connectionTracker.trackStart("allocation");var te=-1;this.fetchWithTimeout(Q,this.timeoutOptions.fetchTimeoutMs).then(function(ae){if(te=ae.status,!ae.ok)throw new Error(ae.statusText);var he=ae.headers.get("content-type");if(!he||"application/json"!==he&&"application/json;"!==he.substring(0,17))throw new Error("Content-type '"+he+"' is unexpected");return M.connectionTracker.trackEnd("allocation"),ae.json()}).then(function(ae){M.onAllocationResponse(ae,j)}).catch(function(ae){var he=ae+", status code "+te;M.logger.error("Allocation request failed. Error: "+he),M.connectionTracker.trackError("allocation",he),M.externalConnectParams&&M.connectionAttempt>2&&(te>=400&&te<=599?(M.logger.warn(M.connectionAttempt+" connection attempts, server-side failure: erasing external connection parameters"),M.externalConnectParams=void 0):M.externalConnectParams.reconnectUrl&&(M.logger.warn(M.connectionAttempt+" connection attempts, erasing reconnect URL"),delete M.externalConnectParams.reconnectUrl)),M.fsm.onAllocationFailed(401===te)})},N.prototype.sendPingRequest=function(){var R=this;if(this.socket&&void 0===this.pingResponseTimerId)try{this.logger.info("emitting ping event"),this.socket.emit("ping",function(){R.onPingResponse()}),this.pingResponseTimerId=setTimeout(function(){R.logger.error("Ping response timeout is fired"),R.clearPingResponseTimer(),R.fsm.onPingResponseTimeout()},this.timeoutOptions.pongTimeoutMs)}catch(j){var M=p.toJson(j.stack);this.logger.error("unable to send ping. Error: "+M),this.connectionTracker.trackError("ping",M,!1)}},N.prototype.setUserActivityState=function(R){var M=R.state!==this.userActivityState.state;this.userActivityState=R,this.fsm.onSetUserActivityState(R,M)},N.prototype.sendUserActivityState=function(R,M){this.userActivityState.state!==P.UserActivityState.Unknown&&("websocket"===this.transportTypeName&&M?this.sendUserActivityStateMultiple(R===w.UserActivityEventReason.Connected?2:1):"xhr-polling"===this.transportTypeName&&R===w.UserActivityEventReason.Modified&&this.fsm.forceReconnect())},N.prototype.sendRegisterRequest=function(){var R=this;if(!this.options.registration||!this.registrarClient)throw new Error("Internal error - options.registration is undefined");if(!this.allocateResult)throw new Error("Allocate result is undefined in sendRegisterRequest()");this.logger.info("sending register request");var M=new p.Timespan;this.connectionTracker.trackStart("registration"),this.registrarClient.register({appId:this.options.registration.pnhAppId,aesKey:"",languageId:"en-US",platform:this.options.registration.platform,templateKey:this.options.registration.pnhTemplateKey,platformUIVersion:this.options.registration.platformUIVersion,productContext:this.options.registration.productContext},{TROUTER:[{context:this.options.registration.context,path:this.allocateResult.surl,ttl:this.getRegistrationTtl()}]}).then(function(){R.logger.info("Register request successful"),R.connectionTracker.trackEnd("registration"),R.fsm.onRegistrationSucceed(),R.connectionTracker.sendTelemetry(T.ClientEventName.Registration,{duration:M.duration},[])}).catch(function(j){R.logger.error("Register request failed. Error: "+j),R.connectionTracker.trackError("registration",j.message),R.fsm.onRegistrationFailed(!1),R.connectionTracker.sendTelemetry(T.ClientEventName.Registration,{duration:M.duration},[])})},N.prototype.sendUnregisterRequest=function(){var R=this;this.logger.info("sending unregister request");var M=new p.Timespan;if(!this.options.registration||!this.registrarClient)throw new Error("Internal error - options.registration is undefined");this.connectionTracker.trackStart("unregistration"),this.registrarClient.unregister().then(function(){R.logger.info("Unregister request successful"),R.connectionTracker.trackEnd("unregistration"),R.fsm.onUnregistrationSucceed(),R.connectionTracker.sendTelemetry(T.ClientEventName.Unregistration,{duration:M.duration},[])}).catch(function(j){R.logger.error("Unregister request failed. Error: "+j),R.connectionTracker.trackError("unregistration",j.message),R.fsm.onUnregistrationFailed(!1),R.connectionTracker.sendTelemetry(T.ClientEventName.Unregistration,{duration:M.duration},[])})},N.prototype.fetchWithTimeout=function(R,M){return new d.Promise(function(j,W){fetch(R).then(j).catch(W),0!==M&&setTimeout(W,M,new Error("Fetch for '"+R.url+"' timed out"))})},N.prototype.resetTokenBackoff=function(){this.tokenBackoff.reset()},N.prototype.resetRegisterBackoff=function(){this.registrarClient&&this.registrarClient.cancelPendingRequests()},N.prototype.clearTimers=function(){this.logger.debug("Clearing all pending downstream events related timers");for(var R=0,M=Object.keys(this.pendingTimers);R<M.length;R++)this.clearTimer(Number(M[R]))},N.prototype.restartIncallModeTimer=function(){var R=this;this.clearIncallModeTimerId(),this.logger.debug("Restarting incall mode timer"),this.incallModeTimerId=setTimeout(function(){R.logger.info("Call mode timer fired"),R.fsm.onIncallModeTimer()},this.options.incallModeTimeoutMs)},N.prototype.enterIncallMode=function(){this.logger.info("Entering incall mode"),this.timeoutOptions=this.options.incallTimeoutOptions,this.healthBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.tokenBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.inIncallMode=!0},N.prototype.exitIncallMode=function(){this.logger.info("Exiting incall mode"),this.clearIncallModeTimerId(),this.timeoutOptions=this.options.timeoutOptions,this.healthBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.tokenBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.inIncallMode=!1},N.prototype.isIncallMode=function(){return this.inIncallMode},N.prototype.onSocketConnecting=function(R){this.logger.info("onSocketConnecting("+R+")"),this.transportTypeName=R,this.connectionTracker.trackProgress("connecting",this.transportTypeName),this.fsm.onConnecting()},N.prototype.onSocketConnect=function(){this.logger.info("onSocketConnect")},N.prototype.onSocketConnectFailed=function(R){this.logger.error("onSocketConnectFailed"),this.connectionTracker.trackError("connect_failed",R,!0,this.transportTypeName?this.transportTypeName:this.UNKNOWN_TRANSPORT),this.fsm.onConnectingFailed()},N.prototype.onSocketDisconnect=function(R){this.logger.error("onSocketDisconnect, reason: "+R);var M={reason:R,serverClosed:!this.fsm.isActive()};this.connectionTracker.trackDisconnected(M),this.connectionTracker.clearConnectedInfo();var j=M.sessionLengthMS||0;"dup"===R&&"dup"===this.lastDisconnectReason&&j<this.options.duplicateDisconnectThresholdMs&&(this.logger.warn("Socket was closed by server as Duplicate for the second time in a row after "+j+" ms which is below the threshold of "+this.options.duplicateDisconnectThresholdMs+" ms. Resetting cached connection parameters and making a new allocation."),this.resetAllocationConnectionParams()),this.lastDisconnectReason=R,this.fsm.onSocketError(void 0),this.connectionExpireTimestampInSecs=void 0},N.prototype.onSocketReconnect=function(){this.logger.error("onSocketReconnect"),this.fsm.onTrouterConnected()},N.prototype.onSocketReconnectFailed=function(R){this.logger.error("onSocketReconnectFailed with '"+R+"'"),this.fsm.onSocketError("string"==typeof R?R:void 0)},N.prototype.onSocketReconnecting=function(){this.logger.error("onSocketReconnecting")},N.prototype.onSocketError=function(R){this.logger.error("onSocketError with '"+p.toJson(R)+"'"),this.connectionTracker.trackError("connectSocket",R),this.fsm.onSocketError("string"==typeof R?R:void 0)},N.prototype.onSocketMessage=function(R){var j,M=this;this.logger.info("onSocketMessage");try{var W=(j=new x(R)).headers&&j.headers["X-Microsoft-Skype-Chain-ID"];this.logger.info("Received request N "+j.id+(W?" Chain-Id "+W:"")+" CV "+j.correlationVector+" to '"+j.url+"'"),j.startTS=Date.now(),j.url&&this.urlPath&&0===j.url.indexOf(this.urlPath)&&(j.shortUrl=j.url.substring(this.urlPath.length))}catch(Q){var ce=p.toJson(Q.stack);return this.logger.error("unable to parse request. Error: "+ce),this.connectionTracker.trackRequest(void 0,ce),void this.connectionTracker.sendResponseError("unable to parse request, error: "+Q)}j.timeoutTimerId=setTimeout(function(){if(!j.replied){M.logger.error("Request "+j.id+" timed out");var Q=new T.ResponseData(j.id);Q.status=504,Q.headers={"Trouter-Responder":"ClientLib"},M.sendResponse(j,Q),j.timedout=!0}},this.timeoutOptions.requestTimeoutMs);try{this.connectionTracker.trackRequest(j),this.fsm.onDownstreamRequest(j)}catch(Q){this.logger.error("exception in socket.on message. Error: "+p.toJson(Q.stack)),this.connectionTracker.sendResponseError(Q.message,j,void 0)}},N.prototype.onTrouterConnected=function(R){if(this.allocateResult){this.logger.info("onTrouterConnected: "+this.allocateResult.url),this.socket&&this.socket.socket&&this.socket.socket.options&&this.socket.socket.options.query&&(this.socket.socket.options.query+="&connected=true"),this.urlPath=this.allocateResult.url.replace(/https?:\/\/([A-z0-9\:\$\-\_\.\+\!\*\"\(\)\,]*)\//,"/");var M=this.connectedUrl!==this.allocateResult.url;this.connectedUrl=this.allocateResult.url,this.connectionExpireTimestampInSecs=p.calculateExpireTsInSec(R.ttl),this.connectionTracker.trackEnd("connectSocket"),this.connectionTracker.trackConnected(M,this.transportTypeName?this.transportTypeName:this.UNKNOWN_TRANSPORT),this.fsm.onTrouterConnected()}else this.logger.error("Invalid internal state - received onTrouterConnected while allocateResult is not set")},N.prototype.onTrouterReconnect=function(){this.logger.info("onTrouterReconnect"),this.fsm.onReconnectRequired()},N.prototype.onTrouterMessageLoss=function(R){this.logger.info("onTrouterMessageLoss"),this.fsm.onTrouterMessageLost(R.droppedIndicators)},N.prototype.onAllocationResponse=function(R,M){if(this.logger.info("Received allocation response "+JSON.stringify(R)),this.allocateResult=R,this.externalConnectParams=void 0,this.connectionExpireTimestampInSecs=p.calculateExpireTsInSec(+R.ttl),this.connectionId=this.allocateResult.id||"",this.connectedClientId=this.allocateResult.ccid,this.logger.info("connected client id set {connectedClientId:"+this.connectedClientId+"}"),this.c2cUrlBase=R.curlb||"",""===this.c2cUrlBase){var W=R.surl.indexOf("://");W>=0&&(W=R.surl.indexOf("/",W+3))>=5&&":3443"===R.surl.substr(W-5,5)&&(this.c2cUrlBase=R.surl.substr(0,W-5))}var $=s({serviceUrl:M,reconnectUrl:R.socketio+"v4/a"},R.connectparams);this.manager.onConnectionParametersUpdated($),this.fsm.onAllocationSucceed()},N.prototype.onPingResponse=function(){this.logger.info("onPingResponse"),this.connectionTracker.increasePingResponseCount(),this.clearPingResponseTimer(),this.fsm.onPingResponse()},N.prototype.clearPingResponseTimer=function(){void 0!==this.pingResponseTimerId&&(clearTimeout(this.pingResponseTimerId),this.pingResponseTimerId=void 0)},N.prototype.buildQuery=function(R){for(var M=[],j=0,W=Object.keys(R);j<W.length;j++){var $=W[j];R.hasOwnProperty($)&&void 0!==R[$]&&M.push($+"="+R[$])}return M.join("&")},N.prototype.appendConnectedClientIds=function(R,M){var j="";R.indexOf("ccid=")<0&&(j="ccid="+this.connectedClientId+"&"),this.domId&&(j+="dom="+this.domId+"&"),j.length>0&&(j=j.slice(0,-1));var W=M||-1!==R.indexOf("?")?"&":"?";return this.appendCorrelationIds(R+W+j,M)},N.prototype.appendEndpointId=function(R,M){var j=M||-1!==R.indexOf("?")?"&":"?";return R.indexOf("epid")<0&&this.options.endpointId?""+R+j+"epid="+this.options.endpointId:R},N.prototype.appendCorrelationIds=function(R,M){var j=M||-1!==R.indexOf("?")?"&":"?";return R.indexOf("cor_id")<0?""+R+j+"cor_id="+this.options.clientCorrelationID+"&con_num="+this.clientID+"_"+this.connectionAttempt:R},N.prototype.getHealthUrl=function(R){return R.substring(0,R.lastIndexOf("/a"))+"/h"},N.prototype.safeString=function(R){return"string"==typeof R?R:""},N.prototype.sendResponse=function(R,M){if(R.timedout)return this.logger.error("Request "+R.id+" already timed out"),1;if(R.replied)return this.logger.error("Response for request "+R.id+" already sent"),2;clearTimeout(R.timeoutTimerId),R.timeoutTimerId=0,R.replied=!0,M.headers=M.headers||{};var j=R.correlationVector;this.logger.info("Sending response for request N "+R.id+" CV "+j+" with status "+M.status),j&&(M.headers[I]=j),R.headers&&R.headers["trouter-request"]&&!M.headers["trouter-request"]&&(M.headers["trouter-request"]=R.headers["trouter-request"]);var W=Date.now()-R.startTS;if(M.headers["trouter-client"]=p.toJson({cd:W}),this.logger.debug("response: "+p.toJson(M)),!this.socket)return this.connectionTracker.sendResponseError("no socket",R,M),4;try{return this.socket.send(p.toJson(M)),M.sentTS=Date.now(),R.incrementCorrelationVector(),this.connectionTracker.trackResponse(R,W,M),"websocket"===this.transportTypeName&&this.sendPingRequest(),0}catch(ce){var $="unable to send data on response.end. Error: "+p.toJson(ce.stack);return this.logger.error($),this.connectionTracker.sendResponseError($,R,M),4}},N.prototype.sendUserActivityStateMultiple=function(R){var M=this,j=new F("user.activity"),W=this.userActivityState.toEventObject();j.args=W,this.userActivityState.correlationVector.increase(),this.logger.debug("Sending user activity '"+this.userActivityState.toEventJSON()+"', remaining "+(R-1)),this.sendDownstreamEvent(j,function(){if(M.logger.info("User activity state: "+W.state+", cv: "+W.cv+" accepted"),M.manager.onUserActivityStateAccepted&&M.manager.onUserActivityStateAccepted(W.cv),M.clearTimer(j.timeoutTimerId),R>1){var $=setTimeout(function(){M.clearTimer($),M.sendUserActivityStateMultiple(R-1)},M.options.userActivitySecondResendDelayMs);M.registerTimer($,"user.activity/resend")}}),j.timeoutTimerId=setTimeout(function(){M.logger.error("Activity state response timeout is fired"),M.fsm.onActivityStateResponseTimeout(),M.clearTimer(j.timeoutTimerId)},this.timeoutOptions.userActivityResponseTimeoutMs),this.registerTimer(j.timeoutTimerId,"user.activity/response")},N.prototype.sendDownstreamEvent=function(R,M){this.logger.info("Sending downstream event "+R.name),this.socket&&this.socket.emit(R.name,R.args,M)},N.prototype.registerTimer=function(R,M){this.logger.debug("registering timer "+R+" -> "+M),this.pendingTimers[R]=M},N.prototype.clearTimer=function(R){this.logger.debug("clearing timer "+R+" -> "+this.pendingTimers[R]),delete this.pendingTimers[R],clearTimeout(R)},N.prototype.getRegistrationTtl=function(){var R=p.calculateTtlInSec(this.connectionExpireTimestampInSecs);return this.logger.debug("Current connectionID will expire in "+R+" seconds"),this.options.registration&&this.options.registration.registrarTtlSec&&R>0?Math.min(this.options.registration.registrarTtlSec,R):this.options.registration&&this.options.registration.registrarTtlSec?this.options.registration.registrarTtlSec:R>0?R:3600},N.prototype.clearIncallModeTimerId=function(){void 0!==this.incallModeTimerId&&(this.logger.debug("Clearing in-call mode timer"),clearTimeout(this.incallModeTimerId),this.incallModeTimerId=void 0)},N.prototype.applyConnectionTrackerOptions=function(R){try{R.eventLogger&&"function"==typeof R.eventLogger.logEvent?(this.connectionTracker.mergeSettings(R.telemetrySettings),this.connectionTracker.enable(R.eventLogger)):this.logger.warn("Trouter client event logging disabled due to invalid configuration.")}catch(M){this.logger.warn("Trouter client event logging disabled. Error: "+p.toJson(M.stack)),this.connectionTracker.disable()}},N}();u.TrouterConnection=U},function(K,u,c){Object.defineProperty(u,"__esModule",{value:!0});var s,l,p,E=c(5),d=c(0);(l=s=u.State||(u.State={}))[l.Initial=0]="Initial",l[l.RetrievingToken=1]="RetrievingToken",l[l.Allocating=2]="Allocating",l[l.Handshaking=3]="Handshaking",l[l.Connecting=4]="Connecting",l[l.Connected=5]="Connected",l[l.UnregisteringRetrievingToken=6]="UnregisteringRetrievingToken",l[l.Unregistering=7]="Unregistering",function(l){l[l.Initial=0]="Initial",l[l.RetrievingToken=1]="RetrievingToken",l[l.Registering=2]="Registering",l[l.Registered=3]="Registered",l[l.NotRegistered=4]="NotRegistered"}(p||(p={}));var T=function(){function l(C,P,w){this.worker=P,this.incallModeEnabled=w,this.state=s.Initial,this.connectionErrors=0,this.logger=new d.Logger("ConnectionFsm",C),this.connectedSubstate=p.Initial}return l.prototype.getState=function(){return this.state},l.prototype.isActive=function(){return this.state===s.Allocating||this.state===s.Connected||this.state===s.Handshaking||this.state===s.Connecting||this.state===s.RetrievingToken},l.prototype.start=function(){return this.state===s.Initial?(this.setState(s.RetrievingToken),this.worker.getToken(!0,!1),!0):(this.showIgnored("start"),!1)},l.prototype.stop=function(C){C&&(this.connectedSubstate=p.Initial),this.worker.isIncallMode()&&this.worker.exitIncallMode(),this.worker.resetTokenBackoff(),this.worker.resetRegisterBackoff(),this.worker.stopConnectionTimer(),this.worker.stopPingTimer(),this.worker.clearTimers(),this.state!==s.Connecting&&this.state!==s.Handshaking&&this.state!==s.Connected||this.worker.stopSocketIo(),this.isRegistered()&&this.state!==s.UnregisteringRetrievingToken&&this.state!==s.Unregistering?(this.setState(s.UnregisteringRetrievingToken),this.worker.stopRegisterTimer(),this.worker.getToken(!0,!1)):(this.setState(s.Initial),this.worker.dispatchDisconnected())},l.prototype.onTokenReceived=function(C){this.state===s.RetrievingToken?(this.setState(s.Allocating),this.worker.startConnectionTimer(),this.worker.sendAllocateRequest(C)):this.state===s.Connected&&this.connectedSubstate===p.RetrievingToken?(this.connectedSubstate=p.Registering,this.worker.sendRegisterRequest()):this.state===s.UnregisteringRetrievingToken?(this.setState(s.Unregistering),this.worker.sendUnregisterRequest()):this.showIgnored("onTokenReceived")},l.prototype.checkConnection=function(C){C&&this.onPingInterval()},l.prototype.onAllocationSucceed=function(){return this.state===s.Allocating?(this.setState(s.Handshaking),this.connectedSubstate===p.Registered&&this.worker.dispatchUnregistered(),this.connectedSubstate=p.Initial,this.worker.startSocketIo(),!0):(this.showIgnored("onAllocationSucceed"),!1)},l.prototype.onAllocationFailed=function(C){this.state===s.Allocating?(this.setState(s.RetrievingToken),this.worker.stopConnectionTimer(),this.worker.getToken(!C,!0)):this.showIgnored("onAllocationFailed")},l.prototype.onConnectingTimeout=function(){this.state===s.Allocating||this.state===s.Connecting||this.state===s.Handshaking?(this.setState(s.RetrievingToken),this.resetAllocationIfNecessary(void 0),this.worker.stopSocketIo(),this.worker.getToken(!0,!1)):this.showIgnored("onConnectingTimeout")},l.prototype.onConnecting=function(){this.state===s.Handshaking?this.setState(s.Connecting):this.showIgnored("onConnecting")},l.prototype.onConnectingFailed=function(){this.state===s.Connecting?this.onConnectingTimeout():this.state===s.Handshaking?(this.logger.error("Unexpected error in Socket.io - no valid transports"),this.onConnectingTimeout()):this.showIgnored("onConnectingFailed")},l.prototype.onSocketError=function(C){this.state===s.Handshaking||this.state===s.Connected?(this.worker.stopSocketIo(),this.worker.stopPingTimer(),this.worker.clearTimers(),this.worker.stopConnectionTimer(),this.state!==s.Connected&&this.worker.resetAllocationConnectionParams(),this.setState(s.RetrievingToken),this.worker.dispatchReconnecting(),this.worker.getToken(!0,!1)):this.showIgnored("onSocketError")},l.prototype.onTrouterConnected=function(){this.state===s.Connecting?(this.setState(s.Connected),this.worker.resetTokenBackoff(),this.worker.stopConnectionTimer(),this.worker.sendUserActivityState(E.UserActivityEventReason.Connected,!0),this.worker.startPingTimer(),this.worker.dispatchConnected(),this.connectionErrors=0,this.worker.shouldSkipRegistration()?(this.connectedSubstate=p.NotRegistered,this.worker.dispatchRegistered()):(this.connectedSubstate=p.RetrievingToken,this.worker.getToken(!0,!1))):this.showIgnored("onTrouterConnected")},l.prototype.onReconnectRequired=function(){this.worker.dispatchReconnectIsRequired()},l.prototype.onDownstreamRequest=function(C){this.state===s.Connected?(this.switchToIncallModeIfEnabled(),this.worker.dispatchDownstreamRequest(C)):this.showIgnored("onDownstreamRequest")},l.prototype.onTrouterMessageLost=function(C){this.state===s.Connected?this.worker.dispatchTrouterMessageLost(C):this.showIgnored("onTrouterMessageLost")},l.prototype.onPingInterval=function(){this.state===s.Connected?this.worker.sendPingRequest():this.showIgnored("onPingInterval")},l.prototype.onPingResponseTimeout=function(){this.onMissedResponse("onPingResponseTimeout")},l.prototype.onPingResponse=function(){this.state===s.Connected||this.showIgnored("onPingResponse")},l.prototype.onRegistrationFailed=function(C){this.state===s.Connected&&this.connectedSubstate===p.Registering?(this.connectedSubstate=p.RetrievingToken,this.worker.getToken(!C,!0)):this.showIgnored("onRegistrationFailed")},l.prototype.onRegistrationSucceed=function(){this.state===s.Connected?(this.connectedSubstate===p.Registering&&(this.connectedSubstate=p.Registered,this.worker.dispatchRegistered()),this.worker.hasCustomRegisterTtl()&&this.worker.startRegisterTimer()):this.showIgnored("onRegistrationSucceed")},l.prototype.onRegistrationTimeout=function(){this.state===s.Connected&&this.connectedSubstate!==p.NotRegistered?(this.connectedSubstate=p.RetrievingToken,this.worker.getToken(!0,!1)):this.showIgnored("onRegistrationTimeout")},l.prototype.onUnregistrationFailed=function(C){this.state===s.Unregistering?(this.setState(s.UnregisteringRetrievingToken),this.worker.getToken(!C,!C)):this.showIgnored("onUnregistrationFailed")},l.prototype.onUnregistrationSucceed=function(){this.state===s.Unregistering?(this.setState(s.Initial),this.worker.dispatchUnregistered(),this.worker.dispatchDisconnected()):this.showIgnored("onUnregistrationSucceed")},l.prototype.onIncallModeTimer=function(){this.worker.exitIncallMode(),this.state===s.Connected?(this.worker.stopPingTimer(),this.worker.startPingTimer()):this.showIgnored("onIncallModeTimer")},l.prototype.onSetUserActivityState=function(C,P){P?(this.logger.info("Changing user activity state to '"+C.toEventJSON()+"'"),this.worker.sendUserActivityState(E.UserActivityEventReason.Modified,this.state===s.Connected)):this.logger.debug("Not changing the same user activity state '"+C.toEventJSON()+"'")},l.prototype.onActivityStateResponseTimeout=function(){this.onMissedResponse("onActivityStateResponseTimeout")},l.prototype.forceReconnect=function(){this.setState(s.RetrievingToken),this.worker.resetTokenBackoff(),this.worker.stopConnectionTimer(),this.worker.stopPingTimer(),this.worker.clearTimers(),this.worker.stopSocketIo(),this.worker.dispatchReconnecting(),this.worker.getToken(!0,!1)},l.prototype.onMissedResponse=function(C){this.state===s.Connected?(this.setState(s.RetrievingToken),this.worker.stopPingTimer(),this.worker.clearTimers(),this.worker.stopSocketIo(),this.worker.dispatchReconnecting(),this.worker.getToken(!0,!1)):this.showIgnored(C)},l.prototype.showIgnored=function(C){this.logger.debug("Ignoring event '"+C+"' in state '"+s[this.state]+"'")},l.prototype.setState=function(C){this.logger.info("Switching from state '"+s[this.state]+"' to state '"+s[C]+"'"),this.state!==C?this.state=C:this.logger.error("Attempt to switching into the current state '"+s[C]+"'")},l.prototype.resetAllocationIfNecessary=function(C){this.connectionErrors++,this.connectionErrors>=2||void 0!==C&&/^4\d\d /.test(C)?(this.logger.error("Connection error count is "+this.connectionErrors+" - will reset allocation"),this.connectionErrors=0):this.logger.info("Connection error count is "+this.connectionErrors+" - will NOT reset allocation")},l.prototype.isRegistered=function(){return this.connectedSubstate===p.Registered||this.connectedSubstate===p.Registering},l.prototype.switchToIncallModeIfEnabled=function(){this.incallModeEnabled&&(this.worker.isIncallMode()||(this.worker.enterIncallMode(),this.worker.stopPingTimer(),this.worker.startPingTimer()),this.worker.restartIncallModeTimer())},l}();u.TrouterFsm=T},function(K,u,c){Object.defineProperty(u,"__esModule",{value:!0});var s=c(2),E=c(0),d=function(){function p(T,l){this.worker=l,this.state=s.TrouterState.Unknown,this.logger=new E.Logger("ManagerFsm",T)}return p.prototype.start=function(){this.state===s.TrouterState.Unknown?(this.setState(s.TrouterState.Disconnected),this.worker.forceStopLingeringConnection(),this.worker.startFirstConnection()):this.showIgnored("start")},p.prototype.stop=function(T){this.state!==s.TrouterState.Unknown?(this.setState(s.TrouterState.Unknown),this.worker.stopFirstConnection(!0===T),this.worker.stopSecondConnection(!0===T)):this.showIgnored("stop")},p.prototype.getState=function(){return this.state},p.prototype.onConnected=function(T){this.state===s.TrouterState.Disconnected&&T?this.worker.doesSecondConnectionExist()?this.setState(s.TrouterState.Switching):(this.setState(s.TrouterState.Connected),this.worker.dispatchConnected()):this.showIgnored("onConnected("+T+")")},p.prototype.onRegistered=function(T){this.state!==s.TrouterState.Disconnected||T?this.state!==s.TrouterState.Switching||T||(this.setState(s.TrouterState.Connected),this.worker.switchConnections(),this.worker.stopSecondConnectionDelayed(),this.worker.dispatchConnected()):(this.setState(s.TrouterState.Connected),this.worker.switchConnections(),this.worker.stopSecondConnection(!0),this.worker.dispatchConnected()),this.worker.dispatchRegistrationState(!0)},p.prototype.onUnregistered=function(T){T&&this.worker.dispatchRegistrationState(!1)},p.prototype.onReconnecting=function(T){this.state===s.TrouterState.Connected&&T||this.state===s.TrouterState.Switching&&T?(this.setState(s.TrouterState.Disconnected),this.worker.dispatchReconnecting()):this.showIgnored("onReconnecting("+T+")")},p.prototype.onReconnectionRequired=function(T){this.state===s.TrouterState.Connected&&T?(this.setState(s.TrouterState.Switching),this.worker.startSecondConnection()):this.state===s.TrouterState.Disconnected&&T?this.worker.startSecondConnection():this.showIgnored("onReconnectionRequired("+T+")")},p.prototype.onDisconnected=function(T){this.state===s.TrouterState.Unknown&&T?this.worker.dispatchStopped():this.showIgnored("onDisconnected("+T+")")},p.prototype.showIgnored=function(T){this.logger.info("Ignoring event '"+T+"' in state '"+s.TrouterState[this.state]+"'")},p.prototype.setState=function(T){this.logger.info("Switching from state '"+s.TrouterState[this.state]+"' to state '"+s.TrouterState[T]+"'"),this.state!==T?this.state=T:this.logger.error("Attempt to switching into the current state '"+s.TrouterState[T]+"'")},p}();u.TrouterManagerFsm=d},function(K,u,c){function s(k,F){if(!F)return k;var U=l({},k,{enabled:F.TelemetryEnabled});return void 0!==F.ClientTelemetryEventEnabled&&(U=l({},U,F.ClientTelemetryEventEnabled)),U}function E(k,F){return{clientInfo:{ua:k.trouterSettings.productName,v:k.trouterSettings.version},ioOptions:{ackTimeoutMs:5e3},clientCorrelationID:k.trouterSettings.sessionId,environment:k.trouterSettings.environment,telemetrySettings:s(k.telemetryConfig.settings,F),eventLogger:k.telemetryConfig.eventLogger,endpointId:k.trouterSettings.registrationId,trouterUrl:F&&F.TrouterConnectionUrl||k.trouterSettings.trouterServiceUrl,registration:k.trouterSettings.registrarServiceUrl?{registrarUrl:k.trouterSettings.registrarServiceUrl,registrationId:k.trouterSettings.registrationId||"",pnhAppId:k.trouterSettings.pnhAppId||"",platform:k.trouterSettings.platform||"",pnhTemplateKey:k.trouterSettings.pnhTemplate||"",platformUIVersion:k.trouterSettings.platformUIVersion||"",productContext:k.trouterSettings.pnhProductContext||void 0,context:k.trouterSettings.pnhContext||"",registrarTtlSec:(k.trouterSettings.maxRegistrationTimeInMs||0)/1e3}:void 0,timeoutOptions:l({connectionTimeoutMs:k.trouterSettings.trouterConnectTimeoutInMs||3e4,fetchTimeoutMs:1e4,pingTimeoutMs:4e4,pongTimeoutMs:5e3,maxBackoffMs:3e4,requestTimeoutMs:5e3,userActivityResponseTimeoutMs:1e4},k.trouterSettings.timeoutOptions),incallTimeoutOptions:l({connectionTimeoutMs:1e4,fetchTimeoutMs:5e3,pingTimeoutMs:5e3,pongTimeoutMs:2e3,maxBackoffMs:1e4,requestTimeoutMs:5e3,userActivityResponseTimeoutMs:1e4},k.trouterSettings.incallTimeoutOptions),incallModeTimeoutMs:k.trouterSettings.incallModeTimeoutMs||0,lingeringConnectionDelayMs:6e4,userActivitySecondResendDelayMs:k.trouterSettings.userActivitySecondResendDelayMs||1e4,duplicateDisconnectThresholdMs:1e4,connectionCache:k.connectionCache,registrationStateCallback:k.registrationStateCallbackForAcsDoNotUse}}var l=this&&this.__assign||Object.assign||function(k){for(var F,U=1,N=arguments.length;U<N;U++)for(var R in F=arguments[U])Object.prototype.hasOwnProperty.call(F,R)&&(k[R]=F[R]);return k},C=this&&this.__awaiter||function(k,F,U,N){return new(U||(U=Promise))(function(R,M){function j(ce){try{$(N.next(ce))}catch(Q){M(Q)}}function W(ce){try{$(N.throw(ce))}catch(Q){M(Q)}}function $(ce){ce.done?R(ce.value):new U(function(Q){Q(ce.value)}).then(j,W)}$((N=N.apply(k,F||[])).next())})},P=this&&this.__generator||function(k,F){function U(ce){return function(Q){return function(ce){if(R)throw new TypeError("Generator is already executing.");for(;$;)try{if(R=1,M&&(j=2&ce[0]?M.return:ce[0]?M.throw||((j=M.return)&&j.call(M),0):M.next)&&!(j=j.call(M,ce[1])).done)return j;switch(M=0,j&&(ce=[2&ce[0],j.value]),ce[0]){case 0:case 1:j=ce;break;case 4:return $.label++,{value:ce[1],done:!1};case 5:$.label++,M=ce[1],ce=[0];continue;case 7:ce=$.ops.pop(),$.trys.pop();continue;default:if(!(j=(j=$.trys).length>0&&j[j.length-1])&&(6===ce[0]||2===ce[0])){$=0;continue}if(3===ce[0]&&(!j||ce[1]>j[0]&&ce[1]<j[3])){$.label=ce[1];break}if(6===ce[0]&&$.label<j[1]){$.label=j[1],j=ce;break}if(j&&$.label<j[2]){$.label=j[2],$.ops.push(ce);break}j[2]&&$.ops.pop(),$.trys.pop();continue}ce=F.call(k,$)}catch(Q){ce=[6,Q],M=0}finally{R=j=0}if(5&ce[0])throw ce[1];return{value:ce[0]?ce[1]:void 0,done:!0}}([ce,Q])}}var R,M,j,W,$={label:0,sent:function(){if(1&j[0])throw j[1];return j[1]},trys:[],ops:[]};return W={next:U(0),throw:U(1),return:U(2)},"function"==typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W};Object.defineProperty(u,"__esModule",{value:!0});var w=c(1),f=c(2);u.TrouterState=f.TrouterState,u.UserActivityState=f.UserActivityState;var g=c(0),_=c(6),b=c(7),m=c(8),I=c(9),x=function(){function k(F){this.logProvider=F,this.stateChangedListeners=[],this.logger=new g.Logger("Trouter",F),this.trouterUrlPromise=new I.TrouterUrlPromise(F),this.messageHandlers=new _.MessageHandlerRegistry(F),this.listeners={},this.connectionInfo=null,this.logger.info("Created TrouterService version "+w.CLIENT_VERSION)}return k.prototype.start=function(F){this.logger.info("Start"),F.trouterSettings.disableInternalSkypeTokenCache||(F.skypeTokenProvider=b.addCacheAsBackupTo(F.skypeTokenProvider)),this.trouterCfg=F;var N=E(F,this.ecsCfg);void 0===this.trouterServer&&(this.trouterServer=new m.TrouterManager(this.logProvider,N,F.skypeTokenProvider,this)),this.trouterServer.start()},k.prototype.stop=function(F){this.logger.info("close connection"),this.trouterUrlPromise.rejectUrl(new Error("TrouterService is stopped")),void 0!==this.trouterServer&&this.trouterServer.stop(F)},k.prototype.setEcsConfig=function(F){return C(this,void 0,void 0,function(){var U=this;return P(this,function(N){return[2,new Promise(function(R,M){if(U.ecsCfg=F.TrouterJScriptClient,U.logger.info("Setting ECS configuration to "+JSON.stringify(U.ecsCfg)),void 0!==U.trouterServer&&void 0!==U.trouterCfg){var j=E(U.trouterCfg,U.ecsCfg);U.trouterServer.configure(j)}R()})]})})},k.prototype.checkConnection=function(F){void 0!==this.trouterServer&&this.trouterServer.checkConnection(F||!1)},k.prototype.resendRegistration=function(){return C(this,void 0,void 0,function(){return P(this,function(F){if(!this.trouterServer)throw new Error("resendRegistration called too early");return[2,this.trouterServer.resendRegistration()]})})},k.prototype.registerListener=function(F,U){return""===U||"/"!==U[0]||U.indexOf("?")>=0||U.indexOf("#")>=0?(this.logger.error("Listener path '"+U+"' is not valid"),!1):this.listeners[U]?(this.logger.error("Another listener is already registered for path '"+U+"'"),!1):(this.listeners[U]=F,this.logger.debug("Listener for path '"+U+"' registered"),this.connectionInfo&&F.onTrouterConnected(this.connectionInfo.baseEndpointUrl+U,this.connectionInfo),!0)},k.prototype.unregisterListener=function(F){for(var U=[],N=0,R=Object.keys(this.listeners);N<R.length;N++)this.listeners[M=R[N]]===F&&U.push(M);if(0===U.length)return!1;for(var j=0,W=U;j<W.length;j++){var M;delete this.listeners[M=W[j]]}return this.logger.debug("Listener for path(s) '"+U.join("', '")+"' unregistered"),!0},k.prototype.onTrouterConnected=function(F,U){this.logger.debug("Trouter is now connected");for(var N=0,R=Object.keys(this.listeners);N<R.length;N++){var M=R[N];try{this.listeners[M].onTrouterConnected(U.baseEndpointUrl+M,U)}catch(j){this.logger.error("Listener '"+M+"' threw an exception from onTrouterConnected(): "+j)}}this.connectionInfo=U,this.trouterUrlPromise.resolveUrl(F),this.notifyStateChanged(f.TrouterState.Connected,{url:F,getRemainingTtlInSec:function(){return U.connectionTtlSec}})},k.prototype.onTrouterDisconnected=function(){this.logger.debug("Trouter is now disconnected"),this.connectionInfo=null;for(var F=0,U=Object.keys(this.listeners);F<U.length;F++){var N=U[F],R=this.listeners[N];if(R.onTrouterDisconnected)try{R.onTrouterDisconnected()}catch(M){this.logger.error("Listener '"+N+"' threw an exception from onTrouterDisconnected(): "+M)}}this.notifyStateChanged(f.TrouterState.Disconnected)},k.prototype.onTrouterRequest=function(F,U){for(var N="",R=0,M=Object.keys(this.listeners);R<M.length;R++){var j=M[R];F.path.substring(0,j.length)===j&&j.length>N.length&&(N=j)}if(""===N)this.tryMessageHandlers(F,U)||(U.status=404,U.headers={"Trouter-Responder":"ClientLib"},U.send());else try{this.listeners[N].onTrouterRequest(F,U)}catch(W){this.logger.error("Listener '"+N+"' threw an exception from onTrouterRequest(): "+W),U.status=500,U.headers={"Trouter-Responder":"ClientLib"},U.send()}},k.prototype.onTrouterMessageLoss=function(F){this.logger.info("onTrouterMessageLoss called with value "+F);for(var U=!0,N=0,R=Object.keys(this.listeners);N<R.length;N++){var M=R[N],j=this.listeners[M];if(j.onTrouterMessageLoss)try{void 0===(U=j.onTrouterMessageLoss(F)&&U)&&(this.logger.error("Listener '"+M+"' did not response with boolean value onTrouterMessageLoss()"),U=!1)}catch(W){this.logger.error("Listener '"+M+"' threw an exception from onTrouterMessageLoss(): "+W),U=!1}}return U},k.prototype.onTrouterUserActivityStateAccepted=function(F){this.logger.debug("onTrouterUserActivityStateAccepted cv: "+F);for(var U=0,N=Object.keys(this.listeners);U<N.length;U++){var R=N[U],M=this.listeners[R];if(M.onTrouterUserActivityStateAccepted)try{M.onTrouterUserActivityStateAccepted(F)}catch(j){this.logger.error("Listener '"+R+"' threw an exception from onTrouterUserActivityStateAccepted(): "+j)}}},k.prototype.setUserActivityState=function(F,U){if(F!==f.UserActivityState.Active&&F!==f.UserActivityState.Inactive)throw new Error("setUserActivityState called with unsupported value "+F);if(this.logger.info("setUserActivityState called with value "+f.UserActivityState[F]),!this.trouterServer||this.state()===f.TrouterState.Unknown)throw new Error("setUserActivityState called too early");this.trouterServer.setUserActivityState(F,U)},k.prototype.state=function(){return void 0!==this.trouterServer?this.trouterServer.getState():f.TrouterState.Unknown},k.prototype.getServerState=function(){if(void 0!==this.trouterServer)return this.trouterServer.getServerState()},k.prototype.getTrouterUrlAsync=function(){return void 0!==this.trouterServer?this.trouterUrlPromise.getPromise():Promise.reject(new Error("TrouterService has not been started"))},k.prototype.onStateChanged=function(F){if(this.logger.info("onStateChanged called"),void 0===F)this.stateChangedListeners=this.stateChangedListeners.filter(function(N){return void 0===N.wrappedCallback});else{this.offStateChanged(F);var U=function(N,R){F(N,R?R.url:"")};U.wrappedCallback=F,this.stateChangedListeners.push(U)}},k.prototype.offStateChanged=function(F){this.logger.info("offStateChanged called");var U=this.stateChangedListeners.length;return this.stateChangedListeners=this.stateChangedListeners.filter(function(N){return N.wrappedCallback!==F}),U>this.stateChangedListeners.length},k.prototype.addCallback=function(F){this.logger.info("addListener called"),-1===this.stateChangedListeners.indexOf(F,0)&&void 0!==F&&this.stateChangedListeners.push(F)},k.prototype.removeCallback=function(F){this.logger.info("removeListener called");var U=this.stateChangedListeners.indexOf(F,0);return U>-1&&(this.stateChangedListeners.splice(U,1),!0)},k.prototype.registerMessageHandler=function(F){this.logger.info("registerMessageHandler is called"),this.messageHandlers.register(F)},k.prototype.clearMessageHandlers=function(){this.logger.info("clearMessageHandlers is called"),this.messageHandlers.clear()},k.prototype.notifyStateChanged=function(F,U){var N=this;this.logger.info("notifyStateChanged called, will forward to "+this.stateChangedListeners.length+" listeners"),this.stateChangedListeners.forEach(function(R){try{R(F,U)}catch(M){N.logger.error("Error in callback "+M)}})},k.prototype.tryMessageHandlers=function(F,U){if(!this.messageHandlers.active())return!1;var N,R=null;try{R=(N=JSON.parse(F.body))&&(N.evt||N.eventId)||null}catch(W){}var j=this.messageHandlers.handleMessage({eventId:R,url:(this.connectionInfo?this.connectionInfo.baseEndpointUrl:"")+F.path,body:N,rawBody:F.body,headers:F.headers});return!!j.isHandled&&(U.status=j.resultCode,j.responseHeaders&&(U.headers=j.responseHeaders),j.responseBody&&(U.body=j.responseBody),U.send(),!0)},k}();u.TrouterService=x,u.createTrouterService=function(k){return new x(k)},u.getTrouterServiceVersion=function(){return w.CLIENT_VERSION},u.replaceTrouterUrlBase=function(k,F){var U=k.indexOf("://");if(U>=0){var N=k.indexOf("/",U+3);if(N>=0)return F+k.substr(N)}return""}},function(K,u){K.exports=__WEBPACK_EXTERNAL_MODULE_20__},function(K,u){}])},module.exports=u(tsregistrar)});unwrapExports(tstrouter);var TrouterUtils=createCommonjsModule(function(K,u){u.__esModule=!0;var c=new Map([["chatMessageReceived",200],["typingIndicatorReceived",245],["readReceiptReceived",246],["chatMessageEdited",247],["chatMessageDeleted",248],["chatThreadCreated",257],["chatThreadPropertiesUpdated",258],["chatThreadDeleted",259],["participantsAdded",260],["participantsRemoved",261]]),s="8:orgid:",E="8:dod:",d="8:gcch:",p="8:teamsvisitor:";u.toMessageHandler=function(g,_){var b=c.get(g);return{handleMessage:function(m){var I=null;if((null==m?void 0:m.rawBody)&&(I=JSON.parse(m.rawBody)),null!==I&&I.eventId===b){var x=P(g,I);if(null!==x)return _(x),{isHandled:!0,resultCode:200}}}}};var P=function(g,_){if("chatMessageReceived"===g)return{threadId:(b=_).groupId,sender:w(b.senderId),senderDisplayName:b.senderDisplayName,recipient:w(b.recipientMri),id:b.messageId,createdOn:new Date(b.originalArrivalTime),version:b.version,type:b.messageType,message:b.messageBody,metadata:f(b.acsChatMessageMetadata)};if("chatMessageEdited"===g)return{threadId:(b=_).groupId,sender:w(b.senderId),senderDisplayName:b.senderDisplayName,recipient:w(b.recipientMri),id:b.messageId,createdOn:new Date(b.originalArrivalTime),version:b.version,message:b.messageBody,editedOn:new Date(b.edittime),type:b.messageType,metadata:f(b.acsChatMessageMetadata)};if("chatMessageDeleted"===g)return{threadId:(b=_).groupId,sender:w(b.senderId),senderDisplayName:b.senderDisplayName,recipient:w(b.recipientMri),id:b.messageId,createdOn:new Date(b.originalArrivalTime),version:b.version,deletedOn:new Date(b.deletetime),type:b.messageType};if("typingIndicatorReceived"===g)return{threadId:(b=_).groupId,sender:w(b.senderId),senderDisplayName:b.senderDisplayName,recipient:w(b.recipientMri),version:b.version,receivedOn:new Date(b.originalArrivalTime)};if("readReceiptReceived"===g){var b=_,x=JSON.parse(b.messageBody).consumptionhorizon.split(";");return{threadId:b.groupId,sender:w(b.senderId),senderDisplayName:"",recipient:w(b.recipientMri),chatMessageId:b.messageId,readOn:new Date(+x[1])}}if("chatThreadCreated"===g){b=_;var k=JSON.parse(unescape(b.createdBy)),F=JSON.parse(unescape(b.members)),U=JSON.parse(unescape(b.properties)),N={id:w(k.participantId),displayName:k.displayName},R=F.map(function(pe){return{id:w(pe.participantId),displayName:pe.displayName}});return{threadId:b.threadId,createdOn:new Date(b.createTime),createdBy:N,version:b.version,participants:R,properties:U}}if("chatThreadPropertiesUpdated"===g){b=_;var M=JSON.parse(unescape(b.editedBy)),j=(U=JSON.parse(unescape(b.properties)),{id:w(M.participantId),displayName:M.displayName});return{threadId:b.threadId,updatedOn:new Date(b.editTime),updatedBy:j,version:b.version,properties:U}}if("chatThreadDeleted"===g){b=_;var W=JSON.parse(unescape(b.deletedBy)),$={id:w(W.participantId),displayName:W.displayName};return{threadId:b.threadId,deletedOn:new Date(b.deleteTime),deletedBy:$,version:b.version}}if("participantsAdded"===g){b=_;var ce=JSON.parse(unescape(b.addedBy)),Q=JSON.parse(unescape(b.participantsAdded)),te={id:w(ce.participantId),displayName:ce.displayName};return R=Q.map(function(re){return{id:w(re.participantId),displayName:re.displayName,shareHistoryTime:new Date(re.shareHistoryTime)}}),{threadId:b.threadId,addedOn:new Date(b.time),addedBy:te,version:b.version,participantsAdded:R}}if("participantsRemoved"===g){b=_;var ae=JSON.parse(unescape(b.removedBy)),he=JSON.parse(unescape(b.participantsRemoved)),Se={id:w(ae.participantId),displayName:ae.displayName};return R=he.map(function(re){return{id:w(re.participantId),displayName:re.displayName,shareHistoryTime:new Date(re.shareHistoryTime)}}),{threadId:b.threadId,removedOn:new Date(b.time),removedBy:Se,version:b.version,participantsRemoved:R}}return null};u.toLogProvider=function(g){return{log:function(){for(var _=[],b=0;b<arguments.length;b++)_[b]=arguments[b];return g.info(_)},warn:function(){for(var _=[],b=0;b<arguments.length;b++)_[b]=arguments[b];return g.warning(_)},error:function(){for(var _=[],b=0;b<arguments.length;b++)_[b]=arguments[b];return g.error(_)},debug:function(){for(var _=[],b=0;b<arguments.length;b++)_[b]=arguments[b];return g.verbose(_)},info:function(){for(var _=[],b=0;b<arguments.length;b++)_[b]=arguments[b];return g.verbose(_)}}},u.toTelemetrySender=function(g){return{logEvent:function(_){return g.info(_)}}};var w=function(g){return g.startsWith(s)?{kind:"microsoftTeamsUser",rawId:g,microsoftTeamsUserId:g.substring(s.length),isAnonymous:!1,cloud:"public"}:g.startsWith(E)?{kind:"microsoftTeamsUser",rawId:g,microsoftTeamsUserId:g.substring(E.length),isAnonymous:!1,cloud:"dod"}:g.startsWith(d)?{kind:"microsoftTeamsUser",rawId:g,microsoftTeamsUserId:g.substring(d.length),isAnonymous:!1,cloud:"gcch"}:g.startsWith(p)?{kind:"microsoftTeamsUser",rawId:g,microsoftTeamsUserId:g.substring(p.length),isAnonymous:!0}:g.startsWith("4:")?{kind:"phoneNumber",rawId:g,phoneNumber:g.substring("4:".length)}:g.startsWith("8:acs:")||g.startsWith("8:spool:")?{kind:"communicationUser",communicationUserId:g}:{kind:"unknown",id:g}},f=function(g){return null==g||""===g||"null"===g?{}:JSON.parse(g)}});unwrapExports(TrouterUtils);var TrouterUtils_1=TrouterUtils.toMessageHandler,TrouterUtils_2=TrouterUtils.toLogProvider,TrouterUtils_3=TrouterUtils.toTelemetrySender,TrouterSettings=createCommonjsModule(function(K,u){u.__esModule=!0;var c={version:"1.0.0",registrationId:"",sessionId:"",pnhAppId:"AcsWeb",pnhTemplate:"AcsWeb_Chat_1.2",platform:"SPOOL",platformUIVersion:"0.0.0",environment:"",productName:"acs-chat-web",trouterServiceUrl:"https://go.trouter.skype.com/v4/a",registrarServiceUrl:"https://edge.skype.com/registrar/prod/v3/registrations",registrarRefreshTimeoutInMs:35e4,timeoutOptions:{connectionTimeoutMs:2e4,fetchTimeoutMs:1e4,pingTimeoutMs:4e4,pongTimeoutMs:5e3,maxBackoffMs:5e4,requestTimeoutMs:5e3},maxRegistrationTimeInMs:72e5};u.createSettings=function(s){var E,d=c;return d.registrationId=coreHttp.generateUuid(),d.sessionId=coreHttp.generateUuid(),d.maxRegistrationTimeInMs=null!==(E=null==s?void 0:s.registrationTimeInMs)&&void 0!==E?E:c.maxRegistrationTimeInMs,d},u.defaultTelemetrySettings={enabled:!1}});unwrapExports(TrouterSettings);var TrouterSettings_1=TrouterSettings.createSettings,TrouterSettings_2=TrouterSettings.defaultTelemetrySettings,constants=createCommonjsModule(function(K,u){u.__esModule=!0,u.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES=3});unwrapExports(constants);var constants_1=constants.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES,SignalingClient=createCommonjsModule(function(K,u){var p,c=commonjsGlobal&&commonjsGlobal.__awaiter||function(p,T,l,C){return new(l||(l=Promise))(function(w,f){function g(m){try{b(C.next(m))}catch(I){f(I)}}function _(m){try{b(C.throw(m))}catch(I){f(I)}}function b(m){m.done?w(m.value):function(w){return w instanceof l?w:new l(function(f){f(w)})}(m.value).then(g,_)}b((C=C.apply(p,T||[])).next())})},s=commonjsGlobal&&commonjsGlobal.__generator||function(p,T){var C,P,w,f,l={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return f={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function g(b){return function(m){return function(b){if(C)throw new TypeError("Generator is already executing.");for(;l;)try{if(C=1,P&&(w=2&b[0]?P.return:b[0]?P.throw||((w=P.return)&&w.call(P),0):P.next)&&!(w=w.call(P,b[1])).done)return w;switch(P=0,w&&(b=[2&b[0],w.value]),b[0]){case 0:case 1:w=b;break;case 4:return l.label++,{value:b[1],done:!1};case 5:l.label++,P=b[1],b=[0];continue;case 7:b=l.ops.pop(),l.trys.pop();continue;default:if(!(w=(w=l.trys).length>0&&w[w.length-1])&&(6===b[0]||2===b[0])){l=0;continue}if(3===b[0]&&(!w||b[1]>w[0]&&b[1]<w[3])){l.label=b[1];break}if(6===b[0]&&l.label<w[1]){l.label=w[1],w=b;break}if(w&&l.label<w[2]){l.label=w[2],l.ops.push(b);break}w[2]&&l.ops.pop(),l.trys.pop();continue}b=T.call(p,l)}catch(m){b=[6,m],P=0}finally{C=w=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([b,m])}}};u.__esModule=!0,(p=u.ConnectionState||(u.ConnectionState={}))[p.Unknown=0]="Unknown",p[p.Connected=2]="Connected",p[p.Disconnected=3]="Disconnected",p[p.Switching=9]="Switching";var d=function(){function p(T,l,C){var P=this;this.logger=l,this.stateChangedListener=null,this.tokenFetchRetries=0,this.trouter=tstrouter.createTrouterService(TrouterUtils.toLogProvider(l)),this.config={trouterSettings:TrouterSettings.createSettings(C),skypeTokenProvider:function(w){return c(P,void 0,void 0,function(){var f,g;return s(this,function(_){switch(_.label){case 0:if(w){if(this.tokenFetchRetries+=1,this.tokenFetchRetries>constants.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES)throw this.stop(!0),new Error("Access token is expired and failed to fetch a valid one after "+constants.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES+" retries")}else this.tokenFetchRetries=0;return g=(f=Promise).resolve,[4,T.getToken()];case 1:return[2,g.apply(f,[_.sent().token])]}})})},telemetryConfig:{eventLogger:TrouterUtils.toTelemetrySender(l),settings:TrouterSettings.defaultTelemetrySettings}}}return p.prototype.start=function(){this.trouter.start(this.config),this.trouter.setUserActivityState(tstrouter.UserActivityState.Active)},p.prototype.stop=function(T){this.trouter.offStateChanged(this.stateChangedListener),this.trouter.clearMessageHandlers(),this.trouter.stop(null!=T?T:this.tokenFetchRetries>constants.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES)},p.prototype.on=function(T,l){if("connectionChanged"===T)return this.trouter.offStateChanged(this.stateChangedListener),this.stateChangedListener=function(C,P){return l(C)},void this.trouter.onStateChanged(this.stateChangedListener);this.trouter.registerMessageHandler(TrouterUtils.toMessageHandler(T,l))},p}();u.CommunicationSignalingClient=d});unwrapExports(SignalingClient);var SignalingClient_1=SignalingClient.ConnectionState,SignalingClient_2=SignalingClient.CommunicationSignalingClient,src=createCommonjsModule(function(K,u){u.__esModule=!0,function(s){for(var E in s)u.hasOwnProperty(E)||(u[E]=s[E])}(SignalingClient)}),index=unwrapExports(src);module.exports=index},3700:(K,u,c)=>{"use strict";function s(S){return S.toLowerCase()}function E(S){return!(!S||"object"!=typeof S||"function"!=typeof S.rawHeaders||"function"!=typeof S.clone||"function"!=typeof S.get||"function"!=typeof S.set||"function"!=typeof S.contains||"function"!=typeof S.remove||"function"!=typeof S.headersArray||"function"!=typeof S.headerValues||"function"!=typeof S.headerNames||"function"!=typeof S.toJson)}c.r(u),c.d(u,{AccessTokenRefresher:()=>gt,ApiKeyCredentials:()=>Yi,BaseRequestPolicy:()=>Nn,BasicAuthenticationCredentials:()=>Ms,Constants:()=>pr,DefaultHttpClient:()=>po,ExpiringAccessTokenCache:()=>qe,HttpHeaders:()=>d,HttpPipelineLogLevel:()=>Jn,MapperType:()=>Li,QueryCollectionFormat:()=>Pr,RequestPolicyOptions:()=>sn,RestError:()=>rt,RetryMode:()=>Dr,Serializer:()=>nn,ServiceClient:()=>pa,TopicCredentials:()=>cr,URLBuilder:()=>ui,URLQuery:()=>ko,WebResource:()=>fo,XML_ATTRKEY:()=>De,XML_CHARKEY:()=>Fe,applyMixins:()=>ir,bearerTokenAuthenticationPolicy:()=>aa,createPipelineFromOptions:()=>Ci,createSpanFunction:()=>tl,delay:()=>ke,deserializationPolicy:()=>Vo,deserializeResponseBody:()=>gn,disableResponseDecompressionPolicy:()=>ha,encodeUri:()=>Ve,executePromisesSequentially:()=>tt,exponentialRetryPolicy:()=>bn,flattenResponse:()=>Pt,generateClientRequestIdPolicy:()=>bt,generateUuid:()=>je,getDefaultProxySettings:()=>Qc,getDefaultUserAgentValue:()=>Un,isDuration:()=>ze,isNode:()=>Be,isTokenCredential:()=>Fr.c,isValidUuid:()=>Ke,keepAlivePolicy:()=>la,logPolicy:()=>Fo,operationOptionsToRequestOptionsBase:()=>qn,parseXML:()=>Kr,promiseToCallback:()=>Ht,promiseToServiceCallback:()=>on,proxyPolicy:()=>ua,redirectPolicy:()=>Wi,serializeObject:()=>ai,signingPolicy:()=>ws,stringifyXML:()=>ji,stripRequest:()=>Je,stripResponse:()=>$e,systemErrorRetryPolicy:()=>_s,throttlingRetryPolicy:()=>ca,tracingPolicy:()=>Ds,userAgentPolicy:()=>Yt});var d=function(){function S(v){if(this._headersMap={},v)for(var O in v)this.set(O,v[O])}return S.prototype.set=function(v,O){this._headersMap[s(v)]={name:v,value:O.toString()}},S.prototype.get=function(v){var O=this._headersMap[s(v)];return O?O.value:void 0},S.prototype.contains=function(v){return!!this._headersMap[s(v)]},S.prototype.remove=function(v){var O=this.contains(v);return delete this._headersMap[s(v)],O},S.prototype.rawHeaders=function(){var v={};for(var O in this._headersMap){var H=this._headersMap[O];v[H.name.toLowerCase()]=H.value}return v},S.prototype.headersArray=function(){var v=[];for(var O in this._headersMap)v.push(this._headersMap[O]);return v},S.prototype.headerNames=function(){for(var v=[],O=this.headersArray(),H=0;H<O.length;++H)v.push(O[H].name);return v},S.prototype.headerValues=function(){for(var v=[],O=this.headersArray(),H=0;H<O.length;++H)v.push(O[H].value);return v},S.prototype.toJson=function(){return this.rawHeaders()},S.prototype.toString=function(){return JSON.stringify(this.toJson())},S.prototype.clone=function(){return new S(this.rawHeaders())},S}(),p=function(S,v){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,H){O.__proto__=H}||function(O,H){for(var z in H)Object.prototype.hasOwnProperty.call(H,z)&&(O[z]=H[z])})(S,v)};function T(S,v){if("function"!=typeof v&&null!==v)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function O(){this.constructor=S}p(S,v),S.prototype=null===v?Object.create(v):(O.prototype=v.prototype,new O)}var l=function(){return(l=Object.assign||function(v){for(var O,H=1,z=arguments.length;H<z;H++)for(var X in O=arguments[H])Object.prototype.hasOwnProperty.call(O,X)&&(v[X]=O[X]);return v}).apply(this,arguments)};function g(S,v,O,H){return new(O||(O=Promise))(function(X,ue){function ve(Me){try{we(H.next(Me))}catch(_e){ue(_e)}}function Ae(Me){try{we(H.throw(Me))}catch(_e){ue(_e)}}function we(Me){Me.done?X(Me.value):function(X){return X instanceof O?X:new O(function(ue){ue(X)})}(Me.value).then(ve,Ae)}we((H=H.apply(S,v||[])).next())})}function _(S,v){var H,z,X,ue,O={label:0,sent:function(){if(1&X[0])throw X[1];return X[1]},trys:[],ops:[]};return ue={next:ve(0),throw:ve(1),return:ve(2)},"function"==typeof Symbol&&(ue[Symbol.iterator]=function(){return this}),ue;function ve(we){return function(Me){return function(we){if(H)throw new TypeError("Generator is already executing.");for(;O;)try{if(H=1,z&&(X=2&we[0]?z.return:we[0]?z.throw||((X=z.return)&&X.call(z),0):z.next)&&!(X=X.call(z,we[1])).done)return X;switch(z=0,X&&(we=[2&we[0],X.value]),we[0]){case 0:case 1:X=we;break;case 4:return O.label++,{value:we[1],done:!1};case 5:O.label++,z=we[1],we=[0];continue;case 7:we=O.ops.pop(),O.trys.pop();continue;default:if(!(X=(X=O.trys).length>0&&X[X.length-1])&&(6===we[0]||2===we[0])){O=0;continue}if(3===we[0]&&(!X||we[1]>X[0]&&we[1]<X[3])){O.label=we[1];break}if(6===we[0]&&O.label<X[1]){O.label=X[1],X=we;break}if(X&&O.label<X[2]){O.label=X[2],O.ops.push(we);break}X[2]&&O.ops.pop(),O.trys.pop();continue}we=v.call(S,O)}catch(Me){we=[6,Me],z=0}finally{H=X=0}if(5&we[0])throw we[1];return{value:we[0]?we[1]:void 0,done:!0}}([we,Me])}}}function Se(S){for(var v="",O=0;O<S.length;O++)v+=String.fromCharCode(S[O]);return btoa(v)}function oe(S){for(var v=atob(S),O=new Uint8Array(v.length),H=0;H<v.length;H++)O[H]=v.charCodeAt(H);return O}var ne,pe=new Uint8Array(16);function re(){if(!ne&&!(ne="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ne(pe)}const J=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,me=function(S){return"string"==typeof S&&J.test(S)};for(var ee=[],le=0;le<256;++le)ee.push((le+256).toString(16).substr(1));const Ee=function(S,v,O){var H=(S=S||{}).random||(S.rng||re)();if(H[6]=15&H[6]|64,H[8]=63&H[8]|128,v){O=O||0;for(var z=0;z<16;++z)v[O+z]=H[z];return v}return function(S){var v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,O=(ee[S[v+0]]+ee[S[v+1]]+ee[S[v+2]]+ee[S[v+3]]+"-"+ee[S[v+4]]+ee[S[v+5]]+"-"+ee[S[v+6]]+ee[S[v+7]]+"-"+ee[S[v+8]]+ee[S[v+9]]+"-"+ee[S[v+10]]+ee[S[v+11]]+ee[S[v+12]]+ee[S[v+13]]+ee[S[v+14]]+ee[S[v+15]]).toLowerCase();if(!me(O))throw TypeError("Stringified UUID is invalid");return O}(H)};var De="$",Fe="_",Ie=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i,Be="undefined"!=typeof process&&!!process.version&&!!process.versions&&!!process.versions.node;function Ve(S){return encodeURIComponent(S).replace(/!/g,"%21").replace(/"/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function $e(S){var v={};return v.body=S.bodyAsText,v.headers=S.headers,v.status=S.status,v}function Je(S){var v=S.clone();return v.headers&&v.headers.remove("authorization"),v}function Ke(S){return Ie.test(S)}function je(){return Ee()}function tt(S,v){var O=Promise.resolve(v);return S.forEach(function(H){O=O.then(H)}),O}function ke(S,v){return new Promise(function(O){return setTimeout(function(){return O(v)},S)})}function Ht(S){if("function"!=typeof S.then)throw new Error("The provided input is not a Promise.");return function(v){S.then(function(O){return v(void 0,O)}).catch(function(O){v(O)})}}function on(S){if("function"!=typeof S.then)throw new Error("The provided input is not a Promise.");return function(v){S.then(function(O){return process.nextTick(v,void 0,O.parsedBody,O.request,O)}).catch(function(O){process.nextTick(v,O)})}}function ir(S,v){var O=S;v.forEach(function(H){Object.getOwnPropertyNames(H.prototype).forEach(function(z){O.prototype[z]=H.prototype[z]})})}var Le=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function ze(S){return Le.test(S)}function Ye(S,v,O){return S&&v?S.split(v).join(O||""):S}var nn=function(){function S(v,O){void 0===v&&(v={}),this.modelMappers=v,this.isXML=O}return S.prototype.validateConstraints=function(v,O,H){var z=function(ln,Sn){throw new Error('"'+H+'" with value "'+O+'" should satisfy the constraint "'+ln+'": '+Sn+".")};if(v.constraints&&null!=O){var X=O,ue=v.constraints,ve=ue.ExclusiveMaximum,Ae=ue.ExclusiveMinimum,we=ue.InclusiveMaximum,Me=ue.InclusiveMinimum,_e=ue.MaxItems,Ge=ue.MaxLength,Qe=ue.MinItems,nt=ue.MinLength,ct=ue.MultipleOf,pt=ue.Pattern,it=ue.UniqueItems;null!=ve&&X>=ve&&z("ExclusiveMaximum",ve),null!=Ae&&X<=Ae&&z("ExclusiveMinimum",Ae),null!=we&&X>we&&z("InclusiveMaximum",we),null!=Me&&X<Me&&z("InclusiveMinimum",Me);var yt=O;if(null!=_e&&yt.length>_e&&z("MaxItems",_e),null!=Ge&&yt.length>Ge&&z("MaxLength",Ge),null!=Qe&&yt.length<Qe&&z("MinItems",Qe),null!=nt&&yt.length<nt&&z("MinLength",nt),null!=ct&&X%ct!=0&&z("MultipleOf",ct),pt){var Gt="string"==typeof pt?new RegExp(pt):pt;("string"!=typeof O||null===O.match(Gt))&&z("Pattern",pt)}it&&yt.some(function(ln,Sn,Pn){return Pn.indexOf(ln)!==Sn})&&z("UniqueItems",it)}},S.prototype.serialize=function(v,O,H,z){var X,ue,ve;void 0===z&&(z={});var Ae={rootName:null!==(X=z.rootName)&&void 0!==X?X:"",includeRoot:null!==(ue=z.includeRoot)&&void 0!==ue&&ue,xmlCharKey:null!==(ve=z.xmlCharKey)&&void 0!==ve?ve:Fe},we={},Me=v.type.name;H||(H=v.serializedName),null!==Me.match(/^Sequence$/i)&&(we=[]),v.isConstant&&(O=v.defaultValue);var _e=v.required,Ge=v.nullable;if(_e&&Ge&&void 0===O)throw new Error(H+" cannot be undefined.");if(_e&&!Ge&&null==O)throw new Error(H+" cannot be null or undefined.");if(!_e&&!1===Ge&&null===O)throw new Error(H+" cannot be null.");return null==O?we=O:(this.validateConstraints(v,O,H),null!==Me.match(/^any$/i)?we=O:null!==Me.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)?we=function(S,v,O){if(null!=O)if(null!==S.match(/^Number$/i)){if("number"!=typeof O)throw new Error(v+" with value "+O+" must be of type number.")}else if(null!==S.match(/^String$/i)){if("string"!=typeof O.valueOf())throw new Error(v+' with value "'+O+'" must be of type string.')}else if(null!==S.match(/^Uuid$/i)){if("string"!=typeof O.valueOf()||!Ke(O))throw new Error(v+' with value "'+O+'" must be of type string and a valid uuid.')}else if(null!==S.match(/^Boolean$/i)){if("boolean"!=typeof O)throw new Error(v+" with value "+O+" must be of type boolean.")}else if(null!==S.match(/^Stream$/i)){var H=typeof O;if(!("string"===H||"function"===H||O instanceof ArrayBuffer||ArrayBuffer.isView(O)||("function"==typeof Blob||"object"==typeof Blob)&&O instanceof Blob))throw new Error(v+" must be a string, Blob, ArrayBuffer, ArrayBufferView, or a function returning NodeJS.ReadableStream.")}return O}(Me,H,O):null!==Me.match(/^Enum$/i)?we=function(S,v,O){if(!v)throw new Error("Please provide a set of allowedValues to validate "+S+" as an Enum Type.");if(!v.some(function(z){return"string"==typeof z.valueOf()?z.toLowerCase()===O.toLowerCase():z===O}))throw new Error(O+" is not a valid value for "+S+". The valid values are: "+JSON.stringify(v)+".");return O}(H,v.type.allowedValues,O):null!==Me.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)?we=function(S,v,O){if(null!=v)if(null!==S.match(/^Date$/i)){if(!(v instanceof Date||"string"==typeof v.valueOf()&&!isNaN(Date.parse(v))))throw new Error(O+" must be an instanceof Date or a string in ISO8601 format.");v=v instanceof Date?v.toISOString().substring(0,10):new Date(v).toISOString().substring(0,10)}else if(null!==S.match(/^DateTime$/i)){if(!(v instanceof Date||"string"==typeof v.valueOf()&&!isNaN(Date.parse(v))))throw new Error(O+" must be an instanceof Date or a string in ISO8601 format.");v=v instanceof Date?v.toISOString():new Date(v).toISOString()}else if(null!==S.match(/^DateTimeRfc1123$/i)){if(!(v instanceof Date||"string"==typeof v.valueOf()&&!isNaN(Date.parse(v))))throw new Error(O+" must be an instanceof Date or a string in RFC-1123 format.");v=v instanceof Date?v.toUTCString():new Date(v).toUTCString()}else if(null!==S.match(/^UnixTime$/i)){if(!(v instanceof Date||"string"==typeof v.valueOf()&&!isNaN(Date.parse(v))))throw new Error(O+" must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.");v=function(S){if(S)return"string"==typeof S.valueOf()&&(S=new Date(S)),Math.floor(S.getTime()/1e3)}(v)}else if(null!==S.match(/^TimeSpan$/i)&&!ze(v))throw new Error(O+' must be a string in ISO 8601 format. Instead was "'+v+'".');return v}(Me,O,H):null!==Me.match(/^ByteArray$/i)?we=function(S,v){var O="";if(null!=v){if(!(v instanceof Uint8Array))throw new Error(S+" must be of type Uint8Array.");O=Se(v)}return O}(H,O):null!==Me.match(/^Base64Url$/i)?we=function(S,v){var O="";if(null!=v){if(!(v instanceof Uint8Array))throw new Error(S+" must be of type Uint8Array.");O=function(S){if(S){if(!(S instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");return function(S,v){for(var O=S.length;O-1>=0&&"="===S[O-1];)--O;return S.substr(0,O)}(Se(S)).replace(/\+/g,"-").replace(/\//g,"_")}}(v)||""}return O}(H,O):null!==Me.match(/^Sequence$/i)?we=function(S,v,O,H,z,X){var ue,ve;if(!Array.isArray(O))throw new Error(H+" must be of type Array.");var Ae=v.type.element;if(!Ae||"object"!=typeof Ae)throw new Error('element" metadata for an Array must be defined in the mapper and it must of type "object" in '+H+".");for(var we=[],Me=0;Me<O.length;Me++){var _e=S.serialize(Ae,O[Me],H,X);if(z&&Ae.xmlNamespace){var Ge=Ae.xmlNamespacePrefix?"xmlns:"+Ae.xmlNamespacePrefix:"xmlns";"Composite"===Ae.type.name?(we[Me]=l({},_e),we[Me][De]=((ue={})[Ge]=Ae.xmlNamespace,ue)):(we[Me]={},we[Me][X.xmlCharKey]=_e,we[Me][De]=((ve={})[Ge]=Ae.xmlNamespace,ve))}else we[Me]=_e}return we}(this,v,O,H,Boolean(this.isXML),Ae):null!==Me.match(/^Dictionary$/i)?we=function(S,v,O,H,z,X){var ue;if("object"!=typeof O)throw new Error(H+" must be of type object.");var ve=v.type.value;if(!ve||"object"!=typeof ve)throw new Error('"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in '+H+".");for(var Ae={},we=0,Me=Object.keys(O);we<Me.length;we++){var _e=Me[we],Ge=S.serialize(ve,O[_e],H,X);Ae[_e]=_r(ve,Ge,z,X)}if(z&&v.xmlNamespace){var nt=Ae;return nt[De]=((ue={})[v.xmlNamespacePrefix?"xmlns:"+v.xmlNamespacePrefix:"xmlns"]=v.xmlNamespace,ue),nt}return Ae}(this,v,O,H,Boolean(this.isXML),Ae):null!==Me.match(/^Composite$/i)&&(we=function(S,v,O,H,z,X){var ue,ve;if(xi(S,v)&&(v=ps(S,v,O,"clientName")),null!=O){for(var Ae={},we=fs(S,v,H),Me=0,_e=Object.keys(we);Me<_e.length;Me++){var Ge=_e[Me],Qe=we[Ge];if(!Qe.readOnly){var nt=void 0,ct=Ae;if(S.isXML)nt=Qe.xmlIsWrapped?Qe.xmlName:Qe.xmlElementName||Qe.xmlName;else{var pt=as(Qe.serializedName);nt=pt.pop();for(var it=0,yt=pt;it<yt.length;it++){var Gt=yt[it];null==ct[Gt]&&(null!=O[Ge]||void 0!==Qe.defaultValue)&&(ct[Gt]={}),ct=ct[Gt]}}if(null!=ct){if(z&&v.xmlNamespace){var Sn=v.xmlNamespacePrefix?"xmlns:"+v.xmlNamespacePrefix:"xmlns";ct[De]=l(l({},ct[De]),((ue={})[Sn]=v.xmlNamespace,ue))}var Pn=""!==Qe.serializedName?H+"."+Qe.serializedName:H,In=O[Ge],Tn=xi(S,v);Tn&&Tn.clientName===Ge&&null==In&&(In=v.serializedName);var An=S.serialize(Qe,In,Pn,X);if(void 0!==An&&null!=nt){var Zn=_r(Qe,An,z,X);z&&Qe.xmlIsAttribute?(ct[De]=ct[De]||{},ct[De][nt]=An):ct[nt]=z&&Qe.xmlIsWrapped?((ve={})[Qe.xmlElementName]=Zn,ve):Zn}}}}var dn=function(S,v,O){var H=v.type.additionalProperties;if(!H&&v.type.className){var z=at(S,v,O);return null==z?void 0:z.type.additionalProperties}return H}(S,v,H);if(dn){var Zt=Object.keys(we),Nt=function(zt){Zt.every(function(an){return an!==zt})&&(Ae[zt]=S.serialize(dn,O[zt],H+'["'+zt+'"]',X))};for(var Bt in O)Nt(Bt)}return Ae}return O}(this,v,O,H,Boolean(this.isXML),Ae))),we},S.prototype.deserialize=function(v,O,H,z){var X,ue,ve;void 0===z&&(z={});var Ae={rootName:null!==(X=z.rootName)&&void 0!==X?X:"",includeRoot:null!==(ue=z.includeRoot)&&void 0!==ue&&ue,xmlCharKey:null!==(ve=z.xmlCharKey)&&void 0!==ve?ve:Fe};if(null==O)return this.isXML&&"Sequence"===v.type.name&&!v.xmlIsWrapped&&(O=[]),void 0!==v.defaultValue&&(O=v.defaultValue),O;var we,Me=v.type.name;if(H||(H=v.serializedName),null!==Me.match(/^Composite$/i))we=function(S,v,O,H,z){var X;xi(S,v)&&(v=ps(S,v,O,"serializedName"));for(var ue=fs(S,v,H),ve={},Ae=[],we=0,Me=Object.keys(ue);we<Me.length;we++){var Ge=ue[_e=Me[we]],Qe=as(ue[_e].serializedName);Ae.push(Qe[0]);var nt=Ge.serializedName,ct=Ge.xmlName,pt=Ge.xmlElementName,it=H;""!==nt&&void 0!==nt&&(it=H+"."+nt);var yt=Ge.headerCollectionPrefix;if(yt){for(var Gt={},ln=0,Sn=Object.keys(O);ln<Sn.length;ln++){var Pn=Sn[ln];Pn.startsWith(yt)&&(Gt[Pn.substring(yt.length)]=S.deserialize(Ge.type.value,O[Pn],it,z)),Ae.push(Pn)}ve[_e]=Gt}else if(S.isXML)if(Ge.xmlIsAttribute&&O[De])ve[_e]=S.deserialize(Ge,O[De][ct],it,z);else{var In=pt||ct||nt;if(Ge.xmlIsWrapped){var Tn=O[ct],An=null!==(X=null==Tn?void 0:Tn[pt])&&void 0!==X?X:[];ve[_e]=S.deserialize(Ge,An,it,z)}else ve[_e]=S.deserialize(Ge,O[In],it,z)}else{for(var dn=void 0,Zt=O,Nt=0,Bt=Qe;Nt<Bt.length;Nt++){var zt=Bt[Nt];if(!Zt)break;Zt=Zt[zt]}dn=Zt;var jt=v.type.polymorphicDiscriminator;jt&&_e===jt.clientName&&null==dn&&(dn=v.serializedName);var an=void 0;if(Array.isArray(O[_e])&&""===ue[_e].serializedName){for(var er=S.deserialize(Ge,dn=O[_e],it,z),vr=0,Kt=Object.entries(ve);vr<Kt.length;vr++){var kn=Kt[vr],To=kn[0],zo=kn[1];Object.prototype.hasOwnProperty.call(er,To)||(er[To]=zo)}ve=er}else(void 0!==dn||void 0!==Ge.defaultValue)&&(an=S.deserialize(Ge,dn,it,z),ve[_e]=an)}}var Ti=v.type.additionalProperties;if(Ti){var Ko=function(Uu){for(var Vu in ue)if(as(ue[Vu].serializedName)[0]===Uu)return!1;return!0};for(var bo in O)Ko(bo)&&(ve[bo]=S.deserialize(Ti,O[bo],H+'["'+bo+'"]',z))}else if(O)for(var Or=0,Xi=Object.keys(O);Or<Xi.length;Or++){var _e;void 0===ve[_e=Xi[Or]]&&!Ae.includes(_e)&&!ta(_e,z)&&(ve[_e]=O[_e])}return ve}(this,v,O,H,Ae);else{if(this.isXML){var _e=Ae.xmlCharKey;null!=O[De]&&null!=O[_e]&&(O=O[_e])}null!==Me.match(/^Number$/i)?(we=parseFloat(O),isNaN(we)&&(we=O)):null!==Me.match(/^Boolean$/i)?we="true"===O||"false"!==O&&O:null!==Me.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)?we=O:null!==Me.match(/^(Date|DateTime|DateTimeRfc1123)$/i)?we=new Date(O):null!==Me.match(/^UnixTime$/i)?we=function(S){if(S)return new Date(1e3*S)}(O):null!==Me.match(/^ByteArray$/i)?we=oe(O):null!==Me.match(/^Base64Url$/i)?we=function(S){if(S){if(S&&"string"!=typeof S.valueOf())throw new Error("Please provide an input of type string for converting to Uint8Array");return oe(S=S.replace(/-/g,"+").replace(/_/g,"/"))}}(O):null!==Me.match(/^Sequence$/i)?we=function(S,v,O,H,z){var X=v.type.element;if(!X||"object"!=typeof X)throw new Error('element" metadata for an Array must be defined in the mapper and it must of type "object" in '+H);if(O){Array.isArray(O)||(O=[O]);for(var ue=[],ve=0;ve<O.length;ve++)ue[ve]=S.deserialize(X,O[ve],H+"["+ve+"]",z);return ue}return O}(this,v,O,H,Ae):null!==Me.match(/^Dictionary$/i)&&(we=function(S,v,O,H,z){var X=v.type.value;if(!X||"object"!=typeof X)throw new Error('"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in '+H);if(O){for(var ue={},ve=0,Ae=Object.keys(O);ve<Ae.length;ve++){var we=Ae[ve];ue[we]=S.deserialize(X,O[we],H,z)}return ue}return O}(this,v,O,H,Ae))}return v.isConstant&&(we=v.defaultValue),we},S}();function as(S){var v=[],O="";if(S)for(var z=0,X=S.split(".");z<X.length;z++){var ue=X[z];"\\"===ue.charAt(ue.length-1)?O+=ue.substr(0,ue.length-1)+".":(v.push(O+=ue),O="")}return v}function at(S,v,O){var H=v.type.className;if(!H)throw new Error('Class name for model "'+O+'" is not provided in the mapper "'+JSON.stringify(v,void 0,2)+'".');return S.modelMappers[H]}function fs(S,v,O){var H=v.type.modelProperties;if(!H){var z=at(S,v,O);if(!z)throw new Error('mapper() cannot be null or undefined for model "'+v.type.className+'".');if(!(H=null==z?void 0:z.type.modelProperties))throw new Error('modelProperties cannot be null or undefined in the mapper "'+JSON.stringify(z)+'" of type "'+v.type.className+'" for object "'+O+'".')}return H}function _r(S,v,O,H){var z;if(!O||!S.xmlNamespace)return v;var ue=((z={})[S.xmlNamespacePrefix?"xmlns:"+S.xmlNamespacePrefix:"xmlns"]=S.xmlNamespace,z);if(["Composite"].includes(S.type.name)){if(v[De])return v;var ve=l({},v);return ve[De]=ue,ve}var Ae={};return Ae[H.xmlCharKey]=v,Ae[De]=ue,Ae}function ta(S,v){return[De,v.xmlCharKey].includes(S)}function ps(S,v,O,H){var z=xi(S,v);if(z){var X=z[H];if(null!=X){var ue=O[X];if(null!=ue){var ve=v.type.uberParent||v.type.className,we=S.modelMappers.discriminators[ue===ve?ue:ve+"."+ue];we&&(v=we)}}}return v}function xi(S,v){return v.type.polymorphicDiscriminator||No(S,v.type.uberParent)||No(S,v.type.className)}function No(S,v){return v&&S.modelMappers[v]&&S.modelMappers[v].type.polymorphicDiscriminator}function ai(S){var v=S;if(null!=S){if(S instanceof Uint8Array)return Se(S);if(S instanceof Date)return S.toISOString();if(Array.isArray(S)){for(var O=[],H=0;H<S.length;H++)O.push(ai(S[H]));return O}if("object"==typeof S){var z={};for(var X in S)z[X]=ai(v[X]);return z}return S}}var Li=function(S){for(var v={},O=0,H=["Base64Url","Boolean","ByteArray","Composite","Date","DateTime","DateTimeRfc1123","Dictionary","Enum","Number","Object","Sequence","String","Stream","TimeSpan","UnixTime"];O<H.length;O++){var z=H[O];v[z]=z}return v}(),fo=function(){function S(v,O,H,z,X,ue,ve,Ae,we,Me,_e,Ge,Qe,nt,ct){this.streamResponseBody=ue,this.streamResponseStatusCodes=ct,this.url=v||"",this.method=O||"GET",this.headers=E(X)?X:new d(X),this.body=H,this.query=z,this.formData=void 0,this.withCredentials=ve||!1,this.abortSignal=Ae,this.timeout=we||0,this.onUploadProgress=Me,this.onDownloadProgress=_e,this.proxySettings=Ge,this.keepAlive=Qe,this.decompressResponse=nt,this.requestId=this.headers.get("x-ms-client-request-id")||je()}return S.prototype.validateRequestProperties=function(){if(!this.method)throw new Error("WebResource.method is required.");if(!this.url)throw new Error("WebResource.url is required.")},S.prototype.prepare=function(v){if(!v)throw new Error("options object is required");if(null==v.method||"string"!=typeof v.method.valueOf())throw new Error("options.method must be a string.");if(v.url&&v.pathTemplate)throw new Error("options.url and options.pathTemplate are mutually exclusive. Please provide exactly one of them.");if(!(null!=v.pathTemplate&&"string"==typeof v.pathTemplate.valueOf()||null!=v.url&&"string"==typeof v.url.valueOf()))throw new Error("Please provide exactly one of options.pathTemplate or options.url.");if(v.url){if("string"!=typeof v.url)throw new Error('options.url must be of type "string".');this.url=v.url}if(v.method){var O=["GET","PUT","HEAD","DELETE","OPTIONS","POST","PATCH","TRACE"];if(-1===O.indexOf(v.method.toUpperCase()))throw new Error('The provided method "'+v.method+'" is invalid. Supported HTTP methods are: '+JSON.stringify(O))}if(this.method=v.method.toUpperCase(),v.pathTemplate){var H=v.pathTemplate,z=v.pathParameters;if("string"!=typeof H)throw new Error('options.pathTemplate must be of type "string".');v.baseUrl||(v.baseUrl="https://management.azure.com");var X=v.baseUrl,ue=X+(X.endsWith("/")?"":"/")+(H.startsWith("/")?H.slice(1):H),ve=ue.match(/({[\w-]*\s*[\w-]*})/gi);if(ve&&ve.length){if(!z)throw new Error("pathTemplate: "+H+" has been provided. Hence, options.pathParameters must also be provided.");ve.forEach(function(pt){var it=pt.slice(1,-1),yt=z[it];if(null==yt||"string"!=typeof yt&&"object"!=typeof yt){var Gt=JSON.stringify(z,void 0,2);throw new Error("pathTemplate: "+H+" contains the path parameter "+it+" however, it is not present in parameters: "+Gt+'.The value of the path parameter can either be a "string" of the form { '+it+': "some sample value" } or it can be an "object" of the form { "'+it+'": { value: "some sample value", skipUrlEncoding: true } }.')}if("string"==typeof yt.valueOf()&&(ue=ue.replace(pt,encodeURIComponent(yt))),"object"==typeof yt.valueOf()){if(!yt.value)throw new Error("options.pathParameters["+it+'] is of type "object" but it does not contain a "value" property.');ue=ue.replace(pt,yt.skipUrlEncoding?yt.value:encodeURIComponent(yt.value))}})}this.url=ue}if(v.queryParameters){var Ae=v.queryParameters;if("object"!=typeof Ae)throw new Error('options.queryParameters must be of type object. It should be a JSON object of "query-parameter-name" as the key and the "query-parameter-value" as the value. The "query-parameter-value" may be fo type "string" or an "object" of the form { value: "query-parameter-value", skipUrlEncoding: true }.');this.url&&-1===this.url.indexOf("?")&&(this.url+="?");var we=[];for(var Me in this.query={},Ae){var _e=Ae[Me];if(_e)if("string"==typeof _e)we.push(Me+"="+encodeURIComponent(_e)),this.query[Me]=encodeURIComponent(_e);else if("object"==typeof _e){if(!_e.value)throw new Error("options.queryParameters["+Me+'] is of type "object" but it does not contain a "value" property.');_e.skipUrlEncoding?(we.push(Me+"="+_e.value),this.query[Me]=_e.value):(we.push(Me+"="+encodeURIComponent(_e.value)),this.query[Me]=encodeURIComponent(_e.value))}}this.url+=we.join("&")}if(v.headers)for(var Ge=v.headers,Qe=0,nt=Object.keys(v.headers);Qe<nt.length;Qe++){var ct=nt[Qe];this.headers.set(ct,Ge[ct])}return this.headers.get("accept-language")||this.headers.set("accept-language","en-US"),!this.headers.get("x-ms-client-request-id")&&!v.disableClientRequestId&&this.headers.set("x-ms-client-request-id",this.requestId),this.headers.get("Content-Type")||this.headers.set("Content-Type","application/json; charset=utf-8"),this.body=v.body,null!=v.body&&(v.bodyIsStream?(this.headers.get("Transfer-Encoding")||this.headers.set("Transfer-Encoding","chunked"),"application/octet-stream"!==this.headers.get("Content-Type")&&this.headers.set("Content-Type","application/octet-stream")):(v.serializationMapper&&(this.body=new nn(v.mappers).serialize(v.serializationMapper,v.body,"requestBody")),v.disableJsonStringifyOnBody||(this.body=JSON.stringify(v.body)))),v.spanOptions&&(this.spanOptions=v.spanOptions),v.tracingContext&&(this.tracingContext=v.tracingContext),this.abortSignal=v.abortSignal,this.onDownloadProgress=v.onDownloadProgress,this.onUploadProgress=v.onUploadProgress,this},S.prototype.clone=function(){var v=new S(this.url,this.method,this.body,this.query,this.headers&&this.headers.clone(),this.streamResponseBody,this.withCredentials,this.abortSignal,this.timeout,this.onUploadProgress,this.onDownloadProgress,this.proxySettings,this.keepAlive,this.decompressResponse,this.streamResponseStatusCodes);return this.formData&&(v.formData=this.formData),this.operationSpec&&(v.operationSpec=this.operationSpec),this.shouldDeserialize&&(v.shouldDeserialize=this.shouldDeserialize),this.operationResponseGetter&&(v.operationResponseGetter=this.operationResponseGetter),v},S}(),sr=c(4637),pu={},ko=function(){function S(){this._rawQuery={}}return S.prototype.any=function(){return Object.keys(this._rawQuery).length>0},S.prototype.keys=function(){return Object.keys(this._rawQuery)},S.prototype.set=function(v,O){var H=O;if(v)if(null!=H){var z=Array.isArray(H)?H:H.toString();this._rawQuery[v]=z}else delete this._rawQuery[v]},S.prototype.get=function(v){return v?this._rawQuery[v]:void 0},S.prototype.toString=function(){var v="";for(var O in this._rawQuery){v&&(v+="&");var H=this._rawQuery[O];if(Array.isArray(H)){for(var z=[],X=0,ue=H;X<ue.length;X++)z.push(O+"="+ue[X]);v+=z.join("&")}else v+=O+"="+H}return v},S.parse=function(v){var O=new S;if(v){v.startsWith("?")&&(v=v.substring(1));for(var H="ParameterName",z="",X="",ue=0;ue<v.length;++ue){var ve=v[ue];switch(H){case"ParameterName":switch(ve){case"=":H="ParameterValue";break;case"&":z="",X="";break;default:z+=ve}break;case"ParameterValue":switch(ve){case"&":O.set(z,X),z="",X="",H="ParameterName";break;default:X+=ve}break;default:throw new Error("Unrecognized URLQuery parse state: "+H)}}"ParameterValue"===H&&O.set(z,X)}return O},S}(),ui=function(){function S(){}return S.prototype.setScheme=function(v){v?this.set(v,"SCHEME"):this._scheme=void 0},S.prototype.getScheme=function(){return this._scheme},S.prototype.setHost=function(v){v?this.set(v,"SCHEME_OR_HOST"):this._host=void 0},S.prototype.getHost=function(){return this._host},S.prototype.setPort=function(v){null==v||""===v?this._port=void 0:this.set(v.toString(),"PORT")},S.prototype.getPort=function(){return this._port},S.prototype.setPath=function(v){if(v){var O=v.indexOf("://");if(-1!==O){var H=v.lastIndexOf("/",O);this.set(-1===H?v:v.substr(H+1),"SCHEME")}else this.set(v,"PATH")}else this._path=void 0},S.prototype.appendPath=function(v){if(v){var O=this.getPath();O&&(O.endsWith("/")||(O+="/"),v.startsWith("/")&&(v=v.substring(1)),v=O+v),this.set(v,"PATH")}},S.prototype.getPath=function(){return this._path},S.prototype.setQuery=function(v){this._query=v?ko.parse(v):void 0},S.prototype.setQueryParameter=function(v,O){v&&(this._query||(this._query=new ko),this._query.set(v,O))},S.prototype.getQueryParameterValue=function(v){return this._query?this._query.get(v):void 0},S.prototype.getQuery=function(){return this._query?this._query.toString():void 0},S.prototype.set=function(v,O){for(var H=new gu(v,O);H.next();){var z=H.current(),X=void 0;if(z)switch(z.type){case"SCHEME":this._scheme=z.text||void 0;break;case"HOST":this._host=z.text||void 0;break;case"PORT":this._port=z.text||void 0;break;case"PATH":X=z.text||void 0,(!this._path||"/"===this._path||"/"!==X)&&(this._path=X);break;case"QUERY":this._query=ko.parse(z.text);break;default:throw new Error("Unrecognized URLTokenType: "+z.type)}}},S.prototype.toString=function(){var v="";return this._scheme&&(v+=this._scheme+"://"),this._host&&(v+=this._host),this._port&&(v+=":"+this._port),this._path&&(this._path.startsWith("/")||(v+="/"),v+=this._path),this._query&&this._query.any()&&(v+="?"+this._query.toString()),v},S.prototype.replaceAll=function(v,O){v&&(this.setScheme(Ye(this.getScheme(),v,O)),this.setHost(Ye(this.getHost(),v,O)),this.setPort(Ye(this.getPort(),v,O)),this.setPath(Ye(this.getPath(),v,O)),this.setQuery(Ye(this.getQuery(),v,O)))},S.parse=function(v){var O=new S;return O.set(v,"SCHEME_OR_HOST"),O},S}(),xr=function(){function S(v,O){this.text=v,this.type=O}return S.scheme=function(v){return new S(v,"SCHEME")},S.host=function(v){return new S(v,"HOST")},S.port=function(v){return new S(v,"PORT")},S.path=function(v){return new S(v,"PATH")},S.query=function(v){return new S(v,"QUERY")},S}(),gu=function(){function S(v,O){this._text=v,this._textLength=v?v.length:0,this._currentState=null!=O?O:"SCHEME_OR_HOST",this._currentIndex=0}return S.prototype.current=function(){return this._currentToken},S.prototype.next=function(){if(ci(this))switch(this._currentState){case"SCHEME":!function(S){var v=function(S){return na(S,function(v){return function(S){var v=S.charCodeAt(0);return 48<=v&&v<=57||65<=v&&v<=90||97<=v&&v<=122}(v)})}(S);S._currentToken=xr.scheme(v),S._currentState=ci(S)?"HOST":"DONE"}(this);break;case"SCHEME_OR_HOST":!function(S){var v=Ft(S,":","/","?");ci(S)?":"===pn(S)?"://"===xo(S,3)?(S._currentToken=xr.scheme(v),S._currentState="HOST"):(S._currentToken=xr.host(v),S._currentState="PORT"):(S._currentToken=xr.host(v),S._currentState="/"===pn(S)?"PATH":"QUERY"):(S._currentToken=xr.host(v),S._currentState="DONE")}(this);break;case"HOST":!function(S){"://"===xo(S,3)&&Xt(S,3);var v=Ft(S,":","/","?");S._currentToken=xr.host(v),S._currentState=ci(S)?":"===pn(S)?"PORT":"/"===pn(S)?"PATH":"QUERY":"DONE"}(this);break;case"PORT":!function(S){":"===pn(S)&&Xt(S);var v=Ft(S,"/","?");S._currentToken=xr.port(v),S._currentState=ci(S)?"/"===pn(S)?"PATH":"QUERY":"DONE"}(this);break;case"PATH":!function(S){var v=Ft(S,"?");S._currentToken=xr.path(v),S._currentState=ci(S)?"QUERY":"DONE"}(this);break;case"QUERY":!function(S){"?"===pn(S)&&Xt(S);var v=function(S){var v="";return S._currentIndex<S._textLength&&(v=S._text.substring(S._currentIndex),S._currentIndex=S._textLength),v}(S);S._currentToken=xr.query(v),S._currentState="DONE"}(this);break;default:throw new Error("Unrecognized URLTokenizerState: "+this._currentState)}else this._currentToken=void 0;return!!this._currentToken},S}();function ci(S){return S._currentIndex<S._textLength}function pn(S){return S._text[S._currentIndex]}function Xt(S,v){ci(S)&&(v||(v=1),S._currentIndex+=v)}function xo(S,v){var O=S._currentIndex+v;return S._textLength<O&&(O=S._textLength),S._text.substring(S._currentIndex,O)}function na(S,v){for(var O="";ci(S);){var H=pn(S);if(!v(H))break;O+=H,Xt(S)}return O}function Ft(S){for(var v=[],O=1;O<arguments.length;O++)v[O-1]=arguments[O];return na(S,function(H){return-1===v.indexOf(H)})}var ms="REDACTED",Fi=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent"],Lo=["api-version"],ys=function(){function S(v){var O=void 0===v?{}:v,H=O.allowedHeaderNames,z=void 0===H?[]:H,X=O.allowedQueryParameters,ue=void 0===X?[]:X;z=Array.isArray(z)?Fi.concat(z):Fi,ue=Array.isArray(ue)?Lo.concat(ue):Lo,this.allowedHeaderNames=new Set(z.map(function(ve){return ve.toLowerCase()})),this.allowedQueryParameters=new Set(ue.map(function(ve){return ve.toLowerCase()}))}return S.prototype.sanitize=function(v){var O=this,H=new Set;return JSON.stringify(v,function(z,X){if(X instanceof Error)return l(l({},X),{name:X.name,message:X.message});if("_headersMap"===z)return O.sanitizeHeaders(X);if("url"===z)return O.sanitizeUrl(X);if("query"===z)return O.sanitizeQuery(X);if("body"!==z&&"response"!==z&&"operationSpec"!==z){if(Array.isArray(X)||function(S){return!("object"!=typeof S||null===S||Array.isArray(S)||S instanceof RegExp||S instanceof Date)}(X)){if(H.has(X))return"[Circular]";H.add(X)}return X}},2)},S.prototype.sanitizeHeaders=function(v){return this.sanitizeObject(v,this.allowedHeaderNames,function(O,H){return O[H].value})},S.prototype.sanitizeQuery=function(v){return this.sanitizeObject(v,this.allowedQueryParameters,function(O,H){return O[H]})},S.prototype.sanitizeObject=function(v,O,H){if("object"!=typeof v||null===v)return v;for(var z={},X=0,ue=Object.keys(v);X<ue.length;X++){var ve=ue[X];z[ve]=O.has(ve.toLowerCase())?H(v,ve):ms}return z},S.prototype.sanitizeUrl=function(v){if("string"!=typeof v||null===v)return v;var O=ui.parse(v),H=O.getQuery();if(!H)return v;for(var z=ko.parse(H),X=0,ue=z.keys();X<ue.length;X++){var ve=ue[X];this.allowedQueryParameters.has(ve.toLowerCase())||z.set(ve,ms)}return O.setQuery(z.toString()),O.toString()},S}(),Cu=new ys,rt=function(S){function v(O,H,z,X,ue){var ve=S.call(this,O)||this;return ve.name="RestError",ve.code=H,ve.statusCode=z,ve.request=X,ve.response=ue,Object.setPrototypeOf(ve,v.prototype),ve}return T(v,S),v.prototype[pu]=function(){return"RestError: "+this.message+" \n "+Cu.sanitize(this)},v.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",v.PARSE_ERROR="PARSE_ERROR",v}(Error),po=function(){function S(){}return S.prototype.sendRequest=function(v){var O,H=new XMLHttpRequest;if(v.proxySettings)throw new Error("HTTP proxy is not supported in browser environment");var z=v.abortSignal;if(z){if(z.aborted)return Promise.reject(new sr._("The operation was aborted."));var X=function(){H.abort()};z.addEventListener("abort",X),H.addEventListener("readystatechange",function(){H.readyState===XMLHttpRequest.DONE&&z.removeEventListener("abort",X)})}if(wr(H.upload,v.onUploadProgress),wr(H,v.onDownloadProgress),v.formData){for(var ue=v.formData,ve=new FormData,Ae=function(yt,Gt){Gt&&Object.prototype.hasOwnProperty.call(Gt,"value")&&Object.prototype.hasOwnProperty.call(Gt,"options")?ve.append(yt,Gt.value,Gt.options):ve.append(yt,Gt)},we=0,Me=Object.keys(ue);we<Me.length;we++){var _e=Me[we],Ge=ue[_e];if(Array.isArray(Ge))for(var Qe=0;Qe<Ge.length;Qe++)Ae(_e,Ge[Qe]);else Ae(_e,Ge)}v.body=ve,v.formData=void 0;var nt=v.headers.get("Content-Type");nt&&-1!==nt.indexOf("multipart/form-data")&&v.headers.remove("Content-Type")}H.open(v.method,v.url),H.timeout=v.timeout,H.withCredentials=v.withCredentials;for(var ct=0,pt=v.headers.headersArray();ct<pt.length;ct++){var it=pt[ct];H.setRequestHeader(it.name,it.value)}return H.responseType=(null===(O=v.streamResponseStatusCodes)||void 0===O?void 0:O.size)||v.streamResponseBody?"blob":"text",H.send(void 0===v.body?null:v.body),new Promise("blob"===H.responseType?function(yt,Gt){(function(S,v,O,H){S.addEventListener("readystatechange",function(){var z;if(S.readyState===XMLHttpRequest.HEADERS_RECEIVED)if(v.streamResponseBody||(null===(z=v.streamResponseStatusCodes)||void 0===z?void 0:z.has(S.status))){var X=new Promise(function(ue,ve){S.addEventListener("load",function(){ue(S.response)}),ra(v,S,ve)});O({request:v,status:S.status,headers:Ui(S),blobBody:X})}else S.addEventListener("load",function(){if(S.response){var ue=new FileReader;ue.onload=function(ve){var Ae,we=null===(Ae=ve.target)||void 0===Ae?void 0:Ae.result;O({request:v,status:S.status,headers:Ui(S),bodyAsText:we})},ue.onerror=function(ve){H(ue.error)},ue.readAsText(S.response,"UTF-8")}else O({request:v,status:S.status,headers:Ui(S)})})})})(H,v,yt,Gt),ra(v,H,Gt)}:function(yt,Gt){H.addEventListener("load",function(){return yt({request:v,status:H.status,headers:Ui(H),bodyAsText:H.responseText})}),ra(v,H,Gt)})},S}();function wr(S,v){v&&S.addEventListener("progress",function(O){return v({loadedBytes:O.loaded})})}function Ui(S){for(var v=new d,H=0,z=S.getAllResponseHeaders().trim().split(/[\r\n]+/);H<z.length;H++){var X=z[H],ue=X.indexOf(":"),ve=X.slice(0,ue),Ae=X.slice(ue+2);v.set(ve,Ae)}return v}function ra(S,v,O){v.addEventListener("error",function(){return O(new rt("Failed to send request to "+S.url,rt.REQUEST_SEND_ERROR,void 0,S))});var H=new sr._("The operation was aborted.");v.addEventListener("abort",function(){return O(H)}),v.addEventListener("timeout",function(){return O(H)})}var Jn=(()=>{return(S=Jn||(Jn={}))[S.OFF=0]="OFF",S[S.ERROR=1]="ERROR",S[S.WARNING=2]="WARNING",S[S.INFO=3]="INFO",Jn;var S})();function qn(S){var v=S.requestOptions,O=S.tracingOptions,z=function(S,v){var O={};for(var H in S)Object.prototype.hasOwnProperty.call(S,H)&&v.indexOf(H)<0&&(O[H]=S[H]);if(null!=S&&"function"==typeof Object.getOwnPropertySymbols){var z=0;for(H=Object.getOwnPropertySymbols(S);z<H.length;z++)v.indexOf(H[z])<0&&Object.prototype.propertyIsEnumerable.call(S,H[z])&&(O[H[z]]=S[H[z]])}return O}(S,["requestOptions","tracingOptions"]);return v&&(z=l(l({},z),v)),O&&(z.spanOptions=O.spanOptions,z.tracingContext=O.tracingContext),z}var Fr=c(434),Nn=function(){function S(v,O){this._nextPolicy=v,this._options=O}return S.prototype.shouldLog=function(v){return this._options.shouldLog(v)},S.prototype.log=function(v,O){this._options.log(v,O)},S}(),sn=function(){function S(v){this._logger=v}return S.prototype.shouldLog=function(v){return!!this._logger&&v!==Jn.OFF&&v<=this._logger.minimumLogLevel},S.prototype.log=function(v,O){this._logger&&this.shouldLog(v)&&this._logger.log(v,O)},S}(),Vi=(0,c(1326).YR)("core-http");function Fo(S){return void 0===S&&(S={}),{create:function(v,O){return new Wc(v,O,S)}}}var Wc=function(S){function v(O,H,z){var X=void 0===z?{}:z,ue=X.logger,ve=void 0===ue?Vi.info:ue,Ae=X.allowedHeaderNames,we=void 0===Ae?[]:Ae,Me=X.allowedQueryParameters,_e=void 0===Me?[]:Me,Ge=S.call(this,O,H)||this;return Ge.logger=ve,Ge.sanitizer=new ys({allowedHeaderNames:we,allowedQueryParameters:_e}),Ge}return T(v,S),Object.defineProperty(v.prototype,"allowedHeaderNames",{get:function(){return this.sanitizer.allowedHeaderNames},set:function(O){this.sanitizer.allowedHeaderNames=O},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"allowedQueryParameters",{get:function(){return this.sanitizer.allowedQueryParameters},set:function(O){this.sanitizer.allowedQueryParameters=O},enumerable:!1,configurable:!0}),v.prototype.sendRequest=function(O){var H=this;return this.logger.enabled?(this.logRequest(O),this._nextPolicy.sendRequest(O).then(function(z){return H.logResponse(z)})):this._nextPolicy.sendRequest(O)},v.prototype.logRequest=function(O){this.logger("Request: "+this.sanitizer.sanitize(O))},v.prototype.logResponse=function(O){return this.logger("Response status code: "+O.status),this.logger("Headers: "+this.sanitizer.sanitize(O.headers)),O},v}(Nn);function Rt(S){return ia(S.parameterPath,S.mapper)}function ia(S,v){return"string"==typeof S?S:Array.isArray(S)?S.join("."):v.serializedName}if(!(self.document&&self.DOMParser&&self.Node&&self.XMLSerializer))throw new Error('This library depends on the following DOM objects: ["document", "DOMParser", "Node", "XMLSerializer"] to parse XML, but some of these are undefined. You may provide a polyfill to make these globally available in order to support your environment. For more information, please refer to https://aka.ms/azsdk/js/web-workers. ');var li,Ur=document.implementation.createDocument(null,null,null),$t=new DOMParser;function Kr(S,v){var O,H,z;void 0===v&&(v={});try{var X={rootName:null!==(O=v.rootName)&&void 0!==O?O:"",includeRoot:null!==(H=v.includeRoot)&&void 0!==H&&H,xmlCharKey:null!==(z=v.xmlCharKey)&&void 0!==z?z:Fe},ue=$t.parseFromString(S,"application/xml");!function(S){var v=S.getElementsByTagName("parsererror");if(v.length>0&&function(){var S;if(void 0===li)try{li=null!==(S=$t.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI)&&void 0!==S?S:""}catch(v){li=""}return li}())for(var O=0;O<v.length;O++)if(v[O].namespaceURI===li)throw new Error(v[O].innerHTML)}(ue);var ve;return ve=di(X.includeRoot?ue:ue.childNodes[0],X),Promise.resolve(ve)}catch(Ae){return Promise.reject(Ae)}}function di(S,v){var O={},H=S.childNodes.length,z=S.childNodes[0],X=z&&1===H&&z.nodeType===Node.TEXT_NODE&&z.nodeValue||void 0,ue=function(S){return function(S){return!!S.attributes}(S)&&S.hasAttributes()?S:void 0}(S);if(ue){O[De]={};for(var ve=0;ve<ue.attributes.length;ve++){var Ae=ue.attributes[ve];O[De][Ae.nodeName]=Ae.nodeValue}X&&(O[v.xmlCharKey]=X)}else 0===H?O="":X&&(O=X);if(!X)for(ve=0;ve<H;ve++){var we=S.childNodes[ve];if(we.nodeType!==Node.TEXT_NODE){var Me=di(we,v);O[we.nodeName]?Array.isArray(O[we.nodeName])?O[we.nodeName].push(Me):O[we.nodeName]=[O[we.nodeName],Me]:O[we.nodeName]=Me}}return O}var Bi=new XMLSerializer;function ji(S,v){var O,H,z;void 0===v&&(v={});var X={rootName:null!==(O=v.rootName)&&void 0!==O?O:"root",includeRoot:null!==(H=v.includeRoot)&&void 0!==H&&H,xmlCharKey:null!==(z=v.xmlCharKey)&&void 0!==z?z:Fe},ue=Uo(S,X.rootName,X)[0];return'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+Bi.serializeToString(ue)}function Eu(S){for(var v=[],O=0,H=Object.keys(S);O<H.length;O++){var z=H[O],X=Ur.createAttribute(z);X.value=S[z].toString(),v.push(X)}return v}function Uo(S,v,O){if(null==S||"string"==typeof S||"number"==typeof S||"boolean"==typeof S)return(H=Ur.createElement(v)).textContent=null==S?"":S.toString(),[H];if(Array.isArray(S)){for(var z=[],X=0,ue=S;X<ue.length;X++)for(var Ae=0,we=Uo(ue[X],v,O);Ae<we.length;Ae++)z.push(we[Ae]);return z}if("object"==typeof S){for(var H=Ur.createElement(v),_e=0,Ge=Object.keys(S);_e<Ge.length;_e++){var Qe=Ge[_e];if(Qe===De)for(var nt=0,ct=Eu(S[Qe]);nt<ct.length;nt++)H.attributes.setNamedItem(ct[nt]);else if(Qe===O.xmlCharKey)H.textContent=S[Qe].toString();else for(var it=0,yt=Uo(S[Qe],Qe,O);it<yt.length;it++)H.appendChild(yt[it])}return[H]}throw new Error("Illegal value passed to buildObject: "+S)}function Vo(S,v){return{create:function(O,H){return new hi(O,H,S,v)}}}var fi=["application/json","text/json"],Sr=["application/xml","application/atom+xml"],Bo={expectedContentTypes:{json:fi,xml:Sr}},hi=function(S){function v(O,H,z,X){void 0===X&&(X={});var ue,ve=S.call(this,O,H)||this;return ve.jsonContentTypes=z&&z.json||fi,ve.xmlContentTypes=z&&z.xml||Sr,ve.xmlCharKey=null!==(ue=X.xmlCharKey)&&void 0!==ue?ue:Fe,ve}return T(v,S),v.prototype.sendRequest=function(O){return g(this,void 0,void 0,function(){var H=this;return _(this,function(z){return[2,this._nextPolicy.sendRequest(O).then(function(X){return gn(H.jsonContentTypes,H.xmlContentTypes,X,{xmlCharKey:H.xmlCharKey})})]})})},v}(Nn);function gn(S,v,O,H){var z,X,ue;void 0===H&&(H={});var ve={rootName:null!==(z=H.rootName)&&void 0!==z?z:"",includeRoot:null!==(X=H.includeRoot)&&void 0!==X&&X,xmlCharKey:null!==(ue=H.xmlCharKey)&&void 0!==ue?ue:Fe};return function(S,v,O,H){var z,X=function(Me){var Qe=new rt('Error "'+Me+'" occurred while parsing the response body - '+O.bodyAsText+".",Me.code||rt.PARSE_ERROR,O.status,O.request,O);return Promise.reject(Qe)};if(!(null===(z=O.request.streamResponseStatusCodes)||void 0===z?void 0:z.has(O.status))&&!O.request.streamResponseBody&&O.bodyAsText){var ve=O.bodyAsText,Ae=O.headers.get("Content-Type")||"",we=Ae?Ae.split(";").map(function(Me){return Me.toLowerCase()}):[];if(0===we.length||we.some(function(Me){return-1!==S.indexOf(Me)}))return new Promise(function(Me){O.parsedBody=JSON.parse(ve),Me(O)}).catch(X);if(we.some(function(Me){return-1!==v.indexOf(Me)}))return Kr(ve,H).then(function(Me){return O.parsedBody=Me,O}).catch(X)}return Promise.resolve(O)}(S,v,O,ve).then(function(Ae){if(!function(S){var v=S.request.shouldDeserialize;return void 0===v||("boolean"==typeof v?v:v(S))}(Ae))return Ae;var we=Ae.request.operationSpec;if(!we||!we.responses)return Ae;var Me=function(S){var v,O=S.request,H=O.operationSpec;if(H){var z=O.operationResponseGetter;v=z?z(H,S):H.responses[S.status]}return v}(Ae),_e=function(S,v,O){var H,z=200<=S.status&&S.status<300;if(function(S){var v=Object.keys(S.responses);return 0===v.length||1===v.length&&"default"===v[0]}(v)?z:O){if(!O)return{error:null,shouldReturnResponse:!1};if(!O.isError)return{error:null,shouldReturnResponse:!1}}var ue=null!=O?O:v.responses.default,ve=(null===(H=S.request.streamResponseStatusCodes)||void 0===H?void 0:H.has(S.status))||S.request.streamResponseBody,we=new rt(ve?"Unexpected status code: "+S.status:S.bodyAsText,void 0,S.status,S.request,S);if(!ue)throw we;var Me=ue.bodyMapper,_e=ue.headersMapper;try{if(S.parsedBody){var Ge=S.parsedBody,Qe=void 0;if(Me){var nt=Ge;v.isXML&&Me.type.name===Li.Sequence&&(nt="object"==typeof Ge?Ge[Me.xmlElementName]:[]),Qe=v.serializer.deserialize(Me,nt,"error.response.parsedBody")}var ct=Ge.error||Qe||Ge;we.code=ct.code,ct.message&&(we.message=ct.message),Me&&(we.response.parsedBody=Qe)}S.headers&&_e&&(we.response.parsedHeaders=v.serializer.deserialize(_e,S.headers.rawHeaders(),"operationRes.parsedHeaders"))}catch(pt){we.message='Error "'+pt.message+'" occurred in deserializing the responseBody - "'+S.bodyAsText+'" for the default response.'}return{error:we,shouldReturnResponse:!1}}(Ae,we,Me),Ge=_e.error;if(Ge)throw Ge;if(_e.shouldReturnResponse)return Ae;if(Me){if(Me.bodyMapper){var nt=Ae.parsedBody;we.isXML&&Me.bodyMapper.type.name===Li.Sequence&&(nt="object"==typeof nt?nt[Me.bodyMapper.xmlElementName]:[]);try{Ae.parsedBody=we.serializer.deserialize(Me.bodyMapper,nt,"operationRes.parsedBody",H)}catch(pt){throw new rt("Error "+pt+" occurred in deserializing the responseBody - "+Ae.bodyAsText,void 0,Ae.status,Ae.request,Ae)}}else"HEAD"===we.httpMethod&&(Ae.parsedBody=O.status>=200&&O.status<300);Me.headersMapper&&(Ae.parsedHeaders=we.serializer.deserialize(Me.headersMapper,Ae.headers.rawHeaders(),"operationRes.parsedHeaders",H))}return Ae})}function Wt(S){return"number"==typeof S}function Yn(S,v,O,H,z){return!!v(H,z)&&O.retryCount<S}function Rr(S,v,O){void 0===v&&(v={retryCount:0,retryInterval:0}),O&&(v.error&&(O.innerError=v.error),v.error=O),v.retryCount++;var H=Math.pow(2,v.retryCount-1)-1,z=.8*S.retryInterval+Math.floor(Math.random()*(.4*S.retryInterval));return v.retryInterval=Math.min(S.minRetryInterval+(H*=z),S.maxRetryInterval),v}function bn(S,v,O){return{create:function(H,z){return new Hi(H,z,S,v,O)}}}var Dr=(()=>{return(S=Dr||(Dr={}))[S.Exponential=0]="Exponential",Dr;var S})(),hn={maxRetries:3,retryDelayInMs:3e4,maxRetryDelayInMs:9e4},Hi=function(S){function v(O,H,z,X,ue){var ve=S.call(this,O,H)||this;return ve.retryCount=Wt(z)?z:3,ve.retryInterval=Wt(X)?X:3e4,ve.maxRetryInterval=Wt(ue)?ue:9e4,ve}return T(v,S),v.prototype.sendRequest=function(O){var H=this;return this._nextPolicy.sendRequest(O.clone()).then(function(z){return Br(H,O,z)}).catch(function(z){return Br(H,O,z.response,void 0,z)})},v}(Nn);function Br(S,v,O,H,z){return g(this,void 0,void 0,function(){function X(Me){var _e=null==Me?void 0:Me.status;return!(void 0===_e||_e<500&&408!==_e||501===_e||505===_e)}var ue,ve,Ae;return _(this,function(Me){switch(Me.label){case 0:if(H=Rr({retryInterval:S.retryInterval,minRetryInterval:0,maxRetryInterval:S.maxRetryInterval},H,z),(ue=v.abortSignal&&v.abortSignal.aborted)||!Yn(S.retryCount,X,H,O))return[3,6];Vi.info("Retrying request in "+H.retryInterval),Me.label=1;case 1:return Me.trys.push([1,4,,5]),[4,ke(H.retryInterval)];case 2:return Me.sent(),[4,S._nextPolicy.sendRequest(v.clone())];case 3:return ve=Me.sent(),[2,Br(S,v,ve,H)];case 4:return Ae=Me.sent(),[2,Br(S,v,O,H,Ae)];case 5:return[3,7];case 6:if(ue||z||!O)throw H.error||new rt("Failed to send the request.",rt.REQUEST_SEND_ERROR,O&&O.status,O&&O.request,O);return[2,O];case 7:return[2]}})})}function bt(S){return void 0===S&&(S="x-ms-client-request-id"),{create:function(v,O){return new jo(v,O,S)}}}var jo=function(S){function v(O,H,z){var X=S.call(this,O,H)||this;return X._requestIdHeaderName=z,X}return T(v,S),v.prototype.sendRequest=function(O){return O.headers.contains(this._requestIdHeaderName)||O.headers.set(this._requestIdHeaderName,O.requestId),this._nextPolicy.sendRequest(O)},v}(Nn),pr={coreHttpVersion:"1.2.6",HTTP:"http:",HTTPS:"https:",HTTP_PROXY:"HTTP_PROXY",HTTPS_PROXY:"HTTPS_PROXY",NO_PROXY:"NO_PROXY",ALL_PROXY:"ALL_PROXY",HttpConstants:{HttpVerbs:{PUT:"PUT",GET:"GET",DELETE:"DELETE",POST:"POST",MERGE:"MERGE",HEAD:"HEAD",PATCH:"PATCH"},StatusCodes:{TooManyRequests:429}},HeaderConstants:{AUTHORIZATION:"authorization",AUTHORIZATION_SCHEME:"Bearer",RETRY_AFTER:"Retry-After",USER_AGENT:"User-Agent"}};var jr=function(){return"x-ms-useragent"};function Un(){var S=[{key:"core-http",value:pr.coreHttpVersion}],v=function(){var S=self.navigator;return[{key:"OS",value:(S.oscpu||S.platform).replace(" ","")}]}();return function(S,v,O){return void 0===v&&(v=" "),void 0===O&&(O="/"),S.map(function(H){return H.key+(H.value?""+O+H.value:"")}).join(v)}(S.concat(v))}function Yt(S){var v=S&&null!=S.key?S.key:"x-ms-useragent",O=S&&null!=S.value?S.value:Un();return{create:function(H,z){return new oa(H,z,v,O)}}}var oa=function(S){function v(O,H,z,X){var ue=S.call(this,O,H)||this;return ue._nextPolicy=O,ue._options=H,ue.headerKey=z,ue.headerValue=X,ue}return T(v,S),v.prototype.sendRequest=function(O){return this.addUserAgentHeader(O),this._nextPolicy.sendRequest(O)},v.prototype.addUserAgentHeader=function(O){O.headers||(O.headers=new d),!O.headers.get(this.headerKey)&&this.headerValue&&O.headers.set(this.headerKey,this.headerValue)},v}(Nn),Gi=["GET","HEAD"],$i={handleRedirects:!0,maxRetries:20};function Wi(S){return void 0===S&&(S=20),{create:function(v,O){return new gi(v,O,S)}}}var gi=function(S){function v(O,H,z){void 0===z&&(z=20);var X=S.call(this,O,H)||this;return X.maxRetries=z,X}return T(v,S),v.prototype.sendRequest=function(O){var H=this;return this._nextPolicy.sendRequest(O).then(function(z){return go(H,z,0)})},v}(Nn);function go(S,v,O){var H=v.request,z=v.status,X=v.headers.get("location");if(X&&(300===z||301===z&&Gi.includes(H.method)||302===z&&Gi.includes(H.method)||303===z&&"POST"===H.method||307===z)&&(!S.maxRetries||O<S.maxRetries)){var ue=ui.parse(H.url);return ue.setPath(X),H.url=ue.toString(),303===z&&(H.method="GET",delete H.body),S._nextPolicy.sendRequest(H).then(function(ve){return go(S,ve,O+1)})}return Promise.resolve(v)}var Dn=function(S){function v(O,H,z){void 0===z&&(z=30);var X=S.call(this,O,H)||this;return X._retryTimeout=z,X}return T(v,S),v.prototype.sendRequest=function(O){var H=this;return this._nextPolicy.sendRequest(O.clone()).then(function(z){return function(S,v,O){if(409===O.status){var H=function(S){var v,O;if(S){try{O=JSON.parse(S)}catch(z){}if(O&&O.error&&O.error.message&&O.error.code&&"MissingSubscriptionRegistration"===O.error.code){var H=O.error.message.match(/.*'(.*)'/i);H&&(v=H.pop())}}return v}(O.bodyAsText);if(H){var z=function(S){var O=S.match(/.*\/subscriptions\/[a-f0-9-]+\//gi);if(!O||!O[0])throw new Error("Unable to extract subscriptionId from the given url - "+S+".");return O[0]}(v.url);return function(S,v,O,H){var z=v+"providers/"+O+"/register?api-version=2016-02-01",X=v+"providers/"+O+"?api-version=2016-02-01",ue=gr(H);return ue.method="POST",ue.url=z,S._nextPolicy.sendRequest(ue).then(function(ve){if(200!==ve.status)throw new Error("Autoregistration of "+O+" failed. Please try registering manually.");return yo(S,X,H)})}(S,z,H,v).catch(function(){return!1}).then(function(X){return X?(v.headers.set("x-ms-client-request-id",je()),S._nextPolicy.sendRequest(v.clone())):O})}}return Promise.resolve(O)}(H,O,z)})},v}(Nn);function gr(S,v){void 0===v&&(v=!1);var O=S.clone();return v&&(O.url=S.url),O.headers.set("x-ms-client-request-id",je()),O.headers.set("Content-Type","application/json; charset=utf-8"),O}function yo(S,v,O){var H=gr(O);return H.url=v,H.method="GET",S._nextPolicy.sendRequest(H).then(function(z){var X=z.parsedBody;return!(!z.parsedBody||!X.registrationState||"Registered"!==X.registrationState)||ke(1e3*S._retryTimeout).then(function(){return yo(S,v,O)})})}var ur={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4};function aa(S,v){var O=function(S,v,O){var H=this,z=null,X=null,ue=l(l({},ur),O),ve={get isRefreshing(){return null!==z},get shouldRefresh(){var we;return!ve.isRefreshing&&(null!==(we=null==X?void 0:X.expiresOnTimestamp)&&void 0!==we?we:0)-ue.refreshWindowInMs<Date.now()},get mustRefresh(){return null===X||X.expiresOnTimestamp-ue.forcedRefreshWindowInMs<Date.now()}};function Ae(we){var Me;return ve.isRefreshing||(z=function(S,v,O){return g(this,void 0,void 0,function(){function H(){return g(this,void 0,void 0,function(){var ue;return _(this,function(ve){switch(ve.label){case 0:if(!(Date.now()<O))return[3,5];ve.label=1;case 1:return ve.trys.push([1,3,,4]),[4,S()];case 2:return[2,ve.sent()];case 3:return ve.sent(),[2,null];case 4:return[3,7];case 5:return[4,S()];case 6:if(null===(ue=ve.sent()))throw new Error("Failed to refresh access token.");return[2,ue];case 7:return[2]}})})}var z;return _(this,function(X){switch(X.label){case 0:return[4,H()];case 1:z=X.sent(),X.label=2;case 2:return null!==z?[3,5]:[4,ke(v)];case 3:return X.sent(),[4,H()];case 4:return z=X.sent(),[3,2];case 5:return[2,z]}})})}(function(){return S.getToken(v,we)},ue.retryIntervalInMs,null!==(Me=null==X?void 0:X.expiresOnTimestamp)&&void 0!==Me?Me:Date.now()).then(function(Ge){return z=null,X=Ge}).catch(function(Ge){throw z=null,X=null,Ge})),z}return function(we){return g(H,void 0,void 0,function(){return _(this,function(Me){return ve.mustRefresh?[2,Ae(we)]:(ve.shouldRefresh&&Ae(we),[2,X])})})}}(S,v),H=function(z){function X(ue,ve){return z.call(this,ue,ve)||this}return T(X,z),X.prototype.sendRequest=function(ue){return g(this,void 0,void 0,function(){var ve;return _(this,function(Ae){switch(Ae.label){case 0:return[4,O({abortSignal:ue.abortSignal,tracingOptions:{spanOptions:ue.spanOptions,tracingContext:ue.tracingContext}})];case 1:return ve=Ae.sent().token,ue.headers.set(pr.HeaderConstants.AUTHORIZATION,"Bearer "+ve),[2,this._nextPolicy.sendRequest(ue)]}})})},X}(Nn);return{create:function(z,X){return new H(z,X)}}}function _s(S,v,O,H){return{create:function(z,X){return new Kc(z,X,S,v,O,H)}}}var Kc=function(S){function v(O,H,z,X,ue,ve){var Ae=S.call(this,O,H)||this;return Ae.retryCount=Wt(z)?z:3,Ae.retryInterval=Wt(X)?X:3e4,Ae.minRetryInterval=Wt(ue)?ue:3e3,Ae.maxRetryInterval=Wt(ve)?ve:9e4,Ae}return T(v,S),v.prototype.sendRequest=function(O){var H=this;return this._nextPolicy.sendRequest(O.clone()).catch(function(z){return wu(H,O,z.response,z)})},v}(Nn);function wu(S,v,O,H,z){return g(this,void 0,void 0,function(){function X(ve,Ae){return!(!Ae||!Ae.code||"ETIMEDOUT"!==Ae.code&&"ESOCKETTIMEDOUT"!==Ae.code&&"ECONNREFUSED"!==Ae.code&&"ECONNRESET"!==Ae.code&&"ENOENT"!==Ae.code)}var ue;return _(this,function(ve){switch(ve.label){case 0:if(z=Rr(S,z,H),!Yn(S.retryCount,X,z,O,H))return[3,5];ve.label=1;case 1:return ve.trys.push([1,3,,4]),[4,ke(z.retryInterval)];case 2:return ve.sent(),[2,S._nextPolicy.sendRequest(v.clone())];case 3:return ue=ve.sent(),[2,wu(S,v,O,ue,z)];case 4:return[3,6];case 5:return H?[2,Promise.reject(z.error)]:[2,O];case 6:return[2]}})})}var Pr=(()=>{return(S=Pr||(Pr={})).Csv=",",S.Ssv=" ",S.Tsv="\t",S.Pipes="|",S.Multi="Multi",Pr;var S})(),qo=new Error("ProxyPolicy is not supported in browser environment");function Qc(S){}function ua(S){return{create:function(v,O){throw qo}}}!function(S){function v(O,H){throw S.call(this,O,H),qo}T(v,S),v.prototype.sendRequest=function(O){throw qo}}(Nn);var Jc=pr.HttpConstants.StatusCodes;function ca(){return{create:function(S,v){return new Yc(S,v)}}}var Yc=function(S){function v(O,H,z){var X=S.call(this,O,H)||this;return X._handleResponse=z||X._defaultResponseHandler,X}return T(v,S),v.prototype.sendRequest=function(O){return g(this,void 0,void 0,function(){var H=this;return _(this,function(z){return[2,this._nextPolicy.sendRequest(O.clone()).then(function(X){return X.status!==Jc.TooManyRequests?X:H._handleResponse(O,X)})]})})},v.prototype._defaultResponseHandler=function(O,H){return g(this,void 0,void 0,function(){var z,X,ue=this;return _(this,function(ve){return(z=H.headers.get(pr.HeaderConstants.RETRY_AFTER))&&(X=v.parseRetryAfterHeader(z))?[2,ke(X).then(function(Ae){return ue._nextPolicy.sendRequest(O)})]:[2,H]})})},v.parseRetryAfterHeader=function(O){var H=Number(O);return Number.isNaN(H)?v.parseDateRetryAfterHeader(O):1e3*H},v.parseDateRetryAfterHeader=function(O){try{var H=Date.now(),X=Date.parse(O)-H;return Number.isNaN(X)?void 0:X}catch(ue){return}},v}(Nn);function ws(S){return{create:function(v,O){return new Xc(v,O,S)}}}var Xc=function(S){function v(O,H,z){var X=S.call(this,O,H)||this;return X.authenticationProvider=z,X}return T(v,S),v.prototype.signRequest=function(O){return this.authenticationProvider.signRequest(O)},v.prototype.sendRequest=function(O){var H=this;return this.signRequest(O).then(function(z){return H._nextPolicy.sendRequest(z)})},v}(Nn),Iu={enable:!0};function la(S){return{create:function(v,O){return new zi(v,O,S||Iu)}}}var vi,Is,zi=function(S){function v(O,H,z){var X=S.call(this,O,H)||this;return X.keepAliveOptions=z,X}return T(v,S),v.prototype.sendRequest=function(O){return g(this,void 0,void 0,function(){return _(this,function(H){return O.keepAlive=this.keepAliveOptions.enable,[2,this._nextPolicy.sendRequest(O)]})})},v}(Nn),Go=function(){function S(){}return S.prototype.context=function(){return{spanId:"",traceId:"",traceFlags:0}},S.prototype.end=function(v){},S.prototype.setAttribute=function(v,O){return this},S.prototype.setAttributes=function(v){return this},S.prototype.addEvent=function(v,O){return this},S.prototype.setStatus=function(v){return this},S.prototype.updateName=function(v){return this},S.prototype.isRecording=function(){return!1},S.prototype.recordException=function(v,O){},S}(),Zc=function(){function S(){}return S.prototype.startSpan=function(v,O){return new Go},S.prototype.getCurrentSpan=function(){return new Go},S.prototype.withSpan=function(v,O){return O()},S.prototype.bind=function(v,O){return v},S}(),yi=Symbol.for("@azure/core-tracing.tracerCache3");function cn(){var S=(vi||function(){var S=self,v=S[yi],O=!0;if(v)if(4===v.version)vi=v;else if(O=!1,v.tracer)throw new Error("Two incompatible versions of @azure/core-tracing have been loaded.\n          This library is 4, existing is "+v.version+".");vi||(vi={tracer:void 0,version:4}),O&&(S[yi]=vi)}(),vi);return S.tracer?S.tracer:(Is||(Is=new Zc),Is)}var da=c(9803),Jr=(()=>{return(S=Jr||(Jr={}))[S.INTERNAL=0]="INTERNAL",S[S.SERVER=1]="SERVER",S[S.CLIENT=2]="CLIENT",S[S.PRODUCER=3]="PRODUCER",S[S.CONSUMER=4]="CONSUMER",Jr;var S})();function yr(S,v){return(0,da.setSpan)(S,v)}var Rs=da.context,vo=(()=>{return(S=vo||(vo={}))[S.UNSET=0]="UNSET",S[S.OK=1]="OK",S[S.ERROR=2]="ERROR",vo;var S})();function Qi(S){return function(v,O){var H=cn(),z=(null==O?void 0:O.tracingOptions)||{},X=l({kind:Jr.INTERNAL},z.spanOptions),ve=H.startSpan(S.packagePrefix?S.packagePrefix+"."+v:v,X,z.tracingContext);S.namespace&&ve.setAttribute("az.namespace",S.namespace);var Ae=z.spanOptions||{};ve.isRecording()&&S.namespace&&(Ae=l(l({},z.spanOptions),{attributes:l(l({},X.attributes),{"az.namespace":S.namespace})}));var we=l(l({},z),{spanOptions:Ae,tracingContext:yr(z.tracingContext||Rs.active(),ve)});return{span:ve,updatedOptions:l(l({},O),{tracingOptions:we})}}}var fa=Qi({packagePrefix:"",namespace:""});function Ds(S){return void 0===S&&(S={}),{create:function(v,O){return new vn(v,O,S)}}}var vn=function(S){function v(O,H,z){var X=S.call(this,O,H)||this;return X.userAgent=z.userAgent,X}return T(v,S),v.prototype.sendRequest=function(O){return g(this,void 0,void 0,function(){var H,z,X,ue,ve,Ae,we,Me;return _(this,function(_e){switch(_e.label){case 0:if(!O.tracingContext)return[2,this._nextPolicy.sendRequest(O)];H=ui.parse(O.url).getPath()||"/",(z=fa(H,{tracingOptions:{spanOptions:l(l({},O.spanOptions),{kind:Jr.CLIENT}),tracingContext:O.tracingContext}}).span).setAttributes({"http.method":O.method,"http.url":O.url,requestId:O.requestId}),this.userAgent&&z.setAttribute("http.user_agent",this.userAgent),_e.label=1;case 1:return _e.trys.push([1,3,4,5]),X=z.context(),(ue=function(S){var v=[];if(S.traceId||v.push("traceId"),S.spanId||v.push("spanId"),!v.length){var H=(S.traceFlags||0).toString(16);return"00-"+S.traceId+"-"+S.spanId+"-"+(1===H.length?"0"+H:H)}}(X))&&(O.headers.set("traceparent",ue),(ve=X.traceState&&X.traceState.serialize())&&O.headers.set("tracestate",ve)),[4,this._nextPolicy.sendRequest(O)];case 2:return Ae=_e.sent(),z.setAttribute("http.status_code",Ae.status),(we=Ae.headers.get("x-ms-request-id"))&&z.setAttribute("serviceRequestId",we),z.setStatus({code:vo.OK}),[2,Ae];case 3:throw Me=_e.sent(),z.setStatus({code:vo.ERROR,message:Me.message}),z.setAttribute("http.status_code",Me.statusCode),Me;case 4:return z.end(),[7];case 5:return[2]}})})},v}(Nn),Ps=new Error("DisableResponseDecompressionPolicy is not supported in browser environment");function ha(){return{create:function(S,v){throw Ps}}}!function(S){function v(O,H){throw S.call(this,O,H),Ps}T(v,S),v.prototype.sendRequest=function(O){return g(this,void 0,void 0,function(){return _(this,function(H){throw Ps})})}}(Nn);var Yr,As=function(S){function v(O,H){return S.call(this,O,H)||this}return T(v,S),v.prototype.sendRequest=function(O){return g(this,void 0,void 0,function(){var H;return _(this,function(z){return"string"==typeof O.body&&O.body.startsWith("[")&&(H=JSON.parse(O.body),Array.isArray(H)&&(O.body=H.map(function(X){return JSON.stringify(X)+"\n"}).join(""))),[2,this._nextPolicy.sendRequest(O)]})})},v}(Nn),$o=URL,pa=function(){function S(v,O){var z,Ae,we,Me;if(O||(O={}),this._withCredentials=O.withCredentials||!1,this._httpClient=O.httpClient||(Yr||(Yr=new po),Yr),this._requestPolicyOptions=new sn(O.httpPipelineLogger),Array.isArray(O.requestPolicyFactories))Vi.info("ServiceClient: using custom request policies"),z=O.requestPolicyFactories;else{var X=void 0;if((0,Fr.c)(v))Vi.info("ServiceClient: creating bearer token authentication policy from provided credentials"),Ae=void 0,we=this,Me=O,X={create:function(_e,Ge){var Qe=function(S,v){if(null==S?void 0:S.credentialScopes){var O=S.credentialScopes;return Array.isArray(O)?O.map(function(H){return new $o(H).toString()}):new $o(O).toString()}if(v)return v+"/.default"}(Me,we.baseUri);if(!Qe)throw new Error("When using credential, the ServiceClient must contain a baseUri or a credentialScopes in ServiceClientOptions. Unable to create a bearerTokenAuthenticationPolicy");return null==Ae&&(Ae=aa(v,Qe)),Ae.create(_e,Ge)}};else if(v&&"function"==typeof v.signRequest)Vi.info("ServiceClient: creating signing policy from provided credentials"),X=ws(v);else if(null!=v)throw new Error("The credentials argument must implement the TokenCredential interface");if(Vi.info("ServiceClient: using default request policies"),z=function(S,v){var O=[];v.generateClientRequestIdHeader&&O.push(bt(v.clientRequestIdHeaderName)),S&&O.push(S);var H=Ar(v.userAgentHeaderName,jr),z=Ar(v.userAgent,Un);return H&&z&&O.push(Yt({key:H,value:z})),O.push(Wi()),O.push(function(S){return void 0===S&&(S=30),{create:function(v,O){return new Dn(v,O,S)}}}(v.rpRegistrationRetryTimeout)),v.noRetryPolicy||(O.push(bn()),O.push(_s()),O.push(ca())),O.push(Vo(v.deserializationContentTypes)),Be&&O.push(ua()),O.push(Fo({logger:Vi.info})),O}(X,O),O.requestPolicyFactories){var ve=O.requestPolicyFactories(z);ve&&(z=ve)}}this._requestPolicyFactories=z}return S.prototype.sendRequest=function(v){if(null==v||"object"!=typeof v)throw new Error("options cannot be null or undefined and it must be of type object.");var O;try{!function(S){if(S&&"object"==typeof S){var v=S;if("string"==typeof v.url&&"string"==typeof v.method&&"object"==typeof v.headers&&E(v.headers)&&"function"==typeof v.validateRequestProperties&&"function"==typeof v.prepare&&"function"==typeof v.clone)return!0}return!1}(v)?O=(O=new fo).prepare(v):(v.validateRequestProperties(),O=v)}catch(X){return Promise.reject(X)}var H=this._httpClient;if(this._requestPolicyFactories&&this._requestPolicyFactories.length>0)for(var z=this._requestPolicyFactories.length-1;z>=0;--z)H=this._requestPolicyFactories[z].create(H,this._requestPolicyOptions);return H.sendRequest(O)},S.prototype.sendOperationRequest=function(v,O,H){var z;return g(this,void 0,void 0,function(){var X,ue,ve,Ae,we,Me,_e,Ge,Qe,nt,ct,pt,it,Gt,yt,ln,Sn,Pn,In,Tn,An,Zn,dn,Zt,Nt,Bt,zt,jt,an,er,vr;return _(this,function(Kt){switch(Kt.label){case 0:"function"==typeof v.options&&(H=v.options,v.options=void 0),X=null===(z=v.options)||void 0===z?void 0:z.serializerOptions,ue=new fo,Kt.label=1;case 1:if(Kt.trys.push([1,6,,7]),!(Ae=O.baseUrl||this.baseUri))throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a baseUri string property that contains the base URL to use.");if(ue.method=O.httpMethod,ue.operationSpec=O,we=ui.parse(Ae),O.path&&we.appendPath(O.path),O.urlParameters&&O.urlParameters.length>0)for(Me=0,_e=O.urlParameters;Me<_e.length;Me++)Qe=Co(this,v,Ge=_e[Me],O.serializer),Qe=O.serializer.serialize(Ge.mapper,Qe,Rt(Ge),X),Ge.skipEncoding||(Qe=encodeURIComponent(Qe)),we.replaceAll("{"+(Ge.mapper.serializedName||Rt(Ge))+"}",Qe);if(O.queryParameters&&O.queryParameters.length>0)for(nt=0,ct=O.queryParameters;nt<ct.length;nt++)if(null!=(it=Co(this,v,pt=ct[nt],O.serializer))){if(it=O.serializer.serialize(pt.mapper,it,Rt(pt),X),null!=pt.collectionFormat)if(pt.collectionFormat===Pr.Multi){if(0===it.length)continue;for(yt in it)it[yt]=null==(Gt=it[yt])?"":Gt.toString()}else(pt.collectionFormat===Pr.Ssv||pt.collectionFormat===Pr.Tsv)&&(it=it.join(pt.collectionFormat));if(!pt.skipEncoding)if(Array.isArray(it))for(yt in it)null!=it[yt]&&(it[yt]=encodeURIComponent(it[yt]));else it=encodeURIComponent(it);null!=pt.collectionFormat&&pt.collectionFormat!==Pr.Multi&&pt.collectionFormat!==Pr.Ssv&&pt.collectionFormat!==Pr.Tsv&&(it=it.join(pt.collectionFormat)),we.setQueryParameter(pt.mapper.serializedName||Rt(pt),it)}if(ue.url=we.toString(),(ln=O.contentType||this.requestContentType)&&O.requestBody&&ue.headers.set("Content-Type",ln),O.headerParameters)for(Sn=0,Pn=O.headerParameters;Sn<Pn.length;Sn++)if(null!=(Tn=Co(this,v,In=Pn[Sn],O.serializer)))if(Tn=O.serializer.serialize(In.mapper,Tn,Rt(In),X),An=In.mapper.headerCollectionPrefix)for(Zn=0,dn=Object.keys(Tn);Zn<dn.length;Zn++)ue.headers.set(An+(Zt=dn[Zn]),Tn[Zt]);else ue.headers.set(In.mapper.serializedName||Rt(In),Tn);if(Nt=v.options){if(Nt.customHeaders)for(Bt in Nt.customHeaders)ue.headers.set(Bt,Nt.customHeaders[Bt]);Nt.abortSignal&&(ue.abortSignal=Nt.abortSignal),Nt.timeout&&(ue.timeout=Nt.timeout),Nt.onUploadProgress&&(ue.onUploadProgress=Nt.onUploadProgress),Nt.onDownloadProgress&&(ue.onDownloadProgress=Nt.onDownloadProgress),Nt.spanOptions&&(ue.spanOptions=Nt.spanOptions),Nt.tracingContext&&(ue.tracingContext=Nt.tracingContext),null!=Nt.shouldDeserialize&&(ue.shouldDeserialize=Nt.shouldDeserialize)}ue.withCredentials=this._withCredentials,function(S,v,O,H){var z,X,ue,ve,Ae,we,Me=null!==(X=null===(z=O.options)||void 0===z?void 0:z.serializerOptions)&&void 0!==X?X:{},_e={rootName:null!==(ue=Me.rootName)&&void 0!==ue?ue:"",includeRoot:null!==(ve=Me.includeRoot)&&void 0!==ve&&ve,xmlCharKey:null!==(Ae=Me.xmlCharKey)&&void 0!==Ae?Ae:Fe},Ge=Me.xmlCharKey;if(H.requestBody&&H.requestBody.mapper){v.body=Co(S,O,H.requestBody,H.serializer);var Qe=H.requestBody.mapper,nt=Qe.required,ct=Qe.xmlName,pt=Qe.xmlElementName,it=Qe.serializedName,yt=Qe.xmlNamespace,Gt=Qe.xmlNamespacePrefix,ln=Qe.type.name;try{if(null!=v.body||nt){var Sn=Rt(H.requestBody);v.body=H.serializer.serialize(Qe,v.body,Sn,_e);var Pn=ln===Li.Stream;if(H.isXML){var In=Gt?"xmlns:"+Gt:"xmlns",Tn=function(S,v,O,H,z){var X;if(S&&!["Composite","Sequence","Dictionary"].includes(O)){var ue={};return ue[z.xmlCharKey]=H,ue[De]=((X={})[v]=S,X),ue}return H}(yt,In,ln,v.body,_e);ln===Li.Sequence?v.body=ji(function(S,v,O,H){var z,X,ue;if(Array.isArray(S)||(S=[S]),!O||!H)return(z={})[v]=S,z;var ve=((X={})[v]=S,X);return ve[De]=((ue={})[O]=H,ue),ve}(Tn,pt||ct||it,In,yt),{rootName:ct||it,xmlCharKey:Ge}):Pn||(v.body=ji(Tn,{rootName:ct||it,xmlCharKey:Ge}))}else{if(ln===Li.String&&((null===(we=H.contentType)||void 0===we?void 0:we.match("text/plain"))||"text"===H.mediaType))return;Pn||(v.body=JSON.stringify(v.body))}}}catch(Bt){throw new Error('Error "'+Bt.message+'" occurred in serializing the payload - '+JSON.stringify(it,void 0,"  ")+".")}}else if(H.formDataParameters&&H.formDataParameters.length>0){v.formData={};for(var An=0,Zn=H.formDataParameters;An<Zn.length;An++){var dn=Zn[An],Zt=Co(S,O,dn,H.serializer);if(null!=Zt){var Nt=dn.mapper.serializedName||Rt(dn);v.formData[Nt]=H.serializer.serialize(dn.mapper,Zt,Rt(dn),_e)}}}}(this,ue,v,O),void 0===ue.streamResponseStatusCodes&&(ue.streamResponseStatusCodes=function(S){var v=new Set;for(var O in S.responses){var H=S.responses[O];H.bodyMapper&&H.bodyMapper.type.name===Li.Stream&&v.add(Number(O))}return v}(O)),zt=void 0,jt=void 0,Kt.label=2;case 2:return Kt.trys.push([2,4,,5]),[4,this.sendRequest(ue)];case 3:return zt=Kt.sent(),[3,5];case 4:return an=Kt.sent(),jt=an,[3,5];case 5:return jt?(jt.response&&(jt.details=Pt(jt.response,O.responses[jt.statusCode]||O.responses.default)),ve=Promise.reject(jt)):ve=Promise.resolve(Pt(zt,O.responses[zt.status])),[3,7];case 6:return er=Kt.sent(),ve=Promise.reject(er),[3,7];case 7:return(vr=H)&&ve.then(function(kn){return vr(null,kn._response.parsedBody,kn._response.request,kn._response)}).catch(function(kn){return vr(kn)}),[2,ve]}})})},S}();function Ar(S,v){var O;return"string"==typeof S?O=S:(O=v(),"function"==typeof S&&(O=S(O))),O}function Ci(S,v){var O=[];S.sendStreamingJson&&O.push({create:function(S,v){return new As(S,v)}});var H=void 0;if(S.userAgentOptions&&S.userAgentOptions.userAgentPrefix){var z=[];z.push(S.userAgentOptions.userAgentPrefix);var X=Un();-1===z.indexOf(X)&&z.push(X),H=z.join(" ")}var ue=l(l({},Iu),S.keepAliveOptions),ve=l(l({},hn),S.retryOptions),Ae=l(l({},$i),S.redirectOptions);Be&&O.push(ua());var we=l(l({},Bo),S.deserializationOptions),Me=l({},S.loggingOptions);return O.push(Ds({userAgent:H}),la(ue),Yt({value:H}),bt(),Vo(we.expectedContentTypes),ca(),_s(),bn(ve.maxRetries,ve.retryDelayInMs,ve.maxRetryDelayInMs)),Ae.handleRedirects&&O.push(Wi(Ae.maxRetries)),v&&O.push(v),O.push(Fo(Me)),Be&&!1===S.decompressResponse&&O.push(ha()),{httpClient:S.httpClient,requestPolicyFactories:O}}function Co(S,v,O,H){return Os(S,v,O.parameterPath,O.mapper,H)}function Os(S,v,O,H,z){var X,ue;"string"==typeof O&&(O=[O]);var ve=null===(X=v.options)||void 0===X?void 0:X.serializerOptions;if(Array.isArray(O)){if(O.length>0){if(H.isConstant)ue=H.defaultValue;else{var Ae=ga(v,O);Ae.propertyFound||(Ae=ga(S,O));var we=!1;Ae.propertyFound||(we=H.required||"options"===O[0]&&2===O.length),ue=we?H.defaultValue:Ae.propertyValue}var Me=ia(O,H);z.serialize(H,ue,Me,ve)}}else for(var _e in H.required&&(ue={}),O){var Ge=H.type.modelProperties[_e],Qe=O[_e],nt=Os(S,v,Qe,Ge,z),ct=ia(Qe,Ge);z.serialize(Ge,nt,ct,ve),null!=nt&&(ue||(ue={}),ue[_e]=nt)}return ue}function ga(S,v){for(var O={propertyFound:!1},H=0;H<v.length;++H){var z=v[H];if(null==S||!(z in S))break;S=S[z]}return H===v.length&&(O.propertyValue=S,O.propertyFound=!0),O}function Pt(S,v){var O=S.parsedHeaders,H=v&&v.bodyMapper,z=function(nt){return Object.defineProperty(nt,"_response",{value:S})};if(H){var X=H.type.name;if("Stream"===X)return z(l(l({},O),{blobBody:S.blobBody,readableStreamBody:S.readableStreamBody}));var ue="Composite"===X&&H.type.modelProperties||{},ve=Object.keys(ue).some(function(nt){return""===ue[nt].serializedName});if("Sequence"===X||ve){for(var Ae=function(S,v,O){if(O||2===arguments.length)for(var X,H=0,z=v.length;H<z;H++)(X||!(H in v))&&(X||(X=Array.prototype.slice.call(v,0,H)),X[H]=v[H]);return S.concat(X||Array.prototype.slice.call(v))}([],S.parsedBody||[]),we=0,Me=Object.keys(ue);we<Me.length;we++)ue[_e=Me[we]].serializedName&&(Ae[_e]=S.parsedBody[_e]);if(O)for(var Ge=0,Qe=Object.keys(O);Ge<Qe.length;Ge++){var _e;Ae[_e=Qe[Ge]]=O[_e]}return z(Ae),Ae}if("Composite"===X||"Dictionary"===X)return z(l(l({},O),S.parsedBody))}return H||"HEAD"===S.request.method||function(S){return"object"!=typeof S&&"function"!=typeof S||null===S}(S.parsedBody)?z(l(l({},O),{body:S.parsedBody})):z(l(l({},O),S.parsedBody))}function tl(S){return Qi(S)}var qe=function(){function S(v){void 0===v&&(v=12e4),this.cachedToken=void 0,this.tokenRefreshBufferMs=v}return S.prototype.setCachedToken=function(v){this.cachedToken=v},S.prototype.getCachedToken=function(){return this.cachedToken&&Date.now()+this.tokenRefreshBufferMs>=this.cachedToken.expiresOnTimestamp&&(this.cachedToken=void 0),this.cachedToken},S}(),gt=function(){function S(v,O,H){void 0===H&&(H=3e4),this.credential=v,this.scopes=O,this.requiredMillisecondsBeforeNewRefresh=H,this.lastCalled=0}return S.prototype.isReady=function(){return!this.lastCalled||Date.now()-this.lastCalled>this.requiredMillisecondsBeforeNewRefresh},S.prototype.getToken=function(v){return g(this,void 0,void 0,function(){var O;return _(this,function(H){switch(H.label){case 0:return this.lastCalled=Date.now(),[4,this.credential.getToken(this.scopes,v)];case 1:return O=H.sent(),this.promise=void 0,[2,O||void 0]}})})},S.prototype.refresh=function(v){return this.promise||(this.promise=this.getToken(v)),this.promise},S}(),Hr=pr.HeaderConstants,Ms=function(){function S(v,O,H){if(void 0===H&&(H="Basic"),this.authorizationScheme="Basic",null==v||"string"!=typeof v.valueOf())throw new Error("userName cannot be null or undefined and must be of type string.");if(null==O||"string"!=typeof O.valueOf())throw new Error("password cannot be null or undefined and must be of type string.");this.userName=v,this.password=O,this.authorizationScheme=H}return S.prototype.signRequest=function(v){var H=this.authorizationScheme+" "+function(S){return btoa(S)}(this.userName+":"+this.password);return v.headers||(v.headers=new d),v.headers.set(Hr.AUTHORIZATION,H),Promise.resolve(v)},S}(),Yi=function(){function S(v){if(!v||v&&!v.inHeader&&!v.inQuery)throw new Error('options cannot be null or undefined. Either "inHeader" or "inQuery" property of the options object needs to be provided.');this.inHeader=v.inHeader,this.inQuery=v.inQuery}return S.prototype.signRequest=function(v){if(!v)return Promise.reject(new Error('webResource cannot be null or undefined and must be of type "object".'));if(this.inHeader)for(var O in v.headers||(v.headers=new d),this.inHeader)v.headers.set(O,this.inHeader[O]);if(this.inQuery){if(!v.url)return Promise.reject(new Error("url cannot be null in the request object."));for(var H in v.url.indexOf("?")<0&&(v.url+="?"),this.inQuery)v.url.endsWith("?")||(v.url+="&"),v.url+=H+"="+this.inQuery[H]}return Promise.resolve(v)},S}(),cr=function(S){function v(O){if(!O||O&&"string"!=typeof O)throw new Error("topicKey cannot be null or undefined and must be of type string.");return S.call(this,{inHeader:{"aeg-sas-key":O}})||this}return T(v,S),v}(Yi);c(3369)},7933:function(K,u,c){"use strict";var s=this&&this.__spreadArrays||function(){for(var C=0,P=0,w=arguments.length;P<w;P++)C+=arguments[P].length;var f=Array(C),g=0;for(P=0;P<w;P++)for(var _=arguments[P],b=0,m=_.length;b<m;b++,g++)f[g]=_[b];return f};Object.defineProperty(u,"__esModule",{value:!0}),u.ContextAPI=void 0;var E=c(6061),d=c(6315),p="context",T=new E.NoopContextManager,l=function(){function C(){}return C.getInstance=function(){return this._instance||(this._instance=new C),this._instance},C.prototype.setGlobalContextManager=function(P){return d.registerGlobal(p,P),P},C.prototype.active=function(){return this._getContextManager().active()},C.prototype.with=function(P,w,f){for(var g,_=[],b=3;b<arguments.length;b++)_[b-3]=arguments[b];return(g=this._getContextManager()).with.apply(g,s([P,w,f],_))},C.prototype.bind=function(P,w){return void 0===w&&(w=this.active()),this._getContextManager().bind(P,w)},C.prototype._getContextManager=function(){return d.getGlobal(p)||T},C.prototype.disable=function(){this._getContextManager().disable(),d.unregisterGlobal(p)},C}();u.ContextAPI=l},8866:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.DiagAPI=void 0;var s=c(6091),E=c(8645),d=c(6315),T=function(){function l(){function C(w){return function(){var f=d.getGlobal("diag");if(f)return f[w].apply(f,arguments)}}var P=this;P.setLogger=function(w,f){var g;if(void 0===f&&(f=E.DiagLogLevel.INFO),w!==P)d.registerGlobal("diag",s.createLogLevelDiagLogger(f,w),!0);else{var _=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");P.error(null!==(g=_.stack)&&void 0!==g?g:_.message)}},P.disable=function(){d.unregisterGlobal("diag")},P.verbose=C("verbose"),P.debug=C("debug"),P.info=C("info"),P.warn=C("warn"),P.error=C("error")}return l.instance=function(){return this._instance||(this._instance=new l),this._instance},l}();u.DiagAPI=T},3112:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.PropagationAPI=void 0;var s=c(8038),E=c(5486),d=c(6315),p="propagation",T=function(){function l(){}return l.getInstance=function(){return this._instance||(this._instance=new l),this._instance},l.prototype.setGlobalPropagator=function(C){return d.registerGlobal(p,C),C},l.prototype.inject=function(C,P,w){return void 0===w&&(w=E.defaultTextMapSetter),this._getGlobalPropagator().inject(C,P,w)},l.prototype.extract=function(C,P,w){return void 0===w&&(w=E.defaultTextMapGetter),this._getGlobalPropagator().extract(C,P,w)},l.prototype.fields=function(){return this._getGlobalPropagator().fields()},l.prototype.disable=function(){d.unregisterGlobal(p)},l.prototype._getGlobalPropagator=function(){return d.getGlobal(p)||s.NOOP_TEXT_MAP_PROPAGATOR},l}();u.PropagationAPI=T},2159:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.TraceAPI=void 0;var s=c(7619),E=c(3710),d=c(6315),p="trace",T=function(){function l(){this._proxyTracerProvider=new s.ProxyTracerProvider,this.isSpanContextValid=E.isSpanContextValid}return l.getInstance=function(){return this._instance||(this._instance=new l),this._instance},l.prototype.setGlobalTracerProvider=function(C){return this._proxyTracerProvider.setDelegate(C),d.registerGlobal(p,this._proxyTracerProvider),this._proxyTracerProvider},l.prototype.getTracerProvider=function(){return d.getGlobal(p)||this._proxyTracerProvider},l.prototype.getTracer=function(C,P){return this.getTracerProvider().getTracer(C,P)},l.prototype.disable=function(){d.unregisterGlobal(p),this._proxyTracerProvider=new s.ProxyTracerProvider},l}();u.TraceAPI=T},1511:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0})},5532:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0})},3523:function(K,u,c){"use strict";var s=this&&this.__createBinding||(Object.create?function(C,P,w,f){void 0===f&&(f=w),Object.defineProperty(C,f,{enumerable:!0,get:function(){return P[w]}})}:function(C,P,w,f){void 0===f&&(f=w),C[f]=P[w]}),E=this&&this.__exportStar||function(C,P){for(var w in C)"default"!==w&&!Object.prototype.hasOwnProperty.call(P,w)&&s(P,C,w)};Object.defineProperty(u,"__esModule",{value:!0}),u.baggageEntryMetadataFromString=u.createBaggage=void 0;var d=c(284),p=c(7181);E(c(1511),u),E(c(5532),u),u.createBaggage=function(C){return void 0===C&&(C={}),new d.BaggageImpl(new Map(Object.entries(C)))},u.baggageEntryMetadataFromString=function(C){return"string"!=typeof C&&(C=""),{__TYPE__:p.baggageEntryMetadataSymbol,toString:function(){return C}}}},284:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.BaggageImpl=void 0;var c=function(){function s(E){this._entries=E?new Map(E):new Map}return s.prototype.getEntry=function(E){var d=this._entries.get(E);if(d)return Object.assign({},d)},s.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(E){return[E[0],E[1]]})},s.prototype.setEntry=function(E,d){var p=new s(this._entries);return p._entries.set(E,d),p},s.prototype.removeEntry=function(E){var d=new s(this._entries);return d._entries.delete(E),d},s.prototype.removeEntries=function(){for(var E=[],d=0;d<arguments.length;d++)E[d]=arguments[d];for(var p=new s(this._entries),T=0,l=E;T<l.length;T++){var C=l[T];p._entries.delete(C)}return p},s.prototype.clear=function(){return new s},s}();u.BaggageImpl=c},7181:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.baggageEntryMetadataSymbol=void 0,u.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},1070:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0})},4904:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0})},6061:function(K,u,c){"use strict";var s=this&&this.__spreadArrays||function(){for(var p=0,T=0,l=arguments.length;T<l;T++)p+=arguments[T].length;var C=Array(p),P=0;for(T=0;T<l;T++)for(var w=arguments[T],f=0,g=w.length;f<g;f++,P++)C[P]=w[f];return C};Object.defineProperty(u,"__esModule",{value:!0}),u.NoopContextManager=void 0;var E=c(4874),d=function(){function p(){}return p.prototype.active=function(){return E.ROOT_CONTEXT},p.prototype.with=function(T,l,C){for(var P=[],w=3;w<arguments.length;w++)P[w-3]=arguments[w];return l.call.apply(l,s([C],P))},p.prototype.bind=function(T,l){return T},p.prototype.enable=function(){return this},p.prototype.disable=function(){return this},p}();u.NoopContextManager=d},4874:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.ROOT_CONTEXT=u.createContextKey=u.setBaggage=u.getBaggage=u.isInstrumentationSuppressed=u.unsuppressInstrumentation=u.suppressInstrumentation=u.getSpanContext=u.setSpanContext=u.setSpan=u.getSpan=void 0;var s=c(5575),E=m("OpenTelemetry Context Key SPAN"),d=m("OpenTelemetry Context Key SUPPRESS_INSTRUMENTATION"),p=m("OpenTelemetry Baggage Key");function T(x){return x.getValue(E)||void 0}function l(x,k){return x.setValue(E,k)}function m(x){return Symbol.for(x)}u.getSpan=T,u.setSpan=l,u.setSpanContext=function(x,k){return l(x,new s.NoopSpan(k))},u.getSpanContext=function(x){var k;return null===(k=T(x))||void 0===k?void 0:k.context()},u.suppressInstrumentation=function(x){return x.setValue(d,!0)},u.unsuppressInstrumentation=function(x){return x.setValue(d,!1)},u.isInstrumentationSuppressed=function(x){return Boolean(x.getValue(d))},u.getBaggage=function(x){return x.getValue(p)||void 0},u.setBaggage=function(x,k){return x.setValue(p,k)},u.createContextKey=m,u.ROOT_CONTEXT=new function x(k){var F=this;F._currentContext=k?new Map(k):new Map,F.getValue=function(U){return F._currentContext.get(U)},F.setValue=function(U,N){var R=new x(F._currentContext);return R._currentContext.set(U,N),R},F.deleteValue=function(U){var N=new x(F._currentContext);return N._currentContext.delete(U),N}}},9611:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0})},1866:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.DiagConsoleLogger=void 0;var c=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];u.DiagConsoleLogger=function(){function d(T){return function(){var l=arguments;if(console){var C=console[T];if("function"!=typeof C&&(C=console.log),"function"==typeof C)return C.apply(console,l)}}}for(var p=0;p<c.length;p++)this[c[p].n]=d(c[p].c)}},2663:function(K,u,c){"use strict";var s=this&&this.__createBinding||(Object.create?function(d,p,T,l){void 0===l&&(l=T),Object.defineProperty(d,l,{enumerable:!0,get:function(){return p[T]}})}:function(d,p,T,l){void 0===l&&(l=T),d[l]=p[T]}),E=this&&this.__exportStar||function(d,p){for(var T in d)"default"!==T&&!Object.prototype.hasOwnProperty.call(p,T)&&s(p,d,T)};Object.defineProperty(u,"__esModule",{value:!0}),E(c(1866),u),E(c(8645),u)},6091:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.createLogLevelDiagLogger=void 0;var s=c(8645);u.createLogLevelDiagLogger=function(d,p){function T(l,C){var P=p[l];return"function"==typeof P&&d>=C?P.bind(p):function(){}}return d<s.DiagLogLevel.NONE?d=s.DiagLogLevel.NONE:d>s.DiagLogLevel.ALL&&(d=s.DiagLogLevel.ALL),p=p||{},{error:T("error",s.DiagLogLevel.ERROR),warn:T("warn",s.DiagLogLevel.WARN),info:T("info",s.DiagLogLevel.INFO),debug:T("debug",s.DiagLogLevel.DEBUG),verbose:T("verbose",s.DiagLogLevel.VERBOSE)}}},8645:(K,u)=>{"use strict";var s;Object.defineProperty(u,"__esModule",{value:!0}),u.DiagLogLevel=void 0,(s=u.DiagLogLevel||(u.DiagLogLevel={}))[s.NONE=0]="NONE",s[s.ERROR=30]="ERROR",s[s.WARN=50]="WARN",s[s.INFO=60]="INFO",s[s.DEBUG=70]="DEBUG",s[s.VERBOSE=80]="VERBOSE",s[s.ALL=9999]="ALL"},9803:function(K,u,c){"use strict";var s=this&&this.__createBinding||(Object.create?function(P,w,f,g){void 0===g&&(g=f),Object.defineProperty(P,g,{enumerable:!0,get:function(){return w[f]}})}:function(P,w,f,g){void 0===g&&(g=f),P[g]=w[f]}),E=this&&this.__exportStar||function(P,w){for(var f in P)"default"!==f&&!Object.prototype.hasOwnProperty.call(w,f)&&s(w,P,f)};Object.defineProperty(u,"__esModule",{value:!0}),u.diag=u.propagation=u.trace=u.context=u.isValidSpanId=u.isValidTraceId=u.isSpanContextValid=u.INVALID_SPAN_CONTEXT=u.INVALID_TRACEID=u.INVALID_SPANID=void 0,E(c(3523),u),E(c(1070),u),E(c(4904),u),E(c(2663),u),E(c(8038),u),E(c(5486),u),E(c(1595),u),E(c(608),u),E(c(1987),u),E(c(282),u),E(c(1391),u),E(c(7215),u),E(c(670),u),E(c(7619),u),E(c(9094),u),E(c(2415),u),E(c(5815),u),E(c(9293),u),E(c(997),u),E(c(8700),u),E(c(3788),u),E(c(1189),u),E(c(7034),u),E(c(8757),u),E(c(3606),u),E(c(3426),u);var d=c(3710);Object.defineProperty(u,"INVALID_SPANID",{enumerable:!0,get:function(){return d.INVALID_SPANID}}),Object.defineProperty(u,"INVALID_TRACEID",{enumerable:!0,get:function(){return d.INVALID_TRACEID}}),Object.defineProperty(u,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return d.INVALID_SPAN_CONTEXT}}),Object.defineProperty(u,"isSpanContextValid",{enumerable:!0,get:function(){return d.isSpanContextValid}}),Object.defineProperty(u,"isValidTraceId",{enumerable:!0,get:function(){return d.isValidTraceId}}),Object.defineProperty(u,"isValidSpanId",{enumerable:!0,get:function(){return d.isValidSpanId}}),E(c(4874),u),E(c(6061),u),E(c(9611),u);var p=c(7933);u.context=p.ContextAPI.getInstance();var T=c(2159);u.trace=T.TraceAPI.getInstance();var l=c(3112);u.propagation=l.PropagationAPI.getInstance();var C=c(8866);u.diag=C.DiagAPI.instance(),u.default={trace:u.trace,context:u.context,propagation:u.propagation,diag:u.diag}},6315:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.unregisterGlobal=u.getGlobal=u.registerGlobal=void 0;var s=c(9803),E=c(7426),d=c(4288),p=c(600),T=d.VERSION.split(".")[0],l=Symbol.for("io.opentelemetry.js.api."+T),C=E._globalThis;u.registerGlobal=function(g,_,b){var m;void 0===b&&(b=!1),C[l]=null!==(m=C[l])&&void 0!==m?m:{version:d.VERSION};var I=C[l];if(b||!I[g])I.version===d.VERSION?I[g]=_:(x=new Error("@opentelemetry/api: All API registration versions must match"),s.diag.error(x.stack||x.message));else{var x=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+g);s.diag.error(x.stack||x.message)}},u.getGlobal=function(g){var _,b,m=null===(_=C[l])||void 0===_?void 0:_.version;if(m&&p.isCompatible(m))return null===(b=C[l])||void 0===b?void 0:b[g]},u.unregisterGlobal=function(g){var _=C[l];_&&delete _[g]}},600:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.isCompatible=u._makeCompatibilityCheck=void 0;var s=c(4288),E=/^(\d+)\.(\d+)\.(\d+)(?:-(.*))?$/;function d(p){var T=new Set([p]),l=new Set,C=p.match(E);if(!C)return function(){return!1};var P_major=+C[1],P_minor=+C[2],P_patch=+C[3];function w(g){return l.add(g),!1}function f(g){return T.add(g),!0}return function(_){if(T.has(_))return!0;if(l.has(_))return!1;var b=_.match(E);if(!b)return w(_);var m_minor=+b[2],m_patch=+b[3];return P_major!==+b[1]?w(_):0===P_major?P_minor===m_minor&&P_patch<=m_patch?f(_):w(_):P_minor<=m_minor?f(_):w(_)}}u._makeCompatibilityCheck=d,u.isCompatible=d(s.VERSION)},1775:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u._globalThis=void 0,u._globalThis="object"==typeof globalThis?globalThis:window},7426:function(K,u,c){"use strict";var s=this&&this.__createBinding||(Object.create?function(d,p,T,l){void 0===l&&(l=T),Object.defineProperty(d,l,{enumerable:!0,get:function(){return p[T]}})}:function(d,p,T,l){void 0===l&&(l=T),d[l]=p[T]}),E=this&&this.__exportStar||function(d,p){for(var T in d)"default"!==T&&!Object.prototype.hasOwnProperty.call(p,T)&&s(p,d,T)};Object.defineProperty(u,"__esModule",{value:!0}),E(c(1775),u)},8038:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.NOOP_TEXT_MAP_PROPAGATOR=u.NoopTextMapPropagator=void 0;var c=function(){function s(){}return s.prototype.inject=function(E,d){},s.prototype.extract=function(E,d){return E},s.prototype.fields=function(){return[]},s}();u.NoopTextMapPropagator=c,u.NOOP_TEXT_MAP_PROPAGATOR=new c},5486:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.defaultTextMapSetter=u.defaultTextMapGetter=void 0,u.defaultTextMapGetter={get:function(c,s){if(null!=c)return c[s]},keys:function(c){return null==c?[]:Object.keys(c)}},u.defaultTextMapSetter={set:function(c,s,E){null!=c&&(c[s]=E)}}},608:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0})},5575:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.NoopSpan=void 0;var s=c(3710),E=function(){function d(p){void 0===p&&(p=s.INVALID_SPAN_CONTEXT),this._spanContext=p}return d.prototype.context=function(){return this._spanContext},d.prototype.setAttribute=function(p,T){return this},d.prototype.setAttributes=function(p){return this},d.prototype.addEvent=function(p,T){return this},d.prototype.setStatus=function(p){return this},d.prototype.updateName=function(p){return this},d.prototype.end=function(p){},d.prototype.isRecording=function(){return!1},d.prototype.recordException=function(p,T){},d}();u.NoopSpan=E},1391:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.NOOP_TRACER=u.NoopTracer=void 0;var s=c(4874),E=c(5575),d=c(3710),p=function(){function l(){}return l.prototype.startSpan=function(C,P,w){if(Boolean(null==P?void 0:P.root))return new E.NoopSpan;var g=w&&s.getSpanContext(w);return function(l){return"object"==typeof l&&"string"==typeof l.spanId&&"string"==typeof l.traceId&&"number"==typeof l.traceFlags}(g)&&d.isSpanContextValid(g)?new E.NoopSpan(g):new E.NoopSpan},l}();u.NoopTracer=p,u.NOOP_TRACER=new p},7215:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.NOOP_TRACER_PROVIDER=u.NoopTracerProvider=void 0;var s=c(1391),E=function(){function d(){}return d.prototype.getTracer=function(p,T){return s.NOOP_TRACER},d}();u.NoopTracerProvider=E,u.NOOP_TRACER_PROVIDER=new E},670:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.ProxyTracer=void 0;var s=c(1391),E=function(){function d(p,T,l){this._provider=p,this.name=T,this.version=l}return d.prototype.startSpan=function(p,T,l){return this._getTracer().startSpan(p,T,l)},d.prototype._getTracer=function(){if(this._delegate)return this._delegate;var p=this._provider.getDelegateTracer(this.name,this.version);return p?(this._delegate=p,this._delegate):s.NOOP_TRACER},d}();u.ProxyTracer=E},7619:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.ProxyTracerProvider=void 0;var s=c(670),E=c(7215),d=function(){function p(){}return p.prototype.getTracer=function(T,l){var C;return null!==(C=this.getDelegateTracer(T,l))&&void 0!==C?C:new s.ProxyTracer(this,T,l)},p.prototype.getDelegate=function(){var T;return null!==(T=this._delegate)&&void 0!==T?T:E.NOOP_TRACER_PROVIDER},p.prototype.setDelegate=function(T){this._delegate=T},p.prototype.getDelegateTracer=function(T,l){var C;return null===(C=this._delegate)||void 0===C?void 0:C.getTracer(T,l)},p}();u.ProxyTracerProvider=d},9094:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0})},2415:(K,u)=>{"use strict";var s;Object.defineProperty(u,"__esModule",{value:!0}),u.SamplingDecision=void 0,(s=u.SamplingDecision||(u.SamplingDecision={}))[s.NOT_RECORD=0]="NOT_RECORD",s[s.RECORD=1]="RECORD",s[s.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"},8700:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0})},1189:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0})},1595:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0})},282:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0})},1987:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0})},997:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0})},5815:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0})},9293:(K,u)=>{"use strict";var s;Object.defineProperty(u,"__esModule",{value:!0}),u.SpanKind=void 0,(s=u.SpanKind||(u.SpanKind={}))[s.INTERNAL=0]="INTERNAL",s[s.SERVER=1]="SERVER",s[s.CLIENT=2]="CLIENT",s[s.PRODUCER=3]="PRODUCER",s[s.CONSUMER=4]="CONSUMER"},3710:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.isSpanContextValid=u.isValidSpanId=u.isValidTraceId=u.INVALID_SPAN_CONTEXT=u.INVALID_TRACEID=u.INVALID_SPANID=void 0;var s=c(7034),E=/^([0-9a-f]{32})$/i,d=/^[0-9a-f]{16}$/i;function p(C){return E.test(C)&&C!==u.INVALID_TRACEID}function T(C){return d.test(C)&&C!==u.INVALID_SPANID}u.INVALID_SPANID="0000000000000000",u.INVALID_TRACEID="00000000000000000000000000000000",u.INVALID_SPAN_CONTEXT={traceId:u.INVALID_TRACEID,spanId:u.INVALID_SPANID,traceFlags:s.TraceFlags.NONE},u.isValidTraceId=p,u.isValidSpanId=T,u.isSpanContextValid=function(C){return p(C.traceId)&&T(C.spanId)}},3788:(K,u)=>{"use strict";var s;Object.defineProperty(u,"__esModule",{value:!0}),u.SpanStatusCode=void 0,(s=u.SpanStatusCode||(u.SpanStatusCode={}))[s.UNSET=0]="UNSET",s[s.OK=1]="OK",s[s.ERROR=2]="ERROR"},7034:(K,u)=>{"use strict";var s;Object.defineProperty(u,"__esModule",{value:!0}),u.TraceFlags=void 0,(s=u.TraceFlags||(u.TraceFlags={}))[s.NONE=0]="NONE",s[s.SAMPLED=1]="SAMPLED"},8757:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0})},3426:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0})},3606:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0})},4288:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.VERSION=void 0,u.VERSION="1.0.0-rc.0"},3369:()=>{"use strict";(void 0===typeof Symbol||!Symbol.asyncIterator)&&(Symbol.asyncIterator=Symbol.for("Symbol.asyncIterator"))},434:(K,u,c)=>{"use strict";function s(E){return E&&"function"==typeof E.getToken&&(void 0===E.signRequest||E.getToken.length>0)}c.d(u,{c:()=>s})},6354:(K,u,c)=>{"use strict";c.d(u,{v:()=>w});var s=c(8239),E=c(1126),d=c(8006),p=c(969);const T={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4};function C(){return(C=(0,s.Z)(function*(f,g,_){function b(){return m.apply(this,arguments)}function m(){return(m=(0,s.Z)(function*(){if(!(Date.now()<_)){const x=yield f();if(null===x)throw new Error("Failed to refresh access token.");return x}try{return yield f()}catch(x){return null}})).apply(this,arguments)}let I=yield b();for(;null===I;)yield(0,p.g)(g),I=yield b();return I})).apply(this,arguments)}function w(f,g){const _=function(f,g,_){let b=null,m=null;const I=Object.assign(Object.assign({},T),_),x={get isRefreshing(){return null!==b},get shouldRefresh(){var F;return!x.isRefreshing&&(null!==(F=null==m?void 0:m.expiresOnTimestamp)&&void 0!==F?F:0)-I.refreshWindowInMs<Date.now()},get mustRefresh(){return null===m||m.expiresOnTimestamp-I.forcedRefreshWindowInMs<Date.now()}};function k(F){var U;return x.isRefreshing||(b=function(f,g,_){return C.apply(this,arguments)}(()=>f.getToken(g,F),I.retryIntervalInMs,null!==(U=null==m?void 0:m.expiresOnTimestamp)&&void 0!==U?U:Date.now()).then(R=>(b=null,m=R,m)).catch(R=>{throw b=null,m=null,R})),b}return function(){var F=(0,s.Z)(function*(U){return x.mustRefresh?k(U):(x.shouldRefresh&&k(U),m)});return function(U){return F.apply(this,arguments)}}()}(f,g);class b extends E.U{constructor(I,x){super(I,x)}sendRequest(I){var x=this;return(0,s.Z)(function*(){if(!I.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");const{token:k}=yield _({abortSignal:I.abortSignal,tracingOptions:{tracingContext:I.tracingContext}});return I.headers.set(d.g.HeaderConstants.AUTHORIZATION,`Bearer ${k}`),x._nextPolicy.sendRequest(I)})()}}return{create:(m,I)=>new b(m,I)}}},1126:(K,u,c)=>{"use strict";c.d(u,{U:()=>E,_:()=>d});var s=(()=>{return(p=s||(s={}))[p.OFF=0]="OFF",p[p.ERROR=1]="ERROR",p[p.WARNING=2]="WARNING",p[p.INFO=3]="INFO",s;var p})();class E{constructor(T,l){this._nextPolicy=T,this._options=l}shouldLog(T){return this._options.shouldLog(T)}log(T,l){this._options.log(T,l)}}class d{constructor(T){this._logger=T}shouldLog(T){return!!this._logger&&T!==s.OFF&&T<=this._logger.minimumLogLevel}log(T,l){this._logger&&this.shouldLog(T)&&this._logger.log(T,l)}}},369:(K,u,c)=>{"use strict";c.d(u,{$4:()=>E,UK:()=>d});var s=c(7694);class E{constructor(){this._rawQuery={}}any(){return Object.keys(this._rawQuery).length>0}keys(){return Object.keys(this._rawQuery)}set(M,j){const W=j;if(M)if(null!=W){const $=Array.isArray(W)?W:W.toString();this._rawQuery[M]=$}else delete this._rawQuery[M]}get(M){return M?this._rawQuery[M]:void 0}toString(){let M="";for(const j in this._rawQuery){M&&(M+="&");const W=this._rawQuery[j];if(Array.isArray(W)){const $=[];for(const ce of W)$.push(`${j}=${ce}`);M+=$.join("&")}else M+=`${j}=${W}`}return M}static parse(M){const j=new E;if(M){M.startsWith("?")&&(M=M.substring(1));let W="ParameterName",$="",ce="";for(let Q=0;Q<M.length;++Q){const te=M[Q];switch(W){case"ParameterName":switch(te){case"=":W="ParameterValue";break;case"&":$="",ce="";break;default:$+=te}break;case"ParameterValue":switch(te){case"&":j.set($,ce),$="",ce="",W="ParameterName";break;default:ce+=te}break;default:throw new Error("Unrecognized URLQuery parse state: "+W)}}"ParameterValue"===W&&j.set($,ce)}return j}}class d{setScheme(M){M?this.set(M,"SCHEME"):this._scheme=void 0}getScheme(){return this._scheme}setHost(M){M?this.set(M,"SCHEME_OR_HOST"):this._host=void 0}getHost(){return this._host}setPort(M){null==M||""===M?this._port=void 0:this.set(M.toString(),"PORT")}getPort(){return this._port}setPath(M){if(M){const j=M.indexOf("://");if(-1!==j){const W=M.lastIndexOf("/",j);this.set(-1===W?M:M.substr(W+1),"SCHEME")}else this.set(M,"PATH")}else this._path=void 0}appendPath(M){if(M){let j=this.getPath();j&&(j.endsWith("/")||(j+="/"),M.startsWith("/")&&(M=M.substring(1)),M=j+M),this.set(M,"PATH")}}getPath(){return this._path}setQuery(M){this._query=M?E.parse(M):void 0}setQueryParameter(M,j){M&&(this._query||(this._query=new E),this._query.set(M,j))}getQueryParameterValue(M){return this._query?this._query.get(M):void 0}getQuery(){return this._query?this._query.toString():void 0}set(M,j){const W=new l(M,j);for(;W.next();){const $=W.current();let ce;if($)switch($.type){case"SCHEME":this._scheme=$.text||void 0;break;case"HOST":this._host=$.text||void 0;break;case"PORT":this._port=$.text||void 0;break;case"PATH":ce=$.text||void 0,(!this._path||"/"===this._path||"/"!==ce)&&(this._path=ce);break;case"QUERY":this._query=E.parse($.text);break;default:throw new Error(`Unrecognized URLTokenType: ${$.type}`)}}}toString(){let M="";return this._scheme&&(M+=`${this._scheme}://`),this._host&&(M+=this._host),this._port&&(M+=`:${this._port}`),this._path&&(this._path.startsWith("/")||(M+="/"),M+=this._path),this._query&&this._query.any()&&(M+=`?${this._query.toString()}`),M}replaceAll(M,j){M&&(this.setScheme((0,s.ko)(this.getScheme(),M,j)),this.setHost((0,s.ko)(this.getHost(),M,j)),this.setPort((0,s.ko)(this.getPort(),M,j)),this.setPath((0,s.ko)(this.getPath(),M,j)),this.setQuery((0,s.ko)(this.getQuery(),M,j)))}static parse(M){const j=new d;return j.set(M,"SCHEME_OR_HOST"),j}}class p{constructor(M,j){this.text=M,this.type=j}static scheme(M){return new p(M,"SCHEME")}static host(M){return new p(M,"HOST")}static port(M){return new p(M,"PORT")}static path(M){return new p(M,"PATH")}static query(M){return new p(M,"QUERY")}}class l{constructor(M,j){this._text=M,this._textLength=M?M.length:0,this._currentState=null!=j?j:"SCHEME_OR_HOST",this._currentIndex=0}current(){return this._currentToken}next(){if(P(this))switch(this._currentState){case"SCHEME":!function(R){const M=function(R){return _(R,M=>function(R){const M=R.charCodeAt(0);return 48<=M&&M<=57||65<=M&&M<=90||97<=M&&M<=122}(M))}(R);R._currentToken=p.scheme(M),R._currentState=P(R)?"HOST":"DONE"}(this);break;case"SCHEME_OR_HOST":!function(R){const M=m(R,":","/","?");P(R)?":"===w(R)?"://"===g(R,3)?(R._currentToken=p.scheme(M),R._currentState="HOST"):(R._currentToken=p.host(M),R._currentState="PORT"):(R._currentToken=p.host(M),R._currentState="/"===w(R)?"PATH":"QUERY"):(R._currentToken=p.host(M),R._currentState="DONE")}(this);break;case"HOST":!function(R){"://"===g(R,3)&&f(R,3);const M=m(R,":","/","?");R._currentToken=p.host(M),R._currentState=P(R)?":"===w(R)?"PORT":"/"===w(R)?"PATH":"QUERY":"DONE"}(this);break;case"PORT":!function(R){":"===w(R)&&f(R);const M=m(R,"/","?");R._currentToken=p.port(M),R._currentState=P(R)?"/"===w(R)?"PATH":"QUERY":"DONE"}(this);break;case"PATH":!function(R){const M=m(R,"?");R._currentToken=p.path(M),R._currentState=P(R)?"QUERY":"DONE"}(this);break;case"QUERY":!function(R){"?"===w(R)&&f(R);const M=function(R){let M="";return R._currentIndex<R._textLength&&(M=R._text.substring(R._currentIndex),R._currentIndex=R._textLength),M}(R);R._currentToken=p.query(M),R._currentState="DONE"}(this);break;default:throw new Error(`Unrecognized URLTokenizerState: ${this._currentState}`)}else this._currentToken=void 0;return!!this._currentToken}}function P(R){return R._currentIndex<R._textLength}function w(R){return R._text[R._currentIndex]}function f(R,M){P(R)&&(M||(M=1),R._currentIndex+=M)}function g(R,M){let j=R._currentIndex+M;return R._textLength<j&&(j=R._textLength),R._text.substring(R._currentIndex,j)}function _(R,M){let j="";for(;P(R);){const W=w(R);if(!M(W))break;j+=W,f(R)}return j}function m(R,...M){return _(R,j=>-1===M.indexOf(j))}},8006:(K,u,c)=>{"use strict";c.d(u,{g:()=>s});const s={coreHttpVersion:"2.2.2",HTTP:"http:",HTTPS:"https:",HTTP_PROXY:"HTTP_PROXY",HTTPS_PROXY:"HTTPS_PROXY",NO_PROXY:"NO_PROXY",ALL_PROXY:"ALL_PROXY",HttpConstants:{HttpVerbs:{PUT:"PUT",GET:"GET",DELETE:"DELETE",POST:"POST",MERGE:"MERGE",HEAD:"HEAD",PATCH:"PATCH"},StatusCodes:{TooManyRequests:429,ServiceUnavailable:503}},HeaderConstants:{AUTHORIZATION:"authorization",AUTHORIZATION_SCHEME:"Bearer",RETRY_AFTER:"Retry-After",USER_AGENT:"User-Agent"}}},969:(K,u,c)=>{"use strict";c.d(u,{g:()=>p});var E=c(4637);function p(T,l,C){return new Promise((P,w)=>{let f,g;const _=()=>w(new E._((null==C?void 0:C.abortErrorMsg)?null==C?void 0:C.abortErrorMsg:"The operation was aborted.")),b=()=>{(null==C?void 0:C.abortSignal)&&g&&C.abortSignal.removeEventListener("abort",g)};if(g=()=>(function(T){return null!=T}(f)&&clearTimeout(f),b(),_()),(null==C?void 0:C.abortSignal)&&C.abortSignal.aborted)return _();f=setTimeout(()=>{b(),P(l)},T),(null==C?void 0:C.abortSignal)&&C.abortSignal.addEventListener("abort",g)})}},4510:(K,u,c)=>{"use strict";c.d(u,{c:()=>s,I:()=>E});const s="$",E="_"},7694:(K,u,c)=>{"use strict";c.d(u,{Rl:()=>R,_9:()=>te,UG:()=>I,Kn:()=>oe,ty:()=>he,TP:()=>N,WQ:()=>$,ko:()=>ae});var s,E=new Uint8Array(16);function d(){if(!s&&!(s="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s(E)}const p=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,l=function(ne){return"string"==typeof ne&&p.test(ne)};for(var C=[],P=0;P<256;++P)C.push((P+256).toString(16).substr(1));const _=function(ne,pe,re){var J=(ne=ne||{}).random||(ne.rng||d)();if(J[6]=15&J[6]|64,J[8]=63&J[8]|128,pe){re=re||0;for(var se=0;se<16;++se)pe[re+se]=J[se];return pe}return function(ne){var pe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,re=(C[ne[pe+0]]+C[ne[pe+1]]+C[ne[pe+2]]+C[ne[pe+3]]+"-"+C[ne[pe+4]]+C[ne[pe+5]]+"-"+C[ne[pe+6]]+C[ne[pe+7]]+"-"+C[ne[pe+8]]+C[ne[pe+9]]+"-"+C[ne[pe+10]]+C[ne[pe+11]]+C[ne[pe+12]]+C[ne[pe+13]]+C[ne[pe+14]]+C[ne[pe+15]]).toLowerCase();if(!l(re))throw TypeError("Stringified UUID is invalid");return re}(J)};var b=c(4510);const m=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i,I="undefined"!=typeof process&&!!process.version&&!!process.versions&&!!process.versions.node;function N(ne){return m.test(ne)}function R(){return _()}function $(ne,pe,re,J){if(Array.isArray(ne)||(ne=[ne]),!re||!J)return{[pe]:ne};const se={[pe]:ne};return se[b.c]={[re]:J},se}const Q=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function te(ne){return Q.test(ne)}function ae(ne,pe,re){return ne&&pe?ne.split(pe).join(re||""):ne}function he(ne){return"object"!=typeof ne&&"function"!=typeof ne||null===ne}function oe(ne){return!("object"!=typeof ne||null===ne||Array.isArray(ne)||ne instanceof RegExp||ne instanceof Date)}},1326:(K,u,c)=>{"use strict";c.d(u,{YR:()=>j});const E="undefined"!=typeof process&&process.env&&process.env.DEBUG||void 0;let d,p=[],T=[];const l=[];E&&P(E);const C=Object.assign(te=>g(te),{enable:P,enabled:w,disable:function(){const te=d||"";return P(""),te},log:function(...te){if(te.length>0){const ae=String(te[0]);ae.includes(":error")?console.error(...te):ae.includes(":warning")?console.warn(...te):ae.includes(":info")?console.info(...te):(ae.includes(":verbose"),console.debug(...te))}}});function P(te){d=te,p=[],T=[];const ae=/\*/g,he=te.split(",").map(Se=>Se.trim().replace(ae,".*?"));for(const Se of he)Se.startsWith("-")?T.push(new RegExp(`^${Se.substr(1)}$`)):p.push(new RegExp(`^${Se}$`));for(const Se of l)Se.enabled=w(Se.namespace)}function w(te){if(te.endsWith("*"))return!0;for(const ae of T)if(ae.test(te))return!1;for(const ae of p)if(ae.test(te))return!0;return!1}function g(te){const ae=Object.assign(function(...Se){!ae.enabled||(Se.length>0&&(Se[0]=`${te} ${Se[0]}`),ae.log(...Se))},{enabled:w(te),destroy:_,log:C.log,namespace:te,extend:b});return l.push(ae),ae}function _(){const te=l.indexOf(this);return te>=0&&(l.splice(te,1),!0)}function b(te){const ae=g(`${this.namespace}:${te}`);return ae.log=this.log,ae}const m=C,I=new Set,x="undefined"!=typeof process&&process.env&&process.env.AZURE_LOG_LEVEL||void 0;let k;const F=m("azure");F.log=(...te)=>{m.log(...te)};const U=["verbose","info","warning","error"];x&&(Q(x)?function(te){if(te&&!Q(te))throw new Error(`Unknown log level '${te}'. Acceptable values: ${U.join(",")}`);k=te;const ae=[];for(const he of I)ce(he)&&ae.push(he.namespace);m.enable(ae.join(","))}(x):console.error(`AZURE_LOG_LEVEL set to unknown log level '${x}'; logging is not enabled. Acceptable values: ${U.join(", ")}.`));const M={verbose:400,info:300,warning:200,error:100};function j(te){const ae=F.extend(te);return W(F,ae),{error:$(ae,"error"),warning:$(ae,"warning"),info:$(ae,"info"),verbose:$(ae,"verbose")}}function W(te,ae){ae.log=(...he)=>{te.log(...he)}}function $(te,ae){const he=Object.assign(te.extend(ae),{level:ae});if(W(te,he),ce(he)){const Se=m.disable();m.enable(Se+","+he.namespace)}return I.add(he),he}function ce(te){return!!(k&&M[te.level]<=M[k])}function Q(te){return U.includes(te)}},5413:(K,u,c)=>{"use strict";var s=c(1127);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var E=s(c(8884)),d=s(c(1819)),p=c(2e3),T=function l(){(0,E.default)(this,l)};u.default=T,(0,d.default)(T,"requiredOmnichannelConfigurationParameters",["orgUrl","orgId","widgetId"]),(0,d.default)(T,"defaultHeaders",{"Content-Type":"application/json"}),(0,d.default)(T,"bypassCacheHeaders",{"cache-control":"no-store, must-revalidate, no-cache"}),(0,d.default)(T,"defaultChannelId",p.ChannelId.LCW),(0,d.default)(T,"defaultLocale","en-us"),(0,d.default)(T,"noContentStatusCode",204),(0,d.default)(T,"sensitiveProperties",["AuthenticatedUserToken"]),(0,d.default)(T,"transactionid","transaction-id"),(0,d.default)(T,"customerDisplayName","customerDisplayName")},2e3:(K,u)=>{"use strict";var c,C,s,E,d,p,T,l;Object.defineProperty(u,"__esModule",{value:!0}),u.LiveChatVersion=u.OCSDKTelemetryEvent=u.ChannelId=u.OperatingSystem=u.DeviceType=u.Browser=u.BrowserVendor=void 0,u.BrowserVendor=c,(C=c||(u.BrowserVendor=c={})).IE="IE",C.CHROME="Chrome",C.FIREFOX="Firefox",C.SAFARI="Safari",C.EDGE="Edge",C.EDGE_CHROMIUM="Edg",C.OPERA="Opera",C.UNKNOWN="Unknown",u.Browser=s,function(C){C[C.Chrome=0]="Chrome",C[C.Firefox=1]="Firefox",C[C.Ie=2]="Ie",C[C.Edge=3]="Edge",C[C.Safari=4]="Safari",C[C.None=5]="None"}(s||(u.Browser=s={})),u.DeviceType=E,function(C){C.Desktop="Desktop",C.Mobile="Mobile",C.Tablet="Tablet"}(E||(u.DeviceType=E={})),u.OperatingSystem=d,function(C){C.WINDOWS="Windows",C.MACOSX="Mac OS X",C.WINDOWS_PHONE="Windows Phone",C.WINDOWS_RT="Windows RT",C.IOS="iOS",C.ANDROID="Android",C.LINUX="Linux",C.UNKNOWN="Unknown"}(d||(u.OperatingSystem=d={})),u.ChannelId=p,function(C){C.LCW="lcw",C.SMS="sms",C.FACEBOOK="facebook",C.WECHAT="wechat"}(p||(u.ChannelId=p={})),u.OCSDKTelemetryEvent=T,function(C){C.GETCHATCONFIG="GetChatConfig",C.GETCHATCONFIGSUCCESS="GetChatConfigSucceeded",C.GETRECONNECTABLECHATS="GetReconnnectableChats",C.GETRECONNECTAVAILABILITY="GetReconnnectableAvailability",C.GETCHATTOKENSTARTED="GetChatTokenStarted",C.GETCHATTOKENSUCCEEDED="GetChatTokenSucceeded",C.GETCHATTOKENFAILED="GetChatTokenFailed",C.GETLWISTATUSSTARTED="GetLwiStatusStarted",C.GETLWISTATUSSUCCEEDED="GetLwiStatusSucceeded",C.GETLWISTATUSFAILED="GetLwiStatusFailed",C.SESSIONINITSTARTED="SessionInitStarted",C.SESSIONINITSUCCEEDED="SessionInitSucceeded",C.SESSIONINITFAILED="SessionInitFailed",C.SESSIONCLOSESTARTED="SessionCloseStarted",C.SESSIONCLOSESUCCEEDED="SessionCloseSucceeded",C.SESSIONCLOSEFAILED="SessionCloseFailed",C.SUBMITPOSTCHATSTARTED="SubmitPostChatStarted",C.SUBMITPOSTCHATSUCCEEDED="SubmitPostChatSucceeded",C.SUBMITPOSTCHATFAILED="SubmitPostChatFailed",C.GETCHATTRANSCRIPTSTARTED="GetChatTranscriptStarted",C.GETCHATTRANSCRIPTSUCCEEDED="GetChatTranscriptSucceeded",C.GETCHATTRANSCRIPTFAILED="GetChatTranscriptFailed",C.EMAILTRANSCRIPTSTARTED="EmailTranscriptStarted",C.EMAILTRANSCRIPTSUCCEEDED="EmailTranscriptSucceeded",C.EMAILTRANSCRIPTFAILED="EmailTranscriptFailed",C.FETCHDATAMASKINGSTARTED="FetchDataMaskingStarted",C.FETCHDATAMASKINGSUCCEEDED="FetchDataMaskingSucceeded",C.FETCHDATAMASKINGFAILED="FetchDataMaskingFailed",C.SECONDARYCHANNELEVENTREQUESTSTARTED="SecondaryChannelEventRequestStarted",C.SECONDARYCHANNELEVENTREQUESTSUCCEEDED="SecondaryChannelEventRequestSucceeded",C.SECONDARYCHANNELEVENTREQUESTFAILED="SecondaryChannelEventRequestFailed",C.GETSURVEYINVITELINKSTARTED="GetSurveyInviteLinkStarted",C.GETSURVEYINVITELINKSUCCEEDED="GetSurveyInviteLinkSucceeded",C.GETSURVEYINVITELINKFAILED="GetSurveyInviteLinkFailed",C.VALIDATEAUTHCHATRECORDSTARTED="ValidateAuthChatRecordStarted",C.VALIDATEAUTHCHATRECORDSUCCEEDED="ValidateAuthChatRecordSucceeded",C.VALIDATEAUTHCHATRECORDFAILED="ValidateAuthChatRecordFailed",C.GETQUEUEAVAILABILITYSTARTED="GetQueueAvailabilityStarted",C.GETQUEUEAVAILABILITYSUCCEEDED="GetQueueAvailabilitySucceeded",C.GETQUEUEAVAILABILITYFAILED="GetQueueAvailabilityFailed",C.SENDTYPINGINDICATORFAILED="SendTypingIndicatorFailed",C.SENDTYPINGINDICATORSUCCEEDED="SendTypingIndicatorSucceeded"}(T||(u.OCSDKTelemetryEvent=T={})),u.LiveChatVersion=l,function(C){C[C.V1=1]="V1",C[C.V2=2]="V2"}(l||(u.LiveChatVersion=l={}))},3096:(K,u,c)=>{"use strict";var s=c(1127);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var E=s(c(8884)),d=s(c(2805));u.default=function(){function T(){(0,E.default)(this,T)}return(0,d.default)(T,null,[{key:"OCSDKLOAD",get:function(){return"oc:sdk:load"}}]),T}()},4950:(K,u,c)=>{"use strict";var s=c(1127);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var E=s(c(8884)),d=s(c(1819)),p=function T(){(0,E.default)(this,T)};u.default=p,(0,d.default)(p,"supportedLocales",["ar-sa","bg-bg","ca-es","cs-cz","da-dk","de-de","el-gr","en-us","es-es","et-ee","eu-es","fi-fi","fr-fr","gl-es","he-il","hi-in","hr-hr","hu-hu","id-id","it-it","ja-jp","kk-kz","ko-kr","lt-lt","lv-lv","ms-my","nb-no","nl-nl","pl-pl","pt-br","pt-pt","ro-ro","ru-ru","sk-sk","sl-si","sr-cyrl-cs","sr-latn-cs","sv-se","th-th","tr-tr","uk-ua","vi-vn","zh-cn","zh-hk","zh-tw"])},4162:(K,u,c)=>{"use strict";var s=c(1127);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var E=s(c(8884)),d=s(c(2805)),p=s(c(1819)),T=s(c(7276));u.default=function(){function C(P){(0,E.default)(this,C),(0,p.default)(this,"logger",void 0),this.logger=P}return(0,d.default)(C,[{key:"log",value:function(w,f,g,_){if(this.isLoggingEnabled()){var b=T.default.GETTELEMETRYEVENTDATA(f,g,_);this.logEvent(w,b)}}},{key:"logEvent",value:function(w,f){this.isLoggingEnabled()&&setTimeout(this.logger.logClientSdkTelemetryEvent.bind(this.logger),0,w,f)}},{key:"isLoggingEnabled",value:function(){return!this.isNullOrUndefined(this.logger)}},{key:"isNullOrUndefined",value:function(w){return null==w}}]),C}()},2172:(K,u,c)=>{"use strict";var s=c(1127);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var E=s(c(8884)),d=s(c(1819)),p=function T(){(0,E.default)(this,T)};u.default=p,(0,d.default)(p,"LiveChatConfigPath","livechatconnector/config"),(0,d.default)(p,"LiveChatSessionInitPath","livechatconnector/sessioninit"),(0,d.default)(p,"LiveChatAuthSessionInitPath","livechatconnector/auth/sessioninit"),(0,d.default)(p,"LiveChatGetChatTokenPath","livechatconnector/getchattoken"),(0,d.default)(p,"LiveChatv2GetChatTokenPath","livechatconnector/v2/getchattoken"),(0,d.default)(p,"LiveChatAuthGetChatTokenPath","livechatconnector/auth/getchattoken"),(0,d.default)(p,"LiveChatv2AuthGetChatTokenPath","livechatconnector/v2/auth/getchattoken"),(0,d.default)(p,"LiveChatSessionClosePath","livechatconnector/sessionclose"),(0,d.default)(p,"LiveChatAuthSessionClosePath","livechatconnector/auth/sessionclose"),(0,d.default)(p,"LiveChatSubmitPostChatPath","survey/submitpostchat"),(0,d.default)(p,"LiveChatAuthSubmitPostChatPath","survey/auth/submitpostchat"),(0,d.default)(p,"LiveChatGetSurveyInviteLinkPath","livechatconnector/getsurveyinvite"),(0,d.default)(p,"LiveChatAuthGetSurveyInviteLinkPath","livechatconnector/auth/getsurveyinvite"),(0,d.default)(p,"LiveChatGetChatTranscriptPath","livechatconnector/getchattranscripts"),(0,d.default)(p,"LiveChatv2GetChatTranscriptPath","livechatconnector/v2/getchattranscripts"),(0,d.default)(p,"LiveChatAuthGetChatTranscriptPath","livechatconnector/auth/getchattranscripts"),(0,d.default)(p,"LiveChatv2AuthGetChatTranscriptPath","livechatconnector/v2/auth/getchattranscripts"),(0,d.default)(p,"LiveChatTranscriptEmailRequestPath","livechatconnector/createemailrequest"),(0,d.default)(p,"LiveChatAuthTranscriptEmailRequestPath","livechatconnector/auth/createemailrequest"),(0,d.default)(p,"LiveChatFetchDataMaskingInfoPath","livechatconnector/fetchdatamaskinginfo"),(0,d.default)(p,"LiveChatSecondaryChannelEventPath","livechatconnector/secondarychannelevent"),(0,d.default)(p,"LiveChatAuthSecondaryChannelEventPath","livechatconnector/auth/secondarychannelevent"),(0,d.default)(p,"LiveChatLiveWorkItemDetailsPath","livechatconnector/getliveworkitemdetails"),(0,d.default)(p,"LiveChatAuthLiveWorkItemDetailsPath","livechatconnector/auth/getliveworkitemdetails"),(0,d.default)(p,"LiveChatGetReconnectableChatsPath","livechatconnector/auth/reconnectablechats"),(0,d.default)(p,"LiveChatReconnectAvailabilityPath","livechatconnector/reconnect"),(0,d.default)(p,"LiveChatValidateAuthChatMapRecordPath","livechatconnector/auth/validateauthchatmaprecord"),(0,d.default)(p,"GetQueueAvailabilityPath","livechatconnector/auth/getqueueavailability"),(0,d.default)(p,"SendTypingIndicatorPath","inbound/typingindicator/livechat/sendtypingindicator")},1858:(K,u,c)=>{"use strict";var s=c(1127);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var E=s(c(8884)),d=s(c(1819)),p=function T(){(0,E.default)(this,T)};u.default=p,(0,d.default)(p,"authenticatedUserToken","AuthenticatedUserToken"),(0,d.default)(p,"authorization","Authorization"),(0,d.default)(p,"organizationId","OrganizationId"),(0,d.default)(p,"widgetAppId","widgetAppId"),(0,d.default)(p,"requestId","Request-Id")},6528:(K,u)=>{"use strict";var c,s;Object.defineProperty(u,"__esModule",{value:!0}),u.LogLevel=void 0,u.LogLevel=c,(s=c||(u.LogLevel=c={})).INFO="INFO",s.DEBUG="DEBUG",s.WARN="WARN",s.ERROR="ERROR"},8634:(K,u,c)=>{"use strict";var s=c(1127);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var E=s(c(6533)),d=s(c(1907)),p=s(c(1298)),T=s(c(8884)),l=s(c(2805)),C=s(c(1819)),P=c(2e3),w=s(c(8686)),f=c(4717),g=s(c(5413)),_=c(6812),b=s(c(4950)),m=c(9569),I=c(6528),x=c(7169),k=s(c(2172)),F=s(c(1858)),U=c(3945),N=s(c(1729)),R=c(8566);function M(te,ae){var he=Object.keys(te);if(Object.getOwnPropertySymbols){var Se=Object.getOwnPropertySymbols(te);ae&&(Se=Se.filter(function(oe){return Object.getOwnPropertyDescriptor(te,oe).enumerable})),he.push.apply(he,Se)}return he}function j(te){for(var ae=1;ae<arguments.length;ae++){var he=null!=arguments[ae]?arguments[ae]:{};ae%2?M(Object(he),!0).forEach(function(Se){(0,C.default)(te,Se,he[Se])}):Object.getOwnPropertyDescriptors?Object.defineProperties(te,Object.getOwnPropertyDescriptors(he)):M(Object(he)).forEach(function(Se){Object.defineProperty(te,Se,Object.getOwnPropertyDescriptor(he,Se))})}return te}function W(te,ae){var he="undefined"!=typeof Symbol&&te[Symbol.iterator]||te["@@iterator"];if(!he){if(Array.isArray(te)||(he=function(te,ae){if(te){if("string"==typeof te)return ce(te,undefined);var he=Object.prototype.toString.call(te).slice(8,-1);if("Object"===he&&te.constructor&&(he=te.constructor.name),"Map"===he||"Set"===he)return Array.from(te);if("Arguments"===he||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(he))return ce(te,undefined)}}(te))||ae&&te&&"number"==typeof te.length){he&&(te=he);var Se=0,oe=function(){};return{s:oe,n:function(){return Se>=te.length?{done:!0}:{done:!1,value:te[Se++]}},e:function(se){throw se},f:oe}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var re,ne=!0,pe=!1;return{s:function(){he=he.call(te)},n:function(){var se=he.next();return ne=se.done,se},e:function(se){pe=!0,re=se},f:function(){try{!ne&&null!=he.return&&he.return()}finally{if(pe)throw re}}}}function ce(te,ae){(null==ae||ae>te.length)&&(ae=te.length);for(var he=0,Se=new Array(ae);he<ae;he++)Se[he]=te[he];return Se}var Q=function(){function te(ae){var he=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.defaultConfiguration,Se=arguments.length>2?arguments[2]:void 0;(0,T.default)(this,te),this.omnichannelConfiguration=ae,this.configuration=he,this.logger=Se,(0,C.default)(this,"liveChatVersion",void 0),(!Object.keys(this.configuration).length||"object"!==(0,p.default)(he))&&(this.configuration=te.defaultConfiguration);for(var oe=0,ne=Object.keys(te.defaultConfiguration);oe<ne.length;oe++){var pe=ne[oe];if(!this.configuration.hasOwnProperty(pe))throw new Error("Missing '".concat(pe,"' in SDKConfiguration"))}var re=ae.channelId;if(!Object.values(P.ChannelId).includes(re))throw new Error("Invalid channelId");var me,J=Object.keys(ae),se=W(g.default.requiredOmnichannelConfigurationParameters);try{for(se.s();!(me=se.n()).done;){var ee=me.value;if(!J.includes(ee))throw new Error("Missing '".concat(ee,"' in OmnichannelConfiguration"))}}catch(le){se.e(le)}finally{se.f()}this.liveChatVersion=P.LiveChatVersion.V1}return(0,l.default)(te,[{key:"getChatConfig",value:(ae=(0,d.default)(E.default.mark(function Se(oe){var ne,pe,re,J,se,me,ee,le,Ce=arguments;return E.default.wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return ne=Ce.length>1&&void 0!==Ce[1]&&Ce[1],pe=U.Timer.TIMER(),this.logger&&this.logger.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.GETCHATCONFIG,{RequestId:oe},"Get Chat Config Started"),oe||(oe=(0,R.uuidv4)()),re="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(k.default.LiveChatConfigPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"?requestId=").concat(oe,"&channelId=").concat(this.omnichannelConfiguration.channelId),J=w.default.create(),(0,N.default)(J,{retries:this.configuration.maxRequestRetriesOnFailure}),se={},ne&&(se=j(j({},g.default.bypassCacheHeaders),se)),ge.next=11,J.get(re,{headers:se});case 11:return ee=pe.milliSecondsElapsed,(le=(me=ge.sent).data).LiveChatVersion&&le.LiveChatVersion===P.LiveChatVersion.V2&&(this.liveChatVersion=le.LiveChatVersion),le.headers={},me.headers&&me.headers.date&&(le.headers.date=me.headers.date),this.logger&&this.logger.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.GETCHATCONFIGSUCCESS,{RequestId:oe,Region:me.data.Region,ElapsedTimeInMilliseconds:ee,TransactionId:me.headers["transaction-id"]},"Get Chat config succeeded"),ge.abrupt("return",le);case 19:case"end":return ge.stop()}},Se,this)})),function(Se){return ae.apply(this,arguments)})},{key:"getLWIDetails",value:function(){var ae=(0,d.default)(E.default.mark(function Se(oe){var pe,re,J,se,me,ee,le,Ce,ne=this,ye=arguments;return E.default.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return pe=ye.length>1&&void 0!==ye[1]?ye[1]:{},re=U.Timer.TIMER(),this.logger&&this.logger.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.GETLWISTATUSSTARTED,{RequestId:oe},"Get LWI Details Started"),oe||(oe=(0,R.uuidv4)()),J="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(k.default.LiveChatLiveWorkItemDetailsPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(oe),se=w.default.create(),(0,N.default)(se,{retries:this.configuration.maxRequestRetriesOnFailure}),ee=pe.reconnectId,le=g.default.defaultHeaders,(me=pe.authenticatedUserToken)&&(J="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(k.default.LiveChatAuthLiveWorkItemDetailsPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(oe),le[F.default.authenticatedUserToken]=me),ee&&(J+="/".concat(ee)),J+="?channelId=".concat(this.omnichannelConfiguration.channelId),Ce={headers:le,method:"GET",url:J},Ee.abrupt("return",new Promise(function(){var De=(0,d.default)(E.default.mark(function Fe(Ie,Be){var He,Ve,$e,Je;return E.default.wrap(function(je){for(;;)switch(je.prev=je.next){case 0:return je.prev=0,je.next=3,se(Ce);case 3:Ve=re.milliSecondsElapsed,$e=(He=je.sent).data,ne.logger&&ne.logger.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.GETLWISTATUSSUCCEEDED,{RequestId:oe,Region:He.data.Region,ElapsedTimeInMilliseconds:Ve,TransactionId:He.headers["transaction-id"]},"Get LWI Details succeeded"),Ie($e),je.next=18;break;case 10:if(je.prev=10,je.t0=je.catch(0),Je=re.milliSecondsElapsed,!ne.logger){je.next=17;break}return je.next=16,m.LoggingSanitizer.stripErrorSensitiveProperties(je.t0);case 16:ne.logger.log(I.LogLevel.ERROR,P.OCSDKTelemetryEvent.GETLWISTATUSFAILED,{RequestId:oe,ExceptionDetails:je.t0,ElapsedTimeInMilliseconds:Je},"Get LWI Details failed");case 17:Be();case 18:case"end":return je.stop()}},Fe,null,[[0,10]])}));return function(Fe,Ie){return De.apply(this,arguments)}}()));case 14:case"end":return Ee.stop()}},Se,this)}));return function(Se){return ae.apply(this,arguments)}}()},{key:"getChatToken",value:function(){var ae=(0,d.default)(E.default.mark(function Se(oe){var pe,re,J,se,me,ee,le,Ce,ye,ge,ne=this,Ee=arguments;return E.default.wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:if(pe=Ee.length>1&&void 0!==Ee[1]?Ee[1]:{},re=Ee.length>2&&void 0!==Ee[2]?Ee[2]:0,J=U.Timer.TIMER(),se=pe.reconnectId,me=pe.authenticatedUserToken,ee=pe.currentLiveChatVersion,this.logger&&this.logger.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.GETCHATTOKENSTARTED,{RequestId:oe},"Get Chat Token Started"),!(re<0)){Fe.next=7;break}throw new Error("Invalid currentRetryCount");case 7:return oe||(oe=(0,R.uuidv4)()),le=g.default.defaultHeaders,Ce="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(k.default.LiveChatGetChatTokenPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(oe),this.liveChatVersion===P.LiveChatVersion.V2||ee&&ee===P.LiveChatVersion.V2?(Ce="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(k.default.LiveChatv2GetChatTokenPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(oe),me&&(Ce="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(k.default.LiveChatv2AuthGetChatTokenPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(oe),le[F.default.authenticatedUserToken]=me)):me&&(Ce="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(k.default.LiveChatAuthGetChatTokenPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(oe),le[F.default.authenticatedUserToken]=me),se&&(Ce+="/".concat(se)),Ce+="?channelId=".concat(this.omnichannelConfiguration.channelId),ye={headers:le,method:"GET",url:Ce},ge=w.default.create(),(0,N.default)(ge,{retries:this.configuration.maxRequestRetriesOnFailure}),Fe.abrupt("return",new Promise(function(){var Ie=(0,d.default)(E.default.mark(function Be(He,Ve){var $e,Je,Ke,je;return E.default.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.prev=0,ke.next=3,ge(ye);case 3:if(Je=J.milliSecondsElapsed,!(Ke=($e=ke.sent).data)){ke.next=11;break}return Ke.requestId=oe,ne.logger&&ne.logger.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.GETCHATTOKENSUCCEEDED,{RequestId:oe,Region:$e.data.Region,ElapsedTimeInMilliseconds:Je,TransactionId:$e.headers["transaction-id"]},"Get Chat Token Succeeded"),He(Ke),ke.abrupt("return");case 11:if(!se||$e.status!==g.default.noContentStatusCode){ke.next=14;break}return Ve($e),ke.abrupt("return");case 14:ke.next=25;break;case 16:if(ke.prev=16,ke.t0=ke.catch(0),je=J.milliSecondsElapsed,!ne.logger){ke.next=23;break}return ke.next=22,m.LoggingSanitizer.stripErrorSensitiveProperties(ke.t0);case 22:ne.logger.log(I.LogLevel.ERROR,P.OCSDKTelemetryEvent.GETCHATTOKENFAILED,{RequestId:oe,ExceptionDetails:ke.t0,ElapsedTimeInMilliseconds:je},"Get Chat Token Failed");case 23:return Ve(ke.t0),ke.abrupt("return");case 25:if(!(re+1>=ne.configuration.getChatTokenRetryCount)){ke.next=28;break}return Ve(new Error("The retry for getchattoken has exceeded its max value of ".concat(ne.configuration.getChatTokenRetryCount))),ke.abrupt("return");case 28:setTimeout(function(){ne.getChatToken(oe,pe,re+1).then(function(Ht){return He(Ht)}).catch(function(Ht){return Ve(Ht)})},ne.configuration.getChatTokenTimeBetweenRetriesOnFailure);case 29:case"end":return ke.stop()}},Be,null,[[0,16]])}));return function(Be,He){return Ie.apply(this,arguments)}}()));case 17:case"end":return Fe.stop()}},Se,this)}));return function(Se){return ae.apply(this,arguments)}}()},{key:"getReconnectableChats",value:function(){var ae=(0,d.default)(E.default.mark(function Se(oe){var pe,re,J,se,me,ee,ne=this;return E.default.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return pe=U.Timer.TIMER(),re=oe.authenticatedUserToken,this.logger&&this.logger.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.GETRECONNECTABLECHATS,"Get Reconnectable chat Started"),J="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(k.default.LiveChatGetReconnectableChatsPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(this.omnichannelConfiguration.orgId,"?channelId=").concat(this.omnichannelConfiguration.channelId),(se=g.default.defaultHeaders)[F.default.authenticatedUserToken]=re,me={headers:se,method:"GET",url:J},ee=w.default.create(),Ce.abrupt("return",new Promise(function(){var ye=(0,d.default)(E.default.mark(function ge(Ee,De){var Fe,Ie,Be,He;return E.default.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return $e.prev=0,$e.next=3,ee(me);case 3:if(Ie=pe.milliSecondsElapsed,!(Be=(Fe=$e.sent).data)){$e.next=10;break}return ne.logger&&ne.logger.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.GETRECONNECTABLECHATS,{Region:Fe.data.Region,ElapsedTimeInMilliseconds:Ie,TransactionId:Fe.headers[g.default.transactionid]},"Get Reconnectable Chats Succeeded and old session returned"),Ee(Be),$e.abrupt("return");case 10:return Ee(),$e.abrupt("return");case 14:if($e.prev=14,$e.t0=$e.catch(0),He=pe.milliSecondsElapsed,!ne.logger){$e.next=21;break}return $e.next=20,m.LoggingSanitizer.stripErrorSensitiveProperties($e.t0);case 20:ne.logger.log(I.LogLevel.ERROR,P.OCSDKTelemetryEvent.GETRECONNECTABLECHATS,{ExceptionDetails:$e.t0,ElapsedTimeInMilliseconds:He},"Get Reconnectable Chats Failed");case 21:return De($e.t0),$e.abrupt("return");case 23:case"end":return $e.stop()}},ge,null,[[0,14]])}));return function(ge,Ee){return ye.apply(this,arguments)}}()));case 9:case"end":return Ce.stop()}},Se,this)}));return function(Se){return ae.apply(this,arguments)}}()},{key:"getReconnectAvailability",value:function(){var ae=(0,d.default)(E.default.mark(function Se(oe){var pe,re,se,me,ne=this;return E.default.wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return pe=U.Timer.TIMER(),this.logger&&this.logger.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.GETRECONNECTAVAILABILITY,"Get Reconnect availability started"),re="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(k.default.LiveChatReconnectAvailabilityPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(oe),se={headers:g.default.defaultHeaders,method:"GET",url:re},me=w.default.create(),le.abrupt("return",new Promise(function(){var Ce=(0,d.default)(E.default.mark(function ye(ge,Ee){var De,Fe,Ie,Be;return E.default.wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:return Ve.prev=0,Ve.next=3,me(se);case 3:if(Fe=pe.milliSecondsElapsed,!(Ie=(De=Ve.sent).data)){Ve.next=10;break}return ne.logger&&ne.logger.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.GETRECONNECTAVAILABILITY,{Region:De.data.Region,ElapsedTimeInMilliseconds:Fe,TransactionId:De.headers[g.default.transactionid]},"Get Reconnect availability Succeeded"),ge(Ie),Ve.abrupt("return");case 10:return ne.logger&&ne.logger.log(I.LogLevel.WARN,P.OCSDKTelemetryEvent.GETRECONNECTAVAILABILITY,{Region:De.data.Region,ElapsedTimeInMilliseconds:Fe,TransactionId:De.headers[g.default.transactionid]},"Get Reconnect availability didn't send any valid data."),ge(),Ve.abrupt("return");case 15:if(Ve.prev=15,Ve.t0=Ve.catch(0),Be=pe.milliSecondsElapsed,!ne.logger){Ve.next=22;break}return Ve.next=21,m.LoggingSanitizer.stripErrorSensitiveProperties(Ve.t0);case 21:ne.logger.log(I.LogLevel.ERROR,P.OCSDKTelemetryEvent.GETRECONNECTAVAILABILITY,{ExceptionDetails:Ve.t0,ElapsedTimeInMilliseconds:Be},"Get Reconnect Availability Failed");case 22:return Ee(Ve.t0),Ve.abrupt("return");case 24:case"end":return Ve.stop()}},ye,null,[[0,15]])}));return function(ye,ge){return Ce.apply(this,arguments)}}()));case 7:case"end":return le.stop()}},Se,this)}));return function(Se){return ae.apply(this,arguments)}}()},{key:"getQueueAvailability",value:function(){var ae=(0,d.default)(E.default.mark(function Se(oe){var pe,re,J,se,me,ee,le,Ce,ye,ge,ne=this,Ee=arguments;return E.default.wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:if(pe=Ee.length>1&&void 0!==Ee[1]?Ee[1]:{},re=U.Timer.TIMER(),this.logger&&this.logger.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.GETQUEUEAVAILABILITYSTARTED,{RequestId:oe},"Get queue availability started"),J="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(k.default.GetQueueAvailabilityPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(oe,"?channelId=lcw"),se=w.default.create(),(0,N.default)(se,{retries:this.configuration.maxRequestRetriesOnFailure}),ee=pe.initContext,le=pe.getContext,Ce=g.default.defaultHeaders,(me=pe.authenticatedUserToken)&&(Ce[F.default.authenticatedUserToken]=me),ye=ee||{},!le||window.document){Fe.next=12;break}return Fe.abrupt("return",Promise.reject(new Error("getContext is only supported on web browsers")));case 12:if(le&&(ye.browser=f.BrowserInfo.getBrowserName(),ye.device=_.DeviceInfo.getDeviceType(),ye.originurl=window.location.href,ye.os=x.OSInfo.getOsType()),ye.locale||(ye.locale=g.default.defaultLocale),!ye.locale||b.default.supportedLocales.includes(ye.locale)){Fe.next=16;break}return Fe.abrupt("return",Promise.reject(new Error("Unsupported locale: '".concat(ye.locale,"'"))));case 16:return ge={data:ye,headers:Ce,method:"POST",url:J},Fe.abrupt("return",new Promise(function(){var Ie=(0,d.default)(E.default.mark(function Be(He,Ve){var $e,Je,Ke,je;return E.default.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.prev=0,ke.next=3,se(ge);case 3:Je=re.milliSecondsElapsed,(Ke=($e=ke.sent).data)&&(ne.logger&&ne.logger.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.GETQUEUEAVAILABILITYSUCCEEDED,{RequestId:oe,Region:$e.data.Region,ElapsedTimeInMilliseconds:Je,TransactionId:$e.headers["transaction-id"]},"Get queue availability Succeeded"),He(Ke)),ke.next=17;break;case 9:if(ke.prev=9,ke.t0=ke.catch(0),je=re.milliSecondsElapsed,!ne.logger){ke.next=16;break}return ke.next=15,m.LoggingSanitizer.stripErrorSensitiveProperties(ke.t0);case 15:ne.logger.log(I.LogLevel.ERROR,P.OCSDKTelemetryEvent.GETQUEUEAVAILABILITYFAILED,{RequestId:oe,ExceptionDetails:ke.t0,ElapsedTimeInMilliseconds:je},"Get queue availability failed");case 16:Ve(ke.t0);case 17:case"end":return ke.stop()}},Be,null,[[0,9]])}));return function(Be,He){return Ie.apply(this,arguments)}}()));case 18:case"end":return Fe.stop()}},Se,this)}));return function(Se){return ae.apply(this,arguments)}}()},{key:"sessionInit",value:function(){var ae=(0,d.default)(E.default.mark(function Se(oe){var pe,re,J,se,me,ee,le,Ce,ye,ge,Ee,ne=this,De=arguments;return E.default.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(pe=De.length>1&&void 0!==De[1]?De[1]:{},re=U.Timer.TIMER(),this.logger&&this.logger.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.SESSIONINITSTARTED,{RequestId:oe},"Session Init Started"),J=w.default.create(),(0,N.default)(J,{retries:this.configuration.maxRequestRetriesOnFailure}),se=pe.reconnectId,me=pe.authenticatedUserToken,ee=pe.initContext,le=pe.getContext,Ce=g.default.defaultHeaders,ye="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(k.default.LiveChatSessionInitPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(oe),me&&(ye="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(k.default.LiveChatAuthSessionInitPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(oe),Ce[F.default.authenticatedUserToken]=me),se&&(ye+="/".concat(se)),ye+="?channelId=".concat(this.omnichannelConfiguration.channelId),ge=ee||{},!le||window.document){Ie.next=14;break}return Ie.abrupt("return",Promise.reject(new Error("getContext is only supported on web browsers")));case 14:if(le&&(ge.browser=f.BrowserInfo.getBrowserName(),ge.device=_.DeviceInfo.getDeviceType(),ge.originurl=window.location.href,ge.os=x.OSInfo.getOsType()),ge.locale||(ge.locale=g.default.defaultLocale),!ge.locale||b.default.supportedLocales.includes(ge.locale)){Ie.next=18;break}return Ie.abrupt("return",Promise.reject(new Error("Unsupported locale: '".concat(ge.locale,"'"))));case 18:return Ee={data:ge,headers:Ce,method:"POST",url:ye},Ie.abrupt("return",new Promise(function(){var Be=(0,d.default)(E.default.mark(function He(Ve,$e){var Je,Ke,je;return E.default.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.prev=0,ke.next=3,J(Ee);case 3:Je=ke.sent,Ke=re.milliSecondsElapsed,ne.logger&&ne.logger.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.SESSIONINITSUCCEEDED,{RequestId:oe,Region:Je.data.Region,ElapsedTimeInMilliseconds:Ke,TransactionId:Je.headers["transaction-id"]},"Session Init Succeeded"),Ve(),ke.next=17;break;case 9:if(ke.prev=9,ke.t0=ke.catch(0),je=re.milliSecondsElapsed,!ne.logger){ke.next=16;break}return ke.next=15,m.LoggingSanitizer.stripErrorSensitiveProperties(ke.t0);case 15:ne.logger.log(I.LogLevel.ERROR,P.OCSDKTelemetryEvent.SESSIONINITFAILED,{RequestId:oe,ExceptionDetails:ke.t0,ElapsedTimeInMilliseconds:je},"Session Init Failed");case 16:$e(ke.t0);case 17:case"end":return ke.stop()}},He,null,[[0,9]])}));return function(He,Ve){return Be.apply(this,arguments)}}()));case 20:case"end":return Ie.stop()}},Se,this)}));return function(Se){return ae.apply(this,arguments)}}()},{key:"sessionClose",value:function(){var ae=(0,d.default)(E.default.mark(function Se(oe){var pe,re,J,se,me,ee,le,ye,ge,Ee,ne=this,De=arguments;return E.default.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return pe=De.length>1&&void 0!==De[1]?De[1]:{},re=U.Timer.TIMER(),this.logger&&this.logger.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.SESSIONCLOSESTARTED,{RequestId:oe},"Session Close Started"),J="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(k.default.LiveChatSessionClosePath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(oe,"?channelId=").concat(this.omnichannelConfiguration.channelId),se=w.default.create(),(0,N.default)(se,{retries:this.configuration.maxRequestRetriesOnFailure}),me=pe.authenticatedUserToken,ee=pe.isReconnectChat,le=pe.isPersistentChat,ye=g.default.defaultHeaders,(ge={}).chatId=pe.chatId,me&&(J="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(k.default.LiveChatAuthSessionClosePath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(oe,"?channelId=").concat(this.omnichannelConfiguration.channelId),ye[F.default.authenticatedUserToken]=me),ee&&(J+="&isReconnectChat=true"),le&&(J+="&isPersistentChat=true"),Ee={data:ge,headers:ye,method:"POST",url:J},Ie.abrupt("return",new Promise(function(){var Be=(0,d.default)(E.default.mark(function He(Ve,$e){var Je,Ke,je;return E.default.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.prev=0,ke.next=3,se(Ee);case 3:Je=ke.sent,Ke=re.milliSecondsElapsed,ne.logger&&ne.logger.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.SESSIONCLOSESUCCEEDED,{RequestId:oe,Region:Je.data.Region,ElapsedTimeInMilliseconds:Ke,TransactionId:Je.headers["transaction-id"]},"Session Close Succeeded"),Ve(),ke.next=17;break;case 9:if(ke.prev=9,ke.t0=ke.catch(0),je=re.milliSecondsElapsed,!ne.logger){ke.next=16;break}return ke.next=15,m.LoggingSanitizer.stripErrorSensitiveProperties(ke.t0);case 15:ne.logger.log(I.LogLevel.ERROR,P.OCSDKTelemetryEvent.SESSIONCLOSEFAILED,{RequestId:oe,ExceptionDetails:ke.t0,ElapsedTimeInMilliseconds:je},"Session Close Failed");case 16:$e();case 17:case"end":return ke.stop()}},He,null,[[0,9]])}));return function(He,Ve){return Be.apply(this,arguments)}}()));case 15:case"end":return Ie.stop()}},Se,this)}));return function(Se){return ae.apply(this,arguments)}}()},{key:"validateAuthChatRecord",value:function(){var ae=(0,d.default)(E.default.mark(function Se(oe,ne){var pe,re,J,se,me,ee,le,Ce,ye,ge,Ee,De,Fe,Ie;return E.default.wrap(function(He){for(;;)switch(He.prev=He.next){case 0:return pe=U.Timer.TIMER(),this.logger&&this.logger.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.VALIDATEAUTHCHATRECORDSTARTED,{RequestId:oe},"Validate Auth Chat Record Started"),re=ne.authenticatedUserToken,J=ne.chatId,se="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(k.default.LiveChatValidateAuthChatMapRecordPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(J,"/").concat(oe,"?channelId=").concat(this.omnichannelConfiguration.channelId),me=w.default.create(),(0,N.default)(me,{retries:this.configuration.maxRequestRetriesOnFailure}),ee=g.default.defaultHeaders,re&&(ee[F.default.authenticatedUserToken]=re),le={headers:ee,method:"GET",url:se},He.prev=9,He.next=12,me(le);case 12:if(ge=pe.milliSecondsElapsed,!0!==(null===(Ce=(ye=He.sent).data)||void 0===Ce?void 0:Ce.authChatExist)){He.next=19;break}return null===(Ee=this.logger)||void 0===Ee||Ee.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.VALIDATEAUTHCHATRECORDSUCCEEDED,{RequestId:oe,Region:ye.data.Region,ElapsedTimeInMilliseconds:ge,TransactionId:ye.headers["transaction-id"]},"Validate Auth Chat Record Succeeded"),He.abrupt("return",Promise.resolve(ye.data));case 19:return null===(De=this.logger)||void 0===De||De.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.VALIDATEAUTHCHATRECORDFAILED,{RequestId:oe,Region:ye.data.Region,ElapsedTimeInMilliseconds:ge,TransactionId:ye.headers["transaction-id"],ErrorCode:ye.status},"Validate Auth Chat Record Failed. Record is not found or request is not authorized"),He.abrupt("return",Promise.reject(new Error("Validate Auth Chat Record Failed. Record is not found or request is not authorized")));case 21:He.next=34;break;case 23:return He.prev=23,He.t0=He.catch(9),Ie=pe.milliSecondsElapsed,He.next=28,m.LoggingSanitizer.stripErrorSensitiveProperties(He.t0);case 28:if(null===(Fe=this.logger)||void 0===Fe||Fe.log(I.LogLevel.ERROR,P.OCSDKTelemetryEvent.VALIDATEAUTHCHATRECORDFAILED,{RequestId:oe,ExceptionDetails:He.t0,ElapsedTimeInMilliseconds:Ie},"Validate Auth Chat Record Failed"),"Error: Request failed with status code 404"!==He.t0.toString()){He.next=33;break}return He.abrupt("return",Promise.resolve({}));case 33:return He.abrupt("return",Promise.reject());case 34:case"end":return He.stop()}},Se,this,[[9,23]])}));return function(Se,oe){return ae.apply(this,arguments)}}()},{key:"submitPostChatResponse",value:function(){var ae=(0,d.default)(E.default.mark(function Se(oe,ne){var re,J,se,me,ee,le,Ce,pe=this,ye=arguments;return E.default.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return re=ye.length>2&&void 0!==ye[2]?ye[2]:{},J=U.Timer.TIMER(),this.logger&&this.logger.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.SUBMITPOSTCHATSTARTED,{RequestId:oe},"Submit Post Chat Started"),se="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(k.default.LiveChatSubmitPostChatPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(oe,"?channelId=").concat(this.omnichannelConfiguration.channelId),me=w.default.create(),(0,N.default)(me,{retries:this.configuration.maxRequestRetriesOnFailure}),le=g.default.defaultHeaders,(ee=re.authenticatedUserToken)&&(se="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(k.default.LiveChatAuthSubmitPostChatPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(oe,"?channelId=").concat(this.omnichannelConfiguration.channelId),le[F.default.authenticatedUserToken]=ee),Ce={data:JSON.stringify(ne),headers:le,method:"POST",url:se},Ee.abrupt("return",new Promise(function(){var De=(0,d.default)(E.default.mark(function Fe(Ie,Be){var He,Ve,$e;return E.default.wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return Ke.prev=0,Ke.next=3,me(Ce);case 3:He=Ke.sent,Ve=J.milliSecondsElapsed,pe.logger&&pe.logger.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.SUBMITPOSTCHATSUCCEEDED,{RequestId:oe,Region:He.data.Region,ElapsedTimeInMilliseconds:Ve,TransactionId:He.headers["transaction-id"]},"Submit Post Chat Succeeded"),Ie(),Ke.next=17;break;case 9:if(Ke.prev=9,Ke.t0=Ke.catch(0),$e=J.milliSecondsElapsed,!pe.logger){Ke.next=16;break}return Ke.next=15,m.LoggingSanitizer.stripErrorSensitiveProperties(Ke.t0);case 15:pe.logger.log(I.LogLevel.ERROR,P.OCSDKTelemetryEvent.SUBMITPOSTCHATFAILED,{RequestId:oe,ExceptionDetails:Ke.t0,ElapsedTimeInMilliseconds:$e},"Submit Post Chat Failed");case 16:Be();case 17:case"end":return Ke.stop()}},Fe,null,[[0,9]])}));return function(Fe,Ie){return De.apply(this,arguments)}}()));case 11:case"end":return Ee.stop()}},Se,this)}));return function(Se,oe){return ae.apply(this,arguments)}}()},{key:"getSurveyInviteLink",value:function(){var ae=(0,d.default)(E.default.mark(function Se(oe,ne){var re,J,se,me,ee,le,Ce,ye,pe=this,ge=arguments;return E.default.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return re=ge.length>2&&void 0!==ge[2]?ge[2]:{},J=U.Timer.TIMER(),this.logger&&this.logger.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.GETSURVEYINVITELINKSTARTED,{SurveyOwnerId:oe},"Get Survey Invite Link Started"),se="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(k.default.LiveChatGetSurveyInviteLinkPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(oe),me=w.default.create(),(0,N.default)(me,{retries:this.configuration.maxRequestRetriesOnFailure}),le=re.requestId,Ce=g.default.defaultHeaders,(ee=re.authenticatedUserToken)&&(se="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(k.default.LiveChatAuthGetSurveyInviteLinkPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(oe),Ce[F.default.authenticatedUserToken]=ee,Ce[F.default.widgetAppId]=this.omnichannelConfiguration.widgetId),le&&(Ce[F.default.requestId]=le),ye={data:JSON.stringify(ne),headers:Ce,method:"POST",url:se},De.abrupt("return",new Promise(function(){var Fe=(0,d.default)(E.default.mark(function Ie(Be,He){var Ve,$e,Je,Ke;return E.default.wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:return tt.prev=0,tt.next=3,me(ye);case 3:$e=(Ve=tt.sent).data,Je=J.milliSecondsElapsed,pe.logger&&pe.logger.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.GETSURVEYINVITELINKSUCCEEDED,{Region:Ve.data.Region,ElapsedTimeInMilliseconds:Je,TransactionId:Ve.headers["transaction-id"]},"Get Survey Invite Link Succeeded"),Be($e),tt.next=18;break;case 10:if(tt.prev=10,tt.t0=tt.catch(0),Ke=J.milliSecondsElapsed,!pe.logger){tt.next=17;break}return tt.next=16,m.LoggingSanitizer.stripErrorSensitiveProperties(tt.t0);case 16:pe.logger.log(I.LogLevel.ERROR,P.OCSDKTelemetryEvent.GETSURVEYINVITELINKFAILED,{ExceptionDetails:tt.t0,ElapsedTimeInMilliseconds:Ke},"Get Survey Invite Link Failed");case 17:He();case 18:case"end":return tt.stop()}},Ie,null,[[0,10]])}));return function(Ie,Be){return Fe.apply(this,arguments)}}()));case 12:case"end":return De.stop()}},Se,this)}));return function(Se,oe){return ae.apply(this,arguments)}}()},{key:"getChatTranscripts",value:function(){var ae=(0,d.default)(E.default.mark(function Se(oe,ne,pe){var J,se,me,ee,le,Ce,ye,ge,re=this,Ee=arguments;return E.default.wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return J=Ee.length>3&&void 0!==Ee[3]?Ee[3]:{},se=U.Timer.TIMER(),this.logger&&this.logger.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.GETCHATTRANSCRIPTSTARTED,{RequestId:oe},"Get Chat Transcript Started"),me="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(k.default.LiveChatGetChatTranscriptPath,"/").concat(ne,"/").concat(oe,"?channelId=").concat(this.omnichannelConfiguration.channelId),ee=w.default.create(),(0,N.default)(ee,{retries:this.configuration.maxRequestRetriesOnFailure}),le=J.authenticatedUserToken,Ce=J.currentLiveChatVersion,(ye=g.default.defaultHeaders)[F.default.organizationId]=this.omnichannelConfiguration.orgId,ye[F.default.widgetAppId]=this.omnichannelConfiguration.widgetId,ye[F.default.authorization]=pe,this.liveChatVersion===P.LiveChatVersion.V2||Ce&&Ce===P.LiveChatVersion.V2?(me="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(k.default.LiveChatv2GetChatTranscriptPath,"/").concat(ne,"/").concat(oe,"?channelId=").concat(this.omnichannelConfiguration.channelId),le&&(me="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(k.default.LiveChatv2AuthGetChatTranscriptPath,"/").concat(ne,"/").concat(oe,"?channelId=").concat(this.omnichannelConfiguration.channelId))):le&&(me="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(k.default.LiveChatAuthGetChatTranscriptPath,"/").concat(ne,"/").concat(oe,"?channelId=").concat(this.omnichannelConfiguration.channelId)),ge={headers:ye,method:"GET",url:me},Fe.abrupt("return",new Promise(function(){var Ie=(0,d.default)(E.default.mark(function Be(He,Ve){var $e,Je,Ke,je;return E.default.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.prev=0,ke.next=3,ee(ge);case 3:Je=se.milliSecondsElapsed,Ke=($e=ke.sent).data,re.logger&&re.logger.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.GETCHATTRANSCRIPTSUCCEEDED,{RequestId:oe,Region:$e.data.Region,ElapsedTimeInMilliseconds:Je,TransactionId:$e.headers["transaction-id"]},"Get Chat Transcript Succeeded"),He(Ke),ke.next=18;break;case 10:if(ke.prev=10,ke.t0=ke.catch(0),je=se.milliSecondsElapsed,!re.logger){ke.next=17;break}return ke.next=16,m.LoggingSanitizer.stripErrorSensitiveProperties(ke.t0);case 16:re.logger.log(I.LogLevel.ERROR,P.OCSDKTelemetryEvent.GETCHATTRANSCRIPTFAILED,{RequestId:oe,ExceptionDetails:ke.t0,ElapsedTimeInMilliseconds:je},"Get Chat Transcript Failed");case 17:Ve(ke.t0);case 18:case"end":return ke.stop()}},Be,null,[[0,10]])}));return function(Be,He){return Ie.apply(this,arguments)}}()));case 14:case"end":return Fe.stop()}},Se,this)}));return function(Se,oe,ne){return ae.apply(this,arguments)}}()},{key:"emailTranscript",value:function(){var ae=(0,d.default)(E.default.mark(function Se(oe,ne,pe){var J,se,me,ee,le,Ce,ye,re=this,ge=arguments;return E.default.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return J=ge.length>3&&void 0!==ge[3]?ge[3]:{},se=U.Timer.TIMER(),this.logger&&this.logger.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.EMAILTRANSCRIPTSTARTED,{RequestId:oe},"Email Transcript Started"),me="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(k.default.LiveChatTranscriptEmailRequestPath,"/").concat(oe,"?channelId=").concat(this.omnichannelConfiguration.channelId),ee=w.default.create(),(0,N.default)(ee,{retries:this.configuration.maxRequestRetriesOnFailure}),le=J.authenticatedUserToken,(Ce=g.default.defaultHeaders)[F.default.organizationId]=this.omnichannelConfiguration.orgId,Ce[F.default.widgetAppId]=this.omnichannelConfiguration.widgetId,Ce[F.default.authorization]=ne,le&&(me="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(k.default.LiveChatAuthTranscriptEmailRequestPath,"/").concat(oe,"?channelId=").concat(this.omnichannelConfiguration.channelId)),ye={data:JSON.stringify(pe),headers:Ce,method:"POST",url:me},De.abrupt("return",new Promise(function(){var Fe=(0,d.default)(E.default.mark(function Ie(Be,He){var Ve,$e,Je;return E.default.wrap(function(je){for(;;)switch(je.prev=je.next){case 0:return je.prev=0,je.next=3,ee(ye);case 3:Ve=je.sent,$e=se.milliSecondsElapsed,re.logger&&re.logger.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.EMAILTRANSCRIPTSUCCEEDED,{RequestId:oe,Region:Ve.data.Region,ElapsedTimeInMilliseconds:$e,TransactionId:Ve.headers["transaction-id"]},"Email Transcript Succeeded"),Be(),je.next=17;break;case 9:if(je.prev=9,je.t0=je.catch(0),Je=se.milliSecondsElapsed,!re.logger){je.next=16;break}return je.next=15,m.LoggingSanitizer.stripErrorSensitiveProperties(je.t0);case 15:re.logger.log(I.LogLevel.ERROR,P.OCSDKTelemetryEvent.EMAILTRANSCRIPTFAILED,{RequestId:oe,ExceptionDetails:je.t0,ElapsedTimeInMilliseconds:Je},"Email Transcript Failed");case 16:He();case 17:case"end":return je.stop()}},Ie,null,[[0,9]])}));return function(Ie,Be){return Fe.apply(this,arguments)}}()));case 14:case"end":return De.stop()}},Se,this)}));return function(Se,oe,ne){return ae.apply(this,arguments)}}()},{key:"fetchDataMaskingInfo",value:function(){var ae=(0,d.default)(E.default.mark(function Se(oe){var pe,re,J,se,me,ne=this;return E.default.wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return pe=U.Timer.TIMER(),this.logger&&this.logger.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.FETCHDATAMASKINGSTARTED,{RequestId:oe},"Fetch Data Masking Started"),oe||(oe=(0,R.uuidv4)()),re="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(k.default.LiveChatFetchDataMaskingInfoPath,"/").concat(this.omnichannelConfiguration.orgId),J=w.default.create(),(0,N.default)(J,{retries:this.configuration.maxRequestRetriesOnFailure}),(se=g.default.defaultHeaders)[F.default.organizationId]=this.omnichannelConfiguration.orgId,se[F.default.requestId]=oe,me={headers:se,method:"GET",url:re},le.abrupt("return",new Promise(function(){var Ce=(0,d.default)(E.default.mark(function ye(ge,Ee){var De,Fe,Ie,Be;return E.default.wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:return Ve.prev=0,Ve.next=3,J(me);case 3:Fe=pe.milliSecondsElapsed,Ie=(De=Ve.sent).data,ne.logger&&ne.logger.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.FETCHDATAMASKINGSUCCEEDED,{RequestId:oe,Region:De.data.Region,ElapsedTimeInMilliseconds:Fe,TransactionId:De.headers["transaction-id"]},"Fetch Data Masking Succeeded"),ge(Ie),Ve.next=18;break;case 10:if(Ve.prev=10,Ve.t0=Ve.catch(0),Be=pe.milliSecondsElapsed,!ne.logger){Ve.next=17;break}return Ve.next=16,m.LoggingSanitizer.stripErrorSensitiveProperties(Ve.t0);case 16:ne.logger.log(I.LogLevel.ERROR,P.OCSDKTelemetryEvent.FETCHDATAMASKINGFAILED,{RequestId:oe,ExceptionDetails:Ve.t0,ElapsedTimeInMilliseconds:Be},"Fetch Data Masking Failed");case 17:Ee();case 18:case"end":return Ve.stop()}},ye,null,[[0,10]])}));return function(ye,ge){return Ce.apply(this,arguments)}}()));case 11:case"end":return le.stop()}},Se,this)}));return function(Se){return ae.apply(this,arguments)}}()},{key:"makeSecondaryChannelEventRequest",value:function(){var ae=(0,d.default)(E.default.mark(function Se(oe,ne){var pe,re,J,se,me,ee,le,Ce,ye,ge,Ee,De=arguments;return E.default.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return pe=De.length>2&&void 0!==De[2]?De[2]:{},re=U.Timer.TIMER(),this.logger&&this.logger.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.SECONDARYCHANNELEVENTREQUESTSTARTED,{RequestId:oe},"Secondary Channel Event Request Started"),J="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(k.default.LiveChatSecondaryChannelEventPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(oe),se=w.default.create(),(0,N.default)(se,{retries:this.configuration.maxRequestRetriesOnFailure}),me=pe.authenticatedUserToken,(ee=g.default.defaultHeaders)[F.default.organizationId]=this.omnichannelConfiguration.orgId,me&&(ee[F.default.authenticatedUserToken]=me,J="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(k.default.LiveChatAuthSecondaryChannelEventPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(oe)),J+="?channelId="+g.default.defaultChannelId,le={data:JSON.stringify(ne),headers:ee,method:"POST",url:J},Ie.prev=12,Ie.next=15,se(le);case 15:ye=re.milliSecondsElapsed,ge=(Ce=Ie.sent).data,this.logger&&this.logger.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.SECONDARYCHANNELEVENTREQUESTSUCCEEDED,{RequestId:oe,Region:ge.Region,ElapsedTimeInMilliseconds:ye,TransactionId:Ce.headers["transaction-id"]},"Secondary Channel Event Request Succeeded"),Ie.next=29;break;case 21:if(Ie.prev=21,Ie.t0=Ie.catch(12),Ee=re.milliSecondsElapsed,!this.logger){Ie.next=28;break}return Ie.next=27,m.LoggingSanitizer.stripErrorSensitiveProperties(Ie.t0);case 27:this.logger.log(I.LogLevel.ERROR,P.OCSDKTelemetryEvent.SECONDARYCHANNELEVENTREQUESTFAILED,{RequestId:oe,ExceptionDetails:Ie.t0,ElapsedTimeInMilliseconds:Ee},"Secondary Channel Event Request Failed");case 28:throw Ie.t0;case 29:case"end":return Ie.stop()}},Se,this,[[12,21]])}));return function(Se,oe){return ae.apply(this,arguments)}}()},{key:"sendTypingIndicator",value:function(){var ae=(0,d.default)(E.default.mark(function Se(oe,ne){var re,J,se,me,ee,le,Ce,pe=this,ye=arguments;return E.default.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:if(re=ye.length>2&&void 0!==ye[2]?ye[2]:{},ne&&ne===P.LiveChatVersion.V2){Ee.next=3;break}return Ee.abrupt("return",Promise.resolve());case 3:if(J=U.Timer.TIMER(),se=re.customerDisplayName,ne&&ne===P.LiveChatVersion.V2){Ee.next=7;break}throw new Error("Typing indicator is only supported on v2");case 7:return me="".concat(this.omnichannelConfiguration.orgUrl,"/").concat(k.default.SendTypingIndicatorPath,"/").concat(oe),ee=w.default.create(),(le=g.default.defaultHeaders)[F.default.organizationId]=this.omnichannelConfiguration.orgId,se&&(le[g.default.customerDisplayName]=se),Ce={headers:le,method:"POST",url:me},Ee.abrupt("return",new Promise(function(){var De=(0,d.default)(E.default.mark(function Fe(Ie,Be){var He,Ve,$e,Je;return E.default.wrap(function(je){for(;;)switch(je.prev=je.next){case 0:return je.prev=0,je.next=3,ee(Ce);case 3:Ve=J.milliSecondsElapsed,$e=(He=je.sent).data,pe.logger&&pe.logger.log(I.LogLevel.INFO,P.OCSDKTelemetryEvent.SENDTYPINGINDICATORSUCCEEDED,{RequestId:oe,Region:$e.Region,ElapsedTimeInMilliseconds:Ve,TransactionId:He.headers["transaction-id"]},"Send Typing Indicator Succeeded"),Ie(),je.next=18;break;case 10:if(je.prev=10,je.t0=je.catch(0),Je=J.milliSecondsElapsed,!pe.logger){je.next=17;break}return je.next=16,m.LoggingSanitizer.stripErrorSensitiveProperties(je.t0);case 16:pe.logger.log(I.LogLevel.ERROR,P.OCSDKTelemetryEvent.SENDTYPINGINDICATORFAILED,{RequestId:oe,ExceptionDetails:je.t0,ElapsedTimeInMilliseconds:Je},"Send Typing Indicator Failed");case 17:Be(je.t0);case 18:case"end":return je.stop()}},Fe,null,[[0,10]])}));return function(Fe,Ie){return De.apply(this,arguments)}}()));case 14:case"end":return Ee.stop()}},Se,this)}));return function(Se,oe){return ae.apply(this,arguments)}}()}]),te;var ae}();u.default=Q,(0,C.default)(Q,"defaultConfiguration",{getChatTokenRetryCount:35,getChatTokenTimeBetweenRetriesOnFailure:1e4,maxRequestRetriesOnFailure:3})},4491:(K,u,c)=>{"use strict";var s=c(1127);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var E=s(c(8884)),d=s(c(2805)),p=s(c(5413)),T=s(c(4162)),l=s(c(8634));u.default=function(){function P(){(0,E.default)(this,P)}return(0,d.default)(P,null,[{key:"getSDK",value:function(f,g,_){var b=new T.default(_);return new l.default({channelId:f.channelId||p.default.defaultChannelId,orgId:f.orgId,orgUrl:f.orgUrl,widgetId:f.widgetId},g||{},b)}}]),P}()},4717:(K,u,c)=>{"use strict";var s=c(1127);Object.defineProperty(u,"__esModule",{value:!0}),u.BrowserInfo=u.UNKNOWN_VERSION=void 0;var E=s(c(8884)),d=s(c(2805)),p=s(c(1819)),T=c(2e3),l="([\\d,.]+)";u.UNKNOWN_VERSION="U";var P=function(){function w(){(0,E.default)(this,w)}return(0,d.default)(w,null,[{key:"getUserAgent",value:function(){return this.userAgent()}},{key:"userAgentContainsString",value:function(g){return this.getUserAgent().indexOf(g)>-1}},{key:"isChrome",value:function(){return this.userAgentContainsString(T.BrowserVendor.CHROME)&&!this.userAgentContainsString(T.BrowserVendor.EDGE)&&!this.userAgentContainsString(T.BrowserVendor.EDGE_CHROMIUM)}},{key:"isIe",value:function(){return this.userAgentContainsString("Trident")}},{key:"isEdge",value:function(){return this.userAgentContainsString(T.BrowserVendor.EDGE)||this.userAgentContainsString(T.BrowserVendor.EDGE_CHROMIUM)}},{key:"isOpera",value:function(){return this.userAgentContainsString("OPR/")}},{key:"getBrowserName",value:function(){return this.isOpera()?T.BrowserVendor.OPERA:this.isEdge()?T.BrowserVendor.EDGE:this.isChrome()?T.BrowserVendor.CHROME:this.userAgentContainsString(T.BrowserVendor.FIREFOX)?T.BrowserVendor.FIREFOX:this.userAgentContainsString(T.BrowserVendor.SAFARI)?T.BrowserVendor.SAFARI:this.isIe()?T.BrowserVendor.IE:T.BrowserVendor.UNKNOWN}},{key:"getBrowserVersion",value:function(){var g=this;return this.isIe()?function(){var I=g.getUserAgent(),x=I.match(new RegExp(T.BrowserVendor.IE+" "+l));if(x)return x[1];var k=I.match(new RegExp("rv:"+l));return k?k[1]:void 0}():function(I){I===T.BrowserVendor.SAFARI&&(I="Version"),I===T.BrowserVendor.OPERA&&(I="OPR"),I===T.BrowserVendor.EDGE&&(I="Edge?");var x=g.getUserAgent().match(new RegExp(I+"/"+l));return x?x[1]:"U"}(this.getBrowserName())}}]),w}();u.BrowserInfo=P,(0,p.default)(P,"userAgent",function(){return window.navigator.userAgent})},6812:(K,u,c)=>{"use strict";var s=c(1127);Object.defineProperty(u,"__esModule",{value:!0}),u.DeviceInfo=void 0;var E=s(c(8884)),d=s(c(2805)),p=c(2e3);u.DeviceInfo=function(){function l(){(0,E.default)(this,l)}return(0,d.default)(l,null,[{key:"getDeviceType",value:function(){return window.navigator.userAgent.match(/(android|ipod|windows phone|wpdesktop|windows ce|blackberry\w*|meego|webos|palm|symbian|pda|\w*?mobile\w*?|\w*?phone\w*?)/i)?p.DeviceType.Mobile:window.navigator.userAgent.match(/tablet|ipad/i)?p.DeviceType.Tablet:p.DeviceType.Desktop}}]),l}()},682:(K,u,c)=>{"use strict";var s=c(1127);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var E=s(c(8884)),d=s(c(2805));u.default=function(){function T(){(0,E.default)(this,T)}return(0,d.default)(T,null,[{key:"raiseCustomEvent",value:function(C,P){var w=T.createCustomEvent(C,P);window.dispatchEvent(w)}},{key:"createCustomEvent",value:function(C,P){var w=P?{detail:P}:void 0,f=null;try{f=new CustomEvent(C,w)}catch(g){(f=document.createEvent("CustomEvent")).initCustomEvent(C,!0,!0,w)}return f}}]),T}()},9569:(K,u,c)=>{"use strict";var s=c(1127);Object.defineProperty(u,"__esModule",{value:!0}),u.LoggingSanitizer=void 0;var E=s(c(1298)),d=s(c(8884)),p=s(c(2805)),T=s(c(5413));u.LoggingSanitizer=function(){function C(){(0,d.default)(this,C)}return(0,p.default)(C,null,[{key:"stripErrorSensitiveProperties",value:function(w){var f,_,g=this;w&&"object"===(0,E.default)(w)&&(null===(f=Object.keys(w))||void 0===f?void 0:f.length)>0&&(null===(_=Object.keys(w))||void 0===_||_.forEach(function(b){-1!==T.default.sensitiveProperties.indexOf(b)&&delete w["".concat(b)],null===w["".concat(b)]||"object"!==(0,E.default)(w["".concat(b)])||g.stripErrorSensitiveProperties(w["".concat(b)])}))}}]),C}()},7169:(K,u,c)=>{"use strict";var s=c(1127);Object.defineProperty(u,"__esModule",{value:!0}),u.OSInfo=void 0;var E=s(c(8884)),d=s(c(2805)),p=c(2e3);u.OSInfo=function(){function l(){(0,E.default)(this,l)}return(0,d.default)(l,null,[{key:"getOsType",value:function(){var I=function(){return window.navigator.userAgent};return I().match(/windows\sphone\s\d+\.\d+/i)?p.OperatingSystem.WINDOWS_PHONE:I().match(/ arm;/i)?p.OperatingSystem.WINDOWS_RT:I().match(/(iPad|iPhone|iPod)(?=.*like Mac OS X)/i)?p.OperatingSystem.IOS:I().match(/android/i)?p.OperatingSystem.ANDROID:I().match(/(linux|joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|cros)/i)?p.OperatingSystem.LINUX:I().match(/(macintosh|mac os x)/i)?p.OperatingSystem.MACOSX:I().match(/(windows|win32)/i)?p.OperatingSystem.WINDOWS:p.OperatingSystem.UNKNOWN}}]),l}()},7276:(K,u,c)=>{"use strict";var s=c(1127);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var E=s(c(8884)),d=s(c(2805));u.default=function(){function T(){(0,E.default)(this,T)}return(0,d.default)(T,null,[{key:"GETTELEMETRYEVENTDATA",value:function(C,P,w){return{Description:w,ElapsedTimeInMilliseconds:P.ElapsedTimeInMilliseconds,Event:C,ExceptionDetails:P.ExceptionDetails,Region:P.Region,RequestId:P.RequestId,TransactionId:P.TransactionId}}}]),T}()},3945:(K,u,c)=>{"use strict";var s=c(1127);Object.defineProperty(u,"__esModule",{value:!0}),u.Timer=void 0;var E=s(c(8884)),d=s(c(2805));u.Timer=function(){function T(){(0,E.default)(this,T)}return(0,d.default)(T,null,[{key:"TIMER",value:function(){var C=(new Date).getTime();return{get milliSecondsElapsed(){return(new Date).getTime()-C}}}}]),T}()},1729:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,u.default=function(d,p){var T=p.retries,l=0;d.interceptors.response.use(void 0,function(f){var g=f.config;return g&&l<T?(l++,new Promise(function(b){return b(d(g))})):Promise.reject(f)})}},8566:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.uuidv4=void 0,u.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(E){var d=16*Math.random()|0;return("x"===E?d:3&d|8).toString(16)})}},3762:(K,u,c)=>{"use strict";var s=c(1127);Object.defineProperty(u,"__esModule",{value:!0}),Object.defineProperty(u,"SDKProvider",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(u,"uuidv4",{enumerable:!0,get:function(){return l.uuidv4}});var E=s(c(1298)),d=s(c(3096)),p=s(c(4491)),T=s(c(682)),l=c(8566);!function(){if(void 0===global.window&&(global.window=global),void 0===("undefined"==typeof window?"undefined":(0,E.default)(window)))throw new Error("window object not found");"Microsoft"in window||(window.Microsoft={}),"CRM"in window.Microsoft||(window.Microsoft.CRM={}),"Omnichannel"in window.Microsoft.CRM||(window.Microsoft.CRM.Omnichannel={}),"SDK"in window.Microsoft.CRM.Omnichannel||(window.Microsoft.CRM.Omnichannel.SDK={SDKProvider:p.default,Util:{uuidv4:l.uuidv4}}),window.document&&T.default.raiseCustomEvent(d.default.OCSDKLOAD)}()},7987:function(K,u){"use strict";var c=this&&this.__assign||function(){return(c=Object.assign||function(E){for(var d,p=1,T=arguments.length;p<T;p++)for(var l in d=arguments[p])Object.prototype.hasOwnProperty.call(d,l)&&(E[l]=d[l]);return E}).apply(this,arguments)};Object.defineProperty(u,"__esModule",{value:!0});var s=function(){function E(d){this.debug=!1,this.debug=!1,this.logger=d}return E.prototype.setDebug=function(d){this.debug=d},E.prototype.log=function(d,p,T){var l,C=c(c({},T),{Event:p});this.debug&&console.log(C),null===(l=this.logger)||void 0===l||l.logClientSdkTelemetryEvent(d,C)},E}();u.default=s},9237:function(K,u,c){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(x){for(var k,F=1,U=arguments.length;F<U;F++)for(var N in k=arguments[F])Object.prototype.hasOwnProperty.call(k,N)&&(x[N]=k[N]);return x}).apply(this,arguments)},E=this&&this.__awaiter||function(x,k,F,U){return new(F||(F=Promise))(function(R,M){function j(ce){try{$(U.next(ce))}catch(Q){M(Q)}}function W(ce){try{$(U.throw(ce))}catch(Q){M(Q)}}function $(ce){ce.done?R(ce.value):function(R){return R instanceof F?R:new F(function(M){M(R)})}(ce.value).then(j,W)}$((U=U.apply(x,k||[])).next())})},d=this&&this.__generator||function(x,k){var U,N,R,M,F={label:0,sent:function(){if(1&R[0])throw R[1];return R[1]},trys:[],ops:[]};return M={next:j(0),throw:j(1),return:j(2)},"function"==typeof Symbol&&(M[Symbol.iterator]=function(){return this}),M;function j($){return function(ce){return function($){if(U)throw new TypeError("Generator is already executing.");for(;F;)try{if(U=1,N&&(R=2&$[0]?N.return:$[0]?N.throw||((R=N.return)&&R.call(N),0):N.next)&&!(R=R.call(N,$[1])).done)return R;switch(N=0,R&&($=[2&$[0],R.value]),$[0]){case 0:case 1:R=$;break;case 4:return F.label++,{value:$[1],done:!1};case 5:F.label++,N=$[1],$=[0];continue;case 7:$=F.ops.pop(),F.trys.pop();continue;default:if(!(R=(R=F.trys).length>0&&R[R.length-1])&&(6===$[0]||2===$[0])){F=0;continue}if(3===$[0]&&(!R||$[1]>R[0]&&$[1]<R[3])){F.label=$[1];break}if(6===$[0]&&F.label<R[1]){F.label=R[1],R=$;break}if(R&&F.label<R[2]){F.label=R[2],F.ops.push($);break}R[2]&&F.ops.pop(),F.trys.pop();continue}$=k.call(x,F)}catch(ce){$=[6,ce],N=0}finally{U=R=0}if(5&$[0])throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}([$,ce])}}};Object.defineProperty(u,"__esModule",{value:!0});var p=c(7643),T=(()=>{return(x=T||(T={})).Accept="Accept",x.AcceptEncoding="Accept-Encoding",x.BehaviorOverride="BehaviorOverride",x.Authorization="Authorization",x.ClientVersion="X-MS-Client-Version",x.ContentType="Content-Type",T;var x})(),l=(()=>{return(x=l||(l={})).applicationFormUrlEncoded="application/x-www-form-urlencoded",x.applicationJson="application/json",l;var x})(),C=(()=>{return(x=C||(C={})).Expired="expired",x.Failed="failed",x.InProgress="in progress",x.Malware="malware",x.Ready="ready",C;var x})(),P=["jpeg","jpg","gif","png","bmp","tiff","jfif"],w=function(x){x.regionGTMS||(x.regionGTMS={ams:"https://us-api.asm.skype.com"})},f=function(x){var k;return(k={})[T.Authorization]="skype_token "+x,k[T.ClientVersion]="os=Windows; osVer=10; proc=Win32; lcid=en-us; deviceType=1; country=IN; clientName=swc; clientVer=912/0.106.0.34//swc",k};u.default={skypeTokenAuth:function(x){return E(void 0,void 0,void 0,function(){var k,U,R,M,j;return d(this,function(W){switch(W.label){case 0:p.default.debug&&console.log("[API][skypeTokenAuth]"),w(x),k=(x.amsEndpoint||(null===(j=x.regionGTMS)||void 0===j?void 0:j.ams))+"/v1/skypetokenauth",(M={})[T.Authorization]="skype_token "+x.token,M[T.Accept]=l.applicationJson,M[T.BehaviorOverride]="redirectAs404",M[T.ContentType]=l.applicationFormUrlEncoded,U={headers:M,method:"POST",body:"skypetoken="+x.token},W.label=1;case 1:return W.trys.push([1,3,,4]),[4,fetch(k,U)];case 2:return[2,W.sent()];case 3:throw R=W.sent(),!p.default.silentError&&console.log(R),new Error("AMSAuth");case 4:return[2]}})})},createObject:function(x,k,F){return E(void 0,void 0,void 0,function(){var N,R,M,j,ce,Q,te,ae;return d(this,function(he){switch(he.label){case 0:p.default.debug&&console.log("[API][createObject]"),(Q={})[x]=["read"],N={filename:k.name,permissions:Q,type:k.type.includes("image")?"pish/image":"sharing/file"},w(F),R=(F.amsEndpoint||(null===(ae=null==F?void 0:F.regionGTMS)||void 0===ae?void 0:ae.ams))+"/v1/objects",M=s(s({},f(F.token)),((te={})[T.ContentType]=l.applicationJson,te)),j={headers:M,method:"POST",body:JSON.stringify(N),credentials:"include"},he.label=1;case 1:return he.trys.push([1,4,,5]),[4,fetch(R,j)];case 2:return[4,he.sent().json()];case 3:return[2,he.sent()];case 4:throw ce=he.sent(),!p.default.silentError&&console.log(ce),new Error("AMSCreateObjectFailed");case 5:return[2]}})})},uploadDocument:function(x,k,F){return E(void 0,void 0,void 0,function(){var U,N,R,j,W,$;return d(this,function(ce){switch(ce.label){case 0:p.default.debug&&console.log("[API][uploadDocument]"),w(F),U=(F.amsEndpoint||(null===($=null==F?void 0:F.regionGTMS)||void 0===$?void 0:$.ams))+"/v1/objects/"+x+"/content/"+(k.type.includes("image")?"imgpsh":"original"),N=s(s({},f(F.token)),((W={})[T.ContentType]=l.applicationFormUrlEncoded,W)),R={headers:N,method:"PUT",body:k.data?k.data:k},ce.label=1;case 1:return ce.trys.push([1,3,,4]),[4,fetch(U,R)];case 2:return ce.sent(),[2,{name:k.name,size:k.size,type:k.type,id:x,url:U,fileSharingProtocolType:0}];case 3:throw j=ce.sent(),!p.default.silentError&&console.log(j),new Error("AMSUploadDocumentFailed");case 4:return[2]}})})},getViewStatus:function(x,k){return E(void 0,void 0,void 0,function(){var F,U,N,M,j,W,ce,Q;return d(this,function(te){switch(te.label){case 0:p.default.debug&&console.log("[API][getViewStatus]"),w(k),F=(k.amsEndpoint||(null===(Q=null==k?void 0:k.regionGTMS)||void 0===Q?void 0:Q.ams))+"/v1/objects/"+x.id+"/views/"+(P.includes(x.type)?"imgpsh_fullsize_anim":"original")+"/status",U=f(k.token),N={headers:U,method:"GET"},te.label=1;case 1:return te.trys.push([1,4,,5]),[4,fetch(F,N)];case 2:return[4,te.sent().json()];case 3:if(M=te.sent(),j=M.content_state,W=M.view_state,!M.view_location)throw new Error("view_location is empty");if(W&&W!==C.Ready.toString()&&!p.default.silentError&&console.error("view_state is not ready"),j===C.Expired.toString())throw new Error("content_state is expired");return[2,M];case 4:throw ce=te.sent(),!p.default.silentError&&console.log(ce),new Error("AMSGetViewStatusFailed");case 5:return[2]}})})},getView:function(x,k,F){return E(void 0,void 0,void 0,function(){var U,N,R,W;return d(this,function($){switch($.label){case 0:p.default.debug&&console.log("[API][getView]"),w(F),U=k,N=f(F.token),P.includes(x.type)&&(N[T.Accept]="image/webp,image/ *,*/*;q=0.8",N[T.AcceptEncoding]="gzip, deflate, sdch, br"),R={headers:N,method:"GET"},$.label=1;case 1:return $.trys.push([1,4,,5]),[4,fetch(U,R)];case 2:return[4,$.sent().blob()];case 3:return[2,$.sent()];case 4:throw W=$.sent(),!p.default.silentError&&console.log(W),new Error("AMSGetViewFailed");case 5:return[2]}})})}}},4543:function(K,u,c){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(b){for(var m,I=1,x=arguments.length;I<x;I++)for(var k in m=arguments[I])Object.prototype.hasOwnProperty.call(m,k)&&(b[k]=m[k]);return b}).apply(this,arguments)},E=this&&this.__awaiter||function(b,m,I,x){return new(I||(I=Promise))(function(F,U){function N(j){try{M(x.next(j))}catch(W){U(W)}}function R(j){try{M(x.throw(j))}catch(W){U(W)}}function M(j){j.done?F(j.value):function(F){return F instanceof I?F:new I(function(U){U(F)})}(j.value).then(N,R)}M((x=x.apply(b,m||[])).next())})},d=this&&this.__generator||function(b,m){var x,k,F,U,I={label:0,sent:function(){if(1&F[0])throw F[1];return F[1]},trys:[],ops:[]};return U={next:N(0),throw:N(1),return:N(2)},"function"==typeof Symbol&&(U[Symbol.iterator]=function(){return this}),U;function N(M){return function(j){return function(M){if(x)throw new TypeError("Generator is already executing.");for(;I;)try{if(x=1,k&&(F=2&M[0]?k.return:M[0]?k.throw||((F=k.return)&&F.call(k),0):k.next)&&!(F=F.call(k,M[1])).done)return F;switch(k=0,F&&(M=[2&M[0],F.value]),M[0]){case 0:case 1:F=M;break;case 4:return I.label++,{value:M[1],done:!1};case 5:I.label++,k=M[1],M=[0];continue;case 7:M=I.ops.pop(),I.trys.pop();continue;default:if(!(F=(F=I.trys).length>0&&F[F.length-1])&&(6===M[0]||2===M[0])){I=0;continue}if(3===M[0]&&(!F||M[1]>F[0]&&M[1]<F[3])){I.label=M[1];break}if(6===M[0]&&I.label<F[1]){I.label=F[1],F=M;break}if(F&&I.label<F[2]){I.label=F[2],I.ops.push(M);break}F[2]&&I.ops.pop(),I.trys.pop();continue}M=m.call(b,I)}catch(j){M=[6,j],k=0}finally{x=F=0}if(5&M[0])throw M[1];return{value:M[0]?M[1]:void 0,done:!0}}([M,j])}}};Object.defineProperty(u,"__esModule",{value:!0});var p=c(2782),T=c(7643),l=c(4239),C=c(9638),P=c(759),w=c(8202),f=p.sdkVersion,_=function(){function b(m,I){void 0===m&&(m=void 0),void 0===I&&(I=void 0),this.clientId=w.uuidv4(),this.origin=window.location.origin,this.requestCallbacks={},this.debug=!1,this.iframeLoaded=!1,this.logger=m,this.iframeId="Microsoft_Omnichannel_AMSClient_Iframe_Window",I&&I.multiClient&&(this.iframeId=this.clientId)}return b.prototype.setDebug=function(m){this.debug=m},b.prototype.setup=function(){return E(this,void 0,void 0,function(){var m=this;return d(this,function(I){switch(I.label){case 0:if(this.debug&&console.log("[FramedClient][initialize]"),this.onMessageEvent(function(x){return m.handleEvent(x)}),!l.default.isBrowser())throw new Error("FramedMode was used in non-Web platform");return[4,this.loadIframe()];case 1:return I.sent(),this.iframeLoaded||!T.default.silentError&&console.error("iframe not loaded"),[2]}})})},b.prototype.initialize=function(m){return E(this,void 0,void 0,function(){return d(this,function(I){switch(I.label){case 0:return this.debug&&console.log("[FramedClient][initialize]"),this.chatToken=m.chatToken,[4,this.skypeTokenAuth()];case 1:return I.sent(),[2]}})})},b.prototype.skypeTokenAuth=function(m){return void 0===m&&(m=null),E(this,void 0,void 0,function(){var I,x=this;return d(this,function(k){switch(k.label){case 0:return this.debug&&console.log("[FramedClient][skypeAuth]"),I={chatToken:m||this.chatToken},[4,this.loadIframe()];case 1:return k.sent(),[2,new Promise(function(F,U){x.postMessage(P.default.Request,C.default.SkypeTokenAuth,I,F,U)})]}})})},b.prototype.createObject=function(m,I,x){return void 0===x&&(x=null),E(this,void 0,void 0,function(){var k,F=this;return d(this,function(U){switch(U.label){case 0:return this.debug&&console.log("[FramedClient][createObject]"),k={id:m,file:I,chatToken:x||this.chatToken},[4,this.loadIframe()];case 1:return U.sent(),[2,new Promise(function(N,R){F.postMessage(P.default.Request,C.default.CreateObject,k,N,R)})]}})})},b.prototype.uploadDocument=function(m,I,x){return void 0===x&&(x=null),E(this,void 0,void 0,function(){var k,F=this;return d(this,function(U){switch(U.label){case 0:return this.debug&&console.log("[FramedClient][uploadDocument]"),k={documentId:m,file:I,chatToken:x||this.chatToken},[4,this.loadIframe()];case 1:return U.sent(),[2,new Promise(function(N,R){F.postMessage(P.default.Request,C.default.UploadDocument,k,N,R)})]}})})},b.prototype.getViewStatus=function(m,I){return void 0===I&&(I=null),E(this,void 0,void 0,function(){var x,k=this;return d(this,function(F){switch(F.label){case 0:return x={fileMetadata:m,chatToken:I||this.chatToken},[4,this.loadIframe()];case 1:return F.sent(),[2,new Promise(function(U,N){k.postMessage(P.default.Request,C.default.GetViewStatus,x,U,N)})]}})})},b.prototype.getView=function(m,I,x){return void 0===x&&(x=null),E(this,void 0,void 0,function(){var k,F=this;return d(this,function(U){switch(U.label){case 0:return k={fileMetadata:m,viewLocation:I,chatToken:x||this.chatToken},[4,this.loadIframe()];case 1:return U.sent(),[2,new Promise(function(N,R){F.postMessage(P.default.Request,C.default.GetView,k,N,R)})]}})})},b.prototype.fetchBlob=function(m){return E(this,void 0,void 0,function(){var k;return d(this,function(F){switch(F.label){case 0:return F.trys.push([0,3,,4]),[4,fetch(m)];case 1:return[4,F.sent().blob()];case 2:return[2,F.sent()];case 3:throw k=F.sent(),!T.default.silentError&&console.log(k),new Error("fetchBlob");case 4:return[2]}})})},b.prototype.onMessageEvent=function(m){window.addEventListener("message",m,!0)},b.prototype.postMessage=function(m,I,x,k,F){void 0===x&&(x={}),void 0===k&&(k=function(N){return{}}),void 0===F&&(F=function(N){return{}});var U=w.uuidv4();this.requestCallbacks[U]={resolve:k,reject:F},this.targetWindow?this.targetWindow.postMessage(s({clientId:this.clientId,requestId:U,eventType:m,eventName:I},x),"*"):!T.default.silentError&&console.error("Target window not found!")},b.prototype.handleEvent=function(m){var I;return E(this,void 0,void 0,function(){var x;return d(this,function(k){return m.origin===this.origin||p.baseUrl.includes(m.origin)?(m.data.clientId!==this.clientId||(this.debug&&console.log(m),m.source&&(this.targetWindow=m.source),m.data.eventType===P.default.Response&&(this.debug&&console.log("[FramedClient][Response]"),x=m.data,m.data.eventName===C.default.SkypeTokenAuth?x.requestId in this.requestCallbacks&&(this.requestCallbacks[x.requestId].resolve(),delete this.requestCallbacks[x.requestId]):m.data.eventName===C.default.CreateObject||m.data.eventName===C.default.UploadDocument||m.data.eventName===C.default.GetViewStatus||m.data.eventName===C.default.GetView?x.requestId in this.requestCallbacks&&(this.requestCallbacks[x.requestId].resolve(x.response),delete this.requestCallbacks[x.requestId]):m.data.eventName===C.default.SendTelemetry&&(null===(I=this.logger)||void 0===I||I.log(x.logLevel,x.logData.Event,x.logData)))),[2]):[2]})})},b.prototype.dispose=function(){var m;null===(m=document.getElementById(this.iframeId))||void 0===m||m.remove(),this.requestCallbacks={},this.iframeLoaded=!1},b.prototype.loadIframe=function(){return E(this,void 0,void 0,function(){var m=this;return d(this,function(I){return[2,new Promise(function(x,k){if(Array.from(document.getElementsByTagName("iframe")).filter(function(R){return R.id==m.iframeId}).length)return x();var N=document.createElement("iframe");N.id=m.iframeId,N.src=p.baseUrl+"/"+f+"/iframe.html?clientId="+m.clientId+"&debug="+m.debug+"&telemetry=true",N.addEventListener("load",function(){m.debug&&console.log("iframe loaded!"),m.iframeLoaded=!0,x()}),N.addEventListener("error",function(){k()}),document.head.append(N)})]})})},b}();u.default=_},1700:function(K,u,c){"use strict";var s=this&&this.__awaiter||function(w,f,g,_){return new(g||(g=Promise))(function(m,I){function x(U){try{F(_.next(U))}catch(N){I(N)}}function k(U){try{F(_.throw(U))}catch(N){I(N)}}function F(U){U.done?m(U.value):function(m){return m instanceof g?m:new g(function(I){I(m)})}(U.value).then(x,k)}F((_=_.apply(w,f||[])).next())})},E=this&&this.__generator||function(w,f){var _,b,m,I,g={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]};return I={next:x(0),throw:x(1),return:x(2)},"function"==typeof Symbol&&(I[Symbol.iterator]=function(){return this}),I;function x(F){return function(U){return function(F){if(_)throw new TypeError("Generator is already executing.");for(;g;)try{if(_=1,b&&(m=2&F[0]?b.return:F[0]?b.throw||((m=b.return)&&m.call(b),0):b.next)&&!(m=m.call(b,F[1])).done)return m;switch(b=0,m&&(F=[2&F[0],m.value]),F[0]){case 0:case 1:m=F;break;case 4:return g.label++,{value:F[1],done:!1};case 5:g.label++,b=F[1],F=[0];continue;case 7:F=g.ops.pop(),g.trys.pop();continue;default:if(!(m=(m=g.trys).length>0&&m[m.length-1])&&(6===F[0]||2===F[0])){g=0;continue}if(3===F[0]&&(!m||F[1]>m[0]&&F[1]<m[3])){g.label=F[1];break}if(6===F[0]&&g.label<m[1]){g.label=m[1],m=F;break}if(m&&g.label<m[2]){g.label=m[2],g.ops.push(F);break}m[2]&&g.ops.pop(),g.trys.pop();continue}F=f.call(w,g)}catch(U){F=[6,U],b=0}finally{_=m=0}if(5&F[0])throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}([F,U])}}};Object.defineProperty(u,"__esModule",{value:!0});var d=c(9237),p=c(5356),T=c(9638),l=c(4239),C=c(2782),P=function(){function w(f){void 0===f&&(f=void 0),this.debug=!1,this.logger=f,l.default.isBrowser()&&console.error("FramedMode should be used on Web platform")}return w.prototype.setDebug=function(f){this.debug=f},w.prototype.setup=function(){return s(this,void 0,void 0,function(){return E(this,function(f){return[2,Promise.resolve()]})})},w.prototype.initialize=function(f){return s(this,void 0,void 0,function(){return E(this,function(g){switch(g.label){case 0:return this.debug&&console.log("[FramedlessClient][initialize]"),this.chatToken=f.chatToken,[4,this.skypeTokenAuth()];case 1:return g.sent(),[2]}})})},w.prototype.skypeTokenAuth=function(f){var g,_,b;return void 0===f&&(f=null),s(this,void 0,void 0,function(){var m,I;return E(this,function(x){switch(x.label){case 0:return x.trys.push([0,2,,3]),[4,d.default.skypeTokenAuth(f||this.chatToken)];case 1:return(m=x.sent()).ok||null===(g=this.logger)||void 0===g||g.log(p.default.ERROR,T.default.SkypeTokenAuth,{ChatId:f?f.chatId:null===(_=this.chatToken)||void 0===_?void 0:_.chatId,AMSClientVersion:C.sdkVersion,ExceptionDetails:{status:m.status}}),[2,m];case 2:throw I=x.sent(),null===(b=this.logger)||void 0===b||b.log(p.default.ERROR,T.default.SkypeTokenAuth,{ChatId:f?f.chatId:this.chatToken.chatId,AMSClientVersion:C.sdkVersion,ExceptionDetails:I}),new Error("skypeTokenAuth");case 3:return[2]}})})},w.prototype.createObject=function(f,g,_){var b;return void 0===_&&(_=null),s(this,void 0,void 0,function(){var I;return E(this,function(x){switch(x.label){case 0:return x.trys.push([0,2,,3]),[4,d.default.createObject(f,g,_||this.chatToken)];case 1:return[2,x.sent()];case 2:throw I=x.sent(),null===(b=this.logger)||void 0===b||b.log(p.default.ERROR,T.default.CreateObject,{ChatId:_?_.chatId:this.chatToken.chatId,AMSClientVersion:C.sdkVersion,ExceptionDetails:I}),new Error("createObject");case 3:return[2]}})})},w.prototype.uploadDocument=function(f,g,_){var b;return void 0===_&&(_=null),s(this,void 0,void 0,function(){var I;return E(this,function(x){switch(x.label){case 0:return x.trys.push([0,2,,3]),[4,d.default.uploadDocument(f,g,_||this.chatToken)];case 1:return[2,x.sent()];case 2:throw I=x.sent(),null===(b=this.logger)||void 0===b||b.log(p.default.ERROR,T.default.UploadDocument,{ChatId:_?_.chatId:this.chatToken.chatId,AMSClientVersion:C.sdkVersion,ExceptionDetails:I}),new Error("uploadDocument");case 3:return[2]}})})},w.prototype.getViewStatus=function(f,g){var _;return void 0===g&&(g=null),s(this,void 0,void 0,function(){var m;return E(this,function(I){switch(I.label){case 0:return I.trys.push([0,2,,3]),[4,d.default.getViewStatus(f,g||this.chatToken)];case 1:return[2,I.sent()];case 2:throw m=I.sent(),null===(_=this.logger)||void 0===_||_.log(p.default.ERROR,T.default.GetViewStatus,{ChatId:g?g.chatId:this.chatToken.chatId,AMSClientVersion:C.sdkVersion,ExceptionDetails:m}),new Error("getViewStatus");case 3:return[2]}})})},w.prototype.getView=function(f,g,_){var b;return void 0===_&&(_=null),s(this,void 0,void 0,function(){var I;return E(this,function(x){switch(x.label){case 0:return x.trys.push([0,2,,3]),[4,d.default.getView(f,g,_||this.chatToken)];case 1:return[2,x.sent()];case 2:throw I=x.sent(),null===(b=this.logger)||void 0===b||b.log(p.default.ERROR,T.default.GetView,{ChatId:_?_.chatId:this.chatToken.chatId,AMSClientVersion:C.sdkVersion,ExceptionDetails:I}),new Error("getView");case 3:return[2]}})})},w.prototype.fetchBlob=function(f){return s(this,void 0,void 0,function(){var b;return E(this,function(m){switch(m.label){case 0:return m.trys.push([0,3,,4]),[4,fetch(f)];case 1:return[4,m.sent().blob()];case 2:return[2,m.sent()];case 3:throw b=m.sent(),console.log(b),new Error("fetchBlob");case 4:return[2]}})})},w}();u.default=P},7643:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=function(){function s(){}return s.silentError=!0,s.debug=!1,s}();u.default=c},5356:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=(()=>{return(s=c||(c={})).INFO="INFO",s.DEBUG="DEBUG",s.WARN="WARN",s.ERROR="ERROR",s.LOG="LOG",c;var s})();u.default=c},9638:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=(()=>{return(s=c||(c={})).IframeLoaded="AMSIframeLoaded",s.SkypeTokenAuth="AMSSkypeTokenAuth",s.CreateObject="AMSCreateObject",s.UploadDocument="AMSUploadDocument",s.GetViewStatus="AMSGetViewStatus",s.GetView="AMSGetView",s.SendTelemetry="AMSSendTelemetry",c;var s})();u.default=c},759:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=(()=>{return(s=c||(c={})).None="None",s.Request="Request",s.Response="Response",c;var s})();u.default=c},2782:(K,u)=>{u.baseUrl="https://comms.omnichannelengagementhub.com/ams",u.sdkVersion="0.1.0"},3285:function(K,u,c){"use strict";var s=this&&this.__awaiter||function(P,w,f,g){return new(f||(f=Promise))(function(b,m){function I(F){try{k(g.next(F))}catch(U){m(U)}}function x(F){try{k(g.throw(F))}catch(U){m(U)}}function k(F){F.done?b(F.value):function(b){return b instanceof f?b:new f(function(m){m(b)})}(F.value).then(I,x)}k((g=g.apply(P,w||[])).next())})},E=this&&this.__generator||function(P,w){var g,_,b,m,f={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return m={next:I(0),throw:I(1),return:I(2)},"function"==typeof Symbol&&(m[Symbol.iterator]=function(){return this}),m;function I(k){return function(F){return function(k){if(g)throw new TypeError("Generator is already executing.");for(;f;)try{if(g=1,_&&(b=2&k[0]?_.return:k[0]?_.throw||((b=_.return)&&b.call(_),0):_.next)&&!(b=b.call(_,k[1])).done)return b;switch(_=0,b&&(k=[2&k[0],b.value]),k[0]){case 0:case 1:b=k;break;case 4:return f.label++,{value:k[1],done:!1};case 5:f.label++,_=k[1],k=[0];continue;case 7:k=f.ops.pop(),f.trys.pop();continue;default:if(!(b=(b=f.trys).length>0&&b[b.length-1])&&(6===k[0]||2===k[0])){f=0;continue}if(3===k[0]&&(!b||k[1]>b[0]&&k[1]<b[3])){f.label=k[1];break}if(6===k[0]&&f.label<b[1]){f.label=b[1],b=k;break}if(b&&f.label<b[2]){f.label=b[2],f.ops.push(k);break}b[2]&&f.ops.pop(),f.trys.pop();continue}k=w.call(P,f)}catch(F){k=[6,F],_=0}finally{g=b=0}if(5&k[0])throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}([k,F])}}};Object.defineProperty(u,"__esModule",{value:!0});var d=c(7987),p=c(4543),T=c(1700),l=c(7643);u.default=function(P){return s(void 0,void 0,void 0,function(){var w,f,g;return E(this,function(_){switch(_.label){case 0:return P.debug&&console.log("[createAMSClient] "+(P.framedMode?"FramedClient":"FramedlessClient")),w=new d.default(P.logger),f={multiClient:P.multiClient||!1},[4,(g=P.framedMode?new p.default(w,f):new T.default(w)).setup()];case 1:return _.sent(),P.debug&&g.setDebug(P.debug||!1),l.default.debug=P.debug||!1,l.default.silentError=P.silentError||!0,[2,g]}})})}},7463:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=c(3285),E=c(1700),d=c(4543);u.default=s.default,function(){if(void 0===typeof window)throw new Error("window object not found");"Microsoft"in window||(window.Microsoft={}),"CRM"in window.Microsoft||(window.Microsoft.CRM={}),"Omnichannel"in window.Microsoft.CRM||(window.Microsoft.CRM.Omnichannel={}),"AMSClient"in window.Microsoft.CRM.Omnichannel||(window.Microsoft.CRM.Omnichannel.AMS={SDK:{createAMSClient:s.default,FramedClient:d.default,FramedlessClient:E.default}})}()},4239:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.isReactNative=u.isNode=u.isBrowser=void 0,u.isBrowser=function(){return"undefined"!=typeof window&&void 0!==window.document},u.isNode=function(){return"undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node},u.isReactNative=function(){return"undefined"!=typeof navigator&&"ReactNative"==navigator.product},u.default={isBrowser:u.isBrowser,isNode:u.isNode,isReactNative:u.isReactNative}},8202:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.uuidv4=void 0,u.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){var E=16*Math.random()|0;return("x"===s?E:3&E|8).toString(16)})}},7626:function(K,u,c){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(me){for(var ee,le=1,Ce=arguments.length;le<Ce;le++)for(var ye in ee=arguments[le])Object.prototype.hasOwnProperty.call(ee,ye)&&(me[ye]=ee[ye]);return me}).apply(this,arguments)},E=this&&this.__awaiter||function(me,ee,le,Ce){return new(le||(le=Promise))(function(ge,Ee){function De(Be){try{Ie(Ce.next(Be))}catch(He){Ee(He)}}function Fe(Be){try{Ie(Ce.throw(Be))}catch(He){Ee(He)}}function Ie(Be){Be.done?ge(Be.value):function(ge){return ge instanceof le?ge:new le(function(Ee){Ee(ge)})}(Be.value).then(De,Fe)}Ie((Ce=Ce.apply(me,ee||[])).next())})},d=this&&this.__generator||function(me,ee){var Ce,ye,ge,Ee,le={label:0,sent:function(){if(1&ge[0])throw ge[1];return ge[1]},trys:[],ops:[]};return Ee={next:De(0),throw:De(1),return:De(2)},"function"==typeof Symbol&&(Ee[Symbol.iterator]=function(){return this}),Ee;function De(Ie){return function(Be){return function(Ie){if(Ce)throw new TypeError("Generator is already executing.");for(;le;)try{if(Ce=1,ye&&(ge=2&Ie[0]?ye.return:Ie[0]?ye.throw||((ge=ye.return)&&ge.call(ye),0):ye.next)&&!(ge=ge.call(ye,Ie[1])).done)return ge;switch(ye=0,ge&&(Ie=[2&Ie[0],ge.value]),Ie[0]){case 0:case 1:ge=Ie;break;case 4:return le.label++,{value:Ie[1],done:!1};case 5:le.label++,ye=Ie[1],Ie=[0];continue;case 7:Ie=le.ops.pop(),le.trys.pop();continue;default:if(!(ge=(ge=le.trys).length>0&&ge[ge.length-1])&&(6===Ie[0]||2===Ie[0])){le=0;continue}if(3===Ie[0]&&(!ge||Ie[1]>ge[0]&&Ie[1]<ge[3])){le.label=Ie[1];break}if(6===Ie[0]&&le.label<ge[1]){le.label=ge[1],ge=Ie;break}if(ge&&le.label<ge[2]){le.label=ge[2],le.ops.push(Ie);break}ge[2]&&le.ops.pop(),le.trys.pop();continue}Ie=ee.call(me,le)}catch(Be){Ie=[6,Be],ye=0}finally{Ce=ge=0}if(5&Ie[0])throw Ie[1];return{value:Ie[0]?Ie[1]:void 0,done:!0}}([Ie,Be])}}},p=this&&this.__spreadArrays||function(){for(var me=0,ee=0,le=arguments.length;ee<le;ee++)me+=arguments[ee].length;var Ce=Array(me),ye=0;for(ee=0;ee<le;ee++)for(var ge=arguments[ee],Ee=0,De=ge.length;Ee<De;Ee++,ye++)Ce[ye]=ge[Ee];return Ce};Object.defineProperty(u,"__esModule",{value:!0});var T=c(2811),l=c(2902),C=c(3762),P=c(6406),w=c(8098),f=c(641),g=c(8953),_=c(2921),b=c(6419),m=c(2562),I=c(7925),x=c(2900),k=c(4694),F=c(2217),U=c(6194),N=c(8191),R=c(5642),M=c(448),j=c(3372),W=c(4352),$=c(5655),ce=c(1247),Q=c(9600),te=c(7463),ae=c(9340),he=c(838),Se=c(6633),oe=c(813),ne=c(8290),pe=c(9425),re=c(6345),J=c(7616),se=function(){function me(ee,le){var Ce,ye,ge,Ee,De,Fe,Ie;void 0===le&&(le=f.defaultChatSDKConfig),this.ACSClient=null,this.AMSClient=null,this.authSettings=null,this.authenticatedUserToken=null,this.conversation=null,this.callingOption=b.default.NoCalling,this.telemetry=null,this.ic3ClientLogger=null,this.ocSdkLogger=null,this.acsClientLogger=null,this.acsAdapterLogger=null,this.isPersistentChat=!1,this.isChatReconnect=!1,this.reconnectId=null,this.refreshTokenTimer=null,this.debug=!1,this.omnichannelConfig=ee,this.chatSDKConfig=s(s({},f.defaultChatSDKConfig),le),this.isInitialized=!1,this.liveChatVersion=N.default.V1,this.requestId=C.uuidv4(),this.chatToken={},this.liveChatConfig={},this.dataMaskingRules={},this.authSettings=null,this.preChatSurvey=null,this.telemetry=he.default(this.debug),this.scenarioMarker=new ce.default(this.omnichannelConfig),this.ic3ClientLogger=T.createIC3ClientLogger(this.omnichannelConfig),this.ocSdkLogger=T.createOCSDKLogger(this.omnichannelConfig),this.acsClientLogger=T.createACSClientLogger(this.omnichannelConfig),this.acsAdapterLogger=T.createACSAdapterLogger(this.omnichannelConfig),this.scenarioMarker.useTelemetry(this.telemetry),this.ic3ClientLogger.useTelemetry(this.telemetry),this.ocSdkLogger.useTelemetry(this.telemetry),this.acsClientLogger.useTelemetry(this.telemetry),this.acsAdapterLogger.useTelemetry(this.telemetry),J.default(ee),f.default(le),(null===(Ce=this.chatSDKConfig.telemetry)||void 0===Ce?void 0:Ce.disable)&&(null===(ye=this.telemetry)||void 0===ye||ye.disable()),(null===(ge=this.chatSDKConfig.telemetry)||void 0===ge?void 0:ge.ariaTelemetryKey)&&this.telemetry.initialize(this.chatSDKConfig.telemetry.ariaTelemetryKey),null===(Ee=this.ic3ClientLogger)||void 0===Ee||Ee.setRequestId(this.requestId),null===(De=this.ocSdkLogger)||void 0===De||De.setRequestId(this.requestId),null===(Fe=this.acsClientLogger)||void 0===Fe||Fe.setRequestId(this.requestId),null===(Ie=this.acsAdapterLogger)||void 0===Ie||Ie.setRequestId(this.requestId)}return me.prototype.setDebug=function(ee){var le,Ce,ye,ge,Ee,De;this.debug=ee,null===(le=this.AMSClient)||void 0===le||le.setDebug(ee),null===(Ce=this.telemetry)||void 0===Ce||Ce.setDebug(ee),this.scenarioMarker.setDebug(ee),null===(ye=this.ic3ClientLogger)||void 0===ye||ye.setDebug(ee),null===(ge=this.ocSdkLogger)||void 0===ge||ge.setDebug(ee),null===(Ee=this.acsClientLogger)||void 0===Ee||Ee.setDebug(ee),null===(De=this.acsAdapterLogger)||void 0===De||De.setDebug(ee)},me.prototype.initialize=function(){return E(this,void 0,void 0,function(){var ee,le,Ce;return d(this,function(ge){switch(ge.label){case 0:if(this.scenarioMarker.startScenario(Q.default.InitializeChatSDK),this.isInitialized)return this.scenarioMarker.completeScenario(Q.default.InitializeChatSDK),[2,this.liveChatConfig];ge.label=1;case 1:return ge.trys.push([1,8,,9]),this.OCSDKProvider=C.SDKProvider,ee=this,[4,C.SDKProvider.getSDK(this.omnichannelConfig,{},this.ocSdkLogger)];case 2:return ee.OCClient=ge.sent(),[4,this.getChatConfig()];case 3:return ge.sent(),this.liveChatVersion!==N.default.V2?[3,5]:(this.ACSClient=new l.default(this.acsClientLogger),le=this,[4,te.default({framedMode:w.isBrowser(),debug:!1,logger:void 0})]);case 4:return le.AMSClient=ge.sent(),[3,7];case 5:return Ce=this,[4,this.getIC3Client()];case 6:Ce.IC3Client=ge.sent(),ge.label=7;case 7:return this.isInitialized=!0,this.scenarioMarker.completeScenario(Q.default.InitializeChatSDK),[3,9];case 8:return ge.sent(),this.scenarioMarker.failScenario(Q.default.InitializeChatSDK),[3,9];case 9:return[2,this.liveChatConfig]}})})},me.prototype.getChatReconnectContext=function(ee){return void 0===ee&&(ee={}),E(this,void 0,void 0,function(){var le,ye,ge,De,Fe,Ee;return d(this,function(Ie){switch(Ie.label){case 0:if(this.scenarioMarker.startScenario(Q.default.GetChatReconnectContext,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),le={reconnectId:null,redirectURL:null},!this.authenticatedUserToken)return[3,5];Ie.label=1;case 1:return Ie.trys.push([1,3,,4]),[4,this.OCClient.getReconnectableChats({authenticatedUserToken:this.authenticatedUserToken})];case 2:return(ye=Ie.sent())&&ye.reconnectid&&(le.reconnectId=ye.reconnectid),this.scenarioMarker.completeScenario(Q.default.GetChatReconnectContext,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,4];case 3:return ge=Ie.sent(),Ee={response:"OCClientGetReconnectableChatsFailed"},this.scenarioMarker.failScenario(Q.default.GetChatReconnectContext,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(Ee)}),console.error("OmnichannelChatSDK/GetChatReconnectContext/error "+ge),[3,4];case 4:return[3,9];case 5:if(!ee.reconnectId)return[3,9];Ie.label=6;case 6:return Ie.trys.push([6,8,,9]),[4,this.OCClient.getReconnectAvailability(ee.reconnectId)];case 7:return(De=Ie.sent())&&!De.isReconnectAvailable?De.reconnectRedirectionURL&&(le.redirectURL=De.reconnectRedirectionURL):le.reconnectId=ee.reconnectId,this.scenarioMarker.completeScenario(Q.default.GetChatReconnectContext,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,9];case 8:return Fe=Ie.sent(),Ee={response:"OCClientGetReconnectAvailabilityFailed"},this.scenarioMarker.failScenario(Q.default.GetChatReconnectContext,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(Ee)}),console.error("OmnichannelChatSDK/GetChatReconnectContext/error "+Fe),[3,9];case 9:return[2,le]}})})},me.prototype.startChat=function(ee){var le,Ce,ye,ge,Ee,De,Fe,Ie,Be,He,Ve,$e,Je;return void 0===ee&&(ee={}),E(this,void 0,void 0,function(){var je,Ht,on,wn,ir,Le,ze,Ye,At,Mt,nn,ke,kr=this;return d(this,function(xt){switch(xt.label){case 0:if(this.scenarioMarker.startScenario(Q.default.StartChat,{RequestId:this.requestId}),this.isChatReconnect&&!(null===(le=this.chatSDKConfig.chatReconnect)||void 0===le?void 0:le.disable)&&!this.isPersistentChat&&ee.reconnectId&&(this.reconnectId=ee.reconnectId),!this.isPersistentChat||(null===(Ce=this.chatSDKConfig.persistentChat)||void 0===Ce?void 0:Ce.disable))return[3,4];xt.label=1;case 1:return xt.trys.push([1,3,,4]),[4,this.OCClient.getReconnectableChats({authenticatedUserToken:this.authenticatedUserToken})];case 2:return(je=xt.sent())&&je.reconnectid&&(this.reconnectId=je.reconnectid),[3,4];case 3:throw xt.sent(),ke={response:"OCClientGetReconnectableChatsFailed"},Error(ke.response);case 4:return!ee.liveChatContext||this.isPersistentChat||this.isChatReconnect?[3,6]:(this.chatToken=ee.liveChatContext.chatToken||{},this.requestId=ee.liveChatContext.requestId||C.uuidv4(),[4,this.getConversationDetails()]);case 5:if(Ht=xt.sent(),0===Object.keys(Ht).length)throw ke={response:"InvalidConversation"},this.scenarioMarker.failScenario(Q.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(ke)}),console.error("Conversation not found"),Error(ke.response);if(Ht.state===R.default.WrapUp||Ht.state===R.default.Closed)throw ke={response:"ClosedConversation"},this.scenarioMarker.failScenario(Q.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(ke)}),console.error("Unable to join conversation that's in '"+Ht.state+"' state"),Error(ke.response);xt.label=6;case 6:return this.chatToken&&0===Object.keys(this.chatToken).length?[4,this.getChatToken(!1)]:[3,8];case 7:xt.sent(),xt.label=8;case 8:null===(ye=this.ic3ClientLogger)||void 0===ye||ye.setChatId(this.chatToken.chatId||""),null===(ge=this.ocSdkLogger)||void 0===ge||ge.setChatId(this.chatToken.chatId||""),null===(Ee=this.acsClientLogger)||void 0===Ee||Ee.setChatId(this.chatToken.chatId||""),null===(De=this.acsAdapterLogger)||void 0===De||De.setChatId(this.chatToken.chatId||""),on={initContext:{}},this.isPersistentChat&&!(null===(Fe=this.chatSDKConfig.persistentChat)||void 0===Fe?void 0:Fe.disable)&&(on.reconnectId=this.reconnectId),this.isChatReconnect&&!(null===(Ie=this.chatSDKConfig.chatReconnect)||void 0===Ie?void 0:Ie.disable)&&!this.isPersistentChat&&(on.reconnectId=this.reconnectId),ee.customContext&&(on.initContext.customContextData=ee.customContext),ee.browser&&(on.initContext.browser=ee.browser),ee.os&&(on.initContext.os=ee.os),ee.locale&&(on.initContext.locale=ee.locale),ee.device&&(on.initContext.device=ee.device),ee.preChatResponse&&(on.initContext.preChatResponse=ee.preChatResponse),ee.initContext&&(on.initContext=ee.initContext),this.authenticatedUserToken&&(on.authenticatedUserToken=this.authenticatedUserToken),xt.label=9;case 9:return xt.trys.push([9,11,,12]),[4,this.OCClient.sessionInit(this.requestId,on)];case 10:return xt.sent(),[3,12];case 11:return wn=xt.sent(),ke={response:"OCClientSessionInitFailed"},this.scenarioMarker.failScenario(Q.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(ke)}),console.error("OmnichannelChatSDK/startChat/sessionInit/error "+wn),[2,wn];case 12:if(this.liveChatVersion!==N.default.V2)return[3,23];ir={token:this.chatToken.token,id:this.chatToken.visitorId||"teamsvisitor",threadId:this.chatToken.chatId,environmentUrl:this.chatToken.acsEndpoint,pollingInterval:1e3},xt.label=13;case 13:return xt.trys.push([13,15,,16]),[4,null===(Be=this.ACSClient)||void 0===Be?void 0:Be.initialize({token:ir.token,environmentUrl:ir.environmentUrl})];case 14:return xt.sent(),[3,16];case 15:return Le=xt.sent(),ke={response:"ACSClientInitializeFailed"},this.scenarioMarker.failScenario(Q.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(ke)}),console.error("OmnichannelChatSDK/startChat/initialize/error "+Le),[2,Le];case 16:return xt.trys.push([16,18,,19]),ze=this,[4,null===(He=this.ACSClient)||void 0===He?void 0:He.joinConversation({id:ir.id,threadId:ir.threadId,pollingInterval:ir.pollingInterval})];case 17:return ze.conversation=xt.sent(),this.scenarioMarker.completeScenario(Q.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,19];case 18:throw Ye=xt.sent(),ke={response:"ACSClientJoinConversationFailed"},this.scenarioMarker.failScenario(Q.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(ke)}),console.error("OmnichannelChatSDK/startChat/joinConversation/error "+Ye),Error(ke.response);case 19:return xt.trys.push([19,21,,22]),[4,null===(Ve=this.AMSClient)||void 0===Ve?void 0:Ve.initialize({chatToken:this.chatToken})];case 20:return xt.sent(),[3,22];case 21:throw xt.sent(),ke={response:"AMSClientInitializeFailed"},this.scenarioMarker.failScenario(Q.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(ke)}),Error(ke.response);case 22:return[3,29];case 23:return xt.trys.push([23,25,,26]),[4,this.IC3Client.initialize({token:this.chatToken.token,regionGtms:this.chatToken.regionGTMS,visitor:!0})];case 24:return xt.sent(),[3,26];case 25:return At=xt.sent(),ke={response:"IC3ClientInitializeFailed"},this.scenarioMarker.failScenario(Q.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(ke)}),console.error("OmnichannelChatSDK/startChat/initialize/error "+At),[2,At];case 26:return xt.trys.push([26,28,,29]),Mt=this,[4,this.IC3Client.joinConversation(this.chatToken.chatId)];case 27:return Mt.conversation=xt.sent(),this.scenarioMarker.completeScenario(Q.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,29];case 28:return nn=xt.sent(),ke={response:"IC3ClientJoinConversationFailed"},this.scenarioMarker.failScenario(Q.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(ke)}),console.error("OmnichannelChatSDK/startChat/joinConversation/error "+nn),[2,nn];case 29:return this.isPersistentChat&&!(null===($e=this.chatSDKConfig.persistentChat)||void 0===$e?void 0:$e.disable)&&(this.refreshTokenTimer=setInterval(function(){return E(kr,void 0,void 0,function(){return d(this,function(Mo){switch(Mo.label){case 0:return[4,this.getChatToken(!1)];case 1:return Mo.sent(),this.updateChatToken(this.chatToken.token,this.chatToken.regionGTMS),[2]}})})},null===(Je=this.chatSDKConfig.persistentChat)||void 0===Je?void 0:Je.tokenUpdateTime)),[2]}})})},me.prototype.endChat=function(){var ee,le,Ce,ye,ge,Ee,De,Fe,Ie,Be,He;return E(this,void 0,void 0,function(){var Ve,$e,Ke;return d(this,function(tt){switch(tt.label){case 0:this.scenarioMarker.startScenario(Q.default.EndChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),Ve={},this.isPersistentChat&&!(null===(ee=this.chatSDKConfig.persistentChat)||void 0===ee?void 0:ee.disable)&&($e=null!==this.reconnectId,Ve.isPersistentChat=this.isPersistentChat,Ve.isReconnectChat=$e),this.isChatReconnect&&!(null===(le=this.chatSDKConfig.chatReconnect)||void 0===le?void 0:le.disable)&&!this.isPersistentChat&&(Ve.isReconnectChat=null!==this.reconnectId),this.authenticatedUserToken&&(Ve.authenticatedUserToken=this.authenticatedUserToken),tt.label=1;case 1:return tt.trys.push([1,3,,4]),[4,this.OCClient.sessionClose(this.requestId,Ve)];case 2:return tt.sent(),this.scenarioMarker.completeScenario(Q.default.EndChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),null===(Ce=this.conversation)||void 0===Ce||Ce.disconnect(),this.conversation=null,this.requestId=C.uuidv4(),this.chatToken={},this.reconnectId=null,null===(ye=this.ic3ClientLogger)||void 0===ye||ye.setRequestId(this.requestId),null===(ge=this.ic3ClientLogger)||void 0===ge||ge.setChatId(""),null===(Ee=this.ocSdkLogger)||void 0===Ee||Ee.setRequestId(this.requestId),null===(De=this.ocSdkLogger)||void 0===De||De.setChatId(""),null===(Fe=this.acsClientLogger)||void 0===Fe||Fe.setRequestId(this.requestId),null===(Ie=this.acsClientLogger)||void 0===Ie||Ie.setChatId(""),null===(Be=this.acsAdapterLogger)||void 0===Be||Be.setRequestId(this.requestId),null===(He=this.acsAdapterLogger)||void 0===He||He.setChatId(""),[3,4];case 3:return Ke=tt.sent(),this.scenarioMarker.failScenario(Q.default.EndChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify({response:"OCClientSessionCloseFailed"})}),console.error("OmnichannelChatSDK/endChat/error "+Ke),[2,Ke];case 4:return null!==this.refreshTokenTimer&&(clearInterval(this.refreshTokenTimer),this.refreshTokenTimer=null),[2]}})})},me.prototype.getCurrentLiveChatContext=function(){return E(this,void 0,void 0,function(){var ee,le,Ce;return d(this,function(ye){switch(ye.label){case 0:return[4,this.getChatToken()];case 1:return ee=ye.sent(),this.scenarioMarker.startScenario(Q.default.GetCurrentLiveChatContext,{RequestId:le=this.requestId,ChatId:ee.chatId}),Ce={chatToken:ee,requestId:le},0===Object.keys(Ce.chatToken).length?[2,{}]:(this.scenarioMarker.completeScenario(Q.default.GetCurrentLiveChatContext,{RequestId:le,ChatId:ee.chatId}),[2,Ce])}})})},me.prototype.getConversationDetails=function(){var ee,le;return E(this,void 0,void 0,function(){var Ce,Ee,De,Fe;return d(this,function(Ie){switch(Ie.label){case 0:this.scenarioMarker.startScenario(Q.default.GetConversationDetails,{RequestId:this.requestId,ChatId:(null===(ee=this.chatToken)||void 0===ee?void 0:ee.chatId)||""}),Ie.label=1;case 1:return Ie.trys.push([1,3,,4]),[4,this.OCClient.getLWIDetails(this.requestId)];case 2:return Ce=Ie.sent(),De={state:Ce.State,conversationId:Ce.ConversationId},(Ee=Ce.AgentAcceptedOn)&&(De.agentAcceptedOn=Ee),this.scenarioMarker.completeScenario(Q.default.GetConversationDetails,{RequestId:this.requestId,ChatId:(null===(le=this.chatToken)||void 0===le?void 0:le.chatId)||""}),[2,De];case 3:return Fe=Ie.sent(),this.scenarioMarker.failScenario(Q.default.GetConversationDetails,{RequestId:this.requestId,ChatId:this.chatToken.chatId||""}),console.error("OmnichannelChatSDK/getConversationDetails/error "+Fe),[3,4];case 4:return[2,{}]}})})},me.prototype.getPreChatSurvey=function(ee){return void 0===ee&&(ee=!0),E(this,void 0,void 0,function(){var le;return d(this,function(Ce){this.scenarioMarker.startScenario(Q.default.GetPreChatSurvey);try{return le=ee?JSON.parse(this.preChatSurvey):this.preChatSurvey,this.scenarioMarker.completeScenario(Q.default.GetPreChatSurvey),[2,le]}catch(ye){this.scenarioMarker.failScenario(Q.default.GetPreChatSurvey)}return[2]})})},me.prototype.getLiveChatConfig=function(ee){return void 0===ee&&(ee=!0),E(this,void 0,void 0,function(){return d(this,function(le){return ee?[2,this.liveChatConfig]:[2,this.getChatConfig()]})})},me.prototype.getChatToken=function(ee){var le,Ce;return void 0===ee&&(ee=!0),E(this,void 0,void 0,function(){var ye,ge,De,Ie,Be,He,Ve,$e,Je;return d(this,function(je){switch(je.label){case 0:if(this.scenarioMarker.startScenario(Q.default.GetChatToken,{RequestId:this.requestId}),ee)return[3,5];je.label=1;case 1:return je.trys.push([1,3,,4]),ye={},this.authenticatedUserToken&&(ye.authenticatedUserToken=this.authenticatedUserToken),this.isPersistentChat&&!(null===(le=this.chatSDKConfig.persistentChat)||void 0===le?void 0:le.disable)&&(ye.reconnectId=this.reconnectId),this.isChatReconnect&&!(null===(Ce=this.chatSDKConfig.chatReconnect)||void 0===Ce?void 0:Ce.disable)&&!this.isPersistentChat&&(ye.reconnectId=this.reconnectId),[4,this.OCClient.getChatToken(this.requestId,ye)];case 2:return ge=je.sent(),De=ge.Token,Ie=ge.ExpiresIn,Be=ge.VisitorId,He=ge.VoiceVideoCallToken,Ve=ge.ACSEndpoint,$e=ge.AttachmentConfiguration,this.chatToken={chatId:ge.ChatId,regionGTMS:JSON.parse(ge.RegionGtms),requestId:this.requestId,token:De,expiresIn:Ie,visitorId:Be,voiceVideoCallToken:He,acsEndpoint:Ve},$e&&$e.AttachmentServiceEndpoint&&(this.chatToken.amsEndpoint=$e.AttachmentServiceEndpoint),this.scenarioMarker.completeScenario(Q.default.GetChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,4];case 3:return Je=je.sent(),this.scenarioMarker.failScenario(Q.default.GetChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify({response:"OCClientGetChatTokenFailed"})}),console.error("OmnichannelChatSDK/getChatToken/error "+Je),[3,4];case 4:return[3,6];case 5:this.scenarioMarker.completeScenario(Q.default.GetChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),je.label=6;case 6:return[2,this.chatToken]}})})},me.prototype.getCallingToken=function(){return E(this,void 0,void 0,function(){return d(this,function(ee){return this.chatToken&&0===Object.keys(this.chatToken).length?[2,""]:this.chatToken.voiceVideoCallToken?(this.debug&&console.log("calling:acs"),[2,this.chatToken.voiceVideoCallToken.Token]):(this.debug&&console.log("calling:skype"),[2,this.chatToken.token])})})},me.prototype.getMessages=function(){var ee;return E(this,void 0,void 0,function(){var le;return d(this,function(ye){switch(ye.label){case 0:this.scenarioMarker.startScenario(Q.default.GetMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),ye.label=1;case 1:return ye.trys.push([1,3,,4]),[4,null===(ee=this.conversation)||void 0===ee?void 0:ee.getMessages()];case 2:return le=ye.sent(),this.scenarioMarker.completeScenario(Q.default.GetMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,le];case 3:return ye.sent(),this.scenarioMarker.failScenario(Q.default.GetMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,4];case 4:return[2]}})})},me.prototype.getDataMaskingRules=function(){return E(this,void 0,void 0,function(){return d(this,function(ee){return[2,this.dataMaskingRules]})})},me.prototype.sendMessage=function(ee){var le;return E(this,void 0,void 0,function(){var Ce,ye,ge,Ee,De,Fe,Be,He,Ve,$e,Ke;return d(this,function(tt){switch(tt.label){case 0:if(this.scenarioMarker.startScenario(Q.default.SendMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),ye=(Ce=this.chatSDKConfig.dataMasking).disable,ge=Ce.maskingCharacter,Ee=ee.content,Object.keys(this.dataMaskingRules).length>0&&!ye)for(De=0,Fe=Object.values(this.dataMaskingRules);De<Fe.length;De++)for(Be=new RegExp(Fe[De],"g"),He=void 0;He=Be.exec(Ee);)Ve=He[0].replace(/./g,ge),Ee=Ee.replace(He[0],Ve);if(ee.content=Ee,this.liveChatVersion!==N.default.V2)return[3,5];$e={content:ee.content},tt.label=1;case 1:return tt.trys.push([1,3,,4]),[4,null===(le=this.conversation)||void 0===le?void 0:le.sendMessage($e)];case 2:return tt.sent(),this.scenarioMarker.completeScenario(Q.default.SendMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,4];case 3:throw tt.sent(),this.scenarioMarker.failScenario(Q.default.SendMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),new Error("ChatSDKSendMessageFailed");case 4:return[3,9];case 5:Ke={content:ee.content,timestamp:new Date,contentType:M.default.Text,deliveryMode:x.default.Bridged,messageType:j.default.UserMessage,properties:void 0,tags:p(oe.defaultMessageTags),sender:{displayName:"Customer",id:"customer",type:W.default.User}},ee.tags&&(Ke.tags=ee.tags),ee.timestamp&&(Ke.timestamp=ee.timestamp),tt.label=6;case 6:return tt.trys.push([6,8,,9]),[4,this.conversation.sendMessage(Ke)];case 7:return tt.sent(),this.scenarioMarker.completeScenario(Q.default.SendMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,9];case 8:throw tt.sent(),this.scenarioMarker.failScenario(Q.default.SendMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),new Error("ChatSDKSendMessageFailed");case 9:return[2]}})})},me.prototype.onNewMessage=function(ee,le){var Ce,ye;return void 0===le&&(le={}),E(this,void 0,void 0,function(){var ge,De,Fe,Be,He,Ee,Ve,$e,Ie,Je,Ke,je=this;return d(this,function(tt){switch(tt.label){case 0:return this.scenarioMarker.startScenario(Q.default.OnNewMessage,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.liveChatVersion!==N.default.V2?[3,3]:(ge=new Set,le.rehydrate?(this.debug&&console.log("[OmnichannelChatSDK][onNewMessage] rehydrate"),[4,this.getMessages()]):[3,2]);case 1:for(Ee=tt.sent(),De=0,Fe=Ee.reverse();De<Fe.length;De++)!ge.has(Be=(Ie=Fe[De]).id)&&(ge.add(Be),ee(Ie));tt.label=2;case 2:try{null===(Ce=this.conversation)||void 0===Ce||Ce.registerOnNewMessage(function(ke){var Ht=ke.id,on=ae.default(ke,{liveChatVersion:je.liveChatVersion,debug:je.debug});ge.has(Ht)||(ee(on),ge.add(Ht))}),this.scenarioMarker.completeScenario(Q.default.OnNewMessage,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(ke){this.scenarioMarker.failScenario(Q.default.OnNewMessage,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}return[3,6];case 3:return He=new Set,le.rehydrate?(this.debug&&console.log("[OmnichannelChatSDK][onNewMessage] rehydrate"),[4,this.getMessages()]):[3,5];case 4:if(Ee=tt.sent())for(Ve=0,$e=Ee.reverse();Ve<$e.length;Ve++)!He.has(Je=(Ie=$e[Ve]).clientmessageid)&&(He.add(Je),Ke=ae.default(Ie,{liveChatVersion:this.liveChatVersion,debug:this.debug}),ee(Ke));tt.label=5;case 5:try{null===(ye=this.conversation)||void 0===ye||ye.registerOnNewMessage(function(ke){var Ht=ke.clientmessageid,on=ke.messageType;if(!pe.isCustomerMessage(ke)&&!He.has(Ht)&&on!==j.default.Typing){var wn=ae.default(ke,{liveChatVersion:je.liveChatVersion,debug:je.debug});ee(wn)}}),this.scenarioMarker.completeScenario(Q.default.OnNewMessage,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(ke){this.scenarioMarker.failScenario(Q.default.OnNewMessage,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}tt.label=6;case 6:return[2]}})})},me.prototype.sendTypingEvent=function(){return E(this,void 0,void 0,function(){var le,Ce,ye,ge;return d(this,function(Ee){switch(Ee.label){case 0:if(this.scenarioMarker.startScenario(Q.default.SendTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.liveChatVersion!==N.default.V2)return[3,6];Ee.label=1;case 1:return Ee.trys.push([1,4,,5]),[4,this.OCClient.sendTypingIndicator(this.requestId,N.default.V2,{customerDisplayName:g.default.Customer})];case 2:return Ee.sent(),[4,this.conversation.sendTyping()];case 3:return Ee.sent(),this.scenarioMarker.completeScenario(Q.default.SendTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,5];case 4:throw Ee.sent(),this.scenarioMarker.failScenario(Q.default.SendTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),new Error("OCClientSendTypingFailed");case 5:return[3,12];case 6:le="{isTyping: 0}",Ee.label=7;case 7:return Ee.trys.push([7,11,,12]),[4,this.conversation.indicateTypingStatus(0)];case 8:return Ee.sent(),[4,this.conversation.getMembers()];case 9:return Ce=Ee.sent(),ye=Ce.filter(function(De){return De.type===W.default.Bot}),[4,this.conversation.sendMessageToBot(ye[0].id,{payload:le})];case 10:return Ee.sent(),this.scenarioMarker.completeScenario(Q.default.SendTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,12];case 11:return ge=Ee.sent(),console.error("OmnichannelChatSDK/sendTypingEvent/error"),this.scenarioMarker.failScenario(Q.default.SendTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,ge];case 12:return[2]}})})},me.prototype.onTypingEvent=function(ee){var le;return E(this,void 0,void 0,function(){return d(this,function(Ce){if(this.scenarioMarker.startScenario(Q.default.OnTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.liveChatVersion===N.default.V2)try{this.conversation.onTypingEvent(ee),this.scenarioMarker.completeScenario(Q.default.OnTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(ye){this.scenarioMarker.failScenario(Q.default.OnTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}else try{null===(le=this.conversation)||void 0===le||le.registerOnNewMessage(function(ye){var ge=ye.messageType;pe.isCustomerMessage(ye)||ge===j.default.Typing&&ee(ye)}),this.scenarioMarker.completeScenario(Q.default.OnTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(ye){this.scenarioMarker.failScenario(Q.default.OnTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}return[2]})})},me.prototype.onAgentEndSession=function(ee){var le;return E(this,void 0,void 0,function(){var Ce=this;return d(this,function(ye){if(this.scenarioMarker.startScenario(Q.default.OnAgentEndSession,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.liveChatVersion===N.default.V2)try{this.conversation.registerOnThreadUpdate(function(ge){ee(ge)}),this.scenarioMarker.completeScenario(Q.default.OnAgentEndSession,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(ge){this.scenarioMarker.failScenario(Q.default.OnAgentEndSession,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}else try{null===(le=this.conversation)||void 0===le||le.registerOnThreadUpdate(function(ge){1===ge.members.length&&(ee(ge),null!==Ce.refreshTokenTimer&&(clearInterval(Ce.refreshTokenTimer),Ce.refreshTokenTimer=null))}),this.scenarioMarker.completeScenario(Q.default.OnAgentEndSession,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(ge){this.scenarioMarker.failScenario(Q.default.OnAgentEndSession,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}return[2]})})},me.prototype.uploadFileAttachment=function(ee){var le,Ce,ye,ge;return E(this,void 0,void 0,function(){var Ee,De,Fe,Ie,Be,He,Je,Ve,Ke;return d(this,function(je){switch(je.label){case 0:return this.scenarioMarker.startScenario(Q.default.UploadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.liveChatVersion!==N.default.V2?[3,7]:[4,null===(le=this.AMSClient)||void 0===le?void 0:le.createObject(null===(Ce=this.chatToken)||void 0===Ce?void 0:Ce.chatId,ee)];case 1:return Ee=je.sent(),De=Ee.id,[4,null===(ye=this.AMSClient)||void 0===ye?void 0:ye.uploadDocument(De,ee)];case 2:Fe=je.sent(),Ie={amsReferences:JSON.stringify([De])},Be={amsMetadata:JSON.stringify([{contentType:ee.type,fileName:ee.name}])},He={content:"",metadata:s(s({},Ie),Be)},Ve={content:"",timestamp:new Date,contentType:M.default.Text,deliveryMode:x.default.Bridged,messageType:j.default.UserMessage,tags:p(oe.defaultMessageTags),sender:{displayName:"Customer",id:"customer",type:W.default.User},fileMetadata:Fe},je.label=3;case 3:return je.trys.push([3,5,,6]),[4,null===(ge=this.conversation)||void 0===ge?void 0:ge.sendMessage(He)];case 4:return je.sent(),this.scenarioMarker.completeScenario(Q.default.UploadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,Ve];case 5:return je.sent(),console.error("OmnichannelChatSDK/uploadFileAttachment/sendMessage/error"),this.scenarioMarker.failScenario(Q.default.UploadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,6];case 6:return[2,{}];case 7:return Je=void 0,w.default.isReactNative()||w.default.isNode()?[4,this.conversation.sendFileData(ee,k.default.AmsBasedFileSharing)]:[3,9];case 8:return Je=je.sent(),[3,11];case 9:return[4,this.conversation.uploadFile(ee,k.default.AmsBasedFileSharing)];case 10:Je=je.sent(),je.label=11;case 11:Ve={content:"",timestamp:new Date,contentType:M.default.Text,deliveryMode:x.default.Bridged,messageType:j.default.UserMessage,tags:p(oe.defaultMessageTags),sender:{displayName:"Customer",id:"customer",type:W.default.User},fileMetadata:Je},je.label=12;case 12:return je.trys.push([12,14,,15]),[4,this.conversation.sendFileMessage(Je,Ve)];case 13:return je.sent(),this.scenarioMarker.completeScenario(Q.default.UploadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,Ve];case 14:return Ke=je.sent(),console.error("OmnichannelChatSDK/uploadFileAttachment/error: "+Ke),this.scenarioMarker.failScenario(Q.default.UploadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,Ke];case 15:return[2]}})})},me.prototype.downloadFileAttachment=function(ee){var le,Ce;return E(this,void 0,void 0,function(){var ye,ge,Ee,Fe,Ie;return d(this,function(Be){switch(Be.label){case 0:if(this.scenarioMarker.startScenario(Q.default.DownloadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.liveChatVersion!==N.default.V2)return[3,6];Be.label=1;case 1:return Be.trys.push([1,4,,5]),[4,null===(le=this.AMSClient)||void 0===le?void 0:le.getViewStatus(ee)];case 2:return ye=Be.sent(),ge=ye.view_location,[4,null===(Ce=this.AMSClient)||void 0===Ce?void 0:Ce.getView(ee,ge)];case 3:return Ee=Be.sent(),this.scenarioMarker.completeScenario(Q.default.DownloadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,Ee];case 4:throw Be.sent(),this.scenarioMarker.failScenario(Q.default.DownloadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),new Error("DownloadFileAttachmentFailed");case 5:return[3,9];case 6:return Be.trys.push([6,8,,9]),[4,this.conversation.downloadFile(ee)];case 7:return Fe=Be.sent(),this.scenarioMarker.completeScenario(Q.default.DownloadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,Fe];case 8:throw Ie=Be.sent(),console.error("OmnichannelChatSDK/downloadFileAttachment/error: "+Ie),this.scenarioMarker.failScenario(Q.default.DownloadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),new Error("DownloadFileAttachmentFailed");case 9:return[2]}})})},me.prototype.emailLiveChatTranscript=function(ee){return E(this,void 0,void 0,function(){var le,ye;return d(this,function(ge){le={},this.scenarioMarker.startScenario(Q.default.EmailLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId});try{return this.authenticatedUserToken&&(le.authenticatedUserToken=this.authenticatedUserToken),ye=this.OCClient.emailTranscript(this.requestId,this.chatToken.token,{ChatId:this.chatToken.chatId,EmailAddress:ee.emailAddress,DefaultAttachmentMessage:ee.attachmentMessage,CustomerLocale:ee.locale},le),this.scenarioMarker.completeScenario(Q.default.EmailLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,ye]}catch(Ee){console.error("OmnichannelChatSDK/emailLiveChatTranscript/error: "+Ee),this.scenarioMarker.failScenario(Q.default.EmailLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}return[2]})})},me.prototype.getLiveChatTranscript=function(){return E(this,void 0,void 0,function(){var ee,le;return d(this,function(Ce){ee={},this.scenarioMarker.startScenario(Q.default.GetLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId});try{return this.authenticatedUserToken&&(ee.authenticatedUserToken=this.authenticatedUserToken),le=this.OCClient.getChatTranscripts(this.requestId,this.chatToken.chatId,this.chatToken.token,ee),this.scenarioMarker.completeScenario(Q.default.GetLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,le]}catch(ye){this.scenarioMarker.failScenario(Q.default.GetLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}return[2]})})},me.prototype.createChatAdapter=function(ee){return void 0===ee&&(ee=null),E(this,void 0,void 0,function(){var le,Ce=this;return d(this,function(ye){return w.default.isNode()||w.default.isReactNative()?[2,Promise.reject("ChatAdapter is only supported on browser")]:(le=[m.default.ACS,m.default.IC3],ee&&!le.includes(ee)?[2,Promise.reject("ChatAdapter for protocol "+ee+" currently not supported")]:ee===m.default.ACS||this.liveChatVersion===N.default.V2?[2,new Promise(function(ge,Ee){return E(Ce,void 0,void 0,function(){var De,Fe,Be,Ie=this;return d(this,function(He){switch(He.label){case 0:return De={enableAdaptiveCards:!1,enableThreadMemberUpdateNotification:!0,enableLeaveThreadOnWindowClosed:!1},Fe=this.resolveChatAdapterUrl(ee||m.default.ACS),null===(Be=this.telemetry)||void 0===Be||Be.setCDNPackages({ACSAdapter:Fe}),[4,re.loadScript(Fe,function(){Ie.debug&&console.debug("ACSAdapter loaded!");try{var Ve=window.ChatAdapter,$e=new _.default(Ie.AMSClient,Ie.acsAdapterLogger),Je=Ve.createACSAdapter(Ie.chatToken.token,Ie.chatToken.visitorId||"teamsvisitor",Ie.chatToken.chatId,Ie.chatToken.acsEndpoint,$e,1e3,g.default.Customer,void 0,De);ge(Je)}catch(Ke){throw new Error("Failed to load ACSAdapter")}},function(){Ee("Failed to load ACSADapter")})];case 1:return He.sent(),[2]}})})})]:ee===m.default.IC3||this.liveChatVersion===N.default.V1?[2,new Promise(function(ge,Ee){return E(Ce,void 0,void 0,function(){var De,Ie,Fe=this;return d(this,function(Be){switch(Be.label){case 0:return De=this.resolveChatAdapterUrl(ee||m.default.IC3),null===(Ie=this.telemetry)||void 0===Ie||Ie.setCDNPackages({IC3Adapter:De}),this.scenarioMarker.startScenario(Q.default.CreateIC3Adapter),[4,re.loadScript(De,function(){Fe.debug&&console.debug("IC3Adapter loaded!");var He={chatToken:Fe.chatToken,userDisplayName:"Customer",userId:"teamsvisitor",sdkURL:Fe.resolveIC3ClientUrl(),sdk:Fe.IC3Client},Ve=new window.Microsoft.BotFramework.WebChat.IC3Adapter(He);Ve.logger=Fe.ic3ClientLogger,window.Microsoft.BotFramework.WebChat.IC3SDKProvider.disposeSdk=function(){},Fe.scenarioMarker.completeScenario(Q.default.CreateIC3Adapter),ge(Ve)},function(){Fe.scenarioMarker.failScenario(Q.default.CreateIC3Adapter),Ee("Failed to load IC3Adapter")})];case 1:return Be.sent(),[2]}})})})]:[2,Promise.reject("ChatAdapter for protocol "+ee+" currently not supported")])})})},me.prototype.getVoiceVideoCalling=function(ee){return void 0===ee&&(ee={}),E(this,void 0,void 0,function(){var le,ye,ge,Ee,De=this;return d(this,function(Fe){switch(Fe.label){case 0:return w.default.isNode()||w.default.isReactNative()?[2,Promise.reject("VoiceVideoCalling is only supported on browser")]:this.callingOption.toString()===b.default.NoCalling.toString()?[2,Promise.reject("Voice and video call is not enabled")]:[4,this.getChatConfig()];case 1:return le=Fe.sent(),ye=le.LiveWSAndLiveChatEngJoin.msdyn_widgetsnippet,ge=new RegExp('src="(https:\\/\\/[\\w-.]+)[\\w-.\\/]+"'),(Ee=ye.match(ge))&&Ee.length?[2,new Promise(function(Ie,Be){return E(De,void 0,void 0,function(){var He,$e,Ve=this;return d(this,function(Je){switch(Je.label){case 0:return this.scenarioMarker.startScenario(Q.default.GetVoiceVideoCalling),He=Ee[1]+"/livechatwidget/WebChatControl/lib/CallingBundle.js",null===($e=this.telemetry)||void 0===$e||$e.setCDNPackages({VoiceVideoCalling:He}),[4,re.loadScript(He,function(){return E(Ve,void 0,void 0,function(){var Ke;return d(this,function(je){switch(je.label){case 0:return this.debug&&console.debug(He+" loaded!"),[4,Se.default(ee)];case 1:return Ke=je.sent(),this.scenarioMarker.completeScenario(Q.default.GetVoiceVideoCalling),Ke.useScenarioMarker(this.scenarioMarker),Ie(Ke),[2]}})})},function(){return E(Ve,void 0,void 0,function(){return d(this,function(je){return this.scenarioMarker.failScenario(Q.default.GetVoiceVideoCalling,{ExceptionDetails:JSON.stringify({response:"VoiceVideoCallingLoadFailed"})}),Be("Failed to load VoiceVideoCalling"),[2]})})})];case 1:return Je.sent(),[2]}})})})]:[2]}})})},me.prototype.getPostChatSurveyContext=function(){return E(this,void 0,void 0,function(){var ee,le,Ce,Ee,De,Fe,Ie,Be,He,Ve,$e,Je,Ke,je,ke;return d(this,function(Ht){switch(Ht.label){case 0:this.scenarioMarker.startScenario(Q.default.GetPostChatSurveyContext,{RequestId:this.requestId}),Ht.label=1;case 1:return Ht.trys.push([1,6,,7]),Ee=(Ce=(le=this.liveChatConfig).LiveWSAndLiveChatEngJoin).msfp_sourcesurveyidentifier,De=Ce.postConversationSurveyOwnerId,Ie=null!=(Fe=le.ChatWidgetLanguage.msdyn_localeid)?Fe:"1033",Ce.msdyn_postconversationsurveyenable?[4,this.OCClient.getLWIDetails(this.requestId)]:[3,4];case 2:return Be=Ht.sent(),He=(null==Be?void 0:Be.CanRenderPostChat)&&"True"===(null==Be?void 0:Be.CanRenderPostChat),Ve={FormId:Ee,ConversationId:ee=null==Be?void 0:Be.ConversationId,OCLocaleCode:ne.getLocaleStringFromId(Ie)},$e={requestId:this.requestId},this.authenticatedUserToken&&($e.authenticatedUserToken=this.authenticatedUserToken),[4,this.OCClient.getSurveyInviteLink(De,Ve)];case 3:return Je=Ht.sent(),Ke=void 0,je=void 0,null!=Je?null==Je.inviteList||1!=Je.inviteList.length?(this.scenarioMarker.failScenario(Q.default.GetPostChatSurveyContext,{ConversationId:ee,RequestId:this.requestId,ExceptionDetails:"Survey Invite link failed to send response."}),[2,Promise.reject("Survey Invite link failed to send response.")]):(Ke=Je.inviteList[0].invitationLink,null!=Je.formsProLocaleCode&&(je=Je.formsProLocaleCode),[2,Promise.resolve({participantJoined:He,surveyInviteLink:Ke,formsProLocale:je})]):(this.scenarioMarker.failScenario(Q.default.GetPostChatSurveyContext,{ConversationId:ee,RequestId:this.requestId,ExceptionDetails:"surveyInviteLinkResponse is null."}),[2,Promise.reject("surveyInviteLinkResponse is null.")]);case 4:return this.scenarioMarker.failScenario(Q.default.GetPostChatSurveyContext,{RequestId:this.requestId,ExceptionDetails:"Post Chat Survey is disabled. Please check the Omnichannel Administration Portal."}),[2,Promise.reject("Post Chat is disabled from admin side.")];case 5:return[3,7];case 6:return ke=Ht.sent(),this.scenarioMarker.failScenario(Q.default.GetPostChatSurveyContext,{ConversationId:ee,RequestId:this.requestId,ExceptionDetails:JSON.stringify(ke)}),[2,Promise.reject("Retrieving post chat context failed "+JSON.stringify(ke))];case 7:return[2]}})})},me.prototype.initializePostChatRenderer=function(){return E(this,void 0,void 0,function(){var ee,le,Ce,ye,ge,Ee,De;return d(this,function(Fe){if(!w.isBrowser())return[2,Promise.reject("In-line rendering is only supported on web browsers")];this.scenarioMarker.startScenario(Q.default.InitializePostChatRenderer,{RequestId:this.requestId});try{for(ee=P.getMsfpEmbedScript(),(le=document.createElement("div")).innerHTML=ee,Ce=le.getElementsByTagName("script"),ye=le.getElementsByTagName("link"),ge=0;ge<Ce.length;ge++)(Ee=Ce[ge]).src&&((De=document.createElement("script")).type=Ee.type,De.src=Ee.src,De.async=!1,window.document.head.contains(De)||document.getElementsByTagName("head")[0].appendChild(De)),Ee.innerHTML&&((De=document.createElement("script")).innerHTML=Ee.innerHTML,De.async=!1,window.document.head.contains(De)||window.document.head.appendChild(De));for(ge=0;ge<ye.length;ge++)(Ee=ye[ge]).href&&((De=document.createElement("link")).type=Ee.type,De.rel=Ee.rel,De.href=Ee.href,window.document.head.contains(De)||document.getElementsByTagName("head")[0].appendChild(De))}catch(Ie){return this.scenarioMarker.failScenario(Q.default.InitializePostChatRenderer,{RequestId:this.requestId,ExceptionDetails:JSON.stringify(Ie)}),[2,Promise.reject("Error occurred when initializer post chat renderer. "+JSON.stringify(Ie))]}return[2]})})},me.prototype.renderPostChatSurvey=function(ee,le){return E(this,void 0,void 0,function(){var Ce;return d(this,function(ye){switch(ye.label){case 0:if(!w.isBrowser())return[2,Promise.reject("In-line rendering is only supported on web browsers")];this.scenarioMarker.startScenario(Q.default.RenderPostChatSurvey,{RequestId:this.requestId}),ye.label=1;case 1:return ye.trys.push([1,3,,4]),le?[4,renderSurvey(ee,null==le?void 0:le.surveyInviteLink,"","",null==le?void 0:le.formsProLocale)]:(this.scenarioMarker.failScenario(Q.default.RenderPostChatSurvey,{RequestId:this.requestId,ExceptionDetails:"Post Chat Context is null."}),[2,Promise.reject("Post Chat Context is null.")]);case 2:return[2,ye.sent()];case 3:return Ce=ye.sent(),this.scenarioMarker.failScenario(Q.default.RenderPostChatSurvey,{RequestId:this.requestId,ExceptionDetails:JSON.stringify(Ce)}),[2,Promise.reject("Error occurred when rendering post chat survey. "+JSON.stringify(Ce))];case 4:return[2]}})})},me.prototype.getIC3Client=function(){return E(this,void 0,void 0,function(){var ee,le=this;return d(this,function(Ce){switch(Ce.label){case 0:return w.default.isNode()||w.default.isReactNative()?(this.debug&&console.debug("IC3Core"),this.scenarioMarker.startScenario(Q.default.GetIC3Client),this.IC3SDKProvider=U.SDKProvider,[4,U.SDKProvider.getSDK({hostType:F.default.Page,protocolType:$.default.IC3V1SDK})]):[3,2];case 1:return(ee=Ce.sent()).setDebug(this.debug),this.scenarioMarker.completeScenario(Q.default.GetIC3Client),[2,ee];case 2:return this.debug&&console.debug("IC3Client"),[2,new Promise(function(ye,ge){return E(le,void 0,void 0,function(){var Ee,Fe,De=this;return d(this,function(Ie){switch(Ie.label){case 0:return Ee=this.resolveIC3ClientUrl(),null===(Fe=this.telemetry)||void 0===Fe||Fe.setCDNPackages({IC3Client:Ee}),this.scenarioMarker.startScenario(Q.default.GetIC3Client),window.addEventListener("ic3:sdk:load",function(){return E(De,void 0,void 0,function(){var Be,He,Ve;return d(this,function($e){switch($e.label){case 0:return this.debug&&console.debug("ic3:sdk:load"),Be=window.Microsoft.CRM.Omnichannel.IC3Client.SDK,this.IC3SDKProvider=He=Be.SDKProvider,[4,He.getSDK({hostType:F.default.IFrame,protocolType:$.default.IC3V1SDK,logger:this.ic3ClientLogger})];case 1:return Ve=$e.sent(),this.scenarioMarker.completeScenario(Q.default.GetIC3Client),ye(Ve),[2]}})})}),[4,re.loadScript(Ee,function(){De.debug&&console.debug("IC3Client loaded!")},function(){De.scenarioMarker.failScenario(Q.default.GetIC3Client,{ExceptionDetails:JSON.stringify({response:"IC3ClientLoadFailed"})}),ge("Failed to load IC3Client")})];case 1:return Ie.sent(),[2]}})})})]}})})},me.prototype.getChatConfig=function(){return E(this,void 0,void 0,function(){var ee,le,Ce,ye,De,Fe,Ie,Be,He,Ve,$e,Je,Ke,tt;return d(this,function(ke){switch(ke.label){case 0:return ke.trys.push([0,8,,9]),[4,this.OCClient.getChatConfig()];case 1:if(ee=ke.sent(),le=ee.DataMaskingInfo,Ce=ee.LiveChatConfigAuthSettings,ye=ee.LiveWSAndLiveChatEngJoin,this.liveChatVersion=ee.LiveChatVersion||N.default.V1,this.debug&&console.log("[OmnichannelChatSDK][getChatConfig][liveChatVersion] "+this.liveChatVersion),le.setting.msdyn_maskforcustomer&&(this.dataMaskingRules=le.dataMaskingRules),Ce&&(this.authSettings=Ce),De=ye.PreChatSurvey,Ie=ye.msdyn_callingoptions,Ve=!0===(Fe=ye.msdyn_prechatenabled)||"true"==Fe,$e=!0===(He=ye.msdyn_enablechatreconnect)||"true"==He,(null==(Be=ye.msdyn_conversationmode)?void 0:Be.toString())===I.default.PersistentChat.toString()&&(this.isPersistentChat=!0),$e&&!this.isPersistentChat&&(this.isChatReconnect=!0),Ve&&De&&De.trim().length>0&&(this.preChatSurvey=De),!this.authSettings)return[3,7];if(this.scenarioMarker.startScenario(Q.default.GetAuthToken),!this.chatSDKConfig.getAuthToken)return[3,6];ke.label=2;case 2:return ke.trys.push([2,4,,5]),[4,this.chatSDKConfig.getAuthToken()];case 3:return(Je=ke.sent())?(this.authenticatedUserToken=Je,this.scenarioMarker.completeScenario(Q.default.GetAuthToken)):(Ke={response:"UndefinedAuthToken"},this.scenarioMarker.failScenario(Q.default.GetAuthToken,{ExceptionDetails:JSON.stringify(Ke)})),[3,5];case 4:return ke.sent(),Ke={response:"GetAuthTokenFailed"},this.scenarioMarker.failScenario(Q.default.GetAuthToken,{ExceptionDetails:JSON.stringify(Ke)}),[3,5];case 5:return[3,7];case 6:Ke={response:"GetAuthTokenNotFound"},this.scenarioMarker.failScenario(Q.default.GetAuthToken,{ExceptionDetails:JSON.stringify(Ke)}),ke.label=7;case 7:return this.preChatSurvey&&this.debug&&console.log("Prechat Survey!"),this.callingOption=Ie,this.liveChatConfig=ee,[2,this.liveChatConfig];case 8:return tt=ke.sent(),console.error("OmnichannelChatSDK/getChatConfig/error "+tt),[2,tt];case 9:return[2]}})})},me.prototype.resolveIC3ClientUrl=function(){return this.chatSDKConfig.ic3Config&&"ic3ClientCDNUrl"in this.chatSDKConfig.ic3Config?this.chatSDKConfig.ic3Config.ic3ClientCDNUrl:this.chatSDKConfig.ic3Config&&"ic3ClientVersion"in this.chatSDKConfig.ic3Config?P.default.getIC3ClientCDNUrl(this.chatSDKConfig.ic3Config.ic3ClientVersion):P.default.getIC3ClientCDNUrl()},me.prototype.resolveChatAdapterUrl=function(ee){if(ee&&![m.default.ACS,m.default.IC3].includes(ee))throw new Error("ChatAdapter for protocol "+ee+" currently not supported");return ee===m.default.ACS||this.liveChatVersion===N.default.V2?this.chatSDKConfig.chatAdapterConfig&&"webChatACSAdapterCDNUrl"in this.chatSDKConfig.chatAdapterConfig?this.chatSDKConfig.chatAdapterConfig.webChatACSAdapterCDNUrl:this.chatSDKConfig.chatAdapterConfig&&"webChatACSAdapterVersion"in this.chatSDKConfig.chatAdapterConfig?P.default.getACSAdapterCDNUrl(this.chatSDKConfig.chatAdapterConfig.webChatACSAdapterVersion):P.default.getACSAdapterCDNUrl():ee===m.default.IC3||this.liveChatVersion===N.default.V1?this.chatSDKConfig.chatAdapterConfig&&"webChatIC3AdapterCDNUrl"in this.chatSDKConfig.chatAdapterConfig?this.chatSDKConfig.chatAdapterConfig.webChatIC3AdapterCDNUrl:this.chatSDKConfig.chatAdapterConfig&&"webChatIC3AdapterVersion"in this.chatSDKConfig.chatAdapterConfig?P.default.getIC3AdapterCDNUrl(this.chatSDKConfig.chatAdapterConfig.webChatIC3AdapterVersion):P.default.getIC3AdapterCDNUrl():""},me.prototype.updateChatToken=function(ee,le){return E(this,void 0,void 0,function(){var ye;return d(this,function(Ee){switch(Ee.label){case 0:this.scenarioMarker.startScenario(Q.default.UpdateChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),Ee.label=1;case 1:return Ee.trys.push([1,3,,4]),[4,this.IC3Client.initialize({token:ee,regionGtms:le,visitor:!0})];case 2:return Ee.sent(),this.scenarioMarker.completeScenario(Q.default.UpdateChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,4];case 3:return ye=Ee.sent(),this.scenarioMarker.failScenario(Q.default.UpdateChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify({response:"UpdateChatTokenFailed"})}),console.error("OmnichannelChatSDK/updateChatToken/error "+ye),[3,4];case 4:return[2]}})})},me}();u.default=se},6633:function(K,u,c){"use strict";var s=this&&this.__awaiter||function(w,f,g,_){return new(g||(g=Promise))(function(m,I){function x(U){try{F(_.next(U))}catch(N){I(N)}}function k(U){try{F(_.throw(U))}catch(N){I(N)}}function F(U){U.done?m(U.value):function(m){return m instanceof g?m:new g(function(I){I(m)})}(U.value).then(x,k)}F((_=_.apply(w,f||[])).next())})},E=this&&this.__generator||function(w,f){var _,b,m,I,g={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]};return I={next:x(0),throw:x(1),return:x(2)},"function"==typeof Symbol&&(I[Symbol.iterator]=function(){return this}),I;function x(F){return function(U){return function(F){if(_)throw new TypeError("Generator is already executing.");for(;g;)try{if(_=1,b&&(m=2&F[0]?b.return:F[0]?b.throw||((m=b.return)&&m.call(b),0):b.next)&&!(m=m.call(b,F[1])).done)return m;switch(b=0,m&&(F=[2&F[0],m.value]),F[0]){case 0:case 1:m=F;break;case 4:return g.label++,{value:F[1],done:!1};case 5:g.label++,b=F[1],F=[0];continue;case 7:F=g.ops.pop(),g.trys.pop();continue;default:if(!(m=(m=g.trys).length>0&&m[m.length-1])&&(6===F[0]||2===F[0])){g=0;continue}if(3===F[0]&&(!m||F[1]>m[0]&&F[1]<m[3])){g.label=F[1];break}if(6===F[0]&&g.label<m[1]){g.label=m[1],m=F;break}if(m&&g.label<m[2]){g.label=m[2],g.ops.push(F);break}m[2]&&g.ops.pop(),g.trys.pop();continue}F=f.call(w,g)}catch(U){F=[6,U],b=0}finally{_=m=0}if(5&F[0])throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}([F,U])}}};Object.defineProperty(u,"__esModule",{value:!0}),u.VoiceVideoCallingProxy=void 0;var d=c(9600),p=(()=>{return(w=p||(p={}))[w.Voice=19237e4]="Voice",w[w.Video=19238e4]="Video",w[w.Cobrowse=19239e4]="Cobrowse",p;var w})(),T=(()=>{return(w=T||(T={})).Accept="accept",w.Reject="reject",w.Connect="connect",w.End="end",T;var w})(),l=(()=>{return(w=l||(l={})).CallAdded="callAdded",w.LocalVideoStreamAdded="localVideoStreamAdded",w.LocalVideoStreamRemoved="localVideoStreamRemoved",w.RemoteVideoStreamAdded="remoteVideoStreamAdded",w.RemoteVideoStreamRemoved="remoteVideoStreamRemoved",w.CallDisconnected="callDisconnected",w.ParticipantDisconnected="participantDisconnected",w.IncomingCallEnded="incomingCallEnded",l;var w})(),C=function(){function w(){this.debug=!1,this.callClientName="ElevateToVoiceVideo",this.proxy=window["Microsoft.Omnichannel.Calling.SDK"].VoiceVideoCalling,this.proxyInstance=this.proxy.getInstance()}return w.getInstance=function(){return this._instance||(this._instance=new w),this._instance},w.prototype.setDebug=function(f){this.debug=f},w.prototype.useScenarioMarker=function(f){this.scenarioMarker=f},w.prototype.load=function(f){return void 0===f&&(f={}),s(this,void 0,void 0,function(){return E(this,function(g){return f.logger&&(this.logger=f.logger),this.proxyInstance.load(f),[2]})})},w.prototype.isInitialized=function(){return this.proxyInstance.isInitialized()},w.prototype.initialize=function(f){var g,_,b,m,I,x,k,F;return s(this,void 0,void 0,function(){var U;return E(this,function(N){switch(N.label){case 0:return this.debug&&console.debug("[VoiceVideoCallingProxy] VoiceVideoCallingParams: "+JSON.stringify(f)),this.callingParams=f,null===(g=this.scenarioMarker)||void 0===g||g.startScenario(d.default.InitializeVoiceVideoCallingSDK),this.debug&&console.debug("[VoiceVideoCallingProxy][initialize] _isLoaded: "+this.proxyInstance._isLoaded),this.proxyInstance._isLoaded?[3,2]:[4,this.proxyInstance.load(this.logger||{})];case 1:N.sent(),N.label=2;case 2:return N.trys.push([2,4,,5]),[4,this.proxyInstance.initialize({callClientName:this.callClientName,accesstoken:(null===(b=null===(_=this.callingParams)||void 0===_?void 0:_.chatToken.voiceVideoCallToken)||void 0===b?void 0:b.Token)||(null===(m=this.callingParams)||void 0===m?void 0:m.chatToken.token),selfVideoHTMLElementId:null===(I=this.callingParams)||void 0===I?void 0:I.selfVideoHTMLElementId,remoteVideoHTMLElementId:null===(x=this.callingParams)||void 0===x?void 0:x.remoteVideoHTMLElementId})];case 3:return N.sent(),null===(k=this.scenarioMarker)||void 0===k||k.completeScenario(d.default.InitializeVoiceVideoCallingSDK),[3,5];case 4:return U=N.sent(),console.log(U),null===(F=this.scenarioMarker)||void 0===F||F.failScenario(d.default.InitializeVoiceVideoCallingSDK),[3,5];case 5:return[2]}})})},w.prototype.addEventListener=function(f,g){var _=this;this.proxyInstance.registerEvent(f,function(b){var m=b.callId;f===l.CallAdded&&(_.callId=m),_.debug&&console.debug("[VoiceVideoCallingProxy]["+f+"] callId: "+m),m===_.callId&&g(b)})},w.prototype.isMicrophoneMuted=function(){return this.proxyInstance.isMicrophoneMuted({callClientName:this.callClientName,callId:this.callId})},w.prototype.acceptCall=function(f){var g,_,b,m,I,x;return void 0===f&&(f={}),s(this,void 0,void 0,function(){var k,F,U,M,R;return E(this,function(j){switch(j.label){case 0:F=(k=this).callClientName,U=k.callId,null===(g=this.scenarioMarker)||void 0===g||g.startScenario(f.withVideo?d.default.AcceptVideoCall:d.default.AcceptVoiceCall,{CallId:U||""}),this.debug&&console.debug("[VoiceVideoCallingProxy][acceptCall] callId: "+U),this.debug&&console.debug(f),j.label=1;case 1:return j.trys.push([1,3,,4]),[4,this.proxyInstance.acceptCall({callClientName:F,callId:U,withVideo:f.withVideo||!1})];case 2:return j.sent(),[3,4];case 3:return j.sent(),R={response:f.withVideo?"AcceptVideoCallFailed":"AcceptVoiceCallFailed"},null===(_=this.scenarioMarker)||void 0===_||_.failScenario(f.withVideo?d.default.AcceptVideoCall:d.default.AcceptVoiceCall,{CallId:U||"",ExceptionDetails:JSON.stringify(R)}),[3,4];case 4:M={SecondaryChannelType:f.withVideo?p.Video:p.Voice,SecondaryChannelEventType:T.Accept};try{null===(b=this.callingParams)||void 0===b||b.OCClient.makeSecondaryChannelEventRequest(null===(m=this.callingParams)||void 0===m?void 0:m.chatToken.requestId,M),null===(I=this.scenarioMarker)||void 0===I||I.completeScenario(f.withVideo?d.default.AcceptVideoCall:d.default.AcceptVoiceCall,{CallId:U||""}),this.debug&&console.debug("[VoiceVideoCallingProxy][acceptCall][makeSecondaryChannelEventRequest]")}catch(W){R={response:"OCClientMakeSecondaryChannelEventRequestFailed"},null===(x=this.scenarioMarker)||void 0===x||x.failScenario(f.withVideo?d.default.AcceptVideoCall:d.default.AcceptVoiceCall,{CallId:U||"",ExceptionDetails:JSON.stringify(R)}),console.error("[VoiceVideoCallingProxy][acceptCall][makeSecondaryChannelEventRequest] Failure "+W)}return[2]}})})},w.prototype.rejectCall=function(){var f,g,_,b,m,I;return s(this,void 0,void 0,function(){var x,k,F,R,N;return E(this,function(M){switch(M.label){case 0:k=(x=this).callClientName,F=x.callId,null===(f=this.scenarioMarker)||void 0===f||f.startScenario(d.default.RejectCall,{CallId:F||""}),this.debug&&console.debug("[VoiceVideoCallingProxy][rejectCall] callId: "+F),M.label=1;case 1:return M.trys.push([1,3,,4]),[4,this.proxyInstance.rejectCall({callClientName:k,callId:F})];case 2:return M.sent(),null===(g=this.scenarioMarker)||void 0===g||g.completeScenario(d.default.RejectCall,{CallId:F||""}),[3,4];case 3:return M.sent(),N={response:"RejectCallFailed"},null===(_=this.scenarioMarker)||void 0===_||_.failScenario(d.default.RejectCall,{CallId:F||"",ExceptionDetails:JSON.stringify(N)}),[3,4];case 4:R={SecondaryChannelType:this.isRemoteVideoEnabled()?p.Video:p.Voice,SecondaryChannelEventType:T.Reject};try{null===(b=this.callingParams)||void 0===b||b.OCClient.makeSecondaryChannelEventRequest(null===(m=this.callingParams)||void 0===m?void 0:m.chatToken.requestId,R),this.debug&&console.debug("[VoiceVideoCallingProxy][rejectCall][makeSecondaryChannelEventRequest]")}catch(j){return N={response:"OCClientMakeSecondaryChannelEventRequestFailed"},null===(I=this.scenarioMarker)||void 0===I||I.failScenario(d.default.RejectCall,{CallId:F||"",ExceptionDetails:JSON.stringify(N)}),console.error("[VoiceVideoCallingProxy][rejectCall][makeSecondaryChannelEventRequest] Failure "+j),[2,j]}return[2]}})})},w.prototype.stopCall=function(){var f,g,_,b,m;return s(this,void 0,void 0,function(){var I,x,k,F;return E(this,function(N){switch(N.label){case 0:x=(I=this).callClientName,k=I.callId,null===(f=this.scenarioMarker)||void 0===f||f.startScenario(d.default.StopCall,{CallId:k||""}),this.debug&&console.debug("[VoiceVideoCallingProxy][stopCall] callId: "+k),F=!!(null===(_=null===(g=this.callingParams)||void 0===g?void 0:g.chatToken.voiceVideoCallToken)||void 0===_?void 0:_.Token),N.label=1;case 1:return N.trys.push([1,3,,4]),[4,this.proxyInstance.stopCall({callClientName:x,callId:k,forEveryone:F})];case 2:return N.sent(),null===(b=this.scenarioMarker)||void 0===b||b.completeScenario(d.default.StopCall,{CallId:k||""}),[3,4];case 3:return N.sent(),null===(m=this.scenarioMarker)||void 0===m||m.failScenario(d.default.StopCall,{CallId:k||""}),[3,4];case 4:return[2]}})})},w.prototype.toggleMute=function(){return s(this,void 0,void 0,function(){var f;return E(this,function(b){return[2,this.proxyInstance.toggleMute({callClientName:(f=this).callClientName,callId:f.callId})]})})},w.prototype.isRemoteVideoEnabled=function(){return this.proxyInstance.isRemoteVideoEnabled({callClientName:this.callClientName,callId:this.callId})},w.prototype.isLocalVideoEnabled=function(){return this.proxyInstance.isLocalVideoEnabled({callClientName:this.callClientName,callId:this.callId})},w.prototype.toggleLocalVideo=function(){return s(this,void 0,void 0,function(){var f;return E(this,function(b){return[2,this.proxyInstance.toggleLocalVideo({callClientName:(f=this).callClientName,callId:f.callId})]})})},w.prototype.isInACall=function(){return this.proxyInstance.isInACall({callClientName:this.callClientName,callId:this.callId})},w.prototype.renderVideoStreams=function(){return this.proxyInstance.renderVideoStreams({callClientName:this.callClientName,callId:this.callId})},w.prototype.disposeVideoRenderers=function(){return this.proxyInstance.disposeVideoRenderers({callClientName:this.callClientName,callId:this.callId})},w.prototype.close=function(){this.debug&&console.debug("[VoiceVideoCallingProxy][close]"),this.proxyInstance.dispose(),this.callingParams=void 0,this.callId=void 0},w.prototype.onCallAdded=function(f){var g=l.CallAdded;this.debug&&console.debug("[VoiceVideoCallingProxy]["+g+"]"),this.addEventListener(g,f)},w.prototype.onLocalVideoStreamAdded=function(f){var g=l.LocalVideoStreamAdded;this.debug&&console.debug("[VoiceVideoCallingProxy]["+g+"]"),this.addEventListener(g,f)},w.prototype.onLocalVideoStreamRemoved=function(f){var g=l.LocalVideoStreamRemoved;this.debug&&console.debug("[VoiceVideoCallingProxy]["+g+"]"),this.addEventListener(g,f)},w.prototype.onRemoteVideoStreamAdded=function(f){var g=l.RemoteVideoStreamAdded;this.debug&&console.debug("[VoiceVideoCallingProxy]["+g+"]"),this.addEventListener(g,f)},w.prototype.onRemoteVideoStreamRemoved=function(f){var g=l.RemoteVideoStreamRemoved;this.debug&&console.debug("[VoiceVideoCallingProxy]["+g+"]"),this.addEventListener(g,f)},w.prototype.onCallDisconnected=function(f){var g=this,_=l.CallDisconnected;this.debug&&console.debug("[VoiceVideoCallingProxy]["+_+"]"),this.addEventListener(_,function(b){return s(g,void 0,void 0,function(){var m,I,x,k,F,U,N;return E(this,function(R){m={SecondaryChannelType:p.Voice,SecondaryChannelEventType:T.End},null===(x=this.scenarioMarker)||void 0===x||x.startScenario(d.default.OnCallDisconnected,{CallId:this.callId||""});try{null===(k=this.callingParams)||void 0===k||k.OCClient.makeSecondaryChannelEventRequest(null===(F=this.callingParams)||void 0===F?void 0:F.chatToken.requestId,m),this.debug&&console.debug("[VoiceVideoCallingProxy][onCallDisconnected][makeSecondaryChannelEventRequest]"),null===(U=this.scenarioMarker)||void 0===U||U.completeScenario(d.default.OnCallDisconnected,{CallId:this.callId||""})}catch(M){console.error("[VoiceVideoCallingProxy][onCallDisconnected][makeSecondaryChannelEventRequest] Failure "+M),I={response:"OCClientMakeSecondaryChannelEventRequestFailed"},null===(N=this.scenarioMarker)||void 0===N||N.failScenario(d.default.OnCallDisconnected,{CallId:this.callId||"",ExceptionDetails:JSON.stringify(I)})}return this.clearRemoteVideoElementChildren(),f(b),[2]})})})},w.prototype.clearRemoteVideoElementChildren=function(){var f,g;if(null===(f=this.callingParams)||void 0===f?void 0:f.remoteVideoHTMLElementId)for(var _=document.getElementById(null===(g=this.callingParams)||void 0===g?void 0:g.remoteVideoHTMLElementId);null==_?void 0:_.firstChild;)this.debug&&console.debug("[VoiceVideoCallingProxy][clearRemoteVideoElement]"),_.firstChild.remove()},w}();u.VoiceVideoCallingProxy=C,u.default=function(w){return void 0===w&&(w={}),s(void 0,void 0,void 0,function(){var f;return E(this,function(g){switch(g.label){case 0:return[4,(f=C.getInstance()).load(w.logger)];case 1:return g.sent(),[2,Promise.resolve(f)]}})})}},4151:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.ariaTelemetryKey=u.webChatACSAdapterVersion=u.webChatIC3AdapterVersion=u.ic3ClientVersion=void 0,u.ic3ClientVersion="2021.08.14.1",u.webChatIC3AdapterVersion="0.1.0-master.2dba07b",u.webChatACSAdapterVersion="0.0.30",u.ariaTelemetryKey="c7655518acf1403f93ff6b9f77942f0a-d01a02fd-6b50-4de3-a566-62eda11f93bc-7083"},6419:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=(()=>{return(s=c||(c={}))[s.NoCalling=19235e4]="NoCalling",s[s.VideoAndVoiceCalling=192350001]="VideoAndVoiceCalling",s[s.VoiceOnly=192350002]="VoiceOnly",c;var s})();u.default=c},7925:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=(()=>{return(s=c||(c={}))[s.LiveChat=19235e4]="LiveChat",s[s.PersistentChat=192350001]="PersistentChat",c;var s})();u.default=c},8191:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=(()=>{return(s=c||(c={}))[s.V1=1]="V1",s[s.V2=2]="V2",c;var s})();u.default=c},5642:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=(()=>{return(s=c||(c={})).Active="Active",s.Closed="Closed",s.Open="Open",s.Waiting="Waiting",s.WrapUp="WrapUp",c;var s})();u.default=c},1974:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=(()=>{return(s=c||(c={})).Text="text",s.TopicUpdated="topicUpdated",s.ParticipantAdded="participantAdded",s.ParticipantRemoved="participantRemoved",c;var s})();u.default=c},2902:function(K,u,c){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(I){for(var x,k=1,F=arguments.length;k<F;k++)for(var U in x=arguments[k])Object.prototype.hasOwnProperty.call(x,U)&&(I[U]=x[U]);return I}).apply(this,arguments)},E=this&&this.__awaiter||function(I,x,k,F){return new(k||(k=Promise))(function(N,R){function M($){try{W(F.next($))}catch(ce){R(ce)}}function j($){try{W(F.throw($))}catch(ce){R(ce)}}function W($){$.done?N($.value):function(N){return N instanceof k?N:new k(function(R){R(N)})}($.value).then(M,j)}W((F=F.apply(I,x||[])).next())})},d=this&&this.__generator||function(I,x){var F,U,N,R,k={label:0,sent:function(){if(1&N[0])throw N[1];return N[1]},trys:[],ops:[]};return R={next:M(0),throw:M(1),return:M(2)},"function"==typeof Symbol&&(R[Symbol.iterator]=function(){return this}),R;function M(W){return function($){return function(W){if(F)throw new TypeError("Generator is already executing.");for(;k;)try{if(F=1,U&&(N=2&W[0]?U.return:W[0]?U.throw||((N=U.return)&&N.call(U),0):U.next)&&!(N=N.call(U,W[1])).done)return N;switch(U=0,N&&(W=[2&W[0],N.value]),W[0]){case 0:case 1:N=W;break;case 4:return k.label++,{value:W[1],done:!1};case 5:k.label++,U=W[1],W=[0];continue;case 7:W=k.ops.pop(),k.trys.pop();continue;default:if(!(N=(N=k.trys).length>0&&N[N.length-1])&&(6===W[0]||2===W[0])){k=0;continue}if(3===W[0]&&(!N||W[1]>N[0]&&W[1]<N[3])){k.label=W[1];break}if(6===W[0]&&k.label<N[1]){k.label=N[1],N=W;break}if(N&&k.label<N[2]){k.label=N[2],k.ops.push(W);break}N[2]&&k.ops.pop(),k.trys.pop();continue}W=x.call(I,k)}catch($){W=[6,$],U=0}finally{F=N=0}if(5&W[0])throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}([W,$])}}};Object.defineProperty(u,"__esModule",{value:!0}),u.ACSConversation=void 0;var p=c(1974),T=c(8953),l=c(351),C=c(9116),P=c(9340),w=c(813),f=c(2900),g=c(8191),_=(()=>{return(I=_||(_={})).InitializeACSClient="InitializeACSClient",I.InitializeACSConversation="InitializeACSConversation",I.GetParticipants="GetParticipants",I.RegisterOnNewMessage="RegisterOnNewMessage",I.RegisterOnThreadUpdate="RegisterOnThreadUpdate",I.OnTypingEvent="OnTypingEvent",I.GetMessages="GetMessages",I.SendMessage="SendMessage",I.SendTyping="SendTyping",I.Disconnect="Disconnect",_;var I})(),b=function(){function I(x,k,F){void 0===F&&(F=null),this.logger=null,this.logger=F,this.tokenCredential=x,this.chatClient=k,this.eventListeners={}}return I.prototype.initialize=function(x){var k,F,U,N,R;return E(this,void 0,void 0,function(){var M,j,$,W,ce;return d(this,function(Q){switch(Q.label){case 0:null===(k=this.logger)||void 0===k||k.startScenario(_.InitializeACSConversation),this.sessionInfo=x,Q.label=1;case 1:return Q.trys.push([1,3,,4]),M=this,[4,null===(F=this.chatClient)||void 0===F?void 0:F.getChatThreadClient(x.threadId)];case 2:return M.chatThreadClient=Q.sent(),[3,4];case 3:throw j=Q.sent(),W={response:"ChatClientGetChatThreadClientFailure",errorObject:""+j},null===(U=this.logger)||void 0===U||U.failScenario(_.InitializeACSConversation,{ExceptionDetails:JSON.stringify(W)}),new Error("GetChatThreadClientFailed");case 4:return Q.trys.push([4,6,,7]),[4,this.chatClient.startRealtimeNotifications()];case 5:return Q.sent(),[3,7];case 6:throw $=Q.sent(),W={response:"StartRealtimeNotificationsFailed",errorObject:""+$},null===(N=this.logger)||void 0===N||N.failScenario(_.InitializeACSConversation,{ExceptionDetails:JSON.stringify(W)}),new Error(W.response);case 7:return ce=this,[4,this.createParticipantsMapping()];case 8:return ce.participantsMapping=Q.sent(),null===(R=this.logger)||void 0===R||R.completeScenario(_.InitializeACSConversation),[2]}})})},I.prototype.getMessages=function(){var x,k,F,U,N;return E(this,void 0,void 0,function(){var R,M,j,W,Q,te,ae;return d(this,function(he){switch(he.label){case 0:null===(x=this.logger)||void 0===x||x.startScenario(_.GetMessages),R=[],he.label=1;case 1:return he.trys.push([1,9,,10]),[4,this.chatThreadClient.listMessages()];case 2:return[4,(M=he.sent()).next()];case 3:j=he.sent(),he.label=4;case 4:return j.done?[3,8]:(W=j.value).type===p.default.Text?[3,6]:[4,M.next()];case 5:return j=he.sent(),[3,4];case 6:return(null===(k=W.content)||void 0===k?void 0:k.message)&&Object.assign(W,{content:null===(F=W.content)||void 0===F?void 0:F.message}),Object.assign(W.sender,{alias:this.participantsMapping[W.sender.communicationUserId].displayName}),Q=P.default(W,{liveChatVersion:g.default.V2}),R.push(Q),[4,M.next()];case 7:return j=he.sent(),[3,4];case 8:return null===(U=this.logger)||void 0===U||U.completeScenario(_.GetMessages),[3,10];case 9:throw te=he.sent(),ae={errorObject:""+te},null===(N=this.logger)||void 0===N||N.failScenario(_.GetMessages,{ExceptionDetails:JSON.stringify(ae)}),new Error(_.GetMessages);case 10:return[2,R]}})})},I.prototype.getParticipants=function(){var x,k,F;return E(this,void 0,void 0,function(){var U,N,R,j,W;return d(this,function($){switch($.label){case 0:null===(x=this.logger)||void 0===x||x.startScenario(_.GetParticipants),U=[],$.label=1;case 1:return $.trys.push([1,7,,8]),[4,this.chatThreadClient.listParticipants()];case 2:return[4,(N=$.sent()).next()];case 3:R=$.sent(),$.label=4;case 4:return R.done?[3,6]:(U.push(R.value),[4,N.next()]);case 5:return R=$.sent(),[3,4];case 6:return null===(k=this.logger)||void 0===k||k.completeScenario(_.GetParticipants),[3,8];case 7:throw j=$.sent(),W={errorObject:""+j},null===(F=this.logger)||void 0===F||F.failScenario(_.GetParticipants,{ExceptionDetails:JSON.stringify(W)}),new Error(_.GetParticipants);case 8:return[2,U]}})})},I.prototype.registerOnNewMessage=function(x){var k,F,U,N,R;return E(this,void 0,void 0,function(){var M,j,W,$,ce,Q,te=this;return d(this,function(ae){switch(ae.label){case 0:null===(k=this.logger)||void 0===k||k.startScenario(_.RegisterOnNewMessage),M=!1,j=new Set,ae.label=1;case 1:return ae.trys.push([1,3,,4]),[4,(W=function(he){return E(te,void 0,void 0,function(){var Se,oe,ne,pe,re;return d(this,function(ee){switch(ee.label){case 0:if(M)return[2];ee.label=1;case 1:return ee.trys.push([1,3,,4]),[4,this.getMessages()];case 2:for(Se=ee.sent(),oe=0,ne=Se.reverse();oe<ne.length;oe++)re=(pe=ne[oe]).id,pe.sender.displayName!==T.default.Customer&&(j.has(re)||(x(pe),j.add(re)));return[3,4];case 3:return ee.sent(),[3,4];case 4:return setTimeout(function(){W(he)},he),[2]}})})})(null===(F=this.sessionInfo)||void 0===F?void 0:F.pollingInterval)];case 2:return ae.sent(),$=function(he){var Se;M=!0;var oe=he.id,ne=he.sender;ne.communicationUserId===(null===(Se=te.sessionInfo)||void 0===Se?void 0:Se.id)||j.has(oe)||(he.message&&Object.assign(he,{content:he.message}),Object.assign(he.sender,{alias:te.participantsMapping[ne.communicationUserId].displayName}),x(he),j.add(oe))},null===(U=this.chatClient)||void 0===U||U.on("chatMessageReceived",$),this.trackListener("chatMessageReceived",$),null===(N=this.logger)||void 0===N||N.completeScenario(_.RegisterOnNewMessage),[3,4];case 3:throw ce=ae.sent(),Q={errorObject:""+ce},null===(R=this.logger)||void 0===R||R.failScenario(_.RegisterOnNewMessage,{ExceptionDetails:JSON.stringify(Q)}),new Error(_.RegisterOnNewMessage);case 4:return[2]}})})},I.prototype.registerOnThreadUpdate=function(x){var k,F,U,N;return E(this,void 0,void 0,function(){var R;return d(this,function(M){null===(k=this.logger)||void 0===k||k.startScenario(_.RegisterOnThreadUpdate);try{R=function(j){x(j)},null===(F=this.chatClient)||void 0===F||F.on("participantsRemoved",R),this.trackListener("participantsRemoved",R),null===(U=this.logger)||void 0===U||U.completeScenario(_.RegisterOnThreadUpdate)}catch(j){null===(N=this.logger)||void 0===N||N.failScenario(_.RegisterOnThreadUpdate)}return[2]})})},I.prototype.onTypingEvent=function(x){var k,F,U,N;return E(this,void 0,void 0,function(){var R;return d(this,function(M){null===(k=this.logger)||void 0===k||k.startScenario(_.OnTypingEvent);try{R=function(j){x(j)},null===(F=this.chatClient)||void 0===F||F.on("typingIndicatorReceived",R),this.trackListener("typingIndicatorReceived",R),null===(U=this.logger)||void 0===U||U.completeScenario(_.OnTypingEvent)}catch(j){null===(N=this.logger)||void 0===N||N.failScenario(_.OnTypingEvent)}return[2]})})},I.prototype.sendMessage=function(x){var k,F,U,N;return E(this,void 0,void 0,function(){var R,M;return d(this,function(W){switch(W.label){case 0:null===(k=this.logger)||void 0===k||k.startScenario(_.SendMessage),x.metadata||(x.metadata={}),R={content:x.content},M={senderDisplayName:T.default.Customer,metadata:s({deliveryMode:f.default.Bridged,tags:JSON.stringify([w.defaultMessageTags])},x.metadata)},W.label=1;case 1:return W.trys.push([1,3,,4]),[4,null===(F=this.chatThreadClient)||void 0===F?void 0:F.sendMessage(R,M)];case 2:return W.sent(),null===(U=this.logger)||void 0===U||U.completeScenario(_.SendMessage),[3,4];case 3:throw W.sent(),null===(N=this.logger)||void 0===N||N.failScenario(_.SendMessage),new Error("SendMessageFailed");case 4:return[2]}})})},I.prototype.sendTyping=function(){var x,k,F,U;return E(this,void 0,void 0,function(){return d(this,function(R){switch(R.label){case 0:null===(x=this.logger)||void 0===x||x.startScenario(_.SendTyping),R.label=1;case 1:return R.trys.push([1,3,,4]),[4,null===(k=this.chatThreadClient)||void 0===k?void 0:k.sendTypingNotification()];case 2:return R.sent(),null===(F=this.logger)||void 0===F||F.completeScenario(_.SendTyping),[3,4];case 3:throw R.sent(),null===(U=this.logger)||void 0===U||U.failScenario(_.SendTyping),new Error("SendTypingFailed");case 4:return[2]}})})},I.prototype.sendFileMessage=function(){return E(this,void 0,void 0,function(){return d(this,function(x){return[2,void 0]})})},I.prototype.sendFileData=function(){return E(this,void 0,void 0,function(){return d(this,function(x){return[2,void 0]})})},I.prototype.uploadFile=function(){return E(this,void 0,void 0,function(){return d(this,function(x){return[2,void 0]})})},I.prototype.downloadFile=function(){return E(this,void 0,void 0,function(){return d(this,function(x){return[2,void 0]})})},I.prototype.disconnect=function(){var x,k,F;return E(this,void 0,void 0,function(){var U,N,R,M,$=this;return d(this,function(ce){null===(x=this.logger)||void 0===x||x.startScenario(_.Disconnect);try{for(U=function(Q,te){te.forEach(function(ae){$.chatClient.off(Q,ae)})},N=0,R=Object.entries(this.eventListeners);N<R.length;N++)U((M=R[N])[0],M[1]);null===(k=this.logger)||void 0===k||k.completeScenario(_.Disconnect)}catch(Q){null===(F=this.logger)||void 0===F||F.failScenario(_.Disconnect)}return[2]})})},I.prototype.createParticipantsMapping=function(){return E(this,void 0,void 0,function(){var x,k,F,U,N,R,M;return d(this,function(j){switch(j.label){case 0:return[4,this.getParticipants()];case 1:for(x=j.sent(),k={},F=0,U=x;F<U.length;F++)R=(N=U[F]).id,Object.keys(k).includes(R.communicationUserId)||Object.assign(k,((M={})[R.communicationUserId]=N,M));return[2,k]}})})},I.prototype.trackListener=function(x,k){x in this.eventListeners||(this.eventListeners[x]=[]),this.eventListeners[x].push(k)},I}();u.ACSConversation=b;var m=function(){function I(x){void 0===x&&(x=null),this.logger=null,this.tokenCredential=null,this.chatClient=null,this.logger=x}return I.prototype.initialize=function(x){var k,F,U,N;return E(this,void 0,void 0,function(){var R;return d(this,function(M){null===(k=this.logger)||void 0===k||k.startScenario(_.InitializeACSClient);try{this.tokenCredential=new C.AzureCommunicationTokenCredential(x.token)}catch(j){throw R={response:"CreateTokenCredentialFailure",errorObject:""+j},null===(F=this.logger)||void 0===F||F.failScenario(_.InitializeACSClient,{ExceptionDetails:JSON.stringify(R)}),new Error("CreateTokenCredentialFailed")}try{this.chatClient=new l.ChatClient(x.environmentUrl,this.tokenCredential)}catch(j){throw R={response:"CreateChatClientFailure",errorObject:""+j},null===(U=this.logger)||void 0===U||U.failScenario(_.InitializeACSClient,{ExceptionDetails:JSON.stringify(R)}),new Error("CreateChatClientFailed")}return null===(N=this.logger)||void 0===N||N.completeScenario(_.InitializeACSClient),[2]})})},I.prototype.joinConversation=function(x){return E(this,void 0,void 0,function(){var k;return d(this,function(F){switch(F.label){case 0:return[4,(k=new b(this.tokenCredential,this.chatClient,this.logger)).initialize(x)];case 1:return F.sent(),[2,k]}})})},I}();u.default=m},8953:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=(()=>{return(s=c||(c={})).Customer="Customer",s.Agent="__agent__",s.System="__system__",c;var s})();u.default=c},2562:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.default={IC3:"IC3",DirectLine:"DirectLine",ACS:"ACS"}},813:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.defaultMessageTags=void 0,u.defaultMessageTags=["ChannelId-lcw","FromCustomer"]},3709:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.ResourceType=u.FileSharingProtocolType=u.PersonType=u.MessageType=u.DeliveryMode=u.MessageContentType=void 0;var c=function(){function l(){}return l.RichText="RichText",l.Text="Text",l}();u.MessageContentType=c;var s=function(){function l(){}return l.Bridged="bridged",l.Unbridged="unbridged",l}();u.DeliveryMode=s;var l,E=function(){function l(){}return l.UserMessage="UserMessage",l.SwiftCard="SwiftCard",l.Typing="Control/Typing",l.ClearTyping="Control/ClearTyping",l.LiveState="Control/LiveState",l}();u.MessageType=E,(l=u.PersonType||(u.PersonType={}))[l.Unknown=0]="Unknown",l[l.User=1]="User",l[l.Bot=2]="Bot",function(l){l[l.AmsBasedFileSharing=0]="AmsBasedFileSharing"}(u.FileSharingProtocolType||(u.FileSharingProtocolType={}));var T=function(){function l(){}return l.NewMessage="NewMessage",l.MessageUpdate="MessageUpdate",l.UserPresence="UserPresence",l.ConversationUpdate="ConversationUpdate",l.ThreadUpdate="ThreadUpdate",l}();u.ResourceType=T},2921:function(K,u){"use strict";var c=this&&this.__awaiter||function(T,l,C,P){return new(C||(C=Promise))(function(f,g){function _(I){try{m(P.next(I))}catch(x){g(x)}}function b(I){try{m(P.throw(I))}catch(x){g(x)}}function m(I){I.done?f(I.value):function(f){return f instanceof C?f:new C(function(g){g(f)})}(I.value).then(_,b)}m((P=P.apply(T,l||[])).next())})},s=this&&this.__generator||function(T,l){var P,w,f,g,C={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return g={next:_(0),throw:_(1),return:_(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function _(m){return function(I){return function(m){if(P)throw new TypeError("Generator is already executing.");for(;C;)try{if(P=1,w&&(f=2&m[0]?w.return:m[0]?w.throw||((f=w.return)&&f.call(w),0):w.next)&&!(f=f.call(w,m[1])).done)return f;switch(w=0,f&&(m=[2&m[0],f.value]),m[0]){case 0:case 1:f=m;break;case 4:return C.label++,{value:m[1],done:!1};case 5:C.label++,w=m[1],m=[0];continue;case 7:m=C.ops.pop(),C.trys.pop();continue;default:if(!(f=(f=C.trys).length>0&&f[f.length-1])&&(6===m[0]||2===m[0])){C=0;continue}if(3===m[0]&&(!f||m[1]>f[0]&&m[1]<f[3])){C.label=m[1];break}if(6===m[0]&&C.label<f[1]){C.label=f[1],f=m;break}if(f&&C.label<f[2]){C.label=f[2],C.ops.push(m);break}f[2]&&C.ops.pop(),C.trys.pop();continue}m=l.call(T,C)}catch(I){m=[6,I],w=0}finally{P=f=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([m,I])}}};Object.defineProperty(u,"__esModule",{value:!0});var d=(()=>{return(T=d||(d={})).AMSUpload="AMSUpload",T.AMSDownload="AMSDownload",T.GetFileIds="GetFileIds",T.CreateFileIdProperty="CreateFileIdProperty",T.GetFileMetadata="GetFileMetadata",T.CreateFileMetadataProperty="CreateFileMetadataProperty",d;var T})(),p=function(){function T(l,C){void 0===C&&(C=null),this.logger=C,this.amsClient=l}return T.prototype.uploadFiles=function(l){return c(this,void 0,void 0,function(){var C=this;return s(this,function(P){return[2,Promise.all(l.map(function(w){return c(C,void 0,void 0,function(){return s(this,function(f){return[2,this.uploadFileToAMS(w)]})})}))]})})},T.prototype.downloadFiles=function(l){return c(this,void 0,void 0,function(){var C=this;return s(this,function(P){return[2,Promise.all(l.map(function(w){return c(C,void 0,void 0,function(){return s(this,function(f){return[2,this.downloadFileFromAMS(w)]})})}))]})})},T.prototype.updatePermissions=function(){return c(this,void 0,void 0,function(){return s(this,function(l){return[2,void 0]})})},T.prototype.getFileIds=function(l){var C,P,w;null===(C=this.logger)||void 0===C||C.startScenario(d.GetFileIds);try{var f=JSON.parse(null==l?void 0:l.amsReferences);return null===(P=this.logger)||void 0===P||P.completeScenario(d.GetFileIds),f}catch(_){return void(null===(w=this.logger)||void 0===w||w.failScenario(d.GetFileIds,{ExceptionDetails:JSON.stringify({metadata:""+l,errorObject:""+_})}))}},T.prototype.createFileIdProperty=function(l){var C,P,w;null===(C=this.logger)||void 0===C||C.startScenario(d.CreateFileIdProperty);try{var f={amsReferences:JSON.stringify(l)};return null===(P=this.logger)||void 0===P||P.completeScenario(d.CreateFileIdProperty),f}catch(_){return void(null===(w=this.logger)||void 0===w||w.failScenario(d.CreateFileIdProperty,{ExceptionDetails:JSON.stringify({fileIds:""+l,errorObject:""+_})}))}},T.prototype.getFileMetadata=function(l){var C,P,w;null===(C=this.logger)||void 0===C||C.startScenario(d.GetFileMetadata);try{var f=JSON.parse(null==l?void 0:l.amsMetadata);return null===(P=this.logger)||void 0===P||P.completeScenario(d.GetFileMetadata),f}catch(_){return void(null===(w=this.logger)||void 0===w||w.failScenario(d.GetFileMetadata,{ExceptionDetails:JSON.stringify({metadata:""+l,errorObject:""+_})}))}},T.prototype.createFileMetadataProperty=function(l){var C,P,w;null===(C=this.logger)||void 0===C||C.startScenario(d.CreateFileMetadataProperty);try{var f={amsMetadata:JSON.stringify(l)};return null===(P=this.logger)||void 0===P||P.completeScenario(d.CreateFileMetadataProperty),f}catch(_){return void(null===(w=this.logger)||void 0===w||w.failScenario(d.CreateFileMetadataProperty,{ExceptionDetails:JSON.stringify({metadata:""+l,errorObject:""+_})}))}},T.prototype.uploadFileToAMS=function(l){var C,P,w,f,g;return c(this,void 0,void 0,function(){var _,b,I,x,k,F,m;return s(this,function(U){switch(U.label){case 0:if(null===(C=this.logger)||void 0===C||C.startScenario(d.AMSUpload),!l.contentUrl||!l.name)return[3,12];_=void 0,U.label=1;case 1:return U.trys.push([1,3,,4]),[4,this.amsClient.fetchBlob(l.contentUrl)];case 2:return _=U.sent(),[3,4];case 3:return b=U.sent(),m={response:"AMSFetchBlobFailure",errorObject:""+b},null===(P=this.logger)||void 0===P||P.failScenario(d.AMSUpload,{ExceptionDetails:JSON.stringify(m)}),[2,void 0];case 4:I=new File([_],l.name,{type:l.contentType}),x=void 0,U.label=5;case 5:return U.trys.push([5,7,,8]),[4,this.amsClient.createObject(this.amsClient.chatToken.chatId,I)];case 6:return x=U.sent(),[3,8];case 7:return k=U.sent(),m={response:"AMSCreateObjectFailure",errorObject:""+k},null===(w=this.logger)||void 0===w||w.failScenario(d.AMSUpload,{ExceptionDetails:JSON.stringify(m)}),[2,void 0];case 8:return U.trys.push([8,10,,11]),[4,this.amsClient.uploadDocument(x.id,I)];case 9:return U.sent(),[3,11];case 10:return F=U.sent(),m={response:"AMSUploadDocumentFailure",errorObject:""+F},null===(f=this.logger)||void 0===f||f.failScenario(d.AMSUpload,{ExceptionDetails:JSON.stringify(m)}),[2,void 0];case 11:return null===(g=this.logger)||void 0===g||g.completeScenario(d.AMSUpload),[2,{fileId:x.id,metadata:{contentType:l.contentType,fileName:l.name}}];case 12:return[2]}})})},T.prototype.downloadFileFromAMS=function(l){var C,P,w,f;return c(this,void 0,void 0,function(){var g,_,b,I,x,k,m,F;return s(this,function(U){switch(U.label){case 0:if(null===(C=this.logger)||void 0===C||C.startScenario(d.AMSDownload),!(l.fileId&&l.metadata&&l.metadata.fileName))return[3,9];g={id:l.fileId,type:l.metadata.contentType.split("/").pop()},_=void 0,U.label=1;case 1:return U.trys.push([1,3,,4]),[4,this.amsClient.getViewStatus(g)];case 2:return _=U.sent(),[3,4];case 3:return b=U.sent(),m={response:"AMSGetViewStatusFailure",errorObject:""+b},null===(P=this.logger)||void 0===P||P.failScenario(d.AMSDownload,{ExceptionDetails:JSON.stringify(m)}),[2,void 0];case 4:I=_.view_location,x=void 0,U.label=5;case 5:return U.trys.push([5,7,,8]),[4,this.amsClient.getView(g,I)];case 6:return x=U.sent(),[3,8];case 7:return k=U.sent(),m={response:"AMSGetViewFailure",errorObject:""+k},null===(w=this.logger)||void 0===w||w.failScenario(d.AMSDownload,{ExceptionDetails:JSON.stringify(m)}),[2,void 0];case 8:return F=new File([x],l.metadata.fileName,{type:l.metadata.contentType}),null===(f=this.logger)||void 0===f||f.completeScenario(d.AMSDownload),[2,F];case 9:return[2]}})})},T}();u.default=p},9451:(K,u)=>{"use strict";var s;Object.defineProperty(u,"__esModule",{value:!0}),(s=u._BondDataType||(u._BondDataType={}))[s._BT_STOP=0]="_BT_STOP",s[s._BT_STOP_BASE=1]="_BT_STOP_BASE",s[s._BT_BOOL=2]="_BT_BOOL",s[s._BT_DOUBLE=8]="_BT_DOUBLE",s[s._BT_STRING=9]="_BT_STRING",s[s._BT_STRUCT=10]="_BT_STRUCT",s[s._BT_LIST=11]="_BT_LIST",s[s._BT_MAP=13]="_BT_MAP",s[s._BT_INT32=16]="_BT_INT32",s[s._BT_INT64=17]="_BT_INT64"},1464:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=c(6649),E=c(5644),d=c(514);u._Utf8_GetBytes=function(g){for(var _=[],b=0;b<g.length;++b){var m=g.charCodeAt(b);m<128?_.push(m):m<2048?_.push(192|m>>6,128|63&m):m<55296||m>=57344?_.push(224|m>>12,128|m>>6&63,128|63&m):(m=65536+((1023&m)<<10|1023&g.charCodeAt(++b)),_.push(240|m>>18,128|m>>12&63,128|m>>6&63,128|63&m))}return _},u._Base64_GetString=function(g){for(var _="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b=[],m=g.length%3,x=0,k=g.length-m;x<k;x+=3)b.push([_.charAt((N=F=(g[x]<<16)+(g[x+1]<<8)+g[x+2])>>18&63),_.charAt(N>>12&63),_.charAt(N>>6&63),_.charAt(63&N)].join(""));var N;switch(m){case 1:var F;b.push(_.charAt((F=g[g.length-1])>>2)),b.push(_.charAt(F<<4&63)),b.push("==");break;case 2:var U=(g[g.length-2]<<8)+g[g.length-1];b.push(_.charAt(U>>10)),b.push(_.charAt(U>>4&63)),b.push(_.charAt(U<<2&63)),b.push("=")}return b.join("")},u._Varint_GetBytes=function(g){for(var _=[];4294967168&g;)_.push(127&g|128),g>>>=7;return _.push(127&g),_},u._Varint64_GetBytes=function(g){for(var _=g.low,b=g.high,m=[];b||4294967168&_;)m.push(127&_|128),_=(127&b)<<25|_>>>7,b>>>=7;return m.push(127&_),m},u._Double_GetBytes=function(g){if(d.BrowserChecker._IsDataViewSupport()){var _=new DataView(new ArrayBuffer(8));_.setFloat64(0,g,!0);for(var b=[],m=0;m<8;++m)b.push(_.getUint8(m));return b}return E.FloatUtils._ConvertNumberToArray(g,!0)},u._Zigzag_EncodeZigzag32=function(g){return(g=s.Number._ToInt32(g))<<1^g>>31},u._Zigzag_EncodeZigzag64=function(g){var _=g.low,b=g.high,m=b<<1|_>>>31,I=_<<1;2147483648&b&&(m=~m,I=~I);var x=new s.UInt64("0");return x.low=I,x.high=m,x}},5644:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=function(){function s(){}return s._ConvertNumberToArray=function(E,d){if(!E)return d?this._doubleZero:this._floatZero;var T=d?52:23,l=(1<<(d?11:8)-1)-1,C=1-l,P=l,w=E<0?1:0;E=Math.abs(E);for(var f=Math.floor(E),g=E-f,_=2*(l+2)+T,b=new Array(_),m=0;m<_;)b[m++]=0;for(m=l+2;m&&f;)b[--m]=f%2,f=Math.floor(f/2);for(m=l+1;m<_-1&&g>0;)(g*=2)>=1?(b[++m]=1,--g):b[++m]=0;for(var I=0;I<_&&!b[I];)I++;var x=l+1-I,k=I+T;if(b[k+1]){for(m=k;m>I&&(b[m]=1-b[m],!b);--m);m===I&&++x}if(x>P||f)return w?d?this._doubleNegInifinity:this._floatNegInifinity:d?this._doubleInifinity:this._floatInifinity;if(x<C)return d?this._doubleZero:this._floatZero;if(d){var F=0;for(m=0;m<20;++m)F=F<<1|b[++I];for(var U=0;m<52;++m)U=U<<1|b[++I];return[255&U,U>>8&255,U>>16&255,U>>>24,255&(F=w<<31|2147483647&(F|=x+l<<20)),F>>8&255,F>>16&255,F>>>24]}var R=0;for(m=0;m<23;++m)R=R<<1|b[++I];return[255&(R=w<<31|2147483647&(R|=x+l<<23)),R>>8&255,R>>16&255,R>>>24]},s._floatZero=[0,0,0,0],s._doubleZero=[0,0,0,0,0,0,0,0],s._floatInifinity=[0,0,128,127],s._floatNegInifinity=[0,0,128,255],s._doubleInifinity=[0,0,0,0,0,0,240,127],s._doubleNegInifinity=[0,0,0,0,0,0,240,255],s}();u.FloatUtils=c},67:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=c(6649),E=function(){function d(){this._buffer=[]}return d.prototype._WriteByte=function(p){this._buffer.push(s.Number._ToByte(p))},d.prototype._Write=function(p,T,l){for(;l--;)this._WriteByte(p[T++])},d.prototype._GetBuffer=function(){return this._buffer},d}();u.MemoryStream=E},4356:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=c(9451);u._BondDataType=s._BondDataType;var E=c(1464);u._Encoding=E;var d=c(67);u.IO=d;var p=c(6649);u.Int64=p.Int64,u.UInt64=p.UInt64,u.Number=p.Number;var T=function(){function l(C){this._stream=C}return l.prototype._WriteBlob=function(C){this._stream._Write(C,0,C.length)},l.prototype._WriteBool=function(C){this._stream._WriteByte(C?1:0)},l.prototype._WriteContainerBegin=function(C,P){this._WriteUInt8(P),this._WriteUInt32(C)},l.prototype._WriteMapContainerBegin=function(C,P,w){this._WriteUInt8(P),this._WriteUInt8(w),this._WriteUInt32(C)},l.prototype._WriteDouble=function(C){var P=E._Double_GetBytes(C);this._stream._Write(P,0,P.length)},l.prototype._WriteFieldBegin=function(C,P,w){P<=5?this._stream._WriteByte(C|P<<5):P<=255?(this._stream._WriteByte(192|C),this._stream._WriteByte(P)):(this._stream._WriteByte(224|C),this._stream._WriteByte(P),this._stream._WriteByte(P>>8))},l.prototype._WriteInt32=function(C){C=E._Zigzag_EncodeZigzag32(C),this._WriteUInt32(C)},l.prototype._WriteInt64=function(C){this._WriteUInt64(E._Zigzag_EncodeZigzag64(C))},l.prototype._WriteString=function(C){if(""===C)this._WriteUInt32(0);else{var P=E._Utf8_GetBytes(C);this._WriteUInt32(P.length),this._stream._Write(P,0,P.length)}},l.prototype._WriteStructEnd=function(C){this._WriteUInt8(C?s._BondDataType._BT_STOP_BASE:s._BondDataType._BT_STOP)},l.prototype._WriteUInt32=function(C){var P=E._Varint_GetBytes(p.Number._ToUInt32(C));this._stream._Write(P,0,P.length)},l.prototype._WriteUInt64=function(C){var P=E._Varint64_GetBytes(C);this._stream._Write(P,0,P.length)},l.prototype._WriteUInt8=function(C){this._stream._WriteByte(p.Number._ToUInt8(C))},l}();u.CompactBinaryProtocolWriter=T},6649:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=function(){function d(p){this.low=0,this.high=0,this.low=parseInt(p,10),this.low<0&&(this.high=-1)}return d.prototype._Equals=function(p){var T=new d(p);return this.low===T.low&&this.high===T.high},d}();u.Int64=c;var s=function(){function d(p){this.low=0,this.high=0,this.low=parseInt(p,10)}return d.prototype._Equals=function(p){var T=new d(p);return this.low===T.low&&this.high===T.high},d}();u.UInt64=s;var E=function(){function d(){}return d._ToByte=function(p){return this._ToUInt8(p)},d._ToUInt8=function(p){return 255&p},d._ToInt32=function(p){return 2147483647&p|2147483648&p},d._ToUInt32=function(p){return 4294967295&p},d}();u.Number=E},514:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=function(){function s(){}return s._IsDataViewSupport=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},s}();u.BrowserChecker=c},4501:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=function(){function s(E){this.clockSkewRefreshDurationInMins=E,this._reset()}return s.prototype.allowRequestSending=function(){return this._isFirstRequest&&!this._clockSkewSet?(this._isFirstRequest=!1,this._allowRequestSending=!1,!0):this._allowRequestSending},s.prototype.shouldAddClockSkewHeaders=function(){return this._shouldAddClockSkewHeaders},s.prototype.getClockSkewHeaderValue=function(){return this._clockSkewHeaderValue},s.prototype.setClockSkew=function(E){this._clockSkewSet||(E?this._clockSkewHeaderValue=E:this._shouldAddClockSkewHeaders=!1,this._clockSkewSet=!0,this._allowRequestSending=!0)},s.prototype._reset=function(){var E=this;this._isFirstRequest=!0,this._clockSkewSet=!1,this._allowRequestSending=!0,this._shouldAddClockSkewHeaders=!0,this._clockSkewHeaderValue="use-collector-delta",this.clockSkewRefreshDurationInMins>0&&setTimeout(function(){return E._reset()},6e4*this.clockSkewRefreshDurationInMins)},s}();u.default=c},7190:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=function(){function E(){this._killedTokenDictionary={}}return E.prototype.setKillSwitchTenants=function(d,p){if(d&&p)try{var T=d.split(",");if("this-request-only"===p)return T;for(var l=1e3*parseInt(p,10),C=0;C<T.length;++C)this._killedTokenDictionary[T[C]]=Date.now()+l}catch(P){return[]}return[]},E.prototype.isTenantKilled=function(d){return void 0!==this._killedTokenDictionary[d]&&this._killedTokenDictionary[d]>Date.now()||(delete this._killedTokenDictionary[d],!1)},E}();u.default=s},2551:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=function(){function s(){}return s.addNotificationListener=function(E){this.listeners.push(E)},s.removeNotificationListener=function(E){for(var d=this.listeners.indexOf(E);d>-1;)this.listeners.splice(d,1),d=this.listeners.indexOf(E)},s.eventsSent=function(E){for(var d=this,p=function(C){T.listeners[C].eventsSent&&setTimeout(function(){return d.listeners[C].eventsSent(E)},0)},T=this,l=0;l<this.listeners.length;++l)p(l)},s.eventsDropped=function(E,d){for(var p=this,T=function(P){l.listeners[P].eventsDropped&&setTimeout(function(){return p.listeners[P].eventsDropped(E,d)},0)},l=this,C=0;C<this.listeners.length;++C)T(C)},s.eventsRetrying=function(E){for(var d=this,p=function(C){T.listeners[C].eventsRetrying&&setTimeout(function(){return d.listeners[C].eventsRetrying(E)},0)},T=this,l=0;l<this.listeners.length;++l)p(l)},s.eventsRejected=function(E,d){for(var p=this,T=function(P){l.listeners[P].eventsRejected&&setTimeout(function(){return p.listeners[P].eventsRejected(E,d)},0)},l=this,C=0;C<this.listeners.length;++C)T(C)},s.listeners=[],s}();u.default=c},2659:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=c(676),E=function(){function d(p,T){this._outboundQueue=p,this._maxNumberOfEvents=T,this._currentBatch={},this._currentNumEventsInBatch=0}return d.prototype.addEventToBatch=function(p){if(p.priority===s.AWTEventPriority.Immediate_sync){var T={};return T[p.apiKey]=[p],T}return this._currentNumEventsInBatch>=this._maxNumberOfEvents&&this.flushBatch(),void 0===this._currentBatch[p.apiKey]&&(this._currentBatch[p.apiKey]=[]),this._currentBatch[p.apiKey].push(p),this._currentNumEventsInBatch++,null},d.prototype.flushBatch=function(){this._currentNumEventsInBatch>0&&(this._outboundQueue.push(this._currentBatch),this._currentBatch={},this._currentNumEventsInBatch=0)},d.prototype.hasBatch=function(){return this._currentNumEventsInBatch>0},d}();u.default=E},7270:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var p=function(){function T(){}return T.shouldRetryForStatus=function(l){return!(l>=300&&l<500&&408!==l||501===l||505===l)},T.getMillisToBackoffForRetry=function(l){var C,f=Math.floor(1200*Math.random())+2400;return C=Math.pow(4,l)*f,Math.min(C,12e4)},T}();u.default=p},6064:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=c(4356),E=c(676),d=c(2551),p=c(5593),T=2936012,l=function(){function C(){}return C.getPayloadBlob=function(P,w){var g,f=!1,_=new s.IO.MemoryStream,b=new s.CompactBinaryProtocolWriter(_);for(var m in b._WriteFieldBegin(s._BondDataType._BT_MAP,3,null),b._WriteMapContainerBegin(w,s._BondDataType._BT_STRING,s._BondDataType._BT_LIST),P)if(f)g||(g={}),g[m]=P[m],delete P[m];else if(P.hasOwnProperty(m)){b._WriteString(m);var I=P[m];b._WriteContainerBegin(1,s._BondDataType._BT_STRUCT),b._WriteFieldBegin(s._BondDataType._BT_STRING,2,null),b._WriteString("act_default_source"),b._WriteFieldBegin(s._BondDataType._BT_STRING,5,null),b._WriteString(p.newGuid()),b._WriteFieldBegin(s._BondDataType._BT_INT64,6,null),b._WriteInt64(p.numberToBondInt64(Date.now())),b._WriteFieldBegin(s._BondDataType._BT_LIST,8,null);var x=_._GetBuffer().length+1;b._WriteContainerBegin(P[m].length,s._BondDataType._BT_STRUCT);for(var k=_._GetBuffer().length-x,F=0;F<I.length;++F){var U=_._GetBuffer().length;if(this.writeEvent(I[F],b),_._GetBuffer().length-U>T)d.default.eventsRejected([I[F]],E.AWTEventsRejectedReason.SizeLimitExceeded),I.splice(F--,1),_._GetBuffer().splice(U),this._addNewDataPackageSize(I.length,_,k,x);else if(_._GetBuffer().length>T){_._GetBuffer().splice(U),g||(g={}),P[m]=I.splice(0,F),g[m]=I,this._addNewDataPackageSize(P[m].length,_,k,x),f=!0;break}}b._WriteStructEnd(!1)}return b._WriteStructEnd(!1),{payloadBlob:_._GetBuffer(),remainingRequest:g}},C._addNewDataPackageSize=function(P,w,f,g){for(var _=s._Encoding._Varint_GetBytes(s.Number._ToUInt32(P)),b=0;b<f;++b){if(!(b<_.length)){w._GetBuffer().slice(g+b,f-b);break}w._GetBuffer()[g+b]=_[b]}},C.writeEvent=function(P,w){w._WriteFieldBegin(s._BondDataType._BT_STRING,1,null),w._WriteString(P.id),w._WriteFieldBegin(s._BondDataType._BT_INT64,3,null),w._WriteInt64(p.numberToBondInt64(P.timestamp)),w._WriteFieldBegin(s._BondDataType._BT_STRING,5,null),w._WriteString(P.type),w._WriteFieldBegin(s._BondDataType._BT_STRING,6,null),w._WriteString(P.name);var f={},g=0,_={},b=0,m={},I=0,x={},k=0,F={},U=0,N={},R=0,M={},j=0;for(var W in P.properties)if(P.properties.hasOwnProperty(W))if(($=P.properties[W]).cc>0)M[W]=$,j++;else if($.pii>0)N[W]=$,R++;else switch($.type){case E.AWTPropertyType.String:f[W]=$.value,g++;break;case E.AWTPropertyType.Int64:_[W]=$.value,b++;break;case E.AWTPropertyType.Double:m[W]=$.value,I++;break;case E.AWTPropertyType.Boolean:x[W]=$.value,k++;break;case E.AWTPropertyType.Date:F[W]=$.value,U++}if(g)for(var W in w._WriteFieldBegin(s._BondDataType._BT_MAP,13,null),w._WriteMapContainerBegin(g,s._BondDataType._BT_STRING,s._BondDataType._BT_STRING),f)if(f.hasOwnProperty(W)){var ce=f[W];w._WriteString(W),w._WriteString(ce.toString())}if(R)for(var W in w._WriteFieldBegin(s._BondDataType._BT_MAP,30,null),w._WriteMapContainerBegin(R,s._BondDataType._BT_STRING,s._BondDataType._BT_STRUCT),N)if(N.hasOwnProperty(W)){var $=N[W];w._WriteString(W),w._WriteFieldBegin(s._BondDataType._BT_INT32,1,null),w._WriteInt32(1),w._WriteFieldBegin(s._BondDataType._BT_INT32,2,null),w._WriteInt32($.pii),w._WriteFieldBegin(s._BondDataType._BT_STRING,3,null),w._WriteString($.value.toString()),w._WriteStructEnd(!1)}if(k)for(var W in w._WriteFieldBegin(s._BondDataType._BT_MAP,31,null),w._WriteMapContainerBegin(k,s._BondDataType._BT_STRING,s._BondDataType._BT_BOOL),x)x.hasOwnProperty(W)&&(ce=x[W],w._WriteString(W),w._WriteBool(ce));if(U)for(var W in w._WriteFieldBegin(s._BondDataType._BT_MAP,32,null),w._WriteMapContainerBegin(U,s._BondDataType._BT_STRING,s._BondDataType._BT_INT64),F)F.hasOwnProperty(W)&&(ce=F[W],w._WriteString(W),w._WriteInt64(p.numberToBondInt64(ce)));if(b)for(var W in w._WriteFieldBegin(s._BondDataType._BT_MAP,33,null),w._WriteMapContainerBegin(b,s._BondDataType._BT_STRING,s._BondDataType._BT_INT64),_)_.hasOwnProperty(W)&&(ce=_[W],w._WriteString(W),w._WriteInt64(p.numberToBondInt64(ce)));if(I)for(var W in w._WriteFieldBegin(s._BondDataType._BT_MAP,34,null),w._WriteMapContainerBegin(I,s._BondDataType._BT_STRING,s._BondDataType._BT_DOUBLE),m)m.hasOwnProperty(W)&&(ce=m[W],w._WriteString(W),w._WriteDouble(ce));if(j)for(var W in w._WriteFieldBegin(s._BondDataType._BT_MAP,36,null),w._WriteMapContainerBegin(j,s._BondDataType._BT_STRING,s._BondDataType._BT_STRUCT),M)M.hasOwnProperty(W)&&($=M[W],w._WriteString(W),w._WriteFieldBegin(s._BondDataType._BT_INT32,1,null),w._WriteInt32($.cc),w._WriteFieldBegin(s._BondDataType._BT_STRING,2,null),w._WriteString($.value.toString()),w._WriteStructEnd(!1));w._WriteStructEnd(!1)},C.base64Encode=function(P){return s._Encoding._Base64_GetString(P)},C}();u.default=l},5816:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=c(5593),E=c(2551),d=c(676),T=function(){function l(){}return l.initialize=function(C){var P=this;this._sendStats=C,this._isInitalized=!0,E.default.addNotificationListener({eventsSent:function(w){P._addStat("records_sent_count",w.length,w[0].apiKey)},eventsDropped:function(w,f){switch(f){case d.AWTEventsDroppedReason.NonRetryableStatus:P._addStat("d_send_fail",w.length,w[0].apiKey),P._addStat("records_dropped_count",w.length,w[0].apiKey);break;case d.AWTEventsDroppedReason.MaxRetryLimit:P._addStat("d_retry_limit",w.length,w[0].apiKey),P._addStat("records_dropped_count",w.length,w[0].apiKey);break;case d.AWTEventsDroppedReason.QueueFull:P._addStat("d_queue_full",w.length,w[0].apiKey)}},eventsRejected:function(w,f){switch(f){case d.AWTEventsRejectedReason.InvalidEvent:P._addStat("r_inv",w.length,w[0].apiKey);break;case d.AWTEventsRejectedReason.KillSwitch:P._addStat("r_kl",w.length,w[0].apiKey);break;case d.AWTEventsRejectedReason.SizeLimitExceeded:P._addStat("r_size",w.length,w[0].apiKey)}P._addStat("r_count",w.length,w[0].apiKey)},eventsRetrying:null}),setTimeout(function(){return P.flush()},6e4)},l.teardown=function(){this._isInitalized&&(this.flush(),this._isInitalized=!1)},l.eventReceived=function(C){l._addStat("records_received_count",1,C)},l.flush=function(){var C=this;if(this._isInitalized){for(var P in this._stats)this._stats.hasOwnProperty(P)&&this._sendStats(this._stats[P],P);this._stats={},setTimeout(function(){return C.flush()},6e4)}},l._addStat=function(C,P,w){if(this._isInitalized&&w!==s.StatsApiKey){var f=s.getTenantId(w);this._stats[f]||(this._stats[f]={}),this._stats[f][C]=this._stats[f][C]?this._stats[f][C]+P:P}},l._isInitalized=!1,l._stats={},l}();u.default=T},676:(K,u)=>{"use strict";var l;Object.defineProperty(u,"__esModule",{value:!0}),(l=u.AWTPropertyType||(u.AWTPropertyType={}))[l.Unspecified=0]="Unspecified",l[l.String=1]="String",l[l.Int64=2]="Int64",l[l.Double=3]="Double",l[l.Boolean=4]="Boolean",l[l.Date=5]="Date",function(l){l[l.NotSet=0]="NotSet",l[l.DistinguishedName=1]="DistinguishedName",l[l.GenericData=2]="GenericData",l[l.IPV4Address=3]="IPV4Address",l[l.IPv6Address=4]="IPv6Address",l[l.MailSubject=5]="MailSubject",l[l.PhoneNumber=6]="PhoneNumber",l[l.QueryString=7]="QueryString",l[l.SipAddress=8]="SipAddress",l[l.SmtpAddress=9]="SmtpAddress",l[l.Identity=10]="Identity",l[l.Uri=11]="Uri",l[l.Fqdn=12]="Fqdn",l[l.IPV4AddressLegacy=13]="IPV4AddressLegacy"}(u.AWTPiiKind||(u.AWTPiiKind={})),function(l){l[l.NotSet=0]="NotSet",l[l.GenericContent=1]="GenericContent"}(u.AWTCustomerContentKind||(u.AWTCustomerContentKind={})),function(l){l[l.Low=1]="Low",l[l.Normal=2]="Normal",l[l.High=3]="High",l[l.Immediate_sync=5]="Immediate_sync"}(u.AWTEventPriority||(u.AWTEventPriority={})),function(l){l[l.NonRetryableStatus=1]="NonRetryableStatus",l[l.QueueFull=3]="QueueFull",l[l.MaxRetryLimit=4]="MaxRetryLimit"}(u.AWTEventsDroppedReason||(u.AWTEventsDroppedReason={})),function(l){l[l.InvalidEvent=1]="InvalidEvent",l[l.SizeLimitExceeded=2]="SizeLimitExceeded",l[l.KillSwitch=3]="KillSwitch"}(u.AWTEventsRejectedReason||(u.AWTEventsRejectedReason={}))},5593:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=c(6649),E=c(676),d=/[xy]/g,l=null;u.EventNameAndTypeRegex=/^[a-zA-Z]([a-zA-Z0-9]|_){2,98}[a-zA-Z0-9]$/,u.EventNameDotRegex=/\./g,u.PropertyNameRegex=/^[a-zA-Z](([a-zA-Z0-9|_|\.]){0,98}[a-zA-Z0-9])?$/,u.StatsApiKey="a387cfcf60114a43a7699f9fbb49289e-9bceb9fe-1c06-460f-96c5-6a0b247358bc-7238";var C=l,P=l,w=l;function _(J){return"string"==typeof J}function b(J){return"number"==typeof J}function m(J){return"boolean"==typeof J}function I(J){return J instanceof Date}function x(J){return 1e4*(J+621355968e5)}function $(){return!("undefined"==typeof navigator||!navigator.product)&&"ReactNative"===navigator.product}function ce(){return"object"==typeof self&&"ServiceWorkerGlobalScope"===self.constructor.name}function Q(J){return J<10?"0"+J:J.toString()}function re(J){return void 0===J||J===l||""===J}u.numberToBondInt64=function(J){var se=new s.Int64("0");return se.low=4294967295&J,se.high=Math.floor(J/4294967296),se},u.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(d,function(J){var se=16*Math.random()|0;return("x"===J?se:3&se|8).toString(16)})},u.isString=_,u.isNumber=b,u.isBoolean=m,u.isDate=I,u.msToTicks=x,u.getTenantId=function(J){var se=J.indexOf("-");return se>-1?J.substring(0,se):""},u.isBeaconsSupported=function(){return C===l&&(C="undefined"!=typeof navigator&&Boolean(navigator.sendBeacon)),C},u.isUint8ArrayAvailable=function(){return P===l&&(P="undefined"!=typeof Uint8Array&&!function(){if("undefined"!=typeof navigator&&navigator.userAgent){var J=navigator.userAgent.toLowerCase();if((J.indexOf("safari")>=0||J.indexOf("firefox")>=0)&&J.indexOf("chrome")<0)return!0}return!1}()&&!$()),P},u.isPriority=function(J){return!(!b(J)||!(J>=1&&J<=3||5===J))},u.sanitizeProperty=function(J,se){return!u.PropertyNameRegex.test(J)||re(se)||(re(se.value)&&(se={value:se,type:E.AWTPropertyType.Unspecified}),se.type=function(J,se){switch(se=function(J){return!!(b(J)&&J>=0&&J<=4)}(se)?se:E.AWTPropertyType.Unspecified){case E.AWTPropertyType.Unspecified:return function(J){switch(typeof J){case"string":return E.AWTPropertyType.String;case"boolean":return E.AWTPropertyType.Boolean;case"number":return E.AWTPropertyType.Double;case"object":return I(J)?E.AWTPropertyType.Date:l}return l}(J);case E.AWTPropertyType.String:return _(J)?se:l;case E.AWTPropertyType.Boolean:return m(J)?se:l;case E.AWTPropertyType.Date:return I(J)&&NaN!==J.getTime()?se:l;case E.AWTPropertyType.Int64:return b(J)&&J%1==0?se:l;case E.AWTPropertyType.Double:return b(J)?se:l}return l}(se.value,se.type),!se.type)||(I(se.value)&&(se.value=x(se.value.getTime())),se.pii>0&&se.cc>0)?l:se.pii?function(J){return!!(b(J)&&J>=0&&J<=13)}(se.pii)?se:l:se.cc?function(J){return!!(b(J)&&J>=0&&J<=1)}(se.cc)?se:l:se},u.getISOString=function(J){return J.getUTCFullYear()+"-"+Q(J.getUTCMonth()+1)+"-"+Q(J.getUTCDate())+"T"+Q(J.getUTCHours())+":"+Q(J.getUTCMinutes())+":"+Q(J.getUTCSeconds())+"."+function(J){return J<10?"00"+J:J<100?"0"+J:J.toString()}(J.getUTCMilliseconds())+"Z"},u.useXDomainRequest=function(){if(w===l){var J=new XMLHttpRequest;w=void 0===J.withCredentials&&"undefined"!=typeof XDomainRequest}return w},u.useFetchRequest=function(){return $()||ce()},u.isReactNative=$,u.isServiceWorkerGlobalScope=ce},4094:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=c(5593),E="MicrosoftApplicationsTelemetryDeviceId",d="MicrosoftApplicationsTelemetryFirstLaunchTime",l_WIN=/(windows|win32)/i,l_WINRT=/ arm;/i,l_WINPHONE=/windows\sphone\s\d+\.\d+/i,l_OSX=/(macintosh|mac os x)/i,l_IOS=/(iPad|iPhone|iPod)(?=.*like Mac OS X)/i,l_LINUX=/(linux|joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)/i,l_ANDROID=/android/i,l_CROS=/CrOS/i,C={5.1:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1","10.0":"10"},P="([\\d,.]+)",f="Unknown",g="undefined",_=function(){function b(){}return b.addPropertyStorageOverride=function(m){return!!m&&(this._propertyStorage=m,!0)},b.autoCollect=function(m,I,x){if(this._semanticContext=m,this._disableCookies=I,this._autoCollect(),!x&&typeof navigator!==g&&(x=navigator.userAgent||""),this._autoCollectFromUserAgent(x),this._disableCookies&&!this._propertyStorage)return this._deleteCookie(E),void this._deleteCookie(d);(this._propertyStorage||this._areCookiesAvailable&&!this._disableCookies)&&this._autoCollectDeviceId()},b.checkAndSaveDeviceId=function(m){if(m){var I=this._getData(E),x=this._getData(d);I!==m&&(x=s.getISOString(new Date)),this._saveData(E,m),this._saveData(d,x),this._setFirstLaunchTime(x)}},b._autoCollectDeviceId=function(){var m=this._getData(E);m||(m=s.newGuid()),this._semanticContext.setDeviceId(m)},b._autoCollect=function(){typeof document!==g&&document.documentElement&&this._semanticContext.setAppLanguage(document.documentElement.lang),typeof navigator!==g&&this._semanticContext.setUserLanguage(navigator.userLanguage||navigator.language);var m=(new Date).getTimezoneOffset(),I=m%60,x=(m-I)/60,k="+";x>0&&(k="-"),x=Math.abs(x),I=Math.abs(I),this._semanticContext.setUserTimeZone(k+(x<10?"0"+x:x.toString())+":"+(I<10?"0"+I:I.toString()))},b._autoCollectFromUserAgent=function(m){if(m){var I=this._getBrowserName(m);this._semanticContext.setDeviceBrowserName(I),this._semanticContext.setDeviceBrowserVersion(this._getBrowserVersion(m,I));var x=this._getOsName(m);this._semanticContext.setDeviceOsName(x),this._semanticContext.setDeviceOsVersion(this._getOsVersion(m,x))}},b._getBrowserName=function(m){return this._userAgentContainsString("OPR/",m)?"Opera":this._userAgentContainsString("PhantomJS",m)?"PhantomJS":this._userAgentContainsString("Edge",m)||this._userAgentContainsString("Edg",m)?"Edge":this._userAgentContainsString("Electron",m)?"Electron":this._userAgentContainsString("Chrome",m)?"Chrome":this._userAgentContainsString("Trident",m)?"MSIE":this._userAgentContainsString("Firefox",m)?"Firefox":this._userAgentContainsString("Safari",m)?"Safari":this._userAgentContainsString("SkypeShell",m)?"SkypeShell":f},b._setFirstLaunchTime=function(m){if(!isNaN(m)){var I=new Date;I.setTime(parseInt(m,10)),m=s.getISOString(I)}this.firstLaunchTime=m},b._userAgentContainsString=function(m,I){return I.indexOf(m)>-1},b._getBrowserVersion=function(m,I){if("MSIE"===I)return this._getIeVersion(m);if("Edge"===I){var x=this._getOtherVersion(I,m);return x===f?this._getOtherVersion("Edg",m):x}return this._getOtherVersion(I,m)},b._getIeVersion=function(m){var I=m.match(new RegExp("MSIE "+P));if(I)return I[1];var x=m.match(new RegExp("rv:"+P));return x?x[1]:void 0},b._getOtherVersion=function(m,I){"Safari"===m&&(m="Version");var x=I.match(new RegExp(m+"/"+P));return x?x[1]:f},b._getOsName=function(m){return m.match(l_WINPHONE)?"Windows Phone":m.match(l_WINRT)?"Windows RT":m.match(l_IOS)?"iOS":m.match(l_ANDROID)?"Android":m.match(l_LINUX)?"Linux":m.match(l_OSX)?"Mac OS X":m.match(l_WIN)?"Windows":m.match(l_CROS)?"Chrome OS":f},b._getOsVersion=function(m,I){return"Windows"===I?this._getGenericOsVersion(m,"Windows NT"):"Android"===I?this._getGenericOsVersion(m,I):"Mac OS X"===I?this._getMacOsxVersion(m):f},b._getGenericOsVersion=function(m,I){var x=m.match(new RegExp(I+" "+P));return x?C[x[1]]?C[x[1]]:x[1]:f},b._getMacOsxVersion=function(m){var I=m.match(new RegExp("Mac OS X ([\\d,_,.]+)"));if(I){var x=I[1].replace(/_/g,".");if(x){var k=this._getDelimiter(x);return k?x.split(k)[0]:x}}return f},b._getDelimiter=function(m){return m.indexOf(".")>-1?".":m.indexOf("_")>-1?"_":null},b._saveData=function(m,I){if(this._propertyStorage)this._propertyStorage.setProperty(m,I);else if(this._areCookiesAvailable){var x=new Date;x.setTime(x.getTime()+31536e6);var k="expires="+x.toUTCString();document.cookie=m+"="+I+"; "+k}},b._getData=function(m){if(this._propertyStorage)return this._propertyStorage.getProperty(m)||"";if(this._areCookiesAvailable){m+="=";for(var I=document.cookie.split(";"),x=0;x<I.length;x++){for(var k=I[x],F=0;" "===k.charAt(F);)F++;if(0===(k=k.substring(F)).indexOf(m))return k.substring(m.length,k.length)}}return""},b._deleteCookie=function(m){this._areCookiesAvailable&&(document.cookie=m+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;")},b._disableCookies=!1,b._areCookiesAvailable=typeof document!==g&&typeof document.cookie!==g,b}();u.default=_},58:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=c(5593),E=c(676),d=function(){function p(T){this._event={name:"",properties:{}},T&&this.setName(T)}return p.prototype.setName=function(T){this._event.name=T},p.prototype.getName=function(){return this._event.name},p.prototype.setType=function(T){this._event.type=T},p.prototype.getType=function(){return this._event.type},p.prototype.setTimestamp=function(T){this._event.timestamp=T},p.prototype.getTimestamp=function(){return this._event.timestamp},p.prototype.setEventPriority=function(T){this._event.priority=T},p.prototype.getEventPriority=function(){return this._event.priority},p.prototype.setProperty=function(T,l,C){void 0===C&&(C=E.AWTPropertyType.Unspecified);var P={value:l,type:C,pii:E.AWTPiiKind.NotSet,cc:E.AWTCustomerContentKind.NotSet};null!==(P=s.sanitizeProperty(T,P))?this._event.properties[T]=P:delete this._event.properties[T]},p.prototype.setPropertyWithPii=function(T,l,C,P){void 0===P&&(P=E.AWTPropertyType.Unspecified);var w={value:l,type:P,pii:C,cc:E.AWTCustomerContentKind.NotSet};null!==(w=s.sanitizeProperty(T,w))?this._event.properties[T]=w:delete this._event.properties[T]},p.prototype.setPropertyWithCustomerContent=function(T,l,C,P){void 0===P&&(P=E.AWTPropertyType.Unspecified);var w={value:l,type:P,pii:E.AWTPiiKind.NotSet,cc:C};null!==(w=s.sanitizeProperty(T,w))?this._event.properties[T]=w:delete this._event.properties[T]},p.prototype.getPropertyMap=function(){return this._event.properties},p.prototype.getEvent=function(){return this._event},p}();u.default=d},9449:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=c(676),E=c(6064),d=c(7270),p=c(7190),T=c(4501),l=c(8779),C=c(5593),P=c(2551),w=c(4023),_="POST",b=function(){function m(I,x,k,F,U){var N=this;this._requestQueue=I,this._queueManager=k,this._httpInterface=F,this._urlString="?qsp=true&content-type=application%2Fbond-compact-binary&client-id=NO_AUTH&sdk-version="+l.FullVersionString,this._killSwitch=new p.default,this._paused=!1,this._useBeacons=!1,this._activeConnections=0,this._clockSkewManager=new T.default(U),C.isUint8ArrayAvailable()||(this._urlString+="&content-encoding=base64"),this._urlString=x+this._urlString,this._httpInterface||(this._useBeacons=!C.isReactNative(),this._httpInterface={sendPOST:function(R,M,j,W,$,ce){try{if(C.useFetchRequest())fetch(R,{body:M,method:_}).then(function(ae){var he={};ae.headers&&ae.headers.forEach(function(Se,oe){he[oe]=Se}),$(ae.status,he)}).catch(function(ae){W(0,{})});else if(C.useXDomainRequest()){var Q=new XDomainRequest;Q.open(_,R),Q.onload=function(){$(200,null)},Q.onerror=function(){W(400,null)},Q.ontimeout=function(){j(500,null)},Q.send(M)}else{var te=new XMLHttpRequest;te.open(_,R,!ce),te.onload=function(){$(te.status,N._convertAllHeadersToMap(te.getAllResponseHeaders()))},te.onerror=function(){W(te.status,N._convertAllHeadersToMap(te.getAllResponseHeaders()))},te.ontimeout=function(){j(te.status,N._convertAllHeadersToMap(te.getAllResponseHeaders()))},te.send(M)}}catch(ae){W(400,null)}}})}return m.prototype.hasIdleConnection=function(){return this._activeConnections<2},m.prototype.sendQueuedRequests=function(){for(;this.hasIdleConnection()&&!this._paused&&this._requestQueue.length>0&&this._clockSkewManager.allowRequestSending();)this._activeConnections++,this._sendRequest(this._requestQueue.shift(),0,!1);this.hasIdleConnection()&&w.default.scheduleTimer()},m.prototype.isCompletelyIdle=function(){return 0===this._activeConnections},m.prototype.teardown=function(){for(;this._requestQueue.length>0;)this._sendRequest(this._requestQueue.shift(),0,!0)},m.prototype.pause=function(){this._paused=!0},m.prototype.resume=function(){this._paused=!1,this.sendQueuedRequests()},m.prototype.removeQueuedRequests=function(){this._requestQueue.length=0},m.prototype.sendSynchronousRequest=function(I,x){this._paused&&(I[x][0].priority=s.AWTEventPriority.High),this._activeConnections++,this._sendRequest(I,0,!1,!0)},m.prototype._sendRequest=function(I,x,k,F){var U=this;void 0===F&&(F=!1);try{if(this._paused)return this._activeConnections--,void this._queueManager.addBackRequest(I);var N=0,R="";for(var M in I)I.hasOwnProperty(M)&&(this._killSwitch.isTenantKilled(M)?(P.default.eventsRejected(I[M],s.AWTEventsRejectedReason.KillSwitch),delete I[M]):(R.length>0&&(R+=","),R+=M,N++));if(N>0){var j=E.default.getPayloadBlob(I,N);j.remainingRequest&&this._requestQueue.push(j.remainingRequest);var W=this._urlString+"&x-apikey="+R+"&client-time-epoch-millis="+Date.now().toString();this._clockSkewManager.shouldAddClockSkewHeaders()&&(W=W+"&time-delta-to-apply-millis="+this._clockSkewManager.getClockSkewHeaderValue());var $;for(var M in $=C.isUint8ArrayAvailable()?new Uint8Array(j.payloadBlob):E.default.base64Encode(j.payloadBlob),I)if(I.hasOwnProperty(M))for(var ce=0;ce<I[M].length;++ce)I[M][ce].sendAttempt>0?I[M][ce].sendAttempt++:I[M][ce].sendAttempt=1;if(this._useBeacons&&k&&C.isBeaconsSupported()&&navigator.sendBeacon(W,$))return;this._httpInterface.sendPOST(W,$,function(Q,te){U._retryRequestIfNeeded(Q,te,I,N,R,x,k,F)},function(Q,te){U._retryRequestIfNeeded(Q,te,I,N,R,x,k,F)},function(Q,te){U._retryRequestIfNeeded(Q,te,I,N,R,x,k,F)},k||F)}else k||this._handleRequestFinished(!1,{},k,F)}catch(Q){this._handleRequestFinished(!1,{},k,F)}},m.prototype._retryRequestIfNeeded=function(I,x,k,F,U,N,R,M){var j=this,W=!0;if(void 0!==I){if(x){var $=this._killSwitch.setKillSwitchTenants(x["kill-tokens"],x["kill-duration-seconds"]);this._clockSkewManager.setClockSkew(x["time-delta-millis"]);for(var ce=0;ce<$.length;++ce)P.default.eventsRejected(k[$[ce]],s.AWTEventsRejectedReason.KillSwitch),delete k[$[ce]],F--}else this._clockSkewManager.setClockSkew(null);if(200===I)return void this._handleRequestFinished(!0,k,R,M);(!d.default.shouldRetryForStatus(I)||F<=0)&&(W=!1)}if(W)if(M)this._activeConnections--,k[U][0].priority=s.AWTEventPriority.High,this._queueManager.addBackRequest(k);else if(N<1){for(var Q in k)k.hasOwnProperty(Q)&&P.default.eventsRetrying(k[Q]);setTimeout(function(){return j._sendRequest(k,N+1,!1)},d.default.getMillisToBackoffForRetry(N))}else this._activeConnections--,w.default.backOffTransmission(),this._queueManager.addBackRequest(k);else this._handleRequestFinished(!1,k,R,M)},m.prototype._handleRequestFinished=function(I,x,k,F){for(var U in I&&w.default.clearBackOff(),x)x.hasOwnProperty(U)&&(I?P.default.eventsSent(x[U]):P.default.eventsDropped(x[U],s.AWTEventsDroppedReason.NonRetryableStatus));this._activeConnections--,!F&&!k&&this.sendQueuedRequests()},m.prototype._convertAllHeadersToMap=function(I){var x={};if(I)for(var k=I.split("\n"),F=0;F<k.length;++F){var U=k[F].split(": ");x[U[0]]=U[1]}return x},m}();u.default=b},7613:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=c(676),E=c(5640),d=c(4189),p=c(6208),T=c(4023),l=c(2551),C=c(4094),P=function(){function w(){}return w.initialize=function(f,g){if(void 0===g&&(g={}),!this._isInitialized)return this._isInitialized=!0,d.default.defaultTenantToken=f,this._overrideValuesFromConfig(g),this._config.disableCookiesUsage&&!this._config.propertyStorageOverride&&(d.default.sessionEnabled=!1),C.default.addPropertyStorageOverride(this._config.propertyStorageOverride),C.default.autoCollect(d.default.semanticContext,this._config.disableCookiesUsage,this._config.userAgent),T.default.initialize(this._config),d.default.loggingEnabled=!0,this._config.enableAutoUserSession&&(this.getLogger().logSession(E.AWTSessionState.Started),window.addEventListener("beforeunload",this.flushAndTeardown)),this.getLogger()},w.getSemanticContext=function(){return d.default.semanticContext},w.flush=function(f){this._isInitialized&&!this._isDestroyed&&T.default.flush(f)},w.flushAndTeardown=function(){this._isInitialized&&!this._isDestroyed&&(this._config.enableAutoUserSession&&this.getLogger().logSession(E.AWTSessionState.Ended),T.default.flushAndTeardown(),d.default.loggingEnabled=!1,this._isDestroyed=!0)},w.pauseTransmission=function(){this._isInitialized&&!this._isDestroyed&&T.default.pauseTransmission()},w.resumeTransmision=function(){this._isInitialized&&!this._isDestroyed&&T.default.resumeTransmision()},w.setTransmitProfile=function(f){this._isInitialized&&!this._isDestroyed&&T.default.setTransmitProfile(f)},w.loadTransmitProfiles=function(f){this._isInitialized&&!this._isDestroyed&&T.default.loadTransmitProfiles(f)},w.setContext=function(f,g,_){void 0===_&&(_=s.AWTPropertyType.Unspecified),d.default.logManagerContext.setProperty(f,g,_)},w.setContextWithPii=function(f,g,_,b){void 0===b&&(b=s.AWTPropertyType.Unspecified),d.default.logManagerContext.setPropertyWithPii(f,g,_,b)},w.setContextWithCustomerContent=function(f,g,_,b){void 0===b&&(b=s.AWTPropertyType.Unspecified),d.default.logManagerContext.setPropertyWithCustomerContent(f,g,_,b)},w.getLogger=function(f){var g=f;return(!g||g===d.default.defaultTenantToken)&&(g=""),this._loggers[g]||(this._loggers[g]=new p.default(g)),this._loggers[g]},w.addNotificationListener=function(f){l.default.addNotificationListener(f)},w.removeNotificationListener=function(f){l.default.removeNotificationListener(f)},w._overrideValuesFromConfig=function(f){f.collectorUri&&(this._config.collectorUri=f.collectorUri),f.cacheMemorySizeLimitInNumberOfEvents>0&&(this._config.cacheMemorySizeLimitInNumberOfEvents=f.cacheMemorySizeLimitInNumberOfEvents),f.httpXHROverride&&f.httpXHROverride.sendPOST&&(this._config.httpXHROverride=f.httpXHROverride),f.propertyStorageOverride&&f.propertyStorageOverride.getProperty&&f.propertyStorageOverride.setProperty&&(this._config.propertyStorageOverride=f.propertyStorageOverride),f.userAgent&&(this._config.userAgent=f.userAgent),f.disableCookiesUsage&&(this._config.disableCookiesUsage=f.disableCookiesUsage),f.canSendStatEvent&&(this._config.canSendStatEvent=f.canSendStatEvent),f.enableAutoUserSession&&"undefined"!=typeof window&&window.addEventListener&&(this._config.enableAutoUserSession=f.enableAutoUserSession),f.clockSkewRefreshDurationInMins>0&&(this._config.clockSkewRefreshDurationInMins=f.clockSkewRefreshDurationInMins)},w._loggers={},w._isInitialized=!1,w._isDestroyed=!1,w._config={collectorUri:"https://browser.pipe.aria.microsoft.com/Collector/3.0/",cacheMemorySizeLimitInNumberOfEvents:1e4,disableCookiesUsage:!1,canSendStatEvent:function(f){return!0},clockSkewRefreshDurationInMins:0},w}();u.default=P},4189:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=c(58),E=c(1009),d=function(){function p(){}return p.logManagerContext=new s.default,p.sessionEnabled=!0,p.loggingEnabled=!1,p.defaultTenantToken="",p.semanticContext=new E.default(!0,p.logManagerContext),p}();u.default=d},6208:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=c(676),E=c(5640),d=c(58),p=c(5593),T=c(5816),l=c(2551),C=c(4023),P=c(4189),w=c(8779),f=c(1009),g=c(4094),_=function(){function b(m){this._apiKey=m,this._contextProperties=new d.default,this._semanticContext=new f.default(!1,this._contextProperties),this._sessionStartTime=0,this._createInitId()}return b.prototype.setContext=function(m,I,x){void 0===x&&(x=s.AWTPropertyType.Unspecified),this._contextProperties.setProperty(m,I,x)},b.prototype.setContextWithPii=function(m,I,x,k){void 0===k&&(k=s.AWTPropertyType.Unspecified),this._contextProperties.setPropertyWithPii(m,I,x,k)},b.prototype.setContextWithCustomerContent=function(m,I,x,k){void 0===k&&(k=s.AWTPropertyType.Unspecified),this._contextProperties.setPropertyWithCustomerContent(m,I,x,k)},b.prototype.getSemanticContext=function(){return this._semanticContext},b.prototype.logEvent=function(m){if(P.default.loggingEnabled){this._apiKey||(this._apiKey=P.default.defaultTenantToken,this._createInitId());var I=!0;p.isString(m)?m={name:m}:m instanceof d.default&&(m=m.getEvent(),I=!1),T.default.eventReceived(this._apiKey),b._logEvent(b._getInternalEvent(m,this._apiKey,I),this._contextProperties)}},b.prototype.logSession=function(m,I){if(P.default.sessionEnabled){var x={name:"session",type:"session",properties:{}};if(b._addPropertiesToEvent(x,I),x.priority=s.AWTEventPriority.High,m===E.AWTSessionState.Started){if(this._sessionStartTime>0)return;this._sessionStartTime=(new Date).getTime(),this._sessionId=p.newGuid(),this.setContext("Session.Id",this._sessionId),x.properties["Session.State"]="Started"}else{if(m!==E.AWTSessionState.Ended)return;if(0===this._sessionStartTime)return;var k=Math.floor(((new Date).getTime()-this._sessionStartTime)/1e3);x.properties["Session.Id"]=this._sessionId,x.properties["Session.State"]="Ended",x.properties["Session.Duration"]=k.toString(),x.properties["Session.DurationBucket"]=b._getSessionDurationFromTime(k),this._sessionStartTime=0,this.setContext("Session.Id",null),this._sessionId=void 0}x.properties["Session.FirstLaunchTime"]=g.default.firstLaunchTime,this.logEvent(x)}},b.prototype.getSessionId=function(){return this._sessionId},b.prototype.logFailure=function(m,I,x,k,F){if(m&&I){var U={name:"failure",type:"failure",properties:{}};b._addPropertiesToEvent(U,F),U.properties["Failure.Signature"]=m,U.properties["Failure.Detail"]=I,x&&(U.properties["Failure.Category"]=x),k&&(U.properties["Failure.Id"]=k),U.priority=s.AWTEventPriority.High,this.logEvent(U)}},b.prototype.logPageView=function(m,I,x,k,F,U){if(m&&I){var N={name:"pageview",type:"pageview",properties:{}};b._addPropertiesToEvent(N,U),N.properties["PageView.Id"]=m,N.properties["PageView.Name"]=I,x&&(N.properties["PageView.Category"]=x),k&&(N.properties["PageView.Uri"]=k),F&&(N.properties["PageView.ReferrerUri"]=F),this.logEvent(N)}},b.prototype._createInitId=function(){!b._initIdMap[this._apiKey]&&this._apiKey&&(b._initIdMap[this._apiKey]=p.newGuid())},b._addPropertiesToEvent=function(m,I){if(I)for(var x in I instanceof d.default&&(I=I.getEvent()),I.name&&(m.name=I.name),I.priority&&(m.priority=I.priority),I.properties)I.properties.hasOwnProperty(x)&&(m.properties[x]=I.properties[x])},b._getSessionDurationFromTime=function(m){return m<0?"Undefined":m<=3?"UpTo3Sec":m<=10?"UpTo10Sec":m<=30?"UpTo30Sec":m<=60?"UpTo60Sec":m<=180?"UpTo3Min":m<=600?"UpTo10Min":m<=1800?"UpTo30Min":"Above30Min"},b._logEvent=function(m,I){m.name&&p.isString(m.name)?(m.name=m.name.toLowerCase(),m.name=m.name.replace(p.EventNameDotRegex,"_"),m.type=m.type&&p.isString(m.type)?m.type.toLowerCase():"custom",p.EventNameAndTypeRegex.test(m.name)&&p.EventNameAndTypeRegex.test(m.type)?((!p.isNumber(m.timestamp)||m.timestamp<0)&&(m.timestamp=(new Date).getTime()),m.properties||(m.properties={}),this._addContextIfAbsent(m,I.getPropertyMap()),this._addContextIfAbsent(m,P.default.logManagerContext.getPropertyMap()),this._setDefaultProperty(m,"EventInfo.InitId",this._getInitId(m.apiKey)),this._setDefaultProperty(m,"EventInfo.Sequence",this._getSequenceId(m.apiKey)),this._setDefaultProperty(m,"EventInfo.SdkVersion",w.FullVersionString),this._setDefaultProperty(m,"EventInfo.Name",m.name),this._setDefaultProperty(m,"EventInfo.Time",new Date(m.timestamp).toISOString()),p.isPriority(m.priority)||(m.priority=s.AWTEventPriority.Normal),this._sendEvent(m)):l.default.eventsRejected([m],s.AWTEventsRejectedReason.InvalidEvent)):l.default.eventsRejected([m],s.AWTEventsRejectedReason.InvalidEvent)},b._addContextIfAbsent=function(m,I){if(I)for(var x in I)I.hasOwnProperty(x)&&(m.properties[x]||(m.properties[x]=I[x]))},b._setDefaultProperty=function(m,I,x){m.properties[I]={value:x,pii:s.AWTPiiKind.NotSet,type:s.AWTPropertyType.String}},b._sendEvent=function(m){C.default.sendEvent(m)},b._getInternalEvent=function(m,I,x){if(m.properties=m.properties||{},x)for(var k in m.properties)m.properties.hasOwnProperty(k)&&(m.properties[k]=p.sanitizeProperty(k,m.properties[k]),null===m.properties[k]&&delete m.properties[k]);var F=m;return F.id=p.newGuid(),F.apiKey=I,F},b._getInitId=function(m){return b._initIdMap[m]},b._getSequenceId=function(m){return void 0===b._sequenceIdMap[m]&&(b._sequenceIdMap[m]=0),(++b._sequenceIdMap[m]).toString()},b._sequenceIdMap={},b._initIdMap={},b}();u.default=_},4220:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=c(676),E=c(9449),d=c(4023),p=c(2659),T=c(2551),l=c(5593),f=function(){function g(_,b,m,I){this._queueSizeLimit=b,this._isCurrentlyUploadingNow=!1,this._uploadNowQueue=[],this._shouldDropEventsOnPause=!1,this._paused=!1,this._queueSize=0,this._outboundQueue=[],this._inboundQueues={},this._inboundQueues[s.AWTEventPriority.High]=[],this._inboundQueues[s.AWTEventPriority.Normal]=[],this._inboundQueues[s.AWTEventPriority.Low]=[],this._addEmptyQueues(),this._batcher=new p.default(this._outboundQueue,500),this._httpManager=new E.default(this._outboundQueue,_,this,m,I)}return g.prototype.addEvent=function(_){l.isPriority(_.priority)||(_.priority=s.AWTEventPriority.Normal),_.priority===s.AWTEventPriority.Immediate_sync?this._httpManager.sendSynchronousRequest(this._batcher.addEventToBatch(_),_.apiKey):this._queueSize<this._queueSizeLimit||this._dropEventWithPriorityOrLess(_.priority)?this._addEventToProperQueue(_):T.default.eventsDropped([_],s.AWTEventsDroppedReason.QueueFull)},g.prototype.sendEventsForPriorityAndAbove=function(_){this._batchEvents(_),this._httpManager.sendQueuedRequests()},g.prototype.hasEvents=function(){return(this._inboundQueues[s.AWTEventPriority.High][0].length>0||this._inboundQueues[s.AWTEventPriority.Normal][0].length>0||this._inboundQueues[s.AWTEventPriority.Low][0].length>0||this._batcher.hasBatch())&&this._httpManager.hasIdleConnection()},g.prototype.addBackRequest=function(_){if(!this._paused||!this._shouldDropEventsOnPause){for(var b in _)if(_.hasOwnProperty(b))for(var m=0;m<_[b].length;++m)_[b][m].sendAttempt<6?this.addEvent(_[b][m]):T.default.eventsDropped([_[b][m]],s.AWTEventsDroppedReason.MaxRetryLimit);d.default.scheduleTimer()}},g.prototype.teardown=function(){this._paused||(this._batchEvents(s.AWTEventPriority.Low),this._httpManager.teardown())},g.prototype.uploadNow=function(_){var b=this;this._addEmptyQueues(),this._isCurrentlyUploadingNow?this._uploadNowQueue.push(_):(this._isCurrentlyUploadingNow=!0,setTimeout(function(){return b._uploadNow(_)},0))},g.prototype.pauseTransmission=function(){this._paused=!0,this._httpManager.pause(),this._shouldDropEventsOnPause&&(this._queueSize-=this._inboundQueues[s.AWTEventPriority.High][0].length+this._inboundQueues[s.AWTEventPriority.Normal][0].length+this._inboundQueues[s.AWTEventPriority.Low][0].length,this._inboundQueues[s.AWTEventPriority.High][0]=[],this._inboundQueues[s.AWTEventPriority.Normal][0]=[],this._inboundQueues[s.AWTEventPriority.Low][0]=[],this._httpManager.removeQueuedRequests())},g.prototype.resumeTransmission=function(){this._paused=!1,this._httpManager.resume()},g.prototype.shouldDropEventsOnPause=function(_){this._shouldDropEventsOnPause=_},g.prototype._removeFirstQueues=function(){this._inboundQueues[s.AWTEventPriority.High].shift(),this._inboundQueues[s.AWTEventPriority.Normal].shift(),this._inboundQueues[s.AWTEventPriority.Low].shift()},g.prototype._addEmptyQueues=function(){this._inboundQueues[s.AWTEventPriority.High].push([]),this._inboundQueues[s.AWTEventPriority.Normal].push([]),this._inboundQueues[s.AWTEventPriority.Low].push([])},g.prototype._addEventToProperQueue=function(_){(!this._paused||!this._shouldDropEventsOnPause)&&(this._queueSize++,this._inboundQueues[_.priority][this._inboundQueues[_.priority].length-1].push(_))},g.prototype._dropEventWithPriorityOrLess=function(_){for(var b=s.AWTEventPriority.Low;b<=_;){if(this._inboundQueues[b][this._inboundQueues[b].length-1].length>0)return T.default.eventsDropped([this._inboundQueues[b][this._inboundQueues[b].length-1].shift()],s.AWTEventsDroppedReason.QueueFull),!0;b++}return!1},g.prototype._batchEvents=function(_){for(var b=s.AWTEventPriority.High;b>=_;){for(;this._inboundQueues[b][0].length>0;){var m=this._inboundQueues[b][0].pop();this._queueSize--,this._batcher.addEventToBatch(m)}b--}this._batcher.flushBatch()},g.prototype._uploadNow=function(_){var b=this;this.hasEvents()&&this.sendEventsForPriorityAndAbove(s.AWTEventPriority.Low),this._checkOutboundQueueEmptyAndSent(function(){b._removeFirstQueues(),null!=_&&_(),b._uploadNowQueue.length>0?setTimeout(function(){return b._uploadNow(b._uploadNowQueue.shift())},0):(b._isCurrentlyUploadingNow=!1,b.hasEvents()&&d.default.scheduleTimer())})},g.prototype._checkOutboundQueueEmptyAndSent=function(_){var b=this;this._httpManager.isCompletelyIdle()?_():setTimeout(function(){return b._checkOutboundQueueEmptyAndSent(_)},250)},g}();u.default=f},1009:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=c(4094),E=c(676),d=c(5640),p="UserInfo.IdType",T=function(){function l(C,P){this._allowDeviceFields=C,this._properties=P}return l.prototype.setAppId=function(C){this._addContext("AppInfo.Id",C)},l.prototype.setAppVersion=function(C){this._addContext("AppInfo.Version",C)},l.prototype.setAppLanguage=function(C){this._addContext("AppInfo.Language",C)},l.prototype.setDeviceId=function(C){this._allowDeviceFields&&(s.default.checkAndSaveDeviceId(C),this._addContext("DeviceInfo.Id",C))},l.prototype.setDeviceOsName=function(C){this._allowDeviceFields&&this._addContext("DeviceInfo.OsName",C)},l.prototype.setDeviceOsVersion=function(C){this._allowDeviceFields&&this._addContext("DeviceInfo.OsVersion",C)},l.prototype.setDeviceBrowserName=function(C){this._allowDeviceFields&&this._addContext("DeviceInfo.BrowserName",C)},l.prototype.setDeviceBrowserVersion=function(C){this._allowDeviceFields&&this._addContext("DeviceInfo.BrowserVersion",C)},l.prototype.setDeviceMake=function(C){this._allowDeviceFields&&this._addContext("DeviceInfo.Make",C)},l.prototype.setDeviceModel=function(C){this._allowDeviceFields&&this._addContext("DeviceInfo.Model",C)},l.prototype.setUserId=function(C,P,w){if(!isNaN(w)&&null!==w&&w>=0&&w<=12)this._addContext(p,w.toString());else{var f=void 0;switch(P){case E.AWTPiiKind.SipAddress:f=d.AWTUserIdType.SipAddress;break;case E.AWTPiiKind.PhoneNumber:f=d.AWTUserIdType.PhoneNumber;break;case E.AWTPiiKind.SmtpAddress:f=d.AWTUserIdType.EmailAddress;break;default:f=d.AWTUserIdType.Unknown}this._addContext(p,f.toString())}if(isNaN(P)||null===P||P===E.AWTPiiKind.NotSet||P>13)switch(w){case d.AWTUserIdType.Skype:P=E.AWTPiiKind.Identity;break;case d.AWTUserIdType.EmailAddress:P=E.AWTPiiKind.SmtpAddress;break;case d.AWTUserIdType.PhoneNumber:P=E.AWTPiiKind.PhoneNumber;break;case d.AWTUserIdType.SipAddress:P=E.AWTPiiKind.SipAddress;break;default:P=E.AWTPiiKind.NotSet}this._addContextWithPii("UserInfo.Id",C,P)},l.prototype.setUserAdvertisingId=function(C){this._addContext("UserInfo.AdvertisingId",C)},l.prototype.setUserTimeZone=function(C){this._addContext("UserInfo.TimeZone",C)},l.prototype.setUserLanguage=function(C){this._addContext("UserInfo.Language",C)},l.prototype._addContext=function(C,P){"string"==typeof P&&this._properties.setProperty(C,P)},l.prototype._addContextWithPii=function(C,P,w){"string"==typeof P&&this._properties.setPropertyWithPii(C,P,w)},l}();u.default=T},2621:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=c(4023),E=function(){function d(){}return d.setEventsHandler=function(p){s.default.setEventsHandler(p)},d.getEventsHandler=function(){return s.default.getEventsHandler()},d.scheduleTimer=function(){s.default.scheduleTimer()},d}();u.default=E},4023:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=c(1842),E=c(676),d=c(4220),p=c(5816),T=c(58),l=c(7613),C=c(5593),f="awt_stats",g=function(){function _(){}return _.setEventsHandler=function(b){this._eventHandler=b},_.getEventsHandler=function(){return this._eventHandler},_.scheduleTimer=function(){var b=this,m=this._profiles[this._currentProfile][2];this._timeout<0&&m>=0&&!this._paused&&(this._eventHandler.hasEvents()?(0===m&&this._currentBackoffCount>0&&(m=1),this._timeout=setTimeout(function(){return b._batchAndSendEvents()},m*(1<<this._currentBackoffCount)*1e3)):this._timerCount=0)},_.initialize=function(b){var m=this;this._newEventsAllowed=!0,this._config=b,this._eventHandler=new d.default(b.collectorUri,b.cacheMemorySizeLimitInNumberOfEvents,b.httpXHROverride,b.clockSkewRefreshDurationInMins),this._initializeProfiles(),p.default.initialize(function(I,x){if(m._config.canSendStatEvent(f)){var k=new T.default(f);for(var F in k.setEventPriority(E.AWTEventPriority.High),k.setProperty("TenantId",x),I)I.hasOwnProperty(F)&&k.setProperty(F,I[F].toString());l.default.getLogger(C.StatsApiKey).logEvent(k)}})},_.setTransmitProfile=function(b){this._currentProfile!==b&&void 0!==this._profiles[b]&&(this.clearTimeout(),this._currentProfile=b,this.scheduleTimer())},_.loadTransmitProfiles=function(b){for(var m in this._resetTransmitProfiles(),b)if(b.hasOwnProperty(m)){if(3!==b[m].length)continue;for(var I=2;I>=0;--I)if(b[m][I]<0){for(var x=I;x>=0;--x)b[m][x]=-1;break}for(I=2;I>0;--I)b[m][I]>0&&b[m][I-1]>0&&(b[m][I-1]=Math.ceil(b[m][I-1]/b[m][I])*b[m][I]);this._profiles[m]=b[m]}},_.sendEvent=function(b){this._newEventsAllowed&&(this._currentBackoffCount>0&&b.priority===E.AWTEventPriority.Immediate_sync&&(b.priority=E.AWTEventPriority.High),this._eventHandler.addEvent(b),this.scheduleTimer())},_.flush=function(b){var m=(new Date).getTime();!this._paused&&this._lastUploadNowCall+3e4<m&&(this._lastUploadNowCall=m,this._timeout>-1&&(clearTimeout(this._timeout),this._timeout=-1),this._eventHandler.uploadNow(b))},_.pauseTransmission=function(){this._paused||(this.clearTimeout(),this._eventHandler.pauseTransmission(),this._paused=!0)},_.resumeTransmision=function(){this._paused&&(this._paused=!1,this._eventHandler.resumeTransmission(),this.scheduleTimer())},_.flushAndTeardown=function(){p.default.teardown(),this._newEventsAllowed=!1,this.clearTimeout(),this._eventHandler.teardown()},_.backOffTransmission=function(){this._currentBackoffCount<4&&(this._currentBackoffCount++,this.clearTimeout(),this.scheduleTimer())},_.clearBackOff=function(){this._currentBackoffCount>0&&(this._currentBackoffCount=0,this.clearTimeout(),this.scheduleTimer())},_._resetTransmitProfiles=function(){this.clearTimeout(),this._initializeProfiles(),this._currentProfile=s.AWT_REAL_TIME,this.scheduleTimer()},_.clearTimeout=function(){this._timeout>0&&(clearTimeout(this._timeout),this._timeout=-1,this._timerCount=0)},_._batchAndSendEvents=function(){var b=E.AWTEventPriority.High;this._timerCount++,this._timerCount*this._profiles[this._currentProfile][2]===this._profiles[this._currentProfile][0]?(b=E.AWTEventPriority.Low,this._timerCount=0):this._timerCount*this._profiles[this._currentProfile][2]===this._profiles[this._currentProfile][1]&&(b=E.AWTEventPriority.Normal),this._eventHandler.sendEventsForPriorityAndAbove(b),this._timeout=-1,this.scheduleTimer()},_._initializeProfiles=function(){this._profiles={},this._profiles[s.AWT_REAL_TIME]=[4,2,1],this._profiles[s.AWT_NEAR_REAL_TIME]=[12,6,3],this._profiles[s.AWT_BEST_EFFORT]=[36,18,9]},_._newEventsAllowed=!1,_._currentProfile=s.AWT_REAL_TIME,_._timeout=-1,_._currentBackoffCount=0,_._paused=!1,_._timerCount=0,_._lastUploadNowCall=0,_}();u.default=g},5234:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=c(676);u.AWTPropertyType=s.AWTPropertyType,u.AWTPiiKind=s.AWTPiiKind,u.AWTEventPriority=s.AWTEventPriority,u.AWTEventsDroppedReason=s.AWTEventsDroppedReason,u.AWTEventsRejectedReason=s.AWTEventsRejectedReason,u.AWTCustomerContentKind=s.AWTCustomerContentKind;var E=c(5640);u.AWTUserIdType=E.AWTUserIdType,u.AWTSessionState=E.AWTSessionState;var d=c(1842);u.AWT_BEST_EFFORT=d.AWT_BEST_EFFORT,u.AWT_NEAR_REAL_TIME=d.AWT_NEAR_REAL_TIME,u.AWT_REAL_TIME=d.AWT_REAL_TIME;var p=c(58);u.AWTEventProperties=p.default;var T=c(6208);u.AWTLogger=T.default;var l=c(7613);u.AWTLogManager=l.default;var C=c(2621);u.AWTTransmissionManager=C.default;var P=c(6064);u.AWTSerializer=P.default;var w=c(1009);u.AWTSemanticContext=w.default,u.AWT_COLLECTOR_URL_UNITED_STATES="https://us.pipe.aria.microsoft.com/Collector/3.0/",u.AWT_COLLECTOR_URL_GERMANY="https://de.pipe.aria.microsoft.com/Collector/3.0/",u.AWT_COLLECTOR_URL_JAPAN="https://jp.pipe.aria.microsoft.com/Collector/3.0/",u.AWT_COLLECTOR_URL_AUSTRALIA="https://au.pipe.aria.microsoft.com/Collector/3.0/",u.AWT_COLLECTOR_URL_EUROPE="https://eu.pipe.aria.microsoft.com/Collector/3.0/",u.AWT_COLLECTOR_URL_USGOV_DOD="https://pf.pipe.aria.microsoft.com/Collector/3.0",u.AWT_COLLECTOR_URL_USGOV_DOJ="https://tb.pipe.aria.microsoft.com/Collector/3.0"},1842:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.AWT_REAL_TIME="REAL_TIME",u.AWT_NEAR_REAL_TIME="NEAR_REAL_TIME",u.AWT_BEST_EFFORT="BEST_EFFORT"},5640:(K,u)=>{"use strict";var E;Object.defineProperty(u,"__esModule",{value:!0}),(E=u.AWTUserIdType||(u.AWTUserIdType={}))[E.Unknown=0]="Unknown",E[E.MSACID=1]="MSACID",E[E.MSAPUID=2]="MSAPUID",E[E.ANID=3]="ANID",E[E.OrgIdCID=4]="OrgIdCID",E[E.OrgIdPUID=5]="OrgIdPUID",E[E.UserObjectId=6]="UserObjectId",E[E.Skype=7]="Skype",E[E.Yammer=8]="Yammer",E[E.EmailAddress=9]="EmailAddress",E[E.PhoneNumber=10]="PhoneNumber",E[E.SipAddress=11]="SipAddress",E[E.MUID=12]="MUID",function(E){E[E.Started=0]="Started",E[E.Ended=1]="Ended"}(u.AWTSessionState||(u.AWTSessionState={}))},8779:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.Version="1.8.7",u.FullVersionString="AWT-Web-JS-"+u.Version},5436:(K,u,c)=>{"use strict";u.Mg=void 0;c(3762),c(6194);var p=c(7626);u.Mg=p.default,c(448),c(2900),c(3372),c(4352);c(9425)},2235:function(K,u,c){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(g){for(var _,b=1,m=arguments.length;b<m;b++)for(var I in _=arguments[b])Object.prototype.hasOwnProperty.call(_,I)&&(g[I]=_[I]);return g}).apply(this,arguments)};Object.defineProperty(u,"__esModule",{value:!0});var E=c(4151),d=c(676),p=c(5234),T=c(7095),l=c(3037),C=c(4151),P=c(8098),w=(()=>((w||(w={})).ReactNative="ReactNative",w))(),f=function(){function g(){}return g.initialize=function(_){this._debug&&console.log("[AriaTelemetry][logger][initialize][custom]"),g._logger=p.AWTLogManager.initialize(_)},g.setDebug=function(_){g._debug=_},g.disable=function(){this._debug&&console.log("[AriaTelemetry][disable]"),g._disable=!0},g.setCDNPackages=function(_){g._CDNPackagesInfo=s(s({},g._CDNPackagesInfo),_)},g.info=function(_,b){var m;void 0===b&&(b=l.default.EVENTS);var I={name:l.default.EVENTS,properties:s(s(s(s(s({},g.populateBaseProperties()),g.fillWebPlatformData()),g.fillMobilePlatformData()),_),{LogLevel:T.default.INFO}),priority:d.AWTEventPriority.High};b==l.default.IC3CLIENT&&(I={name:l.default.IC3CLIENT,properties:s(s(s({},g.populateIC3ClientBaseProperties()),_),{LogLevel:T.default.INFO}),priority:d.AWTEventPriority.High}),b==l.default.OCSDK&&(I={name:l.default.OCSDK,properties:s(s(s({},g.populateOCSDKBaseProperties()),_),{LogLevel:T.default.INFO}),priority:d.AWTEventPriority.High}),b==l.default.ACSCLIENT&&(I={name:l.default.ACSCLIENT,properties:s(s(s({},g.populateACSClientBaseProperties()),_),{LogLevel:T.default.INFO}),priority:d.AWTEventPriority.High}),b==l.default.ACSADAPTER&&(I={name:l.default.ACSADAPTER,properties:s(s(s({},g.populateACSAdapterBaseProperties()),_),{LogLevel:T.default.INFO}),priority:d.AWTEventPriority.High}),this._debug&&console.log("[AriaTelemetry][info] "+b),this._debug&&console.log(I),this._debug&&console.log(I.properties.Event),!g._disable&&(null===(m=g.logger)||void 0===m||m.logEvent(I))},g.debug=function(_,b){var m;void 0===b&&(b=l.default.EVENTS);var I={name:l.default.EVENTS,properties:s(s(s(s(s({},g.populateBaseProperties()),g.fillWebPlatformData()),g.fillMobilePlatformData()),_),{LogLevel:T.default.DEBUG}),priority:d.AWTEventPriority.High};b==l.default.IC3CLIENT&&(I={name:l.default.IC3CLIENT,properties:s(s(s({},g.populateIC3ClientBaseProperties()),_),{LogLevel:T.default.DEBUG}),priority:d.AWTEventPriority.High}),b==l.default.OCSDK&&(I={name:l.default.OCSDK,properties:s(s(s({},g.populateOCSDKBaseProperties()),_),{LogLevel:T.default.DEBUG}),priority:d.AWTEventPriority.High}),b==l.default.ACSCLIENT&&(I={name:l.default.ACSCLIENT,properties:s(s(s({},g.populateACSClientBaseProperties()),_),{LogLevel:T.default.DEBUG}),priority:d.AWTEventPriority.High}),b==l.default.ACSADAPTER&&(I={name:l.default.ACSADAPTER,properties:s(s(s({},g.populateACSAdapterBaseProperties()),_),{LogLevel:T.default.DEBUG}),priority:d.AWTEventPriority.High}),this._debug&&console.log("[AriaTelemetry][debug] "+b),this._debug&&console.log(I),this._debug&&console.log(I.properties.Event),!g._disable&&(null===(m=g.logger)||void 0===m||m.logEvent(I))},g.warn=function(_,b){var m;void 0===b&&(b=l.default.EVENTS);var I={name:l.default.EVENTS,properties:s(s(s(s(s({},g.populateBaseProperties()),g.fillWebPlatformData()),g.fillMobilePlatformData()),_),{LogLevel:T.default.WARN}),priority:d.AWTEventPriority.High};b==l.default.IC3CLIENT&&(I={name:l.default.IC3CLIENT,properties:s(s(s({},g.populateIC3ClientBaseProperties()),_),{LogLevel:T.default.WARN}),priority:d.AWTEventPriority.High}),b==l.default.OCSDK&&(I={name:l.default.OCSDK,properties:s(s(s({},g.populateOCSDKBaseProperties()),_),{LogLevel:T.default.WARN}),priority:d.AWTEventPriority.High}),b==l.default.ACSCLIENT&&(I={name:l.default.ACSCLIENT,properties:s(s(s({},g.populateACSClientBaseProperties()),_),{LogLevel:T.default.WARN}),priority:d.AWTEventPriority.High}),b==l.default.ACSADAPTER&&(I={name:l.default.ACSADAPTER,properties:s(s(s({},g.populateACSAdapterBaseProperties()),_),{LogLevel:T.default.WARN}),priority:d.AWTEventPriority.High}),this._debug&&console.log("[AriaTelemetry][warn] "+b),this._debug&&console.log(I),this._debug&&console.log(I.properties.Event),!g._disable&&(null===(m=g.logger)||void 0===m||m.logEvent(I))},g.error=function(_,b){var m;void 0===b&&(b=l.default.EVENTS);var I={name:l.default.EVENTS,properties:s(s(s(s(s({},g.populateBaseProperties()),g.fillWebPlatformData()),g.fillMobilePlatformData()),_),{LogLevel:T.default.ERROR}),priority:d.AWTEventPriority.High};b==l.default.IC3CLIENT&&(I={name:l.default.IC3CLIENT,properties:s(s(s({},g.populateIC3ClientBaseProperties()),_),{LogLevel:T.default.ERROR}),priority:d.AWTEventPriority.High}),b==l.default.OCSDK&&(I={name:l.default.OCSDK,properties:s(s(s({},g.populateOCSDKBaseProperties()),_),{LogLevel:T.default.ERROR}),priority:d.AWTEventPriority.High}),b==l.default.ACSCLIENT&&(I={name:l.default.ACSCLIENT,properties:s(s(s({},g.populateACSClientBaseProperties()),_),{LogLevel:T.default.ERROR}),priority:d.AWTEventPriority.High}),b==l.default.ACSADAPTER&&(I={name:l.default.ACSADAPTER,properties:s(s(s({},g.populateACSAdapterBaseProperties()),_),{LogLevel:T.default.ERROR}),priority:d.AWTEventPriority.High}),this._debug&&console.log("[AriaTelemetry][error] "+b),this._debug&&console.log(I),this._debug&&console.log(I.properties.Event),!g._disable&&(null===(m=g.logger)||void 0===m||m.logEvent(I))},g.log=function(_,b){var m;void 0===b&&(b=l.default.EVENTS);var I={name:l.default.EVENTS,properties:s(s(s(s(s({},g.populateBaseProperties()),g.fillWebPlatformData()),g.fillMobilePlatformData()),_),{LogLevel:T.default.LOG}),priority:d.AWTEventPriority.High};b==l.default.IC3CLIENT&&(I={name:l.default.IC3CLIENT,properties:s(s(s({},g.populateIC3ClientBaseProperties()),_),{LogLevel:T.default.LOG}),priority:d.AWTEventPriority.High}),b==l.default.OCSDK&&(I={name:l.default.OCSDK,properties:s(s(s({},g.populateOCSDKBaseProperties()),_),{LogLevel:T.default.LOG}),priority:d.AWTEventPriority.High}),b==l.default.ACSCLIENT&&(I={name:l.default.ACSCLIENT,properties:s(s(s({},g.populateACSClientBaseProperties()),_),{LogLevel:T.default.LOG}),priority:d.AWTEventPriority.High}),b==l.default.ACSADAPTER&&(I={name:l.default.ACSADAPTER,properties:s(s(s({},g.populateACSAdapterBaseProperties()),_),{LogLevel:T.default.LOG}),priority:d.AWTEventPriority.High}),this._debug&&console.log("[AriaTelemetry][log]"),this._debug&&console.log(I),this._debug&&console.log(I.properties.Event),!g._disable&&(null===(m=g.logger)||void 0===m||m.logEvent(I))},Object.defineProperty(g,"logger",{get:function(){return g._logger||(this._debug&&console.log("[AriaTelemetry][logger][initialize]"),g._logger=p.AWTLogManager.initialize(E.ariaTelemetryKey)),g._logger},enumerable:!1,configurable:!0}),g.populateBaseProperties=function(){var _={OCSDK:c(1528).i8,IC3Core:c(5233).i8,ACSChat:c(2861).i8,ACSCommon:c(6638).i8,AMSClient:c(5500).i8};return{OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",CallId:"",Domain:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:"",ChatSDKVersion:c(8464).i8,NPMPackagesInfo:JSON.stringify(_),CDNPackagesInfo:JSON.stringify(g._CDNPackagesInfo),PlatformDetails:""}},g.fillMobilePlatformData=function(){var _={},b={};if(!P.isReactNative())return _;try{var I=c(Object(function(){var k=new Error("Cannot find module 'react-native'");throw k.code="MODULE_NOT_FOUND",k}())).Platform;b.Renderer=w.ReactNative,_.DeviceInfo_OsVersion=I.Version,b.DeviceInfo_OsVersion=I.Version,"android"===I.OS.toLowerCase()?(_.DeviceInfo_OsName="Android",b.DeviceInfo_OsName="Android"):"ios"===I.OS.toLowerCase()?(_.DeviceInfo_OsName="iOS",b.DeviceInfo_OsName="iOS"):(_.DeviceInfo_OsName=""+I.OS,b.DeviceInfo_OsName=""+I.OS),this._debug&&console.log("[AriaTelemetry][fillMobilePlatformData]["+_.DeviceInfo_OsName+"]")}catch(x){this._debug&&console.log("[AriaTelemetry][fillMobilePlatformData][Web]")}return _.PlatformDetails=JSON.stringify(b),_},g.fillWebPlatformData=function(){var _={};if(!P.isBrowser())return _;try{_.Domain=window.location.origin||"",this._debug&&console.log("[AriaTelemetry][fillWebPlatformData]")}catch(b){this._debug&&console.log("[AriaTelemetry][fillWebPlatformData][Error]")}return _},g.populateIC3ClientBaseProperties=function(){return{OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",Event:"",Description:"",SubscriptionId:"",EndpointId:"",EndpointUrl:"",ErrorCode:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:"",IC3ClientVersion:C.ic3ClientVersion}},g.populateOCSDKBaseProperties=function(){return{OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",TransactionId:"",Event:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:"",OCSDKVersion:c(1528).i8}},g.populateACSClientBaseProperties=function(){return{OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",Event:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:"",ACSChatVersion:c(2861).i8}},g.populateACSAdapterBaseProperties=function(){return{OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",Event:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:"",ACSAdapterVersion:C.webChatACSAdapterVersion}},g._debug=!1,g._disable=!1,g}();u.default=f},9066:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.failEvent=u.completeEvent=u.startEvent=void 0,u.startEvent=function(c){return c+"Started"},u.completeEvent=function(c){return c+"Completed"},u.failEvent=function(c){return c+"Failed"}},7095:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=(()=>{return(s=c||(c={})).INFO="INFO",s.DEBUG="DEBUG",s.WARN="WARN",s.ERROR="ERROR",s.LOG="LOG",c;var s})();u.default=c},1247:function(K,u,c){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(l){for(var C,P=1,w=arguments.length;P<w;P++)for(var f in C=arguments[P])Object.prototype.hasOwnProperty.call(C,f)&&(l[f]=C[f]);return l}).apply(this,arguments)};Object.defineProperty(u,"__esModule",{value:!0});var E=c(3037),d=c(8485),p=c(9066),T=function(){function l(C){this.omnichannelConfig=C,this.telemetry=null,this.debug=!1,this.telemetryEvents=new Map,this.scenarioType=E.default.EVENTS}return l.prototype.setDebug=function(C){var P;this.debug=C,null===(P=this.telemetry)||void 0===P||P.setDebug(C)},l.prototype.setScenarioType=function(C){this.scenarioType=C},l.prototype.useTelemetry=function(C){this.debug&&console.log("[ScenarioMarker][useTelemetry]"),this.telemetry=C},l.prototype.startScenario=function(C,P){var w;if(void 0===P&&(P={}),this.debug&&console.log("[ScenarioMarker][startScenario]"),!this.telemetryEvents.has(C)){var f=new d.default;f.start(),this.telemetryEvents.set(C,f)}var g=s({Event:p.startEvent(C),OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId},P);null===(w=this.telemetry)||void 0===w||w.info(g,this.scenarioType)},l.prototype.failScenario=function(C,P){var w;if(void 0===P&&(P={}),this.debug&&console.log("[ScenarioMarker][failScenario]"),this.telemetryEvents.has(C)){var f=this.telemetryEvents.get(C);this.telemetryEvents.delete(C);var g=s({Event:p.failEvent(C),OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,ElapsedTimeInMilliseconds:f.stop()},P);null===(w=this.telemetry)||void 0===w||w.error(g,this.scenarioType)}else console.warn("'"+C+"' event has not started.")},l.prototype.completeScenario=function(C,P){var w;if(void 0===P&&(P={}),this.debug&&console.log("[ScenarioMarker][completeScenario]"),this.telemetryEvents.has(C)){var f=this.telemetryEvents.get(C);this.telemetryEvents.delete(C);var g=s({Event:p.completeEvent(C),OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,ElapsedTimeInMilliseconds:f.stop()},P);null===(w=this.telemetry)||void 0===w||w.info(g,this.scenarioType)}else console.warn("'"+C+"' event has not started.")},l}();u.default=T},3037:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=(()=>{return(s=c||(c={})).EVENTS="occhatsdk_events",s.IC3CLIENT="occhatsdk_ic3clientevents",s.OCSDK="occhatsdk_ocsdkevents",s.ACSCLIENT="occhatsdk_acsclientevents",s.ACSADAPTER="occhatsdk_acsadapterevents",s.UNDEFINED="undefined",c;var s})();u.default=c},8485:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=function(){function s(){}return s.prototype.start=function(){this.timeStart=(new Date).getTime()},s.prototype.stop=function(){return(new Date).getTime()-this.timeStart},s}();u.default=c},9600:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=(()=>{return(s=c||(c={})).ValidateOmnichannelConfig="ValidateOmnichannelConfig",s.ValidateSDKConfig="ValidateSDKConfig",s.InitializeChatSDK="InitializeChatSDK",s.StartChat="StartChat",s.EndChat="EndChat",s.GetLiveChatConfig="GetLiveChatConfig",s.GetAuthToken="GetAuthToken",s.GetPreChatSurvey="GetPreChatSurvey",s.GetChatToken="GetChatToken",s.GetConversationDetails="GetConversationDetails",s.GetCurrentLiveChatContext="GetCurrentLiveChatContext",s.GetMessages="GetMessages",s.SendMessages="SendMessages",s.SendTypingEvent="SendTypingEvent",s.OnAgentEndSession="OnAgentEndSession",s.OnNewMessage="OnNewMessage",s.OnTypingEvent="OnTypingEvent",s.UploadFileAttachment="UploadFileAttachment",s.DownloadFileAttachment="DownloadFileAttachment",s.EmailLiveChatTranscript="EmailLiveChatTranscript",s.GetLiveChatTranscript="GetLiveChatTranscript",s.CreateIC3Adapter="CreateChatAdapter",s.CreateACSAdapter="CreateACSAdapter",s.GetVoiceVideoCalling="GetVoiceVideoCalling",s.GetIC3Client="GetIC3Client",s.InitializeVoiceVideoCallingSDK="InitializeVoiceVideoCallingSDK",s.AcceptVoiceCall="AcceptVoiceCall",s.AcceptVideoCall="AcceptVideoCall",s.RejectCall="RejectCall",s.StopCall="StopCall",s.OnCallDisconnected="OnCallDisconnected",s.UpdateChatToken="UpdateChatToken",s.GetChatReconnectContext="GetChatReconnectContext",s.GetPostChatSurveyContext="GetPostChatSurveyContext",s.RenderPostChatSurvey="RenderPostChatSurvey",s.InitializePostChatRenderer="InitializePostChatRenderer",c;var s})();u.default=c},6345:function(K,u){"use strict";var c=this&&this.__awaiter||function(d,p,T,l){return new(T||(T=Promise))(function(P,w){function f(b){try{_(l.next(b))}catch(m){w(m)}}function g(b){try{_(l.throw(b))}catch(m){w(m)}}function _(b){b.done?P(b.value):function(P){return P instanceof T?P:new T(function(w){w(P)})}(b.value).then(f,g)}_((l=l.apply(d,p||[])).next())})},s=this&&this.__generator||function(d,p){var l,C,P,w,T={label:0,sent:function(){if(1&P[0])throw P[1];return P[1]},trys:[],ops:[]};return w={next:f(0),throw:f(1),return:f(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function f(_){return function(b){return function(_){if(l)throw new TypeError("Generator is already executing.");for(;T;)try{if(l=1,C&&(P=2&_[0]?C.return:_[0]?C.throw||((P=C.return)&&P.call(C),0):C.next)&&!(P=P.call(C,_[1])).done)return P;switch(C=0,P&&(_=[2&_[0],P.value]),_[0]){case 0:case 1:P=_;break;case 4:return T.label++,{value:_[1],done:!1};case 5:T.label++,C=_[1],_=[0];continue;case 7:_=T.ops.pop(),T.trys.pop();continue;default:if(!(P=(P=T.trys).length>0&&P[P.length-1])&&(6===_[0]||2===_[0])){T=0;continue}if(3===_[0]&&(!P||_[1]>P[0]&&_[1]<P[3])){T.label=_[1];break}if(6===_[0]&&T.label<P[1]){T.label=P[1],P=_;break}if(P&&T.label<P[2]){T.label=P[2],T.ops.push(_);break}P[2]&&T.ops.pop(),T.trys.pop();continue}_=p.call(d,T)}catch(b){_=[6,b],C=0}finally{l=P=0}if(5&_[0])throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}([_,b])}}};Object.defineProperty(u,"__esModule",{value:!0}),u.loadScript=void 0;var E=function(d,p,T){return void 0===p&&(p=function(){}),void 0===T&&(T=function(){}),c(void 0,void 0,void 0,function(){return s(this,function(l){return[2,new Promise(function(C,P){return c(void 0,void 0,void 0,function(){var g;return s(this,function(_){switch(_.label){case 0:return Array.from(document.getElementsByTagName("script")).filter(function(b){return b.src==d}).length?[4,p()]:[3,2];case 1:return _.sent(),[2,C()];case 2:return(g=document.createElement("script")).setAttribute("src",d),g.setAttribute("type","text/javascript"),document.head.appendChild(g),g.addEventListener("load",function(){return c(void 0,void 0,void 0,function(){return s(this,function(b){switch(b.label){case 0:return[4,p()];case 1:return b.sent(),C(),[2]}})})}),g.addEventListener("error",function(){return c(void 0,void 0,void 0,function(){return s(this,function(b){switch(b.label){case 0:return[4,T()];case 1:return b.sent(),P(),[2]}})})}),[2]}})})})]})})};u.loadScript=E,u.default={loadScript:E}},9340:function(K,u,c){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(T){for(var l,C=1,P=arguments.length;C<P;C++)for(var w in l=arguments[C])Object.prototype.hasOwnProperty.call(l,w)&&(T[w]=l[w]);return T}).apply(this,arguments)};Object.defineProperty(u,"__esModule",{value:!0});var E=c(8191),d=c(3709);u.default=function(T,l){var C={};if(C.liveChatVersion=l.liveChatVersion||E.default.V1,l.debug&&console.log(T),l.liveChatVersion===E.default.V2){var f=T.content,g=T.metadata,_=T.sender,b=T.senderDisplayName,m=T.createdOn;if(C.id=T.id,C.messageid=void 0,C.clientmessageid=void 0,C.deliveryMode=void 0,C.properties={},C.content=f||"",C.properties.tags=g&&g.tags?g.tags:[],C.tags=g&&g.tags?g.tags.replace(/\"/g,"").split(",").filter(function(U){return U.length>0}):[],C.timestamp=m,C.messageType=d.MessageType.UserMessage,C.sender={id:_.communicationUserId,displayName:b,type:d.PersonType.Bot},g&&g.amsMetadata&&g.amsReferences)try{var I=JSON.parse(g.amsReferences),k=JSON.parse(g.amsMetadata)[0].fileName;C.fileMetadata={},C.fileMetadata.fileSharingProtocolType=0,C.fileMetadata.id=I[0],C.fileMetadata.name=k,C.fileMetadata.size=0,C.fileMetadata.type=k.split(".").pop(),C.fileMetadata.url=""}catch(U){}}else C.id=T.clientmessageid,C=s({},T);return C}},838:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=c(2235);u.default=function(d){return void 0===d&&(d=!1),s.default.setDebug(d),s.default}},6406:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.getMsfpEmbedScript=u.getACSAdapterCDNUrl=u.getIC3AdapterCDNUrl=u.getIC3ClientCDNUrl=void 0;var s=c(4151),E=function(l){return void 0===l&&(l=s.ic3ClientVersion),"https://comms.omnichannelengagementhub.com/release/"+l+"/Scripts/SDK/SDK.min.js"};u.getIC3ClientCDNUrl=E;var d=function(l){return void 0===l&&(l=s.webChatIC3AdapterVersion),"https://webchatic3.blob.core.windows.net/webchat-ic3adapter/"+l+"/botframework-webchat-adapter-ic3.production.min.js"};u.getIC3AdapterCDNUrl=d;var p=function(l){return void 0===l&&(l=s.webChatACSAdapterVersion),"https://unpkg.com/acs_webchat-chat-adapter@"+l+"/dist/chat-adapter.js"};u.getACSAdapterCDNUrl=p;var T=function(){return'<script src="https://oc-cdn-ocprod.azureedge.net/livechatwidget/WebChatControl/lib/Embed.min.js" type="text/javascript"><\/script><link rel="stylesheet" type="text/css" href="https://mfpembedcdnwus2.azureedge.net/mfpembedcontwus2/Embed.css" /><script type = "text/javascript" >function renderSurvey(parentElementId,surveyurl,FirstName, LastName, locale){var se = new SurveyEmbed(surveyurl,"https://mfpembedcdnmsit.azureedge.net/mfpembedcontmsit/","true");var context = {"First Name": FirstName,"Last Name": LastName,"locale": locale,"showmultilingual":"false"};se.renderInline(parentElementId, context);}<\/script>'};u.getMsfpEmbedScript=T,u.default={getIC3ClientCDNUrl:E,getIC3AdapterCDNUrl:d,getACSAdapterCDNUrl:p,getMsfpEmbedScript:T}},8290:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.getLocaleIdFromString=u.getLocaleStringFromId=void 0;var c={1025:"ar-sa",1026:"bg-bg",1027:"ca-es",1029:"cs-cz",1030:"da-dk",1031:"de-de",1032:"el-gr",1033:"en-us",3082:"es-es",1061:"et-ee",1069:"eu-es",1035:"fi-fi",1036:"fr-fr",1110:"gl-es",1037:"he-il",1081:"hi-in",1050:"hr-hr",1038:"hu-hu",1057:"id-id",1040:"it-it",1041:"ja-jp",1087:"kk-kz",1042:"ko-kr",1063:"lt-lt",1062:"lv-lv",1086:"ms-my",1044:"nb-no",1043:"nl-nl",1045:"pl-pl",1046:"pt-br",2070:"pt-pt",1048:"ro-ro",1049:"ru-ru",1051:"sk-sk",1060:"sl-si",3098:"sr-cyrl-cs",2074:"sr-latn-cs",1053:"sv-se",1054:"th-th",1055:"tr-tr",1058:"uk-ua",1066:"vi-vn",2052:"zh-cn",3076:"zh-hk",1028:"zh-tw"};u.getLocaleStringFromId=function(s){var E=Object.keys(c).find(function(d){return d===s});return E?c[E]:""},u.getLocaleIdFromString=function(s){var E=Object.keys(c).find(function(d){return c[d]===s});return null!=E?E:""}},2811:function(K,u,c){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(w){for(var f,g=1,_=arguments.length;g<_;g++)for(var b in f=arguments[g])Object.prototype.hasOwnProperty.call(f,b)&&(w[b]=f[b]);return w}).apply(this,arguments)};Object.defineProperty(u,"__esModule",{value:!0}),u.createACSAdapterLogger=u.createACSClientLogger=u.createOCSDKLogger=u.createIC3ClientLogger=u.ACSAdapterLogger=u.ACSClientLogger=u.OCSDKLogger=u.IC3ClientLogger=void 0;var E=c(7095),d=c(3037),p=c(1247),T=function(){function w(f){this.omnichannelConfig=f,this.debug=!1,this.requestId="",this.chatId="",this.telemetry=null,this.debug=!1}return w.prototype.setDebug=function(f){this.debug=f},w.prototype.setRequestId=function(f){this.requestId=f},w.prototype.setChatId=function(f){this.chatId=f},w.prototype.useTelemetry=function(f){this.debug&&console.log("[IC3ClientLogger][useTelemetry]"),this.telemetry=f},w.prototype.logClientSdkTelemetryEvent=function(f,g){var _,b,m,I;this.debug&&console.log("[IC3ClientLogger][logClientSdkTelemetryEvent]["+f+"]"),this.debug&&console.log(g);var x={OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,RequestId:this.requestId,ChatId:this.chatId},k=s(s({},g),{ExceptionDetails:g.ExceptionDetails?JSON.stringify(g.ExceptionDetails):""});switch(f){case E.default.DEBUG:null===(_=this.telemetry)||void 0===_||_.debug(s(s({},x),k),d.default.IC3CLIENT);break;case E.default.WARN:null===(b=this.telemetry)||void 0===b||b.warn(s(s({},x),k),d.default.IC3CLIENT);break;case E.default.ERROR:null===(m=this.telemetry)||void 0===m||m.error(s(s({},x),k),d.default.IC3CLIENT);break;case E.default.INFO:default:null===(I=this.telemetry)||void 0===I||I.info(s(s({},x),k),d.default.IC3CLIENT)}},w}();u.IC3ClientLogger=T;var l=function(){function w(f){this.omnichannelConfig=f,this.debug=!1,this.requestId="",this.chatId="",this.telemetry=null,this.debug=!1}return w.prototype.setDebug=function(f){this.debug=f},w.prototype.setRequestId=function(f){this.requestId=f},w.prototype.setChatId=function(f){this.chatId=f},w.prototype.useTelemetry=function(f){this.debug&&console.log("[OCSDKLogger][useTelemetry]"),this.telemetry=f},w.prototype.logClientSdkTelemetryEvent=function(f,g){var _,b,m,I;this.debug&&console.log("[OCSDKLogger][logClientSdkTelemetryEvent]["+f+"]"),this.debug&&console.log(g);var x={OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,RequestId:this.requestId,ChatId:this.chatId},k=s(s({},g),{ExceptionDetails:g.ExceptionDetails?JSON.stringify(g.ExceptionDetails):""});switch(f){case E.default.DEBUG:null===(_=this.telemetry)||void 0===_||_.debug(s(s({},x),k),d.default.OCSDK);break;case E.default.WARN:null===(b=this.telemetry)||void 0===b||b.warn(s(s({},x),k),d.default.OCSDK);break;case E.default.ERROR:null===(m=this.telemetry)||void 0===m||m.error(s(s({},x),k),d.default.OCSDK);break;case E.default.INFO:default:null===(I=this.telemetry)||void 0===I||I.info(s(s({},x),k),d.default.OCSDK)}},w}();u.OCSDKLogger=l;var C=function(){function w(f){this.omnichannelConfig=f,this.debug=!1,this.requestId="",this.chatId="",this.telemetry=null,this.scenarioMarker=null,this.debug=!1,this.scenarioMarker=new p.default(f),this.scenarioMarker.setScenarioType(d.default.ACSCLIENT)}return w.prototype.setDebug=function(f){var g;this.debug=f,null===(g=this.scenarioMarker)||void 0===g||g.setDebug(f)},w.prototype.setRequestId=function(f){this.requestId=f},w.prototype.setChatId=function(f){this.chatId=f},w.prototype.useTelemetry=function(f){var g;this.debug&&console.log("[ACSClientLogger][useTelemetry]"),this.telemetry=f,null===(g=this.scenarioMarker)||void 0===g||g.useTelemetry(this.telemetry)},w.prototype.logClientSdkTelemetryEvent=function(f,g){var _,b,m,I;this.debug&&console.log("[ACSClientLogger][logClientSdkTelemetryEvent]["+f+"]"),this.debug&&console.log(g);var x={OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,RequestId:this.requestId,ChatId:this.chatId},k=s(s({},g),{ExceptionDetails:g.ExceptionDetails?JSON.stringify(g.ExceptionDetails):""});switch(f){case E.default.DEBUG:null===(_=this.telemetry)||void 0===_||_.debug(s(s({},x),k),d.default.ACSCLIENT);break;case E.default.WARN:null===(b=this.telemetry)||void 0===b||b.warn(s(s({},x),k),d.default.ACSCLIENT);break;case E.default.ERROR:null===(m=this.telemetry)||void 0===m||m.error(s(s({},x),k),d.default.ACSCLIENT);break;case E.default.INFO:default:null===(I=this.telemetry)||void 0===I||I.info(s(s({},x),k),d.default.ACSCLIENT)}},w.prototype.startScenario=function(f,g){var _;void 0===g&&(g={}),null===(_=this.scenarioMarker)||void 0===_||_.startScenario(f,s(s({},{RequestId:this.requestId,ChatId:this.chatId}),g))},w.prototype.failScenario=function(f,g){var _;void 0===g&&(g={}),null===(_=this.scenarioMarker)||void 0===_||_.failScenario(f,s(s({},{RequestId:this.requestId,ChatId:this.chatId}),g))},w.prototype.completeScenario=function(f,g){var _;void 0===g&&(g={}),null===(_=this.scenarioMarker)||void 0===_||_.completeScenario(f,s(s({},{RequestId:this.requestId,ChatId:this.chatId}),g))},w}();u.ACSClientLogger=C;var P=function(){function w(f){this.omnichannelConfig=f,this.debug=!1,this.requestId="",this.chatId="",this.telemetry=null,this.scenarioMarker=null,this.debug=!1,this.scenarioMarker=new p.default(f),this.scenarioMarker.setScenarioType(d.default.ACSADAPTER)}return w.prototype.setDebug=function(f){var g;this.debug=f,null===(g=this.scenarioMarker)||void 0===g||g.setDebug(f)},w.prototype.setRequestId=function(f){this.requestId=f},w.prototype.setChatId=function(f){this.chatId=f},w.prototype.useTelemetry=function(f){var g;this.debug&&console.log("[ACSAdapterLogger][useTelemetry]"),this.telemetry=f,null===(g=this.scenarioMarker)||void 0===g||g.useTelemetry(this.telemetry)},w.prototype.logClientSdkTelemetryEvent=function(f,g){var _,b,m,I;this.debug&&console.log("[ACSAdapterLogger][logClientSdkTelemetryEvent]["+f+"]"),this.debug&&console.log(g);var x={OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,RequestId:this.requestId,ChatId:this.chatId},k=s(s({},g),{ExceptionDetails:g.ExceptionDetails?JSON.stringify(g.ExceptionDetails):""});switch(f){case E.default.DEBUG:null===(_=this.telemetry)||void 0===_||_.debug(s(s({},x),k),d.default.ACSADAPTER);break;case E.default.WARN:null===(b=this.telemetry)||void 0===b||b.warn(s(s({},x),k),d.default.ACSADAPTER);break;case E.default.ERROR:null===(m=this.telemetry)||void 0===m||m.error(s(s({},x),k),d.default.ACSADAPTER);break;case E.default.INFO:default:null===(I=this.telemetry)||void 0===I||I.info(s(s({},x),k),d.default.ACSADAPTER)}},w.prototype.startScenario=function(f,g){var _;void 0===g&&(g={}),null===(_=this.scenarioMarker)||void 0===_||_.startScenario(f,s(s({},{RequestId:this.requestId,ChatId:this.chatId}),g))},w.prototype.failScenario=function(f,g){var _;void 0===g&&(g={}),null===(_=this.scenarioMarker)||void 0===_||_.failScenario(f,s(s({},{RequestId:this.requestId,ChatId:this.chatId}),g))},w.prototype.completeScenario=function(f,g){var _;void 0===g&&(g={}),null===(_=this.scenarioMarker)||void 0===_||_.completeScenario(f,s(s({},{RequestId:this.requestId,ChatId:this.chatId}),g))},w}();u.ACSAdapterLogger=P,u.createIC3ClientLogger=function(w,f){void 0===f&&(f=!1);var g=new T(w);return g.setDebug(f),g},u.createOCSDKLogger=function(w,f){void 0===f&&(f=!1);var g=new l(w);return g.setDebug(f),g},u.createACSClientLogger=function(w,f){void 0===f&&(f=!1);var g=new C(w);return g.setDebug(f),g},u.createACSAdapterLogger=function(w,f){void 0===f&&(f=!1);var g=new P(w);return g.setDebug(f),g}},8098:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.isReactNative=u.isNode=u.isBrowser=void 0,u.isBrowser=function(){return"undefined"!=typeof window&&void 0!==window.document},u.isNode=function(){return"undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node},u.isReactNative=function(){return"undefined"!=typeof navigator&&"ReactNative"==navigator.product},u.default={isBrowser:u.isBrowser,isNode:u.isNode,isReactNative:u.isReactNative}},9425:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.isCustomerMessage=u.isSystemMessage=void 0;var s=c(3372),E=c(8953);u.isSystemMessage=function(d){var T=d.properties,l=d.messageType===s.default.UserMessage&&T&&T.tags&&T.tags.includes("system"),C=d.tags&&d.tags.includes("system");return l||C||!1},u.isCustomerMessage=function(d){var p=d.sender;return p&&p.id&&p.id.includes("contacts/8:")||p&&p.displayName&&p.displayName===E.default.Customer||!1}},7616:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=["orgUrl","orgId","widgetId"];u.default=function(E){if(!E)throw new Error("OmnichannelConfiguration not found");for(var d=Object.keys(E),p=0,T=c;p<T.length;p++){var l=T[p];if(!d.includes(l))throw new Error("Missing '"+l+"' in OmnichannelConfiguration")}}},641:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.defaultChatSDKConfig=void 0;var E={dataMasking:{disable:!1,maskingCharacter:"#"},telemetry:{disable:!1,ariaTelemetryKey:c(4151).ariaTelemetryKey},persistentChat:{disable:!0,tokenUpdateTime:216e5},chatReconnect:{disable:!0}};u.defaultChatSDKConfig=E,u.default=function(l){l.dataMasking&&function(l){"boolean"!=typeof l.disable&&(l.disable=E.dataMasking.disable),("string"!=typeof l.maskingCharacter||1!==l.maskingCharacter.length)&&(l.maskingCharacter=E.dataMasking.maskingCharacter)}(l.dataMasking),l.persistentChat&&function(l){("number"!=typeof l.tokenUpdateTime||!l.tokenUpdateTime)&&(l.tokenUpdateTime=E.persistentChat.tokenUpdateTime)}(l.persistentChat)}},5145:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=function(){function s(){}return s.read="read",s}();u.default=c},3865:function(K,u,c){"use strict";var s=this&&this.__awaiter||function(b,m,I,x){return new(I||(I=Promise))(function(F,U){function N(j){try{M(x.next(j))}catch(W){U(W)}}function R(j){try{M(x.throw(j))}catch(W){U(W)}}function M(j){j.done?F(j.value):function(F){return F instanceof I?F:new I(function(U){U(F)})}(j.value).then(N,R)}M((x=x.apply(b,m||[])).next())})},E=this&&this.__generator||function(b,m){var x,k,F,U,I={label:0,sent:function(){if(1&F[0])throw F[1];return F[1]},trys:[],ops:[]};return U={next:N(0),throw:N(1),return:N(2)},"function"==typeof Symbol&&(U[Symbol.iterator]=function(){return this}),U;function N(M){return function(j){return function(M){if(x)throw new TypeError("Generator is already executing.");for(;I;)try{if(x=1,k&&(F=2&M[0]?k.return:M[0]?k.throw||((F=k.return)&&F.call(k),0):k.next)&&!(F=F.call(k,M[1])).done)return F;switch(k=0,F&&(M=[2&M[0],F.value]),M[0]){case 0:case 1:F=M;break;case 4:return I.label++,{value:M[1],done:!1};case 5:I.label++,k=M[1],M=[0];continue;case 7:M=I.ops.pop(),I.trys.pop();continue;default:if(!(F=(F=I.trys).length>0&&F[F.length-1])&&(6===M[0]||2===M[0])){I=0;continue}if(3===M[0]&&(!F||M[1]>F[0]&&M[1]<F[3])){I.label=M[1];break}if(6===M[0]&&I.label<F[1]){I.label=F[1],F=M;break}if(F&&I.label<F[2]){I.label=F[2],I.ops.push(M);break}F[2]&&I.ops.pop(),I.trys.pop();continue}M=m.call(b,I)}catch(j){M=[6,j],k=0}finally{x=F=0}if(5&M[0])throw M[1];return{value:M[0]?M[1]:void 0,done:!0}}([M,j])}}};Object.defineProperty(u,"__esModule",{value:!0});var d=c(501),p=c(6849),T=c(5874),l=c(2915),C=c(1927),P=c(6648),w=c(5145),f=c(6355),g=c(8636),_=function(){function b(){}return b.getDocumentTypeFromContentType=function(m){return g.default.isDocumentTypeImage(m)?d.default.DocumentTypeImage:d.default.DocumentTypeFile},b.createNewDocument=function(m,I,x){return s(this,void 0,void 0,function(){var F,U,N,R,M;return E(this,function(j){return(M={})[m]=[w.default[w.default.read]],F={filename:I.name,permissions:M,type:b.getDocumentTypeFromContentType(I.type)},U=C.default.getAmsObjectsUrl(x.RegionGtms),(N=P.default.getDefaultAMSHeaders(x.SkypeToken))[p.default.ContentTypeHeader]=d.default.ContentTypeJson,R={data:JSON.stringify(F),headers:N,type:T.default.POST,url:U},[2,l.HttpClient.MakeRequest(R)]})})},b.uploadDocument=function(m,I,x){return s(this,void 0,void 0,function(){var k,F,U;return E(this,function(R){return console.log("AmsHelper.ts uploadDocument(): "+m+", "+I+", "+x),k=g.default.isDocumentTypeImage(I.type),F=C.default.getAmsObjectContentUrl(m,x.RegionGtms,k),U=P.default.getDefaultAMSHeaders(x.SkypeToken),[2,l.HttpClient.MakeRequest({data:I.data,headers:U,processData:!1,type:T.default.PUT,url:F})]})})},b.getFileStatus=function(m,I){var x=g.default.isImageType(m.type),k=C.default.getAmsStatusUrl(m.id,I.RegionGtms,x);return this.getViewStatus(k,I).then(function(F){return F.scan&&F.scan.status===d.default.Malware?f.default.Error:F.view_state===d.default.Ready?f.default.Success:F.scan&&F.scan.status===d.default.InProgress||F.view_state&&F.view_state!==d.default.Failed?f.default.InProgress:f.default.Error}).catch(function(){return Promise.reject({})})},b.downloadDocument=function(m,I){var x=this,k=g.default.isImageType(m.type),F=C.default.getAmsStatusUrl(m.id,I.RegionGtms,k);return new Promise(function(U){x.getViewUri(F,I).then(function(N){var R=new Headers;return R.append("Authorization","skype_token "+I.SkypeToken),R.append("X-MS-Client-Version",d.default.ClientVersion),k&&(R.append("accept",d.default.AMSAcceptHeaderValue),R.append("Accept-Encoding",d.default.AMSAcceptEncodingHeaderValue)),fetch(N,{headers:R,method:T.default.GET}).then(function(j){U(j.blob())}).catch(function(){return Promise.reject({})})})})},b.getViewUri=function(m,I){var x=this;return this.getViewStatus(m,I).then(function(k){return!k.view_location||k.view_state===d.default.Failed||k.scan&&k.scan.status===d.default.Malware?Promise.reject({}):k.view_state&&k.view_state!==d.default.Ready?x.getViewUri(m,I):k.content_state===d.default.Expired?Promise.reject({}):Promise.resolve(k.view_location)}).catch(function(){return Promise.reject("")})},b.getViewStatus=function(m,I){var x=this;return console.log("AmsHelper.ts getViewStatus(): "+m+", "+I),new Promise(function(k){setTimeout(k,d.default.DelayForAms)}).then(function(){var k=P.default.getDefaultAMSViewHeaders(I.SkypeToken);return l.HttpClient.MakeRequest({headers:k,type:T.default.GET,url:m}).then(function(U){return U.status_location&&!U.view_state?x.getViewStatus(U.status_location,I):Promise.resolve(U)}).catch(function(U){return Promise.reject(401===U.status||403===U.status?"unauthorized":{})})})},b}();u.default=_},501:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=function(){function s(){}return s.NewMessageEvent="NewMessage",s.MessageUpdateEvent="MessageUpdate",s.ThreadUpdateEvent="ThreadUpdate",s.ConversationUpdateEvent="ConversationUpdate",s.HttpLongPoll="HttpLongPoll",s.ContentTypeJson="application/json",s.ContentTypeTextPlain="text/plain;charset=UTF-8",s.ContentTypeForm="application/x-www-form-urlencoded",s.RedirectAs404="redirectAs404",s.NoCache="no-cache",s.User="user",s.Web="web",s.ClientInfoValue="os=Windows; osVer=10; proc=Win32; lcid=en-us; deviceType=1; country=IN; clientName=swc; clientVer=912/0.106.0.34//swc",s.TextPlainMimeType="text/plain",s.SwcName="SWC",s.Image="image",s.ClientVersion="937/0.123.0.9",s.DelayForAms=50,s.Reset_Flag="reset_ic3_needed",s.Malware="malware",s.Ready="ready",s.InProgress="in progress",s.Failed="failed",s.Expired="expired",s.ImageView="imgpsh_fullsize_anim",s.FileView="original",s.DocumentTypeImage="pish/image",s.DocumentTypeFile="sharing/file",s.ImageContent="imgpsh",s.FileContent="original",s.AMSAcceptHeaderValue="image/webp,image/ *,*/*;q=0.8",s.AMSAcceptEncodingHeaderValue="gzip, deflate, sdch, br",s.AMSAuthorizationSkypeTokenValue="skype_token ",s.stabilizePollMaxRetryCount=50,s.timeBetweenStabilizingPoll=1e3,s.retryCount=2,s.retry404Count=3,s.retryOtherCount=3,s.liveStateRetryCount=3,s.timeBetweenOperationRetry=1e3,s.heartBeatDuration=3e4,s.endpointRequestLog="Endpoint request",s.subscriptionRequestLog="Subscription request",s.setPropertiesRequestLog="Set message properties request",s.unsubscribeRequestLog="Unsubscribe from endpoint request",s.pollRequestLog="Polling",s.oldInitializer="Old initializer",s.newInitializer="New Initializer",s.skypeTokenAuthURL="/v1/skypetokenauth",s.skypeTokenConstantForData="skypetoken=",s}();u.default=c},1927:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=c(501),E=c(6849),d=c(909),p=function(){function T(){}return T.getV2EndpointUrl=function(l,C){return C.chatService+"/v2/users/ME/endpoints/"+l},T.getThreadUrl=function(l,C){return C.chatService+"/v1/threads/"+l+"?view=msnp24Equivalent"},T.getMessagesUrl=function(l,C){return C.chatService+"/v1/users/ME/conversations/"+l+"/messages"},T.getBotMessagesUrl=function(l,C){return C.chatService+"/v1/agents/"+l+"/invoke"},T.getAmsObjectsUrl=function(l){return d.default.sanitizeUrlWithBackSlash(l.ams)+"v1/objects"},T.getAmsObjectContentUrl=function(l,C,P){void 0===P&&(P=!1);var w=P?s.default.ImageContent:s.default.FileContent;return d.default.sanitizeUrlWithBackSlash(C.ams)+"v1/objects/"+l+"/content/"+w},T.getAmsObjectViewUrl=function(l,C,P){void 0===P&&(P=!1);var w=P?s.default.ImageView:s.default.FileView;return d.default.sanitizeUrlWithBackSlash(C.ams)+"v1/objects/"+l+"/views/"+w},T.getAmsStatusUrl=function(l,C,P){void 0===P&&(P=!1);var w=P?s.default.ImageView:s.default.FileView;return d.default.sanitizeUrlWithBackSlash(C.ams)+"v1/objects/"+l+"/views/"+w+"/status"},T.getV1EndpointUrl=function(l){return l.chatService+"/v1/users/ME/endpoints"},T.getV1DeleteEndpointUrl=function(l,C){return l.chatService+"/v1/users/ME/endpoints/"+C},T.getV1SubscriptionUrl=function(l){return l.chatService+"/v1/users/ME/endpoints/SELF/subscriptions"},T.getV1PollUrl=function(l,C){return l.chatService+"/v1/users/ME/endpoints/SELF/subscriptions/"+C+"/poll"},T.getV1SetPropertiesUrl=function(l){return l.chatService+"/v1/users/ME/endpoints/SELF/properties?name="+E.default.SetEndpointProperty},T}();u.default=p},8636:function(K,u,c){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(m){for(var I,x=1,k=arguments.length;x<k;x++)for(var F in I=arguments[x])Object.prototype.hasOwnProperty.call(I,F)&&(m[F]=I[F]);return m}).apply(this,arguments)};Object.defineProperty(u,"__esModule",{value:!0});var E=c(501),d=c(2900),p=c(4694),T=c(9306),l=c(448),C=c(3207),P=c(3372),w=c(4352),f=c(1927),g=c(7708),_=c(909),b=function(){function m(){}return m.createMessageData=function(I){var k=I.content,F=m.createBaseMessageData(I.contentType===l.default.Text?C.default.Text:C.default.RichTextHtml,I.contentType.toString(),k);return F.properties=this.getMessageProperties(I),_.default.isNullOrUndefined(I.sender.displayName)||(F.imdisplayname=I.sender.displayName),F},m.createBaseMessageData=function(I,x,k){return{"Has-Mentions":"false",clientmessageid:Date.now().toString(),composetime:(new Date).toISOString(),content:k,contenttype:x,messagetype:I}},m.getMessageProperties=function(I){var x={};if(x.deliveryMode=I.deliveryMode.toString(),I.tags){var k=[];I.tags.forEach(function(F){k.push(F)}),x.tags=k.join()}return x},m.createTypingStatusThreadMessageData=function(I,x){var k="";switch(I){case g.default.Typing:k=C.default.ControlTyping;break;case g.default.ClearTyping:k=C.default.ControlClearTyping}var F=m.createBaseMessageData(k,l.default.Text,"");return _.default.isNullOrUndefined(x)||(F=s(s({},x),F)),F},m.createBotMessageData=function(I,x){return JSON.stringify({conversation:{id:I},value:x})},m.createFileMessage=function(I,x,k){var F=C.default.Text,U=l.default.Text.toString().toLowerCase(),N=m.createBaseMessageData(F,U.toString(),"");return N.amsreferences=JSON.stringify([I.id]),N.properties=JSON.stringify(this.createFileMessageProperties(I,x,k)),_.default.isNullOrUndefined(k.sender.displayName)||(N.imdisplayname=k.sender.displayName),N},m.createFileMessageProperties=function(I,x,k){var F={};if(F.deliveryMode=k.deliveryMode.toString(),F.files=JSON.stringify([this.createFileProperty(I,x)]),F.importance="",F.subject="",k.tags){var U=[];k.tags.forEach(function(N){U.push(N)}),F.tags=U.join()}return F},m.createFileProperty=function(I,x){var k=!!m.isDocumentTypeImage(I.type);return{"@type":"http://schema.skype.com/File",type:I.type,itemid:"",baseUrl:"",providerData:"",version:2,id:I.id,title:I.name,state:"active",objectUrl:f.default.getAmsObjectViewUrl(I.id,x.RegionGtms,k),fileName:I.name,fileType:m.getNameAndExtension(I.name).extension,botFileProperties:{url:f.default.getAmsObjectViewUrl(I.id,x.RegionGtms,k)},fileInfo:{fileUrl:f.default.getAmsObjectContentUrl(I.id,x.RegionGtms,k),siteUrl:"",serverRelativeUrl:""},filePreview:{previewUrl:""}}},m.getNameAndExtension=function(I){var x=(I||"").split("."),k="",F="";return x.length>1?(F=x.pop().toLowerCase(),k=x.join(".")):(F="",k=x[0]),{name:k,extension:F}},m.createIRawMessage=function(I,x,k){var U,N,F={clientmessageid:I.clientmessageid,content:I.content,contentType:m.getMessageContentType(I),deliveryMode:_.default.isNullOrUndefined(I.properties)||I.properties.deliveryMode!==d.default.Bridged?d.default.Unbridged:d.default.Bridged,messageType:m.getMessageType(I),properties:I.properties,sender:{displayName:I.imdisplayname,id:I.from,type:m.getPersonType(I.from)},timestamp:new Date(Date.parse(I.originalarrivaltime))};(k&&(F.resourceType=k),_.default.isNullOrUndefined(I.properties)||_.default.isNullOrEmptyString(I.properties.tags))||(U=I.properties.tags.split(","),F.tags=U);if(!_.default.isNullOrUndefined(I.properties)&&!_.default.isNullOrEmptyString(I.properties.files)&&(N=JSON.parse(I.properties.files)).length>0){var R=N[0].id;_.default.isNullOrUndefined(R)&&I.amsreferences&&(R=I.amsreferences[0]);var M=m.getFileUrl(N[0],R,x);F.fileMetadata={fileSharingProtocolType:p.default.AmsBasedFileSharing,id:R,name:N[0].fileName,size:N[0].version,type:N[0].fileType,url:M}}return F},m.createIRawThread=function(I){return{id:I.id,members:I.members,messages:I.messages,properties:I.properties,rosterVersion:I.rosterVersion,type:I.type,version:I.version}},m.getConversationIdFromUrl=function(I){var x=I&&I.match(/\/(\d+:[^\/]*)[\/]?/);return x&&x[1]?x[1]:void 0},m.isSystemMessage=function(I){var x=!1;return _.default.isNullOrEmptyString(I.messagetype)||(x=m.getSystemMessageTypes().reduce(function(k,F){return k||0===I.messagetype.toLowerCase().indexOf(F.toLowerCase())},x)),x},m.getPersonType=function(I){var x=w.default.Unknown,k=I.split("/").pop();return 0===k.indexOf("28:")?x=w.default.Bot:0===k.indexOf("19:")&&(x=w.default.User),x},m.isImageType=function(I){switch(I.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"bmp":case"tiff":case"jfif":return!0;default:return!1}},m.getMessageType=function(I){var x;switch(I.messagetype){case P.default.Typing:x=P.default.Typing;break;case P.default.ClearTyping:x=P.default.ClearTyping;break;default:x=P.default.UserMessage}return x},m.getMessageContentType=function(I){var k=I.contenttype?I.contenttype:I.messagetype;return k===C.default.Text.toLowerCase()||k.indexOf(E.default.TextPlainMimeType)>=0?l.default.Text:l.default.RichText},m.getSystemMessageTypes=function(){return["ThreadActivity"]},m.getFileUrl=function(I,x,k){var U,F=I.fileInfo;if(F&&F.fileUrl)U=F.fileUrl;else if(x){var N=m.isImageType(I.fileType);U=f.default.getAmsObjectContentUrl(x,k.RegionGtms,N)}return U},m.isDocumentTypeImage=function(I){return-1!==I.indexOf(E.default.Image)},m.getDomainRegexp=function(){return new RegExp(/^(https?:.+?\.microsoft\.com)/i)},m.parseDomain=function(I){var x=I.match(m.getDomainRegexp());return x?x[1]:null},m.parseChatServiceHostUrl=function(I){return m.parseDomain(I)},m.shouldRetryOnFailure=function(I){return I!==T.default.Accepted&&I!==T.default.Created},m}();u.default=b},909:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=c(6849),E=function(){function d(){}return d.isNullOrEmptyString=function(p){return d.isNullOrUndefined(p)||""===p},d.isNullOrUndefinedOrEmptyArray=function(p){return d.isNullOrUndefined(p)||0===p.length},d.isNullOrUndefined=function(p){return null==p},d.isPrimitiveString=function(p){return"string"==typeof p},d.convertStringToBoolean=function(p){return!d.isNullOrUndefined(p)&&"true"===p.toLowerCase()},d.sanitizeUrlWithBackSlash=function(p){return p.endsWith("/")?p:p+"/"},d.getRegistrationTokenValue=function(p){var T=p.match(/registrationToken=(.+); expires=(\d+)/);return T&&T.length>=2?s.default.RegistrationTokenHeaderValue+T[1]:""},d.addQueryParametersToPath=function(p,T){var l=p;if(!d.isNullOrUndefined(T))for(var C in l.indexOf("?")>=0||(l+="?"),T)if(T.hasOwnProperty(C)){var P=C+"="+T[C];"?"!==l[l.length-1]&&(P="&"+P),l+=P}return l},d.getResponseHeader=function(p,T){var l;return d.isNullOrUndefined(p)||(l=p.headers[T]),l},d.timer=function(){var p=(new Date).getTime();return{get milliSecondsElapsed(){return(new Date).getTime()-p}}},d.concatArrays=function(p,T){!d.isNullOrUndefined(p)&&!d.isNullOrUndefined(T)&&T.forEach(function(l){p.push(l)})},d}();u.default=E},1288:function(K,u,c){"use strict";var s=this&&this.__awaiter||function(l,C,P,w){return new(P||(P=Promise))(function(g,_){function b(x){try{I(w.next(x))}catch(k){_(k)}}function m(x){try{I(w.throw(x))}catch(k){_(k)}}function I(x){x.done?g(x.value):function(g){return g instanceof P?g:new P(function(_){_(g)})}(x.value).then(b,m)}I((w=w.apply(l,C||[])).next())})},E=this&&this.__generator||function(l,C){var w,f,g,_,P={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return _={next:b(0),throw:b(1),return:b(2)},"function"==typeof Symbol&&(_[Symbol.iterator]=function(){return this}),_;function b(I){return function(x){return function(I){if(w)throw new TypeError("Generator is already executing.");for(;P;)try{if(w=1,f&&(g=2&I[0]?f.return:I[0]?f.throw||((g=f.return)&&g.call(f),0):f.next)&&!(g=g.call(f,I[1])).done)return g;switch(f=0,g&&(I=[2&I[0],g.value]),I[0]){case 0:case 1:g=I;break;case 4:return P.label++,{value:I[1],done:!1};case 5:P.label++,f=I[1],I=[0];continue;case 7:I=P.ops.pop(),P.trys.pop();continue;default:if(!(g=(g=P.trys).length>0&&g[g.length-1])&&(6===I[0]||2===I[0])){P=0;continue}if(3===I[0]&&(!g||I[1]>g[0]&&I[1]<g[3])){P.label=I[1];break}if(6===I[0]&&P.label<g[1]){P.label=g[1],g=I;break}if(g&&P.label<g[2]){P.label=g[2],P.ops.push(I);break}g[2]&&P.ops.pop(),P.trys.pop();continue}I=C.call(l,P)}catch(x){I=[6,x],f=0}finally{w=g=0}if(5&I[0])throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}([I,x])}}};Object.defineProperty(u,"__esModule",{value:!0});var d=c(2217),p=c(737),T=function(){function l(C){this.hostType=d.default.Page,this.id=(0,p.uuidv4)(),this.protocolType=C,this.newConversationMessageListeners={},this.threadUpdateListeners={},this.debug=!1}return l.prototype.setDebug=function(C){this.debug=C},l.prototype.joinConversation=function(C,P){var w=this;return this.onJoinConversation(C,P).then(function(f){return{disconnect:w.disconnectFromConversation.bind(w,f),downloadFile:w.downloadFile.bind(w,f),getFileStatus:w.getFileStatus.bind(w,f),getMembers:w.getMembers.bind(w,f),getMessages:w.getMessages.bind(w,f),id:f.id,indicateTypingStatus:w.indicateTypingStatus.bind(w,f),registerOnNewMessage:w.registerOnNewMessage.bind(w,f),registerOnThreadUpdate:w.registerOnThreadUpdate.bind(w,f),sendFileMessage:w.sendFileMessage.bind(w,f),sendMessage:w.sendMessage.bind(w,f),sendMessageToBot:w.sendMessageToBot.bind(w,f),uploadFile:w.uploadFile.bind(w,f),sendFileData:w.sendFileData.bind(w,f)}})},l.prototype.registerOnNewMessage=function(C,P){return s(this,void 0,void 0,function(){return E(this,function(w){return[2,Promise.resolve()]})})},l.prototype.registerOnThreadUpdate=function(C,P){return s(this,void 0,void 0,function(){return E(this,function(w){return[2,Promise.resolve()]})})},l.prototype.uploadFile=function(C,P,w){return Promise.resolve()},l.prototype.downloadFile=function(C,P){return this.debug&&console.debug("IC3Core/ClientBridge/downloadFile"),this.downloadFileData(C,P).then(function(w){if(w&&w.size)return w;var g=new Blob([new Uint8Array(w)]);return!g||0===g.size&&""===g.type?w:g})},l}();u.default=T},2518:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=c(333),E=c(2217),d=function(){function p(){}return p.getClientBridge=function(T){switch(T.hostType){case E.default.IFrame:throw new Error("Framed bridge not implemented for "+T.hostType+" in IC3Core");case E.default.Page:return new s.default(T.protocolType);default:throw new Error("Client bridge not implemented for "+T.hostType+" in IC3Core")}},p}();u.default=d},333:function(K,u,c){"use strict";var P,s=this&&this.__extends||(P=function(w,f){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,_){g.__proto__=_}||function(g,_){for(var b in _)Object.prototype.hasOwnProperty.call(_,b)&&(g[b]=_[b])})(w,f)},function(w,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function g(){this.constructor=w}P(w,f),w.prototype=null===f?Object.create(f):(g.prototype=f.prototype,new g)}),E=this&&this.__awaiter||function(P,w,f,g){return new(f||(f=Promise))(function(b,m){function I(F){try{k(g.next(F))}catch(U){m(U)}}function x(F){try{k(g.throw(F))}catch(U){m(U)}}function k(F){F.done?b(F.value):function(b){return b instanceof f?b:new f(function(m){m(b)})}(F.value).then(I,x)}k((g=g.apply(P,w||[])).next())})},d=this&&this.__generator||function(P,w){var g,_,b,m,f={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return m={next:I(0),throw:I(1),return:I(2)},"function"==typeof Symbol&&(m[Symbol.iterator]=function(){return this}),m;function I(k){return function(F){return function(k){if(g)throw new TypeError("Generator is already executing.");for(;f;)try{if(g=1,_&&(b=2&k[0]?_.return:k[0]?_.throw||((b=_.return)&&b.call(_),0):_.next)&&!(b=b.call(_,k[1])).done)return b;switch(_=0,b&&(k=[2&k[0],b.value]),k[0]){case 0:case 1:b=k;break;case 4:return f.label++,{value:k[1],done:!1};case 5:f.label++,_=k[1],k=[0];continue;case 7:k=f.ops.pop(),f.trys.pop();continue;default:if(!(b=(b=f.trys).length>0&&b[b.length-1])&&(6===k[0]||2===k[0])){f=0;continue}if(3===k[0]&&(!b||k[1]>b[0]&&k[1]<b[3])){f.label=k[1];break}if(6===k[0]&&f.label<b[1]){f.label=b[1],b=k;break}if(b&&f.label<b[2]){f.label=b[2],f.ops.push(k);break}b[2]&&f.ops.pop(),f.trys.pop();continue}k=w.call(P,f)}catch(F){k=[6,F],_=0}finally{g=b=0}if(5&k[0])throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}([k,F])}}};Object.defineProperty(u,"__esModule",{value:!0});var p=c(1288),T=c(2217),l=c(9515),C=function(P){function w(f){var g=P.call(this,f)||this;return g.hostType=T.default.Page,g.protocolAdapter=new l.default("",g.hostType),g}return s(w,P),w.prototype.setup=function(f){return Promise.resolve()},w.prototype.update=function(f){return Promise.resolve()},w.prototype.onRegisterOnNewMessage=function(f){return Promise.resolve()},w.prototype.onRegisterOnThreadUpdate=function(f){return Promise.resolve()},w.prototype.initialize=function(f){return this.protocolAdapter.initialize(f)},w.prototype.dispose=function(){return this.protocolAdapter.dispose()},w.prototype.sendMessage=function(f,g){return this.protocolAdapter.sendMessage(f,g)},w.prototype.sendFileMessage=function(f,g,_){return this.protocolAdapter.sendFileMessage(f,g,_)},w.prototype.getMessages=function(f){return this.protocolAdapter.getMessages(f)},w.prototype.disconnectFromConversation=function(f){return this.protocolAdapter.disconnectFromConversation(f)},w.prototype.onJoinConversation=function(f,g){return this.protocolAdapter.joinConversation(f,g)},w.prototype.sendFileData=function(f,g,_){return this.protocolAdapter.sendFileData(f,g,_)},w.prototype.downloadFileData=function(f,g){return this.protocolAdapter.downloadFileData(f,g)},w.prototype.getFileStatus=function(f,g){return this.protocolAdapter.getFileStatus(f,g)},w.prototype.indicateTypingStatus=function(f,g,_){return this.protocolAdapter.indicateTypingStatus(f,g,_)},w.prototype.sendMessageToBot=function(f,g,_){return this.protocolAdapter.sendMessageToBot(f,g,_)},w.prototype.getMembers=function(f){return this.protocolAdapter.getMembers(f)},w.prototype.registerOnNewMessage=function(f,g){return E(this,void 0,void 0,function(){return d(this,function(_){return this.protocolAdapter.registerOnNewMessage(f,g),[2,Promise.resolve()]})})},w.prototype.registerOnThreadUpdate=function(f,g){return E(this,void 0,void 0,function(){return d(this,function(_){return this.protocolAdapter.registerOnThreadUpdate(f,g),[2,Promise.resolve()]})})},w.prototype.setDebug=function(f){void 0===f&&(f=!1),this.protocolAdapter.setDebug(f)},w}(p.default);u.default=C},1218:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=c(3865),E=c(501),d=c(4694),p=c(6355),T=c(2217),l=c(2915),C=c(5256),P=c(6849),w=c(5874),f=c(3671),g=c(752),_=c(448),b=c(3207),m=c(5655),I=c(6648),x=c(1927),k=c(8636),F=c(909),U=function(){function N(R){this.hostType=T.default.Page,this.protocolType=m.default.IC3V1SDK,this.id=R,this.conversations=[],this.newConversationMessageListeners={},this.threadUpdateListeners={},this.internalConversationsData={},this.liveStateFailureCount=0,this.debug=!1}return N.prototype.startPolling=function(){this.ic3Initializer&&this.ic3Initializer.startPolling()},N.prototype.stopPolling=function(){this.ic3Initializer&&this.ic3Initializer.stopPolling()},N.prototype.setup=function(R){return this.logger=R.logger,l.HttpClient.setLogger(this.logger),Promise.resolve()},N.prototype.initialize=function(R){return this.setupSession(R),Promise.resolve()},N.prototype.update=function(R){return Promise.resolve()},N.prototype.dispose=function(){return this.conversations=[],this.newConversationMessageListeners={},this.threadUpdateListeners={},this.internalConversationsData={},Promise.resolve()},N.prototype.joinConversation=function(R,M){var j;void 0===M&&(M=!0);var W=F.default.timer(),$={id:R};return-1===this.conversations.findIndex(function(Q){return Q.id===$.id})&&(this.conversations.push($),this.newConversationMessageListeners[$.id]=this.newConversationMessageListeners[$.id]||[],this.threadUpdateListeners[$.id]=this.threadUpdateListeners[$.id]||[]),null===(j=this.logger)||void 0===j||j.log(g.default.INFO,f.default.JoinConversation,{ElapsedTimeInMilliseconds:W.milliSecondsElapsed,EndpointUrl:this.EndpointUrl,EndpointId:this.EndpointId}),!F.default.isNullOrUndefined(M)&&!0===M&&this.sendHeartBeat($.id),Promise.resolve($)},N.prototype.sendLiveState=function(R){var M=this;this.debug&&console.debug("IC3Core/sendLiveState");var $=k.default.createBaseMessageData(b.default.LiveState,_.default.Text,"");return this.sendMessageToIC3(R,$).then(function(){return M.liveStateFailureCount=0,Promise.resolve()}).catch(function(ce){var Q;M.liveStateFailureCount++,M.liveStateFailureCount>=E.default.liveStateRetryCount&&(null===(Q=M.logger)||void 0===Q||Q.log(g.default.ERROR,f.default.SendLiveStateFailure,{ExceptionDetails:ce,EndpointUrl:M.EndpointUrl,EndpointId:M.EndpointId}),M.stopHeartBeat(),M.liveStateFailureCount=0)})},N.prototype.sendHeartBeat=function(R){this.heartBeatTimer||(this.debug&&console.debug("IC3Core/sendHeartBeat"),this.sendLiveState(R),this.heartBeatTimer=window.setInterval(this.sendLiveState.bind(this,R),E.default.heartBeatDuration))},N.prototype.stopHeartBeat=function(){clearInterval(this.heartBeatTimer)},N.prototype.sendMessage=function(R,M){var j=k.default.createMessageData(M);return this.sendMessageToIC3(R.id,j)},N.prototype.getMessages=function(R){var M=this,j=I.default.getDefaultGetMessagesQueryParameters(),W=F.default.addQueryParametersToPath(x.default.getMessagesUrl(R.id,this.ic3Info.RegionGtms),j),$=I.default.getDefaultIC3Headers();return $[P.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,$[P.default.ContentTypeHeader]=E.default.ContentTypeJson,l.HttpClient.MakeRequest({enableExponentialBackoff:!0,headers:$,redirect404RetryCount:E.default.retryCount,retryCount:E.default.retryCount,shouldRedirectOn404:!1,shouldResetOnFailure:!1,shouldRetryOnFailure:k.default.shouldRetryOnFailure,timeBetweenRetry:E.default.timeBetweenOperationRetry,type:w.default.GET,url:W}).then(function(Q){for(var te=[],ae=0,he=Q.messages;ae<he.length;ae++){var Se=he[ae];k.default.isSystemMessage(Se)||te.push(k.default.createIRawMessage(Se,M.ic3Info))}return M.getAllMessagesFromBackwardLinkUrl(Q._metadata.backwardLink,j.startTime,te)})},N.prototype.registerOnNewMessage=function(R,M){var j;return this.newConversationMessageListeners[R.id].push(M),null===(j=this.logger)||void 0===j||j.log(g.default.INFO,f.default.RegisterOnNewMessage,{EndpointUrl:this.EndpointUrl,EndpointId:this.EndpointId}),Promise.resolve()},N.prototype.registerOnThreadUpdate=function(R,M){var j;return this.threadUpdateListeners[R.id].push(M),null===(j=this.logger)||void 0===j||j.log(g.default.INFO,f.default.RegisterOnThreadUpdate,{EndpointUrl:this.EndpointUrl,EndpointId:this.EndpointId}),Promise.resolve()},N.prototype.disconnectFromConversation=function(R){return this.conversations.findIndex(function(M){return M.id===R.id}),delete this.internalConversationsData[R.id],this.ic3Info.visitor&&(this.stopHeartBeat(),this.stopPolling()),Promise.resolve()},N.prototype.sendFileData=function(R,M,j){var W=this;if(F.default.isNullOrUndefined(j)&&(j=d.default.AmsBasedFileSharing),M.size<=0)throw new Error("File size is lesser or equal to zero.");var $={fileSharingProtocolType:j,id:"",name:M.name,size:M.size,type:M.type,url:""};return new Promise(function(ce,Q){s.default.createNewDocument(R.id,M,W.ic3Info).then(function(te){$.id=te.id;var ae=k.default.isDocumentTypeImage(M.type);$.url=x.default.getAmsObjectContentUrl(te.id,W.ic3Info.RegionGtms,ae),s.default.uploadDocument(te.id,M,W.ic3Info).then(function(){ce($)}).catch(function(he){Q(he)})}).catch(function(te){Q(te)})})},N.prototype.sendFileMessage=function(R,M,j){return this.sendMessageToIC3(R.id,k.default.createFileMessage(M,this.ic3Info,j))},N.prototype.downloadFileData=function(R,M){var j=this;return this.debug&&console.debug("IC3Core/IC3ClientAdapter/downloadFileData"),new Promise(function(W,$){var ce=M.fileSharingProtocolType;F.default.isNullOrUndefined(ce)&&(ce=d.default.AmsBasedFileSharing),ce===d.default.AmsBasedFileSharing?s.default.downloadDocument(M,j.ic3Info).then(function(Q){W(Q)}).catch(function(Q){$(Q)}):$("This Protocol is not implemented")})},N.prototype.getFileStatus=function(R,M){var j=this;return new Promise(function(W,$){var ce=M.fileSharingProtocolType;F.default.isNullOrUndefined(ce)&&(ce=d.default.AmsBasedFileSharing),ce===d.default.AmsBasedFileSharing?s.default.getFileStatus(M,j.ic3Info).then(function(Q){W(Q)}).catch(function(Q){$(p.default.Error+" e")}):$("This Protocol is not implemented")})},N.prototype.indicateTypingStatus=function(R,M,j){var W=k.default.createTypingStatusThreadMessageData(M,j);return this.sendMessageToIC3(R.id,W)},N.prototype.sendMessageToBot=function(R,M,j){var W=k.default.createBotMessageData(R.id,j),$=x.default.getBotMessagesUrl(M,this.ic3Info.RegionGtms),ce=I.default.getDefaultIC3Headers();return ce[P.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,ce[P.default.ContentTypeHeader]=E.default.ContentTypeTextPlain,l.HttpClient.MakeRequest({data:W,dataType:C.default.TEXT,enableExponentialBackoff:!0,headers:ce,redirect404RetryCount:E.default.retryCount,retryCount:E.default.retryCount,shouldRedirectOn404:!1,shouldResetOnFailure:!1,shouldRetryOnFailure:k.default.shouldRetryOnFailure,timeBetweenRetry:E.default.timeBetweenOperationRetry,type:w.default.POST,url:$})},N.prototype.getMembers=function(R){var M=this.internalConversationsData[R.id].members,j=[];return F.default.isNullOrUndefinedOrEmptyArray(M)||M.forEach(function(W){var $={displayName:W.friendlyName,id:W.id,type:k.default.getPersonType(W.id)};j.push($)}),Promise.resolve(j)},N.prototype.sendMessageToIC3=function(R,M){var j=x.default.getMessagesUrl(R,this.ic3Info.RegionGtms),W=I.default.getDefaultIC3Headers();W[P.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,W[P.default.ContentTypeHeader]=E.default.ContentTypeJson;var $={data:JSON.stringify(M),enableExponentialBackoff:!0,headers:W,redirect404RetryCount:E.default.retryCount,retryCount:E.default.retryCount,shouldRedirectOn404:!1,shouldResetOnFailure:!1,shouldRetryOnFailure:k.default.shouldRetryOnFailure,timeBetweenRetry:E.default.timeBetweenOperationRetry,type:w.default.POST,url:j};return l.HttpClient.MakeRequest($)},N.prototype.onNewMessage=function(R,M,j){var $,W=this,ce=F.default.timer();try{R&&(F.default.isNullOrUndefined(this.newConversationMessageListeners[R.id])||k.default.isSystemMessage(M)||this.newConversationMessageListeners[R.id].forEach(function(te){te(k.default.createIRawMessage(M,W.ic3Info,j))}))}catch(te){return void(null===($=this.logger)||void 0===$||$.log(g.default.ERROR,f.default.OnNewMessageFailure,{ExceptionDetails:te,ElapsedTimeInMilliseconds:ce.milliSecondsElapsed,EndpointUrl:this.EndpointUrl,EndpointId:this.EndpointId}))}},N.prototype.onThreadUpdate=function(R,M){var j,W=F.default.timer();try{R&&(F.default.isNullOrUndefined(this.threadUpdateListeners[R.id])||this.threadUpdateListeners[R.id].forEach(function(ce){ce(k.default.createIRawThread(M))}))}catch(ce){return void(null===(j=this.logger)||void 0===j||j.log(g.default.ERROR,f.default.OnThreadUpdateFailure,{ExceptionDetails:ce,ElapsedTimeInMilliseconds:W.milliSecondsElapsed,EndpointUrl:this.EndpointUrl,EndpointId:this.EndpointId}))}},N.prototype.getAllMessagesFromBackwardLinkUrl=function(R,M,j){var W=this;return F.default.isNullOrEmptyString(R)?Promise.resolve(j):this.getMessagesFromBackwardLinkUrl(R,M).then(function($){for(var ce=0,Q=$.messages;ce<Q.length;ce++){var te=Q[ce];k.default.isSystemMessage(te)||j.push(k.default.createIRawMessage(te,W.ic3Info))}return W.getAllMessagesFromBackwardLinkUrl($._metadata.backwardLink,M,j)})},N.prototype.getMessagesFromBackwardLinkUrl=function(R,M){var W=F.default.addQueryParametersToPath(R,{startTime:M}),$=I.default.getDefaultIC3Headers();return $[P.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,$[P.default.ContentTypeHeader]=E.default.ContentTypeJson,l.HttpClient.MakeRequest({enableExponentialBackoff:!0,headers:$,redirect404RetryCount:E.default.retryCount,retryCount:E.default.retryCount,shouldRedirectOn404:!1,shouldResetOnFailure:!1,shouldRetryOnFailure:k.default.shouldRetryOnFailure,timeBetweenRetry:E.default.timeBetweenOperationRetry,type:w.default.GET,url:W})},N.prototype.setupSession=function(R){this.ic3Info={SkypeToken:R.token,RegionGtms:R.regionGtms,visitor:R.visitor},F.default.isNullOrUndefined(this.ic3Info)||(this.EndpointId=this.ic3Info.endpointId,this.EndpointUrl=this.ic3Info.RegionGtms?this.ic3Info.RegionGtms.chatService:"")},N.prototype.setDebug=function(R){void 0===R&&(R=!1),this.debug=R},N}();u.default=U},9515:function(K,u,c){"use strict";var U,s=this&&this.__extends||(U=function(N,R){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,j){M.__proto__=j}||function(M,j){for(var W in j)Object.prototype.hasOwnProperty.call(j,W)&&(M[W]=j[W])})(N,R)},function(N,R){if("function"!=typeof R&&null!==R)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function M(){this.constructor=N}U(N,R),N.prototype=null===R?Object.create(R):(M.prototype=R.prototype,new M)}),E=this&&this.__awaiter||function(U,N,R,M){return new(R||(R=Promise))(function(W,$){function ce(ae){try{te(M.next(ae))}catch(he){$(he)}}function Q(ae){try{te(M.throw(ae))}catch(he){$(he)}}function te(ae){ae.done?W(ae.value):function(W){return W instanceof R?W:new R(function($){$(W)})}(ae.value).then(ce,Q)}te((M=M.apply(U,N||[])).next())})},d=this&&this.__generator||function(U,N){var M,j,W,$,R={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return $={next:ce(0),throw:ce(1),return:ce(2)},"function"==typeof Symbol&&($[Symbol.iterator]=function(){return this}),$;function ce(te){return function(ae){return function(te){if(M)throw new TypeError("Generator is already executing.");for(;R;)try{if(M=1,j&&(W=2&te[0]?j.return:te[0]?j.throw||((W=j.return)&&W.call(j),0):j.next)&&!(W=W.call(j,te[1])).done)return W;switch(j=0,W&&(te=[2&te[0],W.value]),te[0]){case 0:case 1:W=te;break;case 4:return R.label++,{value:te[1],done:!1};case 5:R.label++,j=te[1],te=[0];continue;case 7:te=R.ops.pop(),R.trys.pop();continue;default:if(!(W=(W=R.trys).length>0&&W[W.length-1])&&(6===te[0]||2===te[0])){R=0;continue}if(3===te[0]&&(!W||te[1]>W[0]&&te[1]<W[3])){R.label=te[1];break}if(6===te[0]&&R.label<W[1]){R.label=W[1],W=te;break}if(W&&R.label<W[2]){R.label=W[2],R.ops.push(te);break}W[2]&&R.ops.pop(),R.trys.pop();continue}te=N.call(U,R)}catch(ae){te=[6,ae],j=0}finally{M=W=0}if(5&te[0])throw te[1];return{value:te[0]?te[1]:void 0,done:!0}}([te,ae])}}};Object.defineProperty(u,"__esModule",{value:!0});var p=c(501),T=c(6849),l=c(5874),C=c(1218),P=c(7037),w=c(3671),f=c(2915),g=c(752),_=c(5655),b=c(6648),m=c(5785),I=c(1927),x=c(8636),k=c(909),F=function(U){function N(R,M){var j=U.call(this,R)||this;return j.debug&&console.debug("IC3Core/Constructor"),j.protocolType=_.default.IC3V1SDK,j.hostType=M,j.ic3Initializer=new P.default,j}return s(N,U),N.prototype.startPolling=function(){U.prototype.startPolling.call(this)},N.prototype.stopPolling=function(){U.prototype.stopPolling.call(this)},N.prototype.setup=function(R){return U.prototype.setup.call(this,R)},N.prototype.initialize=function(R){var M=this;return U.prototype.initialize.call(this,R).then(function(){var W;return null===(W=M.ic3Initializer)||void 0===W?void 0:W.setup(M.logger).then(function(){return M.setSkypeTokenCookie()}).then(function(){var $;return null===($=M.ic3Initializer)||void 0===$?void 0:$.setIc3Info(M.ic3Info)}).then(function(){var $;return null===($=M.ic3Initializer)||void 0===$?void 0:$.initializeIC3(M.handlePollData.bind(M))}).then(function($){M.ic3Info=$})})},N.prototype.update=function(R){var M=this;return U.prototype.update.call(this,R).then(function(){return M.updateToken({RegionGtms:R.regionGtms,SkypeToken:R.token,visitor:R.visitor})})},N.prototype.dispose=function(){var R;return E(this,void 0,void 0,function(){return d(this,function(M){return null===(R=this.ic3Initializer)||void 0===R||R.stopPolling(),this.heartBeatTimer&&clearInterval(this.heartBeatTimer),Promise.resolve(),[2]})})},N.prototype.joinConversation=function(R,M){var j=this,W=k.default.timer();return U.prototype.joinConversation.call(this,R,M).then(function($){return j.getThreadRequest($.id).then(function(ce){return j.internalConversationsData[$.id]={id:R,members:ce.members},$}).catch(function(ce){return j.logger&&j.logger.log(g.default.WARN,w.default.JoinConversationV1GetThreadRequestFailed,{Description:"Unable to retrieve thread: "+ce,ElapsedTimeInMilliseconds:W.milliSecondsElapsed,EndpointUrl:j.EndpointUrl,EndpointId:j.ic3Info.endpointId}),j.internalConversationsData[$.id]={id:R,members:[]},$})})},N.prototype.sendMessage=function(R,M){return U.prototype.sendMessage.call(this,R,M)},N.prototype.sendFileMessage=function(R,M,j){return U.prototype.sendFileMessage.call(this,R,M,j)},N.prototype.getMessages=function(R){return U.prototype.getMessages.call(this,R)},N.prototype.registerOnNewMessage=function(R,M){return U.prototype.registerOnNewMessage.call(this,R,M)},N.prototype.registerOnThreadUpdate=function(R,M){return U.prototype.registerOnThreadUpdate.call(this,R,M)},N.prototype.disconnectFromConversation=function(R){return U.prototype.disconnectFromConversation.call(this,R)},N.prototype.setSkypeTokenCookie=function(){var R=this.ic3Info.RegionGtms.ams.concat(p.default.skypeTokenAuthURL),M=b.default.getDefaultBaseIC3Headers();return M[T.default.ContentTypeHeader]=p.default.ContentTypeForm,f.HttpClient.MakeRequest({data:p.default.skypeTokenConstantForData+this.ic3Info.SkypeToken,enableExponentialBackoff:!0,useXHRWithCredentials:!0,headers:M,redirect404RetryCount:p.default.retryCount,retryCount:p.default.retryCount,shouldRedirectOn404:!1,shouldResetOnFailure:!1,shouldRetryOnFailure:x.default.shouldRetryOnFailure,timeBetweenRetry:p.default.timeBetweenOperationRetry,type:l.default.POST,url:R})},N.prototype.getThreadRequest=function(R){var M=I.default.getThreadUrl(R,this.ic3Info.RegionGtms),j=b.default.getDefaultBaseIC3Headers();return j[T.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,f.HttpClient.MakeRequest({enableExponentialBackoff:!0,headers:j,redirect404RetryCount:p.default.retryCount,retryCount:p.default.retryCount,shouldRedirectOn404:!0,shouldRetryOnFailure:x.default.shouldRetryOnFailure,timeBetweenRetry:p.default.timeBetweenOperationRetry,type:l.default.GET,url:M})},N.prototype.newMessageReceived=function(R,M,j){U.prototype.onNewMessage.call(this,R,M,j)},N.prototype.newThreadUpdate=function(R,M){U.prototype.onThreadUpdate.call(this,R,M)},N.prototype.handleNewMessageEvent=function(R){var M;M=R.resource&&R.resource.conversationid?R.resource.conversationid:x.default.getConversationIdFromUrl(R.resource.conversationLink?R.resource.conversationLink:R.resourceLink);var j=this.conversations.findIndex(function($){return $.id===M});this.newMessageReceived(this.conversations[j],R.resource,R.resourceType)},N.prototype.handleConversationUpdateEvent=function(R){},N.prototype.handleThreadUpdate=function(R){if(R.resourceType===m.default.ThreadUpdate){var M;M=R.resource&&R.resource.id?R.resource.id:x.default.getConversationIdFromUrl(R.resource.messages?R.resource.messages:R.resourceLink);var j=this.conversations.findIndex(function($){return $.id===M});this.newThreadUpdate(this.conversations[j],R.resource)}},N.prototype.handlePollData=function(R){if(R&&R.eventMessages)for(var M=0,j=R.eventMessages;M<j.length;M++)this.handlePollEventMessage(j[M])},N.prototype.handlePollEventMessage=function(R){R.resourceType===m.default.NewMessage||R.resourceType===m.default.MessageUpdate?this.handleNewMessageEvent(R):R.resourceType===m.default.ThreadUpdate?this.handleThreadUpdate(R):R.resourceType===m.default.ConversationUpdate&&this.handleConversationUpdateEvent(R)},N.prototype.updateToken=function(R){return E(this,void 0,void 0,function(){var M,j,W,$,ce,Q,te,ae,he,Se,ne=this;return d(this,function(pe){switch(pe.label){case 0:return this.logger&&this.logger.log(g.default.INFO,w.default.UpdateToken,{EndpointUrl:this.EndpointUrl,EndpointId:this.ic3Info.endpointId}),M=[],j=function(re){re&&re.eventMessages&&k.default.concatArrays(M,re.eventMessages)},W=[],$=function(re){re&&re.eventMessages&&k.default.concatArrays(W,re.eventMessages)},ce=this.ic3Initializer,Q=new P.default,te=this.updateTokenClearTimeoutHandle,ae=this.ic3Info,ce.getPoller().onNewData=j,this.logger?[4,Q.setup(this.logger)]:[3,2];case 1:pe.sent(),pe.label=2;case 2:return[2,Q.setIc3Info(R).then(function(){return Q.initializeIC3($)}).then(function(re){he=re}).then(function(){return ne.getMatchingIC3EventIndex(M,W)}).then(function(re){Se=re}).then(function(){return ce.reset(!0)}).then(function(){return ne.syncPollingData(M,W,Se)}).then(function(){ne.ic3Info=he,ne.ic3Initializer=Q,ne.ic3Initializer.getPoller().onNewData=ne.handlePollData.bind(ne)}).catch(function(re){throw ne.updateTokenClearTimeoutHandle!==te&&(clearTimeout(ne.updateTokenClearTimeoutHandle),ne.updateTokenClearTimeoutHandle=te),ne.ic3Info=ae,ne.ic3Initializer.getPoller().onNewData=ne.handlePollData.bind(ne),ne.ic3Initializer.getPoller().start(),new Error("Update token failed: "+(re&&re.message))})]}})})},N.prototype.getMatchingIC3EventIndex=function(R,M,j){var W=this;return new Promise(function($,ce){if((j=j||0)===p.default.stabilizePollMaxRetryCount)$({newPollIndex:-1,previousPollIndex:-1});else{for(var Q=0,te=0;Q<R.length&&te<M.length;){var ae=R[Q];if(ae.time===M[te].time)return void $({newPollIndex:te,previousPollIndex:Q});new Date(ae.time)<new Date(ae.time)?Q++:te++}setTimeout(function(){W.getMatchingIC3EventIndex(R,M,j+1).then(function(Se){$(Se)}).catch(function(Se){ce(Se)})},p.default.timeBetweenStabilizingPoll)}})},N.prototype.syncPollingData=function(R,M,j){this.logger&&this.logger.log(g.default.INFO,w.default.SyncingPollData,{EndpointUrl:this.EndpointUrl,EndpointId:this.ic3Info.endpointId});var W=j.previousPollIndex,$=j.newPollIndex+1;-1===j.previousPollIndex&&-1===j.newPollIndex&&(W=R.length-1,$=0);for(var ce=0;ce<=W;ce++)this.handlePollEventMessage(R[ce]);for(ce=$;ce<M.length;ce++)this.handlePollEventMessage(M[ce])},N}(C.default);u.default=F},7037:function(K,u,c){"use strict";var s=this&&this.__awaiter||function(F,U,N,R){return new(N||(N=Promise))(function(j,W){function $(te){try{Q(R.next(te))}catch(ae){W(ae)}}function ce(te){try{Q(R.throw(te))}catch(ae){W(ae)}}function Q(te){te.done?j(te.value):function(j){return j instanceof N?j:new N(function(W){W(j)})}(te.value).then($,ce)}Q((R=R.apply(F,U||[])).next())})},E=this&&this.__generator||function(F,U){var R,M,j,W,N={label:0,sent:function(){if(1&j[0])throw j[1];return j[1]},trys:[],ops:[]};return W={next:$(0),throw:$(1),return:$(2)},"function"==typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W;function $(Q){return function(te){return function(Q){if(R)throw new TypeError("Generator is already executing.");for(;N;)try{if(R=1,M&&(j=2&Q[0]?M.return:Q[0]?M.throw||((j=M.return)&&j.call(M),0):M.next)&&!(j=j.call(M,Q[1])).done)return j;switch(M=0,j&&(Q=[2&Q[0],j.value]),Q[0]){case 0:case 1:j=Q;break;case 4:return N.label++,{value:Q[1],done:!1};case 5:N.label++,M=Q[1],Q=[0];continue;case 7:Q=N.ops.pop(),N.trys.pop();continue;default:if(!(j=(j=N.trys).length>0&&j[j.length-1])&&(6===Q[0]||2===Q[0])){N=0;continue}if(3===Q[0]&&(!j||Q[1]>j[0]&&Q[1]<j[3])){N.label=Q[1];break}if(6===Q[0]&&N.label<j[1]){N.label=j[1],j=Q;break}if(j&&N.label<j[2]){N.label=j[2],N.ops.push(Q);break}j[2]&&N.ops.pop(),N.trys.pop();continue}Q=U.call(F,N)}catch(te){Q=[6,te],M=0}finally{R=j=0}if(5&Q[0])throw Q[1];return{value:Q[0]?Q[1]:void 0,done:!0}}([Q,te])}}};Object.defineProperty(u,"__esModule",{value:!0});var d=c(501),p=c(6849),T=c(5850),l=c(8311),C=c(6648),P=c(1927),w=c(909),f=c(3805),g=c(752),_=c(3671),b=c(9306),m=c(8636),I=c(2915),x=c(5874),k=function(){function F(){this.debug=!1,this.current404RetryCount=0,this.currentOtherRetryCount=0,this.skipUnsubscribe=!1,this.telemetryMessage="",this.errorCode="",this.pollDataHandler=function(U){},this.resetRetryCount()}return F.prototype.setup=function(U){return s(this,void 0,void 0,function(){return E(this,function(N){return this.logger=U,[2]})})},F.prototype.getPoller=function(){var U=this.pollDataHandler.bind(this);return this.poller||(this.poller=new f.default(this.ic3Info,U,this.redirectErrorHandler.bind(this),this.onRequestCreationFailure.bind(this))),this.poller},F.prototype.setIc3Info=function(U){return s(this,void 0,void 0,function(){var N;return E(this,function(R){return N={RegionGtms:JSON.parse(JSON.stringify(U.RegionGtms)),SkypeToken:U.SkypeToken,visitor:U.visitor},this.ic3Info=N,[2]})})},F.prototype.initializeIC3=function(U){var R,N=this;return U&&(this.pollDataHandler=U),null===(R=this.logger)||void 0===R||R.log(g.default.INFO,_.default.IC3InitializationBegins,{Description:"Endpoint to poll is "+JSON.stringify(this.ic3Info.RegionGtms.chatService),EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.createEndpoint().then(function(){return N.createSubscription()}).then(function(){return N.setEndpointProperty()}).then(function(){return N.startPolling(U)}).then(function(){return N.resetRetryCount()}).then(function(){return Promise.resolve(N.ic3Info)}).catch(function(j){return N.redirectErrorHandler(j)})},F.prototype.startPolling=function(U){var N,R=!U&&this.pollDataHandler?this.pollDataHandler.bind(this):this.pollDataHandler;this.poller||(this.poller=new f.default(this.ic3Info,R,this.redirectErrorHandler.bind(this),this.onRequestCreationFailure.bind(this))),this.poller.ic3Info=this.ic3Info,null===(N=this.logger)||void 0===N||N.log(g.default.INFO,_.default.IC3StartedPolling,{EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.poller.start()},F.prototype.stopPolling=function(U){var N;null===(N=this.logger)||void 0===N||N.log(g.default.INFO,_.default.IC3StoppedPolling,{Description:(U?d.default.oldInitializer:d.default.newInitializer)+" stopped polling.",EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.poller&&this.poller.stop()},F.prototype.reset=function(U){return this.stopPolling(U),this.unsubscribeFromEndpoint()},F.prototype.resetRetryCount=function(){this.current404RetryCount=0,this.currentOtherRetryCount=0},F.prototype.onEndpointCreationFailure=function(U){this.onRequestCreationFailure(U,d.default.endpointRequestLog)},F.prototype.onEndpointCreationSuccess=function(U){var N,R,M=w.default.getResponseHeader(U,p.default.SetRegistrationTokenHeader);w.default.isNullOrUndefined(M)||(this.ic3Info.RegistrationToken=w.default.getRegistrationTokenValue(M));var j=w.default.getResponseHeader(U,p.default.LocationHeader);if(!w.default.isNullOrUndefined(j)){var W=j.match(/endpoints\/(%7B[\da-z\-]+%7D)/);this.ic3Info.endpointId=W&&W[1],null===(N=this.logger)||void 0===N||N.log(g.default.INFO,_.default.IC3EndpointCreationSuccess,{Description:"IC3 endpoint Id is "+this.ic3Info.endpointId,EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),U.status===b.default.Created&&m.default.parseChatServiceHostUrl(j)!==this.ic3Info.RegionGtms.chatService&&(this.ic3Info.RegionGtms.chatService=m.default.parseChatServiceHostUrl(j),null===(R=this.logger)||void 0===R||R.log(g.default.WARN,_.default.OnRequestCreationSuccessRedirect,{Description:"Endpoint changed",EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}))}},F.prototype.createEndpointRequest=function(){var U=P.default.getV1EndpointUrl(this.ic3Info.RegionGtms),N=C.default.getDefaultIC3Headers();N[p.default.AuthenticationHeader]=p.default.SkypeTokenHeaderValue+this.ic3Info.SkypeToken,N[p.default.ContentTypeHeader]=d.default.ContentTypeJson;var M={endpointFeatures:[l.default.Agent,l.default.InviteFree,l.default.MessageProperties].join(",")},j={callbackOnFailure:this.onEndpointCreationFailure.bind(this),callbackOnSuccess:this.onEndpointCreationSuccess.bind(this),data:JSON.stringify(M),enableExponentialBackoff:!0,headers:N,redirect404RetryCount:d.default.retryCount,retryCount:d.default.retryCount,shouldRedirectOn404:!0,shouldResetOnFailure:!0,shouldRetryOnFailure:m.default.shouldRetryOnFailure,timeBetweenRetry:d.default.timeBetweenOperationRetry,type:x.default.POST,url:U};return I.HttpClient.MakeRequest(j)},F.prototype.createEndpoint=function(){var U=this;return this.createEndpointRequest().then(function(N){return N.subscriptions&&N.subscriptions.length>0&&(U.ic3Info.subscriptionId=N.subscriptions[0].id),N})},F.prototype.onSubscriptionCreationFailure=function(U){this.onRequestCreationFailure(U,d.default.subscriptionRequestLog)},F.prototype.onSubscriptionCreationSuccess=function(U){var N,R=w.default.getResponseHeader(U,p.default.LocationHeader)||"";U.status===b.default.Created&&!w.default.isNullOrUndefined(R)&&m.default.parseChatServiceHostUrl(R)!==this.ic3Info.RegionGtms.chatService&&(this.ic3Info.RegionGtms.chatService=m.default.parseChatServiceHostUrl(R),null===(N=this.logger)||void 0===N||N.log(g.default.WARN,_.default.OnRequestCreationSuccessRedirect,{Description:"Endpoint changed",EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}));var M=R.match(/\/(\d+)$/);M&&(this.ic3Info.subscriptionId=M[1])},F.prototype.createSubscriptionRequest=function(){var U=P.default.getV1SubscriptionUrl(this.ic3Info.RegionGtms),N=C.default.getDefaultIC3Headers();N[p.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,N[p.default.ContentTypeHeader]=d.default.ContentTypeJson;var R={channelType:d.default.HttpLongPoll,interestedResources:[T.default.ConversationMessages,T.default.ConversationProperties,T.default.Threads,T.default.Contacts]},M={callbackOnFailure:this.onSubscriptionCreationFailure.bind(this),callbackOnSuccess:this.onSubscriptionCreationSuccess.bind(this),data:JSON.stringify(R),enableExponentialBackoff:!0,headers:N,redirect404RetryCount:d.default.retryCount,retryCount:d.default.retryCount,shouldRedirectOn404:!0,shouldResetOnFailure:!0,shouldRetryOnFailure:m.default.shouldRetryOnFailure,timeBetweenRetry:d.default.timeBetweenOperationRetry,type:x.default.POST,url:U};return I.HttpClient.MakeRequest(M)},F.prototype.createSubscription=function(){return this.createSubscriptionRequest()},F.prototype.onSetEndpointPropertyCreationFailure=function(U){this.onRequestCreationFailure(U,d.default.setPropertiesRequestLog)},F.prototype.setEndpointProperty=function(){if(this.ic3Info.visitor)return Promise.resolve();var U=P.default.getV1SetPropertiesUrl(this.ic3Info.RegionGtms),N={};N[p.default.SetEndpointProperty]=!0;var M=C.default.getDefaultIC3Headers();M[p.default.AuthenticationHeader]=p.default.SkypeTokenHeaderValue+this.ic3Info.SkypeToken,M[p.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,M[p.default.ContentTypeHeader]=d.default.ContentTypeJson;var j={callbackOnFailure:this.onSetEndpointPropertyCreationFailure.bind(this),data:JSON.stringify(N),enableExponentialBackoff:!0,headers:M,redirect404RetryCount:d.default.retryCount,retryCount:d.default.retryCount,shouldRedirectOn404:!0,shouldResetOnFailure:!0,shouldRetryOnFailure:m.default.shouldRetryOnFailure,timeBetweenRetry:d.default.timeBetweenOperationRetry,type:x.default.PUT,url:U};return I.HttpClient.MakeRequest(j)},F.prototype.onUnsubscribeCreationFailure=function(U){this.onRequestCreationFailure(U,d.default.unsubscribeRequestLog)},F.prototype.unsubscribeFromEndpoint=function(){if(this.ic3Info.visitor||w.default.isNullOrUndefined(this.ic3Info.endpointId)||this.skipUnsubscribe)return this.skipUnsubscribe=!0,Promise.resolve();var U=P.default.getV1DeleteEndpointUrl(this.ic3Info.RegionGtms,this.ic3Info.endpointId),N=C.default.getDefaultIC3Headers();N[p.default.AuthenticationHeader]=p.default.SkypeTokenHeaderValue+this.ic3Info.SkypeToken,N[p.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,N[p.default.ContentTypeHeader]=d.default.ContentTypeJson;var R={callbackOnFailure:this.onUnsubscribeCreationFailure.bind(this),enableExponentialBackoff:!0,headers:N,redirect404RetryCount:d.default.retryCount,retryCount:d.default.retryCount,shouldRedirectOn404:!0,shouldResetOnFailure:!0,shouldRetryOnFailure:m.default.shouldRetryOnFailure,timeBetweenRetry:d.default.timeBetweenOperationRetry,type:x.default.DELETE,url:U};return I.HttpClient.MakeRequest(R)},F.prototype.onRequestCreationFailure=function(U,N){var R,M,j=w.default.getResponseHeader(U,p.default.LocationHeader);this.telemetryMessage=N+" failed. Error Code: "+U.status+".",this.errorCode=U.status.toString(),this.skipUnsubscribe=!0,U.status!==b.default.Redirect||w.default.isNullOrEmptyString(j)?(null===(M=this.logger)||void 0===M||M.log(g.default.WARN,_.default.ResetOnRequestCreationFailure,{Description:this.telemetryMessage+" Trying to reset.",ErrorCode:U.status.toString(),EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.current404RetryCount=0,this.currentOtherRetryCount++):(null===(R=this.logger)||void 0===R||R.log(g.default.WARN,_.default.RedirectOnRequestCreationFailure,{Description:this.telemetryMessage+" Trying to redirect.",ErrorCode:U.status.toString(),EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.onRequestCreationFailureRedirect(U))},F.prototype.redirectErrorHandler=function(U){var R,N=this;return U.message===d.default.Reset_Flag&&this.current404RetryCount<=d.default.retry404Count&&this.currentOtherRetryCount<=d.default.retryCount?this.reset().then(function(){return N.initializeIC3()}):(null===(R=this.logger)||void 0===R||R.log(g.default.ERROR,_.default.MaxRetryCountReachedForRedirect,{Description:"Fatal Error. Initialization failed. Maximum retry count reached. Exiting. "+this.telemetryMessage,ErrorCode:this.errorCode,ExceptionDetails:U,EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.reset().then(function(){return Promise.reject(U.message)}))},F.prototype.onRequestCreationFailureRedirect=function(U){var N;this.current404RetryCount++,this.currentOtherRetryCount=0,this.ic3Info.RegionGtms.chatService=m.default.parseChatServiceHostUrl(w.default.getResponseHeader(U,p.default.LocationHeader)),null===(N=this.logger)||void 0===N||N.log(g.default.WARN,_.default.OnRequestCreationFailureRedirect,{Description:"Endpoint changed.",EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId})},F}();u.default=k},9202:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=c(2518),E=c(1356),d=function(){function p(){}return p.getSDK=function(T){return new Promise(function(l){var P=s.default.getClientBridge({hostType:T.hostType,protocolType:T.protocolType}),w={logger:new E.default(P,T.logger)};return P.setup(w).then(function(){var f={dispose:P.dispose.bind(P),id:P.id,initialize:P.initialize.bind(P),joinConversation:P.joinConversation.bind(P),update:P.update.bind(P),setDebug:P.setDebug.bind(P)};return l(f)})})},p}();u.default=d},2915:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.HttpClient=void 0;var s=c(909),E=c(501),d=c(3671),p=c(752),T=c(6849),l=c(9306),C=c(8686),P=function(){function w(){}return w.MakeRequest=function(f){return new Promise(function(_,b){var x=0,k=f.retryCount||1,F={url:f.url,method:f.type,data:f.data,timeout:f.timeout,headers:f.headers,withCredentials:f.useXHRWithCredentials||!1},U=function(){C.default.request(F).then(function(N){!function(N,R){if(R.status>=400){var M={ResponseText:R.statusText,Status:status};w.logWarning("Requesting "+f.url,R.status,M)}f.callbackOnSuccess&&f.callbackOnSuccess(R),_(N)}(N.data,N)}).catch(function(N){!function(N){var R,M,j,W,$,ce,Q,te,ae,he,Se={ErrorThrown:N.message,ResponseText:null===(R=N.response)||void 0===R?void 0:R.statusText,Status:null===(M=N.response)||void 0===M?void 0:M.status},oe=function(){var se,me;w.logError("Request to "+f.url+" failed.",(null===(se=N.response)||void 0===se?void 0:se.status)||0,Se),b(new Error((null===(me=N.response)||void 0===me?void 0:me.statusText)||""))},ne=function(){var se;w.logError("Request to "+f.url+" failed. Resetting endpoint.",(null===(se=N.response)||void 0===se?void 0:se.status)||0,Se),f.callbackOnFailure&&f.callbackOnFailure(N),b(new Error(E.default.Reset_Flag))},pe=function(){var se;x++;var me=f.timeBetweenRetry||0;(f.enableExponentialBackoff||(null===(se=N.response)||void 0===se?void 0:se.status)===l.default.TooManyRequests)&&(me*=Math.exp(x)),setTimeout(function(){U()},me)},re=null===(j=N.response)||void 0===j?void 0:j.headers[T.default.LocationHeader],J=null===(W=N.response)||void 0===W?void 0:W.headers[T.default.SetRegistrationTokenHeader];(null===($=N.response)||void 0===$?void 0:$.status)!==l.default.Redirect||s.default.isNullOrEmptyString(re)?(null===(ce=N.response)||void 0===ce?void 0:ce.status)!==l.default.Unauthorized&&(null===(Q=N.response)||void 0===Q?void 0:Q.status)!==l.default.Forbidden||s.default.isNullOrEmptyString(J)?x<=k&&f.shouldRetryOnFailure&&f.shouldRetryOnFailure((null===(ae=N.response)||void 0===ae?void 0:ae.status)||0)||(null===(he=N.response)||void 0===he?void 0:he.status)===l.default.TooManyRequests?pe():f.shouldResetOnFailure?ne():oe():x<=k&&f.shouldRetryOnFailure&&f.shouldRetryOnFailure((null===(te=N.response)||void 0===te?void 0:te.status)||0)?(f.headers&&(f.headers[T.default.RegistrationTokenHeader]=s.default.getRegistrationTokenValue(J)),pe()):f.shouldResetOnFailure?ne():oe():f.shouldRedirectOn404?ne():x<=k?(f.url=re,pe()):oe()}(N)})};U()})},w.isClientError=function(f){if(!f)return!1;var g=f.message,_=!1;return s.default.isNullOrEmptyString(g)||(_=g.search(/Status- 40\d/)>=-1),_},w.setLogger=function(f){w.logger=f},w.logError=function(f,g,_){w.logger&&w.logger.log(p.default.ERROR,d.default.HTTPRequestFailed,{Description:f,ErrorCode:g.toString(),ExceptionDetails:_})},w.logWarning=function(f,g,_){w.logger&&w.logger.log(p.default.INFO,d.default.HTTPRequestUnusualResponse,{Description:f,ErrorCode:g.toString(),ExceptionDetails:_})},w}();u.HttpClient=P},9306:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=function(){function s(){}return s.OK=200,s.Created=201,s.Accepted=202,s.NoContent=204,s.Unauthorized=401,s.Forbidden=403,s.Redirect=404,s.TooManyRequests=429,s.InternalServerError=500,s.ServiceUnavailable=503,s.NotFound=729,s}();u.default=c},5256:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=function(){function s(){}return s.TEXT="text",s}();u.default=c},6849:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=function(){function s(){}return s.LocationHeader="location",s.SetRegistrationTokenHeader="set-registrationtoken",s.RegistrationTokenHeader="RegistrationToken",s.RegistrationTokenHeaderValue="registrationToken=",s.ContentTypeHeader="content-type",s.AuthenticationHeader="authentication",s.BehaviorOverrideHeader="behavioroverride",s.SkypeTokenHeaderValue="skypetoken=",s.SetEndpointProperty="supportsMessageProperties",s}();u.default=c},5874:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=(()=>{return(s=c||(c={})).GET="get",s.POST="post",s.PUT="put",s.DELETE="delete",c;var s})();u.default=c},6648:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=c(501),E=c(737),d=function(){function p(){}return p.getDefaultIC3Headers=function(){return{Accept:s.default.ContentTypeJson,BehaviorOverride:s.default.RedirectAs404,ClientInfo:s.default.ClientInfoValue,ContextId:"tcid="+(0,E.uuidv4)(),Expires:0,Pragma:s.default.NoCache,"x-ms-client-type":s.default.Web,"x-ms-user-type":s.default.User}},p.getDefaultBaseIC3Headers=function(){return{Accept:s.default.ContentTypeJson,BehaviorOverride:s.default.RedirectAs404,"content-type":s.default.ContentTypeJson}},p.getDefaultGetMessagesQueryParameters=function(){return{pageSize:20,startTime:0,view:"msnp24Equivalent|supportsMessageProperties"}},p.getDefaultAMSHeaders=function(T){return{Authorization:s.default.AMSAuthorizationSkypeTokenValue+T,"X-MS-Client-Version":s.default.ClientInfoValue}},p.getDefaultAMSViewHeaders=function(T){return{Accept:s.default.AMSAcceptHeaderValue,"Accept-Encoding":s.default.AMSAcceptEncodingHeaderValue,Authorization:s.default.AMSAuthorizationSkypeTokenValue+T,"X-MS-Client-Version":s.default.ClientInfoValue}},p}();u.default=d},6194:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.SDKProvider=void 0;var s=c(9202);u.SDKProvider=s.default},2217:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=function(){function s(){}return s.IFrame=0,s.Page=1,s}();u.default=c},5655:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=function(){function s(){}return s.IC3V1SDK=0,s.IC3V2SDK=1,s.MockIC3SDK=2,s}();u.default=c},3671:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=(()=>{return(s=c||(c={})).JoinConversation="JoinConversation",s.RegisterOnNewMessage="RegisterOnNewMessage",s.RegisterOnThreadUpdate="RegisterOnThreadUpdate",s.OnNewMessageFailure="OnNewMessageFailure",s.OnThreadUpdateFailure="OnThreadUpdateFailure",s.SendLiveStateFailure="SendLiveStateFailure",s.JoinConversationV1GetThreadRequestFailed="JoinConversationV1GetThreadRequestFailed",s.UpdateToken="UpdateToken",s.SyncingPollData="SyncingPollData",s.IC3InitializationBegins="IC3InitializationBegins",s.IC3StartedPolling="IC3StartedPolling",s.IC3StoppedPolling="IC3StoppedPolling",s.IC3EndpointCreationSuccess="IC3EndpointCreationSuccess",s.RedirectOnRequestCreationFailure="RedirectOnRequestCreationFailure",s.ResetOnRequestCreationFailure="ResetOnRequestCreationFailure",s.MaxRetryCountReachedForRedirect="MaxRetryCountReachedForRedirect",s.OnRequestCreationFailureRedirect="OnRequestCreationFailureRedirect",s.OnRequestCreationSuccessRedirect="OnRequestCreationSuccessRedirect",s.ErrorDuringPolling="ErrorDuringPolling",s.HTTPRequestFailed="HTTPRequestFailed",s.HTTPRequestUnusualResponse="HTTPRequestUnusualResponse",c;var s})();u.default=c},752:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=(()=>{return(s=c||(c={})).INFO="INFO",s.DEBUG="DEBUG",s.WARN="WARN",s.ERROR="ERROR",c;var s})();u.default=c},1356:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=c(909),E=c(8261),d=function(){function p(T,l){this.sdk=T,this.logger=l}return p.prototype.log=function(T,l,C){if(this.isLoggingEnabled()){var P=E.default.getTelemetryEventData(this.sdk,l,C);this.logEvent(T,P)}},p.prototype.logEvent=function(T,l){this.isLoggingEnabled()&&setTimeout(this.logger.logClientSdkTelemetryEvent.bind(this.logger),0,T,l)},p.prototype.isLoggingEnabled=function(){return!s.default.isNullOrUndefined(this.logger)},p}();u.default=d},8261:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=function(){function s(){}return s.getTelemetryEventData=function(E,d,p){return{Description:p.Description,ElapsedTimeInMilliseconds:p.ElapsedTimeInMilliseconds,EndpointUrl:p.EndpointUrl,EndpointId:p.EndpointId,ErrorCode:p.ErrorCode,Event:d,ExceptionDetails:p.ExceptionDetails,ShouldBubbleToHost:p.ShouldBubbleToHost,SubscriptionId:E.id}},s}();u.default=c},2900:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=function(){function s(){}return s.Bridged="bridged",s.Unbridged="unbridged",s}();u.default=c},4694:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=(()=>{return(s=c||(c={}))[s.AmsBasedFileSharing=0]="AmsBasedFileSharing",c;var s})();u.default=c},6355:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=(()=>{return(s=c||(c={}))[s.Unknown=0]="Unknown",s[s.InProgress=1]="InProgress",s[s.Success=2]="Success",s[s.Error=3]="Error",c;var s})();u.default=c},5850:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=function(){function s(){}return s.ConversationProperties="/v1/users/ME/conversations/ALL/properties",s.ConversationMessages="/v1/users/ME/conversations/ALL/messages",s.Threads="/v1/threads/ALL",s.Contacts="/v1/users/ME/contacts/ALL",s}();u.default=c},8311:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=function(){function s(){}return s.Agent="Agent",s.MessageProperties="MessageProperties",s.InviteFree="InviteFree",s}();u.default=c},448:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=function(){function s(){}return s.RichText="RichText",s.Text="Text",s}();u.default=c},3207:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=function(){function s(){}return s.Text="Text",s.RichText="RichText",s.RichTextHtml="RichText/Html",s.ControlTyping="Control/Typing",s.ControlClearTyping="Control/ClearTyping",s.LiveState="Control/LiveState",s}();u.default=c},3372:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=function(){function s(){}return s.UserMessage="UserMessage",s.SwiftCard="SwiftCard",s.Typing="Control/Typing",s.ClearTyping="Control/ClearTyping",s.LiveState="Control/LiveState",s}();u.default=c},4352:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=(()=>{return(s=c||(c={}))[s.Unknown=0]="Unknown",s[s.User=1]="User",s[s.Bot=2]="Bot",c;var s})();u.default=c},5785:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=function(){function s(){}return s.NewMessage="NewMessage",s.MessageUpdate="MessageUpdate",s.UserPresence="UserPresence",s.ConversationUpdate="ConversationUpdate",s.ThreadUpdate="ThreadUpdate",s}();u.default=c},7708:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=(()=>{return(s=c||(c={}))[s.Typing=0]="Typing",s[s.ClearTyping=1]="ClearTyping",c;var s})();u.default=c},3805:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=c(1927),E=c(2553),d=c(501),p=function(){function T(l,C,P,w){this.isPolling=!1,this._ic3Info=l,this._onNewData=C,this._onError=P,this.callbackOnFailure=w}return T.prototype.start=function(){return this.isPolling||(this.isPolling=!0,this.startPolling()),Promise.resolve()},T.prototype.stop=function(){return this.isPolling=!1,Promise.resolve()},Object.defineProperty(T.prototype,"onNewData",{get:function(){return this._onNewData},set:function(l){this._onNewData=l},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"onError",{get:function(){return this._onError},set:function(l){this._onError=l},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"setCallbackOnFailure",{set:function(l){this.setCallbackOnFailure=l},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"ic3Info",{get:function(){return this._ic3Info},set:function(l){this._ic3Info=l},enumerable:!1,configurable:!0}),T.prototype.startPolling=function(){var l=this;this.isPolling&&this.poll().then(function(C){l.isPolling&&l._onNewData&&l._onNewData(C)}).catch(function(C){l._onError&&l._onError(C)}).then(function(){l.startPolling()})},T.prototype.poll=function(){var l=s.default.getV1PollUrl(this._ic3Info.RegionGtms,this._ic3Info.subscriptionId);return E.default.poll(l,this._ic3Info.RegistrationToken,this.callbackOnEachRequestCompleted.bind(this))},T.prototype.callbackOnEachRequestCompleted=function(l){this.callbackOnFailure(l,d.default.pollRequestLog)},T}();u.default=p},2553:(K,u,c)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});var s=c(501),E=c(2915),d=c(6849),p=c(5874),T=c(6648),l=c(8636),C=function(){function P(){}return P.poll=function(w,f,g){var _=T.default.getDefaultIC3Headers();_[d.default.RegistrationTokenHeader]=f,_[d.default.ContentTypeHeader]=s.default.ContentTypeJson;var b=JSON.stringify({});return E.HttpClient.MakeRequest({callbackOnFailure:g,data:b,enableExponentialBackoff:!0,headers:_,redirect404RetryCount:s.default.retryCount,retryCount:s.default.retryCount,shouldRedirectOn404:!0,shouldResetOnFailure:!0,shouldRetryOnFailure:l.default.shouldRetryOnFailure,timeBetweenRetry:s.default.timeBetweenOperationRetry,type:p.default.POST,url:w})},P}();u.default=C},737:(K,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.uuidv4=void 0,u.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){var E=16*Math.random()|0;return("x"===s?E:3&E|8).toString(16)})}},8686:(K,u,c)=>{K.exports=c(5454)},4054:(K,u,c)=>{"use strict";var s=c(9471),E=c(5650),d=c(300),p=c(7790),T=c(4634),l=c(1929),C=c(2984),P=c(5886);K.exports=function(f){return new Promise(function(_,b){var m=f.data,I=f.headers,x=f.responseType;s.isFormData(m)&&delete I["Content-Type"];var k=new XMLHttpRequest;if(f.auth){var F=f.auth.username||"",U=f.auth.password?unescape(encodeURIComponent(f.auth.password)):"";I.Authorization="Basic "+btoa(F+":"+U)}var N=T(f.baseURL,f.url);function R(){if(k){var j="getAllResponseHeaders"in k?l(k.getAllResponseHeaders()):null;E(_,b,{data:x&&"text"!==x&&"json"!==x?k.response:k.responseText,status:k.status,statusText:k.statusText,headers:j,config:f,request:k}),k=null}}if(k.open(f.method.toUpperCase(),p(N,f.params,f.paramsSerializer),!0),k.timeout=f.timeout,"onloadend"in k?k.onloadend=R:k.onreadystatechange=function(){!k||4!==k.readyState||0===k.status&&(!k.responseURL||0!==k.responseURL.indexOf("file:"))||setTimeout(R)},k.onabort=function(){!k||(b(P("Request aborted",f,"ECONNABORTED",k)),k=null)},k.onerror=function(){b(P("Network Error",f,null,k)),k=null},k.ontimeout=function(){var W="timeout of "+f.timeout+"ms exceeded";f.timeoutErrorMessage&&(W=f.timeoutErrorMessage),b(P(W,f,f.transitional&&f.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",k)),k=null},s.isStandardBrowserEnv()){var M=(f.withCredentials||C(N))&&f.xsrfCookieName?d.read(f.xsrfCookieName):void 0;M&&(I[f.xsrfHeaderName]=M)}"setRequestHeader"in k&&s.forEach(I,function(W,$){void 0===m&&"content-type"===$.toLowerCase()?delete I[$]:k.setRequestHeader($,W)}),s.isUndefined(f.withCredentials)||(k.withCredentials=!!f.withCredentials),x&&"json"!==x&&(k.responseType=f.responseType),"function"==typeof f.onDownloadProgress&&k.addEventListener("progress",f.onDownloadProgress),"function"==typeof f.onUploadProgress&&k.upload&&k.upload.addEventListener("progress",f.onUploadProgress),f.cancelToken&&f.cancelToken.promise.then(function(W){!k||(k.abort(),b(W),k=null)}),m||(m=null),k.send(m)})}},5454:(K,u,c)=>{"use strict";var s=c(9471),E=c(1533),d=c(3227),p=c(4018);function l(P){var w=new d(P),f=E(d.prototype.request,w);return s.extend(f,d.prototype,w),s.extend(f,w),f}var C=l(c(2567));C.Axios=d,C.create=function(w){return l(p(C.defaults,w))},C.Cancel=c(8728),C.CancelToken=c(701),C.isCancel=c(2130),C.all=function(w){return Promise.all(w)},C.spread=c(8908),C.isAxiosError=c(9541),K.exports=C,K.exports.default=C},8728:K=>{"use strict";function u(c){this.message=c}u.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},u.prototype.__CANCEL__=!0,K.exports=u},701:(K,u,c)=>{"use strict";var s=c(8728);function E(d){if("function"!=typeof d)throw new TypeError("executor must be a function.");var p;this.promise=new Promise(function(C){p=C});var T=this;d(function(C){T.reason||(T.reason=new s(C),p(T.reason))})}E.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},E.source=function(){var p;return{token:new E(function(C){p=C}),cancel:p}},K.exports=E},2130:K=>{"use strict";K.exports=function(c){return!(!c||!c.__CANCEL__)}},3227:(K,u,c)=>{"use strict";var s=c(9471),E=c(7790),d=c(3976),p=c(6764),T=c(4018),l=c(3558),C=l.validators;function P(w){this.defaults=w,this.interceptors={request:new d,response:new d}}P.prototype.request=function(f){"string"==typeof f?(f=arguments[1]||{}).url=arguments[0]:f=f||{},(f=T(this.defaults,f)).method=f.method?f.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var g=f.transitional;void 0!==g&&l.assertOptions(g,{silentJSONParsing:C.transitional(C.boolean,"1.0.0"),forcedJSONParsing:C.transitional(C.boolean,"1.0.0"),clarifyTimeoutError:C.transitional(C.boolean,"1.0.0")},!1);var _=[],b=!0;this.interceptors.request.forEach(function(R){"function"==typeof R.runWhen&&!1===R.runWhen(f)||(b=b&&R.synchronous,_.unshift(R.fulfilled,R.rejected))});var I,m=[];if(this.interceptors.response.forEach(function(R){m.push(R.fulfilled,R.rejected)}),!b){var x=[p,void 0];for(Array.prototype.unshift.apply(x,_),x=x.concat(m),I=Promise.resolve(f);x.length;)I=I.then(x.shift(),x.shift());return I}for(var k=f;_.length;){var F=_.shift(),U=_.shift();try{k=F(k)}catch(N){U(N);break}}try{I=p(k)}catch(N){return Promise.reject(N)}for(;m.length;)I=I.then(m.shift(),m.shift());return I},P.prototype.getUri=function(f){return f=T(this.defaults,f),E(f.url,f.params,f.paramsSerializer).replace(/^\?/,"")},s.forEach(["delete","get","head","options"],function(f){P.prototype[f]=function(g,_){return this.request(T(_||{},{method:f,url:g,data:(_||{}).data}))}}),s.forEach(["post","put","patch"],function(f){P.prototype[f]=function(g,_,b){return this.request(T(b||{},{method:f,url:g,data:_}))}}),K.exports=P},3976:(K,u,c)=>{"use strict";var s=c(9471);function E(){this.handlers=[]}E.prototype.use=function(p,T,l){return this.handlers.push({fulfilled:p,rejected:T,synchronous:!!l&&l.synchronous,runWhen:l?l.runWhen:null}),this.handlers.length-1},E.prototype.eject=function(p){this.handlers[p]&&(this.handlers[p]=null)},E.prototype.forEach=function(p){s.forEach(this.handlers,function(l){null!==l&&p(l)})},K.exports=E},4634:(K,u,c)=>{"use strict";var s=c(5164),E=c(1540);K.exports=function(p,T){return p&&!s(T)?E(p,T):T}},5886:(K,u,c)=>{"use strict";var s=c(9570);K.exports=function(d,p,T,l,C){var P=new Error(d);return s(P,p,T,l,C)}},6764:(K,u,c)=>{"use strict";var s=c(9471),E=c(4284),d=c(2130),p=c(2567);function T(l){l.cancelToken&&l.cancelToken.throwIfRequested()}K.exports=function(C){return T(C),C.headers=C.headers||{},C.data=E.call(C,C.data,C.headers,C.transformRequest),C.headers=s.merge(C.headers.common||{},C.headers[C.method]||{},C.headers),s.forEach(["delete","get","head","post","put","patch","common"],function(f){delete C.headers[f]}),(C.adapter||p.adapter)(C).then(function(f){return T(C),f.data=E.call(C,f.data,f.headers,C.transformResponse),f},function(f){return d(f)||(T(C),f&&f.response&&(f.response.data=E.call(C,f.response.data,f.response.headers,C.transformResponse))),Promise.reject(f)})}},9570:K=>{"use strict";K.exports=function(c,s,E,d,p){return c.config=s,E&&(c.code=E),c.request=d,c.response=p,c.isAxiosError=!0,c.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},c}},4018:(K,u,c)=>{"use strict";var s=c(9471);K.exports=function(d,p){p=p||{};var T={},l=["url","method","data"],C=["headers","auth","proxy","params"],P=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],w=["validateStatus"];function f(m,I){return s.isPlainObject(m)&&s.isPlainObject(I)?s.merge(m,I):s.isPlainObject(I)?s.merge({},I):s.isArray(I)?I.slice():I}function g(m){s.isUndefined(p[m])?s.isUndefined(d[m])||(T[m]=f(void 0,d[m])):T[m]=f(d[m],p[m])}s.forEach(l,function(I){s.isUndefined(p[I])||(T[I]=f(void 0,p[I]))}),s.forEach(C,g),s.forEach(P,function(I){s.isUndefined(p[I])?s.isUndefined(d[I])||(T[I]=f(void 0,d[I])):T[I]=f(void 0,p[I])}),s.forEach(w,function(I){I in p?T[I]=f(d[I],p[I]):I in d&&(T[I]=f(void 0,d[I]))});var _=l.concat(C).concat(P).concat(w),b=Object.keys(d).concat(Object.keys(p)).filter(function(I){return-1===_.indexOf(I)});return s.forEach(b,g),T}},5650:(K,u,c)=>{"use strict";var s=c(5886);K.exports=function(d,p,T){var l=T.config.validateStatus;T.status&&l&&!l(T.status)?p(s("Request failed with status code "+T.status,T.config,null,T.request,T)):d(T)}},4284:(K,u,c)=>{"use strict";var s=c(9471),E=c(2567);K.exports=function(p,T,l){var C=this||E;return s.forEach(l,function(w){p=w.call(C,p,T)}),p}},2567:(K,u,c)=>{"use strict";var s=c(9471),E=c(2196),d=c(9570),p={"Content-Type":"application/x-www-form-urlencoded"};function T(w,f){!s.isUndefined(w)&&s.isUndefined(w["Content-Type"])&&(w["Content-Type"]=f)}var w,P={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(w=c(4054)),w),transformRequest:[function(f,g){return E(g,"Accept"),E(g,"Content-Type"),s.isFormData(f)||s.isArrayBuffer(f)||s.isBuffer(f)||s.isStream(f)||s.isFile(f)||s.isBlob(f)?f:s.isArrayBufferView(f)?f.buffer:s.isURLSearchParams(f)?(T(g,"application/x-www-form-urlencoded;charset=utf-8"),f.toString()):s.isObject(f)||g&&"application/json"===g["Content-Type"]?(T(g,"application/json"),function(w,f,g){if(s.isString(w))try{return(0,JSON.parse)(w),s.trim(w)}catch(_){if("SyntaxError"!==_.name)throw _}return(0,JSON.stringify)(w)}(f)):f}],transformResponse:[function(f){var g=this.transitional,m=!(g&&g.silentJSONParsing)&&"json"===this.responseType;if(m||g&&g.forcedJSONParsing&&s.isString(f)&&f.length)try{return JSON.parse(f)}catch(I){if(m)throw"SyntaxError"===I.name?d(I,this,"E_JSON_PARSE"):I}return f}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(f){return f>=200&&f<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};s.forEach(["delete","get","head"],function(f){P.headers[f]={}}),s.forEach(["post","put","patch"],function(f){P.headers[f]=s.merge(p)}),K.exports=P},1533:K=>{"use strict";K.exports=function(c,s){return function(){for(var d=new Array(arguments.length),p=0;p<d.length;p++)d[p]=arguments[p];return c.apply(s,d)}}},7790:(K,u,c)=>{"use strict";var s=c(9471);function E(d){return encodeURIComponent(d).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}K.exports=function(p,T,l){if(!T)return p;var C;if(l)C=l(T);else if(s.isURLSearchParams(T))C=T.toString();else{var P=[];s.forEach(T,function(g,_){null==g||(s.isArray(g)?_+="[]":g=[g],s.forEach(g,function(m){s.isDate(m)?m=m.toISOString():s.isObject(m)&&(m=JSON.stringify(m)),P.push(E(_)+"="+E(m))}))}),C=P.join("&")}if(C){var w=p.indexOf("#");-1!==w&&(p=p.slice(0,w)),p+=(-1===p.indexOf("?")?"?":"&")+C}return p}},1540:K=>{"use strict";K.exports=function(c,s){return s?c.replace(/\/+$/,"")+"/"+s.replace(/^\/+/,""):c}},300:(K,u,c)=>{"use strict";var s=c(9471);K.exports=s.isStandardBrowserEnv()?{write:function(p,T,l,C,P,w){var f=[];f.push(p+"="+encodeURIComponent(T)),s.isNumber(l)&&f.push("expires="+new Date(l).toGMTString()),s.isString(C)&&f.push("path="+C),s.isString(P)&&f.push("domain="+P),!0===w&&f.push("secure"),document.cookie=f.join("; ")},read:function(p){var T=document.cookie.match(new RegExp("(^|;\\s*)("+p+")=([^;]*)"));return T?decodeURIComponent(T[3]):null},remove:function(p){this.write(p,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},5164:K=>{"use strict";K.exports=function(c){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(c)}},9541:K=>{"use strict";K.exports=function(c){return"object"==typeof c&&!0===c.isAxiosError}},2984:(K,u,c)=>{"use strict";var s=c(9471);K.exports=s.isStandardBrowserEnv()?function(){var T,d=/(msie|trident)/i.test(navigator.userAgent),p=document.createElement("a");function l(C){var P=C;return d&&(p.setAttribute("href",P),P=p.href),p.setAttribute("href",P),{href:p.href,protocol:p.protocol?p.protocol.replace(/:$/,""):"",host:p.host,search:p.search?p.search.replace(/^\?/,""):"",hash:p.hash?p.hash.replace(/^#/,""):"",hostname:p.hostname,port:p.port,pathname:"/"===p.pathname.charAt(0)?p.pathname:"/"+p.pathname}}return T=l(window.location.href),function(P){var w=s.isString(P)?l(P):P;return w.protocol===T.protocol&&w.host===T.host}}():function(){return!0}},2196:(K,u,c)=>{"use strict";var s=c(9471);K.exports=function(d,p){s.forEach(d,function(l,C){C!==p&&C.toUpperCase()===p.toUpperCase()&&(d[p]=l,delete d[C])})}},1929:(K,u,c)=>{"use strict";var s=c(9471),E=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];K.exports=function(p){var l,C,P,T={};return p&&s.forEach(p.split("\n"),function(f){if(P=f.indexOf(":"),l=s.trim(f.substr(0,P)).toLowerCase(),C=s.trim(f.substr(P+1)),l){if(T[l]&&E.indexOf(l)>=0)return;T[l]="set-cookie"===l?(T[l]?T[l]:[]).concat([C]):T[l]?T[l]+", "+C:C}}),T}},8908:K=>{"use strict";K.exports=function(c){return function(E){return c.apply(null,E)}}},3558:(K,u,c)=>{"use strict";var s=c(8593),E={};["object","boolean","number","function","string","symbol"].forEach(function(C,P){E[C]=function(f){return typeof f===C||"a"+(P<1?"n ":" ")+C}});var d={},p=s.version.split(".");function T(C,P){for(var w=P?P.split("."):p,f=C.split("."),g=0;g<3;g++){if(w[g]>f[g])return!0;if(w[g]<f[g])return!1}return!1}E.transitional=function(P,w,f){var g=w&&T(w);function _(b,m){return"[Axios v"+s.version+"] Transitional option '"+b+"'"+m+(f?". "+f:"")}return function(b,m,I){if(!1===P)throw new Error(_(m," has been removed in "+w));return g&&!d[m]&&(d[m]=!0,console.warn(_(m," has been deprecated since v"+w+" and will be removed in the near future"))),!P||P(b,m,I)}},K.exports={isOlderVersion:T,assertOptions:function(C,P,w){if("object"!=typeof C)throw new TypeError("options must be an object");for(var f=Object.keys(C),g=f.length;g-- >0;){var _=f[g],b=P[_];if(b){var m=C[_],I=void 0===m||b(m,_,C);if(!0!==I)throw new TypeError("option "+_+" must be "+I)}else if(!0!==w)throw Error("Unknown option "+_)}},validators:E}},9471:(K,u,c)=>{"use strict";var s=c(1533),E=Object.prototype.toString;function d($){return"[object Array]"===E.call($)}function p($){return void 0===$}function g($){return null!==$&&"object"==typeof $}function _($){if("[object Object]"!==E.call($))return!1;var ce=Object.getPrototypeOf($);return null===ce||ce===Object.prototype}function x($){return"[object Function]"===E.call($)}function R($,ce){if(null!=$)if("object"!=typeof $&&($=[$]),d($))for(var Q=0,te=$.length;Q<te;Q++)ce.call(null,$[Q],Q,$);else for(var ae in $)Object.prototype.hasOwnProperty.call($,ae)&&ce.call(null,$[ae],ae,$)}K.exports={isArray:d,isArrayBuffer:function($){return"[object ArrayBuffer]"===E.call($)},isBuffer:function($){return null!==$&&!p($)&&null!==$.constructor&&!p($.constructor)&&"function"==typeof $.constructor.isBuffer&&$.constructor.isBuffer($)},isFormData:function($){return"undefined"!=typeof FormData&&$ instanceof FormData},isArrayBufferView:function($){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView($):$&&$.buffer&&$.buffer instanceof ArrayBuffer},isString:function($){return"string"==typeof $},isNumber:function($){return"number"==typeof $},isObject:g,isPlainObject:_,isUndefined:p,isDate:function($){return"[object Date]"===E.call($)},isFile:function($){return"[object File]"===E.call($)},isBlob:function($){return"[object Blob]"===E.call($)},isFunction:x,isStream:function($){return g($)&&x($.pipe)},isURLSearchParams:function($){return"undefined"!=typeof URLSearchParams&&$ instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:R,merge:function M(){var $={};function ce(ae,he){$[he]=_($[he])&&_(ae)?M($[he],ae):_(ae)?M({},ae):d(ae)?ae.slice():ae}for(var Q=0,te=arguments.length;Q<te;Q++)R(arguments[Q],ce);return $},extend:function($,ce,Q){return R(ce,function(ae,he){$[he]=Q&&"function"==typeof ae?s(ae,Q):ae}),$},trim:function($){return $.trim?$.trim():$.replace(/^\s+|\s+$/g,"")},stripBOM:function($){return 65279===$.charCodeAt(0)&&($=$.slice(1)),$}}},3105:K=>{"use strict";var s,u="object"==typeof Reflect?Reflect:null,c=u&&"function"==typeof u.apply?u.apply:function(N,R,M){return Function.prototype.apply.call(N,R,M)};s=u&&"function"==typeof u.ownKeys?u.ownKeys:Object.getOwnPropertySymbols?function(N){return Object.getOwnPropertyNames(N).concat(Object.getOwnPropertySymbols(N))}:function(N){return Object.getOwnPropertyNames(N)};var d=Number.isNaN||function(N){return N!=N};function p(){p.init.call(this)}K.exports=p,K.exports.once=function(U,N){return new Promise(function(R,M){function j($){U.removeListener(N,W),M($)}function W(){"function"==typeof U.removeListener&&U.removeListener("error",j),R([].slice.call(arguments))}F(U,N,W,{once:!0}),"error"!==N&&function(U,N,R){"function"==typeof U.on&&F(U,"error",N,{once:!0})}(U,j)})},p.EventEmitter=p,p.prototype._events=void 0,p.prototype._eventsCount=0,p.prototype._maxListeners=void 0;var T=10;function l(U){if("function"!=typeof U)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof U)}function C(U){return void 0===U._maxListeners?p.defaultMaxListeners:U._maxListeners}function P(U,N,R,M){var j,W,$;if(l(R),void 0===(W=U._events)?(W=U._events=Object.create(null),U._eventsCount=0):(void 0!==W.newListener&&(U.emit("newListener",N,R.listener?R.listener:R),W=U._events),$=W[N]),void 0===$)$=W[N]=R,++U._eventsCount;else if("function"==typeof $?$=W[N]=M?[R,$]:[$,R]:M?$.unshift(R):$.push(R),(j=C(U))>0&&$.length>j&&!$.warned){$.warned=!0;var ce=new Error("Possible EventEmitter memory leak detected. "+$.length+" "+String(N)+" listeners added. Use emitter.setMaxListeners() to increase limit");ce.name="MaxListenersExceededWarning",ce.emitter=U,ce.type=N,ce.count=$.length,function(U){console&&console.warn&&console.warn(U)}(ce)}return U}function w(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(U,N,R){var M={fired:!1,wrapFn:void 0,target:U,type:N,listener:R},j=w.bind(M);return j.listener=R,M.wrapFn=j,j}function g(U,N,R){var M=U._events;if(void 0===M)return[];var j=M[N];return void 0===j?[]:"function"==typeof j?R?[j.listener||j]:[j]:R?function(U){for(var N=new Array(U.length),R=0;R<N.length;++R)N[R]=U[R].listener||U[R];return N}(j):b(j,j.length)}function _(U){var N=this._events;if(void 0!==N){var R=N[U];if("function"==typeof R)return 1;if(void 0!==R)return R.length}return 0}function b(U,N){for(var R=new Array(N),M=0;M<N;++M)R[M]=U[M];return R}function F(U,N,R,M){if("function"==typeof U.on)M.once?U.once(N,R):U.on(N,R);else{if("function"!=typeof U.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof U);U.addEventListener(N,function j(W){M.once&&U.removeEventListener(N,j),R(W)})}}Object.defineProperty(p,"defaultMaxListeners",{enumerable:!0,get:function(){return T},set:function(U){if("number"!=typeof U||U<0||d(U))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+U+".");T=U}}),p.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},p.prototype.setMaxListeners=function(N){if("number"!=typeof N||N<0||d(N))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+N+".");return this._maxListeners=N,this},p.prototype.getMaxListeners=function(){return C(this)},p.prototype.emit=function(N){for(var R=[],M=1;M<arguments.length;M++)R.push(arguments[M]);var j="error"===N,W=this._events;if(void 0!==W)j=j&&void 0===W.error;else if(!j)return!1;if(j){var $;if(R.length>0&&($=R[0]),$ instanceof Error)throw $;var ce=new Error("Unhandled error."+($?" ("+$.message+")":""));throw ce.context=$,ce}var Q=W[N];if(void 0===Q)return!1;if("function"==typeof Q)c(Q,this,R);else{var te=Q.length,ae=b(Q,te);for(M=0;M<te;++M)c(ae[M],this,R)}return!0},p.prototype.on=p.prototype.addListener=function(N,R){return P(this,N,R,!1)},p.prototype.prependListener=function(N,R){return P(this,N,R,!0)},p.prototype.once=function(N,R){return l(R),this.on(N,f(this,N,R)),this},p.prototype.prependOnceListener=function(N,R){return l(R),this.prependListener(N,f(this,N,R)),this},p.prototype.off=p.prototype.removeListener=function(N,R){var M,j,W,$,ce;if(l(R),void 0===(j=this._events))return this;if(void 0===(M=j[N]))return this;if(M===R||M.listener===R)0==--this._eventsCount?this._events=Object.create(null):(delete j[N],j.removeListener&&this.emit("removeListener",N,M.listener||R));else if("function"!=typeof M){for(W=-1,$=M.length-1;$>=0;$--)if(M[$]===R||M[$].listener===R){ce=M[$].listener,W=$;break}if(W<0)return this;0===W?M.shift():function(U,N){for(;N+1<U.length;N++)U[N]=U[N+1];U.pop()}(M,W),1===M.length&&(j[N]=M[0]),void 0!==j.removeListener&&this.emit("removeListener",N,ce||R)}return this},p.prototype.removeAllListeners=function(N){var R,M,j;if(void 0===(M=this._events))return this;if(void 0===M.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==M[N]&&(0==--this._eventsCount?this._events=Object.create(null):delete M[N]),this;if(0===arguments.length){var $,W=Object.keys(M);for(j=0;j<W.length;++j)"removeListener"!==($=W[j])&&this.removeAllListeners($);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(R=M[N]))this.removeListener(N,R);else if(void 0!==R)for(j=R.length-1;j>=0;j--)this.removeListener(N,R[j]);return this},p.prototype.listeners=function(N){return g(this,N,!0)},p.prototype.rawListeners=function(N){return g(this,N,!1)},p.listenerCount=function(U,N){return"function"==typeof U.listenerCount?U.listenerCount(N):_.call(U,N)},p.prototype.listenerCount=_,p.prototype.eventNames=function(){return this._eventsCount>0?s(this._events):[]}},6099:K=>{function c(E){this.message=E}(c.prototype=new Error).name="InvalidCharacterError",K.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(E){var d=String(E).replace(/=+$/,"");if(d.length%4==1)throw new c("'atob' failed: The string to be decoded is not correctly encoded.");for(var T,l,p=0,C=0,P="";l=d.charAt(C++);~l&&(T=p%4?64*T+l:l,p++%4)?P+=String.fromCharCode(255&T>>(-2*p&6)):0)l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(l);return P}},4400:(K,u,c)=>{var s=c(6099);K.exports=function(d){var p=d.replace(/-/g,"+").replace(/_/g,"/");switch(p.length%4){case 0:break;case 2:p+="==";break;case 3:p+="=";break;default:throw"Illegal base64url string!"}try{return function(d){return decodeURIComponent(s(d).replace(/(.)/g,function(p,T){var l=T.charCodeAt(0).toString(16).toUpperCase();return l.length<2&&(l="0"+l),"%"+l}))}(p)}catch(T){return s(p)}}},4934:(K,u,c)=>{"use strict";var s=c(4400);function E(d){this.message=d}(E.prototype=new Error).name="InvalidTokenError",K.exports=function(d,p){if("string"!=typeof d)throw new E("Invalid token specified");var T=!0===(p=p||{}).header?0:1;try{return JSON.parse(s(d.split(".")[T]))}catch(l){throw new E("Invalid token specified: "+l.message)}},K.exports.InvalidTokenError=E},8228:K=>{"use strict";var u=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function E(p){if(null==p)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(p)}K.exports=function(){try{if(!Object.assign)return!1;var p=new String("abc");if(p[5]="de","5"===Object.getOwnPropertyNames(p)[0])return!1;for(var T={},l=0;l<10;l++)T["_"+String.fromCharCode(l)]=l;if("0123456789"!==Object.getOwnPropertyNames(T).map(function(w){return T[w]}).join(""))return!1;var P={};return"abcdefghijklmnopqrst".split("").forEach(function(w){P[w]=w}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},P)).join("")}catch(w){return!1}}()?Object.assign:function(p,T){for(var l,P,C=E(p),w=1;w<arguments.length;w++){for(var f in l=Object(arguments[w]))c.call(l,f)&&(C[f]=l[f]);if(u){P=u(l);for(var g=0;g<P.length;g++)s.call(l,P[g])&&(C[P[g]]=l[P[g]])}}return C}},5429:(K,u,c)=>{"use strict";var E=c(8228),d=60103;if("function"==typeof Symbol&&Symbol.for){var f=Symbol.for;d=f("react.element"),f("react.portal"),f("react.fragment"),f("react.strict_mode"),f("react.profiler"),f("react.provider"),f("react.context"),f("react.forward_ref"),f("react.suspense"),f("react.memo"),f("react.lazy")}"function"==typeof Symbol&&Symbol;function b(re){for(var J="https://reactjs.org/docs/error-decoder.html?invariant="+re,se=1;se<arguments.length;se++)J+="&args[]="+encodeURIComponent(arguments[se]);return"Minified React error #"+re+"; visit "+J+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I={};function x(re,J,se){this.props=re,this.context=J,this.refs=I,this.updater=se||m}function k(){}function F(re,J,se){this.props=re,this.context=J,this.refs=I,this.updater=se||m}x.prototype.isReactComponent={},x.prototype.setState=function(re,J){if("object"!=typeof re&&"function"!=typeof re&&null!=re)throw Error(b(85));this.updater.enqueueSetState(this,re,J,"setState")},x.prototype.forceUpdate=function(re){this.updater.enqueueForceUpdate(this,re,"forceUpdate")},k.prototype=x.prototype;var U=F.prototype=new k;U.constructor=F,E(U,x.prototype),U.isPureReactComponent=!0;var N_current=null,R=Object.prototype.hasOwnProperty,M={key:!0,ref:!0,__self:!0,__source:!0};u.createElement=function(re,J,se){var me,ee={},le=null,Ce=null;if(null!=J)for(me in void 0!==J.ref&&(Ce=J.ref),void 0!==J.key&&(le=""+J.key),J)R.call(J,me)&&!M.hasOwnProperty(me)&&(ee[me]=J[me]);var ye=arguments.length-2;if(1===ye)ee.children=se;else if(1<ye){for(var ge=Array(ye),Ee=0;Ee<ye;Ee++)ge[Ee]=arguments[Ee+2];ee.children=ge}if(re&&re.defaultProps)for(me in ye=re.defaultProps)void 0===ee[me]&&(ee[me]=ye[me]);return{$$typeof:d,type:re,key:le,ref:Ce,props:ee,_owner:N_current}}},8139:(K,u,c)=>{"use strict";K.exports=c(5429)},7941:K=>{var u=function(c){"use strict";var d,s=Object.prototype,E=s.hasOwnProperty,p="function"==typeof Symbol?Symbol:{},T=p.iterator||"@@iterator",l=p.asyncIterator||"@@asyncIterator",C=p.toStringTag||"@@toStringTag";function P(oe,ne,pe){return Object.defineProperty(oe,ne,{value:pe,enumerable:!0,configurable:!0,writable:!0}),oe[ne]}try{P({},"")}catch(oe){P=function(ne,pe,re){return ne[pe]=re}}function w(oe,ne,pe,re){var se=Object.create((ne&&ne.prototype instanceof x?ne:x).prototype),me=new ae(re||[]);return se._invoke=function(oe,ne,pe){var re=g;return function(se,me){if(re===b)throw new Error("Generator is already running");if(re===m){if("throw"===se)throw me;return Se()}for(pe.method=se,pe.arg=me;;){var ee=pe.delegate;if(ee){var le=ce(ee,pe);if(le){if(le===I)continue;return le}}if("next"===pe.method)pe.sent=pe._sent=pe.arg;else if("throw"===pe.method){if(re===g)throw re=m,pe.arg;pe.dispatchException(pe.arg)}else"return"===pe.method&&pe.abrupt("return",pe.arg);re=b;var Ce=f(oe,ne,pe);if("normal"===Ce.type){if(re=pe.done?m:_,Ce.arg===I)continue;return{value:Ce.arg,done:pe.done}}"throw"===Ce.type&&(re=m,pe.method="throw",pe.arg=Ce.arg)}}}(oe,pe,me),se}function f(oe,ne,pe){try{return{type:"normal",arg:oe.call(ne,pe)}}catch(re){return{type:"throw",arg:re}}}c.wrap=w;var g="suspendedStart",_="suspendedYield",b="executing",m="completed",I={};function x(){}function k(){}function F(){}var U={};P(U,T,function(){return this});var N=Object.getPrototypeOf,R=N&&N(N(he([])));R&&R!==s&&E.call(R,T)&&(U=R);var M=F.prototype=x.prototype=Object.create(U);function j(oe){["next","throw","return"].forEach(function(ne){P(oe,ne,function(pe){return this._invoke(ne,pe)})})}function W(oe,ne){function pe(se,me,ee,le){var Ce=f(oe[se],oe,me);if("throw"!==Ce.type){var ye=Ce.arg,ge=ye.value;return ge&&"object"==typeof ge&&E.call(ge,"__await")?ne.resolve(ge.__await).then(function(Ee){pe("next",Ee,ee,le)},function(Ee){pe("throw",Ee,ee,le)}):ne.resolve(ge).then(function(Ee){ye.value=Ee,ee(ye)},function(Ee){return pe("throw",Ee,ee,le)})}le(Ce.arg)}var re;this._invoke=function(se,me){function ee(){return new ne(function(le,Ce){pe(se,me,le,Ce)})}return re=re?re.then(ee,ee):ee()}}function ce(oe,ne){var pe=oe.iterator[ne.method];if(pe===d){if(ne.delegate=null,"throw"===ne.method){if(oe.iterator.return&&(ne.method="return",ne.arg=d,ce(oe,ne),"throw"===ne.method))return I;ne.method="throw",ne.arg=new TypeError("The iterator does not provide a 'throw' method")}return I}var re=f(pe,oe.iterator,ne.arg);if("throw"===re.type)return ne.method="throw",ne.arg=re.arg,ne.delegate=null,I;var J=re.arg;return J?J.done?(ne[oe.resultName]=J.value,ne.next=oe.nextLoc,"return"!==ne.method&&(ne.method="next",ne.arg=d),ne.delegate=null,I):J:(ne.method="throw",ne.arg=new TypeError("iterator result is not an object"),ne.delegate=null,I)}function Q(oe){var ne={tryLoc:oe[0]};1 in oe&&(ne.catchLoc=oe[1]),2 in oe&&(ne.finallyLoc=oe[2],ne.afterLoc=oe[3]),this.tryEntries.push(ne)}function te(oe){var ne=oe.completion||{};ne.type="normal",delete ne.arg,oe.completion=ne}function ae(oe){this.tryEntries=[{tryLoc:"root"}],oe.forEach(Q,this),this.reset(!0)}function he(oe){if(oe){var ne=oe[T];if(ne)return ne.call(oe);if("function"==typeof oe.next)return oe;if(!isNaN(oe.length)){var pe=-1,re=function J(){for(;++pe<oe.length;)if(E.call(oe,pe))return J.value=oe[pe],J.done=!1,J;return J.value=d,J.done=!0,J};return re.next=re}}return{next:Se}}function Se(){return{value:d,done:!0}}return k.prototype=F,P(M,"constructor",F),P(F,"constructor",k),k.displayName=P(F,C,"GeneratorFunction"),c.isGeneratorFunction=function(oe){var ne="function"==typeof oe&&oe.constructor;return!!ne&&(ne===k||"GeneratorFunction"===(ne.displayName||ne.name))},c.mark=function(oe){return Object.setPrototypeOf?Object.setPrototypeOf(oe,F):(oe.__proto__=F,P(oe,C,"GeneratorFunction")),oe.prototype=Object.create(M),oe},c.awrap=function(oe){return{__await:oe}},j(W.prototype),P(W.prototype,l,function(){return this}),c.AsyncIterator=W,c.async=function(oe,ne,pe,re,J){void 0===J&&(J=Promise);var se=new W(w(oe,ne,pe,re),J);return c.isGeneratorFunction(ne)?se:se.next().then(function(me){return me.done?me.value:se.next()})},j(M),P(M,C,"Generator"),P(M,T,function(){return this}),P(M,"toString",function(){return"[object Generator]"}),c.keys=function(oe){var ne=[];for(var pe in oe)ne.push(pe);return ne.reverse(),function re(){for(;ne.length;){var J=ne.pop();if(J in oe)return re.value=J,re.done=!1,re}return re.done=!0,re}},c.values=he,ae.prototype={constructor:ae,reset:function(oe){if(this.prev=0,this.next=0,this.sent=this._sent=d,this.done=!1,this.delegate=null,this.method="next",this.arg=d,this.tryEntries.forEach(te),!oe)for(var ne in this)"t"===ne.charAt(0)&&E.call(this,ne)&&!isNaN(+ne.slice(1))&&(this[ne]=d)},stop:function(){this.done=!0;var ne=this.tryEntries[0].completion;if("throw"===ne.type)throw ne.arg;return this.rval},dispatchException:function(oe){if(this.done)throw oe;var ne=this;function pe(le,Ce){return se.type="throw",se.arg=oe,ne.next=le,Ce&&(ne.method="next",ne.arg=d),!!Ce}for(var re=this.tryEntries.length-1;re>=0;--re){var J=this.tryEntries[re],se=J.completion;if("root"===J.tryLoc)return pe("end");if(J.tryLoc<=this.prev){var me=E.call(J,"catchLoc"),ee=E.call(J,"finallyLoc");if(me&&ee){if(this.prev<J.catchLoc)return pe(J.catchLoc,!0);if(this.prev<J.finallyLoc)return pe(J.finallyLoc)}else if(me){if(this.prev<J.catchLoc)return pe(J.catchLoc,!0)}else{if(!ee)throw new Error("try statement without catch or finally");if(this.prev<J.finallyLoc)return pe(J.finallyLoc)}}}},abrupt:function(oe,ne){for(var pe=this.tryEntries.length-1;pe>=0;--pe){var re=this.tryEntries[pe];if(re.tryLoc<=this.prev&&E.call(re,"finallyLoc")&&this.prev<re.finallyLoc){var J=re;break}}J&&("break"===oe||"continue"===oe)&&J.tryLoc<=ne&&ne<=J.finallyLoc&&(J=null);var se=J?J.completion:{};return se.type=oe,se.arg=ne,J?(this.method="next",this.next=J.finallyLoc,I):this.complete(se)},complete:function(oe,ne){if("throw"===oe.type)throw oe.arg;return"break"===oe.type||"continue"===oe.type?this.next=oe.arg:"return"===oe.type?(this.rval=this.arg=oe.arg,this.method="return",this.next="end"):"normal"===oe.type&&ne&&(this.next=ne),I},finish:function(oe){for(var ne=this.tryEntries.length-1;ne>=0;--ne){var pe=this.tryEntries[ne];if(pe.finallyLoc===oe)return this.complete(pe.completion,pe.afterLoc),te(pe),I}},catch:function(oe){for(var ne=this.tryEntries.length-1;ne>=0;--ne){var pe=this.tryEntries[ne];if(pe.tryLoc===oe){var re=pe.completion;if("throw"===re.type){var J=re.arg;te(pe)}return J}}throw new Error("illegal catch attempt")},delegateYield:function(oe,ne,pe){return this.delegate={iterator:he(oe),resultName:ne,nextLoc:pe},"next"===this.method&&(this.arg=d),I}},c}(K.exports);try{regeneratorRuntime=u}catch(c){"object"==typeof globalThis?globalThis.regeneratorRuntime=u:Function("r","regeneratorRuntime = r")(u)}},8952:(K,u,c)=>{"use strict";function s(t){return"function"==typeof t}let E=!1;const d={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else E&&console.log("RxJS: Back to a better error behavior. Thank you. <3");E=t},get useDeprecatedSynchronousErrorHandling(){return E}};function p(t){setTimeout(()=>{throw t},0)}const T={closed:!0,next(t){},error(t){if(d.useDeprecatedSynchronousErrorHandling)throw t;p(t)},complete(){}},l=Array.isArray||(t=>t&&"number"==typeof t.length);function C(t){return null!==t&&"object"==typeof t}const w=(()=>{function t(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return t.prototype=Object.create(Error.prototype),t})();class f{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:r,_unsubscribe:i,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof f)n.remove(this);else if(null!==n)for(let a=0;a<n.length;++a)n[a].remove(this);if(s(i)){r&&(this._unsubscribe=void 0);try{i.call(this)}catch(a){e=a instanceof w?g(a.errors):[a]}}if(l(o)){let a=-1,h=o.length;for(;++a<h;){const A=o[a];if(C(A))try{A.unsubscribe()}catch(V){e=e||[],V instanceof w?e=e.concat(g(V.errors)):e.push(V)}}}if(e)throw new w(e)}add(e){let n=e;if(!e)return f.EMPTY;switch(typeof e){case"function":n=new f(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof f)){const o=n;n=new f,n._subscriptions=[o]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof f){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(e){const n=this._subscriptions;if(n){const r=n.indexOf(e);-1!==r&&n.splice(r,1)}}}var t;function g(t){return t.reduce((e,n)=>e.concat(n instanceof w?n.errors:n),[])}f.EMPTY=((t=new f).closed=!0,t);const _="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class m extends f{constructor(e,n,r){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=T;break;case 1:if(!e){this.destination=T;break}if("object"==typeof e){e instanceof m?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new I(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new I(this,e,n,r)}}[_](){return this}static create(e,n,r){const i=new m(e,n,r);return i.syncErrorThrowable=!1,i}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class I extends m{constructor(e,n,r,i){super(),this._parentSubscriber=e;let o,a=this;s(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==T&&(a=Object.create(n),s(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=r,this._complete=i}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:n}=this;d.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:n}=this,{useDeprecatedSynchronousErrorHandling:r}=d;if(this._error)r&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(n.syncErrorThrowable)r?(n.syncErrorValue=e,n.syncErrorThrown=!0):p(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;p(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const n=()=>this._complete.call(this._context);d.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,n){try{e.call(this._context,n)}catch(r){if(this.unsubscribe(),d.useDeprecatedSynchronousErrorHandling)throw r;p(r)}}__tryOrSetError(e,n,r){if(!d.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,r)}catch(i){return d.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(p(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const F="function"==typeof Symbol&&Symbol.observable||"@@observable";function U(t){return t}let M=(()=>{class t{constructor(n){this._isScalar=!1,n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const{operator:o}=this,a=function(t,e,n){if(t){if(t instanceof m)return t;if(t[_])return t[_]()}return t||e||n?new m(t,e,n):new m(T)}(n,r,i);if(a.add(o?o.call(a,this.source):this.source||d.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),d.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(n){try{return this._subscribe(n)}catch(r){d.useDeprecatedSynchronousErrorHandling&&(n.syncErrorThrown=!0,n.syncErrorValue=r),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof m?n:null}return!0}(n)?n.error(r):console.warn(r)}}forEach(n,r){return new(r=j(r))((i,o)=>{let a;a=this.subscribe(h=>{try{n(h)}catch(A){o(A),a&&a.unsubscribe()}},o,i)})}_subscribe(n){const{source:r}=this;return r&&r.subscribe(n)}[F](){return this}pipe(...n){return 0===n.length?this:function(t){return 0===t.length?U:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=j(n))((r,i)=>{let o;this.subscribe(a=>o=a,a=>i(a),()=>r(o))})}}return t.create=e=>new t(e),t})();function j(t){if(t||(t=d.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const $=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class ce extends f{constructor(e,n){super(),this.subject=e,this.subscriber=n,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,n=e.observers;if(this.subject=null,!n||0===n.length||e.isStopped||e.closed)return;const r=n.indexOf(this.subscriber);-1!==r&&n.splice(r,1)}}class Q extends m{constructor(e){super(e),this.destination=e}}let te=(()=>{class t extends M{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[_](){return new Q(this)}lift(n){const r=new ae(this,this);return r.operator=n,r}next(n){if(this.closed)throw new $;if(!this.isStopped){const{observers:r}=this,i=r.length,o=r.slice();for(let a=0;a<i;a++)o[a].next(n)}}error(n){if(this.closed)throw new $;this.hasError=!0,this.thrownError=n,this.isStopped=!0;const{observers:r}=this,i=r.length,o=r.slice();for(let a=0;a<i;a++)o[a].error(n);this.observers.length=0}complete(){if(this.closed)throw new $;this.isStopped=!0;const{observers:n}=this,r=n.length,i=n.slice();for(let o=0;o<r;o++)i[o].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(n){if(this.closed)throw new $;return super._trySubscribe(n)}_subscribe(n){if(this.closed)throw new $;return this.hasError?(n.error(this.thrownError),f.EMPTY):this.isStopped?(n.complete(),f.EMPTY):(this.observers.push(n),new ce(this,n))}asObservable(){const n=new M;return n.source=this,n}}return t.create=(e,n)=>new ae(e,n),t})();class ae extends te{constructor(e,n){super(),this.destination=e,this.source=n}next(e){const{destination:n}=this;n&&n.next&&n.next(e)}error(e){const{destination:n}=this;n&&n.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:n}=this;return n?this.source.subscribe(e):f.EMPTY}}function he(t){return t&&"function"==typeof t.schedule}function Se(t,e){return function(r){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new oe(t,e))}}class oe{constructor(e,n){this.project=e,this.thisArg=n}call(e,n){return n.subscribe(new ne(e,this.project,this.thisArg))}}class ne extends m{constructor(e,n,r){super(e),this.project=n,this.count=0,this.thisArg=r||this}_next(e){let n;try{n=this.project.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(n)}}const pe=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()},se="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",Ce=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function ye(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const ge=t=>{if(t&&"function"==typeof t[F])return(t=>e=>{const n=t[F]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)})(t);if(Ce(t))return pe(t);if(ye(t))return(t=>e=>(t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,p),e))(t);if(t&&"function"==typeof t[se])return(t=>e=>{const n=t[se]();for(;;){let r;try{r=n.next()}catch(i){return e.error(i),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e})(t);{const n=`You provided ${C(t)?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(n)}};function Fe(t,e){return new M(n=>{const r=new f;let i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}function $e(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[F]}(t))return function(t,e){return new M(n=>{const r=new f;return r.add(e.schedule(()=>{const i=t[F]();r.add(i.subscribe({next(o){r.add(e.schedule(()=>n.next(o)))},error(o){r.add(e.schedule(()=>n.error(o)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(ye(t))return function(t,e){return new M(n=>{const r=new f;return r.add(e.schedule(()=>t.then(i=>{r.add(e.schedule(()=>{n.next(i),r.add(e.schedule(()=>n.complete()))}))},i=>{r.add(e.schedule(()=>n.error(i)))}))),r})}(t,e);if(Ce(t))return Fe(t,e);if(function(t){return t&&"function"==typeof t[se]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new M(n=>{const r=new f;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[se](),r.add(e.schedule(function(){if(n.closed)return;let o,a;try{const h=i.next();o=h.value,a=h.done}catch(h){return void n.error(h)}a?n.complete():(n.next(o),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof M?t:new M(ge(t))}class Je extends m{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class je extends m{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function Ht(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(Ht((i,o)=>$e(t(i,o)).pipe(Se((a,h)=>e(i,a,o,h))),n)):("number"==typeof e&&(n=e),r=>r.lift(new on(t,n)))}class on{constructor(e,n=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=n}call(e,n){return n.subscribe(new wn(e,this.project,this.concurrent))}}class wn extends je{constructor(e,n,r=Number.POSITIVE_INFINITY){super(e),this.project=n,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let n;const r=this.index++;try{n=this.project(e,r)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(n)}_innerSub(e){const n=new Je(this),r=this.destination;r.add(n);const i=function(t,e){if(e.closed)return;if(t instanceof M)return t.subscribe(e);let n;try{n=ge(t)(e)}catch(r){e.error(r)}return n}(e,n);i!==n&&r.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Le(t=Number.POSITIVE_INFINITY){return Ht(U,t)}function ze(t,e){return e?Fe(t,e):new M(pe(t))}function Et(){return function(e){return e.lift(new At(e))}}class At{constructor(e){this.connectable=e}call(e,n){const{connectable:r}=this;r._refCount++;const i=new Mt(e,r),o=n.subscribe(i);return i.closed||(i.connection=r.connect()),o}}class Mt extends m{constructor(e,n){super(e),this.connectable=n}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const n=e._refCount;if(n<=0)return void(this.connection=null);if(e._refCount=n-1,n>1)return void(this.connection=null);const{connection:r}=this,i=e._connection;this.connection=null,i&&(!r||i===r)&&i.unsubscribe()}}class nn extends M{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new f,e.add(this.source.subscribe(new xt(this.getSubject(),this))),e.closed&&(this._connection=null,e=f.EMPTY)),e}refCount(){return Et()(this)}}const kr=(()=>{const t=nn.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class xt extends Q{constructor(e,n){super(e),this.connectable=n}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const n=e._connection;e._refCount=0,e._subject=null,e._connection=null,n&&n.unsubscribe()}}}function Xs(){return new te}function qt(t){for(let e in t)if(t[e]===qt)return e;throw Error("Could not find renamed property on target object.")}function It(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(It).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function ls(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const fu=qt({__forward_ref__:qt});function ds(t){return t.__forward_ref__=ds,t.toString=function(){return It(this())},t}function at(t){return function(t){return"function"==typeof t&&t.hasOwnProperty(fu)&&t.__forward_ref__===ds}(t)?t():t}class _r extends Error{constructor(e,n){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(e,n)),this.code=e}}function Mn(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():function(t){return"string"==typeof t?t:null==t?"":String(t)}(t)}function ai(t,e){const n=e?` in ${e}`:"";throw new _r("201",`No provider for ${Mn(t)} found${n}`)}function pn(t,e){null==t&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function Ft(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function zr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Lr(t){return gs(t,Fi)||gs(t,ys)}function gs(t,e){return t.hasOwnProperty(e)?t[e]:null}function ms(t){return t&&(t.hasOwnProperty(Lo)||t.hasOwnProperty(Cu))?t[Lo]:null}const Fi=qt({\u0275prov:qt}),Lo=qt({\u0275inj:qt}),ys=qt({ngInjectableDef:qt}),Cu=qt({ngInjectorDef:qt});var rt=(()=>((rt=rt||{})[rt.Default=0]="Default",rt[rt.Host=1]="Host",rt[rt.Self=2]="Self",rt[rt.SkipSelf=4]="SkipSelf",rt[rt.Optional=8]="Optional",rt))();let po;function wr(t){const e=po;return po=t,e}function Ui(t,e,n){const r=Lr(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&rt.Optional?null:void 0!==e?e:void ai(It(t),"Injector")}function Jn(t){return{toString:t}.toString()}var qn=(()=>((qn=qn||{})[qn.OnPush=0]="OnPush",qn[qn.Default=1]="Default",qn))(),sn=(()=>((sn=sn||{})[sn.Emulated=0]="Emulated",sn[sn.None=2]="None",sn[sn.ShadowDom=3]="ShadowDom",sn))();const Cs="undefined"!=typeof globalThis&&globalThis,Vi="undefined"!=typeof window&&window,Fo="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Wc="undefined"!=typeof global&&global,Rt=Cs||Wc||Vi||Fo,Ur={},$t=[],Kr=qt({\u0275cmp:qt}),li=qt({\u0275dir:qt}),Ts=qt({\u0275pipe:qt}),bs=qt({\u0275mod:qt}),bu=qt({\u0275loc:qt}),Vr=qt({\u0275fac:qt}),di=qt({__NG_ELEMENT_ID__:qt});let Bi=0;function ji(t){return Jn(()=>{const n={},r={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===qn.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||$t,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||sn.Emulated,id:"c",styles:t.styles||$t,_:null,setInput:null,schemas:t.schemas||null,tView:null},i=t.directives,o=t.features,a=t.pipes;return r.id+=Bi++,r.inputs=hi(t.inputs,n),r.outputs=hi(t.outputs),o&&o.forEach(h=>h(r)),r.directiveDefs=i?()=>("function"==typeof i?i():i).map(Uo):null,r.pipeDefs=a?()=>("function"==typeof a?a():a).map(Vo):null,r})}function Uo(t){return gn(t)||function(t){return t[li]||null}(t)}function Vo(t){return function(t){return t[Ts]||null}(t)}const fi={};function Sr(t){return Jn(()=>{const e={type:t.type,bootstrap:t.bootstrap||$t,declarations:t.declarations||$t,imports:t.imports||$t,exports:t.exports||$t,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(fi[t.id]=t.type),e})}function hi(t,e){if(null==t)return Ur;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const Fn=ji;function gn(t){return t[Kr]||null}function ar(t,e){const n=t[bs]||null;if(!n&&!0===e)throw new Error(`Type ${It(t)} does not have '\u0275mod' property.`);return n}function gr(t){return Array.isArray(t)&&"object"==typeof t[1]}function mr(t){return Array.isArray(t)&&!0===t[1]}function Es(t){return 0!=(8&t.flags)}function mo(t){return 2==(2&t.flags)}function yo(t){return 1==(1&t.flags)}function ur(t){return null!==t.template}function sa(t){return 0!=(512&t[2])}function yi(t,e){return t.hasOwnProperty(Vr)?t[Vr]:null}class vi{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Ru(t){return t.type.prototype.ngOnChanges&&(t.setInput=Du),Is}function Is(){const t=cn(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===Ur)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Du(t,e,n,r){const i=cn(t)||function(t,e){return t[Pu]=e}(t,{previous:Ur,current:null}),o=i.current||(i.current={}),a=i.previous,h=this.declaredInputs[n],A=a[h];o[h]=new vi(A&&A.currentValue,e,a===Ur),t[r]=e}const Pu="__ngSimpleChanges__";function cn(t){return t[Pu]||null}let Rs;function yn(t){return!!t.listen}const fa={createRenderer:(t,e)=>void 0!==Rs?Rs:"undefined"!=typeof document?document:void 0};function vn(t){for(;Array.isArray(t);)t=t[0];return t}function zn(t,e){return vn(e[t.index])}function $o(t,e){return t.data[e]}function Xn(t,e){const n=e[t];return gr(n)?n:n[0]}function Wo(t){return 128==(128&t[2])}function Ar(t,e){return null==e?null:t[e]}function xu(t){t[18]=0}function Ci(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Ct={lFrame:Pn(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Lu(){return Ct.bindingsEnabled}function qe(){return Ct.lFrame.lView}function gt(){return Ct.lFrame.tView}function Hr(t){return Ct.lFrame.contextLView=t,t[8]}function Cn(){let t=Ms();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ms(){return Ct.lFrame.currentTNode}function cr(t,e){const n=Ct.lFrame;n.currentTNode=t,n.isParent=e}function ma(){return Ct.lFrame.isParent}function H(){return Ct.isInCheckNoChangesMode}function z(t){Ct.isInCheckNoChangesMode=t}function Ge(t,e){const n=Ct.lFrame;n.bindingIndex=n.bindingRootIndex=t,nt(e)}function nt(t){Ct.lFrame.currentDirectiveIndex=t}function it(t){Ct.lFrame.currentQueryIndex=t}function yt(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function Gt(t,e,n){if(n&rt.SkipSelf){let i=e,o=t;for(;!(i=i.parent,null!==i||n&rt.Host||(i=yt(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;e=i,t=o}const r=Ct.lFrame=Sn();return r.currentTNode=e,r.lView=t,!0}function ln(t){const e=Sn(),n=t[1];Ct.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Sn(){const t=Ct.lFrame,e=null===t?null:t.child;return null===e?Pn(t):e}function Pn(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function In(){const t=Ct.lFrame;return Ct.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Tn=In;function An(){const t=In();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Zt(){return Ct.lFrame.selectedIndex}function Nt(t){Ct.lFrame.selectedIndex=t}function kn(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:h,ngAfterViewInit:A,ngAfterViewChecked:V,ngOnDestroy:q}=o;a&&(t.contentHooks||(t.contentHooks=[])).push(-n,a),h&&((t.contentHooks||(t.contentHooks=[])).push(n,h),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,h)),A&&(t.viewHooks||(t.viewHooks=[])).push(-n,A),V&&((t.viewHooks||(t.viewHooks=[])).push(n,V),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,V)),null!=q&&(t.destroyHooks||(t.destroyHooks=[])).push(n,q)}}function To(t,e,n){Ko(t,e,3,n)}function zo(t,e,n,r){(3&t[2])===n&&Ko(t,e,n,r)}function Ti(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Ko(t,e,n,r){const o=null!=r?r:-1,a=e.length-1;let h=0;for(let A=void 0!==r?65535&t[18]:0;A<a;A++)if("number"==typeof e[A+1]){if(h=e[A],null!=r&&h>=r)break}else e[A]<0&&(t[18]+=65536),(h<o||-1==o)&&(bo(t,n,e,A),t[18]=(4294901760&t[18])+A+2),A++}function bo(t,e,n,r){const i=n[r]<0,o=n[r+1],h=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(h)}finally{}}}else try{o.call(h)}finally{}}class Xi{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function ya(t,e,n){const r=yn(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const a=n[i++],h=n[i++],A=n[i++];r?t.setAttribute(e,h,A,a):e.setAttributeNS(a,h,A)}else{const a=o,h=n[++i];Bu(a)?r&&t.setProperty(e,a,h):r?t.setAttribute(e,a,h):e.setAttribute(a,h),i++}}return i}function nl(t){return 3===t||4===t||6===t}function Bu(t){return 64===t.charCodeAt(0)}function va(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||rl(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function rl(t,e,n,r,i){let o=0,a=t.length;if(-1===e)a=-1;else for(;o<t.length;){const h=t[o++];if("number"==typeof h){if(h===e){a=-1;break}if(h>e){a=o-1;break}}}for(;o<t.length;){const h=t[o];if("number"==typeof h)break;if(h===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==a&&(t.splice(a,0,e),o=a+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function il(t){return-1!==t}function Jo(t){return 32767&t}function Yo(t,e){let n=function(t){return t>>16}(t),r=e;for(;n>0;)r=r[15],n--;return r}let ju=!0;function Ca(t){const e=ju;return ju=t,e}let xd=0;function Ns(t,e){const n=Hu(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Xo(r.data,t),Xo(e,null),Xo(r.blueprint,null));const i=Ta(t,e),o=t.injectorIndex;if(il(i)){const a=Jo(i),h=Yo(i,e),A=h[1].data;for(let V=0;V<8;V++)e[o+V]=h[a+V]|A[a+V]}return e[o+8]=i,o}function Xo(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Hu(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Ta(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const o=i[1],a=o.type;if(r=2===a?o.declTNode:1===a?i[6]:null,null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function ba(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(di)&&(r=n[di]),null==r&&(r=n[di]=xd++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function al(t,e,n){if(n&rt.Optional)return t;ai(e,"NodeInjector")}function ul(t,e,n,r){if(n&rt.Optional&&void 0===r&&(r=null),0==(n&(rt.Self|rt.Host))){const i=t[9],o=wr(void 0);try{return i?i.get(e,r,n&rt.Optional):Ui(e,r,n&rt.Optional)}finally{wr(o)}}return al(r,e,n)}function cl(t,e,n,r=rt.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(di)?t[di]:void 0;return"number"==typeof e?e>=0?255&e:ll:e}(n);if("function"==typeof o){if(!Gt(e,t,r))return r&rt.Host?al(i,n,r):ul(e,n,r,i);try{const a=o(r);if(null!=a||r&rt.Optional)return a;ai(n)}finally{Tn()}}else if("number"==typeof o){let a=null,h=Hu(t,e),A=-1,V=r&rt.Host?e[16][6]:null;for((-1===h||r&rt.SkipSelf)&&(A=-1===h?Ta(t,e):e[h+8],-1!==A&&D(r,!1)?(a=e[1],h=Jo(A),e=Yo(A,e)):h=-1);-1!==h;){const q=e[1];if(y(o,h,q.data)){const Y=Ud(h,e,n,a,r,V);if(Y!==qu)return Y}A=e[h+8],-1!==A&&D(r,e[1].data[h+8]===V)&&y(o,h,e)?(a=q,h=Jo(A),e=Yo(A,e)):h=-1}}}return ul(e,n,r,i)}const qu={};function ll(){return new B(Cn(),qe())}function Ud(t,e,n,r,i,o){const a=e[1],h=a.data[t+8],q=function(t,e,n,r,i){const o=t.providerIndexes,a=e.data,h=1048575&o,A=t.directiveStart,q=o>>20,ie=i?h+q:t.directiveEnd;for(let de=r?h:h+q;de<ie;de++){const Te=a[de];if(de<A&&n===Te||de>=A&&Te.type===n)return de}if(i){const de=a[A];if(de&&ur(de)&&de.type===n)return A}return null}(h,a,n,null==r?mo(h)&&ju:r!=a&&0!=(3&h.type),i&rt.Host&&o===h);return null!==q?xs(e,a,q,h):qu}function xs(t,e,n,r){let i=t[n];const o=e.data;if(function(t){return t instanceof Xi}(i)){const a=i;a.resolving&&function(t,e){throw new _r("200",`Circular dependency in DI detected for ${t}`)}(Mn(o[n]));const h=Ca(a.canSeeViewProviders);a.resolving=!0;const A=a.injectImpl?wr(a.injectImpl):null;Gt(t,r,rt.Default);try{i=t[n]=a.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const a=Ru(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,a),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,a)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==A&&wr(A),Ca(h),a.resolving=!1,Tn()}}return i}function y(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function D(t,e){return!(t&rt.Self||t&rt.Host&&e)}class B{constructor(e,n){this._tNode=e,this._lView=n}get(e,n){return cl(this._tNode,this._lView,e,void 0,n)}}const Pe="__parameters__";function st(t,e,n){return Jn(()=>{const r=function(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const a=new i(...o);return h.annotation=a,h;function h(A,V,q){const Y=A.hasOwnProperty(Pe)?A[Pe]:Object.defineProperty(A,Pe,{value:[]})[Pe];for(;Y.length<=q;)Y.push(null);return(Y[q]=Y[q]||[]).push(a),A}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class ut{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Ft({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}function Zi(t,e){t.forEach(n=>Array.isArray(n)?Zi(n,e):e(n))}function fl(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Fs(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const zu={},Hd="__NG_DI_FLAG__",wa="ngTempTokenPath",wT=/\n/gm,qd="__source",Gd=qt({provide:String,useValue:qt});let Ku;function Sa(t){const e=Ku;return Ku=t,e}function IT(t,e=rt.Default){if(void 0===Ku)throw new Error("inject() must be called from an injection context");return null===Ku?Ui(t,void 0,e):Ku.get(t,e&rt.Optional?null:void 0,e)}function Ut(t,e=rt.Default){return(po||IT)(at(t),e)}function Us(t){const e=[];for(let n=0;n<t.length;n++){const r=at(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let i,o=rt.Default;for(let a=0;a<r.length;a++){const h=r[a],A=RT(h);"number"==typeof A?-1===A?i=h.token:o|=A:i=h}e.push(Ut(i,o))}else e.push(Ut(r))}return e}function Qu(t,e){return t[Hd]=e,t.prototype[Hd]=e,t}function RT(t){return t[Hd]}function Bp(t,e,n,r){const i=t[wa];throw e[qd]&&i.unshift(e[qd]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=It(e);if(Array.isArray(e))i=e.map(It).join(" -> ");else if("object"==typeof e){let o=[];for(let a in e)if(e.hasOwnProperty(a)){let h=e[a];o.push(a+":"+("string"==typeof h?JSON.stringify(h):It(h)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(wT,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[wa]=null,t}const Ju=Qu(st("Inject",t=>({token:t})),-1),eo=Qu(st("Optional"),8),Vs=Qu(st("SkipSelf"),4),sg="__ngContext__";function lr(t,e){t[sg]=e}function Zd(t){const e=function(t){return t[sg]||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Cl(t){return t.ngOriginalError}function Tb(t,...e){t.error(...e)}class js{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e),r=this._findContext(e),i=function(t){return t&&t.ngErrorLogger||Tb}(e);i(this._console,"ERROR",e),n&&i(this._console,"ORIGINAL ERROR",n),r&&i(this._console,"ERROR CONTEXT",r)}_findContext(e){return e?function(t){return t.ngDebugContext}(e)||this._findContext(Cl(e)):null}_findOriginalError(e){let n=e&&Cl(e);for(;n&&Cl(n);)n=Cl(n);return n||null}}const gg=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Rt))();function ro(t){return t instanceof Function?t():t}var $r=(()=>(($r=$r||{})[$r.Important=1]="Important",$r[$r.DashCase=2]="DashCase",$r))();function nf(t,e){return undefined(t,e)}function nc(t){const e=t[3];return mr(e)?e[3]:e}function rf(t){return Tg(t[13])}function of(t){return Tg(t[4])}function Tg(t){for(;null!==t&&!mr(t);)t=t[4];return t}function Pa(t,e,n,r,i){if(null!=r){let o,a=!1;mr(r)?o=r:gr(r)&&(a=!0,r=r[0]);const h=vn(r);0===t&&null!==n?null==i?Ig(e,n,h):Hs(e,n,h,i||null,!0):1===t&&null!==n?Hs(e,n,h,i||null,!0):2===t?function(t,e,n){const r=bl(t,e);r&&function(t,e,n,r){yn(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,h,a):3===t&&e.destroyNode(h),null!=o&&function(t,e,n,r,i){const o=n[7];o!==vn(n)&&Pa(e,t,r,o,i);for(let h=10;h<n.length;h++){const A=n[h];rc(A[1],A,t,e,r,o)}}(e,t,o,n,i)}}function af(t,e,n){return yn(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Eg(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ci(i,-1)),n.splice(r,1)}function uf(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&Eg(i,r),e>0&&(t[n-1][4]=r[4]);const o=Fs(t,10+e);!function(t,e){rc(t,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function _g(t,e){if(!(256&e[2])){const n=e[11];yn(n)&&n.destroyNode&&rc(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return cf(t[1],t);for(;e;){let n=null;if(gr(e))n=e[13];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)gr(e)&&cf(e[1],e),e=e[3];null===e&&(e=t),gr(e)&&cf(e[1],e),n=e&&e[4]}e=n}}(e)}}function cf(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Xi)){const o=n[r+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){const h=i[o[a]],A=o[a+1];try{A.call(h)}finally{}}else try{o.call(i)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const a=n[o+1],h="function"==typeof a?a(e):vn(e[a]),A=r[i=n[o+2]],V=n[o+3];"boolean"==typeof V?h.removeEventListener(n[o],A,V):V>=0?r[i=V]():r[i=-V].unsubscribe(),o+=2}else{const a=r[i=n[o+1]];n[o].call(a)}if(null!==r){for(let o=i+1;o<r.length;o++)r[o]();e[7]=null}}(t,e),1===e[1].type&&yn(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&mr(e[3])){n!==e[3]&&Eg(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function wg(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const i=t.data[r.directiveStart].encapsulation;if(i===sn.None||i===sn.Emulated)return null}return zn(r,n)}(t,e.parent,n)}function Hs(t,e,n,r,i){yn(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Ig(t,e,n){yn(t)?t.appendChild(e,n):e.appendChild(n)}function Rg(t,e,n,r,i){null!==r?Hs(t,e,n,r,i):Ig(t,e,n)}function bl(t,e){return yn(t)?t.parentNode(e):e.parentNode}let Ag=function(t,e,n){return 40&t.type?zn(t,n):null};function El(t,e,n,r){const i=wg(t,r,e),o=e[11],h=function(t,e,n){return Ag(t,e,n)}(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let A=0;A<n.length;A++)Rg(o,i,n[A],h,!1);else Rg(o,i,n,h,!1)}function _l(t,e){if(null!==e){const n=e.type;if(3&n)return zn(e,t);if(4&n)return df(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return _l(t,r);{const i=t[e.index];return mr(i)?df(-1,i):vn(i)}}if(32&n)return nf(e,t)()||vn(t[e.index]);{const r=Mg(t,e);return null!==r?Array.isArray(r)?r[0]:_l(nc(t[16]),r):_l(t,e.next)}}return null}function Mg(t,e){return null!==e?t[16][6].projection[e.projection]:null}function df(t,e){const n=10+t+1;if(n<e.length){const r=e[n],i=r[1].firstChild;if(null!==i)return _l(r,i)}return e[7]}function ff(t,e,n,r,i,o,a){for(;null!=n;){const h=r[n.index],A=n.type;if(a&&0===e&&(h&&lr(vn(h),r),n.flags|=4),64!=(64&n.flags))if(8&A)ff(t,e,n.child,r,i,o,!1),Pa(e,t,i,h,o);else if(32&A){const V=nf(n,r);let q;for(;q=V();)Pa(e,t,i,q,o);Pa(e,t,i,h,o)}else 16&A?kg(t,e,r,n,i,o):Pa(e,t,i,h,o);n=a?n.projectionNext:n.next}}function rc(t,e,n,r,i,o){ff(n,r,t.firstChild,e,i,o,!1)}function kg(t,e,n,r,i,o){const a=n[16],A=a[6].projection[r.projection];if(Array.isArray(A))for(let V=0;V<A.length;V++)Pa(e,t,i,A[V],o);else ff(t,e,A,a[3],i,o,!0)}function xg(t,e,n){yn(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function hf(t,e,n){yn(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Lg(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}const Fg="ng-template";function Wb(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Lg(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Ug(t){return 4===t.type&&t.value!==Fg}function zb(t,e,n){return e===(4!==t.type||n?t.value:Fg)}function Kb(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(nl(t[e]))return e;return t.length}(i);let a=!1;for(let h=0;h<e.length;h++){const A=e[h];if("number"!=typeof A){if(!a)if(4&r){if(r=2|1&r,""!==A&&!zb(t,A,n)||""===A&&1===e.length){if(bi(r))return!1;a=!0}}else{const V=8&r?A:e[++h];if(8&r&&null!==t.attrs){if(!Wb(t.attrs,V,n)){if(bi(r))return!1;a=!0}continue}const Y=Qb(8&r?"class":A,i,Ug(t),n);if(-1===Y){if(bi(r))return!1;a=!0;continue}if(""!==V){let ie;ie=Y>o?"":i[Y+1].toLowerCase();const de=8&r?ie:null;if(de&&-1!==Lg(de,V,0)||2&r&&V!==ie){if(bi(r))return!1;a=!0}}}}else{if(!a&&!bi(r)&&!bi(A))return!1;if(a&&bi(A))continue;a=!1,r=A|1&r}}return bi(r)||a}function bi(t){return 0==(1&t)}function Qb(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){const a=e[i];if(a===t)return i;if(3===a||6===a)o=!0;else{if(1===a||2===a){let h=e[++i];for(;"string"==typeof h;)h=e[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=o?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Vg(t,e,n=!1){for(let r=0;r<e.length;r++)if(Kb(t,e[r],n))return!0;return!1}function Bg(t,e){return t?":not("+e.trim()+")":e}function eE(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let a=t[n];if("string"==typeof a)if(2&r){const h=t[++n];i+="["+a+(h.length>0?'="'+h+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""!==i&&!bi(a)&&(e+=Bg(o,i),i=""),r=a,o=o||!bi(r);n++}return""!==i&&(e+=Bg(o,i)),e}const wt={};function wl(t){jg(gt(),qe(),Zt()+t,H())}function jg(t,e,n,r){if(!r)if(3==(3&e[2])){const o=t.preOrderCheckHooks;null!==o&&To(e,o,n)}else{const o=t.preOrderHooks;null!==o&&zo(e,o,0,n)}Nt(n)}function Yg(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const a=t.data[o];it(i),a.contentQueries(2,e[o],o)}}}function ic(t,e,n,r,i,o,a,h,A,V){const q=e.blueprint.slice();return q[0]=i,q[2]=140|r,xu(q),q[3]=q[15]=t,q[8]=n,q[10]=a||t&&t[10],q[11]=h||t&&t[11],q[12]=A||t&&t[12]||null,q[9]=V||t&&t[9]||null,q[6]=o,q[16]=2==e.type?t[16]:q,q}function Aa(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Ms(),a=ma(),A=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=A),null!==o&&(a?null==o.child&&null!==A.parent&&(o.child=A):null===o.next&&(o.next=A)),A}(t,e,n,r,i),Ct.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const a=function(){const t=Ct.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===a?-1:a.injectorIndex}return cr(o,!0),o}function Oa(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function oc(t,e,n){ln(e);try{const r=t.viewQuery;null!==r&&Mf(1,r,n);const i=t.template;null!==i&&Xg(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Yg(t,e),t.staticViewQueries&&Mf(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)NE(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,An()}}function Ma(t,e,n,r){const i=e[2];if(256==(256&i))return;ln(e);const o=H();try{xu(e),function(t){Ct.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&Xg(t,e,n,2,r);const a=3==(3&i);if(!o)if(a){const V=t.preOrderCheckHooks;null!==V&&To(e,V,null)}else{const V=t.preOrderHooks;null!==V&&zo(e,V,0,null),Ti(e,0)}if(function(t){for(let e=rf(t);null!==e;e=of(e)){if(!e[2])continue;const n=e[9];for(let r=0;r<n.length;r++){const i=n[r],o=i[3];0==(1024&i[2])&&Ci(o,1),i[2]|=1024}}}(e),function(t){for(let e=rf(t);null!==e;e=of(e))for(let n=10;n<e.length;n++){const r=e[n],i=r[1];Wo(r)&&Ma(i,r,i.template,r[8])}}(e),null!==t.contentQueries&&Yg(t,e),!o)if(a){const V=t.contentCheckHooks;null!==V&&To(e,V)}else{const V=t.contentHooks;null!==V&&zo(e,V,1),Ti(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)Nt(~i);else{const o=i,a=n[++r],h=n[++r];Ge(a,o),h(2,e[o])}}}finally{Nt(-1)}}(t,e);const h=t.components;null!==h&&function(t,e){for(let n=0;n<e.length;n++)ME(t,e[n])}(e,h);const A=t.viewQuery;if(null!==A&&Mf(2,A,r),!o)if(a){const V=t.viewCheckHooks;null!==V&&To(e,V)}else{const V=t.viewHooks;null!==V&&zo(e,V,2),Ti(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ci(e[3],-1))}finally{An()}}function hE(t,e,n,r){const i=e[10],o=!H(),a=function(t){return 4==(4&t[2])}(e);try{o&&!a&&i.begin&&i.begin(),a&&oc(t,e,r),Ma(t,e,n,r)}finally{o&&!a&&i.end&&i.end()}}function Xg(t,e,n,r,i){const o=Zt(),a=2&r;try{Nt(-1),a&&e.length>20&&jg(t,e,20,H()),n(r,i)}finally{Nt(o)}}function wf(t,e,n){!Lu()||(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Ns(n,e),lr(r,e);const a=n.initialInputs;for(let h=i;h<o;h++){const A=t.data[h],V=ur(A);V&&RE(e,n,A);const q=xs(e,t,h,n);lr(q,e),null!==a&&DE(0,h-i,q,A,0,a),V&&(Xn(n.index,e)[8]=q)}}(t,e,n,zn(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,a=n.index,h=Ct.lFrame.currentDirectiveIndex;try{Nt(a);for(let A=r;A<i;A++){const V=t.data[A],q=e[A];nt(A),(null!==V.hostBindings||0!==V.hostVars||null!==V.hostAttrs)&&am(V,q)}}finally{Nt(-1),nt(h)}}(t,e,n))}function Sf(t,e,n=zn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const a=r[o+1],h=-1===a?n(e,t):t[a];t[i++]=h}}}function em(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Dl(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Dl(t,e,n,r,i,o,a,h,A,V){const q=20+r,Y=q+i,ie=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:wt);return n}(q,Y),de="function"==typeof V?V():V;return ie[1]={type:t,blueprint:ie,template:n,queries:null,viewQuery:h,declTNode:e,data:ie.slice().fill(null,q),bindingStartIndex:q,expandoStartIndex:Y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:A,consts:de,incompleteFirstPass:!1}}function im(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function If(t,e,n,r){let i=!1;if(Lu()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const a=r[o];Vg(n,a.selectors,!1)&&(i||(i=[]),ba(Ns(n,e),t,a.type),ur(a)?(um(t,n),i.unshift(a)):i.push(a))}return i}(t,e,n),a=null===r?null:{"":-1};if(null!==o){i=!0,cm(n,t.data.length,o.length);for(let q=0;q<o.length;q++){const Y=o[q];Y.providersResolver&&Y.providersResolver(Y)}let h=!1,A=!1,V=Oa(t,e,o.length,null);for(let q=0;q<o.length;q++){const Y=o[q];n.mergedAttrs=va(n.mergedAttrs,Y.hostAttrs),lm(t,n,e,V,Y),IE(V,Y,a),null!==Y.contentQueries&&(n.flags|=8),(null!==Y.hostBindings||null!==Y.hostAttrs||0!==Y.hostVars)&&(n.flags|=128);const ie=Y.type.prototype;!h&&(ie.ngOnChanges||ie.ngOnInit||ie.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),h=!0),!A&&(ie.ngOnChanges||ie.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),A=!0),V++}!function(t,e){const r=e.directiveEnd,i=t.data,o=e.attrs,a=[];let h=null,A=null;for(let V=e.directiveStart;V<r;V++){const q=i[V],Y=q.inputs,ie=null===o||Ug(e)?null:PE(Y,o);a.push(ie),h=im(Y,V,h),A=im(q.outputs,V,A)}null!==h&&(h.hasOwnProperty("class")&&(e.flags|=16),h.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=a,e.inputs=h,e.outputs=A}(t,n)}a&&function(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const o=n[e[i+1]];if(null==o)throw new _r("301",`Export of name '${e[i+1]}' not found!`);r.push(e[i],o)}}}(n,r,a)}return n.mergedAttrs=va(n.mergedAttrs,n.attrs),i}function sm(t,e,n,r,i,o){const a=o.hostBindings;if(a){let h=t.hostBindingOpCodes;null===h&&(h=t.hostBindingOpCodes=[]);const A=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(h)!=A&&h.push(A),h.push(r,i,a)}}function am(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function um(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function IE(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ur(e)&&(n[""]=t)}}function cm(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function lm(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=yi(i.type)),a=new Xi(o,ur(i),null);t.blueprint[r]=a,n[r]=a,sm(t,e,0,r,Oa(t,n,i.hostVars,wt),i)}function RE(t,e,n){const r=zn(e,t),i=em(n),o=t[10],a=Pl(t,ic(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=a}function DE(t,e,n,r,i,o){const a=o[e];if(null!==a){const h=r.setInput;for(let A=0;A<a.length;){const V=a[A++],q=a[A++],Y=a[A++];null!==h?r.setInput(n,Y,V,q):n[q]=Y}}}function PE(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function dm(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function ME(t,e){const n=Xn(e,t);if(Wo(n)){const r=n[1];80&n[2]?Ma(r,n,r.template,n[8]):n[5]>0&&Df(n)}}function Df(t){for(let r=rf(t);null!==r;r=of(r))for(let i=10;i<r.length;i++){const o=r[i];if(1024&o[2]){const a=o[1];Ma(a,o,a.template,o[8])}else o[5]>0&&Df(o)}const n=t[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=Xn(n[r],t);Wo(i)&&i[5]>0&&Df(i)}}function NE(t,e){const n=Xn(e,t),r=n[1];(function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(r,n),oc(r,n,n[8])}function Pl(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Pf(t){for(;t;){t[2]|=64;const e=nc(t);if(sa(t)&&!e)return t;t=e}return null}function Of(t,e,n){const r=e[10];r.begin&&r.begin();try{Ma(t,e,t.template,n)}catch(i){throw mm(e,i),i}finally{r.end&&r.end()}}function fm(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Zd(n),i=r[1];hE(i,r,i.template,n)}}(t[8])}function Mf(t,e,n){it(0),e(t,n)}const UE=(()=>Promise.resolve(null))();function hm(t){return t[7]||(t[7]=[])}function pm(t){return t.cleanup||(t.cleanup=[])}function mm(t,e){const n=t[9],r=n?n.get(js,null):null;r&&r.handleError(e)}function ym(t,e,n,r,i){for(let o=0;o<n.length;){const a=n[o++],h=n[o++],A=e[a],V=t.data[a];null!==V.setInput?V.setInput(A,i,r,h):A[h]=i}}function Al(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let a=0;a<e.length;a++){const h=e[a];"number"==typeof h?o=h:1==o?i=ls(i,h):2==o&&(r=ls(r,h+": "+e[++a]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Na=new ut("INJECTOR",-1);class vm{get(e,n=zu){if(n===zu){const r=new Error(`NullInjectorError: No provider for ${It(e)}!`);throw r.name="NullInjectorError",r}return n}}const sc=new ut("Set Injector scope."),ac={},jE={};let Nf;function Cm(){return void 0===Nf&&(Nf=new vm),Nf}function Tm(t,e=null,n=null,r){return new qE(t,n,e||Cm(),r)}class qE{constructor(e,n,r,i=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const o=[];n&&Zi(n,h=>this.processProvider(h,e,n)),Zi([e],h=>this.processInjectorType(h,[],o)),this.records.set(Na,ka(void 0,this));const a=this.records.get(sc);this.scope=null!=a?a.value:null,this.source=i||("object"==typeof e?null:It(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,n=zu,r=rt.Default){this.assertNotDestroyed();const i=Sa(this),o=wr(void 0);try{if(!(r&rt.SkipSelf)){let h=this.records.get(e);if(void 0===h){const A=function(t){return"function"==typeof t||"object"==typeof t&&t instanceof ut}(e)&&Lr(e);h=A&&this.injectableDefInScope(A)?ka(kf(e),ac):null,this.records.set(e,h)}if(null!=h)return this.hydrate(e,h)}return(r&rt.Self?Cm():this.parent).get(e,n=r&rt.Optional&&n===zu?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[wa]=a[wa]||[]).unshift(It(e)),i)throw a;return Bp(a,e,"R3InjectorError",this.source)}throw a}finally{wr(o),Sa(i)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((r,i)=>e.push(It(i))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,n,r){if(!(e=at(e)))return!1;let i=ms(e);const o=null==i&&e.ngModule||void 0,a=void 0===o?e:o,h=-1!==r.indexOf(a);if(void 0!==o&&(i=ms(o)),null==i)return!1;if(null!=i.imports&&!h){let q;r.push(a);try{Zi(i.imports,Y=>{this.processInjectorType(Y,n,r)&&(void 0===q&&(q=[]),q.push(Y))})}finally{}if(void 0!==q)for(let Y=0;Y<q.length;Y++){const{ngModule:ie,providers:de}=q[Y];Zi(de,Te=>this.processProvider(Te,ie,de||$t))}}this.injectorDefTypes.add(a);const A=yi(a)||(()=>new a);this.records.set(a,ka(A,ac));const V=i.providers;if(null!=V&&!h){const q=e;Zi(V,Y=>this.processProvider(Y,q,V))}return void 0!==o&&void 0!==e.providers}processProvider(e,n,r){let i=xa(e=at(e))?e:at(e&&e.provide);const o=function(t,e,n){return Em(t)?ka(void 0,t.useValue):ka(function(t,e,n){let r;if(xa(t)){const i=at(t);return yi(i)||kf(i)}if(Em(t))r=()=>at(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Us(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Ut(at(t.useExisting));else{const i=at(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return yi(i)||kf(i);r=()=>new i(...Us(t.deps))}return r}(t),ac)}(e);if(xa(e)||!0!==e.multi)this.records.get(i);else{let a=this.records.get(i);a||(a=ka(void 0,ac,!0),a.factory=()=>Us(a.multi),this.records.set(i,a)),i=e,a.multi.push(e)}this.records.set(i,o)}hydrate(e,n){return n.value===ac&&(n.value=jE,n.value=n.factory()),"object"==typeof n.value&&n.value&&function(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this.onDestroy.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=at(e.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function kf(t){const e=Lr(t),n=null!==e?e.factory:yi(t);if(null!==n)return n;if(t instanceof ut)throw new Error(`Token ${It(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const r=function(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?");throw new Error(`Can't resolve all parameters for ${It(t)}: (${r.join(", ")}).`)}const n=function(t){const e=t&&(t[Fi]||t[ys]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function ka(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Em(t){return null!==t&&"object"==typeof t&&Gd in t}function xa(t){return"function"==typeof t}const _m=function(t,e,n){return function(t,e=null,n=null,r){const i=Tm(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};class tn{static create(e,n){return Array.isArray(e)?_m(e,n,""):_m(e.providers,e.parent,e.name||"")}}function l_(t,e){kn(Zd(t)[1],Cn())}tn.THROW_IF_NOT_FOUND=zu,tn.NULL=new vm,tn.\u0275prov=Ft({token:tn,providedIn:"any",factory:()=>Ut(Na)}),tn.__NG_ELEMENT_ID__=-1;let Ol=null;function La(){if(!Ol){const t=Rt.Symbol;if(t&&t.iterator)Ol=t.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<e.length;++n){const r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Ol=r)}}}return Ol}function cc(t){return!!jf(t)&&(Array.isArray(t)||!(t instanceof Map)&&La()in t)}function jf(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Nl(t,e,n,r,i,o,a,h){const A=qe(),V=gt(),q=t+20,Y=V.firstCreatePass?function(t,e,n,r,i,o,a,h,A){const V=e.consts,q=Aa(e,t,4,a||null,Ar(V,h));If(e,n,q,Ar(V,A)),kn(e,q);const Y=q.tViews=Dl(2,q,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,V);return null!==e.queries&&(e.queries.template(e,q),Y.queries=e.queries.embeddedTView(q)),q}(q,V,A,e,n,r,i,o,a):V.data[q];cr(Y,!1);const ie=A[11].createComment("");El(V,A,ie,Y),lr(ie,A),Pl(A,A[q]=dm(ie,A,ie,Y)),yo(Y)&&wf(V,A,Y),null!=a&&Sf(A,Y,h)}function Lt(t,e=rt.Default){const n=qe();return null===n?Ut(t,e):cl(Cn(),n,at(t),e)}function dc(t,e,n){const r=qe();return function(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}(r,Ct.lFrame.bindingIndex++,e)&&function(t,e,n,r,i,o,a,h){const A=zn(e,n);let q,V=e.inputs;!h&&null!=V&&(q=V[r])?(ym(t,n,q,r,i),mo(e)&&function(t,e){const n=Xn(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=a?a(i,e.value||"",r):i,yn(o)?o.setProperty(A,r,i):Bu(r)||(A.setProperty?A.setProperty(r,i):A[r]=i))}(gt(),function(){const t=Ct.lFrame;return $o(t.tView,t.selectedIndex)}(),r,t,e,r[11],n,!1),dc}function Wf(t,e,n,r,i){const a=i?"class":"style";ym(t,n,e.inputs[a],a,r)}function so(t,e,n,r){const i=qe(),o=gt(),a=20+t,h=i[11],A=i[a]=af(h,e,Ct.lFrame.currentNamespace),V=o.firstCreatePass?function(t,e,n,r,i,o,a){const h=e.consts,V=Aa(e,t,2,i,Ar(h,o));return If(e,n,V,Ar(h,a)),null!==V.attrs&&Al(V,V.attrs,!1),null!==V.mergedAttrs&&Al(V,V.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,V),V}(a,o,i,0,e,n,r):o.data[a];cr(V,!0);const q=V.mergedAttrs;null!==q&&ya(h,A,q);const Y=V.classes;null!==Y&&hf(h,A,Y);const ie=V.styles;null!==ie&&xg(h,A,ie),64!=(64&V.flags)&&El(o,i,A,V),0===Ct.lFrame.elementDepthCount&&lr(A,i),Ct.lFrame.elementDepthCount++,yo(V)&&(wf(o,i,V),function(t,e,n){if(Es(e)){const i=e.directiveEnd;for(let o=e.directiveStart;o<i;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}}(o,V,i)),null!==r&&Sf(i,V)}function ao(){let t=Cn();ma()?Ct.lFrame.isParent=!1:(t=t.parent,cr(t,!1));const e=t;Ct.lFrame.elementDepthCount--;const n=gt();n.firstCreatePass&&(kn(n,t),Es(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Wf(n,e,qe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Wf(n,e,qe(),e.stylesWithoutHost,!1)}function zf(){return qe()}function Kf(t){return!!t&&"function"==typeof t.then}const hy=function(t){return!!t&&"function"==typeof t.subscribe};function xl(t,e,n,r){const i=qe(),o=gt(),a=Cn();return function(t,e,n,r,i,o,a,h){const A=yo(r),q=t.firstCreatePass&&pm(t),Y=e[8],ie=hm(e);let de=!0;if(3&r.type||h){const Re=zn(r,e),We=h?h(Re):Re,Ue=ie.length,ot=h?mt=>h(vn(mt[r.index])):r.index;if(yn(n)){let mt=null;if(!h&&A&&(mt=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const a=i[o];if(a===n&&i[o+1]===r){const h=e[7],A=i[o+2];return h.length>A?h[A]:null}"string"==typeof a&&(o+=2)}return null}(t,e,i,r.index)),null!==mt)(mt.__ngLastListenerFn__||mt).__ngNextListenerFn__=o,mt.__ngLastListenerFn__=o,de=!1;else{o=Qf(r,e,Y,o,!1);const kt=n.listen(We,i,o);ie.push(o,kt),q&&q.push(i,ot,Ue,Ue+1)}}else o=Qf(r,e,Y,o,!0),We.addEventListener(i,o,a),ie.push(o),q&&q.push(i,ot,Ue,a)}else o=Qf(r,e,Y,o,!1);const Te=r.outputs;let xe;if(de&&null!==Te&&(xe=Te[i])){const Re=xe.length;if(Re)for(let We=0;We<Re;We+=2){const Hn=e[xe[We]][xe[We+1]].subscribe(o),si=ie.length;ie.push(o,Hn),q&&q.push(i,r.index,si,-(si+1))}}}(o,i,i[11],a,t,e,!!n,r),xl}function my(t,e,n,r){try{return!1!==n(r)}catch(i){return mm(t,i),!1}}function Qf(t,e,n,r,i){return function o(a){if(a===Function)return r;const h=2&t.flags?Xn(t.index,e):e;0==(32&e[2])&&Pf(h);let A=my(e,0,r,a),V=o.__ngNextListenerFn__;for(;V;)A=my(e,0,V,a)&&A,V=V.__ngNextListenerFn__;return i&&!1===A&&(a.preventDefault(),a.returnValue=!1),A}}function Ll(t=1){return function(t){return(Ct.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Ct.lFrame.contextLView))[8]}(t)}function hc(t,e=""){const n=qe(),r=gt(),i=t+20,o=r.firstCreatePass?Aa(r,i,1,e,null):r.data[i],a=n[i]=function(t,e){return yn(t)?t.createText(e):t.createTextNode(e)}(n[11],e);El(r,n,a,o),cr(o,!1)}const Gs=void 0;var Lw=["en",[["a","p"],["AM","PM"],Gs],[["AM","PM"],Gs,Gs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Gs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Gs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Gs,"{1} 'at' {0}",Gs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Ka={};function uv(t){return t in Ka||(Ka[t]=Rt.ng&&Rt.ng.common&&Rt.ng.common.locales&&Rt.ng.common.locales[t]),Ka[t]}var et=(()=>((et=et||{})[et.LocaleId=0]="LocaleId",et[et.DayPeriodsFormat=1]="DayPeriodsFormat",et[et.DayPeriodsStandalone=2]="DayPeriodsStandalone",et[et.DaysFormat=3]="DaysFormat",et[et.DaysStandalone=4]="DaysStandalone",et[et.MonthsFormat=5]="MonthsFormat",et[et.MonthsStandalone=6]="MonthsStandalone",et[et.Eras=7]="Eras",et[et.FirstDayOfWeek=8]="FirstDayOfWeek",et[et.WeekendRange=9]="WeekendRange",et[et.DateFormat=10]="DateFormat",et[et.TimeFormat=11]="TimeFormat",et[et.DateTimeFormat=12]="DateTimeFormat",et[et.NumberSymbols=13]="NumberSymbols",et[et.NumberFormats=14]="NumberFormats",et[et.CurrencyCode=15]="CurrencyCode",et[et.CurrencySymbol=16]="CurrencySymbol",et[et.CurrencyName=17]="CurrencyName",et[et.Currencies=18]="Currencies",et[et.Directionality=19]="Directionality",et[et.PluralCase=20]="PluralCase",et[et.ExtraData=21]="ExtraData",et))();const Ul="en-US";let cv=Ul;function Zf(t){pn(t,"Expected localeId to be defined"),"string"==typeof t&&(cv=t.toLowerCase().replace(/_/g,"-"))}class kv{}const Lv="ngComponent";class FS{resolveComponentFactory(e){throw function(t){const e=Error(`No component factory found for ${It(t)}. Did you add it to @NgModule.entryComponents?`);return e[Lv]=t,e}(e)}}class $s{}function ql(...t){}function Ja(t,e){return new Ri(zn(t,e))}$s.NULL=new FS;const BS=function(){return Ja(Cn(),qe())};let Ri=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=BS,t})();class Gl{}let ah=(()=>{class t{}return t.\u0275prov=Ft({token:t,providedIn:"root",factory:()=>null}),t})();class uh{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Vv=new uh("12.2.2");class Bv{constructor(){}supports(e){return cc(e)}create(e){return new WS(e)}}const $S=(t,e)=>e;class WS{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||$S}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const a=!r||n&&n.currentIndex<Hv(r,i,o)?n:r,h=Hv(a,i,o),A=a.currentIndex;if(a===r)i--,r=r._nextRemoved;else if(n=n._next,null==a.previousIndex)i++;else{o||(o=[]);const V=h-i,q=A-i;if(V!=q){for(let ie=0;ie<V;ie++){const de=ie<o.length?o[ie]:o[ie]=0,Te=de+ie;q<=Te&&Te<V&&(o[ie]=de+1)}o[a.previousIndex]=q-V}}h!==A&&e(a,h,A)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!cc(e))throw new Error(`Error trying to diff '${It(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,a,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let h=0;h<this.length;h++)o=e[h],a=this._trackByFn(h,o),null!==n&&Object.is(n.trackById,a)?(r&&(n=this._verifyReinsertion(n,o,a,h)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,a,h),r=!0),n=n._next}else i=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[La()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,h=>{a=this._trackByFn(i,h),null!==n&&Object.is(n.trackById,a)?(r&&(n=this._verifyReinsertion(n,h,a,i)),Object.is(n.item,h)||this._addIdentityChange(n,h)):(n=this._mismatch(n,h,a,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new zS(n,r),o,i),e}_verifyReinsertion(e,n,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new jv),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new jv),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class zS{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class KS{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class jv{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new KS,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Hv(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class qv{constructor(){}supports(e){return e instanceof Map||jf(e)}create(){return new QS}}class QS{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||jf(e)))throw new Error(`Error trying to diff '${It(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const o=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,n);const o=i._prev,a=i._next;return o&&(o._next=a),a&&(a._prev=o),i._next=null,i._prev=null,i}const r=new JS(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}}class JS{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Gv(){return new vc([new Bv])}let vc=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||Gv()),deps:[[t,new Vs,new eo]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new Error(`Cannot find a differ supporting object '${n}' of type '${function(t){return t.name||typeof t}(n)}'`)}}return t.\u0275prov=Ft({token:t,providedIn:"root",factory:Gv}),t})();function $v(){return new Ya([new qv])}let Ya=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||$v()),deps:[[t,new Vs,new eo]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(r)return r;throw new Error(`Cannot find a differ supporting object '${n}'`)}}return t.\u0275prov=Ft({token:t,providedIn:"root",factory:$v}),t})();function $l(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(vn(o)),mr(o))for(let h=10;h<o.length;h++){const A=o[h],V=A[1].firstChild;null!==V&&$l(A[1],A,V,r)}const a=n.type;if(8&a)$l(t,e,n.child,r);else if(32&a){const h=nf(n,e);let A;for(;A=h();)r.push(A)}else if(16&a){const h=Mg(e,n);if(Array.isArray(h))r.push(...h);else{const A=nc(e[16]);$l(A[1],A,h,r,!0)}}n=i?n.projectionNext:n.next}return r}class Cc{constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,n=e[1];return $l(n,e,n.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(mr(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(uf(e,r),Fs(n,r))}this._attachedToViewContainer=!1}_g(this._lView[1],this._lView)}onDestroy(e){!function(t,e,n,r){const i=hm(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&pm(t).push(r,i.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){Pf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Of(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){z(!0);try{Of(t,e,n)}finally{z(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(t,e){rc(t,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class XS extends Cc{constructor(e){super(e),this._view=e}detectChanges(){fm(this._view)}checkNoChanges(){!function(t){z(!0);try{fm(t)}finally{z(!1)}}(this._view)}get context(){return null}}const iI=[new qv],sI=new vc([new Bv]),aI=new Ya(iI),cI=function(){return function(t,e){return 4&t.type?new dI(e,t,Ja(t,e)):null}(Cn(),qe())};let Do=(()=>{class t{}return t.__NG_ELEMENT_ID__=cI,t})();const lI=Do,dI=class extends lI{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(e){const n=this._declarationTContainer.tViews,r=ic(this._declarationLView,n,e,16,null,n.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(n)),oc(n,r,e),new Cc(r)}};class Ws{}const gI=function(){return function(t,e){let n;const r=e[t.index];if(mr(r))n=r;else{let i;if(8&t.type)i=vn(r);else{const o=e[11];i=o.createComment("");const a=zn(t,e);Hs(o,bl(o,a),i,function(t,e){return yn(t)?t.nextSibling(e):e.nextSibling}(o,a),!1)}e[t.index]=n=dm(r,e,i,t),Pl(e,n)}return new Wv(n,t,e)}(Cn(),qe())};let lo=(()=>{class t{}return t.__NG_ELEMENT_ID__=gI,t})();const yI=lo,Wv=class extends yI{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Ja(this._hostTNode,this._hostLView)}get injector(){return new B(this._hostTNode,this._hostLView)}get parentInjector(){const e=Ta(this._hostTNode,this._hostLView);if(il(e)){const n=Yo(e,this._hostLView),r=Jo(e);return new B(n[1].data[r+8],n)}return new B(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=zv(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,r){const i=e.createEmbeddedView(n||{});return this.insert(i,r),i}createComponent(e,n,r,i,o){const a=r||this.parentInjector;if(!o&&null==e.ngModule&&a){const A=a.get(Ws,null);A&&(o=A)}const h=e.create(a,i,void 0,o);return this.insert(h.hostView,n),h}insert(e,n){const r=e._lView,i=r[1];if(function(t){return mr(t[3])}(r)){const q=this.indexOf(e);if(-1!==q)this.detach(q);else{const Y=r[3],ie=new Wv(Y,Y[6],Y[3]);ie.detach(ie.indexOf(e))}}const o=this._adjustIndex(n),a=this._lContainer;!function(t,e,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],fl(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const a=e[17];null!==a&&n!==a&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(a,e);const h=e[19];null!==h&&h.insertView(t),e[2]|=128}(i,r,a,o);const h=df(o,a),A=r[11],V=bl(A,a[7]);return null!==V&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,rc(t,r,n,1,i,o)}(i,a[6],A,r,V,h),e.attachToViewContainerRef(),fl(ch(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=zv(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=uf(this._lContainer,n);r&&(Fs(ch(this._lContainer),n),_g(r[1],r))}detach(e){const n=this._adjustIndex(e,-1),r=uf(this._lContainer,n);return r&&null!=Fs(ch(this._lContainer),n)?new Cc(r):null}_adjustIndex(e,n=0){return null==e?this.length+n:e}};function zv(t){return t[8]}function ch(t){return t[8]||(t[8]=[])}const tu={};class pC extends $s{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=gn(e);return new mC(n,this.ngModule)}}function gC(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const hR=new ut("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>gg});class mC extends kv{constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function(t){return t.map(eE).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return gC(this.componentDef.inputs)}get outputs(){return gC(this.componentDef.outputs)}create(e,n,r,i){const o=(i=i||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,tu,i);return o!==tu||r===tu?o:e.get(n,r,i)}}}(e,i.injector):e,a=o.get(Gl,fa),h=o.get(ah,null),A=a.createRenderer(null,this.componentDef),V=this.componentDef.selectors[0][0]||"div",q=r?function(t,e,n){if(yn(t))return t.selectRootElement(e,n===sn.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(A,r,this.componentDef.encapsulation):af(a.createRenderer(null,this.componentDef),V,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(V)),Y=this.componentDef.onPush?576:528,ie=function(t,e){return{components:[],scheduler:t||gg,clean:UE,playerHandler:e||null,flags:0}}(),de=Dl(0,null,null,1,0,null,null,null,null,null),Te=ic(null,de,ie,Y,null,null,a,A,h,o);let xe,Re;ln(Te);try{const We=function(t,e,n,r,i,o){const a=n[1];n[20]=t;const A=Aa(a,20,2,"#host",null),V=A.mergedAttrs=e.hostAttrs;null!==V&&(Al(A,V,!0),null!==t&&(ya(i,t,V),null!==A.classes&&hf(i,t,A.classes),null!==A.styles&&xg(i,t,A.styles)));const q=r.createRenderer(t,e),Y=ic(n,em(e),null,e.onPush?64:16,n[20],A,r,q,o||null,null);return a.firstCreatePass&&(ba(Ns(A,n),a,e.type),um(a,A),cm(A,n.length,1)),Pl(n,Y),n[20]=Y}(q,this.componentDef,Te,a,A);if(q)if(r)ya(A,q,["ng-version",Vv.full]);else{const{attrs:Ue,classes:ot}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!bi(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);Ue&&ya(A,q,Ue),ot&&ot.length>0&&hf(A,q,ot.join(" "))}if(Re=$o(de,20),void 0!==n){const Ue=Re.projection=[];for(let ot=0;ot<this.ngContentSelectors.length;ot++){const mt=n[ot];Ue.push(null!=mt?Array.from(mt):null)}}xe=function(t,e,n,r,i){const o=n[1],a=function(t,e,n){const r=Cn();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),lm(t,r,e,Oa(t,e,1,null),n));const i=xs(e,t,r.directiveStart,r);lr(i,e);const o=zn(r,e);return o&&lr(o,e),i}(o,n,e);if(r.components.push(a),t[8]=a,i&&i.forEach(A=>A(a,e)),e.contentQueries){const A=Cn();e.contentQueries(1,a,A.directiveStart)}const h=Cn();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Nt(h.index),sm(n[1],h,0,h.directiveStart,h.directiveEnd,e),am(e,a)),a}(We,this.componentDef,Te,ie,[l_]),oc(de,Te,null)}finally{An()}return new mR(this.componentType,xe,Ja(Re,Te),Te,Re)}}class mR extends class{}{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=n,this.hostView=this.changeDetectorRef=new XS(i),this.componentType=e}get injector(){return new B(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const nu=new Map;class CR extends Ws{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new pC(this);const r=ar(e),i=function(t){return t[bu]||null}(e);i&&Zf(i),this._bootstrapComponents=ro(r.bootstrap),this._r3Injector=Tm(e,n,[{provide:Ws,useValue:this},{provide:$s,useValue:this.componentFactoryResolver}],It(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,n=tn.THROW_IF_NOT_FOUND,r=rt.Default){return e===tn||e===Ws||e===Na?this:this._r3Injector.get(e,n,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Eh extends class{}{constructor(e){super(),this.moduleType=e,null!==ar(e)&&function(t){const e=new Set;!function n(r){const i=ar(r,!0),o=i.id;null!==o&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${It(e)} vs ${It(e.name)}`)}(o,nu.get(o),r),nu.set(o,r));const a=ro(i.imports);for(const h of a)e.has(h)||(e.add(h),n(h))}(t)}(e)}create(e){return new CR(this.moduleType,e)}}function _h(t){return e=>{setTimeout(t,void 0,e)}}const Po=class extends te{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){var i,o,a;let h=e,A=n||(()=>null),V=r;if(e&&"object"==typeof e){const Y=e;h=null===(i=Y.next)||void 0===i?void 0:i.bind(Y),A=null===(o=Y.error)||void 0===o?void 0:o.bind(Y),V=null===(a=Y.complete)||void 0===a?void 0:a.bind(Y)}this.__isAsync&&(A=_h(A),h&&(h=_h(h)),V&&(V=_h(V)));const q=super.subscribe({next:h,error:A,complete:V});return e instanceof f&&e.add(q),q}};Symbol;const ed=new ut("Application Initializer");let iu=(()=>{class t{constructor(n){this.appInits=n,this.resolve=ql,this.reject=ql,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(Kf(o))n.push(o);else if(hy(o)){const a=new Promise((h,A)=>{o.subscribe({complete:h,error:A})});n.push(a)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(Ut(ed,8))},t.\u0275prov=Ft({token:t,factory:t.\u0275fac}),t})();const Oc=new ut("AppId"),wD={provide:Oc,useFactory:function(){return`${kh()}${kh()}${kh()}`},deps:[]};function kh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const WC=new ut("Platform Initializer"),xh=new ut("Platform ID"),SD=new ut("appBootstrapListener");let Lh=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Ft({token:t,factory:t.\u0275fac}),t})();const rs=new ut("LocaleId"),zC=new ut("DefaultCurrencyCode");class RD{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}const Fh=function(t){return new Eh(t)},DD=Fh,PD=function(t){return Promise.resolve(Fh(t))},KC=function(t){const e=Fh(t),r=ro(ar(t).declarations).reduce((i,o)=>{const a=gn(o);return a&&i.push(new mC(a)),i},[]);return new RD(e,r)},AD=KC,OD=function(t){return Promise.resolve(KC(t))};let nd=(()=>{class t{constructor(){this.compileModuleSync=DD,this.compileModuleAsync=PD,this.compileModuleAndAllComponentsSync=AD,this.compileModuleAndAllComponentsAsync=OD}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Ft({token:t,factory:t.\u0275fac}),t})();const kD=(()=>Promise.resolve(0))();function Uh(t){"undefined"==typeof Zone?kD.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class nr{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Po(!1),this.onMicrotaskEmpty=new Po(!1),this.onStable=new Po(!1),this.onError=new Po(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function(){let t=Rt.requestAnimationFrame,e=Rt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Rt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Bh(t),t.isCheckStableRunning=!0,Vh(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Bh(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,a,h)=>{try{return QC(t),n.invokeTask(i,o,a,h)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),JC(t)}},onInvoke:(n,r,i,o,a,h,A)=>{try{return QC(t),n.invoke(i,o,a,h,A)}finally{t.shouldCoalesceRunChangeDetection&&e(),JC(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,Bh(t),Vh(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!nr.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(nr.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+i,e,LD,ql,ql);try{return o.runTask(a,n,r)}finally{o.cancelTask(a)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const LD={};function Vh(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Bh(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function QC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function JC(t){t._nesting--,Vh(t)}class VD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Po,this.onMicrotaskEmpty=new Po,this.onStable=new Po,this.onError=new Po}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}let jh=(()=>{class t{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{nr.assertNotInAngularZone(),Uh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Uh(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,r,i){return[]}}return t.\u0275fac=function(n){return new(n||t)(Ut(nr))},t.\u0275prov=Ft({token:t,factory:t.\u0275fac}),t})(),YC=(()=>{class t{constructor(){this._applications=new Map,Hh.addToWindow(this)}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Hh.findTestabilityInTree(this,n,r)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Ft({token:t,factory:t.\u0275fac}),t})();class BD{addToWindow(e){}findTestabilityInTree(e,n,r){return null}}let Hh=new BD,XC=!0,ZC=!1;let Ai;const t0=new ut("AllowMultipleToken");function n0(t,e,n=[]){const r=`Platform: ${e}`,i=new ut(r);return(o=[])=>{let a=r0();if(!a||a.injector.get(t0,!1))if(t)t(n.concat(o).concat({provide:i,useValue:!0}));else{const h=n.concat(o).concat({provide:i,useValue:!0},{provide:sc,useValue:"platform"});!function(t){if(Ai&&!Ai.destroyed&&!Ai.injector.get(t0,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ai=t.get(i0);const e=t.get(WC,null);e&&e.forEach(n=>n())}(tn.create({providers:h,name:r}))}return function(t){const e=r0();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function r0(){return Ai&&!Ai.destroyed?Ai:null}let i0=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const h=function(t,e){let n;return n="noop"===t?new VD:("zone.js"===t?void 0:t)||new nr({enableLongStackTrace:(ZC=!0,XC),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),A=[{provide:nr,useValue:h}];return h.run(()=>{const V=tn.create({providers:A,parent:this.injector,name:n.moduleType.name}),q=n.create(V),Y=q.injector.get(js,null);if(!Y)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return h.runOutsideAngular(()=>{const ie=h.onError.subscribe({next:de=>{Y.handleError(de)}});q.onDestroy(()=>{qh(this._modules,q),ie.unsubscribe()})}),function(t,e,n){try{const r=n();return Kf(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(Y,h,()=>{const ie=q.injector.get(iu);return ie.runInitializers(),ie.donePromise.then(()=>(Zf(q.injector.get(rs,Ul)||Ul),this._moduleDoBootstrap(q),q))})})}bootstrapModule(n,r=[]){const i=o0({},r);return function(t,e,n){const r=new Eh(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(Mc);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new Error(`The module ${It(n.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(Ut(tn))},t.\u0275prov=Ft({token:t,factory:t.\u0275fac}),t})();function o0(t,e){return Array.isArray(e)?e.reduce(o0,t):Object.assign(Object.assign({},t),e)}let Mc=(()=>{class t{constructor(n,r,i,o,a){this._zone=n,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=o,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new M(V=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{V.next(this._stable),V.complete()})}),A=new M(V=>{let q;this._zone.runOutsideAngular(()=>{q=this._zone.onStable.subscribe(()=>{nr.assertNotInAngularZone(),Uh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,V.next(!0))})})});const Y=this._zone.onUnstable.subscribe(()=>{nr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{V.next(!1)}))});return()=>{q.unsubscribe(),Y.unsubscribe()}});this.isStable=function(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return he(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof M?t[0]:Le(e)(ze(t,n))}(h,A.pipe(t=>Et()(function(t,e){return function(r){let i;i="function"==typeof t?t:function(){return t};const o=Object.create(r,kr);return o.source=r,o.subjectFactory=i,o}}(Xs)(t))))}bootstrap(n,r){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let i;i=n instanceof kv?n:this._componentFactoryResolver.resolveComponentFactory(n),this.componentTypes.push(i.componentType);const o=function(t){return t.isBoundToModule}(i)?void 0:this._injector.get(Ws),h=i.create(tn.NULL,[],r||i.selector,o),A=h.location.nativeElement,V=h.injector.get(jh,null),q=V&&h.injector.get(YC);return V&&q&&q.registerApplication(A,V),h.onDestroy(()=>{this.detachView(h.hostView),qh(this.components,h),q&&q.unregisterApplication(A)}),this._loadComponent(h),h}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;qh(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(SD,[]).concat(this._bootstrapListeners).forEach(i=>i(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(n){return new(n||t)(Ut(nr),Ut(tn),Ut(js),Ut($s),Ut(iu))},t.\u0275prov=Ft({token:t,factory:t.\u0275fac}),t})();function qh(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const hP=n0(null,"core",[{provide:xh,useValue:"unknown"},{provide:i0,deps:[tn]},{provide:YC,deps:[]},{provide:Lh,deps:[]}]),vP=[{provide:Mc,useClass:Mc,deps:[nr,tn,js,$s,iu]},{provide:hR,deps:[nr],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(n){e.push(n)}}},{provide:iu,useClass:iu,deps:[[new eo,ed]]},{provide:nd,useClass:nd,deps:[]},wD,{provide:vc,useFactory:function(){return sI},deps:[]},{provide:Ya,useFactory:function(){return aI},deps:[]},{provide:rs,useFactory:function(t){return Zf(t=t||"undefined"!=typeof $localize&&$localize.locale||Ul),t},deps:[[new Ju(rs),new eo,new Vs]]},{provide:zC,useValue:"USD"}];let TP=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(Ut(Mc))},t.\u0275mod=Sr({type:t}),t.\u0275inj=zr({providers:vP}),t})(),fd=null;function Fc(){return fd}const rr=new ut("DocumentToken");var xn=(()=>((xn=xn||{})[xn.Zero=0]="Zero",xn[xn.One=1]="One",xn[xn.Two=2]="Two",xn[xn.Few=3]="Few",xn[xn.Many=4]="Many",xn[xn.Other=5]="Other",xn))();const DA=function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=uv(e);if(n)return n;const r=e.split("-")[0];if(n=uv(r),n)return n;if("en"===r)return Lw;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[et.PluralCase]};class Ed{}let rO=(()=>{class t extends Ed{constructor(n){super(),this.locale=n}getPluralCategory(n,r){switch(DA(r||this.locale)(n)){case xn.Zero:return"zero";case xn.One:return"one";case xn.Two:return"two";case xn.Few:return"few";case xn.Many:return"many";default:return"other"}}}return t.\u0275fac=function(n){return new(n||t)(Ut(rs))},t.\u0275prov=Ft({token:t,factory:t.\u0275fac}),t})(),G0=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new lO,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){$0("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){$0("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)(Lt(lo),Lt(Do))},t.\u0275dir=Fn({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class lO{constructor(){this.$implicit=null,this.ngIf=null}}function $0(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${It(e)}'.`)}let LO=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Sr({type:t}),t.\u0275inj=zr({providers:[{provide:Ed,useClass:rO}]}),t})();class mp extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(t){fd||(fd=t)}(new mp)}onAndCancel(e,n,r){return e.addEventListener(n,r,!1),()=>{e.removeEventListener(n,r,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=(Bc=Bc||document.querySelector("base"),Bc?Bc.getAttribute("href"):null);return null==n?null:function(t){_d=_d||document.createElement("a"),_d.setAttribute("href",t);const e=_d.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Bc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let _d,Bc=null;const J0=new ut("TRANSITION_ID"),WO=[{provide:ed,useFactory:function(t,e,n){return()=>{n.get(iu).donePromise.then(()=>{const r=Fc(),i=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[J0,rr,tn],multi:!0}];class yp{static init(){!function(t){Hh=t}(new yp)}addToWindow(e){Rt.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},Rt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Rt.getAllAngularRootElements=()=>e.getAllRootElements(),Rt.frameworkStabilizers||(Rt.frameworkStabilizers=[]),Rt.frameworkStabilizers.push(r=>{const i=Rt.getAllAngularTestabilities();let o=i.length,a=!1;const h=function(A){a=a||A,o--,0==o&&r(a)};i.forEach(function(A){A.whenStable(h)})})}findTestabilityInTree(e,n,r){if(null==n)return null;const i=e.getTestability(n);return null!=i?i:r?Fc().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null}}let zO=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Ft({token:t,factory:t.\u0275fac}),t})();const jc=new ut("EventManagerPlugins");let Sd=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>i.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const a=i[o];if(a.supports(n))return this._eventNameToPlugin.set(n,a),a}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(Ut(jc),Ut(nr))},t.\u0275prov=Ft({token:t,factory:t.\u0275fac}),t})();class vp{constructor(e){this._doc=e}addGlobalEventListener(e,n,r){const i=Fc().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let X0=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Ft({token:t,factory:t.\u0275fac}),t})(),Hc=(()=>{class t extends X0{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,i){n.forEach(o=>{const a=this._doc.createElement("style");a.textContent=o,i.push(r.appendChild(a))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(Z0),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(n,i,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(Z0))}}return t.\u0275fac=function(n){return new(n||t)(Ut(rr))},t.\u0275prov=Ft({token:t,factory:t.\u0275fac}),t})();function Z0(t){Fc().remove(t)}const Cp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Tp=/%COMP%/g;function Id(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Id(t,i,n):(i=i.replace(Tp,t),n.push(i))}return n}function nT(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let bp=(()=>{class t{constructor(n,r,i){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Ep(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case sn.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new uM(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(n),i}case 1:case sn.ShadowDom:return new cM(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const i=Id(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(Ut(Sd),Ut(Hc),Ut(Oc))},t.\u0275prov=Ft({token:t,factory:t.\u0275fac}),t})();class Ep{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,n){return n?document.createElementNS(Cp[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){e.appendChild(n)}insertBefore(e,n,r){e&&e.insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=Cp[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=Cp[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&($r.DashCase|$r.Important)?e.style.setProperty(n,r,i&$r.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&$r.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,nT(r)):this.eventManager.addEventListener(e,n,nT(r))}}class uM extends Ep{constructor(e,n,r,i){super(e),this.component=r;const o=Id(i+"-"+r.id,r.styles,[]);n.addStyles(o),this.contentAttr=function(t){return"_ngcontent-%COMP%".replace(Tp,t)}(i+"-"+r.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(Tp,t)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class cM extends Ep{constructor(e,n,r,i){super(e),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Id(i.id,i.styles,[]);for(let a=0;a<o.length;a++){const h=document.createElement("style");h.textContent=o[a],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let lM=(()=>{class t extends vp{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return t.\u0275fac=function(n){return new(n||t)(Ut(rr))},t.\u0275prov=Ft({token:t,factory:t.\u0275fac}),t})();const oT=["alt","control","meta","shift"],yM={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},sT={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},vM={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let CM=(()=>{class t extends vp{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const o=t.parseEventName(r),a=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Fc().onAndCancel(n,o.domEventName,a))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=t._normalizeKey(r.pop());let a="";if(oT.forEach(A=>{const V=r.indexOf(A);V>-1&&(r.splice(V,1),a+=A+".")}),a+=o,0!=r.length||0===o.length)return null;const h={};return h.domEventName=i,h.fullKey=a,h}static getEventFullKey(n){let r="",i=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&sT.hasOwnProperty(e)&&(e=sT[e]))}return yM[e]||e}(n);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),oT.forEach(o=>{o!=i&&vM[o](n)&&(r+=o+".")}),r+=i,r}static eventCallback(n,r,i){return o=>{t.getEventFullKey(o)===n&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){switch(n){case"esc":return"escape";default:return n}}}return t.\u0275fac=function(n){return new(n||t)(Ut(rr))},t.\u0275prov=Ft({token:t,factory:t.\u0275fac}),t})();const RM=n0(hP,"browser",[{provide:xh,useValue:"browser"},{provide:WC,useValue:function(){mp.makeCurrent(),yp.init()},multi:!0},{provide:rr,useFactory:function(){return function(t){Rs=t}(document),document},deps:[]}]),DM=[[],{provide:sc,useValue:"root"},{provide:js,useFactory:function(){return new js},deps:[]},{provide:jc,useClass:lM,multi:!0,deps:[rr,nr,xh]},{provide:jc,useClass:CM,multi:!0,deps:[rr]},[],{provide:bp,useClass:bp,deps:[Sd,Hc,Oc]},{provide:Gl,useExisting:bp},{provide:X0,useExisting:Hc},{provide:Hc,useClass:Hc,deps:[rr]},{provide:jh,useClass:jh,deps:[nr]},{provide:Sd,useClass:Sd,deps:[jc,nr]},{provide:class{},useClass:zO,deps:[]},[]];let PM=(()=>{class t{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:t,providers:[{provide:Oc,useValue:n.appId},{provide:J0,useExisting:Oc},WO]}}}return t.\u0275fac=function(n){return new(n||t)(Ut(t,12))},t.\u0275mod=Sr({type:t}),t.\u0275inj=zr({providers:DM,imports:[LO,TP]}),t})();"undefined"!=typeof window&&window;var Rd=c(8239),FM=c(5436);class Rp{constructor(){this.middlewares={}}static getInstance(){return this._instance||(this._instance=new Rp),this._instance}subscribe(e,n){this.middlewares[e]=n}create(){return console.log("[CustomStore][create]"),window.WebChat.createStore({},({dispatch:n})=>r=>i=>{let o=i;if(i&&i.payload)for(const a of Object.keys(this.middlewares)){const h=this.middlewares[a];if(h.applicable(o)){const A=h.apply(o);A.dispatchAction&&n(A.dispatchAction),A.nextAction&&(o=A.nextAction)}}return r(o)})}}var au=c(8139);const uT=t=>{if(t){const e=t.split(/\s/).reduce((n,r)=>n+r.slice(0,1),"");return e.length>1?e.substring(0,2).toUpperCase():t.substring(0,2).toUpperCase()}return""};var uu=(()=>(function(t){t.Sending="sending",t.SendFailed="send failed",t.Sent="sent"}(uu||(uu={})),uu))();class $M{constructor(e){this.dataMaskingRules=e,console.log("[DataMaskingRules]"),console.log(this.dataMaskingRules)}applicable(e){const{text:n}=e.payload;return!!(Object.keys(this.dataMaskingRules).length>0&&n&&"WEB_CHAT/SEND_MESSAGE"===e.type)}apply(e){return{dispatchAction:null,nextAction:this.applyDataMasking(e)}}applyDataMasking(e){let{text:r}=e.payload;if(Object.keys(this.dataMaskingRules).length>0)for(const i of Object.values(this.dataMaskingRules)){const o=new RegExp(i,"g");let a;for(;a=o.exec(r);){const h=a[0].replace(/./g,"#");r=r.replace(a[0],h)}}return e.payload.text=r,e}}const Dd_omnichannelConfig_orgId="d367c413-e0b9-408b-ae1c-382499b369ae",Dd_omnichannelConfig_orgUrl="https://omnichannel-crm.omnichannelengagementhub.com",Dd_omnichannelConfig_widgetId="3a352b95-5d67-4e47-af28-eca029b03928";let Dp=(()=>{class t{}return t.canUploadAttachment=!1,t})();function Pd(t,e){return new M(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,a=0;for(let h=0;h<r;h++){const A=$e(t[h]);let V=!1;n.add(A.subscribe({next:q=>{V||(V=!0,a++),i[h]=q},error:q=>n.error(q),complete:()=>{o++,(o===r||!V)&&(a===r&&n.next(e?e.reduce((q,Y,ie)=>(q[Y]=i[ie],q),{}):i),n.complete())}}))}})}class XM extends f{constructor(e,n){super()}schedule(e,n=0){return this}}class ZM extends XM{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){if(this.closed)return this;this.state=e;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(i,this.id,n),this}requestAsyncId(e,n,r=0){return setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!==r&&this.delay===r&&!1===this.pending)return n;clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=!!o&&o||new Error(o)}if(r)return this.unsubscribe(),i}_unsubscribe(){const e=this.id,n=this.scheduler,r=n.actions,i=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&r.splice(i,1),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null}}let cT=(()=>{class t{constructor(n,r=t.now){this.SchedulerAction=n,this.now=r}schedule(n,r=0,i){return new this.SchedulerAction(this,n).schedule(i,r)}}return t.now=()=>Date.now(),t})();class ss extends cT{constructor(e,n=cT.now){super(e,()=>ss.delegate&&ss.delegate!==this?ss.delegate.now():n()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,n=0,r){return ss.delegate&&ss.delegate!==this?ss.delegate.schedule(e,n,r):super.schedule(e,n,r)}flush(e){const{actions:n}=this;if(this.active)return void n.push(e);let r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this.active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const n1=new class extends ss{}(class extends ZM{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!==r&&r>0||null===r&&this.delay>0?super.requestAsyncId(e,n,r):e.flush(this)}}),r1=new M(t=>t.complete());class oi{constructor(e,n,r){this.kind=e,this.value=n,this.error=r,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,n,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return n&&n(this.error);case"C":return r&&r()}}accept(e,n,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,n,r)}toObservable(){switch(this.kind){case"N":return function(...t){let e=t[t.length-1];return he(e)?(t.pop(),Fe(t,e)):ze(t)}(this.value);case"E":return function(t,e){return new M(n=>n.error(t))}(this.error);case"C":return function(t){return t?function(t){return new M(e=>t.schedule(()=>e.complete()))}(t):r1}()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new oi("N",e):oi.undefinedValueNotification}static createError(e){return new oi("E",void 0,e)}static createComplete(){return oi.completeNotification}}oi.completeNotification=new oi("C"),oi.undefinedValueNotification=new oi("N",void 0);class Ad extends m{constructor(e,n,r=0){super(e),this.scheduler=n,this.delay=r}static dispatch(e){const{notification:n,destination:r}=e;n.observe(r),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(Ad.dispatch,this.delay,new l1(e,this.destination)))}_next(e){this.scheduleMessage(oi.createNext(e))}_error(e){this.scheduleMessage(oi.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(oi.createComplete()),this.unsubscribe()}}class l1{constructor(e,n){this.notification=e,this.destination=n}}class lT extends te{constructor(e=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const n=this._events;n.push(e),n.length>this._bufferSize&&n.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new d1(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;let a;if(this.closed)throw new $;if(this.isStopped||this.hasError?a=f.EMPTY:(this.observers.push(e),a=new ce(this,e)),i&&e.add(e=new Ad(e,i)),n)for(let h=0;h<o&&!e.closed;h++)e.next(r[h]);else for(let h=0;h<o&&!e.closed;h++)e.next(r[h].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),a}_getNow(){return(this.scheduler||n1).now()}_trimBufferThenGetEvents(){const e=this._getNow(),n=this._bufferSize,r=this._windowTime,i=this._events,o=i.length;let a=0;for(;a<o&&!(e-i[a].time<r);)a++;return o>n&&(a=Math.max(a,o-n)),a>0&&i.splice(0,a),i}}class d1{constructor(e,n){this.time=e,this.value=n}}let f1=(()=>{class t{constructor(n){this.document=n,this._loadedLibraries={}}lazyLoad(){return function(...t){if(1===t.length){const e=t[0];if(l(e))return Pd(e,null);if(C(e)&&Object.getPrototypeOf(e)===Object.prototype){const n=Object.keys(e);return Pd(n.map(r=>e[r]),n)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Pd(t=1===t.length&&l(t[0])?t[0]:t,null).pipe(Se(n=>e(...n)))}return Pd(t,null)}([this.loadScript("https://cdn.botframework.com/botframework-webchat/4.9.2/webchat.js")])}loadScript(n){if(this._loadedLibraries[n])return this._loadedLibraries[n].asObservable();this._loadedLibraries[n]=new lT;const r=this.document.createElement("script");return r.type="text/javascript",r.async=!0,r.src=n,r.onload=()=>{this._loadedLibraries[n].next(),this._loadedLibraries[n].complete()},this.document.body.appendChild(r),this._loadedLibraries[n].asObservable()}loadStyle(n){if(this._loadedLibraries[n])return this._loadedLibraries[n].asObservable();this._loadedLibraries[n]=new lT;const r=this.document.createElement("link");return r.type="text/css",r.href=n,r.rel="stylesheet",r.onload=()=>{this._loadedLibraries[n].next(),this._loadedLibraries[n].complete()},document.getElementsByTagName("head")[0].appendChild(r),this._loadedLibraries[n].asObservable()}}return t.\u0275fac=function(n){return new(n||t)(Ut(rr))},t.\u0275prov=Ft({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function h1(t,e){1&t&&(so(0,"div",8),so(1,"span",9),hc(2," \u{1f440} "),ao(),ao())}function p1(t,e){if(1&t){const n=zf();so(0,"div",3),so(1,"div",4),hc(2,"LiveChat with Omnichannel Chat SDK "),so(3,"span",5),xl("click",function(){return Hr(n),Ll().endChat()}),hc(4," \u274c "),ao(),ao(),Nl(5,h1,3,0,"div",6),function(t,e,n,r){so(t,e,n,r),ao()}(6,"div",7),ao()}if(2&t){const n=Ll();wl(5),dc("ngIf",n.loading)}}function g1(t,e){if(1&t){const n=zf();so(0,"div",10),xl("click",function(){return Hr(n),Ll().startChat()}),so(1,"span"),hc(2," \u{1f44b} "),ao(),ao()}}const dT=(()=>{const t={orgId:Dd_omnichannelConfig_orgId||"",orgUrl:Dd_omnichannelConfig_orgUrl||"",widgetId:Dd_omnichannelConfig_widgetId||""},e=new URLSearchParams(window.location.search);return null!==e.get("orgUrl")&&(t.orgUrl=e.get("orgUrl")),null!==e.get("orgId")&&(t.orgId=e.get("orgId")),null!==e.get("widgetId")&&(t.widgetId=e.get("widgetId")),t})(),fT=(()=>{const t={telemetry:{disable:!1,ariaTelemetryKey:""}},e=new URLSearchParams(window.location.search);return null!==e.get("telemetry")&&(t.telemetry.disable="true"!=e.get("telemetry")),null!==e.get("ariaTelemetryKey")&&(t.telemetry.ariaTelemetryKey=e.get("ariaTelemetryKey")||""),t})(),hT=(()=>{const t={disable:!0},e=new URLSearchParams(window.location.search);return null!==e.get("debug")&&(t.disable="true"!=e.get("debug")),t})();console.log("%c [OmnichannelConfig]","background-color:#001433;color:#fff"),console.log(dT),console.log("%c [debugConfig]","background-color:#001433;color:#fff"),console.log(hT),console.log("%c [telemetryConfig]","background-color:#001433;color:#fff"),console.log(fT);const m1=(console.log("[createAvatarMiddleware]"),()=>e=>n=>{console.log("[AvatarMiddleware]");const{activity:{channelData:{tags:r},from:{name:i},text:o},fromUser:a}=n;return console.log(n),r&&r.includes("system")?(console.log(`[AvatarMiddleware][Message][System] ${o}`),au.createElement("div",null,"\u2757")):null!=a&&(a?a?(console.log(`[AvatarMiddleware][Message][Customer] ${o}`),au.createElement("div",{className:"webchat__avatar"},au.createElement("p",{className:"webchat__avatar_initials"}," ",uT(i)||"CU","  "))):e(n):(console.log(`[AvatarMiddleware][Message][Agent] ${o}`),au.createElement("div",{className:"webchat__avatar"},au.createElement("p",{className:"webchat__avatar_initials"}," ",uT(i)," "))))}),y1=(console.log("[createActivityMiddleware]"),()=>e=>n=>{if(console.log("%c [ActivityMiddleware]","background: #2a9fd4; color: #fff"),console.log(n),n.activity){if(n.activity.channelData&&n.activity.channelData.tags&&n.activity.channelData.tags.includes("system"))return console.log(`%c [ActivityMiddleware][Message][System] ${n.activity.text}`,"background: #2a9fd4; color: #fff"),r=>au.createElement("div",{key:n.activity.id,className:"system-message"},e(n)(r));if(void 0===n.activity.text||null==n.activity.text)return e(n);"bot"===n.activity.from.role&&console.log(`%c [ActivityMiddleware][Message][Agent] ${n.activity.text}`,"background: #2a9fd4; color: #fff"),"user"===n.activity.from.role&&console.log(`%c [ActivityMiddleware][Message][Customer] ${n.activity.text}`,"background: #2a9fd4; color: #fff")}return e(n)}),v1=()=>e=>n=>{console.log("%c [activityStatusMiddleware]","background: #238636; color: #fff"),console.log(n);let r="";(t=>t.activity.channelData&&t.activity.channelData.tags&&t.activity.channelData.tags.includes("system"))(n)?r="System":(t=>"bot"===t.activity.from.role)(n)?r="Agent":(t=>"user"===t.activity.from.role)(n)&&(r="Customer"),console.log(`%c [activityStatusMiddleware][Message][${r}] ${n.activity.text}`,"background: #238636; color: #fff"),n.sendState===uu.Sent?console.log(`%c [activityStatusMiddleware][Message][${r}][Status] Sent!`,"background: #238636; color: #fff"):n.sendState===uu.Sending?console.log(`%c [activityStatusMiddleware][Message][${r}][Status] Sending...`,"background: #238636; color: #fff"):n.sendState===uu.SendFailed&&console.log(`%c [activityStatusMiddleware][Message][${r}][Status] Failed :(`,"background: #238636; color: #fff")},pT={bubbleBorderRadius:10,bubbleNubSize:10,bubbleNubOffset:15,bubbleFromUserBorderRadius:10,bubbleFromUserNubSize:10,bubbleFromUserNubOffset:15,bubbleFromUserBackground:"rgb(246, 246, 246)"};let T1=(()=>{class t{constructor(n,r){this.webChatControlService=n,this.document=r,this.title="angular-botframework-webchat-control",this.webChat=null,this.chatSDK=null,this.chatAdapter=null,this.loading=!1,this.hasChatStarted=!1,this.webChatStore=null}ngOnInit(){var n=this;return(0,Rd.Z)(function*(){console.log("[ngOnInit]"),n.webChatControlService.lazyLoad().subscribe(function(){var r=(0,Rd.Z)(function*(i){n.webChat=window.WebChat;const o=Object.assign({},fT),a=new FM.Mg(dT,o);a.setDebug(!hT.disable),yield a.initialize(),n.chatSDK=a,n.webChat=window.WebChat,(t=>{Dp.canUploadAttachment="true"===t.LiveWSAndLiveChatEngJoin.msdyn_enablefileattachmentsforcustomers||!1})(yield a.getLiveChatConfig()),pT.hideUploadButton=!Dp.canUploadAttachment;const A=localStorage.getItem("liveChatContext");A&&Object.keys(JSON.parse(A)).length>0&&(console.log("[liveChatContext]"),console.log(A))});return function(i){return r.apply(this,arguments)}}())})()}startChat(){var n=this;return(0,Rd.Z)(function*(){var r,i,o,a;console.log("[startChat]");const h=yield null===(r=n.chatSDK)||void 0===r?void 0:r.getDataMaskingRules();console.log(h);const A=(console.log("[createCustomStore]"),Rp.getInstance());n.webChatStore=A.create(),A.subscribe("DataMasking",(t=>(console.log("[createDataMaskingMiddleware]"),new $M(t)))(h));const V={},q=localStorage.getItem("liveChatContext");q&&Object.keys(JSON.parse(q)).length>0&&(console.log("[liveChatContext]"),V.liveChatContext=JSON.parse(q)),n.hasChatStarted=!0,n.loading=!0,yield null===(i=n.chatSDK)||void 0===i?void 0:i.startChat(V);const Y=yield null===(o=n.chatSDK)||void 0===o?void 0:o.getCurrentLiveChatContext();Y&&Object.keys(Y).length&&localStorage.setItem("liveChatContext",JSON.stringify(Y));const ie=yield null===(a=n.chatSDK)||void 0===a?void 0:a.createChatAdapter();n.chatAdapter=ie,n.loading=!1,n.webChat.renderWebChat({directLine:ie,sendTypingIndicator:!0,styleOptions:pT,store:n.webChatStore,avatarMiddleware:m1,activityMiddleware:y1,activityStatusMiddleware:v1},n.document.getElementById("chat-container"))})()}endChat(){var n=this;return(0,Rd.Z)(function*(){var r;console.log("[endChat]"),yield null===(r=n.chatSDK)||void 0===r?void 0:r.endChat(),n.hasChatStarted=!1;const i=n.document.getElementById("chat-container");for(;i.firstChild;)i.firstChild.remove()})()}}return t.\u0275fac=function(n){return new(n||t)(Lt(f1),Lt(rr))},t.\u0275cmp=ji({type:t,selectors:[["app-root"]],decls:3,vars:2,consts:[["id","root"],["id","chat-root",4,"ngIf"],["id","chat-button",3,"click",4,"ngIf"],["id","chat-root"],[1,"chat-header"],[3,"click"],["id","loading-screen",4,"ngIf"],["id","chat-container"],["id","loading-screen"],["id","loader"],["id","chat-button",3,"click"]],template:function(n,r){1&n&&(so(0,"div",0),Nl(1,p1,7,1,"div",1),Nl(2,g1,3,0,"div",2),ao()),2&n&&(wl(1),dc("ngIf",r.hasChatStarted),wl(1),dc("ngIf",!r.hasChatStarted&&!r.loading))},directives:[G0],styles:['body[_ngcontent-%COMP%]{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}code[_ngcontent-%COMP%]{font-family:source-code-pro,Menlo,Monaco,Consolas,"Courier New",monospace}#chat-root[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:400px;max-width:400px;min-height:600px;max-height:600px;width:400px;height:600px;position:fixed;right:0;bottom:0;border-radius:4px;margin:0 20px 60px 0;box-shadow:0 0 15px 2px #161b224d;font-family:"Segoe UI",Arial,sans-serif}#chat-container[_ngcontent-%COMP%]{width:100%;height:100%}.chat-header[_ngcontent-%COMP%]{border-bottom:#E6E6E6 solid 1px;padding:10px;display:flex;justify-content:space-between;cursor:pointer}#loading-screen[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:400px;max-width:400px;min-height:600px;max-height:600px;width:400px;height:600px;position:fixed;right:0;bottom:0;border-radius:4px;margin:0 20px 60px 0;box-shadow:0 0 15px 2px #161b224d;align-items:center;justify-content:center}@keyframes spin{to{transform:rotate(360deg)}}#loader[_ngcontent-%COMP%]{font-size:120px;animation:spin 2s linear infinite}#chat-button[_ngcontent-%COMP%]{position:fixed;right:0;bottom:0;border-radius:32px;background-color:#0078d4;box-shadow:0 0 5px 2px #0078d4;padding:10px;margin:0 20px 20px 0;color:#fff;font-size:32px;cursor:pointer}#chat-button[_ngcontent-%COMP%]:hover{box-shadow:0 0 20px 2px #0078d4;transition:all 2s}']}),t})(),b1=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Sr({type:t,bootstrap:[T1]}),t.\u0275inj=zr({providers:[],imports:[[PM]]}),t})();(function(){if(ZC)throw new Error("Cannot enable prod mode after platform setup.");XC=!1})(),RM().bootstrapModule(b1).catch(t=>console.error(t))},1907:K=>{function u(s,E,d,p,T,l,C){try{var P=s[l](C),w=P.value}catch(f){return void d(f)}P.done?E(w):Promise.resolve(w).then(p,T)}K.exports=function(s){return function(){var E=this,d=arguments;return new Promise(function(p,T){var l=s.apply(E,d);function C(w){u(l,p,T,C,P,"next",w)}function P(w){u(l,p,T,C,P,"throw",w)}C(void 0)})}},K.exports.default=K.exports,K.exports.__esModule=!0},8884:K=>{K.exports=function(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")},K.exports.default=K.exports,K.exports.__esModule=!0},2805:K=>{function u(s,E){for(var d=0;d<E.length;d++){var p=E[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(s,p.key,p)}}K.exports=function(s,E,d){return E&&u(s.prototype,E),d&&u(s,d),s},K.exports.default=K.exports,K.exports.__esModule=!0},1819:K=>{K.exports=function(c,s,E){return s in c?Object.defineProperty(c,s,{value:E,enumerable:!0,configurable:!0,writable:!0}):c[s]=E,c},K.exports.default=K.exports,K.exports.__esModule=!0},1127:K=>{K.exports=function(c){return c&&c.__esModule?c:{default:c}},K.exports.default=K.exports,K.exports.__esModule=!0},1298:K=>{function u(c){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(K.exports=u=function(E){return typeof E},K.exports.default=K.exports,K.exports.__esModule=!0):(K.exports=u=function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},K.exports.default=K.exports,K.exports.__esModule=!0),u(c)}K.exports=u,K.exports.default=K.exports,K.exports.__esModule=!0},6533:(K,u,c)=>{K.exports=c(7941)},4762:(K,u,c)=>{"use strict";c.d(u,{ZT:()=>E,_T:()=>p,qq:()=>k,FC:()=>F,V2:()=>U,KL:()=>N});var s=function(Q,te){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ae,he){ae.__proto__=he}||function(ae,he){for(var Se in he)Object.prototype.hasOwnProperty.call(he,Se)&&(ae[Se]=he[Se])})(Q,te)};function E(Q,te){if("function"!=typeof te&&null!==te)throw new TypeError("Class extends value "+String(te)+" is not a constructor or null");function ae(){this.constructor=Q}s(Q,te),Q.prototype=null===te?Object.create(te):(ae.prototype=te.prototype,new ae)}function p(Q,te){var ae={};for(var he in Q)Object.prototype.hasOwnProperty.call(Q,he)&&te.indexOf(he)<0&&(ae[he]=Q[he]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var Se=0;for(he=Object.getOwnPropertySymbols(Q);Se<he.length;Se++)te.indexOf(he[Se])<0&&Object.prototype.propertyIsEnumerable.call(Q,he[Se])&&(ae[he[Se]]=Q[he[Se]])}return ae}function k(Q){return this instanceof k?(this.v=Q,this):new k(Q)}function F(Q,te,ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Se,he=ae.apply(Q,te||[]),oe=[];return Se={},ne("next"),ne("throw"),ne("return"),Se[Symbol.asyncIterator]=function(){return this},Se;function ne(ee){he[ee]&&(Se[ee]=function(le){return new Promise(function(Ce,ye){oe.push([ee,le,Ce,ye])>1||pe(ee,le)})})}function pe(ee,le){try{!function(ee){ee.value instanceof k?Promise.resolve(ee.value.v).then(J,se):me(oe[0][2],ee)}(he[ee](le))}catch(Ce){me(oe[0][3],Ce)}}function J(ee){pe("next",ee)}function se(ee){pe("throw",ee)}function me(ee,le){ee(le),oe.shift(),oe.length&&pe(oe[0][0],oe[0][1])}}function U(Q){var te,ae;return te={},he("next"),he("throw",function(Se){throw Se}),he("return"),te[Symbol.iterator]=function(){return this},te;function he(Se,oe){te[Se]=Q[Se]?function(ne){return(ae=!ae)?{value:k(Q[Se](ne)),done:"return"===Se}:oe?oe(ne):ne}:oe}}function N(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ae,te=Q[Symbol.asyncIterator];return te?te.call(Q):(Q=function(Q){var te="function"==typeof Symbol&&Symbol.iterator,ae=te&&Q[te],he=0;if(ae)return ae.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&he>=Q.length&&(Q=void 0),{value:Q&&Q[he++],done:!Q}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),ae={},he("next"),he("throw"),he("return"),ae[Symbol.asyncIterator]=function(){return this},ae);function he(oe){ae[oe]=Q[oe]&&function(ne){return new Promise(function(pe,re){!function(oe,ne,pe,re){Promise.resolve(re).then(function(J){oe({value:J,done:pe})},ne)}(pe,re,(ne=Q[oe](ne)).done,ne.value)})}}}},8239:(K,u,c)=>{"use strict";function s(d,p,T,l,C,P,w){try{var f=d[P](w),g=f.value}catch(_){return void T(_)}f.done?p(g):Promise.resolve(g).then(l,C)}function E(d){return function(){var p=this,T=arguments;return new Promise(function(l,C){var P=d.apply(p,T);function w(g){s(P,l,C,w,f,"next",g)}function f(g){s(P,l,C,w,f,"throw",g)}w(void 0)})}}c.d(u,{Z:()=>E})},2861:K=>{"use strict";K.exports=JSON.parse('{"i8":"1.1.0-beta.2"}')},6638:K=>{"use strict";K.exports={i8:"1.1.0"}},1528:K=>{"use strict";K.exports={i8:"0.3.0"}},5500:K=>{"use strict";K.exports={i8:"0.1.0"}},8464:K=>{"use strict";K.exports=JSON.parse('{"i8":"1.0.1-main.b650fe1"}')},5233:K=>{"use strict";K.exports={i8:"0.1.2"}},8593:K=>{"use strict";K.exports=JSON.parse('{"_from":"axios@^0.21.4","_id":"axios@0.21.4","_inBundle":false,"_integrity":"sha512-ut5vewkiu8jjGBdqpM44XxjuCjq9LAKeHVmoVfHVzy8eHgxxq8SbAVQNovDA8mVi05kP0Ea/n/UzcSHcTJQfNg==","_location":"/axios","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"axios@^0.21.4","name":"axios","escapedName":"axios","rawSpec":"^0.21.4","saveSpec":null,"fetchSpec":"^0.21.4"},"_requiredBy":["/@microsoft/ocsdk","/@microsoft/omnichannel-ic3core"],"_resolved":"https://registry.npmjs.org/axios/-/axios-0.21.4.tgz","_shasum":"c67b90dc0568e5c1cf2b0b858c43ba28e2eda575","_spec":"axios@^0.21.4","_where":"/home/runner/work/omnichannel-demos/omnichannel-demos/angular-botframework-webchat-control/node_modules/@microsoft/ocsdk","author":{"name":"Matt Zabriskie"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"bugs":{"url":"https://github.com/axios/axios/issues"},"bundleDependencies":false,"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}],"dependencies":{"follow-redirects":"^1.14.0"},"deprecated":false,"description":"Promise based HTTP client for the browser and node.js","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"homepage":"https://axios-http.com","jsdelivr":"dist/axios.min.js","keywords":["xhr","http","ajax","promise","node"],"license":"MIT","main":"index.js","name":"axios","repository":{"type":"git","url":"git+https://github.com/axios/axios.git"},"scripts":{"build":"NODE_ENV=production grunt build","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","examples":"node ./examples/server.js","fix":"eslint --fix lib/**/*.js","postversion":"git push && git push --tags","preversion":"npm test","start":"node ./sandbox/server.js","test":"grunt test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},"typings":"./index.d.ts","unpkg":"dist/axios.min.js","version":"0.21.4"}')}},K=>{K(K.s=8952)}]);