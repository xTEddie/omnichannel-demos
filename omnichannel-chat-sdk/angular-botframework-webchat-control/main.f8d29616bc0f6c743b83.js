(self.webpackChunkangular_botframework_webchat_control=self.webpackChunkangular_botframework_webchat_control||[]).push([[179],{8255:Y=>{function L(E){return Promise.resolve().then(()=>{var p=new Error("Cannot find module '"+E+"'");throw p.code="MODULE_NOT_FOUND",p})}L.keys=()=>[],L.resolve=L,L.id=8255,Y.exports=L},5283:(Y,L,E)=>{"use strict";E.d(L,{_:()=>p});class p extends Error{constructor(R){super(R),this.name="AbortError"}}},8682:(Y,L,E)=>{"use strict";E.r(L),E.d(L,{ChatClient:()=>Qo,ChatThreadClient:()=>Gn});var p={};E.r(p),E.d(p,{AddChatParticipantsRequest:()=>Ve,AddChatParticipantsResult:()=>kt,ChatError:()=>at,ChatMessage:()=>In,ChatMessageContent:()=>Ge,ChatMessageReadReceipt:()=>He,ChatMessageReadReceiptsCollection:()=>Mt,ChatMessagesCollection:()=>Ke,ChatParticipant:()=>ut,ChatParticipantsCollection:()=>nt,ChatThreadItem:()=>ze,ChatThreadProperties:()=>qn,ChatThreadsItemCollection:()=>ct,CommunicationErrorResponse:()=>Ct,CommunicationIdentifierModel:()=>$e,CommunicationUserIdentifierModel:()=>It,CreateChatThreadRequest:()=>ft,CreateChatThreadResult:()=>st,MicrosoftTeamsUserIdentifierModel:()=>pt,PhoneNumberIdentifierModel:()=>et,SendChatMessageRequest:()=>Mn,SendChatMessageResult:()=>ot,SendReadReceiptRequest:()=>it,SendTypingNotificationRequest:()=>dt,UpdateChatMessageRequest:()=>On,UpdateChatThreadRequest:()=>an});var N=E(8239),m=E(4762),R=E(1326);const u=(0,R.YR)("communication-chat");var v=E(3105),M=E(2305),T=E(9432);const h=(0,E(1259).q)({packagePrefix:"Azure.Communication",namespace:"Microsoft.Communication"});var C=E(8199);const w=se=>{const{id:K}=se,X=(0,m._T)(se,["id"]);return Object.assign(Object.assign({},X),{communicationIdentifier:(0,C.J)(K)})},P=se=>{const{communicationIdentifier:K}=se,X=(0,m._T)(se,["communicationIdentifier"]);return Object.assign(Object.assign({},X),{id:(0,C.H)(K)})},k=se=>{const{participants:K,initiatorCommunicationIdentifier:X}=se,he=(0,m._T)(se,["participants","initiatorCommunicationIdentifier"]);let Me=Object.assign({},he);if(X){const Oe=(0,C.H)(X);Me=Object.assign(Object.assign({},Me),{initiator:Oe})}return K&&(Me=Object.assign(Object.assign({},Me),{participants:null==K?void 0:K.map(Oe=>P(Oe))})),Me},O=se=>{const{content:K,senderCommunicationIdentifier:X}=se,he=(0,m._T)(se,["content","senderCommunicationIdentifier"]);let Me=Object.assign({},he);if(K&&(Me=Object.assign(Object.assign({},Me),{content:k(K)})),X){const Oe=(0,C.H)(X);Me=Object.assign(Object.assign({},Me),{sender:Oe})}return Me},U=se=>{const{createdByCommunicationIdentifier:K}=se,X=(0,m._T)(se,["createdByCommunicationIdentifier"]);return K?Object.assign(Object.assign({},X),{createdBy:(0,C.H)(K)}):Object.assign({},X)},H=se=>{const{senderCommunicationIdentifier:K}=se,X=(0,m._T)(se,["senderCommunicationIdentifier"]);return Object.assign(Object.assign({},X),{sender:(0,C.H)(K)})};function te(se){let K="";for(let X=0;X<se.length;X++)K+=String.fromCharCode(se[X]);return btoa(K)}function $(se){const K=atob(se),X=new Uint8Array(K.length);for(let he=0;he<K.length;he++)X[he]=K.charCodeAt(he);return X}const x="$",r="_";function s(se,K){return"Composite"!==K&&"Dictionary"!==K&&("string"==typeof se||"number"==typeof se||"boolean"==typeof se||null!==(null==K?void 0:K.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i))||null==se)}const l=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,f=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;function d(se,K){var X,he;const Me=se.parsedHeaders;if("HEAD"===se.request.method)return Object.assign(Object.assign({},Me),{body:se.parsedBody});const Oe=K&&K.bodyMapper,Pe=Boolean(null==Oe?void 0:Oe.nullable),Ue=null==Oe?void 0:Oe.type.name;if("Stream"===Ue)return Object.assign(Object.assign({},Me),{blobBody:se.blobBody,readableStreamBody:se.readableStreamBody});const ht="Composite"===Ue&&Oe.type.modelProperties||{},qe=Object.keys(ht).some(rt=>""===ht[rt].serializedName);if("Sequence"===Ue||qe){const rt=null!==(X=se.parsedBody)&&void 0!==X?X:[];for(const Et of Object.keys(ht))ht[Et].serializedName&&(rt[Et]=null===(he=se.parsedBody)||void 0===he?void 0:he[Et]);if(Me)for(const Et of Object.keys(Me))rt[Et]=Me[Et];return!Pe||se.parsedBody||Me||0!==Object.getOwnPropertyNames(ht).length?rt:null}return function(se){const K=Object.assign(Object.assign({},se.headers),se.body);return se.hasNullableType&&0===Object.getOwnPropertyNames(K).length?se.shouldWrapBody?{body:null}:null:se.shouldWrapBody?Object.assign(Object.assign({},se.headers),{body:se.body}):K}({body:se.parsedBody,headers:Me,hasNullableType:Pe,shouldWrapBody:s(se.parsedBody,Ue)})}class i{constructor(K={},X=!1){this.modelMappers=K,this.isXML=X}validateConstraints(K,X,he){const Me=(Oe,Pe)=>{throw new Error(`"${he}" with value "${X}" should satisfy the constraint "${Oe}": ${Pe}.`)};if(K.constraints&&null!=X){const{ExclusiveMaximum:Oe,ExclusiveMinimum:Pe,InclusiveMaximum:Ue,InclusiveMinimum:ht,MaxItems:qe,MaxLength:rt,MinItems:Et,MinLength:Tt,MultipleOf:Bt,Pattern:At,UniqueItems:Vt}=K.constraints;if(void 0!==Oe&&X>=Oe&&Me("ExclusiveMaximum",Oe),void 0!==Pe&&X<=Pe&&Me("ExclusiveMinimum",Pe),void 0!==Ue&&X>Ue&&Me("InclusiveMaximum",Ue),void 0!==ht&&X<ht&&Me("InclusiveMinimum",ht),void 0!==qe&&X.length>qe&&Me("MaxItems",qe),void 0!==rt&&X.length>rt&&Me("MaxLength",rt),void 0!==Et&&X.length<Et&&Me("MinItems",Et),void 0!==Tt&&X.length<Tt&&Me("MinLength",Tt),void 0!==Bt&&X%Bt!=0&&Me("MultipleOf",Bt),At){const rn="string"==typeof At?new RegExp(At):At;("string"!=typeof X||null===X.match(rn))&&Me("Pattern",At)}Vt&&X.some((rn,Kn,Un)=>Un.indexOf(rn)!==Kn)&&Me("UniqueItems",Vt)}}serialize(K,X,he,Me={xml:{}}){var Oe,Pe,Ue;const ht={xml:{rootName:null!==(Oe=Me.xml.rootName)&&void 0!==Oe?Oe:"",includeRoot:null!==(Pe=Me.xml.includeRoot)&&void 0!==Pe&&Pe,xmlCharKey:null!==(Ue=Me.xml.xmlCharKey)&&void 0!==Ue?Ue:r}};let qe={};const rt=K.type.name;he||(he=K.serializedName),null!==rt.match(/^Sequence$/i)&&(qe=[]),K.isConstant&&(X=K.defaultValue);const{required:Et,nullable:Tt}=K;if(Et&&Tt&&void 0===X)throw new Error(`${he} cannot be undefined.`);if(Et&&!Tt&&null==X)throw new Error(`${he} cannot be null or undefined.`);if(!Et&&!1===Tt&&null===X)throw new Error(`${he} cannot be null.`);return null==X||null!==rt.match(/^any$/i)?qe=X:null!==rt.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)?qe=function(se,K,X){if(null!=X)if(null!==se.match(/^Number$/i)){if("number"!=typeof X)throw new Error(`${K} with value ${X} must be of type number.`)}else if(null!==se.match(/^String$/i)){if("string"!=typeof X.valueOf())throw new Error(`${K} with value "${X}" must be of type string.`)}else if(null!==se.match(/^Uuid$/i)){if("string"!=typeof X.valueOf()||!function(se){return f.test(se)}(X))throw new Error(`${K} with value "${X}" must be of type string and a valid uuid.`)}else if(null!==se.match(/^Boolean$/i)){if("boolean"!=typeof X)throw new Error(`${K} with value ${X} must be of type boolean.`)}else if(null!==se.match(/^Stream$/i)){const he=typeof X;if(!("string"===he||"function"==typeof X.pipe||X instanceof ArrayBuffer||ArrayBuffer.isView(X)||("function"==typeof Blob||"object"==typeof Blob)&&X instanceof Blob||"function"===he))throw new Error(`${K} must be a string, Blob, ArrayBuffer, ArrayBufferView, NodeJS.ReadableStream, or () => NodeJS.ReadableStream.`)}return X}(rt,he,X):null!==rt.match(/^Enum$/i)?qe=function(se,K,X){if(!K)throw new Error(`Please provide a set of allowedValues to validate ${se} as an Enum Type.`);if(!K.some(Me=>"string"==typeof Me.valueOf()?Me.toLowerCase()===X.toLowerCase():Me===X))throw new Error(`${X} is not a valid value for ${se}. The valid values are: ${JSON.stringify(K)}.`);return X}(he,K.type.allowedValues,X):null!==rt.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)?qe=function(se,K,X){if(null!=K)if(null!==se.match(/^Date$/i)){if(!(K instanceof Date||"string"==typeof K.valueOf()&&!isNaN(Date.parse(K))))throw new Error(`${X} must be an instanceof Date or a string in ISO8601 format.`);K=K instanceof Date?K.toISOString().substring(0,10):new Date(K).toISOString().substring(0,10)}else if(null!==se.match(/^DateTime$/i)){if(!(K instanceof Date||"string"==typeof K.valueOf()&&!isNaN(Date.parse(K))))throw new Error(`${X} must be an instanceof Date or a string in ISO8601 format.`);K=K instanceof Date?K.toISOString():new Date(K).toISOString()}else if(null!==se.match(/^DateTimeRfc1123$/i)){if(!(K instanceof Date||"string"==typeof K.valueOf()&&!isNaN(Date.parse(K))))throw new Error(`${X} must be an instanceof Date or a string in RFC-1123 format.`);K=K instanceof Date?K.toUTCString():new Date(K).toUTCString()}else if(null!==se.match(/^UnixTime$/i)){if(!(K instanceof Date||"string"==typeof K.valueOf()&&!isNaN(Date.parse(K))))throw new Error(`${X} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);K=function(se){if(se)return"string"==typeof se.valueOf()&&(se=new Date(se)),Math.floor(se.getTime()/1e3)}(K)}else if(null!==se.match(/^TimeSpan$/i)&&!function(se){return l.test(se)}(K))throw new Error(`${X} must be a string in ISO 8601 format. Instead was "${K}".`);return K}(rt,X,he):null!==rt.match(/^ByteArray$/i)?qe=function(se,K){if(null!=K){if(!(K instanceof Uint8Array))throw new Error(`${se} must be of type Uint8Array.`);K=te(K)}return K}(he,X):null!==rt.match(/^Base64Url$/i)?qe=function(se,K){if(null!=K){if(!(K instanceof Uint8Array))throw new Error(`${se} must be of type Uint8Array.`);K=function(se){if(se){if(!(se instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");return function(se,K){let X=se.length;for(;X-1>=0&&"="===se[X-1];)--X;return se.substr(0,X)}(te(se)).replace(/\+/g,"-").replace(/\//g,"_")}}(K)}return K}(he,X):null!==rt.match(/^Sequence$/i)?qe=function(se,K,X,he,Me,Oe){var Pe;if(!Array.isArray(X))throw new Error(`${he} must be of type Array.`);let Ue=K.type.element;if(!Ue||"object"!=typeof Ue)throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${he}.`);"Composite"===Ue.type.name&&Ue.type.className&&(Ue=null!==(Pe=se.modelMappers[Ue.type.className])&&void 0!==Pe?Pe:Ue);const ht=[];for(let qe=0;qe<X.length;qe++){const rt=se.serialize(Ue,X[qe],he,Oe);if(Me&&Ue.xmlNamespace){const Et=Ue.xmlNamespacePrefix?`xmlns:${Ue.xmlNamespacePrefix}`:"xmlns";"Composite"===Ue.type.name?(ht[qe]=Object.assign({},rt),ht[qe][x]={[Et]:Ue.xmlNamespace}):(ht[qe]={},ht[qe][Oe.xml.xmlCharKey]=rt,ht[qe][x]={[Et]:Ue.xmlNamespace})}else ht[qe]=rt}return ht}(this,K,X,he,Boolean(this.isXML),ht):null!==rt.match(/^Dictionary$/i)?qe=function(se,K,X,he,Me,Oe){if("object"!=typeof X)throw new Error(`${he} must be of type object.`);const Pe=K.type.value;if(!Pe||"object"!=typeof Pe)throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${he}.`);const Ue={};for(const ht of Object.keys(X)){const qe=se.serialize(Pe,X[ht],he,Oe);Ue[ht]=ue(Pe,qe,Me,Oe)}if(Me&&K.xmlNamespace){const qe=Ue;return qe[x]={[K.xmlNamespacePrefix?`xmlns:${K.xmlNamespacePrefix}`:"xmlns"]:K.xmlNamespace},qe}return Ue}(this,K,X,he,Boolean(this.isXML),ht):null!==rt.match(/^Composite$/i)&&(qe=function(se,K,X,he,Me,Oe){if(Be(se,K)&&(K=_e(se,K,X,"clientName")),null!=X){const Pe={},Ue=ee(se,K,he);for(const qe of Object.keys(Ue)){const rt=Ue[qe];if(rt.readOnly)continue;let Et,Tt=Pe;if(se.isXML)Et=rt.xmlIsWrapped?rt.xmlName:rt.xmlElementName||rt.xmlName;else{const Bt=ge(rt.serializedName);Et=Bt.pop();for(const At of Bt)null==Tt[At]&&(null!=X[qe]||void 0!==rt.defaultValue)&&(Tt[At]={}),Tt=Tt[At]}if(null!=Tt){if(Me&&K.xmlNamespace){const Kn=K.xmlNamespacePrefix?`xmlns:${K.xmlNamespacePrefix}`:"xmlns";Tt[x]=Object.assign(Object.assign({},Tt[x]),{[Kn]:K.xmlNamespace})}const Bt=""!==rt.serializedName?he+"."+rt.serializedName:he;let At=X[qe];const Vt=Be(se,K);Vt&&Vt.clientName===qe&&null==At&&(At=K.serializedName);const rn=se.serialize(rt,At,Bt,Oe);if(void 0!==rn&&null!=Et){const Kn=ue(rt,rn,Me,Oe);Me&&rt.xmlIsAttribute?(Tt[x]=Tt[x]||{},Tt[x][Et]=rn):Tt[Et]=Me&&rt.xmlIsWrapped?{[rt.xmlElementName]:Kn}:Kn}}}const ht=function(se,K,X){const he=K.type.additionalProperties;if(!he&&K.type.className){const Me=re(se,K,X);return null==Me?void 0:Me.type.additionalProperties}return he}(se,K,he);if(ht){const qe=Object.keys(Ue);for(const rt in X)qe.every(Tt=>Tt!==rt)&&(Pe[rt]=se.serialize(ht,X[rt],he+'["'+rt+'"]',Oe))}return Pe}return X}(this,K,X,he,Boolean(this.isXML),ht)),qe}deserialize(K,X,he,Me={xml:{}}){var Oe,Pe,Ue;const ht={xml:{rootName:null!==(Oe=Me.xml.rootName)&&void 0!==Oe?Oe:"",includeRoot:null!==(Pe=Me.xml.includeRoot)&&void 0!==Pe&&Pe,xmlCharKey:null!==(Ue=Me.xml.xmlCharKey)&&void 0!==Ue?Ue:r}};if(null==X)return this.isXML&&"Sequence"===K.type.name&&!K.xmlIsWrapped&&(X=[]),void 0!==K.defaultValue&&(X=K.defaultValue),X;let qe;const rt=K.type.name;if(he||(he=K.serializedName),null!==rt.match(/^Composite$/i))qe=function(se,K,X,he,Me){var Oe,Pe;const Ue=null!==(Oe=Me.xml.xmlCharKey)&&void 0!==Oe?Oe:r;Be(se,K)&&(K=_e(se,K,X,"serializedName"));const ht=ee(se,K,he);let qe={};const rt=[];for(const Tt of Object.keys(ht)){const Bt=ht[Tt],At=ge(ht[Tt].serializedName);rt.push(At[0]);const{serializedName:Vt,xmlName:rn,xmlElementName:Kn}=Bt;let Un=he;""!==Vt&&void 0!==Vt&&(Un=he+"."+Vt);const yi=Bt.headerCollectionPrefix;if(yi){const Nn={};for(const sr of Object.keys(X))sr.startsWith(yi)&&(Nn[sr.substring(yi.length)]=se.deserialize(Bt.type.value,X[sr],Un,Me)),rt.push(sr);qe[Tt]=Nn}else if(se.isXML)if(Bt.xmlIsAttribute&&X[x])qe[Tt]=se.deserialize(Bt,X[x][rn],Un,Me);else if(Bt.xmlIsMsText)void 0!==X[Ue]?qe[Tt]=X[Ue]:"string"==typeof X&&(qe[Tt]=X);else{const Nn=Kn||rn||Vt;if(Bt.xmlIsWrapped){const sr=X[rn],co=null!==(Pe=null==sr?void 0:sr[Kn])&&void 0!==Pe?Pe:[];qe[Tt]=se.deserialize(Bt,co,Un,Me),rt.push(rn)}else qe[Tt]=se.deserialize(Bt,X[Nn],Un,Me),rt.push(Nn)}else{let Nn,sr=X;for(const Wr of At){if(!sr)break;sr=sr[Wr]}Nn=sr;const co=K.type.polymorphicDiscriminator;let Yo;if(co&&Tt===co.clientName&&null==Nn&&(Nn=K.serializedName),Array.isArray(X[Tt])&&""===ht[Tt].serializedName){Nn=X[Tt];const Wr=se.deserialize(Bt,Nn,Un,Me);for(const[ks,Ga]of Object.entries(qe))Object.prototype.hasOwnProperty.call(Wr,ks)||(Wr[ks]=Ga);qe=Wr}else(void 0!==Nn||void 0!==Bt.defaultValue)&&(Yo=se.deserialize(Bt,Nn,Un,Me),qe[Tt]=Yo)}}const Et=K.type.additionalProperties;if(Et){const Tt=Bt=>{for(const At in ht)if(ge(ht[At].serializedName)[0]===Bt)return!1;return!0};for(const Bt in X)Tt(Bt)&&(qe[Bt]=se.deserialize(Et,X[Bt],he+'["'+Bt+'"]',Me))}else if(X)for(const Tt of Object.keys(X))void 0===qe[Tt]&&!rt.includes(Tt)&&!Ae(Tt,Me)&&(qe[Tt]=X[Tt]);return qe}(this,K,X,he,ht);else{if(this.isXML){const Et=ht.xml.xmlCharKey;void 0!==X[x]&&void 0!==X[Et]&&(X=X[Et])}null!==rt.match(/^Number$/i)?(qe=parseFloat(X),isNaN(qe)&&(qe=X)):null!==rt.match(/^Boolean$/i)?qe="true"===X||"false"!==X&&X:null!==rt.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)?qe=X:null!==rt.match(/^(Date|DateTime|DateTimeRfc1123)$/i)?qe=new Date(X):null!==rt.match(/^UnixTime$/i)?qe=function(se){if(se)return new Date(1e3*se)}(X):null!==rt.match(/^ByteArray$/i)?qe=$(X):null!==rt.match(/^Base64Url$/i)?qe=function(se){if(se){if(se&&"string"!=typeof se.valueOf())throw new Error("Please provide an input of type string for converting to Uint8Array");return $(se=se.replace(/-/g,"+").replace(/_/g,"/"))}}(X):null!==rt.match(/^Sequence$/i)?qe=function(se,K,X,he,Me){var Oe;let Pe=K.type.element;if(!Pe||"object"!=typeof Pe)throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${he}`);if(X){Array.isArray(X)||(X=[X]),"Composite"===Pe.type.name&&Pe.type.className&&(Pe=null!==(Oe=se.modelMappers[Pe.type.className])&&void 0!==Oe?Oe:Pe);const Ue=[];for(let ht=0;ht<X.length;ht++)Ue[ht]=se.deserialize(Pe,X[ht],`${he}[${ht}]`,Me);return Ue}return X}(this,K,X,he,ht):null!==rt.match(/^Dictionary$/i)&&(qe=function(se,K,X,he,Me){const Oe=K.type.value;if(!Oe||"object"!=typeof Oe)throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${he}`);if(X){const Pe={};for(const Ue of Object.keys(X))Pe[Ue]=se.deserialize(Oe,X[Ue],he,Me);return Pe}return X}(this,K,X,he,ht))}return K.isConstant&&(qe=K.defaultValue),qe}}function y(se={},K=!1){return new i(se,K)}function ge(se){const K=[];let X="";if(se){const he=se.split(".");for(const Me of he)"\\"===Me.charAt(Me.length-1)?X+=Me.substr(0,Me.length-1)+".":(X+=Me,K.push(X),X="")}return K}function re(se,K,X){const he=K.type.className;if(!he)throw new Error(`Class name for model "${X}" is not provided in the mapper "${JSON.stringify(K,void 0,2)}".`);return se.modelMappers[he]}function ee(se,K,X){let he=K.type.modelProperties;if(!he){const Me=re(se,K,X);if(!Me)throw new Error(`mapper() cannot be null or undefined for model "${K.type.className}".`);if(he=null==Me?void 0:Me.type.modelProperties,!he)throw new Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(Me)}" of type "${K.type.className}" for object "${X}".`)}return he}function ue(se,K,X,he){if(!X||!se.xmlNamespace)return K;const Oe={[se.xmlNamespacePrefix?`xmlns:${se.xmlNamespacePrefix}`:"xmlns"]:se.xmlNamespace};if(["Composite"].includes(se.type.name)){if(K[x])return K;{const Ue=Object.assign({},K);return Ue[x]=Oe,Ue}}const Pe={};return Pe[he.xml.xmlCharKey]=K,Pe[x]=Oe,Pe}function Ae(se,K){return[x,K.xml.xmlCharKey].includes(se)}function _e(se,K,X,he){var Me;const Oe=Be(se,K);if(Oe){let Pe=Oe[he];if(Pe){"serializedName"===he&&(Pe=Pe.replace(/\\/gi,""));const Ue=X[Pe],ht=null!==(Me=K.type.uberParent)&&void 0!==Me?Me:K.type.className;if("string"==typeof Ue&&ht){const qe=function(se,K,X){const he=[X];for(;he.length;){const Me=he.shift(),Oe=K===Me?K:Me+"."+K;if(Object.prototype.hasOwnProperty.call(se,Oe))return se[Oe];for(const[Pe,Ue]of Object.entries(se))Pe.startsWith(Me+".")&&Ue.type.uberParent===Me&&Ue.type.className&&he.push(Ue.type.className)}}(se.modelMappers.discriminators,Ue,ht);qe&&(K=qe)}}}return K}function Be(se,K){return K.type.polymorphicDiscriminator||De(se,K.type.uberParent)||De(se,K.type.className)}function De(se,K){return K&&se.modelMappers[K]&&se.modelMappers[K].type.polymorphicDiscriminator}const Mt={type:{name:"Composite",className:"ChatMessageReadReceiptsCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatMessageReadReceipt"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},He={type:{name:"Composite",className:"ChatMessageReadReceipt",modelProperties:{senderCommunicationIdentifier:{serializedName:"senderCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},chatMessageId:{serializedName:"chatMessageId",required:!0,type:{name:"String"}},readOn:{serializedName:"readOn",required:!0,type:{name:"DateTime"}}}}},$e={type:{name:"Composite",className:"CommunicationIdentifierModel",modelProperties:{rawId:{serializedName:"rawId",type:{name:"String"}},communicationUser:{serializedName:"communicationUser",type:{name:"Composite",className:"CommunicationUserIdentifierModel"}},phoneNumber:{serializedName:"phoneNumber",type:{name:"Composite",className:"PhoneNumberIdentifierModel"}},microsoftTeamsUser:{serializedName:"microsoftTeamsUser",type:{name:"Composite",className:"MicrosoftTeamsUserIdentifierModel"}}}}},It={type:{name:"Composite",className:"CommunicationUserIdentifierModel",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}}}}},et={type:{name:"Composite",className:"PhoneNumberIdentifierModel",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"String"}}}}},pt={type:{name:"Composite",className:"MicrosoftTeamsUserIdentifierModel",modelProperties:{userId:{serializedName:"userId",required:!0,type:{name:"String"}},isAnonymous:{serializedName:"isAnonymous",type:{name:"Boolean"}},cloud:{serializedName:"cloud",type:{name:"String"}}}}},Ct={type:{name:"Composite",className:"CommunicationErrorResponse",modelProperties:{error:{serializedName:"error",type:{name:"Composite",className:"ChatError"}}}}},at={type:{name:"Composite",className:"ChatError",modelProperties:{code:{serializedName:"code",required:!0,type:{name:"String"}},message:{serializedName:"message",required:!0,type:{name:"String"}},target:{serializedName:"target",readOnly:!0,type:{name:"String"}},details:{serializedName:"details",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}},innerError:{serializedName:"innererror",type:{name:"Composite",className:"ChatError"}}}}},it={type:{name:"Composite",className:"SendReadReceiptRequest",modelProperties:{chatMessageId:{serializedName:"chatMessageId",required:!0,type:{name:"String"}}}}},Mn={type:{name:"Composite",className:"SendChatMessageRequest",modelProperties:{content:{serializedName:"content",required:!0,type:{name:"String"}},senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}},type:{serializedName:"type",type:{name:"Enum",allowedValues:["text","html","topicUpdated","participantAdded","participantRemoved"]}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},ot={type:{name:"Composite",className:"SendChatMessageResult",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}}}}},Ke={type:{name:"Composite",className:"ChatMessagesCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatMessage"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},In={type:{name:"Composite",className:"ChatMessage",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},type:{serializedName:"type",required:!0,type:{name:"Enum",allowedValues:["text","html","topicUpdated","participantAdded","participantRemoved"]}},sequenceId:{serializedName:"sequenceId",required:!0,type:{name:"String"}},version:{serializedName:"version",required:!0,type:{name:"String"}},content:{serializedName:"content",type:{name:"Composite",className:"ChatMessageContent"}},senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}},createdOn:{serializedName:"createdOn",required:!0,type:{name:"DateTime"}},senderCommunicationIdentifier:{serializedName:"senderCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},editedOn:{serializedName:"editedOn",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},Ge={type:{name:"Composite",className:"ChatMessageContent",modelProperties:{message:{serializedName:"message",type:{name:"String"}},topic:{serializedName:"topic",type:{name:"String"}},participants:{serializedName:"participants",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},initiatorCommunicationIdentifier:{serializedName:"initiatorCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}}}}},ut={type:{name:"Composite",className:"ChatParticipant",modelProperties:{communicationIdentifier:{serializedName:"communicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},displayName:{serializedName:"displayName",type:{name:"String"}},shareHistoryTime:{serializedName:"shareHistoryTime",type:{name:"DateTime"}}}}},On={type:{name:"Composite",className:"UpdateChatMessageRequest",modelProperties:{content:{serializedName:"content",type:{name:"String"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},nt={type:{name:"Composite",className:"ChatParticipantsCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Ve={type:{name:"Composite",className:"AddChatParticipantsRequest",modelProperties:{participants:{serializedName:"participants",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}}}}},kt={type:{name:"Composite",className:"AddChatParticipantsResult",modelProperties:{invalidParticipants:{serializedName:"invalidParticipants",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}}}}},ft={type:{name:"Composite",className:"CreateChatThreadRequest",modelProperties:{topic:{serializedName:"topic",required:!0,type:{name:"String"}},participants:{serializedName:"participants",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}}}}},st={type:{name:"Composite",className:"CreateChatThreadResult",modelProperties:{chatThread:{serializedName:"chatThread",type:{name:"Composite",className:"ChatThreadProperties"}},invalidParticipants:{serializedName:"invalidParticipants",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}}}}},qn={type:{name:"Composite",className:"ChatThreadProperties",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},topic:{serializedName:"topic",required:!0,type:{name:"String"}},createdOn:{serializedName:"createdOn",required:!0,type:{name:"DateTime"}},createdByCommunicationIdentifier:{serializedName:"createdByCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}}}}},ct={type:{name:"Composite",className:"ChatThreadsItemCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatThreadItem"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},ze={type:{name:"Composite",className:"ChatThreadItem",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},topic:{serializedName:"topic",required:!0,type:{name:"String"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},lastMessageReceivedOn:{serializedName:"lastMessageReceivedOn",readOnly:!0,type:{name:"DateTime"}}}}},an={type:{name:"Composite",className:"UpdateChatThreadRequest",modelProperties:{topic:{serializedName:"topic",type:{name:"String"}}}}},dt={type:{name:"Composite",className:"SendTypingNotificationRequest",modelProperties:{senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}}}}},Xe={parameterPath:"accept",mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},Yt={parameterPath:"endpoint",mapper:{serializedName:"endpoint",required:!0,type:{name:"String"}},skipEncoding:!0},Ye={parameterPath:"chatThreadId",mapper:{serializedName:"chatThreadId",required:!0,type:{name:"String"}}},Qe={parameterPath:["options","maxPageSize"],mapper:{serializedName:"maxPageSize",type:{name:"Number"}}},kn={parameterPath:["options","skip"],mapper:{serializedName:"skip",type:{name:"Number"}}},Ze={parameterPath:"apiVersion",mapper:{defaultValue:"2021-09-07",isConstant:!0,serializedName:"api-version",type:{name:"String"}}},lt={parameterPath:["options","contentType"],mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},ln={parameterPath:"sendReadReceiptRequest",mapper:it},jt={parameterPath:"sendChatMessageRequest",mapper:Mn},qt={parameterPath:["options","startTime"],mapper:{serializedName:"startTime",type:{name:"DateTime"}}},wn={parameterPath:"chatMessageId",mapper:{serializedName:"chatMessageId",required:!0,type:{name:"String"}}},hn={parameterPath:["options","contentType"],mapper:{defaultValue:"application/merge-patch+json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},gn={parameterPath:"updateChatMessageRequest",mapper:On},Rn={parameterPath:"participantCommunicationIdentifier",mapper:$e},on={parameterPath:"addChatParticipantsRequest",mapper:Ve},_n={parameterPath:"updateChatThreadRequest",mapper:an},Jt={parameterPath:["options","sendTypingNotificationRequest"],mapper:dt},Ft={parameterPath:"nextLink",mapper:{serializedName:"nextLink",required:!0,type:{name:"String"}},skipEncoding:!0},An={parameterPath:"createChatThreadRequest",mapper:ft};class Sn{constructor(K){this.client=K}listChatReadReceipts(K,X){return this.client.sendOperationRequest({chatThreadId:K,options:X},Dn)}sendChatReadReceipt(K,X,he){return this.client.sendOperationRequest({chatThreadId:K,sendReadReceiptRequest:X,options:he},Qt)}sendChatMessage(K,X,he){return this.client.sendOperationRequest({chatThreadId:K,sendChatMessageRequest:X,options:he},nn)}listChatMessages(K,X){return this.client.sendOperationRequest({chatThreadId:K,options:X},En)}getChatMessage(K,X,he){return this.client.sendOperationRequest({chatThreadId:K,chatMessageId:X,options:he},Oi)}updateChatMessage(K,X,he,Me){return this.client.sendOperationRequest({chatThreadId:K,chatMessageId:X,updateChatMessageRequest:he,options:Me},ki)}deleteChatMessage(K,X,he){return this.client.sendOperationRequest({chatThreadId:K,chatMessageId:X,options:he},Ni)}listChatParticipants(K,X){return this.client.sendOperationRequest({chatThreadId:K,options:X},wo)}removeChatParticipant(K,X,he){return this.client.sendOperationRequest({chatThreadId:K,participantCommunicationIdentifier:X,options:he},Uo)}addChatParticipants(K,X,he){return this.client.sendOperationRequest({chatThreadId:K,addChatParticipantsRequest:X,options:he},ps)}updateChatThreadProperties(K,X,he){return this.client.sendOperationRequest({chatThreadId:K,updateChatThreadRequest:X,options:he},Co)}getChatThreadProperties(K,X){return this.client.sendOperationRequest({chatThreadId:K,options:X},Ht)}sendTypingNotification(K,X){return this.client.sendOperationRequest({chatThreadId:K,options:X},Vo)}listChatReadReceiptsNext(K,X,he){return this.client.sendOperationRequest({chatThreadId:K,nextLink:X,options:he},Ur)}listChatMessagesNext(K,X,he){return this.client.sendOperationRequest({chatThreadId:K,nextLink:X,options:he},$r)}listChatParticipantsNext(K,X,he){return this.client.sendOperationRequest({chatThreadId:K,nextLink:X,options:he},Mo)}}const Rt=y(p,!1),Dn={path:"/chat/threads/{chatThreadId}/readReceipts",httpMethod:"GET",responses:{200:{bodyMapper:Mt},401:{bodyMapper:Ct,isError:!0},403:{bodyMapper:Ct,isError:!0},429:{bodyMapper:Ct,isError:!0},503:{bodyMapper:Ct,isError:!0}},queryParameters:[Qe,kn,Ze],urlParameters:[Yt,Ye],headerParameters:[Xe],serializer:Rt},Qt={path:"/chat/threads/{chatThreadId}/readReceipts",httpMethod:"POST",responses:{200:{},401:{bodyMapper:Ct,isError:!0},403:{bodyMapper:Ct,isError:!0},429:{bodyMapper:Ct,isError:!0},503:{bodyMapper:Ct,isError:!0}},requestBody:ln,queryParameters:[Ze],urlParameters:[Yt,Ye],headerParameters:[Xe,lt],mediaType:"json",serializer:Rt},nn={path:"/chat/threads/{chatThreadId}/messages",httpMethod:"POST",responses:{201:{bodyMapper:ot},401:{bodyMapper:Ct,isError:!0},403:{bodyMapper:Ct,isError:!0},429:{bodyMapper:Ct,isError:!0},503:{bodyMapper:Ct,isError:!0}},requestBody:jt,queryParameters:[Ze],urlParameters:[Yt,Ye],headerParameters:[Xe,lt],mediaType:"json",serializer:Rt},En={path:"/chat/threads/{chatThreadId}/messages",httpMethod:"GET",responses:{200:{bodyMapper:Ke},401:{bodyMapper:Ct,isError:!0},403:{bodyMapper:Ct,isError:!0},429:{bodyMapper:Ct,isError:!0},503:{bodyMapper:Ct,isError:!0}},queryParameters:[Qe,Ze,qt],urlParameters:[Yt,Ye],headerParameters:[Xe],serializer:Rt},Oi={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"GET",responses:{200:{bodyMapper:In},401:{bodyMapper:Ct,isError:!0},403:{bodyMapper:Ct,isError:!0},429:{bodyMapper:Ct,isError:!0},503:{bodyMapper:Ct,isError:!0}},queryParameters:[Ze],urlParameters:[Yt,Ye,wn],headerParameters:[Xe],serializer:Rt},ki={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"PATCH",responses:{204:{},401:{bodyMapper:Ct,isError:!0},403:{bodyMapper:Ct,isError:!0},429:{bodyMapper:Ct,isError:!0},503:{bodyMapper:Ct,isError:!0}},requestBody:gn,queryParameters:[Ze],urlParameters:[Yt,Ye,wn],headerParameters:[Xe,hn],mediaType:"json",serializer:Rt},Ni={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"DELETE",responses:{204:{},401:{bodyMapper:Ct,isError:!0},403:{bodyMapper:Ct,isError:!0},429:{bodyMapper:Ct,isError:!0},503:{bodyMapper:Ct,isError:!0}},queryParameters:[Ze],urlParameters:[Yt,Ye,wn],headerParameters:[Xe],serializer:Rt},wo={path:"/chat/threads/{chatThreadId}/participants",httpMethod:"GET",responses:{200:{bodyMapper:nt},401:{bodyMapper:Ct,isError:!0},403:{bodyMapper:Ct,isError:!0},429:{bodyMapper:Ct,isError:!0},503:{bodyMapper:Ct,isError:!0}},queryParameters:[Qe,kn,Ze],urlParameters:[Yt,Ye],headerParameters:[Xe],serializer:Rt},Uo={path:"/chat/threads/{chatThreadId}/participants/:remove",httpMethod:"POST",responses:{204:{},401:{bodyMapper:Ct,isError:!0},403:{bodyMapper:Ct,isError:!0},429:{bodyMapper:Ct,isError:!0},503:{bodyMapper:Ct,isError:!0}},requestBody:Rn,queryParameters:[Ze],urlParameters:[Yt,Ye],headerParameters:[Xe,lt],mediaType:"json",serializer:Rt},ps={path:"/chat/threads/{chatThreadId}/participants/:add",httpMethod:"POST",responses:{201:{bodyMapper:kt},401:{bodyMapper:Ct,isError:!0},403:{bodyMapper:Ct,isError:!0},429:{bodyMapper:Ct,isError:!0},503:{bodyMapper:Ct,isError:!0}},requestBody:on,queryParameters:[Ze],urlParameters:[Yt,Ye],headerParameters:[Xe,lt],mediaType:"json",serializer:Rt},Co={path:"/chat/threads/{chatThreadId}",httpMethod:"PATCH",responses:{204:{},401:{bodyMapper:Ct,isError:!0},403:{bodyMapper:Ct,isError:!0},429:{bodyMapper:Ct,isError:!0},503:{bodyMapper:Ct,isError:!0}},requestBody:_n,queryParameters:[Ze],urlParameters:[Yt,Ye],headerParameters:[Xe,hn],mediaType:"json",serializer:Rt},Ht={path:"/chat/threads/{chatThreadId}",httpMethod:"GET",responses:{200:{bodyMapper:qn},401:{bodyMapper:Ct,isError:!0},403:{bodyMapper:Ct,isError:!0},429:{bodyMapper:Ct,isError:!0},503:{bodyMapper:Ct,isError:!0}},queryParameters:[Ze],urlParameters:[Yt,Ye],headerParameters:[Xe],serializer:Rt},Vo={path:"/chat/threads/{chatThreadId}/typing",httpMethod:"POST",responses:{200:{},401:{bodyMapper:Ct,isError:!0},403:{bodyMapper:Ct,isError:!0},429:{bodyMapper:Ct,isError:!0},503:{bodyMapper:Ct,isError:!0}},requestBody:Jt,queryParameters:[Ze],urlParameters:[Yt,Ye],headerParameters:[Xe,lt],mediaType:"json",serializer:Rt},Ur={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Mt},401:{bodyMapper:Ct,isError:!0},403:{bodyMapper:Ct,isError:!0},429:{bodyMapper:Ct,isError:!0},503:{bodyMapper:Ct,isError:!0}},queryParameters:[Qe,kn,Ze],urlParameters:[Yt,Ye,Ft],headerParameters:[Xe],serializer:Rt},$r={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Ke},401:{bodyMapper:Ct,isError:!0},403:{bodyMapper:Ct,isError:!0},429:{bodyMapper:Ct,isError:!0},503:{bodyMapper:Ct,isError:!0}},queryParameters:[Qe,Ze,qt],urlParameters:[Yt,Ye,Ft],headerParameters:[Xe],serializer:Rt},Mo={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:nt},401:{bodyMapper:Ct,isError:!0},403:{bodyMapper:Ct,isError:!0},429:{bodyMapper:Ct,isError:!0},503:{bodyMapper:Ct,isError:!0}},queryParameters:[Qe,kn,Ze],urlParameters:[Yt,Ye,Ft],headerParameters:[Xe],serializer:Rt};class xa{constructor(K){this.client=K}createChatThread(K,X){return this.client.sendOperationRequest({createChatThreadRequest:K,options:X},br)}listChatThreads(K){return this.client.sendOperationRequest({options:K},Ku)}deleteChatThread(K,X){return this.client.sendOperationRequest({chatThreadId:K,options:X},gs)}listChatThreadsNext(K,X){return this.client.sendOperationRequest({nextLink:K,options:X},Jn)}}const Vr=y(p,!1),br={path:"/chat/threads",httpMethod:"POST",responses:{201:{bodyMapper:st},401:{bodyMapper:Ct,isError:!0},403:{bodyMapper:Ct,isError:!0},429:{bodyMapper:Ct,isError:!0},503:{bodyMapper:Ct,isError:!0}},requestBody:An,queryParameters:[Ze],urlParameters:[Yt],headerParameters:[Xe,lt,{parameterPath:["options","repeatabilityRequestId"],mapper:{serializedName:"repeatability-request-id",type:{name:"String"}}}],mediaType:"json",serializer:Vr},Ku={path:"/chat/threads",httpMethod:"GET",responses:{200:{bodyMapper:ct},401:{bodyMapper:Ct,isError:!0},403:{bodyMapper:Ct,isError:!0},429:{bodyMapper:Ct,isError:!0},503:{bodyMapper:Ct,isError:!0}},queryParameters:[Qe,Ze,qt],urlParameters:[Yt],headerParameters:[Xe],serializer:Vr},gs={path:"/chat/threads/{chatThreadId}",httpMethod:"DELETE",responses:{204:{},401:{bodyMapper:Ct,isError:!0},403:{bodyMapper:Ct,isError:!0},429:{bodyMapper:Ct,isError:!0},503:{bodyMapper:Ct,isError:!0}},queryParameters:[Ze],urlParameters:[Yt,Ye],headerParameters:[Xe],serializer:Vr},Jn={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:ct},401:{bodyMapper:Ct,isError:!0},403:{bodyMapper:Ct,isError:!0},429:{bodyMapper:Ct,isError:!0},503:{bodyMapper:Ct,isError:!0}},queryParameters:[Qe,Ze,qt],urlParameters:[Yt,Ft],headerParameters:[Xe],serializer:Vr};function _o(se){return se.toLowerCase()}class Ho{constructor(K){if(this._headersMap=new Map,K)for(const X of Object.keys(K))this.set(X,K[X])}set(K,X){this._headersMap.set(_o(K),{name:K,value:String(X)})}get(K){var X;return null===(X=this._headersMap.get(_o(K)))||void 0===X?void 0:X.value}has(K){return this._headersMap.has(_o(K))}delete(K){this._headersMap.delete(_o(K))}toJSON(K={}){const X={};if(K.preserveCase)for(const he of this._headersMap.values())X[he.name]=he.value;else for(const[he,Me]of this._headersMap)X[he]=Me.value;return X}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return function*(se){for(const K of se.values())yield[K.name,K.value]}(this._headersMap)}}function vs(se){return new Ho(se)}var fn,Nc=new Uint8Array(16);function Ju(){if(!fn&&!(fn="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return fn(Nc)}const Li=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,to=function(se){return"string"==typeof se&&Li.test(se)};for(var Zn=[],no=0;no<256;++no)Zn.push((no+256).toString(16).substr(1));const di=function(se,K,X){var he=(se=se||{}).random||(se.rng||Ju)();if(he[6]=15&he[6]|64,he[8]=63&he[8]|128,K){X=X||0;for(var Me=0;Me<16;++Me)K[X+Me]=he[Me];return K}return function(se){var K=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,X=(Zn[se[K+0]]+Zn[se[K+1]]+Zn[se[K+2]]+Zn[se[K+3]]+"-"+Zn[se[K+4]]+Zn[se[K+5]]+"-"+Zn[se[K+6]]+Zn[se[K+7]]+"-"+Zn[se[K+8]]+Zn[se[K+9]]+"-"+Zn[se[K+10]]+Zn[se[K+11]]+Zn[se[K+12]]+Zn[se[K+13]]+Zn[se[K+14]]+Zn[se[K+15]]).toLowerCase();if(!to(X))throw TypeError("Stringified UUID is invalid");return X}(he)};class qo{constructor(K){var X,he,Me,Oe,Pe,Ue,ht;this.url=K.url,this.body=K.body,this.headers=null!==(X=K.headers)&&void 0!==X?X:vs(),this.method=null!==(he=K.method)&&void 0!==he?he:"GET",this.timeout=null!==(Me=K.timeout)&&void 0!==Me?Me:0,this.formData=K.formData,this.disableKeepAlive=null!==(Oe=K.disableKeepAlive)&&void 0!==Oe&&Oe,this.proxySettings=K.proxySettings,this.streamResponseStatusCodes=K.streamResponseStatusCodes,this.withCredentials=null!==(Pe=K.withCredentials)&&void 0!==Pe&&Pe,this.abortSignal=K.abortSignal,this.tracingOptions=K.tracingOptions,this.onUploadProgress=K.onUploadProgress,this.onDownloadProgress=K.onDownloadProgress,this.requestId=K.requestId||di(),this.allowInsecureConnection=null!==(Ue=K.allowInsecureConnection)&&void 0!==Ue&&Ue,this.enableBrowserStreams=null!==(ht=K.enableBrowserStreams)&&void 0!==ht&&ht}}function Wo(se){return!("object"!=typeof se||null===se||Array.isArray(se)||se instanceof RegExp||se instanceof Date)}function ro(se){if(Wo(se)){const X="string"==typeof se.message;return"string"==typeof se.name&&X}return!1}function hi(se){if(ro(se))return se.message;{let K;try{K="object"==typeof se&&se?JSON.stringify(se):String(se)}catch(X){K="[unable to stringify input]"}return`Unknown error ${K}`}}const io={},So="REDACTED",Eo=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],_r=["api-version"];class tr{constructor({additionalAllowedHeaderNames:K=[],additionalAllowedQueryParameters:X=[]}={}){K=Eo.concat(K),X=_r.concat(X),this.allowedHeaderNames=new Set(K.map(he=>he.toLowerCase())),this.allowedQueryParameters=new Set(X.map(he=>he.toLowerCase()))}sanitize(K){const X=new Set;return JSON.stringify(K,(he,Me)=>{if(Me instanceof Error)return Object.assign(Object.assign({},Me),{name:Me.name,message:Me.message});if("headers"===he)return this.sanitizeHeaders(Me);if("url"===he)return this.sanitizeUrl(Me);if("query"===he)return this.sanitizeQuery(Me);if("body"!==he&&"response"!==he&&"operationSpec"!==he){if(Array.isArray(Me)||Wo(Me)){if(X.has(Me))return"[Circular]";X.add(Me)}return Me}},2)}sanitizeHeaders(K){const X={};for(const he of Object.keys(K))X[he]=this.allowedHeaderNames.has(he.toLowerCase())?K[he]:So;return X}sanitizeQuery(K){if("object"!=typeof K||null===K)return K;const X={};for(const he of Object.keys(K))X[he]=this.allowedQueryParameters.has(he.toLowerCase())?K[he]:So;return X}sanitizeUrl(K){if("string"!=typeof K||null===K)return K;const X=new URL(K);if(!X.search)return K;for(const[he]of X.searchParams)this.allowedQueryParameters.has(he.toLowerCase())||X.searchParams.set(he,So);return X.toString()}}const cr=new tr;let ur=(()=>{class se extends Error{constructor(X,he={}){super(X),this.name="RestError",this.code=he.code,this.statusCode=he.statusCode,this.request=he.request,this.response=he.response,Object.setPrototypeOf(this,se.prototype)}[io](){return`RestError: ${this.message} \n ${cr.sanitize(this)}`}}return se.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",se.PARSE_ERROR="PARSE_ERROR",se})();function fr(se,K,X){let he=K.parameterPath;const Me=K.mapper;let Oe;if("string"==typeof he&&(he=[he]),Array.isArray(he)){if(he.length>0)if(Me.isConstant)Oe=Me.defaultValue;else{let Pe=bs(se,he);!Pe.propertyFound&&X&&(Pe=bs(X,he));let Ue=!1;Pe.propertyFound||(Ue=Me.required||"options"===he[0]&&2===he.length),Oe=Ue?Me.defaultValue:Pe.propertyValue}}else{Me.required&&(Oe={});for(const Pe in he){const qe=fr(se,{parameterPath:he[Pe],mapper:Me.type.modelProperties[Pe]},X);void 0!==qe&&(Oe||(Oe={}),Oe[Pe]=qe)}}return Oe}function bs(se,K){const X={propertyFound:!1};let he=0;for(;he<K.length;++he){const Me=K[he];if(!se||!(Me in se))break;se=se[Me]}return he===K.length&&(X.propertyValue=se,X.propertyFound=!0),X}const Sr=new WeakMap,xt=Symbol.for("@azure/core-client original request");function xn(se){if(function(se){return xt in se}(se))return xn(se[xt]);let K=Sr.get(se);return K||(K={},Sr.set(se,K)),K}const Er=["application/json","text/json"],pi=["application/xml","application/atom+xml"];function Wn(se){let K;const he=xn(se.request),Me=null==he?void 0:he.operationSpec;return Me&&(K=(null==he?void 0:he.operationResponseGetter)?null==he?void 0:he.operationResponseGetter(Me,se):Me.responses[se.status]),K}function To(se){const X=xn(se.request),he=null==X?void 0:X.shouldDeserialize;let Me;return Me=void 0===he||("boolean"==typeof he?he:he(se)),Me}function Zt(){return(Zt=(0,N.Z)(function*(se,K,X,he,Me){const Oe=yield Go(se,K,X,he,Me);if(!To(Oe))return Oe;const Pe=xn(Oe.request),Ue=null==Pe?void 0:Pe.operationSpec;if(!Ue||!Ue.responses)return Oe;const ht=Wn(Oe),{error:qe,shouldReturnResponse:rt}=Xr(Oe,Ue,ht,he);if(qe)throw qe;if(rt)return Oe;if(ht){if(ht.bodyMapper){let Et=Oe.parsedBody;Ue.isXML&&"Sequence"===ht.bodyMapper.type.name&&(Et="object"==typeof Et?Et[ht.bodyMapper.xmlElementName]:[]);try{Oe.parsedBody=Ue.serializer.deserialize(ht.bodyMapper,Et,"operationRes.parsedBody",he)}catch(Tt){throw new ur(`Error ${Tt} occurred in deserializing the responseBody - ${Oe.bodyAsText}`,{statusCode:Oe.status,request:Oe.request,response:Oe})}}else"HEAD"===Ue.httpMethod&&(Oe.parsedBody=X.status>=200&&X.status<300);ht.headersMapper&&(Oe.parsedHeaders=Ue.serializer.deserialize(ht.headersMapper,Oe.headers.toJSON(),"operationRes.parsedHeaders"))}return Oe})).apply(this,arguments)}function Xr(se,K,X,he){var Me;const Oe=200<=se.status&&se.status<300;if(function(se){const K=Object.keys(se.responses);return 0===K.length||1===K.length&&"default"===K[0]}(K)?Oe:X){if(!X)return{error:null,shouldReturnResponse:!1};if(!X.isError)return{error:null,shouldReturnResponse:!1}}const Ue=null!=X?X:K.responses.default,ht=(null===(Me=se.request.streamResponseStatusCodes)||void 0===Me?void 0:Me.has(se.status))?`Unexpected status code: ${se.status}`:se.bodyAsText,qe=new ur(ht,{statusCode:se.status,request:se.request,response:se});if(!Ue)throw qe;const rt=Ue.bodyMapper,Et=Ue.headersMapper;try{if(se.parsedBody){const Tt=se.parsedBody;let Bt;if(rt){let Vt=Tt;if(K.isXML&&"Sequence"===rt.type.name){Vt=[];const rn=rt.xmlElementName;"object"==typeof Tt&&rn&&(Vt=Tt[rn])}Bt=K.serializer.deserialize(rt,Vt,"error.response.parsedBody",he)}const At=Tt.error||Bt||Tt;qe.code=At.code,At.message&&(qe.message=At.message),rt&&(qe.response.parsedBody=Bt)}se.headers&&Et&&(qe.response.parsedHeaders=K.serializer.deserialize(Et,se.headers.toJSON(),"operationRes.parsedHeaders"))}catch(Tt){qe.message=`Error "${Tt.message}" occurred in deserializing the responseBody - "${se.bodyAsText}" for the default response.`}return{error:qe,shouldReturnResponse:!1}}function Go(se,K,X,he,Me){return ei.apply(this,arguments)}function ei(){return(ei=(0,N.Z)(function*(se,K,X,he,Me){var Oe;if(!(null===(Oe=X.request.streamResponseStatusCodes)||void 0===Oe?void 0:Oe.has(X.status))&&X.bodyAsText){const Pe=X.bodyAsText,Ue=X.headers.get("Content-Type")||"",ht=Ue?Ue.split(";").map(qe=>qe.toLowerCase()):[];try{if(0===ht.length||ht.some(qe=>-1!==se.indexOf(qe)))return X.parsedBody=JSON.parse(Pe),X;if(ht.some(qe=>-1!==K.indexOf(qe))){if(!Me)throw new Error("Parsing XML not supported.");const qe=yield Me(Pe,he.xml);return X.parsedBody=qe,X}}catch(qe){throw new ur(`Error "${qe}" occurred while parsing the response body - ${X.bodyAsText}.`,{code:qe.code||ur.PARSE_ERROR,statusCode:X.status,request:X.request,response:X})}}return X})).apply(this,arguments)}const Yn=(0,R.YR)("core-rest-pipeline"),Rr=new Set(["Deserialize","Serialize","Retry","Sign"]);class Tn{constructor(K){var X;this._policies=[],this._policies=null!==(X=null==K?void 0:K.slice(0))&&void 0!==X?X:[],this._orderedPolicies=void 0}addPolicy(K,X={}){if(X.phase&&X.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(X.phase&&!Rr.has(X.phase))throw new Error(`Invalid phase name: ${X.phase}`);if(X.afterPhase&&!Rr.has(X.afterPhase))throw new Error(`Invalid afterPhase name: ${X.afterPhase}`);this._policies.push({policy:K,options:X}),this._orderedPolicies=void 0}removePolicy(K){const X=[];return this._policies=this._policies.filter(he=>!(K.name&&he.policy.name===K.name||K.phase&&he.options.phase===K.phase)||(X.push(he.policy),!1)),this._orderedPolicies=void 0,X}sendRequest(K,X){return this.getOrderedPolicies().reduceRight((Oe,Pe)=>Ue=>Pe.sendRequest(Ue,Oe),Oe=>K.sendRequest(Oe))(X)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new Tn(this._policies)}static create(){return new Tn}orderPolicies(){const K=[],X=new Map;function he(At){return{name:At,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}const Me=he("Serialize"),Oe=he("None"),Pe=he("Deserialize"),Ue=he("Retry"),ht=he("Sign"),qe=[Me,Oe,Pe,Ue,ht];function rt(At){return"Retry"===At?Ue:"Serialize"===At?Me:"Deserialize"===At?Pe:"Sign"===At?ht:Oe}for(const At of this._policies){const Vt=At.policy,rn=At.options,Kn=Vt.name;if(X.has(Kn))throw new Error("Duplicate policy names not allowed in pipeline");const Un={policy:Vt,dependsOn:new Set,dependants:new Set};rn.afterPhase&&(Un.afterPhase=rt(rn.afterPhase),Un.afterPhase.hasAfterPolicies=!0),X.set(Kn,Un),rt(rn.phase).policies.add(Un)}for(const At of this._policies){const{policy:Vt,options:rn}=At,Kn=Vt.name,Un=X.get(Kn);if(!Un)throw new Error(`Missing node for policy ${Kn}`);if(rn.afterPolicies)for(const yi of rn.afterPolicies){const Nn=X.get(yi);Nn&&(Un.dependsOn.add(Nn),Nn.dependants.add(Un))}if(rn.beforePolicies)for(const yi of rn.beforePolicies){const Nn=X.get(yi);Nn&&(Nn.dependsOn.add(Un),Un.dependants.add(Nn))}}function Et(At){At.hasRun=!0;for(const Vt of At.policies)if((!Vt.afterPhase||Vt.afterPhase.hasRun&&!Vt.afterPhase.policies.size)&&0===Vt.dependsOn.size){K.push(Vt.policy);for(const rn of Vt.dependants)rn.dependsOn.delete(Vt);X.delete(Vt.policy.name),At.policies.delete(Vt)}}function Tt(){for(const At of qe){if(Et(At),At.policies.size>0&&At!==Oe)return void(Oe.hasRun||Et(Oe));At.hasAfterPolicies&&Et(Oe)}}let Bt=0;for(;X.size>0;){Bt++;const At=K.length;if(Tt(),K.length<=At&&Bt>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return K}}function vt(se){const K=new Map;K.set("core-rest-pipeline","1.10.1"),function(se){const K=self.navigator;se.set("OS",(K.oscpu||K.platform).replace(" ",""))}(K);const X=function(se){const K=[];for(const[X,he]of se)K.push(he?`${X}/${he}`:X);return K.join(" ")}(K);return se?`${se} ${X}`:X}const bt="x-ms-useragent";new Error("decompressResponsePolicy is not supported in browser environment");var Ut=E(5283);function pr(se,K,X){return new Promise((he,Me)=>{let Oe,Pe;const Ue=()=>Me(new Ut._((null==X?void 0:X.abortErrorMsg)?null==X?void 0:X.abortErrorMsg:"The operation was aborted.")),ht=()=>{(null==X?void 0:X.abortSignal)&&Pe&&X.abortSignal.removeEventListener("abort",Pe)};if(Pe=()=>(Oe&&clearTimeout(Oe),ht(),Ue()),(null==X?void 0:X.abortSignal)&&X.abortSignal.aborted)return Ue();Oe=setTimeout(()=>{ht(),he(K)},se),(null==X?void 0:X.abortSignal)&&X.abortSignal.addEventListener("abort",Pe)})}function nr(se,K){const X=se.headers.get(K);if(!X)return;const he=Number(X);return Number.isNaN(he)?void 0:he}const $n="Retry-After",Bi=["retry-after-ms","x-ms-retry-after-ms",$n];function uo(se){if(se&&[429,503].includes(se.status))try{for(const Me of Bi){const Oe=nr(se,Me);if(0===Oe||Oe)return Oe*(Me===$n?1e3:1)}const K=se.headers.get($n);if(!K)return;const he=Date.parse(K)-Date.now();return Number.isFinite(he)?Math.max(0,he):void 0}catch(K){return}}function r0(se={}){var K,X;const he=null!==(K=se.retryDelayInMs)&&void 0!==K?K:1e3,Me=null!==(X=se.maxRetryDelayInMs)&&void 0!==X?X:64e3;let Oe=he;return{name:"exponentialRetryStrategy",retry({retryCount:Pe,response:Ue,responseError:ht}){const qe=function(se){return!!se&&("ETIMEDOUT"===se.code||"ESOCKETTIMEDOUT"===se.code||"ECONNREFUSED"===se.code||"ECONNRESET"===se.code||"ENOENT"===se.code)}(ht),rt=qe&&se.ignoreSystemErrors,Et=function(se){return Boolean(se&&void 0!==se.status&&(se.status>=500||408===se.status)&&501!==se.status&&505!==se.status)}(Ue),Tt=Et&&se.ignoreHttpStatusCodes;if(Ue&&(function(se){return Number.isFinite(uo(se))}(Ue)||!Et)||Tt||rt)return{skipStrategy:!0};if(ht&&!qe&&!Et)return{errorToThrow:ht};const At=Oe*Math.pow(2,Pe),Vt=Math.min(Me,At);return Oe=Vt/2+function(se,K){return se=Math.ceil(se),K=Math.floor(K),Math.floor(Math.random()*(K-se+1))+se}(0,Vt/2),{retryAfterInMs:Oe}}}}const Cs=(0,R.YR)("core-rest-pipeline retryPolicy");function s0(se,K={maxRetries:3}){const X=K.logger||Cs;return{name:"retryPolicy",sendRequest:(he,Me)=>(0,N.Z)(function*(){var Oe,Pe;let Ue,ht,qe=-1;e:for(;;){qe+=1,Ue=void 0,ht=void 0;try{X.info(`Retry ${qe}: Attempting to send request`,he.requestId),Ue=yield Me(he),X.info(`Retry ${qe}: Received a response from request`,he.requestId)}catch(rt){if(X.error(`Retry ${qe}: Received an error from request`,he.requestId),ht=rt,!rt||"RestError"!==ht.name)throw rt;Ue=ht.response}if(null===(Oe=he.abortSignal)||void 0===Oe?void 0:Oe.aborted)throw X.error(`Retry ${qe}: Request aborted.`),new Ut._;if(qe>=(null!==(Pe=K.maxRetries)&&void 0!==Pe?Pe:3)){if(X.info(`Retry ${qe}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),ht)throw ht;if(Ue)return Ue;throw new Error("Maximum retries reached with no response or error to throw")}X.info(`Retry ${qe}: Processing ${se.length} retry strategies.`);t:for(const rt of se){const Et=rt.logger||Cs;Et.info(`Retry ${qe}: Processing retry strategy ${rt.name}.`);const Tt=rt.retry({retryCount:qe,response:Ue,responseError:ht});if(Tt.skipStrategy){Et.info(`Retry ${qe}: Skipped.`);continue t}const{errorToThrow:Bt,retryAfterInMs:At,redirectTo:Vt}=Tt;if(Bt)throw Et.error(`Retry ${qe}: Retry strategy ${rt.name} throws error:`,Bt),Bt;if(At||0===At){Et.info(`Retry ${qe}: Retry strategy ${rt.name} retries after ${At}`),yield pr(At,void 0,{abortSignal:he.abortSignal});continue e}if(Vt){Et.info(`Retry ${qe}: Retry strategy ${rt.name} redirects to ${Vt}`),he.url=Vt;continue e}}if(ht)throw X.info("None of the retry strategies could work with the received error. Throwing it."),ht;if(Ue)return X.info("None of the retry strategies could work with the received response. Returning it."),Ue}})()}}new Error("proxyPolicy is not supported in browser environment");const Io={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function Na(se={}){let K=new $o(se.parentContext);return se.span&&(K=K.setValue(Io.span,se.span)),se.namespace&&(K=K.setValue(Io.namespace,se.namespace)),K}class $o{constructor(K){this._contextMap=K instanceof $o?new Map(K._contextMap):new Map}setValue(K,X){const he=new $o(this);return he._contextMap.set(K,X),he}getValue(K){return this._contextMap.get(K)}deleteValue(K){const X=new $o(this);return X._contextMap.delete(K),X}}let Hn;function Ko(){return Hn||(Hn={createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(se,K)=>({span:{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{}},tracingContext:Na({parentContext:K.tracingContext})}),withContext:(se,K,...X)=>K(...X)}),Hn}function Fa(se){const K=Tn.create();return K.addPolicy({name:"formDataPolicy",sendRequest:(se,K)=>(0,N.Z)(function*(){if(se.formData){const X=se.formData,he=new FormData;for(const Oe of Object.keys(X)){const Pe=X[Oe];if(Array.isArray(Pe))for(const Ue of Pe)he.append(Oe,Ue);else he.append(Oe,Pe)}se.body=he,se.formData=void 0;const Me=se.headers.get("Content-Type");Me&&-1!==Me.indexOf("application/x-www-form-urlencoded")?se.body=new URLSearchParams(he).toString():Me&&-1!==Me.indexOf("multipart/form-data")&&se.headers.delete("Content-Type")}return K(se)})()}),K.addPolicy(function(se={}){const K=vt(se.userAgentPrefix);return{name:"userAgentPolicy",sendRequest:(X,he)=>(0,N.Z)(function*(){return X.headers.has(bt)||X.headers.set(bt,K),he(X)})()}}(se.userAgentOptions)),K.addPolicy(function(se="x-ms-client-request-id"){return{name:"setClientRequestIdPolicy",sendRequest:(K,X)=>(0,N.Z)(function*(){return K.headers.has(se)||K.headers.set(se,K.requestId),X(K)})()}}()),K.addPolicy(function(se={}){var K;return{name:"defaultRetryPolicy",sendRequest:s0([{name:"throttlingRetryStrategy",retry({response:se}){const K=uo(se);return Number.isFinite(K)?{retryAfterInMs:K}:{skipStrategy:!0}}},r0(se)],{maxRetries:null!==(K=se.maxRetries)&&void 0!==K?K:3}).sendRequest}}(se.retryOptions),{phase:"Retry"}),K.addPolicy(function(se={}){const K=vt(se.userAgentPrefix),X=function(){try{return function(se){const{namespace:K,packageName:X,packageVersion:he}=se;function Me(rt,Et,Tt){var Bt;const At=Ko().startSpan(rt,Object.assign(Object.assign({},Tt),{packageName:X,packageVersion:he,tracingContext:null===(Bt=null==Et?void 0:Et.tracingOptions)||void 0===Bt?void 0:Bt.tracingContext}));let Vt=At.tracingContext;const rn=At.span;return Vt.getValue(Io.namespace)||(Vt=Vt.setValue(Io.namespace,K)),rn.setAttribute("az.namespace",Vt.getValue(Io.namespace)),{span:rn,updatedOptions:Object.assign({},Et,{tracingOptions:Object.assign(Object.assign({},null==Et?void 0:Et.tracingOptions),{tracingContext:Vt})})}}function Pe(){return(Pe=(0,N.Z)(function*(rt,Et,Tt,Bt){const{span:At,updatedOptions:Vt}=Me(rt,Et,Bt);try{const rn=yield Ue(Vt.tracingOptions.tracingContext,()=>Promise.resolve(Tt(Vt,At)));return At.setStatus({status:"success"}),rn}catch(rn){throw At.setStatus({status:"error",error:rn}),rn}finally{At.end()}})).apply(this,arguments)}function Ue(rt,Et,...Tt){return Ko().withContext(rt,Et,...Tt)}return{startSpan:Me,withSpan:function(rt,Et,Tt,Bt){return Pe.apply(this,arguments)},withContext:Ue,parseTraceparentHeader:function(rt){return Ko().parseTraceparentHeader(rt)},createRequestHeaders:function(rt){return Ko().createRequestHeaders(rt)}}}({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:"1.10.1"})}catch(se){return void Yn.warning(`Error when creating the TracingClient: ${hi(se)}`)}}();return{name:"tracingPolicy",sendRequest:(he,Me)=>(0,N.Z)(function*(){var Oe,Pe;if(!X||!(null===(Oe=he.tracingOptions)||void 0===Oe?void 0:Oe.tracingContext))return Me(he);const{span:Ue,tracingContext:ht}=null!==(Pe=function(se,K,X){try{const{span:he,updatedOptions:Me}=se.startSpan(`HTTP ${K.method}`,{tracingOptions:K.tracingOptions},{spanKind:"client",spanAttributes:{"http.method":K.method,"http.url":K.url,requestId:K.requestId}});if(!he.isRecording())return void he.end();X&&he.setAttribute("http.user_agent",X);const Oe=se.createRequestHeaders(Me.tracingOptions.tracingContext);for(const[Pe,Ue]of Object.entries(Oe))K.headers.set(Pe,Ue);return{span:he,tracingContext:Me.tracingOptions.tracingContext}}catch(he){return void Yn.warning(`Skipping creating a tracing span due to an error: ${hi(he)}`)}}(X,he,K))&&void 0!==Pe?Pe:{};if(!Ue||!ht)return Me(he);try{const qe=yield X.withContext(ht,Me,he);return function(se,K){try{se.setAttribute("http.status_code",K.status);const X=K.headers.get("x-ms-request-id");X&&se.setAttribute("serviceRequestId",X),se.setStatus({status:"success"}),se.end()}catch(X){Yn.warning(`Skipping tracing span processing due to an error: ${hi(X)}`)}}(Ue,qe),qe}catch(qe){throw function(se,K){try{se.setStatus({status:"error",error:ro(K)?K:void 0}),function(se){return se instanceof ur||ro(se)&&"RestError"===se.name}(K)&&K.statusCode&&se.setAttribute("http.status_code",K.statusCode),se.end()}catch(X){Yn.warning(`Skipping tracing span processing due to an error: ${hi(X)}`)}}(Ue,qe),qe}})()}}(se.userAgentOptions),{afterPhase:"Retry"}),K.addPolicy(function(se={}){var K;const X=null!==(K=se.logger)&&void 0!==K?K:Yn.info,he=new tr({additionalAllowedHeaderNames:se.additionalAllowedHeaderNames,additionalAllowedQueryParameters:se.additionalAllowedQueryParameters});return{name:"logPolicy",sendRequest:(Me,Oe)=>(0,N.Z)(function*(){if(!X.enabled)return Oe(Me);X(`Request: ${he.sanitize(Me)}`);const Pe=yield Oe(Me);return X(`Response status code: ${Pe.status}`),X(`Headers: ${he.sanitize(Pe.headers)}`),Pe})()}}(se.loggingOptions),{afterPhase:"Sign"}),K}const xo={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4};function Ss(){return(Ss=(0,N.Z)(function*(se,K,X){function he(){return Me.apply(this,arguments)}function Me(){return(Me=(0,N.Z)(function*(){if(!(Date.now()<X)){const Pe=yield se();if(null===Pe)throw new Error("Failed to refresh access token.");return Pe}try{return yield se()}catch(Pe){return null}})).apply(this,arguments)}let Oe=yield he();for(;null===Oe;)yield pr(K),Oe=yield he();return Oe})).apply(this,arguments)}function Ui(se){return Es.apply(this,arguments)}function Es(){return(Es=(0,N.Z)(function*(se){const{scopes:K,getAccessToken:X,request:he}=se,Me={abortSignal:he.abortSignal,tracingOptions:he.tracingOptions},Oe=yield X(K,Me);Oe&&se.request.headers.set("Authorization",`Bearer ${Oe.token}`)})).apply(this,arguments)}function $t(se){var K;const{credential:X,scopes:he,challengeCallbacks:Me}=se,Oe=se.logger||Yn,Pe=Object.assign({authorizeRequest:null!==(K=null==Me?void 0:Me.authorizeRequest)&&void 0!==K?K:Ui,authorizeRequestOnChallenge:null==Me?void 0:Me.authorizeRequestOnChallenge},Me),Ue=X?function(se,K){let Me,X=null,he=null;const Oe=Object.assign(Object.assign({},xo),K),Pe={get isRefreshing(){return null!==X},get shouldRefresh(){var ht;return!Pe.isRefreshing&&(null!==(ht=null==he?void 0:he.expiresOnTimestamp)&&void 0!==ht?ht:0)-Oe.refreshWindowInMs<Date.now()},get mustRefresh(){return null===he||he.expiresOnTimestamp-Oe.forcedRefreshWindowInMs<Date.now()}};function Ue(ht,qe){var rt;return Pe.isRefreshing||(X=function(se,K,X){return Ss.apply(this,arguments)}(()=>se.getToken(ht,qe),Oe.retryIntervalInMs,null!==(rt=null==he?void 0:he.expiresOnTimestamp)&&void 0!==rt?rt:Date.now()).then(Tt=>(X=null,he=Tt,Me=qe.tenantId,he)).catch(Tt=>{throw X=null,he=null,Me=void 0,Tt})),X}return function(){var ht=(0,N.Z)(function*(qe,rt){return Me!==rt.tenantId||Boolean(rt.claims)||Pe.mustRefresh?Ue(qe,rt):(Pe.shouldRefresh&&Ue(qe,rt),he)});return function(qe,rt){return ht.apply(this,arguments)}}()}(X):()=>Promise.resolve(null);return{name:"bearerTokenAuthenticationPolicy",sendRequest:(ht,qe)=>(0,N.Z)(function*(){if(!ht.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");let rt,Et;yield Pe.authorizeRequest({scopes:Array.isArray(he)?he:[he],request:ht,getAccessToken:Ue,logger:Oe});try{rt=yield qe(ht)}catch(Tt){Et=Tt,rt=Tt.response}if(Pe.authorizeRequestOnChallenge&&401===(null==rt?void 0:rt.status)&&function(se){const K=se.headers.get("WWW-Authenticate");if(401===se.status&&K)return K}(rt)&&(yield Pe.authorizeRequestOnChallenge({scopes:Array.isArray(he)?he:[he],request:ht,response:rt,getAccessToken:Ue,logger:Oe})))return qe(ht);if(Et)throw Et;return rt})()}}function Vi(se){const{parameterPath:K,mapper:X}=se;let he;return he="string"==typeof K?K:Array.isArray(K)?K.join("."):X.serializedName,he}function ir(se){return Boolean(se&&"function"==typeof se.getReader&&"function"==typeof se.tee)}function nl(se){return("function"==typeof Blob||"object"==typeof Blob)&&se instanceof Blob}class Jo{sendRequest(K){return(0,N.Z)(function*(){if("https:"!==new URL(K.url).protocol&&!K.allowInsecureConnection)throw new Error(`Cannot connect to ${K.url} while allowInsecureConnection is false.`);if(K.proxySettings)throw new Error("HTTP proxy is not supported in browser environment");try{return yield function(se){return Zo.apply(this,arguments)}(K)}catch(Me){throw function(se,K){var X;return se&&"AbortError"===(null==se?void 0:se.name)?se:new ur(`Error sending request: ${se.message}`,{code:null!==(X=null==se?void 0:se.code)&&void 0!==X?X:ur.REQUEST_SEND_ERROR,request:K})}(Me,K)}})()}}function Zo(){return(Zo=(0,N.Z)(function*(se){const{abortController:K,abortControllerCleanup:X}=Gc(se);try{const he=Is(se.headers),Me=ni(se),Oe=yield fetch(se.url,{body:Me,method:se.method,headers:he,signal:K.signal,credentials:se.withCredentials?"include":"same-origin",cache:"no-store"});return nl(se.body)&&se.onUploadProgress&&se.onUploadProgress({loadedBytes:se.body.size}),Ha(Oe,se)}finally{X&&X()}})).apply(this,arguments)}function Ha(se,K){return rl.apply(this,arguments)}function rl(){return(rl=(0,N.Z)(function*(se,K){var X,he;const Oe={request:K,headers:Tr(se),status:se.status},Pe=ir(se.body)?ja(se.body,K.onDownloadProgress):se.body;if((null===(X=K.streamResponseStatusCodes)||void 0===X?void 0:X.has(Number.POSITIVE_INFINITY))||(null===(he=K.streamResponseStatusCodes)||void 0===he?void 0:he.has(Oe.status)))if(K.enableBrowserStreams)Oe.browserStreamBody=null!=Pe?Pe:void 0;else{const Ue=new Response(Pe);Oe.blobBody=Ue.blob()}else{const Ue=new Response(Pe);Oe.bodyAsText=yield Ue.text()}return Oe})).apply(this,arguments)}function Gc(se){const K=new AbortController;let X,he;if(se.abortSignal){if(se.abortSignal.aborted)throw new Ut._("The operation was aborted.");he=Me=>{"abort"===Me.type&&K.abort()},se.abortSignal.addEventListener("abort",he),X=()=>{var Me;he&&(null===(Me=se.abortSignal)||void 0===Me||Me.removeEventListener("abort",he))}}return se.timeout>0&&setTimeout(()=>{K.abort()},se.timeout),{abortController:K,abortControllerCleanup:X}}function Is(se){const K=new Headers;for(const[X,he]of se)K.append(X,he);return K}function Tr(se){const K=vs();for(const[X,he]of se.headers)K.set(X,he);return K}function ni(se){const K="function"==typeof se.body?se.body():se.body;if(function(se){return se&&"function"==typeof se.pipe}(K))throw new Error("Node streams are not supported in browser environment.");return ir(K)?ja(K,se.onUploadProgress):K}function ja(se,K){let X=0;if(function(se){return void 0!==se.pipeThrough&&void 0!==self.TransformStream}(se))return se.pipeThrough(new TransformStream({transform(he,Me){null!==he?(Me.enqueue(he),X+=he.length,K&&K({loadedBytes:X})):Me.terminate()}}));{const he=se.getReader();return new ReadableStream({pull:Me=>(0,N.Z)(function*(){var Oe;const{done:Pe,value:Ue}=yield he.read();if(Pe||!Ue)return Me.close(),void he.releaseLock();X+=null!==(Oe=null==Ue?void 0:Ue.length)&&void 0!==Oe?Oe:0,Me.enqueue(Ue),K&&K({loadedBytes:X})})()})}}let xs;const Jc={CSV:",",SSV:" ",Multi:"Multi",TSV:"\t",Pipes:"|"};function Rs(se,K){let X=se;for(const[he,Me]of K)X=X.split(he).join(Me);return X}const al=(0,R.YR)("core-client");class cl extends class extends class{constructor(K={}){var X,he;if(this._requestContentType=K.requestContentType,this._endpoint=null!==(X=K.endpoint)&&void 0!==X?X:K.baseUri,K.baseUri&&al.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=K.allowInsecureConnection,this._httpClient=K.httpClient||(xs||(xs=new Jo),xs),this.pipeline=K.pipeline||function(se){const K=function(se){if(se.credentialScopes){const K=se.credentialScopes;return Array.isArray(K)?K.map(X=>new URL(X).toString()):new URL(K).toString()}if(se.endpoint)return`${se.endpoint}/.default`;if(se.baseUri)return`${se.baseUri}/.default`;if(se.credential&&!se.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}(se),X=se.credential&&K?{credentialScopes:K,credential:se.credential}:void 0;return function(se={}){const K=Fa(null!=se?se:{});return se.credentialOptions&&K.addPolicy($t({credential:se.credentialOptions.credential,scopes:se.credentialOptions.credentialScopes})),K.addPolicy(function(se={}){const K=se.stringifyXML;return{name:"serializationPolicy",sendRequest:(X,he)=>(0,N.Z)(function*(){const Me=xn(X),Oe=null==Me?void 0:Me.operationSpec,Pe=null==Me?void 0:Me.operationArguments;return Oe&&Pe&&(function(se,K,X){var he,Me;if(X.headerParameters)for(const Pe of X.headerParameters){let Ue=fr(K,Pe);if(null!=Ue||Pe.mapper.required){Ue=X.serializer.serialize(Pe.mapper,Ue,Vi(Pe));const ht=Pe.mapper.headerCollectionPrefix;if(ht)for(const qe of Object.keys(Ue))se.headers.set(ht+qe,Ue[qe]);else se.headers.set(Pe.mapper.serializedName||Vi(Pe),Ue)}}const Oe=null===(Me=null===(he=K.options)||void 0===he?void 0:he.requestOptions)||void 0===Me?void 0:Me.customHeaders;if(Oe)for(const Pe of Object.keys(Oe))se.headers.set(Pe,Oe[Pe])}(X,Pe,Oe),function(se,K,X,he=function(){throw new Error("XML serialization unsupported!")}){var Me,Oe,Pe,Ue,ht;const qe=null===(Me=K.options)||void 0===Me?void 0:Me.serializerOptions,rt={xml:{rootName:null!==(Oe=null==qe?void 0:qe.xml.rootName)&&void 0!==Oe?Oe:"",includeRoot:null!==(Pe=null==qe?void 0:qe.xml.includeRoot)&&void 0!==Pe&&Pe,xmlCharKey:null!==(Ue=null==qe?void 0:qe.xml.xmlCharKey)&&void 0!==Ue?Ue:r}},Et=rt.xml.xmlCharKey;if(X.requestBody&&X.requestBody.mapper){se.body=fr(K,X.requestBody);const Tt=X.requestBody.mapper,{required:Bt,serializedName:At,xmlName:Vt,xmlElementName:rn,xmlNamespace:Kn,xmlNamespacePrefix:Un,nullable:yi}=Tt,Nn=Tt.type.name;try{if(null!=se.body||yi&&null===se.body||Bt){const sr=Vi(X.requestBody);se.body=X.serializer.serialize(Tt,se.body,sr,rt);const co="Stream"===Nn;if(X.isXML){const Yo=Un?`xmlns:${Un}`:"xmlns",Wr=function(se,K,X,he,Me){if(se&&!["Composite","Sequence","Dictionary"].includes(X)){const Oe={};return Oe[Me.xml.xmlCharKey]=he,Oe[x]={[K]:se},Oe}return he}(Kn,Yo,Nn,se.body,rt);"Sequence"===Nn?se.body=he(function(se,K,X,he){if(Array.isArray(se)||(se=[se]),!X||!he)return{[K]:se};const Me={[K]:se};return Me[x]={[X]:he},Me}(Wr,rn||Vt||At,Yo,Kn),{rootName:Vt||At,xmlCharKey:Et}):co||(se.body=he(Wr,{rootName:Vt||At,xmlCharKey:Et}))}else{if("String"===Nn&&((null===(ht=X.contentType)||void 0===ht?void 0:ht.match("text/plain"))||"text"===X.mediaType))return;co||(se.body=JSON.stringify(se.body))}}}catch(sr){throw new Error(`Error "${sr.message}" occurred in serializing the payload - ${JSON.stringify(At,void 0,"  ")}.`)}}else if(X.formDataParameters&&X.formDataParameters.length>0){se.formData={};for(const Tt of X.formDataParameters){const Bt=fr(K,Tt);if(null!=Bt){const At=Tt.mapper.serializedName||Vi(Tt);se.formData[At]=X.serializer.serialize(Tt.mapper,Bt,Vi(Tt),rt)}}}}(X,Pe,Oe,K)),he(X)})()}}(se.serializationOptions),{phase:"Serialize"}),K.addPolicy(function(se={}){var K,X,he,Me,Oe,Pe,Ue;const ht=null!==(X=null===(K=se.expectedContentTypes)||void 0===K?void 0:K.json)&&void 0!==X?X:Er,qe=null!==(Me=null===(he=se.expectedContentTypes)||void 0===he?void 0:he.xml)&&void 0!==Me?Me:pi,rt=se.parseXML,Et=se.serializerOptions,Tt={xml:{rootName:null!==(Oe=null==Et?void 0:Et.xml.rootName)&&void 0!==Oe?Oe:"",includeRoot:null!==(Pe=null==Et?void 0:Et.xml.includeRoot)&&void 0!==Pe&&Pe,xmlCharKey:null!==(Ue=null==Et?void 0:Et.xml.xmlCharKey)&&void 0!==Ue?Ue:r}};return{name:"deserializationPolicy",sendRequest:(Bt,At)=>(0,N.Z)(function*(){const Vt=yield At(Bt);return function(se,K,X,he,Me){return Zt.apply(this,arguments)}(ht,qe,Vt,Tt,rt)})()}}(se.deserializationOptions),{phase:"Deserialize"}),K}(Object.assign(Object.assign({},se),{credentialOptions:X}))}(K),null===(he=K.additionalPolicies)||void 0===he?void 0:he.length)for(const{policy:Me,position:Oe}of K.additionalPolicies)this.pipeline.addPolicy(Me,{afterPhase:"perRetry"===Oe?"Sign":void 0})}sendRequest(K){var X=this;return(0,N.Z)(function*(){return X.pipeline.sendRequest(X._httpClient,K)})()}sendOperationRequest(K,X){var he=this;return(0,N.Z)(function*(){const Me=X.baseUrl||he._endpoint;if(!Me)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");const Oe=function(se,K,X,he){const Me=function(se,K,X){var he;const Me=new Map;if(null===(he=se.urlParameters)||void 0===he?void 0:he.length)for(const Oe of se.urlParameters){let Pe=fr(K,Oe,X);const Ue=Vi(Oe);Pe=se.serializer.serialize(Oe.mapper,Pe,Ue),Oe.skipEncoding||(Pe=encodeURIComponent(Pe)),Me.set(`{${Oe.mapper.serializedName||Ue}}`,Pe)}return Me}(K,X,he);let Oe=!1,Pe=Rs(se,Me);if(K.path){let qe=Rs(K.path,Me);"/{nextLink}"===K.path&&qe.startsWith("/")&&(qe=qe.substring(1)),function(se){return se.includes("://")}(qe)?(Pe=qe,Oe=!0):Pe=function(se,K){if(!K)return se;const X=new URL(se);let he=X.pathname;he.endsWith("/")||(he=`${he}/`),K.startsWith("/")&&(K=K.substring(1));const Me=K.indexOf("?");if(-1!==Me){const Oe=K.substring(0,Me),Pe=K.substring(Me+1);he+=Oe,Pe&&(X.search=X.search?`${X.search}&${Pe}`:Pe)}else he+=K;return X.pathname=he,X.toString()}(Pe,qe)}const{queryParams:Ue,sequenceParams:ht}=function(se,K,X){var he;const Me=new Map,Oe=new Set;if(null===(he=se.queryParameters)||void 0===he?void 0:he.length)for(const Pe of se.queryParameters){"Sequence"===Pe.mapper.type.name&&Pe.mapper.serializedName&&Oe.add(Pe.mapper.serializedName);let Ue=fr(K,Pe,X);if(null!=Ue||Pe.mapper.required){Ue=se.serializer.serialize(Pe.mapper,Ue,Vi(Pe));const ht=Pe.collectionFormat?Jc[Pe.collectionFormat]:"";if(Array.isArray(Ue)&&(Ue=Ue.map(qe=>null==qe?"":qe)),"Multi"===Pe.collectionFormat&&0===Ue.length)continue;Array.isArray(Ue)&&("SSV"===Pe.collectionFormat||"TSV"===Pe.collectionFormat)&&(Ue=Ue.join(ht)),Pe.skipEncoding||(Ue=Array.isArray(Ue)?Ue.map(qe=>encodeURIComponent(qe)):encodeURIComponent(Ue)),Array.isArray(Ue)&&("CSV"===Pe.collectionFormat||"Pipes"===Pe.collectionFormat)&&(Ue=Ue.join(ht)),Me.set(Pe.mapper.serializedName||Vi(Pe),Ue)}}return{queryParams:Me,sequenceParams:Oe}}(K,X,he);return Pe=function(se,K,X,he=!1){if(0===K.size)return se;const Me=new URL(se),Oe=function(se){const K=new Map;if(!se||"?"!==se[0])return K;const X=(se=se.slice(1)).split("&");for(const he of X){const[Me,Oe]=he.split("=",2),Pe=K.get(Me);Pe?Array.isArray(Pe)?Pe.push(Oe):K.set(Me,[Pe,Oe]):K.set(Me,Oe)}return K}(Me.search);for(const[Ue,ht]of K){const qe=Oe.get(Ue);if(Array.isArray(qe))if(Array.isArray(ht)){qe.push(...ht);const rt=new Set(qe);Oe.set(Ue,Array.from(rt))}else qe.push(ht);else qe?(Array.isArray(ht)?ht.unshift(qe):X.has(Ue)&&Oe.set(Ue,[qe,ht]),he||Oe.set(Ue,ht)):Oe.set(Ue,ht)}const Pe=[];for(const[Ue,ht]of Oe)if("string"==typeof ht)Pe.push(`${Ue}=${ht}`);else if(Array.isArray(ht))for(const qe of ht)Pe.push(`${Ue}=${qe}`);else Pe.push(`${Ue}=${ht}`);return Me.search=Pe.length?`?${Pe.join("&")}`:"",Me.toString()}(Pe,Ue,ht,Oe),Pe}(Me,X,K,he),Pe=new qo({url:Oe});Pe.method=X.httpMethod;const Ue=xn(Pe);Ue.operationSpec=X,Ue.operationArguments=K;const ht=X.contentType||he._requestContentType;ht&&X.requestBody&&Pe.headers.set("Content-Type",ht);const qe=K.options;if(qe){const rt=qe.requestOptions;rt&&(rt.timeout&&(Pe.timeout=rt.timeout),rt.onUploadProgress&&(Pe.onUploadProgress=rt.onUploadProgress),rt.onDownloadProgress&&(Pe.onDownloadProgress=rt.onDownloadProgress),void 0!==rt.shouldDeserialize&&(Ue.shouldDeserialize=rt.shouldDeserialize),rt.allowInsecureConnection&&(Pe.allowInsecureConnection=!0)),qe.abortSignal&&(Pe.abortSignal=qe.abortSignal),qe.tracingOptions&&(Pe.tracingOptions=qe.tracingOptions)}he._allowInsecureConnection&&(Pe.allowInsecureConnection=!0),void 0===Pe.streamResponseStatusCodes&&(Pe.streamResponseStatusCodes=function(se){const K=new Set;for(const X in se.responses){const he=se.responses[X];he.bodyMapper&&"Stream"===he.bodyMapper.type.name&&K.add(Number(X))}return K}(X));try{const rt=yield he.sendRequest(Pe),Et=d(rt,X.responses[rt.status]);return(null==qe?void 0:qe.onResponse)&&qe.onResponse(rt,Et),Et}catch(rt){if("object"==typeof rt&&(null==rt?void 0:rt.response)){const Et=rt.response,Tt=d(Et,X.responses[rt.statusCode]||X.responses.default);rt.details=Tt,(null==qe?void 0:qe.onResponse)&&qe.onResponse(Et,Tt,rt)}throw rt}})()}}{constructor(K,X){if(void 0===K)throw new Error("'endpoint' cannot be null");X||(X={});const Me="azsdk-js-azure-communication-chat/1.1.0",Oe=X.userAgentOptions&&X.userAgentOptions.userAgentPrefix?`${X.userAgentOptions.userAgentPrefix} ${Me}`:`${Me}`;super(Object.assign(Object.assign(Object.assign({},{requestContentType:"application/json; charset=utf-8"}),X),{userAgentOptions:{userAgentPrefix:Oe},baseUri:X.endpoint||"{endpoint}"})),this.endpoint=K,this.apiVersion=X.apiVersion||"2021-09-07"}}{constructor(K,X){super(K,X),this.chatThread=new Sn(this),this.chat=new xa(this)}}const wr=se=>$t({credential:{getToken:(X,he)=>se.getToken({abortSignal:null==he?void 0:he.abortSignal})},scopes:[]});class Gn{constructor(K,X,he,Me={}){this.endpoint=K,this.timeOfLastTypingRequest=void 0,this.threadId=X,this.tokenCredential=he;const Oe=Object.assign(Object.assign({},Me),{loggingOptions:{logger:u.info}});this.client=new cl(this.endpoint,Object.assign({endpoint:this.endpoint},Oe));const Pe=wr(this.tokenCredential);this.client.pipeline.addPolicy(Pe)}getProperties(K={}){var X=this;return(0,N.Z)(function*(){const{span:he,updatedOptions:Me}=h("ChatClient-GetProperties",K);try{const Oe=yield X.client.chatThread.getChatThreadProperties(X.threadId,Me);return U(Oe)}catch(Oe){throw he.setStatus({code:T.Qn.ERROR,message:Oe.message}),Oe}finally{he.end()}})()}updateTopic(K,X={}){var he=this;return(0,N.Z)(function*(){const{span:Me,updatedOptions:Oe}=h("ChatThreadClient-UpdateTopic",X);try{yield he.client.chatThread.updateChatThreadProperties(he.threadId,{topic:K},Oe)}catch(Pe){throw Me.setStatus({code:T.Qn.ERROR,message:Pe.message}),Pe}finally{Me.end()}})()}sendMessage(K,X={}){var he=this;return(0,N.Z)(function*(){const{span:Me,updatedOptions:Oe}=h("ChatThreadClient-SendMessage",X);try{return he.timeOfLastTypingRequest=void 0,yield he.client.chatThread.sendChatMessage(he.threadId,Object.assign(Object.assign({},K),X),Oe)}catch(Pe){throw Me.setStatus({code:T.Qn.ERROR,message:Pe.message}),Pe}finally{Me.end()}})()}getMessage(K,X={}){var he=this;return(0,N.Z)(function*(){const{span:Me,updatedOptions:Oe}=h("ChatThreadClient-GetMessage",X);try{const Pe=yield he.client.chatThread.getChatMessage(he.threadId,K,Oe);return O(Pe)}catch(Pe){throw Me.setStatus({code:T.Qn.ERROR,message:Pe.message}),Pe}finally{Me.end()}})()}listMessagesPage(K,X={}){return(0,m.FC)(this,arguments,function*(){if(!K.continuationToken){const Me=yield(0,m.qq)(this.client.chatThread.listChatMessages(this.threadId,X));K.continuationToken=Me.nextLink,Me.value&&(yield yield(0,m.qq)(Me.value.map(O,this)))}for(;K.continuationToken;){const Me=yield(0,m.qq)(this.client.chatThread.listChatMessagesNext(this.threadId,K.continuationToken,X));if(K.continuationToken=Me.nextLink,!Me.value)break;yield yield(0,m.qq)(Me.value.map(O,this))}})}listMessagesAll(K){return(0,m.FC)(this,arguments,function*(){var he,Me;try{for(var Pe,Oe=(0,m.KL)(this.listMessagesPage({},K));!(Pe=yield(0,m.qq)(Oe.next())).done;){const Ue=Pe.value;yield(0,m.qq)(yield*(0,m.V2)((0,m.KL)(Ue)))}}catch(Ue){he={error:Ue}}finally{try{Pe&&!Pe.done&&(Me=Oe.return)&&(yield(0,m.qq)(Me.call(Oe)))}finally{if(he)throw he.error}}})}listMessages(K={}){const{span:X,updatedOptions:he}=h("ChatThreadClient-ListMessages",K);try{const Me=this.listMessagesAll(he);return{next:()=>Me.next(),[Symbol.asyncIterator](){return this},byPage:(Oe={})=>this.listMessagesPage(Oe,he)}}catch(Me){throw X.setStatus({code:T.Qn.ERROR,message:Me.message}),Me}finally{X.end()}}deleteMessage(K,X={}){var he=this;return(0,N.Z)(function*(){const{span:Me,updatedOptions:Oe}=h("ChatThreadClient-DeleteMessage",X);try{yield he.client.chatThread.deleteChatMessage(he.threadId,K,Oe)}catch(Pe){throw Me.setStatus({code:T.Qn.ERROR,message:Pe.message}),Pe}finally{Me.end()}})()}updateMessage(K,X={}){var he=this;return(0,N.Z)(function*(){const{span:Me,updatedOptions:Oe}=h("ChatThreadClient-UpdateMessage",X);try{yield he.client.chatThread.updateChatMessage(he.threadId,K,X,Oe)}catch(Pe){throw Me.setStatus({code:T.Qn.ERROR,message:Pe.message}),Pe}finally{Me.end()}})()}addParticipants(K,X={}){var he=this;return(0,N.Z)(function*(){const{span:Me,updatedOptions:Oe}=h("ChatThreadClient-AddParticipants",X);try{return yield he.client.chatThread.addChatParticipants(he.threadId,(se=>{var K;return{participants:null===(K=se.participants)||void 0===K?void 0:K.map(X=>w(X))}})(K),Oe)}catch(Pe){throw Me.setStatus({code:T.Qn.ERROR,message:Pe.message}),Pe}finally{Me.end()}})()}listParticipantsPage(K,X={}){return(0,m.FC)(this,arguments,function*(){if(!K.continuationToken){const Me=yield(0,m.qq)(this.client.chatThread.listChatParticipants(this.threadId,X));K.continuationToken=Me.nextLink,Me.value&&(yield yield(0,m.qq)(Me.value.map(P,this)))}for(;K.continuationToken;){const Me=yield(0,m.qq)(this.client.chatThread.listChatParticipantsNext(this.threadId,K.continuationToken,X));if(K.continuationToken=Me.nextLink,!Me.value)break;yield yield(0,m.qq)(Me.value.map(P,this))}})}listParticipantsAll(K){return(0,m.FC)(this,arguments,function*(){var he,Me;try{for(var Pe,Oe=(0,m.KL)(this.listParticipantsPage({},K));!(Pe=yield(0,m.qq)(Oe.next())).done;){const Ue=Pe.value;yield(0,m.qq)(yield*(0,m.V2)((0,m.KL)(Ue)))}}catch(Ue){he={error:Ue}}finally{try{Pe&&!Pe.done&&(Me=Oe.return)&&(yield(0,m.qq)(Me.call(Oe)))}finally{if(he)throw he.error}}})}listParticipants(K={}){const{span:X,updatedOptions:he}=h("ChatThreadClient-ListParticipants",K);try{const Me=this.listParticipantsAll(he);return{next:()=>Me.next(),[Symbol.asyncIterator](){return this},byPage:(Oe={})=>this.listParticipantsPage(Oe,he)}}catch(Me){throw X.setStatus({code:T.Qn.ERROR,message:Me.message}),Me}finally{X.end()}}removeParticipant(K,X={}){var he=this;return(0,N.Z)(function*(){const{span:Me,updatedOptions:Oe}=h("ChatThreadClient-RemoveParticipant",X);try{yield he.client.chatThread.removeChatParticipant(he.threadId,(0,C.J)(K),Oe)}catch(Pe){throw Me.setStatus({code:T.Qn.ERROR,message:Pe.message}),Pe}finally{Me.end()}})()}sendTypingNotification(K={}){var X=this;return(0,N.Z)(function*(){const{span:he,updatedOptions:Me}=h("ChatThreadClient-SendTypingNotification",K);try{const Oe=new Date,{senderDisplayName:Pe}=Me,Ue=(0,m._T)(Me,["senderDisplayName"]);return X.canPostTypingNotification(Oe)?(yield X.client.chatThread.sendTypingNotification(X.threadId,Object.assign({sendTypingNotificationRequest:{senderDisplayName:Pe}},Ue)),X.timeOfLastTypingRequest=Oe,!0):(u.info(`Typing Notification NOT Send. [thread_id=${X.threadId}]`),!1)}catch(Oe){throw he.setStatus({code:T.Qn.ERROR,message:Oe.message}),Oe}finally{he.end()}})()}sendReadReceipt(K,X={}){var he=this;return(0,N.Z)(function*(){const{span:Me,updatedOptions:Oe}=h("ChatThreadClient-SendReadReceipt",X);try{yield he.client.chatThread.sendChatReadReceipt(he.threadId,K,Oe)}catch(Pe){throw Me.setStatus({code:T.Qn.ERROR,message:Pe.message}),Pe}finally{Me.end()}})()}listReadReceiptsPage(K,X={}){return(0,m.FC)(this,arguments,function*(){if(!K.continuationToken){const Me=yield(0,m.qq)(this.client.chatThread.listChatReadReceipts(this.threadId,X));K.continuationToken=Me.nextLink,Me.value&&(yield yield(0,m.qq)(Me.value.map(H,this)))}for(;K.continuationToken;){const Me=yield(0,m.qq)(this.client.chatThread.listChatReadReceiptsNext(this.threadId,K.continuationToken,X));if(K.continuationToken=Me.nextLink,!Me.value)break;yield yield(0,m.qq)(Me.value.map(H,this))}})}listReadReceiptsAll(K){return(0,m.FC)(this,arguments,function*(){var he,Me;try{for(var Pe,Oe=(0,m.KL)(this.listReadReceiptsPage({},K));!(Pe=yield(0,m.qq)(Oe.next())).done;){const Ue=Pe.value;yield(0,m.qq)(yield*(0,m.V2)((0,m.KL)(Ue)))}}catch(Ue){he={error:Ue}}finally{try{Pe&&!Pe.done&&(Me=Oe.return)&&(yield(0,m.qq)(Me.call(Oe)))}finally{if(he)throw he.error}}})}listReadReceipts(K={}){const{span:X,updatedOptions:he}=h("ChatThreadClient-ListChatReadReceipts",K);try{const Me=this.listReadReceiptsAll(he);return{next:()=>Me.next(),[Symbol.asyncIterator](){return this},byPage:(Oe={})=>this.listReadReceiptsPage(Oe,he)}}catch(Me){throw X.setStatus({code:T.Qn.ERROR,message:Me.message}),Me}finally{X.end()}}canPostTypingNotification(K){return!(this.timeOfLastTypingRequest&&K.getTime()-this.timeOfLastTypingRequest.getTime()<8e3&&(u.info(`Typing interval check failed. [last_request=${this.timeOfLastTypingRequest}]`),1))}}var Ps,Yc=new Uint8Array(16);function Xc(){if(!Ps&&!(Ps="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ps(Yc)}const ef=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,nf=function(se){return"string"==typeof se&&ef.test(se)};for(var or=[],Ao=0;Ao<256;++Ao)or.push((Ao+256).toString(16).substr(1));const rf=function(se,K,X){var he=(se=se||{}).random||(se.rng||Xc)();if(he[6]=15&he[6]|64,he[8]=63&he[8]|128,K){X=X||0;for(var Me=0;Me<16;++Me)K[X+Me]=he[Me];return K}return function(se){var K=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,X=(or[se[K+0]]+or[se[K+1]]+or[se[K+2]]+or[se[K+3]]+"-"+or[se[K+4]]+or[se[K+5]]+"-"+or[se[K+6]]+or[se[K+7]]+"-"+or[se[K+8]]+or[se[K+9]]+"-"+or[se[K+10]]+or[se[K+11]]+or[se[K+12]]+or[se[K+13]]+or[se[K+14]]+or[se[K+15]]).toLowerCase();if(!nf(X))throw TypeError("Stringified UUID is invalid");return X}(he)};class Qo{constructor(K,X,he={}){this.endpoint=K,this.signalingClient=void 0,this.emitter=new v.EventEmitter,this.isRealtimeNotificationsStarted=!1,this.tokenCredential=X,this.clientOptions=Object.assign({},he);const Me=Object.assign(Object.assign({},he),{loggingOptions:{logger:u.info}});this.client=new cl(this.endpoint,Object.assign({endpoint:this.endpoint},Me));const Oe=wr(this.tokenCredential);this.client.pipeline.addPolicy(Oe),this.signalingClient=((se,K,X)=>{var he;return new M.CommunicationSignalingClient(se,K,{environment:null!==(he=null==X?void 0:X.environment)&&void 0!==he?he:void 0})})(X,u,he.signalingClientOptions)}getChatThreadClient(K){return new Gn(this.endpoint,K,this.tokenCredential,this.clientOptions)}createChatThread(K,X={}){var he=this;return(0,N.Z)(function*(){var Me,Oe;const{span:Pe,updatedOptions:Ue}=h("ChatClient-CreateChatThread",X);try{Ue.idempotencyToken=null!==(Me=Ue.idempotencyToken)&&void 0!==Me?Me:rf();const ht=(se=>{const{idempotencyToken:X}=se,he=(0,m._T)(se,["participants","idempotencyToken"]);return Object.assign({repeatabilityRequestId:X},he)})(Ue);return(se=>{const{chatThread:K}=se,X=(0,m._T)(se,["chatThread"]);return K?Object.assign(Object.assign({},X),{chatThread:U(K)}):Object.assign({},X)})(yield he.client.chat.createChatThread({topic:K.topic,participants:null===(Oe=X.participants)||void 0===Oe?void 0:Oe.map(rt=>w(rt))},ht))}catch(ht){throw Pe.setStatus({code:T.Qn.ERROR,message:ht.message}),ht}finally{Pe.end()}})()}listChatThreadsPage(K,X={}){return(0,m.FC)(this,arguments,function*(){if(!K.continuationToken){const Me=yield(0,m.qq)(this.client.chat.listChatThreads(X));K.continuationToken=Me.nextLink,Me.value&&(yield yield(0,m.qq)(Me.value))}for(;K.continuationToken;){const Me=yield(0,m.qq)(this.client.chat.listChatThreadsNext(K.continuationToken,X));if(K.continuationToken=Me.nextLink,!Me.value)break;yield yield(0,m.qq)(Me.value)}})}listChatThreadsAll(K){return(0,m.FC)(this,arguments,function*(){var he,Me;try{for(var Pe,Oe=(0,m.KL)(this.listChatThreadsPage({},K));!(Pe=yield(0,m.qq)(Oe.next())).done;){const Ue=Pe.value;yield(0,m.qq)(yield*(0,m.V2)((0,m.KL)(Ue)))}}catch(Ue){he={error:Ue}}finally{try{Pe&&!Pe.done&&(Me=Oe.return)&&(yield(0,m.qq)(Me.call(Oe)))}finally{if(he)throw he.error}}})}listChatThreads(K={}){const{span:X,updatedOptions:he}=h("ChatClient-ListChatThreads",K);try{const Me=this.listChatThreadsAll(he);return{next:()=>Me.next(),[Symbol.asyncIterator](){return this},byPage:(Oe={})=>this.listChatThreadsPage(Oe,he)}}catch(Me){throw X.setStatus({code:T.Qn.ERROR,message:Me.message}),Me}finally{X.end()}}deleteChatThread(K,X={}){var he=this;return(0,N.Z)(function*(){const{span:Me,updatedOptions:Oe}=h("ChatClient-DeleteChatThread",X);try{yield he.client.chat.deleteChatThread(K,Oe)}catch(Pe){throw Me.setStatus({code:T.Qn.ERROR,message:Pe.message}),Pe}finally{Me.end()}})()}startRealtimeNotifications(){var K=this;return(0,N.Z)(function*(){if(void 0===K.signalingClient)throw new Error("Realtime notifications are not supported in node js.");K.isRealtimeNotificationsStarted||(K.isRealtimeNotificationsStarted=!0,yield K.signalingClient.start(),K.subscribeToSignalingEvents())})()}stopRealtimeNotifications(){var K=this;return(0,N.Z)(function*(){if(void 0===K.signalingClient)throw new Error("Realtime notifications are not supported in node js.");K.isRealtimeNotificationsStarted=!1,yield K.signalingClient.stop(),K.emitter.removeAllListeners()})()}on(K,X){if(void 0===this.signalingClient)throw new Error("Realtime notifications are only supported in the browser.");if(!this.isRealtimeNotificationsStarted)throw new Error("You must call startRealtimeNotifications before you can subscribe to events.");this.emitter.on(K,X)}off(K,X){if(void 0===this.signalingClient)throw new Error("Realtime notifications are only supported in the browser.");this.emitter.removeListener(K,X)}subscribeToSignalingEvents(){if(void 0===this.signalingClient)throw new Error("Realtime notifications are only supported in the browser.");this.signalingClient.on("chatMessageReceived",K=>{this.emitter.emit("chatMessageReceived",K)}),this.signalingClient.on("chatMessageEdited",K=>{this.emitter.emit("chatMessageEdited",K)}),this.signalingClient.on("chatMessageDeleted",K=>{this.emitter.emit("chatMessageDeleted",K)}),this.signalingClient.on("typingIndicatorReceived",K=>{this.emitter.emit("typingIndicatorReceived",K)}),this.signalingClient.on("readReceiptReceived",K=>{this.emitter.emit("readReceiptReceived",K)}),this.signalingClient.on("chatThreadCreated",K=>{this.emitter.emit("chatThreadCreated",K)}),this.signalingClient.on("chatThreadDeleted",K=>{this.emitter.emit("chatThreadDeleted",K)}),this.signalingClient.on("chatThreadPropertiesUpdated",K=>{this.emitter.emit("chatThreadPropertiesUpdated",K)}),this.signalingClient.on("participantsAdded",K=>{this.emitter.emit("participantsAdded",K)}),this.signalingClient.on("participantsRemoved",K=>{this.emitter.emit("participantsRemoved",K)})}}},8199:(Y,L,E)=>{"use strict";E.d(L,{J:()=>v,H:()=>M});var p=E(4762),N=E(6361);const m=(A,T)=>void 0===T?A:Object.assign(Object.assign({},A),{rawId:T}),R=(A,T)=>{const g=Object.keys(A)[0],h=A[g];if(T in h)return h[T];throw new Error(`Property ${T} is required for identifier of type ${g}.`)},v=A=>{var T,g;const h=(0,N.n9)(A);switch(h.kind){case"communicationUser":return{communicationUser:{id:h.communicationUserId}};case"phoneNumber":return m({phoneNumber:{value:h.phoneNumber}},h.rawId);case"microsoftTeamsUser":return m({microsoftTeamsUser:{userId:h.microsoftTeamsUserId,isAnonymous:null!==(T=h.isAnonymous)&&void 0!==T&&T,cloud:null!==(g=h.cloud)&&void 0!==g?g:"public"}},h.rawId);case"unknown":return{rawId:h.id};default:throw new Error(`Can't serialize an identifier with kind ${h.kind}`)}},M=A=>{(A=>{const g=(0,p._T)(A,["rawId"]),h=Object.keys(g);if(h.length>1)throw new Error(`Only one of the properties in ${JSON.stringify(h)} should be present.`)})(A);const{communicationUser:T,microsoftTeamsUser:g,phoneNumber:h}=A;return T?{kind:"communicationUser",communicationUserId:R({communicationUser:T},"id")}:h?{kind:"phoneNumber",phoneNumber:R({phoneNumber:h},"value"),rawId:R({phoneNumber:A},"rawId")}:g?{kind:"microsoftTeamsUser",microsoftTeamsUserId:R({microsoftTeamsUser:g},"userId"),isAnonymous:R({microsoftTeamsUser:g},"isAnonymous"),cloud:R({microsoftTeamsUser:g},"cloud"),rawId:R({microsoftTeamsUser:A},"rawId")}:{kind:"unknown",id:R({unknown:A},"rawId")}}},6361:(Y,L,E)=>{"use strict";E.d(L,{sE:()=>p,Nc:()=>N,OU:()=>m,vJ:()=>R,n9:()=>u});const p=v=>"string"==typeof v.communicationUserId,N=v=>"string"==typeof v.phoneNumber,m=v=>"string"==typeof v.microsoftTeamsUserId,R=v=>"string"==typeof v.id,u=v=>p(v)?Object.assign(Object.assign({},v),{kind:"communicationUser"}):N(v)?Object.assign(Object.assign({},v),{kind:"phoneNumber"}):m(v)?Object.assign(Object.assign({},v),{kind:"microsoftTeamsUser"}):Object.assign(Object.assign({},v),{kind:"unknown"})},9116:(Y,L,E)=>{"use strict";E.r(L),E.d(L,{AzureCommunicationTokenCredential:()=>g,createCommunicationAccessKeyCredentialPolicy:()=>B,createCommunicationAuthPolicy:()=>$,deserializeCommunicationIdentifier:()=>d.H,getIdentifierKind:()=>D.n9,isCommunicationUserIdentifier:()=>D.sE,isKeyCredential:()=>f,isMicrosoftTeamsUserIdentifier:()=>D.OU,isPhoneNumberIdentifier:()=>D.Nc,isUnknownIdentifier:()=>D.vJ,parseClientArguments:()=>_,parseConnectionString:()=>s,serializeCommunicationIdentifier:()=>d.J});var p=E(8239),N=E(4934),m=E.n(N);const R=i=>{const{exp:y}=m()(i);return{token:i,expiresOnTimestamp:1e3*y}};class u{constructor(y){this.token=y}getToken(){var y=this;return(0,p.Z)(function*(){return y.token})()}dispose(){}}const v={token:"",expiresOnTimestamp:-10};class T{constructor(y){this.refreshingIntervalInMs=6e5,this.activeTokenFetching=null,this.activeTokenUpdating=null,this.disposed=!1;const{tokenRefresher:z,token:q,refreshProactively:Z}=y;this.refresh=z,this.currentToken=q?R(q):v,this.refreshProactively=null!=Z&&Z,this.refreshProactively&&this.scheduleRefresh()}getToken(y){var z=this;return(0,p.Z)(function*(){if(!z.isCurrentTokenExpiringSoon)return z.currentToken;const q=z.updateTokenAndReschedule(null==y?void 0:y.abortSignal);return z.isCurrentTokenValid||(yield q),z.currentToken})()}dispose(){this.disposed=!0,this.activeTokenFetching=null,this.activeTokenUpdating=null,this.currentToken=v,this.activeTimeout&&clearTimeout(this.activeTimeout)}updateTokenAndReschedule(y){var z=this;return(0,p.Z)(function*(){if(z.activeTokenUpdating)return z.activeTokenUpdating;z.activeTokenUpdating=z.refreshTokenAndReschedule(y);try{yield z.activeTokenUpdating}finally{z.activeTokenUpdating=null}})()}refreshTokenAndReschedule(y){var z=this;return(0,p.Z)(function*(){z.currentToken=yield z.refreshToken(y),z.refreshProactively&&z.scheduleRefresh()})()}refreshToken(y){var z=this;return(0,p.Z)(function*(){try{return z.activeTokenFetching||(z.activeTokenFetching=z.refresh(y)),R(yield z.activeTokenFetching)}finally{z.activeTokenFetching=null}})()}scheduleRefresh(){if(this.disposed)return;this.activeTimeout&&clearTimeout(this.activeTimeout);const y=this.currentToken.expiresOnTimestamp-Date.now()-this.refreshingIntervalInMs;this.activeTimeout=setTimeout(()=>this.updateTokenAndReschedule(),y)}get isCurrentTokenValid(){return this.currentToken&&Date.now()<this.currentToken.expiresOnTimestamp}get isCurrentTokenExpiringSoon(){return!this.currentToken||Date.now()>=this.currentToken.expiresOnTimestamp-this.refreshingIntervalInMs}}class g{constructor(y){this.disposed=!1,this.tokenCredential="string"==typeof y?new u(R(y)):new T(y)}getToken(y){var z=this;return(0,p.Z)(function*(){z.throwIfDisposed();const q=yield z.tokenCredential.getToken(y);return z.throwIfDisposed(),q})()}dispose(){this.disposed=!0,this.tokenCredential.dispose()}throwIfDisposed(){if(this.disposed)throw new Error("User credential is disposed")}}var h=E(2462),C=E(369),b=E(7694);const w=i=>(new TextEncoder).encode(i);function P(i){if("function"!=typeof btoa)throw new Error("Your browser environment is missing the global `btoa` function");const y=new Uint8Array(i);let z="";for(const q of y)z+=String.fromCharCode(q);return btoa(z)}const k=globalThis,O=()=>{if(!k)throw new Error("Could not find global");if(!k.crypto||!k.crypto.subtle)throw new Error("Browser does not support cryptography functions");return k.crypto.subtle},V=function(){var i=(0,p.Z)(function*(y){const z=w(y);return P(yield O().digest("SHA-256",z))});return function(z){return i.apply(this,arguments)}}(),U=function(){var i=(0,p.Z)(function*(y,z){const q={name:"HMAC",hash:{name:"SHA-256"}},Z=w(z),ge=function(i){if("function"!=typeof atob)throw new Error("Your browser environment is missing the global `atob` function");const y=atob(i),z=new Uint8Array(y.length);for(let q=0;q<y.length;q++)z[q]=y.charCodeAt(q);return z}(y),me=O(),le=yield me.importKey("raw",ge,q,!1,["sign"]);return P(yield me.sign(q,le,Z))});return function(z,q){return i.apply(this,arguments)}}(),B=i=>({create:(y,z)=>new H(i,y,z)});class H extends h.U{constructor(y,z,q){super(z,q),this.accessKey=y}signRequest(y){var z=this;return(0,p.Z)(function*(){const q=y.method.toUpperCase(),Z=(new Date).toUTCString(),ge=yield V(y.body||""),me="x-ms-date",le=`${me};host;x-ms-content-sha256`,fe=C.UK.parse(y.url),ae=fe.getQuery(),de=ae?`${fe.getPath()}?${ae}`:fe.getPath(),xe=fe.getPort(),Ce=xe?`${fe.getHost()}:${xe}`:fe.getHost(),oe=`${q}\n${de}\n${Z};${Ce};${ge}`,we=yield U(z.accessKey.key,oe);return b.UG&&y.headers.set("Host",Ce||""),y.headers.set(me,Z),y.headers.set("x-ms-content-sha256",ge),y.headers.set("Authorization",`HMAC-SHA256 SignedHeaders=${le}&Signature=${we}`),y})()}sendRequest(y){var z=this;return(0,p.Z)(function*(){if(!y)throw new Error("webResource cannot be null or undefined");return z._nextPolicy.sendRequest(yield z.signRequest(y))})()}}var W=E(434),te=E(6354);const $=i=>(0,W.c)(i)?(0,te.v)(i,"https://communication.azure.com//.default"):B(i);class pe{constructor(y){if(!y)throw new Error("key must be a non-empty string");this._key=y}get key(){return this._key}update(y){this._key=y}}const x=/endpoint=(.*);accesskey=(.*)/i,s=i=>{const y=(i=>{const y=i.match(x);if((null==y?void 0:y[1])&&y[2])return{endpoint:y[1],credential:new pe(y[2])}})(i);if(y)return y;throw new Error(`Invalid connection string ${i}`)},a=i=>{if(!(i=>{var y;const z=C.UK.parse(i);return!!(null===(y=z.getScheme())||void 0===y?void 0:y.match(/^http[s]?/))&&void 0!==z.getHost()&&""!==z.getHost()&&(void 0===z.getPath()||""===z.getPath()||"/"===z.getPath())})(i))throw new Error(`Invalid endpoint url ${i}`)},f=i=>i&&"string"==typeof i.key&&void 0===i.getToken,_=(i,y)=>{if(f(y)||(0,W.c)(y))return a(i),{url:i,credential:y};{const{endpoint:z,credential:q}=s(i);return a(z),{url:z,credential:q}}};var D=E(6361),d=E(8199)},2305:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";function _interopDefault(Y){return Y&&"object"==typeof Y&&"default"in Y?Y.default:Y}var coreHttp=_interopDefault(__webpack_require__(8003)),commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function unwrapExports(Y){return Y&&Y.__esModule&&Object.prototype.hasOwnProperty.call(Y,"default")?Y.default:Y}function createCommonjsModule(Y,L){return Y(L={exports:{}},L.exports),L.exports}var tsregistrar=createCommonjsModule(function(Y,L){Y.exports=function(E){function p(m){if(N[m])return N[m].exports;var R=N[m]={i:m,l:!1,exports:{}};return E[m].call(R.exports,R,R.exports,p),R.l=!0,R.exports}var N={};return p.m=E,p.c=N,p.i=function(m){return m},p.d=function(m,R,u){p.o(m,R)||Object.defineProperty(m,R,{configurable:!1,enumerable:!0,get:u})},p.n=function(m){var R=m&&m.__esModule?function(){return m.default}:function(){return m};return p.d(R,"a",R),R},p.o=function(m,R){return Object.prototype.hasOwnProperty.call(m,R)},p.p="",p(p.s=1)}([function(E,p,N){Object.defineProperty(p,"__esModule",{value:!0}),p.toJson=function(u){try{return JSON.stringify(u)}catch(v){return"Unable to serialize object of type "+typeof u}};var R=function(){function u(){this.start=Date.now()}return Object.defineProperty(u.prototype,"duration",{get:function(){return Date.now()-this.start},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"startTime",{get:function(){return this.start},enumerable:!0,configurable:!0}),u.prototype.reset=function(){this.start=Date.now()},u}();p.Timespan=R},function(E,p,N){var h,R=this&&this.__extends||(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,b){C.__proto__=b}||function(C,b){for(var w in b)b.hasOwnProperty(w)&&(C[w]=b[w])},function(C,b){function w(){this.constructor=C}h(C,b),C.prototype=null===b?Object.create(b):(w.prototype=b.prototype,new w)}),u=this&&this.__awaiter||function(h,C,b,w){return new(b||(b=Promise))(function(I,P){function k(U){try{V(w.next(U))}catch(B){P(B)}}function O(U){try{V(w.throw(U))}catch(B){P(B)}}function V(U){U.done?I(U.value):new b(function(B){B(U.value)}).then(k,O)}V((w=w.apply(h,C||[])).next())})},v=this&&this.__generator||function(h,C){function b(U){return function(B){return function(U){if(I)throw new TypeError("Generator is already executing.");for(;V;)try{if(I=1,P&&(k=2&U[0]?P.return:U[0]?P.throw||((k=P.return)&&k.call(P),0):P.next)&&!(k=k.call(P,U[1])).done)return k;switch(P=0,k&&(U=[2&U[0],k.value]),U[0]){case 0:case 1:k=U;break;case 4:return V.label++,{value:U[1],done:!1};case 5:V.label++,P=U[1],U=[0];continue;case 7:U=V.ops.pop(),V.trys.pop();continue;default:if(!(k=(k=V.trys).length>0&&k[k.length-1])&&(6===U[0]||2===U[0])){V=0;continue}if(3===U[0]&&(!k||U[1]>k[0]&&U[1]<k[3])){V.label=U[1];break}if(6===U[0]&&V.label<k[1]){V.label=k[1],k=U;break}if(k&&V.label<k[2]){V.label=k[2],V.ops.push(U);break}k[2]&&V.ops.pop(),V.trys.pop();continue}U=C.call(h,V)}catch(B){U=[6,B],P=0}finally{I=k=0}if(5&U[0])throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}([U,B])}}var I,P,k,O,V={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return O={next:b(0),throw:b(1),return:b(2)},"function"==typeof Symbol&&(O[Symbol.iterator]=function(){return this}),O};Object.defineProperty(p,"__esModule",{value:!0});var M=N(0),A=function(h){function C(b){var w=h.call(this,b)||this;return w.name="CancelationError",w}return R(C,h),C}(Error),T=function(){function h(C,b,w){this.logger=C,this.maxBackoffInMs=b,this.initialDelay=w,this.backoffCount=0,this.id=++h.idCounter}return h.prototype.delay=function(C){var b=this;if(void 0!==this.timerHandle)throw new Error("Retry sequence logical failure");if(-1===this.backoffCount)return new Promise(function(I,P){P(new A("Cancelled"))});var w=this.calculateNextBackoffMs();return this.backoffCount++,this.logger.info("[RegistrarClient] Backing off "+C+" for "+w+" milliseconds with ID "+this.id),new Promise(function(I,P){b.cancelFunc=P,b.timerHandle=setTimeout(function(){b.logger.info("[RegistrarClient] Back off for "+C+" with ID "+b.id+" complete"),b.timerHandle=void 0,I()},w)})},h.prototype.cancel=function(){void 0!==this.timerHandle&&(this.logger.debug("Resetting back off"),clearTimeout(this.timerHandle),void 0!==this.cancelFunc&&this.cancelFunc(new A("Cancelled"))),this.backoffCount=-1},h.prototype.calculateNextBackoffMs=function(){var C=1+.4*(Math.random()-.5),b=this.initialDelay*Math.pow(2,this.backoffCount)*C;return b=Math.round(b),Math.min(this.maxBackoffInMs,b)},h.idCounter=0,h}(),g=function(){function h(C,b,w){this.logger=C,this.skypeTokenProvider=b,this.options=w,this.backoffs={}}return h.prototype.setTelemetryLogger=function(C){this.eventLogger=C},h.prototype.register=function(C,b){return u(this,void 0,void 0,function(){return v(this,function(w){switch(w.label){case 0:return[4,this.performRegistration(C,b,"pr_set_registration")];case 1:return w.sent(),this.cachedRegistrationParams=[C,b],[2]}})})},h.prototype.unregister=function(){return u(this,void 0,void 0,function(){var C;return v(this,function(b){switch(b.label){case 0:return this.logger.info("[RegistrarClient] sending unregister request"),C=new Request(this.options.registrarUrl+"/"+this.options.registrationId,{method:"DELETE",mode:"cors",headers:new Headers({accept:"application/json, text/javascript"})}),[4,this.callRegistrar(C,"pr_delete_registration")];case 1:return b.sent(),[2]}})})},h.prototype.cancelPendingRequests=function(){var C=this;Object.keys(this.backoffs).forEach(function(b){C.backoffs[b].cancel()}),this.backoffs={}},h.prototype.resendRegistration=function(){return u(this,void 0,void 0,function(){return v(this,function(C){switch(C.label){case 0:if(!this.cachedRegistrationParams)throw new Error("Re-registration failed because there is no registration parameters cached");return[4,this.performRegistration(this.cachedRegistrationParams[0],this.cachedRegistrationParams[1],"pr_resend_registration")];case 1:return C.sent(),[2]}})})},h.prototype.performRegistration=function(C,b,w){return u(this,void 0,void 0,function(){var I,P;return v(this,function(k){switch(k.label){case 0:return this.logger.info("[RegistrarClient] Sending register request"),I={clientDescription:C,registrationId:this.options.registrationId,nodeId:"",transports:b},P=new Request(this.options.registrarUrl,{method:"POST",mode:"cors",headers:new Headers({"content-type":"application/json",accept:"application/json, text/javascript"}),body:M.toJson(I)}),[4,this.callRegistrar(P,w)];case 1:return k.sent(),[2]}})})},h.prototype.startBackoff=function(){var C=new T(this.logger,this.options.maxRetryDelayMs,this.options.initialRetryDelayMs);return this.backoffs[C.id]=C,C},h.prototype.stopBackoff=function(C){C.cancel(),delete this.backoffs[C.id]},h.prototype.getSkypeToken=function(){return u(this,void 0,void 0,function(){var C,b,I;return v(this,function(P){switch(P.label){case 0:C=this.startBackoff(),P.label=1;case 1:return P.trys.push([1,3,,8]),this.logger.info("[RegistrarClient] Asking for a new skypetoken"),[4,this.skypeTokenProvider(!0)];case 2:return b=P.sent(),this.stopBackoff(C),[2,b];case 3:P.sent(),P.label=4;case 4:return P.trys.push([4,6,,7]),[4,C.delay("Fetching a new skypetoken")];case 5:return P.sent(),[3,8];case 6:throw I=P.sent(),this.stopBackoff(C),I;case 7:return[3,8];case 8:return[3,1];case 9:return[2]}})})},h.prototype.callRegistrar=function(C,b){return u(this,void 0,void 0,function(){var w,I,P,k,O,V,U,B,H,W,te,$,x;return v(this,function(r){switch(r.label){case 0:return w=this.startBackoff(),[4,this.skypeTokenProvider(!1)];case 1:I=r.sent(),this.setSkypeTokenHeader(C,I),P=new M.Timespan,r.label=2;case 2:k=void 0,r.label=3;case 3:return r.trys.push([3,8,13,14]),O=C.clone(),[4,this.fetchWithTimeout(O)];case 4:return 401!==(k=r.sent()).status?[3,6]:(V=this.setSkypeTokenHeader,U=[C],[4,this.getSkypeToken()]);case 5:return V.apply(this,U.concat([r.sent()])),[3,20];case 6:if(k.status>=500&&k.status<600)throw new Error("Fetch for '"+C.url+"' failed with "+k.status+" "+k.statusText);r.label=7;case 7:return[3,14];case 8:B=r.sent(),this.logger.error("[RegistrarClient] Request failed with "+B),r.label=9;case 9:return r.trys.push([9,11,,12]),[4,w.delay("Registrar call retry")];case 10:return r.sent(),[3,20];case 11:throw H=r.sent(),this.logger.error("[RegistrarClient] Request cancelled"),this.stopBackoff(w),H;case 12:return[3,14];case 13:return this.sendTelemetryEvent(b,C,k,P),[7];case 14:return this.stopBackoff(w),k.ok?[2,k]:[3,15];case 15:W=void 0,r.label=16;case 16:return r.trys.push([16,18,,19]),$=(te=JSON).stringify,[4,k.json()];case 17:return W=$.apply(te,[r.sent()]),[3,19];case 18:return r.sent(),W="no details",[3,19];case 19:throw x="Fetch for '"+C.url+"' failed with "+k.status+" "+k.statusText+" ("+W+", MS-CV: "+k.headers.get("MS-CV")+")",this.logger.error("[RegistrarClient] "+x),new Error(x);case 20:return[3,2];case 21:return[2]}})})},h.prototype.setSkypeTokenHeader=function(C,b){C.headers.set("X-Skypetoken",b)},h.prototype.fetchWithTimeout=function(C){var b=this;return new Promise(function(w,I){fetch(C).then(w).catch(I),0!==b.options.requestTimeoutMs&&setTimeout(I,b.options.requestTimeoutMs,new Error("Fetch for '"+C.url+"' timed out"))})},h.prototype.sendTelemetryEvent=function(C,b,w,I){void 0!==this.eventLogger&&this.eventLogger.logEvent({name:C,properties:{url:{value:b.url},result_code:{value:void 0!==w?w.status:0},begin_timestamp:{value:I.startTime},elapsed:{value:I.duration}}})},h}();p.RegistrarClient=g,p.createRegistrarClient=function(h,C,b){return new g(h,C,b)}}])});unwrapExports(tsregistrar);var tstrouter=createCommonjsModule(function(module,exports){var L;L=function(__WEBPACK_EXTERNAL_MODULE_20__){return function(Y){function L(p){if(E[p])return E[p].exports;var N=E[p]={i:p,l:!1,exports:{}};return Y[p].call(N.exports,N,N.exports,L),N.l=!0,N.exports}var E={};return L.m=Y,L.c=E,L.i=function(p){return p},L.d=function(p,N,m){L.o(p,N)||Object.defineProperty(p,N,{configurable:!1,enumerable:!0,get:m})},L.n=function(p){var N=p&&p.__esModule?function(){return p.default}:function(){return p};return L.d(N,"a",N),N},L.o=function(p,N){return Object.prototype.hasOwnProperty.call(p,N)},L.p="",L(L.s=19)}([function(Y,L,E){Object.defineProperty(L,"__esModule",{value:!0});var p=function(){function N(m,R){this.name=m,this.logger=R}return N.prototype.debug=function(m){this.logger.debug("["+this.name+"] "+m)},N.prototype.info=function(m){this.logger.info("["+this.name+"] "+m)},N.prototype.warn=function(m){this.logger.warn("["+this.name+"] "+m)},N.prototype.error=function(m){this.logger.error("["+this.name+"] "+m)},N}();L.Logger=p},function(Y,L,E){Object.defineProperty(L,"__esModule",{value:!0}),L.constants={TROUTER_INIT:"trouterinit",TROUTER_READY_EVENT:"trouterReadyEvent",TROUTER_READY_TIMEOUT:"trouterReadyTimeout",TROUTER_TOKEN_REQUEST:"trouterTokenRequest",TROUTER_TOKEN_GET_SUCCEEDED:"trouterTokenGetSucceeded",TROUTER_TOKEN_GET_FAILED:"trouterTokenGetFailed",TROUTER_RECONNECTING:"trouterReconnecting",RENEWAL:"renewal",NEW_CONNECTION:"newConnection",ENDPOINT_REGISTRATION_FAILED:"endpointRegistrationFailed"},L.CLIENT_VERSION="2021.32.00.1",L.HANDLED_MESSAGE_ACK=200,L.UNHANDLED_MESSAGE_ACK=404,L.FAILED_MESSAGE_ACK=500},function(Y,L,E){var N;Object.defineProperty(L,"__esModule",{value:!0}),(N=L.UserActivityState||(L.UserActivityState={}))[N.Unknown=0]="Unknown",N[N.Active=1]="Active",N[N.Inactive=2]="Inactive",L.HttpHeaders=function(){},function(N){N[N.Unknown=0]="Unknown",N[N.Connected=2]="Connected",N[N.Disconnected=3]="Disconnected",N[N.Switching=9]="Switching"}(L.TrouterState||(L.TrouterState={}))},function(Y,L,E){Object.defineProperty(L,"__esModule",{value:!0}),L.toJson=function(v){try{return JSON.stringify(v)}catch(M){return"Unable to serialize object of type "+typeof v}},L.calculateTtlInSec=function(v){var M=Math.round((new Date).getTime()/1e3);return void 0!==v&&v>M?v-M:0},L.calculateExpireTsInSec=function(v){return Math.round((new Date).getTime()/1e3)+v};var R=function(){function v(M){this.base=void 0!==M?M:this.createCorrelationVectorBase(),this.extension=0}return v.extend=function(M){return new v(M)},v.prototype.increase=function(){this.extension++},v.prototype.value=function(){return this.base+"."+this.extension},v.prototype.createCorrelationVectorBase=function(){for(var M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0987654321/+",A="AQgw",T="",g=0;g<21;g++)T+=M.charAt(Math.floor(Math.random()*M.length));return T+A.charAt(Math.floor(Math.random()*A.length))},v}();L.CorrelationVector=R;var u=function(){function v(){this.start=Date.now()}return Object.defineProperty(v.prototype,"duration",{get:function(){return Date.now()-this.start},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"startTime",{get:function(){return this.start},enumerable:!0,configurable:!0}),v.prototype.reset=function(){this.start=Date.now()},v}();L.Timespan=u},function(Y,L){var E;E=function(){return this}();try{E=E||Function("return this")()||(0,eval)("this")}catch(p){"object"==typeof window&&(E=window)}Y.exports=E},function(Y,L,E){Object.defineProperty(L,"__esModule",{value:!0});var m,p=E(3),N=function(){function m(R,u,v,M,A,T,g){this.connectionId=R,this.connectedClientId=u,this.domId=v,this.unsecureUrl=M,this.url=A,this.c2cUrlBase=T,this.expirationTsSec=g}return m.prototype.getRemainingTtlInSec=function(){return p.calculateTtlInSec(this.expirationTsSec)},m}();L.ServerState=N,(m=L.UserActivityEventReason||(L.UserActivityEventReason={}))[m.Unknown=0]="Unknown",m[m.Modified=1]="Modified",m[m.Snapshot=2]="Snapshot",m[m.Connected=3]="Connected"},function(Y,L,E){Object.defineProperty(L,"__esModule",{value:!0});var p=E(1),N=function(){function m(R){this.logger=R,this.messageHandlers=[]}return m.prototype.register=function(R){if(this.messageHandlers.some(function(u){return u===R}))throw new Error("Registering the same handler twice is not allowed");this.messageHandlers.push(R)},m.prototype.clear=function(){this.logger.debug("Clearing message handlers"),this.messageHandlers=[]},m.prototype.active=function(){return this.messageHandlers.length>0},m.prototype.handleMessage=function(R){for(var u={resultCode:p.UNHANDLED_MESSAGE_ACK,isHandled:!1},v=0,M=this.messageHandlers;v<M.length;v++){var T=this.safeExecuteHandle(M[v],R);if(void 0!==T&&(void 0===T.isHandled||T.isHandled))return void 0===T.resultCode&&(T.resultCode=p.HANDLED_MESSAGE_ACK),T}return u},m.prototype.safeExecuteHandle=function(R,u){try{return R.handleMessage(u)}catch(v){return void this.logger.warn("A trouter message handler is throwing exceptions. exception: "+v)}},m}();L.MessageHandlerRegistry=N},function(Y,L,E){var N=this&&this.__awaiter||function(R,u,v,M){return new(v||(v=Promise))(function(A,T){function g(b){try{C(M.next(b))}catch(w){T(w)}}function h(b){try{C(M.throw(b))}catch(w){T(w)}}function C(b){b.done?A(b.value):new v(function(w){w(b.value)}).then(g,h)}C((M=M.apply(R,u||[])).next())})},m=this&&this.__generator||function(R,u){function v(b){return function(w){return function(b){if(A)throw new TypeError("Generator is already executing.");for(;C;)try{if(A=1,T&&(g=2&b[0]?T.return:b[0]?T.throw||((g=T.return)&&g.call(T),0):T.next)&&!(g=g.call(T,b[1])).done)return g;switch(T=0,g&&(b=[2&b[0],g.value]),b[0]){case 0:case 1:g=b;break;case 4:return C.label++,{value:b[1],done:!1};case 5:C.label++,T=b[1],b=[0];continue;case 7:b=C.ops.pop(),C.trys.pop();continue;default:if(!(g=(g=C.trys).length>0&&g[g.length-1])&&(6===b[0]||2===b[0])){C=0;continue}if(3===b[0]&&(!g||b[1]>g[0]&&b[1]<g[3])){C.label=b[1];break}if(6===b[0]&&C.label<g[1]){C.label=g[1],g=b;break}if(g&&C.label<g[2]){C.label=g[2],C.ops.push(b);break}g[2]&&C.ops.pop(),C.trys.pop();continue}b=u.call(R,C)}catch(w){b=[6,w],T=0}finally{A=g=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([b,w])}}var A,T,g,h,C={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return h={next:v(0),throw:v(1),return:v(2)},"function"==typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h};Object.defineProperty(L,"__esModule",{value:!0}),L.addCacheAsBackupTo=function(R){var u,v=this;return function(M){return N(v,void 0,void 0,function(){return m(this,function(A){return M&&(u=void 0),[2,new Promise(function(T,g){R(M).then(function(h){u=h,T(h)}).catch(function(h){void 0!==u&&u.length>0&&T(u),g(h)})})]})})}}},function(Y,L,E){var p=this&&this.__awaiter||function(g,h,C,b){return new(C||(C=Promise))(function(w,I){function P(V){try{O(b.next(V))}catch(U){I(U)}}function k(V){try{O(b.throw(V))}catch(U){I(U)}}function O(V){V.done?w(V.value):new C(function(U){U(V.value)}).then(P,k)}O((b=b.apply(g,h||[])).next())})},N=this&&this.__generator||function(g,h){function C(V){return function(U){return function(V){if(w)throw new TypeError("Generator is already executing.");for(;O;)try{if(w=1,I&&(P=2&V[0]?I.return:V[0]?I.throw||((P=I.return)&&P.call(I),0):I.next)&&!(P=P.call(I,V[1])).done)return P;switch(I=0,P&&(V=[2&V[0],P.value]),V[0]){case 0:case 1:P=V;break;case 4:return O.label++,{value:V[1],done:!1};case 5:O.label++,I=V[1],V=[0];continue;case 7:V=O.ops.pop(),O.trys.pop();continue;default:if(!(P=(P=O.trys).length>0&&P[P.length-1])&&(6===V[0]||2===V[0])){O=0;continue}if(3===V[0]&&(!P||V[1]>P[0]&&V[1]<P[3])){O.label=V[1];break}if(6===V[0]&&O.label<P[1]){O.label=P[1],P=V;break}if(P&&O.label<P[2]){O.label=P[2],O.ops.push(V);break}P[2]&&O.ops.pop(),O.trys.pop();continue}V=h.call(g,O)}catch(U){V=[6,U],I=0}finally{w=P=0}if(5&V[0])throw V[1];return{value:V[0]?V[1]:void 0,done:!0}}([V,U])}}var w,I,P,k,O={label:0,sent:function(){if(1&P[0])throw P[1];return P[1]},trys:[],ops:[]};return k={next:C(0),throw:C(1),return:C(2)},"function"==typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k};Object.defineProperty(L,"__esModule",{value:!0});var m=E(3),R=E(2),u=E(0),v=E(16),M=E(18),A=function(){function g(h,C){this.state=h,this.correlationVector=void 0!==C?C:m.CorrelationVector.extend()}return g.prototype.getStateString=function(){switch(this.state){case R.UserActivityState.Active:return"active";case R.UserActivityState.Inactive:return"inactive";case R.UserActivityState.Unknown:return"unknown";default:return"undefined"}},g.prototype.toEventObject=function(){return{state:this.getStateString(),cv:this.correlationVector.value()}},g.prototype.toEventJSON=function(){return m.toJson(this.toEventObject())},g}();L.UserActivityObject=A;var T=function(){function g(h,C,b,w){this.logFunc=h,this.options=C,this.tokenProvider=b,this.listener=w,this.logger=new u.Logger("Manager",h),this.logger.info("Created TrouterManager with options "+m.toJson(this.options)),this.fsm=new M.TrouterManagerFsm(h,this),this.baseEndpointUrl="",this.processedMessageLoss={},this.userActivityObject=new A(R.UserActivityState.Unknown)}return g.prototype.start=function(){this.fsm.start()},g.prototype.stop=function(h){this.fsm.stop(h)},g.prototype.configure=function(h){this.options=h,void 0!==this.firstConnection&&this.firstConnection.configure(h),void 0!==this.secondConnection&&this.secondConnection.configure(h),this.logger.info("Reconfigured TrouterManager with options "+m.toJson(this.options))},g.prototype.checkConnection=function(h){void 0!==this.firstConnection&&this.firstConnection.checkConnection(h),void 0!==this.secondConnection&&this.secondConnection.checkConnection(h)},g.prototype.resendRegistration=function(){return p(this,void 0,void 0,function(){return N(this,function(h){return void 0!==this.secondConnection?(this.logger.info("Resending registration on the second/new connection"),[2,this.secondConnection.resendRegistration()]):void 0!==this.firstConnection?(this.logger.info("Resending registration on the first/current connection"),[2,this.firstConnection.resendRegistration()]):(this.logger.info("No connection to resend registration on, will be done upon (re)connect"),[2])})})},g.prototype.getServerState=function(){if(void 0!==this.firstConnection)return this.firstConnection.getServerState()},g.prototype.getState=function(){return this.fsm.getState()},g.prototype.startFirstConnection=function(){var h=new v.TrouterConnection(this.logFunc,this.options,this,this.tokenProvider,this.userActivityObject);this.firstConnection=h,this.getConnectionCache().then(function(C){h.start(C)}).catch()},g.prototype.startSecondConnection=function(){this.secondConnection=new v.TrouterConnection(this.logFunc,this.options,this,this.tokenProvider,this.userActivityObject),this.secondConnection.start()},g.prototype.stopFirstConnection=function(h){void 0!==this.firstConnection&&(this.firstConnection.stop(h),this.storedFirstConnection=this.firstConnection,this.firstConnection=void 0)},g.prototype.stopSecondConnection=function(h){void 0!==this.secondConnection&&(this.secondConnection.stop(h),this.secondConnection=void 0)},g.prototype.stopSecondConnectionDelayed=function(){if(void 0!==this.secondConnection){var h=this.secondConnection;this.secondConnection=void 0,this.logger.info("Closing an inactive connection in "+Math.round(this.options.lingeringConnectionDelayMs/1e3)+"s"),setTimeout(function(){h.stop(!0)},this.options.lingeringConnectionDelayMs)}},g.prototype.forceStopLingeringConnection=function(){this.storedFirstConnection&&(this.storedFirstConnection.stop(!1),this.storedFirstConnection=void 0)},g.prototype.switchConnections=function(){var h=this.firstConnection;this.firstConnection=this.secondConnection,this.secondConnection=h},g.prototype.doesSecondConnectionExist=function(){return void 0!==this.secondConnection},g.prototype.dispatchConnected=function(){if(void 0!==this.firstConnection){var h=this.firstConnection.getServerState(),C="/"===h.url.slice(-1)?h.url.slice(0,-1):h.url,b={baseEndpointUrl:C,newEndpointUrl:C!==this.baseEndpointUrl,c2cUrlBase:h.c2cUrlBase,clientId:h.connectedClientId,connectionId:h.connectionId,connectionTtlSec:h.getRemainingTtlInSec()};this.baseEndpointUrl=C,this.listener.onTrouterConnected(h.url,b)}},g.prototype.dispatchReconnecting=function(){this.listener.onTrouterDisconnected&&this.listener.onTrouterDisconnected()},g.prototype.dispatchStopped=function(){this.listener.onTrouterDisconnected&&this.listener.onTrouterDisconnected()},g.prototype.dispatchRegistrationState=function(h){this.options.registrationStateCallback&&this.options.registrationStateCallback(h)},g.prototype.onDownstreamRequest=function(h,C,b){var I={id:C.id,status:0,headers:{},body:"",send:function(){return I.status<=100||I.status>=999?3:(b.writeHead(I.status,I.headers),b.end(I.body))}};this.listener.onTrouterRequest({id:C.id,method:C.method,path:"/"+C.shortUrl,body:C.body,headers:C.headers},I)},g.prototype.onConnected=function(h){this.fsm.onConnected(h===this.firstConnection)},g.prototype.onRegistered=function(h){this.fsm.onRegistered(h===this.firstConnection)},g.prototype.onUnregistered=function(h){this.fsm.onUnregistered(h===this.firstConnection||h===this.storedFirstConnection)},g.prototype.onReconnecting=function(h){this.fsm.onReconnecting(h===this.firstConnection)},g.prototype.onReconnectIsRequired=function(h){this.fsm.onReconnectionRequired(h===this.firstConnection)},g.prototype.onDisconnected=function(h){this.fsm.onDisconnected(h===this.storedFirstConnection),this.storedFirstConnection=void 0},g.prototype.onUserActivityStateAccepted=function(h){this.listener.onTrouterUserActivityStateAccepted&&this.listener.onTrouterUserActivityStateAccepted(h)},g.prototype.onConnectionParametersUpdated=function(h){this.setConnectionCache(h)},g.prototype.setUserActivityState=function(h,C){return this.userActivityObject=new A(h,m.CorrelationVector.extend(C)),void 0!==this.secondConnection?(this.logger.info("Setting user activity "+this.userActivityObject.toEventJSON()+" on the second/new connection"),void this.secondConnection.setUserActivityState(this.userActivityObject)):void 0!==this.firstConnection?(this.logger.info("Setting user activity "+this.userActivityObject.toEventJSON()+" on the first/current connection"),void this.firstConnection.setUserActivityState(this.userActivityObject)):void 0},g.prototype.onTrouterMessageLost=function(h){var C=this;if(this.listener.onTrouterMessageLoss)if(h&&h.length){var b=h.filter(function(I){return void 0!==C.processedMessageLoss[I.tag+"-"+I.etag]});if(b.length&&(this.logger.warn("onTrouterMessageLoss - removing duplicates and sending event to server"),this.sendProcessedDroppedIndicators(b),!(h=h.filter(function(I){return void 0===C.processedMessageLoss[I.tag+"-"+I.etag]})).length))return void this.logger.warn("onTrouterMessageLoss - All the data are duplicated");if(!this.listener.onTrouterMessageLoss(h.map(function(I){return I.tag})))return void this.logger.warn("onTrouterMessageLoss - flow tags have not been processed by listeners");h.forEach(function(I){C.processedMessageLoss[I.tag+"-"+I.etag]=""}),this.sendProcessedDroppedIndicators(h)}else this.logger.warn("onTrouterMessageLoss - no flow tags have been provided")},g.prototype.getConnectionCache=function(){var h=this;return this.options.connectionCache?(this.logger.debug("Querying host's connection cache"),this.options.connectionCache.onGetTrouterConnectionCache().then(function(C){return C?JSON.parse(C):void 0}).catch(function(C){return h.logger.warn("Invalid connection cache content provided: "+C),h.connectionCache})):Promise.resolve(this.connectionCache)},g.prototype.setConnectionCache=function(h){if(this.connectionCache=h,this.options.connectionCache)try{this.options.connectionCache.onSetTrouterConnectionCache(JSON.stringify(h))}catch(C){this.logger.warn("Error setting external connection cache: "+C)}},g.prototype.sendProcessedDroppedIndicators=function(h){return void 0!==this.firstConnection?void this.firstConnection.sendProcessedDroppedIndicators(h):void 0!==this.secondConnection?void this.secondConnection.sendProcessedDroppedIndicators(h):void 0},g}();L.TrouterManager=T},function(Y,L,E){Object.defineProperty(L,"__esModule",{value:!0});var p=function(){function N(m){this.logger=m}return N.prototype.getPromise=function(){var m=this;return void 0!==this.url?(this.logger.debug("[TrouterUrlPromise] returning previously resolved url: "+this.url),Promise.resolve(this.url)):(void 0===this.pendingPromise?(this.logger.debug("[TrouterUrlPromise] creating and returning promise"),this.pendingPromise=new Promise(function(R,u){m.pendingPromiseResolveRef=R,m.pendingPromiseRejectRef=u})):this.logger.debug("[TrouterUrlPromise] returning existing promise"),this.pendingPromise)},N.prototype.resolveUrl=function(m){this.url=m,this.logger.debug("[TrouterUrlPromise] got url: "+this.url);var R=this.pendingPromiseResolveRef;this.pendingPromise=void 0,this.pendingPromiseResolveRef=void 0,this.pendingPromiseRejectRef=void 0,void 0!==R&&(this.logger.debug("[TrouterUrlPromise] resolving promise"),R(m))},N.prototype.rejectUrl=function(m){this.logger.debug("[TrouterUrlPromise] aborting");var R=this.pendingPromiseRejectRef;this.url=void 0,this.pendingPromise=void 0,this.pendingPromiseResolveRef=void 0,this.pendingPromiseRejectRef=void 0,void 0!==R&&(this.logger.debug("[TrouterUrlPromise] rejecting promise"),R(m))},N.prototype.resetUrl=function(){this.logger.debug("[TrouterUrlPromise] resetting url"),this.url=void 0},N}();L.TrouterUrlPromise=p},function(module,exports,__nested_webpack_require_43418__){(function(global,module){var Y,L,E;Y=module.exports,L=void 0===global?window:global,E=Y,E.version="0.9.6",E.protocol=1,E.transports=[],E.j=[],E.sockets={},E.connect=function(p,N){var m,R,u=E.util.parseUri(p);L&&L.location&&(u.protocol=u.protocol||L.location.protocol.slice(0,-1),u.host=u.host||(L.document?L.document.domain:L.location.hostname),u.port=u.port||L.location.port),m=E.util.uniqueUri(u);var v={host:u.host,secure:"https"==u.protocol,port:u.port||("https"==u.protocol?443:80),query:u.query||""};return E.util.merge(v,N),!v["force new connection"]&&E.sockets[m]||(R=new E.Socket(v)),!v["force new connection"]&&R&&(E.sockets[m]=R),(R=R||E.sockets[m]).of(u.path.length>1?u.path:"")};var io=module.exports;(function(Y,L){var E=Y.util={},p=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,N=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];E.parseUri=function(R){for(var u=p.exec(R||""),v={},M=14;M--;)v[N[M]]=u[M]||"";return v},E.uniqueUri=function(R){var u=R.protocol,v=R.host,M=R.port;return"document"in L?(v=v||document.domain,M=M||("https"==u&&"https:"!==document.location.protocol?443:document.location.port)):(v=v||"localhost",M||"https"!=u||(M=443)),(u||"http")+"://"+v+":"+(M||80)},E.query=function(R,u){var v=E.chunkQuery(R||""),M=[];for(var A in E.merge(v,E.chunkQuery(u||"")),v)v.hasOwnProperty(A)&&M.push(A+"="+v[A]);return M.length?"?"+M.join("&"):""},E.chunkQuery=function(R){for(var u,v={},M=R.split("&"),A=0,T=M.length;A<T;++A)(u=M[A].split("="))[0]&&(v[u[0]]=u[1]);return v};var m=!1;E.load=function(R){if("document"in L&&"complete"===document.readyState||m)return R();E.on(L,"load",R,!1)},E.on=function(R,u,v,M){R.attachEvent?R.attachEvent("on"+u,v):R.addEventListener&&R.addEventListener(u,v,M)},E.request=function(R){if(R&&"undefined"!=typeof XDomainRequest)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!R||E.ua.hasCORS))return new XMLHttpRequest;if(!R)try{return new(window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(u){}return null},"undefined"!=typeof window&&E.load(function(){m=!0}),E.defer=function(R){if(!E.ua.webkit||"undefined"!=typeof importScripts)return R();E.load(function(){setTimeout(R,100)})},E.merge=function(R,u,v,M){var A,T=M||[],g=void 0===v?2:v;for(A in u)u.hasOwnProperty(A)&&E.indexOf(T,A)<0&&("object"==typeof R[A]&&g?E.merge(R[A],u[A],g-1,T):(R[A]=u[A],T.push(u[A])));return R},E.mixin=function(R,u){E.merge(R.prototype,u.prototype)},E.inherit=function(R,u){function v(){}v.prototype=u.prototype,R.prototype=new v},E.isArray=Array.isArray||function(R){return"[object Array]"===Object.prototype.toString.call(R)},E.intersect=function(R,u){for(var v=[],M=R.length>u.length?R:u,A=R.length>u.length?u:R,T=0,g=A.length;T<g;T++)~E.indexOf(M,A[T])&&v.push(A[T]);return v},E.indexOf=function(R,u,v){var M=R.length;for(v=v<0?v+M<0?0:v+M:v||0;v<M&&R[v]!==u;v++);return M<=v?-1:v},E.toArray=function(R){for(var u=[],v=0,M=R.length;v<M;v++)u.push(R[v]);return u},E.ua={},E.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var R=new XMLHttpRequest}catch(u){return!1}return null!=R.withCredentials}(),E.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent)})(void 0!==io?io:module.exports,void 0===global?window:global),function(Y,L){function E(){}Y.EventEmitter=E,E.prototype.addListener=E.prototype.on=function(p,N){return this.$events||(this.$events={}),this.$events[p]?L.util.isArray(this.$events[p])?this.$events[p].push(N):this.$events[p]=[this.$events[p],N]:this.$events[p]=N,this},E.prototype.once=function(p,N){function m(){R.removeListener(p,m),N.apply(this,arguments)}var R=this;return m.listener=N,this.on(p,m),this},E.prototype.removeListener=function(p,N){if(this.$events&&this.$events[p]){var m=this.$events[p];if(L.util.isArray(m)){for(var R=-1,u=0,v=m.length;u<v;u++)if(m[u]===N||m[u].listener&&m[u].listener===N){R=u;break}if(R<0)return this;m.splice(R,1),m.length||delete this.$events[p]}else(m===N||m.listener&&m.listener===N)&&delete this.$events[p]}return this},E.prototype.removeAllListeners=function(p){return this.$events&&this.$events[p]&&(this.$events[p]=null),this},E.prototype.listeners=function(p){return this.$events||(this.$events={}),this.$events[p]||(this.$events[p]=[]),L.util.isArray(this.$events[p])||(this.$events[p]=[this.$events[p]]),this.$events[p]},E.prototype.emit=function(p){if(!this.$events)return!1;var N=this.$events[p];if(!N)return!1;var m=Array.prototype.slice.call(arguments,1);if("function"==typeof N)N.apply(this,m);else{if(!L.util.isArray(N))return!1;for(var R=N.slice(),u=0,v=R.length;u<v;u++)R[u].apply(this,m)}return!0}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),function(exports,nativeJSON){function f(Y){return Y<10?"0"+Y:Y}function date(Y,L){return isFinite(Y.valueOf())?Y.getUTCFullYear()+"-"+f(Y.getUTCMonth()+1)+"-"+f(Y.getUTCDate())+"T"+f(Y.getUTCHours())+":"+f(Y.getUTCMinutes())+":"+f(Y.getUTCSeconds())+"Z":null}function quote(Y){return escapable.lastIndex=0,escapable.test(Y)?'"'+Y.replace(escapable,function(L){var E=meta[L];return"string"==typeof E?E:"\\u"+("0000"+L.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+Y+'"'}function str(Y,L){var E,p,N,m,R,u=gap,v=L[Y];switch(v instanceof Date&&(v=date(Y)),"function"==typeof rep&&(v=rep.call(L,Y,v)),typeof v){case"string":return quote(v);case"number":return isFinite(v)?String(v):"null";case"boolean":case"null":return String(v);case"object":if(!v)return"null";if(gap+=indent,R=[],"[object Array]"===Object.prototype.toString.apply(v)){for(m=v.length,E=0;E<m;E+=1)R[E]=str(E,v)||"null";return N=0===R.length?"[]":gap?"[\n"+gap+R.join(",\n"+gap)+"\n"+u+"]":"["+R.join(",")+"]",gap=u,N}if(rep&&"object"==typeof rep)for(m=rep.length,E=0;E<m;E+=1)"string"==typeof rep[E]&&(N=str(p=rep[E],v))&&R.push(quote(p)+(gap?": ":":")+N);else for(p in v)Object.prototype.hasOwnProperty.call(v,p)&&(N=str(p,v))&&R.push(quote(p)+(gap?": ":":")+N);return N=0===R.length?"{}":gap?"{\n"+gap+R.join(",\n"+gap)+"\n"+u+"}":"{"+R.join(",")+"}",gap=u,N}}if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={},cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;JSON.stringify=function(Y,L,E){var p;if(gap="",indent="","number"==typeof E)for(p=0;p<E;p+=1)indent+=" ";else"string"==typeof E&&(indent=E);if(rep=L,L&&"function"!=typeof L&&("object"!=typeof L||"number"!=typeof L.length))throw new Error("JSON.stringify");return str("",{"":Y})},JSON.parse=function(text,reviver){function walk(Y,L){var E,p,N=Y[L];if(N&&"object"==typeof N)for(E in N)Object.prototype.hasOwnProperty.call(N,E)&&(void 0!==(p=walk(N,E))?N[E]=p:delete N[E]);return reviver.call(Y,L,N)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(Y){return"\\u"+("0000"+Y.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}(void 0!==io?io:module.exports,"undefined"!=typeof JSON?JSON:void 0),function(Y,L){var E=Y.parser={},p=E.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],N=E.reasons=["transport not supported","client not handshaken","unauthorized"],m=E.advice=["reconnect"],R=L.JSON,u=L.util.indexOf;E.encodePacket=function(M){var A=u(p,M.type),T=M.id||"",g=M.endpoint||"",h=M.ack,C=null;switch(M.type){case"error":var b=M.reason?u(N,M.reason):"",w=M.advice?u(m,M.advice):"";""===b&&""===w||(C=b+(""!==w?"+"+w:""));break;case"message":""!==M.data&&(C=M.data);break;case"event":var I={name:M.name};M.args&&M.args.length&&(I.args=M.args),C=R.stringify(I);break;case"json":C=R.stringify(M.data);break;case"connect":M.qs&&(C=M.qs);break;case"ack":C=M.ackId+(M.args&&M.args.length?"+"+R.stringify(M.args):"")}var P=[A,T+("data"==h?"+":""),g];return null!=C&&P.push(C),P.join(":")},E.encodePayload=function(M){var A="";if(1==M.length)return M[0];for(var T=0,g=M.length;T<g;T++)A+="\ufffd"+M[T].length+"\ufffd"+M[T];return A};var v=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;E.decodePacket=function(M){if(!(A=M.match(v)))return{};var T=A[2]||"",g=(M=A[5]||"",{type:p[A[1]],endpoint:A[4]||""});switch(T&&(g.id=T,g.ack=!A[3]||"data"),g.type){case"error":var A=M.split("+");g.reason=N[A[0]]||"",g.advice=m[A[1]]||"";break;case"message":g.data=M||"";break;case"event":try{var h=R.parse(M);g.name=h.name,g.args=h.args}catch(b){}g.args=g.args||[];break;case"json":try{g.data=R.parse(M)}catch(b){}break;case"connect":g.qs=M||"";break;case"ack":if((A=M.match(/^([0-9]+)(\+)?(.*)/))&&(g.ackId=A[1],g.args=[],A[3]))try{g.args=A[3]?R.parse(A[3]):[]}catch(b){}break;case"disconnect":g.reason=M}return g},E.decodePayload=function(M){if("\ufffd"==M.charAt(0)){for(var A=[],T=1,g="";T<M.length;T++)"\ufffd"==M.charAt(T)?(A.push(E.decodePacket(M.substr(T+1).substr(0,g))),T+=Number(g)+1,g=""):g+=M.charAt(T);return A}return[E.decodePacket(M)]}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),function(Y,L){function E(p,N){this.socket=p,this.sessid=N,this.connectErrorCallback=void 0,this.isOpened=!1}Y.Transport=E,L.util.mixin(E,L.EventEmitter),E.prototype.onData=function(p){if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),""!==p){var N=L.parser.decodePayload(p);if(N&&N.length)for(var m=0,R=N.length;m<R;m++)this.onPacket(N[m])}return this},E.prototype.onPacket=function(p){return this.socket.setHeartbeatTimeout(),"heartbeat"==p.type?this.onHeartbeat():("connect"==p.type&&""==p.endpoint&&this.onConnect(),"error"==p.type&&"reconnect"==p.advice&&(this.isOpened=!1),this.socket.onPacket(p),this)},E.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var p=this;this.closeTimeout=setTimeout(function(){p.onDisconnect()},this.socket.closeTimeout)}},E.prototype.onDisconnect=function(){return this.close&&this.isOpened&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},E.prototype.onConnect=function(){return this.socket.onConnect(),this.connectErrorCallback=void 0,this},E.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},E.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},E.prototype.packet=function(p){this.send(L.parser.encodePacket(p))},E.prototype.onHeartbeat=function(p){this.packet({type:"heartbeat"})},E.prototype.onOpen=function(){this.isOpened=!0,this.clearCloseTimeout(),this.socket.onOpen()},E.prototype.onClose=function(){this.isOpened=!1,this.socket.onClose(),this.onDisconnect()},E.prototype.prepareUrl=function(){var p=this.socket.options;return this.scheme()+"://"+p.host+":"+p.port+"/"+p.resource+"/"+L.protocol+"/"+this.name+"/"+this.sessid},E.prototype.ready=function(p,N){N.call(this)},E.prototype.clearEventHandlers=function(){return this}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),function(Y,L,E){function p(m){if(this.options={port:80,secure:!1,document:"document"in E&&document,resource:"socket.io",transports:L.transports.slice(),"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!0,"auto connect":!0,"flash policy port":10843},L.util.merge(this.options,m),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.disconnected=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||L.util.ua.hasCORS)){var R=this;L.util.on(E,"unload",function(){R.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function N(){}Y.Socket=p,L.util.mixin(p,L.EventEmitter),p.prototype.of=function(m){return this.namespaces[m]||(this.namespaces[m]=new L.SocketNamespace(this,m),""!==m&&this.namespaces[m].packet({type:"connect"})),this.namespaces[m]},p.prototype.publish=function(){var m;for(var R in this.emit.apply(this,arguments),this.namespaces)this.namespaces.hasOwnProperty(R)&&(m=this.of(R)).$emit.apply(m,arguments)},p.prototype.handshake=function(m){function R(h){h instanceof Error?u.onError(h.message):m.apply(null,h.split(":"))}var u=this,v=this.options;if(!u.disconnected){var M=["http"+(v.secure?"s":"")+":/",v.host+":"+v.port,v.resource,L.protocol,L.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!L.util.ua.hasCORS){var A=document.getElementsByTagName("script")[0],T=document.createElement("script");T.src=M+"&jsonp="+L.j.length,A.parentNode.insertBefore(T,A),L.j.push(function(h){R(h),T.parentNode.removeChild(T)})}else{var g=L.util.request();g.open("GET",M,!0),g.withCredentials=!0,g.onreadystatechange=function(){4==g.readyState&&(g.onreadystatechange=N,200==g.status?R(g.responseText):!u.reconnecting&&u.onError(g.responseText))},g.send(null)}}},p.prototype.getTransport=function(m){for(var R,u=m||this.transports,v=0;R=u[v];v++)if(L.Transport[R]&&L.Transport[R].check(this)&&(!this.isXDomain()||L.Transport[R].xdomainCheck()))return new L.Transport[R](this,this.sessionid);return null},p.prototype.connect=function(m){if(this.connecting||this.disconnected)return this;var R=this;return this.handshake(function(u,v,M,A){function T(){if(!R.connected&&!R.disconnected)if(R.connecting=!1,clearTimeout(R.connectTimeoutTimer),R.options["try multiple transports"]){for(;R.remainingTransports.length>0&&R.remainingTransports.splice(0,1)[0]!=R.transport.name;);R.remainingTransports.length?g(R.remainingTransports):R.publish("connect_failed")}else R.publish("connect_failed")}function g(h){if(R.transport&&(R.transport.clearTimeouts(),R.transport.clearEventHandlers()),R.transport=R.getTransport(h),!R.transport||R.disconnected)return R.publish("connect_failed");R.transport.ready(R,function(){R.connecting=!0,R.publish("connecting",R.transport.name),R.transport.open(T),R.options["connect timeout"]&&(R.connectTimeoutTimer=setTimeout(function(){T()},R.options["connect timeout"]))})}R.sessionid=u,R.closeTimeout=1e3*M+2e3,R.heartbeatTimeout=1e3*v+2e3,R.transports=A?L.util.intersect(A.split(","),R.options.transports):R.options.transports,R.setHeartbeatTimeout(),R.remainingTransports=R.transports.slice(0),g(R.transports),R.once("connect",function(){clearTimeout(R.connectTimeoutTimer),m&&"function"==typeof m&&m()})}),this},p.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);var m=this;this.heartbeatTimeoutTimer=setTimeout(function(){m.transport.onClose()},this.heartbeatTimeout)},p.prototype.packet=function(m){return this.connected&&!this.doBuffer?this.transport.packet(m):this.buffer.push(m),this},p.prototype.setBuffer=function(m){this.doBuffer=m,!m&&this.connected&&this.buffer.length&&(this.transport.payload(this.buffer),this.buffer=[])},p.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this.disconnected=!0,this},p.prototype.disconnectSync=function(){L.util.request().open("GET",this.resource+"/"+L.protocol+"/"+this.sessionid,!0),this.onDisconnect("booted")},p.prototype.isXDomain=function(){return this.options.host!==E.location.hostname||this.options.port!=(E.location.port||("https:"==E.location.protocol?443:80))},p.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},p.prototype.onOpen=function(){this.open=!0},p.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},p.prototype.onPacket=function(m){this.of(m.endpoint).onPacket(m)},p.prototype.onError=function(m){m&&m.advice&&"reconnect"===m.advice&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",m&&m.reason?m.reason:m)},p.prototype.onDisconnect=function(m){var R=this.connected,u=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1,(R||u)&&(this.transport.close(),this.transport.clearTimeouts(),R&&(this.publish("disconnect",m),"booted"!=m&&this.options.reconnect&&!this.reconnecting&&this.reconnect()))},p.prototype.reconnect=function(){function m(){if(u.connected){for(var T in u.namespaces)u.namespaces.hasOwnProperty(T)&&""!==T&&u.namespaces[T].packet({type:"connect"});u.publish("reconnect",u.transport.name,u.reconnectionAttempts)}clearTimeout(u.reconnectionTimer),u.removeListener("connect_failed",R),u.removeListener("connect",R),u.reconnecting=!1,delete u.reconnectionAttempts,delete u.reconnectionDelay,delete u.reconnectionTimer,delete u.redoTransports,u.options["try multiple transports"]=M}function R(){if(u.reconnecting)return u.connected?m():u.connecting&&u.reconnecting?u.reconnectionTimer=setTimeout(R,1e3):void(u.reconnectionAttempts++>=v?u.redoTransports?(u.publish("reconnect_failed"),m()):(u.on("connect_failed",R),u.options["try multiple transports"]=!0,u.transport=u.getTransport(),u.redoTransports=!0,u.connect()):(u.reconnectionDelay<A&&(u.reconnectionDelay*=2),u.connect(),u.publish("reconnecting",u.reconnectionDelay,u.reconnectionAttempts),u.reconnectionTimer=setTimeout(R,u.reconnectionDelay)))}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var u=this,v=this.options["max reconnection attempts"],M=this.options["try multiple transports"],A=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(R,this.reconnectionDelay),this.on("connect",R)}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports,void 0===global?window:global),function(Y,L){function E(N,m){this.socket=N,this.name=m||"",this.flags={},this.json=new p(this,"json"),this.ackPackets=0,this.acks={}}function p(N,m){this.namespace=N,this.name=m}Y.SocketNamespace=E,L.util.mixin(E,L.EventEmitter),E.prototype.$emit=L.EventEmitter.prototype.emit,E.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},E.prototype.packet=function(N){return N.endpoint=this.name,this.socket.packet(N),this.flags={},this},E.prototype.send=function(N,m){var R={type:this.flags.json?"json":"message",data:N};return"function"==typeof m&&(R.id=++this.ackPackets,R.ack=!0,this.acks[R.id]=m),this.packet(R)},E.prototype.emit=function(N){var m=Array.prototype.slice.call(arguments,1),R=m[m.length-1],u={type:"event",name:N};return"function"==typeof R&&(u.id=++this.ackPackets,u.ack="data",this.acks[u.id]=R,m=m.slice(0,m.length-1)),u.args=m,this.packet(u)},E.prototype.disconnect=function(){return""===this.name?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},E.prototype.onPacket=function(N){function m(){R.packet({type:"ack",args:L.util.toArray(arguments),ackId:N.id})}var R=this;switch(N.type){case"connect":this.$emit("connect");break;case"disconnect":""===this.name?this.socket.onDisconnect(N.reason||"booted"):this.$emit("disconnect",N.reason||"");break;case"message":case"json":var u=["message",N.data];"data"==N.ack?u.push(m):N.ack&&this.packet({type:"ack",ackId:N.id}),this.$emit.apply(this,u);break;case"event":u=[N.name].concat(N.args),"data"==N.ack&&u.push(m),this.$emit.apply(this,u);break;case"ack":this.acks[N.ackId]&&(this.acks[N.ackId].apply(this,N.args),delete this.acks[N.ackId]);break;case"error":N.advice?this.socket.onError(N):this.$emit("unauthorized"==N.reason?"connect_failed":"error",N.reason)}},p.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},p.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),function(Y,L,E){function p(m){L.Transport.apply(this,arguments)}function N(){}Y.websocket=p,L.util.inherit(p,L.Transport),p.prototype.name="websocket",p.prototype.open=function(m){var R,u=L.util.query(this.socket.options.query),v=this;return this.connectErrorCallback=m,R||(R=E.MozWebSocket||E.WebSocket),this.websocket=new R(this.prepareUrl()+u),this.websocket.onopen=function(){v.onOpen(),v.socket.setBuffer(!1)},this.websocket.onmessage=function(M){v.onData(M.data)},this.websocket.onclose=function(){v.onClose(),v.socket.setBuffer(!0)},this.websocket.onerror=function(M){v.onError(M)},this},p.prototype.send=function(m){return this.websocket.send(m),this},p.prototype.payload=function(m){for(var R=0,u=m.length;R<u;R++)this.packet(m[R]);return this},p.prototype.close=function(){return this.websocket.close(),this},p.prototype.onError=function(m){void 0!==this.connectErrorCallback&&(this.connectErrorCallback(),this.connectErrorCallback=void 0),this.socket.onError(m)},p.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},p.check=function(){return"WebSocket"in E&&!("__addTask"in WebSocket)||"MozWebSocket"in E},p.xdomainCheck=function(){return!0},p.prototype.clearEventHandlers=function(){return this.websocket&&(this.websocket.onopen=this.websocket.onmessage=this.websocket.onclose=this.websocket.onerror=N),this},L.transports.push("websocket")}(void 0!==io?io.Transport:module.exports,void 0!==io?io:module.parent.exports,void 0===global?window:global),function(Y,L,E){function p(m){m&&(L.Transport.apply(this,arguments),this.sendBuffer=[])}function N(){}Y.XHR=p,L.util.inherit(p,L.Transport),p.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},p.prototype.payload=function(m){for(var R=[],u=0,v=m.length;u<v;u++)R.push(L.parser.encodePacket(m[u]));this.send(L.parser.encodePayload(R))},p.prototype.send=function(m){return this.post(m),this},p.prototype.post=function(m){var v=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),E.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=function(){this.onload=N,v.socket.setBuffer(!1)}:this.sendXHR.onreadystatechange=function(){4==this.readyState&&(this.onreadystatechange=N,v.posting=!1,200==this.status?(v.socket.setBuffer(!1),clearTimeout(v.sendXHR.ackTimeoutTimer)):v.onClose())},this.sendXHR.send(m),v.sendXHR.ackTimeoutTimer=setTimeout(function(){v.onClose()},v.socket.options.ackTimeoutMs)},p.prototype.close=function(){return this.onClose(),this},p.prototype.request=function(m){var R=L.util.request(this.socket.isXDomain()),u=L.util.query(this.socket.options.query,"t="+ +new Date);if(R.open(m||"GET",this.prepareUrl()+u,!0),"POST"==m)try{R.setRequestHeader?R.setRequestHeader("Content-type","text/plain;charset=UTF-8"):R.contentType="text/plain"}catch(v){}return R},p.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},p.check=function(m,R){try{var u=L.util.request(R),v=E.XDomainRequest&&u instanceof XDomainRequest;if(u&&(!v||(m&&m.options&&m.options.secure?"https:":"http:")==E.location.protocol))return!0}catch(T){}return!1},p.xdomainCheck=function(){return p.check(null,!0)},p.prototype.clearEventHandlers=function(){return this.sendXHR&&(this.sendXHR.onreadystatechange=this.sendXHR.onload=N),this}}(void 0!==io?io.Transport:module.exports,void 0!==io?io:module.parent.exports,void 0===global?window:global),function(Y,L,E){function p(){L.Transport.XHR.apply(this,arguments)}function N(){}Y["xhr-polling"]=p,L.util.inherit(p,L.Transport.XHR),L.util.merge(p,L.Transport.XHR),p.prototype.name="xhr-polling",p.prototype.open=function(m){return this.connectErrorCallback=m,L.Transport.XHR.prototype.open.call(this),!1},p.prototype.get=function(){if(this.isOpened){var v=this;this.xhr=this.request(),E.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=function(){v.connectErrorCallback=void 0,this.onload=N,this.onerror=N,v.onData(this.responseText),v.get()},this.xhr.onerror=function(){v.onClose(),void 0!==v.connectErrorCallback&&(v.connectErrorCallback(),v.connectErrorCallback=void 0)}):this.xhr.onreadystatechange=function(){4==this.readyState&&(this.onreadystatechange=N,200==this.status?(v.connectErrorCallback=void 0,v.onData(this.responseText),v.get()):(v.onClose(),void 0!==v.connectErrorCallback&&(v.connectErrorCallback(),v.connectErrorCallback=void 0)))},this.xhr.send(null)}},p.prototype.onClose=function(){if(L.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=N;try{this.xhr.abort()}catch(m){}this.xhr=null}},p.prototype.ready=function(m,R){var u=this;L.util.defer(function(){R.call(u)})},p.prototype.clearEventHandlers=function(){return L.Transport.XHR.prototype.clearEventHandlers.call(this),this.xhr&&(this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=N),this},L.transports.push("xhr-polling")}(void 0!==io?io.Transport:module.exports,void 0!==io?io:module.parent.exports,void 0===global?window:global),exports.io=io}).call(exports,__nested_webpack_require_43418__(4),__nested_webpack_require_43418__(13)(module))},function(Y,L,E){(function(p,N){Y.exports=function(){function R(_e){return"function"==typeof _e}function A(){var _e=setTimeout;return function(){return _e(T,1)}}function T(){for(var _e=0;_e<le;_e+=2)(0,re[_e])(re[_e+1]),re[_e]=void 0,re[_e+1]=void 0;le=0}function g(_e,Be){var De=arguments,Le=this,Mt=new this.constructor(C);void 0===Mt[J]&&a(Mt);var $e,He=Le._state;return He?($e=De[He-1],de(function(){return r(He,Mt,$e,Le._result)})):te(Le,Mt,_e,Be),Mt}function h(_e){if(_e&&"object"==typeof _e&&_e.constructor===this)return _e;var De=new this(C);return U(De,_e),De}function C(){}function I(_e){try{return _e.then}catch(Be){return Ee.error=Be,Ee}}function V(_e,Be,De){Be.constructor===_e.constructor&&De===g&&Be.constructor.resolve===h?function(_e,Be){Be._state===Ae?H(_e,Be._result):Be._state===Te?W(_e,Be._result):te(Be,void 0,function(De){return U(_e,De)},function(De){return W(_e,De)})}(_e,Be):De===Ee?W(_e,Ee.error):void 0===De?H(_e,Be):R(De)?function(_e,Be,De){de(function(Le){var Mt=!1,He=function(_e,Be,De,Le){try{_e.call(Be,De,Le)}catch(Mt){return Mt}}(De,Be,function($e){Mt||(Mt=!0,Be!==$e?U(Le,$e):H(Le,$e))},function($e){Mt||(Mt=!0,W(Le,$e))});!Mt&&He&&(Mt=!0,W(Le,He))},_e)}(_e,Be,De):H(_e,Be)}function U(_e,Be){_e===Be?W(_e,new TypeError("You cannot resolve a promise with itself")):function(_e){return"function"==typeof _e||"object"==typeof _e&&null!==_e}(Be)?V(_e,Be,I(Be)):H(_e,Be)}function B(_e){_e._onerror&&_e._onerror(_e._result),$(_e)}function H(_e,Be){_e._state===ue&&(_e._result=Be,_e._state=Ae,0!==_e._subscribers.length&&de($,_e))}function W(_e,Be){_e._state===ue&&(_e._state=Te,_e._result=Be,de(B,_e))}function te(_e,Be,De,Le){var Mt=_e._subscribers,He=Mt.length;_e._onerror=null,Mt[He]=Be,Mt[He+Ae]=De,Mt[He+Te]=Le,0===He&&_e._state&&de($,_e)}function $(_e){var Be=_e._subscribers,De=_e._state;if(0!==Be.length){for(var Le=void 0,Mt=void 0,He=_e._result,$e=0;$e<Be.length;$e+=3)Mt=Be[$e+De],(Le=Be[$e])?r(De,Le,Mt,He):Mt(He);_e._subscribers.length=0}}function pe(){this.error=null}function r(_e,Be,De,Le){var Mt=R(De),He=void 0,$e=void 0,It=void 0,et=void 0;if(Mt){if((He=function(_e,Be){try{return _e(Be)}catch(De){return We.error=De,We}}(De,Le))===We?(et=!0,$e=He.error,He=null):It=!0,Be===He)return void W(Be,new TypeError("A promises callback cannot return that same promise."))}else He=Le,It=!0;Be._state!==ue||(Mt&&It?U(Be,He):et?W(Be,$e):_e===Ae?H(Be,He):_e===Te&&W(Be,He))}function a(_e){_e[J]=Ne++,_e._state=void 0,_e._result=void 0,_e._subscribers=[]}function f(_e,Be){this._instanceConstructor=_e,this.promise=new _e(C),this.promise[J]||a(this.promise),me(Be)?(this._input=Be,this.length=Be.length,this._remaining=Be.length,this._result=new Array(this.length),0===this.length?H(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&H(this.promise,this._result))):W(this.promise,new Error("Array Methods must be provided an Array"))}function q(_e){this[J]=Ne++,this._result=this._state=void 0,this._subscribers=[],C!==_e&&("function"!=typeof _e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof q?function(_e,Be){try{Be(function(De){U(_e,De)},function(De){W(_e,De)})}catch(De){W(_e,De)}}(this,_e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}var _e,Be,De,me=Array.isArray?Array.isArray:function(_e){return"[object Array]"===Object.prototype.toString.call(_e)},le=0,fe=void 0,ae=void 0,de=function(_e,Be){re[le]=_e,re[le+1]=Be,2===(le+=2)&&(ae?ae(T):ee())},xe="undefined"!=typeof window?window:void 0,Ce=xe||{},oe=Ce.MutationObserver||Ce.WebKitMutationObserver,we="undefined"==typeof self&&void 0!==p&&"[object process]"==={}.toString.call(p),ye="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,re=new Array(1e3),ee=void 0;ee=we?function(){return p.nextTick(T)}:oe?(_e=0,Be=new oe(T),De=document.createTextNode(""),Be.observe(De,{characterData:!0}),function(){De.data=_e=++_e%2}):ye?function(){var _e=new MessageChannel;return _e.port1.onmessage=T,function(){return _e.port2.postMessage(0)}}():void 0===xe?function(){try{var _e=E(21);return void 0!==(fe=_e.runOnLoop||_e.runOnContext)?function(){fe(T)}:A()}catch(Be){return A()}}():A();var J=Math.random().toString(36).substring(16),ue=void 0,Ae=1,Te=2,Ee=new pe,We=new pe,Ne=0;return f.prototype._enumerate=function(){for(var _e=this.length,Be=this._input,De=0;this._state===ue&&De<_e;De++)this._eachEntry(Be[De],De)},f.prototype._eachEntry=function(_e,Be){var De=this._instanceConstructor,Le=De.resolve;if(Le===h){var Mt=I(_e);if(Mt===g&&_e._state!==ue)this._settledAt(_e._state,Be,_e._result);else if("function"!=typeof Mt)this._remaining--,this._result[Be]=_e;else if(De===q){var He=new De(C);V(He,_e,Mt),this._willSettleAt(He,Be)}else this._willSettleAt(new De(function($e){return $e(_e)}),Be)}else this._willSettleAt(Le(_e),Be)},f.prototype._settledAt=function(_e,Be,De){var Le=this.promise;Le._state===ue&&(this._remaining--,_e===Te?W(Le,De):this._result[Be]=De),0===this._remaining&&H(Le,this._result)},f.prototype._willSettleAt=function(_e,Be){var De=this;te(_e,void 0,function(Le){return De._settledAt(Ae,Be,Le)},function(Le){return De._settledAt(Te,Be,Le)})},q.all=function(_e){return new f(this,_e).promise},q.race=function(_e){var Be=this;return new Be(me(_e)?function(De,Le){for(var Mt=_e.length,He=0;He<Mt;He++)Be.resolve(_e[He]).then(De,Le)}:function(De,Le){return Le(new TypeError("You must pass an array to race."))})},q.resolve=h,q.reject=function(_e){var De=new this(C);return W(De,_e),De},q._setScheduler=function(_e){ae=_e},q._setAsap=function(_e){de=_e},q._asap=de,q.prototype={constructor:q,then:g,catch:function(_e){return this.then(null,_e)}},q.polyfill=function(){var _e=void 0;if(void 0!==N)_e=N;else if("undefined"!=typeof self)_e=self;else try{_e=Function("return this")()}catch(Le){throw new Error("polyfill failed because global object is unavailable in this environment")}var Be=_e.Promise;if(Be){var De=null;try{De=Object.prototype.toString.call(Be.resolve())}catch(Le){}if("[object Promise]"===De&&!Be.cast)return}_e.Promise=q},q.Promise=q,q}()}).call(L,E(12),E(4))},function(Y,L){function E(){throw new Error("setTimeout has not been defined")}function p(){throw new Error("clearTimeout has not been defined")}function N(I){if(A===setTimeout)return setTimeout(I,0);if((A===E||!A)&&setTimeout)return A=setTimeout,setTimeout(I,0);try{return A(I,0)}catch(P){try{return A.call(null,I,0)}catch(k){return A.call(this,I,0)}}}function R(){b&&h&&(b=!1,h.length?C=h.concat(C):w=-1,C.length&&u())}function u(){if(!b){var I=N(R);b=!0;for(var P=C.length;P;){for(h=C,C=[];++w<P;)h&&h[w].run();w=-1,P=C.length}h=null,b=!1,function(I){if(T===clearTimeout)return clearTimeout(I);if((T===p||!T)&&clearTimeout)return T=clearTimeout,clearTimeout(I);try{T(I)}catch(P){try{return T.call(null,I)}catch(k){return T.call(this,I)}}}(I)}}function v(I,P){this.fun=I,this.array=P}function M(){}var A,T,g=Y.exports={};!function(){try{A="function"==typeof setTimeout?setTimeout:E}catch(I){A=E}try{T="function"==typeof clearTimeout?clearTimeout:p}catch(I){T=p}}();var h,C=[],b=!1,w=-1;g.nextTick=function(I){var P=new Array(arguments.length-1);if(arguments.length>1)for(var k=1;k<arguments.length;k++)P[k-1]=arguments[k];C.push(new v(I,P)),1!==C.length||b||N(u)},v.prototype.run=function(){this.fun.apply(null,this.array)},g.title="browser",g.browser=!0,g.env={},g.argv=[],g.version="",g.versions={},g.on=M,g.addListener=M,g.once=M,g.off=M,g.removeListener=M,g.removeAllListeners=M,g.emit=M,g.prependListener=M,g.prependOnceListener=M,g.listeners=function(I){return[]},g.binding=function(I){throw new Error("process.binding is not supported")},g.cwd=function(){return"/"},g.chdir=function(I){throw new Error("process.chdir is not supported")},g.umask=function(){return 0}},function(Y,L){Y.exports=function(E){return E.webpackPolyfill||(E.deprecate=function(){},E.paths=[],E.children||(E.children=[]),Object.defineProperty(E,"loaded",{enumerable:!0,get:function(){return E.l}}),Object.defineProperty(E,"id",{enumerable:!0,get:function(){return E.i}}),E.webpackPolyfill=1),E}},function(Y,L,E){Object.defineProperty(L,"__esModule",{value:!0});var u,h,p=E(3),N=E(1),m=E(0);L.ResponseData=function(C){this.id=C,this.status=200,this.headers={},this.body=""},(h=u=L.ClientEventName||(L.ClientEventName={})).Connected="trouter_js_client_connected",h.Disconnected="trouter_js_client_disconnected",h.Error="trouter_js_client_error",h.Progress="trouter_js_client_progress",h.Response="trouter_js_client_response",h.Request="trouter_js_client_request",h.CheckConnection="trouter_js_client_check_connection",h.Registration="trouter_js_client_registration",h.Unregistration="trouter_js_client_unregistration";var v=function(C,b,w,I,P){this.stepName=C,this.operation=b,this.delta=w,this.ts=I,this.error=P};L.TrackerStep=v,L.Properties=function(){};var A=function(){this.numberOfPingReplies=0,this.connectedTimestamp=0,this.isNewUrl=!1,this.transportType="",this.connectionNumber=0},T=function(){this.enabled=!1,this.numberOfStepsToMaintain=40,this.logHealthCheckError=!1,this.sendProgressTimeoutSecs=55,this.logSendPingError=!1,this.maxBackoffInMs=12e4,this.trouter_js_client_connected=!1,this.trouter_js_client_disconnected=!1,this.trouter_js_client_error=!1,this.trouter_js_client_progress=!1,this.trouter_js_client_response=!1,this.trouter_js_client_request=!1,this.trouter_js_client_registration=!1,this.trouter_js_client_unregistration=!1,this.trouter_js_client_check_connection=!0},g=function(){function h(C,b,w,I,P,k,O){this.clientId=b,this.clientInfo=w,this.getServerState=I,this.endpointId=P,this.clientCorrelationID=k,this.environment=O,this.logger=new m.Logger("ConnectionTracker",C),this.clientCorrelationID=void 0!==k?k:"",this.steps=[],this.connectionAttempt=0,this.totalStepCount=0,this.beginTimestamp=new p.Timespan,this.eventLogSettings=new T,this.connectedInfo=new A}return h.prototype.enable=function(C){this.eventLogSettings.enabled=!0,this.eventLogger=C},h.prototype.disable=function(){this.eventLogSettings.enabled=!1},h.prototype.sendProgress=function(C){this.steps.length>0&&this.sendTelemetry(u.Progress,C,this.steps)},h.prototype.cancelProgressTimer=function(){void 0!==this.progressTimeout&&(clearTimeout(this.progressTimeout),this.progressTimeout=void 0)},h.prototype.resetProgressSendTimer=function(){var C=this;this.cancelProgressTimer(),void 0!==this.eventLogSettings.sendProgressTimeoutSecs&&this.eventLogSettings.sendProgressTimeoutSecs>0&&(this.progressTimeout=setTimeout(function(){C.sendProgress({reason:"timeout",timeoutSecs:C.eventLogSettings.sendProgressTimeoutSecs})},1e3*this.eventLogSettings.sendProgressTimeoutSecs))},h.prototype.setConnectedInfo=function(C,b){this.connectedInfo.numberOfPingReplies=0,this.connectedInfo.connectedTimestamp=Date.now(),this.connectedInfo.isNewUrl=C,this.connectedInfo.transportType=b,++this.connectedInfo.connectionNumber},h.prototype.clearConnectedInfo=function(){this.connectedInfo.numberOfPingReplies=0,this.connectedInfo.connectedTimestamp=0,this.connectedInfo.isNewUrl=!0,this.connectedInfo.transportType=""},h.prototype.copyProperties=function(C,b){for(var w=0,I=Object.keys(b);w<I.length;w++){var P=I[w];b.hasOwnProperty(P)&&void 0!==b[P]&&(C[P.replace(/-/g,"_")]={value:b[P]})}},h.prototype.increasePingResponseCount=function(){++this.connectedInfo.numberOfPingReplies},h.prototype.sendTelemetry=function(C,b,w){try{if(!0===this.eventLogSettings.enabled&&!0===this.eventLogSettings[C]&&void 0!==this.eventLogger){var I=this.getServerState(),P={name:C,properties:{connectionAttempt:{value:this.connectionAttempt},epid:{value:this.endpointId},clientCorrelationID:{value:this.clientCorrelationID},steps:{value:p.toJson(w)},clientID:{value:this.clientId},eventVersion:{value:3},environment:{value:this.environment},cv:{value:N.CLIENT_VERSION},ua:{value:this.clientInfo.ua},connectionId:{value:I.connectionId},connectedClientId:{value:I.connectedClientId},domId:{value:I.domId},url:{value:I.unsecureUrl},surl:{value:I.url},ttlInSecs:{value:I.getRemainingTtlInSec()},numberOfPingReplies:{value:this.connectedInfo.numberOfPingReplies},connectedTimestamp:{value:this.connectedInfo.connectedTimestamp},isNewUrl:{value:this.connectedInfo.isNewUrl},transportType:{value:this.connectedInfo.transportType},connectionNumber:{value:this.connectedInfo.connectionNumber}}};this.copyProperties(P.properties,b),this.eventLogger.logEvent(P)}}catch(k){this.logger.warn("error in sending event "+C+": "+p.toJson(k))}},h.prototype.createStep=function(C,b,w){return new v(C,b,this.beginTimestamp.duration,Date.now(),w)},h.prototype.addStep=function(C,b,w){if(!1!==this.eventLogSettings.enabled&&(0===this.steps.length&&this.beginTimestamp.reset(),this.steps.push(this.createStep(C,b,w)),++this.totalStepCount,void 0!==this.eventLogSettings.numberOfStepsToMaintain&&this.steps.length>this.eventLogSettings.numberOfStepsToMaintain)){var I=this.steps.slice(0);this.steps.length=0,this.sendTelemetry(u.Progress,{reason:"flush"},I)}},h.prototype.trackStart=function(C){this.addStep(C,"start")},h.prototype.trackEnd=function(C){this.addStep(C,"end")},h.prototype.trackError=function(C,b,w,I){void 0===w&&(w=!0),"health"===C&&!0!==this.eventLogSettings.logHealthCheckError||"ping"===C&&!1===this.eventLogSettings.logSendPingError||(void 0===I&&(I="error"),!0===w&&this.addStep(C,I,b),this.sendTelemetry(u.Error,{},[this.createStep(C,I,b)]))},h.prototype.trackProgress=function(C,b){this.addStep(C,b)},h.prototype.trackConnected=function(C,b){this.setConnectedInfo(C,b);var w=this.steps.slice(0),I=this.totalStepCount,P=this.beginTimestamp.duration;this.steps.length=0,this.totalStepCount=0,this.sendTelemetry(u.Connected,{stepCount:w.length,totalStepCount:I,connectionEstablishmentMs_Total:P},w),this.cancelProgressTimer()},h.prototype.trackDisconnected=function(C){C.sessionLengthMS=Date.now()-this.connectedInfo.connectedTimestamp,this.sendTelemetry(u.Disconnected,C,[]),this.resetProgressSendTimer()},h.prototype.trackNewConnection=function(){++this.connectionAttempt},h.prototype.trackRequest=function(C,b){var w={};void 0!==b&&(w.hasError=!0,w.error=b);try{if(C){w.requestID=C.id,w.httpMethod=C.method,w.url=C.url,w.bodyLength=C.body.length,w.shortUrl=C.shortUrl,w.requestTimeStamp=C.startTS,w.correlationVector=C.correlationVector;for(var I=C.headers,P=0,k=Object.keys(I);P<k.length;P++){var O=k[P];I.hasOwnProperty(O)&&(w[O]=I[O])}}}catch(V){w.hasError=!0,w.error=w.error+" error creating request context "+p.toJson(V)}this.sendTelemetry(u.Request,w,[])},h.prototype.trackResponse=function(C,b,w,I){var P={};void 0!==I&&(P.hasError=!0,P.error=I);try{if(P.responseTimestamp=void 0!==w?w.sentTS:Date.now(),C){P.requestID=C.id,P.httpMethod=C.method,P.shortUrl=C.shortUrl,P.correlationVector=C.correlationVector;for(var k=C.headers,O=0,V=Object.keys(k);O<V.length;O++){var U=V[O];k.hasOwnProperty(U)&&(P[U]=k[U])}}w&&(P.latencyMS=b,P.responseCode=w.status,P.responseLength=w.body.length)}catch(B){P.hasError=!0,P.error=P.error+" error creating response context "+p.toJson(B)}this.sendTelemetry(u.Response,P,[])},h.prototype.sendResponseError=function(C,b,w){this.trackResponse(b,void 0,w,C)},h.prototype.close=function(){this.sendProgress({reason:"closed"}),this.steps.length=0,this.cancelProgressTimer()},h.prototype.mergeSettings=function(C){if(C){this.eventLogSettings.numberOfStepsToMaintain=Math.min(40,Math.max(10,void 0!==C.numberOfStepsToMaintain?C.numberOfStepsToMaintain:0));var b=Math.min(3600,Math.max(55,void 0!==C.sendProgressTimeoutSecs?C.sendProgressTimeoutSecs:0));this.eventLogSettings.logHealthCheckError=C.logHealthCheckError,this.eventLogSettings.logSendPingError=C.logSendPingError;for(var w=0,I=Object.keys(u).map(function(k){return u[k]});w<I.length;w++){var P=I[w];C.hasOwnProperty(P)&&void 0!==C[P]&&(this.eventLogSettings[P]=C[P])}this.eventLogSettings.sendProgressTimeoutSecs!==b&&(this.eventLogSettings.sendProgressTimeoutSecs=b,this.resetProgressSendTimer())}},h}();L.ConnectionTracker=g},function(Y,L,E){Object.defineProperty(L,"__esModule",{value:!0});var p=function(){function N(m,R){this.logger=m,this.maxBackoffInMs=R,this.backoffId=0,this.backoffCount=0}return N.calculateNextBackoffMs=function(m,R){var u=1+.4*(Math.random()-.5),v=1e3*Math.pow(2,m)*u;return v=Math.round(v),Math.min(R,v)},N.prototype.setMaxBackoffMs=function(m){this.maxBackoffInMs=m},N.prototype.backoff=function(m,R){var u=this;void 0!==this.timerHandle&&(this.logger.debug("Clearing current back off"),clearTimeout(this.timerHandle),this.timerHandle=void 0);var v=N.calculateNextBackoffMs(this.backoffCount,this.maxBackoffInMs);this.backoffId++,this.backoffCount++,this.logger.info("Backing off "+m+" for "+v+" milliseconds with ID "+this.backoffId),this.timerHandle=setTimeout(function(){u.logger.info("Back off for "+m+" with ID "+u.backoffId+" complete, invoking handler"),u.timerHandle=void 0,R()},v)},N.prototype.reset=function(){void 0!==this.timerHandle&&(this.logger.debug("Resetting back off"),clearTimeout(this.timerHandle),this.timerHandle=void 0),this.backoffCount=0},N}();L.ExponentialBackoff=p},function(Y,L,E){var p=this&&this.__assign||Object.assign||function(U){for(var B,H=1,W=arguments.length;H<W;H++)for(var te in B=arguments[H])Object.prototype.hasOwnProperty.call(B,te)&&(U[te]=B[te]);return U};Object.defineProperty(L,"__esModule",{value:!0});var N=E(20),m=E(11),R=E(3),u=E(14),v=E(1),M=E(15),A=E(2),T=E(5),g=E(0),h=E(17),C=E(10),b=function(){this.cv=v.CLIENT_VERSION,this.ua="",this.hr="",this.v=""},w=function(){this["force new connection"]=!0,this.reconnect=!1,this.query="",this.ackTimeoutMs=5e3},I="MS-CV",P=function(){function U(B){this.cvCounter=0;var H=JSON.parse(B);this.startTS=H.hasOwnProperty("startTS")?H.startTS:0,this.url=H.hasOwnProperty("url")?H.url:"",this.shortUrl=H.hasOwnProperty("shortUrl")?H.shortUrl:"",this.body=H.hasOwnProperty("body")?H.body:"",this.headers=H.hasOwnProperty("headers")?H.headers:{},this.id=H.hasOwnProperty("id")&&"number"==typeof H.id?H.id:-1,this.method=H.hasOwnProperty("method")?H.method:"",this.replied=!1,this.timedout=!1,this.timeoutTimerId=0,this.receivedCv=this.headers[I],this.updateCvHeader()}return Object.defineProperty(U.prototype,"correlationVector",{get:function(){return this.receivedCv?this.receivedCv+"."+this.cvCounter:""},enumerable:!0,configurable:!0}),U.prototype.on=function(B,H){"data"===B?this.dataCallback=H:"end"===B&&("function"==typeof this.dataCallback&&this.dataCallback(this.body),H())},U.prototype.incrementCorrelationVector=function(){++this.cvCounter,this.updateCvHeader()},U.prototype.updateCvHeader=function(){var B=this.correlationVector;B&&(this.headers[I]=B)},U}(),k=function(){function U(B,H,W){this.request=B,this.responseData=H,this.sendResponse=W}return U.prototype.writeHead=function(B,H){this.responseData.status=B,this.responseData.headers=H},U.prototype.write=function(B){this.responseData.body+=B},U.prototype.end=function(B){return B&&(this.responseData.body+=B),this.sendResponse(this.request,this.responseData)},U}(),O=function(B){this.name=B,this.args={},this.timeoutTimerId=0},V=function(){function U(B,H,W,te,$){var pe=this;this.options=H,this.manager=W,this.tokenProvider=te,this.connectionId="",this.inIncallMode=!1,this.connectionAttempt=0,this.connectedClientId="",this.c2cUrlBase="",this.pendingTimers={},this.lastDisconnectReason="",this.UNKNOWN_TRANSPORT="unknown_transport",this.logger=new g.Logger("Connection",B),this.timeoutOptions=this.options.timeoutOptions,this.healthBackoff=new M.ExponentialBackoff(this.logger,this.timeoutOptions.maxBackoffMs),this.tokenBackoff=new M.ExponentialBackoff(this.logger,this.timeoutOptions.maxBackoffMs),this.clientID=Date.now(),"undefined"!=typeof window&&window.location&&(this.domId=window.location.hostname),this.clientInfo=new b,this.clientInfo.cv=v.CLIENT_VERSION,this.clientInfo.ua="",this.options&&this.options.clientInfo&&(this.clientInfo.ua=this.safeString(this.options.clientInfo.ua),this.clientInfo.v=this.safeString(this.options.clientInfo.v)),this.connectionTracker=new u.ConnectionTracker(B,this.clientID,this.clientInfo,function(){return pe.getServerState()},this.options.endpointId,this.options.clientCorrelationID,this.options.environment),this.applyConnectionTrackerOptions(H),this.fsm=new h.TrouterFsm(B,this,this.options.incallModeTimeoutMs>0),H.registration&&(this.registrarClient=N.createRegistrarClient(B,this.tokenProvider,{registrarUrl:H.registration.registrarUrl,registrationId:H.registration.registrationId,requestTimeoutMs:H.timeoutOptions.fetchTimeoutMs,initialRetryDelayMs:1e3,maxRetryDelayMs:H.timeoutOptions.maxBackoffMs})),this.userActivityState=$}return U.prototype.start=function(B){this.logger.info("Starting"),this.externalConnectParams=B,this.fsm.start()},U.prototype.stop=function(B){this.logger.info("Stopping"),this.connectionTracker.close(),this.fsm.stop(B)},U.prototype.configure=function(B){var H=this.options.trouterUrl!==B.trouterUrl;this.options=B,this.applyConnectionTrackerOptions(B),H&&this.onTrouterReconnect()},U.prototype.checkConnection=function(B){this.logger.info("checkConnection called with "+B),this.fsm.checkConnection(B),B&&this.connectionTracker.sendTelemetry(u.ClientEventName.CheckConnection,{disconnectDetected:B},[])},U.prototype.getServerState=function(){return new T.ServerState(this.connectionId,this.connectedClientId,this.domId?this.domId:"",this.allocateResult?this.allocateResult.url:"",this.allocateResult?this.allocateResult.surl:"",this.c2cUrlBase,this.connectionExpireTimestampInSecs)},U.prototype.getToken=function(B,H){var W=this;this.logger.info("Getting token "+(H?"with backoff":"without backoff"));var te=function(){W.connectionTracker.trackStart("token"),W.tokenProvider(!B).then(function($){W.logger.debug("token is received"),W.connectionTracker.trackEnd("token"),W.fsm.onTokenReceived($)}).catch(function($){var pe=R.toJson($.stack);W.logger.error("Getting token failed, will retry after timeout. Error: "+pe),W.connectionTracker.trackError("token",pe),W.getToken(B,!0)})};H?this.tokenBackoff.backoff("getting token",te):(this.tokenBackoff.reset(),te())},U.prototype.startConnectionTimer=function(){var B=this;this.stopConnectionTimer(),this.logger.debug("Starting connection timeout for "+this.timeoutOptions.connectionTimeoutMs+" ms"),this.connectionTimeoutId=setTimeout(function(){B.logger.info("Connection timeout is fired"),B.fsm.onConnectingTimeout()},this.timeoutOptions.connectionTimeoutMs)},U.prototype.stopConnectionTimer=function(){this.connectionTimeoutId&&(this.logger.debug("Stopping connection timeout"),clearTimeout(this.connectionTimeoutId),this.connectionTimeoutId=void 0)},U.prototype.startPingTimer=function(){var B=this;"websocket"===this.transportTypeName?(this.logger.debug("Starting ping timeout for "+this.timeoutOptions.pingTimeoutMs+" ms"),this.pingTimerId=setInterval(function(){B.logger.info("Ping interval fired"),B.fsm.onPingInterval()},this.timeoutOptions.pingTimeoutMs)):this.logger.debug("Not starting ping for transport "+this.transportTypeName)},U.prototype.stopPingTimer=function(){this.pingTimerId&&(this.logger.debug("Stopping ping timeout"),this.clearPingResponseTimer(),clearInterval(this.pingTimerId),this.pingTimerId=void 0)},U.prototype.shouldSkipRegistration=function(){return void 0===this.options.registration},U.prototype.hasCustomRegisterTtl=function(){return this.options.registration&&this.options.registration.registrarTtlSec},U.prototype.startRegisterTimer=function(){var B=this;void 0!==this.registrationTimerId&&this.stopRegisterTimer();var H=this.getRegistrationTtl()-30;this.logger.debug("Starting registration timeout for "+H+" sec"),this.registrationTimerId=setTimeout(function(){B.logger.info("Registration timeout is fired"),B.registrationTimerId=setTimeout(function(){B.registrationTimerId=void 0,B.logger.debug("Re-registration did not happen in time"),B.dispatchUnregistered()},3e4),B.fsm.onRegistrationTimeout()},1e3*H)},U.prototype.stopRegisterTimer=function(){this.registrationTimerId&&(this.logger.debug("Stopping registration timeout"),clearTimeout(this.registrationTimerId),this.registrationTimerId=void 0)},U.prototype.resendRegistration=function(){if(!this.registrarClient)throw new Error("Trouter Client not configured to handle registrations");return this.registrarClient.resendRegistration()},U.prototype.buildSocketIoUrlParams=function(){if(!this.allocateResult)throw new Error("Allocate result is undefined in buildSocketIoUrlParams()");var B={};if(this.allocateResult.connectparams)for(var H=this.allocateResult.connectparams,W=0,te=Object.keys(H);W<te.length;W++){var $=te[W];H.hasOwnProperty($)&&void 0!==H[$]&&(B[$]=H[$])}return B.v="v4",B.tc=encodeURI(R.toJson(this.clientInfo)),B.timeout=this.timeoutOptions.pingTimeoutMs/1e3,B.auth="true",this.options.endpointId&&(B.epid=this.options.endpointId),this.userActivityState.state!==A.UserActivityState.Unknown&&(B.userActivity=encodeURI(R.toJson(this.userActivityState.toEventObject()))),this.appendConnectedClientIds(this.buildQuery(B),!0)},U.prototype.startSocketIo=function(){var B=this;if(this.logger.info("Starting socket io"),this.connectionTracker.trackStart("connectSocket"),!this.allocateResult)throw new Error("Allocate result is undefined in startSocketIo()");var H=this.options.ioOptions||new w;if(H["force new connection"]=!0,H.reconnect=!1,H.query=this.buildSocketIoUrlParams(),this.logger.info("connecting to "+this.allocateResult.socketio+"?"+H.query),this.stopSocketIo(),this.socket=(this.options.io||C).connect(this.allocateResult.socketio,H),void 0===this.socket)throw new Error("Can't create Socket.io object");this.socket.on("connecting",function(W){B.onSocketConnecting(W)}),this.socket.on("connect",function(){B.onSocketConnect()}),this.socket.on("connect_failed",function(W){B.onSocketConnectFailed(W)}),this.socket.on("disconnect",function(W){B.onSocketDisconnect(W)}),this.socket.on("reconnect",function(){B.onSocketReconnect()}),this.socket.on("reconnect_failed",function(W){B.onSocketReconnectFailed(W)}),this.socket.on("reconnecting",function(){B.onSocketReconnecting()}),this.socket.on("error",function(W){B.onSocketError(W)}),this.socket.on("message",function(W){B.onSocketMessage(W)}),this.socket.on("trouter.connected",function(W){B.onTrouterConnected(W)}),this.socket.on("trouter.reconnect",function(){B.onTrouterReconnect()}),this.socket.on("trouter.message_loss",function(W){B.onTrouterMessageLoss(W)})},U.prototype.stopSocketIo=function(){if(this.socket){this.logger.info("clearing socket.io");try{for(var B=0,H=["connecting","connect","connect_failed","disconnect","reconnect","reconnect_failed","reconnecting","error","message","trouter.connected","trouter.reconnect","trouter.message_loss"];B<H.length;B++)this.socket.removeAllListeners(H[B]);this.socket.disconnect(),this.logger.debug("cleared socket"),this.socket=void 0}catch(te){this.logger.error("exception in disconnecting previous socket. Error: "+R.toJson(te.stack))}}},U.prototype.dispatchConnected=function(){this.logger.info("dispatching connected"),this.manager.onConnected(this)},U.prototype.dispatchRegistered=function(){this.logger.info("dispatching registered"),this.manager.onRegistered(this)},U.prototype.dispatchUnregistered=function(){this.logger.info("dispatching unregistered"),this.manager.onUnregistered(this)},U.prototype.dispatchDownstreamRequest=function(B){var H=this;this.logger.info("dispatching downstream request");try{var W=new k(B,new u.ResponseData(B.id),function(te,$){return H.logger.info("sending response to downstream"),H.sendResponse(te,$)});this.manager.onDownstreamRequest(this,B,W)}catch(te){this.logger.error("exception in socket.on message. Error : "+R.toJson(te.stack))}},U.prototype.dispatchReconnecting=function(){this.logger.info("dispatching reconnecting"),this.manager.onReconnecting(this)},U.prototype.dispatchReconnectIsRequired=function(){this.logger.info("dispatching reconnect is required by server"),this.manager.onReconnectIsRequired(this)},U.prototype.dispatchDisconnected=function(){this.logger.info("dispatching disconnected"),this.manager.onDisconnected(this)},U.prototype.dispatchTrouterMessageLost=function(B){this.logger.info("dispatching trouter lost message"),this.manager.onTrouterMessageLost(B)},U.prototype.sendProcessedDroppedIndicators=function(B){var H=this;try{this.logger.info("emitting processed flow tags to the server");var W=new O("trouter.processed_message_loss");W.args={droppedIndicators:B},this.sendDownstreamEvent(W,function(){H.logger.info("emitted processed flow tags to the server")})}catch($){var te=R.toJson($.stack);this.logger.error("unable to send processed message loss event. Error: "+te),this.connectionTracker.trackError("trouter.processed_message_loss",te,!1)}},U.prototype.resetAllocationConnectionParams=function(){this.allocateResult&&(this.logger.info("Resetting allocation connection parameters"),this.allocateResult.connectparams=void 0)},U.prototype.sendAllocateRequest=function(B){var H=this;this.connectionAttempt++,this.connectionTracker.trackNewConnection();var W=this.options.trouterUrl,te=W,$=this.allocateResult&&this.allocateResult.connectparams;if(!$){var pe=this.externalConnectParams;pe&&pe.se&&parseInt(pe.se,10)<=Date.now()+36e5&&(this.logger.warn("Dropping expired cached connection parameters: "+new Date(parseInt(pe.se,10))),this.externalConnectParams=pe=void 0),pe&&pe.serviceUrl!==te&&(this.logger.warn("Dropping cached connection parameters for a different environment ("+pe.serviceUrl+", now "+te+")"),this.externalConnectParams=pe=void 0),pe&&pe.reconnectUrl?(te=pe.reconnectUrl,$=p({},pe,{reconnectUrl:void 0})):$=pe}te=this.appendCorrelationIds(te,!1),te=this.appendEndpointId(te,!1),$&&(te+="&"+this.buildQuery($),$.v||(te+="&v=v4"));var x=new Request(te,{method:"POST",mode:"cors",headers:new Headers({"X-Skypetoken":B,"Content-Type":"text/plain"})});this.logger.info("sendAllocateRequest: POST "+te),this.connectionTracker.trackStart("allocation");var r=-1;this.fetchWithTimeout(x,this.timeoutOptions.fetchTimeoutMs).then(function(s){if(r=s.status,!s.ok)throw new Error(s.statusText);var l=s.headers.get("content-type");if(!l||"application/json"!==l&&"application/json;"!==l.substring(0,17))throw new Error("Content-type '"+l+"' is unexpected");return H.connectionTracker.trackEnd("allocation"),s.json()}).then(function(s){H.onAllocationResponse(s,W)}).catch(function(s){var l=s+", status code "+r;H.logger.error("Allocation request failed. Error: "+l),H.connectionTracker.trackError("allocation",l),H.externalConnectParams&&H.connectionAttempt>2&&(r>=400&&r<=599?(H.logger.warn(H.connectionAttempt+" connection attempts, server-side failure: erasing external connection parameters"),H.externalConnectParams=void 0):H.externalConnectParams.reconnectUrl&&(H.logger.warn(H.connectionAttempt+" connection attempts, erasing reconnect URL"),delete H.externalConnectParams.reconnectUrl)),H.fsm.onAllocationFailed(401===r)})},U.prototype.sendPingRequest=function(){var B=this;if(this.socket&&void 0===this.pingResponseTimerId)try{this.logger.info("emitting ping event"),this.socket.emit("ping",function(){B.onPingResponse()}),this.pingResponseTimerId=setTimeout(function(){B.logger.error("Ping response timeout is fired"),B.clearPingResponseTimer(),B.fsm.onPingResponseTimeout()},this.timeoutOptions.pongTimeoutMs)}catch(W){var H=R.toJson(W.stack);this.logger.error("unable to send ping. Error: "+H),this.connectionTracker.trackError("ping",H,!1)}},U.prototype.setUserActivityState=function(B){var H=B.state!==this.userActivityState.state;this.userActivityState=B,this.fsm.onSetUserActivityState(B,H)},U.prototype.sendUserActivityState=function(B,H){this.userActivityState.state!==A.UserActivityState.Unknown&&("websocket"===this.transportTypeName&&H?this.sendUserActivityStateMultiple(B===T.UserActivityEventReason.Connected?2:1):"xhr-polling"===this.transportTypeName&&B===T.UserActivityEventReason.Modified&&this.fsm.forceReconnect())},U.prototype.sendRegisterRequest=function(){var B=this;if(!this.options.registration||!this.registrarClient)throw new Error("Internal error - options.registration is undefined");if(!this.allocateResult)throw new Error("Allocate result is undefined in sendRegisterRequest()");this.logger.info("sending register request");var H=new R.Timespan;this.connectionTracker.trackStart("registration"),this.registrarClient.register({appId:this.options.registration.pnhAppId,aesKey:"",languageId:"en-US",platform:this.options.registration.platform,templateKey:this.options.registration.pnhTemplateKey,platformUIVersion:this.options.registration.platformUIVersion,productContext:this.options.registration.productContext},{TROUTER:[{context:this.options.registration.context,path:this.allocateResult.surl,ttl:this.getRegistrationTtl()}]}).then(function(){B.logger.info("Register request successful"),B.connectionTracker.trackEnd("registration"),B.fsm.onRegistrationSucceed(),B.connectionTracker.sendTelemetry(u.ClientEventName.Registration,{duration:H.duration},[])}).catch(function(W){B.logger.error("Register request failed. Error: "+W),B.connectionTracker.trackError("registration",W.message),B.fsm.onRegistrationFailed(!1),B.connectionTracker.sendTelemetry(u.ClientEventName.Registration,{duration:H.duration},[])})},U.prototype.sendUnregisterRequest=function(){var B=this;this.logger.info("sending unregister request");var H=new R.Timespan;if(!this.options.registration||!this.registrarClient)throw new Error("Internal error - options.registration is undefined");this.connectionTracker.trackStart("unregistration"),this.registrarClient.unregister().then(function(){B.logger.info("Unregister request successful"),B.connectionTracker.trackEnd("unregistration"),B.fsm.onUnregistrationSucceed(),B.connectionTracker.sendTelemetry(u.ClientEventName.Unregistration,{duration:H.duration},[])}).catch(function(W){B.logger.error("Unregister request failed. Error: "+W),B.connectionTracker.trackError("unregistration",W.message),B.fsm.onUnregistrationFailed(!1),B.connectionTracker.sendTelemetry(u.ClientEventName.Unregistration,{duration:H.duration},[])})},U.prototype.fetchWithTimeout=function(B,H){return new m.Promise(function(W,te){fetch(B).then(W).catch(te),0!==H&&setTimeout(te,H,new Error("Fetch for '"+B.url+"' timed out"))})},U.prototype.resetTokenBackoff=function(){this.tokenBackoff.reset()},U.prototype.resetRegisterBackoff=function(){this.registrarClient&&this.registrarClient.cancelPendingRequests()},U.prototype.clearTimers=function(){this.logger.debug("Clearing all pending downstream events related timers");for(var B=0,H=Object.keys(this.pendingTimers);B<H.length;B++)this.clearTimer(Number(H[B]))},U.prototype.restartIncallModeTimer=function(){var B=this;this.clearIncallModeTimerId(),this.logger.debug("Restarting incall mode timer"),this.incallModeTimerId=setTimeout(function(){B.logger.info("Call mode timer fired"),B.fsm.onIncallModeTimer()},this.options.incallModeTimeoutMs)},U.prototype.enterIncallMode=function(){this.logger.info("Entering incall mode"),this.timeoutOptions=this.options.incallTimeoutOptions,this.healthBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.tokenBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.inIncallMode=!0},U.prototype.exitIncallMode=function(){this.logger.info("Exiting incall mode"),this.clearIncallModeTimerId(),this.timeoutOptions=this.options.timeoutOptions,this.healthBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.tokenBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.inIncallMode=!1},U.prototype.isIncallMode=function(){return this.inIncallMode},U.prototype.onSocketConnecting=function(B){this.logger.info("onSocketConnecting("+B+")"),this.transportTypeName=B,this.connectionTracker.trackProgress("connecting",this.transportTypeName),this.fsm.onConnecting()},U.prototype.onSocketConnect=function(){this.logger.info("onSocketConnect")},U.prototype.onSocketConnectFailed=function(B){this.logger.error("onSocketConnectFailed"),this.connectionTracker.trackError("connect_failed",B,!0,this.transportTypeName?this.transportTypeName:this.UNKNOWN_TRANSPORT),this.fsm.onConnectingFailed()},U.prototype.onSocketDisconnect=function(B){this.logger.error("onSocketDisconnect, reason: "+B);var H={reason:B,serverClosed:!this.fsm.isActive()};this.connectionTracker.trackDisconnected(H),this.connectionTracker.clearConnectedInfo();var W=H.sessionLengthMS||0;"dup"===B&&"dup"===this.lastDisconnectReason&&W<this.options.duplicateDisconnectThresholdMs&&(this.logger.warn("Socket was closed by server as Duplicate for the second time in a row after "+W+" ms which is below the threshold of "+this.options.duplicateDisconnectThresholdMs+" ms. Resetting cached connection parameters and making a new allocation."),this.resetAllocationConnectionParams()),this.lastDisconnectReason=B,this.fsm.onSocketError(void 0),this.connectionExpireTimestampInSecs=void 0},U.prototype.onSocketReconnect=function(){this.logger.error("onSocketReconnect"),this.fsm.onTrouterConnected()},U.prototype.onSocketReconnectFailed=function(B){this.logger.error("onSocketReconnectFailed with '"+B+"'"),this.fsm.onSocketError("string"==typeof B?B:void 0)},U.prototype.onSocketReconnecting=function(){this.logger.error("onSocketReconnecting")},U.prototype.onSocketError=function(B){this.logger.error("onSocketError with '"+R.toJson(B)+"'"),this.connectionTracker.trackError("connectSocket",B),this.fsm.onSocketError("string"==typeof B?B:void 0)},U.prototype.onSocketMessage=function(B){var W,H=this;this.logger.info("onSocketMessage");try{var te=(W=new P(B)).headers&&W.headers["X-Microsoft-Skype-Chain-ID"];this.logger.info("Received request N "+W.id+(te?" Chain-Id "+te:"")+" CV "+W.correlationVector+" to '"+W.url+"'"),W.startTS=Date.now(),W.url&&this.urlPath&&0===W.url.indexOf(this.urlPath)&&(W.shortUrl=W.url.substring(this.urlPath.length))}catch(x){var pe=R.toJson(x.stack);return this.logger.error("unable to parse request. Error: "+pe),this.connectionTracker.trackRequest(void 0,pe),void this.connectionTracker.sendResponseError("unable to parse request, error: "+x)}W.timeoutTimerId=setTimeout(function(){if(!W.replied){H.logger.error("Request "+W.id+" timed out");var x=new u.ResponseData(W.id);x.status=504,x.headers={"Trouter-Responder":"ClientLib"},H.sendResponse(W,x),W.timedout=!0}},this.timeoutOptions.requestTimeoutMs);try{this.connectionTracker.trackRequest(W),this.fsm.onDownstreamRequest(W)}catch(x){this.logger.error("exception in socket.on message. Error: "+R.toJson(x.stack)),this.connectionTracker.sendResponseError(x.message,W,void 0)}},U.prototype.onTrouterConnected=function(B){if(this.allocateResult){this.logger.info("onTrouterConnected: "+this.allocateResult.url),this.socket&&this.socket.socket&&this.socket.socket.options&&this.socket.socket.options.query&&(this.socket.socket.options.query+="&connected=true"),this.urlPath=this.allocateResult.url.replace(/https?:\/\/([A-z0-9\:\$\-\_\.\+\!\*\"\(\)\,]*)\//,"/");var H=this.connectedUrl!==this.allocateResult.url;this.connectedUrl=this.allocateResult.url,this.connectionExpireTimestampInSecs=R.calculateExpireTsInSec(B.ttl),this.connectionTracker.trackEnd("connectSocket"),this.connectionTracker.trackConnected(H,this.transportTypeName?this.transportTypeName:this.UNKNOWN_TRANSPORT),this.fsm.onTrouterConnected()}else this.logger.error("Invalid internal state - received onTrouterConnected while allocateResult is not set")},U.prototype.onTrouterReconnect=function(){this.logger.info("onTrouterReconnect"),this.fsm.onReconnectRequired()},U.prototype.onTrouterMessageLoss=function(B){this.logger.info("onTrouterMessageLoss"),this.fsm.onTrouterMessageLost(B.droppedIndicators)},U.prototype.onAllocationResponse=function(B,H){if(this.logger.info("Received allocation response "+JSON.stringify(B)),this.allocateResult=B,this.externalConnectParams=void 0,this.connectionExpireTimestampInSecs=R.calculateExpireTsInSec(+B.ttl),this.connectionId=this.allocateResult.id||"",this.connectedClientId=this.allocateResult.ccid,this.logger.info("connected client id set {connectedClientId:"+this.connectedClientId+"}"),this.c2cUrlBase=B.curlb||"",""===this.c2cUrlBase){var te=B.surl.indexOf("://");te>=0&&(te=B.surl.indexOf("/",te+3))>=5&&":3443"===B.surl.substr(te-5,5)&&(this.c2cUrlBase=B.surl.substr(0,te-5))}var $=p({serviceUrl:H,reconnectUrl:B.socketio+"v4/a"},B.connectparams);this.manager.onConnectionParametersUpdated($),this.fsm.onAllocationSucceed()},U.prototype.onPingResponse=function(){this.logger.info("onPingResponse"),this.connectionTracker.increasePingResponseCount(),this.clearPingResponseTimer(),this.fsm.onPingResponse()},U.prototype.clearPingResponseTimer=function(){void 0!==this.pingResponseTimerId&&(clearTimeout(this.pingResponseTimerId),this.pingResponseTimerId=void 0)},U.prototype.buildQuery=function(B){for(var H=[],W=0,te=Object.keys(B);W<te.length;W++){var $=te[W];B.hasOwnProperty($)&&void 0!==B[$]&&H.push($+"="+B[$])}return H.join("&")},U.prototype.appendConnectedClientIds=function(B,H){var W="";B.indexOf("ccid=")<0&&(W="ccid="+this.connectedClientId+"&"),this.domId&&(W+="dom="+this.domId+"&"),W.length>0&&(W=W.slice(0,-1));var te=H||-1!==B.indexOf("?")?"&":"?";return this.appendCorrelationIds(B+te+W,H)},U.prototype.appendEndpointId=function(B,H){var W=H||-1!==B.indexOf("?")?"&":"?";return B.indexOf("epid")<0&&this.options.endpointId?""+B+W+"epid="+this.options.endpointId:B},U.prototype.appendCorrelationIds=function(B,H){var W=H||-1!==B.indexOf("?")?"&":"?";return B.indexOf("cor_id")<0?""+B+W+"cor_id="+this.options.clientCorrelationID+"&con_num="+this.clientID+"_"+this.connectionAttempt:B},U.prototype.getHealthUrl=function(B){return B.substring(0,B.lastIndexOf("/a"))+"/h"},U.prototype.safeString=function(B){return"string"==typeof B?B:""},U.prototype.sendResponse=function(B,H){if(B.timedout)return this.logger.error("Request "+B.id+" already timed out"),1;if(B.replied)return this.logger.error("Response for request "+B.id+" already sent"),2;clearTimeout(B.timeoutTimerId),B.timeoutTimerId=0,B.replied=!0,H.headers=H.headers||{};var W=B.correlationVector;this.logger.info("Sending response for request N "+B.id+" CV "+W+" with status "+H.status),W&&(H.headers[I]=W),B.headers&&B.headers["trouter-request"]&&!H.headers["trouter-request"]&&(H.headers["trouter-request"]=B.headers["trouter-request"]);var te=Date.now()-B.startTS;if(H.headers["trouter-client"]=R.toJson({cd:te}),this.logger.debug("response: "+R.toJson(H)),!this.socket)return this.connectionTracker.sendResponseError("no socket",B,H),4;try{return this.socket.send(R.toJson(H)),H.sentTS=Date.now(),B.incrementCorrelationVector(),this.connectionTracker.trackResponse(B,te,H),"websocket"===this.transportTypeName&&this.sendPingRequest(),0}catch(pe){var $="unable to send data on response.end. Error: "+R.toJson(pe.stack);return this.logger.error($),this.connectionTracker.sendResponseError($,B,H),4}},U.prototype.sendUserActivityStateMultiple=function(B){var H=this,W=new O("user.activity"),te=this.userActivityState.toEventObject();W.args=te,this.userActivityState.correlationVector.increase(),this.logger.debug("Sending user activity '"+this.userActivityState.toEventJSON()+"', remaining "+(B-1)),this.sendDownstreamEvent(W,function(){if(H.logger.info("User activity state: "+te.state+", cv: "+te.cv+" accepted"),H.manager.onUserActivityStateAccepted&&H.manager.onUserActivityStateAccepted(te.cv),H.clearTimer(W.timeoutTimerId),B>1){var $=setTimeout(function(){H.clearTimer($),H.sendUserActivityStateMultiple(B-1)},H.options.userActivitySecondResendDelayMs);H.registerTimer($,"user.activity/resend")}}),W.timeoutTimerId=setTimeout(function(){H.logger.error("Activity state response timeout is fired"),H.fsm.onActivityStateResponseTimeout(),H.clearTimer(W.timeoutTimerId)},this.timeoutOptions.userActivityResponseTimeoutMs),this.registerTimer(W.timeoutTimerId,"user.activity/response")},U.prototype.sendDownstreamEvent=function(B,H){this.logger.info("Sending downstream event "+B.name),this.socket&&this.socket.emit(B.name,B.args,H)},U.prototype.registerTimer=function(B,H){this.logger.debug("registering timer "+B+" -> "+H),this.pendingTimers[B]=H},U.prototype.clearTimer=function(B){this.logger.debug("clearing timer "+B+" -> "+this.pendingTimers[B]),delete this.pendingTimers[B],clearTimeout(B)},U.prototype.getRegistrationTtl=function(){var B=R.calculateTtlInSec(this.connectionExpireTimestampInSecs);return this.logger.debug("Current connectionID will expire in "+B+" seconds"),this.options.registration&&this.options.registration.registrarTtlSec&&B>0?Math.min(this.options.registration.registrarTtlSec,B):this.options.registration&&this.options.registration.registrarTtlSec?this.options.registration.registrarTtlSec:B>0?B:3600},U.prototype.clearIncallModeTimerId=function(){void 0!==this.incallModeTimerId&&(this.logger.debug("Clearing in-call mode timer"),clearTimeout(this.incallModeTimerId),this.incallModeTimerId=void 0)},U.prototype.applyConnectionTrackerOptions=function(B){try{B.eventLogger&&"function"==typeof B.eventLogger.logEvent?(this.connectionTracker.mergeSettings(B.telemetrySettings),this.connectionTracker.enable(B.eventLogger)):this.logger.warn("Trouter client event logging disabled due to invalid configuration.")}catch(H){this.logger.warn("Trouter client event logging disabled. Error: "+R.toJson(H.stack)),this.connectionTracker.disable()}},U}();L.TrouterConnection=V},function(Y,L,E){Object.defineProperty(L,"__esModule",{value:!0});var p,v,R,N=E(5),m=E(0);(v=p=L.State||(L.State={}))[v.Initial=0]="Initial",v[v.RetrievingToken=1]="RetrievingToken",v[v.Allocating=2]="Allocating",v[v.Handshaking=3]="Handshaking",v[v.Connecting=4]="Connecting",v[v.Connected=5]="Connected",v[v.UnregisteringRetrievingToken=6]="UnregisteringRetrievingToken",v[v.Unregistering=7]="Unregistering",function(v){v[v.Initial=0]="Initial",v[v.RetrievingToken=1]="RetrievingToken",v[v.Registering=2]="Registering",v[v.Registered=3]="Registered",v[v.NotRegistered=4]="NotRegistered"}(R||(R={}));var u=function(){function v(M,A,T){this.worker=A,this.incallModeEnabled=T,this.state=p.Initial,this.connectionErrors=0,this.logger=new m.Logger("ConnectionFsm",M),this.connectedSubstate=R.Initial}return v.prototype.getState=function(){return this.state},v.prototype.isActive=function(){return this.state===p.Allocating||this.state===p.Connected||this.state===p.Handshaking||this.state===p.Connecting||this.state===p.RetrievingToken},v.prototype.start=function(){return this.state===p.Initial?(this.setState(p.RetrievingToken),this.worker.getToken(!0,!1),!0):(this.showIgnored("start"),!1)},v.prototype.stop=function(M){M&&(this.connectedSubstate=R.Initial),this.worker.isIncallMode()&&this.worker.exitIncallMode(),this.worker.resetTokenBackoff(),this.worker.resetRegisterBackoff(),this.worker.stopConnectionTimer(),this.worker.stopPingTimer(),this.worker.clearTimers(),this.state!==p.Connecting&&this.state!==p.Handshaking&&this.state!==p.Connected||this.worker.stopSocketIo(),this.isRegistered()&&this.state!==p.UnregisteringRetrievingToken&&this.state!==p.Unregistering?(this.setState(p.UnregisteringRetrievingToken),this.worker.stopRegisterTimer(),this.worker.getToken(!0,!1)):(this.setState(p.Initial),this.worker.dispatchDisconnected())},v.prototype.onTokenReceived=function(M){this.state===p.RetrievingToken?(this.setState(p.Allocating),this.worker.startConnectionTimer(),this.worker.sendAllocateRequest(M)):this.state===p.Connected&&this.connectedSubstate===R.RetrievingToken?(this.connectedSubstate=R.Registering,this.worker.sendRegisterRequest()):this.state===p.UnregisteringRetrievingToken?(this.setState(p.Unregistering),this.worker.sendUnregisterRequest()):this.showIgnored("onTokenReceived")},v.prototype.checkConnection=function(M){M&&this.onPingInterval()},v.prototype.onAllocationSucceed=function(){return this.state===p.Allocating?(this.setState(p.Handshaking),this.connectedSubstate===R.Registered&&this.worker.dispatchUnregistered(),this.connectedSubstate=R.Initial,this.worker.startSocketIo(),!0):(this.showIgnored("onAllocationSucceed"),!1)},v.prototype.onAllocationFailed=function(M){this.state===p.Allocating?(this.setState(p.RetrievingToken),this.worker.stopConnectionTimer(),this.worker.getToken(!M,!0)):this.showIgnored("onAllocationFailed")},v.prototype.onConnectingTimeout=function(){this.state===p.Allocating||this.state===p.Connecting||this.state===p.Handshaking?(this.setState(p.RetrievingToken),this.resetAllocationIfNecessary(void 0),this.worker.stopSocketIo(),this.worker.getToken(!0,!1)):this.showIgnored("onConnectingTimeout")},v.prototype.onConnecting=function(){this.state===p.Handshaking?this.setState(p.Connecting):this.showIgnored("onConnecting")},v.prototype.onConnectingFailed=function(){this.state===p.Connecting?this.onConnectingTimeout():this.state===p.Handshaking?(this.logger.error("Unexpected error in Socket.io - no valid transports"),this.onConnectingTimeout()):this.showIgnored("onConnectingFailed")},v.prototype.onSocketError=function(M){this.state===p.Handshaking||this.state===p.Connected?(this.worker.stopSocketIo(),this.worker.stopPingTimer(),this.worker.clearTimers(),this.worker.stopConnectionTimer(),this.state!==p.Connected&&this.worker.resetAllocationConnectionParams(),this.setState(p.RetrievingToken),this.worker.dispatchReconnecting(),this.worker.getToken(!0,!1)):this.showIgnored("onSocketError")},v.prototype.onTrouterConnected=function(){this.state===p.Connecting?(this.setState(p.Connected),this.worker.resetTokenBackoff(),this.worker.stopConnectionTimer(),this.worker.sendUserActivityState(N.UserActivityEventReason.Connected,!0),this.worker.startPingTimer(),this.worker.dispatchConnected(),this.connectionErrors=0,this.worker.shouldSkipRegistration()?(this.connectedSubstate=R.NotRegistered,this.worker.dispatchRegistered()):(this.connectedSubstate=R.RetrievingToken,this.worker.getToken(!0,!1))):this.showIgnored("onTrouterConnected")},v.prototype.onReconnectRequired=function(){this.worker.dispatchReconnectIsRequired()},v.prototype.onDownstreamRequest=function(M){this.state===p.Connected?(this.switchToIncallModeIfEnabled(),this.worker.dispatchDownstreamRequest(M)):this.showIgnored("onDownstreamRequest")},v.prototype.onTrouterMessageLost=function(M){this.state===p.Connected?this.worker.dispatchTrouterMessageLost(M):this.showIgnored("onTrouterMessageLost")},v.prototype.onPingInterval=function(){this.state===p.Connected?this.worker.sendPingRequest():this.showIgnored("onPingInterval")},v.prototype.onPingResponseTimeout=function(){this.onMissedResponse("onPingResponseTimeout")},v.prototype.onPingResponse=function(){this.state===p.Connected||this.showIgnored("onPingResponse")},v.prototype.onRegistrationFailed=function(M){this.state===p.Connected&&this.connectedSubstate===R.Registering?(this.connectedSubstate=R.RetrievingToken,this.worker.getToken(!M,!0)):this.showIgnored("onRegistrationFailed")},v.prototype.onRegistrationSucceed=function(){this.state===p.Connected?(this.connectedSubstate===R.Registering&&(this.connectedSubstate=R.Registered,this.worker.dispatchRegistered()),this.worker.hasCustomRegisterTtl()&&this.worker.startRegisterTimer()):this.showIgnored("onRegistrationSucceed")},v.prototype.onRegistrationTimeout=function(){this.state===p.Connected&&this.connectedSubstate!==R.NotRegistered?(this.connectedSubstate=R.RetrievingToken,this.worker.getToken(!0,!1)):this.showIgnored("onRegistrationTimeout")},v.prototype.onUnregistrationFailed=function(M){this.state===p.Unregistering?(this.setState(p.UnregisteringRetrievingToken),this.worker.getToken(!M,!M)):this.showIgnored("onUnregistrationFailed")},v.prototype.onUnregistrationSucceed=function(){this.state===p.Unregistering?(this.setState(p.Initial),this.worker.dispatchUnregistered(),this.worker.dispatchDisconnected()):this.showIgnored("onUnregistrationSucceed")},v.prototype.onIncallModeTimer=function(){this.worker.exitIncallMode(),this.state===p.Connected?(this.worker.stopPingTimer(),this.worker.startPingTimer()):this.showIgnored("onIncallModeTimer")},v.prototype.onSetUserActivityState=function(M,A){A?(this.logger.info("Changing user activity state to '"+M.toEventJSON()+"'"),this.worker.sendUserActivityState(N.UserActivityEventReason.Modified,this.state===p.Connected)):this.logger.debug("Not changing the same user activity state '"+M.toEventJSON()+"'")},v.prototype.onActivityStateResponseTimeout=function(){this.onMissedResponse("onActivityStateResponseTimeout")},v.prototype.forceReconnect=function(){this.setState(p.RetrievingToken),this.worker.resetTokenBackoff(),this.worker.stopConnectionTimer(),this.worker.stopPingTimer(),this.worker.clearTimers(),this.worker.stopSocketIo(),this.worker.dispatchReconnecting(),this.worker.getToken(!0,!1)},v.prototype.onMissedResponse=function(M){this.state===p.Connected?(this.setState(p.RetrievingToken),this.worker.stopPingTimer(),this.worker.clearTimers(),this.worker.stopSocketIo(),this.worker.dispatchReconnecting(),this.worker.getToken(!0,!1)):this.showIgnored(M)},v.prototype.showIgnored=function(M){this.logger.debug("Ignoring event '"+M+"' in state '"+p[this.state]+"'")},v.prototype.setState=function(M){this.logger.info("Switching from state '"+p[this.state]+"' to state '"+p[M]+"'"),this.state!==M?this.state=M:this.logger.error("Attempt to switching into the current state '"+p[M]+"'")},v.prototype.resetAllocationIfNecessary=function(M){this.connectionErrors++,this.connectionErrors>=2||void 0!==M&&/^4\d\d /.test(M)?(this.logger.error("Connection error count is "+this.connectionErrors+" - will reset allocation"),this.connectionErrors=0):this.logger.info("Connection error count is "+this.connectionErrors+" - will NOT reset allocation")},v.prototype.isRegistered=function(){return this.connectedSubstate===R.Registered||this.connectedSubstate===R.Registering},v.prototype.switchToIncallModeIfEnabled=function(){this.incallModeEnabled&&(this.worker.isIncallMode()||(this.worker.enterIncallMode(),this.worker.stopPingTimer(),this.worker.startPingTimer()),this.worker.restartIncallModeTimer())},v}();L.TrouterFsm=u},function(Y,L,E){Object.defineProperty(L,"__esModule",{value:!0});var p=E(2),N=E(0),m=function(){function R(u,v){this.worker=v,this.state=p.TrouterState.Unknown,this.logger=new N.Logger("ManagerFsm",u)}return R.prototype.start=function(){this.state===p.TrouterState.Unknown?(this.setState(p.TrouterState.Disconnected),this.worker.forceStopLingeringConnection(),this.worker.startFirstConnection()):this.showIgnored("start")},R.prototype.stop=function(u){this.state!==p.TrouterState.Unknown?(this.setState(p.TrouterState.Unknown),this.worker.stopFirstConnection(!0===u),this.worker.stopSecondConnection(!0===u)):this.showIgnored("stop")},R.prototype.getState=function(){return this.state},R.prototype.onConnected=function(u){this.state===p.TrouterState.Disconnected&&u?this.worker.doesSecondConnectionExist()?this.setState(p.TrouterState.Switching):(this.setState(p.TrouterState.Connected),this.worker.dispatchConnected()):this.showIgnored("onConnected("+u+")")},R.prototype.onRegistered=function(u){this.state!==p.TrouterState.Disconnected||u?this.state!==p.TrouterState.Switching||u||(this.setState(p.TrouterState.Connected),this.worker.switchConnections(),this.worker.stopSecondConnectionDelayed(),this.worker.dispatchConnected()):(this.setState(p.TrouterState.Connected),this.worker.switchConnections(),this.worker.stopSecondConnection(!0),this.worker.dispatchConnected()),this.worker.dispatchRegistrationState(!0)},R.prototype.onUnregistered=function(u){u&&this.worker.dispatchRegistrationState(!1)},R.prototype.onReconnecting=function(u){this.state===p.TrouterState.Connected&&u||this.state===p.TrouterState.Switching&&u?(this.setState(p.TrouterState.Disconnected),this.worker.dispatchReconnecting()):this.showIgnored("onReconnecting("+u+")")},R.prototype.onReconnectionRequired=function(u){this.state===p.TrouterState.Connected&&u?(this.setState(p.TrouterState.Switching),this.worker.startSecondConnection()):this.state===p.TrouterState.Disconnected&&u?this.worker.startSecondConnection():this.showIgnored("onReconnectionRequired("+u+")")},R.prototype.onDisconnected=function(u){this.state===p.TrouterState.Unknown&&u?this.worker.dispatchStopped():this.showIgnored("onDisconnected("+u+")")},R.prototype.showIgnored=function(u){this.logger.info("Ignoring event '"+u+"' in state '"+p.TrouterState[this.state]+"'")},R.prototype.setState=function(u){this.logger.info("Switching from state '"+p.TrouterState[this.state]+"' to state '"+p.TrouterState[u]+"'"),this.state!==u?this.state=u:this.logger.error("Attempt to switching into the current state '"+p.TrouterState[u]+"'")},R}();L.TrouterManagerFsm=m},function(Y,L,E){function p(k,O){if(!O)return k;var V=v({},k,{enabled:O.TelemetryEnabled});return void 0!==O.ClientTelemetryEventEnabled&&(V=v({},V,O.ClientTelemetryEventEnabled)),V}function N(k,O){return{clientInfo:{ua:k.trouterSettings.productName,v:k.trouterSettings.version},ioOptions:{ackTimeoutMs:5e3},clientCorrelationID:k.trouterSettings.sessionId,environment:k.trouterSettings.environment,telemetrySettings:p(k.telemetryConfig.settings,O),eventLogger:k.telemetryConfig.eventLogger,endpointId:k.trouterSettings.registrationId,trouterUrl:O&&O.TrouterConnectionUrl||k.trouterSettings.trouterServiceUrl,registration:k.trouterSettings.registrarServiceUrl?{registrarUrl:k.trouterSettings.registrarServiceUrl,registrationId:k.trouterSettings.registrationId||"",pnhAppId:k.trouterSettings.pnhAppId||"",platform:k.trouterSettings.platform||"",pnhTemplateKey:k.trouterSettings.pnhTemplate||"",platformUIVersion:k.trouterSettings.platformUIVersion||"",productContext:k.trouterSettings.pnhProductContext||void 0,context:k.trouterSettings.pnhContext||"",registrarTtlSec:(k.trouterSettings.maxRegistrationTimeInMs||0)/1e3}:void 0,timeoutOptions:v({connectionTimeoutMs:k.trouterSettings.trouterConnectTimeoutInMs||3e4,fetchTimeoutMs:1e4,pingTimeoutMs:4e4,pongTimeoutMs:5e3,maxBackoffMs:3e4,requestTimeoutMs:5e3,userActivityResponseTimeoutMs:1e4},k.trouterSettings.timeoutOptions),incallTimeoutOptions:v({connectionTimeoutMs:1e4,fetchTimeoutMs:5e3,pingTimeoutMs:5e3,pongTimeoutMs:2e3,maxBackoffMs:1e4,requestTimeoutMs:5e3,userActivityResponseTimeoutMs:1e4},k.trouterSettings.incallTimeoutOptions),incallModeTimeoutMs:k.trouterSettings.incallModeTimeoutMs||0,lingeringConnectionDelayMs:6e4,userActivitySecondResendDelayMs:k.trouterSettings.userActivitySecondResendDelayMs||1e4,duplicateDisconnectThresholdMs:1e4,connectionCache:k.connectionCache,registrationStateCallback:k.registrationStateCallbackForAcsDoNotUse}}var v=this&&this.__assign||Object.assign||function(k){for(var O,V=1,U=arguments.length;V<U;V++)for(var B in O=arguments[V])Object.prototype.hasOwnProperty.call(O,B)&&(k[B]=O[B]);return k},M=this&&this.__awaiter||function(k,O,V,U){return new(V||(V=Promise))(function(B,H){function W(pe){try{$(U.next(pe))}catch(x){H(x)}}function te(pe){try{$(U.throw(pe))}catch(x){H(x)}}function $(pe){pe.done?B(pe.value):new V(function(x){x(pe.value)}).then(W,te)}$((U=U.apply(k,O||[])).next())})},A=this&&this.__generator||function(k,O){function V(pe){return function(x){return function(pe){if(B)throw new TypeError("Generator is already executing.");for(;$;)try{if(B=1,H&&(W=2&pe[0]?H.return:pe[0]?H.throw||((W=H.return)&&W.call(H),0):H.next)&&!(W=W.call(H,pe[1])).done)return W;switch(H=0,W&&(pe=[2&pe[0],W.value]),pe[0]){case 0:case 1:W=pe;break;case 4:return $.label++,{value:pe[1],done:!1};case 5:$.label++,H=pe[1],pe=[0];continue;case 7:pe=$.ops.pop(),$.trys.pop();continue;default:if(!(W=(W=$.trys).length>0&&W[W.length-1])&&(6===pe[0]||2===pe[0])){$=0;continue}if(3===pe[0]&&(!W||pe[1]>W[0]&&pe[1]<W[3])){$.label=pe[1];break}if(6===pe[0]&&$.label<W[1]){$.label=W[1],W=pe;break}if(W&&$.label<W[2]){$.label=W[2],$.ops.push(pe);break}W[2]&&$.ops.pop(),$.trys.pop();continue}pe=O.call(k,$)}catch(x){pe=[6,x],H=0}finally{B=W=0}if(5&pe[0])throw pe[1];return{value:pe[0]?pe[1]:void 0,done:!0}}([pe,x])}}var B,H,W,te,$={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return te={next:V(0),throw:V(1),return:V(2)},"function"==typeof Symbol&&(te[Symbol.iterator]=function(){return this}),te};Object.defineProperty(L,"__esModule",{value:!0});var T=E(1),g=E(2);L.TrouterState=g.TrouterState,L.UserActivityState=g.UserActivityState;var h=E(0),C=E(6),b=E(7),w=E(8),I=E(9),P=function(){function k(O){this.logProvider=O,this.stateChangedListeners=[],this.logger=new h.Logger("Trouter",O),this.trouterUrlPromise=new I.TrouterUrlPromise(O),this.messageHandlers=new C.MessageHandlerRegistry(O),this.listeners={},this.connectionInfo=null,this.logger.info("Created TrouterService version "+T.CLIENT_VERSION)}return k.prototype.start=function(O){this.logger.info("Start"),O.trouterSettings.disableInternalSkypeTokenCache||(O.skypeTokenProvider=b.addCacheAsBackupTo(O.skypeTokenProvider)),this.trouterCfg=O;var U=N(O,this.ecsCfg);void 0===this.trouterServer&&(this.trouterServer=new w.TrouterManager(this.logProvider,U,O.skypeTokenProvider,this)),this.trouterServer.start()},k.prototype.stop=function(O){this.logger.info("close connection"),this.trouterUrlPromise.rejectUrl(new Error("TrouterService is stopped")),void 0!==this.trouterServer&&this.trouterServer.stop(O)},k.prototype.setEcsConfig=function(O){return M(this,void 0,void 0,function(){var V=this;return A(this,function(U){return[2,new Promise(function(B,H){if(V.ecsCfg=O.TrouterJScriptClient,V.logger.info("Setting ECS configuration to "+JSON.stringify(V.ecsCfg)),void 0!==V.trouterServer&&void 0!==V.trouterCfg){var W=N(V.trouterCfg,V.ecsCfg);V.trouterServer.configure(W)}B()})]})})},k.prototype.checkConnection=function(O){void 0!==this.trouterServer&&this.trouterServer.checkConnection(O||!1)},k.prototype.resendRegistration=function(){return M(this,void 0,void 0,function(){return A(this,function(O){if(!this.trouterServer)throw new Error("resendRegistration called too early");return[2,this.trouterServer.resendRegistration()]})})},k.prototype.registerListener=function(O,V){return""===V||"/"!==V[0]||V.indexOf("?")>=0||V.indexOf("#")>=0?(this.logger.error("Listener path '"+V+"' is not valid"),!1):this.listeners[V]?(this.logger.error("Another listener is already registered for path '"+V+"'"),!1):(this.listeners[V]=O,this.logger.debug("Listener for path '"+V+"' registered"),this.connectionInfo&&O.onTrouterConnected(this.connectionInfo.baseEndpointUrl+V,this.connectionInfo),!0)},k.prototype.unregisterListener=function(O){for(var V=[],U=0,B=Object.keys(this.listeners);U<B.length;U++)this.listeners[H=B[U]]===O&&V.push(H);if(0===V.length)return!1;for(var W=0,te=V;W<te.length;W++){var H;delete this.listeners[H=te[W]]}return this.logger.debug("Listener for path(s) '"+V.join("', '")+"' unregistered"),!0},k.prototype.onTrouterConnected=function(O,V){this.logger.debug("Trouter is now connected");for(var U=0,B=Object.keys(this.listeners);U<B.length;U++){var H=B[U];try{this.listeners[H].onTrouterConnected(V.baseEndpointUrl+H,V)}catch(W){this.logger.error("Listener '"+H+"' threw an exception from onTrouterConnected(): "+W)}}this.connectionInfo=V,this.trouterUrlPromise.resolveUrl(O),this.notifyStateChanged(g.TrouterState.Connected,{url:O,getRemainingTtlInSec:function(){return V.connectionTtlSec}})},k.prototype.onTrouterDisconnected=function(){this.logger.debug("Trouter is now disconnected"),this.connectionInfo=null;for(var O=0,V=Object.keys(this.listeners);O<V.length;O++){var U=V[O],B=this.listeners[U];if(B.onTrouterDisconnected)try{B.onTrouterDisconnected()}catch(H){this.logger.error("Listener '"+U+"' threw an exception from onTrouterDisconnected(): "+H)}}this.notifyStateChanged(g.TrouterState.Disconnected)},k.prototype.onTrouterRequest=function(O,V){for(var U="",B=0,H=Object.keys(this.listeners);B<H.length;B++){var W=H[B];O.path.substring(0,W.length)===W&&W.length>U.length&&(U=W)}if(""===U)this.tryMessageHandlers(O,V)||(V.status=404,V.headers={"Trouter-Responder":"ClientLib"},V.send());else try{this.listeners[U].onTrouterRequest(O,V)}catch(te){this.logger.error("Listener '"+U+"' threw an exception from onTrouterRequest(): "+te),V.status=500,V.headers={"Trouter-Responder":"ClientLib"},V.send()}},k.prototype.onTrouterMessageLoss=function(O){this.logger.info("onTrouterMessageLoss called with value "+O);for(var V=!0,U=0,B=Object.keys(this.listeners);U<B.length;U++){var H=B[U],W=this.listeners[H];if(W.onTrouterMessageLoss)try{void 0===(V=W.onTrouterMessageLoss(O)&&V)&&(this.logger.error("Listener '"+H+"' did not response with boolean value onTrouterMessageLoss()"),V=!1)}catch(te){this.logger.error("Listener '"+H+"' threw an exception from onTrouterMessageLoss(): "+te),V=!1}}return V},k.prototype.onTrouterUserActivityStateAccepted=function(O){this.logger.debug("onTrouterUserActivityStateAccepted cv: "+O);for(var V=0,U=Object.keys(this.listeners);V<U.length;V++){var B=U[V],H=this.listeners[B];if(H.onTrouterUserActivityStateAccepted)try{H.onTrouterUserActivityStateAccepted(O)}catch(W){this.logger.error("Listener '"+B+"' threw an exception from onTrouterUserActivityStateAccepted(): "+W)}}},k.prototype.setUserActivityState=function(O,V){if(O!==g.UserActivityState.Active&&O!==g.UserActivityState.Inactive)throw new Error("setUserActivityState called with unsupported value "+O);if(this.logger.info("setUserActivityState called with value "+g.UserActivityState[O]),!this.trouterServer||this.state()===g.TrouterState.Unknown)throw new Error("setUserActivityState called too early");this.trouterServer.setUserActivityState(O,V)},k.prototype.state=function(){return void 0!==this.trouterServer?this.trouterServer.getState():g.TrouterState.Unknown},k.prototype.getServerState=function(){if(void 0!==this.trouterServer)return this.trouterServer.getServerState()},k.prototype.getTrouterUrlAsync=function(){return void 0!==this.trouterServer?this.trouterUrlPromise.getPromise():Promise.reject(new Error("TrouterService has not been started"))},k.prototype.onStateChanged=function(O){if(this.logger.info("onStateChanged called"),void 0===O)this.stateChangedListeners=this.stateChangedListeners.filter(function(U){return void 0===U.wrappedCallback});else{this.offStateChanged(O);var V=function(U,B){O(U,B?B.url:"")};V.wrappedCallback=O,this.stateChangedListeners.push(V)}},k.prototype.offStateChanged=function(O){this.logger.info("offStateChanged called");var V=this.stateChangedListeners.length;return this.stateChangedListeners=this.stateChangedListeners.filter(function(U){return U.wrappedCallback!==O}),V>this.stateChangedListeners.length},k.prototype.addCallback=function(O){this.logger.info("addListener called"),-1===this.stateChangedListeners.indexOf(O,0)&&void 0!==O&&this.stateChangedListeners.push(O)},k.prototype.removeCallback=function(O){this.logger.info("removeListener called");var V=this.stateChangedListeners.indexOf(O,0);return V>-1&&(this.stateChangedListeners.splice(V,1),!0)},k.prototype.registerMessageHandler=function(O){this.logger.info("registerMessageHandler is called"),this.messageHandlers.register(O)},k.prototype.clearMessageHandlers=function(){this.logger.info("clearMessageHandlers is called"),this.messageHandlers.clear()},k.prototype.notifyStateChanged=function(O,V){var U=this;this.logger.info("notifyStateChanged called, will forward to "+this.stateChangedListeners.length+" listeners"),this.stateChangedListeners.forEach(function(B){try{B(O,V)}catch(H){U.logger.error("Error in callback "+H)}})},k.prototype.tryMessageHandlers=function(O,V){if(!this.messageHandlers.active())return!1;var U,B=null;try{B=(U=JSON.parse(O.body))&&(U.evt||U.eventId)||null}catch(te){}var W=this.messageHandlers.handleMessage({eventId:B,url:(this.connectionInfo?this.connectionInfo.baseEndpointUrl:"")+O.path,body:U,rawBody:O.body,headers:O.headers});return!!W.isHandled&&(V.status=W.resultCode,W.responseHeaders&&(V.headers=W.responseHeaders),W.responseBody&&(V.body=W.responseBody),V.send(),!0)},k}();L.TrouterService=P,L.createTrouterService=function(k){return new P(k)},L.getTrouterServiceVersion=function(){return T.CLIENT_VERSION},L.replaceTrouterUrlBase=function(k,O){var V=k.indexOf("://");if(V>=0){var U=k.indexOf("/",V+3);if(U>=0)return O+k.substr(U)}return""}},function(Y,L){Y.exports=__WEBPACK_EXTERNAL_MODULE_20__},function(Y,L){}])},module.exports=L(tsregistrar)});unwrapExports(tstrouter);var constants=createCommonjsModule(function(Y,L){var N;L.__esModule=!0,L.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES=3,L.GCCHIGH_TROUTER_SERVICE_URL="https://go.trouter.gov.teams.microsoft.us/v4/a",L.GCCHIGH_REGISTRAR_SERVICE_URL="https://registrar.gov.teams.microsoft.us/V3/registrations",L.DOD_TROUTER_SERVICE_URL="https://go.trouter.dod.teams.microsoft.us/v4/a",L.DOD_REGISTRAR_SERVICE_URL="https://registrar.dod.teams.microsoft.us/V3/registrations",L.INT_TROUTER_SERVICE_URL="https://go.trouter-int.skype.net/v4/a",L.INT_REGISTRAR_SERVICE_URL="https://edge.skype.net/registrar/testenv/v3/registrations",L.PUBLIC_TROUTER_SERVICE_URL="https://go.trouter.skype.com/v4/a",L.PUBLIC_REGISTRAR_SERVICE_URL="https://edge.skype.com/registrar/prod/v3/registrations",(N=L.CloudType||(L.CloudType={})).Public="Public",N.GccHigh="GCC High",N.Dod="DoD",function(N){N.OrgId="orgid",N.Acs="acs",N.Spool="spool",N.GccHigh="gcch",N.GccHighAcs="gcch-acs",N.Dod="dod",N.DodAcs="dod-acs"}(L.CloudPrefix||(L.CloudPrefix={}))});unwrapExports(constants);var constants_1=constants.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES,constants_2=constants.GCCHIGH_TROUTER_SERVICE_URL,constants_3=constants.GCCHIGH_REGISTRAR_SERVICE_URL,constants_4=constants.DOD_TROUTER_SERVICE_URL,constants_5=constants.DOD_REGISTRAR_SERVICE_URL,constants_6=constants.INT_TROUTER_SERVICE_URL,constants_7=constants.INT_REGISTRAR_SERVICE_URL,constants_8=constants.PUBLIC_TROUTER_SERVICE_URL,constants_9=constants.PUBLIC_REGISTRAR_SERVICE_URL,constants_10=constants.CloudType,constants_11=constants.CloudPrefix,TrouterUtils=createCommonjsModule(function(Y,L){var E=commonjsGlobal&&commonjsGlobal.__awaiter||function(P,k,O,V){return new(O||(O=Promise))(function(B,H){function W(pe){try{$(V.next(pe))}catch(x){H(x)}}function te(pe){try{$(V.throw(pe))}catch(x){H(x)}}function $(pe){pe.done?B(pe.value):function(B){return B instanceof O?B:new O(function(H){H(B)})}(pe.value).then(W,te)}$((V=V.apply(P,k||[])).next())})},p=commonjsGlobal&&commonjsGlobal.__generator||function(P,k){var V,U,B,H,O={label:0,sent:function(){if(1&B[0])throw B[1];return B[1]},trys:[],ops:[]};return H={next:W(0),throw:W(1),return:W(2)},"function"==typeof Symbol&&(H[Symbol.iterator]=function(){return this}),H;function W($){return function(pe){return function($){if(V)throw new TypeError("Generator is already executing.");for(;O;)try{if(V=1,U&&(B=2&$[0]?U.return:$[0]?U.throw||((B=U.return)&&B.call(U),0):U.next)&&!(B=B.call(U,$[1])).done)return B;switch(U=0,B&&($=[2&$[0],B.value]),$[0]){case 0:case 1:B=$;break;case 4:return O.label++,{value:$[1],done:!1};case 5:O.label++,U=$[1],$=[0];continue;case 7:$=O.ops.pop(),O.trys.pop();continue;default:if(!(B=(B=O.trys).length>0&&B[B.length-1])&&(6===$[0]||2===$[0])){O=0;continue}if(3===$[0]&&(!B||$[1]>B[0]&&$[1]<B[3])){O.label=$[1];break}if(6===$[0]&&O.label<B[1]){O.label=B[1],B=$;break}if(B&&O.label<B[2]){O.label=B[2],O.ops.push($);break}B[2]&&O.ops.pop(),O.trys.pop();continue}$=k.call(P,O)}catch(pe){$=[6,pe],U=0}finally{V=B=0}if(5&$[0])throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}([$,pe])}}};L.__esModule=!0;var N=new Map([["chatMessageReceived",200],["typingIndicatorReceived",245],["readReceiptReceived",246],["chatMessageEdited",247],["chatMessageDeleted",248],["chatThreadCreated",257],["chatThreadPropertiesUpdated",258],["chatThreadDeleted",259],["participantsAdded",260],["participantsRemoved",261]]),m="8:orgid:",R="8:dod:",u="8:gcch:",v="8:teamsvisitor:";L.toMessageHandler=function(P,k){var O=N.get(P);return{handleMessage:function(V){var U=null;if((null==V?void 0:V.rawBody)&&(U=JSON.parse(V.rawBody)),null!==U&&U.eventId===O){var B=g(P,U);if(null!==B)return k(B),{isHandled:!0,resultCode:200}}}}};var g=function(P,k){if("chatMessageReceived"===P)return{threadId:(O=k).groupId,sender:h(O.senderId),senderDisplayName:O.senderDisplayName,recipient:h(O.recipientMri),id:O.messageId,createdOn:new Date(O.originalArrivalTime),version:O.version,type:O.messageType,message:O.messageBody,metadata:C(O.acsChatMessageMetadata)};if("chatMessageEdited"===P)return{threadId:(O=k).groupId,sender:h(O.senderId),senderDisplayName:O.senderDisplayName,recipient:h(O.recipientMri),id:O.messageId,createdOn:new Date(O.originalArrivalTime),version:O.version,message:O.messageBody,editedOn:new Date(O.edittime),type:O.messageType,metadata:C(O.acsChatMessageMetadata)};if("chatMessageDeleted"===P)return{threadId:(O=k).groupId,sender:h(O.senderId),senderDisplayName:O.senderDisplayName,recipient:h(O.recipientMri),id:O.messageId,createdOn:new Date(O.originalArrivalTime),version:O.version,deletedOn:new Date(O.deletetime),type:O.messageType};if("typingIndicatorReceived"===P)return{threadId:(O=k).groupId,sender:h(O.senderId),senderDisplayName:O.senderDisplayName,recipient:h(O.recipientMri),version:O.version,receivedOn:new Date(O.originalArrivalTime)};if("readReceiptReceived"===P){var O=k,B=JSON.parse(O.messageBody).consumptionhorizon.split(";");return{threadId:O.groupId,sender:h(O.senderId),senderDisplayName:"",recipient:h(O.recipientMri),chatMessageId:O.messageId,readOn:new Date(+B[1])}}if("chatThreadCreated"===P){O=k;var H=JSON.parse(unescape(O.createdBy)),W=JSON.parse(unescape(O.members)),te=JSON.parse(unescape(O.properties)),$={id:h(H.participantId),displayName:H.displayName},pe=W.map(function(q){return{id:h(q.participantId),displayName:q.displayName}});return{threadId:O.threadId,createdOn:new Date(O.createTime),createdBy:$,version:O.version,participants:pe,properties:te}}if("chatThreadPropertiesUpdated"===P){O=k;var x=JSON.parse(unescape(O.editedBy)),r=(te=JSON.parse(unescape(O.properties)),{id:h(x.participantId),displayName:x.displayName});return{threadId:O.threadId,updatedOn:new Date(O.editTime),updatedBy:r,version:O.version,properties:te}}if("chatThreadDeleted"===P){O=k;var s=JSON.parse(unescape(O.deletedBy)),l={id:h(s.participantId),displayName:s.displayName};return{threadId:O.threadId,deletedOn:new Date(O.deleteTime),deletedBy:l,version:O.version}}if("participantsAdded"===P){O=k;var a=JSON.parse(unescape(O.addedBy)),f=JSON.parse(unescape(O.participantsAdded)),_={id:h(a.participantId),displayName:a.displayName};return pe=f.map(function(Z){return{id:h(Z.participantId),displayName:Z.displayName,shareHistoryTime:new Date(Z.shareHistoryTime)}}),{threadId:O.threadId,addedOn:new Date(O.time),addedBy:_,version:O.version,participantsAdded:pe}}if("participantsRemoved"===P){O=k;var D=JSON.parse(unescape(O.removedBy)),d=JSON.parse(unescape(O.participantsRemoved)),i={id:h(D.participantId),displayName:D.displayName};return pe=d.map(function(Z){return{id:h(Z.participantId),displayName:Z.displayName,shareHistoryTime:new Date(Z.shareHistoryTime)}}),{threadId:O.threadId,removedOn:new Date(O.time),removedBy:i,version:O.version,participantsRemoved:pe}}return null};L.toLogProvider=function(P){return{log:function(){for(var k=[],O=0;O<arguments.length;O++)k[O]=arguments[O];return P.info(k)},warn:function(){for(var k=[],O=0;O<arguments.length;O++)k[O]=arguments[O];return P.warning(k)},error:function(){for(var k=[],O=0;O<arguments.length;O++)k[O]=arguments[O];return P.error(k)},debug:function(){for(var k=[],O=0;O<arguments.length;O++)k[O]=arguments[O];return P.verbose(k)},info:function(){for(var k=[],O=0;O<arguments.length;O++)k[O]=arguments[O];return P.verbose(k)}}},L.toTelemetrySender=function(P){return{logEvent:function(k){return P.info(k)}}};var h=function(P){return P.startsWith(m)?{kind:"microsoftTeamsUser",rawId:P,microsoftTeamsUserId:P.substring(m.length),isAnonymous:!1,cloud:"public"}:P.startsWith(R)?{kind:"microsoftTeamsUser",rawId:P,microsoftTeamsUserId:P.substring(R.length),isAnonymous:!1,cloud:"dod"}:P.startsWith(u)?{kind:"microsoftTeamsUser",rawId:P,microsoftTeamsUserId:P.substring(u.length),isAnonymous:!1,cloud:"gcch"}:P.startsWith(v)?{kind:"microsoftTeamsUser",rawId:P,microsoftTeamsUserId:P.substring(v.length),isAnonymous:!0}:P.startsWith("4:")?{kind:"phoneNumber",rawId:P,phoneNumber:P.substring("4:".length)}:P.startsWith("8:acs:")||P.startsWith("8:spool:")?{kind:"communicationUser",communicationUserId:P}:{kind:"unknown",id:P}},C=function(P){return null==P||""===P||"null"===P?{}:JSON.parse(P)};function b(P){return coreHttp.isNode?Buffer.from(P,"base64").toString():atob(P)}function I(P){switch(P.substring(0,P.indexOf(":"))){case constants.CloudPrefix.OrgId:case constants.CloudPrefix.Acs:case constants.CloudPrefix.Spool:return constants.CloudType.Public;case constants.CloudPrefix.GccHigh:case constants.CloudPrefix.GccHighAcs:return constants.CloudType.GccHigh;case constants.CloudPrefix.Dod:case constants.CloudPrefix.DodAcs:return constants.CloudType.Dod;default:return constants.CloudType.Public}}L.base64decode=b,L.getCloudTypeFromCredential=function(P){return E(void 0,void 0,void 0,function(){var k;return p(this,function(B){switch(B.label){case 0:return[4,P.getToken()];case 1:return k=B.sent(),[2,I(function(P){var O=(null==P?void 0:P.split("."))[1];if(void 0===O)throw new Error("Invalid token");return O=O.replace(/-/g,"+").replace(/_/g,"/"),JSON.parse(decodeURIComponent(escape(b(O))))}(null==k?void 0:k.token).skypeid)]}})})}});unwrapExports(TrouterUtils);var TrouterUtils_1=TrouterUtils.toMessageHandler,TrouterUtils_2=TrouterUtils.toLogProvider,TrouterUtils_3=TrouterUtils.toTelemetrySender,TrouterUtils_4=TrouterUtils.base64decode,TrouterUtils_5=TrouterUtils.getCloudTypeFromCredential,TrouterSettings=createCommonjsModule(function(Y,L){var E=commonjsGlobal&&commonjsGlobal.__awaiter||function(M,A,T,g){return new(T||(T=Promise))(function(C,b){function w(k){try{P(g.next(k))}catch(O){b(O)}}function I(k){try{P(g.throw(k))}catch(O){b(O)}}function P(k){k.done?C(k.value):function(C){return C instanceof T?C:new T(function(b){b(C)})}(k.value).then(w,I)}P((g=g.apply(M,A||[])).next())})},p=commonjsGlobal&&commonjsGlobal.__generator||function(M,A){var g,h,C,b,T={label:0,sent:function(){if(1&C[0])throw C[1];return C[1]},trys:[],ops:[]};return b={next:w(0),throw:w(1),return:w(2)},"function"==typeof Symbol&&(b[Symbol.iterator]=function(){return this}),b;function w(P){return function(k){return function(P){if(g)throw new TypeError("Generator is already executing.");for(;T;)try{if(g=1,h&&(C=2&P[0]?h.return:P[0]?h.throw||((C=h.return)&&C.call(h),0):h.next)&&!(C=C.call(h,P[1])).done)return C;switch(h=0,C&&(P=[2&P[0],C.value]),P[0]){case 0:case 1:C=P;break;case 4:return T.label++,{value:P[1],done:!1};case 5:T.label++,h=P[1],P=[0];continue;case 7:P=T.ops.pop(),T.trys.pop();continue;default:if(!(C=(C=T.trys).length>0&&C[C.length-1])&&(6===P[0]||2===P[0])){T=0;continue}if(3===P[0]&&(!C||P[1]>C[0]&&P[1]<C[3])){T.label=P[1];break}if(6===P[0]&&T.label<C[1]){T.label=C[1],C=P;break}if(C&&T.label<C[2]){T.label=C[2],T.ops.push(P);break}C[2]&&T.ops.pop(),T.trys.pop();continue}P=A.call(M,T)}catch(k){P=[6,k],h=0}finally{g=C=0}if(5&P[0])throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}([P,k])}}};L.__esModule=!0;var N={version:"1.0.0",registrationId:"",sessionId:"",pnhAppId:"AcsWeb",pnhTemplate:"AcsWeb_Chat_1.2",platform:"SPOOL",platformUIVersion:"0.0.0",environment:"",productName:"acs-chat-web",trouterServiceUrl:constants.PUBLIC_TROUTER_SERVICE_URL,registrarServiceUrl:constants.PUBLIC_REGISTRAR_SERVICE_URL,registrarRefreshTimeoutInMs:35e4,timeoutOptions:{connectionTimeoutMs:2e4,fetchTimeoutMs:1e4,pingTimeoutMs:4e4,pongTimeoutMs:5e3,maxBackoffMs:5e4,requestTimeoutMs:5e3},maxRegistrationTimeInMs:72e5},m=function(){var M=N;return M.registrationId=coreHttp.generateUuid(),M.sessionId=coreHttp.generateUuid(),M};L.createSettings=function(M,A){return E(void 0,void 0,void 0,function(){var T,g,h;return p(this,function(C){switch(C.label){case 0:return"INT"!==(null==A?void 0:A.environment)?[3,1]:(T=function(){var M=m();return M.pnhAppId="cns-e2e-test",M.pnhTemplate="cns-e2e-test:1.2",M.registrarServiceUrl=constants.INT_REGISTRAR_SERVICE_URL,M.trouterServiceUrl=constants.INT_TROUTER_SERVICE_URL,M}(),[3,3]);case 1:return[4,TrouterUtils.getCloudTypeFromCredential(M)];case 2:g=C.sent(),T=g===constants.CloudType.GccHigh?function(){var M=m();return M.registrarServiceUrl=constants.GCCHIGH_REGISTRAR_SERVICE_URL,M.trouterServiceUrl=constants.GCCHIGH_TROUTER_SERVICE_URL,M}():g===constants.CloudType.Dod?function(){var M=m();return M.registrarServiceUrl=constants.DOD_REGISTRAR_SERVICE_URL,M.trouterServiceUrl=constants.DOD_TROUTER_SERVICE_URL,M}():m(),C.label=3;case 3:return T.maxRegistrationTimeInMs=null!==(h=null==A?void 0:A.registrationTimeInMs)&&void 0!==h?h:N.maxRegistrationTimeInMs,[2,T]}})})},L.defaultTelemetrySettings={enabled:!1}});unwrapExports(TrouterSettings);var TrouterSettings_1=TrouterSettings.createSettings,TrouterSettings_2=TrouterSettings.defaultTelemetrySettings,SignalingClient=createCommonjsModule(function(Y,L){var R,E=commonjsGlobal&&commonjsGlobal.__awaiter||function(R,u,v,M){return new(v||(v=Promise))(function(T,g){function h(w){try{b(M.next(w))}catch(I){g(I)}}function C(w){try{b(M.throw(w))}catch(I){g(I)}}function b(w){w.done?T(w.value):function(T){return T instanceof v?T:new v(function(g){g(T)})}(w.value).then(h,C)}b((M=M.apply(R,u||[])).next())})},p=commonjsGlobal&&commonjsGlobal.__generator||function(R,u){var M,A,T,g,v={label:0,sent:function(){if(1&T[0])throw T[1];return T[1]},trys:[],ops:[]};return g={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function h(b){return function(w){return function(b){if(M)throw new TypeError("Generator is already executing.");for(;v;)try{if(M=1,A&&(T=2&b[0]?A.return:b[0]?A.throw||((T=A.return)&&T.call(A),0):A.next)&&!(T=T.call(A,b[1])).done)return T;switch(A=0,T&&(b=[2&b[0],T.value]),b[0]){case 0:case 1:T=b;break;case 4:return v.label++,{value:b[1],done:!1};case 5:v.label++,A=b[1],b=[0];continue;case 7:b=v.ops.pop(),v.trys.pop();continue;default:if(!(T=(T=v.trys).length>0&&T[T.length-1])&&(6===b[0]||2===b[0])){v=0;continue}if(3===b[0]&&(!T||b[1]>T[0]&&b[1]<T[3])){v.label=b[1];break}if(6===b[0]&&v.label<T[1]){v.label=T[1],T=b;break}if(T&&v.label<T[2]){v.label=T[2],v.ops.push(b);break}T[2]&&v.ops.pop(),v.trys.pop();continue}b=u.call(R,v)}catch(w){b=[6,w],A=0}finally{M=T=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([b,w])}}};L.__esModule=!0,(R=L.ConnectionState||(L.ConnectionState={}))[R.Unknown=0]="Unknown",R[R.Connected=2]="Connected",R[R.Disconnected=3]="Disconnected",R[R.Switching=9]="Switching";var m=function(){function R(u,v,M){this.credential=u,this.logger=v,this.options=M,this.stateChangedListener=null,this.tokenFetchRetries=0,this.trouter=tstrouter.createTrouterService(TrouterUtils.toLogProvider(v))}return R.prototype.start=function(){return E(this,void 0,void 0,function(){var u,v,M=this;return p(this,function(A){switch(A.label){case 0:return void 0!==this.config?[3,2]:(u=this,v={},[4,TrouterSettings.createSettings(this.credential,this.options)]);case 1:u.config=(v.trouterSettings=A.sent(),v.skypeTokenProvider=function(T){return E(M,void 0,void 0,function(){var g,h;return p(this,function(C){switch(C.label){case 0:return T?(this.tokenFetchRetries+=1,this.tokenFetchRetries>constants.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES?[4,this.stop(!0)]:[3,2]):[3,3];case 1:throw C.sent(),new Error("Access token is expired and failed to fetch a valid one after "+constants.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES+" retries");case 2:return[3,4];case 3:this.tokenFetchRetries=0,C.label=4;case 4:return h=(g=Promise).resolve,[4,this.credential.getToken()];case 5:return[2,h.apply(g,[C.sent().token])]}})})},v.telemetryConfig={eventLogger:TrouterUtils.toTelemetrySender(this.logger),settings:TrouterSettings.defaultTelemetrySettings},v),A.label=2;case 2:return this.trouter.start(this.config),this.trouter.setUserActivityState(tstrouter.UserActivityState.Active),[2]}})})},R.prototype.stop=function(u){return E(this,void 0,void 0,function(){return p(this,function(v){return this.trouter.offStateChanged(this.stateChangedListener),this.trouter.clearMessageHandlers(),this.trouter.stop(null!=u?u:this.tokenFetchRetries>constants.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES),[2]})})},R.prototype.on=function(u,v){if("connectionChanged"===u)return this.trouter.offStateChanged(this.stateChangedListener),this.stateChangedListener=function(M,A){return v(M)},void this.trouter.onStateChanged(this.stateChangedListener);this.trouter.registerMessageHandler(TrouterUtils.toMessageHandler(u,v))},R}();L.CommunicationSignalingClient=m});unwrapExports(SignalingClient);var SignalingClient_1=SignalingClient.ConnectionState,SignalingClient_2=SignalingClient.CommunicationSignalingClient,src=createCommonjsModule(function(Y,L){L.__esModule=!0,function(p){for(var N in p)L.hasOwnProperty(N)||(L[N]=p[N])}(SignalingClient)}),index=unwrapExports(src);module.exports=index},434:(Y,L,E)=>{"use strict";function p(N){return N&&"function"==typeof N.getToken&&(void 0===N.signRequest||N.getToken.length>0)}E.d(L,{c:()=>p})},1138:(Y,L,E)=>{"use strict";E.d(L,{M:()=>p});var p=(()=>{return(N=p||(p={}))[N.OFF=0]="OFF",N[N.ERROR=1]="ERROR",N[N.WARNING=2]="WARNING",N[N.INFO=3]="INFO",p;var N})()},8003:(Y,L,E)=>{"use strict";function p(ve){return ve.toLowerCase()}function N(ve){if(ve&&"object"==typeof ve){const Q=ve;if("function"==typeof Q.rawHeaders&&"function"==typeof Q.clone&&"function"==typeof Q.get&&"function"==typeof Q.set&&"function"==typeof Q.contains&&"function"==typeof Q.remove&&"function"==typeof Q.headersArray&&"function"==typeof Q.headerValues&&"function"==typeof Q.headerNames&&"function"==typeof Q.toJson)return!0}return!1}E.r(L),E.d(L,{AccessTokenRefresher:()=>Fi,ApiKeyCredentials:()=>ws,BaseRequestPolicy:()=>Ee.U,BasicAuthenticationCredentials:()=>Aa,Constants:()=>hn.g,DefaultHttpClient:()=>oe,ExpiringAccessTokenCache:()=>so,HttpHeaders:()=>m,HttpPipelineLogLevel:()=>J.M,MapperType:()=>y,QueryCollectionFormat:()=>Ur,RequestPolicyOptions:()=>Ee._,RestError:()=>Ce,RetryMode:()=>Jt,Serializer:()=>T,ServiceClient:()=>xn,TopicCredentials:()=>ao,URLBuilder:()=>ge.UK,URLQuery:()=>ge.$4,WebResource:()=>q,XML_ATTRKEY:()=>A.c,XML_CHARKEY:()=>A.I,applyMixins:()=>M.ef,bearerTokenAuthenticationPolicy:()=>$r.v,createPipelineFromOptions:()=>Wn,createSpanFunction:()=>ei,delay:()=>gn.g,deserializationPolicy:()=>Ke,deserializeResponseBody:()=>kt,disableResponseDecompressionPolicy:()=>xa,encodeUri:()=>M.Hh,executePromisesSequentially:()=>M.Zf,exponentialRetryPolicy:()=>_n,flattenResponse:()=>Xr,generateClientRequestIdPolicy:()=>br,generateUuid:()=>M.Rl,getDefaultProxySettings:()=>vs,getDefaultUserAgentValue:()=>Co,isDuration:()=>M._9,isNode:()=>M.UG,isTokenCredential:()=>Oi.c,isValidUuid:()=>M.TP,keepAlivePolicy:()=>ze,logPolicy:()=>Rt,operationOptionsToRequestOptionsBase:()=>Ae,parseXML:()=>He,promiseToCallback:()=>M._Q,promiseToServiceCallback:()=>M.yj,proxyPolicy:()=>fn,redirectPolicy:()=>Yt,serializeObject:()=>d,signingPolicy:()=>ys,stringifyXML:()=>it,stripRequest:()=>M.Fl,stripResponse:()=>M.eg,systemErrorRetryPolicy:()=>zo,throttlingRetryPolicy:()=>Eo,tracingPolicy:()=>xt,userAgentPolicy:()=>Ht});class m{constructor(Q){if(this._headersMap={},Q)for(const ne in Q)this.set(ne,Q[ne])}set(Q,ne){this._headersMap[p(Q)]={name:Q,value:ne.toString()}}get(Q){const ne=this._headersMap[p(Q)];return ne?ne.value:void 0}contains(Q){return!!this._headersMap[p(Q)]}remove(Q){const ne=this.contains(Q);return delete this._headersMap[p(Q)],ne}rawHeaders(){return this.toJson({preserveCase:!0})}headersArray(){const Q=[];for(const ne in this._headersMap)Q.push(this._headersMap[ne]);return Q}headerNames(){const Q=[],ne=this.headersArray();for(let be=0;be<ne.length;++be)Q.push(ne[be].name);return Q}headerValues(){const Q=[],ne=this.headersArray();for(let be=0;be<ne.length;++be)Q.push(ne[be].value);return Q}toJson(Q={}){const ne={};if(Q.preserveCase)for(const be in this._headersMap){const Re=this._headersMap[be];ne[Re.name]=Re.value}else for(const be in this._headersMap){const Re=this._headersMap[be];ne[p(Re.name)]=Re.value}return ne}toString(){return JSON.stringify(this.toJson({preserveCase:!0}))}clone(){const Q={};for(const ne in this._headersMap){const be=this._headersMap[ne];Q[be.name]=be.value}return new m(Q)}}function u(ve){let Q="";for(let ne=0;ne<ve.length;ne++)Q+=String.fromCharCode(ve[ne]);return btoa(Q)}function v(ve){const Q=atob(ve),ne=new Uint8Array(Q.length);for(let be=0;be<Q.length;be++)ne[be]=Q.charCodeAt(be);return ne}var M=E(7694),A=E(4510);class T{constructor(Q={},ne){this.modelMappers=Q,this.isXML=ne}validateConstraints(Q,ne,be){const Re=(je,tt)=>{throw new Error(`"${be}" with value "${ne}" should satisfy the constraint "${je}": ${tt}.`)};if(Q.constraints&&null!=ne){const je=ne,{ExclusiveMaximum:tt,ExclusiveMinimum:gt,InclusiveMaximum:yt,InclusiveMinimum:vt,MaxItems:bt,MaxLength:Nt,MinItems:Pt,MinLength:Dt,MultipleOf:vn,Pattern:dn,UniqueItems:zt}=Q.constraints;null!=tt&&je>=tt&&Re("ExclusiveMaximum",tt),null!=gt&&je<=gt&&Re("ExclusiveMinimum",gt),null!=yt&&je>yt&&Re("InclusiveMaximum",yt),null!=vt&&je<vt&&Re("InclusiveMinimum",vt);const Ut=ne;if(null!=bt&&Ut.length>bt&&Re("MaxItems",bt),null!=Nt&&Ut.length>Nt&&Re("MaxLength",Nt),null!=Pt&&Ut.length<Pt&&Re("MinItems",Pt),null!=Dt&&Ut.length<Dt&&Re("MinLength",Dt),null!=vn&&je%vn!=0&&Re("MultipleOf",vn),dn){const Bn="string"==typeof dn?new RegExp(dn):dn;("string"!=typeof ne||null===ne.match(Bn))&&Re("Pattern",dn)}zt&&Ut.some((Bn,pr,nr)=>nr.indexOf(Bn)!==pr)&&Re("UniqueItems",zt)}}serialize(Q,ne,be,Re={}){var je,tt,gt;const yt={rootName:null!==(je=Re.rootName)&&void 0!==je?je:"",includeRoot:null!==(tt=Re.includeRoot)&&void 0!==tt&&tt,xmlCharKey:null!==(gt=Re.xmlCharKey)&&void 0!==gt?gt:A.I};let vt={};const bt=Q.type.name;be||(be=Q.serializedName),null!==bt.match(/^Sequence$/i)&&(vt=[]),Q.isConstant&&(ne=Q.defaultValue);const{required:Nt,nullable:Pt}=Q;if(Nt&&Pt&&void 0===ne)throw new Error(`${be} cannot be undefined.`);if(Nt&&!Pt&&null==ne)throw new Error(`${be} cannot be null or undefined.`);if(!Nt&&!1===Pt&&null===ne)throw new Error(`${be} cannot be null.`);return null==ne||null!==bt.match(/^any$/i)?vt=ne:null!==bt.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)?vt=function(ve,Q,ne){if(null!=ne)if(null!==ve.match(/^Number$/i)){if("number"!=typeof ne)throw new Error(`${Q} with value ${ne} must be of type number.`)}else if(null!==ve.match(/^String$/i)){if("string"!=typeof ne.valueOf())throw new Error(`${Q} with value "${ne}" must be of type string.`)}else if(null!==ve.match(/^Uuid$/i)){if("string"!=typeof ne.valueOf()||!M.TP(ne))throw new Error(`${Q} with value "${ne}" must be of type string and a valid uuid.`)}else if(null!==ve.match(/^Boolean$/i)){if("boolean"!=typeof ne)throw new Error(`${Q} with value ${ne} must be of type boolean.`)}else if(null!==ve.match(/^Stream$/i)){const be=typeof ne;if(!("string"===be||"function"===be||ne instanceof ArrayBuffer||ArrayBuffer.isView(ne)||("function"==typeof Blob||"object"==typeof Blob)&&ne instanceof Blob))throw new Error(`${Q} must be a string, Blob, ArrayBuffer, ArrayBufferView, or a function returning NodeJS.ReadableStream.`)}return ne}(bt,be,ne):null!==bt.match(/^Enum$/i)?vt=function(ve,Q,ne){if(!Q)throw new Error(`Please provide a set of allowedValues to validate ${ve} as an Enum Type.`);if(!Q.some(Re=>"string"==typeof Re.valueOf()?Re.toLowerCase()===ne.toLowerCase():Re===ne))throw new Error(`${ne} is not a valid value for ${ve}. The valid values are: ${JSON.stringify(Q)}.`);return ne}(be,Q.type.allowedValues,ne):null!==bt.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)?vt=function(ve,Q,ne){if(null!=Q)if(null!==ve.match(/^Date$/i)){if(!(Q instanceof Date||"string"==typeof Q.valueOf()&&!isNaN(Date.parse(Q))))throw new Error(`${ne} must be an instanceof Date or a string in ISO8601 format.`);Q=Q instanceof Date?Q.toISOString().substring(0,10):new Date(Q).toISOString().substring(0,10)}else if(null!==ve.match(/^DateTime$/i)){if(!(Q instanceof Date||"string"==typeof Q.valueOf()&&!isNaN(Date.parse(Q))))throw new Error(`${ne} must be an instanceof Date or a string in ISO8601 format.`);Q=Q instanceof Date?Q.toISOString():new Date(Q).toISOString()}else if(null!==ve.match(/^DateTimeRfc1123$/i)){if(!(Q instanceof Date||"string"==typeof Q.valueOf()&&!isNaN(Date.parse(Q))))throw new Error(`${ne} must be an instanceof Date or a string in RFC-1123 format.`);Q=Q instanceof Date?Q.toUTCString():new Date(Q).toUTCString()}else if(null!==ve.match(/^UnixTime$/i)){if(!(Q instanceof Date||"string"==typeof Q.valueOf()&&!isNaN(Date.parse(Q))))throw new Error(`${ne} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);Q=function(ve){if(ve)return"string"==typeof ve.valueOf()&&(ve=new Date(ve)),Math.floor(ve.getTime()/1e3)}(Q)}else if(null!==ve.match(/^TimeSpan$/i)&&!M._9(Q))throw new Error(`${ne} must be a string in ISO 8601 format. Instead was "${Q}".`);return Q}(bt,ne,be):null!==bt.match(/^ByteArray$/i)?vt=function(ve,Q){let ne="";if(null!=Q){if(!(Q instanceof Uint8Array))throw new Error(`${ve} must be of type Uint8Array.`);ne=u(Q)}return ne}(be,ne):null!==bt.match(/^Base64Url$/i)?vt=function(ve,Q){let ne="";if(null!=Q){if(!(Q instanceof Uint8Array))throw new Error(`${ve} must be of type Uint8Array.`);ne=function(ve){if(ve){if(!(ve instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");return function(ve,Q){let ne=ve.length;for(;ne-1>=0&&"="===ve[ne-1];)--ne;return ve.substr(0,ne)}(u(ve)).replace(/\+/g,"-").replace(/\//g,"_")}}(Q)||""}return ne}(be,ne):null!==bt.match(/^Sequence$/i)?vt=function(ve,Q,ne,be,Re,je){if(!Array.isArray(ne))throw new Error(`${be} must be of type Array.`);const tt=Q.type.element;if(!tt||"object"!=typeof tt)throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${be}.`);const gt=[];for(let yt=0;yt<ne.length;yt++){const vt=ve.serialize(tt,ne[yt],be,je);if(Re&&tt.xmlNamespace){const bt=tt.xmlNamespacePrefix?`xmlns:${tt.xmlNamespacePrefix}`:"xmlns";"Composite"===tt.type.name?(gt[yt]=Object.assign({},vt),gt[yt][A.c]={[bt]:tt.xmlNamespace}):(gt[yt]={},gt[yt][je.xmlCharKey]=vt,gt[yt][A.c]={[bt]:tt.xmlNamespace})}else gt[yt]=vt}return gt}(this,Q,ne,be,Boolean(this.isXML),yt):null!==bt.match(/^Dictionary$/i)?vt=function(ve,Q,ne,be,Re,je){if("object"!=typeof ne)throw new Error(`${be} must be of type object.`);const tt=Q.type.value;if(!tt||"object"!=typeof tt)throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${be}.`);const gt={};for(const yt of Object.keys(ne)){const vt=ve.serialize(tt,ne[yt],be,je);gt[yt]=x(tt,vt,Re,je)}if(Re&&Q.xmlNamespace){const vt=gt;return vt[A.c]={[Q.xmlNamespacePrefix?`xmlns:${Q.xmlNamespacePrefix}`:"xmlns"]:Q.xmlNamespace},vt}return gt}(this,Q,ne,be,Boolean(this.isXML),yt):null!==bt.match(/^Composite$/i)&&(vt=function(ve,Q,ne,be,Re,je){if(_(ve,Q)&&(Q=f(ve,Q,ne,"clientName")),null!=ne){const tt={},gt=$(ve,Q,be);for(const vt of Object.keys(gt)){const bt=gt[vt];if(bt.readOnly)continue;let Nt,Pt=tt;if(ve.isXML)Nt=bt.xmlIsWrapped?bt.xmlName:bt.xmlElementName||bt.xmlName;else{const Dt=b(bt.serializedName);Nt=Dt.pop();for(const vn of Dt)null==Pt[vn]&&(null!=ne[vt]||void 0!==bt.defaultValue)&&(Pt[vn]={}),Pt=Pt[vn]}if(null!=Pt){if(Re&&Q.xmlNamespace){const Ut=Q.xmlNamespacePrefix?`xmlns:${Q.xmlNamespacePrefix}`:"xmlns";Pt[A.c]=Object.assign(Object.assign({},Pt[A.c]),{[Ut]:Q.xmlNamespace})}const Dt=""!==bt.serializedName?be+"."+bt.serializedName:be;let vn=ne[vt];const dn=_(ve,Q);dn&&dn.clientName===vt&&null==vn&&(vn=Q.serializedName);const zt=ve.serialize(bt,vn,Dt,je);if(void 0!==zt&&null!=Nt){const Ut=x(bt,zt,Re,je);Re&&bt.xmlIsAttribute?(Pt[A.c]=Pt[A.c]||{},Pt[A.c][Nt]=zt):Pt[Nt]=Re&&bt.xmlIsWrapped?{[bt.xmlElementName]:Ut}:Ut}}}const yt=function(ve,Q,ne){const be=Q.type.additionalProperties;if(!be&&Q.type.className){const Re=te(ve,Q,ne);return null==Re?void 0:Re.type.additionalProperties}return be}(ve,Q,be);if(yt){const vt=Object.keys(gt);for(const bt in ne)vt.every(Pt=>Pt!==bt)&&(tt[bt]=ve.serialize(yt,ne[bt],be+'["'+bt+'"]',je))}return tt}return ne}(this,Q,ne,be,Boolean(this.isXML),yt)),vt}deserialize(Q,ne,be,Re={}){var je,tt,gt;const yt={rootName:null!==(je=Re.rootName)&&void 0!==je?je:"",includeRoot:null!==(tt=Re.includeRoot)&&void 0!==tt&&tt,xmlCharKey:null!==(gt=Re.xmlCharKey)&&void 0!==gt?gt:A.I};if(null==ne)return this.isXML&&"Sequence"===Q.type.name&&!Q.xmlIsWrapped&&(ne=[]),void 0!==Q.defaultValue&&(ne=Q.defaultValue),ne;let vt;const bt=Q.type.name;if(be||(be=Q.serializedName),null!==bt.match(/^Composite$/i))vt=function(ve,Q,ne,be,Re){var je,tt;const gt=null!==(je=Re.xmlCharKey)&&void 0!==je?je:A.I;_(ve,Q)&&(Q=f(ve,Q,ne,"serializedName"));const yt=$(ve,Q,be);let vt={};const bt=[];for(const Pt of Object.keys(yt)){const Dt=yt[Pt],vn=b(yt[Pt].serializedName);bt.push(vn[0]);const{serializedName:dn,xmlName:zt,xmlElementName:Ut}=Dt;let Bn=be;""!==dn&&void 0!==dn&&(Bn=be+"."+dn);const pr=Dt.headerCollectionPrefix;if(pr){const nr={};for(const $n of Object.keys(ne))$n.startsWith(pr)&&(nr[$n.substring(pr.length)]=ve.deserialize(Dt.type.value,ne[$n],Bn,Re)),bt.push($n);vt[Pt]=nr}else if(ve.isXML)if(Dt.xmlIsAttribute&&ne[A.c])vt[Pt]=ve.deserialize(Dt,ne[A.c][zt],Bn,Re);else if(Dt.xmlIsMsText)void 0!==ne[gt]?vt[Pt]=ne[gt]:"string"==typeof ne&&(vt[Pt]=ne);else{const nr=Ut||zt||dn;if(Dt.xmlIsWrapped){const $n=ne[zt],Bi=null!==(tt=null==$n?void 0:$n[Ut])&&void 0!==tt?tt:[];vt[Pt]=ve.deserialize(Dt,Bi,Bn,Re)}else vt[Pt]=ve.deserialize(Dt,ne[nr],Bn,Re)}else{let nr,$n=ne;for(const vi of vn){if(!$n)break;$n=$n[vi]}nr=$n;const Bi=Q.type.polymorphicDiscriminator;let uo;if(Bi&&Pt===Bi.clientName&&null==nr&&(nr=Q.serializedName),Array.isArray(ne[Pt])&&""===yt[Pt].serializedName){nr=ne[Pt];const vi=ve.deserialize(Dt,nr,Bn,Re);for(const[Da,Zu]of Object.entries(vt))Object.prototype.hasOwnProperty.call(vi,Da)||(vi[Da]=Zu);vt=vi}else(void 0!==nr||void 0!==Dt.defaultValue)&&(uo=ve.deserialize(Dt,nr,Bn,Re),vt[Pt]=uo)}}const Nt=Q.type.additionalProperties;if(Nt){const Pt=Dt=>{for(const vn in yt)if(b(yt[vn].serializedName)[0]===Dt)return!1;return!0};for(const Dt in ne)Pt(Dt)&&(vt[Dt]=ve.deserialize(Nt,ne[Dt],be+'["'+Dt+'"]',Re))}else if(ne)for(const Pt of Object.keys(ne))void 0===vt[Pt]&&!bt.includes(Pt)&&!r(Pt,Re)&&(vt[Pt]=ne[Pt]);return vt}(this,Q,ne,be,yt);else{if(this.isXML){const Nt=yt.xmlCharKey,Pt=ne;null!=Pt[A.c]&&null!=Pt[Nt]&&(ne=Pt[Nt])}null!==bt.match(/^Number$/i)?(vt=parseFloat(ne),isNaN(vt)&&(vt=ne)):null!==bt.match(/^Boolean$/i)?vt="true"===ne||"false"!==ne&&ne:null!==bt.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)?vt=ne:null!==bt.match(/^(Date|DateTime|DateTimeRfc1123)$/i)?vt=new Date(ne):null!==bt.match(/^UnixTime$/i)?vt=function(ve){if(ve)return new Date(1e3*ve)}(ne):null!==bt.match(/^ByteArray$/i)?vt=v(ne):null!==bt.match(/^Base64Url$/i)?vt=function(ve){if(ve){if(ve&&"string"!=typeof ve.valueOf())throw new Error("Please provide an input of type string for converting to Uint8Array");return v(ve=ve.replace(/-/g,"+").replace(/_/g,"/"))}}(ne):null!==bt.match(/^Sequence$/i)?vt=function(ve,Q,ne,be,Re){const je=Q.type.element;if(!je||"object"!=typeof je)throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${be}`);if(ne){Array.isArray(ne)||(ne=[ne]);const tt=[];for(let gt=0;gt<ne.length;gt++)tt[gt]=ve.deserialize(je,ne[gt],`${be}[${gt}]`,Re);return tt}return ne}(this,Q,ne,be,yt):null!==bt.match(/^Dictionary$/i)&&(vt=function(ve,Q,ne,be,Re){const je=Q.type.value;if(!je||"object"!=typeof je)throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${be}`);if(ne){const tt={};for(const gt of Object.keys(ne))tt[gt]=ve.deserialize(je,ne[gt],be,Re);return tt}return ne}(this,Q,ne,be,yt))}return Q.isConstant&&(vt=Q.defaultValue),vt}}function b(ve){const Q=[];let ne="";if(ve){const be=ve.split(".");for(const Re of be)"\\"===Re.charAt(Re.length-1)?ne+=Re.substr(0,Re.length-1)+".":(ne+=Re,Q.push(ne),ne="")}return Q}function te(ve,Q,ne){const be=Q.type.className;if(!be)throw new Error(`Class name for model "${ne}" is not provided in the mapper "${JSON.stringify(Q,void 0,2)}".`);return ve.modelMappers[be]}function $(ve,Q,ne){let be=Q.type.modelProperties;if(!be){const Re=te(ve,Q,ne);if(!Re)throw new Error(`mapper() cannot be null or undefined for model "${Q.type.className}".`);if(be=null==Re?void 0:Re.type.modelProperties,!be)throw new Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(Re)}" of type "${Q.type.className}" for object "${ne}".`)}return be}function x(ve,Q,ne,be){if(!ne||!ve.xmlNamespace)return Q;const je={[ve.xmlNamespacePrefix?`xmlns:${ve.xmlNamespacePrefix}`:"xmlns"]:ve.xmlNamespace};if(["Composite"].includes(ve.type.name)){if(Q[A.c])return Q;{const gt=Object.assign({},Q);return gt[A.c]=je,gt}}const tt={};return tt[be.xmlCharKey]=Q,tt[A.c]=je,tt}function r(ve,Q){return[A.c,Q.xmlCharKey].includes(ve)}function f(ve,Q,ne,be){const Re=_(ve,Q);if(Re){const je=Re[be];if(null!=je){const tt=ne[je];if(null!=tt){const gt=Q.type.uberParent||Q.type.className,vt=ve.modelMappers.discriminators[tt===gt?tt:gt+"."+tt];vt&&(Q=vt)}}}return Q}function _(ve,Q){return Q.type.polymorphicDiscriminator||D(ve,Q.type.uberParent)||D(ve,Q.type.className)}function D(ve,Q){return Q&&ve.modelMappers[Q]&&ve.modelMappers[Q].type.polymorphicDiscriminator}function d(ve){const Q=ve;if(null!=ve){if(ve instanceof Uint8Array)return u(ve);if(ve instanceof Date)return ve.toISOString();if(Array.isArray(ve)){const ne=[];for(let be=0;be<ve.length;be++)ne.push(d(ve[be]));return ne}if("object"==typeof ve){const ne={};for(const be in ve)ne[be]=d(Q[be]);return ne}return ve}}const y=function(ve){const Q={};for(const ne of["Base64Url","Boolean","ByteArray","Composite","Date","DateTime","DateTimeRfc1123","Dictionary","Enum","Number","Object","Sequence","String","Stream","TimeSpan","UnixTime"])Q[ne]=ne;return Q}();class q{constructor(Q,ne,be,Re,je,tt,gt,yt,vt,bt,Nt,Pt,Dt,vn,dn){this.streamResponseBody=tt,this.streamResponseStatusCodes=dn,this.url=Q||"",this.method=ne||"GET",this.headers=N(je)?je:new m(je),this.body=be,this.query=Re,this.formData=void 0,this.withCredentials=gt||!1,this.abortSignal=yt,this.timeout=vt||0,this.onUploadProgress=bt,this.onDownloadProgress=Nt,this.proxySettings=Pt,this.keepAlive=Dt,this.decompressResponse=vn,this.requestId=this.headers.get("x-ms-client-request-id")||(0,M.Rl)()}validateRequestProperties(){if(!this.method)throw new Error("WebResource.method is required.");if(!this.url)throw new Error("WebResource.url is required.")}prepare(Q){if(!Q)throw new Error("options object is required");if(null==Q.method||"string"!=typeof Q.method.valueOf())throw new Error("options.method must be a string.");if(Q.url&&Q.pathTemplate)throw new Error("options.url and options.pathTemplate are mutually exclusive. Please provide exactly one of them.");if(!(null!=Q.pathTemplate&&"string"==typeof Q.pathTemplate.valueOf()||null!=Q.url&&"string"==typeof Q.url.valueOf()))throw new Error("Please provide exactly one of options.pathTemplate or options.url.");if(Q.url){if("string"!=typeof Q.url)throw new Error('options.url must be of type "string".');this.url=Q.url}if(Q.method){const ne=["GET","PUT","HEAD","DELETE","OPTIONS","POST","PATCH","TRACE"];if(-1===ne.indexOf(Q.method.toUpperCase()))throw new Error('The provided method "'+Q.method+'" is invalid. Supported HTTP methods are: '+JSON.stringify(ne))}if(this.method=Q.method.toUpperCase(),Q.pathTemplate){const{pathTemplate:ne,pathParameters:be}=Q;if("string"!=typeof ne)throw new Error('options.pathTemplate must be of type "string".');Q.baseUrl||(Q.baseUrl="https://management.azure.com");const Re=Q.baseUrl;let je=Re+(Re.endsWith("/")?"":"/")+(ne.startsWith("/")?ne.slice(1):ne);const tt=je.match(/({[\w-]*\s*[\w-]*})/gi);if(tt&&tt.length){if(!be)throw new Error(`pathTemplate: ${ne} has been provided. Hence, options.pathParameters must also be provided.`);tt.forEach(function(gt){const yt=gt.slice(1,-1),vt=be[yt];if(null==vt||"string"!=typeof vt&&"object"!=typeof vt){const bt=JSON.stringify(be,void 0,2);throw new Error(`pathTemplate: ${ne} contains the path parameter ${yt} however, it is not present in parameters: ${bt}.The value of the path parameter can either be a "string" of the form { ${yt}: "some sample value" } or it can be an "object" of the form { "${yt}": { value: "some sample value", skipUrlEncoding: true } }.`)}if("string"==typeof vt.valueOf()&&(je=je.replace(gt,encodeURIComponent(vt))),"object"==typeof vt.valueOf()){if(!vt.value)throw new Error(`options.pathParameters[${yt}] is of type "object" but it does not contain a "value" property.`);je=je.replace(gt,vt.skipUrlEncoding?vt.value:encodeURIComponent(vt.value))}})}this.url=je}if(Q.queryParameters){const ne=Q.queryParameters;if("object"!=typeof ne)throw new Error('options.queryParameters must be of type object. It should be a JSON object of "query-parameter-name" as the key and the "query-parameter-value" as the value. The "query-parameter-value" may be fo type "string" or an "object" of the form { value: "query-parameter-value", skipUrlEncoding: true }.');this.url&&-1===this.url.indexOf("?")&&(this.url+="?");const be=[];this.query={};for(const Re in ne){const je=ne[Re];if(je)if("string"==typeof je)be.push(Re+"="+encodeURIComponent(je)),this.query[Re]=encodeURIComponent(je);else if("object"==typeof je){if(!je.value)throw new Error(`options.queryParameters[${Re}] is of type "object" but it does not contain a "value" property.`);je.skipUrlEncoding?(be.push(Re+"="+je.value),this.query[Re]=je.value):(be.push(Re+"="+encodeURIComponent(je.value)),this.query[Re]=encodeURIComponent(je.value))}}this.url+=be.join("&")}if(Q.headers){const ne=Q.headers;for(const be of Object.keys(Q.headers))this.headers.set(be,ne[be])}return this.headers.get("accept-language")||this.headers.set("accept-language","en-US"),!this.headers.get("x-ms-client-request-id")&&!Q.disableClientRequestId&&this.headers.set("x-ms-client-request-id",this.requestId),this.headers.get("Content-Type")||this.headers.set("Content-Type","application/json; charset=utf-8"),this.body=Q.body,null!=Q.body&&(Q.bodyIsStream?(this.headers.get("Transfer-Encoding")||this.headers.set("Transfer-Encoding","chunked"),"application/octet-stream"!==this.headers.get("Content-Type")&&this.headers.set("Content-Type","application/octet-stream")):(Q.serializationMapper&&(this.body=new T(Q.mappers).serialize(Q.serializationMapper,Q.body,"requestBody")),Q.disableJsonStringifyOnBody||(this.body=JSON.stringify(Q.body)))),Q.spanOptions&&(this.spanOptions=Q.spanOptions),Q.tracingContext&&(this.tracingContext=Q.tracingContext),this.abortSignal=Q.abortSignal,this.onDownloadProgress=Q.onDownloadProgress,this.onUploadProgress=Q.onUploadProgress,this}clone(){const Q=new q(this.url,this.method,this.body,this.query,this.headers&&this.headers.clone(),this.streamResponseBody,this.withCredentials,this.abortSignal,this.timeout,this.onUploadProgress,this.onDownloadProgress,this.proxySettings,this.keepAlive,this.decompressResponse,this.streamResponseStatusCodes);return this.formData&&(Q.formData=this.formData),this.operationSpec&&(Q.operationSpec=this.operationSpec),this.shouldDeserialize&&(Q.shouldDeserialize=this.shouldDeserialize),this.operationResponseGetter&&(Q.operationResponseGetter=this.operationResponseGetter),Q}}var Z=E(5283),ge=E(369);const me="REDACTED",le=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],fe=["api-version"];class ae{constructor({allowedHeaderNames:Q=[],allowedQueryParameters:ne=[]}={}){Q=Array.isArray(Q)?le.concat(Q):le,ne=Array.isArray(ne)?fe.concat(ne):fe,this.allowedHeaderNames=new Set(Q.map(be=>be.toLowerCase())),this.allowedQueryParameters=new Set(ne.map(be=>be.toLowerCase()))}sanitize(Q){const ne=new Set;return JSON.stringify(Q,(be,Re)=>{if(Re instanceof Error)return Object.assign(Object.assign({},Re),{name:Re.name,message:Re.message});if("_headersMap"===be)return this.sanitizeHeaders(Re);if("url"===be)return this.sanitizeUrl(Re);if("query"===be)return this.sanitizeQuery(Re);if("body"!==be&&"response"!==be&&"operationSpec"!==be){if(Array.isArray(Re)||(0,M.Kn)(Re)){if(ne.has(Re))return"[Circular]";ne.add(Re)}return Re}},2)}sanitizeHeaders(Q){return this.sanitizeObject(Q,this.allowedHeaderNames,(ne,be)=>ne[be].value)}sanitizeQuery(Q){return this.sanitizeObject(Q,this.allowedQueryParameters,(ne,be)=>ne[be])}sanitizeObject(Q,ne,be){if("object"!=typeof Q||null===Q)return Q;const Re={};for(const je of Object.keys(Q))Re[je]=ne.has(je.toLowerCase())?be(Q,je):me;return Re}sanitizeUrl(Q){if("string"!=typeof Q||null===Q)return Q;const ne=ge.UK.parse(Q),be=ne.getQuery();if(!be)return Q;const Re=ge.$4.parse(be);for(const je of Re.keys())this.allowedQueryParameters.has(je.toLowerCase())||Re.set(je,me);return ne.setQuery(Re.toString()),ne.toString()}}const de={},xe=new ae;let Ce=(()=>{class ve extends Error{constructor(ne,be,Re,je,tt){super(ne),this.name="RestError",this.code=be,this.statusCode=Re,this.request=je,this.response=tt,Object.setPrototypeOf(this,ve.prototype)}[de](){return`RestError: ${this.message} \n ${xe.sanitize(this)}`}}return ve.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",ve.PARSE_ERROR="PARSE_ERROR",ve})();class oe{sendRequest(Q){var ne;const be=new XMLHttpRequest;if(Q.proxySettings)throw new Error("HTTP proxy is not supported in browser environment");const Re=Q.abortSignal;if(Re){if(Re.aborted)return Promise.reject(new Z._("The operation was aborted."));const je=()=>{be.abort()};Re.addEventListener("abort",je),be.addEventListener("readystatechange",()=>{be.readyState===XMLHttpRequest.DONE&&Re.removeEventListener("abort",je)})}if(ye(be.upload,Q.onUploadProgress),ye(be,Q.onDownloadProgress),Q.formData){const je=Q.formData,tt=new FormData,gt=(vt,bt)=>{bt&&Object.prototype.hasOwnProperty.call(bt,"value")&&Object.prototype.hasOwnProperty.call(bt,"options")?tt.append(vt,bt.value,bt.options):tt.append(vt,bt)};for(const vt of Object.keys(je)){const bt=je[vt];if(Array.isArray(bt))for(let Nt=0;Nt<bt.length;Nt++)gt(vt,bt[Nt]);else gt(vt,bt)}Q.body=tt,Q.formData=void 0;const yt=Q.headers.get("Content-Type");yt&&-1!==yt.indexOf("multipart/form-data")&&Q.headers.remove("Content-Type")}be.open(Q.method,Q.url),be.timeout=Q.timeout,be.withCredentials=Q.withCredentials;for(const je of Q.headers.headersArray())be.setRequestHeader(je.name,je.value);return be.responseType=(null===(ne=Q.streamResponseStatusCodes)||void 0===ne?void 0:ne.size)||Q.streamResponseBody?"blob":"text",be.send(void 0===Q.body?null:Q.body),new Promise("blob"===be.responseType?(je,tt)=>{(function(ve,Q,ne,be){ve.addEventListener("readystatechange",()=>{var Re;if(ve.readyState===XMLHttpRequest.HEADERS_RECEIVED)if(Q.streamResponseBody||(null===(Re=Q.streamResponseStatusCodes)||void 0===Re?void 0:Re.has(ve.status))){const je=new Promise((tt,gt)=>{ve.addEventListener("load",()=>{tt(ve.response)}),ee(Q,ve,gt)});ne({request:Q,status:ve.status,headers:re(ve),blobBody:je})}else ve.addEventListener("load",()=>{if(ve.response){const je=new FileReader;je.onload=function(tt){var gt;const yt=null===(gt=tt.target)||void 0===gt?void 0:gt.result;ne({request:Q,status:ve.status,headers:re(ve),bodyAsText:yt})},je.onerror=function(tt){be(je.error)},je.readAsText(ve.response,"UTF-8")}else ne({request:Q,status:ve.status,headers:re(ve)})})})})(be,Q,je,tt),ee(Q,be,tt)}:function(je,tt){be.addEventListener("load",()=>je({request:Q,status:be.status,headers:re(be),bodyAsText:be.responseText})),ee(Q,be,tt)})}}function ye(ve,Q){Q&&ve.addEventListener("progress",ne=>Q({loadedBytes:ne.loaded}))}function re(ve){const Q=new m,ne=ve.getAllResponseHeaders().trim().split(/[\r\n]+/);for(const be of ne){const Re=be.indexOf(":"),je=be.slice(0,Re),tt=be.slice(Re+2);Q.set(je,tt)}return Q}function ee(ve,Q,ne){Q.addEventListener("error",()=>ne(new Ce(`Failed to send request to ${ve.url}`,Ce.REQUEST_SEND_ERROR,void 0,ve)));const be=new Z._("The operation was aborted.");Q.addEventListener("abort",()=>ne(be)),Q.addEventListener("timeout",()=>ne(be))}var J=E(1138),ue=E(4762);function Ae(ve){const{requestOptions:Q,tracingOptions:ne}=ve;let Re=(0,ue._T)(ve,["requestOptions","tracingOptions"]);return Q&&(Re=Object.assign(Object.assign({},Re),Q)),ne&&(Re.tracingContext=ne.tracingContext,Re.spanOptions=null==ne?void 0:ne.spanOptions),Re}var Te=E(8239),Ee=E(2462);if(!(self.document&&self.DOMParser&&self.Node&&self.XMLSerializer))throw new Error('This library depends on the following DOM objects: ["document", "DOMParser", "Node", "XMLSerializer"] to parse XML, but some of these are undefined. You may provide a polyfill to make these globally available in order to support your environment. For more information, please refer to https://aka.ms/azsdk/js/web-workers. ');let We,_e,De,Mt,$e;function Ne(){return We||(We=document.implementation.createDocument(null,null,null)),We}function Be(){return _e||(_e=new DOMParser),_e}function He(ve,Q={}){var ne,be,Re,je;try{const tt={rootName:null!==(ne=Q.rootName)&&void 0!==ne?ne:"",includeRoot:null!==(be=Q.includeRoot)&&void 0!==be&&be,xmlCharKey:null!==(Re=Q.xmlCharKey)&&void 0!==Re?Re:A.I},gt=Be().parseFromString(null!==(je=null==Mt?void 0:Mt.createHTML(ve))&&void 0!==je?je:ve,"application/xml");let yt;return function(ve){const Q=ve.getElementsByTagName("parsererror");if(Q.length>0&&function(){var ve,Q;if(void 0===$e)try{const ne=null!==(ve=null==Mt?void 0:Mt.createHTML("INVALID"))&&void 0!==ve?ve:"INVALID";$e=null!==(Q=Be().parseFromString(ne,"text/xml").getElementsByTagName("parsererror")[0].namespaceURI)&&void 0!==Q?Q:""}catch(ne){$e=""}return $e}())for(let ne=0;ne<Q.length;ne++)if(Q[ne].namespaceURI===$e)throw new Error(Q[ne].innerHTML)}(gt),yt=at(tt.includeRoot?gt:gt.childNodes[0],tt),Promise.resolve(yt)}catch(tt){return Promise.reject(tt)}}function at(ve,Q){let ne={};const be=ve.childNodes.length,Re=ve.childNodes[0],je=Re&&1===be&&Re.nodeType===Node.TEXT_NODE&&Re.nodeValue||void 0,tt=function(ve){return function(ve){return!!ve.attributes}(ve)&&ve.hasAttributes()?ve:void 0}(ve);if(tt){ne[A.c]={};for(let gt=0;gt<tt.attributes.length;gt++){const yt=tt.attributes[gt];ne[A.c][yt.nodeName]=yt.nodeValue}je&&(ne[Q.xmlCharKey]=je)}else 0===be?ne="":je&&(ne=je);if(!je)for(let gt=0;gt<be;gt++){const yt=ve.childNodes[gt];if(yt.nodeType!==Node.TEXT_NODE){const vt=at(yt,Q);ne[yt.nodeName]?Array.isArray(ne[yt.nodeName])?ne[yt.nodeName].push(vt):ne[yt.nodeName]=[ne[yt.nodeName],vt]:ne[yt.nodeName]=vt}}return ne}function it(ve,Q={}){var ne,be,Re;const je={rootName:null!==(ne=Q.rootName)&&void 0!==ne?ne:"root",includeRoot:null!==(be=Q.includeRoot)&&void 0!==be&&be,xmlCharKey:null!==(Re=Q.xmlCharKey)&&void 0!==Re?Re:A.I},tt=ot(ve,je.rootName,je)[0];return'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+(De||(De=new XMLSerializer),De).serializeToString(tt)}function Mn(ve){const Q=[];for(const ne of Object.keys(ve)){const be=Ne().createAttribute(ne);be.value=ve[ne].toString(),Q.push(be)}return Q}function ot(ve,Q,ne){if(null==ve||"string"==typeof ve||"number"==typeof ve||"boolean"==typeof ve){const be=Ne().createElement(Q);return be.textContent=null==ve?"":ve.toString(),[be]}if(Array.isArray(ve)){const be=[];for(const Re of ve)for(const je of ot(Re,Q,ne))be.push(je);return be}if("object"==typeof ve){const be=Ne().createElement(Q);for(const Re of Object.keys(ve))if(Re===A.c)for(const je of Mn(ve[Re]))be.attributes.setNamedItem(je);else if(Re===ne.xmlCharKey)be.textContent=ve[Re].toString();else for(const je of ot(ve[Re],Re,ne))be.appendChild(je);return[be]}throw new Error(`Illegal value passed to buildObject: ${ve}`)}function Ke(ve,Q){return{create:(ne,be)=>new On(ne,be,ve,Q)}}void 0!==self.trustedTypes&&(Mt=self.trustedTypes.createPolicy("@azure/core-http#xml.browser",{createHTML:ve=>ve}));const In=["application/json","text/json"],Ge=["application/xml","application/atom+xml"],ut={expectedContentTypes:{json:In,xml:Ge}};class On extends Ee.U{constructor(Q,ne,be,Re={}){var je;super(Q,ne),this.jsonContentTypes=be&&be.json||In,this.xmlContentTypes=be&&be.xml||Ge,this.xmlCharKey=null!==(je=Re.xmlCharKey)&&void 0!==je?je:A.I}sendRequest(Q){var ne=this;return(0,Te.Z)(function*(){return ne._nextPolicy.sendRequest(Q).then(be=>kt(ne.jsonContentTypes,ne.xmlContentTypes,be,{xmlCharKey:ne.xmlCharKey}))})()}}function kt(ve,Q,ne,be={}){var Re,je,tt;const gt={rootName:null!==(Re=be.rootName)&&void 0!==Re?Re:"",includeRoot:null!==(je=be.includeRoot)&&void 0!==je&&je,xmlCharKey:null!==(tt=be.xmlCharKey)&&void 0!==tt?tt:A.I};return function(ve,Q,ne,be){var Re;const je=gt=>{const bt=new Ce(`Error "${gt}" occurred while parsing the response body - ${ne.bodyAsText}.`,gt.code||Ce.PARSE_ERROR,ne.status,ne.request,ne);return Promise.reject(bt)};if(!(null===(Re=ne.request.streamResponseStatusCodes)||void 0===Re?void 0:Re.has(ne.status))&&!ne.request.streamResponseBody&&ne.bodyAsText){const gt=ne.bodyAsText,yt=ne.headers.get("Content-Type")||"",vt=yt?yt.split(";").map(bt=>bt.toLowerCase()):[];if(0===vt.length||vt.some(bt=>-1!==ve.indexOf(bt)))return new Promise(bt=>{ne.parsedBody=JSON.parse(gt),bt(ne)}).catch(je);if(vt.some(bt=>-1!==Q.indexOf(bt)))return He(gt,be).then(bt=>(ne.parsedBody=bt,ne)).catch(je)}return Promise.resolve(ne)}(ve,Q,ne,gt).then(yt=>{if(!function(ve){const Q=ve.request.shouldDeserialize;let ne;return ne=void 0===Q||("boolean"==typeof Q?Q:Q(ve)),ne}(yt))return yt;const vt=yt.request.operationSpec;if(!vt||!vt.responses)return yt;const bt=function(ve){let Q;const ne=ve.request,be=ne.operationSpec;if(be){const Re=ne.operationResponseGetter;Q=Re?Re(be,ve):be.responses[ve.status]}return Q}(yt),{error:Nt,shouldReturnResponse:Pt}=function(ve,Q,ne){var be;const Re=200<=ve.status&&ve.status<300;if(function(ve){const Q=Object.keys(ve.responses);return 0===Q.length||1===Q.length&&"default"===Q[0]}(Q)?Re:ne){if(!ne)return{error:null,shouldReturnResponse:!1};if(!ne.isError)return{error:null,shouldReturnResponse:!1}}const tt=null!=ne?ne:Q.responses.default,yt=(null===(be=ve.request.streamResponseStatusCodes)||void 0===be?void 0:be.has(ve.status))||ve.request.streamResponseBody?`Unexpected status code: ${ve.status}`:ve.bodyAsText,vt=new Ce(yt,void 0,ve.status,ve.request,ve);if(!tt)throw vt;const bt=tt.bodyMapper,Nt=tt.headersMapper;try{if(ve.parsedBody){const Pt=ve.parsedBody;let Dt;if(bt){let dn=Pt;Q.isXML&&bt.type.name===y.Sequence&&(dn="object"==typeof Pt?Pt[bt.xmlElementName]:[]),Dt=Q.serializer.deserialize(bt,dn,"error.response.parsedBody")}const vn=Pt.error||Dt||Pt;vt.code=vn.code,vn.message&&(vt.message=vn.message),bt&&(vt.response.parsedBody=Dt)}ve.headers&&Nt&&(vt.response.parsedHeaders=Q.serializer.deserialize(Nt,ve.headers.toJson(),"operationRes.parsedHeaders"))}catch(Pt){vt.message=`Error "${Pt.message}" occurred in deserializing the responseBody - "${ve.bodyAsText}" for the default response.`}return{error:vt,shouldReturnResponse:!1}}(yt,vt,bt);if(Nt)throw Nt;if(Pt)return yt;if(bt){if(bt.bodyMapper){let Dt=yt.parsedBody;vt.isXML&&bt.bodyMapper.type.name===y.Sequence&&(Dt="object"==typeof Dt?Dt[bt.bodyMapper.xmlElementName]:[]);try{yt.parsedBody=vt.serializer.deserialize(bt.bodyMapper,Dt,"operationRes.parsedBody",be)}catch(vn){throw new Ce(`Error ${vn} occurred in deserializing the responseBody - ${yt.bodyAsText}`,void 0,yt.status,yt.request,yt)}}else"HEAD"===vt.httpMethod&&(yt.parsedBody=ne.status>=200&&ne.status<300);bt.headersMapper&&(yt.parsedHeaders=vt.serializer.deserialize(bt.headersMapper,yt.headers.toJson(),"operationRes.parsedHeaders",be))}return yt})}const ct={enable:!0};function ze(ve){return{create:(Q,ne)=>new an(Q,ne,ve||ct)}}class an extends Ee.U{constructor(Q,ne,be){super(Q,ne),this.keepAliveOptions=be}sendRequest(Q){var ne=this;return(0,Te.Z)(function*(){return Q.keepAlive=ne.keepAliveOptions.enable,ne._nextPolicy.sendRequest(Q)})()}}const dt=["GET","HEAD"],Xe={handleRedirects:!0,maxRetries:20};function Yt(ve=20){return{create:(Q,ne)=>new Ye(Q,ne,ve)}}class Ye extends Ee.U{constructor(Q,ne,be=20){super(Q,ne),this.maxRetries=be}sendRequest(Q){return this._nextPolicy.sendRequest(Q).then(ne=>Qe(this,ne,0))}}function Qe(ve,Q,ne){const{request:be,status:Re}=Q,je=Q.headers.get("location");if(je&&(300===Re||301===Re&&dt.includes(be.method)||302===Re&&dt.includes(be.method)||303===Re&&"POST"===be.method||307===Re)&&(!ve.maxRetries||ne<ve.maxRetries)){const tt=ge.UK.parse(be.url);return tt.setPath(je),be.url=tt.toString(),303===Re&&(be.method="GET",delete be.body),ve._nextPolicy.sendRequest(be).then(gt=>Qe(ve,gt,ne+1))}return Promise.resolve(Q)}function jt(ve){return"number"==typeof ve}function qt(ve,Q,ne,be,Re){return!!Q(be,Re)&&ne.retryCount<ve}function wn(ve,Q={retryCount:0,retryInterval:0},ne){ne&&(Q.error&&(ne.innerError=Q.error),Q.error=ne),Q.retryCount++;let be=Math.pow(2,Q.retryCount-1)-1;return be*=.8*ve.retryInterval+Math.floor(Math.random()*(.4*ve.retryInterval)),Q.retryInterval=Math.min(ve.minRetryInterval+be,ve.maxRetryInterval),Q}var hn=E(8006),gn=E(9484);const on=(0,E(1326).YR)("core-http");function _n(ve,Q,ne){return{create:(be,Re)=>new An(be,Re,ve,Q,ne)}}var Jt=(()=>{return(ve=Jt||(Jt={}))[ve.Exponential=0]="Exponential",Jt;var ve})();const Ft={maxRetries:3,retryDelayInMs:3e4,maxRetryDelayInMs:9e4};class An extends Ee.U{constructor(Q,ne,be,Re,je){super(Q,ne),this.retryCount=jt(be)?be:3,this.retryInterval=jt(Re)?Re:3e4,this.maxRetryInterval=jt(je)?je:9e4}sendRequest(Q){return this._nextPolicy.sendRequest(Q.clone()).then(ne=>Cn(this,Q,ne)).catch(ne=>Cn(this,Q,ne.response,void 0,ne))}}function Cn(ve,Q,ne,be,Re){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,Te.Z)(function*(ve,Q,ne,be,Re){be=wn({retryInterval:ve.retryInterval,minRetryInterval:0,maxRetryInterval:ve.maxRetryInterval},be,Re);const tt=Q.abortSignal&&Q.abortSignal.aborted;if(tt||!qt(ve.retryCount,function(gt){const yt=null==gt?void 0:gt.status;return!(503===yt&&(null==ne?void 0:ne.headers.get(hn.g.HeaderConstants.RETRY_AFTER))||void 0===yt||yt<500&&408!==yt||501===yt||505===yt)},be,ne)){if(tt||Re||!ne)throw be.error||new Ce("Failed to send the request.",Ce.REQUEST_SEND_ERROR,ne&&ne.status,ne&&ne.request,ne);return ne}on.info(`Retrying request in ${be.retryInterval}`);try{yield(0,gn.g)(be.retryInterval);const gt=yield ve._nextPolicy.sendRequest(Q.clone());return Cn(ve,Q,gt,be)}catch(gt){return Cn(ve,Q,ne,be,gt)}})).apply(this,arguments)}function Rt(ve={}){return{create:(Q,ne)=>new Dn(Q,ne,ve)}}class Dn extends Ee.U{constructor(Q,ne,{logger:be=on.info,allowedHeaderNames:Re=[],allowedQueryParameters:je=[]}={}){super(Q,ne),this.logger=be,this.sanitizer=new ae({allowedHeaderNames:Re,allowedQueryParameters:je})}get allowedHeaderNames(){return this.sanitizer.allowedHeaderNames}set allowedHeaderNames(Q){this.sanitizer.allowedHeaderNames=Q}get allowedQueryParameters(){return this.sanitizer.allowedQueryParameters}set allowedQueryParameters(Q){this.sanitizer.allowedQueryParameters=Q}sendRequest(Q){return this.logger.enabled?(this.logRequest(Q),this._nextPolicy.sendRequest(Q).then(ne=>this.logResponse(ne))):this._nextPolicy.sendRequest(Q)}logRequest(Q){this.logger(`Request: ${this.sanitizer.sanitize(Q)}`)}logResponse(Q){return this.logger(`Response status code: ${Q.status}`),this.logger(`Headers: ${this.sanitizer.sanitize(Q.headers)}`),Q}}function Qt(ve){return nn(ve.parameterPath,ve.mapper)}function nn(ve,Q){let ne;return ne="string"==typeof ve?ve:Array.isArray(ve)?ve.join("."):Q.serializedName,ne}var Oi=E(434);const ps=function(){return"x-ms-useragent"};function Co(){const ve=[{key:"core-http",value:hn.g.coreHttpVersion}],Q=function(){const ve=self.navigator;return[{key:"OS",value:(ve.oscpu||ve.platform).replace(" ","")}]}();return function(ve,Q=" ",ne="/"){return ve.map(be=>`${be.key}${be.value?`${ne}${be.value}`:""}`).join(Q)}(ve.concat(Q))}function Ht(ve){const Q=ve&&null!=ve.key?ve.key:"x-ms-useragent",ne=ve&&null!=ve.value?ve.value:Co();return{create:(be,Re)=>new Vo(be,Re,Q,ne)}}class Vo extends Ee.U{constructor(Q,ne,be,Re){super(Q,ne),this._nextPolicy=Q,this._options=ne,this.headerKey=be,this.headerValue=Re}sendRequest(Q){return this.addUserAgentHeader(Q),this._nextPolicy.sendRequest(Q)}addUserAgentHeader(Q){Q.headers||(Q.headers=new m),!Q.headers.get(this.headerKey)&&this.headerValue&&Q.headers.set(this.headerKey,this.headerValue)}}var Ur=(()=>{return(ve=Ur||(Ur={})).Csv=",",ve.Ssv=" ",ve.Tsv="\t",ve.Pipes="|",ve.Multi="Multi",Ur;var ve})(),$r=E(6354);const Mo=new Error("DisableResponseDecompressionPolicy is not supported in browser environment");function xa(){return{create:(ve,Q)=>{throw Mo}}}function br(ve="x-ms-client-request-id"){return{create:(Q,ne)=>new Ku(Q,ne,ve)}}class Ku extends Ee.U{constructor(Q,ne,be){super(Q,ne),this._requestIdHeaderName=be}sendRequest(Q){return Q.headers.contains(this._requestIdHeaderName)||Q.headers.set(this._requestIdHeaderName,Q.requestId),this._nextPolicy.sendRequest(Q)}}let gs;class Ra extends Ee.U{constructor(Q,ne){super(Q,ne)}sendRequest(Q){var ne=this;return(0,Te.Z)(function*(){if("string"==typeof Q.body&&Q.body.startsWith("[")){const be=JSON.parse(Q.body);Array.isArray(be)&&(Q.body=be.map(Re=>JSON.stringify(Re)+"\n").join(""))}return ne._nextPolicy.sendRequest(Q)})()}}const Ho=new Error("ProxyPolicy is not supported in browser environment");function vs(ve){}function fn(ve){return{create:(Q,ne)=>{throw Ho}}}class Li extends Ee.U{constructor(Q,ne,be=30){super(Q,ne),this._retryTimeout=be}sendRequest(Q){return this._nextPolicy.sendRequest(Q.clone()).then(ne=>function(ve,Q,ne){if(409===ne.status){const be=function(ve){let Q,ne;if(ve){try{ne=JSON.parse(ve)}catch(be){}if(ne&&ne.error&&ne.error.message&&ne.error.code&&"MissingSubscriptionRegistration"===ne.error.code){const be=ne.error.message.match(/.*'(.*)'/i);be&&(Q=be.pop())}}return Q}(ne.bodyAsText);if(be){const Re=function(ve){let Q;const ne=ve.match(/.*\/subscriptions\/[a-f0-9-]+\//gi);if(!ne||!ne[0])throw new Error(`Unable to extract subscriptionId from the given url - ${ve}.`);return Q=ne[0],Q}(Q.url);return function(ve,Q,ne,be){return jo.apply(this,arguments)}(ve,Re,be,Q).catch(()=>!1).then(je=>je?(Q.headers.set("x-ms-client-request-id",M.Rl()),ve._nextPolicy.sendRequest(Q.clone())):ne)}}return Promise.resolve(ne)}(this,Q,ne))}}function to(ve,Q=!1){const ne=ve.clone();return Q&&(ne.url=ve.url),ne.headers.set("x-ms-client-request-id",M.Rl()),ne.headers.set("Content-Type","application/json; charset=utf-8"),ne}function jo(){return(jo=(0,Te.Z)(function*(ve,Q,ne,be){const Re=`${Q}providers/${ne}/register?api-version=2016-02-01`,je=`${Q}providers/${ne}?api-version=2016-02-01`,tt=to(be);if(tt.method="POST",tt.url=Re,200!==(yield ve._nextPolicy.sendRequest(tt)).status)throw new Error(`Autoregistration of ${ne} failed. Please try registering manually.`);return Hr(ve,je,be)})).apply(this,arguments)}function Hr(ve,Q,ne){return di.apply(this,arguments)}function di(){return(di=(0,Te.Z)(function*(ve,Q,ne){const be=to(ne);be.url=Q,be.method="GET";const Re=yield ve._nextPolicy.sendRequest(be),je=Re.parsedBody;return!(!Re.parsedBody||!je.registrationState||"Registered"!==je.registrationState)||(yield(0,gn.g)(1e3*ve._retryTimeout),Hr(ve,Q,ne))})).apply(this,arguments)}function ys(ve){return{create:(Q,ne)=>new qo(Q,ne,ve)}}class qo extends Ee.U{constructor(Q,ne,be){super(Q,ne),this.authenticationProvider=be}signRequest(Q){return this.authenticationProvider.signRequest(Q)}sendRequest(Q){return this.signRequest(Q).then(ne=>this._nextPolicy.sendRequest(ne))}}function zo(ve,Q,ne,be){return{create:(Re,je)=>new Wo(Re,je,ve,Q,ne,be)}}class Wo extends Ee.U{constructor(Q,ne,be,Re,je,tt){super(Q,ne),this.retryCount=jt(be)?be:3,this.retryInterval=jt(Re)?Re:3e4,this.minRetryInterval=jt(je)?je:3e3,this.maxRetryInterval=jt(tt)?tt:9e4}sendRequest(Q){return this._nextPolicy.sendRequest(Q.clone()).catch(ne=>ro(this,Q,ne.response,ne))}}function ro(ve,Q,ne,be,Re){return hi.apply(this,arguments)}function hi(){return(hi=(0,Te.Z)(function*(ve,Q,ne,be,Re){if(Re=wn(ve,Re,be),!qt(ve.retryCount,function(tt,gt){return!(!gt||!gt.code||"ETIMEDOUT"!==gt.code&&"ESOCKETTIMEDOUT"!==gt.code&&"ECONNREFUSED"!==gt.code&&"ECONNRESET"!==gt.code&&"ENOENT"!==gt.code)},Re,ne,be))return be?Promise.reject(Re.error):ne;try{return yield(0,gn.g)(Re.retryInterval),ve._nextPolicy.sendRequest(Q.clone())}catch(tt){return ro(ve,Q,ne,tt,Re)}})).apply(this,arguments)}const So=hn.g.HttpConstants.StatusCodes;function Eo(){return{create:(ve,Q)=>new tr(ve,Q)}}const _r="The operation was aborted.";class tr extends Ee.U{constructor(Q,ne,be){super(Q,ne),this.numberOfRetries=0,this._handleResponse=be||this._defaultResponseHandler}sendRequest(Q){var ne=this;return(0,Te.Z)(function*(){const be=yield ne._nextPolicy.sendRequest(Q.clone());return be.status!==So.TooManyRequests&&be.status!==So.ServiceUnavailable?be:ne._handleResponse(Q,be)})()}_defaultResponseHandler(Q,ne){var be=this;return(0,Te.Z)(function*(){var Re;const je=ne.headers.get(hn.g.HeaderConstants.RETRY_AFTER);if(je){const tt=tr.parseRetryAfterHeader(je);if(tt){if(be.numberOfRetries+=1,yield(0,gn.g)(tt,{abortSignal:Q.abortSignal,abortErrorMsg:_r}),null===(Re=Q.abortSignal)||void 0===Re?void 0:Re.aborted)throw new Z._(_r);return be.numberOfRetries<3?be.sendRequest(Q):be._nextPolicy.sendRequest(Q)}}return ne})()}static parseRetryAfterHeader(Q){const ne=Number(Q);return Number.isNaN(ne)?tr.parseDateRetryAfterHeader(Q):1e3*ne}static parseDateRetryAfterHeader(Q){try{const ne=Date.now(),Re=Date.parse(Q)-ne;return Number.isNaN(Re)?void 0:Re}catch(ne){return}}}var cr=E(1259),ur=E(9432);const Sr=(0,cr.q)({packagePrefix:"",namespace:""});function xt(ve={}){return{create:(Q,ne)=>new sn(Q,ne,ve)}}class sn extends Ee.U{constructor(Q,ne,be){super(Q,ne),this.userAgent=be.userAgent}sendRequest(Q){var ne=this;return(0,Te.Z)(function*(){if(!Q.tracingContext)return ne._nextPolicy.sendRequest(Q);const be=ne.tryCreateSpan(Q);if(!be)return ne._nextPolicy.sendRequest(Q);try{const Re=yield ne._nextPolicy.sendRequest(Q);return ne.tryProcessResponse(be,Re),Re}catch(Re){throw ne.tryProcessError(be,Re),Re}})()}tryCreateSpan(Q){var ne;try{const{span:be}=Sr(`HTTP ${Q.method}`,{tracingOptions:{spanOptions:Object.assign(Object.assign({},Q.spanOptions),{kind:ur.MU.CLIENT}),tracingContext:Q.tracingContext}});if(!be.isRecording())return void be.end();const Re=null===(ne=Q.tracingContext)||void 0===ne?void 0:ne.getValue(Symbol.for("az.namespace"));"string"==typeof Re&&be.setAttribute("az.namespace",Re),be.setAttributes({"http.method":Q.method,"http.url":Q.url,requestId:Q.requestId}),this.userAgent&&be.setAttribute("http.user_agent",this.userAgent);const je=be.spanContext(),tt=function(ve){const Q=[];if(ve.traceId||Q.push("traceId"),ve.spanId||Q.push("spanId"),Q.length)return;const be=(ve.traceFlags||0).toString(16);return`00-${ve.traceId}-${ve.spanId}-${1===be.length?`0${be}`:be}`}(je);if(tt&&(0,ur.BM)(je)){Q.headers.set("traceparent",tt);const gt=je.traceState&&je.traceState.serialize();gt&&Q.headers.set("tracestate",gt)}return be}catch(be){return void on.warning(`Skipping creating a tracing span due to an error: ${be.message}`)}}tryProcessError(Q,ne){try{Q.setStatus({code:ur.Qn.ERROR,message:ne.message}),ne.statusCode&&Q.setAttribute("http.status_code",ne.statusCode),Q.end()}catch(be){on.warning(`Skipping tracing span processing due to an error: ${be.message}`)}}tryProcessResponse(Q,ne){try{Q.setAttribute("http.status_code",ne.status);const be=ne.headers.get("x-ms-request-id");be&&Q.setAttribute("serviceRequestId",be),Q.setStatus({code:ur.Qn.OK}),Q.end()}catch(be){on.warning(`Skipping tracing span processing due to an error: ${be.message}`)}}}class xn{constructor(Q,ne){let be;if(ne||(ne={}),this._withCredentials=ne.withCredentials||!1,this._httpClient=ne.httpClient||(gs||(gs=new oe),gs),this._requestPolicyOptions=new Ee._(ne.httpPipelineLogger),Array.isArray(ne.requestPolicyFactories))on.info("ServiceClient: using custom request policies"),be=ne.requestPolicyFactories;else{let Re;if((0,Oi.c)(Q))on.info("ServiceClient: creating bearer token authentication policy from provided credentials"),Re=(()=>{let tt;const gt=this,yt=ne;return{create(vt,bt){const Nt=function(ve,Q){if(null==ve?void 0:ve.credentialScopes){const ne=ve.credentialScopes;return Array.isArray(ne)?ne.map(be=>new URL(be).toString()):new URL(ne).toString()}if(Q)return`${Q}/.default`}(yt,gt.baseUri);if(!Nt)throw new Error("When using credential, the ServiceClient must contain a baseUri or a credentialScopes in ServiceClientOptions. Unable to create a bearerTokenAuthenticationPolicy");return null==tt&&(tt=(0,$r.v)(Q,Nt)),tt.create(vt,bt)}}})();else if(Q&&"function"==typeof Q.signRequest)on.info("ServiceClient: creating signing policy from provided credentials"),Re=ys(Q);else if(null!=Q)throw new Error("The credentials argument must implement the TokenCredential interface");if(on.info("ServiceClient: using default request policies"),be=function(ve,Q){const ne=[];Q.generateClientRequestIdHeader&&ne.push(br(Q.clientRequestIdHeaderName)),ve&&ne.push(ve);const be=Qn(Q.userAgentHeaderName,ps),Re=Qn(Q.userAgent,Co);return be&&Re&&ne.push(Ht({key:be,value:Re})),ne.push(Yt()),ne.push(function(ve=30){return{create:(Q,ne)=>new Li(Q,ne,ve)}}(Q.rpRegistrationRetryTimeout)),Q.noRetryPolicy||(ne.push(_n()),ne.push(zo()),ne.push(Eo())),ne.push(Ke(Q.deserializationContentTypes)),M.UG&&ne.push(fn()),ne.push(Rt({logger:on.info})),ne}(Re,ne),ne.requestPolicyFactories){const je=ne.requestPolicyFactories(be);je&&(be=je)}}this._requestPolicyFactories=be}sendRequest(Q){if(null==Q||"object"!=typeof Q)throw new Error("options cannot be null or undefined and it must be of type object.");let ne;try{!function(ve){if(ve&&"object"==typeof ve){const Q=ve;if("string"==typeof Q.url&&"string"==typeof Q.method&&"object"==typeof Q.headers&&N(Q.headers)&&"function"==typeof Q.validateRequestProperties&&"function"==typeof Q.prepare&&"function"==typeof Q.clone)return!0}return!1}(Q)?(ne=new q,ne=ne.prepare(Q)):(Q.validateRequestProperties(),ne=Q)}catch(Re){return Promise.reject(Re)}let be=this._httpClient;if(this._requestPolicyFactories&&this._requestPolicyFactories.length>0)for(let Re=this._requestPolicyFactories.length-1;Re>=0;--Re)be=this._requestPolicyFactories[Re].create(be,this._requestPolicyOptions);return be.sendRequest(ne)}sendOperationRequest(Q,ne,be){var Re=this;return(0,Te.Z)(function*(){var je;"function"==typeof Q.options&&(be=Q.options,Q.options=void 0);const tt=null===(je=Q.options)||void 0===je?void 0:je.serializerOptions,gt=new q;let yt;try{const bt=ne.baseUrl||Re.baseUri;if(!bt)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a baseUri string property that contains the base URL to use.");gt.method=ne.httpMethod,gt.operationSpec=ne;const Nt=ge.UK.parse(bt);if(ne.path&&Nt.appendPath(ne.path),ne.urlParameters&&ne.urlParameters.length>0)for(const zt of ne.urlParameters){let Ut=jr(Re,Q,zt,ne.serializer);Ut=ne.serializer.serialize(zt.mapper,Ut,Qt(zt),tt),zt.skipEncoding||(Ut=encodeURIComponent(Ut)),Nt.replaceAll(`{${zt.mapper.serializedName||Qt(zt)}}`,Ut)}if(ne.queryParameters&&ne.queryParameters.length>0)for(const zt of ne.queryParameters){let Ut=jr(Re,Q,zt,ne.serializer);if(null!=Ut){if(Ut=ne.serializer.serialize(zt.mapper,Ut,Qt(zt),tt),null!=zt.collectionFormat)if(zt.collectionFormat===Ur.Multi){if(0===Ut.length)continue;for(const Bn in Ut){const pr=Ut[Bn];Ut[Bn]=null==pr?"":pr.toString()}}else(zt.collectionFormat===Ur.Ssv||zt.collectionFormat===Ur.Tsv)&&(Ut=Ut.join(zt.collectionFormat));if(!zt.skipEncoding)if(Array.isArray(Ut))for(const Bn in Ut)null!=Ut[Bn]&&(Ut[Bn]=encodeURIComponent(Ut[Bn]));else Ut=encodeURIComponent(Ut);null!=zt.collectionFormat&&zt.collectionFormat!==Ur.Multi&&zt.collectionFormat!==Ur.Ssv&&zt.collectionFormat!==Ur.Tsv&&(Ut=Ut.join(zt.collectionFormat)),Nt.setQueryParameter(zt.mapper.serializedName||Qt(zt),Ut)}}gt.url=Nt.toString();const Pt=ne.contentType||Re.requestContentType;if(Pt&&ne.requestBody&&gt.headers.set("Content-Type",Pt),ne.headerParameters)for(const zt of ne.headerParameters){let Ut=jr(Re,Q,zt,ne.serializer);if(null!=Ut){Ut=ne.serializer.serialize(zt.mapper,Ut,Qt(zt),tt);const Bn=zt.mapper.headerCollectionPrefix;if(Bn)for(const pr of Object.keys(Ut))gt.headers.set(Bn+pr,Ut[pr]);else gt.headers.set(zt.mapper.serializedName||Qt(zt),Ut)}}const Dt=Q.options;if(Dt){if(Dt.customHeaders)for(const zt in Dt.customHeaders)gt.headers.set(zt,Dt.customHeaders[zt]);Dt.abortSignal&&(gt.abortSignal=Dt.abortSignal),Dt.timeout&&(gt.timeout=Dt.timeout),Dt.onUploadProgress&&(gt.onUploadProgress=Dt.onUploadProgress),Dt.onDownloadProgress&&(gt.onDownloadProgress=Dt.onDownloadProgress),Dt.spanOptions&&(gt.spanOptions=Dt.spanOptions),Dt.tracingContext&&(gt.tracingContext=Dt.tracingContext),null!=Dt.shouldDeserialize&&(gt.shouldDeserialize=Dt.shouldDeserialize)}let vn,dn;gt.withCredentials=Re._withCredentials,function(ve,Q,ne,be){var Re,je,tt,gt,yt,vt;const bt=null!==(je=null===(Re=ne.options)||void 0===Re?void 0:Re.serializerOptions)&&void 0!==je?je:{},Nt={rootName:null!==(tt=bt.rootName)&&void 0!==tt?tt:"",includeRoot:null!==(gt=bt.includeRoot)&&void 0!==gt&&gt,xmlCharKey:null!==(yt=bt.xmlCharKey)&&void 0!==yt?yt:A.I},Pt=bt.xmlCharKey;if(be.requestBody&&be.requestBody.mapper){Q.body=jr(ve,ne,be.requestBody,be.serializer);const Dt=be.requestBody.mapper,{required:vn,xmlName:dn,xmlElementName:zt,serializedName:Ut,xmlNamespace:Bn,xmlNamespacePrefix:pr}=Dt,nr=Dt.type.name;try{if(null!=Q.body||vn){const $n=Qt(be.requestBody);Q.body=be.serializer.serialize(Dt,Q.body,$n,Nt);const Bi=nr===y.Stream;if(be.isXML){const uo=pr?`xmlns:${pr}`:"xmlns",vi=function(ve,Q,ne,be,Re){if(ve&&!["Composite","Sequence","Dictionary"].includes(ne)){const je={};return je[Re.xmlCharKey]=be,je[A.c]={[Q]:ve},je}return be}(Bn,uo,nr,Q.body,Nt);nr===y.Sequence?Q.body=it(M.WQ(vi,zt||dn||Ut,uo,Bn),{rootName:dn||Ut,xmlCharKey:Pt}):Bi||(Q.body=it(vi,{rootName:dn||Ut,xmlCharKey:Pt}))}else{if(nr===y.String&&((null===(vt=be.contentType)||void 0===vt?void 0:vt.match("text/plain"))||"text"===be.mediaType))return;Bi||(Q.body=JSON.stringify(Q.body))}}}catch($n){throw new Error(`Error "${$n.message}" occurred in serializing the payload - ${JSON.stringify(Ut,void 0,"  ")}.`)}}else if(be.formDataParameters&&be.formDataParameters.length>0){Q.formData={};for(const Dt of be.formDataParameters){const vn=jr(ve,ne,Dt,be.serializer);if(null!=vn){const dn=Dt.mapper.serializedName||Qt(Dt);Q.formData[dn]=be.serializer.serialize(Dt.mapper,vn,Qt(Dt),Nt)}}}}(Re,gt,Q,ne),void 0===gt.streamResponseStatusCodes&&(gt.streamResponseStatusCodes=function(ve){const Q=new Set;for(const ne in ve.responses){const be=ve.responses[ne];be.bodyMapper&&be.bodyMapper.type.name===y.Stream&&Q.add(Number(ne))}return Q}(ne));try{vn=yield Re.sendRequest(gt)}catch(zt){dn=zt}dn?(dn.response&&(dn.details=Xr(dn.response,ne.responses[dn.statusCode]||ne.responses.default)),yt=Promise.reject(dn)):yt=Promise.resolve(Xr(vn,ne.responses[vn.status]))}catch(bt){yt=Promise.reject(bt)}const vt=be;return vt&&yt.then(bt=>vt(null,bt._response.parsedBody,bt._response.request,bt._response)).catch(bt=>vt(bt)),yt})()}}function Qn(ve,Q){let ne;return"string"==typeof ve?ne=ve:(ne=Q(),"function"==typeof ve&&(ne=ve(ne))),ne}function Wn(ve,Q){const ne=[];let be;if(ve.sendStreamingJson&&ne.push({create:(ve,Q)=>new Ra(ve,Q)}),ve.userAgentOptions&&ve.userAgentOptions.userAgentPrefix){const vt=[];vt.push(ve.userAgentOptions.userAgentPrefix);const bt=Co();-1===vt.indexOf(bt)&&vt.push(bt),be=vt.join(" ")}const Re=Object.assign(Object.assign({},ct),ve.keepAliveOptions),je=Object.assign(Object.assign({},Ft),ve.retryOptions),tt=Object.assign(Object.assign({},Xe),ve.redirectOptions);M.UG&&ne.push(fn());const gt=Object.assign(Object.assign({},ut),ve.deserializationOptions),yt=Object.assign({},ve.loggingOptions);return ne.push(xt({userAgent:be}),ze(Re),Ht({value:be}),br(),Ke(gt.expectedContentTypes),Eo(),zo(),_n(je.maxRetries,je.retryDelayInMs,je.maxRetryDelayInMs)),tt.handleRedirects&&ne.push(Yt(tt.maxRetries)),Q&&ne.push(Q),ne.push(Rt(yt)),M.UG&&!1===ve.decompressResponse&&ne.push(xa()),{httpClient:ve.httpClient,requestPolicyFactories:ne}}function jr(ve,Q,ne,be){return Zt(ve,Q,ne.parameterPath,ne.mapper,be)}function Zt(ve,Q,ne,be,Re){var je;let tt;"string"==typeof ne&&(ne=[ne]);const gt=null===(je=Q.options)||void 0===je?void 0:je.serializerOptions;if(Array.isArray(ne)){if(ne.length>0){if(be.isConstant)tt=be.defaultValue;else{let vt=oo(Q,ne);vt.propertyFound||(vt=oo(ve,ne));let bt=!1;vt.propertyFound||(bt=be.required||"options"===ne[0]&&2===ne.length),tt=bt?be.defaultValue:vt.propertyValue}const yt=nn(ne,be);Re.serialize(be,tt,yt,gt)}}else{be.required&&(tt={});for(const yt in ne){const vt=be.type.modelProperties[yt],bt=ne[yt],Nt=Zt(ve,Q,bt,vt,Re),Pt=nn(bt,vt);Re.serialize(vt,Nt,Pt,gt),null!=Nt&&(tt||(tt={}),tt[yt]=Nt)}}return tt}function oo(ve,Q){const ne={propertyFound:!1};let be=0;for(;be<Q.length;++be){const Re=Q[be];if(null==ve||!(Re in ve))break;ve=ve[Re]}return be===Q.length&&(ne.propertyValue=ve,ne.propertyFound=!0),ne}function Xr(ve,Q){const ne=ve.parsedHeaders,be=Q&&Q.bodyMapper,Re=je=>Object.defineProperty(je,"_response",{value:ve});if(be){const je=be.type.name;if("Stream"===je)return Re(Object.assign(Object.assign({},ne),{blobBody:ve.blobBody,readableStreamBody:ve.readableStreamBody}));const tt="Composite"===je&&be.type.modelProperties||{},gt=Object.keys(tt).some(yt=>""===tt[yt].serializedName);if("Sequence"===je||gt){const yt=[...ve.parsedBody||[]];for(const vt of Object.keys(tt))tt[vt].serializedName&&(yt[vt]=ve.parsedBody[vt]);if(ne)for(const vt of Object.keys(ne))yt[vt]=ne[vt];return Re(yt),yt}if("Composite"===je||"Dictionary"===je)return Re(Object.assign(Object.assign({},ne),ve.parsedBody))}return be||"HEAD"===ve.request.method||M.ty(ve.parsedBody)?Re(Object.assign(Object.assign({},ne),{body:ve.parsedBody})):Re(Object.assign(Object.assign({},ne),ve.parsedBody))}function ei(ve){return(0,cr.q)(ve)}class so{constructor(Q=12e4){this.cachedToken=void 0,this.tokenRefreshBufferMs=Q}setCachedToken(Q){this.cachedToken=Q}getCachedToken(){return this.cachedToken&&Date.now()+this.tokenRefreshBufferMs>=this.cachedToken.expiresOnTimestamp&&(this.cachedToken=void 0),this.cachedToken}}class Fi{constructor(Q,ne,be=3e4){this.credential=Q,this.scopes=ne,this.requiredMillisecondsBeforeNewRefresh=be,this.lastCalled=0}isReady(){return!this.lastCalled||Date.now()-this.lastCalled>this.requiredMillisecondsBeforeNewRefresh}getToken(Q){var ne=this;return(0,Te.Z)(function*(){ne.lastCalled=Date.now();const be=yield ne.credential.getToken(ne.scopes,Q);return ne.promise=void 0,be||void 0})()}refresh(Q){return this.promise||(this.promise=this.getToken(Q)),this.promise}}const Rr=hn.g.HeaderConstants;class Aa{constructor(Q,ne,be="Basic"){if(this.authorizationScheme="Basic",null==Q||"string"!=typeof Q.valueOf())throw new Error("userName cannot be null or undefined and must be of type string.");if(null==ne||"string"!=typeof ne.valueOf())throw new Error("password cannot be null or undefined and must be of type string.");this.userName=Q,this.password=ne,this.authorizationScheme=be}signRequest(Q){const be=`${this.authorizationScheme} ${ve=`${this.userName}:${this.password}`,btoa(ve)}`;var ve;return Q.headers||(Q.headers=new m),Q.headers.set(Rr.AUTHORIZATION,be),Promise.resolve(Q)}}class ws{constructor(Q){if(!Q||Q&&!Q.inHeader&&!Q.inQuery)throw new Error('options cannot be null or undefined. Either "inHeader" or "inQuery" property of the options object needs to be provided.');this.inHeader=Q.inHeader,this.inQuery=Q.inQuery}signRequest(Q){if(!Q)return Promise.reject(new Error('webResource cannot be null or undefined and must be of type "object".'));if(this.inHeader){Q.headers||(Q.headers=new m);for(const ne in this.inHeader)Q.headers.set(ne,this.inHeader[ne])}if(this.inQuery){if(!Q.url)return Promise.reject(new Error("url cannot be null in the request object."));Q.url.indexOf("?")<0&&(Q.url+="?");for(const ne in this.inQuery)Q.url.endsWith("?")||(Q.url+="&"),Q.url+=`${ne}=${this.inQuery[ne]}`}return Promise.resolve(Q)}}class ao extends ws{constructor(Q){if(!Q||Q&&"string"!=typeof Q)throw new Error("topicKey cannot be null or undefined and must be of type string.");super({inHeader:{"aeg-sas-key":Q}})}}},6354:(Y,L,E)=>{"use strict";E.d(L,{v:()=>T});var p=E(8239),N=E(2462),m=E(8006),R=E(9484);const u={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4};function M(){return(M=(0,p.Z)(function*(g,h,C){function b(){return w.apply(this,arguments)}function w(){return(w=(0,p.Z)(function*(){if(!(Date.now()<C)){const P=yield g();if(null===P)throw new Error("Failed to refresh access token.");return P}try{return yield g()}catch(P){return null}})).apply(this,arguments)}let I=yield b();for(;null===I;)yield(0,R.g)(h),I=yield b();return I})).apply(this,arguments)}function T(g,h){const C=function(g,h,C){let b=null,w=null;const I=Object.assign(Object.assign({},u),C),P={get isRefreshing(){return null!==b},get shouldRefresh(){var O;return!P.isRefreshing&&(null!==(O=null==w?void 0:w.expiresOnTimestamp)&&void 0!==O?O:0)-I.refreshWindowInMs<Date.now()},get mustRefresh(){return null===w||w.expiresOnTimestamp-I.forcedRefreshWindowInMs<Date.now()}};function k(O){var V;return P.isRefreshing||(b=function(g,h,C){return M.apply(this,arguments)}(()=>g.getToken(h,O),I.retryIntervalInMs,null!==(V=null==w?void 0:w.expiresOnTimestamp)&&void 0!==V?V:Date.now()).then(B=>(b=null,w=B,w)).catch(B=>{throw b=null,w=null,B})),b}return function(){var O=(0,p.Z)(function*(V){return P.mustRefresh?k(V):(P.shouldRefresh&&k(V),w)});return function(V){return O.apply(this,arguments)}}()}(g,h);class b extends N.U{constructor(I,P){super(I,P)}sendRequest(I){var P=this;return(0,p.Z)(function*(){if(!I.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");const{token:k}=yield C({abortSignal:I.abortSignal,tracingOptions:{tracingContext:I.tracingContext}});return I.headers.set(m.g.HeaderConstants.AUTHORIZATION,`Bearer ${k}`),P._nextPolicy.sendRequest(I)})()}}return{create:(w,I)=>new b(w,I)}}},2462:(Y,L,E)=>{"use strict";E.d(L,{U:()=>N,_:()=>m});var p=E(1138);class N{constructor(u,v){this._nextPolicy=u,this._options=v}shouldLog(u){return this._options.shouldLog(u)}log(u,v){this._options.log(u,v)}}class m{constructor(u){this._logger=u}shouldLog(u){return!!this._logger&&u!==p.M.OFF&&u<=this._logger.minimumLogLevel}log(u,v){this._logger&&this.shouldLog(u)&&this._logger.log(u,v)}}},369:(Y,L,E)=>{"use strict";E.d(L,{$4:()=>N,UK:()=>m});var p=E(7694);class N{constructor(){this._rawQuery={}}any(){return Object.keys(this._rawQuery).length>0}keys(){return Object.keys(this._rawQuery)}set(H,W){const te=W;if(H)if(null!=te){const $=Array.isArray(te)?te:te.toString();this._rawQuery[H]=$}else delete this._rawQuery[H]}get(H){return H?this._rawQuery[H]:void 0}toString(){let H="";for(const W in this._rawQuery){H&&(H+="&");const te=this._rawQuery[W];if(Array.isArray(te)){const $=[];for(const pe of te)$.push(`${W}=${pe}`);H+=$.join("&")}else H+=`${W}=${te}`}return H}static parse(H){const W=new N;if(H){H.startsWith("?")&&(H=H.substring(1));let te="ParameterName",$="",pe="";for(let x=0;x<H.length;++x){const r=H[x];switch(te){case"ParameterName":switch(r){case"=":te="ParameterValue";break;case"&":$="",pe="";break;default:$+=r}break;case"ParameterValue":switch(r){case"&":W.set($,pe),$="",pe="",te="ParameterName";break;default:pe+=r}break;default:throw new Error("Unrecognized URLQuery parse state: "+te)}}"ParameterValue"===te&&W.set($,pe)}return W}}class m{setScheme(H){H?this.set(H,"SCHEME"):this._scheme=void 0}getScheme(){return this._scheme}setHost(H){H?this.set(H,"SCHEME_OR_HOST"):this._host=void 0}getHost(){return this._host}setPort(H){null==H||""===H?this._port=void 0:this.set(H.toString(),"PORT")}getPort(){return this._port}setPath(H){if(H){const W=H.indexOf("://");if(-1!==W){const te=H.lastIndexOf("/",W);this.set(-1===te?H:H.substr(te+1),"SCHEME")}else this.set(H,"PATH")}else this._path=void 0}appendPath(H){if(H){let W=this.getPath();W&&(W.endsWith("/")||(W+="/"),H.startsWith("/")&&(H=H.substring(1)),H=W+H),this.set(H,"PATH")}}getPath(){return this._path}setQuery(H){this._query=H?N.parse(H):void 0}setQueryParameter(H,W){H&&(this._query||(this._query=new N),this._query.set(H,W))}getQueryParameterValue(H){return this._query?this._query.get(H):void 0}getQuery(){return this._query?this._query.toString():void 0}set(H,W){const te=new v(H,W);for(;te.next();){const $=te.current();let pe;if($)switch($.type){case"SCHEME":this._scheme=$.text||void 0;break;case"HOST":this._host=$.text||void 0;break;case"PORT":this._port=$.text||void 0;break;case"PATH":pe=$.text||void 0,(!this._path||"/"===this._path||"/"!==pe)&&(this._path=pe);break;case"QUERY":this._query=N.parse($.text);break;default:throw new Error(`Unrecognized URLTokenType: ${$.type}`)}}}toString(){let H="";return this._scheme&&(H+=`${this._scheme}://`),this._host&&(H+=this._host),this._port&&(H+=`:${this._port}`),this._path&&(this._path.startsWith("/")||(H+="/"),H+=this._path),this._query&&this._query.any()&&(H+=`?${this._query.toString()}`),H}replaceAll(H,W){H&&(this.setScheme((0,p.ko)(this.getScheme(),H,W)),this.setHost((0,p.ko)(this.getHost(),H,W)),this.setPort((0,p.ko)(this.getPort(),H,W)),this.setPath((0,p.ko)(this.getPath(),H,W)),this.setQuery((0,p.ko)(this.getQuery(),H,W)))}static parse(H){const W=new m;return W.set(H,"SCHEME_OR_HOST"),W}}class R{constructor(H,W){this.text=H,this.type=W}static scheme(H){return new R(H,"SCHEME")}static host(H){return new R(H,"HOST")}static port(H){return new R(H,"PORT")}static path(H){return new R(H,"PATH")}static query(H){return new R(H,"QUERY")}}class v{constructor(H,W){this._text=H,this._textLength=H?H.length:0,this._currentState=null!=W?W:"SCHEME_OR_HOST",this._currentIndex=0}current(){return this._currentToken}next(){if(A(this))switch(this._currentState){case"SCHEME":!function(B){const H=function(B){return C(B,H=>function(B){const H=B.charCodeAt(0);return 48<=H&&H<=57||65<=H&&H<=90||97<=H&&H<=122}(H))}(B);B._currentToken=R.scheme(H),B._currentState=A(B)?"HOST":"DONE"}(this);break;case"SCHEME_OR_HOST":!function(B){const H=w(B,":","/","?");A(B)?":"===T(B)?"://"===h(B,3)?(B._currentToken=R.scheme(H),B._currentState="HOST"):(B._currentToken=R.host(H),B._currentState="PORT"):(B._currentToken=R.host(H),B._currentState="/"===T(B)?"PATH":"QUERY"):(B._currentToken=R.host(H),B._currentState="DONE")}(this);break;case"HOST":!function(B){"://"===h(B,3)&&g(B,3);const H=w(B,":","/","?");B._currentToken=R.host(H),B._currentState=A(B)?":"===T(B)?"PORT":"/"===T(B)?"PATH":"QUERY":"DONE"}(this);break;case"PORT":!function(B){":"===T(B)&&g(B);const H=w(B,"/","?");B._currentToken=R.port(H),B._currentState=A(B)?"/"===T(B)?"PATH":"QUERY":"DONE"}(this);break;case"PATH":!function(B){const H=w(B,"?");B._currentToken=R.path(H),B._currentState=A(B)?"QUERY":"DONE"}(this);break;case"QUERY":!function(B){"?"===T(B)&&g(B);const H=function(B){let H="";return B._currentIndex<B._textLength&&(H=B._text.substring(B._currentIndex),B._currentIndex=B._textLength),H}(B);B._currentToken=R.query(H),B._currentState="DONE"}(this);break;default:throw new Error(`Unrecognized URLTokenizerState: ${this._currentState}`)}else this._currentToken=void 0;return!!this._currentToken}}function A(B){return B._currentIndex<B._textLength}function T(B){return B._text[B._currentIndex]}function g(B,H){A(B)&&(H||(H=1),B._currentIndex+=H)}function h(B,H){let W=B._currentIndex+H;return B._textLength<W&&(W=B._textLength),B._text.substring(B._currentIndex,W)}function C(B,H){let W="";for(;A(B);){const te=T(B);if(!H(te))break;W+=te,g(B)}return W}function w(B,...H){return C(B,W=>-1===H.indexOf(W))}},8006:(Y,L,E)=>{"use strict";E.d(L,{g:()=>p});const p={coreHttpVersion:"2.3.1",HTTP:"http:",HTTPS:"https:",HTTP_PROXY:"HTTP_PROXY",HTTPS_PROXY:"HTTPS_PROXY",NO_PROXY:"NO_PROXY",ALL_PROXY:"ALL_PROXY",HttpConstants:{HttpVerbs:{PUT:"PUT",GET:"GET",DELETE:"DELETE",POST:"POST",MERGE:"MERGE",HEAD:"HEAD",PATCH:"PATCH"},StatusCodes:{TooManyRequests:429,ServiceUnavailable:503}},HeaderConstants:{AUTHORIZATION:"authorization",AUTHORIZATION_SCHEME:"Bearer",RETRY_AFTER:"Retry-After",USER_AGENT:"User-Agent"}}},4510:(Y,L,E)=>{"use strict";E.d(L,{c:()=>p,I:()=>N});const p="$",N="_"},7694:(Y,L,E)=>{"use strict";E.d(L,{ef:()=>pe,Hh:()=>k,Zf:()=>H,Rl:()=>B,_9:()=>r,UG:()=>I,Kn:()=>f,ty:()=>l,TP:()=>U,WQ:()=>$,_Q:()=>W,yj:()=>te,ko:()=>s,Fl:()=>V,eg:()=>O});var N,p=E(4510),m=new Uint8Array(16);function R(){if(!N&&!(N="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return N(m)}const u=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,M=function(_){return"string"==typeof _&&u.test(_)};for(var A=[],T=0;T<256;++T)A.push((T+256).toString(16).substr(1));const b=function(_,D,d){var i=(_=_||{}).random||(_.rng||R)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,D){d=d||0;for(var y=0;y<16;++y)D[d+y]=i[y];return D}return function(_){var D=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=(A[_[D+0]]+A[_[D+1]]+A[_[D+2]]+A[_[D+3]]+"-"+A[_[D+4]]+A[_[D+5]]+"-"+A[_[D+6]]+A[_[D+7]]+"-"+A[_[D+8]]+A[_[D+9]]+"-"+A[_[D+10]]+A[_[D+11]]+A[_[D+12]]+A[_[D+13]]+A[_[D+14]]+A[_[D+15]]).toLowerCase();if(!M(d))throw TypeError("Stringified UUID is invalid");return d}(i)},w=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i,I="undefined"!=typeof process&&!!process.version&&!!process.versions&&!!process.versions.node;function k(_){return encodeURIComponent(_).replace(/!/g,"%21").replace(/"/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function O(_){const D={};return D.body=_.bodyAsText,D.headers=_.headers,D.status=_.status,D}function V(_){const D=_.clone();return D.headers&&D.headers.remove("authorization"),D}function U(_){return w.test(_)}function B(){return b()}function H(_,D){let d=Promise.resolve(D);return _.forEach(i=>{d=d.then(i)}),d}function W(_){if("function"!=typeof _.then)throw new Error("The provided input is not a Promise.");return D=>{_.then(d=>D(void 0,d)).catch(d=>{D(d)})}}function te(_){if("function"!=typeof _.then)throw new Error("The provided input is not a Promise.");return D=>{_.then(d=>process.nextTick(D,void 0,d.parsedBody,d.request,d)).catch(d=>{process.nextTick(D,d)})}}function $(_,D,d,i){if(Array.isArray(_)||(_=[_]),!d||!i)return{[D]:_};const y={[D]:_};return y[p.c]={[d]:i},y}function pe(_,D){const d=_;D.forEach(i=>{Object.getOwnPropertyNames(i.prototype).forEach(y=>{d.prototype[y]=i.prototype[y]})})}const x=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function r(_){return x.test(_)}function s(_,D,d){return _&&D?_.split(D).join(d||""):_}function l(_){return"object"!=typeof _&&"function"!=typeof _||null===_}function f(_){return!("object"!=typeof _||null===_||Array.isArray(_)||_ instanceof RegExp||_ instanceof Date)}},1259:(Y,L,E)=>{"use strict";E.d(L,{q:()=>u});var p=E(9432),N=E(2999),m=E(3259);function u(v){return function(M,A){const T=(0,p.Yz)(),g=(null==A?void 0:A.tracingOptions)||{},h=Object.assign({kind:p.MU.INTERNAL},g.spanOptions),C=v.packagePrefix?`${v.packagePrefix}.${M}`:M;let b;b=function(){var v;if("undefined"==typeof process)return!1;const M=null===(v=process.env.AZURE_TRACING_DISABLED)||void 0===v?void 0:v.toLowerCase();return"false"!==M&&"0"!==M&&Boolean(M)}()?N.g.wrapSpanContext(m.Rr):T.startSpan(C,h,g.tracingContext),v.namespace&&b.setAttribute("az.namespace",v.namespace);let w=g.spanOptions||{};b.isRecording()&&v.namespace&&(w=Object.assign(Object.assign({},g.spanOptions),{attributes:Object.assign(Object.assign({},h.attributes),{"az.namespace":v.namespace})}));const I=Object.assign(Object.assign({},g),{spanOptions:w,tracingContext:(0,p.WZ)(g.tracingContext||p.Do.active(),b)});return{span:b,updatedOptions:Object.assign(Object.assign({},A),{tracingOptions:I})}}}},9432:(Y,L,E)=>{"use strict";E.d(L,{MU:()=>R,Qn:()=>C,Do:()=>h,Yz:()=>g,BM:()=>T,WZ:()=>v});var N=E(723).c.getInstance(),m=E(2999),R=(()=>{return(b=R||(R={}))[b.INTERNAL=0]="INTERNAL",b[b.SERVER=1]="SERVER",b[b.CLIENT=2]="CLIENT",b[b.PRODUCER=3]="PRODUCER",b[b.CONSUMER=4]="CONSUMER",R;var b})();function v(b,w){return m.g.setSpan(b,w)}function T(b){return m.g.isSpanContextValid(b)}function g(b,w){return m.g.getTracer(b||"azure/core-tracing",w)}const h=N;var C=(()=>{return(b=C||(C={}))[b.UNSET=0]="UNSET",b[b.OK=1]="OK",b[b.ERROR=2]="ERROR",C;var b})()},9484:(Y,L,E)=>{"use strict";E.d(L,{g:()=>v});var p=E(5283);function v(M,A){return new Promise((T,g)=>{let h,C;const b=()=>{var I;return g(new p._(null!==(I=null==A?void 0:A.abortErrorMsg)&&void 0!==I?I:"The operation was aborted."))},w=()=>{(null==A?void 0:A.abortSignal)&&C&&A.abortSignal.removeEventListener("abort",C)};if(C=()=>(function(M){return null!=M}(h)&&clearTimeout(h),w(),b()),(null==A?void 0:A.abortSignal)&&A.abortSignal.aborted)return b();h=setTimeout(()=>{w(),T()},M),(null==A?void 0:A.abortSignal)&&A.abortSignal.addEventListener("abort",C)})}},1326:(Y,L,E)=>{"use strict";E.d(L,{YR:()=>W});const N="undefined"!=typeof process&&process.env&&process.env.DEBUG||void 0;let m,R=[],u=[];const v=[];N&&A(N);const M=Object.assign(r=>h(r),{enable:A,enabled:T,disable:function(){const r=m||"";return A(""),r},log:function(...r){if(r.length>0){const s=String(r[0]);s.includes(":error")?console.error(...r):s.includes(":warning")?console.warn(...r):s.includes(":info")?console.info(...r):(s.includes(":verbose"),console.debug(...r))}}});function A(r){m=r,R=[],u=[];const s=/\*/g,l=r.split(",").map(a=>a.trim().replace(s,".*?"));for(const a of l)a.startsWith("-")?u.push(new RegExp(`^${a.substr(1)}$`)):R.push(new RegExp(`^${a}$`));for(const a of v)a.enabled=T(a.namespace)}function T(r){if(r.endsWith("*"))return!0;for(const s of u)if(s.test(r))return!1;for(const s of R)if(s.test(r))return!0;return!1}function h(r){const s=Object.assign(function(...a){!s.enabled||(a.length>0&&(a[0]=`${r} ${a[0]}`),s.log(...a))},{enabled:T(r),destroy:C,log:M.log,namespace:r,extend:b});return v.push(s),s}function C(){const r=v.indexOf(this);return r>=0&&(v.splice(r,1),!0)}function b(r){const s=h(`${this.namespace}:${r}`);return s.log=this.log,s}const w=M,I=new Set,P="undefined"!=typeof process&&process.env&&process.env.AZURE_LOG_LEVEL||void 0;let k;const O=w("azure");O.log=(...r)=>{w.log(...r)};const V=["verbose","info","warning","error"];P&&(x(P)?function(r){if(r&&!x(r))throw new Error(`Unknown log level '${r}'. Acceptable values: ${V.join(",")}`);k=r;const s=[];for(const l of I)pe(l)&&s.push(l.namespace);w.enable(s.join(","))}(P):console.error(`AZURE_LOG_LEVEL set to unknown log level '${P}'; logging is not enabled. Acceptable values: ${V.join(", ")}.`));const H={verbose:400,info:300,warning:200,error:100};function W(r){const s=O.extend(r);return te(O,s),{error:$(s,"error"),warning:$(s,"warning"),info:$(s,"info"),verbose:$(s,"verbose")}}function te(r,s){s.log=(...l)=>{r.log(...l)}}function $(r,s){const l=Object.assign(r.extend(s),{level:s});if(te(r,l),pe(l)){const a=w.disable();w.enable(a+","+l.namespace)}return I.add(l),l}function pe(r){return!!(k&&H[r.level]<=H[k])}function x(r){return V.includes(r)}},5413:(Y,L,E)=>{"use strict";var p=E(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var N=p(E(9901)),m=p(E(5633)),R=E(2e3),u=function v(){(0,N.default)(this,v)};L.default=u,(0,m.default)(u,"requiredOmnichannelConfigurationParameters",["orgUrl","orgId","widgetId"]),(0,m.default)(u,"defaultHeaders",{"Content-Type":"application/json"}),(0,m.default)(u,"bypassCacheHeaders",{"Cache-Control":"no-store, must-revalidate, no-cache","X-Cache-Control":"no-store"}),(0,m.default)(u,"defaultChannelId",R.ChannelId.LCW),(0,m.default)(u,"defaultLocale","en-us"),(0,m.default)(u,"noContentStatusCode",204),(0,m.default)(u,"tooManyRequestsStatusCode",429),(0,m.default)(u,"sensitiveProperties",["AuthenticatedUserToken"]),(0,m.default)(u,"transactionid","transaction-id"),(0,m.default)(u,"customerDisplayName","customerDisplayName"),(0,m.default)(u,"hiddenContentPlaceholder","*content hidden*"),(0,m.default)(u,"axiosTimeoutErrorCode","ECONNABORTED")},2e3:(Y,L)=>{"use strict";var E,A,p,N,m,R,u,v,M;Object.defineProperty(L,"__esModule",{value:!0}),L.SDKError=L.LiveChatVersion=L.OCSDKTelemetryEvent=L.ChannelId=L.OperatingSystem=L.DeviceType=L.Browser=L.BrowserVendor=void 0,L.BrowserVendor=E,(A=E||(L.BrowserVendor=E={})).IE="IE",A.CHROME="Chrome",A.FIREFOX="Firefox",A.SAFARI="Safari",A.EDGE="Edge",A.EDGE_CHROMIUM="Edg",A.OPERA="Opera",A.UNKNOWN="Unknown",L.Browser=p,function(A){A[A.Chrome=0]="Chrome",A[A.Firefox=1]="Firefox",A[A.Ie=2]="Ie",A[A.Edge=3]="Edge",A[A.Safari=4]="Safari",A[A.None=5]="None"}(p||(L.Browser=p={})),L.DeviceType=N,function(A){A.Desktop="Desktop",A.Mobile="Mobile",A.Tablet="Tablet"}(N||(L.DeviceType=N={})),L.OperatingSystem=m,function(A){A.WINDOWS="Windows",A.MACOSX="Mac OS X",A.WINDOWS_PHONE="Windows Phone",A.WINDOWS_RT="Windows RT",A.IOS="iOS",A.ANDROID="Android",A.LINUX="Linux",A.UNKNOWN="Unknown"}(m||(L.OperatingSystem=m={})),L.ChannelId=R,function(A){A.LCW="lcw",A.SMS="sms",A.FACEBOOK="facebook",A.WECHAT="wechat"}(R||(L.ChannelId=R={})),L.OCSDKTelemetryEvent=u,function(A){A.GETCHATCONFIG="GetChatConfig",A.GETCHATCONFIGSUCCESS="GetChatConfigSucceeded",A.GETRECONNECTABLECHATS="GetReconnnectableChats",A.GETRECONNECTAVAILABILITY="GetReconnnectableAvailability",A.GETCHATTOKENSTARTED="GetChatTokenStarted",A.GETCHATTOKENSUCCEEDED="GetChatTokenSucceeded",A.GETCHATTOKENFAILED="GetChatTokenFailed",A.GETLWISTATUSSTARTED="GetLwiStatusStarted",A.GETLWISTATUSSUCCEEDED="GetLwiStatusSucceeded",A.GETLWISTATUSFAILED="GetLwiStatusFailed",A.SESSIONINITSTARTED="SessionInitStarted",A.SESSIONINITSUCCEEDED="SessionInitSucceeded",A.SESSIONINITFAILED="SessionInitFailed",A.SESSIONCLOSESTARTED="SessionCloseStarted",A.SESSIONCLOSESUCCEEDED="SessionCloseSucceeded",A.SESSIONCLOSEFAILED="SessionCloseFailed",A.SUBMITPOSTCHATSTARTED="SubmitPostChatStarted",A.SUBMITPOSTCHATSUCCEEDED="SubmitPostChatSucceeded",A.SUBMITPOSTCHATFAILED="SubmitPostChatFailed",A.GETCHATTRANSCRIPTSTARTED="GetChatTranscriptStarted",A.GETCHATTRANSCRIPTSUCCEEDED="GetChatTranscriptSucceeded",A.GETCHATTRANSCRIPTFAILED="GetChatTranscriptFailed",A.EMAILTRANSCRIPTSTARTED="EmailTranscriptStarted",A.EMAILTRANSCRIPTSUCCEEDED="EmailTranscriptSucceeded",A.EMAILTRANSCRIPTFAILED="EmailTranscriptFailed",A.FETCHDATAMASKINGSTARTED="FetchDataMaskingStarted",A.FETCHDATAMASKINGSUCCEEDED="FetchDataMaskingSucceeded",A.FETCHDATAMASKINGFAILED="FetchDataMaskingFailed",A.SECONDARYCHANNELEVENTREQUESTSTARTED="SecondaryChannelEventRequestStarted",A.SECONDARYCHANNELEVENTREQUESTSUCCEEDED="SecondaryChannelEventRequestSucceeded",A.SECONDARYCHANNELEVENTREQUESTFAILED="SecondaryChannelEventRequestFailed",A.GETSURVEYINVITELINKSTARTED="GetSurveyInviteLinkStarted",A.GETSURVEYINVITELINKSUCCEEDED="GetSurveyInviteLinkSucceeded",A.GETSURVEYINVITELINKFAILED="GetSurveyInviteLinkFailed",A.VALIDATEAUTHCHATRECORDSTARTED="ValidateAuthChatRecordStarted",A.VALIDATEAUTHCHATRECORDSUCCEEDED="ValidateAuthChatRecordSucceeded",A.VALIDATEAUTHCHATRECORDFAILED="ValidateAuthChatRecordFailed",A.GETAGENTAVAILABILITYSTARTED="GetAgentAvailabilityStarted",A.GETAGENTAVAILABILITYSUCCEEDED="GetAgentAvailabilitySucceeded",A.GETAGENTAVAILABILITYFAILED="GetAgentAvailabilityFailed",A.SENDTYPINGINDICATORFAILED="SendTypingIndicatorFailed",A.SENDTYPINGINDICATORSUCCEEDED="SendTypingIndicatorSucceeded"}(u||(L.OCSDKTelemetryEvent=u={})),L.LiveChatVersion=v,function(A){A[A.V1=1]="V1",A[A.V2=2]="V2"}(v||(L.LiveChatVersion=v={})),L.SDKError=M,function(A){A.ClientHTTPTimeoutErrorName="ClientHTTPTimeoutError",A.ClientHTTPTimeoutErrorMessage="Server took too long to respond"}(M||(L.SDKError=M={}))},3096:(Y,L,E)=>{"use strict";var p=E(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var N=p(E(9901)),m=p(E(9524));L.default=function(){function u(){(0,N.default)(this,u)}return(0,m.default)(u,null,[{key:"OCSDKLOAD",get:function(){return"oc:sdk:load"}}]),u}()},4950:(Y,L,E)=>{"use strict";var p=E(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var N=p(E(9901)),m=p(E(5633)),R=function u(){(0,N.default)(this,u)};L.default=R,(0,m.default)(R,"supportedLocales",["ar-sa","bg-bg","ca-es","cs-cz","da-dk","de-de","el-gr","en-us","es-es","et-ee","eu-es","fi-fi","fr-fr","gl-es","he-il","hi-in","hr-hr","hu-hu","id-id","it-it","ja-jp","kk-kz","ko-kr","lt-lt","lv-lv","ms-my","nb-no","nl-nl","pl-pl","pt-br","pt-pt","ro-ro","ru-ru","sk-sk","sl-si","sr-cyrl-cs","sr-latn-cs","sv-se","th-th","tr-tr","uk-ua","vi-vn","zh-cn","zh-hk","zh-tw"])},4162:(Y,L,E)=>{"use strict";var p=E(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var N=p(E(9901)),m=p(E(9524)),R=p(E(5633)),u=p(E(7276));L.default=function(){function M(A){(0,N.default)(this,M),(0,R.default)(this,"logger",void 0),this.logger=A}return(0,m.default)(M,[{key:"log",value:function(T,g,h,C){if(this.isLoggingEnabled()){var b=u.default.GETTELEMETRYEVENTDATA(g,h,C);this.logEvent(T,b)}}},{key:"logEvent",value:function(T,g){this.isLoggingEnabled()&&setTimeout(this.logger.logClientSdkTelemetryEvent.bind(this.logger),0,T,g)}},{key:"isLoggingEnabled",value:function(){return!this.isNullOrUndefined(this.logger)}},{key:"isNullOrUndefined",value:function(T){return null==T}}]),M}()},2172:(Y,L,E)=>{"use strict";var p=E(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var N=p(E(9901)),m=p(E(5633)),R=function u(){(0,N.default)(this,u)};L.default=R,(0,m.default)(R,"LiveChatConfigPath","livechatconnector/config"),(0,m.default)(R,"LiveChatSessionInitPath","livechatconnector/sessioninit"),(0,m.default)(R,"LiveChatAuthSessionInitPath","livechatconnector/auth/sessioninit"),(0,m.default)(R,"LiveChatGetChatTokenPath","livechatconnector/getchattoken"),(0,m.default)(R,"LiveChatv2GetChatTokenPath","livechatconnector/v2/getchattoken"),(0,m.default)(R,"LiveChatAuthGetChatTokenPath","livechatconnector/auth/getchattoken"),(0,m.default)(R,"LiveChatv2AuthGetChatTokenPath","livechatconnector/v2/auth/getchattoken"),(0,m.default)(R,"LiveChatSessionClosePath","livechatconnector/sessionclose"),(0,m.default)(R,"LiveChatAuthSessionClosePath","livechatconnector/auth/sessionclose"),(0,m.default)(R,"LiveChatSubmitPostChatPath","survey/submitpostchat"),(0,m.default)(R,"LiveChatAuthSubmitPostChatPath","survey/auth/submitpostchat"),(0,m.default)(R,"LiveChatGetSurveyInviteLinkPath","livechatconnector/getsurveyinvite"),(0,m.default)(R,"LiveChatAuthGetSurveyInviteLinkPath","livechatconnector/auth/getsurveyinvite"),(0,m.default)(R,"LiveChatGetChatTranscriptPath","livechatconnector/getchattranscripts"),(0,m.default)(R,"LiveChatv2GetChatTranscriptPath","livechatconnector/v2/getchattranscripts"),(0,m.default)(R,"LiveChatAuthGetChatTranscriptPath","livechatconnector/auth/getchattranscripts"),(0,m.default)(R,"LiveChatv2AuthGetChatTranscriptPath","livechatconnector/v2/auth/getchattranscripts"),(0,m.default)(R,"LiveChatTranscriptEmailRequestPath","livechatconnector/createemailrequest"),(0,m.default)(R,"LiveChatAuthTranscriptEmailRequestPath","livechatconnector/auth/createemailrequest"),(0,m.default)(R,"LiveChatFetchDataMaskingInfoPath","livechatconnector/fetchdatamaskinginfo"),(0,m.default)(R,"LiveChatSecondaryChannelEventPath","livechatconnector/secondarychannelevent"),(0,m.default)(R,"LiveChatAuthSecondaryChannelEventPath","livechatconnector/auth/secondarychannelevent"),(0,m.default)(R,"LiveChatLiveWorkItemDetailsPath","livechatconnector/getliveworkitemdetails"),(0,m.default)(R,"LiveChatAuthLiveWorkItemDetailsPath","livechatconnector/auth/getliveworkitemdetails"),(0,m.default)(R,"LiveChatGetReconnectableChatsPath","livechatconnector/auth/reconnectablechats"),(0,m.default)(R,"LiveChatReconnectAvailabilityPath","livechatconnector/reconnect"),(0,m.default)(R,"LiveChatValidateAuthChatMapRecordPath","livechatconnector/auth/validateauthchatmaprecord"),(0,m.default)(R,"GetAgentAvailabilityPath","livechatconnector/auth/getagentavailability"),(0,m.default)(R,"SendTypingIndicatorPath","inbound/typingindicator/livechat/sendtypingindicator")},1858:(Y,L,E)=>{"use strict";var p=E(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var N=p(E(9901)),m=p(E(5633)),R=function u(){(0,N.default)(this,u)};L.default=R,(0,m.default)(R,"authenticatedUserToken","AuthenticatedUserToken"),(0,m.default)(R,"authorization","Authorization"),(0,m.default)(R,"organizationId","OrganizationId"),(0,m.default)(R,"widgetAppId","widgetAppId"),(0,m.default)(R,"requestId","Request-Id")},6528:(Y,L)=>{"use strict";var E,p;Object.defineProperty(L,"__esModule",{value:!0}),L.LogLevel=void 0,L.LogLevel=E,(p=E||(L.LogLevel=E={})).INFO="INFO",p.DEBUG="DEBUG",p.WARN="WARN",p.ERROR="ERROR"},8634:(Y,L,E)=>{"use strict";var p=E(3621),N=E(4738);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var m=p(E(617)),R=p(E(8979)),u=p(E(4738)),v=p(E(9901)),M=p(E(9524)),A=p(E(5633)),T=E(2e3),g=p(E(8686)),h=E(4717),C=p(E(5413)),b=E(6812),w=p(E(4950)),I=E(9569),P=E(6528),k=E(7169),O=p(E(2172)),V=p(E(1858)),U=E(3945),B=p(E(1729)),H=E(8566),W=function(D,d){if(D&&D.__esModule)return D;if(null===D||"object"!==N(D)&&"function"!=typeof D)return{default:D};var i=pe(d);if(i&&i.has(D))return i.get(D);var y={},z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var q in D)if("default"!==q&&Object.prototype.hasOwnProperty.call(D,q)){var Z=z?Object.getOwnPropertyDescriptor(D,q):null;Z&&(Z.get||Z.set)?Object.defineProperty(y,q,Z):y[q]=D[q]}return y.default=D,i&&i.set(D,y),y}(E(9726)),te=E(9114),$=p(E(2867));function pe(D){if("function"!=typeof WeakMap)return null;var d=new WeakMap,i=new WeakMap;return(pe=function(z){return z?i:d})(D)}function r(D,d){var i=Object.keys(D);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(D);d&&(y=y.filter(function(z){return Object.getOwnPropertyDescriptor(D,z).enumerable})),i.push.apply(i,y)}return i}function s(D){for(var d=1;d<arguments.length;d++){var i=null!=arguments[d]?arguments[d]:{};d%2?r(Object(i),!0).forEach(function(y){(0,A.default)(D,y,i[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach(function(y){Object.defineProperty(D,y,Object.getOwnPropertyDescriptor(i,y))})}return D}function l(D,d){var i="undefined"!=typeof Symbol&&D[Symbol.iterator]||D["@@iterator"];if(!i){if(Array.isArray(D)||(i=function(D,d){if(D){if("string"==typeof D)return f(D,d);var i=Object.prototype.toString.call(D).slice(8,-1);if("Object"===i&&D.constructor&&(i=D.constructor.name),"Map"===i||"Set"===i)return Array.from(D);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return f(D,d)}}(D))||d&&D&&"number"==typeof D.length){i&&(D=i);var y=0,z=function(){};return{s:z,n:function(){return y>=D.length?{done:!0}:{done:!1,value:D[y++]}},e:function(le){throw le},f:z}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var ge,q=!0,Z=!1;return{s:function(){i=i.call(D)},n:function(){var le=i.next();return q=le.done,le},e:function(le){Z=!0,ge=le},f:function(){try{!q&&null!=i.return&&i.return()}finally{if(Z)throw ge}}}}function f(D,d){(null==d||d>D.length)&&(d=D.length);for(var i=0,y=new Array(d);i<d;i++)y[i]=D[i];return y}var _=function(){function D(d){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D.defaultConfiguration,y=arguments.length>2?arguments[2]:void 0;(0,v.default)(this,D),this.omnichannelConfiguration=d,this.configuration=i,this.logger=y,(0,A.default)(this,"liveChatVersion",void 0),(!Object.keys(this.configuration).length||"object"!==(0,u.default)(i))&&(this.configuration=D.defaultConfiguration);for(var z=0,q=Object.keys(D.defaultConfiguration);z<q.length;z++){var Z=q[z];this.configuration.hasOwnProperty(Z)||(this.configuration["".concat(Z)]=D.defaultConfiguration["".concat(Z)])}for(var ge=0,me=Object.keys(D.defaultConfiguration.requestTimeoutConfig);ge<me.length;ge++){var le=me[ge];this.configuration.requestTimeoutConfig.hasOwnProperty(le)||(this.configuration.requestTimeoutConfig["".concat(le)]=D.defaultConfiguration.requestTimeoutConfig["".concat(le)])}var fe=d.channelId;if(!Object.values(T.ChannelId).includes(fe))throw new Error("Invalid channelId");var xe,ae=Object.keys(d),de=l(C.default.requiredOmnichannelConfigurationParameters);try{for(de.s();!(xe=de.n()).done;){var Ce=xe.value;if(!ae.includes(Ce))throw new Error("Missing '".concat(Ce,"' in OmnichannelConfiguration"))}}catch(oe){de.e(oe)}finally{de.f()}this.liveChatVersion=T.LiveChatVersion.V1}return(0,M.default)(D,[{key:"getChatConfig",value:(d=(0,R.default)(m.default.mark(function y(z){var q,Z,ge,me,le,fe,ae,de,xe,Ce,oe,we=arguments;return m.default.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return Z=we.length>1&&void 0!==we[1]&&we[1],ge=U.Timer.TIMER(),this.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.GETCHATCONFIG,"Get Chat config started",z),z||(z=(0,H.uuidv4)()),me="/".concat(O.default.LiveChatConfigPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"?requestId=").concat(z,"&channelId=").concat(this.omnichannelConfiguration.channelId),le="GET",fe="".concat(this.omnichannelConfiguration.orgUrl).concat(me),ae=g.default.create(),(0,B.default)(ae,{retries:this.configuration.maxRequestRetriesOnFailure}),de={},Z&&(de=s(s({},C.default.bypassCacheHeaders),de)),re.next=13,ae.get(fe,{headers:de,timeout:null!==(q=this.configuration.defaultRequestTimeout)&&void 0!==q?q:this.configuration.requestTimeoutConfig.getChatConfig});case 13:return Ce=ge.milliSecondsElapsed,(oe=(xe=re.sent).data).LiveChatVersion&&oe.LiveChatVersion===T.LiveChatVersion.V2&&(this.liveChatVersion=oe.LiveChatVersion),oe.headers={},xe.headers&&xe.headers.date&&(oe.headers.date=xe.headers.date),this.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.GETCHATCONFIGSUCCESS,"Get Chat config succeeded",z,xe,Ce,me,le),re.abrupt("return",oe);case 21:case"end":return re.stop()}},y,this)})),function(y){return d.apply(this,arguments)})},{key:"getLWIDetails",value:function(){var d=(0,R.default)(m.default.mark(function y(z){var q,ge,me,le,fe,ae,de,xe,Ce,oe,we,Z=this,ye=arguments;return m.default.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ge=ye.length>1&&void 0!==ye[1]?ye[1]:{},me=U.Timer.TIMER(),this.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.GETLWISTATUSSTARTED,"Get LWI Details Started",z),z||(z=(0,H.uuidv4)()),le="/".concat(O.default.LiveChatLiveWorkItemDetailsPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z),fe=g.default.create(),(0,B.default)(fe,{retries:this.configuration.maxRequestRetriesOnFailure}),de=ge.reconnectId,xe=C.default.defaultHeaders,(ae=ge.authenticatedUserToken)&&(le="/".concat(O.default.LiveChatAuthLiveWorkItemDetailsPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z),xe[V.default.authenticatedUserToken]=ae),de&&(le+="/".concat(de)),le+="?channelId=".concat(this.omnichannelConfiguration.channelId),Ce="".concat(this.omnichannelConfiguration.orgUrl).concat(le),we={headers:xe,method:oe="GET",url:Ce,timeout:null!==(q=this.configuration.defaultRequestTimeout)&&void 0!==q?q:this.configuration.requestTimeoutConfig.getLWIDetails},ee.abrupt("return",new Promise(function(){var J=(0,R.default)(m.default.mark(function ue(Ae,Te){var Ee,Ne;return m.default.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return De.prev=0,De.next=3,fe(we);case 3:Ne=(Ee=De.sent).data,Z.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.GETLWISTATUSSUCCEEDED,"Get LWI Details succeeded",z,Ee,me.milliSecondsElapsed,le,oe),Ae(Ne),De.next=16;break;case 10:De.prev=10,De.t0=De.catch(0),Z.logWithLogger(P.LogLevel.ERROR,T.OCSDKTelemetryEvent.GETLWISTATUSFAILED,"Get LWI Details failed",z,void 0,me.milliSecondsElapsed,le,oe,De.t0),De.t0.code===C.default.axiosTimeoutErrorCode&&(0,$.default)(),Te();case 16:case"end":return De.stop()}},ue,null,[[0,10]])}));return function(ue,Ae){return J.apply(this,arguments)}}()));case 16:case"end":return ee.stop()}},y,this)}));return function(y){return d.apply(this,arguments)}}()},{key:"getChatToken",value:function(){var d=(0,R.default)(m.default.mark(function y(z){var q,ge,me,le,fe,ae,de,xe,Ce,oe,we,ye,re,ee,Z=this,J=arguments;return m.default.wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:if(ge=J.length>1&&void 0!==J[1]?J[1]:{},me=J.length>2&&void 0!==J[2]?J[2]:0,le=U.Timer.TIMER(),fe=ge.reconnectId,ae=ge.authenticatedUserToken,de=ge.currentLiveChatVersion,this.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.GETCHATTOKENSTARTED,"Get Chat Token Started",z),!(me<0)){Ae.next=7;break}throw new Error("Invalid currentRetryCount");case 7:return z||(z=(0,H.uuidv4)()),xe=C.default.defaultHeaders,Ce="/".concat(O.default.LiveChatGetChatTokenPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z),this.liveChatVersion===T.LiveChatVersion.V2||de&&de===T.LiveChatVersion.V2?(Ce="/".concat(O.default.LiveChatv2GetChatTokenPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z),ae&&(Ce="/".concat(O.default.LiveChatv2AuthGetChatTokenPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z),xe[V.default.authenticatedUserToken]=ae)):ae&&(Ce="/".concat(O.default.LiveChatAuthGetChatTokenPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z),xe[V.default.authenticatedUserToken]=ae),fe&&(Ce+="/".concat(fe)),oe="channelId=".concat(this.omnichannelConfiguration.channelId),Ce+="?".concat(oe),we="".concat(this.omnichannelConfiguration.orgUrl).concat(Ce),re={headers:xe,method:ye="GET",url:we,timeout:null!==(q=this.configuration.defaultRequestTimeout)&&void 0!==q?q:this.configuration.requestTimeoutConfig.getChatToken},ee=g.default.create(),(0,B.default)(ee,{retries:this.configuration.maxRequestRetriesOnFailure,retryOn429:this.configuration.getChatTokenRetryOn429}),Ae.abrupt("return",new Promise(function(){var Te=(0,R.default)(m.default.mark(function Ee(We,Ne){var _e,Be,De,Le,Mt;return m.default.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:return _e=void 0,It.prev=1,It.next=4,ee(re);case 4:if(De=le.milliSecondsElapsed,!(Le=(Be=It.sent).data)){It.next=12;break}return Le.requestId=z,Z.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.GETCHATTOKENSUCCEEDED,"Get Chat Token succeeded",z,Be,De,Ce,ye),We(Le),It.abrupt("return");case 12:if(!fe||Be.status!==C.default.noContentStatusCode){It.next=15;break}return Ne(Be),It.abrupt("return");case 15:It.next=25;break;case 17:if(It.prev=17,It.t0=It.catch(1),Z.logWithLogger(P.LogLevel.ERROR,T.OCSDKTelemetryEvent.GETCHATTOKENFAILED,"Get Chat Token failed",z,void 0,le.milliSecondsElapsed,Ce,ye,It.t0),_e=It.t0,(null===(Mt=It.t0.response)||void 0===Mt?void 0:Mt.status)!==C.default.tooManyRequestsStatusCode||Z.configuration.getChatTokenRetryOn429){It.next=25;break}return Ne(It.t0),It.abrupt("return");case 25:if(!(me+1>=Z.configuration.getChatTokenRetryCount)){It.next=28;break}return _e&&_e.code==C.default.axiosTimeoutErrorCode?(0,$.default)():Ne(new Error("The retry for getchattoken has exceeded its max value of ".concat(Z.configuration.getChatTokenRetryCount))),It.abrupt("return");case 28:setTimeout(function(){Z.getChatToken(z,ge,me+1).then(function(et){return We(et)}).catch(function(et){return Ne(et)})},Z.configuration.getChatTokenTimeBetweenRetriesOnFailure);case 29:case"end":return It.stop()}},Ee,null,[[1,17]])}));return function(Ee,We){return Te.apply(this,arguments)}}()));case 20:case"end":return Ae.stop()}},y,this)}));return function(y){return d.apply(this,arguments)}}()},{key:"getReconnectableChats",value:function(){var d=(0,R.default)(m.default.mark(function y(z){var q,ge,me,le,fe,ae,xe,Ce,oe,Z=this;return m.default.wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return ge=U.Timer.TIMER(),me=z.authenticatedUserToken,this.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.GETRECONNECTABLECHATS,"Get Reconnectable chat Started"),le="/".concat(O.default.LiveChatGetReconnectableChatsPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(this.omnichannelConfiguration.orgId,"?channelId=").concat(this.omnichannelConfiguration.channelId),(fe=C.default.defaultHeaders)[V.default.authenticatedUserToken]=me,ae="".concat(this.omnichannelConfiguration.orgUrl).concat(le),xe={headers:fe,method:"GET",url:ae,timeout:null!==(q=this.configuration.defaultRequestTimeout)&&void 0!==q?q:this.configuration.requestTimeoutConfig.getReconnectableChats},Ce=g.default.create(),oe=this.omnichannelConfiguration.orgId,ye.abrupt("return",new Promise(function(){var re=(0,R.default)(m.default.mark(function ee(J,ue){var Ae,Te,Ee;return m.default.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return _e.prev=0,_e.next=3,Ce(xe);case 3:if(Te=ge.milliSecondsElapsed,!(Ee=(Ae=_e.sent).data)){_e.next=10;break}return Z.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.GETRECONNECTABLECHATS,"Get Reconnectable Chats Succeeded and old session returned",oe,Ae,Te,le,"GET"),J(Ee),_e.abrupt("return");case 10:return J(),_e.abrupt("return");case 14:return _e.prev=14,_e.t0=_e.catch(0),Z.logWithLogger(P.LogLevel.ERROR,T.OCSDKTelemetryEvent.GETRECONNECTABLECHATS,"Get Reconnectable Chats failed",oe,void 0,ge.milliSecondsElapsed,le,"GET",_e.t0),_e.t0.code===C.default.axiosTimeoutErrorCode&&(0,$.default)(),ue(_e.t0),_e.abrupt("return");case 21:case"end":return _e.stop()}},ee,null,[[0,14]])}));return function(ee,J){return re.apply(this,arguments)}}()));case 12:case"end":return ye.stop()}},y,this)}));return function(y){return d.apply(this,arguments)}}()},{key:"getReconnectAvailability",value:function(){var d=(0,R.default)(m.default.mark(function y(z){var q,ge,me,le,fe,de,xe,Z=this;return m.default.wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return ge=U.Timer.TIMER(),this.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.GETRECONNECTAVAILABILITY,"Get Reconnectable availability Started"),me="/".concat(O.default.LiveChatReconnectAvailabilityPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z),le=C.default.defaultHeaders,fe="".concat(this.omnichannelConfiguration.orgUrl).concat(me),de={headers:le,method:"GET",url:fe,timeout:null!==(q=this.configuration.defaultRequestTimeout)&&void 0!==q?q:this.configuration.requestTimeoutConfig.getReconnectAvailability},xe=g.default.create(),oe.abrupt("return",new Promise(function(){var we=(0,R.default)(m.default.mark(function ye(re,ee){var J,ue,Ae;return m.default.wrap(function(We){for(;;)switch(We.prev=We.next){case 0:return We.prev=0,We.next=3,xe(de);case 3:if(ue=ge.milliSecondsElapsed,!(Ae=(J=We.sent).data)){We.next=10;break}return Z.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.GETRECONNECTAVAILABILITY,"Get Reconnect availability succeeded",void 0,J,ue,me,"GET"),re(Ae),We.abrupt("return");case 10:return Z.logWithLogger(P.LogLevel.WARN,T.OCSDKTelemetryEvent.GETRECONNECTAVAILABILITY,"Get Reconnect availability didn't send any valid data",void 0,J,ue,me,"GET"),re(),We.abrupt("return");case 15:return We.prev=15,We.t0=We.catch(0),Z.logWithLogger(P.LogLevel.ERROR,T.OCSDKTelemetryEvent.GETRECONNECTAVAILABILITY,"Get Reconnect Availability failed",void 0,void 0,ge.milliSecondsElapsed,me,"GET",We.t0),We.t0.code===C.default.axiosTimeoutErrorCode&&(0,$.default)(),ee(We.t0),We.abrupt("return");case 22:case"end":return We.stop()}},ye,null,[[0,15]])}));return function(ye,re){return we.apply(this,arguments)}}()));case 9:case"end":return oe.stop()}},y,this)}));return function(y){return d.apply(this,arguments)}}()},{key:"getAgentAvailability",value:function(){var d=(0,R.default)(m.default.mark(function y(z){var q,ge,me,le,fe,ae,de,xe,Ce,oe,we,ye,re,ee,J,Z=this,ue=arguments;return m.default.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:if(ge=ue.length>1&&void 0!==ue[1]?ue[1]:{},me=U.Timer.TIMER(),this.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.GETAGENTAVAILABILITYSTARTED,"Get agent availability Started",z),le="/".concat(O.default.GetAgentAvailabilityPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z,"?channelId=lcw"),fe=g.default.create(),(0,B.default)(fe,{retries:this.configuration.maxRequestRetriesOnFailure}),de=ge.initContext,xe=ge.getContext,Ce=C.default.defaultHeaders,(ae=ge.authenticatedUserToken)&&(Ce[V.default.authenticatedUserToken]=ae),we={orgId:this.omnichannelConfiguration.orgId,widgetId:this.omnichannelConfiguration.widgetId},(oe=de||{})&&oe.customContextData&&(ye=te.CustomContextData.sort(oe.customContextData),Object.assign(we,{customContext:ye})),oe.portalcontactid&&Object.assign(we,{portalcontactid:oe.portalcontactid}),oe.cacheKey=W.createHash("sha256").update(JSON.stringify(we)).digest("hex").toString(),!xe||window.document){Te.next=16;break}return Te.abrupt("return",Promise.reject(new Error("getContext is only supported on web browsers")));case 16:if(xe&&(oe.browser=h.BrowserInfo.getBrowserName(),oe.device=b.DeviceInfo.getDeviceType(),oe.originurl=window.location.href,oe.os=k.OSInfo.getOsType()),oe.locale||(oe.locale=C.default.defaultLocale),!oe.locale||w.default.supportedLocales.includes(oe.locale)){Te.next=20;break}return Te.abrupt("return",Promise.reject(new Error("Unsupported locale: '".concat(oe.locale,"'"))));case 20:return re="".concat(this.omnichannelConfiguration.orgUrl).concat(le),J={data:oe,headers:Ce,method:ee="POST",url:re,timeout:null!==(q=this.configuration.defaultRequestTimeout)&&void 0!==q?q:this.configuration.requestTimeoutConfig.getAgentAvailability},Te.abrupt("return",new Promise(function(){var Ee=(0,R.default)(m.default.mark(function We(Ne,_e){var Be,De,Le;return m.default.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return $e.prev=0,$e.next=3,fe(J);case 3:De=me.milliSecondsElapsed,(Le=(Be=$e.sent).data)&&(Z.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.GETAGENTAVAILABILITYSUCCEEDED,"Get agent availability succeeded",z,Be,De,le,ee),Ne(Le)),$e.next=15;break;case 9:$e.prev=9,$e.t0=$e.catch(0),Z.logWithLogger(P.LogLevel.ERROR,T.OCSDKTelemetryEvent.GETAGENTAVAILABILITYFAILED,"Get agent availability failed",z,void 0,me.milliSecondsElapsed,le,ee,$e.t0),$e.t0.code===C.default.axiosTimeoutErrorCode&&(0,$.default)(),_e($e.t0);case 15:case"end":return $e.stop()}},We,null,[[0,9]])}));return function(We,Ne){return Ee.apply(this,arguments)}}()));case 24:case"end":return Te.stop()}},y,this)}));return function(y){return d.apply(this,arguments)}}()},{key:"sessionInit",value:function(){var d=(0,R.default)(m.default.mark(function y(z){var q,Z,ge,me,le,fe,ae,de,xe,Ce,oe,we,ye,re,ee,Te=arguments;return m.default.wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(Z=Te.length>1&&void 0!==Te[1]?Te[1]:{},ge=U.Timer.TIMER(),this.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.SESSIONINITSTARTED,"Session Init Started",z),me=g.default.create(),(0,B.default)(me,{retries:this.configuration.maxRequestRetriesOnFailure}),le=Z.reconnectId,fe=Z.authenticatedUserToken,ae=Z.initContext,de=Z.getContext,xe=C.default.defaultHeaders,Ce="/".concat(O.default.LiveChatSessionInitPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z),fe&&(Ce="/".concat(O.default.LiveChatAuthSessionInitPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z),xe[V.default.authenticatedUserToken]=fe),le&&(Ce+="/".concat(le)),oe="channelId=".concat(this.omnichannelConfiguration.channelId),Ce+="?".concat(oe),we=ae||{},!de||window.document){We.next=15;break}return We.abrupt("return",Promise.reject(new Error("getContext is only supported on web browsers")));case 15:if(de&&(we.browser=h.BrowserInfo.getBrowserName(),we.device=b.DeviceInfo.getDeviceType(),we.originurl=window.location.href,we.os=k.OSInfo.getOsType()),we.locale||(we.locale=C.default.defaultLocale),!we.locale||w.default.supportedLocales.includes(we.locale)){We.next=19;break}return We.abrupt("return",Promise.reject(new Error("Unsupported locale: '".concat(we.locale,"'"))));case 19:return ye="".concat(this.omnichannelConfiguration.orgUrl).concat(Ce),ee={data:we,headers:xe,method:re="POST",url:ye,timeout:null!==(q=this.configuration.defaultRequestTimeout)&&void 0!==q?q:this.configuration.requestTimeoutConfig.sessionInit},We.prev=22,We.next=25,me(ee);case 25:this.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.SESSIONINITSUCCEEDED,"Session Init Succeeded",z,We.sent,ge.milliSecondsElapsed,Ce,re,void 0,we),We.next=36;break;case 30:throw We.prev=30,We.t0=We.catch(22),this.logWithLogger(P.LogLevel.ERROR,T.OCSDKTelemetryEvent.SESSIONINITFAILED,"Session Init failed",z,void 0,ge.milliSecondsElapsed,Ce,re,We.t0,we),We.t0.code===C.default.axiosTimeoutErrorCode&&(0,$.default)(),We.t0;case 36:case"end":return We.stop()}},y,this,[[22,30]])}));return function(y){return d.apply(this,arguments)}}()},{key:"sessionClose",value:function(){var d=(0,R.default)(m.default.mark(function y(z){var q,ge,me,le,fe,ae,de,xe,oe,we,ye,re,ee,Z=this,J=arguments;return m.default.wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return ge=J.length>1&&void 0!==J[1]?J[1]:{},me=U.Timer.TIMER(),this.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.SESSIONCLOSESTARTED,"Session Close Started",z),le="/".concat(O.default.LiveChatSessionClosePath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z,"?channelId=").concat(this.omnichannelConfiguration.channelId),fe=g.default.create(),(0,B.default)(fe,{retries:this.configuration.maxRequestRetriesOnFailure}),ae=ge.authenticatedUserToken,de=ge.isReconnectChat,xe=ge.isPersistentChat,oe=C.default.defaultHeaders,(we={}).chatId=ge.chatId,ae&&(le="/".concat(O.default.LiveChatAuthSessionClosePath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z,"?channelId=").concat(this.omnichannelConfiguration.channelId),oe[V.default.authenticatedUserToken]=ae),de&&(le+="&isReconnectChat=true"),xe&&(le+="&isPersistentChat=true"),ye="".concat(this.omnichannelConfiguration.orgUrl).concat(le),ee={data:we,headers:oe,method:re="POST",url:ye,timeout:null!==(q=this.configuration.defaultRequestTimeout)&&void 0!==q?q:this.configuration.requestTimeoutConfig.sessionClose},Ae.abrupt("return",new Promise(function(){var Te=(0,R.default)(m.default.mark(function Ee(We,Ne){return m.default.wrap(function(Mt){for(;;)switch(Mt.prev=Mt.next){case 0:return Mt.prev=0,Mt.next=3,fe(ee);case 3:Z.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.SESSIONCLOSESUCCEEDED,"Session Close succeeded",z,Mt.sent,me.milliSecondsElapsed,le,re),We(),Mt.next=15;break;case 9:Mt.prev=9,Mt.t0=Mt.catch(0),Z.logWithLogger(P.LogLevel.ERROR,T.OCSDKTelemetryEvent.SESSIONCLOSEFAILED,"Session close failed",z,void 0,me.milliSecondsElapsed,le,re,Mt.t0),Mt.t0.code===C.default.axiosTimeoutErrorCode&&(0,$.default)(),Ne();case 15:case"end":return Mt.stop()}},Ee,null,[[0,9]])}));return function(Ee,We){return Te.apply(this,arguments)}}()));case 17:case"end":return Ae.stop()}},y,this)}));return function(y){return d.apply(this,arguments)}}()},{key:"validateAuthChatRecord",value:function(){var d=(0,R.default)(m.default.mark(function y(z,q){var Z,ge,me,le,fe,ae,de,xe,Ce,oe,we,ye,re;return m.default.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ge=U.Timer.TIMER(),this.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.VALIDATEAUTHCHATRECORDSTARTED,"Validate Auth Chat Record Started",z),me=q.authenticatedUserToken,le=q.chatId,fe="/".concat(O.default.LiveChatValidateAuthChatMapRecordPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(le,"/").concat(z,"?channelId=").concat(this.omnichannelConfiguration.channelId),ae=g.default.create(),(0,B.default)(ae,{retries:this.configuration.maxRequestRetriesOnFailure}),de=C.default.defaultHeaders,me&&(de[V.default.authenticatedUserToken]=me),xe="".concat(this.omnichannelConfiguration.orgUrl).concat(fe),oe={headers:de,method:Ce="GET",url:xe,timeout:null!==(Z=this.configuration.defaultRequestTimeout)&&void 0!==Z?Z:this.configuration.requestTimeoutConfig.validateAuthChatRecordTimeout},ue.prev=11,ue.next=14,ae(oe);case 14:if(re=ge.milliSecondsElapsed,!0!==(null===(we=(ye=ue.sent).data)||void 0===we?void 0:we.authChatExist)){ue.next=21;break}return this.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.VALIDATEAUTHCHATRECORDSUCCEEDED,"Validate Auth Chat Record succeeded",z,ye,re,fe,Ce),ue.abrupt("return",Promise.resolve(ye.data));case 21:return this.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.VALIDATEAUTHCHATRECORDFAILED,"Validate Auth Chat Record Failed. Record is not found or request is not authorized",z,ye,re,fe,Ce),ue.abrupt("return",Promise.reject(new Error("Validate Auth Chat Record Failed. Record is not found or request is not authorized")));case 23:ue.next=35;break;case 25:if(ue.prev=25,ue.t0=ue.catch(11),this.logWithLogger(P.LogLevel.ERROR,T.OCSDKTelemetryEvent.VALIDATEAUTHCHATRECORDFAILED,"Validate Auth Chat Record failed",z,void 0,ge.milliSecondsElapsed,fe,Ce,ue.t0),ue.t0.code===C.default.axiosTimeoutErrorCode&&(0,$.default)(),"Error: Request failed with status code 404"!==ue.t0.toString()){ue.next=34;break}return ue.abrupt("return",Promise.resolve({}));case 34:return ue.abrupt("return",Promise.reject());case 35:case"end":return ue.stop()}},y,this,[[11,25]])}));return function(y,z){return d.apply(this,arguments)}}()},{key:"submitPostChatResponse",value:function(){var d=(0,R.default)(m.default.mark(function y(z,q){var Z,me,le,fe,ae,de,xe,Ce,oe,we,ge=this,ye=arguments;return m.default.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return me=ye.length>2&&void 0!==ye[2]?ye[2]:{},le=U.Timer.TIMER(),this.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.SUBMITPOSTCHATSTARTED,"Submit Post Chat Started",z),fe="/".concat(O.default.LiveChatSubmitPostChatPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z,"?channelId=").concat(this.omnichannelConfiguration.channelId),ae=g.default.create(),(0,B.default)(ae,{retries:this.configuration.maxRequestRetriesOnFailure}),xe=C.default.defaultHeaders,(de=me.authenticatedUserToken)&&(fe="/".concat(O.default.LiveChatAuthSubmitPostChatPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z,"?channelId=").concat(this.omnichannelConfiguration.channelId),xe[V.default.authenticatedUserToken]=de),Ce="".concat(this.omnichannelConfiguration.orgUrl).concat(fe),oe="POST",we={data:JSON.stringify(q),headers:xe,method:oe,url:Ce,timeout:null!==(Z=this.configuration.defaultRequestTimeout)&&void 0!==Z?Z:this.configuration.requestTimeoutConfig.submitPostChatResponse},ee.abrupt("return",new Promise(function(){var J=(0,R.default)(m.default.mark(function ue(Ae,Te){return m.default.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return Be.prev=0,Be.next=3,ae(we);case 3:ge.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.SUBMITPOSTCHATSUCCEEDED,"Submit Post Chat succeeded",z,Be.sent,le.milliSecondsElapsed,fe,oe),Ae(),Be.next=15;break;case 9:Be.prev=9,Be.t0=Be.catch(0),ge.logWithLogger(P.LogLevel.ERROR,T.OCSDKTelemetryEvent.SUBMITPOSTCHATFAILED,"Submit Post Chat Failed",z,void 0,le.milliSecondsElapsed,fe,oe,Be.t0),Be.t0.code===C.default.axiosTimeoutErrorCode&&(0,$.default)(),Te();case 15:case"end":return Be.stop()}},ue,null,[[0,9]])}));return function(ue,Ae){return J.apply(this,arguments)}}()));case 13:case"end":return ee.stop()}},y,this)}));return function(y,z){return d.apply(this,arguments)}}()},{key:"getSurveyInviteLink",value:function(){var d=(0,R.default)(m.default.mark(function y(z,q){var Z,me,le,fe,ae,de,xe,Ce,oe,we,ye,ge=this,re=arguments;return m.default.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return me=re.length>2&&void 0!==re[2]?re[2]:{},le=U.Timer.TIMER(),this.logger&&this.logger.log(P.LogLevel.INFO,T.OCSDKTelemetryEvent.GETSURVEYINVITELINKSTARTED,{SurveyOwnerId:z},"Get Survey Invite Link Started"),fe="/".concat(O.default.LiveChatGetSurveyInviteLinkPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(z),ae=g.default.create(),(0,B.default)(ae,{retries:this.configuration.maxRequestRetriesOnFailure}),xe=me.requestId,Ce=C.default.defaultHeaders,(de=me.authenticatedUserToken)&&(fe="/".concat(O.default.LiveChatAuthGetSurveyInviteLinkPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(z),Ce[V.default.authenticatedUserToken]=de,Ce[V.default.widgetAppId]=this.omnichannelConfiguration.widgetId),xe&&(Ce[V.default.requestId]=xe),oe="".concat(this.omnichannelConfiguration.orgUrl).concat(fe),we="POST",ye={data:JSON.stringify(q),headers:Ce,method:we,url:oe,timeout:null!==(Z=this.configuration.defaultRequestTimeout)&&void 0!==Z?Z:this.configuration.requestTimeoutConfig.getSurveyInviteLink},J.abrupt("return",new Promise(function(){var ue=(0,R.default)(m.default.mark(function Ae(Te,Ee){var We,Ne;return m.default.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return Le.prev=0,Le.next=3,ae(ye);case 3:Ne=(We=Le.sent).data,ge.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.GETSURVEYINVITELINKSUCCEEDED,"Get Survey Invite Link Succeeded",xe,We,le.milliSecondsElapsed,fe,we),Te(Ne),Le.next=16;break;case 10:Le.prev=10,Le.t0=Le.catch(0),ge.logWithLogger(P.LogLevel.ERROR,T.OCSDKTelemetryEvent.GETSURVEYINVITELINKFAILED,"Get Survey Invite Link failed",xe,void 0,le.milliSecondsElapsed,fe,we,Le.t0),Le.t0.code===C.default.axiosTimeoutErrorCode&&(0,$.default)(),Ee();case 16:case"end":return Le.stop()}},Ae,null,[[0,10]])}));return function(Ae,Te){return ue.apply(this,arguments)}}()));case 14:case"end":return J.stop()}},y,this)}));return function(y,z){return d.apply(this,arguments)}}()},{key:"getChatTranscripts",value:function(){var d=(0,R.default)(m.default.mark(function y(z,q,Z){var ge,le,fe,ae,de,xe,Ce,oe,we,ye,re,me=this,ee=arguments;return m.default.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return le=ee.length>3&&void 0!==ee[3]?ee[3]:{},fe=U.Timer.TIMER(),this.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.GETCHATTRANSCRIPTSTARTED,"Get Chat Transcript Started",z),ae="/".concat(O.default.LiveChatGetChatTranscriptPath,"/").concat(q,"/").concat(z,"?channelId=").concat(this.omnichannelConfiguration.channelId),de=g.default.create(),(0,B.default)(de,{retries:this.configuration.maxRequestRetriesOnFailure}),xe=le.authenticatedUserToken,Ce=le.currentLiveChatVersion,(oe=C.default.defaultHeaders)[V.default.organizationId]=this.omnichannelConfiguration.orgId,oe[V.default.widgetAppId]=this.omnichannelConfiguration.widgetId,oe[V.default.authorization]=Z,this.liveChatVersion===T.LiveChatVersion.V2||Ce&&Ce===T.LiveChatVersion.V2?(ae="/".concat(O.default.LiveChatv2GetChatTranscriptPath,"/").concat(q,"/").concat(z,"?channelId=").concat(this.omnichannelConfiguration.channelId),xe&&(ae="/".concat(O.default.LiveChatv2AuthGetChatTranscriptPath,"/").concat(q,"/").concat(z,"?channelId=").concat(this.omnichannelConfiguration.channelId))):xe&&(ae="/".concat(O.default.LiveChatAuthGetChatTranscriptPath,"/").concat(q,"/").concat(z,"?channelId=").concat(this.omnichannelConfiguration.channelId)),we="".concat(this.omnichannelConfiguration.orgUrl).concat(ae),re={headers:oe,method:ye="GET",url:we,timeout:null!==(ge=this.configuration.defaultRequestTimeout)&&void 0!==ge?ge:this.configuration.requestTimeoutConfig.getChatTranscripts},ue.abrupt("return",new Promise(function(){var Ae=(0,R.default)(m.default.mark(function Te(Ee,We){var Ne,Be;return m.default.wrap(function(Mt){for(;;)switch(Mt.prev=Mt.next){case 0:return Mt.prev=0,Mt.next=3,de(re);case 3:Be=(Ne=Mt.sent).data,me.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.GETCHATTRANSCRIPTSUCCEEDED,"Get Chat Transcript succeeded",z,Ne,fe.milliSecondsElapsed,ae,ye),Ee(Be),Mt.next=16;break;case 10:Mt.prev=10,Mt.t0=Mt.catch(0),me.logWithLogger(P.LogLevel.ERROR,T.OCSDKTelemetryEvent.GETCHATTRANSCRIPTFAILED,"Get Chat Transcript failed",z,void 0,fe.milliSecondsElapsed,ae,ye,Mt.t0),Mt.t0.code===C.default.axiosTimeoutErrorCode&&(0,$.default)(),We(Mt.t0);case 16:case"end":return Mt.stop()}},Te,null,[[0,10]])}));return function(Te,Ee){return Ae.apply(this,arguments)}}()));case 16:case"end":return ue.stop()}},y,this)}));return function(y,z,q){return d.apply(this,arguments)}}()},{key:"emailTranscript",value:function(){var d=(0,R.default)(m.default.mark(function y(z,q,Z){var ge,le,fe,ae,de,xe,Ce,oe,we,ye,me=this,re=arguments;return m.default.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return le=re.length>3&&void 0!==re[3]?re[3]:{},fe=U.Timer.TIMER(),this.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.EMAILTRANSCRIPTSTARTED,"Email Transcript Started",z),ae="/".concat(O.default.LiveChatTranscriptEmailRequestPath,"/").concat(z,"?channelId=").concat(this.omnichannelConfiguration.channelId),de=g.default.create(),(0,B.default)(de,{retries:this.configuration.maxRequestRetriesOnFailure}),xe=le.authenticatedUserToken,(Ce=C.default.defaultHeaders)[V.default.organizationId]=this.omnichannelConfiguration.orgId,Ce[V.default.widgetAppId]=this.omnichannelConfiguration.widgetId,Ce[V.default.authorization]=q,xe&&(ae="/".concat(O.default.LiveChatAuthTranscriptEmailRequestPath,"/").concat(z,"?channelId=").concat(this.omnichannelConfiguration.channelId)),oe="".concat(this.omnichannelConfiguration.orgUrl).concat(ae),we="POST",ye={data:JSON.stringify(Z),headers:Ce,method:we,url:oe,timeout:null!==(ge=this.configuration.defaultRequestTimeout)&&void 0!==ge?ge:this.configuration.requestTimeoutConfig.emailTranscript},J.abrupt("return",new Promise(function(){var ue=(0,R.default)(m.default.mark(function Ae(Te,Ee){return m.default.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return De.prev=0,De.next=3,de(ye);case 3:me.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.EMAILTRANSCRIPTSUCCEEDED,"Email Transcript succeeded",z,De.sent,fe.milliSecondsElapsed,ae,we),Te(),De.next=15;break;case 9:De.prev=9,De.t0=De.catch(0),me.logWithLogger(P.LogLevel.ERROR,T.OCSDKTelemetryEvent.EMAILTRANSCRIPTFAILED,"Email Transcript Failed",z,void 0,fe.milliSecondsElapsed,ae,we,De.t0),De.t0.code===C.default.axiosTimeoutErrorCode&&(0,$.default)(),Ee();case 15:case"end":return De.stop()}},Ae,null,[[0,9]])}));return function(Ae,Te){return ue.apply(this,arguments)}}()));case 16:case"end":return J.stop()}},y,this)}));return function(y,z,q){return d.apply(this,arguments)}}()},{key:"fetchDataMaskingInfo",value:function(){var d=(0,R.default)(m.default.mark(function y(z){var q,ge,me,le,fe,ae,xe,Z=this;return m.default.wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return ge=U.Timer.TIMER(),this.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.FETCHDATAMASKINGSTARTED,"Fetch Data Masking Started",z),z||(z=(0,H.uuidv4)()),me="/".concat(O.default.LiveChatFetchDataMaskingInfoPath,"/").concat(this.omnichannelConfiguration.orgId),le=g.default.create(),(0,B.default)(le,{retries:this.configuration.maxRequestRetriesOnFailure}),(fe=C.default.defaultHeaders)[V.default.organizationId]=this.omnichannelConfiguration.orgId,fe[V.default.requestId]=z,ae="".concat(this.omnichannelConfiguration.orgUrl).concat(me),xe={headers:fe,method:"GET",url:ae,timeout:null!==(q=this.configuration.defaultRequestTimeout)&&void 0!==q?q:this.configuration.requestTimeoutConfig.fetchDataMaskingInfo},oe.abrupt("return",new Promise(function(){var we=(0,R.default)(m.default.mark(function ye(re,ee){var J,Ae;return m.default.wrap(function(We){for(;;)switch(We.prev=We.next){case 0:return We.prev=0,We.next=3,le(xe);case 3:Ae=(J=We.sent).data,Z.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.FETCHDATAMASKINGSUCCEEDED,"Fetch Data Masking succeeded",z,J,ge.milliSecondsElapsed,me,"GET"),re(Ae),We.next=16;break;case 10:We.prev=10,We.t0=We.catch(0),Z.logWithLogger(P.LogLevel.ERROR,T.OCSDKTelemetryEvent.FETCHDATAMASKINGFAILED,"Fetch Data Masking Failed",z,void 0,ge.milliSecondsElapsed,me,"GET",We.t0),We.t0.code===C.default.axiosTimeoutErrorCode&&(0,$.default)(),ee();case 16:case"end":return We.stop()}},ye,null,[[0,10]])}));return function(ye,re){return we.apply(this,arguments)}}()));case 13:case"end":return oe.stop()}},y,this)}));return function(y){return d.apply(this,arguments)}}()},{key:"makeSecondaryChannelEventRequest",value:function(){var d=(0,R.default)(m.default.mark(function y(z,q){var Z,ge,me,le,fe,ae,de,xe,Ce,oe,ee=arguments;return m.default.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ge=ee.length>2&&void 0!==ee[2]?ee[2]:{},me=U.Timer.TIMER(),this.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.SECONDARYCHANNELEVENTREQUESTSTARTED,"Secondary Channel Event Request Started",z),le="/".concat(O.default.LiveChatSecondaryChannelEventPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z),fe=g.default.create(),(0,B.default)(fe,{retries:this.configuration.maxRequestRetriesOnFailure}),ae=ge.authenticatedUserToken,(de=C.default.defaultHeaders)[V.default.organizationId]=this.omnichannelConfiguration.orgId,ae&&(de[V.default.authenticatedUserToken]=ae,le="/".concat(O.default.LiveChatAuthSecondaryChannelEventPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z)),le+="?channelId="+C.default.defaultChannelId,xe="".concat(this.omnichannelConfiguration.orgUrl).concat(le),Ce="POST",oe={data:JSON.stringify(q),headers:de,method:Ce,url:xe,timeout:null!==(Z=this.configuration.defaultRequestTimeout)&&void 0!==Z?Z:this.configuration.requestTimeoutConfig.makeSecondaryChannelEventRequest},ue.prev=14,ue.next=17,fe(oe);case 17:this.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.SECONDARYCHANNELEVENTREQUESTSUCCEEDED,"Secondary Channel Event Request Succeeded",z,ue.sent,me.milliSecondsElapsed,le,Ce),ue.next=28;break;case 22:throw ue.prev=22,ue.t0=ue.catch(14),this.logWithLogger(P.LogLevel.ERROR,T.OCSDKTelemetryEvent.SECONDARYCHANNELEVENTREQUESTFAILED,"Secondary Channel Event Request Failed",z,void 0,me.milliSecondsElapsed,le,Ce,ue.t0),ue.t0.code===C.default.axiosTimeoutErrorCode&&(0,$.default)(),ue.t0;case 28:case"end":return ue.stop()}},y,this,[[14,22]])}));return function(y,z){return d.apply(this,arguments)}}()},{key:"sendTypingIndicator",value:function(){var d=(0,R.default)(m.default.mark(function y(z,q){var Z,me,le,fe,ae,de,xe,Ce,oe,we,ge=this,ye=arguments;return m.default.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(me=ye.length>2&&void 0!==ye[2]?ye[2]:{},q&&q===T.LiveChatVersion.V2){ee.next=3;break}return ee.abrupt("return",Promise.resolve());case 3:if(le=U.Timer.TIMER(),fe=me.customerDisplayName,q&&q===T.LiveChatVersion.V2){ee.next=7;break}throw new Error("Typing indicator is only supported on v2");case 7:return ae="/".concat(O.default.SendTypingIndicatorPath,"/").concat(z),de=g.default.create(),(xe=C.default.defaultHeaders)[V.default.organizationId]=this.omnichannelConfiguration.orgId,fe&&(xe[C.default.customerDisplayName]=fe),Ce="".concat(this.omnichannelConfiguration.orgUrl).concat(ae),we={headers:xe,method:oe="POST",url:Ce,timeout:null!==(Z=this.configuration.defaultRequestTimeout)&&void 0!==Z?Z:this.configuration.requestTimeoutConfig.sendTypingIndicator},ee.abrupt("return",new Promise(function(){var J=(0,R.default)(m.default.mark(function ue(Ae,Te){return m.default.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return Be.prev=0,Be.next=3,de(we);case 3:ge.logWithLogger(P.LogLevel.INFO,T.OCSDKTelemetryEvent.SENDTYPINGINDICATORSUCCEEDED,"Send Typing Indicator Succeeded",z,Be.sent,le.milliSecondsElapsed,ae,oe),Ae(),Be.next=15;break;case 9:Be.prev=9,Be.t0=Be.catch(0),ge.logWithLogger(P.LogLevel.ERROR,T.OCSDKTelemetryEvent.SENDTYPINGINDICATORFAILED,"Send Typing Indicator Failed",z,void 0,le.milliSecondsElapsed,ae,oe,Be.t0),Be.t0.code===C.default.axiosTimeoutErrorCode&&(0,$.default)(),Te(Be.t0);case 15:case"end":return Be.stop()}},ue,null,[[0,9]])}));return function(ue,Ae){return J.apply(this,arguments)}}()));case 16:case"end":return ee.stop()}},y,this)}));return function(y,z){return d.apply(this,arguments)}}()},{key:"logWithLogger",value:function(i,y,z,q,Z,ge,me,le,fe,ae){var de;if(this.logger){fe&&I.LoggingSanitizer.stripErrorSensitiveProperties(fe);var xe=void 0;ae&&((xe=s({},ae)).customContextData&&I.LoggingSanitizer.stripCustomContextDataValues(xe.customContextData),xe.preChatResponse&&I.LoggingSanitizer.stripPreChatResponse(xe.preChatResponse),I.LoggingSanitizer.stripGeolocation(xe));var Ce={RequestId:q,Region:null==Z?void 0:Z.data.Region,ElapsedTimeInMilliseconds:ge,TransactionId:null==Z?void 0:Z.headers[C.default.transactionid],RequestPath:me,RequestMethod:le,ResponseStatusCode:Z?Z.status:fe?null===(de=fe.response)||void 0===de?void 0:de.status:void 0,ExceptionDetails:fe,RequestPayload:xe};this.logger.log(i,y,Ce,z)}}}]),D;var d}();L.default=_,(0,A.default)(_,"defaultRequestTimeoutConfig",{getChatConfig:3e4,getLWIDetails:5e3,getChatToken:1e4,sessionInit:5e3,sessionClose:1e4,getReconnectableChats:5e3,getReconnectAvailability:5e3,submitPostChatResponse:1e4,getSurveyInviteLink:1e4,getChatTranscripts:3e4,emailTranscript:5e3,fetchDataMaskingInfo:1e3,makeSecondaryChannelEventRequest:5e3,getAgentAvailability:5e3,sendTypingIndicator:5e3,validateAuthChatRecordTimeout:5e3}),(0,A.default)(_,"defaultConfiguration",{getChatTokenRetryCount:10,getChatTokenTimeBetweenRetriesOnFailure:1e4,getChatTokenRetryOn429:!1,maxRequestRetriesOnFailure:3,defaultRequestTimeout:void 0,requestTimeoutConfig:_.defaultRequestTimeoutConfig})},4491:(Y,L,E)=>{"use strict";var p=E(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var N=p(E(9901)),m=p(E(9524)),R=p(E(5413)),u=p(E(4162)),v=p(E(8634));L.default=function(){function A(){(0,N.default)(this,A)}return(0,m.default)(A,null,[{key:"getSDK",value:function(g,h,C){var b=new u.default(C);return new v.default({channelId:g.channelId||R.default.defaultChannelId,orgId:g.orgId,orgUrl:g.orgUrl,widgetId:g.widgetId},h||{},b)}}]),A}()},4717:(Y,L,E)=>{"use strict";var p=E(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.BrowserInfo=L.UNKNOWN_VERSION=void 0;var N=p(E(9901)),m=p(E(9524)),R=p(E(5633)),u=E(2e3),v="([\\d,.]+)";L.UNKNOWN_VERSION="U";var A=function(){function T(){(0,N.default)(this,T)}return(0,m.default)(T,null,[{key:"getUserAgent",value:function(){return this.userAgent()}},{key:"userAgentContainsString",value:function(h){return this.getUserAgent().indexOf(h)>-1}},{key:"isChrome",value:function(){return this.userAgentContainsString(u.BrowserVendor.CHROME)&&!this.userAgentContainsString(u.BrowserVendor.EDGE)&&!this.userAgentContainsString(u.BrowserVendor.EDGE_CHROMIUM)}},{key:"isIe",value:function(){return this.userAgentContainsString("Trident")}},{key:"isEdge",value:function(){return this.userAgentContainsString(u.BrowserVendor.EDGE)||this.userAgentContainsString(u.BrowserVendor.EDGE_CHROMIUM)}},{key:"isOpera",value:function(){return this.userAgentContainsString("OPR/")}},{key:"getBrowserName",value:function(){return this.isOpera()?u.BrowserVendor.OPERA:this.isEdge()?u.BrowserVendor.EDGE:this.isChrome()?u.BrowserVendor.CHROME:this.userAgentContainsString(u.BrowserVendor.FIREFOX)?u.BrowserVendor.FIREFOX:this.userAgentContainsString(u.BrowserVendor.SAFARI)?u.BrowserVendor.SAFARI:this.isIe()?u.BrowserVendor.IE:u.BrowserVendor.UNKNOWN}},{key:"getBrowserVersion",value:function(){var h=this;return this.isIe()?function(){var I=h.getUserAgent(),P=I.match(new RegExp(u.BrowserVendor.IE+" "+v));if(P)return P[1];var k=I.match(new RegExp("rv:"+v));return k?k[1]:void 0}():function(I){I===u.BrowserVendor.SAFARI&&(I="Version"),I===u.BrowserVendor.OPERA&&(I="OPR"),I===u.BrowserVendor.EDGE&&(I="Edge?");var P=h.getUserAgent().match(new RegExp(I+"/"+v));return P?P[1]:"U"}(this.getBrowserName())}}]),T}();L.BrowserInfo=A,(0,R.default)(A,"userAgent",function(){return window.navigator.userAgent})},9114:(Y,L,E)=>{"use strict";var p=E(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.CustomContextData=void 0;var N=p(E(9901)),m=p(E(9524));L.CustomContextData=function(){function u(){(0,N.default)(this,u)}return(0,m.default)(u,null,[{key:"sort",value:function(M){var A=new Array;return Object.keys(M).forEach(function(T){if(M&&M["".concat(T)]){var g={key:T,value:M["".concat(T)]};A.push(g)}}),A.sort(function(T,g){var h=T.key.toUpperCase(),C=g.key.toUpperCase();return h<C?-1:h>C?1:0}),A}}]),u}()},6812:(Y,L,E)=>{"use strict";var p=E(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.DeviceInfo=void 0;var N=p(E(9901)),m=p(E(9524)),R=E(2e3);L.DeviceInfo=function(){function v(){(0,N.default)(this,v)}return(0,m.default)(v,null,[{key:"getDeviceType",value:function(){return window.navigator.userAgent.match(/(android|ipod|windows phone|wpdesktop|windows ce|blackberry\w*|meego|webos|palm|symbian|pda|\w*?mobile\w*?|\w*?phone\w*?)/i)?R.DeviceType.Mobile:window.navigator.userAgent.match(/tablet|ipad/i)?R.DeviceType.Tablet:R.DeviceType.Desktop}}]),v}()},682:(Y,L,E)=>{"use strict";var p=E(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var N=p(E(9901)),m=p(E(9524));L.default=function(){function u(){(0,N.default)(this,u)}return(0,m.default)(u,null,[{key:"raiseCustomEvent",value:function(M,A){var T=u.createCustomEvent(M,A);window.dispatchEvent(T)}},{key:"createCustomEvent",value:function(M,A){var T=A?{detail:A}:void 0,g=null;try{g=new CustomEvent(M,T)}catch(h){(g=document.createEvent("CustomEvent")).initCustomEvent(M,!0,!0,T)}return g}}]),u}()},9569:(Y,L,E)=>{"use strict";var p=E(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.LoggingSanitizer=void 0;var N=p(E(4738)),m=p(E(9901)),R=p(E(9524)),u=p(E(5413));L.LoggingSanitizer=function(){function M(){(0,m.default)(this,M)}return(0,R.default)(M,null,[{key:"stripCustomContextDataValues",value:function(T){var g;null===(g=Object.keys(T))||void 0===g||g.forEach(function(h){var C;null!==(C=T["".concat(h)])&&void 0!==C&&C.value&&(T["".concat(h)].value=u.default.hiddenContentPlaceholder)})}},{key:"stripPreChatResponse",value:function(T){Object.keys(T).forEach(function(g){T["".concat(g)]&&"Type"!==g&&(T["".concat(g)]=u.default.hiddenContentPlaceholder)})}},{key:"stripGeolocation",value:function(T){Object.keys(T).includes("longitude")&&(T.longitude=u.default.hiddenContentPlaceholder),Object.keys(T).includes("latitude")&&(T.latitude=u.default.hiddenContentPlaceholder)}},{key:"stripErrorSensitiveProperties",value:function(T){var g,C,h=this;T&&"object"===(0,N.default)(T)&&(null===(g=Object.keys(T))||void 0===g?void 0:g.length)>0&&(null===(C=Object.keys(T))||void 0===C||C.forEach(function(b){if(-1!==u.default.sensitiveProperties.indexOf(b)&&delete T["".concat(b)],"data"===b){var w;if("string"==typeof T[b])try{w=JSON.parse(T[b])}catch(I){w=void 0}w&&(Object.keys(w).includes("preChatResponse")&&M.stripPreChatResponse(w.preChatResponse),Object.keys(w).includes("customContextData")&&M.stripCustomContextDataValues(w.customContextData),M.stripGeolocation(w),T[b]=JSON.stringify(w))}null===T["".concat(b)]||"object"!==(0,N.default)(T["".concat(b)])||h.stripErrorSensitiveProperties(T["".concat(b)])}))}}]),M}()},7169:(Y,L,E)=>{"use strict";var p=E(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.OSInfo=void 0;var N=p(E(9901)),m=p(E(9524)),R=E(2e3);L.OSInfo=function(){function v(){(0,N.default)(this,v)}return(0,m.default)(v,null,[{key:"getOsType",value:function(){var I=function(){return window.navigator.userAgent};return I().match(/windows\sphone\s\d+\.\d+/i)?R.OperatingSystem.WINDOWS_PHONE:I().match(/ arm;/i)?R.OperatingSystem.WINDOWS_RT:I().match(/(iPad|iPhone|iPod)(?=.*like Mac OS X)/i)?R.OperatingSystem.IOS:I().match(/android/i)?R.OperatingSystem.ANDROID:I().match(/(linux|joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|cros)/i)?R.OperatingSystem.LINUX:I().match(/(macintosh|mac os x)/i)?R.OperatingSystem.MACOSX:I().match(/(windows|win32)/i)?R.OperatingSystem.WINDOWS:R.OperatingSystem.UNKNOWN}}]),v}()},7276:(Y,L,E)=>{"use strict";var p=E(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var N=p(E(9901)),m=p(E(9524));L.default=function(){function u(){(0,N.default)(this,u)}return(0,m.default)(u,null,[{key:"GETTELEMETRYEVENTDATA",value:function(M,A,T){return{Description:T,ElapsedTimeInMilliseconds:A.ElapsedTimeInMilliseconds,Event:M,ExceptionDetails:A.ExceptionDetails,Region:A.Region,RequestId:A.RequestId,TransactionId:A.TransactionId,RequestPayload:A.RequestPayload,RequestPath:A.RequestPath,RequestMethod:A.RequestMethod,ResponseStatusCode:A.ResponseStatusCode}}}]),u}()},3945:(Y,L,E)=>{"use strict";var p=E(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.Timer=void 0;var N=p(E(9901)),m=p(E(9524));L.Timer=function(){function u(){(0,N.default)(this,u)}return(0,m.default)(u,null,[{key:"TIMER",value:function(){var M=(new Date).getTime();return{get milliSecondsElapsed(){return(new Date).getTime()-M}}}}]),u}()},1729:(Y,L,E)=>{"use strict";var p=E(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var N=p(E(5413)),m=p(E(6440));L.default=function(M,A){null==A.retryOn429&&(A.retryOn429=!0);var g=A.retries,h=1;M.interceptors.response.use(void 0,function(I){var P=I.config,k=I.response;return!P||k&&k.status===N.default.tooManyRequestsStatusCode&&!1===A.retryOn429?Promise.reject(I):h<g?(h++,new Promise(function(V){return(0,m.default)(1e3).then(function(){return V(M(P))})})):Promise.reject(I)})}},6440:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0,L.default=function(m){return new Promise(function(R){return setTimeout(R,m)})}},2867:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var p=E(2e3);L.default=function(){var u="".concat(p.SDKError.ClientHTTPTimeoutErrorName,": ").concat(p.SDKError.ClientHTTPTimeoutErrorMessage);throw new Error(u)}},8566:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.uuidv4=void 0,L.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(N){var m=16*Math.random()|0;return("x"===N?m:3&m|8).toString(16)})}},3762:(Y,L,E)=>{"use strict";var p=E(3621);Object.defineProperty(L,"__esModule",{value:!0}),Object.defineProperty(L,"SDKProvider",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(L,"uuidv4",{enumerable:!0,get:function(){return v.uuidv4}});var N=p(E(4738)),m=p(E(3096)),R=p(E(4491)),u=p(E(682)),v=E(8566);!function(){if(void 0===global.window&&(global.window=global),void 0===("undefined"==typeof window?"undefined":(0,N.default)(window)))throw new Error("window object not found");"Microsoft"in window||(window.Microsoft={}),"CRM"in window.Microsoft||(window.Microsoft.CRM={}),"Omnichannel"in window.Microsoft.CRM||(window.Microsoft.CRM.Omnichannel={}),"SDK"in window.Microsoft.CRM.Omnichannel||(window.Microsoft.CRM.Omnichannel.SDK={SDKProvider:R.default,Util:{uuidv4:v.uuidv4}}),window.document&&u.default.raiseCustomEvent(m.default.OCSDKLOAD)}()},7987:function(Y,L){"use strict";var E=this&&this.__assign||function(){return(E=Object.assign||function(N){for(var m,R=1,u=arguments.length;R<u;R++)for(var v in m=arguments[R])Object.prototype.hasOwnProperty.call(m,v)&&(N[v]=m[v]);return N}).apply(this,arguments)};Object.defineProperty(L,"__esModule",{value:!0});var p=function(){function N(m){this.debug=!1,this.debug=!1,this.logger=m}return N.prototype.setDebug=function(m){this.debug=m},N.prototype.log=function(m,R,u){var v,M=E(E({},u),{Event:R});this.debug&&console.log(M),null===(v=this.logger)||void 0===v||v.logClientSdkTelemetryEvent(m,M)},N}();L.default=p},9237:function(Y,L,E){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(U){for(var B,H=1,W=arguments.length;H<W;H++)for(var te in B=arguments[H])Object.prototype.hasOwnProperty.call(B,te)&&(U[te]=B[te]);return U}).apply(this,arguments)},N=this&&this.__awaiter||function(U,B,H,W){return new(H||(H=Promise))(function($,pe){function x(l){try{s(W.next(l))}catch(a){pe(a)}}function r(l){try{s(W.throw(l))}catch(a){pe(a)}}function s(l){l.done?$(l.value):function($){return $ instanceof H?$:new H(function(pe){pe($)})}(l.value).then(x,r)}s((W=W.apply(U,B||[])).next())})},m=this&&this.__generator||function(U,B){var W,te,$,pe,H={label:0,sent:function(){if(1&$[0])throw $[1];return $[1]},trys:[],ops:[]};return pe={next:x(0),throw:x(1),return:x(2)},"function"==typeof Symbol&&(pe[Symbol.iterator]=function(){return this}),pe;function x(s){return function(l){return function(s){if(W)throw new TypeError("Generator is already executing.");for(;H;)try{if(W=1,te&&($=2&s[0]?te.return:s[0]?te.throw||(($=te.return)&&$.call(te),0):te.next)&&!($=$.call(te,s[1])).done)return $;switch(te=0,$&&(s=[2&s[0],$.value]),s[0]){case 0:case 1:$=s;break;case 4:return H.label++,{value:s[1],done:!1};case 5:H.label++,te=s[1],s=[0];continue;case 7:s=H.ops.pop(),H.trys.pop();continue;default:if(!($=($=H.trys).length>0&&$[$.length-1])&&(6===s[0]||2===s[0])){H=0;continue}if(3===s[0]&&(!$||s[1]>$[0]&&s[1]<$[3])){H.label=s[1];break}if(6===s[0]&&H.label<$[1]){H.label=$[1],$=s;break}if($&&H.label<$[2]){H.label=$[2],H.ops.push(s);break}$[2]&&H.ops.pop(),H.trys.pop();continue}s=B.call(U,H)}catch(l){s=[6,l],te=0}finally{W=$=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(L,"__esModule",{value:!0});var R=E(7643),u=(()=>{return(U=u||(u={})).Create="Create",U.Upload="Upload",u;var U})(),v=(()=>{return(U=v||(v={})).CreateDocumentType="sharing/file",U.UploadDocumentType="original",U.CreateImageType="pish/image",U.UploadImageType="imgpsh",v;var U})(),M=(()=>{return(U=M||(M={})).Accept="Accept",U.AcceptEncoding="Accept-Encoding",U.BehaviorOverride="BehaviorOverride",U.Authorization="Authorization",U.ClientVersion="X-MS-Client-Version",U.ContentType="Content-Type",M;var U})(),A=(()=>{return(U=A||(A={})).applicationFormUrlEncoded="application/x-www-form-urlencoded",U.applicationJson="application/json",A;var U})(),T=(()=>{return(U=T||(T={})).Expired="expired",U.Failed="failed",U.InProgress="in progress",U.Malware="malware",U.Ready="ready",T;var U})(),g=["image/jpeg","image/png","image/gif"],h=function(U){U.regionGTMS||(U.regionGTMS={ams:"https://us-api.asm.skype.com"})},C=function(U){var B;return(B={})[M.Authorization]="skype_token "+U,B[M.ClientVersion]="os=Windows; osVer=10; proc=Win32; lcid=en-us; deviceType=1; country=IN; clientName=swc; clientVer=912/0.106.0.34//swc",B},w=function(U){return U&&U.length>0?U:g},I=function(U,B,H){return w(H).includes(U.toLowerCase())?B===u.Create?v.CreateImageType:v.UploadImageType:B===u.Create?v.CreateDocumentType:v.UploadDocumentType};L.default={skypeTokenAuth:function(U){return N(void 0,void 0,void 0,function(){var B,W,$,pe,x;return m(this,function(r){switch(r.label){case 0:R.default.debug&&console.log("[API][skypeTokenAuth]"),h(U),B=(U.amsEndpoint||(null===(x=U.regionGTMS)||void 0===x?void 0:x.ams))+"/v1/skypetokenauth",(pe={})[M.Authorization]="skype_token "+U.token,pe[M.Accept]=A.applicationJson,pe[M.BehaviorOverride]="redirectAs404",pe[M.ContentType]=A.applicationFormUrlEncoded,W={headers:pe,method:"POST",body:"skypetoken="+U.token},r.label=1;case 1:return r.trys.push([1,3,,4]),[4,fetch(B,W)];case 2:return[2,r.sent()];case 3:throw $=r.sent(),!R.default.silentError&&console.log($),new Error("AMSAuth");case 4:return[2]}})})},createObject:function(U,B,H,W){return N(void 0,void 0,void 0,function(){var te,$,pe,x,r,s,f,_,D,d;return m(this,function(i){switch(i.label){case 0:R.default.debug&&console.log("[API][createObject]"),(_={})[U]=["read"],te=_,$=I(B.type,u.Create,W),pe={filename:B.name,permissions:te,type:$},h(H),x=(H.amsEndpoint||(null===(d=null==H?void 0:H.regionGTMS)||void 0===d?void 0:d.ams))+"/v1/objects",r=p(p({},C(H.token)),((D={})[M.ContentType]=A.applicationJson,D)),s={headers:r,method:"POST",body:JSON.stringify(pe),credentials:"include"},i.label=1;case 1:return i.trys.push([1,4,,5]),[4,fetch(x,s)];case 2:return[4,i.sent().json()];case 3:return[2,i.sent()];case 4:throw f=i.sent(),!R.default.silentError&&console.log(f),new Error("AMSCreateObjectFailed");case 5:return[2]}})})},uploadDocument:function(U,B,H,W){return N(void 0,void 0,void 0,function(){var te,$,pe,x,s,l,a;return m(this,function(f){switch(f.label){case 0:R.default.debug&&console.log("[API][uploadDocument]"),h(H),te=I(B.type,u.Upload,W),$=(H.amsEndpoint||(null===(a=null==H?void 0:H.regionGTMS)||void 0===a?void 0:a.ams))+"/v1/objects/"+U+"/content/"+te,pe=p(p({},C(H.token)),((l={})[M.ContentType]=A.applicationFormUrlEncoded,l)),x={headers:pe,method:"PUT",body:B.data?B.data:B},f.label=1;case 1:return f.trys.push([1,3,,4]),[4,fetch($,x)];case 2:return f.sent(),[2,{name:B.name,size:B.size,type:B.type,id:U,url:$,fileSharingProtocolType:0}];case 3:throw s=f.sent(),!R.default.silentError&&console.log(s),new Error("AMSUploadDocumentFailed");case 4:return[2]}})})},getViewStatus:function(U,B,H){return N(void 0,void 0,void 0,function(){var W,te,$,x,r,s,a,f;return m(this,function(_){switch(_.label){case 0:R.default.debug&&console.log("[API][getViewStatus]"),h(B),W=(B.amsEndpoint||(null===(f=null==B?void 0:B.regionGTMS)||void 0===f?void 0:f.ams))+"/v1/objects/"+U.id+"/views/"+(w(H).includes(U.type)?"imgpsh_fullsize_anim":"original")+"/status",te=C(B.token),$={headers:te,method:"GET"},_.label=1;case 1:return _.trys.push([1,4,,5]),[4,fetch(W,$)];case 2:return[4,_.sent().json()];case 3:if(x=_.sent(),r=x.content_state,s=x.view_state,!x.view_location)throw new Error("view_location is empty");if(s&&s!==T.Ready.toString()&&!R.default.silentError&&console.error("view_state is not ready"),r===T.Expired.toString())throw new Error("content_state is expired");return[2,x];case 4:throw a=_.sent(),!R.default.silentError&&console.log(a),new Error("AMSGetViewStatusFailed");case 5:return[2]}})})},getView:function(U,B,H,W){return N(void 0,void 0,void 0,function(){var te,$,pe,s;return m(this,function(l){switch(l.label){case 0:R.default.debug&&console.log("[API][getView]"),h(H),te=B,$=C(H.token),w(W).includes(U.type)&&($[M.Accept]="image/webp,image/ *,*/*;q=0.8",$[M.AcceptEncoding]="gzip, deflate, sdch, br"),pe={headers:$,method:"GET"},l.label=1;case 1:return l.trys.push([1,4,,5]),[4,fetch(te,pe)];case 2:return[4,l.sent().blob()];case 3:return[2,l.sent()];case 4:throw s=l.sent(),!R.default.silentError&&console.log(s),new Error("AMSGetViewFailed");case 5:return[2]}})})}}},4543:function(Y,L,E){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(b){for(var w,I=1,P=arguments.length;I<P;I++)for(var k in w=arguments[I])Object.prototype.hasOwnProperty.call(w,k)&&(b[k]=w[k]);return b}).apply(this,arguments)},N=this&&this.__awaiter||function(b,w,I,P){return new(I||(I=Promise))(function(O,V){function U(W){try{H(P.next(W))}catch(te){V(te)}}function B(W){try{H(P.throw(W))}catch(te){V(te)}}function H(W){W.done?O(W.value):function(O){return O instanceof I?O:new I(function(V){V(O)})}(W.value).then(U,B)}H((P=P.apply(b,w||[])).next())})},m=this&&this.__generator||function(b,w){var P,k,O,V,I={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return V={next:U(0),throw:U(1),return:U(2)},"function"==typeof Symbol&&(V[Symbol.iterator]=function(){return this}),V;function U(H){return function(W){return function(H){if(P)throw new TypeError("Generator is already executing.");for(;I;)try{if(P=1,k&&(O=2&H[0]?k.return:H[0]?k.throw||((O=k.return)&&O.call(k),0):k.next)&&!(O=O.call(k,H[1])).done)return O;switch(k=0,O&&(H=[2&H[0],O.value]),H[0]){case 0:case 1:O=H;break;case 4:return I.label++,{value:H[1],done:!1};case 5:I.label++,k=H[1],H=[0];continue;case 7:H=I.ops.pop(),I.trys.pop();continue;default:if(!(O=(O=I.trys).length>0&&O[O.length-1])&&(6===H[0]||2===H[0])){I=0;continue}if(3===H[0]&&(!O||H[1]>O[0]&&H[1]<O[3])){I.label=H[1];break}if(6===H[0]&&I.label<O[1]){I.label=O[1],O=H;break}if(O&&I.label<O[2]){I.label=O[2],I.ops.push(H);break}O[2]&&I.ops.pop(),I.trys.pop();continue}H=w.call(b,I)}catch(W){H=[6,W],k=0}finally{P=O=0}if(5&H[0])throw H[1];return{value:H[0]?H[1]:void 0,done:!0}}([H,W])}}};Object.defineProperty(L,"__esModule",{value:!0});var R=E(2782),u=E(7643),v=E(4239),M=E(9638),A=E(759),T=E(8202),g=R.sdkVersion,C=function(){function b(w,I){void 0===w&&(w=void 0),void 0===I&&(I=void 0),this.clientId=T.uuidv4(),this.origin=window.location.origin,this.requestCallbacks={},this.debug=!1,this.iframeLoaded=!1,this.logger=w,this.iframeId="Microsoft_Omnichannel_AMSClient_Iframe_Window",I&&I.multiClient&&(this.iframeId=this.clientId)}return b.prototype.setDebug=function(w){this.debug=w},b.prototype.setup=function(){return N(this,void 0,void 0,function(){var w=this;return m(this,function(I){switch(I.label){case 0:if(this.debug&&console.log("[FramedClient][initialize]"),this.onMessageEvent(function(P){return w.handleEvent(P)}),!v.default.isBrowser())throw new Error("FramedMode was used in non-Web platform");return[4,this.loadIframe()];case 1:return I.sent(),this.iframeLoaded||!u.default.silentError&&console.error("iframe not loaded"),[2]}})})},b.prototype.initialize=function(w){return N(this,void 0,void 0,function(){return m(this,function(I){switch(I.label){case 0:return this.debug&&console.log("[FramedClient][initialize]"),this.chatToken=w.chatToken,[4,this.skypeTokenAuth()];case 1:return I.sent(),[2]}})})},b.prototype.skypeTokenAuth=function(w){return void 0===w&&(w=null),N(this,void 0,void 0,function(){var I,P=this;return m(this,function(k){switch(k.label){case 0:return this.debug&&console.log("[FramedClient][skypeAuth]"),I={chatToken:w||this.chatToken},[4,this.loadIframe()];case 1:return k.sent(),[2,new Promise(function(O,V){P.postMessage(A.default.Request,M.default.SkypeTokenAuth,I,O,V)})]}})})},b.prototype.createObject=function(w,I,P,k){return void 0===P&&(P=null),void 0===k&&(k=[]),N(this,void 0,void 0,function(){var O,V=this;return m(this,function(U){switch(U.label){case 0:return this.debug&&console.log("[FramedClient][createObject]"),O={id:w,file:I,chatToken:P||this.chatToken,supportedImagesMimeTypes:k},[4,this.loadIframe()];case 1:return U.sent(),[2,new Promise(function(B,H){V.postMessage(A.default.Request,M.default.CreateObject,O,B,H)})]}})})},b.prototype.uploadDocument=function(w,I,P,k){return void 0===P&&(P=null),void 0===k&&(k=[]),N(this,void 0,void 0,function(){var O,V=this;return m(this,function(U){switch(U.label){case 0:return this.debug&&console.log("[FramedClient][uploadDocument]"),O={documentId:w,file:I,chatToken:P||this.chatToken,supportedImagesMimeTypes:k},[4,this.loadIframe()];case 1:return U.sent(),[2,new Promise(function(B,H){V.postMessage(A.default.Request,M.default.UploadDocument,O,B,H)})]}})})},b.prototype.getViewStatus=function(w,I,P){return void 0===I&&(I=null),void 0===P&&(P=[]),N(this,void 0,void 0,function(){var k,O=this;return m(this,function(V){switch(V.label){case 0:return k={fileMetadata:w,chatToken:I||this.chatToken,supportedImagesMimeTypes:P},[4,this.loadIframe()];case 1:return V.sent(),[2,new Promise(function(U,B){O.postMessage(A.default.Request,M.default.GetViewStatus,k,U,B)})]}})})},b.prototype.getView=function(w,I,P,k){return void 0===P&&(P=null),void 0===k&&(k=[]),N(this,void 0,void 0,function(){var O,V=this;return m(this,function(U){switch(U.label){case 0:return O={fileMetadata:w,viewLocation:I,chatToken:P||this.chatToken,supportedImagesMimeTypes:k},[4,this.loadIframe()];case 1:return U.sent(),[2,new Promise(function(B,H){V.postMessage(A.default.Request,M.default.GetView,O,B,H)})]}})})},b.prototype.fetchBlob=function(w){return N(this,void 0,void 0,function(){var k;return m(this,function(O){switch(O.label){case 0:return O.trys.push([0,3,,4]),[4,fetch(w)];case 1:return[4,O.sent().blob()];case 2:return[2,O.sent()];case 3:throw k=O.sent(),!u.default.silentError&&console.log(k),new Error("fetchBlob");case 4:return[2]}})})},b.prototype.onMessageEvent=function(w){window.addEventListener("message",w,!0)},b.prototype.postMessage=function(w,I,P,k,O){void 0===P&&(P={}),void 0===k&&(k=function(U){return{}}),void 0===O&&(O=function(U){return{}});var V=T.uuidv4();this.requestCallbacks[V]={resolve:k,reject:O},this.targetWindow?this.targetWindow.postMessage(p({clientId:this.clientId,requestId:V,eventType:w,eventName:I},P),"*"):!u.default.silentError&&console.error("Target window not found!")},b.prototype.handleEvent=function(w){var I;return N(this,void 0,void 0,function(){var P;return m(this,function(k){return w.origin===this.origin||R.baseUrl.includes(w.origin)?(w.data.clientId!==this.clientId||(this.debug&&console.log(w),w.source&&(this.targetWindow=w.source),w.data.eventType===A.default.Response&&(this.debug&&console.log("[FramedClient][Response]"),P=w.data,w.data.eventName===M.default.SkypeTokenAuth?P.requestId in this.requestCallbacks&&(this.requestCallbacks[P.requestId].resolve(),delete this.requestCallbacks[P.requestId]):w.data.eventName===M.default.CreateObject||w.data.eventName===M.default.UploadDocument||w.data.eventName===M.default.GetViewStatus||w.data.eventName===M.default.GetView?P.requestId in this.requestCallbacks&&(this.requestCallbacks[P.requestId].resolve(P.response),delete this.requestCallbacks[P.requestId]):w.data.eventName===M.default.SendTelemetry&&(null===(I=this.logger)||void 0===I||I.log(P.logLevel,P.logData.Event,P.logData)))),[2]):[2]})})},b.prototype.dispose=function(){var w;null===(w=document.getElementById(this.iframeId))||void 0===w||w.remove(),this.requestCallbacks={},this.iframeLoaded=!1},b.prototype.loadIframe=function(){return N(this,void 0,void 0,function(){var w=this;return m(this,function(I){return[2,new Promise(function(P,k){if(Array.from(document.getElementsByTagName("iframe")).filter(function(B){return B.id==w.iframeId}).length)return P();var U=document.createElement("iframe");U.id=w.iframeId,U.src=R.baseUrl+"/"+g+"/iframe.html?clientId="+w.clientId+"&debug="+w.debug+"&telemetry=true",U.addEventListener("load",function(){w.debug&&console.log("iframe loaded!"),w.iframeLoaded=!0,P()}),U.addEventListener("error",function(){k()}),document.head.append(U)})]})})},b}();L.default=C},1700:function(Y,L,E){"use strict";var p=this&&this.__awaiter||function(T,g,h,C){return new(h||(h=Promise))(function(w,I){function P(V){try{O(C.next(V))}catch(U){I(U)}}function k(V){try{O(C.throw(V))}catch(U){I(U)}}function O(V){V.done?w(V.value):function(w){return w instanceof h?w:new h(function(I){I(w)})}(V.value).then(P,k)}O((C=C.apply(T,g||[])).next())})},N=this&&this.__generator||function(T,g){var C,b,w,I,h={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return I={next:P(0),throw:P(1),return:P(2)},"function"==typeof Symbol&&(I[Symbol.iterator]=function(){return this}),I;function P(O){return function(V){return function(O){if(C)throw new TypeError("Generator is already executing.");for(;h;)try{if(C=1,b&&(w=2&O[0]?b.return:O[0]?b.throw||((w=b.return)&&w.call(b),0):b.next)&&!(w=w.call(b,O[1])).done)return w;switch(b=0,w&&(O=[2&O[0],w.value]),O[0]){case 0:case 1:w=O;break;case 4:return h.label++,{value:O[1],done:!1};case 5:h.label++,b=O[1],O=[0];continue;case 7:O=h.ops.pop(),h.trys.pop();continue;default:if(!(w=(w=h.trys).length>0&&w[w.length-1])&&(6===O[0]||2===O[0])){h=0;continue}if(3===O[0]&&(!w||O[1]>w[0]&&O[1]<w[3])){h.label=O[1];break}if(6===O[0]&&h.label<w[1]){h.label=w[1],w=O;break}if(w&&h.label<w[2]){h.label=w[2],h.ops.push(O);break}w[2]&&h.ops.pop(),h.trys.pop();continue}O=g.call(T,h)}catch(V){O=[6,V],b=0}finally{C=w=0}if(5&O[0])throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}([O,V])}}};Object.defineProperty(L,"__esModule",{value:!0});var m=E(9237),R=E(5356),u=E(9638),v=E(4239),M=E(2782),A=function(){function T(g){void 0===g&&(g=void 0),this.debug=!1,this.logger=g,v.default.isBrowser()&&console.error("FramedMode should be used on Web platform")}return T.prototype.setDebug=function(g){this.debug=g},T.prototype.setup=function(){return p(this,void 0,void 0,function(){return N(this,function(g){return[2,Promise.resolve()]})})},T.prototype.initialize=function(g){return p(this,void 0,void 0,function(){return N(this,function(h){switch(h.label){case 0:return this.debug&&console.log("[FramedlessClient][initialize]"),this.chatToken=g.chatToken,[4,this.skypeTokenAuth()];case 1:return h.sent(),[2]}})})},T.prototype.skypeTokenAuth=function(g){var h,C,b;return void 0===g&&(g=null),p(this,void 0,void 0,function(){var w,I;return N(this,function(P){switch(P.label){case 0:return P.trys.push([0,2,,3]),[4,m.default.skypeTokenAuth(g||this.chatToken)];case 1:return(w=P.sent()).ok||null===(h=this.logger)||void 0===h||h.log(R.default.ERROR,u.default.SkypeTokenAuth,{ChatId:g?g.chatId:null===(C=this.chatToken)||void 0===C?void 0:C.chatId,AMSClientVersion:M.sdkVersion,ExceptionDetails:{status:w.status}}),[2,w];case 2:throw I=P.sent(),null===(b=this.logger)||void 0===b||b.log(R.default.ERROR,u.default.SkypeTokenAuth,{ChatId:g?g.chatId:this.chatToken.chatId,AMSClientVersion:M.sdkVersion,ExceptionDetails:I}),new Error("skypeTokenAuth");case 3:return[2]}})})},T.prototype.createObject=function(g,h,C,b){var w;return void 0===C&&(C=null),void 0===b&&(b=[]),p(this,void 0,void 0,function(){var P;return N(this,function(k){switch(k.label){case 0:return k.trys.push([0,2,,3]),[4,m.default.createObject(g,h,C||this.chatToken,b)];case 1:return[2,k.sent()];case 2:throw P=k.sent(),null===(w=this.logger)||void 0===w||w.log(R.default.ERROR,u.default.CreateObject,{ChatId:C?C.chatId:this.chatToken.chatId,AMSClientVersion:M.sdkVersion,ExceptionDetails:P}),new Error("createObject");case 3:return[2]}})})},T.prototype.uploadDocument=function(g,h,C,b){var w;return void 0===C&&(C=null),void 0===b&&(b=[]),p(this,void 0,void 0,function(){var P;return N(this,function(k){switch(k.label){case 0:return k.trys.push([0,2,,3]),[4,m.default.uploadDocument(g,h,C||this.chatToken,b)];case 1:return[2,k.sent()];case 2:throw P=k.sent(),null===(w=this.logger)||void 0===w||w.log(R.default.ERROR,u.default.UploadDocument,{ChatId:C?C.chatId:this.chatToken.chatId,AMSClientVersion:M.sdkVersion,ExceptionDetails:P}),new Error("uploadDocument");case 3:return[2]}})})},T.prototype.getViewStatus=function(g,h,C){var b;return void 0===h&&(h=null),void 0===C&&(C=[]),p(this,void 0,void 0,function(){var I;return N(this,function(P){switch(P.label){case 0:return P.trys.push([0,2,,3]),[4,m.default.getViewStatus(g,h||this.chatToken,C)];case 1:return[2,P.sent()];case 2:throw I=P.sent(),null===(b=this.logger)||void 0===b||b.log(R.default.ERROR,u.default.GetViewStatus,{ChatId:h?h.chatId:this.chatToken.chatId,AMSClientVersion:M.sdkVersion,ExceptionDetails:I}),new Error("getViewStatus");case 3:return[2]}})})},T.prototype.getView=function(g,h,C,b){var w;return void 0===C&&(C=null),void 0===b&&(b=[]),p(this,void 0,void 0,function(){var P;return N(this,function(k){switch(k.label){case 0:return k.trys.push([0,2,,3]),[4,m.default.getView(g,h,C||this.chatToken,b)];case 1:return[2,k.sent()];case 2:throw P=k.sent(),null===(w=this.logger)||void 0===w||w.log(R.default.ERROR,u.default.GetView,{ChatId:C?C.chatId:this.chatToken.chatId,AMSClientVersion:M.sdkVersion,ExceptionDetails:P}),new Error("getView");case 3:return[2]}})})},T.prototype.fetchBlob=function(g){return p(this,void 0,void 0,function(){var b;return N(this,function(w){switch(w.label){case 0:return w.trys.push([0,3,,4]),[4,fetch(g)];case 1:return[4,w.sent().blob()];case 2:return[2,w.sent()];case 3:throw b=w.sent(),console.log(b),new Error("fetchBlob");case 4:return[2]}})})},T}();L.default=A},7643:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=function(){function p(){}return p.silentError=!0,p.debug=!1,p}();L.default=E},5356:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=(()=>{return(p=E||(E={})).INFO="INFO",p.DEBUG="DEBUG",p.WARN="WARN",p.ERROR="ERROR",p.LOG="LOG",E;var p})();L.default=E},9638:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=(()=>{return(p=E||(E={})).IframeLoaded="AMSIframeLoaded",p.SkypeTokenAuth="AMSSkypeTokenAuth",p.CreateObject="AMSCreateObject",p.UploadDocument="AMSUploadDocument",p.GetViewStatus="AMSGetViewStatus",p.GetView="AMSGetView",p.SendTelemetry="AMSSendTelemetry",E;var p})();L.default=E},759:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=(()=>{return(p=E||(E={})).None="None",p.Request="Request",p.Response="Response",E;var p})();L.default=E},2782:(Y,L)=>{L.baseUrl="https://comms.omnichannelengagementhub.com/ams",L.sdkVersion="0.1.2"},3285:function(Y,L,E){"use strict";var p=this&&this.__awaiter||function(A,T,g,h){return new(g||(g=Promise))(function(b,w){function I(O){try{k(h.next(O))}catch(V){w(V)}}function P(O){try{k(h.throw(O))}catch(V){w(V)}}function k(O){O.done?b(O.value):function(b){return b instanceof g?b:new g(function(w){w(b)})}(O.value).then(I,P)}k((h=h.apply(A,T||[])).next())})},N=this&&this.__generator||function(A,T){var h,C,b,w,g={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return w={next:I(0),throw:I(1),return:I(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function I(k){return function(O){return function(k){if(h)throw new TypeError("Generator is already executing.");for(;g;)try{if(h=1,C&&(b=2&k[0]?C.return:k[0]?C.throw||((b=C.return)&&b.call(C),0):C.next)&&!(b=b.call(C,k[1])).done)return b;switch(C=0,b&&(k=[2&k[0],b.value]),k[0]){case 0:case 1:b=k;break;case 4:return g.label++,{value:k[1],done:!1};case 5:g.label++,C=k[1],k=[0];continue;case 7:k=g.ops.pop(),g.trys.pop();continue;default:if(!(b=(b=g.trys).length>0&&b[b.length-1])&&(6===k[0]||2===k[0])){g=0;continue}if(3===k[0]&&(!b||k[1]>b[0]&&k[1]<b[3])){g.label=k[1];break}if(6===k[0]&&g.label<b[1]){g.label=b[1],b=k;break}if(b&&g.label<b[2]){g.label=b[2],g.ops.push(k);break}b[2]&&g.ops.pop(),g.trys.pop();continue}k=T.call(A,g)}catch(O){k=[6,O],C=0}finally{h=b=0}if(5&k[0])throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}([k,O])}}};Object.defineProperty(L,"__esModule",{value:!0});var m=E(7987),R=E(4543),u=E(1700),v=E(7643);L.default=function(A){return p(void 0,void 0,void 0,function(){var T,g,h;return N(this,function(C){switch(C.label){case 0:return A.debug&&console.log("[createAMSClient] "+(A.framedMode?"FramedClient":"FramedlessClient")),T=new m.default(A.logger),g={multiClient:A.multiClient||!1},[4,(h=A.framedMode?new R.default(T,g):new u.default(T)).setup()];case 1:return C.sent(),A.debug&&h.setDebug(A.debug||!1),v.default.debug=A.debug||!1,v.default.silentError=A.silentError||!0,[2,h]}})})}},7463:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=E(3285),N=E(1700),m=E(4543);L.default=p.default,function(){if(void 0===typeof window)throw new Error("window object not found");"Microsoft"in window||(window.Microsoft={}),"CRM"in window.Microsoft||(window.Microsoft.CRM={}),"Omnichannel"in window.Microsoft.CRM||(window.Microsoft.CRM.Omnichannel={}),"AMSClient"in window.Microsoft.CRM.Omnichannel||(window.Microsoft.CRM.Omnichannel.AMS={SDK:{createAMSClient:p.default,FramedClient:m.default,FramedlessClient:N.default}})}()},4239:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.isReactNative=L.isNode=L.isBrowser=void 0,L.isBrowser=function(){return"undefined"!=typeof window&&void 0!==window.document},L.isNode=function(){return"undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node},L.isReactNative=function(){return"undefined"!=typeof navigator&&"ReactNative"==navigator.product},L.default={isBrowser:L.isBrowser,isNode:L.isNode,isReactNative:L.isReactNative}},8202:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.uuidv4=void 0,L.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(p){var N=16*Math.random()|0;return("x"===p?N:3&N|8).toString(16)})}},7626:function(Y,L,E){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(me){for(var le,fe=1,ae=arguments.length;fe<ae;fe++)for(var de in le=arguments[fe])Object.prototype.hasOwnProperty.call(le,de)&&(me[de]=le[de]);return me}).apply(this,arguments)},N=this&&this.__awaiter||function(me,le,fe,ae){return new(fe||(fe=Promise))(function(xe,Ce){function oe(re){try{ye(ae.next(re))}catch(ee){Ce(ee)}}function we(re){try{ye(ae.throw(re))}catch(ee){Ce(ee)}}function ye(re){re.done?xe(re.value):function(xe){return xe instanceof fe?xe:new fe(function(Ce){Ce(xe)})}(re.value).then(oe,we)}ye((ae=ae.apply(me,le||[])).next())})},m=this&&this.__generator||function(me,le){var ae,de,xe,Ce,fe={label:0,sent:function(){if(1&xe[0])throw xe[1];return xe[1]},trys:[],ops:[]};return Ce={next:oe(0),throw:oe(1),return:oe(2)},"function"==typeof Symbol&&(Ce[Symbol.iterator]=function(){return this}),Ce;function oe(ye){return function(re){return function(ye){if(ae)throw new TypeError("Generator is already executing.");for(;fe;)try{if(ae=1,de&&(xe=2&ye[0]?de.return:ye[0]?de.throw||((xe=de.return)&&xe.call(de),0):de.next)&&!(xe=xe.call(de,ye[1])).done)return xe;switch(de=0,xe&&(ye=[2&ye[0],xe.value]),ye[0]){case 0:case 1:xe=ye;break;case 4:return fe.label++,{value:ye[1],done:!1};case 5:fe.label++,de=ye[1],ye=[0];continue;case 7:ye=fe.ops.pop(),fe.trys.pop();continue;default:if(!(xe=(xe=fe.trys).length>0&&xe[xe.length-1])&&(6===ye[0]||2===ye[0])){fe=0;continue}if(3===ye[0]&&(!xe||ye[1]>xe[0]&&ye[1]<xe[3])){fe.label=ye[1];break}if(6===ye[0]&&fe.label<xe[1]){fe.label=xe[1],xe=ye;break}if(xe&&fe.label<xe[2]){fe.label=xe[2],fe.ops.push(ye);break}xe[2]&&fe.ops.pop(),fe.trys.pop();continue}ye=le.call(me,fe)}catch(re){ye=[6,re],de=0}finally{ae=xe=0}if(5&ye[0])throw ye[1];return{value:ye[0]?ye[1]:void 0,done:!0}}([ye,re])}}},R=this&&this.__spreadArrays||function(){for(var me=0,le=0,fe=arguments.length;le<fe;le++)me+=arguments[le].length;var ae=Array(me),de=0;for(le=0;le<fe;le++)for(var xe=arguments[le],Ce=0,oe=xe.length;Ce<oe;Ce++,de++)ae[de]=xe[Ce];return ae};Object.defineProperty(L,"__esModule",{value:!0});var u=E(2811),v=E(2902),M=E(3762),A=E(6403),T=E(8290),g=E(6345),h=E(8098),C=E(641),b=E(8953),w=E(2921),I=E(6419),P=E(7474),k=E(7587),O=E(7925),V=E(2900),U=E(4694),B=E(2217),H=E(6194),W=E(8191),te=E(5642),$=E(448),pe=E(3372),x=E(6233),r=E(4352),s=E(5655),l=E(1247),a=E(9600),f=E(7463),_=E(9340),D=E(838),d=E(6633),i=E(813),y=E(6032),z=E(9425),q=E(4674),Z=E(7616),ge=function(){function me(le,fe){var de,xe,Ce,oe,we,ye,re,ee,ae=this;void 0===fe&&(fe=C.defaultChatSDKConfig),this.ACSClient=null,this.AMSClient=null,this.authSettings=null,this.authenticatedUserToken=null,this.conversation=null,this.callingOption=I.default.NoCalling,this.telemetry=null,this.ic3ClientLogger=null,this.ocSdkLogger=null,this.acsClientLogger=null,this.acsAdapterLogger=null,this.callingSdkLogger=null,this.isPersistentChat=!1,this.isChatReconnect=!1,this.reconnectId=null,this.refreshTokenTimer=null,this.populateInitChatOptionalParam=function(J,ue){if(J.initContext.locale=T.getLocaleStringFromId(ae.localeId),ue.customContext&&(J.initContext.customContextData=ue.customContext),ue.browser&&(J.initContext.browser=ue.browser),ue.os&&(J.initContext.os=ue.os),ue.locale&&(J.initContext.locale=ue.locale),ue.device&&(J.initContext.device=ue.device),ue.preChatResponse&&(J.initContext.preChatResponse=ue.preChatResponse),ue.sendDefaultInitContext){if(h.default.isNode()||h.default.isReactNative()){var Ae={response:k.default.UnsupportedPlatform,message:"sendDefaultInitContext is only supported on browser"};throw console.error(Ae.message),ae.scenarioMarker.failScenario(a.default.GetAgentAvailability,{RequestId:ae.requestId,ChatId:ae.chatToken.chatId,ExceptionDetails:JSON.stringify(Ae)}),new Error(Ae.response)}J.getContext=!0}return ue.initContext&&(J.initContext=ue.initContext),ae.authenticatedUserToken&&(J.authenticatedUserToken=ae.authenticatedUserToken),ae.chatToken.chatId&&(J.initContext.chatId=ae.chatToken.chatId),J},this.debug=!1,this.runtimeId=M.uuidv4(),this.omnichannelConfig=le,this.chatSDKConfig=p(p({},C.defaultChatSDKConfig),fe),this.isInitialized=!1,this.liveChatVersion=W.default.V1,this.localeId=T.defaultLocaleId,this.requestId=M.uuidv4(),this.chatToken={},this.liveChatConfig={},this.dataMaskingRules={},this.authSettings=null,this.preChatSurvey=null,this.telemetry=D.default(this.debug),this.scenarioMarker=new l.default(this.omnichannelConfig),this.ic3ClientLogger=u.createIC3ClientLogger(this.omnichannelConfig),this.ocSdkLogger=u.createOCSDKLogger(this.omnichannelConfig),this.acsClientLogger=u.createACSClientLogger(this.omnichannelConfig),this.acsAdapterLogger=u.createACSAdapterLogger(this.omnichannelConfig),this.callingSdkLogger=u.createCallingSDKLogger(this.omnichannelConfig),this.scenarioMarker.useTelemetry(this.telemetry),this.ic3ClientLogger.useTelemetry(this.telemetry),this.ocSdkLogger.useTelemetry(this.telemetry),this.acsClientLogger.useTelemetry(this.telemetry),this.acsAdapterLogger.useTelemetry(this.telemetry),this.callingSdkLogger.useTelemetry(this.telemetry),this.scenarioMarker.setRuntimeId(this.runtimeId),this.ic3ClientLogger.setRuntimeId(this.runtimeId),this.ocSdkLogger.setRuntimeId(this.runtimeId),this.acsClientLogger.setRuntimeId(this.runtimeId),this.acsAdapterLogger.setRuntimeId(this.runtimeId),this.callingSdkLogger.setRuntimeId(this.runtimeId),Z.default(le),C.default(fe),(null===(de=this.chatSDKConfig.telemetry)||void 0===de?void 0:de.disable)&&(null===(xe=this.telemetry)||void 0===xe||xe.disable()),(null===(Ce=this.chatSDKConfig.telemetry)||void 0===Ce?void 0:Ce.ariaTelemetryKey)&&this.telemetry.initialize(this.chatSDKConfig.telemetry.ariaTelemetryKey),null===(oe=this.ic3ClientLogger)||void 0===oe||oe.setRequestId(this.requestId),null===(we=this.ocSdkLogger)||void 0===we||we.setRequestId(this.requestId),null===(ye=this.acsClientLogger)||void 0===ye||ye.setRequestId(this.requestId),null===(re=this.acsAdapterLogger)||void 0===re||re.setRequestId(this.requestId),null===(ee=this.callingSdkLogger)||void 0===ee||ee.setRequestId(this.requestId)}return me.prototype.setDebug=function(le){var fe,ae,de,xe,Ce,oe,we;this.debug=le,null===(fe=this.AMSClient)||void 0===fe||fe.setDebug(le),null===(ae=this.telemetry)||void 0===ae||ae.setDebug(le),this.scenarioMarker.setDebug(le),null===(de=this.ic3ClientLogger)||void 0===de||de.setDebug(le),null===(xe=this.ocSdkLogger)||void 0===xe||xe.setDebug(le),null===(Ce=this.acsClientLogger)||void 0===Ce||Ce.setDebug(le),null===(oe=this.acsAdapterLogger)||void 0===oe||oe.setDebug(le),null===(we=this.callingSdkLogger)||void 0===we||we.setDebug(le)},me.prototype.initialize=function(le){return void 0===le&&(le={}),N(this,void 0,void 0,function(){var fe,de,xe;return m(this,function(oe){switch(oe.label){case 0:if(this.scenarioMarker.startScenario(a.default.InitializeChatSDK),this.isInitialized)return this.scenarioMarker.completeScenario(a.default.InitializeChatSDK),[2,this.liveChatConfig];oe.label=1;case 1:return oe.trys.push([1,8,,9]),this.OCSDKProvider=M.SDKProvider,fe=this,[4,M.SDKProvider.getSDK(this.omnichannelConfig,{},this.ocSdkLogger)];case 2:return fe.OCClient=oe.sent(),[4,this.getChatConfig(le.getLiveChatConfigOptionalParams||{})];case 3:return oe.sent(),this.liveChatVersion!==W.default.V2?[3,5]:(this.ACSClient=new v.default(this.acsClientLogger),de=this,[4,f.default({framedMode:h.isBrowser(),multiClient:!0,debug:!1,logger:void 0})]);case 4:return de.AMSClient=oe.sent(),[3,7];case 5:return xe=this,[4,this.getIC3Client()];case 6:xe.IC3Client=oe.sent(),oe.label=7;case 7:return this.isInitialized=!0,this.scenarioMarker.completeScenario(a.default.InitializeChatSDK),[3,9];case 8:return oe.sent(),this.scenarioMarker.failScenario(a.default.InitializeChatSDK),[3,9];case 9:return[2,this.liveChatConfig]}})})},me.prototype.getChatReconnectContext=function(le){return void 0===le&&(le={}),N(this,void 0,void 0,function(){var fe,de,xe,oe,we,Ce;return m(this,function(ye){switch(ye.label){case 0:if(this.scenarioMarker.startScenario(a.default.GetChatReconnectContext,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),fe={reconnectId:null,redirectURL:null},!this.authenticatedUserToken)return[3,5];ye.label=1;case 1:return ye.trys.push([1,3,,4]),[4,this.OCClient.getReconnectableChats({authenticatedUserToken:this.authenticatedUserToken})];case 2:return(de=ye.sent())&&de.reconnectid&&(fe.reconnectId=de.reconnectid),this.scenarioMarker.completeScenario(a.default.GetChatReconnectContext,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,4];case 3:return xe=ye.sent(),Ce={response:"OCClientGetReconnectableChatsFailed"},this.scenarioMarker.failScenario(a.default.GetChatReconnectContext,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(Ce)}),console.error("OmnichannelChatSDK/GetChatReconnectContext/error "+xe),[3,4];case 4:return[3,9];case 5:if(!le.reconnectId)return[3,9];ye.label=6;case 6:return ye.trys.push([6,8,,9]),[4,this.OCClient.getReconnectAvailability(le.reconnectId)];case 7:return(oe=ye.sent())&&!oe.isReconnectAvailable?oe.reconnectRedirectionURL&&(fe.redirectURL=oe.reconnectRedirectionURL):fe.reconnectId=le.reconnectId,this.scenarioMarker.completeScenario(a.default.GetChatReconnectContext,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,9];case 8:return we=ye.sent(),Ce={response:"OCClientGetReconnectAvailabilityFailed"},this.scenarioMarker.failScenario(a.default.GetChatReconnectContext,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(Ce)}),console.error("OmnichannelChatSDK/GetChatReconnectContext/error "+we),[3,9];case 9:return[2,fe]}})})},me.prototype.startChat=function(le){var fe,ae,de,xe,Ce,oe,we,ye,re,ee,J,ue,Ae,Te,Ee,We,Ne,_e,Be;return void 0===le&&(le={}),N(this,void 0,void 0,function(){var Le,He,et,Ct,at,it,Mn,ot,Ke,In,ut,On,nt,It,Ve=this;return m(this,function(kt){switch(kt.label){case 0:return this.scenarioMarker.startScenario(a.default.StartChat,{RequestId:this.requestId}),h.default.isNode()||h.default.isReactNative()||this.IC3Client||this.liveChatVersion!==W.default.V1?[3,2]:(Le=this,[4,this.getIC3Client()]);case 1:Le.IC3Client=kt.sent(),kt.label=2;case 2:if(this.isChatReconnect&&!(null===(fe=this.chatSDKConfig.chatReconnect)||void 0===fe?void 0:fe.disable)&&!this.isPersistentChat&&le.reconnectId&&(this.reconnectId=le.reconnectId),!this.isPersistentChat||(null===(ae=this.chatSDKConfig.persistentChat)||void 0===ae?void 0:ae.disable))return[3,6];kt.label=3;case 3:return kt.trys.push([3,5,,6]),[4,this.OCClient.getReconnectableChats({authenticatedUserToken:this.authenticatedUserToken})];case 4:return(He=kt.sent())&&He.reconnectid&&(this.reconnectId=He.reconnectid),[3,6];case 5:throw kt.sent(),It={response:"OCClientGetReconnectableChatsFailed"},Error(It.response);case 6:return le.liveChatContext&&Object.keys(le.liveChatContext).length>0&&!this.reconnectId?(this.chatToken=le.liveChatContext.chatToken||{},this.requestId=le.liveChatContext.requestId||M.uuidv4(),[4,this.getConversationDetails()]):[3,8];case 7:if(et=kt.sent(),0===Object.keys(et).length)throw It={response:"InvalidConversation"},this.scenarioMarker.failScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(It)}),console.error("Conversation not found"),Error(It.response);if(et.state===te.default.WrapUp||et.state===te.default.Closed)throw It={response:"ClosedConversation"},this.scenarioMarker.failScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(It)}),console.error("Unable to join conversation that's in '"+et.state+"' state"),Error(It.response);kt.label=8;case 8:return this.authSettings?this.authenticatedUserToken?[3,10]:[4,this.setAuthTokenProvider(this.chatSDKConfig.getAuthToken)]:[3,14];case 9:kt.sent(),kt.label=10;case 10:if(!(le.liveChatContext&&Object.keys(le.liveChatContext).length>0))return[3,14];this.chatToken=le.liveChatContext.chatToken||{},this.requestId=le.liveChatContext.requestId||M.uuidv4(),kt.label=11;case 11:return kt.trys.push([11,13,,14]),[4,this.OCClient.validateAuthChatRecord(this.requestId,{authenticatedUserToken:this.authenticatedUserToken,chatId:this.chatToken.chatId})];case 12:return kt.sent(),[3,14];case 13:throw kt.sent(),It={response:"OCClientValidateAuthChatRecordFailed",message:"InvalidAuthChatRecord"},this.scenarioMarker.failScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(It)}),Error(It.response);case 14:return this.chatToken&&0===Object.keys(this.chatToken).length?[4,this.getChatToken(!1)]:[3,16];case 15:kt.sent(),kt.label=16;case 16:return null===(de=this.ic3ClientLogger)||void 0===de||de.setChatId(this.chatToken.chatId||""),null===(xe=this.ocSdkLogger)||void 0===xe||xe.setChatId(this.chatToken.chatId||""),null===(Ce=this.acsClientLogger)||void 0===Ce||Ce.setChatId(this.chatToken.chatId||""),null===(oe=this.acsAdapterLogger)||void 0===oe||oe.setChatId(this.chatToken.chatId||""),null===(we=this.callingSdkLogger)||void 0===we||we.setChatId(this.chatToken.chatId||""),(Ct=this.populateInitChatOptionalParam(Ct={initContext:{}},le)).initContext.isProactiveChat=!!le.isProactiveChat,(this.isPersistentChat&&!(null===(ye=this.chatSDKConfig.persistentChat)||void 0===ye?void 0:ye.disable)||this.isChatReconnect&&!(null===(re=this.chatSDKConfig.chatReconnect)||void 0===re?void 0:re.disable)&&!this.isPersistentChat)&&(Ct.reconnectId=this.reconnectId),"true"!==(null===(J=null===(ee=this.liveChatConfig)||void 0===ee?void 0:ee.LiveWSAndLiveChatEngJoin)||void 0===J?void 0:J.msdyn_requestvisitorlocation)?[3,18]:[4,y.getLocationInfo(this.scenarioMarker,this.chatToken.chatId,this.requestId)];case 17:at=kt.sent(),Ct.initContext.latitude=at.latitude,Ct.initContext.longitude=at.longitude,kt.label=18;case 18:if(le.liveChatContext)return[3,22];kt.label=19;case 19:return kt.trys.push([19,21,,22]),[4,this.OCClient.sessionInit(this.requestId,Ct)];case 20:return kt.sent(),[3,22];case 21:throw it=kt.sent(),It={response:"OCClientSessionInitFailed"},(null===(ue=it)||void 0===ue?void 0:ue.isAxiosError)&&(null===(Te=null===(Ae=it.response)||void 0===Ae?void 0:Ae.headers)||void 0===Te?void 0:Te.errorcode.toString())===x.default.WidgetUseOutsideOperatingHour.toString()&&(It.response=x.default[x.default.WidgetUseOutsideOperatingHour].toString(),It.message="Widget used outside of operating hours",console.error(It.message)),this.scenarioMarker.failScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(It)}),new Error(It.response);case 22:if(this.liveChatVersion!==W.default.V2)return[3,33];Mn={token:this.chatToken.token,id:this.chatToken.visitorId||"teamsvisitor",threadId:this.chatToken.chatId,environmentUrl:this.chatToken.acsEndpoint,pollingInterval:3e4},kt.label=23;case 23:return kt.trys.push([23,25,,26]),[4,null===(Ee=this.ACSClient)||void 0===Ee?void 0:Ee.initialize({token:Mn.token,environmentUrl:Mn.environmentUrl})];case 24:return kt.sent(),[3,26];case 25:return ot=kt.sent(),It={response:"ACSClientInitializeFailed"},this.scenarioMarker.failScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(It)}),console.error("OmnichannelChatSDK/startChat/initialize/error "+ot),[2,ot];case 26:return kt.trys.push([26,28,,29]),Ke=this,[4,null===(We=this.ACSClient)||void 0===We?void 0:We.joinConversation({id:Mn.id,threadId:Mn.threadId,pollingInterval:Mn.pollingInterval})];case 27:return Ke.conversation=kt.sent(),this.scenarioMarker.completeScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,29];case 28:throw In=kt.sent(),It={response:"ACSClientJoinConversationFailed"},this.scenarioMarker.failScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(It)}),console.error("OmnichannelChatSDK/startChat/joinConversation/error "+In),Error(It.response);case 29:return kt.trys.push([29,31,,32]),[4,null===(Ne=this.AMSClient)||void 0===Ne?void 0:Ne.initialize({chatToken:this.chatToken})];case 30:return kt.sent(),[3,32];case 31:throw kt.sent(),It={response:"AMSClientInitializeFailed"},this.scenarioMarker.failScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(It)}),Error(It.response);case 32:return[3,39];case 33:return kt.trys.push([33,35,,36]),[4,this.IC3Client.initialize({token:this.chatToken.token,regionGtms:this.chatToken.regionGTMS,visitor:!0})];case 34:return kt.sent(),[3,36];case 35:return ut=kt.sent(),It={response:"IC3ClientInitializeFailed"},this.scenarioMarker.failScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(It)}),console.error("OmnichannelChatSDK/startChat/initialize/error "+ut),[2,ut];case 36:return kt.trys.push([36,38,,39]),On=this,[4,this.IC3Client.joinConversation(this.chatToken.chatId)];case 37:return On.conversation=kt.sent(),this.scenarioMarker.completeScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,39];case 38:return nt=kt.sent(),It={response:"IC3ClientJoinConversationFailed"},this.scenarioMarker.failScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(It)}),console.error("OmnichannelChatSDK/startChat/joinConversation/error "+nt),[2,nt];case 39:return this.isPersistentChat&&!(null===(_e=this.chatSDKConfig.persistentChat)||void 0===_e?void 0:_e.disable)&&(this.refreshTokenTimer=setInterval(function(){return N(Ve,void 0,void 0,function(){return m(this,function(ft){switch(ft.label){case 0:return[4,this.getChatToken(!1)];case 1:return ft.sent(),this.updateChatToken(this.chatToken.token,this.chatToken.regionGTMS),[2]}})})},null===(Be=this.chatSDKConfig.persistentChat)||void 0===Be?void 0:Be.tokenUpdateTime)),[2]}})})},me.prototype.endChat=function(){var le,fe,ae,de,xe,Ce,oe,we,ye,re,ee,J,ue;return N(this,void 0,void 0,function(){var Ae,Te,Ee,We;return m(this,function(_e){switch(_e.label){case 0:this.scenarioMarker.startScenario(a.default.EndChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),Ae={},this.isPersistentChat&&!(null===(le=this.chatSDKConfig.persistentChat)||void 0===le?void 0:le.disable)&&(Te=null!==this.reconnectId,Ae.isPersistentChat=this.isPersistentChat,Ae.isReconnectChat=Te),this.isChatReconnect&&!(null===(fe=this.chatSDKConfig.chatReconnect)||void 0===fe?void 0:fe.disable)&&!this.isPersistentChat&&(this.requestId=(Ee=null!==this.reconnectId)?this.reconnectId:this.requestId,Ae.isReconnectChat=Ee),this.authenticatedUserToken&&(Ae.authenticatedUserToken=this.authenticatedUserToken),_e.label=1;case 1:return _e.trys.push([1,3,,4]),[4,this.OCClient.sessionClose(this.requestId,Ae)];case 2:return _e.sent(),this.scenarioMarker.completeScenario(a.default.EndChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),null===(ae=this.conversation)||void 0===ae||ae.disconnect(),this.conversation=null,this.requestId=M.uuidv4(),this.chatToken={},this.reconnectId=null,this.IC3Client&&(this.IC3Client.dispose(),!h.default.isNode()&&!h.default.isReactNative()&&g.removeElementById(this.IC3Client.id),this.IC3Client=null),null===(de=this.ic3ClientLogger)||void 0===de||de.setRequestId(this.requestId),null===(xe=this.ic3ClientLogger)||void 0===xe||xe.setChatId(""),null===(Ce=this.ocSdkLogger)||void 0===Ce||Ce.setRequestId(this.requestId),null===(oe=this.ocSdkLogger)||void 0===oe||oe.setChatId(""),null===(we=this.acsClientLogger)||void 0===we||we.setRequestId(this.requestId),null===(ye=this.acsClientLogger)||void 0===ye||ye.setChatId(""),null===(re=this.acsAdapterLogger)||void 0===re||re.setRequestId(this.requestId),null===(ee=this.acsAdapterLogger)||void 0===ee||ee.setChatId(""),null===(J=this.callingSdkLogger)||void 0===J||J.setRequestId(this.requestId),null===(ue=this.callingSdkLogger)||void 0===ue||ue.setChatId(""),[3,4];case 3:return We=_e.sent(),this.scenarioMarker.failScenario(a.default.EndChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify({response:"OCClientSessionCloseFailed"})}),console.error("OmnichannelChatSDK/endChat/error "+We),[2,We];case 4:return null!==this.refreshTokenTimer&&(clearInterval(this.refreshTokenTimer),this.refreshTokenTimer=null),[2]}})})},me.prototype.getCurrentLiveChatContext=function(){return N(this,void 0,void 0,function(){var le,fe,ae;return m(this,function(de){switch(de.label){case 0:return[4,this.getChatToken()];case 1:return le=de.sent(),this.scenarioMarker.startScenario(a.default.GetCurrentLiveChatContext,{RequestId:fe=this.requestId,ChatId:le.chatId}),ae={chatToken:le,requestId:fe},0===Object.keys(ae.chatToken).length?[2,{}]:(this.scenarioMarker.completeScenario(a.default.GetCurrentLiveChatContext,{RequestId:fe,ChatId:le.chatId}),[2,ae])}})})},me.prototype.getConversationDetails=function(){var le,fe,ae,de;return N(this,void 0,void 0,function(){var xe,Ce,ye,re,ee,J,ue;return m(this,function(Ae){switch(Ae.label){case 0:this.scenarioMarker.startScenario(a.default.GetConversationDetails,{RequestId:this.requestId,ChatId:(null===(le=this.chatToken)||void 0===le?void 0:le.chatId)||""}),xe={},this.isPersistentChat&&!(null===(fe=this.chatSDKConfig.persistentChat)||void 0===fe?void 0:fe.disable)&&this.reconnectId&&(xe.reconnectId=this.reconnectId),this.isChatReconnect&&!(null===(ae=this.chatSDKConfig.chatReconnect)||void 0===ae?void 0:ae.disable)&&!this.isPersistentChat&&this.reconnectId&&(xe.reconnectId=this.reconnectId),this.authenticatedUserToken&&(xe.authenticatedUserToken=this.authenticatedUserToken),Ae.label=1;case 1:return Ae.trys.push([1,3,,4]),[4,this.OCClient.getLWIDetails(this.requestId,xe)];case 2:return Ce=Ae.sent(),re=Ce.CanRenderPostChat,ee=Ce.ParticipantType,J={state:Ce.State,conversationId:Ce.ConversationId},(ye=Ce.AgentAcceptedOn)&&(J.agentAcceptedOn=ye),re&&(J.canRenderPostChat=re),ee&&(J.participantType=ee),this.scenarioMarker.completeScenario(a.default.GetConversationDetails,{RequestId:this.requestId,ChatId:(null===(de=this.chatToken)||void 0===de?void 0:de.chatId)||""}),[2,J];case 3:return ue=Ae.sent(),this.scenarioMarker.failScenario(a.default.GetConversationDetails,{RequestId:this.requestId,ChatId:this.chatToken.chatId||""}),console.error("OmnichannelChatSDK/getConversationDetails/error "+ue),[3,4];case 4:return[2,{}]}})})},me.prototype.getPreChatSurvey=function(le){return void 0===le&&(le=!0),N(this,void 0,void 0,function(){var fe;return m(this,function(ae){this.scenarioMarker.startScenario(a.default.GetPreChatSurvey);try{return fe=le?JSON.parse(this.preChatSurvey):this.preChatSurvey,this.scenarioMarker.completeScenario(a.default.GetPreChatSurvey),[2,fe]}catch(de){this.scenarioMarker.failScenario(a.default.GetPreChatSurvey)}return[2]})})},me.prototype.getLiveChatConfig=function(le){return N(this,void 0,void 0,function(){return m(this,function(fe){return le&&!0!==le.useRuntimeCache?[2,this.getChatConfig({sendCacheHeaders:(null==le?void 0:le.sendCacheHeaders)||!1})]:[2,this.liveChatConfig]})})},me.prototype.getChatToken=function(le){var fe,ae;return void 0===le&&(le=!0),N(this,void 0,void 0,function(){var de,xe,oe,ye,re,ee,J,ue,Ae;return m(this,function(Ee){switch(Ee.label){case 0:if(this.scenarioMarker.startScenario(a.default.GetChatToken,{RequestId:this.requestId}),le)return[3,5];Ee.label=1;case 1:return Ee.trys.push([1,3,,4]),de={},this.authenticatedUserToken&&(de.authenticatedUserToken=this.authenticatedUserToken),this.isPersistentChat&&!(null===(fe=this.chatSDKConfig.persistentChat)||void 0===fe?void 0:fe.disable)&&(de.reconnectId=this.reconnectId),this.isChatReconnect&&!(null===(ae=this.chatSDKConfig.chatReconnect)||void 0===ae?void 0:ae.disable)&&!this.isPersistentChat&&(de.reconnectId=this.reconnectId),[4,this.OCClient.getChatToken(this.requestId,de)];case 2:return xe=Ee.sent(),oe=xe.Token,ye=xe.ExpiresIn,re=xe.VisitorId,ee=xe.VoiceVideoCallToken,J=xe.ACSEndpoint,ue=xe.AttachmentConfiguration,this.chatToken={chatId:xe.ChatId,regionGTMS:JSON.parse(xe.RegionGtms),requestId:this.requestId,token:oe,expiresIn:ye,visitorId:re,voiceVideoCallToken:ee,acsEndpoint:J},ue&&ue.AttachmentServiceEndpoint&&(this.chatToken.amsEndpoint=ue.AttachmentServiceEndpoint),this.scenarioMarker.completeScenario(a.default.GetChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,4];case 3:return Ae=Ee.sent(),this.scenarioMarker.failScenario(a.default.GetChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify({response:"OCClientGetChatTokenFailed"})}),console.error("OmnichannelChatSDK/getChatToken/error "+Ae),[3,4];case 4:return[3,6];case 5:this.scenarioMarker.completeScenario(a.default.GetChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),Ee.label=6;case 6:return[2,this.chatToken]}})})},me.prototype.getCallingToken=function(){return N(this,void 0,void 0,function(){return m(this,function(le){return this.chatToken&&0===Object.keys(this.chatToken).length?[2,""]:this.chatToken.voiceVideoCallToken?(this.debug&&console.log("calling:acs"),[2,this.chatToken.voiceVideoCallToken.Token]):(this.debug&&console.log("calling:skype"),[2,this.chatToken.token])})})},me.prototype.getMessages=function(){var le;return N(this,void 0,void 0,function(){var fe;return m(this,function(de){switch(de.label){case 0:this.scenarioMarker.startScenario(a.default.GetMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),de.label=1;case 1:return de.trys.push([1,3,,4]),[4,null===(le=this.conversation)||void 0===le?void 0:le.getMessages()];case 2:return fe=de.sent(),this.scenarioMarker.completeScenario(a.default.GetMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,fe];case 3:return de.sent(),this.scenarioMarker.failScenario(a.default.GetMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,4];case 4:return[2]}})})},me.prototype.getDataMaskingRules=function(){return N(this,void 0,void 0,function(){return m(this,function(le){return[2,this.dataMaskingRules]})})},me.prototype.sendMessage=function(le){var fe;return N(this,void 0,void 0,function(){var ae,de,xe,Ce,oe,we,re,ee,J,ue,Te;return m(this,function(We){switch(We.label){case 0:if(this.scenarioMarker.startScenario(a.default.SendMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),de=(ae=this.chatSDKConfig.dataMasking).disable,xe=ae.maskingCharacter,Ce=le.content,Object.keys(this.dataMaskingRules).length>0&&!de)for(oe=0,we=Object.values(this.dataMaskingRules);oe<we.length;oe++)for(re=new RegExp(we[oe],"g"),ee=void 0;ee=re.exec(Ce);)J=ee[0].replace(/./g,xe),Ce=Ce.replace(ee[0],J);if(le.content=Ce,this.liveChatVersion!==W.default.V2)return[3,5];(ue={content:le.content}).metadata={widgetId:this.omnichannelConfig.widgetId,clientMessageId:Date.now().toString()},le.metadata&&(ue.metadata=p(p({},ue.metadata),le.metadata)),We.label=1;case 1:return We.trys.push([1,3,,4]),[4,null===(fe=this.conversation)||void 0===fe?void 0:fe.sendMessage(ue)];case 2:return We.sent(),this.scenarioMarker.completeScenario(a.default.SendMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,4];case 3:throw We.sent(),this.scenarioMarker.failScenario(a.default.SendMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),new Error("ChatSDKSendMessageFailed");case 4:return[3,9];case 5:Te={content:le.content,timestamp:new Date,contentType:$.default.Text,deliveryMode:V.default.Bridged,messageType:pe.default.UserMessage,properties:void 0,tags:R(i.defaultMessageTags),sender:{displayName:"Customer",id:"customer",type:r.default.User}},le.tags&&(Te.tags=le.tags),le.timestamp&&(Te.timestamp=le.timestamp),We.label=6;case 6:return We.trys.push([6,8,,9]),[4,this.conversation.sendMessage(Te)];case 7:return We.sent(),this.scenarioMarker.completeScenario(a.default.SendMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,9];case 8:throw We.sent(),this.scenarioMarker.failScenario(a.default.SendMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),new Error("ChatSDKSendMessageFailed");case 9:return[2]}})})},me.prototype.onNewMessage=function(le,fe){var ae,de;return void 0===fe&&(fe={}),N(this,void 0,void 0,function(){var xe,oe,we,re,ee,Ce,J,ue,ye,Ae,Te,Ee=this;return m(this,function(We){switch(We.label){case 0:return this.scenarioMarker.startScenario(a.default.OnNewMessage,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.liveChatVersion!==W.default.V2?[3,3]:(xe=new Set,fe.rehydrate?(this.debug&&console.log("[OmnichannelChatSDK][onNewMessage] rehydrate"),[4,this.getMessages()]):[3,2]);case 1:for(Ce=We.sent(),oe=0,we=Ce.reverse();oe<we.length;oe++)!xe.has(re=(ye=we[oe]).id)&&(xe.add(re),le(ye));We.label=2;case 2:try{null===(ae=this.conversation)||void 0===ae||ae.registerOnNewMessage(function(Ne){var _e=Ne.id,Be=_.default(Ne,{liveChatVersion:Ee.liveChatVersion,debug:Ee.debug});xe.has(_e)||(le(Be),xe.add(_e))}),this.scenarioMarker.completeScenario(a.default.OnNewMessage,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(Ne){this.scenarioMarker.failScenario(a.default.OnNewMessage,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}return[3,6];case 3:return ee=new Set,fe.rehydrate?(this.debug&&console.log("[OmnichannelChatSDK][onNewMessage] rehydrate"),[4,this.getMessages()]):[3,5];case 4:if(Ce=We.sent())for(J=0,ue=Ce.reverse();J<ue.length;J++)!ee.has(Ae=(ye=ue[J]).clientmessageid)&&(ee.add(Ae),Te=_.default(ye,{liveChatVersion:this.liveChatVersion,debug:this.debug}),le(Te));We.label=5;case 5:try{null===(de=this.conversation)||void 0===de||de.registerOnNewMessage(function(Ne){var _e=Ne.clientmessageid,Be=Ne.messageType;if(!z.isCustomerMessage(Ne)&&!ee.has(_e)&&Be!==pe.default.Typing){var De=_.default(Ne,{liveChatVersion:Ee.liveChatVersion,debug:Ee.debug});le(De)}}),this.scenarioMarker.completeScenario(a.default.OnNewMessage,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(Ne){this.scenarioMarker.failScenario(a.default.OnNewMessage,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}We.label=6;case 6:return[2]}})})},me.prototype.sendTypingEvent=function(){return N(this,void 0,void 0,function(){var fe,ae,de,xe;return m(this,function(Ce){switch(Ce.label){case 0:if(this.scenarioMarker.startScenario(a.default.SendTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.liveChatVersion!==W.default.V2)return[3,6];Ce.label=1;case 1:return Ce.trys.push([1,4,,5]),[4,this.OCClient.sendTypingIndicator(this.requestId,W.default.V2,{customerDisplayName:b.default.Customer})];case 2:return Ce.sent(),[4,this.conversation.sendTyping()];case 3:return Ce.sent(),this.scenarioMarker.completeScenario(a.default.SendTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,5];case 4:throw Ce.sent(),this.scenarioMarker.failScenario(a.default.SendTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),new Error("OCClientSendTypingFailed");case 5:return[3,12];case 6:fe="{isTyping: 0}",Ce.label=7;case 7:return Ce.trys.push([7,11,,12]),[4,this.conversation.indicateTypingStatus(0)];case 8:return Ce.sent(),[4,this.conversation.getMembers()];case 9:return ae=Ce.sent(),de=ae.filter(function(oe){return oe.type===r.default.Bot}),[4,this.conversation.sendMessageToBot(de[0].id,{payload:fe})];case 10:return Ce.sent(),this.scenarioMarker.completeScenario(a.default.SendTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,12];case 11:return xe=Ce.sent(),console.error("OmnichannelChatSDK/sendTypingEvent/error"),this.scenarioMarker.failScenario(a.default.SendTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,xe];case 12:return[2]}})})},me.prototype.onTypingEvent=function(le){var fe;return N(this,void 0,void 0,function(){return m(this,function(ae){if(this.scenarioMarker.startScenario(a.default.OnTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.liveChatVersion===W.default.V2)try{this.conversation.onTypingEvent(le),this.scenarioMarker.completeScenario(a.default.OnTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(de){this.scenarioMarker.failScenario(a.default.OnTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}else try{null===(fe=this.conversation)||void 0===fe||fe.registerOnNewMessage(function(de){var xe=de.messageType;z.isCustomerMessage(de)||xe===pe.default.Typing&&le(de)}),this.scenarioMarker.completeScenario(a.default.OnTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(de){this.scenarioMarker.failScenario(a.default.OnTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}return[2]})})},me.prototype.onAgentEndSession=function(le){var fe;return N(this,void 0,void 0,function(){var ae=this;return m(this,function(de){if(this.scenarioMarker.startScenario(a.default.OnAgentEndSession,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.liveChatVersion===W.default.V2)try{this.conversation.registerOnThreadUpdate(function(xe){le(xe)}),this.scenarioMarker.completeScenario(a.default.OnAgentEndSession,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(xe){this.scenarioMarker.failScenario(a.default.OnAgentEndSession,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}else try{null===(fe=this.conversation)||void 0===fe||fe.registerOnThreadUpdate(function(xe){1===xe.members.length&&(le(xe),null!==ae.refreshTokenTimer&&(clearInterval(ae.refreshTokenTimer),ae.refreshTokenTimer=null))}),this.scenarioMarker.completeScenario(a.default.OnAgentEndSession,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(xe){this.scenarioMarker.failScenario(a.default.OnAgentEndSession,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}return[2]})})},me.prototype.uploadFileAttachment=function(le){var fe,ae,de,xe;return N(this,void 0,void 0,function(){var Ce,oe,we,ye,re,ee,Ae,J,Te;return m(this,function(Ee){switch(Ee.label){case 0:return this.scenarioMarker.startScenario(a.default.UploadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.liveChatVersion!==W.default.V2?[3,7]:[4,null===(fe=this.AMSClient)||void 0===fe?void 0:fe.createObject(null===(ae=this.chatToken)||void 0===ae?void 0:ae.chatId,le)];case 1:return Ce=Ee.sent(),oe=Ce.id,[4,null===(de=this.AMSClient)||void 0===de?void 0:de.uploadDocument(oe,le)];case 2:we=Ee.sent(),ye={amsReferences:JSON.stringify([oe]),amsreferences:JSON.stringify([oe])},re={amsMetadata:JSON.stringify([{contentType:le.type,fileName:le.name}])},ee={content:"",metadata:p(p({widgetId:this.omnichannelConfig.widgetId,clientMessageId:Date.now().toString()},ye),re)},J={content:"",timestamp:new Date,contentType:$.default.Text,deliveryMode:V.default.Bridged,messageType:pe.default.UserMessage,tags:R(i.defaultMessageTags),sender:{displayName:"Customer",id:"customer",type:r.default.User},fileMetadata:we},Ee.label=3;case 3:return Ee.trys.push([3,5,,6]),[4,null===(xe=this.conversation)||void 0===xe?void 0:xe.sendMessage(ee)];case 4:return Ee.sent(),this.scenarioMarker.completeScenario(a.default.UploadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,J];case 5:return Ee.sent(),console.error("OmnichannelChatSDK/uploadFileAttachment/sendMessage/error"),this.scenarioMarker.failScenario(a.default.UploadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,6];case 6:return[2,{}];case 7:return Ae=void 0,h.default.isReactNative()||h.default.isNode()?[4,this.conversation.sendFileData(le,U.default.AmsBasedFileSharing)]:[3,9];case 8:return Ae=Ee.sent(),[3,11];case 9:return[4,this.conversation.uploadFile(le,U.default.AmsBasedFileSharing)];case 10:Ae=Ee.sent(),Ee.label=11;case 11:J={content:"",timestamp:new Date,contentType:$.default.Text,deliveryMode:V.default.Bridged,messageType:pe.default.UserMessage,tags:R(i.defaultMessageTags),sender:{displayName:"Customer",id:"customer",type:r.default.User},fileMetadata:Ae},Ee.label=12;case 12:return Ee.trys.push([12,14,,15]),[4,this.conversation.sendFileMessage(Ae,J)];case 13:return Ee.sent(),this.scenarioMarker.completeScenario(a.default.UploadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,J];case 14:return Te=Ee.sent(),console.error("OmnichannelChatSDK/uploadFileAttachment/error: "+Te),this.scenarioMarker.failScenario(a.default.UploadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,Te];case 15:return[2]}})})},me.prototype.downloadFileAttachment=function(le){var fe,ae;return N(this,void 0,void 0,function(){var de,xe,Ce,we,ye;return m(this,function(re){switch(re.label){case 0:if(this.scenarioMarker.startScenario(a.default.DownloadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.liveChatVersion!==W.default.V2)return[3,6];re.label=1;case 1:return re.trys.push([1,4,,5]),[4,null===(fe=this.AMSClient)||void 0===fe?void 0:fe.getViewStatus(le)];case 2:return de=re.sent(),xe=de.view_location,[4,null===(ae=this.AMSClient)||void 0===ae?void 0:ae.getView(le,xe)];case 3:return Ce=re.sent(),this.scenarioMarker.completeScenario(a.default.DownloadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,Ce];case 4:throw re.sent(),this.scenarioMarker.failScenario(a.default.DownloadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),new Error("DownloadFileAttachmentFailed");case 5:return[3,9];case 6:return re.trys.push([6,8,,9]),[4,this.conversation.downloadFile(le)];case 7:return we=re.sent(),this.scenarioMarker.completeScenario(a.default.DownloadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,we];case 8:throw ye=re.sent(),console.error("OmnichannelChatSDK/downloadFileAttachment/error: "+ye),this.scenarioMarker.failScenario(a.default.DownloadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),new Error("DownloadFileAttachmentFailed");case 9:return[2]}})})},me.prototype.emailLiveChatTranscript=function(le){return N(this,void 0,void 0,function(){var fe,ae,de;return m(this,function(xe){fe={},this.scenarioMarker.startScenario(a.default.EmailLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId});try{return this.authenticatedUserToken&&(fe.authenticatedUserToken=this.authenticatedUserToken),ae={ChatId:this.chatToken.chatId,EmailAddress:le.emailAddress,DefaultAttachmentMessage:le.attachmentMessage,CustomerLocale:le.locale||T.getLocaleStringFromId(this.localeId)},de=this.OCClient.emailTranscript(this.requestId,this.chatToken.token,ae,fe),this.scenarioMarker.completeScenario(a.default.EmailLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,de]}catch(Ce){console.error("OmnichannelChatSDK/emailLiveChatTranscript/error: "+Ce),this.scenarioMarker.failScenario(a.default.EmailLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}return[2]})})},me.prototype.getLiveChatTranscript=function(){return N(this,void 0,void 0,function(){var le,fe;return m(this,function(ae){le={},this.scenarioMarker.startScenario(a.default.GetLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId});try{return this.authenticatedUserToken&&(le.authenticatedUserToken=this.authenticatedUserToken),fe=this.OCClient.getChatTranscripts(this.requestId,this.chatToken.chatId,this.chatToken.token,le),this.scenarioMarker.completeScenario(a.default.GetLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,fe]}catch(de){this.scenarioMarker.failScenario(a.default.GetLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}return[2]})})},me.prototype.createChatAdapter=function(le){var fe;return void 0===le&&(le={}),N(this,void 0,void 0,function(){var ae,de,xe;return m(this,function(Ce){return h.default.isNode()||h.default.isReactNative()?[2,Promise.reject("ChatAdapter is only supported on browser")]:(de=[P.default.ACS,P.default.IC3,P.default.DirectLine],(ae=le.protocol)&&!de.includes(ae)?[2,Promise.reject("ChatAdapter for protocol "+ae+" currently not supported")]:ae===P.default.DirectLine?[2,A.createDirectLine(le,this.chatSDKConfig,this.liveChatVersion,P.default.DirectLine,this.telemetry,this.scenarioMarker)]:ae===P.default.ACS||this.liveChatVersion===W.default.V2?(xe=new w.default(this.AMSClient,this.acsAdapterLogger),[2,A.createACSAdapter(le,this.chatSDKConfig,this.liveChatVersion,P.default.ACS,this.telemetry,this.scenarioMarker,this.omnichannelConfig,this.chatToken,xe,null===(fe=this.ACSClient)||void 0===fe?void 0:fe.getChatClient(),this.acsAdapterLogger)]):ae===P.default.IC3||this.liveChatVersion===W.default.V1?[2,A.createIC3Adapter(le,this.chatSDKConfig,this.liveChatVersion,P.default.IC3,this.telemetry,this.scenarioMarker,this.chatToken,this.IC3Client,this.ic3ClientLogger)]:[2,Promise.reject("ChatAdapter for protocol "+ae+" currently not supported")])})})},me.prototype.getVoiceVideoCalling=function(le){return void 0===le&&(le={}),N(this,void 0,void 0,function(){var fe,ae,xe,Ce,oe,we=this;return m(this,function(ye){switch(ye.label){case 0:if(this.scenarioMarker.startScenario(a.default.GetVoiceVideoCalling),h.default.isNode()||h.default.isReactNative())throw fe={response:"UnsupportedPlatform",message:"VoiceVideoCalling is only supported on browser"},this.scenarioMarker.failScenario(a.default.GetVoiceVideoCalling,{ExceptionDetails:JSON.stringify(fe)}),new Error(fe.response);if(this.callingOption.toString()===I.default.NoCalling.toString())throw fe={response:"FeatureDisabled",message:"Voice and video call is not enabled"},this.scenarioMarker.failScenario(a.default.GetVoiceVideoCalling,{ExceptionDetails:JSON.stringify(fe)}),new Error(fe.response);return[4,this.getChatConfig()];case 1:return ae=ye.sent(),xe=ae.LiveWSAndLiveChatEngJoin.msdyn_widgetsnippet,Ce=new RegExp('src="(https:\\/\\/[\\w-.]+)[\\w-.\\/]+"'),(oe=xe.match(Ce))&&oe.length?[2,new Promise(function(re){return N(we,void 0,void 0,function(){var ee,J,Ae,ue=this;return m(this,function(Te){switch(Te.label){case 0:return ee=oe[1]+"/livechatwidget/WebChatControl/lib/CallingBundle.js",null===(Ae=this.telemetry)||void 0===Ae||Ae.setCDNPackages({VoiceVideoCalling:ee}),J={logger:this.callingSdkLogger},[4,g.loadScript(ee,function(){return N(ue,void 0,void 0,function(){var Ee;return m(this,function(We){switch(We.label){case 0:return this.debug&&console.debug(ee+" loaded!"),[4,d.default(p(p({},le),J))];case 1:return Ee=We.sent(),this.scenarioMarker.completeScenario(a.default.GetVoiceVideoCalling),Ee.useScenarioMarker(this.scenarioMarker),re(Ee),[2]}})})},function(){return N(ue,void 0,void 0,function(){var Ee;return m(this,function(We){throw Ee={response:"VoiceVideoCallingLoadFailed",message:"Failed to load VoiceVideoCalling"},this.scenarioMarker.failScenario(a.default.GetVoiceVideoCalling,{ExceptionDetails:JSON.stringify(Ee)}),new Error(Ee.response)})})})];case 1:return Te.sent(),[2]}})})})]:[2]}})})},me.prototype.getPostChatSurveyContext=function(){return N(this,void 0,void 0,function(){var le,ae,xe,Ce,oe,we,ye,re,ee,J,ue,Te,Ee,We,_e;return m(this,function(Be){switch(Be.label){case 0:this.scenarioMarker.startScenario(a.default.GetPostChatSurveyContext,{RequestId:this.requestId}),Be.label=1;case 1:return Be.trys.push([1,6,,7]),xe=(ae=this.liveChatConfig.LiveWSAndLiveChatEngJoin).msfp_sourcesurveyidentifier,Ce=ae.msfp_botsourcesurveyidentifier,oe=ae.postConversationSurveyOwnerId,we=ae.postConversationBotSurveyOwnerId,"true"!==ae.msdyn_postconversationsurveyenable?[3,4]:[4,this.getConversationDetails()];case 2:return ye=Be.sent(),re="True"===(null==ye?void 0:ye.canRenderPostChat),J={FormId:"Bot"===(ee=null==ye?void 0:ye.participantType)?Ce:xe,ConversationId:le=null==ye?void 0:ye.conversationId,OCLocaleCode:T.getLocaleStringFromId(this.localeId)},ue={requestId:this.requestId},this.authenticatedUserToken&&(ue.authenticatedUserToken=this.authenticatedUserToken),[4,this.OCClient.getSurveyInviteLink("Bot"===ee?we:oe,J,ue)];case 3:return Te=Be.sent(),Ee=void 0,We=void 0,null!=Te?null==Te.inviteList||1!=Te.inviteList.length?(this.scenarioMarker.failScenario(a.default.GetPostChatSurveyContext,{ConversationId:le,RequestId:this.requestId,ExceptionDetails:"Survey Invite link failed to send response."}),[2,Promise.reject("Survey Invite link failed to send response.")]):(Ee=Te.inviteList[0].invitationLink,null!=Te.formsProLocaleCode&&(We=Te.formsProLocaleCode),[2,Promise.resolve({participantJoined:re,participantType:ee,surveyInviteLink:Ee,formsProLocale:We})]):(this.scenarioMarker.failScenario(a.default.GetPostChatSurveyContext,{ConversationId:le,RequestId:this.requestId,ExceptionDetails:"surveyInviteLinkResponse is null."}),[2,Promise.reject("surveyInviteLinkResponse is null.")]);case 4:return this.scenarioMarker.failScenario(a.default.GetPostChatSurveyContext,{RequestId:this.requestId,ExceptionDetails:"Post Chat Survey is disabled. Please check the Omnichannel Administration Portal."}),[2,Promise.reject("Post Chat is disabled from admin side.")];case 5:return[3,7];case 6:return _e=Be.sent(),this.scenarioMarker.failScenario(a.default.GetPostChatSurveyContext,{ConversationId:null!=le?le:"",RequestId:this.requestId,ExceptionDetails:JSON.stringify(_e)}),[2,Promise.reject("Retrieving post chat context failed "+JSON.stringify(_e))];case 7:return[2]}})})},me.prototype.getAgentAvailability=function(le){return void 0===le&&(le={}),N(this,void 0,void 0,function(){var fe,ae,xe,Ce=this;return m(this,function(oe){switch(oe.label){case 0:fe=function(we,ye,re){void 0===re&&(re="");var ee={response:we,message:ye};throw Ce.scenarioMarker.failScenario(a.default.GetAgentAvailability,{RequestId:Ce.requestId,ExceptionDetails:JSON.stringify(ee),ChatId:re}),new Error(ee.message)},this.scenarioMarker.startScenario(a.default.GetAgentAvailability,{RequestId:this.requestId}),this.authSettings||fe("Unsupported","GetAgentAvailability is supported only for authenticated live chat widget."),this.authenticatedUserToken||fe("UndefinedAuthToken","Missing AuthToken for GetAgentAvailability."),this.conversation&&fe("InvalidOperation","GetAgentAvailability can only be called before a chat has started.",this.chatToken.chatId),ae=this.populateInitChatOptionalParam(ae={initContext:{}},le),oe.label=1;case 1:return oe.trys.push([1,3,,4]),[4,this.OCClient.getAgentAvailability(this.requestId,ae)];case 2:return[2,oe.sent()];case 3:return xe=oe.sent(),fe("GetAgentAvailabilityFailed",xe.message),[3,4];case 4:return[2]}})})},me.prototype.getIC3Client=function(){return N(this,void 0,void 0,function(){var le,fe=this;return m(this,function(ae){switch(ae.label){case 0:return h.default.isNode()||h.default.isReactNative()?(this.debug&&console.debug("IC3Core"),this.scenarioMarker.startScenario(a.default.GetIC3Client),this.IC3SDKProvider=H.SDKProvider,[4,H.SDKProvider.getSDK({hostType:B.default.Page,protocolType:s.default.IC3V1SDK})]):[3,2];case 1:return(le=ae.sent()).setDebug(this.debug),this.scenarioMarker.completeScenario(a.default.GetIC3Client),[2,le];case 2:return this.debug&&console.debug("IC3Client"),[2,new Promise(function(de,xe){return N(fe,void 0,void 0,function(){var Ce,oe,ye,we=this;return m(this,function(re){switch(re.label){case 0:return Ce=this.resolveIC3ClientUrl(),null===(ye=this.telemetry)||void 0===ye||ye.setCDNPackages({IC3Client:Ce}),this.scenarioMarker.startScenario(a.default.GetIC3Client),this.IC3SDKProvider?[4,this.IC3SDKProvider.getSDK({hostType:B.default.IFrame,protocolType:s.default.IC3V1SDK,logger:this.ic3ClientLogger})]:[3,2];case 1:return oe=re.sent(),[2,de(oe)];case 2:return window.addEventListener("ic3:sdk:load",function(){return N(we,void 0,void 0,function(){var ee,J,ue;return m(this,function(Ae){switch(Ae.label){case 0:return this.debug&&console.debug("ic3:sdk:load"),ee=window.Microsoft.CRM.Omnichannel.IC3Client.SDK,this.IC3SDKProvider=J=ee.SDKProvider,[4,J.getSDK({hostType:B.default.IFrame,protocolType:s.default.IC3V1SDK,logger:this.ic3ClientLogger})];case 1:return ue=Ae.sent(),this.scenarioMarker.completeScenario(a.default.GetIC3Client),de(ue),[2]}})})}),[4,g.loadScript(Ce,function(){we.debug&&console.debug("IC3Client loaded!")},function(){we.scenarioMarker.failScenario(a.default.GetIC3Client,{ExceptionDetails:JSON.stringify({response:"IC3ClientLoadFailed"})}),xe("Failed to load IC3Client")})];case 3:return re.sent(),[2]}})})})]}})})},me.prototype.getChatConfig=function(le){return void 0===le&&(le={}),N(this,void 0,void 0,function(){var fe,de,xe,Ce,oe,we,J,ue,Ae,Te,Ee,We,Ne,_e;return m(this,function(Be){switch(Be.label){case 0:fe=le.sendCacheHeaders,Be.label=1;case 1:return Be.trys.push([1,5,,6]),[4,this.OCClient.getChatConfig(this.requestId,!0===fe)];case 2:return de=Be.sent(),xe=de.DataMaskingInfo,Ce=de.LiveChatConfigAuthSettings,oe=de.LiveWSAndLiveChatEngJoin,we=de.LiveChatVersion,this.localeId=de.ChatWidgetLanguage.msdyn_localeid||T.defaultLocaleId,this.liveChatVersion=we||W.default.V1,this.debug&&console.log("[OmnichannelChatSDK][getChatConfig][liveChatVersion] "+this.liveChatVersion),xe.setting.msdyn_maskforcustomer&&(this.dataMaskingRules=xe.dataMaskingRules),Ce&&(this.authSettings=Ce),J=oe.PreChatSurvey,Ae=oe.msdyn_callingoptions,We=!0===(ue=oe.msdyn_prechatenabled)||"true"==ue,Ne=!0===(Ee=oe.msdyn_enablechatreconnect)||"true"==Ee,(null==(Te=oe.msdyn_conversationmode)?void 0:Te.toString())===O.default.PersistentChat.toString()&&(this.isPersistentChat=!0),Ne&&!this.isPersistentChat&&(this.isChatReconnect=!0),We&&J&&J.trim().length>0&&(this.preChatSurvey=J),this.authSettings?[4,this.setAuthTokenProvider(this.chatSDKConfig.getAuthToken)]:[3,4];case 3:Be.sent(),Be.label=4;case 4:return this.preChatSurvey&&this.debug&&console.log("Prechat Survey!"),this.callingOption=Ae,this.liveChatConfig=de,[2,this.liveChatConfig];case 5:return _e=Be.sent(),console.error("OmnichannelChatSDK/getChatConfig/error "+_e),[2,_e];case 6:return[2]}})})},me.prototype.resolveIC3ClientUrl=function(){return q.default.resolveIC3ClientUrl(this.chatSDKConfig)},me.prototype.resolveChatAdapterUrl=function(le){return q.default.resolveChatAdapterUrl(this.chatSDKConfig,this.liveChatVersion,le)},me.prototype.updateChatToken=function(le,fe){return N(this,void 0,void 0,function(){var ae,de;return m(this,function(Ce){switch(Ce.label){case 0:this.scenarioMarker.startScenario(a.default.UpdateChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),Ce.label=1;case 1:return Ce.trys.push([1,4,,5]),ae={token:le,regionGtms:fe,visitor:!0},this.liveChatVersion!==W.default.V1?[3,3]:[4,this.IC3Client.initialize(ae)];case 2:Ce.sent(),Ce.label=3;case 3:return this.scenarioMarker.completeScenario(a.default.UpdateChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,5];case 4:return de=Ce.sent(),this.scenarioMarker.failScenario(a.default.UpdateChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify({response:"UpdateChatTokenFailed"})}),console.error("OmnichannelChatSDK/updateChatToken/error "+de),[3,5];case 5:return[2]}})})},me.prototype.setAuthTokenProvider=function(le){return N(this,void 0,void 0,function(){var fe,ae;return m(this,function(xe){switch(xe.label){case 0:if(this.scenarioMarker.startScenario(a.default.GetAuthToken),this.chatSDKConfig.getAuthToken=le,!this.chatSDKConfig.getAuthToken)return[3,5];xe.label=1;case 1:return xe.trys.push([1,3,,4]),[4,this.chatSDKConfig.getAuthToken()];case 2:return(fe=xe.sent())?(this.authenticatedUserToken=fe,this.scenarioMarker.completeScenario(a.default.GetAuthToken)):(ae={response:"UndefinedAuthToken"},this.scenarioMarker.failScenario(a.default.GetAuthToken,{ExceptionDetails:JSON.stringify(ae)})),[3,4];case 3:return xe.sent(),ae={response:"GetAuthTokenFailed"},this.scenarioMarker.failScenario(a.default.GetAuthToken,{ExceptionDetails:JSON.stringify(ae)}),[3,4];case 4:return[3,6];case 5:ae={response:"GetAuthTokenNotFound"},this.scenarioMarker.failScenario(a.default.GetAuthToken,{ExceptionDetails:JSON.stringify(ae)}),xe.label=6;case 6:return[2]}})})},me}();L.default=ge},6633:function(Y,L,E){"use strict";var p=this&&this.__awaiter||function(T,g,h,C){return new(h||(h=Promise))(function(w,I){function P(V){try{O(C.next(V))}catch(U){I(U)}}function k(V){try{O(C.throw(V))}catch(U){I(U)}}function O(V){V.done?w(V.value):function(w){return w instanceof h?w:new h(function(I){I(w)})}(V.value).then(P,k)}O((C=C.apply(T,g||[])).next())})},N=this&&this.__generator||function(T,g){var C,b,w,I,h={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return I={next:P(0),throw:P(1),return:P(2)},"function"==typeof Symbol&&(I[Symbol.iterator]=function(){return this}),I;function P(O){return function(V){return function(O){if(C)throw new TypeError("Generator is already executing.");for(;h;)try{if(C=1,b&&(w=2&O[0]?b.return:O[0]?b.throw||((w=b.return)&&w.call(b),0):b.next)&&!(w=w.call(b,O[1])).done)return w;switch(b=0,w&&(O=[2&O[0],w.value]),O[0]){case 0:case 1:w=O;break;case 4:return h.label++,{value:O[1],done:!1};case 5:h.label++,b=O[1],O=[0];continue;case 7:O=h.ops.pop(),h.trys.pop();continue;default:if(!(w=(w=h.trys).length>0&&w[w.length-1])&&(6===O[0]||2===O[0])){h=0;continue}if(3===O[0]&&(!w||O[1]>w[0]&&O[1]<w[3])){h.label=O[1];break}if(6===O[0]&&h.label<w[1]){h.label=w[1],w=O;break}if(w&&h.label<w[2]){h.label=w[2],h.ops.push(O);break}w[2]&&h.ops.pop(),h.trys.pop();continue}O=g.call(T,h)}catch(V){O=[6,V],b=0}finally{C=w=0}if(5&O[0])throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}([O,V])}}};Object.defineProperty(L,"__esModule",{value:!0}),L.VoiceVideoCallingProxy=void 0;var m=E(9600),R=(()=>{return(T=R||(R={}))[T.Voice=19237e4]="Voice",T[T.Video=19238e4]="Video",T[T.Cobrowse=19239e4]="Cobrowse",R;var T})(),u=(()=>{return(T=u||(u={})).Accept="accept",T.Reject="reject",T.Connect="connect",T.End="end",u;var T})(),v=(()=>{return(T=v||(v={})).CallAdded="callAdded",T.LocalVideoStreamAdded="localVideoStreamAdded",T.LocalVideoStreamRemoved="localVideoStreamRemoved",T.RemoteVideoStreamAdded="remoteVideoStreamAdded",T.RemoteVideoStreamRemoved="remoteVideoStreamRemoved",T.CallDisconnected="callDisconnected",T.ParticipantDisconnected="participantDisconnected",T.IncomingCallEnded="incomingCallEnded",v;var T})(),M=function(){function T(){this.debug=!1,this.callClientName="ElevateToVoiceVideo",this.proxy=window["Microsoft.Omnichannel.Calling.SDK"].VoiceVideoCalling,this.proxyInstance=this.proxy.getInstance()}return T.getInstance=function(){return this._instance||(this._instance=new T),this._instance},T.prototype.setDebug=function(g){this.debug=g},T.prototype.useScenarioMarker=function(g){this.scenarioMarker=g},T.prototype.load=function(g){return void 0===g&&(g={}),p(this,void 0,void 0,function(){return N(this,function(h){return g.logger&&(this.logger=g.logger),this.proxyInstance.load(g),[2]})})},T.prototype.isInitialized=function(){return this.proxyInstance.isInitialized()},T.prototype.initialize=function(g){var h,C,b,w,I,P,k,O;return p(this,void 0,void 0,function(){var V;return N(this,function(U){switch(U.label){case 0:return this.debug&&console.debug("[VoiceVideoCallingProxy] VoiceVideoCallingParams: "+JSON.stringify(g)),this.callingParams=g,null===(h=this.scenarioMarker)||void 0===h||h.startScenario(m.default.InitializeVoiceVideoCallingSDK),this.debug&&console.debug("[VoiceVideoCallingProxy][initialize] _isLoaded: "+this.proxyInstance._isLoaded),this.proxyInstance._isLoaded?[3,2]:[4,this.proxyInstance.load({logger:this.logger||void 0})];case 1:U.sent(),U.label=2;case 2:return U.trys.push([2,4,,5]),[4,this.proxyInstance.initialize({callClientName:this.callClientName,accesstoken:(null===(b=null===(C=this.callingParams)||void 0===C?void 0:C.chatToken.voiceVideoCallToken)||void 0===b?void 0:b.Token)||(null===(w=this.callingParams)||void 0===w?void 0:w.chatToken.token),selfVideoHTMLElementId:null===(I=this.callingParams)||void 0===I?void 0:I.selfVideoHTMLElementId,remoteVideoHTMLElementId:null===(P=this.callingParams)||void 0===P?void 0:P.remoteVideoHTMLElementId})];case 3:return U.sent(),null===(k=this.scenarioMarker)||void 0===k||k.completeScenario(m.default.InitializeVoiceVideoCallingSDK),[3,5];case 4:return V=U.sent(),console.log(V),null===(O=this.scenarioMarker)||void 0===O||O.failScenario(m.default.InitializeVoiceVideoCallingSDK),[3,5];case 5:return[2]}})})},T.prototype.addEventListener=function(g,h){var C=this;this.proxyInstance.registerEvent(g,function(b){var w=b.callId;g===v.CallAdded&&(C.callId=w),C.debug&&console.debug("[VoiceVideoCallingProxy]["+g+"] callId: "+w),w===C.callId&&h(b)})},T.prototype.isMicrophoneMuted=function(){return this.proxyInstance.isMicrophoneMuted({callClientName:this.callClientName,callId:this.callId})},T.prototype.acceptCall=function(g){var h,C,b,w,I,P;return void 0===g&&(g={}),p(this,void 0,void 0,function(){var k,O,V,H,B;return N(this,function(W){switch(W.label){case 0:O=(k=this).callClientName,V=k.callId,null===(h=this.scenarioMarker)||void 0===h||h.startScenario(g.withVideo?m.default.AcceptVideoCall:m.default.AcceptVoiceCall,{CallId:V||""}),this.debug&&console.debug("[VoiceVideoCallingProxy][acceptCall] callId: "+V),this.debug&&console.debug(g),W.label=1;case 1:return W.trys.push([1,3,,4]),[4,this.proxyInstance.acceptCall({callClientName:O,callId:V,withVideo:g.withVideo||!1})];case 2:return W.sent(),[3,4];case 3:return W.sent(),B={response:g.withVideo?"AcceptVideoCallFailed":"AcceptVoiceCallFailed"},null===(C=this.scenarioMarker)||void 0===C||C.failScenario(g.withVideo?m.default.AcceptVideoCall:m.default.AcceptVoiceCall,{CallId:V||"",ExceptionDetails:JSON.stringify(B)}),[3,4];case 4:H={SecondaryChannelType:g.withVideo?R.Video:R.Voice,SecondaryChannelEventType:u.Accept};try{null===(b=this.callingParams)||void 0===b||b.OCClient.makeSecondaryChannelEventRequest(null===(w=this.callingParams)||void 0===w?void 0:w.chatToken.requestId,H),null===(I=this.scenarioMarker)||void 0===I||I.completeScenario(g.withVideo?m.default.AcceptVideoCall:m.default.AcceptVoiceCall,{CallId:V||""}),this.debug&&console.debug("[VoiceVideoCallingProxy][acceptCall][makeSecondaryChannelEventRequest]")}catch(te){B={response:"OCClientMakeSecondaryChannelEventRequestFailed"},null===(P=this.scenarioMarker)||void 0===P||P.failScenario(g.withVideo?m.default.AcceptVideoCall:m.default.AcceptVoiceCall,{CallId:V||"",ExceptionDetails:JSON.stringify(B)}),console.error("[VoiceVideoCallingProxy][acceptCall][makeSecondaryChannelEventRequest] Failure "+te)}return[2]}})})},T.prototype.rejectCall=function(){var g,h,C,b,w,I;return p(this,void 0,void 0,function(){var P,k,O,B,U;return N(this,function(H){switch(H.label){case 0:k=(P=this).callClientName,O=P.callId,null===(g=this.scenarioMarker)||void 0===g||g.startScenario(m.default.RejectCall,{CallId:O||""}),this.debug&&console.debug("[VoiceVideoCallingProxy][rejectCall] callId: "+O),H.label=1;case 1:return H.trys.push([1,3,,4]),[4,this.proxyInstance.rejectCall({callClientName:k,callId:O})];case 2:return H.sent(),null===(h=this.scenarioMarker)||void 0===h||h.completeScenario(m.default.RejectCall,{CallId:O||""}),[3,4];case 3:return H.sent(),U={response:"RejectCallFailed"},null===(C=this.scenarioMarker)||void 0===C||C.failScenario(m.default.RejectCall,{CallId:O||"",ExceptionDetails:JSON.stringify(U)}),[3,4];case 4:B={SecondaryChannelType:this.isRemoteVideoEnabled()?R.Video:R.Voice,SecondaryChannelEventType:u.Reject};try{null===(b=this.callingParams)||void 0===b||b.OCClient.makeSecondaryChannelEventRequest(null===(w=this.callingParams)||void 0===w?void 0:w.chatToken.requestId,B),this.debug&&console.debug("[VoiceVideoCallingProxy][rejectCall][makeSecondaryChannelEventRequest]")}catch(W){return U={response:"OCClientMakeSecondaryChannelEventRequestFailed"},null===(I=this.scenarioMarker)||void 0===I||I.failScenario(m.default.RejectCall,{CallId:O||"",ExceptionDetails:JSON.stringify(U)}),console.error("[VoiceVideoCallingProxy][rejectCall][makeSecondaryChannelEventRequest] Failure "+W),[2,W]}return[2]}})})},T.prototype.stopCall=function(){var g,h,C,b,w;return p(this,void 0,void 0,function(){var I,P,k,O;return N(this,function(U){switch(U.label){case 0:P=(I=this).callClientName,k=I.callId,null===(g=this.scenarioMarker)||void 0===g||g.startScenario(m.default.StopCall,{CallId:k||""}),this.debug&&console.debug("[VoiceVideoCallingProxy][stopCall] callId: "+k),O=!!(null===(C=null===(h=this.callingParams)||void 0===h?void 0:h.chatToken.voiceVideoCallToken)||void 0===C?void 0:C.Token),U.label=1;case 1:return U.trys.push([1,3,,4]),[4,this.proxyInstance.stopCall({callClientName:P,callId:k,forEveryone:O})];case 2:return U.sent(),null===(b=this.scenarioMarker)||void 0===b||b.completeScenario(m.default.StopCall,{CallId:k||""}),[3,4];case 3:return U.sent(),null===(w=this.scenarioMarker)||void 0===w||w.failScenario(m.default.StopCall,{CallId:k||""}),[3,4];case 4:return[2]}})})},T.prototype.toggleMute=function(){return p(this,void 0,void 0,function(){var g;return N(this,function(b){return[2,this.proxyInstance.toggleMute({callClientName:(g=this).callClientName,callId:g.callId})]})})},T.prototype.isRemoteVideoEnabled=function(){return this.proxyInstance.isRemoteVideoEnabled({callClientName:this.callClientName,callId:this.callId})},T.prototype.isLocalVideoEnabled=function(){return this.proxyInstance.isLocalVideoEnabled({callClientName:this.callClientName,callId:this.callId})},T.prototype.toggleLocalVideo=function(){return p(this,void 0,void 0,function(){var g;return N(this,function(b){return[2,this.proxyInstance.toggleLocalVideo({callClientName:(g=this).callClientName,callId:g.callId})]})})},T.prototype.isInACall=function(){return this.proxyInstance.isInACall({callClientName:this.callClientName,callId:this.callId})},T.prototype.renderVideoStreams=function(){return this.proxyInstance.renderVideoStreams({callClientName:this.callClientName,callId:this.callId})},T.prototype.disposeVideoRenderers=function(){return this.proxyInstance.disposeVideoRenderers({callClientName:this.callClientName,callId:this.callId})},T.prototype.close=function(){this.debug&&console.debug("[VoiceVideoCallingProxy][close]"),this.proxyInstance.dispose(),this.callingParams=void 0,this.callId=void 0},T.prototype.onCallAdded=function(g){var h=v.CallAdded;this.debug&&console.debug("[VoiceVideoCallingProxy]["+h+"]"),this.addEventListener(h,g)},T.prototype.onLocalVideoStreamAdded=function(g){var h=v.LocalVideoStreamAdded;this.debug&&console.debug("[VoiceVideoCallingProxy]["+h+"]"),this.addEventListener(h,g)},T.prototype.onLocalVideoStreamRemoved=function(g){var h=v.LocalVideoStreamRemoved;this.debug&&console.debug("[VoiceVideoCallingProxy]["+h+"]"),this.addEventListener(h,g)},T.prototype.onRemoteVideoStreamAdded=function(g){var h=v.RemoteVideoStreamAdded;this.debug&&console.debug("[VoiceVideoCallingProxy]["+h+"]"),this.addEventListener(h,g)},T.prototype.onRemoteVideoStreamRemoved=function(g){var h=v.RemoteVideoStreamRemoved;this.debug&&console.debug("[VoiceVideoCallingProxy]["+h+"]"),this.addEventListener(h,g)},T.prototype.onCallDisconnected=function(g){var h=this,C=v.CallDisconnected;this.debug&&console.debug("[VoiceVideoCallingProxy]["+C+"]"),this.addEventListener(C,function(b){return p(h,void 0,void 0,function(){var w,I,P,k,O,V,U;return N(this,function(B){w={SecondaryChannelType:R.Voice,SecondaryChannelEventType:u.End},null===(P=this.scenarioMarker)||void 0===P||P.startScenario(m.default.OnCallDisconnected,{CallId:this.callId||""});try{null===(k=this.callingParams)||void 0===k||k.OCClient.makeSecondaryChannelEventRequest(null===(O=this.callingParams)||void 0===O?void 0:O.chatToken.requestId,w),this.debug&&console.debug("[VoiceVideoCallingProxy][onCallDisconnected][makeSecondaryChannelEventRequest]"),null===(V=this.scenarioMarker)||void 0===V||V.completeScenario(m.default.OnCallDisconnected,{CallId:this.callId||""})}catch(H){console.error("[VoiceVideoCallingProxy][onCallDisconnected][makeSecondaryChannelEventRequest] Failure "+H),I={response:"OCClientMakeSecondaryChannelEventRequestFailed"},null===(U=this.scenarioMarker)||void 0===U||U.failScenario(m.default.OnCallDisconnected,{CallId:this.callId||"",ExceptionDetails:JSON.stringify(I)})}return this.clearRemoteVideoElementChildren(),g(b),[2]})})})},T.prototype.clearRemoteVideoElementChildren=function(){var g,h;if(null===(g=this.callingParams)||void 0===g?void 0:g.remoteVideoHTMLElementId)for(var C=document.getElementById(null===(h=this.callingParams)||void 0===h?void 0:h.remoteVideoHTMLElementId);null==C?void 0:C.firstChild;)this.debug&&console.debug("[VoiceVideoCallingProxy][clearRemoteVideoElement]"),C.firstChild.remove()},T}();L.VoiceVideoCallingProxy=M,L.default=function(T){return void 0===T&&(T={}),p(void 0,void 0,void 0,function(){var g;return N(this,function(h){switch(h.label){case 0:return[4,(g=M.getInstance()).load({logger:T.logger||void 0})];case 1:return h.sent(),[2,Promise.resolve(g)]}})})}},4151:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.ariaTelemetryKey=L.webChatDirectLineVersion=L.webChatACSAdapterVersion=L.webChatIC3AdapterVersion=L.ic3ClientVersion=void 0,L.ic3ClientVersion="2021.08.14.1",L.webChatIC3AdapterVersion="0.1.0-master.2dba07b",L.webChatACSAdapterVersion="0.0.35-beta.12",L.webChatDirectLineVersion="0.15.1",L.ariaTelemetryKey="c7655518acf1403f93ff6b9f77942f0a-d01a02fd-6b50-4de3-a566-62eda11f93bc-7083"},6419:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=(()=>{return(p=E||(E={}))[p.NoCalling=19235e4]="NoCalling",p[p.VideoAndVoiceCalling=192350001]="VideoAndVoiceCalling",p[p.VoiceOnly=192350002]="VoiceOnly",E;var p})();L.default=E},7587:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=(()=>{return(p=E||(E={})).ChatAdapterInitializationFailure="ChatAdapterInitializationFailure",p.ScriptLoadFailure="ScriptLoadFailure",p.UnsupportedPlatform="UnsupportedPlatform",E;var p})();L.default=E},7925:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=(()=>{return(p=E||(E={}))[p.LiveChat=19235e4]="LiveChat",p[p.PersistentChat=192350001]="PersistentChat",E;var p})();L.default=E},8191:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=(()=>{return(p=E||(E={}))[p.V1=1]="V1",p[p.V2=2]="V2",E;var p})();L.default=E},5642:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=(()=>{return(p=E||(E={})).Active="Active",p.Closed="Closed",p.Open="Open",p.Waiting="Waiting",p.WrapUp="WrapUp",E;var p})();L.default=E},6233:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=(()=>{return(p=E||(E={}))[p.WidgetUseOutsideOperatingHour=705]="WidgetUseOutsideOperatingHour",E;var p})();L.default=E},1974:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=(()=>{return(p=E||(E={})).Text="text",p.TopicUpdated="topicUpdated",p.ParticipantAdded="participantAdded",p.ParticipantRemoved="participantRemoved",E;var p})();L.default=E},2902:function(Y,L,E){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(I){for(var P,k=1,O=arguments.length;k<O;k++)for(var V in P=arguments[k])Object.prototype.hasOwnProperty.call(P,V)&&(I[V]=P[V]);return I}).apply(this,arguments)},N=this&&this.__awaiter||function(I,P,k,O){return new(k||(k=Promise))(function(U,B){function H($){try{te(O.next($))}catch(pe){B(pe)}}function W($){try{te(O.throw($))}catch(pe){B(pe)}}function te($){$.done?U($.value):function(U){return U instanceof k?U:new k(function(B){B(U)})}($.value).then(H,W)}te((O=O.apply(I,P||[])).next())})},m=this&&this.__generator||function(I,P){var O,V,U,B,k={label:0,sent:function(){if(1&U[0])throw U[1];return U[1]},trys:[],ops:[]};return B={next:H(0),throw:H(1),return:H(2)},"function"==typeof Symbol&&(B[Symbol.iterator]=function(){return this}),B;function H(te){return function($){return function(te){if(O)throw new TypeError("Generator is already executing.");for(;k;)try{if(O=1,V&&(U=2&te[0]?V.return:te[0]?V.throw||((U=V.return)&&U.call(V),0):V.next)&&!(U=U.call(V,te[1])).done)return U;switch(V=0,U&&(te=[2&te[0],U.value]),te[0]){case 0:case 1:U=te;break;case 4:return k.label++,{value:te[1],done:!1};case 5:k.label++,V=te[1],te=[0];continue;case 7:te=k.ops.pop(),k.trys.pop();continue;default:if(!(U=(U=k.trys).length>0&&U[U.length-1])&&(6===te[0]||2===te[0])){k=0;continue}if(3===te[0]&&(!U||te[1]>U[0]&&te[1]<U[3])){k.label=te[1];break}if(6===te[0]&&k.label<U[1]){k.label=U[1],U=te;break}if(U&&k.label<U[2]){k.label=U[2],k.ops.push(te);break}U[2]&&k.ops.pop(),k.trys.pop();continue}te=P.call(I,k)}catch($){te=[6,$],V=0}finally{O=U=0}if(5&te[0])throw te[1];return{value:te[0]?te[1]:void 0,done:!0}}([te,$])}}};Object.defineProperty(L,"__esModule",{value:!0}),L.ACSConversation=void 0;var R=E(1974),u=E(8953),v=E(8682),M=E(9116),A=E(9340),T=E(813),g=E(2900),h=E(8191),C=(()=>{return(I=C||(C={})).InitializeACSClient="InitializeACSClient",I.InitializeACSConversation="InitializeACSConversation",I.GetParticipants="GetParticipants",I.RegisterOnNewMessage="RegisterOnNewMessage",I.RegisterOnThreadUpdate="RegisterOnThreadUpdate",I.OnTypingEvent="OnTypingEvent",I.GetMessages="GetMessages",I.SendMessage="SendMessage",I.SendTyping="SendTyping",I.Disconnect="Disconnect",C;var I})(),b=function(){function I(P,k,O){void 0===O&&(O=null),this.logger=null,this.logger=O,this.tokenCredential=P,this.chatClient=k,this.eventListeners={}}return I.prototype.initialize=function(P){var k,O,V,U,B;return N(this,void 0,void 0,function(){var H,W,$,te,pe;return m(this,function(x){switch(x.label){case 0:null===(k=this.logger)||void 0===k||k.startScenario(C.InitializeACSConversation),this.sessionInfo=P,x.label=1;case 1:return x.trys.push([1,3,,4]),H=this,[4,null===(O=this.chatClient)||void 0===O?void 0:O.getChatThreadClient(P.threadId)];case 2:return H.chatThreadClient=x.sent(),[3,4];case 3:throw W=x.sent(),te={response:"ChatClientGetChatThreadClientFailure",errorObject:""+W},null===(V=this.logger)||void 0===V||V.failScenario(C.InitializeACSConversation,{ExceptionDetails:JSON.stringify(te)}),new Error("GetChatThreadClientFailed");case 4:return x.trys.push([4,6,,7]),[4,this.chatClient.startRealtimeNotifications()];case 5:return x.sent(),[3,7];case 6:throw $=x.sent(),te={response:"StartRealtimeNotificationsFailed",errorObject:""+$},null===(U=this.logger)||void 0===U||U.failScenario(C.InitializeACSConversation,{ExceptionDetails:JSON.stringify(te)}),new Error(te.response);case 7:return pe=this,[4,this.createParticipantsMapping()];case 8:return pe.participantsMapping=x.sent(),null===(B=this.logger)||void 0===B||B.completeScenario(C.InitializeACSConversation),[2]}})})},I.prototype.getMessages=function(){var P,k,O,V,U;return N(this,void 0,void 0,function(){var B,H,W,te,x,r,s;return m(this,function(l){switch(l.label){case 0:null===(P=this.logger)||void 0===P||P.startScenario(C.GetMessages),B=[],l.label=1;case 1:return l.trys.push([1,9,,10]),[4,this.chatThreadClient.listMessages()];case 2:return[4,(H=l.sent()).next()];case 3:W=l.sent(),l.label=4;case 4:return W.done?[3,8]:(te=W.value).type===R.default.Text?[3,6]:[4,H.next()];case 5:return W=l.sent(),[3,4];case 6:return(null===(k=te.content)||void 0===k?void 0:k.message)&&Object.assign(te,{content:null===(O=te.content)||void 0===O?void 0:O.message}),Object.assign(te.sender,{alias:this.participantsMapping[te.sender.communicationUserId].displayName}),x=A.default(te,{liveChatVersion:h.default.V2}),B.push(x),[4,H.next()];case 7:return W=l.sent(),[3,4];case 8:return null===(V=this.logger)||void 0===V||V.completeScenario(C.GetMessages),[3,10];case 9:throw r=l.sent(),s={errorObject:""+r},null===(U=this.logger)||void 0===U||U.failScenario(C.GetMessages,{ExceptionDetails:JSON.stringify(s)}),new Error(C.GetMessages);case 10:return[2,B]}})})},I.prototype.getParticipants=function(){var P,k,O;return N(this,void 0,void 0,function(){var V,U,B,W,te;return m(this,function($){switch($.label){case 0:null===(P=this.logger)||void 0===P||P.startScenario(C.GetParticipants),V=[],$.label=1;case 1:return $.trys.push([1,7,,8]),[4,this.chatThreadClient.listParticipants()];case 2:return[4,(U=$.sent()).next()];case 3:B=$.sent(),$.label=4;case 4:return B.done?[3,6]:(V.push(B.value),[4,U.next()]);case 5:return B=$.sent(),[3,4];case 6:return null===(k=this.logger)||void 0===k||k.completeScenario(C.GetParticipants),[3,8];case 7:throw W=$.sent(),te={errorObject:""+W},null===(O=this.logger)||void 0===O||O.failScenario(C.GetParticipants,{ExceptionDetails:JSON.stringify(te)}),new Error(C.GetParticipants);case 8:return[2,V]}})})},I.prototype.registerOnNewMessage=function(P){var k,O,V,U,B;return N(this,void 0,void 0,function(){var H,W,te,$,pe,x,r=this;return m(this,function(s){switch(s.label){case 0:null===(k=this.logger)||void 0===k||k.startScenario(C.RegisterOnNewMessage),H=!1,W=new Set,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,(te=function(l){return N(r,void 0,void 0,function(){var a,f,_,D,d;return m(this,function(q){switch(q.label){case 0:if(H)return[2];q.label=1;case 1:return q.trys.push([1,3,,4]),[4,this.getMessages()];case 2:for(a=q.sent(),f=0,_=a.reverse();f<_.length;f++)d=(D=_[f]).id,D.sender.displayName!==u.default.Customer&&(W.has(d)||(P(D),W.add(d)));return[3,4];case 3:return q.sent(),[3,4];case 4:return setTimeout(function(){te(l)},l),[2]}})})})(null===(O=this.sessionInfo)||void 0===O?void 0:O.pollingInterval)];case 2:return s.sent(),$=function(l){var a;H=!0;var f=l.id,_=l.sender;_.communicationUserId===(null===(a=r.sessionInfo)||void 0===a?void 0:a.id)||W.has(f)||(l.message&&Object.assign(l,{content:l.message}),Object.assign(l.sender,{alias:r.participantsMapping[_.communicationUserId].displayName}),P(l),W.add(f))},null===(V=this.chatClient)||void 0===V||V.on("chatMessageReceived",$),this.trackListener("chatMessageReceived",$),null===(U=this.logger)||void 0===U||U.completeScenario(C.RegisterOnNewMessage),[3,4];case 3:throw pe=s.sent(),x={errorObject:""+pe},null===(B=this.logger)||void 0===B||B.failScenario(C.RegisterOnNewMessage,{ExceptionDetails:JSON.stringify(x)}),new Error(C.RegisterOnNewMessage);case 4:return[2]}})})},I.prototype.registerOnThreadUpdate=function(P){var k,O,V,U;return N(this,void 0,void 0,function(){var B;return m(this,function(H){null===(k=this.logger)||void 0===k||k.startScenario(C.RegisterOnThreadUpdate);try{B=function(W){P(W)},null===(O=this.chatClient)||void 0===O||O.on("participantsRemoved",B),this.trackListener("participantsRemoved",B),null===(V=this.logger)||void 0===V||V.completeScenario(C.RegisterOnThreadUpdate)}catch(W){null===(U=this.logger)||void 0===U||U.failScenario(C.RegisterOnThreadUpdate)}return[2]})})},I.prototype.onTypingEvent=function(P){var k,O,V,U;return N(this,void 0,void 0,function(){var B;return m(this,function(H){null===(k=this.logger)||void 0===k||k.startScenario(C.OnTypingEvent);try{B=function(W){W.sender.communicationUserId!==W.recipient.communicationUserId&&P(W)},null===(O=this.chatClient)||void 0===O||O.on("typingIndicatorReceived",B),this.trackListener("typingIndicatorReceived",B),null===(V=this.logger)||void 0===V||V.completeScenario(C.OnTypingEvent)}catch(W){null===(U=this.logger)||void 0===U||U.failScenario(C.OnTypingEvent)}return[2]})})},I.prototype.sendMessage=function(P){var k,O,V,U;return N(this,void 0,void 0,function(){var B,H;return m(this,function(te){switch(te.label){case 0:null===(k=this.logger)||void 0===k||k.startScenario(C.SendMessage),P.metadata||(P.metadata={}),B={content:P.content},H={senderDisplayName:u.default.Customer,metadata:p({deliveryMode:g.default.Bridged,tags:T.defaultMessageTags.join(",")},P.metadata)},te.label=1;case 1:return te.trys.push([1,3,,4]),[4,null===(O=this.chatThreadClient)||void 0===O?void 0:O.sendMessage(B,H)];case 2:return te.sent(),null===(V=this.logger)||void 0===V||V.completeScenario(C.SendMessage),[3,4];case 3:throw te.sent(),null===(U=this.logger)||void 0===U||U.failScenario(C.SendMessage),new Error("SendMessageFailed");case 4:return[2]}})})},I.prototype.sendTyping=function(){var P,k,O,V;return N(this,void 0,void 0,function(){return m(this,function(B){switch(B.label){case 0:null===(P=this.logger)||void 0===P||P.startScenario(C.SendTyping),B.label=1;case 1:return B.trys.push([1,3,,4]),[4,null===(k=this.chatThreadClient)||void 0===k?void 0:k.sendTypingNotification()];case 2:return B.sent(),null===(O=this.logger)||void 0===O||O.completeScenario(C.SendTyping),[3,4];case 3:throw B.sent(),null===(V=this.logger)||void 0===V||V.failScenario(C.SendTyping),new Error("SendTypingFailed");case 4:return[2]}})})},I.prototype.sendFileMessage=function(){return N(this,void 0,void 0,function(){return m(this,function(P){return[2,void 0]})})},I.prototype.sendFileData=function(){return N(this,void 0,void 0,function(){return m(this,function(P){return[2,void 0]})})},I.prototype.uploadFile=function(){return N(this,void 0,void 0,function(){return m(this,function(P){return[2,void 0]})})},I.prototype.downloadFile=function(){return N(this,void 0,void 0,function(){return m(this,function(P){return[2,void 0]})})},I.prototype.disconnect=function(){var P,k,O;return N(this,void 0,void 0,function(){var V,U,B,H,$=this;return m(this,function(pe){null===(P=this.logger)||void 0===P||P.startScenario(C.Disconnect);try{for(V=function(x,r){r.forEach(function(s){$.chatClient.off(x,s)})},U=0,B=Object.entries(this.eventListeners);U<B.length;U++)V((H=B[U])[0],H[1]);null===(k=this.logger)||void 0===k||k.completeScenario(C.Disconnect)}catch(x){null===(O=this.logger)||void 0===O||O.failScenario(C.Disconnect)}return[2]})})},I.prototype.createParticipantsMapping=function(){return N(this,void 0,void 0,function(){var P,k,O,V,U,B,H;return m(this,function(W){switch(W.label){case 0:return[4,this.getParticipants()];case 1:for(P=W.sent(),k={},O=0,V=P;O<V.length;O++)B=(U=V[O]).id,Object.keys(k).includes(B.communicationUserId)||Object.assign(k,((H={})[B.communicationUserId]=U,H));return[2,k]}})})},I.prototype.trackListener=function(P,k){P in this.eventListeners||(this.eventListeners[P]=[]),this.eventListeners[P].push(k)},I}();L.ACSConversation=b;var w=function(){function I(P){void 0===P&&(P=null),this.logger=null,this.tokenCredential=null,this.chatClient=null,this.logger=P}return I.prototype.initialize=function(P){var k,O,V,U;return N(this,void 0,void 0,function(){var B;return m(this,function(H){null===(k=this.logger)||void 0===k||k.startScenario(C.InitializeACSClient);try{this.tokenCredential=new M.AzureCommunicationTokenCredential(P.token)}catch(W){throw B={response:"CreateTokenCredentialFailure",errorObject:""+W},null===(O=this.logger)||void 0===O||O.failScenario(C.InitializeACSClient,{ExceptionDetails:JSON.stringify(B)}),new Error("CreateTokenCredentialFailed")}try{this.chatClient=new v.ChatClient(P.environmentUrl,this.tokenCredential)}catch(W){throw B={response:"CreateChatClientFailure",errorObject:""+W},null===(V=this.logger)||void 0===V||V.failScenario(C.InitializeACSClient,{ExceptionDetails:JSON.stringify(B)}),new Error("CreateChatClientFailed")}return null===(U=this.logger)||void 0===U||U.completeScenario(C.InitializeACSClient),[2]})})},I.prototype.joinConversation=function(P){return N(this,void 0,void 0,function(){var k;return m(this,function(O){switch(O.label){case 0:return[4,(k=new b(this.tokenCredential,this.chatClient,this.logger)).initialize(P)];case 1:return O.sent(),[2,k]}})})},I.prototype.getChatClient=function(){return this.chatClient},I}();L.default=w},8953:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=(()=>{return(p=E||(E={})).Customer="Customer",p.Agent="__agent__",p.System="__system__",E;var p})();L.default=E},7474:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default={IC3:"IC3",DirectLine:"DirectLine",ACS:"ACS"}},813:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.defaultMessageTags=L.customerMessageTag=L.channelIdTag=void 0,L.channelIdTag="ChannelId-lcw",L.customerMessageTag="FromCustomer",L.defaultMessageTags=[L.channelIdTag,L.customerMessageTag]},3709:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.ResourceType=L.FileSharingProtocolType=L.PersonType=L.MessageType=L.DeliveryMode=L.MessageContentType=void 0;var E=function(){function v(){}return v.RichText="RichText",v.Text="Text",v}();L.MessageContentType=E;var p=function(){function v(){}return v.Bridged="bridged",v.Unbridged="unbridged",v}();L.DeliveryMode=p;var v,N=function(){function v(){}return v.UserMessage="UserMessage",v.SwiftCard="SwiftCard",v.Typing="Control/Typing",v.ClearTyping="Control/ClearTyping",v.LiveState="Control/LiveState",v}();L.MessageType=N,(v=L.PersonType||(L.PersonType={}))[v.Unknown=0]="Unknown",v[v.User=1]="User",v[v.Bot=2]="Bot",function(v){v[v.AmsBasedFileSharing=0]="AmsBasedFileSharing"}(L.FileSharingProtocolType||(L.FileSharingProtocolType={}));var u=function(){function v(){}return v.NewMessage="NewMessage",v.MessageUpdate="MessageUpdate",v.UserPresence="UserPresence",v.ConversationUpdate="ConversationUpdate",v.ThreadUpdate="ThreadUpdate",v}();L.ResourceType=u},2921:function(Y,L){"use strict";var E=this&&this.__awaiter||function(u,v,M,A){return new(M||(M=Promise))(function(g,h){function C(I){try{w(A.next(I))}catch(P){h(P)}}function b(I){try{w(A.throw(I))}catch(P){h(P)}}function w(I){I.done?g(I.value):function(g){return g instanceof M?g:new M(function(h){h(g)})}(I.value).then(C,b)}w((A=A.apply(u,v||[])).next())})},p=this&&this.__generator||function(u,v){var A,T,g,h,M={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return h={next:C(0),throw:C(1),return:C(2)},"function"==typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h;function C(w){return function(I){return function(w){if(A)throw new TypeError("Generator is already executing.");for(;M;)try{if(A=1,T&&(g=2&w[0]?T.return:w[0]?T.throw||((g=T.return)&&g.call(T),0):T.next)&&!(g=g.call(T,w[1])).done)return g;switch(T=0,g&&(w=[2&w[0],g.value]),w[0]){case 0:case 1:g=w;break;case 4:return M.label++,{value:w[1],done:!1};case 5:M.label++,T=w[1],w=[0];continue;case 7:w=M.ops.pop(),M.trys.pop();continue;default:if(!(g=(g=M.trys).length>0&&g[g.length-1])&&(6===w[0]||2===w[0])){M=0;continue}if(3===w[0]&&(!g||w[1]>g[0]&&w[1]<g[3])){M.label=w[1];break}if(6===w[0]&&M.label<g[1]){M.label=g[1],g=w;break}if(g&&M.label<g[2]){M.label=g[2],M.ops.push(w);break}g[2]&&M.ops.pop(),M.trys.pop();continue}w=v.call(u,M)}catch(I){w=[6,I],T=0}finally{A=g=0}if(5&w[0])throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}([w,I])}}};Object.defineProperty(L,"__esModule",{value:!0});var m=(()=>{return(u=m||(m={})).AMSUpload="AMSUpload",u.AMSDownload="AMSDownload",u.GetFileIds="GetFileIds",u.CreateFileIdProperty="CreateFileIdProperty",u.GetFileMetadata="GetFileMetadata",u.CreateFileMetadataProperty="CreateFileMetadataProperty",m;var u})(),R=function(){function u(v,M){void 0===M&&(M=null),this.logger=M,this.amsClient=v}return u.prototype.uploadFiles=function(v){return E(this,void 0,void 0,function(){var M=this;return p(this,function(A){return[2,Promise.all(v.map(function(T){return E(M,void 0,void 0,function(){return p(this,function(g){return[2,this.uploadFileToAMS(T)]})})}))]})})},u.prototype.downloadFiles=function(v){return E(this,void 0,void 0,function(){var M=this;return p(this,function(A){return[2,Promise.all(v.map(function(T){return E(M,void 0,void 0,function(){return p(this,function(g){return[2,this.downloadFileFromAMS(T)]})})}))]})})},u.prototype.updatePermissions=function(){return E(this,void 0,void 0,function(){return p(this,function(v){return[2,void 0]})})},u.prototype.getFileIds=function(v){var M,A,T;if(v&&(v.amsReferences||v.amsreferences)){null===(M=this.logger)||void 0===M||M.startScenario(m.GetFileIds);try{var g=void 0;return(null==v?void 0:v.amsReferences)&&(g=JSON.parse(null==v?void 0:v.amsReferences)),(null==v?void 0:v.amsreferences)&&(g=JSON.parse(null==v?void 0:v.amsreferences)),null===(A=this.logger)||void 0===A||A.completeScenario(m.GetFileIds),g}catch(C){return void(null===(T=this.logger)||void 0===T||T.failScenario(m.GetFileIds,{ExceptionDetails:JSON.stringify({metadata:""+v,errorObject:""+C})}))}}},u.prototype.createFileIdProperty=function(v){var M,A,T;if(v){null===(M=this.logger)||void 0===M||M.startScenario(m.CreateFileIdProperty);try{var g={amsReferences:JSON.stringify(v),amsreferences:JSON.stringify(v)};return null===(A=this.logger)||void 0===A||A.completeScenario(m.CreateFileIdProperty),g}catch(C){return void(null===(T=this.logger)||void 0===T||T.failScenario(m.CreateFileIdProperty,{ExceptionDetails:JSON.stringify({fileIds:""+v,errorObject:""+C})}))}}},u.prototype.getFileMetadata=function(v){var M,A,T;if(v&&v.amsMetadata){null===(M=this.logger)||void 0===M||M.startScenario(m.GetFileMetadata);try{var g=JSON.parse(null==v?void 0:v.amsMetadata);return null===(A=this.logger)||void 0===A||A.completeScenario(m.GetFileMetadata),g}catch(C){return void(null===(T=this.logger)||void 0===T||T.failScenario(m.GetFileMetadata,{ExceptionDetails:JSON.stringify({metadata:""+v,errorObject:""+C})}))}}},u.prototype.createFileMetadataProperty=function(v){var M,A,T;if(v){null===(M=this.logger)||void 0===M||M.startScenario(m.CreateFileMetadataProperty);try{var g={amsMetadata:JSON.stringify(v)};return null===(A=this.logger)||void 0===A||A.completeScenario(m.CreateFileMetadataProperty),g}catch(C){return void(null===(T=this.logger)||void 0===T||T.failScenario(m.CreateFileMetadataProperty,{ExceptionDetails:JSON.stringify({metadata:""+v,errorObject:""+C})}))}}},u.prototype.createBotAttachment=function(v){return!v||Object.keys(v),null},u.prototype.uploadFileToAMS=function(v){var M,A,T,g,h;return E(this,void 0,void 0,function(){var C,b,I,P,k,O,w;return p(this,function(V){switch(V.label){case 0:if(null===(M=this.logger)||void 0===M||M.startScenario(m.AMSUpload),!v.contentUrl||!v.name)return[3,12];C=void 0,V.label=1;case 1:return V.trys.push([1,3,,4]),[4,this.amsClient.fetchBlob(v.contentUrl)];case 2:return C=V.sent(),[3,4];case 3:return b=V.sent(),w={response:"AMSFetchBlobFailure",errorObject:""+b},null===(A=this.logger)||void 0===A||A.failScenario(m.AMSUpload,{ExceptionDetails:JSON.stringify(w)}),[2,void 0];case 4:I=new File([C],v.name,{type:v.contentType}),P=void 0,V.label=5;case 5:return V.trys.push([5,7,,8]),[4,this.amsClient.createObject(this.amsClient.chatToken.chatId,I)];case 6:return P=V.sent(),[3,8];case 7:return k=V.sent(),w={response:"AMSCreateObjectFailure",errorObject:""+k},null===(T=this.logger)||void 0===T||T.failScenario(m.AMSUpload,{ExceptionDetails:JSON.stringify(w)}),[2,void 0];case 8:return V.trys.push([8,10,,11]),[4,this.amsClient.uploadDocument(P.id,I)];case 9:return V.sent(),[3,11];case 10:return O=V.sent(),w={response:"AMSUploadDocumentFailure",errorObject:""+O},null===(g=this.logger)||void 0===g||g.failScenario(m.AMSUpload,{ExceptionDetails:JSON.stringify(w)}),[2,void 0];case 11:return null===(h=this.logger)||void 0===h||h.completeScenario(m.AMSUpload),[2,{fileId:P.id,metadata:{contentType:v.contentType,fileName:v.name}}];case 12:return[2]}})})},u.prototype.downloadFileFromAMS=function(v){var M,A,T,g;return E(this,void 0,void 0,function(){var h,C,b,I,P,k,w,O;return p(this,function(V){switch(V.label){case 0:if(null===(M=this.logger)||void 0===M||M.startScenario(m.AMSDownload),!(v.fileId&&v.metadata&&v.metadata.fileName))return[3,9];h={id:v.fileId,type:v.metadata.contentType},C=void 0,V.label=1;case 1:return V.trys.push([1,3,,4]),[4,this.amsClient.getViewStatus(h)];case 2:return C=V.sent(),[3,4];case 3:return b=V.sent(),w={response:"AMSGetViewStatusFailure",errorObject:""+b},null===(A=this.logger)||void 0===A||A.failScenario(m.AMSDownload,{ExceptionDetails:JSON.stringify(w)}),[2,void 0];case 4:I=C.view_location,P=void 0,V.label=5;case 5:return V.trys.push([5,7,,8]),[4,this.amsClient.getView(h,I)];case 6:return P=V.sent(),[3,8];case 7:return k=V.sent(),w={response:"AMSGetViewFailure",errorObject:""+k},null===(T=this.logger)||void 0===T||T.failScenario(m.AMSDownload,{ExceptionDetails:JSON.stringify(w)}),[2,void 0];case 8:return O=new File([P],v.metadata.fileName,{type:v.metadata.contentType}),null===(g=this.logger)||void 0===g||g.completeScenario(m.AMSDownload),[2,O];case 9:return[2]}})})},u}();L.default=R},7432:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=E(813),N=E(3709);L.default=function(R){return function(){return function(v){return function(M){return M&&M.channelData&&(M.channelData.tags||(M.channelData.tags=[]),M.channelData.tags.includes(p.channelIdTag)||M.channelData.tags.push(p.channelIdTag),M.channelData.tags.includes(p.customerMessageTag)||M.channelData.tags.push(p.customerMessageTag),M.channelData.metadata||(M.channelData.metadata={}),M.channelData.metadata.deliveryMode||(M.channelData.metadata.deliveryMode=N.DeliveryMode.Bridged),R.widgetId&&(M.channelData.metadata.widgetId=R.widgetId)),v(M)}}}}},5480:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=function(){return function(){return function(N){return function(m){var R=JSON.parse(JSON.stringify(m));if(R&&R.channelData&&R.channelData.tags){var u=R.channelData.tags;if("string"==typeof u)return N(m);if(u instanceof Array)R.channelData.tags=u.toString();else if("object"==typeof R.channelData.tags)try{R.channelData.tags=JSON.stringify(u)}catch(v){console.error(v)}}return N(R)}}}}},3968:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=function(){return function(){return function(N){return function(m){var R=JSON.parse(JSON.stringify(m));if(R&&R.channelData&&R.channelData.tags){var u=R.channelData.tags;if("string"==typeof u)try{R.channelData.tags=JSON.parse(u)}catch(v){R.channelData.tags=u.split(",")}}return N(R)}}}}},9451:(Y,L)=>{"use strict";var p;Object.defineProperty(L,"__esModule",{value:!0}),(p=L._BondDataType||(L._BondDataType={}))[p._BT_STOP=0]="_BT_STOP",p[p._BT_STOP_BASE=1]="_BT_STOP_BASE",p[p._BT_BOOL=2]="_BT_BOOL",p[p._BT_DOUBLE=8]="_BT_DOUBLE",p[p._BT_STRING=9]="_BT_STRING",p[p._BT_STRUCT=10]="_BT_STRUCT",p[p._BT_LIST=11]="_BT_LIST",p[p._BT_MAP=13]="_BT_MAP",p[p._BT_INT32=16]="_BT_INT32",p[p._BT_INT64=17]="_BT_INT64"},1464:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=E(6649),N=E(5644),m=E(514);L._Utf8_GetBytes=function(h){for(var C=[],b=0;b<h.length;++b){var w=h.charCodeAt(b);w<128?C.push(w):w<2048?C.push(192|w>>6,128|63&w):w<55296||w>=57344?C.push(224|w>>12,128|w>>6&63,128|63&w):(w=65536+((1023&w)<<10|1023&h.charCodeAt(++b)),C.push(240|w>>18,128|w>>12&63,128|w>>6&63,128|63&w))}return C},L._Base64_GetString=function(h){for(var C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b=[],w=h.length%3,P=0,k=h.length-w;P<k;P+=3)b.push([C.charAt((U=O=(h[P]<<16)+(h[P+1]<<8)+h[P+2])>>18&63),C.charAt(U>>12&63),C.charAt(U>>6&63),C.charAt(63&U)].join(""));var U;switch(w){case 1:var O;b.push(C.charAt((O=h[h.length-1])>>2)),b.push(C.charAt(O<<4&63)),b.push("==");break;case 2:var V=(h[h.length-2]<<8)+h[h.length-1];b.push(C.charAt(V>>10)),b.push(C.charAt(V>>4&63)),b.push(C.charAt(V<<2&63)),b.push("=")}return b.join("")},L._Varint_GetBytes=function(h){for(var C=[];4294967168&h;)C.push(127&h|128),h>>>=7;return C.push(127&h),C},L._Varint64_GetBytes=function(h){for(var C=h.low,b=h.high,w=[];b||4294967168&C;)w.push(127&C|128),C=(127&b)<<25|C>>>7,b>>>=7;return w.push(127&C),w},L._Double_GetBytes=function(h){if(m.BrowserChecker._IsDataViewSupport()){var C=new DataView(new ArrayBuffer(8));C.setFloat64(0,h,!0);for(var b=[],w=0;w<8;++w)b.push(C.getUint8(w));return b}return N.FloatUtils._ConvertNumberToArray(h,!0)},L._Zigzag_EncodeZigzag32=function(h){return(h=p.Number._ToInt32(h))<<1^h>>31},L._Zigzag_EncodeZigzag64=function(h){var C=h.low,b=h.high,w=b<<1|C>>>31,I=C<<1;2147483648&b&&(w=~w,I=~I);var P=new p.UInt64("0");return P.low=I,P.high=w,P}},5644:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=function(){function p(){}return p._ConvertNumberToArray=function(N,m){if(!N)return m?this._doubleZero:this._floatZero;var u=m?52:23,v=(1<<(m?11:8)-1)-1,M=1-v,A=v,T=N<0?1:0;N=Math.abs(N);for(var g=Math.floor(N),h=N-g,C=2*(v+2)+u,b=new Array(C),w=0;w<C;)b[w++]=0;for(w=v+2;w&&g;)b[--w]=g%2,g=Math.floor(g/2);for(w=v+1;w<C-1&&h>0;)(h*=2)>=1?(b[++w]=1,--h):b[++w]=0;for(var I=0;I<C&&!b[I];)I++;var P=v+1-I,k=I+u;if(b[k+1]){for(w=k;w>I&&(b[w]=1-b[w],!b);--w);w===I&&++P}if(P>A||g)return T?m?this._doubleNegInifinity:this._floatNegInifinity:m?this._doubleInifinity:this._floatInifinity;if(P<M)return m?this._doubleZero:this._floatZero;if(m){var O=0;for(w=0;w<20;++w)O=O<<1|b[++I];for(var V=0;w<52;++w)V=V<<1|b[++I];return[255&V,V>>8&255,V>>16&255,V>>>24,255&(O=T<<31|2147483647&(O|=P+v<<20)),O>>8&255,O>>16&255,O>>>24]}var B=0;for(w=0;w<23;++w)B=B<<1|b[++I];return[255&(B=T<<31|2147483647&(B|=P+v<<23)),B>>8&255,B>>16&255,B>>>24]},p._floatZero=[0,0,0,0],p._doubleZero=[0,0,0,0,0,0,0,0],p._floatInifinity=[0,0,128,127],p._floatNegInifinity=[0,0,128,255],p._doubleInifinity=[0,0,0,0,0,0,240,127],p._doubleNegInifinity=[0,0,0,0,0,0,240,255],p}();L.FloatUtils=E},67:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=E(6649),N=function(){function m(){this._buffer=[]}return m.prototype._WriteByte=function(R){this._buffer.push(p.Number._ToByte(R))},m.prototype._Write=function(R,u,v){for(;v--;)this._WriteByte(R[u++])},m.prototype._GetBuffer=function(){return this._buffer},m}();L.MemoryStream=N},4356:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=E(9451);L._BondDataType=p._BondDataType;var N=E(1464);L._Encoding=N;var m=E(67);L.IO=m;var R=E(6649);L.Int64=R.Int64,L.UInt64=R.UInt64,L.Number=R.Number;var u=function(){function v(M){this._stream=M}return v.prototype._WriteBlob=function(M){this._stream._Write(M,0,M.length)},v.prototype._WriteBool=function(M){this._stream._WriteByte(M?1:0)},v.prototype._WriteContainerBegin=function(M,A){this._WriteUInt8(A),this._WriteUInt32(M)},v.prototype._WriteMapContainerBegin=function(M,A,T){this._WriteUInt8(A),this._WriteUInt8(T),this._WriteUInt32(M)},v.prototype._WriteDouble=function(M){var A=N._Double_GetBytes(M);this._stream._Write(A,0,A.length)},v.prototype._WriteFieldBegin=function(M,A,T){A<=5?this._stream._WriteByte(M|A<<5):A<=255?(this._stream._WriteByte(192|M),this._stream._WriteByte(A)):(this._stream._WriteByte(224|M),this._stream._WriteByte(A),this._stream._WriteByte(A>>8))},v.prototype._WriteInt32=function(M){M=N._Zigzag_EncodeZigzag32(M),this._WriteUInt32(M)},v.prototype._WriteInt64=function(M){this._WriteUInt64(N._Zigzag_EncodeZigzag64(M))},v.prototype._WriteString=function(M){if(""===M)this._WriteUInt32(0);else{var A=N._Utf8_GetBytes(M);this._WriteUInt32(A.length),this._stream._Write(A,0,A.length)}},v.prototype._WriteStructEnd=function(M){this._WriteUInt8(M?p._BondDataType._BT_STOP_BASE:p._BondDataType._BT_STOP)},v.prototype._WriteUInt32=function(M){var A=N._Varint_GetBytes(R.Number._ToUInt32(M));this._stream._Write(A,0,A.length)},v.prototype._WriteUInt64=function(M){var A=N._Varint64_GetBytes(M);this._stream._Write(A,0,A.length)},v.prototype._WriteUInt8=function(M){this._stream._WriteByte(R.Number._ToUInt8(M))},v}();L.CompactBinaryProtocolWriter=u},6649:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=function(){function m(R){this.low=0,this.high=0,this.low=parseInt(R,10),this.low<0&&(this.high=-1)}return m.prototype._Equals=function(R){var u=new m(R);return this.low===u.low&&this.high===u.high},m}();L.Int64=E;var p=function(){function m(R){this.low=0,this.high=0,this.low=parseInt(R,10)}return m.prototype._Equals=function(R){var u=new m(R);return this.low===u.low&&this.high===u.high},m}();L.UInt64=p;var N=function(){function m(){}return m._ToByte=function(R){return this._ToUInt8(R)},m._ToUInt8=function(R){return 255&R},m._ToInt32=function(R){return 2147483647&R|2147483648&R},m._ToUInt32=function(R){return 4294967295&R},m}();L.Number=N},514:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=function(){function p(){}return p._IsDataViewSupport=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},p}();L.BrowserChecker=E},4501:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=function(){function p(N){this.clockSkewRefreshDurationInMins=N,this._reset()}return p.prototype.allowRequestSending=function(){return this._isFirstRequest&&!this._clockSkewSet?(this._isFirstRequest=!1,this._allowRequestSending=!1,!0):this._allowRequestSending},p.prototype.shouldAddClockSkewHeaders=function(){return this._shouldAddClockSkewHeaders},p.prototype.getClockSkewHeaderValue=function(){return this._clockSkewHeaderValue},p.prototype.setClockSkew=function(N){this._clockSkewSet||(N?this._clockSkewHeaderValue=N:this._shouldAddClockSkewHeaders=!1,this._clockSkewSet=!0,this._allowRequestSending=!0)},p.prototype._reset=function(){var N=this;this._isFirstRequest=!0,this._clockSkewSet=!1,this._allowRequestSending=!0,this._shouldAddClockSkewHeaders=!0,this._clockSkewHeaderValue="use-collector-delta",this.clockSkewRefreshDurationInMins>0&&setTimeout(function(){return N._reset()},6e4*this.clockSkewRefreshDurationInMins)},p}();L.default=E},7190:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=function(){function N(){this._killedTokenDictionary={}}return N.prototype.setKillSwitchTenants=function(m,R){if(m&&R)try{var u=m.split(",");if("this-request-only"===R)return u;for(var v=1e3*parseInt(R,10),M=0;M<u.length;++M)this._killedTokenDictionary[u[M]]=Date.now()+v}catch(A){return[]}return[]},N.prototype.isTenantKilled=function(m){return void 0!==this._killedTokenDictionary[m]&&this._killedTokenDictionary[m]>Date.now()||(delete this._killedTokenDictionary[m],!1)},N}();L.default=p},2551:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=function(){function p(){}return p.addNotificationListener=function(N){this.listeners.push(N)},p.removeNotificationListener=function(N){for(var m=this.listeners.indexOf(N);m>-1;)this.listeners.splice(m,1),m=this.listeners.indexOf(N)},p.eventsSent=function(N){for(var m=this,R=function(M){u.listeners[M].eventsSent&&setTimeout(function(){return m.listeners[M].eventsSent(N)},0)},u=this,v=0;v<this.listeners.length;++v)R(v)},p.eventsDropped=function(N,m){for(var R=this,u=function(A){v.listeners[A].eventsDropped&&setTimeout(function(){return R.listeners[A].eventsDropped(N,m)},0)},v=this,M=0;M<this.listeners.length;++M)u(M)},p.eventsRetrying=function(N){for(var m=this,R=function(M){u.listeners[M].eventsRetrying&&setTimeout(function(){return m.listeners[M].eventsRetrying(N)},0)},u=this,v=0;v<this.listeners.length;++v)R(v)},p.eventsRejected=function(N,m){for(var R=this,u=function(A){v.listeners[A].eventsRejected&&setTimeout(function(){return R.listeners[A].eventsRejected(N,m)},0)},v=this,M=0;M<this.listeners.length;++M)u(M)},p.listeners=[],p}();L.default=E},2659:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=E(676),N=function(){function m(R,u){this._outboundQueue=R,this._maxNumberOfEvents=u,this._currentBatch={},this._currentNumEventsInBatch=0}return m.prototype.addEventToBatch=function(R){if(R.priority===p.AWTEventPriority.Immediate_sync){var u={};return u[R.apiKey]=[R],u}return this._currentNumEventsInBatch>=this._maxNumberOfEvents&&this.flushBatch(),void 0===this._currentBatch[R.apiKey]&&(this._currentBatch[R.apiKey]=[]),this._currentBatch[R.apiKey].push(R),this._currentNumEventsInBatch++,null},m.prototype.flushBatch=function(){this._currentNumEventsInBatch>0&&(this._outboundQueue.push(this._currentBatch),this._currentBatch={},this._currentNumEventsInBatch=0)},m.prototype.hasBatch=function(){return this._currentNumEventsInBatch>0},m}();L.default=N},7270:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var R=function(){function u(){}return u.shouldRetryForStatus=function(v){return!(v>=300&&v<500&&408!==v||501===v||505===v)},u.getMillisToBackoffForRetry=function(v){var M,g=Math.floor(1200*Math.random())+2400;return M=Math.pow(4,v)*g,Math.min(M,12e4)},u}();L.default=R},6064:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=E(4356),N=E(676),m=E(2551),R=E(5593),u=2936012,v=function(){function M(){}return M.getPayloadBlob=function(A,T){var h,g=!1,C=new p.IO.MemoryStream,b=new p.CompactBinaryProtocolWriter(C);for(var w in b._WriteFieldBegin(p._BondDataType._BT_MAP,3,null),b._WriteMapContainerBegin(T,p._BondDataType._BT_STRING,p._BondDataType._BT_LIST),A)if(g)h||(h={}),h[w]=A[w],delete A[w];else if(A.hasOwnProperty(w)){b._WriteString(w);var I=A[w];b._WriteContainerBegin(1,p._BondDataType._BT_STRUCT),b._WriteFieldBegin(p._BondDataType._BT_STRING,2,null),b._WriteString("act_default_source"),b._WriteFieldBegin(p._BondDataType._BT_STRING,5,null),b._WriteString(R.newGuid()),b._WriteFieldBegin(p._BondDataType._BT_INT64,6,null),b._WriteInt64(R.numberToBondInt64(Date.now())),b._WriteFieldBegin(p._BondDataType._BT_LIST,8,null);var P=C._GetBuffer().length+1;b._WriteContainerBegin(A[w].length,p._BondDataType._BT_STRUCT);for(var k=C._GetBuffer().length-P,O=0;O<I.length;++O){var V=C._GetBuffer().length;if(this.writeEvent(I[O],b),C._GetBuffer().length-V>u)m.default.eventsRejected([I[O]],N.AWTEventsRejectedReason.SizeLimitExceeded),I.splice(O--,1),C._GetBuffer().splice(V),this._addNewDataPackageSize(I.length,C,k,P);else if(C._GetBuffer().length>u){C._GetBuffer().splice(V),h||(h={}),A[w]=I.splice(0,O),h[w]=I,this._addNewDataPackageSize(A[w].length,C,k,P),g=!0;break}}b._WriteStructEnd(!1)}return b._WriteStructEnd(!1),{payloadBlob:C._GetBuffer(),remainingRequest:h}},M._addNewDataPackageSize=function(A,T,g,h){for(var C=p._Encoding._Varint_GetBytes(p.Number._ToUInt32(A)),b=0;b<g;++b){if(!(b<C.length)){T._GetBuffer().slice(h+b,g-b);break}T._GetBuffer()[h+b]=C[b]}},M.writeEvent=function(A,T){T._WriteFieldBegin(p._BondDataType._BT_STRING,1,null),T._WriteString(A.id),T._WriteFieldBegin(p._BondDataType._BT_INT64,3,null),T._WriteInt64(R.numberToBondInt64(A.timestamp)),T._WriteFieldBegin(p._BondDataType._BT_STRING,5,null),T._WriteString(A.type),T._WriteFieldBegin(p._BondDataType._BT_STRING,6,null),T._WriteString(A.name);var g={},h=0,C={},b=0,w={},I=0,P={},k=0,O={},V=0,U={},B=0,H={},W=0;for(var te in A.properties)if(A.properties.hasOwnProperty(te))if(($=A.properties[te]).cc>0)H[te]=$,W++;else if($.pii>0)U[te]=$,B++;else switch($.type){case N.AWTPropertyType.String:g[te]=$.value,h++;break;case N.AWTPropertyType.Int64:C[te]=$.value,b++;break;case N.AWTPropertyType.Double:w[te]=$.value,I++;break;case N.AWTPropertyType.Boolean:P[te]=$.value,k++;break;case N.AWTPropertyType.Date:O[te]=$.value,V++}if(h)for(var te in T._WriteFieldBegin(p._BondDataType._BT_MAP,13,null),T._WriteMapContainerBegin(h,p._BondDataType._BT_STRING,p._BondDataType._BT_STRING),g)if(g.hasOwnProperty(te)){var pe=g[te];T._WriteString(te),T._WriteString(pe.toString())}if(B)for(var te in T._WriteFieldBegin(p._BondDataType._BT_MAP,30,null),T._WriteMapContainerBegin(B,p._BondDataType._BT_STRING,p._BondDataType._BT_STRUCT),U)if(U.hasOwnProperty(te)){var $=U[te];T._WriteString(te),T._WriteFieldBegin(p._BondDataType._BT_INT32,1,null),T._WriteInt32(1),T._WriteFieldBegin(p._BondDataType._BT_INT32,2,null),T._WriteInt32($.pii),T._WriteFieldBegin(p._BondDataType._BT_STRING,3,null),T._WriteString($.value.toString()),T._WriteStructEnd(!1)}if(k)for(var te in T._WriteFieldBegin(p._BondDataType._BT_MAP,31,null),T._WriteMapContainerBegin(k,p._BondDataType._BT_STRING,p._BondDataType._BT_BOOL),P)P.hasOwnProperty(te)&&(pe=P[te],T._WriteString(te),T._WriteBool(pe));if(V)for(var te in T._WriteFieldBegin(p._BondDataType._BT_MAP,32,null),T._WriteMapContainerBegin(V,p._BondDataType._BT_STRING,p._BondDataType._BT_INT64),O)O.hasOwnProperty(te)&&(pe=O[te],T._WriteString(te),T._WriteInt64(R.numberToBondInt64(pe)));if(b)for(var te in T._WriteFieldBegin(p._BondDataType._BT_MAP,33,null),T._WriteMapContainerBegin(b,p._BondDataType._BT_STRING,p._BondDataType._BT_INT64),C)C.hasOwnProperty(te)&&(pe=C[te],T._WriteString(te),T._WriteInt64(R.numberToBondInt64(pe)));if(I)for(var te in T._WriteFieldBegin(p._BondDataType._BT_MAP,34,null),T._WriteMapContainerBegin(I,p._BondDataType._BT_STRING,p._BondDataType._BT_DOUBLE),w)w.hasOwnProperty(te)&&(pe=w[te],T._WriteString(te),T._WriteDouble(pe));if(W)for(var te in T._WriteFieldBegin(p._BondDataType._BT_MAP,36,null),T._WriteMapContainerBegin(W,p._BondDataType._BT_STRING,p._BondDataType._BT_STRUCT),H)H.hasOwnProperty(te)&&($=H[te],T._WriteString(te),T._WriteFieldBegin(p._BondDataType._BT_INT32,1,null),T._WriteInt32($.cc),T._WriteFieldBegin(p._BondDataType._BT_STRING,2,null),T._WriteString($.value.toString()),T._WriteStructEnd(!1));T._WriteStructEnd(!1)},M.base64Encode=function(A){return p._Encoding._Base64_GetString(A)},M}();L.default=v},5816:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=E(5593),N=E(2551),m=E(676),u=function(){function v(){}return v.initialize=function(M){var A=this;this._sendStats=M,this._isInitalized=!0,N.default.addNotificationListener({eventsSent:function(T){A._addStat("records_sent_count",T.length,T[0].apiKey)},eventsDropped:function(T,g){switch(g){case m.AWTEventsDroppedReason.NonRetryableStatus:A._addStat("d_send_fail",T.length,T[0].apiKey),A._addStat("records_dropped_count",T.length,T[0].apiKey);break;case m.AWTEventsDroppedReason.MaxRetryLimit:A._addStat("d_retry_limit",T.length,T[0].apiKey),A._addStat("records_dropped_count",T.length,T[0].apiKey);break;case m.AWTEventsDroppedReason.QueueFull:A._addStat("d_queue_full",T.length,T[0].apiKey)}},eventsRejected:function(T,g){switch(g){case m.AWTEventsRejectedReason.InvalidEvent:A._addStat("r_inv",T.length,T[0].apiKey);break;case m.AWTEventsRejectedReason.KillSwitch:A._addStat("r_kl",T.length,T[0].apiKey);break;case m.AWTEventsRejectedReason.SizeLimitExceeded:A._addStat("r_size",T.length,T[0].apiKey)}A._addStat("r_count",T.length,T[0].apiKey)},eventsRetrying:null}),setTimeout(function(){return A.flush()},6e4)},v.teardown=function(){this._isInitalized&&(this.flush(),this._isInitalized=!1)},v.eventReceived=function(M){v._addStat("records_received_count",1,M)},v.flush=function(){var M=this;if(this._isInitalized){for(var A in this._stats)this._stats.hasOwnProperty(A)&&this._sendStats(this._stats[A],A);this._stats={},setTimeout(function(){return M.flush()},6e4)}},v._addStat=function(M,A,T){if(this._isInitalized&&T!==p.StatsApiKey){var g=p.getTenantId(T);this._stats[g]||(this._stats[g]={}),this._stats[g][M]=this._stats[g][M]?this._stats[g][M]+A:A}},v._isInitalized=!1,v._stats={},v}();L.default=u},676:(Y,L)=>{"use strict";var v;Object.defineProperty(L,"__esModule",{value:!0}),(v=L.AWTPropertyType||(L.AWTPropertyType={}))[v.Unspecified=0]="Unspecified",v[v.String=1]="String",v[v.Int64=2]="Int64",v[v.Double=3]="Double",v[v.Boolean=4]="Boolean",v[v.Date=5]="Date",function(v){v[v.NotSet=0]="NotSet",v[v.DistinguishedName=1]="DistinguishedName",v[v.GenericData=2]="GenericData",v[v.IPV4Address=3]="IPV4Address",v[v.IPv6Address=4]="IPv6Address",v[v.MailSubject=5]="MailSubject",v[v.PhoneNumber=6]="PhoneNumber",v[v.QueryString=7]="QueryString",v[v.SipAddress=8]="SipAddress",v[v.SmtpAddress=9]="SmtpAddress",v[v.Identity=10]="Identity",v[v.Uri=11]="Uri",v[v.Fqdn=12]="Fqdn",v[v.IPV4AddressLegacy=13]="IPV4AddressLegacy"}(L.AWTPiiKind||(L.AWTPiiKind={})),function(v){v[v.NotSet=0]="NotSet",v[v.GenericContent=1]="GenericContent"}(L.AWTCustomerContentKind||(L.AWTCustomerContentKind={})),function(v){v[v.Low=1]="Low",v[v.Normal=2]="Normal",v[v.High=3]="High",v[v.Immediate_sync=5]="Immediate_sync"}(L.AWTEventPriority||(L.AWTEventPriority={})),function(v){v[v.NonRetryableStatus=1]="NonRetryableStatus",v[v.QueueFull=3]="QueueFull",v[v.MaxRetryLimit=4]="MaxRetryLimit"}(L.AWTEventsDroppedReason||(L.AWTEventsDroppedReason={})),function(v){v[v.InvalidEvent=1]="InvalidEvent",v[v.SizeLimitExceeded=2]="SizeLimitExceeded",v[v.KillSwitch=3]="KillSwitch"}(L.AWTEventsRejectedReason||(L.AWTEventsRejectedReason={}))},5593:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=E(6649),N=E(676),m=/[xy]/g,v=null;L.EventNameAndTypeRegex=/^[a-zA-Z]([a-zA-Z0-9]|_){2,98}[a-zA-Z0-9]$/,L.EventNameDotRegex=/\./g,L.PropertyNameRegex=/^[a-zA-Z](([a-zA-Z0-9|_|\.]){0,98}[a-zA-Z0-9])?$/,L.StatsApiKey="a387cfcf60114a43a7699f9fbb49289e-9bceb9fe-1c06-460f-96c5-6a0b247358bc-7238";var M=v,A=v,T=v;function C(i){return"string"==typeof i}function b(i){return"number"==typeof i}function w(i){return"boolean"==typeof i}function I(i){return i instanceof Date}function P(i){return 1e4*(i+621355968e5)}function $(){return!("undefined"==typeof navigator||!navigator.product)&&"ReactNative"===navigator.product}function pe(){return"object"==typeof self&&"ServiceWorkerGlobalScope"===self.constructor.name}function x(i){return i<10?"0"+i:i.toString()}function d(i){return void 0===i||i===v||""===i}L.numberToBondInt64=function(i){var y=new p.Int64("0");return y.low=4294967295&i,y.high=Math.floor(i/4294967296),y},L.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(m,function(i){var y=16*Math.random()|0;return("x"===i?y:3&y|8).toString(16)})},L.isString=C,L.isNumber=b,L.isBoolean=w,L.isDate=I,L.msToTicks=P,L.getTenantId=function(i){var y=i.indexOf("-");return y>-1?i.substring(0,y):""},L.isBeaconsSupported=function(){return M===v&&(M="undefined"!=typeof navigator&&Boolean(navigator.sendBeacon)),M},L.isUint8ArrayAvailable=function(){return A===v&&(A="undefined"!=typeof Uint8Array&&!function(){if("undefined"!=typeof navigator&&navigator.userAgent){var i=navigator.userAgent.toLowerCase();if((i.indexOf("safari")>=0||i.indexOf("firefox")>=0)&&i.indexOf("chrome")<0)return!0}return!1}()&&!$()),A},L.isPriority=function(i){return!(!b(i)||!(i>=1&&i<=3||5===i))},L.sanitizeProperty=function(i,y){return!L.PropertyNameRegex.test(i)||d(y)||(d(y.value)&&(y={value:y,type:N.AWTPropertyType.Unspecified}),y.type=function(i,y){switch(y=function(i){return!!(b(i)&&i>=0&&i<=4)}(y)?y:N.AWTPropertyType.Unspecified){case N.AWTPropertyType.Unspecified:return function(i){switch(typeof i){case"string":return N.AWTPropertyType.String;case"boolean":return N.AWTPropertyType.Boolean;case"number":return N.AWTPropertyType.Double;case"object":return I(i)?N.AWTPropertyType.Date:v}return v}(i);case N.AWTPropertyType.String:return C(i)?y:v;case N.AWTPropertyType.Boolean:return w(i)?y:v;case N.AWTPropertyType.Date:return I(i)&&NaN!==i.getTime()?y:v;case N.AWTPropertyType.Int64:return b(i)&&i%1==0?y:v;case N.AWTPropertyType.Double:return b(i)?y:v}return v}(y.value,y.type),!y.type)||(I(y.value)&&(y.value=P(y.value.getTime())),y.pii>0&&y.cc>0)?v:y.pii?function(i){return!!(b(i)&&i>=0&&i<=13)}(y.pii)?y:v:y.cc?function(i){return!!(b(i)&&i>=0&&i<=1)}(y.cc)?y:v:y},L.getISOString=function(i){return i.getUTCFullYear()+"-"+x(i.getUTCMonth()+1)+"-"+x(i.getUTCDate())+"T"+x(i.getUTCHours())+":"+x(i.getUTCMinutes())+":"+x(i.getUTCSeconds())+"."+function(i){return i<10?"00"+i:i<100?"0"+i:i.toString()}(i.getUTCMilliseconds())+"Z"},L.useXDomainRequest=function(){if(T===v){var i=new XMLHttpRequest;T=void 0===i.withCredentials&&"undefined"!=typeof XDomainRequest}return T},L.useFetchRequest=function(){return $()||pe()},L.isReactNative=$,L.isServiceWorkerGlobalScope=pe},4094:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=E(5593),N="MicrosoftApplicationsTelemetryDeviceId",m="MicrosoftApplicationsTelemetryFirstLaunchTime",v_WIN=/(windows|win32)/i,v_WINRT=/ arm;/i,v_WINPHONE=/windows\sphone\s\d+\.\d+/i,v_OSX=/(macintosh|mac os x)/i,v_IOS=/(iPad|iPhone|iPod)(?=.*like Mac OS X)/i,v_LINUX=/(linux|joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)/i,v_ANDROID=/android/i,v_CROS=/CrOS/i,M={5.1:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1","10.0":"10"},A="([\\d,.]+)",g="Unknown",h="undefined",C=function(){function b(){}return b.addPropertyStorageOverride=function(w){return!!w&&(this._propertyStorage=w,!0)},b.autoCollect=function(w,I,P){if(this._semanticContext=w,this._disableCookies=I,this._autoCollect(),!P&&typeof navigator!==h&&(P=navigator.userAgent||""),this._autoCollectFromUserAgent(P),this._disableCookies&&!this._propertyStorage)return this._deleteCookie(N),void this._deleteCookie(m);(this._propertyStorage||this._areCookiesAvailable&&!this._disableCookies)&&this._autoCollectDeviceId()},b.checkAndSaveDeviceId=function(w){if(w){var I=this._getData(N),P=this._getData(m);I!==w&&(P=p.getISOString(new Date)),this._saveData(N,w),this._saveData(m,P),this._setFirstLaunchTime(P)}},b._autoCollectDeviceId=function(){var w=this._getData(N);w||(w=p.newGuid()),this._semanticContext.setDeviceId(w)},b._autoCollect=function(){typeof document!==h&&document.documentElement&&this._semanticContext.setAppLanguage(document.documentElement.lang),typeof navigator!==h&&this._semanticContext.setUserLanguage(navigator.userLanguage||navigator.language);var w=(new Date).getTimezoneOffset(),I=w%60,P=(w-I)/60,k="+";P>0&&(k="-"),P=Math.abs(P),I=Math.abs(I),this._semanticContext.setUserTimeZone(k+(P<10?"0"+P:P.toString())+":"+(I<10?"0"+I:I.toString()))},b._autoCollectFromUserAgent=function(w){if(w){var I=this._getBrowserName(w);this._semanticContext.setDeviceBrowserName(I),this._semanticContext.setDeviceBrowserVersion(this._getBrowserVersion(w,I));var P=this._getOsName(w);this._semanticContext.setDeviceOsName(P),this._semanticContext.setDeviceOsVersion(this._getOsVersion(w,P))}},b._getBrowserName=function(w){return this._userAgentContainsString("OPR/",w)?"Opera":this._userAgentContainsString("PhantomJS",w)?"PhantomJS":this._userAgentContainsString("Edge",w)||this._userAgentContainsString("Edg",w)?"Edge":this._userAgentContainsString("Electron",w)?"Electron":this._userAgentContainsString("Chrome",w)?"Chrome":this._userAgentContainsString("Trident",w)?"MSIE":this._userAgentContainsString("Firefox",w)?"Firefox":this._userAgentContainsString("Safari",w)?"Safari":this._userAgentContainsString("SkypeShell",w)?"SkypeShell":g},b._setFirstLaunchTime=function(w){if(!isNaN(w)){var I=new Date;I.setTime(parseInt(w,10)),w=p.getISOString(I)}this.firstLaunchTime=w},b._userAgentContainsString=function(w,I){return I.indexOf(w)>-1},b._getBrowserVersion=function(w,I){if("MSIE"===I)return this._getIeVersion(w);if("Edge"===I){var P=this._getOtherVersion(I,w);return P===g?this._getOtherVersion("Edg",w):P}return this._getOtherVersion(I,w)},b._getIeVersion=function(w){var I=w.match(new RegExp("MSIE "+A));if(I)return I[1];var P=w.match(new RegExp("rv:"+A));return P?P[1]:void 0},b._getOtherVersion=function(w,I){"Safari"===w&&(w="Version");var P=I.match(new RegExp(w+"/"+A));return P?P[1]:g},b._getOsName=function(w){return w.match(v_WINPHONE)?"Windows Phone":w.match(v_WINRT)?"Windows RT":w.match(v_IOS)?"iOS":w.match(v_ANDROID)?"Android":w.match(v_LINUX)?"Linux":w.match(v_OSX)?"Mac OS X":w.match(v_WIN)?"Windows":w.match(v_CROS)?"Chrome OS":g},b._getOsVersion=function(w,I){return"Windows"===I?this._getGenericOsVersion(w,"Windows NT"):"Android"===I?this._getGenericOsVersion(w,I):"Mac OS X"===I?this._getMacOsxVersion(w):g},b._getGenericOsVersion=function(w,I){var P=w.match(new RegExp(I+" "+A));return P?M[P[1]]?M[P[1]]:P[1]:g},b._getMacOsxVersion=function(w){var I=w.match(new RegExp("Mac OS X ([\\d,_,.]+)"));if(I){var P=I[1].replace(/_/g,".");if(P){var k=this._getDelimiter(P);return k?P.split(k)[0]:P}}return g},b._getDelimiter=function(w){return w.indexOf(".")>-1?".":w.indexOf("_")>-1?"_":null},b._saveData=function(w,I){if(this._propertyStorage)this._propertyStorage.setProperty(w,I);else if(this._areCookiesAvailable){var P=new Date;P.setTime(P.getTime()+31536e6);var k="expires="+P.toUTCString();document.cookie=w+"="+I+"; "+k}},b._getData=function(w){if(this._propertyStorage)return this._propertyStorage.getProperty(w)||"";if(this._areCookiesAvailable){w+="=";for(var I=document.cookie.split(";"),P=0;P<I.length;P++){for(var k=I[P],O=0;" "===k.charAt(O);)O++;if(0===(k=k.substring(O)).indexOf(w))return k.substring(w.length,k.length)}}return""},b._deleteCookie=function(w){this._areCookiesAvailable&&(document.cookie=w+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;")},b._disableCookies=!1,b._areCookiesAvailable=typeof document!==h&&typeof document.cookie!==h,b}();L.default=C},58:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=E(5593),N=E(676),m=function(){function R(u){this._event={name:"",properties:{}},u&&this.setName(u)}return R.prototype.setName=function(u){this._event.name=u},R.prototype.getName=function(){return this._event.name},R.prototype.setType=function(u){this._event.type=u},R.prototype.getType=function(){return this._event.type},R.prototype.setTimestamp=function(u){this._event.timestamp=u},R.prototype.getTimestamp=function(){return this._event.timestamp},R.prototype.setEventPriority=function(u){this._event.priority=u},R.prototype.getEventPriority=function(){return this._event.priority},R.prototype.setProperty=function(u,v,M){void 0===M&&(M=N.AWTPropertyType.Unspecified);var A={value:v,type:M,pii:N.AWTPiiKind.NotSet,cc:N.AWTCustomerContentKind.NotSet};null!==(A=p.sanitizeProperty(u,A))?this._event.properties[u]=A:delete this._event.properties[u]},R.prototype.setPropertyWithPii=function(u,v,M,A){void 0===A&&(A=N.AWTPropertyType.Unspecified);var T={value:v,type:A,pii:M,cc:N.AWTCustomerContentKind.NotSet};null!==(T=p.sanitizeProperty(u,T))?this._event.properties[u]=T:delete this._event.properties[u]},R.prototype.setPropertyWithCustomerContent=function(u,v,M,A){void 0===A&&(A=N.AWTPropertyType.Unspecified);var T={value:v,type:A,pii:N.AWTPiiKind.NotSet,cc:M};null!==(T=p.sanitizeProperty(u,T))?this._event.properties[u]=T:delete this._event.properties[u]},R.prototype.getPropertyMap=function(){return this._event.properties},R.prototype.getEvent=function(){return this._event},R}();L.default=m},9449:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=E(676),N=E(6064),m=E(7270),R=E(7190),u=E(4501),v=E(8779),M=E(5593),A=E(2551),T=E(4023),C="POST",b=function(){function w(I,P,k,O,V){var U=this;this._requestQueue=I,this._queueManager=k,this._httpInterface=O,this._urlString="?qsp=true&content-type=application%2Fbond-compact-binary&client-id=NO_AUTH&sdk-version="+v.FullVersionString,this._killSwitch=new R.default,this._paused=!1,this._useBeacons=!1,this._activeConnections=0,this._clockSkewManager=new u.default(V),M.isUint8ArrayAvailable()||(this._urlString+="&content-encoding=base64"),this._urlString=P+this._urlString,this._httpInterface||(this._useBeacons=!M.isReactNative(),this._httpInterface={sendPOST:function(B,H,W,te,$,pe){try{if(M.useFetchRequest())fetch(B,{body:H,method:C}).then(function(s){var l={};s.headers&&s.headers.forEach(function(a,f){l[f]=a}),$(s.status,l)}).catch(function(s){te(0,{})});else if(M.useXDomainRequest()){var x=new XDomainRequest;x.open(C,B),x.onload=function(){$(200,null)},x.onerror=function(){te(400,null)},x.ontimeout=function(){W(500,null)},x.send(H)}else{var r=new XMLHttpRequest;r.open(C,B,!pe),r.onload=function(){$(r.status,U._convertAllHeadersToMap(r.getAllResponseHeaders()))},r.onerror=function(){te(r.status,U._convertAllHeadersToMap(r.getAllResponseHeaders()))},r.ontimeout=function(){W(r.status,U._convertAllHeadersToMap(r.getAllResponseHeaders()))},r.send(H)}}catch(s){te(400,null)}}})}return w.prototype.hasIdleConnection=function(){return this._activeConnections<2},w.prototype.sendQueuedRequests=function(){for(;this.hasIdleConnection()&&!this._paused&&this._requestQueue.length>0&&this._clockSkewManager.allowRequestSending();)this._activeConnections++,this._sendRequest(this._requestQueue.shift(),0,!1);this.hasIdleConnection()&&T.default.scheduleTimer()},w.prototype.isCompletelyIdle=function(){return 0===this._activeConnections},w.prototype.teardown=function(){for(;this._requestQueue.length>0;)this._sendRequest(this._requestQueue.shift(),0,!0)},w.prototype.pause=function(){this._paused=!0},w.prototype.resume=function(){this._paused=!1,this.sendQueuedRequests()},w.prototype.removeQueuedRequests=function(){this._requestQueue.length=0},w.prototype.sendSynchronousRequest=function(I,P){this._paused&&(I[P][0].priority=p.AWTEventPriority.High),this._activeConnections++,this._sendRequest(I,0,!1,!0)},w.prototype._sendRequest=function(I,P,k,O){var V=this;void 0===O&&(O=!1);try{if(this._paused)return this._activeConnections--,void this._queueManager.addBackRequest(I);var U=0,B="";for(var H in I)I.hasOwnProperty(H)&&(this._killSwitch.isTenantKilled(H)?(A.default.eventsRejected(I[H],p.AWTEventsRejectedReason.KillSwitch),delete I[H]):(B.length>0&&(B+=","),B+=H,U++));if(U>0){var W=N.default.getPayloadBlob(I,U);W.remainingRequest&&this._requestQueue.push(W.remainingRequest);var te=this._urlString+"&x-apikey="+B+"&client-time-epoch-millis="+Date.now().toString();this._clockSkewManager.shouldAddClockSkewHeaders()&&(te=te+"&time-delta-to-apply-millis="+this._clockSkewManager.getClockSkewHeaderValue());var $;for(var H in $=M.isUint8ArrayAvailable()?new Uint8Array(W.payloadBlob):N.default.base64Encode(W.payloadBlob),I)if(I.hasOwnProperty(H))for(var pe=0;pe<I[H].length;++pe)I[H][pe].sendAttempt>0?I[H][pe].sendAttempt++:I[H][pe].sendAttempt=1;if(this._useBeacons&&k&&M.isBeaconsSupported()&&navigator.sendBeacon(te,$))return;this._httpInterface.sendPOST(te,$,function(x,r){V._retryRequestIfNeeded(x,r,I,U,B,P,k,O)},function(x,r){V._retryRequestIfNeeded(x,r,I,U,B,P,k,O)},function(x,r){V._retryRequestIfNeeded(x,r,I,U,B,P,k,O)},k||O)}else k||this._handleRequestFinished(!1,{},k,O)}catch(x){this._handleRequestFinished(!1,{},k,O)}},w.prototype._retryRequestIfNeeded=function(I,P,k,O,V,U,B,H){var W=this,te=!0;if(void 0!==I){if(P){var $=this._killSwitch.setKillSwitchTenants(P["kill-tokens"],P["kill-duration-seconds"]);this._clockSkewManager.setClockSkew(P["time-delta-millis"]);for(var pe=0;pe<$.length;++pe)A.default.eventsRejected(k[$[pe]],p.AWTEventsRejectedReason.KillSwitch),delete k[$[pe]],O--}else this._clockSkewManager.setClockSkew(null);if(200===I)return void this._handleRequestFinished(!0,k,B,H);(!m.default.shouldRetryForStatus(I)||O<=0)&&(te=!1)}if(te)if(H)this._activeConnections--,k[V][0].priority=p.AWTEventPriority.High,this._queueManager.addBackRequest(k);else if(U<1){for(var x in k)k.hasOwnProperty(x)&&A.default.eventsRetrying(k[x]);setTimeout(function(){return W._sendRequest(k,U+1,!1)},m.default.getMillisToBackoffForRetry(U))}else this._activeConnections--,T.default.backOffTransmission(),this._queueManager.addBackRequest(k);else this._handleRequestFinished(!1,k,B,H)},w.prototype._handleRequestFinished=function(I,P,k,O){for(var V in I&&T.default.clearBackOff(),P)P.hasOwnProperty(V)&&(I?A.default.eventsSent(P[V]):A.default.eventsDropped(P[V],p.AWTEventsDroppedReason.NonRetryableStatus));this._activeConnections--,!O&&!k&&this.sendQueuedRequests()},w.prototype._convertAllHeadersToMap=function(I){var P={};if(I)for(var k=I.split("\n"),O=0;O<k.length;++O){var V=k[O].split(": ");P[V[0]]=V[1]}return P},w}();L.default=b},7613:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=E(676),N=E(5640),m=E(4189),R=E(6208),u=E(4023),v=E(2551),M=E(4094),A=function(){function T(){}return T.initialize=function(g,h){if(void 0===h&&(h={}),!this._isInitialized)return this._isInitialized=!0,m.default.defaultTenantToken=g,this._overrideValuesFromConfig(h),this._config.disableCookiesUsage&&!this._config.propertyStorageOverride&&(m.default.sessionEnabled=!1),M.default.addPropertyStorageOverride(this._config.propertyStorageOverride),M.default.autoCollect(m.default.semanticContext,this._config.disableCookiesUsage,this._config.userAgent),u.default.initialize(this._config),m.default.loggingEnabled=!0,this._config.enableAutoUserSession&&(this.getLogger().logSession(N.AWTSessionState.Started),window.addEventListener("beforeunload",this.flushAndTeardown)),this.getLogger()},T.getSemanticContext=function(){return m.default.semanticContext},T.flush=function(g){this._isInitialized&&!this._isDestroyed&&u.default.flush(g)},T.flushAndTeardown=function(){this._isInitialized&&!this._isDestroyed&&(this._config.enableAutoUserSession&&this.getLogger().logSession(N.AWTSessionState.Ended),u.default.flushAndTeardown(),m.default.loggingEnabled=!1,this._isDestroyed=!0)},T.pauseTransmission=function(){this._isInitialized&&!this._isDestroyed&&u.default.pauseTransmission()},T.resumeTransmision=function(){this._isInitialized&&!this._isDestroyed&&u.default.resumeTransmision()},T.setTransmitProfile=function(g){this._isInitialized&&!this._isDestroyed&&u.default.setTransmitProfile(g)},T.loadTransmitProfiles=function(g){this._isInitialized&&!this._isDestroyed&&u.default.loadTransmitProfiles(g)},T.setContext=function(g,h,C){void 0===C&&(C=p.AWTPropertyType.Unspecified),m.default.logManagerContext.setProperty(g,h,C)},T.setContextWithPii=function(g,h,C,b){void 0===b&&(b=p.AWTPropertyType.Unspecified),m.default.logManagerContext.setPropertyWithPii(g,h,C,b)},T.setContextWithCustomerContent=function(g,h,C,b){void 0===b&&(b=p.AWTPropertyType.Unspecified),m.default.logManagerContext.setPropertyWithCustomerContent(g,h,C,b)},T.getLogger=function(g){var h=g;return(!h||h===m.default.defaultTenantToken)&&(h=""),this._loggers[h]||(this._loggers[h]=new R.default(h)),this._loggers[h]},T.addNotificationListener=function(g){v.default.addNotificationListener(g)},T.removeNotificationListener=function(g){v.default.removeNotificationListener(g)},T._overrideValuesFromConfig=function(g){g.collectorUri&&(this._config.collectorUri=g.collectorUri),g.cacheMemorySizeLimitInNumberOfEvents>0&&(this._config.cacheMemorySizeLimitInNumberOfEvents=g.cacheMemorySizeLimitInNumberOfEvents),g.httpXHROverride&&g.httpXHROverride.sendPOST&&(this._config.httpXHROverride=g.httpXHROverride),g.propertyStorageOverride&&g.propertyStorageOverride.getProperty&&g.propertyStorageOverride.setProperty&&(this._config.propertyStorageOverride=g.propertyStorageOverride),g.userAgent&&(this._config.userAgent=g.userAgent),g.disableCookiesUsage&&(this._config.disableCookiesUsage=g.disableCookiesUsage),g.canSendStatEvent&&(this._config.canSendStatEvent=g.canSendStatEvent),g.enableAutoUserSession&&"undefined"!=typeof window&&window.addEventListener&&(this._config.enableAutoUserSession=g.enableAutoUserSession),g.clockSkewRefreshDurationInMins>0&&(this._config.clockSkewRefreshDurationInMins=g.clockSkewRefreshDurationInMins)},T._loggers={},T._isInitialized=!1,T._isDestroyed=!1,T._config={collectorUri:"https://browser.pipe.aria.microsoft.com/Collector/3.0/",cacheMemorySizeLimitInNumberOfEvents:1e4,disableCookiesUsage:!1,canSendStatEvent:function(g){return!0},clockSkewRefreshDurationInMins:0},T}();L.default=A},4189:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=E(58),N=E(1009),m=function(){function R(){}return R.logManagerContext=new p.default,R.sessionEnabled=!0,R.loggingEnabled=!1,R.defaultTenantToken="",R.semanticContext=new N.default(!0,R.logManagerContext),R}();L.default=m},6208:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=E(676),N=E(5640),m=E(58),R=E(5593),u=E(5816),v=E(2551),M=E(4023),A=E(4189),T=E(8779),g=E(1009),h=E(4094),C=function(){function b(w){this._apiKey=w,this._contextProperties=new m.default,this._semanticContext=new g.default(!1,this._contextProperties),this._sessionStartTime=0,this._createInitId()}return b.prototype.setContext=function(w,I,P){void 0===P&&(P=p.AWTPropertyType.Unspecified),this._contextProperties.setProperty(w,I,P)},b.prototype.setContextWithPii=function(w,I,P,k){void 0===k&&(k=p.AWTPropertyType.Unspecified),this._contextProperties.setPropertyWithPii(w,I,P,k)},b.prototype.setContextWithCustomerContent=function(w,I,P,k){void 0===k&&(k=p.AWTPropertyType.Unspecified),this._contextProperties.setPropertyWithCustomerContent(w,I,P,k)},b.prototype.getSemanticContext=function(){return this._semanticContext},b.prototype.logEvent=function(w){if(A.default.loggingEnabled){this._apiKey||(this._apiKey=A.default.defaultTenantToken,this._createInitId());var I=!0;R.isString(w)?w={name:w}:w instanceof m.default&&(w=w.getEvent(),I=!1),u.default.eventReceived(this._apiKey),b._logEvent(b._getInternalEvent(w,this._apiKey,I),this._contextProperties)}},b.prototype.logSession=function(w,I){if(A.default.sessionEnabled){var P={name:"session",type:"session",properties:{}};if(b._addPropertiesToEvent(P,I),P.priority=p.AWTEventPriority.High,w===N.AWTSessionState.Started){if(this._sessionStartTime>0)return;this._sessionStartTime=(new Date).getTime(),this._sessionId=R.newGuid(),this.setContext("Session.Id",this._sessionId),P.properties["Session.State"]="Started"}else{if(w!==N.AWTSessionState.Ended)return;if(0===this._sessionStartTime)return;var k=Math.floor(((new Date).getTime()-this._sessionStartTime)/1e3);P.properties["Session.Id"]=this._sessionId,P.properties["Session.State"]="Ended",P.properties["Session.Duration"]=k.toString(),P.properties["Session.DurationBucket"]=b._getSessionDurationFromTime(k),this._sessionStartTime=0,this.setContext("Session.Id",null),this._sessionId=void 0}P.properties["Session.FirstLaunchTime"]=h.default.firstLaunchTime,this.logEvent(P)}},b.prototype.getSessionId=function(){return this._sessionId},b.prototype.logFailure=function(w,I,P,k,O){if(w&&I){var V={name:"failure",type:"failure",properties:{}};b._addPropertiesToEvent(V,O),V.properties["Failure.Signature"]=w,V.properties["Failure.Detail"]=I,P&&(V.properties["Failure.Category"]=P),k&&(V.properties["Failure.Id"]=k),V.priority=p.AWTEventPriority.High,this.logEvent(V)}},b.prototype.logPageView=function(w,I,P,k,O,V){if(w&&I){var U={name:"pageview",type:"pageview",properties:{}};b._addPropertiesToEvent(U,V),U.properties["PageView.Id"]=w,U.properties["PageView.Name"]=I,P&&(U.properties["PageView.Category"]=P),k&&(U.properties["PageView.Uri"]=k),O&&(U.properties["PageView.ReferrerUri"]=O),this.logEvent(U)}},b.prototype._createInitId=function(){!b._initIdMap[this._apiKey]&&this._apiKey&&(b._initIdMap[this._apiKey]=R.newGuid())},b._addPropertiesToEvent=function(w,I){if(I)for(var P in I instanceof m.default&&(I=I.getEvent()),I.name&&(w.name=I.name),I.priority&&(w.priority=I.priority),I.properties)I.properties.hasOwnProperty(P)&&(w.properties[P]=I.properties[P])},b._getSessionDurationFromTime=function(w){return w<0?"Undefined":w<=3?"UpTo3Sec":w<=10?"UpTo10Sec":w<=30?"UpTo30Sec":w<=60?"UpTo60Sec":w<=180?"UpTo3Min":w<=600?"UpTo10Min":w<=1800?"UpTo30Min":"Above30Min"},b._logEvent=function(w,I){w.name&&R.isString(w.name)?(w.name=w.name.toLowerCase(),w.name=w.name.replace(R.EventNameDotRegex,"_"),w.type=w.type&&R.isString(w.type)?w.type.toLowerCase():"custom",R.EventNameAndTypeRegex.test(w.name)&&R.EventNameAndTypeRegex.test(w.type)?((!R.isNumber(w.timestamp)||w.timestamp<0)&&(w.timestamp=(new Date).getTime()),w.properties||(w.properties={}),this._addContextIfAbsent(w,I.getPropertyMap()),this._addContextIfAbsent(w,A.default.logManagerContext.getPropertyMap()),this._setDefaultProperty(w,"EventInfo.InitId",this._getInitId(w.apiKey)),this._setDefaultProperty(w,"EventInfo.Sequence",this._getSequenceId(w.apiKey)),this._setDefaultProperty(w,"EventInfo.SdkVersion",T.FullVersionString),this._setDefaultProperty(w,"EventInfo.Name",w.name),this._setDefaultProperty(w,"EventInfo.Time",new Date(w.timestamp).toISOString()),R.isPriority(w.priority)||(w.priority=p.AWTEventPriority.Normal),this._sendEvent(w)):v.default.eventsRejected([w],p.AWTEventsRejectedReason.InvalidEvent)):v.default.eventsRejected([w],p.AWTEventsRejectedReason.InvalidEvent)},b._addContextIfAbsent=function(w,I){if(I)for(var P in I)I.hasOwnProperty(P)&&(w.properties[P]||(w.properties[P]=I[P]))},b._setDefaultProperty=function(w,I,P){w.properties[I]={value:P,pii:p.AWTPiiKind.NotSet,type:p.AWTPropertyType.String}},b._sendEvent=function(w){M.default.sendEvent(w)},b._getInternalEvent=function(w,I,P){if(w.properties=w.properties||{},P)for(var k in w.properties)w.properties.hasOwnProperty(k)&&(w.properties[k]=R.sanitizeProperty(k,w.properties[k]),null===w.properties[k]&&delete w.properties[k]);var O=w;return O.id=R.newGuid(),O.apiKey=I,O},b._getInitId=function(w){return b._initIdMap[w]},b._getSequenceId=function(w){return void 0===b._sequenceIdMap[w]&&(b._sequenceIdMap[w]=0),(++b._sequenceIdMap[w]).toString()},b._sequenceIdMap={},b._initIdMap={},b}();L.default=C},4220:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=E(676),N=E(9449),m=E(4023),R=E(2659),u=E(2551),v=E(5593),g=function(){function h(C,b,w,I){this._queueSizeLimit=b,this._isCurrentlyUploadingNow=!1,this._uploadNowQueue=[],this._shouldDropEventsOnPause=!1,this._paused=!1,this._queueSize=0,this._outboundQueue=[],this._inboundQueues={},this._inboundQueues[p.AWTEventPriority.High]=[],this._inboundQueues[p.AWTEventPriority.Normal]=[],this._inboundQueues[p.AWTEventPriority.Low]=[],this._addEmptyQueues(),this._batcher=new R.default(this._outboundQueue,500),this._httpManager=new N.default(this._outboundQueue,C,this,w,I)}return h.prototype.addEvent=function(C){v.isPriority(C.priority)||(C.priority=p.AWTEventPriority.Normal),C.priority===p.AWTEventPriority.Immediate_sync?this._httpManager.sendSynchronousRequest(this._batcher.addEventToBatch(C),C.apiKey):this._queueSize<this._queueSizeLimit||this._dropEventWithPriorityOrLess(C.priority)?this._addEventToProperQueue(C):u.default.eventsDropped([C],p.AWTEventsDroppedReason.QueueFull)},h.prototype.sendEventsForPriorityAndAbove=function(C){this._batchEvents(C),this._httpManager.sendQueuedRequests()},h.prototype.hasEvents=function(){return(this._inboundQueues[p.AWTEventPriority.High][0].length>0||this._inboundQueues[p.AWTEventPriority.Normal][0].length>0||this._inboundQueues[p.AWTEventPriority.Low][0].length>0||this._batcher.hasBatch())&&this._httpManager.hasIdleConnection()},h.prototype.addBackRequest=function(C){if(!this._paused||!this._shouldDropEventsOnPause){for(var b in C)if(C.hasOwnProperty(b))for(var w=0;w<C[b].length;++w)C[b][w].sendAttempt<6?this.addEvent(C[b][w]):u.default.eventsDropped([C[b][w]],p.AWTEventsDroppedReason.MaxRetryLimit);m.default.scheduleTimer()}},h.prototype.teardown=function(){this._paused||(this._batchEvents(p.AWTEventPriority.Low),this._httpManager.teardown())},h.prototype.uploadNow=function(C){var b=this;this._addEmptyQueues(),this._isCurrentlyUploadingNow?this._uploadNowQueue.push(C):(this._isCurrentlyUploadingNow=!0,setTimeout(function(){return b._uploadNow(C)},0))},h.prototype.pauseTransmission=function(){this._paused=!0,this._httpManager.pause(),this._shouldDropEventsOnPause&&(this._queueSize-=this._inboundQueues[p.AWTEventPriority.High][0].length+this._inboundQueues[p.AWTEventPriority.Normal][0].length+this._inboundQueues[p.AWTEventPriority.Low][0].length,this._inboundQueues[p.AWTEventPriority.High][0]=[],this._inboundQueues[p.AWTEventPriority.Normal][0]=[],this._inboundQueues[p.AWTEventPriority.Low][0]=[],this._httpManager.removeQueuedRequests())},h.prototype.resumeTransmission=function(){this._paused=!1,this._httpManager.resume()},h.prototype.shouldDropEventsOnPause=function(C){this._shouldDropEventsOnPause=C},h.prototype._removeFirstQueues=function(){this._inboundQueues[p.AWTEventPriority.High].shift(),this._inboundQueues[p.AWTEventPriority.Normal].shift(),this._inboundQueues[p.AWTEventPriority.Low].shift()},h.prototype._addEmptyQueues=function(){this._inboundQueues[p.AWTEventPriority.High].push([]),this._inboundQueues[p.AWTEventPriority.Normal].push([]),this._inboundQueues[p.AWTEventPriority.Low].push([])},h.prototype._addEventToProperQueue=function(C){(!this._paused||!this._shouldDropEventsOnPause)&&(this._queueSize++,this._inboundQueues[C.priority][this._inboundQueues[C.priority].length-1].push(C))},h.prototype._dropEventWithPriorityOrLess=function(C){for(var b=p.AWTEventPriority.Low;b<=C;){if(this._inboundQueues[b][this._inboundQueues[b].length-1].length>0)return u.default.eventsDropped([this._inboundQueues[b][this._inboundQueues[b].length-1].shift()],p.AWTEventsDroppedReason.QueueFull),!0;b++}return!1},h.prototype._batchEvents=function(C){for(var b=p.AWTEventPriority.High;b>=C;){for(;this._inboundQueues[b][0].length>0;){var w=this._inboundQueues[b][0].pop();this._queueSize--,this._batcher.addEventToBatch(w)}b--}this._batcher.flushBatch()},h.prototype._uploadNow=function(C){var b=this;this.hasEvents()&&this.sendEventsForPriorityAndAbove(p.AWTEventPriority.Low),this._checkOutboundQueueEmptyAndSent(function(){b._removeFirstQueues(),null!=C&&C(),b._uploadNowQueue.length>0?setTimeout(function(){return b._uploadNow(b._uploadNowQueue.shift())},0):(b._isCurrentlyUploadingNow=!1,b.hasEvents()&&m.default.scheduleTimer())})},h.prototype._checkOutboundQueueEmptyAndSent=function(C){var b=this;this._httpManager.isCompletelyIdle()?C():setTimeout(function(){return b._checkOutboundQueueEmptyAndSent(C)},250)},h}();L.default=g},1009:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=E(4094),N=E(676),m=E(5640),R="UserInfo.IdType",u=function(){function v(M,A){this._allowDeviceFields=M,this._properties=A}return v.prototype.setAppId=function(M){this._addContext("AppInfo.Id",M)},v.prototype.setAppVersion=function(M){this._addContext("AppInfo.Version",M)},v.prototype.setAppLanguage=function(M){this._addContext("AppInfo.Language",M)},v.prototype.setDeviceId=function(M){this._allowDeviceFields&&(p.default.checkAndSaveDeviceId(M),this._addContext("DeviceInfo.Id",M))},v.prototype.setDeviceOsName=function(M){this._allowDeviceFields&&this._addContext("DeviceInfo.OsName",M)},v.prototype.setDeviceOsVersion=function(M){this._allowDeviceFields&&this._addContext("DeviceInfo.OsVersion",M)},v.prototype.setDeviceBrowserName=function(M){this._allowDeviceFields&&this._addContext("DeviceInfo.BrowserName",M)},v.prototype.setDeviceBrowserVersion=function(M){this._allowDeviceFields&&this._addContext("DeviceInfo.BrowserVersion",M)},v.prototype.setDeviceMake=function(M){this._allowDeviceFields&&this._addContext("DeviceInfo.Make",M)},v.prototype.setDeviceModel=function(M){this._allowDeviceFields&&this._addContext("DeviceInfo.Model",M)},v.prototype.setUserId=function(M,A,T){if(!isNaN(T)&&null!==T&&T>=0&&T<=12)this._addContext(R,T.toString());else{var g=void 0;switch(A){case N.AWTPiiKind.SipAddress:g=m.AWTUserIdType.SipAddress;break;case N.AWTPiiKind.PhoneNumber:g=m.AWTUserIdType.PhoneNumber;break;case N.AWTPiiKind.SmtpAddress:g=m.AWTUserIdType.EmailAddress;break;default:g=m.AWTUserIdType.Unknown}this._addContext(R,g.toString())}if(isNaN(A)||null===A||A===N.AWTPiiKind.NotSet||A>13)switch(T){case m.AWTUserIdType.Skype:A=N.AWTPiiKind.Identity;break;case m.AWTUserIdType.EmailAddress:A=N.AWTPiiKind.SmtpAddress;break;case m.AWTUserIdType.PhoneNumber:A=N.AWTPiiKind.PhoneNumber;break;case m.AWTUserIdType.SipAddress:A=N.AWTPiiKind.SipAddress;break;default:A=N.AWTPiiKind.NotSet}this._addContextWithPii("UserInfo.Id",M,A)},v.prototype.setUserAdvertisingId=function(M){this._addContext("UserInfo.AdvertisingId",M)},v.prototype.setUserTimeZone=function(M){this._addContext("UserInfo.TimeZone",M)},v.prototype.setUserLanguage=function(M){this._addContext("UserInfo.Language",M)},v.prototype._addContext=function(M,A){"string"==typeof A&&this._properties.setProperty(M,A)},v.prototype._addContextWithPii=function(M,A,T){"string"==typeof A&&this._properties.setPropertyWithPii(M,A,T)},v}();L.default=u},2621:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=E(4023),N=function(){function m(){}return m.setEventsHandler=function(R){p.default.setEventsHandler(R)},m.getEventsHandler=function(){return p.default.getEventsHandler()},m.scheduleTimer=function(){p.default.scheduleTimer()},m}();L.default=N},4023:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=E(1842),N=E(676),m=E(4220),R=E(5816),u=E(58),v=E(7613),M=E(5593),g="awt_stats",h=function(){function C(){}return C.setEventsHandler=function(b){this._eventHandler=b},C.getEventsHandler=function(){return this._eventHandler},C.scheduleTimer=function(){var b=this,w=this._profiles[this._currentProfile][2];this._timeout<0&&w>=0&&!this._paused&&(this._eventHandler.hasEvents()?(0===w&&this._currentBackoffCount>0&&(w=1),this._timeout=setTimeout(function(){return b._batchAndSendEvents()},w*(1<<this._currentBackoffCount)*1e3)):this._timerCount=0)},C.initialize=function(b){var w=this;this._newEventsAllowed=!0,this._config=b,this._eventHandler=new m.default(b.collectorUri,b.cacheMemorySizeLimitInNumberOfEvents,b.httpXHROverride,b.clockSkewRefreshDurationInMins),this._initializeProfiles(),R.default.initialize(function(I,P){if(w._config.canSendStatEvent(g)){var k=new u.default(g);for(var O in k.setEventPriority(N.AWTEventPriority.High),k.setProperty("TenantId",P),I)I.hasOwnProperty(O)&&k.setProperty(O,I[O].toString());v.default.getLogger(M.StatsApiKey).logEvent(k)}})},C.setTransmitProfile=function(b){this._currentProfile!==b&&void 0!==this._profiles[b]&&(this.clearTimeout(),this._currentProfile=b,this.scheduleTimer())},C.loadTransmitProfiles=function(b){for(var w in this._resetTransmitProfiles(),b)if(b.hasOwnProperty(w)){if(3!==b[w].length)continue;for(var I=2;I>=0;--I)if(b[w][I]<0){for(var P=I;P>=0;--P)b[w][P]=-1;break}for(I=2;I>0;--I)b[w][I]>0&&b[w][I-1]>0&&(b[w][I-1]=Math.ceil(b[w][I-1]/b[w][I])*b[w][I]);this._profiles[w]=b[w]}},C.sendEvent=function(b){this._newEventsAllowed&&(this._currentBackoffCount>0&&b.priority===N.AWTEventPriority.Immediate_sync&&(b.priority=N.AWTEventPriority.High),this._eventHandler.addEvent(b),this.scheduleTimer())},C.flush=function(b){var w=(new Date).getTime();!this._paused&&this._lastUploadNowCall+3e4<w&&(this._lastUploadNowCall=w,this._timeout>-1&&(clearTimeout(this._timeout),this._timeout=-1),this._eventHandler.uploadNow(b))},C.pauseTransmission=function(){this._paused||(this.clearTimeout(),this._eventHandler.pauseTransmission(),this._paused=!0)},C.resumeTransmision=function(){this._paused&&(this._paused=!1,this._eventHandler.resumeTransmission(),this.scheduleTimer())},C.flushAndTeardown=function(){R.default.teardown(),this._newEventsAllowed=!1,this.clearTimeout(),this._eventHandler.teardown()},C.backOffTransmission=function(){this._currentBackoffCount<4&&(this._currentBackoffCount++,this.clearTimeout(),this.scheduleTimer())},C.clearBackOff=function(){this._currentBackoffCount>0&&(this._currentBackoffCount=0,this.clearTimeout(),this.scheduleTimer())},C._resetTransmitProfiles=function(){this.clearTimeout(),this._initializeProfiles(),this._currentProfile=p.AWT_REAL_TIME,this.scheduleTimer()},C.clearTimeout=function(){this._timeout>0&&(clearTimeout(this._timeout),this._timeout=-1,this._timerCount=0)},C._batchAndSendEvents=function(){var b=N.AWTEventPriority.High;this._timerCount++,this._timerCount*this._profiles[this._currentProfile][2]===this._profiles[this._currentProfile][0]?(b=N.AWTEventPriority.Low,this._timerCount=0):this._timerCount*this._profiles[this._currentProfile][2]===this._profiles[this._currentProfile][1]&&(b=N.AWTEventPriority.Normal),this._eventHandler.sendEventsForPriorityAndAbove(b),this._timeout=-1,this.scheduleTimer()},C._initializeProfiles=function(){this._profiles={},this._profiles[p.AWT_REAL_TIME]=[4,2,1],this._profiles[p.AWT_NEAR_REAL_TIME]=[12,6,3],this._profiles[p.AWT_BEST_EFFORT]=[36,18,9]},C._newEventsAllowed=!1,C._currentProfile=p.AWT_REAL_TIME,C._timeout=-1,C._currentBackoffCount=0,C._paused=!1,C._timerCount=0,C._lastUploadNowCall=0,C}();L.default=h},5234:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=E(676);L.AWTPropertyType=p.AWTPropertyType,L.AWTPiiKind=p.AWTPiiKind,L.AWTEventPriority=p.AWTEventPriority,L.AWTEventsDroppedReason=p.AWTEventsDroppedReason,L.AWTEventsRejectedReason=p.AWTEventsRejectedReason,L.AWTCustomerContentKind=p.AWTCustomerContentKind;var N=E(5640);L.AWTUserIdType=N.AWTUserIdType,L.AWTSessionState=N.AWTSessionState;var m=E(1842);L.AWT_BEST_EFFORT=m.AWT_BEST_EFFORT,L.AWT_NEAR_REAL_TIME=m.AWT_NEAR_REAL_TIME,L.AWT_REAL_TIME=m.AWT_REAL_TIME;var R=E(58);L.AWTEventProperties=R.default;var u=E(6208);L.AWTLogger=u.default;var v=E(7613);L.AWTLogManager=v.default;var M=E(2621);L.AWTTransmissionManager=M.default;var A=E(6064);L.AWTSerializer=A.default;var T=E(1009);L.AWTSemanticContext=T.default,L.AWT_COLLECTOR_URL_UNITED_STATES="https://us.pipe.aria.microsoft.com/Collector/3.0/",L.AWT_COLLECTOR_URL_GERMANY="https://de.pipe.aria.microsoft.com/Collector/3.0/",L.AWT_COLLECTOR_URL_JAPAN="https://jp.pipe.aria.microsoft.com/Collector/3.0/",L.AWT_COLLECTOR_URL_AUSTRALIA="https://au.pipe.aria.microsoft.com/Collector/3.0/",L.AWT_COLLECTOR_URL_EUROPE="https://eu.pipe.aria.microsoft.com/Collector/3.0/",L.AWT_COLLECTOR_URL_USGOV_DOD="https://pf.pipe.aria.microsoft.com/Collector/3.0",L.AWT_COLLECTOR_URL_USGOV_DOJ="https://tb.pipe.aria.microsoft.com/Collector/3.0"},1842:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.AWT_REAL_TIME="REAL_TIME",L.AWT_NEAR_REAL_TIME="NEAR_REAL_TIME",L.AWT_BEST_EFFORT="BEST_EFFORT"},5640:(Y,L)=>{"use strict";var N;Object.defineProperty(L,"__esModule",{value:!0}),(N=L.AWTUserIdType||(L.AWTUserIdType={}))[N.Unknown=0]="Unknown",N[N.MSACID=1]="MSACID",N[N.MSAPUID=2]="MSAPUID",N[N.ANID=3]="ANID",N[N.OrgIdCID=4]="OrgIdCID",N[N.OrgIdPUID=5]="OrgIdPUID",N[N.UserObjectId=6]="UserObjectId",N[N.Skype=7]="Skype",N[N.Yammer=8]="Yammer",N[N.EmailAddress=9]="EmailAddress",N[N.PhoneNumber=10]="PhoneNumber",N[N.SipAddress=11]="SipAddress",N[N.MUID=12]="MUID",function(N){N[N.Started=0]="Started",N[N.Ended=1]="Ended"}(L.AWTSessionState||(L.AWTSessionState={}))},8779:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Version="1.8.7",L.FullVersionString="AWT-Web-JS-"+L.Version},5436:(Y,L,E)=>{"use strict";L.Mg=void 0;E(3762),E(8290),E(9425);E(2900);E(6194);E(448),E(3372);var T=E(7626);L.Mg=T.default,E(4352)},2235:function(Y,L,E){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(h){for(var C,b=1,w=arguments.length;b<w;b++)for(var I in C=arguments[b])Object.prototype.hasOwnProperty.call(C,I)&&(h[I]=C[I]);return h}).apply(this,arguments)};Object.defineProperty(L,"__esModule",{value:!0});var N=E(4151),m=E(676),R=E(5234),u=E(7095),v=E(3037),M=E(4151),A=E(8098),T=(()=>((T||(T={})).ReactNative="ReactNative",T))(),g=function(){function h(){}return h.initialize=function(C){this._debug&&console.log("[AriaTelemetry][logger][initialize][custom]"),h._logger=R.AWTLogManager.initialize(C)},h.setDebug=function(C){h._debug=C},h.disable=function(){this._debug&&console.log("[AriaTelemetry][disable]"),h._disable=!0},h.setCDNPackages=function(C){h._CDNPackagesInfo=p(p({},h._CDNPackagesInfo),C)},h.info=function(C,b){var w;void 0===b&&(b=v.default.EVENTS);var I={name:v.default.EVENTS,properties:p(p(p(p(p({},h.populateBaseProperties()),h.fillWebPlatformData()),h.fillMobilePlatformData()),C),{LogLevel:u.default.INFO}),priority:m.AWTEventPriority.High};b==v.default.IC3CLIENT&&(I={name:v.default.IC3CLIENT,properties:p(p(p({},h.populateIC3ClientBaseProperties()),C),{LogLevel:u.default.INFO}),priority:m.AWTEventPriority.High}),b==v.default.OCSDK&&(I={name:v.default.OCSDK,properties:p(p(p({},h.populateOCSDKBaseProperties()),C),{LogLevel:u.default.INFO}),priority:m.AWTEventPriority.High}),b==v.default.ACSCLIENT&&(I={name:v.default.ACSCLIENT,properties:p(p(p({},h.populateACSClientBaseProperties()),C),{LogLevel:u.default.INFO}),priority:m.AWTEventPriority.High}),b==v.default.ACSADAPTER&&(I={name:v.default.ACSADAPTER,properties:p(p(p({},h.populateACSAdapterBaseProperties()),C),{LogLevel:u.default.INFO}),priority:m.AWTEventPriority.High}),b==v.default.CALLINGSDK&&(I={name:v.default.CALLINGSDK,properties:p(p(p({},h.populateCallingSDKBaseProperties()),C),{LogLevel:u.default.INFO}),priority:m.AWTEventPriority.High}),this._debug&&console.log("[AriaTelemetry][info] "+b),this._debug&&console.log(I),this._debug&&console.log(I.properties.Event),!h._disable&&(null===(w=h.logger)||void 0===w||w.logEvent(I))},h.debug=function(C,b){var w;void 0===b&&(b=v.default.EVENTS);var I={name:v.default.EVENTS,properties:p(p(p(p(p({},h.populateBaseProperties()),h.fillWebPlatformData()),h.fillMobilePlatformData()),C),{LogLevel:u.default.DEBUG}),priority:m.AWTEventPriority.High};b==v.default.IC3CLIENT&&(I={name:v.default.IC3CLIENT,properties:p(p(p({},h.populateIC3ClientBaseProperties()),C),{LogLevel:u.default.DEBUG}),priority:m.AWTEventPriority.High}),b==v.default.OCSDK&&(I={name:v.default.OCSDK,properties:p(p(p({},h.populateOCSDKBaseProperties()),C),{LogLevel:u.default.DEBUG}),priority:m.AWTEventPriority.High}),b==v.default.ACSCLIENT&&(I={name:v.default.ACSCLIENT,properties:p(p(p({},h.populateACSClientBaseProperties()),C),{LogLevel:u.default.DEBUG}),priority:m.AWTEventPriority.High}),b==v.default.ACSADAPTER&&(I={name:v.default.ACSADAPTER,properties:p(p(p({},h.populateACSAdapterBaseProperties()),C),{LogLevel:u.default.DEBUG}),priority:m.AWTEventPriority.High}),b==v.default.CALLINGSDK&&(I={name:v.default.CALLINGSDK,properties:p(p(p({},h.populateCallingSDKBaseProperties()),C),{LogLevel:u.default.DEBUG}),priority:m.AWTEventPriority.High}),this._debug&&console.log("[AriaTelemetry][debug] "+b),this._debug&&console.log(I),this._debug&&console.log(I.properties.Event),!h._disable&&(null===(w=h.logger)||void 0===w||w.logEvent(I))},h.warn=function(C,b){var w;void 0===b&&(b=v.default.EVENTS);var I={name:v.default.EVENTS,properties:p(p(p(p(p({},h.populateBaseProperties()),h.fillWebPlatformData()),h.fillMobilePlatformData()),C),{LogLevel:u.default.WARN}),priority:m.AWTEventPriority.High};b==v.default.IC3CLIENT&&(I={name:v.default.IC3CLIENT,properties:p(p(p({},h.populateIC3ClientBaseProperties()),C),{LogLevel:u.default.WARN}),priority:m.AWTEventPriority.High}),b==v.default.OCSDK&&(I={name:v.default.OCSDK,properties:p(p(p({},h.populateOCSDKBaseProperties()),C),{LogLevel:u.default.WARN}),priority:m.AWTEventPriority.High}),b==v.default.ACSCLIENT&&(I={name:v.default.ACSCLIENT,properties:p(p(p({},h.populateACSClientBaseProperties()),C),{LogLevel:u.default.WARN}),priority:m.AWTEventPriority.High}),b==v.default.ACSADAPTER&&(I={name:v.default.ACSADAPTER,properties:p(p(p({},h.populateACSAdapterBaseProperties()),C),{LogLevel:u.default.WARN}),priority:m.AWTEventPriority.High}),b==v.default.CALLINGSDK&&(I={name:v.default.CALLINGSDK,properties:p(p(p({},h.populateCallingSDKBaseProperties()),C),{LogLevel:u.default.WARN}),priority:m.AWTEventPriority.High}),this._debug&&console.log("[AriaTelemetry][warn] "+b),this._debug&&console.log(I),this._debug&&console.log(I.properties.Event),!h._disable&&(null===(w=h.logger)||void 0===w||w.logEvent(I))},h.error=function(C,b){var w;void 0===b&&(b=v.default.EVENTS);var I={name:v.default.EVENTS,properties:p(p(p(p(p({},h.populateBaseProperties()),h.fillWebPlatformData()),h.fillMobilePlatformData()),C),{LogLevel:u.default.ERROR}),priority:m.AWTEventPriority.High};b==v.default.IC3CLIENT&&(I={name:v.default.IC3CLIENT,properties:p(p(p({},h.populateIC3ClientBaseProperties()),C),{LogLevel:u.default.ERROR}),priority:m.AWTEventPriority.High}),b==v.default.OCSDK&&(I={name:v.default.OCSDK,properties:p(p(p({},h.populateOCSDKBaseProperties()),C),{LogLevel:u.default.ERROR}),priority:m.AWTEventPriority.High}),b==v.default.ACSCLIENT&&(I={name:v.default.ACSCLIENT,properties:p(p(p({},h.populateACSClientBaseProperties()),C),{LogLevel:u.default.ERROR}),priority:m.AWTEventPriority.High}),b==v.default.ACSADAPTER&&(I={name:v.default.ACSADAPTER,properties:p(p(p({},h.populateACSAdapterBaseProperties()),C),{LogLevel:u.default.ERROR}),priority:m.AWTEventPriority.High}),b==v.default.CALLINGSDK&&(I={name:v.default.CALLINGSDK,properties:p(p(p({},h.populateCallingSDKBaseProperties()),C),{LogLevel:u.default.ERROR}),priority:m.AWTEventPriority.High}),this._debug&&console.log("[AriaTelemetry][error] "+b),this._debug&&console.log(I),this._debug&&console.log(I.properties.Event),!h._disable&&(null===(w=h.logger)||void 0===w||w.logEvent(I))},h.log=function(C,b){var w;void 0===b&&(b=v.default.EVENTS);var I={name:v.default.EVENTS,properties:p(p(p(p(p({},h.populateBaseProperties()),h.fillWebPlatformData()),h.fillMobilePlatformData()),C),{LogLevel:u.default.LOG}),priority:m.AWTEventPriority.High};b==v.default.IC3CLIENT&&(I={name:v.default.IC3CLIENT,properties:p(p(p({},h.populateIC3ClientBaseProperties()),C),{LogLevel:u.default.LOG}),priority:m.AWTEventPriority.High}),b==v.default.OCSDK&&(I={name:v.default.OCSDK,properties:p(p(p({},h.populateOCSDKBaseProperties()),C),{LogLevel:u.default.LOG}),priority:m.AWTEventPriority.High}),b==v.default.ACSCLIENT&&(I={name:v.default.ACSCLIENT,properties:p(p(p({},h.populateACSClientBaseProperties()),C),{LogLevel:u.default.LOG}),priority:m.AWTEventPriority.High}),b==v.default.ACSADAPTER&&(I={name:v.default.ACSADAPTER,properties:p(p(p({},h.populateACSAdapterBaseProperties()),C),{LogLevel:u.default.LOG}),priority:m.AWTEventPriority.High}),b==v.default.CALLINGSDK&&(I={name:v.default.CALLINGSDK,properties:p(p(p({},h.populateCallingSDKBaseProperties()),C),{LogLevel:u.default.LOG}),priority:m.AWTEventPriority.High}),this._debug&&console.log("[AriaTelemetry][log]"),this._debug&&console.log(I),this._debug&&console.log(I.properties.Event),!h._disable&&(null===(w=h.logger)||void 0===w||w.logEvent(I))},Object.defineProperty(h,"logger",{get:function(){return h._logger||(this._debug&&console.log("[AriaTelemetry][logger][initialize]"),h._logger=R.AWTLogManager.initialize(N.ariaTelemetryKey)),h._logger},enumerable:!1,configurable:!0}),h.populateBaseProperties=function(){var C={OCSDK:E(1528).i8,IC3Core:E(5233).i8,ACSChat:E(2861).i8,ACSCommon:E(6638).i8,AMSClient:E(5500).i8};return{ChatSDKRuntimeId:"",OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",CallId:"",Domain:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:"",ChatSDKVersion:E(8464).i8,NPMPackagesInfo:JSON.stringify(C),CDNPackagesInfo:JSON.stringify(h._CDNPackagesInfo),PlatformDetails:""}},h.fillMobilePlatformData=function(){var C={},b={};if(!A.isReactNative())return C;try{var I=E(Object(function(){var k=new Error("Cannot find module 'react-native'");throw k.code="MODULE_NOT_FOUND",k}())).Platform;b.Renderer=T.ReactNative,C.DeviceInfo_OsVersion=I.Version,b.DeviceInfo_OsVersion=I.Version,"android"===I.OS.toLowerCase()?(C.DeviceInfo_OsName="Android",b.DeviceInfo_OsName="Android"):"ios"===I.OS.toLowerCase()?(C.DeviceInfo_OsName="iOS",b.DeviceInfo_OsName="iOS"):(C.DeviceInfo_OsName=""+I.OS,b.DeviceInfo_OsName=""+I.OS),this._debug&&console.log("[AriaTelemetry][fillMobilePlatformData]["+C.DeviceInfo_OsName+"]")}catch(P){this._debug&&console.log("[AriaTelemetry][fillMobilePlatformData][Web]")}return C.PlatformDetails=JSON.stringify(b),C},h.fillWebPlatformData=function(){var C={};if(!A.isBrowser())return C;try{C.Domain=window.location.origin||"",this._debug&&console.log("[AriaTelemetry][fillWebPlatformData]")}catch(b){this._debug&&console.log("[AriaTelemetry][fillWebPlatformData][Error]")}return C},h.populateIC3ClientBaseProperties=function(){return{ChatSDKRuntimeId:"",OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",Event:"",Description:"",SubscriptionId:"",EndpointId:"",EndpointUrl:"",ErrorCode:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:"",IC3ClientVersion:M.ic3ClientVersion}},h.populateOCSDKBaseProperties=function(){return{ChatSDKRuntimeId:"",OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",TransactionId:"",Event:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:"",OCSDKVersion:E(1528).i8}},h.populateACSClientBaseProperties=function(){return{ChatSDKRuntimeId:"",OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",Event:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:"",ACSChatVersion:E(2861).i8}},h.populateACSAdapterBaseProperties=function(){return{ChatSDKRuntimeId:"",OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",Event:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:"",ACSAdapterVersion:M.webChatACSAdapterVersion}},h.populateCallingSDKBaseProperties=function(){return{ChatSDKRuntimeId:"",OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",CallId:"",Event:"",Description:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:""}},h._debug=!1,h._disable=!1,h}();L.default=g},7941:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.failEvent=L.completeEvent=L.startEvent=void 0,L.startEvent=function(E){return E+"Started"},L.completeEvent=function(E){return E+"Completed"},L.failEvent=function(E){return E+"Failed"}},7095:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=(()=>{return(p=E||(E={})).INFO="INFO",p.DEBUG="DEBUG",p.WARN="WARN",p.ERROR="ERROR",p.LOG="LOG",E;var p})();L.default=E},1247:function(Y,L,E){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(v){for(var M,A=1,T=arguments.length;A<T;A++)for(var g in M=arguments[A])Object.prototype.hasOwnProperty.call(M,g)&&(v[g]=M[g]);return v}).apply(this,arguments)};Object.defineProperty(L,"__esModule",{value:!0});var N=E(3037),m=E(8485),R=E(7941),u=function(){function v(M){this.omnichannelConfig=M,this.runtimeId="",this.telemetry=null,this.debug=!1,this.telemetryEvents=new Map,this.scenarioType=N.default.EVENTS}return v.prototype.setDebug=function(M){var A;this.debug=M,null===(A=this.telemetry)||void 0===A||A.setDebug(M)},v.prototype.setScenarioType=function(M){this.scenarioType=M},v.prototype.setRuntimeId=function(M){this.runtimeId=M},v.prototype.useTelemetry=function(M){this.debug&&console.log("[ScenarioMarker][useTelemetry]"),this.telemetry=M},v.prototype.startScenario=function(M,A){var T;if(void 0===A&&(A={}),this.debug&&console.log("[ScenarioMarker][startScenario]"),!this.telemetryEvents.has(M)){var g=new m.default;g.start(),this.telemetryEvents.set(M,g)}var h=p({ChatSDKRuntimeId:this.runtimeId,Event:R.startEvent(M),OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId},A);null===(T=this.telemetry)||void 0===T||T.info(h,this.scenarioType)},v.prototype.failScenario=function(M,A){var T;if(void 0===A&&(A={}),this.debug&&console.log("[ScenarioMarker][failScenario]"),this.telemetryEvents.has(M)){var g=this.telemetryEvents.get(M);this.telemetryEvents.delete(M);var h=p({ChatSDKRuntimeId:this.runtimeId,Event:R.failEvent(M),OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,ElapsedTimeInMilliseconds:g.stop()},A);null===(T=this.telemetry)||void 0===T||T.error(h,this.scenarioType)}else console.warn("'"+M+"' event has not started.")},v.prototype.completeScenario=function(M,A){var T;if(void 0===A&&(A={}),this.debug&&console.log("[ScenarioMarker][completeScenario]"),this.telemetryEvents.has(M)){var g=this.telemetryEvents.get(M);this.telemetryEvents.delete(M);var h=p({ChatSDKRuntimeId:this.runtimeId,Event:R.completeEvent(M),OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,ElapsedTimeInMilliseconds:g.stop()},A);null===(T=this.telemetry)||void 0===T||T.info(h,this.scenarioType)}else console.warn("'"+M+"' event has not started.")},v}();L.default=u},3037:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=(()=>{return(p=E||(E={})).EVENTS="occhatsdk_events",p.IC3CLIENT="occhatsdk_ic3clientevents",p.OCSDK="occhatsdk_ocsdkevents",p.ACSCLIENT="occhatsdk_acsclientevents",p.ACSADAPTER="occhatsdk_acsadapterevents",p.CALLINGSDK="occhatsdk_callingsdkevents",p.UNDEFINED="undefined",E;var p})();L.default=E},8485:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=function(){function p(){}return p.prototype.start=function(){this.timeStart=(new Date).getTime()},p.prototype.stop=function(){return(new Date).getTime()-this.timeStart},p}();L.default=E},9600:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=(()=>{return(p=E||(E={})).ValidateOmnichannelConfig="ValidateOmnichannelConfig",p.ValidateSDKConfig="ValidateSDKConfig",p.InitializeChatSDK="InitializeChatSDK",p.StartChat="StartChat",p.EndChat="EndChat",p.GetLiveChatConfig="GetLiveChatConfig",p.GetAuthToken="GetAuthToken",p.GetPreChatSurvey="GetPreChatSurvey",p.GetChatToken="GetChatToken",p.GetConversationDetails="GetConversationDetails",p.GetCurrentLiveChatContext="GetCurrentLiveChatContext",p.GetMessages="GetMessages",p.SendMessages="SendMessages",p.SendTypingEvent="SendTypingEvent",p.OnAgentEndSession="OnAgentEndSession",p.OnNewMessage="OnNewMessage",p.OnTypingEvent="OnTypingEvent",p.UploadFileAttachment="UploadFileAttachment",p.DownloadFileAttachment="DownloadFileAttachment",p.EmailLiveChatTranscript="EmailLiveChatTranscript",p.GetLiveChatTranscript="GetLiveChatTranscript",p.CreateIC3Adapter="CreateChatAdapter",p.CreateACSAdapter="CreateACSAdapter",p.CreateDirectLine="CreateDirectLine",p.GetVoiceVideoCalling="GetVoiceVideoCalling",p.GetIC3Client="GetIC3Client",p.InitializeVoiceVideoCallingSDK="InitializeVoiceVideoCallingSDK",p.AcceptVoiceCall="AcceptVoiceCall",p.AcceptVideoCall="AcceptVideoCall",p.RejectCall="RejectCall",p.StopCall="StopCall",p.OnCallDisconnected="OnCallDisconnected",p.UpdateChatToken="UpdateChatToken",p.GetChatReconnectContext="GetChatReconnectContext",p.GetPostChatSurveyContext="GetPostChatSurveyContext",p.GetAgentAvailability="GetAgentAvailability",p.GetGeolocation="GetGeolocation",E;var p})();L.default=E},6345:function(Y,L,E){"use strict";var p=this&&this.__awaiter||function(A,T,g,h){return new(g||(g=Promise))(function(b,w){function I(O){try{k(h.next(O))}catch(V){w(V)}}function P(O){try{k(h.throw(O))}catch(V){w(V)}}function k(O){O.done?b(O.value):function(b){return b instanceof g?b:new g(function(w){w(b)})}(O.value).then(I,P)}k((h=h.apply(A,T||[])).next())})},N=this&&this.__generator||function(A,T){var h,C,b,w,g={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return w={next:I(0),throw:I(1),return:I(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function I(k){return function(O){return function(k){if(h)throw new TypeError("Generator is already executing.");for(;g;)try{if(h=1,C&&(b=2&k[0]?C.return:k[0]?C.throw||((b=C.return)&&b.call(C),0):C.next)&&!(b=b.call(C,k[1])).done)return b;switch(C=0,b&&(k=[2&k[0],b.value]),k[0]){case 0:case 1:b=k;break;case 4:return g.label++,{value:k[1],done:!1};case 5:g.label++,C=k[1],k=[0];continue;case 7:k=g.ops.pop(),g.trys.pop();continue;default:if(!(b=(b=g.trys).length>0&&b[b.length-1])&&(6===k[0]||2===k[0])){g=0;continue}if(3===k[0]&&(!b||k[1]>b[0]&&k[1]<b[3])){g.label=k[1];break}if(6===k[0]&&g.label<b[1]){g.label=b[1],b=k;break}if(b&&g.label<b[2]){g.label=b[2],g.ops.push(k);break}b[2]&&g.ops.pop(),g.trys.pop();continue}k=T.call(A,g)}catch(O){k=[6,O],C=0}finally{h=b=0}if(5&k[0])throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}([k,O])}}};Object.defineProperty(L,"__esModule",{value:!0}),L.removeElementById=L.loadScript=void 0;var m=E(1584),v=function(A,T,g,h,C){return void 0===T&&(T=function(){}),void 0===g&&(g=function(){}),void 0===h&&(h=3),void 0===C&&(C=0),p(void 0,void 0,void 0,function(){return N(this,function(b){return[2,new Promise(function(w,I){return p(void 0,void 0,void 0,function(){var O;return N(this,function(V){switch(V.label){case 0:return Array.from(document.getElementsByTagName("script")).filter(function(U){return U.src==A}).length?[4,T()]:[3,2];case 1:return V.sent(),[2,w()];case 2:return(O=document.createElement("script")).setAttribute("src",A),O.setAttribute("type","text/javascript"),document.head.appendChild(O),O.addEventListener("load",function(){return p(void 0,void 0,void 0,function(){return N(this,function(U){switch(U.label){case 0:return[4,T()];case 1:return U.sent(),w(),[2]}})})}),O.addEventListener("error",function(){return p(void 0,void 0,void 0,function(){var U,B;return N(this,function(H){switch(H.label){case 0:return++C>=h?[4,g()]:[3,2];case 1:return H.sent(),[2,I(new Error("Resource failed to load, or can't be used."))];case 2:return O.remove(),U=1e3*Math.min(Math.pow(2,C)+Math.random(),60),[4,m.default(U)];case 3:H.sent(),H.label=4;case 4:return H.trys.push([4,6,,7]),[4,v(A,T,g,h,C)];case 5:return H.sent(),[3,7];case 6:return B=H.sent(),I(B),[3,7];case 7:return[2]}})})}),[2]}})})})]})})};L.loadScript=v;var M=function(A){var T;null===(T=document.getElementById(A))||void 0===T||T.remove()};L.removeElementById=M,L.default={loadScript:v,removeElementById:M}},6403:function(Y,L,E){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(P){for(var k,O=1,V=arguments.length;O<V;O++)for(var U in k=arguments[O])Object.prototype.hasOwnProperty.call(k,U)&&(P[U]=k[U]);return P}).apply(this,arguments)},N=this&&this.__awaiter||function(P,k,O,V){return new(O||(O=Promise))(function(B,H){function W(pe){try{$(V.next(pe))}catch(x){H(x)}}function te(pe){try{$(V.throw(pe))}catch(x){H(x)}}function $(pe){pe.done?B(pe.value):function(B){return B instanceof O?B:new O(function(H){H(B)})}(pe.value).then(W,te)}$((V=V.apply(P,k||[])).next())})},m=this&&this.__generator||function(P,k){var V,U,B,H,O={label:0,sent:function(){if(1&B[0])throw B[1];return B[1]},trys:[],ops:[]};return H={next:W(0),throw:W(1),return:W(2)},"function"==typeof Symbol&&(H[Symbol.iterator]=function(){return this}),H;function W($){return function(pe){return function($){if(V)throw new TypeError("Generator is already executing.");for(;O;)try{if(V=1,U&&(B=2&$[0]?U.return:$[0]?U.throw||((B=U.return)&&B.call(U),0):U.next)&&!(B=B.call(U,$[1])).done)return B;switch(U=0,B&&($=[2&$[0],B.value]),$[0]){case 0:case 1:B=$;break;case 4:return O.label++,{value:$[1],done:!1};case 5:O.label++,U=$[1],$=[0];continue;case 7:$=O.ops.pop(),O.trys.pop();continue;default:if(!(B=(B=O.trys).length>0&&B[B.length-1])&&(6===$[0]||2===$[0])){O=0;continue}if(3===$[0]&&(!B||$[1]>B[0]&&$[1]<B[3])){O.label=$[1];break}if(6===$[0]&&O.label<B[1]){O.label=B[1],B=$;break}if(B&&O.label<B[2]){O.label=B[2],O.ops.push($);break}B[2]&&O.ops.pop(),O.trys.pop();continue}$=k.call(P,O)}catch(pe){$=[6,pe],U=0}finally{V=B=0}if(5&$[0])throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}([$,pe])}}},R=this&&this.__spreadArrays||function(){for(var P=0,k=0,O=arguments.length;k<O;k++)P+=arguments[k].length;var V=Array(P),U=0;for(k=0;k<O;k++)for(var B=arguments[k],H=0,W=B.length;H<W;H++,U++)V[U]=B[H];return V};Object.defineProperty(L,"__esModule",{value:!0}),L.createIC3Adapter=L.createACSAdapter=L.createDirectLine=void 0;var u=E(8953),v=E(7587),M=E(7432),A=E(5480),T=E(3968),g=E(6345),h=E(9600),C=E(4674),b=function(P,k,O,V,U,B){return N(void 0,void 0,void 0,function(){var H,W,te,pe,x,$;return m(this,function(r){switch(r.label){case 0:H=P.DirectLine?P.DirectLine.options:{},W=C.default.resolveChatAdapterUrl(k,O,V),null==U||U.setCDNPackages({DirectLine:W}),B.startScenario(h.default.CreateDirectLine),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,g.loadScript(W)];case 2:return r.sent(),[3,4];case 3:throw te=r.sent(),$={response:v.default.ScriptLoadFailure,errorObject:""+te},B.failScenario(h.default.CreateDirectLine,{ExceptionDetails:JSON.stringify($)}),new Error("Failed to load DirectLine");case 4:try{return pe=window.DirectLine,x=new pe.DirectLine(p({},H)),B.completeScenario(h.default.CreateDirectLine),[2,x]}catch(s){throw $={response:v.default.ChatAdapterInitializationFailure,errorObject:""+s},B.failScenario(h.default.CreateDirectLine,{ExceptionDetails:JSON.stringify($)}),new Error("Failed to create DirectLine")}return[2]}})})};L.createDirectLine=b;var w=function(P,k,O,V,U,B,H,W,te,$,pe){return N(void 0,void 0,void 0,function(){var x,r,s,l,a,f,_,D,i,y,d;return m(this,function(z){switch(z.label){case 0:x=P.ACSAdapter?P.ACSAdapter.options:{},r=C.default.resolveChatAdapterUrl(k,O,V),null==U||U.setCDNPackages({ACSAdapter:r}),s=[M.default({widgetId:H.widgetId}),A.default()],l=[T.default()],a=(null==x?void 0:x.egressMiddleware)?R(x.egressMiddleware,s):R(s),f=(null==x?void 0:x.ingressMiddleware)?R(x.ingressMiddleware,l):R(l),_=p(p({enableAdaptiveCards:!0,enableThreadMemberUpdateNotification:!0,enableLeaveThreadOnWindowClosed:!1},x),{ingressMiddleware:f,egressMiddleware:a}),B.startScenario(h.default.CreateACSAdapter),z.label=1;case 1:return z.trys.push([1,3,,4]),[4,g.loadScript(r)];case 2:return z.sent(),[3,4];case 3:throw D=z.sent(),d={response:v.default.ScriptLoadFailure,errorObject:""+D},B.failScenario(h.default.CreateACSAdapter,{ExceptionDetails:JSON.stringify(d)}),new Error("Failed to load ACSAdapter");case 4:try{return i=window.ChatAdapter,y=i.createACSAdapter(W.token,W.visitorId||"teamsvisitor",W.chatId,W.acsEndpoint,te,3e4,u.default.Customer,$,pe,_),B.completeScenario(h.default.CreateACSAdapter),[2,y]}catch(q){throw d={response:v.default.ChatAdapterInitializationFailure,errorObject:""+q},B.failScenario(h.default.CreateACSAdapter,{ExceptionDetails:JSON.stringify(d)}),new Error("Failed to create ACSAdapter")}return[2]}})})};L.createACSAdapter=w;var I=function(P,k,O,V,U,B,H,W,te){return N(void 0,void 0,void 0,function(){var $,pe,x,s,l,r;return m(this,function(a){switch(a.label){case 0:$=P.IC3Adapter?P.IC3Adapter.options:{},pe=C.default.resolveChatAdapterUrl(k,O,V),null==U||U.setCDNPackages({IC3Adapter:pe}),B.startScenario(h.default.CreateIC3Adapter),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,g.loadScript(pe)];case 2:return a.sent(),[3,4];case 3:throw x=a.sent(),r={response:v.default.ScriptLoadFailure,errorObject:""+x},B.failScenario(h.default.CreateIC3Adapter,{ExceptionDetails:JSON.stringify(r)}),new Error("Failed to load IC3Adapter");case 4:s=p({chatToken:H,userDisplayName:"Customer",userId:H.visitorId||"teamsvisitor",sdkURL:C.default.resolveIC3ClientUrl(k),sdk:W},$);try{return(l=new window.Microsoft.BotFramework.WebChat.IC3Adapter(s)).logger=te,B.completeScenario(h.default.CreateIC3Adapter),[2,l]}catch(f){throw r={response:v.default.ChatAdapterInitializationFailure,errorObject:""+f},B.failScenario(h.default.CreateIC3Adapter,{ExceptionDetails:JSON.stringify(r)}),new Error("Failed to create IC3Adapter")}return[2]}})})};L.createIC3Adapter=I,L.default={createDirectLine:b,createACSAdapter:w,createIC3Adapter:I}},9340:function(Y,L,E){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(u){for(var v,M=1,A=arguments.length;M<A;M++)for(var T in v=arguments[M])Object.prototype.hasOwnProperty.call(v,T)&&(u[T]=v[T]);return u}).apply(this,arguments)};Object.defineProperty(L,"__esModule",{value:!0});var N=E(8191),m=E(3709);L.default=function(u,v){var M={};if(M.liveChatVersion=v.liveChatVersion||N.default.V1,v.debug&&console.log(u),v.liveChatVersion===N.default.V2){var g=u.content,h=u.metadata,C=u.sender,b=u.senderDisplayName,w=u.createdOn;if(M.id=u.id,M.messageid=void 0,M.clientmessageid=void 0,M.deliveryMode=void 0,M.properties={},M.content=g||"",M.properties.tags=h&&h.tags?h.tags:[],M.tags=h&&h.tags?h.tags.replace(/\"/g,"").split(",").filter(function(B){return B.length>0}):[],M.timestamp=w,M.messageType=m.MessageType.UserMessage,M.sender={id:C.communicationUserId,displayName:b,type:m.PersonType.Bot},h&&h.amsMetadata&&h.amsReferences||h.amsreferences)try{var I=JSON.parse(h.amsMetadata),P=JSON.parse(h.amsreferences||h.amsReferences),k=I[0],O=k.fileName,V=k.contentType;M.fileMetadata={},M.fileMetadata.fileSharingProtocolType=0,M.fileMetadata.id=P[0],M.fileMetadata.name=O,M.fileMetadata.size=0,M.fileMetadata.type=V,M.fileMetadata.url=""}catch(B){}}else M.id=u.clientmessageid,M=p({},u);return M}},838:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=E(2235);L.default=function(m){return void 0===m&&(m=!1),p.default.setDebug(m),p.default}},1775:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.getDirectLineCDNUrl=L.getACSAdapterCDNUrl=L.getIC3AdapterCDNUrl=L.getIC3ClientCDNUrl=void 0;var p=E(4151),N=function(v){return void 0===v&&(v=p.ic3ClientVersion),"https://comms.omnichannelengagementhub.com/release/"+v+"/Scripts/SDK/SDK.min.js"};L.getIC3ClientCDNUrl=N;var m=function(v){return void 0===v&&(v=p.webChatIC3AdapterVersion),"https://webchatic3.blob.core.windows.net/webchat-ic3adapter/"+v+"/botframework-webchat-adapter-ic3.production.min.js"};L.getIC3AdapterCDNUrl=m;var R=function(v){return void 0===v&&(v=p.webChatACSAdapterVersion),"https://unpkg.com/acs_webchat-chat-adapter@"+v+"/dist/chat-adapter.js"};L.getACSAdapterCDNUrl=R;var u=function(v){return void 0===v&&(v=p.webChatDirectLineVersion),"https://unpkg.com/botframework-directlinejs@"+v+"/dist/directline.js"};L.getDirectLineCDNUrl=u,L.default={getIC3ClientCDNUrl:N,getIC3AdapterCDNUrl:m,getACSAdapterCDNUrl:R,getDirectLineCDNUrl:u}},8290:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.defaultLocaleString=L.defaultLocaleId=L.getLocaleIdFromString=L.getLocaleStringFromId=void 0;var E={1025:"ar-sa",1026:"bg-bg",1027:"ca-es",1029:"cs-cz",1030:"da-dk",1031:"de-de",1032:"el-gr",1033:"en-us",3082:"es-es",1061:"et-ee",1069:"eu-es",1035:"fi-fi",1036:"fr-fr",1110:"gl-es",1037:"he-il",1081:"hi-in",1050:"hr-hr",1038:"hu-hu",1057:"id-id",1040:"it-it",1041:"ja-jp",1087:"kk-kz",1042:"ko-kr",1063:"lt-lt",1062:"lv-lv",1086:"ms-my",1044:"nb-no",1043:"nl-nl",1045:"pl-pl",1046:"pt-br",2070:"pt-pt",1048:"ro-ro",1049:"ru-ru",1051:"sk-sk",1060:"sl-si",3098:"sr-cyrl-cs",2074:"sr-latn-cs",1053:"sv-se",1054:"th-th",1055:"tr-tr",1058:"uk-ua",1066:"vi-vn",2052:"zh-cn",3076:"zh-hk",1028:"zh-tw"};L.getLocaleStringFromId=function(p){var N=Object.keys(E).find(function(m){return m===p});return N?E[N]:L.defaultLocaleString},L.getLocaleIdFromString=function(p){var N=Object.keys(E).find(function(m){return E[m]===p});return null!=N?N:L.defaultLocaleId},L.defaultLocaleId="1033",L.defaultLocaleString="en-us"},6032:function(Y,L,E){"use strict";var p=this&&this.__awaiter||function(u,v,M,A){return new(M||(M=Promise))(function(g,h){function C(I){try{w(A.next(I))}catch(P){h(P)}}function b(I){try{w(A.throw(I))}catch(P){h(P)}}function w(I){I.done?g(I.value):function(g){return g instanceof M?g:new M(function(h){h(g)})}(I.value).then(C,b)}w((A=A.apply(u,v||[])).next())})},N=this&&this.__generator||function(u,v){var A,T,g,h,M={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return h={next:C(0),throw:C(1),return:C(2)},"function"==typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h;function C(w){return function(I){return function(w){if(A)throw new TypeError("Generator is already executing.");for(;M;)try{if(A=1,T&&(g=2&w[0]?T.return:w[0]?T.throw||((g=T.return)&&g.call(T),0):T.next)&&!(g=g.call(T,w[1])).done)return g;switch(T=0,g&&(w=[2&w[0],g.value]),w[0]){case 0:case 1:g=w;break;case 4:return M.label++,{value:w[1],done:!1};case 5:M.label++,T=w[1],w=[0];continue;case 7:w=M.ops.pop(),M.trys.pop();continue;default:if(!(g=(g=M.trys).length>0&&g[g.length-1])&&(6===w[0]||2===w[0])){M=0;continue}if(3===w[0]&&(!g||w[1]>g[0]&&w[1]<g[3])){M.label=w[1];break}if(6===w[0]&&M.label<g[1]){M.label=g[1],g=w;break}if(g&&M.label<g[2]){M.label=g[2],M.ops.push(w);break}g[2]&&M.ops.pop(),M.trys.pop();continue}w=v.call(u,M)}catch(I){w=[6,I],T=0}finally{A=g=0}if(5&w[0])throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}([w,I])}}};Object.defineProperty(L,"__esModule",{value:!0}),L.getLocationInfo=void 0;var m=E(9600),R=E(8098);L.getLocationInfo=function(u,v,M){return p(void 0,void 0,void 0,function(){var A;return N(this,function(T){return A=function(g,h){var C;console.error(g,h);try{C=JSON.stringify({Response:g,ExceptionalDetails:h})}catch(b){C=JSON.stringify({Response:g})}u.failScenario(m.default.GetGeolocation,{RequestId:M,ChatId:v,ExceptionDetails:C})},[2,new Promise(function(g,h){u.startScenario(m.default.GetGeolocation,{RequestId:M});var C={latitude:"",longitude:""};(R.default.isNode()||R.default.isReactNative()||!navigator.geolocation)&&(A("Unsupported"),g(C)),navigator.geolocation.getCurrentPosition(function(I){try{C.latitude=I.coords.latitude.toString(),C.longitude=I.coords.longitude.toString(),u.completeScenario(m.default.GetGeolocation,{RequestId:M,ChatId:v}),g(C)}catch(P){A("GetGeolocationFailed",P),g(C)}},function(I){A("GetGeolocationFailed",I),g(C)})})]})})}},2811:function(Y,L,E){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(g){for(var h,C=1,b=arguments.length;C<b;C++)for(var w in h=arguments[C])Object.prototype.hasOwnProperty.call(h,w)&&(g[w]=h[w]);return g}).apply(this,arguments)};Object.defineProperty(L,"__esModule",{value:!0}),L.createCallingSDKLogger=L.createACSAdapterLogger=L.createACSClientLogger=L.createOCSDKLogger=L.createIC3ClientLogger=L.CallingSDKLogger=L.ACSAdapterLogger=L.ACSClientLogger=L.OCSDKLogger=L.IC3ClientLogger=void 0;var N=E(7095),m=E(3037),R=E(1247),u=function(){function g(h){this.omnichannelConfig=h,this.debug=!1,this.runtimeId="",this.requestId="",this.chatId="",this.telemetry=null,this.debug=!1}return g.prototype.setDebug=function(h){this.debug=h},g.prototype.setRuntimeId=function(h){this.runtimeId=h},g.prototype.setRequestId=function(h){this.requestId=h},g.prototype.setChatId=function(h){this.chatId=h},g.prototype.useTelemetry=function(h){this.debug&&console.log("[IC3ClientLogger][useTelemetry]"),this.telemetry=h},g.prototype.logClientSdkTelemetryEvent=function(h,C){var b,w,I,P;this.debug&&console.log("[IC3ClientLogger][logClientSdkTelemetryEvent]["+h+"]"),this.debug&&console.log(C);var k={ChatSDKRuntimeId:this.runtimeId,OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,RequestId:this.requestId,ChatId:this.chatId},O=p(p({},C),{ExceptionDetails:C.ExceptionDetails?JSON.stringify(C.ExceptionDetails):""});switch(h){case N.default.DEBUG:null===(b=this.telemetry)||void 0===b||b.debug(p(p({},k),O),m.default.IC3CLIENT);break;case N.default.WARN:null===(w=this.telemetry)||void 0===w||w.warn(p(p({},k),O),m.default.IC3CLIENT);break;case N.default.ERROR:null===(I=this.telemetry)||void 0===I||I.error(p(p({},k),O),m.default.IC3CLIENT);break;case N.default.INFO:default:null===(P=this.telemetry)||void 0===P||P.info(p(p({},k),O),m.default.IC3CLIENT)}},g}();L.IC3ClientLogger=u;var v=function(){function g(h){this.omnichannelConfig=h,this.debug=!1,this.runtimeId="",this.requestId="",this.chatId="",this.telemetry=null,this.debug=!1}return g.prototype.setDebug=function(h){this.debug=h},g.prototype.setRuntimeId=function(h){this.runtimeId=h},g.prototype.setRequestId=function(h){this.requestId=h},g.prototype.setChatId=function(h){this.chatId=h},g.prototype.useTelemetry=function(h){this.debug&&console.log("[OCSDKLogger][useTelemetry]"),this.telemetry=h},g.prototype.logClientSdkTelemetryEvent=function(h,C){var b,w,I,P;this.debug&&console.log("[OCSDKLogger][logClientSdkTelemetryEvent]["+h+"]"),this.debug&&console.log(C);var k={ChatSDKRuntimeId:this.runtimeId,OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,RequestId:this.requestId,ChatId:this.chatId},O=p(p({},C),{ExceptionDetails:C.ExceptionDetails?JSON.stringify(C.ExceptionDetails):""});switch(h){case N.default.DEBUG:null===(b=this.telemetry)||void 0===b||b.debug(p(p({},k),O),m.default.OCSDK);break;case N.default.WARN:null===(w=this.telemetry)||void 0===w||w.warn(p(p({},k),O),m.default.OCSDK);break;case N.default.ERROR:null===(I=this.telemetry)||void 0===I||I.error(p(p({},k),O),m.default.OCSDK);break;case N.default.INFO:default:null===(P=this.telemetry)||void 0===P||P.info(p(p({},k),O),m.default.OCSDK)}},g}();L.OCSDKLogger=v;var M=function(){function g(h){this.omnichannelConfig=h,this.debug=!1,this.runtimeId="",this.requestId="",this.chatId="",this.telemetry=null,this.scenarioMarker=null,this.debug=!1,this.scenarioMarker=new R.default(h),this.scenarioMarker.setScenarioType(m.default.ACSCLIENT)}return g.prototype.setDebug=function(h){var C;this.debug=h,null===(C=this.scenarioMarker)||void 0===C||C.setDebug(h)},g.prototype.setRuntimeId=function(h){var C;this.runtimeId=h,null===(C=this.scenarioMarker)||void 0===C||C.setRuntimeId(h)},g.prototype.setRequestId=function(h){this.requestId=h},g.prototype.setChatId=function(h){this.chatId=h},g.prototype.useTelemetry=function(h){var C;this.debug&&console.log("[ACSClientLogger][useTelemetry]"),this.telemetry=h,null===(C=this.scenarioMarker)||void 0===C||C.useTelemetry(this.telemetry)},g.prototype.logClientSdkTelemetryEvent=function(h,C){var b,w,I,P;this.debug&&console.log("[ACSClientLogger][logClientSdkTelemetryEvent]["+h+"]"),this.debug&&console.log(C);var k={ChatSDKRuntimeId:this.runtimeId,OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,RequestId:this.requestId,ChatId:this.chatId},O=p(p({},C),{ExceptionDetails:C.ExceptionDetails?JSON.stringify(C.ExceptionDetails):""});switch(h){case N.default.DEBUG:null===(b=this.telemetry)||void 0===b||b.debug(p(p({},k),O),m.default.ACSCLIENT);break;case N.default.WARN:null===(w=this.telemetry)||void 0===w||w.warn(p(p({},k),O),m.default.ACSCLIENT);break;case N.default.ERROR:null===(I=this.telemetry)||void 0===I||I.error(p(p({},k),O),m.default.ACSCLIENT);break;case N.default.INFO:default:null===(P=this.telemetry)||void 0===P||P.info(p(p({},k),O),m.default.ACSCLIENT)}},g.prototype.startScenario=function(h,C){var b;void 0===C&&(C={}),null===(b=this.scenarioMarker)||void 0===b||b.startScenario(h,p(p({},{RequestId:this.requestId,ChatId:this.chatId}),C))},g.prototype.failScenario=function(h,C){var b;void 0===C&&(C={}),null===(b=this.scenarioMarker)||void 0===b||b.failScenario(h,p(p({},{RequestId:this.requestId,ChatId:this.chatId}),C))},g.prototype.completeScenario=function(h,C){var b;void 0===C&&(C={}),null===(b=this.scenarioMarker)||void 0===b||b.completeScenario(h,p(p({},{RequestId:this.requestId,ChatId:this.chatId}),C))},g}();L.ACSClientLogger=M;var A=function(){function g(h){this.omnichannelConfig=h,this.debug=!1,this.runtimeId="",this.requestId="",this.chatId="",this.telemetry=null,this.scenarioMarker=null,this.debug=!1,this.scenarioMarker=new R.default(h),this.scenarioMarker.setScenarioType(m.default.ACSADAPTER)}return g.prototype.setDebug=function(h){var C;this.debug=h,null===(C=this.scenarioMarker)||void 0===C||C.setDebug(h)},g.prototype.setRuntimeId=function(h){var C;this.runtimeId=h,null===(C=this.scenarioMarker)||void 0===C||C.setRuntimeId(this.runtimeId)},g.prototype.setRequestId=function(h){this.requestId=h},g.prototype.setChatId=function(h){this.chatId=h},g.prototype.useTelemetry=function(h){var C;this.debug&&console.log("[ACSAdapterLogger][useTelemetry]"),this.telemetry=h,null===(C=this.scenarioMarker)||void 0===C||C.useTelemetry(this.telemetry)},g.prototype.logEvent=function(h,C){var b,w,I,P;this.debug&&console.log("[ACSAdapterLogger][logClientSdkTelemetryEvent]["+h+"]"),this.debug&&console.log(C);var k={ChatSDKRuntimeId:this.runtimeId,OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,RequestId:this.requestId,ChatId:this.chatId},O=p(p({},C),{ExceptionDetails:C.ExceptionDetails?JSON.stringify(C.ExceptionDetails):""});switch(h){case N.default.DEBUG:null===(b=this.telemetry)||void 0===b||b.debug(p(p({},k),O),m.default.ACSADAPTER);break;case N.default.WARN:null===(w=this.telemetry)||void 0===w||w.warn(p(p({},k),O),m.default.ACSADAPTER);break;case N.default.ERROR:null===(I=this.telemetry)||void 0===I||I.error(p(p({},k),O),m.default.ACSADAPTER);break;case N.default.INFO:default:null===(P=this.telemetry)||void 0===P||P.info(p(p({},k),O),m.default.ACSADAPTER)}},g.prototype.startScenario=function(h,C){var b;void 0===C&&(C={}),null===(b=this.scenarioMarker)||void 0===b||b.startScenario(h,p(p({},{RequestId:this.requestId,ChatId:this.chatId}),C))},g.prototype.failScenario=function(h,C){var b;void 0===C&&(C={}),null===(b=this.scenarioMarker)||void 0===b||b.failScenario(h,p(p({},{RequestId:this.requestId,ChatId:this.chatId}),C))},g.prototype.completeScenario=function(h,C){var b;void 0===C&&(C={}),null===(b=this.scenarioMarker)||void 0===b||b.completeScenario(h,p(p({},{RequestId:this.requestId,ChatId:this.chatId}),C))},g}();L.ACSAdapterLogger=A;var T=function(){function g(h){this.omnichannelConfig=h,this.debug=!1,this.runtimeId="",this.requestId="",this.chatId="",this.telemetry=null,this.debug=!1}return g.prototype.setDebug=function(h){this.debug=h},g.prototype.setRuntimeId=function(h){this.runtimeId=h},g.prototype.setRequestId=function(h){this.requestId=h},g.prototype.setChatId=function(h){this.chatId=h},g.prototype.useTelemetry=function(h){this.debug&&console.log("[CallingSDKLogger][useTelemetry]"),this.telemetry=h},g.prototype.logCallingSdkTelemetryEvent=function(h,C){var b,w,I,P;this.debug&&console.log("[CallingSDKLogger][logClientSdkTelemetryEvent]["+h+"]"),this.debug&&console.log(C);var k={ChatSDKRuntimeId:this.runtimeId,OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,RequestId:this.requestId,ChatId:this.chatId},O=p(p({},C),{ExceptionDetails:C.ExceptionDetails?JSON.stringify(C.ExceptionDetails):""});switch(h){case N.default.DEBUG:null===(b=this.telemetry)||void 0===b||b.debug(p(p({},k),O),m.default.CALLINGSDK);break;case N.default.WARN:null===(w=this.telemetry)||void 0===w||w.warn(p(p({},k),O),m.default.CALLINGSDK);break;case N.default.ERROR:null===(I=this.telemetry)||void 0===I||I.error(p(p({},k),O),m.default.CALLINGSDK);break;case N.default.INFO:default:null===(P=this.telemetry)||void 0===P||P.info(p(p({},k),O),m.default.CALLINGSDK)}},g}();L.CallingSDKLogger=T,L.createIC3ClientLogger=function(g,h){void 0===h&&(h=!1);var C=new u(g);return C.setDebug(h),C},L.createOCSDKLogger=function(g,h){void 0===h&&(h=!1);var C=new v(g);return C.setDebug(h),C},L.createACSClientLogger=function(g,h){void 0===h&&(h=!1);var C=new M(g);return C.setDebug(h),C},L.createACSAdapterLogger=function(g,h){void 0===h&&(h=!1);var C=new A(g);return C.setDebug(h),C},L.createCallingSDKLogger=function(g,h){void 0===h&&(h=!1);var C=new T(g);return C.setDebug(h),C}},8098:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.isReactNative=L.isNode=L.isBrowser=void 0,L.isBrowser=function(){return"undefined"!=typeof window&&void 0!==window.document},L.isNode=function(){return"undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node},L.isReactNative=function(){return"undefined"!=typeof navigator&&"ReactNative"==navigator.product},L.default={isBrowser:L.isBrowser,isNode:L.isNode,isReactNative:L.isReactNative}},1584:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=function(p){return new Promise(function(N){return setTimeout(N,p)})}},4674:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.resolveChatAdapterUrl=L.resolveIC3ClientUrl=void 0;var p=E(8191),N=E(7474),m=E(1775),R=function(T){return T.ic3Config&&"ic3ClientCDNUrl"in T.ic3Config?T.ic3Config.ic3ClientCDNUrl:T.ic3Config&&"ic3ClientVersion"in T.ic3Config?m.default.getIC3ClientCDNUrl(T.ic3Config.ic3ClientVersion):m.default.getIC3ClientCDNUrl()};L.resolveIC3ClientUrl=R;var A=function(T,g,h){if(h&&![N.default.ACS,N.default.IC3,N.default.DirectLine].includes(h))throw new Error("ChatAdapter for protocol "+h+" currently not supported");return h===N.default.DirectLine?function(T){return T.chatAdapterConfig&&"webChatDirectLineCDNUrl"in T.chatAdapterConfig?T.chatAdapterConfig.webChatDirectLineCDNUrl:T.chatAdapterConfig&&"webChatDirectLineVersion"in T.chatAdapterConfig?m.default.getDirectLineCDNUrl(T.chatAdapterConfig.webChatDirectLineVersion):m.default.getDirectLineCDNUrl()}(T):h===N.default.ACS||g===p.default.V2?function(T){return T.chatAdapterConfig&&"webChatACSAdapterCDNUrl"in T.chatAdapterConfig?T.chatAdapterConfig.webChatACSAdapterCDNUrl:T.chatAdapterConfig&&"webChatACSAdapterVersion"in T.chatAdapterConfig?m.default.getACSAdapterCDNUrl(T.chatAdapterConfig.webChatACSAdapterVersion):m.default.getACSAdapterCDNUrl()}(T):h===N.default.IC3||g===p.default.V1?function(T){return T.chatAdapterConfig&&"webChatIC3AdapterCDNUrl"in T.chatAdapterConfig?T.chatAdapterConfig.webChatIC3AdapterCDNUrl:T.chatAdapterConfig&&"webChatIC3AdapterVersion"in T.chatAdapterConfig?m.default.getIC3AdapterCDNUrl(T.chatAdapterConfig.webChatIC3AdapterVersion):m.default.getIC3AdapterCDNUrl()}(T):""};L.resolveChatAdapterUrl=A,L.default={resolveIC3ClientUrl:R,resolveChatAdapterUrl:A}},9425:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.isCustomerMessage=L.isSystemMessage=void 0;var p=E(3372),N=E(8953);L.isSystemMessage=function(m){var u=m.properties,v=m.messageType===p.default.UserMessage&&u&&u.tags&&u.tags.includes("system"),M=m.tags&&m.tags.includes("system");return v||M||!1},L.isCustomerMessage=function(m){var R=m.sender;return R&&R.id&&R.id.includes("contacts/8:")||R&&R.displayName&&R.displayName===N.default.Customer||!1}},7616:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=["orgUrl","orgId","widgetId"];L.default=function(N){if(!N)throw new Error("OmnichannelConfiguration not found");for(var m=Object.keys(N),R=0,u=E;R<u.length;R++){var v=u[R];if(!m.includes(v))throw new Error("Missing '"+v+"' in OmnichannelConfiguration")}}},641:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.defaultChatSDKConfig=void 0;var N={dataMasking:{disable:!1,maskingCharacter:"#"},telemetry:{disable:!1,ariaTelemetryKey:E(4151).ariaTelemetryKey},persistentChat:{disable:!0,tokenUpdateTime:216e5},chatReconnect:{disable:!0}};L.defaultChatSDKConfig=N,L.default=function(v){v.dataMasking&&function(v){"boolean"!=typeof v.disable&&(v.disable=N.dataMasking.disable),("string"!=typeof v.maskingCharacter||1!==v.maskingCharacter.length)&&(v.maskingCharacter=N.dataMasking.maskingCharacter)}(v.dataMasking),v.persistentChat&&function(v){("number"!=typeof v.tokenUpdateTime||!v.tokenUpdateTime)&&(v.tokenUpdateTime=N.persistentChat.tokenUpdateTime)}(v.persistentChat)}},5145:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=function(){function p(){}return p.read="read",p}();L.default=E},3865:function(Y,L,E){"use strict";var p=this&&this.__awaiter||function(b,w,I,P){return new(I||(I=Promise))(function(O,V){function U(W){try{H(P.next(W))}catch(te){V(te)}}function B(W){try{H(P.throw(W))}catch(te){V(te)}}function H(W){W.done?O(W.value):function(O){return O instanceof I?O:new I(function(V){V(O)})}(W.value).then(U,B)}H((P=P.apply(b,w||[])).next())})},N=this&&this.__generator||function(b,w){var P,k,O,V,I={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return V={next:U(0),throw:U(1),return:U(2)},"function"==typeof Symbol&&(V[Symbol.iterator]=function(){return this}),V;function U(H){return function(W){return function(H){if(P)throw new TypeError("Generator is already executing.");for(;I;)try{if(P=1,k&&(O=2&H[0]?k.return:H[0]?k.throw||((O=k.return)&&O.call(k),0):k.next)&&!(O=O.call(k,H[1])).done)return O;switch(k=0,O&&(H=[2&H[0],O.value]),H[0]){case 0:case 1:O=H;break;case 4:return I.label++,{value:H[1],done:!1};case 5:I.label++,k=H[1],H=[0];continue;case 7:H=I.ops.pop(),I.trys.pop();continue;default:if(!(O=(O=I.trys).length>0&&O[O.length-1])&&(6===H[0]||2===H[0])){I=0;continue}if(3===H[0]&&(!O||H[1]>O[0]&&H[1]<O[3])){I.label=H[1];break}if(6===H[0]&&I.label<O[1]){I.label=O[1],O=H;break}if(O&&I.label<O[2]){I.label=O[2],I.ops.push(H);break}O[2]&&I.ops.pop(),I.trys.pop();continue}H=w.call(b,I)}catch(W){H=[6,W],k=0}finally{P=O=0}if(5&H[0])throw H[1];return{value:H[0]?H[1]:void 0,done:!0}}([H,W])}}};Object.defineProperty(L,"__esModule",{value:!0});var m=E(501),R=E(6849),u=E(5874),v=E(2915),M=E(1927),A=E(6648),T=E(5145),g=E(6355),h=E(8636),C=function(){function b(){}return b.getDocumentTypeFromContentType=function(w){return h.default.isDocumentTypeImage(w)?m.default.DocumentTypeImage:m.default.DocumentTypeFile},b.createNewDocument=function(w,I,P){return p(this,void 0,void 0,function(){var O,V,U,B,H;return N(this,function(W){return(H={})[w]=[T.default[T.default.read]],O={filename:I.name,permissions:H,type:b.getDocumentTypeFromContentType(I.type)},V=M.default.getAmsObjectsUrl(P.RegionGtms),(U=A.default.getDefaultAMSHeaders(P.SkypeToken))[R.default.ContentTypeHeader]=m.default.ContentTypeJson,B={data:JSON.stringify(O),headers:U,type:u.default.POST,url:V},[2,v.HttpClient.MakeRequest(B)]})})},b.uploadDocument=function(w,I,P){return p(this,void 0,void 0,function(){var k,O,V;return N(this,function(B){return console.log("AmsHelper.ts uploadDocument(): "+w+", "+I+", "+P),k=h.default.isDocumentTypeImage(I.type),O=M.default.getAmsObjectContentUrl(w,P.RegionGtms,k),V=A.default.getDefaultAMSHeaders(P.SkypeToken),[2,v.HttpClient.MakeRequest({data:I.data,headers:V,processData:!1,type:u.default.PUT,url:O})]})})},b.getFileStatus=function(w,I){var P=h.default.isImageType(w.type),k=M.default.getAmsStatusUrl(w.id,I.RegionGtms,P);return this.getViewStatus(k,I).then(function(O){return O.scan&&O.scan.status===m.default.Malware?g.default.Error:O.view_state===m.default.Ready?g.default.Success:O.scan&&O.scan.status===m.default.InProgress||O.view_state&&O.view_state!==m.default.Failed?g.default.InProgress:g.default.Error}).catch(function(){return Promise.reject({})})},b.downloadDocument=function(w,I){var P=this,k=h.default.isImageType(w.type),O=M.default.getAmsStatusUrl(w.id,I.RegionGtms,k);return new Promise(function(V){P.getViewUri(O,I).then(function(U){var B=new Headers;return B.append("Authorization","skype_token "+I.SkypeToken),B.append("X-MS-Client-Version",m.default.ClientVersion),k&&(B.append("accept",m.default.AMSAcceptHeaderValue),B.append("Accept-Encoding",m.default.AMSAcceptEncodingHeaderValue)),fetch(U,{headers:B,method:u.default.GET}).then(function(W){V(W.blob())}).catch(function(){return Promise.reject({})})})})},b.getViewUri=function(w,I){var P=this;return this.getViewStatus(w,I).then(function(k){return!k.view_location||k.view_state===m.default.Failed||k.scan&&k.scan.status===m.default.Malware?Promise.reject({}):k.view_state&&k.view_state!==m.default.Ready?P.getViewUri(w,I):k.content_state===m.default.Expired?Promise.reject({}):Promise.resolve(k.view_location)}).catch(function(){return Promise.reject("")})},b.getViewStatus=function(w,I){var P=this;return console.log("AmsHelper.ts getViewStatus(): "+w+", "+I),new Promise(function(k){setTimeout(k,m.default.DelayForAms)}).then(function(){var k=A.default.getDefaultAMSViewHeaders(I.SkypeToken);return v.HttpClient.MakeRequest({headers:k,type:u.default.GET,url:w}).then(function(V){return V.status_location&&!V.view_state?P.getViewStatus(V.status_location,I):Promise.resolve(V)}).catch(function(V){return Promise.reject(401===V.status||403===V.status?"unauthorized":{})})})},b}();L.default=C},501:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=function(){function p(){}return p.NewMessageEvent="NewMessage",p.MessageUpdateEvent="MessageUpdate",p.ThreadUpdateEvent="ThreadUpdate",p.ConversationUpdateEvent="ConversationUpdate",p.HttpLongPoll="HttpLongPoll",p.ContentTypeJson="application/json",p.ContentTypeTextPlain="text/plain;charset=UTF-8",p.ContentTypeForm="application/x-www-form-urlencoded",p.RedirectAs404="redirectAs404",p.NoCache="no-cache",p.User="user",p.Web="web",p.ClientInfoValue="os=Windows; osVer=10; proc=Win32; lcid=en-us; deviceType=1; country=IN; clientName=swc; clientVer=912/0.106.0.34//swc",p.TextPlainMimeType="text/plain",p.SwcName="SWC",p.Image="image",p.ClientVersion="937/0.123.0.9",p.DelayForAms=50,p.Reset_Flag="reset_ic3_needed",p.Malware="malware",p.Ready="ready",p.InProgress="in progress",p.Failed="failed",p.Expired="expired",p.ImageView="imgpsh_fullsize_anim",p.FileView="original",p.DocumentTypeImage="pish/image",p.DocumentTypeFile="sharing/file",p.ImageContent="imgpsh",p.FileContent="original",p.AMSAcceptHeaderValue="image/webp,image/ *,*/*;q=0.8",p.AMSAcceptEncodingHeaderValue="gzip, deflate, sdch, br",p.AMSAuthorizationSkypeTokenValue="skype_token ",p.stabilizePollMaxRetryCount=50,p.timeBetweenStabilizingPoll=1e3,p.retryCount=2,p.retry404Count=3,p.retryOtherCount=3,p.liveStateRetryCount=3,p.timeBetweenOperationRetry=1e3,p.heartBeatDuration=3e4,p.endpointRequestLog="Endpoint request",p.subscriptionRequestLog="Subscription request",p.setPropertiesRequestLog="Set message properties request",p.unsubscribeRequestLog="Unsubscribe from endpoint request",p.pollRequestLog="Polling",p.oldInitializer="Old initializer",p.newInitializer="New Initializer",p.skypeTokenAuthURL="/v1/skypetokenauth",p.skypeTokenConstantForData="skypetoken=",p}();L.default=E},1927:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=E(501),N=E(6849),m=E(909),R=function(){function u(){}return u.getV2EndpointUrl=function(v,M){return M.chatService+"/v2/users/ME/endpoints/"+v},u.getThreadUrl=function(v,M){return M.chatService+"/v1/threads/"+v+"?view=msnp24Equivalent"},u.getMessagesUrl=function(v,M){return M.chatService+"/v1/users/ME/conversations/"+v+"/messages"},u.getBotMessagesUrl=function(v,M){return M.chatService+"/v1/agents/"+v+"/invoke"},u.getAmsObjectsUrl=function(v){return m.default.sanitizeUrlWithBackSlash(v.ams)+"v1/objects"},u.getAmsObjectContentUrl=function(v,M,A){void 0===A&&(A=!1);var T=A?p.default.ImageContent:p.default.FileContent;return m.default.sanitizeUrlWithBackSlash(M.ams)+"v1/objects/"+v+"/content/"+T},u.getAmsObjectViewUrl=function(v,M,A){void 0===A&&(A=!1);var T=A?p.default.ImageView:p.default.FileView;return m.default.sanitizeUrlWithBackSlash(M.ams)+"v1/objects/"+v+"/views/"+T},u.getAmsStatusUrl=function(v,M,A){void 0===A&&(A=!1);var T=A?p.default.ImageView:p.default.FileView;return m.default.sanitizeUrlWithBackSlash(M.ams)+"v1/objects/"+v+"/views/"+T+"/status"},u.getV1EndpointUrl=function(v){return v.chatService+"/v1/users/ME/endpoints"},u.getV1DeleteEndpointUrl=function(v,M){return v.chatService+"/v1/users/ME/endpoints/"+M},u.getV1SubscriptionUrl=function(v){return v.chatService+"/v1/users/ME/endpoints/SELF/subscriptions"},u.getV1PollUrl=function(v,M){return v.chatService+"/v1/users/ME/endpoints/SELF/subscriptions/"+M+"/poll"},u.getV1SetPropertiesUrl=function(v){return v.chatService+"/v1/users/ME/endpoints/SELF/properties?name="+N.default.SetEndpointProperty},u}();L.default=R},8636:function(Y,L,E){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(w){for(var I,P=1,k=arguments.length;P<k;P++)for(var O in I=arguments[P])Object.prototype.hasOwnProperty.call(I,O)&&(w[O]=I[O]);return w}).apply(this,arguments)};Object.defineProperty(L,"__esModule",{value:!0});var N=E(501),m=E(2900),R=E(4694),u=E(3787),v=E(448),M=E(3207),A=E(3372),T=E(4352),g=E(1927),h=E(7708),C=E(909),b=function(){function w(){}return w.createMessageData=function(I){var k=I.content,O=w.createBaseMessageData(I.contentType===v.default.Text?M.default.Text:M.default.RichTextHtml,I.contentType.toString(),k);return O.properties=this.getMessageProperties(I),C.default.isNullOrUndefined(I.sender.displayName)||(O.imdisplayname=I.sender.displayName),O},w.createBaseMessageData=function(I,P,k){return{"Has-Mentions":"false",clientmessageid:Date.now().toString(),composetime:(new Date).toISOString(),content:k,contenttype:P,messagetype:I}},w.getMessageProperties=function(I){var P={};if(P.deliveryMode=I.deliveryMode.toString(),I.tags){var k=[];I.tags.forEach(function(O){k.push(O)}),P.tags=k.join()}return P},w.createTypingStatusThreadMessageData=function(I,P){var k="";switch(I){case h.default.Typing:k=M.default.ControlTyping;break;case h.default.ClearTyping:k=M.default.ControlClearTyping}var O=w.createBaseMessageData(k,v.default.Text,"");return C.default.isNullOrUndefined(P)||(O=p(p({},P),O)),O},w.createBotMessageData=function(I,P){return JSON.stringify({conversation:{id:I},value:P})},w.createFileMessage=function(I,P,k){var O=M.default.Text,V=v.default.Text.toString().toLowerCase(),U=w.createBaseMessageData(O,V.toString(),"");return U.amsreferences=JSON.stringify([I.id]),U.properties=JSON.stringify(this.createFileMessageProperties(I,P,k)),C.default.isNullOrUndefined(k.sender.displayName)||(U.imdisplayname=k.sender.displayName),U},w.createFileMessageProperties=function(I,P,k){var O={};if(O.deliveryMode=k.deliveryMode.toString(),O.files=JSON.stringify([this.createFileProperty(I,P)]),O.importance="",O.subject="",k.tags){var V=[];k.tags.forEach(function(U){V.push(U)}),O.tags=V.join()}return O},w.createFileProperty=function(I,P){var k=!!w.isDocumentTypeImage(I.type);return{"@type":"http://schema.skype.com/File",type:I.type,itemid:"",baseUrl:"",providerData:"",version:2,id:I.id,title:I.name,state:"active",objectUrl:g.default.getAmsObjectViewUrl(I.id,P.RegionGtms,k),fileName:I.name,fileType:w.getNameAndExtension(I.name).extension,botFileProperties:{url:g.default.getAmsObjectViewUrl(I.id,P.RegionGtms,k)},fileInfo:{fileUrl:g.default.getAmsObjectContentUrl(I.id,P.RegionGtms,k),siteUrl:"",serverRelativeUrl:""},filePreview:{previewUrl:""}}},w.getNameAndExtension=function(I){var P=(I||"").split("."),k="",O="";return P.length>1?(O=P.pop().toLowerCase(),k=P.join(".")):(O="",k=P[0]),{name:k,extension:O}},w.createIRawMessage=function(I,P,k){var V,U,O={clientmessageid:I.clientmessageid,content:I.content,contentType:w.getMessageContentType(I),deliveryMode:C.default.isNullOrUndefined(I.properties)||I.properties.deliveryMode!==m.default.Bridged?m.default.Unbridged:m.default.Bridged,messageType:w.getMessageType(I),properties:I.properties,sender:{displayName:I.imdisplayname,id:I.from,type:w.getPersonType(I.from)},timestamp:new Date(Date.parse(I.originalarrivaltime))};(k&&(O.resourceType=k),C.default.isNullOrUndefined(I.properties)||C.default.isNullOrEmptyString(I.properties.tags))||(V=I.properties.tags.split(","),O.tags=V);if(!C.default.isNullOrUndefined(I.properties)&&!C.default.isNullOrEmptyString(I.properties.files)&&(U=JSON.parse(I.properties.files)).length>0){var B=U[0].id;C.default.isNullOrUndefined(B)&&I.amsreferences&&(B=I.amsreferences[0]);var H=w.getFileUrl(U[0],B,P);O.fileMetadata={fileSharingProtocolType:R.default.AmsBasedFileSharing,id:B,name:U[0].fileName,size:U[0].version,type:U[0].fileType,url:H}}return O},w.createIRawThread=function(I){return{id:I.id,members:I.members,messages:I.messages,properties:I.properties,rosterVersion:I.rosterVersion,type:I.type,version:I.version}},w.getConversationIdFromUrl=function(I){var P=I&&I.match(/\/(\d+:[^\/]*)[\/]?/);return P&&P[1]?P[1]:void 0},w.isSystemMessage=function(I){var P=!1;return C.default.isNullOrEmptyString(I.messagetype)||(P=w.getSystemMessageTypes().reduce(function(k,O){return k||0===I.messagetype.toLowerCase().indexOf(O.toLowerCase())},P)),P},w.getPersonType=function(I){var P=T.default.Unknown,k=I.split("/").pop();return 0===k.indexOf("28:")?P=T.default.Bot:0===k.indexOf("19:")&&(P=T.default.User),P},w.isImageType=function(I){switch(I.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"bmp":case"tiff":case"jfif":return!0;default:return!1}},w.getMessageType=function(I){var P;switch(I.messagetype){case A.default.Typing:P=A.default.Typing;break;case A.default.ClearTyping:P=A.default.ClearTyping;break;default:P=A.default.UserMessage}return P},w.getMessageContentType=function(I){var k=I.contenttype?I.contenttype:I.messagetype;return k===M.default.Text.toLowerCase()||k.indexOf(N.default.TextPlainMimeType)>=0?v.default.Text:v.default.RichText},w.getSystemMessageTypes=function(){return["ThreadActivity"]},w.getFileUrl=function(I,P,k){var V,O=I.fileInfo;if(O&&O.fileUrl)V=O.fileUrl;else if(P){var U=w.isImageType(I.fileType);V=g.default.getAmsObjectContentUrl(P,k.RegionGtms,U)}return V},w.isDocumentTypeImage=function(I){return-1!==I.indexOf(N.default.Image)},w.getDomainRegexp=function(){return new RegExp(/^(https?:.+?\.microsoft\.com)/i)},w.parseDomain=function(I){var P=I.match(w.getDomainRegexp());return P?P[1]:null},w.parseChatServiceHostUrl=function(I){return w.parseDomain(I)},w.shouldRetryOnFailure=function(I){return I!==u.default.Accepted&&I!==u.default.Created},w}();L.default=b},909:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=E(6849),N=function(){function m(){}return m.isNullOrEmptyString=function(R){return m.isNullOrUndefined(R)||""===R},m.isNullOrUndefinedOrEmptyArray=function(R){return m.isNullOrUndefined(R)||0===R.length},m.isNullOrUndefined=function(R){return null==R},m.isPrimitiveString=function(R){return"string"==typeof R},m.convertStringToBoolean=function(R){return!m.isNullOrUndefined(R)&&"true"===R.toLowerCase()},m.sanitizeUrlWithBackSlash=function(R){return R.endsWith("/")?R:R+"/"},m.getRegistrationTokenValue=function(R){var u=R.match(/registrationToken=(.+); expires=(\d+)/);return u&&u.length>=2?p.default.RegistrationTokenHeaderValue+u[1]:""},m.addQueryParametersToPath=function(R,u){var v=R;if(!m.isNullOrUndefined(u))for(var M in v.indexOf("?")>=0||(v+="?"),u)if(u.hasOwnProperty(M)){var A=M+"="+u[M];"?"!==v[v.length-1]&&(A="&"+A),v+=A}return v},m.getResponseHeader=function(R,u){var v;return m.isNullOrUndefined(R)||(v=R.headers[u]),v},m.timer=function(){var R=(new Date).getTime();return{get milliSecondsElapsed(){return(new Date).getTime()-R}}},m.concatArrays=function(R,u){!m.isNullOrUndefined(R)&&!m.isNullOrUndefined(u)&&u.forEach(function(v){R.push(v)})},m}();L.default=N},1288:function(Y,L,E){"use strict";var p=this&&this.__awaiter||function(v,M,A,T){return new(A||(A=Promise))(function(h,C){function b(P){try{I(T.next(P))}catch(k){C(k)}}function w(P){try{I(T.throw(P))}catch(k){C(k)}}function I(P){P.done?h(P.value):function(h){return h instanceof A?h:new A(function(C){C(h)})}(P.value).then(b,w)}I((T=T.apply(v,M||[])).next())})},N=this&&this.__generator||function(v,M){var T,g,h,C,A={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return C={next:b(0),throw:b(1),return:b(2)},"function"==typeof Symbol&&(C[Symbol.iterator]=function(){return this}),C;function b(I){return function(P){return function(I){if(T)throw new TypeError("Generator is already executing.");for(;A;)try{if(T=1,g&&(h=2&I[0]?g.return:I[0]?g.throw||((h=g.return)&&h.call(g),0):g.next)&&!(h=h.call(g,I[1])).done)return h;switch(g=0,h&&(I=[2&I[0],h.value]),I[0]){case 0:case 1:h=I;break;case 4:return A.label++,{value:I[1],done:!1};case 5:A.label++,g=I[1],I=[0];continue;case 7:I=A.ops.pop(),A.trys.pop();continue;default:if(!(h=(h=A.trys).length>0&&h[h.length-1])&&(6===I[0]||2===I[0])){A=0;continue}if(3===I[0]&&(!h||I[1]>h[0]&&I[1]<h[3])){A.label=I[1];break}if(6===I[0]&&A.label<h[1]){A.label=h[1],h=I;break}if(h&&A.label<h[2]){A.label=h[2],A.ops.push(I);break}h[2]&&A.ops.pop(),A.trys.pop();continue}I=M.call(v,A)}catch(P){I=[6,P],g=0}finally{T=h=0}if(5&I[0])throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}([I,P])}}};Object.defineProperty(L,"__esModule",{value:!0});var m=E(2217),R=E(737),u=function(){function v(M){this.hostType=m.default.Page,this.id=(0,R.uuidv4)(),this.protocolType=M,this.newConversationMessageListeners={},this.threadUpdateListeners={},this.debug=!1}return v.prototype.setDebug=function(M){this.debug=M},v.prototype.joinConversation=function(M,A){var T=this;return this.onJoinConversation(M,A).then(function(g){return{disconnect:T.disconnectFromConversation.bind(T,g),downloadFile:T.downloadFile.bind(T,g),getFileStatus:T.getFileStatus.bind(T,g),getMembers:T.getMembers.bind(T,g),getMessages:T.getMessages.bind(T,g),id:g.id,indicateTypingStatus:T.indicateTypingStatus.bind(T,g),registerOnNewMessage:T.registerOnNewMessage.bind(T,g),registerOnThreadUpdate:T.registerOnThreadUpdate.bind(T,g),sendFileMessage:T.sendFileMessage.bind(T,g),sendMessage:T.sendMessage.bind(T,g),sendMessageToBot:T.sendMessageToBot.bind(T,g),uploadFile:T.uploadFile.bind(T,g),sendFileData:T.sendFileData.bind(T,g)}})},v.prototype.registerOnNewMessage=function(M,A){return p(this,void 0,void 0,function(){return N(this,function(T){return[2,Promise.resolve()]})})},v.prototype.registerOnThreadUpdate=function(M,A){return p(this,void 0,void 0,function(){return N(this,function(T){return[2,Promise.resolve()]})})},v.prototype.uploadFile=function(M,A,T){return Promise.resolve()},v.prototype.downloadFile=function(M,A){return this.debug&&console.debug("IC3Core/ClientBridge/downloadFile"),this.downloadFileData(M,A).then(function(T){if(T&&T.size)return T;var h=new Blob([new Uint8Array(T)]);return!h||0===h.size&&""===h.type?T:h})},v}();L.default=u},2518:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=E(333),N=E(2217),m=function(){function R(){}return R.getClientBridge=function(u){switch(u.hostType){case N.default.IFrame:throw new Error("Framed bridge not implemented for "+u.hostType+" in IC3Core");case N.default.Page:return new p.default(u.protocolType);default:throw new Error("Client bridge not implemented for "+u.hostType+" in IC3Core")}},R}();L.default=m},333:function(Y,L,E){"use strict";var A,p=this&&this.__extends||(A=function(T,g){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,C){h.__proto__=C}||function(h,C){for(var b in C)Object.prototype.hasOwnProperty.call(C,b)&&(h[b]=C[b])})(T,g)},function(T,g){if("function"!=typeof g&&null!==g)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function h(){this.constructor=T}A(T,g),T.prototype=null===g?Object.create(g):(h.prototype=g.prototype,new h)}),N=this&&this.__awaiter||function(A,T,g,h){return new(g||(g=Promise))(function(b,w){function I(O){try{k(h.next(O))}catch(V){w(V)}}function P(O){try{k(h.throw(O))}catch(V){w(V)}}function k(O){O.done?b(O.value):function(b){return b instanceof g?b:new g(function(w){w(b)})}(O.value).then(I,P)}k((h=h.apply(A,T||[])).next())})},m=this&&this.__generator||function(A,T){var h,C,b,w,g={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return w={next:I(0),throw:I(1),return:I(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function I(k){return function(O){return function(k){if(h)throw new TypeError("Generator is already executing.");for(;g;)try{if(h=1,C&&(b=2&k[0]?C.return:k[0]?C.throw||((b=C.return)&&b.call(C),0):C.next)&&!(b=b.call(C,k[1])).done)return b;switch(C=0,b&&(k=[2&k[0],b.value]),k[0]){case 0:case 1:b=k;break;case 4:return g.label++,{value:k[1],done:!1};case 5:g.label++,C=k[1],k=[0];continue;case 7:k=g.ops.pop(),g.trys.pop();continue;default:if(!(b=(b=g.trys).length>0&&b[b.length-1])&&(6===k[0]||2===k[0])){g=0;continue}if(3===k[0]&&(!b||k[1]>b[0]&&k[1]<b[3])){g.label=k[1];break}if(6===k[0]&&g.label<b[1]){g.label=b[1],b=k;break}if(b&&g.label<b[2]){g.label=b[2],g.ops.push(k);break}b[2]&&g.ops.pop(),g.trys.pop();continue}k=T.call(A,g)}catch(O){k=[6,O],C=0}finally{h=b=0}if(5&k[0])throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}([k,O])}}};Object.defineProperty(L,"__esModule",{value:!0});var R=E(1288),u=E(2217),v=E(9515),M=function(A){function T(g){var h=A.call(this,g)||this;return h.hostType=u.default.Page,h.protocolAdapter=new v.default("",h.hostType),h}return p(T,A),T.prototype.setup=function(g){return Promise.resolve()},T.prototype.update=function(g){return Promise.resolve()},T.prototype.onRegisterOnNewMessage=function(g){return Promise.resolve()},T.prototype.onRegisterOnThreadUpdate=function(g){return Promise.resolve()},T.prototype.initialize=function(g){return this.protocolAdapter.initialize(g)},T.prototype.dispose=function(){return this.protocolAdapter.dispose()},T.prototype.sendMessage=function(g,h){return this.protocolAdapter.sendMessage(g,h)},T.prototype.sendFileMessage=function(g,h,C){return this.protocolAdapter.sendFileMessage(g,h,C)},T.prototype.getMessages=function(g){return this.protocolAdapter.getMessages(g)},T.prototype.disconnectFromConversation=function(g){return this.protocolAdapter.disconnectFromConversation(g)},T.prototype.onJoinConversation=function(g,h){return this.protocolAdapter.joinConversation(g,h)},T.prototype.sendFileData=function(g,h,C){return this.protocolAdapter.sendFileData(g,h,C)},T.prototype.downloadFileData=function(g,h){return this.protocolAdapter.downloadFileData(g,h)},T.prototype.getFileStatus=function(g,h){return this.protocolAdapter.getFileStatus(g,h)},T.prototype.indicateTypingStatus=function(g,h,C){return this.protocolAdapter.indicateTypingStatus(g,h,C)},T.prototype.sendMessageToBot=function(g,h,C){return this.protocolAdapter.sendMessageToBot(g,h,C)},T.prototype.getMembers=function(g){return this.protocolAdapter.getMembers(g)},T.prototype.registerOnNewMessage=function(g,h){return N(this,void 0,void 0,function(){return m(this,function(C){return this.protocolAdapter.registerOnNewMessage(g,h),[2,Promise.resolve()]})})},T.prototype.registerOnThreadUpdate=function(g,h){return N(this,void 0,void 0,function(){return m(this,function(C){return this.protocolAdapter.registerOnThreadUpdate(g,h),[2,Promise.resolve()]})})},T.prototype.setDebug=function(g){void 0===g&&(g=!1),this.protocolAdapter.setDebug(g)},T}(R.default);L.default=M},1218:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=E(3865),N=E(501),m=E(4694),R=E(6355),u=E(2217),v=E(2915),M=E(5256),A=E(6849),T=E(5874),g=E(3671),h=E(752),C=E(448),b=E(3207),w=E(5655),I=E(6648),P=E(1927),k=E(8636),O=E(909),V=function(){function U(B){this.hostType=u.default.Page,this.protocolType=w.default.IC3V1SDK,this.id=B,this.conversations=[],this.newConversationMessageListeners={},this.threadUpdateListeners={},this.internalConversationsData={},this.liveStateFailureCount=0,this.debug=!1}return U.prototype.startPolling=function(){this.ic3Initializer&&this.ic3Initializer.startPolling()},U.prototype.stopPolling=function(){this.ic3Initializer&&this.ic3Initializer.stopPolling()},U.prototype.setup=function(B){return this.logger=B.logger,v.HttpClient.setLogger(this.logger),Promise.resolve()},U.prototype.initialize=function(B){return this.setupSession(B),Promise.resolve()},U.prototype.update=function(B){return Promise.resolve()},U.prototype.dispose=function(){return this.conversations=[],this.newConversationMessageListeners={},this.threadUpdateListeners={},this.internalConversationsData={},Promise.resolve()},U.prototype.joinConversation=function(B,H){var W;void 0===H&&(H=!0);var te=O.default.timer(),$={id:B};return-1===this.conversations.findIndex(function(x){return x.id===$.id})&&(this.conversations.push($),this.newConversationMessageListeners[$.id]=this.newConversationMessageListeners[$.id]||[],this.threadUpdateListeners[$.id]=this.threadUpdateListeners[$.id]||[]),null===(W=this.logger)||void 0===W||W.log(h.default.INFO,g.default.JoinConversation,{ElapsedTimeInMilliseconds:te.milliSecondsElapsed,EndpointUrl:this.EndpointUrl,EndpointId:this.EndpointId}),!O.default.isNullOrUndefined(H)&&!0===H&&this.sendHeartBeat($.id),Promise.resolve($)},U.prototype.sendLiveState=function(B){var H=this;this.debug&&console.debug("IC3Core/sendLiveState");var $=k.default.createBaseMessageData(b.default.LiveState,C.default.Text,"");return this.sendMessageToIC3(B,$).then(function(){return H.liveStateFailureCount=0,Promise.resolve()}).catch(function(pe){var x;H.liveStateFailureCount++,H.liveStateFailureCount>=N.default.liveStateRetryCount&&(null===(x=H.logger)||void 0===x||x.log(h.default.ERROR,g.default.SendLiveStateFailure,{ExceptionDetails:pe,EndpointUrl:H.EndpointUrl,EndpointId:H.EndpointId}),H.stopHeartBeat(),H.liveStateFailureCount=0)})},U.prototype.sendHeartBeat=function(B){this.heartBeatTimer||(this.debug&&console.debug("IC3Core/sendHeartBeat"),this.sendLiveState(B),this.heartBeatTimer=window.setInterval(this.sendLiveState.bind(this,B),N.default.heartBeatDuration))},U.prototype.stopHeartBeat=function(){clearInterval(this.heartBeatTimer)},U.prototype.sendMessage=function(B,H){var W=k.default.createMessageData(H);return this.sendMessageToIC3(B.id,W)},U.prototype.getMessages=function(B){var H=this,W=I.default.getDefaultGetMessagesQueryParameters(),te=O.default.addQueryParametersToPath(P.default.getMessagesUrl(B.id,this.ic3Info.RegionGtms),W),$=I.default.getDefaultIC3Headers();return $[A.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,$[A.default.ContentTypeHeader]=N.default.ContentTypeJson,v.HttpClient.MakeRequest({enableExponentialBackoff:!0,headers:$,redirect404RetryCount:N.default.retryCount,retryCount:N.default.retryCount,shouldRedirectOn404:!1,shouldResetOnFailure:!1,shouldRetryOnFailure:k.default.shouldRetryOnFailure,timeBetweenRetry:N.default.timeBetweenOperationRetry,type:T.default.GET,url:te}).then(function(x){for(var r=[],s=0,l=x.messages;s<l.length;s++){var a=l[s];k.default.isSystemMessage(a)||r.push(k.default.createIRawMessage(a,H.ic3Info))}return H.getAllMessagesFromBackwardLinkUrl(x._metadata.backwardLink,W.startTime,r)})},U.prototype.registerOnNewMessage=function(B,H){var W;return this.newConversationMessageListeners[B.id].push(H),null===(W=this.logger)||void 0===W||W.log(h.default.INFO,g.default.RegisterOnNewMessage,{EndpointUrl:this.EndpointUrl,EndpointId:this.EndpointId}),Promise.resolve()},U.prototype.registerOnThreadUpdate=function(B,H){var W;return this.threadUpdateListeners[B.id].push(H),null===(W=this.logger)||void 0===W||W.log(h.default.INFO,g.default.RegisterOnThreadUpdate,{EndpointUrl:this.EndpointUrl,EndpointId:this.EndpointId}),Promise.resolve()},U.prototype.disconnectFromConversation=function(B){return this.conversations.findIndex(function(H){return H.id===B.id}),delete this.internalConversationsData[B.id],this.ic3Info.visitor&&(this.stopHeartBeat(),this.stopPolling()),Promise.resolve()},U.prototype.sendFileData=function(B,H,W){var te=this;if(O.default.isNullOrUndefined(W)&&(W=m.default.AmsBasedFileSharing),H.size<=0)throw new Error("File size is lesser or equal to zero.");var $={fileSharingProtocolType:W,id:"",name:H.name,size:H.size,type:H.type,url:""};return new Promise(function(pe,x){p.default.createNewDocument(B.id,H,te.ic3Info).then(function(r){$.id=r.id;var s=k.default.isDocumentTypeImage(H.type);$.url=P.default.getAmsObjectContentUrl(r.id,te.ic3Info.RegionGtms,s),p.default.uploadDocument(r.id,H,te.ic3Info).then(function(){pe($)}).catch(function(l){x(l)})}).catch(function(r){x(r)})})},U.prototype.sendFileMessage=function(B,H,W){return this.sendMessageToIC3(B.id,k.default.createFileMessage(H,this.ic3Info,W))},U.prototype.downloadFileData=function(B,H){var W=this;return this.debug&&console.debug("IC3Core/IC3ClientAdapter/downloadFileData"),new Promise(function(te,$){var pe=H.fileSharingProtocolType;O.default.isNullOrUndefined(pe)&&(pe=m.default.AmsBasedFileSharing),pe===m.default.AmsBasedFileSharing?p.default.downloadDocument(H,W.ic3Info).then(function(x){te(x)}).catch(function(x){$(x)}):$("This Protocol is not implemented")})},U.prototype.getFileStatus=function(B,H){var W=this;return new Promise(function(te,$){var pe=H.fileSharingProtocolType;O.default.isNullOrUndefined(pe)&&(pe=m.default.AmsBasedFileSharing),pe===m.default.AmsBasedFileSharing?p.default.getFileStatus(H,W.ic3Info).then(function(x){te(x)}).catch(function(x){$(R.default.Error+" e")}):$("This Protocol is not implemented")})},U.prototype.indicateTypingStatus=function(B,H,W){var te=k.default.createTypingStatusThreadMessageData(H,W);return this.sendMessageToIC3(B.id,te)},U.prototype.sendMessageToBot=function(B,H,W){var te=k.default.createBotMessageData(B.id,W),$=P.default.getBotMessagesUrl(H,this.ic3Info.RegionGtms),pe=I.default.getDefaultIC3Headers();return pe[A.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,pe[A.default.ContentTypeHeader]=N.default.ContentTypeTextPlain,v.HttpClient.MakeRequest({data:te,dataType:M.default.TEXT,enableExponentialBackoff:!0,headers:pe,redirect404RetryCount:N.default.retryCount,retryCount:N.default.retryCount,shouldRedirectOn404:!1,shouldResetOnFailure:!1,shouldRetryOnFailure:k.default.shouldRetryOnFailure,timeBetweenRetry:N.default.timeBetweenOperationRetry,type:T.default.POST,url:$})},U.prototype.getMembers=function(B){var H=this.internalConversationsData[B.id].members,W=[];return O.default.isNullOrUndefinedOrEmptyArray(H)||H.forEach(function(te){var $={displayName:te.friendlyName,id:te.id,type:k.default.getPersonType(te.id)};W.push($)}),Promise.resolve(W)},U.prototype.sendMessageToIC3=function(B,H){var W=P.default.getMessagesUrl(B,this.ic3Info.RegionGtms),te=I.default.getDefaultIC3Headers();te[A.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,te[A.default.ContentTypeHeader]=N.default.ContentTypeJson;var $={data:JSON.stringify(H),enableExponentialBackoff:!0,headers:te,redirect404RetryCount:N.default.retryCount,retryCount:N.default.retryCount,shouldRedirectOn404:!1,shouldResetOnFailure:!1,shouldRetryOnFailure:k.default.shouldRetryOnFailure,timeBetweenRetry:N.default.timeBetweenOperationRetry,type:T.default.POST,url:W};return v.HttpClient.MakeRequest($)},U.prototype.onNewMessage=function(B,H,W){var $,te=this,pe=O.default.timer();try{B&&(O.default.isNullOrUndefined(this.newConversationMessageListeners[B.id])||k.default.isSystemMessage(H)||this.newConversationMessageListeners[B.id].forEach(function(r){r(k.default.createIRawMessage(H,te.ic3Info,W))}))}catch(r){return void(null===($=this.logger)||void 0===$||$.log(h.default.ERROR,g.default.OnNewMessageFailure,{ExceptionDetails:r,ElapsedTimeInMilliseconds:pe.milliSecondsElapsed,EndpointUrl:this.EndpointUrl,EndpointId:this.EndpointId}))}},U.prototype.onThreadUpdate=function(B,H){var W,te=O.default.timer();try{B&&(O.default.isNullOrUndefined(this.threadUpdateListeners[B.id])||this.threadUpdateListeners[B.id].forEach(function(pe){pe(k.default.createIRawThread(H))}))}catch(pe){return void(null===(W=this.logger)||void 0===W||W.log(h.default.ERROR,g.default.OnThreadUpdateFailure,{ExceptionDetails:pe,ElapsedTimeInMilliseconds:te.milliSecondsElapsed,EndpointUrl:this.EndpointUrl,EndpointId:this.EndpointId}))}},U.prototype.getAllMessagesFromBackwardLinkUrl=function(B,H,W){var te=this;return O.default.isNullOrEmptyString(B)?Promise.resolve(W):this.getMessagesFromBackwardLinkUrl(B,H).then(function($){for(var pe=0,x=$.messages;pe<x.length;pe++){var r=x[pe];k.default.isSystemMessage(r)||W.push(k.default.createIRawMessage(r,te.ic3Info))}return te.getAllMessagesFromBackwardLinkUrl($._metadata.backwardLink,H,W)})},U.prototype.getMessagesFromBackwardLinkUrl=function(B,H){var te=O.default.addQueryParametersToPath(B,{startTime:H}),$=I.default.getDefaultIC3Headers();return $[A.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,$[A.default.ContentTypeHeader]=N.default.ContentTypeJson,v.HttpClient.MakeRequest({enableExponentialBackoff:!0,headers:$,redirect404RetryCount:N.default.retryCount,retryCount:N.default.retryCount,shouldRedirectOn404:!1,shouldResetOnFailure:!1,shouldRetryOnFailure:k.default.shouldRetryOnFailure,timeBetweenRetry:N.default.timeBetweenOperationRetry,type:T.default.GET,url:te})},U.prototype.setupSession=function(B){this.ic3Info={SkypeToken:B.token,RegionGtms:B.regionGtms,visitor:B.visitor},O.default.isNullOrUndefined(this.ic3Info)||(this.EndpointId=this.ic3Info.endpointId,this.EndpointUrl=this.ic3Info.RegionGtms?this.ic3Info.RegionGtms.chatService:"")},U.prototype.setDebug=function(B){void 0===B&&(B=!1),this.debug=B},U}();L.default=V},9515:function(Y,L,E){"use strict";var V,p=this&&this.__extends||(V=function(U,B){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(H,W){H.__proto__=W}||function(H,W){for(var te in W)Object.prototype.hasOwnProperty.call(W,te)&&(H[te]=W[te])})(U,B)},function(U,B){if("function"!=typeof B&&null!==B)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");function H(){this.constructor=U}V(U,B),U.prototype=null===B?Object.create(B):(H.prototype=B.prototype,new H)}),N=this&&this.__awaiter||function(V,U,B,H){return new(B||(B=Promise))(function(te,$){function pe(s){try{r(H.next(s))}catch(l){$(l)}}function x(s){try{r(H.throw(s))}catch(l){$(l)}}function r(s){s.done?te(s.value):function(te){return te instanceof B?te:new B(function($){$(te)})}(s.value).then(pe,x)}r((H=H.apply(V,U||[])).next())})},m=this&&this.__generator||function(V,U){var H,W,te,$,B={label:0,sent:function(){if(1&te[0])throw te[1];return te[1]},trys:[],ops:[]};return $={next:pe(0),throw:pe(1),return:pe(2)},"function"==typeof Symbol&&($[Symbol.iterator]=function(){return this}),$;function pe(r){return function(s){return function(r){if(H)throw new TypeError("Generator is already executing.");for(;B;)try{if(H=1,W&&(te=2&r[0]?W.return:r[0]?W.throw||((te=W.return)&&te.call(W),0):W.next)&&!(te=te.call(W,r[1])).done)return te;switch(W=0,te&&(r=[2&r[0],te.value]),r[0]){case 0:case 1:te=r;break;case 4:return B.label++,{value:r[1],done:!1};case 5:B.label++,W=r[1],r=[0];continue;case 7:r=B.ops.pop(),B.trys.pop();continue;default:if(!(te=(te=B.trys).length>0&&te[te.length-1])&&(6===r[0]||2===r[0])){B=0;continue}if(3===r[0]&&(!te||r[1]>te[0]&&r[1]<te[3])){B.label=r[1];break}if(6===r[0]&&B.label<te[1]){B.label=te[1],te=r;break}if(te&&B.label<te[2]){B.label=te[2],B.ops.push(r);break}te[2]&&B.ops.pop(),B.trys.pop();continue}r=U.call(V,B)}catch(s){r=[6,s],W=0}finally{H=te=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(L,"__esModule",{value:!0});var R=E(501),u=E(6849),v=E(5874),M=E(1218),A=E(7037),T=E(3671),g=E(2915),h=E(752),C=E(5655),b=E(6648),w=E(5785),I=E(1927),P=E(8636),k=E(909),O=function(V){function U(B,H){var W=V.call(this,B)||this;return W.debug&&console.debug("IC3Core/Constructor"),W.protocolType=C.default.IC3V1SDK,W.hostType=H,W.ic3Initializer=new A.default,W}return p(U,V),U.prototype.startPolling=function(){V.prototype.startPolling.call(this)},U.prototype.stopPolling=function(){V.prototype.stopPolling.call(this)},U.prototype.setup=function(B){return V.prototype.setup.call(this,B)},U.prototype.initialize=function(B){var H=this;return V.prototype.initialize.call(this,B).then(function(){var te;return null===(te=H.ic3Initializer)||void 0===te?void 0:te.setup(H.logger).then(function(){return H.setSkypeTokenCookie()}).then(function(){var $;return null===($=H.ic3Initializer)||void 0===$?void 0:$.setIc3Info(H.ic3Info)}).then(function(){var $;return null===($=H.ic3Initializer)||void 0===$?void 0:$.initializeIC3(H.handlePollData.bind(H))}).then(function($){H.ic3Info=$})})},U.prototype.update=function(B){var H=this;return V.prototype.update.call(this,B).then(function(){return H.updateToken({RegionGtms:B.regionGtms,SkypeToken:B.token,visitor:B.visitor})})},U.prototype.dispose=function(){var B;return N(this,void 0,void 0,function(){return m(this,function(H){return null===(B=this.ic3Initializer)||void 0===B||B.stopPolling(),this.heartBeatTimer&&clearInterval(this.heartBeatTimer),Promise.resolve(),[2]})})},U.prototype.joinConversation=function(B,H){var W=this,te=k.default.timer();return V.prototype.joinConversation.call(this,B,H).then(function($){return W.getThreadRequest($.id).then(function(pe){return W.internalConversationsData[$.id]={id:B,members:pe.members},$}).catch(function(pe){return W.logger&&W.logger.log(h.default.WARN,T.default.JoinConversationV1GetThreadRequestFailed,{Description:"Unable to retrieve thread: "+pe,ElapsedTimeInMilliseconds:te.milliSecondsElapsed,EndpointUrl:W.EndpointUrl,EndpointId:W.ic3Info.endpointId}),W.internalConversationsData[$.id]={id:B,members:[]},$})})},U.prototype.sendMessage=function(B,H){return V.prototype.sendMessage.call(this,B,H)},U.prototype.sendFileMessage=function(B,H,W){return V.prototype.sendFileMessage.call(this,B,H,W)},U.prototype.getMessages=function(B){return V.prototype.getMessages.call(this,B)},U.prototype.registerOnNewMessage=function(B,H){return V.prototype.registerOnNewMessage.call(this,B,H)},U.prototype.registerOnThreadUpdate=function(B,H){return V.prototype.registerOnThreadUpdate.call(this,B,H)},U.prototype.disconnectFromConversation=function(B){return V.prototype.disconnectFromConversation.call(this,B)},U.prototype.setSkypeTokenCookie=function(){var B=this.ic3Info.RegionGtms.ams.concat(R.default.skypeTokenAuthURL),H=b.default.getDefaultBaseIC3Headers();return H[u.default.ContentTypeHeader]=R.default.ContentTypeForm,g.HttpClient.MakeRequest({data:R.default.skypeTokenConstantForData+this.ic3Info.SkypeToken,enableExponentialBackoff:!0,useXHRWithCredentials:!0,headers:H,redirect404RetryCount:R.default.retryCount,retryCount:R.default.retryCount,shouldRedirectOn404:!1,shouldResetOnFailure:!1,shouldRetryOnFailure:P.default.shouldRetryOnFailure,timeBetweenRetry:R.default.timeBetweenOperationRetry,type:v.default.POST,url:B})},U.prototype.getThreadRequest=function(B){var H=I.default.getThreadUrl(B,this.ic3Info.RegionGtms),W=b.default.getDefaultBaseIC3Headers();return W[u.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,g.HttpClient.MakeRequest({enableExponentialBackoff:!0,headers:W,redirect404RetryCount:R.default.retryCount,retryCount:R.default.retryCount,shouldRedirectOn404:!0,shouldRetryOnFailure:P.default.shouldRetryOnFailure,timeBetweenRetry:R.default.timeBetweenOperationRetry,type:v.default.GET,url:H})},U.prototype.newMessageReceived=function(B,H,W){V.prototype.onNewMessage.call(this,B,H,W)},U.prototype.newThreadUpdate=function(B,H){V.prototype.onThreadUpdate.call(this,B,H)},U.prototype.handleNewMessageEvent=function(B){var H;H=B.resource&&B.resource.conversationid?B.resource.conversationid:P.default.getConversationIdFromUrl(B.resource.conversationLink?B.resource.conversationLink:B.resourceLink);var W=this.conversations.findIndex(function($){return $.id===H});this.newMessageReceived(this.conversations[W],B.resource,B.resourceType)},U.prototype.handleConversationUpdateEvent=function(B){},U.prototype.handleThreadUpdate=function(B){if(B.resourceType===w.default.ThreadUpdate){var H;H=B.resource&&B.resource.id?B.resource.id:P.default.getConversationIdFromUrl(B.resource.messages?B.resource.messages:B.resourceLink);var W=this.conversations.findIndex(function($){return $.id===H});this.newThreadUpdate(this.conversations[W],B.resource)}},U.prototype.handlePollData=function(B){if(B&&B.eventMessages)for(var H=0,W=B.eventMessages;H<W.length;H++)this.handlePollEventMessage(W[H])},U.prototype.handlePollEventMessage=function(B){B.resourceType===w.default.NewMessage||B.resourceType===w.default.MessageUpdate?this.handleNewMessageEvent(B):B.resourceType===w.default.ThreadUpdate?this.handleThreadUpdate(B):B.resourceType===w.default.ConversationUpdate&&this.handleConversationUpdateEvent(B)},U.prototype.updateToken=function(B){return N(this,void 0,void 0,function(){var H,W,te,$,pe,x,r,s,l,a,_=this;return m(this,function(D){switch(D.label){case 0:return this.logger&&this.logger.log(h.default.INFO,T.default.UpdateToken,{EndpointUrl:this.EndpointUrl,EndpointId:this.ic3Info.endpointId}),H=[],W=function(d){d&&d.eventMessages&&k.default.concatArrays(H,d.eventMessages)},te=[],$=function(d){d&&d.eventMessages&&k.default.concatArrays(te,d.eventMessages)},pe=this.ic3Initializer,x=new A.default,r=this.updateTokenClearTimeoutHandle,s=this.ic3Info,pe.getPoller().onNewData=W,this.logger?[4,x.setup(this.logger)]:[3,2];case 1:D.sent(),D.label=2;case 2:return[2,x.setIc3Info(B).then(function(){return x.initializeIC3($)}).then(function(d){l=d}).then(function(){return _.getMatchingIC3EventIndex(H,te)}).then(function(d){a=d}).then(function(){return pe.reset(!0)}).then(function(){return _.syncPollingData(H,te,a)}).then(function(){_.ic3Info=l,_.ic3Initializer=x,_.ic3Initializer.getPoller().onNewData=_.handlePollData.bind(_)}).catch(function(d){throw _.updateTokenClearTimeoutHandle!==r&&(clearTimeout(_.updateTokenClearTimeoutHandle),_.updateTokenClearTimeoutHandle=r),_.ic3Info=s,_.ic3Initializer.getPoller().onNewData=_.handlePollData.bind(_),_.ic3Initializer.getPoller().start(),new Error("Update token failed: "+(d&&d.message))})]}})})},U.prototype.getMatchingIC3EventIndex=function(B,H,W){var te=this;return new Promise(function($,pe){if((W=W||0)===R.default.stabilizePollMaxRetryCount)$({newPollIndex:-1,previousPollIndex:-1});else{for(var x=0,r=0;x<B.length&&r<H.length;){var s=B[x];if(s.time===H[r].time)return void $({newPollIndex:r,previousPollIndex:x});new Date(s.time)<new Date(s.time)?x++:r++}setTimeout(function(){te.getMatchingIC3EventIndex(B,H,W+1).then(function(a){$(a)}).catch(function(a){pe(a)})},R.default.timeBetweenStabilizingPoll)}})},U.prototype.syncPollingData=function(B,H,W){this.logger&&this.logger.log(h.default.INFO,T.default.SyncingPollData,{EndpointUrl:this.EndpointUrl,EndpointId:this.ic3Info.endpointId});var te=W.previousPollIndex,$=W.newPollIndex+1;-1===W.previousPollIndex&&-1===W.newPollIndex&&(te=B.length-1,$=0);for(var pe=0;pe<=te;pe++)this.handlePollEventMessage(B[pe]);for(pe=$;pe<H.length;pe++)this.handlePollEventMessage(H[pe])},U}(M.default);L.default=O},7037:function(Y,L,E){"use strict";var p=this&&this.__awaiter||function(O,V,U,B){return new(U||(U=Promise))(function(W,te){function $(r){try{x(B.next(r))}catch(s){te(s)}}function pe(r){try{x(B.throw(r))}catch(s){te(s)}}function x(r){r.done?W(r.value):function(W){return W instanceof U?W:new U(function(te){te(W)})}(r.value).then($,pe)}x((B=B.apply(O,V||[])).next())})},N=this&&this.__generator||function(O,V){var B,H,W,te,U={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return te={next:$(0),throw:$(1),return:$(2)},"function"==typeof Symbol&&(te[Symbol.iterator]=function(){return this}),te;function $(x){return function(r){return function(x){if(B)throw new TypeError("Generator is already executing.");for(;U;)try{if(B=1,H&&(W=2&x[0]?H.return:x[0]?H.throw||((W=H.return)&&W.call(H),0):H.next)&&!(W=W.call(H,x[1])).done)return W;switch(H=0,W&&(x=[2&x[0],W.value]),x[0]){case 0:case 1:W=x;break;case 4:return U.label++,{value:x[1],done:!1};case 5:U.label++,H=x[1],x=[0];continue;case 7:x=U.ops.pop(),U.trys.pop();continue;default:if(!(W=(W=U.trys).length>0&&W[W.length-1])&&(6===x[0]||2===x[0])){U=0;continue}if(3===x[0]&&(!W||x[1]>W[0]&&x[1]<W[3])){U.label=x[1];break}if(6===x[0]&&U.label<W[1]){U.label=W[1],W=x;break}if(W&&U.label<W[2]){U.label=W[2],U.ops.push(x);break}W[2]&&U.ops.pop(),U.trys.pop();continue}x=V.call(O,U)}catch(r){x=[6,r],H=0}finally{B=W=0}if(5&x[0])throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}([x,r])}}};Object.defineProperty(L,"__esModule",{value:!0});var m=E(501),R=E(6849),u=E(5850),v=E(8311),M=E(6648),A=E(1927),T=E(909),g=E(3805),h=E(752),C=E(3671),b=E(3787),w=E(8636),I=E(2915),P=E(5874),k=function(){function O(){this.debug=!1,this.current404RetryCount=0,this.currentOtherRetryCount=0,this.skipUnsubscribe=!1,this.telemetryMessage="",this.errorCode="",this.pollDataHandler=function(V){},this.resetRetryCount()}return O.prototype.setup=function(V){return p(this,void 0,void 0,function(){return N(this,function(U){return this.logger=V,[2]})})},O.prototype.getPoller=function(){var V=this.pollDataHandler.bind(this);return this.poller||(this.poller=new g.default(this.ic3Info,V,this.redirectErrorHandler.bind(this),this.onRequestCreationFailure.bind(this))),this.poller},O.prototype.setIc3Info=function(V){return p(this,void 0,void 0,function(){var U;return N(this,function(B){return U={RegionGtms:JSON.parse(JSON.stringify(V.RegionGtms)),SkypeToken:V.SkypeToken,visitor:V.visitor},this.ic3Info=U,[2]})})},O.prototype.initializeIC3=function(V){var B,U=this;return V&&(this.pollDataHandler=V),null===(B=this.logger)||void 0===B||B.log(h.default.INFO,C.default.IC3InitializationBegins,{Description:"Endpoint to poll is "+JSON.stringify(this.ic3Info.RegionGtms.chatService),EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.createEndpoint().then(function(){return U.createSubscription()}).then(function(){return U.setEndpointProperty()}).then(function(){return U.startPolling(V)}).then(function(){return U.resetRetryCount()}).then(function(){return Promise.resolve(U.ic3Info)}).catch(function(W){return U.redirectErrorHandler(W)})},O.prototype.startPolling=function(V){var U,B=!V&&this.pollDataHandler?this.pollDataHandler.bind(this):this.pollDataHandler;this.poller||(this.poller=new g.default(this.ic3Info,B,this.redirectErrorHandler.bind(this),this.onRequestCreationFailure.bind(this))),this.poller.ic3Info=this.ic3Info,null===(U=this.logger)||void 0===U||U.log(h.default.INFO,C.default.IC3StartedPolling,{EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.poller.start()},O.prototype.stopPolling=function(V){var U;null===(U=this.logger)||void 0===U||U.log(h.default.INFO,C.default.IC3StoppedPolling,{Description:(V?m.default.oldInitializer:m.default.newInitializer)+" stopped polling.",EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.poller&&this.poller.stop()},O.prototype.reset=function(V){return this.stopPolling(V),this.unsubscribeFromEndpoint()},O.prototype.resetRetryCount=function(){this.current404RetryCount=0,this.currentOtherRetryCount=0},O.prototype.onEndpointCreationFailure=function(V){this.onRequestCreationFailure(V,m.default.endpointRequestLog)},O.prototype.onEndpointCreationSuccess=function(V){var U,B,H=T.default.getResponseHeader(V,R.default.SetRegistrationTokenHeader);T.default.isNullOrUndefined(H)||(this.ic3Info.RegistrationToken=T.default.getRegistrationTokenValue(H));var W=T.default.getResponseHeader(V,R.default.LocationHeader);if(!T.default.isNullOrUndefined(W)){var te=W.match(/endpoints\/(%7B[\da-z\-]+%7D)/);this.ic3Info.endpointId=te&&te[1],null===(U=this.logger)||void 0===U||U.log(h.default.INFO,C.default.IC3EndpointCreationSuccess,{Description:"IC3 endpoint Id is "+this.ic3Info.endpointId,EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),V.status===b.default.Created&&w.default.parseChatServiceHostUrl(W)!==this.ic3Info.RegionGtms.chatService&&(this.ic3Info.RegionGtms.chatService=w.default.parseChatServiceHostUrl(W),null===(B=this.logger)||void 0===B||B.log(h.default.WARN,C.default.OnRequestCreationSuccessRedirect,{Description:"Endpoint changed",EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}))}},O.prototype.createEndpointRequest=function(){var V=A.default.getV1EndpointUrl(this.ic3Info.RegionGtms),U=M.default.getDefaultIC3Headers();U[R.default.AuthenticationHeader]=R.default.SkypeTokenHeaderValue+this.ic3Info.SkypeToken,U[R.default.ContentTypeHeader]=m.default.ContentTypeJson;var H={endpointFeatures:[v.default.Agent,v.default.InviteFree,v.default.MessageProperties].join(",")},W={callbackOnFailure:this.onEndpointCreationFailure.bind(this),callbackOnSuccess:this.onEndpointCreationSuccess.bind(this),data:JSON.stringify(H),enableExponentialBackoff:!0,headers:U,redirect404RetryCount:m.default.retryCount,retryCount:m.default.retryCount,shouldRedirectOn404:!0,shouldResetOnFailure:!0,shouldRetryOnFailure:w.default.shouldRetryOnFailure,timeBetweenRetry:m.default.timeBetweenOperationRetry,type:P.default.POST,url:V};return I.HttpClient.MakeRequest(W)},O.prototype.createEndpoint=function(){var V=this;return this.createEndpointRequest().then(function(U){return U.subscriptions&&U.subscriptions.length>0&&(V.ic3Info.subscriptionId=U.subscriptions[0].id),U})},O.prototype.onSubscriptionCreationFailure=function(V){this.onRequestCreationFailure(V,m.default.subscriptionRequestLog)},O.prototype.onSubscriptionCreationSuccess=function(V){var U,B=T.default.getResponseHeader(V,R.default.LocationHeader)||"";V.status===b.default.Created&&!T.default.isNullOrUndefined(B)&&w.default.parseChatServiceHostUrl(B)!==this.ic3Info.RegionGtms.chatService&&(this.ic3Info.RegionGtms.chatService=w.default.parseChatServiceHostUrl(B),null===(U=this.logger)||void 0===U||U.log(h.default.WARN,C.default.OnRequestCreationSuccessRedirect,{Description:"Endpoint changed",EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}));var H=B.match(/\/(\d+)$/);H&&(this.ic3Info.subscriptionId=H[1])},O.prototype.createSubscriptionRequest=function(){var V=A.default.getV1SubscriptionUrl(this.ic3Info.RegionGtms),U=M.default.getDefaultIC3Headers();U[R.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,U[R.default.ContentTypeHeader]=m.default.ContentTypeJson;var B={channelType:m.default.HttpLongPoll,interestedResources:[u.default.ConversationMessages,u.default.ConversationProperties,u.default.Threads,u.default.Contacts]},H={callbackOnFailure:this.onSubscriptionCreationFailure.bind(this),callbackOnSuccess:this.onSubscriptionCreationSuccess.bind(this),data:JSON.stringify(B),enableExponentialBackoff:!0,headers:U,redirect404RetryCount:m.default.retryCount,retryCount:m.default.retryCount,shouldRedirectOn404:!0,shouldResetOnFailure:!0,shouldRetryOnFailure:w.default.shouldRetryOnFailure,timeBetweenRetry:m.default.timeBetweenOperationRetry,type:P.default.POST,url:V};return I.HttpClient.MakeRequest(H)},O.prototype.createSubscription=function(){return this.createSubscriptionRequest()},O.prototype.onSetEndpointPropertyCreationFailure=function(V){this.onRequestCreationFailure(V,m.default.setPropertiesRequestLog)},O.prototype.setEndpointProperty=function(){if(this.ic3Info.visitor)return Promise.resolve();var V=A.default.getV1SetPropertiesUrl(this.ic3Info.RegionGtms),U={};U[R.default.SetEndpointProperty]=!0;var H=M.default.getDefaultIC3Headers();H[R.default.AuthenticationHeader]=R.default.SkypeTokenHeaderValue+this.ic3Info.SkypeToken,H[R.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,H[R.default.ContentTypeHeader]=m.default.ContentTypeJson;var W={callbackOnFailure:this.onSetEndpointPropertyCreationFailure.bind(this),data:JSON.stringify(U),enableExponentialBackoff:!0,headers:H,redirect404RetryCount:m.default.retryCount,retryCount:m.default.retryCount,shouldRedirectOn404:!0,shouldResetOnFailure:!0,shouldRetryOnFailure:w.default.shouldRetryOnFailure,timeBetweenRetry:m.default.timeBetweenOperationRetry,type:P.default.PUT,url:V};return I.HttpClient.MakeRequest(W)},O.prototype.onUnsubscribeCreationFailure=function(V){this.onRequestCreationFailure(V,m.default.unsubscribeRequestLog)},O.prototype.unsubscribeFromEndpoint=function(){if(this.ic3Info.visitor||T.default.isNullOrUndefined(this.ic3Info.endpointId)||this.skipUnsubscribe)return this.skipUnsubscribe=!0,Promise.resolve();var V=A.default.getV1DeleteEndpointUrl(this.ic3Info.RegionGtms,this.ic3Info.endpointId),U=M.default.getDefaultIC3Headers();U[R.default.AuthenticationHeader]=R.default.SkypeTokenHeaderValue+this.ic3Info.SkypeToken,U[R.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,U[R.default.ContentTypeHeader]=m.default.ContentTypeJson;var B={callbackOnFailure:this.onUnsubscribeCreationFailure.bind(this),enableExponentialBackoff:!0,headers:U,redirect404RetryCount:m.default.retryCount,retryCount:m.default.retryCount,shouldRedirectOn404:!0,shouldResetOnFailure:!0,shouldRetryOnFailure:w.default.shouldRetryOnFailure,timeBetweenRetry:m.default.timeBetweenOperationRetry,type:P.default.DELETE,url:V};return I.HttpClient.MakeRequest(B)},O.prototype.onRequestCreationFailure=function(V,U){var B,H,W=T.default.getResponseHeader(V,R.default.LocationHeader);this.telemetryMessage=U+" failed. Error Code: "+V.status+".",this.errorCode=V.status.toString(),this.skipUnsubscribe=!0,V.status!==b.default.Redirect||T.default.isNullOrEmptyString(W)?(null===(H=this.logger)||void 0===H||H.log(h.default.WARN,C.default.ResetOnRequestCreationFailure,{Description:this.telemetryMessage+" Trying to reset.",ErrorCode:V.status.toString(),EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.current404RetryCount=0,this.currentOtherRetryCount++):(null===(B=this.logger)||void 0===B||B.log(h.default.WARN,C.default.RedirectOnRequestCreationFailure,{Description:this.telemetryMessage+" Trying to redirect.",ErrorCode:V.status.toString(),EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.onRequestCreationFailureRedirect(V))},O.prototype.redirectErrorHandler=function(V){var B,U=this;return V.message===m.default.Reset_Flag&&this.current404RetryCount<=m.default.retry404Count&&this.currentOtherRetryCount<=m.default.retryCount?this.reset().then(function(){return U.initializeIC3()}):(null===(B=this.logger)||void 0===B||B.log(h.default.ERROR,C.default.MaxRetryCountReachedForRedirect,{Description:"Fatal Error. Initialization failed. Maximum retry count reached. Exiting. "+this.telemetryMessage,ErrorCode:this.errorCode,ExceptionDetails:V,EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.reset().then(function(){return Promise.reject(V.message)}))},O.prototype.onRequestCreationFailureRedirect=function(V){var U;this.current404RetryCount++,this.currentOtherRetryCount=0,this.ic3Info.RegionGtms.chatService=w.default.parseChatServiceHostUrl(T.default.getResponseHeader(V,R.default.LocationHeader)),null===(U=this.logger)||void 0===U||U.log(h.default.WARN,C.default.OnRequestCreationFailureRedirect,{Description:"Endpoint changed.",EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId})},O}();L.default=k},9202:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=E(2518),N=E(1356),m=function(){function R(){}return R.getSDK=function(u){return new Promise(function(v){var A=p.default.getClientBridge({hostType:u.hostType,protocolType:u.protocolType}),T={logger:new N.default(A,u.logger)};return A.setup(T).then(function(){var g={dispose:A.dispose.bind(A),id:A.id,initialize:A.initialize.bind(A),joinConversation:A.joinConversation.bind(A),update:A.update.bind(A),setDebug:A.setDebug.bind(A)};return v(g)})})},R}();L.default=m},2915:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.HttpClient=void 0;var p=E(909),N=E(501),m=E(3671),R=E(752),u=E(6849),v=E(3787),M=E(8686),A=function(){function T(){}return T.MakeRequest=function(g){return new Promise(function(C,b){var P=0,k=g.retryCount||1,O={url:g.url,method:g.type,data:g.data,timeout:g.timeout,headers:g.headers,withCredentials:g.useXHRWithCredentials||!1},V=function(){M.default.request(O).then(function(U){!function(U,B){if(B.status>=400){var H={ResponseText:B.statusText,Status:status};T.logWarning("Requesting "+g.url,B.status,H)}g.callbackOnSuccess&&g.callbackOnSuccess(B),C(U)}(U.data,U)}).catch(function(U){!function(U){var B,H,W,te,$,pe,x,r,s,l,a={ErrorThrown:U.message,ResponseText:null===(B=U.response)||void 0===B?void 0:B.statusText,Status:null===(H=U.response)||void 0===H?void 0:H.status},f=function(){var y,z;T.logError("Request to "+g.url+" failed.",(null===(y=U.response)||void 0===y?void 0:y.status)||0,a),b(new Error((null===(z=U.response)||void 0===z?void 0:z.statusText)||""))},_=function(){var y;T.logError("Request to "+g.url+" failed. Resetting endpoint.",(null===(y=U.response)||void 0===y?void 0:y.status)||0,a),g.callbackOnFailure&&g.callbackOnFailure(U),b(new Error(N.default.Reset_Flag))},D=function(){var y;P++;var z=g.timeBetweenRetry||0;(g.enableExponentialBackoff||(null===(y=U.response)||void 0===y?void 0:y.status)===v.default.TooManyRequests)&&(z*=Math.exp(P)),setTimeout(function(){V()},z)},d=null===(W=U.response)||void 0===W?void 0:W.headers[u.default.LocationHeader],i=null===(te=U.response)||void 0===te?void 0:te.headers[u.default.SetRegistrationTokenHeader];(null===($=U.response)||void 0===$?void 0:$.status)!==v.default.Redirect||p.default.isNullOrEmptyString(d)?(null===(pe=U.response)||void 0===pe?void 0:pe.status)!==v.default.Unauthorized&&(null===(x=U.response)||void 0===x?void 0:x.status)!==v.default.Forbidden||p.default.isNullOrEmptyString(i)?P<=k&&g.shouldRetryOnFailure&&g.shouldRetryOnFailure((null===(s=U.response)||void 0===s?void 0:s.status)||0)||(null===(l=U.response)||void 0===l?void 0:l.status)===v.default.TooManyRequests?D():g.shouldResetOnFailure?_():f():P<=k&&g.shouldRetryOnFailure&&g.shouldRetryOnFailure((null===(r=U.response)||void 0===r?void 0:r.status)||0)?(g.headers&&(g.headers[u.default.RegistrationTokenHeader]=p.default.getRegistrationTokenValue(i)),D()):g.shouldResetOnFailure?_():f():g.shouldRedirectOn404?_():P<=k?(g.url=d,D()):f()}(U)})};V()})},T.isClientError=function(g){if(!g)return!1;var h=g.message,C=!1;return p.default.isNullOrEmptyString(h)||(C=h.search(/Status- 40\d/)>=-1),C},T.setLogger=function(g){T.logger=g},T.logError=function(g,h,C){T.logger&&T.logger.log(R.default.ERROR,m.default.HTTPRequestFailed,{Description:g,ErrorCode:h.toString(),ExceptionDetails:C})},T.logWarning=function(g,h,C){T.logger&&T.logger.log(R.default.INFO,m.default.HTTPRequestUnusualResponse,{Description:g,ErrorCode:h.toString(),ExceptionDetails:C})},T}();L.HttpClient=A},3787:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=function(){function p(){}return p.OK=200,p.Created=201,p.Accepted=202,p.NoContent=204,p.Unauthorized=401,p.Forbidden=403,p.Redirect=404,p.TooManyRequests=429,p.InternalServerError=500,p.ServiceUnavailable=503,p.NotFound=729,p}();L.default=E},5256:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=function(){function p(){}return p.TEXT="text",p}();L.default=E},6849:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=function(){function p(){}return p.LocationHeader="location",p.SetRegistrationTokenHeader="set-registrationtoken",p.RegistrationTokenHeader="RegistrationToken",p.RegistrationTokenHeaderValue="registrationToken=",p.ContentTypeHeader="content-type",p.AuthenticationHeader="authentication",p.BehaviorOverrideHeader="behavioroverride",p.SkypeTokenHeaderValue="skypetoken=",p.SetEndpointProperty="supportsMessageProperties",p}();L.default=E},5874:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=(()=>{return(p=E||(E={})).GET="get",p.POST="post",p.PUT="put",p.DELETE="delete",E;var p})();L.default=E},6648:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=E(501),N=E(737),m=function(){function R(){}return R.getDefaultIC3Headers=function(){return{Accept:p.default.ContentTypeJson,BehaviorOverride:p.default.RedirectAs404,ClientInfo:p.default.ClientInfoValue,ContextId:"tcid="+(0,N.uuidv4)(),Expires:0,Pragma:p.default.NoCache,"x-ms-client-type":p.default.Web,"x-ms-user-type":p.default.User}},R.getDefaultBaseIC3Headers=function(){return{Accept:p.default.ContentTypeJson,BehaviorOverride:p.default.RedirectAs404,"content-type":p.default.ContentTypeJson}},R.getDefaultGetMessagesQueryParameters=function(){return{pageSize:20,startTime:0,view:"msnp24Equivalent|supportsMessageProperties"}},R.getDefaultAMSHeaders=function(u){return{Authorization:p.default.AMSAuthorizationSkypeTokenValue+u,"X-MS-Client-Version":p.default.ClientInfoValue}},R.getDefaultAMSViewHeaders=function(u){return{Accept:p.default.AMSAcceptHeaderValue,"Accept-Encoding":p.default.AMSAcceptEncodingHeaderValue,Authorization:p.default.AMSAuthorizationSkypeTokenValue+u,"X-MS-Client-Version":p.default.ClientInfoValue}},R}();L.default=m},6194:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.SDKProvider=void 0;var p=E(9202);L.SDKProvider=p.default},2217:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=function(){function p(){}return p.IFrame=0,p.Page=1,p}();L.default=E},5655:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=function(){function p(){}return p.IC3V1SDK=0,p.IC3V2SDK=1,p.MockIC3SDK=2,p}();L.default=E},3671:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=(()=>{return(p=E||(E={})).JoinConversation="JoinConversation",p.RegisterOnNewMessage="RegisterOnNewMessage",p.RegisterOnThreadUpdate="RegisterOnThreadUpdate",p.OnNewMessageFailure="OnNewMessageFailure",p.OnThreadUpdateFailure="OnThreadUpdateFailure",p.SendLiveStateFailure="SendLiveStateFailure",p.JoinConversationV1GetThreadRequestFailed="JoinConversationV1GetThreadRequestFailed",p.UpdateToken="UpdateToken",p.SyncingPollData="SyncingPollData",p.IC3InitializationBegins="IC3InitializationBegins",p.IC3StartedPolling="IC3StartedPolling",p.IC3StoppedPolling="IC3StoppedPolling",p.IC3EndpointCreationSuccess="IC3EndpointCreationSuccess",p.RedirectOnRequestCreationFailure="RedirectOnRequestCreationFailure",p.ResetOnRequestCreationFailure="ResetOnRequestCreationFailure",p.MaxRetryCountReachedForRedirect="MaxRetryCountReachedForRedirect",p.OnRequestCreationFailureRedirect="OnRequestCreationFailureRedirect",p.OnRequestCreationSuccessRedirect="OnRequestCreationSuccessRedirect",p.ErrorDuringPolling="ErrorDuringPolling",p.HTTPRequestFailed="HTTPRequestFailed",p.HTTPRequestUnusualResponse="HTTPRequestUnusualResponse",E;var p})();L.default=E},752:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=(()=>{return(p=E||(E={})).INFO="INFO",p.DEBUG="DEBUG",p.WARN="WARN",p.ERROR="ERROR",E;var p})();L.default=E},1356:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=E(909),N=E(8261),m=function(){function R(u,v){this.sdk=u,this.logger=v}return R.prototype.log=function(u,v,M){if(this.isLoggingEnabled()){var A=N.default.getTelemetryEventData(this.sdk,v,M);this.logEvent(u,A)}},R.prototype.logEvent=function(u,v){this.isLoggingEnabled()&&setTimeout(this.logger.logClientSdkTelemetryEvent.bind(this.logger),0,u,v)},R.prototype.isLoggingEnabled=function(){return!p.default.isNullOrUndefined(this.logger)},R}();L.default=m},8261:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=function(){function p(){}return p.getTelemetryEventData=function(N,m,R){return{Description:R.Description,ElapsedTimeInMilliseconds:R.ElapsedTimeInMilliseconds,EndpointUrl:R.EndpointUrl,EndpointId:R.EndpointId,ErrorCode:R.ErrorCode,Event:m,ExceptionDetails:R.ExceptionDetails,ShouldBubbleToHost:R.ShouldBubbleToHost,SubscriptionId:N.id}},p}();L.default=E},2900:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=function(){function p(){}return p.Bridged="bridged",p.Unbridged="unbridged",p}();L.default=E},4694:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=(()=>{return(p=E||(E={}))[p.AmsBasedFileSharing=0]="AmsBasedFileSharing",E;var p})();L.default=E},6355:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=(()=>{return(p=E||(E={}))[p.Unknown=0]="Unknown",p[p.InProgress=1]="InProgress",p[p.Success=2]="Success",p[p.Error=3]="Error",E;var p})();L.default=E},5850:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=function(){function p(){}return p.ConversationProperties="/v1/users/ME/conversations/ALL/properties",p.ConversationMessages="/v1/users/ME/conversations/ALL/messages",p.Threads="/v1/threads/ALL",p.Contacts="/v1/users/ME/contacts/ALL",p}();L.default=E},8311:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=function(){function p(){}return p.Agent="Agent",p.MessageProperties="MessageProperties",p.InviteFree="InviteFree",p}();L.default=E},448:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=function(){function p(){}return p.RichText="RichText",p.Text="Text",p}();L.default=E},3207:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=function(){function p(){}return p.Text="Text",p.RichText="RichText",p.RichTextHtml="RichText/Html",p.ControlTyping="Control/Typing",p.ControlClearTyping="Control/ClearTyping",p.LiveState="Control/LiveState",p}();L.default=E},3372:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=function(){function p(){}return p.UserMessage="UserMessage",p.SwiftCard="SwiftCard",p.Typing="Control/Typing",p.ClearTyping="Control/ClearTyping",p.LiveState="Control/LiveState",p}();L.default=E},4352:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=(()=>{return(p=E||(E={}))[p.Unknown=0]="Unknown",p[p.User=1]="User",p[p.Bot=2]="Bot",E;var p})();L.default=E},5785:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=function(){function p(){}return p.NewMessage="NewMessage",p.MessageUpdate="MessageUpdate",p.UserPresence="UserPresence",p.ConversationUpdate="ConversationUpdate",p.ThreadUpdate="ThreadUpdate",p}();L.default=E},7708:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var E=(()=>{return(p=E||(E={}))[p.Typing=0]="Typing",p[p.ClearTyping=1]="ClearTyping",E;var p})();L.default=E},3805:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=E(1927),N=E(2553),m=E(501),R=function(){function u(v,M,A,T){this.isPolling=!1,this._ic3Info=v,this._onNewData=M,this._onError=A,this.callbackOnFailure=T}return u.prototype.start=function(){return this.isPolling||(this.isPolling=!0,this.startPolling()),Promise.resolve()},u.prototype.stop=function(){return this.isPolling=!1,Promise.resolve()},Object.defineProperty(u.prototype,"onNewData",{get:function(){return this._onNewData},set:function(v){this._onNewData=v},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onError",{get:function(){return this._onError},set:function(v){this._onError=v},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"setCallbackOnFailure",{set:function(v){this.setCallbackOnFailure=v},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"ic3Info",{get:function(){return this._ic3Info},set:function(v){this._ic3Info=v},enumerable:!1,configurable:!0}),u.prototype.startPolling=function(){var v=this;this.isPolling&&this.poll().then(function(M){v.isPolling&&v._onNewData&&v._onNewData(M)}).catch(function(M){v._onError&&v._onError(M)}).then(function(){v.startPolling()})},u.prototype.poll=function(){var v=p.default.getV1PollUrl(this._ic3Info.RegionGtms,this._ic3Info.subscriptionId);return N.default.poll(v,this._ic3Info.RegistrationToken,this.callbackOnEachRequestCompleted.bind(this))},u.prototype.callbackOnEachRequestCompleted=function(v){this.callbackOnFailure(v,m.default.pollRequestLog)},u}();L.default=R},2553:(Y,L,E)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=E(501),N=E(2915),m=E(6849),R=E(5874),u=E(6648),v=E(8636),M=function(){function A(){}return A.poll=function(T,g,h){var C=u.default.getDefaultIC3Headers();C[m.default.RegistrationTokenHeader]=g,C[m.default.ContentTypeHeader]=p.default.ContentTypeJson;var b=JSON.stringify({});return N.HttpClient.MakeRequest({callbackOnFailure:h,data:b,enableExponentialBackoff:!0,headers:C,redirect404RetryCount:p.default.retryCount,retryCount:p.default.retryCount,shouldRedirectOn404:!0,shouldResetOnFailure:!0,shouldRetryOnFailure:v.default.shouldRetryOnFailure,timeBetweenRetry:p.default.timeBetweenOperationRetry,type:R.default.POST,url:T})},A}();L.default=M},737:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.uuidv4=void 0,L.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(p){var N=16*Math.random()|0;return("x"===p?N:3&N|8).toString(16)})}},723:(Y,L,E)=>{"use strict";E.d(L,{c:()=>h});var p=E(9334),N=function(C,b){var w="function"==typeof Symbol&&C[Symbol.iterator];if(!w)return C;var P,O,I=w.call(C),k=[];try{for(;(void 0===b||b-- >0)&&!(P=I.next()).done;)k.push(P.value)}catch(V){O={error:V}}finally{try{P&&!P.done&&(w=I.return)&&w.call(I)}finally{if(O)throw O.error}}return k},m=function(C,b,w){if(w||2===arguments.length)for(var k,I=0,P=b.length;I<P;I++)(k||!(I in b))&&(k||(k=Array.prototype.slice.call(b,0,I)),k[I]=b[I]);return C.concat(k||Array.prototype.slice.call(b))},R=function(){function C(){}return C.prototype.active=function(){return p.I},C.prototype.with=function(b,w,I){for(var P=[],k=3;k<arguments.length;k++)P[k-3]=arguments[k];return w.call.apply(w,m([I],N(P),!1))},C.prototype.bind=function(b,w){return w},C.prototype.enable=function(){return this},C.prototype.disable=function(){return this},C}(),u=E(5090),v=E(3770),M=function(C,b){var w="function"==typeof Symbol&&C[Symbol.iterator];if(!w)return C;var P,O,I=w.call(C),k=[];try{for(;(void 0===b||b-- >0)&&!(P=I.next()).done;)k.push(P.value)}catch(V){O={error:V}}finally{try{P&&!P.done&&(w=I.return)&&w.call(I)}finally{if(O)throw O.error}}return k},A=function(C,b,w){if(w||2===arguments.length)for(var k,I=0,P=b.length;I<P;I++)(k||!(I in b))&&(k||(k=Array.prototype.slice.call(b,0,I)),k[I]=b[I]);return C.concat(k||Array.prototype.slice.call(b))},T="context",g=new R,h=function(){function C(){}return C.getInstance=function(){return this._instance||(this._instance=new C),this._instance},C.prototype.setGlobalContextManager=function(b){return(0,u.TG)(T,b,v.G.instance())},C.prototype.active=function(){return this._getContextManager().active()},C.prototype.with=function(b,w,I){for(var P,k=[],O=3;O<arguments.length;O++)k[O-3]=arguments[O];return(P=this._getContextManager()).with.apply(P,A([b,w,I],M(k),!1))},C.prototype.bind=function(b,w){return this._getContextManager().bind(b,w)},C.prototype._getContextManager=function(){return(0,u.Rd)(T)||g},C.prototype.disable=function(){this._getContextManager().disable(),(0,u.J_)(T,v.G.instance())},C}()},3770:(Y,L,E)=>{"use strict";E.d(L,{G:()=>h});var p=E(5090),R=function(){function C(b){this._namespace=b.namespace||"DiagComponentLogger"}return C.prototype.debug=function(){for(var b=[],w=0;w<arguments.length;w++)b[w]=arguments[w];return u("debug",this._namespace,b)},C.prototype.error=function(){for(var b=[],w=0;w<arguments.length;w++)b[w]=arguments[w];return u("error",this._namespace,b)},C.prototype.info=function(){for(var b=[],w=0;w<arguments.length;w++)b[w]=arguments[w];return u("info",this._namespace,b)},C.prototype.warn=function(){for(var b=[],w=0;w<arguments.length;w++)b[w]=arguments[w];return u("warn",this._namespace,b)},C.prototype.verbose=function(){for(var b=[],w=0;w<arguments.length;w++)b[w]=arguments[w];return u("verbose",this._namespace,b)},C}();function u(C,b,w){var I=(0,p.Rd)("diag");if(I)return w.unshift(b),I[C].apply(I,function(C,b,w){if(w||2===arguments.length)for(var k,I=0,P=b.length;I<P;I++)(k||!(I in b))&&(k||(k=Array.prototype.slice.call(b,0,I)),k[I]=b[I]);return C.concat(k||Array.prototype.slice.call(b))}([],function(C,b){var w="function"==typeof Symbol&&C[Symbol.iterator];if(!w)return C;var P,O,I=w.call(C),k=[];try{for(;(void 0===b||b-- >0)&&!(P=I.next()).done;)k.push(P.value)}catch(V){O={error:V}}finally{try{P&&!P.done&&(w=I.return)&&w.call(I)}finally{if(O)throw O.error}}return k}(w),!1))}var v=(()=>{return(C=v||(v={}))[C.NONE=0]="NONE",C[C.ERROR=30]="ERROR",C[C.WARN=50]="WARN",C[C.INFO=60]="INFO",C[C.DEBUG=70]="DEBUG",C[C.VERBOSE=80]="VERBOSE",C[C.ALL=9999]="ALL",v;var C})(),A=function(C,b){var w="function"==typeof Symbol&&C[Symbol.iterator];if(!w)return C;var P,O,I=w.call(C),k=[];try{for(;(void 0===b||b-- >0)&&!(P=I.next()).done;)k.push(P.value)}catch(V){O={error:V}}finally{try{P&&!P.done&&(w=I.return)&&w.call(I)}finally{if(O)throw O.error}}return k},T=function(C,b,w){if(w||2===arguments.length)for(var k,I=0,P=b.length;I<P;I++)(k||!(I in b))&&(k||(k=Array.prototype.slice.call(b,0,I)),k[I]=b[I]);return C.concat(k||Array.prototype.slice.call(b))},h=function(){function C(){function b(P){return function(){for(var k=[],O=0;O<arguments.length;O++)k[O]=arguments[O];var V=(0,p.Rd)("diag");if(V)return V[P].apply(V,T([],A(k),!1))}}var w=this;w.setLogger=function(P,k){var O,V,U;if(void 0===k&&(k={logLevel:v.INFO}),P===w){var B=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return w.error(null!==(O=B.stack)&&void 0!==O?O:B.message),!1}"number"==typeof k&&(k={logLevel:k});var H=(0,p.Rd)("diag"),W=function(C,b){function w(I,P){var k=b[I];return"function"==typeof k&&C>=P?k.bind(b):function(){}}return C<v.NONE?C=v.NONE:C>v.ALL&&(C=v.ALL),b=b||{},{error:w("error",v.ERROR),warn:w("warn",v.WARN),info:w("info",v.INFO),debug:w("debug",v.DEBUG),verbose:w("verbose",v.VERBOSE)}}(null!==(V=k.logLevel)&&void 0!==V?V:v.INFO,P);if(H&&!k.suppressOverrideMessage){var te=null!==(U=(new Error).stack)&&void 0!==U?U:"<failed to generate stacktrace>";H.warn("Current logger will be overwritten from "+te),W.warn("Current logger will overwrite one already registered from "+te)}return(0,p.TG)("diag",W,w,!0)},w.disable=function(){(0,p.J_)("diag",w)},w.createComponentLogger=function(P){return new R(P)},w.verbose=b("verbose"),w.debug=b("debug"),w.info=b("info"),w.warn=b("warn"),w.error=b("error")}return C.instance=function(){return this._instance||(this._instance=new C),this._instance},C}()},9334:(Y,L,E)=>{"use strict";function p(R){return Symbol.for(R)}E.d(L,{Y:()=>p,I:()=>m});var m=new function R(u){var v=this;v._currentContext=u?new Map(u):new Map,v.getValue=function(M){return v._currentContext.get(M)},v.setValue=function(M,A){var T=new R(v._currentContext);return T._currentContext.set(M,A),T},v.deleteValue=function(M){var A=new R(v._currentContext);return A._currentContext.delete(M),A}}},5090:(Y,L,E)=>{"use strict";E.d(L,{Rd:()=>g,TG:()=>T,J_:()=>h});var p="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:{},N="1.3.0",m=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,u=function(C){var b=new Set([C]),w=new Set,I=C.match(m);if(!I)return function(){return!1};var P_major=+I[1],P_minor=+I[2],P_patch=+I[3];if(null!=I[4])return function(U){return U===C};function k(V){return w.add(V),!1}function O(V){return b.add(V),!0}return function(U){if(b.has(U))return!0;if(w.has(U))return!1;var B=U.match(m);if(!B)return k(U);var H_minor=+B[2],H_patch=+B[3];return null!=B[4]||P_major!==+B[1]?k(U):0===P_major?P_minor===H_minor&&P_patch<=H_patch?O(U):k(U):P_minor<=H_minor?O(U):k(U)}}(N),v=N.split(".")[0],M=Symbol.for("opentelemetry.js.api."+v),A=p;function T(C,b,w,I){var P;void 0===I&&(I=!1);var k=A[M]=null!==(P=A[M])&&void 0!==P?P:{version:N};if(!I&&k[C]){var O=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+C);return w.error(O.stack||O.message),!1}return k.version!==N?(O=new Error("@opentelemetry/api: All API registration versions must match"),w.error(O.stack||O.message),!1):(k[C]=b,w.debug("@opentelemetry/api: Registered a global for "+C+" v"+N+"."),!0)}function g(C){var b,w,I=null===(b=A[M])||void 0===b?void 0:b.version;if(I&&u(I))return null===(w=A[M])||void 0===w?void 0:w[C]}function h(C,b){b.debug("@opentelemetry/api: Unregistering a global for "+C+" v"+N+".");var w=A[M];w&&delete w[C]}},2999:(Y,L,E)=>{"use strict";E.d(L,{g:()=>l});var p=E(5090),N=E(723),m=E(9334),R=E(3259),u=function(){function a(f){void 0===f&&(f=R.Rr),this._spanContext=f}return a.prototype.spanContext=function(){return this._spanContext},a.prototype.setAttribute=function(f,_){return this},a.prototype.setAttributes=function(f){return this},a.prototype.addEvent=function(f,_){return this},a.prototype.setStatus=function(f){return this},a.prototype.updateName=function(f){return this},a.prototype.end=function(f){},a.prototype.isRecording=function(){return!1},a.prototype.recordException=function(f,_){},a}(),v=(0,m.Y)("OpenTelemetry Context Key SPAN");function M(a){return a.getValue(v)||void 0}function A(){return M(N.c.getInstance().active())}function T(a,f){return a.setValue(v,f)}function g(a){return a.deleteValue(v)}function h(a,f){return T(a,new u(f))}function C(a){var f;return null===(f=M(a))||void 0===f?void 0:f.spanContext()}var b=/^([0-9a-f]{32})$/i,w=/^[0-9a-f]{16}$/i;function k(a){return function(a){return b.test(a)&&a!==R.AE}(a.traceId)&&function(a){return w.test(a)&&a!==R.fQ}(a.spanId)}function O(a){return new u(a)}var V=N.c.getInstance(),U=function(){function a(){}return a.prototype.startSpan=function(f,_,D){if(Boolean(null==_?void 0:_.root))return new u;var i=D&&C(D);return function(a){return"object"==typeof a&&"string"==typeof a.spanId&&"string"==typeof a.traceId&&"number"==typeof a.traceFlags}(i)&&k(i)?new u(i):new u},a.prototype.startActiveSpan=function(f,_,D,d){var i,y,z;if(!(arguments.length<2)){2===arguments.length?z=_:3===arguments.length?(i=_,z=D):(i=_,y=D,z=d);var q=null!=y?y:V.active(),Z=this.startSpan(f,i,q),ge=T(q,Z);return V.with(ge,z,void 0,Z)}},a}(),H=new U,W=function(){function a(f,_,D,d){this._provider=f,this.name=_,this.version=D,this.options=d}return a.prototype.startSpan=function(f,_,D){return this._getTracer().startSpan(f,_,D)},a.prototype.startActiveSpan=function(f,_,D,d){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},a.prototype._getTracer=function(){if(this._delegate)return this._delegate;var f=this._provider.getDelegateTracer(this.name,this.version,this.options);return f?(this._delegate=f,this._delegate):H},a}(),$=new(function(){function a(){}return a.prototype.getTracer=function(f,_,D){return new U},a}()),pe=function(){function a(){}return a.prototype.getTracer=function(f,_,D){var d;return null!==(d=this.getDelegateTracer(f,_,D))&&void 0!==d?d:new W(this,f,_,D)},a.prototype.getDelegate=function(){var f;return null!==(f=this._delegate)&&void 0!==f?f:$},a.prototype.setDelegate=function(f){this._delegate=f},a.prototype.getDelegateTracer=function(f,_,D){var d;return null===(d=this._delegate)||void 0===d?void 0:d.getTracer(f,_,D)},a}(),x=E(3770),r="trace",l=function(){function a(){this._proxyTracerProvider=new pe,this.wrapSpanContext=O,this.isSpanContextValid=k,this.deleteSpan=g,this.getSpan=M,this.getActiveSpan=A,this.getSpanContext=C,this.setSpan=T,this.setSpanContext=h}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.setGlobalTracerProvider=function(f){var _=(0,p.TG)(r,this._proxyTracerProvider,x.G.instance());return _&&this._proxyTracerProvider.setDelegate(f),_},a.prototype.getTracerProvider=function(){return(0,p.Rd)(r)||this._proxyTracerProvider},a.prototype.getTracer=function(f,_){return this.getTracerProvider().getTracer(f,_)},a.prototype.disable=function(){(0,p.J_)(r,x.G.instance()),this._proxyTracerProvider=new pe},a}().getInstance()},3259:(Y,L,E)=>{"use strict";E.d(L,{fQ:()=>N,Rr:()=>R,AE:()=>m});var p=(()=>{return(u=p||(p={}))[u.NONE=0]="NONE",u[u.SAMPLED=1]="SAMPLED",p;var u})(),N="0000000000000000",m="00000000000000000000000000000000",R={traceId:m,spanId:N,traceFlags:p.NONE}},2016:(Y,L,E)=>{"use strict";const p=L;p.bignum=E(2260),p.define=E(7738).define,p.base=E(8384),p.constants=E(2779),p.decoders=E(1274),p.encoders=E(7549)},7738:(Y,L,E)=>{"use strict";const p=E(7549),N=E(1274),m=E(9879);function u(v,M){this.name=v,this.body=M,this.decoders={},this.encoders={}}L.define=function(M,A){return new u(M,A)},u.prototype._createNamed=function(M){const A=this.name;function T(g){this._initNamed(g,A)}return m(T,M),T.prototype._initNamed=function(h,C){M.call(this,h,C)},new T(this)},u.prototype._getDecoder=function(M){return this.decoders.hasOwnProperty(M=M||"der")||(this.decoders[M]=this._createNamed(N[M])),this.decoders[M]},u.prototype.decode=function(M,A,T){return this._getDecoder(A).decode(M,T)},u.prototype._getEncoder=function(M){return this.encoders.hasOwnProperty(M=M||"der")||(this.encoders[M]=this._createNamed(p[M])),this.encoders[M]},u.prototype.encode=function(M,A,T){return this._getEncoder(A).encode(M,T)}},2227:(Y,L,E)=>{"use strict";const p=E(9879),N=E(4475).b,m=E(8114).Buffer;function R(v,M){N.call(this,M),m.isBuffer(v)?(this.base=v,this.offset=0,this.length=v.length):this.error("Input not Buffer")}function u(v,M){if(Array.isArray(v))this.length=0,this.value=v.map(function(A){return u.isEncoderBuffer(A)||(A=new u(A,M)),this.length+=A.length,A},this);else if("number"==typeof v){if(!(0<=v&&v<=255))return M.error("non-byte EncoderBuffer value");this.value=v,this.length=1}else if("string"==typeof v)this.value=v,this.length=m.byteLength(v);else{if(!m.isBuffer(v))return M.error("Unsupported type: "+typeof v);this.value=v,this.length=v.length}}p(R,N),L.C=R,R.isDecoderBuffer=function(M){return M instanceof R||"object"==typeof M&&m.isBuffer(M.base)&&"DecoderBuffer"===M.constructor.name&&"number"==typeof M.offset&&"number"==typeof M.length&&"function"==typeof M.save&&"function"==typeof M.restore&&"function"==typeof M.isEmpty&&"function"==typeof M.readUInt8&&"function"==typeof M.skip&&"function"==typeof M.raw},R.prototype.save=function(){return{offset:this.offset,reporter:N.prototype.save.call(this)}},R.prototype.restore=function(M){const A=new R(this.base);return A.offset=M.offset,A.length=this.offset,this.offset=M.offset,N.prototype.restore.call(this,M.reporter),A},R.prototype.isEmpty=function(){return this.offset===this.length},R.prototype.readUInt8=function(M){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(M||"DecoderBuffer overrun")},R.prototype.skip=function(M,A){if(!(this.offset+M<=this.length))return this.error(A||"DecoderBuffer overrun");const T=new R(this.base);return T._reporterState=this._reporterState,T.offset=this.offset,T.length=this.offset+M,this.offset+=M,T},R.prototype.raw=function(M){return this.base.slice(M?M.offset:this.offset,this.length)},L.R=u,u.isEncoderBuffer=function(M){return M instanceof u||"object"==typeof M&&"EncoderBuffer"===M.constructor.name&&"number"==typeof M.length&&"function"==typeof M.join},u.prototype.join=function(M,A){return M||(M=m.alloc(this.length)),A||(A=0),0===this.length||(Array.isArray(this.value)?this.value.forEach(function(T){T.join(M,A),A+=T.length}):("number"==typeof this.value?M[A]=this.value:"string"==typeof this.value?M.write(this.value,A):m.isBuffer(this.value)&&this.value.copy(M,A),A+=this.length)),M}},8384:(Y,L,E)=>{"use strict";const p=L;p.Reporter=E(4475).b,p.DecoderBuffer=E(2227).C,p.EncoderBuffer=E(2227).R,p.Node=E(4652)},4652:(Y,L,E)=>{"use strict";const p=E(4475).b,N=E(2227).R,m=E(2227).C,R=E(6055),u=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],v=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(u);function A(g,h,C){const b={};this._baseState=b,b.name=C,b.enc=g,b.parent=h||null,b.children=null,b.tag=null,b.args=null,b.reverseArgs=null,b.choice=null,b.optional=!1,b.any=!1,b.obj=!1,b.use=null,b.useDecoder=null,b.key=null,b.default=null,b.explicit=null,b.implicit=null,b.contains=null,b.parent||(b.children=[],this._wrap())}Y.exports=A;const T=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];A.prototype.clone=function(){const h=this._baseState,C={};T.forEach(function(w){C[w]=h[w]});const b=new this.constructor(C.parent);return b._baseState=C,b},A.prototype._wrap=function(){const h=this._baseState;v.forEach(function(C){this[C]=function(){const w=new this.constructor(this);return h.children.push(w),w[C].apply(w,arguments)}},this)},A.prototype._init=function(h){const C=this._baseState;R(null===C.parent),h.call(this),C.children=C.children.filter(function(b){return b._baseState.parent===this},this),R.equal(C.children.length,1,"Root node can have only one child")},A.prototype._useArgs=function(h){const C=this._baseState,b=h.filter(function(w){return w instanceof this.constructor},this);h=h.filter(function(w){return!(w instanceof this.constructor)},this),0!==b.length&&(R(null===C.children),C.children=b,b.forEach(function(w){w._baseState.parent=this},this)),0!==h.length&&(R(null===C.args),C.args=h,C.reverseArgs=h.map(function(w){if("object"!=typeof w||w.constructor!==Object)return w;const I={};return Object.keys(w).forEach(function(P){P==(0|P)&&(P|=0),I[w[P]]=P}),I}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(g){A.prototype[g]=function(){throw new Error(g+" not implemented for encoding: "+this._baseState.enc)}}),u.forEach(function(g){A.prototype[g]=function(){const C=this._baseState,b=Array.prototype.slice.call(arguments);return R(null===C.tag),C.tag=g,this._useArgs(b),this}}),A.prototype.use=function(h){R(h);const C=this._baseState;return R(null===C.use),C.use=h,this},A.prototype.optional=function(){return this._baseState.optional=!0,this},A.prototype.def=function(h){const C=this._baseState;return R(null===C.default),C.default=h,C.optional=!0,this},A.prototype.explicit=function(h){const C=this._baseState;return R(null===C.explicit&&null===C.implicit),C.explicit=h,this},A.prototype.implicit=function(h){const C=this._baseState;return R(null===C.explicit&&null===C.implicit),C.implicit=h,this},A.prototype.obj=function(){const h=this._baseState,C=Array.prototype.slice.call(arguments);return h.obj=!0,0!==C.length&&this._useArgs(C),this},A.prototype.key=function(h){const C=this._baseState;return R(null===C.key),C.key=h,this},A.prototype.any=function(){return this._baseState.any=!0,this},A.prototype.choice=function(h){const C=this._baseState;return R(null===C.choice),C.choice=h,this._useArgs(Object.keys(h).map(function(b){return h[b]})),this},A.prototype.contains=function(h){const C=this._baseState;return R(null===C.use),C.contains=h,this},A.prototype._decode=function(h,C){const b=this._baseState;if(null===b.parent)return h.wrapResult(b.children[0]._decode(h,C));let k,w=b.default,I=!0,P=null;if(null!==b.key&&(P=h.enterKey(b.key)),b.optional){let O=null;if(null!==b.explicit?O=b.explicit:null!==b.implicit?O=b.implicit:null!==b.tag&&(O=b.tag),null!==O||b.any){if(I=this._peekTag(h,O,b.any),h.isError(I))return I}else{const V=h.save();try{null===b.choice?this._decodeGeneric(b.tag,h,C):this._decodeChoice(h,C),I=!0}catch(U){I=!1}h.restore(V)}}if(b.obj&&I&&(k=h.enterObject()),I){if(null!==b.explicit){const V=this._decodeTag(h,b.explicit);if(h.isError(V))return V;h=V}const O=h.offset;if(null===b.use&&null===b.choice){let V;b.any&&(V=h.save());const U=this._decodeTag(h,null!==b.implicit?b.implicit:b.tag,b.any);if(h.isError(U))return U;b.any?w=h.raw(V):h=U}if(C&&C.track&&null!==b.tag&&C.track(h.path(),O,h.length,"tagged"),C&&C.track&&null!==b.tag&&C.track(h.path(),h.offset,h.length,"content"),b.any||(w=null===b.choice?this._decodeGeneric(b.tag,h,C):this._decodeChoice(h,C)),h.isError(w))return w;if(!b.any&&null===b.choice&&null!==b.children&&b.children.forEach(function(U){U._decode(h,C)}),b.contains&&("octstr"===b.tag||"bitstr"===b.tag)){const V=new m(w);w=this._getUse(b.contains,h._reporterState.obj)._decode(V,C)}}return b.obj&&I&&(w=h.leaveObject(k)),null===b.key||null===w&&!0!==I?null!==P&&h.exitKey(P):h.leaveKey(P,b.key,w),w},A.prototype._decodeGeneric=function(h,C,b){const w=this._baseState;return"seq"===h||"set"===h?null:"seqof"===h||"setof"===h?this._decodeList(C,h,w.args[0],b):/str$/.test(h)?this._decodeStr(C,h,b):"objid"===h&&w.args?this._decodeObjid(C,w.args[0],w.args[1],b):"objid"===h?this._decodeObjid(C,null,null,b):"gentime"===h||"utctime"===h?this._decodeTime(C,h,b):"null_"===h?this._decodeNull(C,b):"bool"===h?this._decodeBool(C,b):"objDesc"===h?this._decodeStr(C,h,b):"int"===h||"enum"===h?this._decodeInt(C,w.args&&w.args[0],b):null!==w.use?this._getUse(w.use,C._reporterState.obj)._decode(C,b):C.error("unknown tag: "+h)},A.prototype._getUse=function(h,C){const b=this._baseState;return b.useDecoder=this._use(h,C),R(null===b.useDecoder._baseState.parent),b.useDecoder=b.useDecoder._baseState.children[0],b.implicit!==b.useDecoder._baseState.implicit&&(b.useDecoder=b.useDecoder.clone(),b.useDecoder._baseState.implicit=b.implicit),b.useDecoder},A.prototype._decodeChoice=function(h,C){const b=this._baseState;let w=null,I=!1;return Object.keys(b.choice).some(function(P){const k=h.save(),O=b.choice[P];try{const V=O._decode(h,C);if(h.isError(V))return!1;w={type:P,value:V},I=!0}catch(V){return h.restore(k),!1}return!0},this),I?w:h.error("Choice not matched")},A.prototype._createEncoderBuffer=function(h){return new N(h,this.reporter)},A.prototype._encode=function(h,C,b){const w=this._baseState;if(null!==w.default&&w.default===h)return;const I=this._encodeValue(h,C,b);return void 0===I||this._skipDefault(I,C,b)?void 0:I},A.prototype._encodeValue=function(h,C,b){const w=this._baseState;if(null===w.parent)return w.children[0]._encode(h,C||new p);let I=null;if(this.reporter=C,w.optional&&void 0===h){if(null===w.default)return;h=w.default}let P=null,k=!1;if(w.any)I=this._createEncoderBuffer(h);else if(w.choice)I=this._encodeChoice(h,C);else if(w.contains)P=this._getUse(w.contains,b)._encode(h,C),k=!0;else if(w.children)P=w.children.map(function(O){if("null_"===O._baseState.tag)return O._encode(null,C,h);if(null===O._baseState.key)return C.error("Child should have a key");const V=C.enterKey(O._baseState.key);if("object"!=typeof h)return C.error("Child expected, but input is not object");const U=O._encode(h[O._baseState.key],C,h);return C.leaveKey(V),U},this).filter(function(O){return O}),P=this._createEncoderBuffer(P);else if("seqof"===w.tag||"setof"===w.tag){if(!w.args||1!==w.args.length)return C.error("Too many args for : "+w.tag);if(!Array.isArray(h))return C.error("seqof/setof, but data is not Array");const O=this.clone();O._baseState.implicit=null,P=this._createEncoderBuffer(h.map(function(V){return this._getUse(this._baseState.args[0],h)._encode(V,C)},O))}else null!==w.use?I=this._getUse(w.use,b)._encode(h,C):(P=this._encodePrimitive(w.tag,h),k=!0);if(!w.any&&null===w.choice){const O=null!==w.implicit?w.implicit:w.tag,V=null===w.implicit?"universal":"context";null===O?null===w.use&&C.error("Tag could be omitted only for .use()"):null===w.use&&(I=this._encodeComposite(O,k,V,P))}return null!==w.explicit&&(I=this._encodeComposite(w.explicit,!1,"context",I)),I},A.prototype._encodeChoice=function(h,C){const b=this._baseState,w=b.choice[h.type];return w||R(!1,h.type+" not found in "+JSON.stringify(Object.keys(b.choice))),w._encode(h.value,C)},A.prototype._encodePrimitive=function(h,C){const b=this._baseState;if(/str$/.test(h))return this._encodeStr(C,h);if("objid"===h&&b.args)return this._encodeObjid(C,b.reverseArgs[0],b.args[1]);if("objid"===h)return this._encodeObjid(C,null,null);if("gentime"===h||"utctime"===h)return this._encodeTime(C,h);if("null_"===h)return this._encodeNull();if("int"===h||"enum"===h)return this._encodeInt(C,b.args&&b.reverseArgs[0]);if("bool"===h)return this._encodeBool(C);if("objDesc"===h)return this._encodeStr(C,h);throw new Error("Unsupported tag: "+h)},A.prototype._isNumstr=function(h){return/^[0-9 ]*$/.test(h)},A.prototype._isPrintstr=function(h){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(h)}},4475:(Y,L,E)=>{"use strict";const p=E(9879);function N(R){this._reporterState={obj:null,path:[],options:R||{},errors:[]}}function m(R,u){this.path=R,this.rethrow(u)}L.b=N,N.prototype.isError=function(u){return u instanceof m},N.prototype.save=function(){const u=this._reporterState;return{obj:u.obj,pathLen:u.path.length}},N.prototype.restore=function(u){const v=this._reporterState;v.obj=u.obj,v.path=v.path.slice(0,u.pathLen)},N.prototype.enterKey=function(u){return this._reporterState.path.push(u)},N.prototype.exitKey=function(u){const v=this._reporterState;v.path=v.path.slice(0,u-1)},N.prototype.leaveKey=function(u,v,M){const A=this._reporterState;this.exitKey(u),null!==A.obj&&(A.obj[v]=M)},N.prototype.path=function(){return this._reporterState.path.join("/")},N.prototype.enterObject=function(){const u=this._reporterState,v=u.obj;return u.obj={},v},N.prototype.leaveObject=function(u){const v=this._reporterState,M=v.obj;return v.obj=u,M},N.prototype.error=function(u){let v;const M=this._reporterState,A=u instanceof m;if(v=A?u:new m(M.path.map(function(T){return"["+JSON.stringify(T)+"]"}).join(""),u.message||u,u.stack),!M.options.partial)throw v;return A||M.errors.push(v),v},N.prototype.wrapResult=function(u){const v=this._reporterState;return v.options.partial?{result:this.isError(u)?null:u,errors:v.errors}:u},p(m,Error),m.prototype.rethrow=function(u){if(this.message=u+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,m),!this.stack)try{throw new Error(this.message)}catch(v){this.stack=v.stack}return this}},2953:(Y,L)=>{"use strict";function E(p){const N={};return Object.keys(p).forEach(function(m){(0|m)==m&&(m|=0),N[p[m]]=m}),N}L.tagClass={0:"universal",1:"application",2:"context",3:"private"},L.tagClassByName=E(L.tagClass),L.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},L.tagByName=E(L.tag)},2779:(Y,L,E)=>{"use strict";const p=L;p._reverse=function(m){const R={};return Object.keys(m).forEach(function(u){(0|u)==u&&(u|=0),R[m[u]]=u}),R},p.der=E(2953)},4163:(Y,L,E)=>{"use strict";const p=E(9879),N=E(2260),m=E(2227).C,R=E(4652),u=E(2953);function v(g){this.enc="der",this.name=g.name,this.entity=g,this.tree=new M,this.tree._init(g.body)}function M(g){R.call(this,"der",g)}function A(g,h){let C=g.readUInt8(h);if(g.isError(C))return C;const b=u.tagClass[C>>6],w=0==(32&C);if(31==(31&C)){let P=C;for(C=0;128==(128&P);){if(P=g.readUInt8(h),g.isError(P))return P;C<<=7,C|=127&P}}else C&=31;return{cls:b,primitive:w,tag:C,tagStr:u.tag[C]}}function T(g,h,C){let b=g.readUInt8(C);if(g.isError(b))return b;if(!h&&128===b)return null;if(0==(128&b))return b;const w=127&b;if(w>4)return g.error("length octect is too long");b=0;for(let I=0;I<w;I++){b<<=8;const P=g.readUInt8(C);if(g.isError(P))return P;b|=P}return b}Y.exports=v,v.prototype.decode=function(h,C){return m.isDecoderBuffer(h)||(h=new m(h,C)),this.tree._decode(h,C)},p(M,R),M.prototype._peekTag=function(h,C,b){if(h.isEmpty())return!1;const w=h.save(),I=A(h,'Failed to peek tag: "'+C+'"');return h.isError(I)?I:(h.restore(w),I.tag===C||I.tagStr===C||I.tagStr+"of"===C||b)},M.prototype._decodeTag=function(h,C,b){const w=A(h,'Failed to decode tag of "'+C+'"');if(h.isError(w))return w;let I=T(h,w.primitive,'Failed to get length of "'+C+'"');if(h.isError(I))return I;if(!b&&w.tag!==C&&w.tagStr!==C&&w.tagStr+"of"!==C)return h.error('Failed to match tag: "'+C+'"');if(w.primitive||null!==I)return h.skip(I,'Failed to match body of: "'+C+'"');const P=h.save(),k=this._skipUntilEnd(h,'Failed to skip indefinite length body: "'+this.tag+'"');return h.isError(k)?k:(I=h.offset-P.offset,h.restore(P),h.skip(I,'Failed to match body of: "'+C+'"'))},M.prototype._skipUntilEnd=function(h,C){for(;;){const b=A(h,C);if(h.isError(b))return b;const w=T(h,b.primitive,C);if(h.isError(w))return w;let I;if(I=b.primitive||null!==w?h.skip(w):this._skipUntilEnd(h,C),h.isError(I))return I;if("end"===b.tagStr)break}},M.prototype._decodeList=function(h,C,b,w){const I=[];for(;!h.isEmpty();){const P=this._peekTag(h,"end");if(h.isError(P))return P;const k=b.decode(h,"der",w);if(h.isError(k)&&P)break;I.push(k)}return I},M.prototype._decodeStr=function(h,C){if("bitstr"===C){const b=h.readUInt8();return h.isError(b)?b:{unused:b,data:h.raw()}}if("bmpstr"===C){const b=h.raw();if(b.length%2==1)return h.error("Decoding of string type: bmpstr length mismatch");let w="";for(let I=0;I<b.length/2;I++)w+=String.fromCharCode(b.readUInt16BE(2*I));return w}if("numstr"===C){const b=h.raw().toString("ascii");return this._isNumstr(b)?b:h.error("Decoding of string type: numstr unsupported characters")}if("octstr"===C)return h.raw();if("objDesc"===C)return h.raw();if("printstr"===C){const b=h.raw().toString("ascii");return this._isPrintstr(b)?b:h.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(C)?h.raw().toString():h.error("Decoding of string type: "+C+" unsupported")},M.prototype._decodeObjid=function(h,C,b){let w;const I=[];let P=0,k=0;for(;!h.isEmpty();)k=h.readUInt8(),P<<=7,P|=127&k,0==(128&k)&&(I.push(P),P=0);if(128&k&&I.push(P),w=b?I:[I[0]/40|0,I[0]%40].concat(I.slice(1)),C){let U=C[w.join(" ")];void 0===U&&(U=C[w.join(".")]),void 0!==U&&(w=U)}return w},M.prototype._decodeTime=function(h,C){const b=h.raw().toString();let w,I,P,k,O,V;if("gentime"===C)w=0|b.slice(0,4),I=0|b.slice(4,6),P=0|b.slice(6,8),k=0|b.slice(8,10),O=0|b.slice(10,12),V=0|b.slice(12,14);else{if("utctime"!==C)return h.error("Decoding "+C+" time is not supported yet");w=0|b.slice(0,2),I=0|b.slice(2,4),P=0|b.slice(4,6),k=0|b.slice(6,8),O=0|b.slice(8,10),V=0|b.slice(10,12),w=w<70?2e3+w:1900+w}return Date.UTC(w,I-1,P,k,O,V,0)},M.prototype._decodeNull=function(){return null},M.prototype._decodeBool=function(h){const C=h.readUInt8();return h.isError(C)?C:0!==C},M.prototype._decodeInt=function(h,C){const b=h.raw();let w=new N(b);return C&&(w=C[w.toString(10)]||w),w},M.prototype._use=function(h,C){return"function"==typeof h&&(h=h(C)),h._getDecoder("der").tree}},1274:(Y,L,E)=>{"use strict";const p=L;p.der=E(4163),p.pem=E(773)},773:(Y,L,E)=>{"use strict";const p=E(9879),N=E(8114).Buffer,m=E(4163);function R(u){m.call(this,u),this.enc="pem"}p(R,m),Y.exports=R,R.prototype.decode=function(v,M){const A=v.toString().split(/[\r\n]+/g),T=M.label.toUpperCase(),g=/^-----(BEGIN|END) ([^-]+)-----$/;let h=-1,C=-1;for(let I=0;I<A.length;I++){const P=A[I].match(g);if(null!==P&&P[2]===T){if(-1!==h){if("END"!==P[1])break;C=I;break}if("BEGIN"!==P[1])break;h=I}}if(-1===h||-1===C)throw new Error("PEM section not found for: "+T);const b=A.slice(h+1,C).join("");b.replace(/[^a-z0-9+/=]+/gi,"");const w=N.from(b,"base64");return m.prototype.decode.call(this,w,M)}},5079:(Y,L,E)=>{"use strict";const p=E(9879),N=E(8114).Buffer,m=E(4652),R=E(2953);function u(T){this.enc="der",this.name=T.name,this.entity=T,this.tree=new v,this.tree._init(T.body)}function v(T){m.call(this,"der",T)}function M(T){return T<10?"0"+T:T}Y.exports=u,u.prototype.encode=function(g,h){return this.tree._encode(g,h).join()},p(v,m),v.prototype._encodeComposite=function(g,h,C,b){const w=function(T,g,h,C){let b;if("seqof"===T?T="seq":"setof"===T&&(T="set"),R.tagByName.hasOwnProperty(T))b=R.tagByName[T];else{if("number"!=typeof T||(0|T)!==T)return C.error("Unknown tag: "+T);b=T}return b>=31?C.error("Multi-octet tag encoding unsupported"):(g||(b|=32),b|=R.tagClassByName[h||"universal"]<<6,b)}(g,h,C,this.reporter);if(b.length<128){const k=N.alloc(2);return k[0]=w,k[1]=b.length,this._createEncoderBuffer([k,b])}let I=1;for(let k=b.length;k>=256;k>>=8)I++;const P=N.alloc(2+I);P[0]=w,P[1]=128|I;for(let k=1+I,O=b.length;O>0;k--,O>>=8)P[k]=255&O;return this._createEncoderBuffer([P,b])},v.prototype._encodeStr=function(g,h){if("bitstr"===h)return this._createEncoderBuffer([0|g.unused,g.data]);if("bmpstr"===h){const C=N.alloc(2*g.length);for(let b=0;b<g.length;b++)C.writeUInt16BE(g.charCodeAt(b),2*b);return this._createEncoderBuffer(C)}return"numstr"===h?this._isNumstr(g)?this._createEncoderBuffer(g):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===h?this._isPrintstr(g)?this._createEncoderBuffer(g):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(h)||"objDesc"===h?this._createEncoderBuffer(g):this.reporter.error("Encoding of string type: "+h+" unsupported")},v.prototype._encodeObjid=function(g,h,C){if("string"==typeof g){if(!h)return this.reporter.error("string objid given, but no values map found");if(!h.hasOwnProperty(g))return this.reporter.error("objid not found in values map");g=h[g].split(/[\s.]+/g);for(let P=0;P<g.length;P++)g[P]|=0}else if(Array.isArray(g)){g=g.slice();for(let P=0;P<g.length;P++)g[P]|=0}if(!Array.isArray(g))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(g));if(!C){if(g[1]>=40)return this.reporter.error("Second objid identifier OOB");g.splice(0,2,40*g[0]+g[1])}let b=0;for(let P=0;P<g.length;P++){let k=g[P];for(b++;k>=128;k>>=7)b++}const w=N.alloc(b);let I=w.length-1;for(let P=g.length-1;P>=0;P--){let k=g[P];for(w[I--]=127&k;(k>>=7)>0;)w[I--]=128|127&k}return this._createEncoderBuffer(w)},v.prototype._encodeTime=function(g,h){let C;const b=new Date(g);return"gentime"===h?C=[M(b.getUTCFullYear()),M(b.getUTCMonth()+1),M(b.getUTCDate()),M(b.getUTCHours()),M(b.getUTCMinutes()),M(b.getUTCSeconds()),"Z"].join(""):"utctime"===h?C=[M(b.getUTCFullYear()%100),M(b.getUTCMonth()+1),M(b.getUTCDate()),M(b.getUTCHours()),M(b.getUTCMinutes()),M(b.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+h+" time is not supported yet"),this._encodeStr(C,"octstr")},v.prototype._encodeNull=function(){return this._createEncoderBuffer("")},v.prototype._encodeInt=function(g,h){if("string"==typeof g){if(!h)return this.reporter.error("String int or enum given, but no values map");if(!h.hasOwnProperty(g))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(g));g=h[g]}if("number"!=typeof g&&!N.isBuffer(g)){const w=g.toArray();!g.sign&&128&w[0]&&w.unshift(0),g=N.from(w)}if(N.isBuffer(g)){let w=g.length;0===g.length&&w++;const I=N.alloc(w);return g.copy(I),0===g.length&&(I[0]=0),this._createEncoderBuffer(I)}if(g<128)return this._createEncoderBuffer(g);if(g<256)return this._createEncoderBuffer([0,g]);let C=1;for(let w=g;w>=256;w>>=8)C++;const b=new Array(C);for(let w=b.length-1;w>=0;w--)b[w]=255&g,g>>=8;return 128&b[0]&&b.unshift(0),this._createEncoderBuffer(N.from(b))},v.prototype._encodeBool=function(g){return this._createEncoderBuffer(g?255:0)},v.prototype._use=function(g,h){return"function"==typeof g&&(g=g(h)),g._getEncoder("der").tree},v.prototype._skipDefault=function(g,h,C){const b=this._baseState;let w;if(null===b.default)return!1;const I=g.join();if(void 0===b.defaultBuffer&&(b.defaultBuffer=this._encodeValue(b.default,h,C).join()),I.length!==b.defaultBuffer.length)return!1;for(w=0;w<I.length;w++)if(I[w]!==b.defaultBuffer[w])return!1;return!0}},7549:(Y,L,E)=>{"use strict";const p=L;p.der=E(5079),p.pem=E(6163)},6163:(Y,L,E)=>{"use strict";const p=E(9879),N=E(5079);function m(R){N.call(this,R),this.enc="pem"}p(m,N),Y.exports=m,m.prototype.encode=function(u,v){const A=N.prototype.encode.call(this,u).toString("base64"),T=["-----BEGIN "+v.label+"-----"];for(let g=0;g<A.length;g+=64)T.push(A.slice(g,g+64));return T.push("-----END "+v.label+"-----"),T.join("\n")}},2260:function(Y,L,E){!function(p,N){"use strict";function m(x,r){if(!x)throw new Error(r||"Assertion failed")}function R(x,r){x.super_=r;var s=function(){};s.prototype=r.prototype,x.prototype=new s,x.prototype.constructor=x}function u(x,r,s){if(u.isBN(x))return x;this.negative=0,this.words=null,this.length=0,this.red=null,null!==x&&(("le"===r||"be"===r)&&(s=r,r=10),this._init(x||0,r||10,s||"be"))}var v;"object"==typeof p?p.exports=u:N.BN=u,u.BN=u,u.wordSize=26;try{v="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:E(950).Buffer}catch(x){}function M(x,r){var s=x.charCodeAt(r);return s>=65&&s<=70?s-55:s>=97&&s<=102?s-87:s-48&15}function A(x,r,s){var l=M(x,s);return s-1>=r&&(l|=M(x,s-1)<<4),l}function T(x,r,s,l){for(var a=0,f=Math.min(x.length,s),_=r;_<f;_++){var D=x.charCodeAt(_)-48;a*=l,a+=D>=49?D-49+10:D>=17?D-17+10:D}return a}u.isBN=function(r){return r instanceof u||null!==r&&"object"==typeof r&&r.constructor.wordSize===u.wordSize&&Array.isArray(r.words)},u.max=function(r,s){return r.cmp(s)>0?r:s},u.min=function(r,s){return r.cmp(s)<0?r:s},u.prototype._init=function(r,s,l){if("number"==typeof r)return this._initNumber(r,s,l);if("object"==typeof r)return this._initArray(r,s,l);"hex"===s&&(s=16),m(s===(0|s)&&s>=2&&s<=36);var a=0;"-"===(r=r.toString().replace(/\s+/g,""))[0]&&(a++,this.negative=1),a<r.length&&(16===s?this._parseHex(r,a,l):(this._parseBase(r,s,a),"le"===l&&this._initArray(this.toArray(),s,l)))},u.prototype._initNumber=function(r,s,l){r<0&&(this.negative=1,r=-r),r<67108864?(this.words=[67108863&r],this.length=1):r<4503599627370496?(this.words=[67108863&r,r/67108864&67108863],this.length=2):(m(r<9007199254740992),this.words=[67108863&r,r/67108864&67108863,1],this.length=3),"le"===l&&this._initArray(this.toArray(),s,l)},u.prototype._initArray=function(r,s,l){if(m("number"==typeof r.length),r.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(r.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var f,_,D=0;if("be"===l)for(a=r.length-1,f=0;a>=0;a-=3)this.words[f]|=(_=r[a]|r[a-1]<<8|r[a-2]<<16)<<D&67108863,this.words[f+1]=_>>>26-D&67108863,(D+=24)>=26&&(D-=26,f++);else if("le"===l)for(a=0,f=0;a<r.length;a+=3)this.words[f]|=(_=r[a]|r[a+1]<<8|r[a+2]<<16)<<D&67108863,this.words[f+1]=_>>>26-D&67108863,(D+=24)>=26&&(D-=26,f++);return this.strip()},u.prototype._parseHex=function(r,s,l){this.length=Math.ceil((r.length-s)/6),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var D,f=0,_=0;if("be"===l)for(a=r.length-1;a>=s;a-=2)D=A(r,s,a)<<f,this.words[_]|=67108863&D,f>=18?(f-=18,this.words[_+=1]|=D>>>26):f+=8;else for(a=(r.length-s)%2==0?s+1:s;a<r.length;a+=2)D=A(r,s,a)<<f,this.words[_]|=67108863&D,f>=18?(f-=18,this.words[_+=1]|=D>>>26):f+=8;this.strip()},u.prototype._parseBase=function(r,s,l){this.words=[0],this.length=1;for(var a=0,f=1;f<=67108863;f*=s)a++;a--,f=f/s|0;for(var _=r.length-l,D=_%a,d=Math.min(_,_-D)+l,i=0,y=l;y<d;y+=a)i=T(r,y,y+a,s),this.imuln(f),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i);if(0!==D){var z=1;for(i=T(r,y,r.length,s),y=0;y<D;y++)z*=s;this.imuln(z),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i)}this.strip()},u.prototype.copy=function(r){r.words=new Array(this.length);for(var s=0;s<this.length;s++)r.words[s]=this.words[s];r.length=this.length,r.negative=this.negative,r.red=this.red},u.prototype.clone=function(){var r=new u(null);return this.copy(r),r},u.prototype._expand=function(r){for(;this.length<r;)this.words[this.length++]=0;return this},u.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},u.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},u.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],C=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function w(x,r,s){s.negative=r.negative^x.negative;var l=x.length+r.length|0;s.length=l,l=l-1|0;var a=0|x.words[0],f=0|r.words[0],_=a*f,d=_/67108864|0;s.words[0]=67108863&_;for(var i=1;i<l;i++){for(var y=d>>>26,z=67108863&d,q=Math.min(i,r.length-1),Z=Math.max(0,i-x.length+1);Z<=q;Z++)y+=(_=(a=0|x.words[i-Z|0])*(f=0|r.words[Z])+z)/67108864|0,z=67108863&_;s.words[i]=0|z,d=0|y}return 0!==d?s.words[i]=0|d:s.length--,s.strip()}u.prototype.toString=function(r,s){var l;if(s=0|s||1,16===(r=r||10)||"hex"===r){l="";for(var a=0,f=0,_=0;_<this.length;_++){var D=this.words[_],d=(16777215&(D<<a|f)).toString(16);l=0!=(f=D>>>24-a&16777215)||_!==this.length-1?g[6-d.length]+d+l:d+l,(a+=2)>=26&&(a-=26,_--)}for(0!==f&&(l=f.toString(16)+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}if(r===(0|r)&&r>=2&&r<=36){var i=h[r],y=C[r];l="";var z=this.clone();for(z.negative=0;!z.isZero();){var q=z.modn(y).toString(r);l=(z=z.idivn(y)).isZero()?q+l:g[i-q.length]+q+l}for(this.isZero()&&(l="0"+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}m(!1,"Base should be between 2 and 36")},u.prototype.toNumber=function(){var r=this.words[0];return 2===this.length?r+=67108864*this.words[1]:3===this.length&&1===this.words[2]?r+=4503599627370496+67108864*this.words[1]:this.length>2&&m(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-r:r},u.prototype.toJSON=function(){return this.toString(16)},u.prototype.toBuffer=function(r,s){return m(void 0!==v),this.toArrayLike(v,r,s)},u.prototype.toArray=function(r,s){return this.toArrayLike(Array,r,s)},u.prototype.toArrayLike=function(r,s,l){var a=this.byteLength(),f=l||Math.max(1,a);m(a<=f,"byte array longer than desired length"),m(f>0,"Requested array length <= 0"),this.strip();var d,i,_="le"===s,D=new r(f),y=this.clone();if(_){for(i=0;!y.isZero();i++)d=y.andln(255),y.iushrn(8),D[i]=d;for(;i<f;i++)D[i]=0}else{for(i=0;i<f-a;i++)D[i]=0;for(i=0;!y.isZero();i++)d=y.andln(255),y.iushrn(8),D[f-i-1]=d}return D},u.prototype._countBits=Math.clz32?function(r){return 32-Math.clz32(r)}:function(r){var s=r,l=0;return s>=4096&&(l+=13,s>>>=13),s>=64&&(l+=7,s>>>=7),s>=8&&(l+=4,s>>>=4),s>=2&&(l+=2,s>>>=2),l+s},u.prototype._zeroBits=function(r){if(0===r)return 26;var s=r,l=0;return 0==(8191&s)&&(l+=13,s>>>=13),0==(127&s)&&(l+=7,s>>>=7),0==(15&s)&&(l+=4,s>>>=4),0==(3&s)&&(l+=2,s>>>=2),0==(1&s)&&l++,l},u.prototype.bitLength=function(){var s=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+s},u.prototype.zeroBits=function(){if(this.isZero())return 0;for(var r=0,s=0;s<this.length;s++){var l=this._zeroBits(this.words[s]);if(r+=l,26!==l)break}return r},u.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},u.prototype.toTwos=function(r){return 0!==this.negative?this.abs().inotn(r).iaddn(1):this.clone()},u.prototype.fromTwos=function(r){return this.testn(r-1)?this.notn(r).iaddn(1).ineg():this.clone()},u.prototype.isNeg=function(){return 0!==this.negative},u.prototype.neg=function(){return this.clone().ineg()},u.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},u.prototype.iuor=function(r){for(;this.length<r.length;)this.words[this.length++]=0;for(var s=0;s<r.length;s++)this.words[s]=this.words[s]|r.words[s];return this.strip()},u.prototype.ior=function(r){return m(0==(this.negative|r.negative)),this.iuor(r)},u.prototype.or=function(r){return this.length>r.length?this.clone().ior(r):r.clone().ior(this)},u.prototype.uor=function(r){return this.length>r.length?this.clone().iuor(r):r.clone().iuor(this)},u.prototype.iuand=function(r){var s;s=this.length>r.length?r:this;for(var l=0;l<s.length;l++)this.words[l]=this.words[l]&r.words[l];return this.length=s.length,this.strip()},u.prototype.iand=function(r){return m(0==(this.negative|r.negative)),this.iuand(r)},u.prototype.and=function(r){return this.length>r.length?this.clone().iand(r):r.clone().iand(this)},u.prototype.uand=function(r){return this.length>r.length?this.clone().iuand(r):r.clone().iuand(this)},u.prototype.iuxor=function(r){var s,l;this.length>r.length?(s=this,l=r):(s=r,l=this);for(var a=0;a<l.length;a++)this.words[a]=s.words[a]^l.words[a];if(this!==s)for(;a<s.length;a++)this.words[a]=s.words[a];return this.length=s.length,this.strip()},u.prototype.ixor=function(r){return m(0==(this.negative|r.negative)),this.iuxor(r)},u.prototype.xor=function(r){return this.length>r.length?this.clone().ixor(r):r.clone().ixor(this)},u.prototype.uxor=function(r){return this.length>r.length?this.clone().iuxor(r):r.clone().iuxor(this)},u.prototype.inotn=function(r){m("number"==typeof r&&r>=0);var s=0|Math.ceil(r/26),l=r%26;this._expand(s),l>0&&s--;for(var a=0;a<s;a++)this.words[a]=67108863&~this.words[a];return l>0&&(this.words[a]=~this.words[a]&67108863>>26-l),this.strip()},u.prototype.notn=function(r){return this.clone().inotn(r)},u.prototype.setn=function(r,s){m("number"==typeof r&&r>=0);var l=r/26|0,a=r%26;return this._expand(l+1),this.words[l]=s?this.words[l]|1<<a:this.words[l]&~(1<<a),this.strip()},u.prototype.iadd=function(r){var s,l,a;if(0!==this.negative&&0===r.negative)return this.negative=0,s=this.isub(r),this.negative^=1,this._normSign();if(0===this.negative&&0!==r.negative)return r.negative=0,s=this.isub(r),r.negative=1,s._normSign();this.length>r.length?(l=this,a=r):(l=r,a=this);for(var f=0,_=0;_<a.length;_++)this.words[_]=67108863&(s=(0|l.words[_])+(0|a.words[_])+f),f=s>>>26;for(;0!==f&&_<l.length;_++)this.words[_]=67108863&(s=(0|l.words[_])+f),f=s>>>26;if(this.length=l.length,0!==f)this.words[this.length]=f,this.length++;else if(l!==this)for(;_<l.length;_++)this.words[_]=l.words[_];return this},u.prototype.add=function(r){var s;return 0!==r.negative&&0===this.negative?(r.negative=0,s=this.sub(r),r.negative^=1,s):0===r.negative&&0!==this.negative?(this.negative=0,s=r.sub(this),this.negative=1,s):this.length>r.length?this.clone().iadd(r):r.clone().iadd(this)},u.prototype.isub=function(r){if(0!==r.negative){r.negative=0;var s=this.iadd(r);return r.negative=1,s._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(r),this.negative=1,this._normSign();var a,f,l=this.cmp(r);if(0===l)return this.negative=0,this.length=1,this.words[0]=0,this;l>0?(a=this,f=r):(a=r,f=this);for(var _=0,D=0;D<f.length;D++)_=(s=(0|a.words[D])-(0|f.words[D])+_)>>26,this.words[D]=67108863&s;for(;0!==_&&D<a.length;D++)_=(s=(0|a.words[D])+_)>>26,this.words[D]=67108863&s;if(0===_&&D<a.length&&a!==this)for(;D<a.length;D++)this.words[D]=a.words[D];return this.length=Math.max(this.length,D),a!==this&&(this.negative=1),this.strip()},u.prototype.sub=function(r){return this.clone().isub(r)};var I=function(r,s,l){var d,i,y,a=r.words,f=s.words,_=l.words,D=0,z=0|a[0],q=8191&z,Z=z>>>13,ge=0|a[1],me=8191&ge,le=ge>>>13,fe=0|a[2],ae=8191&fe,de=fe>>>13,xe=0|a[3],Ce=8191&xe,oe=xe>>>13,we=0|a[4],ye=8191&we,re=we>>>13,ee=0|a[5],J=8191&ee,ue=ee>>>13,Ae=0|a[6],Te=8191&Ae,Ee=Ae>>>13,We=0|a[7],Ne=8191&We,_e=We>>>13,Be=0|a[8],De=8191&Be,Le=Be>>>13,Mt=0|a[9],He=8191&Mt,$e=Mt>>>13,It=0|f[0],et=8191&It,pt=It>>>13,Ct=0|f[1],at=8191&Ct,it=Ct>>>13,Mn=0|f[2],ot=8191&Mn,Ke=Mn>>>13,In=0|f[3],Ge=8191&In,ut=In>>>13,On=0|f[4],nt=8191&On,Ve=On>>>13,kt=0|f[5],ft=8191&kt,st=kt>>>13,qn=0|f[6],ct=8191&qn,ze=qn>>>13,an=0|f[7],dt=8191&an,Xe=an>>>13,Yt=0|f[8],Ye=8191&Yt,Qe=Yt>>>13,kn=0|f[9],Ze=8191&kn,lt=kn>>>13;l.negative=r.negative^s.negative,l.length=19;var ln=(D+(d=Math.imul(q,et))|0)+((8191&(i=(i=Math.imul(q,pt))+Math.imul(Z,et)|0))<<13)|0;D=((y=Math.imul(Z,pt))+(i>>>13)|0)+(ln>>>26)|0,ln&=67108863,d=Math.imul(me,et),i=(i=Math.imul(me,pt))+Math.imul(le,et)|0,y=Math.imul(le,pt);var jt=(D+(d=d+Math.imul(q,at)|0)|0)+((8191&(i=(i=i+Math.imul(q,it)|0)+Math.imul(Z,at)|0))<<13)|0;D=((y=y+Math.imul(Z,it)|0)+(i>>>13)|0)+(jt>>>26)|0,jt&=67108863,d=Math.imul(ae,et),i=(i=Math.imul(ae,pt))+Math.imul(de,et)|0,y=Math.imul(de,pt),d=d+Math.imul(me,at)|0,i=(i=i+Math.imul(me,it)|0)+Math.imul(le,at)|0,y=y+Math.imul(le,it)|0;var qt=(D+(d=d+Math.imul(q,ot)|0)|0)+((8191&(i=(i=i+Math.imul(q,Ke)|0)+Math.imul(Z,ot)|0))<<13)|0;D=((y=y+Math.imul(Z,Ke)|0)+(i>>>13)|0)+(qt>>>26)|0,qt&=67108863,d=Math.imul(Ce,et),i=(i=Math.imul(Ce,pt))+Math.imul(oe,et)|0,y=Math.imul(oe,pt),d=d+Math.imul(ae,at)|0,i=(i=i+Math.imul(ae,it)|0)+Math.imul(de,at)|0,y=y+Math.imul(de,it)|0,d=d+Math.imul(me,ot)|0,i=(i=i+Math.imul(me,Ke)|0)+Math.imul(le,ot)|0,y=y+Math.imul(le,Ke)|0;var wn=(D+(d=d+Math.imul(q,Ge)|0)|0)+((8191&(i=(i=i+Math.imul(q,ut)|0)+Math.imul(Z,Ge)|0))<<13)|0;D=((y=y+Math.imul(Z,ut)|0)+(i>>>13)|0)+(wn>>>26)|0,wn&=67108863,d=Math.imul(ye,et),i=(i=Math.imul(ye,pt))+Math.imul(re,et)|0,y=Math.imul(re,pt),d=d+Math.imul(Ce,at)|0,i=(i=i+Math.imul(Ce,it)|0)+Math.imul(oe,at)|0,y=y+Math.imul(oe,it)|0,d=d+Math.imul(ae,ot)|0,i=(i=i+Math.imul(ae,Ke)|0)+Math.imul(de,ot)|0,y=y+Math.imul(de,Ke)|0,d=d+Math.imul(me,Ge)|0,i=(i=i+Math.imul(me,ut)|0)+Math.imul(le,Ge)|0,y=y+Math.imul(le,ut)|0;var hn=(D+(d=d+Math.imul(q,nt)|0)|0)+((8191&(i=(i=i+Math.imul(q,Ve)|0)+Math.imul(Z,nt)|0))<<13)|0;D=((y=y+Math.imul(Z,Ve)|0)+(i>>>13)|0)+(hn>>>26)|0,hn&=67108863,d=Math.imul(J,et),i=(i=Math.imul(J,pt))+Math.imul(ue,et)|0,y=Math.imul(ue,pt),d=d+Math.imul(ye,at)|0,i=(i=i+Math.imul(ye,it)|0)+Math.imul(re,at)|0,y=y+Math.imul(re,it)|0,d=d+Math.imul(Ce,ot)|0,i=(i=i+Math.imul(Ce,Ke)|0)+Math.imul(oe,ot)|0,y=y+Math.imul(oe,Ke)|0,d=d+Math.imul(ae,Ge)|0,i=(i=i+Math.imul(ae,ut)|0)+Math.imul(de,Ge)|0,y=y+Math.imul(de,ut)|0,d=d+Math.imul(me,nt)|0,i=(i=i+Math.imul(me,Ve)|0)+Math.imul(le,nt)|0,y=y+Math.imul(le,Ve)|0;var gn=(D+(d=d+Math.imul(q,ft)|0)|0)+((8191&(i=(i=i+Math.imul(q,st)|0)+Math.imul(Z,ft)|0))<<13)|0;D=((y=y+Math.imul(Z,st)|0)+(i>>>13)|0)+(gn>>>26)|0,gn&=67108863,d=Math.imul(Te,et),i=(i=Math.imul(Te,pt))+Math.imul(Ee,et)|0,y=Math.imul(Ee,pt),d=d+Math.imul(J,at)|0,i=(i=i+Math.imul(J,it)|0)+Math.imul(ue,at)|0,y=y+Math.imul(ue,it)|0,d=d+Math.imul(ye,ot)|0,i=(i=i+Math.imul(ye,Ke)|0)+Math.imul(re,ot)|0,y=y+Math.imul(re,Ke)|0,d=d+Math.imul(Ce,Ge)|0,i=(i=i+Math.imul(Ce,ut)|0)+Math.imul(oe,Ge)|0,y=y+Math.imul(oe,ut)|0,d=d+Math.imul(ae,nt)|0,i=(i=i+Math.imul(ae,Ve)|0)+Math.imul(de,nt)|0,y=y+Math.imul(de,Ve)|0,d=d+Math.imul(me,ft)|0,i=(i=i+Math.imul(me,st)|0)+Math.imul(le,ft)|0,y=y+Math.imul(le,st)|0;var Rn=(D+(d=d+Math.imul(q,ct)|0)|0)+((8191&(i=(i=i+Math.imul(q,ze)|0)+Math.imul(Z,ct)|0))<<13)|0;D=((y=y+Math.imul(Z,ze)|0)+(i>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,d=Math.imul(Ne,et),i=(i=Math.imul(Ne,pt))+Math.imul(_e,et)|0,y=Math.imul(_e,pt),d=d+Math.imul(Te,at)|0,i=(i=i+Math.imul(Te,it)|0)+Math.imul(Ee,at)|0,y=y+Math.imul(Ee,it)|0,d=d+Math.imul(J,ot)|0,i=(i=i+Math.imul(J,Ke)|0)+Math.imul(ue,ot)|0,y=y+Math.imul(ue,Ke)|0,d=d+Math.imul(ye,Ge)|0,i=(i=i+Math.imul(ye,ut)|0)+Math.imul(re,Ge)|0,y=y+Math.imul(re,ut)|0,d=d+Math.imul(Ce,nt)|0,i=(i=i+Math.imul(Ce,Ve)|0)+Math.imul(oe,nt)|0,y=y+Math.imul(oe,Ve)|0,d=d+Math.imul(ae,ft)|0,i=(i=i+Math.imul(ae,st)|0)+Math.imul(de,ft)|0,y=y+Math.imul(de,st)|0,d=d+Math.imul(me,ct)|0,i=(i=i+Math.imul(me,ze)|0)+Math.imul(le,ct)|0,y=y+Math.imul(le,ze)|0;var on=(D+(d=d+Math.imul(q,dt)|0)|0)+((8191&(i=(i=i+Math.imul(q,Xe)|0)+Math.imul(Z,dt)|0))<<13)|0;D=((y=y+Math.imul(Z,Xe)|0)+(i>>>13)|0)+(on>>>26)|0,on&=67108863,d=Math.imul(De,et),i=(i=Math.imul(De,pt))+Math.imul(Le,et)|0,y=Math.imul(Le,pt),d=d+Math.imul(Ne,at)|0,i=(i=i+Math.imul(Ne,it)|0)+Math.imul(_e,at)|0,y=y+Math.imul(_e,it)|0,d=d+Math.imul(Te,ot)|0,i=(i=i+Math.imul(Te,Ke)|0)+Math.imul(Ee,ot)|0,y=y+Math.imul(Ee,Ke)|0,d=d+Math.imul(J,Ge)|0,i=(i=i+Math.imul(J,ut)|0)+Math.imul(ue,Ge)|0,y=y+Math.imul(ue,ut)|0,d=d+Math.imul(ye,nt)|0,i=(i=i+Math.imul(ye,Ve)|0)+Math.imul(re,nt)|0,y=y+Math.imul(re,Ve)|0,d=d+Math.imul(Ce,ft)|0,i=(i=i+Math.imul(Ce,st)|0)+Math.imul(oe,ft)|0,y=y+Math.imul(oe,st)|0,d=d+Math.imul(ae,ct)|0,i=(i=i+Math.imul(ae,ze)|0)+Math.imul(de,ct)|0,y=y+Math.imul(de,ze)|0,d=d+Math.imul(me,dt)|0,i=(i=i+Math.imul(me,Xe)|0)+Math.imul(le,dt)|0,y=y+Math.imul(le,Xe)|0;var _n=(D+(d=d+Math.imul(q,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(q,Qe)|0)+Math.imul(Z,Ye)|0))<<13)|0;D=((y=y+Math.imul(Z,Qe)|0)+(i>>>13)|0)+(_n>>>26)|0,_n&=67108863,d=Math.imul(He,et),i=(i=Math.imul(He,pt))+Math.imul($e,et)|0,y=Math.imul($e,pt),d=d+Math.imul(De,at)|0,i=(i=i+Math.imul(De,it)|0)+Math.imul(Le,at)|0,y=y+Math.imul(Le,it)|0,d=d+Math.imul(Ne,ot)|0,i=(i=i+Math.imul(Ne,Ke)|0)+Math.imul(_e,ot)|0,y=y+Math.imul(_e,Ke)|0,d=d+Math.imul(Te,Ge)|0,i=(i=i+Math.imul(Te,ut)|0)+Math.imul(Ee,Ge)|0,y=y+Math.imul(Ee,ut)|0,d=d+Math.imul(J,nt)|0,i=(i=i+Math.imul(J,Ve)|0)+Math.imul(ue,nt)|0,y=y+Math.imul(ue,Ve)|0,d=d+Math.imul(ye,ft)|0,i=(i=i+Math.imul(ye,st)|0)+Math.imul(re,ft)|0,y=y+Math.imul(re,st)|0,d=d+Math.imul(Ce,ct)|0,i=(i=i+Math.imul(Ce,ze)|0)+Math.imul(oe,ct)|0,y=y+Math.imul(oe,ze)|0,d=d+Math.imul(ae,dt)|0,i=(i=i+Math.imul(ae,Xe)|0)+Math.imul(de,dt)|0,y=y+Math.imul(de,Xe)|0,d=d+Math.imul(me,Ye)|0,i=(i=i+Math.imul(me,Qe)|0)+Math.imul(le,Ye)|0,y=y+Math.imul(le,Qe)|0;var Jt=(D+(d=d+Math.imul(q,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(q,lt)|0)+Math.imul(Z,Ze)|0))<<13)|0;D=((y=y+Math.imul(Z,lt)|0)+(i>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,d=Math.imul(He,at),i=(i=Math.imul(He,it))+Math.imul($e,at)|0,y=Math.imul($e,it),d=d+Math.imul(De,ot)|0,i=(i=i+Math.imul(De,Ke)|0)+Math.imul(Le,ot)|0,y=y+Math.imul(Le,Ke)|0,d=d+Math.imul(Ne,Ge)|0,i=(i=i+Math.imul(Ne,ut)|0)+Math.imul(_e,Ge)|0,y=y+Math.imul(_e,ut)|0,d=d+Math.imul(Te,nt)|0,i=(i=i+Math.imul(Te,Ve)|0)+Math.imul(Ee,nt)|0,y=y+Math.imul(Ee,Ve)|0,d=d+Math.imul(J,ft)|0,i=(i=i+Math.imul(J,st)|0)+Math.imul(ue,ft)|0,y=y+Math.imul(ue,st)|0,d=d+Math.imul(ye,ct)|0,i=(i=i+Math.imul(ye,ze)|0)+Math.imul(re,ct)|0,y=y+Math.imul(re,ze)|0,d=d+Math.imul(Ce,dt)|0,i=(i=i+Math.imul(Ce,Xe)|0)+Math.imul(oe,dt)|0,y=y+Math.imul(oe,Xe)|0,d=d+Math.imul(ae,Ye)|0,i=(i=i+Math.imul(ae,Qe)|0)+Math.imul(de,Ye)|0,y=y+Math.imul(de,Qe)|0;var Ft=(D+(d=d+Math.imul(me,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(me,lt)|0)+Math.imul(le,Ze)|0))<<13)|0;D=((y=y+Math.imul(le,lt)|0)+(i>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,d=Math.imul(He,ot),i=(i=Math.imul(He,Ke))+Math.imul($e,ot)|0,y=Math.imul($e,Ke),d=d+Math.imul(De,Ge)|0,i=(i=i+Math.imul(De,ut)|0)+Math.imul(Le,Ge)|0,y=y+Math.imul(Le,ut)|0,d=d+Math.imul(Ne,nt)|0,i=(i=i+Math.imul(Ne,Ve)|0)+Math.imul(_e,nt)|0,y=y+Math.imul(_e,Ve)|0,d=d+Math.imul(Te,ft)|0,i=(i=i+Math.imul(Te,st)|0)+Math.imul(Ee,ft)|0,y=y+Math.imul(Ee,st)|0,d=d+Math.imul(J,ct)|0,i=(i=i+Math.imul(J,ze)|0)+Math.imul(ue,ct)|0,y=y+Math.imul(ue,ze)|0,d=d+Math.imul(ye,dt)|0,i=(i=i+Math.imul(ye,Xe)|0)+Math.imul(re,dt)|0,y=y+Math.imul(re,Xe)|0,d=d+Math.imul(Ce,Ye)|0,i=(i=i+Math.imul(Ce,Qe)|0)+Math.imul(oe,Ye)|0,y=y+Math.imul(oe,Qe)|0;var An=(D+(d=d+Math.imul(ae,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(ae,lt)|0)+Math.imul(de,Ze)|0))<<13)|0;D=((y=y+Math.imul(de,lt)|0)+(i>>>13)|0)+(An>>>26)|0,An&=67108863,d=Math.imul(He,Ge),i=(i=Math.imul(He,ut))+Math.imul($e,Ge)|0,y=Math.imul($e,ut),d=d+Math.imul(De,nt)|0,i=(i=i+Math.imul(De,Ve)|0)+Math.imul(Le,nt)|0,y=y+Math.imul(Le,Ve)|0,d=d+Math.imul(Ne,ft)|0,i=(i=i+Math.imul(Ne,st)|0)+Math.imul(_e,ft)|0,y=y+Math.imul(_e,st)|0,d=d+Math.imul(Te,ct)|0,i=(i=i+Math.imul(Te,ze)|0)+Math.imul(Ee,ct)|0,y=y+Math.imul(Ee,ze)|0,d=d+Math.imul(J,dt)|0,i=(i=i+Math.imul(J,Xe)|0)+Math.imul(ue,dt)|0,y=y+Math.imul(ue,Xe)|0,d=d+Math.imul(ye,Ye)|0,i=(i=i+Math.imul(ye,Qe)|0)+Math.imul(re,Ye)|0,y=y+Math.imul(re,Qe)|0;var Cn=(D+(d=d+Math.imul(Ce,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(Ce,lt)|0)+Math.imul(oe,Ze)|0))<<13)|0;D=((y=y+Math.imul(oe,lt)|0)+(i>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,d=Math.imul(He,nt),i=(i=Math.imul(He,Ve))+Math.imul($e,nt)|0,y=Math.imul($e,Ve),d=d+Math.imul(De,ft)|0,i=(i=i+Math.imul(De,st)|0)+Math.imul(Le,ft)|0,y=y+Math.imul(Le,st)|0,d=d+Math.imul(Ne,ct)|0,i=(i=i+Math.imul(Ne,ze)|0)+Math.imul(_e,ct)|0,y=y+Math.imul(_e,ze)|0,d=d+Math.imul(Te,dt)|0,i=(i=i+Math.imul(Te,Xe)|0)+Math.imul(Ee,dt)|0,y=y+Math.imul(Ee,Xe)|0,d=d+Math.imul(J,Ye)|0,i=(i=i+Math.imul(J,Qe)|0)+Math.imul(ue,Ye)|0,y=y+Math.imul(ue,Qe)|0;var Sn=(D+(d=d+Math.imul(ye,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(ye,lt)|0)+Math.imul(re,Ze)|0))<<13)|0;D=((y=y+Math.imul(re,lt)|0)+(i>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,d=Math.imul(He,ft),i=(i=Math.imul(He,st))+Math.imul($e,ft)|0,y=Math.imul($e,st),d=d+Math.imul(De,ct)|0,i=(i=i+Math.imul(De,ze)|0)+Math.imul(Le,ct)|0,y=y+Math.imul(Le,ze)|0,d=d+Math.imul(Ne,dt)|0,i=(i=i+Math.imul(Ne,Xe)|0)+Math.imul(_e,dt)|0,y=y+Math.imul(_e,Xe)|0,d=d+Math.imul(Te,Ye)|0,i=(i=i+Math.imul(Te,Qe)|0)+Math.imul(Ee,Ye)|0,y=y+Math.imul(Ee,Qe)|0;var Rt=(D+(d=d+Math.imul(J,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(J,lt)|0)+Math.imul(ue,Ze)|0))<<13)|0;D=((y=y+Math.imul(ue,lt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,d=Math.imul(He,ct),i=(i=Math.imul(He,ze))+Math.imul($e,ct)|0,y=Math.imul($e,ze),d=d+Math.imul(De,dt)|0,i=(i=i+Math.imul(De,Xe)|0)+Math.imul(Le,dt)|0,y=y+Math.imul(Le,Xe)|0,d=d+Math.imul(Ne,Ye)|0,i=(i=i+Math.imul(Ne,Qe)|0)+Math.imul(_e,Ye)|0,y=y+Math.imul(_e,Qe)|0;var Dn=(D+(d=d+Math.imul(Te,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(Te,lt)|0)+Math.imul(Ee,Ze)|0))<<13)|0;D=((y=y+Math.imul(Ee,lt)|0)+(i>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,d=Math.imul(He,dt),i=(i=Math.imul(He,Xe))+Math.imul($e,dt)|0,y=Math.imul($e,Xe),d=d+Math.imul(De,Ye)|0,i=(i=i+Math.imul(De,Qe)|0)+Math.imul(Le,Ye)|0,y=y+Math.imul(Le,Qe)|0;var Qt=(D+(d=d+Math.imul(Ne,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(Ne,lt)|0)+Math.imul(_e,Ze)|0))<<13)|0;D=((y=y+Math.imul(_e,lt)|0)+(i>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,d=Math.imul(He,Ye),i=(i=Math.imul(He,Qe))+Math.imul($e,Ye)|0,y=Math.imul($e,Qe);var nn=(D+(d=d+Math.imul(De,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(De,lt)|0)+Math.imul(Le,Ze)|0))<<13)|0;D=((y=y+Math.imul(Le,lt)|0)+(i>>>13)|0)+(nn>>>26)|0,nn&=67108863;var En=(D+(d=Math.imul(He,Ze))|0)+((8191&(i=(i=Math.imul(He,lt))+Math.imul($e,Ze)|0))<<13)|0;return D=((y=Math.imul($e,lt))+(i>>>13)|0)+(En>>>26)|0,En&=67108863,_[0]=ln,_[1]=jt,_[2]=qt,_[3]=wn,_[4]=hn,_[5]=gn,_[6]=Rn,_[7]=on,_[8]=_n,_[9]=Jt,_[10]=Ft,_[11]=An,_[12]=Cn,_[13]=Sn,_[14]=Rt,_[15]=Dn,_[16]=Qt,_[17]=nn,_[18]=En,0!==D&&(_[19]=D,l.length++),l};function k(x,r,s){return(new O).mulp(x,r,s)}function O(x,r){this.x=x,this.y=r}Math.imul||(I=w),u.prototype.mulTo=function(r,s){var a=this.length+r.length;return 10===this.length&&10===r.length?I(this,r,s):a<63?w(this,r,s):a<1024?function(x,r,s){s.negative=r.negative^x.negative,s.length=x.length+r.length;for(var l=0,a=0,f=0;f<s.length-1;f++){var _=a;a=0;for(var D=67108863&l,d=Math.min(f,r.length-1),i=Math.max(0,f-x.length+1);i<=d;i++){var Z=(0|x.words[f-i])*(0|r.words[i]),ge=67108863&Z;D=67108863&(ge=ge+D|0),a+=(_=(_=_+(Z/67108864|0)|0)+(ge>>>26)|0)>>>26,_&=67108863}s.words[f]=D,l=_,_=a}return 0!==l?s.words[f]=l:s.length--,s.strip()}(this,r,s):k(this,r,s)},O.prototype.makeRBT=function(r){for(var s=new Array(r),l=u.prototype._countBits(r)-1,a=0;a<r;a++)s[a]=this.revBin(a,l,r);return s},O.prototype.revBin=function(r,s,l){if(0===r||r===l-1)return r;for(var a=0,f=0;f<s;f++)a|=(1&r)<<s-f-1,r>>=1;return a},O.prototype.permute=function(r,s,l,a,f,_){for(var D=0;D<_;D++)a[D]=s[r[D]],f[D]=l[r[D]]},O.prototype.transform=function(r,s,l,a,f,_){this.permute(_,r,s,l,a,f);for(var D=1;D<f;D<<=1)for(var d=D<<1,i=Math.cos(2*Math.PI/d),y=Math.sin(2*Math.PI/d),z=0;z<f;z+=d)for(var q=i,Z=y,ge=0;ge<D;ge++){var me=l[z+ge],le=a[z+ge],fe=l[z+ge+D],ae=a[z+ge+D],de=q*fe-Z*ae;ae=q*ae+Z*fe,l[z+ge]=me+(fe=de),a[z+ge]=le+ae,l[z+ge+D]=me-fe,a[z+ge+D]=le-ae,ge!==d&&(de=i*q-y*Z,Z=i*Z+y*q,q=de)}},O.prototype.guessLen13b=function(r,s){var l=1|Math.max(s,r),a=1&l,f=0;for(l=l/2|0;l;l>>>=1)f++;return 1<<f+1+a},O.prototype.conjugate=function(r,s,l){if(!(l<=1))for(var a=0;a<l/2;a++){var f=r[a];r[a]=r[l-a-1],r[l-a-1]=f,f=s[a],s[a]=-s[l-a-1],s[l-a-1]=-f}},O.prototype.normalize13b=function(r,s){for(var l=0,a=0;a<s/2;a++){var f=8192*Math.round(r[2*a+1]/s)+Math.round(r[2*a]/s)+l;r[a]=67108863&f,l=f<67108864?0:f/67108864|0}return r},O.prototype.convert13b=function(r,s,l,a){for(var f=0,_=0;_<s;_++)l[2*_]=8191&(f+=0|r[_]),l[2*_+1]=8191&(f>>>=13),f>>>=13;for(_=2*s;_<a;++_)l[_]=0;m(0===f),m(0==(-8192&f))},O.prototype.stub=function(r){for(var s=new Array(r),l=0;l<r;l++)s[l]=0;return s},O.prototype.mulp=function(r,s,l){var a=2*this.guessLen13b(r.length,s.length),f=this.makeRBT(a),_=this.stub(a),D=new Array(a),d=new Array(a),i=new Array(a),y=new Array(a),z=new Array(a),q=new Array(a),Z=l.words;Z.length=a,this.convert13b(r.words,r.length,D,a),this.convert13b(s.words,s.length,y,a),this.transform(D,_,d,i,a,f),this.transform(y,_,z,q,a,f);for(var ge=0;ge<a;ge++){var me=d[ge]*z[ge]-i[ge]*q[ge];i[ge]=d[ge]*q[ge]+i[ge]*z[ge],d[ge]=me}return this.conjugate(d,i,a),this.transform(d,i,Z,_,a,f),this.conjugate(Z,_,a),this.normalize13b(Z,a),l.negative=r.negative^s.negative,l.length=r.length+s.length,l.strip()},u.prototype.mul=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),this.mulTo(r,s)},u.prototype.mulf=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),k(this,r,s)},u.prototype.imul=function(r){return this.clone().mulTo(r,this)},u.prototype.imuln=function(r){m("number"==typeof r),m(r<67108864);for(var s=0,l=0;l<this.length;l++){var a=(0|this.words[l])*r,f=(67108863&a)+(67108863&s);s>>=26,s+=a/67108864|0,s+=f>>>26,this.words[l]=67108863&f}return 0!==s&&(this.words[l]=s,this.length++),this},u.prototype.muln=function(r){return this.clone().imuln(r)},u.prototype.sqr=function(){return this.mul(this)},u.prototype.isqr=function(){return this.imul(this.clone())},u.prototype.pow=function(r){var s=function(x){for(var r=new Array(x.bitLength()),s=0;s<r.length;s++){var a=s%26;r[s]=(x.words[s/26|0]&1<<a)>>>a}return r}(r);if(0===s.length)return new u(1);for(var l=this,a=0;a<s.length&&0===s[a];a++,l=l.sqr());if(++a<s.length)for(var f=l.sqr();a<s.length;a++,f=f.sqr())0!==s[a]&&(l=l.mul(f));return l},u.prototype.iushln=function(r){m("number"==typeof r&&r>=0);var f,s=r%26,l=(r-s)/26,a=67108863>>>26-s<<26-s;if(0!==s){var _=0;for(f=0;f<this.length;f++){var D=this.words[f]&a;this.words[f]=(0|this.words[f])-D<<s|_,_=D>>>26-s}_&&(this.words[f]=_,this.length++)}if(0!==l){for(f=this.length-1;f>=0;f--)this.words[f+l]=this.words[f];for(f=0;f<l;f++)this.words[f]=0;this.length+=l}return this.strip()},u.prototype.ishln=function(r){return m(0===this.negative),this.iushln(r)},u.prototype.iushrn=function(r,s,l){var a;m("number"==typeof r&&r>=0),a=s?(s-s%26)/26:0;var f=r%26,_=Math.min((r-f)/26,this.length),D=67108863^67108863>>>f<<f,d=l;if(a-=_,a=Math.max(0,a),d){for(var i=0;i<_;i++)d.words[i]=this.words[i];d.length=_}if(0!==_)if(this.length>_)for(this.length-=_,i=0;i<this.length;i++)this.words[i]=this.words[i+_];else this.words[0]=0,this.length=1;var y=0;for(i=this.length-1;i>=0&&(0!==y||i>=a);i--){var z=0|this.words[i];this.words[i]=y<<26-f|z>>>f,y=z&D}return d&&0!==y&&(d.words[d.length++]=y),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},u.prototype.ishrn=function(r,s,l){return m(0===this.negative),this.iushrn(r,s,l)},u.prototype.shln=function(r){return this.clone().ishln(r)},u.prototype.ushln=function(r){return this.clone().iushln(r)},u.prototype.shrn=function(r){return this.clone().ishrn(r)},u.prototype.ushrn=function(r){return this.clone().iushrn(r)},u.prototype.testn=function(r){m("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return!(this.length<=l||!(this.words[l]&1<<s))},u.prototype.imaskn=function(r){m("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return m(0===this.negative,"imaskn works only with positive numbers"),this.length<=l?this:(0!==s&&l++,this.length=Math.min(l,this.length),0!==s&&(this.words[this.length-1]&=67108863^67108863>>>s<<s),this.strip())},u.prototype.maskn=function(r){return this.clone().imaskn(r)},u.prototype.iaddn=function(r){return m("number"==typeof r),m(r<67108864),r<0?this.isubn(-r):0!==this.negative?1===this.length&&(0|this.words[0])<r?(this.words[0]=r-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(r),this.negative=1,this):this._iaddn(r)},u.prototype._iaddn=function(r){this.words[0]+=r;for(var s=0;s<this.length&&this.words[s]>=67108864;s++)this.words[s]-=67108864,s===this.length-1?this.words[s+1]=1:this.words[s+1]++;return this.length=Math.max(this.length,s+1),this},u.prototype.isubn=function(r){if(m("number"==typeof r),m(r<67108864),r<0)return this.iaddn(-r);if(0!==this.negative)return this.negative=0,this.iaddn(r),this.negative=1,this;if(this.words[0]-=r,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var s=0;s<this.length&&this.words[s]<0;s++)this.words[s]+=67108864,this.words[s+1]-=1;return this.strip()},u.prototype.addn=function(r){return this.clone().iaddn(r)},u.prototype.subn=function(r){return this.clone().isubn(r)},u.prototype.iabs=function(){return this.negative=0,this},u.prototype.abs=function(){return this.clone().iabs()},u.prototype._ishlnsubmul=function(r,s,l){var f;this._expand(r.length+l);var _,D=0;for(f=0;f<r.length;f++){_=(0|this.words[f+l])+D;var d=(0|r.words[f])*s;D=((_-=67108863&d)>>26)-(d/67108864|0),this.words[f+l]=67108863&_}for(;f<this.length-l;f++)D=(_=(0|this.words[f+l])+D)>>26,this.words[f+l]=67108863&_;if(0===D)return this.strip();for(m(-1===D),D=0,f=0;f<this.length;f++)D=(_=-(0|this.words[f])+D)>>26,this.words[f]=67108863&_;return this.negative=1,this.strip()},u.prototype._wordDiv=function(r,s){var l,a=this.clone(),f=r,_=0|f.words[f.length-1];0!=(l=26-this._countBits(_))&&(f=f.ushln(l),a.iushln(l),_=0|f.words[f.length-1]);var i,d=a.length-f.length;if("mod"!==s){(i=new u(null)).length=d+1,i.words=new Array(i.length);for(var y=0;y<i.length;y++)i.words[y]=0}var z=a.clone()._ishlnsubmul(f,1,d);0===z.negative&&(a=z,i&&(i.words[d]=1));for(var q=d-1;q>=0;q--){var Z=67108864*(0|a.words[f.length+q])+(0|a.words[f.length+q-1]);for(Z=Math.min(Z/_|0,67108863),a._ishlnsubmul(f,Z,q);0!==a.negative;)Z--,a.negative=0,a._ishlnsubmul(f,1,q),a.isZero()||(a.negative^=1);i&&(i.words[q]=Z)}return i&&i.strip(),a.strip(),"div"!==s&&0!==l&&a.iushrn(l),{div:i||null,mod:a}},u.prototype.divmod=function(r,s,l){return m(!r.isZero()),this.isZero()?{div:new u(0),mod:new u(0)}:0!==this.negative&&0===r.negative?(_=this.neg().divmod(r,s),"mod"!==s&&(a=_.div.neg()),"div"!==s&&(f=_.mod.neg(),l&&0!==f.negative&&f.iadd(r)),{div:a,mod:f}):0===this.negative&&0!==r.negative?(_=this.divmod(r.neg(),s),"mod"!==s&&(a=_.div.neg()),{div:a,mod:_.mod}):0!=(this.negative&r.negative)?(_=this.neg().divmod(r.neg(),s),"div"!==s&&(f=_.mod.neg(),l&&0!==f.negative&&f.isub(r)),{div:_.div,mod:f}):r.length>this.length||this.cmp(r)<0?{div:new u(0),mod:this}:1===r.length?"div"===s?{div:this.divn(r.words[0]),mod:null}:"mod"===s?{div:null,mod:new u(this.modn(r.words[0]))}:{div:this.divn(r.words[0]),mod:new u(this.modn(r.words[0]))}:this._wordDiv(r,s);var a,f,_},u.prototype.div=function(r){return this.divmod(r,"div",!1).div},u.prototype.mod=function(r){return this.divmod(r,"mod",!1).mod},u.prototype.umod=function(r){return this.divmod(r,"mod",!0).mod},u.prototype.divRound=function(r){var s=this.divmod(r);if(s.mod.isZero())return s.div;var l=0!==s.div.negative?s.mod.isub(r):s.mod,a=r.ushrn(1),f=r.andln(1),_=l.cmp(a);return _<0||1===f&&0===_?s.div:0!==s.div.negative?s.div.isubn(1):s.div.iaddn(1)},u.prototype.modn=function(r){m(r<=67108863);for(var s=(1<<26)%r,l=0,a=this.length-1;a>=0;a--)l=(s*l+(0|this.words[a]))%r;return l},u.prototype.idivn=function(r){m(r<=67108863);for(var s=0,l=this.length-1;l>=0;l--){var a=(0|this.words[l])+67108864*s;this.words[l]=a/r|0,s=a%r}return this.strip()},u.prototype.divn=function(r){return this.clone().idivn(r)},u.prototype.egcd=function(r){m(0===r.negative),m(!r.isZero());var s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),_=new u(0),D=new u(1),d=0;s.isEven()&&l.isEven();)s.iushrn(1),l.iushrn(1),++d;for(var i=l.clone(),y=s.clone();!s.isZero();){for(var z=0,q=1;0==(s.words[0]&q)&&z<26;++z,q<<=1);if(z>0)for(s.iushrn(z);z-- >0;)(a.isOdd()||f.isOdd())&&(a.iadd(i),f.isub(y)),a.iushrn(1),f.iushrn(1);for(var Z=0,ge=1;0==(l.words[0]&ge)&&Z<26;++Z,ge<<=1);if(Z>0)for(l.iushrn(Z);Z-- >0;)(_.isOdd()||D.isOdd())&&(_.iadd(i),D.isub(y)),_.iushrn(1),D.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(_),f.isub(D)):(l.isub(s),_.isub(a),D.isub(f))}return{a:_,b:D,gcd:l.iushln(d)}},u.prototype._invmp=function(r){m(0===r.negative),m(!r.isZero());var z,s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),_=l.clone();s.cmpn(1)>0&&l.cmpn(1)>0;){for(var D=0,d=1;0==(s.words[0]&d)&&D<26;++D,d<<=1);if(D>0)for(s.iushrn(D);D-- >0;)a.isOdd()&&a.iadd(_),a.iushrn(1);for(var i=0,y=1;0==(l.words[0]&y)&&i<26;++i,y<<=1);if(i>0)for(l.iushrn(i);i-- >0;)f.isOdd()&&f.iadd(_),f.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(f)):(l.isub(s),f.isub(a))}return(z=0===s.cmpn(1)?a:f).cmpn(0)<0&&z.iadd(r),z},u.prototype.gcd=function(r){if(this.isZero())return r.abs();if(r.isZero())return this.abs();var s=this.clone(),l=r.clone();s.negative=0,l.negative=0;for(var a=0;s.isEven()&&l.isEven();a++)s.iushrn(1),l.iushrn(1);for(;;){for(;s.isEven();)s.iushrn(1);for(;l.isEven();)l.iushrn(1);var f=s.cmp(l);if(f<0){var _=s;s=l,l=_}else if(0===f||0===l.cmpn(1))break;s.isub(l)}return l.iushln(a)},u.prototype.invm=function(r){return this.egcd(r).a.umod(r)},u.prototype.isEven=function(){return 0==(1&this.words[0])},u.prototype.isOdd=function(){return 1==(1&this.words[0])},u.prototype.andln=function(r){return this.words[0]&r},u.prototype.bincn=function(r){m("number"==typeof r);var s=r%26,l=(r-s)/26,a=1<<s;if(this.length<=l)return this._expand(l+1),this.words[l]|=a,this;for(var f=a,_=l;0!==f&&_<this.length;_++){var D=0|this.words[_];f=(D+=f)>>>26,this.words[_]=D&=67108863}return 0!==f&&(this.words[_]=f,this.length++),this},u.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},u.prototype.cmpn=function(r){var l,s=r<0;if(0!==this.negative&&!s)return-1;if(0===this.negative&&s)return 1;if(this.strip(),this.length>1)l=1;else{s&&(r=-r),m(r<=67108863,"Number is too big");var a=0|this.words[0];l=a===r?0:a<r?-1:1}return 0!==this.negative?0|-l:l},u.prototype.cmp=function(r){if(0!==this.negative&&0===r.negative)return-1;if(0===this.negative&&0!==r.negative)return 1;var s=this.ucmp(r);return 0!==this.negative?0|-s:s},u.prototype.ucmp=function(r){if(this.length>r.length)return 1;if(this.length<r.length)return-1;for(var s=0,l=this.length-1;l>=0;l--){var a=0|this.words[l],f=0|r.words[l];if(a!==f){a<f?s=-1:a>f&&(s=1);break}}return s},u.prototype.gtn=function(r){return 1===this.cmpn(r)},u.prototype.gt=function(r){return 1===this.cmp(r)},u.prototype.gten=function(r){return this.cmpn(r)>=0},u.prototype.gte=function(r){return this.cmp(r)>=0},u.prototype.ltn=function(r){return-1===this.cmpn(r)},u.prototype.lt=function(r){return-1===this.cmp(r)},u.prototype.lten=function(r){return this.cmpn(r)<=0},u.prototype.lte=function(r){return this.cmp(r)<=0},u.prototype.eqn=function(r){return 0===this.cmpn(r)},u.prototype.eq=function(r){return 0===this.cmp(r)},u.red=function(r){return new $(r)},u.prototype.toRed=function(r){return m(!this.red,"Already a number in reduction context"),m(0===this.negative,"red works only with positives"),r.convertTo(this)._forceRed(r)},u.prototype.fromRed=function(){return m(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},u.prototype._forceRed=function(r){return this.red=r,this},u.prototype.forceRed=function(r){return m(!this.red,"Already a number in reduction context"),this._forceRed(r)},u.prototype.redAdd=function(r){return m(this.red,"redAdd works only with red numbers"),this.red.add(this,r)},u.prototype.redIAdd=function(r){return m(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,r)},u.prototype.redSub=function(r){return m(this.red,"redSub works only with red numbers"),this.red.sub(this,r)},u.prototype.redISub=function(r){return m(this.red,"redISub works only with red numbers"),this.red.isub(this,r)},u.prototype.redShl=function(r){return m(this.red,"redShl works only with red numbers"),this.red.shl(this,r)},u.prototype.redMul=function(r){return m(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.mul(this,r)},u.prototype.redIMul=function(r){return m(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.imul(this,r)},u.prototype.redSqr=function(){return m(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},u.prototype.redISqr=function(){return m(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},u.prototype.redSqrt=function(){return m(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},u.prototype.redInvm=function(){return m(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},u.prototype.redNeg=function(){return m(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},u.prototype.redPow=function(r){return m(this.red&&!r.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,r)};var V={k256:null,p224:null,p192:null,p25519:null};function U(x,r){this.name=x,this.p=new u(r,16),this.n=this.p.bitLength(),this.k=new u(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function B(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function H(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function W(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function te(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function $(x){if("string"==typeof x){var r=u._prime(x);this.m=r.p,this.prime=r}else m(x.gtn(1),"modulus must be greater than 1"),this.m=x,this.prime=null}function pe(x){$.call(this,x),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new u(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}U.prototype._tmp=function(){var r=new u(null);return r.words=new Array(Math.ceil(this.n/13)),r},U.prototype.ireduce=function(r){var l,s=r;do{this.split(s,this.tmp),l=(s=(s=this.imulK(s)).iadd(this.tmp)).bitLength()}while(l>this.n);var a=l<this.n?-1:s.ucmp(this.p);return 0===a?(s.words[0]=0,s.length=1):a>0?s.isub(this.p):void 0!==s.strip?s.strip():s._strip(),s},U.prototype.split=function(r,s){r.iushrn(this.n,0,s)},U.prototype.imulK=function(r){return r.imul(this.k)},R(B,U),B.prototype.split=function(r,s){for(var l=4194303,a=Math.min(r.length,9),f=0;f<a;f++)s.words[f]=r.words[f];if(s.length=a,r.length<=9)return r.words[0]=0,void(r.length=1);var _=r.words[9];for(s.words[s.length++]=_&l,f=10;f<r.length;f++){var D=0|r.words[f];r.words[f-10]=(D&l)<<4|_>>>22,_=D}r.words[f-10]=_>>>=22,r.length-=0===_&&r.length>10?10:9},B.prototype.imulK=function(r){r.words[r.length]=0,r.words[r.length+1]=0,r.length+=2;for(var s=0,l=0;l<r.length;l++){var a=0|r.words[l];r.words[l]=67108863&(s+=977*a),s=64*a+(s/67108864|0)}return 0===r.words[r.length-1]&&(r.length--,0===r.words[r.length-1]&&r.length--),r},R(H,U),R(W,U),R(te,U),te.prototype.imulK=function(r){for(var s=0,l=0;l<r.length;l++){var a=19*(0|r.words[l])+s,f=67108863&a;a>>>=26,r.words[l]=f,s=a}return 0!==s&&(r.words[r.length++]=s),r},u._prime=function(r){if(V[r])return V[r];var s;if("k256"===r)s=new B;else if("p224"===r)s=new H;else if("p192"===r)s=new W;else{if("p25519"!==r)throw new Error("Unknown prime "+r);s=new te}return V[r]=s,s},$.prototype._verify1=function(r){m(0===r.negative,"red works only with positives"),m(r.red,"red works only with red numbers")},$.prototype._verify2=function(r,s){m(0==(r.negative|s.negative),"red works only with positives"),m(r.red&&r.red===s.red,"red works only with red numbers")},$.prototype.imod=function(r){return this.prime?this.prime.ireduce(r)._forceRed(this):r.umod(this.m)._forceRed(this)},$.prototype.neg=function(r){return r.isZero()?r.clone():this.m.sub(r)._forceRed(this)},$.prototype.add=function(r,s){this._verify2(r,s);var l=r.add(s);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},$.prototype.iadd=function(r,s){this._verify2(r,s);var l=r.iadd(s);return l.cmp(this.m)>=0&&l.isub(this.m),l},$.prototype.sub=function(r,s){this._verify2(r,s);var l=r.sub(s);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},$.prototype.isub=function(r,s){this._verify2(r,s);var l=r.isub(s);return l.cmpn(0)<0&&l.iadd(this.m),l},$.prototype.shl=function(r,s){return this._verify1(r),this.imod(r.ushln(s))},$.prototype.imul=function(r,s){return this._verify2(r,s),this.imod(r.imul(s))},$.prototype.mul=function(r,s){return this._verify2(r,s),this.imod(r.mul(s))},$.prototype.isqr=function(r){return this.imul(r,r.clone())},$.prototype.sqr=function(r){return this.mul(r,r)},$.prototype.sqrt=function(r){if(r.isZero())return r.clone();var s=this.m.andln(3);if(m(s%2==1),3===s){var l=this.m.add(new u(1)).iushrn(2);return this.pow(r,l)}for(var a=this.m.subn(1),f=0;!a.isZero()&&0===a.andln(1);)f++,a.iushrn(1);m(!a.isZero());var _=new u(1).toRed(this),D=_.redNeg(),d=this.m.subn(1).iushrn(1),i=this.m.bitLength();for(i=new u(2*i*i).toRed(this);0!==this.pow(i,d).cmp(D);)i.redIAdd(D);for(var y=this.pow(i,a),z=this.pow(r,a.addn(1).iushrn(1)),q=this.pow(r,a),Z=f;0!==q.cmp(_);){for(var ge=q,me=0;0!==ge.cmp(_);me++)ge=ge.redSqr();m(me<Z);var le=this.pow(y,new u(1).iushln(Z-me-1));z=z.redMul(le),y=le.redSqr(),q=q.redMul(y),Z=me}return z},$.prototype.invm=function(r){var s=r._invmp(this.m);return 0!==s.negative?(s.negative=0,this.imod(s).redNeg()):this.imod(s)},$.prototype.pow=function(r,s){if(s.isZero())return new u(1).toRed(this);if(0===s.cmpn(1))return r.clone();var a=new Array(16);a[0]=new u(1).toRed(this),a[1]=r;for(var f=2;f<a.length;f++)a[f]=this.mul(a[f-1],r);var _=a[0],D=0,d=0,i=s.bitLength()%26;for(0===i&&(i=26),f=s.length-1;f>=0;f--){for(var y=s.words[f],z=i-1;z>=0;z--){var q=y>>z&1;_!==a[0]&&(_=this.sqr(_)),0!==q||0!==D?(D<<=1,D|=q,(4==++d||0===f&&0===z)&&(_=this.mul(_,a[D]),d=0,D=0)):d=0}i=26}return _},$.prototype.convertTo=function(r){var s=r.umod(this.m);return s===r?s.clone():s},$.prototype.convertFrom=function(r){var s=r.clone();return s.red=null,s},u.mont=function(r){return new pe(r)},R(pe,$),pe.prototype.convertTo=function(r){return this.imod(r.ushln(this.shift))},pe.prototype.convertFrom=function(r){var s=this.imod(r.mul(this.rinv));return s.red=null,s},pe.prototype.imul=function(r,s){if(r.isZero()||s.isZero())return r.words[0]=0,r.length=1,r;var l=r.imul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),_=f;return f.cmp(this.m)>=0?_=f.isub(this.m):f.cmpn(0)<0&&(_=f.iadd(this.m)),_._forceRed(this)},pe.prototype.mul=function(r,s){if(r.isZero()||s.isZero())return new u(0)._forceRed(this);var l=r.mul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),_=f;return f.cmp(this.m)>=0?_=f.isub(this.m):f.cmpn(0)<0&&(_=f.iadd(this.m)),_._forceRed(this)},pe.prototype.invm=function(r){return this.imod(r._invmp(this.m).mul(this.r2))._forceRed(this)}}(Y=E.nmd(Y),this)},8686:(Y,L,E)=>{Y.exports=E(5454)},4054:(Y,L,E)=>{"use strict";var p=E(9471),N=E(5650),m=E(300),R=E(7790),u=E(4634),v=E(1929),M=E(2984),A=E(5886);Y.exports=function(g){return new Promise(function(C,b){var w=g.data,I=g.headers,P=g.responseType;p.isFormData(w)&&delete I["Content-Type"];var k=new XMLHttpRequest;if(g.auth){var O=g.auth.username||"",V=g.auth.password?unescape(encodeURIComponent(g.auth.password)):"";I.Authorization="Basic "+btoa(O+":"+V)}var U=u(g.baseURL,g.url);function B(){if(k){var W="getAllResponseHeaders"in k?v(k.getAllResponseHeaders()):null;N(C,b,{data:P&&"text"!==P&&"json"!==P?k.response:k.responseText,status:k.status,statusText:k.statusText,headers:W,config:g,request:k}),k=null}}if(k.open(g.method.toUpperCase(),R(U,g.params,g.paramsSerializer),!0),k.timeout=g.timeout,"onloadend"in k?k.onloadend=B:k.onreadystatechange=function(){!k||4!==k.readyState||0===k.status&&(!k.responseURL||0!==k.responseURL.indexOf("file:"))||setTimeout(B)},k.onabort=function(){!k||(b(A("Request aborted",g,"ECONNABORTED",k)),k=null)},k.onerror=function(){b(A("Network Error",g,null,k)),k=null},k.ontimeout=function(){var te="timeout of "+g.timeout+"ms exceeded";g.timeoutErrorMessage&&(te=g.timeoutErrorMessage),b(A(te,g,g.transitional&&g.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",k)),k=null},p.isStandardBrowserEnv()){var H=(g.withCredentials||M(U))&&g.xsrfCookieName?m.read(g.xsrfCookieName):void 0;H&&(I[g.xsrfHeaderName]=H)}"setRequestHeader"in k&&p.forEach(I,function(te,$){void 0===w&&"content-type"===$.toLowerCase()?delete I[$]:k.setRequestHeader($,te)}),p.isUndefined(g.withCredentials)||(k.withCredentials=!!g.withCredentials),P&&"json"!==P&&(k.responseType=g.responseType),"function"==typeof g.onDownloadProgress&&k.addEventListener("progress",g.onDownloadProgress),"function"==typeof g.onUploadProgress&&k.upload&&k.upload.addEventListener("progress",g.onUploadProgress),g.cancelToken&&g.cancelToken.promise.then(function(te){!k||(k.abort(),b(te),k=null)}),w||(w=null),k.send(w)})}},5454:(Y,L,E)=>{"use strict";var p=E(9471),N=E(1533),m=E(3227),R=E(4018);function v(A){var T=new m(A),g=N(m.prototype.request,T);return p.extend(g,m.prototype,T),p.extend(g,T),g}var M=v(E(2567));M.Axios=m,M.create=function(T){return v(R(M.defaults,T))},M.Cancel=E(8728),M.CancelToken=E(701),M.isCancel=E(2130),M.all=function(T){return Promise.all(T)},M.spread=E(8908),M.isAxiosError=E(9541),Y.exports=M,Y.exports.default=M},8728:Y=>{"use strict";function L(E){this.message=E}L.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},L.prototype.__CANCEL__=!0,Y.exports=L},701:(Y,L,E)=>{"use strict";var p=E(8728);function N(m){if("function"!=typeof m)throw new TypeError("executor must be a function.");var R;this.promise=new Promise(function(M){R=M});var u=this;m(function(M){u.reason||(u.reason=new p(M),R(u.reason))})}N.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},N.source=function(){var R;return{token:new N(function(M){R=M}),cancel:R}},Y.exports=N},2130:Y=>{"use strict";Y.exports=function(E){return!(!E||!E.__CANCEL__)}},3227:(Y,L,E)=>{"use strict";var p=E(9471),N=E(7790),m=E(3976),R=E(6764),u=E(4018),v=E(3558),M=v.validators;function A(T){this.defaults=T,this.interceptors={request:new m,response:new m}}A.prototype.request=function(g){"string"==typeof g?(g=arguments[1]||{}).url=arguments[0]:g=g||{},(g=u(this.defaults,g)).method=g.method?g.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var h=g.transitional;void 0!==h&&v.assertOptions(h,{silentJSONParsing:M.transitional(M.boolean,"1.0.0"),forcedJSONParsing:M.transitional(M.boolean,"1.0.0"),clarifyTimeoutError:M.transitional(M.boolean,"1.0.0")},!1);var C=[],b=!0;this.interceptors.request.forEach(function(B){"function"==typeof B.runWhen&&!1===B.runWhen(g)||(b=b&&B.synchronous,C.unshift(B.fulfilled,B.rejected))});var I,w=[];if(this.interceptors.response.forEach(function(B){w.push(B.fulfilled,B.rejected)}),!b){var P=[R,void 0];for(Array.prototype.unshift.apply(P,C),P=P.concat(w),I=Promise.resolve(g);P.length;)I=I.then(P.shift(),P.shift());return I}for(var k=g;C.length;){var O=C.shift(),V=C.shift();try{k=O(k)}catch(U){V(U);break}}try{I=R(k)}catch(U){return Promise.reject(U)}for(;w.length;)I=I.then(w.shift(),w.shift());return I},A.prototype.getUri=function(g){return g=u(this.defaults,g),N(g.url,g.params,g.paramsSerializer).replace(/^\?/,"")},p.forEach(["delete","get","head","options"],function(g){A.prototype[g]=function(h,C){return this.request(u(C||{},{method:g,url:h,data:(C||{}).data}))}}),p.forEach(["post","put","patch"],function(g){A.prototype[g]=function(h,C,b){return this.request(u(b||{},{method:g,url:h,data:C}))}}),Y.exports=A},3976:(Y,L,E)=>{"use strict";var p=E(9471);function N(){this.handlers=[]}N.prototype.use=function(R,u,v){return this.handlers.push({fulfilled:R,rejected:u,synchronous:!!v&&v.synchronous,runWhen:v?v.runWhen:null}),this.handlers.length-1},N.prototype.eject=function(R){this.handlers[R]&&(this.handlers[R]=null)},N.prototype.forEach=function(R){p.forEach(this.handlers,function(v){null!==v&&R(v)})},Y.exports=N},4634:(Y,L,E)=>{"use strict";var p=E(5164),N=E(1540);Y.exports=function(R,u){return R&&!p(u)?N(R,u):u}},5886:(Y,L,E)=>{"use strict";var p=E(9570);Y.exports=function(m,R,u,v,M){var A=new Error(m);return p(A,R,u,v,M)}},6764:(Y,L,E)=>{"use strict";var p=E(9471),N=E(4284),m=E(2130),R=E(2567);function u(v){v.cancelToken&&v.cancelToken.throwIfRequested()}Y.exports=function(M){return u(M),M.headers=M.headers||{},M.data=N.call(M,M.data,M.headers,M.transformRequest),M.headers=p.merge(M.headers.common||{},M.headers[M.method]||{},M.headers),p.forEach(["delete","get","head","post","put","patch","common"],function(g){delete M.headers[g]}),(M.adapter||R.adapter)(M).then(function(g){return u(M),g.data=N.call(M,g.data,g.headers,M.transformResponse),g},function(g){return m(g)||(u(M),g&&g.response&&(g.response.data=N.call(M,g.response.data,g.response.headers,M.transformResponse))),Promise.reject(g)})}},9570:Y=>{"use strict";Y.exports=function(E,p,N,m,R){return E.config=p,N&&(E.code=N),E.request=m,E.response=R,E.isAxiosError=!0,E.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},E}},4018:(Y,L,E)=>{"use strict";var p=E(9471);Y.exports=function(m,R){R=R||{};var u={},v=["url","method","data"],M=["headers","auth","proxy","params"],A=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],T=["validateStatus"];function g(w,I){return p.isPlainObject(w)&&p.isPlainObject(I)?p.merge(w,I):p.isPlainObject(I)?p.merge({},I):p.isArray(I)?I.slice():I}function h(w){p.isUndefined(R[w])?p.isUndefined(m[w])||(u[w]=g(void 0,m[w])):u[w]=g(m[w],R[w])}p.forEach(v,function(I){p.isUndefined(R[I])||(u[I]=g(void 0,R[I]))}),p.forEach(M,h),p.forEach(A,function(I){p.isUndefined(R[I])?p.isUndefined(m[I])||(u[I]=g(void 0,m[I])):u[I]=g(void 0,R[I])}),p.forEach(T,function(I){I in R?u[I]=g(m[I],R[I]):I in m&&(u[I]=g(void 0,m[I]))});var C=v.concat(M).concat(A).concat(T),b=Object.keys(m).concat(Object.keys(R)).filter(function(I){return-1===C.indexOf(I)});return p.forEach(b,h),u}},5650:(Y,L,E)=>{"use strict";var p=E(5886);Y.exports=function(m,R,u){var v=u.config.validateStatus;u.status&&v&&!v(u.status)?R(p("Request failed with status code "+u.status,u.config,null,u.request,u)):m(u)}},4284:(Y,L,E)=>{"use strict";var p=E(9471),N=E(2567);Y.exports=function(R,u,v){var M=this||N;return p.forEach(v,function(T){R=T.call(M,R,u)}),R}},2567:(Y,L,E)=>{"use strict";var p=E(9471),N=E(2196),m=E(9570),R={"Content-Type":"application/x-www-form-urlencoded"};function u(T,g){!p.isUndefined(T)&&p.isUndefined(T["Content-Type"])&&(T["Content-Type"]=g)}var T,A={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(T=E(4054)),T),transformRequest:[function(g,h){return N(h,"Accept"),N(h,"Content-Type"),p.isFormData(g)||p.isArrayBuffer(g)||p.isBuffer(g)||p.isStream(g)||p.isFile(g)||p.isBlob(g)?g:p.isArrayBufferView(g)?g.buffer:p.isURLSearchParams(g)?(u(h,"application/x-www-form-urlencoded;charset=utf-8"),g.toString()):p.isObject(g)||h&&"application/json"===h["Content-Type"]?(u(h,"application/json"),function(T,g,h){if(p.isString(T))try{return(0,JSON.parse)(T),p.trim(T)}catch(C){if("SyntaxError"!==C.name)throw C}return(0,JSON.stringify)(T)}(g)):g}],transformResponse:[function(g){var h=this.transitional,w=!(h&&h.silentJSONParsing)&&"json"===this.responseType;if(w||h&&h.forcedJSONParsing&&p.isString(g)&&g.length)try{return JSON.parse(g)}catch(I){if(w)throw"SyntaxError"===I.name?m(I,this,"E_JSON_PARSE"):I}return g}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(g){return g>=200&&g<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};p.forEach(["delete","get","head"],function(g){A.headers[g]={}}),p.forEach(["post","put","patch"],function(g){A.headers[g]=p.merge(R)}),Y.exports=A},1533:Y=>{"use strict";Y.exports=function(E,p){return function(){for(var m=new Array(arguments.length),R=0;R<m.length;R++)m[R]=arguments[R];return E.apply(p,m)}}},7790:(Y,L,E)=>{"use strict";var p=E(9471);function N(m){return encodeURIComponent(m).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}Y.exports=function(R,u,v){if(!u)return R;var M;if(v)M=v(u);else if(p.isURLSearchParams(u))M=u.toString();else{var A=[];p.forEach(u,function(h,C){null==h||(p.isArray(h)?C+="[]":h=[h],p.forEach(h,function(w){p.isDate(w)?w=w.toISOString():p.isObject(w)&&(w=JSON.stringify(w)),A.push(N(C)+"="+N(w))}))}),M=A.join("&")}if(M){var T=R.indexOf("#");-1!==T&&(R=R.slice(0,T)),R+=(-1===R.indexOf("?")?"?":"&")+M}return R}},1540:Y=>{"use strict";Y.exports=function(E,p){return p?E.replace(/\/+$/,"")+"/"+p.replace(/^\/+/,""):E}},300:(Y,L,E)=>{"use strict";var p=E(9471);Y.exports=p.isStandardBrowserEnv()?{write:function(R,u,v,M,A,T){var g=[];g.push(R+"="+encodeURIComponent(u)),p.isNumber(v)&&g.push("expires="+new Date(v).toGMTString()),p.isString(M)&&g.push("path="+M),p.isString(A)&&g.push("domain="+A),!0===T&&g.push("secure"),document.cookie=g.join("; ")},read:function(R){var u=document.cookie.match(new RegExp("(^|;\\s*)("+R+")=([^;]*)"));return u?decodeURIComponent(u[3]):null},remove:function(R){this.write(R,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},5164:Y=>{"use strict";Y.exports=function(E){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(E)}},9541:Y=>{"use strict";Y.exports=function(E){return"object"==typeof E&&!0===E.isAxiosError}},2984:(Y,L,E)=>{"use strict";var p=E(9471);Y.exports=p.isStandardBrowserEnv()?function(){var u,m=/(msie|trident)/i.test(navigator.userAgent),R=document.createElement("a");function v(M){var A=M;return m&&(R.setAttribute("href",A),A=R.href),R.setAttribute("href",A),{href:R.href,protocol:R.protocol?R.protocol.replace(/:$/,""):"",host:R.host,search:R.search?R.search.replace(/^\?/,""):"",hash:R.hash?R.hash.replace(/^#/,""):"",hostname:R.hostname,port:R.port,pathname:"/"===R.pathname.charAt(0)?R.pathname:"/"+R.pathname}}return u=v(window.location.href),function(A){var T=p.isString(A)?v(A):A;return T.protocol===u.protocol&&T.host===u.host}}():function(){return!0}},2196:(Y,L,E)=>{"use strict";var p=E(9471);Y.exports=function(m,R){p.forEach(m,function(v,M){M!==R&&M.toUpperCase()===R.toUpperCase()&&(m[R]=v,delete m[M])})}},1929:(Y,L,E)=>{"use strict";var p=E(9471),N=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];Y.exports=function(R){var v,M,A,u={};return R&&p.forEach(R.split("\n"),function(g){if(A=g.indexOf(":"),v=p.trim(g.substr(0,A)).toLowerCase(),M=p.trim(g.substr(A+1)),v){if(u[v]&&N.indexOf(v)>=0)return;u[v]="set-cookie"===v?(u[v]?u[v]:[]).concat([M]):u[v]?u[v]+", "+M:M}}),u}},8908:Y=>{"use strict";Y.exports=function(E){return function(N){return E.apply(null,N)}}},3558:(Y,L,E)=>{"use strict";var p=E(8593),N={};["object","boolean","number","function","string","symbol"].forEach(function(M,A){N[M]=function(g){return typeof g===M||"a"+(A<1?"n ":" ")+M}});var m={},R=p.version.split(".");function u(M,A){for(var T=A?A.split("."):R,g=M.split("."),h=0;h<3;h++){if(T[h]>g[h])return!0;if(T[h]<g[h])return!1}return!1}N.transitional=function(A,T,g){var h=T&&u(T);function C(b,w){return"[Axios v"+p.version+"] Transitional option '"+b+"'"+w+(g?". "+g:"")}return function(b,w,I){if(!1===A)throw new Error(C(w," has been removed in "+T));return h&&!m[w]&&(m[w]=!0,console.warn(C(w," has been deprecated since v"+T+" and will be removed in the near future"))),!A||A(b,w,I)}},Y.exports={isOlderVersion:u,assertOptions:function(M,A,T){if("object"!=typeof M)throw new TypeError("options must be an object");for(var g=Object.keys(M),h=g.length;h-- >0;){var C=g[h],b=A[C];if(b){var w=M[C],I=void 0===w||b(w,C,M);if(!0!==I)throw new TypeError("option "+C+" must be "+I)}else if(!0!==T)throw Error("Unknown option "+C)}},validators:N}},9471:(Y,L,E)=>{"use strict";var p=E(1533),N=Object.prototype.toString;function m($){return"[object Array]"===N.call($)}function R($){return void 0===$}function h($){return null!==$&&"object"==typeof $}function C($){if("[object Object]"!==N.call($))return!1;var pe=Object.getPrototypeOf($);return null===pe||pe===Object.prototype}function P($){return"[object Function]"===N.call($)}function B($,pe){if(null!=$)if("object"!=typeof $&&($=[$]),m($))for(var x=0,r=$.length;x<r;x++)pe.call(null,$[x],x,$);else for(var s in $)Object.prototype.hasOwnProperty.call($,s)&&pe.call(null,$[s],s,$)}Y.exports={isArray:m,isArrayBuffer:function($){return"[object ArrayBuffer]"===N.call($)},isBuffer:function($){return null!==$&&!R($)&&null!==$.constructor&&!R($.constructor)&&"function"==typeof $.constructor.isBuffer&&$.constructor.isBuffer($)},isFormData:function($){return"undefined"!=typeof FormData&&$ instanceof FormData},isArrayBufferView:function($){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView($):$&&$.buffer&&$.buffer instanceof ArrayBuffer},isString:function($){return"string"==typeof $},isNumber:function($){return"number"==typeof $},isObject:h,isPlainObject:C,isUndefined:R,isDate:function($){return"[object Date]"===N.call($)},isFile:function($){return"[object File]"===N.call($)},isBlob:function($){return"[object Blob]"===N.call($)},isFunction:P,isStream:function($){return h($)&&P($.pipe)},isURLSearchParams:function($){return"undefined"!=typeof URLSearchParams&&$ instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:B,merge:function H(){var $={};function pe(s,l){$[l]=C($[l])&&C(s)?H($[l],s):C(s)?H({},s):m(s)?s.slice():s}for(var x=0,r=arguments.length;x<r;x++)B(arguments[x],pe);return $},extend:function($,pe,x){return B(pe,function(s,l){$[l]=x&&"function"==typeof s?p(s,x):s}),$},trim:function($){return $.trim?$.trim():$.replace(/^\s+|\s+$/g,"")},stripBOM:function($){return 65279===$.charCodeAt(0)&&($=$.slice(1)),$}}},6434:(Y,L)=>{"use strict";L.byteLength=function(b){var w=v(b),P=w[1];return 3*(w[0]+P)/4-P},L.toByteArray=function(b){var w,B,I=v(b),P=I[0],k=I[1],O=new N(function(b,w,I){return 3*(w+I)/4-I}(0,P,k)),V=0,U=k>0?P-4:P;for(B=0;B<U;B+=4)w=p[b.charCodeAt(B)]<<18|p[b.charCodeAt(B+1)]<<12|p[b.charCodeAt(B+2)]<<6|p[b.charCodeAt(B+3)],O[V++]=w>>16&255,O[V++]=w>>8&255,O[V++]=255&w;return 2===k&&(w=p[b.charCodeAt(B)]<<2|p[b.charCodeAt(B+1)]>>4,O[V++]=255&w),1===k&&(w=p[b.charCodeAt(B)]<<10|p[b.charCodeAt(B+1)]<<4|p[b.charCodeAt(B+2)]>>2,O[V++]=w>>8&255,O[V++]=255&w),O},L.fromByteArray=function(b){for(var w,I=b.length,P=I%3,k=[],O=16383,V=0,U=I-P;V<U;V+=O)k.push(h(b,V,V+O>U?U:V+O));return 1===P?k.push(E[(w=b[I-1])>>2]+E[w<<4&63]+"=="):2===P&&k.push(E[(w=(b[I-2]<<8)+b[I-1])>>10]+E[w>>4&63]+E[w<<2&63]+"="),k.join("")};for(var E=[],p=[],N="undefined"!=typeof Uint8Array?Uint8Array:Array,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",R=0,u=m.length;R<u;++R)E[R]=m[R],p[m.charCodeAt(R)]=R;function v(b){var w=b.length;if(w%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var I=b.indexOf("=");return-1===I&&(I=w),[I,I===w?0:4-I%4]}function g(b){return E[b>>18&63]+E[b>>12&63]+E[b>>6&63]+E[63&b]}function h(b,w,I){for(var k=[],O=w;O<I;O+=3)k.push(g((b[O]<<16&16711680)+(b[O+1]<<8&65280)+(255&b[O+2])));return k.join("")}p["-".charCodeAt(0)]=62,p["_".charCodeAt(0)]=63},2630:function(Y,L,E){!function(p,N){"use strict";function m(l,a){if(!l)throw new Error(a||"Assertion failed")}function R(l,a){l.super_=a;var f=function(){};f.prototype=a.prototype,l.prototype=new f,l.prototype.constructor=l}function u(l,a,f){if(u.isBN(l))return l;this.negative=0,this.words=null,this.length=0,this.red=null,null!==l&&(("le"===a||"be"===a)&&(f=a,a=10),this._init(l||0,a||10,f||"be"))}var v;"object"==typeof p?p.exports=u:N.BN=u,u.BN=u,u.wordSize=26;try{v="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:E(6601).Buffer}catch(l){}function M(l,a){var f=l.charCodeAt(a);return f>=48&&f<=57?f-48:f>=65&&f<=70?f-55:f>=97&&f<=102?f-87:void m(!1,"Invalid character in "+l)}function A(l,a,f){var _=M(l,f);return f-1>=a&&(_|=M(l,f-1)<<4),_}function T(l,a,f,_){for(var D=0,d=0,i=Math.min(l.length,f),y=a;y<i;y++){var z=l.charCodeAt(y)-48;D*=_,d=z>=49?z-49+10:z>=17?z-17+10:z,m(z>=0&&d<_,"Invalid character"),D+=d}return D}function g(l,a){l.words=a.words,l.length=a.length,l.negative=a.negative,l.red=a.red}if(u.isBN=function(a){return a instanceof u||null!==a&&"object"==typeof a&&a.constructor.wordSize===u.wordSize&&Array.isArray(a.words)},u.max=function(a,f){return a.cmp(f)>0?a:f},u.min=function(a,f){return a.cmp(f)<0?a:f},u.prototype._init=function(a,f,_){if("number"==typeof a)return this._initNumber(a,f,_);if("object"==typeof a)return this._initArray(a,f,_);"hex"===f&&(f=16),m(f===(0|f)&&f>=2&&f<=36);var D=0;"-"===(a=a.toString().replace(/\s+/g,""))[0]&&(D++,this.negative=1),D<a.length&&(16===f?this._parseHex(a,D,_):(this._parseBase(a,f,D),"le"===_&&this._initArray(this.toArray(),f,_)))},u.prototype._initNumber=function(a,f,_){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[67108863&a],this.length=1):a<4503599627370496?(this.words=[67108863&a,a/67108864&67108863],this.length=2):(m(a<9007199254740992),this.words=[67108863&a,a/67108864&67108863,1],this.length=3),"le"===_&&this._initArray(this.toArray(),f,_)},u.prototype._initArray=function(a,f,_){if(m("number"==typeof a.length),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var d,i,y=0;if("be"===_)for(D=a.length-1,d=0;D>=0;D-=3)this.words[d]|=(i=a[D]|a[D-1]<<8|a[D-2]<<16)<<y&67108863,this.words[d+1]=i>>>26-y&67108863,(y+=24)>=26&&(y-=26,d++);else if("le"===_)for(D=0,d=0;D<a.length;D+=3)this.words[d]|=(i=a[D]|a[D+1]<<8|a[D+2]<<16)<<y&67108863,this.words[d+1]=i>>>26-y&67108863,(y+=24)>=26&&(y-=26,d++);return this._strip()},u.prototype._parseHex=function(a,f,_){this.length=Math.ceil((a.length-f)/6),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var y,d=0,i=0;if("be"===_)for(D=a.length-1;D>=f;D-=2)y=A(a,f,D)<<d,this.words[i]|=67108863&y,d>=18?(d-=18,this.words[i+=1]|=y>>>26):d+=8;else for(D=(a.length-f)%2==0?f+1:f;D<a.length;D+=2)y=A(a,f,D)<<d,this.words[i]|=67108863&y,d>=18?(d-=18,this.words[i+=1]|=y>>>26):d+=8;this._strip()},u.prototype._parseBase=function(a,f,_){this.words=[0],this.length=1;for(var D=0,d=1;d<=67108863;d*=f)D++;D--,d=d/f|0;for(var i=a.length-_,y=i%D,z=Math.min(i,i-y)+_,q=0,Z=_;Z<z;Z+=D)q=T(a,Z,Z+D,f),this.imuln(d),this.words[0]+q<67108864?this.words[0]+=q:this._iaddn(q);if(0!==y){var ge=1;for(q=T(a,Z,a.length,f),Z=0;Z<y;Z++)ge*=f;this.imuln(ge),this.words[0]+q<67108864?this.words[0]+=q:this._iaddn(q)}this._strip()},u.prototype.copy=function(a){a.words=new Array(this.length);for(var f=0;f<this.length;f++)a.words[f]=this.words[f];a.length=this.length,a.negative=this.negative,a.red=this.red},u.prototype._move=function(a){g(a,this)},u.prototype.clone=function(){var a=new u(null);return this.copy(a),a},u.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},u.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},u.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{u.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(l){u.prototype.inspect=h}else u.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var C=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],b=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],w=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function k(l,a,f){f.negative=a.negative^l.negative;var _=l.length+a.length|0;f.length=_,_=_-1|0;var D=0|l.words[0],d=0|a.words[0],i=D*d,z=i/67108864|0;f.words[0]=67108863&i;for(var q=1;q<_;q++){for(var Z=z>>>26,ge=67108863&z,me=Math.min(q,a.length-1),le=Math.max(0,q-l.length+1);le<=me;le++)Z+=(i=(D=0|l.words[q-le|0])*(d=0|a.words[le])+ge)/67108864|0,ge=67108863&i;f.words[q]=0|ge,z=0|Z}return 0!==z?f.words[q]=0|z:f.length--,f._strip()}u.prototype.toString=function(a,f){var _;if(f=0|f||1,16===(a=a||10)||"hex"===a){_="";for(var D=0,d=0,i=0;i<this.length;i++){var y=this.words[i],z=(16777215&(y<<D|d)).toString(16);d=y>>>24-D&16777215,(D+=2)>=26&&(D-=26,i--),_=0!==d||i!==this.length-1?C[6-z.length]+z+_:z+_}for(0!==d&&(_=d.toString(16)+_);_.length%f!=0;)_="0"+_;return 0!==this.negative&&(_="-"+_),_}if(a===(0|a)&&a>=2&&a<=36){var q=b[a],Z=w[a];_="";var ge=this.clone();for(ge.negative=0;!ge.isZero();){var me=ge.modrn(Z).toString(a);_=(ge=ge.idivn(Z)).isZero()?me+_:C[q-me.length]+me+_}for(this.isZero()&&(_="0"+_);_.length%f!=0;)_="0"+_;return 0!==this.negative&&(_="-"+_),_}m(!1,"Base should be between 2 and 36")},u.prototype.toNumber=function(){var a=this.words[0];return 2===this.length?a+=67108864*this.words[1]:3===this.length&&1===this.words[2]?a+=4503599627370496+67108864*this.words[1]:this.length>2&&m(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-a:a},u.prototype.toJSON=function(){return this.toString(16,2)},v&&(u.prototype.toBuffer=function(a,f){return this.toArrayLike(v,a,f)}),u.prototype.toArray=function(a,f){return this.toArrayLike(Array,a,f)},u.prototype.toArrayLike=function(a,f,_){this._strip();var D=this.byteLength(),d=_||Math.max(1,D);m(D<=d,"byte array longer than desired length"),m(d>0,"Requested array length <= 0");var i=function(a,f){return a.allocUnsafe?a.allocUnsafe(f):new a(f)}(a,d);return this["_toArrayLike"+("le"===f?"LE":"BE")](i,D),i},u.prototype._toArrayLikeLE=function(a,f){for(var _=0,D=0,d=0,i=0;d<this.length;d++){var y=this.words[d]<<i|D;a[_++]=255&y,_<a.length&&(a[_++]=y>>8&255),_<a.length&&(a[_++]=y>>16&255),6===i?(_<a.length&&(a[_++]=y>>24&255),D=0,i=0):(D=y>>>24,i+=2)}if(_<a.length)for(a[_++]=D;_<a.length;)a[_++]=0},u.prototype._toArrayLikeBE=function(a,f){for(var _=a.length-1,D=0,d=0,i=0;d<this.length;d++){var y=this.words[d]<<i|D;a[_--]=255&y,_>=0&&(a[_--]=y>>8&255),_>=0&&(a[_--]=y>>16&255),6===i?(_>=0&&(a[_--]=y>>24&255),D=0,i=0):(D=y>>>24,i+=2)}if(_>=0)for(a[_--]=D;_>=0;)a[_--]=0},u.prototype._countBits=Math.clz32?function(a){return 32-Math.clz32(a)}:function(a){var f=a,_=0;return f>=4096&&(_+=13,f>>>=13),f>=64&&(_+=7,f>>>=7),f>=8&&(_+=4,f>>>=4),f>=2&&(_+=2,f>>>=2),_+f},u.prototype._zeroBits=function(a){if(0===a)return 26;var f=a,_=0;return 0==(8191&f)&&(_+=13,f>>>=13),0==(127&f)&&(_+=7,f>>>=7),0==(15&f)&&(_+=4,f>>>=4),0==(3&f)&&(_+=2,f>>>=2),0==(1&f)&&_++,_},u.prototype.bitLength=function(){var f=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+f},u.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,f=0;f<this.length;f++){var _=this._zeroBits(this.words[f]);if(a+=_,26!==_)break}return a},u.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},u.prototype.toTwos=function(a){return 0!==this.negative?this.abs().inotn(a).iaddn(1):this.clone()},u.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},u.prototype.isNeg=function(){return 0!==this.negative},u.prototype.neg=function(){return this.clone().ineg()},u.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},u.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var f=0;f<a.length;f++)this.words[f]=this.words[f]|a.words[f];return this._strip()},u.prototype.ior=function(a){return m(0==(this.negative|a.negative)),this.iuor(a)},u.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},u.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},u.prototype.iuand=function(a){var f;f=this.length>a.length?a:this;for(var _=0;_<f.length;_++)this.words[_]=this.words[_]&a.words[_];return this.length=f.length,this._strip()},u.prototype.iand=function(a){return m(0==(this.negative|a.negative)),this.iuand(a)},u.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},u.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},u.prototype.iuxor=function(a){var f,_;this.length>a.length?(f=this,_=a):(f=a,_=this);for(var D=0;D<_.length;D++)this.words[D]=f.words[D]^_.words[D];if(this!==f)for(;D<f.length;D++)this.words[D]=f.words[D];return this.length=f.length,this._strip()},u.prototype.ixor=function(a){return m(0==(this.negative|a.negative)),this.iuxor(a)},u.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},u.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},u.prototype.inotn=function(a){m("number"==typeof a&&a>=0);var f=0|Math.ceil(a/26),_=a%26;this._expand(f),_>0&&f--;for(var D=0;D<f;D++)this.words[D]=67108863&~this.words[D];return _>0&&(this.words[D]=~this.words[D]&67108863>>26-_),this._strip()},u.prototype.notn=function(a){return this.clone().inotn(a)},u.prototype.setn=function(a,f){m("number"==typeof a&&a>=0);var _=a/26|0,D=a%26;return this._expand(_+1),this.words[_]=f?this.words[_]|1<<D:this.words[_]&~(1<<D),this._strip()},u.prototype.iadd=function(a){var f,_,D;if(0!==this.negative&&0===a.negative)return this.negative=0,f=this.isub(a),this.negative^=1,this._normSign();if(0===this.negative&&0!==a.negative)return a.negative=0,f=this.isub(a),a.negative=1,f._normSign();this.length>a.length?(_=this,D=a):(_=a,D=this);for(var d=0,i=0;i<D.length;i++)this.words[i]=67108863&(f=(0|_.words[i])+(0|D.words[i])+d),d=f>>>26;for(;0!==d&&i<_.length;i++)this.words[i]=67108863&(f=(0|_.words[i])+d),d=f>>>26;if(this.length=_.length,0!==d)this.words[this.length]=d,this.length++;else if(_!==this)for(;i<_.length;i++)this.words[i]=_.words[i];return this},u.prototype.add=function(a){var f;return 0!==a.negative&&0===this.negative?(a.negative=0,f=this.sub(a),a.negative^=1,f):0===a.negative&&0!==this.negative?(this.negative=0,f=a.sub(this),this.negative=1,f):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},u.prototype.isub=function(a){if(0!==a.negative){a.negative=0;var f=this.iadd(a);return a.negative=1,f._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var D,d,_=this.cmp(a);if(0===_)return this.negative=0,this.length=1,this.words[0]=0,this;_>0?(D=this,d=a):(D=a,d=this);for(var i=0,y=0;y<d.length;y++)i=(f=(0|D.words[y])-(0|d.words[y])+i)>>26,this.words[y]=67108863&f;for(;0!==i&&y<D.length;y++)i=(f=(0|D.words[y])+i)>>26,this.words[y]=67108863&f;if(0===i&&y<D.length&&D!==this)for(;y<D.length;y++)this.words[y]=D.words[y];return this.length=Math.max(this.length,y),D!==this&&(this.negative=1),this._strip()},u.prototype.sub=function(a){return this.clone().isub(a)};var O=function(a,f,_){var z,q,Z,D=a.words,d=f.words,i=_.words,y=0,ge=0|D[0],me=8191&ge,le=ge>>>13,fe=0|D[1],ae=8191&fe,de=fe>>>13,xe=0|D[2],Ce=8191&xe,oe=xe>>>13,we=0|D[3],ye=8191&we,re=we>>>13,ee=0|D[4],J=8191&ee,ue=ee>>>13,Ae=0|D[5],Te=8191&Ae,Ee=Ae>>>13,We=0|D[6],Ne=8191&We,_e=We>>>13,Be=0|D[7],De=8191&Be,Le=Be>>>13,Mt=0|D[8],He=8191&Mt,$e=Mt>>>13,It=0|D[9],et=8191&It,pt=It>>>13,Ct=0|d[0],at=8191&Ct,it=Ct>>>13,Mn=0|d[1],ot=8191&Mn,Ke=Mn>>>13,In=0|d[2],Ge=8191&In,ut=In>>>13,On=0|d[3],nt=8191&On,Ve=On>>>13,kt=0|d[4],ft=8191&kt,st=kt>>>13,qn=0|d[5],ct=8191&qn,ze=qn>>>13,an=0|d[6],dt=8191&an,Xe=an>>>13,Yt=0|d[7],Ye=8191&Yt,Qe=Yt>>>13,kn=0|d[8],Ze=8191&kn,lt=kn>>>13,ln=0|d[9],jt=8191&ln,qt=ln>>>13;_.negative=a.negative^f.negative,_.length=19;var wn=(y+(z=Math.imul(me,at))|0)+((8191&(q=(q=Math.imul(me,it))+Math.imul(le,at)|0))<<13)|0;y=((Z=Math.imul(le,it))+(q>>>13)|0)+(wn>>>26)|0,wn&=67108863,z=Math.imul(ae,at),q=(q=Math.imul(ae,it))+Math.imul(de,at)|0,Z=Math.imul(de,it);var hn=(y+(z=z+Math.imul(me,ot)|0)|0)+((8191&(q=(q=q+Math.imul(me,Ke)|0)+Math.imul(le,ot)|0))<<13)|0;y=((Z=Z+Math.imul(le,Ke)|0)+(q>>>13)|0)+(hn>>>26)|0,hn&=67108863,z=Math.imul(Ce,at),q=(q=Math.imul(Ce,it))+Math.imul(oe,at)|0,Z=Math.imul(oe,it),z=z+Math.imul(ae,ot)|0,q=(q=q+Math.imul(ae,Ke)|0)+Math.imul(de,ot)|0,Z=Z+Math.imul(de,Ke)|0;var gn=(y+(z=z+Math.imul(me,Ge)|0)|0)+((8191&(q=(q=q+Math.imul(me,ut)|0)+Math.imul(le,Ge)|0))<<13)|0;y=((Z=Z+Math.imul(le,ut)|0)+(q>>>13)|0)+(gn>>>26)|0,gn&=67108863,z=Math.imul(ye,at),q=(q=Math.imul(ye,it))+Math.imul(re,at)|0,Z=Math.imul(re,it),z=z+Math.imul(Ce,ot)|0,q=(q=q+Math.imul(Ce,Ke)|0)+Math.imul(oe,ot)|0,Z=Z+Math.imul(oe,Ke)|0,z=z+Math.imul(ae,Ge)|0,q=(q=q+Math.imul(ae,ut)|0)+Math.imul(de,Ge)|0,Z=Z+Math.imul(de,ut)|0;var Rn=(y+(z=z+Math.imul(me,nt)|0)|0)+((8191&(q=(q=q+Math.imul(me,Ve)|0)+Math.imul(le,nt)|0))<<13)|0;y=((Z=Z+Math.imul(le,Ve)|0)+(q>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,z=Math.imul(J,at),q=(q=Math.imul(J,it))+Math.imul(ue,at)|0,Z=Math.imul(ue,it),z=z+Math.imul(ye,ot)|0,q=(q=q+Math.imul(ye,Ke)|0)+Math.imul(re,ot)|0,Z=Z+Math.imul(re,Ke)|0,z=z+Math.imul(Ce,Ge)|0,q=(q=q+Math.imul(Ce,ut)|0)+Math.imul(oe,Ge)|0,Z=Z+Math.imul(oe,ut)|0,z=z+Math.imul(ae,nt)|0,q=(q=q+Math.imul(ae,Ve)|0)+Math.imul(de,nt)|0,Z=Z+Math.imul(de,Ve)|0;var on=(y+(z=z+Math.imul(me,ft)|0)|0)+((8191&(q=(q=q+Math.imul(me,st)|0)+Math.imul(le,ft)|0))<<13)|0;y=((Z=Z+Math.imul(le,st)|0)+(q>>>13)|0)+(on>>>26)|0,on&=67108863,z=Math.imul(Te,at),q=(q=Math.imul(Te,it))+Math.imul(Ee,at)|0,Z=Math.imul(Ee,it),z=z+Math.imul(J,ot)|0,q=(q=q+Math.imul(J,Ke)|0)+Math.imul(ue,ot)|0,Z=Z+Math.imul(ue,Ke)|0,z=z+Math.imul(ye,Ge)|0,q=(q=q+Math.imul(ye,ut)|0)+Math.imul(re,Ge)|0,Z=Z+Math.imul(re,ut)|0,z=z+Math.imul(Ce,nt)|0,q=(q=q+Math.imul(Ce,Ve)|0)+Math.imul(oe,nt)|0,Z=Z+Math.imul(oe,Ve)|0,z=z+Math.imul(ae,ft)|0,q=(q=q+Math.imul(ae,st)|0)+Math.imul(de,ft)|0,Z=Z+Math.imul(de,st)|0;var _n=(y+(z=z+Math.imul(me,ct)|0)|0)+((8191&(q=(q=q+Math.imul(me,ze)|0)+Math.imul(le,ct)|0))<<13)|0;y=((Z=Z+Math.imul(le,ze)|0)+(q>>>13)|0)+(_n>>>26)|0,_n&=67108863,z=Math.imul(Ne,at),q=(q=Math.imul(Ne,it))+Math.imul(_e,at)|0,Z=Math.imul(_e,it),z=z+Math.imul(Te,ot)|0,q=(q=q+Math.imul(Te,Ke)|0)+Math.imul(Ee,ot)|0,Z=Z+Math.imul(Ee,Ke)|0,z=z+Math.imul(J,Ge)|0,q=(q=q+Math.imul(J,ut)|0)+Math.imul(ue,Ge)|0,Z=Z+Math.imul(ue,ut)|0,z=z+Math.imul(ye,nt)|0,q=(q=q+Math.imul(ye,Ve)|0)+Math.imul(re,nt)|0,Z=Z+Math.imul(re,Ve)|0,z=z+Math.imul(Ce,ft)|0,q=(q=q+Math.imul(Ce,st)|0)+Math.imul(oe,ft)|0,Z=Z+Math.imul(oe,st)|0,z=z+Math.imul(ae,ct)|0,q=(q=q+Math.imul(ae,ze)|0)+Math.imul(de,ct)|0,Z=Z+Math.imul(de,ze)|0;var Jt=(y+(z=z+Math.imul(me,dt)|0)|0)+((8191&(q=(q=q+Math.imul(me,Xe)|0)+Math.imul(le,dt)|0))<<13)|0;y=((Z=Z+Math.imul(le,Xe)|0)+(q>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,z=Math.imul(De,at),q=(q=Math.imul(De,it))+Math.imul(Le,at)|0,Z=Math.imul(Le,it),z=z+Math.imul(Ne,ot)|0,q=(q=q+Math.imul(Ne,Ke)|0)+Math.imul(_e,ot)|0,Z=Z+Math.imul(_e,Ke)|0,z=z+Math.imul(Te,Ge)|0,q=(q=q+Math.imul(Te,ut)|0)+Math.imul(Ee,Ge)|0,Z=Z+Math.imul(Ee,ut)|0,z=z+Math.imul(J,nt)|0,q=(q=q+Math.imul(J,Ve)|0)+Math.imul(ue,nt)|0,Z=Z+Math.imul(ue,Ve)|0,z=z+Math.imul(ye,ft)|0,q=(q=q+Math.imul(ye,st)|0)+Math.imul(re,ft)|0,Z=Z+Math.imul(re,st)|0,z=z+Math.imul(Ce,ct)|0,q=(q=q+Math.imul(Ce,ze)|0)+Math.imul(oe,ct)|0,Z=Z+Math.imul(oe,ze)|0,z=z+Math.imul(ae,dt)|0,q=(q=q+Math.imul(ae,Xe)|0)+Math.imul(de,dt)|0,Z=Z+Math.imul(de,Xe)|0;var Ft=(y+(z=z+Math.imul(me,Ye)|0)|0)+((8191&(q=(q=q+Math.imul(me,Qe)|0)+Math.imul(le,Ye)|0))<<13)|0;y=((Z=Z+Math.imul(le,Qe)|0)+(q>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,z=Math.imul(He,at),q=(q=Math.imul(He,it))+Math.imul($e,at)|0,Z=Math.imul($e,it),z=z+Math.imul(De,ot)|0,q=(q=q+Math.imul(De,Ke)|0)+Math.imul(Le,ot)|0,Z=Z+Math.imul(Le,Ke)|0,z=z+Math.imul(Ne,Ge)|0,q=(q=q+Math.imul(Ne,ut)|0)+Math.imul(_e,Ge)|0,Z=Z+Math.imul(_e,ut)|0,z=z+Math.imul(Te,nt)|0,q=(q=q+Math.imul(Te,Ve)|0)+Math.imul(Ee,nt)|0,Z=Z+Math.imul(Ee,Ve)|0,z=z+Math.imul(J,ft)|0,q=(q=q+Math.imul(J,st)|0)+Math.imul(ue,ft)|0,Z=Z+Math.imul(ue,st)|0,z=z+Math.imul(ye,ct)|0,q=(q=q+Math.imul(ye,ze)|0)+Math.imul(re,ct)|0,Z=Z+Math.imul(re,ze)|0,z=z+Math.imul(Ce,dt)|0,q=(q=q+Math.imul(Ce,Xe)|0)+Math.imul(oe,dt)|0,Z=Z+Math.imul(oe,Xe)|0,z=z+Math.imul(ae,Ye)|0,q=(q=q+Math.imul(ae,Qe)|0)+Math.imul(de,Ye)|0,Z=Z+Math.imul(de,Qe)|0;var An=(y+(z=z+Math.imul(me,Ze)|0)|0)+((8191&(q=(q=q+Math.imul(me,lt)|0)+Math.imul(le,Ze)|0))<<13)|0;y=((Z=Z+Math.imul(le,lt)|0)+(q>>>13)|0)+(An>>>26)|0,An&=67108863,z=Math.imul(et,at),q=(q=Math.imul(et,it))+Math.imul(pt,at)|0,Z=Math.imul(pt,it),z=z+Math.imul(He,ot)|0,q=(q=q+Math.imul(He,Ke)|0)+Math.imul($e,ot)|0,Z=Z+Math.imul($e,Ke)|0,z=z+Math.imul(De,Ge)|0,q=(q=q+Math.imul(De,ut)|0)+Math.imul(Le,Ge)|0,Z=Z+Math.imul(Le,ut)|0,z=z+Math.imul(Ne,nt)|0,q=(q=q+Math.imul(Ne,Ve)|0)+Math.imul(_e,nt)|0,Z=Z+Math.imul(_e,Ve)|0,z=z+Math.imul(Te,ft)|0,q=(q=q+Math.imul(Te,st)|0)+Math.imul(Ee,ft)|0,Z=Z+Math.imul(Ee,st)|0,z=z+Math.imul(J,ct)|0,q=(q=q+Math.imul(J,ze)|0)+Math.imul(ue,ct)|0,Z=Z+Math.imul(ue,ze)|0,z=z+Math.imul(ye,dt)|0,q=(q=q+Math.imul(ye,Xe)|0)+Math.imul(re,dt)|0,Z=Z+Math.imul(re,Xe)|0,z=z+Math.imul(Ce,Ye)|0,q=(q=q+Math.imul(Ce,Qe)|0)+Math.imul(oe,Ye)|0,Z=Z+Math.imul(oe,Qe)|0,z=z+Math.imul(ae,Ze)|0,q=(q=q+Math.imul(ae,lt)|0)+Math.imul(de,Ze)|0,Z=Z+Math.imul(de,lt)|0;var Cn=(y+(z=z+Math.imul(me,jt)|0)|0)+((8191&(q=(q=q+Math.imul(me,qt)|0)+Math.imul(le,jt)|0))<<13)|0;y=((Z=Z+Math.imul(le,qt)|0)+(q>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,z=Math.imul(et,ot),q=(q=Math.imul(et,Ke))+Math.imul(pt,ot)|0,Z=Math.imul(pt,Ke),z=z+Math.imul(He,Ge)|0,q=(q=q+Math.imul(He,ut)|0)+Math.imul($e,Ge)|0,Z=Z+Math.imul($e,ut)|0,z=z+Math.imul(De,nt)|0,q=(q=q+Math.imul(De,Ve)|0)+Math.imul(Le,nt)|0,Z=Z+Math.imul(Le,Ve)|0,z=z+Math.imul(Ne,ft)|0,q=(q=q+Math.imul(Ne,st)|0)+Math.imul(_e,ft)|0,Z=Z+Math.imul(_e,st)|0,z=z+Math.imul(Te,ct)|0,q=(q=q+Math.imul(Te,ze)|0)+Math.imul(Ee,ct)|0,Z=Z+Math.imul(Ee,ze)|0,z=z+Math.imul(J,dt)|0,q=(q=q+Math.imul(J,Xe)|0)+Math.imul(ue,dt)|0,Z=Z+Math.imul(ue,Xe)|0,z=z+Math.imul(ye,Ye)|0,q=(q=q+Math.imul(ye,Qe)|0)+Math.imul(re,Ye)|0,Z=Z+Math.imul(re,Qe)|0,z=z+Math.imul(Ce,Ze)|0,q=(q=q+Math.imul(Ce,lt)|0)+Math.imul(oe,Ze)|0,Z=Z+Math.imul(oe,lt)|0;var Sn=(y+(z=z+Math.imul(ae,jt)|0)|0)+((8191&(q=(q=q+Math.imul(ae,qt)|0)+Math.imul(de,jt)|0))<<13)|0;y=((Z=Z+Math.imul(de,qt)|0)+(q>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,z=Math.imul(et,Ge),q=(q=Math.imul(et,ut))+Math.imul(pt,Ge)|0,Z=Math.imul(pt,ut),z=z+Math.imul(He,nt)|0,q=(q=q+Math.imul(He,Ve)|0)+Math.imul($e,nt)|0,Z=Z+Math.imul($e,Ve)|0,z=z+Math.imul(De,ft)|0,q=(q=q+Math.imul(De,st)|0)+Math.imul(Le,ft)|0,Z=Z+Math.imul(Le,st)|0,z=z+Math.imul(Ne,ct)|0,q=(q=q+Math.imul(Ne,ze)|0)+Math.imul(_e,ct)|0,Z=Z+Math.imul(_e,ze)|0,z=z+Math.imul(Te,dt)|0,q=(q=q+Math.imul(Te,Xe)|0)+Math.imul(Ee,dt)|0,Z=Z+Math.imul(Ee,Xe)|0,z=z+Math.imul(J,Ye)|0,q=(q=q+Math.imul(J,Qe)|0)+Math.imul(ue,Ye)|0,Z=Z+Math.imul(ue,Qe)|0,z=z+Math.imul(ye,Ze)|0,q=(q=q+Math.imul(ye,lt)|0)+Math.imul(re,Ze)|0,Z=Z+Math.imul(re,lt)|0;var Rt=(y+(z=z+Math.imul(Ce,jt)|0)|0)+((8191&(q=(q=q+Math.imul(Ce,qt)|0)+Math.imul(oe,jt)|0))<<13)|0;y=((Z=Z+Math.imul(oe,qt)|0)+(q>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,z=Math.imul(et,nt),q=(q=Math.imul(et,Ve))+Math.imul(pt,nt)|0,Z=Math.imul(pt,Ve),z=z+Math.imul(He,ft)|0,q=(q=q+Math.imul(He,st)|0)+Math.imul($e,ft)|0,Z=Z+Math.imul($e,st)|0,z=z+Math.imul(De,ct)|0,q=(q=q+Math.imul(De,ze)|0)+Math.imul(Le,ct)|0,Z=Z+Math.imul(Le,ze)|0,z=z+Math.imul(Ne,dt)|0,q=(q=q+Math.imul(Ne,Xe)|0)+Math.imul(_e,dt)|0,Z=Z+Math.imul(_e,Xe)|0,z=z+Math.imul(Te,Ye)|0,q=(q=q+Math.imul(Te,Qe)|0)+Math.imul(Ee,Ye)|0,Z=Z+Math.imul(Ee,Qe)|0,z=z+Math.imul(J,Ze)|0,q=(q=q+Math.imul(J,lt)|0)+Math.imul(ue,Ze)|0,Z=Z+Math.imul(ue,lt)|0;var Dn=(y+(z=z+Math.imul(ye,jt)|0)|0)+((8191&(q=(q=q+Math.imul(ye,qt)|0)+Math.imul(re,jt)|0))<<13)|0;y=((Z=Z+Math.imul(re,qt)|0)+(q>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,z=Math.imul(et,ft),q=(q=Math.imul(et,st))+Math.imul(pt,ft)|0,Z=Math.imul(pt,st),z=z+Math.imul(He,ct)|0,q=(q=q+Math.imul(He,ze)|0)+Math.imul($e,ct)|0,Z=Z+Math.imul($e,ze)|0,z=z+Math.imul(De,dt)|0,q=(q=q+Math.imul(De,Xe)|0)+Math.imul(Le,dt)|0,Z=Z+Math.imul(Le,Xe)|0,z=z+Math.imul(Ne,Ye)|0,q=(q=q+Math.imul(Ne,Qe)|0)+Math.imul(_e,Ye)|0,Z=Z+Math.imul(_e,Qe)|0,z=z+Math.imul(Te,Ze)|0,q=(q=q+Math.imul(Te,lt)|0)+Math.imul(Ee,Ze)|0,Z=Z+Math.imul(Ee,lt)|0;var Qt=(y+(z=z+Math.imul(J,jt)|0)|0)+((8191&(q=(q=q+Math.imul(J,qt)|0)+Math.imul(ue,jt)|0))<<13)|0;y=((Z=Z+Math.imul(ue,qt)|0)+(q>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,z=Math.imul(et,ct),q=(q=Math.imul(et,ze))+Math.imul(pt,ct)|0,Z=Math.imul(pt,ze),z=z+Math.imul(He,dt)|0,q=(q=q+Math.imul(He,Xe)|0)+Math.imul($e,dt)|0,Z=Z+Math.imul($e,Xe)|0,z=z+Math.imul(De,Ye)|0,q=(q=q+Math.imul(De,Qe)|0)+Math.imul(Le,Ye)|0,Z=Z+Math.imul(Le,Qe)|0,z=z+Math.imul(Ne,Ze)|0,q=(q=q+Math.imul(Ne,lt)|0)+Math.imul(_e,Ze)|0,Z=Z+Math.imul(_e,lt)|0;var nn=(y+(z=z+Math.imul(Te,jt)|0)|0)+((8191&(q=(q=q+Math.imul(Te,qt)|0)+Math.imul(Ee,jt)|0))<<13)|0;y=((Z=Z+Math.imul(Ee,qt)|0)+(q>>>13)|0)+(nn>>>26)|0,nn&=67108863,z=Math.imul(et,dt),q=(q=Math.imul(et,Xe))+Math.imul(pt,dt)|0,Z=Math.imul(pt,Xe),z=z+Math.imul(He,Ye)|0,q=(q=q+Math.imul(He,Qe)|0)+Math.imul($e,Ye)|0,Z=Z+Math.imul($e,Qe)|0,z=z+Math.imul(De,Ze)|0,q=(q=q+Math.imul(De,lt)|0)+Math.imul(Le,Ze)|0,Z=Z+Math.imul(Le,lt)|0;var En=(y+(z=z+Math.imul(Ne,jt)|0)|0)+((8191&(q=(q=q+Math.imul(Ne,qt)|0)+Math.imul(_e,jt)|0))<<13)|0;y=((Z=Z+Math.imul(_e,qt)|0)+(q>>>13)|0)+(En>>>26)|0,En&=67108863,z=Math.imul(et,Ye),q=(q=Math.imul(et,Qe))+Math.imul(pt,Ye)|0,Z=Math.imul(pt,Qe),z=z+Math.imul(He,Ze)|0,q=(q=q+Math.imul(He,lt)|0)+Math.imul($e,Ze)|0,Z=Z+Math.imul($e,lt)|0;var Oi=(y+(z=z+Math.imul(De,jt)|0)|0)+((8191&(q=(q=q+Math.imul(De,qt)|0)+Math.imul(Le,jt)|0))<<13)|0;y=((Z=Z+Math.imul(Le,qt)|0)+(q>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,z=Math.imul(et,Ze),q=(q=Math.imul(et,lt))+Math.imul(pt,Ze)|0,Z=Math.imul(pt,lt);var ki=(y+(z=z+Math.imul(He,jt)|0)|0)+((8191&(q=(q=q+Math.imul(He,qt)|0)+Math.imul($e,jt)|0))<<13)|0;y=((Z=Z+Math.imul($e,qt)|0)+(q>>>13)|0)+(ki>>>26)|0,ki&=67108863;var Ni=(y+(z=Math.imul(et,jt))|0)+((8191&(q=(q=Math.imul(et,qt))+Math.imul(pt,jt)|0))<<13)|0;return y=((Z=Math.imul(pt,qt))+(q>>>13)|0)+(Ni>>>26)|0,Ni&=67108863,i[0]=wn,i[1]=hn,i[2]=gn,i[3]=Rn,i[4]=on,i[5]=_n,i[6]=Jt,i[7]=Ft,i[8]=An,i[9]=Cn,i[10]=Sn,i[11]=Rt,i[12]=Dn,i[13]=Qt,i[14]=nn,i[15]=En,i[16]=Oi,i[17]=ki,i[18]=Ni,0!==y&&(i[19]=y,_.length++),_};function V(l,a,f){f.negative=a.negative^l.negative,f.length=l.length+a.length;for(var _=0,D=0,d=0;d<f.length-1;d++){var i=D;D=0;for(var y=67108863&_,z=Math.min(d,a.length-1),q=Math.max(0,d-l.length+1);q<=z;q++){var le=(0|l.words[d-q])*(0|a.words[q]),fe=67108863&le;y=67108863&(fe=fe+y|0),D+=(i=(i=i+(le/67108864|0)|0)+(fe>>>26)|0)>>>26,i&=67108863}f.words[d]=y,_=i,i=D}return 0!==_?f.words[d]=_:f.length--,f._strip()}function U(l,a,f){return V(l,a,f)}function B(l,a){this.x=l,this.y=a}Math.imul||(O=k),u.prototype.mulTo=function(a,f){var D=this.length+a.length;return 10===this.length&&10===a.length?O(this,a,f):D<63?k(this,a,f):D<1024?V(this,a,f):U(this,a,f)},B.prototype.makeRBT=function(a){for(var f=new Array(a),_=u.prototype._countBits(a)-1,D=0;D<a;D++)f[D]=this.revBin(D,_,a);return f},B.prototype.revBin=function(a,f,_){if(0===a||a===_-1)return a;for(var D=0,d=0;d<f;d++)D|=(1&a)<<f-d-1,a>>=1;return D},B.prototype.permute=function(a,f,_,D,d,i){for(var y=0;y<i;y++)D[y]=f[a[y]],d[y]=_[a[y]]},B.prototype.transform=function(a,f,_,D,d,i){this.permute(i,a,f,_,D,d);for(var y=1;y<d;y<<=1)for(var z=y<<1,q=Math.cos(2*Math.PI/z),Z=Math.sin(2*Math.PI/z),ge=0;ge<d;ge+=z)for(var me=q,le=Z,fe=0;fe<y;fe++){var ae=_[ge+fe],de=D[ge+fe],xe=_[ge+fe+y],Ce=D[ge+fe+y],oe=me*xe-le*Ce;Ce=me*Ce+le*xe,_[ge+fe]=ae+(xe=oe),D[ge+fe]=de+Ce,_[ge+fe+y]=ae-xe,D[ge+fe+y]=de-Ce,fe!==z&&(oe=q*me-Z*le,le=q*le+Z*me,me=oe)}},B.prototype.guessLen13b=function(a,f){var _=1|Math.max(f,a),D=1&_,d=0;for(_=_/2|0;_;_>>>=1)d++;return 1<<d+1+D},B.prototype.conjugate=function(a,f,_){if(!(_<=1))for(var D=0;D<_/2;D++){var d=a[D];a[D]=a[_-D-1],a[_-D-1]=d,d=f[D],f[D]=-f[_-D-1],f[_-D-1]=-d}},B.prototype.normalize13b=function(a,f){for(var _=0,D=0;D<f/2;D++){var d=8192*Math.round(a[2*D+1]/f)+Math.round(a[2*D]/f)+_;a[D]=67108863&d,_=d<67108864?0:d/67108864|0}return a},B.prototype.convert13b=function(a,f,_,D){for(var d=0,i=0;i<f;i++)_[2*i]=8191&(d+=0|a[i]),_[2*i+1]=8191&(d>>>=13),d>>>=13;for(i=2*f;i<D;++i)_[i]=0;m(0===d),m(0==(-8192&d))},B.prototype.stub=function(a){for(var f=new Array(a),_=0;_<a;_++)f[_]=0;return f},B.prototype.mulp=function(a,f,_){var D=2*this.guessLen13b(a.length,f.length),d=this.makeRBT(D),i=this.stub(D),y=new Array(D),z=new Array(D),q=new Array(D),Z=new Array(D),ge=new Array(D),me=new Array(D),le=_.words;le.length=D,this.convert13b(a.words,a.length,y,D),this.convert13b(f.words,f.length,Z,D),this.transform(y,i,z,q,D,d),this.transform(Z,i,ge,me,D,d);for(var fe=0;fe<D;fe++){var ae=z[fe]*ge[fe]-q[fe]*me[fe];q[fe]=z[fe]*me[fe]+q[fe]*ge[fe],z[fe]=ae}return this.conjugate(z,q,D),this.transform(z,q,le,i,D,d),this.conjugate(le,i,D),this.normalize13b(le,D),_.negative=a.negative^f.negative,_.length=a.length+f.length,_._strip()},u.prototype.mul=function(a){var f=new u(null);return f.words=new Array(this.length+a.length),this.mulTo(a,f)},u.prototype.mulf=function(a){var f=new u(null);return f.words=new Array(this.length+a.length),U(this,a,f)},u.prototype.imul=function(a){return this.clone().mulTo(a,this)},u.prototype.imuln=function(a){var f=a<0;f&&(a=-a),m("number"==typeof a),m(a<67108864);for(var _=0,D=0;D<this.length;D++){var d=(0|this.words[D])*a,i=(67108863&d)+(67108863&_);_>>=26,_+=d/67108864|0,_+=i>>>26,this.words[D]=67108863&i}return 0!==_&&(this.words[D]=_,this.length++),f?this.ineg():this},u.prototype.muln=function(a){return this.clone().imuln(a)},u.prototype.sqr=function(){return this.mul(this)},u.prototype.isqr=function(){return this.imul(this.clone())},u.prototype.pow=function(a){var f=function(l){for(var a=new Array(l.bitLength()),f=0;f<a.length;f++)a[f]=l.words[f/26|0]>>>f%26&1;return a}(a);if(0===f.length)return new u(1);for(var _=this,D=0;D<f.length&&0===f[D];D++,_=_.sqr());if(++D<f.length)for(var d=_.sqr();D<f.length;D++,d=d.sqr())0!==f[D]&&(_=_.mul(d));return _},u.prototype.iushln=function(a){m("number"==typeof a&&a>=0);var d,f=a%26,_=(a-f)/26,D=67108863>>>26-f<<26-f;if(0!==f){var i=0;for(d=0;d<this.length;d++){var y=this.words[d]&D;this.words[d]=(0|this.words[d])-y<<f|i,i=y>>>26-f}i&&(this.words[d]=i,this.length++)}if(0!==_){for(d=this.length-1;d>=0;d--)this.words[d+_]=this.words[d];for(d=0;d<_;d++)this.words[d]=0;this.length+=_}return this._strip()},u.prototype.ishln=function(a){return m(0===this.negative),this.iushln(a)},u.prototype.iushrn=function(a,f,_){var D;m("number"==typeof a&&a>=0),D=f?(f-f%26)/26:0;var d=a%26,i=Math.min((a-d)/26,this.length),y=67108863^67108863>>>d<<d,z=_;if(D-=i,D=Math.max(0,D),z){for(var q=0;q<i;q++)z.words[q]=this.words[q];z.length=i}if(0!==i)if(this.length>i)for(this.length-=i,q=0;q<this.length;q++)this.words[q]=this.words[q+i];else this.words[0]=0,this.length=1;var Z=0;for(q=this.length-1;q>=0&&(0!==Z||q>=D);q--){var ge=0|this.words[q];this.words[q]=Z<<26-d|ge>>>d,Z=ge&y}return z&&0!==Z&&(z.words[z.length++]=Z),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},u.prototype.ishrn=function(a,f,_){return m(0===this.negative),this.iushrn(a,f,_)},u.prototype.shln=function(a){return this.clone().ishln(a)},u.prototype.ushln=function(a){return this.clone().iushln(a)},u.prototype.shrn=function(a){return this.clone().ishrn(a)},u.prototype.ushrn=function(a){return this.clone().iushrn(a)},u.prototype.testn=function(a){m("number"==typeof a&&a>=0);var f=a%26,_=(a-f)/26;return!(this.length<=_||!(this.words[_]&1<<f))},u.prototype.imaskn=function(a){m("number"==typeof a&&a>=0);var f=a%26,_=(a-f)/26;return m(0===this.negative,"imaskn works only with positive numbers"),this.length<=_?this:(0!==f&&_++,this.length=Math.min(_,this.length),0!==f&&(this.words[this.length-1]&=67108863^67108863>>>f<<f),this._strip())},u.prototype.maskn=function(a){return this.clone().imaskn(a)},u.prototype.iaddn=function(a){return m("number"==typeof a),m(a<67108864),a<0?this.isubn(-a):0!==this.negative?1===this.length&&(0|this.words[0])<=a?(this.words[0]=a-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},u.prototype._iaddn=function(a){this.words[0]+=a;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},u.prototype.isubn=function(a){if(m("number"==typeof a),m(a<67108864),a<0)return this.iaddn(-a);if(0!==this.negative)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this._strip()},u.prototype.addn=function(a){return this.clone().iaddn(a)},u.prototype.subn=function(a){return this.clone().isubn(a)},u.prototype.iabs=function(){return this.negative=0,this},u.prototype.abs=function(){return this.clone().iabs()},u.prototype._ishlnsubmul=function(a,f,_){var d;this._expand(a.length+_);var i,y=0;for(d=0;d<a.length;d++){i=(0|this.words[d+_])+y;var z=(0|a.words[d])*f;y=((i-=67108863&z)>>26)-(z/67108864|0),this.words[d+_]=67108863&i}for(;d<this.length-_;d++)y=(i=(0|this.words[d+_])+y)>>26,this.words[d+_]=67108863&i;if(0===y)return this._strip();for(m(-1===y),y=0,d=0;d<this.length;d++)y=(i=-(0|this.words[d])+y)>>26,this.words[d]=67108863&i;return this.negative=1,this._strip()},u.prototype._wordDiv=function(a,f){var _,D=this.clone(),d=a,i=0|d.words[d.length-1];0!=(_=26-this._countBits(i))&&(d=d.ushln(_),D.iushln(_),i=0|d.words[d.length-1]);var q,z=D.length-d.length;if("mod"!==f){(q=new u(null)).length=z+1,q.words=new Array(q.length);for(var Z=0;Z<q.length;Z++)q.words[Z]=0}var ge=D.clone()._ishlnsubmul(d,1,z);0===ge.negative&&(D=ge,q&&(q.words[z]=1));for(var me=z-1;me>=0;me--){var le=67108864*(0|D.words[d.length+me])+(0|D.words[d.length+me-1]);for(le=Math.min(le/i|0,67108863),D._ishlnsubmul(d,le,me);0!==D.negative;)le--,D.negative=0,D._ishlnsubmul(d,1,me),D.isZero()||(D.negative^=1);q&&(q.words[me]=le)}return q&&q._strip(),D._strip(),"div"!==f&&0!==_&&D.iushrn(_),{div:q||null,mod:D}},u.prototype.divmod=function(a,f,_){return m(!a.isZero()),this.isZero()?{div:new u(0),mod:new u(0)}:0!==this.negative&&0===a.negative?(i=this.neg().divmod(a,f),"mod"!==f&&(D=i.div.neg()),"div"!==f&&(d=i.mod.neg(),_&&0!==d.negative&&d.iadd(a)),{div:D,mod:d}):0===this.negative&&0!==a.negative?(i=this.divmod(a.neg(),f),"mod"!==f&&(D=i.div.neg()),{div:D,mod:i.mod}):0!=(this.negative&a.negative)?(i=this.neg().divmod(a.neg(),f),"div"!==f&&(d=i.mod.neg(),_&&0!==d.negative&&d.isub(a)),{div:i.div,mod:d}):a.length>this.length||this.cmp(a)<0?{div:new u(0),mod:this}:1===a.length?"div"===f?{div:this.divn(a.words[0]),mod:null}:"mod"===f?{div:null,mod:new u(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new u(this.modrn(a.words[0]))}:this._wordDiv(a,f);var D,d,i},u.prototype.div=function(a){return this.divmod(a,"div",!1).div},u.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},u.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},u.prototype.divRound=function(a){var f=this.divmod(a);if(f.mod.isZero())return f.div;var _=0!==f.div.negative?f.mod.isub(a):f.mod,D=a.ushrn(1),d=a.andln(1),i=_.cmp(D);return i<0||1===d&&0===i?f.div:0!==f.div.negative?f.div.isubn(1):f.div.iaddn(1)},u.prototype.modrn=function(a){var f=a<0;f&&(a=-a),m(a<=67108863);for(var _=(1<<26)%a,D=0,d=this.length-1;d>=0;d--)D=(_*D+(0|this.words[d]))%a;return f?-D:D},u.prototype.modn=function(a){return this.modrn(a)},u.prototype.idivn=function(a){var f=a<0;f&&(a=-a),m(a<=67108863);for(var _=0,D=this.length-1;D>=0;D--){var d=(0|this.words[D])+67108864*_;this.words[D]=d/a|0,_=d%a}return this._strip(),f?this.ineg():this},u.prototype.divn=function(a){return this.clone().idivn(a)},u.prototype.egcd=function(a){m(0===a.negative),m(!a.isZero());var f=this,_=a.clone();f=0!==f.negative?f.umod(a):f.clone();for(var D=new u(1),d=new u(0),i=new u(0),y=new u(1),z=0;f.isEven()&&_.isEven();)f.iushrn(1),_.iushrn(1),++z;for(var q=_.clone(),Z=f.clone();!f.isZero();){for(var ge=0,me=1;0==(f.words[0]&me)&&ge<26;++ge,me<<=1);if(ge>0)for(f.iushrn(ge);ge-- >0;)(D.isOdd()||d.isOdd())&&(D.iadd(q),d.isub(Z)),D.iushrn(1),d.iushrn(1);for(var le=0,fe=1;0==(_.words[0]&fe)&&le<26;++le,fe<<=1);if(le>0)for(_.iushrn(le);le-- >0;)(i.isOdd()||y.isOdd())&&(i.iadd(q),y.isub(Z)),i.iushrn(1),y.iushrn(1);f.cmp(_)>=0?(f.isub(_),D.isub(i),d.isub(y)):(_.isub(f),i.isub(D),y.isub(d))}return{a:i,b:y,gcd:_.iushln(z)}},u.prototype._invmp=function(a){m(0===a.negative),m(!a.isZero());var ge,f=this,_=a.clone();f=0!==f.negative?f.umod(a):f.clone();for(var D=new u(1),d=new u(0),i=_.clone();f.cmpn(1)>0&&_.cmpn(1)>0;){for(var y=0,z=1;0==(f.words[0]&z)&&y<26;++y,z<<=1);if(y>0)for(f.iushrn(y);y-- >0;)D.isOdd()&&D.iadd(i),D.iushrn(1);for(var q=0,Z=1;0==(_.words[0]&Z)&&q<26;++q,Z<<=1);if(q>0)for(_.iushrn(q);q-- >0;)d.isOdd()&&d.iadd(i),d.iushrn(1);f.cmp(_)>=0?(f.isub(_),D.isub(d)):(_.isub(f),d.isub(D))}return(ge=0===f.cmpn(1)?D:d).cmpn(0)<0&&ge.iadd(a),ge},u.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var f=this.clone(),_=a.clone();f.negative=0,_.negative=0;for(var D=0;f.isEven()&&_.isEven();D++)f.iushrn(1),_.iushrn(1);for(;;){for(;f.isEven();)f.iushrn(1);for(;_.isEven();)_.iushrn(1);var d=f.cmp(_);if(d<0){var i=f;f=_,_=i}else if(0===d||0===_.cmpn(1))break;f.isub(_)}return _.iushln(D)},u.prototype.invm=function(a){return this.egcd(a).a.umod(a)},u.prototype.isEven=function(){return 0==(1&this.words[0])},u.prototype.isOdd=function(){return 1==(1&this.words[0])},u.prototype.andln=function(a){return this.words[0]&a},u.prototype.bincn=function(a){m("number"==typeof a);var f=a%26,_=(a-f)/26,D=1<<f;if(this.length<=_)return this._expand(_+1),this.words[_]|=D,this;for(var d=D,i=_;0!==d&&i<this.length;i++){var y=0|this.words[i];d=(y+=d)>>>26,this.words[i]=y&=67108863}return 0!==d&&(this.words[i]=d,this.length++),this},u.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},u.prototype.cmpn=function(a){var _,f=a<0;if(0!==this.negative&&!f)return-1;if(0===this.negative&&f)return 1;if(this._strip(),this.length>1)_=1;else{f&&(a=-a),m(a<=67108863,"Number is too big");var D=0|this.words[0];_=D===a?0:D<a?-1:1}return 0!==this.negative?0|-_:_},u.prototype.cmp=function(a){if(0!==this.negative&&0===a.negative)return-1;if(0===this.negative&&0!==a.negative)return 1;var f=this.ucmp(a);return 0!==this.negative?0|-f:f},u.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var f=0,_=this.length-1;_>=0;_--){var D=0|this.words[_],d=0|a.words[_];if(D!==d){D<d?f=-1:D>d&&(f=1);break}}return f},u.prototype.gtn=function(a){return 1===this.cmpn(a)},u.prototype.gt=function(a){return 1===this.cmp(a)},u.prototype.gten=function(a){return this.cmpn(a)>=0},u.prototype.gte=function(a){return this.cmp(a)>=0},u.prototype.ltn=function(a){return-1===this.cmpn(a)},u.prototype.lt=function(a){return-1===this.cmp(a)},u.prototype.lten=function(a){return this.cmpn(a)<=0},u.prototype.lte=function(a){return this.cmp(a)<=0},u.prototype.eqn=function(a){return 0===this.cmpn(a)},u.prototype.eq=function(a){return 0===this.cmp(a)},u.red=function(a){return new r(a)},u.prototype.toRed=function(a){return m(!this.red,"Already a number in reduction context"),m(0===this.negative,"red works only with positives"),a.convertTo(this)._forceRed(a)},u.prototype.fromRed=function(){return m(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},u.prototype._forceRed=function(a){return this.red=a,this},u.prototype.forceRed=function(a){return m(!this.red,"Already a number in reduction context"),this._forceRed(a)},u.prototype.redAdd=function(a){return m(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},u.prototype.redIAdd=function(a){return m(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},u.prototype.redSub=function(a){return m(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},u.prototype.redISub=function(a){return m(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},u.prototype.redShl=function(a){return m(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},u.prototype.redMul=function(a){return m(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},u.prototype.redIMul=function(a){return m(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},u.prototype.redSqr=function(){return m(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},u.prototype.redISqr=function(){return m(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},u.prototype.redSqrt=function(){return m(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},u.prototype.redInvm=function(){return m(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},u.prototype.redNeg=function(){return m(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},u.prototype.redPow=function(a){return m(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var H={k256:null,p224:null,p192:null,p25519:null};function W(l,a){this.name=l,this.p=new u(a,16),this.n=this.p.bitLength(),this.k=new u(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function te(){W.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function $(){W.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function pe(){W.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){W.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function r(l){if("string"==typeof l){var a=u._prime(l);this.m=a.p,this.prime=a}else m(l.gtn(1),"modulus must be greater than 1"),this.m=l,this.prime=null}function s(l){r.call(this,l),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new u(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}W.prototype._tmp=function(){var a=new u(null);return a.words=new Array(Math.ceil(this.n/13)),a},W.prototype.ireduce=function(a){var _,f=a;do{this.split(f,this.tmp),_=(f=(f=this.imulK(f)).iadd(this.tmp)).bitLength()}while(_>this.n);var D=_<this.n?-1:f.ucmp(this.p);return 0===D?(f.words[0]=0,f.length=1):D>0?f.isub(this.p):void 0!==f.strip?f.strip():f._strip(),f},W.prototype.split=function(a,f){a.iushrn(this.n,0,f)},W.prototype.imulK=function(a){return a.imul(this.k)},R(te,W),te.prototype.split=function(a,f){for(var _=4194303,D=Math.min(a.length,9),d=0;d<D;d++)f.words[d]=a.words[d];if(f.length=D,a.length<=9)return a.words[0]=0,void(a.length=1);var i=a.words[9];for(f.words[f.length++]=i&_,d=10;d<a.length;d++){var y=0|a.words[d];a.words[d-10]=(y&_)<<4|i>>>22,i=y}a.words[d-10]=i>>>=22,a.length-=0===i&&a.length>10?10:9},te.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var f=0,_=0;_<a.length;_++){var D=0|a.words[_];a.words[_]=67108863&(f+=977*D),f=64*D+(f/67108864|0)}return 0===a.words[a.length-1]&&(a.length--,0===a.words[a.length-1]&&a.length--),a},R($,W),R(pe,W),R(x,W),x.prototype.imulK=function(a){for(var f=0,_=0;_<a.length;_++){var D=19*(0|a.words[_])+f,d=67108863&D;D>>>=26,a.words[_]=d,f=D}return 0!==f&&(a.words[a.length++]=f),a},u._prime=function(a){if(H[a])return H[a];var f;if("k256"===a)f=new te;else if("p224"===a)f=new $;else if("p192"===a)f=new pe;else{if("p25519"!==a)throw new Error("Unknown prime "+a);f=new x}return H[a]=f,f},r.prototype._verify1=function(a){m(0===a.negative,"red works only with positives"),m(a.red,"red works only with red numbers")},r.prototype._verify2=function(a,f){m(0==(a.negative|f.negative),"red works only with positives"),m(a.red&&a.red===f.red,"red works only with red numbers")},r.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(g(a,a.umod(this.m)._forceRed(this)),a)},r.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},r.prototype.add=function(a,f){this._verify2(a,f);var _=a.add(f);return _.cmp(this.m)>=0&&_.isub(this.m),_._forceRed(this)},r.prototype.iadd=function(a,f){this._verify2(a,f);var _=a.iadd(f);return _.cmp(this.m)>=0&&_.isub(this.m),_},r.prototype.sub=function(a,f){this._verify2(a,f);var _=a.sub(f);return _.cmpn(0)<0&&_.iadd(this.m),_._forceRed(this)},r.prototype.isub=function(a,f){this._verify2(a,f);var _=a.isub(f);return _.cmpn(0)<0&&_.iadd(this.m),_},r.prototype.shl=function(a,f){return this._verify1(a),this.imod(a.ushln(f))},r.prototype.imul=function(a,f){return this._verify2(a,f),this.imod(a.imul(f))},r.prototype.mul=function(a,f){return this._verify2(a,f),this.imod(a.mul(f))},r.prototype.isqr=function(a){return this.imul(a,a.clone())},r.prototype.sqr=function(a){return this.mul(a,a)},r.prototype.sqrt=function(a){if(a.isZero())return a.clone();var f=this.m.andln(3);if(m(f%2==1),3===f){var _=this.m.add(new u(1)).iushrn(2);return this.pow(a,_)}for(var D=this.m.subn(1),d=0;!D.isZero()&&0===D.andln(1);)d++,D.iushrn(1);m(!D.isZero());var i=new u(1).toRed(this),y=i.redNeg(),z=this.m.subn(1).iushrn(1),q=this.m.bitLength();for(q=new u(2*q*q).toRed(this);0!==this.pow(q,z).cmp(y);)q.redIAdd(y);for(var Z=this.pow(q,D),ge=this.pow(a,D.addn(1).iushrn(1)),me=this.pow(a,D),le=d;0!==me.cmp(i);){for(var fe=me,ae=0;0!==fe.cmp(i);ae++)fe=fe.redSqr();m(ae<le);var de=this.pow(Z,new u(1).iushln(le-ae-1));ge=ge.redMul(de),Z=de.redSqr(),me=me.redMul(Z),le=ae}return ge},r.prototype.invm=function(a){var f=a._invmp(this.m);return 0!==f.negative?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},r.prototype.pow=function(a,f){if(f.isZero())return new u(1).toRed(this);if(0===f.cmpn(1))return a.clone();var D=new Array(16);D[0]=new u(1).toRed(this),D[1]=a;for(var d=2;d<D.length;d++)D[d]=this.mul(D[d-1],a);var i=D[0],y=0,z=0,q=f.bitLength()%26;for(0===q&&(q=26),d=f.length-1;d>=0;d--){for(var Z=f.words[d],ge=q-1;ge>=0;ge--){var me=Z>>ge&1;i!==D[0]&&(i=this.sqr(i)),0!==me||0!==y?(y<<=1,y|=me,(4==++z||0===d&&0===ge)&&(i=this.mul(i,D[y]),z=0,y=0)):z=0}q=26}return i},r.prototype.convertTo=function(a){var f=a.umod(this.m);return f===a?f.clone():f},r.prototype.convertFrom=function(a){var f=a.clone();return f.red=null,f},u.mont=function(a){return new s(a)},R(s,r),s.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},s.prototype.convertFrom=function(a){var f=this.imod(a.mul(this.rinv));return f.red=null,f},s.prototype.imul=function(a,f){if(a.isZero()||f.isZero())return a.words[0]=0,a.length=1,a;var _=a.imul(f),D=_.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=_.isub(D).iushrn(this.shift),i=d;return d.cmp(this.m)>=0?i=d.isub(this.m):d.cmpn(0)<0&&(i=d.iadd(this.m)),i._forceRed(this)},s.prototype.mul=function(a,f){if(a.isZero()||f.isZero())return new u(0)._forceRed(this);var _=a.mul(f),D=_.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=_.isub(D).iushrn(this.shift),i=d;return d.cmp(this.m)>=0?i=d.isub(this.m):d.cmpn(0)<0&&(i=d.iadd(this.m)),i._forceRed(this)},s.prototype.invm=function(a){return this.imod(a._invmp(this.m).mul(this.r2))._forceRed(this)}}(Y=E.nmd(Y),this)},4761:(Y,L,E)=>{var p;function N(R){this.rand=R}if(Y.exports=function(u){return p||(p=new N(null)),p.generate(u)},Y.exports.Rand=N,N.prototype.generate=function(u){return this._rand(u)},N.prototype._rand=function(u){if(this.rand.getBytes)return this.rand.getBytes(u);for(var v=new Uint8Array(u),M=0;M<v.length;M++)v[M]=this.rand.getByte();return v},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?N.prototype._rand=function(u){var v=new Uint8Array(u);return self.crypto.getRandomValues(v),v}:self.msCrypto&&self.msCrypto.getRandomValues?N.prototype._rand=function(u){var v=new Uint8Array(u);return self.msCrypto.getRandomValues(v),v}:"object"==typeof window&&(N.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var m=E(9726);if("function"!=typeof m.randomBytes)throw new Error("Not supported");N.prototype._rand=function(u){return m.randomBytes(u)}}catch(R){}},875:(Y,L,E)=>{var p=E(5859).Buffer;function N(A){p.isBuffer(A)||(A=p.from(A));for(var T=A.length/4|0,g=new Array(T),h=0;h<T;h++)g[h]=A.readUInt32BE(4*h);return g}function m(A){for(;0<A.length;A++)A[0]=0}function R(A,T,g,h,C){for(var B,H,W,te,b=g[0],w=g[1],I=g[2],P=g[3],k=A[0]^T[0],O=A[1]^T[1],V=A[2]^T[2],U=A[3]^T[3],$=4,pe=1;pe<C;pe++)B=b[k>>>24]^w[O>>>16&255]^I[V>>>8&255]^P[255&U]^T[$++],H=b[O>>>24]^w[V>>>16&255]^I[U>>>8&255]^P[255&k]^T[$++],W=b[V>>>24]^w[U>>>16&255]^I[k>>>8&255]^P[255&O]^T[$++],te=b[U>>>24]^w[k>>>16&255]^I[O>>>8&255]^P[255&V]^T[$++],k=B,O=H,V=W,U=te;return B=(h[k>>>24]<<24|h[O>>>16&255]<<16|h[V>>>8&255]<<8|h[255&U])^T[$++],H=(h[O>>>24]<<24|h[V>>>16&255]<<16|h[U>>>8&255]<<8|h[255&k])^T[$++],W=(h[V>>>24]<<24|h[U>>>16&255]<<16|h[k>>>8&255]<<8|h[255&O])^T[$++],te=(h[U>>>24]<<24|h[k>>>16&255]<<16|h[O>>>8&255]<<8|h[255&V])^T[$++],[B>>>=0,H>>>=0,W>>>=0,te>>>=0]}var u=[0,1,2,4,8,16,32,64,128,27,54],v=function(){for(var A=new Array(256),T=0;T<256;T++)A[T]=T<128?T<<1:T<<1^283;for(var g=[],h=[],C=[[],[],[],[]],b=[[],[],[],[]],w=0,I=0,P=0;P<256;++P){var k=I^I<<1^I<<2^I<<3^I<<4;g[w]=k=k>>>8^255&k^99,h[k]=w;var O=A[w],V=A[O],U=A[V],B=257*A[k]^16843008*k;C[0][w]=B<<24|B>>>8,C[1][w]=B<<16|B>>>16,C[2][w]=B<<8|B>>>24,C[3][w]=B,b[0][k]=(B=16843009*U^65537*V^257*O^16843008*w)<<24|B>>>8,b[1][k]=B<<16|B>>>16,b[2][k]=B<<8|B>>>24,b[3][k]=B,0===w?w=I=1:(w=O^A[A[A[U^O]]],I^=A[A[I]])}return{SBOX:g,INV_SBOX:h,SUB_MIX:C,INV_SUB_MIX:b}}();function M(A){this._key=N(A),this._reset()}M.blockSize=16,M.keySize=32,M.prototype.blockSize=M.blockSize,M.prototype.keySize=M.keySize,M.prototype._reset=function(){for(var A=this._key,T=A.length,g=T+6,h=4*(g+1),C=[],b=0;b<T;b++)C[b]=A[b];for(b=T;b<h;b++){var w=C[b-1];b%T==0?(w=v.SBOX[(w=w<<8|w>>>24)>>>24]<<24|v.SBOX[w>>>16&255]<<16|v.SBOX[w>>>8&255]<<8|v.SBOX[255&w],w^=u[b/T|0]<<24):T>6&&b%T==4&&(w=v.SBOX[w>>>24]<<24|v.SBOX[w>>>16&255]<<16|v.SBOX[w>>>8&255]<<8|v.SBOX[255&w]),C[b]=C[b-T]^w}for(var I=[],P=0;P<h;P++){var k=h-P,O=C[k-(P%4?0:4)];I[P]=P<4||k<=4?O:v.INV_SUB_MIX[0][v.SBOX[O>>>24]]^v.INV_SUB_MIX[1][v.SBOX[O>>>16&255]]^v.INV_SUB_MIX[2][v.SBOX[O>>>8&255]]^v.INV_SUB_MIX[3][v.SBOX[255&O]]}this._nRounds=g,this._keySchedule=C,this._invKeySchedule=I},M.prototype.encryptBlockRaw=function(A){return R(A=N(A),this._keySchedule,v.SUB_MIX,v.SBOX,this._nRounds)},M.prototype.encryptBlock=function(A){var T=this.encryptBlockRaw(A),g=p.allocUnsafe(16);return g.writeUInt32BE(T[0],0),g.writeUInt32BE(T[1],4),g.writeUInt32BE(T[2],8),g.writeUInt32BE(T[3],12),g},M.prototype.decryptBlock=function(A){var T=(A=N(A))[1];A[1]=A[3],A[3]=T;var g=R(A,this._invKeySchedule,v.INV_SUB_MIX,v.INV_SBOX,this._nRounds),h=p.allocUnsafe(16);return h.writeUInt32BE(g[0],0),h.writeUInt32BE(g[3],4),h.writeUInt32BE(g[2],8),h.writeUInt32BE(g[1],12),h},M.prototype.scrub=function(){m(this._keySchedule),m(this._invKeySchedule),m(this._key)},Y.exports.AES=M},295:(Y,L,E)=>{var p=E(875),N=E(5859).Buffer,m=E(5834),R=E(9879),u=E(4504),v=E(3910),M=E(1643);function g(h,C,b,w){m.call(this);var I=N.alloc(4,0);this._cipher=new p.AES(C);var P=this._cipher.encryptBlock(I);this._ghash=new u(P),b=function(h,C,b){if(12===C.length)return h._finID=N.concat([C,N.from([0,0,0,1])]),N.concat([C,N.from([0,0,0,2])]);var w=new u(b),I=C.length,P=I%16;w.update(C),P&&w.update(N.alloc(P=16-P,0)),w.update(N.alloc(8,0));var k=8*I,O=N.alloc(8);O.writeUIntBE(k,0,8),w.update(O),h._finID=w.state;var V=N.from(h._finID);return M(V),V}(this,b,P),this._prev=N.from(b),this._cache=N.allocUnsafe(0),this._secCache=N.allocUnsafe(0),this._decrypt=w,this._alen=0,this._len=0,this._mode=h,this._authTag=null,this._called=!1}R(g,m),g.prototype._update=function(h){if(!this._called&&this._alen){var C=16-this._alen%16;C<16&&(C=N.alloc(C,0),this._ghash.update(C))}this._called=!0;var b=this._mode.encrypt(this,h);return this._ghash.update(this._decrypt?h:b),this._len+=h.length,b},g.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var h=v(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(h,C){var b=0;h.length!==C.length&&b++;for(var w=Math.min(h.length,C.length),I=0;I<w;++I)b+=h[I]^C[I];return b}(h,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=h,this._cipher.scrub()},g.prototype.getAuthTag=function(){if(this._decrypt||!N.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},g.prototype.setAuthTag=function(C){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=C},g.prototype.setAAD=function(C){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(C),this._alen+=C.length},Y.exports=g},9586:(Y,L,E)=>{var p=E(6481),N=E(3617),m=E(4946);L.createCipher=L.Cipher=p.createCipher,L.createCipheriv=L.Cipheriv=p.createCipheriv,L.createDecipher=L.Decipher=N.createDecipher,L.createDecipheriv=L.Decipheriv=N.createDecipheriv,L.listCiphers=L.getCiphers=function(){return Object.keys(m)}},3617:(Y,L,E)=>{var p=E(295),N=E(5859).Buffer,m=E(9396),R=E(9223),u=E(5834),v=E(875),M=E(2367);function T(w,I,P){u.call(this),this._cache=new g,this._last=void 0,this._cipher=new v.AES(I),this._prev=N.from(P),this._mode=w,this._autopadding=!0}function g(){this.cache=N.allocUnsafe(0)}function C(w,I,P){var k=m[w.toLowerCase()];if(!k)throw new TypeError("invalid suite type");if("string"==typeof P&&(P=N.from(P)),"GCM"!==k.mode&&P.length!==k.iv)throw new TypeError("invalid iv length "+P.length);if("string"==typeof I&&(I=N.from(I)),I.length!==k.key/8)throw new TypeError("invalid key length "+I.length);return"stream"===k.type?new R(k.module,I,P,!0):"auth"===k.type?new p(k.module,I,P,!0):new T(k.module,I,P)}E(9879)(T,u),T.prototype._update=function(w){this._cache.add(w);for(var I,P,k=[];I=this._cache.get(this._autopadding);)P=this._mode.decrypt(this,I),k.push(P);return N.concat(k)},T.prototype._final=function(){var w=this._cache.flush();if(this._autopadding)return function(w){var I=w[15];if(I<1||I>16)throw new Error("unable to decrypt data");for(var P=-1;++P<I;)if(w[P+(16-I)]!==I)throw new Error("unable to decrypt data");if(16!==I)return w.slice(0,16-I)}(this._mode.decrypt(this,w));if(w)throw new Error("data not multiple of block length")},T.prototype.setAutoPadding=function(w){return this._autopadding=!!w,this},g.prototype.add=function(w){this.cache=N.concat([this.cache,w])},g.prototype.get=function(w){var I;if(w){if(this.cache.length>16)return I=this.cache.slice(0,16),this.cache=this.cache.slice(16),I}else if(this.cache.length>=16)return I=this.cache.slice(0,16),this.cache=this.cache.slice(16),I;return null},g.prototype.flush=function(){if(this.cache.length)return this.cache},L.createDecipher=function(w,I){var P=m[w.toLowerCase()];if(!P)throw new TypeError("invalid suite type");var k=M(I,!1,P.key,P.iv);return C(w,k.key,k.iv)},L.createDecipheriv=C},6481:(Y,L,E)=>{var p=E(9396),N=E(295),m=E(5859).Buffer,R=E(9223),u=E(5834),v=E(875),M=E(2367);function T(w,I,P){u.call(this),this._cache=new h,this._cipher=new v.AES(I),this._prev=m.from(P),this._mode=w,this._autopadding=!0}E(9879)(T,u),T.prototype._update=function(w){this._cache.add(w);for(var I,P,k=[];I=this._cache.get();)P=this._mode.encrypt(this,I),k.push(P);return m.concat(k)};var g=m.alloc(16,16);function h(){this.cache=m.allocUnsafe(0)}function C(w,I,P){var k=p[w.toLowerCase()];if(!k)throw new TypeError("invalid suite type");if("string"==typeof I&&(I=m.from(I)),I.length!==k.key/8)throw new TypeError("invalid key length "+I.length);if("string"==typeof P&&(P=m.from(P)),"GCM"!==k.mode&&P.length!==k.iv)throw new TypeError("invalid iv length "+P.length);return"stream"===k.type?new R(k.module,I,P):"auth"===k.type?new N(k.module,I,P):new T(k.module,I,P)}T.prototype._final=function(){var w=this._cache.flush();if(this._autopadding)return w=this._mode.encrypt(this,w),this._cipher.scrub(),w;if(!w.equals(g))throw this._cipher.scrub(),new Error("data not multiple of block length")},T.prototype.setAutoPadding=function(w){return this._autopadding=!!w,this},h.prototype.add=function(w){this.cache=m.concat([this.cache,w])},h.prototype.get=function(){if(this.cache.length>15){var w=this.cache.slice(0,16);return this.cache=this.cache.slice(16),w}return null},h.prototype.flush=function(){for(var w=16-this.cache.length,I=m.allocUnsafe(w),P=-1;++P<w;)I.writeUInt8(w,P);return m.concat([this.cache,I])},L.createCipheriv=C,L.createCipher=function(w,I){var P=p[w.toLowerCase()];if(!P)throw new TypeError("invalid suite type");var k=M(I,!1,P.key,P.iv);return C(w,k.key,k.iv)}},4504:(Y,L,E)=>{var p=E(5859).Buffer,N=p.alloc(16,0);function R(v){var M=p.allocUnsafe(16);return M.writeUInt32BE(v[0]>>>0,0),M.writeUInt32BE(v[1]>>>0,4),M.writeUInt32BE(v[2]>>>0,8),M.writeUInt32BE(v[3]>>>0,12),M}function u(v){this.h=v,this.state=p.alloc(16,0),this.cache=p.allocUnsafe(0)}u.prototype.ghash=function(v){for(var M=-1;++M<v.length;)this.state[M]^=v[M];this._multiply()},u.prototype._multiply=function(){for(var A,g,v=function(v){return[v.readUInt32BE(0),v.readUInt32BE(4),v.readUInt32BE(8),v.readUInt32BE(12)]}(this.h),M=[0,0,0,0],h=-1;++h<128;){for(0!=(this.state[~~(h/8)]&1<<7-h%8)&&(M[0]^=v[0],M[1]^=v[1],M[2]^=v[2],M[3]^=v[3]),g=0!=(1&v[3]),A=3;A>0;A--)v[A]=v[A]>>>1|(1&v[A-1])<<31;v[0]=v[0]>>>1,g&&(v[0]=v[0]^225<<24)}this.state=R(M)},u.prototype.update=function(v){this.cache=p.concat([this.cache,v]);for(var M;this.cache.length>=16;)M=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(M)},u.prototype.final=function(v,M){return this.cache.length&&this.ghash(p.concat([this.cache,N],16)),this.ghash(R([0,v,0,M])),this.state},Y.exports=u},1643:Y=>{Y.exports=function(E){for(var N,p=E.length;p--;){if(255!==(N=E.readUInt8(p))){N++,E.writeUInt8(N,p);break}E.writeUInt8(0,p)}}},4552:(Y,L,E)=>{var p=E(3910);L.encrypt=function(N,m){var R=p(m,N._prev);return N._prev=N._cipher.encryptBlock(R),N._prev},L.decrypt=function(N,m){var R=N._prev;N._prev=m;var u=N._cipher.decryptBlock(m);return p(u,R)}},7606:(Y,L,E)=>{var p=E(5859).Buffer,N=E(3910);function m(R,u,v){var M=u.length,A=N(u,R._cache);return R._cache=R._cache.slice(M),R._prev=p.concat([R._prev,v?u:A]),A}L.encrypt=function(R,u,v){for(var A,M=p.allocUnsafe(0);u.length;){if(0===R._cache.length&&(R._cache=R._cipher.encryptBlock(R._prev),R._prev=p.allocUnsafe(0)),!(R._cache.length<=u.length)){M=p.concat([M,m(R,u,v)]);break}M=p.concat([M,m(R,u.slice(0,A=R._cache.length),v)]),u=u.slice(A)}return M}},7850:(Y,L,E)=>{var p=E(5859).Buffer;function N(R,u,v){for(var h,C,A=-1,g=0;++A<8;)g+=(128&(C=R._cipher.encryptBlock(R._prev)[0]^(h=u&1<<7-A?128:0)))>>A%8,R._prev=m(R._prev,v?h:C);return g}function m(R,u){var v=R.length,M=-1,A=p.allocUnsafe(R.length);for(R=p.concat([R,p.from([u])]);++M<v;)A[M]=R[M]<<1|R[M+1]>>7;return A}L.encrypt=function(R,u,v){for(var M=u.length,A=p.allocUnsafe(M),T=-1;++T<M;)A[T]=N(R,u[T],v);return A}},6377:(Y,L,E)=>{var p=E(5859).Buffer;function N(m,R,u){var M=m._cipher.encryptBlock(m._prev)[0]^R;return m._prev=p.concat([m._prev.slice(1),p.from([u?R:M])]),M}L.encrypt=function(m,R,u){for(var v=R.length,M=p.allocUnsafe(v),A=-1;++A<v;)M[A]=N(m,R[A],u);return M}},9306:(Y,L,E)=>{var p=E(3910),N=E(5859).Buffer,m=E(1643);function R(v){var M=v._cipher.encryptBlockRaw(v._prev);return m(v._prev),M}L.encrypt=function(v,M){var A=Math.ceil(M.length/16),T=v._cache.length;v._cache=N.concat([v._cache,N.allocUnsafe(16*A)]);for(var g=0;g<A;g++){var h=R(v),C=T+16*g;v._cache.writeUInt32BE(h[0],C+0),v._cache.writeUInt32BE(h[1],C+4),v._cache.writeUInt32BE(h[2],C+8),v._cache.writeUInt32BE(h[3],C+12)}var b=v._cache.slice(0,M.length);return v._cache=v._cache.slice(M.length),p(M,b)}},8562:(Y,L)=>{L.encrypt=function(E,p){return E._cipher.encryptBlock(p)},L.decrypt=function(E,p){return E._cipher.decryptBlock(p)}},9396:(Y,L,E)=>{var p={ECB:E(8562),CBC:E(4552),CFB:E(7606),CFB8:E(6377),CFB1:E(7850),OFB:E(7461),CTR:E(9306),GCM:E(9306)},N=E(4946);for(var m in N)N[m].module=p[N[m].mode];Y.exports=N},7461:(Y,L,E)=>{var p=E(3910);function N(m){return m._prev=m._cipher.encryptBlock(m._prev),m._prev}L.encrypt=function(m,R){for(;m._cache.length<R.length;)m._cache=Buffer.concat([m._cache,N(m)]);var u=m._cache.slice(0,R.length);return m._cache=m._cache.slice(R.length),p(R,u)}},9223:(Y,L,E)=>{var p=E(875),N=E(5859).Buffer,m=E(5834);function u(v,M,A,T){m.call(this),this._cipher=new p.AES(M),this._prev=N.from(A),this._cache=N.allocUnsafe(0),this._secCache=N.allocUnsafe(0),this._decrypt=T,this._mode=v}E(9879)(u,m),u.prototype._update=function(v){return this._mode.encrypt(this,v,this._decrypt)},u.prototype._final=function(){this._cipher.scrub()},Y.exports=u},7991:(Y,L,E)=>{var p=E(3796),N=E(9586),m=E(9396),R=E(3908),u=E(2367);function A(h,C,b){if(h=h.toLowerCase(),m[h])return N.createCipheriv(h,C,b);if(R[h])return new p({key:C,iv:b,mode:h});throw new TypeError("invalid suite type")}function T(h,C,b){if(h=h.toLowerCase(),m[h])return N.createDecipheriv(h,C,b);if(R[h])return new p({key:C,iv:b,mode:h,decrypt:!0});throw new TypeError("invalid suite type")}L.createCipher=L.Cipher=function(h,C){var b,w;if(h=h.toLowerCase(),m[h])b=m[h].key,w=m[h].iv;else{if(!R[h])throw new TypeError("invalid suite type");b=8*R[h].key,w=R[h].iv}var I=u(C,!1,b,w);return A(h,I.key,I.iv)},L.createCipheriv=L.Cipheriv=A,L.createDecipher=L.Decipher=function(h,C){var b,w;if(h=h.toLowerCase(),m[h])b=m[h].key,w=m[h].iv;else{if(!R[h])throw new TypeError("invalid suite type");b=8*R[h].key,w=R[h].iv}var I=u(C,!1,b,w);return T(h,I.key,I.iv)},L.createDecipheriv=L.Decipheriv=T,L.listCiphers=L.getCiphers=function(){return Object.keys(R).concat(N.getCiphers())}},3796:(Y,L,E)=>{var p=E(5834),N=E(8534),m=E(9879),R=E(5859).Buffer,u={"des-ede3-cbc":N.CBC.instantiate(N.EDE),"des-ede3":N.EDE,"des-ede-cbc":N.CBC.instantiate(N.EDE),"des-ede":N.EDE,"des-cbc":N.CBC.instantiate(N.DES),"des-ecb":N.DES};function v(M){p.call(this);var g,A=M.mode.toLowerCase(),T=u[A];g=M.decrypt?"decrypt":"encrypt";var h=M.key;R.isBuffer(h)||(h=R.from(h)),("des-ede"===A||"des-ede-cbc"===A)&&(h=R.concat([h,h.slice(0,8)]));var C=M.iv;R.isBuffer(C)||(C=R.from(C)),this._des=T.create({key:h,iv:C,type:g})}u.des=u["des-cbc"],u.des3=u["des-ede3-cbc"],Y.exports=v,m(v,p),v.prototype._update=function(M){return R.from(this._des.update(M))},v.prototype._final=function(){return R.from(this._des.final())}},3908:(Y,L)=>{L["des-ecb"]={key:8,iv:0},L["des-cbc"]=L.des={key:8,iv:8},L["des-ede3-cbc"]=L.des3={key:24,iv:8},L["des-ede3"]={key:24,iv:0},L["des-ede-cbc"]={key:16,iv:8},L["des-ede"]={key:16,iv:0}},5842:(Y,L,E)=>{var p=E(2630),N=E(6589);function R(v){var A,M=v.modulus.byteLength();do{A=new p(N(M))}while(A.cmp(v.modulus)>=0||!A.umod(v.prime1)||!A.umod(v.prime2));return A}function u(v,M){var A=function(v){var M=R(v);return{blinder:M.toRed(p.mont(v.modulus)).redPow(new p(v.publicExponent)).fromRed(),unblinder:M.invm(v.modulus)}}(M),T=M.modulus.byteLength(),g=new p(v).mul(A.blinder).umod(M.modulus),h=g.toRed(p.mont(M.prime1)),C=g.toRed(p.mont(M.prime2)),b=M.coefficient,w=M.prime1,I=M.prime2,P=h.redPow(M.exponent1).fromRed(),k=C.redPow(M.exponent2).fromRed(),O=P.isub(k).imul(b).umod(w).imul(I);return k.iadd(O).imul(A.unblinder).umod(M.modulus).toArrayLike(Buffer,"be",T)}u.getr=R,Y.exports=u},6380:(Y,L,E)=>{Y.exports=E(8770)},3566:(Y,L,E)=>{var p=E(6329).Buffer,N=E(2506),m=E(8300),R=E(9879),u=E(7052),v=E(8022),M=E(8770);function A(C){m.Writable.call(this);var b=M[C];if(!b)throw new Error("Unknown message digest");this._hashType=b.hash,this._hash=N(b.hash),this._tag=b.id,this._signType=b.sign}function T(C){m.Writable.call(this);var b=M[C];if(!b)throw new Error("Unknown message digest");this._hash=N(b.hash),this._tag=b.id,this._signType=b.sign}function g(C){return new A(C)}function h(C){return new T(C)}Object.keys(M).forEach(function(C){M[C].id=p.from(M[C].id,"hex"),M[C.toLowerCase()]=M[C]}),R(A,m.Writable),A.prototype._write=function(b,w,I){this._hash.update(b),I()},A.prototype.update=function(b,w){return"string"==typeof b&&(b=p.from(b,w)),this._hash.update(b),this},A.prototype.sign=function(b,w){this.end();var I=this._hash.digest(),P=u(I,b,this._hashType,this._signType,this._tag);return w?P.toString(w):P},R(T,m.Writable),T.prototype._write=function(b,w,I){this._hash.update(b),I()},T.prototype.update=function(b,w){return"string"==typeof b&&(b=p.from(b,w)),this._hash.update(b),this},T.prototype.verify=function(b,w,I){"string"==typeof w&&(w=p.from(w,I)),this.end();var P=this._hash.digest();return v(w,P,b,this._signType,this._tag)},Y.exports={Sign:g,Verify:h,createSign:g,createVerify:h}},7052:(Y,L,E)=>{var p=E(6329).Buffer,N=E(5903),m=E(5842),R=E(5247).ec,u=E(2630),v=E(1997),M=E(1308);function C(k,O,V,U){if((k=p.from(k.toArray())).length<O.byteLength()){var B=p.alloc(O.byteLength()-k.length);k=p.concat([B,k])}var H=V.length,W=function(k,O){k=(k=b(k,O)).mod(O);var V=p.from(k.toArray());if(V.length<O.byteLength()){var U=p.alloc(O.byteLength()-V.length);V=p.concat([U,V])}return V}(V,O),te=p.alloc(H);te.fill(1);var $=p.alloc(H);return $=N(U,$).update(te).update(p.from([0])).update(k).update(W).digest(),te=N(U,$).update(te).digest(),{k:$=N(U,$).update(te).update(p.from([1])).update(k).update(W).digest(),v:te=N(U,$).update(te).digest()}}function b(k,O){var V=new u(k),U=(k.length<<3)-O.bitLength();return U>0&&V.ishrn(U),V}function I(k,O,V){var U,B;do{for(U=p.alloc(0);8*U.length<k.bitLength();)O.v=N(V,O.k).update(O.v).digest(),U=p.concat([U,O.v]);B=b(U,k),O.k=N(V,O.k).update(O.v).update(p.from([0])).digest(),O.v=N(V,O.k).update(O.v).digest()}while(-1!==B.cmp(k));return B}function P(k,O,V,U){return k.toRed(u.mont(V)).redPow(O).fromRed().mod(U)}Y.exports=function(k,O,V,U,B){var H=v(O);if(H.curve){if("ecdsa"!==U&&"ecdsa/rsa"!==U)throw new Error("wrong private key type");return function(k,O){var V=M[O.curve.join(".")];if(!V)throw new Error("unknown curve "+O.curve.join("."));var H=new R(V).keyFromPrivate(O.privateKey).sign(k);return p.from(H.toDER())}(k,H)}if("dsa"===H.type){if("dsa"!==U)throw new Error("wrong private key type");return function(k,O,V){for(var $,U=O.params.priv_key,B=O.params.p,H=O.params.q,W=O.params.g,te=new u(0),pe=b(k,H).mod(H),x=!1,r=C(U,H,k,V);!1===x;)te=P(W,$=I(H,r,V),B,H),0===(x=$.invm(H).imul(pe.add(U.mul(te))).mod(H)).cmpn(0)&&(x=!1,te=new u(0));return function(k,O){k=k.toArray(),O=O.toArray(),128&k[0]&&(k=[0].concat(k)),128&O[0]&&(O=[0].concat(O));var U=[48,k.length+O.length+4,2,k.length];return U=U.concat(k,[2,O.length],O),p.from(U)}(te,x)}(k,H,V)}if("rsa"!==U&&"ecdsa/rsa"!==U)throw new Error("wrong private key type");k=p.concat([B,k]);for(var W=H.modulus.byteLength(),te=[0,1];k.length+te.length+1<W;)te.push(255);te.push(0);for(var $=-1;++$<k.length;)te.push(k[$]);return m(te,H)},Y.exports.getKey=C,Y.exports.makeKey=I},8022:(Y,L,E)=>{var p=E(6329).Buffer,N=E(2630),m=E(5247).ec,R=E(1997),u=E(1308);function T(g,h){if(g.cmpn(0)<=0)throw new Error("invalid sig");if(g.cmp(h)>=h)throw new Error("invalid sig")}Y.exports=function(g,h,C,b,w){var I=R(C);if("ec"===I.type){if("ecdsa"!==b&&"ecdsa/rsa"!==b)throw new Error("wrong public key type");return function(g,h,C){var b=u[C.data.algorithm.curve.join(".")];if(!b)throw new Error("unknown curve "+C.data.algorithm.curve.join("."));return new m(b).verify(h,g,C.data.subjectPrivateKey.data)}(g,h,I)}if("dsa"===I.type){if("dsa"!==b)throw new Error("wrong public key type");return function(g,h,C){var b=C.data.p,w=C.data.q,I=C.data.g,P=C.data.pub_key,k=R.signature.decode(g,"der"),O=k.s,V=k.r;T(O,w),T(V,w);var U=N.mont(b),B=O.invm(w);return 0===I.toRed(U).redPow(new N(h).mul(B).mod(w)).fromRed().mul(P.toRed(U).redPow(V.mul(B).mod(w)).fromRed()).mod(b).mod(w).cmp(V)}(g,h,I)}if("rsa"!==b&&"ecdsa/rsa"!==b)throw new Error("wrong public key type");h=p.concat([w,h]);for(var P=I.modulus.byteLength(),k=[1],O=0;h.length+k.length+2<P;)k.push(255),O++;k.push(0);for(var V=-1;++V<h.length;)k.push(h[V]);k=p.from(k);var U=N.mont(I.modulus);g=(g=new N(g).toRed(U)).redPow(new N(I.publicExponent)),g=p.from(g.fromRed().toArray());var B=O<8?1:0;for(P=Math.min(g.length,k.length),g.length!==k.length&&(B=1),V=-1;++V<P;)B|=g[V]^k[V];return 0===B}},6329:(Y,L,E)=>{var p=E(3875),N=p.Buffer;function m(u,v){for(var M in u)v[M]=u[M]}function R(u,v,M){return N(u,v,M)}N.from&&N.alloc&&N.allocUnsafe&&N.allocUnsafeSlow?Y.exports=p:(m(p,L),L.Buffer=R),R.prototype=Object.create(N.prototype),m(N,R),R.from=function(u,v,M){if("number"==typeof u)throw new TypeError("Argument must not be a number");return N(u,v,M)},R.alloc=function(u,v,M){if("number"!=typeof u)throw new TypeError("Argument must be a number");var A=N(u);return void 0!==v?"string"==typeof M?A.fill(v,M):A.fill(v):A.fill(0),A},R.allocUnsafe=function(u){if("number"!=typeof u)throw new TypeError("Argument must be a number");return N(u)},R.allocUnsafeSlow=function(u){if("number"!=typeof u)throw new TypeError("Argument must be a number");return p.SlowBuffer(u)}},3910:Y=>{Y.exports=function(E,p){for(var N=Math.min(E.length,p.length),m=new Buffer(N),R=0;R<N;++R)m[R]=E[R]^p[R];return m}},3875:(Y,L,E)=>{"use strict";var p=E(6434),N=E(2658),m="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;L.Buffer=M,L.SlowBuffer=function(re){return+re!=re&&(re=0),M.alloc(+re)},L.INSPECT_MAX_BYTES=50;var R=2147483647;function v(re){if(re>R)throw new RangeError('The value "'+re+'" is invalid for option "size"');var ee=new Uint8Array(re);return Object.setPrototypeOf(ee,M.prototype),ee}function M(re,ee,J){if("number"==typeof re){if("string"==typeof ee)throw new TypeError('The "string" argument must be of type string. Received type number');return h(re)}return A(re,ee,J)}function A(re,ee,J){if("string"==typeof re)return function(re,ee){if(("string"!=typeof ee||""===ee)&&(ee="utf8"),!M.isEncoding(ee))throw new TypeError("Unknown encoding: "+ee);var J=0|V(re,ee),ue=v(J),Ae=ue.write(re,ee);return Ae!==J&&(ue=ue.slice(0,Ae)),ue}(re,ee);if(ArrayBuffer.isView(re))return function(re){if(oe(re,Uint8Array)){var ee=new Uint8Array(re);return I(ee.buffer,ee.byteOffset,ee.byteLength)}return b(re)}(re);if(null==re)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof re);if(oe(re,ArrayBuffer)||re&&oe(re.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(oe(re,SharedArrayBuffer)||re&&oe(re.buffer,SharedArrayBuffer)))return I(re,ee,J);if("number"==typeof re)throw new TypeError('The "value" argument must not be of type number. Received type number');var ue=re.valueOf&&re.valueOf();if(null!=ue&&ue!==re)return M.from(ue,ee,J);var Ae=function(re){if(M.isBuffer(re)){var ee=0|k(re.length),J=v(ee);return 0===J.length||re.copy(J,0,0,ee),J}return void 0!==re.length?"number"!=typeof re.length||we(re.length)?v(0):b(re):"Buffer"===re.type&&Array.isArray(re.data)?b(re.data):void 0}(re);if(Ae)return Ae;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof re[Symbol.toPrimitive])return M.from(re[Symbol.toPrimitive]("string"),ee,J);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof re)}function T(re){if("number"!=typeof re)throw new TypeError('"size" argument must be of type number');if(re<0)throw new RangeError('The value "'+re+'" is invalid for option "size"')}function h(re){return T(re),v(re<0?0:0|k(re))}function b(re){for(var ee=re.length<0?0:0|k(re.length),J=v(ee),ue=0;ue<ee;ue+=1)J[ue]=255&re[ue];return J}function I(re,ee,J){if(ee<0||re.byteLength<ee)throw new RangeError('"offset" is outside of buffer bounds');if(re.byteLength<ee+(J||0))throw new RangeError('"length" is outside of buffer bounds');var ue;return ue=void 0===ee&&void 0===J?new Uint8Array(re):void 0===J?new Uint8Array(re,ee):new Uint8Array(re,ee,J),Object.setPrototypeOf(ue,M.prototype),ue}function k(re){if(re>=R)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+R.toString(16)+" bytes");return 0|re}function V(re,ee){if(M.isBuffer(re))return re.length;if(ArrayBuffer.isView(re)||oe(re,ArrayBuffer))return re.byteLength;if("string"!=typeof re)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof re);var J=re.length,ue=arguments.length>2&&!0===arguments[2];if(!ue&&0===J)return 0;for(var Ae=!1;;)switch(ee){case"ascii":case"latin1":case"binary":return J;case"utf8":case"utf-8":return fe(re).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*J;case"hex":return J>>>1;case"base64":return xe(re).length;default:if(Ae)return ue?-1:fe(re).length;ee=(""+ee).toLowerCase(),Ae=!0}}function U(re,ee,J){var ue=!1;if((void 0===ee||ee<0)&&(ee=0),ee>this.length||((void 0===J||J>this.length)&&(J=this.length),J<=0)||(J>>>=0)<=(ee>>>=0))return"";for(re||(re="utf8");;)switch(re){case"hex":return d(this,ee,J);case"utf8":case"utf-8":return l(this,ee,J);case"ascii":return _(this,ee,J);case"latin1":case"binary":return D(this,ee,J);case"base64":return s(this,ee,J);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i(this,ee,J);default:if(ue)throw new TypeError("Unknown encoding: "+re);re=(re+"").toLowerCase(),ue=!0}}function B(re,ee,J){var ue=re[ee];re[ee]=re[J],re[J]=ue}function H(re,ee,J,ue,Ae){if(0===re.length)return-1;if("string"==typeof J?(ue=J,J=0):J>2147483647?J=2147483647:J<-2147483648&&(J=-2147483648),we(J=+J)&&(J=Ae?0:re.length-1),J<0&&(J=re.length+J),J>=re.length){if(Ae)return-1;J=re.length-1}else if(J<0){if(!Ae)return-1;J=0}if("string"==typeof ee&&(ee=M.from(ee,ue)),M.isBuffer(ee))return 0===ee.length?-1:W(re,ee,J,ue,Ae);if("number"==typeof ee)return ee&=255,"function"==typeof Uint8Array.prototype.indexOf?Ae?Uint8Array.prototype.indexOf.call(re,ee,J):Uint8Array.prototype.lastIndexOf.call(re,ee,J):W(re,[ee],J,ue,Ae);throw new TypeError("val must be string, number or Buffer")}function W(re,ee,J,ue,Ae){var _e,Te=1,Ee=re.length,We=ee.length;if(void 0!==ue&&("ucs2"===(ue=String(ue).toLowerCase())||"ucs-2"===ue||"utf16le"===ue||"utf-16le"===ue)){if(re.length<2||ee.length<2)return-1;Te=2,Ee/=2,We/=2,J/=2}function Ne(Mt,He){return 1===Te?Mt[He]:Mt.readUInt16BE(He*Te)}if(Ae){var Be=-1;for(_e=J;_e<Ee;_e++)if(Ne(re,_e)===Ne(ee,-1===Be?0:_e-Be)){if(-1===Be&&(Be=_e),_e-Be+1===We)return Be*Te}else-1!==Be&&(_e-=_e-Be),Be=-1}else for(J+We>Ee&&(J=Ee-We),_e=J;_e>=0;_e--){for(var De=!0,Le=0;Le<We;Le++)if(Ne(re,_e+Le)!==Ne(ee,Le)){De=!1;break}if(De)return _e}return-1}function te(re,ee,J,ue){J=Number(J)||0;var Ae=re.length-J;ue?(ue=Number(ue))>Ae&&(ue=Ae):ue=Ae;var Te=ee.length;ue>Te/2&&(ue=Te/2);for(var Ee=0;Ee<ue;++Ee){var We=parseInt(ee.substr(2*Ee,2),16);if(we(We))return Ee;re[J+Ee]=We}return Ee}function $(re,ee,J,ue){return Ce(fe(ee,re.length-J),re,J,ue)}function pe(re,ee,J,ue){return Ce(function(re){for(var ee=[],J=0;J<re.length;++J)ee.push(255&re.charCodeAt(J));return ee}(ee),re,J,ue)}function x(re,ee,J,ue){return Ce(xe(ee),re,J,ue)}function r(re,ee,J,ue){return Ce(function(re,ee){for(var J,ue,Te=[],Ee=0;Ee<re.length&&!((ee-=2)<0);++Ee)ue=(J=re.charCodeAt(Ee))>>8,Te.push(J%256),Te.push(ue);return Te}(ee,re.length-J),re,J,ue)}function s(re,ee,J){return p.fromByteArray(0===ee&&J===re.length?re:re.slice(ee,J))}function l(re,ee,J){J=Math.min(re.length,J);for(var ue=[],Ae=ee;Ae<J;){var Ne,_e,Be,De,Te=re[Ae],Ee=null,We=Te>239?4:Te>223?3:Te>191?2:1;if(Ae+We<=J)switch(We){case 1:Te<128&&(Ee=Te);break;case 2:128==(192&(Ne=re[Ae+1]))&&(De=(31&Te)<<6|63&Ne)>127&&(Ee=De);break;case 3:_e=re[Ae+2],128==(192&(Ne=re[Ae+1]))&&128==(192&_e)&&(De=(15&Te)<<12|(63&Ne)<<6|63&_e)>2047&&(De<55296||De>57343)&&(Ee=De);break;case 4:_e=re[Ae+2],Be=re[Ae+3],128==(192&(Ne=re[Ae+1]))&&128==(192&_e)&&128==(192&Be)&&(De=(15&Te)<<18|(63&Ne)<<12|(63&_e)<<6|63&Be)>65535&&De<1114112&&(Ee=De)}null===Ee?(Ee=65533,We=1):Ee>65535&&(ue.push((Ee-=65536)>>>10&1023|55296),Ee=56320|1023&Ee),ue.push(Ee),Ae+=We}return function(re){var ee=re.length;if(ee<=a)return String.fromCharCode.apply(String,re);for(var J="",ue=0;ue<ee;)J+=String.fromCharCode.apply(String,re.slice(ue,ue+=a));return J}(ue)}L.kMaxLength=R,!(M.TYPED_ARRAY_SUPPORT=function(){try{var re=new Uint8Array(1),ee={foo:function(){return 42}};return Object.setPrototypeOf(ee,Uint8Array.prototype),Object.setPrototypeOf(re,ee),42===re.foo()}catch(J){return!1}}())&&"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(M.prototype,"parent",{enumerable:!0,get:function(){if(M.isBuffer(this))return this.buffer}}),Object.defineProperty(M.prototype,"offset",{enumerable:!0,get:function(){if(M.isBuffer(this))return this.byteOffset}}),M.poolSize=8192,M.from=function(re,ee,J){return A(re,ee,J)},Object.setPrototypeOf(M.prototype,Uint8Array.prototype),Object.setPrototypeOf(M,Uint8Array),M.alloc=function(re,ee,J){return function(re,ee,J){return T(re),re<=0?v(re):void 0!==ee?"string"==typeof J?v(re).fill(ee,J):v(re).fill(ee):v(re)}(re,ee,J)},M.allocUnsafe=function(re){return h(re)},M.allocUnsafeSlow=function(re){return h(re)},M.isBuffer=function(ee){return null!=ee&&!0===ee._isBuffer&&ee!==M.prototype},M.compare=function(ee,J){if(oe(ee,Uint8Array)&&(ee=M.from(ee,ee.offset,ee.byteLength)),oe(J,Uint8Array)&&(J=M.from(J,J.offset,J.byteLength)),!M.isBuffer(ee)||!M.isBuffer(J))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ee===J)return 0;for(var ue=ee.length,Ae=J.length,Te=0,Ee=Math.min(ue,Ae);Te<Ee;++Te)if(ee[Te]!==J[Te]){ue=ee[Te],Ae=J[Te];break}return ue<Ae?-1:Ae<ue?1:0},M.isEncoding=function(ee){switch(String(ee).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},M.concat=function(ee,J){if(!Array.isArray(ee))throw new TypeError('"list" argument must be an Array of Buffers');if(0===ee.length)return M.alloc(0);var ue;if(void 0===J)for(J=0,ue=0;ue<ee.length;++ue)J+=ee[ue].length;var Ae=M.allocUnsafe(J),Te=0;for(ue=0;ue<ee.length;++ue){var Ee=ee[ue];if(oe(Ee,Uint8Array))Te+Ee.length>Ae.length?M.from(Ee).copy(Ae,Te):Uint8Array.prototype.set.call(Ae,Ee,Te);else{if(!M.isBuffer(Ee))throw new TypeError('"list" argument must be an Array of Buffers');Ee.copy(Ae,Te)}Te+=Ee.length}return Ae},M.byteLength=V,M.prototype._isBuffer=!0,M.prototype.swap16=function(){var ee=this.length;if(ee%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var J=0;J<ee;J+=2)B(this,J,J+1);return this},M.prototype.swap32=function(){var ee=this.length;if(ee%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var J=0;J<ee;J+=4)B(this,J,J+3),B(this,J+1,J+2);return this},M.prototype.swap64=function(){var ee=this.length;if(ee%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var J=0;J<ee;J+=8)B(this,J,J+7),B(this,J+1,J+6),B(this,J+2,J+5),B(this,J+3,J+4);return this},M.prototype.toLocaleString=M.prototype.toString=function(){var ee=this.length;return 0===ee?"":0===arguments.length?l(this,0,ee):U.apply(this,arguments)},M.prototype.equals=function(ee){if(!M.isBuffer(ee))throw new TypeError("Argument must be a Buffer");return this===ee||0===M.compare(this,ee)},M.prototype.inspect=function(){var ee="",J=L.INSPECT_MAX_BYTES;return ee=this.toString("hex",0,J).replace(/(.{2})/g,"$1 ").trim(),this.length>J&&(ee+=" ... "),"<Buffer "+ee+">"},m&&(M.prototype[m]=M.prototype.inspect),M.prototype.compare=function(ee,J,ue,Ae,Te){if(oe(ee,Uint8Array)&&(ee=M.from(ee,ee.offset,ee.byteLength)),!M.isBuffer(ee))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ee);if(void 0===J&&(J=0),void 0===ue&&(ue=ee?ee.length:0),void 0===Ae&&(Ae=0),void 0===Te&&(Te=this.length),J<0||ue>ee.length||Ae<0||Te>this.length)throw new RangeError("out of range index");if(Ae>=Te&&J>=ue)return 0;if(Ae>=Te)return-1;if(J>=ue)return 1;if(this===ee)return 0;for(var Ee=(Te>>>=0)-(Ae>>>=0),We=(ue>>>=0)-(J>>>=0),Ne=Math.min(Ee,We),_e=this.slice(Ae,Te),Be=ee.slice(J,ue),De=0;De<Ne;++De)if(_e[De]!==Be[De]){Ee=_e[De],We=Be[De];break}return Ee<We?-1:We<Ee?1:0},M.prototype.includes=function(ee,J,ue){return-1!==this.indexOf(ee,J,ue)},M.prototype.indexOf=function(ee,J,ue){return H(this,ee,J,ue,!0)},M.prototype.lastIndexOf=function(ee,J,ue){return H(this,ee,J,ue,!1)},M.prototype.write=function(ee,J,ue,Ae){if(void 0===J)Ae="utf8",ue=this.length,J=0;else if(void 0===ue&&"string"==typeof J)Ae=J,ue=this.length,J=0;else{if(!isFinite(J))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");J>>>=0,isFinite(ue)?(ue>>>=0,void 0===Ae&&(Ae="utf8")):(Ae=ue,ue=void 0)}var Te=this.length-J;if((void 0===ue||ue>Te)&&(ue=Te),ee.length>0&&(ue<0||J<0)||J>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ae||(Ae="utf8");for(var Ee=!1;;)switch(Ae){case"hex":return te(this,ee,J,ue);case"utf8":case"utf-8":return $(this,ee,J,ue);case"ascii":case"latin1":case"binary":return pe(this,ee,J,ue);case"base64":return x(this,ee,J,ue);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r(this,ee,J,ue);default:if(Ee)throw new TypeError("Unknown encoding: "+Ae);Ae=(""+Ae).toLowerCase(),Ee=!0}},M.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var a=4096;function _(re,ee,J){var ue="";J=Math.min(re.length,J);for(var Ae=ee;Ae<J;++Ae)ue+=String.fromCharCode(127&re[Ae]);return ue}function D(re,ee,J){var ue="";J=Math.min(re.length,J);for(var Ae=ee;Ae<J;++Ae)ue+=String.fromCharCode(re[Ae]);return ue}function d(re,ee,J){var ue=re.length;(!ee||ee<0)&&(ee=0),(!J||J<0||J>ue)&&(J=ue);for(var Ae="",Te=ee;Te<J;++Te)Ae+=ye[re[Te]];return Ae}function i(re,ee,J){for(var ue=re.slice(ee,J),Ae="",Te=0;Te<ue.length-1;Te+=2)Ae+=String.fromCharCode(ue[Te]+256*ue[Te+1]);return Ae}function y(re,ee,J){if(re%1!=0||re<0)throw new RangeError("offset is not uint");if(re+ee>J)throw new RangeError("Trying to access beyond buffer length")}function z(re,ee,J,ue,Ae,Te){if(!M.isBuffer(re))throw new TypeError('"buffer" argument must be a Buffer instance');if(ee>Ae||ee<Te)throw new RangeError('"value" argument is out of bounds');if(J+ue>re.length)throw new RangeError("Index out of range")}function q(re,ee,J,ue,Ae,Te){if(J+ue>re.length)throw new RangeError("Index out of range");if(J<0)throw new RangeError("Index out of range")}function Z(re,ee,J,ue,Ae){return ee=+ee,J>>>=0,Ae||q(re,0,J,4),N.write(re,ee,J,ue,23,4),J+4}function ge(re,ee,J,ue,Ae){return ee=+ee,J>>>=0,Ae||q(re,0,J,8),N.write(re,ee,J,ue,52,8),J+8}M.prototype.slice=function(ee,J){var ue=this.length;(ee=~~ee)<0?(ee+=ue)<0&&(ee=0):ee>ue&&(ee=ue),(J=void 0===J?ue:~~J)<0?(J+=ue)<0&&(J=0):J>ue&&(J=ue),J<ee&&(J=ee);var Ae=this.subarray(ee,J);return Object.setPrototypeOf(Ae,M.prototype),Ae},M.prototype.readUintLE=M.prototype.readUIntLE=function(ee,J,ue){ee>>>=0,J>>>=0,ue||y(ee,J,this.length);for(var Ae=this[ee],Te=1,Ee=0;++Ee<J&&(Te*=256);)Ae+=this[ee+Ee]*Te;return Ae},M.prototype.readUintBE=M.prototype.readUIntBE=function(ee,J,ue){ee>>>=0,J>>>=0,ue||y(ee,J,this.length);for(var Ae=this[ee+--J],Te=1;J>0&&(Te*=256);)Ae+=this[ee+--J]*Te;return Ae},M.prototype.readUint8=M.prototype.readUInt8=function(ee,J){return ee>>>=0,J||y(ee,1,this.length),this[ee]},M.prototype.readUint16LE=M.prototype.readUInt16LE=function(ee,J){return ee>>>=0,J||y(ee,2,this.length),this[ee]|this[ee+1]<<8},M.prototype.readUint16BE=M.prototype.readUInt16BE=function(ee,J){return ee>>>=0,J||y(ee,2,this.length),this[ee]<<8|this[ee+1]},M.prototype.readUint32LE=M.prototype.readUInt32LE=function(ee,J){return ee>>>=0,J||y(ee,4,this.length),(this[ee]|this[ee+1]<<8|this[ee+2]<<16)+16777216*this[ee+3]},M.prototype.readUint32BE=M.prototype.readUInt32BE=function(ee,J){return ee>>>=0,J||y(ee,4,this.length),16777216*this[ee]+(this[ee+1]<<16|this[ee+2]<<8|this[ee+3])},M.prototype.readIntLE=function(ee,J,ue){ee>>>=0,J>>>=0,ue||y(ee,J,this.length);for(var Ae=this[ee],Te=1,Ee=0;++Ee<J&&(Te*=256);)Ae+=this[ee+Ee]*Te;return Ae>=(Te*=128)&&(Ae-=Math.pow(2,8*J)),Ae},M.prototype.readIntBE=function(ee,J,ue){ee>>>=0,J>>>=0,ue||y(ee,J,this.length);for(var Ae=J,Te=1,Ee=this[ee+--Ae];Ae>0&&(Te*=256);)Ee+=this[ee+--Ae]*Te;return Ee>=(Te*=128)&&(Ee-=Math.pow(2,8*J)),Ee},M.prototype.readInt8=function(ee,J){return ee>>>=0,J||y(ee,1,this.length),128&this[ee]?-1*(255-this[ee]+1):this[ee]},M.prototype.readInt16LE=function(ee,J){ee>>>=0,J||y(ee,2,this.length);var ue=this[ee]|this[ee+1]<<8;return 32768&ue?4294901760|ue:ue},M.prototype.readInt16BE=function(ee,J){ee>>>=0,J||y(ee,2,this.length);var ue=this[ee+1]|this[ee]<<8;return 32768&ue?4294901760|ue:ue},M.prototype.readInt32LE=function(ee,J){return ee>>>=0,J||y(ee,4,this.length),this[ee]|this[ee+1]<<8|this[ee+2]<<16|this[ee+3]<<24},M.prototype.readInt32BE=function(ee,J){return ee>>>=0,J||y(ee,4,this.length),this[ee]<<24|this[ee+1]<<16|this[ee+2]<<8|this[ee+3]},M.prototype.readFloatLE=function(ee,J){return ee>>>=0,J||y(ee,4,this.length),N.read(this,ee,!0,23,4)},M.prototype.readFloatBE=function(ee,J){return ee>>>=0,J||y(ee,4,this.length),N.read(this,ee,!1,23,4)},M.prototype.readDoubleLE=function(ee,J){return ee>>>=0,J||y(ee,8,this.length),N.read(this,ee,!0,52,8)},M.prototype.readDoubleBE=function(ee,J){return ee>>>=0,J||y(ee,8,this.length),N.read(this,ee,!1,52,8)},M.prototype.writeUintLE=M.prototype.writeUIntLE=function(ee,J,ue,Ae){ee=+ee,J>>>=0,ue>>>=0,Ae||z(this,ee,J,ue,Math.pow(2,8*ue)-1,0);var Ee=1,We=0;for(this[J]=255&ee;++We<ue&&(Ee*=256);)this[J+We]=ee/Ee&255;return J+ue},M.prototype.writeUintBE=M.prototype.writeUIntBE=function(ee,J,ue,Ae){ee=+ee,J>>>=0,ue>>>=0,Ae||z(this,ee,J,ue,Math.pow(2,8*ue)-1,0);var Ee=ue-1,We=1;for(this[J+Ee]=255&ee;--Ee>=0&&(We*=256);)this[J+Ee]=ee/We&255;return J+ue},M.prototype.writeUint8=M.prototype.writeUInt8=function(ee,J,ue){return ee=+ee,J>>>=0,ue||z(this,ee,J,1,255,0),this[J]=255&ee,J+1},M.prototype.writeUint16LE=M.prototype.writeUInt16LE=function(ee,J,ue){return ee=+ee,J>>>=0,ue||z(this,ee,J,2,65535,0),this[J]=255&ee,this[J+1]=ee>>>8,J+2},M.prototype.writeUint16BE=M.prototype.writeUInt16BE=function(ee,J,ue){return ee=+ee,J>>>=0,ue||z(this,ee,J,2,65535,0),this[J]=ee>>>8,this[J+1]=255&ee,J+2},M.prototype.writeUint32LE=M.prototype.writeUInt32LE=function(ee,J,ue){return ee=+ee,J>>>=0,ue||z(this,ee,J,4,4294967295,0),this[J+3]=ee>>>24,this[J+2]=ee>>>16,this[J+1]=ee>>>8,this[J]=255&ee,J+4},M.prototype.writeUint32BE=M.prototype.writeUInt32BE=function(ee,J,ue){return ee=+ee,J>>>=0,ue||z(this,ee,J,4,4294967295,0),this[J]=ee>>>24,this[J+1]=ee>>>16,this[J+2]=ee>>>8,this[J+3]=255&ee,J+4},M.prototype.writeIntLE=function(ee,J,ue,Ae){if(ee=+ee,J>>>=0,!Ae){var Te=Math.pow(2,8*ue-1);z(this,ee,J,ue,Te-1,-Te)}var Ee=0,We=1,Ne=0;for(this[J]=255&ee;++Ee<ue&&(We*=256);)ee<0&&0===Ne&&0!==this[J+Ee-1]&&(Ne=1),this[J+Ee]=(ee/We>>0)-Ne&255;return J+ue},M.prototype.writeIntBE=function(ee,J,ue,Ae){if(ee=+ee,J>>>=0,!Ae){var Te=Math.pow(2,8*ue-1);z(this,ee,J,ue,Te-1,-Te)}var Ee=ue-1,We=1,Ne=0;for(this[J+Ee]=255&ee;--Ee>=0&&(We*=256);)ee<0&&0===Ne&&0!==this[J+Ee+1]&&(Ne=1),this[J+Ee]=(ee/We>>0)-Ne&255;return J+ue},M.prototype.writeInt8=function(ee,J,ue){return ee=+ee,J>>>=0,ue||z(this,ee,J,1,127,-128),ee<0&&(ee=255+ee+1),this[J]=255&ee,J+1},M.prototype.writeInt16LE=function(ee,J,ue){return ee=+ee,J>>>=0,ue||z(this,ee,J,2,32767,-32768),this[J]=255&ee,this[J+1]=ee>>>8,J+2},M.prototype.writeInt16BE=function(ee,J,ue){return ee=+ee,J>>>=0,ue||z(this,ee,J,2,32767,-32768),this[J]=ee>>>8,this[J+1]=255&ee,J+2},M.prototype.writeInt32LE=function(ee,J,ue){return ee=+ee,J>>>=0,ue||z(this,ee,J,4,2147483647,-2147483648),this[J]=255&ee,this[J+1]=ee>>>8,this[J+2]=ee>>>16,this[J+3]=ee>>>24,J+4},M.prototype.writeInt32BE=function(ee,J,ue){return ee=+ee,J>>>=0,ue||z(this,ee,J,4,2147483647,-2147483648),ee<0&&(ee=4294967295+ee+1),this[J]=ee>>>24,this[J+1]=ee>>>16,this[J+2]=ee>>>8,this[J+3]=255&ee,J+4},M.prototype.writeFloatLE=function(ee,J,ue){return Z(this,ee,J,!0,ue)},M.prototype.writeFloatBE=function(ee,J,ue){return Z(this,ee,J,!1,ue)},M.prototype.writeDoubleLE=function(ee,J,ue){return ge(this,ee,J,!0,ue)},M.prototype.writeDoubleBE=function(ee,J,ue){return ge(this,ee,J,!1,ue)},M.prototype.copy=function(ee,J,ue,Ae){if(!M.isBuffer(ee))throw new TypeError("argument should be a Buffer");if(ue||(ue=0),!Ae&&0!==Ae&&(Ae=this.length),J>=ee.length&&(J=ee.length),J||(J=0),Ae>0&&Ae<ue&&(Ae=ue),Ae===ue||0===ee.length||0===this.length)return 0;if(J<0)throw new RangeError("targetStart out of bounds");if(ue<0||ue>=this.length)throw new RangeError("Index out of range");if(Ae<0)throw new RangeError("sourceEnd out of bounds");Ae>this.length&&(Ae=this.length),ee.length-J<Ae-ue&&(Ae=ee.length-J+ue);var Te=Ae-ue;return this===ee&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(J,ue,Ae):Uint8Array.prototype.set.call(ee,this.subarray(ue,Ae),J),Te},M.prototype.fill=function(ee,J,ue,Ae){if("string"==typeof ee){if("string"==typeof J?(Ae=J,J=0,ue=this.length):"string"==typeof ue&&(Ae=ue,ue=this.length),void 0!==Ae&&"string"!=typeof Ae)throw new TypeError("encoding must be a string");if("string"==typeof Ae&&!M.isEncoding(Ae))throw new TypeError("Unknown encoding: "+Ae);if(1===ee.length){var Te=ee.charCodeAt(0);("utf8"===Ae&&Te<128||"latin1"===Ae)&&(ee=Te)}}else"number"==typeof ee?ee&=255:"boolean"==typeof ee&&(ee=Number(ee));if(J<0||this.length<J||this.length<ue)throw new RangeError("Out of range index");if(ue<=J)return this;var Ee;if(J>>>=0,ue=void 0===ue?this.length:ue>>>0,ee||(ee=0),"number"==typeof ee)for(Ee=J;Ee<ue;++Ee)this[Ee]=ee;else{var We=M.isBuffer(ee)?ee:M.from(ee,Ae),Ne=We.length;if(0===Ne)throw new TypeError('The value "'+ee+'" is invalid for argument "value"');for(Ee=0;Ee<ue-J;++Ee)this[Ee+J]=We[Ee%Ne]}return this};var me=/[^+/0-9A-Za-z-_]/g;function fe(re,ee){ee=ee||1/0;for(var J,ue=re.length,Ae=null,Te=[],Ee=0;Ee<ue;++Ee){if((J=re.charCodeAt(Ee))>55295&&J<57344){if(!Ae){if(J>56319){(ee-=3)>-1&&Te.push(239,191,189);continue}if(Ee+1===ue){(ee-=3)>-1&&Te.push(239,191,189);continue}Ae=J;continue}if(J<56320){(ee-=3)>-1&&Te.push(239,191,189),Ae=J;continue}J=65536+(Ae-55296<<10|J-56320)}else Ae&&(ee-=3)>-1&&Te.push(239,191,189);if(Ae=null,J<128){if((ee-=1)<0)break;Te.push(J)}else if(J<2048){if((ee-=2)<0)break;Te.push(J>>6|192,63&J|128)}else if(J<65536){if((ee-=3)<0)break;Te.push(J>>12|224,J>>6&63|128,63&J|128)}else{if(!(J<1114112))throw new Error("Invalid code point");if((ee-=4)<0)break;Te.push(J>>18|240,J>>12&63|128,J>>6&63|128,63&J|128)}}return Te}function xe(re){return p.toByteArray(function(re){if((re=(re=re.split("=")[0]).trim().replace(me,"")).length<2)return"";for(;re.length%4!=0;)re+="=";return re}(re))}function Ce(re,ee,J,ue){for(var Ae=0;Ae<ue&&!(Ae+J>=ee.length||Ae>=re.length);++Ae)ee[Ae+J]=re[Ae];return Ae}function oe(re,ee){return re instanceof ee||null!=re&&null!=re.constructor&&null!=re.constructor.name&&re.constructor.name===ee.name}function we(re){return re!=re}var ye=function(){for(var re="0123456789abcdef",ee=new Array(256),J=0;J<16;++J)for(var ue=16*J,Ae=0;Ae<16;++Ae)ee[ue+Ae]=re[J]+re[Ae];return ee}()},5834:(Y,L,E)=>{var p=E(5859).Buffer,N=E(6917).Transform,m=E(2519).s;function u(v){N.call(this),this.hashMode="string"==typeof v,this.hashMode?this[v]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}E(9879)(u,N),u.prototype.update=function(v,M,A){"string"==typeof v&&(v=p.from(v,M));var T=this._update(v);return this.hashMode?this:(A&&(T=this._toString(T,A)),T)},u.prototype.setAutoPadding=function(){},u.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},u.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},u.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},u.prototype._transform=function(v,M,A){var T;try{this.hashMode?this._update(v):this.push(this._update(v))}catch(g){T=g}finally{A(T)}},u.prototype._flush=function(v){var M;try{this.push(this.__final())}catch(A){M=A}v(M)},u.prototype._finalOrDigest=function(v){var M=this.__final()||p.alloc(0);return v&&(M=this._toString(M,v,!0)),M},u.prototype._toString=function(v,M,A){if(this._decoder||(this._decoder=new m(M),this._encoding=M),this._encoding!==M)throw new Error("can't switch encodings");var T=this._decoder.write(v);return A&&(T+=this._decoder.end()),T},Y.exports=u},4892:(Y,L,E)=>{var p=E(5247),N=E(6479);Y.exports=function(M){return new R(M)};var m={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function R(v){this.curveType=m[v],this.curveType||(this.curveType={name:v}),this.curve=new p.ec(this.curveType.name),this.keys=void 0}function u(v,M,A){Array.isArray(v)||(v=v.toArray());var T=new Buffer(v);if(A&&T.length<A){var g=new Buffer(A-T.length);g.fill(0),T=Buffer.concat([g,T])}return M?T.toString(M):T}m.p224=m.secp224r1,m.p256=m.secp256r1=m.prime256v1,m.p192=m.secp192r1=m.prime192v1,m.p384=m.secp384r1,m.p521=m.secp521r1,R.prototype.generateKeys=function(v,M){return this.keys=this.curve.genKeyPair(),this.getPublicKey(v,M)},R.prototype.computeSecret=function(v,M,A){return M=M||"utf8",Buffer.isBuffer(v)||(v=new Buffer(v,M)),u(this.curve.keyFromPublic(v).getPublic().mul(this.keys.getPrivate()).getX(),A,this.curveType.byteLength)},R.prototype.getPublicKey=function(v,M){var A=this.keys.getPublic("compressed"===M,!0);return"hybrid"===M&&(A[0]=A[A.length-1]%2?7:6),u(A,v)},R.prototype.getPrivateKey=function(v){return u(this.keys.getPrivate(),v)},R.prototype.setPublicKey=function(v,M){return M=M||"utf8",Buffer.isBuffer(v)||(v=new Buffer(v,M)),this.keys._importPublic(v),this},R.prototype.setPrivateKey=function(v,M){M=M||"utf8",Buffer.isBuffer(v)||(v=new Buffer(v,M));var A=new N(v);return A=A.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(A),this}},6479:function(Y,L,E){!function(p,N){"use strict";function m(x,r){if(!x)throw new Error(r||"Assertion failed")}function R(x,r){x.super_=r;var s=function(){};s.prototype=r.prototype,x.prototype=new s,x.prototype.constructor=x}function u(x,r,s){if(u.isBN(x))return x;this.negative=0,this.words=null,this.length=0,this.red=null,null!==x&&(("le"===r||"be"===r)&&(s=r,r=10),this._init(x||0,r||10,s||"be"))}var v;"object"==typeof p?p.exports=u:N.BN=u,u.BN=u,u.wordSize=26;try{v="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:E(8623).Buffer}catch(x){}function M(x,r){var s=x.charCodeAt(r);return s>=65&&s<=70?s-55:s>=97&&s<=102?s-87:s-48&15}function A(x,r,s){var l=M(x,s);return s-1>=r&&(l|=M(x,s-1)<<4),l}function T(x,r,s,l){for(var a=0,f=Math.min(x.length,s),_=r;_<f;_++){var D=x.charCodeAt(_)-48;a*=l,a+=D>=49?D-49+10:D>=17?D-17+10:D}return a}u.isBN=function(r){return r instanceof u||null!==r&&"object"==typeof r&&r.constructor.wordSize===u.wordSize&&Array.isArray(r.words)},u.max=function(r,s){return r.cmp(s)>0?r:s},u.min=function(r,s){return r.cmp(s)<0?r:s},u.prototype._init=function(r,s,l){if("number"==typeof r)return this._initNumber(r,s,l);if("object"==typeof r)return this._initArray(r,s,l);"hex"===s&&(s=16),m(s===(0|s)&&s>=2&&s<=36);var a=0;"-"===(r=r.toString().replace(/\s+/g,""))[0]&&(a++,this.negative=1),a<r.length&&(16===s?this._parseHex(r,a,l):(this._parseBase(r,s,a),"le"===l&&this._initArray(this.toArray(),s,l)))},u.prototype._initNumber=function(r,s,l){r<0&&(this.negative=1,r=-r),r<67108864?(this.words=[67108863&r],this.length=1):r<4503599627370496?(this.words=[67108863&r,r/67108864&67108863],this.length=2):(m(r<9007199254740992),this.words=[67108863&r,r/67108864&67108863,1],this.length=3),"le"===l&&this._initArray(this.toArray(),s,l)},u.prototype._initArray=function(r,s,l){if(m("number"==typeof r.length),r.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(r.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var f,_,D=0;if("be"===l)for(a=r.length-1,f=0;a>=0;a-=3)this.words[f]|=(_=r[a]|r[a-1]<<8|r[a-2]<<16)<<D&67108863,this.words[f+1]=_>>>26-D&67108863,(D+=24)>=26&&(D-=26,f++);else if("le"===l)for(a=0,f=0;a<r.length;a+=3)this.words[f]|=(_=r[a]|r[a+1]<<8|r[a+2]<<16)<<D&67108863,this.words[f+1]=_>>>26-D&67108863,(D+=24)>=26&&(D-=26,f++);return this.strip()},u.prototype._parseHex=function(r,s,l){this.length=Math.ceil((r.length-s)/6),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var D,f=0,_=0;if("be"===l)for(a=r.length-1;a>=s;a-=2)D=A(r,s,a)<<f,this.words[_]|=67108863&D,f>=18?(f-=18,this.words[_+=1]|=D>>>26):f+=8;else for(a=(r.length-s)%2==0?s+1:s;a<r.length;a+=2)D=A(r,s,a)<<f,this.words[_]|=67108863&D,f>=18?(f-=18,this.words[_+=1]|=D>>>26):f+=8;this.strip()},u.prototype._parseBase=function(r,s,l){this.words=[0],this.length=1;for(var a=0,f=1;f<=67108863;f*=s)a++;a--,f=f/s|0;for(var _=r.length-l,D=_%a,d=Math.min(_,_-D)+l,i=0,y=l;y<d;y+=a)i=T(r,y,y+a,s),this.imuln(f),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i);if(0!==D){var z=1;for(i=T(r,y,r.length,s),y=0;y<D;y++)z*=s;this.imuln(z),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i)}this.strip()},u.prototype.copy=function(r){r.words=new Array(this.length);for(var s=0;s<this.length;s++)r.words[s]=this.words[s];r.length=this.length,r.negative=this.negative,r.red=this.red},u.prototype.clone=function(){var r=new u(null);return this.copy(r),r},u.prototype._expand=function(r){for(;this.length<r;)this.words[this.length++]=0;return this},u.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},u.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},u.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],C=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function w(x,r,s){s.negative=r.negative^x.negative;var l=x.length+r.length|0;s.length=l,l=l-1|0;var a=0|x.words[0],f=0|r.words[0],_=a*f,d=_/67108864|0;s.words[0]=67108863&_;for(var i=1;i<l;i++){for(var y=d>>>26,z=67108863&d,q=Math.min(i,r.length-1),Z=Math.max(0,i-x.length+1);Z<=q;Z++)y+=(_=(a=0|x.words[i-Z|0])*(f=0|r.words[Z])+z)/67108864|0,z=67108863&_;s.words[i]=0|z,d=0|y}return 0!==d?s.words[i]=0|d:s.length--,s.strip()}u.prototype.toString=function(r,s){var l;if(s=0|s||1,16===(r=r||10)||"hex"===r){l="";for(var a=0,f=0,_=0;_<this.length;_++){var D=this.words[_],d=(16777215&(D<<a|f)).toString(16);l=0!=(f=D>>>24-a&16777215)||_!==this.length-1?g[6-d.length]+d+l:d+l,(a+=2)>=26&&(a-=26,_--)}for(0!==f&&(l=f.toString(16)+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}if(r===(0|r)&&r>=2&&r<=36){var i=h[r],y=C[r];l="";var z=this.clone();for(z.negative=0;!z.isZero();){var q=z.modn(y).toString(r);l=(z=z.idivn(y)).isZero()?q+l:g[i-q.length]+q+l}for(this.isZero()&&(l="0"+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}m(!1,"Base should be between 2 and 36")},u.prototype.toNumber=function(){var r=this.words[0];return 2===this.length?r+=67108864*this.words[1]:3===this.length&&1===this.words[2]?r+=4503599627370496+67108864*this.words[1]:this.length>2&&m(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-r:r},u.prototype.toJSON=function(){return this.toString(16)},u.prototype.toBuffer=function(r,s){return m(void 0!==v),this.toArrayLike(v,r,s)},u.prototype.toArray=function(r,s){return this.toArrayLike(Array,r,s)},u.prototype.toArrayLike=function(r,s,l){var a=this.byteLength(),f=l||Math.max(1,a);m(a<=f,"byte array longer than desired length"),m(f>0,"Requested array length <= 0"),this.strip();var d,i,_="le"===s,D=new r(f),y=this.clone();if(_){for(i=0;!y.isZero();i++)d=y.andln(255),y.iushrn(8),D[i]=d;for(;i<f;i++)D[i]=0}else{for(i=0;i<f-a;i++)D[i]=0;for(i=0;!y.isZero();i++)d=y.andln(255),y.iushrn(8),D[f-i-1]=d}return D},u.prototype._countBits=Math.clz32?function(r){return 32-Math.clz32(r)}:function(r){var s=r,l=0;return s>=4096&&(l+=13,s>>>=13),s>=64&&(l+=7,s>>>=7),s>=8&&(l+=4,s>>>=4),s>=2&&(l+=2,s>>>=2),l+s},u.prototype._zeroBits=function(r){if(0===r)return 26;var s=r,l=0;return 0==(8191&s)&&(l+=13,s>>>=13),0==(127&s)&&(l+=7,s>>>=7),0==(15&s)&&(l+=4,s>>>=4),0==(3&s)&&(l+=2,s>>>=2),0==(1&s)&&l++,l},u.prototype.bitLength=function(){var s=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+s},u.prototype.zeroBits=function(){if(this.isZero())return 0;for(var r=0,s=0;s<this.length;s++){var l=this._zeroBits(this.words[s]);if(r+=l,26!==l)break}return r},u.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},u.prototype.toTwos=function(r){return 0!==this.negative?this.abs().inotn(r).iaddn(1):this.clone()},u.prototype.fromTwos=function(r){return this.testn(r-1)?this.notn(r).iaddn(1).ineg():this.clone()},u.prototype.isNeg=function(){return 0!==this.negative},u.prototype.neg=function(){return this.clone().ineg()},u.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},u.prototype.iuor=function(r){for(;this.length<r.length;)this.words[this.length++]=0;for(var s=0;s<r.length;s++)this.words[s]=this.words[s]|r.words[s];return this.strip()},u.prototype.ior=function(r){return m(0==(this.negative|r.negative)),this.iuor(r)},u.prototype.or=function(r){return this.length>r.length?this.clone().ior(r):r.clone().ior(this)},u.prototype.uor=function(r){return this.length>r.length?this.clone().iuor(r):r.clone().iuor(this)},u.prototype.iuand=function(r){var s;s=this.length>r.length?r:this;for(var l=0;l<s.length;l++)this.words[l]=this.words[l]&r.words[l];return this.length=s.length,this.strip()},u.prototype.iand=function(r){return m(0==(this.negative|r.negative)),this.iuand(r)},u.prototype.and=function(r){return this.length>r.length?this.clone().iand(r):r.clone().iand(this)},u.prototype.uand=function(r){return this.length>r.length?this.clone().iuand(r):r.clone().iuand(this)},u.prototype.iuxor=function(r){var s,l;this.length>r.length?(s=this,l=r):(s=r,l=this);for(var a=0;a<l.length;a++)this.words[a]=s.words[a]^l.words[a];if(this!==s)for(;a<s.length;a++)this.words[a]=s.words[a];return this.length=s.length,this.strip()},u.prototype.ixor=function(r){return m(0==(this.negative|r.negative)),this.iuxor(r)},u.prototype.xor=function(r){return this.length>r.length?this.clone().ixor(r):r.clone().ixor(this)},u.prototype.uxor=function(r){return this.length>r.length?this.clone().iuxor(r):r.clone().iuxor(this)},u.prototype.inotn=function(r){m("number"==typeof r&&r>=0);var s=0|Math.ceil(r/26),l=r%26;this._expand(s),l>0&&s--;for(var a=0;a<s;a++)this.words[a]=67108863&~this.words[a];return l>0&&(this.words[a]=~this.words[a]&67108863>>26-l),this.strip()},u.prototype.notn=function(r){return this.clone().inotn(r)},u.prototype.setn=function(r,s){m("number"==typeof r&&r>=0);var l=r/26|0,a=r%26;return this._expand(l+1),this.words[l]=s?this.words[l]|1<<a:this.words[l]&~(1<<a),this.strip()},u.prototype.iadd=function(r){var s,l,a;if(0!==this.negative&&0===r.negative)return this.negative=0,s=this.isub(r),this.negative^=1,this._normSign();if(0===this.negative&&0!==r.negative)return r.negative=0,s=this.isub(r),r.negative=1,s._normSign();this.length>r.length?(l=this,a=r):(l=r,a=this);for(var f=0,_=0;_<a.length;_++)this.words[_]=67108863&(s=(0|l.words[_])+(0|a.words[_])+f),f=s>>>26;for(;0!==f&&_<l.length;_++)this.words[_]=67108863&(s=(0|l.words[_])+f),f=s>>>26;if(this.length=l.length,0!==f)this.words[this.length]=f,this.length++;else if(l!==this)for(;_<l.length;_++)this.words[_]=l.words[_];return this},u.prototype.add=function(r){var s;return 0!==r.negative&&0===this.negative?(r.negative=0,s=this.sub(r),r.negative^=1,s):0===r.negative&&0!==this.negative?(this.negative=0,s=r.sub(this),this.negative=1,s):this.length>r.length?this.clone().iadd(r):r.clone().iadd(this)},u.prototype.isub=function(r){if(0!==r.negative){r.negative=0;var s=this.iadd(r);return r.negative=1,s._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(r),this.negative=1,this._normSign();var a,f,l=this.cmp(r);if(0===l)return this.negative=0,this.length=1,this.words[0]=0,this;l>0?(a=this,f=r):(a=r,f=this);for(var _=0,D=0;D<f.length;D++)_=(s=(0|a.words[D])-(0|f.words[D])+_)>>26,this.words[D]=67108863&s;for(;0!==_&&D<a.length;D++)_=(s=(0|a.words[D])+_)>>26,this.words[D]=67108863&s;if(0===_&&D<a.length&&a!==this)for(;D<a.length;D++)this.words[D]=a.words[D];return this.length=Math.max(this.length,D),a!==this&&(this.negative=1),this.strip()},u.prototype.sub=function(r){return this.clone().isub(r)};var I=function(r,s,l){var d,i,y,a=r.words,f=s.words,_=l.words,D=0,z=0|a[0],q=8191&z,Z=z>>>13,ge=0|a[1],me=8191&ge,le=ge>>>13,fe=0|a[2],ae=8191&fe,de=fe>>>13,xe=0|a[3],Ce=8191&xe,oe=xe>>>13,we=0|a[4],ye=8191&we,re=we>>>13,ee=0|a[5],J=8191&ee,ue=ee>>>13,Ae=0|a[6],Te=8191&Ae,Ee=Ae>>>13,We=0|a[7],Ne=8191&We,_e=We>>>13,Be=0|a[8],De=8191&Be,Le=Be>>>13,Mt=0|a[9],He=8191&Mt,$e=Mt>>>13,It=0|f[0],et=8191&It,pt=It>>>13,Ct=0|f[1],at=8191&Ct,it=Ct>>>13,Mn=0|f[2],ot=8191&Mn,Ke=Mn>>>13,In=0|f[3],Ge=8191&In,ut=In>>>13,On=0|f[4],nt=8191&On,Ve=On>>>13,kt=0|f[5],ft=8191&kt,st=kt>>>13,qn=0|f[6],ct=8191&qn,ze=qn>>>13,an=0|f[7],dt=8191&an,Xe=an>>>13,Yt=0|f[8],Ye=8191&Yt,Qe=Yt>>>13,kn=0|f[9],Ze=8191&kn,lt=kn>>>13;l.negative=r.negative^s.negative,l.length=19;var ln=(D+(d=Math.imul(q,et))|0)+((8191&(i=(i=Math.imul(q,pt))+Math.imul(Z,et)|0))<<13)|0;D=((y=Math.imul(Z,pt))+(i>>>13)|0)+(ln>>>26)|0,ln&=67108863,d=Math.imul(me,et),i=(i=Math.imul(me,pt))+Math.imul(le,et)|0,y=Math.imul(le,pt);var jt=(D+(d=d+Math.imul(q,at)|0)|0)+((8191&(i=(i=i+Math.imul(q,it)|0)+Math.imul(Z,at)|0))<<13)|0;D=((y=y+Math.imul(Z,it)|0)+(i>>>13)|0)+(jt>>>26)|0,jt&=67108863,d=Math.imul(ae,et),i=(i=Math.imul(ae,pt))+Math.imul(de,et)|0,y=Math.imul(de,pt),d=d+Math.imul(me,at)|0,i=(i=i+Math.imul(me,it)|0)+Math.imul(le,at)|0,y=y+Math.imul(le,it)|0;var qt=(D+(d=d+Math.imul(q,ot)|0)|0)+((8191&(i=(i=i+Math.imul(q,Ke)|0)+Math.imul(Z,ot)|0))<<13)|0;D=((y=y+Math.imul(Z,Ke)|0)+(i>>>13)|0)+(qt>>>26)|0,qt&=67108863,d=Math.imul(Ce,et),i=(i=Math.imul(Ce,pt))+Math.imul(oe,et)|0,y=Math.imul(oe,pt),d=d+Math.imul(ae,at)|0,i=(i=i+Math.imul(ae,it)|0)+Math.imul(de,at)|0,y=y+Math.imul(de,it)|0,d=d+Math.imul(me,ot)|0,i=(i=i+Math.imul(me,Ke)|0)+Math.imul(le,ot)|0,y=y+Math.imul(le,Ke)|0;var wn=(D+(d=d+Math.imul(q,Ge)|0)|0)+((8191&(i=(i=i+Math.imul(q,ut)|0)+Math.imul(Z,Ge)|0))<<13)|0;D=((y=y+Math.imul(Z,ut)|0)+(i>>>13)|0)+(wn>>>26)|0,wn&=67108863,d=Math.imul(ye,et),i=(i=Math.imul(ye,pt))+Math.imul(re,et)|0,y=Math.imul(re,pt),d=d+Math.imul(Ce,at)|0,i=(i=i+Math.imul(Ce,it)|0)+Math.imul(oe,at)|0,y=y+Math.imul(oe,it)|0,d=d+Math.imul(ae,ot)|0,i=(i=i+Math.imul(ae,Ke)|0)+Math.imul(de,ot)|0,y=y+Math.imul(de,Ke)|0,d=d+Math.imul(me,Ge)|0,i=(i=i+Math.imul(me,ut)|0)+Math.imul(le,Ge)|0,y=y+Math.imul(le,ut)|0;var hn=(D+(d=d+Math.imul(q,nt)|0)|0)+((8191&(i=(i=i+Math.imul(q,Ve)|0)+Math.imul(Z,nt)|0))<<13)|0;D=((y=y+Math.imul(Z,Ve)|0)+(i>>>13)|0)+(hn>>>26)|0,hn&=67108863,d=Math.imul(J,et),i=(i=Math.imul(J,pt))+Math.imul(ue,et)|0,y=Math.imul(ue,pt),d=d+Math.imul(ye,at)|0,i=(i=i+Math.imul(ye,it)|0)+Math.imul(re,at)|0,y=y+Math.imul(re,it)|0,d=d+Math.imul(Ce,ot)|0,i=(i=i+Math.imul(Ce,Ke)|0)+Math.imul(oe,ot)|0,y=y+Math.imul(oe,Ke)|0,d=d+Math.imul(ae,Ge)|0,i=(i=i+Math.imul(ae,ut)|0)+Math.imul(de,Ge)|0,y=y+Math.imul(de,ut)|0,d=d+Math.imul(me,nt)|0,i=(i=i+Math.imul(me,Ve)|0)+Math.imul(le,nt)|0,y=y+Math.imul(le,Ve)|0;var gn=(D+(d=d+Math.imul(q,ft)|0)|0)+((8191&(i=(i=i+Math.imul(q,st)|0)+Math.imul(Z,ft)|0))<<13)|0;D=((y=y+Math.imul(Z,st)|0)+(i>>>13)|0)+(gn>>>26)|0,gn&=67108863,d=Math.imul(Te,et),i=(i=Math.imul(Te,pt))+Math.imul(Ee,et)|0,y=Math.imul(Ee,pt),d=d+Math.imul(J,at)|0,i=(i=i+Math.imul(J,it)|0)+Math.imul(ue,at)|0,y=y+Math.imul(ue,it)|0,d=d+Math.imul(ye,ot)|0,i=(i=i+Math.imul(ye,Ke)|0)+Math.imul(re,ot)|0,y=y+Math.imul(re,Ke)|0,d=d+Math.imul(Ce,Ge)|0,i=(i=i+Math.imul(Ce,ut)|0)+Math.imul(oe,Ge)|0,y=y+Math.imul(oe,ut)|0,d=d+Math.imul(ae,nt)|0,i=(i=i+Math.imul(ae,Ve)|0)+Math.imul(de,nt)|0,y=y+Math.imul(de,Ve)|0,d=d+Math.imul(me,ft)|0,i=(i=i+Math.imul(me,st)|0)+Math.imul(le,ft)|0,y=y+Math.imul(le,st)|0;var Rn=(D+(d=d+Math.imul(q,ct)|0)|0)+((8191&(i=(i=i+Math.imul(q,ze)|0)+Math.imul(Z,ct)|0))<<13)|0;D=((y=y+Math.imul(Z,ze)|0)+(i>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,d=Math.imul(Ne,et),i=(i=Math.imul(Ne,pt))+Math.imul(_e,et)|0,y=Math.imul(_e,pt),d=d+Math.imul(Te,at)|0,i=(i=i+Math.imul(Te,it)|0)+Math.imul(Ee,at)|0,y=y+Math.imul(Ee,it)|0,d=d+Math.imul(J,ot)|0,i=(i=i+Math.imul(J,Ke)|0)+Math.imul(ue,ot)|0,y=y+Math.imul(ue,Ke)|0,d=d+Math.imul(ye,Ge)|0,i=(i=i+Math.imul(ye,ut)|0)+Math.imul(re,Ge)|0,y=y+Math.imul(re,ut)|0,d=d+Math.imul(Ce,nt)|0,i=(i=i+Math.imul(Ce,Ve)|0)+Math.imul(oe,nt)|0,y=y+Math.imul(oe,Ve)|0,d=d+Math.imul(ae,ft)|0,i=(i=i+Math.imul(ae,st)|0)+Math.imul(de,ft)|0,y=y+Math.imul(de,st)|0,d=d+Math.imul(me,ct)|0,i=(i=i+Math.imul(me,ze)|0)+Math.imul(le,ct)|0,y=y+Math.imul(le,ze)|0;var on=(D+(d=d+Math.imul(q,dt)|0)|0)+((8191&(i=(i=i+Math.imul(q,Xe)|0)+Math.imul(Z,dt)|0))<<13)|0;D=((y=y+Math.imul(Z,Xe)|0)+(i>>>13)|0)+(on>>>26)|0,on&=67108863,d=Math.imul(De,et),i=(i=Math.imul(De,pt))+Math.imul(Le,et)|0,y=Math.imul(Le,pt),d=d+Math.imul(Ne,at)|0,i=(i=i+Math.imul(Ne,it)|0)+Math.imul(_e,at)|0,y=y+Math.imul(_e,it)|0,d=d+Math.imul(Te,ot)|0,i=(i=i+Math.imul(Te,Ke)|0)+Math.imul(Ee,ot)|0,y=y+Math.imul(Ee,Ke)|0,d=d+Math.imul(J,Ge)|0,i=(i=i+Math.imul(J,ut)|0)+Math.imul(ue,Ge)|0,y=y+Math.imul(ue,ut)|0,d=d+Math.imul(ye,nt)|0,i=(i=i+Math.imul(ye,Ve)|0)+Math.imul(re,nt)|0,y=y+Math.imul(re,Ve)|0,d=d+Math.imul(Ce,ft)|0,i=(i=i+Math.imul(Ce,st)|0)+Math.imul(oe,ft)|0,y=y+Math.imul(oe,st)|0,d=d+Math.imul(ae,ct)|0,i=(i=i+Math.imul(ae,ze)|0)+Math.imul(de,ct)|0,y=y+Math.imul(de,ze)|0,d=d+Math.imul(me,dt)|0,i=(i=i+Math.imul(me,Xe)|0)+Math.imul(le,dt)|0,y=y+Math.imul(le,Xe)|0;var _n=(D+(d=d+Math.imul(q,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(q,Qe)|0)+Math.imul(Z,Ye)|0))<<13)|0;D=((y=y+Math.imul(Z,Qe)|0)+(i>>>13)|0)+(_n>>>26)|0,_n&=67108863,d=Math.imul(He,et),i=(i=Math.imul(He,pt))+Math.imul($e,et)|0,y=Math.imul($e,pt),d=d+Math.imul(De,at)|0,i=(i=i+Math.imul(De,it)|0)+Math.imul(Le,at)|0,y=y+Math.imul(Le,it)|0,d=d+Math.imul(Ne,ot)|0,i=(i=i+Math.imul(Ne,Ke)|0)+Math.imul(_e,ot)|0,y=y+Math.imul(_e,Ke)|0,d=d+Math.imul(Te,Ge)|0,i=(i=i+Math.imul(Te,ut)|0)+Math.imul(Ee,Ge)|0,y=y+Math.imul(Ee,ut)|0,d=d+Math.imul(J,nt)|0,i=(i=i+Math.imul(J,Ve)|0)+Math.imul(ue,nt)|0,y=y+Math.imul(ue,Ve)|0,d=d+Math.imul(ye,ft)|0,i=(i=i+Math.imul(ye,st)|0)+Math.imul(re,ft)|0,y=y+Math.imul(re,st)|0,d=d+Math.imul(Ce,ct)|0,i=(i=i+Math.imul(Ce,ze)|0)+Math.imul(oe,ct)|0,y=y+Math.imul(oe,ze)|0,d=d+Math.imul(ae,dt)|0,i=(i=i+Math.imul(ae,Xe)|0)+Math.imul(de,dt)|0,y=y+Math.imul(de,Xe)|0,d=d+Math.imul(me,Ye)|0,i=(i=i+Math.imul(me,Qe)|0)+Math.imul(le,Ye)|0,y=y+Math.imul(le,Qe)|0;var Jt=(D+(d=d+Math.imul(q,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(q,lt)|0)+Math.imul(Z,Ze)|0))<<13)|0;D=((y=y+Math.imul(Z,lt)|0)+(i>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,d=Math.imul(He,at),i=(i=Math.imul(He,it))+Math.imul($e,at)|0,y=Math.imul($e,it),d=d+Math.imul(De,ot)|0,i=(i=i+Math.imul(De,Ke)|0)+Math.imul(Le,ot)|0,y=y+Math.imul(Le,Ke)|0,d=d+Math.imul(Ne,Ge)|0,i=(i=i+Math.imul(Ne,ut)|0)+Math.imul(_e,Ge)|0,y=y+Math.imul(_e,ut)|0,d=d+Math.imul(Te,nt)|0,i=(i=i+Math.imul(Te,Ve)|0)+Math.imul(Ee,nt)|0,y=y+Math.imul(Ee,Ve)|0,d=d+Math.imul(J,ft)|0,i=(i=i+Math.imul(J,st)|0)+Math.imul(ue,ft)|0,y=y+Math.imul(ue,st)|0,d=d+Math.imul(ye,ct)|0,i=(i=i+Math.imul(ye,ze)|0)+Math.imul(re,ct)|0,y=y+Math.imul(re,ze)|0,d=d+Math.imul(Ce,dt)|0,i=(i=i+Math.imul(Ce,Xe)|0)+Math.imul(oe,dt)|0,y=y+Math.imul(oe,Xe)|0,d=d+Math.imul(ae,Ye)|0,i=(i=i+Math.imul(ae,Qe)|0)+Math.imul(de,Ye)|0,y=y+Math.imul(de,Qe)|0;var Ft=(D+(d=d+Math.imul(me,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(me,lt)|0)+Math.imul(le,Ze)|0))<<13)|0;D=((y=y+Math.imul(le,lt)|0)+(i>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,d=Math.imul(He,ot),i=(i=Math.imul(He,Ke))+Math.imul($e,ot)|0,y=Math.imul($e,Ke),d=d+Math.imul(De,Ge)|0,i=(i=i+Math.imul(De,ut)|0)+Math.imul(Le,Ge)|0,y=y+Math.imul(Le,ut)|0,d=d+Math.imul(Ne,nt)|0,i=(i=i+Math.imul(Ne,Ve)|0)+Math.imul(_e,nt)|0,y=y+Math.imul(_e,Ve)|0,d=d+Math.imul(Te,ft)|0,i=(i=i+Math.imul(Te,st)|0)+Math.imul(Ee,ft)|0,y=y+Math.imul(Ee,st)|0,d=d+Math.imul(J,ct)|0,i=(i=i+Math.imul(J,ze)|0)+Math.imul(ue,ct)|0,y=y+Math.imul(ue,ze)|0,d=d+Math.imul(ye,dt)|0,i=(i=i+Math.imul(ye,Xe)|0)+Math.imul(re,dt)|0,y=y+Math.imul(re,Xe)|0,d=d+Math.imul(Ce,Ye)|0,i=(i=i+Math.imul(Ce,Qe)|0)+Math.imul(oe,Ye)|0,y=y+Math.imul(oe,Qe)|0;var An=(D+(d=d+Math.imul(ae,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(ae,lt)|0)+Math.imul(de,Ze)|0))<<13)|0;D=((y=y+Math.imul(de,lt)|0)+(i>>>13)|0)+(An>>>26)|0,An&=67108863,d=Math.imul(He,Ge),i=(i=Math.imul(He,ut))+Math.imul($e,Ge)|0,y=Math.imul($e,ut),d=d+Math.imul(De,nt)|0,i=(i=i+Math.imul(De,Ve)|0)+Math.imul(Le,nt)|0,y=y+Math.imul(Le,Ve)|0,d=d+Math.imul(Ne,ft)|0,i=(i=i+Math.imul(Ne,st)|0)+Math.imul(_e,ft)|0,y=y+Math.imul(_e,st)|0,d=d+Math.imul(Te,ct)|0,i=(i=i+Math.imul(Te,ze)|0)+Math.imul(Ee,ct)|0,y=y+Math.imul(Ee,ze)|0,d=d+Math.imul(J,dt)|0,i=(i=i+Math.imul(J,Xe)|0)+Math.imul(ue,dt)|0,y=y+Math.imul(ue,Xe)|0,d=d+Math.imul(ye,Ye)|0,i=(i=i+Math.imul(ye,Qe)|0)+Math.imul(re,Ye)|0,y=y+Math.imul(re,Qe)|0;var Cn=(D+(d=d+Math.imul(Ce,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(Ce,lt)|0)+Math.imul(oe,Ze)|0))<<13)|0;D=((y=y+Math.imul(oe,lt)|0)+(i>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,d=Math.imul(He,nt),i=(i=Math.imul(He,Ve))+Math.imul($e,nt)|0,y=Math.imul($e,Ve),d=d+Math.imul(De,ft)|0,i=(i=i+Math.imul(De,st)|0)+Math.imul(Le,ft)|0,y=y+Math.imul(Le,st)|0,d=d+Math.imul(Ne,ct)|0,i=(i=i+Math.imul(Ne,ze)|0)+Math.imul(_e,ct)|0,y=y+Math.imul(_e,ze)|0,d=d+Math.imul(Te,dt)|0,i=(i=i+Math.imul(Te,Xe)|0)+Math.imul(Ee,dt)|0,y=y+Math.imul(Ee,Xe)|0,d=d+Math.imul(J,Ye)|0,i=(i=i+Math.imul(J,Qe)|0)+Math.imul(ue,Ye)|0,y=y+Math.imul(ue,Qe)|0;var Sn=(D+(d=d+Math.imul(ye,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(ye,lt)|0)+Math.imul(re,Ze)|0))<<13)|0;D=((y=y+Math.imul(re,lt)|0)+(i>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,d=Math.imul(He,ft),i=(i=Math.imul(He,st))+Math.imul($e,ft)|0,y=Math.imul($e,st),d=d+Math.imul(De,ct)|0,i=(i=i+Math.imul(De,ze)|0)+Math.imul(Le,ct)|0,y=y+Math.imul(Le,ze)|0,d=d+Math.imul(Ne,dt)|0,i=(i=i+Math.imul(Ne,Xe)|0)+Math.imul(_e,dt)|0,y=y+Math.imul(_e,Xe)|0,d=d+Math.imul(Te,Ye)|0,i=(i=i+Math.imul(Te,Qe)|0)+Math.imul(Ee,Ye)|0,y=y+Math.imul(Ee,Qe)|0;var Rt=(D+(d=d+Math.imul(J,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(J,lt)|0)+Math.imul(ue,Ze)|0))<<13)|0;D=((y=y+Math.imul(ue,lt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,d=Math.imul(He,ct),i=(i=Math.imul(He,ze))+Math.imul($e,ct)|0,y=Math.imul($e,ze),d=d+Math.imul(De,dt)|0,i=(i=i+Math.imul(De,Xe)|0)+Math.imul(Le,dt)|0,y=y+Math.imul(Le,Xe)|0,d=d+Math.imul(Ne,Ye)|0,i=(i=i+Math.imul(Ne,Qe)|0)+Math.imul(_e,Ye)|0,y=y+Math.imul(_e,Qe)|0;var Dn=(D+(d=d+Math.imul(Te,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(Te,lt)|0)+Math.imul(Ee,Ze)|0))<<13)|0;D=((y=y+Math.imul(Ee,lt)|0)+(i>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,d=Math.imul(He,dt),i=(i=Math.imul(He,Xe))+Math.imul($e,dt)|0,y=Math.imul($e,Xe),d=d+Math.imul(De,Ye)|0,i=(i=i+Math.imul(De,Qe)|0)+Math.imul(Le,Ye)|0,y=y+Math.imul(Le,Qe)|0;var Qt=(D+(d=d+Math.imul(Ne,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(Ne,lt)|0)+Math.imul(_e,Ze)|0))<<13)|0;D=((y=y+Math.imul(_e,lt)|0)+(i>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,d=Math.imul(He,Ye),i=(i=Math.imul(He,Qe))+Math.imul($e,Ye)|0,y=Math.imul($e,Qe);var nn=(D+(d=d+Math.imul(De,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(De,lt)|0)+Math.imul(Le,Ze)|0))<<13)|0;D=((y=y+Math.imul(Le,lt)|0)+(i>>>13)|0)+(nn>>>26)|0,nn&=67108863;var En=(D+(d=Math.imul(He,Ze))|0)+((8191&(i=(i=Math.imul(He,lt))+Math.imul($e,Ze)|0))<<13)|0;return D=((y=Math.imul($e,lt))+(i>>>13)|0)+(En>>>26)|0,En&=67108863,_[0]=ln,_[1]=jt,_[2]=qt,_[3]=wn,_[4]=hn,_[5]=gn,_[6]=Rn,_[7]=on,_[8]=_n,_[9]=Jt,_[10]=Ft,_[11]=An,_[12]=Cn,_[13]=Sn,_[14]=Rt,_[15]=Dn,_[16]=Qt,_[17]=nn,_[18]=En,0!==D&&(_[19]=D,l.length++),l};function k(x,r,s){return(new O).mulp(x,r,s)}function O(x,r){this.x=x,this.y=r}Math.imul||(I=w),u.prototype.mulTo=function(r,s){var a=this.length+r.length;return 10===this.length&&10===r.length?I(this,r,s):a<63?w(this,r,s):a<1024?function(x,r,s){s.negative=r.negative^x.negative,s.length=x.length+r.length;for(var l=0,a=0,f=0;f<s.length-1;f++){var _=a;a=0;for(var D=67108863&l,d=Math.min(f,r.length-1),i=Math.max(0,f-x.length+1);i<=d;i++){var Z=(0|x.words[f-i])*(0|r.words[i]),ge=67108863&Z;D=67108863&(ge=ge+D|0),a+=(_=(_=_+(Z/67108864|0)|0)+(ge>>>26)|0)>>>26,_&=67108863}s.words[f]=D,l=_,_=a}return 0!==l?s.words[f]=l:s.length--,s.strip()}(this,r,s):k(this,r,s)},O.prototype.makeRBT=function(r){for(var s=new Array(r),l=u.prototype._countBits(r)-1,a=0;a<r;a++)s[a]=this.revBin(a,l,r);return s},O.prototype.revBin=function(r,s,l){if(0===r||r===l-1)return r;for(var a=0,f=0;f<s;f++)a|=(1&r)<<s-f-1,r>>=1;return a},O.prototype.permute=function(r,s,l,a,f,_){for(var D=0;D<_;D++)a[D]=s[r[D]],f[D]=l[r[D]]},O.prototype.transform=function(r,s,l,a,f,_){this.permute(_,r,s,l,a,f);for(var D=1;D<f;D<<=1)for(var d=D<<1,i=Math.cos(2*Math.PI/d),y=Math.sin(2*Math.PI/d),z=0;z<f;z+=d)for(var q=i,Z=y,ge=0;ge<D;ge++){var me=l[z+ge],le=a[z+ge],fe=l[z+ge+D],ae=a[z+ge+D],de=q*fe-Z*ae;ae=q*ae+Z*fe,l[z+ge]=me+(fe=de),a[z+ge]=le+ae,l[z+ge+D]=me-fe,a[z+ge+D]=le-ae,ge!==d&&(de=i*q-y*Z,Z=i*Z+y*q,q=de)}},O.prototype.guessLen13b=function(r,s){var l=1|Math.max(s,r),a=1&l,f=0;for(l=l/2|0;l;l>>>=1)f++;return 1<<f+1+a},O.prototype.conjugate=function(r,s,l){if(!(l<=1))for(var a=0;a<l/2;a++){var f=r[a];r[a]=r[l-a-1],r[l-a-1]=f,f=s[a],s[a]=-s[l-a-1],s[l-a-1]=-f}},O.prototype.normalize13b=function(r,s){for(var l=0,a=0;a<s/2;a++){var f=8192*Math.round(r[2*a+1]/s)+Math.round(r[2*a]/s)+l;r[a]=67108863&f,l=f<67108864?0:f/67108864|0}return r},O.prototype.convert13b=function(r,s,l,a){for(var f=0,_=0;_<s;_++)l[2*_]=8191&(f+=0|r[_]),l[2*_+1]=8191&(f>>>=13),f>>>=13;for(_=2*s;_<a;++_)l[_]=0;m(0===f),m(0==(-8192&f))},O.prototype.stub=function(r){for(var s=new Array(r),l=0;l<r;l++)s[l]=0;return s},O.prototype.mulp=function(r,s,l){var a=2*this.guessLen13b(r.length,s.length),f=this.makeRBT(a),_=this.stub(a),D=new Array(a),d=new Array(a),i=new Array(a),y=new Array(a),z=new Array(a),q=new Array(a),Z=l.words;Z.length=a,this.convert13b(r.words,r.length,D,a),this.convert13b(s.words,s.length,y,a),this.transform(D,_,d,i,a,f),this.transform(y,_,z,q,a,f);for(var ge=0;ge<a;ge++){var me=d[ge]*z[ge]-i[ge]*q[ge];i[ge]=d[ge]*q[ge]+i[ge]*z[ge],d[ge]=me}return this.conjugate(d,i,a),this.transform(d,i,Z,_,a,f),this.conjugate(Z,_,a),this.normalize13b(Z,a),l.negative=r.negative^s.negative,l.length=r.length+s.length,l.strip()},u.prototype.mul=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),this.mulTo(r,s)},u.prototype.mulf=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),k(this,r,s)},u.prototype.imul=function(r){return this.clone().mulTo(r,this)},u.prototype.imuln=function(r){m("number"==typeof r),m(r<67108864);for(var s=0,l=0;l<this.length;l++){var a=(0|this.words[l])*r,f=(67108863&a)+(67108863&s);s>>=26,s+=a/67108864|0,s+=f>>>26,this.words[l]=67108863&f}return 0!==s&&(this.words[l]=s,this.length++),this},u.prototype.muln=function(r){return this.clone().imuln(r)},u.prototype.sqr=function(){return this.mul(this)},u.prototype.isqr=function(){return this.imul(this.clone())},u.prototype.pow=function(r){var s=function(x){for(var r=new Array(x.bitLength()),s=0;s<r.length;s++){var a=s%26;r[s]=(x.words[s/26|0]&1<<a)>>>a}return r}(r);if(0===s.length)return new u(1);for(var l=this,a=0;a<s.length&&0===s[a];a++,l=l.sqr());if(++a<s.length)for(var f=l.sqr();a<s.length;a++,f=f.sqr())0!==s[a]&&(l=l.mul(f));return l},u.prototype.iushln=function(r){m("number"==typeof r&&r>=0);var f,s=r%26,l=(r-s)/26,a=67108863>>>26-s<<26-s;if(0!==s){var _=0;for(f=0;f<this.length;f++){var D=this.words[f]&a;this.words[f]=(0|this.words[f])-D<<s|_,_=D>>>26-s}_&&(this.words[f]=_,this.length++)}if(0!==l){for(f=this.length-1;f>=0;f--)this.words[f+l]=this.words[f];for(f=0;f<l;f++)this.words[f]=0;this.length+=l}return this.strip()},u.prototype.ishln=function(r){return m(0===this.negative),this.iushln(r)},u.prototype.iushrn=function(r,s,l){var a;m("number"==typeof r&&r>=0),a=s?(s-s%26)/26:0;var f=r%26,_=Math.min((r-f)/26,this.length),D=67108863^67108863>>>f<<f,d=l;if(a-=_,a=Math.max(0,a),d){for(var i=0;i<_;i++)d.words[i]=this.words[i];d.length=_}if(0!==_)if(this.length>_)for(this.length-=_,i=0;i<this.length;i++)this.words[i]=this.words[i+_];else this.words[0]=0,this.length=1;var y=0;for(i=this.length-1;i>=0&&(0!==y||i>=a);i--){var z=0|this.words[i];this.words[i]=y<<26-f|z>>>f,y=z&D}return d&&0!==y&&(d.words[d.length++]=y),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},u.prototype.ishrn=function(r,s,l){return m(0===this.negative),this.iushrn(r,s,l)},u.prototype.shln=function(r){return this.clone().ishln(r)},u.prototype.ushln=function(r){return this.clone().iushln(r)},u.prototype.shrn=function(r){return this.clone().ishrn(r)},u.prototype.ushrn=function(r){return this.clone().iushrn(r)},u.prototype.testn=function(r){m("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return!(this.length<=l||!(this.words[l]&1<<s))},u.prototype.imaskn=function(r){m("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return m(0===this.negative,"imaskn works only with positive numbers"),this.length<=l?this:(0!==s&&l++,this.length=Math.min(l,this.length),0!==s&&(this.words[this.length-1]&=67108863^67108863>>>s<<s),this.strip())},u.prototype.maskn=function(r){return this.clone().imaskn(r)},u.prototype.iaddn=function(r){return m("number"==typeof r),m(r<67108864),r<0?this.isubn(-r):0!==this.negative?1===this.length&&(0|this.words[0])<r?(this.words[0]=r-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(r),this.negative=1,this):this._iaddn(r)},u.prototype._iaddn=function(r){this.words[0]+=r;for(var s=0;s<this.length&&this.words[s]>=67108864;s++)this.words[s]-=67108864,s===this.length-1?this.words[s+1]=1:this.words[s+1]++;return this.length=Math.max(this.length,s+1),this},u.prototype.isubn=function(r){if(m("number"==typeof r),m(r<67108864),r<0)return this.iaddn(-r);if(0!==this.negative)return this.negative=0,this.iaddn(r),this.negative=1,this;if(this.words[0]-=r,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var s=0;s<this.length&&this.words[s]<0;s++)this.words[s]+=67108864,this.words[s+1]-=1;return this.strip()},u.prototype.addn=function(r){return this.clone().iaddn(r)},u.prototype.subn=function(r){return this.clone().isubn(r)},u.prototype.iabs=function(){return this.negative=0,this},u.prototype.abs=function(){return this.clone().iabs()},u.prototype._ishlnsubmul=function(r,s,l){var f;this._expand(r.length+l);var _,D=0;for(f=0;f<r.length;f++){_=(0|this.words[f+l])+D;var d=(0|r.words[f])*s;D=((_-=67108863&d)>>26)-(d/67108864|0),this.words[f+l]=67108863&_}for(;f<this.length-l;f++)D=(_=(0|this.words[f+l])+D)>>26,this.words[f+l]=67108863&_;if(0===D)return this.strip();for(m(-1===D),D=0,f=0;f<this.length;f++)D=(_=-(0|this.words[f])+D)>>26,this.words[f]=67108863&_;return this.negative=1,this.strip()},u.prototype._wordDiv=function(r,s){var l,a=this.clone(),f=r,_=0|f.words[f.length-1];0!=(l=26-this._countBits(_))&&(f=f.ushln(l),a.iushln(l),_=0|f.words[f.length-1]);var i,d=a.length-f.length;if("mod"!==s){(i=new u(null)).length=d+1,i.words=new Array(i.length);for(var y=0;y<i.length;y++)i.words[y]=0}var z=a.clone()._ishlnsubmul(f,1,d);0===z.negative&&(a=z,i&&(i.words[d]=1));for(var q=d-1;q>=0;q--){var Z=67108864*(0|a.words[f.length+q])+(0|a.words[f.length+q-1]);for(Z=Math.min(Z/_|0,67108863),a._ishlnsubmul(f,Z,q);0!==a.negative;)Z--,a.negative=0,a._ishlnsubmul(f,1,q),a.isZero()||(a.negative^=1);i&&(i.words[q]=Z)}return i&&i.strip(),a.strip(),"div"!==s&&0!==l&&a.iushrn(l),{div:i||null,mod:a}},u.prototype.divmod=function(r,s,l){return m(!r.isZero()),this.isZero()?{div:new u(0),mod:new u(0)}:0!==this.negative&&0===r.negative?(_=this.neg().divmod(r,s),"mod"!==s&&(a=_.div.neg()),"div"!==s&&(f=_.mod.neg(),l&&0!==f.negative&&f.iadd(r)),{div:a,mod:f}):0===this.negative&&0!==r.negative?(_=this.divmod(r.neg(),s),"mod"!==s&&(a=_.div.neg()),{div:a,mod:_.mod}):0!=(this.negative&r.negative)?(_=this.neg().divmod(r.neg(),s),"div"!==s&&(f=_.mod.neg(),l&&0!==f.negative&&f.isub(r)),{div:_.div,mod:f}):r.length>this.length||this.cmp(r)<0?{div:new u(0),mod:this}:1===r.length?"div"===s?{div:this.divn(r.words[0]),mod:null}:"mod"===s?{div:null,mod:new u(this.modn(r.words[0]))}:{div:this.divn(r.words[0]),mod:new u(this.modn(r.words[0]))}:this._wordDiv(r,s);var a,f,_},u.prototype.div=function(r){return this.divmod(r,"div",!1).div},u.prototype.mod=function(r){return this.divmod(r,"mod",!1).mod},u.prototype.umod=function(r){return this.divmod(r,"mod",!0).mod},u.prototype.divRound=function(r){var s=this.divmod(r);if(s.mod.isZero())return s.div;var l=0!==s.div.negative?s.mod.isub(r):s.mod,a=r.ushrn(1),f=r.andln(1),_=l.cmp(a);return _<0||1===f&&0===_?s.div:0!==s.div.negative?s.div.isubn(1):s.div.iaddn(1)},u.prototype.modn=function(r){m(r<=67108863);for(var s=(1<<26)%r,l=0,a=this.length-1;a>=0;a--)l=(s*l+(0|this.words[a]))%r;return l},u.prototype.idivn=function(r){m(r<=67108863);for(var s=0,l=this.length-1;l>=0;l--){var a=(0|this.words[l])+67108864*s;this.words[l]=a/r|0,s=a%r}return this.strip()},u.prototype.divn=function(r){return this.clone().idivn(r)},u.prototype.egcd=function(r){m(0===r.negative),m(!r.isZero());var s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),_=new u(0),D=new u(1),d=0;s.isEven()&&l.isEven();)s.iushrn(1),l.iushrn(1),++d;for(var i=l.clone(),y=s.clone();!s.isZero();){for(var z=0,q=1;0==(s.words[0]&q)&&z<26;++z,q<<=1);if(z>0)for(s.iushrn(z);z-- >0;)(a.isOdd()||f.isOdd())&&(a.iadd(i),f.isub(y)),a.iushrn(1),f.iushrn(1);for(var Z=0,ge=1;0==(l.words[0]&ge)&&Z<26;++Z,ge<<=1);if(Z>0)for(l.iushrn(Z);Z-- >0;)(_.isOdd()||D.isOdd())&&(_.iadd(i),D.isub(y)),_.iushrn(1),D.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(_),f.isub(D)):(l.isub(s),_.isub(a),D.isub(f))}return{a:_,b:D,gcd:l.iushln(d)}},u.prototype._invmp=function(r){m(0===r.negative),m(!r.isZero());var z,s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),_=l.clone();s.cmpn(1)>0&&l.cmpn(1)>0;){for(var D=0,d=1;0==(s.words[0]&d)&&D<26;++D,d<<=1);if(D>0)for(s.iushrn(D);D-- >0;)a.isOdd()&&a.iadd(_),a.iushrn(1);for(var i=0,y=1;0==(l.words[0]&y)&&i<26;++i,y<<=1);if(i>0)for(l.iushrn(i);i-- >0;)f.isOdd()&&f.iadd(_),f.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(f)):(l.isub(s),f.isub(a))}return(z=0===s.cmpn(1)?a:f).cmpn(0)<0&&z.iadd(r),z},u.prototype.gcd=function(r){if(this.isZero())return r.abs();if(r.isZero())return this.abs();var s=this.clone(),l=r.clone();s.negative=0,l.negative=0;for(var a=0;s.isEven()&&l.isEven();a++)s.iushrn(1),l.iushrn(1);for(;;){for(;s.isEven();)s.iushrn(1);for(;l.isEven();)l.iushrn(1);var f=s.cmp(l);if(f<0){var _=s;s=l,l=_}else if(0===f||0===l.cmpn(1))break;s.isub(l)}return l.iushln(a)},u.prototype.invm=function(r){return this.egcd(r).a.umod(r)},u.prototype.isEven=function(){return 0==(1&this.words[0])},u.prototype.isOdd=function(){return 1==(1&this.words[0])},u.prototype.andln=function(r){return this.words[0]&r},u.prototype.bincn=function(r){m("number"==typeof r);var s=r%26,l=(r-s)/26,a=1<<s;if(this.length<=l)return this._expand(l+1),this.words[l]|=a,this;for(var f=a,_=l;0!==f&&_<this.length;_++){var D=0|this.words[_];f=(D+=f)>>>26,this.words[_]=D&=67108863}return 0!==f&&(this.words[_]=f,this.length++),this},u.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},u.prototype.cmpn=function(r){var l,s=r<0;if(0!==this.negative&&!s)return-1;if(0===this.negative&&s)return 1;if(this.strip(),this.length>1)l=1;else{s&&(r=-r),m(r<=67108863,"Number is too big");var a=0|this.words[0];l=a===r?0:a<r?-1:1}return 0!==this.negative?0|-l:l},u.prototype.cmp=function(r){if(0!==this.negative&&0===r.negative)return-1;if(0===this.negative&&0!==r.negative)return 1;var s=this.ucmp(r);return 0!==this.negative?0|-s:s},u.prototype.ucmp=function(r){if(this.length>r.length)return 1;if(this.length<r.length)return-1;for(var s=0,l=this.length-1;l>=0;l--){var a=0|this.words[l],f=0|r.words[l];if(a!==f){a<f?s=-1:a>f&&(s=1);break}}return s},u.prototype.gtn=function(r){return 1===this.cmpn(r)},u.prototype.gt=function(r){return 1===this.cmp(r)},u.prototype.gten=function(r){return this.cmpn(r)>=0},u.prototype.gte=function(r){return this.cmp(r)>=0},u.prototype.ltn=function(r){return-1===this.cmpn(r)},u.prototype.lt=function(r){return-1===this.cmp(r)},u.prototype.lten=function(r){return this.cmpn(r)<=0},u.prototype.lte=function(r){return this.cmp(r)<=0},u.prototype.eqn=function(r){return 0===this.cmpn(r)},u.prototype.eq=function(r){return 0===this.cmp(r)},u.red=function(r){return new $(r)},u.prototype.toRed=function(r){return m(!this.red,"Already a number in reduction context"),m(0===this.negative,"red works only with positives"),r.convertTo(this)._forceRed(r)},u.prototype.fromRed=function(){return m(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},u.prototype._forceRed=function(r){return this.red=r,this},u.prototype.forceRed=function(r){return m(!this.red,"Already a number in reduction context"),this._forceRed(r)},u.prototype.redAdd=function(r){return m(this.red,"redAdd works only with red numbers"),this.red.add(this,r)},u.prototype.redIAdd=function(r){return m(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,r)},u.prototype.redSub=function(r){return m(this.red,"redSub works only with red numbers"),this.red.sub(this,r)},u.prototype.redISub=function(r){return m(this.red,"redISub works only with red numbers"),this.red.isub(this,r)},u.prototype.redShl=function(r){return m(this.red,"redShl works only with red numbers"),this.red.shl(this,r)},u.prototype.redMul=function(r){return m(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.mul(this,r)},u.prototype.redIMul=function(r){return m(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.imul(this,r)},u.prototype.redSqr=function(){return m(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},u.prototype.redISqr=function(){return m(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},u.prototype.redSqrt=function(){return m(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},u.prototype.redInvm=function(){return m(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},u.prototype.redNeg=function(){return m(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},u.prototype.redPow=function(r){return m(this.red&&!r.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,r)};var V={k256:null,p224:null,p192:null,p25519:null};function U(x,r){this.name=x,this.p=new u(r,16),this.n=this.p.bitLength(),this.k=new u(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function B(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function H(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function W(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function te(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function $(x){if("string"==typeof x){var r=u._prime(x);this.m=r.p,this.prime=r}else m(x.gtn(1),"modulus must be greater than 1"),this.m=x,this.prime=null}function pe(x){$.call(this,x),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new u(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}U.prototype._tmp=function(){var r=new u(null);return r.words=new Array(Math.ceil(this.n/13)),r},U.prototype.ireduce=function(r){var l,s=r;do{this.split(s,this.tmp),l=(s=(s=this.imulK(s)).iadd(this.tmp)).bitLength()}while(l>this.n);var a=l<this.n?-1:s.ucmp(this.p);return 0===a?(s.words[0]=0,s.length=1):a>0?s.isub(this.p):void 0!==s.strip?s.strip():s._strip(),s},U.prototype.split=function(r,s){r.iushrn(this.n,0,s)},U.prototype.imulK=function(r){return r.imul(this.k)},R(B,U),B.prototype.split=function(r,s){for(var l=4194303,a=Math.min(r.length,9),f=0;f<a;f++)s.words[f]=r.words[f];if(s.length=a,r.length<=9)return r.words[0]=0,void(r.length=1);var _=r.words[9];for(s.words[s.length++]=_&l,f=10;f<r.length;f++){var D=0|r.words[f];r.words[f-10]=(D&l)<<4|_>>>22,_=D}r.words[f-10]=_>>>=22,r.length-=0===_&&r.length>10?10:9},B.prototype.imulK=function(r){r.words[r.length]=0,r.words[r.length+1]=0,r.length+=2;for(var s=0,l=0;l<r.length;l++){var a=0|r.words[l];r.words[l]=67108863&(s+=977*a),s=64*a+(s/67108864|0)}return 0===r.words[r.length-1]&&(r.length--,0===r.words[r.length-1]&&r.length--),r},R(H,U),R(W,U),R(te,U),te.prototype.imulK=function(r){for(var s=0,l=0;l<r.length;l++){var a=19*(0|r.words[l])+s,f=67108863&a;a>>>=26,r.words[l]=f,s=a}return 0!==s&&(r.words[r.length++]=s),r},u._prime=function(r){if(V[r])return V[r];var s;if("k256"===r)s=new B;else if("p224"===r)s=new H;else if("p192"===r)s=new W;else{if("p25519"!==r)throw new Error("Unknown prime "+r);s=new te}return V[r]=s,s},$.prototype._verify1=function(r){m(0===r.negative,"red works only with positives"),m(r.red,"red works only with red numbers")},$.prototype._verify2=function(r,s){m(0==(r.negative|s.negative),"red works only with positives"),m(r.red&&r.red===s.red,"red works only with red numbers")},$.prototype.imod=function(r){return this.prime?this.prime.ireduce(r)._forceRed(this):r.umod(this.m)._forceRed(this)},$.prototype.neg=function(r){return r.isZero()?r.clone():this.m.sub(r)._forceRed(this)},$.prototype.add=function(r,s){this._verify2(r,s);var l=r.add(s);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},$.prototype.iadd=function(r,s){this._verify2(r,s);var l=r.iadd(s);return l.cmp(this.m)>=0&&l.isub(this.m),l},$.prototype.sub=function(r,s){this._verify2(r,s);var l=r.sub(s);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},$.prototype.isub=function(r,s){this._verify2(r,s);var l=r.isub(s);return l.cmpn(0)<0&&l.iadd(this.m),l},$.prototype.shl=function(r,s){return this._verify1(r),this.imod(r.ushln(s))},$.prototype.imul=function(r,s){return this._verify2(r,s),this.imod(r.imul(s))},$.prototype.mul=function(r,s){return this._verify2(r,s),this.imod(r.mul(s))},$.prototype.isqr=function(r){return this.imul(r,r.clone())},$.prototype.sqr=function(r){return this.mul(r,r)},$.prototype.sqrt=function(r){if(r.isZero())return r.clone();var s=this.m.andln(3);if(m(s%2==1),3===s){var l=this.m.add(new u(1)).iushrn(2);return this.pow(r,l)}for(var a=this.m.subn(1),f=0;!a.isZero()&&0===a.andln(1);)f++,a.iushrn(1);m(!a.isZero());var _=new u(1).toRed(this),D=_.redNeg(),d=this.m.subn(1).iushrn(1),i=this.m.bitLength();for(i=new u(2*i*i).toRed(this);0!==this.pow(i,d).cmp(D);)i.redIAdd(D);for(var y=this.pow(i,a),z=this.pow(r,a.addn(1).iushrn(1)),q=this.pow(r,a),Z=f;0!==q.cmp(_);){for(var ge=q,me=0;0!==ge.cmp(_);me++)ge=ge.redSqr();m(me<Z);var le=this.pow(y,new u(1).iushln(Z-me-1));z=z.redMul(le),y=le.redSqr(),q=q.redMul(y),Z=me}return z},$.prototype.invm=function(r){var s=r._invmp(this.m);return 0!==s.negative?(s.negative=0,this.imod(s).redNeg()):this.imod(s)},$.prototype.pow=function(r,s){if(s.isZero())return new u(1).toRed(this);if(0===s.cmpn(1))return r.clone();var a=new Array(16);a[0]=new u(1).toRed(this),a[1]=r;for(var f=2;f<a.length;f++)a[f]=this.mul(a[f-1],r);var _=a[0],D=0,d=0,i=s.bitLength()%26;for(0===i&&(i=26),f=s.length-1;f>=0;f--){for(var y=s.words[f],z=i-1;z>=0;z--){var q=y>>z&1;_!==a[0]&&(_=this.sqr(_)),0!==q||0!==D?(D<<=1,D|=q,(4==++d||0===f&&0===z)&&(_=this.mul(_,a[D]),d=0,D=0)):d=0}i=26}return _},$.prototype.convertTo=function(r){var s=r.umod(this.m);return s===r?s.clone():s},$.prototype.convertFrom=function(r){var s=r.clone();return s.red=null,s},u.mont=function(r){return new pe(r)},R(pe,$),pe.prototype.convertTo=function(r){return this.imod(r.ushln(this.shift))},pe.prototype.convertFrom=function(r){var s=this.imod(r.mul(this.rinv));return s.red=null,s},pe.prototype.imul=function(r,s){if(r.isZero()||s.isZero())return r.words[0]=0,r.length=1,r;var l=r.imul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),_=f;return f.cmp(this.m)>=0?_=f.isub(this.m):f.cmpn(0)<0&&(_=f.iadd(this.m)),_._forceRed(this)},pe.prototype.mul=function(r,s){if(r.isZero()||s.isZero())return new u(0)._forceRed(this);var l=r.mul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),_=f;return f.cmp(this.m)>=0?_=f.isub(this.m):f.cmpn(0)<0&&(_=f.iadd(this.m)),_._forceRed(this)},pe.prototype.invm=function(r){return this.imod(r._invmp(this.m).mul(this.r2))._forceRed(this)}}(Y=E.nmd(Y),this)},2506:(Y,L,E)=>{"use strict";var p=E(9879),N=E(3264),m=E(5207),R=E(5829),u=E(5834);function v(M){u.call(this,"digest"),this._hash=M}p(v,u),v.prototype._update=function(M){this._hash.update(M)},v.prototype._final=function(){return this._hash.digest()},Y.exports=function(A){return"md5"===(A=A.toLowerCase())?new N:"rmd160"===A||"ripemd160"===A?new m:new v(R(A))}},4464:(Y,L,E)=>{var p=E(3264);Y.exports=function(N){return(new p).update(N).digest()}},5903:(Y,L,E)=>{"use strict";var p=E(9879),N=E(3715),m=E(5834),R=E(5859).Buffer,u=E(4464),v=E(5207),M=E(5829),A=R.alloc(128);function T(g,h){m.call(this,"digest"),"string"==typeof h&&(h=R.from(h));var C="sha512"===g||"sha384"===g?128:64;this._alg=g,this._key=h,h.length>C?h=("rmd160"===g?new v:M(g)).update(h).digest():h.length<C&&(h=R.concat([h,A],C));for(var w=this._ipad=R.allocUnsafe(C),I=this._opad=R.allocUnsafe(C),P=0;P<C;P++)w[P]=54^h[P],I[P]=92^h[P];this._hash="rmd160"===g?new v:M(g),this._hash.update(w)}p(T,m),T.prototype._update=function(g){this._hash.update(g)},T.prototype._final=function(){var g=this._hash.digest();return("rmd160"===this._alg?new v:M(this._alg)).update(this._opad).update(g).digest()},Y.exports=function(h,C){return"rmd160"===(h=h.toLowerCase())||"ripemd160"===h?new T("rmd160",C):"md5"===h?new N(u,C):new T(h,C)}},3715:(Y,L,E)=>{"use strict";var p=E(9879),N=E(5859).Buffer,m=E(5834),R=N.alloc(128),u=64;function v(M,A){m.call(this,"digest"),"string"==typeof A&&(A=N.from(A)),this._alg=M,this._key=A,A.length>u?A=M(A):A.length<u&&(A=N.concat([A,R],u));for(var T=this._ipad=N.allocUnsafe(u),g=this._opad=N.allocUnsafe(u),h=0;h<u;h++)T[h]=54^A[h],g[h]=92^A[h];this._hash=[T]}p(v,m),v.prototype._update=function(M){this._hash.push(M)},v.prototype._final=function(){var M=this._alg(N.concat(this._hash));return this._alg(N.concat([this._opad,M]))},Y.exports=v},9726:(Y,L,E)=>{"use strict";L.randomBytes=L.rng=L.pseudoRandomBytes=L.prng=E(6589),L.createHash=L.Hash=E(2506),L.createHmac=L.Hmac=E(5903);var p=E(6380),N=Object.keys(p),m=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(N);L.getHashes=function(){return m};var R=E(4161);L.pbkdf2=R.pbkdf2,L.pbkdf2Sync=R.pbkdf2Sync;var u=E(7991);L.Cipher=u.Cipher,L.createCipher=u.createCipher,L.Cipheriv=u.Cipheriv,L.createCipheriv=u.createCipheriv,L.Decipher=u.Decipher,L.createDecipher=u.createDecipher,L.Decipheriv=u.Decipheriv,L.createDecipheriv=u.createDecipheriv,L.getCiphers=u.getCiphers,L.listCiphers=u.listCiphers;var v=E(2322);L.DiffieHellmanGroup=v.DiffieHellmanGroup,L.createDiffieHellmanGroup=v.createDiffieHellmanGroup,L.getDiffieHellman=v.getDiffieHellman,L.createDiffieHellman=v.createDiffieHellman,L.DiffieHellman=v.DiffieHellman;var M=E(3566);L.createSign=M.createSign,L.Sign=M.Sign,L.createVerify=M.createVerify,L.Verify=M.Verify,L.createECDH=E(4892);var A=E(7537);L.publicEncrypt=A.publicEncrypt,L.privateEncrypt=A.privateEncrypt,L.publicDecrypt=A.publicDecrypt,L.privateDecrypt=A.privateDecrypt;var T=E(3594);L.randomFill=T.randomFill,L.randomFillSync=T.randomFillSync,L.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},L.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},8534:(Y,L,E)=>{"use strict";L.utils=E(6157),L.Cipher=E(2243),L.DES=E(2917),L.CBC=E(8029),L.EDE=E(1082)},8029:(Y,L,E)=>{"use strict";var p=E(6055),N=E(9879),m={};function R(v){p.equal(v.length,8,"Invalid IV length"),this.iv=new Array(8);for(var M=0;M<this.iv.length;M++)this.iv[M]=v[M]}L.instantiate=function(v){function M(h){v.call(this,h),this._cbcInit()}N(M,v);for(var A=Object.keys(m),T=0;T<A.length;T++){var g=A[T];M.prototype[g]=m[g]}return M.create=function(C){return new M(C)},M},m._cbcInit=function(){var M=new R(this.options.iv);this._cbcState=M},m._update=function(M,A,T,g){var C=this.constructor.super_.prototype,b=this._cbcState.iv;if("encrypt"===this.type){for(var w=0;w<this.blockSize;w++)b[w]^=M[A+w];for(C._update.call(this,b,0,T,g),w=0;w<this.blockSize;w++)b[w]=T[g+w]}else{for(C._update.call(this,M,A,T,g),w=0;w<this.blockSize;w++)T[g+w]^=b[w];for(w=0;w<this.blockSize;w++)b[w]=M[A+w]}}},2243:(Y,L,E)=>{"use strict";var p=E(6055);function N(m){this.options=m,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}Y.exports=N,N.prototype._init=function(){},N.prototype.update=function(R){return 0===R.length?[]:"decrypt"===this.type?this._updateDecrypt(R):this._updateEncrypt(R)},N.prototype._buffer=function(R,u){for(var v=Math.min(this.buffer.length-this.bufferOff,R.length-u),M=0;M<v;M++)this.buffer[this.bufferOff+M]=R[u+M];return this.bufferOff+=v,v},N.prototype._flushBuffer=function(R,u){return this._update(this.buffer,0,R,u),this.bufferOff=0,this.blockSize},N.prototype._updateEncrypt=function(R){var u=0,v=0,A=new Array(((this.bufferOff+R.length)/this.blockSize|0)*this.blockSize);0!==this.bufferOff&&(u+=this._buffer(R,u),this.bufferOff===this.buffer.length&&(v+=this._flushBuffer(A,v)));for(var T=R.length-(R.length-u)%this.blockSize;u<T;u+=this.blockSize)this._update(R,u,A,v),v+=this.blockSize;for(;u<R.length;u++,this.bufferOff++)this.buffer[this.bufferOff]=R[u];return A},N.prototype._updateDecrypt=function(R){for(var u=0,v=0,M=Math.ceil((this.bufferOff+R.length)/this.blockSize)-1,A=new Array(M*this.blockSize);M>0;M--)u+=this._buffer(R,u),v+=this._flushBuffer(A,v);return u+=this._buffer(R,u),A},N.prototype.final=function(R){var u,v;return R&&(u=this.update(R)),v="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),u?u.concat(v):v},N.prototype._pad=function(R,u){if(0===u)return!1;for(;u<R.length;)R[u++]=0;return!0},N.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var R=new Array(this.blockSize);return this._update(this.buffer,0,R,0),R},N.prototype._unpad=function(R){return R},N.prototype._finalDecrypt=function(){p.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var R=new Array(this.blockSize);return this._flushBuffer(R,0),this._unpad(R)}},2917:(Y,L,E)=>{"use strict";var p=E(6055),N=E(9879),m=E(6157),R=E(2243);function u(){this.tmp=new Array(2),this.keys=null}function v(A){R.call(this,A);var T=new u;this._desState=T,this.deriveKeys(T,A.key)}N(v,R),Y.exports=v,v.create=function(T){return new v(T)};var M=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];v.prototype.deriveKeys=function(T,g){T.keys=new Array(32),p.equal(g.length,this.blockSize,"Invalid key length");var h=m.readUInt32BE(g,0),C=m.readUInt32BE(g,4);m.pc1(h,C,T.tmp,0),h=T.tmp[0],C=T.tmp[1];for(var b=0;b<T.keys.length;b+=2){var w=M[b>>>1];h=m.r28shl(h,w),C=m.r28shl(C,w),m.pc2(h,C,T.keys,b)}},v.prototype._update=function(T,g,h,C){var b=this._desState,w=m.readUInt32BE(T,g),I=m.readUInt32BE(T,g+4);m.ip(w,I,b.tmp,0),w=b.tmp[0],I=b.tmp[1],"encrypt"===this.type?this._encrypt(b,w,I,b.tmp,0):this._decrypt(b,w,I,b.tmp,0),I=b.tmp[1],m.writeUInt32BE(h,w=b.tmp[0],C),m.writeUInt32BE(h,I,C+4)},v.prototype._pad=function(T,g){for(var h=T.length-g,C=g;C<T.length;C++)T[C]=h;return!0},v.prototype._unpad=function(T){for(var g=T[T.length-1],h=T.length-g;h<T.length;h++)p.equal(T[h],g);return T.slice(0,T.length-g)},v.prototype._encrypt=function(T,g,h,C,b){for(var w=g,I=h,P=0;P<T.keys.length;P+=2){var k=T.keys[P],O=T.keys[P+1];m.expand(I,T.tmp,0);var V=m.substitute(k^=T.tmp[0],O^=T.tmp[1]),B=I;I=(w^m.permute(V))>>>0,w=B}m.rip(I,w,C,b)},v.prototype._decrypt=function(T,g,h,C,b){for(var w=h,I=g,P=T.keys.length-2;P>=0;P-=2){var k=T.keys[P],O=T.keys[P+1];m.expand(w,T.tmp,0);var V=m.substitute(k^=T.tmp[0],O^=T.tmp[1]),B=w;w=(I^m.permute(V))>>>0,I=B}m.rip(w,I,C,b)}},1082:(Y,L,E)=>{"use strict";var p=E(6055),N=E(9879),m=E(2243),R=E(2917);function u(M,A){p.equal(A.length,24,"Invalid key length");var T=A.slice(0,8),g=A.slice(8,16),h=A.slice(16,24);this.ciphers="encrypt"===M?[R.create({type:"encrypt",key:T}),R.create({type:"decrypt",key:g}),R.create({type:"encrypt",key:h})]:[R.create({type:"decrypt",key:h}),R.create({type:"encrypt",key:g}),R.create({type:"decrypt",key:T})]}function v(M){m.call(this,M);var A=new u(this.type,this.options.key);this._edeState=A}N(v,m),Y.exports=v,v.create=function(A){return new v(A)},v.prototype._update=function(A,T,g,h){var C=this._edeState;C.ciphers[0]._update(A,T,g,h),C.ciphers[1]._update(g,h,g,h),C.ciphers[2]._update(g,h,g,h)},v.prototype._pad=R.prototype._pad,v.prototype._unpad=R.prototype._unpad},6157:(Y,L)=>{"use strict";L.readUInt32BE=function(R,u){return(R[0+u]<<24|R[1+u]<<16|R[2+u]<<8|R[3+u])>>>0},L.writeUInt32BE=function(R,u,v){R[0+v]=u>>>24,R[1+v]=u>>>16&255,R[2+v]=u>>>8&255,R[3+v]=255&u},L.ip=function(R,u,v,M){for(var A=0,T=0,g=6;g>=0;g-=2){for(var h=0;h<=24;h+=8)A<<=1,A|=u>>>h+g&1;for(h=0;h<=24;h+=8)A<<=1,A|=R>>>h+g&1}for(g=6;g>=0;g-=2){for(h=1;h<=25;h+=8)T<<=1,T|=u>>>h+g&1;for(h=1;h<=25;h+=8)T<<=1,T|=R>>>h+g&1}v[M+0]=A>>>0,v[M+1]=T>>>0},L.rip=function(R,u,v,M){for(var A=0,T=0,g=0;g<4;g++)for(var h=24;h>=0;h-=8)A<<=1,A|=u>>>h+g&1,A<<=1,A|=R>>>h+g&1;for(g=4;g<8;g++)for(h=24;h>=0;h-=8)T<<=1,T|=u>>>h+g&1,T<<=1,T|=R>>>h+g&1;v[M+0]=A>>>0,v[M+1]=T>>>0},L.pc1=function(R,u,v,M){for(var A=0,T=0,g=7;g>=5;g--){for(var h=0;h<=24;h+=8)A<<=1,A|=u>>h+g&1;for(h=0;h<=24;h+=8)A<<=1,A|=R>>h+g&1}for(h=0;h<=24;h+=8)A<<=1,A|=u>>h+g&1;for(g=1;g<=3;g++){for(h=0;h<=24;h+=8)T<<=1,T|=u>>h+g&1;for(h=0;h<=24;h+=8)T<<=1,T|=R>>h+g&1}for(h=0;h<=24;h+=8)T<<=1,T|=R>>h+g&1;v[M+0]=A>>>0,v[M+1]=T>>>0},L.r28shl=function(R,u){return R<<u&268435455|R>>>28-u};var E=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];L.pc2=function(R,u,v,M){for(var A=0,T=0,g=E.length>>>1,h=0;h<g;h++)A<<=1,A|=R>>>E[h]&1;for(h=g;h<E.length;h++)T<<=1,T|=u>>>E[h]&1;v[M+0]=A>>>0,v[M+1]=T>>>0},L.expand=function(R,u,v){var M=0,A=0;M=(1&R)<<5|R>>>27;for(var T=23;T>=15;T-=4)M<<=6,M|=R>>>T&63;for(T=11;T>=3;T-=4)A|=R>>>T&63,A<<=6;A|=(31&R)<<1|R>>>31,u[v+0]=M>>>0,u[v+1]=A>>>0};var p=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];L.substitute=function(R,u){for(var v=0,M=0;M<4;M++)v<<=4,v|=p[64*M+(R>>>18-6*M&63)];for(M=0;M<4;M++)v<<=4,v|=p[256+64*M+(u>>>18-6*M&63)];return v>>>0};var N=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];L.permute=function(R){for(var u=0,v=0;v<N.length;v++)u<<=1,u|=R>>>N[v]&1;return u>>>0},L.padSplit=function(R,u,v){for(var M=R.toString(2);M.length<u;)M="0"+M;for(var A=[],T=0;T<u;T+=v)A.push(M.slice(T,T+v));return A.join(" ")}},2322:(Y,L,E)=>{var p=E(4069),N=E(9799),m=E(6374),u={binary:!0,hex:!0,base64:!0};L.DiffieHellmanGroup=L.createDiffieHellmanGroup=L.getDiffieHellman=function(M){var A=new Buffer(N[M].prime,"hex"),T=new Buffer(N[M].gen,"hex");return new m(A,T)},L.createDiffieHellman=L.DiffieHellman=function v(M,A,T,g){return Buffer.isBuffer(A)||void 0===u[A]?v(M,"binary",A,T):(A=A||"binary",g=g||"binary",T=T||new Buffer([2]),Buffer.isBuffer(T)||(T=new Buffer(T,g)),"number"==typeof M?new m(p(M,T),T,!0):(Buffer.isBuffer(M)||(M=new Buffer(M,A)),new m(M,T,!0)))}},6374:(Y,L,E)=>{var p=E(4980),m=new(E(4398)),R=new p(24),u=new p(11),v=new p(10),M=new p(3),A=new p(7),T=E(4069),g=E(6589);function h(k,O){return O=O||"utf8",Buffer.isBuffer(k)||(k=new Buffer(k,O)),this._pub=new p(k),this}function C(k,O){return O=O||"utf8",Buffer.isBuffer(k)||(k=new Buffer(k,O)),this._priv=new p(k),this}Y.exports=I;var b={};function I(k,O,V){this.setGenerator(O),this.__prime=new p(k),this._prime=p.mont(this.__prime),this._primeLen=k.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,V?(this.setPublicKey=h,this.setPrivateKey=C):this._primeCode=8}function P(k,O){var V=new Buffer(k.toArray());return O?V.toString(O):V}Object.defineProperty(I.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(k,O){var V=O.toString("hex"),U=[V,k.toString(16)].join("_");if(U in b)return b[U];var H,B=0;if(k.isEven()||!T.simpleSieve||!T.fermatTest(k)||!m.test(k))return B+=1,b[U]=B+="02"===V||"05"===V?8:4,B;switch(m.test(k.shrn(1))||(B+=2),V){case"02":k.mod(R).cmp(u)&&(B+=8);break;case"05":(H=k.mod(v)).cmp(M)&&H.cmp(A)&&(B+=8);break;default:B+=4}return b[U]=B,B}(this.__prime,this.__gen)),this._primeCode}}),I.prototype.generateKeys=function(){return this._priv||(this._priv=new p(g(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},I.prototype.computeSecret=function(k){var O=(k=(k=new p(k)).toRed(this._prime)).redPow(this._priv).fromRed(),V=new Buffer(O.toArray()),U=this.getPrime();if(V.length<U.length){var B=new Buffer(U.length-V.length);B.fill(0),V=Buffer.concat([B,V])}return V},I.prototype.getPublicKey=function(O){return P(this._pub,O)},I.prototype.getPrivateKey=function(O){return P(this._priv,O)},I.prototype.getPrime=function(k){return P(this.__prime,k)},I.prototype.getGenerator=function(k){return P(this._gen,k)},I.prototype.setGenerator=function(k,O){return O=O||"utf8",Buffer.isBuffer(k)||(k=new Buffer(k,O)),this.__gen=k,this._gen=new p(k),this}},4069:(Y,L,E)=>{var p=E(6589);Y.exports=B,B.simpleSieve=V,B.fermatTest=U;var N=E(4980),m=new N(24),u=new(E(4398)),v=new N(1),M=new N(2),A=new N(5),h=(new N(16),new N(8),new N(10)),C=new N(3),w=(new N(7),new N(11)),I=new N(4),k=(new N(12),null);function V(H){for(var W=function(){if(null!==k)return k;var W=[];W[0]=2;for(var te=1,$=3;$<1048576;$+=2){for(var pe=Math.ceil(Math.sqrt($)),x=0;x<te&&W[x]<=pe&&$%W[x]!=0;x++);te!==x&&W[x]<=pe||(W[te++]=$)}return k=W,W}(),te=0;te<W.length;te++)if(0===H.modn(W[te]))return 0===H.cmpn(W[te]);return!0}function U(H){var W=N.mont(H);return 0===M.toRed(W).redPow(H.subn(1)).fromRed().cmpn(1)}function B(H,W){if(H<16)return new N(2===W||5===W?[140,123]:[140,39]);W=new N(W);for(var te,$;;){for(te=new N(p(Math.ceil(H/8)));te.bitLength()>H;)te.ishrn(1);if(te.isEven()&&te.iadd(v),te.testn(1)||te.iadd(M),W.cmp(M)){if(!W.cmp(A))for(;te.mod(h).cmp(C);)te.iadd(I)}else for(;te.mod(m).cmp(w);)te.iadd(I);if(V($=te.shrn(1))&&V(te)&&U($)&&U(te)&&u.test($)&&u.test(te))return te}}},4980:function(Y,L,E){!function(p,N){"use strict";function m(x,r){if(!x)throw new Error(r||"Assertion failed")}function R(x,r){x.super_=r;var s=function(){};s.prototype=r.prototype,x.prototype=new s,x.prototype.constructor=x}function u(x,r,s){if(u.isBN(x))return x;this.negative=0,this.words=null,this.length=0,this.red=null,null!==x&&(("le"===r||"be"===r)&&(s=r,r=10),this._init(x||0,r||10,s||"be"))}var v;"object"==typeof p?p.exports=u:N.BN=u,u.BN=u,u.wordSize=26;try{v="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:E(7748).Buffer}catch(x){}function M(x,r){var s=x.charCodeAt(r);return s>=65&&s<=70?s-55:s>=97&&s<=102?s-87:s-48&15}function A(x,r,s){var l=M(x,s);return s-1>=r&&(l|=M(x,s-1)<<4),l}function T(x,r,s,l){for(var a=0,f=Math.min(x.length,s),_=r;_<f;_++){var D=x.charCodeAt(_)-48;a*=l,a+=D>=49?D-49+10:D>=17?D-17+10:D}return a}u.isBN=function(r){return r instanceof u||null!==r&&"object"==typeof r&&r.constructor.wordSize===u.wordSize&&Array.isArray(r.words)},u.max=function(r,s){return r.cmp(s)>0?r:s},u.min=function(r,s){return r.cmp(s)<0?r:s},u.prototype._init=function(r,s,l){if("number"==typeof r)return this._initNumber(r,s,l);if("object"==typeof r)return this._initArray(r,s,l);"hex"===s&&(s=16),m(s===(0|s)&&s>=2&&s<=36);var a=0;"-"===(r=r.toString().replace(/\s+/g,""))[0]&&(a++,this.negative=1),a<r.length&&(16===s?this._parseHex(r,a,l):(this._parseBase(r,s,a),"le"===l&&this._initArray(this.toArray(),s,l)))},u.prototype._initNumber=function(r,s,l){r<0&&(this.negative=1,r=-r),r<67108864?(this.words=[67108863&r],this.length=1):r<4503599627370496?(this.words=[67108863&r,r/67108864&67108863],this.length=2):(m(r<9007199254740992),this.words=[67108863&r,r/67108864&67108863,1],this.length=3),"le"===l&&this._initArray(this.toArray(),s,l)},u.prototype._initArray=function(r,s,l){if(m("number"==typeof r.length),r.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(r.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var f,_,D=0;if("be"===l)for(a=r.length-1,f=0;a>=0;a-=3)this.words[f]|=(_=r[a]|r[a-1]<<8|r[a-2]<<16)<<D&67108863,this.words[f+1]=_>>>26-D&67108863,(D+=24)>=26&&(D-=26,f++);else if("le"===l)for(a=0,f=0;a<r.length;a+=3)this.words[f]|=(_=r[a]|r[a+1]<<8|r[a+2]<<16)<<D&67108863,this.words[f+1]=_>>>26-D&67108863,(D+=24)>=26&&(D-=26,f++);return this.strip()},u.prototype._parseHex=function(r,s,l){this.length=Math.ceil((r.length-s)/6),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var D,f=0,_=0;if("be"===l)for(a=r.length-1;a>=s;a-=2)D=A(r,s,a)<<f,this.words[_]|=67108863&D,f>=18?(f-=18,this.words[_+=1]|=D>>>26):f+=8;else for(a=(r.length-s)%2==0?s+1:s;a<r.length;a+=2)D=A(r,s,a)<<f,this.words[_]|=67108863&D,f>=18?(f-=18,this.words[_+=1]|=D>>>26):f+=8;this.strip()},u.prototype._parseBase=function(r,s,l){this.words=[0],this.length=1;for(var a=0,f=1;f<=67108863;f*=s)a++;a--,f=f/s|0;for(var _=r.length-l,D=_%a,d=Math.min(_,_-D)+l,i=0,y=l;y<d;y+=a)i=T(r,y,y+a,s),this.imuln(f),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i);if(0!==D){var z=1;for(i=T(r,y,r.length,s),y=0;y<D;y++)z*=s;this.imuln(z),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i)}this.strip()},u.prototype.copy=function(r){r.words=new Array(this.length);for(var s=0;s<this.length;s++)r.words[s]=this.words[s];r.length=this.length,r.negative=this.negative,r.red=this.red},u.prototype.clone=function(){var r=new u(null);return this.copy(r),r},u.prototype._expand=function(r){for(;this.length<r;)this.words[this.length++]=0;return this},u.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},u.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},u.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],C=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function w(x,r,s){s.negative=r.negative^x.negative;var l=x.length+r.length|0;s.length=l,l=l-1|0;var a=0|x.words[0],f=0|r.words[0],_=a*f,d=_/67108864|0;s.words[0]=67108863&_;for(var i=1;i<l;i++){for(var y=d>>>26,z=67108863&d,q=Math.min(i,r.length-1),Z=Math.max(0,i-x.length+1);Z<=q;Z++)y+=(_=(a=0|x.words[i-Z|0])*(f=0|r.words[Z])+z)/67108864|0,z=67108863&_;s.words[i]=0|z,d=0|y}return 0!==d?s.words[i]=0|d:s.length--,s.strip()}u.prototype.toString=function(r,s){var l;if(s=0|s||1,16===(r=r||10)||"hex"===r){l="";for(var a=0,f=0,_=0;_<this.length;_++){var D=this.words[_],d=(16777215&(D<<a|f)).toString(16);l=0!=(f=D>>>24-a&16777215)||_!==this.length-1?g[6-d.length]+d+l:d+l,(a+=2)>=26&&(a-=26,_--)}for(0!==f&&(l=f.toString(16)+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}if(r===(0|r)&&r>=2&&r<=36){var i=h[r],y=C[r];l="";var z=this.clone();for(z.negative=0;!z.isZero();){var q=z.modn(y).toString(r);l=(z=z.idivn(y)).isZero()?q+l:g[i-q.length]+q+l}for(this.isZero()&&(l="0"+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}m(!1,"Base should be between 2 and 36")},u.prototype.toNumber=function(){var r=this.words[0];return 2===this.length?r+=67108864*this.words[1]:3===this.length&&1===this.words[2]?r+=4503599627370496+67108864*this.words[1]:this.length>2&&m(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-r:r},u.prototype.toJSON=function(){return this.toString(16)},u.prototype.toBuffer=function(r,s){return m(void 0!==v),this.toArrayLike(v,r,s)},u.prototype.toArray=function(r,s){return this.toArrayLike(Array,r,s)},u.prototype.toArrayLike=function(r,s,l){var a=this.byteLength(),f=l||Math.max(1,a);m(a<=f,"byte array longer than desired length"),m(f>0,"Requested array length <= 0"),this.strip();var d,i,_="le"===s,D=new r(f),y=this.clone();if(_){for(i=0;!y.isZero();i++)d=y.andln(255),y.iushrn(8),D[i]=d;for(;i<f;i++)D[i]=0}else{for(i=0;i<f-a;i++)D[i]=0;for(i=0;!y.isZero();i++)d=y.andln(255),y.iushrn(8),D[f-i-1]=d}return D},u.prototype._countBits=Math.clz32?function(r){return 32-Math.clz32(r)}:function(r){var s=r,l=0;return s>=4096&&(l+=13,s>>>=13),s>=64&&(l+=7,s>>>=7),s>=8&&(l+=4,s>>>=4),s>=2&&(l+=2,s>>>=2),l+s},u.prototype._zeroBits=function(r){if(0===r)return 26;var s=r,l=0;return 0==(8191&s)&&(l+=13,s>>>=13),0==(127&s)&&(l+=7,s>>>=7),0==(15&s)&&(l+=4,s>>>=4),0==(3&s)&&(l+=2,s>>>=2),0==(1&s)&&l++,l},u.prototype.bitLength=function(){var s=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+s},u.prototype.zeroBits=function(){if(this.isZero())return 0;for(var r=0,s=0;s<this.length;s++){var l=this._zeroBits(this.words[s]);if(r+=l,26!==l)break}return r},u.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},u.prototype.toTwos=function(r){return 0!==this.negative?this.abs().inotn(r).iaddn(1):this.clone()},u.prototype.fromTwos=function(r){return this.testn(r-1)?this.notn(r).iaddn(1).ineg():this.clone()},u.prototype.isNeg=function(){return 0!==this.negative},u.prototype.neg=function(){return this.clone().ineg()},u.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},u.prototype.iuor=function(r){for(;this.length<r.length;)this.words[this.length++]=0;for(var s=0;s<r.length;s++)this.words[s]=this.words[s]|r.words[s];return this.strip()},u.prototype.ior=function(r){return m(0==(this.negative|r.negative)),this.iuor(r)},u.prototype.or=function(r){return this.length>r.length?this.clone().ior(r):r.clone().ior(this)},u.prototype.uor=function(r){return this.length>r.length?this.clone().iuor(r):r.clone().iuor(this)},u.prototype.iuand=function(r){var s;s=this.length>r.length?r:this;for(var l=0;l<s.length;l++)this.words[l]=this.words[l]&r.words[l];return this.length=s.length,this.strip()},u.prototype.iand=function(r){return m(0==(this.negative|r.negative)),this.iuand(r)},u.prototype.and=function(r){return this.length>r.length?this.clone().iand(r):r.clone().iand(this)},u.prototype.uand=function(r){return this.length>r.length?this.clone().iuand(r):r.clone().iuand(this)},u.prototype.iuxor=function(r){var s,l;this.length>r.length?(s=this,l=r):(s=r,l=this);for(var a=0;a<l.length;a++)this.words[a]=s.words[a]^l.words[a];if(this!==s)for(;a<s.length;a++)this.words[a]=s.words[a];return this.length=s.length,this.strip()},u.prototype.ixor=function(r){return m(0==(this.negative|r.negative)),this.iuxor(r)},u.prototype.xor=function(r){return this.length>r.length?this.clone().ixor(r):r.clone().ixor(this)},u.prototype.uxor=function(r){return this.length>r.length?this.clone().iuxor(r):r.clone().iuxor(this)},u.prototype.inotn=function(r){m("number"==typeof r&&r>=0);var s=0|Math.ceil(r/26),l=r%26;this._expand(s),l>0&&s--;for(var a=0;a<s;a++)this.words[a]=67108863&~this.words[a];return l>0&&(this.words[a]=~this.words[a]&67108863>>26-l),this.strip()},u.prototype.notn=function(r){return this.clone().inotn(r)},u.prototype.setn=function(r,s){m("number"==typeof r&&r>=0);var l=r/26|0,a=r%26;return this._expand(l+1),this.words[l]=s?this.words[l]|1<<a:this.words[l]&~(1<<a),this.strip()},u.prototype.iadd=function(r){var s,l,a;if(0!==this.negative&&0===r.negative)return this.negative=0,s=this.isub(r),this.negative^=1,this._normSign();if(0===this.negative&&0!==r.negative)return r.negative=0,s=this.isub(r),r.negative=1,s._normSign();this.length>r.length?(l=this,a=r):(l=r,a=this);for(var f=0,_=0;_<a.length;_++)this.words[_]=67108863&(s=(0|l.words[_])+(0|a.words[_])+f),f=s>>>26;for(;0!==f&&_<l.length;_++)this.words[_]=67108863&(s=(0|l.words[_])+f),f=s>>>26;if(this.length=l.length,0!==f)this.words[this.length]=f,this.length++;else if(l!==this)for(;_<l.length;_++)this.words[_]=l.words[_];return this},u.prototype.add=function(r){var s;return 0!==r.negative&&0===this.negative?(r.negative=0,s=this.sub(r),r.negative^=1,s):0===r.negative&&0!==this.negative?(this.negative=0,s=r.sub(this),this.negative=1,s):this.length>r.length?this.clone().iadd(r):r.clone().iadd(this)},u.prototype.isub=function(r){if(0!==r.negative){r.negative=0;var s=this.iadd(r);return r.negative=1,s._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(r),this.negative=1,this._normSign();var a,f,l=this.cmp(r);if(0===l)return this.negative=0,this.length=1,this.words[0]=0,this;l>0?(a=this,f=r):(a=r,f=this);for(var _=0,D=0;D<f.length;D++)_=(s=(0|a.words[D])-(0|f.words[D])+_)>>26,this.words[D]=67108863&s;for(;0!==_&&D<a.length;D++)_=(s=(0|a.words[D])+_)>>26,this.words[D]=67108863&s;if(0===_&&D<a.length&&a!==this)for(;D<a.length;D++)this.words[D]=a.words[D];return this.length=Math.max(this.length,D),a!==this&&(this.negative=1),this.strip()},u.prototype.sub=function(r){return this.clone().isub(r)};var I=function(r,s,l){var d,i,y,a=r.words,f=s.words,_=l.words,D=0,z=0|a[0],q=8191&z,Z=z>>>13,ge=0|a[1],me=8191&ge,le=ge>>>13,fe=0|a[2],ae=8191&fe,de=fe>>>13,xe=0|a[3],Ce=8191&xe,oe=xe>>>13,we=0|a[4],ye=8191&we,re=we>>>13,ee=0|a[5],J=8191&ee,ue=ee>>>13,Ae=0|a[6],Te=8191&Ae,Ee=Ae>>>13,We=0|a[7],Ne=8191&We,_e=We>>>13,Be=0|a[8],De=8191&Be,Le=Be>>>13,Mt=0|a[9],He=8191&Mt,$e=Mt>>>13,It=0|f[0],et=8191&It,pt=It>>>13,Ct=0|f[1],at=8191&Ct,it=Ct>>>13,Mn=0|f[2],ot=8191&Mn,Ke=Mn>>>13,In=0|f[3],Ge=8191&In,ut=In>>>13,On=0|f[4],nt=8191&On,Ve=On>>>13,kt=0|f[5],ft=8191&kt,st=kt>>>13,qn=0|f[6],ct=8191&qn,ze=qn>>>13,an=0|f[7],dt=8191&an,Xe=an>>>13,Yt=0|f[8],Ye=8191&Yt,Qe=Yt>>>13,kn=0|f[9],Ze=8191&kn,lt=kn>>>13;l.negative=r.negative^s.negative,l.length=19;var ln=(D+(d=Math.imul(q,et))|0)+((8191&(i=(i=Math.imul(q,pt))+Math.imul(Z,et)|0))<<13)|0;D=((y=Math.imul(Z,pt))+(i>>>13)|0)+(ln>>>26)|0,ln&=67108863,d=Math.imul(me,et),i=(i=Math.imul(me,pt))+Math.imul(le,et)|0,y=Math.imul(le,pt);var jt=(D+(d=d+Math.imul(q,at)|0)|0)+((8191&(i=(i=i+Math.imul(q,it)|0)+Math.imul(Z,at)|0))<<13)|0;D=((y=y+Math.imul(Z,it)|0)+(i>>>13)|0)+(jt>>>26)|0,jt&=67108863,d=Math.imul(ae,et),i=(i=Math.imul(ae,pt))+Math.imul(de,et)|0,y=Math.imul(de,pt),d=d+Math.imul(me,at)|0,i=(i=i+Math.imul(me,it)|0)+Math.imul(le,at)|0,y=y+Math.imul(le,it)|0;var qt=(D+(d=d+Math.imul(q,ot)|0)|0)+((8191&(i=(i=i+Math.imul(q,Ke)|0)+Math.imul(Z,ot)|0))<<13)|0;D=((y=y+Math.imul(Z,Ke)|0)+(i>>>13)|0)+(qt>>>26)|0,qt&=67108863,d=Math.imul(Ce,et),i=(i=Math.imul(Ce,pt))+Math.imul(oe,et)|0,y=Math.imul(oe,pt),d=d+Math.imul(ae,at)|0,i=(i=i+Math.imul(ae,it)|0)+Math.imul(de,at)|0,y=y+Math.imul(de,it)|0,d=d+Math.imul(me,ot)|0,i=(i=i+Math.imul(me,Ke)|0)+Math.imul(le,ot)|0,y=y+Math.imul(le,Ke)|0;var wn=(D+(d=d+Math.imul(q,Ge)|0)|0)+((8191&(i=(i=i+Math.imul(q,ut)|0)+Math.imul(Z,Ge)|0))<<13)|0;D=((y=y+Math.imul(Z,ut)|0)+(i>>>13)|0)+(wn>>>26)|0,wn&=67108863,d=Math.imul(ye,et),i=(i=Math.imul(ye,pt))+Math.imul(re,et)|0,y=Math.imul(re,pt),d=d+Math.imul(Ce,at)|0,i=(i=i+Math.imul(Ce,it)|0)+Math.imul(oe,at)|0,y=y+Math.imul(oe,it)|0,d=d+Math.imul(ae,ot)|0,i=(i=i+Math.imul(ae,Ke)|0)+Math.imul(de,ot)|0,y=y+Math.imul(de,Ke)|0,d=d+Math.imul(me,Ge)|0,i=(i=i+Math.imul(me,ut)|0)+Math.imul(le,Ge)|0,y=y+Math.imul(le,ut)|0;var hn=(D+(d=d+Math.imul(q,nt)|0)|0)+((8191&(i=(i=i+Math.imul(q,Ve)|0)+Math.imul(Z,nt)|0))<<13)|0;D=((y=y+Math.imul(Z,Ve)|0)+(i>>>13)|0)+(hn>>>26)|0,hn&=67108863,d=Math.imul(J,et),i=(i=Math.imul(J,pt))+Math.imul(ue,et)|0,y=Math.imul(ue,pt),d=d+Math.imul(ye,at)|0,i=(i=i+Math.imul(ye,it)|0)+Math.imul(re,at)|0,y=y+Math.imul(re,it)|0,d=d+Math.imul(Ce,ot)|0,i=(i=i+Math.imul(Ce,Ke)|0)+Math.imul(oe,ot)|0,y=y+Math.imul(oe,Ke)|0,d=d+Math.imul(ae,Ge)|0,i=(i=i+Math.imul(ae,ut)|0)+Math.imul(de,Ge)|0,y=y+Math.imul(de,ut)|0,d=d+Math.imul(me,nt)|0,i=(i=i+Math.imul(me,Ve)|0)+Math.imul(le,nt)|0,y=y+Math.imul(le,Ve)|0;var gn=(D+(d=d+Math.imul(q,ft)|0)|0)+((8191&(i=(i=i+Math.imul(q,st)|0)+Math.imul(Z,ft)|0))<<13)|0;D=((y=y+Math.imul(Z,st)|0)+(i>>>13)|0)+(gn>>>26)|0,gn&=67108863,d=Math.imul(Te,et),i=(i=Math.imul(Te,pt))+Math.imul(Ee,et)|0,y=Math.imul(Ee,pt),d=d+Math.imul(J,at)|0,i=(i=i+Math.imul(J,it)|0)+Math.imul(ue,at)|0,y=y+Math.imul(ue,it)|0,d=d+Math.imul(ye,ot)|0,i=(i=i+Math.imul(ye,Ke)|0)+Math.imul(re,ot)|0,y=y+Math.imul(re,Ke)|0,d=d+Math.imul(Ce,Ge)|0,i=(i=i+Math.imul(Ce,ut)|0)+Math.imul(oe,Ge)|0,y=y+Math.imul(oe,ut)|0,d=d+Math.imul(ae,nt)|0,i=(i=i+Math.imul(ae,Ve)|0)+Math.imul(de,nt)|0,y=y+Math.imul(de,Ve)|0,d=d+Math.imul(me,ft)|0,i=(i=i+Math.imul(me,st)|0)+Math.imul(le,ft)|0,y=y+Math.imul(le,st)|0;var Rn=(D+(d=d+Math.imul(q,ct)|0)|0)+((8191&(i=(i=i+Math.imul(q,ze)|0)+Math.imul(Z,ct)|0))<<13)|0;D=((y=y+Math.imul(Z,ze)|0)+(i>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,d=Math.imul(Ne,et),i=(i=Math.imul(Ne,pt))+Math.imul(_e,et)|0,y=Math.imul(_e,pt),d=d+Math.imul(Te,at)|0,i=(i=i+Math.imul(Te,it)|0)+Math.imul(Ee,at)|0,y=y+Math.imul(Ee,it)|0,d=d+Math.imul(J,ot)|0,i=(i=i+Math.imul(J,Ke)|0)+Math.imul(ue,ot)|0,y=y+Math.imul(ue,Ke)|0,d=d+Math.imul(ye,Ge)|0,i=(i=i+Math.imul(ye,ut)|0)+Math.imul(re,Ge)|0,y=y+Math.imul(re,ut)|0,d=d+Math.imul(Ce,nt)|0,i=(i=i+Math.imul(Ce,Ve)|0)+Math.imul(oe,nt)|0,y=y+Math.imul(oe,Ve)|0,d=d+Math.imul(ae,ft)|0,i=(i=i+Math.imul(ae,st)|0)+Math.imul(de,ft)|0,y=y+Math.imul(de,st)|0,d=d+Math.imul(me,ct)|0,i=(i=i+Math.imul(me,ze)|0)+Math.imul(le,ct)|0,y=y+Math.imul(le,ze)|0;var on=(D+(d=d+Math.imul(q,dt)|0)|0)+((8191&(i=(i=i+Math.imul(q,Xe)|0)+Math.imul(Z,dt)|0))<<13)|0;D=((y=y+Math.imul(Z,Xe)|0)+(i>>>13)|0)+(on>>>26)|0,on&=67108863,d=Math.imul(De,et),i=(i=Math.imul(De,pt))+Math.imul(Le,et)|0,y=Math.imul(Le,pt),d=d+Math.imul(Ne,at)|0,i=(i=i+Math.imul(Ne,it)|0)+Math.imul(_e,at)|0,y=y+Math.imul(_e,it)|0,d=d+Math.imul(Te,ot)|0,i=(i=i+Math.imul(Te,Ke)|0)+Math.imul(Ee,ot)|0,y=y+Math.imul(Ee,Ke)|0,d=d+Math.imul(J,Ge)|0,i=(i=i+Math.imul(J,ut)|0)+Math.imul(ue,Ge)|0,y=y+Math.imul(ue,ut)|0,d=d+Math.imul(ye,nt)|0,i=(i=i+Math.imul(ye,Ve)|0)+Math.imul(re,nt)|0,y=y+Math.imul(re,Ve)|0,d=d+Math.imul(Ce,ft)|0,i=(i=i+Math.imul(Ce,st)|0)+Math.imul(oe,ft)|0,y=y+Math.imul(oe,st)|0,d=d+Math.imul(ae,ct)|0,i=(i=i+Math.imul(ae,ze)|0)+Math.imul(de,ct)|0,y=y+Math.imul(de,ze)|0,d=d+Math.imul(me,dt)|0,i=(i=i+Math.imul(me,Xe)|0)+Math.imul(le,dt)|0,y=y+Math.imul(le,Xe)|0;var _n=(D+(d=d+Math.imul(q,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(q,Qe)|0)+Math.imul(Z,Ye)|0))<<13)|0;D=((y=y+Math.imul(Z,Qe)|0)+(i>>>13)|0)+(_n>>>26)|0,_n&=67108863,d=Math.imul(He,et),i=(i=Math.imul(He,pt))+Math.imul($e,et)|0,y=Math.imul($e,pt),d=d+Math.imul(De,at)|0,i=(i=i+Math.imul(De,it)|0)+Math.imul(Le,at)|0,y=y+Math.imul(Le,it)|0,d=d+Math.imul(Ne,ot)|0,i=(i=i+Math.imul(Ne,Ke)|0)+Math.imul(_e,ot)|0,y=y+Math.imul(_e,Ke)|0,d=d+Math.imul(Te,Ge)|0,i=(i=i+Math.imul(Te,ut)|0)+Math.imul(Ee,Ge)|0,y=y+Math.imul(Ee,ut)|0,d=d+Math.imul(J,nt)|0,i=(i=i+Math.imul(J,Ve)|0)+Math.imul(ue,nt)|0,y=y+Math.imul(ue,Ve)|0,d=d+Math.imul(ye,ft)|0,i=(i=i+Math.imul(ye,st)|0)+Math.imul(re,ft)|0,y=y+Math.imul(re,st)|0,d=d+Math.imul(Ce,ct)|0,i=(i=i+Math.imul(Ce,ze)|0)+Math.imul(oe,ct)|0,y=y+Math.imul(oe,ze)|0,d=d+Math.imul(ae,dt)|0,i=(i=i+Math.imul(ae,Xe)|0)+Math.imul(de,dt)|0,y=y+Math.imul(de,Xe)|0,d=d+Math.imul(me,Ye)|0,i=(i=i+Math.imul(me,Qe)|0)+Math.imul(le,Ye)|0,y=y+Math.imul(le,Qe)|0;var Jt=(D+(d=d+Math.imul(q,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(q,lt)|0)+Math.imul(Z,Ze)|0))<<13)|0;D=((y=y+Math.imul(Z,lt)|0)+(i>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,d=Math.imul(He,at),i=(i=Math.imul(He,it))+Math.imul($e,at)|0,y=Math.imul($e,it),d=d+Math.imul(De,ot)|0,i=(i=i+Math.imul(De,Ke)|0)+Math.imul(Le,ot)|0,y=y+Math.imul(Le,Ke)|0,d=d+Math.imul(Ne,Ge)|0,i=(i=i+Math.imul(Ne,ut)|0)+Math.imul(_e,Ge)|0,y=y+Math.imul(_e,ut)|0,d=d+Math.imul(Te,nt)|0,i=(i=i+Math.imul(Te,Ve)|0)+Math.imul(Ee,nt)|0,y=y+Math.imul(Ee,Ve)|0,d=d+Math.imul(J,ft)|0,i=(i=i+Math.imul(J,st)|0)+Math.imul(ue,ft)|0,y=y+Math.imul(ue,st)|0,d=d+Math.imul(ye,ct)|0,i=(i=i+Math.imul(ye,ze)|0)+Math.imul(re,ct)|0,y=y+Math.imul(re,ze)|0,d=d+Math.imul(Ce,dt)|0,i=(i=i+Math.imul(Ce,Xe)|0)+Math.imul(oe,dt)|0,y=y+Math.imul(oe,Xe)|0,d=d+Math.imul(ae,Ye)|0,i=(i=i+Math.imul(ae,Qe)|0)+Math.imul(de,Ye)|0,y=y+Math.imul(de,Qe)|0;var Ft=(D+(d=d+Math.imul(me,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(me,lt)|0)+Math.imul(le,Ze)|0))<<13)|0;D=((y=y+Math.imul(le,lt)|0)+(i>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,d=Math.imul(He,ot),i=(i=Math.imul(He,Ke))+Math.imul($e,ot)|0,y=Math.imul($e,Ke),d=d+Math.imul(De,Ge)|0,i=(i=i+Math.imul(De,ut)|0)+Math.imul(Le,Ge)|0,y=y+Math.imul(Le,ut)|0,d=d+Math.imul(Ne,nt)|0,i=(i=i+Math.imul(Ne,Ve)|0)+Math.imul(_e,nt)|0,y=y+Math.imul(_e,Ve)|0,d=d+Math.imul(Te,ft)|0,i=(i=i+Math.imul(Te,st)|0)+Math.imul(Ee,ft)|0,y=y+Math.imul(Ee,st)|0,d=d+Math.imul(J,ct)|0,i=(i=i+Math.imul(J,ze)|0)+Math.imul(ue,ct)|0,y=y+Math.imul(ue,ze)|0,d=d+Math.imul(ye,dt)|0,i=(i=i+Math.imul(ye,Xe)|0)+Math.imul(re,dt)|0,y=y+Math.imul(re,Xe)|0,d=d+Math.imul(Ce,Ye)|0,i=(i=i+Math.imul(Ce,Qe)|0)+Math.imul(oe,Ye)|0,y=y+Math.imul(oe,Qe)|0;var An=(D+(d=d+Math.imul(ae,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(ae,lt)|0)+Math.imul(de,Ze)|0))<<13)|0;D=((y=y+Math.imul(de,lt)|0)+(i>>>13)|0)+(An>>>26)|0,An&=67108863,d=Math.imul(He,Ge),i=(i=Math.imul(He,ut))+Math.imul($e,Ge)|0,y=Math.imul($e,ut),d=d+Math.imul(De,nt)|0,i=(i=i+Math.imul(De,Ve)|0)+Math.imul(Le,nt)|0,y=y+Math.imul(Le,Ve)|0,d=d+Math.imul(Ne,ft)|0,i=(i=i+Math.imul(Ne,st)|0)+Math.imul(_e,ft)|0,y=y+Math.imul(_e,st)|0,d=d+Math.imul(Te,ct)|0,i=(i=i+Math.imul(Te,ze)|0)+Math.imul(Ee,ct)|0,y=y+Math.imul(Ee,ze)|0,d=d+Math.imul(J,dt)|0,i=(i=i+Math.imul(J,Xe)|0)+Math.imul(ue,dt)|0,y=y+Math.imul(ue,Xe)|0,d=d+Math.imul(ye,Ye)|0,i=(i=i+Math.imul(ye,Qe)|0)+Math.imul(re,Ye)|0,y=y+Math.imul(re,Qe)|0;var Cn=(D+(d=d+Math.imul(Ce,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(Ce,lt)|0)+Math.imul(oe,Ze)|0))<<13)|0;D=((y=y+Math.imul(oe,lt)|0)+(i>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,d=Math.imul(He,nt),i=(i=Math.imul(He,Ve))+Math.imul($e,nt)|0,y=Math.imul($e,Ve),d=d+Math.imul(De,ft)|0,i=(i=i+Math.imul(De,st)|0)+Math.imul(Le,ft)|0,y=y+Math.imul(Le,st)|0,d=d+Math.imul(Ne,ct)|0,i=(i=i+Math.imul(Ne,ze)|0)+Math.imul(_e,ct)|0,y=y+Math.imul(_e,ze)|0,d=d+Math.imul(Te,dt)|0,i=(i=i+Math.imul(Te,Xe)|0)+Math.imul(Ee,dt)|0,y=y+Math.imul(Ee,Xe)|0,d=d+Math.imul(J,Ye)|0,i=(i=i+Math.imul(J,Qe)|0)+Math.imul(ue,Ye)|0,y=y+Math.imul(ue,Qe)|0;var Sn=(D+(d=d+Math.imul(ye,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(ye,lt)|0)+Math.imul(re,Ze)|0))<<13)|0;D=((y=y+Math.imul(re,lt)|0)+(i>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,d=Math.imul(He,ft),i=(i=Math.imul(He,st))+Math.imul($e,ft)|0,y=Math.imul($e,st),d=d+Math.imul(De,ct)|0,i=(i=i+Math.imul(De,ze)|0)+Math.imul(Le,ct)|0,y=y+Math.imul(Le,ze)|0,d=d+Math.imul(Ne,dt)|0,i=(i=i+Math.imul(Ne,Xe)|0)+Math.imul(_e,dt)|0,y=y+Math.imul(_e,Xe)|0,d=d+Math.imul(Te,Ye)|0,i=(i=i+Math.imul(Te,Qe)|0)+Math.imul(Ee,Ye)|0,y=y+Math.imul(Ee,Qe)|0;var Rt=(D+(d=d+Math.imul(J,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(J,lt)|0)+Math.imul(ue,Ze)|0))<<13)|0;D=((y=y+Math.imul(ue,lt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,d=Math.imul(He,ct),i=(i=Math.imul(He,ze))+Math.imul($e,ct)|0,y=Math.imul($e,ze),d=d+Math.imul(De,dt)|0,i=(i=i+Math.imul(De,Xe)|0)+Math.imul(Le,dt)|0,y=y+Math.imul(Le,Xe)|0,d=d+Math.imul(Ne,Ye)|0,i=(i=i+Math.imul(Ne,Qe)|0)+Math.imul(_e,Ye)|0,y=y+Math.imul(_e,Qe)|0;var Dn=(D+(d=d+Math.imul(Te,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(Te,lt)|0)+Math.imul(Ee,Ze)|0))<<13)|0;D=((y=y+Math.imul(Ee,lt)|0)+(i>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,d=Math.imul(He,dt),i=(i=Math.imul(He,Xe))+Math.imul($e,dt)|0,y=Math.imul($e,Xe),d=d+Math.imul(De,Ye)|0,i=(i=i+Math.imul(De,Qe)|0)+Math.imul(Le,Ye)|0,y=y+Math.imul(Le,Qe)|0;var Qt=(D+(d=d+Math.imul(Ne,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(Ne,lt)|0)+Math.imul(_e,Ze)|0))<<13)|0;D=((y=y+Math.imul(_e,lt)|0)+(i>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,d=Math.imul(He,Ye),i=(i=Math.imul(He,Qe))+Math.imul($e,Ye)|0,y=Math.imul($e,Qe);var nn=(D+(d=d+Math.imul(De,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(De,lt)|0)+Math.imul(Le,Ze)|0))<<13)|0;D=((y=y+Math.imul(Le,lt)|0)+(i>>>13)|0)+(nn>>>26)|0,nn&=67108863;var En=(D+(d=Math.imul(He,Ze))|0)+((8191&(i=(i=Math.imul(He,lt))+Math.imul($e,Ze)|0))<<13)|0;return D=((y=Math.imul($e,lt))+(i>>>13)|0)+(En>>>26)|0,En&=67108863,_[0]=ln,_[1]=jt,_[2]=qt,_[3]=wn,_[4]=hn,_[5]=gn,_[6]=Rn,_[7]=on,_[8]=_n,_[9]=Jt,_[10]=Ft,_[11]=An,_[12]=Cn,_[13]=Sn,_[14]=Rt,_[15]=Dn,_[16]=Qt,_[17]=nn,_[18]=En,0!==D&&(_[19]=D,l.length++),l};function k(x,r,s){return(new O).mulp(x,r,s)}function O(x,r){this.x=x,this.y=r}Math.imul||(I=w),u.prototype.mulTo=function(r,s){var a=this.length+r.length;return 10===this.length&&10===r.length?I(this,r,s):a<63?w(this,r,s):a<1024?function(x,r,s){s.negative=r.negative^x.negative,s.length=x.length+r.length;for(var l=0,a=0,f=0;f<s.length-1;f++){var _=a;a=0;for(var D=67108863&l,d=Math.min(f,r.length-1),i=Math.max(0,f-x.length+1);i<=d;i++){var Z=(0|x.words[f-i])*(0|r.words[i]),ge=67108863&Z;D=67108863&(ge=ge+D|0),a+=(_=(_=_+(Z/67108864|0)|0)+(ge>>>26)|0)>>>26,_&=67108863}s.words[f]=D,l=_,_=a}return 0!==l?s.words[f]=l:s.length--,s.strip()}(this,r,s):k(this,r,s)},O.prototype.makeRBT=function(r){for(var s=new Array(r),l=u.prototype._countBits(r)-1,a=0;a<r;a++)s[a]=this.revBin(a,l,r);return s},O.prototype.revBin=function(r,s,l){if(0===r||r===l-1)return r;for(var a=0,f=0;f<s;f++)a|=(1&r)<<s-f-1,r>>=1;return a},O.prototype.permute=function(r,s,l,a,f,_){for(var D=0;D<_;D++)a[D]=s[r[D]],f[D]=l[r[D]]},O.prototype.transform=function(r,s,l,a,f,_){this.permute(_,r,s,l,a,f);for(var D=1;D<f;D<<=1)for(var d=D<<1,i=Math.cos(2*Math.PI/d),y=Math.sin(2*Math.PI/d),z=0;z<f;z+=d)for(var q=i,Z=y,ge=0;ge<D;ge++){var me=l[z+ge],le=a[z+ge],fe=l[z+ge+D],ae=a[z+ge+D],de=q*fe-Z*ae;ae=q*ae+Z*fe,l[z+ge]=me+(fe=de),a[z+ge]=le+ae,l[z+ge+D]=me-fe,a[z+ge+D]=le-ae,ge!==d&&(de=i*q-y*Z,Z=i*Z+y*q,q=de)}},O.prototype.guessLen13b=function(r,s){var l=1|Math.max(s,r),a=1&l,f=0;for(l=l/2|0;l;l>>>=1)f++;return 1<<f+1+a},O.prototype.conjugate=function(r,s,l){if(!(l<=1))for(var a=0;a<l/2;a++){var f=r[a];r[a]=r[l-a-1],r[l-a-1]=f,f=s[a],s[a]=-s[l-a-1],s[l-a-1]=-f}},O.prototype.normalize13b=function(r,s){for(var l=0,a=0;a<s/2;a++){var f=8192*Math.round(r[2*a+1]/s)+Math.round(r[2*a]/s)+l;r[a]=67108863&f,l=f<67108864?0:f/67108864|0}return r},O.prototype.convert13b=function(r,s,l,a){for(var f=0,_=0;_<s;_++)l[2*_]=8191&(f+=0|r[_]),l[2*_+1]=8191&(f>>>=13),f>>>=13;for(_=2*s;_<a;++_)l[_]=0;m(0===f),m(0==(-8192&f))},O.prototype.stub=function(r){for(var s=new Array(r),l=0;l<r;l++)s[l]=0;return s},O.prototype.mulp=function(r,s,l){var a=2*this.guessLen13b(r.length,s.length),f=this.makeRBT(a),_=this.stub(a),D=new Array(a),d=new Array(a),i=new Array(a),y=new Array(a),z=new Array(a),q=new Array(a),Z=l.words;Z.length=a,this.convert13b(r.words,r.length,D,a),this.convert13b(s.words,s.length,y,a),this.transform(D,_,d,i,a,f),this.transform(y,_,z,q,a,f);for(var ge=0;ge<a;ge++){var me=d[ge]*z[ge]-i[ge]*q[ge];i[ge]=d[ge]*q[ge]+i[ge]*z[ge],d[ge]=me}return this.conjugate(d,i,a),this.transform(d,i,Z,_,a,f),this.conjugate(Z,_,a),this.normalize13b(Z,a),l.negative=r.negative^s.negative,l.length=r.length+s.length,l.strip()},u.prototype.mul=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),this.mulTo(r,s)},u.prototype.mulf=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),k(this,r,s)},u.prototype.imul=function(r){return this.clone().mulTo(r,this)},u.prototype.imuln=function(r){m("number"==typeof r),m(r<67108864);for(var s=0,l=0;l<this.length;l++){var a=(0|this.words[l])*r,f=(67108863&a)+(67108863&s);s>>=26,s+=a/67108864|0,s+=f>>>26,this.words[l]=67108863&f}return 0!==s&&(this.words[l]=s,this.length++),this},u.prototype.muln=function(r){return this.clone().imuln(r)},u.prototype.sqr=function(){return this.mul(this)},u.prototype.isqr=function(){return this.imul(this.clone())},u.prototype.pow=function(r){var s=function(x){for(var r=new Array(x.bitLength()),s=0;s<r.length;s++){var a=s%26;r[s]=(x.words[s/26|0]&1<<a)>>>a}return r}(r);if(0===s.length)return new u(1);for(var l=this,a=0;a<s.length&&0===s[a];a++,l=l.sqr());if(++a<s.length)for(var f=l.sqr();a<s.length;a++,f=f.sqr())0!==s[a]&&(l=l.mul(f));return l},u.prototype.iushln=function(r){m("number"==typeof r&&r>=0);var f,s=r%26,l=(r-s)/26,a=67108863>>>26-s<<26-s;if(0!==s){var _=0;for(f=0;f<this.length;f++){var D=this.words[f]&a;this.words[f]=(0|this.words[f])-D<<s|_,_=D>>>26-s}_&&(this.words[f]=_,this.length++)}if(0!==l){for(f=this.length-1;f>=0;f--)this.words[f+l]=this.words[f];for(f=0;f<l;f++)this.words[f]=0;this.length+=l}return this.strip()},u.prototype.ishln=function(r){return m(0===this.negative),this.iushln(r)},u.prototype.iushrn=function(r,s,l){var a;m("number"==typeof r&&r>=0),a=s?(s-s%26)/26:0;var f=r%26,_=Math.min((r-f)/26,this.length),D=67108863^67108863>>>f<<f,d=l;if(a-=_,a=Math.max(0,a),d){for(var i=0;i<_;i++)d.words[i]=this.words[i];d.length=_}if(0!==_)if(this.length>_)for(this.length-=_,i=0;i<this.length;i++)this.words[i]=this.words[i+_];else this.words[0]=0,this.length=1;var y=0;for(i=this.length-1;i>=0&&(0!==y||i>=a);i--){var z=0|this.words[i];this.words[i]=y<<26-f|z>>>f,y=z&D}return d&&0!==y&&(d.words[d.length++]=y),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},u.prototype.ishrn=function(r,s,l){return m(0===this.negative),this.iushrn(r,s,l)},u.prototype.shln=function(r){return this.clone().ishln(r)},u.prototype.ushln=function(r){return this.clone().iushln(r)},u.prototype.shrn=function(r){return this.clone().ishrn(r)},u.prototype.ushrn=function(r){return this.clone().iushrn(r)},u.prototype.testn=function(r){m("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return!(this.length<=l||!(this.words[l]&1<<s))},u.prototype.imaskn=function(r){m("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return m(0===this.negative,"imaskn works only with positive numbers"),this.length<=l?this:(0!==s&&l++,this.length=Math.min(l,this.length),0!==s&&(this.words[this.length-1]&=67108863^67108863>>>s<<s),this.strip())},u.prototype.maskn=function(r){return this.clone().imaskn(r)},u.prototype.iaddn=function(r){return m("number"==typeof r),m(r<67108864),r<0?this.isubn(-r):0!==this.negative?1===this.length&&(0|this.words[0])<r?(this.words[0]=r-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(r),this.negative=1,this):this._iaddn(r)},u.prototype._iaddn=function(r){this.words[0]+=r;for(var s=0;s<this.length&&this.words[s]>=67108864;s++)this.words[s]-=67108864,s===this.length-1?this.words[s+1]=1:this.words[s+1]++;return this.length=Math.max(this.length,s+1),this},u.prototype.isubn=function(r){if(m("number"==typeof r),m(r<67108864),r<0)return this.iaddn(-r);if(0!==this.negative)return this.negative=0,this.iaddn(r),this.negative=1,this;if(this.words[0]-=r,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var s=0;s<this.length&&this.words[s]<0;s++)this.words[s]+=67108864,this.words[s+1]-=1;return this.strip()},u.prototype.addn=function(r){return this.clone().iaddn(r)},u.prototype.subn=function(r){return this.clone().isubn(r)},u.prototype.iabs=function(){return this.negative=0,this},u.prototype.abs=function(){return this.clone().iabs()},u.prototype._ishlnsubmul=function(r,s,l){var f;this._expand(r.length+l);var _,D=0;for(f=0;f<r.length;f++){_=(0|this.words[f+l])+D;var d=(0|r.words[f])*s;D=((_-=67108863&d)>>26)-(d/67108864|0),this.words[f+l]=67108863&_}for(;f<this.length-l;f++)D=(_=(0|this.words[f+l])+D)>>26,this.words[f+l]=67108863&_;if(0===D)return this.strip();for(m(-1===D),D=0,f=0;f<this.length;f++)D=(_=-(0|this.words[f])+D)>>26,this.words[f]=67108863&_;return this.negative=1,this.strip()},u.prototype._wordDiv=function(r,s){var l,a=this.clone(),f=r,_=0|f.words[f.length-1];0!=(l=26-this._countBits(_))&&(f=f.ushln(l),a.iushln(l),_=0|f.words[f.length-1]);var i,d=a.length-f.length;if("mod"!==s){(i=new u(null)).length=d+1,i.words=new Array(i.length);for(var y=0;y<i.length;y++)i.words[y]=0}var z=a.clone()._ishlnsubmul(f,1,d);0===z.negative&&(a=z,i&&(i.words[d]=1));for(var q=d-1;q>=0;q--){var Z=67108864*(0|a.words[f.length+q])+(0|a.words[f.length+q-1]);for(Z=Math.min(Z/_|0,67108863),a._ishlnsubmul(f,Z,q);0!==a.negative;)Z--,a.negative=0,a._ishlnsubmul(f,1,q),a.isZero()||(a.negative^=1);i&&(i.words[q]=Z)}return i&&i.strip(),a.strip(),"div"!==s&&0!==l&&a.iushrn(l),{div:i||null,mod:a}},u.prototype.divmod=function(r,s,l){return m(!r.isZero()),this.isZero()?{div:new u(0),mod:new u(0)}:0!==this.negative&&0===r.negative?(_=this.neg().divmod(r,s),"mod"!==s&&(a=_.div.neg()),"div"!==s&&(f=_.mod.neg(),l&&0!==f.negative&&f.iadd(r)),{div:a,mod:f}):0===this.negative&&0!==r.negative?(_=this.divmod(r.neg(),s),"mod"!==s&&(a=_.div.neg()),{div:a,mod:_.mod}):0!=(this.negative&r.negative)?(_=this.neg().divmod(r.neg(),s),"div"!==s&&(f=_.mod.neg(),l&&0!==f.negative&&f.isub(r)),{div:_.div,mod:f}):r.length>this.length||this.cmp(r)<0?{div:new u(0),mod:this}:1===r.length?"div"===s?{div:this.divn(r.words[0]),mod:null}:"mod"===s?{div:null,mod:new u(this.modn(r.words[0]))}:{div:this.divn(r.words[0]),mod:new u(this.modn(r.words[0]))}:this._wordDiv(r,s);var a,f,_},u.prototype.div=function(r){return this.divmod(r,"div",!1).div},u.prototype.mod=function(r){return this.divmod(r,"mod",!1).mod},u.prototype.umod=function(r){return this.divmod(r,"mod",!0).mod},u.prototype.divRound=function(r){var s=this.divmod(r);if(s.mod.isZero())return s.div;var l=0!==s.div.negative?s.mod.isub(r):s.mod,a=r.ushrn(1),f=r.andln(1),_=l.cmp(a);return _<0||1===f&&0===_?s.div:0!==s.div.negative?s.div.isubn(1):s.div.iaddn(1)},u.prototype.modn=function(r){m(r<=67108863);for(var s=(1<<26)%r,l=0,a=this.length-1;a>=0;a--)l=(s*l+(0|this.words[a]))%r;return l},u.prototype.idivn=function(r){m(r<=67108863);for(var s=0,l=this.length-1;l>=0;l--){var a=(0|this.words[l])+67108864*s;this.words[l]=a/r|0,s=a%r}return this.strip()},u.prototype.divn=function(r){return this.clone().idivn(r)},u.prototype.egcd=function(r){m(0===r.negative),m(!r.isZero());var s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),_=new u(0),D=new u(1),d=0;s.isEven()&&l.isEven();)s.iushrn(1),l.iushrn(1),++d;for(var i=l.clone(),y=s.clone();!s.isZero();){for(var z=0,q=1;0==(s.words[0]&q)&&z<26;++z,q<<=1);if(z>0)for(s.iushrn(z);z-- >0;)(a.isOdd()||f.isOdd())&&(a.iadd(i),f.isub(y)),a.iushrn(1),f.iushrn(1);for(var Z=0,ge=1;0==(l.words[0]&ge)&&Z<26;++Z,ge<<=1);if(Z>0)for(l.iushrn(Z);Z-- >0;)(_.isOdd()||D.isOdd())&&(_.iadd(i),D.isub(y)),_.iushrn(1),D.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(_),f.isub(D)):(l.isub(s),_.isub(a),D.isub(f))}return{a:_,b:D,gcd:l.iushln(d)}},u.prototype._invmp=function(r){m(0===r.negative),m(!r.isZero());var z,s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),_=l.clone();s.cmpn(1)>0&&l.cmpn(1)>0;){for(var D=0,d=1;0==(s.words[0]&d)&&D<26;++D,d<<=1);if(D>0)for(s.iushrn(D);D-- >0;)a.isOdd()&&a.iadd(_),a.iushrn(1);for(var i=0,y=1;0==(l.words[0]&y)&&i<26;++i,y<<=1);if(i>0)for(l.iushrn(i);i-- >0;)f.isOdd()&&f.iadd(_),f.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(f)):(l.isub(s),f.isub(a))}return(z=0===s.cmpn(1)?a:f).cmpn(0)<0&&z.iadd(r),z},u.prototype.gcd=function(r){if(this.isZero())return r.abs();if(r.isZero())return this.abs();var s=this.clone(),l=r.clone();s.negative=0,l.negative=0;for(var a=0;s.isEven()&&l.isEven();a++)s.iushrn(1),l.iushrn(1);for(;;){for(;s.isEven();)s.iushrn(1);for(;l.isEven();)l.iushrn(1);var f=s.cmp(l);if(f<0){var _=s;s=l,l=_}else if(0===f||0===l.cmpn(1))break;s.isub(l)}return l.iushln(a)},u.prototype.invm=function(r){return this.egcd(r).a.umod(r)},u.prototype.isEven=function(){return 0==(1&this.words[0])},u.prototype.isOdd=function(){return 1==(1&this.words[0])},u.prototype.andln=function(r){return this.words[0]&r},u.prototype.bincn=function(r){m("number"==typeof r);var s=r%26,l=(r-s)/26,a=1<<s;if(this.length<=l)return this._expand(l+1),this.words[l]|=a,this;for(var f=a,_=l;0!==f&&_<this.length;_++){var D=0|this.words[_];f=(D+=f)>>>26,this.words[_]=D&=67108863}return 0!==f&&(this.words[_]=f,this.length++),this},u.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},u.prototype.cmpn=function(r){var l,s=r<0;if(0!==this.negative&&!s)return-1;if(0===this.negative&&s)return 1;if(this.strip(),this.length>1)l=1;else{s&&(r=-r),m(r<=67108863,"Number is too big");var a=0|this.words[0];l=a===r?0:a<r?-1:1}return 0!==this.negative?0|-l:l},u.prototype.cmp=function(r){if(0!==this.negative&&0===r.negative)return-1;if(0===this.negative&&0!==r.negative)return 1;var s=this.ucmp(r);return 0!==this.negative?0|-s:s},u.prototype.ucmp=function(r){if(this.length>r.length)return 1;if(this.length<r.length)return-1;for(var s=0,l=this.length-1;l>=0;l--){var a=0|this.words[l],f=0|r.words[l];if(a!==f){a<f?s=-1:a>f&&(s=1);break}}return s},u.prototype.gtn=function(r){return 1===this.cmpn(r)},u.prototype.gt=function(r){return 1===this.cmp(r)},u.prototype.gten=function(r){return this.cmpn(r)>=0},u.prototype.gte=function(r){return this.cmp(r)>=0},u.prototype.ltn=function(r){return-1===this.cmpn(r)},u.prototype.lt=function(r){return-1===this.cmp(r)},u.prototype.lten=function(r){return this.cmpn(r)<=0},u.prototype.lte=function(r){return this.cmp(r)<=0},u.prototype.eqn=function(r){return 0===this.cmpn(r)},u.prototype.eq=function(r){return 0===this.cmp(r)},u.red=function(r){return new $(r)},u.prototype.toRed=function(r){return m(!this.red,"Already a number in reduction context"),m(0===this.negative,"red works only with positives"),r.convertTo(this)._forceRed(r)},u.prototype.fromRed=function(){return m(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},u.prototype._forceRed=function(r){return this.red=r,this},u.prototype.forceRed=function(r){return m(!this.red,"Already a number in reduction context"),this._forceRed(r)},u.prototype.redAdd=function(r){return m(this.red,"redAdd works only with red numbers"),this.red.add(this,r)},u.prototype.redIAdd=function(r){return m(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,r)},u.prototype.redSub=function(r){return m(this.red,"redSub works only with red numbers"),this.red.sub(this,r)},u.prototype.redISub=function(r){return m(this.red,"redISub works only with red numbers"),this.red.isub(this,r)},u.prototype.redShl=function(r){return m(this.red,"redShl works only with red numbers"),this.red.shl(this,r)},u.prototype.redMul=function(r){return m(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.mul(this,r)},u.prototype.redIMul=function(r){return m(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.imul(this,r)},u.prototype.redSqr=function(){return m(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},u.prototype.redISqr=function(){return m(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},u.prototype.redSqrt=function(){return m(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},u.prototype.redInvm=function(){return m(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},u.prototype.redNeg=function(){return m(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},u.prototype.redPow=function(r){return m(this.red&&!r.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,r)};var V={k256:null,p224:null,p192:null,p25519:null};function U(x,r){this.name=x,this.p=new u(r,16),this.n=this.p.bitLength(),this.k=new u(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function B(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function H(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function W(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function te(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function $(x){if("string"==typeof x){var r=u._prime(x);this.m=r.p,this.prime=r}else m(x.gtn(1),"modulus must be greater than 1"),this.m=x,this.prime=null}function pe(x){$.call(this,x),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new u(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}U.prototype._tmp=function(){var r=new u(null);return r.words=new Array(Math.ceil(this.n/13)),r},U.prototype.ireduce=function(r){var l,s=r;do{this.split(s,this.tmp),l=(s=(s=this.imulK(s)).iadd(this.tmp)).bitLength()}while(l>this.n);var a=l<this.n?-1:s.ucmp(this.p);return 0===a?(s.words[0]=0,s.length=1):a>0?s.isub(this.p):void 0!==s.strip?s.strip():s._strip(),s},U.prototype.split=function(r,s){r.iushrn(this.n,0,s)},U.prototype.imulK=function(r){return r.imul(this.k)},R(B,U),B.prototype.split=function(r,s){for(var l=4194303,a=Math.min(r.length,9),f=0;f<a;f++)s.words[f]=r.words[f];if(s.length=a,r.length<=9)return r.words[0]=0,void(r.length=1);var _=r.words[9];for(s.words[s.length++]=_&l,f=10;f<r.length;f++){var D=0|r.words[f];r.words[f-10]=(D&l)<<4|_>>>22,_=D}r.words[f-10]=_>>>=22,r.length-=0===_&&r.length>10?10:9},B.prototype.imulK=function(r){r.words[r.length]=0,r.words[r.length+1]=0,r.length+=2;for(var s=0,l=0;l<r.length;l++){var a=0|r.words[l];r.words[l]=67108863&(s+=977*a),s=64*a+(s/67108864|0)}return 0===r.words[r.length-1]&&(r.length--,0===r.words[r.length-1]&&r.length--),r},R(H,U),R(W,U),R(te,U),te.prototype.imulK=function(r){for(var s=0,l=0;l<r.length;l++){var a=19*(0|r.words[l])+s,f=67108863&a;a>>>=26,r.words[l]=f,s=a}return 0!==s&&(r.words[r.length++]=s),r},u._prime=function(r){if(V[r])return V[r];var s;if("k256"===r)s=new B;else if("p224"===r)s=new H;else if("p192"===r)s=new W;else{if("p25519"!==r)throw new Error("Unknown prime "+r);s=new te}return V[r]=s,s},$.prototype._verify1=function(r){m(0===r.negative,"red works only with positives"),m(r.red,"red works only with red numbers")},$.prototype._verify2=function(r,s){m(0==(r.negative|s.negative),"red works only with positives"),m(r.red&&r.red===s.red,"red works only with red numbers")},$.prototype.imod=function(r){return this.prime?this.prime.ireduce(r)._forceRed(this):r.umod(this.m)._forceRed(this)},$.prototype.neg=function(r){return r.isZero()?r.clone():this.m.sub(r)._forceRed(this)},$.prototype.add=function(r,s){this._verify2(r,s);var l=r.add(s);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},$.prototype.iadd=function(r,s){this._verify2(r,s);var l=r.iadd(s);return l.cmp(this.m)>=0&&l.isub(this.m),l},$.prototype.sub=function(r,s){this._verify2(r,s);var l=r.sub(s);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},$.prototype.isub=function(r,s){this._verify2(r,s);var l=r.isub(s);return l.cmpn(0)<0&&l.iadd(this.m),l},$.prototype.shl=function(r,s){return this._verify1(r),this.imod(r.ushln(s))},$.prototype.imul=function(r,s){return this._verify2(r,s),this.imod(r.imul(s))},$.prototype.mul=function(r,s){return this._verify2(r,s),this.imod(r.mul(s))},$.prototype.isqr=function(r){return this.imul(r,r.clone())},$.prototype.sqr=function(r){return this.mul(r,r)},$.prototype.sqrt=function(r){if(r.isZero())return r.clone();var s=this.m.andln(3);if(m(s%2==1),3===s){var l=this.m.add(new u(1)).iushrn(2);return this.pow(r,l)}for(var a=this.m.subn(1),f=0;!a.isZero()&&0===a.andln(1);)f++,a.iushrn(1);m(!a.isZero());var _=new u(1).toRed(this),D=_.redNeg(),d=this.m.subn(1).iushrn(1),i=this.m.bitLength();for(i=new u(2*i*i).toRed(this);0!==this.pow(i,d).cmp(D);)i.redIAdd(D);for(var y=this.pow(i,a),z=this.pow(r,a.addn(1).iushrn(1)),q=this.pow(r,a),Z=f;0!==q.cmp(_);){for(var ge=q,me=0;0!==ge.cmp(_);me++)ge=ge.redSqr();m(me<Z);var le=this.pow(y,new u(1).iushln(Z-me-1));z=z.redMul(le),y=le.redSqr(),q=q.redMul(y),Z=me}return z},$.prototype.invm=function(r){var s=r._invmp(this.m);return 0!==s.negative?(s.negative=0,this.imod(s).redNeg()):this.imod(s)},$.prototype.pow=function(r,s){if(s.isZero())return new u(1).toRed(this);if(0===s.cmpn(1))return r.clone();var a=new Array(16);a[0]=new u(1).toRed(this),a[1]=r;for(var f=2;f<a.length;f++)a[f]=this.mul(a[f-1],r);var _=a[0],D=0,d=0,i=s.bitLength()%26;for(0===i&&(i=26),f=s.length-1;f>=0;f--){for(var y=s.words[f],z=i-1;z>=0;z--){var q=y>>z&1;_!==a[0]&&(_=this.sqr(_)),0!==q||0!==D?(D<<=1,D|=q,(4==++d||0===f&&0===z)&&(_=this.mul(_,a[D]),d=0,D=0)):d=0}i=26}return _},$.prototype.convertTo=function(r){var s=r.umod(this.m);return s===r?s.clone():s},$.prototype.convertFrom=function(r){var s=r.clone();return s.red=null,s},u.mont=function(r){return new pe(r)},R(pe,$),pe.prototype.convertTo=function(r){return this.imod(r.ushln(this.shift))},pe.prototype.convertFrom=function(r){var s=this.imod(r.mul(this.rinv));return s.red=null,s},pe.prototype.imul=function(r,s){if(r.isZero()||s.isZero())return r.words[0]=0,r.length=1,r;var l=r.imul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),_=f;return f.cmp(this.m)>=0?_=f.isub(this.m):f.cmpn(0)<0&&(_=f.iadd(this.m)),_._forceRed(this)},pe.prototype.mul=function(r,s){if(r.isZero()||s.isZero())return new u(0)._forceRed(this);var l=r.mul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),_=f;return f.cmp(this.m)>=0?_=f.isub(this.m):f.cmpn(0)<0&&(_=f.iadd(this.m)),_._forceRed(this)},pe.prototype.invm=function(r){return this.imod(r._invmp(this.m).mul(this.r2))._forceRed(this)}}(Y=E.nmd(Y),this)},5247:(Y,L,E)=>{"use strict";var p=L;p.version=E(8597).i8,p.utils=E(2946),p.rand=E(4761),p.curve=E(3868),p.curves=E(3346),p.ec=E(7237),p.eddsa=E(1615)},780:(Y,L,E)=>{"use strict";var p=E(4584),N=E(2946),m=N.getNAF,R=N.getJSF,u=N.assert;function v(A,T){this.type=A,this.p=new p(T.p,16),this.red=T.prime?p.red(T.prime):p.mont(this.p),this.zero=new p(0).toRed(this.red),this.one=new p(1).toRed(this.red),this.two=new p(2).toRed(this.red),this.n=T.n&&new p(T.n,16),this.g=T.g&&this.pointFromJSON(T.g,T.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var g=this.n&&this.p.div(this.n);!g||g.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function M(A,T){this.curve=A,this.type=T,this.precomputed=null}Y.exports=v,v.prototype.point=function(){throw new Error("Not implemented")},v.prototype.validate=function(){throw new Error("Not implemented")},v.prototype._fixedNafMul=function(T,g){u(T.precomputed);var h=T._getDoubles(),C=m(g,1,this._bitLength),b=(1<<h.step+1)-(h.step%2==0?2:1);b/=3;var I,P,w=[];for(I=0;I<C.length;I+=h.step){P=0;for(var k=I+h.step-1;k>=I;k--)P=(P<<1)+C[k];w.push(P)}for(var O=this.jpoint(null,null,null),V=this.jpoint(null,null,null),U=b;U>0;U--){for(I=0;I<w.length;I++)(P=w[I])===U?V=V.mixedAdd(h.points[I]):P===-U&&(V=V.mixedAdd(h.points[I].neg()));O=O.add(V)}return O.toP()},v.prototype._wnafMul=function(T,g){for(var h=4,C=T._getNAFPoints(h),b=C.points,w=m(g,h=C.wnd,this._bitLength),I=this.jpoint(null,null,null),P=w.length-1;P>=0;P--){for(var k=0;P>=0&&0===w[P];P--)k++;if(P>=0&&k++,I=I.dblp(k),P<0)break;var O=w[P];u(0!==O),I="affine"===T.type?I.mixedAdd(O>0?b[O-1>>1]:b[-O-1>>1].neg()):I.add(O>0?b[O-1>>1]:b[-O-1>>1].neg())}return"affine"===T.type?I.toP():I},v.prototype._wnafMulAdd=function(T,g,h,C,b){var O,V,U,w=this._wnafT1,I=this._wnafT2,P=this._wnafT3,k=0;for(O=0;O<C;O++){var B=(U=g[O])._getNAFPoints(T);w[O]=B.wnd,I[O]=B.points}for(O=C-1;O>=1;O-=2){var H=O-1,W=O;if(1===w[H]&&1===w[W]){var te=[g[H],null,null,g[W]];0===g[H].y.cmp(g[W].y)?(te[1]=g[H].add(g[W]),te[2]=g[H].toJ().mixedAdd(g[W].neg())):0===g[H].y.cmp(g[W].y.redNeg())?(te[1]=g[H].toJ().mixedAdd(g[W]),te[2]=g[H].add(g[W].neg())):(te[1]=g[H].toJ().mixedAdd(g[W]),te[2]=g[H].toJ().mixedAdd(g[W].neg()));var $=[-3,-1,-5,-7,0,7,5,1,3],pe=R(h[H],h[W]);for(k=Math.max(pe[0].length,k),P[H]=new Array(k),P[W]=new Array(k),V=0;V<k;V++)P[H][V]=$[3*(1+(0|pe[0][V]))+(1+(0|pe[1][V]))],P[W][V]=0,I[H]=te}else P[H]=m(h[H],w[H],this._bitLength),P[W]=m(h[W],w[W],this._bitLength),k=Math.max(P[H].length,k),k=Math.max(P[W].length,k)}var s=this.jpoint(null,null,null),l=this._wnafT4;for(O=k;O>=0;O--){for(var a=0;O>=0;){var f=!0;for(V=0;V<C;V++)l[V]=0|P[V][O],0!==l[V]&&(f=!1);if(!f)break;a++,O--}if(O>=0&&a++,s=s.dblp(a),O<0)break;for(V=0;V<C;V++){var _=l[V];0!==_&&(_>0?U=I[V][_-1>>1]:_<0&&(U=I[V][-_-1>>1].neg()),s="affine"===U.type?s.mixedAdd(U):s.add(U))}}for(O=0;O<C;O++)I[O]=null;return b?s:s.toP()},v.BasePoint=M,M.prototype.eq=function(){throw new Error("Not implemented")},M.prototype.validate=function(){return this.curve.validate(this)},v.prototype.decodePoint=function(T,g){T=N.toArray(T,g);var h=this.p.byteLength();if((4===T[0]||6===T[0]||7===T[0])&&T.length-1==2*h)return 6===T[0]?u(T[T.length-1]%2==0):7===T[0]&&u(T[T.length-1]%2==1),this.point(T.slice(1,1+h),T.slice(1+h,1+2*h));if((2===T[0]||3===T[0])&&T.length-1===h)return this.pointFromX(T.slice(1,1+h),3===T[0]);throw new Error("Unknown point format")},M.prototype.encodeCompressed=function(T){return this.encode(T,!0)},M.prototype._encode=function(T){var g=this.curve.p.byteLength(),h=this.getX().toArray("be",g);return T?[this.getY().isEven()?2:3].concat(h):[4].concat(h,this.getY().toArray("be",g))},M.prototype.encode=function(T,g){return N.encode(this._encode(g),T)},M.prototype.precompute=function(T){if(this.precomputed)return this;var g={doubles:null,naf:null,beta:null};return g.naf=this._getNAFPoints(8),g.doubles=this._getDoubles(4,T),g.beta=this._getBeta(),this.precomputed=g,this},M.prototype._hasDoubles=function(T){if(!this.precomputed)return!1;var g=this.precomputed.doubles;return!!g&&g.points.length>=Math.ceil((T.bitLength()+1)/g.step)},M.prototype._getDoubles=function(T,g){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var h=[this],C=this,b=0;b<g;b+=T){for(var w=0;w<T;w++)C=C.dbl();h.push(C)}return{step:T,points:h}},M.prototype._getNAFPoints=function(T){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var g=[this],h=(1<<T)-1,C=1===h?null:this.dbl(),b=1;b<h;b++)g[b]=g[b-1].add(C);return{wnd:T,points:g}},M.prototype._getBeta=function(){return null},M.prototype.dblp=function(T){for(var g=this,h=0;h<T;h++)g=g.dbl();return g}},6121:(Y,L,E)=>{"use strict";var p=E(2946),N=E(4584),m=E(9879),R=E(780),u=p.assert;function v(A){this.twisted=1!=(0|A.a),this.mOneA=this.twisted&&-1==(0|A.a),this.extended=this.mOneA,R.call(this,"edwards",A),this.a=new N(A.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new N(A.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new N(A.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),u(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|A.c)}function M(A,T,g,h,C){R.BasePoint.call(this,A,"projective"),null===T&&null===g&&null===h?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new N(T,16),this.y=new N(g,16),this.z=h?new N(h,16):this.curve.one,this.t=C&&new N(C,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}m(v,R),Y.exports=v,v.prototype._mulA=function(T){return this.mOneA?T.redNeg():this.a.redMul(T)},v.prototype._mulC=function(T){return this.oneC?T:this.c.redMul(T)},v.prototype.jpoint=function(T,g,h,C){return this.point(T,g,h,C)},v.prototype.pointFromX=function(T,g){(T=new N(T,16)).red||(T=T.toRed(this.red));var h=T.redSqr(),C=this.c2.redSub(this.a.redMul(h)),b=this.one.redSub(this.c2.redMul(this.d).redMul(h)),w=C.redMul(b.redInvm()),I=w.redSqrt();if(0!==I.redSqr().redSub(w).cmp(this.zero))throw new Error("invalid point");var P=I.fromRed().isOdd();return(g&&!P||!g&&P)&&(I=I.redNeg()),this.point(T,I)},v.prototype.pointFromY=function(T,g){(T=new N(T,16)).red||(T=T.toRed(this.red));var h=T.redSqr(),C=h.redSub(this.c2),b=h.redMul(this.d).redMul(this.c2).redSub(this.a),w=C.redMul(b.redInvm());if(0===w.cmp(this.zero)){if(g)throw new Error("invalid point");return this.point(this.zero,T)}var I=w.redSqrt();if(0!==I.redSqr().redSub(w).cmp(this.zero))throw new Error("invalid point");return I.fromRed().isOdd()!==g&&(I=I.redNeg()),this.point(I,T)},v.prototype.validate=function(T){if(T.isInfinity())return!0;T.normalize();var g=T.x.redSqr(),h=T.y.redSqr(),C=g.redMul(this.a).redAdd(h),b=this.c2.redMul(this.one.redAdd(this.d.redMul(g).redMul(h)));return 0===C.cmp(b)},m(M,R.BasePoint),v.prototype.pointFromJSON=function(T){return M.fromJSON(this,T)},v.prototype.point=function(T,g,h,C){return new M(this,T,g,h,C)},M.fromJSON=function(T,g){return new M(T,g[0],g[1],g[2])},M.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},M.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},M.prototype._extDbl=function(){var T=this.x.redSqr(),g=this.y.redSqr(),h=this.z.redSqr();h=h.redIAdd(h);var C=this.curve._mulA(T),b=this.x.redAdd(this.y).redSqr().redISub(T).redISub(g),w=C.redAdd(g),I=w.redSub(h),P=C.redSub(g),k=b.redMul(I),O=w.redMul(P),V=b.redMul(P),U=I.redMul(w);return this.curve.point(k,O,U,V)},M.prototype._projDbl=function(){var C,b,w,I,P,k,T=this.x.redAdd(this.y).redSqr(),g=this.x.redSqr(),h=this.y.redSqr();if(this.curve.twisted){var O=(I=this.curve._mulA(g)).redAdd(h);this.zOne?(C=T.redSub(g).redSub(h).redMul(O.redSub(this.curve.two)),b=O.redMul(I.redSub(h)),w=O.redSqr().redSub(O).redSub(O)):(P=this.z.redSqr(),k=O.redSub(P).redISub(P),C=T.redSub(g).redISub(h).redMul(k),b=O.redMul(I.redSub(h)),w=O.redMul(k))}else I=g.redAdd(h),P=this.curve._mulC(this.z).redSqr(),k=I.redSub(P).redSub(P),C=this.curve._mulC(T.redISub(I)).redMul(k),b=this.curve._mulC(I).redMul(g.redISub(h)),w=I.redMul(k);return this.curve.point(C,b,w)},M.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},M.prototype._extAdd=function(T){var g=this.y.redSub(this.x).redMul(T.y.redSub(T.x)),h=this.y.redAdd(this.x).redMul(T.y.redAdd(T.x)),C=this.t.redMul(this.curve.dd).redMul(T.t),b=this.z.redMul(T.z.redAdd(T.z)),w=h.redSub(g),I=b.redSub(C),P=b.redAdd(C),k=h.redAdd(g),O=w.redMul(I),V=P.redMul(k),U=w.redMul(k),B=I.redMul(P);return this.curve.point(O,V,B,U)},M.prototype._projAdd=function(T){var V,U,g=this.z.redMul(T.z),h=g.redSqr(),C=this.x.redMul(T.x),b=this.y.redMul(T.y),w=this.curve.d.redMul(C).redMul(b),I=h.redSub(w),P=h.redAdd(w),k=this.x.redAdd(this.y).redMul(T.x.redAdd(T.y)).redISub(C).redISub(b),O=g.redMul(I).redMul(k);return this.curve.twisted?(V=g.redMul(P).redMul(b.redSub(this.curve._mulA(C))),U=I.redMul(P)):(V=g.redMul(P).redMul(b.redSub(C)),U=this.curve._mulC(I).redMul(P)),this.curve.point(O,V,U)},M.prototype.add=function(T){return this.isInfinity()?T:T.isInfinity()?this:this.curve.extended?this._extAdd(T):this._projAdd(T)},M.prototype.mul=function(T){return this._hasDoubles(T)?this.curve._fixedNafMul(this,T):this.curve._wnafMul(this,T)},M.prototype.mulAdd=function(T,g,h){return this.curve._wnafMulAdd(1,[this,g],[T,h],2,!1)},M.prototype.jmulAdd=function(T,g,h){return this.curve._wnafMulAdd(1,[this,g],[T,h],2,!0)},M.prototype.normalize=function(){if(this.zOne)return this;var T=this.z.redInvm();return this.x=this.x.redMul(T),this.y=this.y.redMul(T),this.t&&(this.t=this.t.redMul(T)),this.z=this.curve.one,this.zOne=!0,this},M.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},M.prototype.getX=function(){return this.normalize(),this.x.fromRed()},M.prototype.getY=function(){return this.normalize(),this.y.fromRed()},M.prototype.eq=function(T){return this===T||0===this.getX().cmp(T.getX())&&0===this.getY().cmp(T.getY())},M.prototype.eqXToP=function(T){var g=T.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(g))return!0;for(var h=T.clone(),C=this.curve.redN.redMul(this.z);;){if(h.iadd(this.curve.n),h.cmp(this.curve.p)>=0)return!1;if(g.redIAdd(C),0===this.x.cmp(g))return!0}},M.prototype.toP=M.prototype.normalize,M.prototype.mixedAdd=M.prototype.add},3868:(Y,L,E)=>{"use strict";var p=L;p.base=E(780),p.short=E(9918),p.mont=E(2218),p.edwards=E(6121)},2218:(Y,L,E)=>{"use strict";var p=E(4584),N=E(9879),m=E(780),R=E(2946);function u(M){m.call(this,"mont",M),this.a=new p(M.a,16).toRed(this.red),this.b=new p(M.b,16).toRed(this.red),this.i4=new p(4).toRed(this.red).redInvm(),this.two=new p(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function v(M,A,T){m.BasePoint.call(this,M,"projective"),null===A&&null===T?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new p(A,16),this.z=new p(T,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}N(u,m),Y.exports=u,u.prototype.validate=function(A){var T=A.normalize().x,g=T.redSqr(),h=g.redMul(T).redAdd(g.redMul(this.a)).redAdd(T);return 0===h.redSqrt().redSqr().cmp(h)},N(v,m.BasePoint),u.prototype.decodePoint=function(A,T){return this.point(R.toArray(A,T),1)},u.prototype.point=function(A,T){return new v(this,A,T)},u.prototype.pointFromJSON=function(A){return v.fromJSON(this,A)},v.prototype.precompute=function(){},v.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},v.fromJSON=function(A,T){return new v(A,T[0],T[1]||A.one)},v.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},v.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},v.prototype.dbl=function(){var T=this.x.redAdd(this.z).redSqr(),h=this.x.redSub(this.z).redSqr(),C=T.redSub(h),b=T.redMul(h),w=C.redMul(h.redAdd(this.curve.a24.redMul(C)));return this.curve.point(b,w)},v.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},v.prototype.diffAdd=function(A,T){var g=this.x.redAdd(this.z),h=this.x.redSub(this.z),C=A.x.redAdd(A.z),w=A.x.redSub(A.z).redMul(g),I=C.redMul(h),P=T.z.redMul(w.redAdd(I).redSqr()),k=T.x.redMul(w.redISub(I).redSqr());return this.curve.point(P,k)},v.prototype.mul=function(A){for(var T=A.clone(),g=this,h=this.curve.point(null,null),b=[];0!==T.cmpn(0);T.iushrn(1))b.push(T.andln(1));for(var w=b.length-1;w>=0;w--)0===b[w]?(g=g.diffAdd(h,this),h=h.dbl()):(h=g.diffAdd(h,this),g=g.dbl());return h},v.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},v.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},v.prototype.eq=function(A){return 0===this.getX().cmp(A.getX())},v.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},v.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},9918:(Y,L,E)=>{"use strict";var p=E(2946),N=E(4584),m=E(9879),R=E(780),u=p.assert;function v(T){R.call(this,"short",T),this.a=new N(T.a,16).toRed(this.red),this.b=new N(T.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(T),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function M(T,g,h,C){R.BasePoint.call(this,T,"affine"),null===g&&null===h?(this.x=null,this.y=null,this.inf=!0):(this.x=new N(g,16),this.y=new N(h,16),C&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function A(T,g,h,C){R.BasePoint.call(this,T,"jacobian"),null===g&&null===h&&null===C?(this.x=this.curve.one,this.y=this.curve.one,this.z=new N(0)):(this.x=new N(g,16),this.y=new N(h,16),this.z=new N(C,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}m(v,R),Y.exports=v,v.prototype._getEndomorphism=function(g){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var h,C;if(g.beta)h=new N(g.beta,16).toRed(this.red);else{var b=this._getEndoRoots(this.p);h=(h=b[0].cmp(b[1])<0?b[0]:b[1]).toRed(this.red)}if(g.lambda)C=new N(g.lambda,16);else{var w=this._getEndoRoots(this.n);0===this.g.mul(w[0]).x.cmp(this.g.x.redMul(h))?C=w[0]:u(0===this.g.mul(C=w[1]).x.cmp(this.g.x.redMul(h)))}return{beta:h,lambda:C,basis:g.basis?g.basis.map(function(P){return{a:new N(P.a,16),b:new N(P.b,16)}}):this._getEndoBasis(C)}}},v.prototype._getEndoRoots=function(g){var h=g===this.p?this.red:N.mont(g),C=new N(2).toRed(h).redInvm(),b=C.redNeg(),w=new N(3).toRed(h).redNeg().redSqrt().redMul(C);return[b.redAdd(w).fromRed(),b.redSub(w).fromRed()]},v.prototype._getEndoBasis=function(g){for(var O,V,U,B,H,W,te,pe,x,h=this.n.ushrn(Math.floor(this.n.bitLength()/2)),C=g,b=this.n.clone(),w=new N(1),I=new N(0),P=new N(0),k=new N(1),$=0;0!==C.cmpn(0);){var r=b.div(C);pe=b.sub(r.mul(C)),x=P.sub(r.mul(w));var s=k.sub(r.mul(I));if(!U&&pe.cmp(h)<0)O=te.neg(),V=w,U=pe.neg(),B=x;else if(U&&2==++$)break;te=pe,b=C,C=pe,P=w,w=x,k=I,I=s}H=pe.neg(),W=x;var l=U.sqr().add(B.sqr());return H.sqr().add(W.sqr()).cmp(l)>=0&&(H=O,W=V),U.negative&&(U=U.neg(),B=B.neg()),H.negative&&(H=H.neg(),W=W.neg()),[{a:U,b:B},{a:H,b:W}]},v.prototype._endoSplit=function(g){var h=this.endo.basis,C=h[0],b=h[1],w=b.b.mul(g).divRound(this.n),I=C.b.neg().mul(g).divRound(this.n),P=w.mul(C.a),k=I.mul(b.a),O=w.mul(C.b),V=I.mul(b.b);return{k1:g.sub(P).sub(k),k2:O.add(V).neg()}},v.prototype.pointFromX=function(g,h){(g=new N(g,16)).red||(g=g.toRed(this.red));var C=g.redSqr().redMul(g).redIAdd(g.redMul(this.a)).redIAdd(this.b),b=C.redSqrt();if(0!==b.redSqr().redSub(C).cmp(this.zero))throw new Error("invalid point");var w=b.fromRed().isOdd();return(h&&!w||!h&&w)&&(b=b.redNeg()),this.point(g,b)},v.prototype.validate=function(g){if(g.inf)return!0;var h=g.x,C=g.y,b=this.a.redMul(h),w=h.redSqr().redMul(h).redIAdd(b).redIAdd(this.b);return 0===C.redSqr().redISub(w).cmpn(0)},v.prototype._endoWnafMulAdd=function(g,h,C){for(var b=this._endoWnafT1,w=this._endoWnafT2,I=0;I<g.length;I++){var P=this._endoSplit(h[I]),k=g[I],O=k._getBeta();P.k1.negative&&(P.k1.ineg(),k=k.neg(!0)),P.k2.negative&&(P.k2.ineg(),O=O.neg(!0)),b[2*I]=k,b[2*I+1]=O,w[2*I]=P.k1,w[2*I+1]=P.k2}for(var V=this._wnafMulAdd(1,b,w,2*I,C),U=0;U<2*I;U++)b[U]=null,w[U]=null;return V},m(M,R.BasePoint),v.prototype.point=function(g,h,C){return new M(this,g,h,C)},v.prototype.pointFromJSON=function(g,h){return M.fromJSON(this,g,h)},M.prototype._getBeta=function(){if(this.curve.endo){var g=this.precomputed;if(g&&g.beta)return g.beta;var h=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(g){var C=this.curve,b=function(w){return C.point(w.x.redMul(C.endo.beta),w.y)};g.beta=h,h.precomputed={beta:null,naf:g.naf&&{wnd:g.naf.wnd,points:g.naf.points.map(b)},doubles:g.doubles&&{step:g.doubles.step,points:g.doubles.points.map(b)}}}return h}},M.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},M.fromJSON=function(g,h,C){"string"==typeof h&&(h=JSON.parse(h));var b=g.point(h[0],h[1],C);if(!h[2])return b;function w(P){return g.point(P[0],P[1],C)}var I=h[2];return b.precomputed={beta:null,doubles:I.doubles&&{step:I.doubles.step,points:[b].concat(I.doubles.points.map(w))},naf:I.naf&&{wnd:I.naf.wnd,points:[b].concat(I.naf.points.map(w))}},b},M.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},M.prototype.isInfinity=function(){return this.inf},M.prototype.add=function(g){if(this.inf)return g;if(g.inf)return this;if(this.eq(g))return this.dbl();if(this.neg().eq(g))return this.curve.point(null,null);if(0===this.x.cmp(g.x))return this.curve.point(null,null);var h=this.y.redSub(g.y);0!==h.cmpn(0)&&(h=h.redMul(this.x.redSub(g.x).redInvm()));var C=h.redSqr().redISub(this.x).redISub(g.x),b=h.redMul(this.x.redSub(C)).redISub(this.y);return this.curve.point(C,b)},M.prototype.dbl=function(){if(this.inf)return this;var g=this.y.redAdd(this.y);if(0===g.cmpn(0))return this.curve.point(null,null);var h=this.curve.a,C=this.x.redSqr(),b=g.redInvm(),w=C.redAdd(C).redIAdd(C).redIAdd(h).redMul(b),I=w.redSqr().redISub(this.x.redAdd(this.x)),P=w.redMul(this.x.redSub(I)).redISub(this.y);return this.curve.point(I,P)},M.prototype.getX=function(){return this.x.fromRed()},M.prototype.getY=function(){return this.y.fromRed()},M.prototype.mul=function(g){return g=new N(g,16),this.isInfinity()?this:this._hasDoubles(g)?this.curve._fixedNafMul(this,g):this.curve.endo?this.curve._endoWnafMulAdd([this],[g]):this.curve._wnafMul(this,g)},M.prototype.mulAdd=function(g,h,C){var b=[this,h],w=[g,C];return this.curve.endo?this.curve._endoWnafMulAdd(b,w):this.curve._wnafMulAdd(1,b,w,2)},M.prototype.jmulAdd=function(g,h,C){var b=[this,h],w=[g,C];return this.curve.endo?this.curve._endoWnafMulAdd(b,w,!0):this.curve._wnafMulAdd(1,b,w,2,!0)},M.prototype.eq=function(g){return this===g||this.inf===g.inf&&(this.inf||0===this.x.cmp(g.x)&&0===this.y.cmp(g.y))},M.prototype.neg=function(g){if(this.inf)return this;var h=this.curve.point(this.x,this.y.redNeg());if(g&&this.precomputed){var C=this.precomputed,b=function(w){return w.neg()};h.precomputed={naf:C.naf&&{wnd:C.naf.wnd,points:C.naf.points.map(b)},doubles:C.doubles&&{step:C.doubles.step,points:C.doubles.points.map(b)}}}return h},M.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},m(A,R.BasePoint),v.prototype.jpoint=function(g,h,C){return new A(this,g,h,C)},A.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var g=this.z.redInvm(),h=g.redSqr(),C=this.x.redMul(h),b=this.y.redMul(h).redMul(g);return this.curve.point(C,b)},A.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},A.prototype.add=function(g){if(this.isInfinity())return g;if(g.isInfinity())return this;var h=g.z.redSqr(),C=this.z.redSqr(),b=this.x.redMul(h),w=g.x.redMul(C),I=this.y.redMul(h.redMul(g.z)),P=g.y.redMul(C.redMul(this.z)),k=b.redSub(w),O=I.redSub(P);if(0===k.cmpn(0))return 0!==O.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var V=k.redSqr(),U=V.redMul(k),B=b.redMul(V),H=O.redSqr().redIAdd(U).redISub(B).redISub(B),W=O.redMul(B.redISub(H)).redISub(I.redMul(U)),te=this.z.redMul(g.z).redMul(k);return this.curve.jpoint(H,W,te)},A.prototype.mixedAdd=function(g){if(this.isInfinity())return g.toJ();if(g.isInfinity())return this;var h=this.z.redSqr(),C=this.x,b=g.x.redMul(h),w=this.y,I=g.y.redMul(h).redMul(this.z),P=C.redSub(b),k=w.redSub(I);if(0===P.cmpn(0))return 0!==k.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var O=P.redSqr(),V=O.redMul(P),U=C.redMul(O),B=k.redSqr().redIAdd(V).redISub(U).redISub(U),H=k.redMul(U.redISub(B)).redISub(w.redMul(V)),W=this.z.redMul(P);return this.curve.jpoint(B,H,W)},A.prototype.dblp=function(g){if(0===g)return this;if(this.isInfinity())return this;if(!g)return this.dbl();var h;if(this.curve.zeroA||this.curve.threeA){var C=this;for(h=0;h<g;h++)C=C.dbl();return C}var b=this.curve.a,w=this.curve.tinv,I=this.x,P=this.y,k=this.z,O=k.redSqr().redSqr(),V=P.redAdd(P);for(h=0;h<g;h++){var U=I.redSqr(),B=V.redSqr(),H=B.redSqr(),W=U.redAdd(U).redIAdd(U).redIAdd(b.redMul(O)),te=I.redMul(B),$=W.redSqr().redISub(te.redAdd(te)),pe=te.redISub($),x=W.redMul(pe);x=x.redIAdd(x).redISub(H);var r=V.redMul(k);h+1<g&&(O=O.redMul(H)),I=$,k=r,V=x}return this.curve.jpoint(I,V.redMul(w),k)},A.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},A.prototype._zeroDbl=function(){var g,h,C;if(this.zOne){var b=this.x.redSqr(),w=this.y.redSqr(),I=w.redSqr(),P=this.x.redAdd(w).redSqr().redISub(b).redISub(I);P=P.redIAdd(P);var k=b.redAdd(b).redIAdd(b),O=k.redSqr().redISub(P).redISub(P),V=I.redIAdd(I);V=(V=V.redIAdd(V)).redIAdd(V),g=O,h=k.redMul(P.redISub(O)).redISub(V),C=this.y.redAdd(this.y)}else{var U=this.x.redSqr(),B=this.y.redSqr(),H=B.redSqr(),W=this.x.redAdd(B).redSqr().redISub(U).redISub(H);W=W.redIAdd(W);var te=U.redAdd(U).redIAdd(U),$=te.redSqr(),pe=H.redIAdd(H);pe=(pe=pe.redIAdd(pe)).redIAdd(pe),g=$.redISub(W).redISub(W),h=te.redMul(W.redISub(g)).redISub(pe),C=(C=this.y.redMul(this.z)).redIAdd(C)}return this.curve.jpoint(g,h,C)},A.prototype._threeDbl=function(){var g,h,C;if(this.zOne){var b=this.x.redSqr(),w=this.y.redSqr(),I=w.redSqr(),P=this.x.redAdd(w).redSqr().redISub(b).redISub(I);P=P.redIAdd(P);var k=b.redAdd(b).redIAdd(b).redIAdd(this.curve.a),O=k.redSqr().redISub(P).redISub(P);g=O;var V=I.redIAdd(I);V=(V=V.redIAdd(V)).redIAdd(V),h=k.redMul(P.redISub(O)).redISub(V),C=this.y.redAdd(this.y)}else{var U=this.z.redSqr(),B=this.y.redSqr(),H=this.x.redMul(B),W=this.x.redSub(U).redMul(this.x.redAdd(U));W=W.redAdd(W).redIAdd(W);var te=H.redIAdd(H),$=(te=te.redIAdd(te)).redAdd(te);g=W.redSqr().redISub($),C=this.y.redAdd(this.z).redSqr().redISub(B).redISub(U);var pe=B.redSqr();pe=(pe=(pe=pe.redIAdd(pe)).redIAdd(pe)).redIAdd(pe),h=W.redMul(te.redISub(g)).redISub(pe)}return this.curve.jpoint(g,h,C)},A.prototype._dbl=function(){var g=this.curve.a,h=this.x,C=this.y,b=this.z,w=b.redSqr().redSqr(),I=h.redSqr(),P=C.redSqr(),k=I.redAdd(I).redIAdd(I).redIAdd(g.redMul(w)),O=h.redAdd(h),V=(O=O.redIAdd(O)).redMul(P),U=k.redSqr().redISub(V.redAdd(V)),B=V.redISub(U),H=P.redSqr();H=(H=(H=H.redIAdd(H)).redIAdd(H)).redIAdd(H);var W=k.redMul(B).redISub(H),te=C.redAdd(C).redMul(b);return this.curve.jpoint(U,W,te)},A.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var g=this.x.redSqr(),h=this.y.redSqr(),C=this.z.redSqr(),b=h.redSqr(),w=g.redAdd(g).redIAdd(g),I=w.redSqr(),P=this.x.redAdd(h).redSqr().redISub(g).redISub(b),k=(P=(P=(P=P.redIAdd(P)).redAdd(P).redIAdd(P)).redISub(I)).redSqr(),O=b.redIAdd(b);O=(O=(O=O.redIAdd(O)).redIAdd(O)).redIAdd(O);var V=w.redIAdd(P).redSqr().redISub(I).redISub(k).redISub(O),U=h.redMul(V);U=(U=U.redIAdd(U)).redIAdd(U);var B=this.x.redMul(k).redISub(U);B=(B=B.redIAdd(B)).redIAdd(B);var H=this.y.redMul(V.redMul(O.redISub(V)).redISub(P.redMul(k)));H=(H=(H=H.redIAdd(H)).redIAdd(H)).redIAdd(H);var W=this.z.redAdd(P).redSqr().redISub(C).redISub(k);return this.curve.jpoint(B,H,W)},A.prototype.mul=function(g,h){return g=new N(g,h),this.curve._wnafMul(this,g)},A.prototype.eq=function(g){if("affine"===g.type)return this.eq(g.toJ());if(this===g)return!0;var h=this.z.redSqr(),C=g.z.redSqr();if(0!==this.x.redMul(C).redISub(g.x.redMul(h)).cmpn(0))return!1;var b=h.redMul(this.z),w=C.redMul(g.z);return 0===this.y.redMul(w).redISub(g.y.redMul(b)).cmpn(0)},A.prototype.eqXToP=function(g){var h=this.z.redSqr(),C=g.toRed(this.curve.red).redMul(h);if(0===this.x.cmp(C))return!0;for(var b=g.clone(),w=this.curve.redN.redMul(h);;){if(b.iadd(this.curve.n),b.cmp(this.curve.p)>=0)return!1;if(C.redIAdd(w),0===this.x.cmp(C))return!0}},A.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},A.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},3346:(Y,L,E)=>{"use strict";var A,p=L,N=E(7909),m=E(3868),u=E(2946).assert;function v(T){this.curve="short"===T.type?new m.short(T):"edwards"===T.type?new m.edwards(T):new m.mont(T),this.g=this.curve.g,this.n=this.curve.n,this.hash=T.hash,u(this.g.validate(),"Invalid curve"),u(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function M(T,g){Object.defineProperty(p,T,{configurable:!0,enumerable:!0,get:function(){var h=new v(g);return Object.defineProperty(p,T,{configurable:!0,enumerable:!0,value:h}),h}})}p.PresetCurve=v,M("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:N.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),M("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:N.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),M("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:N.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),M("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:N.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),M("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:N.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),M("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:N.sha256,gRed:!1,g:["9"]}),M("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:N.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{A=E(5503)}catch(T){A=void 0}M("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:N.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",A]})},7237:(Y,L,E)=>{"use strict";var p=E(4584),N=E(2730),m=E(2946),R=E(3346),u=E(4761),v=m.assert,M=E(2806),A=E(6799);function T(g){if(!(this instanceof T))return new T(g);"string"==typeof g&&(v(Object.prototype.hasOwnProperty.call(R,g),"Unknown curve "+g),g=R[g]),g instanceof R.PresetCurve&&(g={curve:g}),this.curve=g.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=g.curve.g,this.g.precompute(g.curve.n.bitLength()+1),this.hash=g.hash||g.curve.hash}Y.exports=T,T.prototype.keyPair=function(h){return new M(this,h)},T.prototype.keyFromPrivate=function(h,C){return M.fromPrivate(this,h,C)},T.prototype.keyFromPublic=function(h,C){return M.fromPublic(this,h,C)},T.prototype.genKeyPair=function(h){h||(h={});for(var C=new N({hash:this.hash,pers:h.pers,persEnc:h.persEnc||"utf8",entropy:h.entropy||u(this.hash.hmacStrength),entropyEnc:h.entropy&&h.entropyEnc||"utf8",nonce:this.n.toArray()}),b=this.n.byteLength(),w=this.n.sub(new p(2));;){var I=new p(C.generate(b));if(!(I.cmp(w)>0))return I.iaddn(1),this.keyFromPrivate(I)}},T.prototype._truncateToN=function(h,C){var b=8*h.byteLength()-this.n.bitLength();return b>0&&(h=h.ushrn(b)),!C&&h.cmp(this.n)>=0?h.sub(this.n):h},T.prototype.sign=function(h,C,b,w){"object"==typeof b&&(w=b,b=null),w||(w={}),C=this.keyFromPrivate(C,b),h=this._truncateToN(new p(h,16));for(var I=this.n.byteLength(),P=C.getPrivate().toArray("be",I),k=h.toArray("be",I),O=new N({hash:this.hash,entropy:P,nonce:k,pers:w.pers,persEnc:w.persEnc||"utf8"}),V=this.n.sub(new p(1)),U=0;;U++){var B=w.k?w.k(U):new p(O.generate(this.n.byteLength()));if(!((B=this._truncateToN(B,!0)).cmpn(1)<=0||B.cmp(V)>=0)){var H=this.g.mul(B);if(!H.isInfinity()){var W=H.getX(),te=W.umod(this.n);if(0!==te.cmpn(0)){var $=B.invm(this.n).mul(te.mul(C.getPrivate()).iadd(h));if(0!==($=$.umod(this.n)).cmpn(0)){var pe=(H.getY().isOdd()?1:0)|(0!==W.cmp(te)?2:0);return w.canonical&&$.cmp(this.nh)>0&&($=this.n.sub($),pe^=1),new A({r:te,s:$,recoveryParam:pe})}}}}}},T.prototype.verify=function(h,C,b,w){h=this._truncateToN(new p(h,16)),b=this.keyFromPublic(b,w);var I=(C=new A(C,"hex")).r,P=C.s;if(I.cmpn(1)<0||I.cmp(this.n)>=0||P.cmpn(1)<0||P.cmp(this.n)>=0)return!1;var U,k=P.invm(this.n),O=k.mul(h).umod(this.n),V=k.mul(I).umod(this.n);return this.curve._maxwellTrick?!(U=this.g.jmulAdd(O,b.getPublic(),V)).isInfinity()&&U.eqXToP(I):!(U=this.g.mulAdd(O,b.getPublic(),V)).isInfinity()&&0===U.getX().umod(this.n).cmp(I)},T.prototype.recoverPubKey=function(g,h,C,b){v((3&C)===C,"The recovery param is more than two bits"),h=new A(h,b);var w=this.n,I=new p(g),P=h.r,k=h.s,O=1&C,V=C>>1;if(P.cmp(this.curve.p.umod(this.curve.n))>=0&&V)throw new Error("Unable to find sencond key candinate");P=this.curve.pointFromX(V?P.add(this.curve.n):P,O);var U=h.r.invm(w),B=w.sub(I).mul(U).umod(w),H=k.mul(U).umod(w);return this.g.mulAdd(B,P,H)},T.prototype.getKeyRecoveryParam=function(g,h,C,b){if(null!==(h=new A(h,b)).recoveryParam)return h.recoveryParam;for(var w=0;w<4;w++){var I;try{I=this.recoverPubKey(g,h,w)}catch(P){continue}if(I.eq(C))return w}throw new Error("Unable to find valid recovery factor")}},2806:(Y,L,E)=>{"use strict";var p=E(4584),m=E(2946).assert;function R(u,v){this.ec=u,this.priv=null,this.pub=null,v.priv&&this._importPrivate(v.priv,v.privEnc),v.pub&&this._importPublic(v.pub,v.pubEnc)}Y.exports=R,R.fromPublic=function(v,M,A){return M instanceof R?M:new R(v,{pub:M,pubEnc:A})},R.fromPrivate=function(v,M,A){return M instanceof R?M:new R(v,{priv:M,privEnc:A})},R.prototype.validate=function(){var v=this.getPublic();return v.isInfinity()?{result:!1,reason:"Invalid public key"}:v.validate()?v.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},R.prototype.getPublic=function(v,M){return"string"==typeof v&&(M=v,v=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),M?this.pub.encode(M,v):this.pub},R.prototype.getPrivate=function(v){return"hex"===v?this.priv.toString(16,2):this.priv},R.prototype._importPrivate=function(v,M){this.priv=new p(v,M||16),this.priv=this.priv.umod(this.ec.curve.n)},R.prototype._importPublic=function(v,M){if(v.x||v.y)return"mont"===this.ec.curve.type?m(v.x,"Need x coordinate"):("short"===this.ec.curve.type||"edwards"===this.ec.curve.type)&&m(v.x&&v.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(v.x,v.y));this.pub=this.ec.curve.decodePoint(v,M)},R.prototype.derive=function(v){return v.validate()||m(v.validate(),"public point not validated"),v.mul(this.priv).getX()},R.prototype.sign=function(v,M,A){return this.ec.sign(v,this,M,A)},R.prototype.verify=function(v,M){return this.ec.verify(v,M,this)},R.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},6799:(Y,L,E)=>{"use strict";var p=E(4584),N=E(2946),m=N.assert;function R(T,g){if(T instanceof R)return T;this._importDER(T,g)||(m(T.r&&T.s,"Signature without r or s"),this.r=new p(T.r,16),this.s=new p(T.s,16),this.recoveryParam=void 0===T.recoveryParam?null:T.recoveryParam)}function u(){this.place=0}function v(T,g){var h=T[g.place++];if(!(128&h))return h;var C=15&h;if(0===C||C>4)return!1;for(var b=0,w=0,I=g.place;w<C;w++,I++)b<<=8,b|=T[I],b>>>=0;return!(b<=127)&&(g.place=I,b)}function M(T){for(var g=0,h=T.length-1;!T[g]&&!(128&T[g+1])&&g<h;)g++;return 0===g?T:T.slice(g)}function A(T,g){if(g<128)T.push(g);else{var h=1+(Math.log(g)/Math.LN2>>>3);for(T.push(128|h);--h;)T.push(g>>>(h<<3)&255);T.push(g)}}Y.exports=R,R.prototype._importDER=function(g,h){g=N.toArray(g,h);var C=new u;if(48!==g[C.place++])return!1;var b=v(g,C);if(!1===b||b+C.place!==g.length||2!==g[C.place++])return!1;var w=v(g,C);if(!1===w)return!1;var I=g.slice(C.place,w+C.place);if(C.place+=w,2!==g[C.place++])return!1;var P=v(g,C);if(!1===P||g.length!==P+C.place)return!1;var k=g.slice(C.place,P+C.place);if(0===I[0]){if(!(128&I[1]))return!1;I=I.slice(1)}if(0===k[0]){if(!(128&k[1]))return!1;k=k.slice(1)}return this.r=new p(I),this.s=new p(k),this.recoveryParam=null,!0},R.prototype.toDER=function(g){var h=this.r.toArray(),C=this.s.toArray();for(128&h[0]&&(h=[0].concat(h)),128&C[0]&&(C=[0].concat(C)),h=M(h),C=M(C);!(C[0]||128&C[1]);)C=C.slice(1);var b=[2];A(b,h.length),(b=b.concat(h)).push(2),A(b,C.length);var w=b.concat(C),I=[48];return A(I,w.length),I=I.concat(w),N.encode(I,g)}},1615:(Y,L,E)=>{"use strict";var p=E(7909),N=E(3346),m=E(2946),R=m.assert,u=m.parseBytes,v=E(6014),M=E(6317);function A(T){if(R("ed25519"===T,"only tested with ed25519 so far"),!(this instanceof A))return new A(T);this.curve=T=N[T].curve,this.g=T.g,this.g.precompute(T.n.bitLength()+1),this.pointClass=T.point().constructor,this.encodingLength=Math.ceil(T.n.bitLength()/8),this.hash=p.sha512}Y.exports=A,A.prototype.sign=function(g,h){g=u(g);var C=this.keyFromSecret(h),b=this.hashInt(C.messagePrefix(),g),w=this.g.mul(b),I=this.encodePoint(w),P=this.hashInt(I,C.pubBytes(),g).mul(C.priv()),k=b.add(P).umod(this.curve.n);return this.makeSignature({R:w,S:k,Rencoded:I})},A.prototype.verify=function(g,h,C){g=u(g),h=this.makeSignature(h);var b=this.keyFromPublic(C),w=this.hashInt(h.Rencoded(),b.pubBytes(),g),I=this.g.mul(h.S());return h.R().add(b.pub().mul(w)).eq(I)},A.prototype.hashInt=function(){for(var g=this.hash(),h=0;h<arguments.length;h++)g.update(arguments[h]);return m.intFromLE(g.digest()).umod(this.curve.n)},A.prototype.keyFromPublic=function(g){return v.fromPublic(this,g)},A.prototype.keyFromSecret=function(g){return v.fromSecret(this,g)},A.prototype.makeSignature=function(g){return g instanceof M?g:new M(this,g)},A.prototype.encodePoint=function(g){var h=g.getY().toArray("le",this.encodingLength);return h[this.encodingLength-1]|=g.getX().isOdd()?128:0,h},A.prototype.decodePoint=function(g){var h=(g=m.parseBytes(g)).length-1,C=g.slice(0,h).concat(-129&g[h]),b=0!=(128&g[h]),w=m.intFromLE(C);return this.curve.pointFromY(w,b)},A.prototype.encodeInt=function(g){return g.toArray("le",this.encodingLength)},A.prototype.decodeInt=function(g){return m.intFromLE(g)},A.prototype.isPoint=function(g){return g instanceof this.pointClass}},6014:(Y,L,E)=>{"use strict";var p=E(2946),N=p.assert,m=p.parseBytes,R=p.cachedProperty;function u(v,M){this.eddsa=v,this._secret=m(M.secret),v.isPoint(M.pub)?this._pub=M.pub:this._pubBytes=m(M.pub)}u.fromPublic=function(M,A){return A instanceof u?A:new u(M,{pub:A})},u.fromSecret=function(M,A){return A instanceof u?A:new u(M,{secret:A})},u.prototype.secret=function(){return this._secret},R(u,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),R(u,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),R(u,"privBytes",function(){var M=this.eddsa,A=this.hash(),T=M.encodingLength-1,g=A.slice(0,M.encodingLength);return g[0]&=248,g[T]&=127,g[T]|=64,g}),R(u,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),R(u,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),R(u,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),u.prototype.sign=function(M){return N(this._secret,"KeyPair can only verify"),this.eddsa.sign(M,this)},u.prototype.verify=function(M,A){return this.eddsa.verify(M,A,this)},u.prototype.getSecret=function(M){return N(this._secret,"KeyPair is public only"),p.encode(this.secret(),M)},u.prototype.getPublic=function(M){return p.encode(this.pubBytes(),M)},Y.exports=u},6317:(Y,L,E)=>{"use strict";var p=E(4584),N=E(2946),m=N.assert,R=N.cachedProperty,u=N.parseBytes;function v(M,A){this.eddsa=M,"object"!=typeof A&&(A=u(A)),Array.isArray(A)&&(A={R:A.slice(0,M.encodingLength),S:A.slice(M.encodingLength)}),m(A.R&&A.S,"Signature without R or S"),M.isPoint(A.R)&&(this._R=A.R),A.S instanceof p&&(this._S=A.S),this._Rencoded=Array.isArray(A.R)?A.R:A.Rencoded,this._Sencoded=Array.isArray(A.S)?A.S:A.Sencoded}R(v,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),R(v,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),R(v,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),R(v,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),v.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},v.prototype.toHex=function(){return N.encode(this.toBytes(),"hex").toUpperCase()},Y.exports=v},5503:Y=>{Y.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},2946:(Y,L,E)=>{"use strict";var p=L,N=E(4584),m=E(6055),R=E(4869);p.assert=m,p.toArray=R.toArray,p.zero2=R.zero2,p.toHex=R.toHex,p.encode=R.encode,p.getNAF=function(g,h,C){var b=new Array(Math.max(g.bitLength(),C)+1);b.fill(0);for(var w=1<<h+1,I=g.clone(),P=0;P<b.length;P++){var k,O=I.andln(w-1);I.isOdd()?I.isubn(k=O>(w>>1)-1?(w>>1)-O:O):k=0,b[P]=k,I.iushrn(1)}return b},p.getJSF=function(g,h){var C=[[],[]];g=g.clone(),h=h.clone();for(var I,b=0,w=0;g.cmpn(-b)>0||h.cmpn(-w)>0;){var O,V,P=g.andln(3)+b&3,k=h.andln(3)+w&3;3===P&&(P=-1),3===k&&(k=-1),O=0==(1&P)?0:3!=(I=g.andln(7)+b&7)&&5!==I||2!==k?P:-P,C[0].push(O),V=0==(1&k)?0:3!=(I=h.andln(7)+w&7)&&5!==I||2!==P?k:-k,C[1].push(V),2*b===O+1&&(b=1-b),2*w===V+1&&(w=1-w),g.iushrn(1),h.iushrn(1)}return C},p.cachedProperty=function(g,h,C){var b="_"+h;g.prototype[h]=function(){return void 0!==this[b]?this[b]:this[b]=C.call(this)}},p.parseBytes=function(g){return"string"==typeof g?p.toArray(g,"hex"):g},p.intFromLE=function(g){return new N(g,"hex","le")}},4584:function(Y,L,E){!function(p,N){"use strict";function m(x,r){if(!x)throw new Error(r||"Assertion failed")}function R(x,r){x.super_=r;var s=function(){};s.prototype=r.prototype,x.prototype=new s,x.prototype.constructor=x}function u(x,r,s){if(u.isBN(x))return x;this.negative=0,this.words=null,this.length=0,this.red=null,null!==x&&(("le"===r||"be"===r)&&(s=r,r=10),this._init(x||0,r||10,s||"be"))}var v;"object"==typeof p?p.exports=u:N.BN=u,u.BN=u,u.wordSize=26;try{v="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:E(5568).Buffer}catch(x){}function M(x,r){var s=x.charCodeAt(r);return s>=65&&s<=70?s-55:s>=97&&s<=102?s-87:s-48&15}function A(x,r,s){var l=M(x,s);return s-1>=r&&(l|=M(x,s-1)<<4),l}function T(x,r,s,l){for(var a=0,f=Math.min(x.length,s),_=r;_<f;_++){var D=x.charCodeAt(_)-48;a*=l,a+=D>=49?D-49+10:D>=17?D-17+10:D}return a}u.isBN=function(r){return r instanceof u||null!==r&&"object"==typeof r&&r.constructor.wordSize===u.wordSize&&Array.isArray(r.words)},u.max=function(r,s){return r.cmp(s)>0?r:s},u.min=function(r,s){return r.cmp(s)<0?r:s},u.prototype._init=function(r,s,l){if("number"==typeof r)return this._initNumber(r,s,l);if("object"==typeof r)return this._initArray(r,s,l);"hex"===s&&(s=16),m(s===(0|s)&&s>=2&&s<=36);var a=0;"-"===(r=r.toString().replace(/\s+/g,""))[0]&&(a++,this.negative=1),a<r.length&&(16===s?this._parseHex(r,a,l):(this._parseBase(r,s,a),"le"===l&&this._initArray(this.toArray(),s,l)))},u.prototype._initNumber=function(r,s,l){r<0&&(this.negative=1,r=-r),r<67108864?(this.words=[67108863&r],this.length=1):r<4503599627370496?(this.words=[67108863&r,r/67108864&67108863],this.length=2):(m(r<9007199254740992),this.words=[67108863&r,r/67108864&67108863,1],this.length=3),"le"===l&&this._initArray(this.toArray(),s,l)},u.prototype._initArray=function(r,s,l){if(m("number"==typeof r.length),r.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(r.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var f,_,D=0;if("be"===l)for(a=r.length-1,f=0;a>=0;a-=3)this.words[f]|=(_=r[a]|r[a-1]<<8|r[a-2]<<16)<<D&67108863,this.words[f+1]=_>>>26-D&67108863,(D+=24)>=26&&(D-=26,f++);else if("le"===l)for(a=0,f=0;a<r.length;a+=3)this.words[f]|=(_=r[a]|r[a+1]<<8|r[a+2]<<16)<<D&67108863,this.words[f+1]=_>>>26-D&67108863,(D+=24)>=26&&(D-=26,f++);return this.strip()},u.prototype._parseHex=function(r,s,l){this.length=Math.ceil((r.length-s)/6),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var D,f=0,_=0;if("be"===l)for(a=r.length-1;a>=s;a-=2)D=A(r,s,a)<<f,this.words[_]|=67108863&D,f>=18?(f-=18,this.words[_+=1]|=D>>>26):f+=8;else for(a=(r.length-s)%2==0?s+1:s;a<r.length;a+=2)D=A(r,s,a)<<f,this.words[_]|=67108863&D,f>=18?(f-=18,this.words[_+=1]|=D>>>26):f+=8;this.strip()},u.prototype._parseBase=function(r,s,l){this.words=[0],this.length=1;for(var a=0,f=1;f<=67108863;f*=s)a++;a--,f=f/s|0;for(var _=r.length-l,D=_%a,d=Math.min(_,_-D)+l,i=0,y=l;y<d;y+=a)i=T(r,y,y+a,s),this.imuln(f),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i);if(0!==D){var z=1;for(i=T(r,y,r.length,s),y=0;y<D;y++)z*=s;this.imuln(z),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i)}this.strip()},u.prototype.copy=function(r){r.words=new Array(this.length);for(var s=0;s<this.length;s++)r.words[s]=this.words[s];r.length=this.length,r.negative=this.negative,r.red=this.red},u.prototype.clone=function(){var r=new u(null);return this.copy(r),r},u.prototype._expand=function(r){for(;this.length<r;)this.words[this.length++]=0;return this},u.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},u.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},u.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],C=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function w(x,r,s){s.negative=r.negative^x.negative;var l=x.length+r.length|0;s.length=l,l=l-1|0;var a=0|x.words[0],f=0|r.words[0],_=a*f,d=_/67108864|0;s.words[0]=67108863&_;for(var i=1;i<l;i++){for(var y=d>>>26,z=67108863&d,q=Math.min(i,r.length-1),Z=Math.max(0,i-x.length+1);Z<=q;Z++)y+=(_=(a=0|x.words[i-Z|0])*(f=0|r.words[Z])+z)/67108864|0,z=67108863&_;s.words[i]=0|z,d=0|y}return 0!==d?s.words[i]=0|d:s.length--,s.strip()}u.prototype.toString=function(r,s){var l;if(s=0|s||1,16===(r=r||10)||"hex"===r){l="";for(var a=0,f=0,_=0;_<this.length;_++){var D=this.words[_],d=(16777215&(D<<a|f)).toString(16);l=0!=(f=D>>>24-a&16777215)||_!==this.length-1?g[6-d.length]+d+l:d+l,(a+=2)>=26&&(a-=26,_--)}for(0!==f&&(l=f.toString(16)+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}if(r===(0|r)&&r>=2&&r<=36){var i=h[r],y=C[r];l="";var z=this.clone();for(z.negative=0;!z.isZero();){var q=z.modn(y).toString(r);l=(z=z.idivn(y)).isZero()?q+l:g[i-q.length]+q+l}for(this.isZero()&&(l="0"+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}m(!1,"Base should be between 2 and 36")},u.prototype.toNumber=function(){var r=this.words[0];return 2===this.length?r+=67108864*this.words[1]:3===this.length&&1===this.words[2]?r+=4503599627370496+67108864*this.words[1]:this.length>2&&m(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-r:r},u.prototype.toJSON=function(){return this.toString(16)},u.prototype.toBuffer=function(r,s){return m(void 0!==v),this.toArrayLike(v,r,s)},u.prototype.toArray=function(r,s){return this.toArrayLike(Array,r,s)},u.prototype.toArrayLike=function(r,s,l){var a=this.byteLength(),f=l||Math.max(1,a);m(a<=f,"byte array longer than desired length"),m(f>0,"Requested array length <= 0"),this.strip();var d,i,_="le"===s,D=new r(f),y=this.clone();if(_){for(i=0;!y.isZero();i++)d=y.andln(255),y.iushrn(8),D[i]=d;for(;i<f;i++)D[i]=0}else{for(i=0;i<f-a;i++)D[i]=0;for(i=0;!y.isZero();i++)d=y.andln(255),y.iushrn(8),D[f-i-1]=d}return D},u.prototype._countBits=Math.clz32?function(r){return 32-Math.clz32(r)}:function(r){var s=r,l=0;return s>=4096&&(l+=13,s>>>=13),s>=64&&(l+=7,s>>>=7),s>=8&&(l+=4,s>>>=4),s>=2&&(l+=2,s>>>=2),l+s},u.prototype._zeroBits=function(r){if(0===r)return 26;var s=r,l=0;return 0==(8191&s)&&(l+=13,s>>>=13),0==(127&s)&&(l+=7,s>>>=7),0==(15&s)&&(l+=4,s>>>=4),0==(3&s)&&(l+=2,s>>>=2),0==(1&s)&&l++,l},u.prototype.bitLength=function(){var s=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+s},u.prototype.zeroBits=function(){if(this.isZero())return 0;for(var r=0,s=0;s<this.length;s++){var l=this._zeroBits(this.words[s]);if(r+=l,26!==l)break}return r},u.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},u.prototype.toTwos=function(r){return 0!==this.negative?this.abs().inotn(r).iaddn(1):this.clone()},u.prototype.fromTwos=function(r){return this.testn(r-1)?this.notn(r).iaddn(1).ineg():this.clone()},u.prototype.isNeg=function(){return 0!==this.negative},u.prototype.neg=function(){return this.clone().ineg()},u.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},u.prototype.iuor=function(r){for(;this.length<r.length;)this.words[this.length++]=0;for(var s=0;s<r.length;s++)this.words[s]=this.words[s]|r.words[s];return this.strip()},u.prototype.ior=function(r){return m(0==(this.negative|r.negative)),this.iuor(r)},u.prototype.or=function(r){return this.length>r.length?this.clone().ior(r):r.clone().ior(this)},u.prototype.uor=function(r){return this.length>r.length?this.clone().iuor(r):r.clone().iuor(this)},u.prototype.iuand=function(r){var s;s=this.length>r.length?r:this;for(var l=0;l<s.length;l++)this.words[l]=this.words[l]&r.words[l];return this.length=s.length,this.strip()},u.prototype.iand=function(r){return m(0==(this.negative|r.negative)),this.iuand(r)},u.prototype.and=function(r){return this.length>r.length?this.clone().iand(r):r.clone().iand(this)},u.prototype.uand=function(r){return this.length>r.length?this.clone().iuand(r):r.clone().iuand(this)},u.prototype.iuxor=function(r){var s,l;this.length>r.length?(s=this,l=r):(s=r,l=this);for(var a=0;a<l.length;a++)this.words[a]=s.words[a]^l.words[a];if(this!==s)for(;a<s.length;a++)this.words[a]=s.words[a];return this.length=s.length,this.strip()},u.prototype.ixor=function(r){return m(0==(this.negative|r.negative)),this.iuxor(r)},u.prototype.xor=function(r){return this.length>r.length?this.clone().ixor(r):r.clone().ixor(this)},u.prototype.uxor=function(r){return this.length>r.length?this.clone().iuxor(r):r.clone().iuxor(this)},u.prototype.inotn=function(r){m("number"==typeof r&&r>=0);var s=0|Math.ceil(r/26),l=r%26;this._expand(s),l>0&&s--;for(var a=0;a<s;a++)this.words[a]=67108863&~this.words[a];return l>0&&(this.words[a]=~this.words[a]&67108863>>26-l),this.strip()},u.prototype.notn=function(r){return this.clone().inotn(r)},u.prototype.setn=function(r,s){m("number"==typeof r&&r>=0);var l=r/26|0,a=r%26;return this._expand(l+1),this.words[l]=s?this.words[l]|1<<a:this.words[l]&~(1<<a),this.strip()},u.prototype.iadd=function(r){var s,l,a;if(0!==this.negative&&0===r.negative)return this.negative=0,s=this.isub(r),this.negative^=1,this._normSign();if(0===this.negative&&0!==r.negative)return r.negative=0,s=this.isub(r),r.negative=1,s._normSign();this.length>r.length?(l=this,a=r):(l=r,a=this);for(var f=0,_=0;_<a.length;_++)this.words[_]=67108863&(s=(0|l.words[_])+(0|a.words[_])+f),f=s>>>26;for(;0!==f&&_<l.length;_++)this.words[_]=67108863&(s=(0|l.words[_])+f),f=s>>>26;if(this.length=l.length,0!==f)this.words[this.length]=f,this.length++;else if(l!==this)for(;_<l.length;_++)this.words[_]=l.words[_];return this},u.prototype.add=function(r){var s;return 0!==r.negative&&0===this.negative?(r.negative=0,s=this.sub(r),r.negative^=1,s):0===r.negative&&0!==this.negative?(this.negative=0,s=r.sub(this),this.negative=1,s):this.length>r.length?this.clone().iadd(r):r.clone().iadd(this)},u.prototype.isub=function(r){if(0!==r.negative){r.negative=0;var s=this.iadd(r);return r.negative=1,s._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(r),this.negative=1,this._normSign();var a,f,l=this.cmp(r);if(0===l)return this.negative=0,this.length=1,this.words[0]=0,this;l>0?(a=this,f=r):(a=r,f=this);for(var _=0,D=0;D<f.length;D++)_=(s=(0|a.words[D])-(0|f.words[D])+_)>>26,this.words[D]=67108863&s;for(;0!==_&&D<a.length;D++)_=(s=(0|a.words[D])+_)>>26,this.words[D]=67108863&s;if(0===_&&D<a.length&&a!==this)for(;D<a.length;D++)this.words[D]=a.words[D];return this.length=Math.max(this.length,D),a!==this&&(this.negative=1),this.strip()},u.prototype.sub=function(r){return this.clone().isub(r)};var I=function(r,s,l){var d,i,y,a=r.words,f=s.words,_=l.words,D=0,z=0|a[0],q=8191&z,Z=z>>>13,ge=0|a[1],me=8191&ge,le=ge>>>13,fe=0|a[2],ae=8191&fe,de=fe>>>13,xe=0|a[3],Ce=8191&xe,oe=xe>>>13,we=0|a[4],ye=8191&we,re=we>>>13,ee=0|a[5],J=8191&ee,ue=ee>>>13,Ae=0|a[6],Te=8191&Ae,Ee=Ae>>>13,We=0|a[7],Ne=8191&We,_e=We>>>13,Be=0|a[8],De=8191&Be,Le=Be>>>13,Mt=0|a[9],He=8191&Mt,$e=Mt>>>13,It=0|f[0],et=8191&It,pt=It>>>13,Ct=0|f[1],at=8191&Ct,it=Ct>>>13,Mn=0|f[2],ot=8191&Mn,Ke=Mn>>>13,In=0|f[3],Ge=8191&In,ut=In>>>13,On=0|f[4],nt=8191&On,Ve=On>>>13,kt=0|f[5],ft=8191&kt,st=kt>>>13,qn=0|f[6],ct=8191&qn,ze=qn>>>13,an=0|f[7],dt=8191&an,Xe=an>>>13,Yt=0|f[8],Ye=8191&Yt,Qe=Yt>>>13,kn=0|f[9],Ze=8191&kn,lt=kn>>>13;l.negative=r.negative^s.negative,l.length=19;var ln=(D+(d=Math.imul(q,et))|0)+((8191&(i=(i=Math.imul(q,pt))+Math.imul(Z,et)|0))<<13)|0;D=((y=Math.imul(Z,pt))+(i>>>13)|0)+(ln>>>26)|0,ln&=67108863,d=Math.imul(me,et),i=(i=Math.imul(me,pt))+Math.imul(le,et)|0,y=Math.imul(le,pt);var jt=(D+(d=d+Math.imul(q,at)|0)|0)+((8191&(i=(i=i+Math.imul(q,it)|0)+Math.imul(Z,at)|0))<<13)|0;D=((y=y+Math.imul(Z,it)|0)+(i>>>13)|0)+(jt>>>26)|0,jt&=67108863,d=Math.imul(ae,et),i=(i=Math.imul(ae,pt))+Math.imul(de,et)|0,y=Math.imul(de,pt),d=d+Math.imul(me,at)|0,i=(i=i+Math.imul(me,it)|0)+Math.imul(le,at)|0,y=y+Math.imul(le,it)|0;var qt=(D+(d=d+Math.imul(q,ot)|0)|0)+((8191&(i=(i=i+Math.imul(q,Ke)|0)+Math.imul(Z,ot)|0))<<13)|0;D=((y=y+Math.imul(Z,Ke)|0)+(i>>>13)|0)+(qt>>>26)|0,qt&=67108863,d=Math.imul(Ce,et),i=(i=Math.imul(Ce,pt))+Math.imul(oe,et)|0,y=Math.imul(oe,pt),d=d+Math.imul(ae,at)|0,i=(i=i+Math.imul(ae,it)|0)+Math.imul(de,at)|0,y=y+Math.imul(de,it)|0,d=d+Math.imul(me,ot)|0,i=(i=i+Math.imul(me,Ke)|0)+Math.imul(le,ot)|0,y=y+Math.imul(le,Ke)|0;var wn=(D+(d=d+Math.imul(q,Ge)|0)|0)+((8191&(i=(i=i+Math.imul(q,ut)|0)+Math.imul(Z,Ge)|0))<<13)|0;D=((y=y+Math.imul(Z,ut)|0)+(i>>>13)|0)+(wn>>>26)|0,wn&=67108863,d=Math.imul(ye,et),i=(i=Math.imul(ye,pt))+Math.imul(re,et)|0,y=Math.imul(re,pt),d=d+Math.imul(Ce,at)|0,i=(i=i+Math.imul(Ce,it)|0)+Math.imul(oe,at)|0,y=y+Math.imul(oe,it)|0,d=d+Math.imul(ae,ot)|0,i=(i=i+Math.imul(ae,Ke)|0)+Math.imul(de,ot)|0,y=y+Math.imul(de,Ke)|0,d=d+Math.imul(me,Ge)|0,i=(i=i+Math.imul(me,ut)|0)+Math.imul(le,Ge)|0,y=y+Math.imul(le,ut)|0;var hn=(D+(d=d+Math.imul(q,nt)|0)|0)+((8191&(i=(i=i+Math.imul(q,Ve)|0)+Math.imul(Z,nt)|0))<<13)|0;D=((y=y+Math.imul(Z,Ve)|0)+(i>>>13)|0)+(hn>>>26)|0,hn&=67108863,d=Math.imul(J,et),i=(i=Math.imul(J,pt))+Math.imul(ue,et)|0,y=Math.imul(ue,pt),d=d+Math.imul(ye,at)|0,i=(i=i+Math.imul(ye,it)|0)+Math.imul(re,at)|0,y=y+Math.imul(re,it)|0,d=d+Math.imul(Ce,ot)|0,i=(i=i+Math.imul(Ce,Ke)|0)+Math.imul(oe,ot)|0,y=y+Math.imul(oe,Ke)|0,d=d+Math.imul(ae,Ge)|0,i=(i=i+Math.imul(ae,ut)|0)+Math.imul(de,Ge)|0,y=y+Math.imul(de,ut)|0,d=d+Math.imul(me,nt)|0,i=(i=i+Math.imul(me,Ve)|0)+Math.imul(le,nt)|0,y=y+Math.imul(le,Ve)|0;var gn=(D+(d=d+Math.imul(q,ft)|0)|0)+((8191&(i=(i=i+Math.imul(q,st)|0)+Math.imul(Z,ft)|0))<<13)|0;D=((y=y+Math.imul(Z,st)|0)+(i>>>13)|0)+(gn>>>26)|0,gn&=67108863,d=Math.imul(Te,et),i=(i=Math.imul(Te,pt))+Math.imul(Ee,et)|0,y=Math.imul(Ee,pt),d=d+Math.imul(J,at)|0,i=(i=i+Math.imul(J,it)|0)+Math.imul(ue,at)|0,y=y+Math.imul(ue,it)|0,d=d+Math.imul(ye,ot)|0,i=(i=i+Math.imul(ye,Ke)|0)+Math.imul(re,ot)|0,y=y+Math.imul(re,Ke)|0,d=d+Math.imul(Ce,Ge)|0,i=(i=i+Math.imul(Ce,ut)|0)+Math.imul(oe,Ge)|0,y=y+Math.imul(oe,ut)|0,d=d+Math.imul(ae,nt)|0,i=(i=i+Math.imul(ae,Ve)|0)+Math.imul(de,nt)|0,y=y+Math.imul(de,Ve)|0,d=d+Math.imul(me,ft)|0,i=(i=i+Math.imul(me,st)|0)+Math.imul(le,ft)|0,y=y+Math.imul(le,st)|0;var Rn=(D+(d=d+Math.imul(q,ct)|0)|0)+((8191&(i=(i=i+Math.imul(q,ze)|0)+Math.imul(Z,ct)|0))<<13)|0;D=((y=y+Math.imul(Z,ze)|0)+(i>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,d=Math.imul(Ne,et),i=(i=Math.imul(Ne,pt))+Math.imul(_e,et)|0,y=Math.imul(_e,pt),d=d+Math.imul(Te,at)|0,i=(i=i+Math.imul(Te,it)|0)+Math.imul(Ee,at)|0,y=y+Math.imul(Ee,it)|0,d=d+Math.imul(J,ot)|0,i=(i=i+Math.imul(J,Ke)|0)+Math.imul(ue,ot)|0,y=y+Math.imul(ue,Ke)|0,d=d+Math.imul(ye,Ge)|0,i=(i=i+Math.imul(ye,ut)|0)+Math.imul(re,Ge)|0,y=y+Math.imul(re,ut)|0,d=d+Math.imul(Ce,nt)|0,i=(i=i+Math.imul(Ce,Ve)|0)+Math.imul(oe,nt)|0,y=y+Math.imul(oe,Ve)|0,d=d+Math.imul(ae,ft)|0,i=(i=i+Math.imul(ae,st)|0)+Math.imul(de,ft)|0,y=y+Math.imul(de,st)|0,d=d+Math.imul(me,ct)|0,i=(i=i+Math.imul(me,ze)|0)+Math.imul(le,ct)|0,y=y+Math.imul(le,ze)|0;var on=(D+(d=d+Math.imul(q,dt)|0)|0)+((8191&(i=(i=i+Math.imul(q,Xe)|0)+Math.imul(Z,dt)|0))<<13)|0;D=((y=y+Math.imul(Z,Xe)|0)+(i>>>13)|0)+(on>>>26)|0,on&=67108863,d=Math.imul(De,et),i=(i=Math.imul(De,pt))+Math.imul(Le,et)|0,y=Math.imul(Le,pt),d=d+Math.imul(Ne,at)|0,i=(i=i+Math.imul(Ne,it)|0)+Math.imul(_e,at)|0,y=y+Math.imul(_e,it)|0,d=d+Math.imul(Te,ot)|0,i=(i=i+Math.imul(Te,Ke)|0)+Math.imul(Ee,ot)|0,y=y+Math.imul(Ee,Ke)|0,d=d+Math.imul(J,Ge)|0,i=(i=i+Math.imul(J,ut)|0)+Math.imul(ue,Ge)|0,y=y+Math.imul(ue,ut)|0,d=d+Math.imul(ye,nt)|0,i=(i=i+Math.imul(ye,Ve)|0)+Math.imul(re,nt)|0,y=y+Math.imul(re,Ve)|0,d=d+Math.imul(Ce,ft)|0,i=(i=i+Math.imul(Ce,st)|0)+Math.imul(oe,ft)|0,y=y+Math.imul(oe,st)|0,d=d+Math.imul(ae,ct)|0,i=(i=i+Math.imul(ae,ze)|0)+Math.imul(de,ct)|0,y=y+Math.imul(de,ze)|0,d=d+Math.imul(me,dt)|0,i=(i=i+Math.imul(me,Xe)|0)+Math.imul(le,dt)|0,y=y+Math.imul(le,Xe)|0;var _n=(D+(d=d+Math.imul(q,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(q,Qe)|0)+Math.imul(Z,Ye)|0))<<13)|0;D=((y=y+Math.imul(Z,Qe)|0)+(i>>>13)|0)+(_n>>>26)|0,_n&=67108863,d=Math.imul(He,et),i=(i=Math.imul(He,pt))+Math.imul($e,et)|0,y=Math.imul($e,pt),d=d+Math.imul(De,at)|0,i=(i=i+Math.imul(De,it)|0)+Math.imul(Le,at)|0,y=y+Math.imul(Le,it)|0,d=d+Math.imul(Ne,ot)|0,i=(i=i+Math.imul(Ne,Ke)|0)+Math.imul(_e,ot)|0,y=y+Math.imul(_e,Ke)|0,d=d+Math.imul(Te,Ge)|0,i=(i=i+Math.imul(Te,ut)|0)+Math.imul(Ee,Ge)|0,y=y+Math.imul(Ee,ut)|0,d=d+Math.imul(J,nt)|0,i=(i=i+Math.imul(J,Ve)|0)+Math.imul(ue,nt)|0,y=y+Math.imul(ue,Ve)|0,d=d+Math.imul(ye,ft)|0,i=(i=i+Math.imul(ye,st)|0)+Math.imul(re,ft)|0,y=y+Math.imul(re,st)|0,d=d+Math.imul(Ce,ct)|0,i=(i=i+Math.imul(Ce,ze)|0)+Math.imul(oe,ct)|0,y=y+Math.imul(oe,ze)|0,d=d+Math.imul(ae,dt)|0,i=(i=i+Math.imul(ae,Xe)|0)+Math.imul(de,dt)|0,y=y+Math.imul(de,Xe)|0,d=d+Math.imul(me,Ye)|0,i=(i=i+Math.imul(me,Qe)|0)+Math.imul(le,Ye)|0,y=y+Math.imul(le,Qe)|0;var Jt=(D+(d=d+Math.imul(q,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(q,lt)|0)+Math.imul(Z,Ze)|0))<<13)|0;D=((y=y+Math.imul(Z,lt)|0)+(i>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,d=Math.imul(He,at),i=(i=Math.imul(He,it))+Math.imul($e,at)|0,y=Math.imul($e,it),d=d+Math.imul(De,ot)|0,i=(i=i+Math.imul(De,Ke)|0)+Math.imul(Le,ot)|0,y=y+Math.imul(Le,Ke)|0,d=d+Math.imul(Ne,Ge)|0,i=(i=i+Math.imul(Ne,ut)|0)+Math.imul(_e,Ge)|0,y=y+Math.imul(_e,ut)|0,d=d+Math.imul(Te,nt)|0,i=(i=i+Math.imul(Te,Ve)|0)+Math.imul(Ee,nt)|0,y=y+Math.imul(Ee,Ve)|0,d=d+Math.imul(J,ft)|0,i=(i=i+Math.imul(J,st)|0)+Math.imul(ue,ft)|0,y=y+Math.imul(ue,st)|0,d=d+Math.imul(ye,ct)|0,i=(i=i+Math.imul(ye,ze)|0)+Math.imul(re,ct)|0,y=y+Math.imul(re,ze)|0,d=d+Math.imul(Ce,dt)|0,i=(i=i+Math.imul(Ce,Xe)|0)+Math.imul(oe,dt)|0,y=y+Math.imul(oe,Xe)|0,d=d+Math.imul(ae,Ye)|0,i=(i=i+Math.imul(ae,Qe)|0)+Math.imul(de,Ye)|0,y=y+Math.imul(de,Qe)|0;var Ft=(D+(d=d+Math.imul(me,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(me,lt)|0)+Math.imul(le,Ze)|0))<<13)|0;D=((y=y+Math.imul(le,lt)|0)+(i>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,d=Math.imul(He,ot),i=(i=Math.imul(He,Ke))+Math.imul($e,ot)|0,y=Math.imul($e,Ke),d=d+Math.imul(De,Ge)|0,i=(i=i+Math.imul(De,ut)|0)+Math.imul(Le,Ge)|0,y=y+Math.imul(Le,ut)|0,d=d+Math.imul(Ne,nt)|0,i=(i=i+Math.imul(Ne,Ve)|0)+Math.imul(_e,nt)|0,y=y+Math.imul(_e,Ve)|0,d=d+Math.imul(Te,ft)|0,i=(i=i+Math.imul(Te,st)|0)+Math.imul(Ee,ft)|0,y=y+Math.imul(Ee,st)|0,d=d+Math.imul(J,ct)|0,i=(i=i+Math.imul(J,ze)|0)+Math.imul(ue,ct)|0,y=y+Math.imul(ue,ze)|0,d=d+Math.imul(ye,dt)|0,i=(i=i+Math.imul(ye,Xe)|0)+Math.imul(re,dt)|0,y=y+Math.imul(re,Xe)|0,d=d+Math.imul(Ce,Ye)|0,i=(i=i+Math.imul(Ce,Qe)|0)+Math.imul(oe,Ye)|0,y=y+Math.imul(oe,Qe)|0;var An=(D+(d=d+Math.imul(ae,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(ae,lt)|0)+Math.imul(de,Ze)|0))<<13)|0;D=((y=y+Math.imul(de,lt)|0)+(i>>>13)|0)+(An>>>26)|0,An&=67108863,d=Math.imul(He,Ge),i=(i=Math.imul(He,ut))+Math.imul($e,Ge)|0,y=Math.imul($e,ut),d=d+Math.imul(De,nt)|0,i=(i=i+Math.imul(De,Ve)|0)+Math.imul(Le,nt)|0,y=y+Math.imul(Le,Ve)|0,d=d+Math.imul(Ne,ft)|0,i=(i=i+Math.imul(Ne,st)|0)+Math.imul(_e,ft)|0,y=y+Math.imul(_e,st)|0,d=d+Math.imul(Te,ct)|0,i=(i=i+Math.imul(Te,ze)|0)+Math.imul(Ee,ct)|0,y=y+Math.imul(Ee,ze)|0,d=d+Math.imul(J,dt)|0,i=(i=i+Math.imul(J,Xe)|0)+Math.imul(ue,dt)|0,y=y+Math.imul(ue,Xe)|0,d=d+Math.imul(ye,Ye)|0,i=(i=i+Math.imul(ye,Qe)|0)+Math.imul(re,Ye)|0,y=y+Math.imul(re,Qe)|0;var Cn=(D+(d=d+Math.imul(Ce,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(Ce,lt)|0)+Math.imul(oe,Ze)|0))<<13)|0;D=((y=y+Math.imul(oe,lt)|0)+(i>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,d=Math.imul(He,nt),i=(i=Math.imul(He,Ve))+Math.imul($e,nt)|0,y=Math.imul($e,Ve),d=d+Math.imul(De,ft)|0,i=(i=i+Math.imul(De,st)|0)+Math.imul(Le,ft)|0,y=y+Math.imul(Le,st)|0,d=d+Math.imul(Ne,ct)|0,i=(i=i+Math.imul(Ne,ze)|0)+Math.imul(_e,ct)|0,y=y+Math.imul(_e,ze)|0,d=d+Math.imul(Te,dt)|0,i=(i=i+Math.imul(Te,Xe)|0)+Math.imul(Ee,dt)|0,y=y+Math.imul(Ee,Xe)|0,d=d+Math.imul(J,Ye)|0,i=(i=i+Math.imul(J,Qe)|0)+Math.imul(ue,Ye)|0,y=y+Math.imul(ue,Qe)|0;var Sn=(D+(d=d+Math.imul(ye,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(ye,lt)|0)+Math.imul(re,Ze)|0))<<13)|0;D=((y=y+Math.imul(re,lt)|0)+(i>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,d=Math.imul(He,ft),i=(i=Math.imul(He,st))+Math.imul($e,ft)|0,y=Math.imul($e,st),d=d+Math.imul(De,ct)|0,i=(i=i+Math.imul(De,ze)|0)+Math.imul(Le,ct)|0,y=y+Math.imul(Le,ze)|0,d=d+Math.imul(Ne,dt)|0,i=(i=i+Math.imul(Ne,Xe)|0)+Math.imul(_e,dt)|0,y=y+Math.imul(_e,Xe)|0,d=d+Math.imul(Te,Ye)|0,i=(i=i+Math.imul(Te,Qe)|0)+Math.imul(Ee,Ye)|0,y=y+Math.imul(Ee,Qe)|0;var Rt=(D+(d=d+Math.imul(J,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(J,lt)|0)+Math.imul(ue,Ze)|0))<<13)|0;D=((y=y+Math.imul(ue,lt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,d=Math.imul(He,ct),i=(i=Math.imul(He,ze))+Math.imul($e,ct)|0,y=Math.imul($e,ze),d=d+Math.imul(De,dt)|0,i=(i=i+Math.imul(De,Xe)|0)+Math.imul(Le,dt)|0,y=y+Math.imul(Le,Xe)|0,d=d+Math.imul(Ne,Ye)|0,i=(i=i+Math.imul(Ne,Qe)|0)+Math.imul(_e,Ye)|0,y=y+Math.imul(_e,Qe)|0;var Dn=(D+(d=d+Math.imul(Te,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(Te,lt)|0)+Math.imul(Ee,Ze)|0))<<13)|0;D=((y=y+Math.imul(Ee,lt)|0)+(i>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,d=Math.imul(He,dt),i=(i=Math.imul(He,Xe))+Math.imul($e,dt)|0,y=Math.imul($e,Xe),d=d+Math.imul(De,Ye)|0,i=(i=i+Math.imul(De,Qe)|0)+Math.imul(Le,Ye)|0,y=y+Math.imul(Le,Qe)|0;var Qt=(D+(d=d+Math.imul(Ne,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(Ne,lt)|0)+Math.imul(_e,Ze)|0))<<13)|0;D=((y=y+Math.imul(_e,lt)|0)+(i>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,d=Math.imul(He,Ye),i=(i=Math.imul(He,Qe))+Math.imul($e,Ye)|0,y=Math.imul($e,Qe);var nn=(D+(d=d+Math.imul(De,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(De,lt)|0)+Math.imul(Le,Ze)|0))<<13)|0;D=((y=y+Math.imul(Le,lt)|0)+(i>>>13)|0)+(nn>>>26)|0,nn&=67108863;var En=(D+(d=Math.imul(He,Ze))|0)+((8191&(i=(i=Math.imul(He,lt))+Math.imul($e,Ze)|0))<<13)|0;return D=((y=Math.imul($e,lt))+(i>>>13)|0)+(En>>>26)|0,En&=67108863,_[0]=ln,_[1]=jt,_[2]=qt,_[3]=wn,_[4]=hn,_[5]=gn,_[6]=Rn,_[7]=on,_[8]=_n,_[9]=Jt,_[10]=Ft,_[11]=An,_[12]=Cn,_[13]=Sn,_[14]=Rt,_[15]=Dn,_[16]=Qt,_[17]=nn,_[18]=En,0!==D&&(_[19]=D,l.length++),l};function k(x,r,s){return(new O).mulp(x,r,s)}function O(x,r){this.x=x,this.y=r}Math.imul||(I=w),u.prototype.mulTo=function(r,s){var a=this.length+r.length;return 10===this.length&&10===r.length?I(this,r,s):a<63?w(this,r,s):a<1024?function(x,r,s){s.negative=r.negative^x.negative,s.length=x.length+r.length;for(var l=0,a=0,f=0;f<s.length-1;f++){var _=a;a=0;for(var D=67108863&l,d=Math.min(f,r.length-1),i=Math.max(0,f-x.length+1);i<=d;i++){var Z=(0|x.words[f-i])*(0|r.words[i]),ge=67108863&Z;D=67108863&(ge=ge+D|0),a+=(_=(_=_+(Z/67108864|0)|0)+(ge>>>26)|0)>>>26,_&=67108863}s.words[f]=D,l=_,_=a}return 0!==l?s.words[f]=l:s.length--,s.strip()}(this,r,s):k(this,r,s)},O.prototype.makeRBT=function(r){for(var s=new Array(r),l=u.prototype._countBits(r)-1,a=0;a<r;a++)s[a]=this.revBin(a,l,r);return s},O.prototype.revBin=function(r,s,l){if(0===r||r===l-1)return r;for(var a=0,f=0;f<s;f++)a|=(1&r)<<s-f-1,r>>=1;return a},O.prototype.permute=function(r,s,l,a,f,_){for(var D=0;D<_;D++)a[D]=s[r[D]],f[D]=l[r[D]]},O.prototype.transform=function(r,s,l,a,f,_){this.permute(_,r,s,l,a,f);for(var D=1;D<f;D<<=1)for(var d=D<<1,i=Math.cos(2*Math.PI/d),y=Math.sin(2*Math.PI/d),z=0;z<f;z+=d)for(var q=i,Z=y,ge=0;ge<D;ge++){var me=l[z+ge],le=a[z+ge],fe=l[z+ge+D],ae=a[z+ge+D],de=q*fe-Z*ae;ae=q*ae+Z*fe,l[z+ge]=me+(fe=de),a[z+ge]=le+ae,l[z+ge+D]=me-fe,a[z+ge+D]=le-ae,ge!==d&&(de=i*q-y*Z,Z=i*Z+y*q,q=de)}},O.prototype.guessLen13b=function(r,s){var l=1|Math.max(s,r),a=1&l,f=0;for(l=l/2|0;l;l>>>=1)f++;return 1<<f+1+a},O.prototype.conjugate=function(r,s,l){if(!(l<=1))for(var a=0;a<l/2;a++){var f=r[a];r[a]=r[l-a-1],r[l-a-1]=f,f=s[a],s[a]=-s[l-a-1],s[l-a-1]=-f}},O.prototype.normalize13b=function(r,s){for(var l=0,a=0;a<s/2;a++){var f=8192*Math.round(r[2*a+1]/s)+Math.round(r[2*a]/s)+l;r[a]=67108863&f,l=f<67108864?0:f/67108864|0}return r},O.prototype.convert13b=function(r,s,l,a){for(var f=0,_=0;_<s;_++)l[2*_]=8191&(f+=0|r[_]),l[2*_+1]=8191&(f>>>=13),f>>>=13;for(_=2*s;_<a;++_)l[_]=0;m(0===f),m(0==(-8192&f))},O.prototype.stub=function(r){for(var s=new Array(r),l=0;l<r;l++)s[l]=0;return s},O.prototype.mulp=function(r,s,l){var a=2*this.guessLen13b(r.length,s.length),f=this.makeRBT(a),_=this.stub(a),D=new Array(a),d=new Array(a),i=new Array(a),y=new Array(a),z=new Array(a),q=new Array(a),Z=l.words;Z.length=a,this.convert13b(r.words,r.length,D,a),this.convert13b(s.words,s.length,y,a),this.transform(D,_,d,i,a,f),this.transform(y,_,z,q,a,f);for(var ge=0;ge<a;ge++){var me=d[ge]*z[ge]-i[ge]*q[ge];i[ge]=d[ge]*q[ge]+i[ge]*z[ge],d[ge]=me}return this.conjugate(d,i,a),this.transform(d,i,Z,_,a,f),this.conjugate(Z,_,a),this.normalize13b(Z,a),l.negative=r.negative^s.negative,l.length=r.length+s.length,l.strip()},u.prototype.mul=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),this.mulTo(r,s)},u.prototype.mulf=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),k(this,r,s)},u.prototype.imul=function(r){return this.clone().mulTo(r,this)},u.prototype.imuln=function(r){m("number"==typeof r),m(r<67108864);for(var s=0,l=0;l<this.length;l++){var a=(0|this.words[l])*r,f=(67108863&a)+(67108863&s);s>>=26,s+=a/67108864|0,s+=f>>>26,this.words[l]=67108863&f}return 0!==s&&(this.words[l]=s,this.length++),this},u.prototype.muln=function(r){return this.clone().imuln(r)},u.prototype.sqr=function(){return this.mul(this)},u.prototype.isqr=function(){return this.imul(this.clone())},u.prototype.pow=function(r){var s=function(x){for(var r=new Array(x.bitLength()),s=0;s<r.length;s++){var a=s%26;r[s]=(x.words[s/26|0]&1<<a)>>>a}return r}(r);if(0===s.length)return new u(1);for(var l=this,a=0;a<s.length&&0===s[a];a++,l=l.sqr());if(++a<s.length)for(var f=l.sqr();a<s.length;a++,f=f.sqr())0!==s[a]&&(l=l.mul(f));return l},u.prototype.iushln=function(r){m("number"==typeof r&&r>=0);var f,s=r%26,l=(r-s)/26,a=67108863>>>26-s<<26-s;if(0!==s){var _=0;for(f=0;f<this.length;f++){var D=this.words[f]&a;this.words[f]=(0|this.words[f])-D<<s|_,_=D>>>26-s}_&&(this.words[f]=_,this.length++)}if(0!==l){for(f=this.length-1;f>=0;f--)this.words[f+l]=this.words[f];for(f=0;f<l;f++)this.words[f]=0;this.length+=l}return this.strip()},u.prototype.ishln=function(r){return m(0===this.negative),this.iushln(r)},u.prototype.iushrn=function(r,s,l){var a;m("number"==typeof r&&r>=0),a=s?(s-s%26)/26:0;var f=r%26,_=Math.min((r-f)/26,this.length),D=67108863^67108863>>>f<<f,d=l;if(a-=_,a=Math.max(0,a),d){for(var i=0;i<_;i++)d.words[i]=this.words[i];d.length=_}if(0!==_)if(this.length>_)for(this.length-=_,i=0;i<this.length;i++)this.words[i]=this.words[i+_];else this.words[0]=0,this.length=1;var y=0;for(i=this.length-1;i>=0&&(0!==y||i>=a);i--){var z=0|this.words[i];this.words[i]=y<<26-f|z>>>f,y=z&D}return d&&0!==y&&(d.words[d.length++]=y),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},u.prototype.ishrn=function(r,s,l){return m(0===this.negative),this.iushrn(r,s,l)},u.prototype.shln=function(r){return this.clone().ishln(r)},u.prototype.ushln=function(r){return this.clone().iushln(r)},u.prototype.shrn=function(r){return this.clone().ishrn(r)},u.prototype.ushrn=function(r){return this.clone().iushrn(r)},u.prototype.testn=function(r){m("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return!(this.length<=l||!(this.words[l]&1<<s))},u.prototype.imaskn=function(r){m("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return m(0===this.negative,"imaskn works only with positive numbers"),this.length<=l?this:(0!==s&&l++,this.length=Math.min(l,this.length),0!==s&&(this.words[this.length-1]&=67108863^67108863>>>s<<s),this.strip())},u.prototype.maskn=function(r){return this.clone().imaskn(r)},u.prototype.iaddn=function(r){return m("number"==typeof r),m(r<67108864),r<0?this.isubn(-r):0!==this.negative?1===this.length&&(0|this.words[0])<r?(this.words[0]=r-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(r),this.negative=1,this):this._iaddn(r)},u.prototype._iaddn=function(r){this.words[0]+=r;for(var s=0;s<this.length&&this.words[s]>=67108864;s++)this.words[s]-=67108864,s===this.length-1?this.words[s+1]=1:this.words[s+1]++;return this.length=Math.max(this.length,s+1),this},u.prototype.isubn=function(r){if(m("number"==typeof r),m(r<67108864),r<0)return this.iaddn(-r);if(0!==this.negative)return this.negative=0,this.iaddn(r),this.negative=1,this;if(this.words[0]-=r,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var s=0;s<this.length&&this.words[s]<0;s++)this.words[s]+=67108864,this.words[s+1]-=1;return this.strip()},u.prototype.addn=function(r){return this.clone().iaddn(r)},u.prototype.subn=function(r){return this.clone().isubn(r)},u.prototype.iabs=function(){return this.negative=0,this},u.prototype.abs=function(){return this.clone().iabs()},u.prototype._ishlnsubmul=function(r,s,l){var f;this._expand(r.length+l);var _,D=0;for(f=0;f<r.length;f++){_=(0|this.words[f+l])+D;var d=(0|r.words[f])*s;D=((_-=67108863&d)>>26)-(d/67108864|0),this.words[f+l]=67108863&_}for(;f<this.length-l;f++)D=(_=(0|this.words[f+l])+D)>>26,this.words[f+l]=67108863&_;if(0===D)return this.strip();for(m(-1===D),D=0,f=0;f<this.length;f++)D=(_=-(0|this.words[f])+D)>>26,this.words[f]=67108863&_;return this.negative=1,this.strip()},u.prototype._wordDiv=function(r,s){var l,a=this.clone(),f=r,_=0|f.words[f.length-1];0!=(l=26-this._countBits(_))&&(f=f.ushln(l),a.iushln(l),_=0|f.words[f.length-1]);var i,d=a.length-f.length;if("mod"!==s){(i=new u(null)).length=d+1,i.words=new Array(i.length);for(var y=0;y<i.length;y++)i.words[y]=0}var z=a.clone()._ishlnsubmul(f,1,d);0===z.negative&&(a=z,i&&(i.words[d]=1));for(var q=d-1;q>=0;q--){var Z=67108864*(0|a.words[f.length+q])+(0|a.words[f.length+q-1]);for(Z=Math.min(Z/_|0,67108863),a._ishlnsubmul(f,Z,q);0!==a.negative;)Z--,a.negative=0,a._ishlnsubmul(f,1,q),a.isZero()||(a.negative^=1);i&&(i.words[q]=Z)}return i&&i.strip(),a.strip(),"div"!==s&&0!==l&&a.iushrn(l),{div:i||null,mod:a}},u.prototype.divmod=function(r,s,l){return m(!r.isZero()),this.isZero()?{div:new u(0),mod:new u(0)}:0!==this.negative&&0===r.negative?(_=this.neg().divmod(r,s),"mod"!==s&&(a=_.div.neg()),"div"!==s&&(f=_.mod.neg(),l&&0!==f.negative&&f.iadd(r)),{div:a,mod:f}):0===this.negative&&0!==r.negative?(_=this.divmod(r.neg(),s),"mod"!==s&&(a=_.div.neg()),{div:a,mod:_.mod}):0!=(this.negative&r.negative)?(_=this.neg().divmod(r.neg(),s),"div"!==s&&(f=_.mod.neg(),l&&0!==f.negative&&f.isub(r)),{div:_.div,mod:f}):r.length>this.length||this.cmp(r)<0?{div:new u(0),mod:this}:1===r.length?"div"===s?{div:this.divn(r.words[0]),mod:null}:"mod"===s?{div:null,mod:new u(this.modn(r.words[0]))}:{div:this.divn(r.words[0]),mod:new u(this.modn(r.words[0]))}:this._wordDiv(r,s);var a,f,_},u.prototype.div=function(r){return this.divmod(r,"div",!1).div},u.prototype.mod=function(r){return this.divmod(r,"mod",!1).mod},u.prototype.umod=function(r){return this.divmod(r,"mod",!0).mod},u.prototype.divRound=function(r){var s=this.divmod(r);if(s.mod.isZero())return s.div;var l=0!==s.div.negative?s.mod.isub(r):s.mod,a=r.ushrn(1),f=r.andln(1),_=l.cmp(a);return _<0||1===f&&0===_?s.div:0!==s.div.negative?s.div.isubn(1):s.div.iaddn(1)},u.prototype.modn=function(r){m(r<=67108863);for(var s=(1<<26)%r,l=0,a=this.length-1;a>=0;a--)l=(s*l+(0|this.words[a]))%r;return l},u.prototype.idivn=function(r){m(r<=67108863);for(var s=0,l=this.length-1;l>=0;l--){var a=(0|this.words[l])+67108864*s;this.words[l]=a/r|0,s=a%r}return this.strip()},u.prototype.divn=function(r){return this.clone().idivn(r)},u.prototype.egcd=function(r){m(0===r.negative),m(!r.isZero());var s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),_=new u(0),D=new u(1),d=0;s.isEven()&&l.isEven();)s.iushrn(1),l.iushrn(1),++d;for(var i=l.clone(),y=s.clone();!s.isZero();){for(var z=0,q=1;0==(s.words[0]&q)&&z<26;++z,q<<=1);if(z>0)for(s.iushrn(z);z-- >0;)(a.isOdd()||f.isOdd())&&(a.iadd(i),f.isub(y)),a.iushrn(1),f.iushrn(1);for(var Z=0,ge=1;0==(l.words[0]&ge)&&Z<26;++Z,ge<<=1);if(Z>0)for(l.iushrn(Z);Z-- >0;)(_.isOdd()||D.isOdd())&&(_.iadd(i),D.isub(y)),_.iushrn(1),D.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(_),f.isub(D)):(l.isub(s),_.isub(a),D.isub(f))}return{a:_,b:D,gcd:l.iushln(d)}},u.prototype._invmp=function(r){m(0===r.negative),m(!r.isZero());var z,s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),_=l.clone();s.cmpn(1)>0&&l.cmpn(1)>0;){for(var D=0,d=1;0==(s.words[0]&d)&&D<26;++D,d<<=1);if(D>0)for(s.iushrn(D);D-- >0;)a.isOdd()&&a.iadd(_),a.iushrn(1);for(var i=0,y=1;0==(l.words[0]&y)&&i<26;++i,y<<=1);if(i>0)for(l.iushrn(i);i-- >0;)f.isOdd()&&f.iadd(_),f.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(f)):(l.isub(s),f.isub(a))}return(z=0===s.cmpn(1)?a:f).cmpn(0)<0&&z.iadd(r),z},u.prototype.gcd=function(r){if(this.isZero())return r.abs();if(r.isZero())return this.abs();var s=this.clone(),l=r.clone();s.negative=0,l.negative=0;for(var a=0;s.isEven()&&l.isEven();a++)s.iushrn(1),l.iushrn(1);for(;;){for(;s.isEven();)s.iushrn(1);for(;l.isEven();)l.iushrn(1);var f=s.cmp(l);if(f<0){var _=s;s=l,l=_}else if(0===f||0===l.cmpn(1))break;s.isub(l)}return l.iushln(a)},u.prototype.invm=function(r){return this.egcd(r).a.umod(r)},u.prototype.isEven=function(){return 0==(1&this.words[0])},u.prototype.isOdd=function(){return 1==(1&this.words[0])},u.prototype.andln=function(r){return this.words[0]&r},u.prototype.bincn=function(r){m("number"==typeof r);var s=r%26,l=(r-s)/26,a=1<<s;if(this.length<=l)return this._expand(l+1),this.words[l]|=a,this;for(var f=a,_=l;0!==f&&_<this.length;_++){var D=0|this.words[_];f=(D+=f)>>>26,this.words[_]=D&=67108863}return 0!==f&&(this.words[_]=f,this.length++),this},u.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},u.prototype.cmpn=function(r){var l,s=r<0;if(0!==this.negative&&!s)return-1;if(0===this.negative&&s)return 1;if(this.strip(),this.length>1)l=1;else{s&&(r=-r),m(r<=67108863,"Number is too big");var a=0|this.words[0];l=a===r?0:a<r?-1:1}return 0!==this.negative?0|-l:l},u.prototype.cmp=function(r){if(0!==this.negative&&0===r.negative)return-1;if(0===this.negative&&0!==r.negative)return 1;var s=this.ucmp(r);return 0!==this.negative?0|-s:s},u.prototype.ucmp=function(r){if(this.length>r.length)return 1;if(this.length<r.length)return-1;for(var s=0,l=this.length-1;l>=0;l--){var a=0|this.words[l],f=0|r.words[l];if(a!==f){a<f?s=-1:a>f&&(s=1);break}}return s},u.prototype.gtn=function(r){return 1===this.cmpn(r)},u.prototype.gt=function(r){return 1===this.cmp(r)},u.prototype.gten=function(r){return this.cmpn(r)>=0},u.prototype.gte=function(r){return this.cmp(r)>=0},u.prototype.ltn=function(r){return-1===this.cmpn(r)},u.prototype.lt=function(r){return-1===this.cmp(r)},u.prototype.lten=function(r){return this.cmpn(r)<=0},u.prototype.lte=function(r){return this.cmp(r)<=0},u.prototype.eqn=function(r){return 0===this.cmpn(r)},u.prototype.eq=function(r){return 0===this.cmp(r)},u.red=function(r){return new $(r)},u.prototype.toRed=function(r){return m(!this.red,"Already a number in reduction context"),m(0===this.negative,"red works only with positives"),r.convertTo(this)._forceRed(r)},u.prototype.fromRed=function(){return m(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},u.prototype._forceRed=function(r){return this.red=r,this},u.prototype.forceRed=function(r){return m(!this.red,"Already a number in reduction context"),this._forceRed(r)},u.prototype.redAdd=function(r){return m(this.red,"redAdd works only with red numbers"),this.red.add(this,r)},u.prototype.redIAdd=function(r){return m(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,r)},u.prototype.redSub=function(r){return m(this.red,"redSub works only with red numbers"),this.red.sub(this,r)},u.prototype.redISub=function(r){return m(this.red,"redISub works only with red numbers"),this.red.isub(this,r)},u.prototype.redShl=function(r){return m(this.red,"redShl works only with red numbers"),this.red.shl(this,r)},u.prototype.redMul=function(r){return m(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.mul(this,r)},u.prototype.redIMul=function(r){return m(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.imul(this,r)},u.prototype.redSqr=function(){return m(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},u.prototype.redISqr=function(){return m(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},u.prototype.redSqrt=function(){return m(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},u.prototype.redInvm=function(){return m(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},u.prototype.redNeg=function(){return m(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},u.prototype.redPow=function(r){return m(this.red&&!r.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,r)};var V={k256:null,p224:null,p192:null,p25519:null};function U(x,r){this.name=x,this.p=new u(r,16),this.n=this.p.bitLength(),this.k=new u(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function B(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function H(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function W(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function te(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function $(x){if("string"==typeof x){var r=u._prime(x);this.m=r.p,this.prime=r}else m(x.gtn(1),"modulus must be greater than 1"),this.m=x,this.prime=null}function pe(x){$.call(this,x),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new u(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}U.prototype._tmp=function(){var r=new u(null);return r.words=new Array(Math.ceil(this.n/13)),r},U.prototype.ireduce=function(r){var l,s=r;do{this.split(s,this.tmp),l=(s=(s=this.imulK(s)).iadd(this.tmp)).bitLength()}while(l>this.n);var a=l<this.n?-1:s.ucmp(this.p);return 0===a?(s.words[0]=0,s.length=1):a>0?s.isub(this.p):void 0!==s.strip?s.strip():s._strip(),s},U.prototype.split=function(r,s){r.iushrn(this.n,0,s)},U.prototype.imulK=function(r){return r.imul(this.k)},R(B,U),B.prototype.split=function(r,s){for(var l=4194303,a=Math.min(r.length,9),f=0;f<a;f++)s.words[f]=r.words[f];if(s.length=a,r.length<=9)return r.words[0]=0,void(r.length=1);var _=r.words[9];for(s.words[s.length++]=_&l,f=10;f<r.length;f++){var D=0|r.words[f];r.words[f-10]=(D&l)<<4|_>>>22,_=D}r.words[f-10]=_>>>=22,r.length-=0===_&&r.length>10?10:9},B.prototype.imulK=function(r){r.words[r.length]=0,r.words[r.length+1]=0,r.length+=2;for(var s=0,l=0;l<r.length;l++){var a=0|r.words[l];r.words[l]=67108863&(s+=977*a),s=64*a+(s/67108864|0)}return 0===r.words[r.length-1]&&(r.length--,0===r.words[r.length-1]&&r.length--),r},R(H,U),R(W,U),R(te,U),te.prototype.imulK=function(r){for(var s=0,l=0;l<r.length;l++){var a=19*(0|r.words[l])+s,f=67108863&a;a>>>=26,r.words[l]=f,s=a}return 0!==s&&(r.words[r.length++]=s),r},u._prime=function(r){if(V[r])return V[r];var s;if("k256"===r)s=new B;else if("p224"===r)s=new H;else if("p192"===r)s=new W;else{if("p25519"!==r)throw new Error("Unknown prime "+r);s=new te}return V[r]=s,s},$.prototype._verify1=function(r){m(0===r.negative,"red works only with positives"),m(r.red,"red works only with red numbers")},$.prototype._verify2=function(r,s){m(0==(r.negative|s.negative),"red works only with positives"),m(r.red&&r.red===s.red,"red works only with red numbers")},$.prototype.imod=function(r){return this.prime?this.prime.ireduce(r)._forceRed(this):r.umod(this.m)._forceRed(this)},$.prototype.neg=function(r){return r.isZero()?r.clone():this.m.sub(r)._forceRed(this)},$.prototype.add=function(r,s){this._verify2(r,s);var l=r.add(s);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},$.prototype.iadd=function(r,s){this._verify2(r,s);var l=r.iadd(s);return l.cmp(this.m)>=0&&l.isub(this.m),l},$.prototype.sub=function(r,s){this._verify2(r,s);var l=r.sub(s);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},$.prototype.isub=function(r,s){this._verify2(r,s);var l=r.isub(s);return l.cmpn(0)<0&&l.iadd(this.m),l},$.prototype.shl=function(r,s){return this._verify1(r),this.imod(r.ushln(s))},$.prototype.imul=function(r,s){return this._verify2(r,s),this.imod(r.imul(s))},$.prototype.mul=function(r,s){return this._verify2(r,s),this.imod(r.mul(s))},$.prototype.isqr=function(r){return this.imul(r,r.clone())},$.prototype.sqr=function(r){return this.mul(r,r)},$.prototype.sqrt=function(r){if(r.isZero())return r.clone();var s=this.m.andln(3);if(m(s%2==1),3===s){var l=this.m.add(new u(1)).iushrn(2);return this.pow(r,l)}for(var a=this.m.subn(1),f=0;!a.isZero()&&0===a.andln(1);)f++,a.iushrn(1);m(!a.isZero());var _=new u(1).toRed(this),D=_.redNeg(),d=this.m.subn(1).iushrn(1),i=this.m.bitLength();for(i=new u(2*i*i).toRed(this);0!==this.pow(i,d).cmp(D);)i.redIAdd(D);for(var y=this.pow(i,a),z=this.pow(r,a.addn(1).iushrn(1)),q=this.pow(r,a),Z=f;0!==q.cmp(_);){for(var ge=q,me=0;0!==ge.cmp(_);me++)ge=ge.redSqr();m(me<Z);var le=this.pow(y,new u(1).iushln(Z-me-1));z=z.redMul(le),y=le.redSqr(),q=q.redMul(y),Z=me}return z},$.prototype.invm=function(r){var s=r._invmp(this.m);return 0!==s.negative?(s.negative=0,this.imod(s).redNeg()):this.imod(s)},$.prototype.pow=function(r,s){if(s.isZero())return new u(1).toRed(this);if(0===s.cmpn(1))return r.clone();var a=new Array(16);a[0]=new u(1).toRed(this),a[1]=r;for(var f=2;f<a.length;f++)a[f]=this.mul(a[f-1],r);var _=a[0],D=0,d=0,i=s.bitLength()%26;for(0===i&&(i=26),f=s.length-1;f>=0;f--){for(var y=s.words[f],z=i-1;z>=0;z--){var q=y>>z&1;_!==a[0]&&(_=this.sqr(_)),0!==q||0!==D?(D<<=1,D|=q,(4==++d||0===f&&0===z)&&(_=this.mul(_,a[D]),d=0,D=0)):d=0}i=26}return _},$.prototype.convertTo=function(r){var s=r.umod(this.m);return s===r?s.clone():s},$.prototype.convertFrom=function(r){var s=r.clone();return s.red=null,s},u.mont=function(r){return new pe(r)},R(pe,$),pe.prototype.convertTo=function(r){return this.imod(r.ushln(this.shift))},pe.prototype.convertFrom=function(r){var s=this.imod(r.mul(this.rinv));return s.red=null,s},pe.prototype.imul=function(r,s){if(r.isZero()||s.isZero())return r.words[0]=0,r.length=1,r;var l=r.imul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),_=f;return f.cmp(this.m)>=0?_=f.isub(this.m):f.cmpn(0)<0&&(_=f.iadd(this.m)),_._forceRed(this)},pe.prototype.mul=function(r,s){if(r.isZero()||s.isZero())return new u(0)._forceRed(this);var l=r.mul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),_=f;return f.cmp(this.m)>=0?_=f.isub(this.m):f.cmpn(0)<0&&(_=f.iadd(this.m)),_._forceRed(this)},pe.prototype.invm=function(r){return this.imod(r._invmp(this.m).mul(this.r2))._forceRed(this)}}(Y=E.nmd(Y),this)},3105:Y=>{"use strict";var p,L="object"==typeof Reflect?Reflect:null,E=L&&"function"==typeof L.apply?L.apply:function(U,B,H){return Function.prototype.apply.call(U,B,H)};p=L&&"function"==typeof L.ownKeys?L.ownKeys:Object.getOwnPropertySymbols?function(U){return Object.getOwnPropertyNames(U).concat(Object.getOwnPropertySymbols(U))}:function(U){return Object.getOwnPropertyNames(U)};var m=Number.isNaN||function(U){return U!=U};function R(){R.init.call(this)}Y.exports=R,Y.exports.once=function(V,U){return new Promise(function(B,H){function W($){V.removeListener(U,te),H($)}function te(){"function"==typeof V.removeListener&&V.removeListener("error",W),B([].slice.call(arguments))}O(V,U,te,{once:!0}),"error"!==U&&function(V,U,B){"function"==typeof V.on&&O(V,"error",U,{once:!0})}(V,W)})},R.EventEmitter=R,R.prototype._events=void 0,R.prototype._eventsCount=0,R.prototype._maxListeners=void 0;var u=10;function v(V){if("function"!=typeof V)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof V)}function M(V){return void 0===V._maxListeners?R.defaultMaxListeners:V._maxListeners}function A(V,U,B,H){var W,te,$;if(v(B),void 0===(te=V._events)?(te=V._events=Object.create(null),V._eventsCount=0):(void 0!==te.newListener&&(V.emit("newListener",U,B.listener?B.listener:B),te=V._events),$=te[U]),void 0===$)$=te[U]=B,++V._eventsCount;else if("function"==typeof $?$=te[U]=H?[B,$]:[$,B]:H?$.unshift(B):$.push(B),(W=M(V))>0&&$.length>W&&!$.warned){$.warned=!0;var pe=new Error("Possible EventEmitter memory leak detected. "+$.length+" "+String(U)+" listeners added. Use emitter.setMaxListeners() to increase limit");pe.name="MaxListenersExceededWarning",pe.emitter=V,pe.type=U,pe.count=$.length,function(V){console&&console.warn&&console.warn(V)}(pe)}return V}function T(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(V,U,B){var H={fired:!1,wrapFn:void 0,target:V,type:U,listener:B},W=T.bind(H);return W.listener=B,H.wrapFn=W,W}function h(V,U,B){var H=V._events;if(void 0===H)return[];var W=H[U];return void 0===W?[]:"function"==typeof W?B?[W.listener||W]:[W]:B?function(V){for(var U=new Array(V.length),B=0;B<U.length;++B)U[B]=V[B].listener||V[B];return U}(W):b(W,W.length)}function C(V){var U=this._events;if(void 0!==U){var B=U[V];if("function"==typeof B)return 1;if(void 0!==B)return B.length}return 0}function b(V,U){for(var B=new Array(U),H=0;H<U;++H)B[H]=V[H];return B}function O(V,U,B,H){if("function"==typeof V.on)H.once?V.once(U,B):V.on(U,B);else{if("function"!=typeof V.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof V);V.addEventListener(U,function W(te){H.once&&V.removeEventListener(U,W),B(te)})}}Object.defineProperty(R,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(V){if("number"!=typeof V||V<0||m(V))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+V+".");u=V}}),R.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},R.prototype.setMaxListeners=function(U){if("number"!=typeof U||U<0||m(U))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+U+".");return this._maxListeners=U,this},R.prototype.getMaxListeners=function(){return M(this)},R.prototype.emit=function(U){for(var B=[],H=1;H<arguments.length;H++)B.push(arguments[H]);var W="error"===U,te=this._events;if(void 0!==te)W=W&&void 0===te.error;else if(!W)return!1;if(W){var $;if(B.length>0&&($=B[0]),$ instanceof Error)throw $;var pe=new Error("Unhandled error."+($?" ("+$.message+")":""));throw pe.context=$,pe}var x=te[U];if(void 0===x)return!1;if("function"==typeof x)E(x,this,B);else{var r=x.length,s=b(x,r);for(H=0;H<r;++H)E(s[H],this,B)}return!0},R.prototype.on=R.prototype.addListener=function(U,B){return A(this,U,B,!1)},R.prototype.prependListener=function(U,B){return A(this,U,B,!0)},R.prototype.once=function(U,B){return v(B),this.on(U,g(this,U,B)),this},R.prototype.prependOnceListener=function(U,B){return v(B),this.prependListener(U,g(this,U,B)),this},R.prototype.off=R.prototype.removeListener=function(U,B){var H,W,te,$,pe;if(v(B),void 0===(W=this._events))return this;if(void 0===(H=W[U]))return this;if(H===B||H.listener===B)0==--this._eventsCount?this._events=Object.create(null):(delete W[U],W.removeListener&&this.emit("removeListener",U,H.listener||B));else if("function"!=typeof H){for(te=-1,$=H.length-1;$>=0;$--)if(H[$]===B||H[$].listener===B){pe=H[$].listener,te=$;break}if(te<0)return this;0===te?H.shift():function(V,U){for(;U+1<V.length;U++)V[U]=V[U+1];V.pop()}(H,te),1===H.length&&(W[U]=H[0]),void 0!==W.removeListener&&this.emit("removeListener",U,pe||B)}return this},R.prototype.removeAllListeners=function(U){var B,H,W;if(void 0===(H=this._events))return this;if(void 0===H.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==H[U]&&(0==--this._eventsCount?this._events=Object.create(null):delete H[U]),this;if(0===arguments.length){var $,te=Object.keys(H);for(W=0;W<te.length;++W)"removeListener"!==($=te[W])&&this.removeAllListeners($);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(B=H[U]))this.removeListener(U,B);else if(void 0!==B)for(W=B.length-1;W>=0;W--)this.removeListener(U,B[W]);return this},R.prototype.listeners=function(U){return h(this,U,!0)},R.prototype.rawListeners=function(U){return h(this,U,!1)},R.listenerCount=function(V,U){return"function"==typeof V.listenerCount?V.listenerCount(U):C.call(V,U)},R.prototype.listenerCount=C,R.prototype.eventNames=function(){return this._eventsCount>0?p(this._events):[]}},2367:(Y,L,E)=>{var p=E(5859).Buffer,N=E(3264);Y.exports=function(R,u,v,M){if(p.isBuffer(R)||(R=p.from(R,"binary")),u&&(p.isBuffer(u)||(u=p.from(u,"binary")),8!==u.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var A=v/8,T=p.alloc(A),g=p.alloc(M||0),h=p.alloc(0);A>0||M>0;){var C=new N;C.update(h),C.update(R),u&&C.update(u),h=C.digest();var b=0;if(A>0){var w=T.length-A;b=Math.min(A,h.length),h.copy(T,w,0,b),A-=b}if(b<h.length&&M>0){var I=g.length-M,P=Math.min(M,h.length-b);h.copy(g,I,b,b+P),M-=P}}return h.fill(0),{key:T,iv:g}}},5414:(Y,L,E)=>{"use strict";var p=E(5036).Buffer,N=E(8300).Transform;function u(v){N.call(this),this._block=p.allocUnsafe(v),this._blockSize=v,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}E(9879)(u,N),u.prototype._transform=function(v,M,A){var T=null;try{this.update(v,M)}catch(g){T=g}A(T)},u.prototype._flush=function(v){var M=null;try{this.push(this.digest())}catch(A){M=A}v(M)},u.prototype.update=function(v,M){if(function(v,M){if(!p.isBuffer(v)&&"string"!=typeof v)throw new TypeError("Data must be a string or a buffer")}(v),this._finalized)throw new Error("Digest already called");p.isBuffer(v)||(v=p.from(v,M));for(var A=this._block,T=0;this._blockOffset+v.length-T>=this._blockSize;){for(var g=this._blockOffset;g<this._blockSize;)A[g++]=v[T++];this._update(),this._blockOffset=0}for(;T<v.length;)A[this._blockOffset++]=v[T++];for(var h=0,C=8*v.length;C>0;++h)this._length[h]+=C,(C=this._length[h]/4294967296|0)>0&&(this._length[h]-=4294967296*C);return this},u.prototype._update=function(){throw new Error("_update is not implemented")},u.prototype.digest=function(v){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var M=this._digest();void 0!==v&&(M=M.toString(v)),this._block.fill(0),this._blockOffset=0;for(var A=0;A<4;++A)this._length[A]=0;return M},u.prototype._digest=function(){throw new Error("_digest is not implemented")},Y.exports=u},5036:(Y,L,E)=>{var p=E(3875),N=p.Buffer;function m(u,v){for(var M in u)v[M]=u[M]}function R(u,v,M){return N(u,v,M)}N.from&&N.alloc&&N.allocUnsafe&&N.allocUnsafeSlow?Y.exports=p:(m(p,L),L.Buffer=R),R.prototype=Object.create(N.prototype),m(N,R),R.from=function(u,v,M){if("number"==typeof u)throw new TypeError("Argument must not be a number");return N(u,v,M)},R.alloc=function(u,v,M){if("number"!=typeof u)throw new TypeError("Argument must be a number");var A=N(u);return void 0!==v?"string"==typeof M?A.fill(v,M):A.fill(v):A.fill(0),A},R.allocUnsafe=function(u){if("number"!=typeof u)throw new TypeError("Argument must be a number");return N(u)},R.allocUnsafeSlow=function(u){if("number"!=typeof u)throw new TypeError("Argument must be a number");return p.SlowBuffer(u)}},7909:(Y,L,E)=>{var p=L;p.utils=E(8291),p.common=E(1393),p.sha=E(2221),p.ripemd=E(1960),p.hmac=E(1905),p.sha1=p.sha.sha1,p.sha256=p.sha.sha256,p.sha224=p.sha.sha224,p.sha384=p.sha.sha384,p.sha512=p.sha.sha512,p.ripemd160=p.ripemd.ripemd160},1393:(Y,L,E)=>{"use strict";var p=E(8291),N=E(6055);function m(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}L.BlockHash=m,m.prototype.update=function(u,v){if(u=p.toArray(u,v),this.pending=this.pending?this.pending.concat(u):u,this.pendingTotal+=u.length,this.pending.length>=this._delta8){var M=(u=this.pending).length%this._delta8;this.pending=u.slice(u.length-M,u.length),0===this.pending.length&&(this.pending=null),u=p.join32(u,0,u.length-M,this.endian);for(var A=0;A<u.length;A+=this._delta32)this._update(u,A,A+this._delta32)}return this},m.prototype.digest=function(u){return this.update(this._pad()),N(null===this.pending),this._digest(u)},m.prototype._pad=function(){var u=this.pendingTotal,v=this._delta8,M=v-(u+this.padLength)%v,A=new Array(M+this.padLength);A[0]=128;for(var T=1;T<M;T++)A[T]=0;if(u<<=3,"big"===this.endian){for(var g=8;g<this.padLength;g++)A[T++]=0;A[T++]=0,A[T++]=0,A[T++]=0,A[T++]=0,A[T++]=u>>>24&255,A[T++]=u>>>16&255,A[T++]=u>>>8&255,A[T++]=255&u}else for(A[T++]=255&u,A[T++]=u>>>8&255,A[T++]=u>>>16&255,A[T++]=u>>>24&255,A[T++]=0,A[T++]=0,A[T++]=0,A[T++]=0,g=8;g<this.padLength;g++)A[T++]=0;return A}},1905:(Y,L,E)=>{"use strict";var p=E(8291),N=E(6055);function m(R,u,v){if(!(this instanceof m))return new m(R,u,v);this.Hash=R,this.blockSize=R.blockSize/8,this.outSize=R.outSize/8,this.inner=null,this.outer=null,this._init(p.toArray(u,v))}Y.exports=m,m.prototype._init=function(u){u.length>this.blockSize&&(u=(new this.Hash).update(u).digest()),N(u.length<=this.blockSize);for(var v=u.length;v<this.blockSize;v++)u.push(0);for(v=0;v<u.length;v++)u[v]^=54;for(this.inner=(new this.Hash).update(u),v=0;v<u.length;v++)u[v]^=106;this.outer=(new this.Hash).update(u)},m.prototype.update=function(u,v){return this.inner.update(u,v),this},m.prototype.digest=function(u){return this.outer.update(this.inner.digest()),this.outer.digest(u)}},1960:(Y,L,E)=>{"use strict";var p=E(8291),N=E(1393),m=p.rotl32,R=p.sum32,u=p.sum32_3,v=p.sum32_4,M=N.BlockHash;function A(){if(!(this instanceof A))return new A;M.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function T(P,k,O,V){return P<=15?k^O^V:P<=31?k&O|~k&V:P<=47?(k|~O)^V:P<=63?k&V|O&~V:k^(O|~V)}function h(P){return P<=15?1352829926:P<=31?1548603684:P<=47?1836072691:P<=63?2053994217:0}p.inherits(A,M),L.ripemd160=A,A.blockSize=512,A.outSize=160,A.hmacStrength=192,A.padLength=64,A.prototype._update=function(k,O){for(var V=this.h[0],U=this.h[1],B=this.h[2],H=this.h[3],W=this.h[4],te=V,$=U,pe=B,x=H,r=W,s=0;s<80;s++){var l=R(m(v(V,T(s,U,B,H),k[C[s]+O],(P=s)<=15?0:P<=31?1518500249:P<=47?1859775393:P<=63?2400959708:2840853838),w[s]),W);V=W,W=H,H=m(B,10),B=U,U=l,l=R(m(v(te,T(79-s,$,pe,x),k[b[s]+O],h(s)),I[s]),r),te=r,r=x,x=m(pe,10),pe=$,$=l}var P;l=u(this.h[1],B,x),this.h[1]=u(this.h[2],H,r),this.h[2]=u(this.h[3],W,te),this.h[3]=u(this.h[4],V,$),this.h[4]=u(this.h[0],U,pe),this.h[0]=l},A.prototype._digest=function(k){return"hex"===k?p.toHex32(this.h,"little"):p.split32(this.h,"little")};var C=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],b=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],w=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],I=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},2221:(Y,L,E)=>{"use strict";L.sha1=E(3605),L.sha224=E(9643),L.sha256=E(6021),L.sha384=E(3513),L.sha512=E(4958)},3605:(Y,L,E)=>{"use strict";var p=E(8291),N=E(1393),m=E(8491),R=p.rotl32,u=p.sum32,v=p.sum32_5,M=m.ft_1,A=N.BlockHash,T=[1518500249,1859775393,2400959708,3395469782];function g(){if(!(this instanceof g))return new g;A.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}p.inherits(g,A),Y.exports=g,g.blockSize=512,g.outSize=160,g.hmacStrength=80,g.padLength=64,g.prototype._update=function(C,b){for(var w=this.W,I=0;I<16;I++)w[I]=C[b+I];for(;I<w.length;I++)w[I]=R(w[I-3]^w[I-8]^w[I-14]^w[I-16],1);var P=this.h[0],k=this.h[1],O=this.h[2],V=this.h[3],U=this.h[4];for(I=0;I<w.length;I++){var B=~~(I/20),H=v(R(P,5),M(B,k,O,V),U,w[I],T[B]);U=V,V=O,O=R(k,30),k=P,P=H}this.h[0]=u(this.h[0],P),this.h[1]=u(this.h[1],k),this.h[2]=u(this.h[2],O),this.h[3]=u(this.h[3],V),this.h[4]=u(this.h[4],U)},g.prototype._digest=function(C){return"hex"===C?p.toHex32(this.h,"big"):p.split32(this.h,"big")}},9643:(Y,L,E)=>{"use strict";var p=E(8291),N=E(6021);function m(){if(!(this instanceof m))return new m;N.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}p.inherits(m,N),Y.exports=m,m.blockSize=512,m.outSize=224,m.hmacStrength=192,m.padLength=64,m.prototype._digest=function(u){return"hex"===u?p.toHex32(this.h.slice(0,7),"big"):p.split32(this.h.slice(0,7),"big")}},6021:(Y,L,E)=>{"use strict";var p=E(8291),N=E(1393),m=E(8491),R=E(6055),u=p.sum32,v=p.sum32_4,M=p.sum32_5,A=m.ch32,T=m.maj32,g=m.s0_256,h=m.s1_256,C=m.g0_256,b=m.g1_256,w=N.BlockHash,I=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function P(){if(!(this instanceof P))return new P;w.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=I,this.W=new Array(64)}p.inherits(P,w),Y.exports=P,P.blockSize=512,P.outSize=256,P.hmacStrength=192,P.padLength=64,P.prototype._update=function(O,V){for(var U=this.W,B=0;B<16;B++)U[B]=O[V+B];for(;B<U.length;B++)U[B]=v(b(U[B-2]),U[B-7],C(U[B-15]),U[B-16]);var H=this.h[0],W=this.h[1],te=this.h[2],$=this.h[3],pe=this.h[4],x=this.h[5],r=this.h[6],s=this.h[7];for(R(this.k.length===U.length),B=0;B<U.length;B++){var l=M(s,h(pe),A(pe,x,r),this.k[B],U[B]),a=u(g(H),T(H,W,te));s=r,r=x,x=pe,pe=u($,l),$=te,te=W,W=H,H=u(l,a)}this.h[0]=u(this.h[0],H),this.h[1]=u(this.h[1],W),this.h[2]=u(this.h[2],te),this.h[3]=u(this.h[3],$),this.h[4]=u(this.h[4],pe),this.h[5]=u(this.h[5],x),this.h[6]=u(this.h[6],r),this.h[7]=u(this.h[7],s)},P.prototype._digest=function(O){return"hex"===O?p.toHex32(this.h,"big"):p.split32(this.h,"big")}},3513:(Y,L,E)=>{"use strict";var p=E(8291),N=E(4958);function m(){if(!(this instanceof m))return new m;N.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}p.inherits(m,N),Y.exports=m,m.blockSize=1024,m.outSize=384,m.hmacStrength=192,m.padLength=128,m.prototype._digest=function(u){return"hex"===u?p.toHex32(this.h.slice(0,12),"big"):p.split32(this.h.slice(0,12),"big")}},4958:(Y,L,E)=>{"use strict";var p=E(8291),N=E(1393),m=E(6055),R=p.rotr64_hi,u=p.rotr64_lo,v=p.shr64_hi,M=p.shr64_lo,A=p.sum64,T=p.sum64_hi,g=p.sum64_lo,h=p.sum64_4_hi,C=p.sum64_4_lo,b=p.sum64_5_hi,w=p.sum64_5_lo,I=N.BlockHash,P=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function k(){if(!(this instanceof k))return new k;I.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=P,this.W=new Array(160)}function O(l,a,f,_,D){var d=l&f^~l&D;return d<0&&(d+=4294967296),d}function V(l,a,f,_,D,d){var i=a&_^~a&d;return i<0&&(i+=4294967296),i}function U(l,a,f,_,D){var d=l&f^l&D^f&D;return d<0&&(d+=4294967296),d}function B(l,a,f,_,D,d){var i=a&_^a&d^_&d;return i<0&&(i+=4294967296),i}function H(l,a){var d=R(l,a,28)^R(a,l,2)^R(a,l,7);return d<0&&(d+=4294967296),d}function W(l,a){var d=u(l,a,28)^u(a,l,2)^u(a,l,7);return d<0&&(d+=4294967296),d}function te(l,a){var d=R(l,a,14)^R(l,a,18)^R(a,l,9);return d<0&&(d+=4294967296),d}function $(l,a){var d=u(l,a,14)^u(l,a,18)^u(a,l,9);return d<0&&(d+=4294967296),d}function pe(l,a){var d=R(l,a,1)^R(l,a,8)^v(l,a,7);return d<0&&(d+=4294967296),d}function x(l,a){var d=u(l,a,1)^u(l,a,8)^M(l,a,7);return d<0&&(d+=4294967296),d}function r(l,a){var d=R(l,a,19)^R(a,l,29)^v(l,a,6);return d<0&&(d+=4294967296),d}function s(l,a){var d=u(l,a,19)^u(a,l,29)^M(l,a,6);return d<0&&(d+=4294967296),d}p.inherits(k,I),Y.exports=k,k.blockSize=1024,k.outSize=512,k.hmacStrength=192,k.padLength=128,k.prototype._prepareBlock=function(a,f){for(var _=this.W,D=0;D<32;D++)_[D]=a[f+D];for(;D<_.length;D+=2){var d=r(_[D-4],_[D-3]),i=s(_[D-4],_[D-3]),y=_[D-14],z=_[D-13],q=pe(_[D-30],_[D-29]),Z=x(_[D-30],_[D-29]),ge=_[D-32],me=_[D-31];_[D]=h(d,i,y,z,q,Z,ge,me),_[D+1]=C(d,i,y,z,q,Z,ge,me)}},k.prototype._update=function(a,f){this._prepareBlock(a,f);var _=this.W,D=this.h[0],d=this.h[1],i=this.h[2],y=this.h[3],z=this.h[4],q=this.h[5],Z=this.h[6],ge=this.h[7],me=this.h[8],le=this.h[9],fe=this.h[10],ae=this.h[11],de=this.h[12],xe=this.h[13],Ce=this.h[14],oe=this.h[15];m(this.k.length===_.length);for(var we=0;we<_.length;we+=2){var ye=Ce,re=oe,ee=te(me,le),J=$(me,le),ue=O(me,0,fe,0,de),Ae=V(0,le,0,ae,0,xe),Te=this.k[we],Ee=this.k[we+1],We=_[we],Ne=_[we+1],_e=b(ye,re,ee,J,ue,Ae,Te,Ee,We,Ne),Be=w(ye,re,ee,J,ue,Ae,Te,Ee,We,Ne);ye=H(D,d),re=W(D,d),ee=U(D,0,i,0,z),J=B(0,d,0,y,0,q);var De=T(ye,re,ee,J),Le=g(ye,re,ee,J);Ce=de,oe=xe,de=fe,xe=ae,fe=me,ae=le,me=T(Z,ge,_e,Be),le=g(ge,ge,_e,Be),Z=z,ge=q,z=i,q=y,i=D,y=d,D=T(_e,Be,De,Le),d=g(_e,Be,De,Le)}A(this.h,0,D,d),A(this.h,2,i,y),A(this.h,4,z,q),A(this.h,6,Z,ge),A(this.h,8,me,le),A(this.h,10,fe,ae),A(this.h,12,de,xe),A(this.h,14,Ce,oe)},k.prototype._digest=function(a){return"hex"===a?p.toHex32(this.h,"big"):p.split32(this.h,"big")}},8491:(Y,L,E)=>{"use strict";var N=E(8291).rotr32;function R(h,C,b){return h&C^~h&b}function u(h,C,b){return h&C^h&b^C&b}function v(h,C,b){return h^C^b}L.ft_1=function(h,C,b,w){return 0===h?R(C,b,w):1===h||3===h?v(C,b,w):2===h?u(C,b,w):void 0},L.ch32=R,L.maj32=u,L.p32=v,L.s0_256=function(h){return N(h,2)^N(h,13)^N(h,22)},L.s1_256=function(h){return N(h,6)^N(h,11)^N(h,25)},L.g0_256=function(h){return N(h,7)^N(h,18)^h>>>3},L.g1_256=function(h){return N(h,17)^N(h,19)^h>>>10}},8291:(Y,L,E)=>{"use strict";var p=E(6055),N=E(9879);function m(s,l){return!(55296!=(64512&s.charCodeAt(l))||l<0||l+1>=s.length)&&56320==(64512&s.charCodeAt(l+1))}function v(s){return(s>>>24|s>>>8&65280|s<<8&16711680|(255&s)<<24)>>>0}function A(s){return 1===s.length?"0"+s:s}function T(s){return 7===s.length?"0"+s:6===s.length?"00"+s:5===s.length?"000"+s:4===s.length?"0000"+s:3===s.length?"00000"+s:2===s.length?"000000"+s:1===s.length?"0000000"+s:s}L.inherits=N,L.toArray=function(s,l){if(Array.isArray(s))return s.slice();if(!s)return[];var a=[];if("string"==typeof s)if(l){if("hex"===l)for((s=s.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(s="0"+s),_=0;_<s.length;_+=2)a.push(parseInt(s[_]+s[_+1],16))}else for(var f=0,_=0;_<s.length;_++){var D=s.charCodeAt(_);D<128?a[f++]=D:D<2048?(a[f++]=D>>6|192,a[f++]=63&D|128):m(s,_)?(D=65536+((1023&D)<<10)+(1023&s.charCodeAt(++_)),a[f++]=D>>18|240,a[f++]=D>>12&63|128,a[f++]=D>>6&63|128,a[f++]=63&D|128):(a[f++]=D>>12|224,a[f++]=D>>6&63|128,a[f++]=63&D|128)}else for(_=0;_<s.length;_++)a[_]=0|s[_];return a},L.toHex=function(s){for(var l="",a=0;a<s.length;a++)l+=A(s[a].toString(16));return l},L.htonl=v,L.toHex32=function(s,l){for(var a="",f=0;f<s.length;f++){var _=s[f];"little"===l&&(_=v(_)),a+=T(_.toString(16))}return a},L.zero2=A,L.zero8=T,L.join32=function(s,l,a,f){var _=a-l;p(_%4==0);for(var D=new Array(_/4),d=0,i=l;d<D.length;d++,i+=4)D[d]=("big"===f?s[i]<<24|s[i+1]<<16|s[i+2]<<8|s[i+3]:s[i+3]<<24|s[i+2]<<16|s[i+1]<<8|s[i])>>>0;return D},L.split32=function(s,l){for(var a=new Array(4*s.length),f=0,_=0;f<s.length;f++,_+=4){var D=s[f];"big"===l?(a[_]=D>>>24,a[_+1]=D>>>16&255,a[_+2]=D>>>8&255,a[_+3]=255&D):(a[_+3]=D>>>24,a[_+2]=D>>>16&255,a[_+1]=D>>>8&255,a[_]=255&D)}return a},L.rotr32=function(s,l){return s>>>l|s<<32-l},L.rotl32=function(s,l){return s<<l|s>>>32-l},L.sum32=function(s,l){return s+l>>>0},L.sum32_3=function(s,l,a){return s+l+a>>>0},L.sum32_4=function(s,l,a,f){return s+l+a+f>>>0},L.sum32_5=function(s,l,a,f,_){return s+l+a+f+_>>>0},L.sum64=function(s,l,a,f){var d=f+s[l+1]>>>0;s[l]=(d<f?1:0)+a+s[l]>>>0,s[l+1]=d},L.sum64_hi=function(s,l,a,f){return(l+f>>>0<l?1:0)+s+a>>>0},L.sum64_lo=function(s,l,a,f){return l+f>>>0},L.sum64_4_hi=function(s,l,a,f,_,D,d,i){var y=0,z=l;return y+=(z=z+f>>>0)<l?1:0,y+=(z=z+D>>>0)<D?1:0,s+a+_+d+(y+=(z=z+i>>>0)<i?1:0)>>>0},L.sum64_4_lo=function(s,l,a,f,_,D,d,i){return l+f+D+i>>>0},L.sum64_5_hi=function(s,l,a,f,_,D,d,i,y,z){var q=0,Z=l;return q+=(Z=Z+f>>>0)<l?1:0,q+=(Z=Z+D>>>0)<D?1:0,q+=(Z=Z+i>>>0)<i?1:0,s+a+_+d+y+(q+=(Z=Z+z>>>0)<z?1:0)>>>0},L.sum64_5_lo=function(s,l,a,f,_,D,d,i,y,z){return l+f+D+i+z>>>0},L.rotr64_hi=function(s,l,a){return(l<<32-a|s>>>a)>>>0},L.rotr64_lo=function(s,l,a){return(s<<32-a|l>>>a)>>>0},L.shr64_hi=function(s,l,a){return s>>>a},L.shr64_lo=function(s,l,a){return(s<<32-a|l>>>a)>>>0}},2730:(Y,L,E)=>{"use strict";var p=E(7909),N=E(4869),m=E(6055);function R(u){if(!(this instanceof R))return new R(u);this.hash=u.hash,this.predResist=!!u.predResist,this.outLen=this.hash.outSize,this.minEntropy=u.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var v=N.toArray(u.entropy,u.entropyEnc||"hex"),M=N.toArray(u.nonce,u.nonceEnc||"hex"),A=N.toArray(u.pers,u.persEnc||"hex");m(v.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(v,M,A)}Y.exports=R,R.prototype._init=function(v,M,A){var T=v.concat(M).concat(A);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var g=0;g<this.V.length;g++)this.K[g]=0,this.V[g]=1;this._update(T),this._reseed=1,this.reseedInterval=281474976710656},R.prototype._hmac=function(){return new p.hmac(this.hash,this.K)},R.prototype._update=function(v){var M=this._hmac().update(this.V).update([0]);v&&(M=M.update(v)),this.K=M.digest(),this.V=this._hmac().update(this.V).digest(),v&&(this.K=this._hmac().update(this.V).update([1]).update(v).digest(),this.V=this._hmac().update(this.V).digest())},R.prototype.reseed=function(v,M,A,T){"string"!=typeof M&&(T=A,A=M,M=null),v=N.toArray(v,M),A=N.toArray(A,T),m(v.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(v.concat(A||[])),this._reseed=1},R.prototype.generate=function(v,M,A,T){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof M&&(T=A,A=M,M=null),A&&(A=N.toArray(A,T||"hex"),this._update(A));for(var g=[];g.length<v;)this.V=this._hmac().update(this.V).digest(),g=g.concat(this.V);var h=g.slice(0,v);return this._update(A),this._reseed++,N.encode(h,M)}},2658:(Y,L)=>{L.read=function(E,p,N,m,R){var u,v,M=8*R-m-1,A=(1<<M)-1,T=A>>1,g=-7,h=N?R-1:0,C=N?-1:1,b=E[p+h];for(h+=C,u=b&(1<<-g)-1,b>>=-g,g+=M;g>0;u=256*u+E[p+h],h+=C,g-=8);for(v=u&(1<<-g)-1,u>>=-g,g+=m;g>0;v=256*v+E[p+h],h+=C,g-=8);if(0===u)u=1-T;else{if(u===A)return v?NaN:1/0*(b?-1:1);v+=Math.pow(2,m),u-=T}return(b?-1:1)*v*Math.pow(2,u-m)},L.write=function(E,p,N,m,R,u){var v,M,A,T=8*u-R-1,g=(1<<T)-1,h=g>>1,C=23===R?Math.pow(2,-24)-Math.pow(2,-77):0,b=m?0:u-1,w=m?1:-1,I=p<0||0===p&&1/p<0?1:0;for(p=Math.abs(p),isNaN(p)||p===1/0?(M=isNaN(p)?1:0,v=g):(v=Math.floor(Math.log(p)/Math.LN2),p*(A=Math.pow(2,-v))<1&&(v--,A*=2),(p+=v+h>=1?C/A:C*Math.pow(2,1-h))*A>=2&&(v++,A/=2),v+h>=g?(M=0,v=g):v+h>=1?(M=(p*A-1)*Math.pow(2,R),v+=h):(M=p*Math.pow(2,h-1)*Math.pow(2,R),v=0));R>=8;E[N+b]=255&M,b+=w,M/=256,R-=8);for(v=v<<R|M,T+=R;T>0;E[N+b]=255&v,b+=w,v/=256,T-=8);E[N+b-w]|=128*I}},9879:Y=>{Y.exports="function"==typeof Object.create?function(E,p){p&&(E.super_=p,E.prototype=Object.create(p.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}))}:function(E,p){if(p){E.super_=p;var N=function(){};N.prototype=p.prototype,E.prototype=new N,E.prototype.constructor=E}}},6099:Y=>{function E(N){this.message=N}(E.prototype=new Error).name="InvalidCharacterError",Y.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(N){var m=String(N).replace(/=+$/,"");if(m.length%4==1)throw new E("'atob' failed: The string to be decoded is not correctly encoded.");for(var u,v,R=0,M=0,A="";v=m.charAt(M++);~v&&(u=R%4?64*u+v:v,R++%4)?A+=String.fromCharCode(255&u>>(-2*R&6)):0)v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(v);return A}},4400:(Y,L,E)=>{var p=E(6099);Y.exports=function(m){var R=m.replace(/-/g,"+").replace(/_/g,"/");switch(R.length%4){case 0:break;case 2:R+="==";break;case 3:R+="=";break;default:throw"Illegal base64url string!"}try{return function(m){return decodeURIComponent(p(m).replace(/(.)/g,function(R,u){var v=u.charCodeAt(0).toString(16).toUpperCase();return v.length<2&&(v="0"+v),"%"+v}))}(R)}catch(u){return p(R)}}},4934:(Y,L,E)=>{"use strict";var p=E(4400);function N(m){this.message=m}(N.prototype=new Error).name="InvalidTokenError",Y.exports=function(m,R){if("string"!=typeof m)throw new N("Invalid token specified");var u=!0===(R=R||{}).header?0:1;try{return JSON.parse(p(m.split(".")[u]))}catch(v){throw new N("Invalid token specified: "+v.message)}},Y.exports.InvalidTokenError=N},3264:(Y,L,E)=>{"use strict";var p=E(9879),N=E(5414),m=E(5859).Buffer,R=new Array(16);function u(){N.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function v(h,C){return h<<C|h>>>32-C}function M(h,C,b,w,I,P,k){return v(h+(C&b|~C&w)+I+P|0,k)+C|0}function A(h,C,b,w,I,P,k){return v(h+(C&w|b&~w)+I+P|0,k)+C|0}function T(h,C,b,w,I,P,k){return v(h+(C^b^w)+I+P|0,k)+C|0}function g(h,C,b,w,I,P,k){return v(h+(b^(C|~w))+I+P|0,k)+C|0}p(u,N),u.prototype._update=function(){for(var h=R,C=0;C<16;++C)h[C]=this._block.readInt32LE(4*C);var b=this._a,w=this._b,I=this._c,P=this._d;b=M(b,w,I,P,h[0],3614090360,7),P=M(P,b,w,I,h[1],3905402710,12),I=M(I,P,b,w,h[2],606105819,17),w=M(w,I,P,b,h[3],3250441966,22),b=M(b,w,I,P,h[4],4118548399,7),P=M(P,b,w,I,h[5],1200080426,12),I=M(I,P,b,w,h[6],2821735955,17),w=M(w,I,P,b,h[7],4249261313,22),b=M(b,w,I,P,h[8],1770035416,7),P=M(P,b,w,I,h[9],2336552879,12),I=M(I,P,b,w,h[10],4294925233,17),w=M(w,I,P,b,h[11],2304563134,22),b=M(b,w,I,P,h[12],1804603682,7),P=M(P,b,w,I,h[13],4254626195,12),I=M(I,P,b,w,h[14],2792965006,17),b=A(b,w=M(w,I,P,b,h[15],1236535329,22),I,P,h[1],4129170786,5),P=A(P,b,w,I,h[6],3225465664,9),I=A(I,P,b,w,h[11],643717713,14),w=A(w,I,P,b,h[0],3921069994,20),b=A(b,w,I,P,h[5],3593408605,5),P=A(P,b,w,I,h[10],38016083,9),I=A(I,P,b,w,h[15],3634488961,14),w=A(w,I,P,b,h[4],3889429448,20),b=A(b,w,I,P,h[9],568446438,5),P=A(P,b,w,I,h[14],3275163606,9),I=A(I,P,b,w,h[3],4107603335,14),w=A(w,I,P,b,h[8],1163531501,20),b=A(b,w,I,P,h[13],2850285829,5),P=A(P,b,w,I,h[2],4243563512,9),I=A(I,P,b,w,h[7],1735328473,14),b=T(b,w=A(w,I,P,b,h[12],2368359562,20),I,P,h[5],4294588738,4),P=T(P,b,w,I,h[8],2272392833,11),I=T(I,P,b,w,h[11],1839030562,16),w=T(w,I,P,b,h[14],4259657740,23),b=T(b,w,I,P,h[1],2763975236,4),P=T(P,b,w,I,h[4],1272893353,11),I=T(I,P,b,w,h[7],4139469664,16),w=T(w,I,P,b,h[10],3200236656,23),b=T(b,w,I,P,h[13],681279174,4),P=T(P,b,w,I,h[0],3936430074,11),I=T(I,P,b,w,h[3],3572445317,16),w=T(w,I,P,b,h[6],76029189,23),b=T(b,w,I,P,h[9],3654602809,4),P=T(P,b,w,I,h[12],3873151461,11),I=T(I,P,b,w,h[15],530742520,16),b=g(b,w=T(w,I,P,b,h[2],3299628645,23),I,P,h[0],4096336452,6),P=g(P,b,w,I,h[7],1126891415,10),I=g(I,P,b,w,h[14],2878612391,15),w=g(w,I,P,b,h[5],4237533241,21),b=g(b,w,I,P,h[12],1700485571,6),P=g(P,b,w,I,h[3],2399980690,10),I=g(I,P,b,w,h[10],4293915773,15),w=g(w,I,P,b,h[1],2240044497,21),b=g(b,w,I,P,h[8],1873313359,6),P=g(P,b,w,I,h[15],4264355552,10),I=g(I,P,b,w,h[6],2734768916,15),w=g(w,I,P,b,h[13],1309151649,21),b=g(b,w,I,P,h[4],4149444226,6),P=g(P,b,w,I,h[11],3174756917,10),I=g(I,P,b,w,h[2],718787259,15),w=g(w,I,P,b,h[9],3951481745,21),this._a=this._a+b|0,this._b=this._b+w|0,this._c=this._c+I|0,this._d=this._d+P|0},u.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var h=m.allocUnsafe(16);return h.writeInt32LE(this._a,0),h.writeInt32LE(this._b,4),h.writeInt32LE(this._c,8),h.writeInt32LE(this._d,12),h},Y.exports=u},4398:(Y,L,E)=>{var p=E(1770),N=E(4761);function m(R){this.rand=R||new N.Rand}Y.exports=m,m.create=function(u){return new m(u)},m.prototype._randbelow=function(u){var v=u.bitLength(),M=Math.ceil(v/8);do{var A=new p(this.rand.generate(M))}while(A.cmp(u)>=0);return A},m.prototype._randrange=function(u,v){var M=v.sub(u);return u.add(this._randbelow(M))},m.prototype.test=function(u,v,M){var A=u.bitLength(),T=p.mont(u),g=new p(1).toRed(T);v||(v=Math.max(1,A/48|0));for(var h=u.subn(1),C=0;!h.testn(C);C++);for(var b=u.shrn(C),w=h.toRed(T);v>0;v--){var P=this._randrange(new p(2),h);M&&M(P);var k=P.toRed(T).redPow(b);if(0!==k.cmp(g)&&0!==k.cmp(w)){for(var O=1;O<C;O++){if(0===(k=k.redSqr()).cmp(g))return!1;if(0===k.cmp(w))break}if(O===C)return!1}}return!0},m.prototype.getDivisor=function(u,v){var M=u.bitLength(),A=p.mont(u),T=new p(1).toRed(A);v||(v=Math.max(1,M/48|0));for(var g=u.subn(1),h=0;!g.testn(h);h++);for(var C=u.shrn(h),b=g.toRed(A);v>0;v--){var w=this._randrange(new p(2),g),I=u.gcd(w);if(0!==I.cmpn(1))return I;var P=w.toRed(A).redPow(C);if(0!==P.cmp(T)&&0!==P.cmp(b)){for(var k=1;k<h;k++){if(0===(P=P.redSqr()).cmp(T))return P.fromRed().subn(1).gcd(u);if(0===P.cmp(b))break}if(k===h)return(P=P.redSqr()).fromRed().subn(1).gcd(u)}}return!1}},1770:function(Y,L,E){!function(p,N){"use strict";function m(x,r){if(!x)throw new Error(r||"Assertion failed")}function R(x,r){x.super_=r;var s=function(){};s.prototype=r.prototype,x.prototype=new s,x.prototype.constructor=x}function u(x,r,s){if(u.isBN(x))return x;this.negative=0,this.words=null,this.length=0,this.red=null,null!==x&&(("le"===r||"be"===r)&&(s=r,r=10),this._init(x||0,r||10,s||"be"))}var v;"object"==typeof p?p.exports=u:N.BN=u,u.BN=u,u.wordSize=26;try{v="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:E(6619).Buffer}catch(x){}function M(x,r){var s=x.charCodeAt(r);return s>=65&&s<=70?s-55:s>=97&&s<=102?s-87:s-48&15}function A(x,r,s){var l=M(x,s);return s-1>=r&&(l|=M(x,s-1)<<4),l}function T(x,r,s,l){for(var a=0,f=Math.min(x.length,s),_=r;_<f;_++){var D=x.charCodeAt(_)-48;a*=l,a+=D>=49?D-49+10:D>=17?D-17+10:D}return a}u.isBN=function(r){return r instanceof u||null!==r&&"object"==typeof r&&r.constructor.wordSize===u.wordSize&&Array.isArray(r.words)},u.max=function(r,s){return r.cmp(s)>0?r:s},u.min=function(r,s){return r.cmp(s)<0?r:s},u.prototype._init=function(r,s,l){if("number"==typeof r)return this._initNumber(r,s,l);if("object"==typeof r)return this._initArray(r,s,l);"hex"===s&&(s=16),m(s===(0|s)&&s>=2&&s<=36);var a=0;"-"===(r=r.toString().replace(/\s+/g,""))[0]&&(a++,this.negative=1),a<r.length&&(16===s?this._parseHex(r,a,l):(this._parseBase(r,s,a),"le"===l&&this._initArray(this.toArray(),s,l)))},u.prototype._initNumber=function(r,s,l){r<0&&(this.negative=1,r=-r),r<67108864?(this.words=[67108863&r],this.length=1):r<4503599627370496?(this.words=[67108863&r,r/67108864&67108863],this.length=2):(m(r<9007199254740992),this.words=[67108863&r,r/67108864&67108863,1],this.length=3),"le"===l&&this._initArray(this.toArray(),s,l)},u.prototype._initArray=function(r,s,l){if(m("number"==typeof r.length),r.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(r.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var f,_,D=0;if("be"===l)for(a=r.length-1,f=0;a>=0;a-=3)this.words[f]|=(_=r[a]|r[a-1]<<8|r[a-2]<<16)<<D&67108863,this.words[f+1]=_>>>26-D&67108863,(D+=24)>=26&&(D-=26,f++);else if("le"===l)for(a=0,f=0;a<r.length;a+=3)this.words[f]|=(_=r[a]|r[a+1]<<8|r[a+2]<<16)<<D&67108863,this.words[f+1]=_>>>26-D&67108863,(D+=24)>=26&&(D-=26,f++);return this.strip()},u.prototype._parseHex=function(r,s,l){this.length=Math.ceil((r.length-s)/6),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var D,f=0,_=0;if("be"===l)for(a=r.length-1;a>=s;a-=2)D=A(r,s,a)<<f,this.words[_]|=67108863&D,f>=18?(f-=18,this.words[_+=1]|=D>>>26):f+=8;else for(a=(r.length-s)%2==0?s+1:s;a<r.length;a+=2)D=A(r,s,a)<<f,this.words[_]|=67108863&D,f>=18?(f-=18,this.words[_+=1]|=D>>>26):f+=8;this.strip()},u.prototype._parseBase=function(r,s,l){this.words=[0],this.length=1;for(var a=0,f=1;f<=67108863;f*=s)a++;a--,f=f/s|0;for(var _=r.length-l,D=_%a,d=Math.min(_,_-D)+l,i=0,y=l;y<d;y+=a)i=T(r,y,y+a,s),this.imuln(f),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i);if(0!==D){var z=1;for(i=T(r,y,r.length,s),y=0;y<D;y++)z*=s;this.imuln(z),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i)}this.strip()},u.prototype.copy=function(r){r.words=new Array(this.length);for(var s=0;s<this.length;s++)r.words[s]=this.words[s];r.length=this.length,r.negative=this.negative,r.red=this.red},u.prototype.clone=function(){var r=new u(null);return this.copy(r),r},u.prototype._expand=function(r){for(;this.length<r;)this.words[this.length++]=0;return this},u.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},u.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},u.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],C=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function w(x,r,s){s.negative=r.negative^x.negative;var l=x.length+r.length|0;s.length=l,l=l-1|0;var a=0|x.words[0],f=0|r.words[0],_=a*f,d=_/67108864|0;s.words[0]=67108863&_;for(var i=1;i<l;i++){for(var y=d>>>26,z=67108863&d,q=Math.min(i,r.length-1),Z=Math.max(0,i-x.length+1);Z<=q;Z++)y+=(_=(a=0|x.words[i-Z|0])*(f=0|r.words[Z])+z)/67108864|0,z=67108863&_;s.words[i]=0|z,d=0|y}return 0!==d?s.words[i]=0|d:s.length--,s.strip()}u.prototype.toString=function(r,s){var l;if(s=0|s||1,16===(r=r||10)||"hex"===r){l="";for(var a=0,f=0,_=0;_<this.length;_++){var D=this.words[_],d=(16777215&(D<<a|f)).toString(16);l=0!=(f=D>>>24-a&16777215)||_!==this.length-1?g[6-d.length]+d+l:d+l,(a+=2)>=26&&(a-=26,_--)}for(0!==f&&(l=f.toString(16)+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}if(r===(0|r)&&r>=2&&r<=36){var i=h[r],y=C[r];l="";var z=this.clone();for(z.negative=0;!z.isZero();){var q=z.modn(y).toString(r);l=(z=z.idivn(y)).isZero()?q+l:g[i-q.length]+q+l}for(this.isZero()&&(l="0"+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}m(!1,"Base should be between 2 and 36")},u.prototype.toNumber=function(){var r=this.words[0];return 2===this.length?r+=67108864*this.words[1]:3===this.length&&1===this.words[2]?r+=4503599627370496+67108864*this.words[1]:this.length>2&&m(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-r:r},u.prototype.toJSON=function(){return this.toString(16)},u.prototype.toBuffer=function(r,s){return m(void 0!==v),this.toArrayLike(v,r,s)},u.prototype.toArray=function(r,s){return this.toArrayLike(Array,r,s)},u.prototype.toArrayLike=function(r,s,l){var a=this.byteLength(),f=l||Math.max(1,a);m(a<=f,"byte array longer than desired length"),m(f>0,"Requested array length <= 0"),this.strip();var d,i,_="le"===s,D=new r(f),y=this.clone();if(_){for(i=0;!y.isZero();i++)d=y.andln(255),y.iushrn(8),D[i]=d;for(;i<f;i++)D[i]=0}else{for(i=0;i<f-a;i++)D[i]=0;for(i=0;!y.isZero();i++)d=y.andln(255),y.iushrn(8),D[f-i-1]=d}return D},u.prototype._countBits=Math.clz32?function(r){return 32-Math.clz32(r)}:function(r){var s=r,l=0;return s>=4096&&(l+=13,s>>>=13),s>=64&&(l+=7,s>>>=7),s>=8&&(l+=4,s>>>=4),s>=2&&(l+=2,s>>>=2),l+s},u.prototype._zeroBits=function(r){if(0===r)return 26;var s=r,l=0;return 0==(8191&s)&&(l+=13,s>>>=13),0==(127&s)&&(l+=7,s>>>=7),0==(15&s)&&(l+=4,s>>>=4),0==(3&s)&&(l+=2,s>>>=2),0==(1&s)&&l++,l},u.prototype.bitLength=function(){var s=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+s},u.prototype.zeroBits=function(){if(this.isZero())return 0;for(var r=0,s=0;s<this.length;s++){var l=this._zeroBits(this.words[s]);if(r+=l,26!==l)break}return r},u.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},u.prototype.toTwos=function(r){return 0!==this.negative?this.abs().inotn(r).iaddn(1):this.clone()},u.prototype.fromTwos=function(r){return this.testn(r-1)?this.notn(r).iaddn(1).ineg():this.clone()},u.prototype.isNeg=function(){return 0!==this.negative},u.prototype.neg=function(){return this.clone().ineg()},u.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},u.prototype.iuor=function(r){for(;this.length<r.length;)this.words[this.length++]=0;for(var s=0;s<r.length;s++)this.words[s]=this.words[s]|r.words[s];return this.strip()},u.prototype.ior=function(r){return m(0==(this.negative|r.negative)),this.iuor(r)},u.prototype.or=function(r){return this.length>r.length?this.clone().ior(r):r.clone().ior(this)},u.prototype.uor=function(r){return this.length>r.length?this.clone().iuor(r):r.clone().iuor(this)},u.prototype.iuand=function(r){var s;s=this.length>r.length?r:this;for(var l=0;l<s.length;l++)this.words[l]=this.words[l]&r.words[l];return this.length=s.length,this.strip()},u.prototype.iand=function(r){return m(0==(this.negative|r.negative)),this.iuand(r)},u.prototype.and=function(r){return this.length>r.length?this.clone().iand(r):r.clone().iand(this)},u.prototype.uand=function(r){return this.length>r.length?this.clone().iuand(r):r.clone().iuand(this)},u.prototype.iuxor=function(r){var s,l;this.length>r.length?(s=this,l=r):(s=r,l=this);for(var a=0;a<l.length;a++)this.words[a]=s.words[a]^l.words[a];if(this!==s)for(;a<s.length;a++)this.words[a]=s.words[a];return this.length=s.length,this.strip()},u.prototype.ixor=function(r){return m(0==(this.negative|r.negative)),this.iuxor(r)},u.prototype.xor=function(r){return this.length>r.length?this.clone().ixor(r):r.clone().ixor(this)},u.prototype.uxor=function(r){return this.length>r.length?this.clone().iuxor(r):r.clone().iuxor(this)},u.prototype.inotn=function(r){m("number"==typeof r&&r>=0);var s=0|Math.ceil(r/26),l=r%26;this._expand(s),l>0&&s--;for(var a=0;a<s;a++)this.words[a]=67108863&~this.words[a];return l>0&&(this.words[a]=~this.words[a]&67108863>>26-l),this.strip()},u.prototype.notn=function(r){return this.clone().inotn(r)},u.prototype.setn=function(r,s){m("number"==typeof r&&r>=0);var l=r/26|0,a=r%26;return this._expand(l+1),this.words[l]=s?this.words[l]|1<<a:this.words[l]&~(1<<a),this.strip()},u.prototype.iadd=function(r){var s,l,a;if(0!==this.negative&&0===r.negative)return this.negative=0,s=this.isub(r),this.negative^=1,this._normSign();if(0===this.negative&&0!==r.negative)return r.negative=0,s=this.isub(r),r.negative=1,s._normSign();this.length>r.length?(l=this,a=r):(l=r,a=this);for(var f=0,_=0;_<a.length;_++)this.words[_]=67108863&(s=(0|l.words[_])+(0|a.words[_])+f),f=s>>>26;for(;0!==f&&_<l.length;_++)this.words[_]=67108863&(s=(0|l.words[_])+f),f=s>>>26;if(this.length=l.length,0!==f)this.words[this.length]=f,this.length++;else if(l!==this)for(;_<l.length;_++)this.words[_]=l.words[_];return this},u.prototype.add=function(r){var s;return 0!==r.negative&&0===this.negative?(r.negative=0,s=this.sub(r),r.negative^=1,s):0===r.negative&&0!==this.negative?(this.negative=0,s=r.sub(this),this.negative=1,s):this.length>r.length?this.clone().iadd(r):r.clone().iadd(this)},u.prototype.isub=function(r){if(0!==r.negative){r.negative=0;var s=this.iadd(r);return r.negative=1,s._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(r),this.negative=1,this._normSign();var a,f,l=this.cmp(r);if(0===l)return this.negative=0,this.length=1,this.words[0]=0,this;l>0?(a=this,f=r):(a=r,f=this);for(var _=0,D=0;D<f.length;D++)_=(s=(0|a.words[D])-(0|f.words[D])+_)>>26,this.words[D]=67108863&s;for(;0!==_&&D<a.length;D++)_=(s=(0|a.words[D])+_)>>26,this.words[D]=67108863&s;if(0===_&&D<a.length&&a!==this)for(;D<a.length;D++)this.words[D]=a.words[D];return this.length=Math.max(this.length,D),a!==this&&(this.negative=1),this.strip()},u.prototype.sub=function(r){return this.clone().isub(r)};var I=function(r,s,l){var d,i,y,a=r.words,f=s.words,_=l.words,D=0,z=0|a[0],q=8191&z,Z=z>>>13,ge=0|a[1],me=8191&ge,le=ge>>>13,fe=0|a[2],ae=8191&fe,de=fe>>>13,xe=0|a[3],Ce=8191&xe,oe=xe>>>13,we=0|a[4],ye=8191&we,re=we>>>13,ee=0|a[5],J=8191&ee,ue=ee>>>13,Ae=0|a[6],Te=8191&Ae,Ee=Ae>>>13,We=0|a[7],Ne=8191&We,_e=We>>>13,Be=0|a[8],De=8191&Be,Le=Be>>>13,Mt=0|a[9],He=8191&Mt,$e=Mt>>>13,It=0|f[0],et=8191&It,pt=It>>>13,Ct=0|f[1],at=8191&Ct,it=Ct>>>13,Mn=0|f[2],ot=8191&Mn,Ke=Mn>>>13,In=0|f[3],Ge=8191&In,ut=In>>>13,On=0|f[4],nt=8191&On,Ve=On>>>13,kt=0|f[5],ft=8191&kt,st=kt>>>13,qn=0|f[6],ct=8191&qn,ze=qn>>>13,an=0|f[7],dt=8191&an,Xe=an>>>13,Yt=0|f[8],Ye=8191&Yt,Qe=Yt>>>13,kn=0|f[9],Ze=8191&kn,lt=kn>>>13;l.negative=r.negative^s.negative,l.length=19;var ln=(D+(d=Math.imul(q,et))|0)+((8191&(i=(i=Math.imul(q,pt))+Math.imul(Z,et)|0))<<13)|0;D=((y=Math.imul(Z,pt))+(i>>>13)|0)+(ln>>>26)|0,ln&=67108863,d=Math.imul(me,et),i=(i=Math.imul(me,pt))+Math.imul(le,et)|0,y=Math.imul(le,pt);var jt=(D+(d=d+Math.imul(q,at)|0)|0)+((8191&(i=(i=i+Math.imul(q,it)|0)+Math.imul(Z,at)|0))<<13)|0;D=((y=y+Math.imul(Z,it)|0)+(i>>>13)|0)+(jt>>>26)|0,jt&=67108863,d=Math.imul(ae,et),i=(i=Math.imul(ae,pt))+Math.imul(de,et)|0,y=Math.imul(de,pt),d=d+Math.imul(me,at)|0,i=(i=i+Math.imul(me,it)|0)+Math.imul(le,at)|0,y=y+Math.imul(le,it)|0;var qt=(D+(d=d+Math.imul(q,ot)|0)|0)+((8191&(i=(i=i+Math.imul(q,Ke)|0)+Math.imul(Z,ot)|0))<<13)|0;D=((y=y+Math.imul(Z,Ke)|0)+(i>>>13)|0)+(qt>>>26)|0,qt&=67108863,d=Math.imul(Ce,et),i=(i=Math.imul(Ce,pt))+Math.imul(oe,et)|0,y=Math.imul(oe,pt),d=d+Math.imul(ae,at)|0,i=(i=i+Math.imul(ae,it)|0)+Math.imul(de,at)|0,y=y+Math.imul(de,it)|0,d=d+Math.imul(me,ot)|0,i=(i=i+Math.imul(me,Ke)|0)+Math.imul(le,ot)|0,y=y+Math.imul(le,Ke)|0;var wn=(D+(d=d+Math.imul(q,Ge)|0)|0)+((8191&(i=(i=i+Math.imul(q,ut)|0)+Math.imul(Z,Ge)|0))<<13)|0;D=((y=y+Math.imul(Z,ut)|0)+(i>>>13)|0)+(wn>>>26)|0,wn&=67108863,d=Math.imul(ye,et),i=(i=Math.imul(ye,pt))+Math.imul(re,et)|0,y=Math.imul(re,pt),d=d+Math.imul(Ce,at)|0,i=(i=i+Math.imul(Ce,it)|0)+Math.imul(oe,at)|0,y=y+Math.imul(oe,it)|0,d=d+Math.imul(ae,ot)|0,i=(i=i+Math.imul(ae,Ke)|0)+Math.imul(de,ot)|0,y=y+Math.imul(de,Ke)|0,d=d+Math.imul(me,Ge)|0,i=(i=i+Math.imul(me,ut)|0)+Math.imul(le,Ge)|0,y=y+Math.imul(le,ut)|0;var hn=(D+(d=d+Math.imul(q,nt)|0)|0)+((8191&(i=(i=i+Math.imul(q,Ve)|0)+Math.imul(Z,nt)|0))<<13)|0;D=((y=y+Math.imul(Z,Ve)|0)+(i>>>13)|0)+(hn>>>26)|0,hn&=67108863,d=Math.imul(J,et),i=(i=Math.imul(J,pt))+Math.imul(ue,et)|0,y=Math.imul(ue,pt),d=d+Math.imul(ye,at)|0,i=(i=i+Math.imul(ye,it)|0)+Math.imul(re,at)|0,y=y+Math.imul(re,it)|0,d=d+Math.imul(Ce,ot)|0,i=(i=i+Math.imul(Ce,Ke)|0)+Math.imul(oe,ot)|0,y=y+Math.imul(oe,Ke)|0,d=d+Math.imul(ae,Ge)|0,i=(i=i+Math.imul(ae,ut)|0)+Math.imul(de,Ge)|0,y=y+Math.imul(de,ut)|0,d=d+Math.imul(me,nt)|0,i=(i=i+Math.imul(me,Ve)|0)+Math.imul(le,nt)|0,y=y+Math.imul(le,Ve)|0;var gn=(D+(d=d+Math.imul(q,ft)|0)|0)+((8191&(i=(i=i+Math.imul(q,st)|0)+Math.imul(Z,ft)|0))<<13)|0;D=((y=y+Math.imul(Z,st)|0)+(i>>>13)|0)+(gn>>>26)|0,gn&=67108863,d=Math.imul(Te,et),i=(i=Math.imul(Te,pt))+Math.imul(Ee,et)|0,y=Math.imul(Ee,pt),d=d+Math.imul(J,at)|0,i=(i=i+Math.imul(J,it)|0)+Math.imul(ue,at)|0,y=y+Math.imul(ue,it)|0,d=d+Math.imul(ye,ot)|0,i=(i=i+Math.imul(ye,Ke)|0)+Math.imul(re,ot)|0,y=y+Math.imul(re,Ke)|0,d=d+Math.imul(Ce,Ge)|0,i=(i=i+Math.imul(Ce,ut)|0)+Math.imul(oe,Ge)|0,y=y+Math.imul(oe,ut)|0,d=d+Math.imul(ae,nt)|0,i=(i=i+Math.imul(ae,Ve)|0)+Math.imul(de,nt)|0,y=y+Math.imul(de,Ve)|0,d=d+Math.imul(me,ft)|0,i=(i=i+Math.imul(me,st)|0)+Math.imul(le,ft)|0,y=y+Math.imul(le,st)|0;var Rn=(D+(d=d+Math.imul(q,ct)|0)|0)+((8191&(i=(i=i+Math.imul(q,ze)|0)+Math.imul(Z,ct)|0))<<13)|0;D=((y=y+Math.imul(Z,ze)|0)+(i>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,d=Math.imul(Ne,et),i=(i=Math.imul(Ne,pt))+Math.imul(_e,et)|0,y=Math.imul(_e,pt),d=d+Math.imul(Te,at)|0,i=(i=i+Math.imul(Te,it)|0)+Math.imul(Ee,at)|0,y=y+Math.imul(Ee,it)|0,d=d+Math.imul(J,ot)|0,i=(i=i+Math.imul(J,Ke)|0)+Math.imul(ue,ot)|0,y=y+Math.imul(ue,Ke)|0,d=d+Math.imul(ye,Ge)|0,i=(i=i+Math.imul(ye,ut)|0)+Math.imul(re,Ge)|0,y=y+Math.imul(re,ut)|0,d=d+Math.imul(Ce,nt)|0,i=(i=i+Math.imul(Ce,Ve)|0)+Math.imul(oe,nt)|0,y=y+Math.imul(oe,Ve)|0,d=d+Math.imul(ae,ft)|0,i=(i=i+Math.imul(ae,st)|0)+Math.imul(de,ft)|0,y=y+Math.imul(de,st)|0,d=d+Math.imul(me,ct)|0,i=(i=i+Math.imul(me,ze)|0)+Math.imul(le,ct)|0,y=y+Math.imul(le,ze)|0;var on=(D+(d=d+Math.imul(q,dt)|0)|0)+((8191&(i=(i=i+Math.imul(q,Xe)|0)+Math.imul(Z,dt)|0))<<13)|0;D=((y=y+Math.imul(Z,Xe)|0)+(i>>>13)|0)+(on>>>26)|0,on&=67108863,d=Math.imul(De,et),i=(i=Math.imul(De,pt))+Math.imul(Le,et)|0,y=Math.imul(Le,pt),d=d+Math.imul(Ne,at)|0,i=(i=i+Math.imul(Ne,it)|0)+Math.imul(_e,at)|0,y=y+Math.imul(_e,it)|0,d=d+Math.imul(Te,ot)|0,i=(i=i+Math.imul(Te,Ke)|0)+Math.imul(Ee,ot)|0,y=y+Math.imul(Ee,Ke)|0,d=d+Math.imul(J,Ge)|0,i=(i=i+Math.imul(J,ut)|0)+Math.imul(ue,Ge)|0,y=y+Math.imul(ue,ut)|0,d=d+Math.imul(ye,nt)|0,i=(i=i+Math.imul(ye,Ve)|0)+Math.imul(re,nt)|0,y=y+Math.imul(re,Ve)|0,d=d+Math.imul(Ce,ft)|0,i=(i=i+Math.imul(Ce,st)|0)+Math.imul(oe,ft)|0,y=y+Math.imul(oe,st)|0,d=d+Math.imul(ae,ct)|0,i=(i=i+Math.imul(ae,ze)|0)+Math.imul(de,ct)|0,y=y+Math.imul(de,ze)|0,d=d+Math.imul(me,dt)|0,i=(i=i+Math.imul(me,Xe)|0)+Math.imul(le,dt)|0,y=y+Math.imul(le,Xe)|0;var _n=(D+(d=d+Math.imul(q,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(q,Qe)|0)+Math.imul(Z,Ye)|0))<<13)|0;D=((y=y+Math.imul(Z,Qe)|0)+(i>>>13)|0)+(_n>>>26)|0,_n&=67108863,d=Math.imul(He,et),i=(i=Math.imul(He,pt))+Math.imul($e,et)|0,y=Math.imul($e,pt),d=d+Math.imul(De,at)|0,i=(i=i+Math.imul(De,it)|0)+Math.imul(Le,at)|0,y=y+Math.imul(Le,it)|0,d=d+Math.imul(Ne,ot)|0,i=(i=i+Math.imul(Ne,Ke)|0)+Math.imul(_e,ot)|0,y=y+Math.imul(_e,Ke)|0,d=d+Math.imul(Te,Ge)|0,i=(i=i+Math.imul(Te,ut)|0)+Math.imul(Ee,Ge)|0,y=y+Math.imul(Ee,ut)|0,d=d+Math.imul(J,nt)|0,i=(i=i+Math.imul(J,Ve)|0)+Math.imul(ue,nt)|0,y=y+Math.imul(ue,Ve)|0,d=d+Math.imul(ye,ft)|0,i=(i=i+Math.imul(ye,st)|0)+Math.imul(re,ft)|0,y=y+Math.imul(re,st)|0,d=d+Math.imul(Ce,ct)|0,i=(i=i+Math.imul(Ce,ze)|0)+Math.imul(oe,ct)|0,y=y+Math.imul(oe,ze)|0,d=d+Math.imul(ae,dt)|0,i=(i=i+Math.imul(ae,Xe)|0)+Math.imul(de,dt)|0,y=y+Math.imul(de,Xe)|0,d=d+Math.imul(me,Ye)|0,i=(i=i+Math.imul(me,Qe)|0)+Math.imul(le,Ye)|0,y=y+Math.imul(le,Qe)|0;var Jt=(D+(d=d+Math.imul(q,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(q,lt)|0)+Math.imul(Z,Ze)|0))<<13)|0;D=((y=y+Math.imul(Z,lt)|0)+(i>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,d=Math.imul(He,at),i=(i=Math.imul(He,it))+Math.imul($e,at)|0,y=Math.imul($e,it),d=d+Math.imul(De,ot)|0,i=(i=i+Math.imul(De,Ke)|0)+Math.imul(Le,ot)|0,y=y+Math.imul(Le,Ke)|0,d=d+Math.imul(Ne,Ge)|0,i=(i=i+Math.imul(Ne,ut)|0)+Math.imul(_e,Ge)|0,y=y+Math.imul(_e,ut)|0,d=d+Math.imul(Te,nt)|0,i=(i=i+Math.imul(Te,Ve)|0)+Math.imul(Ee,nt)|0,y=y+Math.imul(Ee,Ve)|0,d=d+Math.imul(J,ft)|0,i=(i=i+Math.imul(J,st)|0)+Math.imul(ue,ft)|0,y=y+Math.imul(ue,st)|0,d=d+Math.imul(ye,ct)|0,i=(i=i+Math.imul(ye,ze)|0)+Math.imul(re,ct)|0,y=y+Math.imul(re,ze)|0,d=d+Math.imul(Ce,dt)|0,i=(i=i+Math.imul(Ce,Xe)|0)+Math.imul(oe,dt)|0,y=y+Math.imul(oe,Xe)|0,d=d+Math.imul(ae,Ye)|0,i=(i=i+Math.imul(ae,Qe)|0)+Math.imul(de,Ye)|0,y=y+Math.imul(de,Qe)|0;var Ft=(D+(d=d+Math.imul(me,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(me,lt)|0)+Math.imul(le,Ze)|0))<<13)|0;D=((y=y+Math.imul(le,lt)|0)+(i>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,d=Math.imul(He,ot),i=(i=Math.imul(He,Ke))+Math.imul($e,ot)|0,y=Math.imul($e,Ke),d=d+Math.imul(De,Ge)|0,i=(i=i+Math.imul(De,ut)|0)+Math.imul(Le,Ge)|0,y=y+Math.imul(Le,ut)|0,d=d+Math.imul(Ne,nt)|0,i=(i=i+Math.imul(Ne,Ve)|0)+Math.imul(_e,nt)|0,y=y+Math.imul(_e,Ve)|0,d=d+Math.imul(Te,ft)|0,i=(i=i+Math.imul(Te,st)|0)+Math.imul(Ee,ft)|0,y=y+Math.imul(Ee,st)|0,d=d+Math.imul(J,ct)|0,i=(i=i+Math.imul(J,ze)|0)+Math.imul(ue,ct)|0,y=y+Math.imul(ue,ze)|0,d=d+Math.imul(ye,dt)|0,i=(i=i+Math.imul(ye,Xe)|0)+Math.imul(re,dt)|0,y=y+Math.imul(re,Xe)|0,d=d+Math.imul(Ce,Ye)|0,i=(i=i+Math.imul(Ce,Qe)|0)+Math.imul(oe,Ye)|0,y=y+Math.imul(oe,Qe)|0;var An=(D+(d=d+Math.imul(ae,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(ae,lt)|0)+Math.imul(de,Ze)|0))<<13)|0;D=((y=y+Math.imul(de,lt)|0)+(i>>>13)|0)+(An>>>26)|0,An&=67108863,d=Math.imul(He,Ge),i=(i=Math.imul(He,ut))+Math.imul($e,Ge)|0,y=Math.imul($e,ut),d=d+Math.imul(De,nt)|0,i=(i=i+Math.imul(De,Ve)|0)+Math.imul(Le,nt)|0,y=y+Math.imul(Le,Ve)|0,d=d+Math.imul(Ne,ft)|0,i=(i=i+Math.imul(Ne,st)|0)+Math.imul(_e,ft)|0,y=y+Math.imul(_e,st)|0,d=d+Math.imul(Te,ct)|0,i=(i=i+Math.imul(Te,ze)|0)+Math.imul(Ee,ct)|0,y=y+Math.imul(Ee,ze)|0,d=d+Math.imul(J,dt)|0,i=(i=i+Math.imul(J,Xe)|0)+Math.imul(ue,dt)|0,y=y+Math.imul(ue,Xe)|0,d=d+Math.imul(ye,Ye)|0,i=(i=i+Math.imul(ye,Qe)|0)+Math.imul(re,Ye)|0,y=y+Math.imul(re,Qe)|0;var Cn=(D+(d=d+Math.imul(Ce,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(Ce,lt)|0)+Math.imul(oe,Ze)|0))<<13)|0;D=((y=y+Math.imul(oe,lt)|0)+(i>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,d=Math.imul(He,nt),i=(i=Math.imul(He,Ve))+Math.imul($e,nt)|0,y=Math.imul($e,Ve),d=d+Math.imul(De,ft)|0,i=(i=i+Math.imul(De,st)|0)+Math.imul(Le,ft)|0,y=y+Math.imul(Le,st)|0,d=d+Math.imul(Ne,ct)|0,i=(i=i+Math.imul(Ne,ze)|0)+Math.imul(_e,ct)|0,y=y+Math.imul(_e,ze)|0,d=d+Math.imul(Te,dt)|0,i=(i=i+Math.imul(Te,Xe)|0)+Math.imul(Ee,dt)|0,y=y+Math.imul(Ee,Xe)|0,d=d+Math.imul(J,Ye)|0,i=(i=i+Math.imul(J,Qe)|0)+Math.imul(ue,Ye)|0,y=y+Math.imul(ue,Qe)|0;var Sn=(D+(d=d+Math.imul(ye,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(ye,lt)|0)+Math.imul(re,Ze)|0))<<13)|0;D=((y=y+Math.imul(re,lt)|0)+(i>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,d=Math.imul(He,ft),i=(i=Math.imul(He,st))+Math.imul($e,ft)|0,y=Math.imul($e,st),d=d+Math.imul(De,ct)|0,i=(i=i+Math.imul(De,ze)|0)+Math.imul(Le,ct)|0,y=y+Math.imul(Le,ze)|0,d=d+Math.imul(Ne,dt)|0,i=(i=i+Math.imul(Ne,Xe)|0)+Math.imul(_e,dt)|0,y=y+Math.imul(_e,Xe)|0,d=d+Math.imul(Te,Ye)|0,i=(i=i+Math.imul(Te,Qe)|0)+Math.imul(Ee,Ye)|0,y=y+Math.imul(Ee,Qe)|0;var Rt=(D+(d=d+Math.imul(J,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(J,lt)|0)+Math.imul(ue,Ze)|0))<<13)|0;D=((y=y+Math.imul(ue,lt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,d=Math.imul(He,ct),i=(i=Math.imul(He,ze))+Math.imul($e,ct)|0,y=Math.imul($e,ze),d=d+Math.imul(De,dt)|0,i=(i=i+Math.imul(De,Xe)|0)+Math.imul(Le,dt)|0,y=y+Math.imul(Le,Xe)|0,d=d+Math.imul(Ne,Ye)|0,i=(i=i+Math.imul(Ne,Qe)|0)+Math.imul(_e,Ye)|0,y=y+Math.imul(_e,Qe)|0;var Dn=(D+(d=d+Math.imul(Te,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(Te,lt)|0)+Math.imul(Ee,Ze)|0))<<13)|0;D=((y=y+Math.imul(Ee,lt)|0)+(i>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,d=Math.imul(He,dt),i=(i=Math.imul(He,Xe))+Math.imul($e,dt)|0,y=Math.imul($e,Xe),d=d+Math.imul(De,Ye)|0,i=(i=i+Math.imul(De,Qe)|0)+Math.imul(Le,Ye)|0,y=y+Math.imul(Le,Qe)|0;var Qt=(D+(d=d+Math.imul(Ne,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(Ne,lt)|0)+Math.imul(_e,Ze)|0))<<13)|0;D=((y=y+Math.imul(_e,lt)|0)+(i>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,d=Math.imul(He,Ye),i=(i=Math.imul(He,Qe))+Math.imul($e,Ye)|0,y=Math.imul($e,Qe);var nn=(D+(d=d+Math.imul(De,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(De,lt)|0)+Math.imul(Le,Ze)|0))<<13)|0;D=((y=y+Math.imul(Le,lt)|0)+(i>>>13)|0)+(nn>>>26)|0,nn&=67108863;var En=(D+(d=Math.imul(He,Ze))|0)+((8191&(i=(i=Math.imul(He,lt))+Math.imul($e,Ze)|0))<<13)|0;return D=((y=Math.imul($e,lt))+(i>>>13)|0)+(En>>>26)|0,En&=67108863,_[0]=ln,_[1]=jt,_[2]=qt,_[3]=wn,_[4]=hn,_[5]=gn,_[6]=Rn,_[7]=on,_[8]=_n,_[9]=Jt,_[10]=Ft,_[11]=An,_[12]=Cn,_[13]=Sn,_[14]=Rt,_[15]=Dn,_[16]=Qt,_[17]=nn,_[18]=En,0!==D&&(_[19]=D,l.length++),l};function k(x,r,s){return(new O).mulp(x,r,s)}function O(x,r){this.x=x,this.y=r}Math.imul||(I=w),u.prototype.mulTo=function(r,s){var a=this.length+r.length;return 10===this.length&&10===r.length?I(this,r,s):a<63?w(this,r,s):a<1024?function(x,r,s){s.negative=r.negative^x.negative,s.length=x.length+r.length;for(var l=0,a=0,f=0;f<s.length-1;f++){var _=a;a=0;for(var D=67108863&l,d=Math.min(f,r.length-1),i=Math.max(0,f-x.length+1);i<=d;i++){var Z=(0|x.words[f-i])*(0|r.words[i]),ge=67108863&Z;D=67108863&(ge=ge+D|0),a+=(_=(_=_+(Z/67108864|0)|0)+(ge>>>26)|0)>>>26,_&=67108863}s.words[f]=D,l=_,_=a}return 0!==l?s.words[f]=l:s.length--,s.strip()}(this,r,s):k(this,r,s)},O.prototype.makeRBT=function(r){for(var s=new Array(r),l=u.prototype._countBits(r)-1,a=0;a<r;a++)s[a]=this.revBin(a,l,r);return s},O.prototype.revBin=function(r,s,l){if(0===r||r===l-1)return r;for(var a=0,f=0;f<s;f++)a|=(1&r)<<s-f-1,r>>=1;return a},O.prototype.permute=function(r,s,l,a,f,_){for(var D=0;D<_;D++)a[D]=s[r[D]],f[D]=l[r[D]]},O.prototype.transform=function(r,s,l,a,f,_){this.permute(_,r,s,l,a,f);for(var D=1;D<f;D<<=1)for(var d=D<<1,i=Math.cos(2*Math.PI/d),y=Math.sin(2*Math.PI/d),z=0;z<f;z+=d)for(var q=i,Z=y,ge=0;ge<D;ge++){var me=l[z+ge],le=a[z+ge],fe=l[z+ge+D],ae=a[z+ge+D],de=q*fe-Z*ae;ae=q*ae+Z*fe,l[z+ge]=me+(fe=de),a[z+ge]=le+ae,l[z+ge+D]=me-fe,a[z+ge+D]=le-ae,ge!==d&&(de=i*q-y*Z,Z=i*Z+y*q,q=de)}},O.prototype.guessLen13b=function(r,s){var l=1|Math.max(s,r),a=1&l,f=0;for(l=l/2|0;l;l>>>=1)f++;return 1<<f+1+a},O.prototype.conjugate=function(r,s,l){if(!(l<=1))for(var a=0;a<l/2;a++){var f=r[a];r[a]=r[l-a-1],r[l-a-1]=f,f=s[a],s[a]=-s[l-a-1],s[l-a-1]=-f}},O.prototype.normalize13b=function(r,s){for(var l=0,a=0;a<s/2;a++){var f=8192*Math.round(r[2*a+1]/s)+Math.round(r[2*a]/s)+l;r[a]=67108863&f,l=f<67108864?0:f/67108864|0}return r},O.prototype.convert13b=function(r,s,l,a){for(var f=0,_=0;_<s;_++)l[2*_]=8191&(f+=0|r[_]),l[2*_+1]=8191&(f>>>=13),f>>>=13;for(_=2*s;_<a;++_)l[_]=0;m(0===f),m(0==(-8192&f))},O.prototype.stub=function(r){for(var s=new Array(r),l=0;l<r;l++)s[l]=0;return s},O.prototype.mulp=function(r,s,l){var a=2*this.guessLen13b(r.length,s.length),f=this.makeRBT(a),_=this.stub(a),D=new Array(a),d=new Array(a),i=new Array(a),y=new Array(a),z=new Array(a),q=new Array(a),Z=l.words;Z.length=a,this.convert13b(r.words,r.length,D,a),this.convert13b(s.words,s.length,y,a),this.transform(D,_,d,i,a,f),this.transform(y,_,z,q,a,f);for(var ge=0;ge<a;ge++){var me=d[ge]*z[ge]-i[ge]*q[ge];i[ge]=d[ge]*q[ge]+i[ge]*z[ge],d[ge]=me}return this.conjugate(d,i,a),this.transform(d,i,Z,_,a,f),this.conjugate(Z,_,a),this.normalize13b(Z,a),l.negative=r.negative^s.negative,l.length=r.length+s.length,l.strip()},u.prototype.mul=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),this.mulTo(r,s)},u.prototype.mulf=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),k(this,r,s)},u.prototype.imul=function(r){return this.clone().mulTo(r,this)},u.prototype.imuln=function(r){m("number"==typeof r),m(r<67108864);for(var s=0,l=0;l<this.length;l++){var a=(0|this.words[l])*r,f=(67108863&a)+(67108863&s);s>>=26,s+=a/67108864|0,s+=f>>>26,this.words[l]=67108863&f}return 0!==s&&(this.words[l]=s,this.length++),this},u.prototype.muln=function(r){return this.clone().imuln(r)},u.prototype.sqr=function(){return this.mul(this)},u.prototype.isqr=function(){return this.imul(this.clone())},u.prototype.pow=function(r){var s=function(x){for(var r=new Array(x.bitLength()),s=0;s<r.length;s++){var a=s%26;r[s]=(x.words[s/26|0]&1<<a)>>>a}return r}(r);if(0===s.length)return new u(1);for(var l=this,a=0;a<s.length&&0===s[a];a++,l=l.sqr());if(++a<s.length)for(var f=l.sqr();a<s.length;a++,f=f.sqr())0!==s[a]&&(l=l.mul(f));return l},u.prototype.iushln=function(r){m("number"==typeof r&&r>=0);var f,s=r%26,l=(r-s)/26,a=67108863>>>26-s<<26-s;if(0!==s){var _=0;for(f=0;f<this.length;f++){var D=this.words[f]&a;this.words[f]=(0|this.words[f])-D<<s|_,_=D>>>26-s}_&&(this.words[f]=_,this.length++)}if(0!==l){for(f=this.length-1;f>=0;f--)this.words[f+l]=this.words[f];for(f=0;f<l;f++)this.words[f]=0;this.length+=l}return this.strip()},u.prototype.ishln=function(r){return m(0===this.negative),this.iushln(r)},u.prototype.iushrn=function(r,s,l){var a;m("number"==typeof r&&r>=0),a=s?(s-s%26)/26:0;var f=r%26,_=Math.min((r-f)/26,this.length),D=67108863^67108863>>>f<<f,d=l;if(a-=_,a=Math.max(0,a),d){for(var i=0;i<_;i++)d.words[i]=this.words[i];d.length=_}if(0!==_)if(this.length>_)for(this.length-=_,i=0;i<this.length;i++)this.words[i]=this.words[i+_];else this.words[0]=0,this.length=1;var y=0;for(i=this.length-1;i>=0&&(0!==y||i>=a);i--){var z=0|this.words[i];this.words[i]=y<<26-f|z>>>f,y=z&D}return d&&0!==y&&(d.words[d.length++]=y),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},u.prototype.ishrn=function(r,s,l){return m(0===this.negative),this.iushrn(r,s,l)},u.prototype.shln=function(r){return this.clone().ishln(r)},u.prototype.ushln=function(r){return this.clone().iushln(r)},u.prototype.shrn=function(r){return this.clone().ishrn(r)},u.prototype.ushrn=function(r){return this.clone().iushrn(r)},u.prototype.testn=function(r){m("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return!(this.length<=l||!(this.words[l]&1<<s))},u.prototype.imaskn=function(r){m("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return m(0===this.negative,"imaskn works only with positive numbers"),this.length<=l?this:(0!==s&&l++,this.length=Math.min(l,this.length),0!==s&&(this.words[this.length-1]&=67108863^67108863>>>s<<s),this.strip())},u.prototype.maskn=function(r){return this.clone().imaskn(r)},u.prototype.iaddn=function(r){return m("number"==typeof r),m(r<67108864),r<0?this.isubn(-r):0!==this.negative?1===this.length&&(0|this.words[0])<r?(this.words[0]=r-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(r),this.negative=1,this):this._iaddn(r)},u.prototype._iaddn=function(r){this.words[0]+=r;for(var s=0;s<this.length&&this.words[s]>=67108864;s++)this.words[s]-=67108864,s===this.length-1?this.words[s+1]=1:this.words[s+1]++;return this.length=Math.max(this.length,s+1),this},u.prototype.isubn=function(r){if(m("number"==typeof r),m(r<67108864),r<0)return this.iaddn(-r);if(0!==this.negative)return this.negative=0,this.iaddn(r),this.negative=1,this;if(this.words[0]-=r,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var s=0;s<this.length&&this.words[s]<0;s++)this.words[s]+=67108864,this.words[s+1]-=1;return this.strip()},u.prototype.addn=function(r){return this.clone().iaddn(r)},u.prototype.subn=function(r){return this.clone().isubn(r)},u.prototype.iabs=function(){return this.negative=0,this},u.prototype.abs=function(){return this.clone().iabs()},u.prototype._ishlnsubmul=function(r,s,l){var f;this._expand(r.length+l);var _,D=0;for(f=0;f<r.length;f++){_=(0|this.words[f+l])+D;var d=(0|r.words[f])*s;D=((_-=67108863&d)>>26)-(d/67108864|0),this.words[f+l]=67108863&_}for(;f<this.length-l;f++)D=(_=(0|this.words[f+l])+D)>>26,this.words[f+l]=67108863&_;if(0===D)return this.strip();for(m(-1===D),D=0,f=0;f<this.length;f++)D=(_=-(0|this.words[f])+D)>>26,this.words[f]=67108863&_;return this.negative=1,this.strip()},u.prototype._wordDiv=function(r,s){var l,a=this.clone(),f=r,_=0|f.words[f.length-1];0!=(l=26-this._countBits(_))&&(f=f.ushln(l),a.iushln(l),_=0|f.words[f.length-1]);var i,d=a.length-f.length;if("mod"!==s){(i=new u(null)).length=d+1,i.words=new Array(i.length);for(var y=0;y<i.length;y++)i.words[y]=0}var z=a.clone()._ishlnsubmul(f,1,d);0===z.negative&&(a=z,i&&(i.words[d]=1));for(var q=d-1;q>=0;q--){var Z=67108864*(0|a.words[f.length+q])+(0|a.words[f.length+q-1]);for(Z=Math.min(Z/_|0,67108863),a._ishlnsubmul(f,Z,q);0!==a.negative;)Z--,a.negative=0,a._ishlnsubmul(f,1,q),a.isZero()||(a.negative^=1);i&&(i.words[q]=Z)}return i&&i.strip(),a.strip(),"div"!==s&&0!==l&&a.iushrn(l),{div:i||null,mod:a}},u.prototype.divmod=function(r,s,l){return m(!r.isZero()),this.isZero()?{div:new u(0),mod:new u(0)}:0!==this.negative&&0===r.negative?(_=this.neg().divmod(r,s),"mod"!==s&&(a=_.div.neg()),"div"!==s&&(f=_.mod.neg(),l&&0!==f.negative&&f.iadd(r)),{div:a,mod:f}):0===this.negative&&0!==r.negative?(_=this.divmod(r.neg(),s),"mod"!==s&&(a=_.div.neg()),{div:a,mod:_.mod}):0!=(this.negative&r.negative)?(_=this.neg().divmod(r.neg(),s),"div"!==s&&(f=_.mod.neg(),l&&0!==f.negative&&f.isub(r)),{div:_.div,mod:f}):r.length>this.length||this.cmp(r)<0?{div:new u(0),mod:this}:1===r.length?"div"===s?{div:this.divn(r.words[0]),mod:null}:"mod"===s?{div:null,mod:new u(this.modn(r.words[0]))}:{div:this.divn(r.words[0]),mod:new u(this.modn(r.words[0]))}:this._wordDiv(r,s);var a,f,_},u.prototype.div=function(r){return this.divmod(r,"div",!1).div},u.prototype.mod=function(r){return this.divmod(r,"mod",!1).mod},u.prototype.umod=function(r){return this.divmod(r,"mod",!0).mod},u.prototype.divRound=function(r){var s=this.divmod(r);if(s.mod.isZero())return s.div;var l=0!==s.div.negative?s.mod.isub(r):s.mod,a=r.ushrn(1),f=r.andln(1),_=l.cmp(a);return _<0||1===f&&0===_?s.div:0!==s.div.negative?s.div.isubn(1):s.div.iaddn(1)},u.prototype.modn=function(r){m(r<=67108863);for(var s=(1<<26)%r,l=0,a=this.length-1;a>=0;a--)l=(s*l+(0|this.words[a]))%r;return l},u.prototype.idivn=function(r){m(r<=67108863);for(var s=0,l=this.length-1;l>=0;l--){var a=(0|this.words[l])+67108864*s;this.words[l]=a/r|0,s=a%r}return this.strip()},u.prototype.divn=function(r){return this.clone().idivn(r)},u.prototype.egcd=function(r){m(0===r.negative),m(!r.isZero());var s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),_=new u(0),D=new u(1),d=0;s.isEven()&&l.isEven();)s.iushrn(1),l.iushrn(1),++d;for(var i=l.clone(),y=s.clone();!s.isZero();){for(var z=0,q=1;0==(s.words[0]&q)&&z<26;++z,q<<=1);if(z>0)for(s.iushrn(z);z-- >0;)(a.isOdd()||f.isOdd())&&(a.iadd(i),f.isub(y)),a.iushrn(1),f.iushrn(1);for(var Z=0,ge=1;0==(l.words[0]&ge)&&Z<26;++Z,ge<<=1);if(Z>0)for(l.iushrn(Z);Z-- >0;)(_.isOdd()||D.isOdd())&&(_.iadd(i),D.isub(y)),_.iushrn(1),D.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(_),f.isub(D)):(l.isub(s),_.isub(a),D.isub(f))}return{a:_,b:D,gcd:l.iushln(d)}},u.prototype._invmp=function(r){m(0===r.negative),m(!r.isZero());var z,s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),_=l.clone();s.cmpn(1)>0&&l.cmpn(1)>0;){for(var D=0,d=1;0==(s.words[0]&d)&&D<26;++D,d<<=1);if(D>0)for(s.iushrn(D);D-- >0;)a.isOdd()&&a.iadd(_),a.iushrn(1);for(var i=0,y=1;0==(l.words[0]&y)&&i<26;++i,y<<=1);if(i>0)for(l.iushrn(i);i-- >0;)f.isOdd()&&f.iadd(_),f.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(f)):(l.isub(s),f.isub(a))}return(z=0===s.cmpn(1)?a:f).cmpn(0)<0&&z.iadd(r),z},u.prototype.gcd=function(r){if(this.isZero())return r.abs();if(r.isZero())return this.abs();var s=this.clone(),l=r.clone();s.negative=0,l.negative=0;for(var a=0;s.isEven()&&l.isEven();a++)s.iushrn(1),l.iushrn(1);for(;;){for(;s.isEven();)s.iushrn(1);for(;l.isEven();)l.iushrn(1);var f=s.cmp(l);if(f<0){var _=s;s=l,l=_}else if(0===f||0===l.cmpn(1))break;s.isub(l)}return l.iushln(a)},u.prototype.invm=function(r){return this.egcd(r).a.umod(r)},u.prototype.isEven=function(){return 0==(1&this.words[0])},u.prototype.isOdd=function(){return 1==(1&this.words[0])},u.prototype.andln=function(r){return this.words[0]&r},u.prototype.bincn=function(r){m("number"==typeof r);var s=r%26,l=(r-s)/26,a=1<<s;if(this.length<=l)return this._expand(l+1),this.words[l]|=a,this;for(var f=a,_=l;0!==f&&_<this.length;_++){var D=0|this.words[_];f=(D+=f)>>>26,this.words[_]=D&=67108863}return 0!==f&&(this.words[_]=f,this.length++),this},u.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},u.prototype.cmpn=function(r){var l,s=r<0;if(0!==this.negative&&!s)return-1;if(0===this.negative&&s)return 1;if(this.strip(),this.length>1)l=1;else{s&&(r=-r),m(r<=67108863,"Number is too big");var a=0|this.words[0];l=a===r?0:a<r?-1:1}return 0!==this.negative?0|-l:l},u.prototype.cmp=function(r){if(0!==this.negative&&0===r.negative)return-1;if(0===this.negative&&0!==r.negative)return 1;var s=this.ucmp(r);return 0!==this.negative?0|-s:s},u.prototype.ucmp=function(r){if(this.length>r.length)return 1;if(this.length<r.length)return-1;for(var s=0,l=this.length-1;l>=0;l--){var a=0|this.words[l],f=0|r.words[l];if(a!==f){a<f?s=-1:a>f&&(s=1);break}}return s},u.prototype.gtn=function(r){return 1===this.cmpn(r)},u.prototype.gt=function(r){return 1===this.cmp(r)},u.prototype.gten=function(r){return this.cmpn(r)>=0},u.prototype.gte=function(r){return this.cmp(r)>=0},u.prototype.ltn=function(r){return-1===this.cmpn(r)},u.prototype.lt=function(r){return-1===this.cmp(r)},u.prototype.lten=function(r){return this.cmpn(r)<=0},u.prototype.lte=function(r){return this.cmp(r)<=0},u.prototype.eqn=function(r){return 0===this.cmpn(r)},u.prototype.eq=function(r){return 0===this.cmp(r)},u.red=function(r){return new $(r)},u.prototype.toRed=function(r){return m(!this.red,"Already a number in reduction context"),m(0===this.negative,"red works only with positives"),r.convertTo(this)._forceRed(r)},u.prototype.fromRed=function(){return m(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},u.prototype._forceRed=function(r){return this.red=r,this},u.prototype.forceRed=function(r){return m(!this.red,"Already a number in reduction context"),this._forceRed(r)},u.prototype.redAdd=function(r){return m(this.red,"redAdd works only with red numbers"),this.red.add(this,r)},u.prototype.redIAdd=function(r){return m(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,r)},u.prototype.redSub=function(r){return m(this.red,"redSub works only with red numbers"),this.red.sub(this,r)},u.prototype.redISub=function(r){return m(this.red,"redISub works only with red numbers"),this.red.isub(this,r)},u.prototype.redShl=function(r){return m(this.red,"redShl works only with red numbers"),this.red.shl(this,r)},u.prototype.redMul=function(r){return m(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.mul(this,r)},u.prototype.redIMul=function(r){return m(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.imul(this,r)},u.prototype.redSqr=function(){return m(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},u.prototype.redISqr=function(){return m(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},u.prototype.redSqrt=function(){return m(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},u.prototype.redInvm=function(){return m(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},u.prototype.redNeg=function(){return m(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},u.prototype.redPow=function(r){return m(this.red&&!r.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,r)};var V={k256:null,p224:null,p192:null,p25519:null};function U(x,r){this.name=x,this.p=new u(r,16),this.n=this.p.bitLength(),this.k=new u(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function B(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function H(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function W(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function te(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function $(x){if("string"==typeof x){var r=u._prime(x);this.m=r.p,this.prime=r}else m(x.gtn(1),"modulus must be greater than 1"),this.m=x,this.prime=null}function pe(x){$.call(this,x),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new u(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}U.prototype._tmp=function(){var r=new u(null);return r.words=new Array(Math.ceil(this.n/13)),r},U.prototype.ireduce=function(r){var l,s=r;do{this.split(s,this.tmp),l=(s=(s=this.imulK(s)).iadd(this.tmp)).bitLength()}while(l>this.n);var a=l<this.n?-1:s.ucmp(this.p);return 0===a?(s.words[0]=0,s.length=1):a>0?s.isub(this.p):void 0!==s.strip?s.strip():s._strip(),s},U.prototype.split=function(r,s){r.iushrn(this.n,0,s)},U.prototype.imulK=function(r){return r.imul(this.k)},R(B,U),B.prototype.split=function(r,s){for(var l=4194303,a=Math.min(r.length,9),f=0;f<a;f++)s.words[f]=r.words[f];if(s.length=a,r.length<=9)return r.words[0]=0,void(r.length=1);var _=r.words[9];for(s.words[s.length++]=_&l,f=10;f<r.length;f++){var D=0|r.words[f];r.words[f-10]=(D&l)<<4|_>>>22,_=D}r.words[f-10]=_>>>=22,r.length-=0===_&&r.length>10?10:9},B.prototype.imulK=function(r){r.words[r.length]=0,r.words[r.length+1]=0,r.length+=2;for(var s=0,l=0;l<r.length;l++){var a=0|r.words[l];r.words[l]=67108863&(s+=977*a),s=64*a+(s/67108864|0)}return 0===r.words[r.length-1]&&(r.length--,0===r.words[r.length-1]&&r.length--),r},R(H,U),R(W,U),R(te,U),te.prototype.imulK=function(r){for(var s=0,l=0;l<r.length;l++){var a=19*(0|r.words[l])+s,f=67108863&a;a>>>=26,r.words[l]=f,s=a}return 0!==s&&(r.words[r.length++]=s),r},u._prime=function(r){if(V[r])return V[r];var s;if("k256"===r)s=new B;else if("p224"===r)s=new H;else if("p192"===r)s=new W;else{if("p25519"!==r)throw new Error("Unknown prime "+r);s=new te}return V[r]=s,s},$.prototype._verify1=function(r){m(0===r.negative,"red works only with positives"),m(r.red,"red works only with red numbers")},$.prototype._verify2=function(r,s){m(0==(r.negative|s.negative),"red works only with positives"),m(r.red&&r.red===s.red,"red works only with red numbers")},$.prototype.imod=function(r){return this.prime?this.prime.ireduce(r)._forceRed(this):r.umod(this.m)._forceRed(this)},$.prototype.neg=function(r){return r.isZero()?r.clone():this.m.sub(r)._forceRed(this)},$.prototype.add=function(r,s){this._verify2(r,s);var l=r.add(s);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},$.prototype.iadd=function(r,s){this._verify2(r,s);var l=r.iadd(s);return l.cmp(this.m)>=0&&l.isub(this.m),l},$.prototype.sub=function(r,s){this._verify2(r,s);var l=r.sub(s);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},$.prototype.isub=function(r,s){this._verify2(r,s);var l=r.isub(s);return l.cmpn(0)<0&&l.iadd(this.m),l},$.prototype.shl=function(r,s){return this._verify1(r),this.imod(r.ushln(s))},$.prototype.imul=function(r,s){return this._verify2(r,s),this.imod(r.imul(s))},$.prototype.mul=function(r,s){return this._verify2(r,s),this.imod(r.mul(s))},$.prototype.isqr=function(r){return this.imul(r,r.clone())},$.prototype.sqr=function(r){return this.mul(r,r)},$.prototype.sqrt=function(r){if(r.isZero())return r.clone();var s=this.m.andln(3);if(m(s%2==1),3===s){var l=this.m.add(new u(1)).iushrn(2);return this.pow(r,l)}for(var a=this.m.subn(1),f=0;!a.isZero()&&0===a.andln(1);)f++,a.iushrn(1);m(!a.isZero());var _=new u(1).toRed(this),D=_.redNeg(),d=this.m.subn(1).iushrn(1),i=this.m.bitLength();for(i=new u(2*i*i).toRed(this);0!==this.pow(i,d).cmp(D);)i.redIAdd(D);for(var y=this.pow(i,a),z=this.pow(r,a.addn(1).iushrn(1)),q=this.pow(r,a),Z=f;0!==q.cmp(_);){for(var ge=q,me=0;0!==ge.cmp(_);me++)ge=ge.redSqr();m(me<Z);var le=this.pow(y,new u(1).iushln(Z-me-1));z=z.redMul(le),y=le.redSqr(),q=q.redMul(y),Z=me}return z},$.prototype.invm=function(r){var s=r._invmp(this.m);return 0!==s.negative?(s.negative=0,this.imod(s).redNeg()):this.imod(s)},$.prototype.pow=function(r,s){if(s.isZero())return new u(1).toRed(this);if(0===s.cmpn(1))return r.clone();var a=new Array(16);a[0]=new u(1).toRed(this),a[1]=r;for(var f=2;f<a.length;f++)a[f]=this.mul(a[f-1],r);var _=a[0],D=0,d=0,i=s.bitLength()%26;for(0===i&&(i=26),f=s.length-1;f>=0;f--){for(var y=s.words[f],z=i-1;z>=0;z--){var q=y>>z&1;_!==a[0]&&(_=this.sqr(_)),0!==q||0!==D?(D<<=1,D|=q,(4==++d||0===f&&0===z)&&(_=this.mul(_,a[D]),d=0,D=0)):d=0}i=26}return _},$.prototype.convertTo=function(r){var s=r.umod(this.m);return s===r?s.clone():s},$.prototype.convertFrom=function(r){var s=r.clone();return s.red=null,s},u.mont=function(r){return new pe(r)},R(pe,$),pe.prototype.convertTo=function(r){return this.imod(r.ushln(this.shift))},pe.prototype.convertFrom=function(r){var s=this.imod(r.mul(this.rinv));return s.red=null,s},pe.prototype.imul=function(r,s){if(r.isZero()||s.isZero())return r.words[0]=0,r.length=1,r;var l=r.imul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),_=f;return f.cmp(this.m)>=0?_=f.isub(this.m):f.cmpn(0)<0&&(_=f.iadd(this.m)),_._forceRed(this)},pe.prototype.mul=function(r,s){if(r.isZero()||s.isZero())return new u(0)._forceRed(this);var l=r.mul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),_=f;return f.cmp(this.m)>=0?_=f.isub(this.m):f.cmpn(0)<0&&(_=f.iadd(this.m)),_._forceRed(this)},pe.prototype.invm=function(r){return this.imod(r._invmp(this.m).mul(this.r2))._forceRed(this)}}(Y=E.nmd(Y),this)},6055:Y=>{function L(E,p){if(!E)throw new Error(p||"Assertion failed")}Y.exports=L,L.equal=function(p,N,m){if(p!=N)throw new Error(m||"Assertion failed: "+p+" != "+N)}},4869:(Y,L)=>{"use strict";var E=L;function N(R){return 1===R.length?"0"+R:R}function m(R){for(var u="",v=0;v<R.length;v++)u+=N(R[v].toString(16));return u}E.toArray=function(R,u){if(Array.isArray(R))return R.slice();if(!R)return[];var v=[];if("string"!=typeof R){for(var M=0;M<R.length;M++)v[M]=0|R[M];return v}if("hex"===u)for((R=R.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(R="0"+R),M=0;M<R.length;M+=2)v.push(parseInt(R[M]+R[M+1],16));else for(M=0;M<R.length;M++){var A=R.charCodeAt(M),T=A>>8,g=255&A;T?v.push(T,g):v.push(g)}return v},E.zero2=N,E.toHex=m,E.encode=function(u,v){return"hex"===v?m(u):u}},8228:Y=>{"use strict";var L=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;function N(R){if(null==R)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(R)}Y.exports=function(){try{if(!Object.assign)return!1;var R=new String("abc");if(R[5]="de","5"===Object.getOwnPropertyNames(R)[0])return!1;for(var u={},v=0;v<10;v++)u["_"+String.fromCharCode(v)]=v;if("0123456789"!==Object.getOwnPropertyNames(u).map(function(T){return u[T]}).join(""))return!1;var A={};return"abcdefghijklmnopqrst".split("").forEach(function(T){A[T]=T}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},A)).join("")}catch(T){return!1}}()?Object.assign:function(R,u){for(var v,A,M=N(R),T=1;T<arguments.length;T++){for(var g in v=Object(arguments[T]))E.call(v,g)&&(M[g]=v[g]);if(L){A=L(v);for(var h=0;h<A.length;h++)p.call(v,A[h])&&(M[A[h]]=v[A[h]])}}return M}},4673:(Y,L,E)=>{"use strict";var p=E(2016);L.certificate=E(6240);var N=p.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});L.RSAPrivateKey=N;var m=p.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});L.RSAPublicKey=m;var R=p.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(u),this.key("subjectPublicKey").bitstr())});L.PublicKey=R;var u=p.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),v=p.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(u),this.key("subjectPrivateKey").octstr())});L.PrivateKey=v;var M=p.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});L.EncryptedPrivateKey=M;var A=p.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});L.DSAPrivateKey=A,L.DSAparam=p.define("DSAparam",function(){this.int()});var T=p.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(g),this.key("publicKey").optional().explicit(1).bitstr())});L.ECPrivateKey=T;var g=p.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});L.signature=p.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},6240:(Y,L,E)=>{"use strict";var p=E(2016),N=p.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),m=p.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),R=p.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),u=p.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(R),this.key("subjectPublicKey").bitstr())}),v=p.define("RelativeDistinguishedName",function(){this.setof(m)}),M=p.define("RDNSequence",function(){this.seqof(v)}),A=p.define("Name",function(){this.choice({rdnSequence:this.use(M)})}),T=p.define("Validity",function(){this.seq().obj(this.key("notBefore").use(N),this.key("notAfter").use(N))}),g=p.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),h=p.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(R),this.key("issuer").use(A),this.key("validity").use(T),this.key("subject").use(A),this.key("subjectPublicKeyInfo").use(u),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(g).optional())}),C=p.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(h),this.key("signatureAlgorithm").use(R),this.key("signatureValue").bitstr())});Y.exports=C},1553:(Y,L,E)=>{var p=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,N=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,m=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,R=E(2367),u=E(9586),v=E(5859).Buffer;Y.exports=function(M,A){var h,T=M.toString(),g=T.match(p);if(g){var b="aes"+g[1],w=v.from(g[2],"hex"),I=v.from(g[3].replace(/[\r\n]/g,""),"base64"),P=R(A,w.slice(0,8),parseInt(g[1],10)).key,k=[],O=u.createDecipheriv(b,P,w);k.push(O.update(I)),k.push(O.final()),h=v.concat(k)}else{var C=T.match(m);h=v.from(C[2].replace(/[\r\n]/g,""),"base64")}return{tag:T.match(N)[1],data:h}}},1997:(Y,L,E)=>{var p=E(4673),N=E(2562),m=E(1553),R=E(9586),u=E(4161),v=E(5859).Buffer;function M(T){var g;"object"==typeof T&&!v.isBuffer(T)&&(g=T.passphrase,T=T.key),"string"==typeof T&&(T=v.from(T));var w,I,h=m(T,g),C=h.tag,b=h.data;switch(C){case"CERTIFICATE":I=p.certificate.decode(b,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(I||(I=p.PublicKey.decode(b,"der")),w=I.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return p.RSAPublicKey.decode(I.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return I.subjectPrivateKey=I.subjectPublicKey,{type:"ec",data:I};case"1.2.840.10040.4.1":return I.algorithm.params.pub_key=p.DSAparam.decode(I.subjectPublicKey.data,"der"),{type:"dsa",data:I.algorithm.params};default:throw new Error("unknown key id "+w)}case"ENCRYPTED PRIVATE KEY":b=function(T,g){var h=T.algorithm.decrypt.kde.kdeparams.salt,C=parseInt(T.algorithm.decrypt.kde.kdeparams.iters.toString(),10),b=N[T.algorithm.decrypt.cipher.algo.join(".")],w=T.algorithm.decrypt.cipher.iv,I=T.subjectPrivateKey,P=parseInt(b.split("-")[1],10)/8,k=u.pbkdf2Sync(g,h,C,P,"sha1"),O=R.createDecipheriv(b,k,w),V=[];return V.push(O.update(I)),V.push(O.final()),v.concat(V)}(b=p.EncryptedPrivateKey.decode(b,"der"),g);case"PRIVATE KEY":switch(w=(I=p.PrivateKey.decode(b,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return p.RSAPrivateKey.decode(I.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:I.algorithm.curve,privateKey:p.ECPrivateKey.decode(I.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return I.algorithm.params.priv_key=p.DSAparam.decode(I.subjectPrivateKey,"der"),{type:"dsa",params:I.algorithm.params};default:throw new Error("unknown key id "+w)}case"RSA PUBLIC KEY":return p.RSAPublicKey.decode(b,"der");case"RSA PRIVATE KEY":return p.RSAPrivateKey.decode(b,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:p.DSAPrivateKey.decode(b,"der")};case"EC PRIVATE KEY":return{curve:(b=p.ECPrivateKey.decode(b,"der")).parameters.value,privateKey:b.privateKey};default:throw new Error("unknown key type "+C)}}Y.exports=M,M.signature=p.signature},4161:(Y,L,E)=>{L.pbkdf2=E(1898),L.pbkdf2Sync=E(205)},1898:(Y,L,E)=>{var v,h,p=E(5859).Buffer,N=E(9024),m=E(5657),R=E(205),u=E(6933),M=global.crypto&&global.crypto.subtle,A={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},T=[];function C(){return h||(h=global.process&&global.process.nextTick?global.process.nextTick:global.queueMicrotask?global.queueMicrotask:global.setImmediate?global.setImmediate:global.setTimeout)}function b(I,P,k,O,V){return M.importKey("raw",I,{name:"PBKDF2"},!1,["deriveBits"]).then(function(U){return M.deriveBits({name:"PBKDF2",salt:P,iterations:k,hash:{name:V}},U,O<<3)}).then(function(U){return p.from(U)})}Y.exports=function(I,P,k,O,V,U){"function"==typeof V&&(U=V,V=void 0);var B=A[(V=V||"sha1").toLowerCase()];if(B&&"function"==typeof global.Promise){if(N(k,O),I=u(I,m,"Password"),P=u(P,m,"Salt"),"function"!=typeof U)throw new Error("No callback provided to pbkdf2");!function(I,P){I.then(function(k){C()(function(){P(null,k)})},function(k){C()(function(){P(k)})})}(function(I){if(global.process&&!global.process.browser||!M||!M.importKey||!M.deriveBits)return Promise.resolve(!1);if(void 0!==T[I])return T[I];var P=b(v=v||p.alloc(8),v,10,128,I).then(function(){return!0}).catch(function(){return!1});return T[I]=P,P}(B).then(function(H){return H?b(I,P,k,O,B):R(I,P,k,O,V)}),U)}else C()(function(){var H;try{H=R(I,P,k,O,V)}catch(W){return U(W)}U(null,H)})}},5657:Y=>{var L;L=global.process&&global.process.browser?"utf-8":global.process&&global.process.version?parseInt(process.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":"utf-8",Y.exports=L},9024:Y=>{var L=Math.pow(2,30)-1;Y.exports=function(E,p){if("number"!=typeof E)throw new TypeError("Iterations not a number");if(E<0)throw new TypeError("Bad iterations");if("number"!=typeof p)throw new TypeError("Key length not a number");if(p<0||p>L||p!=p)throw new TypeError("Bad key length")}},205:(Y,L,E)=>{var p=E(4464),N=E(5207),m=E(5829),R=E(5859).Buffer,u=E(9024),v=E(5657),M=E(6933),A=R.alloc(128),T={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function g(b,w,I){var P=function(b){return"rmd160"===b||"ripemd160"===b?function(P){return(new N).update(P).digest()}:"md5"===b?p:function(P){return m(b).update(P).digest()}}(b),k="sha512"===b||"sha384"===b?128:64;w.length>k?w=P(w):w.length<k&&(w=R.concat([w,A],k));for(var O=R.allocUnsafe(k+T[b]),V=R.allocUnsafe(k+T[b]),U=0;U<k;U++)O[U]=54^w[U],V[U]=92^w[U];var B=R.allocUnsafe(k+I+4);O.copy(B,0,0,k),this.ipad1=B,this.ipad2=O,this.opad=V,this.alg=b,this.blocksize=k,this.hash=P,this.size=T[b]}g.prototype.run=function(b,w){return b.copy(w,this.blocksize),this.hash(w).copy(this.opad,this.blocksize),this.hash(this.opad)},Y.exports=function(b,w,I,P,k){u(I,P);var O=new g(k=k||"sha1",b=M(b,v,"Password"),(w=M(w,v,"Salt")).length),V=R.allocUnsafe(P),U=R.allocUnsafe(w.length+4);w.copy(U,0,0,w.length);for(var B=0,H=T[k],W=Math.ceil(P/H),te=1;te<=W;te++){U.writeUInt32BE(te,w.length);for(var $=O.run(U,O.ipad1),pe=$,x=1;x<I;x++){pe=O.run(pe,O.ipad2);for(var r=0;r<H;r++)$[r]^=pe[r]}$.copy(V,B),B+=H}return V}},6933:(Y,L,E)=>{var p=E(5859).Buffer;Y.exports=function(N,m,R){if(p.isBuffer(N))return N;if("string"==typeof N)return p.from(N,m);if(ArrayBuffer.isView(N))return p.from(N.buffer);throw new TypeError(R+" must be a string, a Buffer, a typed array or a DataView")}},7537:(Y,L,E)=>{L.publicEncrypt=E(4760),L.privateDecrypt=E(1548),L.privateEncrypt=function(N,m){return L.publicEncrypt(N,m,!0)},L.publicDecrypt=function(N,m){return L.privateDecrypt(N,m,!0)}},444:(Y,L,E)=>{var p=E(2506),N=E(5859).Buffer;function m(R){var u=N.allocUnsafe(4);return u.writeUInt32BE(R,0),u}Y.exports=function(R,u){for(var A,v=N.alloc(0),M=0;v.length<u;)A=m(M++),v=N.concat([v,p("sha1").update(R).update(A).digest()]);return v.slice(0,u)}},6494:function(Y,L,E){!function(p,N){"use strict";function m(x,r){if(!x)throw new Error(r||"Assertion failed")}function R(x,r){x.super_=r;var s=function(){};s.prototype=r.prototype,x.prototype=new s,x.prototype.constructor=x}function u(x,r,s){if(u.isBN(x))return x;this.negative=0,this.words=null,this.length=0,this.red=null,null!==x&&(("le"===r||"be"===r)&&(s=r,r=10),this._init(x||0,r||10,s||"be"))}var v;"object"==typeof p?p.exports=u:N.BN=u,u.BN=u,u.wordSize=26;try{v="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:E(7108).Buffer}catch(x){}function M(x,r){var s=x.charCodeAt(r);return s>=65&&s<=70?s-55:s>=97&&s<=102?s-87:s-48&15}function A(x,r,s){var l=M(x,s);return s-1>=r&&(l|=M(x,s-1)<<4),l}function T(x,r,s,l){for(var a=0,f=Math.min(x.length,s),_=r;_<f;_++){var D=x.charCodeAt(_)-48;a*=l,a+=D>=49?D-49+10:D>=17?D-17+10:D}return a}u.isBN=function(r){return r instanceof u||null!==r&&"object"==typeof r&&r.constructor.wordSize===u.wordSize&&Array.isArray(r.words)},u.max=function(r,s){return r.cmp(s)>0?r:s},u.min=function(r,s){return r.cmp(s)<0?r:s},u.prototype._init=function(r,s,l){if("number"==typeof r)return this._initNumber(r,s,l);if("object"==typeof r)return this._initArray(r,s,l);"hex"===s&&(s=16),m(s===(0|s)&&s>=2&&s<=36);var a=0;"-"===(r=r.toString().replace(/\s+/g,""))[0]&&(a++,this.negative=1),a<r.length&&(16===s?this._parseHex(r,a,l):(this._parseBase(r,s,a),"le"===l&&this._initArray(this.toArray(),s,l)))},u.prototype._initNumber=function(r,s,l){r<0&&(this.negative=1,r=-r),r<67108864?(this.words=[67108863&r],this.length=1):r<4503599627370496?(this.words=[67108863&r,r/67108864&67108863],this.length=2):(m(r<9007199254740992),this.words=[67108863&r,r/67108864&67108863,1],this.length=3),"le"===l&&this._initArray(this.toArray(),s,l)},u.prototype._initArray=function(r,s,l){if(m("number"==typeof r.length),r.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(r.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var f,_,D=0;if("be"===l)for(a=r.length-1,f=0;a>=0;a-=3)this.words[f]|=(_=r[a]|r[a-1]<<8|r[a-2]<<16)<<D&67108863,this.words[f+1]=_>>>26-D&67108863,(D+=24)>=26&&(D-=26,f++);else if("le"===l)for(a=0,f=0;a<r.length;a+=3)this.words[f]|=(_=r[a]|r[a+1]<<8|r[a+2]<<16)<<D&67108863,this.words[f+1]=_>>>26-D&67108863,(D+=24)>=26&&(D-=26,f++);return this.strip()},u.prototype._parseHex=function(r,s,l){this.length=Math.ceil((r.length-s)/6),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var D,f=0,_=0;if("be"===l)for(a=r.length-1;a>=s;a-=2)D=A(r,s,a)<<f,this.words[_]|=67108863&D,f>=18?(f-=18,this.words[_+=1]|=D>>>26):f+=8;else for(a=(r.length-s)%2==0?s+1:s;a<r.length;a+=2)D=A(r,s,a)<<f,this.words[_]|=67108863&D,f>=18?(f-=18,this.words[_+=1]|=D>>>26):f+=8;this.strip()},u.prototype._parseBase=function(r,s,l){this.words=[0],this.length=1;for(var a=0,f=1;f<=67108863;f*=s)a++;a--,f=f/s|0;for(var _=r.length-l,D=_%a,d=Math.min(_,_-D)+l,i=0,y=l;y<d;y+=a)i=T(r,y,y+a,s),this.imuln(f),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i);if(0!==D){var z=1;for(i=T(r,y,r.length,s),y=0;y<D;y++)z*=s;this.imuln(z),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i)}this.strip()},u.prototype.copy=function(r){r.words=new Array(this.length);for(var s=0;s<this.length;s++)r.words[s]=this.words[s];r.length=this.length,r.negative=this.negative,r.red=this.red},u.prototype.clone=function(){var r=new u(null);return this.copy(r),r},u.prototype._expand=function(r){for(;this.length<r;)this.words[this.length++]=0;return this},u.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},u.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},u.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],C=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function w(x,r,s){s.negative=r.negative^x.negative;var l=x.length+r.length|0;s.length=l,l=l-1|0;var a=0|x.words[0],f=0|r.words[0],_=a*f,d=_/67108864|0;s.words[0]=67108863&_;for(var i=1;i<l;i++){for(var y=d>>>26,z=67108863&d,q=Math.min(i,r.length-1),Z=Math.max(0,i-x.length+1);Z<=q;Z++)y+=(_=(a=0|x.words[i-Z|0])*(f=0|r.words[Z])+z)/67108864|0,z=67108863&_;s.words[i]=0|z,d=0|y}return 0!==d?s.words[i]=0|d:s.length--,s.strip()}u.prototype.toString=function(r,s){var l;if(s=0|s||1,16===(r=r||10)||"hex"===r){l="";for(var a=0,f=0,_=0;_<this.length;_++){var D=this.words[_],d=(16777215&(D<<a|f)).toString(16);l=0!=(f=D>>>24-a&16777215)||_!==this.length-1?g[6-d.length]+d+l:d+l,(a+=2)>=26&&(a-=26,_--)}for(0!==f&&(l=f.toString(16)+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}if(r===(0|r)&&r>=2&&r<=36){var i=h[r],y=C[r];l="";var z=this.clone();for(z.negative=0;!z.isZero();){var q=z.modn(y).toString(r);l=(z=z.idivn(y)).isZero()?q+l:g[i-q.length]+q+l}for(this.isZero()&&(l="0"+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}m(!1,"Base should be between 2 and 36")},u.prototype.toNumber=function(){var r=this.words[0];return 2===this.length?r+=67108864*this.words[1]:3===this.length&&1===this.words[2]?r+=4503599627370496+67108864*this.words[1]:this.length>2&&m(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-r:r},u.prototype.toJSON=function(){return this.toString(16)},u.prototype.toBuffer=function(r,s){return m(void 0!==v),this.toArrayLike(v,r,s)},u.prototype.toArray=function(r,s){return this.toArrayLike(Array,r,s)},u.prototype.toArrayLike=function(r,s,l){var a=this.byteLength(),f=l||Math.max(1,a);m(a<=f,"byte array longer than desired length"),m(f>0,"Requested array length <= 0"),this.strip();var d,i,_="le"===s,D=new r(f),y=this.clone();if(_){for(i=0;!y.isZero();i++)d=y.andln(255),y.iushrn(8),D[i]=d;for(;i<f;i++)D[i]=0}else{for(i=0;i<f-a;i++)D[i]=0;for(i=0;!y.isZero();i++)d=y.andln(255),y.iushrn(8),D[f-i-1]=d}return D},u.prototype._countBits=Math.clz32?function(r){return 32-Math.clz32(r)}:function(r){var s=r,l=0;return s>=4096&&(l+=13,s>>>=13),s>=64&&(l+=7,s>>>=7),s>=8&&(l+=4,s>>>=4),s>=2&&(l+=2,s>>>=2),l+s},u.prototype._zeroBits=function(r){if(0===r)return 26;var s=r,l=0;return 0==(8191&s)&&(l+=13,s>>>=13),0==(127&s)&&(l+=7,s>>>=7),0==(15&s)&&(l+=4,s>>>=4),0==(3&s)&&(l+=2,s>>>=2),0==(1&s)&&l++,l},u.prototype.bitLength=function(){var s=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+s},u.prototype.zeroBits=function(){if(this.isZero())return 0;for(var r=0,s=0;s<this.length;s++){var l=this._zeroBits(this.words[s]);if(r+=l,26!==l)break}return r},u.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},u.prototype.toTwos=function(r){return 0!==this.negative?this.abs().inotn(r).iaddn(1):this.clone()},u.prototype.fromTwos=function(r){return this.testn(r-1)?this.notn(r).iaddn(1).ineg():this.clone()},u.prototype.isNeg=function(){return 0!==this.negative},u.prototype.neg=function(){return this.clone().ineg()},u.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},u.prototype.iuor=function(r){for(;this.length<r.length;)this.words[this.length++]=0;for(var s=0;s<r.length;s++)this.words[s]=this.words[s]|r.words[s];return this.strip()},u.prototype.ior=function(r){return m(0==(this.negative|r.negative)),this.iuor(r)},u.prototype.or=function(r){return this.length>r.length?this.clone().ior(r):r.clone().ior(this)},u.prototype.uor=function(r){return this.length>r.length?this.clone().iuor(r):r.clone().iuor(this)},u.prototype.iuand=function(r){var s;s=this.length>r.length?r:this;for(var l=0;l<s.length;l++)this.words[l]=this.words[l]&r.words[l];return this.length=s.length,this.strip()},u.prototype.iand=function(r){return m(0==(this.negative|r.negative)),this.iuand(r)},u.prototype.and=function(r){return this.length>r.length?this.clone().iand(r):r.clone().iand(this)},u.prototype.uand=function(r){return this.length>r.length?this.clone().iuand(r):r.clone().iuand(this)},u.prototype.iuxor=function(r){var s,l;this.length>r.length?(s=this,l=r):(s=r,l=this);for(var a=0;a<l.length;a++)this.words[a]=s.words[a]^l.words[a];if(this!==s)for(;a<s.length;a++)this.words[a]=s.words[a];return this.length=s.length,this.strip()},u.prototype.ixor=function(r){return m(0==(this.negative|r.negative)),this.iuxor(r)},u.prototype.xor=function(r){return this.length>r.length?this.clone().ixor(r):r.clone().ixor(this)},u.prototype.uxor=function(r){return this.length>r.length?this.clone().iuxor(r):r.clone().iuxor(this)},u.prototype.inotn=function(r){m("number"==typeof r&&r>=0);var s=0|Math.ceil(r/26),l=r%26;this._expand(s),l>0&&s--;for(var a=0;a<s;a++)this.words[a]=67108863&~this.words[a];return l>0&&(this.words[a]=~this.words[a]&67108863>>26-l),this.strip()},u.prototype.notn=function(r){return this.clone().inotn(r)},u.prototype.setn=function(r,s){m("number"==typeof r&&r>=0);var l=r/26|0,a=r%26;return this._expand(l+1),this.words[l]=s?this.words[l]|1<<a:this.words[l]&~(1<<a),this.strip()},u.prototype.iadd=function(r){var s,l,a;if(0!==this.negative&&0===r.negative)return this.negative=0,s=this.isub(r),this.negative^=1,this._normSign();if(0===this.negative&&0!==r.negative)return r.negative=0,s=this.isub(r),r.negative=1,s._normSign();this.length>r.length?(l=this,a=r):(l=r,a=this);for(var f=0,_=0;_<a.length;_++)this.words[_]=67108863&(s=(0|l.words[_])+(0|a.words[_])+f),f=s>>>26;for(;0!==f&&_<l.length;_++)this.words[_]=67108863&(s=(0|l.words[_])+f),f=s>>>26;if(this.length=l.length,0!==f)this.words[this.length]=f,this.length++;else if(l!==this)for(;_<l.length;_++)this.words[_]=l.words[_];return this},u.prototype.add=function(r){var s;return 0!==r.negative&&0===this.negative?(r.negative=0,s=this.sub(r),r.negative^=1,s):0===r.negative&&0!==this.negative?(this.negative=0,s=r.sub(this),this.negative=1,s):this.length>r.length?this.clone().iadd(r):r.clone().iadd(this)},u.prototype.isub=function(r){if(0!==r.negative){r.negative=0;var s=this.iadd(r);return r.negative=1,s._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(r),this.negative=1,this._normSign();var a,f,l=this.cmp(r);if(0===l)return this.negative=0,this.length=1,this.words[0]=0,this;l>0?(a=this,f=r):(a=r,f=this);for(var _=0,D=0;D<f.length;D++)_=(s=(0|a.words[D])-(0|f.words[D])+_)>>26,this.words[D]=67108863&s;for(;0!==_&&D<a.length;D++)_=(s=(0|a.words[D])+_)>>26,this.words[D]=67108863&s;if(0===_&&D<a.length&&a!==this)for(;D<a.length;D++)this.words[D]=a.words[D];return this.length=Math.max(this.length,D),a!==this&&(this.negative=1),this.strip()},u.prototype.sub=function(r){return this.clone().isub(r)};var I=function(r,s,l){var d,i,y,a=r.words,f=s.words,_=l.words,D=0,z=0|a[0],q=8191&z,Z=z>>>13,ge=0|a[1],me=8191&ge,le=ge>>>13,fe=0|a[2],ae=8191&fe,de=fe>>>13,xe=0|a[3],Ce=8191&xe,oe=xe>>>13,we=0|a[4],ye=8191&we,re=we>>>13,ee=0|a[5],J=8191&ee,ue=ee>>>13,Ae=0|a[6],Te=8191&Ae,Ee=Ae>>>13,We=0|a[7],Ne=8191&We,_e=We>>>13,Be=0|a[8],De=8191&Be,Le=Be>>>13,Mt=0|a[9],He=8191&Mt,$e=Mt>>>13,It=0|f[0],et=8191&It,pt=It>>>13,Ct=0|f[1],at=8191&Ct,it=Ct>>>13,Mn=0|f[2],ot=8191&Mn,Ke=Mn>>>13,In=0|f[3],Ge=8191&In,ut=In>>>13,On=0|f[4],nt=8191&On,Ve=On>>>13,kt=0|f[5],ft=8191&kt,st=kt>>>13,qn=0|f[6],ct=8191&qn,ze=qn>>>13,an=0|f[7],dt=8191&an,Xe=an>>>13,Yt=0|f[8],Ye=8191&Yt,Qe=Yt>>>13,kn=0|f[9],Ze=8191&kn,lt=kn>>>13;l.negative=r.negative^s.negative,l.length=19;var ln=(D+(d=Math.imul(q,et))|0)+((8191&(i=(i=Math.imul(q,pt))+Math.imul(Z,et)|0))<<13)|0;D=((y=Math.imul(Z,pt))+(i>>>13)|0)+(ln>>>26)|0,ln&=67108863,d=Math.imul(me,et),i=(i=Math.imul(me,pt))+Math.imul(le,et)|0,y=Math.imul(le,pt);var jt=(D+(d=d+Math.imul(q,at)|0)|0)+((8191&(i=(i=i+Math.imul(q,it)|0)+Math.imul(Z,at)|0))<<13)|0;D=((y=y+Math.imul(Z,it)|0)+(i>>>13)|0)+(jt>>>26)|0,jt&=67108863,d=Math.imul(ae,et),i=(i=Math.imul(ae,pt))+Math.imul(de,et)|0,y=Math.imul(de,pt),d=d+Math.imul(me,at)|0,i=(i=i+Math.imul(me,it)|0)+Math.imul(le,at)|0,y=y+Math.imul(le,it)|0;var qt=(D+(d=d+Math.imul(q,ot)|0)|0)+((8191&(i=(i=i+Math.imul(q,Ke)|0)+Math.imul(Z,ot)|0))<<13)|0;D=((y=y+Math.imul(Z,Ke)|0)+(i>>>13)|0)+(qt>>>26)|0,qt&=67108863,d=Math.imul(Ce,et),i=(i=Math.imul(Ce,pt))+Math.imul(oe,et)|0,y=Math.imul(oe,pt),d=d+Math.imul(ae,at)|0,i=(i=i+Math.imul(ae,it)|0)+Math.imul(de,at)|0,y=y+Math.imul(de,it)|0,d=d+Math.imul(me,ot)|0,i=(i=i+Math.imul(me,Ke)|0)+Math.imul(le,ot)|0,y=y+Math.imul(le,Ke)|0;var wn=(D+(d=d+Math.imul(q,Ge)|0)|0)+((8191&(i=(i=i+Math.imul(q,ut)|0)+Math.imul(Z,Ge)|0))<<13)|0;D=((y=y+Math.imul(Z,ut)|0)+(i>>>13)|0)+(wn>>>26)|0,wn&=67108863,d=Math.imul(ye,et),i=(i=Math.imul(ye,pt))+Math.imul(re,et)|0,y=Math.imul(re,pt),d=d+Math.imul(Ce,at)|0,i=(i=i+Math.imul(Ce,it)|0)+Math.imul(oe,at)|0,y=y+Math.imul(oe,it)|0,d=d+Math.imul(ae,ot)|0,i=(i=i+Math.imul(ae,Ke)|0)+Math.imul(de,ot)|0,y=y+Math.imul(de,Ke)|0,d=d+Math.imul(me,Ge)|0,i=(i=i+Math.imul(me,ut)|0)+Math.imul(le,Ge)|0,y=y+Math.imul(le,ut)|0;var hn=(D+(d=d+Math.imul(q,nt)|0)|0)+((8191&(i=(i=i+Math.imul(q,Ve)|0)+Math.imul(Z,nt)|0))<<13)|0;D=((y=y+Math.imul(Z,Ve)|0)+(i>>>13)|0)+(hn>>>26)|0,hn&=67108863,d=Math.imul(J,et),i=(i=Math.imul(J,pt))+Math.imul(ue,et)|0,y=Math.imul(ue,pt),d=d+Math.imul(ye,at)|0,i=(i=i+Math.imul(ye,it)|0)+Math.imul(re,at)|0,y=y+Math.imul(re,it)|0,d=d+Math.imul(Ce,ot)|0,i=(i=i+Math.imul(Ce,Ke)|0)+Math.imul(oe,ot)|0,y=y+Math.imul(oe,Ke)|0,d=d+Math.imul(ae,Ge)|0,i=(i=i+Math.imul(ae,ut)|0)+Math.imul(de,Ge)|0,y=y+Math.imul(de,ut)|0,d=d+Math.imul(me,nt)|0,i=(i=i+Math.imul(me,Ve)|0)+Math.imul(le,nt)|0,y=y+Math.imul(le,Ve)|0;var gn=(D+(d=d+Math.imul(q,ft)|0)|0)+((8191&(i=(i=i+Math.imul(q,st)|0)+Math.imul(Z,ft)|0))<<13)|0;D=((y=y+Math.imul(Z,st)|0)+(i>>>13)|0)+(gn>>>26)|0,gn&=67108863,d=Math.imul(Te,et),i=(i=Math.imul(Te,pt))+Math.imul(Ee,et)|0,y=Math.imul(Ee,pt),d=d+Math.imul(J,at)|0,i=(i=i+Math.imul(J,it)|0)+Math.imul(ue,at)|0,y=y+Math.imul(ue,it)|0,d=d+Math.imul(ye,ot)|0,i=(i=i+Math.imul(ye,Ke)|0)+Math.imul(re,ot)|0,y=y+Math.imul(re,Ke)|0,d=d+Math.imul(Ce,Ge)|0,i=(i=i+Math.imul(Ce,ut)|0)+Math.imul(oe,Ge)|0,y=y+Math.imul(oe,ut)|0,d=d+Math.imul(ae,nt)|0,i=(i=i+Math.imul(ae,Ve)|0)+Math.imul(de,nt)|0,y=y+Math.imul(de,Ve)|0,d=d+Math.imul(me,ft)|0,i=(i=i+Math.imul(me,st)|0)+Math.imul(le,ft)|0,y=y+Math.imul(le,st)|0;var Rn=(D+(d=d+Math.imul(q,ct)|0)|0)+((8191&(i=(i=i+Math.imul(q,ze)|0)+Math.imul(Z,ct)|0))<<13)|0;D=((y=y+Math.imul(Z,ze)|0)+(i>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,d=Math.imul(Ne,et),i=(i=Math.imul(Ne,pt))+Math.imul(_e,et)|0,y=Math.imul(_e,pt),d=d+Math.imul(Te,at)|0,i=(i=i+Math.imul(Te,it)|0)+Math.imul(Ee,at)|0,y=y+Math.imul(Ee,it)|0,d=d+Math.imul(J,ot)|0,i=(i=i+Math.imul(J,Ke)|0)+Math.imul(ue,ot)|0,y=y+Math.imul(ue,Ke)|0,d=d+Math.imul(ye,Ge)|0,i=(i=i+Math.imul(ye,ut)|0)+Math.imul(re,Ge)|0,y=y+Math.imul(re,ut)|0,d=d+Math.imul(Ce,nt)|0,i=(i=i+Math.imul(Ce,Ve)|0)+Math.imul(oe,nt)|0,y=y+Math.imul(oe,Ve)|0,d=d+Math.imul(ae,ft)|0,i=(i=i+Math.imul(ae,st)|0)+Math.imul(de,ft)|0,y=y+Math.imul(de,st)|0,d=d+Math.imul(me,ct)|0,i=(i=i+Math.imul(me,ze)|0)+Math.imul(le,ct)|0,y=y+Math.imul(le,ze)|0;var on=(D+(d=d+Math.imul(q,dt)|0)|0)+((8191&(i=(i=i+Math.imul(q,Xe)|0)+Math.imul(Z,dt)|0))<<13)|0;D=((y=y+Math.imul(Z,Xe)|0)+(i>>>13)|0)+(on>>>26)|0,on&=67108863,d=Math.imul(De,et),i=(i=Math.imul(De,pt))+Math.imul(Le,et)|0,y=Math.imul(Le,pt),d=d+Math.imul(Ne,at)|0,i=(i=i+Math.imul(Ne,it)|0)+Math.imul(_e,at)|0,y=y+Math.imul(_e,it)|0,d=d+Math.imul(Te,ot)|0,i=(i=i+Math.imul(Te,Ke)|0)+Math.imul(Ee,ot)|0,y=y+Math.imul(Ee,Ke)|0,d=d+Math.imul(J,Ge)|0,i=(i=i+Math.imul(J,ut)|0)+Math.imul(ue,Ge)|0,y=y+Math.imul(ue,ut)|0,d=d+Math.imul(ye,nt)|0,i=(i=i+Math.imul(ye,Ve)|0)+Math.imul(re,nt)|0,y=y+Math.imul(re,Ve)|0,d=d+Math.imul(Ce,ft)|0,i=(i=i+Math.imul(Ce,st)|0)+Math.imul(oe,ft)|0,y=y+Math.imul(oe,st)|0,d=d+Math.imul(ae,ct)|0,i=(i=i+Math.imul(ae,ze)|0)+Math.imul(de,ct)|0,y=y+Math.imul(de,ze)|0,d=d+Math.imul(me,dt)|0,i=(i=i+Math.imul(me,Xe)|0)+Math.imul(le,dt)|0,y=y+Math.imul(le,Xe)|0;var _n=(D+(d=d+Math.imul(q,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(q,Qe)|0)+Math.imul(Z,Ye)|0))<<13)|0;D=((y=y+Math.imul(Z,Qe)|0)+(i>>>13)|0)+(_n>>>26)|0,_n&=67108863,d=Math.imul(He,et),i=(i=Math.imul(He,pt))+Math.imul($e,et)|0,y=Math.imul($e,pt),d=d+Math.imul(De,at)|0,i=(i=i+Math.imul(De,it)|0)+Math.imul(Le,at)|0,y=y+Math.imul(Le,it)|0,d=d+Math.imul(Ne,ot)|0,i=(i=i+Math.imul(Ne,Ke)|0)+Math.imul(_e,ot)|0,y=y+Math.imul(_e,Ke)|0,d=d+Math.imul(Te,Ge)|0,i=(i=i+Math.imul(Te,ut)|0)+Math.imul(Ee,Ge)|0,y=y+Math.imul(Ee,ut)|0,d=d+Math.imul(J,nt)|0,i=(i=i+Math.imul(J,Ve)|0)+Math.imul(ue,nt)|0,y=y+Math.imul(ue,Ve)|0,d=d+Math.imul(ye,ft)|0,i=(i=i+Math.imul(ye,st)|0)+Math.imul(re,ft)|0,y=y+Math.imul(re,st)|0,d=d+Math.imul(Ce,ct)|0,i=(i=i+Math.imul(Ce,ze)|0)+Math.imul(oe,ct)|0,y=y+Math.imul(oe,ze)|0,d=d+Math.imul(ae,dt)|0,i=(i=i+Math.imul(ae,Xe)|0)+Math.imul(de,dt)|0,y=y+Math.imul(de,Xe)|0,d=d+Math.imul(me,Ye)|0,i=(i=i+Math.imul(me,Qe)|0)+Math.imul(le,Ye)|0,y=y+Math.imul(le,Qe)|0;var Jt=(D+(d=d+Math.imul(q,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(q,lt)|0)+Math.imul(Z,Ze)|0))<<13)|0;D=((y=y+Math.imul(Z,lt)|0)+(i>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,d=Math.imul(He,at),i=(i=Math.imul(He,it))+Math.imul($e,at)|0,y=Math.imul($e,it),d=d+Math.imul(De,ot)|0,i=(i=i+Math.imul(De,Ke)|0)+Math.imul(Le,ot)|0,y=y+Math.imul(Le,Ke)|0,d=d+Math.imul(Ne,Ge)|0,i=(i=i+Math.imul(Ne,ut)|0)+Math.imul(_e,Ge)|0,y=y+Math.imul(_e,ut)|0,d=d+Math.imul(Te,nt)|0,i=(i=i+Math.imul(Te,Ve)|0)+Math.imul(Ee,nt)|0,y=y+Math.imul(Ee,Ve)|0,d=d+Math.imul(J,ft)|0,i=(i=i+Math.imul(J,st)|0)+Math.imul(ue,ft)|0,y=y+Math.imul(ue,st)|0,d=d+Math.imul(ye,ct)|0,i=(i=i+Math.imul(ye,ze)|0)+Math.imul(re,ct)|0,y=y+Math.imul(re,ze)|0,d=d+Math.imul(Ce,dt)|0,i=(i=i+Math.imul(Ce,Xe)|0)+Math.imul(oe,dt)|0,y=y+Math.imul(oe,Xe)|0,d=d+Math.imul(ae,Ye)|0,i=(i=i+Math.imul(ae,Qe)|0)+Math.imul(de,Ye)|0,y=y+Math.imul(de,Qe)|0;var Ft=(D+(d=d+Math.imul(me,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(me,lt)|0)+Math.imul(le,Ze)|0))<<13)|0;D=((y=y+Math.imul(le,lt)|0)+(i>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,d=Math.imul(He,ot),i=(i=Math.imul(He,Ke))+Math.imul($e,ot)|0,y=Math.imul($e,Ke),d=d+Math.imul(De,Ge)|0,i=(i=i+Math.imul(De,ut)|0)+Math.imul(Le,Ge)|0,y=y+Math.imul(Le,ut)|0,d=d+Math.imul(Ne,nt)|0,i=(i=i+Math.imul(Ne,Ve)|0)+Math.imul(_e,nt)|0,y=y+Math.imul(_e,Ve)|0,d=d+Math.imul(Te,ft)|0,i=(i=i+Math.imul(Te,st)|0)+Math.imul(Ee,ft)|0,y=y+Math.imul(Ee,st)|0,d=d+Math.imul(J,ct)|0,i=(i=i+Math.imul(J,ze)|0)+Math.imul(ue,ct)|0,y=y+Math.imul(ue,ze)|0,d=d+Math.imul(ye,dt)|0,i=(i=i+Math.imul(ye,Xe)|0)+Math.imul(re,dt)|0,y=y+Math.imul(re,Xe)|0,d=d+Math.imul(Ce,Ye)|0,i=(i=i+Math.imul(Ce,Qe)|0)+Math.imul(oe,Ye)|0,y=y+Math.imul(oe,Qe)|0;var An=(D+(d=d+Math.imul(ae,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(ae,lt)|0)+Math.imul(de,Ze)|0))<<13)|0;D=((y=y+Math.imul(de,lt)|0)+(i>>>13)|0)+(An>>>26)|0,An&=67108863,d=Math.imul(He,Ge),i=(i=Math.imul(He,ut))+Math.imul($e,Ge)|0,y=Math.imul($e,ut),d=d+Math.imul(De,nt)|0,i=(i=i+Math.imul(De,Ve)|0)+Math.imul(Le,nt)|0,y=y+Math.imul(Le,Ve)|0,d=d+Math.imul(Ne,ft)|0,i=(i=i+Math.imul(Ne,st)|0)+Math.imul(_e,ft)|0,y=y+Math.imul(_e,st)|0,d=d+Math.imul(Te,ct)|0,i=(i=i+Math.imul(Te,ze)|0)+Math.imul(Ee,ct)|0,y=y+Math.imul(Ee,ze)|0,d=d+Math.imul(J,dt)|0,i=(i=i+Math.imul(J,Xe)|0)+Math.imul(ue,dt)|0,y=y+Math.imul(ue,Xe)|0,d=d+Math.imul(ye,Ye)|0,i=(i=i+Math.imul(ye,Qe)|0)+Math.imul(re,Ye)|0,y=y+Math.imul(re,Qe)|0;var Cn=(D+(d=d+Math.imul(Ce,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(Ce,lt)|0)+Math.imul(oe,Ze)|0))<<13)|0;D=((y=y+Math.imul(oe,lt)|0)+(i>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,d=Math.imul(He,nt),i=(i=Math.imul(He,Ve))+Math.imul($e,nt)|0,y=Math.imul($e,Ve),d=d+Math.imul(De,ft)|0,i=(i=i+Math.imul(De,st)|0)+Math.imul(Le,ft)|0,y=y+Math.imul(Le,st)|0,d=d+Math.imul(Ne,ct)|0,i=(i=i+Math.imul(Ne,ze)|0)+Math.imul(_e,ct)|0,y=y+Math.imul(_e,ze)|0,d=d+Math.imul(Te,dt)|0,i=(i=i+Math.imul(Te,Xe)|0)+Math.imul(Ee,dt)|0,y=y+Math.imul(Ee,Xe)|0,d=d+Math.imul(J,Ye)|0,i=(i=i+Math.imul(J,Qe)|0)+Math.imul(ue,Ye)|0,y=y+Math.imul(ue,Qe)|0;var Sn=(D+(d=d+Math.imul(ye,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(ye,lt)|0)+Math.imul(re,Ze)|0))<<13)|0;D=((y=y+Math.imul(re,lt)|0)+(i>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,d=Math.imul(He,ft),i=(i=Math.imul(He,st))+Math.imul($e,ft)|0,y=Math.imul($e,st),d=d+Math.imul(De,ct)|0,i=(i=i+Math.imul(De,ze)|0)+Math.imul(Le,ct)|0,y=y+Math.imul(Le,ze)|0,d=d+Math.imul(Ne,dt)|0,i=(i=i+Math.imul(Ne,Xe)|0)+Math.imul(_e,dt)|0,y=y+Math.imul(_e,Xe)|0,d=d+Math.imul(Te,Ye)|0,i=(i=i+Math.imul(Te,Qe)|0)+Math.imul(Ee,Ye)|0,y=y+Math.imul(Ee,Qe)|0;var Rt=(D+(d=d+Math.imul(J,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(J,lt)|0)+Math.imul(ue,Ze)|0))<<13)|0;D=((y=y+Math.imul(ue,lt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,d=Math.imul(He,ct),i=(i=Math.imul(He,ze))+Math.imul($e,ct)|0,y=Math.imul($e,ze),d=d+Math.imul(De,dt)|0,i=(i=i+Math.imul(De,Xe)|0)+Math.imul(Le,dt)|0,y=y+Math.imul(Le,Xe)|0,d=d+Math.imul(Ne,Ye)|0,i=(i=i+Math.imul(Ne,Qe)|0)+Math.imul(_e,Ye)|0,y=y+Math.imul(_e,Qe)|0;var Dn=(D+(d=d+Math.imul(Te,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(Te,lt)|0)+Math.imul(Ee,Ze)|0))<<13)|0;D=((y=y+Math.imul(Ee,lt)|0)+(i>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,d=Math.imul(He,dt),i=(i=Math.imul(He,Xe))+Math.imul($e,dt)|0,y=Math.imul($e,Xe),d=d+Math.imul(De,Ye)|0,i=(i=i+Math.imul(De,Qe)|0)+Math.imul(Le,Ye)|0,y=y+Math.imul(Le,Qe)|0;var Qt=(D+(d=d+Math.imul(Ne,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(Ne,lt)|0)+Math.imul(_e,Ze)|0))<<13)|0;D=((y=y+Math.imul(_e,lt)|0)+(i>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,d=Math.imul(He,Ye),i=(i=Math.imul(He,Qe))+Math.imul($e,Ye)|0,y=Math.imul($e,Qe);var nn=(D+(d=d+Math.imul(De,Ze)|0)|0)+((8191&(i=(i=i+Math.imul(De,lt)|0)+Math.imul(Le,Ze)|0))<<13)|0;D=((y=y+Math.imul(Le,lt)|0)+(i>>>13)|0)+(nn>>>26)|0,nn&=67108863;var En=(D+(d=Math.imul(He,Ze))|0)+((8191&(i=(i=Math.imul(He,lt))+Math.imul($e,Ze)|0))<<13)|0;return D=((y=Math.imul($e,lt))+(i>>>13)|0)+(En>>>26)|0,En&=67108863,_[0]=ln,_[1]=jt,_[2]=qt,_[3]=wn,_[4]=hn,_[5]=gn,_[6]=Rn,_[7]=on,_[8]=_n,_[9]=Jt,_[10]=Ft,_[11]=An,_[12]=Cn,_[13]=Sn,_[14]=Rt,_[15]=Dn,_[16]=Qt,_[17]=nn,_[18]=En,0!==D&&(_[19]=D,l.length++),l};function k(x,r,s){return(new O).mulp(x,r,s)}function O(x,r){this.x=x,this.y=r}Math.imul||(I=w),u.prototype.mulTo=function(r,s){var a=this.length+r.length;return 10===this.length&&10===r.length?I(this,r,s):a<63?w(this,r,s):a<1024?function(x,r,s){s.negative=r.negative^x.negative,s.length=x.length+r.length;for(var l=0,a=0,f=0;f<s.length-1;f++){var _=a;a=0;for(var D=67108863&l,d=Math.min(f,r.length-1),i=Math.max(0,f-x.length+1);i<=d;i++){var Z=(0|x.words[f-i])*(0|r.words[i]),ge=67108863&Z;D=67108863&(ge=ge+D|0),a+=(_=(_=_+(Z/67108864|0)|0)+(ge>>>26)|0)>>>26,_&=67108863}s.words[f]=D,l=_,_=a}return 0!==l?s.words[f]=l:s.length--,s.strip()}(this,r,s):k(this,r,s)},O.prototype.makeRBT=function(r){for(var s=new Array(r),l=u.prototype._countBits(r)-1,a=0;a<r;a++)s[a]=this.revBin(a,l,r);return s},O.prototype.revBin=function(r,s,l){if(0===r||r===l-1)return r;for(var a=0,f=0;f<s;f++)a|=(1&r)<<s-f-1,r>>=1;return a},O.prototype.permute=function(r,s,l,a,f,_){for(var D=0;D<_;D++)a[D]=s[r[D]],f[D]=l[r[D]]},O.prototype.transform=function(r,s,l,a,f,_){this.permute(_,r,s,l,a,f);for(var D=1;D<f;D<<=1)for(var d=D<<1,i=Math.cos(2*Math.PI/d),y=Math.sin(2*Math.PI/d),z=0;z<f;z+=d)for(var q=i,Z=y,ge=0;ge<D;ge++){var me=l[z+ge],le=a[z+ge],fe=l[z+ge+D],ae=a[z+ge+D],de=q*fe-Z*ae;ae=q*ae+Z*fe,l[z+ge]=me+(fe=de),a[z+ge]=le+ae,l[z+ge+D]=me-fe,a[z+ge+D]=le-ae,ge!==d&&(de=i*q-y*Z,Z=i*Z+y*q,q=de)}},O.prototype.guessLen13b=function(r,s){var l=1|Math.max(s,r),a=1&l,f=0;for(l=l/2|0;l;l>>>=1)f++;return 1<<f+1+a},O.prototype.conjugate=function(r,s,l){if(!(l<=1))for(var a=0;a<l/2;a++){var f=r[a];r[a]=r[l-a-1],r[l-a-1]=f,f=s[a],s[a]=-s[l-a-1],s[l-a-1]=-f}},O.prototype.normalize13b=function(r,s){for(var l=0,a=0;a<s/2;a++){var f=8192*Math.round(r[2*a+1]/s)+Math.round(r[2*a]/s)+l;r[a]=67108863&f,l=f<67108864?0:f/67108864|0}return r},O.prototype.convert13b=function(r,s,l,a){for(var f=0,_=0;_<s;_++)l[2*_]=8191&(f+=0|r[_]),l[2*_+1]=8191&(f>>>=13),f>>>=13;for(_=2*s;_<a;++_)l[_]=0;m(0===f),m(0==(-8192&f))},O.prototype.stub=function(r){for(var s=new Array(r),l=0;l<r;l++)s[l]=0;return s},O.prototype.mulp=function(r,s,l){var a=2*this.guessLen13b(r.length,s.length),f=this.makeRBT(a),_=this.stub(a),D=new Array(a),d=new Array(a),i=new Array(a),y=new Array(a),z=new Array(a),q=new Array(a),Z=l.words;Z.length=a,this.convert13b(r.words,r.length,D,a),this.convert13b(s.words,s.length,y,a),this.transform(D,_,d,i,a,f),this.transform(y,_,z,q,a,f);for(var ge=0;ge<a;ge++){var me=d[ge]*z[ge]-i[ge]*q[ge];i[ge]=d[ge]*q[ge]+i[ge]*z[ge],d[ge]=me}return this.conjugate(d,i,a),this.transform(d,i,Z,_,a,f),this.conjugate(Z,_,a),this.normalize13b(Z,a),l.negative=r.negative^s.negative,l.length=r.length+s.length,l.strip()},u.prototype.mul=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),this.mulTo(r,s)},u.prototype.mulf=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),k(this,r,s)},u.prototype.imul=function(r){return this.clone().mulTo(r,this)},u.prototype.imuln=function(r){m("number"==typeof r),m(r<67108864);for(var s=0,l=0;l<this.length;l++){var a=(0|this.words[l])*r,f=(67108863&a)+(67108863&s);s>>=26,s+=a/67108864|0,s+=f>>>26,this.words[l]=67108863&f}return 0!==s&&(this.words[l]=s,this.length++),this},u.prototype.muln=function(r){return this.clone().imuln(r)},u.prototype.sqr=function(){return this.mul(this)},u.prototype.isqr=function(){return this.imul(this.clone())},u.prototype.pow=function(r){var s=function(x){for(var r=new Array(x.bitLength()),s=0;s<r.length;s++){var a=s%26;r[s]=(x.words[s/26|0]&1<<a)>>>a}return r}(r);if(0===s.length)return new u(1);for(var l=this,a=0;a<s.length&&0===s[a];a++,l=l.sqr());if(++a<s.length)for(var f=l.sqr();a<s.length;a++,f=f.sqr())0!==s[a]&&(l=l.mul(f));return l},u.prototype.iushln=function(r){m("number"==typeof r&&r>=0);var f,s=r%26,l=(r-s)/26,a=67108863>>>26-s<<26-s;if(0!==s){var _=0;for(f=0;f<this.length;f++){var D=this.words[f]&a;this.words[f]=(0|this.words[f])-D<<s|_,_=D>>>26-s}_&&(this.words[f]=_,this.length++)}if(0!==l){for(f=this.length-1;f>=0;f--)this.words[f+l]=this.words[f];for(f=0;f<l;f++)this.words[f]=0;this.length+=l}return this.strip()},u.prototype.ishln=function(r){return m(0===this.negative),this.iushln(r)},u.prototype.iushrn=function(r,s,l){var a;m("number"==typeof r&&r>=0),a=s?(s-s%26)/26:0;var f=r%26,_=Math.min((r-f)/26,this.length),D=67108863^67108863>>>f<<f,d=l;if(a-=_,a=Math.max(0,a),d){for(var i=0;i<_;i++)d.words[i]=this.words[i];d.length=_}if(0!==_)if(this.length>_)for(this.length-=_,i=0;i<this.length;i++)this.words[i]=this.words[i+_];else this.words[0]=0,this.length=1;var y=0;for(i=this.length-1;i>=0&&(0!==y||i>=a);i--){var z=0|this.words[i];this.words[i]=y<<26-f|z>>>f,y=z&D}return d&&0!==y&&(d.words[d.length++]=y),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},u.prototype.ishrn=function(r,s,l){return m(0===this.negative),this.iushrn(r,s,l)},u.prototype.shln=function(r){return this.clone().ishln(r)},u.prototype.ushln=function(r){return this.clone().iushln(r)},u.prototype.shrn=function(r){return this.clone().ishrn(r)},u.prototype.ushrn=function(r){return this.clone().iushrn(r)},u.prototype.testn=function(r){m("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return!(this.length<=l||!(this.words[l]&1<<s))},u.prototype.imaskn=function(r){m("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return m(0===this.negative,"imaskn works only with positive numbers"),this.length<=l?this:(0!==s&&l++,this.length=Math.min(l,this.length),0!==s&&(this.words[this.length-1]&=67108863^67108863>>>s<<s),this.strip())},u.prototype.maskn=function(r){return this.clone().imaskn(r)},u.prototype.iaddn=function(r){return m("number"==typeof r),m(r<67108864),r<0?this.isubn(-r):0!==this.negative?1===this.length&&(0|this.words[0])<r?(this.words[0]=r-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(r),this.negative=1,this):this._iaddn(r)},u.prototype._iaddn=function(r){this.words[0]+=r;for(var s=0;s<this.length&&this.words[s]>=67108864;s++)this.words[s]-=67108864,s===this.length-1?this.words[s+1]=1:this.words[s+1]++;return this.length=Math.max(this.length,s+1),this},u.prototype.isubn=function(r){if(m("number"==typeof r),m(r<67108864),r<0)return this.iaddn(-r);if(0!==this.negative)return this.negative=0,this.iaddn(r),this.negative=1,this;if(this.words[0]-=r,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var s=0;s<this.length&&this.words[s]<0;s++)this.words[s]+=67108864,this.words[s+1]-=1;return this.strip()},u.prototype.addn=function(r){return this.clone().iaddn(r)},u.prototype.subn=function(r){return this.clone().isubn(r)},u.prototype.iabs=function(){return this.negative=0,this},u.prototype.abs=function(){return this.clone().iabs()},u.prototype._ishlnsubmul=function(r,s,l){var f;this._expand(r.length+l);var _,D=0;for(f=0;f<r.length;f++){_=(0|this.words[f+l])+D;var d=(0|r.words[f])*s;D=((_-=67108863&d)>>26)-(d/67108864|0),this.words[f+l]=67108863&_}for(;f<this.length-l;f++)D=(_=(0|this.words[f+l])+D)>>26,this.words[f+l]=67108863&_;if(0===D)return this.strip();for(m(-1===D),D=0,f=0;f<this.length;f++)D=(_=-(0|this.words[f])+D)>>26,this.words[f]=67108863&_;return this.negative=1,this.strip()},u.prototype._wordDiv=function(r,s){var l,a=this.clone(),f=r,_=0|f.words[f.length-1];0!=(l=26-this._countBits(_))&&(f=f.ushln(l),a.iushln(l),_=0|f.words[f.length-1]);var i,d=a.length-f.length;if("mod"!==s){(i=new u(null)).length=d+1,i.words=new Array(i.length);for(var y=0;y<i.length;y++)i.words[y]=0}var z=a.clone()._ishlnsubmul(f,1,d);0===z.negative&&(a=z,i&&(i.words[d]=1));for(var q=d-1;q>=0;q--){var Z=67108864*(0|a.words[f.length+q])+(0|a.words[f.length+q-1]);for(Z=Math.min(Z/_|0,67108863),a._ishlnsubmul(f,Z,q);0!==a.negative;)Z--,a.negative=0,a._ishlnsubmul(f,1,q),a.isZero()||(a.negative^=1);i&&(i.words[q]=Z)}return i&&i.strip(),a.strip(),"div"!==s&&0!==l&&a.iushrn(l),{div:i||null,mod:a}},u.prototype.divmod=function(r,s,l){return m(!r.isZero()),this.isZero()?{div:new u(0),mod:new u(0)}:0!==this.negative&&0===r.negative?(_=this.neg().divmod(r,s),"mod"!==s&&(a=_.div.neg()),"div"!==s&&(f=_.mod.neg(),l&&0!==f.negative&&f.iadd(r)),{div:a,mod:f}):0===this.negative&&0!==r.negative?(_=this.divmod(r.neg(),s),"mod"!==s&&(a=_.div.neg()),{div:a,mod:_.mod}):0!=(this.negative&r.negative)?(_=this.neg().divmod(r.neg(),s),"div"!==s&&(f=_.mod.neg(),l&&0!==f.negative&&f.isub(r)),{div:_.div,mod:f}):r.length>this.length||this.cmp(r)<0?{div:new u(0),mod:this}:1===r.length?"div"===s?{div:this.divn(r.words[0]),mod:null}:"mod"===s?{div:null,mod:new u(this.modn(r.words[0]))}:{div:this.divn(r.words[0]),mod:new u(this.modn(r.words[0]))}:this._wordDiv(r,s);var a,f,_},u.prototype.div=function(r){return this.divmod(r,"div",!1).div},u.prototype.mod=function(r){return this.divmod(r,"mod",!1).mod},u.prototype.umod=function(r){return this.divmod(r,"mod",!0).mod},u.prototype.divRound=function(r){var s=this.divmod(r);if(s.mod.isZero())return s.div;var l=0!==s.div.negative?s.mod.isub(r):s.mod,a=r.ushrn(1),f=r.andln(1),_=l.cmp(a);return _<0||1===f&&0===_?s.div:0!==s.div.negative?s.div.isubn(1):s.div.iaddn(1)},u.prototype.modn=function(r){m(r<=67108863);for(var s=(1<<26)%r,l=0,a=this.length-1;a>=0;a--)l=(s*l+(0|this.words[a]))%r;return l},u.prototype.idivn=function(r){m(r<=67108863);for(var s=0,l=this.length-1;l>=0;l--){var a=(0|this.words[l])+67108864*s;this.words[l]=a/r|0,s=a%r}return this.strip()},u.prototype.divn=function(r){return this.clone().idivn(r)},u.prototype.egcd=function(r){m(0===r.negative),m(!r.isZero());var s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),_=new u(0),D=new u(1),d=0;s.isEven()&&l.isEven();)s.iushrn(1),l.iushrn(1),++d;for(var i=l.clone(),y=s.clone();!s.isZero();){for(var z=0,q=1;0==(s.words[0]&q)&&z<26;++z,q<<=1);if(z>0)for(s.iushrn(z);z-- >0;)(a.isOdd()||f.isOdd())&&(a.iadd(i),f.isub(y)),a.iushrn(1),f.iushrn(1);for(var Z=0,ge=1;0==(l.words[0]&ge)&&Z<26;++Z,ge<<=1);if(Z>0)for(l.iushrn(Z);Z-- >0;)(_.isOdd()||D.isOdd())&&(_.iadd(i),D.isub(y)),_.iushrn(1),D.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(_),f.isub(D)):(l.isub(s),_.isub(a),D.isub(f))}return{a:_,b:D,gcd:l.iushln(d)}},u.prototype._invmp=function(r){m(0===r.negative),m(!r.isZero());var z,s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),_=l.clone();s.cmpn(1)>0&&l.cmpn(1)>0;){for(var D=0,d=1;0==(s.words[0]&d)&&D<26;++D,d<<=1);if(D>0)for(s.iushrn(D);D-- >0;)a.isOdd()&&a.iadd(_),a.iushrn(1);for(var i=0,y=1;0==(l.words[0]&y)&&i<26;++i,y<<=1);if(i>0)for(l.iushrn(i);i-- >0;)f.isOdd()&&f.iadd(_),f.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(f)):(l.isub(s),f.isub(a))}return(z=0===s.cmpn(1)?a:f).cmpn(0)<0&&z.iadd(r),z},u.prototype.gcd=function(r){if(this.isZero())return r.abs();if(r.isZero())return this.abs();var s=this.clone(),l=r.clone();s.negative=0,l.negative=0;for(var a=0;s.isEven()&&l.isEven();a++)s.iushrn(1),l.iushrn(1);for(;;){for(;s.isEven();)s.iushrn(1);for(;l.isEven();)l.iushrn(1);var f=s.cmp(l);if(f<0){var _=s;s=l,l=_}else if(0===f||0===l.cmpn(1))break;s.isub(l)}return l.iushln(a)},u.prototype.invm=function(r){return this.egcd(r).a.umod(r)},u.prototype.isEven=function(){return 0==(1&this.words[0])},u.prototype.isOdd=function(){return 1==(1&this.words[0])},u.prototype.andln=function(r){return this.words[0]&r},u.prototype.bincn=function(r){m("number"==typeof r);var s=r%26,l=(r-s)/26,a=1<<s;if(this.length<=l)return this._expand(l+1),this.words[l]|=a,this;for(var f=a,_=l;0!==f&&_<this.length;_++){var D=0|this.words[_];f=(D+=f)>>>26,this.words[_]=D&=67108863}return 0!==f&&(this.words[_]=f,this.length++),this},u.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},u.prototype.cmpn=function(r){var l,s=r<0;if(0!==this.negative&&!s)return-1;if(0===this.negative&&s)return 1;if(this.strip(),this.length>1)l=1;else{s&&(r=-r),m(r<=67108863,"Number is too big");var a=0|this.words[0];l=a===r?0:a<r?-1:1}return 0!==this.negative?0|-l:l},u.prototype.cmp=function(r){if(0!==this.negative&&0===r.negative)return-1;if(0===this.negative&&0!==r.negative)return 1;var s=this.ucmp(r);return 0!==this.negative?0|-s:s},u.prototype.ucmp=function(r){if(this.length>r.length)return 1;if(this.length<r.length)return-1;for(var s=0,l=this.length-1;l>=0;l--){var a=0|this.words[l],f=0|r.words[l];if(a!==f){a<f?s=-1:a>f&&(s=1);break}}return s},u.prototype.gtn=function(r){return 1===this.cmpn(r)},u.prototype.gt=function(r){return 1===this.cmp(r)},u.prototype.gten=function(r){return this.cmpn(r)>=0},u.prototype.gte=function(r){return this.cmp(r)>=0},u.prototype.ltn=function(r){return-1===this.cmpn(r)},u.prototype.lt=function(r){return-1===this.cmp(r)},u.prototype.lten=function(r){return this.cmpn(r)<=0},u.prototype.lte=function(r){return this.cmp(r)<=0},u.prototype.eqn=function(r){return 0===this.cmpn(r)},u.prototype.eq=function(r){return 0===this.cmp(r)},u.red=function(r){return new $(r)},u.prototype.toRed=function(r){return m(!this.red,"Already a number in reduction context"),m(0===this.negative,"red works only with positives"),r.convertTo(this)._forceRed(r)},u.prototype.fromRed=function(){return m(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},u.prototype._forceRed=function(r){return this.red=r,this},u.prototype.forceRed=function(r){return m(!this.red,"Already a number in reduction context"),this._forceRed(r)},u.prototype.redAdd=function(r){return m(this.red,"redAdd works only with red numbers"),this.red.add(this,r)},u.prototype.redIAdd=function(r){return m(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,r)},u.prototype.redSub=function(r){return m(this.red,"redSub works only with red numbers"),this.red.sub(this,r)},u.prototype.redISub=function(r){return m(this.red,"redISub works only with red numbers"),this.red.isub(this,r)},u.prototype.redShl=function(r){return m(this.red,"redShl works only with red numbers"),this.red.shl(this,r)},u.prototype.redMul=function(r){return m(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.mul(this,r)},u.prototype.redIMul=function(r){return m(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.imul(this,r)},u.prototype.redSqr=function(){return m(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},u.prototype.redISqr=function(){return m(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},u.prototype.redSqrt=function(){return m(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},u.prototype.redInvm=function(){return m(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},u.prototype.redNeg=function(){return m(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},u.prototype.redPow=function(r){return m(this.red&&!r.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,r)};var V={k256:null,p224:null,p192:null,p25519:null};function U(x,r){this.name=x,this.p=new u(r,16),this.n=this.p.bitLength(),this.k=new u(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function B(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function H(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function W(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function te(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function $(x){if("string"==typeof x){var r=u._prime(x);this.m=r.p,this.prime=r}else m(x.gtn(1),"modulus must be greater than 1"),this.m=x,this.prime=null}function pe(x){$.call(this,x),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new u(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}U.prototype._tmp=function(){var r=new u(null);return r.words=new Array(Math.ceil(this.n/13)),r},U.prototype.ireduce=function(r){var l,s=r;do{this.split(s,this.tmp),l=(s=(s=this.imulK(s)).iadd(this.tmp)).bitLength()}while(l>this.n);var a=l<this.n?-1:s.ucmp(this.p);return 0===a?(s.words[0]=0,s.length=1):a>0?s.isub(this.p):void 0!==s.strip?s.strip():s._strip(),s},U.prototype.split=function(r,s){r.iushrn(this.n,0,s)},U.prototype.imulK=function(r){return r.imul(this.k)},R(B,U),B.prototype.split=function(r,s){for(var l=4194303,a=Math.min(r.length,9),f=0;f<a;f++)s.words[f]=r.words[f];if(s.length=a,r.length<=9)return r.words[0]=0,void(r.length=1);var _=r.words[9];for(s.words[s.length++]=_&l,f=10;f<r.length;f++){var D=0|r.words[f];r.words[f-10]=(D&l)<<4|_>>>22,_=D}r.words[f-10]=_>>>=22,r.length-=0===_&&r.length>10?10:9},B.prototype.imulK=function(r){r.words[r.length]=0,r.words[r.length+1]=0,r.length+=2;for(var s=0,l=0;l<r.length;l++){var a=0|r.words[l];r.words[l]=67108863&(s+=977*a),s=64*a+(s/67108864|0)}return 0===r.words[r.length-1]&&(r.length--,0===r.words[r.length-1]&&r.length--),r},R(H,U),R(W,U),R(te,U),te.prototype.imulK=function(r){for(var s=0,l=0;l<r.length;l++){var a=19*(0|r.words[l])+s,f=67108863&a;a>>>=26,r.words[l]=f,s=a}return 0!==s&&(r.words[r.length++]=s),r},u._prime=function(r){if(V[r])return V[r];var s;if("k256"===r)s=new B;else if("p224"===r)s=new H;else if("p192"===r)s=new W;else{if("p25519"!==r)throw new Error("Unknown prime "+r);s=new te}return V[r]=s,s},$.prototype._verify1=function(r){m(0===r.negative,"red works only with positives"),m(r.red,"red works only with red numbers")},$.prototype._verify2=function(r,s){m(0==(r.negative|s.negative),"red works only with positives"),m(r.red&&r.red===s.red,"red works only with red numbers")},$.prototype.imod=function(r){return this.prime?this.prime.ireduce(r)._forceRed(this):r.umod(this.m)._forceRed(this)},$.prototype.neg=function(r){return r.isZero()?r.clone():this.m.sub(r)._forceRed(this)},$.prototype.add=function(r,s){this._verify2(r,s);var l=r.add(s);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},$.prototype.iadd=function(r,s){this._verify2(r,s);var l=r.iadd(s);return l.cmp(this.m)>=0&&l.isub(this.m),l},$.prototype.sub=function(r,s){this._verify2(r,s);var l=r.sub(s);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},$.prototype.isub=function(r,s){this._verify2(r,s);var l=r.isub(s);return l.cmpn(0)<0&&l.iadd(this.m),l},$.prototype.shl=function(r,s){return this._verify1(r),this.imod(r.ushln(s))},$.prototype.imul=function(r,s){return this._verify2(r,s),this.imod(r.imul(s))},$.prototype.mul=function(r,s){return this._verify2(r,s),this.imod(r.mul(s))},$.prototype.isqr=function(r){return this.imul(r,r.clone())},$.prototype.sqr=function(r){return this.mul(r,r)},$.prototype.sqrt=function(r){if(r.isZero())return r.clone();var s=this.m.andln(3);if(m(s%2==1),3===s){var l=this.m.add(new u(1)).iushrn(2);return this.pow(r,l)}for(var a=this.m.subn(1),f=0;!a.isZero()&&0===a.andln(1);)f++,a.iushrn(1);m(!a.isZero());var _=new u(1).toRed(this),D=_.redNeg(),d=this.m.subn(1).iushrn(1),i=this.m.bitLength();for(i=new u(2*i*i).toRed(this);0!==this.pow(i,d).cmp(D);)i.redIAdd(D);for(var y=this.pow(i,a),z=this.pow(r,a.addn(1).iushrn(1)),q=this.pow(r,a),Z=f;0!==q.cmp(_);){for(var ge=q,me=0;0!==ge.cmp(_);me++)ge=ge.redSqr();m(me<Z);var le=this.pow(y,new u(1).iushln(Z-me-1));z=z.redMul(le),y=le.redSqr(),q=q.redMul(y),Z=me}return z},$.prototype.invm=function(r){var s=r._invmp(this.m);return 0!==s.negative?(s.negative=0,this.imod(s).redNeg()):this.imod(s)},$.prototype.pow=function(r,s){if(s.isZero())return new u(1).toRed(this);if(0===s.cmpn(1))return r.clone();var a=new Array(16);a[0]=new u(1).toRed(this),a[1]=r;for(var f=2;f<a.length;f++)a[f]=this.mul(a[f-1],r);var _=a[0],D=0,d=0,i=s.bitLength()%26;for(0===i&&(i=26),f=s.length-1;f>=0;f--){for(var y=s.words[f],z=i-1;z>=0;z--){var q=y>>z&1;_!==a[0]&&(_=this.sqr(_)),0!==q||0!==D?(D<<=1,D|=q,(4==++d||0===f&&0===z)&&(_=this.mul(_,a[D]),d=0,D=0)):d=0}i=26}return _},$.prototype.convertTo=function(r){var s=r.umod(this.m);return s===r?s.clone():s},$.prototype.convertFrom=function(r){var s=r.clone();return s.red=null,s},u.mont=function(r){return new pe(r)},R(pe,$),pe.prototype.convertTo=function(r){return this.imod(r.ushln(this.shift))},pe.prototype.convertFrom=function(r){var s=this.imod(r.mul(this.rinv));return s.red=null,s},pe.prototype.imul=function(r,s){if(r.isZero()||s.isZero())return r.words[0]=0,r.length=1,r;var l=r.imul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),_=f;return f.cmp(this.m)>=0?_=f.isub(this.m):f.cmpn(0)<0&&(_=f.iadd(this.m)),_._forceRed(this)},pe.prototype.mul=function(r,s){if(r.isZero()||s.isZero())return new u(0)._forceRed(this);var l=r.mul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),_=f;return f.cmp(this.m)>=0?_=f.isub(this.m):f.cmpn(0)<0&&(_=f.iadd(this.m)),_._forceRed(this)},pe.prototype.invm=function(r){return this.imod(r._invmp(this.m).mul(this.r2))._forceRed(this)}}(Y=E.nmd(Y),this)},1548:(Y,L,E)=>{var p=E(1997),N=E(444),m=E(4541),R=E(6494),u=E(5842),v=E(2506),M=E(6829),A=E(5859).Buffer;Y.exports=function(b,w,I){var P;P=b.padding?b.padding:I?1:4;var V,k=p(b),O=k.modulus.byteLength();if(w.length>O||new R(w).cmp(k.modulus)>=0)throw new Error("decryption error");V=I?M(new R(w),k):u(w,k);var U=A.alloc(O-V.length);if(V=A.concat([U,V],O),4===P)return function(C,b){var w=C.modulus.byteLength(),I=v("sha1").update(A.alloc(0)).digest(),P=I.length;if(0!==b[0])throw new Error("decryption error");var k=b.slice(1,P+1),O=b.slice(P+1),V=m(k,N(O,P)),U=m(O,N(V,w-P-1));if(function(C,b){C=A.from(C),b=A.from(b);var w=0,I=C.length;C.length!==b.length&&(w++,I=Math.min(C.length,b.length));for(var P=-1;++P<I;)w+=C[P]^b[P];return w}(I,U.slice(0,P)))throw new Error("decryption error");for(var B=P;0===U[B];)B++;if(1!==U[B++])throw new Error("decryption error");return U.slice(B)}(k,V);if(1===P)return function(C,b,w){for(var I=b.slice(0,2),P=2,k=0;0!==b[P++];)if(P>=b.length){k++;break}var O=b.slice(2,P-1);if(("0002"!==I.toString("hex")&&!w||"0001"!==I.toString("hex")&&w)&&k++,O.length<8&&k++,k)throw new Error("decryption error");return b.slice(P)}(0,V,I);if(3===P)return V;throw new Error("unknown padding")}},4760:(Y,L,E)=>{var p=E(1997),N=E(6589),m=E(2506),R=E(444),u=E(4541),v=E(6494),M=E(6829),A=E(5842),T=E(5859).Buffer;Y.exports=function(w,I,P){var k;k=w.padding?w.padding:P?1:4;var V,O=p(w);if(4===k)V=function(b,w){var I=b.modulus.byteLength(),P=w.length,k=m("sha1").update(T.alloc(0)).digest(),O=k.length,V=2*O;if(P>I-V-2)throw new Error("message too long");var U=T.alloc(I-P-V-2),B=I-O-1,H=N(O),W=u(T.concat([k,U,T.alloc(1,1),w],B),R(H,B)),te=u(H,R(W,O));return new v(T.concat([T.alloc(1),te,W],I))}(O,I);else if(1===k)V=function(b,w,I){var O,P=w.length,k=b.modulus.byteLength();if(P>k-11)throw new Error("message too long");return O=I?T.alloc(k-P-3,255):function(b){for(var O,w=T.allocUnsafe(b),I=0,P=N(2*b),k=0;I<b;)k===P.length&&(P=N(2*b),k=0),(O=P[k++])&&(w[I++]=O);return w}(k-P-3),new v(T.concat([T.from([0,I?1:2]),O,T.alloc(1),w],k))}(O,I,P);else{if(3!==k)throw new Error("unknown padding");if((V=new v(I)).cmp(O.modulus)>=0)throw new Error("data too long for modulus")}return P?A(V,O):M(V,O)}},6829:(Y,L,E)=>{var p=E(6494),N=E(5859).Buffer;Y.exports=function(R,u){return N.from(R.toRed(p.mont(u.modulus)).redPow(new p(u.publicExponent)).fromRed().toArray())}},4541:Y=>{Y.exports=function(E,p){for(var N=E.length,m=-1;++m<N;)E[m]^=p[m];return E}},6589:(Y,L,E)=>{"use strict";var p=65536,R=E(5859).Buffer,u=global.crypto||global.msCrypto;Y.exports=u&&u.getRandomValues?function(M,A){if(M>4294967295)throw new RangeError("requested too many random bytes");var T=R.allocUnsafe(M);if(M>0)if(M>p)for(var g=0;g<M;g+=p)u.getRandomValues(T.slice(g,g+p));else u.getRandomValues(T);return"function"==typeof A?process.nextTick(function(){A(null,T)}):T}:function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},3594:(Y,L,E)=>{"use strict";function p(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var N=E(5859),m=E(6589),R=N.Buffer,u=N.kMaxLength,v=global.crypto||global.msCrypto,M=Math.pow(2,32)-1;function A(b,w){if("number"!=typeof b||b!=b)throw new TypeError("offset must be a number");if(b>M||b<0)throw new TypeError("offset must be a uint32");if(b>u||b>w)throw new RangeError("offset out of range")}function T(b,w,I){if("number"!=typeof b||b!=b)throw new TypeError("size must be a number");if(b>M||b<0)throw new TypeError("size must be a uint32");if(b+w>I||b>u)throw new RangeError("buffer too small")}function h(b,w,I,P){if(process.browser){var O=new Uint8Array(b.buffer,w,I);return v.getRandomValues(O),P?void process.nextTick(function(){P(null,b)}):b}if(!P)return m(I).copy(b,w),b;m(I,function(U,B){if(U)return P(U);B.copy(b,w),P(null,b)})}v&&v.getRandomValues||!process.browser?(L.randomFill=function(b,w,I,P){if(!(R.isBuffer(b)||b instanceof global.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof w)P=w,w=0,I=b.length;else if("function"==typeof I)P=I,I=b.length-w;else if("function"!=typeof P)throw new TypeError('"cb" argument must be a function');return A(w,b.length),T(I,w,b.length),h(b,w,I,P)},L.randomFillSync=function(b,w,I){if(void 0===w&&(w=0),!(R.isBuffer(b)||b instanceof global.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return A(w,b.length),void 0===I&&(I=b.length-w),T(I,w,b.length),h(b,w,I)}):(L.randomFill=p,L.randomFillSync=p)},5429:(Y,L,E)=>{"use strict";var N=E(8228),m=60103;if("function"==typeof Symbol&&Symbol.for){var g=Symbol.for;m=g("react.element"),g("react.portal"),g("react.fragment"),g("react.strict_mode"),g("react.profiler"),g("react.provider"),g("react.context"),g("react.forward_ref"),g("react.suspense"),g("react.memo"),g("react.lazy")}"function"==typeof Symbol&&Symbol;function b(d){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+d,y=1;y<arguments.length;y++)i+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+d+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I={};function P(d,i,y){this.props=d,this.context=i,this.refs=I,this.updater=y||w}function k(){}function O(d,i,y){this.props=d,this.context=i,this.refs=I,this.updater=y||w}P.prototype.isReactComponent={},P.prototype.setState=function(d,i){if("object"!=typeof d&&"function"!=typeof d&&null!=d)throw Error(b(85));this.updater.enqueueSetState(this,d,i,"setState")},P.prototype.forceUpdate=function(d){this.updater.enqueueForceUpdate(this,d,"forceUpdate")},k.prototype=P.prototype;var V=O.prototype=new k;V.constructor=O,N(V,P.prototype),V.isPureReactComponent=!0;var U_current=null,B=Object.prototype.hasOwnProperty,H={key:!0,ref:!0,__self:!0,__source:!0};L.createElement=function(d,i,y){var z,q={},Z=null,ge=null;if(null!=i)for(z in void 0!==i.ref&&(ge=i.ref),void 0!==i.key&&(Z=""+i.key),i)B.call(i,z)&&!H.hasOwnProperty(z)&&(q[z]=i[z]);var me=arguments.length-2;if(1===me)q.children=y;else if(1<me){for(var le=Array(me),fe=0;fe<me;fe++)le[fe]=arguments[fe+2];q.children=le}if(d&&d.defaultProps)for(z in me=d.defaultProps)void 0===q[z]&&(q[z]=me[z]);return{$$typeof:m,type:d,key:Z,ref:ge,props:q,_owner:U_current}}},8139:(Y,L,E)=>{"use strict";Y.exports=E(5429)},8230:Y=>{"use strict";var E={};function p(v,M,A){A||(A=Error);var g=function(h){function C(b,w,I){return h.call(this,function(h,C,b){return"string"==typeof M?M:M(h,C,b)}(b,w,I))||this}return function(v,M){v.prototype=Object.create(M.prototype),v.prototype.constructor=v,v.__proto__=M}(C,h),C}(A);g.prototype.name=A.name,g.prototype.code=v,E[v]=g}function N(v,M){if(Array.isArray(v)){var A=v.length;return v=v.map(function(T){return String(T)}),A>2?"one of ".concat(M," ").concat(v.slice(0,A-1).join(", "),", or ")+v[A-1]:2===A?"one of ".concat(M," ").concat(v[0]," or ").concat(v[1]):"of ".concat(M," ").concat(v[0])}return"of ".concat(M," ").concat(String(v))}p("ERR_INVALID_OPT_VALUE",function(v,M){return'The value "'+M+'" is invalid for option "'+v+'"'},TypeError),p("ERR_INVALID_ARG_TYPE",function(v,M,A){var T,g;if("string"==typeof M&&function(v,M,A){return v.substr(0,M.length)===M}(M,"not ")?(T="must not be",M=M.replace(/^not /,"")):T="must be",function(v,M,A){return(void 0===A||A>v.length)&&(A=v.length),v.substring(A-M.length,A)===M}(v," argument"))g="The ".concat(v," ").concat(T," ").concat(N(M,"type"));else{var h=function(v,M,A){return"number"!=typeof A&&(A=0),!(A+".".length>v.length)&&-1!==v.indexOf(".",A)}(v)?"property":"argument";g='The "'.concat(v,'" ').concat(h," ").concat(T," ").concat(N(M,"type"))}return g+". Received type ".concat(typeof A)},TypeError),p("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),p("ERR_METHOD_NOT_IMPLEMENTED",function(v){return"The "+v+" method is not implemented"}),p("ERR_STREAM_PREMATURE_CLOSE","Premature close"),p("ERR_STREAM_DESTROYED",function(v){return"Cannot call "+v+" after a stream was destroyed"}),p("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),p("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),p("ERR_STREAM_WRITE_AFTER_END","write after end"),p("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),p("ERR_UNKNOWN_ENCODING",function(v){return"Unknown encoding: "+v},TypeError),p("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Y.exports.q=E},942:(Y,L,E)=>{"use strict";var p=Object.keys||function(g){var h=[];for(var C in g)h.push(C);return h};Y.exports=M;var N=E(2833),m=E(7807);E(9879)(M,N);for(var R=p(m.prototype),u=0;u<R.length;u++){var v=R[u];M.prototype[v]||(M.prototype[v]=m.prototype[v])}function M(g){if(!(this instanceof M))return new M(g);N.call(this,g),m.call(this,g),this.allowHalfOpen=!0,g&&(!1===g.readable&&(this.readable=!1),!1===g.writable&&(this.writable=!1),!1===g.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",A)))}function A(){this._writableState.ended||process.nextTick(T,this)}function T(g){g.end()}Object.defineProperty(M.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(M.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(M.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(h){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=h,this._writableState.destroyed=h)}})},619:(Y,L,E)=>{"use strict";Y.exports=N;var p=E(5431);function N(m){if(!(this instanceof N))return new N(m);p.call(this,m)}E(9879)(N,p),N.prototype._transform=function(m,R,u){u(null,m)}},2833:(Y,L,E)=>{"use strict";var p;Y.exports=x,x.ReadableState=pe,E(3105);var g,m=function(we,ye){return we.listeners(ye).length},R=E(5112),u=E(3875).Buffer,v=global.Uint8Array||function(){},T=E(4616);g=T&&T.debuglog?T.debuglog("stream"):function(){};var U,B,H,h=E(9370),C=E(806),w=E(2903).getHighWaterMark,I=E(8230).q,P=I.ERR_INVALID_ARG_TYPE,k=I.ERR_STREAM_PUSH_AFTER_EOF,O=I.ERR_METHOD_NOT_IMPLEMENTED,V=I.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;E(9879)(x,R);var W=C.errorOrDestroy,te=["error","close","destroy","pause","resume"];function pe(oe,we,ye){p=p||E(942),"boolean"!=typeof ye&&(ye=we instanceof p),this.objectMode=!!(oe=oe||{}).objectMode,ye&&(this.objectMode=this.objectMode||!!oe.readableObjectMode),this.highWaterMark=w(this,oe,"readableHighWaterMark",ye),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==oe.emitClose,this.autoDestroy=!!oe.autoDestroy,this.destroyed=!1,this.defaultEncoding=oe.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,oe.encoding&&(U||(U=E(2519).s),this.decoder=new U(oe.encoding),this.encoding=oe.encoding)}function x(oe){if(p=p||E(942),!(this instanceof x))return new x(oe);this._readableState=new pe(oe,this,this instanceof p),this.readable=!0,oe&&("function"==typeof oe.read&&(this._read=oe.read),"function"==typeof oe.destroy&&(this._destroy=oe.destroy)),R.call(this)}function r(oe,we,ye,re,ee){g("readableAddChunk",we);var ue,J=oe._readableState;if(null===we)J.reading=!1,function(oe,we){if(g("onEofChunk"),!we.ended){if(we.decoder){var ye=we.decoder.end();ye&&ye.length&&(we.buffer.push(ye),we.length+=we.objectMode?1:ye.length)}we.ended=!0,we.sync?d(oe):(we.needReadable=!1,we.emittedReadable||(we.emittedReadable=!0,i(oe)))}}(oe,J);else if(ee||(ue=function(oe,we){var ye;return!function(oe){return u.isBuffer(oe)||oe instanceof v}(we)&&"string"!=typeof we&&void 0!==we&&!oe.objectMode&&(ye=new P("chunk",["string","Buffer","Uint8Array"],we)),ye}(J,we)),ue)W(oe,ue);else if(J.objectMode||we&&we.length>0)if("string"!=typeof we&&!J.objectMode&&Object.getPrototypeOf(we)!==u.prototype&&(we=function(oe){return u.from(oe)}(we)),re)J.endEmitted?W(oe,new V):s(oe,J,we,!0);else if(J.ended)W(oe,new k);else{if(J.destroyed)return!1;J.reading=!1,J.decoder&&!ye?(we=J.decoder.write(we),J.objectMode||0!==we.length?s(oe,J,we,!1):y(oe,J)):s(oe,J,we,!1)}else re||(J.reading=!1,y(oe,J));return!J.ended&&(J.length<J.highWaterMark||0===J.length)}function s(oe,we,ye,re){we.flowing&&0===we.length&&!we.sync?(we.awaitDrain=0,oe.emit("data",ye)):(we.length+=we.objectMode?1:ye.length,re?we.buffer.unshift(ye):we.buffer.push(ye),we.needReadable&&d(oe)),y(oe,we)}Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(we){!this._readableState||(this._readableState.destroyed=we)}}),x.prototype.destroy=C.destroy,x.prototype._undestroy=C.undestroy,x.prototype._destroy=function(oe,we){we(oe)},x.prototype.push=function(oe,we){var re,ye=this._readableState;return ye.objectMode?re=!0:"string"==typeof oe&&((we=we||ye.defaultEncoding)!==ye.encoding&&(oe=u.from(oe,we),we=""),re=!0),r(this,oe,we,!1,re)},x.prototype.unshift=function(oe){return r(this,oe,null,!0,!1)},x.prototype.isPaused=function(){return!1===this._readableState.flowing},x.prototype.setEncoding=function(oe){U||(U=E(2519).s);var we=new U(oe);this._readableState.decoder=we,this._readableState.encoding=this._readableState.decoder.encoding;for(var ye=this._readableState.buffer.head,re="";null!==ye;)re+=we.write(ye.data),ye=ye.next;return this._readableState.buffer.clear(),""!==re&&this._readableState.buffer.push(re),this._readableState.length=re.length,this};var a=1073741824;function _(oe,we){return oe<=0||0===we.length&&we.ended?0:we.objectMode?1:oe!=oe?we.flowing&&we.length?we.buffer.head.data.length:we.length:(oe>we.highWaterMark&&(we.highWaterMark=function(oe){return oe>=a?oe=a:(oe--,oe|=oe>>>1,oe|=oe>>>2,oe|=oe>>>4,oe|=oe>>>8,oe|=oe>>>16,oe++),oe}(oe)),oe<=we.length?oe:we.ended?we.length:(we.needReadable=!0,0))}function d(oe){var we=oe._readableState;g("emitReadable",we.needReadable,we.emittedReadable),we.needReadable=!1,we.emittedReadable||(g("emitReadable",we.flowing),we.emittedReadable=!0,process.nextTick(i,oe))}function i(oe){var we=oe._readableState;g("emitReadable_",we.destroyed,we.length,we.ended),!we.destroyed&&(we.length||we.ended)&&(oe.emit("readable"),we.emittedReadable=!1),we.needReadable=!we.flowing&&!we.ended&&we.length<=we.highWaterMark,fe(oe)}function y(oe,we){we.readingMore||(we.readingMore=!0,process.nextTick(z,oe,we))}function z(oe,we){for(;!we.reading&&!we.ended&&(we.length<we.highWaterMark||we.flowing&&0===we.length);){var ye=we.length;if(g("maybeReadMore read 0"),oe.read(0),ye===we.length)break}we.readingMore=!1}function Z(oe){var we=oe._readableState;we.readableListening=oe.listenerCount("readable")>0,we.resumeScheduled&&!we.paused?we.flowing=!0:oe.listenerCount("data")>0&&oe.resume()}function ge(oe){g("readable nexttick read 0"),oe.read(0)}function le(oe,we){g("resume",we.reading),we.reading||oe.read(0),we.resumeScheduled=!1,oe.emit("resume"),fe(oe),we.flowing&&!we.reading&&oe.read(0)}function fe(oe){var we=oe._readableState;for(g("flow",we.flowing);we.flowing&&null!==oe.read(););}function ae(oe,we){return 0===we.length?null:(we.objectMode?ye=we.buffer.shift():!oe||oe>=we.length?(ye=we.decoder?we.buffer.join(""):1===we.buffer.length?we.buffer.first():we.buffer.concat(we.length),we.buffer.clear()):ye=we.buffer.consume(oe,we.decoder),ye);var ye}function de(oe){var we=oe._readableState;g("endReadable",we.endEmitted),we.endEmitted||(we.ended=!0,process.nextTick(xe,we,oe))}function xe(oe,we){if(g("endReadableNT",oe.endEmitted,oe.length),!oe.endEmitted&&0===oe.length&&(oe.endEmitted=!0,we.readable=!1,we.emit("end"),oe.autoDestroy)){var ye=we._writableState;(!ye||ye.autoDestroy&&ye.finished)&&we.destroy()}}function Ce(oe,we){for(var ye=0,re=oe.length;ye<re;ye++)if(oe[ye]===we)return ye;return-1}x.prototype.read=function(oe){g("read",oe),oe=parseInt(oe,10);var we=this._readableState,ye=oe;if(0!==oe&&(we.emittedReadable=!1),0===oe&&we.needReadable&&((0!==we.highWaterMark?we.length>=we.highWaterMark:we.length>0)||we.ended))return g("read: emitReadable",we.length,we.ended),0===we.length&&we.ended?de(this):d(this),null;if(0===(oe=_(oe,we))&&we.ended)return 0===we.length&&de(this),null;var ee,re=we.needReadable;return g("need readable",re),(0===we.length||we.length-oe<we.highWaterMark)&&g("length less than watermark",re=!0),we.ended||we.reading?g("reading or ended",re=!1):re&&(g("do read"),we.reading=!0,we.sync=!0,0===we.length&&(we.needReadable=!0),this._read(we.highWaterMark),we.sync=!1,we.reading||(oe=_(ye,we))),null===(ee=oe>0?ae(oe,we):null)?(we.needReadable=we.length<=we.highWaterMark,oe=0):(we.length-=oe,we.awaitDrain=0),0===we.length&&(we.ended||(we.needReadable=!0),ye!==oe&&we.ended&&de(this)),null!==ee&&this.emit("data",ee),ee},x.prototype._read=function(oe){W(this,new O("_read()"))},x.prototype.pipe=function(oe,we){var ye=this,re=this._readableState;switch(re.pipesCount){case 0:re.pipes=oe;break;case 1:re.pipes=[re.pipes,oe];break;default:re.pipes.push(oe)}re.pipesCount+=1,g("pipe count=%d opts=%j",re.pipesCount,we);var J=we&&!1===we.end||oe===process.stdout||oe===process.stderr?Le:Ae;function Ae(){g("onend"),oe.end()}re.endEmitted?process.nextTick(J):ye.once("end",J),oe.on("unpipe",function ue(Mt,He){g("onunpipe"),Mt===ye&&He&&!1===He.hasUnpiped&&(He.hasUnpiped=!0,g("cleanup"),oe.removeListener("close",Be),oe.removeListener("finish",De),oe.removeListener("drain",Te),oe.removeListener("error",_e),oe.removeListener("unpipe",ue),ye.removeListener("end",Ae),ye.removeListener("end",Le),ye.removeListener("data",Ne),Ee=!0,re.awaitDrain&&(!oe._writableState||oe._writableState.needDrain)&&Te())});var Te=function(oe){return function(){var ye=oe._readableState;g("pipeOnDrain",ye.awaitDrain),ye.awaitDrain&&ye.awaitDrain--,0===ye.awaitDrain&&m(oe,"data")&&(ye.flowing=!0,fe(oe))}}(ye);oe.on("drain",Te);var Ee=!1;function Ne(Mt){g("ondata");var He=oe.write(Mt);g("dest.write",He),!1===He&&((1===re.pipesCount&&re.pipes===oe||re.pipesCount>1&&-1!==Ce(re.pipes,oe))&&!Ee&&(g("false write response, pause",re.awaitDrain),re.awaitDrain++),ye.pause())}function _e(Mt){g("onerror",Mt),Le(),oe.removeListener("error",_e),0===m(oe,"error")&&W(oe,Mt)}function Be(){oe.removeListener("finish",De),Le()}function De(){g("onfinish"),oe.removeListener("close",Be),Le()}function Le(){g("unpipe"),ye.unpipe(oe)}return ye.on("data",Ne),function(oe,we,ye){if("function"==typeof oe.prependListener)return oe.prependListener(we,ye);oe._events&&oe._events[we]?Array.isArray(oe._events[we])?oe._events[we].unshift(ye):oe._events[we]=[ye,oe._events[we]]:oe.on(we,ye)}(oe,"error",_e),oe.once("close",Be),oe.once("finish",De),oe.emit("pipe",ye),re.flowing||(g("pipe resume"),ye.resume()),oe},x.prototype.unpipe=function(oe){var we=this._readableState,ye={hasUnpiped:!1};if(0===we.pipesCount)return this;if(1===we.pipesCount)return oe&&oe!==we.pipes||(oe||(oe=we.pipes),we.pipes=null,we.pipesCount=0,we.flowing=!1,oe&&oe.emit("unpipe",this,ye)),this;if(!oe){var re=we.pipes,ee=we.pipesCount;we.pipes=null,we.pipesCount=0,we.flowing=!1;for(var J=0;J<ee;J++)re[J].emit("unpipe",this,{hasUnpiped:!1});return this}var ue=Ce(we.pipes,oe);return-1===ue||(we.pipes.splice(ue,1),we.pipesCount-=1,1===we.pipesCount&&(we.pipes=we.pipes[0]),oe.emit("unpipe",this,ye)),this},x.prototype.addListener=x.prototype.on=function(oe,we){var ye=R.prototype.on.call(this,oe,we),re=this._readableState;return"data"===oe?(re.readableListening=this.listenerCount("readable")>0,!1!==re.flowing&&this.resume()):"readable"===oe&&!re.endEmitted&&!re.readableListening&&(re.readableListening=re.needReadable=!0,re.flowing=!1,re.emittedReadable=!1,g("on readable",re.length,re.reading),re.length?d(this):re.reading||process.nextTick(ge,this)),ye},x.prototype.removeListener=function(oe,we){var ye=R.prototype.removeListener.call(this,oe,we);return"readable"===oe&&process.nextTick(Z,this),ye},x.prototype.removeAllListeners=function(oe){var we=R.prototype.removeAllListeners.apply(this,arguments);return("readable"===oe||void 0===oe)&&process.nextTick(Z,this),we},x.prototype.resume=function(){var oe=this._readableState;return oe.flowing||(g("resume"),oe.flowing=!oe.readableListening,function(oe,we){we.resumeScheduled||(we.resumeScheduled=!0,process.nextTick(le,oe,we))}(this,oe)),oe.paused=!1,this},x.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},x.prototype.wrap=function(oe){var we=this,ye=this._readableState,re=!1;for(var ee in oe.on("end",function(){if(g("wrapped end"),ye.decoder&&!ye.ended){var ue=ye.decoder.end();ue&&ue.length&&we.push(ue)}we.push(null)}),oe.on("data",function(ue){g("wrapped data"),ye.decoder&&(ue=ye.decoder.write(ue)),ye.objectMode&&null==ue||!(ye.objectMode||ue&&ue.length)||we.push(ue)||(re=!0,oe.pause())}),oe)void 0===this[ee]&&"function"==typeof oe[ee]&&(this[ee]=function(Ae){return function(){return oe[Ae].apply(oe,arguments)}}(ee));for(var J=0;J<te.length;J++)oe.on(te[J],this.emit.bind(this,te[J]));return this._read=function(ue){g("wrapped _read",ue),re&&(re=!1,oe.resume())},this},"function"==typeof Symbol&&(x.prototype[Symbol.asyncIterator]=function(){return void 0===B&&(B=E(9983)),B(this)}),Object.defineProperty(x.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(x.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(x.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(we){this._readableState&&(this._readableState.flowing=we)}}),x._fromList=ae,Object.defineProperty(x.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(x.from=function(oe,we){return void 0===H&&(H=E(3659)),H(x,oe,we)})},5431:(Y,L,E)=>{"use strict";Y.exports=A;var p=E(8230).q,N=p.ERR_METHOD_NOT_IMPLEMENTED,m=p.ERR_MULTIPLE_CALLBACK,R=p.ERR_TRANSFORM_ALREADY_TRANSFORMING,u=p.ERR_TRANSFORM_WITH_LENGTH_0,v=E(942);function M(h,C){var b=this._transformState;b.transforming=!1;var w=b.writecb;if(null===w)return this.emit("error",new m);b.writechunk=null,b.writecb=null,null!=C&&this.push(C),w(h);var I=this._readableState;I.reading=!1,(I.needReadable||I.length<I.highWaterMark)&&this._read(I.highWaterMark)}function A(h){if(!(this instanceof A))return new A(h);v.call(this,h),this._transformState={afterTransform:M.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,h&&("function"==typeof h.transform&&(this._transform=h.transform),"function"==typeof h.flush&&(this._flush=h.flush)),this.on("prefinish",T)}function T(){var h=this;"function"!=typeof this._flush||this._readableState.destroyed?g(this,null,null):this._flush(function(C,b){g(h,C,b)})}function g(h,C,b){if(C)return h.emit("error",C);if(null!=b&&h.push(b),h._writableState.length)throw new u;if(h._transformState.transforming)throw new R;return h.push(null)}E(9879)(A,v),A.prototype.push=function(h,C){return this._transformState.needTransform=!1,v.prototype.push.call(this,h,C)},A.prototype._transform=function(h,C,b){b(new N("_transform()"))},A.prototype._write=function(h,C,b){var w=this._transformState;if(w.writecb=b,w.writechunk=h,w.writeencoding=C,!w.transforming){var I=this._readableState;(w.needTransform||I.needReadable||I.length<I.highWaterMark)&&this._read(I.highWaterMark)}},A.prototype._read=function(h){var C=this._transformState;null===C.writechunk||C.transforming?C.needTransform=!0:(C.transforming=!0,this._transform(C.writechunk,C.writeencoding,C.afterTransform))},A.prototype._destroy=function(h,C){v.prototype._destroy.call(this,h,function(b){C(b)})}},7807:(Y,L,E)=>{"use strict";function N(fe){var ae=this;this.next=null,this.entry=null,this.finish=function(){!function(fe,ae,de){var xe=fe.entry;for(fe.entry=null;xe;){var Ce=xe.callback;ae.pendingcb--,Ce(undefined),xe=xe.next}ae.corkedRequestsFree.next=fe}(ae,fe)}}var m;Y.exports=pe,pe.WritableState=te;var $,R={deprecate:E(5822)},u=E(5112),v=E(3875).Buffer,M=global.Uint8Array||function(){},g=E(806),C=E(2903).getHighWaterMark,b=E(8230).q,w=b.ERR_INVALID_ARG_TYPE,I=b.ERR_METHOD_NOT_IMPLEMENTED,P=b.ERR_MULTIPLE_CALLBACK,k=b.ERR_STREAM_CANNOT_PIPE,O=b.ERR_STREAM_DESTROYED,V=b.ERR_STREAM_NULL_VALUES,U=b.ERR_STREAM_WRITE_AFTER_END,B=b.ERR_UNKNOWN_ENCODING,H=g.errorOrDestroy;function W(){}function te(fe,ae,de){m=m||E(942),"boolean"!=typeof de&&(de=ae instanceof m),this.objectMode=!!(fe=fe||{}).objectMode,de&&(this.objectMode=this.objectMode||!!fe.writableObjectMode),this.highWaterMark=C(this,fe,"writableHighWaterMark",de),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===fe.decodeStrings),this.defaultEncoding=fe.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ce){!function(fe,ae){var de=fe._writableState,xe=de.sync,Ce=de.writecb;if("function"!=typeof Ce)throw new P;if(function(fe){fe.writing=!1,fe.writecb=null,fe.length-=fe.writelen,fe.writelen=0}(de),ae)!function(fe,ae,de,xe,Ce){--ae.pendingcb,de?(process.nextTick(Ce,xe),process.nextTick(ge,fe,ae),fe._writableState.errorEmitted=!0,H(fe,xe)):(Ce(xe),fe._writableState.errorEmitted=!0,H(fe,xe),ge(fe,ae))}(fe,de,xe,ae,Ce);else{var oe=z(de)||fe.destroyed;!oe&&!de.corked&&!de.bufferProcessing&&de.bufferedRequest&&y(fe,de),xe?process.nextTick(d,fe,de,oe,Ce):d(fe,de,oe,Ce)}}(ae,Ce)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==fe.emitClose,this.autoDestroy=!!fe.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new N(this)}function pe(fe){var ae=this instanceof(m=m||E(942));if(!ae&&!$.call(pe,this))return new pe(fe);this._writableState=new te(fe,this,ae),this.writable=!0,fe&&("function"==typeof fe.write&&(this._write=fe.write),"function"==typeof fe.writev&&(this._writev=fe.writev),"function"==typeof fe.destroy&&(this._destroy=fe.destroy),"function"==typeof fe.final&&(this._final=fe.final)),u.call(this)}function a(fe,ae,de,xe,Ce,oe,we){ae.writelen=xe,ae.writecb=we,ae.writing=!0,ae.sync=!0,ae.destroyed?ae.onwrite(new O("write")):de?fe._writev(Ce,ae.onwrite):fe._write(Ce,oe,ae.onwrite),ae.sync=!1}function d(fe,ae,de,xe){de||function(fe,ae){0===ae.length&&ae.needDrain&&(ae.needDrain=!1,fe.emit("drain"))}(fe,ae),ae.pendingcb--,xe(),ge(fe,ae)}function y(fe,ae){ae.bufferProcessing=!0;var de=ae.bufferedRequest;if(fe._writev&&de&&de.next){var Ce=new Array(ae.bufferedRequestCount),oe=ae.corkedRequestsFree;oe.entry=de;for(var we=0,ye=!0;de;)Ce[we]=de,de.isBuf||(ye=!1),de=de.next,we+=1;Ce.allBuffers=ye,a(fe,ae,!0,ae.length,Ce,"",oe.finish),ae.pendingcb++,ae.lastBufferedRequest=null,oe.next?(ae.corkedRequestsFree=oe.next,oe.next=null):ae.corkedRequestsFree=new N(ae),ae.bufferedRequestCount=0}else{for(;de;){var re=de.chunk;if(a(fe,ae,!1,ae.objectMode?1:re.length,re,de.encoding,de.callback),de=de.next,ae.bufferedRequestCount--,ae.writing)break}null===de&&(ae.lastBufferedRequest=null)}ae.bufferedRequest=de,ae.bufferProcessing=!1}function z(fe){return fe.ending&&0===fe.length&&null===fe.bufferedRequest&&!fe.finished&&!fe.writing}function q(fe,ae){fe._final(function(de){ae.pendingcb--,de&&H(fe,de),ae.prefinished=!0,fe.emit("prefinish"),ge(fe,ae)})}function ge(fe,ae){var de=z(ae);if(de&&(function(fe,ae){!ae.prefinished&&!ae.finalCalled&&("function"!=typeof fe._final||ae.destroyed?(ae.prefinished=!0,fe.emit("prefinish")):(ae.pendingcb++,ae.finalCalled=!0,process.nextTick(q,fe,ae)))}(fe,ae),0===ae.pendingcb&&(ae.finished=!0,fe.emit("finish"),ae.autoDestroy))){var xe=fe._readableState;(!xe||xe.autoDestroy&&xe.endEmitted)&&fe.destroy()}return de}E(9879)(pe,u),te.prototype.getBuffer=function(){for(var ae=this.bufferedRequest,de=[];ae;)de.push(ae),ae=ae.next;return de},function(){try{Object.defineProperty(te.prototype,"buffer",{get:R.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(fe){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?($=Function.prototype[Symbol.hasInstance],Object.defineProperty(pe,Symbol.hasInstance,{value:function(ae){return!!$.call(this,ae)||this===pe&&ae&&ae._writableState instanceof te}})):$=function(ae){return ae instanceof this},pe.prototype.pipe=function(){H(this,new k)},pe.prototype.write=function(fe,ae,de){var xe=this._writableState,Ce=!1,oe=!xe.objectMode&&function(fe){return v.isBuffer(fe)||fe instanceof M}(fe);return oe&&!v.isBuffer(fe)&&(fe=function(fe){return v.from(fe)}(fe)),"function"==typeof ae&&(de=ae,ae=null),oe?ae="buffer":ae||(ae=xe.defaultEncoding),"function"!=typeof de&&(de=W),xe.ending?function(fe,ae){var de=new U;H(fe,de),process.nextTick(ae,de)}(this,de):(oe||function(fe,ae,de,xe){var Ce;return null===de?Ce=new V:"string"!=typeof de&&!ae.objectMode&&(Ce=new w("chunk",["string","Buffer"],de)),!Ce||(H(fe,Ce),process.nextTick(xe,Ce),!1)}(this,xe,fe,de))&&(xe.pendingcb++,Ce=function(fe,ae,de,xe,Ce,oe){if(!de){var we=function(fe,ae,de){return!fe.objectMode&&!1!==fe.decodeStrings&&"string"==typeof ae&&(ae=v.from(ae,de)),ae}(ae,xe,Ce);xe!==we&&(de=!0,Ce="buffer",xe=we)}var ye=ae.objectMode?1:xe.length;ae.length+=ye;var re=ae.length<ae.highWaterMark;if(re||(ae.needDrain=!0),ae.writing||ae.corked){var ee=ae.lastBufferedRequest;ae.lastBufferedRequest={chunk:xe,encoding:Ce,isBuf:de,callback:oe,next:null},ee?ee.next=ae.lastBufferedRequest:ae.bufferedRequest=ae.lastBufferedRequest,ae.bufferedRequestCount+=1}else a(fe,ae,!1,ye,xe,Ce,oe);return re}(this,xe,oe,fe,ae,de)),Ce},pe.prototype.cork=function(){this._writableState.corked++},pe.prototype.uncork=function(){var fe=this._writableState;fe.corked&&(fe.corked--,!fe.writing&&!fe.corked&&!fe.bufferProcessing&&fe.bufferedRequest&&y(this,fe))},pe.prototype.setDefaultEncoding=function(ae){if("string"==typeof ae&&(ae=ae.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ae+"").toLowerCase())>-1))throw new B(ae);return this._writableState.defaultEncoding=ae,this},Object.defineProperty(pe.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(pe.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),pe.prototype._write=function(fe,ae,de){de(new I("_write()"))},pe.prototype._writev=null,pe.prototype.end=function(fe,ae,de){var xe=this._writableState;return"function"==typeof fe?(de=fe,fe=null,ae=null):"function"==typeof ae&&(de=ae,ae=null),null!=fe&&this.write(fe,ae),xe.corked&&(xe.corked=1,this.uncork()),xe.ending||function(fe,ae,de){ae.ending=!0,ge(fe,ae),de&&(ae.finished?process.nextTick(de):fe.once("finish",de)),ae.ended=!0,fe.writable=!1}(this,xe,de),this},Object.defineProperty(pe.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(pe.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(ae){!this._writableState||(this._writableState.destroyed=ae)}}),pe.prototype.destroy=g.destroy,pe.prototype._undestroy=g.undestroy,pe.prototype._destroy=function(fe,ae){ae(fe)}},9983:(Y,L,E)=>{"use strict";var p;function N(O,V,U){return V in O?Object.defineProperty(O,V,{value:U,enumerable:!0,configurable:!0,writable:!0}):O[V]=U,O}var m=E(6820),R=Symbol("lastResolve"),u=Symbol("lastReject"),v=Symbol("error"),M=Symbol("ended"),A=Symbol("lastPromise"),T=Symbol("handlePromise"),g=Symbol("stream");function h(O,V){return{value:O,done:V}}function C(O){var V=O[R];if(null!==V){var U=O[g].read();null!==U&&(O[A]=null,O[R]=null,O[u]=null,V(h(U,!1)))}}function b(O){process.nextTick(C,O)}var I=Object.getPrototypeOf(function(){}),P=Object.setPrototypeOf((N(p={get stream(){return this[g]},next:function(){var V=this,U=this[v];if(null!==U)return Promise.reject(U);if(this[M])return Promise.resolve(h(void 0,!0));if(this[g].destroyed)return new Promise(function(te,$){process.nextTick(function(){V[v]?$(V[v]):te(h(void 0,!0))})});var H,B=this[A];if(B)H=new Promise(function(O,V){return function(U,B){O.then(function(){V[M]?U(h(void 0,!0)):V[T](U,B)},B)}}(B,this));else{var W=this[g].read();if(null!==W)return Promise.resolve(h(W,!1));H=new Promise(this[T])}return this[A]=H,H}},Symbol.asyncIterator,function(){return this}),N(p,"return",function(){var V=this;return new Promise(function(U,B){V[g].destroy(null,function(H){H?B(H):U(h(void 0,!0))})})}),p),I);Y.exports=function(V){var U,B=Object.create(P,(N(U={},g,{value:V,writable:!0}),N(U,R,{value:null,writable:!0}),N(U,u,{value:null,writable:!0}),N(U,v,{value:null,writable:!0}),N(U,M,{value:V._readableState.endEmitted,writable:!0}),N(U,T,{value:function(W,te){var $=B[g].read();$?(B[A]=null,B[R]=null,B[u]=null,W(h($,!1))):(B[R]=W,B[u]=te)},writable:!0}),U));return B[A]=null,m(V,function(H){if(H&&"ERR_STREAM_PREMATURE_CLOSE"!==H.code){var W=B[u];return null!==W&&(B[A]=null,B[R]=null,B[u]=null,W(H)),void(B[v]=H)}var te=B[R];null!==te&&(B[A]=null,B[R]=null,B[u]=null,te(h(void 0,!0))),B[M]=!0}),V.on("readable",b.bind(null,B)),B}},9370:(Y,L,E)=>{"use strict";function p(b,w){var I=Object.keys(b);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(b);w&&(P=P.filter(function(k){return Object.getOwnPropertyDescriptor(b,k).enumerable})),I.push.apply(I,P)}return I}function m(b,w,I){return w in b?Object.defineProperty(b,w,{value:I,enumerable:!0,configurable:!0,writable:!0}):b[w]=I,b}function u(b,w){for(var I=0;I<w.length;I++){var P=w[I];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(b,P.key,P)}}var A=E(3875).Buffer,g=E(2361).inspect,h=g&&g.custom||"inspect";function C(b,w,I){A.prototype.copy.call(b,w,I)}Y.exports=function(){function b(){(function(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")})(this,b),this.head=null,this.tail=null,this.length=0}return function(b,w,I){w&&u(b.prototype,w)}(b,[{key:"push",value:function(I){var P={data:I,next:null};this.length>0?this.tail.next=P:this.head=P,this.tail=P,++this.length}},{key:"unshift",value:function(I){var P={data:I,next:this.head};0===this.length&&(this.tail=P),this.head=P,++this.length}},{key:"shift",value:function(){if(0!==this.length){var I=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,I}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(I){if(0===this.length)return"";for(var P=this.head,k=""+P.data;P=P.next;)k+=I+P.data;return k}},{key:"concat",value:function(I){if(0===this.length)return A.alloc(0);for(var P=A.allocUnsafe(I>>>0),k=this.head,O=0;k;)C(k.data,P,O),O+=k.data.length,k=k.next;return P}},{key:"consume",value:function(I,P){var k;return I<this.head.data.length?(k=this.head.data.slice(0,I),this.head.data=this.head.data.slice(I)):k=I===this.head.data.length?this.shift():P?this._getString(I):this._getBuffer(I),k}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(I){var P=this.head,k=1,O=P.data;for(I-=O.length;P=P.next;){var V=P.data,U=I>V.length?V.length:I;if(O+=U===V.length?V:V.slice(0,I),0==(I-=U)){U===V.length?(++k,this.head=P.next?P.next:this.tail=null):(this.head=P,P.data=V.slice(U));break}++k}return this.length-=k,O}},{key:"_getBuffer",value:function(I){var P=A.allocUnsafe(I),k=this.head,O=1;for(k.data.copy(P),I-=k.data.length;k=k.next;){var V=k.data,U=I>V.length?V.length:I;if(V.copy(P,P.length-I,0,U),0==(I-=U)){U===V.length?(++O,this.head=k.next?k.next:this.tail=null):(this.head=k,k.data=V.slice(U));break}++O}return this.length-=O,P}},{key:h,value:function(I,P){return g(this,function(b){for(var w=1;w<arguments.length;w++){var I=null!=arguments[w]?arguments[w]:{};w%2?p(Object(I),!0).forEach(function(P){m(b,P,I[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(I)):p(Object(I)).forEach(function(P){Object.defineProperty(b,P,Object.getOwnPropertyDescriptor(I,P))})}return b}({},P,{depth:0,customInspect:!1}))}}]),b}()},806:Y=>{"use strict";function E(u,v){m(u,v),p(u)}function p(u){u._writableState&&!u._writableState.emitClose||u._readableState&&!u._readableState.emitClose||u.emit("close")}function m(u,v){u.emit("error",v)}Y.exports={destroy:function(u,v){var M=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(v?v(u):u&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(m,this,u)):process.nextTick(m,this,u)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(u||null,function(g){!v&&g?M._writableState?M._writableState.errorEmitted?process.nextTick(p,M):(M._writableState.errorEmitted=!0,process.nextTick(E,M,g)):process.nextTick(E,M,g):v?(process.nextTick(p,M),v(g)):process.nextTick(p,M)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(u,v){var M=u._readableState,A=u._writableState;M&&M.autoDestroy||A&&A.autoDestroy?u.destroy(v):u.emit("error",v)}}},6820:(Y,L,E)=>{"use strict";var p=E(8230).q.ERR_STREAM_PREMATURE_CLOSE;function m(){}Y.exports=function u(v,M,A){if("function"==typeof M)return u(v,null,M);M||(M={}),A=function(v){var M=!1;return function(){if(!M){M=!0;for(var A=arguments.length,T=new Array(A),g=0;g<A;g++)T[g]=arguments[g];v.apply(this,T)}}}(A||m);var T=M.readable||!1!==M.readable&&v.readable,g=M.writable||!1!==M.writable&&v.writable,h=function(){v.writable||b()},C=v._writableState&&v._writableState.finished,b=function(){g=!1,C=!0,T||A.call(v)},w=v._readableState&&v._readableState.endEmitted,I=function(){T=!1,w=!0,g||A.call(v)},P=function(U){A.call(v,U)},k=function(){var U;return T&&!w?((!v._readableState||!v._readableState.ended)&&(U=new p),A.call(v,U)):g&&!C?((!v._writableState||!v._writableState.ended)&&(U=new p),A.call(v,U)):void 0},O=function(){v.req.on("finish",b)};return function(v){return v.setHeader&&"function"==typeof v.abort}(v)?(v.on("complete",b),v.on("abort",k),v.req?O():v.on("request",O)):g&&!v._writableState&&(v.on("end",h),v.on("close",h)),v.on("end",I),v.on("finish",b),!1!==M.error&&v.on("error",P),v.on("close",k),function(){v.removeListener("complete",b),v.removeListener("abort",k),v.removeListener("request",O),v.req&&v.req.removeListener("finish",b),v.removeListener("end",h),v.removeListener("close",h),v.removeListener("finish",b),v.removeListener("end",I),v.removeListener("error",P),v.removeListener("close",k)}}},3659:Y=>{Y.exports=function(){throw new Error("Readable.from is not available in the browser")}},6076:(Y,L,E)=>{"use strict";var p,m=E(8230).q,R=m.ERR_MISSING_ARGS,u=m.ERR_STREAM_DESTROYED;function v(b){if(b)throw b}function A(b,w,I,P){P=function(b){var w=!1;return function(){w||(w=!0,b.apply(void 0,arguments))}}(P);var k=!1;b.on("close",function(){k=!0}),void 0===p&&(p=E(6820)),p(b,{readable:w,writable:I},function(V){if(V)return P(V);k=!0,P()});var O=!1;return function(V){if(!k&&!O){if(O=!0,function(b){return b.setHeader&&"function"==typeof b.abort}(b))return b.abort();if("function"==typeof b.destroy)return b.destroy();P(V||new u("pipe"))}}}function T(b){b()}function g(b,w){return b.pipe(w)}function h(b){return b.length&&"function"==typeof b[b.length-1]?b.pop():v}Y.exports=function(){for(var b=arguments.length,w=new Array(b),I=0;I<b;I++)w[I]=arguments[I];var P=h(w);if(Array.isArray(w[0])&&(w=w[0]),w.length<2)throw new R("streams");var k,O=w.map(function(V,U){var B=U<w.length-1;return A(V,B,U>0,function(W){k||(k=W),W&&O.forEach(T),!B&&(O.forEach(T),P(k))})});return w.reduce(g)}},2903:(Y,L,E)=>{"use strict";var p=E(8230).q.ERR_INVALID_OPT_VALUE;Y.exports={getHighWaterMark:function(R,u,v,M){var A=function(R,u,v){return null!=R.highWaterMark?R.highWaterMark:u?R[v]:null}(u,M,v);if(null!=A){if(!isFinite(A)||Math.floor(A)!==A||A<0)throw new p(M?v:"highWaterMark",A);return Math.floor(A)}return R.objectMode?16:16384}}},5112:(Y,L,E)=>{Y.exports=E(3105).EventEmitter},8300:(Y,L,E)=>{(L=Y.exports=E(2833)).Stream=L,L.Readable=L,L.Writable=E(7807),L.Duplex=E(942),L.Transform=E(5431),L.PassThrough=E(619),L.finished=E(6820),L.pipeline=E(6076)},5207:(Y,L,E)=>{"use strict";var p=E(3875).Buffer,N=E(9879),m=E(5414),R=new Array(16),u=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],v=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],M=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],A=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],T=[0,1518500249,1859775393,2400959708,2840853838],g=[1352829926,1548603684,1836072691,2053994217,0];function h(){m.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function C(O,V){return O<<V|O>>>32-V}function b(O,V,U,B,H,W,te,$){return C(O+(V^U^B)+W+te|0,$)+H|0}function w(O,V,U,B,H,W,te,$){return C(O+(V&U|~V&B)+W+te|0,$)+H|0}function I(O,V,U,B,H,W,te,$){return C(O+((V|~U)^B)+W+te|0,$)+H|0}function P(O,V,U,B,H,W,te,$){return C(O+(V&B|U&~B)+W+te|0,$)+H|0}function k(O,V,U,B,H,W,te,$){return C(O+(V^(U|~B))+W+te|0,$)+H|0}N(h,m),h.prototype._update=function(){for(var O=R,V=0;V<16;++V)O[V]=this._block.readInt32LE(4*V);for(var U=0|this._a,B=0|this._b,H=0|this._c,W=0|this._d,te=0|this._e,$=0|this._a,pe=0|this._b,x=0|this._c,r=0|this._d,s=0|this._e,l=0;l<80;l+=1){var a,f;l<16?(a=b(U,B,H,W,te,O[u[l]],T[0],M[l]),f=k($,pe,x,r,s,O[v[l]],g[0],A[l])):l<32?(a=w(U,B,H,W,te,O[u[l]],T[1],M[l]),f=P($,pe,x,r,s,O[v[l]],g[1],A[l])):l<48?(a=I(U,B,H,W,te,O[u[l]],T[2],M[l]),f=I($,pe,x,r,s,O[v[l]],g[2],A[l])):l<64?(a=P(U,B,H,W,te,O[u[l]],T[3],M[l]),f=w($,pe,x,r,s,O[v[l]],g[3],A[l])):(a=k(U,B,H,W,te,O[u[l]],T[4],M[l]),f=b($,pe,x,r,s,O[v[l]],g[4],A[l])),U=te,te=W,W=C(H,10),H=B,B=a,$=s,s=r,r=C(x,10),x=pe,pe=f}var _=this._b+H+r|0;this._b=this._c+W+s|0,this._c=this._d+te+$|0,this._d=this._e+U+pe|0,this._e=this._a+B+x|0,this._a=_},h.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var O=p.alloc?p.alloc(20):new p(20);return O.writeInt32LE(this._a,0),O.writeInt32LE(this._b,4),O.writeInt32LE(this._c,8),O.writeInt32LE(this._d,12),O.writeInt32LE(this._e,16),O},Y.exports=h},5859:(Y,L,E)=>{var p=E(3875),N=p.Buffer;function m(u,v){for(var M in u)v[M]=u[M]}function R(u,v,M){return N(u,v,M)}N.from&&N.alloc&&N.allocUnsafe&&N.allocUnsafeSlow?Y.exports=p:(m(p,L),L.Buffer=R),m(N,R),R.from=function(u,v,M){if("number"==typeof u)throw new TypeError("Argument must not be a number");return N(u,v,M)},R.alloc=function(u,v,M){if("number"!=typeof u)throw new TypeError("Argument must be a number");var A=N(u);return void 0!==v?"string"==typeof M?A.fill(v,M):A.fill(v):A.fill(0),A},R.allocUnsafe=function(u){if("number"!=typeof u)throw new TypeError("Argument must be a number");return N(u)},R.allocUnsafeSlow=function(u){if("number"!=typeof u)throw new TypeError("Argument must be a number");return p.SlowBuffer(u)}},8114:(Y,L,E)=>{"use strict";var R,p=E(3875),N=p.Buffer,m={};for(R in p)!p.hasOwnProperty(R)||"SlowBuffer"===R||"Buffer"===R||(m[R]=p[R]);var u=m.Buffer={};for(R in N)!N.hasOwnProperty(R)||"allocUnsafe"===R||"allocUnsafeSlow"===R||(u[R]=N[R]);if(m.Buffer.prototype=N.prototype,(!u.from||u.from===Uint8Array.from)&&(u.from=function(v,M,A){if("number"==typeof v)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof v);if(v&&void 0===v.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v);return N(v,M,A)}),u.alloc||(u.alloc=function(v,M,A){if("number"!=typeof v)throw new TypeError('The "size" argument must be of type number. Received type '+typeof v);if(v<0||v>=2*(1<<30))throw new RangeError('The value "'+v+'" is invalid for option "size"');var T=N(v);return M&&0!==M.length?"string"==typeof A?T.fill(M,A):T.fill(M):T.fill(0),T}),!m.kStringMaxLength)try{m.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(v){}m.constants||(m.constants={MAX_LENGTH:m.kMaxLength},m.kStringMaxLength&&(m.constants.MAX_STRING_LENGTH=m.kStringMaxLength)),Y.exports=m},3437:(Y,L,E)=>{var p=E(5859).Buffer;function N(m,R){this._block=p.alloc(m),this._finalSize=R,this._blockSize=m,this._len=0}N.prototype.update=function(m,R){"string"==typeof m&&(m=p.from(m,R=R||"utf8"));for(var u=this._block,v=this._blockSize,M=m.length,A=this._len,T=0;T<M;){for(var g=A%v,h=Math.min(M-T,v-g),C=0;C<h;C++)u[g+C]=m[T+C];T+=h,(A+=h)%v==0&&this._update(u)}return this._len+=M,this},N.prototype.digest=function(m){var R=this._len%this._blockSize;this._block[R]=128,this._block.fill(0,R+1),R>=this._finalSize&&(this._update(this._block),this._block.fill(0));var u=8*this._len;if(u<=4294967295)this._block.writeUInt32BE(u,this._blockSize-4);else{var v=(4294967295&u)>>>0;this._block.writeUInt32BE((u-v)/4294967296,this._blockSize-8),this._block.writeUInt32BE(v,this._blockSize-4)}this._update(this._block);var A=this._hash();return m?A.toString(m):A},N.prototype._update=function(){throw new Error("_update must be implemented by subclass")},Y.exports=N},5829:(Y,L,E)=>{var p=Y.exports=function(m){m=m.toLowerCase();var R=p[m];if(!R)throw new Error(m+" is not supported (we accept pull requests)");return new R};p.sha=E(6356),p.sha1=E(7338),p.sha224=E(4280),p.sha256=E(857),p.sha384=E(6203),p.sha512=E(5976)},6356:(Y,L,E)=>{var p=E(9879),N=E(3437),m=E(5859).Buffer,R=[1518500249,1859775393,-1894007588,-899497514],u=new Array(80);function v(){this.init(),this._w=u,N.call(this,64,56)}function M(g){return g<<5|g>>>27}function A(g){return g<<30|g>>>2}function T(g,h,C,b){return 0===g?h&C|~h&b:2===g?h&C|h&b|C&b:h^C^b}p(v,N),v.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},v.prototype._update=function(g){for(var h=this._w,C=0|this._a,b=0|this._b,w=0|this._c,I=0|this._d,P=0|this._e,k=0;k<16;++k)h[k]=g.readInt32BE(4*k);for(;k<80;++k)h[k]=h[k-3]^h[k-8]^h[k-14]^h[k-16];for(var O=0;O<80;++O){var V=~~(O/20),U=M(C)+T(V,b,w,I)+P+h[O]+R[V]|0;P=I,I=w,w=A(b),b=C,C=U}this._a=C+this._a|0,this._b=b+this._b|0,this._c=w+this._c|0,this._d=I+this._d|0,this._e=P+this._e|0},v.prototype._hash=function(){var g=m.allocUnsafe(20);return g.writeInt32BE(0|this._a,0),g.writeInt32BE(0|this._b,4),g.writeInt32BE(0|this._c,8),g.writeInt32BE(0|this._d,12),g.writeInt32BE(0|this._e,16),g},Y.exports=v},7338:(Y,L,E)=>{var p=E(9879),N=E(3437),m=E(5859).Buffer,R=[1518500249,1859775393,-1894007588,-899497514],u=new Array(80);function v(){this.init(),this._w=u,N.call(this,64,56)}function M(h){return h<<1|h>>>31}function A(h){return h<<5|h>>>27}function T(h){return h<<30|h>>>2}function g(h,C,b,w){return 0===h?C&b|~C&w:2===h?C&b|C&w|b&w:C^b^w}p(v,N),v.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},v.prototype._update=function(h){for(var C=this._w,b=0|this._a,w=0|this._b,I=0|this._c,P=0|this._d,k=0|this._e,O=0;O<16;++O)C[O]=h.readInt32BE(4*O);for(;O<80;++O)C[O]=M(C[O-3]^C[O-8]^C[O-14]^C[O-16]);for(var V=0;V<80;++V){var U=~~(V/20),B=A(b)+g(U,w,I,P)+k+C[V]+R[U]|0;k=P,P=I,I=T(w),w=b,b=B}this._a=b+this._a|0,this._b=w+this._b|0,this._c=I+this._c|0,this._d=P+this._d|0,this._e=k+this._e|0},v.prototype._hash=function(){var h=m.allocUnsafe(20);return h.writeInt32BE(0|this._a,0),h.writeInt32BE(0|this._b,4),h.writeInt32BE(0|this._c,8),h.writeInt32BE(0|this._d,12),h.writeInt32BE(0|this._e,16),h},Y.exports=v},4280:(Y,L,E)=>{var p=E(9879),N=E(857),m=E(3437),R=E(5859).Buffer,u=new Array(64);function v(){this.init(),this._w=u,m.call(this,64,56)}p(v,N),v.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},v.prototype._hash=function(){var M=R.allocUnsafe(28);return M.writeInt32BE(this._a,0),M.writeInt32BE(this._b,4),M.writeInt32BE(this._c,8),M.writeInt32BE(this._d,12),M.writeInt32BE(this._e,16),M.writeInt32BE(this._f,20),M.writeInt32BE(this._g,24),M},Y.exports=v},857:(Y,L,E)=>{var p=E(9879),N=E(3437),m=E(5859).Buffer,R=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],u=new Array(64);function v(){this.init(),this._w=u,N.call(this,64,56)}function M(b,w,I){return I^b&(w^I)}function A(b,w,I){return b&w|I&(b|w)}function T(b){return(b>>>2|b<<30)^(b>>>13|b<<19)^(b>>>22|b<<10)}function g(b){return(b>>>6|b<<26)^(b>>>11|b<<21)^(b>>>25|b<<7)}function h(b){return(b>>>7|b<<25)^(b>>>18|b<<14)^b>>>3}function C(b){return(b>>>17|b<<15)^(b>>>19|b<<13)^b>>>10}p(v,N),v.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},v.prototype._update=function(b){for(var w=this._w,I=0|this._a,P=0|this._b,k=0|this._c,O=0|this._d,V=0|this._e,U=0|this._f,B=0|this._g,H=0|this._h,W=0;W<16;++W)w[W]=b.readInt32BE(4*W);for(;W<64;++W)w[W]=C(w[W-2])+w[W-7]+h(w[W-15])+w[W-16]|0;for(var te=0;te<64;++te){var $=H+g(V)+M(V,U,B)+R[te]+w[te]|0,pe=T(I)+A(I,P,k)|0;H=B,B=U,U=V,V=O+$|0,O=k,k=P,P=I,I=$+pe|0}this._a=I+this._a|0,this._b=P+this._b|0,this._c=k+this._c|0,this._d=O+this._d|0,this._e=V+this._e|0,this._f=U+this._f|0,this._g=B+this._g|0,this._h=H+this._h|0},v.prototype._hash=function(){var b=m.allocUnsafe(32);return b.writeInt32BE(this._a,0),b.writeInt32BE(this._b,4),b.writeInt32BE(this._c,8),b.writeInt32BE(this._d,12),b.writeInt32BE(this._e,16),b.writeInt32BE(this._f,20),b.writeInt32BE(this._g,24),b.writeInt32BE(this._h,28),b},Y.exports=v},6203:(Y,L,E)=>{var p=E(9879),N=E(5976),m=E(3437),R=E(5859).Buffer,u=new Array(160);function v(){this.init(),this._w=u,m.call(this,128,112)}p(v,N),v.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},v.prototype._hash=function(){var M=R.allocUnsafe(48);function A(T,g,h){M.writeInt32BE(T,h),M.writeInt32BE(g,h+4)}return A(this._ah,this._al,0),A(this._bh,this._bl,8),A(this._ch,this._cl,16),A(this._dh,this._dl,24),A(this._eh,this._el,32),A(this._fh,this._fl,40),M},Y.exports=v},5976:(Y,L,E)=>{var p=E(9879),N=E(3437),m=E(5859).Buffer,R=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],u=new Array(160);function v(){this.init(),this._w=u,N.call(this,128,112)}function M(P,k,O){return O^P&(k^O)}function A(P,k,O){return P&k|O&(P|k)}function T(P,k){return(P>>>28|k<<4)^(k>>>2|P<<30)^(k>>>7|P<<25)}function g(P,k){return(P>>>14|k<<18)^(P>>>18|k<<14)^(k>>>9|P<<23)}function h(P,k){return(P>>>1|k<<31)^(P>>>8|k<<24)^P>>>7}function C(P,k){return(P>>>1|k<<31)^(P>>>8|k<<24)^(P>>>7|k<<25)}function b(P,k){return(P>>>19|k<<13)^(k>>>29|P<<3)^P>>>6}function w(P,k){return(P>>>19|k<<13)^(k>>>29|P<<3)^(P>>>6|k<<26)}function I(P,k){return P>>>0<k>>>0?1:0}p(v,N),v.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},v.prototype._update=function(P){for(var k=this._w,O=0|this._ah,V=0|this._bh,U=0|this._ch,B=0|this._dh,H=0|this._eh,W=0|this._fh,te=0|this._gh,$=0|this._hh,pe=0|this._al,x=0|this._bl,r=0|this._cl,s=0|this._dl,l=0|this._el,a=0|this._fl,f=0|this._gl,_=0|this._hl,D=0;D<32;D+=2)k[D]=P.readInt32BE(4*D),k[D+1]=P.readInt32BE(4*D+4);for(;D<160;D+=2){var d=k[D-30],i=k[D-30+1],y=h(d,i),z=C(i,d),q=b(d=k[D-4],i=k[D-4+1]),Z=w(i,d),le=k[D-32],fe=k[D-32+1],ae=z+k[D-14+1]|0,de=y+k[D-14]+I(ae,z)|0;de=(de=de+q+I(ae=ae+Z|0,Z)|0)+le+I(ae=ae+fe|0,fe)|0,k[D]=de,k[D+1]=ae}for(var xe=0;xe<160;xe+=2){de=k[xe],ae=k[xe+1];var Ce=A(O,V,U),oe=A(pe,x,r),we=T(O,pe),ye=T(pe,O),re=g(H,l),ee=g(l,H),J=R[xe],ue=R[xe+1],Ae=M(H,W,te),Te=M(l,a,f),Ee=_+ee|0,We=$+re+I(Ee,_)|0;We=(We=(We=We+Ae+I(Ee=Ee+Te|0,Te)|0)+J+I(Ee=Ee+ue|0,ue)|0)+de+I(Ee=Ee+ae|0,ae)|0;var Ne=ye+oe|0,_e=we+Ce+I(Ne,ye)|0;$=te,_=f,te=W,f=a,W=H,a=l,H=B+We+I(l=s+Ee|0,s)|0,B=U,s=r,U=V,r=x,V=O,x=pe,O=We+_e+I(pe=Ee+Ne|0,Ee)|0}this._al=this._al+pe|0,this._bl=this._bl+x|0,this._cl=this._cl+r|0,this._dl=this._dl+s|0,this._el=this._el+l|0,this._fl=this._fl+a|0,this._gl=this._gl+f|0,this._hl=this._hl+_|0,this._ah=this._ah+O+I(this._al,pe)|0,this._bh=this._bh+V+I(this._bl,x)|0,this._ch=this._ch+U+I(this._cl,r)|0,this._dh=this._dh+B+I(this._dl,s)|0,this._eh=this._eh+H+I(this._el,l)|0,this._fh=this._fh+W+I(this._fl,a)|0,this._gh=this._gh+te+I(this._gl,f)|0,this._hh=this._hh+$+I(this._hl,_)|0},v.prototype._hash=function(){var P=m.allocUnsafe(64);function k(O,V,U){P.writeInt32BE(O,U),P.writeInt32BE(V,U+4)}return k(this._ah,this._al,0),k(this._bh,this._bl,8),k(this._ch,this._cl,16),k(this._dh,this._dl,24),k(this._eh,this._el,32),k(this._fh,this._fl,40),k(this._gh,this._gl,48),k(this._hh,this._hl,56),P},Y.exports=v},6917:(Y,L,E)=>{Y.exports=m;var p=E(3105).EventEmitter;function m(){p.call(this)}E(9879)(m,p),m.Readable=E(2833),m.Writable=E(7807),m.Duplex=E(942),m.Transform=E(5431),m.PassThrough=E(619),m.finished=E(6820),m.pipeline=E(6076),m.Stream=m,m.prototype.pipe=function(R,u){var v=this;function M(w){R.writable&&!1===R.write(w)&&v.pause&&v.pause()}function A(){v.readable&&v.resume&&v.resume()}v.on("data",M),R.on("drain",A),!R._isStdio&&(!u||!1!==u.end)&&(v.on("end",g),v.on("close",h));var T=!1;function g(){T||(T=!0,R.end())}function h(){T||(T=!0,"function"==typeof R.destroy&&R.destroy())}function C(w){if(b(),0===p.listenerCount(this,"error"))throw w}function b(){v.removeListener("data",M),R.removeListener("drain",A),v.removeListener("end",g),v.removeListener("close",h),v.removeListener("error",C),R.removeListener("error",C),v.removeListener("end",b),v.removeListener("close",b),R.removeListener("close",b)}return v.on("error",C),R.on("error",C),v.on("end",b),v.on("close",b),R.on("close",b),R.emit("pipe",v),R}},2519:(Y,L,E)=>{"use strict";var p=E(4374).Buffer,N=p.isEncoding||function(O){switch((O=""+O)&&O.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function u(O){var V;switch(this.encoding=function(O){var V=function(O){if(!O)return"utf8";for(var V;;)switch(O){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return O;default:if(V)return;O=(""+O).toLowerCase(),V=!0}}(O);if("string"!=typeof V&&(p.isEncoding===N||!N(O)))throw new Error("Unknown encoding: "+O);return V||O}(O),this.encoding){case"utf16le":this.text=C,this.end=b,V=4;break;case"utf8":this.fillLast=T,V=4;break;case"base64":this.text=w,this.end=I,V=3;break;default:return this.write=P,void(this.end=k)}this.lastNeed=0,this.lastTotal=0,this.lastChar=p.allocUnsafe(V)}function v(O){return O<=127?0:O>>5==6?2:O>>4==14?3:O>>3==30?4:O>>6==2?-1:-2}function T(O){var V=this.lastTotal-this.lastNeed,U=function(O,V,U){if(128!=(192&V[0]))return O.lastNeed=0,"\ufffd";if(O.lastNeed>1&&V.length>1){if(128!=(192&V[1]))return O.lastNeed=1,"\ufffd";if(O.lastNeed>2&&V.length>2&&128!=(192&V[2]))return O.lastNeed=2,"\ufffd"}}(this,O);return void 0!==U?U:this.lastNeed<=O.length?(O.copy(this.lastChar,V,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(O.copy(this.lastChar,V,0,O.length),void(this.lastNeed-=O.length))}function C(O,V){if((O.length-V)%2==0){var U=O.toString("utf16le",V);if(U){var B=U.charCodeAt(U.length-1);if(B>=55296&&B<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=O[O.length-2],this.lastChar[1]=O[O.length-1],U.slice(0,-1)}return U}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=O[O.length-1],O.toString("utf16le",V,O.length-1)}function b(O){var V=O&&O.length?this.write(O):"";return this.lastNeed?V+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):V}function w(O,V){var U=(O.length-V)%3;return 0===U?O.toString("base64",V):(this.lastNeed=3-U,this.lastTotal=3,1===U?this.lastChar[0]=O[O.length-1]:(this.lastChar[0]=O[O.length-2],this.lastChar[1]=O[O.length-1]),O.toString("base64",V,O.length-U))}function I(O){var V=O&&O.length?this.write(O):"";return this.lastNeed?V+this.lastChar.toString("base64",0,3-this.lastNeed):V}function P(O){return O.toString(this.encoding)}function k(O){return O&&O.length?this.write(O):""}L.s=u,u.prototype.write=function(O){if(0===O.length)return"";var V,U;if(this.lastNeed){if(void 0===(V=this.fillLast(O)))return"";U=this.lastNeed,this.lastNeed=0}else U=0;return U<O.length?V?V+this.text(O,U):this.text(O,U):V||""},u.prototype.end=function(O){var V=O&&O.length?this.write(O):"";return this.lastNeed?V+"\ufffd":V},u.prototype.text=function(O,V){var U=function(O,V,U){var B=V.length-1;if(B<U)return 0;var H=v(V[B]);return H>=0?(H>0&&(O.lastNeed=H-1),H):--B<U||-2===H?0:(H=v(V[B]))>=0?(H>0&&(O.lastNeed=H-2),H):--B<U||-2===H?0:(H=v(V[B]))>=0?(H>0&&(2===H?H=0:O.lastNeed=H-3),H):0}(this,O,V);if(!this.lastNeed)return O.toString("utf8",V);this.lastTotal=U;var B=O.length-(U-this.lastNeed);return O.copy(this.lastChar,0,B),O.toString("utf8",V,B)},u.prototype.fillLast=function(O){if(this.lastNeed<=O.length)return O.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);O.copy(this.lastChar,this.lastTotal-this.lastNeed,0,O.length),this.lastNeed-=O.length}},4374:(Y,L,E)=>{var p=E(3875),N=p.Buffer;function m(u,v){for(var M in u)v[M]=u[M]}function R(u,v,M){return N(u,v,M)}N.from&&N.alloc&&N.allocUnsafe&&N.allocUnsafeSlow?Y.exports=p:(m(p,L),L.Buffer=R),R.prototype=Object.create(N.prototype),m(N,R),R.from=function(u,v,M){if("number"==typeof u)throw new TypeError("Argument must not be a number");return N(u,v,M)},R.alloc=function(u,v,M){if("number"!=typeof u)throw new TypeError("Argument must be a number");var A=N(u);return void 0!==v?"string"==typeof M?A.fill(v,M):A.fill(v):A.fill(0),A},R.allocUnsafe=function(u){if("number"!=typeof u)throw new TypeError("Argument must be a number");return N(u)},R.allocUnsafeSlow=function(u){if("number"!=typeof u)throw new TypeError("Argument must be a number");return p.SlowBuffer(u)}},5822:Y=>{function E(p){try{if(!global.localStorage)return!1}catch(m){return!1}var N=global.localStorage[p];return null!=N&&"true"===String(N).toLowerCase()}Y.exports=function(p,N){if(E("noDeprecation"))return p;var m=!1;return function(){if(!m){if(E("throwDeprecation"))throw new Error(N);E("traceDeprecation")?console.trace(N):console.warn(N),m=!0}return p.apply(this,arguments)}}},8952:(Y,L,E)=>{"use strict";function p(t){return"function"==typeof t}let N=!1;const m={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else N&&console.log("RxJS: Back to a better error behavior. Thank you. <3");N=t},get useDeprecatedSynchronousErrorHandling(){return N}};function R(t){setTimeout(()=>{throw t},0)}const u={closed:!0,next(t){},error(t){if(m.useDeprecatedSynchronousErrorHandling)throw t;R(t)},complete(){}},v=Array.isArray||(t=>t&&"number"==typeof t.length);function M(t){return null!==t&&"object"==typeof t}const T=(()=>{function t(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,o)=>`${o+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return t.prototype=Object.create(Error.prototype),t})();class g{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:o,_unsubscribe:c,_subscriptions:S}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof g)n.remove(this);else if(null!==n)for(let F=0;F<n.length;++F)n[F].remove(this);if(p(c)){o&&(this._unsubscribe=void 0);try{c.call(this)}catch(F){e=F instanceof T?h(F.errors):[F]}}if(v(S)){let F=-1,j=S.length;for(;++F<j;){const G=S[F];if(M(G))try{G.unsubscribe()}catch(ie){e=e||[],ie instanceof T?e=e.concat(h(ie.errors)):e.push(ie)}}}if(e)throw new T(e)}add(e){let n=e;if(!e)return g.EMPTY;switch(typeof e){case"function":n=new g(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof g)){const S=n;n=new g,n._subscriptions=[S]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:o}=n;if(null===o)n._parentOrParents=this;else if(o instanceof g){if(o===this)return n;n._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return n;o.push(this)}const c=this._subscriptions;return null===c?this._subscriptions=[n]:c.push(n),n}remove(e){const n=this._subscriptions;if(n){const o=n.indexOf(e);-1!==o&&n.splice(o,1)}}}var t;function h(t){return t.reduce((e,n)=>e.concat(n instanceof T?n.errors:n),[])}g.EMPTY=((t=new g).closed=!0,t);const C="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class w extends g{constructor(e,n,o){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=u;break;case 1:if(!e){this.destination=u;break}if("object"==typeof e){e instanceof w?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new I(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new I(this,e,n,o)}}[C](){return this}static create(e,n,o){const c=new w(e,n,o);return c.syncErrorThrowable=!1,c}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class I extends w{constructor(e,n,o,c){super(),this._parentSubscriber=e;let S,F=this;p(n)?S=n:n&&(S=n.next,o=n.error,c=n.complete,n!==u&&(F=Object.create(n),p(F.unsubscribe)&&this.add(F.unsubscribe.bind(F)),F.unsubscribe=this.unsubscribe.bind(this))),this._context=F,this._next=S,this._error=o,this._complete=c}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:n}=this;m.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:n}=this,{useDeprecatedSynchronousErrorHandling:o}=m;if(this._error)o&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(n.syncErrorThrowable)o?(n.syncErrorValue=e,n.syncErrorThrown=!0):R(e),this.unsubscribe();else{if(this.unsubscribe(),o)throw e;R(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const n=()=>this._complete.call(this._context);m.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,n){try{e.call(this._context,n)}catch(o){if(this.unsubscribe(),m.useDeprecatedSynchronousErrorHandling)throw o;R(o)}}__tryOrSetError(e,n,o){if(!m.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,o)}catch(c){return m.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=c,e.syncErrorThrown=!0,!0):(R(c),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const O="function"==typeof Symbol&&Symbol.observable||"@@observable";function V(t){return t}let H=(()=>{class t{constructor(n){this._isScalar=!1,n&&(this._subscribe=n)}lift(n){const o=new t;return o.source=this,o.operator=n,o}subscribe(n,o,c){const{operator:S}=this,F=function(t,e,n){if(t){if(t instanceof w)return t;if(t[C])return t[C]()}return t||e||n?new w(t,e,n):new w(u)}(n,o,c);if(F.add(S?S.call(F,this.source):this.source||m.useDeprecatedSynchronousErrorHandling&&!F.syncErrorThrowable?this._subscribe(F):this._trySubscribe(F)),m.useDeprecatedSynchronousErrorHandling&&F.syncErrorThrowable&&(F.syncErrorThrowable=!1,F.syncErrorThrown))throw F.syncErrorValue;return F}_trySubscribe(n){try{return this._subscribe(n)}catch(o){m.useDeprecatedSynchronousErrorHandling&&(n.syncErrorThrown=!0,n.syncErrorValue=o),function(t){for(;t;){const{closed:e,destination:n,isStopped:o}=t;if(e||o)return!1;t=n&&n instanceof w?n:null}return!0}(n)?n.error(o):console.warn(o)}}forEach(n,o){return new(o=W(o))((c,S)=>{let F;F=this.subscribe(j=>{try{n(j)}catch(G){S(G),F&&F.unsubscribe()}},S,c)})}_subscribe(n){const{source:o}=this;return o&&o.subscribe(n)}[O](){return this}pipe(...n){return 0===n.length?this:function(t){return 0===t.length?V:1===t.length?t[0]:function(n){return t.reduce((o,c)=>c(o),n)}}(n)(this)}toPromise(n){return new(n=W(n))((o,c)=>{let S;this.subscribe(F=>S=F,F=>c(F),()=>o(S))})}}return t.create=e=>new t(e),t})();function W(t){if(t||(t=m.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const $=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class pe extends g{constructor(e,n){super(),this.subject=e,this.subscriber=n,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,n=e.observers;if(this.subject=null,!n||0===n.length||e.isStopped||e.closed)return;const o=n.indexOf(this.subscriber);-1!==o&&n.splice(o,1)}}class x extends w{constructor(e){super(e),this.destination=e}}let r=(()=>{class t extends H{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[C](){return new x(this)}lift(n){const o=new s(this,this);return o.operator=n,o}next(n){if(this.closed)throw new $;if(!this.isStopped){const{observers:o}=this,c=o.length,S=o.slice();for(let F=0;F<c;F++)S[F].next(n)}}error(n){if(this.closed)throw new $;this.hasError=!0,this.thrownError=n,this.isStopped=!0;const{observers:o}=this,c=o.length,S=o.slice();for(let F=0;F<c;F++)S[F].error(n);this.observers.length=0}complete(){if(this.closed)throw new $;this.isStopped=!0;const{observers:n}=this,o=n.length,c=n.slice();for(let S=0;S<o;S++)c[S].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(n){if(this.closed)throw new $;return super._trySubscribe(n)}_subscribe(n){if(this.closed)throw new $;return this.hasError?(n.error(this.thrownError),g.EMPTY):this.isStopped?(n.complete(),g.EMPTY):(this.observers.push(n),new pe(this,n))}asObservable(){const n=new H;return n.source=this,n}}return t.create=(e,n)=>new s(e,n),t})();class s extends r{constructor(e,n){super(),this.destination=e,this.source=n}next(e){const{destination:n}=this;n&&n.next&&n.next(e)}error(e){const{destination:n}=this;n&&n.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:n}=this;return n?this.source.subscribe(e):g.EMPTY}}function l(t){return t&&"function"==typeof t.schedule}function a(t,e){return function(o){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return o.lift(new f(t,e))}}class f{constructor(e,n){this.project=e,this.thisArg=n}call(e,n){return n.subscribe(new _(e,this.project,this.thisArg))}}class _ extends w{constructor(e,n,o){super(e),this.project=n,this.count=0,this.thisArg=o||this}_next(e){let n;try{n=this.project.call(this.thisArg,e,this.count++)}catch(o){return void this.destination.error(o)}this.destination.next(n)}}const D=t=>e=>{for(let n=0,o=t.length;n<o&&!e.closed;n++)e.next(t[n]);e.complete()},y="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",ge=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function me(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const le=t=>{if(t&&"function"==typeof t[O])return(t=>e=>{const n=t[O]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)})(t);if(ge(t))return D(t);if(me(t))return(t=>e=>(t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,R),e))(t);if(t&&"function"==typeof t[y])return(t=>e=>{const n=t[y]();for(;;){let o;try{o=n.next()}catch(c){return e.error(c),e}if(o.done){e.complete();break}if(e.next(o.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e})(t);{const n=`You provided ${M(t)?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(n)}};function de(t,e){return new H(n=>{const o=new g;let c=0;return o.add(e.schedule(function(){c!==t.length?(n.next(t[c++]),n.closed||o.add(this.schedule())):n.complete()})),o})}function ye(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[O]}(t))return function(t,e){return new H(n=>{const o=new g;return o.add(e.schedule(()=>{const c=t[O]();o.add(c.subscribe({next(S){o.add(e.schedule(()=>n.next(S)))},error(S){o.add(e.schedule(()=>n.error(S)))},complete(){o.add(e.schedule(()=>n.complete()))}}))})),o})}(t,e);if(me(t))return function(t,e){return new H(n=>{const o=new g;return o.add(e.schedule(()=>t.then(c=>{o.add(e.schedule(()=>{n.next(c),o.add(e.schedule(()=>n.complete()))}))},c=>{o.add(e.schedule(()=>n.error(c)))}))),o})}(t,e);if(ge(t))return de(t,e);if(function(t){return t&&"function"==typeof t[y]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new H(n=>{const o=new g;let c;return o.add(()=>{c&&"function"==typeof c.return&&c.return()}),o.add(e.schedule(()=>{c=t[y](),o.add(e.schedule(function(){if(n.closed)return;let S,F;try{const j=c.next();S=j.value,F=j.done}catch(j){return void n.error(j)}F?n.complete():(n.next(S),this.schedule())}))})),o})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof H?t:new H(le(t))}class re extends w{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class J extends w{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function Te(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(Te((c,S)=>ye(t(c,S)).pipe(a((F,j)=>e(c,F,S,j))),n)):("number"==typeof e&&(n=e),o=>o.lift(new Ee(t,n)))}class Ee{constructor(e,n=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=n}call(e,n){return n.subscribe(new We(e,this.project,this.concurrent))}}class We extends J{constructor(e,n,o=Number.POSITIVE_INFINITY){super(e),this.project=n,this.concurrent=o,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let n;const o=this.index++;try{n=this.project(e,o)}catch(c){return void this.destination.error(c)}this.active++,this._innerSub(n)}_innerSub(e){const n=new re(this),o=this.destination;o.add(n);const c=function(t,e){if(e.closed)return;if(t instanceof H)return t.subscribe(e);let n;try{n=le(t)(e)}catch(o){e.error(o)}return n}(e,n);c!==n&&o.add(c)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function _e(t=Number.POSITIVE_INFINITY){return Te(V,t)}function Be(t,e){return e?de(t,e):new H(D(t))}function Le(){return function(e){return e.lift(new Mt(e))}}class Mt{constructor(e){this.connectable=e}call(e,n){const{connectable:o}=this;o._refCount++;const c=new He(e,o),S=n.subscribe(c);return c.closed||(c.connection=o.connect()),S}}class He extends w{constructor(e,n){super(e),this.connectable=n}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const n=e._refCount;if(n<=0)return void(this.connection=null);if(e._refCount=n-1,n>1)return void(this.connection=null);const{connection:o}=this,c=e._connection;this.connection=null,c&&(!o||c===o)&&c.unsubscribe()}}class $e extends H{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new g,e.add(this.source.subscribe(new et(this.getSubject(),this))),e.closed&&(this._connection=null,e=g.EMPTY)),e}refCount(){return Le()(this)}}const It=(()=>{const t=$e.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class et extends x{constructor(e,n){super(e),this.connectable=n}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const n=e._connection;e._refCount=0,e._subject=null,e._connection=null,n&&n.unsubscribe()}}}function Mn(){return new r}function Ke(t){for(let e in t)if(t[e]===Ke)return e;throw Error("Could not find renamed property on target object.")}function Ge(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Ge).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function ut(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const On=Ke({__forward_ref__:Ke});function nt(t){return t.__forward_ref__=nt,t.toString=function(){return Ge(this())},t}function Ve(t){return function(t){return"function"==typeof t&&t.hasOwnProperty(On)&&t.__forward_ref__===nt}(t)?t():t}class st extends Error{constructor(e,n){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(e,n)),this.code=e}}function an(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():function(t){return"string"==typeof t?t:null==t?"":String(t)}(t)}function Ye(t,e){const n=e?` in ${e}`:"";throw new st("201",`No provider for ${an(t)} found${n}`)}function Jt(t,e){null==t&&function(t,e,n,o){throw new Error(`ASSERTION ERROR: ${t}`+(null==o?"":` [Expected=> ${n} ${o} ${e} <=Actual]`))}(e,t,null,"!=")}function Rt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Qt(t){return{providers:t.providers||[],imports:t.imports||[]}}function nn(t){return En(t,wo)||En(t,ps)}function En(t,e){return t.hasOwnProperty(e)?t[e]:null}function Ni(t){return t&&(t.hasOwnProperty(Uo)||t.hasOwnProperty(Co))?t[Uo]:null}const wo=Ke({\u0275prov:Ke}),Uo=Ke({\u0275inj:Ke}),ps=Ke({ngInjectableDef:Ke}),Co=Ke({ngInjectorDef:Ke});var Ht=(()=>((Ht=Ht||{})[Ht.Default=0]="Default",Ht[Ht.Host=1]="Host",Ht[Ht.Self=2]="Self",Ht[Ht.SkipSelf=4]="SkipSelf",Ht[Ht.Optional=8]="Optional",Ht))();let Vo;function $r(t){const e=Vo;return Vo=t,e}function Mo(t,e,n){const o=nn(t);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:n&Ht.Optional?null:void 0!==e?e:void Ye(Ge(t),"Injector")}function Vr(t){return{toString:t}.toString()}var br=(()=>((br=br||{})[br.OnPush=0]="OnPush",br[br.Default=1]="Default",br))(),Jn=(()=>((Jn=Jn||{})[Jn.Emulated=0]="Emulated",Jn[Jn.None=2]="None",Jn[Jn.ShadowDom=3]="ShadowDom",Jn))();const _o="undefined"!=typeof globalThis&&globalThis,Ra="undefined"!=typeof window&&window,Ho="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,vs="undefined"!=typeof global&&global,fn=_o||vs||Ra||Ho,Li={},Pn=[],to=Ke({\u0275cmp:Ke}),Zn=Ke({\u0275dir:Ke}),no=Ke({\u0275pipe:Ke}),ms=Ke({\u0275mod:Ke}),jo=Ke({\u0275loc:Ke}),Hr=Ke({\u0275fac:Ke}),di=Ke({__NG_ELEMENT_ID__:Ke});let ys=0;function qo(t){return Vr(()=>{const n={},o={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===br.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Pn,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Jn.Emulated,id:"c",styles:t.styles||Pn,_:null,setInput:null,schemas:t.schemas||null,tView:null},c=t.directives,S=t.features,F=t.pipes;return o.id+=ys++,o.inputs=Eo(t.inputs,n),o.outputs=Eo(t.outputs),S&&S.forEach(j=>j(o)),o.directiveDefs=c?()=>("function"==typeof c?c():c).map(Wo):null,o.pipeDefs=F?()=>("function"==typeof F?F():F).map(ro):null,o})}function Wo(t){return cr(t)||function(t){return t[Zn]||null}(t)}function ro(t){return function(t){return t[no]||null}(t)}const hi={};function io(t){return Vr(()=>{const e={type:t.type,bootstrap:t.bootstrap||Pn,declarations:t.declarations||Pn,imports:t.imports||Pn,exports:t.exports||Pn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(hi[t.id]=t.type),e})}function Eo(t,e){if(null==t)return Li;const n={};for(const o in t)if(t.hasOwnProperty(o)){let c=t[o],S=c;Array.isArray(c)&&(S=c[1],c=c[0]),n[c]=o,e&&(e[c]=S)}return n}const _r=qo;function cr(t){return t[to]||null}function fr(t,e){const n=t[ms]||null;if(!n&&!0===e)throw new Error(`Type ${Ge(t)} does not have '\u0275mod' property.`);return n}function tt(t){return Array.isArray(t)&&"object"==typeof t[1]}function gt(t){return Array.isArray(t)&&!0===t[1]}function yt(t){return 0!=(8&t.flags)}function vt(t){return 2==(2&t.flags)}function bt(t){return 1==(1&t.flags)}function Nt(t){return null!==t.template}function Pt(t){return 0!=(512&t[2])}function lo(t,e){return t.hasOwnProperty(Hr)?t[Hr]:null}class Yu{constructor(e,n,o){this.previousValue=e,this.currentValue=n,this.firstChange=o}isFirstChange(){return this.firstChange}}function Pa(t){return t.type.prototype.ngOnChanges&&(t.setInput=u0),Oa}function Oa(){const t=Xu(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===Li)t.previous=e;else for(let o in e)n[o]=e[o];t.current=null,this.ngOnChanges(e)}}function u0(t,e,n,o){const c=Xu(t)||function(t,e){return t[Lc]=e}(t,{previous:Li,current:null}),S=c.current||(c.current={}),F=c.previous,j=this.declaredInputs[n],G=F[j];S[j]=new Yu(G&&G.currentValue,e,F===Li),t[o]=e}const Lc="__ngSimpleChanges__";function Xu(t){return t[Lc]||null}let Na;function Hn(t){return!!t.listen}const Ko={createRenderer:(t,e)=>void 0!==Na?Na:"undefined"!=typeof document?document:void 0};function rr(t){for(;Array.isArray(t);)t=t[0];return t}function zr(t,e){return rr(e[t.index])}function Fa(t,e){return t.data[e]}function kr(t,e){const n=e[t];return tt(n)?n:n[0]}function Ba(t){return 128==(128&t[2])}function Ui(t,e){return null==e?null:t[e]}function Es(t){t[18]=0}function Ua(t,e){t[5]+=e;let n=t,o=t[3];for(;null!==o&&(1===e&&1===n[5]||-1===e&&0===n[5]);)o[5]+=e,n=o,o=o[3]}const $t={lFrame:al(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function tl(){return $t.bindingsEnabled}function _t(){return $t.lFrame.lView}function bn(){return $t.lFrame.tView}function Va(t){return $t.lFrame.contextLView=t,t[8]}function ir(){let t=nl();for(;null!==t&&64===t.type;)t=t.parent;return t}function nl(){return $t.lFrame.currentTNode}function ti(t,e){const n=$t.lFrame;n.currentTNode=t,n.isParent=e}function Zo(){return $t.lFrame.isParent}function Ts(){return $t.isInCheckNoChangesMode}function Is(t){$t.isInCheckNoChangesMode=t}function Kc(t,e){const n=$t.lFrame;n.bindingIndex=n.bindingRootIndex=t,qa(e)}function qa(t){$t.lFrame.currentDirectiveIndex=t}function za(t){$t.lFrame.currentQueryIndex=t}function Zc(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ol(t,e,n){if(n&Ht.SkipSelf){let c=e,S=t;for(;!(c=c.parent,null!==c||n&Ht.Host||(c=Zc(S),null===c||(S=S[15],10&c.type))););if(null===c)return!1;e=c,t=S}const o=$t.lFrame=sl();return o.currentTNode=e,o.lView=t,!0}function As(t){const e=sl(),n=t[1];$t.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function sl(){const t=$t.lFrame,e=null===t?null:t.child;return null===e?al(t):e}function al(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ul(){const t=$t.lFrame;return $t.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ll=ul;function Ds(){const t=ul();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function wr(){return $t.lFrame.selectedIndex}function Hi(t){$t.lFrame.selectedIndex=t}function or(t,e){for(let n=e.directiveStart,o=e.directiveEnd;n<o;n++){const S=t.data[n].type.prototype,{ngAfterContentInit:F,ngAfterContentChecked:j,ngAfterViewInit:G,ngAfterViewChecked:ie,ngOnDestroy:ce}=S;F&&(t.contentHooks||(t.contentHooks=[])).push(-n,F),j&&((t.contentHooks||(t.contentHooks=[])).push(n,j),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,j)),G&&(t.viewHooks||(t.viewHooks=[])).push(-n,G),ie&&((t.viewHooks||(t.viewHooks=[])).push(n,ie),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,ie)),null!=ce&&(t.destroyHooks||(t.destroyHooks=[])).push(n,ce)}}function Ao(t,e,n){fl(t,e,3,n)}function Os(t,e,n,o){(3&t[2])===n&&fl(t,e,n,o)}function Wa(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function fl(t,e,n,o){const S=null!=o?o:-1,F=e.length-1;let j=0;for(let G=void 0!==o?65535&t[18]:0;G<F;G++)if("number"==typeof e[G+1]){if(j=e[G],null!=o&&j>=o)break}else e[G]<0&&(t[18]+=65536),(j<S||-1==S)&&(rf(t,n,e,G),t[18]=(4294901760&t[18])+G+2),G++}function rf(t,e,n,o){const c=n[o]<0,S=n[o+1],j=t[c?-n[o]:n[o]];if(c){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{S.call(j)}finally{}}}else try{S.call(j)}finally{}}class Qo{constructor(e,n,o){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=o}}function ht(t,e,n){const o=Hn(t);let c=0;for(;c<n.length;){const S=n[c];if("number"==typeof S){if(0!==S)break;c++;const F=n[c++],j=n[c++],G=n[c++];o?t.setAttribute(e,j,G,F):e.setAttributeNS(F,j,G)}else{const F=S,j=n[++c];rt(F)?o&&t.setProperty(e,F,j):o?t.setAttribute(e,F,j):e.setAttribute(F,j),c++}}return c}function qe(t){return 3===t||4===t||6===t}function rt(t){return 64===t.charCodeAt(0)}function Et(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let o=0;o<e.length;o++){const c=e[o];"number"==typeof c?n=c:0===n||Tt(t,n,c,null,-1===n||2===n?e[++o]:null)}}return t}function Tt(t,e,n,o,c){let S=0,F=t.length;if(-1===e)F=-1;else for(;S<t.length;){const j=t[S++];if("number"==typeof j){if(j===e){F=-1;break}if(j>e){F=S-1;break}}}for(;S<t.length;){const j=t[S];if("number"==typeof j)break;if(j===n){if(null===o)return void(null!==c&&(t[S+1]=c));if(o===t[S+1])return void(t[S+2]=c)}S++,null!==o&&S++,null!==c&&S++}-1!==F&&(t.splice(F,0,e),S=F+1),t.splice(S++,0,n),null!==o&&t.splice(S++,0,o),null!==c&&t.splice(S++,0,c)}function Bt(t){return-1!==t}function At(t){return 32767&t}function rn(t,e){let n=function(t){return t>>16}(t),o=e;for(;n>0;)o=o[15],n--;return o}let Kn=!0;function Un(t){const e=Kn;return Kn=t,e}let co=0;function Wr(t,e){const n=Ga(t,e);if(-1!==n)return n;const o=e[1];o.firstCreatePass&&(t.injectorIndex=e.length,ks(o.data,t),ks(e,null),ks(o.blueprint,null));const c=dl(t,e),S=t.injectorIndex;if(Bt(c)){const F=At(c),j=rn(c,e),G=j[1].data;for(let ie=0;ie<8;ie++)e[S+ie]=j[F+ie]|G[F+ie]}return e[S+8]=c,S}function ks(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ga(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function dl(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,o=null,c=e;for(;null!==c;){const S=c[1],F=S.type;if(o=2===F?S.declTNode:1===F?c[6]:null,null===o)return-1;if(n++,c=c[15],-1!==o.injectorIndex)return o.injectorIndex|n<<16}return-1}function hl(t,e,n){!function(t,e,n){let o;"string"==typeof n?o=n.charCodeAt(0)||0:n.hasOwnProperty(di)&&(o=n[di]),null==o&&(o=n[di]=co++);const c=255&o;e.data[t+(c>>5)]|=1<<c}(t,e,n)}function h0(t,e,n){if(n&Ht.Optional)return t;Ye(e,"NodeInjector")}function p0(t,e,n,o){if(n&Ht.Optional&&void 0===o&&(o=null),0==(n&(Ht.Self|Ht.Host))){const c=t[9],S=$r(void 0);try{return c?c.get(e,o,n&Ht.Optional):Mo(e,o,n&Ht.Optional)}finally{$r(S)}}return h0(o,e,n)}function g0(t,e,n,o=Ht.Default,c){if(null!==t){const S=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(di)?t[di]:void 0;return"number"==typeof e?e>=0?255&e:tb:e}(n);if("function"==typeof S){if(!ol(e,t,o))return o&Ht.Host?h0(c,n,o):p0(e,n,o,c);try{const F=S(o);if(null!=F||o&Ht.Optional)return F;Ye(n)}finally{ll()}}else if("number"==typeof S){let F=null,j=Ga(t,e),G=-1,ie=o&Ht.Host?e[16][6]:null;for((-1===j||o&Ht.SkipSelf)&&(G=-1===j?dl(t,e):e[j+8],-1!==G&&y0(o,!1)?(F=e[1],j=At(G),e=rn(G,e)):j=-1);-1!==j;){const ce=e[1];if(m0(S,j,ce.data)){const Se=nb(j,e,n,F,o,ie);if(Se!==v0)return Se}G=e[j+8],-1!==G&&y0(o,e[1].data[j+8]===ie)&&m0(S,j,e)?(F=ce,j=At(G),e=rn(G,e)):j=-1}}}return p0(e,n,o,c)}const v0={};function tb(){return new Ns(ir(),_t())}function nb(t,e,n,o,c,S){const F=e[1],j=F.data[t+8],ce=function(t,e,n,o,c){const S=t.providerIndexes,F=e.data,j=1048575&S,G=t.directiveStart,ce=S>>20,Ie=c?j+ce:t.directiveEnd;for(let ke=o?j:j+ce;ke<Ie;ke++){const Fe=F[ke];if(ke<G&&n===Fe||ke>=G&&Fe.type===n)return ke}if(c){const ke=F[G];if(ke&&Nt(ke)&&ke.type===n)return G}return null}(j,F,n,null==o?vt(j)&&Kn:o!=F&&0!=(3&j.type),c&Ht.Host&&S===j);return null!==ce?$a(e,F,ce,j):v0}function $a(t,e,n,o){let c=t[n];const S=e.data;if(function(t){return t instanceof Qo}(c)){const F=c;F.resolving&&function(t,e){throw new st("200",`Circular dependency in DI detected for ${t}`)}(an(S[n]));const j=Un(F.canSeeViewProviders);F.resolving=!0;const G=F.injectImpl?$r(F.injectImpl):null;ol(t,o,Ht.Default);try{c=t[n]=F.factory(void 0,S,t,o),e.firstCreatePass&&n>=o.directiveStart&&function(t,e,n){const{ngOnChanges:o,ngOnInit:c,ngDoCheck:S}=e.type.prototype;if(o){const F=Pa(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,F),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,F)}c&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,c),S&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,S),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,S))}(n,S[n],e)}finally{null!==G&&$r(G),Un(j),F.resolving=!1,ll()}}return c}function m0(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function y0(t,e){return!(t&Ht.Self||t&Ht.Host&&e)}class Ns{constructor(e,n){this._tNode=e,this._lView=n}get(e,n){return g0(this._tNode,this._lView,e,void 0,n)}}const Fs="__parameters__";function Xo(t,e,n){return Vr(()=>{const o=function(t){return function(...n){if(t){const o=t(...n);for(const c in o)this[c]=o[c]}}}(e);function c(...S){if(this instanceof c)return o.apply(this,S),this;const F=new c(...S);return j.annotation=F,j;function j(G,ie,ce){const Se=G.hasOwnProperty(Fs)?G[Fs]:Object.defineProperty(G,Fs,{value:[]})[Fs];for(;Se.length<=ce;)Se.push(null);return(Se[ce]=Se[ce]||[]).push(F),G}}return n&&(c.prototype=Object.create(n.prototype)),c.prototype.ngMetadataName=t,c.annotationCls=c,c})}class Vn{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Rt({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}function qi(t,e){t.forEach(n=>Array.isArray(n)?qi(n,e):e(n))}function vl(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function es(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const Qa={},ff="__NG_DI_FLAG__",Vs="ngTempTokenPath",vb=/\n/gm,df="__source",hf=Ke({provide:String,useValue:Ke});let Ya;function Hs(t){const e=Ya;return Ya=t,e}function yb(t,e=Ht.Default){if(void 0===Ya)throw new Error("inject() must be called from an injection context");return null===Ya?Mo(t,void 0,e):Ya.get(t,e&Ht.Optional?null:void 0,e)}function mn(t,e=Ht.Default){return(Vo||yb)(Ve(t),e)}function ts(t){const e=[];for(let n=0;n<t.length;n++){const o=Ve(t[n]);if(Array.isArray(o)){if(0===o.length)throw new Error("Arguments array must have arguments.");let c,S=Ht.Default;for(let F=0;F<o.length;F++){const j=o[F],G=bb(j);"number"==typeof G?-1===G?c=j.token:S|=G:c=j}e.push(mn(c,S))}else e.push(mn(o))}return e}function Xa(t,e){return t[ff]=e,t.prototype[ff]=e,t}function bb(t){return t[ff]}function S0(t,e,n,o){const c=t[Vs];throw e[df]&&c.unshift(e[df]),t.message=function(t,e,n,o=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let c=Ge(e);if(Array.isArray(e))c=e.map(Ge).join(" -> ");else if("object"==typeof e){let S=[];for(let F in e)if(e.hasOwnProperty(F)){let j=e[F];S.push(F+":"+("string"==typeof j?JSON.stringify(j):Ge(j)))}c=`{${S.join(", ")}}`}return`${n}${o?"("+o+")":""}[${c}]: ${t.replace(vb,"\n  ")}`}("\n"+t.message,c,n,o),t.ngTokenPath=c,t[Vs]=null,t}const eu=Xa(Xo("Inject",t=>({token:t})),-1),zi=Xa(Xo("Optional"),8),ns=Xa(Xo("SkipSelf"),4),z0="__ngContext__";function Ar(t,e){t[z0]=e}function Mf(t){const e=function(t){return t[z0]||null}(t);return e?Array.isArray(e)?e:e.lView:null}function _l(t){return t.ngOriginalError}function dw(t,...e){t.error(...e)}class is{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e),o=this._findContext(e),c=function(t){return t&&t.ngErrorLogger||dw}(e);c(this._console,"ERROR",e),n&&c(this._console,"ORIGINAL ERROR",n),o&&c(this._console,"ERROR CONTEXT",o)}_findContext(e){return e?function(t){return t.ngDebugContext}(e)||this._findContext(_l(e)):null}_findOriginalError(e){let n=e&&_l(e);for(;n&&_l(n);)n=_l(n);return n||null}}const X0=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(fn))();function $i(t){return t instanceof Function?t():t}var Zr=(()=>((Zr=Zr||{})[Zr.Important=1]="Important",Zr[Zr.DashCase=2]="DashCase",Zr))();function Ef(t,e){return undefined(t,e)}function su(t){const e=t[3];return gt(e)?e[3]:e}function Tf(t){return ip(t[13])}function If(t){return ip(t[4])}function ip(t){for(;null!==t&&!gt(t);)t=t[4];return t}function Ws(t,e,n,o,c){if(null!=o){let S,F=!1;gt(o)?S=o:tt(o)&&(F=!0,o=o[0]);const j=rr(o);0===t&&null!==n?null==c?cp(e,n,j):os(e,n,j,c||null,!0):1===t&&null!==n?os(e,n,j,c||null,!0):2===t?function(t,e,n){const o=El(t,e);o&&function(t,e,n,o){Hn(t)?t.removeChild(e,n,o):e.removeChild(n)}(t,o,e,n)}(e,j,F):3===t&&e.destroyNode(j),null!=S&&function(t,e,n,o,c){const S=n[7];S!==rr(n)&&Ws(e,t,o,S,c);for(let j=10;j<n.length;j++){const G=n[j];au(G[1],G,t,e,o,S)}}(e,t,S,n,c)}}function Rf(t,e,n){return Hn(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function sp(t,e){const n=t[9],o=n.indexOf(e),c=e[3];1024&e[2]&&(e[2]&=-1025,Ua(c,-1)),n.splice(o,1)}function Af(t,e){if(t.length<=10)return;const n=10+e,o=t[n];if(o){const c=o[17];null!==c&&c!==t&&sp(c,o),e>0&&(t[n-1][4]=o[4]);const S=es(t,10+e);!function(t,e){au(t,e,e[11],2,null,null),e[0]=null,e[6]=null}(o[1],o);const F=S[19];null!==F&&F.detachView(S[1]),o[3]=null,o[4]=null,o[2]&=-129}return o}function ap(t,e){if(!(256&e[2])){const n=e[11];Hn(n)&&n.destroyNode&&au(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Df(t[1],t);for(;e;){let n=null;if(tt(e))n=e[13];else{const o=e[10];o&&(n=o)}if(!n){for(;e&&!e[4]&&e!==t;)tt(e)&&Df(e[1],e),e=e[3];null===e&&(e=t),tt(e)&&Df(e[1],e),n=e&&e[4]}e=n}}(e)}}function Df(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let o=0;o<n.length;o+=2){const c=e[n[o]];if(!(c instanceof Qo)){const S=n[o+1];if(Array.isArray(S))for(let F=0;F<S.length;F+=2){const j=c[S[F]],G=S[F+1];try{G.call(j)}finally{}}else try{S.call(c)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,o=e[7];let c=-1;if(null!==n)for(let S=0;S<n.length-1;S+=2)if("string"==typeof n[S]){const F=n[S+1],j="function"==typeof F?F(e):rr(e[F]),G=o[c=n[S+2]],ie=n[S+3];"boolean"==typeof ie?j.removeEventListener(n[S],G,ie):ie>=0?o[c=ie]():o[c=-ie].unsubscribe(),S+=2}else{const F=o[c=n[S+1]];n[S].call(F)}if(null!==o){for(let S=c+1;S<o.length;S++)o[S]();e[7]=null}}(t,e),1===e[1].type&&Hn(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&gt(e[3])){n!==e[3]&&sp(n,e);const o=e[19];null!==o&&o.detachView(t)}}}function up(t,e,n){return function(t,e,n){let o=e;for(;null!==o&&40&o.type;)o=(e=o).parent;if(null===o)return n[0];if(2&o.flags){const c=t.data[o.directiveStart].encapsulation;if(c===Jn.None||c===Jn.Emulated)return null}return zr(o,n)}(t,e.parent,n)}function os(t,e,n,o,c){Hn(t)?t.insertBefore(e,n,o,c):e.insertBefore(n,o,c)}function cp(t,e,n){Hn(t)?t.appendChild(e,n):e.appendChild(n)}function fp(t,e,n,o,c){null!==o?os(t,e,n,o,c):cp(t,e,n)}function El(t,e){return Hn(t)?t.parentNode(e):e.parentNode}let pp=function(t,e,n){return 40&t.type?zr(t,n):null};function Tl(t,e,n,o){const c=up(t,o,e),S=e[11],j=function(t,e,n){return pp(t,e,n)}(o.parent||e[6],o,e);if(null!=c)if(Array.isArray(n))for(let G=0;G<n.length;G++)fp(S,c,n[G],j,!1);else fp(S,c,n,j,!1)}function Il(t,e){if(null!==e){const n=e.type;if(3&n)return zr(e,t);if(4&n)return Of(-1,t[e.index]);if(8&n){const o=e.child;if(null!==o)return Il(t,o);{const c=t[e.index];return gt(c)?Of(-1,c):rr(c)}}if(32&n)return Ef(e,t)()||rr(t[e.index]);{const o=vp(t,e);return null!==o?Array.isArray(o)?o[0]:Il(su(t[16]),o):Il(t,e.next)}}return null}function vp(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Of(t,e){const n=10+t+1;if(n<e.length){const o=e[n],c=o[1].firstChild;if(null!==c)return Il(o,c)}return e[7]}function kf(t,e,n,o,c,S,F){for(;null!=n;){const j=o[n.index],G=n.type;if(F&&0===e&&(j&&Ar(rr(j),o),n.flags|=4),64!=(64&n.flags))if(8&G)kf(t,e,n.child,o,c,S,!1),Ws(e,t,c,j,S);else if(32&G){const ie=Ef(n,o);let ce;for(;ce=ie();)Ws(e,t,c,ce,S);Ws(e,t,c,j,S)}else 16&G?yp(t,e,o,n,c,S):Ws(e,t,c,j,S);n=F?n.projectionNext:n.next}}function au(t,e,n,o,c,S){kf(n,o,t.firstChild,e,c,S,!1)}function yp(t,e,n,o,c,S){const F=n[16],G=F[6].projection[o.projection];if(Array.isArray(G))for(let ie=0;ie<G.length;ie++)Ws(e,t,c,G[ie],S);else kf(t,e,G,F[3],c,S,!0)}function bp(t,e,n){Hn(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Nf(t,e,n){Hn(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function wp(t,e,n){let o=t.length;for(;;){const c=t.indexOf(e,n);if(-1===c)return c;if(0===c||t.charCodeAt(c-1)<=32){const S=e.length;if(c+S===o||t.charCodeAt(c+S)<=32)return c}n=c+1}}const Cp="ng-template";function Bw(t,e,n){let o=0;for(;o<t.length;){let c=t[o++];if(n&&"class"===c){if(c=t[o],-1!==wp(c.toLowerCase(),e,0))return!0}else if(1===c){for(;o<t.length&&"string"==typeof(c=t[o++]);)if(c.toLowerCase()===e)return!0;return!1}}return!1}function Mp(t){return 4===t.type&&t.value!==Cp}function Uw(t,e,n){return e===(4!==t.type||n?t.value:Cp)}function Vw(t,e,n){let o=4;const c=t.attrs||[],S=function(t){for(let e=0;e<t.length;e++)if(qe(t[e]))return e;return t.length}(c);let F=!1;for(let j=0;j<e.length;j++){const G=e[j];if("number"!=typeof G){if(!F)if(4&o){if(o=2|1&o,""!==G&&!Uw(t,G,n)||""===G&&1===e.length){if(bi(o))return!1;F=!0}}else{const ie=8&o?G:e[++j];if(8&o&&null!==t.attrs){if(!Bw(t.attrs,ie,n)){if(bi(o))return!1;F=!0}continue}const Se=Hw(8&o?"class":G,c,Mp(t),n);if(-1===Se){if(bi(o))return!1;F=!0;continue}if(""!==ie){let Ie;Ie=Se>S?"":c[Se+1].toLowerCase();const ke=8&o?Ie:null;if(ke&&-1!==wp(ke,ie,0)||2&o&&ie!==Ie){if(bi(o))return!1;F=!0}}}}else{if(!F&&!bi(o)&&!bi(G))return!1;if(F&&bi(G))continue;F=!1,o=G|1&o}}return bi(o)||F}function bi(t){return 0==(1&t)}function Hw(t,e,n,o){if(null===e)return-1;let c=0;if(o||!n){let S=!1;for(;c<e.length;){const F=e[c];if(F===t)return c;if(3===F||6===F)S=!0;else{if(1===F||2===F){let j=e[++c];for(;"string"==typeof j;)j=e[++c];continue}if(4===F)break;if(0===F){c+=4;continue}}c+=S?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const o=t[n];if("number"==typeof o)return-1;if(o===e)return n;n++}return-1}(e,t)}function _p(t,e,n=!1){for(let o=0;o<e.length;o++)if(Vw(t,e[o],n))return!0;return!1}function Sp(t,e){return t?":not("+e.trim()+")":e}function Gw(t){let e=t[0],n=1,o=2,c="",S=!1;for(;n<t.length;){let F=t[n];if("string"==typeof F)if(2&o){const j=t[++n];c+="["+F+(j.length>0?'="'+j+'"':"")+"]"}else 8&o?c+="."+F:4&o&&(c+=" "+F);else""!==c&&!bi(F)&&(e+=Sp(S,c),c=""),o=F,S=S||!bi(o);n++}return""!==c&&(e+=Sp(S,c)),e}const en={};function xl(t){Ep(bn(),_t(),wr()+t,Ts())}function Ep(t,e,n,o){if(!o)if(3==(3&e[2])){const S=t.preOrderCheckHooks;null!==S&&Ao(e,S,n)}else{const S=t.preOrderHooks;null!==S&&Os(e,S,0,n)}Hi(n)}function Np(t,e){const n=t.contentQueries;if(null!==n)for(let o=0;o<n.length;o+=2){const c=n[o],S=n[o+1];if(-1!==S){const F=t.data[S];za(c),F.contentQueries(2,e[S],S)}}}function uu(t,e,n,o,c,S,F,j,G,ie){const ce=e.blueprint.slice();return ce[0]=c,ce[2]=140|o,Es(ce),ce[3]=ce[15]=t,ce[8]=n,ce[10]=F||t&&t[10],ce[11]=j||t&&t[11],ce[12]=G||t&&t[12]||null,ce[9]=ie||t&&t[9]||null,ce[6]=S,ce[16]=2==e.type?t[16]:ce,ce}function Gs(t,e,n,o,c){let S=t.data[e];if(null===S)S=function(t,e,n,o,c){const S=nl(),F=Zo(),G=t.data[e]=function(t,e,n,o,c,S){return{type:n,index:o,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:S,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,F?S:S&&S.parent,n,e,o,c);return null===t.firstChild&&(t.firstChild=G),null!==S&&(F?null==S.child&&null!==G.parent&&(S.child=G):null===S.next&&(S.next=G)),G}(t,e,n,o,c),$t.lFrame.inI18n&&(S.flags|=64);else if(64&S.type){S.type=n,S.value=o,S.attrs=c;const F=function(){const t=$t.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();S.injectorIndex=null===F?-1:F.injectorIndex}return ti(S,!0),S}function $s(t,e,n,o){if(0===n)return-1;const c=e.length;for(let S=0;S<n;S++)e.push(o),t.blueprint.push(o),t.data.push(null);return c}function lu(t,e,n){As(e);try{const o=t.viewQuery;null!==o&&ed(1,o,n);const c=t.template;null!==c&&Lp(t,e,c,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Np(t,e),t.staticViewQueries&&ed(2,t.viewQuery,n);const S=t.components;null!==S&&function(t,e){for(let n=0;n<e.length;n++)EC(t,e[n])}(e,S)}catch(o){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),o}finally{e[2]&=-5,Ds()}}function Ks(t,e,n,o){const c=e[2];if(256==(256&c))return;As(e);const S=Ts();try{Es(e),function(t){$t.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&Lp(t,e,n,2,o);const F=3==(3&c);if(!S)if(F){const ie=t.preOrderCheckHooks;null!==ie&&Ao(e,ie,null)}else{const ie=t.preOrderHooks;null!==ie&&Os(e,ie,0,null),Wa(e,0)}if(function(t){for(let e=Tf(t);null!==e;e=If(e)){if(!e[2])continue;const n=e[9];for(let o=0;o<n.length;o++){const c=n[o],S=c[3];0==(1024&c[2])&&Ua(S,1),c[2]|=1024}}}(e),function(t){for(let e=Tf(t);null!==e;e=If(e))for(let n=10;n<e.length;n++){const o=e[n],c=o[1];Ba(o)&&Ks(c,o,c.template,o[8])}}(e),null!==t.contentQueries&&Np(t,e),!S)if(F){const ie=t.contentCheckHooks;null!==ie&&Ao(e,ie)}else{const ie=t.contentHooks;null!==ie&&Os(e,ie,1),Wa(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let o=0;o<n.length;o++){const c=n[o];if(c<0)Hi(~c);else{const S=c,F=n[++o],j=n[++o];Kc(F,S),j(2,e[S])}}}finally{Hi(-1)}}(t,e);const j=t.components;null!==j&&function(t,e){for(let n=0;n<e.length;n++)SC(t,e[n])}(e,j);const G=t.viewQuery;if(null!==G&&ed(2,G,o),!S)if(F){const ie=t.viewCheckHooks;null!==ie&&Ao(e,ie)}else{const ie=t.viewHooks;null!==ie&&Os(e,ie,2),Wa(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),S||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ua(e[3],-1))}finally{Ds()}}function oC(t,e,n,o){const c=e[10],S=!Ts(),F=function(t){return 4==(4&t[2])}(e);try{S&&!F&&c.begin&&c.begin(),F&&lu(t,e,o),Ks(t,e,n,o)}finally{S&&!F&&c.end&&c.end()}}function Lp(t,e,n,o,c){const S=wr(),F=2&o;try{Hi(-1),F&&e.length>20&&Ep(t,e,20,Ts()),n(o,c)}finally{Hi(S)}}function Gf(t,e,n){!tl()||(function(t,e,n,o){const c=n.directiveStart,S=n.directiveEnd;t.firstCreatePass||Wr(n,e),Ar(o,e);const F=n.initialInputs;for(let j=c;j<S;j++){const G=t.data[j],ie=Nt(G);ie&&bC(e,n,G);const ce=$a(e,t,j,n);Ar(ce,e),null!==F&&wC(0,j-c,ce,G,0,F),ie&&(kr(n.index,e)[8]=ce)}}(t,e,n,zr(n,e)),128==(128&n.flags)&&function(t,e,n){const o=n.directiveStart,c=n.directiveEnd,F=n.index,j=$t.lFrame.currentDirectiveIndex;try{Hi(F);for(let G=o;G<c;G++){const ie=t.data[G],ce=e[G];qa(G),(null!==ie.hostBindings||0!==ie.hostVars||null!==ie.hostAttrs)&&Wp(ie,ce)}}finally{Hi(-1),qa(j)}}(t,e,n))}function $f(t,e,n=zr){const o=e.localNames;if(null!==o){let c=e.index+1;for(let S=0;S<o.length;S+=2){const F=o[S+1],j=-1===F?n(e,t):t[F];t[c++]=j}}}function Bp(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Pl(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Pl(t,e,n,o,c,S,F,j,G,ie){const ce=20+o,Se=ce+c,Ie=function(t,e){const n=[];for(let o=0;o<e;o++)n.push(o<t?null:en);return n}(ce,Se),ke="function"==typeof ie?ie():ie;return Ie[1]={type:t,blueprint:Ie,template:n,queries:null,viewQuery:j,declTNode:e,data:Ie.slice().fill(null,ce),bindingStartIndex:ce,expandoStartIndex:Se,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof S?S():S,pipeRegistry:"function"==typeof F?F():F,firstChild:null,schemas:G,consts:ke,incompleteFirstPass:!1}}function jp(t,e,n){for(let o in t)if(t.hasOwnProperty(o)){const c=t[o];(n=null===n?{}:n).hasOwnProperty(o)?n[o].push(e,c):n[o]=[e,c]}return n}function Kf(t,e,n,o){let c=!1;if(tl()){const S=function(t,e,n){const o=t.directiveRegistry;let c=null;if(o)for(let S=0;S<o.length;S++){const F=o[S];_p(n,F.selectors,!1)&&(c||(c=[]),hl(Wr(n,e),t,F.type),Nt(F)?(Gp(t,n),c.unshift(F)):c.push(F))}return c}(t,e,n),F=null===o?null:{"":-1};if(null!==S){c=!0,$p(n,t.data.length,S.length);for(let ce=0;ce<S.length;ce++){const Se=S[ce];Se.providersResolver&&Se.providersResolver(Se)}let j=!1,G=!1,ie=$s(t,e,S.length,null);for(let ce=0;ce<S.length;ce++){const Se=S[ce];n.mergedAttrs=Et(n.mergedAttrs,Se.hostAttrs),Kp(t,n,e,ie,Se),yC(ie,Se,F),null!==Se.contentQueries&&(n.flags|=8),(null!==Se.hostBindings||null!==Se.hostAttrs||0!==Se.hostVars)&&(n.flags|=128);const Ie=Se.type.prototype;!j&&(Ie.ngOnChanges||Ie.ngOnInit||Ie.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),j=!0),!G&&(Ie.ngOnChanges||Ie.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),G=!0),ie++}!function(t,e){const o=e.directiveEnd,c=t.data,S=e.attrs,F=[];let j=null,G=null;for(let ie=e.directiveStart;ie<o;ie++){const ce=c[ie],Se=ce.inputs,Ie=null===S||Mp(e)?null:CC(Se,S);F.push(Ie),j=jp(Se,ie,j),G=jp(ce.outputs,ie,G)}null!==j&&(j.hasOwnProperty("class")&&(e.flags|=16),j.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=F,e.inputs=j,e.outputs=G}(t,n)}F&&function(t,e,n){if(e){const o=t.localNames=[];for(let c=0;c<e.length;c+=2){const S=n[e[c+1]];if(null==S)throw new st("301",`Export of name '${e[c+1]}' not found!`);o.push(e[c],S)}}}(n,o,F)}return n.mergedAttrs=Et(n.mergedAttrs,n.attrs),c}function zp(t,e,n,o,c,S){const F=S.hostBindings;if(F){let j=t.hostBindingOpCodes;null===j&&(j=t.hostBindingOpCodes=[]);const G=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(j)!=G&&j.push(G),j.push(o,c,F)}}function Wp(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Gp(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function yC(t,e,n){if(n){if(e.exportAs)for(let o=0;o<e.exportAs.length;o++)n[e.exportAs[o]]=t;Nt(e)&&(n[""]=t)}}function $p(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Kp(t,e,n,o,c){t.data[o]=c;const S=c.factory||(c.factory=lo(c.type)),F=new Qo(S,Nt(c),null);t.blueprint[o]=F,n[o]=F,zp(t,e,0,o,$s(t,n,c.hostVars,en),c)}function bC(t,e,n){const o=zr(e,t),c=Bp(n),S=t[10],F=Ol(t,uu(t,c,null,n.onPush?64:16,o,e,S,S.createRenderer(o,n),null,null));t[e.index]=F}function wC(t,e,n,o,c,S){const F=S[e];if(null!==F){const j=o.setInput;for(let G=0;G<F.length;){const ie=F[G++],ce=F[G++],Se=F[G++];null!==j?o.setInput(n,Se,ie,ce):n[ce]=Se}}}function CC(t,e){let n=null,o=0;for(;o<e.length;){const c=e[o];if(0!==c)if(5!==c){if("number"==typeof c)break;t.hasOwnProperty(c)&&(null===n&&(n=[]),n.push(c,t[c],e[o+1])),o+=2}else o+=2;else o+=4}return n}function Jp(t,e,n,o){return new Array(t,!0,!1,e,null,0,o,n,null,null)}function SC(t,e){const n=kr(e,t);if(Ba(n)){const o=n[1];80&n[2]?Ks(o,n,o.template,n[8]):n[5]>0&&Zf(n)}}function Zf(t){for(let o=Tf(t);null!==o;o=If(o))for(let c=10;c<o.length;c++){const S=o[c];if(1024&S[2]){const F=S[1];Ks(F,S,F.template,S[8])}else S[5]>0&&Zf(S)}const n=t[1].components;if(null!==n)for(let o=0;o<n.length;o++){const c=kr(n[o],t);Ba(c)&&c[5]>0&&Zf(c)}}function EC(t,e){const n=kr(e,t),o=n[1];(function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(o,n),lu(o,n,n[8])}function Ol(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Qf(t){for(;t;){t[2]|=64;const e=su(t);if(Pt(t)&&!e)return t;t=e}return null}function Xf(t,e,n){const o=e[10];o.begin&&o.begin();try{Ks(t,e,t.template,n)}catch(c){throw eg(e,c),c}finally{o.end&&o.end()}}function Zp(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],o=Mf(n),c=o[1];oC(c,o,c.template,n)}}(t[8])}function ed(t,e,n){za(0),e(t,n)}const AC=(()=>Promise.resolve(null))();function Qp(t){return t[7]||(t[7]=[])}function Yp(t){return t.cleanup||(t.cleanup=[])}function eg(t,e){const n=t[9],o=n?n.get(is,null):null;o&&o.handleError(e)}function tg(t,e,n,o,c){for(let S=0;S<n.length;){const F=n[S++],j=n[S++],G=e[F],ie=t.data[F];null!==ie.setInput?ie.setInput(G,c,o,j):G[j]=c}}function kl(t,e,n){let o=n?t.styles:null,c=n?t.classes:null,S=0;if(null!==e)for(let F=0;F<e.length;F++){const j=e[F];"number"==typeof j?S=j:1==S?c=ut(c,j):2==S&&(o=ut(o,j+": "+e[++F]+";"))}n?t.styles=o:t.stylesWithoutHost=o,n?t.classes=c:t.classesWithoutHost=c}const Js=new Vn("INJECTOR",-1);class ng{get(e,n=Qa){if(n===Qa){const o=new Error(`NullInjectorError: No provider for ${Ge(e)}!`);throw o.name="NullInjectorError",o}return n}}const cu=new Vn("Set Injector scope."),fu={},OC={};let td;function rg(){return void 0===td&&(td=new ng),td}function ig(t,e=null,n=null,o){return new NC(t,n,e||rg(),o)}class NC{constructor(e,n,o,c=null){this.parent=o,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const S=[];n&&qi(n,j=>this.processProvider(j,e,n)),qi([e],j=>this.processInjectorType(j,[],S)),this.records.set(Js,Zs(void 0,this));const F=this.records.get(cu);this.scope=null!=F?F.value:null,this.source=c||("object"==typeof e?null:Ge(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,n=Qa,o=Ht.Default){this.assertNotDestroyed();const c=Hs(this),S=$r(void 0);try{if(!(o&Ht.SkipSelf)){let j=this.records.get(e);if(void 0===j){const G=function(t){return"function"==typeof t||"object"==typeof t&&t instanceof Vn}(e)&&nn(e);j=G&&this.injectableDefInScope(G)?Zs(nd(e),fu):null,this.records.set(e,j)}if(null!=j)return this.hydrate(e,j)}return(o&Ht.Self?rg():this.parent).get(e,n=o&Ht.Optional&&n===Qa?null:n)}catch(F){if("NullInjectorError"===F.name){if((F[Vs]=F[Vs]||[]).unshift(Ge(e)),c)throw F;return S0(F,e,"R3InjectorError",this.source)}throw F}finally{$r(S),Hs(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((o,c)=>e.push(Ge(c))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,n,o){if(!(e=Ve(e)))return!1;let c=Ni(e);const S=null==c&&e.ngModule||void 0,F=void 0===S?e:S,j=-1!==o.indexOf(F);if(void 0!==S&&(c=Ni(S)),null==c)return!1;if(null!=c.imports&&!j){let ce;o.push(F);try{qi(c.imports,Se=>{this.processInjectorType(Se,n,o)&&(void 0===ce&&(ce=[]),ce.push(Se))})}finally{}if(void 0!==ce)for(let Se=0;Se<ce.length;Se++){const{ngModule:Ie,providers:ke}=ce[Se];qi(ke,Fe=>this.processProvider(Fe,Ie,ke||Pn))}}this.injectorDefTypes.add(F);const G=lo(F)||(()=>new F);this.records.set(F,Zs(G,fu));const ie=c.providers;if(null!=ie&&!j){const ce=e;qi(ie,Se=>this.processProvider(Se,ce,ie))}return void 0!==S&&void 0!==e.providers}processProvider(e,n,o){let c=Qs(e=Ve(e))?e:Ve(e&&e.provide);const S=function(t,e,n){return sg(t)?Zs(void 0,t.useValue):Zs(function(t,e,n){let o;if(Qs(t)){const c=Ve(t);return lo(c)||nd(c)}if(sg(t))o=()=>Ve(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))o=()=>t.useFactory(...ts(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))o=()=>mn(Ve(t.useExisting));else{const c=Ve(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return lo(c)||nd(c);o=()=>new c(...ts(t.deps))}return o}(t),fu)}(e);if(Qs(e)||!0!==e.multi)this.records.get(c);else{let F=this.records.get(c);F||(F=Zs(void 0,fu,!0),F.factory=()=>ts(F.multi),this.records.set(c,F)),c=e,F.multi.push(e)}this.records.set(c,S)}hydrate(e,n){return n.value===fu&&(n.value=OC,n.value=n.factory()),"object"==typeof n.value&&n.value&&function(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this.onDestroy.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=Ve(e.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function nd(t){const e=nn(t),n=null!==e?e.factory:lo(t);if(null!==n)return n;if(t instanceof Vn)throw new Error(`Token ${Ge(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const o=function(t,e){const n=[];for(let o=0;o<t;o++)n.push(e);return n}(e,"?");throw new Error(`Can't resolve all parameters for ${Ge(t)}: (${o.join(", ")}).`)}const n=function(t){const e=t&&(t[wo]||t[ps]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Zs(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function sg(t){return null!==t&&"object"==typeof t&&hf in t}function Qs(t){return"function"==typeof t}const ag=function(t,e,n){return function(t,e=null,n=null,o){const c=ig(t,e,n,o);return c._resolveInjectorDefTypes(),c}({name:n},e,t,n)};class Fn{static create(e,n){return Array.isArray(e)?ag(e,n,""):ag(e.providers,e.parent,e.name||"")}}function n2(t,e){or(Mf(t)[1],ir())}Fn.THROW_IF_NOT_FOUND=Qa,Fn.NULL=new ng,Fn.\u0275prov=Rt({token:Fn,providedIn:"any",factory:()=>mn(Js)}),Fn.__NG_ELEMENT_ID__=-1;let Nl=null;function Ys(){if(!Nl){const t=fn.Symbol;if(t&&t.iterator)Nl=t.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<e.length;++n){const o=e[n];"entries"!==o&&"size"!==o&&Map.prototype[o]===Map.prototype.entries&&(Nl=o)}}}return Nl}function hu(t){return!!ld(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ys()in t)}function ld(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Fl(t,e,n,o,c,S,F,j){const G=_t(),ie=bn(),ce=t+20,Se=ie.firstCreatePass?function(t,e,n,o,c,S,F,j,G){const ie=e.consts,ce=Gs(e,t,4,F||null,Ui(ie,j));Kf(e,n,ce,Ui(ie,G)),or(e,ce);const Se=ce.tViews=Pl(2,ce,o,c,S,e.directiveRegistry,e.pipeRegistry,null,e.schemas,ie);return null!==e.queries&&(e.queries.template(e,ce),Se.queries=e.queries.embeddedTView(ce)),ce}(ce,ie,G,e,n,o,c,S,F):ie.data[ce];ti(Se,!1);const Ie=G[11].createComment("");Tl(ie,G,Ie,Se),Ar(Ie,G),Ol(G,G[ce]=Jp(Ie,G,Ie,Se)),bt(Se)&&Gf(ie,G,Se),null!=F&&$f(G,Se,j)}function pn(t,e=Ht.Default){const n=_t();return null===n?mn(t,e):g0(ir(),n,Ve(t),e)}function gu(t,e,n){const o=_t();return function(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}(o,$t.lFrame.bindingIndex++,e)&&function(t,e,n,o,c,S,F,j){const G=zr(e,n);let ce,ie=e.inputs;!j&&null!=ie&&(ce=ie[o])?(tg(t,n,ce,o,c),vt(e)&&function(t,e){const n=kr(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(o=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(o),c=null!=F?F(c,e.value||"",o):c,Hn(S)?S.setProperty(G,o,c):rt(o)||(G.setProperty?G.setProperty(o,c):G[o]=c))}(bn(),function(){const t=$t.lFrame;return Fa(t.tView,t.selectedIndex)}(),o,t,e,o[11],n,!1),gu}function pd(t,e,n,o,c){const F=c?"class":"style";tg(t,n,e.inputs[F],F,o)}function Zi(t,e,n,o){const c=_t(),S=bn(),F=20+t,j=c[11],G=c[F]=Rf(j,e,$t.lFrame.currentNamespace),ie=S.firstCreatePass?function(t,e,n,o,c,S,F){const j=e.consts,ie=Gs(e,t,2,c,Ui(j,S));return Kf(e,n,ie,Ui(j,F)),null!==ie.attrs&&kl(ie,ie.attrs,!1),null!==ie.mergedAttrs&&kl(ie,ie.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,ie),ie}(F,S,c,0,e,n,o):S.data[F];ti(ie,!0);const ce=ie.mergedAttrs;null!==ce&&ht(j,G,ce);const Se=ie.classes;null!==Se&&Nf(j,G,Se);const Ie=ie.styles;null!==Ie&&bp(j,G,Ie),64!=(64&ie.flags)&&Tl(S,c,G,ie),0===$t.lFrame.elementDepthCount&&Ar(G,c),$t.lFrame.elementDepthCount++,bt(ie)&&(Gf(S,c,ie),function(t,e,n){if(yt(e)){const c=e.directiveEnd;for(let S=e.directiveStart;S<c;S++){const F=t.data[S];F.contentQueries&&F.contentQueries(1,n[S],S)}}}(S,ie,c)),null!==o&&$f(c,ie)}function Qi(){let t=ir();Zo()?$t.lFrame.isParent=!1:(t=t.parent,ti(t,!1));const e=t;$t.lFrame.elementDepthCount--;const n=bn();n.firstCreatePass&&(or(n,t),yt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&pd(n,e,_t(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&pd(n,e,_t(),e.stylesWithoutHost,!1)}function gd(){return _t()}function vd(t){return!!t&&"function"==typeof t.then}const Qg=function(t){return!!t&&"function"==typeof t.subscribe};function Ul(t,e,n,o){const c=_t(),S=bn(),F=ir();return function(t,e,n,o,c,S,F,j){const G=bt(o),ce=t.firstCreatePass&&Yp(t),Se=e[8],Ie=Qp(e);let ke=!0;if(3&o.type||j){const Je=zr(o,e),St=j?j(Je):Je,wt=Ie.length,Lt=j?Wt=>j(rr(Wt[o.index])):o.index;if(Hn(n)){let Wt=null;if(!j&&G&&(Wt=function(t,e,n,o){const c=t.cleanup;if(null!=c)for(let S=0;S<c.length-1;S+=2){const F=c[S];if(F===n&&c[S+1]===o){const j=e[7],G=c[S+2];return j.length>G?j[G]:null}"string"==typeof F&&(S+=2)}return null}(t,e,c,o.index)),null!==Wt)(Wt.__ngLastListenerFn__||Wt).__ngNextListenerFn__=S,Wt.__ngLastListenerFn__=S,ke=!1;else{S=md(o,e,Se,S,!1);const cn=n.listen(St,c,S);Ie.push(S,cn),ce&&ce.push(c,Lt,wt,wt+1)}}else S=md(o,e,Se,S,!0),St.addEventListener(c,S,F),Ie.push(S),ce&&ce.push(c,Lt,wt,F)}else S=md(o,e,Se,S,!1);const Fe=o.outputs;let mt;if(ke&&null!==Fe&&(mt=Fe[c])){const Je=mt.length;if(Je)for(let St=0;St<Je;St+=2){const yr=e[mt[St]][mt[St+1]].subscribe(S),fi=Ie.length;Ie.push(S,yr),ce&&ce.push(c,o.index,fi,-(fi+1))}}}(S,c,c[11],F,t,e,!!n,o),Ul}function ev(t,e,n,o){try{return!1!==n(o)}catch(c){return eg(t,c),!1}}function md(t,e,n,o,c){return function S(F){if(F===Function)return o;const j=2&t.flags?kr(t.index,e):e;0==(32&e[2])&&Qf(j);let G=ev(e,0,o,F),ie=S.__ngNextListenerFn__;for(;ie;)G=ev(e,0,ie,F)&&G,ie=ie.__ngNextListenerFn__;return c&&!1===G&&(F.preventDefault(),F.returnValue=!1),G}}function Vl(t=1){return function(t){return($t.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,$t.lFrame.contextLView))[8]}(t)}function mu(t,e=""){const n=_t(),o=bn(),c=t+20,S=o.firstCreatePass?Gs(o,c,1,e,null):o.data[c],F=n[c]=function(t,e){return Hn(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Tl(o,n,F,S),ti(S,!1)}const as=void 0;var xM=["en",[["a","p"],["AM","PM"],as],[["AM","PM"],as,as],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],as,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],as,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",as,"{1} 'at' {0}",as],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ca={};function Gv(t){return t in ca||(ca[t]=fn.ng&&fn.ng.common&&fn.ng.common.locales&&fn.ng.common.locales[t]),ca[t]}var Ot=(()=>((Ot=Ot||{})[Ot.LocaleId=0]="LocaleId",Ot[Ot.DayPeriodsFormat=1]="DayPeriodsFormat",Ot[Ot.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ot[Ot.DaysFormat=3]="DaysFormat",Ot[Ot.DaysStandalone=4]="DaysStandalone",Ot[Ot.MonthsFormat=5]="MonthsFormat",Ot[Ot.MonthsStandalone=6]="MonthsStandalone",Ot[Ot.Eras=7]="Eras",Ot[Ot.FirstDayOfWeek=8]="FirstDayOfWeek",Ot[Ot.WeekendRange=9]="WeekendRange",Ot[Ot.DateFormat=10]="DateFormat",Ot[Ot.TimeFormat=11]="TimeFormat",Ot[Ot.DateTimeFormat=12]="DateTimeFormat",Ot[Ot.NumberSymbols=13]="NumberSymbols",Ot[Ot.NumberFormats=14]="NumberFormats",Ot[Ot.CurrencyCode=15]="CurrencyCode",Ot[Ot.CurrencySymbol=16]="CurrencySymbol",Ot[Ot.CurrencyName=17]="CurrencyName",Ot[Ot.Currencies=18]="Currencies",Ot[Ot.Directionality=19]="Directionality",Ot[Ot.PluralCase=20]="PluralCase",Ot[Ot.ExtraData=21]="ExtraData",Ot))();const jl="en-US";let $v=jl;function Cd(t){Jt(t,"Expected localeId to be defined"),"string"==typeof t&&($v=t.toLowerCase().replace(/_/g,"-"))}class ym{}const wm="ngComponent";class R_{resolveComponentFactory(e){throw function(t){const e=Error(`No component factory found for ${Ge(t)}. Did you add it to @NgModule.entryComponents?`);return e[wm]=t,e}(e)}}class us{}function $l(...t){}function da(t,e){return new Ei(zr(t,e))}us.NULL=new R_;const P_=function(){return da(ir(),_t())};let Ei=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=P_,t})();class Kl{}let Rd=(()=>{class t{}return t.\u0275prov=Rt({token:t,providedIn:"root",factory:()=>null}),t})();class Ad{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const _m=new Ad("12.2.2");class Sm{constructor(){}supports(e){return hu(e)}create(e){return new B_(e)}}const F_=(t,e)=>e;class B_{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||F_}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,o=this._removalsHead,c=0,S=null;for(;n||o;){const F=!o||n&&n.currentIndex<Tm(o,c,S)?n:o,j=Tm(F,c,S),G=F.currentIndex;if(F===o)c--,o=o._nextRemoved;else if(n=n._next,null==F.previousIndex)c++;else{S||(S=[]);const ie=j-c,ce=G-c;if(ie!=ce){for(let Ie=0;Ie<ie;Ie++){const ke=Ie<S.length?S[Ie]:S[Ie]=0,Fe=ke+Ie;ce<=Fe&&Fe<ie&&(S[Ie]=ke+1)}S[F.previousIndex]=ce-ie}}j!==G&&e(F,j,G)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!hu(e))throw new Error(`Error trying to diff '${Ge(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let c,S,F,n=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(let j=0;j<this.length;j++)S=e[j],F=this._trackByFn(j,S),null!==n&&Object.is(n.trackById,F)?(o&&(n=this._verifyReinsertion(n,S,F,j)),Object.is(n.item,S)||this._addIdentityChange(n,S)):(n=this._mismatch(n,S,F,j),o=!0),n=n._next}else c=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Ys()]();let o;for(;!(o=n.next()).done;)e(o.value)}}(e,j=>{F=this._trackByFn(c,j),null!==n&&Object.is(n.trackById,F)?(o&&(n=this._verifyReinsertion(n,j,F,c)),Object.is(n.item,j)||this._addIdentityChange(n,j)):(n=this._mismatch(n,j,F,c),o=!0),n=n._next,c++}),this.length=c;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,o,c){let S;return null===e?S=this._itTail:(S=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,S,c)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(o,c))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,S,c)):e=this._addAfter(new U_(n,o),S,c),e}_verifyReinsertion(e,n,o,c){let S=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==S?e=this._reinsertAfter(S,e._prev,c):e.currentIndex!=c&&(e.currentIndex=c,this._addToMoves(e,c)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const c=e._prevRemoved,S=e._nextRemoved;return null===c?this._removalsHead=S:c._nextRemoved=S,null===S?this._removalsTail=c:S._prevRemoved=c,this._insertAfter(e,n,o),this._addToMoves(e,o),e}_moveAfter(e,n,o){return this._unlink(e),this._insertAfter(e,n,o),this._addToMoves(e,o),e}_addAfter(e,n,o){return this._insertAfter(e,n,o),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,o){const c=null===n?this._itHead:n._next;return e._next=c,e._prev=n,null===c?this._itTail=e:c._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new Em),this._linkedRecords.put(e),e.currentIndex=o,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,o=e._next;return null===n?this._itHead=o:n._next=o,null===o?this._itTail=n:o._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Em),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class U_{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class V_{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===n||n<=o.currentIndex)&&Object.is(o.trackById,e))return o;return null}remove(e){const n=e._prevDup,o=e._nextDup;return null===n?this._head=o:n._nextDup=o,null===o?this._tail=n:o._prevDup=n,null===this._head}}class Em{constructor(){this.map=new Map}put(e){const n=e.trackById;let o=this.map.get(n);o||(o=new V_,this.map.set(n,o)),o.add(e)}get(e,n){const c=this.map.get(e);return c?c.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Tm(t,e,n){const o=t.previousIndex;if(null===o)return o;let c=0;return n&&o<n.length&&(c=n[o]),o+e+c}class Im{constructor(){}supports(e){return e instanceof Map||ld(e)}create(){return new H_}}class H_{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||ld(e)))throw new Error(`Error trying to diff '${Ge(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(o,c)=>{if(n&&n.key===c)this._maybeAddToChanges(n,o),this._appendAfter=n,n=n._next;else{const S=this._getOrCreateRecordForKey(c,o);n=this._insertBeforeOrAppend(n,S)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let o=n;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const o=e._prev;return n._next=e,n._prev=o,e._prev=n,o&&(o._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const c=this._records.get(e);this._maybeAddToChanges(c,n);const S=c._prev,F=c._next;return S&&(S._next=F),F&&(F._prev=S),c._next=null,c._prev=null,c}const o=new j_(e);return this._records.set(e,o),o.currentValue=n,this._addToAdditions(o),o}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(o=>n(e[o],o))}}class j_{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function xm(){return new Mu([new Sm])}let Mu=(()=>{class t{constructor(n){this.factories=n}static create(n,o){if(null!=o){const c=o.factories.slice();n=n.concat(c)}return new t(n)}static extend(n){return{provide:t,useFactory:o=>t.create(n,o||xm()),deps:[[t,new ns,new zi]]}}find(n){const o=this.factories.find(c=>c.supports(n));if(null!=o)return o;throw new Error(`Cannot find a differ supporting object '${n}' of type '${function(t){return t.name||typeof t}(n)}'`)}}return t.\u0275prov=Rt({token:t,providedIn:"root",factory:xm}),t})();function Rm(){return new ha([new Im])}let ha=(()=>{class t{constructor(n){this.factories=n}static create(n,o){if(o){const c=o.factories.slice();n=n.concat(c)}return new t(n)}static extend(n){return{provide:t,useFactory:o=>t.create(n,o||Rm()),deps:[[t,new ns,new zi]]}}find(n){const o=this.factories.find(c=>c.supports(n));if(o)return o;throw new Error(`Cannot find a differ supporting object '${n}'`)}}return t.\u0275prov=Rt({token:t,providedIn:"root",factory:Rm}),t})();function Jl(t,e,n,o,c=!1){for(;null!==n;){const S=e[n.index];if(null!==S&&o.push(rr(S)),gt(S))for(let j=10;j<S.length;j++){const G=S[j],ie=G[1].firstChild;null!==ie&&Jl(G[1],G,ie,o)}const F=n.type;if(8&F)Jl(t,e,n.child,o);else if(32&F){const j=Ef(n,e);let G;for(;G=j();)o.push(G)}else if(16&F){const j=vp(e,n);if(Array.isArray(j))o.push(...j);else{const G=su(e[16]);Jl(G[1],G,j,o,!0)}}n=c?n.projectionNext:n.next}return o}class _u{constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,n=e[1];return Jl(n,e,n.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(gt(e)){const n=e[8],o=n?n.indexOf(this):-1;o>-1&&(Af(e,o),es(n,o))}this._attachedToViewContainer=!1}ap(this._lView[1],this._lView)}onDestroy(e){!function(t,e,n,o){const c=Qp(e);null===n?c.push(o):(c.push(n),t.firstCreatePass&&Yp(t).push(o,c.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){Qf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Xf(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Is(!0);try{Xf(t,e,n)}finally{Is(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(t,e){au(t,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class z_ extends _u{constructor(e){super(e),this._view=e}detectChanges(){Zp(this._view)}checkNoChanges(){!function(t){Is(!0);try{Zp(t)}finally{Is(!1)}}(this._view)}get context(){return null}}const Z_=[new Im],Y_=new Mu([new Sm]),X_=new ha(Z_),t3=function(){return function(t,e){return 4&t.type?new r3(e,t,da(t,e)):null}(ir(),_t())};let vo=(()=>{class t{}return t.__NG_ELEMENT_ID__=t3,t})();const n3=vo,r3=class extends n3{constructor(e,n,o){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=o}createEmbeddedView(e){const n=this._declarationTContainer.tViews,o=uu(this._declarationLView,n,e,16,null,n.declTNode,null,null,null,null);o[17]=this._declarationLView[this._declarationTContainer.index];const S=this._declarationLView[19];return null!==S&&(o[19]=S.createEmbeddedView(n)),lu(n,o,e),new _u(o)}};class ls{}const a3=function(){return function(t,e){let n;const o=e[t.index];if(gt(o))n=o;else{let c;if(8&t.type)c=rr(o);else{const S=e[11];c=S.createComment("");const F=zr(t,e);os(S,El(S,F),c,function(t,e){return Hn(t)?t.nextSibling(e):e.nextSibling}(S,F),!1)}e[t.index]=n=Jp(o,e,c,t),Ol(e,n)}return new Am(n,t,e)}(ir(),_t())};let eo=(()=>{class t{}return t.__NG_ELEMENT_ID__=a3,t})();const l3=eo,Am=class extends l3{constructor(e,n,o){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=o}get element(){return da(this._hostTNode,this._hostLView)}get injector(){return new Ns(this._hostTNode,this._hostLView)}get parentInjector(){const e=dl(this._hostTNode,this._hostLView);if(Bt(e)){const n=rn(e,this._hostLView),o=At(e);return new Ns(n[1].data[o+8],n)}return new Ns(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=Dm(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,o){const c=e.createEmbeddedView(n||{});return this.insert(c,o),c}createComponent(e,n,o,c,S){const F=o||this.parentInjector;if(!S&&null==e.ngModule&&F){const G=F.get(ls,null);G&&(S=G)}const j=e.create(F,c,void 0,S);return this.insert(j.hostView,n),j}insert(e,n){const o=e._lView,c=o[1];if(function(t){return gt(t[3])}(o)){const ce=this.indexOf(e);if(-1!==ce)this.detach(ce);else{const Se=o[3],Ie=new Am(Se,Se[6],Se[3]);Ie.detach(Ie.indexOf(e))}}const S=this._adjustIndex(n),F=this._lContainer;!function(t,e,n,o){const c=10+o,S=n.length;o>0&&(n[c-1][4]=e),o<S-10?(e[4]=n[c],vl(n,10+o,e)):(n.push(e),e[4]=null),e[3]=n;const F=e[17];null!==F&&n!==F&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(F,e);const j=e[19];null!==j&&j.insertView(t),e[2]|=128}(c,o,F,S);const j=Of(S,F),G=o[11],ie=El(G,F[7]);return null!==ie&&function(t,e,n,o,c,S){o[0]=c,o[6]=e,au(t,o,n,1,c,S)}(c,F[6],G,o,ie,j),e.attachToViewContainerRef(),vl(Dd(F),S,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=Dm(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),o=Af(this._lContainer,n);o&&(es(Dd(this._lContainer),n),ap(o[1],o))}detach(e){const n=this._adjustIndex(e,-1),o=Af(this._lContainer,n);return o&&null!=es(Dd(this._lContainer),n)?new _u(o):null}_adjustIndex(e,n=0){return null==e?this.length+n:e}};function Dm(t){return t[8]}function Dd(t){return t[8]||(t[8]=[])}const ma={};class Ym extends us{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=cr(e);return new ey(n,this.ngModule)}}function Xm(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const oS=new Vn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>X0});class ey extends ym{constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function(t){return t.map(Gw).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return Xm(this.componentDef.inputs)}get outputs(){return Xm(this.componentDef.outputs)}create(e,n,o,c){const S=(c=c||this.ngModule)?function(t,e){return{get:(n,o,c)=>{const S=t.get(n,ma,c);return S!==ma||o===ma?S:e.get(n,o,c)}}}(e,c.injector):e,F=S.get(Kl,Ko),j=S.get(Rd,null),G=F.createRenderer(null,this.componentDef),ie=this.componentDef.selectors[0][0]||"div",ce=o?function(t,e,n){if(Hn(t))return t.selectRootElement(e,n===Jn.ShadowDom);let o="string"==typeof e?t.querySelector(e):e;return o.textContent="",o}(G,o,this.componentDef.encapsulation):Rf(F.createRenderer(null,this.componentDef),ie,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(ie)),Se=this.componentDef.onPush?576:528,Ie=function(t,e){return{components:[],scheduler:t||X0,clean:AC,playerHandler:e||null,flags:0}}(),ke=Pl(0,null,null,1,0,null,null,null,null,null),Fe=uu(null,ke,Ie,Se,null,null,F,G,j,S);let mt,Je;As(Fe);try{const St=function(t,e,n,o,c,S){const F=n[1];n[20]=t;const G=Gs(F,20,2,"#host",null),ie=G.mergedAttrs=e.hostAttrs;null!==ie&&(kl(G,ie,!0),null!==t&&(ht(c,t,ie),null!==G.classes&&Nf(c,t,G.classes),null!==G.styles&&bp(c,t,G.styles)));const ce=o.createRenderer(t,e),Se=uu(n,Bp(e),null,e.onPush?64:16,n[20],G,o,ce,S||null,null);return F.firstCreatePass&&(hl(Wr(G,n),F,e.type),Gp(F,G),$p(G,n.length,1)),Ol(n,Se),n[20]=Se}(ce,this.componentDef,Fe,F,G);if(ce)if(o)ht(G,ce,["ng-version",_m.full]);else{const{attrs:wt,classes:Lt}=function(t){const e=[],n=[];let o=1,c=2;for(;o<t.length;){let S=t[o];if("string"==typeof S)2===c?""!==S&&e.push(S,t[++o]):8===c&&n.push(S);else{if(!bi(c))break;c=S}o++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);wt&&ht(G,ce,wt),Lt&&Lt.length>0&&Nf(G,ce,Lt.join(" "))}if(Je=Fa(ke,20),void 0!==n){const wt=Je.projection=[];for(let Lt=0;Lt<this.ngContentSelectors.length;Lt++){const Wt=n[Lt];wt.push(null!=Wt?Array.from(Wt):null)}}mt=function(t,e,n,o,c){const S=n[1],F=function(t,e,n){const o=ir();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Kp(t,o,e,$s(t,e,1,null),n));const c=$a(e,t,o.directiveStart,o);Ar(c,e);const S=zr(o,e);return S&&Ar(S,e),c}(S,n,e);if(o.components.push(F),t[8]=F,c&&c.forEach(G=>G(F,e)),e.contentQueries){const G=ir();e.contentQueries(1,F,G.directiveStart)}const j=ir();return!S.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Hi(j.index),zp(n[1],j,0,j.directiveStart,j.directiveEnd,e),Wp(e,F)),F}(St,this.componentDef,Fe,Ie,[n2]),lu(ke,Fe,null)}finally{Ds()}return new uS(this.componentType,mt,da(Je,Fe),Fe,Je)}}class uS extends class{}{constructor(e,n,o,c,S){super(),this.location=o,this._rootLView=c,this._tNode=S,this.instance=n,this.hostView=this.changeDetectorRef=new z_(c),this.componentType=e}get injector(){return new Ns(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const ya=new Map;class fS extends ls{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ym(this);const o=fr(e),c=function(t){return t[jo]||null}(e);c&&Cd(c),this._bootstrapComponents=$i(o.bootstrap),this._r3Injector=ig(e,n,[{provide:ls,useValue:this},{provide:us,useValue:this.componentFactoryResolver}],Ge(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,n=Fn.THROW_IF_NOT_FOUND,o=Ht.Default){return e===Fn||e===ls||e===Js?this:this._r3Injector.get(e,n,o)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class zd extends class{}{constructor(e){super(),this.moduleType=e,null!==fr(e)&&function(t){const e=new Set;!function n(o){const c=fr(o,!0),S=c.id;null!==S&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${Ge(e)} vs ${Ge(e.name)}`)}(S,ya.get(S),o),ya.set(S,o));const F=$i(c.imports);for(const j of F)e.has(j)||(e.add(j),n(j))}(t)}(e)}create(e){return new fS(this.moduleType,e)}}function Wd(t){return e=>{setTimeout(t,void 0,e)}}const mo=class extends r{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,o){var c,S,F;let j=e,G=n||(()=>null),ie=o;if(e&&"object"==typeof e){const Se=e;j=null===(c=Se.next)||void 0===c?void 0:c.bind(Se),G=null===(S=Se.error)||void 0===S?void 0:S.bind(Se),ie=null===(F=Se.complete)||void 0===F?void 0:F.bind(Se)}this.__isAsync&&(G=Wd(G),j&&(j=Wd(j)),ie&&(ie=Wd(ie)));const ce=super.subscribe({next:j,error:G,complete:ie});return e instanceof g&&e.add(ce),ce}};Symbol;const ic=new Vn("Application Initializer");let wa=(()=>{class t{constructor(n){this.appInits=n,this.resolve=$l,this.reject=$l,this.initialized=!1,this.done=!1,this.donePromise=new Promise((o,c)=>{this.resolve=o,this.reject=c})}runInitializers(){if(this.initialized)return;const n=[],o=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const S=this.appInits[c]();if(vd(S))n.push(S);else if(Qg(S)){const F=new Promise((j,G)=>{S.subscribe({complete:j,error:G})});n.push(F)}}Promise.all(n).then(()=>{o()}).catch(c=>{this.reject(c)}),0===n.length&&o(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(mn(ic,8))},t.\u0275prov=Rt({token:t,factory:t.\u0275fac}),t})();const Nu=new Vn("AppId"),vE={provide:Nu,useFactory:function(){return`${nh()}${nh()}${nh()}`},deps:[]};function nh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ay=new Vn("Platform Initializer"),rh=new Vn("Platform ID"),mE=new Vn("appBootstrapListener");let ih=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Rt({token:t,factory:t.\u0275fac}),t})();const No=new Vn("LocaleId"),Dy=new Vn("DefaultCurrencyCode");class bE{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}const oh=function(t){return new zd(t)},wE=oh,CE=function(t){return Promise.resolve(oh(t))},Py=function(t){const e=oh(t),o=$i(fr(t).declarations).reduce((c,S)=>{const F=cr(S);return F&&c.push(new ey(F)),c},[]);return new bE(e,o)},ME=Py,_E=function(t){return Promise.resolve(Py(t))};let sc=(()=>{class t{constructor(){this.compileModuleSync=wE,this.compileModuleAsync=CE,this.compileModuleAndAllComponentsSync=ME,this.compileModuleAndAllComponentsAsync=_E}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Rt({token:t,factory:t.\u0275fac}),t})();const TE=(()=>Promise.resolve(0))();function sh(t){"undefined"==typeof Zone?TE.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Ir{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new mo(!1),this.onMicrotaskEmpty=new mo(!1),this.onStable=new mo(!1),this.onError=new mo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!o&&n,c.shouldCoalesceRunChangeDetection=o,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function(){let t=fn.requestAnimationFrame,e=fn.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const o=e[Zone.__symbol__("OriginalDelegate")];o&&(e=o)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(fn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,uh(t),t.isCheckStableRunning=!0,ah(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),uh(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,o,c,S,F,j)=>{try{return Oy(t),n.invokeTask(c,S,F,j)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===S.type||t.shouldCoalesceRunChangeDetection)&&e(),ky(t)}},onInvoke:(n,o,c,S,F,j,G)=>{try{return Oy(t),n.invoke(c,S,F,j,G)}finally{t.shouldCoalesceRunChangeDetection&&e(),ky(t)}},onHasTask:(n,o,c,S)=>{n.hasTask(c,S),o===c&&("microTask"==S.change?(t._hasPendingMicrotasks=S.microTask,uh(t),ah(t)):"macroTask"==S.change&&(t.hasPendingMacrotasks=S.macroTask))},onHandleError:(n,o,c,S)=>(n.handleError(c,S),t.runOutsideAngular(()=>t.onError.emit(S)),!1)})}(c)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ir.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ir.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,n,o){return this._inner.run(e,n,o)}runTask(e,n,o,c){const S=this._inner,F=S.scheduleEventTask("NgZoneEvent: "+c,e,xE,$l,$l);try{return S.runTask(F,n,o)}finally{S.cancelTask(F)}}runGuarded(e,n,o){return this._inner.runGuarded(e,n,o)}runOutsideAngular(e){return this._outer.run(e)}}const xE={};function ah(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function uh(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Oy(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ky(t){t._nesting--,ah(t)}class DE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new mo,this.onMicrotaskEmpty=new mo,this.onStable=new mo,this.onError=new mo}run(e,n,o){return e.apply(n,o)}runGuarded(e,n,o){return e.apply(n,o)}runOutsideAngular(e){return e()}runTask(e,n,o,c){return e.apply(n,o)}}let lh=(()=>{class t{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ir.assertNotInAngularZone(),sh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())sh(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(n)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,o,c){let S=-1;o&&o>0&&(S=setTimeout(()=>{this._callbacks=this._callbacks.filter(F=>F.timeoutId!==S),n(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:n,timeoutId:S,updateCb:c})}whenStable(n,o,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,o,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,o,c){return[]}}return t.\u0275fac=function(n){return new(n||t)(mn(Ir))},t.\u0275prov=Rt({token:t,factory:t.\u0275fac}),t})(),Ny=(()=>{class t{constructor(){this._applications=new Map,ch.addToWindow(this)}registerApplication(n,o){this._applications.set(n,o)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,o=!0){return ch.findTestabilityInTree(this,n,o)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Rt({token:t,factory:t.\u0275fac}),t})();class PE{addToWindow(e){}findTestabilityInTree(e,n,o){return null}}let ch=new PE,Ly=!0,Fy=!1;let xi;const Uy=new Vn("AllowMultipleToken");function Vy(t,e,n=[]){const o=`Platform: ${e}`,c=new Vn(o);return(S=[])=>{let F=Hy();if(!F||F.injector.get(Uy,!1))if(t)t(n.concat(S).concat({provide:c,useValue:!0}));else{const j=n.concat(S).concat({provide:c,useValue:!0},{provide:cu,useValue:"platform"});!function(t){if(xi&&!xi.destroyed&&!xi.injector.get(Uy,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");xi=t.get(jy);const e=t.get(Ay,null);e&&e.forEach(n=>n())}(Fn.create({providers:j,name:o}))}return function(t){const e=Hy();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(c)}}function Hy(){return xi&&!xi.destroyed?xi:null}let jy=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,o){const j=function(t,e){let n;return n="noop"===t?new DE:("zone.js"===t?void 0:t)||new Ir({enableLongStackTrace:(Fy=!0,Ly),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(o?o.ngZone:void 0,{ngZoneEventCoalescing:o&&o.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:o&&o.ngZoneRunCoalescing||!1}),G=[{provide:Ir,useValue:j}];return j.run(()=>{const ie=Fn.create({providers:G,parent:this.injector,name:n.moduleType.name}),ce=n.create(ie),Se=ce.injector.get(is,null);if(!Se)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return j.runOutsideAngular(()=>{const Ie=j.onError.subscribe({next:ke=>{Se.handleError(ke)}});ce.onDestroy(()=>{fh(this._modules,ce),Ie.unsubscribe()})}),function(t,e,n){try{const o=n();return vd(o)?o.catch(c=>{throw e.runOutsideAngular(()=>t.handleError(c)),c}):o}catch(o){throw e.runOutsideAngular(()=>t.handleError(o)),o}}(Se,j,()=>{const Ie=ce.injector.get(wa);return Ie.runInitializers(),Ie.donePromise.then(()=>(Cd(ce.injector.get(No,jl)||jl),this._moduleDoBootstrap(ce),ce))})})}bootstrapModule(n,o=[]){const c=qy({},o);return function(t,e,n){const o=new zd(n);return Promise.resolve(o)}(0,0,n).then(S=>this.bootstrapModuleFactory(S,c))}_moduleDoBootstrap(n){const o=n.injector.get(Lu);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(c=>o.bootstrap(c));else{if(!n.instance.ngDoBootstrap)throw new Error(`The module ${Ge(n.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);n.instance.ngDoBootstrap(o)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(mn(Fn))},t.\u0275prov=Rt({token:t,factory:t.\u0275fac}),t})();function qy(t,e){return Array.isArray(e)?e.reduce(qy,t):Object.assign(Object.assign({},t),e)}let Lu=(()=>{class t{constructor(n,o,c,S,F){this._zone=n,this._injector=o,this._exceptionHandler=c,this._componentFactoryResolver=S,this._initStatus=F,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const j=new H(ie=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{ie.next(this._stable),ie.complete()})}),G=new H(ie=>{let ce;this._zone.runOutsideAngular(()=>{ce=this._zone.onStable.subscribe(()=>{Ir.assertNotInAngularZone(),sh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,ie.next(!0))})})});const Se=this._zone.onUnstable.subscribe(()=>{Ir.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{ie.next(!1)}))});return()=>{ce.unsubscribe(),Se.unsubscribe()}});this.isStable=function(...t){let e=Number.POSITIVE_INFINITY,n=null,o=t[t.length-1];return l(o)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof o&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof H?t[0]:_e(e)(Be(t,n))}(j,G.pipe(t=>Le()(function(t,e){return function(o){let c;c="function"==typeof t?t:function(){return t};const S=Object.create(o,It);return S.source=o,S.subjectFactory=c,S}}(Mn)(t))))}bootstrap(n,o){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let c;c=n instanceof ym?n:this._componentFactoryResolver.resolveComponentFactory(n),this.componentTypes.push(c.componentType);const S=function(t){return t.isBoundToModule}(c)?void 0:this._injector.get(ls),j=c.create(Fn.NULL,[],o||c.selector,S),G=j.location.nativeElement,ie=j.injector.get(lh,null),ce=ie&&j.injector.get(Ny);return ie&&ce&&ce.registerApplication(G,ie),j.onDestroy(()=>{this.detachView(j.hostView),fh(this.components,j),ce&&ce.unregisterApplication(G)}),this._loadComponent(j),j}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const o=n;this._views.push(o),o.attachToAppRef(this)}detachView(n){const o=n;fh(this._views,o),o.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(mE,[]).concat(this._bootstrapListeners).forEach(c=>c(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(n){return new(n||t)(mn(Ir),mn(Fn),mn(is),mn(us),mn(wa))},t.\u0275prov=Rt({token:t,factory:t.\u0275fac}),t})();function fh(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const oT=Vy(null,"core",[{provide:rh,useValue:"unknown"},{provide:jy,deps:[Fn]},{provide:Ny,deps:[]},{provide:ih,deps:[]}]),cT=[{provide:Lu,useClass:Lu,deps:[Ir,Fn,is,us,wa]},{provide:oS,deps:[Ir],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(n){e.push(n)}}},{provide:wa,useClass:wa,deps:[[new zi,ic]]},{provide:sc,useClass:sc,deps:[]},vE,{provide:Mu,useFactory:function(){return Y_},deps:[]},{provide:ha,useFactory:function(){return X_},deps:[]},{provide:No,useFactory:function(t){return Cd(t=t||"undefined"!=typeof $localize&&$localize.locale||jl),t},deps:[[new eu(No),new zi,new ns]]},{provide:Dy,useValue:"USD"}];let dT=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(mn(Lu))},t.\u0275mod=io({type:t}),t.\u0275inj=Qt({providers:cT}),t})(),vc=null;function Hu(){return vc}const xr=new Vn("DocumentToken");var dr=(()=>((dr=dr||{})[dr.Zero=0]="Zero",dr[dr.One=1]="One",dr[dr.Two=2]="Two",dr[dr.Few=3]="Few",dr[dr.Many=4]="Many",dr[dr.Other=5]="Other",dr))();const wI=function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Gv(e);if(n)return n;const o=e.split("-")[0];if(n=Gv(o),n)return n;if("en"===o)return xM;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[Ot.PluralCase]};class Tc{}let JI=(()=>{class t extends Tc{constructor(n){super(),this.locale=n}getPluralCategory(n,o){switch(wI(o||this.locale)(n)){case dr.Zero:return"zero";case dr.One:return"one";case dr.Two:return"two";case dr.Few:return"few";case dr.Many:return"many";default:return"other"}}}return t.\u0275fac=function(n){return new(n||t)(mn(No))},t.\u0275prov=Rt({token:t,factory:t.\u0275fac}),t})(),x1=(()=>{class t{constructor(n,o){this._viewContainer=n,this._context=new nx,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=o}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){R1("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){R1("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,o){return!0}}return t.\u0275fac=function(n){return new(n||t)(pn(eo),pn(vo))},t.\u0275dir=_r({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class nx{constructor(){this.$implicit=null,this.ngIf=null}}function R1(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Ge(e)}'.`)}let xx=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=io({type:t}),t.\u0275inj=Qt({providers:[{provide:Tc,useClass:JI}]}),t})();class Bh extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(t){vc||(vc=t)}(new Bh)}onAndCancel(e,n,o){return e.addEventListener(n,o,!1),()=>{e.removeEventListener(n,o,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=(zu=zu||document.querySelector("base"),zu?zu.getAttribute("href"):null);return null==n?null:function(t){Ic=Ic||document.createElement("a"),Ic.setAttribute("href",t);const e=Ic.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){zu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const o=n.indexOf("="),[c,S]=-1==o?[n,""]:[n.slice(0,o),n.slice(o+1)];if(c.trim()===e)return decodeURIComponent(S)}return null}(document.cookie,e)}}let Ic,zu=null;const k1=new Vn("TRANSITION_ID"),Bx=[{provide:ic,useFactory:function(t,e,n){return()=>{n.get(wa).donePromise.then(()=>{const o=Hu(),c=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let S=0;S<c.length;S++)o.remove(c[S])})}},deps:[k1,xr,Fn],multi:!0}];class Uh{static init(){!function(t){ch=t}(new Uh)}addToWindow(e){fn.getAngularTestability=(o,c=!0)=>{const S=e.findTestabilityInTree(o,c);if(null==S)throw new Error("Could not find testability for element.");return S},fn.getAllAngularTestabilities=()=>e.getAllTestabilities(),fn.getAllAngularRootElements=()=>e.getAllRootElements(),fn.frameworkStabilizers||(fn.frameworkStabilizers=[]),fn.frameworkStabilizers.push(o=>{const c=fn.getAllAngularTestabilities();let S=c.length,F=!1;const j=function(G){F=F||G,S--,0==S&&o(F)};c.forEach(function(G){G.whenStable(j)})})}findTestabilityInTree(e,n,o){if(null==n)return null;const c=e.getTestability(n);return null!=c?c:o?Hu().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null}}let Ux=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Rt({token:t,factory:t.\u0275fac}),t})();const Wu=new Vn("EventManagerPlugins");let Rc=(()=>{class t{constructor(n,o){this._zone=o,this._eventNameToPlugin=new Map,n.forEach(c=>c.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,o,c){return this._findPluginFor(o).addEventListener(n,o,c)}addGlobalEventListener(n,o,c){return this._findPluginFor(o).addGlobalEventListener(n,o,c)}getZone(){return this._zone}_findPluginFor(n){const o=this._eventNameToPlugin.get(n);if(o)return o;const c=this._plugins;for(let S=0;S<c.length;S++){const F=c[S];if(F.supports(n))return this._eventNameToPlugin.set(n,F),F}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(mn(Wu),mn(Ir))},t.\u0275prov=Rt({token:t,factory:t.\u0275fac}),t})();class Vh{constructor(e){this._doc=e}addGlobalEventListener(e,n,o){const c=Hu().getGlobalEventTarget(this._doc,e);if(!c)throw new Error(`Unsupported event target ${c} for event ${n}`);return this.addEventListener(c,n,o)}}let L1=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(n){const o=new Set;n.forEach(c=>{this._stylesSet.has(c)||(this._stylesSet.add(c),o.add(c))}),this.onStylesAdded(o)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Rt({token:t,factory:t.\u0275fac}),t})(),Gu=(()=>{class t extends L1{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,o,c){n.forEach(S=>{const F=this._doc.createElement("style");F.textContent=S,c.push(o.appendChild(F))})}addHost(n){const o=[];this._addStylesToHost(this._stylesSet,n,o),this._hostNodes.set(n,o)}removeHost(n){const o=this._hostNodes.get(n);o&&o.forEach(F1),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((o,c)=>{this._addStylesToHost(n,c,o)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(F1))}}return t.\u0275fac=function(n){return new(n||t)(mn(xr))},t.\u0275prov=Rt({token:t,factory:t.\u0275fac}),t})();function F1(t){Hu().remove(t)}const Hh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},jh=/%COMP%/g;function Ac(t,e,n){for(let o=0;o<e.length;o++){let c=e[o];Array.isArray(c)?Ac(t,c,n):(c=c.replace(jh,t),n.push(c))}return n}function V1(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let qh=(()=>{class t{constructor(n,o,c){this.eventManager=n,this.sharedStylesHost=o,this.appId=c,this.rendererByCompId=new Map,this.defaultRenderer=new zh(n)}createRenderer(n,o){if(!n||!o)return this.defaultRenderer;switch(o.encapsulation){case Jn.Emulated:{let c=this.rendererByCompId.get(o.id);return c||(c=new e6(this.eventManager,this.sharedStylesHost,o,this.appId),this.rendererByCompId.set(o.id,c)),c.applyToHost(n),c}case 1:case Jn.ShadowDom:return new t6(this.eventManager,this.sharedStylesHost,n,o);default:if(!this.rendererByCompId.has(o.id)){const c=Ac(o.id,o.styles,[]);this.sharedStylesHost.addStyles(c),this.rendererByCompId.set(o.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(mn(Rc),mn(Gu),mn(Nu))},t.\u0275prov=Rt({token:t,factory:t.\u0275fac}),t})();class zh{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,n){return n?document.createElementNS(Hh[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){e.appendChild(n)}insertBefore(e,n,o){e&&e.insertBefore(n,o)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let o="string"==typeof e?document.querySelector(e):e;if(!o)throw new Error(`The selector "${e}" did not match any elements`);return n||(o.textContent=""),o}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,o,c){if(c){n=c+":"+n;const S=Hh[c];S?e.setAttributeNS(S,n,o):e.setAttribute(n,o)}else e.setAttribute(n,o)}removeAttribute(e,n,o){if(o){const c=Hh[o];c?e.removeAttributeNS(c,n):e.removeAttribute(`${o}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,o,c){c&(Zr.DashCase|Zr.Important)?e.style.setProperty(n,o,c&Zr.Important?"important":""):e.style[n]=o}removeStyle(e,n,o){o&Zr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,o){e[n]=o}setValue(e,n){e.nodeValue=n}listen(e,n,o){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,V1(o)):this.eventManager.addEventListener(e,n,V1(o))}}class e6 extends zh{constructor(e,n,o,c){super(e),this.component=o;const S=Ac(c+"-"+o.id,o.styles,[]);n.addStyles(S),this.contentAttr=function(t){return"_ngcontent-%COMP%".replace(jh,t)}(c+"-"+o.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(jh,t)}(c+"-"+o.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const o=super.createElement(e,n);return super.setAttribute(o,this.contentAttr,""),o}}class t6 extends zh{constructor(e,n,o,c){super(e),this.sharedStylesHost=n,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const S=Ac(c.id,c.styles,[]);for(let F=0;F<S.length;F++){const j=document.createElement("style");j.textContent=S[F],this.shadowRoot.appendChild(j)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,o){return super.insertBefore(this.nodeOrShadowRoot(e),n,o)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let n6=(()=>{class t extends Vh{constructor(n){super(n)}supports(n){return!0}addEventListener(n,o,c){return n.addEventListener(o,c,!1),()=>this.removeEventListener(n,o,c)}removeEventListener(n,o,c){return n.removeEventListener(o,c)}}return t.\u0275fac=function(n){return new(n||t)(mn(xr))},t.\u0275prov=Rt({token:t,factory:t.\u0275fac}),t})();const q1=["alt","control","meta","shift"],l6={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},z1={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},c6={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let f6=(()=>{class t extends Vh{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,o,c){const S=t.parseEventName(o),F=t.eventCallback(S.fullKey,c,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Hu().onAndCancel(n,S.domEventName,F))}static parseEventName(n){const o=n.toLowerCase().split("."),c=o.shift();if(0===o.length||"keydown"!==c&&"keyup"!==c)return null;const S=t._normalizeKey(o.pop());let F="";if(q1.forEach(G=>{const ie=o.indexOf(G);ie>-1&&(o.splice(ie,1),F+=G+".")}),F+=S,0!=o.length||0===S.length)return null;const j={};return j.domEventName=c,j.fullKey=F,j}static getEventFullKey(n){let o="",c=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&z1.hasOwnProperty(e)&&(e=z1[e]))}return l6[e]||e}(n);return c=c.toLowerCase()," "===c?c="space":"."===c&&(c="dot"),q1.forEach(S=>{S!=c&&c6[S](n)&&(o+=S+".")}),o+=c,o}static eventCallback(n,o,c){return S=>{t.getEventFullKey(S)===n&&c.runGuarded(()=>o(S))}}static _normalizeKey(n){switch(n){case"esc":return"escape";default:return n}}}return t.\u0275fac=function(n){return new(n||t)(mn(xr))},t.\u0275prov=Rt({token:t,factory:t.\u0275fac}),t})();const b6=Vy(oT,"browser",[{provide:rh,useValue:"browser"},{provide:Ay,useValue:function(){Bh.makeCurrent(),Uh.init()},multi:!0},{provide:xr,useFactory:function(){return function(t){Na=t}(document),document},deps:[]}]),w6=[[],{provide:cu,useValue:"root"},{provide:is,useFactory:function(){return new is},deps:[]},{provide:Wu,useClass:n6,multi:!0,deps:[xr,Ir,rh]},{provide:Wu,useClass:f6,multi:!0,deps:[xr]},[],{provide:qh,useClass:qh,deps:[Rc,Gu,Nu]},{provide:Kl,useExisting:qh},{provide:L1,useExisting:Gu},{provide:Gu,useClass:Gu,deps:[xr]},{provide:lh,useClass:lh,deps:[Ir]},{provide:Rc,useClass:Rc,deps:[Wu,Ir]},{provide:class{},useClass:Ux,deps:[]},[]];let C6=(()=>{class t{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:t,providers:[{provide:Nu,useValue:n.appId},{provide:k1,useExisting:Nu},Bx]}}}return t.\u0275fac=function(n){return new(n||t)(mn(t,12))},t.\u0275mod=io({type:t}),t.\u0275inj=Qt({providers:w6,imports:[xx,dT]}),t})();"undefined"!=typeof window&&window;var Dc=E(8239),R6=E(5436);class Jh{constructor(){this.middlewares={}}static getInstance(){return this._instance||(this._instance=new Jh),this._instance}subscribe(e,n){this.middlewares[e]=n}create(){return console.log("[CustomStore][create]"),window.WebChat.createStore({},({dispatch:n})=>o=>c=>{let S=c;if(c&&c.payload)for(const F of Object.keys(this.middlewares)){const j=this.middlewares[F];if(j.applicable(S)){const G=j.apply(S);G.dispatchAction&&n(G.dispatchAction),G.nextAction&&(S=G.nextAction)}}return o(S)})}}var _a=E(8139);const G1=t=>{if(t){const e=t.split(/\s/).reduce((n,o)=>n+o.slice(0,1),"");return e.length>1?e.substring(0,2).toUpperCase():t.substring(0,2).toUpperCase()}return""};var Sa=(()=>(function(t){t.Sending="sending",t.SendFailed="send failed",t.Sent="sent"}(Sa||(Sa={})),Sa))();class F6{constructor(e){this.dataMaskingRules=e,console.log("[DataMaskingRules]"),console.log(this.dataMaskingRules)}applicable(e){const{text:n}=e.payload;return!!(Object.keys(this.dataMaskingRules).length>0&&n&&"WEB_CHAT/SEND_MESSAGE"===e.type)}apply(e){return{dispatchAction:null,nextAction:this.applyDataMasking(e)}}applyDataMasking(e){let{text:o}=e.payload;if(Object.keys(this.dataMaskingRules).length>0)for(const c of Object.values(this.dataMaskingRules)){const S=new RegExp(c,"g");let F;for(;F=S.exec(o);){const j=F[0].replace(/./g,"#");o=o.replace(F[0],j)}}return e.payload.text=o,e}}const Pc_omnichannelConfig_orgId="d367c413-e0b9-408b-ae1c-382499b369ae",Pc_omnichannelConfig_orgUrl="https://omnichannel-crm.omnichannelengagementhub.com",Pc_omnichannelConfig_widgetId="3a352b95-5d67-4e47-af28-eca029b03928";let Zh=(()=>{class t{}return t.canUploadAttachment=!1,t})();function Oc(t,e){return new H(n=>{const o=t.length;if(0===o)return void n.complete();const c=new Array(o);let S=0,F=0;for(let j=0;j<o;j++){const G=ye(t[j]);let ie=!1;n.add(G.subscribe({next:ce=>{ie||(ie=!0,F++),c[j]=ce},error:ce=>n.error(ce),complete:()=>{S++,(S===o||!ie)&&(F===o&&n.next(e?e.reduce((ce,Se,Ie)=>(ce[Se]=c[Ie],ce),{}):c),n.complete())}}))}})}class z6 extends g{constructor(e,n){super()}schedule(e,n=0){return this}}class W6 extends z6{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){if(this.closed)return this;this.state=e;const o=this.id,c=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(c,o,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(c,this.id,n),this}requestAsyncId(e,n,o=0){return setInterval(e.flush.bind(e,this),o)}recycleAsyncId(e,n,o=0){if(null!==o&&this.delay===o&&!1===this.pending)return n;clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const o=this._execute(e,n);if(o)return o;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let c,o=!1;try{this.work(e)}catch(S){o=!0,c=!!S&&S||new Error(S)}if(o)return this.unsubscribe(),c}_unsubscribe(){const e=this.id,n=this.scheduler,o=n.actions,c=o.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==c&&o.splice(c,1),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null}}let $1=(()=>{class t{constructor(n,o=t.now){this.SchedulerAction=n,this.now=o}schedule(n,o=0,c){return new this.SchedulerAction(this,n).schedule(c,o)}}return t.now=()=>Date.now(),t})();class Bo extends $1{constructor(e,n=$1.now){super(e,()=>Bo.delegate&&Bo.delegate!==this?Bo.delegate.now():n()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,n=0,o){return Bo.delegate&&Bo.delegate!==this?Bo.delegate.schedule(e,n,o):super.schedule(e,n,o)}flush(e){const{actions:n}=this;if(this.active)return void n.push(e);let o;this.active=!0;do{if(o=e.execute(e.state,e.delay))break}while(e=n.shift());if(this.active=!1,o){for(;e=n.shift();)e.unsubscribe();throw o}}}const K6=new class extends Bo{}(class extends W6{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,o=0){return null!==o&&o>0||null===o&&this.delay>0?super.requestAsyncId(e,n,o):e.flush(this)}}),J6=new H(t=>t.complete());class ci{constructor(e,n,o){this.kind=e,this.value=n,this.error=o,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,n,o){switch(this.kind){case"N":return e&&e(this.value);case"E":return n&&n(this.error);case"C":return o&&o()}}accept(e,n,o){return e&&"function"==typeof e.next?this.observe(e):this.do(e,n,o)}toObservable(){switch(this.kind){case"N":return function(...t){let e=t[t.length-1];return l(e)?(t.pop(),de(t,e)):Be(t)}(this.value);case"E":return function(t,e){return new H(n=>n.error(t))}(this.error);case"C":return function(t){return t?function(t){return new H(e=>t.schedule(()=>e.complete()))}(t):J6}()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new ci("N",e):ci.undefinedValueNotification}static createError(e){return new ci("E",void 0,e)}static createComplete(){return ci.completeNotification}}ci.completeNotification=new ci("C"),ci.undefinedValueNotification=new ci("N",void 0);class kc extends w{constructor(e,n,o=0){super(e),this.scheduler=n,this.delay=o}static dispatch(e){const{notification:n,destination:o}=e;n.observe(o),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(kc.dispatch,this.delay,new n4(e,this.destination)))}_next(e){this.scheduleMessage(ci.createNext(e))}_error(e){this.scheduleMessage(ci.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(ci.createComplete()),this.unsubscribe()}}class n4{constructor(e,n){this.notification=e,this.destination=n}}class K1 extends r{constructor(e=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,o){super(),this.scheduler=o,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const n=this._events;n.push(e),n.length>this._bufferSize&&n.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new r4(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const n=this._infiniteTimeWindow,o=n?this._events:this._trimBufferThenGetEvents(),c=this.scheduler,S=o.length;let F;if(this.closed)throw new $;if(this.isStopped||this.hasError?F=g.EMPTY:(this.observers.push(e),F=new pe(this,e)),c&&e.add(e=new kc(e,c)),n)for(let j=0;j<S&&!e.closed;j++)e.next(o[j]);else for(let j=0;j<S&&!e.closed;j++)e.next(o[j].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),F}_getNow(){return(this.scheduler||K6).now()}_trimBufferThenGetEvents(){const e=this._getNow(),n=this._bufferSize,o=this._windowTime,c=this._events,S=c.length;let F=0;for(;F<S&&!(e-c[F].time<o);)F++;return S>n&&(F=Math.max(F,S-n)),F>0&&c.splice(0,F),c}}class r4{constructor(e,n){this.time=e,this.value=n}}let i4=(()=>{class t{constructor(n){this.document=n,this._loadedLibraries={}}lazyLoad(){return function(...t){if(1===t.length){const e=t[0];if(v(e))return Oc(e,null);if(M(e)&&Object.getPrototypeOf(e)===Object.prototype){const n=Object.keys(e);return Oc(n.map(o=>e[o]),n)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Oc(t=1===t.length&&v(t[0])?t[0]:t,null).pipe(a(n=>e(...n)))}return Oc(t,null)}([this.loadScript("https://cdn.botframework.com/botframework-webchat/4.9.2/webchat.js")])}loadScript(n){if(this._loadedLibraries[n])return this._loadedLibraries[n].asObservable();this._loadedLibraries[n]=new K1;const o=this.document.createElement("script");return o.type="text/javascript",o.async=!0,o.src=n,o.onload=()=>{this._loadedLibraries[n].next(),this._loadedLibraries[n].complete()},this.document.body.appendChild(o),this._loadedLibraries[n].asObservable()}loadStyle(n){if(this._loadedLibraries[n])return this._loadedLibraries[n].asObservable();this._loadedLibraries[n]=new K1;const o=this.document.createElement("link");return o.type="text/css",o.href=n,o.rel="stylesheet",o.onload=()=>{this._loadedLibraries[n].next(),this._loadedLibraries[n].complete()},document.getElementsByTagName("head")[0].appendChild(o),this._loadedLibraries[n].asObservable()}}return t.\u0275fac=function(n){return new(n||t)(mn(xr))},t.\u0275prov=Rt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function o4(t,e){1&t&&(Zi(0,"div",8),Zi(1,"span",9),mu(2," \u{1f440} "),Qi(),Qi())}function s4(t,e){if(1&t){const n=gd();Zi(0,"div",3),Zi(1,"div",4),mu(2,"LiveChat with Omnichannel Chat SDK "),Zi(3,"span",5),Ul("click",function(){return Va(n),Vl().endChat()}),mu(4," \u274c "),Qi(),Qi(),Fl(5,o4,3,0,"div",6),function(t,e,n,o){Zi(t,e,n,o),Qi()}(6,"div",7),Qi()}if(2&t){const n=Vl();xl(5),gu("ngIf",n.loading)}}function a4(t,e){if(1&t){const n=gd();Zi(0,"div",10),Ul("click",function(){return Va(n),Vl().startChat()}),Zi(1,"span"),mu(2," \u{1f44b} "),Qi(),Qi()}}const J1=(()=>{const t={orgId:Pc_omnichannelConfig_orgId||"",orgUrl:Pc_omnichannelConfig_orgUrl||"",widgetId:Pc_omnichannelConfig_widgetId||""},e=new URLSearchParams(window.location.search);return null!==e.get("orgUrl")&&(t.orgUrl=e.get("orgUrl")),null!==e.get("orgId")&&(t.orgId=e.get("orgId")),null!==e.get("widgetId")&&(t.widgetId=e.get("widgetId")),t})(),Z1=(()=>{const t={telemetry:{disable:!1,ariaTelemetryKey:""}},e=new URLSearchParams(window.location.search);return null!==e.get("telemetry")&&(t.telemetry.disable="true"!=e.get("telemetry")),null!==e.get("ariaTelemetryKey")&&(t.telemetry.ariaTelemetryKey=e.get("ariaTelemetryKey")||""),t})(),Q1=(()=>{const t={disable:!0},e=new URLSearchParams(window.location.search);return null!==e.get("debug")&&(t.disable="true"!=e.get("debug")),t})();console.log("%c [OmnichannelConfig]","background-color:#001433;color:#fff"),console.log(J1),console.log("%c [debugConfig]","background-color:#001433;color:#fff"),console.log(Q1),console.log("%c [telemetryConfig]","background-color:#001433;color:#fff"),console.log(Z1);const u4=(console.log("[createAvatarMiddleware]"),()=>e=>n=>{console.log("[AvatarMiddleware]");const{activity:{channelData:{tags:o},from:{name:c},text:S},fromUser:F}=n;return console.log(n),o&&o.includes("system")?(console.log(`[AvatarMiddleware][Message][System] ${S}`),_a.createElement("div",null,"\u2757")):null!=F&&(F?F?(console.log(`[AvatarMiddleware][Message][Customer] ${S}`),_a.createElement("div",{className:"webchat__avatar"},_a.createElement("p",{className:"webchat__avatar_initials"}," ",G1(c)||"CU","  "))):e(n):(console.log(`[AvatarMiddleware][Message][Agent] ${S}`),_a.createElement("div",{className:"webchat__avatar"},_a.createElement("p",{className:"webchat__avatar_initials"}," ",G1(c)," "))))}),l4=(console.log("[createActivityMiddleware]"),()=>e=>n=>{if(console.log("%c [ActivityMiddleware]","background: #2a9fd4; color: #fff"),console.log(n),n.activity){if(n.activity.channelData&&n.activity.channelData.tags&&n.activity.channelData.tags.includes("system"))return console.log(`%c [ActivityMiddleware][Message][System] ${n.activity.text}`,"background: #2a9fd4; color: #fff"),o=>_a.createElement("div",{key:n.activity.id,className:"system-message"},e(n)(o));if(void 0===n.activity.text||null==n.activity.text)return e(n);"bot"===n.activity.from.role&&console.log(`%c [ActivityMiddleware][Message][Agent] ${n.activity.text}`,"background: #2a9fd4; color: #fff"),"user"===n.activity.from.role&&console.log(`%c [ActivityMiddleware][Message][Customer] ${n.activity.text}`,"background: #2a9fd4; color: #fff")}return e(n)}),c4=()=>e=>n=>{console.log("%c [activityStatusMiddleware]","background: #238636; color: #fff"),console.log(n);let o="";(t=>t.activity.channelData&&t.activity.channelData.tags&&t.activity.channelData.tags.includes("system"))(n)?o="System":(t=>"bot"===t.activity.from.role)(n)?o="Agent":(t=>"user"===t.activity.from.role)(n)&&(o="Customer"),console.log(`%c [activityStatusMiddleware][Message][${o}] ${n.activity.text}`,"background: #238636; color: #fff"),n.sendState===Sa.Sent?console.log(`%c [activityStatusMiddleware][Message][${o}][Status] Sent!`,"background: #238636; color: #fff"):n.sendState===Sa.Sending?console.log(`%c [activityStatusMiddleware][Message][${o}][Status] Sending...`,"background: #238636; color: #fff"):n.sendState===Sa.SendFailed&&console.log(`%c [activityStatusMiddleware][Message][${o}][Status] Failed :(`,"background: #238636; color: #fff")},Y1={bubbleBorderRadius:10,bubbleNubSize:10,bubbleNubOffset:15,bubbleFromUserBorderRadius:10,bubbleFromUserNubSize:10,bubbleFromUserNubOffset:15,bubbleFromUserBackground:"rgb(246, 246, 246)"};let d4=(()=>{class t{constructor(n,o){this.webChatControlService=n,this.document=o,this.title="angular-botframework-webchat-control",this.webChat=null,this.chatSDK=null,this.chatAdapter=null,this.loading=!1,this.hasChatStarted=!1,this.webChatStore=null}ngOnInit(){var n=this;return(0,Dc.Z)(function*(){console.log("[ngOnInit]"),n.webChatControlService.lazyLoad().subscribe(function(){var o=(0,Dc.Z)(function*(c){n.webChat=window.WebChat;const S=Object.assign({},Z1),F=new R6.Mg(J1,S);F.setDebug(!Q1.disable),yield F.initialize(),n.chatSDK=F,n.webChat=window.WebChat,(t=>{Zh.canUploadAttachment="true"===t.LiveWSAndLiveChatEngJoin.msdyn_enablefileattachmentsforcustomers||!1})(yield F.getLiveChatConfig()),Y1.hideUploadButton=!Zh.canUploadAttachment;const G=localStorage.getItem("liveChatContext");G&&Object.keys(JSON.parse(G)).length>0&&(console.log("[liveChatContext]"),console.log(G))});return function(c){return o.apply(this,arguments)}}())})()}startChat(){var n=this;return(0,Dc.Z)(function*(){var o,c,S,F;console.log("[startChat]");const j=yield null===(o=n.chatSDK)||void 0===o?void 0:o.getDataMaskingRules();console.log(j);const G=(console.log("[createCustomStore]"),Jh.getInstance());n.webChatStore=G.create(),G.subscribe("DataMasking",(t=>(console.log("[createDataMaskingMiddleware]"),new F6(t)))(j));const ie={},ce=localStorage.getItem("liveChatContext");ce&&Object.keys(JSON.parse(ce)).length>0&&(console.log("[liveChatContext]"),ie.liveChatContext=JSON.parse(ce)),n.hasChatStarted=!0,n.loading=!0,yield null===(c=n.chatSDK)||void 0===c?void 0:c.startChat(ie);const Se=yield null===(S=n.chatSDK)||void 0===S?void 0:S.getCurrentLiveChatContext();Se&&Object.keys(Se).length&&localStorage.setItem("liveChatContext",JSON.stringify(Se));const Ie=yield null===(F=n.chatSDK)||void 0===F?void 0:F.createChatAdapter();n.chatAdapter=Ie,n.loading=!1,n.webChat.renderWebChat({directLine:Ie,sendTypingIndicator:!0,styleOptions:Y1,store:n.webChatStore,avatarMiddleware:u4,activityMiddleware:l4,activityStatusMiddleware:c4},n.document.getElementById("chat-container"))})()}endChat(){var n=this;return(0,Dc.Z)(function*(){var o;console.log("[endChat]"),yield null===(o=n.chatSDK)||void 0===o?void 0:o.endChat(),n.hasChatStarted=!1;const c=n.document.getElementById("chat-container");for(;c.firstChild;)c.firstChild.remove()})()}}return t.\u0275fac=function(n){return new(n||t)(pn(i4),pn(xr))},t.\u0275cmp=qo({type:t,selectors:[["app-root"]],decls:3,vars:2,consts:[["id","root"],["id","chat-root",4,"ngIf"],["id","chat-button",3,"click",4,"ngIf"],["id","chat-root"],[1,"chat-header"],[3,"click"],["id","loading-screen",4,"ngIf"],["id","chat-container"],["id","loading-screen"],["id","loader"],["id","chat-button",3,"click"]],template:function(n,o){1&n&&(Zi(0,"div",0),Fl(1,s4,7,1,"div",1),Fl(2,a4,3,0,"div",2),Qi()),2&n&&(xl(1),gu("ngIf",o.hasChatStarted),xl(1),gu("ngIf",!o.hasChatStarted&&!o.loading))},directives:[x1],styles:['body[_ngcontent-%COMP%]{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}code[_ngcontent-%COMP%]{font-family:source-code-pro,Menlo,Monaco,Consolas,"Courier New",monospace}#chat-root[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:400px;max-width:400px;min-height:600px;max-height:600px;width:400px;height:600px;position:fixed;right:0;bottom:0;border-radius:4px;margin:0 20px 60px 0;box-shadow:0 0 15px 2px #161b224d;font-family:"Segoe UI",Arial,sans-serif}#chat-container[_ngcontent-%COMP%]{width:100%;height:100%}.chat-header[_ngcontent-%COMP%]{border-bottom:#E6E6E6 solid 1px;padding:10px;display:flex;justify-content:space-between;cursor:pointer}#loading-screen[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:400px;max-width:400px;min-height:600px;max-height:600px;width:400px;height:600px;position:fixed;right:0;bottom:0;border-radius:4px;margin:0 20px 60px 0;box-shadow:0 0 15px 2px #161b224d;align-items:center;justify-content:center}@keyframes spin{to{transform:rotate(360deg)}}#loader[_ngcontent-%COMP%]{font-size:120px;animation:spin 2s linear infinite}#chat-button[_ngcontent-%COMP%]{position:fixed;right:0;bottom:0;border-radius:32px;background-color:#0078d4;box-shadow:0 0 5px 2px #0078d4;padding:10px;margin:0 20px 20px 0;color:#fff;font-size:32px;cursor:pointer}#chat-button[_ngcontent-%COMP%]:hover{box-shadow:0 0 20px 2px #0078d4;transition:all 2s}']}),t})(),h4=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=io({type:t,bootstrap:[d4]}),t.\u0275inj=Qt({providers:[],imports:[[C6]]}),t})();(function(){if(Fy)throw new Error("Cannot enable prod mode after platform setup.");Ly=!1})(),b6().bootstrapModule(h4).catch(t=>console.error(t))},4762:(Y,L,E)=>{"use strict";function R(x,r){var s={};for(var l in x)Object.prototype.hasOwnProperty.call(x,l)&&r.indexOf(l)<0&&(s[l]=x[l]);if(null!=x&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(l=Object.getOwnPropertySymbols(x);a<l.length;a++)r.indexOf(l[a])<0&&Object.prototype.propertyIsEnumerable.call(x,l[a])&&(s[l[a]]=x[l[a]])}return s}function k(x){return this instanceof k?(this.v=x,this):new k(x)}function O(x,r,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a,l=s.apply(x,r||[]),f=[];return a={},_("next"),_("throw"),_("return"),a[Symbol.asyncIterator]=function(){return this},a;function _(q){l[q]&&(a[q]=function(Z){return new Promise(function(ge,me){f.push([q,Z,ge,me])>1||D(q,Z)})})}function D(q,Z){try{!function(q){q.value instanceof k?Promise.resolve(q.value.v).then(i,y):z(f[0][2],q)}(l[q](Z))}catch(ge){z(f[0][3],ge)}}function i(q){D("next",q)}function y(q){D("throw",q)}function z(q,Z){q(Z),f.shift(),f.length&&D(f[0][0],f[0][1])}}function V(x){var r,s;return r={},l("next"),l("throw",function(a){throw a}),l("return"),r[Symbol.iterator]=function(){return this},r;function l(a,f){r[a]=x[a]?function(_){return(s=!s)?{value:k(x[a](_)),done:"return"===a}:f?f(_):_}:f}}function U(x){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,r=x[Symbol.asyncIterator];return r?r.call(x):(x=function(x){var r="function"==typeof Symbol&&Symbol.iterator,s=r&&x[r],l=0;if(s)return s.call(x);if(x&&"number"==typeof x.length)return{next:function(){return x&&l>=x.length&&(x=void 0),{value:x&&x[l++],done:!x}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}(x),s={},l("next"),l("throw"),l("return"),s[Symbol.asyncIterator]=function(){return this},s);function l(f){s[f]=x[f]&&function(_){return new Promise(function(D,d){!function(f,_,D,d){Promise.resolve(d).then(function(i){f({value:i,done:D})},_)}(D,d,(_=x[f](_)).done,_.value)})}}}E.d(L,{_T:()=>R,qq:()=>k,FC:()=>O,V2:()=>V,KL:()=>U})},950:()=>{},6601:()=>{},8623:()=>{},7748:()=>{},5568:()=>{},6619:()=>{},7108:()=>{},2361:()=>{},4616:()=>{},8979:Y=>{function L(p,N,m,R,u,v,M){try{var A=p[v](M),T=A.value}catch(g){return void m(g)}A.done?N(T):Promise.resolve(T).then(R,u)}Y.exports=function(p){return function(){var N=this,m=arguments;return new Promise(function(R,u){var v=p.apply(N,m);function M(T){L(v,R,u,M,A,"next",T)}function A(T){L(v,R,u,M,A,"throw",T)}M(void 0)})}},Y.exports.__esModule=!0,Y.exports.default=Y.exports},9901:Y=>{Y.exports=function(E,p){if(!(E instanceof p))throw new TypeError("Cannot call a class as a function")},Y.exports.__esModule=!0,Y.exports.default=Y.exports},9524:(Y,L,E)=>{var p=E(8262);function N(R,u){for(var v=0;v<u.length;v++){var M=u[v];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(R,p(M.key),M)}}Y.exports=function(R,u,v){return u&&N(R.prototype,u),v&&N(R,v),Object.defineProperty(R,"prototype",{writable:!1}),R},Y.exports.__esModule=!0,Y.exports.default=Y.exports},5633:(Y,L,E)=>{var p=E(8262);Y.exports=function(m,R,u){return(R=p(R))in m?Object.defineProperty(m,R,{value:u,enumerable:!0,configurable:!0,writable:!0}):m[R]=u,m},Y.exports.__esModule=!0,Y.exports.default=Y.exports},3621:Y=>{Y.exports=function(E){return E&&E.__esModule?E:{default:E}},Y.exports.__esModule=!0,Y.exports.default=Y.exports},3443:(Y,L,E)=>{var p=E(4738).default;function N(){"use strict";Y.exports=N=function(){return m},Y.exports.__esModule=!0,Y.exports.default=Y.exports;var m={},R=Object.prototype,u=R.hasOwnProperty,v=Object.defineProperty||function(a,f,_){a[f]=_.value},M="function"==typeof Symbol?Symbol:{},A=M.iterator||"@@iterator",T=M.asyncIterator||"@@asyncIterator",g=M.toStringTag||"@@toStringTag";function h(a,f,_){return Object.defineProperty(a,f,{value:_,enumerable:!0,configurable:!0,writable:!0}),a[f]}try{h({},"")}catch(a){h=function(_,D,d){return _[D]=d}}function C(a,f,_,D){var i=Object.create((f&&f.prototype instanceof I?f:I).prototype),y=new r(D||[]);return v(i,"_invoke",{value:te(a,_,y)}),i}function b(a,f,_){try{return{type:"normal",arg:a.call(f,_)}}catch(D){return{type:"throw",arg:D}}}m.wrap=C;var w={};function I(){}function P(){}function k(){}var O={};h(O,A,function(){return this});var V=Object.getPrototypeOf,U=V&&V(V(s([])));U&&U!==R&&u.call(U,A)&&(O=U);var B=k.prototype=I.prototype=Object.create(O);function H(a){["next","throw","return"].forEach(function(f){h(a,f,function(_){return this._invoke(f,_)})})}function W(a,f){function _(d,i,y,z){var q=b(a[d],a,i);if("throw"!==q.type){var Z=q.arg,ge=Z.value;return ge&&"object"==p(ge)&&u.call(ge,"__await")?f.resolve(ge.__await).then(function(me){_("next",me,y,z)},function(me){_("throw",me,y,z)}):f.resolve(ge).then(function(me){Z.value=me,y(Z)},function(me){return _("throw",me,y,z)})}z(q.arg)}var D;v(this,"_invoke",{value:function(i,y){function z(){return new f(function(q,Z){_(i,y,q,Z)})}return D=D?D.then(z,z):z()}})}function te(a,f,_){var D="suspendedStart";return function(d,i){if("executing"===D)throw new Error("Generator is already running");if("completed"===D){if("throw"===d)throw i;return{value:void 0,done:!0}}for(_.method=d,_.arg=i;;){var y=_.delegate;if(y){var z=$(y,_);if(z){if(z===w)continue;return z}}if("next"===_.method)_.sent=_._sent=_.arg;else if("throw"===_.method){if("suspendedStart"===D)throw D="completed",_.arg;_.dispatchException(_.arg)}else"return"===_.method&&_.abrupt("return",_.arg);D="executing";var q=b(a,f,_);if("normal"===q.type){if(D=_.done?"completed":"suspendedYield",q.arg===w)continue;return{value:q.arg,done:_.done}}"throw"===q.type&&(D="completed",_.method="throw",_.arg=q.arg)}}}function $(a,f){var _=f.method,D=a.iterator[_];if(void 0===D)return f.delegate=null,"throw"===_&&a.iterator.return&&(f.method="return",f.arg=void 0,$(a,f),"throw"===f.method)||"return"!==_&&(f.method="throw",f.arg=new TypeError("The iterator does not provide a '"+_+"' method")),w;var d=b(D,a.iterator,f.arg);if("throw"===d.type)return f.method="throw",f.arg=d.arg,f.delegate=null,w;var i=d.arg;return i?i.done?(f[a.resultName]=i.value,f.next=a.nextLoc,"return"!==f.method&&(f.method="next",f.arg=void 0),f.delegate=null,w):i:(f.method="throw",f.arg=new TypeError("iterator result is not an object"),f.delegate=null,w)}function pe(a){var f={tryLoc:a[0]};1 in a&&(f.catchLoc=a[1]),2 in a&&(f.finallyLoc=a[2],f.afterLoc=a[3]),this.tryEntries.push(f)}function x(a){var f=a.completion||{};f.type="normal",delete f.arg,a.completion=f}function r(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(pe,this),this.reset(!0)}function s(a){if(a){var f=a[A];if(f)return f.call(a);if("function"==typeof a.next)return a;if(!isNaN(a.length)){var _=-1,D=function d(){for(;++_<a.length;)if(u.call(a,_))return d.value=a[_],d.done=!1,d;return d.value=void 0,d.done=!0,d};return D.next=D}}return{next:l}}function l(){return{value:void 0,done:!0}}return P.prototype=k,v(B,"constructor",{value:k,configurable:!0}),v(k,"constructor",{value:P,configurable:!0}),P.displayName=h(k,g,"GeneratorFunction"),m.isGeneratorFunction=function(a){var f="function"==typeof a&&a.constructor;return!!f&&(f===P||"GeneratorFunction"===(f.displayName||f.name))},m.mark=function(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,k):(a.__proto__=k,h(a,g,"GeneratorFunction")),a.prototype=Object.create(B),a},m.awrap=function(a){return{__await:a}},H(W.prototype),h(W.prototype,T,function(){return this}),m.AsyncIterator=W,m.async=function(a,f,_,D,d){void 0===d&&(d=Promise);var i=new W(C(a,f,_,D),d);return m.isGeneratorFunction(f)?i:i.next().then(function(y){return y.done?y.value:i.next()})},H(B),h(B,g,"Generator"),h(B,A,function(){return this}),h(B,"toString",function(){return"[object Generator]"}),m.keys=function(a){var f=Object(a),_=[];for(var D in f)_.push(D);return _.reverse(),function d(){for(;_.length;){var i=_.pop();if(i in f)return d.value=i,d.done=!1,d}return d.done=!0,d}},m.values=s,r.prototype={constructor:r,reset:function(f){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!f)for(var _ in this)"t"===_.charAt(0)&&u.call(this,_)&&!isNaN(+_.slice(1))&&(this[_]=void 0)},stop:function(){this.done=!0;var f=this.tryEntries[0].completion;if("throw"===f.type)throw f.arg;return this.rval},dispatchException:function(f){if(this.done)throw f;var _=this;function D(Z,ge){return y.type="throw",y.arg=f,_.next=Z,ge&&(_.method="next",_.arg=void 0),!!ge}for(var d=this.tryEntries.length-1;d>=0;--d){var i=this.tryEntries[d],y=i.completion;if("root"===i.tryLoc)return D("end");if(i.tryLoc<=this.prev){var z=u.call(i,"catchLoc"),q=u.call(i,"finallyLoc");if(z&&q){if(this.prev<i.catchLoc)return D(i.catchLoc,!0);if(this.prev<i.finallyLoc)return D(i.finallyLoc)}else if(z){if(this.prev<i.catchLoc)return D(i.catchLoc,!0)}else{if(!q)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return D(i.finallyLoc)}}}},abrupt:function(f,_){for(var D=this.tryEntries.length-1;D>=0;--D){var d=this.tryEntries[D];if(d.tryLoc<=this.prev&&u.call(d,"finallyLoc")&&this.prev<d.finallyLoc){var i=d;break}}i&&("break"===f||"continue"===f)&&i.tryLoc<=_&&_<=i.finallyLoc&&(i=null);var y=i?i.completion:{};return y.type=f,y.arg=_,i?(this.method="next",this.next=i.finallyLoc,w):this.complete(y)},complete:function(f,_){if("throw"===f.type)throw f.arg;return"break"===f.type||"continue"===f.type?this.next=f.arg:"return"===f.type?(this.rval=this.arg=f.arg,this.method="return",this.next="end"):"normal"===f.type&&_&&(this.next=_),w},finish:function(f){for(var _=this.tryEntries.length-1;_>=0;--_){var D=this.tryEntries[_];if(D.finallyLoc===f)return this.complete(D.completion,D.afterLoc),x(D),w}},catch:function(f){for(var _=this.tryEntries.length-1;_>=0;--_){var D=this.tryEntries[_];if(D.tryLoc===f){var d=D.completion;if("throw"===d.type){var i=d.arg;x(D)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(f,_,D){return this.delegate={iterator:s(f),resultName:_,nextLoc:D},"next"===this.method&&(this.arg=void 0),w}},m}Y.exports=N,Y.exports.__esModule=!0,Y.exports.default=Y.exports},1600:(Y,L,E)=>{var p=E(4738).default;Y.exports=function(m,R){if("object"!==p(m)||null===m)return m;var u=m[Symbol.toPrimitive];if(void 0!==u){var v=u.call(m,R||"default");if("object"!==p(v))return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===R?String:Number)(m)},Y.exports.__esModule=!0,Y.exports.default=Y.exports},8262:(Y,L,E)=>{var p=E(4738).default,N=E(1600);Y.exports=function(R){var u=N(R,"string");return"symbol"===p(u)?u:String(u)},Y.exports.__esModule=!0,Y.exports.default=Y.exports},4738:Y=>{function L(E){return Y.exports=L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},Y.exports.__esModule=!0,Y.exports.default=Y.exports,L(E)}Y.exports=L,Y.exports.__esModule=!0,Y.exports.default=Y.exports},617:(Y,L,E)=>{var p=E(3443)();Y.exports=p;try{regeneratorRuntime=p}catch(N){"object"==typeof globalThis?globalThis.regeneratorRuntime=p:Function("r","regeneratorRuntime = r")(p)}},8239:(Y,L,E)=>{"use strict";function p(m,R,u,v,M,A,T){try{var g=m[A](T),h=g.value}catch(C){return void u(C)}g.done?R(h):Promise.resolve(h).then(v,M)}function N(m){return function(){var R=this,u=arguments;return new Promise(function(v,M){var A=m.apply(R,u);function T(h){p(A,v,M,T,g,"next",h)}function g(h){p(A,v,M,T,g,"throw",h)}T(void 0)})}}E.d(L,{Z:()=>N})},2861:Y=>{"use strict";Y.exports={i8:"1.1.1"}},6638:Y=>{"use strict";Y.exports={i8:"1.1.0"}},1528:Y=>{"use strict";Y.exports={i8:"0.3.3"}},5500:Y=>{"use strict";Y.exports={i8:"0.1.2"}},8464:Y=>{"use strict";Y.exports=JSON.parse('{"i8":"1.2.1-main.94ae8ab"}')},5233:Y=>{"use strict";Y.exports={i8:"0.1.2"}},8593:Y=>{"use strict";Y.exports=JSON.parse('{"_from":"axios@^0.21.4","_id":"axios@0.21.4","_inBundle":false,"_integrity":"sha512-ut5vewkiu8jjGBdqpM44XxjuCjq9LAKeHVmoVfHVzy8eHgxxq8SbAVQNovDA8mVi05kP0Ea/n/UzcSHcTJQfNg==","_location":"/axios","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"axios@^0.21.4","name":"axios","escapedName":"axios","rawSpec":"^0.21.4","saveSpec":null,"fetchSpec":"^0.21.4"},"_requiredBy":["/@microsoft/ocsdk","/@microsoft/omnichannel-ic3core"],"_resolved":"https://registry.npmjs.org/axios/-/axios-0.21.4.tgz","_shasum":"c67b90dc0568e5c1cf2b0b858c43ba28e2eda575","_spec":"axios@^0.21.4","_where":"/home/runner/work/omnichannel-demos/omnichannel-demos/angular-botframework-webchat-control/node_modules/@microsoft/ocsdk","author":{"name":"Matt Zabriskie"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"bugs":{"url":"https://github.com/axios/axios/issues"},"bundleDependencies":false,"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}],"dependencies":{"follow-redirects":"^1.14.0"},"deprecated":false,"description":"Promise based HTTP client for the browser and node.js","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"homepage":"https://axios-http.com","jsdelivr":"dist/axios.min.js","keywords":["xhr","http","ajax","promise","node"],"license":"MIT","main":"index.js","name":"axios","repository":{"type":"git","url":"git+https://github.com/axios/axios.git"},"scripts":{"build":"NODE_ENV=production grunt build","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","examples":"node ./examples/server.js","fix":"eslint --fix lib/**/*.js","postversion":"git push && git push --tags","preversion":"npm test","start":"node ./sandbox/server.js","test":"grunt test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},"typings":"./index.d.ts","unpkg":"dist/axios.min.js","version":"0.21.4"}')},4946:Y=>{"use strict";Y.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},8770:Y=>{"use strict";Y.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},1308:Y=>{"use strict";Y.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},9799:Y=>{"use strict";Y.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},8597:Y=>{"use strict";Y.exports={i8:"6.5.4"}},2562:Y=>{"use strict";Y.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')}},Y=>{Y(Y.s=8952)}]);