(self.webpackChunkangular_botframework_webchat_control=self.webpackChunkangular_botframework_webchat_control||[]).push([[179],{8255:Y=>{function L(T){return Promise.resolve().then(()=>{var p=new Error("Cannot find module '"+T+"'");throw p.code="MODULE_NOT_FOUND",p})}L.keys=()=>[],L.resolve=L,L.id=8255,Y.exports=L},5283:(Y,L,T)=>{"use strict";T.d(L,{_:()=>p});class p extends Error{constructor(x){super(x),this.name="AbortError"}}},8682:(Y,L,T)=>{"use strict";T.r(L),T.d(L,{ChatClient:()=>Qo,ChatThreadClient:()=>Gn});var p={};T.r(p),T.d(p,{AddChatParticipantsRequest:()=>Ue,AddChatParticipantsResult:()=>Ln,ChatError:()=>ut,ChatMessage:()=>Cn,ChatMessageContent:()=>qe,ChatMessageReadReceipt:()=>Ve,ChatMessageReadReceiptsCollection:()=>ct,ChatMessagesCollection:()=>Ge,ChatParticipant:()=>We,ChatParticipantsCollection:()=>ft,ChatThreadItem:()=>ze,ChatThreadProperties:()=>zn,ChatThreadsItemCollection:()=>lt,CommunicationErrorResponse:()=>Mt,CommunicationIdentifierModel:()=>Ke,CommunicationUserIdentifierModel:()=>Zt,CreateChatThreadRequest:()=>gt,CreateChatThreadResult:()=>it,MicrosoftTeamsUserIdentifierModel:()=>ot,PhoneNumberIdentifierModel:()=>nt,SendChatMessageRequest:()=>Nn,SendChatMessageResult:()=>rt,SendReadReceiptRequest:()=>st,SendTypingNotificationRequest:()=>dt,UpdateChatMessageRequest:()=>Dn,UpdateChatThreadRequest:()=>sn});var N=T(8239),y=T(4762),x=T(1326);const u=(0,x.YR)("communication-chat");var g=T(3105),C=T(2305),E=T(9432);const h=(0,T(1259).q)({packagePrefix:"Azure.Communication",namespace:"Microsoft.Communication"});var _=T(8199);const w=oe=>{const{id:$}=oe,te=(0,y._T)(oe,["id"]);return Object.assign(Object.assign({},te),{communicationIdentifier:(0,_.J)($)})},D=oe=>{const{communicationIdentifier:$}=oe,te=(0,y._T)(oe,["communicationIdentifier"]);return Object.assign(Object.assign({},te),{id:(0,_.H)($)})},k=oe=>{const{participants:$,initiatorCommunicationIdentifier:te}=oe,pe=(0,y._T)(oe,["participants","initiatorCommunicationIdentifier"]);let Ce=Object.assign({},pe);if(te){const Pe=(0,_.H)(te);Ce=Object.assign(Object.assign({},Ce),{initiator:Pe})}return $&&(Ce=Object.assign(Object.assign({},Ce),{participants:null==$?void 0:$.map(Pe=>D(Pe))})),Ce},O=oe=>{const{content:$,senderCommunicationIdentifier:te}=oe,pe=(0,y._T)(oe,["content","senderCommunicationIdentifier"]);let Ce=Object.assign({},pe);if($&&(Ce=Object.assign(Object.assign({},Ce),{content:k($)})),te){const Pe=(0,_.H)(te);Ce=Object.assign(Object.assign({},Ce),{sender:Pe})}return Ce},B=oe=>{const{createdByCommunicationIdentifier:$}=oe,te=(0,y._T)(oe,["createdByCommunicationIdentifier"]);return $?Object.assign(Object.assign({},te),{createdBy:(0,_.H)($)}):Object.assign({},te)},j=oe=>{const{senderCommunicationIdentifier:$}=oe,te=(0,y._T)(oe,["senderCommunicationIdentifier"]);return Object.assign(Object.assign({},te),{sender:(0,_.H)($)})};function X(oe){let $="";for(let te=0;te<oe.length;te++)$+=String.fromCharCode(oe[te]);return btoa($)}function K(oe){const $=atob(oe),te=new Uint8Array($.length);for(let pe=0;pe<$.length;pe++)te[pe]=$.charCodeAt(pe);return te}const R="$",r="_";function s(oe,$){return"Composite"!==$&&"Dictionary"!==$&&("string"==typeof oe||"number"==typeof oe||"boolean"==typeof oe||null!==(null==$?void 0:$.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i))||null==oe)}const l=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,f=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;function d(oe,$){var te,pe;const Ce=oe.parsedHeaders;if("HEAD"===oe.request.method)return Object.assign(Object.assign({},Ce),{body:oe.parsedBody});const Pe=$&&$.bodyMapper,Ae=Boolean(null==Pe?void 0:Pe.nullable),Be=null==Pe?void 0:Pe.type.name;if("Stream"===Be)return Object.assign(Object.assign({},Ce),{blobBody:oe.blobBody,readableStreamBody:oe.readableStreamBody});const ht="Composite"===Be&&Pe.type.modelProperties||{},je=Object.keys(ht).some(tt=>""===ht[tt].serializedName);if("Sequence"===Be||je){const tt=null!==(te=oe.parsedBody)&&void 0!==te?te:[];for(const Et of Object.keys(ht))ht[Et].serializedName&&(tt[Et]=null===(pe=oe.parsedBody)||void 0===pe?void 0:pe[Et]);if(Ce)for(const Et of Object.keys(Ce))tt[Et]=Ce[Et];return!Ae||oe.parsedBody||Ce||0!==Object.getOwnPropertyNames(ht).length?tt:null}return function(oe){const $=Object.assign(Object.assign({},oe.headers),oe.body);return oe.hasNullableType&&0===Object.getOwnPropertyNames($).length?oe.shouldWrapBody?{body:null}:null:oe.shouldWrapBody?Object.assign(Object.assign({},oe.headers),{body:oe.body}):$}({body:oe.parsedBody,headers:Ce,hasNullableType:Ae,shouldWrapBody:s(oe.parsedBody,Be)})}class i{constructor($={},te=!1){this.modelMappers=$,this.isXML=te}validateConstraints($,te,pe){const Ce=(Pe,Ae)=>{throw new Error(`"${pe}" with value "${te}" should satisfy the constraint "${Pe}": ${Ae}.`)};if($.constraints&&null!=te){const{ExclusiveMaximum:Pe,ExclusiveMinimum:Ae,InclusiveMaximum:Be,InclusiveMinimum:ht,MaxItems:je,MaxLength:tt,MinItems:Et,MinLength:Tt,MultipleOf:Lt,Pattern:Rt,UniqueItems:Bt}=$.constraints;if(void 0!==Pe&&te>=Pe&&Ce("ExclusiveMaximum",Pe),void 0!==Ae&&te<=Ae&&Ce("ExclusiveMinimum",Ae),void 0!==Be&&te>Be&&Ce("InclusiveMaximum",Be),void 0!==ht&&te<ht&&Ce("InclusiveMinimum",ht),void 0!==je&&te.length>je&&Ce("MaxItems",je),void 0!==tt&&te.length>tt&&Ce("MaxLength",tt),void 0!==Et&&te.length<Et&&Ce("MinItems",Et),void 0!==Tt&&te.length<Tt&&Ce("MinLength",Tt),void 0!==Lt&&te%Lt!=0&&Ce("MultipleOf",Lt),Rt){const nn="string"==typeof Rt?new RegExp(Rt):Rt;("string"!=typeof te||null===te.match(nn))&&Ce("Pattern",Rt)}Bt&&te.some((nn,Kn,Un)=>Un.indexOf(nn)!==Kn)&&Ce("UniqueItems",Bt)}}serialize($,te,pe,Ce={xml:{}}){var Pe,Ae,Be;const ht={xml:{rootName:null!==(Pe=Ce.xml.rootName)&&void 0!==Pe?Pe:"",includeRoot:null!==(Ae=Ce.xml.includeRoot)&&void 0!==Ae&&Ae,xmlCharKey:null!==(Be=Ce.xml.xmlCharKey)&&void 0!==Be?Be:r}};let je={};const tt=$.type.name;pe||(pe=$.serializedName),null!==tt.match(/^Sequence$/i)&&(je=[]),$.isConstant&&(te=$.defaultValue);const{required:Et,nullable:Tt}=$;if(Et&&Tt&&void 0===te)throw new Error(`${pe} cannot be undefined.`);if(Et&&!Tt&&null==te)throw new Error(`${pe} cannot be null or undefined.`);if(!Et&&!1===Tt&&null===te)throw new Error(`${pe} cannot be null.`);return null==te||null!==tt.match(/^any$/i)?je=te:null!==tt.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)?je=function(oe,$,te){if(null!=te)if(null!==oe.match(/^Number$/i)){if("number"!=typeof te)throw new Error(`${$} with value ${te} must be of type number.`)}else if(null!==oe.match(/^String$/i)){if("string"!=typeof te.valueOf())throw new Error(`${$} with value "${te}" must be of type string.`)}else if(null!==oe.match(/^Uuid$/i)){if("string"!=typeof te.valueOf()||!function(oe){return f.test(oe)}(te))throw new Error(`${$} with value "${te}" must be of type string and a valid uuid.`)}else if(null!==oe.match(/^Boolean$/i)){if("boolean"!=typeof te)throw new Error(`${$} with value ${te} must be of type boolean.`)}else if(null!==oe.match(/^Stream$/i)){const pe=typeof te;if(!("string"===pe||"function"==typeof te.pipe||te instanceof ArrayBuffer||ArrayBuffer.isView(te)||("function"==typeof Blob||"object"==typeof Blob)&&te instanceof Blob||"function"===pe))throw new Error(`${$} must be a string, Blob, ArrayBuffer, ArrayBufferView, NodeJS.ReadableStream, or () => NodeJS.ReadableStream.`)}return te}(tt,pe,te):null!==tt.match(/^Enum$/i)?je=function(oe,$,te){if(!$)throw new Error(`Please provide a set of allowedValues to validate ${oe} as an Enum Type.`);if(!$.some(Ce=>"string"==typeof Ce.valueOf()?Ce.toLowerCase()===te.toLowerCase():Ce===te))throw new Error(`${te} is not a valid value for ${oe}. The valid values are: ${JSON.stringify($)}.`);return te}(pe,$.type.allowedValues,te):null!==tt.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)?je=function(oe,$,te){if(null!=$)if(null!==oe.match(/^Date$/i)){if(!($ instanceof Date||"string"==typeof $.valueOf()&&!isNaN(Date.parse($))))throw new Error(`${te} must be an instanceof Date or a string in ISO8601 format.`);$=$ instanceof Date?$.toISOString().substring(0,10):new Date($).toISOString().substring(0,10)}else if(null!==oe.match(/^DateTime$/i)){if(!($ instanceof Date||"string"==typeof $.valueOf()&&!isNaN(Date.parse($))))throw new Error(`${te} must be an instanceof Date or a string in ISO8601 format.`);$=$ instanceof Date?$.toISOString():new Date($).toISOString()}else if(null!==oe.match(/^DateTimeRfc1123$/i)){if(!($ instanceof Date||"string"==typeof $.valueOf()&&!isNaN(Date.parse($))))throw new Error(`${te} must be an instanceof Date or a string in RFC-1123 format.`);$=$ instanceof Date?$.toUTCString():new Date($).toUTCString()}else if(null!==oe.match(/^UnixTime$/i)){if(!($ instanceof Date||"string"==typeof $.valueOf()&&!isNaN(Date.parse($))))throw new Error(`${te} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);$=function(oe){if(oe)return"string"==typeof oe.valueOf()&&(oe=new Date(oe)),Math.floor(oe.getTime()/1e3)}($)}else if(null!==oe.match(/^TimeSpan$/i)&&!function(oe){return l.test(oe)}($))throw new Error(`${te} must be a string in ISO 8601 format. Instead was "${$}".`);return $}(tt,te,pe):null!==tt.match(/^ByteArray$/i)?je=function(oe,$){if(null!=$){if(!($ instanceof Uint8Array))throw new Error(`${oe} must be of type Uint8Array.`);$=X($)}return $}(pe,te):null!==tt.match(/^Base64Url$/i)?je=function(oe,$){if(null!=$){if(!($ instanceof Uint8Array))throw new Error(`${oe} must be of type Uint8Array.`);$=function(oe){if(oe){if(!(oe instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");return function(oe,$){let te=oe.length;for(;te-1>=0&&"="===oe[te-1];)--te;return oe.substr(0,te)}(X(oe)).replace(/\+/g,"-").replace(/\//g,"_")}}($)}return $}(pe,te):null!==tt.match(/^Sequence$/i)?je=function(oe,$,te,pe,Ce,Pe){var Ae;if(!Array.isArray(te))throw new Error(`${pe} must be of type Array.`);let Be=$.type.element;if(!Be||"object"!=typeof Be)throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${pe}.`);"Composite"===Be.type.name&&Be.type.className&&(Be=null!==(Ae=oe.modelMappers[Be.type.className])&&void 0!==Ae?Ae:Be);const ht=[];for(let je=0;je<te.length;je++){const tt=oe.serialize(Be,te[je],pe,Pe);if(Ce&&Be.xmlNamespace){const Et=Be.xmlNamespacePrefix?`xmlns:${Be.xmlNamespacePrefix}`:"xmlns";"Composite"===Be.type.name?(ht[je]=Object.assign({},tt),ht[je][R]={[Et]:Be.xmlNamespace}):(ht[je]={},ht[je][Pe.xml.xmlCharKey]=tt,ht[je][R]={[Et]:Be.xmlNamespace})}else ht[je]=tt}return ht}(this,$,te,pe,Boolean(this.isXML),ht):null!==tt.match(/^Dictionary$/i)?je=function(oe,$,te,pe,Ce,Pe){if("object"!=typeof te)throw new Error(`${pe} must be of type object.`);const Ae=$.type.value;if(!Ae||"object"!=typeof Ae)throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${pe}.`);const Be={};for(const ht of Object.keys(te)){const je=oe.serialize(Ae,te[ht],pe,Pe);Be[ht]=le(Ae,je,Ce,Pe)}if(Ce&&$.xmlNamespace){const je=Be;return je[R]={[$.xmlNamespacePrefix?`xmlns:${$.xmlNamespacePrefix}`:"xmlns"]:$.xmlNamespace},je}return Be}(this,$,te,pe,Boolean(this.isXML),ht):null!==tt.match(/^Composite$/i)&&(je=function(oe,$,te,pe,Ce,Pe){if(Ye(oe,$)&&($=Me(oe,$,te,"clientName")),null!=te){const Ae={},Be=ee(oe,$,pe);for(const je of Object.keys(Be)){const tt=Be[je];if(tt.readOnly)continue;let Et,Tt=Ae;if(oe.isXML)Et=tt.xmlIsWrapped?tt.xmlName:tt.xmlElementName||tt.xmlName;else{const Lt=ce(tt.serializedName);Et=Lt.pop();for(const Rt of Lt)null==Tt[Rt]&&(null!=te[je]||void 0!==tt.defaultValue)&&(Tt[Rt]={}),Tt=Tt[Rt]}if(null!=Tt){if(Ce&&$.xmlNamespace){const Kn=$.xmlNamespacePrefix?`xmlns:${$.xmlNamespacePrefix}`:"xmlns";Tt[R]=Object.assign(Object.assign({},Tt[R]),{[Kn]:$.xmlNamespace})}const Lt=""!==tt.serializedName?pe+"."+tt.serializedName:pe;let Rt=te[je];const Bt=Ye(oe,$);Bt&&Bt.clientName===je&&null==Rt&&(Rt=$.serializedName);const nn=oe.serialize(tt,Rt,Lt,Pe);if(void 0!==nn&&null!=Et){const Kn=le(tt,nn,Ce,Pe);Ce&&tt.xmlIsAttribute?(Tt[R]=Tt[R]||{},Tt[R][Et]=nn):Tt[Et]=Ce&&tt.xmlIsWrapped?{[tt.xmlElementName]:Kn}:Kn}}}const ht=function(oe,$,te){const pe=$.type.additionalProperties;if(!pe&&$.type.className){const Ce=ie(oe,$,te);return null==Ce?void 0:Ce.type.additionalProperties}return pe}(oe,$,pe);if(ht){const je=Object.keys(Be);for(const tt in te)je.every(Tt=>Tt!==tt)&&(Ae[tt]=oe.serialize(ht,te[tt],pe+'["'+tt+'"]',Pe))}return Ae}return te}(this,$,te,pe,Boolean(this.isXML),ht)),je}deserialize($,te,pe,Ce={xml:{}}){var Pe,Ae,Be;const ht={xml:{rootName:null!==(Pe=Ce.xml.rootName)&&void 0!==Pe?Pe:"",includeRoot:null!==(Ae=Ce.xml.includeRoot)&&void 0!==Ae&&Ae,xmlCharKey:null!==(Be=Ce.xml.xmlCharKey)&&void 0!==Be?Be:r}};if(null==te)return this.isXML&&"Sequence"===$.type.name&&!$.xmlIsWrapped&&(te=[]),void 0!==$.defaultValue&&(te=$.defaultValue),te;let je;const tt=$.type.name;if(pe||(pe=$.serializedName),null!==tt.match(/^Composite$/i))je=function(oe,$,te,pe,Ce){var Pe,Ae;const Be=null!==(Pe=Ce.xml.xmlCharKey)&&void 0!==Pe?Pe:r;Ye(oe,$)&&($=Me(oe,$,te,"serializedName"));const ht=ee(oe,$,pe);let je={};const tt=[];for(const Tt of Object.keys(ht)){const Lt=ht[Tt],Rt=ce(ht[Tt].serializedName);tt.push(Rt[0]);const{serializedName:Bt,xmlName:nn,xmlElementName:Kn}=Lt;let Un=pe;""!==Bt&&void 0!==Bt&&(Un=pe+"."+Bt);const yi=Lt.headerCollectionPrefix;if(yi){const On={};for(const sr of Object.keys(te))sr.startsWith(yi)&&(On[sr.substring(yi.length)]=oe.deserialize(Lt.type.value,te[sr],Un,Ce)),tt.push(sr);je[Tt]=On}else if(oe.isXML)if(Lt.xmlIsAttribute&&te[R])je[Tt]=oe.deserialize(Lt,te[R][nn],Un,Ce);else if(Lt.xmlIsMsText)void 0!==te[Be]?je[Tt]=te[Be]:"string"==typeof te&&(je[Tt]=te);else{const On=Kn||nn||Bt;if(Lt.xmlIsWrapped){const sr=te[nn],co=null!==(Ae=null==sr?void 0:sr[Kn])&&void 0!==Ae?Ae:[];je[Tt]=oe.deserialize(Lt,co,Un,Ce),tt.push(nn)}else je[Tt]=oe.deserialize(Lt,te[On],Un,Ce),tt.push(On)}else{let On,sr=te;for(const Wr of Rt){if(!sr)break;sr=sr[Wr]}On=sr;const co=$.type.polymorphicDiscriminator;let Yo;if(co&&Tt===co.clientName&&null==On&&(On=$.serializedName),Array.isArray(te[Tt])&&""===ht[Tt].serializedName){On=te[Tt];const Wr=oe.deserialize(Lt,On,Un,Ce);for(const[ks,Ga]of Object.entries(je))Object.prototype.hasOwnProperty.call(Wr,ks)||(Wr[ks]=Ga);je=Wr}else(void 0!==On||void 0!==Lt.defaultValue)&&(Yo=oe.deserialize(Lt,On,Un,Ce),je[Tt]=Yo)}}const Et=$.type.additionalProperties;if(Et){const Tt=Lt=>{for(const Rt in ht)if(ce(ht[Rt].serializedName)[0]===Lt)return!1;return!0};for(const Lt in te)Tt(Lt)&&(je[Lt]=oe.deserialize(Et,te[Lt],pe+'["'+Lt+'"]',Ce))}else if(te)for(const Tt of Object.keys(te))void 0===je[Tt]&&!tt.includes(Tt)&&!Oe(Tt,Ce)&&(je[Tt]=te[Tt]);return je}(this,$,te,pe,ht);else{if(this.isXML){const Et=ht.xml.xmlCharKey;void 0!==te[R]&&void 0!==te[Et]&&(te=te[Et])}null!==tt.match(/^Number$/i)?(je=parseFloat(te),isNaN(je)&&(je=te)):null!==tt.match(/^Boolean$/i)?je="true"===te||"false"!==te&&te:null!==tt.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)?je=te:null!==tt.match(/^(Date|DateTime|DateTimeRfc1123)$/i)?je=new Date(te):null!==tt.match(/^UnixTime$/i)?je=function(oe){if(oe)return new Date(1e3*oe)}(te):null!==tt.match(/^ByteArray$/i)?je=K(te):null!==tt.match(/^Base64Url$/i)?je=function(oe){if(oe){if(oe&&"string"!=typeof oe.valueOf())throw new Error("Please provide an input of type string for converting to Uint8Array");return K(oe=oe.replace(/-/g,"+").replace(/_/g,"/"))}}(te):null!==tt.match(/^Sequence$/i)?je=function(oe,$,te,pe,Ce){var Pe;let Ae=$.type.element;if(!Ae||"object"!=typeof Ae)throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${pe}`);if(te){Array.isArray(te)||(te=[te]),"Composite"===Ae.type.name&&Ae.type.className&&(Ae=null!==(Pe=oe.modelMappers[Ae.type.className])&&void 0!==Pe?Pe:Ae);const Be=[];for(let ht=0;ht<te.length;ht++)Be[ht]=oe.deserialize(Ae,te[ht],`${pe}[${ht}]`,Ce);return Be}return te}(this,$,te,pe,ht):null!==tt.match(/^Dictionary$/i)&&(je=function(oe,$,te,pe,Ce){const Pe=$.type.value;if(!Pe||"object"!=typeof Pe)throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${pe}`);if(te){const Ae={};for(const Be of Object.keys(te))Ae[Be]=oe.deserialize(Pe,te[Be],pe,Ce);return Ae}return te}(this,$,te,pe,ht))}return $.isConstant&&(je=$.defaultValue),je}}function m(oe={},$=!1){return new i(oe,$)}function ce(oe){const $=[];let te="";if(oe){const pe=oe.split(".");for(const Ce of pe)"\\"===Ce.charAt(Ce.length-1)?te+=Ce.substr(0,Ce.length-1)+".":(te+=Ce,$.push(te),te="")}return $}function ie(oe,$,te){const pe=$.type.className;if(!pe)throw new Error(`Class name for model "${te}" is not provided in the mapper "${JSON.stringify($,void 0,2)}".`);return oe.modelMappers[pe]}function ee(oe,$,te){let pe=$.type.modelProperties;if(!pe){const Ce=ie(oe,$,te);if(!Ce)throw new Error(`mapper() cannot be null or undefined for model "${$.type.className}".`);if(pe=null==Ce?void 0:Ce.type.modelProperties,!pe)throw new Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(Ce)}" of type "${$.type.className}" for object "${te}".`)}return pe}function le(oe,$,te,pe){if(!te||!oe.xmlNamespace)return $;const Pe={[oe.xmlNamespacePrefix?`xmlns:${oe.xmlNamespacePrefix}`:"xmlns"]:oe.xmlNamespace};if(["Composite"].includes(oe.type.name)){if($[R])return $;{const Be=Object.assign({},$);return Be[R]=Pe,Be}}const Ae={};return Ae[pe.xml.xmlCharKey]=$,Ae[R]=Pe,Ae}function Oe(oe,$){return[R,$.xml.xmlCharKey].includes(oe)}function Me(oe,$,te,pe){var Ce;const Pe=Ye(oe,$);if(Pe){let Ae=Pe[pe];if(Ae){"serializedName"===pe&&(Ae=Ae.replace(/\\/gi,""));const Be=te[Ae],ht=null!==(Ce=$.type.uberParent)&&void 0!==Ce?Ce:$.type.className;if("string"==typeof Be&&ht){const je=function(oe,$,te){const pe=[te];for(;pe.length;){const Ce=pe.shift(),Pe=$===Ce?$:Ce+"."+$;if(Object.prototype.hasOwnProperty.call(oe,Pe))return oe[Pe];for(const[Ae,Be]of Object.entries(oe))Ae.startsWith(Ce+".")&&Be.type.uberParent===Ce&&Be.type.className&&pe.push(Be.type.className)}}(oe.modelMappers.discriminators,Be,ht);je&&($=je)}}}return $}function Ye(oe,$){return $.type.polymorphicDiscriminator||De(oe,$.type.uberParent)||De(oe,$.type.className)}function De(oe,$){return $&&oe.modelMappers[$]&&oe.modelMappers[$].type.polymorphicDiscriminator}const ct={type:{name:"Composite",className:"ChatMessageReadReceiptsCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatMessageReadReceipt"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Ve={type:{name:"Composite",className:"ChatMessageReadReceipt",modelProperties:{senderCommunicationIdentifier:{serializedName:"senderCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},chatMessageId:{serializedName:"chatMessageId",required:!0,type:{name:"String"}},readOn:{serializedName:"readOn",required:!0,type:{name:"DateTime"}}}}},Ke={type:{name:"Composite",className:"CommunicationIdentifierModel",modelProperties:{rawId:{serializedName:"rawId",type:{name:"String"}},communicationUser:{serializedName:"communicationUser",type:{name:"Composite",className:"CommunicationUserIdentifierModel"}},phoneNumber:{serializedName:"phoneNumber",type:{name:"Composite",className:"PhoneNumberIdentifierModel"}},microsoftTeamsUser:{serializedName:"microsoftTeamsUser",type:{name:"Composite",className:"MicrosoftTeamsUserIdentifierModel"}}}}},Zt={type:{name:"Composite",className:"CommunicationUserIdentifierModel",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}}}}},nt={type:{name:"Composite",className:"PhoneNumberIdentifierModel",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"String"}}}}},ot={type:{name:"Composite",className:"MicrosoftTeamsUserIdentifierModel",modelProperties:{userId:{serializedName:"userId",required:!0,type:{name:"String"}},isAnonymous:{serializedName:"isAnonymous",type:{name:"Boolean"}},cloud:{serializedName:"cloud",type:{name:"String"}}}}},Mt={type:{name:"Composite",className:"CommunicationErrorResponse",modelProperties:{error:{serializedName:"error",type:{name:"Composite",className:"ChatError"}}}}},ut={type:{name:"Composite",className:"ChatError",modelProperties:{code:{serializedName:"code",required:!0,type:{name:"String"}},message:{serializedName:"message",required:!0,type:{name:"String"}},target:{serializedName:"target",readOnly:!0,type:{name:"String"}},details:{serializedName:"details",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}},innerError:{serializedName:"innererror",type:{name:"Composite",className:"ChatError"}}}}},st={type:{name:"Composite",className:"SendReadReceiptRequest",modelProperties:{chatMessageId:{serializedName:"chatMessageId",required:!0,type:{name:"String"}}}}},Nn={type:{name:"Composite",className:"SendChatMessageRequest",modelProperties:{content:{serializedName:"content",required:!0,type:{name:"String"}},senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}},type:{serializedName:"type",type:{name:"Enum",allowedValues:["text","html","topicUpdated","participantAdded","participantRemoved"]}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},rt={type:{name:"Composite",className:"SendChatMessageResult",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}}}}},Ge={type:{name:"Composite",className:"ChatMessagesCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatMessage"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Cn={type:{name:"Composite",className:"ChatMessage",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},type:{serializedName:"type",required:!0,type:{name:"Enum",allowedValues:["text","html","topicUpdated","participantAdded","participantRemoved"]}},sequenceId:{serializedName:"sequenceId",required:!0,type:{name:"String"}},version:{serializedName:"version",required:!0,type:{name:"String"}},content:{serializedName:"content",type:{name:"Composite",className:"ChatMessageContent"}},senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}},createdOn:{serializedName:"createdOn",required:!0,type:{name:"DateTime"}},senderCommunicationIdentifier:{serializedName:"senderCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},editedOn:{serializedName:"editedOn",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},qe={type:{name:"Composite",className:"ChatMessageContent",modelProperties:{message:{serializedName:"message",type:{name:"String"}},topic:{serializedName:"topic",type:{name:"String"}},participants:{serializedName:"participants",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},initiatorCommunicationIdentifier:{serializedName:"initiatorCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}}}}},We={type:{name:"Composite",className:"ChatParticipant",modelProperties:{communicationIdentifier:{serializedName:"communicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},displayName:{serializedName:"displayName",type:{name:"String"}},shareHistoryTime:{serializedName:"shareHistoryTime",type:{name:"DateTime"}}}}},Dn={type:{name:"Composite",className:"UpdateChatMessageRequest",modelProperties:{content:{serializedName:"content",type:{name:"String"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},ft={type:{name:"Composite",className:"ChatParticipantsCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Ue={type:{name:"Composite",className:"AddChatParticipantsRequest",modelProperties:{participants:{serializedName:"participants",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}}}}},Ln={type:{name:"Composite",className:"AddChatParticipantsResult",modelProperties:{invalidParticipants:{serializedName:"invalidParticipants",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}}}}},gt={type:{name:"Composite",className:"CreateChatThreadRequest",modelProperties:{topic:{serializedName:"topic",required:!0,type:{name:"String"}},participants:{serializedName:"participants",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}}}}},it={type:{name:"Composite",className:"CreateChatThreadResult",modelProperties:{chatThread:{serializedName:"chatThread",type:{name:"Composite",className:"ChatThreadProperties"}},invalidParticipants:{serializedName:"invalidParticipants",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}}}}},zn={type:{name:"Composite",className:"ChatThreadProperties",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},topic:{serializedName:"topic",required:!0,type:{name:"String"}},createdOn:{serializedName:"createdOn",required:!0,type:{name:"DateTime"}},createdByCommunicationIdentifier:{serializedName:"createdByCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}}}}},lt={type:{name:"Composite",className:"ChatThreadsItemCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatThreadItem"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},ze={type:{name:"Composite",className:"ChatThreadItem",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},topic:{serializedName:"topic",required:!0,type:{name:"String"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},lastMessageReceivedOn:{serializedName:"lastMessageReceivedOn",readOnly:!0,type:{name:"DateTime"}}}}},sn={type:{name:"Composite",className:"UpdateChatThreadRequest",modelProperties:{topic:{serializedName:"topic",type:{name:"String"}}}}},dt={type:{name:"Composite",className:"SendTypingNotificationRequest",modelProperties:{senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}}}}},Xe={parameterPath:"accept",mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},Qt={parameterPath:"endpoint",mapper:{serializedName:"endpoint",required:!0,type:{name:"String"}},skipEncoding:!0},Qe={parameterPath:"chatThreadId",mapper:{serializedName:"chatThreadId",required:!0,type:{name:"String"}}},Ze={parameterPath:["options","maxPageSize"],mapper:{serializedName:"maxPageSize",type:{name:"Number"}}},Pn={parameterPath:["options","skip"],mapper:{serializedName:"skip",type:{name:"Number"}}},Je={parameterPath:"apiVersion",mapper:{defaultValue:"2021-09-07",isConstant:!0,serializedName:"api-version",type:{name:"String"}}},at={parameterPath:["options","contentType"],mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},un={parameterPath:"sendReadReceiptRequest",mapper:st},Vt={parameterPath:"sendChatMessageRequest",mapper:Nn},Ht={parameterPath:["options","startTime"],mapper:{serializedName:"startTime",type:{name:"DateTime"}}},bn={parameterPath:"chatMessageId",mapper:{serializedName:"chatMessageId",required:!0,type:{name:"String"}}},dn={parameterPath:["options","contentType"],mapper:{defaultValue:"application/merge-patch+json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},pn={parameterPath:"updateChatMessageRequest",mapper:Dn},In={parameterPath:"participantCommunicationIdentifier",mapper:Ke},rn={parameterPath:"addChatParticipantsRequest",mapper:Ue},Mn={parameterPath:"updateChatThreadRequest",mapper:sn},$t={parameterPath:["options","sendTypingNotificationRequest"],mapper:dt},Nt={parameterPath:"nextLink",mapper:{serializedName:"nextLink",required:!0,type:{name:"String"}},skipEncoding:!0},xn={parameterPath:"createChatThreadRequest",mapper:gt};class _n{constructor($){this.client=$}listChatReadReceipts($,te){return this.client.sendOperationRequest({chatThreadId:$,options:te},Rn)}sendChatReadReceipt($,te,pe){return this.client.sendOperationRequest({chatThreadId:$,sendReadReceiptRequest:te,options:pe},Jt)}sendChatMessage($,te,pe){return this.client.sendOperationRequest({chatThreadId:$,sendChatMessageRequest:te,options:pe},tn)}listChatMessages($,te){return this.client.sendOperationRequest({chatThreadId:$,options:te},Sn)}getChatMessage($,te,pe){return this.client.sendOperationRequest({chatThreadId:$,chatMessageId:te,options:pe},Oi)}updateChatMessage($,te,pe,Ce){return this.client.sendOperationRequest({chatThreadId:$,chatMessageId:te,updateChatMessageRequest:pe,options:Ce},ki)}deleteChatMessage($,te,pe){return this.client.sendOperationRequest({chatThreadId:$,chatMessageId:te,options:pe},Ni)}listChatParticipants($,te){return this.client.sendOperationRequest({chatThreadId:$,options:te},wo)}removeChatParticipant($,te,pe){return this.client.sendOperationRequest({chatThreadId:$,participantCommunicationIdentifier:te,options:pe},Uo)}addChatParticipants($,te,pe){return this.client.sendOperationRequest({chatThreadId:$,addChatParticipantsRequest:te,options:pe},ps)}updateChatThreadProperties($,te,pe){return this.client.sendOperationRequest({chatThreadId:$,updateChatThreadRequest:te,options:pe},Co)}getChatThreadProperties($,te){return this.client.sendOperationRequest({chatThreadId:$,options:te},Ut)}sendTypingNotification($,te){return this.client.sendOperationRequest({chatThreadId:$,options:te},Vo)}listChatReadReceiptsNext($,te,pe){return this.client.sendOperationRequest({chatThreadId:$,nextLink:te,options:pe},Ur)}listChatMessagesNext($,te,pe){return this.client.sendOperationRequest({chatThreadId:$,nextLink:te,options:pe},$r)}listChatParticipantsNext($,te,pe){return this.client.sendOperationRequest({chatThreadId:$,nextLink:te,options:pe},Mo)}}const xt=m(p,!1),Rn={path:"/chat/threads/{chatThreadId}/readReceipts",httpMethod:"GET",responses:{200:{bodyMapper:ct},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},queryParameters:[Ze,Pn,Je],urlParameters:[Qt,Qe],headerParameters:[Xe],serializer:xt},Jt={path:"/chat/threads/{chatThreadId}/readReceipts",httpMethod:"POST",responses:{200:{},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},requestBody:un,queryParameters:[Je],urlParameters:[Qt,Qe],headerParameters:[Xe,at],mediaType:"json",serializer:xt},tn={path:"/chat/threads/{chatThreadId}/messages",httpMethod:"POST",responses:{201:{bodyMapper:rt},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},requestBody:Vt,queryParameters:[Je],urlParameters:[Qt,Qe],headerParameters:[Xe,at],mediaType:"json",serializer:xt},Sn={path:"/chat/threads/{chatThreadId}/messages",httpMethod:"GET",responses:{200:{bodyMapper:Ge},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},queryParameters:[Ze,Je,Ht],urlParameters:[Qt,Qe],headerParameters:[Xe],serializer:xt},Oi={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"GET",responses:{200:{bodyMapper:Cn},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},queryParameters:[Je],urlParameters:[Qt,Qe,bn],headerParameters:[Xe],serializer:xt},ki={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"PATCH",responses:{204:{},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},requestBody:pn,queryParameters:[Je],urlParameters:[Qt,Qe,bn],headerParameters:[Xe,dn],mediaType:"json",serializer:xt},Ni={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"DELETE",responses:{204:{},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},queryParameters:[Je],urlParameters:[Qt,Qe,bn],headerParameters:[Xe],serializer:xt},wo={path:"/chat/threads/{chatThreadId}/participants",httpMethod:"GET",responses:{200:{bodyMapper:ft},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},queryParameters:[Ze,Pn,Je],urlParameters:[Qt,Qe],headerParameters:[Xe],serializer:xt},Uo={path:"/chat/threads/{chatThreadId}/participants/:remove",httpMethod:"POST",responses:{204:{},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},requestBody:In,queryParameters:[Je],urlParameters:[Qt,Qe],headerParameters:[Xe,at],mediaType:"json",serializer:xt},ps={path:"/chat/threads/{chatThreadId}/participants/:add",httpMethod:"POST",responses:{201:{bodyMapper:Ln},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},requestBody:rn,queryParameters:[Je],urlParameters:[Qt,Qe],headerParameters:[Xe,at],mediaType:"json",serializer:xt},Co={path:"/chat/threads/{chatThreadId}",httpMethod:"PATCH",responses:{204:{},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},requestBody:Mn,queryParameters:[Je],urlParameters:[Qt,Qe],headerParameters:[Xe,dn],mediaType:"json",serializer:xt},Ut={path:"/chat/threads/{chatThreadId}",httpMethod:"GET",responses:{200:{bodyMapper:zn},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},queryParameters:[Je],urlParameters:[Qt,Qe],headerParameters:[Xe],serializer:xt},Vo={path:"/chat/threads/{chatThreadId}/typing",httpMethod:"POST",responses:{200:{},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},requestBody:$t,queryParameters:[Je],urlParameters:[Qt,Qe],headerParameters:[Xe,at],mediaType:"json",serializer:xt},Ur={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:ct},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},queryParameters:[Ze,Pn,Je],urlParameters:[Qt,Qe,Nt],headerParameters:[Xe],serializer:xt},$r={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Ge},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},queryParameters:[Ze,Je,Ht],urlParameters:[Qt,Qe,Nt],headerParameters:[Xe],serializer:xt},Mo={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:ft},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},queryParameters:[Ze,Pn,Je],urlParameters:[Qt,Qe,Nt],headerParameters:[Xe],serializer:xt};class xa{constructor($){this.client=$}createChatThread($,te){return this.client.sendOperationRequest({createChatThreadRequest:$,options:te},br)}listChatThreads($){return this.client.sendOperationRequest({options:$},Ku)}deleteChatThread($,te){return this.client.sendOperationRequest({chatThreadId:$,options:te},gs)}listChatThreadsNext($,te){return this.client.sendOperationRequest({nextLink:$,options:te},Jn)}}const Vr=m(p,!1),br={path:"/chat/threads",httpMethod:"POST",responses:{201:{bodyMapper:it},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},requestBody:xn,queryParameters:[Je],urlParameters:[Qt],headerParameters:[Xe,at,{parameterPath:["options","repeatabilityRequestId"],mapper:{serializedName:"repeatability-request-id",type:{name:"String"}}}],mediaType:"json",serializer:Vr},Ku={path:"/chat/threads",httpMethod:"GET",responses:{200:{bodyMapper:lt},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},queryParameters:[Ze,Je,Ht],urlParameters:[Qt],headerParameters:[Xe],serializer:Vr},gs={path:"/chat/threads/{chatThreadId}",httpMethod:"DELETE",responses:{204:{},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},queryParameters:[Je],urlParameters:[Qt,Qe],headerParameters:[Xe],serializer:Vr},Jn={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:lt},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},queryParameters:[Ze,Je,Ht],urlParameters:[Qt,Nt],headerParameters:[Xe],serializer:Vr};function _o(oe){return oe.toLowerCase()}class Ho{constructor($){if(this._headersMap=new Map,$)for(const te of Object.keys($))this.set(te,$[te])}set($,te){this._headersMap.set(_o($),{name:$,value:String(te)})}get($){var te;return null===(te=this._headersMap.get(_o($)))||void 0===te?void 0:te.value}has($){return this._headersMap.has(_o($))}delete($){this._headersMap.delete(_o($))}toJSON($={}){const te={};if($.preserveCase)for(const pe of this._headersMap.values())te[pe.name]=pe.value;else for(const[pe,Ce]of this._headersMap)te[pe]=Ce.value;return te}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return function*(oe){for(const $ of oe.values())yield[$.name,$.value]}(this._headersMap)}}function vs(oe){return new Ho(oe)}var cn,Nc=new Uint8Array(16);function Ju(){if(!cn&&!(cn="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return cn(Nc)}const Li=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,to=function(oe){return"string"==typeof oe&&Li.test(oe)};for(var Zn=[],no=0;no<256;++no)Zn.push((no+256).toString(16).substr(1));const di=function(oe,$,te){var pe=(oe=oe||{}).random||(oe.rng||Ju)();if(pe[6]=15&pe[6]|64,pe[8]=63&pe[8]|128,$){te=te||0;for(var Ce=0;Ce<16;++Ce)$[te+Ce]=pe[Ce];return $}return function(oe){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,te=(Zn[oe[$+0]]+Zn[oe[$+1]]+Zn[oe[$+2]]+Zn[oe[$+3]]+"-"+Zn[oe[$+4]]+Zn[oe[$+5]]+"-"+Zn[oe[$+6]]+Zn[oe[$+7]]+"-"+Zn[oe[$+8]]+Zn[oe[$+9]]+"-"+Zn[oe[$+10]]+Zn[oe[$+11]]+Zn[oe[$+12]]+Zn[oe[$+13]]+Zn[oe[$+14]]+Zn[oe[$+15]]).toLowerCase();if(!to(te))throw TypeError("Stringified UUID is invalid");return te}(pe)};class zo{constructor($){var te,pe,Ce,Pe,Ae,Be,ht;this.url=$.url,this.body=$.body,this.headers=null!==(te=$.headers)&&void 0!==te?te:vs(),this.method=null!==(pe=$.method)&&void 0!==pe?pe:"GET",this.timeout=null!==(Ce=$.timeout)&&void 0!==Ce?Ce:0,this.formData=$.formData,this.disableKeepAlive=null!==(Pe=$.disableKeepAlive)&&void 0!==Pe&&Pe,this.proxySettings=$.proxySettings,this.streamResponseStatusCodes=$.streamResponseStatusCodes,this.withCredentials=null!==(Ae=$.withCredentials)&&void 0!==Ae&&Ae,this.abortSignal=$.abortSignal,this.tracingOptions=$.tracingOptions,this.onUploadProgress=$.onUploadProgress,this.onDownloadProgress=$.onDownloadProgress,this.requestId=$.requestId||di(),this.allowInsecureConnection=null!==(Be=$.allowInsecureConnection)&&void 0!==Be&&Be,this.enableBrowserStreams=null!==(ht=$.enableBrowserStreams)&&void 0!==ht&&ht}}function Wo(oe){return!("object"!=typeof oe||null===oe||Array.isArray(oe)||oe instanceof RegExp||oe instanceof Date)}function ro(oe){if(Wo(oe)){const te="string"==typeof oe.message;return"string"==typeof oe.name&&te}return!1}function hi(oe){if(ro(oe))return oe.message;{let $;try{$="object"==typeof oe&&oe?JSON.stringify(oe):String(oe)}catch(te){$="[unable to stringify input]"}return`Unknown error ${$}`}}const io={},So="REDACTED",Eo=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],_r=["api-version"];class tr{constructor({additionalAllowedHeaderNames:$=[],additionalAllowedQueryParameters:te=[]}={}){$=Eo.concat($),te=_r.concat(te),this.allowedHeaderNames=new Set($.map(pe=>pe.toLowerCase())),this.allowedQueryParameters=new Set(te.map(pe=>pe.toLowerCase()))}sanitize($){const te=new Set;return JSON.stringify($,(pe,Ce)=>{if(Ce instanceof Error)return Object.assign(Object.assign({},Ce),{name:Ce.name,message:Ce.message});if("headers"===pe)return this.sanitizeHeaders(Ce);if("url"===pe)return this.sanitizeUrl(Ce);if("query"===pe)return this.sanitizeQuery(Ce);if("body"!==pe&&"response"!==pe&&"operationSpec"!==pe){if(Array.isArray(Ce)||Wo(Ce)){if(te.has(Ce))return"[Circular]";te.add(Ce)}return Ce}},2)}sanitizeHeaders($){const te={};for(const pe of Object.keys($))te[pe]=this.allowedHeaderNames.has(pe.toLowerCase())?$[pe]:So;return te}sanitizeQuery($){if("object"!=typeof $||null===$)return $;const te={};for(const pe of Object.keys($))te[pe]=this.allowedQueryParameters.has(pe.toLowerCase())?$[pe]:So;return te}sanitizeUrl($){if("string"!=typeof $||null===$)return $;const te=new URL($);if(!te.search)return $;for(const[pe]of te.searchParams)this.allowedQueryParameters.has(pe.toLowerCase())||te.searchParams.set(pe,So);return te.toString()}}const cr=new tr;let ur=(()=>{class oe extends Error{constructor(te,pe={}){super(te),this.name="RestError",this.code=pe.code,this.statusCode=pe.statusCode,this.request=pe.request,this.response=pe.response,Object.setPrototypeOf(this,oe.prototype)}[io](){return`RestError: ${this.message} \n ${cr.sanitize(this)}`}}return oe.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",oe.PARSE_ERROR="PARSE_ERROR",oe})();function fr(oe,$,te){let pe=$.parameterPath;const Ce=$.mapper;let Pe;if("string"==typeof pe&&(pe=[pe]),Array.isArray(pe)){if(pe.length>0)if(Ce.isConstant)Pe=Ce.defaultValue;else{let Ae=bs(oe,pe);!Ae.propertyFound&&te&&(Ae=bs(te,pe));let Be=!1;Ae.propertyFound||(Be=Ce.required||"options"===pe[0]&&2===pe.length),Pe=Be?Ce.defaultValue:Ae.propertyValue}}else{Ce.required&&(Pe={});for(const Ae in pe){const je=fr(oe,{parameterPath:pe[Ae],mapper:Ce.type.modelProperties[Ae]},te);void 0!==je&&(Pe||(Pe={}),Pe[Ae]=je)}}return Pe}function bs(oe,$){const te={propertyFound:!1};let pe=0;for(;pe<$.length;++pe){const Ce=$[pe];if(!oe||!(Ce in oe))break;oe=oe[Ce]}return pe===$.length&&(te.propertyValue=oe,te.propertyFound=!0),te}const Sr=new WeakMap,It=Symbol.for("@azure/core-client original request");function Tn(oe){if(function(oe){return It in oe}(oe))return Tn(oe[It]);let $=Sr.get(oe);return $||($={},Sr.set(oe,$)),$}const Er=["application/json","text/json"],pi=["application/xml","application/atom+xml"];function Wn(oe){let $;const pe=Tn(oe.request),Ce=null==pe?void 0:pe.operationSpec;return Ce&&($=(null==pe?void 0:pe.operationResponseGetter)?null==pe?void 0:pe.operationResponseGetter(Ce,oe):Ce.responses[oe.status]),$}function To(oe){const te=Tn(oe.request),pe=null==te?void 0:te.shouldDeserialize;let Ce;return Ce=void 0===pe||("boolean"==typeof pe?pe:pe(oe)),Ce}function Kt(){return(Kt=(0,N.Z)(function*(oe,$,te,pe,Ce){const Pe=yield Go(oe,$,te,pe,Ce);if(!To(Pe))return Pe;const Ae=Tn(Pe.request),Be=null==Ae?void 0:Ae.operationSpec;if(!Be||!Be.responses)return Pe;const ht=Wn(Pe),{error:je,shouldReturnResponse:tt}=Xr(Pe,Be,ht,pe);if(je)throw je;if(tt)return Pe;if(ht){if(ht.bodyMapper){let Et=Pe.parsedBody;Be.isXML&&"Sequence"===ht.bodyMapper.type.name&&(Et="object"==typeof Et?Et[ht.bodyMapper.xmlElementName]:[]);try{Pe.parsedBody=Be.serializer.deserialize(ht.bodyMapper,Et,"operationRes.parsedBody",pe)}catch(Tt){throw new ur(`Error ${Tt} occurred in deserializing the responseBody - ${Pe.bodyAsText}`,{statusCode:Pe.status,request:Pe.request,response:Pe})}}else"HEAD"===Be.httpMethod&&(Pe.parsedBody=te.status>=200&&te.status<300);ht.headersMapper&&(Pe.parsedHeaders=Be.serializer.deserialize(ht.headersMapper,Pe.headers.toJSON(),"operationRes.parsedHeaders"))}return Pe})).apply(this,arguments)}function Xr(oe,$,te,pe){var Ce;const Pe=200<=oe.status&&oe.status<300;if(function(oe){const $=Object.keys(oe.responses);return 0===$.length||1===$.length&&"default"===$[0]}($)?Pe:te){if(!te)return{error:null,shouldReturnResponse:!1};if(!te.isError)return{error:null,shouldReturnResponse:!1}}const Be=null!=te?te:$.responses.default,ht=(null===(Ce=oe.request.streamResponseStatusCodes)||void 0===Ce?void 0:Ce.has(oe.status))?`Unexpected status code: ${oe.status}`:oe.bodyAsText,je=new ur(ht,{statusCode:oe.status,request:oe.request,response:oe});if(!Be)throw je;const tt=Be.bodyMapper,Et=Be.headersMapper;try{if(oe.parsedBody){const Tt=oe.parsedBody;let Lt;if(tt){let Bt=Tt;if($.isXML&&"Sequence"===tt.type.name){Bt=[];const nn=tt.xmlElementName;"object"==typeof Tt&&nn&&(Bt=Tt[nn])}Lt=$.serializer.deserialize(tt,Bt,"error.response.parsedBody",pe)}const Rt=Tt.error||Lt||Tt;je.code=Rt.code,Rt.message&&(je.message=Rt.message),tt&&(je.response.parsedBody=Lt)}oe.headers&&Et&&(je.response.parsedHeaders=$.serializer.deserialize(Et,oe.headers.toJSON(),"operationRes.parsedHeaders"))}catch(Tt){je.message=`Error "${Tt.message}" occurred in deserializing the responseBody - "${oe.bodyAsText}" for the default response.`}return{error:je,shouldReturnResponse:!1}}function Go(oe,$,te,pe,Ce){return ei.apply(this,arguments)}function ei(){return(ei=(0,N.Z)(function*(oe,$,te,pe,Ce){var Pe;if(!(null===(Pe=te.request.streamResponseStatusCodes)||void 0===Pe?void 0:Pe.has(te.status))&&te.bodyAsText){const Ae=te.bodyAsText,Be=te.headers.get("Content-Type")||"",ht=Be?Be.split(";").map(je=>je.toLowerCase()):[];try{if(0===ht.length||ht.some(je=>-1!==oe.indexOf(je)))return te.parsedBody=JSON.parse(Ae),te;if(ht.some(je=>-1!==$.indexOf(je))){if(!Ce)throw new Error("Parsing XML not supported.");const je=yield Ce(Ae,pe.xml);return te.parsedBody=je,te}}catch(je){throw new ur(`Error "${je}" occurred while parsing the response body - ${te.bodyAsText}.`,{code:je.code||ur.PARSE_ERROR,statusCode:te.status,request:te.request,response:te})}}return te})).apply(this,arguments)}const Yn=(0,x.YR)("core-rest-pipeline"),Rr=new Set(["Deserialize","Serialize","Retry","Sign"]);class En{constructor($){var te;this._policies=[],this._policies=null!==(te=null==$?void 0:$.slice(0))&&void 0!==te?te:[],this._orderedPolicies=void 0}addPolicy($,te={}){if(te.phase&&te.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(te.phase&&!Rr.has(te.phase))throw new Error(`Invalid phase name: ${te.phase}`);if(te.afterPhase&&!Rr.has(te.afterPhase))throw new Error(`Invalid afterPhase name: ${te.afterPhase}`);this._policies.push({policy:$,options:te}),this._orderedPolicies=void 0}removePolicy($){const te=[];return this._policies=this._policies.filter(pe=>!($.name&&pe.policy.name===$.name||$.phase&&pe.options.phase===$.phase)||(te.push(pe.policy),!1)),this._orderedPolicies=void 0,te}sendRequest($,te){return this.getOrderedPolicies().reduceRight((Pe,Ae)=>Be=>Ae.sendRequest(Be,Pe),Pe=>$.sendRequest(Pe))(te)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new En(this._policies)}static create(){return new En}orderPolicies(){const $=[],te=new Map;function pe(Rt){return{name:Rt,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}const Ce=pe("Serialize"),Pe=pe("None"),Ae=pe("Deserialize"),Be=pe("Retry"),ht=pe("Sign"),je=[Ce,Pe,Ae,Be,ht];function tt(Rt){return"Retry"===Rt?Be:"Serialize"===Rt?Ce:"Deserialize"===Rt?Ae:"Sign"===Rt?ht:Pe}for(const Rt of this._policies){const Bt=Rt.policy,nn=Rt.options,Kn=Bt.name;if(te.has(Kn))throw new Error("Duplicate policy names not allowed in pipeline");const Un={policy:Bt,dependsOn:new Set,dependants:new Set};nn.afterPhase&&(Un.afterPhase=tt(nn.afterPhase),Un.afterPhase.hasAfterPolicies=!0),te.set(Kn,Un),tt(nn.phase).policies.add(Un)}for(const Rt of this._policies){const{policy:Bt,options:nn}=Rt,Kn=Bt.name,Un=te.get(Kn);if(!Un)throw new Error(`Missing node for policy ${Kn}`);if(nn.afterPolicies)for(const yi of nn.afterPolicies){const On=te.get(yi);On&&(Un.dependsOn.add(On),On.dependants.add(Un))}if(nn.beforePolicies)for(const yi of nn.beforePolicies){const On=te.get(yi);On&&(On.dependsOn.add(Un),Un.dependants.add(On))}}function Et(Rt){Rt.hasRun=!0;for(const Bt of Rt.policies)if((!Bt.afterPhase||Bt.afterPhase.hasRun&&!Bt.afterPhase.policies.size)&&0===Bt.dependsOn.size){$.push(Bt.policy);for(const nn of Bt.dependants)nn.dependsOn.delete(Bt);te.delete(Bt.policy.name),Rt.policies.delete(Bt)}}function Tt(){for(const Rt of je){if(Et(Rt),Rt.policies.size>0&&Rt!==Pe)return void(Pe.hasRun||Et(Pe));Rt.hasAfterPolicies&&Et(Pe)}}let Lt=0;for(;te.size>0;){Lt++;const Rt=$.length;if(Tt(),$.length<=Rt&&Lt>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return $}}function vt(oe){const $=new Map;$.set("core-rest-pipeline","1.10.1"),function(oe){const $=self.navigator;oe.set("OS",($.oscpu||$.platform).replace(" ",""))}($);const te=function(oe){const $=[];for(const[te,pe]of oe)$.push(pe?`${te}/${pe}`:te);return $.join(" ")}($);return oe?`${oe} ${te}`:te}const wt="x-ms-useragent";new Error("decompressResponsePolicy is not supported in browser environment");var Ft=T(5283);function pr(oe,$,te){return new Promise((pe,Ce)=>{let Pe,Ae;const Be=()=>Ce(new Ft._((null==te?void 0:te.abortErrorMsg)?null==te?void 0:te.abortErrorMsg:"The operation was aborted.")),ht=()=>{(null==te?void 0:te.abortSignal)&&Ae&&te.abortSignal.removeEventListener("abort",Ae)};if(Ae=()=>(Pe&&clearTimeout(Pe),ht(),Be()),(null==te?void 0:te.abortSignal)&&te.abortSignal.aborted)return Be();Pe=setTimeout(()=>{ht(),pe($)},oe),(null==te?void 0:te.abortSignal)&&te.abortSignal.addEventListener("abort",Ae)})}function nr(oe,$){const te=oe.headers.get($);if(!te)return;const pe=Number(te);return Number.isNaN(pe)?void 0:pe}const $n="Retry-After",Bi=["retry-after-ms","x-ms-retry-after-ms",$n];function uo(oe){if(oe&&[429,503].includes(oe.status))try{for(const Ce of Bi){const Pe=nr(oe,Ce);if(0===Pe||Pe)return Pe*(Ce===$n?1e3:1)}const $=oe.headers.get($n);if(!$)return;const pe=Date.parse($)-Date.now();return Number.isFinite(pe)?Math.max(0,pe):void 0}catch($){return}}function r0(oe={}){var $,te;const pe=null!==($=oe.retryDelayInMs)&&void 0!==$?$:1e3,Ce=null!==(te=oe.maxRetryDelayInMs)&&void 0!==te?te:64e3;let Pe=pe;return{name:"exponentialRetryStrategy",retry({retryCount:Ae,response:Be,responseError:ht}){const je=function(oe){return!!oe&&("ETIMEDOUT"===oe.code||"ESOCKETTIMEDOUT"===oe.code||"ECONNREFUSED"===oe.code||"ECONNRESET"===oe.code||"ENOENT"===oe.code)}(ht),tt=je&&oe.ignoreSystemErrors,Et=function(oe){return Boolean(oe&&void 0!==oe.status&&(oe.status>=500||408===oe.status)&&501!==oe.status&&505!==oe.status)}(Be),Tt=Et&&oe.ignoreHttpStatusCodes;if(Be&&(function(oe){return Number.isFinite(uo(oe))}(Be)||!Et)||Tt||tt)return{skipStrategy:!0};if(ht&&!je&&!Et)return{errorToThrow:ht};const Rt=Pe*Math.pow(2,Ae),Bt=Math.min(Ce,Rt);return Pe=Bt/2+function(oe,$){return oe=Math.ceil(oe),$=Math.floor($),Math.floor(Math.random()*($-oe+1))+oe}(0,Bt/2),{retryAfterInMs:Pe}}}}const Cs=(0,x.YR)("core-rest-pipeline retryPolicy");function s0(oe,$={maxRetries:3}){const te=$.logger||Cs;return{name:"retryPolicy",sendRequest:(pe,Ce)=>(0,N.Z)(function*(){var Pe,Ae;let Be,ht,je=-1;e:for(;;){je+=1,Be=void 0,ht=void 0;try{te.info(`Retry ${je}: Attempting to send request`,pe.requestId),Be=yield Ce(pe),te.info(`Retry ${je}: Received a response from request`,pe.requestId)}catch(tt){if(te.error(`Retry ${je}: Received an error from request`,pe.requestId),ht=tt,!tt||"RestError"!==ht.name)throw tt;Be=ht.response}if(null===(Pe=pe.abortSignal)||void 0===Pe?void 0:Pe.aborted)throw te.error(`Retry ${je}: Request aborted.`),new Ft._;if(je>=(null!==(Ae=$.maxRetries)&&void 0!==Ae?Ae:3)){if(te.info(`Retry ${je}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),ht)throw ht;if(Be)return Be;throw new Error("Maximum retries reached with no response or error to throw")}te.info(`Retry ${je}: Processing ${oe.length} retry strategies.`);t:for(const tt of oe){const Et=tt.logger||Cs;Et.info(`Retry ${je}: Processing retry strategy ${tt.name}.`);const Tt=tt.retry({retryCount:je,response:Be,responseError:ht});if(Tt.skipStrategy){Et.info(`Retry ${je}: Skipped.`);continue t}const{errorToThrow:Lt,retryAfterInMs:Rt,redirectTo:Bt}=Tt;if(Lt)throw Et.error(`Retry ${je}: Retry strategy ${tt.name} throws error:`,Lt),Lt;if(Rt||0===Rt){Et.info(`Retry ${je}: Retry strategy ${tt.name} retries after ${Rt}`),yield pr(Rt,void 0,{abortSignal:pe.abortSignal});continue e}if(Bt){Et.info(`Retry ${je}: Retry strategy ${tt.name} redirects to ${Bt}`),pe.url=Bt;continue e}}if(ht)throw te.info("None of the retry strategies could work with the received error. Throwing it."),ht;if(Be)return te.info("None of the retry strategies could work with the received response. Returning it."),Be}})()}}new Error("proxyPolicy is not supported in browser environment");const Io={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function Na(oe={}){let $=new $o(oe.parentContext);return oe.span&&($=$.setValue(Io.span,oe.span)),oe.namespace&&($=$.setValue(Io.namespace,oe.namespace)),$}class $o{constructor($){this._contextMap=$ instanceof $o?new Map($._contextMap):new Map}setValue($,te){const pe=new $o(this);return pe._contextMap.set($,te),pe}getValue($){return this._contextMap.get($)}deleteValue($){const te=new $o(this);return te._contextMap.delete($),te}}let Hn;function Ko(){return Hn||(Hn={createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(oe,$)=>({span:{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{}},tracingContext:Na({parentContext:$.tracingContext})}),withContext:(oe,$,...te)=>$(...te)}),Hn}function Fa(oe){const $=En.create();return $.addPolicy({name:"formDataPolicy",sendRequest:(oe,$)=>(0,N.Z)(function*(){if(oe.formData){const te=oe.formData,pe=new FormData;for(const Pe of Object.keys(te)){const Ae=te[Pe];if(Array.isArray(Ae))for(const Be of Ae)pe.append(Pe,Be);else pe.append(Pe,Ae)}oe.body=pe,oe.formData=void 0;const Ce=oe.headers.get("Content-Type");Ce&&-1!==Ce.indexOf("application/x-www-form-urlencoded")?oe.body=new URLSearchParams(pe).toString():Ce&&-1!==Ce.indexOf("multipart/form-data")&&oe.headers.delete("Content-Type")}return $(oe)})()}),$.addPolicy(function(oe={}){const $=vt(oe.userAgentPrefix);return{name:"userAgentPolicy",sendRequest:(te,pe)=>(0,N.Z)(function*(){return te.headers.has(wt)||te.headers.set(wt,$),pe(te)})()}}(oe.userAgentOptions)),$.addPolicy(function(oe="x-ms-client-request-id"){return{name:"setClientRequestIdPolicy",sendRequest:($,te)=>(0,N.Z)(function*(){return $.headers.has(oe)||$.headers.set(oe,$.requestId),te($)})()}}()),$.addPolicy(function(oe={}){var $;return{name:"defaultRetryPolicy",sendRequest:s0([{name:"throttlingRetryStrategy",retry({response:oe}){const $=uo(oe);return Number.isFinite($)?{retryAfterInMs:$}:{skipStrategy:!0}}},r0(oe)],{maxRetries:null!==($=oe.maxRetries)&&void 0!==$?$:3}).sendRequest}}(oe.retryOptions),{phase:"Retry"}),$.addPolicy(function(oe={}){const $=vt(oe.userAgentPrefix),te=function(){try{return function(oe){const{namespace:$,packageName:te,packageVersion:pe}=oe;function Ce(tt,Et,Tt){var Lt;const Rt=Ko().startSpan(tt,Object.assign(Object.assign({},Tt),{packageName:te,packageVersion:pe,tracingContext:null===(Lt=null==Et?void 0:Et.tracingOptions)||void 0===Lt?void 0:Lt.tracingContext}));let Bt=Rt.tracingContext;const nn=Rt.span;return Bt.getValue(Io.namespace)||(Bt=Bt.setValue(Io.namespace,$)),nn.setAttribute("az.namespace",Bt.getValue(Io.namespace)),{span:nn,updatedOptions:Object.assign({},Et,{tracingOptions:Object.assign(Object.assign({},null==Et?void 0:Et.tracingOptions),{tracingContext:Bt})})}}function Ae(){return(Ae=(0,N.Z)(function*(tt,Et,Tt,Lt){const{span:Rt,updatedOptions:Bt}=Ce(tt,Et,Lt);try{const nn=yield Be(Bt.tracingOptions.tracingContext,()=>Promise.resolve(Tt(Bt,Rt)));return Rt.setStatus({status:"success"}),nn}catch(nn){throw Rt.setStatus({status:"error",error:nn}),nn}finally{Rt.end()}})).apply(this,arguments)}function Be(tt,Et,...Tt){return Ko().withContext(tt,Et,...Tt)}return{startSpan:Ce,withSpan:function(tt,Et,Tt,Lt){return Ae.apply(this,arguments)},withContext:Be,parseTraceparentHeader:function(tt){return Ko().parseTraceparentHeader(tt)},createRequestHeaders:function(tt){return Ko().createRequestHeaders(tt)}}}({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:"1.10.1"})}catch(oe){return void Yn.warning(`Error when creating the TracingClient: ${hi(oe)}`)}}();return{name:"tracingPolicy",sendRequest:(pe,Ce)=>(0,N.Z)(function*(){var Pe,Ae;if(!te||!(null===(Pe=pe.tracingOptions)||void 0===Pe?void 0:Pe.tracingContext))return Ce(pe);const{span:Be,tracingContext:ht}=null!==(Ae=function(oe,$,te){try{const{span:pe,updatedOptions:Ce}=oe.startSpan(`HTTP ${$.method}`,{tracingOptions:$.tracingOptions},{spanKind:"client",spanAttributes:{"http.method":$.method,"http.url":$.url,requestId:$.requestId}});if(!pe.isRecording())return void pe.end();te&&pe.setAttribute("http.user_agent",te);const Pe=oe.createRequestHeaders(Ce.tracingOptions.tracingContext);for(const[Ae,Be]of Object.entries(Pe))$.headers.set(Ae,Be);return{span:pe,tracingContext:Ce.tracingOptions.tracingContext}}catch(pe){return void Yn.warning(`Skipping creating a tracing span due to an error: ${hi(pe)}`)}}(te,pe,$))&&void 0!==Ae?Ae:{};if(!Be||!ht)return Ce(pe);try{const je=yield te.withContext(ht,Ce,pe);return function(oe,$){try{oe.setAttribute("http.status_code",$.status);const te=$.headers.get("x-ms-request-id");te&&oe.setAttribute("serviceRequestId",te),oe.setStatus({status:"success"}),oe.end()}catch(te){Yn.warning(`Skipping tracing span processing due to an error: ${hi(te)}`)}}(Be,je),je}catch(je){throw function(oe,$){try{oe.setStatus({status:"error",error:ro($)?$:void 0}),function(oe){return oe instanceof ur||ro(oe)&&"RestError"===oe.name}($)&&$.statusCode&&oe.setAttribute("http.status_code",$.statusCode),oe.end()}catch(te){Yn.warning(`Skipping tracing span processing due to an error: ${hi(te)}`)}}(Be,je),je}})()}}(oe.userAgentOptions),{afterPhase:"Retry"}),$.addPolicy(function(oe={}){var $;const te=null!==($=oe.logger)&&void 0!==$?$:Yn.info,pe=new tr({additionalAllowedHeaderNames:oe.additionalAllowedHeaderNames,additionalAllowedQueryParameters:oe.additionalAllowedQueryParameters});return{name:"logPolicy",sendRequest:(Ce,Pe)=>(0,N.Z)(function*(){if(!te.enabled)return Pe(Ce);te(`Request: ${pe.sanitize(Ce)}`);const Ae=yield Pe(Ce);return te(`Response status code: ${Ae.status}`),te(`Headers: ${pe.sanitize(Ae.headers)}`),Ae})()}}(oe.loggingOptions),{afterPhase:"Sign"}),$}const xo={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4};function Ss(){return(Ss=(0,N.Z)(function*(oe,$,te){function pe(){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,N.Z)(function*(){if(!(Date.now()<te)){const Ae=yield oe();if(null===Ae)throw new Error("Failed to refresh access token.");return Ae}try{return yield oe()}catch(Ae){return null}})).apply(this,arguments)}let Pe=yield pe();for(;null===Pe;)yield pr($),Pe=yield pe();return Pe})).apply(this,arguments)}function Ui(oe){return Es.apply(this,arguments)}function Es(){return(Es=(0,N.Z)(function*(oe){const{scopes:$,getAccessToken:te,request:pe}=oe,Ce={abortSignal:pe.abortSignal,tracingOptions:pe.tracingOptions},Pe=yield te($,Ce);Pe&&oe.request.headers.set("Authorization",`Bearer ${Pe.token}`)})).apply(this,arguments)}function Wt(oe){var $;const{credential:te,scopes:pe,challengeCallbacks:Ce}=oe,Pe=oe.logger||Yn,Ae=Object.assign({authorizeRequest:null!==($=null==Ce?void 0:Ce.authorizeRequest)&&void 0!==$?$:Ui,authorizeRequestOnChallenge:null==Ce?void 0:Ce.authorizeRequestOnChallenge},Ce),Be=te?function(oe,$){let Ce,te=null,pe=null;const Pe=Object.assign(Object.assign({},xo),$),Ae={get isRefreshing(){return null!==te},get shouldRefresh(){var ht;return!Ae.isRefreshing&&(null!==(ht=null==pe?void 0:pe.expiresOnTimestamp)&&void 0!==ht?ht:0)-Pe.refreshWindowInMs<Date.now()},get mustRefresh(){return null===pe||pe.expiresOnTimestamp-Pe.forcedRefreshWindowInMs<Date.now()}};function Be(ht,je){var tt;return Ae.isRefreshing||(te=function(oe,$,te){return Ss.apply(this,arguments)}(()=>oe.getToken(ht,je),Pe.retryIntervalInMs,null!==(tt=null==pe?void 0:pe.expiresOnTimestamp)&&void 0!==tt?tt:Date.now()).then(Tt=>(te=null,pe=Tt,Ce=je.tenantId,pe)).catch(Tt=>{throw te=null,pe=null,Ce=void 0,Tt})),te}return function(){var ht=(0,N.Z)(function*(je,tt){return Ce!==tt.tenantId||Boolean(tt.claims)||Ae.mustRefresh?Be(je,tt):(Ae.shouldRefresh&&Be(je,tt),pe)});return function(je,tt){return ht.apply(this,arguments)}}()}(te):()=>Promise.resolve(null);return{name:"bearerTokenAuthenticationPolicy",sendRequest:(ht,je)=>(0,N.Z)(function*(){if(!ht.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");let tt,Et;yield Ae.authorizeRequest({scopes:Array.isArray(pe)?pe:[pe],request:ht,getAccessToken:Be,logger:Pe});try{tt=yield je(ht)}catch(Tt){Et=Tt,tt=Tt.response}if(Ae.authorizeRequestOnChallenge&&401===(null==tt?void 0:tt.status)&&function(oe){const $=oe.headers.get("WWW-Authenticate");if(401===oe.status&&$)return $}(tt)&&(yield Ae.authorizeRequestOnChallenge({scopes:Array.isArray(pe)?pe:[pe],request:ht,response:tt,getAccessToken:Be,logger:Pe})))return je(ht);if(Et)throw Et;return tt})()}}function Vi(oe){const{parameterPath:$,mapper:te}=oe;let pe;return pe="string"==typeof $?$:Array.isArray($)?$.join("."):te.serializedName,pe}function ir(oe){return Boolean(oe&&"function"==typeof oe.getReader&&"function"==typeof oe.tee)}function nl(oe){return("function"==typeof Blob||"object"==typeof Blob)&&oe instanceof Blob}class Jo{sendRequest($){return(0,N.Z)(function*(){if("https:"!==new URL($.url).protocol&&!$.allowInsecureConnection)throw new Error(`Cannot connect to ${$.url} while allowInsecureConnection is false.`);if($.proxySettings)throw new Error("HTTP proxy is not supported in browser environment");try{return yield function(oe){return Zo.apply(this,arguments)}($)}catch(Ce){throw function(oe,$){var te;return oe&&"AbortError"===(null==oe?void 0:oe.name)?oe:new ur(`Error sending request: ${oe.message}`,{code:null!==(te=null==oe?void 0:oe.code)&&void 0!==te?te:ur.REQUEST_SEND_ERROR,request:$})}(Ce,$)}})()}}function Zo(){return(Zo=(0,N.Z)(function*(oe){const{abortController:$,abortControllerCleanup:te}=Gc(oe);try{const pe=Is(oe.headers),Ce=ni(oe),Pe=yield fetch(oe.url,{body:Ce,method:oe.method,headers:pe,signal:$.signal,credentials:oe.withCredentials?"include":"same-origin",cache:"no-store"});return nl(oe.body)&&oe.onUploadProgress&&oe.onUploadProgress({loadedBytes:oe.body.size}),Ha(Pe,oe)}finally{te&&te()}})).apply(this,arguments)}function Ha(oe,$){return rl.apply(this,arguments)}function rl(){return(rl=(0,N.Z)(function*(oe,$){var te,pe;const Pe={request:$,headers:Tr(oe),status:oe.status},Ae=ir(oe.body)?ja(oe.body,$.onDownloadProgress):oe.body;if((null===(te=$.streamResponseStatusCodes)||void 0===te?void 0:te.has(Number.POSITIVE_INFINITY))||(null===(pe=$.streamResponseStatusCodes)||void 0===pe?void 0:pe.has(Pe.status)))if($.enableBrowserStreams)Pe.browserStreamBody=null!=Ae?Ae:void 0;else{const Be=new Response(Ae);Pe.blobBody=Be.blob()}else{const Be=new Response(Ae);Pe.bodyAsText=yield Be.text()}return Pe})).apply(this,arguments)}function Gc(oe){const $=new AbortController;let te,pe;if(oe.abortSignal){if(oe.abortSignal.aborted)throw new Ft._("The operation was aborted.");pe=Ce=>{"abort"===Ce.type&&$.abort()},oe.abortSignal.addEventListener("abort",pe),te=()=>{var Ce;pe&&(null===(Ce=oe.abortSignal)||void 0===Ce||Ce.removeEventListener("abort",pe))}}return oe.timeout>0&&setTimeout(()=>{$.abort()},oe.timeout),{abortController:$,abortControllerCleanup:te}}function Is(oe){const $=new Headers;for(const[te,pe]of oe)$.append(te,pe);return $}function Tr(oe){const $=vs();for(const[te,pe]of oe.headers)$.set(te,pe);return $}function ni(oe){const $="function"==typeof oe.body?oe.body():oe.body;if(function(oe){return oe&&"function"==typeof oe.pipe}($))throw new Error("Node streams are not supported in browser environment.");return ir($)?ja($,oe.onUploadProgress):$}function ja(oe,$){let te=0;if(function(oe){return void 0!==oe.pipeThrough&&void 0!==self.TransformStream}(oe))return oe.pipeThrough(new TransformStream({transform(pe,Ce){null!==pe?(Ce.enqueue(pe),te+=pe.length,$&&$({loadedBytes:te})):Ce.terminate()}}));{const pe=oe.getReader();return new ReadableStream({pull:Ce=>(0,N.Z)(function*(){var Pe;const{done:Ae,value:Be}=yield pe.read();if(Ae||!Be)return Ce.close(),void pe.releaseLock();te+=null!==(Pe=null==Be?void 0:Be.length)&&void 0!==Pe?Pe:0,Ce.enqueue(Be),$&&$({loadedBytes:te})})()})}}let xs;const Jc={CSV:",",SSV:" ",Multi:"Multi",TSV:"\t",Pipes:"|"};function Rs(oe,$){let te=oe;for(const[pe,Ce]of $)te=te.split(pe).join(Ce);return te}const al=(0,x.YR)("core-client");class cl extends class extends class{constructor($={}){var te,pe;if(this._requestContentType=$.requestContentType,this._endpoint=null!==(te=$.endpoint)&&void 0!==te?te:$.baseUri,$.baseUri&&al.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=$.allowInsecureConnection,this._httpClient=$.httpClient||(xs||(xs=new Jo),xs),this.pipeline=$.pipeline||function(oe){const $=function(oe){if(oe.credentialScopes){const $=oe.credentialScopes;return Array.isArray($)?$.map(te=>new URL(te).toString()):new URL($).toString()}if(oe.endpoint)return`${oe.endpoint}/.default`;if(oe.baseUri)return`${oe.baseUri}/.default`;if(oe.credential&&!oe.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}(oe),te=oe.credential&&$?{credentialScopes:$,credential:oe.credential}:void 0;return function(oe={}){const $=Fa(null!=oe?oe:{});return oe.credentialOptions&&$.addPolicy(Wt({credential:oe.credentialOptions.credential,scopes:oe.credentialOptions.credentialScopes})),$.addPolicy(function(oe={}){const $=oe.stringifyXML;return{name:"serializationPolicy",sendRequest:(te,pe)=>(0,N.Z)(function*(){const Ce=Tn(te),Pe=null==Ce?void 0:Ce.operationSpec,Ae=null==Ce?void 0:Ce.operationArguments;return Pe&&Ae&&(function(oe,$,te){var pe,Ce;if(te.headerParameters)for(const Ae of te.headerParameters){let Be=fr($,Ae);if(null!=Be||Ae.mapper.required){Be=te.serializer.serialize(Ae.mapper,Be,Vi(Ae));const ht=Ae.mapper.headerCollectionPrefix;if(ht)for(const je of Object.keys(Be))oe.headers.set(ht+je,Be[je]);else oe.headers.set(Ae.mapper.serializedName||Vi(Ae),Be)}}const Pe=null===(Ce=null===(pe=$.options)||void 0===pe?void 0:pe.requestOptions)||void 0===Ce?void 0:Ce.customHeaders;if(Pe)for(const Ae of Object.keys(Pe))oe.headers.set(Ae,Pe[Ae])}(te,Ae,Pe),function(oe,$,te,pe=function(){throw new Error("XML serialization unsupported!")}){var Ce,Pe,Ae,Be,ht;const je=null===(Ce=$.options)||void 0===Ce?void 0:Ce.serializerOptions,tt={xml:{rootName:null!==(Pe=null==je?void 0:je.xml.rootName)&&void 0!==Pe?Pe:"",includeRoot:null!==(Ae=null==je?void 0:je.xml.includeRoot)&&void 0!==Ae&&Ae,xmlCharKey:null!==(Be=null==je?void 0:je.xml.xmlCharKey)&&void 0!==Be?Be:r}},Et=tt.xml.xmlCharKey;if(te.requestBody&&te.requestBody.mapper){oe.body=fr($,te.requestBody);const Tt=te.requestBody.mapper,{required:Lt,serializedName:Rt,xmlName:Bt,xmlElementName:nn,xmlNamespace:Kn,xmlNamespacePrefix:Un,nullable:yi}=Tt,On=Tt.type.name;try{if(null!=oe.body||yi&&null===oe.body||Lt){const sr=Vi(te.requestBody);oe.body=te.serializer.serialize(Tt,oe.body,sr,tt);const co="Stream"===On;if(te.isXML){const Yo=Un?`xmlns:${Un}`:"xmlns",Wr=function(oe,$,te,pe,Ce){if(oe&&!["Composite","Sequence","Dictionary"].includes(te)){const Pe={};return Pe[Ce.xml.xmlCharKey]=pe,Pe[R]={[$]:oe},Pe}return pe}(Kn,Yo,On,oe.body,tt);"Sequence"===On?oe.body=pe(function(oe,$,te,pe){if(Array.isArray(oe)||(oe=[oe]),!te||!pe)return{[$]:oe};const Ce={[$]:oe};return Ce[R]={[te]:pe},Ce}(Wr,nn||Bt||Rt,Yo,Kn),{rootName:Bt||Rt,xmlCharKey:Et}):co||(oe.body=pe(Wr,{rootName:Bt||Rt,xmlCharKey:Et}))}else{if("String"===On&&((null===(ht=te.contentType)||void 0===ht?void 0:ht.match("text/plain"))||"text"===te.mediaType))return;co||(oe.body=JSON.stringify(oe.body))}}}catch(sr){throw new Error(`Error "${sr.message}" occurred in serializing the payload - ${JSON.stringify(Rt,void 0,"  ")}.`)}}else if(te.formDataParameters&&te.formDataParameters.length>0){oe.formData={};for(const Tt of te.formDataParameters){const Lt=fr($,Tt);if(null!=Lt){const Rt=Tt.mapper.serializedName||Vi(Tt);oe.formData[Rt]=te.serializer.serialize(Tt.mapper,Lt,Vi(Tt),tt)}}}}(te,Ae,Pe,$)),pe(te)})()}}(oe.serializationOptions),{phase:"Serialize"}),$.addPolicy(function(oe={}){var $,te,pe,Ce,Pe,Ae,Be;const ht=null!==(te=null===($=oe.expectedContentTypes)||void 0===$?void 0:$.json)&&void 0!==te?te:Er,je=null!==(Ce=null===(pe=oe.expectedContentTypes)||void 0===pe?void 0:pe.xml)&&void 0!==Ce?Ce:pi,tt=oe.parseXML,Et=oe.serializerOptions,Tt={xml:{rootName:null!==(Pe=null==Et?void 0:Et.xml.rootName)&&void 0!==Pe?Pe:"",includeRoot:null!==(Ae=null==Et?void 0:Et.xml.includeRoot)&&void 0!==Ae&&Ae,xmlCharKey:null!==(Be=null==Et?void 0:Et.xml.xmlCharKey)&&void 0!==Be?Be:r}};return{name:"deserializationPolicy",sendRequest:(Lt,Rt)=>(0,N.Z)(function*(){const Bt=yield Rt(Lt);return function(oe,$,te,pe,Ce){return Kt.apply(this,arguments)}(ht,je,Bt,Tt,tt)})()}}(oe.deserializationOptions),{phase:"Deserialize"}),$}(Object.assign(Object.assign({},oe),{credentialOptions:te}))}($),null===(pe=$.additionalPolicies)||void 0===pe?void 0:pe.length)for(const{policy:Ce,position:Pe}of $.additionalPolicies)this.pipeline.addPolicy(Ce,{afterPhase:"perRetry"===Pe?"Sign":void 0})}sendRequest($){var te=this;return(0,N.Z)(function*(){return te.pipeline.sendRequest(te._httpClient,$)})()}sendOperationRequest($,te){var pe=this;return(0,N.Z)(function*(){const Ce=te.baseUrl||pe._endpoint;if(!Ce)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");const Pe=function(oe,$,te,pe){const Ce=function(oe,$,te){var pe;const Ce=new Map;if(null===(pe=oe.urlParameters)||void 0===pe?void 0:pe.length)for(const Pe of oe.urlParameters){let Ae=fr($,Pe,te);const Be=Vi(Pe);Ae=oe.serializer.serialize(Pe.mapper,Ae,Be),Pe.skipEncoding||(Ae=encodeURIComponent(Ae)),Ce.set(`{${Pe.mapper.serializedName||Be}}`,Ae)}return Ce}($,te,pe);let Pe=!1,Ae=Rs(oe,Ce);if($.path){let je=Rs($.path,Ce);"/{nextLink}"===$.path&&je.startsWith("/")&&(je=je.substring(1)),function(oe){return oe.includes("://")}(je)?(Ae=je,Pe=!0):Ae=function(oe,$){if(!$)return oe;const te=new URL(oe);let pe=te.pathname;pe.endsWith("/")||(pe=`${pe}/`),$.startsWith("/")&&($=$.substring(1));const Ce=$.indexOf("?");if(-1!==Ce){const Pe=$.substring(0,Ce),Ae=$.substring(Ce+1);pe+=Pe,Ae&&(te.search=te.search?`${te.search}&${Ae}`:Ae)}else pe+=$;return te.pathname=pe,te.toString()}(Ae,je)}const{queryParams:Be,sequenceParams:ht}=function(oe,$,te){var pe;const Ce=new Map,Pe=new Set;if(null===(pe=oe.queryParameters)||void 0===pe?void 0:pe.length)for(const Ae of oe.queryParameters){"Sequence"===Ae.mapper.type.name&&Ae.mapper.serializedName&&Pe.add(Ae.mapper.serializedName);let Be=fr($,Ae,te);if(null!=Be||Ae.mapper.required){Be=oe.serializer.serialize(Ae.mapper,Be,Vi(Ae));const ht=Ae.collectionFormat?Jc[Ae.collectionFormat]:"";if(Array.isArray(Be)&&(Be=Be.map(je=>null==je?"":je)),"Multi"===Ae.collectionFormat&&0===Be.length)continue;Array.isArray(Be)&&("SSV"===Ae.collectionFormat||"TSV"===Ae.collectionFormat)&&(Be=Be.join(ht)),Ae.skipEncoding||(Be=Array.isArray(Be)?Be.map(je=>encodeURIComponent(je)):encodeURIComponent(Be)),Array.isArray(Be)&&("CSV"===Ae.collectionFormat||"Pipes"===Ae.collectionFormat)&&(Be=Be.join(ht)),Ce.set(Ae.mapper.serializedName||Vi(Ae),Be)}}return{queryParams:Ce,sequenceParams:Pe}}($,te,pe);return Ae=function(oe,$,te,pe=!1){if(0===$.size)return oe;const Ce=new URL(oe),Pe=function(oe){const $=new Map;if(!oe||"?"!==oe[0])return $;const te=(oe=oe.slice(1)).split("&");for(const pe of te){const[Ce,Pe]=pe.split("=",2),Ae=$.get(Ce);Ae?Array.isArray(Ae)?Ae.push(Pe):$.set(Ce,[Ae,Pe]):$.set(Ce,Pe)}return $}(Ce.search);for(const[Be,ht]of $){const je=Pe.get(Be);if(Array.isArray(je))if(Array.isArray(ht)){je.push(...ht);const tt=new Set(je);Pe.set(Be,Array.from(tt))}else je.push(ht);else je?(Array.isArray(ht)?ht.unshift(je):te.has(Be)&&Pe.set(Be,[je,ht]),pe||Pe.set(Be,ht)):Pe.set(Be,ht)}const Ae=[];for(const[Be,ht]of Pe)if("string"==typeof ht)Ae.push(`${Be}=${ht}`);else if(Array.isArray(ht))for(const je of ht)Ae.push(`${Be}=${je}`);else Ae.push(`${Be}=${ht}`);return Ce.search=Ae.length?`?${Ae.join("&")}`:"",Ce.toString()}(Ae,Be,ht,Pe),Ae}(Ce,te,$,pe),Ae=new zo({url:Pe});Ae.method=te.httpMethod;const Be=Tn(Ae);Be.operationSpec=te,Be.operationArguments=$;const ht=te.contentType||pe._requestContentType;ht&&te.requestBody&&Ae.headers.set("Content-Type",ht);const je=$.options;if(je){const tt=je.requestOptions;tt&&(tt.timeout&&(Ae.timeout=tt.timeout),tt.onUploadProgress&&(Ae.onUploadProgress=tt.onUploadProgress),tt.onDownloadProgress&&(Ae.onDownloadProgress=tt.onDownloadProgress),void 0!==tt.shouldDeserialize&&(Be.shouldDeserialize=tt.shouldDeserialize),tt.allowInsecureConnection&&(Ae.allowInsecureConnection=!0)),je.abortSignal&&(Ae.abortSignal=je.abortSignal),je.tracingOptions&&(Ae.tracingOptions=je.tracingOptions)}pe._allowInsecureConnection&&(Ae.allowInsecureConnection=!0),void 0===Ae.streamResponseStatusCodes&&(Ae.streamResponseStatusCodes=function(oe){const $=new Set;for(const te in oe.responses){const pe=oe.responses[te];pe.bodyMapper&&"Stream"===pe.bodyMapper.type.name&&$.add(Number(te))}return $}(te));try{const tt=yield pe.sendRequest(Ae),Et=d(tt,te.responses[tt.status]);return(null==je?void 0:je.onResponse)&&je.onResponse(tt,Et),Et}catch(tt){if("object"==typeof tt&&(null==tt?void 0:tt.response)){const Et=tt.response,Tt=d(Et,te.responses[tt.statusCode]||te.responses.default);tt.details=Tt,(null==je?void 0:je.onResponse)&&je.onResponse(Et,Tt,tt)}throw tt}})()}}{constructor($,te){if(void 0===$)throw new Error("'endpoint' cannot be null");te||(te={});const Ce="azsdk-js-azure-communication-chat/1.1.0",Pe=te.userAgentOptions&&te.userAgentOptions.userAgentPrefix?`${te.userAgentOptions.userAgentPrefix} ${Ce}`:`${Ce}`;super(Object.assign(Object.assign(Object.assign({},{requestContentType:"application/json; charset=utf-8"}),te),{userAgentOptions:{userAgentPrefix:Pe},baseUri:te.endpoint||"{endpoint}"})),this.endpoint=$,this.apiVersion=te.apiVersion||"2021-09-07"}}{constructor($,te){super($,te),this.chatThread=new _n(this),this.chat=new xa(this)}}const wr=oe=>Wt({credential:{getToken:(te,pe)=>oe.getToken({abortSignal:null==pe?void 0:pe.abortSignal})},scopes:[]});class Gn{constructor($,te,pe,Ce={}){this.endpoint=$,this.timeOfLastTypingRequest=void 0,this.threadId=te,this.tokenCredential=pe;const Pe=Object.assign(Object.assign({},Ce),{loggingOptions:{logger:u.info}});this.client=new cl(this.endpoint,Object.assign({endpoint:this.endpoint},Pe));const Ae=wr(this.tokenCredential);this.client.pipeline.addPolicy(Ae)}getProperties($={}){var te=this;return(0,N.Z)(function*(){const{span:pe,updatedOptions:Ce}=h("ChatClient-GetProperties",$);try{const Pe=yield te.client.chatThread.getChatThreadProperties(te.threadId,Ce);return B(Pe)}catch(Pe){throw pe.setStatus({code:E.Qn.ERROR,message:Pe.message}),Pe}finally{pe.end()}})()}updateTopic($,te={}){var pe=this;return(0,N.Z)(function*(){const{span:Ce,updatedOptions:Pe}=h("ChatThreadClient-UpdateTopic",te);try{yield pe.client.chatThread.updateChatThreadProperties(pe.threadId,{topic:$},Pe)}catch(Ae){throw Ce.setStatus({code:E.Qn.ERROR,message:Ae.message}),Ae}finally{Ce.end()}})()}sendMessage($,te={}){var pe=this;return(0,N.Z)(function*(){const{span:Ce,updatedOptions:Pe}=h("ChatThreadClient-SendMessage",te);try{return pe.timeOfLastTypingRequest=void 0,yield pe.client.chatThread.sendChatMessage(pe.threadId,Object.assign(Object.assign({},$),te),Pe)}catch(Ae){throw Ce.setStatus({code:E.Qn.ERROR,message:Ae.message}),Ae}finally{Ce.end()}})()}getMessage($,te={}){var pe=this;return(0,N.Z)(function*(){const{span:Ce,updatedOptions:Pe}=h("ChatThreadClient-GetMessage",te);try{const Ae=yield pe.client.chatThread.getChatMessage(pe.threadId,$,Pe);return O(Ae)}catch(Ae){throw Ce.setStatus({code:E.Qn.ERROR,message:Ae.message}),Ae}finally{Ce.end()}})()}listMessagesPage($,te={}){return(0,y.FC)(this,arguments,function*(){if(!$.continuationToken){const Ce=yield(0,y.qq)(this.client.chatThread.listChatMessages(this.threadId,te));$.continuationToken=Ce.nextLink,Ce.value&&(yield yield(0,y.qq)(Ce.value.map(O,this)))}for(;$.continuationToken;){const Ce=yield(0,y.qq)(this.client.chatThread.listChatMessagesNext(this.threadId,$.continuationToken,te));if($.continuationToken=Ce.nextLink,!Ce.value)break;yield yield(0,y.qq)(Ce.value.map(O,this))}})}listMessagesAll($){return(0,y.FC)(this,arguments,function*(){var pe,Ce;try{for(var Ae,Pe=(0,y.KL)(this.listMessagesPage({},$));!(Ae=yield(0,y.qq)(Pe.next())).done;){const Be=Ae.value;yield(0,y.qq)(yield*(0,y.V2)((0,y.KL)(Be)))}}catch(Be){pe={error:Be}}finally{try{Ae&&!Ae.done&&(Ce=Pe.return)&&(yield(0,y.qq)(Ce.call(Pe)))}finally{if(pe)throw pe.error}}})}listMessages($={}){const{span:te,updatedOptions:pe}=h("ChatThreadClient-ListMessages",$);try{const Ce=this.listMessagesAll(pe);return{next:()=>Ce.next(),[Symbol.asyncIterator](){return this},byPage:(Pe={})=>this.listMessagesPage(Pe,pe)}}catch(Ce){throw te.setStatus({code:E.Qn.ERROR,message:Ce.message}),Ce}finally{te.end()}}deleteMessage($,te={}){var pe=this;return(0,N.Z)(function*(){const{span:Ce,updatedOptions:Pe}=h("ChatThreadClient-DeleteMessage",te);try{yield pe.client.chatThread.deleteChatMessage(pe.threadId,$,Pe)}catch(Ae){throw Ce.setStatus({code:E.Qn.ERROR,message:Ae.message}),Ae}finally{Ce.end()}})()}updateMessage($,te={}){var pe=this;return(0,N.Z)(function*(){const{span:Ce,updatedOptions:Pe}=h("ChatThreadClient-UpdateMessage",te);try{yield pe.client.chatThread.updateChatMessage(pe.threadId,$,te,Pe)}catch(Ae){throw Ce.setStatus({code:E.Qn.ERROR,message:Ae.message}),Ae}finally{Ce.end()}})()}addParticipants($,te={}){var pe=this;return(0,N.Z)(function*(){const{span:Ce,updatedOptions:Pe}=h("ChatThreadClient-AddParticipants",te);try{return yield pe.client.chatThread.addChatParticipants(pe.threadId,(oe=>{var $;return{participants:null===($=oe.participants)||void 0===$?void 0:$.map(te=>w(te))}})($),Pe)}catch(Ae){throw Ce.setStatus({code:E.Qn.ERROR,message:Ae.message}),Ae}finally{Ce.end()}})()}listParticipantsPage($,te={}){return(0,y.FC)(this,arguments,function*(){if(!$.continuationToken){const Ce=yield(0,y.qq)(this.client.chatThread.listChatParticipants(this.threadId,te));$.continuationToken=Ce.nextLink,Ce.value&&(yield yield(0,y.qq)(Ce.value.map(D,this)))}for(;$.continuationToken;){const Ce=yield(0,y.qq)(this.client.chatThread.listChatParticipantsNext(this.threadId,$.continuationToken,te));if($.continuationToken=Ce.nextLink,!Ce.value)break;yield yield(0,y.qq)(Ce.value.map(D,this))}})}listParticipantsAll($){return(0,y.FC)(this,arguments,function*(){var pe,Ce;try{for(var Ae,Pe=(0,y.KL)(this.listParticipantsPage({},$));!(Ae=yield(0,y.qq)(Pe.next())).done;){const Be=Ae.value;yield(0,y.qq)(yield*(0,y.V2)((0,y.KL)(Be)))}}catch(Be){pe={error:Be}}finally{try{Ae&&!Ae.done&&(Ce=Pe.return)&&(yield(0,y.qq)(Ce.call(Pe)))}finally{if(pe)throw pe.error}}})}listParticipants($={}){const{span:te,updatedOptions:pe}=h("ChatThreadClient-ListParticipants",$);try{const Ce=this.listParticipantsAll(pe);return{next:()=>Ce.next(),[Symbol.asyncIterator](){return this},byPage:(Pe={})=>this.listParticipantsPage(Pe,pe)}}catch(Ce){throw te.setStatus({code:E.Qn.ERROR,message:Ce.message}),Ce}finally{te.end()}}removeParticipant($,te={}){var pe=this;return(0,N.Z)(function*(){const{span:Ce,updatedOptions:Pe}=h("ChatThreadClient-RemoveParticipant",te);try{yield pe.client.chatThread.removeChatParticipant(pe.threadId,(0,_.J)($),Pe)}catch(Ae){throw Ce.setStatus({code:E.Qn.ERROR,message:Ae.message}),Ae}finally{Ce.end()}})()}sendTypingNotification($={}){var te=this;return(0,N.Z)(function*(){const{span:pe,updatedOptions:Ce}=h("ChatThreadClient-SendTypingNotification",$);try{const Pe=new Date,{senderDisplayName:Ae}=Ce,Be=(0,y._T)(Ce,["senderDisplayName"]);return te.canPostTypingNotification(Pe)?(yield te.client.chatThread.sendTypingNotification(te.threadId,Object.assign({sendTypingNotificationRequest:{senderDisplayName:Ae}},Be)),te.timeOfLastTypingRequest=Pe,!0):(u.info(`Typing Notification NOT Send. [thread_id=${te.threadId}]`),!1)}catch(Pe){throw pe.setStatus({code:E.Qn.ERROR,message:Pe.message}),Pe}finally{pe.end()}})()}sendReadReceipt($,te={}){var pe=this;return(0,N.Z)(function*(){const{span:Ce,updatedOptions:Pe}=h("ChatThreadClient-SendReadReceipt",te);try{yield pe.client.chatThread.sendChatReadReceipt(pe.threadId,$,Pe)}catch(Ae){throw Ce.setStatus({code:E.Qn.ERROR,message:Ae.message}),Ae}finally{Ce.end()}})()}listReadReceiptsPage($,te={}){return(0,y.FC)(this,arguments,function*(){if(!$.continuationToken){const Ce=yield(0,y.qq)(this.client.chatThread.listChatReadReceipts(this.threadId,te));$.continuationToken=Ce.nextLink,Ce.value&&(yield yield(0,y.qq)(Ce.value.map(j,this)))}for(;$.continuationToken;){const Ce=yield(0,y.qq)(this.client.chatThread.listChatReadReceiptsNext(this.threadId,$.continuationToken,te));if($.continuationToken=Ce.nextLink,!Ce.value)break;yield yield(0,y.qq)(Ce.value.map(j,this))}})}listReadReceiptsAll($){return(0,y.FC)(this,arguments,function*(){var pe,Ce;try{for(var Ae,Pe=(0,y.KL)(this.listReadReceiptsPage({},$));!(Ae=yield(0,y.qq)(Pe.next())).done;){const Be=Ae.value;yield(0,y.qq)(yield*(0,y.V2)((0,y.KL)(Be)))}}catch(Be){pe={error:Be}}finally{try{Ae&&!Ae.done&&(Ce=Pe.return)&&(yield(0,y.qq)(Ce.call(Pe)))}finally{if(pe)throw pe.error}}})}listReadReceipts($={}){const{span:te,updatedOptions:pe}=h("ChatThreadClient-ListChatReadReceipts",$);try{const Ce=this.listReadReceiptsAll(pe);return{next:()=>Ce.next(),[Symbol.asyncIterator](){return this},byPage:(Pe={})=>this.listReadReceiptsPage(Pe,pe)}}catch(Ce){throw te.setStatus({code:E.Qn.ERROR,message:Ce.message}),Ce}finally{te.end()}}canPostTypingNotification($){return!(this.timeOfLastTypingRequest&&$.getTime()-this.timeOfLastTypingRequest.getTime()<8e3&&(u.info(`Typing interval check failed. [last_request=${this.timeOfLastTypingRequest}]`),1))}}var Ps,Yc=new Uint8Array(16);function Xc(){if(!Ps&&!(Ps="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ps(Yc)}const ef=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,nf=function(oe){return"string"==typeof oe&&ef.test(oe)};for(var or=[],Ao=0;Ao<256;++Ao)or.push((Ao+256).toString(16).substr(1));const rf=function(oe,$,te){var pe=(oe=oe||{}).random||(oe.rng||Xc)();if(pe[6]=15&pe[6]|64,pe[8]=63&pe[8]|128,$){te=te||0;for(var Ce=0;Ce<16;++Ce)$[te+Ce]=pe[Ce];return $}return function(oe){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,te=(or[oe[$+0]]+or[oe[$+1]]+or[oe[$+2]]+or[oe[$+3]]+"-"+or[oe[$+4]]+or[oe[$+5]]+"-"+or[oe[$+6]]+or[oe[$+7]]+"-"+or[oe[$+8]]+or[oe[$+9]]+"-"+or[oe[$+10]]+or[oe[$+11]]+or[oe[$+12]]+or[oe[$+13]]+or[oe[$+14]]+or[oe[$+15]]).toLowerCase();if(!nf(te))throw TypeError("Stringified UUID is invalid");return te}(pe)};class Qo{constructor($,te,pe={}){this.endpoint=$,this.signalingClient=void 0,this.emitter=new g.EventEmitter,this.isRealtimeNotificationsStarted=!1,this.tokenCredential=te,this.clientOptions=Object.assign({},pe);const Ce=Object.assign(Object.assign({},pe),{loggingOptions:{logger:u.info}});this.client=new cl(this.endpoint,Object.assign({endpoint:this.endpoint},Ce));const Pe=wr(this.tokenCredential);this.client.pipeline.addPolicy(Pe),this.signalingClient=((oe,$,te)=>{var pe;return new C.CommunicationSignalingClient(oe,$,{environment:null!==(pe=null==te?void 0:te.environment)&&void 0!==pe?pe:void 0})})(te,u,pe.signalingClientOptions)}getChatThreadClient($){return new Gn(this.endpoint,$,this.tokenCredential,this.clientOptions)}createChatThread($,te={}){var pe=this;return(0,N.Z)(function*(){var Ce,Pe;const{span:Ae,updatedOptions:Be}=h("ChatClient-CreateChatThread",te);try{Be.idempotencyToken=null!==(Ce=Be.idempotencyToken)&&void 0!==Ce?Ce:rf();const ht=(oe=>{const{idempotencyToken:te}=oe,pe=(0,y._T)(oe,["participants","idempotencyToken"]);return Object.assign({repeatabilityRequestId:te},pe)})(Be);return(oe=>{const{chatThread:$}=oe,te=(0,y._T)(oe,["chatThread"]);return $?Object.assign(Object.assign({},te),{chatThread:B($)}):Object.assign({},te)})(yield pe.client.chat.createChatThread({topic:$.topic,participants:null===(Pe=te.participants)||void 0===Pe?void 0:Pe.map(tt=>w(tt))},ht))}catch(ht){throw Ae.setStatus({code:E.Qn.ERROR,message:ht.message}),ht}finally{Ae.end()}})()}listChatThreadsPage($,te={}){return(0,y.FC)(this,arguments,function*(){if(!$.continuationToken){const Ce=yield(0,y.qq)(this.client.chat.listChatThreads(te));$.continuationToken=Ce.nextLink,Ce.value&&(yield yield(0,y.qq)(Ce.value))}for(;$.continuationToken;){const Ce=yield(0,y.qq)(this.client.chat.listChatThreadsNext($.continuationToken,te));if($.continuationToken=Ce.nextLink,!Ce.value)break;yield yield(0,y.qq)(Ce.value)}})}listChatThreadsAll($){return(0,y.FC)(this,arguments,function*(){var pe,Ce;try{for(var Ae,Pe=(0,y.KL)(this.listChatThreadsPage({},$));!(Ae=yield(0,y.qq)(Pe.next())).done;){const Be=Ae.value;yield(0,y.qq)(yield*(0,y.V2)((0,y.KL)(Be)))}}catch(Be){pe={error:Be}}finally{try{Ae&&!Ae.done&&(Ce=Pe.return)&&(yield(0,y.qq)(Ce.call(Pe)))}finally{if(pe)throw pe.error}}})}listChatThreads($={}){const{span:te,updatedOptions:pe}=h("ChatClient-ListChatThreads",$);try{const Ce=this.listChatThreadsAll(pe);return{next:()=>Ce.next(),[Symbol.asyncIterator](){return this},byPage:(Pe={})=>this.listChatThreadsPage(Pe,pe)}}catch(Ce){throw te.setStatus({code:E.Qn.ERROR,message:Ce.message}),Ce}finally{te.end()}}deleteChatThread($,te={}){var pe=this;return(0,N.Z)(function*(){const{span:Ce,updatedOptions:Pe}=h("ChatClient-DeleteChatThread",te);try{yield pe.client.chat.deleteChatThread($,Pe)}catch(Ae){throw Ce.setStatus({code:E.Qn.ERROR,message:Ae.message}),Ae}finally{Ce.end()}})()}startRealtimeNotifications(){var $=this;return(0,N.Z)(function*(){if(void 0===$.signalingClient)throw new Error("Realtime notifications are not supported in node js.");$.isRealtimeNotificationsStarted||($.isRealtimeNotificationsStarted=!0,yield $.signalingClient.start(),$.subscribeToSignalingEvents())})()}stopRealtimeNotifications(){var $=this;return(0,N.Z)(function*(){if(void 0===$.signalingClient)throw new Error("Realtime notifications are not supported in node js.");$.isRealtimeNotificationsStarted=!1,yield $.signalingClient.stop(),$.emitter.removeAllListeners()})()}on($,te){if(void 0===this.signalingClient)throw new Error("Realtime notifications are only supported in the browser.");if(!this.isRealtimeNotificationsStarted)throw new Error("You must call startRealtimeNotifications before you can subscribe to events.");this.emitter.on($,te)}off($,te){if(void 0===this.signalingClient)throw new Error("Realtime notifications are only supported in the browser.");this.emitter.removeListener($,te)}subscribeToSignalingEvents(){if(void 0===this.signalingClient)throw new Error("Realtime notifications are only supported in the browser.");this.signalingClient.on("chatMessageReceived",$=>{this.emitter.emit("chatMessageReceived",$)}),this.signalingClient.on("chatMessageEdited",$=>{this.emitter.emit("chatMessageEdited",$)}),this.signalingClient.on("chatMessageDeleted",$=>{this.emitter.emit("chatMessageDeleted",$)}),this.signalingClient.on("typingIndicatorReceived",$=>{this.emitter.emit("typingIndicatorReceived",$)}),this.signalingClient.on("readReceiptReceived",$=>{this.emitter.emit("readReceiptReceived",$)}),this.signalingClient.on("chatThreadCreated",$=>{this.emitter.emit("chatThreadCreated",$)}),this.signalingClient.on("chatThreadDeleted",$=>{this.emitter.emit("chatThreadDeleted",$)}),this.signalingClient.on("chatThreadPropertiesUpdated",$=>{this.emitter.emit("chatThreadPropertiesUpdated",$)}),this.signalingClient.on("participantsAdded",$=>{this.emitter.emit("participantsAdded",$)}),this.signalingClient.on("participantsRemoved",$=>{this.emitter.emit("participantsRemoved",$)})}}},8199:(Y,L,T)=>{"use strict";T.d(L,{J:()=>g,H:()=>C});var p=T(4762),N=T(6361);const y=(P,E)=>void 0===E?P:Object.assign(Object.assign({},P),{rawId:E}),x=(P,E)=>{const v=Object.keys(P)[0],h=P[v];if(E in h)return h[E];throw new Error(`Property ${E} is required for identifier of type ${v}.`)},g=P=>{var E,v;const h=(0,N.n9)(P);switch(h.kind){case"communicationUser":return{communicationUser:{id:h.communicationUserId}};case"phoneNumber":return y({phoneNumber:{value:h.phoneNumber}},h.rawId);case"microsoftTeamsUser":return y({microsoftTeamsUser:{userId:h.microsoftTeamsUserId,isAnonymous:null!==(E=h.isAnonymous)&&void 0!==E&&E,cloud:null!==(v=h.cloud)&&void 0!==v?v:"public"}},h.rawId);case"unknown":return{rawId:h.id};default:throw new Error(`Can't serialize an identifier with kind ${h.kind}`)}},C=P=>{(P=>{const v=(0,p._T)(P,["rawId"]),h=Object.keys(v);if(h.length>1)throw new Error(`Only one of the properties in ${JSON.stringify(h)} should be present.`)})(P);const{communicationUser:E,microsoftTeamsUser:v,phoneNumber:h}=P;return E?{kind:"communicationUser",communicationUserId:x({communicationUser:E},"id")}:h?{kind:"phoneNumber",phoneNumber:x({phoneNumber:h},"value"),rawId:x({phoneNumber:P},"rawId")}:v?{kind:"microsoftTeamsUser",microsoftTeamsUserId:x({microsoftTeamsUser:v},"userId"),isAnonymous:x({microsoftTeamsUser:v},"isAnonymous"),cloud:x({microsoftTeamsUser:v},"cloud"),rawId:x({microsoftTeamsUser:P},"rawId")}:{kind:"unknown",id:x({unknown:P},"rawId")}}},6361:(Y,L,T)=>{"use strict";T.d(L,{sE:()=>p,Nc:()=>N,OU:()=>y,vJ:()=>x,n9:()=>u});const p=g=>"string"==typeof g.communicationUserId,N=g=>"string"==typeof g.phoneNumber,y=g=>"string"==typeof g.microsoftTeamsUserId,x=g=>"string"==typeof g.id,u=g=>p(g)?Object.assign(Object.assign({},g),{kind:"communicationUser"}):N(g)?Object.assign(Object.assign({},g),{kind:"phoneNumber"}):y(g)?Object.assign(Object.assign({},g),{kind:"microsoftTeamsUser"}):Object.assign(Object.assign({},g),{kind:"unknown"})},9116:(Y,L,T)=>{"use strict";T.r(L),T.d(L,{AzureCommunicationTokenCredential:()=>v,createCommunicationAccessKeyCredentialPolicy:()=>U,createCommunicationAuthPolicy:()=>K,deserializeCommunicationIdentifier:()=>d.H,getIdentifierKind:()=>A.n9,isCommunicationUserIdentifier:()=>A.sE,isKeyCredential:()=>f,isMicrosoftTeamsUserIdentifier:()=>A.OU,isPhoneNumberIdentifier:()=>A.Nc,isUnknownIdentifier:()=>A.vJ,parseClientArguments:()=>M,parseConnectionString:()=>s,serializeCommunicationIdentifier:()=>d.J});var p=T(8239),N=T(4934),y=T.n(N);const x=i=>{const{exp:m}=y()(i);return{token:i,expiresOnTimestamp:1e3*m}};class u{constructor(m){this.token=m}getToken(){var m=this;return(0,p.Z)(function*(){return m.token})()}dispose(){}}const g={token:"",expiresOnTimestamp:-10};class E{constructor(m){this.refreshingIntervalInMs=6e5,this.activeTokenFetching=null,this.activeTokenUpdating=null,this.disposed=!1;const{tokenRefresher:q,token:z,refreshProactively:J}=m;this.refresh=q,this.currentToken=z?x(z):g,this.refreshProactively=null!=J&&J,this.refreshProactively&&this.scheduleRefresh()}getToken(m){var q=this;return(0,p.Z)(function*(){if(!q.isCurrentTokenExpiringSoon)return q.currentToken;const z=q.updateTokenAndReschedule(null==m?void 0:m.abortSignal);return q.isCurrentTokenValid||(yield z),q.currentToken})()}dispose(){this.disposed=!0,this.activeTokenFetching=null,this.activeTokenUpdating=null,this.currentToken=g,this.activeTimeout&&clearTimeout(this.activeTimeout)}updateTokenAndReschedule(m){var q=this;return(0,p.Z)(function*(){if(q.activeTokenUpdating)return q.activeTokenUpdating;q.activeTokenUpdating=q.refreshTokenAndReschedule(m);try{yield q.activeTokenUpdating}finally{q.activeTokenUpdating=null}})()}refreshTokenAndReschedule(m){var q=this;return(0,p.Z)(function*(){q.currentToken=yield q.refreshToken(m),q.refreshProactively&&q.scheduleRefresh()})()}refreshToken(m){var q=this;return(0,p.Z)(function*(){try{return q.activeTokenFetching||(q.activeTokenFetching=q.refresh(m)),x(yield q.activeTokenFetching)}finally{q.activeTokenFetching=null}})()}scheduleRefresh(){if(this.disposed)return;this.activeTimeout&&clearTimeout(this.activeTimeout);const m=this.currentToken.expiresOnTimestamp-Date.now()-this.refreshingIntervalInMs;this.activeTimeout=setTimeout(()=>this.updateTokenAndReschedule(),m)}get isCurrentTokenValid(){return this.currentToken&&Date.now()<this.currentToken.expiresOnTimestamp}get isCurrentTokenExpiringSoon(){return!this.currentToken||Date.now()>=this.currentToken.expiresOnTimestamp-this.refreshingIntervalInMs}}class v{constructor(m){this.disposed=!1,this.tokenCredential="string"==typeof m?new u(x(m)):new E(m)}getToken(m){var q=this;return(0,p.Z)(function*(){q.throwIfDisposed();const z=yield q.tokenCredential.getToken(m);return q.throwIfDisposed(),z})()}dispose(){this.disposed=!0,this.tokenCredential.dispose()}throwIfDisposed(){if(this.disposed)throw new Error("User credential is disposed")}}var h=T(2462),_=T(369),b=T(7694);const w=i=>(new TextEncoder).encode(i);function D(i){if("function"!=typeof btoa)throw new Error("Your browser environment is missing the global `btoa` function");const m=new Uint8Array(i);let q="";for(const z of m)q+=String.fromCharCode(z);return btoa(q)}const k=globalThis,O=()=>{if(!k)throw new Error("Could not find global");if(!k.crypto||!k.crypto.subtle)throw new Error("Browser does not support cryptography functions");return k.crypto.subtle},V=function(){var i=(0,p.Z)(function*(m){const q=w(m);return D(yield O().digest("SHA-256",q))});return function(q){return i.apply(this,arguments)}}(),B=function(){var i=(0,p.Z)(function*(m,q){const z={name:"HMAC",hash:{name:"SHA-256"}},J=w(q),ce=function(i){if("function"!=typeof atob)throw new Error("Your browser environment is missing the global `atob` function");const m=atob(i),q=new Uint8Array(m.length);for(let z=0;z<m.length;z++)q[z]=m.charCodeAt(z);return q}(m),se=O(),he=yield se.importKey("raw",ce,z,!1,["sign"]);return D(yield se.sign(z,he,J))});return function(q,z){return i.apply(this,arguments)}}(),U=i=>({create:(m,q)=>new j(i,m,q)});class j extends h.U{constructor(m,q,z){super(q,z),this.accessKey=m}signRequest(m){var q=this;return(0,p.Z)(function*(){const z=m.method.toUpperCase(),J=(new Date).toUTCString(),ce=yield V(m.body||""),se="x-ms-date",he=`${se};host;x-ms-content-sha256`,ve=_.UK.parse(m.url),ae=ve.getQuery(),de=ae?`${ve.getPath()}?${ae}`:ve.getPath(),Re=ve.getPort(),Ee=Re?`${ve.getHost()}:${Re}`:ve.getHost(),ue=`${z}\n${de}\n${J};${Ee};${ce}`,ye=yield B(q.accessKey.key,ue);return b.UG&&m.headers.set("Host",Ee||""),m.headers.set(se,J),m.headers.set("x-ms-content-sha256",ce),m.headers.set("Authorization",`HMAC-SHA256 SignedHeaders=${he}&Signature=${ye}`),m})()}sendRequest(m){var q=this;return(0,p.Z)(function*(){if(!m)throw new Error("webResource cannot be null or undefined");return q._nextPolicy.sendRequest(yield q.signRequest(m))})()}}var W=T(434),X=T(6354);const K=i=>(0,W.c)(i)?(0,X.v)(i,"https://communication.azure.com//.default"):U(i);class ge{constructor(m){if(!m)throw new Error("key must be a non-empty string");this._key=m}get key(){return this._key}update(m){this._key=m}}const R=/endpoint=(.*);accesskey=(.*)/i,s=i=>{const m=(i=>{const m=i.match(R);if((null==m?void 0:m[1])&&m[2])return{endpoint:m[1],credential:new ge(m[2])}})(i);if(m)return m;throw new Error(`Invalid connection string ${i}`)},a=i=>{if(!(i=>{var m;const q=_.UK.parse(i);return!!(null===(m=q.getScheme())||void 0===m?void 0:m.match(/^http[s]?/))&&void 0!==q.getHost()&&""!==q.getHost()&&(void 0===q.getPath()||""===q.getPath()||"/"===q.getPath())})(i))throw new Error(`Invalid endpoint url ${i}`)},f=i=>i&&"string"==typeof i.key&&void 0===i.getToken,M=(i,m)=>{if(f(m)||(0,W.c)(m))return a(i),{url:i,credential:m};{const{endpoint:q,credential:z}=s(i);return a(q),{url:q,credential:z}}};var A=T(6361),d=T(8199)},2305:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";function _interopDefault(Y){return Y&&"object"==typeof Y&&"default"in Y?Y.default:Y}var coreHttp=_interopDefault(__webpack_require__(8003)),commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function unwrapExports(Y){return Y&&Y.__esModule&&Object.prototype.hasOwnProperty.call(Y,"default")?Y.default:Y}function createCommonjsModule(Y,L){return Y(L={exports:{}},L.exports),L.exports}var tsregistrar=createCommonjsModule(function(Y,L){Y.exports=function(T){function p(y){if(N[y])return N[y].exports;var x=N[y]={i:y,l:!1,exports:{}};return T[y].call(x.exports,x,x.exports,p),x.l=!0,x.exports}var N={};return p.m=T,p.c=N,p.i=function(y){return y},p.d=function(y,x,u){p.o(y,x)||Object.defineProperty(y,x,{configurable:!1,enumerable:!0,get:u})},p.n=function(y){var x=y&&y.__esModule?function(){return y.default}:function(){return y};return p.d(x,"a",x),x},p.o=function(y,x){return Object.prototype.hasOwnProperty.call(y,x)},p.p="",p(p.s=1)}([function(T,p,N){Object.defineProperty(p,"__esModule",{value:!0}),p.toJson=function(u){try{return JSON.stringify(u)}catch(g){return"Unable to serialize object of type "+typeof u}};var x=function(){function u(){this.start=Date.now()}return Object.defineProperty(u.prototype,"duration",{get:function(){return Date.now()-this.start},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"startTime",{get:function(){return this.start},enumerable:!0,configurable:!0}),u.prototype.reset=function(){this.start=Date.now()},u}();p.Timespan=x},function(T,p,N){var h,x=this&&this.__extends||(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,b){_.__proto__=b}||function(_,b){for(var w in b)b.hasOwnProperty(w)&&(_[w]=b[w])},function(_,b){function w(){this.constructor=_}h(_,b),_.prototype=null===b?Object.create(b):(w.prototype=b.prototype,new w)}),u=this&&this.__awaiter||function(h,_,b,w){return new(b||(b=Promise))(function(I,D){function k(B){try{V(w.next(B))}catch(U){D(U)}}function O(B){try{V(w.throw(B))}catch(U){D(U)}}function V(B){B.done?I(B.value):new b(function(U){U(B.value)}).then(k,O)}V((w=w.apply(h,_||[])).next())})},g=this&&this.__generator||function(h,_){function b(B){return function(U){return function(B){if(I)throw new TypeError("Generator is already executing.");for(;V;)try{if(I=1,D&&(k=2&B[0]?D.return:B[0]?D.throw||((k=D.return)&&k.call(D),0):D.next)&&!(k=k.call(D,B[1])).done)return k;switch(D=0,k&&(B=[2&B[0],k.value]),B[0]){case 0:case 1:k=B;break;case 4:return V.label++,{value:B[1],done:!1};case 5:V.label++,D=B[1],B=[0];continue;case 7:B=V.ops.pop(),V.trys.pop();continue;default:if(!(k=(k=V.trys).length>0&&k[k.length-1])&&(6===B[0]||2===B[0])){V=0;continue}if(3===B[0]&&(!k||B[1]>k[0]&&B[1]<k[3])){V.label=B[1];break}if(6===B[0]&&V.label<k[1]){V.label=k[1],k=B;break}if(k&&V.label<k[2]){V.label=k[2],V.ops.push(B);break}k[2]&&V.ops.pop(),V.trys.pop();continue}B=_.call(h,V)}catch(U){B=[6,U],D=0}finally{I=k=0}if(5&B[0])throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}([B,U])}}var I,D,k,O,V={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return O={next:b(0),throw:b(1),return:b(2)},"function"==typeof Symbol&&(O[Symbol.iterator]=function(){return this}),O};Object.defineProperty(p,"__esModule",{value:!0});var C=N(0),P=function(h){function _(b){var w=h.call(this,b)||this;return w.name="CancelationError",w}return x(_,h),_}(Error),E=function(){function h(_,b,w){this.logger=_,this.maxBackoffInMs=b,this.initialDelay=w,this.backoffCount=0,this.id=++h.idCounter}return h.prototype.delay=function(_){var b=this;if(void 0!==this.timerHandle)throw new Error("Retry sequence logical failure");if(-1===this.backoffCount)return new Promise(function(I,D){D(new P("Cancelled"))});var w=this.calculateNextBackoffMs();return this.backoffCount++,this.logger.info("[RegistrarClient] Backing off "+_+" for "+w+" milliseconds with ID "+this.id),new Promise(function(I,D){b.cancelFunc=D,b.timerHandle=setTimeout(function(){b.logger.info("[RegistrarClient] Back off for "+_+" with ID "+b.id+" complete"),b.timerHandle=void 0,I()},w)})},h.prototype.cancel=function(){void 0!==this.timerHandle&&(this.logger.debug("Resetting back off"),clearTimeout(this.timerHandle),void 0!==this.cancelFunc&&this.cancelFunc(new P("Cancelled"))),this.backoffCount=-1},h.prototype.calculateNextBackoffMs=function(){var _=1+.4*(Math.random()-.5),b=this.initialDelay*Math.pow(2,this.backoffCount)*_;return b=Math.round(b),Math.min(this.maxBackoffInMs,b)},h.idCounter=0,h}(),v=function(){function h(_,b,w){this.logger=_,this.skypeTokenProvider=b,this.options=w,this.backoffs={}}return h.prototype.setTelemetryLogger=function(_){this.eventLogger=_},h.prototype.register=function(_,b){return u(this,void 0,void 0,function(){return g(this,function(w){switch(w.label){case 0:return[4,this.performRegistration(_,b,"pr_set_registration")];case 1:return w.sent(),this.cachedRegistrationParams=[_,b],[2]}})})},h.prototype.unregister=function(){return u(this,void 0,void 0,function(){var _;return g(this,function(b){switch(b.label){case 0:return this.logger.info("[RegistrarClient] sending unregister request"),_=new Request(this.options.registrarUrl+"/"+this.options.registrationId,{method:"DELETE",mode:"cors",headers:new Headers({accept:"application/json, text/javascript"})}),[4,this.callRegistrar(_,"pr_delete_registration")];case 1:return b.sent(),[2]}})})},h.prototype.cancelPendingRequests=function(){var _=this;Object.keys(this.backoffs).forEach(function(b){_.backoffs[b].cancel()}),this.backoffs={}},h.prototype.resendRegistration=function(){return u(this,void 0,void 0,function(){return g(this,function(_){switch(_.label){case 0:if(!this.cachedRegistrationParams)throw new Error("Re-registration failed because there is no registration parameters cached");return[4,this.performRegistration(this.cachedRegistrationParams[0],this.cachedRegistrationParams[1],"pr_resend_registration")];case 1:return _.sent(),[2]}})})},h.prototype.performRegistration=function(_,b,w){return u(this,void 0,void 0,function(){var I,D;return g(this,function(k){switch(k.label){case 0:return this.logger.info("[RegistrarClient] Sending register request"),I={clientDescription:_,registrationId:this.options.registrationId,nodeId:"",transports:b},D=new Request(this.options.registrarUrl,{method:"POST",mode:"cors",headers:new Headers({"content-type":"application/json",accept:"application/json, text/javascript"}),body:C.toJson(I)}),[4,this.callRegistrar(D,w)];case 1:return k.sent(),[2]}})})},h.prototype.startBackoff=function(){var _=new E(this.logger,this.options.maxRetryDelayMs,this.options.initialRetryDelayMs);return this.backoffs[_.id]=_,_},h.prototype.stopBackoff=function(_){_.cancel(),delete this.backoffs[_.id]},h.prototype.getSkypeToken=function(){return u(this,void 0,void 0,function(){var _,b,I;return g(this,function(D){switch(D.label){case 0:_=this.startBackoff(),D.label=1;case 1:return D.trys.push([1,3,,8]),this.logger.info("[RegistrarClient] Asking for a new skypetoken"),[4,this.skypeTokenProvider(!0)];case 2:return b=D.sent(),this.stopBackoff(_),[2,b];case 3:D.sent(),D.label=4;case 4:return D.trys.push([4,6,,7]),[4,_.delay("Fetching a new skypetoken")];case 5:return D.sent(),[3,8];case 6:throw I=D.sent(),this.stopBackoff(_),I;case 7:return[3,8];case 8:return[3,1];case 9:return[2]}})})},h.prototype.callRegistrar=function(_,b){return u(this,void 0,void 0,function(){var w,I,D,k,O,V,B,U,j,W,X,K,R;return g(this,function(r){switch(r.label){case 0:return w=this.startBackoff(),[4,this.skypeTokenProvider(!1)];case 1:I=r.sent(),this.setSkypeTokenHeader(_,I),D=new C.Timespan,r.label=2;case 2:k=void 0,r.label=3;case 3:return r.trys.push([3,8,13,14]),O=_.clone(),[4,this.fetchWithTimeout(O)];case 4:return 401!==(k=r.sent()).status?[3,6]:(V=this.setSkypeTokenHeader,B=[_],[4,this.getSkypeToken()]);case 5:return V.apply(this,B.concat([r.sent()])),[3,20];case 6:if(k.status>=500&&k.status<600)throw new Error("Fetch for '"+_.url+"' failed with "+k.status+" "+k.statusText);r.label=7;case 7:return[3,14];case 8:U=r.sent(),this.logger.error("[RegistrarClient] Request failed with "+U),r.label=9;case 9:return r.trys.push([9,11,,12]),[4,w.delay("Registrar call retry")];case 10:return r.sent(),[3,20];case 11:throw j=r.sent(),this.logger.error("[RegistrarClient] Request cancelled"),this.stopBackoff(w),j;case 12:return[3,14];case 13:return this.sendTelemetryEvent(b,_,k,D),[7];case 14:return this.stopBackoff(w),k.ok?[2,k]:[3,15];case 15:W=void 0,r.label=16;case 16:return r.trys.push([16,18,,19]),K=(X=JSON).stringify,[4,k.json()];case 17:return W=K.apply(X,[r.sent()]),[3,19];case 18:return r.sent(),W="no details",[3,19];case 19:throw R="Fetch for '"+_.url+"' failed with "+k.status+" "+k.statusText+" ("+W+", MS-CV: "+k.headers.get("MS-CV")+")",this.logger.error("[RegistrarClient] "+R),new Error(R);case 20:return[3,2];case 21:return[2]}})})},h.prototype.setSkypeTokenHeader=function(_,b){_.headers.set("X-Skypetoken",b)},h.prototype.fetchWithTimeout=function(_){var b=this;return new Promise(function(w,I){fetch(_).then(w).catch(I),0!==b.options.requestTimeoutMs&&setTimeout(I,b.options.requestTimeoutMs,new Error("Fetch for '"+_.url+"' timed out"))})},h.prototype.sendTelemetryEvent=function(_,b,w,I){void 0!==this.eventLogger&&this.eventLogger.logEvent({name:_,properties:{url:{value:b.url},result_code:{value:void 0!==w?w.status:0},begin_timestamp:{value:I.startTime},elapsed:{value:I.duration}}})},h}();p.RegistrarClient=v,p.createRegistrarClient=function(h,_,b){return new v(h,_,b)}}])});unwrapExports(tsregistrar);var tstrouter=createCommonjsModule(function(module,exports){var L;L=function(__WEBPACK_EXTERNAL_MODULE_20__){return function(Y){function L(p){if(T[p])return T[p].exports;var N=T[p]={i:p,l:!1,exports:{}};return Y[p].call(N.exports,N,N.exports,L),N.l=!0,N.exports}var T={};return L.m=Y,L.c=T,L.i=function(p){return p},L.d=function(p,N,y){L.o(p,N)||Object.defineProperty(p,N,{configurable:!1,enumerable:!0,get:y})},L.n=function(p){var N=p&&p.__esModule?function(){return p.default}:function(){return p};return L.d(N,"a",N),N},L.o=function(p,N){return Object.prototype.hasOwnProperty.call(p,N)},L.p="",L(L.s=19)}([function(Y,L,T){Object.defineProperty(L,"__esModule",{value:!0});var p=function(){function N(y,x){this.name=y,this.logger=x}return N.prototype.debug=function(y){this.logger.debug("["+this.name+"] "+y)},N.prototype.info=function(y){this.logger.info("["+this.name+"] "+y)},N.prototype.warn=function(y){this.logger.warn("["+this.name+"] "+y)},N.prototype.error=function(y){this.logger.error("["+this.name+"] "+y)},N}();L.Logger=p},function(Y,L,T){Object.defineProperty(L,"__esModule",{value:!0}),L.constants={TROUTER_INIT:"trouterinit",TROUTER_READY_EVENT:"trouterReadyEvent",TROUTER_READY_TIMEOUT:"trouterReadyTimeout",TROUTER_TOKEN_REQUEST:"trouterTokenRequest",TROUTER_TOKEN_GET_SUCCEEDED:"trouterTokenGetSucceeded",TROUTER_TOKEN_GET_FAILED:"trouterTokenGetFailed",TROUTER_RECONNECTING:"trouterReconnecting",RENEWAL:"renewal",NEW_CONNECTION:"newConnection",ENDPOINT_REGISTRATION_FAILED:"endpointRegistrationFailed"},L.CLIENT_VERSION="2021.32.00.1",L.HANDLED_MESSAGE_ACK=200,L.UNHANDLED_MESSAGE_ACK=404,L.FAILED_MESSAGE_ACK=500},function(Y,L,T){var N;Object.defineProperty(L,"__esModule",{value:!0}),(N=L.UserActivityState||(L.UserActivityState={}))[N.Unknown=0]="Unknown",N[N.Active=1]="Active",N[N.Inactive=2]="Inactive",L.HttpHeaders=function(){},function(N){N[N.Unknown=0]="Unknown",N[N.Connected=2]="Connected",N[N.Disconnected=3]="Disconnected",N[N.Switching=9]="Switching"}(L.TrouterState||(L.TrouterState={}))},function(Y,L,T){Object.defineProperty(L,"__esModule",{value:!0}),L.toJson=function(g){try{return JSON.stringify(g)}catch(C){return"Unable to serialize object of type "+typeof g}},L.calculateTtlInSec=function(g){var C=Math.round((new Date).getTime()/1e3);return void 0!==g&&g>C?g-C:0},L.calculateExpireTsInSec=function(g){return Math.round((new Date).getTime()/1e3)+g};var x=function(){function g(C){this.base=void 0!==C?C:this.createCorrelationVectorBase(),this.extension=0}return g.extend=function(C){return new g(C)},g.prototype.increase=function(){this.extension++},g.prototype.value=function(){return this.base+"."+this.extension},g.prototype.createCorrelationVectorBase=function(){for(var C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0987654321/+",P="AQgw",E="",v=0;v<21;v++)E+=C.charAt(Math.floor(Math.random()*C.length));return E+P.charAt(Math.floor(Math.random()*P.length))},g}();L.CorrelationVector=x;var u=function(){function g(){this.start=Date.now()}return Object.defineProperty(g.prototype,"duration",{get:function(){return Date.now()-this.start},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"startTime",{get:function(){return this.start},enumerable:!0,configurable:!0}),g.prototype.reset=function(){this.start=Date.now()},g}();L.Timespan=u},function(Y,L){var T;T=function(){return this}();try{T=T||Function("return this")()||(0,eval)("this")}catch(p){"object"==typeof window&&(T=window)}Y.exports=T},function(Y,L,T){Object.defineProperty(L,"__esModule",{value:!0});var y,p=T(3),N=function(){function y(x,u,g,C,P,E,v){this.connectionId=x,this.connectedClientId=u,this.domId=g,this.unsecureUrl=C,this.url=P,this.c2cUrlBase=E,this.expirationTsSec=v}return y.prototype.getRemainingTtlInSec=function(){return p.calculateTtlInSec(this.expirationTsSec)},y}();L.ServerState=N,(y=L.UserActivityEventReason||(L.UserActivityEventReason={}))[y.Unknown=0]="Unknown",y[y.Modified=1]="Modified",y[y.Snapshot=2]="Snapshot",y[y.Connected=3]="Connected"},function(Y,L,T){Object.defineProperty(L,"__esModule",{value:!0});var p=T(1),N=function(){function y(x){this.logger=x,this.messageHandlers=[]}return y.prototype.register=function(x){if(this.messageHandlers.some(function(u){return u===x}))throw new Error("Registering the same handler twice is not allowed");this.messageHandlers.push(x)},y.prototype.clear=function(){this.logger.debug("Clearing message handlers"),this.messageHandlers=[]},y.prototype.active=function(){return this.messageHandlers.length>0},y.prototype.handleMessage=function(x){for(var u={resultCode:p.UNHANDLED_MESSAGE_ACK,isHandled:!1},g=0,C=this.messageHandlers;g<C.length;g++){var E=this.safeExecuteHandle(C[g],x);if(void 0!==E&&(void 0===E.isHandled||E.isHandled))return void 0===E.resultCode&&(E.resultCode=p.HANDLED_MESSAGE_ACK),E}return u},y.prototype.safeExecuteHandle=function(x,u){try{return x.handleMessage(u)}catch(g){return void this.logger.warn("A trouter message handler is throwing exceptions. exception: "+g)}},y}();L.MessageHandlerRegistry=N},function(Y,L,T){var N=this&&this.__awaiter||function(x,u,g,C){return new(g||(g=Promise))(function(P,E){function v(b){try{_(C.next(b))}catch(w){E(w)}}function h(b){try{_(C.throw(b))}catch(w){E(w)}}function _(b){b.done?P(b.value):new g(function(w){w(b.value)}).then(v,h)}_((C=C.apply(x,u||[])).next())})},y=this&&this.__generator||function(x,u){function g(b){return function(w){return function(b){if(P)throw new TypeError("Generator is already executing.");for(;_;)try{if(P=1,E&&(v=2&b[0]?E.return:b[0]?E.throw||((v=E.return)&&v.call(E),0):E.next)&&!(v=v.call(E,b[1])).done)return v;switch(E=0,v&&(b=[2&b[0],v.value]),b[0]){case 0:case 1:v=b;break;case 4:return _.label++,{value:b[1],done:!1};case 5:_.label++,E=b[1],b=[0];continue;case 7:b=_.ops.pop(),_.trys.pop();continue;default:if(!(v=(v=_.trys).length>0&&v[v.length-1])&&(6===b[0]||2===b[0])){_=0;continue}if(3===b[0]&&(!v||b[1]>v[0]&&b[1]<v[3])){_.label=b[1];break}if(6===b[0]&&_.label<v[1]){_.label=v[1],v=b;break}if(v&&_.label<v[2]){_.label=v[2],_.ops.push(b);break}v[2]&&_.ops.pop(),_.trys.pop();continue}b=u.call(x,_)}catch(w){b=[6,w],E=0}finally{P=v=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([b,w])}}var P,E,v,h,_={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return h={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h};Object.defineProperty(L,"__esModule",{value:!0}),L.addCacheAsBackupTo=function(x){var u,g=this;return function(C){return N(g,void 0,void 0,function(){return y(this,function(P){return C&&(u=void 0),[2,new Promise(function(E,v){x(C).then(function(h){u=h,E(h)}).catch(function(h){void 0!==u&&u.length>0&&E(u),v(h)})})]})})}}},function(Y,L,T){var p=this&&this.__awaiter||function(v,h,_,b){return new(_||(_=Promise))(function(w,I){function D(V){try{O(b.next(V))}catch(B){I(B)}}function k(V){try{O(b.throw(V))}catch(B){I(B)}}function O(V){V.done?w(V.value):new _(function(B){B(V.value)}).then(D,k)}O((b=b.apply(v,h||[])).next())})},N=this&&this.__generator||function(v,h){function _(V){return function(B){return function(V){if(w)throw new TypeError("Generator is already executing.");for(;O;)try{if(w=1,I&&(D=2&V[0]?I.return:V[0]?I.throw||((D=I.return)&&D.call(I),0):I.next)&&!(D=D.call(I,V[1])).done)return D;switch(I=0,D&&(V=[2&V[0],D.value]),V[0]){case 0:case 1:D=V;break;case 4:return O.label++,{value:V[1],done:!1};case 5:O.label++,I=V[1],V=[0];continue;case 7:V=O.ops.pop(),O.trys.pop();continue;default:if(!(D=(D=O.trys).length>0&&D[D.length-1])&&(6===V[0]||2===V[0])){O=0;continue}if(3===V[0]&&(!D||V[1]>D[0]&&V[1]<D[3])){O.label=V[1];break}if(6===V[0]&&O.label<D[1]){O.label=D[1],D=V;break}if(D&&O.label<D[2]){O.label=D[2],O.ops.push(V);break}D[2]&&O.ops.pop(),O.trys.pop();continue}V=h.call(v,O)}catch(B){V=[6,B],I=0}finally{w=D=0}if(5&V[0])throw V[1];return{value:V[0]?V[1]:void 0,done:!0}}([V,B])}}var w,I,D,k,O={label:0,sent:function(){if(1&D[0])throw D[1];return D[1]},trys:[],ops:[]};return k={next:_(0),throw:_(1),return:_(2)},"function"==typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k};Object.defineProperty(L,"__esModule",{value:!0});var y=T(3),x=T(2),u=T(0),g=T(16),C=T(18),P=function(){function v(h,_){this.state=h,this.correlationVector=void 0!==_?_:y.CorrelationVector.extend()}return v.prototype.getStateString=function(){switch(this.state){case x.UserActivityState.Active:return"active";case x.UserActivityState.Inactive:return"inactive";case x.UserActivityState.Unknown:return"unknown";default:return"undefined"}},v.prototype.toEventObject=function(){return{state:this.getStateString(),cv:this.correlationVector.value()}},v.prototype.toEventJSON=function(){return y.toJson(this.toEventObject())},v}();L.UserActivityObject=P;var E=function(){function v(h,_,b,w){this.logFunc=h,this.options=_,this.tokenProvider=b,this.listener=w,this.logger=new u.Logger("Manager",h),this.logger.info("Created TrouterManager with options "+y.toJson(this.options)),this.fsm=new C.TrouterManagerFsm(h,this),this.baseEndpointUrl="",this.processedMessageLoss={},this.userActivityObject=new P(x.UserActivityState.Unknown)}return v.prototype.start=function(){this.fsm.start()},v.prototype.stop=function(h){this.fsm.stop(h)},v.prototype.configure=function(h){this.options=h,void 0!==this.firstConnection&&this.firstConnection.configure(h),void 0!==this.secondConnection&&this.secondConnection.configure(h),this.logger.info("Reconfigured TrouterManager with options "+y.toJson(this.options))},v.prototype.checkConnection=function(h){void 0!==this.firstConnection&&this.firstConnection.checkConnection(h),void 0!==this.secondConnection&&this.secondConnection.checkConnection(h)},v.prototype.resendRegistration=function(){return p(this,void 0,void 0,function(){return N(this,function(h){return void 0!==this.secondConnection?(this.logger.info("Resending registration on the second/new connection"),[2,this.secondConnection.resendRegistration()]):void 0!==this.firstConnection?(this.logger.info("Resending registration on the first/current connection"),[2,this.firstConnection.resendRegistration()]):(this.logger.info("No connection to resend registration on, will be done upon (re)connect"),[2])})})},v.prototype.getServerState=function(){if(void 0!==this.firstConnection)return this.firstConnection.getServerState()},v.prototype.getState=function(){return this.fsm.getState()},v.prototype.startFirstConnection=function(){var h=new g.TrouterConnection(this.logFunc,this.options,this,this.tokenProvider,this.userActivityObject);this.firstConnection=h,this.getConnectionCache().then(function(_){h.start(_)}).catch()},v.prototype.startSecondConnection=function(){this.secondConnection=new g.TrouterConnection(this.logFunc,this.options,this,this.tokenProvider,this.userActivityObject),this.secondConnection.start()},v.prototype.stopFirstConnection=function(h){void 0!==this.firstConnection&&(this.firstConnection.stop(h),this.storedFirstConnection=this.firstConnection,this.firstConnection=void 0)},v.prototype.stopSecondConnection=function(h){void 0!==this.secondConnection&&(this.secondConnection.stop(h),this.secondConnection=void 0)},v.prototype.stopSecondConnectionDelayed=function(){if(void 0!==this.secondConnection){var h=this.secondConnection;this.secondConnection=void 0,this.logger.info("Closing an inactive connection in "+Math.round(this.options.lingeringConnectionDelayMs/1e3)+"s"),setTimeout(function(){h.stop(!0)},this.options.lingeringConnectionDelayMs)}},v.prototype.forceStopLingeringConnection=function(){this.storedFirstConnection&&(this.storedFirstConnection.stop(!1),this.storedFirstConnection=void 0)},v.prototype.switchConnections=function(){var h=this.firstConnection;this.firstConnection=this.secondConnection,this.secondConnection=h},v.prototype.doesSecondConnectionExist=function(){return void 0!==this.secondConnection},v.prototype.dispatchConnected=function(){if(void 0!==this.firstConnection){var h=this.firstConnection.getServerState(),_="/"===h.url.slice(-1)?h.url.slice(0,-1):h.url,b={baseEndpointUrl:_,newEndpointUrl:_!==this.baseEndpointUrl,c2cUrlBase:h.c2cUrlBase,clientId:h.connectedClientId,connectionId:h.connectionId,connectionTtlSec:h.getRemainingTtlInSec()};this.baseEndpointUrl=_,this.listener.onTrouterConnected(h.url,b)}},v.prototype.dispatchReconnecting=function(){this.listener.onTrouterDisconnected&&this.listener.onTrouterDisconnected()},v.prototype.dispatchStopped=function(){this.listener.onTrouterDisconnected&&this.listener.onTrouterDisconnected()},v.prototype.dispatchRegistrationState=function(h){this.options.registrationStateCallback&&this.options.registrationStateCallback(h)},v.prototype.onDownstreamRequest=function(h,_,b){var I={id:_.id,status:0,headers:{},body:"",send:function(){return I.status<=100||I.status>=999?3:(b.writeHead(I.status,I.headers),b.end(I.body))}};this.listener.onTrouterRequest({id:_.id,method:_.method,path:"/"+_.shortUrl,body:_.body,headers:_.headers},I)},v.prototype.onConnected=function(h){this.fsm.onConnected(h===this.firstConnection)},v.prototype.onRegistered=function(h){this.fsm.onRegistered(h===this.firstConnection)},v.prototype.onUnregistered=function(h){this.fsm.onUnregistered(h===this.firstConnection||h===this.storedFirstConnection)},v.prototype.onReconnecting=function(h){this.fsm.onReconnecting(h===this.firstConnection)},v.prototype.onReconnectIsRequired=function(h){this.fsm.onReconnectionRequired(h===this.firstConnection)},v.prototype.onDisconnected=function(h){this.fsm.onDisconnected(h===this.storedFirstConnection),this.storedFirstConnection=void 0},v.prototype.onUserActivityStateAccepted=function(h){this.listener.onTrouterUserActivityStateAccepted&&this.listener.onTrouterUserActivityStateAccepted(h)},v.prototype.onConnectionParametersUpdated=function(h){this.setConnectionCache(h)},v.prototype.setUserActivityState=function(h,_){return this.userActivityObject=new P(h,y.CorrelationVector.extend(_)),void 0!==this.secondConnection?(this.logger.info("Setting user activity "+this.userActivityObject.toEventJSON()+" on the second/new connection"),void this.secondConnection.setUserActivityState(this.userActivityObject)):void 0!==this.firstConnection?(this.logger.info("Setting user activity "+this.userActivityObject.toEventJSON()+" on the first/current connection"),void this.firstConnection.setUserActivityState(this.userActivityObject)):void 0},v.prototype.onTrouterMessageLost=function(h){var _=this;if(this.listener.onTrouterMessageLoss)if(h&&h.length){var b=h.filter(function(I){return void 0!==_.processedMessageLoss[I.tag+"-"+I.etag]});if(b.length&&(this.logger.warn("onTrouterMessageLoss - removing duplicates and sending event to server"),this.sendProcessedDroppedIndicators(b),!(h=h.filter(function(I){return void 0===_.processedMessageLoss[I.tag+"-"+I.etag]})).length))return void this.logger.warn("onTrouterMessageLoss - All the data are duplicated");if(!this.listener.onTrouterMessageLoss(h.map(function(I){return I.tag})))return void this.logger.warn("onTrouterMessageLoss - flow tags have not been processed by listeners");h.forEach(function(I){_.processedMessageLoss[I.tag+"-"+I.etag]=""}),this.sendProcessedDroppedIndicators(h)}else this.logger.warn("onTrouterMessageLoss - no flow tags have been provided")},v.prototype.getConnectionCache=function(){var h=this;return this.options.connectionCache?(this.logger.debug("Querying host's connection cache"),this.options.connectionCache.onGetTrouterConnectionCache().then(function(_){return _?JSON.parse(_):void 0}).catch(function(_){return h.logger.warn("Invalid connection cache content provided: "+_),h.connectionCache})):Promise.resolve(this.connectionCache)},v.prototype.setConnectionCache=function(h){if(this.connectionCache=h,this.options.connectionCache)try{this.options.connectionCache.onSetTrouterConnectionCache(JSON.stringify(h))}catch(_){this.logger.warn("Error setting external connection cache: "+_)}},v.prototype.sendProcessedDroppedIndicators=function(h){return void 0!==this.firstConnection?void this.firstConnection.sendProcessedDroppedIndicators(h):void 0!==this.secondConnection?void this.secondConnection.sendProcessedDroppedIndicators(h):void 0},v}();L.TrouterManager=E},function(Y,L,T){Object.defineProperty(L,"__esModule",{value:!0});var p=function(){function N(y){this.logger=y}return N.prototype.getPromise=function(){var y=this;return void 0!==this.url?(this.logger.debug("[TrouterUrlPromise] returning previously resolved url: "+this.url),Promise.resolve(this.url)):(void 0===this.pendingPromise?(this.logger.debug("[TrouterUrlPromise] creating and returning promise"),this.pendingPromise=new Promise(function(x,u){y.pendingPromiseResolveRef=x,y.pendingPromiseRejectRef=u})):this.logger.debug("[TrouterUrlPromise] returning existing promise"),this.pendingPromise)},N.prototype.resolveUrl=function(y){this.url=y,this.logger.debug("[TrouterUrlPromise] got url: "+this.url);var x=this.pendingPromiseResolveRef;this.pendingPromise=void 0,this.pendingPromiseResolveRef=void 0,this.pendingPromiseRejectRef=void 0,void 0!==x&&(this.logger.debug("[TrouterUrlPromise] resolving promise"),x(y))},N.prototype.rejectUrl=function(y){this.logger.debug("[TrouterUrlPromise] aborting");var x=this.pendingPromiseRejectRef;this.url=void 0,this.pendingPromise=void 0,this.pendingPromiseResolveRef=void 0,this.pendingPromiseRejectRef=void 0,void 0!==x&&(this.logger.debug("[TrouterUrlPromise] rejecting promise"),x(y))},N.prototype.resetUrl=function(){this.logger.debug("[TrouterUrlPromise] resetting url"),this.url=void 0},N}();L.TrouterUrlPromise=p},function(module,exports,__nested_webpack_require_43418__){(function(global,module){var Y,L,T;Y=module.exports,L=void 0===global?window:global,T=Y,T.version="0.9.6",T.protocol=1,T.transports=[],T.j=[],T.sockets={},T.connect=function(p,N){var y,x,u=T.util.parseUri(p);L&&L.location&&(u.protocol=u.protocol||L.location.protocol.slice(0,-1),u.host=u.host||(L.document?L.document.domain:L.location.hostname),u.port=u.port||L.location.port),y=T.util.uniqueUri(u);var g={host:u.host,secure:"https"==u.protocol,port:u.port||("https"==u.protocol?443:80),query:u.query||""};return T.util.merge(g,N),!g["force new connection"]&&T.sockets[y]||(x=new T.Socket(g)),!g["force new connection"]&&x&&(T.sockets[y]=x),(x=x||T.sockets[y]).of(u.path.length>1?u.path:"")};var io=module.exports;(function(Y,L){var T=Y.util={},p=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,N=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];T.parseUri=function(x){for(var u=p.exec(x||""),g={},C=14;C--;)g[N[C]]=u[C]||"";return g},T.uniqueUri=function(x){var u=x.protocol,g=x.host,C=x.port;return"document"in L?(g=g||document.domain,C=C||("https"==u&&"https:"!==document.location.protocol?443:document.location.port)):(g=g||"localhost",C||"https"!=u||(C=443)),(u||"http")+"://"+g+":"+(C||80)},T.query=function(x,u){var g=T.chunkQuery(x||""),C=[];for(var P in T.merge(g,T.chunkQuery(u||"")),g)g.hasOwnProperty(P)&&C.push(P+"="+g[P]);return C.length?"?"+C.join("&"):""},T.chunkQuery=function(x){for(var u,g={},C=x.split("&"),P=0,E=C.length;P<E;++P)(u=C[P].split("="))[0]&&(g[u[0]]=u[1]);return g};var y=!1;T.load=function(x){if("document"in L&&"complete"===document.readyState||y)return x();T.on(L,"load",x,!1)},T.on=function(x,u,g,C){x.attachEvent?x.attachEvent("on"+u,g):x.addEventListener&&x.addEventListener(u,g,C)},T.request=function(x){if(x&&"undefined"!=typeof XDomainRequest)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!x||T.ua.hasCORS))return new XMLHttpRequest;if(!x)try{return new(window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(u){}return null},"undefined"!=typeof window&&T.load(function(){y=!0}),T.defer=function(x){if(!T.ua.webkit||"undefined"!=typeof importScripts)return x();T.load(function(){setTimeout(x,100)})},T.merge=function(x,u,g,C){var P,E=C||[],v=void 0===g?2:g;for(P in u)u.hasOwnProperty(P)&&T.indexOf(E,P)<0&&("object"==typeof x[P]&&v?T.merge(x[P],u[P],v-1,E):(x[P]=u[P],E.push(u[P])));return x},T.mixin=function(x,u){T.merge(x.prototype,u.prototype)},T.inherit=function(x,u){function g(){}g.prototype=u.prototype,x.prototype=new g},T.isArray=Array.isArray||function(x){return"[object Array]"===Object.prototype.toString.call(x)},T.intersect=function(x,u){for(var g=[],C=x.length>u.length?x:u,P=x.length>u.length?u:x,E=0,v=P.length;E<v;E++)~T.indexOf(C,P[E])&&g.push(P[E]);return g},T.indexOf=function(x,u,g){var C=x.length;for(g=g<0?g+C<0?0:g+C:g||0;g<C&&x[g]!==u;g++);return C<=g?-1:g},T.toArray=function(x){for(var u=[],g=0,C=x.length;g<C;g++)u.push(x[g]);return u},T.ua={},T.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var x=new XMLHttpRequest}catch(u){return!1}return null!=x.withCredentials}(),T.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent)})(void 0!==io?io:module.exports,void 0===global?window:global),function(Y,L){function T(){}Y.EventEmitter=T,T.prototype.addListener=T.prototype.on=function(p,N){return this.$events||(this.$events={}),this.$events[p]?L.util.isArray(this.$events[p])?this.$events[p].push(N):this.$events[p]=[this.$events[p],N]:this.$events[p]=N,this},T.prototype.once=function(p,N){function y(){x.removeListener(p,y),N.apply(this,arguments)}var x=this;return y.listener=N,this.on(p,y),this},T.prototype.removeListener=function(p,N){if(this.$events&&this.$events[p]){var y=this.$events[p];if(L.util.isArray(y)){for(var x=-1,u=0,g=y.length;u<g;u++)if(y[u]===N||y[u].listener&&y[u].listener===N){x=u;break}if(x<0)return this;y.splice(x,1),y.length||delete this.$events[p]}else(y===N||y.listener&&y.listener===N)&&delete this.$events[p]}return this},T.prototype.removeAllListeners=function(p){return this.$events&&this.$events[p]&&(this.$events[p]=null),this},T.prototype.listeners=function(p){return this.$events||(this.$events={}),this.$events[p]||(this.$events[p]=[]),L.util.isArray(this.$events[p])||(this.$events[p]=[this.$events[p]]),this.$events[p]},T.prototype.emit=function(p){if(!this.$events)return!1;var N=this.$events[p];if(!N)return!1;var y=Array.prototype.slice.call(arguments,1);if("function"==typeof N)N.apply(this,y);else{if(!L.util.isArray(N))return!1;for(var x=N.slice(),u=0,g=x.length;u<g;u++)x[u].apply(this,y)}return!0}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),function(exports,nativeJSON){function f(Y){return Y<10?"0"+Y:Y}function date(Y,L){return isFinite(Y.valueOf())?Y.getUTCFullYear()+"-"+f(Y.getUTCMonth()+1)+"-"+f(Y.getUTCDate())+"T"+f(Y.getUTCHours())+":"+f(Y.getUTCMinutes())+":"+f(Y.getUTCSeconds())+"Z":null}function quote(Y){return escapable.lastIndex=0,escapable.test(Y)?'"'+Y.replace(escapable,function(L){var T=meta[L];return"string"==typeof T?T:"\\u"+("0000"+L.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+Y+'"'}function str(Y,L){var T,p,N,y,x,u=gap,g=L[Y];switch(g instanceof Date&&(g=date(Y)),"function"==typeof rep&&(g=rep.call(L,Y,g)),typeof g){case"string":return quote(g);case"number":return isFinite(g)?String(g):"null";case"boolean":case"null":return String(g);case"object":if(!g)return"null";if(gap+=indent,x=[],"[object Array]"===Object.prototype.toString.apply(g)){for(y=g.length,T=0;T<y;T+=1)x[T]=str(T,g)||"null";return N=0===x.length?"[]":gap?"[\n"+gap+x.join(",\n"+gap)+"\n"+u+"]":"["+x.join(",")+"]",gap=u,N}if(rep&&"object"==typeof rep)for(y=rep.length,T=0;T<y;T+=1)"string"==typeof rep[T]&&(N=str(p=rep[T],g))&&x.push(quote(p)+(gap?": ":":")+N);else for(p in g)Object.prototype.hasOwnProperty.call(g,p)&&(N=str(p,g))&&x.push(quote(p)+(gap?": ":":")+N);return N=0===x.length?"{}":gap?"{\n"+gap+x.join(",\n"+gap)+"\n"+u+"}":"{"+x.join(",")+"}",gap=u,N}}if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={},cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;JSON.stringify=function(Y,L,T){var p;if(gap="",indent="","number"==typeof T)for(p=0;p<T;p+=1)indent+=" ";else"string"==typeof T&&(indent=T);if(rep=L,L&&"function"!=typeof L&&("object"!=typeof L||"number"!=typeof L.length))throw new Error("JSON.stringify");return str("",{"":Y})},JSON.parse=function(text,reviver){function walk(Y,L){var T,p,N=Y[L];if(N&&"object"==typeof N)for(T in N)Object.prototype.hasOwnProperty.call(N,T)&&(void 0!==(p=walk(N,T))?N[T]=p:delete N[T]);return reviver.call(Y,L,N)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(Y){return"\\u"+("0000"+Y.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}(void 0!==io?io:module.exports,"undefined"!=typeof JSON?JSON:void 0),function(Y,L){var T=Y.parser={},p=T.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],N=T.reasons=["transport not supported","client not handshaken","unauthorized"],y=T.advice=["reconnect"],x=L.JSON,u=L.util.indexOf;T.encodePacket=function(C){var P=u(p,C.type),E=C.id||"",v=C.endpoint||"",h=C.ack,_=null;switch(C.type){case"error":var b=C.reason?u(N,C.reason):"",w=C.advice?u(y,C.advice):"";""===b&&""===w||(_=b+(""!==w?"+"+w:""));break;case"message":""!==C.data&&(_=C.data);break;case"event":var I={name:C.name};C.args&&C.args.length&&(I.args=C.args),_=x.stringify(I);break;case"json":_=x.stringify(C.data);break;case"connect":C.qs&&(_=C.qs);break;case"ack":_=C.ackId+(C.args&&C.args.length?"+"+x.stringify(C.args):"")}var D=[P,E+("data"==h?"+":""),v];return null!=_&&D.push(_),D.join(":")},T.encodePayload=function(C){var P="";if(1==C.length)return C[0];for(var E=0,v=C.length;E<v;E++)P+="\ufffd"+C[E].length+"\ufffd"+C[E];return P};var g=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;T.decodePacket=function(C){if(!(P=C.match(g)))return{};var E=P[2]||"",v=(C=P[5]||"",{type:p[P[1]],endpoint:P[4]||""});switch(E&&(v.id=E,v.ack=!P[3]||"data"),v.type){case"error":var P=C.split("+");v.reason=N[P[0]]||"",v.advice=y[P[1]]||"";break;case"message":v.data=C||"";break;case"event":try{var h=x.parse(C);v.name=h.name,v.args=h.args}catch(b){}v.args=v.args||[];break;case"json":try{v.data=x.parse(C)}catch(b){}break;case"connect":v.qs=C||"";break;case"ack":if((P=C.match(/^([0-9]+)(\+)?(.*)/))&&(v.ackId=P[1],v.args=[],P[3]))try{v.args=P[3]?x.parse(P[3]):[]}catch(b){}break;case"disconnect":v.reason=C}return v},T.decodePayload=function(C){if("\ufffd"==C.charAt(0)){for(var P=[],E=1,v="";E<C.length;E++)"\ufffd"==C.charAt(E)?(P.push(T.decodePacket(C.substr(E+1).substr(0,v))),E+=Number(v)+1,v=""):v+=C.charAt(E);return P}return[T.decodePacket(C)]}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),function(Y,L){function T(p,N){this.socket=p,this.sessid=N,this.connectErrorCallback=void 0,this.isOpened=!1}Y.Transport=T,L.util.mixin(T,L.EventEmitter),T.prototype.onData=function(p){if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),""!==p){var N=L.parser.decodePayload(p);if(N&&N.length)for(var y=0,x=N.length;y<x;y++)this.onPacket(N[y])}return this},T.prototype.onPacket=function(p){return this.socket.setHeartbeatTimeout(),"heartbeat"==p.type?this.onHeartbeat():("connect"==p.type&&""==p.endpoint&&this.onConnect(),"error"==p.type&&"reconnect"==p.advice&&(this.isOpened=!1),this.socket.onPacket(p),this)},T.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var p=this;this.closeTimeout=setTimeout(function(){p.onDisconnect()},this.socket.closeTimeout)}},T.prototype.onDisconnect=function(){return this.close&&this.isOpened&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},T.prototype.onConnect=function(){return this.socket.onConnect(),this.connectErrorCallback=void 0,this},T.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},T.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},T.prototype.packet=function(p){this.send(L.parser.encodePacket(p))},T.prototype.onHeartbeat=function(p){this.packet({type:"heartbeat"})},T.prototype.onOpen=function(){this.isOpened=!0,this.clearCloseTimeout(),this.socket.onOpen()},T.prototype.onClose=function(){this.isOpened=!1,this.socket.onClose(),this.onDisconnect()},T.prototype.prepareUrl=function(){var p=this.socket.options;return this.scheme()+"://"+p.host+":"+p.port+"/"+p.resource+"/"+L.protocol+"/"+this.name+"/"+this.sessid},T.prototype.ready=function(p,N){N.call(this)},T.prototype.clearEventHandlers=function(){return this}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),function(Y,L,T){function p(y){if(this.options={port:80,secure:!1,document:"document"in T&&document,resource:"socket.io",transports:L.transports.slice(),"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!0,"auto connect":!0,"flash policy port":10843},L.util.merge(this.options,y),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.disconnected=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||L.util.ua.hasCORS)){var x=this;L.util.on(T,"unload",function(){x.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function N(){}Y.Socket=p,L.util.mixin(p,L.EventEmitter),p.prototype.of=function(y){return this.namespaces[y]||(this.namespaces[y]=new L.SocketNamespace(this,y),""!==y&&this.namespaces[y].packet({type:"connect"})),this.namespaces[y]},p.prototype.publish=function(){var y;for(var x in this.emit.apply(this,arguments),this.namespaces)this.namespaces.hasOwnProperty(x)&&(y=this.of(x)).$emit.apply(y,arguments)},p.prototype.handshake=function(y){function x(h){h instanceof Error?u.onError(h.message):y.apply(null,h.split(":"))}var u=this,g=this.options;if(!u.disconnected){var C=["http"+(g.secure?"s":"")+":/",g.host+":"+g.port,g.resource,L.protocol,L.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!L.util.ua.hasCORS){var P=document.getElementsByTagName("script")[0],E=document.createElement("script");E.src=C+"&jsonp="+L.j.length,P.parentNode.insertBefore(E,P),L.j.push(function(h){x(h),E.parentNode.removeChild(E)})}else{var v=L.util.request();v.open("GET",C,!0),v.withCredentials=!0,v.onreadystatechange=function(){4==v.readyState&&(v.onreadystatechange=N,200==v.status?x(v.responseText):!u.reconnecting&&u.onError(v.responseText))},v.send(null)}}},p.prototype.getTransport=function(y){for(var x,u=y||this.transports,g=0;x=u[g];g++)if(L.Transport[x]&&L.Transport[x].check(this)&&(!this.isXDomain()||L.Transport[x].xdomainCheck()))return new L.Transport[x](this,this.sessionid);return null},p.prototype.connect=function(y){if(this.connecting||this.disconnected)return this;var x=this;return this.handshake(function(u,g,C,P){function E(){if(!x.connected&&!x.disconnected)if(x.connecting=!1,clearTimeout(x.connectTimeoutTimer),x.options["try multiple transports"]){for(;x.remainingTransports.length>0&&x.remainingTransports.splice(0,1)[0]!=x.transport.name;);x.remainingTransports.length?v(x.remainingTransports):x.publish("connect_failed")}else x.publish("connect_failed")}function v(h){if(x.transport&&(x.transport.clearTimeouts(),x.transport.clearEventHandlers()),x.transport=x.getTransport(h),!x.transport||x.disconnected)return x.publish("connect_failed");x.transport.ready(x,function(){x.connecting=!0,x.publish("connecting",x.transport.name),x.transport.open(E),x.options["connect timeout"]&&(x.connectTimeoutTimer=setTimeout(function(){E()},x.options["connect timeout"]))})}x.sessionid=u,x.closeTimeout=1e3*C+2e3,x.heartbeatTimeout=1e3*g+2e3,x.transports=P?L.util.intersect(P.split(","),x.options.transports):x.options.transports,x.setHeartbeatTimeout(),x.remainingTransports=x.transports.slice(0),v(x.transports),x.once("connect",function(){clearTimeout(x.connectTimeoutTimer),y&&"function"==typeof y&&y()})}),this},p.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);var y=this;this.heartbeatTimeoutTimer=setTimeout(function(){y.transport.onClose()},this.heartbeatTimeout)},p.prototype.packet=function(y){return this.connected&&!this.doBuffer?this.transport.packet(y):this.buffer.push(y),this},p.prototype.setBuffer=function(y){this.doBuffer=y,!y&&this.connected&&this.buffer.length&&(this.transport.payload(this.buffer),this.buffer=[])},p.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this.disconnected=!0,this},p.prototype.disconnectSync=function(){L.util.request().open("GET",this.resource+"/"+L.protocol+"/"+this.sessionid,!0),this.onDisconnect("booted")},p.prototype.isXDomain=function(){return this.options.host!==T.location.hostname||this.options.port!=(T.location.port||("https:"==T.location.protocol?443:80))},p.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},p.prototype.onOpen=function(){this.open=!0},p.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},p.prototype.onPacket=function(y){this.of(y.endpoint).onPacket(y)},p.prototype.onError=function(y){y&&y.advice&&"reconnect"===y.advice&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",y&&y.reason?y.reason:y)},p.prototype.onDisconnect=function(y){var x=this.connected,u=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1,(x||u)&&(this.transport.close(),this.transport.clearTimeouts(),x&&(this.publish("disconnect",y),"booted"!=y&&this.options.reconnect&&!this.reconnecting&&this.reconnect()))},p.prototype.reconnect=function(){function y(){if(u.connected){for(var E in u.namespaces)u.namespaces.hasOwnProperty(E)&&""!==E&&u.namespaces[E].packet({type:"connect"});u.publish("reconnect",u.transport.name,u.reconnectionAttempts)}clearTimeout(u.reconnectionTimer),u.removeListener("connect_failed",x),u.removeListener("connect",x),u.reconnecting=!1,delete u.reconnectionAttempts,delete u.reconnectionDelay,delete u.reconnectionTimer,delete u.redoTransports,u.options["try multiple transports"]=C}function x(){if(u.reconnecting)return u.connected?y():u.connecting&&u.reconnecting?u.reconnectionTimer=setTimeout(x,1e3):void(u.reconnectionAttempts++>=g?u.redoTransports?(u.publish("reconnect_failed"),y()):(u.on("connect_failed",x),u.options["try multiple transports"]=!0,u.transport=u.getTransport(),u.redoTransports=!0,u.connect()):(u.reconnectionDelay<P&&(u.reconnectionDelay*=2),u.connect(),u.publish("reconnecting",u.reconnectionDelay,u.reconnectionAttempts),u.reconnectionTimer=setTimeout(x,u.reconnectionDelay)))}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var u=this,g=this.options["max reconnection attempts"],C=this.options["try multiple transports"],P=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(x,this.reconnectionDelay),this.on("connect",x)}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports,void 0===global?window:global),function(Y,L){function T(N,y){this.socket=N,this.name=y||"",this.flags={},this.json=new p(this,"json"),this.ackPackets=0,this.acks={}}function p(N,y){this.namespace=N,this.name=y}Y.SocketNamespace=T,L.util.mixin(T,L.EventEmitter),T.prototype.$emit=L.EventEmitter.prototype.emit,T.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},T.prototype.packet=function(N){return N.endpoint=this.name,this.socket.packet(N),this.flags={},this},T.prototype.send=function(N,y){var x={type:this.flags.json?"json":"message",data:N};return"function"==typeof y&&(x.id=++this.ackPackets,x.ack=!0,this.acks[x.id]=y),this.packet(x)},T.prototype.emit=function(N){var y=Array.prototype.slice.call(arguments,1),x=y[y.length-1],u={type:"event",name:N};return"function"==typeof x&&(u.id=++this.ackPackets,u.ack="data",this.acks[u.id]=x,y=y.slice(0,y.length-1)),u.args=y,this.packet(u)},T.prototype.disconnect=function(){return""===this.name?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},T.prototype.onPacket=function(N){function y(){x.packet({type:"ack",args:L.util.toArray(arguments),ackId:N.id})}var x=this;switch(N.type){case"connect":this.$emit("connect");break;case"disconnect":""===this.name?this.socket.onDisconnect(N.reason||"booted"):this.$emit("disconnect",N.reason||"");break;case"message":case"json":var u=["message",N.data];"data"==N.ack?u.push(y):N.ack&&this.packet({type:"ack",ackId:N.id}),this.$emit.apply(this,u);break;case"event":u=[N.name].concat(N.args),"data"==N.ack&&u.push(y),this.$emit.apply(this,u);break;case"ack":this.acks[N.ackId]&&(this.acks[N.ackId].apply(this,N.args),delete this.acks[N.ackId]);break;case"error":N.advice?this.socket.onError(N):this.$emit("unauthorized"==N.reason?"connect_failed":"error",N.reason)}},p.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},p.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),function(Y,L,T){function p(y){L.Transport.apply(this,arguments)}function N(){}Y.websocket=p,L.util.inherit(p,L.Transport),p.prototype.name="websocket",p.prototype.open=function(y){var x,u=L.util.query(this.socket.options.query),g=this;return this.connectErrorCallback=y,x||(x=T.MozWebSocket||T.WebSocket),this.websocket=new x(this.prepareUrl()+u),this.websocket.onopen=function(){g.onOpen(),g.socket.setBuffer(!1)},this.websocket.onmessage=function(C){g.onData(C.data)},this.websocket.onclose=function(){g.onClose(),g.socket.setBuffer(!0)},this.websocket.onerror=function(C){g.onError(C)},this},p.prototype.send=function(y){return this.websocket.send(y),this},p.prototype.payload=function(y){for(var x=0,u=y.length;x<u;x++)this.packet(y[x]);return this},p.prototype.close=function(){return this.websocket.close(),this},p.prototype.onError=function(y){void 0!==this.connectErrorCallback&&(this.connectErrorCallback(),this.connectErrorCallback=void 0),this.socket.onError(y)},p.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},p.check=function(){return"WebSocket"in T&&!("__addTask"in WebSocket)||"MozWebSocket"in T},p.xdomainCheck=function(){return!0},p.prototype.clearEventHandlers=function(){return this.websocket&&(this.websocket.onopen=this.websocket.onmessage=this.websocket.onclose=this.websocket.onerror=N),this},L.transports.push("websocket")}(void 0!==io?io.Transport:module.exports,void 0!==io?io:module.parent.exports,void 0===global?window:global),function(Y,L,T){function p(y){y&&(L.Transport.apply(this,arguments),this.sendBuffer=[])}function N(){}Y.XHR=p,L.util.inherit(p,L.Transport),p.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},p.prototype.payload=function(y){for(var x=[],u=0,g=y.length;u<g;u++)x.push(L.parser.encodePacket(y[u]));this.send(L.parser.encodePayload(x))},p.prototype.send=function(y){return this.post(y),this},p.prototype.post=function(y){var g=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),T.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=function(){this.onload=N,g.socket.setBuffer(!1)}:this.sendXHR.onreadystatechange=function(){4==this.readyState&&(this.onreadystatechange=N,g.posting=!1,200==this.status?(g.socket.setBuffer(!1),clearTimeout(g.sendXHR.ackTimeoutTimer)):g.onClose())},this.sendXHR.send(y),g.sendXHR.ackTimeoutTimer=setTimeout(function(){g.onClose()},g.socket.options.ackTimeoutMs)},p.prototype.close=function(){return this.onClose(),this},p.prototype.request=function(y){var x=L.util.request(this.socket.isXDomain()),u=L.util.query(this.socket.options.query,"t="+ +new Date);if(x.open(y||"GET",this.prepareUrl()+u,!0),"POST"==y)try{x.setRequestHeader?x.setRequestHeader("Content-type","text/plain;charset=UTF-8"):x.contentType="text/plain"}catch(g){}return x},p.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},p.check=function(y,x){try{var u=L.util.request(x),g=T.XDomainRequest&&u instanceof XDomainRequest;if(u&&(!g||(y&&y.options&&y.options.secure?"https:":"http:")==T.location.protocol))return!0}catch(E){}return!1},p.xdomainCheck=function(){return p.check(null,!0)},p.prototype.clearEventHandlers=function(){return this.sendXHR&&(this.sendXHR.onreadystatechange=this.sendXHR.onload=N),this}}(void 0!==io?io.Transport:module.exports,void 0!==io?io:module.parent.exports,void 0===global?window:global),function(Y,L,T){function p(){L.Transport.XHR.apply(this,arguments)}function N(){}Y["xhr-polling"]=p,L.util.inherit(p,L.Transport.XHR),L.util.merge(p,L.Transport.XHR),p.prototype.name="xhr-polling",p.prototype.open=function(y){return this.connectErrorCallback=y,L.Transport.XHR.prototype.open.call(this),!1},p.prototype.get=function(){if(this.isOpened){var g=this;this.xhr=this.request(),T.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=function(){g.connectErrorCallback=void 0,this.onload=N,this.onerror=N,g.onData(this.responseText),g.get()},this.xhr.onerror=function(){g.onClose(),void 0!==g.connectErrorCallback&&(g.connectErrorCallback(),g.connectErrorCallback=void 0)}):this.xhr.onreadystatechange=function(){4==this.readyState&&(this.onreadystatechange=N,200==this.status?(g.connectErrorCallback=void 0,g.onData(this.responseText),g.get()):(g.onClose(),void 0!==g.connectErrorCallback&&(g.connectErrorCallback(),g.connectErrorCallback=void 0)))},this.xhr.send(null)}},p.prototype.onClose=function(){if(L.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=N;try{this.xhr.abort()}catch(y){}this.xhr=null}},p.prototype.ready=function(y,x){var u=this;L.util.defer(function(){x.call(u)})},p.prototype.clearEventHandlers=function(){return L.Transport.XHR.prototype.clearEventHandlers.call(this),this.xhr&&(this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=N),this},L.transports.push("xhr-polling")}(void 0!==io?io.Transport:module.exports,void 0!==io?io:module.parent.exports,void 0===global?window:global),exports.io=io}).call(exports,__nested_webpack_require_43418__(4),__nested_webpack_require_43418__(13)(module))},function(Y,L,T){(function(p,N){Y.exports=function(){function x(Me){return"function"==typeof Me}function P(){var Me=setTimeout;return function(){return Me(E,1)}}function E(){for(var Me=0;Me<he;Me+=2)(0,ie[Me])(ie[Me+1]),ie[Me]=void 0,ie[Me+1]=void 0;he=0}function v(Me,Ye){var De=arguments,Fe=this,ct=new this.constructor(_);void 0===ct[Z]&&a(ct);var Ke,Ve=Fe._state;return Ve?(Ke=De[Ve-1],de(function(){return r(Ve,ct,Ke,Fe._result)})):X(Fe,ct,Me,Ye),ct}function h(Me){if(Me&&"object"==typeof Me&&Me.constructor===this)return Me;var De=new this(_);return B(De,Me),De}function _(){}function I(Me){try{return Me.then}catch(Ye){return Te.error=Ye,Te}}function V(Me,Ye,De){Ye.constructor===Me.constructor&&De===v&&Ye.constructor.resolve===h?function(Me,Ye){Ye._state===Oe?j(Me,Ye._result):Ye._state===we?W(Me,Ye._result):X(Ye,void 0,function(De){return B(Me,De)},function(De){return W(Me,De)})}(Me,Ye):De===Te?W(Me,Te.error):void 0===De?j(Me,Ye):x(De)?function(Me,Ye,De){de(function(Fe){var ct=!1,Ve=function(Me,Ye,De,Fe){try{Me.call(Ye,De,Fe)}catch(ct){return ct}}(De,Ye,function(Ke){ct||(ct=!0,Ye!==Ke?B(Fe,Ke):j(Fe,Ke))},function(Ke){ct||(ct=!0,W(Fe,Ke))});!ct&&Ve&&(ct=!0,W(Fe,Ve))},Me)}(Me,Ye,De):j(Me,Ye)}function B(Me,Ye){Me===Ye?W(Me,new TypeError("You cannot resolve a promise with itself")):function(Me){return"function"==typeof Me||"object"==typeof Me&&null!==Me}(Ye)?V(Me,Ye,I(Ye)):j(Me,Ye)}function U(Me){Me._onerror&&Me._onerror(Me._result),K(Me)}function j(Me,Ye){Me._state===le&&(Me._result=Ye,Me._state=Oe,0!==Me._subscribers.length&&de(K,Me))}function W(Me,Ye){Me._state===le&&(Me._state=we,Me._result=Ye,de(U,Me))}function X(Me,Ye,De,Fe){var ct=Me._subscribers,Ve=ct.length;Me._onerror=null,ct[Ve]=Ye,ct[Ve+Oe]=De,ct[Ve+we]=Fe,0===Ve&&Me._state&&de(K,Me)}function K(Me){var Ye=Me._subscribers,De=Me._state;if(0!==Ye.length){for(var Fe=void 0,ct=void 0,Ve=Me._result,Ke=0;Ke<Ye.length;Ke+=3)ct=Ye[Ke+De],(Fe=Ye[Ke])?r(De,Fe,ct,Ve):ct(Ve);Me._subscribers.length=0}}function ge(){this.error=null}function r(Me,Ye,De,Fe){var ct=x(De),Ve=void 0,Ke=void 0,Zt=void 0,nt=void 0;if(ct){if((Ve=function(Me,Ye){try{return Me(Ye)}catch(De){return yt.error=De,yt}}(De,Fe))===yt?(nt=!0,Ke=Ve.error,Ve=null):Zt=!0,Ye===Ve)return void W(Ye,new TypeError("A promises callback cannot return that same promise."))}else Ve=Fe,Zt=!0;Ye._state!==le||(ct&&Zt?B(Ye,Ve):nt?W(Ye,Ke):Me===Oe?j(Ye,Ve):Me===we&&W(Ye,Ve))}function a(Me){Me[Z]=Ne++,Me._state=void 0,Me._result=void 0,Me._subscribers=[]}function f(Me,Ye){this._instanceConstructor=Me,this.promise=new Me(_),this.promise[Z]||a(this.promise),se(Ye)?(this._input=Ye,this.length=Ye.length,this._remaining=Ye.length,this._result=new Array(this.length),0===this.length?j(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&j(this.promise,this._result))):W(this.promise,new Error("Array Methods must be provided an Array"))}function z(Me){this[Z]=Ne++,this._result=this._state=void 0,this._subscribers=[],_!==Me&&("function"!=typeof Me&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof z?function(Me,Ye){try{Ye(function(De){B(Me,De)},function(De){W(Me,De)})}catch(De){W(Me,De)}}(this,Me):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}var Me,Ye,De,se=Array.isArray?Array.isArray:function(Me){return"[object Array]"===Object.prototype.toString.call(Me)},he=0,ve=void 0,ae=void 0,de=function(Me,Ye){ie[he]=Me,ie[he+1]=Ye,2===(he+=2)&&(ae?ae(E):ee())},Re="undefined"!=typeof window?window:void 0,Ee=Re||{},ue=Ee.MutationObserver||Ee.WebKitMutationObserver,ye="undefined"==typeof self&&void 0!==p&&"[object process]"==={}.toString.call(p),Se="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ie=new Array(1e3),ee=void 0;ee=ye?function(){return p.nextTick(E)}:ue?(Me=0,Ye=new ue(E),De=document.createTextNode(""),Ye.observe(De,{characterData:!0}),function(){De.data=Me=++Me%2}):Se?function(){var Me=new MessageChannel;return Me.port1.onmessage=E,function(){return Me.port2.postMessage(0)}}():void 0===Re?function(){try{var Me=T(21);return void 0!==(ve=Me.runOnLoop||Me.runOnContext)?function(){ve(E)}:P()}catch(Ye){return P()}}():P();var Z=Math.random().toString(36).substring(16),le=void 0,Oe=1,we=2,Te=new ge,yt=new ge,Ne=0;return f.prototype._enumerate=function(){for(var Me=this.length,Ye=this._input,De=0;this._state===le&&De<Me;De++)this._eachEntry(Ye[De],De)},f.prototype._eachEntry=function(Me,Ye){var De=this._instanceConstructor,Fe=De.resolve;if(Fe===h){var ct=I(Me);if(ct===v&&Me._state!==le)this._settledAt(Me._state,Ye,Me._result);else if("function"!=typeof ct)this._remaining--,this._result[Ye]=Me;else if(De===z){var Ve=new De(_);V(Ve,Me,ct),this._willSettleAt(Ve,Ye)}else this._willSettleAt(new De(function(Ke){return Ke(Me)}),Ye)}else this._willSettleAt(Fe(Me),Ye)},f.prototype._settledAt=function(Me,Ye,De){var Fe=this.promise;Fe._state===le&&(this._remaining--,Me===we?W(Fe,De):this._result[Ye]=De),0===this._remaining&&j(Fe,this._result)},f.prototype._willSettleAt=function(Me,Ye){var De=this;X(Me,void 0,function(Fe){return De._settledAt(Oe,Ye,Fe)},function(Fe){return De._settledAt(we,Ye,Fe)})},z.all=function(Me){return new f(this,Me).promise},z.race=function(Me){var Ye=this;return new Ye(se(Me)?function(De,Fe){for(var ct=Me.length,Ve=0;Ve<ct;Ve++)Ye.resolve(Me[Ve]).then(De,Fe)}:function(De,Fe){return Fe(new TypeError("You must pass an array to race."))})},z.resolve=h,z.reject=function(Me){var De=new this(_);return W(De,Me),De},z._setScheduler=function(Me){ae=Me},z._setAsap=function(Me){de=Me},z._asap=de,z.prototype={constructor:z,then:v,catch:function(Me){return this.then(null,Me)}},z.polyfill=function(){var Me=void 0;if(void 0!==N)Me=N;else if("undefined"!=typeof self)Me=self;else try{Me=Function("return this")()}catch(Fe){throw new Error("polyfill failed because global object is unavailable in this environment")}var Ye=Me.Promise;if(Ye){var De=null;try{De=Object.prototype.toString.call(Ye.resolve())}catch(Fe){}if("[object Promise]"===De&&!Ye.cast)return}Me.Promise=z},z.Promise=z,z}()}).call(L,T(12),T(4))},function(Y,L){function T(){throw new Error("setTimeout has not been defined")}function p(){throw new Error("clearTimeout has not been defined")}function N(I){if(P===setTimeout)return setTimeout(I,0);if((P===T||!P)&&setTimeout)return P=setTimeout,setTimeout(I,0);try{return P(I,0)}catch(D){try{return P.call(null,I,0)}catch(k){return P.call(this,I,0)}}}function x(){b&&h&&(b=!1,h.length?_=h.concat(_):w=-1,_.length&&u())}function u(){if(!b){var I=N(x);b=!0;for(var D=_.length;D;){for(h=_,_=[];++w<D;)h&&h[w].run();w=-1,D=_.length}h=null,b=!1,function(I){if(E===clearTimeout)return clearTimeout(I);if((E===p||!E)&&clearTimeout)return E=clearTimeout,clearTimeout(I);try{E(I)}catch(D){try{return E.call(null,I)}catch(k){return E.call(this,I)}}}(I)}}function g(I,D){this.fun=I,this.array=D}function C(){}var P,E,v=Y.exports={};!function(){try{P="function"==typeof setTimeout?setTimeout:T}catch(I){P=T}try{E="function"==typeof clearTimeout?clearTimeout:p}catch(I){E=p}}();var h,_=[],b=!1,w=-1;v.nextTick=function(I){var D=new Array(arguments.length-1);if(arguments.length>1)for(var k=1;k<arguments.length;k++)D[k-1]=arguments[k];_.push(new g(I,D)),1!==_.length||b||N(u)},g.prototype.run=function(){this.fun.apply(null,this.array)},v.title="browser",v.browser=!0,v.env={},v.argv=[],v.version="",v.versions={},v.on=C,v.addListener=C,v.once=C,v.off=C,v.removeListener=C,v.removeAllListeners=C,v.emit=C,v.prependListener=C,v.prependOnceListener=C,v.listeners=function(I){return[]},v.binding=function(I){throw new Error("process.binding is not supported")},v.cwd=function(){return"/"},v.chdir=function(I){throw new Error("process.chdir is not supported")},v.umask=function(){return 0}},function(Y,L){Y.exports=function(T){return T.webpackPolyfill||(T.deprecate=function(){},T.paths=[],T.children||(T.children=[]),Object.defineProperty(T,"loaded",{enumerable:!0,get:function(){return T.l}}),Object.defineProperty(T,"id",{enumerable:!0,get:function(){return T.i}}),T.webpackPolyfill=1),T}},function(Y,L,T){Object.defineProperty(L,"__esModule",{value:!0});var u,h,p=T(3),N=T(1),y=T(0);L.ResponseData=function(_){this.id=_,this.status=200,this.headers={},this.body=""},(h=u=L.ClientEventName||(L.ClientEventName={})).Connected="trouter_js_client_connected",h.Disconnected="trouter_js_client_disconnected",h.Error="trouter_js_client_error",h.Progress="trouter_js_client_progress",h.Response="trouter_js_client_response",h.Request="trouter_js_client_request",h.CheckConnection="trouter_js_client_check_connection",h.Registration="trouter_js_client_registration",h.Unregistration="trouter_js_client_unregistration";var g=function(_,b,w,I,D){this.stepName=_,this.operation=b,this.delta=w,this.ts=I,this.error=D};L.TrackerStep=g,L.Properties=function(){};var P=function(){this.numberOfPingReplies=0,this.connectedTimestamp=0,this.isNewUrl=!1,this.transportType="",this.connectionNumber=0},E=function(){this.enabled=!1,this.numberOfStepsToMaintain=40,this.logHealthCheckError=!1,this.sendProgressTimeoutSecs=55,this.logSendPingError=!1,this.maxBackoffInMs=12e4,this.trouter_js_client_connected=!1,this.trouter_js_client_disconnected=!1,this.trouter_js_client_error=!1,this.trouter_js_client_progress=!1,this.trouter_js_client_response=!1,this.trouter_js_client_request=!1,this.trouter_js_client_registration=!1,this.trouter_js_client_unregistration=!1,this.trouter_js_client_check_connection=!0},v=function(){function h(_,b,w,I,D,k,O){this.clientId=b,this.clientInfo=w,this.getServerState=I,this.endpointId=D,this.clientCorrelationID=k,this.environment=O,this.logger=new y.Logger("ConnectionTracker",_),this.clientCorrelationID=void 0!==k?k:"",this.steps=[],this.connectionAttempt=0,this.totalStepCount=0,this.beginTimestamp=new p.Timespan,this.eventLogSettings=new E,this.connectedInfo=new P}return h.prototype.enable=function(_){this.eventLogSettings.enabled=!0,this.eventLogger=_},h.prototype.disable=function(){this.eventLogSettings.enabled=!1},h.prototype.sendProgress=function(_){this.steps.length>0&&this.sendTelemetry(u.Progress,_,this.steps)},h.prototype.cancelProgressTimer=function(){void 0!==this.progressTimeout&&(clearTimeout(this.progressTimeout),this.progressTimeout=void 0)},h.prototype.resetProgressSendTimer=function(){var _=this;this.cancelProgressTimer(),void 0!==this.eventLogSettings.sendProgressTimeoutSecs&&this.eventLogSettings.sendProgressTimeoutSecs>0&&(this.progressTimeout=setTimeout(function(){_.sendProgress({reason:"timeout",timeoutSecs:_.eventLogSettings.sendProgressTimeoutSecs})},1e3*this.eventLogSettings.sendProgressTimeoutSecs))},h.prototype.setConnectedInfo=function(_,b){this.connectedInfo.numberOfPingReplies=0,this.connectedInfo.connectedTimestamp=Date.now(),this.connectedInfo.isNewUrl=_,this.connectedInfo.transportType=b,++this.connectedInfo.connectionNumber},h.prototype.clearConnectedInfo=function(){this.connectedInfo.numberOfPingReplies=0,this.connectedInfo.connectedTimestamp=0,this.connectedInfo.isNewUrl=!0,this.connectedInfo.transportType=""},h.prototype.copyProperties=function(_,b){for(var w=0,I=Object.keys(b);w<I.length;w++){var D=I[w];b.hasOwnProperty(D)&&void 0!==b[D]&&(_[D.replace(/-/g,"_")]={value:b[D]})}},h.prototype.increasePingResponseCount=function(){++this.connectedInfo.numberOfPingReplies},h.prototype.sendTelemetry=function(_,b,w){try{if(!0===this.eventLogSettings.enabled&&!0===this.eventLogSettings[_]&&void 0!==this.eventLogger){var I=this.getServerState(),D={name:_,properties:{connectionAttempt:{value:this.connectionAttempt},epid:{value:this.endpointId},clientCorrelationID:{value:this.clientCorrelationID},steps:{value:p.toJson(w)},clientID:{value:this.clientId},eventVersion:{value:3},environment:{value:this.environment},cv:{value:N.CLIENT_VERSION},ua:{value:this.clientInfo.ua},connectionId:{value:I.connectionId},connectedClientId:{value:I.connectedClientId},domId:{value:I.domId},url:{value:I.unsecureUrl},surl:{value:I.url},ttlInSecs:{value:I.getRemainingTtlInSec()},numberOfPingReplies:{value:this.connectedInfo.numberOfPingReplies},connectedTimestamp:{value:this.connectedInfo.connectedTimestamp},isNewUrl:{value:this.connectedInfo.isNewUrl},transportType:{value:this.connectedInfo.transportType},connectionNumber:{value:this.connectedInfo.connectionNumber}}};this.copyProperties(D.properties,b),this.eventLogger.logEvent(D)}}catch(k){this.logger.warn("error in sending event "+_+": "+p.toJson(k))}},h.prototype.createStep=function(_,b,w){return new g(_,b,this.beginTimestamp.duration,Date.now(),w)},h.prototype.addStep=function(_,b,w){if(!1!==this.eventLogSettings.enabled&&(0===this.steps.length&&this.beginTimestamp.reset(),this.steps.push(this.createStep(_,b,w)),++this.totalStepCount,void 0!==this.eventLogSettings.numberOfStepsToMaintain&&this.steps.length>this.eventLogSettings.numberOfStepsToMaintain)){var I=this.steps.slice(0);this.steps.length=0,this.sendTelemetry(u.Progress,{reason:"flush"},I)}},h.prototype.trackStart=function(_){this.addStep(_,"start")},h.prototype.trackEnd=function(_){this.addStep(_,"end")},h.prototype.trackError=function(_,b,w,I){void 0===w&&(w=!0),"health"===_&&!0!==this.eventLogSettings.logHealthCheckError||"ping"===_&&!1===this.eventLogSettings.logSendPingError||(void 0===I&&(I="error"),!0===w&&this.addStep(_,I,b),this.sendTelemetry(u.Error,{},[this.createStep(_,I,b)]))},h.prototype.trackProgress=function(_,b){this.addStep(_,b)},h.prototype.trackConnected=function(_,b){this.setConnectedInfo(_,b);var w=this.steps.slice(0),I=this.totalStepCount,D=this.beginTimestamp.duration;this.steps.length=0,this.totalStepCount=0,this.sendTelemetry(u.Connected,{stepCount:w.length,totalStepCount:I,connectionEstablishmentMs_Total:D},w),this.cancelProgressTimer()},h.prototype.trackDisconnected=function(_){_.sessionLengthMS=Date.now()-this.connectedInfo.connectedTimestamp,this.sendTelemetry(u.Disconnected,_,[]),this.resetProgressSendTimer()},h.prototype.trackNewConnection=function(){++this.connectionAttempt},h.prototype.trackRequest=function(_,b){var w={};void 0!==b&&(w.hasError=!0,w.error=b);try{if(_){w.requestID=_.id,w.httpMethod=_.method,w.url=_.url,w.bodyLength=_.body.length,w.shortUrl=_.shortUrl,w.requestTimeStamp=_.startTS,w.correlationVector=_.correlationVector;for(var I=_.headers,D=0,k=Object.keys(I);D<k.length;D++){var O=k[D];I.hasOwnProperty(O)&&(w[O]=I[O])}}}catch(V){w.hasError=!0,w.error=w.error+" error creating request context "+p.toJson(V)}this.sendTelemetry(u.Request,w,[])},h.prototype.trackResponse=function(_,b,w,I){var D={};void 0!==I&&(D.hasError=!0,D.error=I);try{if(D.responseTimestamp=void 0!==w?w.sentTS:Date.now(),_){D.requestID=_.id,D.httpMethod=_.method,D.shortUrl=_.shortUrl,D.correlationVector=_.correlationVector;for(var k=_.headers,O=0,V=Object.keys(k);O<V.length;O++){var B=V[O];k.hasOwnProperty(B)&&(D[B]=k[B])}}w&&(D.latencyMS=b,D.responseCode=w.status,D.responseLength=w.body.length)}catch(U){D.hasError=!0,D.error=D.error+" error creating response context "+p.toJson(U)}this.sendTelemetry(u.Response,D,[])},h.prototype.sendResponseError=function(_,b,w){this.trackResponse(b,void 0,w,_)},h.prototype.close=function(){this.sendProgress({reason:"closed"}),this.steps.length=0,this.cancelProgressTimer()},h.prototype.mergeSettings=function(_){if(_){this.eventLogSettings.numberOfStepsToMaintain=Math.min(40,Math.max(10,void 0!==_.numberOfStepsToMaintain?_.numberOfStepsToMaintain:0));var b=Math.min(3600,Math.max(55,void 0!==_.sendProgressTimeoutSecs?_.sendProgressTimeoutSecs:0));this.eventLogSettings.logHealthCheckError=_.logHealthCheckError,this.eventLogSettings.logSendPingError=_.logSendPingError;for(var w=0,I=Object.keys(u).map(function(k){return u[k]});w<I.length;w++){var D=I[w];_.hasOwnProperty(D)&&void 0!==_[D]&&(this.eventLogSettings[D]=_[D])}this.eventLogSettings.sendProgressTimeoutSecs!==b&&(this.eventLogSettings.sendProgressTimeoutSecs=b,this.resetProgressSendTimer())}},h}();L.ConnectionTracker=v},function(Y,L,T){Object.defineProperty(L,"__esModule",{value:!0});var p=function(){function N(y,x){this.logger=y,this.maxBackoffInMs=x,this.backoffId=0,this.backoffCount=0}return N.calculateNextBackoffMs=function(y,x){var u=1+.4*(Math.random()-.5),g=1e3*Math.pow(2,y)*u;return g=Math.round(g),Math.min(x,g)},N.prototype.setMaxBackoffMs=function(y){this.maxBackoffInMs=y},N.prototype.backoff=function(y,x){var u=this;void 0!==this.timerHandle&&(this.logger.debug("Clearing current back off"),clearTimeout(this.timerHandle),this.timerHandle=void 0);var g=N.calculateNextBackoffMs(this.backoffCount,this.maxBackoffInMs);this.backoffId++,this.backoffCount++,this.logger.info("Backing off "+y+" for "+g+" milliseconds with ID "+this.backoffId),this.timerHandle=setTimeout(function(){u.logger.info("Back off for "+y+" with ID "+u.backoffId+" complete, invoking handler"),u.timerHandle=void 0,x()},g)},N.prototype.reset=function(){void 0!==this.timerHandle&&(this.logger.debug("Resetting back off"),clearTimeout(this.timerHandle),this.timerHandle=void 0),this.backoffCount=0},N}();L.ExponentialBackoff=p},function(Y,L,T){var p=this&&this.__assign||Object.assign||function(B){for(var U,j=1,W=arguments.length;j<W;j++)for(var X in U=arguments[j])Object.prototype.hasOwnProperty.call(U,X)&&(B[X]=U[X]);return B};Object.defineProperty(L,"__esModule",{value:!0});var N=T(20),y=T(11),x=T(3),u=T(14),g=T(1),C=T(15),P=T(2),E=T(5),v=T(0),h=T(17),_=T(10),b=function(){this.cv=g.CLIENT_VERSION,this.ua="",this.hr="",this.v=""},w=function(){this["force new connection"]=!0,this.reconnect=!1,this.query="",this.ackTimeoutMs=5e3},I="MS-CV",D=function(){function B(U){this.cvCounter=0;var j=JSON.parse(U);this.startTS=j.hasOwnProperty("startTS")?j.startTS:0,this.url=j.hasOwnProperty("url")?j.url:"",this.shortUrl=j.hasOwnProperty("shortUrl")?j.shortUrl:"",this.body=j.hasOwnProperty("body")?j.body:"",this.headers=j.hasOwnProperty("headers")?j.headers:{},this.id=j.hasOwnProperty("id")&&"number"==typeof j.id?j.id:-1,this.method=j.hasOwnProperty("method")?j.method:"",this.replied=!1,this.timedout=!1,this.timeoutTimerId=0,this.receivedCv=this.headers[I],this.updateCvHeader()}return Object.defineProperty(B.prototype,"correlationVector",{get:function(){return this.receivedCv?this.receivedCv+"."+this.cvCounter:""},enumerable:!0,configurable:!0}),B.prototype.on=function(U,j){"data"===U?this.dataCallback=j:"end"===U&&("function"==typeof this.dataCallback&&this.dataCallback(this.body),j())},B.prototype.incrementCorrelationVector=function(){++this.cvCounter,this.updateCvHeader()},B.prototype.updateCvHeader=function(){var U=this.correlationVector;U&&(this.headers[I]=U)},B}(),k=function(){function B(U,j,W){this.request=U,this.responseData=j,this.sendResponse=W}return B.prototype.writeHead=function(U,j){this.responseData.status=U,this.responseData.headers=j},B.prototype.write=function(U){this.responseData.body+=U},B.prototype.end=function(U){return U&&(this.responseData.body+=U),this.sendResponse(this.request,this.responseData)},B}(),O=function(U){this.name=U,this.args={},this.timeoutTimerId=0},V=function(){function B(U,j,W,X,K){var ge=this;this.options=j,this.manager=W,this.tokenProvider=X,this.connectionId="",this.inIncallMode=!1,this.connectionAttempt=0,this.connectedClientId="",this.c2cUrlBase="",this.pendingTimers={},this.lastDisconnectReason="",this.UNKNOWN_TRANSPORT="unknown_transport",this.logger=new v.Logger("Connection",U),this.timeoutOptions=this.options.timeoutOptions,this.healthBackoff=new C.ExponentialBackoff(this.logger,this.timeoutOptions.maxBackoffMs),this.tokenBackoff=new C.ExponentialBackoff(this.logger,this.timeoutOptions.maxBackoffMs),this.clientID=Date.now(),"undefined"!=typeof window&&window.location&&(this.domId=window.location.hostname),this.clientInfo=new b,this.clientInfo.cv=g.CLIENT_VERSION,this.clientInfo.ua="",this.options&&this.options.clientInfo&&(this.clientInfo.ua=this.safeString(this.options.clientInfo.ua),this.clientInfo.v=this.safeString(this.options.clientInfo.v)),this.connectionTracker=new u.ConnectionTracker(U,this.clientID,this.clientInfo,function(){return ge.getServerState()},this.options.endpointId,this.options.clientCorrelationID,this.options.environment),this.applyConnectionTrackerOptions(j),this.fsm=new h.TrouterFsm(U,this,this.options.incallModeTimeoutMs>0),j.registration&&(this.registrarClient=N.createRegistrarClient(U,this.tokenProvider,{registrarUrl:j.registration.registrarUrl,registrationId:j.registration.registrationId,requestTimeoutMs:j.timeoutOptions.fetchTimeoutMs,initialRetryDelayMs:1e3,maxRetryDelayMs:j.timeoutOptions.maxBackoffMs})),this.userActivityState=K}return B.prototype.start=function(U){this.logger.info("Starting"),this.externalConnectParams=U,this.fsm.start()},B.prototype.stop=function(U){this.logger.info("Stopping"),this.connectionTracker.close(),this.fsm.stop(U)},B.prototype.configure=function(U){var j=this.options.trouterUrl!==U.trouterUrl;this.options=U,this.applyConnectionTrackerOptions(U),j&&this.onTrouterReconnect()},B.prototype.checkConnection=function(U){this.logger.info("checkConnection called with "+U),this.fsm.checkConnection(U),U&&this.connectionTracker.sendTelemetry(u.ClientEventName.CheckConnection,{disconnectDetected:U},[])},B.prototype.getServerState=function(){return new E.ServerState(this.connectionId,this.connectedClientId,this.domId?this.domId:"",this.allocateResult?this.allocateResult.url:"",this.allocateResult?this.allocateResult.surl:"",this.c2cUrlBase,this.connectionExpireTimestampInSecs)},B.prototype.getToken=function(U,j){var W=this;this.logger.info("Getting token "+(j?"with backoff":"without backoff"));var X=function(){W.connectionTracker.trackStart("token"),W.tokenProvider(!U).then(function(K){W.logger.debug("token is received"),W.connectionTracker.trackEnd("token"),W.fsm.onTokenReceived(K)}).catch(function(K){var ge=x.toJson(K.stack);W.logger.error("Getting token failed, will retry after timeout. Error: "+ge),W.connectionTracker.trackError("token",ge),W.getToken(U,!0)})};j?this.tokenBackoff.backoff("getting token",X):(this.tokenBackoff.reset(),X())},B.prototype.startConnectionTimer=function(){var U=this;this.stopConnectionTimer(),this.logger.debug("Starting connection timeout for "+this.timeoutOptions.connectionTimeoutMs+" ms"),this.connectionTimeoutId=setTimeout(function(){U.logger.info("Connection timeout is fired"),U.fsm.onConnectingTimeout()},this.timeoutOptions.connectionTimeoutMs)},B.prototype.stopConnectionTimer=function(){this.connectionTimeoutId&&(this.logger.debug("Stopping connection timeout"),clearTimeout(this.connectionTimeoutId),this.connectionTimeoutId=void 0)},B.prototype.startPingTimer=function(){var U=this;"websocket"===this.transportTypeName?(this.logger.debug("Starting ping timeout for "+this.timeoutOptions.pingTimeoutMs+" ms"),this.pingTimerId=setInterval(function(){U.logger.info("Ping interval fired"),U.fsm.onPingInterval()},this.timeoutOptions.pingTimeoutMs)):this.logger.debug("Not starting ping for transport "+this.transportTypeName)},B.prototype.stopPingTimer=function(){this.pingTimerId&&(this.logger.debug("Stopping ping timeout"),this.clearPingResponseTimer(),clearInterval(this.pingTimerId),this.pingTimerId=void 0)},B.prototype.shouldSkipRegistration=function(){return void 0===this.options.registration},B.prototype.hasCustomRegisterTtl=function(){return this.options.registration&&this.options.registration.registrarTtlSec},B.prototype.startRegisterTimer=function(){var U=this;void 0!==this.registrationTimerId&&this.stopRegisterTimer();var j=this.getRegistrationTtl()-30;this.logger.debug("Starting registration timeout for "+j+" sec"),this.registrationTimerId=setTimeout(function(){U.logger.info("Registration timeout is fired"),U.registrationTimerId=setTimeout(function(){U.registrationTimerId=void 0,U.logger.debug("Re-registration did not happen in time"),U.dispatchUnregistered()},3e4),U.fsm.onRegistrationTimeout()},1e3*j)},B.prototype.stopRegisterTimer=function(){this.registrationTimerId&&(this.logger.debug("Stopping registration timeout"),clearTimeout(this.registrationTimerId),this.registrationTimerId=void 0)},B.prototype.resendRegistration=function(){if(!this.registrarClient)throw new Error("Trouter Client not configured to handle registrations");return this.registrarClient.resendRegistration()},B.prototype.buildSocketIoUrlParams=function(){if(!this.allocateResult)throw new Error("Allocate result is undefined in buildSocketIoUrlParams()");var U={};if(this.allocateResult.connectparams)for(var j=this.allocateResult.connectparams,W=0,X=Object.keys(j);W<X.length;W++){var K=X[W];j.hasOwnProperty(K)&&void 0!==j[K]&&(U[K]=j[K])}return U.v="v4",U.tc=encodeURI(x.toJson(this.clientInfo)),U.timeout=this.timeoutOptions.pingTimeoutMs/1e3,U.auth="true",this.options.endpointId&&(U.epid=this.options.endpointId),this.userActivityState.state!==P.UserActivityState.Unknown&&(U.userActivity=encodeURI(x.toJson(this.userActivityState.toEventObject()))),this.appendConnectedClientIds(this.buildQuery(U),!0)},B.prototype.startSocketIo=function(){var U=this;if(this.logger.info("Starting socket io"),this.connectionTracker.trackStart("connectSocket"),!this.allocateResult)throw new Error("Allocate result is undefined in startSocketIo()");var j=this.options.ioOptions||new w;if(j["force new connection"]=!0,j.reconnect=!1,j.query=this.buildSocketIoUrlParams(),this.logger.info("connecting to "+this.allocateResult.socketio+"?"+j.query),this.stopSocketIo(),this.socket=(this.options.io||_).connect(this.allocateResult.socketio,j),void 0===this.socket)throw new Error("Can't create Socket.io object");this.socket.on("connecting",function(W){U.onSocketConnecting(W)}),this.socket.on("connect",function(){U.onSocketConnect()}),this.socket.on("connect_failed",function(W){U.onSocketConnectFailed(W)}),this.socket.on("disconnect",function(W){U.onSocketDisconnect(W)}),this.socket.on("reconnect",function(){U.onSocketReconnect()}),this.socket.on("reconnect_failed",function(W){U.onSocketReconnectFailed(W)}),this.socket.on("reconnecting",function(){U.onSocketReconnecting()}),this.socket.on("error",function(W){U.onSocketError(W)}),this.socket.on("message",function(W){U.onSocketMessage(W)}),this.socket.on("trouter.connected",function(W){U.onTrouterConnected(W)}),this.socket.on("trouter.reconnect",function(){U.onTrouterReconnect()}),this.socket.on("trouter.message_loss",function(W){U.onTrouterMessageLoss(W)})},B.prototype.stopSocketIo=function(){if(this.socket){this.logger.info("clearing socket.io");try{for(var U=0,j=["connecting","connect","connect_failed","disconnect","reconnect","reconnect_failed","reconnecting","error","message","trouter.connected","trouter.reconnect","trouter.message_loss"];U<j.length;U++)this.socket.removeAllListeners(j[U]);this.socket.disconnect(),this.logger.debug("cleared socket"),this.socket=void 0}catch(X){this.logger.error("exception in disconnecting previous socket. Error: "+x.toJson(X.stack))}}},B.prototype.dispatchConnected=function(){this.logger.info("dispatching connected"),this.manager.onConnected(this)},B.prototype.dispatchRegistered=function(){this.logger.info("dispatching registered"),this.manager.onRegistered(this)},B.prototype.dispatchUnregistered=function(){this.logger.info("dispatching unregistered"),this.manager.onUnregistered(this)},B.prototype.dispatchDownstreamRequest=function(U){var j=this;this.logger.info("dispatching downstream request");try{var W=new k(U,new u.ResponseData(U.id),function(X,K){return j.logger.info("sending response to downstream"),j.sendResponse(X,K)});this.manager.onDownstreamRequest(this,U,W)}catch(X){this.logger.error("exception in socket.on message. Error : "+x.toJson(X.stack))}},B.prototype.dispatchReconnecting=function(){this.logger.info("dispatching reconnecting"),this.manager.onReconnecting(this)},B.prototype.dispatchReconnectIsRequired=function(){this.logger.info("dispatching reconnect is required by server"),this.manager.onReconnectIsRequired(this)},B.prototype.dispatchDisconnected=function(){this.logger.info("dispatching disconnected"),this.manager.onDisconnected(this)},B.prototype.dispatchTrouterMessageLost=function(U){this.logger.info("dispatching trouter lost message"),this.manager.onTrouterMessageLost(U)},B.prototype.sendProcessedDroppedIndicators=function(U){var j=this;try{this.logger.info("emitting processed flow tags to the server");var W=new O("trouter.processed_message_loss");W.args={droppedIndicators:U},this.sendDownstreamEvent(W,function(){j.logger.info("emitted processed flow tags to the server")})}catch(K){var X=x.toJson(K.stack);this.logger.error("unable to send processed message loss event. Error: "+X),this.connectionTracker.trackError("trouter.processed_message_loss",X,!1)}},B.prototype.resetAllocationConnectionParams=function(){this.allocateResult&&(this.logger.info("Resetting allocation connection parameters"),this.allocateResult.connectparams=void 0)},B.prototype.sendAllocateRequest=function(U){var j=this;this.connectionAttempt++,this.connectionTracker.trackNewConnection();var W=this.options.trouterUrl,X=W,K=this.allocateResult&&this.allocateResult.connectparams;if(!K){var ge=this.externalConnectParams;ge&&ge.se&&parseInt(ge.se,10)<=Date.now()+36e5&&(this.logger.warn("Dropping expired cached connection parameters: "+new Date(parseInt(ge.se,10))),this.externalConnectParams=ge=void 0),ge&&ge.serviceUrl!==X&&(this.logger.warn("Dropping cached connection parameters for a different environment ("+ge.serviceUrl+", now "+X+")"),this.externalConnectParams=ge=void 0),ge&&ge.reconnectUrl?(X=ge.reconnectUrl,K=p({},ge,{reconnectUrl:void 0})):K=ge}X=this.appendCorrelationIds(X,!1),X=this.appendEndpointId(X,!1),K&&(X+="&"+this.buildQuery(K),K.v||(X+="&v=v4"));var R=new Request(X,{method:"POST",mode:"cors",headers:new Headers({"X-Skypetoken":U,"Content-Type":"text/plain"})});this.logger.info("sendAllocateRequest: POST "+X),this.connectionTracker.trackStart("allocation");var r=-1;this.fetchWithTimeout(R,this.timeoutOptions.fetchTimeoutMs).then(function(s){if(r=s.status,!s.ok)throw new Error(s.statusText);var l=s.headers.get("content-type");if(!l||"application/json"!==l&&"application/json;"!==l.substring(0,17))throw new Error("Content-type '"+l+"' is unexpected");return j.connectionTracker.trackEnd("allocation"),s.json()}).then(function(s){j.onAllocationResponse(s,W)}).catch(function(s){var l=s+", status code "+r;j.logger.error("Allocation request failed. Error: "+l),j.connectionTracker.trackError("allocation",l),j.externalConnectParams&&j.connectionAttempt>2&&(r>=400&&r<=599?(j.logger.warn(j.connectionAttempt+" connection attempts, server-side failure: erasing external connection parameters"),j.externalConnectParams=void 0):j.externalConnectParams.reconnectUrl&&(j.logger.warn(j.connectionAttempt+" connection attempts, erasing reconnect URL"),delete j.externalConnectParams.reconnectUrl)),j.fsm.onAllocationFailed(401===r)})},B.prototype.sendPingRequest=function(){var U=this;if(this.socket&&void 0===this.pingResponseTimerId)try{this.logger.info("emitting ping event"),this.socket.emit("ping",function(){U.onPingResponse()}),this.pingResponseTimerId=setTimeout(function(){U.logger.error("Ping response timeout is fired"),U.clearPingResponseTimer(),U.fsm.onPingResponseTimeout()},this.timeoutOptions.pongTimeoutMs)}catch(W){var j=x.toJson(W.stack);this.logger.error("unable to send ping. Error: "+j),this.connectionTracker.trackError("ping",j,!1)}},B.prototype.setUserActivityState=function(U){var j=U.state!==this.userActivityState.state;this.userActivityState=U,this.fsm.onSetUserActivityState(U,j)},B.prototype.sendUserActivityState=function(U,j){this.userActivityState.state!==P.UserActivityState.Unknown&&("websocket"===this.transportTypeName&&j?this.sendUserActivityStateMultiple(U===E.UserActivityEventReason.Connected?2:1):"xhr-polling"===this.transportTypeName&&U===E.UserActivityEventReason.Modified&&this.fsm.forceReconnect())},B.prototype.sendRegisterRequest=function(){var U=this;if(!this.options.registration||!this.registrarClient)throw new Error("Internal error - options.registration is undefined");if(!this.allocateResult)throw new Error("Allocate result is undefined in sendRegisterRequest()");this.logger.info("sending register request");var j=new x.Timespan;this.connectionTracker.trackStart("registration"),this.registrarClient.register({appId:this.options.registration.pnhAppId,aesKey:"",languageId:"en-US",platform:this.options.registration.platform,templateKey:this.options.registration.pnhTemplateKey,platformUIVersion:this.options.registration.platformUIVersion,productContext:this.options.registration.productContext},{TROUTER:[{context:this.options.registration.context,path:this.allocateResult.surl,ttl:this.getRegistrationTtl()}]}).then(function(){U.logger.info("Register request successful"),U.connectionTracker.trackEnd("registration"),U.fsm.onRegistrationSucceed(),U.connectionTracker.sendTelemetry(u.ClientEventName.Registration,{duration:j.duration},[])}).catch(function(W){U.logger.error("Register request failed. Error: "+W),U.connectionTracker.trackError("registration",W.message),U.fsm.onRegistrationFailed(!1),U.connectionTracker.sendTelemetry(u.ClientEventName.Registration,{duration:j.duration},[])})},B.prototype.sendUnregisterRequest=function(){var U=this;this.logger.info("sending unregister request");var j=new x.Timespan;if(!this.options.registration||!this.registrarClient)throw new Error("Internal error - options.registration is undefined");this.connectionTracker.trackStart("unregistration"),this.registrarClient.unregister().then(function(){U.logger.info("Unregister request successful"),U.connectionTracker.trackEnd("unregistration"),U.fsm.onUnregistrationSucceed(),U.connectionTracker.sendTelemetry(u.ClientEventName.Unregistration,{duration:j.duration},[])}).catch(function(W){U.logger.error("Unregister request failed. Error: "+W),U.connectionTracker.trackError("unregistration",W.message),U.fsm.onUnregistrationFailed(!1),U.connectionTracker.sendTelemetry(u.ClientEventName.Unregistration,{duration:j.duration},[])})},B.prototype.fetchWithTimeout=function(U,j){return new y.Promise(function(W,X){fetch(U).then(W).catch(X),0!==j&&setTimeout(X,j,new Error("Fetch for '"+U.url+"' timed out"))})},B.prototype.resetTokenBackoff=function(){this.tokenBackoff.reset()},B.prototype.resetRegisterBackoff=function(){this.registrarClient&&this.registrarClient.cancelPendingRequests()},B.prototype.clearTimers=function(){this.logger.debug("Clearing all pending downstream events related timers");for(var U=0,j=Object.keys(this.pendingTimers);U<j.length;U++)this.clearTimer(Number(j[U]))},B.prototype.restartIncallModeTimer=function(){var U=this;this.clearIncallModeTimerId(),this.logger.debug("Restarting incall mode timer"),this.incallModeTimerId=setTimeout(function(){U.logger.info("Call mode timer fired"),U.fsm.onIncallModeTimer()},this.options.incallModeTimeoutMs)},B.prototype.enterIncallMode=function(){this.logger.info("Entering incall mode"),this.timeoutOptions=this.options.incallTimeoutOptions,this.healthBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.tokenBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.inIncallMode=!0},B.prototype.exitIncallMode=function(){this.logger.info("Exiting incall mode"),this.clearIncallModeTimerId(),this.timeoutOptions=this.options.timeoutOptions,this.healthBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.tokenBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.inIncallMode=!1},B.prototype.isIncallMode=function(){return this.inIncallMode},B.prototype.onSocketConnecting=function(U){this.logger.info("onSocketConnecting("+U+")"),this.transportTypeName=U,this.connectionTracker.trackProgress("connecting",this.transportTypeName),this.fsm.onConnecting()},B.prototype.onSocketConnect=function(){this.logger.info("onSocketConnect")},B.prototype.onSocketConnectFailed=function(U){this.logger.error("onSocketConnectFailed"),this.connectionTracker.trackError("connect_failed",U,!0,this.transportTypeName?this.transportTypeName:this.UNKNOWN_TRANSPORT),this.fsm.onConnectingFailed()},B.prototype.onSocketDisconnect=function(U){this.logger.error("onSocketDisconnect, reason: "+U);var j={reason:U,serverClosed:!this.fsm.isActive()};this.connectionTracker.trackDisconnected(j),this.connectionTracker.clearConnectedInfo();var W=j.sessionLengthMS||0;"dup"===U&&"dup"===this.lastDisconnectReason&&W<this.options.duplicateDisconnectThresholdMs&&(this.logger.warn("Socket was closed by server as Duplicate for the second time in a row after "+W+" ms which is below the threshold of "+this.options.duplicateDisconnectThresholdMs+" ms. Resetting cached connection parameters and making a new allocation."),this.resetAllocationConnectionParams()),this.lastDisconnectReason=U,this.fsm.onSocketError(void 0),this.connectionExpireTimestampInSecs=void 0},B.prototype.onSocketReconnect=function(){this.logger.error("onSocketReconnect"),this.fsm.onTrouterConnected()},B.prototype.onSocketReconnectFailed=function(U){this.logger.error("onSocketReconnectFailed with '"+U+"'"),this.fsm.onSocketError("string"==typeof U?U:void 0)},B.prototype.onSocketReconnecting=function(){this.logger.error("onSocketReconnecting")},B.prototype.onSocketError=function(U){this.logger.error("onSocketError with '"+x.toJson(U)+"'"),this.connectionTracker.trackError("connectSocket",U),this.fsm.onSocketError("string"==typeof U?U:void 0)},B.prototype.onSocketMessage=function(U){var W,j=this;this.logger.info("onSocketMessage");try{var X=(W=new D(U)).headers&&W.headers["X-Microsoft-Skype-Chain-ID"];this.logger.info("Received request N "+W.id+(X?" Chain-Id "+X:"")+" CV "+W.correlationVector+" to '"+W.url+"'"),W.startTS=Date.now(),W.url&&this.urlPath&&0===W.url.indexOf(this.urlPath)&&(W.shortUrl=W.url.substring(this.urlPath.length))}catch(R){var ge=x.toJson(R.stack);return this.logger.error("unable to parse request. Error: "+ge),this.connectionTracker.trackRequest(void 0,ge),void this.connectionTracker.sendResponseError("unable to parse request, error: "+R)}W.timeoutTimerId=setTimeout(function(){if(!W.replied){j.logger.error("Request "+W.id+" timed out");var R=new u.ResponseData(W.id);R.status=504,R.headers={"Trouter-Responder":"ClientLib"},j.sendResponse(W,R),W.timedout=!0}},this.timeoutOptions.requestTimeoutMs);try{this.connectionTracker.trackRequest(W),this.fsm.onDownstreamRequest(W)}catch(R){this.logger.error("exception in socket.on message. Error: "+x.toJson(R.stack)),this.connectionTracker.sendResponseError(R.message,W,void 0)}},B.prototype.onTrouterConnected=function(U){if(this.allocateResult){this.logger.info("onTrouterConnected: "+this.allocateResult.url),this.socket&&this.socket.socket&&this.socket.socket.options&&this.socket.socket.options.query&&(this.socket.socket.options.query+="&connected=true"),this.urlPath=this.allocateResult.url.replace(/https?:\/\/([A-z0-9\:\$\-\_\.\+\!\*\"\(\)\,]*)\//,"/");var j=this.connectedUrl!==this.allocateResult.url;this.connectedUrl=this.allocateResult.url,this.connectionExpireTimestampInSecs=x.calculateExpireTsInSec(U.ttl),this.connectionTracker.trackEnd("connectSocket"),this.connectionTracker.trackConnected(j,this.transportTypeName?this.transportTypeName:this.UNKNOWN_TRANSPORT),this.fsm.onTrouterConnected()}else this.logger.error("Invalid internal state - received onTrouterConnected while allocateResult is not set")},B.prototype.onTrouterReconnect=function(){this.logger.info("onTrouterReconnect"),this.fsm.onReconnectRequired()},B.prototype.onTrouterMessageLoss=function(U){this.logger.info("onTrouterMessageLoss"),this.fsm.onTrouterMessageLost(U.droppedIndicators)},B.prototype.onAllocationResponse=function(U,j){if(this.logger.info("Received allocation response "+JSON.stringify(U)),this.allocateResult=U,this.externalConnectParams=void 0,this.connectionExpireTimestampInSecs=x.calculateExpireTsInSec(+U.ttl),this.connectionId=this.allocateResult.id||"",this.connectedClientId=this.allocateResult.ccid,this.logger.info("connected client id set {connectedClientId:"+this.connectedClientId+"}"),this.c2cUrlBase=U.curlb||"",""===this.c2cUrlBase){var X=U.surl.indexOf("://");X>=0&&(X=U.surl.indexOf("/",X+3))>=5&&":3443"===U.surl.substr(X-5,5)&&(this.c2cUrlBase=U.surl.substr(0,X-5))}var K=p({serviceUrl:j,reconnectUrl:U.socketio+"v4/a"},U.connectparams);this.manager.onConnectionParametersUpdated(K),this.fsm.onAllocationSucceed()},B.prototype.onPingResponse=function(){this.logger.info("onPingResponse"),this.connectionTracker.increasePingResponseCount(),this.clearPingResponseTimer(),this.fsm.onPingResponse()},B.prototype.clearPingResponseTimer=function(){void 0!==this.pingResponseTimerId&&(clearTimeout(this.pingResponseTimerId),this.pingResponseTimerId=void 0)},B.prototype.buildQuery=function(U){for(var j=[],W=0,X=Object.keys(U);W<X.length;W++){var K=X[W];U.hasOwnProperty(K)&&void 0!==U[K]&&j.push(K+"="+U[K])}return j.join("&")},B.prototype.appendConnectedClientIds=function(U,j){var W="";U.indexOf("ccid=")<0&&(W="ccid="+this.connectedClientId+"&"),this.domId&&(W+="dom="+this.domId+"&"),W.length>0&&(W=W.slice(0,-1));var X=j||-1!==U.indexOf("?")?"&":"?";return this.appendCorrelationIds(U+X+W,j)},B.prototype.appendEndpointId=function(U,j){var W=j||-1!==U.indexOf("?")?"&":"?";return U.indexOf("epid")<0&&this.options.endpointId?""+U+W+"epid="+this.options.endpointId:U},B.prototype.appendCorrelationIds=function(U,j){var W=j||-1!==U.indexOf("?")?"&":"?";return U.indexOf("cor_id")<0?""+U+W+"cor_id="+this.options.clientCorrelationID+"&con_num="+this.clientID+"_"+this.connectionAttempt:U},B.prototype.getHealthUrl=function(U){return U.substring(0,U.lastIndexOf("/a"))+"/h"},B.prototype.safeString=function(U){return"string"==typeof U?U:""},B.prototype.sendResponse=function(U,j){if(U.timedout)return this.logger.error("Request "+U.id+" already timed out"),1;if(U.replied)return this.logger.error("Response for request "+U.id+" already sent"),2;clearTimeout(U.timeoutTimerId),U.timeoutTimerId=0,U.replied=!0,j.headers=j.headers||{};var W=U.correlationVector;this.logger.info("Sending response for request N "+U.id+" CV "+W+" with status "+j.status),W&&(j.headers[I]=W),U.headers&&U.headers["trouter-request"]&&!j.headers["trouter-request"]&&(j.headers["trouter-request"]=U.headers["trouter-request"]);var X=Date.now()-U.startTS;if(j.headers["trouter-client"]=x.toJson({cd:X}),this.logger.debug("response: "+x.toJson(j)),!this.socket)return this.connectionTracker.sendResponseError("no socket",U,j),4;try{return this.socket.send(x.toJson(j)),j.sentTS=Date.now(),U.incrementCorrelationVector(),this.connectionTracker.trackResponse(U,X,j),"websocket"===this.transportTypeName&&this.sendPingRequest(),0}catch(ge){var K="unable to send data on response.end. Error: "+x.toJson(ge.stack);return this.logger.error(K),this.connectionTracker.sendResponseError(K,U,j),4}},B.prototype.sendUserActivityStateMultiple=function(U){var j=this,W=new O("user.activity"),X=this.userActivityState.toEventObject();W.args=X,this.userActivityState.correlationVector.increase(),this.logger.debug("Sending user activity '"+this.userActivityState.toEventJSON()+"', remaining "+(U-1)),this.sendDownstreamEvent(W,function(){if(j.logger.info("User activity state: "+X.state+", cv: "+X.cv+" accepted"),j.manager.onUserActivityStateAccepted&&j.manager.onUserActivityStateAccepted(X.cv),j.clearTimer(W.timeoutTimerId),U>1){var K=setTimeout(function(){j.clearTimer(K),j.sendUserActivityStateMultiple(U-1)},j.options.userActivitySecondResendDelayMs);j.registerTimer(K,"user.activity/resend")}}),W.timeoutTimerId=setTimeout(function(){j.logger.error("Activity state response timeout is fired"),j.fsm.onActivityStateResponseTimeout(),j.clearTimer(W.timeoutTimerId)},this.timeoutOptions.userActivityResponseTimeoutMs),this.registerTimer(W.timeoutTimerId,"user.activity/response")},B.prototype.sendDownstreamEvent=function(U,j){this.logger.info("Sending downstream event "+U.name),this.socket&&this.socket.emit(U.name,U.args,j)},B.prototype.registerTimer=function(U,j){this.logger.debug("registering timer "+U+" -> "+j),this.pendingTimers[U]=j},B.prototype.clearTimer=function(U){this.logger.debug("clearing timer "+U+" -> "+this.pendingTimers[U]),delete this.pendingTimers[U],clearTimeout(U)},B.prototype.getRegistrationTtl=function(){var U=x.calculateTtlInSec(this.connectionExpireTimestampInSecs);return this.logger.debug("Current connectionID will expire in "+U+" seconds"),this.options.registration&&this.options.registration.registrarTtlSec&&U>0?Math.min(this.options.registration.registrarTtlSec,U):this.options.registration&&this.options.registration.registrarTtlSec?this.options.registration.registrarTtlSec:U>0?U:3600},B.prototype.clearIncallModeTimerId=function(){void 0!==this.incallModeTimerId&&(this.logger.debug("Clearing in-call mode timer"),clearTimeout(this.incallModeTimerId),this.incallModeTimerId=void 0)},B.prototype.applyConnectionTrackerOptions=function(U){try{U.eventLogger&&"function"==typeof U.eventLogger.logEvent?(this.connectionTracker.mergeSettings(U.telemetrySettings),this.connectionTracker.enable(U.eventLogger)):this.logger.warn("Trouter client event logging disabled due to invalid configuration.")}catch(j){this.logger.warn("Trouter client event logging disabled. Error: "+x.toJson(j.stack)),this.connectionTracker.disable()}},B}();L.TrouterConnection=V},function(Y,L,T){Object.defineProperty(L,"__esModule",{value:!0});var p,g,x,N=T(5),y=T(0);(g=p=L.State||(L.State={}))[g.Initial=0]="Initial",g[g.RetrievingToken=1]="RetrievingToken",g[g.Allocating=2]="Allocating",g[g.Handshaking=3]="Handshaking",g[g.Connecting=4]="Connecting",g[g.Connected=5]="Connected",g[g.UnregisteringRetrievingToken=6]="UnregisteringRetrievingToken",g[g.Unregistering=7]="Unregistering",function(g){g[g.Initial=0]="Initial",g[g.RetrievingToken=1]="RetrievingToken",g[g.Registering=2]="Registering",g[g.Registered=3]="Registered",g[g.NotRegistered=4]="NotRegistered"}(x||(x={}));var u=function(){function g(C,P,E){this.worker=P,this.incallModeEnabled=E,this.state=p.Initial,this.connectionErrors=0,this.logger=new y.Logger("ConnectionFsm",C),this.connectedSubstate=x.Initial}return g.prototype.getState=function(){return this.state},g.prototype.isActive=function(){return this.state===p.Allocating||this.state===p.Connected||this.state===p.Handshaking||this.state===p.Connecting||this.state===p.RetrievingToken},g.prototype.start=function(){return this.state===p.Initial?(this.setState(p.RetrievingToken),this.worker.getToken(!0,!1),!0):(this.showIgnored("start"),!1)},g.prototype.stop=function(C){C&&(this.connectedSubstate=x.Initial),this.worker.isIncallMode()&&this.worker.exitIncallMode(),this.worker.resetTokenBackoff(),this.worker.resetRegisterBackoff(),this.worker.stopConnectionTimer(),this.worker.stopPingTimer(),this.worker.clearTimers(),this.state!==p.Connecting&&this.state!==p.Handshaking&&this.state!==p.Connected||this.worker.stopSocketIo(),this.isRegistered()&&this.state!==p.UnregisteringRetrievingToken&&this.state!==p.Unregistering?(this.setState(p.UnregisteringRetrievingToken),this.worker.stopRegisterTimer(),this.worker.getToken(!0,!1)):(this.setState(p.Initial),this.worker.dispatchDisconnected())},g.prototype.onTokenReceived=function(C){this.state===p.RetrievingToken?(this.setState(p.Allocating),this.worker.startConnectionTimer(),this.worker.sendAllocateRequest(C)):this.state===p.Connected&&this.connectedSubstate===x.RetrievingToken?(this.connectedSubstate=x.Registering,this.worker.sendRegisterRequest()):this.state===p.UnregisteringRetrievingToken?(this.setState(p.Unregistering),this.worker.sendUnregisterRequest()):this.showIgnored("onTokenReceived")},g.prototype.checkConnection=function(C){C&&this.onPingInterval()},g.prototype.onAllocationSucceed=function(){return this.state===p.Allocating?(this.setState(p.Handshaking),this.connectedSubstate===x.Registered&&this.worker.dispatchUnregistered(),this.connectedSubstate=x.Initial,this.worker.startSocketIo(),!0):(this.showIgnored("onAllocationSucceed"),!1)},g.prototype.onAllocationFailed=function(C){this.state===p.Allocating?(this.setState(p.RetrievingToken),this.worker.stopConnectionTimer(),this.worker.getToken(!C,!0)):this.showIgnored("onAllocationFailed")},g.prototype.onConnectingTimeout=function(){this.state===p.Allocating||this.state===p.Connecting||this.state===p.Handshaking?(this.setState(p.RetrievingToken),this.resetAllocationIfNecessary(void 0),this.worker.stopSocketIo(),this.worker.getToken(!0,!1)):this.showIgnored("onConnectingTimeout")},g.prototype.onConnecting=function(){this.state===p.Handshaking?this.setState(p.Connecting):this.showIgnored("onConnecting")},g.prototype.onConnectingFailed=function(){this.state===p.Connecting?this.onConnectingTimeout():this.state===p.Handshaking?(this.logger.error("Unexpected error in Socket.io - no valid transports"),this.onConnectingTimeout()):this.showIgnored("onConnectingFailed")},g.prototype.onSocketError=function(C){this.state===p.Handshaking||this.state===p.Connected?(this.worker.stopSocketIo(),this.worker.stopPingTimer(),this.worker.clearTimers(),this.worker.stopConnectionTimer(),this.state!==p.Connected&&this.worker.resetAllocationConnectionParams(),this.setState(p.RetrievingToken),this.worker.dispatchReconnecting(),this.worker.getToken(!0,!1)):this.showIgnored("onSocketError")},g.prototype.onTrouterConnected=function(){this.state===p.Connecting?(this.setState(p.Connected),this.worker.resetTokenBackoff(),this.worker.stopConnectionTimer(),this.worker.sendUserActivityState(N.UserActivityEventReason.Connected,!0),this.worker.startPingTimer(),this.worker.dispatchConnected(),this.connectionErrors=0,this.worker.shouldSkipRegistration()?(this.connectedSubstate=x.NotRegistered,this.worker.dispatchRegistered()):(this.connectedSubstate=x.RetrievingToken,this.worker.getToken(!0,!1))):this.showIgnored("onTrouterConnected")},g.prototype.onReconnectRequired=function(){this.worker.dispatchReconnectIsRequired()},g.prototype.onDownstreamRequest=function(C){this.state===p.Connected?(this.switchToIncallModeIfEnabled(),this.worker.dispatchDownstreamRequest(C)):this.showIgnored("onDownstreamRequest")},g.prototype.onTrouterMessageLost=function(C){this.state===p.Connected?this.worker.dispatchTrouterMessageLost(C):this.showIgnored("onTrouterMessageLost")},g.prototype.onPingInterval=function(){this.state===p.Connected?this.worker.sendPingRequest():this.showIgnored("onPingInterval")},g.prototype.onPingResponseTimeout=function(){this.onMissedResponse("onPingResponseTimeout")},g.prototype.onPingResponse=function(){this.state===p.Connected||this.showIgnored("onPingResponse")},g.prototype.onRegistrationFailed=function(C){this.state===p.Connected&&this.connectedSubstate===x.Registering?(this.connectedSubstate=x.RetrievingToken,this.worker.getToken(!C,!0)):this.showIgnored("onRegistrationFailed")},g.prototype.onRegistrationSucceed=function(){this.state===p.Connected?(this.connectedSubstate===x.Registering&&(this.connectedSubstate=x.Registered,this.worker.dispatchRegistered()),this.worker.hasCustomRegisterTtl()&&this.worker.startRegisterTimer()):this.showIgnored("onRegistrationSucceed")},g.prototype.onRegistrationTimeout=function(){this.state===p.Connected&&this.connectedSubstate!==x.NotRegistered?(this.connectedSubstate=x.RetrievingToken,this.worker.getToken(!0,!1)):this.showIgnored("onRegistrationTimeout")},g.prototype.onUnregistrationFailed=function(C){this.state===p.Unregistering?(this.setState(p.UnregisteringRetrievingToken),this.worker.getToken(!C,!C)):this.showIgnored("onUnregistrationFailed")},g.prototype.onUnregistrationSucceed=function(){this.state===p.Unregistering?(this.setState(p.Initial),this.worker.dispatchUnregistered(),this.worker.dispatchDisconnected()):this.showIgnored("onUnregistrationSucceed")},g.prototype.onIncallModeTimer=function(){this.worker.exitIncallMode(),this.state===p.Connected?(this.worker.stopPingTimer(),this.worker.startPingTimer()):this.showIgnored("onIncallModeTimer")},g.prototype.onSetUserActivityState=function(C,P){P?(this.logger.info("Changing user activity state to '"+C.toEventJSON()+"'"),this.worker.sendUserActivityState(N.UserActivityEventReason.Modified,this.state===p.Connected)):this.logger.debug("Not changing the same user activity state '"+C.toEventJSON()+"'")},g.prototype.onActivityStateResponseTimeout=function(){this.onMissedResponse("onActivityStateResponseTimeout")},g.prototype.forceReconnect=function(){this.setState(p.RetrievingToken),this.worker.resetTokenBackoff(),this.worker.stopConnectionTimer(),this.worker.stopPingTimer(),this.worker.clearTimers(),this.worker.stopSocketIo(),this.worker.dispatchReconnecting(),this.worker.getToken(!0,!1)},g.prototype.onMissedResponse=function(C){this.state===p.Connected?(this.setState(p.RetrievingToken),this.worker.stopPingTimer(),this.worker.clearTimers(),this.worker.stopSocketIo(),this.worker.dispatchReconnecting(),this.worker.getToken(!0,!1)):this.showIgnored(C)},g.prototype.showIgnored=function(C){this.logger.debug("Ignoring event '"+C+"' in state '"+p[this.state]+"'")},g.prototype.setState=function(C){this.logger.info("Switching from state '"+p[this.state]+"' to state '"+p[C]+"'"),this.state!==C?this.state=C:this.logger.error("Attempt to switching into the current state '"+p[C]+"'")},g.prototype.resetAllocationIfNecessary=function(C){this.connectionErrors++,this.connectionErrors>=2||void 0!==C&&/^4\d\d /.test(C)?(this.logger.error("Connection error count is "+this.connectionErrors+" - will reset allocation"),this.connectionErrors=0):this.logger.info("Connection error count is "+this.connectionErrors+" - will NOT reset allocation")},g.prototype.isRegistered=function(){return this.connectedSubstate===x.Registered||this.connectedSubstate===x.Registering},g.prototype.switchToIncallModeIfEnabled=function(){this.incallModeEnabled&&(this.worker.isIncallMode()||(this.worker.enterIncallMode(),this.worker.stopPingTimer(),this.worker.startPingTimer()),this.worker.restartIncallModeTimer())},g}();L.TrouterFsm=u},function(Y,L,T){Object.defineProperty(L,"__esModule",{value:!0});var p=T(2),N=T(0),y=function(){function x(u,g){this.worker=g,this.state=p.TrouterState.Unknown,this.logger=new N.Logger("ManagerFsm",u)}return x.prototype.start=function(){this.state===p.TrouterState.Unknown?(this.setState(p.TrouterState.Disconnected),this.worker.forceStopLingeringConnection(),this.worker.startFirstConnection()):this.showIgnored("start")},x.prototype.stop=function(u){this.state!==p.TrouterState.Unknown?(this.setState(p.TrouterState.Unknown),this.worker.stopFirstConnection(!0===u),this.worker.stopSecondConnection(!0===u)):this.showIgnored("stop")},x.prototype.getState=function(){return this.state},x.prototype.onConnected=function(u){this.state===p.TrouterState.Disconnected&&u?this.worker.doesSecondConnectionExist()?this.setState(p.TrouterState.Switching):(this.setState(p.TrouterState.Connected),this.worker.dispatchConnected()):this.showIgnored("onConnected("+u+")")},x.prototype.onRegistered=function(u){this.state!==p.TrouterState.Disconnected||u?this.state!==p.TrouterState.Switching||u||(this.setState(p.TrouterState.Connected),this.worker.switchConnections(),this.worker.stopSecondConnectionDelayed(),this.worker.dispatchConnected()):(this.setState(p.TrouterState.Connected),this.worker.switchConnections(),this.worker.stopSecondConnection(!0),this.worker.dispatchConnected()),this.worker.dispatchRegistrationState(!0)},x.prototype.onUnregistered=function(u){u&&this.worker.dispatchRegistrationState(!1)},x.prototype.onReconnecting=function(u){this.state===p.TrouterState.Connected&&u||this.state===p.TrouterState.Switching&&u?(this.setState(p.TrouterState.Disconnected),this.worker.dispatchReconnecting()):this.showIgnored("onReconnecting("+u+")")},x.prototype.onReconnectionRequired=function(u){this.state===p.TrouterState.Connected&&u?(this.setState(p.TrouterState.Switching),this.worker.startSecondConnection()):this.state===p.TrouterState.Disconnected&&u?this.worker.startSecondConnection():this.showIgnored("onReconnectionRequired("+u+")")},x.prototype.onDisconnected=function(u){this.state===p.TrouterState.Unknown&&u?this.worker.dispatchStopped():this.showIgnored("onDisconnected("+u+")")},x.prototype.showIgnored=function(u){this.logger.info("Ignoring event '"+u+"' in state '"+p.TrouterState[this.state]+"'")},x.prototype.setState=function(u){this.logger.info("Switching from state '"+p.TrouterState[this.state]+"' to state '"+p.TrouterState[u]+"'"),this.state!==u?this.state=u:this.logger.error("Attempt to switching into the current state '"+p.TrouterState[u]+"'")},x}();L.TrouterManagerFsm=y},function(Y,L,T){function p(k,O){if(!O)return k;var V=g({},k,{enabled:O.TelemetryEnabled});return void 0!==O.ClientTelemetryEventEnabled&&(V=g({},V,O.ClientTelemetryEventEnabled)),V}function N(k,O){return{clientInfo:{ua:k.trouterSettings.productName,v:k.trouterSettings.version},ioOptions:{ackTimeoutMs:5e3},clientCorrelationID:k.trouterSettings.sessionId,environment:k.trouterSettings.environment,telemetrySettings:p(k.telemetryConfig.settings,O),eventLogger:k.telemetryConfig.eventLogger,endpointId:k.trouterSettings.registrationId,trouterUrl:O&&O.TrouterConnectionUrl||k.trouterSettings.trouterServiceUrl,registration:k.trouterSettings.registrarServiceUrl?{registrarUrl:k.trouterSettings.registrarServiceUrl,registrationId:k.trouterSettings.registrationId||"",pnhAppId:k.trouterSettings.pnhAppId||"",platform:k.trouterSettings.platform||"",pnhTemplateKey:k.trouterSettings.pnhTemplate||"",platformUIVersion:k.trouterSettings.platformUIVersion||"",productContext:k.trouterSettings.pnhProductContext||void 0,context:k.trouterSettings.pnhContext||"",registrarTtlSec:(k.trouterSettings.maxRegistrationTimeInMs||0)/1e3}:void 0,timeoutOptions:g({connectionTimeoutMs:k.trouterSettings.trouterConnectTimeoutInMs||3e4,fetchTimeoutMs:1e4,pingTimeoutMs:4e4,pongTimeoutMs:5e3,maxBackoffMs:3e4,requestTimeoutMs:5e3,userActivityResponseTimeoutMs:1e4},k.trouterSettings.timeoutOptions),incallTimeoutOptions:g({connectionTimeoutMs:1e4,fetchTimeoutMs:5e3,pingTimeoutMs:5e3,pongTimeoutMs:2e3,maxBackoffMs:1e4,requestTimeoutMs:5e3,userActivityResponseTimeoutMs:1e4},k.trouterSettings.incallTimeoutOptions),incallModeTimeoutMs:k.trouterSettings.incallModeTimeoutMs||0,lingeringConnectionDelayMs:6e4,userActivitySecondResendDelayMs:k.trouterSettings.userActivitySecondResendDelayMs||1e4,duplicateDisconnectThresholdMs:1e4,connectionCache:k.connectionCache,registrationStateCallback:k.registrationStateCallbackForAcsDoNotUse}}var g=this&&this.__assign||Object.assign||function(k){for(var O,V=1,B=arguments.length;V<B;V++)for(var U in O=arguments[V])Object.prototype.hasOwnProperty.call(O,U)&&(k[U]=O[U]);return k},C=this&&this.__awaiter||function(k,O,V,B){return new(V||(V=Promise))(function(U,j){function W(ge){try{K(B.next(ge))}catch(R){j(R)}}function X(ge){try{K(B.throw(ge))}catch(R){j(R)}}function K(ge){ge.done?U(ge.value):new V(function(R){R(ge.value)}).then(W,X)}K((B=B.apply(k,O||[])).next())})},P=this&&this.__generator||function(k,O){function V(ge){return function(R){return function(ge){if(U)throw new TypeError("Generator is already executing.");for(;K;)try{if(U=1,j&&(W=2&ge[0]?j.return:ge[0]?j.throw||((W=j.return)&&W.call(j),0):j.next)&&!(W=W.call(j,ge[1])).done)return W;switch(j=0,W&&(ge=[2&ge[0],W.value]),ge[0]){case 0:case 1:W=ge;break;case 4:return K.label++,{value:ge[1],done:!1};case 5:K.label++,j=ge[1],ge=[0];continue;case 7:ge=K.ops.pop(),K.trys.pop();continue;default:if(!(W=(W=K.trys).length>0&&W[W.length-1])&&(6===ge[0]||2===ge[0])){K=0;continue}if(3===ge[0]&&(!W||ge[1]>W[0]&&ge[1]<W[3])){K.label=ge[1];break}if(6===ge[0]&&K.label<W[1]){K.label=W[1],W=ge;break}if(W&&K.label<W[2]){K.label=W[2],K.ops.push(ge);break}W[2]&&K.ops.pop(),K.trys.pop();continue}ge=O.call(k,K)}catch(R){ge=[6,R],j=0}finally{U=W=0}if(5&ge[0])throw ge[1];return{value:ge[0]?ge[1]:void 0,done:!0}}([ge,R])}}var U,j,W,X,K={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return X={next:V(0),throw:V(1),return:V(2)},"function"==typeof Symbol&&(X[Symbol.iterator]=function(){return this}),X};Object.defineProperty(L,"__esModule",{value:!0});var E=T(1),v=T(2);L.TrouterState=v.TrouterState,L.UserActivityState=v.UserActivityState;var h=T(0),_=T(6),b=T(7),w=T(8),I=T(9),D=function(){function k(O){this.logProvider=O,this.stateChangedListeners=[],this.logger=new h.Logger("Trouter",O),this.trouterUrlPromise=new I.TrouterUrlPromise(O),this.messageHandlers=new _.MessageHandlerRegistry(O),this.listeners={},this.connectionInfo=null,this.logger.info("Created TrouterService version "+E.CLIENT_VERSION)}return k.prototype.start=function(O){this.logger.info("Start"),O.trouterSettings.disableInternalSkypeTokenCache||(O.skypeTokenProvider=b.addCacheAsBackupTo(O.skypeTokenProvider)),this.trouterCfg=O;var B=N(O,this.ecsCfg);void 0===this.trouterServer&&(this.trouterServer=new w.TrouterManager(this.logProvider,B,O.skypeTokenProvider,this)),this.trouterServer.start()},k.prototype.stop=function(O){this.logger.info("close connection"),this.trouterUrlPromise.rejectUrl(new Error("TrouterService is stopped")),void 0!==this.trouterServer&&this.trouterServer.stop(O)},k.prototype.setEcsConfig=function(O){return C(this,void 0,void 0,function(){var V=this;return P(this,function(B){return[2,new Promise(function(U,j){if(V.ecsCfg=O.TrouterJScriptClient,V.logger.info("Setting ECS configuration to "+JSON.stringify(V.ecsCfg)),void 0!==V.trouterServer&&void 0!==V.trouterCfg){var W=N(V.trouterCfg,V.ecsCfg);V.trouterServer.configure(W)}U()})]})})},k.prototype.checkConnection=function(O){void 0!==this.trouterServer&&this.trouterServer.checkConnection(O||!1)},k.prototype.resendRegistration=function(){return C(this,void 0,void 0,function(){return P(this,function(O){if(!this.trouterServer)throw new Error("resendRegistration called too early");return[2,this.trouterServer.resendRegistration()]})})},k.prototype.registerListener=function(O,V){return""===V||"/"!==V[0]||V.indexOf("?")>=0||V.indexOf("#")>=0?(this.logger.error("Listener path '"+V+"' is not valid"),!1):this.listeners[V]?(this.logger.error("Another listener is already registered for path '"+V+"'"),!1):(this.listeners[V]=O,this.logger.debug("Listener for path '"+V+"' registered"),this.connectionInfo&&O.onTrouterConnected(this.connectionInfo.baseEndpointUrl+V,this.connectionInfo),!0)},k.prototype.unregisterListener=function(O){for(var V=[],B=0,U=Object.keys(this.listeners);B<U.length;B++)this.listeners[j=U[B]]===O&&V.push(j);if(0===V.length)return!1;for(var W=0,X=V;W<X.length;W++){var j;delete this.listeners[j=X[W]]}return this.logger.debug("Listener for path(s) '"+V.join("', '")+"' unregistered"),!0},k.prototype.onTrouterConnected=function(O,V){this.logger.debug("Trouter is now connected");for(var B=0,U=Object.keys(this.listeners);B<U.length;B++){var j=U[B];try{this.listeners[j].onTrouterConnected(V.baseEndpointUrl+j,V)}catch(W){this.logger.error("Listener '"+j+"' threw an exception from onTrouterConnected(): "+W)}}this.connectionInfo=V,this.trouterUrlPromise.resolveUrl(O),this.notifyStateChanged(v.TrouterState.Connected,{url:O,getRemainingTtlInSec:function(){return V.connectionTtlSec}})},k.prototype.onTrouterDisconnected=function(){this.logger.debug("Trouter is now disconnected"),this.connectionInfo=null;for(var O=0,V=Object.keys(this.listeners);O<V.length;O++){var B=V[O],U=this.listeners[B];if(U.onTrouterDisconnected)try{U.onTrouterDisconnected()}catch(j){this.logger.error("Listener '"+B+"' threw an exception from onTrouterDisconnected(): "+j)}}this.notifyStateChanged(v.TrouterState.Disconnected)},k.prototype.onTrouterRequest=function(O,V){for(var B="",U=0,j=Object.keys(this.listeners);U<j.length;U++){var W=j[U];O.path.substring(0,W.length)===W&&W.length>B.length&&(B=W)}if(""===B)this.tryMessageHandlers(O,V)||(V.status=404,V.headers={"Trouter-Responder":"ClientLib"},V.send());else try{this.listeners[B].onTrouterRequest(O,V)}catch(X){this.logger.error("Listener '"+B+"' threw an exception from onTrouterRequest(): "+X),V.status=500,V.headers={"Trouter-Responder":"ClientLib"},V.send()}},k.prototype.onTrouterMessageLoss=function(O){this.logger.info("onTrouterMessageLoss called with value "+O);for(var V=!0,B=0,U=Object.keys(this.listeners);B<U.length;B++){var j=U[B],W=this.listeners[j];if(W.onTrouterMessageLoss)try{void 0===(V=W.onTrouterMessageLoss(O)&&V)&&(this.logger.error("Listener '"+j+"' did not response with boolean value onTrouterMessageLoss()"),V=!1)}catch(X){this.logger.error("Listener '"+j+"' threw an exception from onTrouterMessageLoss(): "+X),V=!1}}return V},k.prototype.onTrouterUserActivityStateAccepted=function(O){this.logger.debug("onTrouterUserActivityStateAccepted cv: "+O);for(var V=0,B=Object.keys(this.listeners);V<B.length;V++){var U=B[V],j=this.listeners[U];if(j.onTrouterUserActivityStateAccepted)try{j.onTrouterUserActivityStateAccepted(O)}catch(W){this.logger.error("Listener '"+U+"' threw an exception from onTrouterUserActivityStateAccepted(): "+W)}}},k.prototype.setUserActivityState=function(O,V){if(O!==v.UserActivityState.Active&&O!==v.UserActivityState.Inactive)throw new Error("setUserActivityState called with unsupported value "+O);if(this.logger.info("setUserActivityState called with value "+v.UserActivityState[O]),!this.trouterServer||this.state()===v.TrouterState.Unknown)throw new Error("setUserActivityState called too early");this.trouterServer.setUserActivityState(O,V)},k.prototype.state=function(){return void 0!==this.trouterServer?this.trouterServer.getState():v.TrouterState.Unknown},k.prototype.getServerState=function(){if(void 0!==this.trouterServer)return this.trouterServer.getServerState()},k.prototype.getTrouterUrlAsync=function(){return void 0!==this.trouterServer?this.trouterUrlPromise.getPromise():Promise.reject(new Error("TrouterService has not been started"))},k.prototype.onStateChanged=function(O){if(this.logger.info("onStateChanged called"),void 0===O)this.stateChangedListeners=this.stateChangedListeners.filter(function(B){return void 0===B.wrappedCallback});else{this.offStateChanged(O);var V=function(B,U){O(B,U?U.url:"")};V.wrappedCallback=O,this.stateChangedListeners.push(V)}},k.prototype.offStateChanged=function(O){this.logger.info("offStateChanged called");var V=this.stateChangedListeners.length;return this.stateChangedListeners=this.stateChangedListeners.filter(function(B){return B.wrappedCallback!==O}),V>this.stateChangedListeners.length},k.prototype.addCallback=function(O){this.logger.info("addListener called"),-1===this.stateChangedListeners.indexOf(O,0)&&void 0!==O&&this.stateChangedListeners.push(O)},k.prototype.removeCallback=function(O){this.logger.info("removeListener called");var V=this.stateChangedListeners.indexOf(O,0);return V>-1&&(this.stateChangedListeners.splice(V,1),!0)},k.prototype.registerMessageHandler=function(O){this.logger.info("registerMessageHandler is called"),this.messageHandlers.register(O)},k.prototype.clearMessageHandlers=function(){this.logger.info("clearMessageHandlers is called"),this.messageHandlers.clear()},k.prototype.notifyStateChanged=function(O,V){var B=this;this.logger.info("notifyStateChanged called, will forward to "+this.stateChangedListeners.length+" listeners"),this.stateChangedListeners.forEach(function(U){try{U(O,V)}catch(j){B.logger.error("Error in callback "+j)}})},k.prototype.tryMessageHandlers=function(O,V){if(!this.messageHandlers.active())return!1;var B,U=null;try{U=(B=JSON.parse(O.body))&&(B.evt||B.eventId)||null}catch(X){}var W=this.messageHandlers.handleMessage({eventId:U,url:(this.connectionInfo?this.connectionInfo.baseEndpointUrl:"")+O.path,body:B,rawBody:O.body,headers:O.headers});return!!W.isHandled&&(V.status=W.resultCode,W.responseHeaders&&(V.headers=W.responseHeaders),W.responseBody&&(V.body=W.responseBody),V.send(),!0)},k}();L.TrouterService=D,L.createTrouterService=function(k){return new D(k)},L.getTrouterServiceVersion=function(){return E.CLIENT_VERSION},L.replaceTrouterUrlBase=function(k,O){var V=k.indexOf("://");if(V>=0){var B=k.indexOf("/",V+3);if(B>=0)return O+k.substr(B)}return""}},function(Y,L){Y.exports=__WEBPACK_EXTERNAL_MODULE_20__},function(Y,L){}])},module.exports=L(tsregistrar)});unwrapExports(tstrouter);var constants=createCommonjsModule(function(Y,L){var N;L.__esModule=!0,L.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES=3,L.GCCHIGH_TROUTER_SERVICE_URL="https://go.trouter.gov.teams.microsoft.us/v4/a",L.GCCHIGH_REGISTRAR_SERVICE_URL="https://registrar.gov.teams.microsoft.us/V3/registrations",L.DOD_TROUTER_SERVICE_URL="https://go.trouter.dod.teams.microsoft.us/v4/a",L.DOD_REGISTRAR_SERVICE_URL="https://registrar.dod.teams.microsoft.us/V3/registrations",L.INT_TROUTER_SERVICE_URL="https://go.trouter-int.skype.net/v4/a",L.INT_REGISTRAR_SERVICE_URL="https://edge.skype.net/registrar/testenv/v3/registrations",L.PUBLIC_TROUTER_SERVICE_URL="https://go.trouter.skype.com/v4/a",L.PUBLIC_REGISTRAR_SERVICE_URL="https://edge.skype.com/registrar/prod/v3/registrations",(N=L.CloudType||(L.CloudType={})).Public="Public",N.GccHigh="GCC High",N.Dod="DoD",function(N){N.OrgId="orgid",N.Acs="acs",N.Spool="spool",N.GccHigh="gcch",N.GccHighAcs="gcch-acs",N.Dod="dod",N.DodAcs="dod-acs"}(L.CloudPrefix||(L.CloudPrefix={}))});unwrapExports(constants);var constants_1=constants.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES,constants_2=constants.GCCHIGH_TROUTER_SERVICE_URL,constants_3=constants.GCCHIGH_REGISTRAR_SERVICE_URL,constants_4=constants.DOD_TROUTER_SERVICE_URL,constants_5=constants.DOD_REGISTRAR_SERVICE_URL,constants_6=constants.INT_TROUTER_SERVICE_URL,constants_7=constants.INT_REGISTRAR_SERVICE_URL,constants_8=constants.PUBLIC_TROUTER_SERVICE_URL,constants_9=constants.PUBLIC_REGISTRAR_SERVICE_URL,constants_10=constants.CloudType,constants_11=constants.CloudPrefix,TrouterUtils=createCommonjsModule(function(Y,L){var T=commonjsGlobal&&commonjsGlobal.__awaiter||function(D,k,O,V){return new(O||(O=Promise))(function(U,j){function W(ge){try{K(V.next(ge))}catch(R){j(R)}}function X(ge){try{K(V.throw(ge))}catch(R){j(R)}}function K(ge){ge.done?U(ge.value):function(U){return U instanceof O?U:new O(function(j){j(U)})}(ge.value).then(W,X)}K((V=V.apply(D,k||[])).next())})},p=commonjsGlobal&&commonjsGlobal.__generator||function(D,k){var V,B,U,j,O={label:0,sent:function(){if(1&U[0])throw U[1];return U[1]},trys:[],ops:[]};return j={next:W(0),throw:W(1),return:W(2)},"function"==typeof Symbol&&(j[Symbol.iterator]=function(){return this}),j;function W(K){return function(ge){return function(K){if(V)throw new TypeError("Generator is already executing.");for(;O;)try{if(V=1,B&&(U=2&K[0]?B.return:K[0]?B.throw||((U=B.return)&&U.call(B),0):B.next)&&!(U=U.call(B,K[1])).done)return U;switch(B=0,U&&(K=[2&K[0],U.value]),K[0]){case 0:case 1:U=K;break;case 4:return O.label++,{value:K[1],done:!1};case 5:O.label++,B=K[1],K=[0];continue;case 7:K=O.ops.pop(),O.trys.pop();continue;default:if(!(U=(U=O.trys).length>0&&U[U.length-1])&&(6===K[0]||2===K[0])){O=0;continue}if(3===K[0]&&(!U||K[1]>U[0]&&K[1]<U[3])){O.label=K[1];break}if(6===K[0]&&O.label<U[1]){O.label=U[1],U=K;break}if(U&&O.label<U[2]){O.label=U[2],O.ops.push(K);break}U[2]&&O.ops.pop(),O.trys.pop();continue}K=k.call(D,O)}catch(ge){K=[6,ge],B=0}finally{V=U=0}if(5&K[0])throw K[1];return{value:K[0]?K[1]:void 0,done:!0}}([K,ge])}}};L.__esModule=!0;var N=new Map([["chatMessageReceived",200],["typingIndicatorReceived",245],["readReceiptReceived",246],["chatMessageEdited",247],["chatMessageDeleted",248],["chatThreadCreated",257],["chatThreadPropertiesUpdated",258],["chatThreadDeleted",259],["participantsAdded",260],["participantsRemoved",261]]),y="8:orgid:",x="8:dod:",u="8:gcch:",g="8:teamsvisitor:";L.toMessageHandler=function(D,k){var O=N.get(D);return{handleMessage:function(V){var B=null;if((null==V?void 0:V.rawBody)&&(B=JSON.parse(V.rawBody)),null!==B&&B.eventId===O){var U=v(D,B);if(null!==U)return k(U),{isHandled:!0,resultCode:200}}}}};var v=function(D,k){if("chatMessageReceived"===D)return{threadId:(O=k).groupId,sender:h(O.senderId),senderDisplayName:O.senderDisplayName,recipient:h(O.recipientMri),id:O.messageId,createdOn:new Date(O.originalArrivalTime),version:O.version,type:O.messageType,message:O.messageBody,metadata:_(O.acsChatMessageMetadata)};if("chatMessageEdited"===D)return{threadId:(O=k).groupId,sender:h(O.senderId),senderDisplayName:O.senderDisplayName,recipient:h(O.recipientMri),id:O.messageId,createdOn:new Date(O.originalArrivalTime),version:O.version,message:O.messageBody,editedOn:new Date(O.edittime),type:O.messageType,metadata:_(O.acsChatMessageMetadata)};if("chatMessageDeleted"===D)return{threadId:(O=k).groupId,sender:h(O.senderId),senderDisplayName:O.senderDisplayName,recipient:h(O.recipientMri),id:O.messageId,createdOn:new Date(O.originalArrivalTime),version:O.version,deletedOn:new Date(O.deletetime),type:O.messageType};if("typingIndicatorReceived"===D)return{threadId:(O=k).groupId,sender:h(O.senderId),senderDisplayName:O.senderDisplayName,recipient:h(O.recipientMri),version:O.version,receivedOn:new Date(O.originalArrivalTime)};if("readReceiptReceived"===D){var O=k,U=JSON.parse(O.messageBody).consumptionhorizon.split(";");return{threadId:O.groupId,sender:h(O.senderId),senderDisplayName:"",recipient:h(O.recipientMri),chatMessageId:O.messageId,readOn:new Date(+U[1])}}if("chatThreadCreated"===D){O=k;var j=JSON.parse(unescape(O.createdBy)),W=JSON.parse(unescape(O.members)),X=JSON.parse(unescape(O.properties)),K={id:h(j.participantId),displayName:j.displayName},ge=W.map(function(z){return{id:h(z.participantId),displayName:z.displayName}});return{threadId:O.threadId,createdOn:new Date(O.createTime),createdBy:K,version:O.version,participants:ge,properties:X}}if("chatThreadPropertiesUpdated"===D){O=k;var R=JSON.parse(unescape(O.editedBy)),r=(X=JSON.parse(unescape(O.properties)),{id:h(R.participantId),displayName:R.displayName});return{threadId:O.threadId,updatedOn:new Date(O.editTime),updatedBy:r,version:O.version,properties:X}}if("chatThreadDeleted"===D){O=k;var s=JSON.parse(unescape(O.deletedBy)),l={id:h(s.participantId),displayName:s.displayName};return{threadId:O.threadId,deletedOn:new Date(O.deleteTime),deletedBy:l,version:O.version}}if("participantsAdded"===D){O=k;var a=JSON.parse(unescape(O.addedBy)),f=JSON.parse(unescape(O.participantsAdded)),M={id:h(a.participantId),displayName:a.displayName};return ge=f.map(function(J){return{id:h(J.participantId),displayName:J.displayName,shareHistoryTime:new Date(J.shareHistoryTime)}}),{threadId:O.threadId,addedOn:new Date(O.time),addedBy:M,version:O.version,participantsAdded:ge}}if("participantsRemoved"===D){O=k;var A=JSON.parse(unescape(O.removedBy)),d=JSON.parse(unescape(O.participantsRemoved)),i={id:h(A.participantId),displayName:A.displayName};return ge=d.map(function(J){return{id:h(J.participantId),displayName:J.displayName,shareHistoryTime:new Date(J.shareHistoryTime)}}),{threadId:O.threadId,removedOn:new Date(O.time),removedBy:i,version:O.version,participantsRemoved:ge}}return null};L.toLogProvider=function(D){return{log:function(){for(var k=[],O=0;O<arguments.length;O++)k[O]=arguments[O];return D.info(k)},warn:function(){for(var k=[],O=0;O<arguments.length;O++)k[O]=arguments[O];return D.warning(k)},error:function(){for(var k=[],O=0;O<arguments.length;O++)k[O]=arguments[O];return D.error(k)},debug:function(){for(var k=[],O=0;O<arguments.length;O++)k[O]=arguments[O];return D.verbose(k)},info:function(){for(var k=[],O=0;O<arguments.length;O++)k[O]=arguments[O];return D.verbose(k)}}},L.toTelemetrySender=function(D){return{logEvent:function(k){return D.info(k)}}};var h=function(D){return D.startsWith(y)?{kind:"microsoftTeamsUser",rawId:D,microsoftTeamsUserId:D.substring(y.length),isAnonymous:!1,cloud:"public"}:D.startsWith(x)?{kind:"microsoftTeamsUser",rawId:D,microsoftTeamsUserId:D.substring(x.length),isAnonymous:!1,cloud:"dod"}:D.startsWith(u)?{kind:"microsoftTeamsUser",rawId:D,microsoftTeamsUserId:D.substring(u.length),isAnonymous:!1,cloud:"gcch"}:D.startsWith(g)?{kind:"microsoftTeamsUser",rawId:D,microsoftTeamsUserId:D.substring(g.length),isAnonymous:!0}:D.startsWith("4:")?{kind:"phoneNumber",rawId:D,phoneNumber:D.substring("4:".length)}:D.startsWith("8:acs:")||D.startsWith("8:spool:")?{kind:"communicationUser",communicationUserId:D}:{kind:"unknown",id:D}},_=function(D){return null==D||""===D||"null"===D?{}:JSON.parse(D)};function b(D){return coreHttp.isNode?Buffer.from(D,"base64").toString():atob(D)}function I(D){switch(D.substring(0,D.indexOf(":"))){case constants.CloudPrefix.OrgId:case constants.CloudPrefix.Acs:case constants.CloudPrefix.Spool:return constants.CloudType.Public;case constants.CloudPrefix.GccHigh:case constants.CloudPrefix.GccHighAcs:return constants.CloudType.GccHigh;case constants.CloudPrefix.Dod:case constants.CloudPrefix.DodAcs:return constants.CloudType.Dod;default:return constants.CloudType.Public}}L.base64decode=b,L.getCloudTypeFromCredential=function(D){return T(void 0,void 0,void 0,function(){var k;return p(this,function(U){switch(U.label){case 0:return[4,D.getToken()];case 1:return k=U.sent(),[2,I(function(D){var O=(null==D?void 0:D.split("."))[1];if(void 0===O)throw new Error("Invalid token");return O=O.replace(/-/g,"+").replace(/_/g,"/"),JSON.parse(decodeURIComponent(escape(b(O))))}(null==k?void 0:k.token).skypeid)]}})})}});unwrapExports(TrouterUtils);var TrouterUtils_1=TrouterUtils.toMessageHandler,TrouterUtils_2=TrouterUtils.toLogProvider,TrouterUtils_3=TrouterUtils.toTelemetrySender,TrouterUtils_4=TrouterUtils.base64decode,TrouterUtils_5=TrouterUtils.getCloudTypeFromCredential,TrouterSettings=createCommonjsModule(function(Y,L){var T=commonjsGlobal&&commonjsGlobal.__awaiter||function(C,P,E,v){return new(E||(E=Promise))(function(_,b){function w(k){try{D(v.next(k))}catch(O){b(O)}}function I(k){try{D(v.throw(k))}catch(O){b(O)}}function D(k){k.done?_(k.value):function(_){return _ instanceof E?_:new E(function(b){b(_)})}(k.value).then(w,I)}D((v=v.apply(C,P||[])).next())})},p=commonjsGlobal&&commonjsGlobal.__generator||function(C,P){var v,h,_,b,E={label:0,sent:function(){if(1&_[0])throw _[1];return _[1]},trys:[],ops:[]};return b={next:w(0),throw:w(1),return:w(2)},"function"==typeof Symbol&&(b[Symbol.iterator]=function(){return this}),b;function w(D){return function(k){return function(D){if(v)throw new TypeError("Generator is already executing.");for(;E;)try{if(v=1,h&&(_=2&D[0]?h.return:D[0]?h.throw||((_=h.return)&&_.call(h),0):h.next)&&!(_=_.call(h,D[1])).done)return _;switch(h=0,_&&(D=[2&D[0],_.value]),D[0]){case 0:case 1:_=D;break;case 4:return E.label++,{value:D[1],done:!1};case 5:E.label++,h=D[1],D=[0];continue;case 7:D=E.ops.pop(),E.trys.pop();continue;default:if(!(_=(_=E.trys).length>0&&_[_.length-1])&&(6===D[0]||2===D[0])){E=0;continue}if(3===D[0]&&(!_||D[1]>_[0]&&D[1]<_[3])){E.label=D[1];break}if(6===D[0]&&E.label<_[1]){E.label=_[1],_=D;break}if(_&&E.label<_[2]){E.label=_[2],E.ops.push(D);break}_[2]&&E.ops.pop(),E.trys.pop();continue}D=P.call(C,E)}catch(k){D=[6,k],h=0}finally{v=_=0}if(5&D[0])throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}([D,k])}}};L.__esModule=!0;var N={version:"1.0.0",registrationId:"",sessionId:"",pnhAppId:"AcsWeb",pnhTemplate:"AcsWeb_Chat_1.2",platform:"SPOOL",platformUIVersion:"0.0.0",environment:"",productName:"acs-chat-web",trouterServiceUrl:constants.PUBLIC_TROUTER_SERVICE_URL,registrarServiceUrl:constants.PUBLIC_REGISTRAR_SERVICE_URL,registrarRefreshTimeoutInMs:35e4,timeoutOptions:{connectionTimeoutMs:2e4,fetchTimeoutMs:1e4,pingTimeoutMs:4e4,pongTimeoutMs:5e3,maxBackoffMs:5e4,requestTimeoutMs:5e3},maxRegistrationTimeInMs:72e5},y=function(){var C=N;return C.registrationId=coreHttp.generateUuid(),C.sessionId=coreHttp.generateUuid(),C};L.createSettings=function(C,P){return T(void 0,void 0,void 0,function(){var E,v,h;return p(this,function(_){switch(_.label){case 0:return"INT"!==(null==P?void 0:P.environment)?[3,1]:(E=function(){var C=y();return C.pnhAppId="cns-e2e-test",C.pnhTemplate="cns-e2e-test:1.2",C.registrarServiceUrl=constants.INT_REGISTRAR_SERVICE_URL,C.trouterServiceUrl=constants.INT_TROUTER_SERVICE_URL,C}(),[3,3]);case 1:return[4,TrouterUtils.getCloudTypeFromCredential(C)];case 2:v=_.sent(),E=v===constants.CloudType.GccHigh?function(){var C=y();return C.registrarServiceUrl=constants.GCCHIGH_REGISTRAR_SERVICE_URL,C.trouterServiceUrl=constants.GCCHIGH_TROUTER_SERVICE_URL,C}():v===constants.CloudType.Dod?function(){var C=y();return C.registrarServiceUrl=constants.DOD_REGISTRAR_SERVICE_URL,C.trouterServiceUrl=constants.DOD_TROUTER_SERVICE_URL,C}():y(),_.label=3;case 3:return E.maxRegistrationTimeInMs=null!==(h=null==P?void 0:P.registrationTimeInMs)&&void 0!==h?h:N.maxRegistrationTimeInMs,[2,E]}})})},L.defaultTelemetrySettings={enabled:!1}});unwrapExports(TrouterSettings);var TrouterSettings_1=TrouterSettings.createSettings,TrouterSettings_2=TrouterSettings.defaultTelemetrySettings,SignalingClient=createCommonjsModule(function(Y,L){var x,T=commonjsGlobal&&commonjsGlobal.__awaiter||function(x,u,g,C){return new(g||(g=Promise))(function(E,v){function h(w){try{b(C.next(w))}catch(I){v(I)}}function _(w){try{b(C.throw(w))}catch(I){v(I)}}function b(w){w.done?E(w.value):function(E){return E instanceof g?E:new g(function(v){v(E)})}(w.value).then(h,_)}b((C=C.apply(x,u||[])).next())})},p=commonjsGlobal&&commonjsGlobal.__generator||function(x,u){var C,P,E,v,g={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return v={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(v[Symbol.iterator]=function(){return this}),v;function h(b){return function(w){return function(b){if(C)throw new TypeError("Generator is already executing.");for(;g;)try{if(C=1,P&&(E=2&b[0]?P.return:b[0]?P.throw||((E=P.return)&&E.call(P),0):P.next)&&!(E=E.call(P,b[1])).done)return E;switch(P=0,E&&(b=[2&b[0],E.value]),b[0]){case 0:case 1:E=b;break;case 4:return g.label++,{value:b[1],done:!1};case 5:g.label++,P=b[1],b=[0];continue;case 7:b=g.ops.pop(),g.trys.pop();continue;default:if(!(E=(E=g.trys).length>0&&E[E.length-1])&&(6===b[0]||2===b[0])){g=0;continue}if(3===b[0]&&(!E||b[1]>E[0]&&b[1]<E[3])){g.label=b[1];break}if(6===b[0]&&g.label<E[1]){g.label=E[1],E=b;break}if(E&&g.label<E[2]){g.label=E[2],g.ops.push(b);break}E[2]&&g.ops.pop(),g.trys.pop();continue}b=u.call(x,g)}catch(w){b=[6,w],P=0}finally{C=E=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([b,w])}}};L.__esModule=!0,(x=L.ConnectionState||(L.ConnectionState={}))[x.Unknown=0]="Unknown",x[x.Connected=2]="Connected",x[x.Disconnected=3]="Disconnected",x[x.Switching=9]="Switching";var y=function(){function x(u,g,C){this.credential=u,this.logger=g,this.options=C,this.stateChangedListener=null,this.tokenFetchRetries=0,this.trouter=tstrouter.createTrouterService(TrouterUtils.toLogProvider(g))}return x.prototype.start=function(){return T(this,void 0,void 0,function(){var u,g,C=this;return p(this,function(P){switch(P.label){case 0:return void 0!==this.config?[3,2]:(u=this,g={},[4,TrouterSettings.createSettings(this.credential,this.options)]);case 1:u.config=(g.trouterSettings=P.sent(),g.skypeTokenProvider=function(E){return T(C,void 0,void 0,function(){var v,h;return p(this,function(_){switch(_.label){case 0:return E?(this.tokenFetchRetries+=1,this.tokenFetchRetries>constants.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES?[4,this.stop(!0)]:[3,2]):[3,3];case 1:throw _.sent(),new Error("Access token is expired and failed to fetch a valid one after "+constants.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES+" retries");case 2:return[3,4];case 3:this.tokenFetchRetries=0,_.label=4;case 4:return h=(v=Promise).resolve,[4,this.credential.getToken()];case 5:return[2,h.apply(v,[_.sent().token])]}})})},g.telemetryConfig={eventLogger:TrouterUtils.toTelemetrySender(this.logger),settings:TrouterSettings.defaultTelemetrySettings},g),P.label=2;case 2:return this.trouter.start(this.config),this.trouter.setUserActivityState(tstrouter.UserActivityState.Active),[2]}})})},x.prototype.stop=function(u){return T(this,void 0,void 0,function(){return p(this,function(g){return this.trouter.offStateChanged(this.stateChangedListener),this.trouter.clearMessageHandlers(),this.trouter.stop(null!=u?u:this.tokenFetchRetries>constants.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES),[2]})})},x.prototype.on=function(u,g){if("connectionChanged"===u)return this.trouter.offStateChanged(this.stateChangedListener),this.stateChangedListener=function(C,P){return g(C)},void this.trouter.onStateChanged(this.stateChangedListener);this.trouter.registerMessageHandler(TrouterUtils.toMessageHandler(u,g))},x}();L.CommunicationSignalingClient=y});unwrapExports(SignalingClient);var SignalingClient_1=SignalingClient.ConnectionState,SignalingClient_2=SignalingClient.CommunicationSignalingClient,src=createCommonjsModule(function(Y,L){L.__esModule=!0,function(p){for(var N in p)L.hasOwnProperty(N)||(L[N]=p[N])}(SignalingClient)}),index=unwrapExports(src);module.exports=index},434:(Y,L,T)=>{"use strict";function p(N){return N&&"function"==typeof N.getToken&&(void 0===N.signRequest||N.getToken.length>0)}T.d(L,{c:()=>p})},1138:(Y,L,T)=>{"use strict";T.d(L,{M:()=>p});var p=(()=>{return(N=p||(p={}))[N.OFF=0]="OFF",N[N.ERROR=1]="ERROR",N[N.WARNING=2]="WARNING",N[N.INFO=3]="INFO",p;var N})()},8003:(Y,L,T)=>{"use strict";function p(me){return me.toLowerCase()}function N(me){if(me&&"object"==typeof me){const Q=me;if("function"==typeof Q.rawHeaders&&"function"==typeof Q.clone&&"function"==typeof Q.get&&"function"==typeof Q.set&&"function"==typeof Q.contains&&"function"==typeof Q.remove&&"function"==typeof Q.headersArray&&"function"==typeof Q.headerValues&&"function"==typeof Q.headerNames&&"function"==typeof Q.toJson)return!0}return!1}T.r(L),T.d(L,{AccessTokenRefresher:()=>Fi,ApiKeyCredentials:()=>ws,BaseRequestPolicy:()=>Te.U,BasicAuthenticationCredentials:()=>Aa,Constants:()=>dn.g,DefaultHttpClient:()=>ue,ExpiringAccessTokenCache:()=>so,HttpHeaders:()=>y,HttpPipelineLogLevel:()=>Z.M,MapperType:()=>m,QueryCollectionFormat:()=>Ur,RequestPolicyOptions:()=>Te._,RestError:()=>Ee,RetryMode:()=>$t,Serializer:()=>E,ServiceClient:()=>Tn,TopicCredentials:()=>ao,URLBuilder:()=>ce.UK,URLQuery:()=>ce.$4,WebResource:()=>z,XML_ATTRKEY:()=>P.c,XML_CHARKEY:()=>P.I,applyMixins:()=>C.ef,bearerTokenAuthenticationPolicy:()=>$r.v,createPipelineFromOptions:()=>Wn,createSpanFunction:()=>ei,delay:()=>pn.g,deserializationPolicy:()=>Ge,deserializeResponseBody:()=>Ln,disableResponseDecompressionPolicy:()=>xa,encodeUri:()=>C.Hh,executePromisesSequentially:()=>C.Zf,exponentialRetryPolicy:()=>Mn,flattenResponse:()=>Xr,generateClientRequestIdPolicy:()=>br,generateUuid:()=>C.Rl,getDefaultProxySettings:()=>vs,getDefaultUserAgentValue:()=>Co,isDuration:()=>C._9,isNode:()=>C.UG,isTokenCredential:()=>Oi.c,isValidUuid:()=>C.TP,keepAlivePolicy:()=>ze,logPolicy:()=>xt,operationOptionsToRequestOptionsBase:()=>Oe,parseXML:()=>Ve,promiseToCallback:()=>C._Q,promiseToServiceCallback:()=>C.yj,proxyPolicy:()=>cn,redirectPolicy:()=>Qt,serializeObject:()=>d,signingPolicy:()=>ys,stringifyXML:()=>st,stripRequest:()=>C.Fl,stripResponse:()=>C.eg,systemErrorRetryPolicy:()=>qo,throttlingRetryPolicy:()=>Eo,tracingPolicy:()=>It,userAgentPolicy:()=>Ut});class y{constructor(Q){if(this._headersMap={},Q)for(const ne in Q)this.set(ne,Q[ne])}set(Q,ne){this._headersMap[p(Q)]={name:Q,value:ne.toString()}}get(Q){const ne=this._headersMap[p(Q)];return ne?ne.value:void 0}contains(Q){return!!this._headersMap[p(Q)]}remove(Q){const ne=this.contains(Q);return delete this._headersMap[p(Q)],ne}rawHeaders(){return this.toJson({preserveCase:!0})}headersArray(){const Q=[];for(const ne in this._headersMap)Q.push(this._headersMap[ne]);return Q}headerNames(){const Q=[],ne=this.headersArray();for(let be=0;be<ne.length;++be)Q.push(ne[be].name);return Q}headerValues(){const Q=[],ne=this.headersArray();for(let be=0;be<ne.length;++be)Q.push(ne[be].value);return Q}toJson(Q={}){const ne={};if(Q.preserveCase)for(const be in this._headersMap){const xe=this._headersMap[be];ne[xe.name]=xe.value}else for(const be in this._headersMap){const xe=this._headersMap[be];ne[p(xe.name)]=xe.value}return ne}toString(){return JSON.stringify(this.toJson({preserveCase:!0}))}clone(){const Q={};for(const ne in this._headersMap){const be=this._headersMap[ne];Q[be.name]=be.value}return new y(Q)}}function u(me){let Q="";for(let ne=0;ne<me.length;ne++)Q+=String.fromCharCode(me[ne]);return btoa(Q)}function g(me){const Q=atob(me),ne=new Uint8Array(Q.length);for(let be=0;be<Q.length;be++)ne[be]=Q.charCodeAt(be);return ne}var C=T(7694),P=T(4510);class E{constructor(Q={},ne){this.modelMappers=Q,this.isXML=ne}validateConstraints(Q,ne,be){const xe=(He,et)=>{throw new Error(`"${be}" with value "${ne}" should satisfy the constraint "${He}": ${et}.`)};if(Q.constraints&&null!=ne){const He=ne,{ExclusiveMaximum:et,ExclusiveMinimum:pt,InclusiveMaximum:bt,InclusiveMinimum:vt,MaxItems:wt,MaxLength:Ot,MinItems:Dt,MinLength:At,MultipleOf:gn,Pattern:fn,UniqueItems:jt}=Q.constraints;null!=et&&He>=et&&xe("ExclusiveMaximum",et),null!=pt&&He<=pt&&xe("ExclusiveMinimum",pt),null!=bt&&He>bt&&xe("InclusiveMaximum",bt),null!=vt&&He<vt&&xe("InclusiveMinimum",vt);const Ft=ne;if(null!=wt&&Ft.length>wt&&xe("MaxItems",wt),null!=Ot&&Ft.length>Ot&&xe("MaxLength",Ot),null!=Dt&&Ft.length<Dt&&xe("MinItems",Dt),null!=At&&Ft.length<At&&xe("MinLength",At),null!=gn&&He%gn!=0&&xe("MultipleOf",gn),fn){const Bn="string"==typeof fn?new RegExp(fn):fn;("string"!=typeof ne||null===ne.match(Bn))&&xe("Pattern",fn)}jt&&Ft.some((Bn,pr,nr)=>nr.indexOf(Bn)!==pr)&&xe("UniqueItems",jt)}}serialize(Q,ne,be,xe={}){var He,et,pt;const bt={rootName:null!==(He=xe.rootName)&&void 0!==He?He:"",includeRoot:null!==(et=xe.includeRoot)&&void 0!==et&&et,xmlCharKey:null!==(pt=xe.xmlCharKey)&&void 0!==pt?pt:P.I};let vt={};const wt=Q.type.name;be||(be=Q.serializedName),null!==wt.match(/^Sequence$/i)&&(vt=[]),Q.isConstant&&(ne=Q.defaultValue);const{required:Ot,nullable:Dt}=Q;if(Ot&&Dt&&void 0===ne)throw new Error(`${be} cannot be undefined.`);if(Ot&&!Dt&&null==ne)throw new Error(`${be} cannot be null or undefined.`);if(!Ot&&!1===Dt&&null===ne)throw new Error(`${be} cannot be null.`);return null==ne||null!==wt.match(/^any$/i)?vt=ne:null!==wt.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)?vt=function(me,Q,ne){if(null!=ne)if(null!==me.match(/^Number$/i)){if("number"!=typeof ne)throw new Error(`${Q} with value ${ne} must be of type number.`)}else if(null!==me.match(/^String$/i)){if("string"!=typeof ne.valueOf())throw new Error(`${Q} with value "${ne}" must be of type string.`)}else if(null!==me.match(/^Uuid$/i)){if("string"!=typeof ne.valueOf()||!C.TP(ne))throw new Error(`${Q} with value "${ne}" must be of type string and a valid uuid.`)}else if(null!==me.match(/^Boolean$/i)){if("boolean"!=typeof ne)throw new Error(`${Q} with value ${ne} must be of type boolean.`)}else if(null!==me.match(/^Stream$/i)){const be=typeof ne;if(!("string"===be||"function"===be||ne instanceof ArrayBuffer||ArrayBuffer.isView(ne)||("function"==typeof Blob||"object"==typeof Blob)&&ne instanceof Blob))throw new Error(`${Q} must be a string, Blob, ArrayBuffer, ArrayBufferView, or a function returning NodeJS.ReadableStream.`)}return ne}(wt,be,ne):null!==wt.match(/^Enum$/i)?vt=function(me,Q,ne){if(!Q)throw new Error(`Please provide a set of allowedValues to validate ${me} as an Enum Type.`);if(!Q.some(xe=>"string"==typeof xe.valueOf()?xe.toLowerCase()===ne.toLowerCase():xe===ne))throw new Error(`${ne} is not a valid value for ${me}. The valid values are: ${JSON.stringify(Q)}.`);return ne}(be,Q.type.allowedValues,ne):null!==wt.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)?vt=function(me,Q,ne){if(null!=Q)if(null!==me.match(/^Date$/i)){if(!(Q instanceof Date||"string"==typeof Q.valueOf()&&!isNaN(Date.parse(Q))))throw new Error(`${ne} must be an instanceof Date or a string in ISO8601 format.`);Q=Q instanceof Date?Q.toISOString().substring(0,10):new Date(Q).toISOString().substring(0,10)}else if(null!==me.match(/^DateTime$/i)){if(!(Q instanceof Date||"string"==typeof Q.valueOf()&&!isNaN(Date.parse(Q))))throw new Error(`${ne} must be an instanceof Date or a string in ISO8601 format.`);Q=Q instanceof Date?Q.toISOString():new Date(Q).toISOString()}else if(null!==me.match(/^DateTimeRfc1123$/i)){if(!(Q instanceof Date||"string"==typeof Q.valueOf()&&!isNaN(Date.parse(Q))))throw new Error(`${ne} must be an instanceof Date or a string in RFC-1123 format.`);Q=Q instanceof Date?Q.toUTCString():new Date(Q).toUTCString()}else if(null!==me.match(/^UnixTime$/i)){if(!(Q instanceof Date||"string"==typeof Q.valueOf()&&!isNaN(Date.parse(Q))))throw new Error(`${ne} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);Q=function(me){if(me)return"string"==typeof me.valueOf()&&(me=new Date(me)),Math.floor(me.getTime()/1e3)}(Q)}else if(null!==me.match(/^TimeSpan$/i)&&!C._9(Q))throw new Error(`${ne} must be a string in ISO 8601 format. Instead was "${Q}".`);return Q}(wt,ne,be):null!==wt.match(/^ByteArray$/i)?vt=function(me,Q){let ne="";if(null!=Q){if(!(Q instanceof Uint8Array))throw new Error(`${me} must be of type Uint8Array.`);ne=u(Q)}return ne}(be,ne):null!==wt.match(/^Base64Url$/i)?vt=function(me,Q){let ne="";if(null!=Q){if(!(Q instanceof Uint8Array))throw new Error(`${me} must be of type Uint8Array.`);ne=function(me){if(me){if(!(me instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");return function(me,Q){let ne=me.length;for(;ne-1>=0&&"="===me[ne-1];)--ne;return me.substr(0,ne)}(u(me)).replace(/\+/g,"-").replace(/\//g,"_")}}(Q)||""}return ne}(be,ne):null!==wt.match(/^Sequence$/i)?vt=function(me,Q,ne,be,xe,He){if(!Array.isArray(ne))throw new Error(`${be} must be of type Array.`);const et=Q.type.element;if(!et||"object"!=typeof et)throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${be}.`);const pt=[];for(let bt=0;bt<ne.length;bt++){const vt=me.serialize(et,ne[bt],be,He);if(xe&&et.xmlNamespace){const wt=et.xmlNamespacePrefix?`xmlns:${et.xmlNamespacePrefix}`:"xmlns";"Composite"===et.type.name?(pt[bt]=Object.assign({},vt),pt[bt][P.c]={[wt]:et.xmlNamespace}):(pt[bt]={},pt[bt][He.xmlCharKey]=vt,pt[bt][P.c]={[wt]:et.xmlNamespace})}else pt[bt]=vt}return pt}(this,Q,ne,be,Boolean(this.isXML),bt):null!==wt.match(/^Dictionary$/i)?vt=function(me,Q,ne,be,xe,He){if("object"!=typeof ne)throw new Error(`${be} must be of type object.`);const et=Q.type.value;if(!et||"object"!=typeof et)throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${be}.`);const pt={};for(const bt of Object.keys(ne)){const vt=me.serialize(et,ne[bt],be,He);pt[bt]=R(et,vt,xe,He)}if(xe&&Q.xmlNamespace){const vt=pt;return vt[P.c]={[Q.xmlNamespacePrefix?`xmlns:${Q.xmlNamespacePrefix}`:"xmlns"]:Q.xmlNamespace},vt}return pt}(this,Q,ne,be,Boolean(this.isXML),bt):null!==wt.match(/^Composite$/i)&&(vt=function(me,Q,ne,be,xe,He){if(M(me,Q)&&(Q=f(me,Q,ne,"clientName")),null!=ne){const et={},pt=K(me,Q,be);for(const vt of Object.keys(pt)){const wt=pt[vt];if(wt.readOnly)continue;let Ot,Dt=et;if(me.isXML)Ot=wt.xmlIsWrapped?wt.xmlName:wt.xmlElementName||wt.xmlName;else{const At=b(wt.serializedName);Ot=At.pop();for(const gn of At)null==Dt[gn]&&(null!=ne[vt]||void 0!==wt.defaultValue)&&(Dt[gn]={}),Dt=Dt[gn]}if(null!=Dt){if(xe&&Q.xmlNamespace){const Ft=Q.xmlNamespacePrefix?`xmlns:${Q.xmlNamespacePrefix}`:"xmlns";Dt[P.c]=Object.assign(Object.assign({},Dt[P.c]),{[Ft]:Q.xmlNamespace})}const At=""!==wt.serializedName?be+"."+wt.serializedName:be;let gn=ne[vt];const fn=M(me,Q);fn&&fn.clientName===vt&&null==gn&&(gn=Q.serializedName);const jt=me.serialize(wt,gn,At,He);if(void 0!==jt&&null!=Ot){const Ft=R(wt,jt,xe,He);xe&&wt.xmlIsAttribute?(Dt[P.c]=Dt[P.c]||{},Dt[P.c][Ot]=jt):Dt[Ot]=xe&&wt.xmlIsWrapped?{[wt.xmlElementName]:Ft}:Ft}}}const bt=function(me,Q,ne){const be=Q.type.additionalProperties;if(!be&&Q.type.className){const xe=X(me,Q,ne);return null==xe?void 0:xe.type.additionalProperties}return be}(me,Q,be);if(bt){const vt=Object.keys(pt);for(const wt in ne)vt.every(Dt=>Dt!==wt)&&(et[wt]=me.serialize(bt,ne[wt],be+'["'+wt+'"]',He))}return et}return ne}(this,Q,ne,be,Boolean(this.isXML),bt)),vt}deserialize(Q,ne,be,xe={}){var He,et,pt;const bt={rootName:null!==(He=xe.rootName)&&void 0!==He?He:"",includeRoot:null!==(et=xe.includeRoot)&&void 0!==et&&et,xmlCharKey:null!==(pt=xe.xmlCharKey)&&void 0!==pt?pt:P.I};if(null==ne)return this.isXML&&"Sequence"===Q.type.name&&!Q.xmlIsWrapped&&(ne=[]),void 0!==Q.defaultValue&&(ne=Q.defaultValue),ne;let vt;const wt=Q.type.name;if(be||(be=Q.serializedName),null!==wt.match(/^Composite$/i))vt=function(me,Q,ne,be,xe){var He,et;const pt=null!==(He=xe.xmlCharKey)&&void 0!==He?He:P.I;M(me,Q)&&(Q=f(me,Q,ne,"serializedName"));const bt=K(me,Q,be);let vt={};const wt=[];for(const Dt of Object.keys(bt)){const At=bt[Dt],gn=b(bt[Dt].serializedName);wt.push(gn[0]);const{serializedName:fn,xmlName:jt,xmlElementName:Ft}=At;let Bn=be;""!==fn&&void 0!==fn&&(Bn=be+"."+fn);const pr=At.headerCollectionPrefix;if(pr){const nr={};for(const $n of Object.keys(ne))$n.startsWith(pr)&&(nr[$n.substring(pr.length)]=me.deserialize(At.type.value,ne[$n],Bn,xe)),wt.push($n);vt[Dt]=nr}else if(me.isXML)if(At.xmlIsAttribute&&ne[P.c])vt[Dt]=me.deserialize(At,ne[P.c][jt],Bn,xe);else if(At.xmlIsMsText)void 0!==ne[pt]?vt[Dt]=ne[pt]:"string"==typeof ne&&(vt[Dt]=ne);else{const nr=Ft||jt||fn;if(At.xmlIsWrapped){const $n=ne[jt],Bi=null!==(et=null==$n?void 0:$n[Ft])&&void 0!==et?et:[];vt[Dt]=me.deserialize(At,Bi,Bn,xe)}else vt[Dt]=me.deserialize(At,ne[nr],Bn,xe)}else{let nr,$n=ne;for(const vi of gn){if(!$n)break;$n=$n[vi]}nr=$n;const Bi=Q.type.polymorphicDiscriminator;let uo;if(Bi&&Dt===Bi.clientName&&null==nr&&(nr=Q.serializedName),Array.isArray(ne[Dt])&&""===bt[Dt].serializedName){nr=ne[Dt];const vi=me.deserialize(At,nr,Bn,xe);for(const[Da,Zu]of Object.entries(vt))Object.prototype.hasOwnProperty.call(vi,Da)||(vi[Da]=Zu);vt=vi}else(void 0!==nr||void 0!==At.defaultValue)&&(uo=me.deserialize(At,nr,Bn,xe),vt[Dt]=uo)}}const Ot=Q.type.additionalProperties;if(Ot){const Dt=At=>{for(const gn in bt)if(b(bt[gn].serializedName)[0]===At)return!1;return!0};for(const At in ne)Dt(At)&&(vt[At]=me.deserialize(Ot,ne[At],be+'["'+At+'"]',xe))}else if(ne)for(const Dt of Object.keys(ne))void 0===vt[Dt]&&!wt.includes(Dt)&&!r(Dt,xe)&&(vt[Dt]=ne[Dt]);return vt}(this,Q,ne,be,bt);else{if(this.isXML){const Ot=bt.xmlCharKey,Dt=ne;null!=Dt[P.c]&&null!=Dt[Ot]&&(ne=Dt[Ot])}null!==wt.match(/^Number$/i)?(vt=parseFloat(ne),isNaN(vt)&&(vt=ne)):null!==wt.match(/^Boolean$/i)?vt="true"===ne||"false"!==ne&&ne:null!==wt.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)?vt=ne:null!==wt.match(/^(Date|DateTime|DateTimeRfc1123)$/i)?vt=new Date(ne):null!==wt.match(/^UnixTime$/i)?vt=function(me){if(me)return new Date(1e3*me)}(ne):null!==wt.match(/^ByteArray$/i)?vt=g(ne):null!==wt.match(/^Base64Url$/i)?vt=function(me){if(me){if(me&&"string"!=typeof me.valueOf())throw new Error("Please provide an input of type string for converting to Uint8Array");return g(me=me.replace(/-/g,"+").replace(/_/g,"/"))}}(ne):null!==wt.match(/^Sequence$/i)?vt=function(me,Q,ne,be,xe){const He=Q.type.element;if(!He||"object"!=typeof He)throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${be}`);if(ne){Array.isArray(ne)||(ne=[ne]);const et=[];for(let pt=0;pt<ne.length;pt++)et[pt]=me.deserialize(He,ne[pt],`${be}[${pt}]`,xe);return et}return ne}(this,Q,ne,be,bt):null!==wt.match(/^Dictionary$/i)&&(vt=function(me,Q,ne,be,xe){const He=Q.type.value;if(!He||"object"!=typeof He)throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${be}`);if(ne){const et={};for(const pt of Object.keys(ne))et[pt]=me.deserialize(He,ne[pt],be,xe);return et}return ne}(this,Q,ne,be,bt))}return Q.isConstant&&(vt=Q.defaultValue),vt}}function b(me){const Q=[];let ne="";if(me){const be=me.split(".");for(const xe of be)"\\"===xe.charAt(xe.length-1)?ne+=xe.substr(0,xe.length-1)+".":(ne+=xe,Q.push(ne),ne="")}return Q}function X(me,Q,ne){const be=Q.type.className;if(!be)throw new Error(`Class name for model "${ne}" is not provided in the mapper "${JSON.stringify(Q,void 0,2)}".`);return me.modelMappers[be]}function K(me,Q,ne){let be=Q.type.modelProperties;if(!be){const xe=X(me,Q,ne);if(!xe)throw new Error(`mapper() cannot be null or undefined for model "${Q.type.className}".`);if(be=null==xe?void 0:xe.type.modelProperties,!be)throw new Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(xe)}" of type "${Q.type.className}" for object "${ne}".`)}return be}function R(me,Q,ne,be){if(!ne||!me.xmlNamespace)return Q;const He={[me.xmlNamespacePrefix?`xmlns:${me.xmlNamespacePrefix}`:"xmlns"]:me.xmlNamespace};if(["Composite"].includes(me.type.name)){if(Q[P.c])return Q;{const pt=Object.assign({},Q);return pt[P.c]=He,pt}}const et={};return et[be.xmlCharKey]=Q,et[P.c]=He,et}function r(me,Q){return[P.c,Q.xmlCharKey].includes(me)}function f(me,Q,ne,be){const xe=M(me,Q);if(xe){const He=xe[be];if(null!=He){const et=ne[He];if(null!=et){const pt=Q.type.uberParent||Q.type.className,vt=me.modelMappers.discriminators[et===pt?et:pt+"."+et];vt&&(Q=vt)}}}return Q}function M(me,Q){return Q.type.polymorphicDiscriminator||A(me,Q.type.uberParent)||A(me,Q.type.className)}function A(me,Q){return Q&&me.modelMappers[Q]&&me.modelMappers[Q].type.polymorphicDiscriminator}function d(me){const Q=me;if(null!=me){if(me instanceof Uint8Array)return u(me);if(me instanceof Date)return me.toISOString();if(Array.isArray(me)){const ne=[];for(let be=0;be<me.length;be++)ne.push(d(me[be]));return ne}if("object"==typeof me){const ne={};for(const be in me)ne[be]=d(Q[be]);return ne}return me}}const m=function(me){const Q={};for(const ne of["Base64Url","Boolean","ByteArray","Composite","Date","DateTime","DateTimeRfc1123","Dictionary","Enum","Number","Object","Sequence","String","Stream","TimeSpan","UnixTime"])Q[ne]=ne;return Q}();class z{constructor(Q,ne,be,xe,He,et,pt,bt,vt,wt,Ot,Dt,At,gn,fn){this.streamResponseBody=et,this.streamResponseStatusCodes=fn,this.url=Q||"",this.method=ne||"GET",this.headers=N(He)?He:new y(He),this.body=be,this.query=xe,this.formData=void 0,this.withCredentials=pt||!1,this.abortSignal=bt,this.timeout=vt||0,this.onUploadProgress=wt,this.onDownloadProgress=Ot,this.proxySettings=Dt,this.keepAlive=At,this.decompressResponse=gn,this.requestId=this.headers.get("x-ms-client-request-id")||(0,C.Rl)()}validateRequestProperties(){if(!this.method)throw new Error("WebResource.method is required.");if(!this.url)throw new Error("WebResource.url is required.")}prepare(Q){if(!Q)throw new Error("options object is required");if(null==Q.method||"string"!=typeof Q.method.valueOf())throw new Error("options.method must be a string.");if(Q.url&&Q.pathTemplate)throw new Error("options.url and options.pathTemplate are mutually exclusive. Please provide exactly one of them.");if(!(null!=Q.pathTemplate&&"string"==typeof Q.pathTemplate.valueOf()||null!=Q.url&&"string"==typeof Q.url.valueOf()))throw new Error("Please provide exactly one of options.pathTemplate or options.url.");if(Q.url){if("string"!=typeof Q.url)throw new Error('options.url must be of type "string".');this.url=Q.url}if(Q.method){const ne=["GET","PUT","HEAD","DELETE","OPTIONS","POST","PATCH","TRACE"];if(-1===ne.indexOf(Q.method.toUpperCase()))throw new Error('The provided method "'+Q.method+'" is invalid. Supported HTTP methods are: '+JSON.stringify(ne))}if(this.method=Q.method.toUpperCase(),Q.pathTemplate){const{pathTemplate:ne,pathParameters:be}=Q;if("string"!=typeof ne)throw new Error('options.pathTemplate must be of type "string".');Q.baseUrl||(Q.baseUrl="https://management.azure.com");const xe=Q.baseUrl;let He=xe+(xe.endsWith("/")?"":"/")+(ne.startsWith("/")?ne.slice(1):ne);const et=He.match(/({[\w-]*\s*[\w-]*})/gi);if(et&&et.length){if(!be)throw new Error(`pathTemplate: ${ne} has been provided. Hence, options.pathParameters must also be provided.`);et.forEach(function(pt){const bt=pt.slice(1,-1),vt=be[bt];if(null==vt||"string"!=typeof vt&&"object"!=typeof vt){const wt=JSON.stringify(be,void 0,2);throw new Error(`pathTemplate: ${ne} contains the path parameter ${bt} however, it is not present in parameters: ${wt}.The value of the path parameter can either be a "string" of the form { ${bt}: "some sample value" } or it can be an "object" of the form { "${bt}": { value: "some sample value", skipUrlEncoding: true } }.`)}if("string"==typeof vt.valueOf()&&(He=He.replace(pt,encodeURIComponent(vt))),"object"==typeof vt.valueOf()){if(!vt.value)throw new Error(`options.pathParameters[${bt}] is of type "object" but it does not contain a "value" property.`);He=He.replace(pt,vt.skipUrlEncoding?vt.value:encodeURIComponent(vt.value))}})}this.url=He}if(Q.queryParameters){const ne=Q.queryParameters;if("object"!=typeof ne)throw new Error('options.queryParameters must be of type object. It should be a JSON object of "query-parameter-name" as the key and the "query-parameter-value" as the value. The "query-parameter-value" may be fo type "string" or an "object" of the form { value: "query-parameter-value", skipUrlEncoding: true }.');this.url&&-1===this.url.indexOf("?")&&(this.url+="?");const be=[];this.query={};for(const xe in ne){const He=ne[xe];if(He)if("string"==typeof He)be.push(xe+"="+encodeURIComponent(He)),this.query[xe]=encodeURIComponent(He);else if("object"==typeof He){if(!He.value)throw new Error(`options.queryParameters[${xe}] is of type "object" but it does not contain a "value" property.`);He.skipUrlEncoding?(be.push(xe+"="+He.value),this.query[xe]=He.value):(be.push(xe+"="+encodeURIComponent(He.value)),this.query[xe]=encodeURIComponent(He.value))}}this.url+=be.join("&")}if(Q.headers){const ne=Q.headers;for(const be of Object.keys(Q.headers))this.headers.set(be,ne[be])}return this.headers.get("accept-language")||this.headers.set("accept-language","en-US"),!this.headers.get("x-ms-client-request-id")&&!Q.disableClientRequestId&&this.headers.set("x-ms-client-request-id",this.requestId),this.headers.get("Content-Type")||this.headers.set("Content-Type","application/json; charset=utf-8"),this.body=Q.body,null!=Q.body&&(Q.bodyIsStream?(this.headers.get("Transfer-Encoding")||this.headers.set("Transfer-Encoding","chunked"),"application/octet-stream"!==this.headers.get("Content-Type")&&this.headers.set("Content-Type","application/octet-stream")):(Q.serializationMapper&&(this.body=new E(Q.mappers).serialize(Q.serializationMapper,Q.body,"requestBody")),Q.disableJsonStringifyOnBody||(this.body=JSON.stringify(Q.body)))),Q.spanOptions&&(this.spanOptions=Q.spanOptions),Q.tracingContext&&(this.tracingContext=Q.tracingContext),this.abortSignal=Q.abortSignal,this.onDownloadProgress=Q.onDownloadProgress,this.onUploadProgress=Q.onUploadProgress,this}clone(){const Q=new z(this.url,this.method,this.body,this.query,this.headers&&this.headers.clone(),this.streamResponseBody,this.withCredentials,this.abortSignal,this.timeout,this.onUploadProgress,this.onDownloadProgress,this.proxySettings,this.keepAlive,this.decompressResponse,this.streamResponseStatusCodes);return this.formData&&(Q.formData=this.formData),this.operationSpec&&(Q.operationSpec=this.operationSpec),this.shouldDeserialize&&(Q.shouldDeserialize=this.shouldDeserialize),this.operationResponseGetter&&(Q.operationResponseGetter=this.operationResponseGetter),Q}}var J=T(5283),ce=T(369);const se="REDACTED",he=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],ve=["api-version"];class ae{constructor({allowedHeaderNames:Q=[],allowedQueryParameters:ne=[]}={}){Q=Array.isArray(Q)?he.concat(Q):he,ne=Array.isArray(ne)?ve.concat(ne):ve,this.allowedHeaderNames=new Set(Q.map(be=>be.toLowerCase())),this.allowedQueryParameters=new Set(ne.map(be=>be.toLowerCase()))}sanitize(Q){const ne=new Set;return JSON.stringify(Q,(be,xe)=>{if(xe instanceof Error)return Object.assign(Object.assign({},xe),{name:xe.name,message:xe.message});if("_headersMap"===be)return this.sanitizeHeaders(xe);if("url"===be)return this.sanitizeUrl(xe);if("query"===be)return this.sanitizeQuery(xe);if("body"!==be&&"response"!==be&&"operationSpec"!==be){if(Array.isArray(xe)||(0,C.Kn)(xe)){if(ne.has(xe))return"[Circular]";ne.add(xe)}return xe}},2)}sanitizeHeaders(Q){return this.sanitizeObject(Q,this.allowedHeaderNames,(ne,be)=>ne[be].value)}sanitizeQuery(Q){return this.sanitizeObject(Q,this.allowedQueryParameters,(ne,be)=>ne[be])}sanitizeObject(Q,ne,be){if("object"!=typeof Q||null===Q)return Q;const xe={};for(const He of Object.keys(Q))xe[He]=ne.has(He.toLowerCase())?be(Q,He):se;return xe}sanitizeUrl(Q){if("string"!=typeof Q||null===Q)return Q;const ne=ce.UK.parse(Q),be=ne.getQuery();if(!be)return Q;const xe=ce.$4.parse(be);for(const He of xe.keys())this.allowedQueryParameters.has(He.toLowerCase())||xe.set(He,se);return ne.setQuery(xe.toString()),ne.toString()}}const de={},Re=new ae;let Ee=(()=>{class me extends Error{constructor(ne,be,xe,He,et){super(ne),this.name="RestError",this.code=be,this.statusCode=xe,this.request=He,this.response=et,Object.setPrototypeOf(this,me.prototype)}[de](){return`RestError: ${this.message} \n ${Re.sanitize(this)}`}}return me.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",me.PARSE_ERROR="PARSE_ERROR",me})();class ue{sendRequest(Q){var ne;const be=new XMLHttpRequest;if(Q.proxySettings)throw new Error("HTTP proxy is not supported in browser environment");const xe=Q.abortSignal;if(xe){if(xe.aborted)return Promise.reject(new J._("The operation was aborted."));const He=()=>{be.abort()};xe.addEventListener("abort",He),be.addEventListener("readystatechange",()=>{be.readyState===XMLHttpRequest.DONE&&xe.removeEventListener("abort",He)})}if(Se(be.upload,Q.onUploadProgress),Se(be,Q.onDownloadProgress),Q.formData){const He=Q.formData,et=new FormData,pt=(vt,wt)=>{wt&&Object.prototype.hasOwnProperty.call(wt,"value")&&Object.prototype.hasOwnProperty.call(wt,"options")?et.append(vt,wt.value,wt.options):et.append(vt,wt)};for(const vt of Object.keys(He)){const wt=He[vt];if(Array.isArray(wt))for(let Ot=0;Ot<wt.length;Ot++)pt(vt,wt[Ot]);else pt(vt,wt)}Q.body=et,Q.formData=void 0;const bt=Q.headers.get("Content-Type");bt&&-1!==bt.indexOf("multipart/form-data")&&Q.headers.remove("Content-Type")}be.open(Q.method,Q.url),be.timeout=Q.timeout,be.withCredentials=Q.withCredentials;for(const He of Q.headers.headersArray())be.setRequestHeader(He.name,He.value);return be.responseType=(null===(ne=Q.streamResponseStatusCodes)||void 0===ne?void 0:ne.size)||Q.streamResponseBody?"blob":"text",be.send(void 0===Q.body?null:Q.body),new Promise("blob"===be.responseType?(He,et)=>{(function(me,Q,ne,be){me.addEventListener("readystatechange",()=>{var xe;if(me.readyState===XMLHttpRequest.HEADERS_RECEIVED)if(Q.streamResponseBody||(null===(xe=Q.streamResponseStatusCodes)||void 0===xe?void 0:xe.has(me.status))){const He=new Promise((et,pt)=>{me.addEventListener("load",()=>{et(me.response)}),ee(Q,me,pt)});ne({request:Q,status:me.status,headers:ie(me),blobBody:He})}else me.addEventListener("load",()=>{if(me.response){const He=new FileReader;He.onload=function(et){var pt;const bt=null===(pt=et.target)||void 0===pt?void 0:pt.result;ne({request:Q,status:me.status,headers:ie(me),bodyAsText:bt})},He.onerror=function(et){be(He.error)},He.readAsText(me.response,"UTF-8")}else ne({request:Q,status:me.status,headers:ie(me)})})})})(be,Q,He,et),ee(Q,be,et)}:function(He,et){be.addEventListener("load",()=>He({request:Q,status:be.status,headers:ie(be),bodyAsText:be.responseText})),ee(Q,be,et)})}}function Se(me,Q){Q&&me.addEventListener("progress",ne=>Q({loadedBytes:ne.loaded}))}function ie(me){const Q=new y,ne=me.getAllResponseHeaders().trim().split(/[\r\n]+/);for(const be of ne){const xe=be.indexOf(":"),He=be.slice(0,xe),et=be.slice(xe+2);Q.set(He,et)}return Q}function ee(me,Q,ne){Q.addEventListener("error",()=>ne(new Ee(`Failed to send request to ${me.url}`,Ee.REQUEST_SEND_ERROR,void 0,me)));const be=new J._("The operation was aborted.");Q.addEventListener("abort",()=>ne(be)),Q.addEventListener("timeout",()=>ne(be))}var Z=T(1138),le=T(4762);function Oe(me){const{requestOptions:Q,tracingOptions:ne}=me;let xe=(0,le._T)(me,["requestOptions","tracingOptions"]);return Q&&(xe=Object.assign(Object.assign({},xe),Q)),ne&&(xe.tracingContext=ne.tracingContext,xe.spanOptions=null==ne?void 0:ne.spanOptions),xe}var we=T(8239),Te=T(2462);if(!(self.document&&self.DOMParser&&self.Node&&self.XMLSerializer))throw new Error('This library depends on the following DOM objects: ["document", "DOMParser", "Node", "XMLSerializer"] to parse XML, but some of these are undefined. You may provide a polyfill to make these globally available in order to support your environment. For more information, please refer to https://aka.ms/azsdk/js/web-workers. ');let yt,Me,De,ct,Ke;function Ne(){return yt||(yt=document.implementation.createDocument(null,null,null)),yt}function Ye(){return Me||(Me=new DOMParser),Me}function Ve(me,Q={}){var ne,be,xe,He;try{const et={rootName:null!==(ne=Q.rootName)&&void 0!==ne?ne:"",includeRoot:null!==(be=Q.includeRoot)&&void 0!==be&&be,xmlCharKey:null!==(xe=Q.xmlCharKey)&&void 0!==xe?xe:P.I},pt=Ye().parseFromString(null!==(He=null==ct?void 0:ct.createHTML(me))&&void 0!==He?He:me,"application/xml");let bt;return function(me){const Q=me.getElementsByTagName("parsererror");if(Q.length>0&&function(){var me,Q;if(void 0===Ke)try{const ne=null!==(me=null==ct?void 0:ct.createHTML("INVALID"))&&void 0!==me?me:"INVALID";Ke=null!==(Q=Ye().parseFromString(ne,"text/xml").getElementsByTagName("parsererror")[0].namespaceURI)&&void 0!==Q?Q:""}catch(ne){Ke=""}return Ke}())for(let ne=0;ne<Q.length;ne++)if(Q[ne].namespaceURI===Ke)throw new Error(Q[ne].innerHTML)}(pt),bt=ut(et.includeRoot?pt:pt.childNodes[0],et),Promise.resolve(bt)}catch(et){return Promise.reject(et)}}function ut(me,Q){let ne={};const be=me.childNodes.length,xe=me.childNodes[0],He=xe&&1===be&&xe.nodeType===Node.TEXT_NODE&&xe.nodeValue||void 0,et=function(me){return function(me){return!!me.attributes}(me)&&me.hasAttributes()?me:void 0}(me);if(et){ne[P.c]={};for(let pt=0;pt<et.attributes.length;pt++){const bt=et.attributes[pt];ne[P.c][bt.nodeName]=bt.nodeValue}He&&(ne[Q.xmlCharKey]=He)}else 0===be?ne="":He&&(ne=He);if(!He)for(let pt=0;pt<be;pt++){const bt=me.childNodes[pt];if(bt.nodeType!==Node.TEXT_NODE){const vt=ut(bt,Q);ne[bt.nodeName]?Array.isArray(ne[bt.nodeName])?ne[bt.nodeName].push(vt):ne[bt.nodeName]=[ne[bt.nodeName],vt]:ne[bt.nodeName]=vt}}return ne}function st(me,Q={}){var ne,be,xe;const He={rootName:null!==(ne=Q.rootName)&&void 0!==ne?ne:"root",includeRoot:null!==(be=Q.includeRoot)&&void 0!==be&&be,xmlCharKey:null!==(xe=Q.xmlCharKey)&&void 0!==xe?xe:P.I},et=rt(me,He.rootName,He)[0];return'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+(De||(De=new XMLSerializer),De).serializeToString(et)}function Nn(me){const Q=[];for(const ne of Object.keys(me)){const be=Ne().createAttribute(ne);be.value=me[ne].toString(),Q.push(be)}return Q}function rt(me,Q,ne){if(null==me||"string"==typeof me||"number"==typeof me||"boolean"==typeof me){const be=Ne().createElement(Q);return be.textContent=null==me?"":me.toString(),[be]}if(Array.isArray(me)){const be=[];for(const xe of me)for(const He of rt(xe,Q,ne))be.push(He);return be}if("object"==typeof me){const be=Ne().createElement(Q);for(const xe of Object.keys(me))if(xe===P.c)for(const He of Nn(me[xe]))be.attributes.setNamedItem(He);else if(xe===ne.xmlCharKey)be.textContent=me[xe].toString();else for(const He of rt(me[xe],xe,ne))be.appendChild(He);return[be]}throw new Error(`Illegal value passed to buildObject: ${me}`)}function Ge(me,Q){return{create:(ne,be)=>new Dn(ne,be,me,Q)}}void 0!==self.trustedTypes&&(ct=self.trustedTypes.createPolicy("@azure/core-http#xml.browser",{createHTML:me=>me}));const Cn=["application/json","text/json"],qe=["application/xml","application/atom+xml"],We={expectedContentTypes:{json:Cn,xml:qe}};class Dn extends Te.U{constructor(Q,ne,be,xe={}){var He;super(Q,ne),this.jsonContentTypes=be&&be.json||Cn,this.xmlContentTypes=be&&be.xml||qe,this.xmlCharKey=null!==(He=xe.xmlCharKey)&&void 0!==He?He:P.I}sendRequest(Q){var ne=this;return(0,we.Z)(function*(){return ne._nextPolicy.sendRequest(Q).then(be=>Ln(ne.jsonContentTypes,ne.xmlContentTypes,be,{xmlCharKey:ne.xmlCharKey}))})()}}function Ln(me,Q,ne,be={}){var xe,He,et;const pt={rootName:null!==(xe=be.rootName)&&void 0!==xe?xe:"",includeRoot:null!==(He=be.includeRoot)&&void 0!==He&&He,xmlCharKey:null!==(et=be.xmlCharKey)&&void 0!==et?et:P.I};return function(me,Q,ne,be){var xe;const He=pt=>{const wt=new Ee(`Error "${pt}" occurred while parsing the response body - ${ne.bodyAsText}.`,pt.code||Ee.PARSE_ERROR,ne.status,ne.request,ne);return Promise.reject(wt)};if(!(null===(xe=ne.request.streamResponseStatusCodes)||void 0===xe?void 0:xe.has(ne.status))&&!ne.request.streamResponseBody&&ne.bodyAsText){const pt=ne.bodyAsText,bt=ne.headers.get("Content-Type")||"",vt=bt?bt.split(";").map(wt=>wt.toLowerCase()):[];if(0===vt.length||vt.some(wt=>-1!==me.indexOf(wt)))return new Promise(wt=>{ne.parsedBody=JSON.parse(pt),wt(ne)}).catch(He);if(vt.some(wt=>-1!==Q.indexOf(wt)))return Ve(pt,be).then(wt=>(ne.parsedBody=wt,ne)).catch(He)}return Promise.resolve(ne)}(me,Q,ne,pt).then(bt=>{if(!function(me){const Q=me.request.shouldDeserialize;let ne;return ne=void 0===Q||("boolean"==typeof Q?Q:Q(me)),ne}(bt))return bt;const vt=bt.request.operationSpec;if(!vt||!vt.responses)return bt;const wt=function(me){let Q;const ne=me.request,be=ne.operationSpec;if(be){const xe=ne.operationResponseGetter;Q=xe?xe(be,me):be.responses[me.status]}return Q}(bt),{error:Ot,shouldReturnResponse:Dt}=function(me,Q,ne){var be;const xe=200<=me.status&&me.status<300;if(function(me){const Q=Object.keys(me.responses);return 0===Q.length||1===Q.length&&"default"===Q[0]}(Q)?xe:ne){if(!ne)return{error:null,shouldReturnResponse:!1};if(!ne.isError)return{error:null,shouldReturnResponse:!1}}const et=null!=ne?ne:Q.responses.default,bt=(null===(be=me.request.streamResponseStatusCodes)||void 0===be?void 0:be.has(me.status))||me.request.streamResponseBody?`Unexpected status code: ${me.status}`:me.bodyAsText,vt=new Ee(bt,void 0,me.status,me.request,me);if(!et)throw vt;const wt=et.bodyMapper,Ot=et.headersMapper;try{if(me.parsedBody){const Dt=me.parsedBody;let At;if(wt){let fn=Dt;Q.isXML&&wt.type.name===m.Sequence&&(fn="object"==typeof Dt?Dt[wt.xmlElementName]:[]),At=Q.serializer.deserialize(wt,fn,"error.response.parsedBody")}const gn=Dt.error||At||Dt;vt.code=gn.code,gn.message&&(vt.message=gn.message),wt&&(vt.response.parsedBody=At)}me.headers&&Ot&&(vt.response.parsedHeaders=Q.serializer.deserialize(Ot,me.headers.toJson(),"operationRes.parsedHeaders"))}catch(Dt){vt.message=`Error "${Dt.message}" occurred in deserializing the responseBody - "${me.bodyAsText}" for the default response.`}return{error:vt,shouldReturnResponse:!1}}(bt,vt,wt);if(Ot)throw Ot;if(Dt)return bt;if(wt){if(wt.bodyMapper){let At=bt.parsedBody;vt.isXML&&wt.bodyMapper.type.name===m.Sequence&&(At="object"==typeof At?At[wt.bodyMapper.xmlElementName]:[]);try{bt.parsedBody=vt.serializer.deserialize(wt.bodyMapper,At,"operationRes.parsedBody",be)}catch(gn){throw new Ee(`Error ${gn} occurred in deserializing the responseBody - ${bt.bodyAsText}`,void 0,bt.status,bt.request,bt)}}else"HEAD"===vt.httpMethod&&(bt.parsedBody=ne.status>=200&&ne.status<300);wt.headersMapper&&(bt.parsedHeaders=vt.serializer.deserialize(wt.headersMapper,bt.headers.toJson(),"operationRes.parsedHeaders",be))}return bt})}const lt={enable:!0};function ze(me){return{create:(Q,ne)=>new sn(Q,ne,me||lt)}}class sn extends Te.U{constructor(Q,ne,be){super(Q,ne),this.keepAliveOptions=be}sendRequest(Q){var ne=this;return(0,we.Z)(function*(){return Q.keepAlive=ne.keepAliveOptions.enable,ne._nextPolicy.sendRequest(Q)})()}}const dt=["GET","HEAD"],Xe={handleRedirects:!0,maxRetries:20};function Qt(me=20){return{create:(Q,ne)=>new Qe(Q,ne,me)}}class Qe extends Te.U{constructor(Q,ne,be=20){super(Q,ne),this.maxRetries=be}sendRequest(Q){return this._nextPolicy.sendRequest(Q).then(ne=>Ze(this,ne,0))}}function Ze(me,Q,ne){const{request:be,status:xe}=Q,He=Q.headers.get("location");if(He&&(300===xe||301===xe&&dt.includes(be.method)||302===xe&&dt.includes(be.method)||303===xe&&"POST"===be.method||307===xe)&&(!me.maxRetries||ne<me.maxRetries)){const et=ce.UK.parse(be.url);return et.setPath(He),be.url=et.toString(),303===xe&&(be.method="GET",delete be.body),me._nextPolicy.sendRequest(be).then(pt=>Ze(me,pt,ne+1))}return Promise.resolve(Q)}function Vt(me){return"number"==typeof me}function Ht(me,Q,ne,be,xe){return!!Q(be,xe)&&ne.retryCount<me}function bn(me,Q={retryCount:0,retryInterval:0},ne){ne&&(Q.error&&(ne.innerError=Q.error),Q.error=ne),Q.retryCount++;let be=Math.pow(2,Q.retryCount-1)-1;return be*=.8*me.retryInterval+Math.floor(Math.random()*(.4*me.retryInterval)),Q.retryInterval=Math.min(me.minRetryInterval+be,me.maxRetryInterval),Q}var dn=T(8006),pn=T(9484);const rn=(0,T(1326).YR)("core-http");function Mn(me,Q,ne){return{create:(be,xe)=>new xn(be,xe,me,Q,ne)}}var $t=(()=>{return(me=$t||($t={}))[me.Exponential=0]="Exponential",$t;var me})();const Nt={maxRetries:3,retryDelayInMs:3e4,maxRetryDelayInMs:9e4};class xn extends Te.U{constructor(Q,ne,be,xe,He){super(Q,ne),this.retryCount=Vt(be)?be:3,this.retryInterval=Vt(xe)?xe:3e4,this.maxRetryInterval=Vt(He)?He:9e4}sendRequest(Q){return this._nextPolicy.sendRequest(Q.clone()).then(ne=>wn(this,Q,ne)).catch(ne=>wn(this,Q,ne.response,void 0,ne))}}function wn(me,Q,ne,be,xe){return _n.apply(this,arguments)}function _n(){return(_n=(0,we.Z)(function*(me,Q,ne,be,xe){be=bn({retryInterval:me.retryInterval,minRetryInterval:0,maxRetryInterval:me.maxRetryInterval},be,xe);const et=Q.abortSignal&&Q.abortSignal.aborted;if(et||!Ht(me.retryCount,function(pt){const bt=null==pt?void 0:pt.status;return!(503===bt&&(null==ne?void 0:ne.headers.get(dn.g.HeaderConstants.RETRY_AFTER))||void 0===bt||bt<500&&408!==bt||501===bt||505===bt)},be,ne)){if(et||xe||!ne)throw be.error||new Ee("Failed to send the request.",Ee.REQUEST_SEND_ERROR,ne&&ne.status,ne&&ne.request,ne);return ne}rn.info(`Retrying request in ${be.retryInterval}`);try{yield(0,pn.g)(be.retryInterval);const pt=yield me._nextPolicy.sendRequest(Q.clone());return wn(me,Q,pt,be)}catch(pt){return wn(me,Q,ne,be,pt)}})).apply(this,arguments)}function xt(me={}){return{create:(Q,ne)=>new Rn(Q,ne,me)}}class Rn extends Te.U{constructor(Q,ne,{logger:be=rn.info,allowedHeaderNames:xe=[],allowedQueryParameters:He=[]}={}){super(Q,ne),this.logger=be,this.sanitizer=new ae({allowedHeaderNames:xe,allowedQueryParameters:He})}get allowedHeaderNames(){return this.sanitizer.allowedHeaderNames}set allowedHeaderNames(Q){this.sanitizer.allowedHeaderNames=Q}get allowedQueryParameters(){return this.sanitizer.allowedQueryParameters}set allowedQueryParameters(Q){this.sanitizer.allowedQueryParameters=Q}sendRequest(Q){return this.logger.enabled?(this.logRequest(Q),this._nextPolicy.sendRequest(Q).then(ne=>this.logResponse(ne))):this._nextPolicy.sendRequest(Q)}logRequest(Q){this.logger(`Request: ${this.sanitizer.sanitize(Q)}`)}logResponse(Q){return this.logger(`Response status code: ${Q.status}`),this.logger(`Headers: ${this.sanitizer.sanitize(Q.headers)}`),Q}}function Jt(me){return tn(me.parameterPath,me.mapper)}function tn(me,Q){let ne;return ne="string"==typeof me?me:Array.isArray(me)?me.join("."):Q.serializedName,ne}var Oi=T(434);const ps=function(){return"x-ms-useragent"};function Co(){const me=[{key:"core-http",value:dn.g.coreHttpVersion}],Q=function(){const me=self.navigator;return[{key:"OS",value:(me.oscpu||me.platform).replace(" ","")}]}();return function(me,Q=" ",ne="/"){return me.map(be=>`${be.key}${be.value?`${ne}${be.value}`:""}`).join(Q)}(me.concat(Q))}function Ut(me){const Q=me&&null!=me.key?me.key:"x-ms-useragent",ne=me&&null!=me.value?me.value:Co();return{create:(be,xe)=>new Vo(be,xe,Q,ne)}}class Vo extends Te.U{constructor(Q,ne,be,xe){super(Q,ne),this._nextPolicy=Q,this._options=ne,this.headerKey=be,this.headerValue=xe}sendRequest(Q){return this.addUserAgentHeader(Q),this._nextPolicy.sendRequest(Q)}addUserAgentHeader(Q){Q.headers||(Q.headers=new y),!Q.headers.get(this.headerKey)&&this.headerValue&&Q.headers.set(this.headerKey,this.headerValue)}}var Ur=(()=>{return(me=Ur||(Ur={})).Csv=",",me.Ssv=" ",me.Tsv="\t",me.Pipes="|",me.Multi="Multi",Ur;var me})(),$r=T(6354);const Mo=new Error("DisableResponseDecompressionPolicy is not supported in browser environment");function xa(){return{create:(me,Q)=>{throw Mo}}}function br(me="x-ms-client-request-id"){return{create:(Q,ne)=>new Ku(Q,ne,me)}}class Ku extends Te.U{constructor(Q,ne,be){super(Q,ne),this._requestIdHeaderName=be}sendRequest(Q){return Q.headers.contains(this._requestIdHeaderName)||Q.headers.set(this._requestIdHeaderName,Q.requestId),this._nextPolicy.sendRequest(Q)}}let gs;class Ra extends Te.U{constructor(Q,ne){super(Q,ne)}sendRequest(Q){var ne=this;return(0,we.Z)(function*(){if("string"==typeof Q.body&&Q.body.startsWith("[")){const be=JSON.parse(Q.body);Array.isArray(be)&&(Q.body=be.map(xe=>JSON.stringify(xe)+"\n").join(""))}return ne._nextPolicy.sendRequest(Q)})()}}const Ho=new Error("ProxyPolicy is not supported in browser environment");function vs(me){}function cn(me){return{create:(Q,ne)=>{throw Ho}}}class Li extends Te.U{constructor(Q,ne,be=30){super(Q,ne),this._retryTimeout=be}sendRequest(Q){return this._nextPolicy.sendRequest(Q.clone()).then(ne=>function(me,Q,ne){if(409===ne.status){const be=function(me){let Q,ne;if(me){try{ne=JSON.parse(me)}catch(be){}if(ne&&ne.error&&ne.error.message&&ne.error.code&&"MissingSubscriptionRegistration"===ne.error.code){const be=ne.error.message.match(/.*'(.*)'/i);be&&(Q=be.pop())}}return Q}(ne.bodyAsText);if(be){const xe=function(me){let Q;const ne=me.match(/.*\/subscriptions\/[a-f0-9-]+\//gi);if(!ne||!ne[0])throw new Error(`Unable to extract subscriptionId from the given url - ${me}.`);return Q=ne[0],Q}(Q.url);return function(me,Q,ne,be){return jo.apply(this,arguments)}(me,xe,be,Q).catch(()=>!1).then(He=>He?(Q.headers.set("x-ms-client-request-id",C.Rl()),me._nextPolicy.sendRequest(Q.clone())):ne)}}return Promise.resolve(ne)}(this,Q,ne))}}function to(me,Q=!1){const ne=me.clone();return Q&&(ne.url=me.url),ne.headers.set("x-ms-client-request-id",C.Rl()),ne.headers.set("Content-Type","application/json; charset=utf-8"),ne}function jo(){return(jo=(0,we.Z)(function*(me,Q,ne,be){const xe=`${Q}providers/${ne}/register?api-version=2016-02-01`,He=`${Q}providers/${ne}?api-version=2016-02-01`,et=to(be);if(et.method="POST",et.url=xe,200!==(yield me._nextPolicy.sendRequest(et)).status)throw new Error(`Autoregistration of ${ne} failed. Please try registering manually.`);return Hr(me,He,be)})).apply(this,arguments)}function Hr(me,Q,ne){return di.apply(this,arguments)}function di(){return(di=(0,we.Z)(function*(me,Q,ne){const be=to(ne);be.url=Q,be.method="GET";const xe=yield me._nextPolicy.sendRequest(be),He=xe.parsedBody;return!(!xe.parsedBody||!He.registrationState||"Registered"!==He.registrationState)||(yield(0,pn.g)(1e3*me._retryTimeout),Hr(me,Q,ne))})).apply(this,arguments)}function ys(me){return{create:(Q,ne)=>new zo(Q,ne,me)}}class zo extends Te.U{constructor(Q,ne,be){super(Q,ne),this.authenticationProvider=be}signRequest(Q){return this.authenticationProvider.signRequest(Q)}sendRequest(Q){return this.signRequest(Q).then(ne=>this._nextPolicy.sendRequest(ne))}}function qo(me,Q,ne,be){return{create:(xe,He)=>new Wo(xe,He,me,Q,ne,be)}}class Wo extends Te.U{constructor(Q,ne,be,xe,He,et){super(Q,ne),this.retryCount=Vt(be)?be:3,this.retryInterval=Vt(xe)?xe:3e4,this.minRetryInterval=Vt(He)?He:3e3,this.maxRetryInterval=Vt(et)?et:9e4}sendRequest(Q){return this._nextPolicy.sendRequest(Q.clone()).catch(ne=>ro(this,Q,ne.response,ne))}}function ro(me,Q,ne,be,xe){return hi.apply(this,arguments)}function hi(){return(hi=(0,we.Z)(function*(me,Q,ne,be,xe){if(xe=bn(me,xe,be),!Ht(me.retryCount,function(et,pt){return!(!pt||!pt.code||"ETIMEDOUT"!==pt.code&&"ESOCKETTIMEDOUT"!==pt.code&&"ECONNREFUSED"!==pt.code&&"ECONNRESET"!==pt.code&&"ENOENT"!==pt.code)},xe,ne,be))return be?Promise.reject(xe.error):ne;try{return yield(0,pn.g)(xe.retryInterval),me._nextPolicy.sendRequest(Q.clone())}catch(et){return ro(me,Q,ne,et,xe)}})).apply(this,arguments)}const So=dn.g.HttpConstants.StatusCodes;function Eo(){return{create:(me,Q)=>new tr(me,Q)}}const _r="The operation was aborted.";class tr extends Te.U{constructor(Q,ne,be){super(Q,ne),this.numberOfRetries=0,this._handleResponse=be||this._defaultResponseHandler}sendRequest(Q){var ne=this;return(0,we.Z)(function*(){const be=yield ne._nextPolicy.sendRequest(Q.clone());return be.status!==So.TooManyRequests&&be.status!==So.ServiceUnavailable?be:ne._handleResponse(Q,be)})()}_defaultResponseHandler(Q,ne){var be=this;return(0,we.Z)(function*(){var xe;const He=ne.headers.get(dn.g.HeaderConstants.RETRY_AFTER);if(He){const et=tr.parseRetryAfterHeader(He);if(et){if(be.numberOfRetries+=1,yield(0,pn.g)(et,{abortSignal:Q.abortSignal,abortErrorMsg:_r}),null===(xe=Q.abortSignal)||void 0===xe?void 0:xe.aborted)throw new J._(_r);return be.numberOfRetries<3?be.sendRequest(Q):be._nextPolicy.sendRequest(Q)}}return ne})()}static parseRetryAfterHeader(Q){const ne=Number(Q);return Number.isNaN(ne)?tr.parseDateRetryAfterHeader(Q):1e3*ne}static parseDateRetryAfterHeader(Q){try{const ne=Date.now(),xe=Date.parse(Q)-ne;return Number.isNaN(xe)?void 0:xe}catch(ne){return}}}var cr=T(1259),ur=T(9432);const Sr=(0,cr.q)({packagePrefix:"",namespace:""});function It(me={}){return{create:(Q,ne)=>new on(Q,ne,me)}}class on extends Te.U{constructor(Q,ne,be){super(Q,ne),this.userAgent=be.userAgent}sendRequest(Q){var ne=this;return(0,we.Z)(function*(){if(!Q.tracingContext)return ne._nextPolicy.sendRequest(Q);const be=ne.tryCreateSpan(Q);if(!be)return ne._nextPolicy.sendRequest(Q);try{const xe=yield ne._nextPolicy.sendRequest(Q);return ne.tryProcessResponse(be,xe),xe}catch(xe){throw ne.tryProcessError(be,xe),xe}})()}tryCreateSpan(Q){var ne;try{const{span:be}=Sr(`HTTP ${Q.method}`,{tracingOptions:{spanOptions:Object.assign(Object.assign({},Q.spanOptions),{kind:ur.MU.CLIENT}),tracingContext:Q.tracingContext}});if(!be.isRecording())return void be.end();const xe=null===(ne=Q.tracingContext)||void 0===ne?void 0:ne.getValue(Symbol.for("az.namespace"));"string"==typeof xe&&be.setAttribute("az.namespace",xe),be.setAttributes({"http.method":Q.method,"http.url":Q.url,requestId:Q.requestId}),this.userAgent&&be.setAttribute("http.user_agent",this.userAgent);const He=be.spanContext(),et=function(me){const Q=[];if(me.traceId||Q.push("traceId"),me.spanId||Q.push("spanId"),Q.length)return;const be=(me.traceFlags||0).toString(16);return`00-${me.traceId}-${me.spanId}-${1===be.length?`0${be}`:be}`}(He);if(et&&(0,ur.BM)(He)){Q.headers.set("traceparent",et);const pt=He.traceState&&He.traceState.serialize();pt&&Q.headers.set("tracestate",pt)}return be}catch(be){return void rn.warning(`Skipping creating a tracing span due to an error: ${be.message}`)}}tryProcessError(Q,ne){try{Q.setStatus({code:ur.Qn.ERROR,message:ne.message}),ne.statusCode&&Q.setAttribute("http.status_code",ne.statusCode),Q.end()}catch(be){rn.warning(`Skipping tracing span processing due to an error: ${be.message}`)}}tryProcessResponse(Q,ne){try{Q.setAttribute("http.status_code",ne.status);const be=ne.headers.get("x-ms-request-id");be&&Q.setAttribute("serviceRequestId",be),Q.setStatus({code:ur.Qn.OK}),Q.end()}catch(be){rn.warning(`Skipping tracing span processing due to an error: ${be.message}`)}}}class Tn{constructor(Q,ne){let be;if(ne||(ne={}),this._withCredentials=ne.withCredentials||!1,this._httpClient=ne.httpClient||(gs||(gs=new ue),gs),this._requestPolicyOptions=new Te._(ne.httpPipelineLogger),Array.isArray(ne.requestPolicyFactories))rn.info("ServiceClient: using custom request policies"),be=ne.requestPolicyFactories;else{let xe;if((0,Oi.c)(Q))rn.info("ServiceClient: creating bearer token authentication policy from provided credentials"),xe=(()=>{let et;const pt=this,bt=ne;return{create(vt,wt){const Ot=function(me,Q){if(null==me?void 0:me.credentialScopes){const ne=me.credentialScopes;return Array.isArray(ne)?ne.map(be=>new URL(be).toString()):new URL(ne).toString()}if(Q)return`${Q}/.default`}(bt,pt.baseUri);if(!Ot)throw new Error("When using credential, the ServiceClient must contain a baseUri or a credentialScopes in ServiceClientOptions. Unable to create a bearerTokenAuthenticationPolicy");return null==et&&(et=(0,$r.v)(Q,Ot)),et.create(vt,wt)}}})();else if(Q&&"function"==typeof Q.signRequest)rn.info("ServiceClient: creating signing policy from provided credentials"),xe=ys(Q);else if(null!=Q)throw new Error("The credentials argument must implement the TokenCredential interface");if(rn.info("ServiceClient: using default request policies"),be=function(me,Q){const ne=[];Q.generateClientRequestIdHeader&&ne.push(br(Q.clientRequestIdHeaderName)),me&&ne.push(me);const be=Qn(Q.userAgentHeaderName,ps),xe=Qn(Q.userAgent,Co);return be&&xe&&ne.push(Ut({key:be,value:xe})),ne.push(Qt()),ne.push(function(me=30){return{create:(Q,ne)=>new Li(Q,ne,me)}}(Q.rpRegistrationRetryTimeout)),Q.noRetryPolicy||(ne.push(Mn()),ne.push(qo()),ne.push(Eo())),ne.push(Ge(Q.deserializationContentTypes)),C.UG&&ne.push(cn()),ne.push(xt({logger:rn.info})),ne}(xe,ne),ne.requestPolicyFactories){const He=ne.requestPolicyFactories(be);He&&(be=He)}}this._requestPolicyFactories=be}sendRequest(Q){if(null==Q||"object"!=typeof Q)throw new Error("options cannot be null or undefined and it must be of type object.");let ne;try{!function(me){if(me&&"object"==typeof me){const Q=me;if("string"==typeof Q.url&&"string"==typeof Q.method&&"object"==typeof Q.headers&&N(Q.headers)&&"function"==typeof Q.validateRequestProperties&&"function"==typeof Q.prepare&&"function"==typeof Q.clone)return!0}return!1}(Q)?(ne=new z,ne=ne.prepare(Q)):(Q.validateRequestProperties(),ne=Q)}catch(xe){return Promise.reject(xe)}let be=this._httpClient;if(this._requestPolicyFactories&&this._requestPolicyFactories.length>0)for(let xe=this._requestPolicyFactories.length-1;xe>=0;--xe)be=this._requestPolicyFactories[xe].create(be,this._requestPolicyOptions);return be.sendRequest(ne)}sendOperationRequest(Q,ne,be){var xe=this;return(0,we.Z)(function*(){var He;"function"==typeof Q.options&&(be=Q.options,Q.options=void 0);const et=null===(He=Q.options)||void 0===He?void 0:He.serializerOptions,pt=new z;let bt;try{const wt=ne.baseUrl||xe.baseUri;if(!wt)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a baseUri string property that contains the base URL to use.");pt.method=ne.httpMethod,pt.operationSpec=ne;const Ot=ce.UK.parse(wt);if(ne.path&&Ot.appendPath(ne.path),ne.urlParameters&&ne.urlParameters.length>0)for(const jt of ne.urlParameters){let Ft=jr(xe,Q,jt,ne.serializer);Ft=ne.serializer.serialize(jt.mapper,Ft,Jt(jt),et),jt.skipEncoding||(Ft=encodeURIComponent(Ft)),Ot.replaceAll(`{${jt.mapper.serializedName||Jt(jt)}}`,Ft)}if(ne.queryParameters&&ne.queryParameters.length>0)for(const jt of ne.queryParameters){let Ft=jr(xe,Q,jt,ne.serializer);if(null!=Ft){if(Ft=ne.serializer.serialize(jt.mapper,Ft,Jt(jt),et),null!=jt.collectionFormat)if(jt.collectionFormat===Ur.Multi){if(0===Ft.length)continue;for(const Bn in Ft){const pr=Ft[Bn];Ft[Bn]=null==pr?"":pr.toString()}}else(jt.collectionFormat===Ur.Ssv||jt.collectionFormat===Ur.Tsv)&&(Ft=Ft.join(jt.collectionFormat));if(!jt.skipEncoding)if(Array.isArray(Ft))for(const Bn in Ft)null!=Ft[Bn]&&(Ft[Bn]=encodeURIComponent(Ft[Bn]));else Ft=encodeURIComponent(Ft);null!=jt.collectionFormat&&jt.collectionFormat!==Ur.Multi&&jt.collectionFormat!==Ur.Ssv&&jt.collectionFormat!==Ur.Tsv&&(Ft=Ft.join(jt.collectionFormat)),Ot.setQueryParameter(jt.mapper.serializedName||Jt(jt),Ft)}}pt.url=Ot.toString();const Dt=ne.contentType||xe.requestContentType;if(Dt&&ne.requestBody&&pt.headers.set("Content-Type",Dt),ne.headerParameters)for(const jt of ne.headerParameters){let Ft=jr(xe,Q,jt,ne.serializer);if(null!=Ft){Ft=ne.serializer.serialize(jt.mapper,Ft,Jt(jt),et);const Bn=jt.mapper.headerCollectionPrefix;if(Bn)for(const pr of Object.keys(Ft))pt.headers.set(Bn+pr,Ft[pr]);else pt.headers.set(jt.mapper.serializedName||Jt(jt),Ft)}}const At=Q.options;if(At){if(At.customHeaders)for(const jt in At.customHeaders)pt.headers.set(jt,At.customHeaders[jt]);At.abortSignal&&(pt.abortSignal=At.abortSignal),At.timeout&&(pt.timeout=At.timeout),At.onUploadProgress&&(pt.onUploadProgress=At.onUploadProgress),At.onDownloadProgress&&(pt.onDownloadProgress=At.onDownloadProgress),At.spanOptions&&(pt.spanOptions=At.spanOptions),At.tracingContext&&(pt.tracingContext=At.tracingContext),null!=At.shouldDeserialize&&(pt.shouldDeserialize=At.shouldDeserialize)}let gn,fn;pt.withCredentials=xe._withCredentials,function(me,Q,ne,be){var xe,He,et,pt,bt,vt;const wt=null!==(He=null===(xe=ne.options)||void 0===xe?void 0:xe.serializerOptions)&&void 0!==He?He:{},Ot={rootName:null!==(et=wt.rootName)&&void 0!==et?et:"",includeRoot:null!==(pt=wt.includeRoot)&&void 0!==pt&&pt,xmlCharKey:null!==(bt=wt.xmlCharKey)&&void 0!==bt?bt:P.I},Dt=wt.xmlCharKey;if(be.requestBody&&be.requestBody.mapper){Q.body=jr(me,ne,be.requestBody,be.serializer);const At=be.requestBody.mapper,{required:gn,xmlName:fn,xmlElementName:jt,serializedName:Ft,xmlNamespace:Bn,xmlNamespacePrefix:pr}=At,nr=At.type.name;try{if(null!=Q.body||gn){const $n=Jt(be.requestBody);Q.body=be.serializer.serialize(At,Q.body,$n,Ot);const Bi=nr===m.Stream;if(be.isXML){const uo=pr?`xmlns:${pr}`:"xmlns",vi=function(me,Q,ne,be,xe){if(me&&!["Composite","Sequence","Dictionary"].includes(ne)){const He={};return He[xe.xmlCharKey]=be,He[P.c]={[Q]:me},He}return be}(Bn,uo,nr,Q.body,Ot);nr===m.Sequence?Q.body=st(C.WQ(vi,jt||fn||Ft,uo,Bn),{rootName:fn||Ft,xmlCharKey:Dt}):Bi||(Q.body=st(vi,{rootName:fn||Ft,xmlCharKey:Dt}))}else{if(nr===m.String&&((null===(vt=be.contentType)||void 0===vt?void 0:vt.match("text/plain"))||"text"===be.mediaType))return;Bi||(Q.body=JSON.stringify(Q.body))}}}catch($n){throw new Error(`Error "${$n.message}" occurred in serializing the payload - ${JSON.stringify(Ft,void 0,"  ")}.`)}}else if(be.formDataParameters&&be.formDataParameters.length>0){Q.formData={};for(const At of be.formDataParameters){const gn=jr(me,ne,At,be.serializer);if(null!=gn){const fn=At.mapper.serializedName||Jt(At);Q.formData[fn]=be.serializer.serialize(At.mapper,gn,Jt(At),Ot)}}}}(xe,pt,Q,ne),void 0===pt.streamResponseStatusCodes&&(pt.streamResponseStatusCodes=function(me){const Q=new Set;for(const ne in me.responses){const be=me.responses[ne];be.bodyMapper&&be.bodyMapper.type.name===m.Stream&&Q.add(Number(ne))}return Q}(ne));try{gn=yield xe.sendRequest(pt)}catch(jt){fn=jt}fn?(fn.response&&(fn.details=Xr(fn.response,ne.responses[fn.statusCode]||ne.responses.default)),bt=Promise.reject(fn)):bt=Promise.resolve(Xr(gn,ne.responses[gn.status]))}catch(wt){bt=Promise.reject(wt)}const vt=be;return vt&&bt.then(wt=>vt(null,wt._response.parsedBody,wt._response.request,wt._response)).catch(wt=>vt(wt)),bt})()}}function Qn(me,Q){let ne;return"string"==typeof me?ne=me:(ne=Q(),"function"==typeof me&&(ne=me(ne))),ne}function Wn(me,Q){const ne=[];let be;if(me.sendStreamingJson&&ne.push({create:(me,Q)=>new Ra(me,Q)}),me.userAgentOptions&&me.userAgentOptions.userAgentPrefix){const vt=[];vt.push(me.userAgentOptions.userAgentPrefix);const wt=Co();-1===vt.indexOf(wt)&&vt.push(wt),be=vt.join(" ")}const xe=Object.assign(Object.assign({},lt),me.keepAliveOptions),He=Object.assign(Object.assign({},Nt),me.retryOptions),et=Object.assign(Object.assign({},Xe),me.redirectOptions);C.UG&&ne.push(cn());const pt=Object.assign(Object.assign({},We),me.deserializationOptions),bt=Object.assign({},me.loggingOptions);return ne.push(It({userAgent:be}),ze(xe),Ut({value:be}),br(),Ge(pt.expectedContentTypes),Eo(),qo(),Mn(He.maxRetries,He.retryDelayInMs,He.maxRetryDelayInMs)),et.handleRedirects&&ne.push(Qt(et.maxRetries)),Q&&ne.push(Q),ne.push(xt(bt)),C.UG&&!1===me.decompressResponse&&ne.push(xa()),{httpClient:me.httpClient,requestPolicyFactories:ne}}function jr(me,Q,ne,be){return Kt(me,Q,ne.parameterPath,ne.mapper,be)}function Kt(me,Q,ne,be,xe){var He;let et;"string"==typeof ne&&(ne=[ne]);const pt=null===(He=Q.options)||void 0===He?void 0:He.serializerOptions;if(Array.isArray(ne)){if(ne.length>0){if(be.isConstant)et=be.defaultValue;else{let vt=oo(Q,ne);vt.propertyFound||(vt=oo(me,ne));let wt=!1;vt.propertyFound||(wt=be.required||"options"===ne[0]&&2===ne.length),et=wt?be.defaultValue:vt.propertyValue}const bt=tn(ne,be);xe.serialize(be,et,bt,pt)}}else{be.required&&(et={});for(const bt in ne){const vt=be.type.modelProperties[bt],wt=ne[bt],Ot=Kt(me,Q,wt,vt,xe),Dt=tn(wt,vt);xe.serialize(vt,Ot,Dt,pt),null!=Ot&&(et||(et={}),et[bt]=Ot)}}return et}function oo(me,Q){const ne={propertyFound:!1};let be=0;for(;be<Q.length;++be){const xe=Q[be];if(null==me||!(xe in me))break;me=me[xe]}return be===Q.length&&(ne.propertyValue=me,ne.propertyFound=!0),ne}function Xr(me,Q){const ne=me.parsedHeaders,be=Q&&Q.bodyMapper,xe=He=>Object.defineProperty(He,"_response",{value:me});if(be){const He=be.type.name;if("Stream"===He)return xe(Object.assign(Object.assign({},ne),{blobBody:me.blobBody,readableStreamBody:me.readableStreamBody}));const et="Composite"===He&&be.type.modelProperties||{},pt=Object.keys(et).some(bt=>""===et[bt].serializedName);if("Sequence"===He||pt){const bt=[...me.parsedBody||[]];for(const vt of Object.keys(et))et[vt].serializedName&&(bt[vt]=me.parsedBody[vt]);if(ne)for(const vt of Object.keys(ne))bt[vt]=ne[vt];return xe(bt),bt}if("Composite"===He||"Dictionary"===He)return xe(Object.assign(Object.assign({},ne),me.parsedBody))}return be||"HEAD"===me.request.method||C.ty(me.parsedBody)?xe(Object.assign(Object.assign({},ne),{body:me.parsedBody})):xe(Object.assign(Object.assign({},ne),me.parsedBody))}function ei(me){return(0,cr.q)(me)}class so{constructor(Q=12e4){this.cachedToken=void 0,this.tokenRefreshBufferMs=Q}setCachedToken(Q){this.cachedToken=Q}getCachedToken(){return this.cachedToken&&Date.now()+this.tokenRefreshBufferMs>=this.cachedToken.expiresOnTimestamp&&(this.cachedToken=void 0),this.cachedToken}}class Fi{constructor(Q,ne,be=3e4){this.credential=Q,this.scopes=ne,this.requiredMillisecondsBeforeNewRefresh=be,this.lastCalled=0}isReady(){return!this.lastCalled||Date.now()-this.lastCalled>this.requiredMillisecondsBeforeNewRefresh}getToken(Q){var ne=this;return(0,we.Z)(function*(){ne.lastCalled=Date.now();const be=yield ne.credential.getToken(ne.scopes,Q);return ne.promise=void 0,be||void 0})()}refresh(Q){return this.promise||(this.promise=this.getToken(Q)),this.promise}}const Rr=dn.g.HeaderConstants;class Aa{constructor(Q,ne,be="Basic"){if(this.authorizationScheme="Basic",null==Q||"string"!=typeof Q.valueOf())throw new Error("userName cannot be null or undefined and must be of type string.");if(null==ne||"string"!=typeof ne.valueOf())throw new Error("password cannot be null or undefined and must be of type string.");this.userName=Q,this.password=ne,this.authorizationScheme=be}signRequest(Q){const be=`${this.authorizationScheme} ${me=`${this.userName}:${this.password}`,btoa(me)}`;var me;return Q.headers||(Q.headers=new y),Q.headers.set(Rr.AUTHORIZATION,be),Promise.resolve(Q)}}class ws{constructor(Q){if(!Q||Q&&!Q.inHeader&&!Q.inQuery)throw new Error('options cannot be null or undefined. Either "inHeader" or "inQuery" property of the options object needs to be provided.');this.inHeader=Q.inHeader,this.inQuery=Q.inQuery}signRequest(Q){if(!Q)return Promise.reject(new Error('webResource cannot be null or undefined and must be of type "object".'));if(this.inHeader){Q.headers||(Q.headers=new y);for(const ne in this.inHeader)Q.headers.set(ne,this.inHeader[ne])}if(this.inQuery){if(!Q.url)return Promise.reject(new Error("url cannot be null in the request object."));Q.url.indexOf("?")<0&&(Q.url+="?");for(const ne in this.inQuery)Q.url.endsWith("?")||(Q.url+="&"),Q.url+=`${ne}=${this.inQuery[ne]}`}return Promise.resolve(Q)}}class ao extends ws{constructor(Q){if(!Q||Q&&"string"!=typeof Q)throw new Error("topicKey cannot be null or undefined and must be of type string.");super({inHeader:{"aeg-sas-key":Q}})}}},6354:(Y,L,T)=>{"use strict";T.d(L,{v:()=>E});var p=T(8239),N=T(2462),y=T(8006),x=T(9484);const u={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4};function C(){return(C=(0,p.Z)(function*(v,h,_){function b(){return w.apply(this,arguments)}function w(){return(w=(0,p.Z)(function*(){if(!(Date.now()<_)){const D=yield v();if(null===D)throw new Error("Failed to refresh access token.");return D}try{return yield v()}catch(D){return null}})).apply(this,arguments)}let I=yield b();for(;null===I;)yield(0,x.g)(h),I=yield b();return I})).apply(this,arguments)}function E(v,h){const _=function(v,h,_){let b=null,w=null;const I=Object.assign(Object.assign({},u),_),D={get isRefreshing(){return null!==b},get shouldRefresh(){var O;return!D.isRefreshing&&(null!==(O=null==w?void 0:w.expiresOnTimestamp)&&void 0!==O?O:0)-I.refreshWindowInMs<Date.now()},get mustRefresh(){return null===w||w.expiresOnTimestamp-I.forcedRefreshWindowInMs<Date.now()}};function k(O){var V;return D.isRefreshing||(b=function(v,h,_){return C.apply(this,arguments)}(()=>v.getToken(h,O),I.retryIntervalInMs,null!==(V=null==w?void 0:w.expiresOnTimestamp)&&void 0!==V?V:Date.now()).then(U=>(b=null,w=U,w)).catch(U=>{throw b=null,w=null,U})),b}return function(){var O=(0,p.Z)(function*(V){return D.mustRefresh?k(V):(D.shouldRefresh&&k(V),w)});return function(V){return O.apply(this,arguments)}}()}(v,h);class b extends N.U{constructor(I,D){super(I,D)}sendRequest(I){var D=this;return(0,p.Z)(function*(){if(!I.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");const{token:k}=yield _({abortSignal:I.abortSignal,tracingOptions:{tracingContext:I.tracingContext}});return I.headers.set(y.g.HeaderConstants.AUTHORIZATION,`Bearer ${k}`),D._nextPolicy.sendRequest(I)})()}}return{create:(w,I)=>new b(w,I)}}},2462:(Y,L,T)=>{"use strict";T.d(L,{U:()=>N,_:()=>y});var p=T(1138);class N{constructor(u,g){this._nextPolicy=u,this._options=g}shouldLog(u){return this._options.shouldLog(u)}log(u,g){this._options.log(u,g)}}class y{constructor(u){this._logger=u}shouldLog(u){return!!this._logger&&u!==p.M.OFF&&u<=this._logger.minimumLogLevel}log(u,g){this._logger&&this.shouldLog(u)&&this._logger.log(u,g)}}},369:(Y,L,T)=>{"use strict";T.d(L,{$4:()=>N,UK:()=>y});var p=T(7694);class N{constructor(){this._rawQuery={}}any(){return Object.keys(this._rawQuery).length>0}keys(){return Object.keys(this._rawQuery)}set(j,W){const X=W;if(j)if(null!=X){const K=Array.isArray(X)?X:X.toString();this._rawQuery[j]=K}else delete this._rawQuery[j]}get(j){return j?this._rawQuery[j]:void 0}toString(){let j="";for(const W in this._rawQuery){j&&(j+="&");const X=this._rawQuery[W];if(Array.isArray(X)){const K=[];for(const ge of X)K.push(`${W}=${ge}`);j+=K.join("&")}else j+=`${W}=${X}`}return j}static parse(j){const W=new N;if(j){j.startsWith("?")&&(j=j.substring(1));let X="ParameterName",K="",ge="";for(let R=0;R<j.length;++R){const r=j[R];switch(X){case"ParameterName":switch(r){case"=":X="ParameterValue";break;case"&":K="",ge="";break;default:K+=r}break;case"ParameterValue":switch(r){case"&":W.set(K,ge),K="",ge="",X="ParameterName";break;default:ge+=r}break;default:throw new Error("Unrecognized URLQuery parse state: "+X)}}"ParameterValue"===X&&W.set(K,ge)}return W}}class y{setScheme(j){j?this.set(j,"SCHEME"):this._scheme=void 0}getScheme(){return this._scheme}setHost(j){j?this.set(j,"SCHEME_OR_HOST"):this._host=void 0}getHost(){return this._host}setPort(j){null==j||""===j?this._port=void 0:this.set(j.toString(),"PORT")}getPort(){return this._port}setPath(j){if(j){const W=j.indexOf("://");if(-1!==W){const X=j.lastIndexOf("/",W);this.set(-1===X?j:j.substr(X+1),"SCHEME")}else this.set(j,"PATH")}else this._path=void 0}appendPath(j){if(j){let W=this.getPath();W&&(W.endsWith("/")||(W+="/"),j.startsWith("/")&&(j=j.substring(1)),j=W+j),this.set(j,"PATH")}}getPath(){return this._path}setQuery(j){this._query=j?N.parse(j):void 0}setQueryParameter(j,W){j&&(this._query||(this._query=new N),this._query.set(j,W))}getQueryParameterValue(j){return this._query?this._query.get(j):void 0}getQuery(){return this._query?this._query.toString():void 0}set(j,W){const X=new g(j,W);for(;X.next();){const K=X.current();let ge;if(K)switch(K.type){case"SCHEME":this._scheme=K.text||void 0;break;case"HOST":this._host=K.text||void 0;break;case"PORT":this._port=K.text||void 0;break;case"PATH":ge=K.text||void 0,(!this._path||"/"===this._path||"/"!==ge)&&(this._path=ge);break;case"QUERY":this._query=N.parse(K.text);break;default:throw new Error(`Unrecognized URLTokenType: ${K.type}`)}}}toString(){let j="";return this._scheme&&(j+=`${this._scheme}://`),this._host&&(j+=this._host),this._port&&(j+=`:${this._port}`),this._path&&(this._path.startsWith("/")||(j+="/"),j+=this._path),this._query&&this._query.any()&&(j+=`?${this._query.toString()}`),j}replaceAll(j,W){j&&(this.setScheme((0,p.ko)(this.getScheme(),j,W)),this.setHost((0,p.ko)(this.getHost(),j,W)),this.setPort((0,p.ko)(this.getPort(),j,W)),this.setPath((0,p.ko)(this.getPath(),j,W)),this.setQuery((0,p.ko)(this.getQuery(),j,W)))}static parse(j){const W=new y;return W.set(j,"SCHEME_OR_HOST"),W}}class x{constructor(j,W){this.text=j,this.type=W}static scheme(j){return new x(j,"SCHEME")}static host(j){return new x(j,"HOST")}static port(j){return new x(j,"PORT")}static path(j){return new x(j,"PATH")}static query(j){return new x(j,"QUERY")}}class g{constructor(j,W){this._text=j,this._textLength=j?j.length:0,this._currentState=null!=W?W:"SCHEME_OR_HOST",this._currentIndex=0}current(){return this._currentToken}next(){if(P(this))switch(this._currentState){case"SCHEME":!function(U){const j=function(U){return _(U,j=>function(U){const j=U.charCodeAt(0);return 48<=j&&j<=57||65<=j&&j<=90||97<=j&&j<=122}(j))}(U);U._currentToken=x.scheme(j),U._currentState=P(U)?"HOST":"DONE"}(this);break;case"SCHEME_OR_HOST":!function(U){const j=w(U,":","/","?");P(U)?":"===E(U)?"://"===h(U,3)?(U._currentToken=x.scheme(j),U._currentState="HOST"):(U._currentToken=x.host(j),U._currentState="PORT"):(U._currentToken=x.host(j),U._currentState="/"===E(U)?"PATH":"QUERY"):(U._currentToken=x.host(j),U._currentState="DONE")}(this);break;case"HOST":!function(U){"://"===h(U,3)&&v(U,3);const j=w(U,":","/","?");U._currentToken=x.host(j),U._currentState=P(U)?":"===E(U)?"PORT":"/"===E(U)?"PATH":"QUERY":"DONE"}(this);break;case"PORT":!function(U){":"===E(U)&&v(U);const j=w(U,"/","?");U._currentToken=x.port(j),U._currentState=P(U)?"/"===E(U)?"PATH":"QUERY":"DONE"}(this);break;case"PATH":!function(U){const j=w(U,"?");U._currentToken=x.path(j),U._currentState=P(U)?"QUERY":"DONE"}(this);break;case"QUERY":!function(U){"?"===E(U)&&v(U);const j=function(U){let j="";return U._currentIndex<U._textLength&&(j=U._text.substring(U._currentIndex),U._currentIndex=U._textLength),j}(U);U._currentToken=x.query(j),U._currentState="DONE"}(this);break;default:throw new Error(`Unrecognized URLTokenizerState: ${this._currentState}`)}else this._currentToken=void 0;return!!this._currentToken}}function P(U){return U._currentIndex<U._textLength}function E(U){return U._text[U._currentIndex]}function v(U,j){P(U)&&(j||(j=1),U._currentIndex+=j)}function h(U,j){let W=U._currentIndex+j;return U._textLength<W&&(W=U._textLength),U._text.substring(U._currentIndex,W)}function _(U,j){let W="";for(;P(U);){const X=E(U);if(!j(X))break;W+=X,v(U)}return W}function w(U,...j){return _(U,W=>-1===j.indexOf(W))}},8006:(Y,L,T)=>{"use strict";T.d(L,{g:()=>p});const p={coreHttpVersion:"2.3.1",HTTP:"http:",HTTPS:"https:",HTTP_PROXY:"HTTP_PROXY",HTTPS_PROXY:"HTTPS_PROXY",NO_PROXY:"NO_PROXY",ALL_PROXY:"ALL_PROXY",HttpConstants:{HttpVerbs:{PUT:"PUT",GET:"GET",DELETE:"DELETE",POST:"POST",MERGE:"MERGE",HEAD:"HEAD",PATCH:"PATCH"},StatusCodes:{TooManyRequests:429,ServiceUnavailable:503}},HeaderConstants:{AUTHORIZATION:"authorization",AUTHORIZATION_SCHEME:"Bearer",RETRY_AFTER:"Retry-After",USER_AGENT:"User-Agent"}}},4510:(Y,L,T)=>{"use strict";T.d(L,{c:()=>p,I:()=>N});const p="$",N="_"},7694:(Y,L,T)=>{"use strict";T.d(L,{ef:()=>ge,Hh:()=>k,Zf:()=>j,Rl:()=>U,_9:()=>r,UG:()=>I,Kn:()=>f,ty:()=>l,TP:()=>B,WQ:()=>K,_Q:()=>W,yj:()=>X,ko:()=>s,Fl:()=>V,eg:()=>O});var N,p=T(4510),y=new Uint8Array(16);function x(){if(!N&&!(N="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return N(y)}const u=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,C=function(M){return"string"==typeof M&&u.test(M)};for(var P=[],E=0;E<256;++E)P.push((E+256).toString(16).substr(1));const b=function(M,A,d){var i=(M=M||{}).random||(M.rng||x)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,A){d=d||0;for(var m=0;m<16;++m)A[d+m]=i[m];return A}return function(M){var A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=(P[M[A+0]]+P[M[A+1]]+P[M[A+2]]+P[M[A+3]]+"-"+P[M[A+4]]+P[M[A+5]]+"-"+P[M[A+6]]+P[M[A+7]]+"-"+P[M[A+8]]+P[M[A+9]]+"-"+P[M[A+10]]+P[M[A+11]]+P[M[A+12]]+P[M[A+13]]+P[M[A+14]]+P[M[A+15]]).toLowerCase();if(!C(d))throw TypeError("Stringified UUID is invalid");return d}(i)},w=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i,I="undefined"!=typeof process&&!!process.version&&!!process.versions&&!!process.versions.node;function k(M){return encodeURIComponent(M).replace(/!/g,"%21").replace(/"/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function O(M){const A={};return A.body=M.bodyAsText,A.headers=M.headers,A.status=M.status,A}function V(M){const A=M.clone();return A.headers&&A.headers.remove("authorization"),A}function B(M){return w.test(M)}function U(){return b()}function j(M,A){let d=Promise.resolve(A);return M.forEach(i=>{d=d.then(i)}),d}function W(M){if("function"!=typeof M.then)throw new Error("The provided input is not a Promise.");return A=>{M.then(d=>A(void 0,d)).catch(d=>{A(d)})}}function X(M){if("function"!=typeof M.then)throw new Error("The provided input is not a Promise.");return A=>{M.then(d=>process.nextTick(A,void 0,d.parsedBody,d.request,d)).catch(d=>{process.nextTick(A,d)})}}function K(M,A,d,i){if(Array.isArray(M)||(M=[M]),!d||!i)return{[A]:M};const m={[A]:M};return m[p.c]={[d]:i},m}function ge(M,A){const d=M;A.forEach(i=>{Object.getOwnPropertyNames(i.prototype).forEach(m=>{d.prototype[m]=i.prototype[m]})})}const R=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function r(M){return R.test(M)}function s(M,A,d){return M&&A?M.split(A).join(d||""):M}function l(M){return"object"!=typeof M&&"function"!=typeof M||null===M}function f(M){return!("object"!=typeof M||null===M||Array.isArray(M)||M instanceof RegExp||M instanceof Date)}},1259:(Y,L,T)=>{"use strict";T.d(L,{q:()=>u});var p=T(9432),N=T(2999),y=T(3259);function u(g){return function(C,P){const E=(0,p.Yz)(),v=(null==P?void 0:P.tracingOptions)||{},h=Object.assign({kind:p.MU.INTERNAL},v.spanOptions),_=g.packagePrefix?`${g.packagePrefix}.${C}`:C;let b;b=function(){var g;if("undefined"==typeof process)return!1;const C=null===(g=process.env.AZURE_TRACING_DISABLED)||void 0===g?void 0:g.toLowerCase();return"false"!==C&&"0"!==C&&Boolean(C)}()?N.g.wrapSpanContext(y.Rr):E.startSpan(_,h,v.tracingContext),g.namespace&&b.setAttribute("az.namespace",g.namespace);let w=v.spanOptions||{};b.isRecording()&&g.namespace&&(w=Object.assign(Object.assign({},v.spanOptions),{attributes:Object.assign(Object.assign({},h.attributes),{"az.namespace":g.namespace})}));const I=Object.assign(Object.assign({},v),{spanOptions:w,tracingContext:(0,p.WZ)(v.tracingContext||p.Do.active(),b)});return{span:b,updatedOptions:Object.assign(Object.assign({},P),{tracingOptions:I})}}}},9432:(Y,L,T)=>{"use strict";T.d(L,{MU:()=>x,Qn:()=>_,Do:()=>h,Yz:()=>v,BM:()=>E,WZ:()=>g});var N=T(723).c.getInstance(),y=T(2999),x=(()=>{return(b=x||(x={}))[b.INTERNAL=0]="INTERNAL",b[b.SERVER=1]="SERVER",b[b.CLIENT=2]="CLIENT",b[b.PRODUCER=3]="PRODUCER",b[b.CONSUMER=4]="CONSUMER",x;var b})();function g(b,w){return y.g.setSpan(b,w)}function E(b){return y.g.isSpanContextValid(b)}function v(b,w){return y.g.getTracer(b||"azure/core-tracing",w)}const h=N;var _=(()=>{return(b=_||(_={}))[b.UNSET=0]="UNSET",b[b.OK=1]="OK",b[b.ERROR=2]="ERROR",_;var b})()},9484:(Y,L,T)=>{"use strict";T.d(L,{g:()=>g});var p=T(5283);function g(C,P){return new Promise((E,v)=>{let h,_;const b=()=>{var I;return v(new p._(null!==(I=null==P?void 0:P.abortErrorMsg)&&void 0!==I?I:"The operation was aborted."))},w=()=>{(null==P?void 0:P.abortSignal)&&_&&P.abortSignal.removeEventListener("abort",_)};if(_=()=>(function(C){return null!=C}(h)&&clearTimeout(h),w(),b()),(null==P?void 0:P.abortSignal)&&P.abortSignal.aborted)return b();h=setTimeout(()=>{w(),E()},C),(null==P?void 0:P.abortSignal)&&P.abortSignal.addEventListener("abort",_)})}},1326:(Y,L,T)=>{"use strict";T.d(L,{YR:()=>W});const N="undefined"!=typeof process&&process.env&&process.env.DEBUG||void 0;let y,x=[],u=[];const g=[];N&&P(N);const C=Object.assign(r=>h(r),{enable:P,enabled:E,disable:function(){const r=y||"";return P(""),r},log:function(...r){if(r.length>0){const s=String(r[0]);s.includes(":error")?console.error(...r):s.includes(":warning")?console.warn(...r):s.includes(":info")?console.info(...r):(s.includes(":verbose"),console.debug(...r))}}});function P(r){y=r,x=[],u=[];const s=/\*/g,l=r.split(",").map(a=>a.trim().replace(s,".*?"));for(const a of l)a.startsWith("-")?u.push(new RegExp(`^${a.substr(1)}$`)):x.push(new RegExp(`^${a}$`));for(const a of g)a.enabled=E(a.namespace)}function E(r){if(r.endsWith("*"))return!0;for(const s of u)if(s.test(r))return!1;for(const s of x)if(s.test(r))return!0;return!1}function h(r){const s=Object.assign(function(...a){!s.enabled||(a.length>0&&(a[0]=`${r} ${a[0]}`),s.log(...a))},{enabled:E(r),destroy:_,log:C.log,namespace:r,extend:b});return g.push(s),s}function _(){const r=g.indexOf(this);return r>=0&&(g.splice(r,1),!0)}function b(r){const s=h(`${this.namespace}:${r}`);return s.log=this.log,s}const w=C,I=new Set,D="undefined"!=typeof process&&process.env&&process.env.AZURE_LOG_LEVEL||void 0;let k;const O=w("azure");O.log=(...r)=>{w.log(...r)};const V=["verbose","info","warning","error"];D&&(R(D)?function(r){if(r&&!R(r))throw new Error(`Unknown log level '${r}'. Acceptable values: ${V.join(",")}`);k=r;const s=[];for(const l of I)ge(l)&&s.push(l.namespace);w.enable(s.join(","))}(D):console.error(`AZURE_LOG_LEVEL set to unknown log level '${D}'; logging is not enabled. Acceptable values: ${V.join(", ")}.`));const j={verbose:400,info:300,warning:200,error:100};function W(r){const s=O.extend(r);return X(O,s),{error:K(s,"error"),warning:K(s,"warning"),info:K(s,"info"),verbose:K(s,"verbose")}}function X(r,s){s.log=(...l)=>{r.log(...l)}}function K(r,s){const l=Object.assign(r.extend(s),{level:s});if(X(r,l),ge(l)){const a=w.disable();w.enable(a+","+l.namespace)}return I.add(l),l}function ge(r){return!!(k&&j[r.level]<=j[k])}function R(r){return V.includes(r)}},5413:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var N=p(T(9901)),y=p(T(5633)),x=T(2e3),u=function g(){(0,N.default)(this,g)};L.default=u,(0,y.default)(u,"requiredOmnichannelConfigurationParameters",["orgUrl","orgId","widgetId"]),(0,y.default)(u,"defaultHeaders",{"Content-Type":"application/json"}),(0,y.default)(u,"bypassCacheHeaders",{"Cache-Control":"no-store, must-revalidate, no-cache","X-Cache-Control":"no-store"}),(0,y.default)(u,"defaultChannelId",x.ChannelId.LCW),(0,y.default)(u,"defaultLocale","en-us"),(0,y.default)(u,"noContentStatusCode",204),(0,y.default)(u,"tooManyRequestsStatusCode",429),(0,y.default)(u,"sensitiveProperties",["AuthenticatedUserToken"]),(0,y.default)(u,"transactionid","transaction-id"),(0,y.default)(u,"customerDisplayName","customerDisplayName"),(0,y.default)(u,"hiddenContentPlaceholder","*content hidden*")},2e3:(Y,L)=>{"use strict";var T,C,p,N,y,x,u,g;Object.defineProperty(L,"__esModule",{value:!0}),L.LiveChatVersion=L.OCSDKTelemetryEvent=L.ChannelId=L.OperatingSystem=L.DeviceType=L.Browser=L.BrowserVendor=void 0,L.BrowserVendor=T,(C=T||(L.BrowserVendor=T={})).IE="IE",C.CHROME="Chrome",C.FIREFOX="Firefox",C.SAFARI="Safari",C.EDGE="Edge",C.EDGE_CHROMIUM="Edg",C.OPERA="Opera",C.UNKNOWN="Unknown",L.Browser=p,function(C){C[C.Chrome=0]="Chrome",C[C.Firefox=1]="Firefox",C[C.Ie=2]="Ie",C[C.Edge=3]="Edge",C[C.Safari=4]="Safari",C[C.None=5]="None"}(p||(L.Browser=p={})),L.DeviceType=N,function(C){C.Desktop="Desktop",C.Mobile="Mobile",C.Tablet="Tablet"}(N||(L.DeviceType=N={})),L.OperatingSystem=y,function(C){C.WINDOWS="Windows",C.MACOSX="Mac OS X",C.WINDOWS_PHONE="Windows Phone",C.WINDOWS_RT="Windows RT",C.IOS="iOS",C.ANDROID="Android",C.LINUX="Linux",C.UNKNOWN="Unknown"}(y||(L.OperatingSystem=y={})),L.ChannelId=x,function(C){C.LCW="lcw",C.SMS="sms",C.FACEBOOK="facebook",C.WECHAT="wechat"}(x||(L.ChannelId=x={})),L.OCSDKTelemetryEvent=u,function(C){C.GETCHATCONFIG="GetChatConfig",C.GETCHATCONFIGSUCCESS="GetChatConfigSucceeded",C.GETRECONNECTABLECHATS="GetReconnnectableChats",C.GETRECONNECTAVAILABILITY="GetReconnnectableAvailability",C.GETCHATTOKENSTARTED="GetChatTokenStarted",C.GETCHATTOKENSUCCEEDED="GetChatTokenSucceeded",C.GETCHATTOKENFAILED="GetChatTokenFailed",C.GETLWISTATUSSTARTED="GetLwiStatusStarted",C.GETLWISTATUSSUCCEEDED="GetLwiStatusSucceeded",C.GETLWISTATUSFAILED="GetLwiStatusFailed",C.SESSIONINITSTARTED="SessionInitStarted",C.SESSIONINITSUCCEEDED="SessionInitSucceeded",C.SESSIONINITFAILED="SessionInitFailed",C.SESSIONCLOSESTARTED="SessionCloseStarted",C.SESSIONCLOSESUCCEEDED="SessionCloseSucceeded",C.SESSIONCLOSEFAILED="SessionCloseFailed",C.SUBMITPOSTCHATSTARTED="SubmitPostChatStarted",C.SUBMITPOSTCHATSUCCEEDED="SubmitPostChatSucceeded",C.SUBMITPOSTCHATFAILED="SubmitPostChatFailed",C.GETCHATTRANSCRIPTSTARTED="GetChatTranscriptStarted",C.GETCHATTRANSCRIPTSUCCEEDED="GetChatTranscriptSucceeded",C.GETCHATTRANSCRIPTFAILED="GetChatTranscriptFailed",C.EMAILTRANSCRIPTSTARTED="EmailTranscriptStarted",C.EMAILTRANSCRIPTSUCCEEDED="EmailTranscriptSucceeded",C.EMAILTRANSCRIPTFAILED="EmailTranscriptFailed",C.FETCHDATAMASKINGSTARTED="FetchDataMaskingStarted",C.FETCHDATAMASKINGSUCCEEDED="FetchDataMaskingSucceeded",C.FETCHDATAMASKINGFAILED="FetchDataMaskingFailed",C.SECONDARYCHANNELEVENTREQUESTSTARTED="SecondaryChannelEventRequestStarted",C.SECONDARYCHANNELEVENTREQUESTSUCCEEDED="SecondaryChannelEventRequestSucceeded",C.SECONDARYCHANNELEVENTREQUESTFAILED="SecondaryChannelEventRequestFailed",C.GETSURVEYINVITELINKSTARTED="GetSurveyInviteLinkStarted",C.GETSURVEYINVITELINKSUCCEEDED="GetSurveyInviteLinkSucceeded",C.GETSURVEYINVITELINKFAILED="GetSurveyInviteLinkFailed",C.VALIDATEAUTHCHATRECORDSTARTED="ValidateAuthChatRecordStarted",C.VALIDATEAUTHCHATRECORDSUCCEEDED="ValidateAuthChatRecordSucceeded",C.VALIDATEAUTHCHATRECORDFAILED="ValidateAuthChatRecordFailed",C.GETAGENTAVAILABILITYSTARTED="GetAgentAvailabilityStarted",C.GETAGENTAVAILABILITYSUCCEEDED="GetAgentAvailabilitySucceeded",C.GETAGENTAVAILABILITYFAILED="GetAgentAvailabilityFailed",C.SENDTYPINGINDICATORFAILED="SendTypingIndicatorFailed",C.SENDTYPINGINDICATORSUCCEEDED="SendTypingIndicatorSucceeded"}(u||(L.OCSDKTelemetryEvent=u={})),L.LiveChatVersion=g,function(C){C[C.V1=1]="V1",C[C.V2=2]="V2"}(g||(L.LiveChatVersion=g={}))},3096:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var N=p(T(9901)),y=p(T(9524));L.default=function(){function u(){(0,N.default)(this,u)}return(0,y.default)(u,null,[{key:"OCSDKLOAD",get:function(){return"oc:sdk:load"}}]),u}()},4950:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var N=p(T(9901)),y=p(T(5633)),x=function u(){(0,N.default)(this,u)};L.default=x,(0,y.default)(x,"supportedLocales",["ar-sa","bg-bg","ca-es","cs-cz","da-dk","de-de","el-gr","en-us","es-es","et-ee","eu-es","fi-fi","fr-fr","gl-es","he-il","hi-in","hr-hr","hu-hu","id-id","it-it","ja-jp","kk-kz","ko-kr","lt-lt","lv-lv","ms-my","nb-no","nl-nl","pl-pl","pt-br","pt-pt","ro-ro","ru-ru","sk-sk","sl-si","sr-cyrl-cs","sr-latn-cs","sv-se","th-th","tr-tr","uk-ua","vi-vn","zh-cn","zh-hk","zh-tw"])},4162:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var N=p(T(9901)),y=p(T(9524)),x=p(T(5633)),u=p(T(7276));L.default=function(){function C(P){(0,N.default)(this,C),(0,x.default)(this,"logger",void 0),this.logger=P}return(0,y.default)(C,[{key:"log",value:function(E,v,h,_){if(this.isLoggingEnabled()){var b=u.default.GETTELEMETRYEVENTDATA(v,h,_);this.logEvent(E,b)}}},{key:"logEvent",value:function(E,v){this.isLoggingEnabled()&&setTimeout(this.logger.logClientSdkTelemetryEvent.bind(this.logger),0,E,v)}},{key:"isLoggingEnabled",value:function(){return!this.isNullOrUndefined(this.logger)}},{key:"isNullOrUndefined",value:function(E){return null==E}}]),C}()},2172:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var N=p(T(9901)),y=p(T(5633)),x=function u(){(0,N.default)(this,u)};L.default=x,(0,y.default)(x,"LiveChatConfigPath","livechatconnector/config"),(0,y.default)(x,"LiveChatSessionInitPath","livechatconnector/sessioninit"),(0,y.default)(x,"LiveChatAuthSessionInitPath","livechatconnector/auth/sessioninit"),(0,y.default)(x,"LiveChatGetChatTokenPath","livechatconnector/getchattoken"),(0,y.default)(x,"LiveChatv2GetChatTokenPath","livechatconnector/v2/getchattoken"),(0,y.default)(x,"LiveChatAuthGetChatTokenPath","livechatconnector/auth/getchattoken"),(0,y.default)(x,"LiveChatv2AuthGetChatTokenPath","livechatconnector/v2/auth/getchattoken"),(0,y.default)(x,"LiveChatSessionClosePath","livechatconnector/sessionclose"),(0,y.default)(x,"LiveChatAuthSessionClosePath","livechatconnector/auth/sessionclose"),(0,y.default)(x,"LiveChatSubmitPostChatPath","survey/submitpostchat"),(0,y.default)(x,"LiveChatAuthSubmitPostChatPath","survey/auth/submitpostchat"),(0,y.default)(x,"LiveChatGetSurveyInviteLinkPath","livechatconnector/getsurveyinvite"),(0,y.default)(x,"LiveChatAuthGetSurveyInviteLinkPath","livechatconnector/auth/getsurveyinvite"),(0,y.default)(x,"LiveChatGetChatTranscriptPath","livechatconnector/getchattranscripts"),(0,y.default)(x,"LiveChatv2GetChatTranscriptPath","livechatconnector/v2/getchattranscripts"),(0,y.default)(x,"LiveChatAuthGetChatTranscriptPath","livechatconnector/auth/getchattranscripts"),(0,y.default)(x,"LiveChatv2AuthGetChatTranscriptPath","livechatconnector/v2/auth/getchattranscripts"),(0,y.default)(x,"LiveChatTranscriptEmailRequestPath","livechatconnector/createemailrequest"),(0,y.default)(x,"LiveChatAuthTranscriptEmailRequestPath","livechatconnector/auth/createemailrequest"),(0,y.default)(x,"LiveChatFetchDataMaskingInfoPath","livechatconnector/fetchdatamaskinginfo"),(0,y.default)(x,"LiveChatSecondaryChannelEventPath","livechatconnector/secondarychannelevent"),(0,y.default)(x,"LiveChatAuthSecondaryChannelEventPath","livechatconnector/auth/secondarychannelevent"),(0,y.default)(x,"LiveChatLiveWorkItemDetailsPath","livechatconnector/getliveworkitemdetails"),(0,y.default)(x,"LiveChatAuthLiveWorkItemDetailsPath","livechatconnector/auth/getliveworkitemdetails"),(0,y.default)(x,"LiveChatGetReconnectableChatsPath","livechatconnector/auth/reconnectablechats"),(0,y.default)(x,"LiveChatReconnectAvailabilityPath","livechatconnector/reconnect"),(0,y.default)(x,"LiveChatValidateAuthChatMapRecordPath","livechatconnector/auth/validateauthchatmaprecord"),(0,y.default)(x,"GetAgentAvailabilityPath","livechatconnector/auth/getagentavailability"),(0,y.default)(x,"SendTypingIndicatorPath","inbound/typingindicator/livechat/sendtypingindicator")},1858:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var N=p(T(9901)),y=p(T(5633)),x=function u(){(0,N.default)(this,u)};L.default=x,(0,y.default)(x,"authenticatedUserToken","AuthenticatedUserToken"),(0,y.default)(x,"authorization","Authorization"),(0,y.default)(x,"organizationId","OrganizationId"),(0,y.default)(x,"widgetAppId","widgetAppId"),(0,y.default)(x,"requestId","Request-Id")},6528:(Y,L)=>{"use strict";var T,p;Object.defineProperty(L,"__esModule",{value:!0}),L.LogLevel=void 0,L.LogLevel=T,(p=T||(L.LogLevel=T={})).INFO="INFO",p.DEBUG="DEBUG",p.WARN="WARN",p.ERROR="ERROR"},8634:(Y,L,T)=>{"use strict";var p=T(3621),N=T(4738);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var y=p(T(617)),x=p(T(8979)),u=p(T(4738)),g=p(T(9901)),C=p(T(9524)),P=p(T(5633)),E=T(2e3),v=p(T(8686)),h=T(4717),_=p(T(5413)),b=T(6812),w=p(T(4950)),I=T(9569),D=T(6528),k=T(7169),O=p(T(2172)),V=p(T(1858)),B=T(3945),U=p(T(1729)),j=T(8566),W=function(M,A){if(M&&M.__esModule)return M;if(null===M||"object"!==N(M)&&"function"!=typeof M)return{default:M};var d=K(A);if(d&&d.has(M))return d.get(M);var i={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var q in M)if("default"!==q&&Object.prototype.hasOwnProperty.call(M,q)){var z=m?Object.getOwnPropertyDescriptor(M,q):null;z&&(z.get||z.set)?Object.defineProperty(i,q,z):i[q]=M[q]}return i.default=M,d&&d.set(M,i),i}(T(9726)),X=T(9114);function K(M){if("function"!=typeof WeakMap)return null;var A=new WeakMap,d=new WeakMap;return(K=function(m){return m?d:A})(M)}function R(M,A){var d=Object.keys(M);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(M);A&&(i=i.filter(function(m){return Object.getOwnPropertyDescriptor(M,m).enumerable})),d.push.apply(d,i)}return d}function r(M){for(var A=1;A<arguments.length;A++){var d=null!=arguments[A]?arguments[A]:{};A%2?R(Object(d),!0).forEach(function(i){(0,P.default)(M,i,d[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(d)):R(Object(d)).forEach(function(i){Object.defineProperty(M,i,Object.getOwnPropertyDescriptor(d,i))})}return M}function s(M,A){var d="undefined"!=typeof Symbol&&M[Symbol.iterator]||M["@@iterator"];if(!d){if(Array.isArray(M)||(d=function(M,A){if(M){if("string"==typeof M)return a(M,A);var d=Object.prototype.toString.call(M).slice(8,-1);if("Object"===d&&M.constructor&&(d=M.constructor.name),"Map"===d||"Set"===d)return Array.from(M);if("Arguments"===d||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return a(M,A)}}(M))||A&&M&&"number"==typeof M.length){d&&(M=d);var i=0,m=function(){};return{s:m,n:function(){return i>=M.length?{done:!0}:{done:!1,value:M[i++]}},e:function(se){throw se},f:m}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var J,q=!0,z=!1;return{s:function(){d=d.call(M)},n:function(){var se=d.next();return q=se.done,se},e:function(se){z=!0,J=se},f:function(){try{!q&&null!=d.return&&d.return()}finally{if(z)throw J}}}}function a(M,A){(null==A||A>M.length)&&(A=M.length);for(var d=0,i=new Array(A);d<A;d++)i[d]=M[d];return i}var f=function(){function M(A){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M.defaultConfiguration,i=arguments.length>2?arguments[2]:void 0;(0,g.default)(this,M),this.omnichannelConfiguration=A,this.configuration=d,this.logger=i,(0,P.default)(this,"liveChatVersion",void 0),(!Object.keys(this.configuration).length||"object"!==(0,u.default)(d))&&(this.configuration=M.defaultConfiguration);for(var m=0,q=Object.keys(M.defaultConfiguration);m<q.length;m++){var z=q[m];this.configuration.hasOwnProperty(z)||(this.configuration["".concat(z)]=M.defaultConfiguration["".concat(z)])}var J=A.channelId;if(!Object.values(E.ChannelId).includes(J))throw new Error("Invalid channelId");var he,ce=Object.keys(A),se=s(_.default.requiredOmnichannelConfigurationParameters);try{for(se.s();!(he=se.n()).done;){var ve=he.value;if(!ce.includes(ve))throw new Error("Missing '".concat(ve,"' in OmnichannelConfiguration"))}}catch(ae){se.e(ae)}finally{se.f()}this.liveChatVersion=E.LiveChatVersion.V1}return(0,C.default)(M,[{key:"getChatConfig",value:(A=(0,x.default)(y.default.mark(function i(m){var q,z,J,ce,se,he,ve,ae,de,Re,Ee=arguments;return y.default.wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return q=Ee.length>1&&void 0!==Ee[1]&&Ee[1],z=B.Timer.TIMER(),this.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.GETCHATCONFIG,"Get Chat config started",m),m||(m=(0,j.uuidv4)()),J="/".concat(O.default.LiveChatConfigPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"?requestId=").concat(m,"&channelId=").concat(this.omnichannelConfiguration.channelId),ce="GET",se="".concat(this.omnichannelConfiguration.orgUrl).concat(J),he=v.default.create(),(0,U.default)(he,{retries:this.configuration.maxRequestRetriesOnFailure}),ve={},q&&(ve=r(r({},_.default.bypassCacheHeaders),ve)),ye.next=13,he.get(se,{headers:ve});case 13:return de=z.milliSecondsElapsed,(Re=(ae=ye.sent).data).LiveChatVersion&&Re.LiveChatVersion===E.LiveChatVersion.V2&&(this.liveChatVersion=Re.LiveChatVersion),Re.headers={},ae.headers&&ae.headers.date&&(Re.headers.date=ae.headers.date),this.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.GETCHATCONFIGSUCCESS,"Get Chat config succeeded",m,ae,de,J,ce),ye.abrupt("return",Re);case 21:case"end":return ye.stop()}},i,this)})),function(i){return A.apply(this,arguments)})},{key:"getLWIDetails",value:function(){var A=(0,x.default)(y.default.mark(function i(m){var z,J,ce,se,he,ve,ae,de,Re,Ee,q=this,ue=arguments;return y.default.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return z=ue.length>1&&void 0!==ue[1]?ue[1]:{},J=B.Timer.TIMER(),this.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.GETLWISTATUSSTARTED,"Get LWI Details Started",m),m||(m=(0,j.uuidv4)()),ce="/".concat(O.default.LiveChatLiveWorkItemDetailsPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(m),se=v.default.create(),(0,U.default)(se,{retries:this.configuration.maxRequestRetriesOnFailure}),ve=z.reconnectId,ae=_.default.defaultHeaders,(he=z.authenticatedUserToken)&&(ce="/".concat(O.default.LiveChatAuthLiveWorkItemDetailsPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(m),ae[V.default.authenticatedUserToken]=he),ve&&(ce+="/".concat(ve)),ce+="?channelId=".concat(this.omnichannelConfiguration.channelId),de="".concat(this.omnichannelConfiguration.orgUrl).concat(ce),Ee={headers:ae,method:Re="GET",url:de},Se.abrupt("return",new Promise(function(){var ie=(0,x.default)(y.default.mark(function ee(Z,le){var Oe,Te;return y.default.wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return Me.prev=0,Me.next=3,se(Ee);case 3:Te=(Oe=Me.sent).data,q.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.GETLWISTATUSSUCCEEDED,"Get LWI Details succeeded",m,Oe,J.milliSecondsElapsed,ce,Re),Z(Te),Me.next=15;break;case 10:Me.prev=10,Me.t0=Me.catch(0),q.logWithLogger(D.LogLevel.ERROR,E.OCSDKTelemetryEvent.GETLWISTATUSFAILED,"Get LWI Details failed",m,void 0,J.milliSecondsElapsed,ce,Re,Me.t0),le();case 15:case"end":return Me.stop()}},ee,null,[[0,10]])}));return function(ee,Z){return ie.apply(this,arguments)}}()));case 16:case"end":return Se.stop()}},i,this)}));return function(i){return A.apply(this,arguments)}}()},{key:"getChatToken",value:function(){var A=(0,x.default)(y.default.mark(function i(m){var z,J,ce,se,he,ve,ae,de,Re,Ee,ue,ye,Se,q=this,ie=arguments;return y.default.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(z=ie.length>1&&void 0!==ie[1]?ie[1]:{},J=ie.length>2&&void 0!==ie[2]?ie[2]:0,ce=B.Timer.TIMER(),se=z.reconnectId,he=z.authenticatedUserToken,ve=z.currentLiveChatVersion,this.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.GETCHATTOKENSTARTED,"Get Chat Token Started",m),!(J<0)){Z.next=7;break}throw new Error("Invalid currentRetryCount");case 7:return m||(m=(0,j.uuidv4)()),ae=_.default.defaultHeaders,de="/".concat(O.default.LiveChatGetChatTokenPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(m),this.liveChatVersion===E.LiveChatVersion.V2||ve&&ve===E.LiveChatVersion.V2?(de="/".concat(O.default.LiveChatv2GetChatTokenPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(m),he&&(de="/".concat(O.default.LiveChatv2AuthGetChatTokenPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(m),ae[V.default.authenticatedUserToken]=he)):he&&(de="/".concat(O.default.LiveChatAuthGetChatTokenPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(m),ae[V.default.authenticatedUserToken]=he),se&&(de+="/".concat(se)),Re="channelId=".concat(this.omnichannelConfiguration.channelId),de+="?".concat(Re),Ee="".concat(this.omnichannelConfiguration.orgUrl).concat(de),ye={headers:ae,method:ue="GET",url:Ee},Se=v.default.create(),(0,U.default)(Se,{retries:this.configuration.maxRequestRetriesOnFailure,retryOn429:this.configuration.getChatTokenRetryOn429}),Z.abrupt("return",new Promise(function(){var le=(0,x.default)(y.default.mark(function Oe(we,Te){var yt,Ne,Me,Ye;return y.default.wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:return ct.prev=0,ct.next=3,Se(ye);case 3:if(Ne=ce.milliSecondsElapsed,!(Me=(yt=ct.sent).data)){ct.next=11;break}return Me.requestId=m,q.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.GETCHATTOKENSUCCEEDED,"Get Chat Token succeeded",m,yt,Ne,de,ue),we(Me),ct.abrupt("return");case 11:if(!se||yt.status!==_.default.noContentStatusCode){ct.next=14;break}return Te(yt),ct.abrupt("return");case 14:ct.next=23;break;case 16:if(ct.prev=16,ct.t0=ct.catch(0),q.logWithLogger(D.LogLevel.ERROR,E.OCSDKTelemetryEvent.GETCHATTOKENFAILED,"Get Chat Token failed",m,void 0,ce.milliSecondsElapsed,de,ue,ct.t0),(null===(Ye=ct.t0.response)||void 0===Ye?void 0:Ye.status)!==_.default.tooManyRequestsStatusCode||q.configuration.getChatTokenRetryOn429){ct.next=23;break}return Te(ct.t0),ct.abrupt("return");case 23:if(!(J+1>=q.configuration.getChatTokenRetryCount)){ct.next=26;break}return Te(new Error("The retry for getchattoken has exceeded its max value of ".concat(q.configuration.getChatTokenRetryCount))),ct.abrupt("return");case 26:setTimeout(function(){q.getChatToken(m,z,J+1).then(function(Ve){return we(Ve)}).catch(function(Ve){return Te(Ve)})},q.configuration.getChatTokenTimeBetweenRetriesOnFailure);case 27:case"end":return ct.stop()}},Oe,null,[[0,16]])}));return function(Oe,we){return le.apply(this,arguments)}}()));case 20:case"end":return Z.stop()}},i,this)}));return function(i){return A.apply(this,arguments)}}()},{key:"getReconnectableChats",value:function(){var A=(0,x.default)(y.default.mark(function i(m){var z,J,ce,se,he,ae,de,Re,q=this;return y.default.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return z=B.Timer.TIMER(),J=m.authenticatedUserToken,this.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.GETRECONNECTABLECHATS,"Get Reconnectable chat Started"),ce="/".concat(O.default.LiveChatGetReconnectableChatsPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(this.omnichannelConfiguration.orgId,"?channelId=").concat(this.omnichannelConfiguration.channelId),(se=_.default.defaultHeaders)[V.default.authenticatedUserToken]=J,he="".concat(this.omnichannelConfiguration.orgUrl).concat(ce),ae={headers:se,method:"GET",url:he},de=v.default.create(),Re=this.omnichannelConfiguration.orgId,ue.abrupt("return",new Promise(function(){var ye=(0,x.default)(y.default.mark(function Se(ie,ee){var Z,le,Oe;return y.default.wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:return yt.prev=0,yt.next=3,de(ae);case 3:if(le=z.milliSecondsElapsed,!(Oe=(Z=yt.sent).data)){yt.next=10;break}return q.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.GETRECONNECTABLECHATS,"Get Reconnectable Chats Succeeded and old session returned",Re,Z,le,ce,"GET"),ie(Oe),yt.abrupt("return");case 10:return ie(),yt.abrupt("return");case 14:return yt.prev=14,yt.t0=yt.catch(0),q.logWithLogger(D.LogLevel.ERROR,E.OCSDKTelemetryEvent.GETRECONNECTABLECHATS,"Get Reconnectable Chats failed",Re,void 0,z.milliSecondsElapsed,ce,"GET",yt.t0),ee(yt.t0),yt.abrupt("return");case 20:case"end":return yt.stop()}},Se,null,[[0,14]])}));return function(Se,ie){return ye.apply(this,arguments)}}()));case 12:case"end":return ue.stop()}},i,this)}));return function(i){return A.apply(this,arguments)}}()},{key:"getReconnectAvailability",value:function(){var A=(0,x.default)(y.default.mark(function i(m){var z,J,ce,se,ve,ae,q=this;return y.default.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return z=B.Timer.TIMER(),this.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.GETRECONNECTAVAILABILITY,"Get Reconnectable availability Started"),J="/".concat(O.default.LiveChatReconnectAvailabilityPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(m),ce=_.default.defaultHeaders,se="".concat(this.omnichannelConfiguration.orgUrl).concat(J),ve={headers:ce,method:"GET",url:se},ae=v.default.create(),Re.abrupt("return",new Promise(function(){var Ee=(0,x.default)(y.default.mark(function ue(ye,Se){var ie,ee,Z;return y.default.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.prev=0,we.next=3,ae(ve);case 3:if(ee=z.milliSecondsElapsed,!(Z=(ie=we.sent).data)){we.next=10;break}return q.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.GETRECONNECTAVAILABILITY,"Get Reconnect availability succeeded",void 0,ie,ee,J,"GET"),ye(Z),we.abrupt("return");case 10:return q.logWithLogger(D.LogLevel.WARN,E.OCSDKTelemetryEvent.GETRECONNECTAVAILABILITY,"Get Reconnect availability didn't send any valid data",void 0,ie,ee,J,"GET"),ye(),we.abrupt("return");case 15:return we.prev=15,we.t0=we.catch(0),q.logWithLogger(D.LogLevel.ERROR,E.OCSDKTelemetryEvent.GETRECONNECTAVAILABILITY,"Get Reconnect Availability failed",void 0,void 0,z.milliSecondsElapsed,J,"GET",we.t0),Se(we.t0),we.abrupt("return");case 21:case"end":return we.stop()}},ue,null,[[0,15]])}));return function(ue,ye){return Ee.apply(this,arguments)}}()));case 9:case"end":return Re.stop()}},i,this)}));return function(i){return A.apply(this,arguments)}}()},{key:"getAgentAvailability",value:function(){var A=(0,x.default)(y.default.mark(function i(m){var z,J,ce,se,he,ve,ae,de,Re,Ee,ue,ye,Se,ie,q=this,ee=arguments;return y.default.wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(z=ee.length>1&&void 0!==ee[1]?ee[1]:{},J=B.Timer.TIMER(),this.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.GETAGENTAVAILABILITYSTARTED,"Get agent availability Started",m),ce="/".concat(O.default.GetAgentAvailabilityPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(m,"?channelId=lcw"),se=v.default.create(),(0,U.default)(se,{retries:this.configuration.maxRequestRetriesOnFailure}),ve=z.initContext,ae=z.getContext,de=_.default.defaultHeaders,(he=z.authenticatedUserToken)&&(de[V.default.authenticatedUserToken]=he),Ee={orgId:this.omnichannelConfiguration.orgId,widgetId:this.omnichannelConfiguration.widgetId},(Re=ve||{})&&Re.customContextData&&(ue=X.CustomContextData.sort(Re.customContextData),Object.assign(Ee,{customContext:ue})),Re.portalcontactid&&Object.assign(Ee,{portalcontactid:Re.portalcontactid}),Re.cacheKey=W.createHash("sha256").update(JSON.stringify(Ee)).digest("hex").toString(),!ae||window.document){le.next=16;break}return le.abrupt("return",Promise.reject(new Error("getContext is only supported on web browsers")));case 16:if(ae&&(Re.browser=h.BrowserInfo.getBrowserName(),Re.device=b.DeviceInfo.getDeviceType(),Re.originurl=window.location.href,Re.os=k.OSInfo.getOsType()),Re.locale||(Re.locale=_.default.defaultLocale),!Re.locale||w.default.supportedLocales.includes(Re.locale)){le.next=20;break}return le.abrupt("return",Promise.reject(new Error("Unsupported locale: '".concat(Re.locale,"'"))));case 20:return ye="".concat(this.omnichannelConfiguration.orgUrl).concat(ce),ie={data:Re,headers:de,method:Se="POST",url:ye},le.abrupt("return",new Promise(function(){var Oe=(0,x.default)(y.default.mark(function we(Te,yt){var Ne,Me,Ye;return y.default.wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:return ct.prev=0,ct.next=3,se(ie);case 3:Me=J.milliSecondsElapsed,(Ye=(Ne=ct.sent).data)&&(q.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.GETAGENTAVAILABILITYSUCCEEDED,"Get agent availability succeeded",m,Ne,Me,ce,Se),Te(Ye)),ct.next=14;break;case 9:ct.prev=9,ct.t0=ct.catch(0),q.logWithLogger(D.LogLevel.ERROR,E.OCSDKTelemetryEvent.GETAGENTAVAILABILITYFAILED,"Get agent availability failed",m,void 0,J.milliSecondsElapsed,ce,Se,ct.t0),yt(ct.t0);case 14:case"end":return ct.stop()}},we,null,[[0,9]])}));return function(we,Te){return Oe.apply(this,arguments)}}()));case 24:case"end":return le.stop()}},i,this)}));return function(i){return A.apply(this,arguments)}}()},{key:"sessionInit",value:function(){var A=(0,x.default)(y.default.mark(function i(m){var q,z,J,ce,se,he,ve,ae,de,Re,Ee,ue,ye,Se,le=arguments;return y.default.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:if(q=le.length>1&&void 0!==le[1]?le[1]:{},z=B.Timer.TIMER(),this.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.SESSIONINITSTARTED,"Session Init Started",m),J=v.default.create(),(0,U.default)(J,{retries:this.configuration.maxRequestRetriesOnFailure}),ce=q.reconnectId,se=q.authenticatedUserToken,he=q.initContext,ve=q.getContext,ae=_.default.defaultHeaders,de="/".concat(O.default.LiveChatSessionInitPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(m),se&&(de="/".concat(O.default.LiveChatAuthSessionInitPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(m),ae[V.default.authenticatedUserToken]=se),ce&&(de+="/".concat(ce)),Re="channelId=".concat(this.omnichannelConfiguration.channelId),de+="?".concat(Re),Ee=he||{},!ve||window.document){we.next=15;break}return we.abrupt("return",Promise.reject(new Error("getContext is only supported on web browsers")));case 15:if(ve&&(Ee.browser=h.BrowserInfo.getBrowserName(),Ee.device=b.DeviceInfo.getDeviceType(),Ee.originurl=window.location.href,Ee.os=k.OSInfo.getOsType()),Ee.locale||(Ee.locale=_.default.defaultLocale),!Ee.locale||w.default.supportedLocales.includes(Ee.locale)){we.next=19;break}return we.abrupt("return",Promise.reject(new Error("Unsupported locale: '".concat(Ee.locale,"'"))));case 19:return ue="".concat(this.omnichannelConfiguration.orgUrl).concat(de),Se={data:Ee,headers:ae,method:ye="POST",url:ue},we.prev=22,we.next=25,J(Se);case 25:this.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.SESSIONINITSUCCEEDED,"Session Init Succeeded",m,we.sent,z.milliSecondsElapsed,de,ye,void 0,Ee),we.next=35;break;case 30:throw we.prev=30,we.t0=we.catch(22),this.logWithLogger(D.LogLevel.ERROR,E.OCSDKTelemetryEvent.SESSIONINITFAILED,"Session Init failed",m,void 0,z.milliSecondsElapsed,de,ye,we.t0,Ee),we.t0;case 35:case"end":return we.stop()}},i,this,[[22,30]])}));return function(i){return A.apply(this,arguments)}}()},{key:"sessionClose",value:function(){var A=(0,x.default)(y.default.mark(function i(m){var z,J,ce,se,he,ve,ae,Re,Ee,ue,ye,Se,q=this,ie=arguments;return y.default.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return z=ie.length>1&&void 0!==ie[1]?ie[1]:{},J=B.Timer.TIMER(),this.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.SESSIONCLOSESTARTED,"Session Close Started",m),ce="/".concat(O.default.LiveChatSessionClosePath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(m,"?channelId=").concat(this.omnichannelConfiguration.channelId),se=v.default.create(),(0,U.default)(se,{retries:this.configuration.maxRequestRetriesOnFailure}),he=z.authenticatedUserToken,ve=z.isReconnectChat,ae=z.isPersistentChat,Re=_.default.defaultHeaders,(Ee={}).chatId=z.chatId,he&&(ce="/".concat(O.default.LiveChatAuthSessionClosePath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(m,"?channelId=").concat(this.omnichannelConfiguration.channelId),Re[V.default.authenticatedUserToken]=he),ve&&(ce+="&isReconnectChat=true"),ae&&(ce+="&isPersistentChat=true"),ue="".concat(this.omnichannelConfiguration.orgUrl).concat(ce),Se={data:Ee,headers:Re,method:ye="POST",url:ue},Z.abrupt("return",new Promise(function(){var le=(0,x.default)(y.default.mark(function Oe(we,Te){return y.default.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return De.prev=0,De.next=3,se(Se);case 3:q.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.SESSIONCLOSESUCCEEDED,"Session Close succeeded",m,De.sent,J.milliSecondsElapsed,ce,ye),we(),De.next=14;break;case 9:De.prev=9,De.t0=De.catch(0),q.logWithLogger(D.LogLevel.ERROR,E.OCSDKTelemetryEvent.SESSIONCLOSEFAILED,"Session close failed",m,void 0,J.milliSecondsElapsed,ce,ye,De.t0),Te();case 14:case"end":return De.stop()}},Oe,null,[[0,9]])}));return function(Oe,we){return le.apply(this,arguments)}}()));case 17:case"end":return Z.stop()}},i,this)}));return function(i){return A.apply(this,arguments)}}()},{key:"validateAuthChatRecord",value:function(){var A=(0,x.default)(y.default.mark(function i(m,q){var z,J,ce,se,he,ve,ae,de,Re,Ee,ue,ye;return y.default.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return z=B.Timer.TIMER(),this.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.VALIDATEAUTHCHATRECORDSTARTED,"Validate Auth Chat Record Started",m),J=q.authenticatedUserToken,ce=q.chatId,se="/".concat(O.default.LiveChatValidateAuthChatMapRecordPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(ce,"/").concat(m,"?channelId=").concat(this.omnichannelConfiguration.channelId),he=v.default.create(),(0,U.default)(he,{retries:this.configuration.maxRequestRetriesOnFailure}),ve=_.default.defaultHeaders,J&&(ve[V.default.authenticatedUserToken]=J),ae="".concat(this.omnichannelConfiguration.orgUrl).concat(se),Re={headers:ve,method:de="GET",url:ae},ee.prev=11,ee.next=14,he(Re);case 14:if(ye=z.milliSecondsElapsed,!0!==(null===(Ee=(ue=ee.sent).data)||void 0===Ee?void 0:Ee.authChatExist)){ee.next=21;break}return this.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.VALIDATEAUTHCHATRECORDSUCCEEDED,"Validate Auth Chat Record succeeded",m,ue,ye,se,de),ee.abrupt("return",Promise.resolve(ue.data));case 21:return this.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.VALIDATEAUTHCHATRECORDFAILED,"Validate Auth Chat Record Failed. Record is not found or request is not authorized",m,ue,ye,se,de),ee.abrupt("return",Promise.reject(new Error("Validate Auth Chat Record Failed. Record is not found or request is not authorized")));case 23:ee.next=34;break;case 25:if(ee.prev=25,ee.t0=ee.catch(11),this.logWithLogger(D.LogLevel.ERROR,E.OCSDKTelemetryEvent.VALIDATEAUTHCHATRECORDFAILED,"Validate Auth Chat Record failed",m,void 0,z.milliSecondsElapsed,se,de,ee.t0),"Error: Request failed with status code 404"!==ee.t0.toString()){ee.next=33;break}return ee.abrupt("return",Promise.resolve({}));case 33:return ee.abrupt("return",Promise.reject());case 34:case"end":return ee.stop()}},i,this,[[11,25]])}));return function(i,m){return A.apply(this,arguments)}}()},{key:"submitPostChatResponse",value:function(){var A=(0,x.default)(y.default.mark(function i(m,q){var J,ce,se,he,ve,ae,de,Re,Ee,z=this,ue=arguments;return y.default.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return J=ue.length>2&&void 0!==ue[2]?ue[2]:{},ce=B.Timer.TIMER(),this.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.SUBMITPOSTCHATSTARTED,"Submit Post Chat Started",m),se="/".concat(O.default.LiveChatSubmitPostChatPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(m,"?channelId=").concat(this.omnichannelConfiguration.channelId),he=v.default.create(),(0,U.default)(he,{retries:this.configuration.maxRequestRetriesOnFailure}),ae=_.default.defaultHeaders,(ve=J.authenticatedUserToken)&&(se="/".concat(O.default.LiveChatAuthSubmitPostChatPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(m,"?channelId=").concat(this.omnichannelConfiguration.channelId),ae[V.default.authenticatedUserToken]=ve),de="".concat(this.omnichannelConfiguration.orgUrl).concat(se),Re="POST",Ee={data:JSON.stringify(q),headers:ae,method:Re,url:de},Se.abrupt("return",new Promise(function(){var ie=(0,x.default)(y.default.mark(function ee(Z,le){return y.default.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ne.prev=0,Ne.next=3,he(Ee);case 3:z.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.SUBMITPOSTCHATSUCCEEDED,"Submit Post Chat succeeded",m,Ne.sent,ce.milliSecondsElapsed,se,Re),Z(),Ne.next=14;break;case 9:Ne.prev=9,Ne.t0=Ne.catch(0),z.logWithLogger(D.LogLevel.ERROR,E.OCSDKTelemetryEvent.SUBMITPOSTCHATFAILED,"Submit Post Chat Failed",m,void 0,ce.milliSecondsElapsed,se,Re,Ne.t0),le();case 14:case"end":return Ne.stop()}},ee,null,[[0,9]])}));return function(ee,Z){return ie.apply(this,arguments)}}()));case 13:case"end":return Se.stop()}},i,this)}));return function(i,m){return A.apply(this,arguments)}}()},{key:"getSurveyInviteLink",value:function(){var A=(0,x.default)(y.default.mark(function i(m,q){var J,ce,se,he,ve,ae,de,Re,Ee,ue,z=this,ye=arguments;return y.default.wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return J=ye.length>2&&void 0!==ye[2]?ye[2]:{},ce=B.Timer.TIMER(),this.logger&&this.logger.log(D.LogLevel.INFO,E.OCSDKTelemetryEvent.GETSURVEYINVITELINKSTARTED,{SurveyOwnerId:m},"Get Survey Invite Link Started"),se="/".concat(O.default.LiveChatGetSurveyInviteLinkPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(m),he=v.default.create(),(0,U.default)(he,{retries:this.configuration.maxRequestRetriesOnFailure}),ae=J.requestId,de=_.default.defaultHeaders,(ve=J.authenticatedUserToken)&&(se="/".concat(O.default.LiveChatAuthGetSurveyInviteLinkPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(m),de[V.default.authenticatedUserToken]=ve,de[V.default.widgetAppId]=this.omnichannelConfiguration.widgetId),ae&&(de[V.default.requestId]=ae),Re="".concat(this.omnichannelConfiguration.orgUrl).concat(se),Ee="POST",ue={data:JSON.stringify(q),headers:de,method:Ee,url:Re},ie.abrupt("return",new Promise(function(){var ee=(0,x.default)(y.default.mark(function Z(le,Oe){var we,Te;return y.default.wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return Ye.prev=0,Ye.next=3,he(ue);case 3:Te=(we=Ye.sent).data,z.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.GETSURVEYINVITELINKSUCCEEDED,"Get Survey Invite Link Succeeded",ae,we,ce.milliSecondsElapsed,se,Ee),le(Te),Ye.next=15;break;case 10:Ye.prev=10,Ye.t0=Ye.catch(0),z.logWithLogger(D.LogLevel.ERROR,E.OCSDKTelemetryEvent.GETSURVEYINVITELINKFAILED,"Get Survey Invite Link failed",ae,void 0,ce.milliSecondsElapsed,se,Ee,Ye.t0),Oe();case 15:case"end":return Ye.stop()}},Z,null,[[0,10]])}));return function(Z,le){return ee.apply(this,arguments)}}()));case 14:case"end":return ie.stop()}},i,this)}));return function(i,m){return A.apply(this,arguments)}}()},{key:"getChatTranscripts",value:function(){var A=(0,x.default)(y.default.mark(function i(m,q,z){var ce,se,he,ve,ae,de,Re,Ee,ue,ye,J=this,Se=arguments;return y.default.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ce=Se.length>3&&void 0!==Se[3]?Se[3]:{},se=B.Timer.TIMER(),this.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.GETCHATTRANSCRIPTSTARTED,"Get Chat Transcript Started",m),he="/".concat(O.default.LiveChatGetChatTranscriptPath,"/").concat(q,"/").concat(m,"?channelId=").concat(this.omnichannelConfiguration.channelId),ve=v.default.create(),(0,U.default)(ve,{retries:this.configuration.maxRequestRetriesOnFailure}),ae=ce.authenticatedUserToken,de=ce.currentLiveChatVersion,(Re=_.default.defaultHeaders)[V.default.organizationId]=this.omnichannelConfiguration.orgId,Re[V.default.widgetAppId]=this.omnichannelConfiguration.widgetId,Re[V.default.authorization]=z,this.liveChatVersion===E.LiveChatVersion.V2||de&&de===E.LiveChatVersion.V2?(he="/".concat(O.default.LiveChatv2GetChatTranscriptPath,"/").concat(q,"/").concat(m,"?channelId=").concat(this.omnichannelConfiguration.channelId),ae&&(he="/".concat(O.default.LiveChatv2AuthGetChatTranscriptPath,"/").concat(q,"/").concat(m,"?channelId=").concat(this.omnichannelConfiguration.channelId))):ae&&(he="/".concat(O.default.LiveChatAuthGetChatTranscriptPath,"/").concat(q,"/").concat(m,"?channelId=").concat(this.omnichannelConfiguration.channelId)),Ee="".concat(this.omnichannelConfiguration.orgUrl).concat(he),ye={headers:Re,method:ue="GET",url:Ee},ee.abrupt("return",new Promise(function(){var Z=(0,x.default)(y.default.mark(function le(Oe,we){var Te,Ne;return y.default.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return De.prev=0,De.next=3,ve(ye);case 3:Ne=(Te=De.sent).data,J.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.GETCHATTRANSCRIPTSUCCEEDED,"Get Chat Transcript succeeded",m,Te,se.milliSecondsElapsed,he,ue),Oe(Ne),De.next=15;break;case 10:De.prev=10,De.t0=De.catch(0),J.logWithLogger(D.LogLevel.ERROR,E.OCSDKTelemetryEvent.GETCHATTRANSCRIPTFAILED,"Get Chat Transcript failed",m,void 0,se.milliSecondsElapsed,he,ue,De.t0),we(De.t0);case 15:case"end":return De.stop()}},le,null,[[0,10]])}));return function(le,Oe){return Z.apply(this,arguments)}}()));case 16:case"end":return ee.stop()}},i,this)}));return function(i,m,q){return A.apply(this,arguments)}}()},{key:"emailTranscript",value:function(){var A=(0,x.default)(y.default.mark(function i(m,q,z){var ce,se,he,ve,ae,de,Re,Ee,ue,J=this,ye=arguments;return y.default.wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ce=ye.length>3&&void 0!==ye[3]?ye[3]:{},se=B.Timer.TIMER(),this.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.EMAILTRANSCRIPTSTARTED,"Email Transcript Started",m),he="/".concat(O.default.LiveChatTranscriptEmailRequestPath,"/").concat(m,"?channelId=").concat(this.omnichannelConfiguration.channelId),ve=v.default.create(),(0,U.default)(ve,{retries:this.configuration.maxRequestRetriesOnFailure}),ae=ce.authenticatedUserToken,(de=_.default.defaultHeaders)[V.default.organizationId]=this.omnichannelConfiguration.orgId,de[V.default.widgetAppId]=this.omnichannelConfiguration.widgetId,de[V.default.authorization]=q,ae&&(he="/".concat(O.default.LiveChatAuthTranscriptEmailRequestPath,"/").concat(m,"?channelId=").concat(this.omnichannelConfiguration.channelId)),Re="".concat(this.omnichannelConfiguration.orgUrl).concat(he),Ee="POST",ue={data:JSON.stringify(z),headers:de,method:Ee,url:Re},ie.abrupt("return",new Promise(function(){var ee=(0,x.default)(y.default.mark(function Z(le,Oe){return y.default.wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return Me.prev=0,Me.next=3,ve(ue);case 3:J.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.EMAILTRANSCRIPTSUCCEEDED,"Email Transcript succeeded",m,Me.sent,se.milliSecondsElapsed,he,Ee),le(),Me.next=14;break;case 9:Me.prev=9,Me.t0=Me.catch(0),J.logWithLogger(D.LogLevel.ERROR,E.OCSDKTelemetryEvent.EMAILTRANSCRIPTFAILED,"Email Transcript Failed",m,void 0,se.milliSecondsElapsed,he,Ee,Me.t0),Oe();case 14:case"end":return Me.stop()}},Z,null,[[0,9]])}));return function(Z,le){return ee.apply(this,arguments)}}()));case 16:case"end":return ie.stop()}},i,this)}));return function(i,m,q){return A.apply(this,arguments)}}()},{key:"fetchDataMaskingInfo",value:function(){var A=(0,x.default)(y.default.mark(function i(m){var z,J,ce,se,he,ae,q=this;return y.default.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return z=B.Timer.TIMER(),this.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.FETCHDATAMASKINGSTARTED,"Fetch Data Masking Started",m),m||(m=(0,j.uuidv4)()),J="/".concat(O.default.LiveChatFetchDataMaskingInfoPath,"/").concat(this.omnichannelConfiguration.orgId),ce=v.default.create(),(0,U.default)(ce,{retries:this.configuration.maxRequestRetriesOnFailure}),(se=_.default.defaultHeaders)[V.default.organizationId]=this.omnichannelConfiguration.orgId,se[V.default.requestId]=m,he="".concat(this.omnichannelConfiguration.orgUrl).concat(J),ae={headers:se,method:"GET",url:he},Re.abrupt("return",new Promise(function(){var Ee=(0,x.default)(y.default.mark(function ue(ye,Se){var ie,Z;return y.default.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.prev=0,we.next=3,ce(ae);case 3:Z=(ie=we.sent).data,q.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.FETCHDATAMASKINGSUCCEEDED,"Fetch Data Masking succeeded",m,ie,z.milliSecondsElapsed,J,"GET"),ye(Z),we.next=15;break;case 10:we.prev=10,we.t0=we.catch(0),q.logWithLogger(D.LogLevel.ERROR,E.OCSDKTelemetryEvent.FETCHDATAMASKINGFAILED,"Fetch Data Masking Failed",m,void 0,z.milliSecondsElapsed,J,"GET",we.t0),Se();case 15:case"end":return we.stop()}},ue,null,[[0,10]])}));return function(ue,ye){return Ee.apply(this,arguments)}}()));case 13:case"end":return Re.stop()}},i,this)}));return function(i){return A.apply(this,arguments)}}()},{key:"makeSecondaryChannelEventRequest",value:function(){var A=(0,x.default)(y.default.mark(function i(m,q){var z,J,ce,se,he,ve,ae,de,Re,Se=arguments;return y.default.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return z=Se.length>2&&void 0!==Se[2]?Se[2]:{},J=B.Timer.TIMER(),this.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.SECONDARYCHANNELEVENTREQUESTSTARTED,"Secondary Channel Event Request Started",m),ce="/".concat(O.default.LiveChatSecondaryChannelEventPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(m),se=v.default.create(),(0,U.default)(se,{retries:this.configuration.maxRequestRetriesOnFailure}),he=z.authenticatedUserToken,(ve=_.default.defaultHeaders)[V.default.organizationId]=this.omnichannelConfiguration.orgId,he&&(ve[V.default.authenticatedUserToken]=he,ce="/".concat(O.default.LiveChatAuthSecondaryChannelEventPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(m)),ce+="?channelId="+_.default.defaultChannelId,ae="".concat(this.omnichannelConfiguration.orgUrl).concat(ce),de="POST",Re={data:JSON.stringify(q),headers:ve,method:de,url:ae},ee.prev=14,ee.next=17,se(Re);case 17:this.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.SECONDARYCHANNELEVENTREQUESTSUCCEEDED,"Secondary Channel Event Request Succeeded",m,ee.sent,J.milliSecondsElapsed,ce,de),ee.next=27;break;case 22:throw ee.prev=22,ee.t0=ee.catch(14),this.logWithLogger(D.LogLevel.ERROR,E.OCSDKTelemetryEvent.SECONDARYCHANNELEVENTREQUESTFAILED,"Secondary Channel Event Request Failed",m,void 0,J.milliSecondsElapsed,ce,de,ee.t0),ee.t0;case 27:case"end":return ee.stop()}},i,this,[[14,22]])}));return function(i,m){return A.apply(this,arguments)}}()},{key:"sendTypingIndicator",value:function(){var A=(0,x.default)(y.default.mark(function i(m,q){var J,ce,se,he,ve,ae,de,Re,Ee,z=this,ue=arguments;return y.default.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:if(J=ue.length>2&&void 0!==ue[2]?ue[2]:{},q&&q===E.LiveChatVersion.V2){Se.next=3;break}return Se.abrupt("return",Promise.resolve());case 3:if(ce=B.Timer.TIMER(),se=J.customerDisplayName,q&&q===E.LiveChatVersion.V2){Se.next=7;break}throw new Error("Typing indicator is only supported on v2");case 7:return he="/".concat(O.default.SendTypingIndicatorPath,"/").concat(m),ve=v.default.create(),(ae=_.default.defaultHeaders)[V.default.organizationId]=this.omnichannelConfiguration.orgId,se&&(ae[_.default.customerDisplayName]=se),de="".concat(this.omnichannelConfiguration.orgUrl).concat(he),Ee={headers:ae,method:Re="POST",url:de},Se.abrupt("return",new Promise(function(){var ie=(0,x.default)(y.default.mark(function ee(Z,le){return y.default.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ne.prev=0,Ne.next=3,ve(Ee);case 3:z.logWithLogger(D.LogLevel.INFO,E.OCSDKTelemetryEvent.SENDTYPINGINDICATORSUCCEEDED,"Send Typing Indicator Succeeded",m,Ne.sent,ce.milliSecondsElapsed,he,Re),Z(),Ne.next=14;break;case 9:Ne.prev=9,Ne.t0=Ne.catch(0),z.logWithLogger(D.LogLevel.ERROR,E.OCSDKTelemetryEvent.SENDTYPINGINDICATORFAILED,"Send Typing Indicator Failed",m,void 0,ce.milliSecondsElapsed,he,Re,Ne.t0),le(Ne.t0);case 14:case"end":return Ne.stop()}},ee,null,[[0,9]])}));return function(ee,Z){return ie.apply(this,arguments)}}()));case 16:case"end":return Se.stop()}},i,this)}));return function(i,m){return A.apply(this,arguments)}}()},{key:"logWithLogger",value:function(d,i,m,q,z,J,ce,se,he,ve){var ae;if(this.logger){he&&I.LoggingSanitizer.stripErrorSensitiveProperties(he);var de=void 0;ve&&((de=r({},ve)).customContextData&&I.LoggingSanitizer.stripCustomContextDataValues(de.customContextData),de.preChatResponse&&I.LoggingSanitizer.stripPreChatResponse(de.preChatResponse),I.LoggingSanitizer.stripGeolocation(de));var Re={RequestId:q,Region:null==z?void 0:z.data.Region,ElapsedTimeInMilliseconds:J,TransactionId:null==z?void 0:z.headers[_.default.transactionid],RequestPath:ce,RequestMethod:se,ResponseStatusCode:z?z.status:he?null===(ae=he.response)||void 0===ae?void 0:ae.status:void 0,ExceptionDetails:he,RequestPayload:de};this.logger.log(d,i,Re,m)}}}]),M;var A}();L.default=f,(0,P.default)(f,"defaultConfiguration",{getChatTokenRetryCount:10,getChatTokenTimeBetweenRetriesOnFailure:1e4,getChatTokenRetryOn429:!1,maxRequestRetriesOnFailure:3})},4491:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var N=p(T(9901)),y=p(T(9524)),x=p(T(5413)),u=p(T(4162)),g=p(T(8634));L.default=function(){function P(){(0,N.default)(this,P)}return(0,y.default)(P,null,[{key:"getSDK",value:function(v,h,_){var b=new u.default(_);return new g.default({channelId:v.channelId||x.default.defaultChannelId,orgId:v.orgId,orgUrl:v.orgUrl,widgetId:v.widgetId},h||{},b)}}]),P}()},4717:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.BrowserInfo=L.UNKNOWN_VERSION=void 0;var N=p(T(9901)),y=p(T(9524)),x=p(T(5633)),u=T(2e3),g="([\\d,.]+)";L.UNKNOWN_VERSION="U";var P=function(){function E(){(0,N.default)(this,E)}return(0,y.default)(E,null,[{key:"getUserAgent",value:function(){return this.userAgent()}},{key:"userAgentContainsString",value:function(h){return this.getUserAgent().indexOf(h)>-1}},{key:"isChrome",value:function(){return this.userAgentContainsString(u.BrowserVendor.CHROME)&&!this.userAgentContainsString(u.BrowserVendor.EDGE)&&!this.userAgentContainsString(u.BrowserVendor.EDGE_CHROMIUM)}},{key:"isIe",value:function(){return this.userAgentContainsString("Trident")}},{key:"isEdge",value:function(){return this.userAgentContainsString(u.BrowserVendor.EDGE)||this.userAgentContainsString(u.BrowserVendor.EDGE_CHROMIUM)}},{key:"isOpera",value:function(){return this.userAgentContainsString("OPR/")}},{key:"getBrowserName",value:function(){return this.isOpera()?u.BrowserVendor.OPERA:this.isEdge()?u.BrowserVendor.EDGE:this.isChrome()?u.BrowserVendor.CHROME:this.userAgentContainsString(u.BrowserVendor.FIREFOX)?u.BrowserVendor.FIREFOX:this.userAgentContainsString(u.BrowserVendor.SAFARI)?u.BrowserVendor.SAFARI:this.isIe()?u.BrowserVendor.IE:u.BrowserVendor.UNKNOWN}},{key:"getBrowserVersion",value:function(){var h=this;return this.isIe()?function(){var I=h.getUserAgent(),D=I.match(new RegExp(u.BrowserVendor.IE+" "+g));if(D)return D[1];var k=I.match(new RegExp("rv:"+g));return k?k[1]:void 0}():function(I){I===u.BrowserVendor.SAFARI&&(I="Version"),I===u.BrowserVendor.OPERA&&(I="OPR"),I===u.BrowserVendor.EDGE&&(I="Edge?");var D=h.getUserAgent().match(new RegExp(I+"/"+g));return D?D[1]:"U"}(this.getBrowserName())}}]),E}();L.BrowserInfo=P,(0,x.default)(P,"userAgent",function(){return window.navigator.userAgent})},9114:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.CustomContextData=void 0;var N=p(T(9901)),y=p(T(9524));L.CustomContextData=function(){function u(){(0,N.default)(this,u)}return(0,y.default)(u,null,[{key:"sort",value:function(C){var P=new Array;return Object.keys(C).forEach(function(E){if(C&&C["".concat(E)]){var v={key:E,value:C["".concat(E)]};P.push(v)}}),P.sort(function(E,v){var h=E.key.toUpperCase(),_=v.key.toUpperCase();return h<_?-1:h>_?1:0}),P}}]),u}()},6812:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.DeviceInfo=void 0;var N=p(T(9901)),y=p(T(9524)),x=T(2e3);L.DeviceInfo=function(){function g(){(0,N.default)(this,g)}return(0,y.default)(g,null,[{key:"getDeviceType",value:function(){return window.navigator.userAgent.match(/(android|ipod|windows phone|wpdesktop|windows ce|blackberry\w*|meego|webos|palm|symbian|pda|\w*?mobile\w*?|\w*?phone\w*?)/i)?x.DeviceType.Mobile:window.navigator.userAgent.match(/tablet|ipad/i)?x.DeviceType.Tablet:x.DeviceType.Desktop}}]),g}()},682:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var N=p(T(9901)),y=p(T(9524));L.default=function(){function u(){(0,N.default)(this,u)}return(0,y.default)(u,null,[{key:"raiseCustomEvent",value:function(C,P){var E=u.createCustomEvent(C,P);window.dispatchEvent(E)}},{key:"createCustomEvent",value:function(C,P){var E=P?{detail:P}:void 0,v=null;try{v=new CustomEvent(C,E)}catch(h){(v=document.createEvent("CustomEvent")).initCustomEvent(C,!0,!0,E)}return v}}]),u}()},9569:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.LoggingSanitizer=void 0;var N=p(T(4738)),y=p(T(9901)),x=p(T(9524)),u=p(T(5413));L.LoggingSanitizer=function(){function C(){(0,y.default)(this,C)}return(0,x.default)(C,null,[{key:"stripCustomContextDataValues",value:function(E){var v;null===(v=Object.keys(E))||void 0===v||v.forEach(function(h){var _;null!==(_=E["".concat(h)])&&void 0!==_&&_.value&&(E["".concat(h)].value=u.default.hiddenContentPlaceholder)})}},{key:"stripPreChatResponse",value:function(E){Object.keys(E).forEach(function(v){E["".concat(v)]&&"Type"!==v&&(E["".concat(v)]=u.default.hiddenContentPlaceholder)})}},{key:"stripGeolocation",value:function(E){Object.keys(E).includes("longitude")&&(E.longitude=u.default.hiddenContentPlaceholder),Object.keys(E).includes("latitude")&&(E.latitude=u.default.hiddenContentPlaceholder)}},{key:"stripErrorSensitiveProperties",value:function(E){var v,_,h=this;E&&"object"===(0,N.default)(E)&&(null===(v=Object.keys(E))||void 0===v?void 0:v.length)>0&&(null===(_=Object.keys(E))||void 0===_||_.forEach(function(b){if(-1!==u.default.sensitiveProperties.indexOf(b)&&delete E["".concat(b)],"data"===b){var w;if("string"==typeof E[b])try{w=JSON.parse(E[b])}catch(I){w=void 0}w&&(Object.keys(w).includes("preChatResponse")&&C.stripPreChatResponse(w.preChatResponse),Object.keys(w).includes("customContextData")&&C.stripCustomContextDataValues(w.customContextData),C.stripGeolocation(w),E[b]=JSON.stringify(w))}null===E["".concat(b)]||"object"!==(0,N.default)(E["".concat(b)])||h.stripErrorSensitiveProperties(E["".concat(b)])}))}}]),C}()},7169:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.OSInfo=void 0;var N=p(T(9901)),y=p(T(9524)),x=T(2e3);L.OSInfo=function(){function g(){(0,N.default)(this,g)}return(0,y.default)(g,null,[{key:"getOsType",value:function(){var I=function(){return window.navigator.userAgent};return I().match(/windows\sphone\s\d+\.\d+/i)?x.OperatingSystem.WINDOWS_PHONE:I().match(/ arm;/i)?x.OperatingSystem.WINDOWS_RT:I().match(/(iPad|iPhone|iPod)(?=.*like Mac OS X)/i)?x.OperatingSystem.IOS:I().match(/android/i)?x.OperatingSystem.ANDROID:I().match(/(linux|joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|cros)/i)?x.OperatingSystem.LINUX:I().match(/(macintosh|mac os x)/i)?x.OperatingSystem.MACOSX:I().match(/(windows|win32)/i)?x.OperatingSystem.WINDOWS:x.OperatingSystem.UNKNOWN}}]),g}()},7276:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var N=p(T(9901)),y=p(T(9524));L.default=function(){function u(){(0,N.default)(this,u)}return(0,y.default)(u,null,[{key:"GETTELEMETRYEVENTDATA",value:function(C,P,E){return{Description:E,ElapsedTimeInMilliseconds:P.ElapsedTimeInMilliseconds,Event:C,ExceptionDetails:P.ExceptionDetails,Region:P.Region,RequestId:P.RequestId,TransactionId:P.TransactionId,RequestPayload:P.RequestPayload,RequestPath:P.RequestPath,RequestMethod:P.RequestMethod,ResponseStatusCode:P.ResponseStatusCode}}}]),u}()},3945:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.Timer=void 0;var N=p(T(9901)),y=p(T(9524));L.Timer=function(){function u(){(0,N.default)(this,u)}return(0,y.default)(u,null,[{key:"TIMER",value:function(){var C=(new Date).getTime();return{get milliSecondsElapsed(){return(new Date).getTime()-C}}}}]),u}()},1729:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var N=p(T(5413)),y=p(T(6440));L.default=function(C,P){null==P.retryOn429&&(P.retryOn429=!0);var v=P.retries,h=1;C.interceptors.response.use(void 0,function(I){var D=I.config,k=I.response;return!D||k&&k.status===N.default.tooManyRequestsStatusCode&&!1===P.retryOn429?Promise.reject(I):h<v?(h++,new Promise(function(V){return(0,y.default)(1e3).then(function(){return V(C(D))})})):Promise.reject(I)})}},6440:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0,L.default=function(y){return new Promise(function(x){return setTimeout(x,y)})}},8566:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.uuidv4=void 0,L.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(N){var y=16*Math.random()|0;return("x"===N?y:3&y|8).toString(16)})}},3762:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),Object.defineProperty(L,"SDKProvider",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(L,"uuidv4",{enumerable:!0,get:function(){return g.uuidv4}});var N=p(T(4738)),y=p(T(3096)),x=p(T(4491)),u=p(T(682)),g=T(8566);!function(){if(void 0===global.window&&(global.window=global),void 0===("undefined"==typeof window?"undefined":(0,N.default)(window)))throw new Error("window object not found");"Microsoft"in window||(window.Microsoft={}),"CRM"in window.Microsoft||(window.Microsoft.CRM={}),"Omnichannel"in window.Microsoft.CRM||(window.Microsoft.CRM.Omnichannel={}),"SDK"in window.Microsoft.CRM.Omnichannel||(window.Microsoft.CRM.Omnichannel.SDK={SDKProvider:x.default,Util:{uuidv4:g.uuidv4}}),window.document&&u.default.raiseCustomEvent(y.default.OCSDKLOAD)}()},7987:function(Y,L){"use strict";var T=this&&this.__assign||function(){return(T=Object.assign||function(N){for(var y,x=1,u=arguments.length;x<u;x++)for(var g in y=arguments[x])Object.prototype.hasOwnProperty.call(y,g)&&(N[g]=y[g]);return N}).apply(this,arguments)};Object.defineProperty(L,"__esModule",{value:!0});var p=function(){function N(y){this.debug=!1,this.debug=!1,this.logger=y}return N.prototype.setDebug=function(y){this.debug=y},N.prototype.log=function(y,x,u){var g,C=T(T({},u),{Event:x});this.debug&&console.log(C),null===(g=this.logger)||void 0===g||g.logClientSdkTelemetryEvent(y,C)},N}();L.default=p},9237:function(Y,L,T){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(B){for(var U,j=1,W=arguments.length;j<W;j++)for(var X in U=arguments[j])Object.prototype.hasOwnProperty.call(U,X)&&(B[X]=U[X]);return B}).apply(this,arguments)},N=this&&this.__awaiter||function(B,U,j,W){return new(j||(j=Promise))(function(K,ge){function R(l){try{s(W.next(l))}catch(a){ge(a)}}function r(l){try{s(W.throw(l))}catch(a){ge(a)}}function s(l){l.done?K(l.value):function(K){return K instanceof j?K:new j(function(ge){ge(K)})}(l.value).then(R,r)}s((W=W.apply(B,U||[])).next())})},y=this&&this.__generator||function(B,U){var W,X,K,ge,j={label:0,sent:function(){if(1&K[0])throw K[1];return K[1]},trys:[],ops:[]};return ge={next:R(0),throw:R(1),return:R(2)},"function"==typeof Symbol&&(ge[Symbol.iterator]=function(){return this}),ge;function R(s){return function(l){return function(s){if(W)throw new TypeError("Generator is already executing.");for(;j;)try{if(W=1,X&&(K=2&s[0]?X.return:s[0]?X.throw||((K=X.return)&&K.call(X),0):X.next)&&!(K=K.call(X,s[1])).done)return K;switch(X=0,K&&(s=[2&s[0],K.value]),s[0]){case 0:case 1:K=s;break;case 4:return j.label++,{value:s[1],done:!1};case 5:j.label++,X=s[1],s=[0];continue;case 7:s=j.ops.pop(),j.trys.pop();continue;default:if(!(K=(K=j.trys).length>0&&K[K.length-1])&&(6===s[0]||2===s[0])){j=0;continue}if(3===s[0]&&(!K||s[1]>K[0]&&s[1]<K[3])){j.label=s[1];break}if(6===s[0]&&j.label<K[1]){j.label=K[1],K=s;break}if(K&&j.label<K[2]){j.label=K[2],j.ops.push(s);break}K[2]&&j.ops.pop(),j.trys.pop();continue}s=U.call(B,j)}catch(l){s=[6,l],X=0}finally{W=K=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(L,"__esModule",{value:!0});var x=T(7643),u=(()=>{return(B=u||(u={})).Create="Create",B.Upload="Upload",u;var B})(),g=(()=>{return(B=g||(g={})).CreateDocumentType="sharing/file",B.UploadDocumentType="original",B.CreateImageType="pish/image",B.UploadImageType="imgpsh",g;var B})(),C=(()=>{return(B=C||(C={})).Accept="Accept",B.AcceptEncoding="Accept-Encoding",B.BehaviorOverride="BehaviorOverride",B.Authorization="Authorization",B.ClientVersion="X-MS-Client-Version",B.ContentType="Content-Type",C;var B})(),P=(()=>{return(B=P||(P={})).applicationFormUrlEncoded="application/x-www-form-urlencoded",B.applicationJson="application/json",P;var B})(),E=(()=>{return(B=E||(E={})).Expired="expired",B.Failed="failed",B.InProgress="in progress",B.Malware="malware",B.Ready="ready",E;var B})(),v=["image/jpeg","image/png","image/gif"],h=function(B){B.regionGTMS||(B.regionGTMS={ams:"https://us-api.asm.skype.com"})},_=function(B){var U;return(U={})[C.Authorization]="skype_token "+B,U[C.ClientVersion]="os=Windows; osVer=10; proc=Win32; lcid=en-us; deviceType=1; country=IN; clientName=swc; clientVer=912/0.106.0.34//swc",U},w=function(B){return B&&B.length>0?B:v},I=function(B,U,j){return w(j).includes(B.toLowerCase())?U===u.Create?g.CreateImageType:g.UploadImageType:U===u.Create?g.CreateDocumentType:g.UploadDocumentType};L.default={skypeTokenAuth:function(B){return N(void 0,void 0,void 0,function(){var U,W,K,ge,R;return y(this,function(r){switch(r.label){case 0:x.default.debug&&console.log("[API][skypeTokenAuth]"),h(B),U=(B.amsEndpoint||(null===(R=B.regionGTMS)||void 0===R?void 0:R.ams))+"/v1/skypetokenauth",(ge={})[C.Authorization]="skype_token "+B.token,ge[C.Accept]=P.applicationJson,ge[C.BehaviorOverride]="redirectAs404",ge[C.ContentType]=P.applicationFormUrlEncoded,W={headers:ge,method:"POST",body:"skypetoken="+B.token},r.label=1;case 1:return r.trys.push([1,3,,4]),[4,fetch(U,W)];case 2:return[2,r.sent()];case 3:throw K=r.sent(),!x.default.silentError&&console.log(K),new Error("AMSAuth");case 4:return[2]}})})},createObject:function(B,U,j,W){return N(void 0,void 0,void 0,function(){var X,K,ge,R,r,s,f,M,A,d;return y(this,function(i){switch(i.label){case 0:x.default.debug&&console.log("[API][createObject]"),(M={})[B]=["read"],X=M,K=I(U.type,u.Create,W),ge={filename:U.name,permissions:X,type:K},h(j),R=(j.amsEndpoint||(null===(d=null==j?void 0:j.regionGTMS)||void 0===d?void 0:d.ams))+"/v1/objects",r=p(p({},_(j.token)),((A={})[C.ContentType]=P.applicationJson,A)),s={headers:r,method:"POST",body:JSON.stringify(ge),credentials:"include"},i.label=1;case 1:return i.trys.push([1,4,,5]),[4,fetch(R,s)];case 2:return[4,i.sent().json()];case 3:return[2,i.sent()];case 4:throw f=i.sent(),!x.default.silentError&&console.log(f),new Error("AMSCreateObjectFailed");case 5:return[2]}})})},uploadDocument:function(B,U,j,W){return N(void 0,void 0,void 0,function(){var X,K,ge,R,s,l,a;return y(this,function(f){switch(f.label){case 0:x.default.debug&&console.log("[API][uploadDocument]"),h(j),X=I(U.type,u.Upload,W),K=(j.amsEndpoint||(null===(a=null==j?void 0:j.regionGTMS)||void 0===a?void 0:a.ams))+"/v1/objects/"+B+"/content/"+X,ge=p(p({},_(j.token)),((l={})[C.ContentType]=P.applicationFormUrlEncoded,l)),R={headers:ge,method:"PUT",body:U.data?U.data:U},f.label=1;case 1:return f.trys.push([1,3,,4]),[4,fetch(K,R)];case 2:return f.sent(),[2,{name:U.name,size:U.size,type:U.type,id:B,url:K,fileSharingProtocolType:0}];case 3:throw s=f.sent(),!x.default.silentError&&console.log(s),new Error("AMSUploadDocumentFailed");case 4:return[2]}})})},getViewStatus:function(B,U,j){return N(void 0,void 0,void 0,function(){var W,X,K,R,r,s,a,f;return y(this,function(M){switch(M.label){case 0:x.default.debug&&console.log("[API][getViewStatus]"),h(U),W=(U.amsEndpoint||(null===(f=null==U?void 0:U.regionGTMS)||void 0===f?void 0:f.ams))+"/v1/objects/"+B.id+"/views/"+(w(j).includes(B.type)?"imgpsh_fullsize_anim":"original")+"/status",X=_(U.token),K={headers:X,method:"GET"},M.label=1;case 1:return M.trys.push([1,4,,5]),[4,fetch(W,K)];case 2:return[4,M.sent().json()];case 3:if(R=M.sent(),r=R.content_state,s=R.view_state,!R.view_location)throw new Error("view_location is empty");if(s&&s!==E.Ready.toString()&&!x.default.silentError&&console.error("view_state is not ready"),r===E.Expired.toString())throw new Error("content_state is expired");return[2,R];case 4:throw a=M.sent(),!x.default.silentError&&console.log(a),new Error("AMSGetViewStatusFailed");case 5:return[2]}})})},getView:function(B,U,j,W){return N(void 0,void 0,void 0,function(){var X,K,ge,s;return y(this,function(l){switch(l.label){case 0:x.default.debug&&console.log("[API][getView]"),h(j),X=U,K=_(j.token),w(W).includes(B.type)&&(K[C.Accept]="image/webp,image/ *,*/*;q=0.8",K[C.AcceptEncoding]="gzip, deflate, sdch, br"),ge={headers:K,method:"GET"},l.label=1;case 1:return l.trys.push([1,4,,5]),[4,fetch(X,ge)];case 2:return[4,l.sent().blob()];case 3:return[2,l.sent()];case 4:throw s=l.sent(),!x.default.silentError&&console.log(s),new Error("AMSGetViewFailed");case 5:return[2]}})})}}},4543:function(Y,L,T){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(b){for(var w,I=1,D=arguments.length;I<D;I++)for(var k in w=arguments[I])Object.prototype.hasOwnProperty.call(w,k)&&(b[k]=w[k]);return b}).apply(this,arguments)},N=this&&this.__awaiter||function(b,w,I,D){return new(I||(I=Promise))(function(O,V){function B(W){try{j(D.next(W))}catch(X){V(X)}}function U(W){try{j(D.throw(W))}catch(X){V(X)}}function j(W){W.done?O(W.value):function(O){return O instanceof I?O:new I(function(V){V(O)})}(W.value).then(B,U)}j((D=D.apply(b,w||[])).next())})},y=this&&this.__generator||function(b,w){var D,k,O,V,I={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return V={next:B(0),throw:B(1),return:B(2)},"function"==typeof Symbol&&(V[Symbol.iterator]=function(){return this}),V;function B(j){return function(W){return function(j){if(D)throw new TypeError("Generator is already executing.");for(;I;)try{if(D=1,k&&(O=2&j[0]?k.return:j[0]?k.throw||((O=k.return)&&O.call(k),0):k.next)&&!(O=O.call(k,j[1])).done)return O;switch(k=0,O&&(j=[2&j[0],O.value]),j[0]){case 0:case 1:O=j;break;case 4:return I.label++,{value:j[1],done:!1};case 5:I.label++,k=j[1],j=[0];continue;case 7:j=I.ops.pop(),I.trys.pop();continue;default:if(!(O=(O=I.trys).length>0&&O[O.length-1])&&(6===j[0]||2===j[0])){I=0;continue}if(3===j[0]&&(!O||j[1]>O[0]&&j[1]<O[3])){I.label=j[1];break}if(6===j[0]&&I.label<O[1]){I.label=O[1],O=j;break}if(O&&I.label<O[2]){I.label=O[2],I.ops.push(j);break}O[2]&&I.ops.pop(),I.trys.pop();continue}j=w.call(b,I)}catch(W){j=[6,W],k=0}finally{D=O=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}([j,W])}}};Object.defineProperty(L,"__esModule",{value:!0});var x=T(2782),u=T(7643),g=T(4239),C=T(9638),P=T(759),E=T(8202),v=x.sdkVersion,_=function(){function b(w,I){void 0===w&&(w=void 0),void 0===I&&(I=void 0),this.clientId=E.uuidv4(),this.origin=window.location.origin,this.requestCallbacks={},this.debug=!1,this.iframeLoaded=!1,this.logger=w,this.iframeId="Microsoft_Omnichannel_AMSClient_Iframe_Window",I&&I.multiClient&&(this.iframeId=this.clientId)}return b.prototype.setDebug=function(w){this.debug=w},b.prototype.setup=function(){return N(this,void 0,void 0,function(){var w=this;return y(this,function(I){switch(I.label){case 0:if(this.debug&&console.log("[FramedClient][initialize]"),this.onMessageEvent(function(D){return w.handleEvent(D)}),!g.default.isBrowser())throw new Error("FramedMode was used in non-Web platform");return[4,this.loadIframe()];case 1:return I.sent(),this.iframeLoaded||!u.default.silentError&&console.error("iframe not loaded"),[2]}})})},b.prototype.initialize=function(w){return N(this,void 0,void 0,function(){return y(this,function(I){switch(I.label){case 0:return this.debug&&console.log("[FramedClient][initialize]"),this.chatToken=w.chatToken,[4,this.skypeTokenAuth()];case 1:return I.sent(),[2]}})})},b.prototype.skypeTokenAuth=function(w){return void 0===w&&(w=null),N(this,void 0,void 0,function(){var I,D=this;return y(this,function(k){switch(k.label){case 0:return this.debug&&console.log("[FramedClient][skypeAuth]"),I={chatToken:w||this.chatToken},[4,this.loadIframe()];case 1:return k.sent(),[2,new Promise(function(O,V){D.postMessage(P.default.Request,C.default.SkypeTokenAuth,I,O,V)})]}})})},b.prototype.createObject=function(w,I,D,k){return void 0===D&&(D=null),void 0===k&&(k=[]),N(this,void 0,void 0,function(){var O,V=this;return y(this,function(B){switch(B.label){case 0:return this.debug&&console.log("[FramedClient][createObject]"),O={id:w,file:I,chatToken:D||this.chatToken,supportedImagesMimeTypes:k},[4,this.loadIframe()];case 1:return B.sent(),[2,new Promise(function(U,j){V.postMessage(P.default.Request,C.default.CreateObject,O,U,j)})]}})})},b.prototype.uploadDocument=function(w,I,D,k){return void 0===D&&(D=null),void 0===k&&(k=[]),N(this,void 0,void 0,function(){var O,V=this;return y(this,function(B){switch(B.label){case 0:return this.debug&&console.log("[FramedClient][uploadDocument]"),O={documentId:w,file:I,chatToken:D||this.chatToken,supportedImagesMimeTypes:k},[4,this.loadIframe()];case 1:return B.sent(),[2,new Promise(function(U,j){V.postMessage(P.default.Request,C.default.UploadDocument,O,U,j)})]}})})},b.prototype.getViewStatus=function(w,I,D){return void 0===I&&(I=null),void 0===D&&(D=[]),N(this,void 0,void 0,function(){var k,O=this;return y(this,function(V){switch(V.label){case 0:return k={fileMetadata:w,chatToken:I||this.chatToken,supportedImagesMimeTypes:D},[4,this.loadIframe()];case 1:return V.sent(),[2,new Promise(function(B,U){O.postMessage(P.default.Request,C.default.GetViewStatus,k,B,U)})]}})})},b.prototype.getView=function(w,I,D,k){return void 0===D&&(D=null),void 0===k&&(k=[]),N(this,void 0,void 0,function(){var O,V=this;return y(this,function(B){switch(B.label){case 0:return O={fileMetadata:w,viewLocation:I,chatToken:D||this.chatToken,supportedImagesMimeTypes:k},[4,this.loadIframe()];case 1:return B.sent(),[2,new Promise(function(U,j){V.postMessage(P.default.Request,C.default.GetView,O,U,j)})]}})})},b.prototype.fetchBlob=function(w){return N(this,void 0,void 0,function(){var k;return y(this,function(O){switch(O.label){case 0:return O.trys.push([0,3,,4]),[4,fetch(w)];case 1:return[4,O.sent().blob()];case 2:return[2,O.sent()];case 3:throw k=O.sent(),!u.default.silentError&&console.log(k),new Error("fetchBlob");case 4:return[2]}})})},b.prototype.onMessageEvent=function(w){window.addEventListener("message",w,!0)},b.prototype.postMessage=function(w,I,D,k,O){void 0===D&&(D={}),void 0===k&&(k=function(B){return{}}),void 0===O&&(O=function(B){return{}});var V=E.uuidv4();this.requestCallbacks[V]={resolve:k,reject:O},this.targetWindow?this.targetWindow.postMessage(p({clientId:this.clientId,requestId:V,eventType:w,eventName:I},D),"*"):!u.default.silentError&&console.error("Target window not found!")},b.prototype.handleEvent=function(w){var I;return N(this,void 0,void 0,function(){var D;return y(this,function(k){return w.origin===this.origin||x.baseUrl.includes(w.origin)?(w.data.clientId!==this.clientId||(this.debug&&console.log(w),w.source&&(this.targetWindow=w.source),w.data.eventType===P.default.Response&&(this.debug&&console.log("[FramedClient][Response]"),D=w.data,w.data.eventName===C.default.SkypeTokenAuth?D.requestId in this.requestCallbacks&&(this.requestCallbacks[D.requestId].resolve(),delete this.requestCallbacks[D.requestId]):w.data.eventName===C.default.CreateObject||w.data.eventName===C.default.UploadDocument||w.data.eventName===C.default.GetViewStatus||w.data.eventName===C.default.GetView?D.requestId in this.requestCallbacks&&(this.requestCallbacks[D.requestId].resolve(D.response),delete this.requestCallbacks[D.requestId]):w.data.eventName===C.default.SendTelemetry&&(null===(I=this.logger)||void 0===I||I.log(D.logLevel,D.logData.Event,D.logData)))),[2]):[2]})})},b.prototype.dispose=function(){var w;null===(w=document.getElementById(this.iframeId))||void 0===w||w.remove(),this.requestCallbacks={},this.iframeLoaded=!1},b.prototype.loadIframe=function(){return N(this,void 0,void 0,function(){var w=this;return y(this,function(I){return[2,new Promise(function(D,k){if(Array.from(document.getElementsByTagName("iframe")).filter(function(U){return U.id==w.iframeId}).length)return D();var B=document.createElement("iframe");B.id=w.iframeId,B.src=x.baseUrl+"/"+v+"/iframe.html?clientId="+w.clientId+"&debug="+w.debug+"&telemetry=true",B.addEventListener("load",function(){w.debug&&console.log("iframe loaded!"),w.iframeLoaded=!0,D()}),B.addEventListener("error",function(){k()}),document.head.append(B)})]})})},b}();L.default=_},1700:function(Y,L,T){"use strict";var p=this&&this.__awaiter||function(E,v,h,_){return new(h||(h=Promise))(function(w,I){function D(V){try{O(_.next(V))}catch(B){I(B)}}function k(V){try{O(_.throw(V))}catch(B){I(B)}}function O(V){V.done?w(V.value):function(w){return w instanceof h?w:new h(function(I){I(w)})}(V.value).then(D,k)}O((_=_.apply(E,v||[])).next())})},N=this&&this.__generator||function(E,v){var _,b,w,I,h={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return I={next:D(0),throw:D(1),return:D(2)},"function"==typeof Symbol&&(I[Symbol.iterator]=function(){return this}),I;function D(O){return function(V){return function(O){if(_)throw new TypeError("Generator is already executing.");for(;h;)try{if(_=1,b&&(w=2&O[0]?b.return:O[0]?b.throw||((w=b.return)&&w.call(b),0):b.next)&&!(w=w.call(b,O[1])).done)return w;switch(b=0,w&&(O=[2&O[0],w.value]),O[0]){case 0:case 1:w=O;break;case 4:return h.label++,{value:O[1],done:!1};case 5:h.label++,b=O[1],O=[0];continue;case 7:O=h.ops.pop(),h.trys.pop();continue;default:if(!(w=(w=h.trys).length>0&&w[w.length-1])&&(6===O[0]||2===O[0])){h=0;continue}if(3===O[0]&&(!w||O[1]>w[0]&&O[1]<w[3])){h.label=O[1];break}if(6===O[0]&&h.label<w[1]){h.label=w[1],w=O;break}if(w&&h.label<w[2]){h.label=w[2],h.ops.push(O);break}w[2]&&h.ops.pop(),h.trys.pop();continue}O=v.call(E,h)}catch(V){O=[6,V],b=0}finally{_=w=0}if(5&O[0])throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}([O,V])}}};Object.defineProperty(L,"__esModule",{value:!0});var y=T(9237),x=T(5356),u=T(9638),g=T(4239),C=T(2782),P=function(){function E(v){void 0===v&&(v=void 0),this.debug=!1,this.logger=v,g.default.isBrowser()&&console.error("FramedMode should be used on Web platform")}return E.prototype.setDebug=function(v){this.debug=v},E.prototype.setup=function(){return p(this,void 0,void 0,function(){return N(this,function(v){return[2,Promise.resolve()]})})},E.prototype.initialize=function(v){return p(this,void 0,void 0,function(){return N(this,function(h){switch(h.label){case 0:return this.debug&&console.log("[FramedlessClient][initialize]"),this.chatToken=v.chatToken,[4,this.skypeTokenAuth()];case 1:return h.sent(),[2]}})})},E.prototype.skypeTokenAuth=function(v){var h,_,b;return void 0===v&&(v=null),p(this,void 0,void 0,function(){var w,I;return N(this,function(D){switch(D.label){case 0:return D.trys.push([0,2,,3]),[4,y.default.skypeTokenAuth(v||this.chatToken)];case 1:return(w=D.sent()).ok||null===(h=this.logger)||void 0===h||h.log(x.default.ERROR,u.default.SkypeTokenAuth,{ChatId:v?v.chatId:null===(_=this.chatToken)||void 0===_?void 0:_.chatId,AMSClientVersion:C.sdkVersion,ExceptionDetails:{status:w.status}}),[2,w];case 2:throw I=D.sent(),null===(b=this.logger)||void 0===b||b.log(x.default.ERROR,u.default.SkypeTokenAuth,{ChatId:v?v.chatId:this.chatToken.chatId,AMSClientVersion:C.sdkVersion,ExceptionDetails:I}),new Error("skypeTokenAuth");case 3:return[2]}})})},E.prototype.createObject=function(v,h,_,b){var w;return void 0===_&&(_=null),void 0===b&&(b=[]),p(this,void 0,void 0,function(){var D;return N(this,function(k){switch(k.label){case 0:return k.trys.push([0,2,,3]),[4,y.default.createObject(v,h,_||this.chatToken,b)];case 1:return[2,k.sent()];case 2:throw D=k.sent(),null===(w=this.logger)||void 0===w||w.log(x.default.ERROR,u.default.CreateObject,{ChatId:_?_.chatId:this.chatToken.chatId,AMSClientVersion:C.sdkVersion,ExceptionDetails:D}),new Error("createObject");case 3:return[2]}})})},E.prototype.uploadDocument=function(v,h,_,b){var w;return void 0===_&&(_=null),void 0===b&&(b=[]),p(this,void 0,void 0,function(){var D;return N(this,function(k){switch(k.label){case 0:return k.trys.push([0,2,,3]),[4,y.default.uploadDocument(v,h,_||this.chatToken,b)];case 1:return[2,k.sent()];case 2:throw D=k.sent(),null===(w=this.logger)||void 0===w||w.log(x.default.ERROR,u.default.UploadDocument,{ChatId:_?_.chatId:this.chatToken.chatId,AMSClientVersion:C.sdkVersion,ExceptionDetails:D}),new Error("uploadDocument");case 3:return[2]}})})},E.prototype.getViewStatus=function(v,h,_){var b;return void 0===h&&(h=null),void 0===_&&(_=[]),p(this,void 0,void 0,function(){var I;return N(this,function(D){switch(D.label){case 0:return D.trys.push([0,2,,3]),[4,y.default.getViewStatus(v,h||this.chatToken,_)];case 1:return[2,D.sent()];case 2:throw I=D.sent(),null===(b=this.logger)||void 0===b||b.log(x.default.ERROR,u.default.GetViewStatus,{ChatId:h?h.chatId:this.chatToken.chatId,AMSClientVersion:C.sdkVersion,ExceptionDetails:I}),new Error("getViewStatus");case 3:return[2]}})})},E.prototype.getView=function(v,h,_,b){var w;return void 0===_&&(_=null),void 0===b&&(b=[]),p(this,void 0,void 0,function(){var D;return N(this,function(k){switch(k.label){case 0:return k.trys.push([0,2,,3]),[4,y.default.getView(v,h,_||this.chatToken,b)];case 1:return[2,k.sent()];case 2:throw D=k.sent(),null===(w=this.logger)||void 0===w||w.log(x.default.ERROR,u.default.GetView,{ChatId:_?_.chatId:this.chatToken.chatId,AMSClientVersion:C.sdkVersion,ExceptionDetails:D}),new Error("getView");case 3:return[2]}})})},E.prototype.fetchBlob=function(v){return p(this,void 0,void 0,function(){var b;return N(this,function(w){switch(w.label){case 0:return w.trys.push([0,3,,4]),[4,fetch(v)];case 1:return[4,w.sent().blob()];case 2:return[2,w.sent()];case 3:throw b=w.sent(),console.log(b),new Error("fetchBlob");case 4:return[2]}})})},E}();L.default=P},7643:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.silentError=!0,p.debug=!1,p}();L.default=T},5356:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={})).INFO="INFO",p.DEBUG="DEBUG",p.WARN="WARN",p.ERROR="ERROR",p.LOG="LOG",T;var p})();L.default=T},9638:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={})).IframeLoaded="AMSIframeLoaded",p.SkypeTokenAuth="AMSSkypeTokenAuth",p.CreateObject="AMSCreateObject",p.UploadDocument="AMSUploadDocument",p.GetViewStatus="AMSGetViewStatus",p.GetView="AMSGetView",p.SendTelemetry="AMSSendTelemetry",T;var p})();L.default=T},759:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={})).None="None",p.Request="Request",p.Response="Response",T;var p})();L.default=T},2782:(Y,L)=>{L.baseUrl="https://comms.omnichannelengagementhub.com/ams",L.sdkVersion="0.1.2"},3285:function(Y,L,T){"use strict";var p=this&&this.__awaiter||function(P,E,v,h){return new(v||(v=Promise))(function(b,w){function I(O){try{k(h.next(O))}catch(V){w(V)}}function D(O){try{k(h.throw(O))}catch(V){w(V)}}function k(O){O.done?b(O.value):function(b){return b instanceof v?b:new v(function(w){w(b)})}(O.value).then(I,D)}k((h=h.apply(P,E||[])).next())})},N=this&&this.__generator||function(P,E){var h,_,b,w,v={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return w={next:I(0),throw:I(1),return:I(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function I(k){return function(O){return function(k){if(h)throw new TypeError("Generator is already executing.");for(;v;)try{if(h=1,_&&(b=2&k[0]?_.return:k[0]?_.throw||((b=_.return)&&b.call(_),0):_.next)&&!(b=b.call(_,k[1])).done)return b;switch(_=0,b&&(k=[2&k[0],b.value]),k[0]){case 0:case 1:b=k;break;case 4:return v.label++,{value:k[1],done:!1};case 5:v.label++,_=k[1],k=[0];continue;case 7:k=v.ops.pop(),v.trys.pop();continue;default:if(!(b=(b=v.trys).length>0&&b[b.length-1])&&(6===k[0]||2===k[0])){v=0;continue}if(3===k[0]&&(!b||k[1]>b[0]&&k[1]<b[3])){v.label=k[1];break}if(6===k[0]&&v.label<b[1]){v.label=b[1],b=k;break}if(b&&v.label<b[2]){v.label=b[2],v.ops.push(k);break}b[2]&&v.ops.pop(),v.trys.pop();continue}k=E.call(P,v)}catch(O){k=[6,O],_=0}finally{h=b=0}if(5&k[0])throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}([k,O])}}};Object.defineProperty(L,"__esModule",{value:!0});var y=T(7987),x=T(4543),u=T(1700),g=T(7643);L.default=function(P){return p(void 0,void 0,void 0,function(){var E,v,h;return N(this,function(_){switch(_.label){case 0:return P.debug&&console.log("[createAMSClient] "+(P.framedMode?"FramedClient":"FramedlessClient")),E=new y.default(P.logger),v={multiClient:P.multiClient||!1},[4,(h=P.framedMode?new x.default(E,v):new u.default(E)).setup()];case 1:return _.sent(),P.debug&&h.setDebug(P.debug||!1),g.default.debug=P.debug||!1,g.default.silentError=P.silentError||!0,[2,h]}})})}},7463:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(3285),N=T(1700),y=T(4543);L.default=p.default,function(){if(void 0===typeof window)throw new Error("window object not found");"Microsoft"in window||(window.Microsoft={}),"CRM"in window.Microsoft||(window.Microsoft.CRM={}),"Omnichannel"in window.Microsoft.CRM||(window.Microsoft.CRM.Omnichannel={}),"AMSClient"in window.Microsoft.CRM.Omnichannel||(window.Microsoft.CRM.Omnichannel.AMS={SDK:{createAMSClient:p.default,FramedClient:y.default,FramedlessClient:N.default}})}()},4239:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.isReactNative=L.isNode=L.isBrowser=void 0,L.isBrowser=function(){return"undefined"!=typeof window&&void 0!==window.document},L.isNode=function(){return"undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node},L.isReactNative=function(){return"undefined"!=typeof navigator&&"ReactNative"==navigator.product},L.default={isBrowser:L.isBrowser,isNode:L.isNode,isReactNative:L.isReactNative}},8202:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.uuidv4=void 0,L.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(p){var N=16*Math.random()|0;return("x"===p?N:3&N|8).toString(16)})}},7626:function(Y,L,T){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(ce){for(var se,he=1,ve=arguments.length;he<ve;he++)for(var ae in se=arguments[he])Object.prototype.hasOwnProperty.call(se,ae)&&(ce[ae]=se[ae]);return ce}).apply(this,arguments)},N=this&&this.__awaiter||function(ce,se,he,ve){return new(he||(he=Promise))(function(de,Re){function Ee(Se){try{ye(ve.next(Se))}catch(ie){Re(ie)}}function ue(Se){try{ye(ve.throw(Se))}catch(ie){Re(ie)}}function ye(Se){Se.done?de(Se.value):function(de){return de instanceof he?de:new he(function(Re){Re(de)})}(Se.value).then(Ee,ue)}ye((ve=ve.apply(ce,se||[])).next())})},y=this&&this.__generator||function(ce,se){var ve,ae,de,Re,he={label:0,sent:function(){if(1&de[0])throw de[1];return de[1]},trys:[],ops:[]};return Re={next:Ee(0),throw:Ee(1),return:Ee(2)},"function"==typeof Symbol&&(Re[Symbol.iterator]=function(){return this}),Re;function Ee(ye){return function(Se){return function(ye){if(ve)throw new TypeError("Generator is already executing.");for(;he;)try{if(ve=1,ae&&(de=2&ye[0]?ae.return:ye[0]?ae.throw||((de=ae.return)&&de.call(ae),0):ae.next)&&!(de=de.call(ae,ye[1])).done)return de;switch(ae=0,de&&(ye=[2&ye[0],de.value]),ye[0]){case 0:case 1:de=ye;break;case 4:return he.label++,{value:ye[1],done:!1};case 5:he.label++,ae=ye[1],ye=[0];continue;case 7:ye=he.ops.pop(),he.trys.pop();continue;default:if(!(de=(de=he.trys).length>0&&de[de.length-1])&&(6===ye[0]||2===ye[0])){he=0;continue}if(3===ye[0]&&(!de||ye[1]>de[0]&&ye[1]<de[3])){he.label=ye[1];break}if(6===ye[0]&&he.label<de[1]){he.label=de[1],de=ye;break}if(de&&he.label<de[2]){he.label=de[2],he.ops.push(ye);break}de[2]&&he.ops.pop(),he.trys.pop();continue}ye=se.call(ce,he)}catch(Se){ye=[6,Se],ae=0}finally{ve=de=0}if(5&ye[0])throw ye[1];return{value:ye[0]?ye[1]:void 0,done:!0}}([ye,Se])}}},x=this&&this.__spreadArrays||function(){for(var ce=0,se=0,he=arguments.length;se<he;se++)ce+=arguments[se].length;var ve=Array(ce),ae=0;for(se=0;se<he;se++)for(var de=arguments[se],Re=0,Ee=de.length;Re<Ee;Re++,ae++)ve[ae]=de[Re];return ve};Object.defineProperty(L,"__esModule",{value:!0});var u=T(2811),g=T(2902),C=T(3762),P=T(8290),E=T(6345),v=T(8098),h=T(641),_=T(8953),b=T(2921),w=T(6419),I=T(7474),D=T(7587),k=T(6403),O=T(7925),V=T(2900),B=T(4694),U=T(2217),j=T(6194),W=T(8191),X=T(5642),K=T(448),ge=T(3372),R=T(6233),r=T(4352),s=T(5655),l=T(1247),a=T(9600),f=T(7463),M=T(9340),A=T(838),d=T(6633),i=T(813),m=T(9425),q=T(4674),z=T(7616),J=function(){function ce(se,he){var ve,ae,de,Re,Ee,ue,ye,Se;void 0===he&&(he=h.defaultChatSDKConfig),this.ACSClient=null,this.AMSClient=null,this.authSettings=null,this.authenticatedUserToken=null,this.conversation=null,this.callingOption=w.default.NoCalling,this.telemetry=null,this.ic3ClientLogger=null,this.ocSdkLogger=null,this.acsClientLogger=null,this.acsAdapterLogger=null,this.callingSdkLogger=null,this.isPersistentChat=!1,this.isChatReconnect=!1,this.reconnectId=null,this.refreshTokenTimer=null,this.debug=!1,this.runtimeId=C.uuidv4(),this.omnichannelConfig=se,this.chatSDKConfig=p(p({},h.defaultChatSDKConfig),he),this.isInitialized=!1,this.liveChatVersion=W.default.V1,this.localeId=P.defaultLocaleId,this.requestId=C.uuidv4(),this.chatToken={},this.liveChatConfig={},this.dataMaskingRules={},this.authSettings=null,this.preChatSurvey=null,this.telemetry=A.default(this.debug),this.scenarioMarker=new l.default(this.omnichannelConfig),this.ic3ClientLogger=u.createIC3ClientLogger(this.omnichannelConfig),this.ocSdkLogger=u.createOCSDKLogger(this.omnichannelConfig),this.acsClientLogger=u.createACSClientLogger(this.omnichannelConfig),this.acsAdapterLogger=u.createACSAdapterLogger(this.omnichannelConfig),this.callingSdkLogger=u.createCallingSDKLogger(this.omnichannelConfig),this.scenarioMarker.useTelemetry(this.telemetry),this.ic3ClientLogger.useTelemetry(this.telemetry),this.ocSdkLogger.useTelemetry(this.telemetry),this.acsClientLogger.useTelemetry(this.telemetry),this.acsAdapterLogger.useTelemetry(this.telemetry),this.callingSdkLogger.useTelemetry(this.telemetry),this.scenarioMarker.setRuntimeId(this.runtimeId),this.ic3ClientLogger.setRuntimeId(this.runtimeId),this.ocSdkLogger.setRuntimeId(this.runtimeId),this.acsClientLogger.setRuntimeId(this.runtimeId),this.acsAdapterLogger.setRuntimeId(this.runtimeId),this.callingSdkLogger.setRuntimeId(this.runtimeId),z.default(se),h.default(he),(null===(ve=this.chatSDKConfig.telemetry)||void 0===ve?void 0:ve.disable)&&(null===(ae=this.telemetry)||void 0===ae||ae.disable()),(null===(de=this.chatSDKConfig.telemetry)||void 0===de?void 0:de.ariaTelemetryKey)&&this.telemetry.initialize(this.chatSDKConfig.telemetry.ariaTelemetryKey),null===(Re=this.ic3ClientLogger)||void 0===Re||Re.setRequestId(this.requestId),null===(Ee=this.ocSdkLogger)||void 0===Ee||Ee.setRequestId(this.requestId),null===(ue=this.acsClientLogger)||void 0===ue||ue.setRequestId(this.requestId),null===(ye=this.acsAdapterLogger)||void 0===ye||ye.setRequestId(this.requestId),null===(Se=this.callingSdkLogger)||void 0===Se||Se.setRequestId(this.requestId)}return ce.prototype.setDebug=function(se){var he,ve,ae,de,Re,Ee,ue;this.debug=se,null===(he=this.AMSClient)||void 0===he||he.setDebug(se),null===(ve=this.telemetry)||void 0===ve||ve.setDebug(se),this.scenarioMarker.setDebug(se),null===(ae=this.ic3ClientLogger)||void 0===ae||ae.setDebug(se),null===(de=this.ocSdkLogger)||void 0===de||de.setDebug(se),null===(Re=this.acsClientLogger)||void 0===Re||Re.setDebug(se),null===(Ee=this.acsAdapterLogger)||void 0===Ee||Ee.setDebug(se),null===(ue=this.callingSdkLogger)||void 0===ue||ue.setDebug(se)},ce.prototype.initialize=function(se){return void 0===se&&(se={}),N(this,void 0,void 0,function(){var he,ae,de;return y(this,function(Ee){switch(Ee.label){case 0:if(this.scenarioMarker.startScenario(a.default.InitializeChatSDK),this.isInitialized)return this.scenarioMarker.completeScenario(a.default.InitializeChatSDK),[2,this.liveChatConfig];Ee.label=1;case 1:return Ee.trys.push([1,8,,9]),this.OCSDKProvider=C.SDKProvider,he=this,[4,C.SDKProvider.getSDK(this.omnichannelConfig,{},this.ocSdkLogger)];case 2:return he.OCClient=Ee.sent(),[4,this.getChatConfig(se.getLiveChatConfigOptionalParams||{})];case 3:return Ee.sent(),this.liveChatVersion!==W.default.V2?[3,5]:(this.ACSClient=new g.default(this.acsClientLogger),ae=this,[4,f.default({framedMode:v.isBrowser(),multiClient:!0,debug:!1,logger:void 0})]);case 4:return ae.AMSClient=Ee.sent(),[3,7];case 5:return de=this,[4,this.getIC3Client()];case 6:de.IC3Client=Ee.sent(),Ee.label=7;case 7:return this.isInitialized=!0,this.scenarioMarker.completeScenario(a.default.InitializeChatSDK),[3,9];case 8:return Ee.sent(),this.scenarioMarker.failScenario(a.default.InitializeChatSDK),[3,9];case 9:return[2,this.liveChatConfig]}})})},ce.prototype.getChatReconnectContext=function(se){return void 0===se&&(se={}),N(this,void 0,void 0,function(){var he,ae,de,Ee,ue,Re;return y(this,function(ye){switch(ye.label){case 0:if(this.scenarioMarker.startScenario(a.default.GetChatReconnectContext,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),he={reconnectId:null,redirectURL:null},!this.authenticatedUserToken)return[3,5];ye.label=1;case 1:return ye.trys.push([1,3,,4]),[4,this.OCClient.getReconnectableChats({authenticatedUserToken:this.authenticatedUserToken})];case 2:return(ae=ye.sent())&&ae.reconnectid&&(he.reconnectId=ae.reconnectid),this.scenarioMarker.completeScenario(a.default.GetChatReconnectContext,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,4];case 3:return de=ye.sent(),Re={response:"OCClientGetReconnectableChatsFailed"},this.scenarioMarker.failScenario(a.default.GetChatReconnectContext,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(Re)}),console.error("OmnichannelChatSDK/GetChatReconnectContext/error "+de),[3,4];case 4:return[3,9];case 5:if(!se.reconnectId)return[3,9];ye.label=6;case 6:return ye.trys.push([6,8,,9]),[4,this.OCClient.getReconnectAvailability(se.reconnectId)];case 7:return(Ee=ye.sent())&&!Ee.isReconnectAvailable?Ee.reconnectRedirectionURL&&(he.redirectURL=Ee.reconnectRedirectionURL):he.reconnectId=se.reconnectId,this.scenarioMarker.completeScenario(a.default.GetChatReconnectContext,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,9];case 8:return ue=ye.sent(),Re={response:"OCClientGetReconnectAvailabilityFailed"},this.scenarioMarker.failScenario(a.default.GetChatReconnectContext,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(Re)}),console.error("OmnichannelChatSDK/GetChatReconnectContext/error "+ue),[3,9];case 9:return[2,he]}})})},ce.prototype.startChat=function(se){var he,ve,ae,de,Re,Ee,ue,ye,Se,ie,ee,Z,le,Oe,we,Te,yt;return void 0===se&&(se={}),N(this,void 0,void 0,function(){var Me,De,Ve,Zt,nt,ot,Mt,ut,st,rt,Ge,Cn,ct,qe=this;return y(this,function(We){switch(We.label){case 0:return this.scenarioMarker.startScenario(a.default.StartChat,{RequestId:this.requestId}),v.default.isNode()||v.default.isReactNative()||this.IC3Client||this.liveChatVersion!==W.default.V1?[3,2]:(Me=this,[4,this.getIC3Client()]);case 1:Me.IC3Client=We.sent(),We.label=2;case 2:if(this.isChatReconnect&&!(null===(he=this.chatSDKConfig.chatReconnect)||void 0===he?void 0:he.disable)&&!this.isPersistentChat&&se.reconnectId&&(this.reconnectId=se.reconnectId),!this.isPersistentChat||(null===(ve=this.chatSDKConfig.persistentChat)||void 0===ve?void 0:ve.disable))return[3,6];We.label=3;case 3:return We.trys.push([3,5,,6]),[4,this.OCClient.getReconnectableChats({authenticatedUserToken:this.authenticatedUserToken})];case 4:return(De=We.sent())&&De.reconnectid&&(this.reconnectId=De.reconnectid),[3,6];case 5:throw We.sent(),ct={response:"OCClientGetReconnectableChatsFailed"},Error(ct.response);case 6:return se.liveChatContext&&Object.keys(se.liveChatContext).length>0&&!this.reconnectId?(this.chatToken=se.liveChatContext.chatToken||{},this.requestId=se.liveChatContext.requestId||C.uuidv4(),[4,this.getConversationDetails()]):[3,8];case 7:if(Ve=We.sent(),0===Object.keys(Ve).length)throw ct={response:"InvalidConversation"},this.scenarioMarker.failScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(ct)}),console.error("Conversation not found"),Error(ct.response);if(Ve.state===X.default.WrapUp||Ve.state===X.default.Closed)throw ct={response:"ClosedConversation"},this.scenarioMarker.failScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(ct)}),console.error("Unable to join conversation that's in '"+Ve.state+"' state"),Error(ct.response);We.label=8;case 8:return this.authSettings?this.authenticatedUserToken?[3,10]:[4,this.setAuthTokenProvider(this.chatSDKConfig.getAuthToken)]:[3,14];case 9:We.sent(),We.label=10;case 10:if(!(se.liveChatContext&&Object.keys(se.liveChatContext).length>0))return[3,14];this.chatToken=se.liveChatContext.chatToken||{},this.requestId=se.liveChatContext.requestId||C.uuidv4(),We.label=11;case 11:return We.trys.push([11,13,,14]),[4,this.OCClient.validateAuthChatRecord(this.requestId,{authenticatedUserToken:this.authenticatedUserToken,chatId:this.chatToken.chatId})];case 12:return We.sent(),[3,14];case 13:throw We.sent(),ct={response:"OCClientValidateAuthChatRecordFailed",message:"InvalidAuthChatRecord"},this.scenarioMarker.failScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(ct)}),Error(ct.response);case 14:return this.chatToken&&0===Object.keys(this.chatToken).length?[4,this.getChatToken(!1)]:[3,16];case 15:We.sent(),We.label=16;case 16:if(null===(ae=this.ic3ClientLogger)||void 0===ae||ae.setChatId(this.chatToken.chatId||""),null===(de=this.ocSdkLogger)||void 0===de||de.setChatId(this.chatToken.chatId||""),null===(Re=this.acsClientLogger)||void 0===Re||Re.setChatId(this.chatToken.chatId||""),null===(Ee=this.acsAdapterLogger)||void 0===Ee||Ee.setChatId(this.chatToken.chatId||""),null===(ue=this.callingSdkLogger)||void 0===ue||ue.setChatId(this.chatToken.chatId||""),(Zt={initContext:{}}).initContext.locale=P.getLocaleStringFromId(this.localeId),this.isPersistentChat&&!(null===(ye=this.chatSDKConfig.persistentChat)||void 0===ye?void 0:ye.disable)&&(Zt.reconnectId=this.reconnectId),this.isChatReconnect&&!(null===(Se=this.chatSDKConfig.chatReconnect)||void 0===Se?void 0:Se.disable)&&!this.isPersistentChat&&(Zt.reconnectId=this.reconnectId),se.customContext&&(Zt.initContext.customContextData=se.customContext),se.browser&&(Zt.initContext.browser=se.browser),se.os&&(Zt.initContext.os=se.os),se.locale&&(Zt.initContext.locale=se.locale),se.device&&(Zt.initContext.device=se.device),se.preChatResponse&&(Zt.initContext.preChatResponse=se.preChatResponse),se.sendDefaultInitContext){if(v.default.isNode()||v.default.isReactNative())throw ct={response:D.default.UnsupportedPlatform,message:"sendDefaultInitContext is only supported on browser"},console.error(ct.message),this.scenarioMarker.failScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(ct)}),new Error(ct.response);Zt.getContext=!0}if(se.initContext&&(Zt.initContext=se.initContext),this.authenticatedUserToken&&(Zt.authenticatedUserToken=this.authenticatedUserToken),this.chatToken.chatId&&(Zt.initContext.chatId=this.chatToken.chatId),se.liveChatContext)return[3,20];We.label=17;case 17:return We.trys.push([17,19,,20]),[4,this.OCClient.sessionInit(this.requestId,Zt)];case 18:return We.sent(),[3,20];case 19:throw nt=We.sent(),ct={response:"OCClientSessionInitFailed"},(null===(ie=nt)||void 0===ie?void 0:ie.isAxiosError)&&(null===(Z=null===(ee=nt.response)||void 0===ee?void 0:ee.headers)||void 0===Z?void 0:Z.errorcode.toString())===R.default.WidgetUseOutsideOperatingHour.toString()&&(ct.response=R.default[R.default.WidgetUseOutsideOperatingHour].toString(),ct.message="Widget used outside of operating hours",console.error(ct.message)),this.scenarioMarker.failScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(ct)}),new Error(ct.response);case 20:if(this.liveChatVersion!==W.default.V2)return[3,31];ot={token:this.chatToken.token,id:this.chatToken.visitorId||"teamsvisitor",threadId:this.chatToken.chatId,environmentUrl:this.chatToken.acsEndpoint,pollingInterval:3e4},We.label=21;case 21:return We.trys.push([21,23,,24]),[4,null===(le=this.ACSClient)||void 0===le?void 0:le.initialize({token:ot.token,environmentUrl:ot.environmentUrl})];case 22:return We.sent(),[3,24];case 23:return Mt=We.sent(),ct={response:"ACSClientInitializeFailed"},this.scenarioMarker.failScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(ct)}),console.error("OmnichannelChatSDK/startChat/initialize/error "+Mt),[2,Mt];case 24:return We.trys.push([24,26,,27]),ut=this,[4,null===(Oe=this.ACSClient)||void 0===Oe?void 0:Oe.joinConversation({id:ot.id,threadId:ot.threadId,pollingInterval:ot.pollingInterval})];case 25:return ut.conversation=We.sent(),this.scenarioMarker.completeScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,27];case 26:throw st=We.sent(),ct={response:"ACSClientJoinConversationFailed"},this.scenarioMarker.failScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(ct)}),console.error("OmnichannelChatSDK/startChat/joinConversation/error "+st),Error(ct.response);case 27:return We.trys.push([27,29,,30]),[4,null===(we=this.AMSClient)||void 0===we?void 0:we.initialize({chatToken:this.chatToken})];case 28:return We.sent(),[3,30];case 29:throw We.sent(),ct={response:"AMSClientInitializeFailed"},this.scenarioMarker.failScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(ct)}),Error(ct.response);case 30:return[3,37];case 31:return We.trys.push([31,33,,34]),[4,this.IC3Client.initialize({token:this.chatToken.token,regionGtms:this.chatToken.regionGTMS,visitor:!0})];case 32:return We.sent(),[3,34];case 33:return rt=We.sent(),ct={response:"IC3ClientInitializeFailed"},this.scenarioMarker.failScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(ct)}),console.error("OmnichannelChatSDK/startChat/initialize/error "+rt),[2,rt];case 34:return We.trys.push([34,36,,37]),Ge=this,[4,this.IC3Client.joinConversation(this.chatToken.chatId)];case 35:return Ge.conversation=We.sent(),this.scenarioMarker.completeScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,37];case 36:return Cn=We.sent(),ct={response:"IC3ClientJoinConversationFailed"},this.scenarioMarker.failScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(ct)}),console.error("OmnichannelChatSDK/startChat/joinConversation/error "+Cn),[2,Cn];case 37:return this.isPersistentChat&&!(null===(Te=this.chatSDKConfig.persistentChat)||void 0===Te?void 0:Te.disable)&&(this.refreshTokenTimer=setInterval(function(){return N(qe,void 0,void 0,function(){return y(this,function(Dn){switch(Dn.label){case 0:return[4,this.getChatToken(!1)];case 1:return Dn.sent(),this.updateChatToken(this.chatToken.token,this.chatToken.regionGTMS),[2]}})})},null===(yt=this.chatSDKConfig.persistentChat)||void 0===yt?void 0:yt.tokenUpdateTime)),[2]}})})},ce.prototype.endChat=function(){var se,he,ve,ae,de,Re,Ee,ue,ye,Se,ie,ee,Z;return N(this,void 0,void 0,function(){var le,Oe,we,Te;return y(this,function(Ne){switch(Ne.label){case 0:this.scenarioMarker.startScenario(a.default.EndChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),le={},this.isPersistentChat&&!(null===(se=this.chatSDKConfig.persistentChat)||void 0===se?void 0:se.disable)&&(Oe=null!==this.reconnectId,le.isPersistentChat=this.isPersistentChat,le.isReconnectChat=Oe),this.isChatReconnect&&!(null===(he=this.chatSDKConfig.chatReconnect)||void 0===he?void 0:he.disable)&&!this.isPersistentChat&&(this.requestId=(we=null!==this.reconnectId)?this.reconnectId:this.requestId,le.isReconnectChat=we),this.authenticatedUserToken&&(le.authenticatedUserToken=this.authenticatedUserToken),Ne.label=1;case 1:return Ne.trys.push([1,3,,4]),[4,this.OCClient.sessionClose(this.requestId,le)];case 2:return Ne.sent(),this.scenarioMarker.completeScenario(a.default.EndChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),null===(ve=this.conversation)||void 0===ve||ve.disconnect(),this.conversation=null,this.requestId=C.uuidv4(),this.chatToken={},this.reconnectId=null,this.IC3Client&&(this.IC3Client.dispose(),!v.default.isNode()&&!v.default.isReactNative()&&E.removeElementById(this.IC3Client.id),this.IC3Client=null),null===(ae=this.ic3ClientLogger)||void 0===ae||ae.setRequestId(this.requestId),null===(de=this.ic3ClientLogger)||void 0===de||de.setChatId(""),null===(Re=this.ocSdkLogger)||void 0===Re||Re.setRequestId(this.requestId),null===(Ee=this.ocSdkLogger)||void 0===Ee||Ee.setChatId(""),null===(ue=this.acsClientLogger)||void 0===ue||ue.setRequestId(this.requestId),null===(ye=this.acsClientLogger)||void 0===ye||ye.setChatId(""),null===(Se=this.acsAdapterLogger)||void 0===Se||Se.setRequestId(this.requestId),null===(ie=this.acsAdapterLogger)||void 0===ie||ie.setChatId(""),null===(ee=this.callingSdkLogger)||void 0===ee||ee.setRequestId(this.requestId),null===(Z=this.callingSdkLogger)||void 0===Z||Z.setChatId(""),[3,4];case 3:return Te=Ne.sent(),this.scenarioMarker.failScenario(a.default.EndChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify({response:"OCClientSessionCloseFailed"})}),console.error("OmnichannelChatSDK/endChat/error "+Te),[2,Te];case 4:return null!==this.refreshTokenTimer&&(clearInterval(this.refreshTokenTimer),this.refreshTokenTimer=null),[2]}})})},ce.prototype.getCurrentLiveChatContext=function(){return N(this,void 0,void 0,function(){var se,he,ve;return y(this,function(ae){switch(ae.label){case 0:return[4,this.getChatToken()];case 1:return se=ae.sent(),this.scenarioMarker.startScenario(a.default.GetCurrentLiveChatContext,{RequestId:he=this.requestId,ChatId:se.chatId}),ve={chatToken:se,requestId:he},0===Object.keys(ve.chatToken).length?[2,{}]:(this.scenarioMarker.completeScenario(a.default.GetCurrentLiveChatContext,{RequestId:he,ChatId:se.chatId}),[2,ve])}})})},ce.prototype.getConversationDetails=function(){var se,he,ve,ae;return N(this,void 0,void 0,function(){var de,Re,ye,Se,ie,ee,Z;return y(this,function(le){switch(le.label){case 0:this.scenarioMarker.startScenario(a.default.GetConversationDetails,{RequestId:this.requestId,ChatId:(null===(se=this.chatToken)||void 0===se?void 0:se.chatId)||""}),de={},this.isPersistentChat&&!(null===(he=this.chatSDKConfig.persistentChat)||void 0===he?void 0:he.disable)&&this.reconnectId&&(de.reconnectId=this.reconnectId),this.isChatReconnect&&!(null===(ve=this.chatSDKConfig.chatReconnect)||void 0===ve?void 0:ve.disable)&&!this.isPersistentChat&&this.reconnectId&&(de.reconnectId=this.reconnectId),this.authenticatedUserToken&&(de.authenticatedUserToken=this.authenticatedUserToken),le.label=1;case 1:return le.trys.push([1,3,,4]),[4,this.OCClient.getLWIDetails(this.requestId,de)];case 2:return Re=le.sent(),Se=Re.CanRenderPostChat,ie=Re.ParticipantType,ee={state:Re.State,conversationId:Re.ConversationId},(ye=Re.AgentAcceptedOn)&&(ee.agentAcceptedOn=ye),Se&&(ee.canRenderPostChat=Se),ie&&(ee.participantType=ie),this.scenarioMarker.completeScenario(a.default.GetConversationDetails,{RequestId:this.requestId,ChatId:(null===(ae=this.chatToken)||void 0===ae?void 0:ae.chatId)||""}),[2,ee];case 3:return Z=le.sent(),this.scenarioMarker.failScenario(a.default.GetConversationDetails,{RequestId:this.requestId,ChatId:this.chatToken.chatId||""}),console.error("OmnichannelChatSDK/getConversationDetails/error "+Z),[3,4];case 4:return[2,{}]}})})},ce.prototype.getPreChatSurvey=function(se){return void 0===se&&(se=!0),N(this,void 0,void 0,function(){var he;return y(this,function(ve){this.scenarioMarker.startScenario(a.default.GetPreChatSurvey);try{return he=se?JSON.parse(this.preChatSurvey):this.preChatSurvey,this.scenarioMarker.completeScenario(a.default.GetPreChatSurvey),[2,he]}catch(ae){this.scenarioMarker.failScenario(a.default.GetPreChatSurvey)}return[2]})})},ce.prototype.getLiveChatConfig=function(se){return N(this,void 0,void 0,function(){return y(this,function(he){return se&&!0!==se.useRuntimeCache?[2,this.getChatConfig({sendCacheHeaders:(null==se?void 0:se.sendCacheHeaders)||!1})]:[2,this.liveChatConfig]})})},ce.prototype.getChatToken=function(se){var he,ve;return void 0===se&&(se=!0),N(this,void 0,void 0,function(){var ae,de,Ee,ye,Se,ie,ee,Z,le;return y(this,function(we){switch(we.label){case 0:if(this.scenarioMarker.startScenario(a.default.GetChatToken,{RequestId:this.requestId}),se)return[3,5];we.label=1;case 1:return we.trys.push([1,3,,4]),ae={},this.authenticatedUserToken&&(ae.authenticatedUserToken=this.authenticatedUserToken),this.isPersistentChat&&!(null===(he=this.chatSDKConfig.persistentChat)||void 0===he?void 0:he.disable)&&(ae.reconnectId=this.reconnectId),this.isChatReconnect&&!(null===(ve=this.chatSDKConfig.chatReconnect)||void 0===ve?void 0:ve.disable)&&!this.isPersistentChat&&(ae.reconnectId=this.reconnectId),[4,this.OCClient.getChatToken(this.requestId,ae)];case 2:return de=we.sent(),Ee=de.Token,ye=de.ExpiresIn,Se=de.VisitorId,ie=de.VoiceVideoCallToken,ee=de.ACSEndpoint,Z=de.AttachmentConfiguration,this.chatToken={chatId:de.ChatId,regionGTMS:JSON.parse(de.RegionGtms),requestId:this.requestId,token:Ee,expiresIn:ye,visitorId:Se,voiceVideoCallToken:ie,acsEndpoint:ee},Z&&Z.AttachmentServiceEndpoint&&(this.chatToken.amsEndpoint=Z.AttachmentServiceEndpoint),this.scenarioMarker.completeScenario(a.default.GetChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,4];case 3:return le=we.sent(),this.scenarioMarker.failScenario(a.default.GetChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify({response:"OCClientGetChatTokenFailed"})}),console.error("OmnichannelChatSDK/getChatToken/error "+le),[3,4];case 4:return[3,6];case 5:this.scenarioMarker.completeScenario(a.default.GetChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),we.label=6;case 6:return[2,this.chatToken]}})})},ce.prototype.getCallingToken=function(){return N(this,void 0,void 0,function(){return y(this,function(se){return this.chatToken&&0===Object.keys(this.chatToken).length?[2,""]:this.chatToken.voiceVideoCallToken?(this.debug&&console.log("calling:acs"),[2,this.chatToken.voiceVideoCallToken.Token]):(this.debug&&console.log("calling:skype"),[2,this.chatToken.token])})})},ce.prototype.getMessages=function(){var se;return N(this,void 0,void 0,function(){var he;return y(this,function(ae){switch(ae.label){case 0:this.scenarioMarker.startScenario(a.default.GetMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),ae.label=1;case 1:return ae.trys.push([1,3,,4]),[4,null===(se=this.conversation)||void 0===se?void 0:se.getMessages()];case 2:return he=ae.sent(),this.scenarioMarker.completeScenario(a.default.GetMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,he];case 3:return ae.sent(),this.scenarioMarker.failScenario(a.default.GetMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,4];case 4:return[2]}})})},ce.prototype.getDataMaskingRules=function(){return N(this,void 0,void 0,function(){return y(this,function(se){return[2,this.dataMaskingRules]})})},ce.prototype.sendMessage=function(se){var he;return N(this,void 0,void 0,function(){var ve,ae,de,Re,Ee,ue,Se,ie,ee,Z,Oe;return y(this,function(Te){switch(Te.label){case 0:if(this.scenarioMarker.startScenario(a.default.SendMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),ae=(ve=this.chatSDKConfig.dataMasking).disable,de=ve.maskingCharacter,Re=se.content,Object.keys(this.dataMaskingRules).length>0&&!ae)for(Ee=0,ue=Object.values(this.dataMaskingRules);Ee<ue.length;Ee++)for(Se=new RegExp(ue[Ee],"g"),ie=void 0;ie=Se.exec(Re);)ee=ie[0].replace(/./g,de),Re=Re.replace(ie[0],ee);if(se.content=Re,this.liveChatVersion!==W.default.V2)return[3,5];(Z={content:se.content}).metadata={widgetId:this.omnichannelConfig.widgetId,clientMessageId:Date.now().toString()},se.metadata&&(Z.metadata=p(p({},Z.metadata),se.metadata)),Te.label=1;case 1:return Te.trys.push([1,3,,4]),[4,null===(he=this.conversation)||void 0===he?void 0:he.sendMessage(Z)];case 2:return Te.sent(),this.scenarioMarker.completeScenario(a.default.SendMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,4];case 3:throw Te.sent(),this.scenarioMarker.failScenario(a.default.SendMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),new Error("ChatSDKSendMessageFailed");case 4:return[3,9];case 5:Oe={content:se.content,timestamp:new Date,contentType:K.default.Text,deliveryMode:V.default.Bridged,messageType:ge.default.UserMessage,properties:void 0,tags:x(i.defaultMessageTags),sender:{displayName:"Customer",id:"customer",type:r.default.User}},se.tags&&(Oe.tags=se.tags),se.timestamp&&(Oe.timestamp=se.timestamp),Te.label=6;case 6:return Te.trys.push([6,8,,9]),[4,this.conversation.sendMessage(Oe)];case 7:return Te.sent(),this.scenarioMarker.completeScenario(a.default.SendMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,9];case 8:throw Te.sent(),this.scenarioMarker.failScenario(a.default.SendMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),new Error("ChatSDKSendMessageFailed");case 9:return[2]}})})},ce.prototype.onNewMessage=function(se,he){var ve,ae;return void 0===he&&(he={}),N(this,void 0,void 0,function(){var de,Ee,ue,Se,ie,Re,ee,Z,ye,le,Oe,we=this;return y(this,function(Te){switch(Te.label){case 0:return this.scenarioMarker.startScenario(a.default.OnNewMessage,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.liveChatVersion!==W.default.V2?[3,3]:(de=new Set,he.rehydrate?(this.debug&&console.log("[OmnichannelChatSDK][onNewMessage] rehydrate"),[4,this.getMessages()]):[3,2]);case 1:for(Re=Te.sent(),Ee=0,ue=Re.reverse();Ee<ue.length;Ee++)!de.has(Se=(ye=ue[Ee]).id)&&(de.add(Se),se(ye));Te.label=2;case 2:try{null===(ve=this.conversation)||void 0===ve||ve.registerOnNewMessage(function(yt){var Ne=yt.id,Me=M.default(yt,{liveChatVersion:we.liveChatVersion,debug:we.debug});de.has(Ne)||(se(Me),de.add(Ne))}),this.scenarioMarker.completeScenario(a.default.OnNewMessage,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(yt){this.scenarioMarker.failScenario(a.default.OnNewMessage,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}return[3,6];case 3:return ie=new Set,he.rehydrate?(this.debug&&console.log("[OmnichannelChatSDK][onNewMessage] rehydrate"),[4,this.getMessages()]):[3,5];case 4:if(Re=Te.sent())for(ee=0,Z=Re.reverse();ee<Z.length;ee++)!ie.has(le=(ye=Z[ee]).clientmessageid)&&(ie.add(le),Oe=M.default(ye,{liveChatVersion:this.liveChatVersion,debug:this.debug}),se(Oe));Te.label=5;case 5:try{null===(ae=this.conversation)||void 0===ae||ae.registerOnNewMessage(function(yt){var Ne=yt.clientmessageid,Me=yt.messageType;if(!m.isCustomerMessage(yt)&&!ie.has(Ne)&&Me!==ge.default.Typing){var Ye=M.default(yt,{liveChatVersion:we.liveChatVersion,debug:we.debug});se(Ye)}}),this.scenarioMarker.completeScenario(a.default.OnNewMessage,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(yt){this.scenarioMarker.failScenario(a.default.OnNewMessage,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}Te.label=6;case 6:return[2]}})})},ce.prototype.sendTypingEvent=function(){return N(this,void 0,void 0,function(){var he,ve,ae,de;return y(this,function(Re){switch(Re.label){case 0:if(this.scenarioMarker.startScenario(a.default.SendTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.liveChatVersion!==W.default.V2)return[3,6];Re.label=1;case 1:return Re.trys.push([1,4,,5]),[4,this.OCClient.sendTypingIndicator(this.requestId,W.default.V2,{customerDisplayName:_.default.Customer})];case 2:return Re.sent(),[4,this.conversation.sendTyping()];case 3:return Re.sent(),this.scenarioMarker.completeScenario(a.default.SendTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,5];case 4:throw Re.sent(),this.scenarioMarker.failScenario(a.default.SendTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),new Error("OCClientSendTypingFailed");case 5:return[3,12];case 6:he="{isTyping: 0}",Re.label=7;case 7:return Re.trys.push([7,11,,12]),[4,this.conversation.indicateTypingStatus(0)];case 8:return Re.sent(),[4,this.conversation.getMembers()];case 9:return ve=Re.sent(),ae=ve.filter(function(Ee){return Ee.type===r.default.Bot}),[4,this.conversation.sendMessageToBot(ae[0].id,{payload:he})];case 10:return Re.sent(),this.scenarioMarker.completeScenario(a.default.SendTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,12];case 11:return de=Re.sent(),console.error("OmnichannelChatSDK/sendTypingEvent/error"),this.scenarioMarker.failScenario(a.default.SendTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,de];case 12:return[2]}})})},ce.prototype.onTypingEvent=function(se){var he;return N(this,void 0,void 0,function(){return y(this,function(ve){if(this.scenarioMarker.startScenario(a.default.OnTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.liveChatVersion===W.default.V2)try{this.conversation.onTypingEvent(se),this.scenarioMarker.completeScenario(a.default.OnTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(ae){this.scenarioMarker.failScenario(a.default.OnTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}else try{null===(he=this.conversation)||void 0===he||he.registerOnNewMessage(function(ae){var de=ae.messageType;m.isCustomerMessage(ae)||de===ge.default.Typing&&se(ae)}),this.scenarioMarker.completeScenario(a.default.OnTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(ae){this.scenarioMarker.failScenario(a.default.OnTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}return[2]})})},ce.prototype.onAgentEndSession=function(se){var he;return N(this,void 0,void 0,function(){var ve=this;return y(this,function(ae){if(this.scenarioMarker.startScenario(a.default.OnAgentEndSession,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.liveChatVersion===W.default.V2)try{this.conversation.registerOnThreadUpdate(function(de){se(de)}),this.scenarioMarker.completeScenario(a.default.OnAgentEndSession,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(de){this.scenarioMarker.failScenario(a.default.OnAgentEndSession,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}else try{null===(he=this.conversation)||void 0===he||he.registerOnThreadUpdate(function(de){1===de.members.length&&(se(de),null!==ve.refreshTokenTimer&&(clearInterval(ve.refreshTokenTimer),ve.refreshTokenTimer=null))}),this.scenarioMarker.completeScenario(a.default.OnAgentEndSession,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(de){this.scenarioMarker.failScenario(a.default.OnAgentEndSession,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}return[2]})})},ce.prototype.uploadFileAttachment=function(se){var he,ve,ae,de;return N(this,void 0,void 0,function(){var Re,Ee,ue,ye,Se,ie,le,ee,Oe;return y(this,function(we){switch(we.label){case 0:return this.scenarioMarker.startScenario(a.default.UploadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.liveChatVersion!==W.default.V2?[3,7]:[4,null===(he=this.AMSClient)||void 0===he?void 0:he.createObject(null===(ve=this.chatToken)||void 0===ve?void 0:ve.chatId,se)];case 1:return Re=we.sent(),Ee=Re.id,[4,null===(ae=this.AMSClient)||void 0===ae?void 0:ae.uploadDocument(Ee,se)];case 2:ue=we.sent(),ye={amsReferences:JSON.stringify([Ee]),amsreferences:JSON.stringify([Ee])},Se={amsMetadata:JSON.stringify([{contentType:se.type,fileName:se.name}])},ie={content:"",metadata:p(p({widgetId:this.omnichannelConfig.widgetId,clientMessageId:Date.now().toString()},ye),Se)},ee={content:"",timestamp:new Date,contentType:K.default.Text,deliveryMode:V.default.Bridged,messageType:ge.default.UserMessage,tags:x(i.defaultMessageTags),sender:{displayName:"Customer",id:"customer",type:r.default.User},fileMetadata:ue},we.label=3;case 3:return we.trys.push([3,5,,6]),[4,null===(de=this.conversation)||void 0===de?void 0:de.sendMessage(ie)];case 4:return we.sent(),this.scenarioMarker.completeScenario(a.default.UploadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,ee];case 5:return we.sent(),console.error("OmnichannelChatSDK/uploadFileAttachment/sendMessage/error"),this.scenarioMarker.failScenario(a.default.UploadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,6];case 6:return[2,{}];case 7:return le=void 0,v.default.isReactNative()||v.default.isNode()?[4,this.conversation.sendFileData(se,B.default.AmsBasedFileSharing)]:[3,9];case 8:return le=we.sent(),[3,11];case 9:return[4,this.conversation.uploadFile(se,B.default.AmsBasedFileSharing)];case 10:le=we.sent(),we.label=11;case 11:ee={content:"",timestamp:new Date,contentType:K.default.Text,deliveryMode:V.default.Bridged,messageType:ge.default.UserMessage,tags:x(i.defaultMessageTags),sender:{displayName:"Customer",id:"customer",type:r.default.User},fileMetadata:le},we.label=12;case 12:return we.trys.push([12,14,,15]),[4,this.conversation.sendFileMessage(le,ee)];case 13:return we.sent(),this.scenarioMarker.completeScenario(a.default.UploadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,ee];case 14:return Oe=we.sent(),console.error("OmnichannelChatSDK/uploadFileAttachment/error: "+Oe),this.scenarioMarker.failScenario(a.default.UploadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,Oe];case 15:return[2]}})})},ce.prototype.downloadFileAttachment=function(se){var he,ve;return N(this,void 0,void 0,function(){var ae,de,Re,ue,ye;return y(this,function(Se){switch(Se.label){case 0:if(this.scenarioMarker.startScenario(a.default.DownloadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.liveChatVersion!==W.default.V2)return[3,6];Se.label=1;case 1:return Se.trys.push([1,4,,5]),[4,null===(he=this.AMSClient)||void 0===he?void 0:he.getViewStatus(se)];case 2:return ae=Se.sent(),de=ae.view_location,[4,null===(ve=this.AMSClient)||void 0===ve?void 0:ve.getView(se,de)];case 3:return Re=Se.sent(),this.scenarioMarker.completeScenario(a.default.DownloadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,Re];case 4:throw Se.sent(),this.scenarioMarker.failScenario(a.default.DownloadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),new Error("DownloadFileAttachmentFailed");case 5:return[3,9];case 6:return Se.trys.push([6,8,,9]),[4,this.conversation.downloadFile(se)];case 7:return ue=Se.sent(),this.scenarioMarker.completeScenario(a.default.DownloadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,ue];case 8:throw ye=Se.sent(),console.error("OmnichannelChatSDK/downloadFileAttachment/error: "+ye),this.scenarioMarker.failScenario(a.default.DownloadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),new Error("DownloadFileAttachmentFailed");case 9:return[2]}})})},ce.prototype.emailLiveChatTranscript=function(se){return N(this,void 0,void 0,function(){var he,ve,ae;return y(this,function(de){he={},this.scenarioMarker.startScenario(a.default.EmailLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId});try{return this.authenticatedUserToken&&(he.authenticatedUserToken=this.authenticatedUserToken),ve={ChatId:this.chatToken.chatId,EmailAddress:se.emailAddress,DefaultAttachmentMessage:se.attachmentMessage,CustomerLocale:se.locale||P.getLocaleStringFromId(this.localeId)},ae=this.OCClient.emailTranscript(this.requestId,this.chatToken.token,ve,he),this.scenarioMarker.completeScenario(a.default.EmailLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,ae]}catch(Re){console.error("OmnichannelChatSDK/emailLiveChatTranscript/error: "+Re),this.scenarioMarker.failScenario(a.default.EmailLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}return[2]})})},ce.prototype.getLiveChatTranscript=function(){return N(this,void 0,void 0,function(){var se,he;return y(this,function(ve){se={},this.scenarioMarker.startScenario(a.default.GetLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId});try{return this.authenticatedUserToken&&(se.authenticatedUserToken=this.authenticatedUserToken),he=this.OCClient.getChatTranscripts(this.requestId,this.chatToken.chatId,this.chatToken.token,se),this.scenarioMarker.completeScenario(a.default.GetLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,he]}catch(ae){this.scenarioMarker.failScenario(a.default.GetLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}return[2]})})},ce.prototype.createChatAdapter=function(se){var he;return void 0===se&&(se={}),N(this,void 0,void 0,function(){var ve,ae,de;return y(this,function(Re){return v.default.isNode()||v.default.isReactNative()?[2,Promise.reject("ChatAdapter is only supported on browser")]:(ae=[I.default.ACS,I.default.IC3,I.default.DirectLine],(ve=se.protocol)&&!ae.includes(ve)?[2,Promise.reject("ChatAdapter for protocol "+ve+" currently not supported")]:ve===I.default.DirectLine?[2,k.createDirectLine(se,this.chatSDKConfig,this.liveChatVersion,I.default.DirectLine,this.telemetry,this.scenarioMarker)]:ve===I.default.ACS||this.liveChatVersion===W.default.V2?(de=new b.default(this.AMSClient,this.acsAdapterLogger),[2,k.createACSAdapter(se,this.chatSDKConfig,this.liveChatVersion,I.default.ACS,this.telemetry,this.scenarioMarker,this.omnichannelConfig,this.chatToken,de,null===(he=this.ACSClient)||void 0===he?void 0:he.getChatClient(),this.acsAdapterLogger)]):ve===I.default.IC3||this.liveChatVersion===W.default.V1?[2,k.createIC3Adapter(se,this.chatSDKConfig,this.liveChatVersion,I.default.IC3,this.telemetry,this.scenarioMarker,this.chatToken,this.IC3Client,this.ic3ClientLogger)]:[2,Promise.reject("ChatAdapter for protocol "+ve+" currently not supported")])})})},ce.prototype.getVoiceVideoCalling=function(se){return void 0===se&&(se={}),N(this,void 0,void 0,function(){var he,ve,de,Re,Ee,ue=this;return y(this,function(ye){switch(ye.label){case 0:if(this.scenarioMarker.startScenario(a.default.GetVoiceVideoCalling),v.default.isNode()||v.default.isReactNative())throw he={response:"UnsupportedPlatform",message:"VoiceVideoCalling is only supported on browser"},this.scenarioMarker.failScenario(a.default.GetVoiceVideoCalling,{ExceptionDetails:JSON.stringify(he)}),new Error(he.response);if(this.callingOption.toString()===w.default.NoCalling.toString())throw he={response:"FeatureDisabled",message:"Voice and video call is not enabled"},this.scenarioMarker.failScenario(a.default.GetVoiceVideoCalling,{ExceptionDetails:JSON.stringify(he)}),new Error(he.response);return[4,this.getChatConfig()];case 1:return ve=ye.sent(),de=ve.LiveWSAndLiveChatEngJoin.msdyn_widgetsnippet,Re=new RegExp('src="(https:\\/\\/[\\w-.]+)[\\w-.\\/]+"'),(Ee=de.match(Re))&&Ee.length?[2,new Promise(function(Se){return N(ue,void 0,void 0,function(){var ie,ee,le,Z=this;return y(this,function(Oe){switch(Oe.label){case 0:return ie=Ee[1]+"/livechatwidget/WebChatControl/lib/CallingBundle.js",null===(le=this.telemetry)||void 0===le||le.setCDNPackages({VoiceVideoCalling:ie}),ee={logger:this.callingSdkLogger},[4,E.loadScript(ie,function(){return N(Z,void 0,void 0,function(){var we;return y(this,function(Te){switch(Te.label){case 0:return this.debug&&console.debug(ie+" loaded!"),[4,d.default(p(p({},se),ee))];case 1:return we=Te.sent(),this.scenarioMarker.completeScenario(a.default.GetVoiceVideoCalling),we.useScenarioMarker(this.scenarioMarker),Se(we),[2]}})})},function(){return N(Z,void 0,void 0,function(){var we;return y(this,function(Te){throw we={response:"VoiceVideoCallingLoadFailed",message:"Failed to load VoiceVideoCalling"},this.scenarioMarker.failScenario(a.default.GetVoiceVideoCalling,{ExceptionDetails:JSON.stringify(we)}),new Error(we.response)})})})];case 1:return Oe.sent(),[2]}})})})]:[2]}})})},ce.prototype.getPostChatSurveyContext=function(){return N(this,void 0,void 0,function(){var se,ve,de,Re,Ee,ue,ye,Se,ie,ee,Z,Oe,we,Te,Ne;return y(this,function(Me){switch(Me.label){case 0:this.scenarioMarker.startScenario(a.default.GetPostChatSurveyContext,{RequestId:this.requestId}),Me.label=1;case 1:return Me.trys.push([1,6,,7]),de=(ve=this.liveChatConfig.LiveWSAndLiveChatEngJoin).msfp_sourcesurveyidentifier,Re=ve.msfp_botsourcesurveyidentifier,Ee=ve.postConversationSurveyOwnerId,ue=ve.postConversationBotSurveyOwnerId,"true"!==ve.msdyn_postconversationsurveyenable?[3,4]:[4,this.getConversationDetails()];case 2:return ye=Me.sent(),Se="True"===(null==ye?void 0:ye.canRenderPostChat),ee={FormId:"Bot"===(ie=null==ye?void 0:ye.participantType)?Re:de,ConversationId:se=null==ye?void 0:ye.conversationId,OCLocaleCode:P.getLocaleStringFromId(this.localeId)},Z={requestId:this.requestId},this.authenticatedUserToken&&(Z.authenticatedUserToken=this.authenticatedUserToken),[4,this.OCClient.getSurveyInviteLink("Bot"===ie?ue:Ee,ee,Z)];case 3:return Oe=Me.sent(),we=void 0,Te=void 0,null!=Oe?null==Oe.inviteList||1!=Oe.inviteList.length?(this.scenarioMarker.failScenario(a.default.GetPostChatSurveyContext,{ConversationId:se,RequestId:this.requestId,ExceptionDetails:"Survey Invite link failed to send response."}),[2,Promise.reject("Survey Invite link failed to send response.")]):(we=Oe.inviteList[0].invitationLink,null!=Oe.formsProLocaleCode&&(Te=Oe.formsProLocaleCode),[2,Promise.resolve({participantJoined:Se,participantType:ie,surveyInviteLink:we,formsProLocale:Te})]):(this.scenarioMarker.failScenario(a.default.GetPostChatSurveyContext,{ConversationId:se,RequestId:this.requestId,ExceptionDetails:"surveyInviteLinkResponse is null."}),[2,Promise.reject("surveyInviteLinkResponse is null.")]);case 4:return this.scenarioMarker.failScenario(a.default.GetPostChatSurveyContext,{RequestId:this.requestId,ExceptionDetails:"Post Chat Survey is disabled. Please check the Omnichannel Administration Portal."}),[2,Promise.reject("Post Chat is disabled from admin side.")];case 5:return[3,7];case 6:return Ne=Me.sent(),this.scenarioMarker.failScenario(a.default.GetPostChatSurveyContext,{ConversationId:null!=se?se:"",RequestId:this.requestId,ExceptionDetails:JSON.stringify(Ne)}),[2,Promise.reject("Retrieving post chat context failed "+JSON.stringify(Ne))];case 7:return[2]}})})},ce.prototype.getIC3Client=function(){return N(this,void 0,void 0,function(){var se,he=this;return y(this,function(ve){switch(ve.label){case 0:return v.default.isNode()||v.default.isReactNative()?(this.debug&&console.debug("IC3Core"),this.scenarioMarker.startScenario(a.default.GetIC3Client),this.IC3SDKProvider=j.SDKProvider,[4,j.SDKProvider.getSDK({hostType:U.default.Page,protocolType:s.default.IC3V1SDK})]):[3,2];case 1:return(se=ve.sent()).setDebug(this.debug),this.scenarioMarker.completeScenario(a.default.GetIC3Client),[2,se];case 2:return this.debug&&console.debug("IC3Client"),[2,new Promise(function(ae,de){return N(he,void 0,void 0,function(){var Re,Ee,ye,ue=this;return y(this,function(Se){switch(Se.label){case 0:return Re=this.resolveIC3ClientUrl(),null===(ye=this.telemetry)||void 0===ye||ye.setCDNPackages({IC3Client:Re}),this.scenarioMarker.startScenario(a.default.GetIC3Client),this.IC3SDKProvider?[4,this.IC3SDKProvider.getSDK({hostType:U.default.IFrame,protocolType:s.default.IC3V1SDK,logger:this.ic3ClientLogger})]:[3,2];case 1:return Ee=Se.sent(),[2,ae(Ee)];case 2:return window.addEventListener("ic3:sdk:load",function(){return N(ue,void 0,void 0,function(){var ie,ee,Z;return y(this,function(le){switch(le.label){case 0:return this.debug&&console.debug("ic3:sdk:load"),ie=window.Microsoft.CRM.Omnichannel.IC3Client.SDK,this.IC3SDKProvider=ee=ie.SDKProvider,[4,ee.getSDK({hostType:U.default.IFrame,protocolType:s.default.IC3V1SDK,logger:this.ic3ClientLogger})];case 1:return Z=le.sent(),this.scenarioMarker.completeScenario(a.default.GetIC3Client),ae(Z),[2]}})})}),[4,E.loadScript(Re,function(){ue.debug&&console.debug("IC3Client loaded!")},function(){ue.scenarioMarker.failScenario(a.default.GetIC3Client,{ExceptionDetails:JSON.stringify({response:"IC3ClientLoadFailed"})}),de("Failed to load IC3Client")})];case 3:return Se.sent(),[2]}})})})]}})})},ce.prototype.getChatConfig=function(se){return void 0===se&&(se={}),N(this,void 0,void 0,function(){var he,ae,de,Re,Ee,ue,ee,Z,le,Oe,we,Te,yt,Ne;return y(this,function(Me){switch(Me.label){case 0:he=se.sendCacheHeaders,Me.label=1;case 1:return Me.trys.push([1,5,,6]),[4,this.OCClient.getChatConfig(this.requestId,!0===he)];case 2:return ae=Me.sent(),de=ae.DataMaskingInfo,Re=ae.LiveChatConfigAuthSettings,Ee=ae.LiveWSAndLiveChatEngJoin,ue=ae.LiveChatVersion,this.localeId=ae.ChatWidgetLanguage.msdyn_localeid||P.defaultLocaleId,this.liveChatVersion=ue||W.default.V1,this.debug&&console.log("[OmnichannelChatSDK][getChatConfig][liveChatVersion] "+this.liveChatVersion),de.setting.msdyn_maskforcustomer&&(this.dataMaskingRules=de.dataMaskingRules),Re&&(this.authSettings=Re),ee=Ee.PreChatSurvey,le=Ee.msdyn_callingoptions,Te=!0===(Z=Ee.msdyn_prechatenabled)||"true"==Z,yt=!0===(we=Ee.msdyn_enablechatreconnect)||"true"==we,(null==(Oe=Ee.msdyn_conversationmode)?void 0:Oe.toString())===O.default.PersistentChat.toString()&&(this.isPersistentChat=!0),yt&&!this.isPersistentChat&&(this.isChatReconnect=!0),Te&&ee&&ee.trim().length>0&&(this.preChatSurvey=ee),this.authSettings?[4,this.setAuthTokenProvider(this.chatSDKConfig.getAuthToken)]:[3,4];case 3:Me.sent(),Me.label=4;case 4:return this.preChatSurvey&&this.debug&&console.log("Prechat Survey!"),this.callingOption=le,this.liveChatConfig=ae,[2,this.liveChatConfig];case 5:return Ne=Me.sent(),console.error("OmnichannelChatSDK/getChatConfig/error "+Ne),[2,Ne];case 6:return[2]}})})},ce.prototype.resolveIC3ClientUrl=function(){return q.default.resolveIC3ClientUrl(this.chatSDKConfig)},ce.prototype.resolveChatAdapterUrl=function(se){return q.default.resolveChatAdapterUrl(this.chatSDKConfig,this.liveChatVersion,se)},ce.prototype.updateChatToken=function(se,he){return N(this,void 0,void 0,function(){var ve,ae;return y(this,function(Re){switch(Re.label){case 0:this.scenarioMarker.startScenario(a.default.UpdateChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),Re.label=1;case 1:return Re.trys.push([1,4,,5]),ve={token:se,regionGtms:he,visitor:!0},this.liveChatVersion!==W.default.V1?[3,3]:[4,this.IC3Client.initialize(ve)];case 2:Re.sent(),Re.label=3;case 3:return this.scenarioMarker.completeScenario(a.default.UpdateChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,5];case 4:return ae=Re.sent(),this.scenarioMarker.failScenario(a.default.UpdateChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify({response:"UpdateChatTokenFailed"})}),console.error("OmnichannelChatSDK/updateChatToken/error "+ae),[3,5];case 5:return[2]}})})},ce.prototype.setAuthTokenProvider=function(se){return N(this,void 0,void 0,function(){var he,ve;return y(this,function(de){switch(de.label){case 0:if(this.scenarioMarker.startScenario(a.default.GetAuthToken),this.chatSDKConfig.getAuthToken=se,!this.chatSDKConfig.getAuthToken)return[3,5];de.label=1;case 1:return de.trys.push([1,3,,4]),[4,this.chatSDKConfig.getAuthToken()];case 2:return(he=de.sent())?(this.authenticatedUserToken=he,this.scenarioMarker.completeScenario(a.default.GetAuthToken)):(ve={response:"UndefinedAuthToken"},this.scenarioMarker.failScenario(a.default.GetAuthToken,{ExceptionDetails:JSON.stringify(ve)})),[3,4];case 3:return de.sent(),ve={response:"GetAuthTokenFailed"},this.scenarioMarker.failScenario(a.default.GetAuthToken,{ExceptionDetails:JSON.stringify(ve)}),[3,4];case 4:return[3,6];case 5:ve={response:"GetAuthTokenNotFound"},this.scenarioMarker.failScenario(a.default.GetAuthToken,{ExceptionDetails:JSON.stringify(ve)}),de.label=6;case 6:return[2]}})})},ce}();L.default=J},6633:function(Y,L,T){"use strict";var p=this&&this.__awaiter||function(E,v,h,_){return new(h||(h=Promise))(function(w,I){function D(V){try{O(_.next(V))}catch(B){I(B)}}function k(V){try{O(_.throw(V))}catch(B){I(B)}}function O(V){V.done?w(V.value):function(w){return w instanceof h?w:new h(function(I){I(w)})}(V.value).then(D,k)}O((_=_.apply(E,v||[])).next())})},N=this&&this.__generator||function(E,v){var _,b,w,I,h={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return I={next:D(0),throw:D(1),return:D(2)},"function"==typeof Symbol&&(I[Symbol.iterator]=function(){return this}),I;function D(O){return function(V){return function(O){if(_)throw new TypeError("Generator is already executing.");for(;h;)try{if(_=1,b&&(w=2&O[0]?b.return:O[0]?b.throw||((w=b.return)&&w.call(b),0):b.next)&&!(w=w.call(b,O[1])).done)return w;switch(b=0,w&&(O=[2&O[0],w.value]),O[0]){case 0:case 1:w=O;break;case 4:return h.label++,{value:O[1],done:!1};case 5:h.label++,b=O[1],O=[0];continue;case 7:O=h.ops.pop(),h.trys.pop();continue;default:if(!(w=(w=h.trys).length>0&&w[w.length-1])&&(6===O[0]||2===O[0])){h=0;continue}if(3===O[0]&&(!w||O[1]>w[0]&&O[1]<w[3])){h.label=O[1];break}if(6===O[0]&&h.label<w[1]){h.label=w[1],w=O;break}if(w&&h.label<w[2]){h.label=w[2],h.ops.push(O);break}w[2]&&h.ops.pop(),h.trys.pop();continue}O=v.call(E,h)}catch(V){O=[6,V],b=0}finally{_=w=0}if(5&O[0])throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}([O,V])}}};Object.defineProperty(L,"__esModule",{value:!0}),L.VoiceVideoCallingProxy=void 0;var y=T(9600),x=(()=>{return(E=x||(x={}))[E.Voice=19237e4]="Voice",E[E.Video=19238e4]="Video",E[E.Cobrowse=19239e4]="Cobrowse",x;var E})(),u=(()=>{return(E=u||(u={})).Accept="accept",E.Reject="reject",E.Connect="connect",E.End="end",u;var E})(),g=(()=>{return(E=g||(g={})).CallAdded="callAdded",E.LocalVideoStreamAdded="localVideoStreamAdded",E.LocalVideoStreamRemoved="localVideoStreamRemoved",E.RemoteVideoStreamAdded="remoteVideoStreamAdded",E.RemoteVideoStreamRemoved="remoteVideoStreamRemoved",E.CallDisconnected="callDisconnected",E.ParticipantDisconnected="participantDisconnected",E.IncomingCallEnded="incomingCallEnded",g;var E})(),C=function(){function E(){this.debug=!1,this.callClientName="ElevateToVoiceVideo",this.proxy=window["Microsoft.Omnichannel.Calling.SDK"].VoiceVideoCalling,this.proxyInstance=this.proxy.getInstance()}return E.getInstance=function(){return this._instance||(this._instance=new E),this._instance},E.prototype.setDebug=function(v){this.debug=v},E.prototype.useScenarioMarker=function(v){this.scenarioMarker=v},E.prototype.load=function(v){return void 0===v&&(v={}),p(this,void 0,void 0,function(){return N(this,function(h){return v.logger&&(this.logger=v.logger),this.proxyInstance.load(v),[2]})})},E.prototype.isInitialized=function(){return this.proxyInstance.isInitialized()},E.prototype.initialize=function(v){var h,_,b,w,I,D,k,O;return p(this,void 0,void 0,function(){var V;return N(this,function(B){switch(B.label){case 0:return this.debug&&console.debug("[VoiceVideoCallingProxy] VoiceVideoCallingParams: "+JSON.stringify(v)),this.callingParams=v,null===(h=this.scenarioMarker)||void 0===h||h.startScenario(y.default.InitializeVoiceVideoCallingSDK),this.debug&&console.debug("[VoiceVideoCallingProxy][initialize] _isLoaded: "+this.proxyInstance._isLoaded),this.proxyInstance._isLoaded?[3,2]:[4,this.proxyInstance.load({logger:this.logger||void 0})];case 1:B.sent(),B.label=2;case 2:return B.trys.push([2,4,,5]),[4,this.proxyInstance.initialize({callClientName:this.callClientName,accesstoken:(null===(b=null===(_=this.callingParams)||void 0===_?void 0:_.chatToken.voiceVideoCallToken)||void 0===b?void 0:b.Token)||(null===(w=this.callingParams)||void 0===w?void 0:w.chatToken.token),selfVideoHTMLElementId:null===(I=this.callingParams)||void 0===I?void 0:I.selfVideoHTMLElementId,remoteVideoHTMLElementId:null===(D=this.callingParams)||void 0===D?void 0:D.remoteVideoHTMLElementId})];case 3:return B.sent(),null===(k=this.scenarioMarker)||void 0===k||k.completeScenario(y.default.InitializeVoiceVideoCallingSDK),[3,5];case 4:return V=B.sent(),console.log(V),null===(O=this.scenarioMarker)||void 0===O||O.failScenario(y.default.InitializeVoiceVideoCallingSDK),[3,5];case 5:return[2]}})})},E.prototype.addEventListener=function(v,h){var _=this;this.proxyInstance.registerEvent(v,function(b){var w=b.callId;v===g.CallAdded&&(_.callId=w),_.debug&&console.debug("[VoiceVideoCallingProxy]["+v+"] callId: "+w),w===_.callId&&h(b)})},E.prototype.isMicrophoneMuted=function(){return this.proxyInstance.isMicrophoneMuted({callClientName:this.callClientName,callId:this.callId})},E.prototype.acceptCall=function(v){var h,_,b,w,I,D;return void 0===v&&(v={}),p(this,void 0,void 0,function(){var k,O,V,j,U;return N(this,function(W){switch(W.label){case 0:O=(k=this).callClientName,V=k.callId,null===(h=this.scenarioMarker)||void 0===h||h.startScenario(v.withVideo?y.default.AcceptVideoCall:y.default.AcceptVoiceCall,{CallId:V||""}),this.debug&&console.debug("[VoiceVideoCallingProxy][acceptCall] callId: "+V),this.debug&&console.debug(v),W.label=1;case 1:return W.trys.push([1,3,,4]),[4,this.proxyInstance.acceptCall({callClientName:O,callId:V,withVideo:v.withVideo||!1})];case 2:return W.sent(),[3,4];case 3:return W.sent(),U={response:v.withVideo?"AcceptVideoCallFailed":"AcceptVoiceCallFailed"},null===(_=this.scenarioMarker)||void 0===_||_.failScenario(v.withVideo?y.default.AcceptVideoCall:y.default.AcceptVoiceCall,{CallId:V||"",ExceptionDetails:JSON.stringify(U)}),[3,4];case 4:j={SecondaryChannelType:v.withVideo?x.Video:x.Voice,SecondaryChannelEventType:u.Accept};try{null===(b=this.callingParams)||void 0===b||b.OCClient.makeSecondaryChannelEventRequest(null===(w=this.callingParams)||void 0===w?void 0:w.chatToken.requestId,j),null===(I=this.scenarioMarker)||void 0===I||I.completeScenario(v.withVideo?y.default.AcceptVideoCall:y.default.AcceptVoiceCall,{CallId:V||""}),this.debug&&console.debug("[VoiceVideoCallingProxy][acceptCall][makeSecondaryChannelEventRequest]")}catch(X){U={response:"OCClientMakeSecondaryChannelEventRequestFailed"},null===(D=this.scenarioMarker)||void 0===D||D.failScenario(v.withVideo?y.default.AcceptVideoCall:y.default.AcceptVoiceCall,{CallId:V||"",ExceptionDetails:JSON.stringify(U)}),console.error("[VoiceVideoCallingProxy][acceptCall][makeSecondaryChannelEventRequest] Failure "+X)}return[2]}})})},E.prototype.rejectCall=function(){var v,h,_,b,w,I;return p(this,void 0,void 0,function(){var D,k,O,U,B;return N(this,function(j){switch(j.label){case 0:k=(D=this).callClientName,O=D.callId,null===(v=this.scenarioMarker)||void 0===v||v.startScenario(y.default.RejectCall,{CallId:O||""}),this.debug&&console.debug("[VoiceVideoCallingProxy][rejectCall] callId: "+O),j.label=1;case 1:return j.trys.push([1,3,,4]),[4,this.proxyInstance.rejectCall({callClientName:k,callId:O})];case 2:return j.sent(),null===(h=this.scenarioMarker)||void 0===h||h.completeScenario(y.default.RejectCall,{CallId:O||""}),[3,4];case 3:return j.sent(),B={response:"RejectCallFailed"},null===(_=this.scenarioMarker)||void 0===_||_.failScenario(y.default.RejectCall,{CallId:O||"",ExceptionDetails:JSON.stringify(B)}),[3,4];case 4:U={SecondaryChannelType:this.isRemoteVideoEnabled()?x.Video:x.Voice,SecondaryChannelEventType:u.Reject};try{null===(b=this.callingParams)||void 0===b||b.OCClient.makeSecondaryChannelEventRequest(null===(w=this.callingParams)||void 0===w?void 0:w.chatToken.requestId,U),this.debug&&console.debug("[VoiceVideoCallingProxy][rejectCall][makeSecondaryChannelEventRequest]")}catch(W){return B={response:"OCClientMakeSecondaryChannelEventRequestFailed"},null===(I=this.scenarioMarker)||void 0===I||I.failScenario(y.default.RejectCall,{CallId:O||"",ExceptionDetails:JSON.stringify(B)}),console.error("[VoiceVideoCallingProxy][rejectCall][makeSecondaryChannelEventRequest] Failure "+W),[2,W]}return[2]}})})},E.prototype.stopCall=function(){var v,h,_,b,w;return p(this,void 0,void 0,function(){var I,D,k,O;return N(this,function(B){switch(B.label){case 0:D=(I=this).callClientName,k=I.callId,null===(v=this.scenarioMarker)||void 0===v||v.startScenario(y.default.StopCall,{CallId:k||""}),this.debug&&console.debug("[VoiceVideoCallingProxy][stopCall] callId: "+k),O=!!(null===(_=null===(h=this.callingParams)||void 0===h?void 0:h.chatToken.voiceVideoCallToken)||void 0===_?void 0:_.Token),B.label=1;case 1:return B.trys.push([1,3,,4]),[4,this.proxyInstance.stopCall({callClientName:D,callId:k,forEveryone:O})];case 2:return B.sent(),null===(b=this.scenarioMarker)||void 0===b||b.completeScenario(y.default.StopCall,{CallId:k||""}),[3,4];case 3:return B.sent(),null===(w=this.scenarioMarker)||void 0===w||w.failScenario(y.default.StopCall,{CallId:k||""}),[3,4];case 4:return[2]}})})},E.prototype.toggleMute=function(){return p(this,void 0,void 0,function(){var v;return N(this,function(b){return[2,this.proxyInstance.toggleMute({callClientName:(v=this).callClientName,callId:v.callId})]})})},E.prototype.isRemoteVideoEnabled=function(){return this.proxyInstance.isRemoteVideoEnabled({callClientName:this.callClientName,callId:this.callId})},E.prototype.isLocalVideoEnabled=function(){return this.proxyInstance.isLocalVideoEnabled({callClientName:this.callClientName,callId:this.callId})},E.prototype.toggleLocalVideo=function(){return p(this,void 0,void 0,function(){var v;return N(this,function(b){return[2,this.proxyInstance.toggleLocalVideo({callClientName:(v=this).callClientName,callId:v.callId})]})})},E.prototype.isInACall=function(){return this.proxyInstance.isInACall({callClientName:this.callClientName,callId:this.callId})},E.prototype.renderVideoStreams=function(){return this.proxyInstance.renderVideoStreams({callClientName:this.callClientName,callId:this.callId})},E.prototype.disposeVideoRenderers=function(){return this.proxyInstance.disposeVideoRenderers({callClientName:this.callClientName,callId:this.callId})},E.prototype.close=function(){this.debug&&console.debug("[VoiceVideoCallingProxy][close]"),this.proxyInstance.dispose(),this.callingParams=void 0,this.callId=void 0},E.prototype.onCallAdded=function(v){var h=g.CallAdded;this.debug&&console.debug("[VoiceVideoCallingProxy]["+h+"]"),this.addEventListener(h,v)},E.prototype.onLocalVideoStreamAdded=function(v){var h=g.LocalVideoStreamAdded;this.debug&&console.debug("[VoiceVideoCallingProxy]["+h+"]"),this.addEventListener(h,v)},E.prototype.onLocalVideoStreamRemoved=function(v){var h=g.LocalVideoStreamRemoved;this.debug&&console.debug("[VoiceVideoCallingProxy]["+h+"]"),this.addEventListener(h,v)},E.prototype.onRemoteVideoStreamAdded=function(v){var h=g.RemoteVideoStreamAdded;this.debug&&console.debug("[VoiceVideoCallingProxy]["+h+"]"),this.addEventListener(h,v)},E.prototype.onRemoteVideoStreamRemoved=function(v){var h=g.RemoteVideoStreamRemoved;this.debug&&console.debug("[VoiceVideoCallingProxy]["+h+"]"),this.addEventListener(h,v)},E.prototype.onCallDisconnected=function(v){var h=this,_=g.CallDisconnected;this.debug&&console.debug("[VoiceVideoCallingProxy]["+_+"]"),this.addEventListener(_,function(b){return p(h,void 0,void 0,function(){var w,I,D,k,O,V,B;return N(this,function(U){w={SecondaryChannelType:x.Voice,SecondaryChannelEventType:u.End},null===(D=this.scenarioMarker)||void 0===D||D.startScenario(y.default.OnCallDisconnected,{CallId:this.callId||""});try{null===(k=this.callingParams)||void 0===k||k.OCClient.makeSecondaryChannelEventRequest(null===(O=this.callingParams)||void 0===O?void 0:O.chatToken.requestId,w),this.debug&&console.debug("[VoiceVideoCallingProxy][onCallDisconnected][makeSecondaryChannelEventRequest]"),null===(V=this.scenarioMarker)||void 0===V||V.completeScenario(y.default.OnCallDisconnected,{CallId:this.callId||""})}catch(j){console.error("[VoiceVideoCallingProxy][onCallDisconnected][makeSecondaryChannelEventRequest] Failure "+j),I={response:"OCClientMakeSecondaryChannelEventRequestFailed"},null===(B=this.scenarioMarker)||void 0===B||B.failScenario(y.default.OnCallDisconnected,{CallId:this.callId||"",ExceptionDetails:JSON.stringify(I)})}return this.clearRemoteVideoElementChildren(),v(b),[2]})})})},E.prototype.clearRemoteVideoElementChildren=function(){var v,h;if(null===(v=this.callingParams)||void 0===v?void 0:v.remoteVideoHTMLElementId)for(var _=document.getElementById(null===(h=this.callingParams)||void 0===h?void 0:h.remoteVideoHTMLElementId);null==_?void 0:_.firstChild;)this.debug&&console.debug("[VoiceVideoCallingProxy][clearRemoteVideoElement]"),_.firstChild.remove()},E}();L.VoiceVideoCallingProxy=C,L.default=function(E){return void 0===E&&(E={}),p(void 0,void 0,void 0,function(){var v;return N(this,function(h){switch(h.label){case 0:return[4,(v=C.getInstance()).load({logger:E.logger||void 0})];case 1:return h.sent(),[2,Promise.resolve(v)]}})})}},4151:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.ariaTelemetryKey=L.webChatDirectLineVersion=L.webChatACSAdapterVersion=L.webChatIC3AdapterVersion=L.ic3ClientVersion=void 0,L.ic3ClientVersion="2021.08.14.1",L.webChatIC3AdapterVersion="0.1.0-master.2dba07b",L.webChatACSAdapterVersion="0.0.35-beta.12",L.webChatDirectLineVersion="0.15.1",L.ariaTelemetryKey="c7655518acf1403f93ff6b9f77942f0a-d01a02fd-6b50-4de3-a566-62eda11f93bc-7083"},6419:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={}))[p.NoCalling=19235e4]="NoCalling",p[p.VideoAndVoiceCalling=192350001]="VideoAndVoiceCalling",p[p.VoiceOnly=192350002]="VoiceOnly",T;var p})();L.default=T},7587:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>((T||(T={})).UnsupportedPlatform="UnsupportedPlatform",T))();L.default=T},7925:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={}))[p.LiveChat=19235e4]="LiveChat",p[p.PersistentChat=192350001]="PersistentChat",T;var p})();L.default=T},8191:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={}))[p.V1=1]="V1",p[p.V2=2]="V2",T;var p})();L.default=T},5642:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={})).Active="Active",p.Closed="Closed",p.Open="Open",p.Waiting="Waiting",p.WrapUp="WrapUp",T;var p})();L.default=T},6233:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={}))[p.WidgetUseOutsideOperatingHour=705]="WidgetUseOutsideOperatingHour",T;var p})();L.default=T},1974:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={})).Text="text",p.TopicUpdated="topicUpdated",p.ParticipantAdded="participantAdded",p.ParticipantRemoved="participantRemoved",T;var p})();L.default=T},2902:function(Y,L,T){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(I){for(var D,k=1,O=arguments.length;k<O;k++)for(var V in D=arguments[k])Object.prototype.hasOwnProperty.call(D,V)&&(I[V]=D[V]);return I}).apply(this,arguments)},N=this&&this.__awaiter||function(I,D,k,O){return new(k||(k=Promise))(function(B,U){function j(K){try{X(O.next(K))}catch(ge){U(ge)}}function W(K){try{X(O.throw(K))}catch(ge){U(ge)}}function X(K){K.done?B(K.value):function(B){return B instanceof k?B:new k(function(U){U(B)})}(K.value).then(j,W)}X((O=O.apply(I,D||[])).next())})},y=this&&this.__generator||function(I,D){var O,V,B,U,k={label:0,sent:function(){if(1&B[0])throw B[1];return B[1]},trys:[],ops:[]};return U={next:j(0),throw:j(1),return:j(2)},"function"==typeof Symbol&&(U[Symbol.iterator]=function(){return this}),U;function j(X){return function(K){return function(X){if(O)throw new TypeError("Generator is already executing.");for(;k;)try{if(O=1,V&&(B=2&X[0]?V.return:X[0]?V.throw||((B=V.return)&&B.call(V),0):V.next)&&!(B=B.call(V,X[1])).done)return B;switch(V=0,B&&(X=[2&X[0],B.value]),X[0]){case 0:case 1:B=X;break;case 4:return k.label++,{value:X[1],done:!1};case 5:k.label++,V=X[1],X=[0];continue;case 7:X=k.ops.pop(),k.trys.pop();continue;default:if(!(B=(B=k.trys).length>0&&B[B.length-1])&&(6===X[0]||2===X[0])){k=0;continue}if(3===X[0]&&(!B||X[1]>B[0]&&X[1]<B[3])){k.label=X[1];break}if(6===X[0]&&k.label<B[1]){k.label=B[1],B=X;break}if(B&&k.label<B[2]){k.label=B[2],k.ops.push(X);break}B[2]&&k.ops.pop(),k.trys.pop();continue}X=D.call(I,k)}catch(K){X=[6,K],V=0}finally{O=B=0}if(5&X[0])throw X[1];return{value:X[0]?X[1]:void 0,done:!0}}([X,K])}}};Object.defineProperty(L,"__esModule",{value:!0}),L.ACSConversation=void 0;var x=T(1974),u=T(8953),g=T(8682),C=T(9116),P=T(9340),E=T(813),v=T(2900),h=T(8191),_=(()=>{return(I=_||(_={})).InitializeACSClient="InitializeACSClient",I.InitializeACSConversation="InitializeACSConversation",I.GetParticipants="GetParticipants",I.RegisterOnNewMessage="RegisterOnNewMessage",I.RegisterOnThreadUpdate="RegisterOnThreadUpdate",I.OnTypingEvent="OnTypingEvent",I.GetMessages="GetMessages",I.SendMessage="SendMessage",I.SendTyping="SendTyping",I.Disconnect="Disconnect",_;var I})(),b=function(){function I(D,k,O){void 0===O&&(O=null),this.logger=null,this.logger=O,this.tokenCredential=D,this.chatClient=k,this.eventListeners={}}return I.prototype.initialize=function(D){var k,O,V,B,U;return N(this,void 0,void 0,function(){var j,W,K,X,ge;return y(this,function(R){switch(R.label){case 0:null===(k=this.logger)||void 0===k||k.startScenario(_.InitializeACSConversation),this.sessionInfo=D,R.label=1;case 1:return R.trys.push([1,3,,4]),j=this,[4,null===(O=this.chatClient)||void 0===O?void 0:O.getChatThreadClient(D.threadId)];case 2:return j.chatThreadClient=R.sent(),[3,4];case 3:throw W=R.sent(),X={response:"ChatClientGetChatThreadClientFailure",errorObject:""+W},null===(V=this.logger)||void 0===V||V.failScenario(_.InitializeACSConversation,{ExceptionDetails:JSON.stringify(X)}),new Error("GetChatThreadClientFailed");case 4:return R.trys.push([4,6,,7]),[4,this.chatClient.startRealtimeNotifications()];case 5:return R.sent(),[3,7];case 6:throw K=R.sent(),X={response:"StartRealtimeNotificationsFailed",errorObject:""+K},null===(B=this.logger)||void 0===B||B.failScenario(_.InitializeACSConversation,{ExceptionDetails:JSON.stringify(X)}),new Error(X.response);case 7:return ge=this,[4,this.createParticipantsMapping()];case 8:return ge.participantsMapping=R.sent(),null===(U=this.logger)||void 0===U||U.completeScenario(_.InitializeACSConversation),[2]}})})},I.prototype.getMessages=function(){var D,k,O,V,B;return N(this,void 0,void 0,function(){var U,j,W,X,R,r,s;return y(this,function(l){switch(l.label){case 0:null===(D=this.logger)||void 0===D||D.startScenario(_.GetMessages),U=[],l.label=1;case 1:return l.trys.push([1,9,,10]),[4,this.chatThreadClient.listMessages()];case 2:return[4,(j=l.sent()).next()];case 3:W=l.sent(),l.label=4;case 4:return W.done?[3,8]:(X=W.value).type===x.default.Text?[3,6]:[4,j.next()];case 5:return W=l.sent(),[3,4];case 6:return(null===(k=X.content)||void 0===k?void 0:k.message)&&Object.assign(X,{content:null===(O=X.content)||void 0===O?void 0:O.message}),Object.assign(X.sender,{alias:this.participantsMapping[X.sender.communicationUserId].displayName}),R=P.default(X,{liveChatVersion:h.default.V2}),U.push(R),[4,j.next()];case 7:return W=l.sent(),[3,4];case 8:return null===(V=this.logger)||void 0===V||V.completeScenario(_.GetMessages),[3,10];case 9:throw r=l.sent(),s={errorObject:""+r},null===(B=this.logger)||void 0===B||B.failScenario(_.GetMessages,{ExceptionDetails:JSON.stringify(s)}),new Error(_.GetMessages);case 10:return[2,U]}})})},I.prototype.getParticipants=function(){var D,k,O;return N(this,void 0,void 0,function(){var V,B,U,W,X;return y(this,function(K){switch(K.label){case 0:null===(D=this.logger)||void 0===D||D.startScenario(_.GetParticipants),V=[],K.label=1;case 1:return K.trys.push([1,7,,8]),[4,this.chatThreadClient.listParticipants()];case 2:return[4,(B=K.sent()).next()];case 3:U=K.sent(),K.label=4;case 4:return U.done?[3,6]:(V.push(U.value),[4,B.next()]);case 5:return U=K.sent(),[3,4];case 6:return null===(k=this.logger)||void 0===k||k.completeScenario(_.GetParticipants),[3,8];case 7:throw W=K.sent(),X={errorObject:""+W},null===(O=this.logger)||void 0===O||O.failScenario(_.GetParticipants,{ExceptionDetails:JSON.stringify(X)}),new Error(_.GetParticipants);case 8:return[2,V]}})})},I.prototype.registerOnNewMessage=function(D){var k,O,V,B,U;return N(this,void 0,void 0,function(){var j,W,X,K,ge,R,r=this;return y(this,function(s){switch(s.label){case 0:null===(k=this.logger)||void 0===k||k.startScenario(_.RegisterOnNewMessage),j=!1,W=new Set,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,(X=function(l){return N(r,void 0,void 0,function(){var a,f,M,A,d;return y(this,function(z){switch(z.label){case 0:if(j)return[2];z.label=1;case 1:return z.trys.push([1,3,,4]),[4,this.getMessages()];case 2:for(a=z.sent(),f=0,M=a.reverse();f<M.length;f++)d=(A=M[f]).id,A.sender.displayName!==u.default.Customer&&(W.has(d)||(D(A),W.add(d)));return[3,4];case 3:return z.sent(),[3,4];case 4:return setTimeout(function(){X(l)},l),[2]}})})})(null===(O=this.sessionInfo)||void 0===O?void 0:O.pollingInterval)];case 2:return s.sent(),K=function(l){var a;j=!0;var f=l.id,M=l.sender;M.communicationUserId===(null===(a=r.sessionInfo)||void 0===a?void 0:a.id)||W.has(f)||(l.message&&Object.assign(l,{content:l.message}),Object.assign(l.sender,{alias:r.participantsMapping[M.communicationUserId].displayName}),D(l),W.add(f))},null===(V=this.chatClient)||void 0===V||V.on("chatMessageReceived",K),this.trackListener("chatMessageReceived",K),null===(B=this.logger)||void 0===B||B.completeScenario(_.RegisterOnNewMessage),[3,4];case 3:throw ge=s.sent(),R={errorObject:""+ge},null===(U=this.logger)||void 0===U||U.failScenario(_.RegisterOnNewMessage,{ExceptionDetails:JSON.stringify(R)}),new Error(_.RegisterOnNewMessage);case 4:return[2]}})})},I.prototype.registerOnThreadUpdate=function(D){var k,O,V,B;return N(this,void 0,void 0,function(){var U;return y(this,function(j){null===(k=this.logger)||void 0===k||k.startScenario(_.RegisterOnThreadUpdate);try{U=function(W){D(W)},null===(O=this.chatClient)||void 0===O||O.on("participantsRemoved",U),this.trackListener("participantsRemoved",U),null===(V=this.logger)||void 0===V||V.completeScenario(_.RegisterOnThreadUpdate)}catch(W){null===(B=this.logger)||void 0===B||B.failScenario(_.RegisterOnThreadUpdate)}return[2]})})},I.prototype.onTypingEvent=function(D){var k,O,V,B;return N(this,void 0,void 0,function(){var U;return y(this,function(j){null===(k=this.logger)||void 0===k||k.startScenario(_.OnTypingEvent);try{U=function(W){D(W)},null===(O=this.chatClient)||void 0===O||O.on("typingIndicatorReceived",U),this.trackListener("typingIndicatorReceived",U),null===(V=this.logger)||void 0===V||V.completeScenario(_.OnTypingEvent)}catch(W){null===(B=this.logger)||void 0===B||B.failScenario(_.OnTypingEvent)}return[2]})})},I.prototype.sendMessage=function(D){var k,O,V,B;return N(this,void 0,void 0,function(){var U,j;return y(this,function(X){switch(X.label){case 0:null===(k=this.logger)||void 0===k||k.startScenario(_.SendMessage),D.metadata||(D.metadata={}),U={content:D.content},j={senderDisplayName:u.default.Customer,metadata:p({deliveryMode:v.default.Bridged,tags:E.defaultMessageTags.join(",")},D.metadata)},X.label=1;case 1:return X.trys.push([1,3,,4]),[4,null===(O=this.chatThreadClient)||void 0===O?void 0:O.sendMessage(U,j)];case 2:return X.sent(),null===(V=this.logger)||void 0===V||V.completeScenario(_.SendMessage),[3,4];case 3:throw X.sent(),null===(B=this.logger)||void 0===B||B.failScenario(_.SendMessage),new Error("SendMessageFailed");case 4:return[2]}})})},I.prototype.sendTyping=function(){var D,k,O,V;return N(this,void 0,void 0,function(){return y(this,function(U){switch(U.label){case 0:null===(D=this.logger)||void 0===D||D.startScenario(_.SendTyping),U.label=1;case 1:return U.trys.push([1,3,,4]),[4,null===(k=this.chatThreadClient)||void 0===k?void 0:k.sendTypingNotification()];case 2:return U.sent(),null===(O=this.logger)||void 0===O||O.completeScenario(_.SendTyping),[3,4];case 3:throw U.sent(),null===(V=this.logger)||void 0===V||V.failScenario(_.SendTyping),new Error("SendTypingFailed");case 4:return[2]}})})},I.prototype.sendFileMessage=function(){return N(this,void 0,void 0,function(){return y(this,function(D){return[2,void 0]})})},I.prototype.sendFileData=function(){return N(this,void 0,void 0,function(){return y(this,function(D){return[2,void 0]})})},I.prototype.uploadFile=function(){return N(this,void 0,void 0,function(){return y(this,function(D){return[2,void 0]})})},I.prototype.downloadFile=function(){return N(this,void 0,void 0,function(){return y(this,function(D){return[2,void 0]})})},I.prototype.disconnect=function(){var D,k,O;return N(this,void 0,void 0,function(){var V,B,U,j,K=this;return y(this,function(ge){null===(D=this.logger)||void 0===D||D.startScenario(_.Disconnect);try{for(V=function(R,r){r.forEach(function(s){K.chatClient.off(R,s)})},B=0,U=Object.entries(this.eventListeners);B<U.length;B++)V((j=U[B])[0],j[1]);null===(k=this.logger)||void 0===k||k.completeScenario(_.Disconnect)}catch(R){null===(O=this.logger)||void 0===O||O.failScenario(_.Disconnect)}return[2]})})},I.prototype.createParticipantsMapping=function(){return N(this,void 0,void 0,function(){var D,k,O,V,B,U,j;return y(this,function(W){switch(W.label){case 0:return[4,this.getParticipants()];case 1:for(D=W.sent(),k={},O=0,V=D;O<V.length;O++)U=(B=V[O]).id,Object.keys(k).includes(U.communicationUserId)||Object.assign(k,((j={})[U.communicationUserId]=B,j));return[2,k]}})})},I.prototype.trackListener=function(D,k){D in this.eventListeners||(this.eventListeners[D]=[]),this.eventListeners[D].push(k)},I}();L.ACSConversation=b;var w=function(){function I(D){void 0===D&&(D=null),this.logger=null,this.tokenCredential=null,this.chatClient=null,this.logger=D}return I.prototype.initialize=function(D){var k,O,V,B;return N(this,void 0,void 0,function(){var U;return y(this,function(j){null===(k=this.logger)||void 0===k||k.startScenario(_.InitializeACSClient);try{this.tokenCredential=new C.AzureCommunicationTokenCredential(D.token)}catch(W){throw U={response:"CreateTokenCredentialFailure",errorObject:""+W},null===(O=this.logger)||void 0===O||O.failScenario(_.InitializeACSClient,{ExceptionDetails:JSON.stringify(U)}),new Error("CreateTokenCredentialFailed")}try{this.chatClient=new g.ChatClient(D.environmentUrl,this.tokenCredential)}catch(W){throw U={response:"CreateChatClientFailure",errorObject:""+W},null===(V=this.logger)||void 0===V||V.failScenario(_.InitializeACSClient,{ExceptionDetails:JSON.stringify(U)}),new Error("CreateChatClientFailed")}return null===(B=this.logger)||void 0===B||B.completeScenario(_.InitializeACSClient),[2]})})},I.prototype.joinConversation=function(D){return N(this,void 0,void 0,function(){var k;return y(this,function(O){switch(O.label){case 0:return[4,(k=new b(this.tokenCredential,this.chatClient,this.logger)).initialize(D)];case 1:return O.sent(),[2,k]}})})},I.prototype.getChatClient=function(){return this.chatClient},I}();L.default=w},8953:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={})).Customer="Customer",p.Agent="__agent__",p.System="__system__",T;var p})();L.default=T},7474:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default={IC3:"IC3",DirectLine:"DirectLine",ACS:"ACS"}},813:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.defaultMessageTags=L.customerMessageTag=L.channelIdTag=void 0,L.channelIdTag="ChannelId-lcw",L.customerMessageTag="FromCustomer",L.defaultMessageTags=[L.channelIdTag,L.customerMessageTag]},3709:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.ResourceType=L.FileSharingProtocolType=L.PersonType=L.MessageType=L.DeliveryMode=L.MessageContentType=void 0;var T=function(){function g(){}return g.RichText="RichText",g.Text="Text",g}();L.MessageContentType=T;var p=function(){function g(){}return g.Bridged="bridged",g.Unbridged="unbridged",g}();L.DeliveryMode=p;var g,N=function(){function g(){}return g.UserMessage="UserMessage",g.SwiftCard="SwiftCard",g.Typing="Control/Typing",g.ClearTyping="Control/ClearTyping",g.LiveState="Control/LiveState",g}();L.MessageType=N,(g=L.PersonType||(L.PersonType={}))[g.Unknown=0]="Unknown",g[g.User=1]="User",g[g.Bot=2]="Bot",function(g){g[g.AmsBasedFileSharing=0]="AmsBasedFileSharing"}(L.FileSharingProtocolType||(L.FileSharingProtocolType={}));var u=function(){function g(){}return g.NewMessage="NewMessage",g.MessageUpdate="MessageUpdate",g.UserPresence="UserPresence",g.ConversationUpdate="ConversationUpdate",g.ThreadUpdate="ThreadUpdate",g}();L.ResourceType=u},2921:function(Y,L){"use strict";var T=this&&this.__awaiter||function(u,g,C,P){return new(C||(C=Promise))(function(v,h){function _(I){try{w(P.next(I))}catch(D){h(D)}}function b(I){try{w(P.throw(I))}catch(D){h(D)}}function w(I){I.done?v(I.value):function(v){return v instanceof C?v:new C(function(h){h(v)})}(I.value).then(_,b)}w((P=P.apply(u,g||[])).next())})},p=this&&this.__generator||function(u,g){var P,E,v,h,C={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return h={next:_(0),throw:_(1),return:_(2)},"function"==typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h;function _(w){return function(I){return function(w){if(P)throw new TypeError("Generator is already executing.");for(;C;)try{if(P=1,E&&(v=2&w[0]?E.return:w[0]?E.throw||((v=E.return)&&v.call(E),0):E.next)&&!(v=v.call(E,w[1])).done)return v;switch(E=0,v&&(w=[2&w[0],v.value]),w[0]){case 0:case 1:v=w;break;case 4:return C.label++,{value:w[1],done:!1};case 5:C.label++,E=w[1],w=[0];continue;case 7:w=C.ops.pop(),C.trys.pop();continue;default:if(!(v=(v=C.trys).length>0&&v[v.length-1])&&(6===w[0]||2===w[0])){C=0;continue}if(3===w[0]&&(!v||w[1]>v[0]&&w[1]<v[3])){C.label=w[1];break}if(6===w[0]&&C.label<v[1]){C.label=v[1],v=w;break}if(v&&C.label<v[2]){C.label=v[2],C.ops.push(w);break}v[2]&&C.ops.pop(),C.trys.pop();continue}w=g.call(u,C)}catch(I){w=[6,I],E=0}finally{P=v=0}if(5&w[0])throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}([w,I])}}};Object.defineProperty(L,"__esModule",{value:!0});var y=(()=>{return(u=y||(y={})).AMSUpload="AMSUpload",u.AMSDownload="AMSDownload",u.GetFileIds="GetFileIds",u.CreateFileIdProperty="CreateFileIdProperty",u.GetFileMetadata="GetFileMetadata",u.CreateFileMetadataProperty="CreateFileMetadataProperty",y;var u})(),x=function(){function u(g,C){void 0===C&&(C=null),this.logger=C,this.amsClient=g}return u.prototype.uploadFiles=function(g){return T(this,void 0,void 0,function(){var C=this;return p(this,function(P){return[2,Promise.all(g.map(function(E){return T(C,void 0,void 0,function(){return p(this,function(v){return[2,this.uploadFileToAMS(E)]})})}))]})})},u.prototype.downloadFiles=function(g){return T(this,void 0,void 0,function(){var C=this;return p(this,function(P){return[2,Promise.all(g.map(function(E){return T(C,void 0,void 0,function(){return p(this,function(v){return[2,this.downloadFileFromAMS(E)]})})}))]})})},u.prototype.updatePermissions=function(){return T(this,void 0,void 0,function(){return p(this,function(g){return[2,void 0]})})},u.prototype.getFileIds=function(g){var C,P,E;if(g&&(g.amsReferences||g.amsreferences)){null===(C=this.logger)||void 0===C||C.startScenario(y.GetFileIds);try{var v=void 0;return(null==g?void 0:g.amsReferences)&&(v=JSON.parse(null==g?void 0:g.amsReferences)),(null==g?void 0:g.amsreferences)&&(v=JSON.parse(null==g?void 0:g.amsreferences)),null===(P=this.logger)||void 0===P||P.completeScenario(y.GetFileIds),v}catch(_){return void(null===(E=this.logger)||void 0===E||E.failScenario(y.GetFileIds,{ExceptionDetails:JSON.stringify({metadata:""+g,errorObject:""+_})}))}}},u.prototype.createFileIdProperty=function(g){var C,P,E;if(g){null===(C=this.logger)||void 0===C||C.startScenario(y.CreateFileIdProperty);try{var v={amsReferences:JSON.stringify(g),amsreferences:JSON.stringify(g)};return null===(P=this.logger)||void 0===P||P.completeScenario(y.CreateFileIdProperty),v}catch(_){return void(null===(E=this.logger)||void 0===E||E.failScenario(y.CreateFileIdProperty,{ExceptionDetails:JSON.stringify({fileIds:""+g,errorObject:""+_})}))}}},u.prototype.getFileMetadata=function(g){var C,P,E;if(g&&g.amsMetadata){null===(C=this.logger)||void 0===C||C.startScenario(y.GetFileMetadata);try{var v=JSON.parse(null==g?void 0:g.amsMetadata);return null===(P=this.logger)||void 0===P||P.completeScenario(y.GetFileMetadata),v}catch(_){return void(null===(E=this.logger)||void 0===E||E.failScenario(y.GetFileMetadata,{ExceptionDetails:JSON.stringify({metadata:""+g,errorObject:""+_})}))}}},u.prototype.createFileMetadataProperty=function(g){var C,P,E;if(g){null===(C=this.logger)||void 0===C||C.startScenario(y.CreateFileMetadataProperty);try{var v={amsMetadata:JSON.stringify(g)};return null===(P=this.logger)||void 0===P||P.completeScenario(y.CreateFileMetadataProperty),v}catch(_){return void(null===(E=this.logger)||void 0===E||E.failScenario(y.CreateFileMetadataProperty,{ExceptionDetails:JSON.stringify({metadata:""+g,errorObject:""+_})}))}}},u.prototype.createBotAttachment=function(g){return!g||Object.keys(g),null},u.prototype.uploadFileToAMS=function(g){var C,P,E,v,h;return T(this,void 0,void 0,function(){var _,b,I,D,k,O,w;return p(this,function(V){switch(V.label){case 0:if(null===(C=this.logger)||void 0===C||C.startScenario(y.AMSUpload),!g.contentUrl||!g.name)return[3,12];_=void 0,V.label=1;case 1:return V.trys.push([1,3,,4]),[4,this.amsClient.fetchBlob(g.contentUrl)];case 2:return _=V.sent(),[3,4];case 3:return b=V.sent(),w={response:"AMSFetchBlobFailure",errorObject:""+b},null===(P=this.logger)||void 0===P||P.failScenario(y.AMSUpload,{ExceptionDetails:JSON.stringify(w)}),[2,void 0];case 4:I=new File([_],g.name,{type:g.contentType}),D=void 0,V.label=5;case 5:return V.trys.push([5,7,,8]),[4,this.amsClient.createObject(this.amsClient.chatToken.chatId,I)];case 6:return D=V.sent(),[3,8];case 7:return k=V.sent(),w={response:"AMSCreateObjectFailure",errorObject:""+k},null===(E=this.logger)||void 0===E||E.failScenario(y.AMSUpload,{ExceptionDetails:JSON.stringify(w)}),[2,void 0];case 8:return V.trys.push([8,10,,11]),[4,this.amsClient.uploadDocument(D.id,I)];case 9:return V.sent(),[3,11];case 10:return O=V.sent(),w={response:"AMSUploadDocumentFailure",errorObject:""+O},null===(v=this.logger)||void 0===v||v.failScenario(y.AMSUpload,{ExceptionDetails:JSON.stringify(w)}),[2,void 0];case 11:return null===(h=this.logger)||void 0===h||h.completeScenario(y.AMSUpload),[2,{fileId:D.id,metadata:{contentType:g.contentType,fileName:g.name}}];case 12:return[2]}})})},u.prototype.downloadFileFromAMS=function(g){var C,P,E,v;return T(this,void 0,void 0,function(){var h,_,b,I,D,k,w,O;return p(this,function(V){switch(V.label){case 0:if(null===(C=this.logger)||void 0===C||C.startScenario(y.AMSDownload),!(g.fileId&&g.metadata&&g.metadata.fileName))return[3,9];h={id:g.fileId,type:g.metadata.contentType},_=void 0,V.label=1;case 1:return V.trys.push([1,3,,4]),[4,this.amsClient.getViewStatus(h)];case 2:return _=V.sent(),[3,4];case 3:return b=V.sent(),w={response:"AMSGetViewStatusFailure",errorObject:""+b},null===(P=this.logger)||void 0===P||P.failScenario(y.AMSDownload,{ExceptionDetails:JSON.stringify(w)}),[2,void 0];case 4:I=_.view_location,D=void 0,V.label=5;case 5:return V.trys.push([5,7,,8]),[4,this.amsClient.getView(h,I)];case 6:return D=V.sent(),[3,8];case 7:return k=V.sent(),w={response:"AMSGetViewFailure",errorObject:""+k},null===(E=this.logger)||void 0===E||E.failScenario(y.AMSDownload,{ExceptionDetails:JSON.stringify(w)}),[2,void 0];case 8:return O=new File([D],g.metadata.fileName,{type:g.metadata.contentType}),null===(v=this.logger)||void 0===v||v.completeScenario(y.AMSDownload),[2,O];case 9:return[2]}})})},u}();L.default=x},7432:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(813),N=T(3709);L.default=function(x){return function(){return function(g){return function(C){return C&&C.channelData&&(C.channelData.tags||(C.channelData.tags=[]),C.channelData.tags.includes(p.channelIdTag)||C.channelData.tags.push(p.channelIdTag),C.channelData.tags.includes(p.customerMessageTag)||C.channelData.tags.push(p.customerMessageTag),C.channelData.metadata||(C.channelData.metadata={}),C.channelData.metadata.deliveryMode||(C.channelData.metadata.deliveryMode=N.DeliveryMode.Bridged),x.widgetId&&(C.channelData.metadata.widgetId=x.widgetId)),g(C)}}}}},5480:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=function(){return function(){return function(N){return function(y){var x=JSON.parse(JSON.stringify(y));if(x&&x.channelData&&x.channelData.tags){var u=x.channelData.tags;if("string"==typeof u)return N(y);if(u instanceof Array)x.channelData.tags=u.toString();else if("object"==typeof x.channelData.tags)try{x.channelData.tags=JSON.stringify(u)}catch(g){console.error(g)}}return N(x)}}}}},3968:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=function(){return function(){return function(N){return function(y){var x=JSON.parse(JSON.stringify(y));if(x&&x.channelData&&x.channelData.tags){var u=x.channelData.tags;if("string"==typeof u)try{x.channelData.tags=JSON.parse(u)}catch(g){x.channelData.tags=u.split(",")}}return N(x)}}}}},9451:(Y,L)=>{"use strict";var p;Object.defineProperty(L,"__esModule",{value:!0}),(p=L._BondDataType||(L._BondDataType={}))[p._BT_STOP=0]="_BT_STOP",p[p._BT_STOP_BASE=1]="_BT_STOP_BASE",p[p._BT_BOOL=2]="_BT_BOOL",p[p._BT_DOUBLE=8]="_BT_DOUBLE",p[p._BT_STRING=9]="_BT_STRING",p[p._BT_STRUCT=10]="_BT_STRUCT",p[p._BT_LIST=11]="_BT_LIST",p[p._BT_MAP=13]="_BT_MAP",p[p._BT_INT32=16]="_BT_INT32",p[p._BT_INT64=17]="_BT_INT64"},1464:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(6649),N=T(5644),y=T(514);L._Utf8_GetBytes=function(h){for(var _=[],b=0;b<h.length;++b){var w=h.charCodeAt(b);w<128?_.push(w):w<2048?_.push(192|w>>6,128|63&w):w<55296||w>=57344?_.push(224|w>>12,128|w>>6&63,128|63&w):(w=65536+((1023&w)<<10|1023&h.charCodeAt(++b)),_.push(240|w>>18,128|w>>12&63,128|w>>6&63,128|63&w))}return _},L._Base64_GetString=function(h){for(var _="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b=[],w=h.length%3,D=0,k=h.length-w;D<k;D+=3)b.push([_.charAt((B=O=(h[D]<<16)+(h[D+1]<<8)+h[D+2])>>18&63),_.charAt(B>>12&63),_.charAt(B>>6&63),_.charAt(63&B)].join(""));var B;switch(w){case 1:var O;b.push(_.charAt((O=h[h.length-1])>>2)),b.push(_.charAt(O<<4&63)),b.push("==");break;case 2:var V=(h[h.length-2]<<8)+h[h.length-1];b.push(_.charAt(V>>10)),b.push(_.charAt(V>>4&63)),b.push(_.charAt(V<<2&63)),b.push("=")}return b.join("")},L._Varint_GetBytes=function(h){for(var _=[];4294967168&h;)_.push(127&h|128),h>>>=7;return _.push(127&h),_},L._Varint64_GetBytes=function(h){for(var _=h.low,b=h.high,w=[];b||4294967168&_;)w.push(127&_|128),_=(127&b)<<25|_>>>7,b>>>=7;return w.push(127&_),w},L._Double_GetBytes=function(h){if(y.BrowserChecker._IsDataViewSupport()){var _=new DataView(new ArrayBuffer(8));_.setFloat64(0,h,!0);for(var b=[],w=0;w<8;++w)b.push(_.getUint8(w));return b}return N.FloatUtils._ConvertNumberToArray(h,!0)},L._Zigzag_EncodeZigzag32=function(h){return(h=p.Number._ToInt32(h))<<1^h>>31},L._Zigzag_EncodeZigzag64=function(h){var _=h.low,b=h.high,w=b<<1|_>>>31,I=_<<1;2147483648&b&&(w=~w,I=~I);var D=new p.UInt64("0");return D.low=I,D.high=w,D}},5644:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p._ConvertNumberToArray=function(N,y){if(!N)return y?this._doubleZero:this._floatZero;var u=y?52:23,g=(1<<(y?11:8)-1)-1,C=1-g,P=g,E=N<0?1:0;N=Math.abs(N);for(var v=Math.floor(N),h=N-v,_=2*(g+2)+u,b=new Array(_),w=0;w<_;)b[w++]=0;for(w=g+2;w&&v;)b[--w]=v%2,v=Math.floor(v/2);for(w=g+1;w<_-1&&h>0;)(h*=2)>=1?(b[++w]=1,--h):b[++w]=0;for(var I=0;I<_&&!b[I];)I++;var D=g+1-I,k=I+u;if(b[k+1]){for(w=k;w>I&&(b[w]=1-b[w],!b);--w);w===I&&++D}if(D>P||v)return E?y?this._doubleNegInifinity:this._floatNegInifinity:y?this._doubleInifinity:this._floatInifinity;if(D<C)return y?this._doubleZero:this._floatZero;if(y){var O=0;for(w=0;w<20;++w)O=O<<1|b[++I];for(var V=0;w<52;++w)V=V<<1|b[++I];return[255&V,V>>8&255,V>>16&255,V>>>24,255&(O=E<<31|2147483647&(O|=D+g<<20)),O>>8&255,O>>16&255,O>>>24]}var U=0;for(w=0;w<23;++w)U=U<<1|b[++I];return[255&(U=E<<31|2147483647&(U|=D+g<<23)),U>>8&255,U>>16&255,U>>>24]},p._floatZero=[0,0,0,0],p._doubleZero=[0,0,0,0,0,0,0,0],p._floatInifinity=[0,0,128,127],p._floatNegInifinity=[0,0,128,255],p._doubleInifinity=[0,0,0,0,0,0,240,127],p._doubleNegInifinity=[0,0,0,0,0,0,240,255],p}();L.FloatUtils=T},67:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(6649),N=function(){function y(){this._buffer=[]}return y.prototype._WriteByte=function(x){this._buffer.push(p.Number._ToByte(x))},y.prototype._Write=function(x,u,g){for(;g--;)this._WriteByte(x[u++])},y.prototype._GetBuffer=function(){return this._buffer},y}();L.MemoryStream=N},4356:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(9451);L._BondDataType=p._BondDataType;var N=T(1464);L._Encoding=N;var y=T(67);L.IO=y;var x=T(6649);L.Int64=x.Int64,L.UInt64=x.UInt64,L.Number=x.Number;var u=function(){function g(C){this._stream=C}return g.prototype._WriteBlob=function(C){this._stream._Write(C,0,C.length)},g.prototype._WriteBool=function(C){this._stream._WriteByte(C?1:0)},g.prototype._WriteContainerBegin=function(C,P){this._WriteUInt8(P),this._WriteUInt32(C)},g.prototype._WriteMapContainerBegin=function(C,P,E){this._WriteUInt8(P),this._WriteUInt8(E),this._WriteUInt32(C)},g.prototype._WriteDouble=function(C){var P=N._Double_GetBytes(C);this._stream._Write(P,0,P.length)},g.prototype._WriteFieldBegin=function(C,P,E){P<=5?this._stream._WriteByte(C|P<<5):P<=255?(this._stream._WriteByte(192|C),this._stream._WriteByte(P)):(this._stream._WriteByte(224|C),this._stream._WriteByte(P),this._stream._WriteByte(P>>8))},g.prototype._WriteInt32=function(C){C=N._Zigzag_EncodeZigzag32(C),this._WriteUInt32(C)},g.prototype._WriteInt64=function(C){this._WriteUInt64(N._Zigzag_EncodeZigzag64(C))},g.prototype._WriteString=function(C){if(""===C)this._WriteUInt32(0);else{var P=N._Utf8_GetBytes(C);this._WriteUInt32(P.length),this._stream._Write(P,0,P.length)}},g.prototype._WriteStructEnd=function(C){this._WriteUInt8(C?p._BondDataType._BT_STOP_BASE:p._BondDataType._BT_STOP)},g.prototype._WriteUInt32=function(C){var P=N._Varint_GetBytes(x.Number._ToUInt32(C));this._stream._Write(P,0,P.length)},g.prototype._WriteUInt64=function(C){var P=N._Varint64_GetBytes(C);this._stream._Write(P,0,P.length)},g.prototype._WriteUInt8=function(C){this._stream._WriteByte(x.Number._ToUInt8(C))},g}();L.CompactBinaryProtocolWriter=u},6649:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function y(x){this.low=0,this.high=0,this.low=parseInt(x,10),this.low<0&&(this.high=-1)}return y.prototype._Equals=function(x){var u=new y(x);return this.low===u.low&&this.high===u.high},y}();L.Int64=T;var p=function(){function y(x){this.low=0,this.high=0,this.low=parseInt(x,10)}return y.prototype._Equals=function(x){var u=new y(x);return this.low===u.low&&this.high===u.high},y}();L.UInt64=p;var N=function(){function y(){}return y._ToByte=function(x){return this._ToUInt8(x)},y._ToUInt8=function(x){return 255&x},y._ToInt32=function(x){return 2147483647&x|2147483648&x},y._ToUInt32=function(x){return 4294967295&x},y}();L.Number=N},514:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p._IsDataViewSupport=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},p}();L.BrowserChecker=T},4501:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(N){this.clockSkewRefreshDurationInMins=N,this._reset()}return p.prototype.allowRequestSending=function(){return this._isFirstRequest&&!this._clockSkewSet?(this._isFirstRequest=!1,this._allowRequestSending=!1,!0):this._allowRequestSending},p.prototype.shouldAddClockSkewHeaders=function(){return this._shouldAddClockSkewHeaders},p.prototype.getClockSkewHeaderValue=function(){return this._clockSkewHeaderValue},p.prototype.setClockSkew=function(N){this._clockSkewSet||(N?this._clockSkewHeaderValue=N:this._shouldAddClockSkewHeaders=!1,this._clockSkewSet=!0,this._allowRequestSending=!0)},p.prototype._reset=function(){var N=this;this._isFirstRequest=!0,this._clockSkewSet=!1,this._allowRequestSending=!0,this._shouldAddClockSkewHeaders=!0,this._clockSkewHeaderValue="use-collector-delta",this.clockSkewRefreshDurationInMins>0&&setTimeout(function(){return N._reset()},6e4*this.clockSkewRefreshDurationInMins)},p}();L.default=T},7190:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=function(){function N(){this._killedTokenDictionary={}}return N.prototype.setKillSwitchTenants=function(y,x){if(y&&x)try{var u=y.split(",");if("this-request-only"===x)return u;for(var g=1e3*parseInt(x,10),C=0;C<u.length;++C)this._killedTokenDictionary[u[C]]=Date.now()+g}catch(P){return[]}return[]},N.prototype.isTenantKilled=function(y){return void 0!==this._killedTokenDictionary[y]&&this._killedTokenDictionary[y]>Date.now()||(delete this._killedTokenDictionary[y],!1)},N}();L.default=p},2551:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.addNotificationListener=function(N){this.listeners.push(N)},p.removeNotificationListener=function(N){for(var y=this.listeners.indexOf(N);y>-1;)this.listeners.splice(y,1),y=this.listeners.indexOf(N)},p.eventsSent=function(N){for(var y=this,x=function(C){u.listeners[C].eventsSent&&setTimeout(function(){return y.listeners[C].eventsSent(N)},0)},u=this,g=0;g<this.listeners.length;++g)x(g)},p.eventsDropped=function(N,y){for(var x=this,u=function(P){g.listeners[P].eventsDropped&&setTimeout(function(){return x.listeners[P].eventsDropped(N,y)},0)},g=this,C=0;C<this.listeners.length;++C)u(C)},p.eventsRetrying=function(N){for(var y=this,x=function(C){u.listeners[C].eventsRetrying&&setTimeout(function(){return y.listeners[C].eventsRetrying(N)},0)},u=this,g=0;g<this.listeners.length;++g)x(g)},p.eventsRejected=function(N,y){for(var x=this,u=function(P){g.listeners[P].eventsRejected&&setTimeout(function(){return x.listeners[P].eventsRejected(N,y)},0)},g=this,C=0;C<this.listeners.length;++C)u(C)},p.listeners=[],p}();L.default=T},2659:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(676),N=function(){function y(x,u){this._outboundQueue=x,this._maxNumberOfEvents=u,this._currentBatch={},this._currentNumEventsInBatch=0}return y.prototype.addEventToBatch=function(x){if(x.priority===p.AWTEventPriority.Immediate_sync){var u={};return u[x.apiKey]=[x],u}return this._currentNumEventsInBatch>=this._maxNumberOfEvents&&this.flushBatch(),void 0===this._currentBatch[x.apiKey]&&(this._currentBatch[x.apiKey]=[]),this._currentBatch[x.apiKey].push(x),this._currentNumEventsInBatch++,null},y.prototype.flushBatch=function(){this._currentNumEventsInBatch>0&&(this._outboundQueue.push(this._currentBatch),this._currentBatch={},this._currentNumEventsInBatch=0)},y.prototype.hasBatch=function(){return this._currentNumEventsInBatch>0},y}();L.default=N},7270:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var x=function(){function u(){}return u.shouldRetryForStatus=function(g){return!(g>=300&&g<500&&408!==g||501===g||505===g)},u.getMillisToBackoffForRetry=function(g){var C,v=Math.floor(1200*Math.random())+2400;return C=Math.pow(4,g)*v,Math.min(C,12e4)},u}();L.default=x},6064:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(4356),N=T(676),y=T(2551),x=T(5593),u=2936012,g=function(){function C(){}return C.getPayloadBlob=function(P,E){var h,v=!1,_=new p.IO.MemoryStream,b=new p.CompactBinaryProtocolWriter(_);for(var w in b._WriteFieldBegin(p._BondDataType._BT_MAP,3,null),b._WriteMapContainerBegin(E,p._BondDataType._BT_STRING,p._BondDataType._BT_LIST),P)if(v)h||(h={}),h[w]=P[w],delete P[w];else if(P.hasOwnProperty(w)){b._WriteString(w);var I=P[w];b._WriteContainerBegin(1,p._BondDataType._BT_STRUCT),b._WriteFieldBegin(p._BondDataType._BT_STRING,2,null),b._WriteString("act_default_source"),b._WriteFieldBegin(p._BondDataType._BT_STRING,5,null),b._WriteString(x.newGuid()),b._WriteFieldBegin(p._BondDataType._BT_INT64,6,null),b._WriteInt64(x.numberToBondInt64(Date.now())),b._WriteFieldBegin(p._BondDataType._BT_LIST,8,null);var D=_._GetBuffer().length+1;b._WriteContainerBegin(P[w].length,p._BondDataType._BT_STRUCT);for(var k=_._GetBuffer().length-D,O=0;O<I.length;++O){var V=_._GetBuffer().length;if(this.writeEvent(I[O],b),_._GetBuffer().length-V>u)y.default.eventsRejected([I[O]],N.AWTEventsRejectedReason.SizeLimitExceeded),I.splice(O--,1),_._GetBuffer().splice(V),this._addNewDataPackageSize(I.length,_,k,D);else if(_._GetBuffer().length>u){_._GetBuffer().splice(V),h||(h={}),P[w]=I.splice(0,O),h[w]=I,this._addNewDataPackageSize(P[w].length,_,k,D),v=!0;break}}b._WriteStructEnd(!1)}return b._WriteStructEnd(!1),{payloadBlob:_._GetBuffer(),remainingRequest:h}},C._addNewDataPackageSize=function(P,E,v,h){for(var _=p._Encoding._Varint_GetBytes(p.Number._ToUInt32(P)),b=0;b<v;++b){if(!(b<_.length)){E._GetBuffer().slice(h+b,v-b);break}E._GetBuffer()[h+b]=_[b]}},C.writeEvent=function(P,E){E._WriteFieldBegin(p._BondDataType._BT_STRING,1,null),E._WriteString(P.id),E._WriteFieldBegin(p._BondDataType._BT_INT64,3,null),E._WriteInt64(x.numberToBondInt64(P.timestamp)),E._WriteFieldBegin(p._BondDataType._BT_STRING,5,null),E._WriteString(P.type),E._WriteFieldBegin(p._BondDataType._BT_STRING,6,null),E._WriteString(P.name);var v={},h=0,_={},b=0,w={},I=0,D={},k=0,O={},V=0,B={},U=0,j={},W=0;for(var X in P.properties)if(P.properties.hasOwnProperty(X))if((K=P.properties[X]).cc>0)j[X]=K,W++;else if(K.pii>0)B[X]=K,U++;else switch(K.type){case N.AWTPropertyType.String:v[X]=K.value,h++;break;case N.AWTPropertyType.Int64:_[X]=K.value,b++;break;case N.AWTPropertyType.Double:w[X]=K.value,I++;break;case N.AWTPropertyType.Boolean:D[X]=K.value,k++;break;case N.AWTPropertyType.Date:O[X]=K.value,V++}if(h)for(var X in E._WriteFieldBegin(p._BondDataType._BT_MAP,13,null),E._WriteMapContainerBegin(h,p._BondDataType._BT_STRING,p._BondDataType._BT_STRING),v)if(v.hasOwnProperty(X)){var ge=v[X];E._WriteString(X),E._WriteString(ge.toString())}if(U)for(var X in E._WriteFieldBegin(p._BondDataType._BT_MAP,30,null),E._WriteMapContainerBegin(U,p._BondDataType._BT_STRING,p._BondDataType._BT_STRUCT),B)if(B.hasOwnProperty(X)){var K=B[X];E._WriteString(X),E._WriteFieldBegin(p._BondDataType._BT_INT32,1,null),E._WriteInt32(1),E._WriteFieldBegin(p._BondDataType._BT_INT32,2,null),E._WriteInt32(K.pii),E._WriteFieldBegin(p._BondDataType._BT_STRING,3,null),E._WriteString(K.value.toString()),E._WriteStructEnd(!1)}if(k)for(var X in E._WriteFieldBegin(p._BondDataType._BT_MAP,31,null),E._WriteMapContainerBegin(k,p._BondDataType._BT_STRING,p._BondDataType._BT_BOOL),D)D.hasOwnProperty(X)&&(ge=D[X],E._WriteString(X),E._WriteBool(ge));if(V)for(var X in E._WriteFieldBegin(p._BondDataType._BT_MAP,32,null),E._WriteMapContainerBegin(V,p._BondDataType._BT_STRING,p._BondDataType._BT_INT64),O)O.hasOwnProperty(X)&&(ge=O[X],E._WriteString(X),E._WriteInt64(x.numberToBondInt64(ge)));if(b)for(var X in E._WriteFieldBegin(p._BondDataType._BT_MAP,33,null),E._WriteMapContainerBegin(b,p._BondDataType._BT_STRING,p._BondDataType._BT_INT64),_)_.hasOwnProperty(X)&&(ge=_[X],E._WriteString(X),E._WriteInt64(x.numberToBondInt64(ge)));if(I)for(var X in E._WriteFieldBegin(p._BondDataType._BT_MAP,34,null),E._WriteMapContainerBegin(I,p._BondDataType._BT_STRING,p._BondDataType._BT_DOUBLE),w)w.hasOwnProperty(X)&&(ge=w[X],E._WriteString(X),E._WriteDouble(ge));if(W)for(var X in E._WriteFieldBegin(p._BondDataType._BT_MAP,36,null),E._WriteMapContainerBegin(W,p._BondDataType._BT_STRING,p._BondDataType._BT_STRUCT),j)j.hasOwnProperty(X)&&(K=j[X],E._WriteString(X),E._WriteFieldBegin(p._BondDataType._BT_INT32,1,null),E._WriteInt32(K.cc),E._WriteFieldBegin(p._BondDataType._BT_STRING,2,null),E._WriteString(K.value.toString()),E._WriteStructEnd(!1));E._WriteStructEnd(!1)},C.base64Encode=function(P){return p._Encoding._Base64_GetString(P)},C}();L.default=g},5816:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(5593),N=T(2551),y=T(676),u=function(){function g(){}return g.initialize=function(C){var P=this;this._sendStats=C,this._isInitalized=!0,N.default.addNotificationListener({eventsSent:function(E){P._addStat("records_sent_count",E.length,E[0].apiKey)},eventsDropped:function(E,v){switch(v){case y.AWTEventsDroppedReason.NonRetryableStatus:P._addStat("d_send_fail",E.length,E[0].apiKey),P._addStat("records_dropped_count",E.length,E[0].apiKey);break;case y.AWTEventsDroppedReason.MaxRetryLimit:P._addStat("d_retry_limit",E.length,E[0].apiKey),P._addStat("records_dropped_count",E.length,E[0].apiKey);break;case y.AWTEventsDroppedReason.QueueFull:P._addStat("d_queue_full",E.length,E[0].apiKey)}},eventsRejected:function(E,v){switch(v){case y.AWTEventsRejectedReason.InvalidEvent:P._addStat("r_inv",E.length,E[0].apiKey);break;case y.AWTEventsRejectedReason.KillSwitch:P._addStat("r_kl",E.length,E[0].apiKey);break;case y.AWTEventsRejectedReason.SizeLimitExceeded:P._addStat("r_size",E.length,E[0].apiKey)}P._addStat("r_count",E.length,E[0].apiKey)},eventsRetrying:null}),setTimeout(function(){return P.flush()},6e4)},g.teardown=function(){this._isInitalized&&(this.flush(),this._isInitalized=!1)},g.eventReceived=function(C){g._addStat("records_received_count",1,C)},g.flush=function(){var C=this;if(this._isInitalized){for(var P in this._stats)this._stats.hasOwnProperty(P)&&this._sendStats(this._stats[P],P);this._stats={},setTimeout(function(){return C.flush()},6e4)}},g._addStat=function(C,P,E){if(this._isInitalized&&E!==p.StatsApiKey){var v=p.getTenantId(E);this._stats[v]||(this._stats[v]={}),this._stats[v][C]=this._stats[v][C]?this._stats[v][C]+P:P}},g._isInitalized=!1,g._stats={},g}();L.default=u},676:(Y,L)=>{"use strict";var g;Object.defineProperty(L,"__esModule",{value:!0}),(g=L.AWTPropertyType||(L.AWTPropertyType={}))[g.Unspecified=0]="Unspecified",g[g.String=1]="String",g[g.Int64=2]="Int64",g[g.Double=3]="Double",g[g.Boolean=4]="Boolean",g[g.Date=5]="Date",function(g){g[g.NotSet=0]="NotSet",g[g.DistinguishedName=1]="DistinguishedName",g[g.GenericData=2]="GenericData",g[g.IPV4Address=3]="IPV4Address",g[g.IPv6Address=4]="IPv6Address",g[g.MailSubject=5]="MailSubject",g[g.PhoneNumber=6]="PhoneNumber",g[g.QueryString=7]="QueryString",g[g.SipAddress=8]="SipAddress",g[g.SmtpAddress=9]="SmtpAddress",g[g.Identity=10]="Identity",g[g.Uri=11]="Uri",g[g.Fqdn=12]="Fqdn",g[g.IPV4AddressLegacy=13]="IPV4AddressLegacy"}(L.AWTPiiKind||(L.AWTPiiKind={})),function(g){g[g.NotSet=0]="NotSet",g[g.GenericContent=1]="GenericContent"}(L.AWTCustomerContentKind||(L.AWTCustomerContentKind={})),function(g){g[g.Low=1]="Low",g[g.Normal=2]="Normal",g[g.High=3]="High",g[g.Immediate_sync=5]="Immediate_sync"}(L.AWTEventPriority||(L.AWTEventPriority={})),function(g){g[g.NonRetryableStatus=1]="NonRetryableStatus",g[g.QueueFull=3]="QueueFull",g[g.MaxRetryLimit=4]="MaxRetryLimit"}(L.AWTEventsDroppedReason||(L.AWTEventsDroppedReason={})),function(g){g[g.InvalidEvent=1]="InvalidEvent",g[g.SizeLimitExceeded=2]="SizeLimitExceeded",g[g.KillSwitch=3]="KillSwitch"}(L.AWTEventsRejectedReason||(L.AWTEventsRejectedReason={}))},5593:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(6649),N=T(676),y=/[xy]/g,g=null;L.EventNameAndTypeRegex=/^[a-zA-Z]([a-zA-Z0-9]|_){2,98}[a-zA-Z0-9]$/,L.EventNameDotRegex=/\./g,L.PropertyNameRegex=/^[a-zA-Z](([a-zA-Z0-9|_|\.]){0,98}[a-zA-Z0-9])?$/,L.StatsApiKey="a387cfcf60114a43a7699f9fbb49289e-9bceb9fe-1c06-460f-96c5-6a0b247358bc-7238";var C=g,P=g,E=g;function _(i){return"string"==typeof i}function b(i){return"number"==typeof i}function w(i){return"boolean"==typeof i}function I(i){return i instanceof Date}function D(i){return 1e4*(i+621355968e5)}function K(){return!("undefined"==typeof navigator||!navigator.product)&&"ReactNative"===navigator.product}function ge(){return"object"==typeof self&&"ServiceWorkerGlobalScope"===self.constructor.name}function R(i){return i<10?"0"+i:i.toString()}function d(i){return void 0===i||i===g||""===i}L.numberToBondInt64=function(i){var m=new p.Int64("0");return m.low=4294967295&i,m.high=Math.floor(i/4294967296),m},L.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(y,function(i){var m=16*Math.random()|0;return("x"===i?m:3&m|8).toString(16)})},L.isString=_,L.isNumber=b,L.isBoolean=w,L.isDate=I,L.msToTicks=D,L.getTenantId=function(i){var m=i.indexOf("-");return m>-1?i.substring(0,m):""},L.isBeaconsSupported=function(){return C===g&&(C="undefined"!=typeof navigator&&Boolean(navigator.sendBeacon)),C},L.isUint8ArrayAvailable=function(){return P===g&&(P="undefined"!=typeof Uint8Array&&!function(){if("undefined"!=typeof navigator&&navigator.userAgent){var i=navigator.userAgent.toLowerCase();if((i.indexOf("safari")>=0||i.indexOf("firefox")>=0)&&i.indexOf("chrome")<0)return!0}return!1}()&&!K()),P},L.isPriority=function(i){return!(!b(i)||!(i>=1&&i<=3||5===i))},L.sanitizeProperty=function(i,m){return!L.PropertyNameRegex.test(i)||d(m)||(d(m.value)&&(m={value:m,type:N.AWTPropertyType.Unspecified}),m.type=function(i,m){switch(m=function(i){return!!(b(i)&&i>=0&&i<=4)}(m)?m:N.AWTPropertyType.Unspecified){case N.AWTPropertyType.Unspecified:return function(i){switch(typeof i){case"string":return N.AWTPropertyType.String;case"boolean":return N.AWTPropertyType.Boolean;case"number":return N.AWTPropertyType.Double;case"object":return I(i)?N.AWTPropertyType.Date:g}return g}(i);case N.AWTPropertyType.String:return _(i)?m:g;case N.AWTPropertyType.Boolean:return w(i)?m:g;case N.AWTPropertyType.Date:return I(i)&&NaN!==i.getTime()?m:g;case N.AWTPropertyType.Int64:return b(i)&&i%1==0?m:g;case N.AWTPropertyType.Double:return b(i)?m:g}return g}(m.value,m.type),!m.type)||(I(m.value)&&(m.value=D(m.value.getTime())),m.pii>0&&m.cc>0)?g:m.pii?function(i){return!!(b(i)&&i>=0&&i<=13)}(m.pii)?m:g:m.cc?function(i){return!!(b(i)&&i>=0&&i<=1)}(m.cc)?m:g:m},L.getISOString=function(i){return i.getUTCFullYear()+"-"+R(i.getUTCMonth()+1)+"-"+R(i.getUTCDate())+"T"+R(i.getUTCHours())+":"+R(i.getUTCMinutes())+":"+R(i.getUTCSeconds())+"."+function(i){return i<10?"00"+i:i<100?"0"+i:i.toString()}(i.getUTCMilliseconds())+"Z"},L.useXDomainRequest=function(){if(E===g){var i=new XMLHttpRequest;E=void 0===i.withCredentials&&"undefined"!=typeof XDomainRequest}return E},L.useFetchRequest=function(){return K()||ge()},L.isReactNative=K,L.isServiceWorkerGlobalScope=ge},4094:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(5593),N="MicrosoftApplicationsTelemetryDeviceId",y="MicrosoftApplicationsTelemetryFirstLaunchTime",g_WIN=/(windows|win32)/i,g_WINRT=/ arm;/i,g_WINPHONE=/windows\sphone\s\d+\.\d+/i,g_OSX=/(macintosh|mac os x)/i,g_IOS=/(iPad|iPhone|iPod)(?=.*like Mac OS X)/i,g_LINUX=/(linux|joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)/i,g_ANDROID=/android/i,g_CROS=/CrOS/i,C={5.1:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1","10.0":"10"},P="([\\d,.]+)",v="Unknown",h="undefined",_=function(){function b(){}return b.addPropertyStorageOverride=function(w){return!!w&&(this._propertyStorage=w,!0)},b.autoCollect=function(w,I,D){if(this._semanticContext=w,this._disableCookies=I,this._autoCollect(),!D&&typeof navigator!==h&&(D=navigator.userAgent||""),this._autoCollectFromUserAgent(D),this._disableCookies&&!this._propertyStorage)return this._deleteCookie(N),void this._deleteCookie(y);(this._propertyStorage||this._areCookiesAvailable&&!this._disableCookies)&&this._autoCollectDeviceId()},b.checkAndSaveDeviceId=function(w){if(w){var I=this._getData(N),D=this._getData(y);I!==w&&(D=p.getISOString(new Date)),this._saveData(N,w),this._saveData(y,D),this._setFirstLaunchTime(D)}},b._autoCollectDeviceId=function(){var w=this._getData(N);w||(w=p.newGuid()),this._semanticContext.setDeviceId(w)},b._autoCollect=function(){typeof document!==h&&document.documentElement&&this._semanticContext.setAppLanguage(document.documentElement.lang),typeof navigator!==h&&this._semanticContext.setUserLanguage(navigator.userLanguage||navigator.language);var w=(new Date).getTimezoneOffset(),I=w%60,D=(w-I)/60,k="+";D>0&&(k="-"),D=Math.abs(D),I=Math.abs(I),this._semanticContext.setUserTimeZone(k+(D<10?"0"+D:D.toString())+":"+(I<10?"0"+I:I.toString()))},b._autoCollectFromUserAgent=function(w){if(w){var I=this._getBrowserName(w);this._semanticContext.setDeviceBrowserName(I),this._semanticContext.setDeviceBrowserVersion(this._getBrowserVersion(w,I));var D=this._getOsName(w);this._semanticContext.setDeviceOsName(D),this._semanticContext.setDeviceOsVersion(this._getOsVersion(w,D))}},b._getBrowserName=function(w){return this._userAgentContainsString("OPR/",w)?"Opera":this._userAgentContainsString("PhantomJS",w)?"PhantomJS":this._userAgentContainsString("Edge",w)||this._userAgentContainsString("Edg",w)?"Edge":this._userAgentContainsString("Electron",w)?"Electron":this._userAgentContainsString("Chrome",w)?"Chrome":this._userAgentContainsString("Trident",w)?"MSIE":this._userAgentContainsString("Firefox",w)?"Firefox":this._userAgentContainsString("Safari",w)?"Safari":this._userAgentContainsString("SkypeShell",w)?"SkypeShell":v},b._setFirstLaunchTime=function(w){if(!isNaN(w)){var I=new Date;I.setTime(parseInt(w,10)),w=p.getISOString(I)}this.firstLaunchTime=w},b._userAgentContainsString=function(w,I){return I.indexOf(w)>-1},b._getBrowserVersion=function(w,I){if("MSIE"===I)return this._getIeVersion(w);if("Edge"===I){var D=this._getOtherVersion(I,w);return D===v?this._getOtherVersion("Edg",w):D}return this._getOtherVersion(I,w)},b._getIeVersion=function(w){var I=w.match(new RegExp("MSIE "+P));if(I)return I[1];var D=w.match(new RegExp("rv:"+P));return D?D[1]:void 0},b._getOtherVersion=function(w,I){"Safari"===w&&(w="Version");var D=I.match(new RegExp(w+"/"+P));return D?D[1]:v},b._getOsName=function(w){return w.match(g_WINPHONE)?"Windows Phone":w.match(g_WINRT)?"Windows RT":w.match(g_IOS)?"iOS":w.match(g_ANDROID)?"Android":w.match(g_LINUX)?"Linux":w.match(g_OSX)?"Mac OS X":w.match(g_WIN)?"Windows":w.match(g_CROS)?"Chrome OS":v},b._getOsVersion=function(w,I){return"Windows"===I?this._getGenericOsVersion(w,"Windows NT"):"Android"===I?this._getGenericOsVersion(w,I):"Mac OS X"===I?this._getMacOsxVersion(w):v},b._getGenericOsVersion=function(w,I){var D=w.match(new RegExp(I+" "+P));return D?C[D[1]]?C[D[1]]:D[1]:v},b._getMacOsxVersion=function(w){var I=w.match(new RegExp("Mac OS X ([\\d,_,.]+)"));if(I){var D=I[1].replace(/_/g,".");if(D){var k=this._getDelimiter(D);return k?D.split(k)[0]:D}}return v},b._getDelimiter=function(w){return w.indexOf(".")>-1?".":w.indexOf("_")>-1?"_":null},b._saveData=function(w,I){if(this._propertyStorage)this._propertyStorage.setProperty(w,I);else if(this._areCookiesAvailable){var D=new Date;D.setTime(D.getTime()+31536e6);var k="expires="+D.toUTCString();document.cookie=w+"="+I+"; "+k}},b._getData=function(w){if(this._propertyStorage)return this._propertyStorage.getProperty(w)||"";if(this._areCookiesAvailable){w+="=";for(var I=document.cookie.split(";"),D=0;D<I.length;D++){for(var k=I[D],O=0;" "===k.charAt(O);)O++;if(0===(k=k.substring(O)).indexOf(w))return k.substring(w.length,k.length)}}return""},b._deleteCookie=function(w){this._areCookiesAvailable&&(document.cookie=w+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;")},b._disableCookies=!1,b._areCookiesAvailable=typeof document!==h&&typeof document.cookie!==h,b}();L.default=_},58:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(5593),N=T(676),y=function(){function x(u){this._event={name:"",properties:{}},u&&this.setName(u)}return x.prototype.setName=function(u){this._event.name=u},x.prototype.getName=function(){return this._event.name},x.prototype.setType=function(u){this._event.type=u},x.prototype.getType=function(){return this._event.type},x.prototype.setTimestamp=function(u){this._event.timestamp=u},x.prototype.getTimestamp=function(){return this._event.timestamp},x.prototype.setEventPriority=function(u){this._event.priority=u},x.prototype.getEventPriority=function(){return this._event.priority},x.prototype.setProperty=function(u,g,C){void 0===C&&(C=N.AWTPropertyType.Unspecified);var P={value:g,type:C,pii:N.AWTPiiKind.NotSet,cc:N.AWTCustomerContentKind.NotSet};null!==(P=p.sanitizeProperty(u,P))?this._event.properties[u]=P:delete this._event.properties[u]},x.prototype.setPropertyWithPii=function(u,g,C,P){void 0===P&&(P=N.AWTPropertyType.Unspecified);var E={value:g,type:P,pii:C,cc:N.AWTCustomerContentKind.NotSet};null!==(E=p.sanitizeProperty(u,E))?this._event.properties[u]=E:delete this._event.properties[u]},x.prototype.setPropertyWithCustomerContent=function(u,g,C,P){void 0===P&&(P=N.AWTPropertyType.Unspecified);var E={value:g,type:P,pii:N.AWTPiiKind.NotSet,cc:C};null!==(E=p.sanitizeProperty(u,E))?this._event.properties[u]=E:delete this._event.properties[u]},x.prototype.getPropertyMap=function(){return this._event.properties},x.prototype.getEvent=function(){return this._event},x}();L.default=y},9449:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(676),N=T(6064),y=T(7270),x=T(7190),u=T(4501),g=T(8779),C=T(5593),P=T(2551),E=T(4023),_="POST",b=function(){function w(I,D,k,O,V){var B=this;this._requestQueue=I,this._queueManager=k,this._httpInterface=O,this._urlString="?qsp=true&content-type=application%2Fbond-compact-binary&client-id=NO_AUTH&sdk-version="+g.FullVersionString,this._killSwitch=new x.default,this._paused=!1,this._useBeacons=!1,this._activeConnections=0,this._clockSkewManager=new u.default(V),C.isUint8ArrayAvailable()||(this._urlString+="&content-encoding=base64"),this._urlString=D+this._urlString,this._httpInterface||(this._useBeacons=!C.isReactNative(),this._httpInterface={sendPOST:function(U,j,W,X,K,ge){try{if(C.useFetchRequest())fetch(U,{body:j,method:_}).then(function(s){var l={};s.headers&&s.headers.forEach(function(a,f){l[f]=a}),K(s.status,l)}).catch(function(s){X(0,{})});else if(C.useXDomainRequest()){var R=new XDomainRequest;R.open(_,U),R.onload=function(){K(200,null)},R.onerror=function(){X(400,null)},R.ontimeout=function(){W(500,null)},R.send(j)}else{var r=new XMLHttpRequest;r.open(_,U,!ge),r.onload=function(){K(r.status,B._convertAllHeadersToMap(r.getAllResponseHeaders()))},r.onerror=function(){X(r.status,B._convertAllHeadersToMap(r.getAllResponseHeaders()))},r.ontimeout=function(){W(r.status,B._convertAllHeadersToMap(r.getAllResponseHeaders()))},r.send(j)}}catch(s){X(400,null)}}})}return w.prototype.hasIdleConnection=function(){return this._activeConnections<2},w.prototype.sendQueuedRequests=function(){for(;this.hasIdleConnection()&&!this._paused&&this._requestQueue.length>0&&this._clockSkewManager.allowRequestSending();)this._activeConnections++,this._sendRequest(this._requestQueue.shift(),0,!1);this.hasIdleConnection()&&E.default.scheduleTimer()},w.prototype.isCompletelyIdle=function(){return 0===this._activeConnections},w.prototype.teardown=function(){for(;this._requestQueue.length>0;)this._sendRequest(this._requestQueue.shift(),0,!0)},w.prototype.pause=function(){this._paused=!0},w.prototype.resume=function(){this._paused=!1,this.sendQueuedRequests()},w.prototype.removeQueuedRequests=function(){this._requestQueue.length=0},w.prototype.sendSynchronousRequest=function(I,D){this._paused&&(I[D][0].priority=p.AWTEventPriority.High),this._activeConnections++,this._sendRequest(I,0,!1,!0)},w.prototype._sendRequest=function(I,D,k,O){var V=this;void 0===O&&(O=!1);try{if(this._paused)return this._activeConnections--,void this._queueManager.addBackRequest(I);var B=0,U="";for(var j in I)I.hasOwnProperty(j)&&(this._killSwitch.isTenantKilled(j)?(P.default.eventsRejected(I[j],p.AWTEventsRejectedReason.KillSwitch),delete I[j]):(U.length>0&&(U+=","),U+=j,B++));if(B>0){var W=N.default.getPayloadBlob(I,B);W.remainingRequest&&this._requestQueue.push(W.remainingRequest);var X=this._urlString+"&x-apikey="+U+"&client-time-epoch-millis="+Date.now().toString();this._clockSkewManager.shouldAddClockSkewHeaders()&&(X=X+"&time-delta-to-apply-millis="+this._clockSkewManager.getClockSkewHeaderValue());var K;for(var j in K=C.isUint8ArrayAvailable()?new Uint8Array(W.payloadBlob):N.default.base64Encode(W.payloadBlob),I)if(I.hasOwnProperty(j))for(var ge=0;ge<I[j].length;++ge)I[j][ge].sendAttempt>0?I[j][ge].sendAttempt++:I[j][ge].sendAttempt=1;if(this._useBeacons&&k&&C.isBeaconsSupported()&&navigator.sendBeacon(X,K))return;this._httpInterface.sendPOST(X,K,function(R,r){V._retryRequestIfNeeded(R,r,I,B,U,D,k,O)},function(R,r){V._retryRequestIfNeeded(R,r,I,B,U,D,k,O)},function(R,r){V._retryRequestIfNeeded(R,r,I,B,U,D,k,O)},k||O)}else k||this._handleRequestFinished(!1,{},k,O)}catch(R){this._handleRequestFinished(!1,{},k,O)}},w.prototype._retryRequestIfNeeded=function(I,D,k,O,V,B,U,j){var W=this,X=!0;if(void 0!==I){if(D){var K=this._killSwitch.setKillSwitchTenants(D["kill-tokens"],D["kill-duration-seconds"]);this._clockSkewManager.setClockSkew(D["time-delta-millis"]);for(var ge=0;ge<K.length;++ge)P.default.eventsRejected(k[K[ge]],p.AWTEventsRejectedReason.KillSwitch),delete k[K[ge]],O--}else this._clockSkewManager.setClockSkew(null);if(200===I)return void this._handleRequestFinished(!0,k,U,j);(!y.default.shouldRetryForStatus(I)||O<=0)&&(X=!1)}if(X)if(j)this._activeConnections--,k[V][0].priority=p.AWTEventPriority.High,this._queueManager.addBackRequest(k);else if(B<1){for(var R in k)k.hasOwnProperty(R)&&P.default.eventsRetrying(k[R]);setTimeout(function(){return W._sendRequest(k,B+1,!1)},y.default.getMillisToBackoffForRetry(B))}else this._activeConnections--,E.default.backOffTransmission(),this._queueManager.addBackRequest(k);else this._handleRequestFinished(!1,k,U,j)},w.prototype._handleRequestFinished=function(I,D,k,O){for(var V in I&&E.default.clearBackOff(),D)D.hasOwnProperty(V)&&(I?P.default.eventsSent(D[V]):P.default.eventsDropped(D[V],p.AWTEventsDroppedReason.NonRetryableStatus));this._activeConnections--,!O&&!k&&this.sendQueuedRequests()},w.prototype._convertAllHeadersToMap=function(I){var D={};if(I)for(var k=I.split("\n"),O=0;O<k.length;++O){var V=k[O].split(": ");D[V[0]]=V[1]}return D},w}();L.default=b},7613:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(676),N=T(5640),y=T(4189),x=T(6208),u=T(4023),g=T(2551),C=T(4094),P=function(){function E(){}return E.initialize=function(v,h){if(void 0===h&&(h={}),!this._isInitialized)return this._isInitialized=!0,y.default.defaultTenantToken=v,this._overrideValuesFromConfig(h),this._config.disableCookiesUsage&&!this._config.propertyStorageOverride&&(y.default.sessionEnabled=!1),C.default.addPropertyStorageOverride(this._config.propertyStorageOverride),C.default.autoCollect(y.default.semanticContext,this._config.disableCookiesUsage,this._config.userAgent),u.default.initialize(this._config),y.default.loggingEnabled=!0,this._config.enableAutoUserSession&&(this.getLogger().logSession(N.AWTSessionState.Started),window.addEventListener("beforeunload",this.flushAndTeardown)),this.getLogger()},E.getSemanticContext=function(){return y.default.semanticContext},E.flush=function(v){this._isInitialized&&!this._isDestroyed&&u.default.flush(v)},E.flushAndTeardown=function(){this._isInitialized&&!this._isDestroyed&&(this._config.enableAutoUserSession&&this.getLogger().logSession(N.AWTSessionState.Ended),u.default.flushAndTeardown(),y.default.loggingEnabled=!1,this._isDestroyed=!0)},E.pauseTransmission=function(){this._isInitialized&&!this._isDestroyed&&u.default.pauseTransmission()},E.resumeTransmision=function(){this._isInitialized&&!this._isDestroyed&&u.default.resumeTransmision()},E.setTransmitProfile=function(v){this._isInitialized&&!this._isDestroyed&&u.default.setTransmitProfile(v)},E.loadTransmitProfiles=function(v){this._isInitialized&&!this._isDestroyed&&u.default.loadTransmitProfiles(v)},E.setContext=function(v,h,_){void 0===_&&(_=p.AWTPropertyType.Unspecified),y.default.logManagerContext.setProperty(v,h,_)},E.setContextWithPii=function(v,h,_,b){void 0===b&&(b=p.AWTPropertyType.Unspecified),y.default.logManagerContext.setPropertyWithPii(v,h,_,b)},E.setContextWithCustomerContent=function(v,h,_,b){void 0===b&&(b=p.AWTPropertyType.Unspecified),y.default.logManagerContext.setPropertyWithCustomerContent(v,h,_,b)},E.getLogger=function(v){var h=v;return(!h||h===y.default.defaultTenantToken)&&(h=""),this._loggers[h]||(this._loggers[h]=new x.default(h)),this._loggers[h]},E.addNotificationListener=function(v){g.default.addNotificationListener(v)},E.removeNotificationListener=function(v){g.default.removeNotificationListener(v)},E._overrideValuesFromConfig=function(v){v.collectorUri&&(this._config.collectorUri=v.collectorUri),v.cacheMemorySizeLimitInNumberOfEvents>0&&(this._config.cacheMemorySizeLimitInNumberOfEvents=v.cacheMemorySizeLimitInNumberOfEvents),v.httpXHROverride&&v.httpXHROverride.sendPOST&&(this._config.httpXHROverride=v.httpXHROverride),v.propertyStorageOverride&&v.propertyStorageOverride.getProperty&&v.propertyStorageOverride.setProperty&&(this._config.propertyStorageOverride=v.propertyStorageOverride),v.userAgent&&(this._config.userAgent=v.userAgent),v.disableCookiesUsage&&(this._config.disableCookiesUsage=v.disableCookiesUsage),v.canSendStatEvent&&(this._config.canSendStatEvent=v.canSendStatEvent),v.enableAutoUserSession&&"undefined"!=typeof window&&window.addEventListener&&(this._config.enableAutoUserSession=v.enableAutoUserSession),v.clockSkewRefreshDurationInMins>0&&(this._config.clockSkewRefreshDurationInMins=v.clockSkewRefreshDurationInMins)},E._loggers={},E._isInitialized=!1,E._isDestroyed=!1,E._config={collectorUri:"https://browser.pipe.aria.microsoft.com/Collector/3.0/",cacheMemorySizeLimitInNumberOfEvents:1e4,disableCookiesUsage:!1,canSendStatEvent:function(v){return!0},clockSkewRefreshDurationInMins:0},E}();L.default=P},4189:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(58),N=T(1009),y=function(){function x(){}return x.logManagerContext=new p.default,x.sessionEnabled=!0,x.loggingEnabled=!1,x.defaultTenantToken="",x.semanticContext=new N.default(!0,x.logManagerContext),x}();L.default=y},6208:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(676),N=T(5640),y=T(58),x=T(5593),u=T(5816),g=T(2551),C=T(4023),P=T(4189),E=T(8779),v=T(1009),h=T(4094),_=function(){function b(w){this._apiKey=w,this._contextProperties=new y.default,this._semanticContext=new v.default(!1,this._contextProperties),this._sessionStartTime=0,this._createInitId()}return b.prototype.setContext=function(w,I,D){void 0===D&&(D=p.AWTPropertyType.Unspecified),this._contextProperties.setProperty(w,I,D)},b.prototype.setContextWithPii=function(w,I,D,k){void 0===k&&(k=p.AWTPropertyType.Unspecified),this._contextProperties.setPropertyWithPii(w,I,D,k)},b.prototype.setContextWithCustomerContent=function(w,I,D,k){void 0===k&&(k=p.AWTPropertyType.Unspecified),this._contextProperties.setPropertyWithCustomerContent(w,I,D,k)},b.prototype.getSemanticContext=function(){return this._semanticContext},b.prototype.logEvent=function(w){if(P.default.loggingEnabled){this._apiKey||(this._apiKey=P.default.defaultTenantToken,this._createInitId());var I=!0;x.isString(w)?w={name:w}:w instanceof y.default&&(w=w.getEvent(),I=!1),u.default.eventReceived(this._apiKey),b._logEvent(b._getInternalEvent(w,this._apiKey,I),this._contextProperties)}},b.prototype.logSession=function(w,I){if(P.default.sessionEnabled){var D={name:"session",type:"session",properties:{}};if(b._addPropertiesToEvent(D,I),D.priority=p.AWTEventPriority.High,w===N.AWTSessionState.Started){if(this._sessionStartTime>0)return;this._sessionStartTime=(new Date).getTime(),this._sessionId=x.newGuid(),this.setContext("Session.Id",this._sessionId),D.properties["Session.State"]="Started"}else{if(w!==N.AWTSessionState.Ended)return;if(0===this._sessionStartTime)return;var k=Math.floor(((new Date).getTime()-this._sessionStartTime)/1e3);D.properties["Session.Id"]=this._sessionId,D.properties["Session.State"]="Ended",D.properties["Session.Duration"]=k.toString(),D.properties["Session.DurationBucket"]=b._getSessionDurationFromTime(k),this._sessionStartTime=0,this.setContext("Session.Id",null),this._sessionId=void 0}D.properties["Session.FirstLaunchTime"]=h.default.firstLaunchTime,this.logEvent(D)}},b.prototype.getSessionId=function(){return this._sessionId},b.prototype.logFailure=function(w,I,D,k,O){if(w&&I){var V={name:"failure",type:"failure",properties:{}};b._addPropertiesToEvent(V,O),V.properties["Failure.Signature"]=w,V.properties["Failure.Detail"]=I,D&&(V.properties["Failure.Category"]=D),k&&(V.properties["Failure.Id"]=k),V.priority=p.AWTEventPriority.High,this.logEvent(V)}},b.prototype.logPageView=function(w,I,D,k,O,V){if(w&&I){var B={name:"pageview",type:"pageview",properties:{}};b._addPropertiesToEvent(B,V),B.properties["PageView.Id"]=w,B.properties["PageView.Name"]=I,D&&(B.properties["PageView.Category"]=D),k&&(B.properties["PageView.Uri"]=k),O&&(B.properties["PageView.ReferrerUri"]=O),this.logEvent(B)}},b.prototype._createInitId=function(){!b._initIdMap[this._apiKey]&&this._apiKey&&(b._initIdMap[this._apiKey]=x.newGuid())},b._addPropertiesToEvent=function(w,I){if(I)for(var D in I instanceof y.default&&(I=I.getEvent()),I.name&&(w.name=I.name),I.priority&&(w.priority=I.priority),I.properties)I.properties.hasOwnProperty(D)&&(w.properties[D]=I.properties[D])},b._getSessionDurationFromTime=function(w){return w<0?"Undefined":w<=3?"UpTo3Sec":w<=10?"UpTo10Sec":w<=30?"UpTo30Sec":w<=60?"UpTo60Sec":w<=180?"UpTo3Min":w<=600?"UpTo10Min":w<=1800?"UpTo30Min":"Above30Min"},b._logEvent=function(w,I){w.name&&x.isString(w.name)?(w.name=w.name.toLowerCase(),w.name=w.name.replace(x.EventNameDotRegex,"_"),w.type=w.type&&x.isString(w.type)?w.type.toLowerCase():"custom",x.EventNameAndTypeRegex.test(w.name)&&x.EventNameAndTypeRegex.test(w.type)?((!x.isNumber(w.timestamp)||w.timestamp<0)&&(w.timestamp=(new Date).getTime()),w.properties||(w.properties={}),this._addContextIfAbsent(w,I.getPropertyMap()),this._addContextIfAbsent(w,P.default.logManagerContext.getPropertyMap()),this._setDefaultProperty(w,"EventInfo.InitId",this._getInitId(w.apiKey)),this._setDefaultProperty(w,"EventInfo.Sequence",this._getSequenceId(w.apiKey)),this._setDefaultProperty(w,"EventInfo.SdkVersion",E.FullVersionString),this._setDefaultProperty(w,"EventInfo.Name",w.name),this._setDefaultProperty(w,"EventInfo.Time",new Date(w.timestamp).toISOString()),x.isPriority(w.priority)||(w.priority=p.AWTEventPriority.Normal),this._sendEvent(w)):g.default.eventsRejected([w],p.AWTEventsRejectedReason.InvalidEvent)):g.default.eventsRejected([w],p.AWTEventsRejectedReason.InvalidEvent)},b._addContextIfAbsent=function(w,I){if(I)for(var D in I)I.hasOwnProperty(D)&&(w.properties[D]||(w.properties[D]=I[D]))},b._setDefaultProperty=function(w,I,D){w.properties[I]={value:D,pii:p.AWTPiiKind.NotSet,type:p.AWTPropertyType.String}},b._sendEvent=function(w){C.default.sendEvent(w)},b._getInternalEvent=function(w,I,D){if(w.properties=w.properties||{},D)for(var k in w.properties)w.properties.hasOwnProperty(k)&&(w.properties[k]=x.sanitizeProperty(k,w.properties[k]),null===w.properties[k]&&delete w.properties[k]);var O=w;return O.id=x.newGuid(),O.apiKey=I,O},b._getInitId=function(w){return b._initIdMap[w]},b._getSequenceId=function(w){return void 0===b._sequenceIdMap[w]&&(b._sequenceIdMap[w]=0),(++b._sequenceIdMap[w]).toString()},b._sequenceIdMap={},b._initIdMap={},b}();L.default=_},4220:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(676),N=T(9449),y=T(4023),x=T(2659),u=T(2551),g=T(5593),v=function(){function h(_,b,w,I){this._queueSizeLimit=b,this._isCurrentlyUploadingNow=!1,this._uploadNowQueue=[],this._shouldDropEventsOnPause=!1,this._paused=!1,this._queueSize=0,this._outboundQueue=[],this._inboundQueues={},this._inboundQueues[p.AWTEventPriority.High]=[],this._inboundQueues[p.AWTEventPriority.Normal]=[],this._inboundQueues[p.AWTEventPriority.Low]=[],this._addEmptyQueues(),this._batcher=new x.default(this._outboundQueue,500),this._httpManager=new N.default(this._outboundQueue,_,this,w,I)}return h.prototype.addEvent=function(_){g.isPriority(_.priority)||(_.priority=p.AWTEventPriority.Normal),_.priority===p.AWTEventPriority.Immediate_sync?this._httpManager.sendSynchronousRequest(this._batcher.addEventToBatch(_),_.apiKey):this._queueSize<this._queueSizeLimit||this._dropEventWithPriorityOrLess(_.priority)?this._addEventToProperQueue(_):u.default.eventsDropped([_],p.AWTEventsDroppedReason.QueueFull)},h.prototype.sendEventsForPriorityAndAbove=function(_){this._batchEvents(_),this._httpManager.sendQueuedRequests()},h.prototype.hasEvents=function(){return(this._inboundQueues[p.AWTEventPriority.High][0].length>0||this._inboundQueues[p.AWTEventPriority.Normal][0].length>0||this._inboundQueues[p.AWTEventPriority.Low][0].length>0||this._batcher.hasBatch())&&this._httpManager.hasIdleConnection()},h.prototype.addBackRequest=function(_){if(!this._paused||!this._shouldDropEventsOnPause){for(var b in _)if(_.hasOwnProperty(b))for(var w=0;w<_[b].length;++w)_[b][w].sendAttempt<6?this.addEvent(_[b][w]):u.default.eventsDropped([_[b][w]],p.AWTEventsDroppedReason.MaxRetryLimit);y.default.scheduleTimer()}},h.prototype.teardown=function(){this._paused||(this._batchEvents(p.AWTEventPriority.Low),this._httpManager.teardown())},h.prototype.uploadNow=function(_){var b=this;this._addEmptyQueues(),this._isCurrentlyUploadingNow?this._uploadNowQueue.push(_):(this._isCurrentlyUploadingNow=!0,setTimeout(function(){return b._uploadNow(_)},0))},h.prototype.pauseTransmission=function(){this._paused=!0,this._httpManager.pause(),this._shouldDropEventsOnPause&&(this._queueSize-=this._inboundQueues[p.AWTEventPriority.High][0].length+this._inboundQueues[p.AWTEventPriority.Normal][0].length+this._inboundQueues[p.AWTEventPriority.Low][0].length,this._inboundQueues[p.AWTEventPriority.High][0]=[],this._inboundQueues[p.AWTEventPriority.Normal][0]=[],this._inboundQueues[p.AWTEventPriority.Low][0]=[],this._httpManager.removeQueuedRequests())},h.prototype.resumeTransmission=function(){this._paused=!1,this._httpManager.resume()},h.prototype.shouldDropEventsOnPause=function(_){this._shouldDropEventsOnPause=_},h.prototype._removeFirstQueues=function(){this._inboundQueues[p.AWTEventPriority.High].shift(),this._inboundQueues[p.AWTEventPriority.Normal].shift(),this._inboundQueues[p.AWTEventPriority.Low].shift()},h.prototype._addEmptyQueues=function(){this._inboundQueues[p.AWTEventPriority.High].push([]),this._inboundQueues[p.AWTEventPriority.Normal].push([]),this._inboundQueues[p.AWTEventPriority.Low].push([])},h.prototype._addEventToProperQueue=function(_){(!this._paused||!this._shouldDropEventsOnPause)&&(this._queueSize++,this._inboundQueues[_.priority][this._inboundQueues[_.priority].length-1].push(_))},h.prototype._dropEventWithPriorityOrLess=function(_){for(var b=p.AWTEventPriority.Low;b<=_;){if(this._inboundQueues[b][this._inboundQueues[b].length-1].length>0)return u.default.eventsDropped([this._inboundQueues[b][this._inboundQueues[b].length-1].shift()],p.AWTEventsDroppedReason.QueueFull),!0;b++}return!1},h.prototype._batchEvents=function(_){for(var b=p.AWTEventPriority.High;b>=_;){for(;this._inboundQueues[b][0].length>0;){var w=this._inboundQueues[b][0].pop();this._queueSize--,this._batcher.addEventToBatch(w)}b--}this._batcher.flushBatch()},h.prototype._uploadNow=function(_){var b=this;this.hasEvents()&&this.sendEventsForPriorityAndAbove(p.AWTEventPriority.Low),this._checkOutboundQueueEmptyAndSent(function(){b._removeFirstQueues(),null!=_&&_(),b._uploadNowQueue.length>0?setTimeout(function(){return b._uploadNow(b._uploadNowQueue.shift())},0):(b._isCurrentlyUploadingNow=!1,b.hasEvents()&&y.default.scheduleTimer())})},h.prototype._checkOutboundQueueEmptyAndSent=function(_){var b=this;this._httpManager.isCompletelyIdle()?_():setTimeout(function(){return b._checkOutboundQueueEmptyAndSent(_)},250)},h}();L.default=v},1009:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(4094),N=T(676),y=T(5640),x="UserInfo.IdType",u=function(){function g(C,P){this._allowDeviceFields=C,this._properties=P}return g.prototype.setAppId=function(C){this._addContext("AppInfo.Id",C)},g.prototype.setAppVersion=function(C){this._addContext("AppInfo.Version",C)},g.prototype.setAppLanguage=function(C){this._addContext("AppInfo.Language",C)},g.prototype.setDeviceId=function(C){this._allowDeviceFields&&(p.default.checkAndSaveDeviceId(C),this._addContext("DeviceInfo.Id",C))},g.prototype.setDeviceOsName=function(C){this._allowDeviceFields&&this._addContext("DeviceInfo.OsName",C)},g.prototype.setDeviceOsVersion=function(C){this._allowDeviceFields&&this._addContext("DeviceInfo.OsVersion",C)},g.prototype.setDeviceBrowserName=function(C){this._allowDeviceFields&&this._addContext("DeviceInfo.BrowserName",C)},g.prototype.setDeviceBrowserVersion=function(C){this._allowDeviceFields&&this._addContext("DeviceInfo.BrowserVersion",C)},g.prototype.setDeviceMake=function(C){this._allowDeviceFields&&this._addContext("DeviceInfo.Make",C)},g.prototype.setDeviceModel=function(C){this._allowDeviceFields&&this._addContext("DeviceInfo.Model",C)},g.prototype.setUserId=function(C,P,E){if(!isNaN(E)&&null!==E&&E>=0&&E<=12)this._addContext(x,E.toString());else{var v=void 0;switch(P){case N.AWTPiiKind.SipAddress:v=y.AWTUserIdType.SipAddress;break;case N.AWTPiiKind.PhoneNumber:v=y.AWTUserIdType.PhoneNumber;break;case N.AWTPiiKind.SmtpAddress:v=y.AWTUserIdType.EmailAddress;break;default:v=y.AWTUserIdType.Unknown}this._addContext(x,v.toString())}if(isNaN(P)||null===P||P===N.AWTPiiKind.NotSet||P>13)switch(E){case y.AWTUserIdType.Skype:P=N.AWTPiiKind.Identity;break;case y.AWTUserIdType.EmailAddress:P=N.AWTPiiKind.SmtpAddress;break;case y.AWTUserIdType.PhoneNumber:P=N.AWTPiiKind.PhoneNumber;break;case y.AWTUserIdType.SipAddress:P=N.AWTPiiKind.SipAddress;break;default:P=N.AWTPiiKind.NotSet}this._addContextWithPii("UserInfo.Id",C,P)},g.prototype.setUserAdvertisingId=function(C){this._addContext("UserInfo.AdvertisingId",C)},g.prototype.setUserTimeZone=function(C){this._addContext("UserInfo.TimeZone",C)},g.prototype.setUserLanguage=function(C){this._addContext("UserInfo.Language",C)},g.prototype._addContext=function(C,P){"string"==typeof P&&this._properties.setProperty(C,P)},g.prototype._addContextWithPii=function(C,P,E){"string"==typeof P&&this._properties.setPropertyWithPii(C,P,E)},g}();L.default=u},2621:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(4023),N=function(){function y(){}return y.setEventsHandler=function(x){p.default.setEventsHandler(x)},y.getEventsHandler=function(){return p.default.getEventsHandler()},y.scheduleTimer=function(){p.default.scheduleTimer()},y}();L.default=N},4023:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(1842),N=T(676),y=T(4220),x=T(5816),u=T(58),g=T(7613),C=T(5593),v="awt_stats",h=function(){function _(){}return _.setEventsHandler=function(b){this._eventHandler=b},_.getEventsHandler=function(){return this._eventHandler},_.scheduleTimer=function(){var b=this,w=this._profiles[this._currentProfile][2];this._timeout<0&&w>=0&&!this._paused&&(this._eventHandler.hasEvents()?(0===w&&this._currentBackoffCount>0&&(w=1),this._timeout=setTimeout(function(){return b._batchAndSendEvents()},w*(1<<this._currentBackoffCount)*1e3)):this._timerCount=0)},_.initialize=function(b){var w=this;this._newEventsAllowed=!0,this._config=b,this._eventHandler=new y.default(b.collectorUri,b.cacheMemorySizeLimitInNumberOfEvents,b.httpXHROverride,b.clockSkewRefreshDurationInMins),this._initializeProfiles(),x.default.initialize(function(I,D){if(w._config.canSendStatEvent(v)){var k=new u.default(v);for(var O in k.setEventPriority(N.AWTEventPriority.High),k.setProperty("TenantId",D),I)I.hasOwnProperty(O)&&k.setProperty(O,I[O].toString());g.default.getLogger(C.StatsApiKey).logEvent(k)}})},_.setTransmitProfile=function(b){this._currentProfile!==b&&void 0!==this._profiles[b]&&(this.clearTimeout(),this._currentProfile=b,this.scheduleTimer())},_.loadTransmitProfiles=function(b){for(var w in this._resetTransmitProfiles(),b)if(b.hasOwnProperty(w)){if(3!==b[w].length)continue;for(var I=2;I>=0;--I)if(b[w][I]<0){for(var D=I;D>=0;--D)b[w][D]=-1;break}for(I=2;I>0;--I)b[w][I]>0&&b[w][I-1]>0&&(b[w][I-1]=Math.ceil(b[w][I-1]/b[w][I])*b[w][I]);this._profiles[w]=b[w]}},_.sendEvent=function(b){this._newEventsAllowed&&(this._currentBackoffCount>0&&b.priority===N.AWTEventPriority.Immediate_sync&&(b.priority=N.AWTEventPriority.High),this._eventHandler.addEvent(b),this.scheduleTimer())},_.flush=function(b){var w=(new Date).getTime();!this._paused&&this._lastUploadNowCall+3e4<w&&(this._lastUploadNowCall=w,this._timeout>-1&&(clearTimeout(this._timeout),this._timeout=-1),this._eventHandler.uploadNow(b))},_.pauseTransmission=function(){this._paused||(this.clearTimeout(),this._eventHandler.pauseTransmission(),this._paused=!0)},_.resumeTransmision=function(){this._paused&&(this._paused=!1,this._eventHandler.resumeTransmission(),this.scheduleTimer())},_.flushAndTeardown=function(){x.default.teardown(),this._newEventsAllowed=!1,this.clearTimeout(),this._eventHandler.teardown()},_.backOffTransmission=function(){this._currentBackoffCount<4&&(this._currentBackoffCount++,this.clearTimeout(),this.scheduleTimer())},_.clearBackOff=function(){this._currentBackoffCount>0&&(this._currentBackoffCount=0,this.clearTimeout(),this.scheduleTimer())},_._resetTransmitProfiles=function(){this.clearTimeout(),this._initializeProfiles(),this._currentProfile=p.AWT_REAL_TIME,this.scheduleTimer()},_.clearTimeout=function(){this._timeout>0&&(clearTimeout(this._timeout),this._timeout=-1,this._timerCount=0)},_._batchAndSendEvents=function(){var b=N.AWTEventPriority.High;this._timerCount++,this._timerCount*this._profiles[this._currentProfile][2]===this._profiles[this._currentProfile][0]?(b=N.AWTEventPriority.Low,this._timerCount=0):this._timerCount*this._profiles[this._currentProfile][2]===this._profiles[this._currentProfile][1]&&(b=N.AWTEventPriority.Normal),this._eventHandler.sendEventsForPriorityAndAbove(b),this._timeout=-1,this.scheduleTimer()},_._initializeProfiles=function(){this._profiles={},this._profiles[p.AWT_REAL_TIME]=[4,2,1],this._profiles[p.AWT_NEAR_REAL_TIME]=[12,6,3],this._profiles[p.AWT_BEST_EFFORT]=[36,18,9]},_._newEventsAllowed=!1,_._currentProfile=p.AWT_REAL_TIME,_._timeout=-1,_._currentBackoffCount=0,_._paused=!1,_._timerCount=0,_._lastUploadNowCall=0,_}();L.default=h},5234:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(676);L.AWTPropertyType=p.AWTPropertyType,L.AWTPiiKind=p.AWTPiiKind,L.AWTEventPriority=p.AWTEventPriority,L.AWTEventsDroppedReason=p.AWTEventsDroppedReason,L.AWTEventsRejectedReason=p.AWTEventsRejectedReason,L.AWTCustomerContentKind=p.AWTCustomerContentKind;var N=T(5640);L.AWTUserIdType=N.AWTUserIdType,L.AWTSessionState=N.AWTSessionState;var y=T(1842);L.AWT_BEST_EFFORT=y.AWT_BEST_EFFORT,L.AWT_NEAR_REAL_TIME=y.AWT_NEAR_REAL_TIME,L.AWT_REAL_TIME=y.AWT_REAL_TIME;var x=T(58);L.AWTEventProperties=x.default;var u=T(6208);L.AWTLogger=u.default;var g=T(7613);L.AWTLogManager=g.default;var C=T(2621);L.AWTTransmissionManager=C.default;var P=T(6064);L.AWTSerializer=P.default;var E=T(1009);L.AWTSemanticContext=E.default,L.AWT_COLLECTOR_URL_UNITED_STATES="https://us.pipe.aria.microsoft.com/Collector/3.0/",L.AWT_COLLECTOR_URL_GERMANY="https://de.pipe.aria.microsoft.com/Collector/3.0/",L.AWT_COLLECTOR_URL_JAPAN="https://jp.pipe.aria.microsoft.com/Collector/3.0/",L.AWT_COLLECTOR_URL_AUSTRALIA="https://au.pipe.aria.microsoft.com/Collector/3.0/",L.AWT_COLLECTOR_URL_EUROPE="https://eu.pipe.aria.microsoft.com/Collector/3.0/",L.AWT_COLLECTOR_URL_USGOV_DOD="https://pf.pipe.aria.microsoft.com/Collector/3.0",L.AWT_COLLECTOR_URL_USGOV_DOJ="https://tb.pipe.aria.microsoft.com/Collector/3.0"},1842:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.AWT_REAL_TIME="REAL_TIME",L.AWT_NEAR_REAL_TIME="NEAR_REAL_TIME",L.AWT_BEST_EFFORT="BEST_EFFORT"},5640:(Y,L)=>{"use strict";var N;Object.defineProperty(L,"__esModule",{value:!0}),(N=L.AWTUserIdType||(L.AWTUserIdType={}))[N.Unknown=0]="Unknown",N[N.MSACID=1]="MSACID",N[N.MSAPUID=2]="MSAPUID",N[N.ANID=3]="ANID",N[N.OrgIdCID=4]="OrgIdCID",N[N.OrgIdPUID=5]="OrgIdPUID",N[N.UserObjectId=6]="UserObjectId",N[N.Skype=7]="Skype",N[N.Yammer=8]="Yammer",N[N.EmailAddress=9]="EmailAddress",N[N.PhoneNumber=10]="PhoneNumber",N[N.SipAddress=11]="SipAddress",N[N.MUID=12]="MUID",function(N){N[N.Started=0]="Started",N[N.Ended=1]="Ended"}(L.AWTSessionState||(L.AWTSessionState={}))},8779:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Version="1.8.7",L.FullVersionString="AWT-Web-JS-"+L.Version},5436:(Y,L,T)=>{"use strict";L.Mg=void 0;T(3762),T(8290),T(9425);T(2900);T(6194);T(448),T(3372);var E=T(7626);L.Mg=E.default,T(4352)},2235:function(Y,L,T){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(h){for(var _,b=1,w=arguments.length;b<w;b++)for(var I in _=arguments[b])Object.prototype.hasOwnProperty.call(_,I)&&(h[I]=_[I]);return h}).apply(this,arguments)};Object.defineProperty(L,"__esModule",{value:!0});var N=T(4151),y=T(676),x=T(5234),u=T(7095),g=T(3037),C=T(4151),P=T(8098),E=(()=>((E||(E={})).ReactNative="ReactNative",E))(),v=function(){function h(){}return h.initialize=function(_){this._debug&&console.log("[AriaTelemetry][logger][initialize][custom]"),h._logger=x.AWTLogManager.initialize(_)},h.setDebug=function(_){h._debug=_},h.disable=function(){this._debug&&console.log("[AriaTelemetry][disable]"),h._disable=!0},h.setCDNPackages=function(_){h._CDNPackagesInfo=p(p({},h._CDNPackagesInfo),_)},h.info=function(_,b){var w;void 0===b&&(b=g.default.EVENTS);var I={name:g.default.EVENTS,properties:p(p(p(p(p({},h.populateBaseProperties()),h.fillWebPlatformData()),h.fillMobilePlatformData()),_),{LogLevel:u.default.INFO}),priority:y.AWTEventPriority.High};b==g.default.IC3CLIENT&&(I={name:g.default.IC3CLIENT,properties:p(p(p({},h.populateIC3ClientBaseProperties()),_),{LogLevel:u.default.INFO}),priority:y.AWTEventPriority.High}),b==g.default.OCSDK&&(I={name:g.default.OCSDK,properties:p(p(p({},h.populateOCSDKBaseProperties()),_),{LogLevel:u.default.INFO}),priority:y.AWTEventPriority.High}),b==g.default.ACSCLIENT&&(I={name:g.default.ACSCLIENT,properties:p(p(p({},h.populateACSClientBaseProperties()),_),{LogLevel:u.default.INFO}),priority:y.AWTEventPriority.High}),b==g.default.ACSADAPTER&&(I={name:g.default.ACSADAPTER,properties:p(p(p({},h.populateACSAdapterBaseProperties()),_),{LogLevel:u.default.INFO}),priority:y.AWTEventPriority.High}),b==g.default.CALLINGSDK&&(I={name:g.default.CALLINGSDK,properties:p(p(p({},h.populateCallingSDKBaseProperties()),_),{LogLevel:u.default.INFO}),priority:y.AWTEventPriority.High}),this._debug&&console.log("[AriaTelemetry][info] "+b),this._debug&&console.log(I),this._debug&&console.log(I.properties.Event),!h._disable&&(null===(w=h.logger)||void 0===w||w.logEvent(I))},h.debug=function(_,b){var w;void 0===b&&(b=g.default.EVENTS);var I={name:g.default.EVENTS,properties:p(p(p(p(p({},h.populateBaseProperties()),h.fillWebPlatformData()),h.fillMobilePlatformData()),_),{LogLevel:u.default.DEBUG}),priority:y.AWTEventPriority.High};b==g.default.IC3CLIENT&&(I={name:g.default.IC3CLIENT,properties:p(p(p({},h.populateIC3ClientBaseProperties()),_),{LogLevel:u.default.DEBUG}),priority:y.AWTEventPriority.High}),b==g.default.OCSDK&&(I={name:g.default.OCSDK,properties:p(p(p({},h.populateOCSDKBaseProperties()),_),{LogLevel:u.default.DEBUG}),priority:y.AWTEventPriority.High}),b==g.default.ACSCLIENT&&(I={name:g.default.ACSCLIENT,properties:p(p(p({},h.populateACSClientBaseProperties()),_),{LogLevel:u.default.DEBUG}),priority:y.AWTEventPriority.High}),b==g.default.ACSADAPTER&&(I={name:g.default.ACSADAPTER,properties:p(p(p({},h.populateACSAdapterBaseProperties()),_),{LogLevel:u.default.DEBUG}),priority:y.AWTEventPriority.High}),b==g.default.CALLINGSDK&&(I={name:g.default.CALLINGSDK,properties:p(p(p({},h.populateCallingSDKBaseProperties()),_),{LogLevel:u.default.DEBUG}),priority:y.AWTEventPriority.High}),this._debug&&console.log("[AriaTelemetry][debug] "+b),this._debug&&console.log(I),this._debug&&console.log(I.properties.Event),!h._disable&&(null===(w=h.logger)||void 0===w||w.logEvent(I))},h.warn=function(_,b){var w;void 0===b&&(b=g.default.EVENTS);var I={name:g.default.EVENTS,properties:p(p(p(p(p({},h.populateBaseProperties()),h.fillWebPlatformData()),h.fillMobilePlatformData()),_),{LogLevel:u.default.WARN}),priority:y.AWTEventPriority.High};b==g.default.IC3CLIENT&&(I={name:g.default.IC3CLIENT,properties:p(p(p({},h.populateIC3ClientBaseProperties()),_),{LogLevel:u.default.WARN}),priority:y.AWTEventPriority.High}),b==g.default.OCSDK&&(I={name:g.default.OCSDK,properties:p(p(p({},h.populateOCSDKBaseProperties()),_),{LogLevel:u.default.WARN}),priority:y.AWTEventPriority.High}),b==g.default.ACSCLIENT&&(I={name:g.default.ACSCLIENT,properties:p(p(p({},h.populateACSClientBaseProperties()),_),{LogLevel:u.default.WARN}),priority:y.AWTEventPriority.High}),b==g.default.ACSADAPTER&&(I={name:g.default.ACSADAPTER,properties:p(p(p({},h.populateACSAdapterBaseProperties()),_),{LogLevel:u.default.WARN}),priority:y.AWTEventPriority.High}),b==g.default.CALLINGSDK&&(I={name:g.default.CALLINGSDK,properties:p(p(p({},h.populateCallingSDKBaseProperties()),_),{LogLevel:u.default.WARN}),priority:y.AWTEventPriority.High}),this._debug&&console.log("[AriaTelemetry][warn] "+b),this._debug&&console.log(I),this._debug&&console.log(I.properties.Event),!h._disable&&(null===(w=h.logger)||void 0===w||w.logEvent(I))},h.error=function(_,b){var w;void 0===b&&(b=g.default.EVENTS);var I={name:g.default.EVENTS,properties:p(p(p(p(p({},h.populateBaseProperties()),h.fillWebPlatformData()),h.fillMobilePlatformData()),_),{LogLevel:u.default.ERROR}),priority:y.AWTEventPriority.High};b==g.default.IC3CLIENT&&(I={name:g.default.IC3CLIENT,properties:p(p(p({},h.populateIC3ClientBaseProperties()),_),{LogLevel:u.default.ERROR}),priority:y.AWTEventPriority.High}),b==g.default.OCSDK&&(I={name:g.default.OCSDK,properties:p(p(p({},h.populateOCSDKBaseProperties()),_),{LogLevel:u.default.ERROR}),priority:y.AWTEventPriority.High}),b==g.default.ACSCLIENT&&(I={name:g.default.ACSCLIENT,properties:p(p(p({},h.populateACSClientBaseProperties()),_),{LogLevel:u.default.ERROR}),priority:y.AWTEventPriority.High}),b==g.default.ACSADAPTER&&(I={name:g.default.ACSADAPTER,properties:p(p(p({},h.populateACSAdapterBaseProperties()),_),{LogLevel:u.default.ERROR}),priority:y.AWTEventPriority.High}),b==g.default.CALLINGSDK&&(I={name:g.default.CALLINGSDK,properties:p(p(p({},h.populateCallingSDKBaseProperties()),_),{LogLevel:u.default.ERROR}),priority:y.AWTEventPriority.High}),this._debug&&console.log("[AriaTelemetry][error] "+b),this._debug&&console.log(I),this._debug&&console.log(I.properties.Event),!h._disable&&(null===(w=h.logger)||void 0===w||w.logEvent(I))},h.log=function(_,b){var w;void 0===b&&(b=g.default.EVENTS);var I={name:g.default.EVENTS,properties:p(p(p(p(p({},h.populateBaseProperties()),h.fillWebPlatformData()),h.fillMobilePlatformData()),_),{LogLevel:u.default.LOG}),priority:y.AWTEventPriority.High};b==g.default.IC3CLIENT&&(I={name:g.default.IC3CLIENT,properties:p(p(p({},h.populateIC3ClientBaseProperties()),_),{LogLevel:u.default.LOG}),priority:y.AWTEventPriority.High}),b==g.default.OCSDK&&(I={name:g.default.OCSDK,properties:p(p(p({},h.populateOCSDKBaseProperties()),_),{LogLevel:u.default.LOG}),priority:y.AWTEventPriority.High}),b==g.default.ACSCLIENT&&(I={name:g.default.ACSCLIENT,properties:p(p(p({},h.populateACSClientBaseProperties()),_),{LogLevel:u.default.LOG}),priority:y.AWTEventPriority.High}),b==g.default.ACSADAPTER&&(I={name:g.default.ACSADAPTER,properties:p(p(p({},h.populateACSAdapterBaseProperties()),_),{LogLevel:u.default.LOG}),priority:y.AWTEventPriority.High}),b==g.default.CALLINGSDK&&(I={name:g.default.CALLINGSDK,properties:p(p(p({},h.populateCallingSDKBaseProperties()),_),{LogLevel:u.default.LOG}),priority:y.AWTEventPriority.High}),this._debug&&console.log("[AriaTelemetry][log]"),this._debug&&console.log(I),this._debug&&console.log(I.properties.Event),!h._disable&&(null===(w=h.logger)||void 0===w||w.logEvent(I))},Object.defineProperty(h,"logger",{get:function(){return h._logger||(this._debug&&console.log("[AriaTelemetry][logger][initialize]"),h._logger=x.AWTLogManager.initialize(N.ariaTelemetryKey)),h._logger},enumerable:!1,configurable:!0}),h.populateBaseProperties=function(){var _={OCSDK:T(1528).i8,IC3Core:T(5233).i8,ACSChat:T(2861).i8,ACSCommon:T(6638).i8,AMSClient:T(5500).i8};return{ChatSDKRuntimeId:"",OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",CallId:"",Domain:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:"",ChatSDKVersion:T(8464).i8,NPMPackagesInfo:JSON.stringify(_),CDNPackagesInfo:JSON.stringify(h._CDNPackagesInfo),PlatformDetails:""}},h.fillMobilePlatformData=function(){var _={},b={};if(!P.isReactNative())return _;try{var I=T(Object(function(){var k=new Error("Cannot find module 'react-native'");throw k.code="MODULE_NOT_FOUND",k}())).Platform;b.Renderer=E.ReactNative,_.DeviceInfo_OsVersion=I.Version,b.DeviceInfo_OsVersion=I.Version,"android"===I.OS.toLowerCase()?(_.DeviceInfo_OsName="Android",b.DeviceInfo_OsName="Android"):"ios"===I.OS.toLowerCase()?(_.DeviceInfo_OsName="iOS",b.DeviceInfo_OsName="iOS"):(_.DeviceInfo_OsName=""+I.OS,b.DeviceInfo_OsName=""+I.OS),this._debug&&console.log("[AriaTelemetry][fillMobilePlatformData]["+_.DeviceInfo_OsName+"]")}catch(D){this._debug&&console.log("[AriaTelemetry][fillMobilePlatformData][Web]")}return _.PlatformDetails=JSON.stringify(b),_},h.fillWebPlatformData=function(){var _={};if(!P.isBrowser())return _;try{_.Domain=window.location.origin||"",this._debug&&console.log("[AriaTelemetry][fillWebPlatformData]")}catch(b){this._debug&&console.log("[AriaTelemetry][fillWebPlatformData][Error]")}return _},h.populateIC3ClientBaseProperties=function(){return{ChatSDKRuntimeId:"",OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",Event:"",Description:"",SubscriptionId:"",EndpointId:"",EndpointUrl:"",ErrorCode:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:"",IC3ClientVersion:C.ic3ClientVersion}},h.populateOCSDKBaseProperties=function(){return{ChatSDKRuntimeId:"",OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",TransactionId:"",Event:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:"",OCSDKVersion:T(1528).i8}},h.populateACSClientBaseProperties=function(){return{ChatSDKRuntimeId:"",OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",Event:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:"",ACSChatVersion:T(2861).i8}},h.populateACSAdapterBaseProperties=function(){return{ChatSDKRuntimeId:"",OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",Event:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:"",ACSAdapterVersion:C.webChatACSAdapterVersion}},h.populateCallingSDKBaseProperties=function(){return{ChatSDKRuntimeId:"",OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",CallId:"",Event:"",Description:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:""}},h._debug=!1,h._disable=!1,h}();L.default=v},7941:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.failEvent=L.completeEvent=L.startEvent=void 0,L.startEvent=function(T){return T+"Started"},L.completeEvent=function(T){return T+"Completed"},L.failEvent=function(T){return T+"Failed"}},7095:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={})).INFO="INFO",p.DEBUG="DEBUG",p.WARN="WARN",p.ERROR="ERROR",p.LOG="LOG",T;var p})();L.default=T},1247:function(Y,L,T){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(g){for(var C,P=1,E=arguments.length;P<E;P++)for(var v in C=arguments[P])Object.prototype.hasOwnProperty.call(C,v)&&(g[v]=C[v]);return g}).apply(this,arguments)};Object.defineProperty(L,"__esModule",{value:!0});var N=T(3037),y=T(8485),x=T(7941),u=function(){function g(C){this.omnichannelConfig=C,this.runtimeId="",this.telemetry=null,this.debug=!1,this.telemetryEvents=new Map,this.scenarioType=N.default.EVENTS}return g.prototype.setDebug=function(C){var P;this.debug=C,null===(P=this.telemetry)||void 0===P||P.setDebug(C)},g.prototype.setScenarioType=function(C){this.scenarioType=C},g.prototype.setRuntimeId=function(C){this.runtimeId=C},g.prototype.useTelemetry=function(C){this.debug&&console.log("[ScenarioMarker][useTelemetry]"),this.telemetry=C},g.prototype.startScenario=function(C,P){var E;if(void 0===P&&(P={}),this.debug&&console.log("[ScenarioMarker][startScenario]"),!this.telemetryEvents.has(C)){var v=new y.default;v.start(),this.telemetryEvents.set(C,v)}var h=p({ChatSDKRuntimeId:this.runtimeId,Event:x.startEvent(C),OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId},P);null===(E=this.telemetry)||void 0===E||E.info(h,this.scenarioType)},g.prototype.failScenario=function(C,P){var E;if(void 0===P&&(P={}),this.debug&&console.log("[ScenarioMarker][failScenario]"),this.telemetryEvents.has(C)){var v=this.telemetryEvents.get(C);this.telemetryEvents.delete(C);var h=p({ChatSDKRuntimeId:this.runtimeId,Event:x.failEvent(C),OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,ElapsedTimeInMilliseconds:v.stop()},P);null===(E=this.telemetry)||void 0===E||E.error(h,this.scenarioType)}else console.warn("'"+C+"' event has not started.")},g.prototype.completeScenario=function(C,P){var E;if(void 0===P&&(P={}),this.debug&&console.log("[ScenarioMarker][completeScenario]"),this.telemetryEvents.has(C)){var v=this.telemetryEvents.get(C);this.telemetryEvents.delete(C);var h=p({ChatSDKRuntimeId:this.runtimeId,Event:x.completeEvent(C),OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,ElapsedTimeInMilliseconds:v.stop()},P);null===(E=this.telemetry)||void 0===E||E.info(h,this.scenarioType)}else console.warn("'"+C+"' event has not started.")},g}();L.default=u},3037:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={})).EVENTS="occhatsdk_events",p.IC3CLIENT="occhatsdk_ic3clientevents",p.OCSDK="occhatsdk_ocsdkevents",p.ACSCLIENT="occhatsdk_acsclientevents",p.ACSADAPTER="occhatsdk_acsadapterevents",p.CALLINGSDK="occhatsdk_callingsdkevents",p.UNDEFINED="undefined",T;var p})();L.default=T},8485:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.prototype.start=function(){this.timeStart=(new Date).getTime()},p.prototype.stop=function(){return(new Date).getTime()-this.timeStart},p}();L.default=T},9600:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={})).ValidateOmnichannelConfig="ValidateOmnichannelConfig",p.ValidateSDKConfig="ValidateSDKConfig",p.InitializeChatSDK="InitializeChatSDK",p.StartChat="StartChat",p.EndChat="EndChat",p.GetLiveChatConfig="GetLiveChatConfig",p.GetAuthToken="GetAuthToken",p.GetPreChatSurvey="GetPreChatSurvey",p.GetChatToken="GetChatToken",p.GetConversationDetails="GetConversationDetails",p.GetCurrentLiveChatContext="GetCurrentLiveChatContext",p.GetMessages="GetMessages",p.SendMessages="SendMessages",p.SendTypingEvent="SendTypingEvent",p.OnAgentEndSession="OnAgentEndSession",p.OnNewMessage="OnNewMessage",p.OnTypingEvent="OnTypingEvent",p.UploadFileAttachment="UploadFileAttachment",p.DownloadFileAttachment="DownloadFileAttachment",p.EmailLiveChatTranscript="EmailLiveChatTranscript",p.GetLiveChatTranscript="GetLiveChatTranscript",p.CreateIC3Adapter="CreateChatAdapter",p.CreateACSAdapter="CreateACSAdapter",p.CreateDirectLine="CreateDirectLine",p.GetVoiceVideoCalling="GetVoiceVideoCalling",p.GetIC3Client="GetIC3Client",p.InitializeVoiceVideoCallingSDK="InitializeVoiceVideoCallingSDK",p.AcceptVoiceCall="AcceptVoiceCall",p.AcceptVideoCall="AcceptVideoCall",p.RejectCall="RejectCall",p.StopCall="StopCall",p.OnCallDisconnected="OnCallDisconnected",p.UpdateChatToken="UpdateChatToken",p.GetChatReconnectContext="GetChatReconnectContext",p.GetPostChatSurveyContext="GetPostChatSurveyContext",T;var p})();L.default=T},6345:function(Y,L){"use strict";var T=this&&this.__awaiter||function(x,u,g,C){return new(g||(g=Promise))(function(E,v){function h(w){try{b(C.next(w))}catch(I){v(I)}}function _(w){try{b(C.throw(w))}catch(I){v(I)}}function b(w){w.done?E(w.value):function(E){return E instanceof g?E:new g(function(v){v(E)})}(w.value).then(h,_)}b((C=C.apply(x,u||[])).next())})},p=this&&this.__generator||function(x,u){var C,P,E,v,g={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return v={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(v[Symbol.iterator]=function(){return this}),v;function h(b){return function(w){return function(b){if(C)throw new TypeError("Generator is already executing.");for(;g;)try{if(C=1,P&&(E=2&b[0]?P.return:b[0]?P.throw||((E=P.return)&&E.call(P),0):P.next)&&!(E=E.call(P,b[1])).done)return E;switch(P=0,E&&(b=[2&b[0],E.value]),b[0]){case 0:case 1:E=b;break;case 4:return g.label++,{value:b[1],done:!1};case 5:g.label++,P=b[1],b=[0];continue;case 7:b=g.ops.pop(),g.trys.pop();continue;default:if(!(E=(E=g.trys).length>0&&E[E.length-1])&&(6===b[0]||2===b[0])){g=0;continue}if(3===b[0]&&(!E||b[1]>E[0]&&b[1]<E[3])){g.label=b[1];break}if(6===b[0]&&g.label<E[1]){g.label=E[1],E=b;break}if(E&&g.label<E[2]){g.label=E[2],g.ops.push(b);break}E[2]&&g.ops.pop(),g.trys.pop();continue}b=u.call(x,g)}catch(w){b=[6,w],P=0}finally{C=E=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([b,w])}}};Object.defineProperty(L,"__esModule",{value:!0}),L.removeElementById=L.loadScript=void 0;var N=function(x,u,g){return void 0===u&&(u=function(){}),void 0===g&&(g=function(){}),T(void 0,void 0,void 0,function(){return p(this,function(C){return[2,new Promise(function(P,E){return T(void 0,void 0,void 0,function(){var _;return p(this,function(b){switch(b.label){case 0:return Array.from(document.getElementsByTagName("script")).filter(function(w){return w.src==x}).length?[4,u()]:[3,2];case 1:return b.sent(),[2,P()];case 2:return(_=document.createElement("script")).setAttribute("src",x),_.setAttribute("type","text/javascript"),document.head.appendChild(_),_.addEventListener("load",function(){return T(void 0,void 0,void 0,function(){return p(this,function(w){switch(w.label){case 0:return[4,u()];case 1:return w.sent(),P(),[2]}})})}),_.addEventListener("error",function(){return T(void 0,void 0,void 0,function(){return p(this,function(w){switch(w.label){case 0:return[4,g()];case 1:return w.sent(),E(),[2]}})})}),[2]}})})})]})})};L.loadScript=N;var y=function(x){var u;null===(u=document.getElementById(x))||void 0===u||u.remove()};L.removeElementById=y,L.default={loadScript:N,removeElementById:y}},6403:function(Y,L,T){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(I){for(var D,k=1,O=arguments.length;k<O;k++)for(var V in D=arguments[k])Object.prototype.hasOwnProperty.call(D,V)&&(I[V]=D[V]);return I}).apply(this,arguments)},N=this&&this.__awaiter||function(I,D,k,O){return new(k||(k=Promise))(function(B,U){function j(K){try{X(O.next(K))}catch(ge){U(ge)}}function W(K){try{X(O.throw(K))}catch(ge){U(ge)}}function X(K){K.done?B(K.value):function(B){return B instanceof k?B:new k(function(U){U(B)})}(K.value).then(j,W)}X((O=O.apply(I,D||[])).next())})},y=this&&this.__generator||function(I,D){var O,V,B,U,k={label:0,sent:function(){if(1&B[0])throw B[1];return B[1]},trys:[],ops:[]};return U={next:j(0),throw:j(1),return:j(2)},"function"==typeof Symbol&&(U[Symbol.iterator]=function(){return this}),U;function j(X){return function(K){return function(X){if(O)throw new TypeError("Generator is already executing.");for(;k;)try{if(O=1,V&&(B=2&X[0]?V.return:X[0]?V.throw||((B=V.return)&&B.call(V),0):V.next)&&!(B=B.call(V,X[1])).done)return B;switch(V=0,B&&(X=[2&X[0],B.value]),X[0]){case 0:case 1:B=X;break;case 4:return k.label++,{value:X[1],done:!1};case 5:k.label++,V=X[1],X=[0];continue;case 7:X=k.ops.pop(),k.trys.pop();continue;default:if(!(B=(B=k.trys).length>0&&B[B.length-1])&&(6===X[0]||2===X[0])){k=0;continue}if(3===X[0]&&(!B||X[1]>B[0]&&X[1]<B[3])){k.label=X[1];break}if(6===X[0]&&k.label<B[1]){k.label=B[1],B=X;break}if(B&&k.label<B[2]){k.label=B[2],k.ops.push(X);break}B[2]&&k.ops.pop(),k.trys.pop();continue}X=D.call(I,k)}catch(K){X=[6,K],V=0}finally{O=B=0}if(5&X[0])throw X[1];return{value:X[0]?X[1]:void 0,done:!0}}([X,K])}}},x=this&&this.__spreadArrays||function(){for(var I=0,D=0,k=arguments.length;D<k;D++)I+=arguments[D].length;var O=Array(I),V=0;for(D=0;D<k;D++)for(var B=arguments[D],U=0,j=B.length;U<j;U++,V++)O[V]=B[U];return O};Object.defineProperty(L,"__esModule",{value:!0}),L.createIC3Adapter=L.createACSAdapter=L.createDirectLine=void 0;var u=T(8953),g=T(7432),C=T(5480),P=T(3968),E=T(6345),v=T(9600),h=T(4674),_=function(I,D,k,O,V,B){return N(void 0,void 0,void 0,function(){var U,j,X,K;return y(this,function(ge){switch(ge.label){case 0:U=I.DirectLine?I.DirectLine.options:{},j=h.default.resolveChatAdapterUrl(D,k,O),null==V||V.setCDNPackages({DirectLine:j}),B.startScenario(v.default.CreateDirectLine),ge.label=1;case 1:return ge.trys.push([1,3,,4]),[4,E.loadScript(j)];case 2:return ge.sent(),[3,4];case 3:throw ge.sent(),B.failScenario(v.default.CreateDirectLine),new Error("Failed to load DirectLine");case 4:try{return X=window.DirectLine,K=new X.DirectLine(p({},U)),B.completeScenario(v.default.CreateDirectLine),[2,K]}catch(R){throw B.failScenario(v.default.CreateDirectLine),new Error("Failed to create DirectLine")}return[2]}})})};L.createDirectLine=_;var b=function(I,D,k,O,V,B,U,j,W,X,K){return N(void 0,void 0,void 0,function(){var ge,R,r,s,l,a,f,A,d;return y(this,function(i){switch(i.label){case 0:ge=I.ACSAdapter?I.ACSAdapter.options:{},R=h.default.resolveChatAdapterUrl(D,k,O),null==V||V.setCDNPackages({ACSAdapter:R}),r=[g.default({widgetId:U.widgetId}),C.default()],s=[P.default()],l=(null==ge?void 0:ge.egressMiddleware)?x(ge.egressMiddleware,r):x(r),a=(null==ge?void 0:ge.ingressMiddleware)?x(ge.ingressMiddleware,s):x(s),f=p(p({enableAdaptiveCards:!0,enableThreadMemberUpdateNotification:!0,enableLeaveThreadOnWindowClosed:!1},ge),{ingressMiddleware:a,egressMiddleware:l}),B.startScenario(v.default.CreateACSAdapter),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,E.loadScript(R)];case 2:return i.sent(),[3,4];case 3:throw i.sent(),B.failScenario(v.default.CreateACSAdapter),new Error("Failed to load ACSAdapter");case 4:try{return A=window.ChatAdapter,d=A.createACSAdapter(j.token,j.visitorId||"teamsvisitor",j.chatId,j.acsEndpoint,W,3e4,u.default.Customer,X,K,f),B.completeScenario(v.default.CreateACSAdapter),[2,d]}catch(m){throw B.failScenario(v.default.CreateACSAdapter),new Error("Failed to create ACSAdapter")}return[2]}})})};L.createACSAdapter=b;var w=function(I,D,k,O,V,B,U,j,W){return N(void 0,void 0,void 0,function(){var X,K,R,r;return y(this,function(s){switch(s.label){case 0:X=I.IC3Adapter?I.IC3Adapter.options:{},K=h.default.resolveChatAdapterUrl(D,k,O),null==V||V.setCDNPackages({IC3Adapter:K}),B.startScenario(v.default.CreateIC3Adapter),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,E.loadScript(K)];case 2:return s.sent(),[3,4];case 3:throw s.sent(),B.failScenario(v.default.CreateIC3Adapter),new Error("Failed to load IC3Adapter");case 4:R=p({chatToken:U,userDisplayName:"Customer",userId:U.visitorId||"teamsvisitor",sdkURL:h.default.resolveIC3ClientUrl(D),sdk:j},X);try{return(r=new window.Microsoft.BotFramework.WebChat.IC3Adapter(R)).logger=W,B.completeScenario(v.default.CreateIC3Adapter),[2,r]}catch(l){throw B.failScenario(v.default.CreateIC3Adapter),new Error("Failed to create IC3Adapter")}return[2]}})})};L.createIC3Adapter=w,L.default={createDirectLine:_,createACSAdapter:b,createIC3Adapter:w}},9340:function(Y,L,T){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(u){for(var g,C=1,P=arguments.length;C<P;C++)for(var E in g=arguments[C])Object.prototype.hasOwnProperty.call(g,E)&&(u[E]=g[E]);return u}).apply(this,arguments)};Object.defineProperty(L,"__esModule",{value:!0});var N=T(8191),y=T(3709);L.default=function(u,g){var C={};if(C.liveChatVersion=g.liveChatVersion||N.default.V1,g.debug&&console.log(u),g.liveChatVersion===N.default.V2){var v=u.content,h=u.metadata,_=u.sender,b=u.senderDisplayName,w=u.createdOn;if(C.id=u.id,C.messageid=void 0,C.clientmessageid=void 0,C.deliveryMode=void 0,C.properties={},C.content=v||"",C.properties.tags=h&&h.tags?h.tags:[],C.tags=h&&h.tags?h.tags.replace(/\"/g,"").split(",").filter(function(U){return U.length>0}):[],C.timestamp=w,C.messageType=y.MessageType.UserMessage,C.sender={id:_.communicationUserId,displayName:b,type:y.PersonType.Bot},h&&h.amsMetadata&&h.amsReferences||h.amsreferences)try{var I=JSON.parse(h.amsMetadata),D=JSON.parse(h.amsreferences||h.amsReferences),k=I[0],O=k.fileName,V=k.contentType;C.fileMetadata={},C.fileMetadata.fileSharingProtocolType=0,C.fileMetadata.id=D[0],C.fileMetadata.name=O,C.fileMetadata.size=0,C.fileMetadata.type=V,C.fileMetadata.url=""}catch(U){}}else C.id=u.clientmessageid,C=p({},u);return C}},838:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(2235);L.default=function(y){return void 0===y&&(y=!1),p.default.setDebug(y),p.default}},1775:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.getDirectLineCDNUrl=L.getACSAdapterCDNUrl=L.getIC3AdapterCDNUrl=L.getIC3ClientCDNUrl=void 0;var p=T(4151),N=function(g){return void 0===g&&(g=p.ic3ClientVersion),"https://comms.omnichannelengagementhub.com/release/"+g+"/Scripts/SDK/SDK.min.js"};L.getIC3ClientCDNUrl=N;var y=function(g){return void 0===g&&(g=p.webChatIC3AdapterVersion),"https://webchatic3.blob.core.windows.net/webchat-ic3adapter/"+g+"/botframework-webchat-adapter-ic3.production.min.js"};L.getIC3AdapterCDNUrl=y;var x=function(g){return void 0===g&&(g=p.webChatACSAdapterVersion),"https://unpkg.com/acs_webchat-chat-adapter@"+g+"/dist/chat-adapter.js"};L.getACSAdapterCDNUrl=x;var u=function(g){return void 0===g&&(g=p.webChatDirectLineVersion),"https://unpkg.com/botframework-directlinejs@"+g+"/dist/directline.js"};L.getDirectLineCDNUrl=u,L.default={getIC3ClientCDNUrl:N,getIC3AdapterCDNUrl:y,getACSAdapterCDNUrl:x,getDirectLineCDNUrl:u}},8290:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.defaultLocaleString=L.defaultLocaleId=L.getLocaleIdFromString=L.getLocaleStringFromId=void 0;var T={1025:"ar-sa",1026:"bg-bg",1027:"ca-es",1029:"cs-cz",1030:"da-dk",1031:"de-de",1032:"el-gr",1033:"en-us",3082:"es-es",1061:"et-ee",1069:"eu-es",1035:"fi-fi",1036:"fr-fr",1110:"gl-es",1037:"he-il",1081:"hi-in",1050:"hr-hr",1038:"hu-hu",1057:"id-id",1040:"it-it",1041:"ja-jp",1087:"kk-kz",1042:"ko-kr",1063:"lt-lt",1062:"lv-lv",1086:"ms-my",1044:"nb-no",1043:"nl-nl",1045:"pl-pl",1046:"pt-br",2070:"pt-pt",1048:"ro-ro",1049:"ru-ru",1051:"sk-sk",1060:"sl-si",3098:"sr-cyrl-cs",2074:"sr-latn-cs",1053:"sv-se",1054:"th-th",1055:"tr-tr",1058:"uk-ua",1066:"vi-vn",2052:"zh-cn",3076:"zh-hk",1028:"zh-tw"};L.getLocaleStringFromId=function(p){var N=Object.keys(T).find(function(y){return y===p});return N?T[N]:L.defaultLocaleString},L.getLocaleIdFromString=function(p){var N=Object.keys(T).find(function(y){return T[y]===p});return null!=N?N:L.defaultLocaleId},L.defaultLocaleId="1033",L.defaultLocaleString="en-us"},2811:function(Y,L,T){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(v){for(var h,_=1,b=arguments.length;_<b;_++)for(var w in h=arguments[_])Object.prototype.hasOwnProperty.call(h,w)&&(v[w]=h[w]);return v}).apply(this,arguments)};Object.defineProperty(L,"__esModule",{value:!0}),L.createCallingSDKLogger=L.createACSAdapterLogger=L.createACSClientLogger=L.createOCSDKLogger=L.createIC3ClientLogger=L.CallingSDKLogger=L.ACSAdapterLogger=L.ACSClientLogger=L.OCSDKLogger=L.IC3ClientLogger=void 0;var N=T(7095),y=T(3037),x=T(1247),u=function(){function v(h){this.omnichannelConfig=h,this.debug=!1,this.runtimeId="",this.requestId="",this.chatId="",this.telemetry=null,this.debug=!1}return v.prototype.setDebug=function(h){this.debug=h},v.prototype.setRuntimeId=function(h){this.runtimeId=h},v.prototype.setRequestId=function(h){this.requestId=h},v.prototype.setChatId=function(h){this.chatId=h},v.prototype.useTelemetry=function(h){this.debug&&console.log("[IC3ClientLogger][useTelemetry]"),this.telemetry=h},v.prototype.logClientSdkTelemetryEvent=function(h,_){var b,w,I,D;this.debug&&console.log("[IC3ClientLogger][logClientSdkTelemetryEvent]["+h+"]"),this.debug&&console.log(_);var k={ChatSDKRuntimeId:this.runtimeId,OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,RequestId:this.requestId,ChatId:this.chatId},O=p(p({},_),{ExceptionDetails:_.ExceptionDetails?JSON.stringify(_.ExceptionDetails):""});switch(h){case N.default.DEBUG:null===(b=this.telemetry)||void 0===b||b.debug(p(p({},k),O),y.default.IC3CLIENT);break;case N.default.WARN:null===(w=this.telemetry)||void 0===w||w.warn(p(p({},k),O),y.default.IC3CLIENT);break;case N.default.ERROR:null===(I=this.telemetry)||void 0===I||I.error(p(p({},k),O),y.default.IC3CLIENT);break;case N.default.INFO:default:null===(D=this.telemetry)||void 0===D||D.info(p(p({},k),O),y.default.IC3CLIENT)}},v}();L.IC3ClientLogger=u;var g=function(){function v(h){this.omnichannelConfig=h,this.debug=!1,this.runtimeId="",this.requestId="",this.chatId="",this.telemetry=null,this.debug=!1}return v.prototype.setDebug=function(h){this.debug=h},v.prototype.setRuntimeId=function(h){this.runtimeId=h},v.prototype.setRequestId=function(h){this.requestId=h},v.prototype.setChatId=function(h){this.chatId=h},v.prototype.useTelemetry=function(h){this.debug&&console.log("[OCSDKLogger][useTelemetry]"),this.telemetry=h},v.prototype.logClientSdkTelemetryEvent=function(h,_){var b,w,I,D;this.debug&&console.log("[OCSDKLogger][logClientSdkTelemetryEvent]["+h+"]"),this.debug&&console.log(_);var k={ChatSDKRuntimeId:this.runtimeId,OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,RequestId:this.requestId,ChatId:this.chatId},O=p(p({},_),{ExceptionDetails:_.ExceptionDetails?JSON.stringify(_.ExceptionDetails):""});switch(h){case N.default.DEBUG:null===(b=this.telemetry)||void 0===b||b.debug(p(p({},k),O),y.default.OCSDK);break;case N.default.WARN:null===(w=this.telemetry)||void 0===w||w.warn(p(p({},k),O),y.default.OCSDK);break;case N.default.ERROR:null===(I=this.telemetry)||void 0===I||I.error(p(p({},k),O),y.default.OCSDK);break;case N.default.INFO:default:null===(D=this.telemetry)||void 0===D||D.info(p(p({},k),O),y.default.OCSDK)}},v}();L.OCSDKLogger=g;var C=function(){function v(h){this.omnichannelConfig=h,this.debug=!1,this.runtimeId="",this.requestId="",this.chatId="",this.telemetry=null,this.scenarioMarker=null,this.debug=!1,this.scenarioMarker=new x.default(h),this.scenarioMarker.setScenarioType(y.default.ACSCLIENT)}return v.prototype.setDebug=function(h){var _;this.debug=h,null===(_=this.scenarioMarker)||void 0===_||_.setDebug(h)},v.prototype.setRuntimeId=function(h){var _;this.runtimeId=h,null===(_=this.scenarioMarker)||void 0===_||_.setRuntimeId(h)},v.prototype.setRequestId=function(h){this.requestId=h},v.prototype.setChatId=function(h){this.chatId=h},v.prototype.useTelemetry=function(h){var _;this.debug&&console.log("[ACSClientLogger][useTelemetry]"),this.telemetry=h,null===(_=this.scenarioMarker)||void 0===_||_.useTelemetry(this.telemetry)},v.prototype.logClientSdkTelemetryEvent=function(h,_){var b,w,I,D;this.debug&&console.log("[ACSClientLogger][logClientSdkTelemetryEvent]["+h+"]"),this.debug&&console.log(_);var k={ChatSDKRuntimeId:this.runtimeId,OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,RequestId:this.requestId,ChatId:this.chatId},O=p(p({},_),{ExceptionDetails:_.ExceptionDetails?JSON.stringify(_.ExceptionDetails):""});switch(h){case N.default.DEBUG:null===(b=this.telemetry)||void 0===b||b.debug(p(p({},k),O),y.default.ACSCLIENT);break;case N.default.WARN:null===(w=this.telemetry)||void 0===w||w.warn(p(p({},k),O),y.default.ACSCLIENT);break;case N.default.ERROR:null===(I=this.telemetry)||void 0===I||I.error(p(p({},k),O),y.default.ACSCLIENT);break;case N.default.INFO:default:null===(D=this.telemetry)||void 0===D||D.info(p(p({},k),O),y.default.ACSCLIENT)}},v.prototype.startScenario=function(h,_){var b;void 0===_&&(_={}),null===(b=this.scenarioMarker)||void 0===b||b.startScenario(h,p(p({},{RequestId:this.requestId,ChatId:this.chatId}),_))},v.prototype.failScenario=function(h,_){var b;void 0===_&&(_={}),null===(b=this.scenarioMarker)||void 0===b||b.failScenario(h,p(p({},{RequestId:this.requestId,ChatId:this.chatId}),_))},v.prototype.completeScenario=function(h,_){var b;void 0===_&&(_={}),null===(b=this.scenarioMarker)||void 0===b||b.completeScenario(h,p(p({},{RequestId:this.requestId,ChatId:this.chatId}),_))},v}();L.ACSClientLogger=C;var P=function(){function v(h){this.omnichannelConfig=h,this.debug=!1,this.runtimeId="",this.requestId="",this.chatId="",this.telemetry=null,this.scenarioMarker=null,this.debug=!1,this.scenarioMarker=new x.default(h),this.scenarioMarker.setScenarioType(y.default.ACSADAPTER)}return v.prototype.setDebug=function(h){var _;this.debug=h,null===(_=this.scenarioMarker)||void 0===_||_.setDebug(h)},v.prototype.setRuntimeId=function(h){var _;this.runtimeId=h,null===(_=this.scenarioMarker)||void 0===_||_.setRuntimeId(this.runtimeId)},v.prototype.setRequestId=function(h){this.requestId=h},v.prototype.setChatId=function(h){this.chatId=h},v.prototype.useTelemetry=function(h){var _;this.debug&&console.log("[ACSAdapterLogger][useTelemetry]"),this.telemetry=h,null===(_=this.scenarioMarker)||void 0===_||_.useTelemetry(this.telemetry)},v.prototype.logEvent=function(h,_){var b,w,I,D;this.debug&&console.log("[ACSAdapterLogger][logClientSdkTelemetryEvent]["+h+"]"),this.debug&&console.log(_);var k={ChatSDKRuntimeId:this.runtimeId,OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,RequestId:this.requestId,ChatId:this.chatId},O=p(p({},_),{ExceptionDetails:_.ExceptionDetails?JSON.stringify(_.ExceptionDetails):""});switch(h){case N.default.DEBUG:null===(b=this.telemetry)||void 0===b||b.debug(p(p({},k),O),y.default.ACSADAPTER);break;case N.default.WARN:null===(w=this.telemetry)||void 0===w||w.warn(p(p({},k),O),y.default.ACSADAPTER);break;case N.default.ERROR:null===(I=this.telemetry)||void 0===I||I.error(p(p({},k),O),y.default.ACSADAPTER);break;case N.default.INFO:default:null===(D=this.telemetry)||void 0===D||D.info(p(p({},k),O),y.default.ACSADAPTER)}},v.prototype.startScenario=function(h,_){var b;void 0===_&&(_={}),null===(b=this.scenarioMarker)||void 0===b||b.startScenario(h,p(p({},{RequestId:this.requestId,ChatId:this.chatId}),_))},v.prototype.failScenario=function(h,_){var b;void 0===_&&(_={}),null===(b=this.scenarioMarker)||void 0===b||b.failScenario(h,p(p({},{RequestId:this.requestId,ChatId:this.chatId}),_))},v.prototype.completeScenario=function(h,_){var b;void 0===_&&(_={}),null===(b=this.scenarioMarker)||void 0===b||b.completeScenario(h,p(p({},{RequestId:this.requestId,ChatId:this.chatId}),_))},v}();L.ACSAdapterLogger=P;var E=function(){function v(h){this.omnichannelConfig=h,this.debug=!1,this.runtimeId="",this.requestId="",this.chatId="",this.telemetry=null,this.debug=!1}return v.prototype.setDebug=function(h){this.debug=h},v.prototype.setRuntimeId=function(h){this.runtimeId=h},v.prototype.setRequestId=function(h){this.requestId=h},v.prototype.setChatId=function(h){this.chatId=h},v.prototype.useTelemetry=function(h){this.debug&&console.log("[CallingSDKLogger][useTelemetry]"),this.telemetry=h},v.prototype.logCallingSdkTelemetryEvent=function(h,_){var b,w,I,D;this.debug&&console.log("[CallingSDKLogger][logClientSdkTelemetryEvent]["+h+"]"),this.debug&&console.log(_);var k={ChatSDKRuntimeId:this.runtimeId,OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,RequestId:this.requestId,ChatId:this.chatId},O=p(p({},_),{ExceptionDetails:_.ExceptionDetails?JSON.stringify(_.ExceptionDetails):""});switch(h){case N.default.DEBUG:null===(b=this.telemetry)||void 0===b||b.debug(p(p({},k),O),y.default.CALLINGSDK);break;case N.default.WARN:null===(w=this.telemetry)||void 0===w||w.warn(p(p({},k),O),y.default.CALLINGSDK);break;case N.default.ERROR:null===(I=this.telemetry)||void 0===I||I.error(p(p({},k),O),y.default.CALLINGSDK);break;case N.default.INFO:default:null===(D=this.telemetry)||void 0===D||D.info(p(p({},k),O),y.default.CALLINGSDK)}},v}();L.CallingSDKLogger=E,L.createIC3ClientLogger=function(v,h){void 0===h&&(h=!1);var _=new u(v);return _.setDebug(h),_},L.createOCSDKLogger=function(v,h){void 0===h&&(h=!1);var _=new g(v);return _.setDebug(h),_},L.createACSClientLogger=function(v,h){void 0===h&&(h=!1);var _=new C(v);return _.setDebug(h),_},L.createACSAdapterLogger=function(v,h){void 0===h&&(h=!1);var _=new P(v);return _.setDebug(h),_},L.createCallingSDKLogger=function(v,h){void 0===h&&(h=!1);var _=new E(v);return _.setDebug(h),_}},8098:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.isReactNative=L.isNode=L.isBrowser=void 0,L.isBrowser=function(){return"undefined"!=typeof window&&void 0!==window.document},L.isNode=function(){return"undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node},L.isReactNative=function(){return"undefined"!=typeof navigator&&"ReactNative"==navigator.product},L.default={isBrowser:L.isBrowser,isNode:L.isNode,isReactNative:L.isReactNative}},4674:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.resolveChatAdapterUrl=L.resolveIC3ClientUrl=void 0;var p=T(8191),N=T(7474),y=T(1775),x=function(E){return E.ic3Config&&"ic3ClientCDNUrl"in E.ic3Config?E.ic3Config.ic3ClientCDNUrl:E.ic3Config&&"ic3ClientVersion"in E.ic3Config?y.default.getIC3ClientCDNUrl(E.ic3Config.ic3ClientVersion):y.default.getIC3ClientCDNUrl()};L.resolveIC3ClientUrl=x;var P=function(E,v,h){if(h&&![N.default.ACS,N.default.IC3,N.default.DirectLine].includes(h))throw new Error("ChatAdapter for protocol "+h+" currently not supported");return h===N.default.DirectLine?function(E){return E.chatAdapterConfig&&"webChatDirectLineCDNUrl"in E.chatAdapterConfig?E.chatAdapterConfig.webChatDirectLineCDNUrl:E.chatAdapterConfig&&"webChatDirectLineVersion"in E.chatAdapterConfig?y.default.getDirectLineCDNUrl(E.chatAdapterConfig.webChatDirectLineVersion):y.default.getDirectLineCDNUrl()}(E):h===N.default.ACS||v===p.default.V2?function(E){return E.chatAdapterConfig&&"webChatACSAdapterCDNUrl"in E.chatAdapterConfig?E.chatAdapterConfig.webChatACSAdapterCDNUrl:E.chatAdapterConfig&&"webChatACSAdapterVersion"in E.chatAdapterConfig?y.default.getACSAdapterCDNUrl(E.chatAdapterConfig.webChatACSAdapterVersion):y.default.getACSAdapterCDNUrl()}(E):h===N.default.IC3||v===p.default.V1?function(E){return E.chatAdapterConfig&&"webChatIC3AdapterCDNUrl"in E.chatAdapterConfig?E.chatAdapterConfig.webChatIC3AdapterCDNUrl:E.chatAdapterConfig&&"webChatIC3AdapterVersion"in E.chatAdapterConfig?y.default.getIC3AdapterCDNUrl(E.chatAdapterConfig.webChatIC3AdapterVersion):y.default.getIC3AdapterCDNUrl()}(E):""};L.resolveChatAdapterUrl=P,L.default={resolveIC3ClientUrl:x,resolveChatAdapterUrl:P}},9425:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.isCustomerMessage=L.isSystemMessage=void 0;var p=T(3372),N=T(8953);L.isSystemMessage=function(y){var u=y.properties,g=y.messageType===p.default.UserMessage&&u&&u.tags&&u.tags.includes("system"),C=y.tags&&y.tags.includes("system");return g||C||!1},L.isCustomerMessage=function(y){var x=y.sender;return x&&x.id&&x.id.includes("contacts/8:")||x&&x.displayName&&x.displayName===N.default.Customer||!1}},7616:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=["orgUrl","orgId","widgetId"];L.default=function(N){if(!N)throw new Error("OmnichannelConfiguration not found");for(var y=Object.keys(N),x=0,u=T;x<u.length;x++){var g=u[x];if(!y.includes(g))throw new Error("Missing '"+g+"' in OmnichannelConfiguration")}}},641:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.defaultChatSDKConfig=void 0;var N={dataMasking:{disable:!1,maskingCharacter:"#"},telemetry:{disable:!1,ariaTelemetryKey:T(4151).ariaTelemetryKey},persistentChat:{disable:!0,tokenUpdateTime:216e5},chatReconnect:{disable:!0}};L.defaultChatSDKConfig=N,L.default=function(g){g.dataMasking&&function(g){"boolean"!=typeof g.disable&&(g.disable=N.dataMasking.disable),("string"!=typeof g.maskingCharacter||1!==g.maskingCharacter.length)&&(g.maskingCharacter=N.dataMasking.maskingCharacter)}(g.dataMasking),g.persistentChat&&function(g){("number"!=typeof g.tokenUpdateTime||!g.tokenUpdateTime)&&(g.tokenUpdateTime=N.persistentChat.tokenUpdateTime)}(g.persistentChat)}},5145:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.read="read",p}();L.default=T},3865:function(Y,L,T){"use strict";var p=this&&this.__awaiter||function(b,w,I,D){return new(I||(I=Promise))(function(O,V){function B(W){try{j(D.next(W))}catch(X){V(X)}}function U(W){try{j(D.throw(W))}catch(X){V(X)}}function j(W){W.done?O(W.value):function(O){return O instanceof I?O:new I(function(V){V(O)})}(W.value).then(B,U)}j((D=D.apply(b,w||[])).next())})},N=this&&this.__generator||function(b,w){var D,k,O,V,I={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return V={next:B(0),throw:B(1),return:B(2)},"function"==typeof Symbol&&(V[Symbol.iterator]=function(){return this}),V;function B(j){return function(W){return function(j){if(D)throw new TypeError("Generator is already executing.");for(;I;)try{if(D=1,k&&(O=2&j[0]?k.return:j[0]?k.throw||((O=k.return)&&O.call(k),0):k.next)&&!(O=O.call(k,j[1])).done)return O;switch(k=0,O&&(j=[2&j[0],O.value]),j[0]){case 0:case 1:O=j;break;case 4:return I.label++,{value:j[1],done:!1};case 5:I.label++,k=j[1],j=[0];continue;case 7:j=I.ops.pop(),I.trys.pop();continue;default:if(!(O=(O=I.trys).length>0&&O[O.length-1])&&(6===j[0]||2===j[0])){I=0;continue}if(3===j[0]&&(!O||j[1]>O[0]&&j[1]<O[3])){I.label=j[1];break}if(6===j[0]&&I.label<O[1]){I.label=O[1],O=j;break}if(O&&I.label<O[2]){I.label=O[2],I.ops.push(j);break}O[2]&&I.ops.pop(),I.trys.pop();continue}j=w.call(b,I)}catch(W){j=[6,W],k=0}finally{D=O=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}([j,W])}}};Object.defineProperty(L,"__esModule",{value:!0});var y=T(501),x=T(6849),u=T(5874),g=T(2915),C=T(1927),P=T(6648),E=T(5145),v=T(6355),h=T(8636),_=function(){function b(){}return b.getDocumentTypeFromContentType=function(w){return h.default.isDocumentTypeImage(w)?y.default.DocumentTypeImage:y.default.DocumentTypeFile},b.createNewDocument=function(w,I,D){return p(this,void 0,void 0,function(){var O,V,B,U,j;return N(this,function(W){return(j={})[w]=[E.default[E.default.read]],O={filename:I.name,permissions:j,type:b.getDocumentTypeFromContentType(I.type)},V=C.default.getAmsObjectsUrl(D.RegionGtms),(B=P.default.getDefaultAMSHeaders(D.SkypeToken))[x.default.ContentTypeHeader]=y.default.ContentTypeJson,U={data:JSON.stringify(O),headers:B,type:u.default.POST,url:V},[2,g.HttpClient.MakeRequest(U)]})})},b.uploadDocument=function(w,I,D){return p(this,void 0,void 0,function(){var k,O,V;return N(this,function(U){return console.log("AmsHelper.ts uploadDocument(): "+w+", "+I+", "+D),k=h.default.isDocumentTypeImage(I.type),O=C.default.getAmsObjectContentUrl(w,D.RegionGtms,k),V=P.default.getDefaultAMSHeaders(D.SkypeToken),[2,g.HttpClient.MakeRequest({data:I.data,headers:V,processData:!1,type:u.default.PUT,url:O})]})})},b.getFileStatus=function(w,I){var D=h.default.isImageType(w.type),k=C.default.getAmsStatusUrl(w.id,I.RegionGtms,D);return this.getViewStatus(k,I).then(function(O){return O.scan&&O.scan.status===y.default.Malware?v.default.Error:O.view_state===y.default.Ready?v.default.Success:O.scan&&O.scan.status===y.default.InProgress||O.view_state&&O.view_state!==y.default.Failed?v.default.InProgress:v.default.Error}).catch(function(){return Promise.reject({})})},b.downloadDocument=function(w,I){var D=this,k=h.default.isImageType(w.type),O=C.default.getAmsStatusUrl(w.id,I.RegionGtms,k);return new Promise(function(V){D.getViewUri(O,I).then(function(B){var U=new Headers;return U.append("Authorization","skype_token "+I.SkypeToken),U.append("X-MS-Client-Version",y.default.ClientVersion),k&&(U.append("accept",y.default.AMSAcceptHeaderValue),U.append("Accept-Encoding",y.default.AMSAcceptEncodingHeaderValue)),fetch(B,{headers:U,method:u.default.GET}).then(function(W){V(W.blob())}).catch(function(){return Promise.reject({})})})})},b.getViewUri=function(w,I){var D=this;return this.getViewStatus(w,I).then(function(k){return!k.view_location||k.view_state===y.default.Failed||k.scan&&k.scan.status===y.default.Malware?Promise.reject({}):k.view_state&&k.view_state!==y.default.Ready?D.getViewUri(w,I):k.content_state===y.default.Expired?Promise.reject({}):Promise.resolve(k.view_location)}).catch(function(){return Promise.reject("")})},b.getViewStatus=function(w,I){var D=this;return console.log("AmsHelper.ts getViewStatus(): "+w+", "+I),new Promise(function(k){setTimeout(k,y.default.DelayForAms)}).then(function(){var k=P.default.getDefaultAMSViewHeaders(I.SkypeToken);return g.HttpClient.MakeRequest({headers:k,type:u.default.GET,url:w}).then(function(V){return V.status_location&&!V.view_state?D.getViewStatus(V.status_location,I):Promise.resolve(V)}).catch(function(V){return Promise.reject(401===V.status||403===V.status?"unauthorized":{})})})},b}();L.default=_},501:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.NewMessageEvent="NewMessage",p.MessageUpdateEvent="MessageUpdate",p.ThreadUpdateEvent="ThreadUpdate",p.ConversationUpdateEvent="ConversationUpdate",p.HttpLongPoll="HttpLongPoll",p.ContentTypeJson="application/json",p.ContentTypeTextPlain="text/plain;charset=UTF-8",p.ContentTypeForm="application/x-www-form-urlencoded",p.RedirectAs404="redirectAs404",p.NoCache="no-cache",p.User="user",p.Web="web",p.ClientInfoValue="os=Windows; osVer=10; proc=Win32; lcid=en-us; deviceType=1; country=IN; clientName=swc; clientVer=912/0.106.0.34//swc",p.TextPlainMimeType="text/plain",p.SwcName="SWC",p.Image="image",p.ClientVersion="937/0.123.0.9",p.DelayForAms=50,p.Reset_Flag="reset_ic3_needed",p.Malware="malware",p.Ready="ready",p.InProgress="in progress",p.Failed="failed",p.Expired="expired",p.ImageView="imgpsh_fullsize_anim",p.FileView="original",p.DocumentTypeImage="pish/image",p.DocumentTypeFile="sharing/file",p.ImageContent="imgpsh",p.FileContent="original",p.AMSAcceptHeaderValue="image/webp,image/ *,*/*;q=0.8",p.AMSAcceptEncodingHeaderValue="gzip, deflate, sdch, br",p.AMSAuthorizationSkypeTokenValue="skype_token ",p.stabilizePollMaxRetryCount=50,p.timeBetweenStabilizingPoll=1e3,p.retryCount=2,p.retry404Count=3,p.retryOtherCount=3,p.liveStateRetryCount=3,p.timeBetweenOperationRetry=1e3,p.heartBeatDuration=3e4,p.endpointRequestLog="Endpoint request",p.subscriptionRequestLog="Subscription request",p.setPropertiesRequestLog="Set message properties request",p.unsubscribeRequestLog="Unsubscribe from endpoint request",p.pollRequestLog="Polling",p.oldInitializer="Old initializer",p.newInitializer="New Initializer",p.skypeTokenAuthURL="/v1/skypetokenauth",p.skypeTokenConstantForData="skypetoken=",p}();L.default=T},1927:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(501),N=T(6849),y=T(909),x=function(){function u(){}return u.getV2EndpointUrl=function(g,C){return C.chatService+"/v2/users/ME/endpoints/"+g},u.getThreadUrl=function(g,C){return C.chatService+"/v1/threads/"+g+"?view=msnp24Equivalent"},u.getMessagesUrl=function(g,C){return C.chatService+"/v1/users/ME/conversations/"+g+"/messages"},u.getBotMessagesUrl=function(g,C){return C.chatService+"/v1/agents/"+g+"/invoke"},u.getAmsObjectsUrl=function(g){return y.default.sanitizeUrlWithBackSlash(g.ams)+"v1/objects"},u.getAmsObjectContentUrl=function(g,C,P){void 0===P&&(P=!1);var E=P?p.default.ImageContent:p.default.FileContent;return y.default.sanitizeUrlWithBackSlash(C.ams)+"v1/objects/"+g+"/content/"+E},u.getAmsObjectViewUrl=function(g,C,P){void 0===P&&(P=!1);var E=P?p.default.ImageView:p.default.FileView;return y.default.sanitizeUrlWithBackSlash(C.ams)+"v1/objects/"+g+"/views/"+E},u.getAmsStatusUrl=function(g,C,P){void 0===P&&(P=!1);var E=P?p.default.ImageView:p.default.FileView;return y.default.sanitizeUrlWithBackSlash(C.ams)+"v1/objects/"+g+"/views/"+E+"/status"},u.getV1EndpointUrl=function(g){return g.chatService+"/v1/users/ME/endpoints"},u.getV1DeleteEndpointUrl=function(g,C){return g.chatService+"/v1/users/ME/endpoints/"+C},u.getV1SubscriptionUrl=function(g){return g.chatService+"/v1/users/ME/endpoints/SELF/subscriptions"},u.getV1PollUrl=function(g,C){return g.chatService+"/v1/users/ME/endpoints/SELF/subscriptions/"+C+"/poll"},u.getV1SetPropertiesUrl=function(g){return g.chatService+"/v1/users/ME/endpoints/SELF/properties?name="+N.default.SetEndpointProperty},u}();L.default=x},8636:function(Y,L,T){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(w){for(var I,D=1,k=arguments.length;D<k;D++)for(var O in I=arguments[D])Object.prototype.hasOwnProperty.call(I,O)&&(w[O]=I[O]);return w}).apply(this,arguments)};Object.defineProperty(L,"__esModule",{value:!0});var N=T(501),y=T(2900),x=T(4694),u=T(3787),g=T(448),C=T(3207),P=T(3372),E=T(4352),v=T(1927),h=T(7708),_=T(909),b=function(){function w(){}return w.createMessageData=function(I){var k=I.content,O=w.createBaseMessageData(I.contentType===g.default.Text?C.default.Text:C.default.RichTextHtml,I.contentType.toString(),k);return O.properties=this.getMessageProperties(I),_.default.isNullOrUndefined(I.sender.displayName)||(O.imdisplayname=I.sender.displayName),O},w.createBaseMessageData=function(I,D,k){return{"Has-Mentions":"false",clientmessageid:Date.now().toString(),composetime:(new Date).toISOString(),content:k,contenttype:D,messagetype:I}},w.getMessageProperties=function(I){var D={};if(D.deliveryMode=I.deliveryMode.toString(),I.tags){var k=[];I.tags.forEach(function(O){k.push(O)}),D.tags=k.join()}return D},w.createTypingStatusThreadMessageData=function(I,D){var k="";switch(I){case h.default.Typing:k=C.default.ControlTyping;break;case h.default.ClearTyping:k=C.default.ControlClearTyping}var O=w.createBaseMessageData(k,g.default.Text,"");return _.default.isNullOrUndefined(D)||(O=p(p({},D),O)),O},w.createBotMessageData=function(I,D){return JSON.stringify({conversation:{id:I},value:D})},w.createFileMessage=function(I,D,k){var O=C.default.Text,V=g.default.Text.toString().toLowerCase(),B=w.createBaseMessageData(O,V.toString(),"");return B.amsreferences=JSON.stringify([I.id]),B.properties=JSON.stringify(this.createFileMessageProperties(I,D,k)),_.default.isNullOrUndefined(k.sender.displayName)||(B.imdisplayname=k.sender.displayName),B},w.createFileMessageProperties=function(I,D,k){var O={};if(O.deliveryMode=k.deliveryMode.toString(),O.files=JSON.stringify([this.createFileProperty(I,D)]),O.importance="",O.subject="",k.tags){var V=[];k.tags.forEach(function(B){V.push(B)}),O.tags=V.join()}return O},w.createFileProperty=function(I,D){var k=!!w.isDocumentTypeImage(I.type);return{"@type":"http://schema.skype.com/File",type:I.type,itemid:"",baseUrl:"",providerData:"",version:2,id:I.id,title:I.name,state:"active",objectUrl:v.default.getAmsObjectViewUrl(I.id,D.RegionGtms,k),fileName:I.name,fileType:w.getNameAndExtension(I.name).extension,botFileProperties:{url:v.default.getAmsObjectViewUrl(I.id,D.RegionGtms,k)},fileInfo:{fileUrl:v.default.getAmsObjectContentUrl(I.id,D.RegionGtms,k),siteUrl:"",serverRelativeUrl:""},filePreview:{previewUrl:""}}},w.getNameAndExtension=function(I){var D=(I||"").split("."),k="",O="";return D.length>1?(O=D.pop().toLowerCase(),k=D.join(".")):(O="",k=D[0]),{name:k,extension:O}},w.createIRawMessage=function(I,D,k){var V,B,O={clientmessageid:I.clientmessageid,content:I.content,contentType:w.getMessageContentType(I),deliveryMode:_.default.isNullOrUndefined(I.properties)||I.properties.deliveryMode!==y.default.Bridged?y.default.Unbridged:y.default.Bridged,messageType:w.getMessageType(I),properties:I.properties,sender:{displayName:I.imdisplayname,id:I.from,type:w.getPersonType(I.from)},timestamp:new Date(Date.parse(I.originalarrivaltime))};(k&&(O.resourceType=k),_.default.isNullOrUndefined(I.properties)||_.default.isNullOrEmptyString(I.properties.tags))||(V=I.properties.tags.split(","),O.tags=V);if(!_.default.isNullOrUndefined(I.properties)&&!_.default.isNullOrEmptyString(I.properties.files)&&(B=JSON.parse(I.properties.files)).length>0){var U=B[0].id;_.default.isNullOrUndefined(U)&&I.amsreferences&&(U=I.amsreferences[0]);var j=w.getFileUrl(B[0],U,D);O.fileMetadata={fileSharingProtocolType:x.default.AmsBasedFileSharing,id:U,name:B[0].fileName,size:B[0].version,type:B[0].fileType,url:j}}return O},w.createIRawThread=function(I){return{id:I.id,members:I.members,messages:I.messages,properties:I.properties,rosterVersion:I.rosterVersion,type:I.type,version:I.version}},w.getConversationIdFromUrl=function(I){var D=I&&I.match(/\/(\d+:[^\/]*)[\/]?/);return D&&D[1]?D[1]:void 0},w.isSystemMessage=function(I){var D=!1;return _.default.isNullOrEmptyString(I.messagetype)||(D=w.getSystemMessageTypes().reduce(function(k,O){return k||0===I.messagetype.toLowerCase().indexOf(O.toLowerCase())},D)),D},w.getPersonType=function(I){var D=E.default.Unknown,k=I.split("/").pop();return 0===k.indexOf("28:")?D=E.default.Bot:0===k.indexOf("19:")&&(D=E.default.User),D},w.isImageType=function(I){switch(I.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"bmp":case"tiff":case"jfif":return!0;default:return!1}},w.getMessageType=function(I){var D;switch(I.messagetype){case P.default.Typing:D=P.default.Typing;break;case P.default.ClearTyping:D=P.default.ClearTyping;break;default:D=P.default.UserMessage}return D},w.getMessageContentType=function(I){var k=I.contenttype?I.contenttype:I.messagetype;return k===C.default.Text.toLowerCase()||k.indexOf(N.default.TextPlainMimeType)>=0?g.default.Text:g.default.RichText},w.getSystemMessageTypes=function(){return["ThreadActivity"]},w.getFileUrl=function(I,D,k){var V,O=I.fileInfo;if(O&&O.fileUrl)V=O.fileUrl;else if(D){var B=w.isImageType(I.fileType);V=v.default.getAmsObjectContentUrl(D,k.RegionGtms,B)}return V},w.isDocumentTypeImage=function(I){return-1!==I.indexOf(N.default.Image)},w.getDomainRegexp=function(){return new RegExp(/^(https?:.+?\.microsoft\.com)/i)},w.parseDomain=function(I){var D=I.match(w.getDomainRegexp());return D?D[1]:null},w.parseChatServiceHostUrl=function(I){return w.parseDomain(I)},w.shouldRetryOnFailure=function(I){return I!==u.default.Accepted&&I!==u.default.Created},w}();L.default=b},909:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(6849),N=function(){function y(){}return y.isNullOrEmptyString=function(x){return y.isNullOrUndefined(x)||""===x},y.isNullOrUndefinedOrEmptyArray=function(x){return y.isNullOrUndefined(x)||0===x.length},y.isNullOrUndefined=function(x){return null==x},y.isPrimitiveString=function(x){return"string"==typeof x},y.convertStringToBoolean=function(x){return!y.isNullOrUndefined(x)&&"true"===x.toLowerCase()},y.sanitizeUrlWithBackSlash=function(x){return x.endsWith("/")?x:x+"/"},y.getRegistrationTokenValue=function(x){var u=x.match(/registrationToken=(.+); expires=(\d+)/);return u&&u.length>=2?p.default.RegistrationTokenHeaderValue+u[1]:""},y.addQueryParametersToPath=function(x,u){var g=x;if(!y.isNullOrUndefined(u))for(var C in g.indexOf("?")>=0||(g+="?"),u)if(u.hasOwnProperty(C)){var P=C+"="+u[C];"?"!==g[g.length-1]&&(P="&"+P),g+=P}return g},y.getResponseHeader=function(x,u){var g;return y.isNullOrUndefined(x)||(g=x.headers[u]),g},y.timer=function(){var x=(new Date).getTime();return{get milliSecondsElapsed(){return(new Date).getTime()-x}}},y.concatArrays=function(x,u){!y.isNullOrUndefined(x)&&!y.isNullOrUndefined(u)&&u.forEach(function(g){x.push(g)})},y}();L.default=N},1288:function(Y,L,T){"use strict";var p=this&&this.__awaiter||function(g,C,P,E){return new(P||(P=Promise))(function(h,_){function b(D){try{I(E.next(D))}catch(k){_(k)}}function w(D){try{I(E.throw(D))}catch(k){_(k)}}function I(D){D.done?h(D.value):function(h){return h instanceof P?h:new P(function(_){_(h)})}(D.value).then(b,w)}I((E=E.apply(g,C||[])).next())})},N=this&&this.__generator||function(g,C){var E,v,h,_,P={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return _={next:b(0),throw:b(1),return:b(2)},"function"==typeof Symbol&&(_[Symbol.iterator]=function(){return this}),_;function b(I){return function(D){return function(I){if(E)throw new TypeError("Generator is already executing.");for(;P;)try{if(E=1,v&&(h=2&I[0]?v.return:I[0]?v.throw||((h=v.return)&&h.call(v),0):v.next)&&!(h=h.call(v,I[1])).done)return h;switch(v=0,h&&(I=[2&I[0],h.value]),I[0]){case 0:case 1:h=I;break;case 4:return P.label++,{value:I[1],done:!1};case 5:P.label++,v=I[1],I=[0];continue;case 7:I=P.ops.pop(),P.trys.pop();continue;default:if(!(h=(h=P.trys).length>0&&h[h.length-1])&&(6===I[0]||2===I[0])){P=0;continue}if(3===I[0]&&(!h||I[1]>h[0]&&I[1]<h[3])){P.label=I[1];break}if(6===I[0]&&P.label<h[1]){P.label=h[1],h=I;break}if(h&&P.label<h[2]){P.label=h[2],P.ops.push(I);break}h[2]&&P.ops.pop(),P.trys.pop();continue}I=C.call(g,P)}catch(D){I=[6,D],v=0}finally{E=h=0}if(5&I[0])throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}([I,D])}}};Object.defineProperty(L,"__esModule",{value:!0});var y=T(2217),x=T(737),u=function(){function g(C){this.hostType=y.default.Page,this.id=(0,x.uuidv4)(),this.protocolType=C,this.newConversationMessageListeners={},this.threadUpdateListeners={},this.debug=!1}return g.prototype.setDebug=function(C){this.debug=C},g.prototype.joinConversation=function(C,P){var E=this;return this.onJoinConversation(C,P).then(function(v){return{disconnect:E.disconnectFromConversation.bind(E,v),downloadFile:E.downloadFile.bind(E,v),getFileStatus:E.getFileStatus.bind(E,v),getMembers:E.getMembers.bind(E,v),getMessages:E.getMessages.bind(E,v),id:v.id,indicateTypingStatus:E.indicateTypingStatus.bind(E,v),registerOnNewMessage:E.registerOnNewMessage.bind(E,v),registerOnThreadUpdate:E.registerOnThreadUpdate.bind(E,v),sendFileMessage:E.sendFileMessage.bind(E,v),sendMessage:E.sendMessage.bind(E,v),sendMessageToBot:E.sendMessageToBot.bind(E,v),uploadFile:E.uploadFile.bind(E,v),sendFileData:E.sendFileData.bind(E,v)}})},g.prototype.registerOnNewMessage=function(C,P){return p(this,void 0,void 0,function(){return N(this,function(E){return[2,Promise.resolve()]})})},g.prototype.registerOnThreadUpdate=function(C,P){return p(this,void 0,void 0,function(){return N(this,function(E){return[2,Promise.resolve()]})})},g.prototype.uploadFile=function(C,P,E){return Promise.resolve()},g.prototype.downloadFile=function(C,P){return this.debug&&console.debug("IC3Core/ClientBridge/downloadFile"),this.downloadFileData(C,P).then(function(E){if(E&&E.size)return E;var h=new Blob([new Uint8Array(E)]);return!h||0===h.size&&""===h.type?E:h})},g}();L.default=u},2518:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(333),N=T(2217),y=function(){function x(){}return x.getClientBridge=function(u){switch(u.hostType){case N.default.IFrame:throw new Error("Framed bridge not implemented for "+u.hostType+" in IC3Core");case N.default.Page:return new p.default(u.protocolType);default:throw new Error("Client bridge not implemented for "+u.hostType+" in IC3Core")}},x}();L.default=y},333:function(Y,L,T){"use strict";var P,p=this&&this.__extends||(P=function(E,v){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,_){h.__proto__=_}||function(h,_){for(var b in _)Object.prototype.hasOwnProperty.call(_,b)&&(h[b]=_[b])})(E,v)},function(E,v){if("function"!=typeof v&&null!==v)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function h(){this.constructor=E}P(E,v),E.prototype=null===v?Object.create(v):(h.prototype=v.prototype,new h)}),N=this&&this.__awaiter||function(P,E,v,h){return new(v||(v=Promise))(function(b,w){function I(O){try{k(h.next(O))}catch(V){w(V)}}function D(O){try{k(h.throw(O))}catch(V){w(V)}}function k(O){O.done?b(O.value):function(b){return b instanceof v?b:new v(function(w){w(b)})}(O.value).then(I,D)}k((h=h.apply(P,E||[])).next())})},y=this&&this.__generator||function(P,E){var h,_,b,w,v={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return w={next:I(0),throw:I(1),return:I(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function I(k){return function(O){return function(k){if(h)throw new TypeError("Generator is already executing.");for(;v;)try{if(h=1,_&&(b=2&k[0]?_.return:k[0]?_.throw||((b=_.return)&&b.call(_),0):_.next)&&!(b=b.call(_,k[1])).done)return b;switch(_=0,b&&(k=[2&k[0],b.value]),k[0]){case 0:case 1:b=k;break;case 4:return v.label++,{value:k[1],done:!1};case 5:v.label++,_=k[1],k=[0];continue;case 7:k=v.ops.pop(),v.trys.pop();continue;default:if(!(b=(b=v.trys).length>0&&b[b.length-1])&&(6===k[0]||2===k[0])){v=0;continue}if(3===k[0]&&(!b||k[1]>b[0]&&k[1]<b[3])){v.label=k[1];break}if(6===k[0]&&v.label<b[1]){v.label=b[1],b=k;break}if(b&&v.label<b[2]){v.label=b[2],v.ops.push(k);break}b[2]&&v.ops.pop(),v.trys.pop();continue}k=E.call(P,v)}catch(O){k=[6,O],_=0}finally{h=b=0}if(5&k[0])throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}([k,O])}}};Object.defineProperty(L,"__esModule",{value:!0});var x=T(1288),u=T(2217),g=T(9515),C=function(P){function E(v){var h=P.call(this,v)||this;return h.hostType=u.default.Page,h.protocolAdapter=new g.default("",h.hostType),h}return p(E,P),E.prototype.setup=function(v){return Promise.resolve()},E.prototype.update=function(v){return Promise.resolve()},E.prototype.onRegisterOnNewMessage=function(v){return Promise.resolve()},E.prototype.onRegisterOnThreadUpdate=function(v){return Promise.resolve()},E.prototype.initialize=function(v){return this.protocolAdapter.initialize(v)},E.prototype.dispose=function(){return this.protocolAdapter.dispose()},E.prototype.sendMessage=function(v,h){return this.protocolAdapter.sendMessage(v,h)},E.prototype.sendFileMessage=function(v,h,_){return this.protocolAdapter.sendFileMessage(v,h,_)},E.prototype.getMessages=function(v){return this.protocolAdapter.getMessages(v)},E.prototype.disconnectFromConversation=function(v){return this.protocolAdapter.disconnectFromConversation(v)},E.prototype.onJoinConversation=function(v,h){return this.protocolAdapter.joinConversation(v,h)},E.prototype.sendFileData=function(v,h,_){return this.protocolAdapter.sendFileData(v,h,_)},E.prototype.downloadFileData=function(v,h){return this.protocolAdapter.downloadFileData(v,h)},E.prototype.getFileStatus=function(v,h){return this.protocolAdapter.getFileStatus(v,h)},E.prototype.indicateTypingStatus=function(v,h,_){return this.protocolAdapter.indicateTypingStatus(v,h,_)},E.prototype.sendMessageToBot=function(v,h,_){return this.protocolAdapter.sendMessageToBot(v,h,_)},E.prototype.getMembers=function(v){return this.protocolAdapter.getMembers(v)},E.prototype.registerOnNewMessage=function(v,h){return N(this,void 0,void 0,function(){return y(this,function(_){return this.protocolAdapter.registerOnNewMessage(v,h),[2,Promise.resolve()]})})},E.prototype.registerOnThreadUpdate=function(v,h){return N(this,void 0,void 0,function(){return y(this,function(_){return this.protocolAdapter.registerOnThreadUpdate(v,h),[2,Promise.resolve()]})})},E.prototype.setDebug=function(v){void 0===v&&(v=!1),this.protocolAdapter.setDebug(v)},E}(x.default);L.default=C},1218:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(3865),N=T(501),y=T(4694),x=T(6355),u=T(2217),g=T(2915),C=T(5256),P=T(6849),E=T(5874),v=T(3671),h=T(752),_=T(448),b=T(3207),w=T(5655),I=T(6648),D=T(1927),k=T(8636),O=T(909),V=function(){function B(U){this.hostType=u.default.Page,this.protocolType=w.default.IC3V1SDK,this.id=U,this.conversations=[],this.newConversationMessageListeners={},this.threadUpdateListeners={},this.internalConversationsData={},this.liveStateFailureCount=0,this.debug=!1}return B.prototype.startPolling=function(){this.ic3Initializer&&this.ic3Initializer.startPolling()},B.prototype.stopPolling=function(){this.ic3Initializer&&this.ic3Initializer.stopPolling()},B.prototype.setup=function(U){return this.logger=U.logger,g.HttpClient.setLogger(this.logger),Promise.resolve()},B.prototype.initialize=function(U){return this.setupSession(U),Promise.resolve()},B.prototype.update=function(U){return Promise.resolve()},B.prototype.dispose=function(){return this.conversations=[],this.newConversationMessageListeners={},this.threadUpdateListeners={},this.internalConversationsData={},Promise.resolve()},B.prototype.joinConversation=function(U,j){var W;void 0===j&&(j=!0);var X=O.default.timer(),K={id:U};return-1===this.conversations.findIndex(function(R){return R.id===K.id})&&(this.conversations.push(K),this.newConversationMessageListeners[K.id]=this.newConversationMessageListeners[K.id]||[],this.threadUpdateListeners[K.id]=this.threadUpdateListeners[K.id]||[]),null===(W=this.logger)||void 0===W||W.log(h.default.INFO,v.default.JoinConversation,{ElapsedTimeInMilliseconds:X.milliSecondsElapsed,EndpointUrl:this.EndpointUrl,EndpointId:this.EndpointId}),!O.default.isNullOrUndefined(j)&&!0===j&&this.sendHeartBeat(K.id),Promise.resolve(K)},B.prototype.sendLiveState=function(U){var j=this;this.debug&&console.debug("IC3Core/sendLiveState");var K=k.default.createBaseMessageData(b.default.LiveState,_.default.Text,"");return this.sendMessageToIC3(U,K).then(function(){return j.liveStateFailureCount=0,Promise.resolve()}).catch(function(ge){var R;j.liveStateFailureCount++,j.liveStateFailureCount>=N.default.liveStateRetryCount&&(null===(R=j.logger)||void 0===R||R.log(h.default.ERROR,v.default.SendLiveStateFailure,{ExceptionDetails:ge,EndpointUrl:j.EndpointUrl,EndpointId:j.EndpointId}),j.stopHeartBeat(),j.liveStateFailureCount=0)})},B.prototype.sendHeartBeat=function(U){this.heartBeatTimer||(this.debug&&console.debug("IC3Core/sendHeartBeat"),this.sendLiveState(U),this.heartBeatTimer=window.setInterval(this.sendLiveState.bind(this,U),N.default.heartBeatDuration))},B.prototype.stopHeartBeat=function(){clearInterval(this.heartBeatTimer)},B.prototype.sendMessage=function(U,j){var W=k.default.createMessageData(j);return this.sendMessageToIC3(U.id,W)},B.prototype.getMessages=function(U){var j=this,W=I.default.getDefaultGetMessagesQueryParameters(),X=O.default.addQueryParametersToPath(D.default.getMessagesUrl(U.id,this.ic3Info.RegionGtms),W),K=I.default.getDefaultIC3Headers();return K[P.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,K[P.default.ContentTypeHeader]=N.default.ContentTypeJson,g.HttpClient.MakeRequest({enableExponentialBackoff:!0,headers:K,redirect404RetryCount:N.default.retryCount,retryCount:N.default.retryCount,shouldRedirectOn404:!1,shouldResetOnFailure:!1,shouldRetryOnFailure:k.default.shouldRetryOnFailure,timeBetweenRetry:N.default.timeBetweenOperationRetry,type:E.default.GET,url:X}).then(function(R){for(var r=[],s=0,l=R.messages;s<l.length;s++){var a=l[s];k.default.isSystemMessage(a)||r.push(k.default.createIRawMessage(a,j.ic3Info))}return j.getAllMessagesFromBackwardLinkUrl(R._metadata.backwardLink,W.startTime,r)})},B.prototype.registerOnNewMessage=function(U,j){var W;return this.newConversationMessageListeners[U.id].push(j),null===(W=this.logger)||void 0===W||W.log(h.default.INFO,v.default.RegisterOnNewMessage,{EndpointUrl:this.EndpointUrl,EndpointId:this.EndpointId}),Promise.resolve()},B.prototype.registerOnThreadUpdate=function(U,j){var W;return this.threadUpdateListeners[U.id].push(j),null===(W=this.logger)||void 0===W||W.log(h.default.INFO,v.default.RegisterOnThreadUpdate,{EndpointUrl:this.EndpointUrl,EndpointId:this.EndpointId}),Promise.resolve()},B.prototype.disconnectFromConversation=function(U){return this.conversations.findIndex(function(j){return j.id===U.id}),delete this.internalConversationsData[U.id],this.ic3Info.visitor&&(this.stopHeartBeat(),this.stopPolling()),Promise.resolve()},B.prototype.sendFileData=function(U,j,W){var X=this;if(O.default.isNullOrUndefined(W)&&(W=y.default.AmsBasedFileSharing),j.size<=0)throw new Error("File size is lesser or equal to zero.");var K={fileSharingProtocolType:W,id:"",name:j.name,size:j.size,type:j.type,url:""};return new Promise(function(ge,R){p.default.createNewDocument(U.id,j,X.ic3Info).then(function(r){K.id=r.id;var s=k.default.isDocumentTypeImage(j.type);K.url=D.default.getAmsObjectContentUrl(r.id,X.ic3Info.RegionGtms,s),p.default.uploadDocument(r.id,j,X.ic3Info).then(function(){ge(K)}).catch(function(l){R(l)})}).catch(function(r){R(r)})})},B.prototype.sendFileMessage=function(U,j,W){return this.sendMessageToIC3(U.id,k.default.createFileMessage(j,this.ic3Info,W))},B.prototype.downloadFileData=function(U,j){var W=this;return this.debug&&console.debug("IC3Core/IC3ClientAdapter/downloadFileData"),new Promise(function(X,K){var ge=j.fileSharingProtocolType;O.default.isNullOrUndefined(ge)&&(ge=y.default.AmsBasedFileSharing),ge===y.default.AmsBasedFileSharing?p.default.downloadDocument(j,W.ic3Info).then(function(R){X(R)}).catch(function(R){K(R)}):K("This Protocol is not implemented")})},B.prototype.getFileStatus=function(U,j){var W=this;return new Promise(function(X,K){var ge=j.fileSharingProtocolType;O.default.isNullOrUndefined(ge)&&(ge=y.default.AmsBasedFileSharing),ge===y.default.AmsBasedFileSharing?p.default.getFileStatus(j,W.ic3Info).then(function(R){X(R)}).catch(function(R){K(x.default.Error+" e")}):K("This Protocol is not implemented")})},B.prototype.indicateTypingStatus=function(U,j,W){var X=k.default.createTypingStatusThreadMessageData(j,W);return this.sendMessageToIC3(U.id,X)},B.prototype.sendMessageToBot=function(U,j,W){var X=k.default.createBotMessageData(U.id,W),K=D.default.getBotMessagesUrl(j,this.ic3Info.RegionGtms),ge=I.default.getDefaultIC3Headers();return ge[P.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,ge[P.default.ContentTypeHeader]=N.default.ContentTypeTextPlain,g.HttpClient.MakeRequest({data:X,dataType:C.default.TEXT,enableExponentialBackoff:!0,headers:ge,redirect404RetryCount:N.default.retryCount,retryCount:N.default.retryCount,shouldRedirectOn404:!1,shouldResetOnFailure:!1,shouldRetryOnFailure:k.default.shouldRetryOnFailure,timeBetweenRetry:N.default.timeBetweenOperationRetry,type:E.default.POST,url:K})},B.prototype.getMembers=function(U){var j=this.internalConversationsData[U.id].members,W=[];return O.default.isNullOrUndefinedOrEmptyArray(j)||j.forEach(function(X){var K={displayName:X.friendlyName,id:X.id,type:k.default.getPersonType(X.id)};W.push(K)}),Promise.resolve(W)},B.prototype.sendMessageToIC3=function(U,j){var W=D.default.getMessagesUrl(U,this.ic3Info.RegionGtms),X=I.default.getDefaultIC3Headers();X[P.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,X[P.default.ContentTypeHeader]=N.default.ContentTypeJson;var K={data:JSON.stringify(j),enableExponentialBackoff:!0,headers:X,redirect404RetryCount:N.default.retryCount,retryCount:N.default.retryCount,shouldRedirectOn404:!1,shouldResetOnFailure:!1,shouldRetryOnFailure:k.default.shouldRetryOnFailure,timeBetweenRetry:N.default.timeBetweenOperationRetry,type:E.default.POST,url:W};return g.HttpClient.MakeRequest(K)},B.prototype.onNewMessage=function(U,j,W){var K,X=this,ge=O.default.timer();try{U&&(O.default.isNullOrUndefined(this.newConversationMessageListeners[U.id])||k.default.isSystemMessage(j)||this.newConversationMessageListeners[U.id].forEach(function(r){r(k.default.createIRawMessage(j,X.ic3Info,W))}))}catch(r){return void(null===(K=this.logger)||void 0===K||K.log(h.default.ERROR,v.default.OnNewMessageFailure,{ExceptionDetails:r,ElapsedTimeInMilliseconds:ge.milliSecondsElapsed,EndpointUrl:this.EndpointUrl,EndpointId:this.EndpointId}))}},B.prototype.onThreadUpdate=function(U,j){var W,X=O.default.timer();try{U&&(O.default.isNullOrUndefined(this.threadUpdateListeners[U.id])||this.threadUpdateListeners[U.id].forEach(function(ge){ge(k.default.createIRawThread(j))}))}catch(ge){return void(null===(W=this.logger)||void 0===W||W.log(h.default.ERROR,v.default.OnThreadUpdateFailure,{ExceptionDetails:ge,ElapsedTimeInMilliseconds:X.milliSecondsElapsed,EndpointUrl:this.EndpointUrl,EndpointId:this.EndpointId}))}},B.prototype.getAllMessagesFromBackwardLinkUrl=function(U,j,W){var X=this;return O.default.isNullOrEmptyString(U)?Promise.resolve(W):this.getMessagesFromBackwardLinkUrl(U,j).then(function(K){for(var ge=0,R=K.messages;ge<R.length;ge++){var r=R[ge];k.default.isSystemMessage(r)||W.push(k.default.createIRawMessage(r,X.ic3Info))}return X.getAllMessagesFromBackwardLinkUrl(K._metadata.backwardLink,j,W)})},B.prototype.getMessagesFromBackwardLinkUrl=function(U,j){var X=O.default.addQueryParametersToPath(U,{startTime:j}),K=I.default.getDefaultIC3Headers();return K[P.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,K[P.default.ContentTypeHeader]=N.default.ContentTypeJson,g.HttpClient.MakeRequest({enableExponentialBackoff:!0,headers:K,redirect404RetryCount:N.default.retryCount,retryCount:N.default.retryCount,shouldRedirectOn404:!1,shouldResetOnFailure:!1,shouldRetryOnFailure:k.default.shouldRetryOnFailure,timeBetweenRetry:N.default.timeBetweenOperationRetry,type:E.default.GET,url:X})},B.prototype.setupSession=function(U){this.ic3Info={SkypeToken:U.token,RegionGtms:U.regionGtms,visitor:U.visitor},O.default.isNullOrUndefined(this.ic3Info)||(this.EndpointId=this.ic3Info.endpointId,this.EndpointUrl=this.ic3Info.RegionGtms?this.ic3Info.RegionGtms.chatService:"")},B.prototype.setDebug=function(U){void 0===U&&(U=!1),this.debug=U},B}();L.default=V},9515:function(Y,L,T){"use strict";var V,p=this&&this.__extends||(V=function(B,U){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,W){j.__proto__=W}||function(j,W){for(var X in W)Object.prototype.hasOwnProperty.call(W,X)&&(j[X]=W[X])})(B,U)},function(B,U){if("function"!=typeof U&&null!==U)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");function j(){this.constructor=B}V(B,U),B.prototype=null===U?Object.create(U):(j.prototype=U.prototype,new j)}),N=this&&this.__awaiter||function(V,B,U,j){return new(U||(U=Promise))(function(X,K){function ge(s){try{r(j.next(s))}catch(l){K(l)}}function R(s){try{r(j.throw(s))}catch(l){K(l)}}function r(s){s.done?X(s.value):function(X){return X instanceof U?X:new U(function(K){K(X)})}(s.value).then(ge,R)}r((j=j.apply(V,B||[])).next())})},y=this&&this.__generator||function(V,B){var j,W,X,K,U={label:0,sent:function(){if(1&X[0])throw X[1];return X[1]},trys:[],ops:[]};return K={next:ge(0),throw:ge(1),return:ge(2)},"function"==typeof Symbol&&(K[Symbol.iterator]=function(){return this}),K;function ge(r){return function(s){return function(r){if(j)throw new TypeError("Generator is already executing.");for(;U;)try{if(j=1,W&&(X=2&r[0]?W.return:r[0]?W.throw||((X=W.return)&&X.call(W),0):W.next)&&!(X=X.call(W,r[1])).done)return X;switch(W=0,X&&(r=[2&r[0],X.value]),r[0]){case 0:case 1:X=r;break;case 4:return U.label++,{value:r[1],done:!1};case 5:U.label++,W=r[1],r=[0];continue;case 7:r=U.ops.pop(),U.trys.pop();continue;default:if(!(X=(X=U.trys).length>0&&X[X.length-1])&&(6===r[0]||2===r[0])){U=0;continue}if(3===r[0]&&(!X||r[1]>X[0]&&r[1]<X[3])){U.label=r[1];break}if(6===r[0]&&U.label<X[1]){U.label=X[1],X=r;break}if(X&&U.label<X[2]){U.label=X[2],U.ops.push(r);break}X[2]&&U.ops.pop(),U.trys.pop();continue}r=B.call(V,U)}catch(s){r=[6,s],W=0}finally{j=X=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(L,"__esModule",{value:!0});var x=T(501),u=T(6849),g=T(5874),C=T(1218),P=T(7037),E=T(3671),v=T(2915),h=T(752),_=T(5655),b=T(6648),w=T(5785),I=T(1927),D=T(8636),k=T(909),O=function(V){function B(U,j){var W=V.call(this,U)||this;return W.debug&&console.debug("IC3Core/Constructor"),W.protocolType=_.default.IC3V1SDK,W.hostType=j,W.ic3Initializer=new P.default,W}return p(B,V),B.prototype.startPolling=function(){V.prototype.startPolling.call(this)},B.prototype.stopPolling=function(){V.prototype.stopPolling.call(this)},B.prototype.setup=function(U){return V.prototype.setup.call(this,U)},B.prototype.initialize=function(U){var j=this;return V.prototype.initialize.call(this,U).then(function(){var X;return null===(X=j.ic3Initializer)||void 0===X?void 0:X.setup(j.logger).then(function(){return j.setSkypeTokenCookie()}).then(function(){var K;return null===(K=j.ic3Initializer)||void 0===K?void 0:K.setIc3Info(j.ic3Info)}).then(function(){var K;return null===(K=j.ic3Initializer)||void 0===K?void 0:K.initializeIC3(j.handlePollData.bind(j))}).then(function(K){j.ic3Info=K})})},B.prototype.update=function(U){var j=this;return V.prototype.update.call(this,U).then(function(){return j.updateToken({RegionGtms:U.regionGtms,SkypeToken:U.token,visitor:U.visitor})})},B.prototype.dispose=function(){var U;return N(this,void 0,void 0,function(){return y(this,function(j){return null===(U=this.ic3Initializer)||void 0===U||U.stopPolling(),this.heartBeatTimer&&clearInterval(this.heartBeatTimer),Promise.resolve(),[2]})})},B.prototype.joinConversation=function(U,j){var W=this,X=k.default.timer();return V.prototype.joinConversation.call(this,U,j).then(function(K){return W.getThreadRequest(K.id).then(function(ge){return W.internalConversationsData[K.id]={id:U,members:ge.members},K}).catch(function(ge){return W.logger&&W.logger.log(h.default.WARN,E.default.JoinConversationV1GetThreadRequestFailed,{Description:"Unable to retrieve thread: "+ge,ElapsedTimeInMilliseconds:X.milliSecondsElapsed,EndpointUrl:W.EndpointUrl,EndpointId:W.ic3Info.endpointId}),W.internalConversationsData[K.id]={id:U,members:[]},K})})},B.prototype.sendMessage=function(U,j){return V.prototype.sendMessage.call(this,U,j)},B.prototype.sendFileMessage=function(U,j,W){return V.prototype.sendFileMessage.call(this,U,j,W)},B.prototype.getMessages=function(U){return V.prototype.getMessages.call(this,U)},B.prototype.registerOnNewMessage=function(U,j){return V.prototype.registerOnNewMessage.call(this,U,j)},B.prototype.registerOnThreadUpdate=function(U,j){return V.prototype.registerOnThreadUpdate.call(this,U,j)},B.prototype.disconnectFromConversation=function(U){return V.prototype.disconnectFromConversation.call(this,U)},B.prototype.setSkypeTokenCookie=function(){var U=this.ic3Info.RegionGtms.ams.concat(x.default.skypeTokenAuthURL),j=b.default.getDefaultBaseIC3Headers();return j[u.default.ContentTypeHeader]=x.default.ContentTypeForm,v.HttpClient.MakeRequest({data:x.default.skypeTokenConstantForData+this.ic3Info.SkypeToken,enableExponentialBackoff:!0,useXHRWithCredentials:!0,headers:j,redirect404RetryCount:x.default.retryCount,retryCount:x.default.retryCount,shouldRedirectOn404:!1,shouldResetOnFailure:!1,shouldRetryOnFailure:D.default.shouldRetryOnFailure,timeBetweenRetry:x.default.timeBetweenOperationRetry,type:g.default.POST,url:U})},B.prototype.getThreadRequest=function(U){var j=I.default.getThreadUrl(U,this.ic3Info.RegionGtms),W=b.default.getDefaultBaseIC3Headers();return W[u.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,v.HttpClient.MakeRequest({enableExponentialBackoff:!0,headers:W,redirect404RetryCount:x.default.retryCount,retryCount:x.default.retryCount,shouldRedirectOn404:!0,shouldRetryOnFailure:D.default.shouldRetryOnFailure,timeBetweenRetry:x.default.timeBetweenOperationRetry,type:g.default.GET,url:j})},B.prototype.newMessageReceived=function(U,j,W){V.prototype.onNewMessage.call(this,U,j,W)},B.prototype.newThreadUpdate=function(U,j){V.prototype.onThreadUpdate.call(this,U,j)},B.prototype.handleNewMessageEvent=function(U){var j;j=U.resource&&U.resource.conversationid?U.resource.conversationid:D.default.getConversationIdFromUrl(U.resource.conversationLink?U.resource.conversationLink:U.resourceLink);var W=this.conversations.findIndex(function(K){return K.id===j});this.newMessageReceived(this.conversations[W],U.resource,U.resourceType)},B.prototype.handleConversationUpdateEvent=function(U){},B.prototype.handleThreadUpdate=function(U){if(U.resourceType===w.default.ThreadUpdate){var j;j=U.resource&&U.resource.id?U.resource.id:D.default.getConversationIdFromUrl(U.resource.messages?U.resource.messages:U.resourceLink);var W=this.conversations.findIndex(function(K){return K.id===j});this.newThreadUpdate(this.conversations[W],U.resource)}},B.prototype.handlePollData=function(U){if(U&&U.eventMessages)for(var j=0,W=U.eventMessages;j<W.length;j++)this.handlePollEventMessage(W[j])},B.prototype.handlePollEventMessage=function(U){U.resourceType===w.default.NewMessage||U.resourceType===w.default.MessageUpdate?this.handleNewMessageEvent(U):U.resourceType===w.default.ThreadUpdate?this.handleThreadUpdate(U):U.resourceType===w.default.ConversationUpdate&&this.handleConversationUpdateEvent(U)},B.prototype.updateToken=function(U){return N(this,void 0,void 0,function(){var j,W,X,K,ge,R,r,s,l,a,M=this;return y(this,function(A){switch(A.label){case 0:return this.logger&&this.logger.log(h.default.INFO,E.default.UpdateToken,{EndpointUrl:this.EndpointUrl,EndpointId:this.ic3Info.endpointId}),j=[],W=function(d){d&&d.eventMessages&&k.default.concatArrays(j,d.eventMessages)},X=[],K=function(d){d&&d.eventMessages&&k.default.concatArrays(X,d.eventMessages)},ge=this.ic3Initializer,R=new P.default,r=this.updateTokenClearTimeoutHandle,s=this.ic3Info,ge.getPoller().onNewData=W,this.logger?[4,R.setup(this.logger)]:[3,2];case 1:A.sent(),A.label=2;case 2:return[2,R.setIc3Info(U).then(function(){return R.initializeIC3(K)}).then(function(d){l=d}).then(function(){return M.getMatchingIC3EventIndex(j,X)}).then(function(d){a=d}).then(function(){return ge.reset(!0)}).then(function(){return M.syncPollingData(j,X,a)}).then(function(){M.ic3Info=l,M.ic3Initializer=R,M.ic3Initializer.getPoller().onNewData=M.handlePollData.bind(M)}).catch(function(d){throw M.updateTokenClearTimeoutHandle!==r&&(clearTimeout(M.updateTokenClearTimeoutHandle),M.updateTokenClearTimeoutHandle=r),M.ic3Info=s,M.ic3Initializer.getPoller().onNewData=M.handlePollData.bind(M),M.ic3Initializer.getPoller().start(),new Error("Update token failed: "+(d&&d.message))})]}})})},B.prototype.getMatchingIC3EventIndex=function(U,j,W){var X=this;return new Promise(function(K,ge){if((W=W||0)===x.default.stabilizePollMaxRetryCount)K({newPollIndex:-1,previousPollIndex:-1});else{for(var R=0,r=0;R<U.length&&r<j.length;){var s=U[R];if(s.time===j[r].time)return void K({newPollIndex:r,previousPollIndex:R});new Date(s.time)<new Date(s.time)?R++:r++}setTimeout(function(){X.getMatchingIC3EventIndex(U,j,W+1).then(function(a){K(a)}).catch(function(a){ge(a)})},x.default.timeBetweenStabilizingPoll)}})},B.prototype.syncPollingData=function(U,j,W){this.logger&&this.logger.log(h.default.INFO,E.default.SyncingPollData,{EndpointUrl:this.EndpointUrl,EndpointId:this.ic3Info.endpointId});var X=W.previousPollIndex,K=W.newPollIndex+1;-1===W.previousPollIndex&&-1===W.newPollIndex&&(X=U.length-1,K=0);for(var ge=0;ge<=X;ge++)this.handlePollEventMessage(U[ge]);for(ge=K;ge<j.length;ge++)this.handlePollEventMessage(j[ge])},B}(C.default);L.default=O},7037:function(Y,L,T){"use strict";var p=this&&this.__awaiter||function(O,V,B,U){return new(B||(B=Promise))(function(W,X){function K(r){try{R(U.next(r))}catch(s){X(s)}}function ge(r){try{R(U.throw(r))}catch(s){X(s)}}function R(r){r.done?W(r.value):function(W){return W instanceof B?W:new B(function(X){X(W)})}(r.value).then(K,ge)}R((U=U.apply(O,V||[])).next())})},N=this&&this.__generator||function(O,V){var U,j,W,X,B={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return X={next:K(0),throw:K(1),return:K(2)},"function"==typeof Symbol&&(X[Symbol.iterator]=function(){return this}),X;function K(R){return function(r){return function(R){if(U)throw new TypeError("Generator is already executing.");for(;B;)try{if(U=1,j&&(W=2&R[0]?j.return:R[0]?j.throw||((W=j.return)&&W.call(j),0):j.next)&&!(W=W.call(j,R[1])).done)return W;switch(j=0,W&&(R=[2&R[0],W.value]),R[0]){case 0:case 1:W=R;break;case 4:return B.label++,{value:R[1],done:!1};case 5:B.label++,j=R[1],R=[0];continue;case 7:R=B.ops.pop(),B.trys.pop();continue;default:if(!(W=(W=B.trys).length>0&&W[W.length-1])&&(6===R[0]||2===R[0])){B=0;continue}if(3===R[0]&&(!W||R[1]>W[0]&&R[1]<W[3])){B.label=R[1];break}if(6===R[0]&&B.label<W[1]){B.label=W[1],W=R;break}if(W&&B.label<W[2]){B.label=W[2],B.ops.push(R);break}W[2]&&B.ops.pop(),B.trys.pop();continue}R=V.call(O,B)}catch(r){R=[6,r],j=0}finally{U=W=0}if(5&R[0])throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}([R,r])}}};Object.defineProperty(L,"__esModule",{value:!0});var y=T(501),x=T(6849),u=T(5850),g=T(8311),C=T(6648),P=T(1927),E=T(909),v=T(3805),h=T(752),_=T(3671),b=T(3787),w=T(8636),I=T(2915),D=T(5874),k=function(){function O(){this.debug=!1,this.current404RetryCount=0,this.currentOtherRetryCount=0,this.skipUnsubscribe=!1,this.telemetryMessage="",this.errorCode="",this.pollDataHandler=function(V){},this.resetRetryCount()}return O.prototype.setup=function(V){return p(this,void 0,void 0,function(){return N(this,function(B){return this.logger=V,[2]})})},O.prototype.getPoller=function(){var V=this.pollDataHandler.bind(this);return this.poller||(this.poller=new v.default(this.ic3Info,V,this.redirectErrorHandler.bind(this),this.onRequestCreationFailure.bind(this))),this.poller},O.prototype.setIc3Info=function(V){return p(this,void 0,void 0,function(){var B;return N(this,function(U){return B={RegionGtms:JSON.parse(JSON.stringify(V.RegionGtms)),SkypeToken:V.SkypeToken,visitor:V.visitor},this.ic3Info=B,[2]})})},O.prototype.initializeIC3=function(V){var U,B=this;return V&&(this.pollDataHandler=V),null===(U=this.logger)||void 0===U||U.log(h.default.INFO,_.default.IC3InitializationBegins,{Description:"Endpoint to poll is "+JSON.stringify(this.ic3Info.RegionGtms.chatService),EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.createEndpoint().then(function(){return B.createSubscription()}).then(function(){return B.setEndpointProperty()}).then(function(){return B.startPolling(V)}).then(function(){return B.resetRetryCount()}).then(function(){return Promise.resolve(B.ic3Info)}).catch(function(W){return B.redirectErrorHandler(W)})},O.prototype.startPolling=function(V){var B,U=!V&&this.pollDataHandler?this.pollDataHandler.bind(this):this.pollDataHandler;this.poller||(this.poller=new v.default(this.ic3Info,U,this.redirectErrorHandler.bind(this),this.onRequestCreationFailure.bind(this))),this.poller.ic3Info=this.ic3Info,null===(B=this.logger)||void 0===B||B.log(h.default.INFO,_.default.IC3StartedPolling,{EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.poller.start()},O.prototype.stopPolling=function(V){var B;null===(B=this.logger)||void 0===B||B.log(h.default.INFO,_.default.IC3StoppedPolling,{Description:(V?y.default.oldInitializer:y.default.newInitializer)+" stopped polling.",EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.poller&&this.poller.stop()},O.prototype.reset=function(V){return this.stopPolling(V),this.unsubscribeFromEndpoint()},O.prototype.resetRetryCount=function(){this.current404RetryCount=0,this.currentOtherRetryCount=0},O.prototype.onEndpointCreationFailure=function(V){this.onRequestCreationFailure(V,y.default.endpointRequestLog)},O.prototype.onEndpointCreationSuccess=function(V){var B,U,j=E.default.getResponseHeader(V,x.default.SetRegistrationTokenHeader);E.default.isNullOrUndefined(j)||(this.ic3Info.RegistrationToken=E.default.getRegistrationTokenValue(j));var W=E.default.getResponseHeader(V,x.default.LocationHeader);if(!E.default.isNullOrUndefined(W)){var X=W.match(/endpoints\/(%7B[\da-z\-]+%7D)/);this.ic3Info.endpointId=X&&X[1],null===(B=this.logger)||void 0===B||B.log(h.default.INFO,_.default.IC3EndpointCreationSuccess,{Description:"IC3 endpoint Id is "+this.ic3Info.endpointId,EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),V.status===b.default.Created&&w.default.parseChatServiceHostUrl(W)!==this.ic3Info.RegionGtms.chatService&&(this.ic3Info.RegionGtms.chatService=w.default.parseChatServiceHostUrl(W),null===(U=this.logger)||void 0===U||U.log(h.default.WARN,_.default.OnRequestCreationSuccessRedirect,{Description:"Endpoint changed",EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}))}},O.prototype.createEndpointRequest=function(){var V=P.default.getV1EndpointUrl(this.ic3Info.RegionGtms),B=C.default.getDefaultIC3Headers();B[x.default.AuthenticationHeader]=x.default.SkypeTokenHeaderValue+this.ic3Info.SkypeToken,B[x.default.ContentTypeHeader]=y.default.ContentTypeJson;var j={endpointFeatures:[g.default.Agent,g.default.InviteFree,g.default.MessageProperties].join(",")},W={callbackOnFailure:this.onEndpointCreationFailure.bind(this),callbackOnSuccess:this.onEndpointCreationSuccess.bind(this),data:JSON.stringify(j),enableExponentialBackoff:!0,headers:B,redirect404RetryCount:y.default.retryCount,retryCount:y.default.retryCount,shouldRedirectOn404:!0,shouldResetOnFailure:!0,shouldRetryOnFailure:w.default.shouldRetryOnFailure,timeBetweenRetry:y.default.timeBetweenOperationRetry,type:D.default.POST,url:V};return I.HttpClient.MakeRequest(W)},O.prototype.createEndpoint=function(){var V=this;return this.createEndpointRequest().then(function(B){return B.subscriptions&&B.subscriptions.length>0&&(V.ic3Info.subscriptionId=B.subscriptions[0].id),B})},O.prototype.onSubscriptionCreationFailure=function(V){this.onRequestCreationFailure(V,y.default.subscriptionRequestLog)},O.prototype.onSubscriptionCreationSuccess=function(V){var B,U=E.default.getResponseHeader(V,x.default.LocationHeader)||"";V.status===b.default.Created&&!E.default.isNullOrUndefined(U)&&w.default.parseChatServiceHostUrl(U)!==this.ic3Info.RegionGtms.chatService&&(this.ic3Info.RegionGtms.chatService=w.default.parseChatServiceHostUrl(U),null===(B=this.logger)||void 0===B||B.log(h.default.WARN,_.default.OnRequestCreationSuccessRedirect,{Description:"Endpoint changed",EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}));var j=U.match(/\/(\d+)$/);j&&(this.ic3Info.subscriptionId=j[1])},O.prototype.createSubscriptionRequest=function(){var V=P.default.getV1SubscriptionUrl(this.ic3Info.RegionGtms),B=C.default.getDefaultIC3Headers();B[x.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,B[x.default.ContentTypeHeader]=y.default.ContentTypeJson;var U={channelType:y.default.HttpLongPoll,interestedResources:[u.default.ConversationMessages,u.default.ConversationProperties,u.default.Threads,u.default.Contacts]},j={callbackOnFailure:this.onSubscriptionCreationFailure.bind(this),callbackOnSuccess:this.onSubscriptionCreationSuccess.bind(this),data:JSON.stringify(U),enableExponentialBackoff:!0,headers:B,redirect404RetryCount:y.default.retryCount,retryCount:y.default.retryCount,shouldRedirectOn404:!0,shouldResetOnFailure:!0,shouldRetryOnFailure:w.default.shouldRetryOnFailure,timeBetweenRetry:y.default.timeBetweenOperationRetry,type:D.default.POST,url:V};return I.HttpClient.MakeRequest(j)},O.prototype.createSubscription=function(){return this.createSubscriptionRequest()},O.prototype.onSetEndpointPropertyCreationFailure=function(V){this.onRequestCreationFailure(V,y.default.setPropertiesRequestLog)},O.prototype.setEndpointProperty=function(){if(this.ic3Info.visitor)return Promise.resolve();var V=P.default.getV1SetPropertiesUrl(this.ic3Info.RegionGtms),B={};B[x.default.SetEndpointProperty]=!0;var j=C.default.getDefaultIC3Headers();j[x.default.AuthenticationHeader]=x.default.SkypeTokenHeaderValue+this.ic3Info.SkypeToken,j[x.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,j[x.default.ContentTypeHeader]=y.default.ContentTypeJson;var W={callbackOnFailure:this.onSetEndpointPropertyCreationFailure.bind(this),data:JSON.stringify(B),enableExponentialBackoff:!0,headers:j,redirect404RetryCount:y.default.retryCount,retryCount:y.default.retryCount,shouldRedirectOn404:!0,shouldResetOnFailure:!0,shouldRetryOnFailure:w.default.shouldRetryOnFailure,timeBetweenRetry:y.default.timeBetweenOperationRetry,type:D.default.PUT,url:V};return I.HttpClient.MakeRequest(W)},O.prototype.onUnsubscribeCreationFailure=function(V){this.onRequestCreationFailure(V,y.default.unsubscribeRequestLog)},O.prototype.unsubscribeFromEndpoint=function(){if(this.ic3Info.visitor||E.default.isNullOrUndefined(this.ic3Info.endpointId)||this.skipUnsubscribe)return this.skipUnsubscribe=!0,Promise.resolve();var V=P.default.getV1DeleteEndpointUrl(this.ic3Info.RegionGtms,this.ic3Info.endpointId),B=C.default.getDefaultIC3Headers();B[x.default.AuthenticationHeader]=x.default.SkypeTokenHeaderValue+this.ic3Info.SkypeToken,B[x.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,B[x.default.ContentTypeHeader]=y.default.ContentTypeJson;var U={callbackOnFailure:this.onUnsubscribeCreationFailure.bind(this),enableExponentialBackoff:!0,headers:B,redirect404RetryCount:y.default.retryCount,retryCount:y.default.retryCount,shouldRedirectOn404:!0,shouldResetOnFailure:!0,shouldRetryOnFailure:w.default.shouldRetryOnFailure,timeBetweenRetry:y.default.timeBetweenOperationRetry,type:D.default.DELETE,url:V};return I.HttpClient.MakeRequest(U)},O.prototype.onRequestCreationFailure=function(V,B){var U,j,W=E.default.getResponseHeader(V,x.default.LocationHeader);this.telemetryMessage=B+" failed. Error Code: "+V.status+".",this.errorCode=V.status.toString(),this.skipUnsubscribe=!0,V.status!==b.default.Redirect||E.default.isNullOrEmptyString(W)?(null===(j=this.logger)||void 0===j||j.log(h.default.WARN,_.default.ResetOnRequestCreationFailure,{Description:this.telemetryMessage+" Trying to reset.",ErrorCode:V.status.toString(),EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.current404RetryCount=0,this.currentOtherRetryCount++):(null===(U=this.logger)||void 0===U||U.log(h.default.WARN,_.default.RedirectOnRequestCreationFailure,{Description:this.telemetryMessage+" Trying to redirect.",ErrorCode:V.status.toString(),EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.onRequestCreationFailureRedirect(V))},O.prototype.redirectErrorHandler=function(V){var U,B=this;return V.message===y.default.Reset_Flag&&this.current404RetryCount<=y.default.retry404Count&&this.currentOtherRetryCount<=y.default.retryCount?this.reset().then(function(){return B.initializeIC3()}):(null===(U=this.logger)||void 0===U||U.log(h.default.ERROR,_.default.MaxRetryCountReachedForRedirect,{Description:"Fatal Error. Initialization failed. Maximum retry count reached. Exiting. "+this.telemetryMessage,ErrorCode:this.errorCode,ExceptionDetails:V,EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.reset().then(function(){return Promise.reject(V.message)}))},O.prototype.onRequestCreationFailureRedirect=function(V){var B;this.current404RetryCount++,this.currentOtherRetryCount=0,this.ic3Info.RegionGtms.chatService=w.default.parseChatServiceHostUrl(E.default.getResponseHeader(V,x.default.LocationHeader)),null===(B=this.logger)||void 0===B||B.log(h.default.WARN,_.default.OnRequestCreationFailureRedirect,{Description:"Endpoint changed.",EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId})},O}();L.default=k},9202:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(2518),N=T(1356),y=function(){function x(){}return x.getSDK=function(u){return new Promise(function(g){var P=p.default.getClientBridge({hostType:u.hostType,protocolType:u.protocolType}),E={logger:new N.default(P,u.logger)};return P.setup(E).then(function(){var v={dispose:P.dispose.bind(P),id:P.id,initialize:P.initialize.bind(P),joinConversation:P.joinConversation.bind(P),update:P.update.bind(P),setDebug:P.setDebug.bind(P)};return g(v)})})},x}();L.default=y},2915:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.HttpClient=void 0;var p=T(909),N=T(501),y=T(3671),x=T(752),u=T(6849),g=T(3787),C=T(8686),P=function(){function E(){}return E.MakeRequest=function(v){return new Promise(function(_,b){var D=0,k=v.retryCount||1,O={url:v.url,method:v.type,data:v.data,timeout:v.timeout,headers:v.headers,withCredentials:v.useXHRWithCredentials||!1},V=function(){C.default.request(O).then(function(B){!function(B,U){if(U.status>=400){var j={ResponseText:U.statusText,Status:status};E.logWarning("Requesting "+v.url,U.status,j)}v.callbackOnSuccess&&v.callbackOnSuccess(U),_(B)}(B.data,B)}).catch(function(B){!function(B){var U,j,W,X,K,ge,R,r,s,l,a={ErrorThrown:B.message,ResponseText:null===(U=B.response)||void 0===U?void 0:U.statusText,Status:null===(j=B.response)||void 0===j?void 0:j.status},f=function(){var m,q;E.logError("Request to "+v.url+" failed.",(null===(m=B.response)||void 0===m?void 0:m.status)||0,a),b(new Error((null===(q=B.response)||void 0===q?void 0:q.statusText)||""))},M=function(){var m;E.logError("Request to "+v.url+" failed. Resetting endpoint.",(null===(m=B.response)||void 0===m?void 0:m.status)||0,a),v.callbackOnFailure&&v.callbackOnFailure(B),b(new Error(N.default.Reset_Flag))},A=function(){var m;D++;var q=v.timeBetweenRetry||0;(v.enableExponentialBackoff||(null===(m=B.response)||void 0===m?void 0:m.status)===g.default.TooManyRequests)&&(q*=Math.exp(D)),setTimeout(function(){V()},q)},d=null===(W=B.response)||void 0===W?void 0:W.headers[u.default.LocationHeader],i=null===(X=B.response)||void 0===X?void 0:X.headers[u.default.SetRegistrationTokenHeader];(null===(K=B.response)||void 0===K?void 0:K.status)!==g.default.Redirect||p.default.isNullOrEmptyString(d)?(null===(ge=B.response)||void 0===ge?void 0:ge.status)!==g.default.Unauthorized&&(null===(R=B.response)||void 0===R?void 0:R.status)!==g.default.Forbidden||p.default.isNullOrEmptyString(i)?D<=k&&v.shouldRetryOnFailure&&v.shouldRetryOnFailure((null===(s=B.response)||void 0===s?void 0:s.status)||0)||(null===(l=B.response)||void 0===l?void 0:l.status)===g.default.TooManyRequests?A():v.shouldResetOnFailure?M():f():D<=k&&v.shouldRetryOnFailure&&v.shouldRetryOnFailure((null===(r=B.response)||void 0===r?void 0:r.status)||0)?(v.headers&&(v.headers[u.default.RegistrationTokenHeader]=p.default.getRegistrationTokenValue(i)),A()):v.shouldResetOnFailure?M():f():v.shouldRedirectOn404?M():D<=k?(v.url=d,A()):f()}(B)})};V()})},E.isClientError=function(v){if(!v)return!1;var h=v.message,_=!1;return p.default.isNullOrEmptyString(h)||(_=h.search(/Status- 40\d/)>=-1),_},E.setLogger=function(v){E.logger=v},E.logError=function(v,h,_){E.logger&&E.logger.log(x.default.ERROR,y.default.HTTPRequestFailed,{Description:v,ErrorCode:h.toString(),ExceptionDetails:_})},E.logWarning=function(v,h,_){E.logger&&E.logger.log(x.default.INFO,y.default.HTTPRequestUnusualResponse,{Description:v,ErrorCode:h.toString(),ExceptionDetails:_})},E}();L.HttpClient=P},3787:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.OK=200,p.Created=201,p.Accepted=202,p.NoContent=204,p.Unauthorized=401,p.Forbidden=403,p.Redirect=404,p.TooManyRequests=429,p.InternalServerError=500,p.ServiceUnavailable=503,p.NotFound=729,p}();L.default=T},5256:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.TEXT="text",p}();L.default=T},6849:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.LocationHeader="location",p.SetRegistrationTokenHeader="set-registrationtoken",p.RegistrationTokenHeader="RegistrationToken",p.RegistrationTokenHeaderValue="registrationToken=",p.ContentTypeHeader="content-type",p.AuthenticationHeader="authentication",p.BehaviorOverrideHeader="behavioroverride",p.SkypeTokenHeaderValue="skypetoken=",p.SetEndpointProperty="supportsMessageProperties",p}();L.default=T},5874:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={})).GET="get",p.POST="post",p.PUT="put",p.DELETE="delete",T;var p})();L.default=T},6648:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(501),N=T(737),y=function(){function x(){}return x.getDefaultIC3Headers=function(){return{Accept:p.default.ContentTypeJson,BehaviorOverride:p.default.RedirectAs404,ClientInfo:p.default.ClientInfoValue,ContextId:"tcid="+(0,N.uuidv4)(),Expires:0,Pragma:p.default.NoCache,"x-ms-client-type":p.default.Web,"x-ms-user-type":p.default.User}},x.getDefaultBaseIC3Headers=function(){return{Accept:p.default.ContentTypeJson,BehaviorOverride:p.default.RedirectAs404,"content-type":p.default.ContentTypeJson}},x.getDefaultGetMessagesQueryParameters=function(){return{pageSize:20,startTime:0,view:"msnp24Equivalent|supportsMessageProperties"}},x.getDefaultAMSHeaders=function(u){return{Authorization:p.default.AMSAuthorizationSkypeTokenValue+u,"X-MS-Client-Version":p.default.ClientInfoValue}},x.getDefaultAMSViewHeaders=function(u){return{Accept:p.default.AMSAcceptHeaderValue,"Accept-Encoding":p.default.AMSAcceptEncodingHeaderValue,Authorization:p.default.AMSAuthorizationSkypeTokenValue+u,"X-MS-Client-Version":p.default.ClientInfoValue}},x}();L.default=y},6194:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.SDKProvider=void 0;var p=T(9202);L.SDKProvider=p.default},2217:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.IFrame=0,p.Page=1,p}();L.default=T},5655:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.IC3V1SDK=0,p.IC3V2SDK=1,p.MockIC3SDK=2,p}();L.default=T},3671:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={})).JoinConversation="JoinConversation",p.RegisterOnNewMessage="RegisterOnNewMessage",p.RegisterOnThreadUpdate="RegisterOnThreadUpdate",p.OnNewMessageFailure="OnNewMessageFailure",p.OnThreadUpdateFailure="OnThreadUpdateFailure",p.SendLiveStateFailure="SendLiveStateFailure",p.JoinConversationV1GetThreadRequestFailed="JoinConversationV1GetThreadRequestFailed",p.UpdateToken="UpdateToken",p.SyncingPollData="SyncingPollData",p.IC3InitializationBegins="IC3InitializationBegins",p.IC3StartedPolling="IC3StartedPolling",p.IC3StoppedPolling="IC3StoppedPolling",p.IC3EndpointCreationSuccess="IC3EndpointCreationSuccess",p.RedirectOnRequestCreationFailure="RedirectOnRequestCreationFailure",p.ResetOnRequestCreationFailure="ResetOnRequestCreationFailure",p.MaxRetryCountReachedForRedirect="MaxRetryCountReachedForRedirect",p.OnRequestCreationFailureRedirect="OnRequestCreationFailureRedirect",p.OnRequestCreationSuccessRedirect="OnRequestCreationSuccessRedirect",p.ErrorDuringPolling="ErrorDuringPolling",p.HTTPRequestFailed="HTTPRequestFailed",p.HTTPRequestUnusualResponse="HTTPRequestUnusualResponse",T;var p})();L.default=T},752:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={})).INFO="INFO",p.DEBUG="DEBUG",p.WARN="WARN",p.ERROR="ERROR",T;var p})();L.default=T},1356:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(909),N=T(8261),y=function(){function x(u,g){this.sdk=u,this.logger=g}return x.prototype.log=function(u,g,C){if(this.isLoggingEnabled()){var P=N.default.getTelemetryEventData(this.sdk,g,C);this.logEvent(u,P)}},x.prototype.logEvent=function(u,g){this.isLoggingEnabled()&&setTimeout(this.logger.logClientSdkTelemetryEvent.bind(this.logger),0,u,g)},x.prototype.isLoggingEnabled=function(){return!p.default.isNullOrUndefined(this.logger)},x}();L.default=y},8261:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.getTelemetryEventData=function(N,y,x){return{Description:x.Description,ElapsedTimeInMilliseconds:x.ElapsedTimeInMilliseconds,EndpointUrl:x.EndpointUrl,EndpointId:x.EndpointId,ErrorCode:x.ErrorCode,Event:y,ExceptionDetails:x.ExceptionDetails,ShouldBubbleToHost:x.ShouldBubbleToHost,SubscriptionId:N.id}},p}();L.default=T},2900:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.Bridged="bridged",p.Unbridged="unbridged",p}();L.default=T},4694:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={}))[p.AmsBasedFileSharing=0]="AmsBasedFileSharing",T;var p})();L.default=T},6355:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={}))[p.Unknown=0]="Unknown",p[p.InProgress=1]="InProgress",p[p.Success=2]="Success",p[p.Error=3]="Error",T;var p})();L.default=T},5850:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.ConversationProperties="/v1/users/ME/conversations/ALL/properties",p.ConversationMessages="/v1/users/ME/conversations/ALL/messages",p.Threads="/v1/threads/ALL",p.Contacts="/v1/users/ME/contacts/ALL",p}();L.default=T},8311:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.Agent="Agent",p.MessageProperties="MessageProperties",p.InviteFree="InviteFree",p}();L.default=T},448:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.RichText="RichText",p.Text="Text",p}();L.default=T},3207:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.Text="Text",p.RichText="RichText",p.RichTextHtml="RichText/Html",p.ControlTyping="Control/Typing",p.ControlClearTyping="Control/ClearTyping",p.LiveState="Control/LiveState",p}();L.default=T},3372:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.UserMessage="UserMessage",p.SwiftCard="SwiftCard",p.Typing="Control/Typing",p.ClearTyping="Control/ClearTyping",p.LiveState="Control/LiveState",p}();L.default=T},4352:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={}))[p.Unknown=0]="Unknown",p[p.User=1]="User",p[p.Bot=2]="Bot",T;var p})();L.default=T},5785:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.NewMessage="NewMessage",p.MessageUpdate="MessageUpdate",p.UserPresence="UserPresence",p.ConversationUpdate="ConversationUpdate",p.ThreadUpdate="ThreadUpdate",p}();L.default=T},7708:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={}))[p.Typing=0]="Typing",p[p.ClearTyping=1]="ClearTyping",T;var p})();L.default=T},3805:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(1927),N=T(2553),y=T(501),x=function(){function u(g,C,P,E){this.isPolling=!1,this._ic3Info=g,this._onNewData=C,this._onError=P,this.callbackOnFailure=E}return u.prototype.start=function(){return this.isPolling||(this.isPolling=!0,this.startPolling()),Promise.resolve()},u.prototype.stop=function(){return this.isPolling=!1,Promise.resolve()},Object.defineProperty(u.prototype,"onNewData",{get:function(){return this._onNewData},set:function(g){this._onNewData=g},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onError",{get:function(){return this._onError},set:function(g){this._onError=g},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"setCallbackOnFailure",{set:function(g){this.setCallbackOnFailure=g},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"ic3Info",{get:function(){return this._ic3Info},set:function(g){this._ic3Info=g},enumerable:!1,configurable:!0}),u.prototype.startPolling=function(){var g=this;this.isPolling&&this.poll().then(function(C){g.isPolling&&g._onNewData&&g._onNewData(C)}).catch(function(C){g._onError&&g._onError(C)}).then(function(){g.startPolling()})},u.prototype.poll=function(){var g=p.default.getV1PollUrl(this._ic3Info.RegionGtms,this._ic3Info.subscriptionId);return N.default.poll(g,this._ic3Info.RegistrationToken,this.callbackOnEachRequestCompleted.bind(this))},u.prototype.callbackOnEachRequestCompleted=function(g){this.callbackOnFailure(g,y.default.pollRequestLog)},u}();L.default=x},2553:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(501),N=T(2915),y=T(6849),x=T(5874),u=T(6648),g=T(8636),C=function(){function P(){}return P.poll=function(E,v,h){var _=u.default.getDefaultIC3Headers();_[y.default.RegistrationTokenHeader]=v,_[y.default.ContentTypeHeader]=p.default.ContentTypeJson;var b=JSON.stringify({});return N.HttpClient.MakeRequest({callbackOnFailure:h,data:b,enableExponentialBackoff:!0,headers:_,redirect404RetryCount:p.default.retryCount,retryCount:p.default.retryCount,shouldRedirectOn404:!0,shouldResetOnFailure:!0,shouldRetryOnFailure:g.default.shouldRetryOnFailure,timeBetweenRetry:p.default.timeBetweenOperationRetry,type:x.default.POST,url:E})},P}();L.default=C},737:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.uuidv4=void 0,L.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(p){var N=16*Math.random()|0;return("x"===p?N:3&N|8).toString(16)})}},723:(Y,L,T)=>{"use strict";T.d(L,{c:()=>h});var p=T(9334),N=function(_,b){var w="function"==typeof Symbol&&_[Symbol.iterator];if(!w)return _;var D,O,I=w.call(_),k=[];try{for(;(void 0===b||b-- >0)&&!(D=I.next()).done;)k.push(D.value)}catch(V){O={error:V}}finally{try{D&&!D.done&&(w=I.return)&&w.call(I)}finally{if(O)throw O.error}}return k},y=function(_,b,w){if(w||2===arguments.length)for(var k,I=0,D=b.length;I<D;I++)(k||!(I in b))&&(k||(k=Array.prototype.slice.call(b,0,I)),k[I]=b[I]);return _.concat(k||Array.prototype.slice.call(b))},x=function(){function _(){}return _.prototype.active=function(){return p.I},_.prototype.with=function(b,w,I){for(var D=[],k=3;k<arguments.length;k++)D[k-3]=arguments[k];return w.call.apply(w,y([I],N(D),!1))},_.prototype.bind=function(b,w){return w},_.prototype.enable=function(){return this},_.prototype.disable=function(){return this},_}(),u=T(5090),g=T(3770),C=function(_,b){var w="function"==typeof Symbol&&_[Symbol.iterator];if(!w)return _;var D,O,I=w.call(_),k=[];try{for(;(void 0===b||b-- >0)&&!(D=I.next()).done;)k.push(D.value)}catch(V){O={error:V}}finally{try{D&&!D.done&&(w=I.return)&&w.call(I)}finally{if(O)throw O.error}}return k},P=function(_,b,w){if(w||2===arguments.length)for(var k,I=0,D=b.length;I<D;I++)(k||!(I in b))&&(k||(k=Array.prototype.slice.call(b,0,I)),k[I]=b[I]);return _.concat(k||Array.prototype.slice.call(b))},E="context",v=new x,h=function(){function _(){}return _.getInstance=function(){return this._instance||(this._instance=new _),this._instance},_.prototype.setGlobalContextManager=function(b){return(0,u.TG)(E,b,g.G.instance())},_.prototype.active=function(){return this._getContextManager().active()},_.prototype.with=function(b,w,I){for(var D,k=[],O=3;O<arguments.length;O++)k[O-3]=arguments[O];return(D=this._getContextManager()).with.apply(D,P([b,w,I],C(k),!1))},_.prototype.bind=function(b,w){return this._getContextManager().bind(b,w)},_.prototype._getContextManager=function(){return(0,u.Rd)(E)||v},_.prototype.disable=function(){this._getContextManager().disable(),(0,u.J_)(E,g.G.instance())},_}()},3770:(Y,L,T)=>{"use strict";T.d(L,{G:()=>h});var p=T(5090),x=function(){function _(b){this._namespace=b.namespace||"DiagComponentLogger"}return _.prototype.debug=function(){for(var b=[],w=0;w<arguments.length;w++)b[w]=arguments[w];return u("debug",this._namespace,b)},_.prototype.error=function(){for(var b=[],w=0;w<arguments.length;w++)b[w]=arguments[w];return u("error",this._namespace,b)},_.prototype.info=function(){for(var b=[],w=0;w<arguments.length;w++)b[w]=arguments[w];return u("info",this._namespace,b)},_.prototype.warn=function(){for(var b=[],w=0;w<arguments.length;w++)b[w]=arguments[w];return u("warn",this._namespace,b)},_.prototype.verbose=function(){for(var b=[],w=0;w<arguments.length;w++)b[w]=arguments[w];return u("verbose",this._namespace,b)},_}();function u(_,b,w){var I=(0,p.Rd)("diag");if(I)return w.unshift(b),I[_].apply(I,function(_,b,w){if(w||2===arguments.length)for(var k,I=0,D=b.length;I<D;I++)(k||!(I in b))&&(k||(k=Array.prototype.slice.call(b,0,I)),k[I]=b[I]);return _.concat(k||Array.prototype.slice.call(b))}([],function(_,b){var w="function"==typeof Symbol&&_[Symbol.iterator];if(!w)return _;var D,O,I=w.call(_),k=[];try{for(;(void 0===b||b-- >0)&&!(D=I.next()).done;)k.push(D.value)}catch(V){O={error:V}}finally{try{D&&!D.done&&(w=I.return)&&w.call(I)}finally{if(O)throw O.error}}return k}(w),!1))}var g=(()=>{return(_=g||(g={}))[_.NONE=0]="NONE",_[_.ERROR=30]="ERROR",_[_.WARN=50]="WARN",_[_.INFO=60]="INFO",_[_.DEBUG=70]="DEBUG",_[_.VERBOSE=80]="VERBOSE",_[_.ALL=9999]="ALL",g;var _})(),P=function(_,b){var w="function"==typeof Symbol&&_[Symbol.iterator];if(!w)return _;var D,O,I=w.call(_),k=[];try{for(;(void 0===b||b-- >0)&&!(D=I.next()).done;)k.push(D.value)}catch(V){O={error:V}}finally{try{D&&!D.done&&(w=I.return)&&w.call(I)}finally{if(O)throw O.error}}return k},E=function(_,b,w){if(w||2===arguments.length)for(var k,I=0,D=b.length;I<D;I++)(k||!(I in b))&&(k||(k=Array.prototype.slice.call(b,0,I)),k[I]=b[I]);return _.concat(k||Array.prototype.slice.call(b))},h=function(){function _(){function b(D){return function(){for(var k=[],O=0;O<arguments.length;O++)k[O]=arguments[O];var V=(0,p.Rd)("diag");if(V)return V[D].apply(V,E([],P(k),!1))}}var w=this;w.setLogger=function(D,k){var O,V,B;if(void 0===k&&(k={logLevel:g.INFO}),D===w){var U=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return w.error(null!==(O=U.stack)&&void 0!==O?O:U.message),!1}"number"==typeof k&&(k={logLevel:k});var j=(0,p.Rd)("diag"),W=function(_,b){function w(I,D){var k=b[I];return"function"==typeof k&&_>=D?k.bind(b):function(){}}return _<g.NONE?_=g.NONE:_>g.ALL&&(_=g.ALL),b=b||{},{error:w("error",g.ERROR),warn:w("warn",g.WARN),info:w("info",g.INFO),debug:w("debug",g.DEBUG),verbose:w("verbose",g.VERBOSE)}}(null!==(V=k.logLevel)&&void 0!==V?V:g.INFO,D);if(j&&!k.suppressOverrideMessage){var X=null!==(B=(new Error).stack)&&void 0!==B?B:"<failed to generate stacktrace>";j.warn("Current logger will be overwritten from "+X),W.warn("Current logger will overwrite one already registered from "+X)}return(0,p.TG)("diag",W,w,!0)},w.disable=function(){(0,p.J_)("diag",w)},w.createComponentLogger=function(D){return new x(D)},w.verbose=b("verbose"),w.debug=b("debug"),w.info=b("info"),w.warn=b("warn"),w.error=b("error")}return _.instance=function(){return this._instance||(this._instance=new _),this._instance},_}()},9334:(Y,L,T)=>{"use strict";function p(x){return Symbol.for(x)}T.d(L,{Y:()=>p,I:()=>y});var y=new function x(u){var g=this;g._currentContext=u?new Map(u):new Map,g.getValue=function(C){return g._currentContext.get(C)},g.setValue=function(C,P){var E=new x(g._currentContext);return E._currentContext.set(C,P),E},g.deleteValue=function(C){var P=new x(g._currentContext);return P._currentContext.delete(C),P}}},5090:(Y,L,T)=>{"use strict";T.d(L,{Rd:()=>v,TG:()=>E,J_:()=>h});var p="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:{},N="1.3.0",y=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,u=function(_){var b=new Set([_]),w=new Set,I=_.match(y);if(!I)return function(){return!1};var D_major=+I[1],D_minor=+I[2],D_patch=+I[3];if(null!=I[4])return function(B){return B===_};function k(V){return w.add(V),!1}function O(V){return b.add(V),!0}return function(B){if(b.has(B))return!0;if(w.has(B))return!1;var U=B.match(y);if(!U)return k(B);var j_minor=+U[2],j_patch=+U[3];return null!=U[4]||D_major!==+U[1]?k(B):0===D_major?D_minor===j_minor&&D_patch<=j_patch?O(B):k(B):D_minor<=j_minor?O(B):k(B)}}(N),g=N.split(".")[0],C=Symbol.for("opentelemetry.js.api."+g),P=p;function E(_,b,w,I){var D;void 0===I&&(I=!1);var k=P[C]=null!==(D=P[C])&&void 0!==D?D:{version:N};if(!I&&k[_]){var O=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+_);return w.error(O.stack||O.message),!1}return k.version!==N?(O=new Error("@opentelemetry/api: All API registration versions must match"),w.error(O.stack||O.message),!1):(k[_]=b,w.debug("@opentelemetry/api: Registered a global for "+_+" v"+N+"."),!0)}function v(_){var b,w,I=null===(b=P[C])||void 0===b?void 0:b.version;if(I&&u(I))return null===(w=P[C])||void 0===w?void 0:w[_]}function h(_,b){b.debug("@opentelemetry/api: Unregistering a global for "+_+" v"+N+".");var w=P[C];w&&delete w[_]}},2999:(Y,L,T)=>{"use strict";T.d(L,{g:()=>l});var p=T(5090),N=T(723),y=T(9334),x=T(3259),u=function(){function a(f){void 0===f&&(f=x.Rr),this._spanContext=f}return a.prototype.spanContext=function(){return this._spanContext},a.prototype.setAttribute=function(f,M){return this},a.prototype.setAttributes=function(f){return this},a.prototype.addEvent=function(f,M){return this},a.prototype.setStatus=function(f){return this},a.prototype.updateName=function(f){return this},a.prototype.end=function(f){},a.prototype.isRecording=function(){return!1},a.prototype.recordException=function(f,M){},a}(),g=(0,y.Y)("OpenTelemetry Context Key SPAN");function C(a){return a.getValue(g)||void 0}function P(){return C(N.c.getInstance().active())}function E(a,f){return a.setValue(g,f)}function v(a){return a.deleteValue(g)}function h(a,f){return E(a,new u(f))}function _(a){var f;return null===(f=C(a))||void 0===f?void 0:f.spanContext()}var b=/^([0-9a-f]{32})$/i,w=/^[0-9a-f]{16}$/i;function k(a){return function(a){return b.test(a)&&a!==x.AE}(a.traceId)&&function(a){return w.test(a)&&a!==x.fQ}(a.spanId)}function O(a){return new u(a)}var V=N.c.getInstance(),B=function(){function a(){}return a.prototype.startSpan=function(f,M,A){if(Boolean(null==M?void 0:M.root))return new u;var i=A&&_(A);return function(a){return"object"==typeof a&&"string"==typeof a.spanId&&"string"==typeof a.traceId&&"number"==typeof a.traceFlags}(i)&&k(i)?new u(i):new u},a.prototype.startActiveSpan=function(f,M,A,d){var i,m,q;if(!(arguments.length<2)){2===arguments.length?q=M:3===arguments.length?(i=M,q=A):(i=M,m=A,q=d);var z=null!=m?m:V.active(),J=this.startSpan(f,i,z),ce=E(z,J);return V.with(ce,q,void 0,J)}},a}(),j=new B,W=function(){function a(f,M,A,d){this._provider=f,this.name=M,this.version=A,this.options=d}return a.prototype.startSpan=function(f,M,A){return this._getTracer().startSpan(f,M,A)},a.prototype.startActiveSpan=function(f,M,A,d){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},a.prototype._getTracer=function(){if(this._delegate)return this._delegate;var f=this._provider.getDelegateTracer(this.name,this.version,this.options);return f?(this._delegate=f,this._delegate):j},a}(),K=new(function(){function a(){}return a.prototype.getTracer=function(f,M,A){return new B},a}()),ge=function(){function a(){}return a.prototype.getTracer=function(f,M,A){var d;return null!==(d=this.getDelegateTracer(f,M,A))&&void 0!==d?d:new W(this,f,M,A)},a.prototype.getDelegate=function(){var f;return null!==(f=this._delegate)&&void 0!==f?f:K},a.prototype.setDelegate=function(f){this._delegate=f},a.prototype.getDelegateTracer=function(f,M,A){var d;return null===(d=this._delegate)||void 0===d?void 0:d.getTracer(f,M,A)},a}(),R=T(3770),r="trace",l=function(){function a(){this._proxyTracerProvider=new ge,this.wrapSpanContext=O,this.isSpanContextValid=k,this.deleteSpan=v,this.getSpan=C,this.getActiveSpan=P,this.getSpanContext=_,this.setSpan=E,this.setSpanContext=h}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.setGlobalTracerProvider=function(f){var M=(0,p.TG)(r,this._proxyTracerProvider,R.G.instance());return M&&this._proxyTracerProvider.setDelegate(f),M},a.prototype.getTracerProvider=function(){return(0,p.Rd)(r)||this._proxyTracerProvider},a.prototype.getTracer=function(f,M){return this.getTracerProvider().getTracer(f,M)},a.prototype.disable=function(){(0,p.J_)(r,R.G.instance()),this._proxyTracerProvider=new ge},a}().getInstance()},3259:(Y,L,T)=>{"use strict";T.d(L,{fQ:()=>N,Rr:()=>x,AE:()=>y});var p=(()=>{return(u=p||(p={}))[u.NONE=0]="NONE",u[u.SAMPLED=1]="SAMPLED",p;var u})(),N="0000000000000000",y="00000000000000000000000000000000",x={traceId:y,spanId:N,traceFlags:p.NONE}},2016:(Y,L,T)=>{"use strict";const p=L;p.bignum=T(2260),p.define=T(7738).define,p.base=T(8384),p.constants=T(2779),p.decoders=T(1274),p.encoders=T(7549)},7738:(Y,L,T)=>{"use strict";const p=T(7549),N=T(1274),y=T(9879);function u(g,C){this.name=g,this.body=C,this.decoders={},this.encoders={}}L.define=function(C,P){return new u(C,P)},u.prototype._createNamed=function(C){const P=this.name;function E(v){this._initNamed(v,P)}return y(E,C),E.prototype._initNamed=function(h,_){C.call(this,h,_)},new E(this)},u.prototype._getDecoder=function(C){return this.decoders.hasOwnProperty(C=C||"der")||(this.decoders[C]=this._createNamed(N[C])),this.decoders[C]},u.prototype.decode=function(C,P,E){return this._getDecoder(P).decode(C,E)},u.prototype._getEncoder=function(C){return this.encoders.hasOwnProperty(C=C||"der")||(this.encoders[C]=this._createNamed(p[C])),this.encoders[C]},u.prototype.encode=function(C,P,E){return this._getEncoder(P).encode(C,E)}},2227:(Y,L,T)=>{"use strict";const p=T(9879),N=T(4475).b,y=T(8114).Buffer;function x(g,C){N.call(this,C),y.isBuffer(g)?(this.base=g,this.offset=0,this.length=g.length):this.error("Input not Buffer")}function u(g,C){if(Array.isArray(g))this.length=0,this.value=g.map(function(P){return u.isEncoderBuffer(P)||(P=new u(P,C)),this.length+=P.length,P},this);else if("number"==typeof g){if(!(0<=g&&g<=255))return C.error("non-byte EncoderBuffer value");this.value=g,this.length=1}else if("string"==typeof g)this.value=g,this.length=y.byteLength(g);else{if(!y.isBuffer(g))return C.error("Unsupported type: "+typeof g);this.value=g,this.length=g.length}}p(x,N),L.C=x,x.isDecoderBuffer=function(C){return C instanceof x||"object"==typeof C&&y.isBuffer(C.base)&&"DecoderBuffer"===C.constructor.name&&"number"==typeof C.offset&&"number"==typeof C.length&&"function"==typeof C.save&&"function"==typeof C.restore&&"function"==typeof C.isEmpty&&"function"==typeof C.readUInt8&&"function"==typeof C.skip&&"function"==typeof C.raw},x.prototype.save=function(){return{offset:this.offset,reporter:N.prototype.save.call(this)}},x.prototype.restore=function(C){const P=new x(this.base);return P.offset=C.offset,P.length=this.offset,this.offset=C.offset,N.prototype.restore.call(this,C.reporter),P},x.prototype.isEmpty=function(){return this.offset===this.length},x.prototype.readUInt8=function(C){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(C||"DecoderBuffer overrun")},x.prototype.skip=function(C,P){if(!(this.offset+C<=this.length))return this.error(P||"DecoderBuffer overrun");const E=new x(this.base);return E._reporterState=this._reporterState,E.offset=this.offset,E.length=this.offset+C,this.offset+=C,E},x.prototype.raw=function(C){return this.base.slice(C?C.offset:this.offset,this.length)},L.R=u,u.isEncoderBuffer=function(C){return C instanceof u||"object"==typeof C&&"EncoderBuffer"===C.constructor.name&&"number"==typeof C.length&&"function"==typeof C.join},u.prototype.join=function(C,P){return C||(C=y.alloc(this.length)),P||(P=0),0===this.length||(Array.isArray(this.value)?this.value.forEach(function(E){E.join(C,P),P+=E.length}):("number"==typeof this.value?C[P]=this.value:"string"==typeof this.value?C.write(this.value,P):y.isBuffer(this.value)&&this.value.copy(C,P),P+=this.length)),C}},8384:(Y,L,T)=>{"use strict";const p=L;p.Reporter=T(4475).b,p.DecoderBuffer=T(2227).C,p.EncoderBuffer=T(2227).R,p.Node=T(4652)},4652:(Y,L,T)=>{"use strict";const p=T(4475).b,N=T(2227).R,y=T(2227).C,x=T(6055),u=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],g=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(u);function P(v,h,_){const b={};this._baseState=b,b.name=_,b.enc=v,b.parent=h||null,b.children=null,b.tag=null,b.args=null,b.reverseArgs=null,b.choice=null,b.optional=!1,b.any=!1,b.obj=!1,b.use=null,b.useDecoder=null,b.key=null,b.default=null,b.explicit=null,b.implicit=null,b.contains=null,b.parent||(b.children=[],this._wrap())}Y.exports=P;const E=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];P.prototype.clone=function(){const h=this._baseState,_={};E.forEach(function(w){_[w]=h[w]});const b=new this.constructor(_.parent);return b._baseState=_,b},P.prototype._wrap=function(){const h=this._baseState;g.forEach(function(_){this[_]=function(){const w=new this.constructor(this);return h.children.push(w),w[_].apply(w,arguments)}},this)},P.prototype._init=function(h){const _=this._baseState;x(null===_.parent),h.call(this),_.children=_.children.filter(function(b){return b._baseState.parent===this},this),x.equal(_.children.length,1,"Root node can have only one child")},P.prototype._useArgs=function(h){const _=this._baseState,b=h.filter(function(w){return w instanceof this.constructor},this);h=h.filter(function(w){return!(w instanceof this.constructor)},this),0!==b.length&&(x(null===_.children),_.children=b,b.forEach(function(w){w._baseState.parent=this},this)),0!==h.length&&(x(null===_.args),_.args=h,_.reverseArgs=h.map(function(w){if("object"!=typeof w||w.constructor!==Object)return w;const I={};return Object.keys(w).forEach(function(D){D==(0|D)&&(D|=0),I[w[D]]=D}),I}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(v){P.prototype[v]=function(){throw new Error(v+" not implemented for encoding: "+this._baseState.enc)}}),u.forEach(function(v){P.prototype[v]=function(){const _=this._baseState,b=Array.prototype.slice.call(arguments);return x(null===_.tag),_.tag=v,this._useArgs(b),this}}),P.prototype.use=function(h){x(h);const _=this._baseState;return x(null===_.use),_.use=h,this},P.prototype.optional=function(){return this._baseState.optional=!0,this},P.prototype.def=function(h){const _=this._baseState;return x(null===_.default),_.default=h,_.optional=!0,this},P.prototype.explicit=function(h){const _=this._baseState;return x(null===_.explicit&&null===_.implicit),_.explicit=h,this},P.prototype.implicit=function(h){const _=this._baseState;return x(null===_.explicit&&null===_.implicit),_.implicit=h,this},P.prototype.obj=function(){const h=this._baseState,_=Array.prototype.slice.call(arguments);return h.obj=!0,0!==_.length&&this._useArgs(_),this},P.prototype.key=function(h){const _=this._baseState;return x(null===_.key),_.key=h,this},P.prototype.any=function(){return this._baseState.any=!0,this},P.prototype.choice=function(h){const _=this._baseState;return x(null===_.choice),_.choice=h,this._useArgs(Object.keys(h).map(function(b){return h[b]})),this},P.prototype.contains=function(h){const _=this._baseState;return x(null===_.use),_.contains=h,this},P.prototype._decode=function(h,_){const b=this._baseState;if(null===b.parent)return h.wrapResult(b.children[0]._decode(h,_));let k,w=b.default,I=!0,D=null;if(null!==b.key&&(D=h.enterKey(b.key)),b.optional){let O=null;if(null!==b.explicit?O=b.explicit:null!==b.implicit?O=b.implicit:null!==b.tag&&(O=b.tag),null!==O||b.any){if(I=this._peekTag(h,O,b.any),h.isError(I))return I}else{const V=h.save();try{null===b.choice?this._decodeGeneric(b.tag,h,_):this._decodeChoice(h,_),I=!0}catch(B){I=!1}h.restore(V)}}if(b.obj&&I&&(k=h.enterObject()),I){if(null!==b.explicit){const V=this._decodeTag(h,b.explicit);if(h.isError(V))return V;h=V}const O=h.offset;if(null===b.use&&null===b.choice){let V;b.any&&(V=h.save());const B=this._decodeTag(h,null!==b.implicit?b.implicit:b.tag,b.any);if(h.isError(B))return B;b.any?w=h.raw(V):h=B}if(_&&_.track&&null!==b.tag&&_.track(h.path(),O,h.length,"tagged"),_&&_.track&&null!==b.tag&&_.track(h.path(),h.offset,h.length,"content"),b.any||(w=null===b.choice?this._decodeGeneric(b.tag,h,_):this._decodeChoice(h,_)),h.isError(w))return w;if(!b.any&&null===b.choice&&null!==b.children&&b.children.forEach(function(B){B._decode(h,_)}),b.contains&&("octstr"===b.tag||"bitstr"===b.tag)){const V=new y(w);w=this._getUse(b.contains,h._reporterState.obj)._decode(V,_)}}return b.obj&&I&&(w=h.leaveObject(k)),null===b.key||null===w&&!0!==I?null!==D&&h.exitKey(D):h.leaveKey(D,b.key,w),w},P.prototype._decodeGeneric=function(h,_,b){const w=this._baseState;return"seq"===h||"set"===h?null:"seqof"===h||"setof"===h?this._decodeList(_,h,w.args[0],b):/str$/.test(h)?this._decodeStr(_,h,b):"objid"===h&&w.args?this._decodeObjid(_,w.args[0],w.args[1],b):"objid"===h?this._decodeObjid(_,null,null,b):"gentime"===h||"utctime"===h?this._decodeTime(_,h,b):"null_"===h?this._decodeNull(_,b):"bool"===h?this._decodeBool(_,b):"objDesc"===h?this._decodeStr(_,h,b):"int"===h||"enum"===h?this._decodeInt(_,w.args&&w.args[0],b):null!==w.use?this._getUse(w.use,_._reporterState.obj)._decode(_,b):_.error("unknown tag: "+h)},P.prototype._getUse=function(h,_){const b=this._baseState;return b.useDecoder=this._use(h,_),x(null===b.useDecoder._baseState.parent),b.useDecoder=b.useDecoder._baseState.children[0],b.implicit!==b.useDecoder._baseState.implicit&&(b.useDecoder=b.useDecoder.clone(),b.useDecoder._baseState.implicit=b.implicit),b.useDecoder},P.prototype._decodeChoice=function(h,_){const b=this._baseState;let w=null,I=!1;return Object.keys(b.choice).some(function(D){const k=h.save(),O=b.choice[D];try{const V=O._decode(h,_);if(h.isError(V))return!1;w={type:D,value:V},I=!0}catch(V){return h.restore(k),!1}return!0},this),I?w:h.error("Choice not matched")},P.prototype._createEncoderBuffer=function(h){return new N(h,this.reporter)},P.prototype._encode=function(h,_,b){const w=this._baseState;if(null!==w.default&&w.default===h)return;const I=this._encodeValue(h,_,b);return void 0===I||this._skipDefault(I,_,b)?void 0:I},P.prototype._encodeValue=function(h,_,b){const w=this._baseState;if(null===w.parent)return w.children[0]._encode(h,_||new p);let I=null;if(this.reporter=_,w.optional&&void 0===h){if(null===w.default)return;h=w.default}let D=null,k=!1;if(w.any)I=this._createEncoderBuffer(h);else if(w.choice)I=this._encodeChoice(h,_);else if(w.contains)D=this._getUse(w.contains,b)._encode(h,_),k=!0;else if(w.children)D=w.children.map(function(O){if("null_"===O._baseState.tag)return O._encode(null,_,h);if(null===O._baseState.key)return _.error("Child should have a key");const V=_.enterKey(O._baseState.key);if("object"!=typeof h)return _.error("Child expected, but input is not object");const B=O._encode(h[O._baseState.key],_,h);return _.leaveKey(V),B},this).filter(function(O){return O}),D=this._createEncoderBuffer(D);else if("seqof"===w.tag||"setof"===w.tag){if(!w.args||1!==w.args.length)return _.error("Too many args for : "+w.tag);if(!Array.isArray(h))return _.error("seqof/setof, but data is not Array");const O=this.clone();O._baseState.implicit=null,D=this._createEncoderBuffer(h.map(function(V){return this._getUse(this._baseState.args[0],h)._encode(V,_)},O))}else null!==w.use?I=this._getUse(w.use,b)._encode(h,_):(D=this._encodePrimitive(w.tag,h),k=!0);if(!w.any&&null===w.choice){const O=null!==w.implicit?w.implicit:w.tag,V=null===w.implicit?"universal":"context";null===O?null===w.use&&_.error("Tag could be omitted only for .use()"):null===w.use&&(I=this._encodeComposite(O,k,V,D))}return null!==w.explicit&&(I=this._encodeComposite(w.explicit,!1,"context",I)),I},P.prototype._encodeChoice=function(h,_){const b=this._baseState,w=b.choice[h.type];return w||x(!1,h.type+" not found in "+JSON.stringify(Object.keys(b.choice))),w._encode(h.value,_)},P.prototype._encodePrimitive=function(h,_){const b=this._baseState;if(/str$/.test(h))return this._encodeStr(_,h);if("objid"===h&&b.args)return this._encodeObjid(_,b.reverseArgs[0],b.args[1]);if("objid"===h)return this._encodeObjid(_,null,null);if("gentime"===h||"utctime"===h)return this._encodeTime(_,h);if("null_"===h)return this._encodeNull();if("int"===h||"enum"===h)return this._encodeInt(_,b.args&&b.reverseArgs[0]);if("bool"===h)return this._encodeBool(_);if("objDesc"===h)return this._encodeStr(_,h);throw new Error("Unsupported tag: "+h)},P.prototype._isNumstr=function(h){return/^[0-9 ]*$/.test(h)},P.prototype._isPrintstr=function(h){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(h)}},4475:(Y,L,T)=>{"use strict";const p=T(9879);function N(x){this._reporterState={obj:null,path:[],options:x||{},errors:[]}}function y(x,u){this.path=x,this.rethrow(u)}L.b=N,N.prototype.isError=function(u){return u instanceof y},N.prototype.save=function(){const u=this._reporterState;return{obj:u.obj,pathLen:u.path.length}},N.prototype.restore=function(u){const g=this._reporterState;g.obj=u.obj,g.path=g.path.slice(0,u.pathLen)},N.prototype.enterKey=function(u){return this._reporterState.path.push(u)},N.prototype.exitKey=function(u){const g=this._reporterState;g.path=g.path.slice(0,u-1)},N.prototype.leaveKey=function(u,g,C){const P=this._reporterState;this.exitKey(u),null!==P.obj&&(P.obj[g]=C)},N.prototype.path=function(){return this._reporterState.path.join("/")},N.prototype.enterObject=function(){const u=this._reporterState,g=u.obj;return u.obj={},g},N.prototype.leaveObject=function(u){const g=this._reporterState,C=g.obj;return g.obj=u,C},N.prototype.error=function(u){let g;const C=this._reporterState,P=u instanceof y;if(g=P?u:new y(C.path.map(function(E){return"["+JSON.stringify(E)+"]"}).join(""),u.message||u,u.stack),!C.options.partial)throw g;return P||C.errors.push(g),g},N.prototype.wrapResult=function(u){const g=this._reporterState;return g.options.partial?{result:this.isError(u)?null:u,errors:g.errors}:u},p(y,Error),y.prototype.rethrow=function(u){if(this.message=u+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,y),!this.stack)try{throw new Error(this.message)}catch(g){this.stack=g.stack}return this}},2953:(Y,L)=>{"use strict";function T(p){const N={};return Object.keys(p).forEach(function(y){(0|y)==y&&(y|=0),N[p[y]]=y}),N}L.tagClass={0:"universal",1:"application",2:"context",3:"private"},L.tagClassByName=T(L.tagClass),L.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},L.tagByName=T(L.tag)},2779:(Y,L,T)=>{"use strict";const p=L;p._reverse=function(y){const x={};return Object.keys(y).forEach(function(u){(0|u)==u&&(u|=0),x[y[u]]=u}),x},p.der=T(2953)},4163:(Y,L,T)=>{"use strict";const p=T(9879),N=T(2260),y=T(2227).C,x=T(4652),u=T(2953);function g(v){this.enc="der",this.name=v.name,this.entity=v,this.tree=new C,this.tree._init(v.body)}function C(v){x.call(this,"der",v)}function P(v,h){let _=v.readUInt8(h);if(v.isError(_))return _;const b=u.tagClass[_>>6],w=0==(32&_);if(31==(31&_)){let D=_;for(_=0;128==(128&D);){if(D=v.readUInt8(h),v.isError(D))return D;_<<=7,_|=127&D}}else _&=31;return{cls:b,primitive:w,tag:_,tagStr:u.tag[_]}}function E(v,h,_){let b=v.readUInt8(_);if(v.isError(b))return b;if(!h&&128===b)return null;if(0==(128&b))return b;const w=127&b;if(w>4)return v.error("length octect is too long");b=0;for(let I=0;I<w;I++){b<<=8;const D=v.readUInt8(_);if(v.isError(D))return D;b|=D}return b}Y.exports=g,g.prototype.decode=function(h,_){return y.isDecoderBuffer(h)||(h=new y(h,_)),this.tree._decode(h,_)},p(C,x),C.prototype._peekTag=function(h,_,b){if(h.isEmpty())return!1;const w=h.save(),I=P(h,'Failed to peek tag: "'+_+'"');return h.isError(I)?I:(h.restore(w),I.tag===_||I.tagStr===_||I.tagStr+"of"===_||b)},C.prototype._decodeTag=function(h,_,b){const w=P(h,'Failed to decode tag of "'+_+'"');if(h.isError(w))return w;let I=E(h,w.primitive,'Failed to get length of "'+_+'"');if(h.isError(I))return I;if(!b&&w.tag!==_&&w.tagStr!==_&&w.tagStr+"of"!==_)return h.error('Failed to match tag: "'+_+'"');if(w.primitive||null!==I)return h.skip(I,'Failed to match body of: "'+_+'"');const D=h.save(),k=this._skipUntilEnd(h,'Failed to skip indefinite length body: "'+this.tag+'"');return h.isError(k)?k:(I=h.offset-D.offset,h.restore(D),h.skip(I,'Failed to match body of: "'+_+'"'))},C.prototype._skipUntilEnd=function(h,_){for(;;){const b=P(h,_);if(h.isError(b))return b;const w=E(h,b.primitive,_);if(h.isError(w))return w;let I;if(I=b.primitive||null!==w?h.skip(w):this._skipUntilEnd(h,_),h.isError(I))return I;if("end"===b.tagStr)break}},C.prototype._decodeList=function(h,_,b,w){const I=[];for(;!h.isEmpty();){const D=this._peekTag(h,"end");if(h.isError(D))return D;const k=b.decode(h,"der",w);if(h.isError(k)&&D)break;I.push(k)}return I},C.prototype._decodeStr=function(h,_){if("bitstr"===_){const b=h.readUInt8();return h.isError(b)?b:{unused:b,data:h.raw()}}if("bmpstr"===_){const b=h.raw();if(b.length%2==1)return h.error("Decoding of string type: bmpstr length mismatch");let w="";for(let I=0;I<b.length/2;I++)w+=String.fromCharCode(b.readUInt16BE(2*I));return w}if("numstr"===_){const b=h.raw().toString("ascii");return this._isNumstr(b)?b:h.error("Decoding of string type: numstr unsupported characters")}if("octstr"===_)return h.raw();if("objDesc"===_)return h.raw();if("printstr"===_){const b=h.raw().toString("ascii");return this._isPrintstr(b)?b:h.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(_)?h.raw().toString():h.error("Decoding of string type: "+_+" unsupported")},C.prototype._decodeObjid=function(h,_,b){let w;const I=[];let D=0,k=0;for(;!h.isEmpty();)k=h.readUInt8(),D<<=7,D|=127&k,0==(128&k)&&(I.push(D),D=0);if(128&k&&I.push(D),w=b?I:[I[0]/40|0,I[0]%40].concat(I.slice(1)),_){let B=_[w.join(" ")];void 0===B&&(B=_[w.join(".")]),void 0!==B&&(w=B)}return w},C.prototype._decodeTime=function(h,_){const b=h.raw().toString();let w,I,D,k,O,V;if("gentime"===_)w=0|b.slice(0,4),I=0|b.slice(4,6),D=0|b.slice(6,8),k=0|b.slice(8,10),O=0|b.slice(10,12),V=0|b.slice(12,14);else{if("utctime"!==_)return h.error("Decoding "+_+" time is not supported yet");w=0|b.slice(0,2),I=0|b.slice(2,4),D=0|b.slice(4,6),k=0|b.slice(6,8),O=0|b.slice(8,10),V=0|b.slice(10,12),w=w<70?2e3+w:1900+w}return Date.UTC(w,I-1,D,k,O,V,0)},C.prototype._decodeNull=function(){return null},C.prototype._decodeBool=function(h){const _=h.readUInt8();return h.isError(_)?_:0!==_},C.prototype._decodeInt=function(h,_){const b=h.raw();let w=new N(b);return _&&(w=_[w.toString(10)]||w),w},C.prototype._use=function(h,_){return"function"==typeof h&&(h=h(_)),h._getDecoder("der").tree}},1274:(Y,L,T)=>{"use strict";const p=L;p.der=T(4163),p.pem=T(773)},773:(Y,L,T)=>{"use strict";const p=T(9879),N=T(8114).Buffer,y=T(4163);function x(u){y.call(this,u),this.enc="pem"}p(x,y),Y.exports=x,x.prototype.decode=function(g,C){const P=g.toString().split(/[\r\n]+/g),E=C.label.toUpperCase(),v=/^-----(BEGIN|END) ([^-]+)-----$/;let h=-1,_=-1;for(let I=0;I<P.length;I++){const D=P[I].match(v);if(null!==D&&D[2]===E){if(-1!==h){if("END"!==D[1])break;_=I;break}if("BEGIN"!==D[1])break;h=I}}if(-1===h||-1===_)throw new Error("PEM section not found for: "+E);const b=P.slice(h+1,_).join("");b.replace(/[^a-z0-9+/=]+/gi,"");const w=N.from(b,"base64");return y.prototype.decode.call(this,w,C)}},5079:(Y,L,T)=>{"use strict";const p=T(9879),N=T(8114).Buffer,y=T(4652),x=T(2953);function u(E){this.enc="der",this.name=E.name,this.entity=E,this.tree=new g,this.tree._init(E.body)}function g(E){y.call(this,"der",E)}function C(E){return E<10?"0"+E:E}Y.exports=u,u.prototype.encode=function(v,h){return this.tree._encode(v,h).join()},p(g,y),g.prototype._encodeComposite=function(v,h,_,b){const w=function(E,v,h,_){let b;if("seqof"===E?E="seq":"setof"===E&&(E="set"),x.tagByName.hasOwnProperty(E))b=x.tagByName[E];else{if("number"!=typeof E||(0|E)!==E)return _.error("Unknown tag: "+E);b=E}return b>=31?_.error("Multi-octet tag encoding unsupported"):(v||(b|=32),b|=x.tagClassByName[h||"universal"]<<6,b)}(v,h,_,this.reporter);if(b.length<128){const k=N.alloc(2);return k[0]=w,k[1]=b.length,this._createEncoderBuffer([k,b])}let I=1;for(let k=b.length;k>=256;k>>=8)I++;const D=N.alloc(2+I);D[0]=w,D[1]=128|I;for(let k=1+I,O=b.length;O>0;k--,O>>=8)D[k]=255&O;return this._createEncoderBuffer([D,b])},g.prototype._encodeStr=function(v,h){if("bitstr"===h)return this._createEncoderBuffer([0|v.unused,v.data]);if("bmpstr"===h){const _=N.alloc(2*v.length);for(let b=0;b<v.length;b++)_.writeUInt16BE(v.charCodeAt(b),2*b);return this._createEncoderBuffer(_)}return"numstr"===h?this._isNumstr(v)?this._createEncoderBuffer(v):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===h?this._isPrintstr(v)?this._createEncoderBuffer(v):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(h)||"objDesc"===h?this._createEncoderBuffer(v):this.reporter.error("Encoding of string type: "+h+" unsupported")},g.prototype._encodeObjid=function(v,h,_){if("string"==typeof v){if(!h)return this.reporter.error("string objid given, but no values map found");if(!h.hasOwnProperty(v))return this.reporter.error("objid not found in values map");v=h[v].split(/[\s.]+/g);for(let D=0;D<v.length;D++)v[D]|=0}else if(Array.isArray(v)){v=v.slice();for(let D=0;D<v.length;D++)v[D]|=0}if(!Array.isArray(v))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(v));if(!_){if(v[1]>=40)return this.reporter.error("Second objid identifier OOB");v.splice(0,2,40*v[0]+v[1])}let b=0;for(let D=0;D<v.length;D++){let k=v[D];for(b++;k>=128;k>>=7)b++}const w=N.alloc(b);let I=w.length-1;for(let D=v.length-1;D>=0;D--){let k=v[D];for(w[I--]=127&k;(k>>=7)>0;)w[I--]=128|127&k}return this._createEncoderBuffer(w)},g.prototype._encodeTime=function(v,h){let _;const b=new Date(v);return"gentime"===h?_=[C(b.getUTCFullYear()),C(b.getUTCMonth()+1),C(b.getUTCDate()),C(b.getUTCHours()),C(b.getUTCMinutes()),C(b.getUTCSeconds()),"Z"].join(""):"utctime"===h?_=[C(b.getUTCFullYear()%100),C(b.getUTCMonth()+1),C(b.getUTCDate()),C(b.getUTCHours()),C(b.getUTCMinutes()),C(b.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+h+" time is not supported yet"),this._encodeStr(_,"octstr")},g.prototype._encodeNull=function(){return this._createEncoderBuffer("")},g.prototype._encodeInt=function(v,h){if("string"==typeof v){if(!h)return this.reporter.error("String int or enum given, but no values map");if(!h.hasOwnProperty(v))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(v));v=h[v]}if("number"!=typeof v&&!N.isBuffer(v)){const w=v.toArray();!v.sign&&128&w[0]&&w.unshift(0),v=N.from(w)}if(N.isBuffer(v)){let w=v.length;0===v.length&&w++;const I=N.alloc(w);return v.copy(I),0===v.length&&(I[0]=0),this._createEncoderBuffer(I)}if(v<128)return this._createEncoderBuffer(v);if(v<256)return this._createEncoderBuffer([0,v]);let _=1;for(let w=v;w>=256;w>>=8)_++;const b=new Array(_);for(let w=b.length-1;w>=0;w--)b[w]=255&v,v>>=8;return 128&b[0]&&b.unshift(0),this._createEncoderBuffer(N.from(b))},g.prototype._encodeBool=function(v){return this._createEncoderBuffer(v?255:0)},g.prototype._use=function(v,h){return"function"==typeof v&&(v=v(h)),v._getEncoder("der").tree},g.prototype._skipDefault=function(v,h,_){const b=this._baseState;let w;if(null===b.default)return!1;const I=v.join();if(void 0===b.defaultBuffer&&(b.defaultBuffer=this._encodeValue(b.default,h,_).join()),I.length!==b.defaultBuffer.length)return!1;for(w=0;w<I.length;w++)if(I[w]!==b.defaultBuffer[w])return!1;return!0}},7549:(Y,L,T)=>{"use strict";const p=L;p.der=T(5079),p.pem=T(6163)},6163:(Y,L,T)=>{"use strict";const p=T(9879),N=T(5079);function y(x){N.call(this,x),this.enc="pem"}p(y,N),Y.exports=y,y.prototype.encode=function(u,g){const P=N.prototype.encode.call(this,u).toString("base64"),E=["-----BEGIN "+g.label+"-----"];for(let v=0;v<P.length;v+=64)E.push(P.slice(v,v+64));return E.push("-----END "+g.label+"-----"),E.join("\n")}},2260:function(Y,L,T){!function(p,N){"use strict";function y(R,r){if(!R)throw new Error(r||"Assertion failed")}function x(R,r){R.super_=r;var s=function(){};s.prototype=r.prototype,R.prototype=new s,R.prototype.constructor=R}function u(R,r,s){if(u.isBN(R))return R;this.negative=0,this.words=null,this.length=0,this.red=null,null!==R&&(("le"===r||"be"===r)&&(s=r,r=10),this._init(R||0,r||10,s||"be"))}var g;"object"==typeof p?p.exports=u:N.BN=u,u.BN=u,u.wordSize=26;try{g="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:T(950).Buffer}catch(R){}function C(R,r){var s=R.charCodeAt(r);return s>=65&&s<=70?s-55:s>=97&&s<=102?s-87:s-48&15}function P(R,r,s){var l=C(R,s);return s-1>=r&&(l|=C(R,s-1)<<4),l}function E(R,r,s,l){for(var a=0,f=Math.min(R.length,s),M=r;M<f;M++){var A=R.charCodeAt(M)-48;a*=l,a+=A>=49?A-49+10:A>=17?A-17+10:A}return a}u.isBN=function(r){return r instanceof u||null!==r&&"object"==typeof r&&r.constructor.wordSize===u.wordSize&&Array.isArray(r.words)},u.max=function(r,s){return r.cmp(s)>0?r:s},u.min=function(r,s){return r.cmp(s)<0?r:s},u.prototype._init=function(r,s,l){if("number"==typeof r)return this._initNumber(r,s,l);if("object"==typeof r)return this._initArray(r,s,l);"hex"===s&&(s=16),y(s===(0|s)&&s>=2&&s<=36);var a=0;"-"===(r=r.toString().replace(/\s+/g,""))[0]&&(a++,this.negative=1),a<r.length&&(16===s?this._parseHex(r,a,l):(this._parseBase(r,s,a),"le"===l&&this._initArray(this.toArray(),s,l)))},u.prototype._initNumber=function(r,s,l){r<0&&(this.negative=1,r=-r),r<67108864?(this.words=[67108863&r],this.length=1):r<4503599627370496?(this.words=[67108863&r,r/67108864&67108863],this.length=2):(y(r<9007199254740992),this.words=[67108863&r,r/67108864&67108863,1],this.length=3),"le"===l&&this._initArray(this.toArray(),s,l)},u.prototype._initArray=function(r,s,l){if(y("number"==typeof r.length),r.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(r.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var f,M,A=0;if("be"===l)for(a=r.length-1,f=0;a>=0;a-=3)this.words[f]|=(M=r[a]|r[a-1]<<8|r[a-2]<<16)<<A&67108863,this.words[f+1]=M>>>26-A&67108863,(A+=24)>=26&&(A-=26,f++);else if("le"===l)for(a=0,f=0;a<r.length;a+=3)this.words[f]|=(M=r[a]|r[a+1]<<8|r[a+2]<<16)<<A&67108863,this.words[f+1]=M>>>26-A&67108863,(A+=24)>=26&&(A-=26,f++);return this.strip()},u.prototype._parseHex=function(r,s,l){this.length=Math.ceil((r.length-s)/6),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var A,f=0,M=0;if("be"===l)for(a=r.length-1;a>=s;a-=2)A=P(r,s,a)<<f,this.words[M]|=67108863&A,f>=18?(f-=18,this.words[M+=1]|=A>>>26):f+=8;else for(a=(r.length-s)%2==0?s+1:s;a<r.length;a+=2)A=P(r,s,a)<<f,this.words[M]|=67108863&A,f>=18?(f-=18,this.words[M+=1]|=A>>>26):f+=8;this.strip()},u.prototype._parseBase=function(r,s,l){this.words=[0],this.length=1;for(var a=0,f=1;f<=67108863;f*=s)a++;a--,f=f/s|0;for(var M=r.length-l,A=M%a,d=Math.min(M,M-A)+l,i=0,m=l;m<d;m+=a)i=E(r,m,m+a,s),this.imuln(f),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i);if(0!==A){var q=1;for(i=E(r,m,r.length,s),m=0;m<A;m++)q*=s;this.imuln(q),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i)}this.strip()},u.prototype.copy=function(r){r.words=new Array(this.length);for(var s=0;s<this.length;s++)r.words[s]=this.words[s];r.length=this.length,r.negative=this.negative,r.red=this.red},u.prototype.clone=function(){var r=new u(null);return this.copy(r),r},u.prototype._expand=function(r){for(;this.length<r;)this.words[this.length++]=0;return this},u.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},u.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},u.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var v=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],_=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function w(R,r,s){s.negative=r.negative^R.negative;var l=R.length+r.length|0;s.length=l,l=l-1|0;var a=0|R.words[0],f=0|r.words[0],M=a*f,d=M/67108864|0;s.words[0]=67108863&M;for(var i=1;i<l;i++){for(var m=d>>>26,q=67108863&d,z=Math.min(i,r.length-1),J=Math.max(0,i-R.length+1);J<=z;J++)m+=(M=(a=0|R.words[i-J|0])*(f=0|r.words[J])+q)/67108864|0,q=67108863&M;s.words[i]=0|q,d=0|m}return 0!==d?s.words[i]=0|d:s.length--,s.strip()}u.prototype.toString=function(r,s){var l;if(s=0|s||1,16===(r=r||10)||"hex"===r){l="";for(var a=0,f=0,M=0;M<this.length;M++){var A=this.words[M],d=(16777215&(A<<a|f)).toString(16);l=0!=(f=A>>>24-a&16777215)||M!==this.length-1?v[6-d.length]+d+l:d+l,(a+=2)>=26&&(a-=26,M--)}for(0!==f&&(l=f.toString(16)+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}if(r===(0|r)&&r>=2&&r<=36){var i=h[r],m=_[r];l="";var q=this.clone();for(q.negative=0;!q.isZero();){var z=q.modn(m).toString(r);l=(q=q.idivn(m)).isZero()?z+l:v[i-z.length]+z+l}for(this.isZero()&&(l="0"+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}y(!1,"Base should be between 2 and 36")},u.prototype.toNumber=function(){var r=this.words[0];return 2===this.length?r+=67108864*this.words[1]:3===this.length&&1===this.words[2]?r+=4503599627370496+67108864*this.words[1]:this.length>2&&y(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-r:r},u.prototype.toJSON=function(){return this.toString(16)},u.prototype.toBuffer=function(r,s){return y(void 0!==g),this.toArrayLike(g,r,s)},u.prototype.toArray=function(r,s){return this.toArrayLike(Array,r,s)},u.prototype.toArrayLike=function(r,s,l){var a=this.byteLength(),f=l||Math.max(1,a);y(a<=f,"byte array longer than desired length"),y(f>0,"Requested array length <= 0"),this.strip();var d,i,M="le"===s,A=new r(f),m=this.clone();if(M){for(i=0;!m.isZero();i++)d=m.andln(255),m.iushrn(8),A[i]=d;for(;i<f;i++)A[i]=0}else{for(i=0;i<f-a;i++)A[i]=0;for(i=0;!m.isZero();i++)d=m.andln(255),m.iushrn(8),A[f-i-1]=d}return A},u.prototype._countBits=Math.clz32?function(r){return 32-Math.clz32(r)}:function(r){var s=r,l=0;return s>=4096&&(l+=13,s>>>=13),s>=64&&(l+=7,s>>>=7),s>=8&&(l+=4,s>>>=4),s>=2&&(l+=2,s>>>=2),l+s},u.prototype._zeroBits=function(r){if(0===r)return 26;var s=r,l=0;return 0==(8191&s)&&(l+=13,s>>>=13),0==(127&s)&&(l+=7,s>>>=7),0==(15&s)&&(l+=4,s>>>=4),0==(3&s)&&(l+=2,s>>>=2),0==(1&s)&&l++,l},u.prototype.bitLength=function(){var s=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+s},u.prototype.zeroBits=function(){if(this.isZero())return 0;for(var r=0,s=0;s<this.length;s++){var l=this._zeroBits(this.words[s]);if(r+=l,26!==l)break}return r},u.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},u.prototype.toTwos=function(r){return 0!==this.negative?this.abs().inotn(r).iaddn(1):this.clone()},u.prototype.fromTwos=function(r){return this.testn(r-1)?this.notn(r).iaddn(1).ineg():this.clone()},u.prototype.isNeg=function(){return 0!==this.negative},u.prototype.neg=function(){return this.clone().ineg()},u.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},u.prototype.iuor=function(r){for(;this.length<r.length;)this.words[this.length++]=0;for(var s=0;s<r.length;s++)this.words[s]=this.words[s]|r.words[s];return this.strip()},u.prototype.ior=function(r){return y(0==(this.negative|r.negative)),this.iuor(r)},u.prototype.or=function(r){return this.length>r.length?this.clone().ior(r):r.clone().ior(this)},u.prototype.uor=function(r){return this.length>r.length?this.clone().iuor(r):r.clone().iuor(this)},u.prototype.iuand=function(r){var s;s=this.length>r.length?r:this;for(var l=0;l<s.length;l++)this.words[l]=this.words[l]&r.words[l];return this.length=s.length,this.strip()},u.prototype.iand=function(r){return y(0==(this.negative|r.negative)),this.iuand(r)},u.prototype.and=function(r){return this.length>r.length?this.clone().iand(r):r.clone().iand(this)},u.prototype.uand=function(r){return this.length>r.length?this.clone().iuand(r):r.clone().iuand(this)},u.prototype.iuxor=function(r){var s,l;this.length>r.length?(s=this,l=r):(s=r,l=this);for(var a=0;a<l.length;a++)this.words[a]=s.words[a]^l.words[a];if(this!==s)for(;a<s.length;a++)this.words[a]=s.words[a];return this.length=s.length,this.strip()},u.prototype.ixor=function(r){return y(0==(this.negative|r.negative)),this.iuxor(r)},u.prototype.xor=function(r){return this.length>r.length?this.clone().ixor(r):r.clone().ixor(this)},u.prototype.uxor=function(r){return this.length>r.length?this.clone().iuxor(r):r.clone().iuxor(this)},u.prototype.inotn=function(r){y("number"==typeof r&&r>=0);var s=0|Math.ceil(r/26),l=r%26;this._expand(s),l>0&&s--;for(var a=0;a<s;a++)this.words[a]=67108863&~this.words[a];return l>0&&(this.words[a]=~this.words[a]&67108863>>26-l),this.strip()},u.prototype.notn=function(r){return this.clone().inotn(r)},u.prototype.setn=function(r,s){y("number"==typeof r&&r>=0);var l=r/26|0,a=r%26;return this._expand(l+1),this.words[l]=s?this.words[l]|1<<a:this.words[l]&~(1<<a),this.strip()},u.prototype.iadd=function(r){var s,l,a;if(0!==this.negative&&0===r.negative)return this.negative=0,s=this.isub(r),this.negative^=1,this._normSign();if(0===this.negative&&0!==r.negative)return r.negative=0,s=this.isub(r),r.negative=1,s._normSign();this.length>r.length?(l=this,a=r):(l=r,a=this);for(var f=0,M=0;M<a.length;M++)this.words[M]=67108863&(s=(0|l.words[M])+(0|a.words[M])+f),f=s>>>26;for(;0!==f&&M<l.length;M++)this.words[M]=67108863&(s=(0|l.words[M])+f),f=s>>>26;if(this.length=l.length,0!==f)this.words[this.length]=f,this.length++;else if(l!==this)for(;M<l.length;M++)this.words[M]=l.words[M];return this},u.prototype.add=function(r){var s;return 0!==r.negative&&0===this.negative?(r.negative=0,s=this.sub(r),r.negative^=1,s):0===r.negative&&0!==this.negative?(this.negative=0,s=r.sub(this),this.negative=1,s):this.length>r.length?this.clone().iadd(r):r.clone().iadd(this)},u.prototype.isub=function(r){if(0!==r.negative){r.negative=0;var s=this.iadd(r);return r.negative=1,s._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(r),this.negative=1,this._normSign();var a,f,l=this.cmp(r);if(0===l)return this.negative=0,this.length=1,this.words[0]=0,this;l>0?(a=this,f=r):(a=r,f=this);for(var M=0,A=0;A<f.length;A++)M=(s=(0|a.words[A])-(0|f.words[A])+M)>>26,this.words[A]=67108863&s;for(;0!==M&&A<a.length;A++)M=(s=(0|a.words[A])+M)>>26,this.words[A]=67108863&s;if(0===M&&A<a.length&&a!==this)for(;A<a.length;A++)this.words[A]=a.words[A];return this.length=Math.max(this.length,A),a!==this&&(this.negative=1),this.strip()},u.prototype.sub=function(r){return this.clone().isub(r)};var I=function(r,s,l){var d,i,m,a=r.words,f=s.words,M=l.words,A=0,q=0|a[0],z=8191&q,J=q>>>13,ce=0|a[1],se=8191&ce,he=ce>>>13,ve=0|a[2],ae=8191&ve,de=ve>>>13,Re=0|a[3],Ee=8191&Re,ue=Re>>>13,ye=0|a[4],Se=8191&ye,ie=ye>>>13,ee=0|a[5],Z=8191&ee,le=ee>>>13,Oe=0|a[6],we=8191&Oe,Te=Oe>>>13,yt=0|a[7],Ne=8191&yt,Me=yt>>>13,Ye=0|a[8],De=8191&Ye,Fe=Ye>>>13,ct=0|a[9],Ve=8191&ct,Ke=ct>>>13,Zt=0|f[0],nt=8191&Zt,ot=Zt>>>13,Mt=0|f[1],ut=8191&Mt,st=Mt>>>13,Nn=0|f[2],rt=8191&Nn,Ge=Nn>>>13,Cn=0|f[3],qe=8191&Cn,We=Cn>>>13,Dn=0|f[4],ft=8191&Dn,Ue=Dn>>>13,Ln=0|f[5],gt=8191&Ln,it=Ln>>>13,zn=0|f[6],lt=8191&zn,ze=zn>>>13,sn=0|f[7],dt=8191&sn,Xe=sn>>>13,Qt=0|f[8],Qe=8191&Qt,Ze=Qt>>>13,Pn=0|f[9],Je=8191&Pn,at=Pn>>>13;l.negative=r.negative^s.negative,l.length=19;var un=(A+(d=Math.imul(z,nt))|0)+((8191&(i=(i=Math.imul(z,ot))+Math.imul(J,nt)|0))<<13)|0;A=((m=Math.imul(J,ot))+(i>>>13)|0)+(un>>>26)|0,un&=67108863,d=Math.imul(se,nt),i=(i=Math.imul(se,ot))+Math.imul(he,nt)|0,m=Math.imul(he,ot);var Vt=(A+(d=d+Math.imul(z,ut)|0)|0)+((8191&(i=(i=i+Math.imul(z,st)|0)+Math.imul(J,ut)|0))<<13)|0;A=((m=m+Math.imul(J,st)|0)+(i>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,d=Math.imul(ae,nt),i=(i=Math.imul(ae,ot))+Math.imul(de,nt)|0,m=Math.imul(de,ot),d=d+Math.imul(se,ut)|0,i=(i=i+Math.imul(se,st)|0)+Math.imul(he,ut)|0,m=m+Math.imul(he,st)|0;var Ht=(A+(d=d+Math.imul(z,rt)|0)|0)+((8191&(i=(i=i+Math.imul(z,Ge)|0)+Math.imul(J,rt)|0))<<13)|0;A=((m=m+Math.imul(J,Ge)|0)+(i>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,d=Math.imul(Ee,nt),i=(i=Math.imul(Ee,ot))+Math.imul(ue,nt)|0,m=Math.imul(ue,ot),d=d+Math.imul(ae,ut)|0,i=(i=i+Math.imul(ae,st)|0)+Math.imul(de,ut)|0,m=m+Math.imul(de,st)|0,d=d+Math.imul(se,rt)|0,i=(i=i+Math.imul(se,Ge)|0)+Math.imul(he,rt)|0,m=m+Math.imul(he,Ge)|0;var bn=(A+(d=d+Math.imul(z,qe)|0)|0)+((8191&(i=(i=i+Math.imul(z,We)|0)+Math.imul(J,qe)|0))<<13)|0;A=((m=m+Math.imul(J,We)|0)+(i>>>13)|0)+(bn>>>26)|0,bn&=67108863,d=Math.imul(Se,nt),i=(i=Math.imul(Se,ot))+Math.imul(ie,nt)|0,m=Math.imul(ie,ot),d=d+Math.imul(Ee,ut)|0,i=(i=i+Math.imul(Ee,st)|0)+Math.imul(ue,ut)|0,m=m+Math.imul(ue,st)|0,d=d+Math.imul(ae,rt)|0,i=(i=i+Math.imul(ae,Ge)|0)+Math.imul(de,rt)|0,m=m+Math.imul(de,Ge)|0,d=d+Math.imul(se,qe)|0,i=(i=i+Math.imul(se,We)|0)+Math.imul(he,qe)|0,m=m+Math.imul(he,We)|0;var dn=(A+(d=d+Math.imul(z,ft)|0)|0)+((8191&(i=(i=i+Math.imul(z,Ue)|0)+Math.imul(J,ft)|0))<<13)|0;A=((m=m+Math.imul(J,Ue)|0)+(i>>>13)|0)+(dn>>>26)|0,dn&=67108863,d=Math.imul(Z,nt),i=(i=Math.imul(Z,ot))+Math.imul(le,nt)|0,m=Math.imul(le,ot),d=d+Math.imul(Se,ut)|0,i=(i=i+Math.imul(Se,st)|0)+Math.imul(ie,ut)|0,m=m+Math.imul(ie,st)|0,d=d+Math.imul(Ee,rt)|0,i=(i=i+Math.imul(Ee,Ge)|0)+Math.imul(ue,rt)|0,m=m+Math.imul(ue,Ge)|0,d=d+Math.imul(ae,qe)|0,i=(i=i+Math.imul(ae,We)|0)+Math.imul(de,qe)|0,m=m+Math.imul(de,We)|0,d=d+Math.imul(se,ft)|0,i=(i=i+Math.imul(se,Ue)|0)+Math.imul(he,ft)|0,m=m+Math.imul(he,Ue)|0;var pn=(A+(d=d+Math.imul(z,gt)|0)|0)+((8191&(i=(i=i+Math.imul(z,it)|0)+Math.imul(J,gt)|0))<<13)|0;A=((m=m+Math.imul(J,it)|0)+(i>>>13)|0)+(pn>>>26)|0,pn&=67108863,d=Math.imul(we,nt),i=(i=Math.imul(we,ot))+Math.imul(Te,nt)|0,m=Math.imul(Te,ot),d=d+Math.imul(Z,ut)|0,i=(i=i+Math.imul(Z,st)|0)+Math.imul(le,ut)|0,m=m+Math.imul(le,st)|0,d=d+Math.imul(Se,rt)|0,i=(i=i+Math.imul(Se,Ge)|0)+Math.imul(ie,rt)|0,m=m+Math.imul(ie,Ge)|0,d=d+Math.imul(Ee,qe)|0,i=(i=i+Math.imul(Ee,We)|0)+Math.imul(ue,qe)|0,m=m+Math.imul(ue,We)|0,d=d+Math.imul(ae,ft)|0,i=(i=i+Math.imul(ae,Ue)|0)+Math.imul(de,ft)|0,m=m+Math.imul(de,Ue)|0,d=d+Math.imul(se,gt)|0,i=(i=i+Math.imul(se,it)|0)+Math.imul(he,gt)|0,m=m+Math.imul(he,it)|0;var In=(A+(d=d+Math.imul(z,lt)|0)|0)+((8191&(i=(i=i+Math.imul(z,ze)|0)+Math.imul(J,lt)|0))<<13)|0;A=((m=m+Math.imul(J,ze)|0)+(i>>>13)|0)+(In>>>26)|0,In&=67108863,d=Math.imul(Ne,nt),i=(i=Math.imul(Ne,ot))+Math.imul(Me,nt)|0,m=Math.imul(Me,ot),d=d+Math.imul(we,ut)|0,i=(i=i+Math.imul(we,st)|0)+Math.imul(Te,ut)|0,m=m+Math.imul(Te,st)|0,d=d+Math.imul(Z,rt)|0,i=(i=i+Math.imul(Z,Ge)|0)+Math.imul(le,rt)|0,m=m+Math.imul(le,Ge)|0,d=d+Math.imul(Se,qe)|0,i=(i=i+Math.imul(Se,We)|0)+Math.imul(ie,qe)|0,m=m+Math.imul(ie,We)|0,d=d+Math.imul(Ee,ft)|0,i=(i=i+Math.imul(Ee,Ue)|0)+Math.imul(ue,ft)|0,m=m+Math.imul(ue,Ue)|0,d=d+Math.imul(ae,gt)|0,i=(i=i+Math.imul(ae,it)|0)+Math.imul(de,gt)|0,m=m+Math.imul(de,it)|0,d=d+Math.imul(se,lt)|0,i=(i=i+Math.imul(se,ze)|0)+Math.imul(he,lt)|0,m=m+Math.imul(he,ze)|0;var rn=(A+(d=d+Math.imul(z,dt)|0)|0)+((8191&(i=(i=i+Math.imul(z,Xe)|0)+Math.imul(J,dt)|0))<<13)|0;A=((m=m+Math.imul(J,Xe)|0)+(i>>>13)|0)+(rn>>>26)|0,rn&=67108863,d=Math.imul(De,nt),i=(i=Math.imul(De,ot))+Math.imul(Fe,nt)|0,m=Math.imul(Fe,ot),d=d+Math.imul(Ne,ut)|0,i=(i=i+Math.imul(Ne,st)|0)+Math.imul(Me,ut)|0,m=m+Math.imul(Me,st)|0,d=d+Math.imul(we,rt)|0,i=(i=i+Math.imul(we,Ge)|0)+Math.imul(Te,rt)|0,m=m+Math.imul(Te,Ge)|0,d=d+Math.imul(Z,qe)|0,i=(i=i+Math.imul(Z,We)|0)+Math.imul(le,qe)|0,m=m+Math.imul(le,We)|0,d=d+Math.imul(Se,ft)|0,i=(i=i+Math.imul(Se,Ue)|0)+Math.imul(ie,ft)|0,m=m+Math.imul(ie,Ue)|0,d=d+Math.imul(Ee,gt)|0,i=(i=i+Math.imul(Ee,it)|0)+Math.imul(ue,gt)|0,m=m+Math.imul(ue,it)|0,d=d+Math.imul(ae,lt)|0,i=(i=i+Math.imul(ae,ze)|0)+Math.imul(de,lt)|0,m=m+Math.imul(de,ze)|0,d=d+Math.imul(se,dt)|0,i=(i=i+Math.imul(se,Xe)|0)+Math.imul(he,dt)|0,m=m+Math.imul(he,Xe)|0;var Mn=(A+(d=d+Math.imul(z,Qe)|0)|0)+((8191&(i=(i=i+Math.imul(z,Ze)|0)+Math.imul(J,Qe)|0))<<13)|0;A=((m=m+Math.imul(J,Ze)|0)+(i>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,d=Math.imul(Ve,nt),i=(i=Math.imul(Ve,ot))+Math.imul(Ke,nt)|0,m=Math.imul(Ke,ot),d=d+Math.imul(De,ut)|0,i=(i=i+Math.imul(De,st)|0)+Math.imul(Fe,ut)|0,m=m+Math.imul(Fe,st)|0,d=d+Math.imul(Ne,rt)|0,i=(i=i+Math.imul(Ne,Ge)|0)+Math.imul(Me,rt)|0,m=m+Math.imul(Me,Ge)|0,d=d+Math.imul(we,qe)|0,i=(i=i+Math.imul(we,We)|0)+Math.imul(Te,qe)|0,m=m+Math.imul(Te,We)|0,d=d+Math.imul(Z,ft)|0,i=(i=i+Math.imul(Z,Ue)|0)+Math.imul(le,ft)|0,m=m+Math.imul(le,Ue)|0,d=d+Math.imul(Se,gt)|0,i=(i=i+Math.imul(Se,it)|0)+Math.imul(ie,gt)|0,m=m+Math.imul(ie,it)|0,d=d+Math.imul(Ee,lt)|0,i=(i=i+Math.imul(Ee,ze)|0)+Math.imul(ue,lt)|0,m=m+Math.imul(ue,ze)|0,d=d+Math.imul(ae,dt)|0,i=(i=i+Math.imul(ae,Xe)|0)+Math.imul(de,dt)|0,m=m+Math.imul(de,Xe)|0,d=d+Math.imul(se,Qe)|0,i=(i=i+Math.imul(se,Ze)|0)+Math.imul(he,Qe)|0,m=m+Math.imul(he,Ze)|0;var $t=(A+(d=d+Math.imul(z,Je)|0)|0)+((8191&(i=(i=i+Math.imul(z,at)|0)+Math.imul(J,Je)|0))<<13)|0;A=((m=m+Math.imul(J,at)|0)+(i>>>13)|0)+($t>>>26)|0,$t&=67108863,d=Math.imul(Ve,ut),i=(i=Math.imul(Ve,st))+Math.imul(Ke,ut)|0,m=Math.imul(Ke,st),d=d+Math.imul(De,rt)|0,i=(i=i+Math.imul(De,Ge)|0)+Math.imul(Fe,rt)|0,m=m+Math.imul(Fe,Ge)|0,d=d+Math.imul(Ne,qe)|0,i=(i=i+Math.imul(Ne,We)|0)+Math.imul(Me,qe)|0,m=m+Math.imul(Me,We)|0,d=d+Math.imul(we,ft)|0,i=(i=i+Math.imul(we,Ue)|0)+Math.imul(Te,ft)|0,m=m+Math.imul(Te,Ue)|0,d=d+Math.imul(Z,gt)|0,i=(i=i+Math.imul(Z,it)|0)+Math.imul(le,gt)|0,m=m+Math.imul(le,it)|0,d=d+Math.imul(Se,lt)|0,i=(i=i+Math.imul(Se,ze)|0)+Math.imul(ie,lt)|0,m=m+Math.imul(ie,ze)|0,d=d+Math.imul(Ee,dt)|0,i=(i=i+Math.imul(Ee,Xe)|0)+Math.imul(ue,dt)|0,m=m+Math.imul(ue,Xe)|0,d=d+Math.imul(ae,Qe)|0,i=(i=i+Math.imul(ae,Ze)|0)+Math.imul(de,Qe)|0,m=m+Math.imul(de,Ze)|0;var Nt=(A+(d=d+Math.imul(se,Je)|0)|0)+((8191&(i=(i=i+Math.imul(se,at)|0)+Math.imul(he,Je)|0))<<13)|0;A=((m=m+Math.imul(he,at)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,d=Math.imul(Ve,rt),i=(i=Math.imul(Ve,Ge))+Math.imul(Ke,rt)|0,m=Math.imul(Ke,Ge),d=d+Math.imul(De,qe)|0,i=(i=i+Math.imul(De,We)|0)+Math.imul(Fe,qe)|0,m=m+Math.imul(Fe,We)|0,d=d+Math.imul(Ne,ft)|0,i=(i=i+Math.imul(Ne,Ue)|0)+Math.imul(Me,ft)|0,m=m+Math.imul(Me,Ue)|0,d=d+Math.imul(we,gt)|0,i=(i=i+Math.imul(we,it)|0)+Math.imul(Te,gt)|0,m=m+Math.imul(Te,it)|0,d=d+Math.imul(Z,lt)|0,i=(i=i+Math.imul(Z,ze)|0)+Math.imul(le,lt)|0,m=m+Math.imul(le,ze)|0,d=d+Math.imul(Se,dt)|0,i=(i=i+Math.imul(Se,Xe)|0)+Math.imul(ie,dt)|0,m=m+Math.imul(ie,Xe)|0,d=d+Math.imul(Ee,Qe)|0,i=(i=i+Math.imul(Ee,Ze)|0)+Math.imul(ue,Qe)|0,m=m+Math.imul(ue,Ze)|0;var xn=(A+(d=d+Math.imul(ae,Je)|0)|0)+((8191&(i=(i=i+Math.imul(ae,at)|0)+Math.imul(de,Je)|0))<<13)|0;A=((m=m+Math.imul(de,at)|0)+(i>>>13)|0)+(xn>>>26)|0,xn&=67108863,d=Math.imul(Ve,qe),i=(i=Math.imul(Ve,We))+Math.imul(Ke,qe)|0,m=Math.imul(Ke,We),d=d+Math.imul(De,ft)|0,i=(i=i+Math.imul(De,Ue)|0)+Math.imul(Fe,ft)|0,m=m+Math.imul(Fe,Ue)|0,d=d+Math.imul(Ne,gt)|0,i=(i=i+Math.imul(Ne,it)|0)+Math.imul(Me,gt)|0,m=m+Math.imul(Me,it)|0,d=d+Math.imul(we,lt)|0,i=(i=i+Math.imul(we,ze)|0)+Math.imul(Te,lt)|0,m=m+Math.imul(Te,ze)|0,d=d+Math.imul(Z,dt)|0,i=(i=i+Math.imul(Z,Xe)|0)+Math.imul(le,dt)|0,m=m+Math.imul(le,Xe)|0,d=d+Math.imul(Se,Qe)|0,i=(i=i+Math.imul(Se,Ze)|0)+Math.imul(ie,Qe)|0,m=m+Math.imul(ie,Ze)|0;var wn=(A+(d=d+Math.imul(Ee,Je)|0)|0)+((8191&(i=(i=i+Math.imul(Ee,at)|0)+Math.imul(ue,Je)|0))<<13)|0;A=((m=m+Math.imul(ue,at)|0)+(i>>>13)|0)+(wn>>>26)|0,wn&=67108863,d=Math.imul(Ve,ft),i=(i=Math.imul(Ve,Ue))+Math.imul(Ke,ft)|0,m=Math.imul(Ke,Ue),d=d+Math.imul(De,gt)|0,i=(i=i+Math.imul(De,it)|0)+Math.imul(Fe,gt)|0,m=m+Math.imul(Fe,it)|0,d=d+Math.imul(Ne,lt)|0,i=(i=i+Math.imul(Ne,ze)|0)+Math.imul(Me,lt)|0,m=m+Math.imul(Me,ze)|0,d=d+Math.imul(we,dt)|0,i=(i=i+Math.imul(we,Xe)|0)+Math.imul(Te,dt)|0,m=m+Math.imul(Te,Xe)|0,d=d+Math.imul(Z,Qe)|0,i=(i=i+Math.imul(Z,Ze)|0)+Math.imul(le,Qe)|0,m=m+Math.imul(le,Ze)|0;var _n=(A+(d=d+Math.imul(Se,Je)|0)|0)+((8191&(i=(i=i+Math.imul(Se,at)|0)+Math.imul(ie,Je)|0))<<13)|0;A=((m=m+Math.imul(ie,at)|0)+(i>>>13)|0)+(_n>>>26)|0,_n&=67108863,d=Math.imul(Ve,gt),i=(i=Math.imul(Ve,it))+Math.imul(Ke,gt)|0,m=Math.imul(Ke,it),d=d+Math.imul(De,lt)|0,i=(i=i+Math.imul(De,ze)|0)+Math.imul(Fe,lt)|0,m=m+Math.imul(Fe,ze)|0,d=d+Math.imul(Ne,dt)|0,i=(i=i+Math.imul(Ne,Xe)|0)+Math.imul(Me,dt)|0,m=m+Math.imul(Me,Xe)|0,d=d+Math.imul(we,Qe)|0,i=(i=i+Math.imul(we,Ze)|0)+Math.imul(Te,Qe)|0,m=m+Math.imul(Te,Ze)|0;var xt=(A+(d=d+Math.imul(Z,Je)|0)|0)+((8191&(i=(i=i+Math.imul(Z,at)|0)+Math.imul(le,Je)|0))<<13)|0;A=((m=m+Math.imul(le,at)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,d=Math.imul(Ve,lt),i=(i=Math.imul(Ve,ze))+Math.imul(Ke,lt)|0,m=Math.imul(Ke,ze),d=d+Math.imul(De,dt)|0,i=(i=i+Math.imul(De,Xe)|0)+Math.imul(Fe,dt)|0,m=m+Math.imul(Fe,Xe)|0,d=d+Math.imul(Ne,Qe)|0,i=(i=i+Math.imul(Ne,Ze)|0)+Math.imul(Me,Qe)|0,m=m+Math.imul(Me,Ze)|0;var Rn=(A+(d=d+Math.imul(we,Je)|0)|0)+((8191&(i=(i=i+Math.imul(we,at)|0)+Math.imul(Te,Je)|0))<<13)|0;A=((m=m+Math.imul(Te,at)|0)+(i>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,d=Math.imul(Ve,dt),i=(i=Math.imul(Ve,Xe))+Math.imul(Ke,dt)|0,m=Math.imul(Ke,Xe),d=d+Math.imul(De,Qe)|0,i=(i=i+Math.imul(De,Ze)|0)+Math.imul(Fe,Qe)|0,m=m+Math.imul(Fe,Ze)|0;var Jt=(A+(d=d+Math.imul(Ne,Je)|0)|0)+((8191&(i=(i=i+Math.imul(Ne,at)|0)+Math.imul(Me,Je)|0))<<13)|0;A=((m=m+Math.imul(Me,at)|0)+(i>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,d=Math.imul(Ve,Qe),i=(i=Math.imul(Ve,Ze))+Math.imul(Ke,Qe)|0,m=Math.imul(Ke,Ze);var tn=(A+(d=d+Math.imul(De,Je)|0)|0)+((8191&(i=(i=i+Math.imul(De,at)|0)+Math.imul(Fe,Je)|0))<<13)|0;A=((m=m+Math.imul(Fe,at)|0)+(i>>>13)|0)+(tn>>>26)|0,tn&=67108863;var Sn=(A+(d=Math.imul(Ve,Je))|0)+((8191&(i=(i=Math.imul(Ve,at))+Math.imul(Ke,Je)|0))<<13)|0;return A=((m=Math.imul(Ke,at))+(i>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,M[0]=un,M[1]=Vt,M[2]=Ht,M[3]=bn,M[4]=dn,M[5]=pn,M[6]=In,M[7]=rn,M[8]=Mn,M[9]=$t,M[10]=Nt,M[11]=xn,M[12]=wn,M[13]=_n,M[14]=xt,M[15]=Rn,M[16]=Jt,M[17]=tn,M[18]=Sn,0!==A&&(M[19]=A,l.length++),l};function k(R,r,s){return(new O).mulp(R,r,s)}function O(R,r){this.x=R,this.y=r}Math.imul||(I=w),u.prototype.mulTo=function(r,s){var a=this.length+r.length;return 10===this.length&&10===r.length?I(this,r,s):a<63?w(this,r,s):a<1024?function(R,r,s){s.negative=r.negative^R.negative,s.length=R.length+r.length;for(var l=0,a=0,f=0;f<s.length-1;f++){var M=a;a=0;for(var A=67108863&l,d=Math.min(f,r.length-1),i=Math.max(0,f-R.length+1);i<=d;i++){var J=(0|R.words[f-i])*(0|r.words[i]),ce=67108863&J;A=67108863&(ce=ce+A|0),a+=(M=(M=M+(J/67108864|0)|0)+(ce>>>26)|0)>>>26,M&=67108863}s.words[f]=A,l=M,M=a}return 0!==l?s.words[f]=l:s.length--,s.strip()}(this,r,s):k(this,r,s)},O.prototype.makeRBT=function(r){for(var s=new Array(r),l=u.prototype._countBits(r)-1,a=0;a<r;a++)s[a]=this.revBin(a,l,r);return s},O.prototype.revBin=function(r,s,l){if(0===r||r===l-1)return r;for(var a=0,f=0;f<s;f++)a|=(1&r)<<s-f-1,r>>=1;return a},O.prototype.permute=function(r,s,l,a,f,M){for(var A=0;A<M;A++)a[A]=s[r[A]],f[A]=l[r[A]]},O.prototype.transform=function(r,s,l,a,f,M){this.permute(M,r,s,l,a,f);for(var A=1;A<f;A<<=1)for(var d=A<<1,i=Math.cos(2*Math.PI/d),m=Math.sin(2*Math.PI/d),q=0;q<f;q+=d)for(var z=i,J=m,ce=0;ce<A;ce++){var se=l[q+ce],he=a[q+ce],ve=l[q+ce+A],ae=a[q+ce+A],de=z*ve-J*ae;ae=z*ae+J*ve,l[q+ce]=se+(ve=de),a[q+ce]=he+ae,l[q+ce+A]=se-ve,a[q+ce+A]=he-ae,ce!==d&&(de=i*z-m*J,J=i*J+m*z,z=de)}},O.prototype.guessLen13b=function(r,s){var l=1|Math.max(s,r),a=1&l,f=0;for(l=l/2|0;l;l>>>=1)f++;return 1<<f+1+a},O.prototype.conjugate=function(r,s,l){if(!(l<=1))for(var a=0;a<l/2;a++){var f=r[a];r[a]=r[l-a-1],r[l-a-1]=f,f=s[a],s[a]=-s[l-a-1],s[l-a-1]=-f}},O.prototype.normalize13b=function(r,s){for(var l=0,a=0;a<s/2;a++){var f=8192*Math.round(r[2*a+1]/s)+Math.round(r[2*a]/s)+l;r[a]=67108863&f,l=f<67108864?0:f/67108864|0}return r},O.prototype.convert13b=function(r,s,l,a){for(var f=0,M=0;M<s;M++)l[2*M]=8191&(f+=0|r[M]),l[2*M+1]=8191&(f>>>=13),f>>>=13;for(M=2*s;M<a;++M)l[M]=0;y(0===f),y(0==(-8192&f))},O.prototype.stub=function(r){for(var s=new Array(r),l=0;l<r;l++)s[l]=0;return s},O.prototype.mulp=function(r,s,l){var a=2*this.guessLen13b(r.length,s.length),f=this.makeRBT(a),M=this.stub(a),A=new Array(a),d=new Array(a),i=new Array(a),m=new Array(a),q=new Array(a),z=new Array(a),J=l.words;J.length=a,this.convert13b(r.words,r.length,A,a),this.convert13b(s.words,s.length,m,a),this.transform(A,M,d,i,a,f),this.transform(m,M,q,z,a,f);for(var ce=0;ce<a;ce++){var se=d[ce]*q[ce]-i[ce]*z[ce];i[ce]=d[ce]*z[ce]+i[ce]*q[ce],d[ce]=se}return this.conjugate(d,i,a),this.transform(d,i,J,M,a,f),this.conjugate(J,M,a),this.normalize13b(J,a),l.negative=r.negative^s.negative,l.length=r.length+s.length,l.strip()},u.prototype.mul=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),this.mulTo(r,s)},u.prototype.mulf=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),k(this,r,s)},u.prototype.imul=function(r){return this.clone().mulTo(r,this)},u.prototype.imuln=function(r){y("number"==typeof r),y(r<67108864);for(var s=0,l=0;l<this.length;l++){var a=(0|this.words[l])*r,f=(67108863&a)+(67108863&s);s>>=26,s+=a/67108864|0,s+=f>>>26,this.words[l]=67108863&f}return 0!==s&&(this.words[l]=s,this.length++),this},u.prototype.muln=function(r){return this.clone().imuln(r)},u.prototype.sqr=function(){return this.mul(this)},u.prototype.isqr=function(){return this.imul(this.clone())},u.prototype.pow=function(r){var s=function(R){for(var r=new Array(R.bitLength()),s=0;s<r.length;s++){var a=s%26;r[s]=(R.words[s/26|0]&1<<a)>>>a}return r}(r);if(0===s.length)return new u(1);for(var l=this,a=0;a<s.length&&0===s[a];a++,l=l.sqr());if(++a<s.length)for(var f=l.sqr();a<s.length;a++,f=f.sqr())0!==s[a]&&(l=l.mul(f));return l},u.prototype.iushln=function(r){y("number"==typeof r&&r>=0);var f,s=r%26,l=(r-s)/26,a=67108863>>>26-s<<26-s;if(0!==s){var M=0;for(f=0;f<this.length;f++){var A=this.words[f]&a;this.words[f]=(0|this.words[f])-A<<s|M,M=A>>>26-s}M&&(this.words[f]=M,this.length++)}if(0!==l){for(f=this.length-1;f>=0;f--)this.words[f+l]=this.words[f];for(f=0;f<l;f++)this.words[f]=0;this.length+=l}return this.strip()},u.prototype.ishln=function(r){return y(0===this.negative),this.iushln(r)},u.prototype.iushrn=function(r,s,l){var a;y("number"==typeof r&&r>=0),a=s?(s-s%26)/26:0;var f=r%26,M=Math.min((r-f)/26,this.length),A=67108863^67108863>>>f<<f,d=l;if(a-=M,a=Math.max(0,a),d){for(var i=0;i<M;i++)d.words[i]=this.words[i];d.length=M}if(0!==M)if(this.length>M)for(this.length-=M,i=0;i<this.length;i++)this.words[i]=this.words[i+M];else this.words[0]=0,this.length=1;var m=0;for(i=this.length-1;i>=0&&(0!==m||i>=a);i--){var q=0|this.words[i];this.words[i]=m<<26-f|q>>>f,m=q&A}return d&&0!==m&&(d.words[d.length++]=m),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},u.prototype.ishrn=function(r,s,l){return y(0===this.negative),this.iushrn(r,s,l)},u.prototype.shln=function(r){return this.clone().ishln(r)},u.prototype.ushln=function(r){return this.clone().iushln(r)},u.prototype.shrn=function(r){return this.clone().ishrn(r)},u.prototype.ushrn=function(r){return this.clone().iushrn(r)},u.prototype.testn=function(r){y("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return!(this.length<=l||!(this.words[l]&1<<s))},u.prototype.imaskn=function(r){y("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return y(0===this.negative,"imaskn works only with positive numbers"),this.length<=l?this:(0!==s&&l++,this.length=Math.min(l,this.length),0!==s&&(this.words[this.length-1]&=67108863^67108863>>>s<<s),this.strip())},u.prototype.maskn=function(r){return this.clone().imaskn(r)},u.prototype.iaddn=function(r){return y("number"==typeof r),y(r<67108864),r<0?this.isubn(-r):0!==this.negative?1===this.length&&(0|this.words[0])<r?(this.words[0]=r-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(r),this.negative=1,this):this._iaddn(r)},u.prototype._iaddn=function(r){this.words[0]+=r;for(var s=0;s<this.length&&this.words[s]>=67108864;s++)this.words[s]-=67108864,s===this.length-1?this.words[s+1]=1:this.words[s+1]++;return this.length=Math.max(this.length,s+1),this},u.prototype.isubn=function(r){if(y("number"==typeof r),y(r<67108864),r<0)return this.iaddn(-r);if(0!==this.negative)return this.negative=0,this.iaddn(r),this.negative=1,this;if(this.words[0]-=r,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var s=0;s<this.length&&this.words[s]<0;s++)this.words[s]+=67108864,this.words[s+1]-=1;return this.strip()},u.prototype.addn=function(r){return this.clone().iaddn(r)},u.prototype.subn=function(r){return this.clone().isubn(r)},u.prototype.iabs=function(){return this.negative=0,this},u.prototype.abs=function(){return this.clone().iabs()},u.prototype._ishlnsubmul=function(r,s,l){var f;this._expand(r.length+l);var M,A=0;for(f=0;f<r.length;f++){M=(0|this.words[f+l])+A;var d=(0|r.words[f])*s;A=((M-=67108863&d)>>26)-(d/67108864|0),this.words[f+l]=67108863&M}for(;f<this.length-l;f++)A=(M=(0|this.words[f+l])+A)>>26,this.words[f+l]=67108863&M;if(0===A)return this.strip();for(y(-1===A),A=0,f=0;f<this.length;f++)A=(M=-(0|this.words[f])+A)>>26,this.words[f]=67108863&M;return this.negative=1,this.strip()},u.prototype._wordDiv=function(r,s){var l,a=this.clone(),f=r,M=0|f.words[f.length-1];0!=(l=26-this._countBits(M))&&(f=f.ushln(l),a.iushln(l),M=0|f.words[f.length-1]);var i,d=a.length-f.length;if("mod"!==s){(i=new u(null)).length=d+1,i.words=new Array(i.length);for(var m=0;m<i.length;m++)i.words[m]=0}var q=a.clone()._ishlnsubmul(f,1,d);0===q.negative&&(a=q,i&&(i.words[d]=1));for(var z=d-1;z>=0;z--){var J=67108864*(0|a.words[f.length+z])+(0|a.words[f.length+z-1]);for(J=Math.min(J/M|0,67108863),a._ishlnsubmul(f,J,z);0!==a.negative;)J--,a.negative=0,a._ishlnsubmul(f,1,z),a.isZero()||(a.negative^=1);i&&(i.words[z]=J)}return i&&i.strip(),a.strip(),"div"!==s&&0!==l&&a.iushrn(l),{div:i||null,mod:a}},u.prototype.divmod=function(r,s,l){return y(!r.isZero()),this.isZero()?{div:new u(0),mod:new u(0)}:0!==this.negative&&0===r.negative?(M=this.neg().divmod(r,s),"mod"!==s&&(a=M.div.neg()),"div"!==s&&(f=M.mod.neg(),l&&0!==f.negative&&f.iadd(r)),{div:a,mod:f}):0===this.negative&&0!==r.negative?(M=this.divmod(r.neg(),s),"mod"!==s&&(a=M.div.neg()),{div:a,mod:M.mod}):0!=(this.negative&r.negative)?(M=this.neg().divmod(r.neg(),s),"div"!==s&&(f=M.mod.neg(),l&&0!==f.negative&&f.isub(r)),{div:M.div,mod:f}):r.length>this.length||this.cmp(r)<0?{div:new u(0),mod:this}:1===r.length?"div"===s?{div:this.divn(r.words[0]),mod:null}:"mod"===s?{div:null,mod:new u(this.modn(r.words[0]))}:{div:this.divn(r.words[0]),mod:new u(this.modn(r.words[0]))}:this._wordDiv(r,s);var a,f,M},u.prototype.div=function(r){return this.divmod(r,"div",!1).div},u.prototype.mod=function(r){return this.divmod(r,"mod",!1).mod},u.prototype.umod=function(r){return this.divmod(r,"mod",!0).mod},u.prototype.divRound=function(r){var s=this.divmod(r);if(s.mod.isZero())return s.div;var l=0!==s.div.negative?s.mod.isub(r):s.mod,a=r.ushrn(1),f=r.andln(1),M=l.cmp(a);return M<0||1===f&&0===M?s.div:0!==s.div.negative?s.div.isubn(1):s.div.iaddn(1)},u.prototype.modn=function(r){y(r<=67108863);for(var s=(1<<26)%r,l=0,a=this.length-1;a>=0;a--)l=(s*l+(0|this.words[a]))%r;return l},u.prototype.idivn=function(r){y(r<=67108863);for(var s=0,l=this.length-1;l>=0;l--){var a=(0|this.words[l])+67108864*s;this.words[l]=a/r|0,s=a%r}return this.strip()},u.prototype.divn=function(r){return this.clone().idivn(r)},u.prototype.egcd=function(r){y(0===r.negative),y(!r.isZero());var s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),M=new u(0),A=new u(1),d=0;s.isEven()&&l.isEven();)s.iushrn(1),l.iushrn(1),++d;for(var i=l.clone(),m=s.clone();!s.isZero();){for(var q=0,z=1;0==(s.words[0]&z)&&q<26;++q,z<<=1);if(q>0)for(s.iushrn(q);q-- >0;)(a.isOdd()||f.isOdd())&&(a.iadd(i),f.isub(m)),a.iushrn(1),f.iushrn(1);for(var J=0,ce=1;0==(l.words[0]&ce)&&J<26;++J,ce<<=1);if(J>0)for(l.iushrn(J);J-- >0;)(M.isOdd()||A.isOdd())&&(M.iadd(i),A.isub(m)),M.iushrn(1),A.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(M),f.isub(A)):(l.isub(s),M.isub(a),A.isub(f))}return{a:M,b:A,gcd:l.iushln(d)}},u.prototype._invmp=function(r){y(0===r.negative),y(!r.isZero());var q,s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),M=l.clone();s.cmpn(1)>0&&l.cmpn(1)>0;){for(var A=0,d=1;0==(s.words[0]&d)&&A<26;++A,d<<=1);if(A>0)for(s.iushrn(A);A-- >0;)a.isOdd()&&a.iadd(M),a.iushrn(1);for(var i=0,m=1;0==(l.words[0]&m)&&i<26;++i,m<<=1);if(i>0)for(l.iushrn(i);i-- >0;)f.isOdd()&&f.iadd(M),f.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(f)):(l.isub(s),f.isub(a))}return(q=0===s.cmpn(1)?a:f).cmpn(0)<0&&q.iadd(r),q},u.prototype.gcd=function(r){if(this.isZero())return r.abs();if(r.isZero())return this.abs();var s=this.clone(),l=r.clone();s.negative=0,l.negative=0;for(var a=0;s.isEven()&&l.isEven();a++)s.iushrn(1),l.iushrn(1);for(;;){for(;s.isEven();)s.iushrn(1);for(;l.isEven();)l.iushrn(1);var f=s.cmp(l);if(f<0){var M=s;s=l,l=M}else if(0===f||0===l.cmpn(1))break;s.isub(l)}return l.iushln(a)},u.prototype.invm=function(r){return this.egcd(r).a.umod(r)},u.prototype.isEven=function(){return 0==(1&this.words[0])},u.prototype.isOdd=function(){return 1==(1&this.words[0])},u.prototype.andln=function(r){return this.words[0]&r},u.prototype.bincn=function(r){y("number"==typeof r);var s=r%26,l=(r-s)/26,a=1<<s;if(this.length<=l)return this._expand(l+1),this.words[l]|=a,this;for(var f=a,M=l;0!==f&&M<this.length;M++){var A=0|this.words[M];f=(A+=f)>>>26,this.words[M]=A&=67108863}return 0!==f&&(this.words[M]=f,this.length++),this},u.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},u.prototype.cmpn=function(r){var l,s=r<0;if(0!==this.negative&&!s)return-1;if(0===this.negative&&s)return 1;if(this.strip(),this.length>1)l=1;else{s&&(r=-r),y(r<=67108863,"Number is too big");var a=0|this.words[0];l=a===r?0:a<r?-1:1}return 0!==this.negative?0|-l:l},u.prototype.cmp=function(r){if(0!==this.negative&&0===r.negative)return-1;if(0===this.negative&&0!==r.negative)return 1;var s=this.ucmp(r);return 0!==this.negative?0|-s:s},u.prototype.ucmp=function(r){if(this.length>r.length)return 1;if(this.length<r.length)return-1;for(var s=0,l=this.length-1;l>=0;l--){var a=0|this.words[l],f=0|r.words[l];if(a!==f){a<f?s=-1:a>f&&(s=1);break}}return s},u.prototype.gtn=function(r){return 1===this.cmpn(r)},u.prototype.gt=function(r){return 1===this.cmp(r)},u.prototype.gten=function(r){return this.cmpn(r)>=0},u.prototype.gte=function(r){return this.cmp(r)>=0},u.prototype.ltn=function(r){return-1===this.cmpn(r)},u.prototype.lt=function(r){return-1===this.cmp(r)},u.prototype.lten=function(r){return this.cmpn(r)<=0},u.prototype.lte=function(r){return this.cmp(r)<=0},u.prototype.eqn=function(r){return 0===this.cmpn(r)},u.prototype.eq=function(r){return 0===this.cmp(r)},u.red=function(r){return new K(r)},u.prototype.toRed=function(r){return y(!this.red,"Already a number in reduction context"),y(0===this.negative,"red works only with positives"),r.convertTo(this)._forceRed(r)},u.prototype.fromRed=function(){return y(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},u.prototype._forceRed=function(r){return this.red=r,this},u.prototype.forceRed=function(r){return y(!this.red,"Already a number in reduction context"),this._forceRed(r)},u.prototype.redAdd=function(r){return y(this.red,"redAdd works only with red numbers"),this.red.add(this,r)},u.prototype.redIAdd=function(r){return y(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,r)},u.prototype.redSub=function(r){return y(this.red,"redSub works only with red numbers"),this.red.sub(this,r)},u.prototype.redISub=function(r){return y(this.red,"redISub works only with red numbers"),this.red.isub(this,r)},u.prototype.redShl=function(r){return y(this.red,"redShl works only with red numbers"),this.red.shl(this,r)},u.prototype.redMul=function(r){return y(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.mul(this,r)},u.prototype.redIMul=function(r){return y(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.imul(this,r)},u.prototype.redSqr=function(){return y(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},u.prototype.redISqr=function(){return y(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},u.prototype.redSqrt=function(){return y(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},u.prototype.redInvm=function(){return y(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},u.prototype.redNeg=function(){return y(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},u.prototype.redPow=function(r){return y(this.red&&!r.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,r)};var V={k256:null,p224:null,p192:null,p25519:null};function B(R,r){this.name=R,this.p=new u(r,16),this.n=this.p.bitLength(),this.k=new u(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function U(){B.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function j(){B.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function W(){B.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function X(){B.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function K(R){if("string"==typeof R){var r=u._prime(R);this.m=r.p,this.prime=r}else y(R.gtn(1),"modulus must be greater than 1"),this.m=R,this.prime=null}function ge(R){K.call(this,R),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new u(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}B.prototype._tmp=function(){var r=new u(null);return r.words=new Array(Math.ceil(this.n/13)),r},B.prototype.ireduce=function(r){var l,s=r;do{this.split(s,this.tmp),l=(s=(s=this.imulK(s)).iadd(this.tmp)).bitLength()}while(l>this.n);var a=l<this.n?-1:s.ucmp(this.p);return 0===a?(s.words[0]=0,s.length=1):a>0?s.isub(this.p):void 0!==s.strip?s.strip():s._strip(),s},B.prototype.split=function(r,s){r.iushrn(this.n,0,s)},B.prototype.imulK=function(r){return r.imul(this.k)},x(U,B),U.prototype.split=function(r,s){for(var l=4194303,a=Math.min(r.length,9),f=0;f<a;f++)s.words[f]=r.words[f];if(s.length=a,r.length<=9)return r.words[0]=0,void(r.length=1);var M=r.words[9];for(s.words[s.length++]=M&l,f=10;f<r.length;f++){var A=0|r.words[f];r.words[f-10]=(A&l)<<4|M>>>22,M=A}r.words[f-10]=M>>>=22,r.length-=0===M&&r.length>10?10:9},U.prototype.imulK=function(r){r.words[r.length]=0,r.words[r.length+1]=0,r.length+=2;for(var s=0,l=0;l<r.length;l++){var a=0|r.words[l];r.words[l]=67108863&(s+=977*a),s=64*a+(s/67108864|0)}return 0===r.words[r.length-1]&&(r.length--,0===r.words[r.length-1]&&r.length--),r},x(j,B),x(W,B),x(X,B),X.prototype.imulK=function(r){for(var s=0,l=0;l<r.length;l++){var a=19*(0|r.words[l])+s,f=67108863&a;a>>>=26,r.words[l]=f,s=a}return 0!==s&&(r.words[r.length++]=s),r},u._prime=function(r){if(V[r])return V[r];var s;if("k256"===r)s=new U;else if("p224"===r)s=new j;else if("p192"===r)s=new W;else{if("p25519"!==r)throw new Error("Unknown prime "+r);s=new X}return V[r]=s,s},K.prototype._verify1=function(r){y(0===r.negative,"red works only with positives"),y(r.red,"red works only with red numbers")},K.prototype._verify2=function(r,s){y(0==(r.negative|s.negative),"red works only with positives"),y(r.red&&r.red===s.red,"red works only with red numbers")},K.prototype.imod=function(r){return this.prime?this.prime.ireduce(r)._forceRed(this):r.umod(this.m)._forceRed(this)},K.prototype.neg=function(r){return r.isZero()?r.clone():this.m.sub(r)._forceRed(this)},K.prototype.add=function(r,s){this._verify2(r,s);var l=r.add(s);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},K.prototype.iadd=function(r,s){this._verify2(r,s);var l=r.iadd(s);return l.cmp(this.m)>=0&&l.isub(this.m),l},K.prototype.sub=function(r,s){this._verify2(r,s);var l=r.sub(s);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},K.prototype.isub=function(r,s){this._verify2(r,s);var l=r.isub(s);return l.cmpn(0)<0&&l.iadd(this.m),l},K.prototype.shl=function(r,s){return this._verify1(r),this.imod(r.ushln(s))},K.prototype.imul=function(r,s){return this._verify2(r,s),this.imod(r.imul(s))},K.prototype.mul=function(r,s){return this._verify2(r,s),this.imod(r.mul(s))},K.prototype.isqr=function(r){return this.imul(r,r.clone())},K.prototype.sqr=function(r){return this.mul(r,r)},K.prototype.sqrt=function(r){if(r.isZero())return r.clone();var s=this.m.andln(3);if(y(s%2==1),3===s){var l=this.m.add(new u(1)).iushrn(2);return this.pow(r,l)}for(var a=this.m.subn(1),f=0;!a.isZero()&&0===a.andln(1);)f++,a.iushrn(1);y(!a.isZero());var M=new u(1).toRed(this),A=M.redNeg(),d=this.m.subn(1).iushrn(1),i=this.m.bitLength();for(i=new u(2*i*i).toRed(this);0!==this.pow(i,d).cmp(A);)i.redIAdd(A);for(var m=this.pow(i,a),q=this.pow(r,a.addn(1).iushrn(1)),z=this.pow(r,a),J=f;0!==z.cmp(M);){for(var ce=z,se=0;0!==ce.cmp(M);se++)ce=ce.redSqr();y(se<J);var he=this.pow(m,new u(1).iushln(J-se-1));q=q.redMul(he),m=he.redSqr(),z=z.redMul(m),J=se}return q},K.prototype.invm=function(r){var s=r._invmp(this.m);return 0!==s.negative?(s.negative=0,this.imod(s).redNeg()):this.imod(s)},K.prototype.pow=function(r,s){if(s.isZero())return new u(1).toRed(this);if(0===s.cmpn(1))return r.clone();var a=new Array(16);a[0]=new u(1).toRed(this),a[1]=r;for(var f=2;f<a.length;f++)a[f]=this.mul(a[f-1],r);var M=a[0],A=0,d=0,i=s.bitLength()%26;for(0===i&&(i=26),f=s.length-1;f>=0;f--){for(var m=s.words[f],q=i-1;q>=0;q--){var z=m>>q&1;M!==a[0]&&(M=this.sqr(M)),0!==z||0!==A?(A<<=1,A|=z,(4==++d||0===f&&0===q)&&(M=this.mul(M,a[A]),d=0,A=0)):d=0}i=26}return M},K.prototype.convertTo=function(r){var s=r.umod(this.m);return s===r?s.clone():s},K.prototype.convertFrom=function(r){var s=r.clone();return s.red=null,s},u.mont=function(r){return new ge(r)},x(ge,K),ge.prototype.convertTo=function(r){return this.imod(r.ushln(this.shift))},ge.prototype.convertFrom=function(r){var s=this.imod(r.mul(this.rinv));return s.red=null,s},ge.prototype.imul=function(r,s){if(r.isZero()||s.isZero())return r.words[0]=0,r.length=1,r;var l=r.imul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),M=f;return f.cmp(this.m)>=0?M=f.isub(this.m):f.cmpn(0)<0&&(M=f.iadd(this.m)),M._forceRed(this)},ge.prototype.mul=function(r,s){if(r.isZero()||s.isZero())return new u(0)._forceRed(this);var l=r.mul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),M=f;return f.cmp(this.m)>=0?M=f.isub(this.m):f.cmpn(0)<0&&(M=f.iadd(this.m)),M._forceRed(this)},ge.prototype.invm=function(r){return this.imod(r._invmp(this.m).mul(this.r2))._forceRed(this)}}(Y=T.nmd(Y),this)},8686:(Y,L,T)=>{Y.exports=T(5454)},4054:(Y,L,T)=>{"use strict";var p=T(9471),N=T(5650),y=T(300),x=T(7790),u=T(4634),g=T(1929),C=T(2984),P=T(5886);Y.exports=function(v){return new Promise(function(_,b){var w=v.data,I=v.headers,D=v.responseType;p.isFormData(w)&&delete I["Content-Type"];var k=new XMLHttpRequest;if(v.auth){var O=v.auth.username||"",V=v.auth.password?unescape(encodeURIComponent(v.auth.password)):"";I.Authorization="Basic "+btoa(O+":"+V)}var B=u(v.baseURL,v.url);function U(){if(k){var W="getAllResponseHeaders"in k?g(k.getAllResponseHeaders()):null;N(_,b,{data:D&&"text"!==D&&"json"!==D?k.response:k.responseText,status:k.status,statusText:k.statusText,headers:W,config:v,request:k}),k=null}}if(k.open(v.method.toUpperCase(),x(B,v.params,v.paramsSerializer),!0),k.timeout=v.timeout,"onloadend"in k?k.onloadend=U:k.onreadystatechange=function(){!k||4!==k.readyState||0===k.status&&(!k.responseURL||0!==k.responseURL.indexOf("file:"))||setTimeout(U)},k.onabort=function(){!k||(b(P("Request aborted",v,"ECONNABORTED",k)),k=null)},k.onerror=function(){b(P("Network Error",v,null,k)),k=null},k.ontimeout=function(){var X="timeout of "+v.timeout+"ms exceeded";v.timeoutErrorMessage&&(X=v.timeoutErrorMessage),b(P(X,v,v.transitional&&v.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",k)),k=null},p.isStandardBrowserEnv()){var j=(v.withCredentials||C(B))&&v.xsrfCookieName?y.read(v.xsrfCookieName):void 0;j&&(I[v.xsrfHeaderName]=j)}"setRequestHeader"in k&&p.forEach(I,function(X,K){void 0===w&&"content-type"===K.toLowerCase()?delete I[K]:k.setRequestHeader(K,X)}),p.isUndefined(v.withCredentials)||(k.withCredentials=!!v.withCredentials),D&&"json"!==D&&(k.responseType=v.responseType),"function"==typeof v.onDownloadProgress&&k.addEventListener("progress",v.onDownloadProgress),"function"==typeof v.onUploadProgress&&k.upload&&k.upload.addEventListener("progress",v.onUploadProgress),v.cancelToken&&v.cancelToken.promise.then(function(X){!k||(k.abort(),b(X),k=null)}),w||(w=null),k.send(w)})}},5454:(Y,L,T)=>{"use strict";var p=T(9471),N=T(1533),y=T(3227),x=T(4018);function g(P){var E=new y(P),v=N(y.prototype.request,E);return p.extend(v,y.prototype,E),p.extend(v,E),v}var C=g(T(2567));C.Axios=y,C.create=function(E){return g(x(C.defaults,E))},C.Cancel=T(8728),C.CancelToken=T(701),C.isCancel=T(2130),C.all=function(E){return Promise.all(E)},C.spread=T(8908),C.isAxiosError=T(9541),Y.exports=C,Y.exports.default=C},8728:Y=>{"use strict";function L(T){this.message=T}L.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},L.prototype.__CANCEL__=!0,Y.exports=L},701:(Y,L,T)=>{"use strict";var p=T(8728);function N(y){if("function"!=typeof y)throw new TypeError("executor must be a function.");var x;this.promise=new Promise(function(C){x=C});var u=this;y(function(C){u.reason||(u.reason=new p(C),x(u.reason))})}N.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},N.source=function(){var x;return{token:new N(function(C){x=C}),cancel:x}},Y.exports=N},2130:Y=>{"use strict";Y.exports=function(T){return!(!T||!T.__CANCEL__)}},3227:(Y,L,T)=>{"use strict";var p=T(9471),N=T(7790),y=T(3976),x=T(6764),u=T(4018),g=T(3558),C=g.validators;function P(E){this.defaults=E,this.interceptors={request:new y,response:new y}}P.prototype.request=function(v){"string"==typeof v?(v=arguments[1]||{}).url=arguments[0]:v=v||{},(v=u(this.defaults,v)).method=v.method?v.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var h=v.transitional;void 0!==h&&g.assertOptions(h,{silentJSONParsing:C.transitional(C.boolean,"1.0.0"),forcedJSONParsing:C.transitional(C.boolean,"1.0.0"),clarifyTimeoutError:C.transitional(C.boolean,"1.0.0")},!1);var _=[],b=!0;this.interceptors.request.forEach(function(U){"function"==typeof U.runWhen&&!1===U.runWhen(v)||(b=b&&U.synchronous,_.unshift(U.fulfilled,U.rejected))});var I,w=[];if(this.interceptors.response.forEach(function(U){w.push(U.fulfilled,U.rejected)}),!b){var D=[x,void 0];for(Array.prototype.unshift.apply(D,_),D=D.concat(w),I=Promise.resolve(v);D.length;)I=I.then(D.shift(),D.shift());return I}for(var k=v;_.length;){var O=_.shift(),V=_.shift();try{k=O(k)}catch(B){V(B);break}}try{I=x(k)}catch(B){return Promise.reject(B)}for(;w.length;)I=I.then(w.shift(),w.shift());return I},P.prototype.getUri=function(v){return v=u(this.defaults,v),N(v.url,v.params,v.paramsSerializer).replace(/^\?/,"")},p.forEach(["delete","get","head","options"],function(v){P.prototype[v]=function(h,_){return this.request(u(_||{},{method:v,url:h,data:(_||{}).data}))}}),p.forEach(["post","put","patch"],function(v){P.prototype[v]=function(h,_,b){return this.request(u(b||{},{method:v,url:h,data:_}))}}),Y.exports=P},3976:(Y,L,T)=>{"use strict";var p=T(9471);function N(){this.handlers=[]}N.prototype.use=function(x,u,g){return this.handlers.push({fulfilled:x,rejected:u,synchronous:!!g&&g.synchronous,runWhen:g?g.runWhen:null}),this.handlers.length-1},N.prototype.eject=function(x){this.handlers[x]&&(this.handlers[x]=null)},N.prototype.forEach=function(x){p.forEach(this.handlers,function(g){null!==g&&x(g)})},Y.exports=N},4634:(Y,L,T)=>{"use strict";var p=T(5164),N=T(1540);Y.exports=function(x,u){return x&&!p(u)?N(x,u):u}},5886:(Y,L,T)=>{"use strict";var p=T(9570);Y.exports=function(y,x,u,g,C){var P=new Error(y);return p(P,x,u,g,C)}},6764:(Y,L,T)=>{"use strict";var p=T(9471),N=T(4284),y=T(2130),x=T(2567);function u(g){g.cancelToken&&g.cancelToken.throwIfRequested()}Y.exports=function(C){return u(C),C.headers=C.headers||{},C.data=N.call(C,C.data,C.headers,C.transformRequest),C.headers=p.merge(C.headers.common||{},C.headers[C.method]||{},C.headers),p.forEach(["delete","get","head","post","put","patch","common"],function(v){delete C.headers[v]}),(C.adapter||x.adapter)(C).then(function(v){return u(C),v.data=N.call(C,v.data,v.headers,C.transformResponse),v},function(v){return y(v)||(u(C),v&&v.response&&(v.response.data=N.call(C,v.response.data,v.response.headers,C.transformResponse))),Promise.reject(v)})}},9570:Y=>{"use strict";Y.exports=function(T,p,N,y,x){return T.config=p,N&&(T.code=N),T.request=y,T.response=x,T.isAxiosError=!0,T.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},T}},4018:(Y,L,T)=>{"use strict";var p=T(9471);Y.exports=function(y,x){x=x||{};var u={},g=["url","method","data"],C=["headers","auth","proxy","params"],P=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],E=["validateStatus"];function v(w,I){return p.isPlainObject(w)&&p.isPlainObject(I)?p.merge(w,I):p.isPlainObject(I)?p.merge({},I):p.isArray(I)?I.slice():I}function h(w){p.isUndefined(x[w])?p.isUndefined(y[w])||(u[w]=v(void 0,y[w])):u[w]=v(y[w],x[w])}p.forEach(g,function(I){p.isUndefined(x[I])||(u[I]=v(void 0,x[I]))}),p.forEach(C,h),p.forEach(P,function(I){p.isUndefined(x[I])?p.isUndefined(y[I])||(u[I]=v(void 0,y[I])):u[I]=v(void 0,x[I])}),p.forEach(E,function(I){I in x?u[I]=v(y[I],x[I]):I in y&&(u[I]=v(void 0,y[I]))});var _=g.concat(C).concat(P).concat(E),b=Object.keys(y).concat(Object.keys(x)).filter(function(I){return-1===_.indexOf(I)});return p.forEach(b,h),u}},5650:(Y,L,T)=>{"use strict";var p=T(5886);Y.exports=function(y,x,u){var g=u.config.validateStatus;u.status&&g&&!g(u.status)?x(p("Request failed with status code "+u.status,u.config,null,u.request,u)):y(u)}},4284:(Y,L,T)=>{"use strict";var p=T(9471),N=T(2567);Y.exports=function(x,u,g){var C=this||N;return p.forEach(g,function(E){x=E.call(C,x,u)}),x}},2567:(Y,L,T)=>{"use strict";var p=T(9471),N=T(2196),y=T(9570),x={"Content-Type":"application/x-www-form-urlencoded"};function u(E,v){!p.isUndefined(E)&&p.isUndefined(E["Content-Type"])&&(E["Content-Type"]=v)}var E,P={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(E=T(4054)),E),transformRequest:[function(v,h){return N(h,"Accept"),N(h,"Content-Type"),p.isFormData(v)||p.isArrayBuffer(v)||p.isBuffer(v)||p.isStream(v)||p.isFile(v)||p.isBlob(v)?v:p.isArrayBufferView(v)?v.buffer:p.isURLSearchParams(v)?(u(h,"application/x-www-form-urlencoded;charset=utf-8"),v.toString()):p.isObject(v)||h&&"application/json"===h["Content-Type"]?(u(h,"application/json"),function(E,v,h){if(p.isString(E))try{return(0,JSON.parse)(E),p.trim(E)}catch(_){if("SyntaxError"!==_.name)throw _}return(0,JSON.stringify)(E)}(v)):v}],transformResponse:[function(v){var h=this.transitional,w=!(h&&h.silentJSONParsing)&&"json"===this.responseType;if(w||h&&h.forcedJSONParsing&&p.isString(v)&&v.length)try{return JSON.parse(v)}catch(I){if(w)throw"SyntaxError"===I.name?y(I,this,"E_JSON_PARSE"):I}return v}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(v){return v>=200&&v<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};p.forEach(["delete","get","head"],function(v){P.headers[v]={}}),p.forEach(["post","put","patch"],function(v){P.headers[v]=p.merge(x)}),Y.exports=P},1533:Y=>{"use strict";Y.exports=function(T,p){return function(){for(var y=new Array(arguments.length),x=0;x<y.length;x++)y[x]=arguments[x];return T.apply(p,y)}}},7790:(Y,L,T)=>{"use strict";var p=T(9471);function N(y){return encodeURIComponent(y).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}Y.exports=function(x,u,g){if(!u)return x;var C;if(g)C=g(u);else if(p.isURLSearchParams(u))C=u.toString();else{var P=[];p.forEach(u,function(h,_){null==h||(p.isArray(h)?_+="[]":h=[h],p.forEach(h,function(w){p.isDate(w)?w=w.toISOString():p.isObject(w)&&(w=JSON.stringify(w)),P.push(N(_)+"="+N(w))}))}),C=P.join("&")}if(C){var E=x.indexOf("#");-1!==E&&(x=x.slice(0,E)),x+=(-1===x.indexOf("?")?"?":"&")+C}return x}},1540:Y=>{"use strict";Y.exports=function(T,p){return p?T.replace(/\/+$/,"")+"/"+p.replace(/^\/+/,""):T}},300:(Y,L,T)=>{"use strict";var p=T(9471);Y.exports=p.isStandardBrowserEnv()?{write:function(x,u,g,C,P,E){var v=[];v.push(x+"="+encodeURIComponent(u)),p.isNumber(g)&&v.push("expires="+new Date(g).toGMTString()),p.isString(C)&&v.push("path="+C),p.isString(P)&&v.push("domain="+P),!0===E&&v.push("secure"),document.cookie=v.join("; ")},read:function(x){var u=document.cookie.match(new RegExp("(^|;\\s*)("+x+")=([^;]*)"));return u?decodeURIComponent(u[3]):null},remove:function(x){this.write(x,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},5164:Y=>{"use strict";Y.exports=function(T){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(T)}},9541:Y=>{"use strict";Y.exports=function(T){return"object"==typeof T&&!0===T.isAxiosError}},2984:(Y,L,T)=>{"use strict";var p=T(9471);Y.exports=p.isStandardBrowserEnv()?function(){var u,y=/(msie|trident)/i.test(navigator.userAgent),x=document.createElement("a");function g(C){var P=C;return y&&(x.setAttribute("href",P),P=x.href),x.setAttribute("href",P),{href:x.href,protocol:x.protocol?x.protocol.replace(/:$/,""):"",host:x.host,search:x.search?x.search.replace(/^\?/,""):"",hash:x.hash?x.hash.replace(/^#/,""):"",hostname:x.hostname,port:x.port,pathname:"/"===x.pathname.charAt(0)?x.pathname:"/"+x.pathname}}return u=g(window.location.href),function(P){var E=p.isString(P)?g(P):P;return E.protocol===u.protocol&&E.host===u.host}}():function(){return!0}},2196:(Y,L,T)=>{"use strict";var p=T(9471);Y.exports=function(y,x){p.forEach(y,function(g,C){C!==x&&C.toUpperCase()===x.toUpperCase()&&(y[x]=g,delete y[C])})}},1929:(Y,L,T)=>{"use strict";var p=T(9471),N=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];Y.exports=function(x){var g,C,P,u={};return x&&p.forEach(x.split("\n"),function(v){if(P=v.indexOf(":"),g=p.trim(v.substr(0,P)).toLowerCase(),C=p.trim(v.substr(P+1)),g){if(u[g]&&N.indexOf(g)>=0)return;u[g]="set-cookie"===g?(u[g]?u[g]:[]).concat([C]):u[g]?u[g]+", "+C:C}}),u}},8908:Y=>{"use strict";Y.exports=function(T){return function(N){return T.apply(null,N)}}},3558:(Y,L,T)=>{"use strict";var p=T(8593),N={};["object","boolean","number","function","string","symbol"].forEach(function(C,P){N[C]=function(v){return typeof v===C||"a"+(P<1?"n ":" ")+C}});var y={},x=p.version.split(".");function u(C,P){for(var E=P?P.split("."):x,v=C.split("."),h=0;h<3;h++){if(E[h]>v[h])return!0;if(E[h]<v[h])return!1}return!1}N.transitional=function(P,E,v){var h=E&&u(E);function _(b,w){return"[Axios v"+p.version+"] Transitional option '"+b+"'"+w+(v?". "+v:"")}return function(b,w,I){if(!1===P)throw new Error(_(w," has been removed in "+E));return h&&!y[w]&&(y[w]=!0,console.warn(_(w," has been deprecated since v"+E+" and will be removed in the near future"))),!P||P(b,w,I)}},Y.exports={isOlderVersion:u,assertOptions:function(C,P,E){if("object"!=typeof C)throw new TypeError("options must be an object");for(var v=Object.keys(C),h=v.length;h-- >0;){var _=v[h],b=P[_];if(b){var w=C[_],I=void 0===w||b(w,_,C);if(!0!==I)throw new TypeError("option "+_+" must be "+I)}else if(!0!==E)throw Error("Unknown option "+_)}},validators:N}},9471:(Y,L,T)=>{"use strict";var p=T(1533),N=Object.prototype.toString;function y(K){return"[object Array]"===N.call(K)}function x(K){return void 0===K}function h(K){return null!==K&&"object"==typeof K}function _(K){if("[object Object]"!==N.call(K))return!1;var ge=Object.getPrototypeOf(K);return null===ge||ge===Object.prototype}function D(K){return"[object Function]"===N.call(K)}function U(K,ge){if(null!=K)if("object"!=typeof K&&(K=[K]),y(K))for(var R=0,r=K.length;R<r;R++)ge.call(null,K[R],R,K);else for(var s in K)Object.prototype.hasOwnProperty.call(K,s)&&ge.call(null,K[s],s,K)}Y.exports={isArray:y,isArrayBuffer:function(K){return"[object ArrayBuffer]"===N.call(K)},isBuffer:function(K){return null!==K&&!x(K)&&null!==K.constructor&&!x(K.constructor)&&"function"==typeof K.constructor.isBuffer&&K.constructor.isBuffer(K)},isFormData:function(K){return"undefined"!=typeof FormData&&K instanceof FormData},isArrayBufferView:function(K){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(K):K&&K.buffer&&K.buffer instanceof ArrayBuffer},isString:function(K){return"string"==typeof K},isNumber:function(K){return"number"==typeof K},isObject:h,isPlainObject:_,isUndefined:x,isDate:function(K){return"[object Date]"===N.call(K)},isFile:function(K){return"[object File]"===N.call(K)},isBlob:function(K){return"[object Blob]"===N.call(K)},isFunction:D,isStream:function(K){return h(K)&&D(K.pipe)},isURLSearchParams:function(K){return"undefined"!=typeof URLSearchParams&&K instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:U,merge:function j(){var K={};function ge(s,l){K[l]=_(K[l])&&_(s)?j(K[l],s):_(s)?j({},s):y(s)?s.slice():s}for(var R=0,r=arguments.length;R<r;R++)U(arguments[R],ge);return K},extend:function(K,ge,R){return U(ge,function(s,l){K[l]=R&&"function"==typeof s?p(s,R):s}),K},trim:function(K){return K.trim?K.trim():K.replace(/^\s+|\s+$/g,"")},stripBOM:function(K){return 65279===K.charCodeAt(0)&&(K=K.slice(1)),K}}},6434:(Y,L)=>{"use strict";L.byteLength=function(b){var w=g(b),D=w[1];return 3*(w[0]+D)/4-D},L.toByteArray=function(b){var w,U,I=g(b),D=I[0],k=I[1],O=new N(function(b,w,I){return 3*(w+I)/4-I}(0,D,k)),V=0,B=k>0?D-4:D;for(U=0;U<B;U+=4)w=p[b.charCodeAt(U)]<<18|p[b.charCodeAt(U+1)]<<12|p[b.charCodeAt(U+2)]<<6|p[b.charCodeAt(U+3)],O[V++]=w>>16&255,O[V++]=w>>8&255,O[V++]=255&w;return 2===k&&(w=p[b.charCodeAt(U)]<<2|p[b.charCodeAt(U+1)]>>4,O[V++]=255&w),1===k&&(w=p[b.charCodeAt(U)]<<10|p[b.charCodeAt(U+1)]<<4|p[b.charCodeAt(U+2)]>>2,O[V++]=w>>8&255,O[V++]=255&w),O},L.fromByteArray=function(b){for(var w,I=b.length,D=I%3,k=[],O=16383,V=0,B=I-D;V<B;V+=O)k.push(h(b,V,V+O>B?B:V+O));return 1===D?k.push(T[(w=b[I-1])>>2]+T[w<<4&63]+"=="):2===D&&k.push(T[(w=(b[I-2]<<8)+b[I-1])>>10]+T[w>>4&63]+T[w<<2&63]+"="),k.join("")};for(var T=[],p=[],N="undefined"!=typeof Uint8Array?Uint8Array:Array,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",x=0,u=y.length;x<u;++x)T[x]=y[x],p[y.charCodeAt(x)]=x;function g(b){var w=b.length;if(w%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var I=b.indexOf("=");return-1===I&&(I=w),[I,I===w?0:4-I%4]}function v(b){return T[b>>18&63]+T[b>>12&63]+T[b>>6&63]+T[63&b]}function h(b,w,I){for(var k=[],O=w;O<I;O+=3)k.push(v((b[O]<<16&16711680)+(b[O+1]<<8&65280)+(255&b[O+2])));return k.join("")}p["-".charCodeAt(0)]=62,p["_".charCodeAt(0)]=63},2630:function(Y,L,T){!function(p,N){"use strict";function y(l,a){if(!l)throw new Error(a||"Assertion failed")}function x(l,a){l.super_=a;var f=function(){};f.prototype=a.prototype,l.prototype=new f,l.prototype.constructor=l}function u(l,a,f){if(u.isBN(l))return l;this.negative=0,this.words=null,this.length=0,this.red=null,null!==l&&(("le"===a||"be"===a)&&(f=a,a=10),this._init(l||0,a||10,f||"be"))}var g;"object"==typeof p?p.exports=u:N.BN=u,u.BN=u,u.wordSize=26;try{g="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:T(6601).Buffer}catch(l){}function C(l,a){var f=l.charCodeAt(a);return f>=48&&f<=57?f-48:f>=65&&f<=70?f-55:f>=97&&f<=102?f-87:void y(!1,"Invalid character in "+l)}function P(l,a,f){var M=C(l,f);return f-1>=a&&(M|=C(l,f-1)<<4),M}function E(l,a,f,M){for(var A=0,d=0,i=Math.min(l.length,f),m=a;m<i;m++){var q=l.charCodeAt(m)-48;A*=M,d=q>=49?q-49+10:q>=17?q-17+10:q,y(q>=0&&d<M,"Invalid character"),A+=d}return A}function v(l,a){l.words=a.words,l.length=a.length,l.negative=a.negative,l.red=a.red}if(u.isBN=function(a){return a instanceof u||null!==a&&"object"==typeof a&&a.constructor.wordSize===u.wordSize&&Array.isArray(a.words)},u.max=function(a,f){return a.cmp(f)>0?a:f},u.min=function(a,f){return a.cmp(f)<0?a:f},u.prototype._init=function(a,f,M){if("number"==typeof a)return this._initNumber(a,f,M);if("object"==typeof a)return this._initArray(a,f,M);"hex"===f&&(f=16),y(f===(0|f)&&f>=2&&f<=36);var A=0;"-"===(a=a.toString().replace(/\s+/g,""))[0]&&(A++,this.negative=1),A<a.length&&(16===f?this._parseHex(a,A,M):(this._parseBase(a,f,A),"le"===M&&this._initArray(this.toArray(),f,M)))},u.prototype._initNumber=function(a,f,M){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[67108863&a],this.length=1):a<4503599627370496?(this.words=[67108863&a,a/67108864&67108863],this.length=2):(y(a<9007199254740992),this.words=[67108863&a,a/67108864&67108863,1],this.length=3),"le"===M&&this._initArray(this.toArray(),f,M)},u.prototype._initArray=function(a,f,M){if(y("number"==typeof a.length),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var A=0;A<this.length;A++)this.words[A]=0;var d,i,m=0;if("be"===M)for(A=a.length-1,d=0;A>=0;A-=3)this.words[d]|=(i=a[A]|a[A-1]<<8|a[A-2]<<16)<<m&67108863,this.words[d+1]=i>>>26-m&67108863,(m+=24)>=26&&(m-=26,d++);else if("le"===M)for(A=0,d=0;A<a.length;A+=3)this.words[d]|=(i=a[A]|a[A+1]<<8|a[A+2]<<16)<<m&67108863,this.words[d+1]=i>>>26-m&67108863,(m+=24)>=26&&(m-=26,d++);return this._strip()},u.prototype._parseHex=function(a,f,M){this.length=Math.ceil((a.length-f)/6),this.words=new Array(this.length);for(var A=0;A<this.length;A++)this.words[A]=0;var m,d=0,i=0;if("be"===M)for(A=a.length-1;A>=f;A-=2)m=P(a,f,A)<<d,this.words[i]|=67108863&m,d>=18?(d-=18,this.words[i+=1]|=m>>>26):d+=8;else for(A=(a.length-f)%2==0?f+1:f;A<a.length;A+=2)m=P(a,f,A)<<d,this.words[i]|=67108863&m,d>=18?(d-=18,this.words[i+=1]|=m>>>26):d+=8;this._strip()},u.prototype._parseBase=function(a,f,M){this.words=[0],this.length=1;for(var A=0,d=1;d<=67108863;d*=f)A++;A--,d=d/f|0;for(var i=a.length-M,m=i%A,q=Math.min(i,i-m)+M,z=0,J=M;J<q;J+=A)z=E(a,J,J+A,f),this.imuln(d),this.words[0]+z<67108864?this.words[0]+=z:this._iaddn(z);if(0!==m){var ce=1;for(z=E(a,J,a.length,f),J=0;J<m;J++)ce*=f;this.imuln(ce),this.words[0]+z<67108864?this.words[0]+=z:this._iaddn(z)}this._strip()},u.prototype.copy=function(a){a.words=new Array(this.length);for(var f=0;f<this.length;f++)a.words[f]=this.words[f];a.length=this.length,a.negative=this.negative,a.red=this.red},u.prototype._move=function(a){v(a,this)},u.prototype.clone=function(){var a=new u(null);return this.copy(a),a},u.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},u.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},u.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{u.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(l){u.prototype.inspect=h}else u.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var _=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],b=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],w=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function k(l,a,f){f.negative=a.negative^l.negative;var M=l.length+a.length|0;f.length=M,M=M-1|0;var A=0|l.words[0],d=0|a.words[0],i=A*d,q=i/67108864|0;f.words[0]=67108863&i;for(var z=1;z<M;z++){for(var J=q>>>26,ce=67108863&q,se=Math.min(z,a.length-1),he=Math.max(0,z-l.length+1);he<=se;he++)J+=(i=(A=0|l.words[z-he|0])*(d=0|a.words[he])+ce)/67108864|0,ce=67108863&i;f.words[z]=0|ce,q=0|J}return 0!==q?f.words[z]=0|q:f.length--,f._strip()}u.prototype.toString=function(a,f){var M;if(f=0|f||1,16===(a=a||10)||"hex"===a){M="";for(var A=0,d=0,i=0;i<this.length;i++){var m=this.words[i],q=(16777215&(m<<A|d)).toString(16);d=m>>>24-A&16777215,(A+=2)>=26&&(A-=26,i--),M=0!==d||i!==this.length-1?_[6-q.length]+q+M:q+M}for(0!==d&&(M=d.toString(16)+M);M.length%f!=0;)M="0"+M;return 0!==this.negative&&(M="-"+M),M}if(a===(0|a)&&a>=2&&a<=36){var z=b[a],J=w[a];M="";var ce=this.clone();for(ce.negative=0;!ce.isZero();){var se=ce.modrn(J).toString(a);M=(ce=ce.idivn(J)).isZero()?se+M:_[z-se.length]+se+M}for(this.isZero()&&(M="0"+M);M.length%f!=0;)M="0"+M;return 0!==this.negative&&(M="-"+M),M}y(!1,"Base should be between 2 and 36")},u.prototype.toNumber=function(){var a=this.words[0];return 2===this.length?a+=67108864*this.words[1]:3===this.length&&1===this.words[2]?a+=4503599627370496+67108864*this.words[1]:this.length>2&&y(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-a:a},u.prototype.toJSON=function(){return this.toString(16,2)},g&&(u.prototype.toBuffer=function(a,f){return this.toArrayLike(g,a,f)}),u.prototype.toArray=function(a,f){return this.toArrayLike(Array,a,f)},u.prototype.toArrayLike=function(a,f,M){this._strip();var A=this.byteLength(),d=M||Math.max(1,A);y(A<=d,"byte array longer than desired length"),y(d>0,"Requested array length <= 0");var i=function(a,f){return a.allocUnsafe?a.allocUnsafe(f):new a(f)}(a,d);return this["_toArrayLike"+("le"===f?"LE":"BE")](i,A),i},u.prototype._toArrayLikeLE=function(a,f){for(var M=0,A=0,d=0,i=0;d<this.length;d++){var m=this.words[d]<<i|A;a[M++]=255&m,M<a.length&&(a[M++]=m>>8&255),M<a.length&&(a[M++]=m>>16&255),6===i?(M<a.length&&(a[M++]=m>>24&255),A=0,i=0):(A=m>>>24,i+=2)}if(M<a.length)for(a[M++]=A;M<a.length;)a[M++]=0},u.prototype._toArrayLikeBE=function(a,f){for(var M=a.length-1,A=0,d=0,i=0;d<this.length;d++){var m=this.words[d]<<i|A;a[M--]=255&m,M>=0&&(a[M--]=m>>8&255),M>=0&&(a[M--]=m>>16&255),6===i?(M>=0&&(a[M--]=m>>24&255),A=0,i=0):(A=m>>>24,i+=2)}if(M>=0)for(a[M--]=A;M>=0;)a[M--]=0},u.prototype._countBits=Math.clz32?function(a){return 32-Math.clz32(a)}:function(a){var f=a,M=0;return f>=4096&&(M+=13,f>>>=13),f>=64&&(M+=7,f>>>=7),f>=8&&(M+=4,f>>>=4),f>=2&&(M+=2,f>>>=2),M+f},u.prototype._zeroBits=function(a){if(0===a)return 26;var f=a,M=0;return 0==(8191&f)&&(M+=13,f>>>=13),0==(127&f)&&(M+=7,f>>>=7),0==(15&f)&&(M+=4,f>>>=4),0==(3&f)&&(M+=2,f>>>=2),0==(1&f)&&M++,M},u.prototype.bitLength=function(){var f=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+f},u.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,f=0;f<this.length;f++){var M=this._zeroBits(this.words[f]);if(a+=M,26!==M)break}return a},u.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},u.prototype.toTwos=function(a){return 0!==this.negative?this.abs().inotn(a).iaddn(1):this.clone()},u.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},u.prototype.isNeg=function(){return 0!==this.negative},u.prototype.neg=function(){return this.clone().ineg()},u.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},u.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var f=0;f<a.length;f++)this.words[f]=this.words[f]|a.words[f];return this._strip()},u.prototype.ior=function(a){return y(0==(this.negative|a.negative)),this.iuor(a)},u.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},u.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},u.prototype.iuand=function(a){var f;f=this.length>a.length?a:this;for(var M=0;M<f.length;M++)this.words[M]=this.words[M]&a.words[M];return this.length=f.length,this._strip()},u.prototype.iand=function(a){return y(0==(this.negative|a.negative)),this.iuand(a)},u.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},u.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},u.prototype.iuxor=function(a){var f,M;this.length>a.length?(f=this,M=a):(f=a,M=this);for(var A=0;A<M.length;A++)this.words[A]=f.words[A]^M.words[A];if(this!==f)for(;A<f.length;A++)this.words[A]=f.words[A];return this.length=f.length,this._strip()},u.prototype.ixor=function(a){return y(0==(this.negative|a.negative)),this.iuxor(a)},u.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},u.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},u.prototype.inotn=function(a){y("number"==typeof a&&a>=0);var f=0|Math.ceil(a/26),M=a%26;this._expand(f),M>0&&f--;for(var A=0;A<f;A++)this.words[A]=67108863&~this.words[A];return M>0&&(this.words[A]=~this.words[A]&67108863>>26-M),this._strip()},u.prototype.notn=function(a){return this.clone().inotn(a)},u.prototype.setn=function(a,f){y("number"==typeof a&&a>=0);var M=a/26|0,A=a%26;return this._expand(M+1),this.words[M]=f?this.words[M]|1<<A:this.words[M]&~(1<<A),this._strip()},u.prototype.iadd=function(a){var f,M,A;if(0!==this.negative&&0===a.negative)return this.negative=0,f=this.isub(a),this.negative^=1,this._normSign();if(0===this.negative&&0!==a.negative)return a.negative=0,f=this.isub(a),a.negative=1,f._normSign();this.length>a.length?(M=this,A=a):(M=a,A=this);for(var d=0,i=0;i<A.length;i++)this.words[i]=67108863&(f=(0|M.words[i])+(0|A.words[i])+d),d=f>>>26;for(;0!==d&&i<M.length;i++)this.words[i]=67108863&(f=(0|M.words[i])+d),d=f>>>26;if(this.length=M.length,0!==d)this.words[this.length]=d,this.length++;else if(M!==this)for(;i<M.length;i++)this.words[i]=M.words[i];return this},u.prototype.add=function(a){var f;return 0!==a.negative&&0===this.negative?(a.negative=0,f=this.sub(a),a.negative^=1,f):0===a.negative&&0!==this.negative?(this.negative=0,f=a.sub(this),this.negative=1,f):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},u.prototype.isub=function(a){if(0!==a.negative){a.negative=0;var f=this.iadd(a);return a.negative=1,f._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var A,d,M=this.cmp(a);if(0===M)return this.negative=0,this.length=1,this.words[0]=0,this;M>0?(A=this,d=a):(A=a,d=this);for(var i=0,m=0;m<d.length;m++)i=(f=(0|A.words[m])-(0|d.words[m])+i)>>26,this.words[m]=67108863&f;for(;0!==i&&m<A.length;m++)i=(f=(0|A.words[m])+i)>>26,this.words[m]=67108863&f;if(0===i&&m<A.length&&A!==this)for(;m<A.length;m++)this.words[m]=A.words[m];return this.length=Math.max(this.length,m),A!==this&&(this.negative=1),this._strip()},u.prototype.sub=function(a){return this.clone().isub(a)};var O=function(a,f,M){var q,z,J,A=a.words,d=f.words,i=M.words,m=0,ce=0|A[0],se=8191&ce,he=ce>>>13,ve=0|A[1],ae=8191&ve,de=ve>>>13,Re=0|A[2],Ee=8191&Re,ue=Re>>>13,ye=0|A[3],Se=8191&ye,ie=ye>>>13,ee=0|A[4],Z=8191&ee,le=ee>>>13,Oe=0|A[5],we=8191&Oe,Te=Oe>>>13,yt=0|A[6],Ne=8191&yt,Me=yt>>>13,Ye=0|A[7],De=8191&Ye,Fe=Ye>>>13,ct=0|A[8],Ve=8191&ct,Ke=ct>>>13,Zt=0|A[9],nt=8191&Zt,ot=Zt>>>13,Mt=0|d[0],ut=8191&Mt,st=Mt>>>13,Nn=0|d[1],rt=8191&Nn,Ge=Nn>>>13,Cn=0|d[2],qe=8191&Cn,We=Cn>>>13,Dn=0|d[3],ft=8191&Dn,Ue=Dn>>>13,Ln=0|d[4],gt=8191&Ln,it=Ln>>>13,zn=0|d[5],lt=8191&zn,ze=zn>>>13,sn=0|d[6],dt=8191&sn,Xe=sn>>>13,Qt=0|d[7],Qe=8191&Qt,Ze=Qt>>>13,Pn=0|d[8],Je=8191&Pn,at=Pn>>>13,un=0|d[9],Vt=8191&un,Ht=un>>>13;M.negative=a.negative^f.negative,M.length=19;var bn=(m+(q=Math.imul(se,ut))|0)+((8191&(z=(z=Math.imul(se,st))+Math.imul(he,ut)|0))<<13)|0;m=((J=Math.imul(he,st))+(z>>>13)|0)+(bn>>>26)|0,bn&=67108863,q=Math.imul(ae,ut),z=(z=Math.imul(ae,st))+Math.imul(de,ut)|0,J=Math.imul(de,st);var dn=(m+(q=q+Math.imul(se,rt)|0)|0)+((8191&(z=(z=z+Math.imul(se,Ge)|0)+Math.imul(he,rt)|0))<<13)|0;m=((J=J+Math.imul(he,Ge)|0)+(z>>>13)|0)+(dn>>>26)|0,dn&=67108863,q=Math.imul(Ee,ut),z=(z=Math.imul(Ee,st))+Math.imul(ue,ut)|0,J=Math.imul(ue,st),q=q+Math.imul(ae,rt)|0,z=(z=z+Math.imul(ae,Ge)|0)+Math.imul(de,rt)|0,J=J+Math.imul(de,Ge)|0;var pn=(m+(q=q+Math.imul(se,qe)|0)|0)+((8191&(z=(z=z+Math.imul(se,We)|0)+Math.imul(he,qe)|0))<<13)|0;m=((J=J+Math.imul(he,We)|0)+(z>>>13)|0)+(pn>>>26)|0,pn&=67108863,q=Math.imul(Se,ut),z=(z=Math.imul(Se,st))+Math.imul(ie,ut)|0,J=Math.imul(ie,st),q=q+Math.imul(Ee,rt)|0,z=(z=z+Math.imul(Ee,Ge)|0)+Math.imul(ue,rt)|0,J=J+Math.imul(ue,Ge)|0,q=q+Math.imul(ae,qe)|0,z=(z=z+Math.imul(ae,We)|0)+Math.imul(de,qe)|0,J=J+Math.imul(de,We)|0;var In=(m+(q=q+Math.imul(se,ft)|0)|0)+((8191&(z=(z=z+Math.imul(se,Ue)|0)+Math.imul(he,ft)|0))<<13)|0;m=((J=J+Math.imul(he,Ue)|0)+(z>>>13)|0)+(In>>>26)|0,In&=67108863,q=Math.imul(Z,ut),z=(z=Math.imul(Z,st))+Math.imul(le,ut)|0,J=Math.imul(le,st),q=q+Math.imul(Se,rt)|0,z=(z=z+Math.imul(Se,Ge)|0)+Math.imul(ie,rt)|0,J=J+Math.imul(ie,Ge)|0,q=q+Math.imul(Ee,qe)|0,z=(z=z+Math.imul(Ee,We)|0)+Math.imul(ue,qe)|0,J=J+Math.imul(ue,We)|0,q=q+Math.imul(ae,ft)|0,z=(z=z+Math.imul(ae,Ue)|0)+Math.imul(de,ft)|0,J=J+Math.imul(de,Ue)|0;var rn=(m+(q=q+Math.imul(se,gt)|0)|0)+((8191&(z=(z=z+Math.imul(se,it)|0)+Math.imul(he,gt)|0))<<13)|0;m=((J=J+Math.imul(he,it)|0)+(z>>>13)|0)+(rn>>>26)|0,rn&=67108863,q=Math.imul(we,ut),z=(z=Math.imul(we,st))+Math.imul(Te,ut)|0,J=Math.imul(Te,st),q=q+Math.imul(Z,rt)|0,z=(z=z+Math.imul(Z,Ge)|0)+Math.imul(le,rt)|0,J=J+Math.imul(le,Ge)|0,q=q+Math.imul(Se,qe)|0,z=(z=z+Math.imul(Se,We)|0)+Math.imul(ie,qe)|0,J=J+Math.imul(ie,We)|0,q=q+Math.imul(Ee,ft)|0,z=(z=z+Math.imul(Ee,Ue)|0)+Math.imul(ue,ft)|0,J=J+Math.imul(ue,Ue)|0,q=q+Math.imul(ae,gt)|0,z=(z=z+Math.imul(ae,it)|0)+Math.imul(de,gt)|0,J=J+Math.imul(de,it)|0;var Mn=(m+(q=q+Math.imul(se,lt)|0)|0)+((8191&(z=(z=z+Math.imul(se,ze)|0)+Math.imul(he,lt)|0))<<13)|0;m=((J=J+Math.imul(he,ze)|0)+(z>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,q=Math.imul(Ne,ut),z=(z=Math.imul(Ne,st))+Math.imul(Me,ut)|0,J=Math.imul(Me,st),q=q+Math.imul(we,rt)|0,z=(z=z+Math.imul(we,Ge)|0)+Math.imul(Te,rt)|0,J=J+Math.imul(Te,Ge)|0,q=q+Math.imul(Z,qe)|0,z=(z=z+Math.imul(Z,We)|0)+Math.imul(le,qe)|0,J=J+Math.imul(le,We)|0,q=q+Math.imul(Se,ft)|0,z=(z=z+Math.imul(Se,Ue)|0)+Math.imul(ie,ft)|0,J=J+Math.imul(ie,Ue)|0,q=q+Math.imul(Ee,gt)|0,z=(z=z+Math.imul(Ee,it)|0)+Math.imul(ue,gt)|0,J=J+Math.imul(ue,it)|0,q=q+Math.imul(ae,lt)|0,z=(z=z+Math.imul(ae,ze)|0)+Math.imul(de,lt)|0,J=J+Math.imul(de,ze)|0;var $t=(m+(q=q+Math.imul(se,dt)|0)|0)+((8191&(z=(z=z+Math.imul(se,Xe)|0)+Math.imul(he,dt)|0))<<13)|0;m=((J=J+Math.imul(he,Xe)|0)+(z>>>13)|0)+($t>>>26)|0,$t&=67108863,q=Math.imul(De,ut),z=(z=Math.imul(De,st))+Math.imul(Fe,ut)|0,J=Math.imul(Fe,st),q=q+Math.imul(Ne,rt)|0,z=(z=z+Math.imul(Ne,Ge)|0)+Math.imul(Me,rt)|0,J=J+Math.imul(Me,Ge)|0,q=q+Math.imul(we,qe)|0,z=(z=z+Math.imul(we,We)|0)+Math.imul(Te,qe)|0,J=J+Math.imul(Te,We)|0,q=q+Math.imul(Z,ft)|0,z=(z=z+Math.imul(Z,Ue)|0)+Math.imul(le,ft)|0,J=J+Math.imul(le,Ue)|0,q=q+Math.imul(Se,gt)|0,z=(z=z+Math.imul(Se,it)|0)+Math.imul(ie,gt)|0,J=J+Math.imul(ie,it)|0,q=q+Math.imul(Ee,lt)|0,z=(z=z+Math.imul(Ee,ze)|0)+Math.imul(ue,lt)|0,J=J+Math.imul(ue,ze)|0,q=q+Math.imul(ae,dt)|0,z=(z=z+Math.imul(ae,Xe)|0)+Math.imul(de,dt)|0,J=J+Math.imul(de,Xe)|0;var Nt=(m+(q=q+Math.imul(se,Qe)|0)|0)+((8191&(z=(z=z+Math.imul(se,Ze)|0)+Math.imul(he,Qe)|0))<<13)|0;m=((J=J+Math.imul(he,Ze)|0)+(z>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,q=Math.imul(Ve,ut),z=(z=Math.imul(Ve,st))+Math.imul(Ke,ut)|0,J=Math.imul(Ke,st),q=q+Math.imul(De,rt)|0,z=(z=z+Math.imul(De,Ge)|0)+Math.imul(Fe,rt)|0,J=J+Math.imul(Fe,Ge)|0,q=q+Math.imul(Ne,qe)|0,z=(z=z+Math.imul(Ne,We)|0)+Math.imul(Me,qe)|0,J=J+Math.imul(Me,We)|0,q=q+Math.imul(we,ft)|0,z=(z=z+Math.imul(we,Ue)|0)+Math.imul(Te,ft)|0,J=J+Math.imul(Te,Ue)|0,q=q+Math.imul(Z,gt)|0,z=(z=z+Math.imul(Z,it)|0)+Math.imul(le,gt)|0,J=J+Math.imul(le,it)|0,q=q+Math.imul(Se,lt)|0,z=(z=z+Math.imul(Se,ze)|0)+Math.imul(ie,lt)|0,J=J+Math.imul(ie,ze)|0,q=q+Math.imul(Ee,dt)|0,z=(z=z+Math.imul(Ee,Xe)|0)+Math.imul(ue,dt)|0,J=J+Math.imul(ue,Xe)|0,q=q+Math.imul(ae,Qe)|0,z=(z=z+Math.imul(ae,Ze)|0)+Math.imul(de,Qe)|0,J=J+Math.imul(de,Ze)|0;var xn=(m+(q=q+Math.imul(se,Je)|0)|0)+((8191&(z=(z=z+Math.imul(se,at)|0)+Math.imul(he,Je)|0))<<13)|0;m=((J=J+Math.imul(he,at)|0)+(z>>>13)|0)+(xn>>>26)|0,xn&=67108863,q=Math.imul(nt,ut),z=(z=Math.imul(nt,st))+Math.imul(ot,ut)|0,J=Math.imul(ot,st),q=q+Math.imul(Ve,rt)|0,z=(z=z+Math.imul(Ve,Ge)|0)+Math.imul(Ke,rt)|0,J=J+Math.imul(Ke,Ge)|0,q=q+Math.imul(De,qe)|0,z=(z=z+Math.imul(De,We)|0)+Math.imul(Fe,qe)|0,J=J+Math.imul(Fe,We)|0,q=q+Math.imul(Ne,ft)|0,z=(z=z+Math.imul(Ne,Ue)|0)+Math.imul(Me,ft)|0,J=J+Math.imul(Me,Ue)|0,q=q+Math.imul(we,gt)|0,z=(z=z+Math.imul(we,it)|0)+Math.imul(Te,gt)|0,J=J+Math.imul(Te,it)|0,q=q+Math.imul(Z,lt)|0,z=(z=z+Math.imul(Z,ze)|0)+Math.imul(le,lt)|0,J=J+Math.imul(le,ze)|0,q=q+Math.imul(Se,dt)|0,z=(z=z+Math.imul(Se,Xe)|0)+Math.imul(ie,dt)|0,J=J+Math.imul(ie,Xe)|0,q=q+Math.imul(Ee,Qe)|0,z=(z=z+Math.imul(Ee,Ze)|0)+Math.imul(ue,Qe)|0,J=J+Math.imul(ue,Ze)|0,q=q+Math.imul(ae,Je)|0,z=(z=z+Math.imul(ae,at)|0)+Math.imul(de,Je)|0,J=J+Math.imul(de,at)|0;var wn=(m+(q=q+Math.imul(se,Vt)|0)|0)+((8191&(z=(z=z+Math.imul(se,Ht)|0)+Math.imul(he,Vt)|0))<<13)|0;m=((J=J+Math.imul(he,Ht)|0)+(z>>>13)|0)+(wn>>>26)|0,wn&=67108863,q=Math.imul(nt,rt),z=(z=Math.imul(nt,Ge))+Math.imul(ot,rt)|0,J=Math.imul(ot,Ge),q=q+Math.imul(Ve,qe)|0,z=(z=z+Math.imul(Ve,We)|0)+Math.imul(Ke,qe)|0,J=J+Math.imul(Ke,We)|0,q=q+Math.imul(De,ft)|0,z=(z=z+Math.imul(De,Ue)|0)+Math.imul(Fe,ft)|0,J=J+Math.imul(Fe,Ue)|0,q=q+Math.imul(Ne,gt)|0,z=(z=z+Math.imul(Ne,it)|0)+Math.imul(Me,gt)|0,J=J+Math.imul(Me,it)|0,q=q+Math.imul(we,lt)|0,z=(z=z+Math.imul(we,ze)|0)+Math.imul(Te,lt)|0,J=J+Math.imul(Te,ze)|0,q=q+Math.imul(Z,dt)|0,z=(z=z+Math.imul(Z,Xe)|0)+Math.imul(le,dt)|0,J=J+Math.imul(le,Xe)|0,q=q+Math.imul(Se,Qe)|0,z=(z=z+Math.imul(Se,Ze)|0)+Math.imul(ie,Qe)|0,J=J+Math.imul(ie,Ze)|0,q=q+Math.imul(Ee,Je)|0,z=(z=z+Math.imul(Ee,at)|0)+Math.imul(ue,Je)|0,J=J+Math.imul(ue,at)|0;var _n=(m+(q=q+Math.imul(ae,Vt)|0)|0)+((8191&(z=(z=z+Math.imul(ae,Ht)|0)+Math.imul(de,Vt)|0))<<13)|0;m=((J=J+Math.imul(de,Ht)|0)+(z>>>13)|0)+(_n>>>26)|0,_n&=67108863,q=Math.imul(nt,qe),z=(z=Math.imul(nt,We))+Math.imul(ot,qe)|0,J=Math.imul(ot,We),q=q+Math.imul(Ve,ft)|0,z=(z=z+Math.imul(Ve,Ue)|0)+Math.imul(Ke,ft)|0,J=J+Math.imul(Ke,Ue)|0,q=q+Math.imul(De,gt)|0,z=(z=z+Math.imul(De,it)|0)+Math.imul(Fe,gt)|0,J=J+Math.imul(Fe,it)|0,q=q+Math.imul(Ne,lt)|0,z=(z=z+Math.imul(Ne,ze)|0)+Math.imul(Me,lt)|0,J=J+Math.imul(Me,ze)|0,q=q+Math.imul(we,dt)|0,z=(z=z+Math.imul(we,Xe)|0)+Math.imul(Te,dt)|0,J=J+Math.imul(Te,Xe)|0,q=q+Math.imul(Z,Qe)|0,z=(z=z+Math.imul(Z,Ze)|0)+Math.imul(le,Qe)|0,J=J+Math.imul(le,Ze)|0,q=q+Math.imul(Se,Je)|0,z=(z=z+Math.imul(Se,at)|0)+Math.imul(ie,Je)|0,J=J+Math.imul(ie,at)|0;var xt=(m+(q=q+Math.imul(Ee,Vt)|0)|0)+((8191&(z=(z=z+Math.imul(Ee,Ht)|0)+Math.imul(ue,Vt)|0))<<13)|0;m=((J=J+Math.imul(ue,Ht)|0)+(z>>>13)|0)+(xt>>>26)|0,xt&=67108863,q=Math.imul(nt,ft),z=(z=Math.imul(nt,Ue))+Math.imul(ot,ft)|0,J=Math.imul(ot,Ue),q=q+Math.imul(Ve,gt)|0,z=(z=z+Math.imul(Ve,it)|0)+Math.imul(Ke,gt)|0,J=J+Math.imul(Ke,it)|0,q=q+Math.imul(De,lt)|0,z=(z=z+Math.imul(De,ze)|0)+Math.imul(Fe,lt)|0,J=J+Math.imul(Fe,ze)|0,q=q+Math.imul(Ne,dt)|0,z=(z=z+Math.imul(Ne,Xe)|0)+Math.imul(Me,dt)|0,J=J+Math.imul(Me,Xe)|0,q=q+Math.imul(we,Qe)|0,z=(z=z+Math.imul(we,Ze)|0)+Math.imul(Te,Qe)|0,J=J+Math.imul(Te,Ze)|0,q=q+Math.imul(Z,Je)|0,z=(z=z+Math.imul(Z,at)|0)+Math.imul(le,Je)|0,J=J+Math.imul(le,at)|0;var Rn=(m+(q=q+Math.imul(Se,Vt)|0)|0)+((8191&(z=(z=z+Math.imul(Se,Ht)|0)+Math.imul(ie,Vt)|0))<<13)|0;m=((J=J+Math.imul(ie,Ht)|0)+(z>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,q=Math.imul(nt,gt),z=(z=Math.imul(nt,it))+Math.imul(ot,gt)|0,J=Math.imul(ot,it),q=q+Math.imul(Ve,lt)|0,z=(z=z+Math.imul(Ve,ze)|0)+Math.imul(Ke,lt)|0,J=J+Math.imul(Ke,ze)|0,q=q+Math.imul(De,dt)|0,z=(z=z+Math.imul(De,Xe)|0)+Math.imul(Fe,dt)|0,J=J+Math.imul(Fe,Xe)|0,q=q+Math.imul(Ne,Qe)|0,z=(z=z+Math.imul(Ne,Ze)|0)+Math.imul(Me,Qe)|0,J=J+Math.imul(Me,Ze)|0,q=q+Math.imul(we,Je)|0,z=(z=z+Math.imul(we,at)|0)+Math.imul(Te,Je)|0,J=J+Math.imul(Te,at)|0;var Jt=(m+(q=q+Math.imul(Z,Vt)|0)|0)+((8191&(z=(z=z+Math.imul(Z,Ht)|0)+Math.imul(le,Vt)|0))<<13)|0;m=((J=J+Math.imul(le,Ht)|0)+(z>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,q=Math.imul(nt,lt),z=(z=Math.imul(nt,ze))+Math.imul(ot,lt)|0,J=Math.imul(ot,ze),q=q+Math.imul(Ve,dt)|0,z=(z=z+Math.imul(Ve,Xe)|0)+Math.imul(Ke,dt)|0,J=J+Math.imul(Ke,Xe)|0,q=q+Math.imul(De,Qe)|0,z=(z=z+Math.imul(De,Ze)|0)+Math.imul(Fe,Qe)|0,J=J+Math.imul(Fe,Ze)|0,q=q+Math.imul(Ne,Je)|0,z=(z=z+Math.imul(Ne,at)|0)+Math.imul(Me,Je)|0,J=J+Math.imul(Me,at)|0;var tn=(m+(q=q+Math.imul(we,Vt)|0)|0)+((8191&(z=(z=z+Math.imul(we,Ht)|0)+Math.imul(Te,Vt)|0))<<13)|0;m=((J=J+Math.imul(Te,Ht)|0)+(z>>>13)|0)+(tn>>>26)|0,tn&=67108863,q=Math.imul(nt,dt),z=(z=Math.imul(nt,Xe))+Math.imul(ot,dt)|0,J=Math.imul(ot,Xe),q=q+Math.imul(Ve,Qe)|0,z=(z=z+Math.imul(Ve,Ze)|0)+Math.imul(Ke,Qe)|0,J=J+Math.imul(Ke,Ze)|0,q=q+Math.imul(De,Je)|0,z=(z=z+Math.imul(De,at)|0)+Math.imul(Fe,Je)|0,J=J+Math.imul(Fe,at)|0;var Sn=(m+(q=q+Math.imul(Ne,Vt)|0)|0)+((8191&(z=(z=z+Math.imul(Ne,Ht)|0)+Math.imul(Me,Vt)|0))<<13)|0;m=((J=J+Math.imul(Me,Ht)|0)+(z>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,q=Math.imul(nt,Qe),z=(z=Math.imul(nt,Ze))+Math.imul(ot,Qe)|0,J=Math.imul(ot,Ze),q=q+Math.imul(Ve,Je)|0,z=(z=z+Math.imul(Ve,at)|0)+Math.imul(Ke,Je)|0,J=J+Math.imul(Ke,at)|0;var Oi=(m+(q=q+Math.imul(De,Vt)|0)|0)+((8191&(z=(z=z+Math.imul(De,Ht)|0)+Math.imul(Fe,Vt)|0))<<13)|0;m=((J=J+Math.imul(Fe,Ht)|0)+(z>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,q=Math.imul(nt,Je),z=(z=Math.imul(nt,at))+Math.imul(ot,Je)|0,J=Math.imul(ot,at);var ki=(m+(q=q+Math.imul(Ve,Vt)|0)|0)+((8191&(z=(z=z+Math.imul(Ve,Ht)|0)+Math.imul(Ke,Vt)|0))<<13)|0;m=((J=J+Math.imul(Ke,Ht)|0)+(z>>>13)|0)+(ki>>>26)|0,ki&=67108863;var Ni=(m+(q=Math.imul(nt,Vt))|0)+((8191&(z=(z=Math.imul(nt,Ht))+Math.imul(ot,Vt)|0))<<13)|0;return m=((J=Math.imul(ot,Ht))+(z>>>13)|0)+(Ni>>>26)|0,Ni&=67108863,i[0]=bn,i[1]=dn,i[2]=pn,i[3]=In,i[4]=rn,i[5]=Mn,i[6]=$t,i[7]=Nt,i[8]=xn,i[9]=wn,i[10]=_n,i[11]=xt,i[12]=Rn,i[13]=Jt,i[14]=tn,i[15]=Sn,i[16]=Oi,i[17]=ki,i[18]=Ni,0!==m&&(i[19]=m,M.length++),M};function V(l,a,f){f.negative=a.negative^l.negative,f.length=l.length+a.length;for(var M=0,A=0,d=0;d<f.length-1;d++){var i=A;A=0;for(var m=67108863&M,q=Math.min(d,a.length-1),z=Math.max(0,d-l.length+1);z<=q;z++){var he=(0|l.words[d-z])*(0|a.words[z]),ve=67108863&he;m=67108863&(ve=ve+m|0),A+=(i=(i=i+(he/67108864|0)|0)+(ve>>>26)|0)>>>26,i&=67108863}f.words[d]=m,M=i,i=A}return 0!==M?f.words[d]=M:f.length--,f._strip()}function B(l,a,f){return V(l,a,f)}function U(l,a){this.x=l,this.y=a}Math.imul||(O=k),u.prototype.mulTo=function(a,f){var A=this.length+a.length;return 10===this.length&&10===a.length?O(this,a,f):A<63?k(this,a,f):A<1024?V(this,a,f):B(this,a,f)},U.prototype.makeRBT=function(a){for(var f=new Array(a),M=u.prototype._countBits(a)-1,A=0;A<a;A++)f[A]=this.revBin(A,M,a);return f},U.prototype.revBin=function(a,f,M){if(0===a||a===M-1)return a;for(var A=0,d=0;d<f;d++)A|=(1&a)<<f-d-1,a>>=1;return A},U.prototype.permute=function(a,f,M,A,d,i){for(var m=0;m<i;m++)A[m]=f[a[m]],d[m]=M[a[m]]},U.prototype.transform=function(a,f,M,A,d,i){this.permute(i,a,f,M,A,d);for(var m=1;m<d;m<<=1)for(var q=m<<1,z=Math.cos(2*Math.PI/q),J=Math.sin(2*Math.PI/q),ce=0;ce<d;ce+=q)for(var se=z,he=J,ve=0;ve<m;ve++){var ae=M[ce+ve],de=A[ce+ve],Re=M[ce+ve+m],Ee=A[ce+ve+m],ue=se*Re-he*Ee;Ee=se*Ee+he*Re,M[ce+ve]=ae+(Re=ue),A[ce+ve]=de+Ee,M[ce+ve+m]=ae-Re,A[ce+ve+m]=de-Ee,ve!==q&&(ue=z*se-J*he,he=z*he+J*se,se=ue)}},U.prototype.guessLen13b=function(a,f){var M=1|Math.max(f,a),A=1&M,d=0;for(M=M/2|0;M;M>>>=1)d++;return 1<<d+1+A},U.prototype.conjugate=function(a,f,M){if(!(M<=1))for(var A=0;A<M/2;A++){var d=a[A];a[A]=a[M-A-1],a[M-A-1]=d,d=f[A],f[A]=-f[M-A-1],f[M-A-1]=-d}},U.prototype.normalize13b=function(a,f){for(var M=0,A=0;A<f/2;A++){var d=8192*Math.round(a[2*A+1]/f)+Math.round(a[2*A]/f)+M;a[A]=67108863&d,M=d<67108864?0:d/67108864|0}return a},U.prototype.convert13b=function(a,f,M,A){for(var d=0,i=0;i<f;i++)M[2*i]=8191&(d+=0|a[i]),M[2*i+1]=8191&(d>>>=13),d>>>=13;for(i=2*f;i<A;++i)M[i]=0;y(0===d),y(0==(-8192&d))},U.prototype.stub=function(a){for(var f=new Array(a),M=0;M<a;M++)f[M]=0;return f},U.prototype.mulp=function(a,f,M){var A=2*this.guessLen13b(a.length,f.length),d=this.makeRBT(A),i=this.stub(A),m=new Array(A),q=new Array(A),z=new Array(A),J=new Array(A),ce=new Array(A),se=new Array(A),he=M.words;he.length=A,this.convert13b(a.words,a.length,m,A),this.convert13b(f.words,f.length,J,A),this.transform(m,i,q,z,A,d),this.transform(J,i,ce,se,A,d);for(var ve=0;ve<A;ve++){var ae=q[ve]*ce[ve]-z[ve]*se[ve];z[ve]=q[ve]*se[ve]+z[ve]*ce[ve],q[ve]=ae}return this.conjugate(q,z,A),this.transform(q,z,he,i,A,d),this.conjugate(he,i,A),this.normalize13b(he,A),M.negative=a.negative^f.negative,M.length=a.length+f.length,M._strip()},u.prototype.mul=function(a){var f=new u(null);return f.words=new Array(this.length+a.length),this.mulTo(a,f)},u.prototype.mulf=function(a){var f=new u(null);return f.words=new Array(this.length+a.length),B(this,a,f)},u.prototype.imul=function(a){return this.clone().mulTo(a,this)},u.prototype.imuln=function(a){var f=a<0;f&&(a=-a),y("number"==typeof a),y(a<67108864);for(var M=0,A=0;A<this.length;A++){var d=(0|this.words[A])*a,i=(67108863&d)+(67108863&M);M>>=26,M+=d/67108864|0,M+=i>>>26,this.words[A]=67108863&i}return 0!==M&&(this.words[A]=M,this.length++),f?this.ineg():this},u.prototype.muln=function(a){return this.clone().imuln(a)},u.prototype.sqr=function(){return this.mul(this)},u.prototype.isqr=function(){return this.imul(this.clone())},u.prototype.pow=function(a){var f=function(l){for(var a=new Array(l.bitLength()),f=0;f<a.length;f++)a[f]=l.words[f/26|0]>>>f%26&1;return a}(a);if(0===f.length)return new u(1);for(var M=this,A=0;A<f.length&&0===f[A];A++,M=M.sqr());if(++A<f.length)for(var d=M.sqr();A<f.length;A++,d=d.sqr())0!==f[A]&&(M=M.mul(d));return M},u.prototype.iushln=function(a){y("number"==typeof a&&a>=0);var d,f=a%26,M=(a-f)/26,A=67108863>>>26-f<<26-f;if(0!==f){var i=0;for(d=0;d<this.length;d++){var m=this.words[d]&A;this.words[d]=(0|this.words[d])-m<<f|i,i=m>>>26-f}i&&(this.words[d]=i,this.length++)}if(0!==M){for(d=this.length-1;d>=0;d--)this.words[d+M]=this.words[d];for(d=0;d<M;d++)this.words[d]=0;this.length+=M}return this._strip()},u.prototype.ishln=function(a){return y(0===this.negative),this.iushln(a)},u.prototype.iushrn=function(a,f,M){var A;y("number"==typeof a&&a>=0),A=f?(f-f%26)/26:0;var d=a%26,i=Math.min((a-d)/26,this.length),m=67108863^67108863>>>d<<d,q=M;if(A-=i,A=Math.max(0,A),q){for(var z=0;z<i;z++)q.words[z]=this.words[z];q.length=i}if(0!==i)if(this.length>i)for(this.length-=i,z=0;z<this.length;z++)this.words[z]=this.words[z+i];else this.words[0]=0,this.length=1;var J=0;for(z=this.length-1;z>=0&&(0!==J||z>=A);z--){var ce=0|this.words[z];this.words[z]=J<<26-d|ce>>>d,J=ce&m}return q&&0!==J&&(q.words[q.length++]=J),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},u.prototype.ishrn=function(a,f,M){return y(0===this.negative),this.iushrn(a,f,M)},u.prototype.shln=function(a){return this.clone().ishln(a)},u.prototype.ushln=function(a){return this.clone().iushln(a)},u.prototype.shrn=function(a){return this.clone().ishrn(a)},u.prototype.ushrn=function(a){return this.clone().iushrn(a)},u.prototype.testn=function(a){y("number"==typeof a&&a>=0);var f=a%26,M=(a-f)/26;return!(this.length<=M||!(this.words[M]&1<<f))},u.prototype.imaskn=function(a){y("number"==typeof a&&a>=0);var f=a%26,M=(a-f)/26;return y(0===this.negative,"imaskn works only with positive numbers"),this.length<=M?this:(0!==f&&M++,this.length=Math.min(M,this.length),0!==f&&(this.words[this.length-1]&=67108863^67108863>>>f<<f),this._strip())},u.prototype.maskn=function(a){return this.clone().imaskn(a)},u.prototype.iaddn=function(a){return y("number"==typeof a),y(a<67108864),a<0?this.isubn(-a):0!==this.negative?1===this.length&&(0|this.words[0])<=a?(this.words[0]=a-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},u.prototype._iaddn=function(a){this.words[0]+=a;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},u.prototype.isubn=function(a){if(y("number"==typeof a),y(a<67108864),a<0)return this.iaddn(-a);if(0!==this.negative)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this._strip()},u.prototype.addn=function(a){return this.clone().iaddn(a)},u.prototype.subn=function(a){return this.clone().isubn(a)},u.prototype.iabs=function(){return this.negative=0,this},u.prototype.abs=function(){return this.clone().iabs()},u.prototype._ishlnsubmul=function(a,f,M){var d;this._expand(a.length+M);var i,m=0;for(d=0;d<a.length;d++){i=(0|this.words[d+M])+m;var q=(0|a.words[d])*f;m=((i-=67108863&q)>>26)-(q/67108864|0),this.words[d+M]=67108863&i}for(;d<this.length-M;d++)m=(i=(0|this.words[d+M])+m)>>26,this.words[d+M]=67108863&i;if(0===m)return this._strip();for(y(-1===m),m=0,d=0;d<this.length;d++)m=(i=-(0|this.words[d])+m)>>26,this.words[d]=67108863&i;return this.negative=1,this._strip()},u.prototype._wordDiv=function(a,f){var M,A=this.clone(),d=a,i=0|d.words[d.length-1];0!=(M=26-this._countBits(i))&&(d=d.ushln(M),A.iushln(M),i=0|d.words[d.length-1]);var z,q=A.length-d.length;if("mod"!==f){(z=new u(null)).length=q+1,z.words=new Array(z.length);for(var J=0;J<z.length;J++)z.words[J]=0}var ce=A.clone()._ishlnsubmul(d,1,q);0===ce.negative&&(A=ce,z&&(z.words[q]=1));for(var se=q-1;se>=0;se--){var he=67108864*(0|A.words[d.length+se])+(0|A.words[d.length+se-1]);for(he=Math.min(he/i|0,67108863),A._ishlnsubmul(d,he,se);0!==A.negative;)he--,A.negative=0,A._ishlnsubmul(d,1,se),A.isZero()||(A.negative^=1);z&&(z.words[se]=he)}return z&&z._strip(),A._strip(),"div"!==f&&0!==M&&A.iushrn(M),{div:z||null,mod:A}},u.prototype.divmod=function(a,f,M){return y(!a.isZero()),this.isZero()?{div:new u(0),mod:new u(0)}:0!==this.negative&&0===a.negative?(i=this.neg().divmod(a,f),"mod"!==f&&(A=i.div.neg()),"div"!==f&&(d=i.mod.neg(),M&&0!==d.negative&&d.iadd(a)),{div:A,mod:d}):0===this.negative&&0!==a.negative?(i=this.divmod(a.neg(),f),"mod"!==f&&(A=i.div.neg()),{div:A,mod:i.mod}):0!=(this.negative&a.negative)?(i=this.neg().divmod(a.neg(),f),"div"!==f&&(d=i.mod.neg(),M&&0!==d.negative&&d.isub(a)),{div:i.div,mod:d}):a.length>this.length||this.cmp(a)<0?{div:new u(0),mod:this}:1===a.length?"div"===f?{div:this.divn(a.words[0]),mod:null}:"mod"===f?{div:null,mod:new u(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new u(this.modrn(a.words[0]))}:this._wordDiv(a,f);var A,d,i},u.prototype.div=function(a){return this.divmod(a,"div",!1).div},u.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},u.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},u.prototype.divRound=function(a){var f=this.divmod(a);if(f.mod.isZero())return f.div;var M=0!==f.div.negative?f.mod.isub(a):f.mod,A=a.ushrn(1),d=a.andln(1),i=M.cmp(A);return i<0||1===d&&0===i?f.div:0!==f.div.negative?f.div.isubn(1):f.div.iaddn(1)},u.prototype.modrn=function(a){var f=a<0;f&&(a=-a),y(a<=67108863);for(var M=(1<<26)%a,A=0,d=this.length-1;d>=0;d--)A=(M*A+(0|this.words[d]))%a;return f?-A:A},u.prototype.modn=function(a){return this.modrn(a)},u.prototype.idivn=function(a){var f=a<0;f&&(a=-a),y(a<=67108863);for(var M=0,A=this.length-1;A>=0;A--){var d=(0|this.words[A])+67108864*M;this.words[A]=d/a|0,M=d%a}return this._strip(),f?this.ineg():this},u.prototype.divn=function(a){return this.clone().idivn(a)},u.prototype.egcd=function(a){y(0===a.negative),y(!a.isZero());var f=this,M=a.clone();f=0!==f.negative?f.umod(a):f.clone();for(var A=new u(1),d=new u(0),i=new u(0),m=new u(1),q=0;f.isEven()&&M.isEven();)f.iushrn(1),M.iushrn(1),++q;for(var z=M.clone(),J=f.clone();!f.isZero();){for(var ce=0,se=1;0==(f.words[0]&se)&&ce<26;++ce,se<<=1);if(ce>0)for(f.iushrn(ce);ce-- >0;)(A.isOdd()||d.isOdd())&&(A.iadd(z),d.isub(J)),A.iushrn(1),d.iushrn(1);for(var he=0,ve=1;0==(M.words[0]&ve)&&he<26;++he,ve<<=1);if(he>0)for(M.iushrn(he);he-- >0;)(i.isOdd()||m.isOdd())&&(i.iadd(z),m.isub(J)),i.iushrn(1),m.iushrn(1);f.cmp(M)>=0?(f.isub(M),A.isub(i),d.isub(m)):(M.isub(f),i.isub(A),m.isub(d))}return{a:i,b:m,gcd:M.iushln(q)}},u.prototype._invmp=function(a){y(0===a.negative),y(!a.isZero());var ce,f=this,M=a.clone();f=0!==f.negative?f.umod(a):f.clone();for(var A=new u(1),d=new u(0),i=M.clone();f.cmpn(1)>0&&M.cmpn(1)>0;){for(var m=0,q=1;0==(f.words[0]&q)&&m<26;++m,q<<=1);if(m>0)for(f.iushrn(m);m-- >0;)A.isOdd()&&A.iadd(i),A.iushrn(1);for(var z=0,J=1;0==(M.words[0]&J)&&z<26;++z,J<<=1);if(z>0)for(M.iushrn(z);z-- >0;)d.isOdd()&&d.iadd(i),d.iushrn(1);f.cmp(M)>=0?(f.isub(M),A.isub(d)):(M.isub(f),d.isub(A))}return(ce=0===f.cmpn(1)?A:d).cmpn(0)<0&&ce.iadd(a),ce},u.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var f=this.clone(),M=a.clone();f.negative=0,M.negative=0;for(var A=0;f.isEven()&&M.isEven();A++)f.iushrn(1),M.iushrn(1);for(;;){for(;f.isEven();)f.iushrn(1);for(;M.isEven();)M.iushrn(1);var d=f.cmp(M);if(d<0){var i=f;f=M,M=i}else if(0===d||0===M.cmpn(1))break;f.isub(M)}return M.iushln(A)},u.prototype.invm=function(a){return this.egcd(a).a.umod(a)},u.prototype.isEven=function(){return 0==(1&this.words[0])},u.prototype.isOdd=function(){return 1==(1&this.words[0])},u.prototype.andln=function(a){return this.words[0]&a},u.prototype.bincn=function(a){y("number"==typeof a);var f=a%26,M=(a-f)/26,A=1<<f;if(this.length<=M)return this._expand(M+1),this.words[M]|=A,this;for(var d=A,i=M;0!==d&&i<this.length;i++){var m=0|this.words[i];d=(m+=d)>>>26,this.words[i]=m&=67108863}return 0!==d&&(this.words[i]=d,this.length++),this},u.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},u.prototype.cmpn=function(a){var M,f=a<0;if(0!==this.negative&&!f)return-1;if(0===this.negative&&f)return 1;if(this._strip(),this.length>1)M=1;else{f&&(a=-a),y(a<=67108863,"Number is too big");var A=0|this.words[0];M=A===a?0:A<a?-1:1}return 0!==this.negative?0|-M:M},u.prototype.cmp=function(a){if(0!==this.negative&&0===a.negative)return-1;if(0===this.negative&&0!==a.negative)return 1;var f=this.ucmp(a);return 0!==this.negative?0|-f:f},u.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var f=0,M=this.length-1;M>=0;M--){var A=0|this.words[M],d=0|a.words[M];if(A!==d){A<d?f=-1:A>d&&(f=1);break}}return f},u.prototype.gtn=function(a){return 1===this.cmpn(a)},u.prototype.gt=function(a){return 1===this.cmp(a)},u.prototype.gten=function(a){return this.cmpn(a)>=0},u.prototype.gte=function(a){return this.cmp(a)>=0},u.prototype.ltn=function(a){return-1===this.cmpn(a)},u.prototype.lt=function(a){return-1===this.cmp(a)},u.prototype.lten=function(a){return this.cmpn(a)<=0},u.prototype.lte=function(a){return this.cmp(a)<=0},u.prototype.eqn=function(a){return 0===this.cmpn(a)},u.prototype.eq=function(a){return 0===this.cmp(a)},u.red=function(a){return new r(a)},u.prototype.toRed=function(a){return y(!this.red,"Already a number in reduction context"),y(0===this.negative,"red works only with positives"),a.convertTo(this)._forceRed(a)},u.prototype.fromRed=function(){return y(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},u.prototype._forceRed=function(a){return this.red=a,this},u.prototype.forceRed=function(a){return y(!this.red,"Already a number in reduction context"),this._forceRed(a)},u.prototype.redAdd=function(a){return y(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},u.prototype.redIAdd=function(a){return y(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},u.prototype.redSub=function(a){return y(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},u.prototype.redISub=function(a){return y(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},u.prototype.redShl=function(a){return y(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},u.prototype.redMul=function(a){return y(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},u.prototype.redIMul=function(a){return y(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},u.prototype.redSqr=function(){return y(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},u.prototype.redISqr=function(){return y(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},u.prototype.redSqrt=function(){return y(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},u.prototype.redInvm=function(){return y(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},u.prototype.redNeg=function(){return y(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},u.prototype.redPow=function(a){return y(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var j={k256:null,p224:null,p192:null,p25519:null};function W(l,a){this.name=l,this.p=new u(a,16),this.n=this.p.bitLength(),this.k=new u(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function X(){W.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function K(){W.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function ge(){W.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function R(){W.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function r(l){if("string"==typeof l){var a=u._prime(l);this.m=a.p,this.prime=a}else y(l.gtn(1),"modulus must be greater than 1"),this.m=l,this.prime=null}function s(l){r.call(this,l),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new u(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}W.prototype._tmp=function(){var a=new u(null);return a.words=new Array(Math.ceil(this.n/13)),a},W.prototype.ireduce=function(a){var M,f=a;do{this.split(f,this.tmp),M=(f=(f=this.imulK(f)).iadd(this.tmp)).bitLength()}while(M>this.n);var A=M<this.n?-1:f.ucmp(this.p);return 0===A?(f.words[0]=0,f.length=1):A>0?f.isub(this.p):void 0!==f.strip?f.strip():f._strip(),f},W.prototype.split=function(a,f){a.iushrn(this.n,0,f)},W.prototype.imulK=function(a){return a.imul(this.k)},x(X,W),X.prototype.split=function(a,f){for(var M=4194303,A=Math.min(a.length,9),d=0;d<A;d++)f.words[d]=a.words[d];if(f.length=A,a.length<=9)return a.words[0]=0,void(a.length=1);var i=a.words[9];for(f.words[f.length++]=i&M,d=10;d<a.length;d++){var m=0|a.words[d];a.words[d-10]=(m&M)<<4|i>>>22,i=m}a.words[d-10]=i>>>=22,a.length-=0===i&&a.length>10?10:9},X.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var f=0,M=0;M<a.length;M++){var A=0|a.words[M];a.words[M]=67108863&(f+=977*A),f=64*A+(f/67108864|0)}return 0===a.words[a.length-1]&&(a.length--,0===a.words[a.length-1]&&a.length--),a},x(K,W),x(ge,W),x(R,W),R.prototype.imulK=function(a){for(var f=0,M=0;M<a.length;M++){var A=19*(0|a.words[M])+f,d=67108863&A;A>>>=26,a.words[M]=d,f=A}return 0!==f&&(a.words[a.length++]=f),a},u._prime=function(a){if(j[a])return j[a];var f;if("k256"===a)f=new X;else if("p224"===a)f=new K;else if("p192"===a)f=new ge;else{if("p25519"!==a)throw new Error("Unknown prime "+a);f=new R}return j[a]=f,f},r.prototype._verify1=function(a){y(0===a.negative,"red works only with positives"),y(a.red,"red works only with red numbers")},r.prototype._verify2=function(a,f){y(0==(a.negative|f.negative),"red works only with positives"),y(a.red&&a.red===f.red,"red works only with red numbers")},r.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(v(a,a.umod(this.m)._forceRed(this)),a)},r.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},r.prototype.add=function(a,f){this._verify2(a,f);var M=a.add(f);return M.cmp(this.m)>=0&&M.isub(this.m),M._forceRed(this)},r.prototype.iadd=function(a,f){this._verify2(a,f);var M=a.iadd(f);return M.cmp(this.m)>=0&&M.isub(this.m),M},r.prototype.sub=function(a,f){this._verify2(a,f);var M=a.sub(f);return M.cmpn(0)<0&&M.iadd(this.m),M._forceRed(this)},r.prototype.isub=function(a,f){this._verify2(a,f);var M=a.isub(f);return M.cmpn(0)<0&&M.iadd(this.m),M},r.prototype.shl=function(a,f){return this._verify1(a),this.imod(a.ushln(f))},r.prototype.imul=function(a,f){return this._verify2(a,f),this.imod(a.imul(f))},r.prototype.mul=function(a,f){return this._verify2(a,f),this.imod(a.mul(f))},r.prototype.isqr=function(a){return this.imul(a,a.clone())},r.prototype.sqr=function(a){return this.mul(a,a)},r.prototype.sqrt=function(a){if(a.isZero())return a.clone();var f=this.m.andln(3);if(y(f%2==1),3===f){var M=this.m.add(new u(1)).iushrn(2);return this.pow(a,M)}for(var A=this.m.subn(1),d=0;!A.isZero()&&0===A.andln(1);)d++,A.iushrn(1);y(!A.isZero());var i=new u(1).toRed(this),m=i.redNeg(),q=this.m.subn(1).iushrn(1),z=this.m.bitLength();for(z=new u(2*z*z).toRed(this);0!==this.pow(z,q).cmp(m);)z.redIAdd(m);for(var J=this.pow(z,A),ce=this.pow(a,A.addn(1).iushrn(1)),se=this.pow(a,A),he=d;0!==se.cmp(i);){for(var ve=se,ae=0;0!==ve.cmp(i);ae++)ve=ve.redSqr();y(ae<he);var de=this.pow(J,new u(1).iushln(he-ae-1));ce=ce.redMul(de),J=de.redSqr(),se=se.redMul(J),he=ae}return ce},r.prototype.invm=function(a){var f=a._invmp(this.m);return 0!==f.negative?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},r.prototype.pow=function(a,f){if(f.isZero())return new u(1).toRed(this);if(0===f.cmpn(1))return a.clone();var A=new Array(16);A[0]=new u(1).toRed(this),A[1]=a;for(var d=2;d<A.length;d++)A[d]=this.mul(A[d-1],a);var i=A[0],m=0,q=0,z=f.bitLength()%26;for(0===z&&(z=26),d=f.length-1;d>=0;d--){for(var J=f.words[d],ce=z-1;ce>=0;ce--){var se=J>>ce&1;i!==A[0]&&(i=this.sqr(i)),0!==se||0!==m?(m<<=1,m|=se,(4==++q||0===d&&0===ce)&&(i=this.mul(i,A[m]),q=0,m=0)):q=0}z=26}return i},r.prototype.convertTo=function(a){var f=a.umod(this.m);return f===a?f.clone():f},r.prototype.convertFrom=function(a){var f=a.clone();return f.red=null,f},u.mont=function(a){return new s(a)},x(s,r),s.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},s.prototype.convertFrom=function(a){var f=this.imod(a.mul(this.rinv));return f.red=null,f},s.prototype.imul=function(a,f){if(a.isZero()||f.isZero())return a.words[0]=0,a.length=1,a;var M=a.imul(f),A=M.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=M.isub(A).iushrn(this.shift),i=d;return d.cmp(this.m)>=0?i=d.isub(this.m):d.cmpn(0)<0&&(i=d.iadd(this.m)),i._forceRed(this)},s.prototype.mul=function(a,f){if(a.isZero()||f.isZero())return new u(0)._forceRed(this);var M=a.mul(f),A=M.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=M.isub(A).iushrn(this.shift),i=d;return d.cmp(this.m)>=0?i=d.isub(this.m):d.cmpn(0)<0&&(i=d.iadd(this.m)),i._forceRed(this)},s.prototype.invm=function(a){return this.imod(a._invmp(this.m).mul(this.r2))._forceRed(this)}}(Y=T.nmd(Y),this)},4761:(Y,L,T)=>{var p;function N(x){this.rand=x}if(Y.exports=function(u){return p||(p=new N(null)),p.generate(u)},Y.exports.Rand=N,N.prototype.generate=function(u){return this._rand(u)},N.prototype._rand=function(u){if(this.rand.getBytes)return this.rand.getBytes(u);for(var g=new Uint8Array(u),C=0;C<g.length;C++)g[C]=this.rand.getByte();return g},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?N.prototype._rand=function(u){var g=new Uint8Array(u);return self.crypto.getRandomValues(g),g}:self.msCrypto&&self.msCrypto.getRandomValues?N.prototype._rand=function(u){var g=new Uint8Array(u);return self.msCrypto.getRandomValues(g),g}:"object"==typeof window&&(N.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var y=T(9726);if("function"!=typeof y.randomBytes)throw new Error("Not supported");N.prototype._rand=function(u){return y.randomBytes(u)}}catch(x){}},875:(Y,L,T)=>{var p=T(5859).Buffer;function N(P){p.isBuffer(P)||(P=p.from(P));for(var E=P.length/4|0,v=new Array(E),h=0;h<E;h++)v[h]=P.readUInt32BE(4*h);return v}function y(P){for(;0<P.length;P++)P[0]=0}function x(P,E,v,h,_){for(var U,j,W,X,b=v[0],w=v[1],I=v[2],D=v[3],k=P[0]^E[0],O=P[1]^E[1],V=P[2]^E[2],B=P[3]^E[3],K=4,ge=1;ge<_;ge++)U=b[k>>>24]^w[O>>>16&255]^I[V>>>8&255]^D[255&B]^E[K++],j=b[O>>>24]^w[V>>>16&255]^I[B>>>8&255]^D[255&k]^E[K++],W=b[V>>>24]^w[B>>>16&255]^I[k>>>8&255]^D[255&O]^E[K++],X=b[B>>>24]^w[k>>>16&255]^I[O>>>8&255]^D[255&V]^E[K++],k=U,O=j,V=W,B=X;return U=(h[k>>>24]<<24|h[O>>>16&255]<<16|h[V>>>8&255]<<8|h[255&B])^E[K++],j=(h[O>>>24]<<24|h[V>>>16&255]<<16|h[B>>>8&255]<<8|h[255&k])^E[K++],W=(h[V>>>24]<<24|h[B>>>16&255]<<16|h[k>>>8&255]<<8|h[255&O])^E[K++],X=(h[B>>>24]<<24|h[k>>>16&255]<<16|h[O>>>8&255]<<8|h[255&V])^E[K++],[U>>>=0,j>>>=0,W>>>=0,X>>>=0]}var u=[0,1,2,4,8,16,32,64,128,27,54],g=function(){for(var P=new Array(256),E=0;E<256;E++)P[E]=E<128?E<<1:E<<1^283;for(var v=[],h=[],_=[[],[],[],[]],b=[[],[],[],[]],w=0,I=0,D=0;D<256;++D){var k=I^I<<1^I<<2^I<<3^I<<4;v[w]=k=k>>>8^255&k^99,h[k]=w;var O=P[w],V=P[O],B=P[V],U=257*P[k]^16843008*k;_[0][w]=U<<24|U>>>8,_[1][w]=U<<16|U>>>16,_[2][w]=U<<8|U>>>24,_[3][w]=U,b[0][k]=(U=16843009*B^65537*V^257*O^16843008*w)<<24|U>>>8,b[1][k]=U<<16|U>>>16,b[2][k]=U<<8|U>>>24,b[3][k]=U,0===w?w=I=1:(w=O^P[P[P[B^O]]],I^=P[P[I]])}return{SBOX:v,INV_SBOX:h,SUB_MIX:_,INV_SUB_MIX:b}}();function C(P){this._key=N(P),this._reset()}C.blockSize=16,C.keySize=32,C.prototype.blockSize=C.blockSize,C.prototype.keySize=C.keySize,C.prototype._reset=function(){for(var P=this._key,E=P.length,v=E+6,h=4*(v+1),_=[],b=0;b<E;b++)_[b]=P[b];for(b=E;b<h;b++){var w=_[b-1];b%E==0?(w=g.SBOX[(w=w<<8|w>>>24)>>>24]<<24|g.SBOX[w>>>16&255]<<16|g.SBOX[w>>>8&255]<<8|g.SBOX[255&w],w^=u[b/E|0]<<24):E>6&&b%E==4&&(w=g.SBOX[w>>>24]<<24|g.SBOX[w>>>16&255]<<16|g.SBOX[w>>>8&255]<<8|g.SBOX[255&w]),_[b]=_[b-E]^w}for(var I=[],D=0;D<h;D++){var k=h-D,O=_[k-(D%4?0:4)];I[D]=D<4||k<=4?O:g.INV_SUB_MIX[0][g.SBOX[O>>>24]]^g.INV_SUB_MIX[1][g.SBOX[O>>>16&255]]^g.INV_SUB_MIX[2][g.SBOX[O>>>8&255]]^g.INV_SUB_MIX[3][g.SBOX[255&O]]}this._nRounds=v,this._keySchedule=_,this._invKeySchedule=I},C.prototype.encryptBlockRaw=function(P){return x(P=N(P),this._keySchedule,g.SUB_MIX,g.SBOX,this._nRounds)},C.prototype.encryptBlock=function(P){var E=this.encryptBlockRaw(P),v=p.allocUnsafe(16);return v.writeUInt32BE(E[0],0),v.writeUInt32BE(E[1],4),v.writeUInt32BE(E[2],8),v.writeUInt32BE(E[3],12),v},C.prototype.decryptBlock=function(P){var E=(P=N(P))[1];P[1]=P[3],P[3]=E;var v=x(P,this._invKeySchedule,g.INV_SUB_MIX,g.INV_SBOX,this._nRounds),h=p.allocUnsafe(16);return h.writeUInt32BE(v[0],0),h.writeUInt32BE(v[3],4),h.writeUInt32BE(v[2],8),h.writeUInt32BE(v[1],12),h},C.prototype.scrub=function(){y(this._keySchedule),y(this._invKeySchedule),y(this._key)},Y.exports.AES=C},295:(Y,L,T)=>{var p=T(875),N=T(5859).Buffer,y=T(5834),x=T(9879),u=T(4504),g=T(3910),C=T(1643);function v(h,_,b,w){y.call(this);var I=N.alloc(4,0);this._cipher=new p.AES(_);var D=this._cipher.encryptBlock(I);this._ghash=new u(D),b=function(h,_,b){if(12===_.length)return h._finID=N.concat([_,N.from([0,0,0,1])]),N.concat([_,N.from([0,0,0,2])]);var w=new u(b),I=_.length,D=I%16;w.update(_),D&&w.update(N.alloc(D=16-D,0)),w.update(N.alloc(8,0));var k=8*I,O=N.alloc(8);O.writeUIntBE(k,0,8),w.update(O),h._finID=w.state;var V=N.from(h._finID);return C(V),V}(this,b,D),this._prev=N.from(b),this._cache=N.allocUnsafe(0),this._secCache=N.allocUnsafe(0),this._decrypt=w,this._alen=0,this._len=0,this._mode=h,this._authTag=null,this._called=!1}x(v,y),v.prototype._update=function(h){if(!this._called&&this._alen){var _=16-this._alen%16;_<16&&(_=N.alloc(_,0),this._ghash.update(_))}this._called=!0;var b=this._mode.encrypt(this,h);return this._ghash.update(this._decrypt?h:b),this._len+=h.length,b},v.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var h=g(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(h,_){var b=0;h.length!==_.length&&b++;for(var w=Math.min(h.length,_.length),I=0;I<w;++I)b+=h[I]^_[I];return b}(h,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=h,this._cipher.scrub()},v.prototype.getAuthTag=function(){if(this._decrypt||!N.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},v.prototype.setAuthTag=function(_){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=_},v.prototype.setAAD=function(_){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(_),this._alen+=_.length},Y.exports=v},9586:(Y,L,T)=>{var p=T(6481),N=T(3617),y=T(4946);L.createCipher=L.Cipher=p.createCipher,L.createCipheriv=L.Cipheriv=p.createCipheriv,L.createDecipher=L.Decipher=N.createDecipher,L.createDecipheriv=L.Decipheriv=N.createDecipheriv,L.listCiphers=L.getCiphers=function(){return Object.keys(y)}},3617:(Y,L,T)=>{var p=T(295),N=T(5859).Buffer,y=T(9396),x=T(9223),u=T(5834),g=T(875),C=T(2367);function E(w,I,D){u.call(this),this._cache=new v,this._last=void 0,this._cipher=new g.AES(I),this._prev=N.from(D),this._mode=w,this._autopadding=!0}function v(){this.cache=N.allocUnsafe(0)}function _(w,I,D){var k=y[w.toLowerCase()];if(!k)throw new TypeError("invalid suite type");if("string"==typeof D&&(D=N.from(D)),"GCM"!==k.mode&&D.length!==k.iv)throw new TypeError("invalid iv length "+D.length);if("string"==typeof I&&(I=N.from(I)),I.length!==k.key/8)throw new TypeError("invalid key length "+I.length);return"stream"===k.type?new x(k.module,I,D,!0):"auth"===k.type?new p(k.module,I,D,!0):new E(k.module,I,D)}T(9879)(E,u),E.prototype._update=function(w){this._cache.add(w);for(var I,D,k=[];I=this._cache.get(this._autopadding);)D=this._mode.decrypt(this,I),k.push(D);return N.concat(k)},E.prototype._final=function(){var w=this._cache.flush();if(this._autopadding)return function(w){var I=w[15];if(I<1||I>16)throw new Error("unable to decrypt data");for(var D=-1;++D<I;)if(w[D+(16-I)]!==I)throw new Error("unable to decrypt data");if(16!==I)return w.slice(0,16-I)}(this._mode.decrypt(this,w));if(w)throw new Error("data not multiple of block length")},E.prototype.setAutoPadding=function(w){return this._autopadding=!!w,this},v.prototype.add=function(w){this.cache=N.concat([this.cache,w])},v.prototype.get=function(w){var I;if(w){if(this.cache.length>16)return I=this.cache.slice(0,16),this.cache=this.cache.slice(16),I}else if(this.cache.length>=16)return I=this.cache.slice(0,16),this.cache=this.cache.slice(16),I;return null},v.prototype.flush=function(){if(this.cache.length)return this.cache},L.createDecipher=function(w,I){var D=y[w.toLowerCase()];if(!D)throw new TypeError("invalid suite type");var k=C(I,!1,D.key,D.iv);return _(w,k.key,k.iv)},L.createDecipheriv=_},6481:(Y,L,T)=>{var p=T(9396),N=T(295),y=T(5859).Buffer,x=T(9223),u=T(5834),g=T(875),C=T(2367);function E(w,I,D){u.call(this),this._cache=new h,this._cipher=new g.AES(I),this._prev=y.from(D),this._mode=w,this._autopadding=!0}T(9879)(E,u),E.prototype._update=function(w){this._cache.add(w);for(var I,D,k=[];I=this._cache.get();)D=this._mode.encrypt(this,I),k.push(D);return y.concat(k)};var v=y.alloc(16,16);function h(){this.cache=y.allocUnsafe(0)}function _(w,I,D){var k=p[w.toLowerCase()];if(!k)throw new TypeError("invalid suite type");if("string"==typeof I&&(I=y.from(I)),I.length!==k.key/8)throw new TypeError("invalid key length "+I.length);if("string"==typeof D&&(D=y.from(D)),"GCM"!==k.mode&&D.length!==k.iv)throw new TypeError("invalid iv length "+D.length);return"stream"===k.type?new x(k.module,I,D):"auth"===k.type?new N(k.module,I,D):new E(k.module,I,D)}E.prototype._final=function(){var w=this._cache.flush();if(this._autopadding)return w=this._mode.encrypt(this,w),this._cipher.scrub(),w;if(!w.equals(v))throw this._cipher.scrub(),new Error("data not multiple of block length")},E.prototype.setAutoPadding=function(w){return this._autopadding=!!w,this},h.prototype.add=function(w){this.cache=y.concat([this.cache,w])},h.prototype.get=function(){if(this.cache.length>15){var w=this.cache.slice(0,16);return this.cache=this.cache.slice(16),w}return null},h.prototype.flush=function(){for(var w=16-this.cache.length,I=y.allocUnsafe(w),D=-1;++D<w;)I.writeUInt8(w,D);return y.concat([this.cache,I])},L.createCipheriv=_,L.createCipher=function(w,I){var D=p[w.toLowerCase()];if(!D)throw new TypeError("invalid suite type");var k=C(I,!1,D.key,D.iv);return _(w,k.key,k.iv)}},4504:(Y,L,T)=>{var p=T(5859).Buffer,N=p.alloc(16,0);function x(g){var C=p.allocUnsafe(16);return C.writeUInt32BE(g[0]>>>0,0),C.writeUInt32BE(g[1]>>>0,4),C.writeUInt32BE(g[2]>>>0,8),C.writeUInt32BE(g[3]>>>0,12),C}function u(g){this.h=g,this.state=p.alloc(16,0),this.cache=p.allocUnsafe(0)}u.prototype.ghash=function(g){for(var C=-1;++C<g.length;)this.state[C]^=g[C];this._multiply()},u.prototype._multiply=function(){for(var P,v,g=function(g){return[g.readUInt32BE(0),g.readUInt32BE(4),g.readUInt32BE(8),g.readUInt32BE(12)]}(this.h),C=[0,0,0,0],h=-1;++h<128;){for(0!=(this.state[~~(h/8)]&1<<7-h%8)&&(C[0]^=g[0],C[1]^=g[1],C[2]^=g[2],C[3]^=g[3]),v=0!=(1&g[3]),P=3;P>0;P--)g[P]=g[P]>>>1|(1&g[P-1])<<31;g[0]=g[0]>>>1,v&&(g[0]=g[0]^225<<24)}this.state=x(C)},u.prototype.update=function(g){this.cache=p.concat([this.cache,g]);for(var C;this.cache.length>=16;)C=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(C)},u.prototype.final=function(g,C){return this.cache.length&&this.ghash(p.concat([this.cache,N],16)),this.ghash(x([0,g,0,C])),this.state},Y.exports=u},1643:Y=>{Y.exports=function(T){for(var N,p=T.length;p--;){if(255!==(N=T.readUInt8(p))){N++,T.writeUInt8(N,p);break}T.writeUInt8(0,p)}}},4552:(Y,L,T)=>{var p=T(3910);L.encrypt=function(N,y){var x=p(y,N._prev);return N._prev=N._cipher.encryptBlock(x),N._prev},L.decrypt=function(N,y){var x=N._prev;N._prev=y;var u=N._cipher.decryptBlock(y);return p(u,x)}},7606:(Y,L,T)=>{var p=T(5859).Buffer,N=T(3910);function y(x,u,g){var C=u.length,P=N(u,x._cache);return x._cache=x._cache.slice(C),x._prev=p.concat([x._prev,g?u:P]),P}L.encrypt=function(x,u,g){for(var P,C=p.allocUnsafe(0);u.length;){if(0===x._cache.length&&(x._cache=x._cipher.encryptBlock(x._prev),x._prev=p.allocUnsafe(0)),!(x._cache.length<=u.length)){C=p.concat([C,y(x,u,g)]);break}C=p.concat([C,y(x,u.slice(0,P=x._cache.length),g)]),u=u.slice(P)}return C}},7850:(Y,L,T)=>{var p=T(5859).Buffer;function N(x,u,g){for(var h,_,P=-1,v=0;++P<8;)v+=(128&(_=x._cipher.encryptBlock(x._prev)[0]^(h=u&1<<7-P?128:0)))>>P%8,x._prev=y(x._prev,g?h:_);return v}function y(x,u){var g=x.length,C=-1,P=p.allocUnsafe(x.length);for(x=p.concat([x,p.from([u])]);++C<g;)P[C]=x[C]<<1|x[C+1]>>7;return P}L.encrypt=function(x,u,g){for(var C=u.length,P=p.allocUnsafe(C),E=-1;++E<C;)P[E]=N(x,u[E],g);return P}},6377:(Y,L,T)=>{var p=T(5859).Buffer;function N(y,x,u){var C=y._cipher.encryptBlock(y._prev)[0]^x;return y._prev=p.concat([y._prev.slice(1),p.from([u?x:C])]),C}L.encrypt=function(y,x,u){for(var g=x.length,C=p.allocUnsafe(g),P=-1;++P<g;)C[P]=N(y,x[P],u);return C}},9306:(Y,L,T)=>{var p=T(3910),N=T(5859).Buffer,y=T(1643);function x(g){var C=g._cipher.encryptBlockRaw(g._prev);return y(g._prev),C}L.encrypt=function(g,C){var P=Math.ceil(C.length/16),E=g._cache.length;g._cache=N.concat([g._cache,N.allocUnsafe(16*P)]);for(var v=0;v<P;v++){var h=x(g),_=E+16*v;g._cache.writeUInt32BE(h[0],_+0),g._cache.writeUInt32BE(h[1],_+4),g._cache.writeUInt32BE(h[2],_+8),g._cache.writeUInt32BE(h[3],_+12)}var b=g._cache.slice(0,C.length);return g._cache=g._cache.slice(C.length),p(C,b)}},8562:(Y,L)=>{L.encrypt=function(T,p){return T._cipher.encryptBlock(p)},L.decrypt=function(T,p){return T._cipher.decryptBlock(p)}},9396:(Y,L,T)=>{var p={ECB:T(8562),CBC:T(4552),CFB:T(7606),CFB8:T(6377),CFB1:T(7850),OFB:T(7461),CTR:T(9306),GCM:T(9306)},N=T(4946);for(var y in N)N[y].module=p[N[y].mode];Y.exports=N},7461:(Y,L,T)=>{var p=T(3910);function N(y){return y._prev=y._cipher.encryptBlock(y._prev),y._prev}L.encrypt=function(y,x){for(;y._cache.length<x.length;)y._cache=Buffer.concat([y._cache,N(y)]);var u=y._cache.slice(0,x.length);return y._cache=y._cache.slice(x.length),p(x,u)}},9223:(Y,L,T)=>{var p=T(875),N=T(5859).Buffer,y=T(5834);function u(g,C,P,E){y.call(this),this._cipher=new p.AES(C),this._prev=N.from(P),this._cache=N.allocUnsafe(0),this._secCache=N.allocUnsafe(0),this._decrypt=E,this._mode=g}T(9879)(u,y),u.prototype._update=function(g){return this._mode.encrypt(this,g,this._decrypt)},u.prototype._final=function(){this._cipher.scrub()},Y.exports=u},7991:(Y,L,T)=>{var p=T(3796),N=T(9586),y=T(9396),x=T(3908),u=T(2367);function P(h,_,b){if(h=h.toLowerCase(),y[h])return N.createCipheriv(h,_,b);if(x[h])return new p({key:_,iv:b,mode:h});throw new TypeError("invalid suite type")}function E(h,_,b){if(h=h.toLowerCase(),y[h])return N.createDecipheriv(h,_,b);if(x[h])return new p({key:_,iv:b,mode:h,decrypt:!0});throw new TypeError("invalid suite type")}L.createCipher=L.Cipher=function(h,_){var b,w;if(h=h.toLowerCase(),y[h])b=y[h].key,w=y[h].iv;else{if(!x[h])throw new TypeError("invalid suite type");b=8*x[h].key,w=x[h].iv}var I=u(_,!1,b,w);return P(h,I.key,I.iv)},L.createCipheriv=L.Cipheriv=P,L.createDecipher=L.Decipher=function(h,_){var b,w;if(h=h.toLowerCase(),y[h])b=y[h].key,w=y[h].iv;else{if(!x[h])throw new TypeError("invalid suite type");b=8*x[h].key,w=x[h].iv}var I=u(_,!1,b,w);return E(h,I.key,I.iv)},L.createDecipheriv=L.Decipheriv=E,L.listCiphers=L.getCiphers=function(){return Object.keys(x).concat(N.getCiphers())}},3796:(Y,L,T)=>{var p=T(5834),N=T(8534),y=T(9879),x=T(5859).Buffer,u={"des-ede3-cbc":N.CBC.instantiate(N.EDE),"des-ede3":N.EDE,"des-ede-cbc":N.CBC.instantiate(N.EDE),"des-ede":N.EDE,"des-cbc":N.CBC.instantiate(N.DES),"des-ecb":N.DES};function g(C){p.call(this);var v,P=C.mode.toLowerCase(),E=u[P];v=C.decrypt?"decrypt":"encrypt";var h=C.key;x.isBuffer(h)||(h=x.from(h)),("des-ede"===P||"des-ede-cbc"===P)&&(h=x.concat([h,h.slice(0,8)]));var _=C.iv;x.isBuffer(_)||(_=x.from(_)),this._des=E.create({key:h,iv:_,type:v})}u.des=u["des-cbc"],u.des3=u["des-ede3-cbc"],Y.exports=g,y(g,p),g.prototype._update=function(C){return x.from(this._des.update(C))},g.prototype._final=function(){return x.from(this._des.final())}},3908:(Y,L)=>{L["des-ecb"]={key:8,iv:0},L["des-cbc"]=L.des={key:8,iv:8},L["des-ede3-cbc"]=L.des3={key:24,iv:8},L["des-ede3"]={key:24,iv:0},L["des-ede-cbc"]={key:16,iv:8},L["des-ede"]={key:16,iv:0}},5842:(Y,L,T)=>{var p=T(2630),N=T(6589);function x(g){var P,C=g.modulus.byteLength();do{P=new p(N(C))}while(P.cmp(g.modulus)>=0||!P.umod(g.prime1)||!P.umod(g.prime2));return P}function u(g,C){var P=function(g){var C=x(g);return{blinder:C.toRed(p.mont(g.modulus)).redPow(new p(g.publicExponent)).fromRed(),unblinder:C.invm(g.modulus)}}(C),E=C.modulus.byteLength(),v=new p(g).mul(P.blinder).umod(C.modulus),h=v.toRed(p.mont(C.prime1)),_=v.toRed(p.mont(C.prime2)),b=C.coefficient,w=C.prime1,I=C.prime2,D=h.redPow(C.exponent1).fromRed(),k=_.redPow(C.exponent2).fromRed(),O=D.isub(k).imul(b).umod(w).imul(I);return k.iadd(O).imul(P.unblinder).umod(C.modulus).toArrayLike(Buffer,"be",E)}u.getr=x,Y.exports=u},6380:(Y,L,T)=>{Y.exports=T(8770)},3566:(Y,L,T)=>{var p=T(6329).Buffer,N=T(2506),y=T(8300),x=T(9879),u=T(7052),g=T(8022),C=T(8770);function P(_){y.Writable.call(this);var b=C[_];if(!b)throw new Error("Unknown message digest");this._hashType=b.hash,this._hash=N(b.hash),this._tag=b.id,this._signType=b.sign}function E(_){y.Writable.call(this);var b=C[_];if(!b)throw new Error("Unknown message digest");this._hash=N(b.hash),this._tag=b.id,this._signType=b.sign}function v(_){return new P(_)}function h(_){return new E(_)}Object.keys(C).forEach(function(_){C[_].id=p.from(C[_].id,"hex"),C[_.toLowerCase()]=C[_]}),x(P,y.Writable),P.prototype._write=function(b,w,I){this._hash.update(b),I()},P.prototype.update=function(b,w){return"string"==typeof b&&(b=p.from(b,w)),this._hash.update(b),this},P.prototype.sign=function(b,w){this.end();var I=this._hash.digest(),D=u(I,b,this._hashType,this._signType,this._tag);return w?D.toString(w):D},x(E,y.Writable),E.prototype._write=function(b,w,I){this._hash.update(b),I()},E.prototype.update=function(b,w){return"string"==typeof b&&(b=p.from(b,w)),this._hash.update(b),this},E.prototype.verify=function(b,w,I){"string"==typeof w&&(w=p.from(w,I)),this.end();var D=this._hash.digest();return g(w,D,b,this._signType,this._tag)},Y.exports={Sign:v,Verify:h,createSign:v,createVerify:h}},7052:(Y,L,T)=>{var p=T(6329).Buffer,N=T(5903),y=T(5842),x=T(5247).ec,u=T(2630),g=T(1997),C=T(1308);function _(k,O,V,B){if((k=p.from(k.toArray())).length<O.byteLength()){var U=p.alloc(O.byteLength()-k.length);k=p.concat([U,k])}var j=V.length,W=function(k,O){k=(k=b(k,O)).mod(O);var V=p.from(k.toArray());if(V.length<O.byteLength()){var B=p.alloc(O.byteLength()-V.length);V=p.concat([B,V])}return V}(V,O),X=p.alloc(j);X.fill(1);var K=p.alloc(j);return K=N(B,K).update(X).update(p.from([0])).update(k).update(W).digest(),X=N(B,K).update(X).digest(),{k:K=N(B,K).update(X).update(p.from([1])).update(k).update(W).digest(),v:X=N(B,K).update(X).digest()}}function b(k,O){var V=new u(k),B=(k.length<<3)-O.bitLength();return B>0&&V.ishrn(B),V}function I(k,O,V){var B,U;do{for(B=p.alloc(0);8*B.length<k.bitLength();)O.v=N(V,O.k).update(O.v).digest(),B=p.concat([B,O.v]);U=b(B,k),O.k=N(V,O.k).update(O.v).update(p.from([0])).digest(),O.v=N(V,O.k).update(O.v).digest()}while(-1!==U.cmp(k));return U}function D(k,O,V,B){return k.toRed(u.mont(V)).redPow(O).fromRed().mod(B)}Y.exports=function(k,O,V,B,U){var j=g(O);if(j.curve){if("ecdsa"!==B&&"ecdsa/rsa"!==B)throw new Error("wrong private key type");return function(k,O){var V=C[O.curve.join(".")];if(!V)throw new Error("unknown curve "+O.curve.join("."));var j=new x(V).keyFromPrivate(O.privateKey).sign(k);return p.from(j.toDER())}(k,j)}if("dsa"===j.type){if("dsa"!==B)throw new Error("wrong private key type");return function(k,O,V){for(var K,B=O.params.priv_key,U=O.params.p,j=O.params.q,W=O.params.g,X=new u(0),ge=b(k,j).mod(j),R=!1,r=_(B,j,k,V);!1===R;)X=D(W,K=I(j,r,V),U,j),0===(R=K.invm(j).imul(ge.add(B.mul(X))).mod(j)).cmpn(0)&&(R=!1,X=new u(0));return function(k,O){k=k.toArray(),O=O.toArray(),128&k[0]&&(k=[0].concat(k)),128&O[0]&&(O=[0].concat(O));var B=[48,k.length+O.length+4,2,k.length];return B=B.concat(k,[2,O.length],O),p.from(B)}(X,R)}(k,j,V)}if("rsa"!==B&&"ecdsa/rsa"!==B)throw new Error("wrong private key type");k=p.concat([U,k]);for(var W=j.modulus.byteLength(),X=[0,1];k.length+X.length+1<W;)X.push(255);X.push(0);for(var K=-1;++K<k.length;)X.push(k[K]);return y(X,j)},Y.exports.getKey=_,Y.exports.makeKey=I},8022:(Y,L,T)=>{var p=T(6329).Buffer,N=T(2630),y=T(5247).ec,x=T(1997),u=T(1308);function E(v,h){if(v.cmpn(0)<=0)throw new Error("invalid sig");if(v.cmp(h)>=h)throw new Error("invalid sig")}Y.exports=function(v,h,_,b,w){var I=x(_);if("ec"===I.type){if("ecdsa"!==b&&"ecdsa/rsa"!==b)throw new Error("wrong public key type");return function(v,h,_){var b=u[_.data.algorithm.curve.join(".")];if(!b)throw new Error("unknown curve "+_.data.algorithm.curve.join("."));return new y(b).verify(h,v,_.data.subjectPrivateKey.data)}(v,h,I)}if("dsa"===I.type){if("dsa"!==b)throw new Error("wrong public key type");return function(v,h,_){var b=_.data.p,w=_.data.q,I=_.data.g,D=_.data.pub_key,k=x.signature.decode(v,"der"),O=k.s,V=k.r;E(O,w),E(V,w);var B=N.mont(b),U=O.invm(w);return 0===I.toRed(B).redPow(new N(h).mul(U).mod(w)).fromRed().mul(D.toRed(B).redPow(V.mul(U).mod(w)).fromRed()).mod(b).mod(w).cmp(V)}(v,h,I)}if("rsa"!==b&&"ecdsa/rsa"!==b)throw new Error("wrong public key type");h=p.concat([w,h]);for(var D=I.modulus.byteLength(),k=[1],O=0;h.length+k.length+2<D;)k.push(255),O++;k.push(0);for(var V=-1;++V<h.length;)k.push(h[V]);k=p.from(k);var B=N.mont(I.modulus);v=(v=new N(v).toRed(B)).redPow(new N(I.publicExponent)),v=p.from(v.fromRed().toArray());var U=O<8?1:0;for(D=Math.min(v.length,k.length),v.length!==k.length&&(U=1),V=-1;++V<D;)U|=v[V]^k[V];return 0===U}},6329:(Y,L,T)=>{var p=T(3875),N=p.Buffer;function y(u,g){for(var C in u)g[C]=u[C]}function x(u,g,C){return N(u,g,C)}N.from&&N.alloc&&N.allocUnsafe&&N.allocUnsafeSlow?Y.exports=p:(y(p,L),L.Buffer=x),x.prototype=Object.create(N.prototype),y(N,x),x.from=function(u,g,C){if("number"==typeof u)throw new TypeError("Argument must not be a number");return N(u,g,C)},x.alloc=function(u,g,C){if("number"!=typeof u)throw new TypeError("Argument must be a number");var P=N(u);return void 0!==g?"string"==typeof C?P.fill(g,C):P.fill(g):P.fill(0),P},x.allocUnsafe=function(u){if("number"!=typeof u)throw new TypeError("Argument must be a number");return N(u)},x.allocUnsafeSlow=function(u){if("number"!=typeof u)throw new TypeError("Argument must be a number");return p.SlowBuffer(u)}},3910:Y=>{Y.exports=function(T,p){for(var N=Math.min(T.length,p.length),y=new Buffer(N),x=0;x<N;++x)y[x]=T[x]^p[x];return y}},3875:(Y,L,T)=>{"use strict";var p=T(6434),N=T(2658),y="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;L.Buffer=C,L.SlowBuffer=function(ie){return+ie!=ie&&(ie=0),C.alloc(+ie)},L.INSPECT_MAX_BYTES=50;var x=2147483647;function g(ie){if(ie>x)throw new RangeError('The value "'+ie+'" is invalid for option "size"');var ee=new Uint8Array(ie);return Object.setPrototypeOf(ee,C.prototype),ee}function C(ie,ee,Z){if("number"==typeof ie){if("string"==typeof ee)throw new TypeError('The "string" argument must be of type string. Received type number');return h(ie)}return P(ie,ee,Z)}function P(ie,ee,Z){if("string"==typeof ie)return function(ie,ee){if(("string"!=typeof ee||""===ee)&&(ee="utf8"),!C.isEncoding(ee))throw new TypeError("Unknown encoding: "+ee);var Z=0|V(ie,ee),le=g(Z),Oe=le.write(ie,ee);return Oe!==Z&&(le=le.slice(0,Oe)),le}(ie,ee);if(ArrayBuffer.isView(ie))return function(ie){if(ue(ie,Uint8Array)){var ee=new Uint8Array(ie);return I(ee.buffer,ee.byteOffset,ee.byteLength)}return b(ie)}(ie);if(null==ie)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie);if(ue(ie,ArrayBuffer)||ie&&ue(ie.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(ue(ie,SharedArrayBuffer)||ie&&ue(ie.buffer,SharedArrayBuffer)))return I(ie,ee,Z);if("number"==typeof ie)throw new TypeError('The "value" argument must not be of type number. Received type number');var le=ie.valueOf&&ie.valueOf();if(null!=le&&le!==ie)return C.from(le,ee,Z);var Oe=function(ie){if(C.isBuffer(ie)){var ee=0|k(ie.length),Z=g(ee);return 0===Z.length||ie.copy(Z,0,0,ee),Z}return void 0!==ie.length?"number"!=typeof ie.length||ye(ie.length)?g(0):b(ie):"Buffer"===ie.type&&Array.isArray(ie.data)?b(ie.data):void 0}(ie);if(Oe)return Oe;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof ie[Symbol.toPrimitive])return C.from(ie[Symbol.toPrimitive]("string"),ee,Z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie)}function E(ie){if("number"!=typeof ie)throw new TypeError('"size" argument must be of type number');if(ie<0)throw new RangeError('The value "'+ie+'" is invalid for option "size"')}function h(ie){return E(ie),g(ie<0?0:0|k(ie))}function b(ie){for(var ee=ie.length<0?0:0|k(ie.length),Z=g(ee),le=0;le<ee;le+=1)Z[le]=255&ie[le];return Z}function I(ie,ee,Z){if(ee<0||ie.byteLength<ee)throw new RangeError('"offset" is outside of buffer bounds');if(ie.byteLength<ee+(Z||0))throw new RangeError('"length" is outside of buffer bounds');var le;return le=void 0===ee&&void 0===Z?new Uint8Array(ie):void 0===Z?new Uint8Array(ie,ee):new Uint8Array(ie,ee,Z),Object.setPrototypeOf(le,C.prototype),le}function k(ie){if(ie>=x)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+x.toString(16)+" bytes");return 0|ie}function V(ie,ee){if(C.isBuffer(ie))return ie.length;if(ArrayBuffer.isView(ie)||ue(ie,ArrayBuffer))return ie.byteLength;if("string"!=typeof ie)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ie);var Z=ie.length,le=arguments.length>2&&!0===arguments[2];if(!le&&0===Z)return 0;for(var Oe=!1;;)switch(ee){case"ascii":case"latin1":case"binary":return Z;case"utf8":case"utf-8":return ve(ie).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Z;case"hex":return Z>>>1;case"base64":return Re(ie).length;default:if(Oe)return le?-1:ve(ie).length;ee=(""+ee).toLowerCase(),Oe=!0}}function B(ie,ee,Z){var le=!1;if((void 0===ee||ee<0)&&(ee=0),ee>this.length||((void 0===Z||Z>this.length)&&(Z=this.length),Z<=0)||(Z>>>=0)<=(ee>>>=0))return"";for(ie||(ie="utf8");;)switch(ie){case"hex":return d(this,ee,Z);case"utf8":case"utf-8":return l(this,ee,Z);case"ascii":return M(this,ee,Z);case"latin1":case"binary":return A(this,ee,Z);case"base64":return s(this,ee,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i(this,ee,Z);default:if(le)throw new TypeError("Unknown encoding: "+ie);ie=(ie+"").toLowerCase(),le=!0}}function U(ie,ee,Z){var le=ie[ee];ie[ee]=ie[Z],ie[Z]=le}function j(ie,ee,Z,le,Oe){if(0===ie.length)return-1;if("string"==typeof Z?(le=Z,Z=0):Z>2147483647?Z=2147483647:Z<-2147483648&&(Z=-2147483648),ye(Z=+Z)&&(Z=Oe?0:ie.length-1),Z<0&&(Z=ie.length+Z),Z>=ie.length){if(Oe)return-1;Z=ie.length-1}else if(Z<0){if(!Oe)return-1;Z=0}if("string"==typeof ee&&(ee=C.from(ee,le)),C.isBuffer(ee))return 0===ee.length?-1:W(ie,ee,Z,le,Oe);if("number"==typeof ee)return ee&=255,"function"==typeof Uint8Array.prototype.indexOf?Oe?Uint8Array.prototype.indexOf.call(ie,ee,Z):Uint8Array.prototype.lastIndexOf.call(ie,ee,Z):W(ie,[ee],Z,le,Oe);throw new TypeError("val must be string, number or Buffer")}function W(ie,ee,Z,le,Oe){var Me,we=1,Te=ie.length,yt=ee.length;if(void 0!==le&&("ucs2"===(le=String(le).toLowerCase())||"ucs-2"===le||"utf16le"===le||"utf-16le"===le)){if(ie.length<2||ee.length<2)return-1;we=2,Te/=2,yt/=2,Z/=2}function Ne(ct,Ve){return 1===we?ct[Ve]:ct.readUInt16BE(Ve*we)}if(Oe){var Ye=-1;for(Me=Z;Me<Te;Me++)if(Ne(ie,Me)===Ne(ee,-1===Ye?0:Me-Ye)){if(-1===Ye&&(Ye=Me),Me-Ye+1===yt)return Ye*we}else-1!==Ye&&(Me-=Me-Ye),Ye=-1}else for(Z+yt>Te&&(Z=Te-yt),Me=Z;Me>=0;Me--){for(var De=!0,Fe=0;Fe<yt;Fe++)if(Ne(ie,Me+Fe)!==Ne(ee,Fe)){De=!1;break}if(De)return Me}return-1}function X(ie,ee,Z,le){Z=Number(Z)||0;var Oe=ie.length-Z;le?(le=Number(le))>Oe&&(le=Oe):le=Oe;var we=ee.length;le>we/2&&(le=we/2);for(var Te=0;Te<le;++Te){var yt=parseInt(ee.substr(2*Te,2),16);if(ye(yt))return Te;ie[Z+Te]=yt}return Te}function K(ie,ee,Z,le){return Ee(ve(ee,ie.length-Z),ie,Z,le)}function ge(ie,ee,Z,le){return Ee(function(ie){for(var ee=[],Z=0;Z<ie.length;++Z)ee.push(255&ie.charCodeAt(Z));return ee}(ee),ie,Z,le)}function R(ie,ee,Z,le){return Ee(Re(ee),ie,Z,le)}function r(ie,ee,Z,le){return Ee(function(ie,ee){for(var Z,le,we=[],Te=0;Te<ie.length&&!((ee-=2)<0);++Te)le=(Z=ie.charCodeAt(Te))>>8,we.push(Z%256),we.push(le);return we}(ee,ie.length-Z),ie,Z,le)}function s(ie,ee,Z){return p.fromByteArray(0===ee&&Z===ie.length?ie:ie.slice(ee,Z))}function l(ie,ee,Z){Z=Math.min(ie.length,Z);for(var le=[],Oe=ee;Oe<Z;){var Ne,Me,Ye,De,we=ie[Oe],Te=null,yt=we>239?4:we>223?3:we>191?2:1;if(Oe+yt<=Z)switch(yt){case 1:we<128&&(Te=we);break;case 2:128==(192&(Ne=ie[Oe+1]))&&(De=(31&we)<<6|63&Ne)>127&&(Te=De);break;case 3:Me=ie[Oe+2],128==(192&(Ne=ie[Oe+1]))&&128==(192&Me)&&(De=(15&we)<<12|(63&Ne)<<6|63&Me)>2047&&(De<55296||De>57343)&&(Te=De);break;case 4:Me=ie[Oe+2],Ye=ie[Oe+3],128==(192&(Ne=ie[Oe+1]))&&128==(192&Me)&&128==(192&Ye)&&(De=(15&we)<<18|(63&Ne)<<12|(63&Me)<<6|63&Ye)>65535&&De<1114112&&(Te=De)}null===Te?(Te=65533,yt=1):Te>65535&&(le.push((Te-=65536)>>>10&1023|55296),Te=56320|1023&Te),le.push(Te),Oe+=yt}return function(ie){var ee=ie.length;if(ee<=a)return String.fromCharCode.apply(String,ie);for(var Z="",le=0;le<ee;)Z+=String.fromCharCode.apply(String,ie.slice(le,le+=a));return Z}(le)}L.kMaxLength=x,!(C.TYPED_ARRAY_SUPPORT=function(){try{var ie=new Uint8Array(1),ee={foo:function(){return 42}};return Object.setPrototypeOf(ee,Uint8Array.prototype),Object.setPrototypeOf(ie,ee),42===ie.foo()}catch(Z){return!1}}())&&"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(C.prototype,"parent",{enumerable:!0,get:function(){if(C.isBuffer(this))return this.buffer}}),Object.defineProperty(C.prototype,"offset",{enumerable:!0,get:function(){if(C.isBuffer(this))return this.byteOffset}}),C.poolSize=8192,C.from=function(ie,ee,Z){return P(ie,ee,Z)},Object.setPrototypeOf(C.prototype,Uint8Array.prototype),Object.setPrototypeOf(C,Uint8Array),C.alloc=function(ie,ee,Z){return function(ie,ee,Z){return E(ie),ie<=0?g(ie):void 0!==ee?"string"==typeof Z?g(ie).fill(ee,Z):g(ie).fill(ee):g(ie)}(ie,ee,Z)},C.allocUnsafe=function(ie){return h(ie)},C.allocUnsafeSlow=function(ie){return h(ie)},C.isBuffer=function(ee){return null!=ee&&!0===ee._isBuffer&&ee!==C.prototype},C.compare=function(ee,Z){if(ue(ee,Uint8Array)&&(ee=C.from(ee,ee.offset,ee.byteLength)),ue(Z,Uint8Array)&&(Z=C.from(Z,Z.offset,Z.byteLength)),!C.isBuffer(ee)||!C.isBuffer(Z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ee===Z)return 0;for(var le=ee.length,Oe=Z.length,we=0,Te=Math.min(le,Oe);we<Te;++we)if(ee[we]!==Z[we]){le=ee[we],Oe=Z[we];break}return le<Oe?-1:Oe<le?1:0},C.isEncoding=function(ee){switch(String(ee).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},C.concat=function(ee,Z){if(!Array.isArray(ee))throw new TypeError('"list" argument must be an Array of Buffers');if(0===ee.length)return C.alloc(0);var le;if(void 0===Z)for(Z=0,le=0;le<ee.length;++le)Z+=ee[le].length;var Oe=C.allocUnsafe(Z),we=0;for(le=0;le<ee.length;++le){var Te=ee[le];if(ue(Te,Uint8Array))we+Te.length>Oe.length?C.from(Te).copy(Oe,we):Uint8Array.prototype.set.call(Oe,Te,we);else{if(!C.isBuffer(Te))throw new TypeError('"list" argument must be an Array of Buffers');Te.copy(Oe,we)}we+=Te.length}return Oe},C.byteLength=V,C.prototype._isBuffer=!0,C.prototype.swap16=function(){var ee=this.length;if(ee%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Z=0;Z<ee;Z+=2)U(this,Z,Z+1);return this},C.prototype.swap32=function(){var ee=this.length;if(ee%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Z=0;Z<ee;Z+=4)U(this,Z,Z+3),U(this,Z+1,Z+2);return this},C.prototype.swap64=function(){var ee=this.length;if(ee%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Z=0;Z<ee;Z+=8)U(this,Z,Z+7),U(this,Z+1,Z+6),U(this,Z+2,Z+5),U(this,Z+3,Z+4);return this},C.prototype.toLocaleString=C.prototype.toString=function(){var ee=this.length;return 0===ee?"":0===arguments.length?l(this,0,ee):B.apply(this,arguments)},C.prototype.equals=function(ee){if(!C.isBuffer(ee))throw new TypeError("Argument must be a Buffer");return this===ee||0===C.compare(this,ee)},C.prototype.inspect=function(){var ee="",Z=L.INSPECT_MAX_BYTES;return ee=this.toString("hex",0,Z).replace(/(.{2})/g,"$1 ").trim(),this.length>Z&&(ee+=" ... "),"<Buffer "+ee+">"},y&&(C.prototype[y]=C.prototype.inspect),C.prototype.compare=function(ee,Z,le,Oe,we){if(ue(ee,Uint8Array)&&(ee=C.from(ee,ee.offset,ee.byteLength)),!C.isBuffer(ee))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ee);if(void 0===Z&&(Z=0),void 0===le&&(le=ee?ee.length:0),void 0===Oe&&(Oe=0),void 0===we&&(we=this.length),Z<0||le>ee.length||Oe<0||we>this.length)throw new RangeError("out of range index");if(Oe>=we&&Z>=le)return 0;if(Oe>=we)return-1;if(Z>=le)return 1;if(this===ee)return 0;for(var Te=(we>>>=0)-(Oe>>>=0),yt=(le>>>=0)-(Z>>>=0),Ne=Math.min(Te,yt),Me=this.slice(Oe,we),Ye=ee.slice(Z,le),De=0;De<Ne;++De)if(Me[De]!==Ye[De]){Te=Me[De],yt=Ye[De];break}return Te<yt?-1:yt<Te?1:0},C.prototype.includes=function(ee,Z,le){return-1!==this.indexOf(ee,Z,le)},C.prototype.indexOf=function(ee,Z,le){return j(this,ee,Z,le,!0)},C.prototype.lastIndexOf=function(ee,Z,le){return j(this,ee,Z,le,!1)},C.prototype.write=function(ee,Z,le,Oe){if(void 0===Z)Oe="utf8",le=this.length,Z=0;else if(void 0===le&&"string"==typeof Z)Oe=Z,le=this.length,Z=0;else{if(!isFinite(Z))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");Z>>>=0,isFinite(le)?(le>>>=0,void 0===Oe&&(Oe="utf8")):(Oe=le,le=void 0)}var we=this.length-Z;if((void 0===le||le>we)&&(le=we),ee.length>0&&(le<0||Z<0)||Z>this.length)throw new RangeError("Attempt to write outside buffer bounds");Oe||(Oe="utf8");for(var Te=!1;;)switch(Oe){case"hex":return X(this,ee,Z,le);case"utf8":case"utf-8":return K(this,ee,Z,le);case"ascii":case"latin1":case"binary":return ge(this,ee,Z,le);case"base64":return R(this,ee,Z,le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r(this,ee,Z,le);default:if(Te)throw new TypeError("Unknown encoding: "+Oe);Oe=(""+Oe).toLowerCase(),Te=!0}},C.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var a=4096;function M(ie,ee,Z){var le="";Z=Math.min(ie.length,Z);for(var Oe=ee;Oe<Z;++Oe)le+=String.fromCharCode(127&ie[Oe]);return le}function A(ie,ee,Z){var le="";Z=Math.min(ie.length,Z);for(var Oe=ee;Oe<Z;++Oe)le+=String.fromCharCode(ie[Oe]);return le}function d(ie,ee,Z){var le=ie.length;(!ee||ee<0)&&(ee=0),(!Z||Z<0||Z>le)&&(Z=le);for(var Oe="",we=ee;we<Z;++we)Oe+=Se[ie[we]];return Oe}function i(ie,ee,Z){for(var le=ie.slice(ee,Z),Oe="",we=0;we<le.length-1;we+=2)Oe+=String.fromCharCode(le[we]+256*le[we+1]);return Oe}function m(ie,ee,Z){if(ie%1!=0||ie<0)throw new RangeError("offset is not uint");if(ie+ee>Z)throw new RangeError("Trying to access beyond buffer length")}function q(ie,ee,Z,le,Oe,we){if(!C.isBuffer(ie))throw new TypeError('"buffer" argument must be a Buffer instance');if(ee>Oe||ee<we)throw new RangeError('"value" argument is out of bounds');if(Z+le>ie.length)throw new RangeError("Index out of range")}function z(ie,ee,Z,le,Oe,we){if(Z+le>ie.length)throw new RangeError("Index out of range");if(Z<0)throw new RangeError("Index out of range")}function J(ie,ee,Z,le,Oe){return ee=+ee,Z>>>=0,Oe||z(ie,0,Z,4),N.write(ie,ee,Z,le,23,4),Z+4}function ce(ie,ee,Z,le,Oe){return ee=+ee,Z>>>=0,Oe||z(ie,0,Z,8),N.write(ie,ee,Z,le,52,8),Z+8}C.prototype.slice=function(ee,Z){var le=this.length;(ee=~~ee)<0?(ee+=le)<0&&(ee=0):ee>le&&(ee=le),(Z=void 0===Z?le:~~Z)<0?(Z+=le)<0&&(Z=0):Z>le&&(Z=le),Z<ee&&(Z=ee);var Oe=this.subarray(ee,Z);return Object.setPrototypeOf(Oe,C.prototype),Oe},C.prototype.readUintLE=C.prototype.readUIntLE=function(ee,Z,le){ee>>>=0,Z>>>=0,le||m(ee,Z,this.length);for(var Oe=this[ee],we=1,Te=0;++Te<Z&&(we*=256);)Oe+=this[ee+Te]*we;return Oe},C.prototype.readUintBE=C.prototype.readUIntBE=function(ee,Z,le){ee>>>=0,Z>>>=0,le||m(ee,Z,this.length);for(var Oe=this[ee+--Z],we=1;Z>0&&(we*=256);)Oe+=this[ee+--Z]*we;return Oe},C.prototype.readUint8=C.prototype.readUInt8=function(ee,Z){return ee>>>=0,Z||m(ee,1,this.length),this[ee]},C.prototype.readUint16LE=C.prototype.readUInt16LE=function(ee,Z){return ee>>>=0,Z||m(ee,2,this.length),this[ee]|this[ee+1]<<8},C.prototype.readUint16BE=C.prototype.readUInt16BE=function(ee,Z){return ee>>>=0,Z||m(ee,2,this.length),this[ee]<<8|this[ee+1]},C.prototype.readUint32LE=C.prototype.readUInt32LE=function(ee,Z){return ee>>>=0,Z||m(ee,4,this.length),(this[ee]|this[ee+1]<<8|this[ee+2]<<16)+16777216*this[ee+3]},C.prototype.readUint32BE=C.prototype.readUInt32BE=function(ee,Z){return ee>>>=0,Z||m(ee,4,this.length),16777216*this[ee]+(this[ee+1]<<16|this[ee+2]<<8|this[ee+3])},C.prototype.readIntLE=function(ee,Z,le){ee>>>=0,Z>>>=0,le||m(ee,Z,this.length);for(var Oe=this[ee],we=1,Te=0;++Te<Z&&(we*=256);)Oe+=this[ee+Te]*we;return Oe>=(we*=128)&&(Oe-=Math.pow(2,8*Z)),Oe},C.prototype.readIntBE=function(ee,Z,le){ee>>>=0,Z>>>=0,le||m(ee,Z,this.length);for(var Oe=Z,we=1,Te=this[ee+--Oe];Oe>0&&(we*=256);)Te+=this[ee+--Oe]*we;return Te>=(we*=128)&&(Te-=Math.pow(2,8*Z)),Te},C.prototype.readInt8=function(ee,Z){return ee>>>=0,Z||m(ee,1,this.length),128&this[ee]?-1*(255-this[ee]+1):this[ee]},C.prototype.readInt16LE=function(ee,Z){ee>>>=0,Z||m(ee,2,this.length);var le=this[ee]|this[ee+1]<<8;return 32768&le?4294901760|le:le},C.prototype.readInt16BE=function(ee,Z){ee>>>=0,Z||m(ee,2,this.length);var le=this[ee+1]|this[ee]<<8;return 32768&le?4294901760|le:le},C.prototype.readInt32LE=function(ee,Z){return ee>>>=0,Z||m(ee,4,this.length),this[ee]|this[ee+1]<<8|this[ee+2]<<16|this[ee+3]<<24},C.prototype.readInt32BE=function(ee,Z){return ee>>>=0,Z||m(ee,4,this.length),this[ee]<<24|this[ee+1]<<16|this[ee+2]<<8|this[ee+3]},C.prototype.readFloatLE=function(ee,Z){return ee>>>=0,Z||m(ee,4,this.length),N.read(this,ee,!0,23,4)},C.prototype.readFloatBE=function(ee,Z){return ee>>>=0,Z||m(ee,4,this.length),N.read(this,ee,!1,23,4)},C.prototype.readDoubleLE=function(ee,Z){return ee>>>=0,Z||m(ee,8,this.length),N.read(this,ee,!0,52,8)},C.prototype.readDoubleBE=function(ee,Z){return ee>>>=0,Z||m(ee,8,this.length),N.read(this,ee,!1,52,8)},C.prototype.writeUintLE=C.prototype.writeUIntLE=function(ee,Z,le,Oe){ee=+ee,Z>>>=0,le>>>=0,Oe||q(this,ee,Z,le,Math.pow(2,8*le)-1,0);var Te=1,yt=0;for(this[Z]=255&ee;++yt<le&&(Te*=256);)this[Z+yt]=ee/Te&255;return Z+le},C.prototype.writeUintBE=C.prototype.writeUIntBE=function(ee,Z,le,Oe){ee=+ee,Z>>>=0,le>>>=0,Oe||q(this,ee,Z,le,Math.pow(2,8*le)-1,0);var Te=le-1,yt=1;for(this[Z+Te]=255&ee;--Te>=0&&(yt*=256);)this[Z+Te]=ee/yt&255;return Z+le},C.prototype.writeUint8=C.prototype.writeUInt8=function(ee,Z,le){return ee=+ee,Z>>>=0,le||q(this,ee,Z,1,255,0),this[Z]=255&ee,Z+1},C.prototype.writeUint16LE=C.prototype.writeUInt16LE=function(ee,Z,le){return ee=+ee,Z>>>=0,le||q(this,ee,Z,2,65535,0),this[Z]=255&ee,this[Z+1]=ee>>>8,Z+2},C.prototype.writeUint16BE=C.prototype.writeUInt16BE=function(ee,Z,le){return ee=+ee,Z>>>=0,le||q(this,ee,Z,2,65535,0),this[Z]=ee>>>8,this[Z+1]=255&ee,Z+2},C.prototype.writeUint32LE=C.prototype.writeUInt32LE=function(ee,Z,le){return ee=+ee,Z>>>=0,le||q(this,ee,Z,4,4294967295,0),this[Z+3]=ee>>>24,this[Z+2]=ee>>>16,this[Z+1]=ee>>>8,this[Z]=255&ee,Z+4},C.prototype.writeUint32BE=C.prototype.writeUInt32BE=function(ee,Z,le){return ee=+ee,Z>>>=0,le||q(this,ee,Z,4,4294967295,0),this[Z]=ee>>>24,this[Z+1]=ee>>>16,this[Z+2]=ee>>>8,this[Z+3]=255&ee,Z+4},C.prototype.writeIntLE=function(ee,Z,le,Oe){if(ee=+ee,Z>>>=0,!Oe){var we=Math.pow(2,8*le-1);q(this,ee,Z,le,we-1,-we)}var Te=0,yt=1,Ne=0;for(this[Z]=255&ee;++Te<le&&(yt*=256);)ee<0&&0===Ne&&0!==this[Z+Te-1]&&(Ne=1),this[Z+Te]=(ee/yt>>0)-Ne&255;return Z+le},C.prototype.writeIntBE=function(ee,Z,le,Oe){if(ee=+ee,Z>>>=0,!Oe){var we=Math.pow(2,8*le-1);q(this,ee,Z,le,we-1,-we)}var Te=le-1,yt=1,Ne=0;for(this[Z+Te]=255&ee;--Te>=0&&(yt*=256);)ee<0&&0===Ne&&0!==this[Z+Te+1]&&(Ne=1),this[Z+Te]=(ee/yt>>0)-Ne&255;return Z+le},C.prototype.writeInt8=function(ee,Z,le){return ee=+ee,Z>>>=0,le||q(this,ee,Z,1,127,-128),ee<0&&(ee=255+ee+1),this[Z]=255&ee,Z+1},C.prototype.writeInt16LE=function(ee,Z,le){return ee=+ee,Z>>>=0,le||q(this,ee,Z,2,32767,-32768),this[Z]=255&ee,this[Z+1]=ee>>>8,Z+2},C.prototype.writeInt16BE=function(ee,Z,le){return ee=+ee,Z>>>=0,le||q(this,ee,Z,2,32767,-32768),this[Z]=ee>>>8,this[Z+1]=255&ee,Z+2},C.prototype.writeInt32LE=function(ee,Z,le){return ee=+ee,Z>>>=0,le||q(this,ee,Z,4,2147483647,-2147483648),this[Z]=255&ee,this[Z+1]=ee>>>8,this[Z+2]=ee>>>16,this[Z+3]=ee>>>24,Z+4},C.prototype.writeInt32BE=function(ee,Z,le){return ee=+ee,Z>>>=0,le||q(this,ee,Z,4,2147483647,-2147483648),ee<0&&(ee=4294967295+ee+1),this[Z]=ee>>>24,this[Z+1]=ee>>>16,this[Z+2]=ee>>>8,this[Z+3]=255&ee,Z+4},C.prototype.writeFloatLE=function(ee,Z,le){return J(this,ee,Z,!0,le)},C.prototype.writeFloatBE=function(ee,Z,le){return J(this,ee,Z,!1,le)},C.prototype.writeDoubleLE=function(ee,Z,le){return ce(this,ee,Z,!0,le)},C.prototype.writeDoubleBE=function(ee,Z,le){return ce(this,ee,Z,!1,le)},C.prototype.copy=function(ee,Z,le,Oe){if(!C.isBuffer(ee))throw new TypeError("argument should be a Buffer");if(le||(le=0),!Oe&&0!==Oe&&(Oe=this.length),Z>=ee.length&&(Z=ee.length),Z||(Z=0),Oe>0&&Oe<le&&(Oe=le),Oe===le||0===ee.length||0===this.length)return 0;if(Z<0)throw new RangeError("targetStart out of bounds");if(le<0||le>=this.length)throw new RangeError("Index out of range");if(Oe<0)throw new RangeError("sourceEnd out of bounds");Oe>this.length&&(Oe=this.length),ee.length-Z<Oe-le&&(Oe=ee.length-Z+le);var we=Oe-le;return this===ee&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(Z,le,Oe):Uint8Array.prototype.set.call(ee,this.subarray(le,Oe),Z),we},C.prototype.fill=function(ee,Z,le,Oe){if("string"==typeof ee){if("string"==typeof Z?(Oe=Z,Z=0,le=this.length):"string"==typeof le&&(Oe=le,le=this.length),void 0!==Oe&&"string"!=typeof Oe)throw new TypeError("encoding must be a string");if("string"==typeof Oe&&!C.isEncoding(Oe))throw new TypeError("Unknown encoding: "+Oe);if(1===ee.length){var we=ee.charCodeAt(0);("utf8"===Oe&&we<128||"latin1"===Oe)&&(ee=we)}}else"number"==typeof ee?ee&=255:"boolean"==typeof ee&&(ee=Number(ee));if(Z<0||this.length<Z||this.length<le)throw new RangeError("Out of range index");if(le<=Z)return this;var Te;if(Z>>>=0,le=void 0===le?this.length:le>>>0,ee||(ee=0),"number"==typeof ee)for(Te=Z;Te<le;++Te)this[Te]=ee;else{var yt=C.isBuffer(ee)?ee:C.from(ee,Oe),Ne=yt.length;if(0===Ne)throw new TypeError('The value "'+ee+'" is invalid for argument "value"');for(Te=0;Te<le-Z;++Te)this[Te+Z]=yt[Te%Ne]}return this};var se=/[^+/0-9A-Za-z-_]/g;function ve(ie,ee){ee=ee||1/0;for(var Z,le=ie.length,Oe=null,we=[],Te=0;Te<le;++Te){if((Z=ie.charCodeAt(Te))>55295&&Z<57344){if(!Oe){if(Z>56319){(ee-=3)>-1&&we.push(239,191,189);continue}if(Te+1===le){(ee-=3)>-1&&we.push(239,191,189);continue}Oe=Z;continue}if(Z<56320){(ee-=3)>-1&&we.push(239,191,189),Oe=Z;continue}Z=65536+(Oe-55296<<10|Z-56320)}else Oe&&(ee-=3)>-1&&we.push(239,191,189);if(Oe=null,Z<128){if((ee-=1)<0)break;we.push(Z)}else if(Z<2048){if((ee-=2)<0)break;we.push(Z>>6|192,63&Z|128)}else if(Z<65536){if((ee-=3)<0)break;we.push(Z>>12|224,Z>>6&63|128,63&Z|128)}else{if(!(Z<1114112))throw new Error("Invalid code point");if((ee-=4)<0)break;we.push(Z>>18|240,Z>>12&63|128,Z>>6&63|128,63&Z|128)}}return we}function Re(ie){return p.toByteArray(function(ie){if((ie=(ie=ie.split("=")[0]).trim().replace(se,"")).length<2)return"";for(;ie.length%4!=0;)ie+="=";return ie}(ie))}function Ee(ie,ee,Z,le){for(var Oe=0;Oe<le&&!(Oe+Z>=ee.length||Oe>=ie.length);++Oe)ee[Oe+Z]=ie[Oe];return Oe}function ue(ie,ee){return ie instanceof ee||null!=ie&&null!=ie.constructor&&null!=ie.constructor.name&&ie.constructor.name===ee.name}function ye(ie){return ie!=ie}var Se=function(){for(var ie="0123456789abcdef",ee=new Array(256),Z=0;Z<16;++Z)for(var le=16*Z,Oe=0;Oe<16;++Oe)ee[le+Oe]=ie[Z]+ie[Oe];return ee}()},5834:(Y,L,T)=>{var p=T(5859).Buffer,N=T(6917).Transform,y=T(2519).s;function u(g){N.call(this),this.hashMode="string"==typeof g,this.hashMode?this[g]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}T(9879)(u,N),u.prototype.update=function(g,C,P){"string"==typeof g&&(g=p.from(g,C));var E=this._update(g);return this.hashMode?this:(P&&(E=this._toString(E,P)),E)},u.prototype.setAutoPadding=function(){},u.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},u.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},u.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},u.prototype._transform=function(g,C,P){var E;try{this.hashMode?this._update(g):this.push(this._update(g))}catch(v){E=v}finally{P(E)}},u.prototype._flush=function(g){var C;try{this.push(this.__final())}catch(P){C=P}g(C)},u.prototype._finalOrDigest=function(g){var C=this.__final()||p.alloc(0);return g&&(C=this._toString(C,g,!0)),C},u.prototype._toString=function(g,C,P){if(this._decoder||(this._decoder=new y(C),this._encoding=C),this._encoding!==C)throw new Error("can't switch encodings");var E=this._decoder.write(g);return P&&(E+=this._decoder.end()),E},Y.exports=u},4892:(Y,L,T)=>{var p=T(5247),N=T(6479);Y.exports=function(C){return new x(C)};var y={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function x(g){this.curveType=y[g],this.curveType||(this.curveType={name:g}),this.curve=new p.ec(this.curveType.name),this.keys=void 0}function u(g,C,P){Array.isArray(g)||(g=g.toArray());var E=new Buffer(g);if(P&&E.length<P){var v=new Buffer(P-E.length);v.fill(0),E=Buffer.concat([v,E])}return C?E.toString(C):E}y.p224=y.secp224r1,y.p256=y.secp256r1=y.prime256v1,y.p192=y.secp192r1=y.prime192v1,y.p384=y.secp384r1,y.p521=y.secp521r1,x.prototype.generateKeys=function(g,C){return this.keys=this.curve.genKeyPair(),this.getPublicKey(g,C)},x.prototype.computeSecret=function(g,C,P){return C=C||"utf8",Buffer.isBuffer(g)||(g=new Buffer(g,C)),u(this.curve.keyFromPublic(g).getPublic().mul(this.keys.getPrivate()).getX(),P,this.curveType.byteLength)},x.prototype.getPublicKey=function(g,C){var P=this.keys.getPublic("compressed"===C,!0);return"hybrid"===C&&(P[0]=P[P.length-1]%2?7:6),u(P,g)},x.prototype.getPrivateKey=function(g){return u(this.keys.getPrivate(),g)},x.prototype.setPublicKey=function(g,C){return C=C||"utf8",Buffer.isBuffer(g)||(g=new Buffer(g,C)),this.keys._importPublic(g),this},x.prototype.setPrivateKey=function(g,C){C=C||"utf8",Buffer.isBuffer(g)||(g=new Buffer(g,C));var P=new N(g);return P=P.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(P),this}},6479:function(Y,L,T){!function(p,N){"use strict";function y(R,r){if(!R)throw new Error(r||"Assertion failed")}function x(R,r){R.super_=r;var s=function(){};s.prototype=r.prototype,R.prototype=new s,R.prototype.constructor=R}function u(R,r,s){if(u.isBN(R))return R;this.negative=0,this.words=null,this.length=0,this.red=null,null!==R&&(("le"===r||"be"===r)&&(s=r,r=10),this._init(R||0,r||10,s||"be"))}var g;"object"==typeof p?p.exports=u:N.BN=u,u.BN=u,u.wordSize=26;try{g="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:T(8623).Buffer}catch(R){}function C(R,r){var s=R.charCodeAt(r);return s>=65&&s<=70?s-55:s>=97&&s<=102?s-87:s-48&15}function P(R,r,s){var l=C(R,s);return s-1>=r&&(l|=C(R,s-1)<<4),l}function E(R,r,s,l){for(var a=0,f=Math.min(R.length,s),M=r;M<f;M++){var A=R.charCodeAt(M)-48;a*=l,a+=A>=49?A-49+10:A>=17?A-17+10:A}return a}u.isBN=function(r){return r instanceof u||null!==r&&"object"==typeof r&&r.constructor.wordSize===u.wordSize&&Array.isArray(r.words)},u.max=function(r,s){return r.cmp(s)>0?r:s},u.min=function(r,s){return r.cmp(s)<0?r:s},u.prototype._init=function(r,s,l){if("number"==typeof r)return this._initNumber(r,s,l);if("object"==typeof r)return this._initArray(r,s,l);"hex"===s&&(s=16),y(s===(0|s)&&s>=2&&s<=36);var a=0;"-"===(r=r.toString().replace(/\s+/g,""))[0]&&(a++,this.negative=1),a<r.length&&(16===s?this._parseHex(r,a,l):(this._parseBase(r,s,a),"le"===l&&this._initArray(this.toArray(),s,l)))},u.prototype._initNumber=function(r,s,l){r<0&&(this.negative=1,r=-r),r<67108864?(this.words=[67108863&r],this.length=1):r<4503599627370496?(this.words=[67108863&r,r/67108864&67108863],this.length=2):(y(r<9007199254740992),this.words=[67108863&r,r/67108864&67108863,1],this.length=3),"le"===l&&this._initArray(this.toArray(),s,l)},u.prototype._initArray=function(r,s,l){if(y("number"==typeof r.length),r.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(r.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var f,M,A=0;if("be"===l)for(a=r.length-1,f=0;a>=0;a-=3)this.words[f]|=(M=r[a]|r[a-1]<<8|r[a-2]<<16)<<A&67108863,this.words[f+1]=M>>>26-A&67108863,(A+=24)>=26&&(A-=26,f++);else if("le"===l)for(a=0,f=0;a<r.length;a+=3)this.words[f]|=(M=r[a]|r[a+1]<<8|r[a+2]<<16)<<A&67108863,this.words[f+1]=M>>>26-A&67108863,(A+=24)>=26&&(A-=26,f++);return this.strip()},u.prototype._parseHex=function(r,s,l){this.length=Math.ceil((r.length-s)/6),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var A,f=0,M=0;if("be"===l)for(a=r.length-1;a>=s;a-=2)A=P(r,s,a)<<f,this.words[M]|=67108863&A,f>=18?(f-=18,this.words[M+=1]|=A>>>26):f+=8;else for(a=(r.length-s)%2==0?s+1:s;a<r.length;a+=2)A=P(r,s,a)<<f,this.words[M]|=67108863&A,f>=18?(f-=18,this.words[M+=1]|=A>>>26):f+=8;this.strip()},u.prototype._parseBase=function(r,s,l){this.words=[0],this.length=1;for(var a=0,f=1;f<=67108863;f*=s)a++;a--,f=f/s|0;for(var M=r.length-l,A=M%a,d=Math.min(M,M-A)+l,i=0,m=l;m<d;m+=a)i=E(r,m,m+a,s),this.imuln(f),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i);if(0!==A){var q=1;for(i=E(r,m,r.length,s),m=0;m<A;m++)q*=s;this.imuln(q),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i)}this.strip()},u.prototype.copy=function(r){r.words=new Array(this.length);for(var s=0;s<this.length;s++)r.words[s]=this.words[s];r.length=this.length,r.negative=this.negative,r.red=this.red},u.prototype.clone=function(){var r=new u(null);return this.copy(r),r},u.prototype._expand=function(r){for(;this.length<r;)this.words[this.length++]=0;return this},u.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},u.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},u.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var v=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],_=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function w(R,r,s){s.negative=r.negative^R.negative;var l=R.length+r.length|0;s.length=l,l=l-1|0;var a=0|R.words[0],f=0|r.words[0],M=a*f,d=M/67108864|0;s.words[0]=67108863&M;for(var i=1;i<l;i++){for(var m=d>>>26,q=67108863&d,z=Math.min(i,r.length-1),J=Math.max(0,i-R.length+1);J<=z;J++)m+=(M=(a=0|R.words[i-J|0])*(f=0|r.words[J])+q)/67108864|0,q=67108863&M;s.words[i]=0|q,d=0|m}return 0!==d?s.words[i]=0|d:s.length--,s.strip()}u.prototype.toString=function(r,s){var l;if(s=0|s||1,16===(r=r||10)||"hex"===r){l="";for(var a=0,f=0,M=0;M<this.length;M++){var A=this.words[M],d=(16777215&(A<<a|f)).toString(16);l=0!=(f=A>>>24-a&16777215)||M!==this.length-1?v[6-d.length]+d+l:d+l,(a+=2)>=26&&(a-=26,M--)}for(0!==f&&(l=f.toString(16)+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}if(r===(0|r)&&r>=2&&r<=36){var i=h[r],m=_[r];l="";var q=this.clone();for(q.negative=0;!q.isZero();){var z=q.modn(m).toString(r);l=(q=q.idivn(m)).isZero()?z+l:v[i-z.length]+z+l}for(this.isZero()&&(l="0"+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}y(!1,"Base should be between 2 and 36")},u.prototype.toNumber=function(){var r=this.words[0];return 2===this.length?r+=67108864*this.words[1]:3===this.length&&1===this.words[2]?r+=4503599627370496+67108864*this.words[1]:this.length>2&&y(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-r:r},u.prototype.toJSON=function(){return this.toString(16)},u.prototype.toBuffer=function(r,s){return y(void 0!==g),this.toArrayLike(g,r,s)},u.prototype.toArray=function(r,s){return this.toArrayLike(Array,r,s)},u.prototype.toArrayLike=function(r,s,l){var a=this.byteLength(),f=l||Math.max(1,a);y(a<=f,"byte array longer than desired length"),y(f>0,"Requested array length <= 0"),this.strip();var d,i,M="le"===s,A=new r(f),m=this.clone();if(M){for(i=0;!m.isZero();i++)d=m.andln(255),m.iushrn(8),A[i]=d;for(;i<f;i++)A[i]=0}else{for(i=0;i<f-a;i++)A[i]=0;for(i=0;!m.isZero();i++)d=m.andln(255),m.iushrn(8),A[f-i-1]=d}return A},u.prototype._countBits=Math.clz32?function(r){return 32-Math.clz32(r)}:function(r){var s=r,l=0;return s>=4096&&(l+=13,s>>>=13),s>=64&&(l+=7,s>>>=7),s>=8&&(l+=4,s>>>=4),s>=2&&(l+=2,s>>>=2),l+s},u.prototype._zeroBits=function(r){if(0===r)return 26;var s=r,l=0;return 0==(8191&s)&&(l+=13,s>>>=13),0==(127&s)&&(l+=7,s>>>=7),0==(15&s)&&(l+=4,s>>>=4),0==(3&s)&&(l+=2,s>>>=2),0==(1&s)&&l++,l},u.prototype.bitLength=function(){var s=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+s},u.prototype.zeroBits=function(){if(this.isZero())return 0;for(var r=0,s=0;s<this.length;s++){var l=this._zeroBits(this.words[s]);if(r+=l,26!==l)break}return r},u.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},u.prototype.toTwos=function(r){return 0!==this.negative?this.abs().inotn(r).iaddn(1):this.clone()},u.prototype.fromTwos=function(r){return this.testn(r-1)?this.notn(r).iaddn(1).ineg():this.clone()},u.prototype.isNeg=function(){return 0!==this.negative},u.prototype.neg=function(){return this.clone().ineg()},u.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},u.prototype.iuor=function(r){for(;this.length<r.length;)this.words[this.length++]=0;for(var s=0;s<r.length;s++)this.words[s]=this.words[s]|r.words[s];return this.strip()},u.prototype.ior=function(r){return y(0==(this.negative|r.negative)),this.iuor(r)},u.prototype.or=function(r){return this.length>r.length?this.clone().ior(r):r.clone().ior(this)},u.prototype.uor=function(r){return this.length>r.length?this.clone().iuor(r):r.clone().iuor(this)},u.prototype.iuand=function(r){var s;s=this.length>r.length?r:this;for(var l=0;l<s.length;l++)this.words[l]=this.words[l]&r.words[l];return this.length=s.length,this.strip()},u.prototype.iand=function(r){return y(0==(this.negative|r.negative)),this.iuand(r)},u.prototype.and=function(r){return this.length>r.length?this.clone().iand(r):r.clone().iand(this)},u.prototype.uand=function(r){return this.length>r.length?this.clone().iuand(r):r.clone().iuand(this)},u.prototype.iuxor=function(r){var s,l;this.length>r.length?(s=this,l=r):(s=r,l=this);for(var a=0;a<l.length;a++)this.words[a]=s.words[a]^l.words[a];if(this!==s)for(;a<s.length;a++)this.words[a]=s.words[a];return this.length=s.length,this.strip()},u.prototype.ixor=function(r){return y(0==(this.negative|r.negative)),this.iuxor(r)},u.prototype.xor=function(r){return this.length>r.length?this.clone().ixor(r):r.clone().ixor(this)},u.prototype.uxor=function(r){return this.length>r.length?this.clone().iuxor(r):r.clone().iuxor(this)},u.prototype.inotn=function(r){y("number"==typeof r&&r>=0);var s=0|Math.ceil(r/26),l=r%26;this._expand(s),l>0&&s--;for(var a=0;a<s;a++)this.words[a]=67108863&~this.words[a];return l>0&&(this.words[a]=~this.words[a]&67108863>>26-l),this.strip()},u.prototype.notn=function(r){return this.clone().inotn(r)},u.prototype.setn=function(r,s){y("number"==typeof r&&r>=0);var l=r/26|0,a=r%26;return this._expand(l+1),this.words[l]=s?this.words[l]|1<<a:this.words[l]&~(1<<a),this.strip()},u.prototype.iadd=function(r){var s,l,a;if(0!==this.negative&&0===r.negative)return this.negative=0,s=this.isub(r),this.negative^=1,this._normSign();if(0===this.negative&&0!==r.negative)return r.negative=0,s=this.isub(r),r.negative=1,s._normSign();this.length>r.length?(l=this,a=r):(l=r,a=this);for(var f=0,M=0;M<a.length;M++)this.words[M]=67108863&(s=(0|l.words[M])+(0|a.words[M])+f),f=s>>>26;for(;0!==f&&M<l.length;M++)this.words[M]=67108863&(s=(0|l.words[M])+f),f=s>>>26;if(this.length=l.length,0!==f)this.words[this.length]=f,this.length++;else if(l!==this)for(;M<l.length;M++)this.words[M]=l.words[M];return this},u.prototype.add=function(r){var s;return 0!==r.negative&&0===this.negative?(r.negative=0,s=this.sub(r),r.negative^=1,s):0===r.negative&&0!==this.negative?(this.negative=0,s=r.sub(this),this.negative=1,s):this.length>r.length?this.clone().iadd(r):r.clone().iadd(this)},u.prototype.isub=function(r){if(0!==r.negative){r.negative=0;var s=this.iadd(r);return r.negative=1,s._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(r),this.negative=1,this._normSign();var a,f,l=this.cmp(r);if(0===l)return this.negative=0,this.length=1,this.words[0]=0,this;l>0?(a=this,f=r):(a=r,f=this);for(var M=0,A=0;A<f.length;A++)M=(s=(0|a.words[A])-(0|f.words[A])+M)>>26,this.words[A]=67108863&s;for(;0!==M&&A<a.length;A++)M=(s=(0|a.words[A])+M)>>26,this.words[A]=67108863&s;if(0===M&&A<a.length&&a!==this)for(;A<a.length;A++)this.words[A]=a.words[A];return this.length=Math.max(this.length,A),a!==this&&(this.negative=1),this.strip()},u.prototype.sub=function(r){return this.clone().isub(r)};var I=function(r,s,l){var d,i,m,a=r.words,f=s.words,M=l.words,A=0,q=0|a[0],z=8191&q,J=q>>>13,ce=0|a[1],se=8191&ce,he=ce>>>13,ve=0|a[2],ae=8191&ve,de=ve>>>13,Re=0|a[3],Ee=8191&Re,ue=Re>>>13,ye=0|a[4],Se=8191&ye,ie=ye>>>13,ee=0|a[5],Z=8191&ee,le=ee>>>13,Oe=0|a[6],we=8191&Oe,Te=Oe>>>13,yt=0|a[7],Ne=8191&yt,Me=yt>>>13,Ye=0|a[8],De=8191&Ye,Fe=Ye>>>13,ct=0|a[9],Ve=8191&ct,Ke=ct>>>13,Zt=0|f[0],nt=8191&Zt,ot=Zt>>>13,Mt=0|f[1],ut=8191&Mt,st=Mt>>>13,Nn=0|f[2],rt=8191&Nn,Ge=Nn>>>13,Cn=0|f[3],qe=8191&Cn,We=Cn>>>13,Dn=0|f[4],ft=8191&Dn,Ue=Dn>>>13,Ln=0|f[5],gt=8191&Ln,it=Ln>>>13,zn=0|f[6],lt=8191&zn,ze=zn>>>13,sn=0|f[7],dt=8191&sn,Xe=sn>>>13,Qt=0|f[8],Qe=8191&Qt,Ze=Qt>>>13,Pn=0|f[9],Je=8191&Pn,at=Pn>>>13;l.negative=r.negative^s.negative,l.length=19;var un=(A+(d=Math.imul(z,nt))|0)+((8191&(i=(i=Math.imul(z,ot))+Math.imul(J,nt)|0))<<13)|0;A=((m=Math.imul(J,ot))+(i>>>13)|0)+(un>>>26)|0,un&=67108863,d=Math.imul(se,nt),i=(i=Math.imul(se,ot))+Math.imul(he,nt)|0,m=Math.imul(he,ot);var Vt=(A+(d=d+Math.imul(z,ut)|0)|0)+((8191&(i=(i=i+Math.imul(z,st)|0)+Math.imul(J,ut)|0))<<13)|0;A=((m=m+Math.imul(J,st)|0)+(i>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,d=Math.imul(ae,nt),i=(i=Math.imul(ae,ot))+Math.imul(de,nt)|0,m=Math.imul(de,ot),d=d+Math.imul(se,ut)|0,i=(i=i+Math.imul(se,st)|0)+Math.imul(he,ut)|0,m=m+Math.imul(he,st)|0;var Ht=(A+(d=d+Math.imul(z,rt)|0)|0)+((8191&(i=(i=i+Math.imul(z,Ge)|0)+Math.imul(J,rt)|0))<<13)|0;A=((m=m+Math.imul(J,Ge)|0)+(i>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,d=Math.imul(Ee,nt),i=(i=Math.imul(Ee,ot))+Math.imul(ue,nt)|0,m=Math.imul(ue,ot),d=d+Math.imul(ae,ut)|0,i=(i=i+Math.imul(ae,st)|0)+Math.imul(de,ut)|0,m=m+Math.imul(de,st)|0,d=d+Math.imul(se,rt)|0,i=(i=i+Math.imul(se,Ge)|0)+Math.imul(he,rt)|0,m=m+Math.imul(he,Ge)|0;var bn=(A+(d=d+Math.imul(z,qe)|0)|0)+((8191&(i=(i=i+Math.imul(z,We)|0)+Math.imul(J,qe)|0))<<13)|0;A=((m=m+Math.imul(J,We)|0)+(i>>>13)|0)+(bn>>>26)|0,bn&=67108863,d=Math.imul(Se,nt),i=(i=Math.imul(Se,ot))+Math.imul(ie,nt)|0,m=Math.imul(ie,ot),d=d+Math.imul(Ee,ut)|0,i=(i=i+Math.imul(Ee,st)|0)+Math.imul(ue,ut)|0,m=m+Math.imul(ue,st)|0,d=d+Math.imul(ae,rt)|0,i=(i=i+Math.imul(ae,Ge)|0)+Math.imul(de,rt)|0,m=m+Math.imul(de,Ge)|0,d=d+Math.imul(se,qe)|0,i=(i=i+Math.imul(se,We)|0)+Math.imul(he,qe)|0,m=m+Math.imul(he,We)|0;var dn=(A+(d=d+Math.imul(z,ft)|0)|0)+((8191&(i=(i=i+Math.imul(z,Ue)|0)+Math.imul(J,ft)|0))<<13)|0;A=((m=m+Math.imul(J,Ue)|0)+(i>>>13)|0)+(dn>>>26)|0,dn&=67108863,d=Math.imul(Z,nt),i=(i=Math.imul(Z,ot))+Math.imul(le,nt)|0,m=Math.imul(le,ot),d=d+Math.imul(Se,ut)|0,i=(i=i+Math.imul(Se,st)|0)+Math.imul(ie,ut)|0,m=m+Math.imul(ie,st)|0,d=d+Math.imul(Ee,rt)|0,i=(i=i+Math.imul(Ee,Ge)|0)+Math.imul(ue,rt)|0,m=m+Math.imul(ue,Ge)|0,d=d+Math.imul(ae,qe)|0,i=(i=i+Math.imul(ae,We)|0)+Math.imul(de,qe)|0,m=m+Math.imul(de,We)|0,d=d+Math.imul(se,ft)|0,i=(i=i+Math.imul(se,Ue)|0)+Math.imul(he,ft)|0,m=m+Math.imul(he,Ue)|0;var pn=(A+(d=d+Math.imul(z,gt)|0)|0)+((8191&(i=(i=i+Math.imul(z,it)|0)+Math.imul(J,gt)|0))<<13)|0;A=((m=m+Math.imul(J,it)|0)+(i>>>13)|0)+(pn>>>26)|0,pn&=67108863,d=Math.imul(we,nt),i=(i=Math.imul(we,ot))+Math.imul(Te,nt)|0,m=Math.imul(Te,ot),d=d+Math.imul(Z,ut)|0,i=(i=i+Math.imul(Z,st)|0)+Math.imul(le,ut)|0,m=m+Math.imul(le,st)|0,d=d+Math.imul(Se,rt)|0,i=(i=i+Math.imul(Se,Ge)|0)+Math.imul(ie,rt)|0,m=m+Math.imul(ie,Ge)|0,d=d+Math.imul(Ee,qe)|0,i=(i=i+Math.imul(Ee,We)|0)+Math.imul(ue,qe)|0,m=m+Math.imul(ue,We)|0,d=d+Math.imul(ae,ft)|0,i=(i=i+Math.imul(ae,Ue)|0)+Math.imul(de,ft)|0,m=m+Math.imul(de,Ue)|0,d=d+Math.imul(se,gt)|0,i=(i=i+Math.imul(se,it)|0)+Math.imul(he,gt)|0,m=m+Math.imul(he,it)|0;var In=(A+(d=d+Math.imul(z,lt)|0)|0)+((8191&(i=(i=i+Math.imul(z,ze)|0)+Math.imul(J,lt)|0))<<13)|0;A=((m=m+Math.imul(J,ze)|0)+(i>>>13)|0)+(In>>>26)|0,In&=67108863,d=Math.imul(Ne,nt),i=(i=Math.imul(Ne,ot))+Math.imul(Me,nt)|0,m=Math.imul(Me,ot),d=d+Math.imul(we,ut)|0,i=(i=i+Math.imul(we,st)|0)+Math.imul(Te,ut)|0,m=m+Math.imul(Te,st)|0,d=d+Math.imul(Z,rt)|0,i=(i=i+Math.imul(Z,Ge)|0)+Math.imul(le,rt)|0,m=m+Math.imul(le,Ge)|0,d=d+Math.imul(Se,qe)|0,i=(i=i+Math.imul(Se,We)|0)+Math.imul(ie,qe)|0,m=m+Math.imul(ie,We)|0,d=d+Math.imul(Ee,ft)|0,i=(i=i+Math.imul(Ee,Ue)|0)+Math.imul(ue,ft)|0,m=m+Math.imul(ue,Ue)|0,d=d+Math.imul(ae,gt)|0,i=(i=i+Math.imul(ae,it)|0)+Math.imul(de,gt)|0,m=m+Math.imul(de,it)|0,d=d+Math.imul(se,lt)|0,i=(i=i+Math.imul(se,ze)|0)+Math.imul(he,lt)|0,m=m+Math.imul(he,ze)|0;var rn=(A+(d=d+Math.imul(z,dt)|0)|0)+((8191&(i=(i=i+Math.imul(z,Xe)|0)+Math.imul(J,dt)|0))<<13)|0;A=((m=m+Math.imul(J,Xe)|0)+(i>>>13)|0)+(rn>>>26)|0,rn&=67108863,d=Math.imul(De,nt),i=(i=Math.imul(De,ot))+Math.imul(Fe,nt)|0,m=Math.imul(Fe,ot),d=d+Math.imul(Ne,ut)|0,i=(i=i+Math.imul(Ne,st)|0)+Math.imul(Me,ut)|0,m=m+Math.imul(Me,st)|0,d=d+Math.imul(we,rt)|0,i=(i=i+Math.imul(we,Ge)|0)+Math.imul(Te,rt)|0,m=m+Math.imul(Te,Ge)|0,d=d+Math.imul(Z,qe)|0,i=(i=i+Math.imul(Z,We)|0)+Math.imul(le,qe)|0,m=m+Math.imul(le,We)|0,d=d+Math.imul(Se,ft)|0,i=(i=i+Math.imul(Se,Ue)|0)+Math.imul(ie,ft)|0,m=m+Math.imul(ie,Ue)|0,d=d+Math.imul(Ee,gt)|0,i=(i=i+Math.imul(Ee,it)|0)+Math.imul(ue,gt)|0,m=m+Math.imul(ue,it)|0,d=d+Math.imul(ae,lt)|0,i=(i=i+Math.imul(ae,ze)|0)+Math.imul(de,lt)|0,m=m+Math.imul(de,ze)|0,d=d+Math.imul(se,dt)|0,i=(i=i+Math.imul(se,Xe)|0)+Math.imul(he,dt)|0,m=m+Math.imul(he,Xe)|0;var Mn=(A+(d=d+Math.imul(z,Qe)|0)|0)+((8191&(i=(i=i+Math.imul(z,Ze)|0)+Math.imul(J,Qe)|0))<<13)|0;A=((m=m+Math.imul(J,Ze)|0)+(i>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,d=Math.imul(Ve,nt),i=(i=Math.imul(Ve,ot))+Math.imul(Ke,nt)|0,m=Math.imul(Ke,ot),d=d+Math.imul(De,ut)|0,i=(i=i+Math.imul(De,st)|0)+Math.imul(Fe,ut)|0,m=m+Math.imul(Fe,st)|0,d=d+Math.imul(Ne,rt)|0,i=(i=i+Math.imul(Ne,Ge)|0)+Math.imul(Me,rt)|0,m=m+Math.imul(Me,Ge)|0,d=d+Math.imul(we,qe)|0,i=(i=i+Math.imul(we,We)|0)+Math.imul(Te,qe)|0,m=m+Math.imul(Te,We)|0,d=d+Math.imul(Z,ft)|0,i=(i=i+Math.imul(Z,Ue)|0)+Math.imul(le,ft)|0,m=m+Math.imul(le,Ue)|0,d=d+Math.imul(Se,gt)|0,i=(i=i+Math.imul(Se,it)|0)+Math.imul(ie,gt)|0,m=m+Math.imul(ie,it)|0,d=d+Math.imul(Ee,lt)|0,i=(i=i+Math.imul(Ee,ze)|0)+Math.imul(ue,lt)|0,m=m+Math.imul(ue,ze)|0,d=d+Math.imul(ae,dt)|0,i=(i=i+Math.imul(ae,Xe)|0)+Math.imul(de,dt)|0,m=m+Math.imul(de,Xe)|0,d=d+Math.imul(se,Qe)|0,i=(i=i+Math.imul(se,Ze)|0)+Math.imul(he,Qe)|0,m=m+Math.imul(he,Ze)|0;var $t=(A+(d=d+Math.imul(z,Je)|0)|0)+((8191&(i=(i=i+Math.imul(z,at)|0)+Math.imul(J,Je)|0))<<13)|0;A=((m=m+Math.imul(J,at)|0)+(i>>>13)|0)+($t>>>26)|0,$t&=67108863,d=Math.imul(Ve,ut),i=(i=Math.imul(Ve,st))+Math.imul(Ke,ut)|0,m=Math.imul(Ke,st),d=d+Math.imul(De,rt)|0,i=(i=i+Math.imul(De,Ge)|0)+Math.imul(Fe,rt)|0,m=m+Math.imul(Fe,Ge)|0,d=d+Math.imul(Ne,qe)|0,i=(i=i+Math.imul(Ne,We)|0)+Math.imul(Me,qe)|0,m=m+Math.imul(Me,We)|0,d=d+Math.imul(we,ft)|0,i=(i=i+Math.imul(we,Ue)|0)+Math.imul(Te,ft)|0,m=m+Math.imul(Te,Ue)|0,d=d+Math.imul(Z,gt)|0,i=(i=i+Math.imul(Z,it)|0)+Math.imul(le,gt)|0,m=m+Math.imul(le,it)|0,d=d+Math.imul(Se,lt)|0,i=(i=i+Math.imul(Se,ze)|0)+Math.imul(ie,lt)|0,m=m+Math.imul(ie,ze)|0,d=d+Math.imul(Ee,dt)|0,i=(i=i+Math.imul(Ee,Xe)|0)+Math.imul(ue,dt)|0,m=m+Math.imul(ue,Xe)|0,d=d+Math.imul(ae,Qe)|0,i=(i=i+Math.imul(ae,Ze)|0)+Math.imul(de,Qe)|0,m=m+Math.imul(de,Ze)|0;var Nt=(A+(d=d+Math.imul(se,Je)|0)|0)+((8191&(i=(i=i+Math.imul(se,at)|0)+Math.imul(he,Je)|0))<<13)|0;A=((m=m+Math.imul(he,at)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,d=Math.imul(Ve,rt),i=(i=Math.imul(Ve,Ge))+Math.imul(Ke,rt)|0,m=Math.imul(Ke,Ge),d=d+Math.imul(De,qe)|0,i=(i=i+Math.imul(De,We)|0)+Math.imul(Fe,qe)|0,m=m+Math.imul(Fe,We)|0,d=d+Math.imul(Ne,ft)|0,i=(i=i+Math.imul(Ne,Ue)|0)+Math.imul(Me,ft)|0,m=m+Math.imul(Me,Ue)|0,d=d+Math.imul(we,gt)|0,i=(i=i+Math.imul(we,it)|0)+Math.imul(Te,gt)|0,m=m+Math.imul(Te,it)|0,d=d+Math.imul(Z,lt)|0,i=(i=i+Math.imul(Z,ze)|0)+Math.imul(le,lt)|0,m=m+Math.imul(le,ze)|0,d=d+Math.imul(Se,dt)|0,i=(i=i+Math.imul(Se,Xe)|0)+Math.imul(ie,dt)|0,m=m+Math.imul(ie,Xe)|0,d=d+Math.imul(Ee,Qe)|0,i=(i=i+Math.imul(Ee,Ze)|0)+Math.imul(ue,Qe)|0,m=m+Math.imul(ue,Ze)|0;var xn=(A+(d=d+Math.imul(ae,Je)|0)|0)+((8191&(i=(i=i+Math.imul(ae,at)|0)+Math.imul(de,Je)|0))<<13)|0;A=((m=m+Math.imul(de,at)|0)+(i>>>13)|0)+(xn>>>26)|0,xn&=67108863,d=Math.imul(Ve,qe),i=(i=Math.imul(Ve,We))+Math.imul(Ke,qe)|0,m=Math.imul(Ke,We),d=d+Math.imul(De,ft)|0,i=(i=i+Math.imul(De,Ue)|0)+Math.imul(Fe,ft)|0,m=m+Math.imul(Fe,Ue)|0,d=d+Math.imul(Ne,gt)|0,i=(i=i+Math.imul(Ne,it)|0)+Math.imul(Me,gt)|0,m=m+Math.imul(Me,it)|0,d=d+Math.imul(we,lt)|0,i=(i=i+Math.imul(we,ze)|0)+Math.imul(Te,lt)|0,m=m+Math.imul(Te,ze)|0,d=d+Math.imul(Z,dt)|0,i=(i=i+Math.imul(Z,Xe)|0)+Math.imul(le,dt)|0,m=m+Math.imul(le,Xe)|0,d=d+Math.imul(Se,Qe)|0,i=(i=i+Math.imul(Se,Ze)|0)+Math.imul(ie,Qe)|0,m=m+Math.imul(ie,Ze)|0;var wn=(A+(d=d+Math.imul(Ee,Je)|0)|0)+((8191&(i=(i=i+Math.imul(Ee,at)|0)+Math.imul(ue,Je)|0))<<13)|0;A=((m=m+Math.imul(ue,at)|0)+(i>>>13)|0)+(wn>>>26)|0,wn&=67108863,d=Math.imul(Ve,ft),i=(i=Math.imul(Ve,Ue))+Math.imul(Ke,ft)|0,m=Math.imul(Ke,Ue),d=d+Math.imul(De,gt)|0,i=(i=i+Math.imul(De,it)|0)+Math.imul(Fe,gt)|0,m=m+Math.imul(Fe,it)|0,d=d+Math.imul(Ne,lt)|0,i=(i=i+Math.imul(Ne,ze)|0)+Math.imul(Me,lt)|0,m=m+Math.imul(Me,ze)|0,d=d+Math.imul(we,dt)|0,i=(i=i+Math.imul(we,Xe)|0)+Math.imul(Te,dt)|0,m=m+Math.imul(Te,Xe)|0,d=d+Math.imul(Z,Qe)|0,i=(i=i+Math.imul(Z,Ze)|0)+Math.imul(le,Qe)|0,m=m+Math.imul(le,Ze)|0;var _n=(A+(d=d+Math.imul(Se,Je)|0)|0)+((8191&(i=(i=i+Math.imul(Se,at)|0)+Math.imul(ie,Je)|0))<<13)|0;A=((m=m+Math.imul(ie,at)|0)+(i>>>13)|0)+(_n>>>26)|0,_n&=67108863,d=Math.imul(Ve,gt),i=(i=Math.imul(Ve,it))+Math.imul(Ke,gt)|0,m=Math.imul(Ke,it),d=d+Math.imul(De,lt)|0,i=(i=i+Math.imul(De,ze)|0)+Math.imul(Fe,lt)|0,m=m+Math.imul(Fe,ze)|0,d=d+Math.imul(Ne,dt)|0,i=(i=i+Math.imul(Ne,Xe)|0)+Math.imul(Me,dt)|0,m=m+Math.imul(Me,Xe)|0,d=d+Math.imul(we,Qe)|0,i=(i=i+Math.imul(we,Ze)|0)+Math.imul(Te,Qe)|0,m=m+Math.imul(Te,Ze)|0;var xt=(A+(d=d+Math.imul(Z,Je)|0)|0)+((8191&(i=(i=i+Math.imul(Z,at)|0)+Math.imul(le,Je)|0))<<13)|0;A=((m=m+Math.imul(le,at)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,d=Math.imul(Ve,lt),i=(i=Math.imul(Ve,ze))+Math.imul(Ke,lt)|0,m=Math.imul(Ke,ze),d=d+Math.imul(De,dt)|0,i=(i=i+Math.imul(De,Xe)|0)+Math.imul(Fe,dt)|0,m=m+Math.imul(Fe,Xe)|0,d=d+Math.imul(Ne,Qe)|0,i=(i=i+Math.imul(Ne,Ze)|0)+Math.imul(Me,Qe)|0,m=m+Math.imul(Me,Ze)|0;var Rn=(A+(d=d+Math.imul(we,Je)|0)|0)+((8191&(i=(i=i+Math.imul(we,at)|0)+Math.imul(Te,Je)|0))<<13)|0;A=((m=m+Math.imul(Te,at)|0)+(i>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,d=Math.imul(Ve,dt),i=(i=Math.imul(Ve,Xe))+Math.imul(Ke,dt)|0,m=Math.imul(Ke,Xe),d=d+Math.imul(De,Qe)|0,i=(i=i+Math.imul(De,Ze)|0)+Math.imul(Fe,Qe)|0,m=m+Math.imul(Fe,Ze)|0;var Jt=(A+(d=d+Math.imul(Ne,Je)|0)|0)+((8191&(i=(i=i+Math.imul(Ne,at)|0)+Math.imul(Me,Je)|0))<<13)|0;A=((m=m+Math.imul(Me,at)|0)+(i>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,d=Math.imul(Ve,Qe),i=(i=Math.imul(Ve,Ze))+Math.imul(Ke,Qe)|0,m=Math.imul(Ke,Ze);var tn=(A+(d=d+Math.imul(De,Je)|0)|0)+((8191&(i=(i=i+Math.imul(De,at)|0)+Math.imul(Fe,Je)|0))<<13)|0;A=((m=m+Math.imul(Fe,at)|0)+(i>>>13)|0)+(tn>>>26)|0,tn&=67108863;var Sn=(A+(d=Math.imul(Ve,Je))|0)+((8191&(i=(i=Math.imul(Ve,at))+Math.imul(Ke,Je)|0))<<13)|0;return A=((m=Math.imul(Ke,at))+(i>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,M[0]=un,M[1]=Vt,M[2]=Ht,M[3]=bn,M[4]=dn,M[5]=pn,M[6]=In,M[7]=rn,M[8]=Mn,M[9]=$t,M[10]=Nt,M[11]=xn,M[12]=wn,M[13]=_n,M[14]=xt,M[15]=Rn,M[16]=Jt,M[17]=tn,M[18]=Sn,0!==A&&(M[19]=A,l.length++),l};function k(R,r,s){return(new O).mulp(R,r,s)}function O(R,r){this.x=R,this.y=r}Math.imul||(I=w),u.prototype.mulTo=function(r,s){var a=this.length+r.length;return 10===this.length&&10===r.length?I(this,r,s):a<63?w(this,r,s):a<1024?function(R,r,s){s.negative=r.negative^R.negative,s.length=R.length+r.length;for(var l=0,a=0,f=0;f<s.length-1;f++){var M=a;a=0;for(var A=67108863&l,d=Math.min(f,r.length-1),i=Math.max(0,f-R.length+1);i<=d;i++){var J=(0|R.words[f-i])*(0|r.words[i]),ce=67108863&J;A=67108863&(ce=ce+A|0),a+=(M=(M=M+(J/67108864|0)|0)+(ce>>>26)|0)>>>26,M&=67108863}s.words[f]=A,l=M,M=a}return 0!==l?s.words[f]=l:s.length--,s.strip()}(this,r,s):k(this,r,s)},O.prototype.makeRBT=function(r){for(var s=new Array(r),l=u.prototype._countBits(r)-1,a=0;a<r;a++)s[a]=this.revBin(a,l,r);return s},O.prototype.revBin=function(r,s,l){if(0===r||r===l-1)return r;for(var a=0,f=0;f<s;f++)a|=(1&r)<<s-f-1,r>>=1;return a},O.prototype.permute=function(r,s,l,a,f,M){for(var A=0;A<M;A++)a[A]=s[r[A]],f[A]=l[r[A]]},O.prototype.transform=function(r,s,l,a,f,M){this.permute(M,r,s,l,a,f);for(var A=1;A<f;A<<=1)for(var d=A<<1,i=Math.cos(2*Math.PI/d),m=Math.sin(2*Math.PI/d),q=0;q<f;q+=d)for(var z=i,J=m,ce=0;ce<A;ce++){var se=l[q+ce],he=a[q+ce],ve=l[q+ce+A],ae=a[q+ce+A],de=z*ve-J*ae;ae=z*ae+J*ve,l[q+ce]=se+(ve=de),a[q+ce]=he+ae,l[q+ce+A]=se-ve,a[q+ce+A]=he-ae,ce!==d&&(de=i*z-m*J,J=i*J+m*z,z=de)}},O.prototype.guessLen13b=function(r,s){var l=1|Math.max(s,r),a=1&l,f=0;for(l=l/2|0;l;l>>>=1)f++;return 1<<f+1+a},O.prototype.conjugate=function(r,s,l){if(!(l<=1))for(var a=0;a<l/2;a++){var f=r[a];r[a]=r[l-a-1],r[l-a-1]=f,f=s[a],s[a]=-s[l-a-1],s[l-a-1]=-f}},O.prototype.normalize13b=function(r,s){for(var l=0,a=0;a<s/2;a++){var f=8192*Math.round(r[2*a+1]/s)+Math.round(r[2*a]/s)+l;r[a]=67108863&f,l=f<67108864?0:f/67108864|0}return r},O.prototype.convert13b=function(r,s,l,a){for(var f=0,M=0;M<s;M++)l[2*M]=8191&(f+=0|r[M]),l[2*M+1]=8191&(f>>>=13),f>>>=13;for(M=2*s;M<a;++M)l[M]=0;y(0===f),y(0==(-8192&f))},O.prototype.stub=function(r){for(var s=new Array(r),l=0;l<r;l++)s[l]=0;return s},O.prototype.mulp=function(r,s,l){var a=2*this.guessLen13b(r.length,s.length),f=this.makeRBT(a),M=this.stub(a),A=new Array(a),d=new Array(a),i=new Array(a),m=new Array(a),q=new Array(a),z=new Array(a),J=l.words;J.length=a,this.convert13b(r.words,r.length,A,a),this.convert13b(s.words,s.length,m,a),this.transform(A,M,d,i,a,f),this.transform(m,M,q,z,a,f);for(var ce=0;ce<a;ce++){var se=d[ce]*q[ce]-i[ce]*z[ce];i[ce]=d[ce]*z[ce]+i[ce]*q[ce],d[ce]=se}return this.conjugate(d,i,a),this.transform(d,i,J,M,a,f),this.conjugate(J,M,a),this.normalize13b(J,a),l.negative=r.negative^s.negative,l.length=r.length+s.length,l.strip()},u.prototype.mul=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),this.mulTo(r,s)},u.prototype.mulf=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),k(this,r,s)},u.prototype.imul=function(r){return this.clone().mulTo(r,this)},u.prototype.imuln=function(r){y("number"==typeof r),y(r<67108864);for(var s=0,l=0;l<this.length;l++){var a=(0|this.words[l])*r,f=(67108863&a)+(67108863&s);s>>=26,s+=a/67108864|0,s+=f>>>26,this.words[l]=67108863&f}return 0!==s&&(this.words[l]=s,this.length++),this},u.prototype.muln=function(r){return this.clone().imuln(r)},u.prototype.sqr=function(){return this.mul(this)},u.prototype.isqr=function(){return this.imul(this.clone())},u.prototype.pow=function(r){var s=function(R){for(var r=new Array(R.bitLength()),s=0;s<r.length;s++){var a=s%26;r[s]=(R.words[s/26|0]&1<<a)>>>a}return r}(r);if(0===s.length)return new u(1);for(var l=this,a=0;a<s.length&&0===s[a];a++,l=l.sqr());if(++a<s.length)for(var f=l.sqr();a<s.length;a++,f=f.sqr())0!==s[a]&&(l=l.mul(f));return l},u.prototype.iushln=function(r){y("number"==typeof r&&r>=0);var f,s=r%26,l=(r-s)/26,a=67108863>>>26-s<<26-s;if(0!==s){var M=0;for(f=0;f<this.length;f++){var A=this.words[f]&a;this.words[f]=(0|this.words[f])-A<<s|M,M=A>>>26-s}M&&(this.words[f]=M,this.length++)}if(0!==l){for(f=this.length-1;f>=0;f--)this.words[f+l]=this.words[f];for(f=0;f<l;f++)this.words[f]=0;this.length+=l}return this.strip()},u.prototype.ishln=function(r){return y(0===this.negative),this.iushln(r)},u.prototype.iushrn=function(r,s,l){var a;y("number"==typeof r&&r>=0),a=s?(s-s%26)/26:0;var f=r%26,M=Math.min((r-f)/26,this.length),A=67108863^67108863>>>f<<f,d=l;if(a-=M,a=Math.max(0,a),d){for(var i=0;i<M;i++)d.words[i]=this.words[i];d.length=M}if(0!==M)if(this.length>M)for(this.length-=M,i=0;i<this.length;i++)this.words[i]=this.words[i+M];else this.words[0]=0,this.length=1;var m=0;for(i=this.length-1;i>=0&&(0!==m||i>=a);i--){var q=0|this.words[i];this.words[i]=m<<26-f|q>>>f,m=q&A}return d&&0!==m&&(d.words[d.length++]=m),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},u.prototype.ishrn=function(r,s,l){return y(0===this.negative),this.iushrn(r,s,l)},u.prototype.shln=function(r){return this.clone().ishln(r)},u.prototype.ushln=function(r){return this.clone().iushln(r)},u.prototype.shrn=function(r){return this.clone().ishrn(r)},u.prototype.ushrn=function(r){return this.clone().iushrn(r)},u.prototype.testn=function(r){y("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return!(this.length<=l||!(this.words[l]&1<<s))},u.prototype.imaskn=function(r){y("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return y(0===this.negative,"imaskn works only with positive numbers"),this.length<=l?this:(0!==s&&l++,this.length=Math.min(l,this.length),0!==s&&(this.words[this.length-1]&=67108863^67108863>>>s<<s),this.strip())},u.prototype.maskn=function(r){return this.clone().imaskn(r)},u.prototype.iaddn=function(r){return y("number"==typeof r),y(r<67108864),r<0?this.isubn(-r):0!==this.negative?1===this.length&&(0|this.words[0])<r?(this.words[0]=r-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(r),this.negative=1,this):this._iaddn(r)},u.prototype._iaddn=function(r){this.words[0]+=r;for(var s=0;s<this.length&&this.words[s]>=67108864;s++)this.words[s]-=67108864,s===this.length-1?this.words[s+1]=1:this.words[s+1]++;return this.length=Math.max(this.length,s+1),this},u.prototype.isubn=function(r){if(y("number"==typeof r),y(r<67108864),r<0)return this.iaddn(-r);if(0!==this.negative)return this.negative=0,this.iaddn(r),this.negative=1,this;if(this.words[0]-=r,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var s=0;s<this.length&&this.words[s]<0;s++)this.words[s]+=67108864,this.words[s+1]-=1;return this.strip()},u.prototype.addn=function(r){return this.clone().iaddn(r)},u.prototype.subn=function(r){return this.clone().isubn(r)},u.prototype.iabs=function(){return this.negative=0,this},u.prototype.abs=function(){return this.clone().iabs()},u.prototype._ishlnsubmul=function(r,s,l){var f;this._expand(r.length+l);var M,A=0;for(f=0;f<r.length;f++){M=(0|this.words[f+l])+A;var d=(0|r.words[f])*s;A=((M-=67108863&d)>>26)-(d/67108864|0),this.words[f+l]=67108863&M}for(;f<this.length-l;f++)A=(M=(0|this.words[f+l])+A)>>26,this.words[f+l]=67108863&M;if(0===A)return this.strip();for(y(-1===A),A=0,f=0;f<this.length;f++)A=(M=-(0|this.words[f])+A)>>26,this.words[f]=67108863&M;return this.negative=1,this.strip()},u.prototype._wordDiv=function(r,s){var l,a=this.clone(),f=r,M=0|f.words[f.length-1];0!=(l=26-this._countBits(M))&&(f=f.ushln(l),a.iushln(l),M=0|f.words[f.length-1]);var i,d=a.length-f.length;if("mod"!==s){(i=new u(null)).length=d+1,i.words=new Array(i.length);for(var m=0;m<i.length;m++)i.words[m]=0}var q=a.clone()._ishlnsubmul(f,1,d);0===q.negative&&(a=q,i&&(i.words[d]=1));for(var z=d-1;z>=0;z--){var J=67108864*(0|a.words[f.length+z])+(0|a.words[f.length+z-1]);for(J=Math.min(J/M|0,67108863),a._ishlnsubmul(f,J,z);0!==a.negative;)J--,a.negative=0,a._ishlnsubmul(f,1,z),a.isZero()||(a.negative^=1);i&&(i.words[z]=J)}return i&&i.strip(),a.strip(),"div"!==s&&0!==l&&a.iushrn(l),{div:i||null,mod:a}},u.prototype.divmod=function(r,s,l){return y(!r.isZero()),this.isZero()?{div:new u(0),mod:new u(0)}:0!==this.negative&&0===r.negative?(M=this.neg().divmod(r,s),"mod"!==s&&(a=M.div.neg()),"div"!==s&&(f=M.mod.neg(),l&&0!==f.negative&&f.iadd(r)),{div:a,mod:f}):0===this.negative&&0!==r.negative?(M=this.divmod(r.neg(),s),"mod"!==s&&(a=M.div.neg()),{div:a,mod:M.mod}):0!=(this.negative&r.negative)?(M=this.neg().divmod(r.neg(),s),"div"!==s&&(f=M.mod.neg(),l&&0!==f.negative&&f.isub(r)),{div:M.div,mod:f}):r.length>this.length||this.cmp(r)<0?{div:new u(0),mod:this}:1===r.length?"div"===s?{div:this.divn(r.words[0]),mod:null}:"mod"===s?{div:null,mod:new u(this.modn(r.words[0]))}:{div:this.divn(r.words[0]),mod:new u(this.modn(r.words[0]))}:this._wordDiv(r,s);var a,f,M},u.prototype.div=function(r){return this.divmod(r,"div",!1).div},u.prototype.mod=function(r){return this.divmod(r,"mod",!1).mod},u.prototype.umod=function(r){return this.divmod(r,"mod",!0).mod},u.prototype.divRound=function(r){var s=this.divmod(r);if(s.mod.isZero())return s.div;var l=0!==s.div.negative?s.mod.isub(r):s.mod,a=r.ushrn(1),f=r.andln(1),M=l.cmp(a);return M<0||1===f&&0===M?s.div:0!==s.div.negative?s.div.isubn(1):s.div.iaddn(1)},u.prototype.modn=function(r){y(r<=67108863);for(var s=(1<<26)%r,l=0,a=this.length-1;a>=0;a--)l=(s*l+(0|this.words[a]))%r;return l},u.prototype.idivn=function(r){y(r<=67108863);for(var s=0,l=this.length-1;l>=0;l--){var a=(0|this.words[l])+67108864*s;this.words[l]=a/r|0,s=a%r}return this.strip()},u.prototype.divn=function(r){return this.clone().idivn(r)},u.prototype.egcd=function(r){y(0===r.negative),y(!r.isZero());var s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),M=new u(0),A=new u(1),d=0;s.isEven()&&l.isEven();)s.iushrn(1),l.iushrn(1),++d;for(var i=l.clone(),m=s.clone();!s.isZero();){for(var q=0,z=1;0==(s.words[0]&z)&&q<26;++q,z<<=1);if(q>0)for(s.iushrn(q);q-- >0;)(a.isOdd()||f.isOdd())&&(a.iadd(i),f.isub(m)),a.iushrn(1),f.iushrn(1);for(var J=0,ce=1;0==(l.words[0]&ce)&&J<26;++J,ce<<=1);if(J>0)for(l.iushrn(J);J-- >0;)(M.isOdd()||A.isOdd())&&(M.iadd(i),A.isub(m)),M.iushrn(1),A.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(M),f.isub(A)):(l.isub(s),M.isub(a),A.isub(f))}return{a:M,b:A,gcd:l.iushln(d)}},u.prototype._invmp=function(r){y(0===r.negative),y(!r.isZero());var q,s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),M=l.clone();s.cmpn(1)>0&&l.cmpn(1)>0;){for(var A=0,d=1;0==(s.words[0]&d)&&A<26;++A,d<<=1);if(A>0)for(s.iushrn(A);A-- >0;)a.isOdd()&&a.iadd(M),a.iushrn(1);for(var i=0,m=1;0==(l.words[0]&m)&&i<26;++i,m<<=1);if(i>0)for(l.iushrn(i);i-- >0;)f.isOdd()&&f.iadd(M),f.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(f)):(l.isub(s),f.isub(a))}return(q=0===s.cmpn(1)?a:f).cmpn(0)<0&&q.iadd(r),q},u.prototype.gcd=function(r){if(this.isZero())return r.abs();if(r.isZero())return this.abs();var s=this.clone(),l=r.clone();s.negative=0,l.negative=0;for(var a=0;s.isEven()&&l.isEven();a++)s.iushrn(1),l.iushrn(1);for(;;){for(;s.isEven();)s.iushrn(1);for(;l.isEven();)l.iushrn(1);var f=s.cmp(l);if(f<0){var M=s;s=l,l=M}else if(0===f||0===l.cmpn(1))break;s.isub(l)}return l.iushln(a)},u.prototype.invm=function(r){return this.egcd(r).a.umod(r)},u.prototype.isEven=function(){return 0==(1&this.words[0])},u.prototype.isOdd=function(){return 1==(1&this.words[0])},u.prototype.andln=function(r){return this.words[0]&r},u.prototype.bincn=function(r){y("number"==typeof r);var s=r%26,l=(r-s)/26,a=1<<s;if(this.length<=l)return this._expand(l+1),this.words[l]|=a,this;for(var f=a,M=l;0!==f&&M<this.length;M++){var A=0|this.words[M];f=(A+=f)>>>26,this.words[M]=A&=67108863}return 0!==f&&(this.words[M]=f,this.length++),this},u.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},u.prototype.cmpn=function(r){var l,s=r<0;if(0!==this.negative&&!s)return-1;if(0===this.negative&&s)return 1;if(this.strip(),this.length>1)l=1;else{s&&(r=-r),y(r<=67108863,"Number is too big");var a=0|this.words[0];l=a===r?0:a<r?-1:1}return 0!==this.negative?0|-l:l},u.prototype.cmp=function(r){if(0!==this.negative&&0===r.negative)return-1;if(0===this.negative&&0!==r.negative)return 1;var s=this.ucmp(r);return 0!==this.negative?0|-s:s},u.prototype.ucmp=function(r){if(this.length>r.length)return 1;if(this.length<r.length)return-1;for(var s=0,l=this.length-1;l>=0;l--){var a=0|this.words[l],f=0|r.words[l];if(a!==f){a<f?s=-1:a>f&&(s=1);break}}return s},u.prototype.gtn=function(r){return 1===this.cmpn(r)},u.prototype.gt=function(r){return 1===this.cmp(r)},u.prototype.gten=function(r){return this.cmpn(r)>=0},u.prototype.gte=function(r){return this.cmp(r)>=0},u.prototype.ltn=function(r){return-1===this.cmpn(r)},u.prototype.lt=function(r){return-1===this.cmp(r)},u.prototype.lten=function(r){return this.cmpn(r)<=0},u.prototype.lte=function(r){return this.cmp(r)<=0},u.prototype.eqn=function(r){return 0===this.cmpn(r)},u.prototype.eq=function(r){return 0===this.cmp(r)},u.red=function(r){return new K(r)},u.prototype.toRed=function(r){return y(!this.red,"Already a number in reduction context"),y(0===this.negative,"red works only with positives"),r.convertTo(this)._forceRed(r)},u.prototype.fromRed=function(){return y(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},u.prototype._forceRed=function(r){return this.red=r,this},u.prototype.forceRed=function(r){return y(!this.red,"Already a number in reduction context"),this._forceRed(r)},u.prototype.redAdd=function(r){return y(this.red,"redAdd works only with red numbers"),this.red.add(this,r)},u.prototype.redIAdd=function(r){return y(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,r)},u.prototype.redSub=function(r){return y(this.red,"redSub works only with red numbers"),this.red.sub(this,r)},u.prototype.redISub=function(r){return y(this.red,"redISub works only with red numbers"),this.red.isub(this,r)},u.prototype.redShl=function(r){return y(this.red,"redShl works only with red numbers"),this.red.shl(this,r)},u.prototype.redMul=function(r){return y(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.mul(this,r)},u.prototype.redIMul=function(r){return y(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.imul(this,r)},u.prototype.redSqr=function(){return y(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},u.prototype.redISqr=function(){return y(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},u.prototype.redSqrt=function(){return y(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},u.prototype.redInvm=function(){return y(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},u.prototype.redNeg=function(){return y(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},u.prototype.redPow=function(r){return y(this.red&&!r.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,r)};var V={k256:null,p224:null,p192:null,p25519:null};function B(R,r){this.name=R,this.p=new u(r,16),this.n=this.p.bitLength(),this.k=new u(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function U(){B.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function j(){B.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function W(){B.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function X(){B.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function K(R){if("string"==typeof R){var r=u._prime(R);this.m=r.p,this.prime=r}else y(R.gtn(1),"modulus must be greater than 1"),this.m=R,this.prime=null}function ge(R){K.call(this,R),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new u(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}B.prototype._tmp=function(){var r=new u(null);return r.words=new Array(Math.ceil(this.n/13)),r},B.prototype.ireduce=function(r){var l,s=r;do{this.split(s,this.tmp),l=(s=(s=this.imulK(s)).iadd(this.tmp)).bitLength()}while(l>this.n);var a=l<this.n?-1:s.ucmp(this.p);return 0===a?(s.words[0]=0,s.length=1):a>0?s.isub(this.p):void 0!==s.strip?s.strip():s._strip(),s},B.prototype.split=function(r,s){r.iushrn(this.n,0,s)},B.prototype.imulK=function(r){return r.imul(this.k)},x(U,B),U.prototype.split=function(r,s){for(var l=4194303,a=Math.min(r.length,9),f=0;f<a;f++)s.words[f]=r.words[f];if(s.length=a,r.length<=9)return r.words[0]=0,void(r.length=1);var M=r.words[9];for(s.words[s.length++]=M&l,f=10;f<r.length;f++){var A=0|r.words[f];r.words[f-10]=(A&l)<<4|M>>>22,M=A}r.words[f-10]=M>>>=22,r.length-=0===M&&r.length>10?10:9},U.prototype.imulK=function(r){r.words[r.length]=0,r.words[r.length+1]=0,r.length+=2;for(var s=0,l=0;l<r.length;l++){var a=0|r.words[l];r.words[l]=67108863&(s+=977*a),s=64*a+(s/67108864|0)}return 0===r.words[r.length-1]&&(r.length--,0===r.words[r.length-1]&&r.length--),r},x(j,B),x(W,B),x(X,B),X.prototype.imulK=function(r){for(var s=0,l=0;l<r.length;l++){var a=19*(0|r.words[l])+s,f=67108863&a;a>>>=26,r.words[l]=f,s=a}return 0!==s&&(r.words[r.length++]=s),r},u._prime=function(r){if(V[r])return V[r];var s;if("k256"===r)s=new U;else if("p224"===r)s=new j;else if("p192"===r)s=new W;else{if("p25519"!==r)throw new Error("Unknown prime "+r);s=new X}return V[r]=s,s},K.prototype._verify1=function(r){y(0===r.negative,"red works only with positives"),y(r.red,"red works only with red numbers")},K.prototype._verify2=function(r,s){y(0==(r.negative|s.negative),"red works only with positives"),y(r.red&&r.red===s.red,"red works only with red numbers")},K.prototype.imod=function(r){return this.prime?this.prime.ireduce(r)._forceRed(this):r.umod(this.m)._forceRed(this)},K.prototype.neg=function(r){return r.isZero()?r.clone():this.m.sub(r)._forceRed(this)},K.prototype.add=function(r,s){this._verify2(r,s);var l=r.add(s);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},K.prototype.iadd=function(r,s){this._verify2(r,s);var l=r.iadd(s);return l.cmp(this.m)>=0&&l.isub(this.m),l},K.prototype.sub=function(r,s){this._verify2(r,s);var l=r.sub(s);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},K.prototype.isub=function(r,s){this._verify2(r,s);var l=r.isub(s);return l.cmpn(0)<0&&l.iadd(this.m),l},K.prototype.shl=function(r,s){return this._verify1(r),this.imod(r.ushln(s))},K.prototype.imul=function(r,s){return this._verify2(r,s),this.imod(r.imul(s))},K.prototype.mul=function(r,s){return this._verify2(r,s),this.imod(r.mul(s))},K.prototype.isqr=function(r){return this.imul(r,r.clone())},K.prototype.sqr=function(r){return this.mul(r,r)},K.prototype.sqrt=function(r){if(r.isZero())return r.clone();var s=this.m.andln(3);if(y(s%2==1),3===s){var l=this.m.add(new u(1)).iushrn(2);return this.pow(r,l)}for(var a=this.m.subn(1),f=0;!a.isZero()&&0===a.andln(1);)f++,a.iushrn(1);y(!a.isZero());var M=new u(1).toRed(this),A=M.redNeg(),d=this.m.subn(1).iushrn(1),i=this.m.bitLength();for(i=new u(2*i*i).toRed(this);0!==this.pow(i,d).cmp(A);)i.redIAdd(A);for(var m=this.pow(i,a),q=this.pow(r,a.addn(1).iushrn(1)),z=this.pow(r,a),J=f;0!==z.cmp(M);){for(var ce=z,se=0;0!==ce.cmp(M);se++)ce=ce.redSqr();y(se<J);var he=this.pow(m,new u(1).iushln(J-se-1));q=q.redMul(he),m=he.redSqr(),z=z.redMul(m),J=se}return q},K.prototype.invm=function(r){var s=r._invmp(this.m);return 0!==s.negative?(s.negative=0,this.imod(s).redNeg()):this.imod(s)},K.prototype.pow=function(r,s){if(s.isZero())return new u(1).toRed(this);if(0===s.cmpn(1))return r.clone();var a=new Array(16);a[0]=new u(1).toRed(this),a[1]=r;for(var f=2;f<a.length;f++)a[f]=this.mul(a[f-1],r);var M=a[0],A=0,d=0,i=s.bitLength()%26;for(0===i&&(i=26),f=s.length-1;f>=0;f--){for(var m=s.words[f],q=i-1;q>=0;q--){var z=m>>q&1;M!==a[0]&&(M=this.sqr(M)),0!==z||0!==A?(A<<=1,A|=z,(4==++d||0===f&&0===q)&&(M=this.mul(M,a[A]),d=0,A=0)):d=0}i=26}return M},K.prototype.convertTo=function(r){var s=r.umod(this.m);return s===r?s.clone():s},K.prototype.convertFrom=function(r){var s=r.clone();return s.red=null,s},u.mont=function(r){return new ge(r)},x(ge,K),ge.prototype.convertTo=function(r){return this.imod(r.ushln(this.shift))},ge.prototype.convertFrom=function(r){var s=this.imod(r.mul(this.rinv));return s.red=null,s},ge.prototype.imul=function(r,s){if(r.isZero()||s.isZero())return r.words[0]=0,r.length=1,r;var l=r.imul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),M=f;return f.cmp(this.m)>=0?M=f.isub(this.m):f.cmpn(0)<0&&(M=f.iadd(this.m)),M._forceRed(this)},ge.prototype.mul=function(r,s){if(r.isZero()||s.isZero())return new u(0)._forceRed(this);var l=r.mul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),M=f;return f.cmp(this.m)>=0?M=f.isub(this.m):f.cmpn(0)<0&&(M=f.iadd(this.m)),M._forceRed(this)},ge.prototype.invm=function(r){return this.imod(r._invmp(this.m).mul(this.r2))._forceRed(this)}}(Y=T.nmd(Y),this)},2506:(Y,L,T)=>{"use strict";var p=T(9879),N=T(3264),y=T(5207),x=T(5829),u=T(5834);function g(C){u.call(this,"digest"),this._hash=C}p(g,u),g.prototype._update=function(C){this._hash.update(C)},g.prototype._final=function(){return this._hash.digest()},Y.exports=function(P){return"md5"===(P=P.toLowerCase())?new N:"rmd160"===P||"ripemd160"===P?new y:new g(x(P))}},4464:(Y,L,T)=>{var p=T(3264);Y.exports=function(N){return(new p).update(N).digest()}},5903:(Y,L,T)=>{"use strict";var p=T(9879),N=T(3715),y=T(5834),x=T(5859).Buffer,u=T(4464),g=T(5207),C=T(5829),P=x.alloc(128);function E(v,h){y.call(this,"digest"),"string"==typeof h&&(h=x.from(h));var _="sha512"===v||"sha384"===v?128:64;this._alg=v,this._key=h,h.length>_?h=("rmd160"===v?new g:C(v)).update(h).digest():h.length<_&&(h=x.concat([h,P],_));for(var w=this._ipad=x.allocUnsafe(_),I=this._opad=x.allocUnsafe(_),D=0;D<_;D++)w[D]=54^h[D],I[D]=92^h[D];this._hash="rmd160"===v?new g:C(v),this._hash.update(w)}p(E,y),E.prototype._update=function(v){this._hash.update(v)},E.prototype._final=function(){var v=this._hash.digest();return("rmd160"===this._alg?new g:C(this._alg)).update(this._opad).update(v).digest()},Y.exports=function(h,_){return"rmd160"===(h=h.toLowerCase())||"ripemd160"===h?new E("rmd160",_):"md5"===h?new N(u,_):new E(h,_)}},3715:(Y,L,T)=>{"use strict";var p=T(9879),N=T(5859).Buffer,y=T(5834),x=N.alloc(128),u=64;function g(C,P){y.call(this,"digest"),"string"==typeof P&&(P=N.from(P)),this._alg=C,this._key=P,P.length>u?P=C(P):P.length<u&&(P=N.concat([P,x],u));for(var E=this._ipad=N.allocUnsafe(u),v=this._opad=N.allocUnsafe(u),h=0;h<u;h++)E[h]=54^P[h],v[h]=92^P[h];this._hash=[E]}p(g,y),g.prototype._update=function(C){this._hash.push(C)},g.prototype._final=function(){var C=this._alg(N.concat(this._hash));return this._alg(N.concat([this._opad,C]))},Y.exports=g},9726:(Y,L,T)=>{"use strict";L.randomBytes=L.rng=L.pseudoRandomBytes=L.prng=T(6589),L.createHash=L.Hash=T(2506),L.createHmac=L.Hmac=T(5903);var p=T(6380),N=Object.keys(p),y=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(N);L.getHashes=function(){return y};var x=T(4161);L.pbkdf2=x.pbkdf2,L.pbkdf2Sync=x.pbkdf2Sync;var u=T(7991);L.Cipher=u.Cipher,L.createCipher=u.createCipher,L.Cipheriv=u.Cipheriv,L.createCipheriv=u.createCipheriv,L.Decipher=u.Decipher,L.createDecipher=u.createDecipher,L.Decipheriv=u.Decipheriv,L.createDecipheriv=u.createDecipheriv,L.getCiphers=u.getCiphers,L.listCiphers=u.listCiphers;var g=T(2322);L.DiffieHellmanGroup=g.DiffieHellmanGroup,L.createDiffieHellmanGroup=g.createDiffieHellmanGroup,L.getDiffieHellman=g.getDiffieHellman,L.createDiffieHellman=g.createDiffieHellman,L.DiffieHellman=g.DiffieHellman;var C=T(3566);L.createSign=C.createSign,L.Sign=C.Sign,L.createVerify=C.createVerify,L.Verify=C.Verify,L.createECDH=T(4892);var P=T(7537);L.publicEncrypt=P.publicEncrypt,L.privateEncrypt=P.privateEncrypt,L.publicDecrypt=P.publicDecrypt,L.privateDecrypt=P.privateDecrypt;var E=T(3594);L.randomFill=E.randomFill,L.randomFillSync=E.randomFillSync,L.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},L.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},8534:(Y,L,T)=>{"use strict";L.utils=T(6157),L.Cipher=T(2243),L.DES=T(2917),L.CBC=T(8029),L.EDE=T(1082)},8029:(Y,L,T)=>{"use strict";var p=T(6055),N=T(9879),y={};function x(g){p.equal(g.length,8,"Invalid IV length"),this.iv=new Array(8);for(var C=0;C<this.iv.length;C++)this.iv[C]=g[C]}L.instantiate=function(g){function C(h){g.call(this,h),this._cbcInit()}N(C,g);for(var P=Object.keys(y),E=0;E<P.length;E++){var v=P[E];C.prototype[v]=y[v]}return C.create=function(_){return new C(_)},C},y._cbcInit=function(){var C=new x(this.options.iv);this._cbcState=C},y._update=function(C,P,E,v){var _=this.constructor.super_.prototype,b=this._cbcState.iv;if("encrypt"===this.type){for(var w=0;w<this.blockSize;w++)b[w]^=C[P+w];for(_._update.call(this,b,0,E,v),w=0;w<this.blockSize;w++)b[w]=E[v+w]}else{for(_._update.call(this,C,P,E,v),w=0;w<this.blockSize;w++)E[v+w]^=b[w];for(w=0;w<this.blockSize;w++)b[w]=C[P+w]}}},2243:(Y,L,T)=>{"use strict";var p=T(6055);function N(y){this.options=y,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}Y.exports=N,N.prototype._init=function(){},N.prototype.update=function(x){return 0===x.length?[]:"decrypt"===this.type?this._updateDecrypt(x):this._updateEncrypt(x)},N.prototype._buffer=function(x,u){for(var g=Math.min(this.buffer.length-this.bufferOff,x.length-u),C=0;C<g;C++)this.buffer[this.bufferOff+C]=x[u+C];return this.bufferOff+=g,g},N.prototype._flushBuffer=function(x,u){return this._update(this.buffer,0,x,u),this.bufferOff=0,this.blockSize},N.prototype._updateEncrypt=function(x){var u=0,g=0,P=new Array(((this.bufferOff+x.length)/this.blockSize|0)*this.blockSize);0!==this.bufferOff&&(u+=this._buffer(x,u),this.bufferOff===this.buffer.length&&(g+=this._flushBuffer(P,g)));for(var E=x.length-(x.length-u)%this.blockSize;u<E;u+=this.blockSize)this._update(x,u,P,g),g+=this.blockSize;for(;u<x.length;u++,this.bufferOff++)this.buffer[this.bufferOff]=x[u];return P},N.prototype._updateDecrypt=function(x){for(var u=0,g=0,C=Math.ceil((this.bufferOff+x.length)/this.blockSize)-1,P=new Array(C*this.blockSize);C>0;C--)u+=this._buffer(x,u),g+=this._flushBuffer(P,g);return u+=this._buffer(x,u),P},N.prototype.final=function(x){var u,g;return x&&(u=this.update(x)),g="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),u?u.concat(g):g},N.prototype._pad=function(x,u){if(0===u)return!1;for(;u<x.length;)x[u++]=0;return!0},N.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var x=new Array(this.blockSize);return this._update(this.buffer,0,x,0),x},N.prototype._unpad=function(x){return x},N.prototype._finalDecrypt=function(){p.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var x=new Array(this.blockSize);return this._flushBuffer(x,0),this._unpad(x)}},2917:(Y,L,T)=>{"use strict";var p=T(6055),N=T(9879),y=T(6157),x=T(2243);function u(){this.tmp=new Array(2),this.keys=null}function g(P){x.call(this,P);var E=new u;this._desState=E,this.deriveKeys(E,P.key)}N(g,x),Y.exports=g,g.create=function(E){return new g(E)};var C=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];g.prototype.deriveKeys=function(E,v){E.keys=new Array(32),p.equal(v.length,this.blockSize,"Invalid key length");var h=y.readUInt32BE(v,0),_=y.readUInt32BE(v,4);y.pc1(h,_,E.tmp,0),h=E.tmp[0],_=E.tmp[1];for(var b=0;b<E.keys.length;b+=2){var w=C[b>>>1];h=y.r28shl(h,w),_=y.r28shl(_,w),y.pc2(h,_,E.keys,b)}},g.prototype._update=function(E,v,h,_){var b=this._desState,w=y.readUInt32BE(E,v),I=y.readUInt32BE(E,v+4);y.ip(w,I,b.tmp,0),w=b.tmp[0],I=b.tmp[1],"encrypt"===this.type?this._encrypt(b,w,I,b.tmp,0):this._decrypt(b,w,I,b.tmp,0),I=b.tmp[1],y.writeUInt32BE(h,w=b.tmp[0],_),y.writeUInt32BE(h,I,_+4)},g.prototype._pad=function(E,v){for(var h=E.length-v,_=v;_<E.length;_++)E[_]=h;return!0},g.prototype._unpad=function(E){for(var v=E[E.length-1],h=E.length-v;h<E.length;h++)p.equal(E[h],v);return E.slice(0,E.length-v)},g.prototype._encrypt=function(E,v,h,_,b){for(var w=v,I=h,D=0;D<E.keys.length;D+=2){var k=E.keys[D],O=E.keys[D+1];y.expand(I,E.tmp,0);var V=y.substitute(k^=E.tmp[0],O^=E.tmp[1]),U=I;I=(w^y.permute(V))>>>0,w=U}y.rip(I,w,_,b)},g.prototype._decrypt=function(E,v,h,_,b){for(var w=h,I=v,D=E.keys.length-2;D>=0;D-=2){var k=E.keys[D],O=E.keys[D+1];y.expand(w,E.tmp,0);var V=y.substitute(k^=E.tmp[0],O^=E.tmp[1]),U=w;w=(I^y.permute(V))>>>0,I=U}y.rip(w,I,_,b)}},1082:(Y,L,T)=>{"use strict";var p=T(6055),N=T(9879),y=T(2243),x=T(2917);function u(C,P){p.equal(P.length,24,"Invalid key length");var E=P.slice(0,8),v=P.slice(8,16),h=P.slice(16,24);this.ciphers="encrypt"===C?[x.create({type:"encrypt",key:E}),x.create({type:"decrypt",key:v}),x.create({type:"encrypt",key:h})]:[x.create({type:"decrypt",key:h}),x.create({type:"encrypt",key:v}),x.create({type:"decrypt",key:E})]}function g(C){y.call(this,C);var P=new u(this.type,this.options.key);this._edeState=P}N(g,y),Y.exports=g,g.create=function(P){return new g(P)},g.prototype._update=function(P,E,v,h){var _=this._edeState;_.ciphers[0]._update(P,E,v,h),_.ciphers[1]._update(v,h,v,h),_.ciphers[2]._update(v,h,v,h)},g.prototype._pad=x.prototype._pad,g.prototype._unpad=x.prototype._unpad},6157:(Y,L)=>{"use strict";L.readUInt32BE=function(x,u){return(x[0+u]<<24|x[1+u]<<16|x[2+u]<<8|x[3+u])>>>0},L.writeUInt32BE=function(x,u,g){x[0+g]=u>>>24,x[1+g]=u>>>16&255,x[2+g]=u>>>8&255,x[3+g]=255&u},L.ip=function(x,u,g,C){for(var P=0,E=0,v=6;v>=0;v-=2){for(var h=0;h<=24;h+=8)P<<=1,P|=u>>>h+v&1;for(h=0;h<=24;h+=8)P<<=1,P|=x>>>h+v&1}for(v=6;v>=0;v-=2){for(h=1;h<=25;h+=8)E<<=1,E|=u>>>h+v&1;for(h=1;h<=25;h+=8)E<<=1,E|=x>>>h+v&1}g[C+0]=P>>>0,g[C+1]=E>>>0},L.rip=function(x,u,g,C){for(var P=0,E=0,v=0;v<4;v++)for(var h=24;h>=0;h-=8)P<<=1,P|=u>>>h+v&1,P<<=1,P|=x>>>h+v&1;for(v=4;v<8;v++)for(h=24;h>=0;h-=8)E<<=1,E|=u>>>h+v&1,E<<=1,E|=x>>>h+v&1;g[C+0]=P>>>0,g[C+1]=E>>>0},L.pc1=function(x,u,g,C){for(var P=0,E=0,v=7;v>=5;v--){for(var h=0;h<=24;h+=8)P<<=1,P|=u>>h+v&1;for(h=0;h<=24;h+=8)P<<=1,P|=x>>h+v&1}for(h=0;h<=24;h+=8)P<<=1,P|=u>>h+v&1;for(v=1;v<=3;v++){for(h=0;h<=24;h+=8)E<<=1,E|=u>>h+v&1;for(h=0;h<=24;h+=8)E<<=1,E|=x>>h+v&1}for(h=0;h<=24;h+=8)E<<=1,E|=x>>h+v&1;g[C+0]=P>>>0,g[C+1]=E>>>0},L.r28shl=function(x,u){return x<<u&268435455|x>>>28-u};var T=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];L.pc2=function(x,u,g,C){for(var P=0,E=0,v=T.length>>>1,h=0;h<v;h++)P<<=1,P|=x>>>T[h]&1;for(h=v;h<T.length;h++)E<<=1,E|=u>>>T[h]&1;g[C+0]=P>>>0,g[C+1]=E>>>0},L.expand=function(x,u,g){var C=0,P=0;C=(1&x)<<5|x>>>27;for(var E=23;E>=15;E-=4)C<<=6,C|=x>>>E&63;for(E=11;E>=3;E-=4)P|=x>>>E&63,P<<=6;P|=(31&x)<<1|x>>>31,u[g+0]=C>>>0,u[g+1]=P>>>0};var p=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];L.substitute=function(x,u){for(var g=0,C=0;C<4;C++)g<<=4,g|=p[64*C+(x>>>18-6*C&63)];for(C=0;C<4;C++)g<<=4,g|=p[256+64*C+(u>>>18-6*C&63)];return g>>>0};var N=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];L.permute=function(x){for(var u=0,g=0;g<N.length;g++)u<<=1,u|=x>>>N[g]&1;return u>>>0},L.padSplit=function(x,u,g){for(var C=x.toString(2);C.length<u;)C="0"+C;for(var P=[],E=0;E<u;E+=g)P.push(C.slice(E,E+g));return P.join(" ")}},2322:(Y,L,T)=>{var p=T(4069),N=T(9799),y=T(6374),u={binary:!0,hex:!0,base64:!0};L.DiffieHellmanGroup=L.createDiffieHellmanGroup=L.getDiffieHellman=function(C){var P=new Buffer(N[C].prime,"hex"),E=new Buffer(N[C].gen,"hex");return new y(P,E)},L.createDiffieHellman=L.DiffieHellman=function g(C,P,E,v){return Buffer.isBuffer(P)||void 0===u[P]?g(C,"binary",P,E):(P=P||"binary",v=v||"binary",E=E||new Buffer([2]),Buffer.isBuffer(E)||(E=new Buffer(E,v)),"number"==typeof C?new y(p(C,E),E,!0):(Buffer.isBuffer(C)||(C=new Buffer(C,P)),new y(C,E,!0)))}},6374:(Y,L,T)=>{var p=T(4980),y=new(T(4398)),x=new p(24),u=new p(11),g=new p(10),C=new p(3),P=new p(7),E=T(4069),v=T(6589);function h(k,O){return O=O||"utf8",Buffer.isBuffer(k)||(k=new Buffer(k,O)),this._pub=new p(k),this}function _(k,O){return O=O||"utf8",Buffer.isBuffer(k)||(k=new Buffer(k,O)),this._priv=new p(k),this}Y.exports=I;var b={};function I(k,O,V){this.setGenerator(O),this.__prime=new p(k),this._prime=p.mont(this.__prime),this._primeLen=k.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,V?(this.setPublicKey=h,this.setPrivateKey=_):this._primeCode=8}function D(k,O){var V=new Buffer(k.toArray());return O?V.toString(O):V}Object.defineProperty(I.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(k,O){var V=O.toString("hex"),B=[V,k.toString(16)].join("_");if(B in b)return b[B];var j,U=0;if(k.isEven()||!E.simpleSieve||!E.fermatTest(k)||!y.test(k))return U+=1,b[B]=U+="02"===V||"05"===V?8:4,U;switch(y.test(k.shrn(1))||(U+=2),V){case"02":k.mod(x).cmp(u)&&(U+=8);break;case"05":(j=k.mod(g)).cmp(C)&&j.cmp(P)&&(U+=8);break;default:U+=4}return b[B]=U,U}(this.__prime,this.__gen)),this._primeCode}}),I.prototype.generateKeys=function(){return this._priv||(this._priv=new p(v(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},I.prototype.computeSecret=function(k){var O=(k=(k=new p(k)).toRed(this._prime)).redPow(this._priv).fromRed(),V=new Buffer(O.toArray()),B=this.getPrime();if(V.length<B.length){var U=new Buffer(B.length-V.length);U.fill(0),V=Buffer.concat([U,V])}return V},I.prototype.getPublicKey=function(O){return D(this._pub,O)},I.prototype.getPrivateKey=function(O){return D(this._priv,O)},I.prototype.getPrime=function(k){return D(this.__prime,k)},I.prototype.getGenerator=function(k){return D(this._gen,k)},I.prototype.setGenerator=function(k,O){return O=O||"utf8",Buffer.isBuffer(k)||(k=new Buffer(k,O)),this.__gen=k,this._gen=new p(k),this}},4069:(Y,L,T)=>{var p=T(6589);Y.exports=U,U.simpleSieve=V,U.fermatTest=B;var N=T(4980),y=new N(24),u=new(T(4398)),g=new N(1),C=new N(2),P=new N(5),h=(new N(16),new N(8),new N(10)),_=new N(3),w=(new N(7),new N(11)),I=new N(4),k=(new N(12),null);function V(j){for(var W=function(){if(null!==k)return k;var W=[];W[0]=2;for(var X=1,K=3;K<1048576;K+=2){for(var ge=Math.ceil(Math.sqrt(K)),R=0;R<X&&W[R]<=ge&&K%W[R]!=0;R++);X!==R&&W[R]<=ge||(W[X++]=K)}return k=W,W}(),X=0;X<W.length;X++)if(0===j.modn(W[X]))return 0===j.cmpn(W[X]);return!0}function B(j){var W=N.mont(j);return 0===C.toRed(W).redPow(j.subn(1)).fromRed().cmpn(1)}function U(j,W){if(j<16)return new N(2===W||5===W?[140,123]:[140,39]);W=new N(W);for(var X,K;;){for(X=new N(p(Math.ceil(j/8)));X.bitLength()>j;)X.ishrn(1);if(X.isEven()&&X.iadd(g),X.testn(1)||X.iadd(C),W.cmp(C)){if(!W.cmp(P))for(;X.mod(h).cmp(_);)X.iadd(I)}else for(;X.mod(y).cmp(w);)X.iadd(I);if(V(K=X.shrn(1))&&V(X)&&B(K)&&B(X)&&u.test(K)&&u.test(X))return X}}},4980:function(Y,L,T){!function(p,N){"use strict";function y(R,r){if(!R)throw new Error(r||"Assertion failed")}function x(R,r){R.super_=r;var s=function(){};s.prototype=r.prototype,R.prototype=new s,R.prototype.constructor=R}function u(R,r,s){if(u.isBN(R))return R;this.negative=0,this.words=null,this.length=0,this.red=null,null!==R&&(("le"===r||"be"===r)&&(s=r,r=10),this._init(R||0,r||10,s||"be"))}var g;"object"==typeof p?p.exports=u:N.BN=u,u.BN=u,u.wordSize=26;try{g="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:T(7748).Buffer}catch(R){}function C(R,r){var s=R.charCodeAt(r);return s>=65&&s<=70?s-55:s>=97&&s<=102?s-87:s-48&15}function P(R,r,s){var l=C(R,s);return s-1>=r&&(l|=C(R,s-1)<<4),l}function E(R,r,s,l){for(var a=0,f=Math.min(R.length,s),M=r;M<f;M++){var A=R.charCodeAt(M)-48;a*=l,a+=A>=49?A-49+10:A>=17?A-17+10:A}return a}u.isBN=function(r){return r instanceof u||null!==r&&"object"==typeof r&&r.constructor.wordSize===u.wordSize&&Array.isArray(r.words)},u.max=function(r,s){return r.cmp(s)>0?r:s},u.min=function(r,s){return r.cmp(s)<0?r:s},u.prototype._init=function(r,s,l){if("number"==typeof r)return this._initNumber(r,s,l);if("object"==typeof r)return this._initArray(r,s,l);"hex"===s&&(s=16),y(s===(0|s)&&s>=2&&s<=36);var a=0;"-"===(r=r.toString().replace(/\s+/g,""))[0]&&(a++,this.negative=1),a<r.length&&(16===s?this._parseHex(r,a,l):(this._parseBase(r,s,a),"le"===l&&this._initArray(this.toArray(),s,l)))},u.prototype._initNumber=function(r,s,l){r<0&&(this.negative=1,r=-r),r<67108864?(this.words=[67108863&r],this.length=1):r<4503599627370496?(this.words=[67108863&r,r/67108864&67108863],this.length=2):(y(r<9007199254740992),this.words=[67108863&r,r/67108864&67108863,1],this.length=3),"le"===l&&this._initArray(this.toArray(),s,l)},u.prototype._initArray=function(r,s,l){if(y("number"==typeof r.length),r.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(r.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var f,M,A=0;if("be"===l)for(a=r.length-1,f=0;a>=0;a-=3)this.words[f]|=(M=r[a]|r[a-1]<<8|r[a-2]<<16)<<A&67108863,this.words[f+1]=M>>>26-A&67108863,(A+=24)>=26&&(A-=26,f++);else if("le"===l)for(a=0,f=0;a<r.length;a+=3)this.words[f]|=(M=r[a]|r[a+1]<<8|r[a+2]<<16)<<A&67108863,this.words[f+1]=M>>>26-A&67108863,(A+=24)>=26&&(A-=26,f++);return this.strip()},u.prototype._parseHex=function(r,s,l){this.length=Math.ceil((r.length-s)/6),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var A,f=0,M=0;if("be"===l)for(a=r.length-1;a>=s;a-=2)A=P(r,s,a)<<f,this.words[M]|=67108863&A,f>=18?(f-=18,this.words[M+=1]|=A>>>26):f+=8;else for(a=(r.length-s)%2==0?s+1:s;a<r.length;a+=2)A=P(r,s,a)<<f,this.words[M]|=67108863&A,f>=18?(f-=18,this.words[M+=1]|=A>>>26):f+=8;this.strip()},u.prototype._parseBase=function(r,s,l){this.words=[0],this.length=1;for(var a=0,f=1;f<=67108863;f*=s)a++;a--,f=f/s|0;for(var M=r.length-l,A=M%a,d=Math.min(M,M-A)+l,i=0,m=l;m<d;m+=a)i=E(r,m,m+a,s),this.imuln(f),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i);if(0!==A){var q=1;for(i=E(r,m,r.length,s),m=0;m<A;m++)q*=s;this.imuln(q),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i)}this.strip()},u.prototype.copy=function(r){r.words=new Array(this.length);for(var s=0;s<this.length;s++)r.words[s]=this.words[s];r.length=this.length,r.negative=this.negative,r.red=this.red},u.prototype.clone=function(){var r=new u(null);return this.copy(r),r},u.prototype._expand=function(r){for(;this.length<r;)this.words[this.length++]=0;return this},u.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},u.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},u.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var v=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],_=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function w(R,r,s){s.negative=r.negative^R.negative;var l=R.length+r.length|0;s.length=l,l=l-1|0;var a=0|R.words[0],f=0|r.words[0],M=a*f,d=M/67108864|0;s.words[0]=67108863&M;for(var i=1;i<l;i++){for(var m=d>>>26,q=67108863&d,z=Math.min(i,r.length-1),J=Math.max(0,i-R.length+1);J<=z;J++)m+=(M=(a=0|R.words[i-J|0])*(f=0|r.words[J])+q)/67108864|0,q=67108863&M;s.words[i]=0|q,d=0|m}return 0!==d?s.words[i]=0|d:s.length--,s.strip()}u.prototype.toString=function(r,s){var l;if(s=0|s||1,16===(r=r||10)||"hex"===r){l="";for(var a=0,f=0,M=0;M<this.length;M++){var A=this.words[M],d=(16777215&(A<<a|f)).toString(16);l=0!=(f=A>>>24-a&16777215)||M!==this.length-1?v[6-d.length]+d+l:d+l,(a+=2)>=26&&(a-=26,M--)}for(0!==f&&(l=f.toString(16)+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}if(r===(0|r)&&r>=2&&r<=36){var i=h[r],m=_[r];l="";var q=this.clone();for(q.negative=0;!q.isZero();){var z=q.modn(m).toString(r);l=(q=q.idivn(m)).isZero()?z+l:v[i-z.length]+z+l}for(this.isZero()&&(l="0"+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}y(!1,"Base should be between 2 and 36")},u.prototype.toNumber=function(){var r=this.words[0];return 2===this.length?r+=67108864*this.words[1]:3===this.length&&1===this.words[2]?r+=4503599627370496+67108864*this.words[1]:this.length>2&&y(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-r:r},u.prototype.toJSON=function(){return this.toString(16)},u.prototype.toBuffer=function(r,s){return y(void 0!==g),this.toArrayLike(g,r,s)},u.prototype.toArray=function(r,s){return this.toArrayLike(Array,r,s)},u.prototype.toArrayLike=function(r,s,l){var a=this.byteLength(),f=l||Math.max(1,a);y(a<=f,"byte array longer than desired length"),y(f>0,"Requested array length <= 0"),this.strip();var d,i,M="le"===s,A=new r(f),m=this.clone();if(M){for(i=0;!m.isZero();i++)d=m.andln(255),m.iushrn(8),A[i]=d;for(;i<f;i++)A[i]=0}else{for(i=0;i<f-a;i++)A[i]=0;for(i=0;!m.isZero();i++)d=m.andln(255),m.iushrn(8),A[f-i-1]=d}return A},u.prototype._countBits=Math.clz32?function(r){return 32-Math.clz32(r)}:function(r){var s=r,l=0;return s>=4096&&(l+=13,s>>>=13),s>=64&&(l+=7,s>>>=7),s>=8&&(l+=4,s>>>=4),s>=2&&(l+=2,s>>>=2),l+s},u.prototype._zeroBits=function(r){if(0===r)return 26;var s=r,l=0;return 0==(8191&s)&&(l+=13,s>>>=13),0==(127&s)&&(l+=7,s>>>=7),0==(15&s)&&(l+=4,s>>>=4),0==(3&s)&&(l+=2,s>>>=2),0==(1&s)&&l++,l},u.prototype.bitLength=function(){var s=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+s},u.prototype.zeroBits=function(){if(this.isZero())return 0;for(var r=0,s=0;s<this.length;s++){var l=this._zeroBits(this.words[s]);if(r+=l,26!==l)break}return r},u.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},u.prototype.toTwos=function(r){return 0!==this.negative?this.abs().inotn(r).iaddn(1):this.clone()},u.prototype.fromTwos=function(r){return this.testn(r-1)?this.notn(r).iaddn(1).ineg():this.clone()},u.prototype.isNeg=function(){return 0!==this.negative},u.prototype.neg=function(){return this.clone().ineg()},u.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},u.prototype.iuor=function(r){for(;this.length<r.length;)this.words[this.length++]=0;for(var s=0;s<r.length;s++)this.words[s]=this.words[s]|r.words[s];return this.strip()},u.prototype.ior=function(r){return y(0==(this.negative|r.negative)),this.iuor(r)},u.prototype.or=function(r){return this.length>r.length?this.clone().ior(r):r.clone().ior(this)},u.prototype.uor=function(r){return this.length>r.length?this.clone().iuor(r):r.clone().iuor(this)},u.prototype.iuand=function(r){var s;s=this.length>r.length?r:this;for(var l=0;l<s.length;l++)this.words[l]=this.words[l]&r.words[l];return this.length=s.length,this.strip()},u.prototype.iand=function(r){return y(0==(this.negative|r.negative)),this.iuand(r)},u.prototype.and=function(r){return this.length>r.length?this.clone().iand(r):r.clone().iand(this)},u.prototype.uand=function(r){return this.length>r.length?this.clone().iuand(r):r.clone().iuand(this)},u.prototype.iuxor=function(r){var s,l;this.length>r.length?(s=this,l=r):(s=r,l=this);for(var a=0;a<l.length;a++)this.words[a]=s.words[a]^l.words[a];if(this!==s)for(;a<s.length;a++)this.words[a]=s.words[a];return this.length=s.length,this.strip()},u.prototype.ixor=function(r){return y(0==(this.negative|r.negative)),this.iuxor(r)},u.prototype.xor=function(r){return this.length>r.length?this.clone().ixor(r):r.clone().ixor(this)},u.prototype.uxor=function(r){return this.length>r.length?this.clone().iuxor(r):r.clone().iuxor(this)},u.prototype.inotn=function(r){y("number"==typeof r&&r>=0);var s=0|Math.ceil(r/26),l=r%26;this._expand(s),l>0&&s--;for(var a=0;a<s;a++)this.words[a]=67108863&~this.words[a];return l>0&&(this.words[a]=~this.words[a]&67108863>>26-l),this.strip()},u.prototype.notn=function(r){return this.clone().inotn(r)},u.prototype.setn=function(r,s){y("number"==typeof r&&r>=0);var l=r/26|0,a=r%26;return this._expand(l+1),this.words[l]=s?this.words[l]|1<<a:this.words[l]&~(1<<a),this.strip()},u.prototype.iadd=function(r){var s,l,a;if(0!==this.negative&&0===r.negative)return this.negative=0,s=this.isub(r),this.negative^=1,this._normSign();if(0===this.negative&&0!==r.negative)return r.negative=0,s=this.isub(r),r.negative=1,s._normSign();this.length>r.length?(l=this,a=r):(l=r,a=this);for(var f=0,M=0;M<a.length;M++)this.words[M]=67108863&(s=(0|l.words[M])+(0|a.words[M])+f),f=s>>>26;for(;0!==f&&M<l.length;M++)this.words[M]=67108863&(s=(0|l.words[M])+f),f=s>>>26;if(this.length=l.length,0!==f)this.words[this.length]=f,this.length++;else if(l!==this)for(;M<l.length;M++)this.words[M]=l.words[M];return this},u.prototype.add=function(r){var s;return 0!==r.negative&&0===this.negative?(r.negative=0,s=this.sub(r),r.negative^=1,s):0===r.negative&&0!==this.negative?(this.negative=0,s=r.sub(this),this.negative=1,s):this.length>r.length?this.clone().iadd(r):r.clone().iadd(this)},u.prototype.isub=function(r){if(0!==r.negative){r.negative=0;var s=this.iadd(r);return r.negative=1,s._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(r),this.negative=1,this._normSign();var a,f,l=this.cmp(r);if(0===l)return this.negative=0,this.length=1,this.words[0]=0,this;l>0?(a=this,f=r):(a=r,f=this);for(var M=0,A=0;A<f.length;A++)M=(s=(0|a.words[A])-(0|f.words[A])+M)>>26,this.words[A]=67108863&s;for(;0!==M&&A<a.length;A++)M=(s=(0|a.words[A])+M)>>26,this.words[A]=67108863&s;if(0===M&&A<a.length&&a!==this)for(;A<a.length;A++)this.words[A]=a.words[A];return this.length=Math.max(this.length,A),a!==this&&(this.negative=1),this.strip()},u.prototype.sub=function(r){return this.clone().isub(r)};var I=function(r,s,l){var d,i,m,a=r.words,f=s.words,M=l.words,A=0,q=0|a[0],z=8191&q,J=q>>>13,ce=0|a[1],se=8191&ce,he=ce>>>13,ve=0|a[2],ae=8191&ve,de=ve>>>13,Re=0|a[3],Ee=8191&Re,ue=Re>>>13,ye=0|a[4],Se=8191&ye,ie=ye>>>13,ee=0|a[5],Z=8191&ee,le=ee>>>13,Oe=0|a[6],we=8191&Oe,Te=Oe>>>13,yt=0|a[7],Ne=8191&yt,Me=yt>>>13,Ye=0|a[8],De=8191&Ye,Fe=Ye>>>13,ct=0|a[9],Ve=8191&ct,Ke=ct>>>13,Zt=0|f[0],nt=8191&Zt,ot=Zt>>>13,Mt=0|f[1],ut=8191&Mt,st=Mt>>>13,Nn=0|f[2],rt=8191&Nn,Ge=Nn>>>13,Cn=0|f[3],qe=8191&Cn,We=Cn>>>13,Dn=0|f[4],ft=8191&Dn,Ue=Dn>>>13,Ln=0|f[5],gt=8191&Ln,it=Ln>>>13,zn=0|f[6],lt=8191&zn,ze=zn>>>13,sn=0|f[7],dt=8191&sn,Xe=sn>>>13,Qt=0|f[8],Qe=8191&Qt,Ze=Qt>>>13,Pn=0|f[9],Je=8191&Pn,at=Pn>>>13;l.negative=r.negative^s.negative,l.length=19;var un=(A+(d=Math.imul(z,nt))|0)+((8191&(i=(i=Math.imul(z,ot))+Math.imul(J,nt)|0))<<13)|0;A=((m=Math.imul(J,ot))+(i>>>13)|0)+(un>>>26)|0,un&=67108863,d=Math.imul(se,nt),i=(i=Math.imul(se,ot))+Math.imul(he,nt)|0,m=Math.imul(he,ot);var Vt=(A+(d=d+Math.imul(z,ut)|0)|0)+((8191&(i=(i=i+Math.imul(z,st)|0)+Math.imul(J,ut)|0))<<13)|0;A=((m=m+Math.imul(J,st)|0)+(i>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,d=Math.imul(ae,nt),i=(i=Math.imul(ae,ot))+Math.imul(de,nt)|0,m=Math.imul(de,ot),d=d+Math.imul(se,ut)|0,i=(i=i+Math.imul(se,st)|0)+Math.imul(he,ut)|0,m=m+Math.imul(he,st)|0;var Ht=(A+(d=d+Math.imul(z,rt)|0)|0)+((8191&(i=(i=i+Math.imul(z,Ge)|0)+Math.imul(J,rt)|0))<<13)|0;A=((m=m+Math.imul(J,Ge)|0)+(i>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,d=Math.imul(Ee,nt),i=(i=Math.imul(Ee,ot))+Math.imul(ue,nt)|0,m=Math.imul(ue,ot),d=d+Math.imul(ae,ut)|0,i=(i=i+Math.imul(ae,st)|0)+Math.imul(de,ut)|0,m=m+Math.imul(de,st)|0,d=d+Math.imul(se,rt)|0,i=(i=i+Math.imul(se,Ge)|0)+Math.imul(he,rt)|0,m=m+Math.imul(he,Ge)|0;var bn=(A+(d=d+Math.imul(z,qe)|0)|0)+((8191&(i=(i=i+Math.imul(z,We)|0)+Math.imul(J,qe)|0))<<13)|0;A=((m=m+Math.imul(J,We)|0)+(i>>>13)|0)+(bn>>>26)|0,bn&=67108863,d=Math.imul(Se,nt),i=(i=Math.imul(Se,ot))+Math.imul(ie,nt)|0,m=Math.imul(ie,ot),d=d+Math.imul(Ee,ut)|0,i=(i=i+Math.imul(Ee,st)|0)+Math.imul(ue,ut)|0,m=m+Math.imul(ue,st)|0,d=d+Math.imul(ae,rt)|0,i=(i=i+Math.imul(ae,Ge)|0)+Math.imul(de,rt)|0,m=m+Math.imul(de,Ge)|0,d=d+Math.imul(se,qe)|0,i=(i=i+Math.imul(se,We)|0)+Math.imul(he,qe)|0,m=m+Math.imul(he,We)|0;var dn=(A+(d=d+Math.imul(z,ft)|0)|0)+((8191&(i=(i=i+Math.imul(z,Ue)|0)+Math.imul(J,ft)|0))<<13)|0;A=((m=m+Math.imul(J,Ue)|0)+(i>>>13)|0)+(dn>>>26)|0,dn&=67108863,d=Math.imul(Z,nt),i=(i=Math.imul(Z,ot))+Math.imul(le,nt)|0,m=Math.imul(le,ot),d=d+Math.imul(Se,ut)|0,i=(i=i+Math.imul(Se,st)|0)+Math.imul(ie,ut)|0,m=m+Math.imul(ie,st)|0,d=d+Math.imul(Ee,rt)|0,i=(i=i+Math.imul(Ee,Ge)|0)+Math.imul(ue,rt)|0,m=m+Math.imul(ue,Ge)|0,d=d+Math.imul(ae,qe)|0,i=(i=i+Math.imul(ae,We)|0)+Math.imul(de,qe)|0,m=m+Math.imul(de,We)|0,d=d+Math.imul(se,ft)|0,i=(i=i+Math.imul(se,Ue)|0)+Math.imul(he,ft)|0,m=m+Math.imul(he,Ue)|0;var pn=(A+(d=d+Math.imul(z,gt)|0)|0)+((8191&(i=(i=i+Math.imul(z,it)|0)+Math.imul(J,gt)|0))<<13)|0;A=((m=m+Math.imul(J,it)|0)+(i>>>13)|0)+(pn>>>26)|0,pn&=67108863,d=Math.imul(we,nt),i=(i=Math.imul(we,ot))+Math.imul(Te,nt)|0,m=Math.imul(Te,ot),d=d+Math.imul(Z,ut)|0,i=(i=i+Math.imul(Z,st)|0)+Math.imul(le,ut)|0,m=m+Math.imul(le,st)|0,d=d+Math.imul(Se,rt)|0,i=(i=i+Math.imul(Se,Ge)|0)+Math.imul(ie,rt)|0,m=m+Math.imul(ie,Ge)|0,d=d+Math.imul(Ee,qe)|0,i=(i=i+Math.imul(Ee,We)|0)+Math.imul(ue,qe)|0,m=m+Math.imul(ue,We)|0,d=d+Math.imul(ae,ft)|0,i=(i=i+Math.imul(ae,Ue)|0)+Math.imul(de,ft)|0,m=m+Math.imul(de,Ue)|0,d=d+Math.imul(se,gt)|0,i=(i=i+Math.imul(se,it)|0)+Math.imul(he,gt)|0,m=m+Math.imul(he,it)|0;var In=(A+(d=d+Math.imul(z,lt)|0)|0)+((8191&(i=(i=i+Math.imul(z,ze)|0)+Math.imul(J,lt)|0))<<13)|0;A=((m=m+Math.imul(J,ze)|0)+(i>>>13)|0)+(In>>>26)|0,In&=67108863,d=Math.imul(Ne,nt),i=(i=Math.imul(Ne,ot))+Math.imul(Me,nt)|0,m=Math.imul(Me,ot),d=d+Math.imul(we,ut)|0,i=(i=i+Math.imul(we,st)|0)+Math.imul(Te,ut)|0,m=m+Math.imul(Te,st)|0,d=d+Math.imul(Z,rt)|0,i=(i=i+Math.imul(Z,Ge)|0)+Math.imul(le,rt)|0,m=m+Math.imul(le,Ge)|0,d=d+Math.imul(Se,qe)|0,i=(i=i+Math.imul(Se,We)|0)+Math.imul(ie,qe)|0,m=m+Math.imul(ie,We)|0,d=d+Math.imul(Ee,ft)|0,i=(i=i+Math.imul(Ee,Ue)|0)+Math.imul(ue,ft)|0,m=m+Math.imul(ue,Ue)|0,d=d+Math.imul(ae,gt)|0,i=(i=i+Math.imul(ae,it)|0)+Math.imul(de,gt)|0,m=m+Math.imul(de,it)|0,d=d+Math.imul(se,lt)|0,i=(i=i+Math.imul(se,ze)|0)+Math.imul(he,lt)|0,m=m+Math.imul(he,ze)|0;var rn=(A+(d=d+Math.imul(z,dt)|0)|0)+((8191&(i=(i=i+Math.imul(z,Xe)|0)+Math.imul(J,dt)|0))<<13)|0;A=((m=m+Math.imul(J,Xe)|0)+(i>>>13)|0)+(rn>>>26)|0,rn&=67108863,d=Math.imul(De,nt),i=(i=Math.imul(De,ot))+Math.imul(Fe,nt)|0,m=Math.imul(Fe,ot),d=d+Math.imul(Ne,ut)|0,i=(i=i+Math.imul(Ne,st)|0)+Math.imul(Me,ut)|0,m=m+Math.imul(Me,st)|0,d=d+Math.imul(we,rt)|0,i=(i=i+Math.imul(we,Ge)|0)+Math.imul(Te,rt)|0,m=m+Math.imul(Te,Ge)|0,d=d+Math.imul(Z,qe)|0,i=(i=i+Math.imul(Z,We)|0)+Math.imul(le,qe)|0,m=m+Math.imul(le,We)|0,d=d+Math.imul(Se,ft)|0,i=(i=i+Math.imul(Se,Ue)|0)+Math.imul(ie,ft)|0,m=m+Math.imul(ie,Ue)|0,d=d+Math.imul(Ee,gt)|0,i=(i=i+Math.imul(Ee,it)|0)+Math.imul(ue,gt)|0,m=m+Math.imul(ue,it)|0,d=d+Math.imul(ae,lt)|0,i=(i=i+Math.imul(ae,ze)|0)+Math.imul(de,lt)|0,m=m+Math.imul(de,ze)|0,d=d+Math.imul(se,dt)|0,i=(i=i+Math.imul(se,Xe)|0)+Math.imul(he,dt)|0,m=m+Math.imul(he,Xe)|0;var Mn=(A+(d=d+Math.imul(z,Qe)|0)|0)+((8191&(i=(i=i+Math.imul(z,Ze)|0)+Math.imul(J,Qe)|0))<<13)|0;A=((m=m+Math.imul(J,Ze)|0)+(i>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,d=Math.imul(Ve,nt),i=(i=Math.imul(Ve,ot))+Math.imul(Ke,nt)|0,m=Math.imul(Ke,ot),d=d+Math.imul(De,ut)|0,i=(i=i+Math.imul(De,st)|0)+Math.imul(Fe,ut)|0,m=m+Math.imul(Fe,st)|0,d=d+Math.imul(Ne,rt)|0,i=(i=i+Math.imul(Ne,Ge)|0)+Math.imul(Me,rt)|0,m=m+Math.imul(Me,Ge)|0,d=d+Math.imul(we,qe)|0,i=(i=i+Math.imul(we,We)|0)+Math.imul(Te,qe)|0,m=m+Math.imul(Te,We)|0,d=d+Math.imul(Z,ft)|0,i=(i=i+Math.imul(Z,Ue)|0)+Math.imul(le,ft)|0,m=m+Math.imul(le,Ue)|0,d=d+Math.imul(Se,gt)|0,i=(i=i+Math.imul(Se,it)|0)+Math.imul(ie,gt)|0,m=m+Math.imul(ie,it)|0,d=d+Math.imul(Ee,lt)|0,i=(i=i+Math.imul(Ee,ze)|0)+Math.imul(ue,lt)|0,m=m+Math.imul(ue,ze)|0,d=d+Math.imul(ae,dt)|0,i=(i=i+Math.imul(ae,Xe)|0)+Math.imul(de,dt)|0,m=m+Math.imul(de,Xe)|0,d=d+Math.imul(se,Qe)|0,i=(i=i+Math.imul(se,Ze)|0)+Math.imul(he,Qe)|0,m=m+Math.imul(he,Ze)|0;var $t=(A+(d=d+Math.imul(z,Je)|0)|0)+((8191&(i=(i=i+Math.imul(z,at)|0)+Math.imul(J,Je)|0))<<13)|0;A=((m=m+Math.imul(J,at)|0)+(i>>>13)|0)+($t>>>26)|0,$t&=67108863,d=Math.imul(Ve,ut),i=(i=Math.imul(Ve,st))+Math.imul(Ke,ut)|0,m=Math.imul(Ke,st),d=d+Math.imul(De,rt)|0,i=(i=i+Math.imul(De,Ge)|0)+Math.imul(Fe,rt)|0,m=m+Math.imul(Fe,Ge)|0,d=d+Math.imul(Ne,qe)|0,i=(i=i+Math.imul(Ne,We)|0)+Math.imul(Me,qe)|0,m=m+Math.imul(Me,We)|0,d=d+Math.imul(we,ft)|0,i=(i=i+Math.imul(we,Ue)|0)+Math.imul(Te,ft)|0,m=m+Math.imul(Te,Ue)|0,d=d+Math.imul(Z,gt)|0,i=(i=i+Math.imul(Z,it)|0)+Math.imul(le,gt)|0,m=m+Math.imul(le,it)|0,d=d+Math.imul(Se,lt)|0,i=(i=i+Math.imul(Se,ze)|0)+Math.imul(ie,lt)|0,m=m+Math.imul(ie,ze)|0,d=d+Math.imul(Ee,dt)|0,i=(i=i+Math.imul(Ee,Xe)|0)+Math.imul(ue,dt)|0,m=m+Math.imul(ue,Xe)|0,d=d+Math.imul(ae,Qe)|0,i=(i=i+Math.imul(ae,Ze)|0)+Math.imul(de,Qe)|0,m=m+Math.imul(de,Ze)|0;var Nt=(A+(d=d+Math.imul(se,Je)|0)|0)+((8191&(i=(i=i+Math.imul(se,at)|0)+Math.imul(he,Je)|0))<<13)|0;A=((m=m+Math.imul(he,at)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,d=Math.imul(Ve,rt),i=(i=Math.imul(Ve,Ge))+Math.imul(Ke,rt)|0,m=Math.imul(Ke,Ge),d=d+Math.imul(De,qe)|0,i=(i=i+Math.imul(De,We)|0)+Math.imul(Fe,qe)|0,m=m+Math.imul(Fe,We)|0,d=d+Math.imul(Ne,ft)|0,i=(i=i+Math.imul(Ne,Ue)|0)+Math.imul(Me,ft)|0,m=m+Math.imul(Me,Ue)|0,d=d+Math.imul(we,gt)|0,i=(i=i+Math.imul(we,it)|0)+Math.imul(Te,gt)|0,m=m+Math.imul(Te,it)|0,d=d+Math.imul(Z,lt)|0,i=(i=i+Math.imul(Z,ze)|0)+Math.imul(le,lt)|0,m=m+Math.imul(le,ze)|0,d=d+Math.imul(Se,dt)|0,i=(i=i+Math.imul(Se,Xe)|0)+Math.imul(ie,dt)|0,m=m+Math.imul(ie,Xe)|0,d=d+Math.imul(Ee,Qe)|0,i=(i=i+Math.imul(Ee,Ze)|0)+Math.imul(ue,Qe)|0,m=m+Math.imul(ue,Ze)|0;var xn=(A+(d=d+Math.imul(ae,Je)|0)|0)+((8191&(i=(i=i+Math.imul(ae,at)|0)+Math.imul(de,Je)|0))<<13)|0;A=((m=m+Math.imul(de,at)|0)+(i>>>13)|0)+(xn>>>26)|0,xn&=67108863,d=Math.imul(Ve,qe),i=(i=Math.imul(Ve,We))+Math.imul(Ke,qe)|0,m=Math.imul(Ke,We),d=d+Math.imul(De,ft)|0,i=(i=i+Math.imul(De,Ue)|0)+Math.imul(Fe,ft)|0,m=m+Math.imul(Fe,Ue)|0,d=d+Math.imul(Ne,gt)|0,i=(i=i+Math.imul(Ne,it)|0)+Math.imul(Me,gt)|0,m=m+Math.imul(Me,it)|0,d=d+Math.imul(we,lt)|0,i=(i=i+Math.imul(we,ze)|0)+Math.imul(Te,lt)|0,m=m+Math.imul(Te,ze)|0,d=d+Math.imul(Z,dt)|0,i=(i=i+Math.imul(Z,Xe)|0)+Math.imul(le,dt)|0,m=m+Math.imul(le,Xe)|0,d=d+Math.imul(Se,Qe)|0,i=(i=i+Math.imul(Se,Ze)|0)+Math.imul(ie,Qe)|0,m=m+Math.imul(ie,Ze)|0;var wn=(A+(d=d+Math.imul(Ee,Je)|0)|0)+((8191&(i=(i=i+Math.imul(Ee,at)|0)+Math.imul(ue,Je)|0))<<13)|0;A=((m=m+Math.imul(ue,at)|0)+(i>>>13)|0)+(wn>>>26)|0,wn&=67108863,d=Math.imul(Ve,ft),i=(i=Math.imul(Ve,Ue))+Math.imul(Ke,ft)|0,m=Math.imul(Ke,Ue),d=d+Math.imul(De,gt)|0,i=(i=i+Math.imul(De,it)|0)+Math.imul(Fe,gt)|0,m=m+Math.imul(Fe,it)|0,d=d+Math.imul(Ne,lt)|0,i=(i=i+Math.imul(Ne,ze)|0)+Math.imul(Me,lt)|0,m=m+Math.imul(Me,ze)|0,d=d+Math.imul(we,dt)|0,i=(i=i+Math.imul(we,Xe)|0)+Math.imul(Te,dt)|0,m=m+Math.imul(Te,Xe)|0,d=d+Math.imul(Z,Qe)|0,i=(i=i+Math.imul(Z,Ze)|0)+Math.imul(le,Qe)|0,m=m+Math.imul(le,Ze)|0;var _n=(A+(d=d+Math.imul(Se,Je)|0)|0)+((8191&(i=(i=i+Math.imul(Se,at)|0)+Math.imul(ie,Je)|0))<<13)|0;A=((m=m+Math.imul(ie,at)|0)+(i>>>13)|0)+(_n>>>26)|0,_n&=67108863,d=Math.imul(Ve,gt),i=(i=Math.imul(Ve,it))+Math.imul(Ke,gt)|0,m=Math.imul(Ke,it),d=d+Math.imul(De,lt)|0,i=(i=i+Math.imul(De,ze)|0)+Math.imul(Fe,lt)|0,m=m+Math.imul(Fe,ze)|0,d=d+Math.imul(Ne,dt)|0,i=(i=i+Math.imul(Ne,Xe)|0)+Math.imul(Me,dt)|0,m=m+Math.imul(Me,Xe)|0,d=d+Math.imul(we,Qe)|0,i=(i=i+Math.imul(we,Ze)|0)+Math.imul(Te,Qe)|0,m=m+Math.imul(Te,Ze)|0;var xt=(A+(d=d+Math.imul(Z,Je)|0)|0)+((8191&(i=(i=i+Math.imul(Z,at)|0)+Math.imul(le,Je)|0))<<13)|0;A=((m=m+Math.imul(le,at)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,d=Math.imul(Ve,lt),i=(i=Math.imul(Ve,ze))+Math.imul(Ke,lt)|0,m=Math.imul(Ke,ze),d=d+Math.imul(De,dt)|0,i=(i=i+Math.imul(De,Xe)|0)+Math.imul(Fe,dt)|0,m=m+Math.imul(Fe,Xe)|0,d=d+Math.imul(Ne,Qe)|0,i=(i=i+Math.imul(Ne,Ze)|0)+Math.imul(Me,Qe)|0,m=m+Math.imul(Me,Ze)|0;var Rn=(A+(d=d+Math.imul(we,Je)|0)|0)+((8191&(i=(i=i+Math.imul(we,at)|0)+Math.imul(Te,Je)|0))<<13)|0;A=((m=m+Math.imul(Te,at)|0)+(i>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,d=Math.imul(Ve,dt),i=(i=Math.imul(Ve,Xe))+Math.imul(Ke,dt)|0,m=Math.imul(Ke,Xe),d=d+Math.imul(De,Qe)|0,i=(i=i+Math.imul(De,Ze)|0)+Math.imul(Fe,Qe)|0,m=m+Math.imul(Fe,Ze)|0;var Jt=(A+(d=d+Math.imul(Ne,Je)|0)|0)+((8191&(i=(i=i+Math.imul(Ne,at)|0)+Math.imul(Me,Je)|0))<<13)|0;A=((m=m+Math.imul(Me,at)|0)+(i>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,d=Math.imul(Ve,Qe),i=(i=Math.imul(Ve,Ze))+Math.imul(Ke,Qe)|0,m=Math.imul(Ke,Ze);var tn=(A+(d=d+Math.imul(De,Je)|0)|0)+((8191&(i=(i=i+Math.imul(De,at)|0)+Math.imul(Fe,Je)|0))<<13)|0;A=((m=m+Math.imul(Fe,at)|0)+(i>>>13)|0)+(tn>>>26)|0,tn&=67108863;var Sn=(A+(d=Math.imul(Ve,Je))|0)+((8191&(i=(i=Math.imul(Ve,at))+Math.imul(Ke,Je)|0))<<13)|0;return A=((m=Math.imul(Ke,at))+(i>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,M[0]=un,M[1]=Vt,M[2]=Ht,M[3]=bn,M[4]=dn,M[5]=pn,M[6]=In,M[7]=rn,M[8]=Mn,M[9]=$t,M[10]=Nt,M[11]=xn,M[12]=wn,M[13]=_n,M[14]=xt,M[15]=Rn,M[16]=Jt,M[17]=tn,M[18]=Sn,0!==A&&(M[19]=A,l.length++),l};function k(R,r,s){return(new O).mulp(R,r,s)}function O(R,r){this.x=R,this.y=r}Math.imul||(I=w),u.prototype.mulTo=function(r,s){var a=this.length+r.length;return 10===this.length&&10===r.length?I(this,r,s):a<63?w(this,r,s):a<1024?function(R,r,s){s.negative=r.negative^R.negative,s.length=R.length+r.length;for(var l=0,a=0,f=0;f<s.length-1;f++){var M=a;a=0;for(var A=67108863&l,d=Math.min(f,r.length-1),i=Math.max(0,f-R.length+1);i<=d;i++){var J=(0|R.words[f-i])*(0|r.words[i]),ce=67108863&J;A=67108863&(ce=ce+A|0),a+=(M=(M=M+(J/67108864|0)|0)+(ce>>>26)|0)>>>26,M&=67108863}s.words[f]=A,l=M,M=a}return 0!==l?s.words[f]=l:s.length--,s.strip()}(this,r,s):k(this,r,s)},O.prototype.makeRBT=function(r){for(var s=new Array(r),l=u.prototype._countBits(r)-1,a=0;a<r;a++)s[a]=this.revBin(a,l,r);return s},O.prototype.revBin=function(r,s,l){if(0===r||r===l-1)return r;for(var a=0,f=0;f<s;f++)a|=(1&r)<<s-f-1,r>>=1;return a},O.prototype.permute=function(r,s,l,a,f,M){for(var A=0;A<M;A++)a[A]=s[r[A]],f[A]=l[r[A]]},O.prototype.transform=function(r,s,l,a,f,M){this.permute(M,r,s,l,a,f);for(var A=1;A<f;A<<=1)for(var d=A<<1,i=Math.cos(2*Math.PI/d),m=Math.sin(2*Math.PI/d),q=0;q<f;q+=d)for(var z=i,J=m,ce=0;ce<A;ce++){var se=l[q+ce],he=a[q+ce],ve=l[q+ce+A],ae=a[q+ce+A],de=z*ve-J*ae;ae=z*ae+J*ve,l[q+ce]=se+(ve=de),a[q+ce]=he+ae,l[q+ce+A]=se-ve,a[q+ce+A]=he-ae,ce!==d&&(de=i*z-m*J,J=i*J+m*z,z=de)}},O.prototype.guessLen13b=function(r,s){var l=1|Math.max(s,r),a=1&l,f=0;for(l=l/2|0;l;l>>>=1)f++;return 1<<f+1+a},O.prototype.conjugate=function(r,s,l){if(!(l<=1))for(var a=0;a<l/2;a++){var f=r[a];r[a]=r[l-a-1],r[l-a-1]=f,f=s[a],s[a]=-s[l-a-1],s[l-a-1]=-f}},O.prototype.normalize13b=function(r,s){for(var l=0,a=0;a<s/2;a++){var f=8192*Math.round(r[2*a+1]/s)+Math.round(r[2*a]/s)+l;r[a]=67108863&f,l=f<67108864?0:f/67108864|0}return r},O.prototype.convert13b=function(r,s,l,a){for(var f=0,M=0;M<s;M++)l[2*M]=8191&(f+=0|r[M]),l[2*M+1]=8191&(f>>>=13),f>>>=13;for(M=2*s;M<a;++M)l[M]=0;y(0===f),y(0==(-8192&f))},O.prototype.stub=function(r){for(var s=new Array(r),l=0;l<r;l++)s[l]=0;return s},O.prototype.mulp=function(r,s,l){var a=2*this.guessLen13b(r.length,s.length),f=this.makeRBT(a),M=this.stub(a),A=new Array(a),d=new Array(a),i=new Array(a),m=new Array(a),q=new Array(a),z=new Array(a),J=l.words;J.length=a,this.convert13b(r.words,r.length,A,a),this.convert13b(s.words,s.length,m,a),this.transform(A,M,d,i,a,f),this.transform(m,M,q,z,a,f);for(var ce=0;ce<a;ce++){var se=d[ce]*q[ce]-i[ce]*z[ce];i[ce]=d[ce]*z[ce]+i[ce]*q[ce],d[ce]=se}return this.conjugate(d,i,a),this.transform(d,i,J,M,a,f),this.conjugate(J,M,a),this.normalize13b(J,a),l.negative=r.negative^s.negative,l.length=r.length+s.length,l.strip()},u.prototype.mul=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),this.mulTo(r,s)},u.prototype.mulf=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),k(this,r,s)},u.prototype.imul=function(r){return this.clone().mulTo(r,this)},u.prototype.imuln=function(r){y("number"==typeof r),y(r<67108864);for(var s=0,l=0;l<this.length;l++){var a=(0|this.words[l])*r,f=(67108863&a)+(67108863&s);s>>=26,s+=a/67108864|0,s+=f>>>26,this.words[l]=67108863&f}return 0!==s&&(this.words[l]=s,this.length++),this},u.prototype.muln=function(r){return this.clone().imuln(r)},u.prototype.sqr=function(){return this.mul(this)},u.prototype.isqr=function(){return this.imul(this.clone())},u.prototype.pow=function(r){var s=function(R){for(var r=new Array(R.bitLength()),s=0;s<r.length;s++){var a=s%26;r[s]=(R.words[s/26|0]&1<<a)>>>a}return r}(r);if(0===s.length)return new u(1);for(var l=this,a=0;a<s.length&&0===s[a];a++,l=l.sqr());if(++a<s.length)for(var f=l.sqr();a<s.length;a++,f=f.sqr())0!==s[a]&&(l=l.mul(f));return l},u.prototype.iushln=function(r){y("number"==typeof r&&r>=0);var f,s=r%26,l=(r-s)/26,a=67108863>>>26-s<<26-s;if(0!==s){var M=0;for(f=0;f<this.length;f++){var A=this.words[f]&a;this.words[f]=(0|this.words[f])-A<<s|M,M=A>>>26-s}M&&(this.words[f]=M,this.length++)}if(0!==l){for(f=this.length-1;f>=0;f--)this.words[f+l]=this.words[f];for(f=0;f<l;f++)this.words[f]=0;this.length+=l}return this.strip()},u.prototype.ishln=function(r){return y(0===this.negative),this.iushln(r)},u.prototype.iushrn=function(r,s,l){var a;y("number"==typeof r&&r>=0),a=s?(s-s%26)/26:0;var f=r%26,M=Math.min((r-f)/26,this.length),A=67108863^67108863>>>f<<f,d=l;if(a-=M,a=Math.max(0,a),d){for(var i=0;i<M;i++)d.words[i]=this.words[i];d.length=M}if(0!==M)if(this.length>M)for(this.length-=M,i=0;i<this.length;i++)this.words[i]=this.words[i+M];else this.words[0]=0,this.length=1;var m=0;for(i=this.length-1;i>=0&&(0!==m||i>=a);i--){var q=0|this.words[i];this.words[i]=m<<26-f|q>>>f,m=q&A}return d&&0!==m&&(d.words[d.length++]=m),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},u.prototype.ishrn=function(r,s,l){return y(0===this.negative),this.iushrn(r,s,l)},u.prototype.shln=function(r){return this.clone().ishln(r)},u.prototype.ushln=function(r){return this.clone().iushln(r)},u.prototype.shrn=function(r){return this.clone().ishrn(r)},u.prototype.ushrn=function(r){return this.clone().iushrn(r)},u.prototype.testn=function(r){y("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return!(this.length<=l||!(this.words[l]&1<<s))},u.prototype.imaskn=function(r){y("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return y(0===this.negative,"imaskn works only with positive numbers"),this.length<=l?this:(0!==s&&l++,this.length=Math.min(l,this.length),0!==s&&(this.words[this.length-1]&=67108863^67108863>>>s<<s),this.strip())},u.prototype.maskn=function(r){return this.clone().imaskn(r)},u.prototype.iaddn=function(r){return y("number"==typeof r),y(r<67108864),r<0?this.isubn(-r):0!==this.negative?1===this.length&&(0|this.words[0])<r?(this.words[0]=r-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(r),this.negative=1,this):this._iaddn(r)},u.prototype._iaddn=function(r){this.words[0]+=r;for(var s=0;s<this.length&&this.words[s]>=67108864;s++)this.words[s]-=67108864,s===this.length-1?this.words[s+1]=1:this.words[s+1]++;return this.length=Math.max(this.length,s+1),this},u.prototype.isubn=function(r){if(y("number"==typeof r),y(r<67108864),r<0)return this.iaddn(-r);if(0!==this.negative)return this.negative=0,this.iaddn(r),this.negative=1,this;if(this.words[0]-=r,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var s=0;s<this.length&&this.words[s]<0;s++)this.words[s]+=67108864,this.words[s+1]-=1;return this.strip()},u.prototype.addn=function(r){return this.clone().iaddn(r)},u.prototype.subn=function(r){return this.clone().isubn(r)},u.prototype.iabs=function(){return this.negative=0,this},u.prototype.abs=function(){return this.clone().iabs()},u.prototype._ishlnsubmul=function(r,s,l){var f;this._expand(r.length+l);var M,A=0;for(f=0;f<r.length;f++){M=(0|this.words[f+l])+A;var d=(0|r.words[f])*s;A=((M-=67108863&d)>>26)-(d/67108864|0),this.words[f+l]=67108863&M}for(;f<this.length-l;f++)A=(M=(0|this.words[f+l])+A)>>26,this.words[f+l]=67108863&M;if(0===A)return this.strip();for(y(-1===A),A=0,f=0;f<this.length;f++)A=(M=-(0|this.words[f])+A)>>26,this.words[f]=67108863&M;return this.negative=1,this.strip()},u.prototype._wordDiv=function(r,s){var l,a=this.clone(),f=r,M=0|f.words[f.length-1];0!=(l=26-this._countBits(M))&&(f=f.ushln(l),a.iushln(l),M=0|f.words[f.length-1]);var i,d=a.length-f.length;if("mod"!==s){(i=new u(null)).length=d+1,i.words=new Array(i.length);for(var m=0;m<i.length;m++)i.words[m]=0}var q=a.clone()._ishlnsubmul(f,1,d);0===q.negative&&(a=q,i&&(i.words[d]=1));for(var z=d-1;z>=0;z--){var J=67108864*(0|a.words[f.length+z])+(0|a.words[f.length+z-1]);for(J=Math.min(J/M|0,67108863),a._ishlnsubmul(f,J,z);0!==a.negative;)J--,a.negative=0,a._ishlnsubmul(f,1,z),a.isZero()||(a.negative^=1);i&&(i.words[z]=J)}return i&&i.strip(),a.strip(),"div"!==s&&0!==l&&a.iushrn(l),{div:i||null,mod:a}},u.prototype.divmod=function(r,s,l){return y(!r.isZero()),this.isZero()?{div:new u(0),mod:new u(0)}:0!==this.negative&&0===r.negative?(M=this.neg().divmod(r,s),"mod"!==s&&(a=M.div.neg()),"div"!==s&&(f=M.mod.neg(),l&&0!==f.negative&&f.iadd(r)),{div:a,mod:f}):0===this.negative&&0!==r.negative?(M=this.divmod(r.neg(),s),"mod"!==s&&(a=M.div.neg()),{div:a,mod:M.mod}):0!=(this.negative&r.negative)?(M=this.neg().divmod(r.neg(),s),"div"!==s&&(f=M.mod.neg(),l&&0!==f.negative&&f.isub(r)),{div:M.div,mod:f}):r.length>this.length||this.cmp(r)<0?{div:new u(0),mod:this}:1===r.length?"div"===s?{div:this.divn(r.words[0]),mod:null}:"mod"===s?{div:null,mod:new u(this.modn(r.words[0]))}:{div:this.divn(r.words[0]),mod:new u(this.modn(r.words[0]))}:this._wordDiv(r,s);var a,f,M},u.prototype.div=function(r){return this.divmod(r,"div",!1).div},u.prototype.mod=function(r){return this.divmod(r,"mod",!1).mod},u.prototype.umod=function(r){return this.divmod(r,"mod",!0).mod},u.prototype.divRound=function(r){var s=this.divmod(r);if(s.mod.isZero())return s.div;var l=0!==s.div.negative?s.mod.isub(r):s.mod,a=r.ushrn(1),f=r.andln(1),M=l.cmp(a);return M<0||1===f&&0===M?s.div:0!==s.div.negative?s.div.isubn(1):s.div.iaddn(1)},u.prototype.modn=function(r){y(r<=67108863);for(var s=(1<<26)%r,l=0,a=this.length-1;a>=0;a--)l=(s*l+(0|this.words[a]))%r;return l},u.prototype.idivn=function(r){y(r<=67108863);for(var s=0,l=this.length-1;l>=0;l--){var a=(0|this.words[l])+67108864*s;this.words[l]=a/r|0,s=a%r}return this.strip()},u.prototype.divn=function(r){return this.clone().idivn(r)},u.prototype.egcd=function(r){y(0===r.negative),y(!r.isZero());var s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),M=new u(0),A=new u(1),d=0;s.isEven()&&l.isEven();)s.iushrn(1),l.iushrn(1),++d;for(var i=l.clone(),m=s.clone();!s.isZero();){for(var q=0,z=1;0==(s.words[0]&z)&&q<26;++q,z<<=1);if(q>0)for(s.iushrn(q);q-- >0;)(a.isOdd()||f.isOdd())&&(a.iadd(i),f.isub(m)),a.iushrn(1),f.iushrn(1);for(var J=0,ce=1;0==(l.words[0]&ce)&&J<26;++J,ce<<=1);if(J>0)for(l.iushrn(J);J-- >0;)(M.isOdd()||A.isOdd())&&(M.iadd(i),A.isub(m)),M.iushrn(1),A.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(M),f.isub(A)):(l.isub(s),M.isub(a),A.isub(f))}return{a:M,b:A,gcd:l.iushln(d)}},u.prototype._invmp=function(r){y(0===r.negative),y(!r.isZero());var q,s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),M=l.clone();s.cmpn(1)>0&&l.cmpn(1)>0;){for(var A=0,d=1;0==(s.words[0]&d)&&A<26;++A,d<<=1);if(A>0)for(s.iushrn(A);A-- >0;)a.isOdd()&&a.iadd(M),a.iushrn(1);for(var i=0,m=1;0==(l.words[0]&m)&&i<26;++i,m<<=1);if(i>0)for(l.iushrn(i);i-- >0;)f.isOdd()&&f.iadd(M),f.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(f)):(l.isub(s),f.isub(a))}return(q=0===s.cmpn(1)?a:f).cmpn(0)<0&&q.iadd(r),q},u.prototype.gcd=function(r){if(this.isZero())return r.abs();if(r.isZero())return this.abs();var s=this.clone(),l=r.clone();s.negative=0,l.negative=0;for(var a=0;s.isEven()&&l.isEven();a++)s.iushrn(1),l.iushrn(1);for(;;){for(;s.isEven();)s.iushrn(1);for(;l.isEven();)l.iushrn(1);var f=s.cmp(l);if(f<0){var M=s;s=l,l=M}else if(0===f||0===l.cmpn(1))break;s.isub(l)}return l.iushln(a)},u.prototype.invm=function(r){return this.egcd(r).a.umod(r)},u.prototype.isEven=function(){return 0==(1&this.words[0])},u.prototype.isOdd=function(){return 1==(1&this.words[0])},u.prototype.andln=function(r){return this.words[0]&r},u.prototype.bincn=function(r){y("number"==typeof r);var s=r%26,l=(r-s)/26,a=1<<s;if(this.length<=l)return this._expand(l+1),this.words[l]|=a,this;for(var f=a,M=l;0!==f&&M<this.length;M++){var A=0|this.words[M];f=(A+=f)>>>26,this.words[M]=A&=67108863}return 0!==f&&(this.words[M]=f,this.length++),this},u.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},u.prototype.cmpn=function(r){var l,s=r<0;if(0!==this.negative&&!s)return-1;if(0===this.negative&&s)return 1;if(this.strip(),this.length>1)l=1;else{s&&(r=-r),y(r<=67108863,"Number is too big");var a=0|this.words[0];l=a===r?0:a<r?-1:1}return 0!==this.negative?0|-l:l},u.prototype.cmp=function(r){if(0!==this.negative&&0===r.negative)return-1;if(0===this.negative&&0!==r.negative)return 1;var s=this.ucmp(r);return 0!==this.negative?0|-s:s},u.prototype.ucmp=function(r){if(this.length>r.length)return 1;if(this.length<r.length)return-1;for(var s=0,l=this.length-1;l>=0;l--){var a=0|this.words[l],f=0|r.words[l];if(a!==f){a<f?s=-1:a>f&&(s=1);break}}return s},u.prototype.gtn=function(r){return 1===this.cmpn(r)},u.prototype.gt=function(r){return 1===this.cmp(r)},u.prototype.gten=function(r){return this.cmpn(r)>=0},u.prototype.gte=function(r){return this.cmp(r)>=0},u.prototype.ltn=function(r){return-1===this.cmpn(r)},u.prototype.lt=function(r){return-1===this.cmp(r)},u.prototype.lten=function(r){return this.cmpn(r)<=0},u.prototype.lte=function(r){return this.cmp(r)<=0},u.prototype.eqn=function(r){return 0===this.cmpn(r)},u.prototype.eq=function(r){return 0===this.cmp(r)},u.red=function(r){return new K(r)},u.prototype.toRed=function(r){return y(!this.red,"Already a number in reduction context"),y(0===this.negative,"red works only with positives"),r.convertTo(this)._forceRed(r)},u.prototype.fromRed=function(){return y(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},u.prototype._forceRed=function(r){return this.red=r,this},u.prototype.forceRed=function(r){return y(!this.red,"Already a number in reduction context"),this._forceRed(r)},u.prototype.redAdd=function(r){return y(this.red,"redAdd works only with red numbers"),this.red.add(this,r)},u.prototype.redIAdd=function(r){return y(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,r)},u.prototype.redSub=function(r){return y(this.red,"redSub works only with red numbers"),this.red.sub(this,r)},u.prototype.redISub=function(r){return y(this.red,"redISub works only with red numbers"),this.red.isub(this,r)},u.prototype.redShl=function(r){return y(this.red,"redShl works only with red numbers"),this.red.shl(this,r)},u.prototype.redMul=function(r){return y(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.mul(this,r)},u.prototype.redIMul=function(r){return y(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.imul(this,r)},u.prototype.redSqr=function(){return y(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},u.prototype.redISqr=function(){return y(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},u.prototype.redSqrt=function(){return y(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},u.prototype.redInvm=function(){return y(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},u.prototype.redNeg=function(){return y(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},u.prototype.redPow=function(r){return y(this.red&&!r.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,r)};var V={k256:null,p224:null,p192:null,p25519:null};function B(R,r){this.name=R,this.p=new u(r,16),this.n=this.p.bitLength(),this.k=new u(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function U(){B.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function j(){B.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function W(){B.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function X(){B.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function K(R){if("string"==typeof R){var r=u._prime(R);this.m=r.p,this.prime=r}else y(R.gtn(1),"modulus must be greater than 1"),this.m=R,this.prime=null}function ge(R){K.call(this,R),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new u(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}B.prototype._tmp=function(){var r=new u(null);return r.words=new Array(Math.ceil(this.n/13)),r},B.prototype.ireduce=function(r){var l,s=r;do{this.split(s,this.tmp),l=(s=(s=this.imulK(s)).iadd(this.tmp)).bitLength()}while(l>this.n);var a=l<this.n?-1:s.ucmp(this.p);return 0===a?(s.words[0]=0,s.length=1):a>0?s.isub(this.p):void 0!==s.strip?s.strip():s._strip(),s},B.prototype.split=function(r,s){r.iushrn(this.n,0,s)},B.prototype.imulK=function(r){return r.imul(this.k)},x(U,B),U.prototype.split=function(r,s){for(var l=4194303,a=Math.min(r.length,9),f=0;f<a;f++)s.words[f]=r.words[f];if(s.length=a,r.length<=9)return r.words[0]=0,void(r.length=1);var M=r.words[9];for(s.words[s.length++]=M&l,f=10;f<r.length;f++){var A=0|r.words[f];r.words[f-10]=(A&l)<<4|M>>>22,M=A}r.words[f-10]=M>>>=22,r.length-=0===M&&r.length>10?10:9},U.prototype.imulK=function(r){r.words[r.length]=0,r.words[r.length+1]=0,r.length+=2;for(var s=0,l=0;l<r.length;l++){var a=0|r.words[l];r.words[l]=67108863&(s+=977*a),s=64*a+(s/67108864|0)}return 0===r.words[r.length-1]&&(r.length--,0===r.words[r.length-1]&&r.length--),r},x(j,B),x(W,B),x(X,B),X.prototype.imulK=function(r){for(var s=0,l=0;l<r.length;l++){var a=19*(0|r.words[l])+s,f=67108863&a;a>>>=26,r.words[l]=f,s=a}return 0!==s&&(r.words[r.length++]=s),r},u._prime=function(r){if(V[r])return V[r];var s;if("k256"===r)s=new U;else if("p224"===r)s=new j;else if("p192"===r)s=new W;else{if("p25519"!==r)throw new Error("Unknown prime "+r);s=new X}return V[r]=s,s},K.prototype._verify1=function(r){y(0===r.negative,"red works only with positives"),y(r.red,"red works only with red numbers")},K.prototype._verify2=function(r,s){y(0==(r.negative|s.negative),"red works only with positives"),y(r.red&&r.red===s.red,"red works only with red numbers")},K.prototype.imod=function(r){return this.prime?this.prime.ireduce(r)._forceRed(this):r.umod(this.m)._forceRed(this)},K.prototype.neg=function(r){return r.isZero()?r.clone():this.m.sub(r)._forceRed(this)},K.prototype.add=function(r,s){this._verify2(r,s);var l=r.add(s);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},K.prototype.iadd=function(r,s){this._verify2(r,s);var l=r.iadd(s);return l.cmp(this.m)>=0&&l.isub(this.m),l},K.prototype.sub=function(r,s){this._verify2(r,s);var l=r.sub(s);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},K.prototype.isub=function(r,s){this._verify2(r,s);var l=r.isub(s);return l.cmpn(0)<0&&l.iadd(this.m),l},K.prototype.shl=function(r,s){return this._verify1(r),this.imod(r.ushln(s))},K.prototype.imul=function(r,s){return this._verify2(r,s),this.imod(r.imul(s))},K.prototype.mul=function(r,s){return this._verify2(r,s),this.imod(r.mul(s))},K.prototype.isqr=function(r){return this.imul(r,r.clone())},K.prototype.sqr=function(r){return this.mul(r,r)},K.prototype.sqrt=function(r){if(r.isZero())return r.clone();var s=this.m.andln(3);if(y(s%2==1),3===s){var l=this.m.add(new u(1)).iushrn(2);return this.pow(r,l)}for(var a=this.m.subn(1),f=0;!a.isZero()&&0===a.andln(1);)f++,a.iushrn(1);y(!a.isZero());var M=new u(1).toRed(this),A=M.redNeg(),d=this.m.subn(1).iushrn(1),i=this.m.bitLength();for(i=new u(2*i*i).toRed(this);0!==this.pow(i,d).cmp(A);)i.redIAdd(A);for(var m=this.pow(i,a),q=this.pow(r,a.addn(1).iushrn(1)),z=this.pow(r,a),J=f;0!==z.cmp(M);){for(var ce=z,se=0;0!==ce.cmp(M);se++)ce=ce.redSqr();y(se<J);var he=this.pow(m,new u(1).iushln(J-se-1));q=q.redMul(he),m=he.redSqr(),z=z.redMul(m),J=se}return q},K.prototype.invm=function(r){var s=r._invmp(this.m);return 0!==s.negative?(s.negative=0,this.imod(s).redNeg()):this.imod(s)},K.prototype.pow=function(r,s){if(s.isZero())return new u(1).toRed(this);if(0===s.cmpn(1))return r.clone();var a=new Array(16);a[0]=new u(1).toRed(this),a[1]=r;for(var f=2;f<a.length;f++)a[f]=this.mul(a[f-1],r);var M=a[0],A=0,d=0,i=s.bitLength()%26;for(0===i&&(i=26),f=s.length-1;f>=0;f--){for(var m=s.words[f],q=i-1;q>=0;q--){var z=m>>q&1;M!==a[0]&&(M=this.sqr(M)),0!==z||0!==A?(A<<=1,A|=z,(4==++d||0===f&&0===q)&&(M=this.mul(M,a[A]),d=0,A=0)):d=0}i=26}return M},K.prototype.convertTo=function(r){var s=r.umod(this.m);return s===r?s.clone():s},K.prototype.convertFrom=function(r){var s=r.clone();return s.red=null,s},u.mont=function(r){return new ge(r)},x(ge,K),ge.prototype.convertTo=function(r){return this.imod(r.ushln(this.shift))},ge.prototype.convertFrom=function(r){var s=this.imod(r.mul(this.rinv));return s.red=null,s},ge.prototype.imul=function(r,s){if(r.isZero()||s.isZero())return r.words[0]=0,r.length=1,r;var l=r.imul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),M=f;return f.cmp(this.m)>=0?M=f.isub(this.m):f.cmpn(0)<0&&(M=f.iadd(this.m)),M._forceRed(this)},ge.prototype.mul=function(r,s){if(r.isZero()||s.isZero())return new u(0)._forceRed(this);var l=r.mul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),M=f;return f.cmp(this.m)>=0?M=f.isub(this.m):f.cmpn(0)<0&&(M=f.iadd(this.m)),M._forceRed(this)},ge.prototype.invm=function(r){return this.imod(r._invmp(this.m).mul(this.r2))._forceRed(this)}}(Y=T.nmd(Y),this)},5247:(Y,L,T)=>{"use strict";var p=L;p.version=T(8597).i8,p.utils=T(2946),p.rand=T(4761),p.curve=T(3868),p.curves=T(3346),p.ec=T(7237),p.eddsa=T(1615)},780:(Y,L,T)=>{"use strict";var p=T(4584),N=T(2946),y=N.getNAF,x=N.getJSF,u=N.assert;function g(P,E){this.type=P,this.p=new p(E.p,16),this.red=E.prime?p.red(E.prime):p.mont(this.p),this.zero=new p(0).toRed(this.red),this.one=new p(1).toRed(this.red),this.two=new p(2).toRed(this.red),this.n=E.n&&new p(E.n,16),this.g=E.g&&this.pointFromJSON(E.g,E.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var v=this.n&&this.p.div(this.n);!v||v.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function C(P,E){this.curve=P,this.type=E,this.precomputed=null}Y.exports=g,g.prototype.point=function(){throw new Error("Not implemented")},g.prototype.validate=function(){throw new Error("Not implemented")},g.prototype._fixedNafMul=function(E,v){u(E.precomputed);var h=E._getDoubles(),_=y(v,1,this._bitLength),b=(1<<h.step+1)-(h.step%2==0?2:1);b/=3;var I,D,w=[];for(I=0;I<_.length;I+=h.step){D=0;for(var k=I+h.step-1;k>=I;k--)D=(D<<1)+_[k];w.push(D)}for(var O=this.jpoint(null,null,null),V=this.jpoint(null,null,null),B=b;B>0;B--){for(I=0;I<w.length;I++)(D=w[I])===B?V=V.mixedAdd(h.points[I]):D===-B&&(V=V.mixedAdd(h.points[I].neg()));O=O.add(V)}return O.toP()},g.prototype._wnafMul=function(E,v){for(var h=4,_=E._getNAFPoints(h),b=_.points,w=y(v,h=_.wnd,this._bitLength),I=this.jpoint(null,null,null),D=w.length-1;D>=0;D--){for(var k=0;D>=0&&0===w[D];D--)k++;if(D>=0&&k++,I=I.dblp(k),D<0)break;var O=w[D];u(0!==O),I="affine"===E.type?I.mixedAdd(O>0?b[O-1>>1]:b[-O-1>>1].neg()):I.add(O>0?b[O-1>>1]:b[-O-1>>1].neg())}return"affine"===E.type?I.toP():I},g.prototype._wnafMulAdd=function(E,v,h,_,b){var O,V,B,w=this._wnafT1,I=this._wnafT2,D=this._wnafT3,k=0;for(O=0;O<_;O++){var U=(B=v[O])._getNAFPoints(E);w[O]=U.wnd,I[O]=U.points}for(O=_-1;O>=1;O-=2){var j=O-1,W=O;if(1===w[j]&&1===w[W]){var X=[v[j],null,null,v[W]];0===v[j].y.cmp(v[W].y)?(X[1]=v[j].add(v[W]),X[2]=v[j].toJ().mixedAdd(v[W].neg())):0===v[j].y.cmp(v[W].y.redNeg())?(X[1]=v[j].toJ().mixedAdd(v[W]),X[2]=v[j].add(v[W].neg())):(X[1]=v[j].toJ().mixedAdd(v[W]),X[2]=v[j].toJ().mixedAdd(v[W].neg()));var K=[-3,-1,-5,-7,0,7,5,1,3],ge=x(h[j],h[W]);for(k=Math.max(ge[0].length,k),D[j]=new Array(k),D[W]=new Array(k),V=0;V<k;V++)D[j][V]=K[3*(1+(0|ge[0][V]))+(1+(0|ge[1][V]))],D[W][V]=0,I[j]=X}else D[j]=y(h[j],w[j],this._bitLength),D[W]=y(h[W],w[W],this._bitLength),k=Math.max(D[j].length,k),k=Math.max(D[W].length,k)}var s=this.jpoint(null,null,null),l=this._wnafT4;for(O=k;O>=0;O--){for(var a=0;O>=0;){var f=!0;for(V=0;V<_;V++)l[V]=0|D[V][O],0!==l[V]&&(f=!1);if(!f)break;a++,O--}if(O>=0&&a++,s=s.dblp(a),O<0)break;for(V=0;V<_;V++){var M=l[V];0!==M&&(M>0?B=I[V][M-1>>1]:M<0&&(B=I[V][-M-1>>1].neg()),s="affine"===B.type?s.mixedAdd(B):s.add(B))}}for(O=0;O<_;O++)I[O]=null;return b?s:s.toP()},g.BasePoint=C,C.prototype.eq=function(){throw new Error("Not implemented")},C.prototype.validate=function(){return this.curve.validate(this)},g.prototype.decodePoint=function(E,v){E=N.toArray(E,v);var h=this.p.byteLength();if((4===E[0]||6===E[0]||7===E[0])&&E.length-1==2*h)return 6===E[0]?u(E[E.length-1]%2==0):7===E[0]&&u(E[E.length-1]%2==1),this.point(E.slice(1,1+h),E.slice(1+h,1+2*h));if((2===E[0]||3===E[0])&&E.length-1===h)return this.pointFromX(E.slice(1,1+h),3===E[0]);throw new Error("Unknown point format")},C.prototype.encodeCompressed=function(E){return this.encode(E,!0)},C.prototype._encode=function(E){var v=this.curve.p.byteLength(),h=this.getX().toArray("be",v);return E?[this.getY().isEven()?2:3].concat(h):[4].concat(h,this.getY().toArray("be",v))},C.prototype.encode=function(E,v){return N.encode(this._encode(v),E)},C.prototype.precompute=function(E){if(this.precomputed)return this;var v={doubles:null,naf:null,beta:null};return v.naf=this._getNAFPoints(8),v.doubles=this._getDoubles(4,E),v.beta=this._getBeta(),this.precomputed=v,this},C.prototype._hasDoubles=function(E){if(!this.precomputed)return!1;var v=this.precomputed.doubles;return!!v&&v.points.length>=Math.ceil((E.bitLength()+1)/v.step)},C.prototype._getDoubles=function(E,v){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var h=[this],_=this,b=0;b<v;b+=E){for(var w=0;w<E;w++)_=_.dbl();h.push(_)}return{step:E,points:h}},C.prototype._getNAFPoints=function(E){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var v=[this],h=(1<<E)-1,_=1===h?null:this.dbl(),b=1;b<h;b++)v[b]=v[b-1].add(_);return{wnd:E,points:v}},C.prototype._getBeta=function(){return null},C.prototype.dblp=function(E){for(var v=this,h=0;h<E;h++)v=v.dbl();return v}},6121:(Y,L,T)=>{"use strict";var p=T(2946),N=T(4584),y=T(9879),x=T(780),u=p.assert;function g(P){this.twisted=1!=(0|P.a),this.mOneA=this.twisted&&-1==(0|P.a),this.extended=this.mOneA,x.call(this,"edwards",P),this.a=new N(P.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new N(P.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new N(P.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),u(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|P.c)}function C(P,E,v,h,_){x.BasePoint.call(this,P,"projective"),null===E&&null===v&&null===h?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new N(E,16),this.y=new N(v,16),this.z=h?new N(h,16):this.curve.one,this.t=_&&new N(_,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}y(g,x),Y.exports=g,g.prototype._mulA=function(E){return this.mOneA?E.redNeg():this.a.redMul(E)},g.prototype._mulC=function(E){return this.oneC?E:this.c.redMul(E)},g.prototype.jpoint=function(E,v,h,_){return this.point(E,v,h,_)},g.prototype.pointFromX=function(E,v){(E=new N(E,16)).red||(E=E.toRed(this.red));var h=E.redSqr(),_=this.c2.redSub(this.a.redMul(h)),b=this.one.redSub(this.c2.redMul(this.d).redMul(h)),w=_.redMul(b.redInvm()),I=w.redSqrt();if(0!==I.redSqr().redSub(w).cmp(this.zero))throw new Error("invalid point");var D=I.fromRed().isOdd();return(v&&!D||!v&&D)&&(I=I.redNeg()),this.point(E,I)},g.prototype.pointFromY=function(E,v){(E=new N(E,16)).red||(E=E.toRed(this.red));var h=E.redSqr(),_=h.redSub(this.c2),b=h.redMul(this.d).redMul(this.c2).redSub(this.a),w=_.redMul(b.redInvm());if(0===w.cmp(this.zero)){if(v)throw new Error("invalid point");return this.point(this.zero,E)}var I=w.redSqrt();if(0!==I.redSqr().redSub(w).cmp(this.zero))throw new Error("invalid point");return I.fromRed().isOdd()!==v&&(I=I.redNeg()),this.point(I,E)},g.prototype.validate=function(E){if(E.isInfinity())return!0;E.normalize();var v=E.x.redSqr(),h=E.y.redSqr(),_=v.redMul(this.a).redAdd(h),b=this.c2.redMul(this.one.redAdd(this.d.redMul(v).redMul(h)));return 0===_.cmp(b)},y(C,x.BasePoint),g.prototype.pointFromJSON=function(E){return C.fromJSON(this,E)},g.prototype.point=function(E,v,h,_){return new C(this,E,v,h,_)},C.fromJSON=function(E,v){return new C(E,v[0],v[1],v[2])},C.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},C.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},C.prototype._extDbl=function(){var E=this.x.redSqr(),v=this.y.redSqr(),h=this.z.redSqr();h=h.redIAdd(h);var _=this.curve._mulA(E),b=this.x.redAdd(this.y).redSqr().redISub(E).redISub(v),w=_.redAdd(v),I=w.redSub(h),D=_.redSub(v),k=b.redMul(I),O=w.redMul(D),V=b.redMul(D),B=I.redMul(w);return this.curve.point(k,O,B,V)},C.prototype._projDbl=function(){var _,b,w,I,D,k,E=this.x.redAdd(this.y).redSqr(),v=this.x.redSqr(),h=this.y.redSqr();if(this.curve.twisted){var O=(I=this.curve._mulA(v)).redAdd(h);this.zOne?(_=E.redSub(v).redSub(h).redMul(O.redSub(this.curve.two)),b=O.redMul(I.redSub(h)),w=O.redSqr().redSub(O).redSub(O)):(D=this.z.redSqr(),k=O.redSub(D).redISub(D),_=E.redSub(v).redISub(h).redMul(k),b=O.redMul(I.redSub(h)),w=O.redMul(k))}else I=v.redAdd(h),D=this.curve._mulC(this.z).redSqr(),k=I.redSub(D).redSub(D),_=this.curve._mulC(E.redISub(I)).redMul(k),b=this.curve._mulC(I).redMul(v.redISub(h)),w=I.redMul(k);return this.curve.point(_,b,w)},C.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},C.prototype._extAdd=function(E){var v=this.y.redSub(this.x).redMul(E.y.redSub(E.x)),h=this.y.redAdd(this.x).redMul(E.y.redAdd(E.x)),_=this.t.redMul(this.curve.dd).redMul(E.t),b=this.z.redMul(E.z.redAdd(E.z)),w=h.redSub(v),I=b.redSub(_),D=b.redAdd(_),k=h.redAdd(v),O=w.redMul(I),V=D.redMul(k),B=w.redMul(k),U=I.redMul(D);return this.curve.point(O,V,U,B)},C.prototype._projAdd=function(E){var V,B,v=this.z.redMul(E.z),h=v.redSqr(),_=this.x.redMul(E.x),b=this.y.redMul(E.y),w=this.curve.d.redMul(_).redMul(b),I=h.redSub(w),D=h.redAdd(w),k=this.x.redAdd(this.y).redMul(E.x.redAdd(E.y)).redISub(_).redISub(b),O=v.redMul(I).redMul(k);return this.curve.twisted?(V=v.redMul(D).redMul(b.redSub(this.curve._mulA(_))),B=I.redMul(D)):(V=v.redMul(D).redMul(b.redSub(_)),B=this.curve._mulC(I).redMul(D)),this.curve.point(O,V,B)},C.prototype.add=function(E){return this.isInfinity()?E:E.isInfinity()?this:this.curve.extended?this._extAdd(E):this._projAdd(E)},C.prototype.mul=function(E){return this._hasDoubles(E)?this.curve._fixedNafMul(this,E):this.curve._wnafMul(this,E)},C.prototype.mulAdd=function(E,v,h){return this.curve._wnafMulAdd(1,[this,v],[E,h],2,!1)},C.prototype.jmulAdd=function(E,v,h){return this.curve._wnafMulAdd(1,[this,v],[E,h],2,!0)},C.prototype.normalize=function(){if(this.zOne)return this;var E=this.z.redInvm();return this.x=this.x.redMul(E),this.y=this.y.redMul(E),this.t&&(this.t=this.t.redMul(E)),this.z=this.curve.one,this.zOne=!0,this},C.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},C.prototype.getX=function(){return this.normalize(),this.x.fromRed()},C.prototype.getY=function(){return this.normalize(),this.y.fromRed()},C.prototype.eq=function(E){return this===E||0===this.getX().cmp(E.getX())&&0===this.getY().cmp(E.getY())},C.prototype.eqXToP=function(E){var v=E.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(v))return!0;for(var h=E.clone(),_=this.curve.redN.redMul(this.z);;){if(h.iadd(this.curve.n),h.cmp(this.curve.p)>=0)return!1;if(v.redIAdd(_),0===this.x.cmp(v))return!0}},C.prototype.toP=C.prototype.normalize,C.prototype.mixedAdd=C.prototype.add},3868:(Y,L,T)=>{"use strict";var p=L;p.base=T(780),p.short=T(9918),p.mont=T(2218),p.edwards=T(6121)},2218:(Y,L,T)=>{"use strict";var p=T(4584),N=T(9879),y=T(780),x=T(2946);function u(C){y.call(this,"mont",C),this.a=new p(C.a,16).toRed(this.red),this.b=new p(C.b,16).toRed(this.red),this.i4=new p(4).toRed(this.red).redInvm(),this.two=new p(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function g(C,P,E){y.BasePoint.call(this,C,"projective"),null===P&&null===E?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new p(P,16),this.z=new p(E,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}N(u,y),Y.exports=u,u.prototype.validate=function(P){var E=P.normalize().x,v=E.redSqr(),h=v.redMul(E).redAdd(v.redMul(this.a)).redAdd(E);return 0===h.redSqrt().redSqr().cmp(h)},N(g,y.BasePoint),u.prototype.decodePoint=function(P,E){return this.point(x.toArray(P,E),1)},u.prototype.point=function(P,E){return new g(this,P,E)},u.prototype.pointFromJSON=function(P){return g.fromJSON(this,P)},g.prototype.precompute=function(){},g.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},g.fromJSON=function(P,E){return new g(P,E[0],E[1]||P.one)},g.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},g.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},g.prototype.dbl=function(){var E=this.x.redAdd(this.z).redSqr(),h=this.x.redSub(this.z).redSqr(),_=E.redSub(h),b=E.redMul(h),w=_.redMul(h.redAdd(this.curve.a24.redMul(_)));return this.curve.point(b,w)},g.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},g.prototype.diffAdd=function(P,E){var v=this.x.redAdd(this.z),h=this.x.redSub(this.z),_=P.x.redAdd(P.z),w=P.x.redSub(P.z).redMul(v),I=_.redMul(h),D=E.z.redMul(w.redAdd(I).redSqr()),k=E.x.redMul(w.redISub(I).redSqr());return this.curve.point(D,k)},g.prototype.mul=function(P){for(var E=P.clone(),v=this,h=this.curve.point(null,null),b=[];0!==E.cmpn(0);E.iushrn(1))b.push(E.andln(1));for(var w=b.length-1;w>=0;w--)0===b[w]?(v=v.diffAdd(h,this),h=h.dbl()):(h=v.diffAdd(h,this),v=v.dbl());return h},g.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},g.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},g.prototype.eq=function(P){return 0===this.getX().cmp(P.getX())},g.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},g.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},9918:(Y,L,T)=>{"use strict";var p=T(2946),N=T(4584),y=T(9879),x=T(780),u=p.assert;function g(E){x.call(this,"short",E),this.a=new N(E.a,16).toRed(this.red),this.b=new N(E.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(E),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function C(E,v,h,_){x.BasePoint.call(this,E,"affine"),null===v&&null===h?(this.x=null,this.y=null,this.inf=!0):(this.x=new N(v,16),this.y=new N(h,16),_&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function P(E,v,h,_){x.BasePoint.call(this,E,"jacobian"),null===v&&null===h&&null===_?(this.x=this.curve.one,this.y=this.curve.one,this.z=new N(0)):(this.x=new N(v,16),this.y=new N(h,16),this.z=new N(_,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}y(g,x),Y.exports=g,g.prototype._getEndomorphism=function(v){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var h,_;if(v.beta)h=new N(v.beta,16).toRed(this.red);else{var b=this._getEndoRoots(this.p);h=(h=b[0].cmp(b[1])<0?b[0]:b[1]).toRed(this.red)}if(v.lambda)_=new N(v.lambda,16);else{var w=this._getEndoRoots(this.n);0===this.g.mul(w[0]).x.cmp(this.g.x.redMul(h))?_=w[0]:u(0===this.g.mul(_=w[1]).x.cmp(this.g.x.redMul(h)))}return{beta:h,lambda:_,basis:v.basis?v.basis.map(function(D){return{a:new N(D.a,16),b:new N(D.b,16)}}):this._getEndoBasis(_)}}},g.prototype._getEndoRoots=function(v){var h=v===this.p?this.red:N.mont(v),_=new N(2).toRed(h).redInvm(),b=_.redNeg(),w=new N(3).toRed(h).redNeg().redSqrt().redMul(_);return[b.redAdd(w).fromRed(),b.redSub(w).fromRed()]},g.prototype._getEndoBasis=function(v){for(var O,V,B,U,j,W,X,ge,R,h=this.n.ushrn(Math.floor(this.n.bitLength()/2)),_=v,b=this.n.clone(),w=new N(1),I=new N(0),D=new N(0),k=new N(1),K=0;0!==_.cmpn(0);){var r=b.div(_);ge=b.sub(r.mul(_)),R=D.sub(r.mul(w));var s=k.sub(r.mul(I));if(!B&&ge.cmp(h)<0)O=X.neg(),V=w,B=ge.neg(),U=R;else if(B&&2==++K)break;X=ge,b=_,_=ge,D=w,w=R,k=I,I=s}j=ge.neg(),W=R;var l=B.sqr().add(U.sqr());return j.sqr().add(W.sqr()).cmp(l)>=0&&(j=O,W=V),B.negative&&(B=B.neg(),U=U.neg()),j.negative&&(j=j.neg(),W=W.neg()),[{a:B,b:U},{a:j,b:W}]},g.prototype._endoSplit=function(v){var h=this.endo.basis,_=h[0],b=h[1],w=b.b.mul(v).divRound(this.n),I=_.b.neg().mul(v).divRound(this.n),D=w.mul(_.a),k=I.mul(b.a),O=w.mul(_.b),V=I.mul(b.b);return{k1:v.sub(D).sub(k),k2:O.add(V).neg()}},g.prototype.pointFromX=function(v,h){(v=new N(v,16)).red||(v=v.toRed(this.red));var _=v.redSqr().redMul(v).redIAdd(v.redMul(this.a)).redIAdd(this.b),b=_.redSqrt();if(0!==b.redSqr().redSub(_).cmp(this.zero))throw new Error("invalid point");var w=b.fromRed().isOdd();return(h&&!w||!h&&w)&&(b=b.redNeg()),this.point(v,b)},g.prototype.validate=function(v){if(v.inf)return!0;var h=v.x,_=v.y,b=this.a.redMul(h),w=h.redSqr().redMul(h).redIAdd(b).redIAdd(this.b);return 0===_.redSqr().redISub(w).cmpn(0)},g.prototype._endoWnafMulAdd=function(v,h,_){for(var b=this._endoWnafT1,w=this._endoWnafT2,I=0;I<v.length;I++){var D=this._endoSplit(h[I]),k=v[I],O=k._getBeta();D.k1.negative&&(D.k1.ineg(),k=k.neg(!0)),D.k2.negative&&(D.k2.ineg(),O=O.neg(!0)),b[2*I]=k,b[2*I+1]=O,w[2*I]=D.k1,w[2*I+1]=D.k2}for(var V=this._wnafMulAdd(1,b,w,2*I,_),B=0;B<2*I;B++)b[B]=null,w[B]=null;return V},y(C,x.BasePoint),g.prototype.point=function(v,h,_){return new C(this,v,h,_)},g.prototype.pointFromJSON=function(v,h){return C.fromJSON(this,v,h)},C.prototype._getBeta=function(){if(this.curve.endo){var v=this.precomputed;if(v&&v.beta)return v.beta;var h=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(v){var _=this.curve,b=function(w){return _.point(w.x.redMul(_.endo.beta),w.y)};v.beta=h,h.precomputed={beta:null,naf:v.naf&&{wnd:v.naf.wnd,points:v.naf.points.map(b)},doubles:v.doubles&&{step:v.doubles.step,points:v.doubles.points.map(b)}}}return h}},C.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},C.fromJSON=function(v,h,_){"string"==typeof h&&(h=JSON.parse(h));var b=v.point(h[0],h[1],_);if(!h[2])return b;function w(D){return v.point(D[0],D[1],_)}var I=h[2];return b.precomputed={beta:null,doubles:I.doubles&&{step:I.doubles.step,points:[b].concat(I.doubles.points.map(w))},naf:I.naf&&{wnd:I.naf.wnd,points:[b].concat(I.naf.points.map(w))}},b},C.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},C.prototype.isInfinity=function(){return this.inf},C.prototype.add=function(v){if(this.inf)return v;if(v.inf)return this;if(this.eq(v))return this.dbl();if(this.neg().eq(v))return this.curve.point(null,null);if(0===this.x.cmp(v.x))return this.curve.point(null,null);var h=this.y.redSub(v.y);0!==h.cmpn(0)&&(h=h.redMul(this.x.redSub(v.x).redInvm()));var _=h.redSqr().redISub(this.x).redISub(v.x),b=h.redMul(this.x.redSub(_)).redISub(this.y);return this.curve.point(_,b)},C.prototype.dbl=function(){if(this.inf)return this;var v=this.y.redAdd(this.y);if(0===v.cmpn(0))return this.curve.point(null,null);var h=this.curve.a,_=this.x.redSqr(),b=v.redInvm(),w=_.redAdd(_).redIAdd(_).redIAdd(h).redMul(b),I=w.redSqr().redISub(this.x.redAdd(this.x)),D=w.redMul(this.x.redSub(I)).redISub(this.y);return this.curve.point(I,D)},C.prototype.getX=function(){return this.x.fromRed()},C.prototype.getY=function(){return this.y.fromRed()},C.prototype.mul=function(v){return v=new N(v,16),this.isInfinity()?this:this._hasDoubles(v)?this.curve._fixedNafMul(this,v):this.curve.endo?this.curve._endoWnafMulAdd([this],[v]):this.curve._wnafMul(this,v)},C.prototype.mulAdd=function(v,h,_){var b=[this,h],w=[v,_];return this.curve.endo?this.curve._endoWnafMulAdd(b,w):this.curve._wnafMulAdd(1,b,w,2)},C.prototype.jmulAdd=function(v,h,_){var b=[this,h],w=[v,_];return this.curve.endo?this.curve._endoWnafMulAdd(b,w,!0):this.curve._wnafMulAdd(1,b,w,2,!0)},C.prototype.eq=function(v){return this===v||this.inf===v.inf&&(this.inf||0===this.x.cmp(v.x)&&0===this.y.cmp(v.y))},C.prototype.neg=function(v){if(this.inf)return this;var h=this.curve.point(this.x,this.y.redNeg());if(v&&this.precomputed){var _=this.precomputed,b=function(w){return w.neg()};h.precomputed={naf:_.naf&&{wnd:_.naf.wnd,points:_.naf.points.map(b)},doubles:_.doubles&&{step:_.doubles.step,points:_.doubles.points.map(b)}}}return h},C.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},y(P,x.BasePoint),g.prototype.jpoint=function(v,h,_){return new P(this,v,h,_)},P.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var v=this.z.redInvm(),h=v.redSqr(),_=this.x.redMul(h),b=this.y.redMul(h).redMul(v);return this.curve.point(_,b)},P.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},P.prototype.add=function(v){if(this.isInfinity())return v;if(v.isInfinity())return this;var h=v.z.redSqr(),_=this.z.redSqr(),b=this.x.redMul(h),w=v.x.redMul(_),I=this.y.redMul(h.redMul(v.z)),D=v.y.redMul(_.redMul(this.z)),k=b.redSub(w),O=I.redSub(D);if(0===k.cmpn(0))return 0!==O.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var V=k.redSqr(),B=V.redMul(k),U=b.redMul(V),j=O.redSqr().redIAdd(B).redISub(U).redISub(U),W=O.redMul(U.redISub(j)).redISub(I.redMul(B)),X=this.z.redMul(v.z).redMul(k);return this.curve.jpoint(j,W,X)},P.prototype.mixedAdd=function(v){if(this.isInfinity())return v.toJ();if(v.isInfinity())return this;var h=this.z.redSqr(),_=this.x,b=v.x.redMul(h),w=this.y,I=v.y.redMul(h).redMul(this.z),D=_.redSub(b),k=w.redSub(I);if(0===D.cmpn(0))return 0!==k.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var O=D.redSqr(),V=O.redMul(D),B=_.redMul(O),U=k.redSqr().redIAdd(V).redISub(B).redISub(B),j=k.redMul(B.redISub(U)).redISub(w.redMul(V)),W=this.z.redMul(D);return this.curve.jpoint(U,j,W)},P.prototype.dblp=function(v){if(0===v)return this;if(this.isInfinity())return this;if(!v)return this.dbl();var h;if(this.curve.zeroA||this.curve.threeA){var _=this;for(h=0;h<v;h++)_=_.dbl();return _}var b=this.curve.a,w=this.curve.tinv,I=this.x,D=this.y,k=this.z,O=k.redSqr().redSqr(),V=D.redAdd(D);for(h=0;h<v;h++){var B=I.redSqr(),U=V.redSqr(),j=U.redSqr(),W=B.redAdd(B).redIAdd(B).redIAdd(b.redMul(O)),X=I.redMul(U),K=W.redSqr().redISub(X.redAdd(X)),ge=X.redISub(K),R=W.redMul(ge);R=R.redIAdd(R).redISub(j);var r=V.redMul(k);h+1<v&&(O=O.redMul(j)),I=K,k=r,V=R}return this.curve.jpoint(I,V.redMul(w),k)},P.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},P.prototype._zeroDbl=function(){var v,h,_;if(this.zOne){var b=this.x.redSqr(),w=this.y.redSqr(),I=w.redSqr(),D=this.x.redAdd(w).redSqr().redISub(b).redISub(I);D=D.redIAdd(D);var k=b.redAdd(b).redIAdd(b),O=k.redSqr().redISub(D).redISub(D),V=I.redIAdd(I);V=(V=V.redIAdd(V)).redIAdd(V),v=O,h=k.redMul(D.redISub(O)).redISub(V),_=this.y.redAdd(this.y)}else{var B=this.x.redSqr(),U=this.y.redSqr(),j=U.redSqr(),W=this.x.redAdd(U).redSqr().redISub(B).redISub(j);W=W.redIAdd(W);var X=B.redAdd(B).redIAdd(B),K=X.redSqr(),ge=j.redIAdd(j);ge=(ge=ge.redIAdd(ge)).redIAdd(ge),v=K.redISub(W).redISub(W),h=X.redMul(W.redISub(v)).redISub(ge),_=(_=this.y.redMul(this.z)).redIAdd(_)}return this.curve.jpoint(v,h,_)},P.prototype._threeDbl=function(){var v,h,_;if(this.zOne){var b=this.x.redSqr(),w=this.y.redSqr(),I=w.redSqr(),D=this.x.redAdd(w).redSqr().redISub(b).redISub(I);D=D.redIAdd(D);var k=b.redAdd(b).redIAdd(b).redIAdd(this.curve.a),O=k.redSqr().redISub(D).redISub(D);v=O;var V=I.redIAdd(I);V=(V=V.redIAdd(V)).redIAdd(V),h=k.redMul(D.redISub(O)).redISub(V),_=this.y.redAdd(this.y)}else{var B=this.z.redSqr(),U=this.y.redSqr(),j=this.x.redMul(U),W=this.x.redSub(B).redMul(this.x.redAdd(B));W=W.redAdd(W).redIAdd(W);var X=j.redIAdd(j),K=(X=X.redIAdd(X)).redAdd(X);v=W.redSqr().redISub(K),_=this.y.redAdd(this.z).redSqr().redISub(U).redISub(B);var ge=U.redSqr();ge=(ge=(ge=ge.redIAdd(ge)).redIAdd(ge)).redIAdd(ge),h=W.redMul(X.redISub(v)).redISub(ge)}return this.curve.jpoint(v,h,_)},P.prototype._dbl=function(){var v=this.curve.a,h=this.x,_=this.y,b=this.z,w=b.redSqr().redSqr(),I=h.redSqr(),D=_.redSqr(),k=I.redAdd(I).redIAdd(I).redIAdd(v.redMul(w)),O=h.redAdd(h),V=(O=O.redIAdd(O)).redMul(D),B=k.redSqr().redISub(V.redAdd(V)),U=V.redISub(B),j=D.redSqr();j=(j=(j=j.redIAdd(j)).redIAdd(j)).redIAdd(j);var W=k.redMul(U).redISub(j),X=_.redAdd(_).redMul(b);return this.curve.jpoint(B,W,X)},P.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var v=this.x.redSqr(),h=this.y.redSqr(),_=this.z.redSqr(),b=h.redSqr(),w=v.redAdd(v).redIAdd(v),I=w.redSqr(),D=this.x.redAdd(h).redSqr().redISub(v).redISub(b),k=(D=(D=(D=D.redIAdd(D)).redAdd(D).redIAdd(D)).redISub(I)).redSqr(),O=b.redIAdd(b);O=(O=(O=O.redIAdd(O)).redIAdd(O)).redIAdd(O);var V=w.redIAdd(D).redSqr().redISub(I).redISub(k).redISub(O),B=h.redMul(V);B=(B=B.redIAdd(B)).redIAdd(B);var U=this.x.redMul(k).redISub(B);U=(U=U.redIAdd(U)).redIAdd(U);var j=this.y.redMul(V.redMul(O.redISub(V)).redISub(D.redMul(k)));j=(j=(j=j.redIAdd(j)).redIAdd(j)).redIAdd(j);var W=this.z.redAdd(D).redSqr().redISub(_).redISub(k);return this.curve.jpoint(U,j,W)},P.prototype.mul=function(v,h){return v=new N(v,h),this.curve._wnafMul(this,v)},P.prototype.eq=function(v){if("affine"===v.type)return this.eq(v.toJ());if(this===v)return!0;var h=this.z.redSqr(),_=v.z.redSqr();if(0!==this.x.redMul(_).redISub(v.x.redMul(h)).cmpn(0))return!1;var b=h.redMul(this.z),w=_.redMul(v.z);return 0===this.y.redMul(w).redISub(v.y.redMul(b)).cmpn(0)},P.prototype.eqXToP=function(v){var h=this.z.redSqr(),_=v.toRed(this.curve.red).redMul(h);if(0===this.x.cmp(_))return!0;for(var b=v.clone(),w=this.curve.redN.redMul(h);;){if(b.iadd(this.curve.n),b.cmp(this.curve.p)>=0)return!1;if(_.redIAdd(w),0===this.x.cmp(_))return!0}},P.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},P.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},3346:(Y,L,T)=>{"use strict";var P,p=L,N=T(7909),y=T(3868),u=T(2946).assert;function g(E){this.curve="short"===E.type?new y.short(E):"edwards"===E.type?new y.edwards(E):new y.mont(E),this.g=this.curve.g,this.n=this.curve.n,this.hash=E.hash,u(this.g.validate(),"Invalid curve"),u(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function C(E,v){Object.defineProperty(p,E,{configurable:!0,enumerable:!0,get:function(){var h=new g(v);return Object.defineProperty(p,E,{configurable:!0,enumerable:!0,value:h}),h}})}p.PresetCurve=g,C("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:N.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),C("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:N.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),C("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:N.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),C("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:N.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),C("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:N.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),C("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:N.sha256,gRed:!1,g:["9"]}),C("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:N.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{P=T(5503)}catch(E){P=void 0}C("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:N.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",P]})},7237:(Y,L,T)=>{"use strict";var p=T(4584),N=T(2730),y=T(2946),x=T(3346),u=T(4761),g=y.assert,C=T(2806),P=T(6799);function E(v){if(!(this instanceof E))return new E(v);"string"==typeof v&&(g(Object.prototype.hasOwnProperty.call(x,v),"Unknown curve "+v),v=x[v]),v instanceof x.PresetCurve&&(v={curve:v}),this.curve=v.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=v.curve.g,this.g.precompute(v.curve.n.bitLength()+1),this.hash=v.hash||v.curve.hash}Y.exports=E,E.prototype.keyPair=function(h){return new C(this,h)},E.prototype.keyFromPrivate=function(h,_){return C.fromPrivate(this,h,_)},E.prototype.keyFromPublic=function(h,_){return C.fromPublic(this,h,_)},E.prototype.genKeyPair=function(h){h||(h={});for(var _=new N({hash:this.hash,pers:h.pers,persEnc:h.persEnc||"utf8",entropy:h.entropy||u(this.hash.hmacStrength),entropyEnc:h.entropy&&h.entropyEnc||"utf8",nonce:this.n.toArray()}),b=this.n.byteLength(),w=this.n.sub(new p(2));;){var I=new p(_.generate(b));if(!(I.cmp(w)>0))return I.iaddn(1),this.keyFromPrivate(I)}},E.prototype._truncateToN=function(h,_){var b=8*h.byteLength()-this.n.bitLength();return b>0&&(h=h.ushrn(b)),!_&&h.cmp(this.n)>=0?h.sub(this.n):h},E.prototype.sign=function(h,_,b,w){"object"==typeof b&&(w=b,b=null),w||(w={}),_=this.keyFromPrivate(_,b),h=this._truncateToN(new p(h,16));for(var I=this.n.byteLength(),D=_.getPrivate().toArray("be",I),k=h.toArray("be",I),O=new N({hash:this.hash,entropy:D,nonce:k,pers:w.pers,persEnc:w.persEnc||"utf8"}),V=this.n.sub(new p(1)),B=0;;B++){var U=w.k?w.k(B):new p(O.generate(this.n.byteLength()));if(!((U=this._truncateToN(U,!0)).cmpn(1)<=0||U.cmp(V)>=0)){var j=this.g.mul(U);if(!j.isInfinity()){var W=j.getX(),X=W.umod(this.n);if(0!==X.cmpn(0)){var K=U.invm(this.n).mul(X.mul(_.getPrivate()).iadd(h));if(0!==(K=K.umod(this.n)).cmpn(0)){var ge=(j.getY().isOdd()?1:0)|(0!==W.cmp(X)?2:0);return w.canonical&&K.cmp(this.nh)>0&&(K=this.n.sub(K),ge^=1),new P({r:X,s:K,recoveryParam:ge})}}}}}},E.prototype.verify=function(h,_,b,w){h=this._truncateToN(new p(h,16)),b=this.keyFromPublic(b,w);var I=(_=new P(_,"hex")).r,D=_.s;if(I.cmpn(1)<0||I.cmp(this.n)>=0||D.cmpn(1)<0||D.cmp(this.n)>=0)return!1;var B,k=D.invm(this.n),O=k.mul(h).umod(this.n),V=k.mul(I).umod(this.n);return this.curve._maxwellTrick?!(B=this.g.jmulAdd(O,b.getPublic(),V)).isInfinity()&&B.eqXToP(I):!(B=this.g.mulAdd(O,b.getPublic(),V)).isInfinity()&&0===B.getX().umod(this.n).cmp(I)},E.prototype.recoverPubKey=function(v,h,_,b){g((3&_)===_,"The recovery param is more than two bits"),h=new P(h,b);var w=this.n,I=new p(v),D=h.r,k=h.s,O=1&_,V=_>>1;if(D.cmp(this.curve.p.umod(this.curve.n))>=0&&V)throw new Error("Unable to find sencond key candinate");D=this.curve.pointFromX(V?D.add(this.curve.n):D,O);var B=h.r.invm(w),U=w.sub(I).mul(B).umod(w),j=k.mul(B).umod(w);return this.g.mulAdd(U,D,j)},E.prototype.getKeyRecoveryParam=function(v,h,_,b){if(null!==(h=new P(h,b)).recoveryParam)return h.recoveryParam;for(var w=0;w<4;w++){var I;try{I=this.recoverPubKey(v,h,w)}catch(D){continue}if(I.eq(_))return w}throw new Error("Unable to find valid recovery factor")}},2806:(Y,L,T)=>{"use strict";var p=T(4584),y=T(2946).assert;function x(u,g){this.ec=u,this.priv=null,this.pub=null,g.priv&&this._importPrivate(g.priv,g.privEnc),g.pub&&this._importPublic(g.pub,g.pubEnc)}Y.exports=x,x.fromPublic=function(g,C,P){return C instanceof x?C:new x(g,{pub:C,pubEnc:P})},x.fromPrivate=function(g,C,P){return C instanceof x?C:new x(g,{priv:C,privEnc:P})},x.prototype.validate=function(){var g=this.getPublic();return g.isInfinity()?{result:!1,reason:"Invalid public key"}:g.validate()?g.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},x.prototype.getPublic=function(g,C){return"string"==typeof g&&(C=g,g=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),C?this.pub.encode(C,g):this.pub},x.prototype.getPrivate=function(g){return"hex"===g?this.priv.toString(16,2):this.priv},x.prototype._importPrivate=function(g,C){this.priv=new p(g,C||16),this.priv=this.priv.umod(this.ec.curve.n)},x.prototype._importPublic=function(g,C){if(g.x||g.y)return"mont"===this.ec.curve.type?y(g.x,"Need x coordinate"):("short"===this.ec.curve.type||"edwards"===this.ec.curve.type)&&y(g.x&&g.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(g.x,g.y));this.pub=this.ec.curve.decodePoint(g,C)},x.prototype.derive=function(g){return g.validate()||y(g.validate(),"public point not validated"),g.mul(this.priv).getX()},x.prototype.sign=function(g,C,P){return this.ec.sign(g,this,C,P)},x.prototype.verify=function(g,C){return this.ec.verify(g,C,this)},x.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},6799:(Y,L,T)=>{"use strict";var p=T(4584),N=T(2946),y=N.assert;function x(E,v){if(E instanceof x)return E;this._importDER(E,v)||(y(E.r&&E.s,"Signature without r or s"),this.r=new p(E.r,16),this.s=new p(E.s,16),this.recoveryParam=void 0===E.recoveryParam?null:E.recoveryParam)}function u(){this.place=0}function g(E,v){var h=E[v.place++];if(!(128&h))return h;var _=15&h;if(0===_||_>4)return!1;for(var b=0,w=0,I=v.place;w<_;w++,I++)b<<=8,b|=E[I],b>>>=0;return!(b<=127)&&(v.place=I,b)}function C(E){for(var v=0,h=E.length-1;!E[v]&&!(128&E[v+1])&&v<h;)v++;return 0===v?E:E.slice(v)}function P(E,v){if(v<128)E.push(v);else{var h=1+(Math.log(v)/Math.LN2>>>3);for(E.push(128|h);--h;)E.push(v>>>(h<<3)&255);E.push(v)}}Y.exports=x,x.prototype._importDER=function(v,h){v=N.toArray(v,h);var _=new u;if(48!==v[_.place++])return!1;var b=g(v,_);if(!1===b||b+_.place!==v.length||2!==v[_.place++])return!1;var w=g(v,_);if(!1===w)return!1;var I=v.slice(_.place,w+_.place);if(_.place+=w,2!==v[_.place++])return!1;var D=g(v,_);if(!1===D||v.length!==D+_.place)return!1;var k=v.slice(_.place,D+_.place);if(0===I[0]){if(!(128&I[1]))return!1;I=I.slice(1)}if(0===k[0]){if(!(128&k[1]))return!1;k=k.slice(1)}return this.r=new p(I),this.s=new p(k),this.recoveryParam=null,!0},x.prototype.toDER=function(v){var h=this.r.toArray(),_=this.s.toArray();for(128&h[0]&&(h=[0].concat(h)),128&_[0]&&(_=[0].concat(_)),h=C(h),_=C(_);!(_[0]||128&_[1]);)_=_.slice(1);var b=[2];P(b,h.length),(b=b.concat(h)).push(2),P(b,_.length);var w=b.concat(_),I=[48];return P(I,w.length),I=I.concat(w),N.encode(I,v)}},1615:(Y,L,T)=>{"use strict";var p=T(7909),N=T(3346),y=T(2946),x=y.assert,u=y.parseBytes,g=T(6014),C=T(6317);function P(E){if(x("ed25519"===E,"only tested with ed25519 so far"),!(this instanceof P))return new P(E);this.curve=E=N[E].curve,this.g=E.g,this.g.precompute(E.n.bitLength()+1),this.pointClass=E.point().constructor,this.encodingLength=Math.ceil(E.n.bitLength()/8),this.hash=p.sha512}Y.exports=P,P.prototype.sign=function(v,h){v=u(v);var _=this.keyFromSecret(h),b=this.hashInt(_.messagePrefix(),v),w=this.g.mul(b),I=this.encodePoint(w),D=this.hashInt(I,_.pubBytes(),v).mul(_.priv()),k=b.add(D).umod(this.curve.n);return this.makeSignature({R:w,S:k,Rencoded:I})},P.prototype.verify=function(v,h,_){v=u(v),h=this.makeSignature(h);var b=this.keyFromPublic(_),w=this.hashInt(h.Rencoded(),b.pubBytes(),v),I=this.g.mul(h.S());return h.R().add(b.pub().mul(w)).eq(I)},P.prototype.hashInt=function(){for(var v=this.hash(),h=0;h<arguments.length;h++)v.update(arguments[h]);return y.intFromLE(v.digest()).umod(this.curve.n)},P.prototype.keyFromPublic=function(v){return g.fromPublic(this,v)},P.prototype.keyFromSecret=function(v){return g.fromSecret(this,v)},P.prototype.makeSignature=function(v){return v instanceof C?v:new C(this,v)},P.prototype.encodePoint=function(v){var h=v.getY().toArray("le",this.encodingLength);return h[this.encodingLength-1]|=v.getX().isOdd()?128:0,h},P.prototype.decodePoint=function(v){var h=(v=y.parseBytes(v)).length-1,_=v.slice(0,h).concat(-129&v[h]),b=0!=(128&v[h]),w=y.intFromLE(_);return this.curve.pointFromY(w,b)},P.prototype.encodeInt=function(v){return v.toArray("le",this.encodingLength)},P.prototype.decodeInt=function(v){return y.intFromLE(v)},P.prototype.isPoint=function(v){return v instanceof this.pointClass}},6014:(Y,L,T)=>{"use strict";var p=T(2946),N=p.assert,y=p.parseBytes,x=p.cachedProperty;function u(g,C){this.eddsa=g,this._secret=y(C.secret),g.isPoint(C.pub)?this._pub=C.pub:this._pubBytes=y(C.pub)}u.fromPublic=function(C,P){return P instanceof u?P:new u(C,{pub:P})},u.fromSecret=function(C,P){return P instanceof u?P:new u(C,{secret:P})},u.prototype.secret=function(){return this._secret},x(u,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),x(u,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),x(u,"privBytes",function(){var C=this.eddsa,P=this.hash(),E=C.encodingLength-1,v=P.slice(0,C.encodingLength);return v[0]&=248,v[E]&=127,v[E]|=64,v}),x(u,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),x(u,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),x(u,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),u.prototype.sign=function(C){return N(this._secret,"KeyPair can only verify"),this.eddsa.sign(C,this)},u.prototype.verify=function(C,P){return this.eddsa.verify(C,P,this)},u.prototype.getSecret=function(C){return N(this._secret,"KeyPair is public only"),p.encode(this.secret(),C)},u.prototype.getPublic=function(C){return p.encode(this.pubBytes(),C)},Y.exports=u},6317:(Y,L,T)=>{"use strict";var p=T(4584),N=T(2946),y=N.assert,x=N.cachedProperty,u=N.parseBytes;function g(C,P){this.eddsa=C,"object"!=typeof P&&(P=u(P)),Array.isArray(P)&&(P={R:P.slice(0,C.encodingLength),S:P.slice(C.encodingLength)}),y(P.R&&P.S,"Signature without R or S"),C.isPoint(P.R)&&(this._R=P.R),P.S instanceof p&&(this._S=P.S),this._Rencoded=Array.isArray(P.R)?P.R:P.Rencoded,this._Sencoded=Array.isArray(P.S)?P.S:P.Sencoded}x(g,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),x(g,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),x(g,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),x(g,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),g.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},g.prototype.toHex=function(){return N.encode(this.toBytes(),"hex").toUpperCase()},Y.exports=g},5503:Y=>{Y.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},2946:(Y,L,T)=>{"use strict";var p=L,N=T(4584),y=T(6055),x=T(4869);p.assert=y,p.toArray=x.toArray,p.zero2=x.zero2,p.toHex=x.toHex,p.encode=x.encode,p.getNAF=function(v,h,_){var b=new Array(Math.max(v.bitLength(),_)+1);b.fill(0);for(var w=1<<h+1,I=v.clone(),D=0;D<b.length;D++){var k,O=I.andln(w-1);I.isOdd()?I.isubn(k=O>(w>>1)-1?(w>>1)-O:O):k=0,b[D]=k,I.iushrn(1)}return b},p.getJSF=function(v,h){var _=[[],[]];v=v.clone(),h=h.clone();for(var I,b=0,w=0;v.cmpn(-b)>0||h.cmpn(-w)>0;){var O,V,D=v.andln(3)+b&3,k=h.andln(3)+w&3;3===D&&(D=-1),3===k&&(k=-1),O=0==(1&D)?0:3!=(I=v.andln(7)+b&7)&&5!==I||2!==k?D:-D,_[0].push(O),V=0==(1&k)?0:3!=(I=h.andln(7)+w&7)&&5!==I||2!==D?k:-k,_[1].push(V),2*b===O+1&&(b=1-b),2*w===V+1&&(w=1-w),v.iushrn(1),h.iushrn(1)}return _},p.cachedProperty=function(v,h,_){var b="_"+h;v.prototype[h]=function(){return void 0!==this[b]?this[b]:this[b]=_.call(this)}},p.parseBytes=function(v){return"string"==typeof v?p.toArray(v,"hex"):v},p.intFromLE=function(v){return new N(v,"hex","le")}},4584:function(Y,L,T){!function(p,N){"use strict";function y(R,r){if(!R)throw new Error(r||"Assertion failed")}function x(R,r){R.super_=r;var s=function(){};s.prototype=r.prototype,R.prototype=new s,R.prototype.constructor=R}function u(R,r,s){if(u.isBN(R))return R;this.negative=0,this.words=null,this.length=0,this.red=null,null!==R&&(("le"===r||"be"===r)&&(s=r,r=10),this._init(R||0,r||10,s||"be"))}var g;"object"==typeof p?p.exports=u:N.BN=u,u.BN=u,u.wordSize=26;try{g="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:T(5568).Buffer}catch(R){}function C(R,r){var s=R.charCodeAt(r);return s>=65&&s<=70?s-55:s>=97&&s<=102?s-87:s-48&15}function P(R,r,s){var l=C(R,s);return s-1>=r&&(l|=C(R,s-1)<<4),l}function E(R,r,s,l){for(var a=0,f=Math.min(R.length,s),M=r;M<f;M++){var A=R.charCodeAt(M)-48;a*=l,a+=A>=49?A-49+10:A>=17?A-17+10:A}return a}u.isBN=function(r){return r instanceof u||null!==r&&"object"==typeof r&&r.constructor.wordSize===u.wordSize&&Array.isArray(r.words)},u.max=function(r,s){return r.cmp(s)>0?r:s},u.min=function(r,s){return r.cmp(s)<0?r:s},u.prototype._init=function(r,s,l){if("number"==typeof r)return this._initNumber(r,s,l);if("object"==typeof r)return this._initArray(r,s,l);"hex"===s&&(s=16),y(s===(0|s)&&s>=2&&s<=36);var a=0;"-"===(r=r.toString().replace(/\s+/g,""))[0]&&(a++,this.negative=1),a<r.length&&(16===s?this._parseHex(r,a,l):(this._parseBase(r,s,a),"le"===l&&this._initArray(this.toArray(),s,l)))},u.prototype._initNumber=function(r,s,l){r<0&&(this.negative=1,r=-r),r<67108864?(this.words=[67108863&r],this.length=1):r<4503599627370496?(this.words=[67108863&r,r/67108864&67108863],this.length=2):(y(r<9007199254740992),this.words=[67108863&r,r/67108864&67108863,1],this.length=3),"le"===l&&this._initArray(this.toArray(),s,l)},u.prototype._initArray=function(r,s,l){if(y("number"==typeof r.length),r.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(r.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var f,M,A=0;if("be"===l)for(a=r.length-1,f=0;a>=0;a-=3)this.words[f]|=(M=r[a]|r[a-1]<<8|r[a-2]<<16)<<A&67108863,this.words[f+1]=M>>>26-A&67108863,(A+=24)>=26&&(A-=26,f++);else if("le"===l)for(a=0,f=0;a<r.length;a+=3)this.words[f]|=(M=r[a]|r[a+1]<<8|r[a+2]<<16)<<A&67108863,this.words[f+1]=M>>>26-A&67108863,(A+=24)>=26&&(A-=26,f++);return this.strip()},u.prototype._parseHex=function(r,s,l){this.length=Math.ceil((r.length-s)/6),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var A,f=0,M=0;if("be"===l)for(a=r.length-1;a>=s;a-=2)A=P(r,s,a)<<f,this.words[M]|=67108863&A,f>=18?(f-=18,this.words[M+=1]|=A>>>26):f+=8;else for(a=(r.length-s)%2==0?s+1:s;a<r.length;a+=2)A=P(r,s,a)<<f,this.words[M]|=67108863&A,f>=18?(f-=18,this.words[M+=1]|=A>>>26):f+=8;this.strip()},u.prototype._parseBase=function(r,s,l){this.words=[0],this.length=1;for(var a=0,f=1;f<=67108863;f*=s)a++;a--,f=f/s|0;for(var M=r.length-l,A=M%a,d=Math.min(M,M-A)+l,i=0,m=l;m<d;m+=a)i=E(r,m,m+a,s),this.imuln(f),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i);if(0!==A){var q=1;for(i=E(r,m,r.length,s),m=0;m<A;m++)q*=s;this.imuln(q),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i)}this.strip()},u.prototype.copy=function(r){r.words=new Array(this.length);for(var s=0;s<this.length;s++)r.words[s]=this.words[s];r.length=this.length,r.negative=this.negative,r.red=this.red},u.prototype.clone=function(){var r=new u(null);return this.copy(r),r},u.prototype._expand=function(r){for(;this.length<r;)this.words[this.length++]=0;return this},u.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},u.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},u.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var v=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],_=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function w(R,r,s){s.negative=r.negative^R.negative;var l=R.length+r.length|0;s.length=l,l=l-1|0;var a=0|R.words[0],f=0|r.words[0],M=a*f,d=M/67108864|0;s.words[0]=67108863&M;for(var i=1;i<l;i++){for(var m=d>>>26,q=67108863&d,z=Math.min(i,r.length-1),J=Math.max(0,i-R.length+1);J<=z;J++)m+=(M=(a=0|R.words[i-J|0])*(f=0|r.words[J])+q)/67108864|0,q=67108863&M;s.words[i]=0|q,d=0|m}return 0!==d?s.words[i]=0|d:s.length--,s.strip()}u.prototype.toString=function(r,s){var l;if(s=0|s||1,16===(r=r||10)||"hex"===r){l="";for(var a=0,f=0,M=0;M<this.length;M++){var A=this.words[M],d=(16777215&(A<<a|f)).toString(16);l=0!=(f=A>>>24-a&16777215)||M!==this.length-1?v[6-d.length]+d+l:d+l,(a+=2)>=26&&(a-=26,M--)}for(0!==f&&(l=f.toString(16)+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}if(r===(0|r)&&r>=2&&r<=36){var i=h[r],m=_[r];l="";var q=this.clone();for(q.negative=0;!q.isZero();){var z=q.modn(m).toString(r);l=(q=q.idivn(m)).isZero()?z+l:v[i-z.length]+z+l}for(this.isZero()&&(l="0"+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}y(!1,"Base should be between 2 and 36")},u.prototype.toNumber=function(){var r=this.words[0];return 2===this.length?r+=67108864*this.words[1]:3===this.length&&1===this.words[2]?r+=4503599627370496+67108864*this.words[1]:this.length>2&&y(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-r:r},u.prototype.toJSON=function(){return this.toString(16)},u.prototype.toBuffer=function(r,s){return y(void 0!==g),this.toArrayLike(g,r,s)},u.prototype.toArray=function(r,s){return this.toArrayLike(Array,r,s)},u.prototype.toArrayLike=function(r,s,l){var a=this.byteLength(),f=l||Math.max(1,a);y(a<=f,"byte array longer than desired length"),y(f>0,"Requested array length <= 0"),this.strip();var d,i,M="le"===s,A=new r(f),m=this.clone();if(M){for(i=0;!m.isZero();i++)d=m.andln(255),m.iushrn(8),A[i]=d;for(;i<f;i++)A[i]=0}else{for(i=0;i<f-a;i++)A[i]=0;for(i=0;!m.isZero();i++)d=m.andln(255),m.iushrn(8),A[f-i-1]=d}return A},u.prototype._countBits=Math.clz32?function(r){return 32-Math.clz32(r)}:function(r){var s=r,l=0;return s>=4096&&(l+=13,s>>>=13),s>=64&&(l+=7,s>>>=7),s>=8&&(l+=4,s>>>=4),s>=2&&(l+=2,s>>>=2),l+s},u.prototype._zeroBits=function(r){if(0===r)return 26;var s=r,l=0;return 0==(8191&s)&&(l+=13,s>>>=13),0==(127&s)&&(l+=7,s>>>=7),0==(15&s)&&(l+=4,s>>>=4),0==(3&s)&&(l+=2,s>>>=2),0==(1&s)&&l++,l},u.prototype.bitLength=function(){var s=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+s},u.prototype.zeroBits=function(){if(this.isZero())return 0;for(var r=0,s=0;s<this.length;s++){var l=this._zeroBits(this.words[s]);if(r+=l,26!==l)break}return r},u.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},u.prototype.toTwos=function(r){return 0!==this.negative?this.abs().inotn(r).iaddn(1):this.clone()},u.prototype.fromTwos=function(r){return this.testn(r-1)?this.notn(r).iaddn(1).ineg():this.clone()},u.prototype.isNeg=function(){return 0!==this.negative},u.prototype.neg=function(){return this.clone().ineg()},u.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},u.prototype.iuor=function(r){for(;this.length<r.length;)this.words[this.length++]=0;for(var s=0;s<r.length;s++)this.words[s]=this.words[s]|r.words[s];return this.strip()},u.prototype.ior=function(r){return y(0==(this.negative|r.negative)),this.iuor(r)},u.prototype.or=function(r){return this.length>r.length?this.clone().ior(r):r.clone().ior(this)},u.prototype.uor=function(r){return this.length>r.length?this.clone().iuor(r):r.clone().iuor(this)},u.prototype.iuand=function(r){var s;s=this.length>r.length?r:this;for(var l=0;l<s.length;l++)this.words[l]=this.words[l]&r.words[l];return this.length=s.length,this.strip()},u.prototype.iand=function(r){return y(0==(this.negative|r.negative)),this.iuand(r)},u.prototype.and=function(r){return this.length>r.length?this.clone().iand(r):r.clone().iand(this)},u.prototype.uand=function(r){return this.length>r.length?this.clone().iuand(r):r.clone().iuand(this)},u.prototype.iuxor=function(r){var s,l;this.length>r.length?(s=this,l=r):(s=r,l=this);for(var a=0;a<l.length;a++)this.words[a]=s.words[a]^l.words[a];if(this!==s)for(;a<s.length;a++)this.words[a]=s.words[a];return this.length=s.length,this.strip()},u.prototype.ixor=function(r){return y(0==(this.negative|r.negative)),this.iuxor(r)},u.prototype.xor=function(r){return this.length>r.length?this.clone().ixor(r):r.clone().ixor(this)},u.prototype.uxor=function(r){return this.length>r.length?this.clone().iuxor(r):r.clone().iuxor(this)},u.prototype.inotn=function(r){y("number"==typeof r&&r>=0);var s=0|Math.ceil(r/26),l=r%26;this._expand(s),l>0&&s--;for(var a=0;a<s;a++)this.words[a]=67108863&~this.words[a];return l>0&&(this.words[a]=~this.words[a]&67108863>>26-l),this.strip()},u.prototype.notn=function(r){return this.clone().inotn(r)},u.prototype.setn=function(r,s){y("number"==typeof r&&r>=0);var l=r/26|0,a=r%26;return this._expand(l+1),this.words[l]=s?this.words[l]|1<<a:this.words[l]&~(1<<a),this.strip()},u.prototype.iadd=function(r){var s,l,a;if(0!==this.negative&&0===r.negative)return this.negative=0,s=this.isub(r),this.negative^=1,this._normSign();if(0===this.negative&&0!==r.negative)return r.negative=0,s=this.isub(r),r.negative=1,s._normSign();this.length>r.length?(l=this,a=r):(l=r,a=this);for(var f=0,M=0;M<a.length;M++)this.words[M]=67108863&(s=(0|l.words[M])+(0|a.words[M])+f),f=s>>>26;for(;0!==f&&M<l.length;M++)this.words[M]=67108863&(s=(0|l.words[M])+f),f=s>>>26;if(this.length=l.length,0!==f)this.words[this.length]=f,this.length++;else if(l!==this)for(;M<l.length;M++)this.words[M]=l.words[M];return this},u.prototype.add=function(r){var s;return 0!==r.negative&&0===this.negative?(r.negative=0,s=this.sub(r),r.negative^=1,s):0===r.negative&&0!==this.negative?(this.negative=0,s=r.sub(this),this.negative=1,s):this.length>r.length?this.clone().iadd(r):r.clone().iadd(this)},u.prototype.isub=function(r){if(0!==r.negative){r.negative=0;var s=this.iadd(r);return r.negative=1,s._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(r),this.negative=1,this._normSign();var a,f,l=this.cmp(r);if(0===l)return this.negative=0,this.length=1,this.words[0]=0,this;l>0?(a=this,f=r):(a=r,f=this);for(var M=0,A=0;A<f.length;A++)M=(s=(0|a.words[A])-(0|f.words[A])+M)>>26,this.words[A]=67108863&s;for(;0!==M&&A<a.length;A++)M=(s=(0|a.words[A])+M)>>26,this.words[A]=67108863&s;if(0===M&&A<a.length&&a!==this)for(;A<a.length;A++)this.words[A]=a.words[A];return this.length=Math.max(this.length,A),a!==this&&(this.negative=1),this.strip()},u.prototype.sub=function(r){return this.clone().isub(r)};var I=function(r,s,l){var d,i,m,a=r.words,f=s.words,M=l.words,A=0,q=0|a[0],z=8191&q,J=q>>>13,ce=0|a[1],se=8191&ce,he=ce>>>13,ve=0|a[2],ae=8191&ve,de=ve>>>13,Re=0|a[3],Ee=8191&Re,ue=Re>>>13,ye=0|a[4],Se=8191&ye,ie=ye>>>13,ee=0|a[5],Z=8191&ee,le=ee>>>13,Oe=0|a[6],we=8191&Oe,Te=Oe>>>13,yt=0|a[7],Ne=8191&yt,Me=yt>>>13,Ye=0|a[8],De=8191&Ye,Fe=Ye>>>13,ct=0|a[9],Ve=8191&ct,Ke=ct>>>13,Zt=0|f[0],nt=8191&Zt,ot=Zt>>>13,Mt=0|f[1],ut=8191&Mt,st=Mt>>>13,Nn=0|f[2],rt=8191&Nn,Ge=Nn>>>13,Cn=0|f[3],qe=8191&Cn,We=Cn>>>13,Dn=0|f[4],ft=8191&Dn,Ue=Dn>>>13,Ln=0|f[5],gt=8191&Ln,it=Ln>>>13,zn=0|f[6],lt=8191&zn,ze=zn>>>13,sn=0|f[7],dt=8191&sn,Xe=sn>>>13,Qt=0|f[8],Qe=8191&Qt,Ze=Qt>>>13,Pn=0|f[9],Je=8191&Pn,at=Pn>>>13;l.negative=r.negative^s.negative,l.length=19;var un=(A+(d=Math.imul(z,nt))|0)+((8191&(i=(i=Math.imul(z,ot))+Math.imul(J,nt)|0))<<13)|0;A=((m=Math.imul(J,ot))+(i>>>13)|0)+(un>>>26)|0,un&=67108863,d=Math.imul(se,nt),i=(i=Math.imul(se,ot))+Math.imul(he,nt)|0,m=Math.imul(he,ot);var Vt=(A+(d=d+Math.imul(z,ut)|0)|0)+((8191&(i=(i=i+Math.imul(z,st)|0)+Math.imul(J,ut)|0))<<13)|0;A=((m=m+Math.imul(J,st)|0)+(i>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,d=Math.imul(ae,nt),i=(i=Math.imul(ae,ot))+Math.imul(de,nt)|0,m=Math.imul(de,ot),d=d+Math.imul(se,ut)|0,i=(i=i+Math.imul(se,st)|0)+Math.imul(he,ut)|0,m=m+Math.imul(he,st)|0;var Ht=(A+(d=d+Math.imul(z,rt)|0)|0)+((8191&(i=(i=i+Math.imul(z,Ge)|0)+Math.imul(J,rt)|0))<<13)|0;A=((m=m+Math.imul(J,Ge)|0)+(i>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,d=Math.imul(Ee,nt),i=(i=Math.imul(Ee,ot))+Math.imul(ue,nt)|0,m=Math.imul(ue,ot),d=d+Math.imul(ae,ut)|0,i=(i=i+Math.imul(ae,st)|0)+Math.imul(de,ut)|0,m=m+Math.imul(de,st)|0,d=d+Math.imul(se,rt)|0,i=(i=i+Math.imul(se,Ge)|0)+Math.imul(he,rt)|0,m=m+Math.imul(he,Ge)|0;var bn=(A+(d=d+Math.imul(z,qe)|0)|0)+((8191&(i=(i=i+Math.imul(z,We)|0)+Math.imul(J,qe)|0))<<13)|0;A=((m=m+Math.imul(J,We)|0)+(i>>>13)|0)+(bn>>>26)|0,bn&=67108863,d=Math.imul(Se,nt),i=(i=Math.imul(Se,ot))+Math.imul(ie,nt)|0,m=Math.imul(ie,ot),d=d+Math.imul(Ee,ut)|0,i=(i=i+Math.imul(Ee,st)|0)+Math.imul(ue,ut)|0,m=m+Math.imul(ue,st)|0,d=d+Math.imul(ae,rt)|0,i=(i=i+Math.imul(ae,Ge)|0)+Math.imul(de,rt)|0,m=m+Math.imul(de,Ge)|0,d=d+Math.imul(se,qe)|0,i=(i=i+Math.imul(se,We)|0)+Math.imul(he,qe)|0,m=m+Math.imul(he,We)|0;var dn=(A+(d=d+Math.imul(z,ft)|0)|0)+((8191&(i=(i=i+Math.imul(z,Ue)|0)+Math.imul(J,ft)|0))<<13)|0;A=((m=m+Math.imul(J,Ue)|0)+(i>>>13)|0)+(dn>>>26)|0,dn&=67108863,d=Math.imul(Z,nt),i=(i=Math.imul(Z,ot))+Math.imul(le,nt)|0,m=Math.imul(le,ot),d=d+Math.imul(Se,ut)|0,i=(i=i+Math.imul(Se,st)|0)+Math.imul(ie,ut)|0,m=m+Math.imul(ie,st)|0,d=d+Math.imul(Ee,rt)|0,i=(i=i+Math.imul(Ee,Ge)|0)+Math.imul(ue,rt)|0,m=m+Math.imul(ue,Ge)|0,d=d+Math.imul(ae,qe)|0,i=(i=i+Math.imul(ae,We)|0)+Math.imul(de,qe)|0,m=m+Math.imul(de,We)|0,d=d+Math.imul(se,ft)|0,i=(i=i+Math.imul(se,Ue)|0)+Math.imul(he,ft)|0,m=m+Math.imul(he,Ue)|0;var pn=(A+(d=d+Math.imul(z,gt)|0)|0)+((8191&(i=(i=i+Math.imul(z,it)|0)+Math.imul(J,gt)|0))<<13)|0;A=((m=m+Math.imul(J,it)|0)+(i>>>13)|0)+(pn>>>26)|0,pn&=67108863,d=Math.imul(we,nt),i=(i=Math.imul(we,ot))+Math.imul(Te,nt)|0,m=Math.imul(Te,ot),d=d+Math.imul(Z,ut)|0,i=(i=i+Math.imul(Z,st)|0)+Math.imul(le,ut)|0,m=m+Math.imul(le,st)|0,d=d+Math.imul(Se,rt)|0,i=(i=i+Math.imul(Se,Ge)|0)+Math.imul(ie,rt)|0,m=m+Math.imul(ie,Ge)|0,d=d+Math.imul(Ee,qe)|0,i=(i=i+Math.imul(Ee,We)|0)+Math.imul(ue,qe)|0,m=m+Math.imul(ue,We)|0,d=d+Math.imul(ae,ft)|0,i=(i=i+Math.imul(ae,Ue)|0)+Math.imul(de,ft)|0,m=m+Math.imul(de,Ue)|0,d=d+Math.imul(se,gt)|0,i=(i=i+Math.imul(se,it)|0)+Math.imul(he,gt)|0,m=m+Math.imul(he,it)|0;var In=(A+(d=d+Math.imul(z,lt)|0)|0)+((8191&(i=(i=i+Math.imul(z,ze)|0)+Math.imul(J,lt)|0))<<13)|0;A=((m=m+Math.imul(J,ze)|0)+(i>>>13)|0)+(In>>>26)|0,In&=67108863,d=Math.imul(Ne,nt),i=(i=Math.imul(Ne,ot))+Math.imul(Me,nt)|0,m=Math.imul(Me,ot),d=d+Math.imul(we,ut)|0,i=(i=i+Math.imul(we,st)|0)+Math.imul(Te,ut)|0,m=m+Math.imul(Te,st)|0,d=d+Math.imul(Z,rt)|0,i=(i=i+Math.imul(Z,Ge)|0)+Math.imul(le,rt)|0,m=m+Math.imul(le,Ge)|0,d=d+Math.imul(Se,qe)|0,i=(i=i+Math.imul(Se,We)|0)+Math.imul(ie,qe)|0,m=m+Math.imul(ie,We)|0,d=d+Math.imul(Ee,ft)|0,i=(i=i+Math.imul(Ee,Ue)|0)+Math.imul(ue,ft)|0,m=m+Math.imul(ue,Ue)|0,d=d+Math.imul(ae,gt)|0,i=(i=i+Math.imul(ae,it)|0)+Math.imul(de,gt)|0,m=m+Math.imul(de,it)|0,d=d+Math.imul(se,lt)|0,i=(i=i+Math.imul(se,ze)|0)+Math.imul(he,lt)|0,m=m+Math.imul(he,ze)|0;var rn=(A+(d=d+Math.imul(z,dt)|0)|0)+((8191&(i=(i=i+Math.imul(z,Xe)|0)+Math.imul(J,dt)|0))<<13)|0;A=((m=m+Math.imul(J,Xe)|0)+(i>>>13)|0)+(rn>>>26)|0,rn&=67108863,d=Math.imul(De,nt),i=(i=Math.imul(De,ot))+Math.imul(Fe,nt)|0,m=Math.imul(Fe,ot),d=d+Math.imul(Ne,ut)|0,i=(i=i+Math.imul(Ne,st)|0)+Math.imul(Me,ut)|0,m=m+Math.imul(Me,st)|0,d=d+Math.imul(we,rt)|0,i=(i=i+Math.imul(we,Ge)|0)+Math.imul(Te,rt)|0,m=m+Math.imul(Te,Ge)|0,d=d+Math.imul(Z,qe)|0,i=(i=i+Math.imul(Z,We)|0)+Math.imul(le,qe)|0,m=m+Math.imul(le,We)|0,d=d+Math.imul(Se,ft)|0,i=(i=i+Math.imul(Se,Ue)|0)+Math.imul(ie,ft)|0,m=m+Math.imul(ie,Ue)|0,d=d+Math.imul(Ee,gt)|0,i=(i=i+Math.imul(Ee,it)|0)+Math.imul(ue,gt)|0,m=m+Math.imul(ue,it)|0,d=d+Math.imul(ae,lt)|0,i=(i=i+Math.imul(ae,ze)|0)+Math.imul(de,lt)|0,m=m+Math.imul(de,ze)|0,d=d+Math.imul(se,dt)|0,i=(i=i+Math.imul(se,Xe)|0)+Math.imul(he,dt)|0,m=m+Math.imul(he,Xe)|0;var Mn=(A+(d=d+Math.imul(z,Qe)|0)|0)+((8191&(i=(i=i+Math.imul(z,Ze)|0)+Math.imul(J,Qe)|0))<<13)|0;A=((m=m+Math.imul(J,Ze)|0)+(i>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,d=Math.imul(Ve,nt),i=(i=Math.imul(Ve,ot))+Math.imul(Ke,nt)|0,m=Math.imul(Ke,ot),d=d+Math.imul(De,ut)|0,i=(i=i+Math.imul(De,st)|0)+Math.imul(Fe,ut)|0,m=m+Math.imul(Fe,st)|0,d=d+Math.imul(Ne,rt)|0,i=(i=i+Math.imul(Ne,Ge)|0)+Math.imul(Me,rt)|0,m=m+Math.imul(Me,Ge)|0,d=d+Math.imul(we,qe)|0,i=(i=i+Math.imul(we,We)|0)+Math.imul(Te,qe)|0,m=m+Math.imul(Te,We)|0,d=d+Math.imul(Z,ft)|0,i=(i=i+Math.imul(Z,Ue)|0)+Math.imul(le,ft)|0,m=m+Math.imul(le,Ue)|0,d=d+Math.imul(Se,gt)|0,i=(i=i+Math.imul(Se,it)|0)+Math.imul(ie,gt)|0,m=m+Math.imul(ie,it)|0,d=d+Math.imul(Ee,lt)|0,i=(i=i+Math.imul(Ee,ze)|0)+Math.imul(ue,lt)|0,m=m+Math.imul(ue,ze)|0,d=d+Math.imul(ae,dt)|0,i=(i=i+Math.imul(ae,Xe)|0)+Math.imul(de,dt)|0,m=m+Math.imul(de,Xe)|0,d=d+Math.imul(se,Qe)|0,i=(i=i+Math.imul(se,Ze)|0)+Math.imul(he,Qe)|0,m=m+Math.imul(he,Ze)|0;var $t=(A+(d=d+Math.imul(z,Je)|0)|0)+((8191&(i=(i=i+Math.imul(z,at)|0)+Math.imul(J,Je)|0))<<13)|0;A=((m=m+Math.imul(J,at)|0)+(i>>>13)|0)+($t>>>26)|0,$t&=67108863,d=Math.imul(Ve,ut),i=(i=Math.imul(Ve,st))+Math.imul(Ke,ut)|0,m=Math.imul(Ke,st),d=d+Math.imul(De,rt)|0,i=(i=i+Math.imul(De,Ge)|0)+Math.imul(Fe,rt)|0,m=m+Math.imul(Fe,Ge)|0,d=d+Math.imul(Ne,qe)|0,i=(i=i+Math.imul(Ne,We)|0)+Math.imul(Me,qe)|0,m=m+Math.imul(Me,We)|0,d=d+Math.imul(we,ft)|0,i=(i=i+Math.imul(we,Ue)|0)+Math.imul(Te,ft)|0,m=m+Math.imul(Te,Ue)|0,d=d+Math.imul(Z,gt)|0,i=(i=i+Math.imul(Z,it)|0)+Math.imul(le,gt)|0,m=m+Math.imul(le,it)|0,d=d+Math.imul(Se,lt)|0,i=(i=i+Math.imul(Se,ze)|0)+Math.imul(ie,lt)|0,m=m+Math.imul(ie,ze)|0,d=d+Math.imul(Ee,dt)|0,i=(i=i+Math.imul(Ee,Xe)|0)+Math.imul(ue,dt)|0,m=m+Math.imul(ue,Xe)|0,d=d+Math.imul(ae,Qe)|0,i=(i=i+Math.imul(ae,Ze)|0)+Math.imul(de,Qe)|0,m=m+Math.imul(de,Ze)|0;var Nt=(A+(d=d+Math.imul(se,Je)|0)|0)+((8191&(i=(i=i+Math.imul(se,at)|0)+Math.imul(he,Je)|0))<<13)|0;A=((m=m+Math.imul(he,at)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,d=Math.imul(Ve,rt),i=(i=Math.imul(Ve,Ge))+Math.imul(Ke,rt)|0,m=Math.imul(Ke,Ge),d=d+Math.imul(De,qe)|0,i=(i=i+Math.imul(De,We)|0)+Math.imul(Fe,qe)|0,m=m+Math.imul(Fe,We)|0,d=d+Math.imul(Ne,ft)|0,i=(i=i+Math.imul(Ne,Ue)|0)+Math.imul(Me,ft)|0,m=m+Math.imul(Me,Ue)|0,d=d+Math.imul(we,gt)|0,i=(i=i+Math.imul(we,it)|0)+Math.imul(Te,gt)|0,m=m+Math.imul(Te,it)|0,d=d+Math.imul(Z,lt)|0,i=(i=i+Math.imul(Z,ze)|0)+Math.imul(le,lt)|0,m=m+Math.imul(le,ze)|0,d=d+Math.imul(Se,dt)|0,i=(i=i+Math.imul(Se,Xe)|0)+Math.imul(ie,dt)|0,m=m+Math.imul(ie,Xe)|0,d=d+Math.imul(Ee,Qe)|0,i=(i=i+Math.imul(Ee,Ze)|0)+Math.imul(ue,Qe)|0,m=m+Math.imul(ue,Ze)|0;var xn=(A+(d=d+Math.imul(ae,Je)|0)|0)+((8191&(i=(i=i+Math.imul(ae,at)|0)+Math.imul(de,Je)|0))<<13)|0;A=((m=m+Math.imul(de,at)|0)+(i>>>13)|0)+(xn>>>26)|0,xn&=67108863,d=Math.imul(Ve,qe),i=(i=Math.imul(Ve,We))+Math.imul(Ke,qe)|0,m=Math.imul(Ke,We),d=d+Math.imul(De,ft)|0,i=(i=i+Math.imul(De,Ue)|0)+Math.imul(Fe,ft)|0,m=m+Math.imul(Fe,Ue)|0,d=d+Math.imul(Ne,gt)|0,i=(i=i+Math.imul(Ne,it)|0)+Math.imul(Me,gt)|0,m=m+Math.imul(Me,it)|0,d=d+Math.imul(we,lt)|0,i=(i=i+Math.imul(we,ze)|0)+Math.imul(Te,lt)|0,m=m+Math.imul(Te,ze)|0,d=d+Math.imul(Z,dt)|0,i=(i=i+Math.imul(Z,Xe)|0)+Math.imul(le,dt)|0,m=m+Math.imul(le,Xe)|0,d=d+Math.imul(Se,Qe)|0,i=(i=i+Math.imul(Se,Ze)|0)+Math.imul(ie,Qe)|0,m=m+Math.imul(ie,Ze)|0;var wn=(A+(d=d+Math.imul(Ee,Je)|0)|0)+((8191&(i=(i=i+Math.imul(Ee,at)|0)+Math.imul(ue,Je)|0))<<13)|0;A=((m=m+Math.imul(ue,at)|0)+(i>>>13)|0)+(wn>>>26)|0,wn&=67108863,d=Math.imul(Ve,ft),i=(i=Math.imul(Ve,Ue))+Math.imul(Ke,ft)|0,m=Math.imul(Ke,Ue),d=d+Math.imul(De,gt)|0,i=(i=i+Math.imul(De,it)|0)+Math.imul(Fe,gt)|0,m=m+Math.imul(Fe,it)|0,d=d+Math.imul(Ne,lt)|0,i=(i=i+Math.imul(Ne,ze)|0)+Math.imul(Me,lt)|0,m=m+Math.imul(Me,ze)|0,d=d+Math.imul(we,dt)|0,i=(i=i+Math.imul(we,Xe)|0)+Math.imul(Te,dt)|0,m=m+Math.imul(Te,Xe)|0,d=d+Math.imul(Z,Qe)|0,i=(i=i+Math.imul(Z,Ze)|0)+Math.imul(le,Qe)|0,m=m+Math.imul(le,Ze)|0;var _n=(A+(d=d+Math.imul(Se,Je)|0)|0)+((8191&(i=(i=i+Math.imul(Se,at)|0)+Math.imul(ie,Je)|0))<<13)|0;A=((m=m+Math.imul(ie,at)|0)+(i>>>13)|0)+(_n>>>26)|0,_n&=67108863,d=Math.imul(Ve,gt),i=(i=Math.imul(Ve,it))+Math.imul(Ke,gt)|0,m=Math.imul(Ke,it),d=d+Math.imul(De,lt)|0,i=(i=i+Math.imul(De,ze)|0)+Math.imul(Fe,lt)|0,m=m+Math.imul(Fe,ze)|0,d=d+Math.imul(Ne,dt)|0,i=(i=i+Math.imul(Ne,Xe)|0)+Math.imul(Me,dt)|0,m=m+Math.imul(Me,Xe)|0,d=d+Math.imul(we,Qe)|0,i=(i=i+Math.imul(we,Ze)|0)+Math.imul(Te,Qe)|0,m=m+Math.imul(Te,Ze)|0;var xt=(A+(d=d+Math.imul(Z,Je)|0)|0)+((8191&(i=(i=i+Math.imul(Z,at)|0)+Math.imul(le,Je)|0))<<13)|0;A=((m=m+Math.imul(le,at)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,d=Math.imul(Ve,lt),i=(i=Math.imul(Ve,ze))+Math.imul(Ke,lt)|0,m=Math.imul(Ke,ze),d=d+Math.imul(De,dt)|0,i=(i=i+Math.imul(De,Xe)|0)+Math.imul(Fe,dt)|0,m=m+Math.imul(Fe,Xe)|0,d=d+Math.imul(Ne,Qe)|0,i=(i=i+Math.imul(Ne,Ze)|0)+Math.imul(Me,Qe)|0,m=m+Math.imul(Me,Ze)|0;var Rn=(A+(d=d+Math.imul(we,Je)|0)|0)+((8191&(i=(i=i+Math.imul(we,at)|0)+Math.imul(Te,Je)|0))<<13)|0;A=((m=m+Math.imul(Te,at)|0)+(i>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,d=Math.imul(Ve,dt),i=(i=Math.imul(Ve,Xe))+Math.imul(Ke,dt)|0,m=Math.imul(Ke,Xe),d=d+Math.imul(De,Qe)|0,i=(i=i+Math.imul(De,Ze)|0)+Math.imul(Fe,Qe)|0,m=m+Math.imul(Fe,Ze)|0;var Jt=(A+(d=d+Math.imul(Ne,Je)|0)|0)+((8191&(i=(i=i+Math.imul(Ne,at)|0)+Math.imul(Me,Je)|0))<<13)|0;A=((m=m+Math.imul(Me,at)|0)+(i>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,d=Math.imul(Ve,Qe),i=(i=Math.imul(Ve,Ze))+Math.imul(Ke,Qe)|0,m=Math.imul(Ke,Ze);var tn=(A+(d=d+Math.imul(De,Je)|0)|0)+((8191&(i=(i=i+Math.imul(De,at)|0)+Math.imul(Fe,Je)|0))<<13)|0;A=((m=m+Math.imul(Fe,at)|0)+(i>>>13)|0)+(tn>>>26)|0,tn&=67108863;var Sn=(A+(d=Math.imul(Ve,Je))|0)+((8191&(i=(i=Math.imul(Ve,at))+Math.imul(Ke,Je)|0))<<13)|0;return A=((m=Math.imul(Ke,at))+(i>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,M[0]=un,M[1]=Vt,M[2]=Ht,M[3]=bn,M[4]=dn,M[5]=pn,M[6]=In,M[7]=rn,M[8]=Mn,M[9]=$t,M[10]=Nt,M[11]=xn,M[12]=wn,M[13]=_n,M[14]=xt,M[15]=Rn,M[16]=Jt,M[17]=tn,M[18]=Sn,0!==A&&(M[19]=A,l.length++),l};function k(R,r,s){return(new O).mulp(R,r,s)}function O(R,r){this.x=R,this.y=r}Math.imul||(I=w),u.prototype.mulTo=function(r,s){var a=this.length+r.length;return 10===this.length&&10===r.length?I(this,r,s):a<63?w(this,r,s):a<1024?function(R,r,s){s.negative=r.negative^R.negative,s.length=R.length+r.length;for(var l=0,a=0,f=0;f<s.length-1;f++){var M=a;a=0;for(var A=67108863&l,d=Math.min(f,r.length-1),i=Math.max(0,f-R.length+1);i<=d;i++){var J=(0|R.words[f-i])*(0|r.words[i]),ce=67108863&J;A=67108863&(ce=ce+A|0),a+=(M=(M=M+(J/67108864|0)|0)+(ce>>>26)|0)>>>26,M&=67108863}s.words[f]=A,l=M,M=a}return 0!==l?s.words[f]=l:s.length--,s.strip()}(this,r,s):k(this,r,s)},O.prototype.makeRBT=function(r){for(var s=new Array(r),l=u.prototype._countBits(r)-1,a=0;a<r;a++)s[a]=this.revBin(a,l,r);return s},O.prototype.revBin=function(r,s,l){if(0===r||r===l-1)return r;for(var a=0,f=0;f<s;f++)a|=(1&r)<<s-f-1,r>>=1;return a},O.prototype.permute=function(r,s,l,a,f,M){for(var A=0;A<M;A++)a[A]=s[r[A]],f[A]=l[r[A]]},O.prototype.transform=function(r,s,l,a,f,M){this.permute(M,r,s,l,a,f);for(var A=1;A<f;A<<=1)for(var d=A<<1,i=Math.cos(2*Math.PI/d),m=Math.sin(2*Math.PI/d),q=0;q<f;q+=d)for(var z=i,J=m,ce=0;ce<A;ce++){var se=l[q+ce],he=a[q+ce],ve=l[q+ce+A],ae=a[q+ce+A],de=z*ve-J*ae;ae=z*ae+J*ve,l[q+ce]=se+(ve=de),a[q+ce]=he+ae,l[q+ce+A]=se-ve,a[q+ce+A]=he-ae,ce!==d&&(de=i*z-m*J,J=i*J+m*z,z=de)}},O.prototype.guessLen13b=function(r,s){var l=1|Math.max(s,r),a=1&l,f=0;for(l=l/2|0;l;l>>>=1)f++;return 1<<f+1+a},O.prototype.conjugate=function(r,s,l){if(!(l<=1))for(var a=0;a<l/2;a++){var f=r[a];r[a]=r[l-a-1],r[l-a-1]=f,f=s[a],s[a]=-s[l-a-1],s[l-a-1]=-f}},O.prototype.normalize13b=function(r,s){for(var l=0,a=0;a<s/2;a++){var f=8192*Math.round(r[2*a+1]/s)+Math.round(r[2*a]/s)+l;r[a]=67108863&f,l=f<67108864?0:f/67108864|0}return r},O.prototype.convert13b=function(r,s,l,a){for(var f=0,M=0;M<s;M++)l[2*M]=8191&(f+=0|r[M]),l[2*M+1]=8191&(f>>>=13),f>>>=13;for(M=2*s;M<a;++M)l[M]=0;y(0===f),y(0==(-8192&f))},O.prototype.stub=function(r){for(var s=new Array(r),l=0;l<r;l++)s[l]=0;return s},O.prototype.mulp=function(r,s,l){var a=2*this.guessLen13b(r.length,s.length),f=this.makeRBT(a),M=this.stub(a),A=new Array(a),d=new Array(a),i=new Array(a),m=new Array(a),q=new Array(a),z=new Array(a),J=l.words;J.length=a,this.convert13b(r.words,r.length,A,a),this.convert13b(s.words,s.length,m,a),this.transform(A,M,d,i,a,f),this.transform(m,M,q,z,a,f);for(var ce=0;ce<a;ce++){var se=d[ce]*q[ce]-i[ce]*z[ce];i[ce]=d[ce]*z[ce]+i[ce]*q[ce],d[ce]=se}return this.conjugate(d,i,a),this.transform(d,i,J,M,a,f),this.conjugate(J,M,a),this.normalize13b(J,a),l.negative=r.negative^s.negative,l.length=r.length+s.length,l.strip()},u.prototype.mul=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),this.mulTo(r,s)},u.prototype.mulf=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),k(this,r,s)},u.prototype.imul=function(r){return this.clone().mulTo(r,this)},u.prototype.imuln=function(r){y("number"==typeof r),y(r<67108864);for(var s=0,l=0;l<this.length;l++){var a=(0|this.words[l])*r,f=(67108863&a)+(67108863&s);s>>=26,s+=a/67108864|0,s+=f>>>26,this.words[l]=67108863&f}return 0!==s&&(this.words[l]=s,this.length++),this},u.prototype.muln=function(r){return this.clone().imuln(r)},u.prototype.sqr=function(){return this.mul(this)},u.prototype.isqr=function(){return this.imul(this.clone())},u.prototype.pow=function(r){var s=function(R){for(var r=new Array(R.bitLength()),s=0;s<r.length;s++){var a=s%26;r[s]=(R.words[s/26|0]&1<<a)>>>a}return r}(r);if(0===s.length)return new u(1);for(var l=this,a=0;a<s.length&&0===s[a];a++,l=l.sqr());if(++a<s.length)for(var f=l.sqr();a<s.length;a++,f=f.sqr())0!==s[a]&&(l=l.mul(f));return l},u.prototype.iushln=function(r){y("number"==typeof r&&r>=0);var f,s=r%26,l=(r-s)/26,a=67108863>>>26-s<<26-s;if(0!==s){var M=0;for(f=0;f<this.length;f++){var A=this.words[f]&a;this.words[f]=(0|this.words[f])-A<<s|M,M=A>>>26-s}M&&(this.words[f]=M,this.length++)}if(0!==l){for(f=this.length-1;f>=0;f--)this.words[f+l]=this.words[f];for(f=0;f<l;f++)this.words[f]=0;this.length+=l}return this.strip()},u.prototype.ishln=function(r){return y(0===this.negative),this.iushln(r)},u.prototype.iushrn=function(r,s,l){var a;y("number"==typeof r&&r>=0),a=s?(s-s%26)/26:0;var f=r%26,M=Math.min((r-f)/26,this.length),A=67108863^67108863>>>f<<f,d=l;if(a-=M,a=Math.max(0,a),d){for(var i=0;i<M;i++)d.words[i]=this.words[i];d.length=M}if(0!==M)if(this.length>M)for(this.length-=M,i=0;i<this.length;i++)this.words[i]=this.words[i+M];else this.words[0]=0,this.length=1;var m=0;for(i=this.length-1;i>=0&&(0!==m||i>=a);i--){var q=0|this.words[i];this.words[i]=m<<26-f|q>>>f,m=q&A}return d&&0!==m&&(d.words[d.length++]=m),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},u.prototype.ishrn=function(r,s,l){return y(0===this.negative),this.iushrn(r,s,l)},u.prototype.shln=function(r){return this.clone().ishln(r)},u.prototype.ushln=function(r){return this.clone().iushln(r)},u.prototype.shrn=function(r){return this.clone().ishrn(r)},u.prototype.ushrn=function(r){return this.clone().iushrn(r)},u.prototype.testn=function(r){y("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return!(this.length<=l||!(this.words[l]&1<<s))},u.prototype.imaskn=function(r){y("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return y(0===this.negative,"imaskn works only with positive numbers"),this.length<=l?this:(0!==s&&l++,this.length=Math.min(l,this.length),0!==s&&(this.words[this.length-1]&=67108863^67108863>>>s<<s),this.strip())},u.prototype.maskn=function(r){return this.clone().imaskn(r)},u.prototype.iaddn=function(r){return y("number"==typeof r),y(r<67108864),r<0?this.isubn(-r):0!==this.negative?1===this.length&&(0|this.words[0])<r?(this.words[0]=r-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(r),this.negative=1,this):this._iaddn(r)},u.prototype._iaddn=function(r){this.words[0]+=r;for(var s=0;s<this.length&&this.words[s]>=67108864;s++)this.words[s]-=67108864,s===this.length-1?this.words[s+1]=1:this.words[s+1]++;return this.length=Math.max(this.length,s+1),this},u.prototype.isubn=function(r){if(y("number"==typeof r),y(r<67108864),r<0)return this.iaddn(-r);if(0!==this.negative)return this.negative=0,this.iaddn(r),this.negative=1,this;if(this.words[0]-=r,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var s=0;s<this.length&&this.words[s]<0;s++)this.words[s]+=67108864,this.words[s+1]-=1;return this.strip()},u.prototype.addn=function(r){return this.clone().iaddn(r)},u.prototype.subn=function(r){return this.clone().isubn(r)},u.prototype.iabs=function(){return this.negative=0,this},u.prototype.abs=function(){return this.clone().iabs()},u.prototype._ishlnsubmul=function(r,s,l){var f;this._expand(r.length+l);var M,A=0;for(f=0;f<r.length;f++){M=(0|this.words[f+l])+A;var d=(0|r.words[f])*s;A=((M-=67108863&d)>>26)-(d/67108864|0),this.words[f+l]=67108863&M}for(;f<this.length-l;f++)A=(M=(0|this.words[f+l])+A)>>26,this.words[f+l]=67108863&M;if(0===A)return this.strip();for(y(-1===A),A=0,f=0;f<this.length;f++)A=(M=-(0|this.words[f])+A)>>26,this.words[f]=67108863&M;return this.negative=1,this.strip()},u.prototype._wordDiv=function(r,s){var l,a=this.clone(),f=r,M=0|f.words[f.length-1];0!=(l=26-this._countBits(M))&&(f=f.ushln(l),a.iushln(l),M=0|f.words[f.length-1]);var i,d=a.length-f.length;if("mod"!==s){(i=new u(null)).length=d+1,i.words=new Array(i.length);for(var m=0;m<i.length;m++)i.words[m]=0}var q=a.clone()._ishlnsubmul(f,1,d);0===q.negative&&(a=q,i&&(i.words[d]=1));for(var z=d-1;z>=0;z--){var J=67108864*(0|a.words[f.length+z])+(0|a.words[f.length+z-1]);for(J=Math.min(J/M|0,67108863),a._ishlnsubmul(f,J,z);0!==a.negative;)J--,a.negative=0,a._ishlnsubmul(f,1,z),a.isZero()||(a.negative^=1);i&&(i.words[z]=J)}return i&&i.strip(),a.strip(),"div"!==s&&0!==l&&a.iushrn(l),{div:i||null,mod:a}},u.prototype.divmod=function(r,s,l){return y(!r.isZero()),this.isZero()?{div:new u(0),mod:new u(0)}:0!==this.negative&&0===r.negative?(M=this.neg().divmod(r,s),"mod"!==s&&(a=M.div.neg()),"div"!==s&&(f=M.mod.neg(),l&&0!==f.negative&&f.iadd(r)),{div:a,mod:f}):0===this.negative&&0!==r.negative?(M=this.divmod(r.neg(),s),"mod"!==s&&(a=M.div.neg()),{div:a,mod:M.mod}):0!=(this.negative&r.negative)?(M=this.neg().divmod(r.neg(),s),"div"!==s&&(f=M.mod.neg(),l&&0!==f.negative&&f.isub(r)),{div:M.div,mod:f}):r.length>this.length||this.cmp(r)<0?{div:new u(0),mod:this}:1===r.length?"div"===s?{div:this.divn(r.words[0]),mod:null}:"mod"===s?{div:null,mod:new u(this.modn(r.words[0]))}:{div:this.divn(r.words[0]),mod:new u(this.modn(r.words[0]))}:this._wordDiv(r,s);var a,f,M},u.prototype.div=function(r){return this.divmod(r,"div",!1).div},u.prototype.mod=function(r){return this.divmod(r,"mod",!1).mod},u.prototype.umod=function(r){return this.divmod(r,"mod",!0).mod},u.prototype.divRound=function(r){var s=this.divmod(r);if(s.mod.isZero())return s.div;var l=0!==s.div.negative?s.mod.isub(r):s.mod,a=r.ushrn(1),f=r.andln(1),M=l.cmp(a);return M<0||1===f&&0===M?s.div:0!==s.div.negative?s.div.isubn(1):s.div.iaddn(1)},u.prototype.modn=function(r){y(r<=67108863);for(var s=(1<<26)%r,l=0,a=this.length-1;a>=0;a--)l=(s*l+(0|this.words[a]))%r;return l},u.prototype.idivn=function(r){y(r<=67108863);for(var s=0,l=this.length-1;l>=0;l--){var a=(0|this.words[l])+67108864*s;this.words[l]=a/r|0,s=a%r}return this.strip()},u.prototype.divn=function(r){return this.clone().idivn(r)},u.prototype.egcd=function(r){y(0===r.negative),y(!r.isZero());var s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),M=new u(0),A=new u(1),d=0;s.isEven()&&l.isEven();)s.iushrn(1),l.iushrn(1),++d;for(var i=l.clone(),m=s.clone();!s.isZero();){for(var q=0,z=1;0==(s.words[0]&z)&&q<26;++q,z<<=1);if(q>0)for(s.iushrn(q);q-- >0;)(a.isOdd()||f.isOdd())&&(a.iadd(i),f.isub(m)),a.iushrn(1),f.iushrn(1);for(var J=0,ce=1;0==(l.words[0]&ce)&&J<26;++J,ce<<=1);if(J>0)for(l.iushrn(J);J-- >0;)(M.isOdd()||A.isOdd())&&(M.iadd(i),A.isub(m)),M.iushrn(1),A.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(M),f.isub(A)):(l.isub(s),M.isub(a),A.isub(f))}return{a:M,b:A,gcd:l.iushln(d)}},u.prototype._invmp=function(r){y(0===r.negative),y(!r.isZero());var q,s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),M=l.clone();s.cmpn(1)>0&&l.cmpn(1)>0;){for(var A=0,d=1;0==(s.words[0]&d)&&A<26;++A,d<<=1);if(A>0)for(s.iushrn(A);A-- >0;)a.isOdd()&&a.iadd(M),a.iushrn(1);for(var i=0,m=1;0==(l.words[0]&m)&&i<26;++i,m<<=1);if(i>0)for(l.iushrn(i);i-- >0;)f.isOdd()&&f.iadd(M),f.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(f)):(l.isub(s),f.isub(a))}return(q=0===s.cmpn(1)?a:f).cmpn(0)<0&&q.iadd(r),q},u.prototype.gcd=function(r){if(this.isZero())return r.abs();if(r.isZero())return this.abs();var s=this.clone(),l=r.clone();s.negative=0,l.negative=0;for(var a=0;s.isEven()&&l.isEven();a++)s.iushrn(1),l.iushrn(1);for(;;){for(;s.isEven();)s.iushrn(1);for(;l.isEven();)l.iushrn(1);var f=s.cmp(l);if(f<0){var M=s;s=l,l=M}else if(0===f||0===l.cmpn(1))break;s.isub(l)}return l.iushln(a)},u.prototype.invm=function(r){return this.egcd(r).a.umod(r)},u.prototype.isEven=function(){return 0==(1&this.words[0])},u.prototype.isOdd=function(){return 1==(1&this.words[0])},u.prototype.andln=function(r){return this.words[0]&r},u.prototype.bincn=function(r){y("number"==typeof r);var s=r%26,l=(r-s)/26,a=1<<s;if(this.length<=l)return this._expand(l+1),this.words[l]|=a,this;for(var f=a,M=l;0!==f&&M<this.length;M++){var A=0|this.words[M];f=(A+=f)>>>26,this.words[M]=A&=67108863}return 0!==f&&(this.words[M]=f,this.length++),this},u.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},u.prototype.cmpn=function(r){var l,s=r<0;if(0!==this.negative&&!s)return-1;if(0===this.negative&&s)return 1;if(this.strip(),this.length>1)l=1;else{s&&(r=-r),y(r<=67108863,"Number is too big");var a=0|this.words[0];l=a===r?0:a<r?-1:1}return 0!==this.negative?0|-l:l},u.prototype.cmp=function(r){if(0!==this.negative&&0===r.negative)return-1;if(0===this.negative&&0!==r.negative)return 1;var s=this.ucmp(r);return 0!==this.negative?0|-s:s},u.prototype.ucmp=function(r){if(this.length>r.length)return 1;if(this.length<r.length)return-1;for(var s=0,l=this.length-1;l>=0;l--){var a=0|this.words[l],f=0|r.words[l];if(a!==f){a<f?s=-1:a>f&&(s=1);break}}return s},u.prototype.gtn=function(r){return 1===this.cmpn(r)},u.prototype.gt=function(r){return 1===this.cmp(r)},u.prototype.gten=function(r){return this.cmpn(r)>=0},u.prototype.gte=function(r){return this.cmp(r)>=0},u.prototype.ltn=function(r){return-1===this.cmpn(r)},u.prototype.lt=function(r){return-1===this.cmp(r)},u.prototype.lten=function(r){return this.cmpn(r)<=0},u.prototype.lte=function(r){return this.cmp(r)<=0},u.prototype.eqn=function(r){return 0===this.cmpn(r)},u.prototype.eq=function(r){return 0===this.cmp(r)},u.red=function(r){return new K(r)},u.prototype.toRed=function(r){return y(!this.red,"Already a number in reduction context"),y(0===this.negative,"red works only with positives"),r.convertTo(this)._forceRed(r)},u.prototype.fromRed=function(){return y(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},u.prototype._forceRed=function(r){return this.red=r,this},u.prototype.forceRed=function(r){return y(!this.red,"Already a number in reduction context"),this._forceRed(r)},u.prototype.redAdd=function(r){return y(this.red,"redAdd works only with red numbers"),this.red.add(this,r)},u.prototype.redIAdd=function(r){return y(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,r)},u.prototype.redSub=function(r){return y(this.red,"redSub works only with red numbers"),this.red.sub(this,r)},u.prototype.redISub=function(r){return y(this.red,"redISub works only with red numbers"),this.red.isub(this,r)},u.prototype.redShl=function(r){return y(this.red,"redShl works only with red numbers"),this.red.shl(this,r)},u.prototype.redMul=function(r){return y(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.mul(this,r)},u.prototype.redIMul=function(r){return y(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.imul(this,r)},u.prototype.redSqr=function(){return y(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},u.prototype.redISqr=function(){return y(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},u.prototype.redSqrt=function(){return y(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},u.prototype.redInvm=function(){return y(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},u.prototype.redNeg=function(){return y(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},u.prototype.redPow=function(r){return y(this.red&&!r.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,r)};var V={k256:null,p224:null,p192:null,p25519:null};function B(R,r){this.name=R,this.p=new u(r,16),this.n=this.p.bitLength(),this.k=new u(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function U(){B.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function j(){B.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function W(){B.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function X(){B.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function K(R){if("string"==typeof R){var r=u._prime(R);this.m=r.p,this.prime=r}else y(R.gtn(1),"modulus must be greater than 1"),this.m=R,this.prime=null}function ge(R){K.call(this,R),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new u(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}B.prototype._tmp=function(){var r=new u(null);return r.words=new Array(Math.ceil(this.n/13)),r},B.prototype.ireduce=function(r){var l,s=r;do{this.split(s,this.tmp),l=(s=(s=this.imulK(s)).iadd(this.tmp)).bitLength()}while(l>this.n);var a=l<this.n?-1:s.ucmp(this.p);return 0===a?(s.words[0]=0,s.length=1):a>0?s.isub(this.p):void 0!==s.strip?s.strip():s._strip(),s},B.prototype.split=function(r,s){r.iushrn(this.n,0,s)},B.prototype.imulK=function(r){return r.imul(this.k)},x(U,B),U.prototype.split=function(r,s){for(var l=4194303,a=Math.min(r.length,9),f=0;f<a;f++)s.words[f]=r.words[f];if(s.length=a,r.length<=9)return r.words[0]=0,void(r.length=1);var M=r.words[9];for(s.words[s.length++]=M&l,f=10;f<r.length;f++){var A=0|r.words[f];r.words[f-10]=(A&l)<<4|M>>>22,M=A}r.words[f-10]=M>>>=22,r.length-=0===M&&r.length>10?10:9},U.prototype.imulK=function(r){r.words[r.length]=0,r.words[r.length+1]=0,r.length+=2;for(var s=0,l=0;l<r.length;l++){var a=0|r.words[l];r.words[l]=67108863&(s+=977*a),s=64*a+(s/67108864|0)}return 0===r.words[r.length-1]&&(r.length--,0===r.words[r.length-1]&&r.length--),r},x(j,B),x(W,B),x(X,B),X.prototype.imulK=function(r){for(var s=0,l=0;l<r.length;l++){var a=19*(0|r.words[l])+s,f=67108863&a;a>>>=26,r.words[l]=f,s=a}return 0!==s&&(r.words[r.length++]=s),r},u._prime=function(r){if(V[r])return V[r];var s;if("k256"===r)s=new U;else if("p224"===r)s=new j;else if("p192"===r)s=new W;else{if("p25519"!==r)throw new Error("Unknown prime "+r);s=new X}return V[r]=s,s},K.prototype._verify1=function(r){y(0===r.negative,"red works only with positives"),y(r.red,"red works only with red numbers")},K.prototype._verify2=function(r,s){y(0==(r.negative|s.negative),"red works only with positives"),y(r.red&&r.red===s.red,"red works only with red numbers")},K.prototype.imod=function(r){return this.prime?this.prime.ireduce(r)._forceRed(this):r.umod(this.m)._forceRed(this)},K.prototype.neg=function(r){return r.isZero()?r.clone():this.m.sub(r)._forceRed(this)},K.prototype.add=function(r,s){this._verify2(r,s);var l=r.add(s);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},K.prototype.iadd=function(r,s){this._verify2(r,s);var l=r.iadd(s);return l.cmp(this.m)>=0&&l.isub(this.m),l},K.prototype.sub=function(r,s){this._verify2(r,s);var l=r.sub(s);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},K.prototype.isub=function(r,s){this._verify2(r,s);var l=r.isub(s);return l.cmpn(0)<0&&l.iadd(this.m),l},K.prototype.shl=function(r,s){return this._verify1(r),this.imod(r.ushln(s))},K.prototype.imul=function(r,s){return this._verify2(r,s),this.imod(r.imul(s))},K.prototype.mul=function(r,s){return this._verify2(r,s),this.imod(r.mul(s))},K.prototype.isqr=function(r){return this.imul(r,r.clone())},K.prototype.sqr=function(r){return this.mul(r,r)},K.prototype.sqrt=function(r){if(r.isZero())return r.clone();var s=this.m.andln(3);if(y(s%2==1),3===s){var l=this.m.add(new u(1)).iushrn(2);return this.pow(r,l)}for(var a=this.m.subn(1),f=0;!a.isZero()&&0===a.andln(1);)f++,a.iushrn(1);y(!a.isZero());var M=new u(1).toRed(this),A=M.redNeg(),d=this.m.subn(1).iushrn(1),i=this.m.bitLength();for(i=new u(2*i*i).toRed(this);0!==this.pow(i,d).cmp(A);)i.redIAdd(A);for(var m=this.pow(i,a),q=this.pow(r,a.addn(1).iushrn(1)),z=this.pow(r,a),J=f;0!==z.cmp(M);){for(var ce=z,se=0;0!==ce.cmp(M);se++)ce=ce.redSqr();y(se<J);var he=this.pow(m,new u(1).iushln(J-se-1));q=q.redMul(he),m=he.redSqr(),z=z.redMul(m),J=se}return q},K.prototype.invm=function(r){var s=r._invmp(this.m);return 0!==s.negative?(s.negative=0,this.imod(s).redNeg()):this.imod(s)},K.prototype.pow=function(r,s){if(s.isZero())return new u(1).toRed(this);if(0===s.cmpn(1))return r.clone();var a=new Array(16);a[0]=new u(1).toRed(this),a[1]=r;for(var f=2;f<a.length;f++)a[f]=this.mul(a[f-1],r);var M=a[0],A=0,d=0,i=s.bitLength()%26;for(0===i&&(i=26),f=s.length-1;f>=0;f--){for(var m=s.words[f],q=i-1;q>=0;q--){var z=m>>q&1;M!==a[0]&&(M=this.sqr(M)),0!==z||0!==A?(A<<=1,A|=z,(4==++d||0===f&&0===q)&&(M=this.mul(M,a[A]),d=0,A=0)):d=0}i=26}return M},K.prototype.convertTo=function(r){var s=r.umod(this.m);return s===r?s.clone():s},K.prototype.convertFrom=function(r){var s=r.clone();return s.red=null,s},u.mont=function(r){return new ge(r)},x(ge,K),ge.prototype.convertTo=function(r){return this.imod(r.ushln(this.shift))},ge.prototype.convertFrom=function(r){var s=this.imod(r.mul(this.rinv));return s.red=null,s},ge.prototype.imul=function(r,s){if(r.isZero()||s.isZero())return r.words[0]=0,r.length=1,r;var l=r.imul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),M=f;return f.cmp(this.m)>=0?M=f.isub(this.m):f.cmpn(0)<0&&(M=f.iadd(this.m)),M._forceRed(this)},ge.prototype.mul=function(r,s){if(r.isZero()||s.isZero())return new u(0)._forceRed(this);var l=r.mul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),M=f;return f.cmp(this.m)>=0?M=f.isub(this.m):f.cmpn(0)<0&&(M=f.iadd(this.m)),M._forceRed(this)},ge.prototype.invm=function(r){return this.imod(r._invmp(this.m).mul(this.r2))._forceRed(this)}}(Y=T.nmd(Y),this)},3105:Y=>{"use strict";var p,L="object"==typeof Reflect?Reflect:null,T=L&&"function"==typeof L.apply?L.apply:function(B,U,j){return Function.prototype.apply.call(B,U,j)};p=L&&"function"==typeof L.ownKeys?L.ownKeys:Object.getOwnPropertySymbols?function(B){return Object.getOwnPropertyNames(B).concat(Object.getOwnPropertySymbols(B))}:function(B){return Object.getOwnPropertyNames(B)};var y=Number.isNaN||function(B){return B!=B};function x(){x.init.call(this)}Y.exports=x,Y.exports.once=function(V,B){return new Promise(function(U,j){function W(K){V.removeListener(B,X),j(K)}function X(){"function"==typeof V.removeListener&&V.removeListener("error",W),U([].slice.call(arguments))}O(V,B,X,{once:!0}),"error"!==B&&function(V,B,U){"function"==typeof V.on&&O(V,"error",B,{once:!0})}(V,W)})},x.EventEmitter=x,x.prototype._events=void 0,x.prototype._eventsCount=0,x.prototype._maxListeners=void 0;var u=10;function g(V){if("function"!=typeof V)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof V)}function C(V){return void 0===V._maxListeners?x.defaultMaxListeners:V._maxListeners}function P(V,B,U,j){var W,X,K;if(g(U),void 0===(X=V._events)?(X=V._events=Object.create(null),V._eventsCount=0):(void 0!==X.newListener&&(V.emit("newListener",B,U.listener?U.listener:U),X=V._events),K=X[B]),void 0===K)K=X[B]=U,++V._eventsCount;else if("function"==typeof K?K=X[B]=j?[U,K]:[K,U]:j?K.unshift(U):K.push(U),(W=C(V))>0&&K.length>W&&!K.warned){K.warned=!0;var ge=new Error("Possible EventEmitter memory leak detected. "+K.length+" "+String(B)+" listeners added. Use emitter.setMaxListeners() to increase limit");ge.name="MaxListenersExceededWarning",ge.emitter=V,ge.type=B,ge.count=K.length,function(V){console&&console.warn&&console.warn(V)}(ge)}return V}function E(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function v(V,B,U){var j={fired:!1,wrapFn:void 0,target:V,type:B,listener:U},W=E.bind(j);return W.listener=U,j.wrapFn=W,W}function h(V,B,U){var j=V._events;if(void 0===j)return[];var W=j[B];return void 0===W?[]:"function"==typeof W?U?[W.listener||W]:[W]:U?function(V){for(var B=new Array(V.length),U=0;U<B.length;++U)B[U]=V[U].listener||V[U];return B}(W):b(W,W.length)}function _(V){var B=this._events;if(void 0!==B){var U=B[V];if("function"==typeof U)return 1;if(void 0!==U)return U.length}return 0}function b(V,B){for(var U=new Array(B),j=0;j<B;++j)U[j]=V[j];return U}function O(V,B,U,j){if("function"==typeof V.on)j.once?V.once(B,U):V.on(B,U);else{if("function"!=typeof V.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof V);V.addEventListener(B,function W(X){j.once&&V.removeEventListener(B,W),U(X)})}}Object.defineProperty(x,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(V){if("number"!=typeof V||V<0||y(V))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+V+".");u=V}}),x.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},x.prototype.setMaxListeners=function(B){if("number"!=typeof B||B<0||y(B))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+B+".");return this._maxListeners=B,this},x.prototype.getMaxListeners=function(){return C(this)},x.prototype.emit=function(B){for(var U=[],j=1;j<arguments.length;j++)U.push(arguments[j]);var W="error"===B,X=this._events;if(void 0!==X)W=W&&void 0===X.error;else if(!W)return!1;if(W){var K;if(U.length>0&&(K=U[0]),K instanceof Error)throw K;var ge=new Error("Unhandled error."+(K?" ("+K.message+")":""));throw ge.context=K,ge}var R=X[B];if(void 0===R)return!1;if("function"==typeof R)T(R,this,U);else{var r=R.length,s=b(R,r);for(j=0;j<r;++j)T(s[j],this,U)}return!0},x.prototype.on=x.prototype.addListener=function(B,U){return P(this,B,U,!1)},x.prototype.prependListener=function(B,U){return P(this,B,U,!0)},x.prototype.once=function(B,U){return g(U),this.on(B,v(this,B,U)),this},x.prototype.prependOnceListener=function(B,U){return g(U),this.prependListener(B,v(this,B,U)),this},x.prototype.off=x.prototype.removeListener=function(B,U){var j,W,X,K,ge;if(g(U),void 0===(W=this._events))return this;if(void 0===(j=W[B]))return this;if(j===U||j.listener===U)0==--this._eventsCount?this._events=Object.create(null):(delete W[B],W.removeListener&&this.emit("removeListener",B,j.listener||U));else if("function"!=typeof j){for(X=-1,K=j.length-1;K>=0;K--)if(j[K]===U||j[K].listener===U){ge=j[K].listener,X=K;break}if(X<0)return this;0===X?j.shift():function(V,B){for(;B+1<V.length;B++)V[B]=V[B+1];V.pop()}(j,X),1===j.length&&(W[B]=j[0]),void 0!==W.removeListener&&this.emit("removeListener",B,ge||U)}return this},x.prototype.removeAllListeners=function(B){var U,j,W;if(void 0===(j=this._events))return this;if(void 0===j.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==j[B]&&(0==--this._eventsCount?this._events=Object.create(null):delete j[B]),this;if(0===arguments.length){var K,X=Object.keys(j);for(W=0;W<X.length;++W)"removeListener"!==(K=X[W])&&this.removeAllListeners(K);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(U=j[B]))this.removeListener(B,U);else if(void 0!==U)for(W=U.length-1;W>=0;W--)this.removeListener(B,U[W]);return this},x.prototype.listeners=function(B){return h(this,B,!0)},x.prototype.rawListeners=function(B){return h(this,B,!1)},x.listenerCount=function(V,B){return"function"==typeof V.listenerCount?V.listenerCount(B):_.call(V,B)},x.prototype.listenerCount=_,x.prototype.eventNames=function(){return this._eventsCount>0?p(this._events):[]}},2367:(Y,L,T)=>{var p=T(5859).Buffer,N=T(3264);Y.exports=function(x,u,g,C){if(p.isBuffer(x)||(x=p.from(x,"binary")),u&&(p.isBuffer(u)||(u=p.from(u,"binary")),8!==u.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var P=g/8,E=p.alloc(P),v=p.alloc(C||0),h=p.alloc(0);P>0||C>0;){var _=new N;_.update(h),_.update(x),u&&_.update(u),h=_.digest();var b=0;if(P>0){var w=E.length-P;b=Math.min(P,h.length),h.copy(E,w,0,b),P-=b}if(b<h.length&&C>0){var I=v.length-C,D=Math.min(C,h.length-b);h.copy(v,I,b,b+D),C-=D}}return h.fill(0),{key:E,iv:v}}},5414:(Y,L,T)=>{"use strict";var p=T(5036).Buffer,N=T(8300).Transform;function u(g){N.call(this),this._block=p.allocUnsafe(g),this._blockSize=g,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}T(9879)(u,N),u.prototype._transform=function(g,C,P){var E=null;try{this.update(g,C)}catch(v){E=v}P(E)},u.prototype._flush=function(g){var C=null;try{this.push(this.digest())}catch(P){C=P}g(C)},u.prototype.update=function(g,C){if(function(g,C){if(!p.isBuffer(g)&&"string"!=typeof g)throw new TypeError("Data must be a string or a buffer")}(g),this._finalized)throw new Error("Digest already called");p.isBuffer(g)||(g=p.from(g,C));for(var P=this._block,E=0;this._blockOffset+g.length-E>=this._blockSize;){for(var v=this._blockOffset;v<this._blockSize;)P[v++]=g[E++];this._update(),this._blockOffset=0}for(;E<g.length;)P[this._blockOffset++]=g[E++];for(var h=0,_=8*g.length;_>0;++h)this._length[h]+=_,(_=this._length[h]/4294967296|0)>0&&(this._length[h]-=4294967296*_);return this},u.prototype._update=function(){throw new Error("_update is not implemented")},u.prototype.digest=function(g){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var C=this._digest();void 0!==g&&(C=C.toString(g)),this._block.fill(0),this._blockOffset=0;for(var P=0;P<4;++P)this._length[P]=0;return C},u.prototype._digest=function(){throw new Error("_digest is not implemented")},Y.exports=u},5036:(Y,L,T)=>{var p=T(3875),N=p.Buffer;function y(u,g){for(var C in u)g[C]=u[C]}function x(u,g,C){return N(u,g,C)}N.from&&N.alloc&&N.allocUnsafe&&N.allocUnsafeSlow?Y.exports=p:(y(p,L),L.Buffer=x),x.prototype=Object.create(N.prototype),y(N,x),x.from=function(u,g,C){if("number"==typeof u)throw new TypeError("Argument must not be a number");return N(u,g,C)},x.alloc=function(u,g,C){if("number"!=typeof u)throw new TypeError("Argument must be a number");var P=N(u);return void 0!==g?"string"==typeof C?P.fill(g,C):P.fill(g):P.fill(0),P},x.allocUnsafe=function(u){if("number"!=typeof u)throw new TypeError("Argument must be a number");return N(u)},x.allocUnsafeSlow=function(u){if("number"!=typeof u)throw new TypeError("Argument must be a number");return p.SlowBuffer(u)}},7909:(Y,L,T)=>{var p=L;p.utils=T(8291),p.common=T(1393),p.sha=T(2221),p.ripemd=T(1960),p.hmac=T(1905),p.sha1=p.sha.sha1,p.sha256=p.sha.sha256,p.sha224=p.sha.sha224,p.sha384=p.sha.sha384,p.sha512=p.sha.sha512,p.ripemd160=p.ripemd.ripemd160},1393:(Y,L,T)=>{"use strict";var p=T(8291),N=T(6055);function y(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}L.BlockHash=y,y.prototype.update=function(u,g){if(u=p.toArray(u,g),this.pending=this.pending?this.pending.concat(u):u,this.pendingTotal+=u.length,this.pending.length>=this._delta8){var C=(u=this.pending).length%this._delta8;this.pending=u.slice(u.length-C,u.length),0===this.pending.length&&(this.pending=null),u=p.join32(u,0,u.length-C,this.endian);for(var P=0;P<u.length;P+=this._delta32)this._update(u,P,P+this._delta32)}return this},y.prototype.digest=function(u){return this.update(this._pad()),N(null===this.pending),this._digest(u)},y.prototype._pad=function(){var u=this.pendingTotal,g=this._delta8,C=g-(u+this.padLength)%g,P=new Array(C+this.padLength);P[0]=128;for(var E=1;E<C;E++)P[E]=0;if(u<<=3,"big"===this.endian){for(var v=8;v<this.padLength;v++)P[E++]=0;P[E++]=0,P[E++]=0,P[E++]=0,P[E++]=0,P[E++]=u>>>24&255,P[E++]=u>>>16&255,P[E++]=u>>>8&255,P[E++]=255&u}else for(P[E++]=255&u,P[E++]=u>>>8&255,P[E++]=u>>>16&255,P[E++]=u>>>24&255,P[E++]=0,P[E++]=0,P[E++]=0,P[E++]=0,v=8;v<this.padLength;v++)P[E++]=0;return P}},1905:(Y,L,T)=>{"use strict";var p=T(8291),N=T(6055);function y(x,u,g){if(!(this instanceof y))return new y(x,u,g);this.Hash=x,this.blockSize=x.blockSize/8,this.outSize=x.outSize/8,this.inner=null,this.outer=null,this._init(p.toArray(u,g))}Y.exports=y,y.prototype._init=function(u){u.length>this.blockSize&&(u=(new this.Hash).update(u).digest()),N(u.length<=this.blockSize);for(var g=u.length;g<this.blockSize;g++)u.push(0);for(g=0;g<u.length;g++)u[g]^=54;for(this.inner=(new this.Hash).update(u),g=0;g<u.length;g++)u[g]^=106;this.outer=(new this.Hash).update(u)},y.prototype.update=function(u,g){return this.inner.update(u,g),this},y.prototype.digest=function(u){return this.outer.update(this.inner.digest()),this.outer.digest(u)}},1960:(Y,L,T)=>{"use strict";var p=T(8291),N=T(1393),y=p.rotl32,x=p.sum32,u=p.sum32_3,g=p.sum32_4,C=N.BlockHash;function P(){if(!(this instanceof P))return new P;C.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function E(D,k,O,V){return D<=15?k^O^V:D<=31?k&O|~k&V:D<=47?(k|~O)^V:D<=63?k&V|O&~V:k^(O|~V)}function h(D){return D<=15?1352829926:D<=31?1548603684:D<=47?1836072691:D<=63?2053994217:0}p.inherits(P,C),L.ripemd160=P,P.blockSize=512,P.outSize=160,P.hmacStrength=192,P.padLength=64,P.prototype._update=function(k,O){for(var V=this.h[0],B=this.h[1],U=this.h[2],j=this.h[3],W=this.h[4],X=V,K=B,ge=U,R=j,r=W,s=0;s<80;s++){var l=x(y(g(V,E(s,B,U,j),k[_[s]+O],(D=s)<=15?0:D<=31?1518500249:D<=47?1859775393:D<=63?2400959708:2840853838),w[s]),W);V=W,W=j,j=y(U,10),U=B,B=l,l=x(y(g(X,E(79-s,K,ge,R),k[b[s]+O],h(s)),I[s]),r),X=r,r=R,R=y(ge,10),ge=K,K=l}var D;l=u(this.h[1],U,R),this.h[1]=u(this.h[2],j,r),this.h[2]=u(this.h[3],W,X),this.h[3]=u(this.h[4],V,K),this.h[4]=u(this.h[0],B,ge),this.h[0]=l},P.prototype._digest=function(k){return"hex"===k?p.toHex32(this.h,"little"):p.split32(this.h,"little")};var _=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],b=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],w=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],I=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},2221:(Y,L,T)=>{"use strict";L.sha1=T(3605),L.sha224=T(9643),L.sha256=T(6021),L.sha384=T(3513),L.sha512=T(4958)},3605:(Y,L,T)=>{"use strict";var p=T(8291),N=T(1393),y=T(8491),x=p.rotl32,u=p.sum32,g=p.sum32_5,C=y.ft_1,P=N.BlockHash,E=[1518500249,1859775393,2400959708,3395469782];function v(){if(!(this instanceof v))return new v;P.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}p.inherits(v,P),Y.exports=v,v.blockSize=512,v.outSize=160,v.hmacStrength=80,v.padLength=64,v.prototype._update=function(_,b){for(var w=this.W,I=0;I<16;I++)w[I]=_[b+I];for(;I<w.length;I++)w[I]=x(w[I-3]^w[I-8]^w[I-14]^w[I-16],1);var D=this.h[0],k=this.h[1],O=this.h[2],V=this.h[3],B=this.h[4];for(I=0;I<w.length;I++){var U=~~(I/20),j=g(x(D,5),C(U,k,O,V),B,w[I],E[U]);B=V,V=O,O=x(k,30),k=D,D=j}this.h[0]=u(this.h[0],D),this.h[1]=u(this.h[1],k),this.h[2]=u(this.h[2],O),this.h[3]=u(this.h[3],V),this.h[4]=u(this.h[4],B)},v.prototype._digest=function(_){return"hex"===_?p.toHex32(this.h,"big"):p.split32(this.h,"big")}},9643:(Y,L,T)=>{"use strict";var p=T(8291),N=T(6021);function y(){if(!(this instanceof y))return new y;N.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}p.inherits(y,N),Y.exports=y,y.blockSize=512,y.outSize=224,y.hmacStrength=192,y.padLength=64,y.prototype._digest=function(u){return"hex"===u?p.toHex32(this.h.slice(0,7),"big"):p.split32(this.h.slice(0,7),"big")}},6021:(Y,L,T)=>{"use strict";var p=T(8291),N=T(1393),y=T(8491),x=T(6055),u=p.sum32,g=p.sum32_4,C=p.sum32_5,P=y.ch32,E=y.maj32,v=y.s0_256,h=y.s1_256,_=y.g0_256,b=y.g1_256,w=N.BlockHash,I=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function D(){if(!(this instanceof D))return new D;w.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=I,this.W=new Array(64)}p.inherits(D,w),Y.exports=D,D.blockSize=512,D.outSize=256,D.hmacStrength=192,D.padLength=64,D.prototype._update=function(O,V){for(var B=this.W,U=0;U<16;U++)B[U]=O[V+U];for(;U<B.length;U++)B[U]=g(b(B[U-2]),B[U-7],_(B[U-15]),B[U-16]);var j=this.h[0],W=this.h[1],X=this.h[2],K=this.h[3],ge=this.h[4],R=this.h[5],r=this.h[6],s=this.h[7];for(x(this.k.length===B.length),U=0;U<B.length;U++){var l=C(s,h(ge),P(ge,R,r),this.k[U],B[U]),a=u(v(j),E(j,W,X));s=r,r=R,R=ge,ge=u(K,l),K=X,X=W,W=j,j=u(l,a)}this.h[0]=u(this.h[0],j),this.h[1]=u(this.h[1],W),this.h[2]=u(this.h[2],X),this.h[3]=u(this.h[3],K),this.h[4]=u(this.h[4],ge),this.h[5]=u(this.h[5],R),this.h[6]=u(this.h[6],r),this.h[7]=u(this.h[7],s)},D.prototype._digest=function(O){return"hex"===O?p.toHex32(this.h,"big"):p.split32(this.h,"big")}},3513:(Y,L,T)=>{"use strict";var p=T(8291),N=T(4958);function y(){if(!(this instanceof y))return new y;N.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}p.inherits(y,N),Y.exports=y,y.blockSize=1024,y.outSize=384,y.hmacStrength=192,y.padLength=128,y.prototype._digest=function(u){return"hex"===u?p.toHex32(this.h.slice(0,12),"big"):p.split32(this.h.slice(0,12),"big")}},4958:(Y,L,T)=>{"use strict";var p=T(8291),N=T(1393),y=T(6055),x=p.rotr64_hi,u=p.rotr64_lo,g=p.shr64_hi,C=p.shr64_lo,P=p.sum64,E=p.sum64_hi,v=p.sum64_lo,h=p.sum64_4_hi,_=p.sum64_4_lo,b=p.sum64_5_hi,w=p.sum64_5_lo,I=N.BlockHash,D=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function k(){if(!(this instanceof k))return new k;I.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=D,this.W=new Array(160)}function O(l,a,f,M,A){var d=l&f^~l&A;return d<0&&(d+=4294967296),d}function V(l,a,f,M,A,d){var i=a&M^~a&d;return i<0&&(i+=4294967296),i}function B(l,a,f,M,A){var d=l&f^l&A^f&A;return d<0&&(d+=4294967296),d}function U(l,a,f,M,A,d){var i=a&M^a&d^M&d;return i<0&&(i+=4294967296),i}function j(l,a){var d=x(l,a,28)^x(a,l,2)^x(a,l,7);return d<0&&(d+=4294967296),d}function W(l,a){var d=u(l,a,28)^u(a,l,2)^u(a,l,7);return d<0&&(d+=4294967296),d}function X(l,a){var d=x(l,a,14)^x(l,a,18)^x(a,l,9);return d<0&&(d+=4294967296),d}function K(l,a){var d=u(l,a,14)^u(l,a,18)^u(a,l,9);return d<0&&(d+=4294967296),d}function ge(l,a){var d=x(l,a,1)^x(l,a,8)^g(l,a,7);return d<0&&(d+=4294967296),d}function R(l,a){var d=u(l,a,1)^u(l,a,8)^C(l,a,7);return d<0&&(d+=4294967296),d}function r(l,a){var d=x(l,a,19)^x(a,l,29)^g(l,a,6);return d<0&&(d+=4294967296),d}function s(l,a){var d=u(l,a,19)^u(a,l,29)^C(l,a,6);return d<0&&(d+=4294967296),d}p.inherits(k,I),Y.exports=k,k.blockSize=1024,k.outSize=512,k.hmacStrength=192,k.padLength=128,k.prototype._prepareBlock=function(a,f){for(var M=this.W,A=0;A<32;A++)M[A]=a[f+A];for(;A<M.length;A+=2){var d=r(M[A-4],M[A-3]),i=s(M[A-4],M[A-3]),m=M[A-14],q=M[A-13],z=ge(M[A-30],M[A-29]),J=R(M[A-30],M[A-29]),ce=M[A-32],se=M[A-31];M[A]=h(d,i,m,q,z,J,ce,se),M[A+1]=_(d,i,m,q,z,J,ce,se)}},k.prototype._update=function(a,f){this._prepareBlock(a,f);var M=this.W,A=this.h[0],d=this.h[1],i=this.h[2],m=this.h[3],q=this.h[4],z=this.h[5],J=this.h[6],ce=this.h[7],se=this.h[8],he=this.h[9],ve=this.h[10],ae=this.h[11],de=this.h[12],Re=this.h[13],Ee=this.h[14],ue=this.h[15];y(this.k.length===M.length);for(var ye=0;ye<M.length;ye+=2){var Se=Ee,ie=ue,ee=X(se,he),Z=K(se,he),le=O(se,0,ve,0,de),Oe=V(0,he,0,ae,0,Re),we=this.k[ye],Te=this.k[ye+1],yt=M[ye],Ne=M[ye+1],Me=b(Se,ie,ee,Z,le,Oe,we,Te,yt,Ne),Ye=w(Se,ie,ee,Z,le,Oe,we,Te,yt,Ne);Se=j(A,d),ie=W(A,d),ee=B(A,0,i,0,q),Z=U(0,d,0,m,0,z);var De=E(Se,ie,ee,Z),Fe=v(Se,ie,ee,Z);Ee=de,ue=Re,de=ve,Re=ae,ve=se,ae=he,se=E(J,ce,Me,Ye),he=v(ce,ce,Me,Ye),J=q,ce=z,q=i,z=m,i=A,m=d,A=E(Me,Ye,De,Fe),d=v(Me,Ye,De,Fe)}P(this.h,0,A,d),P(this.h,2,i,m),P(this.h,4,q,z),P(this.h,6,J,ce),P(this.h,8,se,he),P(this.h,10,ve,ae),P(this.h,12,de,Re),P(this.h,14,Ee,ue)},k.prototype._digest=function(a){return"hex"===a?p.toHex32(this.h,"big"):p.split32(this.h,"big")}},8491:(Y,L,T)=>{"use strict";var N=T(8291).rotr32;function x(h,_,b){return h&_^~h&b}function u(h,_,b){return h&_^h&b^_&b}function g(h,_,b){return h^_^b}L.ft_1=function(h,_,b,w){return 0===h?x(_,b,w):1===h||3===h?g(_,b,w):2===h?u(_,b,w):void 0},L.ch32=x,L.maj32=u,L.p32=g,L.s0_256=function(h){return N(h,2)^N(h,13)^N(h,22)},L.s1_256=function(h){return N(h,6)^N(h,11)^N(h,25)},L.g0_256=function(h){return N(h,7)^N(h,18)^h>>>3},L.g1_256=function(h){return N(h,17)^N(h,19)^h>>>10}},8291:(Y,L,T)=>{"use strict";var p=T(6055),N=T(9879);function y(s,l){return!(55296!=(64512&s.charCodeAt(l))||l<0||l+1>=s.length)&&56320==(64512&s.charCodeAt(l+1))}function g(s){return(s>>>24|s>>>8&65280|s<<8&16711680|(255&s)<<24)>>>0}function P(s){return 1===s.length?"0"+s:s}function E(s){return 7===s.length?"0"+s:6===s.length?"00"+s:5===s.length?"000"+s:4===s.length?"0000"+s:3===s.length?"00000"+s:2===s.length?"000000"+s:1===s.length?"0000000"+s:s}L.inherits=N,L.toArray=function(s,l){if(Array.isArray(s))return s.slice();if(!s)return[];var a=[];if("string"==typeof s)if(l){if("hex"===l)for((s=s.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(s="0"+s),M=0;M<s.length;M+=2)a.push(parseInt(s[M]+s[M+1],16))}else for(var f=0,M=0;M<s.length;M++){var A=s.charCodeAt(M);A<128?a[f++]=A:A<2048?(a[f++]=A>>6|192,a[f++]=63&A|128):y(s,M)?(A=65536+((1023&A)<<10)+(1023&s.charCodeAt(++M)),a[f++]=A>>18|240,a[f++]=A>>12&63|128,a[f++]=A>>6&63|128,a[f++]=63&A|128):(a[f++]=A>>12|224,a[f++]=A>>6&63|128,a[f++]=63&A|128)}else for(M=0;M<s.length;M++)a[M]=0|s[M];return a},L.toHex=function(s){for(var l="",a=0;a<s.length;a++)l+=P(s[a].toString(16));return l},L.htonl=g,L.toHex32=function(s,l){for(var a="",f=0;f<s.length;f++){var M=s[f];"little"===l&&(M=g(M)),a+=E(M.toString(16))}return a},L.zero2=P,L.zero8=E,L.join32=function(s,l,a,f){var M=a-l;p(M%4==0);for(var A=new Array(M/4),d=0,i=l;d<A.length;d++,i+=4)A[d]=("big"===f?s[i]<<24|s[i+1]<<16|s[i+2]<<8|s[i+3]:s[i+3]<<24|s[i+2]<<16|s[i+1]<<8|s[i])>>>0;return A},L.split32=function(s,l){for(var a=new Array(4*s.length),f=0,M=0;f<s.length;f++,M+=4){var A=s[f];"big"===l?(a[M]=A>>>24,a[M+1]=A>>>16&255,a[M+2]=A>>>8&255,a[M+3]=255&A):(a[M+3]=A>>>24,a[M+2]=A>>>16&255,a[M+1]=A>>>8&255,a[M]=255&A)}return a},L.rotr32=function(s,l){return s>>>l|s<<32-l},L.rotl32=function(s,l){return s<<l|s>>>32-l},L.sum32=function(s,l){return s+l>>>0},L.sum32_3=function(s,l,a){return s+l+a>>>0},L.sum32_4=function(s,l,a,f){return s+l+a+f>>>0},L.sum32_5=function(s,l,a,f,M){return s+l+a+f+M>>>0},L.sum64=function(s,l,a,f){var d=f+s[l+1]>>>0;s[l]=(d<f?1:0)+a+s[l]>>>0,s[l+1]=d},L.sum64_hi=function(s,l,a,f){return(l+f>>>0<l?1:0)+s+a>>>0},L.sum64_lo=function(s,l,a,f){return l+f>>>0},L.sum64_4_hi=function(s,l,a,f,M,A,d,i){var m=0,q=l;return m+=(q=q+f>>>0)<l?1:0,m+=(q=q+A>>>0)<A?1:0,s+a+M+d+(m+=(q=q+i>>>0)<i?1:0)>>>0},L.sum64_4_lo=function(s,l,a,f,M,A,d,i){return l+f+A+i>>>0},L.sum64_5_hi=function(s,l,a,f,M,A,d,i,m,q){var z=0,J=l;return z+=(J=J+f>>>0)<l?1:0,z+=(J=J+A>>>0)<A?1:0,z+=(J=J+i>>>0)<i?1:0,s+a+M+d+m+(z+=(J=J+q>>>0)<q?1:0)>>>0},L.sum64_5_lo=function(s,l,a,f,M,A,d,i,m,q){return l+f+A+i+q>>>0},L.rotr64_hi=function(s,l,a){return(l<<32-a|s>>>a)>>>0},L.rotr64_lo=function(s,l,a){return(s<<32-a|l>>>a)>>>0},L.shr64_hi=function(s,l,a){return s>>>a},L.shr64_lo=function(s,l,a){return(s<<32-a|l>>>a)>>>0}},2730:(Y,L,T)=>{"use strict";var p=T(7909),N=T(4869),y=T(6055);function x(u){if(!(this instanceof x))return new x(u);this.hash=u.hash,this.predResist=!!u.predResist,this.outLen=this.hash.outSize,this.minEntropy=u.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var g=N.toArray(u.entropy,u.entropyEnc||"hex"),C=N.toArray(u.nonce,u.nonceEnc||"hex"),P=N.toArray(u.pers,u.persEnc||"hex");y(g.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(g,C,P)}Y.exports=x,x.prototype._init=function(g,C,P){var E=g.concat(C).concat(P);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var v=0;v<this.V.length;v++)this.K[v]=0,this.V[v]=1;this._update(E),this._reseed=1,this.reseedInterval=281474976710656},x.prototype._hmac=function(){return new p.hmac(this.hash,this.K)},x.prototype._update=function(g){var C=this._hmac().update(this.V).update([0]);g&&(C=C.update(g)),this.K=C.digest(),this.V=this._hmac().update(this.V).digest(),g&&(this.K=this._hmac().update(this.V).update([1]).update(g).digest(),this.V=this._hmac().update(this.V).digest())},x.prototype.reseed=function(g,C,P,E){"string"!=typeof C&&(E=P,P=C,C=null),g=N.toArray(g,C),P=N.toArray(P,E),y(g.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(g.concat(P||[])),this._reseed=1},x.prototype.generate=function(g,C,P,E){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof C&&(E=P,P=C,C=null),P&&(P=N.toArray(P,E||"hex"),this._update(P));for(var v=[];v.length<g;)this.V=this._hmac().update(this.V).digest(),v=v.concat(this.V);var h=v.slice(0,g);return this._update(P),this._reseed++,N.encode(h,C)}},2658:(Y,L)=>{L.read=function(T,p,N,y,x){var u,g,C=8*x-y-1,P=(1<<C)-1,E=P>>1,v=-7,h=N?x-1:0,_=N?-1:1,b=T[p+h];for(h+=_,u=b&(1<<-v)-1,b>>=-v,v+=C;v>0;u=256*u+T[p+h],h+=_,v-=8);for(g=u&(1<<-v)-1,u>>=-v,v+=y;v>0;g=256*g+T[p+h],h+=_,v-=8);if(0===u)u=1-E;else{if(u===P)return g?NaN:1/0*(b?-1:1);g+=Math.pow(2,y),u-=E}return(b?-1:1)*g*Math.pow(2,u-y)},L.write=function(T,p,N,y,x,u){var g,C,P,E=8*u-x-1,v=(1<<E)-1,h=v>>1,_=23===x?Math.pow(2,-24)-Math.pow(2,-77):0,b=y?0:u-1,w=y?1:-1,I=p<0||0===p&&1/p<0?1:0;for(p=Math.abs(p),isNaN(p)||p===1/0?(C=isNaN(p)?1:0,g=v):(g=Math.floor(Math.log(p)/Math.LN2),p*(P=Math.pow(2,-g))<1&&(g--,P*=2),(p+=g+h>=1?_/P:_*Math.pow(2,1-h))*P>=2&&(g++,P/=2),g+h>=v?(C=0,g=v):g+h>=1?(C=(p*P-1)*Math.pow(2,x),g+=h):(C=p*Math.pow(2,h-1)*Math.pow(2,x),g=0));x>=8;T[N+b]=255&C,b+=w,C/=256,x-=8);for(g=g<<x|C,E+=x;E>0;T[N+b]=255&g,b+=w,g/=256,E-=8);T[N+b-w]|=128*I}},9879:Y=>{Y.exports="function"==typeof Object.create?function(T,p){p&&(T.super_=p,T.prototype=Object.create(p.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}))}:function(T,p){if(p){T.super_=p;var N=function(){};N.prototype=p.prototype,T.prototype=new N,T.prototype.constructor=T}}},6099:Y=>{function T(N){this.message=N}(T.prototype=new Error).name="InvalidCharacterError",Y.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(N){var y=String(N).replace(/=+$/,"");if(y.length%4==1)throw new T("'atob' failed: The string to be decoded is not correctly encoded.");for(var u,g,x=0,C=0,P="";g=y.charAt(C++);~g&&(u=x%4?64*u+g:g,x++%4)?P+=String.fromCharCode(255&u>>(-2*x&6)):0)g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(g);return P}},4400:(Y,L,T)=>{var p=T(6099);Y.exports=function(y){var x=y.replace(/-/g,"+").replace(/_/g,"/");switch(x.length%4){case 0:break;case 2:x+="==";break;case 3:x+="=";break;default:throw"Illegal base64url string!"}try{return function(y){return decodeURIComponent(p(y).replace(/(.)/g,function(x,u){var g=u.charCodeAt(0).toString(16).toUpperCase();return g.length<2&&(g="0"+g),"%"+g}))}(x)}catch(u){return p(x)}}},4934:(Y,L,T)=>{"use strict";var p=T(4400);function N(y){this.message=y}(N.prototype=new Error).name="InvalidTokenError",Y.exports=function(y,x){if("string"!=typeof y)throw new N("Invalid token specified");var u=!0===(x=x||{}).header?0:1;try{return JSON.parse(p(y.split(".")[u]))}catch(g){throw new N("Invalid token specified: "+g.message)}},Y.exports.InvalidTokenError=N},3264:(Y,L,T)=>{"use strict";var p=T(9879),N=T(5414),y=T(5859).Buffer,x=new Array(16);function u(){N.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function g(h,_){return h<<_|h>>>32-_}function C(h,_,b,w,I,D,k){return g(h+(_&b|~_&w)+I+D|0,k)+_|0}function P(h,_,b,w,I,D,k){return g(h+(_&w|b&~w)+I+D|0,k)+_|0}function E(h,_,b,w,I,D,k){return g(h+(_^b^w)+I+D|0,k)+_|0}function v(h,_,b,w,I,D,k){return g(h+(b^(_|~w))+I+D|0,k)+_|0}p(u,N),u.prototype._update=function(){for(var h=x,_=0;_<16;++_)h[_]=this._block.readInt32LE(4*_);var b=this._a,w=this._b,I=this._c,D=this._d;b=C(b,w,I,D,h[0],3614090360,7),D=C(D,b,w,I,h[1],3905402710,12),I=C(I,D,b,w,h[2],606105819,17),w=C(w,I,D,b,h[3],3250441966,22),b=C(b,w,I,D,h[4],4118548399,7),D=C(D,b,w,I,h[5],1200080426,12),I=C(I,D,b,w,h[6],2821735955,17),w=C(w,I,D,b,h[7],4249261313,22),b=C(b,w,I,D,h[8],1770035416,7),D=C(D,b,w,I,h[9],2336552879,12),I=C(I,D,b,w,h[10],4294925233,17),w=C(w,I,D,b,h[11],2304563134,22),b=C(b,w,I,D,h[12],1804603682,7),D=C(D,b,w,I,h[13],4254626195,12),I=C(I,D,b,w,h[14],2792965006,17),b=P(b,w=C(w,I,D,b,h[15],1236535329,22),I,D,h[1],4129170786,5),D=P(D,b,w,I,h[6],3225465664,9),I=P(I,D,b,w,h[11],643717713,14),w=P(w,I,D,b,h[0],3921069994,20),b=P(b,w,I,D,h[5],3593408605,5),D=P(D,b,w,I,h[10],38016083,9),I=P(I,D,b,w,h[15],3634488961,14),w=P(w,I,D,b,h[4],3889429448,20),b=P(b,w,I,D,h[9],568446438,5),D=P(D,b,w,I,h[14],3275163606,9),I=P(I,D,b,w,h[3],4107603335,14),w=P(w,I,D,b,h[8],1163531501,20),b=P(b,w,I,D,h[13],2850285829,5),D=P(D,b,w,I,h[2],4243563512,9),I=P(I,D,b,w,h[7],1735328473,14),b=E(b,w=P(w,I,D,b,h[12],2368359562,20),I,D,h[5],4294588738,4),D=E(D,b,w,I,h[8],2272392833,11),I=E(I,D,b,w,h[11],1839030562,16),w=E(w,I,D,b,h[14],4259657740,23),b=E(b,w,I,D,h[1],2763975236,4),D=E(D,b,w,I,h[4],1272893353,11),I=E(I,D,b,w,h[7],4139469664,16),w=E(w,I,D,b,h[10],3200236656,23),b=E(b,w,I,D,h[13],681279174,4),D=E(D,b,w,I,h[0],3936430074,11),I=E(I,D,b,w,h[3],3572445317,16),w=E(w,I,D,b,h[6],76029189,23),b=E(b,w,I,D,h[9],3654602809,4),D=E(D,b,w,I,h[12],3873151461,11),I=E(I,D,b,w,h[15],530742520,16),b=v(b,w=E(w,I,D,b,h[2],3299628645,23),I,D,h[0],4096336452,6),D=v(D,b,w,I,h[7],1126891415,10),I=v(I,D,b,w,h[14],2878612391,15),w=v(w,I,D,b,h[5],4237533241,21),b=v(b,w,I,D,h[12],1700485571,6),D=v(D,b,w,I,h[3],2399980690,10),I=v(I,D,b,w,h[10],4293915773,15),w=v(w,I,D,b,h[1],2240044497,21),b=v(b,w,I,D,h[8],1873313359,6),D=v(D,b,w,I,h[15],4264355552,10),I=v(I,D,b,w,h[6],2734768916,15),w=v(w,I,D,b,h[13],1309151649,21),b=v(b,w,I,D,h[4],4149444226,6),D=v(D,b,w,I,h[11],3174756917,10),I=v(I,D,b,w,h[2],718787259,15),w=v(w,I,D,b,h[9],3951481745,21),this._a=this._a+b|0,this._b=this._b+w|0,this._c=this._c+I|0,this._d=this._d+D|0},u.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var h=y.allocUnsafe(16);return h.writeInt32LE(this._a,0),h.writeInt32LE(this._b,4),h.writeInt32LE(this._c,8),h.writeInt32LE(this._d,12),h},Y.exports=u},4398:(Y,L,T)=>{var p=T(1770),N=T(4761);function y(x){this.rand=x||new N.Rand}Y.exports=y,y.create=function(u){return new y(u)},y.prototype._randbelow=function(u){var g=u.bitLength(),C=Math.ceil(g/8);do{var P=new p(this.rand.generate(C))}while(P.cmp(u)>=0);return P},y.prototype._randrange=function(u,g){var C=g.sub(u);return u.add(this._randbelow(C))},y.prototype.test=function(u,g,C){var P=u.bitLength(),E=p.mont(u),v=new p(1).toRed(E);g||(g=Math.max(1,P/48|0));for(var h=u.subn(1),_=0;!h.testn(_);_++);for(var b=u.shrn(_),w=h.toRed(E);g>0;g--){var D=this._randrange(new p(2),h);C&&C(D);var k=D.toRed(E).redPow(b);if(0!==k.cmp(v)&&0!==k.cmp(w)){for(var O=1;O<_;O++){if(0===(k=k.redSqr()).cmp(v))return!1;if(0===k.cmp(w))break}if(O===_)return!1}}return!0},y.prototype.getDivisor=function(u,g){var C=u.bitLength(),P=p.mont(u),E=new p(1).toRed(P);g||(g=Math.max(1,C/48|0));for(var v=u.subn(1),h=0;!v.testn(h);h++);for(var _=u.shrn(h),b=v.toRed(P);g>0;g--){var w=this._randrange(new p(2),v),I=u.gcd(w);if(0!==I.cmpn(1))return I;var D=w.toRed(P).redPow(_);if(0!==D.cmp(E)&&0!==D.cmp(b)){for(var k=1;k<h;k++){if(0===(D=D.redSqr()).cmp(E))return D.fromRed().subn(1).gcd(u);if(0===D.cmp(b))break}if(k===h)return(D=D.redSqr()).fromRed().subn(1).gcd(u)}}return!1}},1770:function(Y,L,T){!function(p,N){"use strict";function y(R,r){if(!R)throw new Error(r||"Assertion failed")}function x(R,r){R.super_=r;var s=function(){};s.prototype=r.prototype,R.prototype=new s,R.prototype.constructor=R}function u(R,r,s){if(u.isBN(R))return R;this.negative=0,this.words=null,this.length=0,this.red=null,null!==R&&(("le"===r||"be"===r)&&(s=r,r=10),this._init(R||0,r||10,s||"be"))}var g;"object"==typeof p?p.exports=u:N.BN=u,u.BN=u,u.wordSize=26;try{g="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:T(6619).Buffer}catch(R){}function C(R,r){var s=R.charCodeAt(r);return s>=65&&s<=70?s-55:s>=97&&s<=102?s-87:s-48&15}function P(R,r,s){var l=C(R,s);return s-1>=r&&(l|=C(R,s-1)<<4),l}function E(R,r,s,l){for(var a=0,f=Math.min(R.length,s),M=r;M<f;M++){var A=R.charCodeAt(M)-48;a*=l,a+=A>=49?A-49+10:A>=17?A-17+10:A}return a}u.isBN=function(r){return r instanceof u||null!==r&&"object"==typeof r&&r.constructor.wordSize===u.wordSize&&Array.isArray(r.words)},u.max=function(r,s){return r.cmp(s)>0?r:s},u.min=function(r,s){return r.cmp(s)<0?r:s},u.prototype._init=function(r,s,l){if("number"==typeof r)return this._initNumber(r,s,l);if("object"==typeof r)return this._initArray(r,s,l);"hex"===s&&(s=16),y(s===(0|s)&&s>=2&&s<=36);var a=0;"-"===(r=r.toString().replace(/\s+/g,""))[0]&&(a++,this.negative=1),a<r.length&&(16===s?this._parseHex(r,a,l):(this._parseBase(r,s,a),"le"===l&&this._initArray(this.toArray(),s,l)))},u.prototype._initNumber=function(r,s,l){r<0&&(this.negative=1,r=-r),r<67108864?(this.words=[67108863&r],this.length=1):r<4503599627370496?(this.words=[67108863&r,r/67108864&67108863],this.length=2):(y(r<9007199254740992),this.words=[67108863&r,r/67108864&67108863,1],this.length=3),"le"===l&&this._initArray(this.toArray(),s,l)},u.prototype._initArray=function(r,s,l){if(y("number"==typeof r.length),r.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(r.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var f,M,A=0;if("be"===l)for(a=r.length-1,f=0;a>=0;a-=3)this.words[f]|=(M=r[a]|r[a-1]<<8|r[a-2]<<16)<<A&67108863,this.words[f+1]=M>>>26-A&67108863,(A+=24)>=26&&(A-=26,f++);else if("le"===l)for(a=0,f=0;a<r.length;a+=3)this.words[f]|=(M=r[a]|r[a+1]<<8|r[a+2]<<16)<<A&67108863,this.words[f+1]=M>>>26-A&67108863,(A+=24)>=26&&(A-=26,f++);return this.strip()},u.prototype._parseHex=function(r,s,l){this.length=Math.ceil((r.length-s)/6),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var A,f=0,M=0;if("be"===l)for(a=r.length-1;a>=s;a-=2)A=P(r,s,a)<<f,this.words[M]|=67108863&A,f>=18?(f-=18,this.words[M+=1]|=A>>>26):f+=8;else for(a=(r.length-s)%2==0?s+1:s;a<r.length;a+=2)A=P(r,s,a)<<f,this.words[M]|=67108863&A,f>=18?(f-=18,this.words[M+=1]|=A>>>26):f+=8;this.strip()},u.prototype._parseBase=function(r,s,l){this.words=[0],this.length=1;for(var a=0,f=1;f<=67108863;f*=s)a++;a--,f=f/s|0;for(var M=r.length-l,A=M%a,d=Math.min(M,M-A)+l,i=0,m=l;m<d;m+=a)i=E(r,m,m+a,s),this.imuln(f),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i);if(0!==A){var q=1;for(i=E(r,m,r.length,s),m=0;m<A;m++)q*=s;this.imuln(q),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i)}this.strip()},u.prototype.copy=function(r){r.words=new Array(this.length);for(var s=0;s<this.length;s++)r.words[s]=this.words[s];r.length=this.length,r.negative=this.negative,r.red=this.red},u.prototype.clone=function(){var r=new u(null);return this.copy(r),r},u.prototype._expand=function(r){for(;this.length<r;)this.words[this.length++]=0;return this},u.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},u.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},u.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var v=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],_=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function w(R,r,s){s.negative=r.negative^R.negative;var l=R.length+r.length|0;s.length=l,l=l-1|0;var a=0|R.words[0],f=0|r.words[0],M=a*f,d=M/67108864|0;s.words[0]=67108863&M;for(var i=1;i<l;i++){for(var m=d>>>26,q=67108863&d,z=Math.min(i,r.length-1),J=Math.max(0,i-R.length+1);J<=z;J++)m+=(M=(a=0|R.words[i-J|0])*(f=0|r.words[J])+q)/67108864|0,q=67108863&M;s.words[i]=0|q,d=0|m}return 0!==d?s.words[i]=0|d:s.length--,s.strip()}u.prototype.toString=function(r,s){var l;if(s=0|s||1,16===(r=r||10)||"hex"===r){l="";for(var a=0,f=0,M=0;M<this.length;M++){var A=this.words[M],d=(16777215&(A<<a|f)).toString(16);l=0!=(f=A>>>24-a&16777215)||M!==this.length-1?v[6-d.length]+d+l:d+l,(a+=2)>=26&&(a-=26,M--)}for(0!==f&&(l=f.toString(16)+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}if(r===(0|r)&&r>=2&&r<=36){var i=h[r],m=_[r];l="";var q=this.clone();for(q.negative=0;!q.isZero();){var z=q.modn(m).toString(r);l=(q=q.idivn(m)).isZero()?z+l:v[i-z.length]+z+l}for(this.isZero()&&(l="0"+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}y(!1,"Base should be between 2 and 36")},u.prototype.toNumber=function(){var r=this.words[0];return 2===this.length?r+=67108864*this.words[1]:3===this.length&&1===this.words[2]?r+=4503599627370496+67108864*this.words[1]:this.length>2&&y(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-r:r},u.prototype.toJSON=function(){return this.toString(16)},u.prototype.toBuffer=function(r,s){return y(void 0!==g),this.toArrayLike(g,r,s)},u.prototype.toArray=function(r,s){return this.toArrayLike(Array,r,s)},u.prototype.toArrayLike=function(r,s,l){var a=this.byteLength(),f=l||Math.max(1,a);y(a<=f,"byte array longer than desired length"),y(f>0,"Requested array length <= 0"),this.strip();var d,i,M="le"===s,A=new r(f),m=this.clone();if(M){for(i=0;!m.isZero();i++)d=m.andln(255),m.iushrn(8),A[i]=d;for(;i<f;i++)A[i]=0}else{for(i=0;i<f-a;i++)A[i]=0;for(i=0;!m.isZero();i++)d=m.andln(255),m.iushrn(8),A[f-i-1]=d}return A},u.prototype._countBits=Math.clz32?function(r){return 32-Math.clz32(r)}:function(r){var s=r,l=0;return s>=4096&&(l+=13,s>>>=13),s>=64&&(l+=7,s>>>=7),s>=8&&(l+=4,s>>>=4),s>=2&&(l+=2,s>>>=2),l+s},u.prototype._zeroBits=function(r){if(0===r)return 26;var s=r,l=0;return 0==(8191&s)&&(l+=13,s>>>=13),0==(127&s)&&(l+=7,s>>>=7),0==(15&s)&&(l+=4,s>>>=4),0==(3&s)&&(l+=2,s>>>=2),0==(1&s)&&l++,l},u.prototype.bitLength=function(){var s=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+s},u.prototype.zeroBits=function(){if(this.isZero())return 0;for(var r=0,s=0;s<this.length;s++){var l=this._zeroBits(this.words[s]);if(r+=l,26!==l)break}return r},u.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},u.prototype.toTwos=function(r){return 0!==this.negative?this.abs().inotn(r).iaddn(1):this.clone()},u.prototype.fromTwos=function(r){return this.testn(r-1)?this.notn(r).iaddn(1).ineg():this.clone()},u.prototype.isNeg=function(){return 0!==this.negative},u.prototype.neg=function(){return this.clone().ineg()},u.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},u.prototype.iuor=function(r){for(;this.length<r.length;)this.words[this.length++]=0;for(var s=0;s<r.length;s++)this.words[s]=this.words[s]|r.words[s];return this.strip()},u.prototype.ior=function(r){return y(0==(this.negative|r.negative)),this.iuor(r)},u.prototype.or=function(r){return this.length>r.length?this.clone().ior(r):r.clone().ior(this)},u.prototype.uor=function(r){return this.length>r.length?this.clone().iuor(r):r.clone().iuor(this)},u.prototype.iuand=function(r){var s;s=this.length>r.length?r:this;for(var l=0;l<s.length;l++)this.words[l]=this.words[l]&r.words[l];return this.length=s.length,this.strip()},u.prototype.iand=function(r){return y(0==(this.negative|r.negative)),this.iuand(r)},u.prototype.and=function(r){return this.length>r.length?this.clone().iand(r):r.clone().iand(this)},u.prototype.uand=function(r){return this.length>r.length?this.clone().iuand(r):r.clone().iuand(this)},u.prototype.iuxor=function(r){var s,l;this.length>r.length?(s=this,l=r):(s=r,l=this);for(var a=0;a<l.length;a++)this.words[a]=s.words[a]^l.words[a];if(this!==s)for(;a<s.length;a++)this.words[a]=s.words[a];return this.length=s.length,this.strip()},u.prototype.ixor=function(r){return y(0==(this.negative|r.negative)),this.iuxor(r)},u.prototype.xor=function(r){return this.length>r.length?this.clone().ixor(r):r.clone().ixor(this)},u.prototype.uxor=function(r){return this.length>r.length?this.clone().iuxor(r):r.clone().iuxor(this)},u.prototype.inotn=function(r){y("number"==typeof r&&r>=0);var s=0|Math.ceil(r/26),l=r%26;this._expand(s),l>0&&s--;for(var a=0;a<s;a++)this.words[a]=67108863&~this.words[a];return l>0&&(this.words[a]=~this.words[a]&67108863>>26-l),this.strip()},u.prototype.notn=function(r){return this.clone().inotn(r)},u.prototype.setn=function(r,s){y("number"==typeof r&&r>=0);var l=r/26|0,a=r%26;return this._expand(l+1),this.words[l]=s?this.words[l]|1<<a:this.words[l]&~(1<<a),this.strip()},u.prototype.iadd=function(r){var s,l,a;if(0!==this.negative&&0===r.negative)return this.negative=0,s=this.isub(r),this.negative^=1,this._normSign();if(0===this.negative&&0!==r.negative)return r.negative=0,s=this.isub(r),r.negative=1,s._normSign();this.length>r.length?(l=this,a=r):(l=r,a=this);for(var f=0,M=0;M<a.length;M++)this.words[M]=67108863&(s=(0|l.words[M])+(0|a.words[M])+f),f=s>>>26;for(;0!==f&&M<l.length;M++)this.words[M]=67108863&(s=(0|l.words[M])+f),f=s>>>26;if(this.length=l.length,0!==f)this.words[this.length]=f,this.length++;else if(l!==this)for(;M<l.length;M++)this.words[M]=l.words[M];return this},u.prototype.add=function(r){var s;return 0!==r.negative&&0===this.negative?(r.negative=0,s=this.sub(r),r.negative^=1,s):0===r.negative&&0!==this.negative?(this.negative=0,s=r.sub(this),this.negative=1,s):this.length>r.length?this.clone().iadd(r):r.clone().iadd(this)},u.prototype.isub=function(r){if(0!==r.negative){r.negative=0;var s=this.iadd(r);return r.negative=1,s._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(r),this.negative=1,this._normSign();var a,f,l=this.cmp(r);if(0===l)return this.negative=0,this.length=1,this.words[0]=0,this;l>0?(a=this,f=r):(a=r,f=this);for(var M=0,A=0;A<f.length;A++)M=(s=(0|a.words[A])-(0|f.words[A])+M)>>26,this.words[A]=67108863&s;for(;0!==M&&A<a.length;A++)M=(s=(0|a.words[A])+M)>>26,this.words[A]=67108863&s;if(0===M&&A<a.length&&a!==this)for(;A<a.length;A++)this.words[A]=a.words[A];return this.length=Math.max(this.length,A),a!==this&&(this.negative=1),this.strip()},u.prototype.sub=function(r){return this.clone().isub(r)};var I=function(r,s,l){var d,i,m,a=r.words,f=s.words,M=l.words,A=0,q=0|a[0],z=8191&q,J=q>>>13,ce=0|a[1],se=8191&ce,he=ce>>>13,ve=0|a[2],ae=8191&ve,de=ve>>>13,Re=0|a[3],Ee=8191&Re,ue=Re>>>13,ye=0|a[4],Se=8191&ye,ie=ye>>>13,ee=0|a[5],Z=8191&ee,le=ee>>>13,Oe=0|a[6],we=8191&Oe,Te=Oe>>>13,yt=0|a[7],Ne=8191&yt,Me=yt>>>13,Ye=0|a[8],De=8191&Ye,Fe=Ye>>>13,ct=0|a[9],Ve=8191&ct,Ke=ct>>>13,Zt=0|f[0],nt=8191&Zt,ot=Zt>>>13,Mt=0|f[1],ut=8191&Mt,st=Mt>>>13,Nn=0|f[2],rt=8191&Nn,Ge=Nn>>>13,Cn=0|f[3],qe=8191&Cn,We=Cn>>>13,Dn=0|f[4],ft=8191&Dn,Ue=Dn>>>13,Ln=0|f[5],gt=8191&Ln,it=Ln>>>13,zn=0|f[6],lt=8191&zn,ze=zn>>>13,sn=0|f[7],dt=8191&sn,Xe=sn>>>13,Qt=0|f[8],Qe=8191&Qt,Ze=Qt>>>13,Pn=0|f[9],Je=8191&Pn,at=Pn>>>13;l.negative=r.negative^s.negative,l.length=19;var un=(A+(d=Math.imul(z,nt))|0)+((8191&(i=(i=Math.imul(z,ot))+Math.imul(J,nt)|0))<<13)|0;A=((m=Math.imul(J,ot))+(i>>>13)|0)+(un>>>26)|0,un&=67108863,d=Math.imul(se,nt),i=(i=Math.imul(se,ot))+Math.imul(he,nt)|0,m=Math.imul(he,ot);var Vt=(A+(d=d+Math.imul(z,ut)|0)|0)+((8191&(i=(i=i+Math.imul(z,st)|0)+Math.imul(J,ut)|0))<<13)|0;A=((m=m+Math.imul(J,st)|0)+(i>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,d=Math.imul(ae,nt),i=(i=Math.imul(ae,ot))+Math.imul(de,nt)|0,m=Math.imul(de,ot),d=d+Math.imul(se,ut)|0,i=(i=i+Math.imul(se,st)|0)+Math.imul(he,ut)|0,m=m+Math.imul(he,st)|0;var Ht=(A+(d=d+Math.imul(z,rt)|0)|0)+((8191&(i=(i=i+Math.imul(z,Ge)|0)+Math.imul(J,rt)|0))<<13)|0;A=((m=m+Math.imul(J,Ge)|0)+(i>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,d=Math.imul(Ee,nt),i=(i=Math.imul(Ee,ot))+Math.imul(ue,nt)|0,m=Math.imul(ue,ot),d=d+Math.imul(ae,ut)|0,i=(i=i+Math.imul(ae,st)|0)+Math.imul(de,ut)|0,m=m+Math.imul(de,st)|0,d=d+Math.imul(se,rt)|0,i=(i=i+Math.imul(se,Ge)|0)+Math.imul(he,rt)|0,m=m+Math.imul(he,Ge)|0;var bn=(A+(d=d+Math.imul(z,qe)|0)|0)+((8191&(i=(i=i+Math.imul(z,We)|0)+Math.imul(J,qe)|0))<<13)|0;A=((m=m+Math.imul(J,We)|0)+(i>>>13)|0)+(bn>>>26)|0,bn&=67108863,d=Math.imul(Se,nt),i=(i=Math.imul(Se,ot))+Math.imul(ie,nt)|0,m=Math.imul(ie,ot),d=d+Math.imul(Ee,ut)|0,i=(i=i+Math.imul(Ee,st)|0)+Math.imul(ue,ut)|0,m=m+Math.imul(ue,st)|0,d=d+Math.imul(ae,rt)|0,i=(i=i+Math.imul(ae,Ge)|0)+Math.imul(de,rt)|0,m=m+Math.imul(de,Ge)|0,d=d+Math.imul(se,qe)|0,i=(i=i+Math.imul(se,We)|0)+Math.imul(he,qe)|0,m=m+Math.imul(he,We)|0;var dn=(A+(d=d+Math.imul(z,ft)|0)|0)+((8191&(i=(i=i+Math.imul(z,Ue)|0)+Math.imul(J,ft)|0))<<13)|0;A=((m=m+Math.imul(J,Ue)|0)+(i>>>13)|0)+(dn>>>26)|0,dn&=67108863,d=Math.imul(Z,nt),i=(i=Math.imul(Z,ot))+Math.imul(le,nt)|0,m=Math.imul(le,ot),d=d+Math.imul(Se,ut)|0,i=(i=i+Math.imul(Se,st)|0)+Math.imul(ie,ut)|0,m=m+Math.imul(ie,st)|0,d=d+Math.imul(Ee,rt)|0,i=(i=i+Math.imul(Ee,Ge)|0)+Math.imul(ue,rt)|0,m=m+Math.imul(ue,Ge)|0,d=d+Math.imul(ae,qe)|0,i=(i=i+Math.imul(ae,We)|0)+Math.imul(de,qe)|0,m=m+Math.imul(de,We)|0,d=d+Math.imul(se,ft)|0,i=(i=i+Math.imul(se,Ue)|0)+Math.imul(he,ft)|0,m=m+Math.imul(he,Ue)|0;var pn=(A+(d=d+Math.imul(z,gt)|0)|0)+((8191&(i=(i=i+Math.imul(z,it)|0)+Math.imul(J,gt)|0))<<13)|0;A=((m=m+Math.imul(J,it)|0)+(i>>>13)|0)+(pn>>>26)|0,pn&=67108863,d=Math.imul(we,nt),i=(i=Math.imul(we,ot))+Math.imul(Te,nt)|0,m=Math.imul(Te,ot),d=d+Math.imul(Z,ut)|0,i=(i=i+Math.imul(Z,st)|0)+Math.imul(le,ut)|0,m=m+Math.imul(le,st)|0,d=d+Math.imul(Se,rt)|0,i=(i=i+Math.imul(Se,Ge)|0)+Math.imul(ie,rt)|0,m=m+Math.imul(ie,Ge)|0,d=d+Math.imul(Ee,qe)|0,i=(i=i+Math.imul(Ee,We)|0)+Math.imul(ue,qe)|0,m=m+Math.imul(ue,We)|0,d=d+Math.imul(ae,ft)|0,i=(i=i+Math.imul(ae,Ue)|0)+Math.imul(de,ft)|0,m=m+Math.imul(de,Ue)|0,d=d+Math.imul(se,gt)|0,i=(i=i+Math.imul(se,it)|0)+Math.imul(he,gt)|0,m=m+Math.imul(he,it)|0;var In=(A+(d=d+Math.imul(z,lt)|0)|0)+((8191&(i=(i=i+Math.imul(z,ze)|0)+Math.imul(J,lt)|0))<<13)|0;A=((m=m+Math.imul(J,ze)|0)+(i>>>13)|0)+(In>>>26)|0,In&=67108863,d=Math.imul(Ne,nt),i=(i=Math.imul(Ne,ot))+Math.imul(Me,nt)|0,m=Math.imul(Me,ot),d=d+Math.imul(we,ut)|0,i=(i=i+Math.imul(we,st)|0)+Math.imul(Te,ut)|0,m=m+Math.imul(Te,st)|0,d=d+Math.imul(Z,rt)|0,i=(i=i+Math.imul(Z,Ge)|0)+Math.imul(le,rt)|0,m=m+Math.imul(le,Ge)|0,d=d+Math.imul(Se,qe)|0,i=(i=i+Math.imul(Se,We)|0)+Math.imul(ie,qe)|0,m=m+Math.imul(ie,We)|0,d=d+Math.imul(Ee,ft)|0,i=(i=i+Math.imul(Ee,Ue)|0)+Math.imul(ue,ft)|0,m=m+Math.imul(ue,Ue)|0,d=d+Math.imul(ae,gt)|0,i=(i=i+Math.imul(ae,it)|0)+Math.imul(de,gt)|0,m=m+Math.imul(de,it)|0,d=d+Math.imul(se,lt)|0,i=(i=i+Math.imul(se,ze)|0)+Math.imul(he,lt)|0,m=m+Math.imul(he,ze)|0;var rn=(A+(d=d+Math.imul(z,dt)|0)|0)+((8191&(i=(i=i+Math.imul(z,Xe)|0)+Math.imul(J,dt)|0))<<13)|0;A=((m=m+Math.imul(J,Xe)|0)+(i>>>13)|0)+(rn>>>26)|0,rn&=67108863,d=Math.imul(De,nt),i=(i=Math.imul(De,ot))+Math.imul(Fe,nt)|0,m=Math.imul(Fe,ot),d=d+Math.imul(Ne,ut)|0,i=(i=i+Math.imul(Ne,st)|0)+Math.imul(Me,ut)|0,m=m+Math.imul(Me,st)|0,d=d+Math.imul(we,rt)|0,i=(i=i+Math.imul(we,Ge)|0)+Math.imul(Te,rt)|0,m=m+Math.imul(Te,Ge)|0,d=d+Math.imul(Z,qe)|0,i=(i=i+Math.imul(Z,We)|0)+Math.imul(le,qe)|0,m=m+Math.imul(le,We)|0,d=d+Math.imul(Se,ft)|0,i=(i=i+Math.imul(Se,Ue)|0)+Math.imul(ie,ft)|0,m=m+Math.imul(ie,Ue)|0,d=d+Math.imul(Ee,gt)|0,i=(i=i+Math.imul(Ee,it)|0)+Math.imul(ue,gt)|0,m=m+Math.imul(ue,it)|0,d=d+Math.imul(ae,lt)|0,i=(i=i+Math.imul(ae,ze)|0)+Math.imul(de,lt)|0,m=m+Math.imul(de,ze)|0,d=d+Math.imul(se,dt)|0,i=(i=i+Math.imul(se,Xe)|0)+Math.imul(he,dt)|0,m=m+Math.imul(he,Xe)|0;var Mn=(A+(d=d+Math.imul(z,Qe)|0)|0)+((8191&(i=(i=i+Math.imul(z,Ze)|0)+Math.imul(J,Qe)|0))<<13)|0;A=((m=m+Math.imul(J,Ze)|0)+(i>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,d=Math.imul(Ve,nt),i=(i=Math.imul(Ve,ot))+Math.imul(Ke,nt)|0,m=Math.imul(Ke,ot),d=d+Math.imul(De,ut)|0,i=(i=i+Math.imul(De,st)|0)+Math.imul(Fe,ut)|0,m=m+Math.imul(Fe,st)|0,d=d+Math.imul(Ne,rt)|0,i=(i=i+Math.imul(Ne,Ge)|0)+Math.imul(Me,rt)|0,m=m+Math.imul(Me,Ge)|0,d=d+Math.imul(we,qe)|0,i=(i=i+Math.imul(we,We)|0)+Math.imul(Te,qe)|0,m=m+Math.imul(Te,We)|0,d=d+Math.imul(Z,ft)|0,i=(i=i+Math.imul(Z,Ue)|0)+Math.imul(le,ft)|0,m=m+Math.imul(le,Ue)|0,d=d+Math.imul(Se,gt)|0,i=(i=i+Math.imul(Se,it)|0)+Math.imul(ie,gt)|0,m=m+Math.imul(ie,it)|0,d=d+Math.imul(Ee,lt)|0,i=(i=i+Math.imul(Ee,ze)|0)+Math.imul(ue,lt)|0,m=m+Math.imul(ue,ze)|0,d=d+Math.imul(ae,dt)|0,i=(i=i+Math.imul(ae,Xe)|0)+Math.imul(de,dt)|0,m=m+Math.imul(de,Xe)|0,d=d+Math.imul(se,Qe)|0,i=(i=i+Math.imul(se,Ze)|0)+Math.imul(he,Qe)|0,m=m+Math.imul(he,Ze)|0;var $t=(A+(d=d+Math.imul(z,Je)|0)|0)+((8191&(i=(i=i+Math.imul(z,at)|0)+Math.imul(J,Je)|0))<<13)|0;A=((m=m+Math.imul(J,at)|0)+(i>>>13)|0)+($t>>>26)|0,$t&=67108863,d=Math.imul(Ve,ut),i=(i=Math.imul(Ve,st))+Math.imul(Ke,ut)|0,m=Math.imul(Ke,st),d=d+Math.imul(De,rt)|0,i=(i=i+Math.imul(De,Ge)|0)+Math.imul(Fe,rt)|0,m=m+Math.imul(Fe,Ge)|0,d=d+Math.imul(Ne,qe)|0,i=(i=i+Math.imul(Ne,We)|0)+Math.imul(Me,qe)|0,m=m+Math.imul(Me,We)|0,d=d+Math.imul(we,ft)|0,i=(i=i+Math.imul(we,Ue)|0)+Math.imul(Te,ft)|0,m=m+Math.imul(Te,Ue)|0,d=d+Math.imul(Z,gt)|0,i=(i=i+Math.imul(Z,it)|0)+Math.imul(le,gt)|0,m=m+Math.imul(le,it)|0,d=d+Math.imul(Se,lt)|0,i=(i=i+Math.imul(Se,ze)|0)+Math.imul(ie,lt)|0,m=m+Math.imul(ie,ze)|0,d=d+Math.imul(Ee,dt)|0,i=(i=i+Math.imul(Ee,Xe)|0)+Math.imul(ue,dt)|0,m=m+Math.imul(ue,Xe)|0,d=d+Math.imul(ae,Qe)|0,i=(i=i+Math.imul(ae,Ze)|0)+Math.imul(de,Qe)|0,m=m+Math.imul(de,Ze)|0;var Nt=(A+(d=d+Math.imul(se,Je)|0)|0)+((8191&(i=(i=i+Math.imul(se,at)|0)+Math.imul(he,Je)|0))<<13)|0;A=((m=m+Math.imul(he,at)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,d=Math.imul(Ve,rt),i=(i=Math.imul(Ve,Ge))+Math.imul(Ke,rt)|0,m=Math.imul(Ke,Ge),d=d+Math.imul(De,qe)|0,i=(i=i+Math.imul(De,We)|0)+Math.imul(Fe,qe)|0,m=m+Math.imul(Fe,We)|0,d=d+Math.imul(Ne,ft)|0,i=(i=i+Math.imul(Ne,Ue)|0)+Math.imul(Me,ft)|0,m=m+Math.imul(Me,Ue)|0,d=d+Math.imul(we,gt)|0,i=(i=i+Math.imul(we,it)|0)+Math.imul(Te,gt)|0,m=m+Math.imul(Te,it)|0,d=d+Math.imul(Z,lt)|0,i=(i=i+Math.imul(Z,ze)|0)+Math.imul(le,lt)|0,m=m+Math.imul(le,ze)|0,d=d+Math.imul(Se,dt)|0,i=(i=i+Math.imul(Se,Xe)|0)+Math.imul(ie,dt)|0,m=m+Math.imul(ie,Xe)|0,d=d+Math.imul(Ee,Qe)|0,i=(i=i+Math.imul(Ee,Ze)|0)+Math.imul(ue,Qe)|0,m=m+Math.imul(ue,Ze)|0;var xn=(A+(d=d+Math.imul(ae,Je)|0)|0)+((8191&(i=(i=i+Math.imul(ae,at)|0)+Math.imul(de,Je)|0))<<13)|0;A=((m=m+Math.imul(de,at)|0)+(i>>>13)|0)+(xn>>>26)|0,xn&=67108863,d=Math.imul(Ve,qe),i=(i=Math.imul(Ve,We))+Math.imul(Ke,qe)|0,m=Math.imul(Ke,We),d=d+Math.imul(De,ft)|0,i=(i=i+Math.imul(De,Ue)|0)+Math.imul(Fe,ft)|0,m=m+Math.imul(Fe,Ue)|0,d=d+Math.imul(Ne,gt)|0,i=(i=i+Math.imul(Ne,it)|0)+Math.imul(Me,gt)|0,m=m+Math.imul(Me,it)|0,d=d+Math.imul(we,lt)|0,i=(i=i+Math.imul(we,ze)|0)+Math.imul(Te,lt)|0,m=m+Math.imul(Te,ze)|0,d=d+Math.imul(Z,dt)|0,i=(i=i+Math.imul(Z,Xe)|0)+Math.imul(le,dt)|0,m=m+Math.imul(le,Xe)|0,d=d+Math.imul(Se,Qe)|0,i=(i=i+Math.imul(Se,Ze)|0)+Math.imul(ie,Qe)|0,m=m+Math.imul(ie,Ze)|0;var wn=(A+(d=d+Math.imul(Ee,Je)|0)|0)+((8191&(i=(i=i+Math.imul(Ee,at)|0)+Math.imul(ue,Je)|0))<<13)|0;A=((m=m+Math.imul(ue,at)|0)+(i>>>13)|0)+(wn>>>26)|0,wn&=67108863,d=Math.imul(Ve,ft),i=(i=Math.imul(Ve,Ue))+Math.imul(Ke,ft)|0,m=Math.imul(Ke,Ue),d=d+Math.imul(De,gt)|0,i=(i=i+Math.imul(De,it)|0)+Math.imul(Fe,gt)|0,m=m+Math.imul(Fe,it)|0,d=d+Math.imul(Ne,lt)|0,i=(i=i+Math.imul(Ne,ze)|0)+Math.imul(Me,lt)|0,m=m+Math.imul(Me,ze)|0,d=d+Math.imul(we,dt)|0,i=(i=i+Math.imul(we,Xe)|0)+Math.imul(Te,dt)|0,m=m+Math.imul(Te,Xe)|0,d=d+Math.imul(Z,Qe)|0,i=(i=i+Math.imul(Z,Ze)|0)+Math.imul(le,Qe)|0,m=m+Math.imul(le,Ze)|0;var _n=(A+(d=d+Math.imul(Se,Je)|0)|0)+((8191&(i=(i=i+Math.imul(Se,at)|0)+Math.imul(ie,Je)|0))<<13)|0;A=((m=m+Math.imul(ie,at)|0)+(i>>>13)|0)+(_n>>>26)|0,_n&=67108863,d=Math.imul(Ve,gt),i=(i=Math.imul(Ve,it))+Math.imul(Ke,gt)|0,m=Math.imul(Ke,it),d=d+Math.imul(De,lt)|0,i=(i=i+Math.imul(De,ze)|0)+Math.imul(Fe,lt)|0,m=m+Math.imul(Fe,ze)|0,d=d+Math.imul(Ne,dt)|0,i=(i=i+Math.imul(Ne,Xe)|0)+Math.imul(Me,dt)|0,m=m+Math.imul(Me,Xe)|0,d=d+Math.imul(we,Qe)|0,i=(i=i+Math.imul(we,Ze)|0)+Math.imul(Te,Qe)|0,m=m+Math.imul(Te,Ze)|0;var xt=(A+(d=d+Math.imul(Z,Je)|0)|0)+((8191&(i=(i=i+Math.imul(Z,at)|0)+Math.imul(le,Je)|0))<<13)|0;A=((m=m+Math.imul(le,at)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,d=Math.imul(Ve,lt),i=(i=Math.imul(Ve,ze))+Math.imul(Ke,lt)|0,m=Math.imul(Ke,ze),d=d+Math.imul(De,dt)|0,i=(i=i+Math.imul(De,Xe)|0)+Math.imul(Fe,dt)|0,m=m+Math.imul(Fe,Xe)|0,d=d+Math.imul(Ne,Qe)|0,i=(i=i+Math.imul(Ne,Ze)|0)+Math.imul(Me,Qe)|0,m=m+Math.imul(Me,Ze)|0;var Rn=(A+(d=d+Math.imul(we,Je)|0)|0)+((8191&(i=(i=i+Math.imul(we,at)|0)+Math.imul(Te,Je)|0))<<13)|0;A=((m=m+Math.imul(Te,at)|0)+(i>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,d=Math.imul(Ve,dt),i=(i=Math.imul(Ve,Xe))+Math.imul(Ke,dt)|0,m=Math.imul(Ke,Xe),d=d+Math.imul(De,Qe)|0,i=(i=i+Math.imul(De,Ze)|0)+Math.imul(Fe,Qe)|0,m=m+Math.imul(Fe,Ze)|0;var Jt=(A+(d=d+Math.imul(Ne,Je)|0)|0)+((8191&(i=(i=i+Math.imul(Ne,at)|0)+Math.imul(Me,Je)|0))<<13)|0;A=((m=m+Math.imul(Me,at)|0)+(i>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,d=Math.imul(Ve,Qe),i=(i=Math.imul(Ve,Ze))+Math.imul(Ke,Qe)|0,m=Math.imul(Ke,Ze);var tn=(A+(d=d+Math.imul(De,Je)|0)|0)+((8191&(i=(i=i+Math.imul(De,at)|0)+Math.imul(Fe,Je)|0))<<13)|0;A=((m=m+Math.imul(Fe,at)|0)+(i>>>13)|0)+(tn>>>26)|0,tn&=67108863;var Sn=(A+(d=Math.imul(Ve,Je))|0)+((8191&(i=(i=Math.imul(Ve,at))+Math.imul(Ke,Je)|0))<<13)|0;return A=((m=Math.imul(Ke,at))+(i>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,M[0]=un,M[1]=Vt,M[2]=Ht,M[3]=bn,M[4]=dn,M[5]=pn,M[6]=In,M[7]=rn,M[8]=Mn,M[9]=$t,M[10]=Nt,M[11]=xn,M[12]=wn,M[13]=_n,M[14]=xt,M[15]=Rn,M[16]=Jt,M[17]=tn,M[18]=Sn,0!==A&&(M[19]=A,l.length++),l};function k(R,r,s){return(new O).mulp(R,r,s)}function O(R,r){this.x=R,this.y=r}Math.imul||(I=w),u.prototype.mulTo=function(r,s){var a=this.length+r.length;return 10===this.length&&10===r.length?I(this,r,s):a<63?w(this,r,s):a<1024?function(R,r,s){s.negative=r.negative^R.negative,s.length=R.length+r.length;for(var l=0,a=0,f=0;f<s.length-1;f++){var M=a;a=0;for(var A=67108863&l,d=Math.min(f,r.length-1),i=Math.max(0,f-R.length+1);i<=d;i++){var J=(0|R.words[f-i])*(0|r.words[i]),ce=67108863&J;A=67108863&(ce=ce+A|0),a+=(M=(M=M+(J/67108864|0)|0)+(ce>>>26)|0)>>>26,M&=67108863}s.words[f]=A,l=M,M=a}return 0!==l?s.words[f]=l:s.length--,s.strip()}(this,r,s):k(this,r,s)},O.prototype.makeRBT=function(r){for(var s=new Array(r),l=u.prototype._countBits(r)-1,a=0;a<r;a++)s[a]=this.revBin(a,l,r);return s},O.prototype.revBin=function(r,s,l){if(0===r||r===l-1)return r;for(var a=0,f=0;f<s;f++)a|=(1&r)<<s-f-1,r>>=1;return a},O.prototype.permute=function(r,s,l,a,f,M){for(var A=0;A<M;A++)a[A]=s[r[A]],f[A]=l[r[A]]},O.prototype.transform=function(r,s,l,a,f,M){this.permute(M,r,s,l,a,f);for(var A=1;A<f;A<<=1)for(var d=A<<1,i=Math.cos(2*Math.PI/d),m=Math.sin(2*Math.PI/d),q=0;q<f;q+=d)for(var z=i,J=m,ce=0;ce<A;ce++){var se=l[q+ce],he=a[q+ce],ve=l[q+ce+A],ae=a[q+ce+A],de=z*ve-J*ae;ae=z*ae+J*ve,l[q+ce]=se+(ve=de),a[q+ce]=he+ae,l[q+ce+A]=se-ve,a[q+ce+A]=he-ae,ce!==d&&(de=i*z-m*J,J=i*J+m*z,z=de)}},O.prototype.guessLen13b=function(r,s){var l=1|Math.max(s,r),a=1&l,f=0;for(l=l/2|0;l;l>>>=1)f++;return 1<<f+1+a},O.prototype.conjugate=function(r,s,l){if(!(l<=1))for(var a=0;a<l/2;a++){var f=r[a];r[a]=r[l-a-1],r[l-a-1]=f,f=s[a],s[a]=-s[l-a-1],s[l-a-1]=-f}},O.prototype.normalize13b=function(r,s){for(var l=0,a=0;a<s/2;a++){var f=8192*Math.round(r[2*a+1]/s)+Math.round(r[2*a]/s)+l;r[a]=67108863&f,l=f<67108864?0:f/67108864|0}return r},O.prototype.convert13b=function(r,s,l,a){for(var f=0,M=0;M<s;M++)l[2*M]=8191&(f+=0|r[M]),l[2*M+1]=8191&(f>>>=13),f>>>=13;for(M=2*s;M<a;++M)l[M]=0;y(0===f),y(0==(-8192&f))},O.prototype.stub=function(r){for(var s=new Array(r),l=0;l<r;l++)s[l]=0;return s},O.prototype.mulp=function(r,s,l){var a=2*this.guessLen13b(r.length,s.length),f=this.makeRBT(a),M=this.stub(a),A=new Array(a),d=new Array(a),i=new Array(a),m=new Array(a),q=new Array(a),z=new Array(a),J=l.words;J.length=a,this.convert13b(r.words,r.length,A,a),this.convert13b(s.words,s.length,m,a),this.transform(A,M,d,i,a,f),this.transform(m,M,q,z,a,f);for(var ce=0;ce<a;ce++){var se=d[ce]*q[ce]-i[ce]*z[ce];i[ce]=d[ce]*z[ce]+i[ce]*q[ce],d[ce]=se}return this.conjugate(d,i,a),this.transform(d,i,J,M,a,f),this.conjugate(J,M,a),this.normalize13b(J,a),l.negative=r.negative^s.negative,l.length=r.length+s.length,l.strip()},u.prototype.mul=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),this.mulTo(r,s)},u.prototype.mulf=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),k(this,r,s)},u.prototype.imul=function(r){return this.clone().mulTo(r,this)},u.prototype.imuln=function(r){y("number"==typeof r),y(r<67108864);for(var s=0,l=0;l<this.length;l++){var a=(0|this.words[l])*r,f=(67108863&a)+(67108863&s);s>>=26,s+=a/67108864|0,s+=f>>>26,this.words[l]=67108863&f}return 0!==s&&(this.words[l]=s,this.length++),this},u.prototype.muln=function(r){return this.clone().imuln(r)},u.prototype.sqr=function(){return this.mul(this)},u.prototype.isqr=function(){return this.imul(this.clone())},u.prototype.pow=function(r){var s=function(R){for(var r=new Array(R.bitLength()),s=0;s<r.length;s++){var a=s%26;r[s]=(R.words[s/26|0]&1<<a)>>>a}return r}(r);if(0===s.length)return new u(1);for(var l=this,a=0;a<s.length&&0===s[a];a++,l=l.sqr());if(++a<s.length)for(var f=l.sqr();a<s.length;a++,f=f.sqr())0!==s[a]&&(l=l.mul(f));return l},u.prototype.iushln=function(r){y("number"==typeof r&&r>=0);var f,s=r%26,l=(r-s)/26,a=67108863>>>26-s<<26-s;if(0!==s){var M=0;for(f=0;f<this.length;f++){var A=this.words[f]&a;this.words[f]=(0|this.words[f])-A<<s|M,M=A>>>26-s}M&&(this.words[f]=M,this.length++)}if(0!==l){for(f=this.length-1;f>=0;f--)this.words[f+l]=this.words[f];for(f=0;f<l;f++)this.words[f]=0;this.length+=l}return this.strip()},u.prototype.ishln=function(r){return y(0===this.negative),this.iushln(r)},u.prototype.iushrn=function(r,s,l){var a;y("number"==typeof r&&r>=0),a=s?(s-s%26)/26:0;var f=r%26,M=Math.min((r-f)/26,this.length),A=67108863^67108863>>>f<<f,d=l;if(a-=M,a=Math.max(0,a),d){for(var i=0;i<M;i++)d.words[i]=this.words[i];d.length=M}if(0!==M)if(this.length>M)for(this.length-=M,i=0;i<this.length;i++)this.words[i]=this.words[i+M];else this.words[0]=0,this.length=1;var m=0;for(i=this.length-1;i>=0&&(0!==m||i>=a);i--){var q=0|this.words[i];this.words[i]=m<<26-f|q>>>f,m=q&A}return d&&0!==m&&(d.words[d.length++]=m),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},u.prototype.ishrn=function(r,s,l){return y(0===this.negative),this.iushrn(r,s,l)},u.prototype.shln=function(r){return this.clone().ishln(r)},u.prototype.ushln=function(r){return this.clone().iushln(r)},u.prototype.shrn=function(r){return this.clone().ishrn(r)},u.prototype.ushrn=function(r){return this.clone().iushrn(r)},u.prototype.testn=function(r){y("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return!(this.length<=l||!(this.words[l]&1<<s))},u.prototype.imaskn=function(r){y("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return y(0===this.negative,"imaskn works only with positive numbers"),this.length<=l?this:(0!==s&&l++,this.length=Math.min(l,this.length),0!==s&&(this.words[this.length-1]&=67108863^67108863>>>s<<s),this.strip())},u.prototype.maskn=function(r){return this.clone().imaskn(r)},u.prototype.iaddn=function(r){return y("number"==typeof r),y(r<67108864),r<0?this.isubn(-r):0!==this.negative?1===this.length&&(0|this.words[0])<r?(this.words[0]=r-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(r),this.negative=1,this):this._iaddn(r)},u.prototype._iaddn=function(r){this.words[0]+=r;for(var s=0;s<this.length&&this.words[s]>=67108864;s++)this.words[s]-=67108864,s===this.length-1?this.words[s+1]=1:this.words[s+1]++;return this.length=Math.max(this.length,s+1),this},u.prototype.isubn=function(r){if(y("number"==typeof r),y(r<67108864),r<0)return this.iaddn(-r);if(0!==this.negative)return this.negative=0,this.iaddn(r),this.negative=1,this;if(this.words[0]-=r,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var s=0;s<this.length&&this.words[s]<0;s++)this.words[s]+=67108864,this.words[s+1]-=1;return this.strip()},u.prototype.addn=function(r){return this.clone().iaddn(r)},u.prototype.subn=function(r){return this.clone().isubn(r)},u.prototype.iabs=function(){return this.negative=0,this},u.prototype.abs=function(){return this.clone().iabs()},u.prototype._ishlnsubmul=function(r,s,l){var f;this._expand(r.length+l);var M,A=0;for(f=0;f<r.length;f++){M=(0|this.words[f+l])+A;var d=(0|r.words[f])*s;A=((M-=67108863&d)>>26)-(d/67108864|0),this.words[f+l]=67108863&M}for(;f<this.length-l;f++)A=(M=(0|this.words[f+l])+A)>>26,this.words[f+l]=67108863&M;if(0===A)return this.strip();for(y(-1===A),A=0,f=0;f<this.length;f++)A=(M=-(0|this.words[f])+A)>>26,this.words[f]=67108863&M;return this.negative=1,this.strip()},u.prototype._wordDiv=function(r,s){var l,a=this.clone(),f=r,M=0|f.words[f.length-1];0!=(l=26-this._countBits(M))&&(f=f.ushln(l),a.iushln(l),M=0|f.words[f.length-1]);var i,d=a.length-f.length;if("mod"!==s){(i=new u(null)).length=d+1,i.words=new Array(i.length);for(var m=0;m<i.length;m++)i.words[m]=0}var q=a.clone()._ishlnsubmul(f,1,d);0===q.negative&&(a=q,i&&(i.words[d]=1));for(var z=d-1;z>=0;z--){var J=67108864*(0|a.words[f.length+z])+(0|a.words[f.length+z-1]);for(J=Math.min(J/M|0,67108863),a._ishlnsubmul(f,J,z);0!==a.negative;)J--,a.negative=0,a._ishlnsubmul(f,1,z),a.isZero()||(a.negative^=1);i&&(i.words[z]=J)}return i&&i.strip(),a.strip(),"div"!==s&&0!==l&&a.iushrn(l),{div:i||null,mod:a}},u.prototype.divmod=function(r,s,l){return y(!r.isZero()),this.isZero()?{div:new u(0),mod:new u(0)}:0!==this.negative&&0===r.negative?(M=this.neg().divmod(r,s),"mod"!==s&&(a=M.div.neg()),"div"!==s&&(f=M.mod.neg(),l&&0!==f.negative&&f.iadd(r)),{div:a,mod:f}):0===this.negative&&0!==r.negative?(M=this.divmod(r.neg(),s),"mod"!==s&&(a=M.div.neg()),{div:a,mod:M.mod}):0!=(this.negative&r.negative)?(M=this.neg().divmod(r.neg(),s),"div"!==s&&(f=M.mod.neg(),l&&0!==f.negative&&f.isub(r)),{div:M.div,mod:f}):r.length>this.length||this.cmp(r)<0?{div:new u(0),mod:this}:1===r.length?"div"===s?{div:this.divn(r.words[0]),mod:null}:"mod"===s?{div:null,mod:new u(this.modn(r.words[0]))}:{div:this.divn(r.words[0]),mod:new u(this.modn(r.words[0]))}:this._wordDiv(r,s);var a,f,M},u.prototype.div=function(r){return this.divmod(r,"div",!1).div},u.prototype.mod=function(r){return this.divmod(r,"mod",!1).mod},u.prototype.umod=function(r){return this.divmod(r,"mod",!0).mod},u.prototype.divRound=function(r){var s=this.divmod(r);if(s.mod.isZero())return s.div;var l=0!==s.div.negative?s.mod.isub(r):s.mod,a=r.ushrn(1),f=r.andln(1),M=l.cmp(a);return M<0||1===f&&0===M?s.div:0!==s.div.negative?s.div.isubn(1):s.div.iaddn(1)},u.prototype.modn=function(r){y(r<=67108863);for(var s=(1<<26)%r,l=0,a=this.length-1;a>=0;a--)l=(s*l+(0|this.words[a]))%r;return l},u.prototype.idivn=function(r){y(r<=67108863);for(var s=0,l=this.length-1;l>=0;l--){var a=(0|this.words[l])+67108864*s;this.words[l]=a/r|0,s=a%r}return this.strip()},u.prototype.divn=function(r){return this.clone().idivn(r)},u.prototype.egcd=function(r){y(0===r.negative),y(!r.isZero());var s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),M=new u(0),A=new u(1),d=0;s.isEven()&&l.isEven();)s.iushrn(1),l.iushrn(1),++d;for(var i=l.clone(),m=s.clone();!s.isZero();){for(var q=0,z=1;0==(s.words[0]&z)&&q<26;++q,z<<=1);if(q>0)for(s.iushrn(q);q-- >0;)(a.isOdd()||f.isOdd())&&(a.iadd(i),f.isub(m)),a.iushrn(1),f.iushrn(1);for(var J=0,ce=1;0==(l.words[0]&ce)&&J<26;++J,ce<<=1);if(J>0)for(l.iushrn(J);J-- >0;)(M.isOdd()||A.isOdd())&&(M.iadd(i),A.isub(m)),M.iushrn(1),A.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(M),f.isub(A)):(l.isub(s),M.isub(a),A.isub(f))}return{a:M,b:A,gcd:l.iushln(d)}},u.prototype._invmp=function(r){y(0===r.negative),y(!r.isZero());var q,s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),M=l.clone();s.cmpn(1)>0&&l.cmpn(1)>0;){for(var A=0,d=1;0==(s.words[0]&d)&&A<26;++A,d<<=1);if(A>0)for(s.iushrn(A);A-- >0;)a.isOdd()&&a.iadd(M),a.iushrn(1);for(var i=0,m=1;0==(l.words[0]&m)&&i<26;++i,m<<=1);if(i>0)for(l.iushrn(i);i-- >0;)f.isOdd()&&f.iadd(M),f.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(f)):(l.isub(s),f.isub(a))}return(q=0===s.cmpn(1)?a:f).cmpn(0)<0&&q.iadd(r),q},u.prototype.gcd=function(r){if(this.isZero())return r.abs();if(r.isZero())return this.abs();var s=this.clone(),l=r.clone();s.negative=0,l.negative=0;for(var a=0;s.isEven()&&l.isEven();a++)s.iushrn(1),l.iushrn(1);for(;;){for(;s.isEven();)s.iushrn(1);for(;l.isEven();)l.iushrn(1);var f=s.cmp(l);if(f<0){var M=s;s=l,l=M}else if(0===f||0===l.cmpn(1))break;s.isub(l)}return l.iushln(a)},u.prototype.invm=function(r){return this.egcd(r).a.umod(r)},u.prototype.isEven=function(){return 0==(1&this.words[0])},u.prototype.isOdd=function(){return 1==(1&this.words[0])},u.prototype.andln=function(r){return this.words[0]&r},u.prototype.bincn=function(r){y("number"==typeof r);var s=r%26,l=(r-s)/26,a=1<<s;if(this.length<=l)return this._expand(l+1),this.words[l]|=a,this;for(var f=a,M=l;0!==f&&M<this.length;M++){var A=0|this.words[M];f=(A+=f)>>>26,this.words[M]=A&=67108863}return 0!==f&&(this.words[M]=f,this.length++),this},u.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},u.prototype.cmpn=function(r){var l,s=r<0;if(0!==this.negative&&!s)return-1;if(0===this.negative&&s)return 1;if(this.strip(),this.length>1)l=1;else{s&&(r=-r),y(r<=67108863,"Number is too big");var a=0|this.words[0];l=a===r?0:a<r?-1:1}return 0!==this.negative?0|-l:l},u.prototype.cmp=function(r){if(0!==this.negative&&0===r.negative)return-1;if(0===this.negative&&0!==r.negative)return 1;var s=this.ucmp(r);return 0!==this.negative?0|-s:s},u.prototype.ucmp=function(r){if(this.length>r.length)return 1;if(this.length<r.length)return-1;for(var s=0,l=this.length-1;l>=0;l--){var a=0|this.words[l],f=0|r.words[l];if(a!==f){a<f?s=-1:a>f&&(s=1);break}}return s},u.prototype.gtn=function(r){return 1===this.cmpn(r)},u.prototype.gt=function(r){return 1===this.cmp(r)},u.prototype.gten=function(r){return this.cmpn(r)>=0},u.prototype.gte=function(r){return this.cmp(r)>=0},u.prototype.ltn=function(r){return-1===this.cmpn(r)},u.prototype.lt=function(r){return-1===this.cmp(r)},u.prototype.lten=function(r){return this.cmpn(r)<=0},u.prototype.lte=function(r){return this.cmp(r)<=0},u.prototype.eqn=function(r){return 0===this.cmpn(r)},u.prototype.eq=function(r){return 0===this.cmp(r)},u.red=function(r){return new K(r)},u.prototype.toRed=function(r){return y(!this.red,"Already a number in reduction context"),y(0===this.negative,"red works only with positives"),r.convertTo(this)._forceRed(r)},u.prototype.fromRed=function(){return y(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},u.prototype._forceRed=function(r){return this.red=r,this},u.prototype.forceRed=function(r){return y(!this.red,"Already a number in reduction context"),this._forceRed(r)},u.prototype.redAdd=function(r){return y(this.red,"redAdd works only with red numbers"),this.red.add(this,r)},u.prototype.redIAdd=function(r){return y(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,r)},u.prototype.redSub=function(r){return y(this.red,"redSub works only with red numbers"),this.red.sub(this,r)},u.prototype.redISub=function(r){return y(this.red,"redISub works only with red numbers"),this.red.isub(this,r)},u.prototype.redShl=function(r){return y(this.red,"redShl works only with red numbers"),this.red.shl(this,r)},u.prototype.redMul=function(r){return y(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.mul(this,r)},u.prototype.redIMul=function(r){return y(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.imul(this,r)},u.prototype.redSqr=function(){return y(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},u.prototype.redISqr=function(){return y(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},u.prototype.redSqrt=function(){return y(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},u.prototype.redInvm=function(){return y(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},u.prototype.redNeg=function(){return y(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},u.prototype.redPow=function(r){return y(this.red&&!r.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,r)};var V={k256:null,p224:null,p192:null,p25519:null};function B(R,r){this.name=R,this.p=new u(r,16),this.n=this.p.bitLength(),this.k=new u(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function U(){B.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function j(){B.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function W(){B.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function X(){B.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function K(R){if("string"==typeof R){var r=u._prime(R);this.m=r.p,this.prime=r}else y(R.gtn(1),"modulus must be greater than 1"),this.m=R,this.prime=null}function ge(R){K.call(this,R),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new u(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}B.prototype._tmp=function(){var r=new u(null);return r.words=new Array(Math.ceil(this.n/13)),r},B.prototype.ireduce=function(r){var l,s=r;do{this.split(s,this.tmp),l=(s=(s=this.imulK(s)).iadd(this.tmp)).bitLength()}while(l>this.n);var a=l<this.n?-1:s.ucmp(this.p);return 0===a?(s.words[0]=0,s.length=1):a>0?s.isub(this.p):void 0!==s.strip?s.strip():s._strip(),s},B.prototype.split=function(r,s){r.iushrn(this.n,0,s)},B.prototype.imulK=function(r){return r.imul(this.k)},x(U,B),U.prototype.split=function(r,s){for(var l=4194303,a=Math.min(r.length,9),f=0;f<a;f++)s.words[f]=r.words[f];if(s.length=a,r.length<=9)return r.words[0]=0,void(r.length=1);var M=r.words[9];for(s.words[s.length++]=M&l,f=10;f<r.length;f++){var A=0|r.words[f];r.words[f-10]=(A&l)<<4|M>>>22,M=A}r.words[f-10]=M>>>=22,r.length-=0===M&&r.length>10?10:9},U.prototype.imulK=function(r){r.words[r.length]=0,r.words[r.length+1]=0,r.length+=2;for(var s=0,l=0;l<r.length;l++){var a=0|r.words[l];r.words[l]=67108863&(s+=977*a),s=64*a+(s/67108864|0)}return 0===r.words[r.length-1]&&(r.length--,0===r.words[r.length-1]&&r.length--),r},x(j,B),x(W,B),x(X,B),X.prototype.imulK=function(r){for(var s=0,l=0;l<r.length;l++){var a=19*(0|r.words[l])+s,f=67108863&a;a>>>=26,r.words[l]=f,s=a}return 0!==s&&(r.words[r.length++]=s),r},u._prime=function(r){if(V[r])return V[r];var s;if("k256"===r)s=new U;else if("p224"===r)s=new j;else if("p192"===r)s=new W;else{if("p25519"!==r)throw new Error("Unknown prime "+r);s=new X}return V[r]=s,s},K.prototype._verify1=function(r){y(0===r.negative,"red works only with positives"),y(r.red,"red works only with red numbers")},K.prototype._verify2=function(r,s){y(0==(r.negative|s.negative),"red works only with positives"),y(r.red&&r.red===s.red,"red works only with red numbers")},K.prototype.imod=function(r){return this.prime?this.prime.ireduce(r)._forceRed(this):r.umod(this.m)._forceRed(this)},K.prototype.neg=function(r){return r.isZero()?r.clone():this.m.sub(r)._forceRed(this)},K.prototype.add=function(r,s){this._verify2(r,s);var l=r.add(s);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},K.prototype.iadd=function(r,s){this._verify2(r,s);var l=r.iadd(s);return l.cmp(this.m)>=0&&l.isub(this.m),l},K.prototype.sub=function(r,s){this._verify2(r,s);var l=r.sub(s);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},K.prototype.isub=function(r,s){this._verify2(r,s);var l=r.isub(s);return l.cmpn(0)<0&&l.iadd(this.m),l},K.prototype.shl=function(r,s){return this._verify1(r),this.imod(r.ushln(s))},K.prototype.imul=function(r,s){return this._verify2(r,s),this.imod(r.imul(s))},K.prototype.mul=function(r,s){return this._verify2(r,s),this.imod(r.mul(s))},K.prototype.isqr=function(r){return this.imul(r,r.clone())},K.prototype.sqr=function(r){return this.mul(r,r)},K.prototype.sqrt=function(r){if(r.isZero())return r.clone();var s=this.m.andln(3);if(y(s%2==1),3===s){var l=this.m.add(new u(1)).iushrn(2);return this.pow(r,l)}for(var a=this.m.subn(1),f=0;!a.isZero()&&0===a.andln(1);)f++,a.iushrn(1);y(!a.isZero());var M=new u(1).toRed(this),A=M.redNeg(),d=this.m.subn(1).iushrn(1),i=this.m.bitLength();for(i=new u(2*i*i).toRed(this);0!==this.pow(i,d).cmp(A);)i.redIAdd(A);for(var m=this.pow(i,a),q=this.pow(r,a.addn(1).iushrn(1)),z=this.pow(r,a),J=f;0!==z.cmp(M);){for(var ce=z,se=0;0!==ce.cmp(M);se++)ce=ce.redSqr();y(se<J);var he=this.pow(m,new u(1).iushln(J-se-1));q=q.redMul(he),m=he.redSqr(),z=z.redMul(m),J=se}return q},K.prototype.invm=function(r){var s=r._invmp(this.m);return 0!==s.negative?(s.negative=0,this.imod(s).redNeg()):this.imod(s)},K.prototype.pow=function(r,s){if(s.isZero())return new u(1).toRed(this);if(0===s.cmpn(1))return r.clone();var a=new Array(16);a[0]=new u(1).toRed(this),a[1]=r;for(var f=2;f<a.length;f++)a[f]=this.mul(a[f-1],r);var M=a[0],A=0,d=0,i=s.bitLength()%26;for(0===i&&(i=26),f=s.length-1;f>=0;f--){for(var m=s.words[f],q=i-1;q>=0;q--){var z=m>>q&1;M!==a[0]&&(M=this.sqr(M)),0!==z||0!==A?(A<<=1,A|=z,(4==++d||0===f&&0===q)&&(M=this.mul(M,a[A]),d=0,A=0)):d=0}i=26}return M},K.prototype.convertTo=function(r){var s=r.umod(this.m);return s===r?s.clone():s},K.prototype.convertFrom=function(r){var s=r.clone();return s.red=null,s},u.mont=function(r){return new ge(r)},x(ge,K),ge.prototype.convertTo=function(r){return this.imod(r.ushln(this.shift))},ge.prototype.convertFrom=function(r){var s=this.imod(r.mul(this.rinv));return s.red=null,s},ge.prototype.imul=function(r,s){if(r.isZero()||s.isZero())return r.words[0]=0,r.length=1,r;var l=r.imul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),M=f;return f.cmp(this.m)>=0?M=f.isub(this.m):f.cmpn(0)<0&&(M=f.iadd(this.m)),M._forceRed(this)},ge.prototype.mul=function(r,s){if(r.isZero()||s.isZero())return new u(0)._forceRed(this);var l=r.mul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),M=f;return f.cmp(this.m)>=0?M=f.isub(this.m):f.cmpn(0)<0&&(M=f.iadd(this.m)),M._forceRed(this)},ge.prototype.invm=function(r){return this.imod(r._invmp(this.m).mul(this.r2))._forceRed(this)}}(Y=T.nmd(Y),this)},6055:Y=>{function L(T,p){if(!T)throw new Error(p||"Assertion failed")}Y.exports=L,L.equal=function(p,N,y){if(p!=N)throw new Error(y||"Assertion failed: "+p+" != "+N)}},4869:(Y,L)=>{"use strict";var T=L;function N(x){return 1===x.length?"0"+x:x}function y(x){for(var u="",g=0;g<x.length;g++)u+=N(x[g].toString(16));return u}T.toArray=function(x,u){if(Array.isArray(x))return x.slice();if(!x)return[];var g=[];if("string"!=typeof x){for(var C=0;C<x.length;C++)g[C]=0|x[C];return g}if("hex"===u)for((x=x.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(x="0"+x),C=0;C<x.length;C+=2)g.push(parseInt(x[C]+x[C+1],16));else for(C=0;C<x.length;C++){var P=x.charCodeAt(C),E=P>>8,v=255&P;E?g.push(E,v):g.push(v)}return g},T.zero2=N,T.toHex=y,T.encode=function(u,g){return"hex"===g?y(u):u}},8228:Y=>{"use strict";var L=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;function N(x){if(null==x)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(x)}Y.exports=function(){try{if(!Object.assign)return!1;var x=new String("abc");if(x[5]="de","5"===Object.getOwnPropertyNames(x)[0])return!1;for(var u={},g=0;g<10;g++)u["_"+String.fromCharCode(g)]=g;if("0123456789"!==Object.getOwnPropertyNames(u).map(function(E){return u[E]}).join(""))return!1;var P={};return"abcdefghijklmnopqrst".split("").forEach(function(E){P[E]=E}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},P)).join("")}catch(E){return!1}}()?Object.assign:function(x,u){for(var g,P,C=N(x),E=1;E<arguments.length;E++){for(var v in g=Object(arguments[E]))T.call(g,v)&&(C[v]=g[v]);if(L){P=L(g);for(var h=0;h<P.length;h++)p.call(g,P[h])&&(C[P[h]]=g[P[h]])}}return C}},4673:(Y,L,T)=>{"use strict";var p=T(2016);L.certificate=T(6240);var N=p.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});L.RSAPrivateKey=N;var y=p.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});L.RSAPublicKey=y;var x=p.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(u),this.key("subjectPublicKey").bitstr())});L.PublicKey=x;var u=p.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),g=p.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(u),this.key("subjectPrivateKey").octstr())});L.PrivateKey=g;var C=p.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});L.EncryptedPrivateKey=C;var P=p.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});L.DSAPrivateKey=P,L.DSAparam=p.define("DSAparam",function(){this.int()});var E=p.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(v),this.key("publicKey").optional().explicit(1).bitstr())});L.ECPrivateKey=E;var v=p.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});L.signature=p.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},6240:(Y,L,T)=>{"use strict";var p=T(2016),N=p.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),y=p.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),x=p.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),u=p.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(x),this.key("subjectPublicKey").bitstr())}),g=p.define("RelativeDistinguishedName",function(){this.setof(y)}),C=p.define("RDNSequence",function(){this.seqof(g)}),P=p.define("Name",function(){this.choice({rdnSequence:this.use(C)})}),E=p.define("Validity",function(){this.seq().obj(this.key("notBefore").use(N),this.key("notAfter").use(N))}),v=p.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),h=p.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(x),this.key("issuer").use(P),this.key("validity").use(E),this.key("subject").use(P),this.key("subjectPublicKeyInfo").use(u),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(v).optional())}),_=p.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(h),this.key("signatureAlgorithm").use(x),this.key("signatureValue").bitstr())});Y.exports=_},1553:(Y,L,T)=>{var p=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,N=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,y=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,x=T(2367),u=T(9586),g=T(5859).Buffer;Y.exports=function(C,P){var h,E=C.toString(),v=E.match(p);if(v){var b="aes"+v[1],w=g.from(v[2],"hex"),I=g.from(v[3].replace(/[\r\n]/g,""),"base64"),D=x(P,w.slice(0,8),parseInt(v[1],10)).key,k=[],O=u.createDecipheriv(b,D,w);k.push(O.update(I)),k.push(O.final()),h=g.concat(k)}else{var _=E.match(y);h=g.from(_[2].replace(/[\r\n]/g,""),"base64")}return{tag:E.match(N)[1],data:h}}},1997:(Y,L,T)=>{var p=T(4673),N=T(2562),y=T(1553),x=T(9586),u=T(4161),g=T(5859).Buffer;function C(E){var v;"object"==typeof E&&!g.isBuffer(E)&&(v=E.passphrase,E=E.key),"string"==typeof E&&(E=g.from(E));var w,I,h=y(E,v),_=h.tag,b=h.data;switch(_){case"CERTIFICATE":I=p.certificate.decode(b,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(I||(I=p.PublicKey.decode(b,"der")),w=I.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return p.RSAPublicKey.decode(I.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return I.subjectPrivateKey=I.subjectPublicKey,{type:"ec",data:I};case"1.2.840.10040.4.1":return I.algorithm.params.pub_key=p.DSAparam.decode(I.subjectPublicKey.data,"der"),{type:"dsa",data:I.algorithm.params};default:throw new Error("unknown key id "+w)}case"ENCRYPTED PRIVATE KEY":b=function(E,v){var h=E.algorithm.decrypt.kde.kdeparams.salt,_=parseInt(E.algorithm.decrypt.kde.kdeparams.iters.toString(),10),b=N[E.algorithm.decrypt.cipher.algo.join(".")],w=E.algorithm.decrypt.cipher.iv,I=E.subjectPrivateKey,D=parseInt(b.split("-")[1],10)/8,k=u.pbkdf2Sync(v,h,_,D,"sha1"),O=x.createDecipheriv(b,k,w),V=[];return V.push(O.update(I)),V.push(O.final()),g.concat(V)}(b=p.EncryptedPrivateKey.decode(b,"der"),v);case"PRIVATE KEY":switch(w=(I=p.PrivateKey.decode(b,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return p.RSAPrivateKey.decode(I.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:I.algorithm.curve,privateKey:p.ECPrivateKey.decode(I.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return I.algorithm.params.priv_key=p.DSAparam.decode(I.subjectPrivateKey,"der"),{type:"dsa",params:I.algorithm.params};default:throw new Error("unknown key id "+w)}case"RSA PUBLIC KEY":return p.RSAPublicKey.decode(b,"der");case"RSA PRIVATE KEY":return p.RSAPrivateKey.decode(b,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:p.DSAPrivateKey.decode(b,"der")};case"EC PRIVATE KEY":return{curve:(b=p.ECPrivateKey.decode(b,"der")).parameters.value,privateKey:b.privateKey};default:throw new Error("unknown key type "+_)}}Y.exports=C,C.signature=p.signature},4161:(Y,L,T)=>{L.pbkdf2=T(1898),L.pbkdf2Sync=T(205)},1898:(Y,L,T)=>{var g,h,p=T(5859).Buffer,N=T(9024),y=T(5657),x=T(205),u=T(6933),C=global.crypto&&global.crypto.subtle,P={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},E=[];function _(){return h||(h=global.process&&global.process.nextTick?global.process.nextTick:global.queueMicrotask?global.queueMicrotask:global.setImmediate?global.setImmediate:global.setTimeout)}function b(I,D,k,O,V){return C.importKey("raw",I,{name:"PBKDF2"},!1,["deriveBits"]).then(function(B){return C.deriveBits({name:"PBKDF2",salt:D,iterations:k,hash:{name:V}},B,O<<3)}).then(function(B){return p.from(B)})}Y.exports=function(I,D,k,O,V,B){"function"==typeof V&&(B=V,V=void 0);var U=P[(V=V||"sha1").toLowerCase()];if(U&&"function"==typeof global.Promise){if(N(k,O),I=u(I,y,"Password"),D=u(D,y,"Salt"),"function"!=typeof B)throw new Error("No callback provided to pbkdf2");!function(I,D){I.then(function(k){_()(function(){D(null,k)})},function(k){_()(function(){D(k)})})}(function(I){if(global.process&&!global.process.browser||!C||!C.importKey||!C.deriveBits)return Promise.resolve(!1);if(void 0!==E[I])return E[I];var D=b(g=g||p.alloc(8),g,10,128,I).then(function(){return!0}).catch(function(){return!1});return E[I]=D,D}(U).then(function(j){return j?b(I,D,k,O,U):x(I,D,k,O,V)}),B)}else _()(function(){var j;try{j=x(I,D,k,O,V)}catch(W){return B(W)}B(null,j)})}},5657:Y=>{var L;L=global.process&&global.process.browser?"utf-8":global.process&&global.process.version?parseInt(process.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":"utf-8",Y.exports=L},9024:Y=>{var L=Math.pow(2,30)-1;Y.exports=function(T,p){if("number"!=typeof T)throw new TypeError("Iterations not a number");if(T<0)throw new TypeError("Bad iterations");if("number"!=typeof p)throw new TypeError("Key length not a number");if(p<0||p>L||p!=p)throw new TypeError("Bad key length")}},205:(Y,L,T)=>{var p=T(4464),N=T(5207),y=T(5829),x=T(5859).Buffer,u=T(9024),g=T(5657),C=T(6933),P=x.alloc(128),E={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function v(b,w,I){var D=function(b){return"rmd160"===b||"ripemd160"===b?function(D){return(new N).update(D).digest()}:"md5"===b?p:function(D){return y(b).update(D).digest()}}(b),k="sha512"===b||"sha384"===b?128:64;w.length>k?w=D(w):w.length<k&&(w=x.concat([w,P],k));for(var O=x.allocUnsafe(k+E[b]),V=x.allocUnsafe(k+E[b]),B=0;B<k;B++)O[B]=54^w[B],V[B]=92^w[B];var U=x.allocUnsafe(k+I+4);O.copy(U,0,0,k),this.ipad1=U,this.ipad2=O,this.opad=V,this.alg=b,this.blocksize=k,this.hash=D,this.size=E[b]}v.prototype.run=function(b,w){return b.copy(w,this.blocksize),this.hash(w).copy(this.opad,this.blocksize),this.hash(this.opad)},Y.exports=function(b,w,I,D,k){u(I,D);var O=new v(k=k||"sha1",b=C(b,g,"Password"),(w=C(w,g,"Salt")).length),V=x.allocUnsafe(D),B=x.allocUnsafe(w.length+4);w.copy(B,0,0,w.length);for(var U=0,j=E[k],W=Math.ceil(D/j),X=1;X<=W;X++){B.writeUInt32BE(X,w.length);for(var K=O.run(B,O.ipad1),ge=K,R=1;R<I;R++){ge=O.run(ge,O.ipad2);for(var r=0;r<j;r++)K[r]^=ge[r]}K.copy(V,U),U+=j}return V}},6933:(Y,L,T)=>{var p=T(5859).Buffer;Y.exports=function(N,y,x){if(p.isBuffer(N))return N;if("string"==typeof N)return p.from(N,y);if(ArrayBuffer.isView(N))return p.from(N.buffer);throw new TypeError(x+" must be a string, a Buffer, a typed array or a DataView")}},7537:(Y,L,T)=>{L.publicEncrypt=T(4760),L.privateDecrypt=T(1548),L.privateEncrypt=function(N,y){return L.publicEncrypt(N,y,!0)},L.publicDecrypt=function(N,y){return L.privateDecrypt(N,y,!0)}},444:(Y,L,T)=>{var p=T(2506),N=T(5859).Buffer;function y(x){var u=N.allocUnsafe(4);return u.writeUInt32BE(x,0),u}Y.exports=function(x,u){for(var P,g=N.alloc(0),C=0;g.length<u;)P=y(C++),g=N.concat([g,p("sha1").update(x).update(P).digest()]);return g.slice(0,u)}},6494:function(Y,L,T){!function(p,N){"use strict";function y(R,r){if(!R)throw new Error(r||"Assertion failed")}function x(R,r){R.super_=r;var s=function(){};s.prototype=r.prototype,R.prototype=new s,R.prototype.constructor=R}function u(R,r,s){if(u.isBN(R))return R;this.negative=0,this.words=null,this.length=0,this.red=null,null!==R&&(("le"===r||"be"===r)&&(s=r,r=10),this._init(R||0,r||10,s||"be"))}var g;"object"==typeof p?p.exports=u:N.BN=u,u.BN=u,u.wordSize=26;try{g="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:T(7108).Buffer}catch(R){}function C(R,r){var s=R.charCodeAt(r);return s>=65&&s<=70?s-55:s>=97&&s<=102?s-87:s-48&15}function P(R,r,s){var l=C(R,s);return s-1>=r&&(l|=C(R,s-1)<<4),l}function E(R,r,s,l){for(var a=0,f=Math.min(R.length,s),M=r;M<f;M++){var A=R.charCodeAt(M)-48;a*=l,a+=A>=49?A-49+10:A>=17?A-17+10:A}return a}u.isBN=function(r){return r instanceof u||null!==r&&"object"==typeof r&&r.constructor.wordSize===u.wordSize&&Array.isArray(r.words)},u.max=function(r,s){return r.cmp(s)>0?r:s},u.min=function(r,s){return r.cmp(s)<0?r:s},u.prototype._init=function(r,s,l){if("number"==typeof r)return this._initNumber(r,s,l);if("object"==typeof r)return this._initArray(r,s,l);"hex"===s&&(s=16),y(s===(0|s)&&s>=2&&s<=36);var a=0;"-"===(r=r.toString().replace(/\s+/g,""))[0]&&(a++,this.negative=1),a<r.length&&(16===s?this._parseHex(r,a,l):(this._parseBase(r,s,a),"le"===l&&this._initArray(this.toArray(),s,l)))},u.prototype._initNumber=function(r,s,l){r<0&&(this.negative=1,r=-r),r<67108864?(this.words=[67108863&r],this.length=1):r<4503599627370496?(this.words=[67108863&r,r/67108864&67108863],this.length=2):(y(r<9007199254740992),this.words=[67108863&r,r/67108864&67108863,1],this.length=3),"le"===l&&this._initArray(this.toArray(),s,l)},u.prototype._initArray=function(r,s,l){if(y("number"==typeof r.length),r.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(r.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var f,M,A=0;if("be"===l)for(a=r.length-1,f=0;a>=0;a-=3)this.words[f]|=(M=r[a]|r[a-1]<<8|r[a-2]<<16)<<A&67108863,this.words[f+1]=M>>>26-A&67108863,(A+=24)>=26&&(A-=26,f++);else if("le"===l)for(a=0,f=0;a<r.length;a+=3)this.words[f]|=(M=r[a]|r[a+1]<<8|r[a+2]<<16)<<A&67108863,this.words[f+1]=M>>>26-A&67108863,(A+=24)>=26&&(A-=26,f++);return this.strip()},u.prototype._parseHex=function(r,s,l){this.length=Math.ceil((r.length-s)/6),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var A,f=0,M=0;if("be"===l)for(a=r.length-1;a>=s;a-=2)A=P(r,s,a)<<f,this.words[M]|=67108863&A,f>=18?(f-=18,this.words[M+=1]|=A>>>26):f+=8;else for(a=(r.length-s)%2==0?s+1:s;a<r.length;a+=2)A=P(r,s,a)<<f,this.words[M]|=67108863&A,f>=18?(f-=18,this.words[M+=1]|=A>>>26):f+=8;this.strip()},u.prototype._parseBase=function(r,s,l){this.words=[0],this.length=1;for(var a=0,f=1;f<=67108863;f*=s)a++;a--,f=f/s|0;for(var M=r.length-l,A=M%a,d=Math.min(M,M-A)+l,i=0,m=l;m<d;m+=a)i=E(r,m,m+a,s),this.imuln(f),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i);if(0!==A){var q=1;for(i=E(r,m,r.length,s),m=0;m<A;m++)q*=s;this.imuln(q),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i)}this.strip()},u.prototype.copy=function(r){r.words=new Array(this.length);for(var s=0;s<this.length;s++)r.words[s]=this.words[s];r.length=this.length,r.negative=this.negative,r.red=this.red},u.prototype.clone=function(){var r=new u(null);return this.copy(r),r},u.prototype._expand=function(r){for(;this.length<r;)this.words[this.length++]=0;return this},u.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},u.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},u.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var v=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],_=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function w(R,r,s){s.negative=r.negative^R.negative;var l=R.length+r.length|0;s.length=l,l=l-1|0;var a=0|R.words[0],f=0|r.words[0],M=a*f,d=M/67108864|0;s.words[0]=67108863&M;for(var i=1;i<l;i++){for(var m=d>>>26,q=67108863&d,z=Math.min(i,r.length-1),J=Math.max(0,i-R.length+1);J<=z;J++)m+=(M=(a=0|R.words[i-J|0])*(f=0|r.words[J])+q)/67108864|0,q=67108863&M;s.words[i]=0|q,d=0|m}return 0!==d?s.words[i]=0|d:s.length--,s.strip()}u.prototype.toString=function(r,s){var l;if(s=0|s||1,16===(r=r||10)||"hex"===r){l="";for(var a=0,f=0,M=0;M<this.length;M++){var A=this.words[M],d=(16777215&(A<<a|f)).toString(16);l=0!=(f=A>>>24-a&16777215)||M!==this.length-1?v[6-d.length]+d+l:d+l,(a+=2)>=26&&(a-=26,M--)}for(0!==f&&(l=f.toString(16)+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}if(r===(0|r)&&r>=2&&r<=36){var i=h[r],m=_[r];l="";var q=this.clone();for(q.negative=0;!q.isZero();){var z=q.modn(m).toString(r);l=(q=q.idivn(m)).isZero()?z+l:v[i-z.length]+z+l}for(this.isZero()&&(l="0"+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}y(!1,"Base should be between 2 and 36")},u.prototype.toNumber=function(){var r=this.words[0];return 2===this.length?r+=67108864*this.words[1]:3===this.length&&1===this.words[2]?r+=4503599627370496+67108864*this.words[1]:this.length>2&&y(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-r:r},u.prototype.toJSON=function(){return this.toString(16)},u.prototype.toBuffer=function(r,s){return y(void 0!==g),this.toArrayLike(g,r,s)},u.prototype.toArray=function(r,s){return this.toArrayLike(Array,r,s)},u.prototype.toArrayLike=function(r,s,l){var a=this.byteLength(),f=l||Math.max(1,a);y(a<=f,"byte array longer than desired length"),y(f>0,"Requested array length <= 0"),this.strip();var d,i,M="le"===s,A=new r(f),m=this.clone();if(M){for(i=0;!m.isZero();i++)d=m.andln(255),m.iushrn(8),A[i]=d;for(;i<f;i++)A[i]=0}else{for(i=0;i<f-a;i++)A[i]=0;for(i=0;!m.isZero();i++)d=m.andln(255),m.iushrn(8),A[f-i-1]=d}return A},u.prototype._countBits=Math.clz32?function(r){return 32-Math.clz32(r)}:function(r){var s=r,l=0;return s>=4096&&(l+=13,s>>>=13),s>=64&&(l+=7,s>>>=7),s>=8&&(l+=4,s>>>=4),s>=2&&(l+=2,s>>>=2),l+s},u.prototype._zeroBits=function(r){if(0===r)return 26;var s=r,l=0;return 0==(8191&s)&&(l+=13,s>>>=13),0==(127&s)&&(l+=7,s>>>=7),0==(15&s)&&(l+=4,s>>>=4),0==(3&s)&&(l+=2,s>>>=2),0==(1&s)&&l++,l},u.prototype.bitLength=function(){var s=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+s},u.prototype.zeroBits=function(){if(this.isZero())return 0;for(var r=0,s=0;s<this.length;s++){var l=this._zeroBits(this.words[s]);if(r+=l,26!==l)break}return r},u.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},u.prototype.toTwos=function(r){return 0!==this.negative?this.abs().inotn(r).iaddn(1):this.clone()},u.prototype.fromTwos=function(r){return this.testn(r-1)?this.notn(r).iaddn(1).ineg():this.clone()},u.prototype.isNeg=function(){return 0!==this.negative},u.prototype.neg=function(){return this.clone().ineg()},u.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},u.prototype.iuor=function(r){for(;this.length<r.length;)this.words[this.length++]=0;for(var s=0;s<r.length;s++)this.words[s]=this.words[s]|r.words[s];return this.strip()},u.prototype.ior=function(r){return y(0==(this.negative|r.negative)),this.iuor(r)},u.prototype.or=function(r){return this.length>r.length?this.clone().ior(r):r.clone().ior(this)},u.prototype.uor=function(r){return this.length>r.length?this.clone().iuor(r):r.clone().iuor(this)},u.prototype.iuand=function(r){var s;s=this.length>r.length?r:this;for(var l=0;l<s.length;l++)this.words[l]=this.words[l]&r.words[l];return this.length=s.length,this.strip()},u.prototype.iand=function(r){return y(0==(this.negative|r.negative)),this.iuand(r)},u.prototype.and=function(r){return this.length>r.length?this.clone().iand(r):r.clone().iand(this)},u.prototype.uand=function(r){return this.length>r.length?this.clone().iuand(r):r.clone().iuand(this)},u.prototype.iuxor=function(r){var s,l;this.length>r.length?(s=this,l=r):(s=r,l=this);for(var a=0;a<l.length;a++)this.words[a]=s.words[a]^l.words[a];if(this!==s)for(;a<s.length;a++)this.words[a]=s.words[a];return this.length=s.length,this.strip()},u.prototype.ixor=function(r){return y(0==(this.negative|r.negative)),this.iuxor(r)},u.prototype.xor=function(r){return this.length>r.length?this.clone().ixor(r):r.clone().ixor(this)},u.prototype.uxor=function(r){return this.length>r.length?this.clone().iuxor(r):r.clone().iuxor(this)},u.prototype.inotn=function(r){y("number"==typeof r&&r>=0);var s=0|Math.ceil(r/26),l=r%26;this._expand(s),l>0&&s--;for(var a=0;a<s;a++)this.words[a]=67108863&~this.words[a];return l>0&&(this.words[a]=~this.words[a]&67108863>>26-l),this.strip()},u.prototype.notn=function(r){return this.clone().inotn(r)},u.prototype.setn=function(r,s){y("number"==typeof r&&r>=0);var l=r/26|0,a=r%26;return this._expand(l+1),this.words[l]=s?this.words[l]|1<<a:this.words[l]&~(1<<a),this.strip()},u.prototype.iadd=function(r){var s,l,a;if(0!==this.negative&&0===r.negative)return this.negative=0,s=this.isub(r),this.negative^=1,this._normSign();if(0===this.negative&&0!==r.negative)return r.negative=0,s=this.isub(r),r.negative=1,s._normSign();this.length>r.length?(l=this,a=r):(l=r,a=this);for(var f=0,M=0;M<a.length;M++)this.words[M]=67108863&(s=(0|l.words[M])+(0|a.words[M])+f),f=s>>>26;for(;0!==f&&M<l.length;M++)this.words[M]=67108863&(s=(0|l.words[M])+f),f=s>>>26;if(this.length=l.length,0!==f)this.words[this.length]=f,this.length++;else if(l!==this)for(;M<l.length;M++)this.words[M]=l.words[M];return this},u.prototype.add=function(r){var s;return 0!==r.negative&&0===this.negative?(r.negative=0,s=this.sub(r),r.negative^=1,s):0===r.negative&&0!==this.negative?(this.negative=0,s=r.sub(this),this.negative=1,s):this.length>r.length?this.clone().iadd(r):r.clone().iadd(this)},u.prototype.isub=function(r){if(0!==r.negative){r.negative=0;var s=this.iadd(r);return r.negative=1,s._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(r),this.negative=1,this._normSign();var a,f,l=this.cmp(r);if(0===l)return this.negative=0,this.length=1,this.words[0]=0,this;l>0?(a=this,f=r):(a=r,f=this);for(var M=0,A=0;A<f.length;A++)M=(s=(0|a.words[A])-(0|f.words[A])+M)>>26,this.words[A]=67108863&s;for(;0!==M&&A<a.length;A++)M=(s=(0|a.words[A])+M)>>26,this.words[A]=67108863&s;if(0===M&&A<a.length&&a!==this)for(;A<a.length;A++)this.words[A]=a.words[A];return this.length=Math.max(this.length,A),a!==this&&(this.negative=1),this.strip()},u.prototype.sub=function(r){return this.clone().isub(r)};var I=function(r,s,l){var d,i,m,a=r.words,f=s.words,M=l.words,A=0,q=0|a[0],z=8191&q,J=q>>>13,ce=0|a[1],se=8191&ce,he=ce>>>13,ve=0|a[2],ae=8191&ve,de=ve>>>13,Re=0|a[3],Ee=8191&Re,ue=Re>>>13,ye=0|a[4],Se=8191&ye,ie=ye>>>13,ee=0|a[5],Z=8191&ee,le=ee>>>13,Oe=0|a[6],we=8191&Oe,Te=Oe>>>13,yt=0|a[7],Ne=8191&yt,Me=yt>>>13,Ye=0|a[8],De=8191&Ye,Fe=Ye>>>13,ct=0|a[9],Ve=8191&ct,Ke=ct>>>13,Zt=0|f[0],nt=8191&Zt,ot=Zt>>>13,Mt=0|f[1],ut=8191&Mt,st=Mt>>>13,Nn=0|f[2],rt=8191&Nn,Ge=Nn>>>13,Cn=0|f[3],qe=8191&Cn,We=Cn>>>13,Dn=0|f[4],ft=8191&Dn,Ue=Dn>>>13,Ln=0|f[5],gt=8191&Ln,it=Ln>>>13,zn=0|f[6],lt=8191&zn,ze=zn>>>13,sn=0|f[7],dt=8191&sn,Xe=sn>>>13,Qt=0|f[8],Qe=8191&Qt,Ze=Qt>>>13,Pn=0|f[9],Je=8191&Pn,at=Pn>>>13;l.negative=r.negative^s.negative,l.length=19;var un=(A+(d=Math.imul(z,nt))|0)+((8191&(i=(i=Math.imul(z,ot))+Math.imul(J,nt)|0))<<13)|0;A=((m=Math.imul(J,ot))+(i>>>13)|0)+(un>>>26)|0,un&=67108863,d=Math.imul(se,nt),i=(i=Math.imul(se,ot))+Math.imul(he,nt)|0,m=Math.imul(he,ot);var Vt=(A+(d=d+Math.imul(z,ut)|0)|0)+((8191&(i=(i=i+Math.imul(z,st)|0)+Math.imul(J,ut)|0))<<13)|0;A=((m=m+Math.imul(J,st)|0)+(i>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,d=Math.imul(ae,nt),i=(i=Math.imul(ae,ot))+Math.imul(de,nt)|0,m=Math.imul(de,ot),d=d+Math.imul(se,ut)|0,i=(i=i+Math.imul(se,st)|0)+Math.imul(he,ut)|0,m=m+Math.imul(he,st)|0;var Ht=(A+(d=d+Math.imul(z,rt)|0)|0)+((8191&(i=(i=i+Math.imul(z,Ge)|0)+Math.imul(J,rt)|0))<<13)|0;A=((m=m+Math.imul(J,Ge)|0)+(i>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,d=Math.imul(Ee,nt),i=(i=Math.imul(Ee,ot))+Math.imul(ue,nt)|0,m=Math.imul(ue,ot),d=d+Math.imul(ae,ut)|0,i=(i=i+Math.imul(ae,st)|0)+Math.imul(de,ut)|0,m=m+Math.imul(de,st)|0,d=d+Math.imul(se,rt)|0,i=(i=i+Math.imul(se,Ge)|0)+Math.imul(he,rt)|0,m=m+Math.imul(he,Ge)|0;var bn=(A+(d=d+Math.imul(z,qe)|0)|0)+((8191&(i=(i=i+Math.imul(z,We)|0)+Math.imul(J,qe)|0))<<13)|0;A=((m=m+Math.imul(J,We)|0)+(i>>>13)|0)+(bn>>>26)|0,bn&=67108863,d=Math.imul(Se,nt),i=(i=Math.imul(Se,ot))+Math.imul(ie,nt)|0,m=Math.imul(ie,ot),d=d+Math.imul(Ee,ut)|0,i=(i=i+Math.imul(Ee,st)|0)+Math.imul(ue,ut)|0,m=m+Math.imul(ue,st)|0,d=d+Math.imul(ae,rt)|0,i=(i=i+Math.imul(ae,Ge)|0)+Math.imul(de,rt)|0,m=m+Math.imul(de,Ge)|0,d=d+Math.imul(se,qe)|0,i=(i=i+Math.imul(se,We)|0)+Math.imul(he,qe)|0,m=m+Math.imul(he,We)|0;var dn=(A+(d=d+Math.imul(z,ft)|0)|0)+((8191&(i=(i=i+Math.imul(z,Ue)|0)+Math.imul(J,ft)|0))<<13)|0;A=((m=m+Math.imul(J,Ue)|0)+(i>>>13)|0)+(dn>>>26)|0,dn&=67108863,d=Math.imul(Z,nt),i=(i=Math.imul(Z,ot))+Math.imul(le,nt)|0,m=Math.imul(le,ot),d=d+Math.imul(Se,ut)|0,i=(i=i+Math.imul(Se,st)|0)+Math.imul(ie,ut)|0,m=m+Math.imul(ie,st)|0,d=d+Math.imul(Ee,rt)|0,i=(i=i+Math.imul(Ee,Ge)|0)+Math.imul(ue,rt)|0,m=m+Math.imul(ue,Ge)|0,d=d+Math.imul(ae,qe)|0,i=(i=i+Math.imul(ae,We)|0)+Math.imul(de,qe)|0,m=m+Math.imul(de,We)|0,d=d+Math.imul(se,ft)|0,i=(i=i+Math.imul(se,Ue)|0)+Math.imul(he,ft)|0,m=m+Math.imul(he,Ue)|0;var pn=(A+(d=d+Math.imul(z,gt)|0)|0)+((8191&(i=(i=i+Math.imul(z,it)|0)+Math.imul(J,gt)|0))<<13)|0;A=((m=m+Math.imul(J,it)|0)+(i>>>13)|0)+(pn>>>26)|0,pn&=67108863,d=Math.imul(we,nt),i=(i=Math.imul(we,ot))+Math.imul(Te,nt)|0,m=Math.imul(Te,ot),d=d+Math.imul(Z,ut)|0,i=(i=i+Math.imul(Z,st)|0)+Math.imul(le,ut)|0,m=m+Math.imul(le,st)|0,d=d+Math.imul(Se,rt)|0,i=(i=i+Math.imul(Se,Ge)|0)+Math.imul(ie,rt)|0,m=m+Math.imul(ie,Ge)|0,d=d+Math.imul(Ee,qe)|0,i=(i=i+Math.imul(Ee,We)|0)+Math.imul(ue,qe)|0,m=m+Math.imul(ue,We)|0,d=d+Math.imul(ae,ft)|0,i=(i=i+Math.imul(ae,Ue)|0)+Math.imul(de,ft)|0,m=m+Math.imul(de,Ue)|0,d=d+Math.imul(se,gt)|0,i=(i=i+Math.imul(se,it)|0)+Math.imul(he,gt)|0,m=m+Math.imul(he,it)|0;var In=(A+(d=d+Math.imul(z,lt)|0)|0)+((8191&(i=(i=i+Math.imul(z,ze)|0)+Math.imul(J,lt)|0))<<13)|0;A=((m=m+Math.imul(J,ze)|0)+(i>>>13)|0)+(In>>>26)|0,In&=67108863,d=Math.imul(Ne,nt),i=(i=Math.imul(Ne,ot))+Math.imul(Me,nt)|0,m=Math.imul(Me,ot),d=d+Math.imul(we,ut)|0,i=(i=i+Math.imul(we,st)|0)+Math.imul(Te,ut)|0,m=m+Math.imul(Te,st)|0,d=d+Math.imul(Z,rt)|0,i=(i=i+Math.imul(Z,Ge)|0)+Math.imul(le,rt)|0,m=m+Math.imul(le,Ge)|0,d=d+Math.imul(Se,qe)|0,i=(i=i+Math.imul(Se,We)|0)+Math.imul(ie,qe)|0,m=m+Math.imul(ie,We)|0,d=d+Math.imul(Ee,ft)|0,i=(i=i+Math.imul(Ee,Ue)|0)+Math.imul(ue,ft)|0,m=m+Math.imul(ue,Ue)|0,d=d+Math.imul(ae,gt)|0,i=(i=i+Math.imul(ae,it)|0)+Math.imul(de,gt)|0,m=m+Math.imul(de,it)|0,d=d+Math.imul(se,lt)|0,i=(i=i+Math.imul(se,ze)|0)+Math.imul(he,lt)|0,m=m+Math.imul(he,ze)|0;var rn=(A+(d=d+Math.imul(z,dt)|0)|0)+((8191&(i=(i=i+Math.imul(z,Xe)|0)+Math.imul(J,dt)|0))<<13)|0;A=((m=m+Math.imul(J,Xe)|0)+(i>>>13)|0)+(rn>>>26)|0,rn&=67108863,d=Math.imul(De,nt),i=(i=Math.imul(De,ot))+Math.imul(Fe,nt)|0,m=Math.imul(Fe,ot),d=d+Math.imul(Ne,ut)|0,i=(i=i+Math.imul(Ne,st)|0)+Math.imul(Me,ut)|0,m=m+Math.imul(Me,st)|0,d=d+Math.imul(we,rt)|0,i=(i=i+Math.imul(we,Ge)|0)+Math.imul(Te,rt)|0,m=m+Math.imul(Te,Ge)|0,d=d+Math.imul(Z,qe)|0,i=(i=i+Math.imul(Z,We)|0)+Math.imul(le,qe)|0,m=m+Math.imul(le,We)|0,d=d+Math.imul(Se,ft)|0,i=(i=i+Math.imul(Se,Ue)|0)+Math.imul(ie,ft)|0,m=m+Math.imul(ie,Ue)|0,d=d+Math.imul(Ee,gt)|0,i=(i=i+Math.imul(Ee,it)|0)+Math.imul(ue,gt)|0,m=m+Math.imul(ue,it)|0,d=d+Math.imul(ae,lt)|0,i=(i=i+Math.imul(ae,ze)|0)+Math.imul(de,lt)|0,m=m+Math.imul(de,ze)|0,d=d+Math.imul(se,dt)|0,i=(i=i+Math.imul(se,Xe)|0)+Math.imul(he,dt)|0,m=m+Math.imul(he,Xe)|0;var Mn=(A+(d=d+Math.imul(z,Qe)|0)|0)+((8191&(i=(i=i+Math.imul(z,Ze)|0)+Math.imul(J,Qe)|0))<<13)|0;A=((m=m+Math.imul(J,Ze)|0)+(i>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,d=Math.imul(Ve,nt),i=(i=Math.imul(Ve,ot))+Math.imul(Ke,nt)|0,m=Math.imul(Ke,ot),d=d+Math.imul(De,ut)|0,i=(i=i+Math.imul(De,st)|0)+Math.imul(Fe,ut)|0,m=m+Math.imul(Fe,st)|0,d=d+Math.imul(Ne,rt)|0,i=(i=i+Math.imul(Ne,Ge)|0)+Math.imul(Me,rt)|0,m=m+Math.imul(Me,Ge)|0,d=d+Math.imul(we,qe)|0,i=(i=i+Math.imul(we,We)|0)+Math.imul(Te,qe)|0,m=m+Math.imul(Te,We)|0,d=d+Math.imul(Z,ft)|0,i=(i=i+Math.imul(Z,Ue)|0)+Math.imul(le,ft)|0,m=m+Math.imul(le,Ue)|0,d=d+Math.imul(Se,gt)|0,i=(i=i+Math.imul(Se,it)|0)+Math.imul(ie,gt)|0,m=m+Math.imul(ie,it)|0,d=d+Math.imul(Ee,lt)|0,i=(i=i+Math.imul(Ee,ze)|0)+Math.imul(ue,lt)|0,m=m+Math.imul(ue,ze)|0,d=d+Math.imul(ae,dt)|0,i=(i=i+Math.imul(ae,Xe)|0)+Math.imul(de,dt)|0,m=m+Math.imul(de,Xe)|0,d=d+Math.imul(se,Qe)|0,i=(i=i+Math.imul(se,Ze)|0)+Math.imul(he,Qe)|0,m=m+Math.imul(he,Ze)|0;var $t=(A+(d=d+Math.imul(z,Je)|0)|0)+((8191&(i=(i=i+Math.imul(z,at)|0)+Math.imul(J,Je)|0))<<13)|0;A=((m=m+Math.imul(J,at)|0)+(i>>>13)|0)+($t>>>26)|0,$t&=67108863,d=Math.imul(Ve,ut),i=(i=Math.imul(Ve,st))+Math.imul(Ke,ut)|0,m=Math.imul(Ke,st),d=d+Math.imul(De,rt)|0,i=(i=i+Math.imul(De,Ge)|0)+Math.imul(Fe,rt)|0,m=m+Math.imul(Fe,Ge)|0,d=d+Math.imul(Ne,qe)|0,i=(i=i+Math.imul(Ne,We)|0)+Math.imul(Me,qe)|0,m=m+Math.imul(Me,We)|0,d=d+Math.imul(we,ft)|0,i=(i=i+Math.imul(we,Ue)|0)+Math.imul(Te,ft)|0,m=m+Math.imul(Te,Ue)|0,d=d+Math.imul(Z,gt)|0,i=(i=i+Math.imul(Z,it)|0)+Math.imul(le,gt)|0,m=m+Math.imul(le,it)|0,d=d+Math.imul(Se,lt)|0,i=(i=i+Math.imul(Se,ze)|0)+Math.imul(ie,lt)|0,m=m+Math.imul(ie,ze)|0,d=d+Math.imul(Ee,dt)|0,i=(i=i+Math.imul(Ee,Xe)|0)+Math.imul(ue,dt)|0,m=m+Math.imul(ue,Xe)|0,d=d+Math.imul(ae,Qe)|0,i=(i=i+Math.imul(ae,Ze)|0)+Math.imul(de,Qe)|0,m=m+Math.imul(de,Ze)|0;var Nt=(A+(d=d+Math.imul(se,Je)|0)|0)+((8191&(i=(i=i+Math.imul(se,at)|0)+Math.imul(he,Je)|0))<<13)|0;A=((m=m+Math.imul(he,at)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,d=Math.imul(Ve,rt),i=(i=Math.imul(Ve,Ge))+Math.imul(Ke,rt)|0,m=Math.imul(Ke,Ge),d=d+Math.imul(De,qe)|0,i=(i=i+Math.imul(De,We)|0)+Math.imul(Fe,qe)|0,m=m+Math.imul(Fe,We)|0,d=d+Math.imul(Ne,ft)|0,i=(i=i+Math.imul(Ne,Ue)|0)+Math.imul(Me,ft)|0,m=m+Math.imul(Me,Ue)|0,d=d+Math.imul(we,gt)|0,i=(i=i+Math.imul(we,it)|0)+Math.imul(Te,gt)|0,m=m+Math.imul(Te,it)|0,d=d+Math.imul(Z,lt)|0,i=(i=i+Math.imul(Z,ze)|0)+Math.imul(le,lt)|0,m=m+Math.imul(le,ze)|0,d=d+Math.imul(Se,dt)|0,i=(i=i+Math.imul(Se,Xe)|0)+Math.imul(ie,dt)|0,m=m+Math.imul(ie,Xe)|0,d=d+Math.imul(Ee,Qe)|0,i=(i=i+Math.imul(Ee,Ze)|0)+Math.imul(ue,Qe)|0,m=m+Math.imul(ue,Ze)|0;var xn=(A+(d=d+Math.imul(ae,Je)|0)|0)+((8191&(i=(i=i+Math.imul(ae,at)|0)+Math.imul(de,Je)|0))<<13)|0;A=((m=m+Math.imul(de,at)|0)+(i>>>13)|0)+(xn>>>26)|0,xn&=67108863,d=Math.imul(Ve,qe),i=(i=Math.imul(Ve,We))+Math.imul(Ke,qe)|0,m=Math.imul(Ke,We),d=d+Math.imul(De,ft)|0,i=(i=i+Math.imul(De,Ue)|0)+Math.imul(Fe,ft)|0,m=m+Math.imul(Fe,Ue)|0,d=d+Math.imul(Ne,gt)|0,i=(i=i+Math.imul(Ne,it)|0)+Math.imul(Me,gt)|0,m=m+Math.imul(Me,it)|0,d=d+Math.imul(we,lt)|0,i=(i=i+Math.imul(we,ze)|0)+Math.imul(Te,lt)|0,m=m+Math.imul(Te,ze)|0,d=d+Math.imul(Z,dt)|0,i=(i=i+Math.imul(Z,Xe)|0)+Math.imul(le,dt)|0,m=m+Math.imul(le,Xe)|0,d=d+Math.imul(Se,Qe)|0,i=(i=i+Math.imul(Se,Ze)|0)+Math.imul(ie,Qe)|0,m=m+Math.imul(ie,Ze)|0;var wn=(A+(d=d+Math.imul(Ee,Je)|0)|0)+((8191&(i=(i=i+Math.imul(Ee,at)|0)+Math.imul(ue,Je)|0))<<13)|0;A=((m=m+Math.imul(ue,at)|0)+(i>>>13)|0)+(wn>>>26)|0,wn&=67108863,d=Math.imul(Ve,ft),i=(i=Math.imul(Ve,Ue))+Math.imul(Ke,ft)|0,m=Math.imul(Ke,Ue),d=d+Math.imul(De,gt)|0,i=(i=i+Math.imul(De,it)|0)+Math.imul(Fe,gt)|0,m=m+Math.imul(Fe,it)|0,d=d+Math.imul(Ne,lt)|0,i=(i=i+Math.imul(Ne,ze)|0)+Math.imul(Me,lt)|0,m=m+Math.imul(Me,ze)|0,d=d+Math.imul(we,dt)|0,i=(i=i+Math.imul(we,Xe)|0)+Math.imul(Te,dt)|0,m=m+Math.imul(Te,Xe)|0,d=d+Math.imul(Z,Qe)|0,i=(i=i+Math.imul(Z,Ze)|0)+Math.imul(le,Qe)|0,m=m+Math.imul(le,Ze)|0;var _n=(A+(d=d+Math.imul(Se,Je)|0)|0)+((8191&(i=(i=i+Math.imul(Se,at)|0)+Math.imul(ie,Je)|0))<<13)|0;A=((m=m+Math.imul(ie,at)|0)+(i>>>13)|0)+(_n>>>26)|0,_n&=67108863,d=Math.imul(Ve,gt),i=(i=Math.imul(Ve,it))+Math.imul(Ke,gt)|0,m=Math.imul(Ke,it),d=d+Math.imul(De,lt)|0,i=(i=i+Math.imul(De,ze)|0)+Math.imul(Fe,lt)|0,m=m+Math.imul(Fe,ze)|0,d=d+Math.imul(Ne,dt)|0,i=(i=i+Math.imul(Ne,Xe)|0)+Math.imul(Me,dt)|0,m=m+Math.imul(Me,Xe)|0,d=d+Math.imul(we,Qe)|0,i=(i=i+Math.imul(we,Ze)|0)+Math.imul(Te,Qe)|0,m=m+Math.imul(Te,Ze)|0;var xt=(A+(d=d+Math.imul(Z,Je)|0)|0)+((8191&(i=(i=i+Math.imul(Z,at)|0)+Math.imul(le,Je)|0))<<13)|0;A=((m=m+Math.imul(le,at)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,d=Math.imul(Ve,lt),i=(i=Math.imul(Ve,ze))+Math.imul(Ke,lt)|0,m=Math.imul(Ke,ze),d=d+Math.imul(De,dt)|0,i=(i=i+Math.imul(De,Xe)|0)+Math.imul(Fe,dt)|0,m=m+Math.imul(Fe,Xe)|0,d=d+Math.imul(Ne,Qe)|0,i=(i=i+Math.imul(Ne,Ze)|0)+Math.imul(Me,Qe)|0,m=m+Math.imul(Me,Ze)|0;var Rn=(A+(d=d+Math.imul(we,Je)|0)|0)+((8191&(i=(i=i+Math.imul(we,at)|0)+Math.imul(Te,Je)|0))<<13)|0;A=((m=m+Math.imul(Te,at)|0)+(i>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,d=Math.imul(Ve,dt),i=(i=Math.imul(Ve,Xe))+Math.imul(Ke,dt)|0,m=Math.imul(Ke,Xe),d=d+Math.imul(De,Qe)|0,i=(i=i+Math.imul(De,Ze)|0)+Math.imul(Fe,Qe)|0,m=m+Math.imul(Fe,Ze)|0;var Jt=(A+(d=d+Math.imul(Ne,Je)|0)|0)+((8191&(i=(i=i+Math.imul(Ne,at)|0)+Math.imul(Me,Je)|0))<<13)|0;A=((m=m+Math.imul(Me,at)|0)+(i>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,d=Math.imul(Ve,Qe),i=(i=Math.imul(Ve,Ze))+Math.imul(Ke,Qe)|0,m=Math.imul(Ke,Ze);var tn=(A+(d=d+Math.imul(De,Je)|0)|0)+((8191&(i=(i=i+Math.imul(De,at)|0)+Math.imul(Fe,Je)|0))<<13)|0;A=((m=m+Math.imul(Fe,at)|0)+(i>>>13)|0)+(tn>>>26)|0,tn&=67108863;var Sn=(A+(d=Math.imul(Ve,Je))|0)+((8191&(i=(i=Math.imul(Ve,at))+Math.imul(Ke,Je)|0))<<13)|0;return A=((m=Math.imul(Ke,at))+(i>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,M[0]=un,M[1]=Vt,M[2]=Ht,M[3]=bn,M[4]=dn,M[5]=pn,M[6]=In,M[7]=rn,M[8]=Mn,M[9]=$t,M[10]=Nt,M[11]=xn,M[12]=wn,M[13]=_n,M[14]=xt,M[15]=Rn,M[16]=Jt,M[17]=tn,M[18]=Sn,0!==A&&(M[19]=A,l.length++),l};function k(R,r,s){return(new O).mulp(R,r,s)}function O(R,r){this.x=R,this.y=r}Math.imul||(I=w),u.prototype.mulTo=function(r,s){var a=this.length+r.length;return 10===this.length&&10===r.length?I(this,r,s):a<63?w(this,r,s):a<1024?function(R,r,s){s.negative=r.negative^R.negative,s.length=R.length+r.length;for(var l=0,a=0,f=0;f<s.length-1;f++){var M=a;a=0;for(var A=67108863&l,d=Math.min(f,r.length-1),i=Math.max(0,f-R.length+1);i<=d;i++){var J=(0|R.words[f-i])*(0|r.words[i]),ce=67108863&J;A=67108863&(ce=ce+A|0),a+=(M=(M=M+(J/67108864|0)|0)+(ce>>>26)|0)>>>26,M&=67108863}s.words[f]=A,l=M,M=a}return 0!==l?s.words[f]=l:s.length--,s.strip()}(this,r,s):k(this,r,s)},O.prototype.makeRBT=function(r){for(var s=new Array(r),l=u.prototype._countBits(r)-1,a=0;a<r;a++)s[a]=this.revBin(a,l,r);return s},O.prototype.revBin=function(r,s,l){if(0===r||r===l-1)return r;for(var a=0,f=0;f<s;f++)a|=(1&r)<<s-f-1,r>>=1;return a},O.prototype.permute=function(r,s,l,a,f,M){for(var A=0;A<M;A++)a[A]=s[r[A]],f[A]=l[r[A]]},O.prototype.transform=function(r,s,l,a,f,M){this.permute(M,r,s,l,a,f);for(var A=1;A<f;A<<=1)for(var d=A<<1,i=Math.cos(2*Math.PI/d),m=Math.sin(2*Math.PI/d),q=0;q<f;q+=d)for(var z=i,J=m,ce=0;ce<A;ce++){var se=l[q+ce],he=a[q+ce],ve=l[q+ce+A],ae=a[q+ce+A],de=z*ve-J*ae;ae=z*ae+J*ve,l[q+ce]=se+(ve=de),a[q+ce]=he+ae,l[q+ce+A]=se-ve,a[q+ce+A]=he-ae,ce!==d&&(de=i*z-m*J,J=i*J+m*z,z=de)}},O.prototype.guessLen13b=function(r,s){var l=1|Math.max(s,r),a=1&l,f=0;for(l=l/2|0;l;l>>>=1)f++;return 1<<f+1+a},O.prototype.conjugate=function(r,s,l){if(!(l<=1))for(var a=0;a<l/2;a++){var f=r[a];r[a]=r[l-a-1],r[l-a-1]=f,f=s[a],s[a]=-s[l-a-1],s[l-a-1]=-f}},O.prototype.normalize13b=function(r,s){for(var l=0,a=0;a<s/2;a++){var f=8192*Math.round(r[2*a+1]/s)+Math.round(r[2*a]/s)+l;r[a]=67108863&f,l=f<67108864?0:f/67108864|0}return r},O.prototype.convert13b=function(r,s,l,a){for(var f=0,M=0;M<s;M++)l[2*M]=8191&(f+=0|r[M]),l[2*M+1]=8191&(f>>>=13),f>>>=13;for(M=2*s;M<a;++M)l[M]=0;y(0===f),y(0==(-8192&f))},O.prototype.stub=function(r){for(var s=new Array(r),l=0;l<r;l++)s[l]=0;return s},O.prototype.mulp=function(r,s,l){var a=2*this.guessLen13b(r.length,s.length),f=this.makeRBT(a),M=this.stub(a),A=new Array(a),d=new Array(a),i=new Array(a),m=new Array(a),q=new Array(a),z=new Array(a),J=l.words;J.length=a,this.convert13b(r.words,r.length,A,a),this.convert13b(s.words,s.length,m,a),this.transform(A,M,d,i,a,f),this.transform(m,M,q,z,a,f);for(var ce=0;ce<a;ce++){var se=d[ce]*q[ce]-i[ce]*z[ce];i[ce]=d[ce]*z[ce]+i[ce]*q[ce],d[ce]=se}return this.conjugate(d,i,a),this.transform(d,i,J,M,a,f),this.conjugate(J,M,a),this.normalize13b(J,a),l.negative=r.negative^s.negative,l.length=r.length+s.length,l.strip()},u.prototype.mul=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),this.mulTo(r,s)},u.prototype.mulf=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),k(this,r,s)},u.prototype.imul=function(r){return this.clone().mulTo(r,this)},u.prototype.imuln=function(r){y("number"==typeof r),y(r<67108864);for(var s=0,l=0;l<this.length;l++){var a=(0|this.words[l])*r,f=(67108863&a)+(67108863&s);s>>=26,s+=a/67108864|0,s+=f>>>26,this.words[l]=67108863&f}return 0!==s&&(this.words[l]=s,this.length++),this},u.prototype.muln=function(r){return this.clone().imuln(r)},u.prototype.sqr=function(){return this.mul(this)},u.prototype.isqr=function(){return this.imul(this.clone())},u.prototype.pow=function(r){var s=function(R){for(var r=new Array(R.bitLength()),s=0;s<r.length;s++){var a=s%26;r[s]=(R.words[s/26|0]&1<<a)>>>a}return r}(r);if(0===s.length)return new u(1);for(var l=this,a=0;a<s.length&&0===s[a];a++,l=l.sqr());if(++a<s.length)for(var f=l.sqr();a<s.length;a++,f=f.sqr())0!==s[a]&&(l=l.mul(f));return l},u.prototype.iushln=function(r){y("number"==typeof r&&r>=0);var f,s=r%26,l=(r-s)/26,a=67108863>>>26-s<<26-s;if(0!==s){var M=0;for(f=0;f<this.length;f++){var A=this.words[f]&a;this.words[f]=(0|this.words[f])-A<<s|M,M=A>>>26-s}M&&(this.words[f]=M,this.length++)}if(0!==l){for(f=this.length-1;f>=0;f--)this.words[f+l]=this.words[f];for(f=0;f<l;f++)this.words[f]=0;this.length+=l}return this.strip()},u.prototype.ishln=function(r){return y(0===this.negative),this.iushln(r)},u.prototype.iushrn=function(r,s,l){var a;y("number"==typeof r&&r>=0),a=s?(s-s%26)/26:0;var f=r%26,M=Math.min((r-f)/26,this.length),A=67108863^67108863>>>f<<f,d=l;if(a-=M,a=Math.max(0,a),d){for(var i=0;i<M;i++)d.words[i]=this.words[i];d.length=M}if(0!==M)if(this.length>M)for(this.length-=M,i=0;i<this.length;i++)this.words[i]=this.words[i+M];else this.words[0]=0,this.length=1;var m=0;for(i=this.length-1;i>=0&&(0!==m||i>=a);i--){var q=0|this.words[i];this.words[i]=m<<26-f|q>>>f,m=q&A}return d&&0!==m&&(d.words[d.length++]=m),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},u.prototype.ishrn=function(r,s,l){return y(0===this.negative),this.iushrn(r,s,l)},u.prototype.shln=function(r){return this.clone().ishln(r)},u.prototype.ushln=function(r){return this.clone().iushln(r)},u.prototype.shrn=function(r){return this.clone().ishrn(r)},u.prototype.ushrn=function(r){return this.clone().iushrn(r)},u.prototype.testn=function(r){y("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return!(this.length<=l||!(this.words[l]&1<<s))},u.prototype.imaskn=function(r){y("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return y(0===this.negative,"imaskn works only with positive numbers"),this.length<=l?this:(0!==s&&l++,this.length=Math.min(l,this.length),0!==s&&(this.words[this.length-1]&=67108863^67108863>>>s<<s),this.strip())},u.prototype.maskn=function(r){return this.clone().imaskn(r)},u.prototype.iaddn=function(r){return y("number"==typeof r),y(r<67108864),r<0?this.isubn(-r):0!==this.negative?1===this.length&&(0|this.words[0])<r?(this.words[0]=r-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(r),this.negative=1,this):this._iaddn(r)},u.prototype._iaddn=function(r){this.words[0]+=r;for(var s=0;s<this.length&&this.words[s]>=67108864;s++)this.words[s]-=67108864,s===this.length-1?this.words[s+1]=1:this.words[s+1]++;return this.length=Math.max(this.length,s+1),this},u.prototype.isubn=function(r){if(y("number"==typeof r),y(r<67108864),r<0)return this.iaddn(-r);if(0!==this.negative)return this.negative=0,this.iaddn(r),this.negative=1,this;if(this.words[0]-=r,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var s=0;s<this.length&&this.words[s]<0;s++)this.words[s]+=67108864,this.words[s+1]-=1;return this.strip()},u.prototype.addn=function(r){return this.clone().iaddn(r)},u.prototype.subn=function(r){return this.clone().isubn(r)},u.prototype.iabs=function(){return this.negative=0,this},u.prototype.abs=function(){return this.clone().iabs()},u.prototype._ishlnsubmul=function(r,s,l){var f;this._expand(r.length+l);var M,A=0;for(f=0;f<r.length;f++){M=(0|this.words[f+l])+A;var d=(0|r.words[f])*s;A=((M-=67108863&d)>>26)-(d/67108864|0),this.words[f+l]=67108863&M}for(;f<this.length-l;f++)A=(M=(0|this.words[f+l])+A)>>26,this.words[f+l]=67108863&M;if(0===A)return this.strip();for(y(-1===A),A=0,f=0;f<this.length;f++)A=(M=-(0|this.words[f])+A)>>26,this.words[f]=67108863&M;return this.negative=1,this.strip()},u.prototype._wordDiv=function(r,s){var l,a=this.clone(),f=r,M=0|f.words[f.length-1];0!=(l=26-this._countBits(M))&&(f=f.ushln(l),a.iushln(l),M=0|f.words[f.length-1]);var i,d=a.length-f.length;if("mod"!==s){(i=new u(null)).length=d+1,i.words=new Array(i.length);for(var m=0;m<i.length;m++)i.words[m]=0}var q=a.clone()._ishlnsubmul(f,1,d);0===q.negative&&(a=q,i&&(i.words[d]=1));for(var z=d-1;z>=0;z--){var J=67108864*(0|a.words[f.length+z])+(0|a.words[f.length+z-1]);for(J=Math.min(J/M|0,67108863),a._ishlnsubmul(f,J,z);0!==a.negative;)J--,a.negative=0,a._ishlnsubmul(f,1,z),a.isZero()||(a.negative^=1);i&&(i.words[z]=J)}return i&&i.strip(),a.strip(),"div"!==s&&0!==l&&a.iushrn(l),{div:i||null,mod:a}},u.prototype.divmod=function(r,s,l){return y(!r.isZero()),this.isZero()?{div:new u(0),mod:new u(0)}:0!==this.negative&&0===r.negative?(M=this.neg().divmod(r,s),"mod"!==s&&(a=M.div.neg()),"div"!==s&&(f=M.mod.neg(),l&&0!==f.negative&&f.iadd(r)),{div:a,mod:f}):0===this.negative&&0!==r.negative?(M=this.divmod(r.neg(),s),"mod"!==s&&(a=M.div.neg()),{div:a,mod:M.mod}):0!=(this.negative&r.negative)?(M=this.neg().divmod(r.neg(),s),"div"!==s&&(f=M.mod.neg(),l&&0!==f.negative&&f.isub(r)),{div:M.div,mod:f}):r.length>this.length||this.cmp(r)<0?{div:new u(0),mod:this}:1===r.length?"div"===s?{div:this.divn(r.words[0]),mod:null}:"mod"===s?{div:null,mod:new u(this.modn(r.words[0]))}:{div:this.divn(r.words[0]),mod:new u(this.modn(r.words[0]))}:this._wordDiv(r,s);var a,f,M},u.prototype.div=function(r){return this.divmod(r,"div",!1).div},u.prototype.mod=function(r){return this.divmod(r,"mod",!1).mod},u.prototype.umod=function(r){return this.divmod(r,"mod",!0).mod},u.prototype.divRound=function(r){var s=this.divmod(r);if(s.mod.isZero())return s.div;var l=0!==s.div.negative?s.mod.isub(r):s.mod,a=r.ushrn(1),f=r.andln(1),M=l.cmp(a);return M<0||1===f&&0===M?s.div:0!==s.div.negative?s.div.isubn(1):s.div.iaddn(1)},u.prototype.modn=function(r){y(r<=67108863);for(var s=(1<<26)%r,l=0,a=this.length-1;a>=0;a--)l=(s*l+(0|this.words[a]))%r;return l},u.prototype.idivn=function(r){y(r<=67108863);for(var s=0,l=this.length-1;l>=0;l--){var a=(0|this.words[l])+67108864*s;this.words[l]=a/r|0,s=a%r}return this.strip()},u.prototype.divn=function(r){return this.clone().idivn(r)},u.prototype.egcd=function(r){y(0===r.negative),y(!r.isZero());var s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),M=new u(0),A=new u(1),d=0;s.isEven()&&l.isEven();)s.iushrn(1),l.iushrn(1),++d;for(var i=l.clone(),m=s.clone();!s.isZero();){for(var q=0,z=1;0==(s.words[0]&z)&&q<26;++q,z<<=1);if(q>0)for(s.iushrn(q);q-- >0;)(a.isOdd()||f.isOdd())&&(a.iadd(i),f.isub(m)),a.iushrn(1),f.iushrn(1);for(var J=0,ce=1;0==(l.words[0]&ce)&&J<26;++J,ce<<=1);if(J>0)for(l.iushrn(J);J-- >0;)(M.isOdd()||A.isOdd())&&(M.iadd(i),A.isub(m)),M.iushrn(1),A.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(M),f.isub(A)):(l.isub(s),M.isub(a),A.isub(f))}return{a:M,b:A,gcd:l.iushln(d)}},u.prototype._invmp=function(r){y(0===r.negative),y(!r.isZero());var q,s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),M=l.clone();s.cmpn(1)>0&&l.cmpn(1)>0;){for(var A=0,d=1;0==(s.words[0]&d)&&A<26;++A,d<<=1);if(A>0)for(s.iushrn(A);A-- >0;)a.isOdd()&&a.iadd(M),a.iushrn(1);for(var i=0,m=1;0==(l.words[0]&m)&&i<26;++i,m<<=1);if(i>0)for(l.iushrn(i);i-- >0;)f.isOdd()&&f.iadd(M),f.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(f)):(l.isub(s),f.isub(a))}return(q=0===s.cmpn(1)?a:f).cmpn(0)<0&&q.iadd(r),q},u.prototype.gcd=function(r){if(this.isZero())return r.abs();if(r.isZero())return this.abs();var s=this.clone(),l=r.clone();s.negative=0,l.negative=0;for(var a=0;s.isEven()&&l.isEven();a++)s.iushrn(1),l.iushrn(1);for(;;){for(;s.isEven();)s.iushrn(1);for(;l.isEven();)l.iushrn(1);var f=s.cmp(l);if(f<0){var M=s;s=l,l=M}else if(0===f||0===l.cmpn(1))break;s.isub(l)}return l.iushln(a)},u.prototype.invm=function(r){return this.egcd(r).a.umod(r)},u.prototype.isEven=function(){return 0==(1&this.words[0])},u.prototype.isOdd=function(){return 1==(1&this.words[0])},u.prototype.andln=function(r){return this.words[0]&r},u.prototype.bincn=function(r){y("number"==typeof r);var s=r%26,l=(r-s)/26,a=1<<s;if(this.length<=l)return this._expand(l+1),this.words[l]|=a,this;for(var f=a,M=l;0!==f&&M<this.length;M++){var A=0|this.words[M];f=(A+=f)>>>26,this.words[M]=A&=67108863}return 0!==f&&(this.words[M]=f,this.length++),this},u.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},u.prototype.cmpn=function(r){var l,s=r<0;if(0!==this.negative&&!s)return-1;if(0===this.negative&&s)return 1;if(this.strip(),this.length>1)l=1;else{s&&(r=-r),y(r<=67108863,"Number is too big");var a=0|this.words[0];l=a===r?0:a<r?-1:1}return 0!==this.negative?0|-l:l},u.prototype.cmp=function(r){if(0!==this.negative&&0===r.negative)return-1;if(0===this.negative&&0!==r.negative)return 1;var s=this.ucmp(r);return 0!==this.negative?0|-s:s},u.prototype.ucmp=function(r){if(this.length>r.length)return 1;if(this.length<r.length)return-1;for(var s=0,l=this.length-1;l>=0;l--){var a=0|this.words[l],f=0|r.words[l];if(a!==f){a<f?s=-1:a>f&&(s=1);break}}return s},u.prototype.gtn=function(r){return 1===this.cmpn(r)},u.prototype.gt=function(r){return 1===this.cmp(r)},u.prototype.gten=function(r){return this.cmpn(r)>=0},u.prototype.gte=function(r){return this.cmp(r)>=0},u.prototype.ltn=function(r){return-1===this.cmpn(r)},u.prototype.lt=function(r){return-1===this.cmp(r)},u.prototype.lten=function(r){return this.cmpn(r)<=0},u.prototype.lte=function(r){return this.cmp(r)<=0},u.prototype.eqn=function(r){return 0===this.cmpn(r)},u.prototype.eq=function(r){return 0===this.cmp(r)},u.red=function(r){return new K(r)},u.prototype.toRed=function(r){return y(!this.red,"Already a number in reduction context"),y(0===this.negative,"red works only with positives"),r.convertTo(this)._forceRed(r)},u.prototype.fromRed=function(){return y(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},u.prototype._forceRed=function(r){return this.red=r,this},u.prototype.forceRed=function(r){return y(!this.red,"Already a number in reduction context"),this._forceRed(r)},u.prototype.redAdd=function(r){return y(this.red,"redAdd works only with red numbers"),this.red.add(this,r)},u.prototype.redIAdd=function(r){return y(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,r)},u.prototype.redSub=function(r){return y(this.red,"redSub works only with red numbers"),this.red.sub(this,r)},u.prototype.redISub=function(r){return y(this.red,"redISub works only with red numbers"),this.red.isub(this,r)},u.prototype.redShl=function(r){return y(this.red,"redShl works only with red numbers"),this.red.shl(this,r)},u.prototype.redMul=function(r){return y(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.mul(this,r)},u.prototype.redIMul=function(r){return y(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.imul(this,r)},u.prototype.redSqr=function(){return y(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},u.prototype.redISqr=function(){return y(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},u.prototype.redSqrt=function(){return y(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},u.prototype.redInvm=function(){return y(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},u.prototype.redNeg=function(){return y(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},u.prototype.redPow=function(r){return y(this.red&&!r.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,r)};var V={k256:null,p224:null,p192:null,p25519:null};function B(R,r){this.name=R,this.p=new u(r,16),this.n=this.p.bitLength(),this.k=new u(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function U(){B.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function j(){B.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function W(){B.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function X(){B.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function K(R){if("string"==typeof R){var r=u._prime(R);this.m=r.p,this.prime=r}else y(R.gtn(1),"modulus must be greater than 1"),this.m=R,this.prime=null}function ge(R){K.call(this,R),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new u(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}B.prototype._tmp=function(){var r=new u(null);return r.words=new Array(Math.ceil(this.n/13)),r},B.prototype.ireduce=function(r){var l,s=r;do{this.split(s,this.tmp),l=(s=(s=this.imulK(s)).iadd(this.tmp)).bitLength()}while(l>this.n);var a=l<this.n?-1:s.ucmp(this.p);return 0===a?(s.words[0]=0,s.length=1):a>0?s.isub(this.p):void 0!==s.strip?s.strip():s._strip(),s},B.prototype.split=function(r,s){r.iushrn(this.n,0,s)},B.prototype.imulK=function(r){return r.imul(this.k)},x(U,B),U.prototype.split=function(r,s){for(var l=4194303,a=Math.min(r.length,9),f=0;f<a;f++)s.words[f]=r.words[f];if(s.length=a,r.length<=9)return r.words[0]=0,void(r.length=1);var M=r.words[9];for(s.words[s.length++]=M&l,f=10;f<r.length;f++){var A=0|r.words[f];r.words[f-10]=(A&l)<<4|M>>>22,M=A}r.words[f-10]=M>>>=22,r.length-=0===M&&r.length>10?10:9},U.prototype.imulK=function(r){r.words[r.length]=0,r.words[r.length+1]=0,r.length+=2;for(var s=0,l=0;l<r.length;l++){var a=0|r.words[l];r.words[l]=67108863&(s+=977*a),s=64*a+(s/67108864|0)}return 0===r.words[r.length-1]&&(r.length--,0===r.words[r.length-1]&&r.length--),r},x(j,B),x(W,B),x(X,B),X.prototype.imulK=function(r){for(var s=0,l=0;l<r.length;l++){var a=19*(0|r.words[l])+s,f=67108863&a;a>>>=26,r.words[l]=f,s=a}return 0!==s&&(r.words[r.length++]=s),r},u._prime=function(r){if(V[r])return V[r];var s;if("k256"===r)s=new U;else if("p224"===r)s=new j;else if("p192"===r)s=new W;else{if("p25519"!==r)throw new Error("Unknown prime "+r);s=new X}return V[r]=s,s},K.prototype._verify1=function(r){y(0===r.negative,"red works only with positives"),y(r.red,"red works only with red numbers")},K.prototype._verify2=function(r,s){y(0==(r.negative|s.negative),"red works only with positives"),y(r.red&&r.red===s.red,"red works only with red numbers")},K.prototype.imod=function(r){return this.prime?this.prime.ireduce(r)._forceRed(this):r.umod(this.m)._forceRed(this)},K.prototype.neg=function(r){return r.isZero()?r.clone():this.m.sub(r)._forceRed(this)},K.prototype.add=function(r,s){this._verify2(r,s);var l=r.add(s);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},K.prototype.iadd=function(r,s){this._verify2(r,s);var l=r.iadd(s);return l.cmp(this.m)>=0&&l.isub(this.m),l},K.prototype.sub=function(r,s){this._verify2(r,s);var l=r.sub(s);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},K.prototype.isub=function(r,s){this._verify2(r,s);var l=r.isub(s);return l.cmpn(0)<0&&l.iadd(this.m),l},K.prototype.shl=function(r,s){return this._verify1(r),this.imod(r.ushln(s))},K.prototype.imul=function(r,s){return this._verify2(r,s),this.imod(r.imul(s))},K.prototype.mul=function(r,s){return this._verify2(r,s),this.imod(r.mul(s))},K.prototype.isqr=function(r){return this.imul(r,r.clone())},K.prototype.sqr=function(r){return this.mul(r,r)},K.prototype.sqrt=function(r){if(r.isZero())return r.clone();var s=this.m.andln(3);if(y(s%2==1),3===s){var l=this.m.add(new u(1)).iushrn(2);return this.pow(r,l)}for(var a=this.m.subn(1),f=0;!a.isZero()&&0===a.andln(1);)f++,a.iushrn(1);y(!a.isZero());var M=new u(1).toRed(this),A=M.redNeg(),d=this.m.subn(1).iushrn(1),i=this.m.bitLength();for(i=new u(2*i*i).toRed(this);0!==this.pow(i,d).cmp(A);)i.redIAdd(A);for(var m=this.pow(i,a),q=this.pow(r,a.addn(1).iushrn(1)),z=this.pow(r,a),J=f;0!==z.cmp(M);){for(var ce=z,se=0;0!==ce.cmp(M);se++)ce=ce.redSqr();y(se<J);var he=this.pow(m,new u(1).iushln(J-se-1));q=q.redMul(he),m=he.redSqr(),z=z.redMul(m),J=se}return q},K.prototype.invm=function(r){var s=r._invmp(this.m);return 0!==s.negative?(s.negative=0,this.imod(s).redNeg()):this.imod(s)},K.prototype.pow=function(r,s){if(s.isZero())return new u(1).toRed(this);if(0===s.cmpn(1))return r.clone();var a=new Array(16);a[0]=new u(1).toRed(this),a[1]=r;for(var f=2;f<a.length;f++)a[f]=this.mul(a[f-1],r);var M=a[0],A=0,d=0,i=s.bitLength()%26;for(0===i&&(i=26),f=s.length-1;f>=0;f--){for(var m=s.words[f],q=i-1;q>=0;q--){var z=m>>q&1;M!==a[0]&&(M=this.sqr(M)),0!==z||0!==A?(A<<=1,A|=z,(4==++d||0===f&&0===q)&&(M=this.mul(M,a[A]),d=0,A=0)):d=0}i=26}return M},K.prototype.convertTo=function(r){var s=r.umod(this.m);return s===r?s.clone():s},K.prototype.convertFrom=function(r){var s=r.clone();return s.red=null,s},u.mont=function(r){return new ge(r)},x(ge,K),ge.prototype.convertTo=function(r){return this.imod(r.ushln(this.shift))},ge.prototype.convertFrom=function(r){var s=this.imod(r.mul(this.rinv));return s.red=null,s},ge.prototype.imul=function(r,s){if(r.isZero()||s.isZero())return r.words[0]=0,r.length=1,r;var l=r.imul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),M=f;return f.cmp(this.m)>=0?M=f.isub(this.m):f.cmpn(0)<0&&(M=f.iadd(this.m)),M._forceRed(this)},ge.prototype.mul=function(r,s){if(r.isZero()||s.isZero())return new u(0)._forceRed(this);var l=r.mul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),M=f;return f.cmp(this.m)>=0?M=f.isub(this.m):f.cmpn(0)<0&&(M=f.iadd(this.m)),M._forceRed(this)},ge.prototype.invm=function(r){return this.imod(r._invmp(this.m).mul(this.r2))._forceRed(this)}}(Y=T.nmd(Y),this)},1548:(Y,L,T)=>{var p=T(1997),N=T(444),y=T(4541),x=T(6494),u=T(5842),g=T(2506),C=T(6829),P=T(5859).Buffer;Y.exports=function(b,w,I){var D;D=b.padding?b.padding:I?1:4;var V,k=p(b),O=k.modulus.byteLength();if(w.length>O||new x(w).cmp(k.modulus)>=0)throw new Error("decryption error");V=I?C(new x(w),k):u(w,k);var B=P.alloc(O-V.length);if(V=P.concat([B,V],O),4===D)return function(_,b){var w=_.modulus.byteLength(),I=g("sha1").update(P.alloc(0)).digest(),D=I.length;if(0!==b[0])throw new Error("decryption error");var k=b.slice(1,D+1),O=b.slice(D+1),V=y(k,N(O,D)),B=y(O,N(V,w-D-1));if(function(_,b){_=P.from(_),b=P.from(b);var w=0,I=_.length;_.length!==b.length&&(w++,I=Math.min(_.length,b.length));for(var D=-1;++D<I;)w+=_[D]^b[D];return w}(I,B.slice(0,D)))throw new Error("decryption error");for(var U=D;0===B[U];)U++;if(1!==B[U++])throw new Error("decryption error");return B.slice(U)}(k,V);if(1===D)return function(_,b,w){for(var I=b.slice(0,2),D=2,k=0;0!==b[D++];)if(D>=b.length){k++;break}var O=b.slice(2,D-1);if(("0002"!==I.toString("hex")&&!w||"0001"!==I.toString("hex")&&w)&&k++,O.length<8&&k++,k)throw new Error("decryption error");return b.slice(D)}(0,V,I);if(3===D)return V;throw new Error("unknown padding")}},4760:(Y,L,T)=>{var p=T(1997),N=T(6589),y=T(2506),x=T(444),u=T(4541),g=T(6494),C=T(6829),P=T(5842),E=T(5859).Buffer;Y.exports=function(w,I,D){var k;k=w.padding?w.padding:D?1:4;var V,O=p(w);if(4===k)V=function(b,w){var I=b.modulus.byteLength(),D=w.length,k=y("sha1").update(E.alloc(0)).digest(),O=k.length,V=2*O;if(D>I-V-2)throw new Error("message too long");var B=E.alloc(I-D-V-2),U=I-O-1,j=N(O),W=u(E.concat([k,B,E.alloc(1,1),w],U),x(j,U)),X=u(j,x(W,O));return new g(E.concat([E.alloc(1),X,W],I))}(O,I);else if(1===k)V=function(b,w,I){var O,D=w.length,k=b.modulus.byteLength();if(D>k-11)throw new Error("message too long");return O=I?E.alloc(k-D-3,255):function(b){for(var O,w=E.allocUnsafe(b),I=0,D=N(2*b),k=0;I<b;)k===D.length&&(D=N(2*b),k=0),(O=D[k++])&&(w[I++]=O);return w}(k-D-3),new g(E.concat([E.from([0,I?1:2]),O,E.alloc(1),w],k))}(O,I,D);else{if(3!==k)throw new Error("unknown padding");if((V=new g(I)).cmp(O.modulus)>=0)throw new Error("data too long for modulus")}return D?P(V,O):C(V,O)}},6829:(Y,L,T)=>{var p=T(6494),N=T(5859).Buffer;Y.exports=function(x,u){return N.from(x.toRed(p.mont(u.modulus)).redPow(new p(u.publicExponent)).fromRed().toArray())}},4541:Y=>{Y.exports=function(T,p){for(var N=T.length,y=-1;++y<N;)T[y]^=p[y];return T}},6589:(Y,L,T)=>{"use strict";var p=65536,x=T(5859).Buffer,u=global.crypto||global.msCrypto;Y.exports=u&&u.getRandomValues?function(C,P){if(C>4294967295)throw new RangeError("requested too many random bytes");var E=x.allocUnsafe(C);if(C>0)if(C>p)for(var v=0;v<C;v+=p)u.getRandomValues(E.slice(v,v+p));else u.getRandomValues(E);return"function"==typeof P?process.nextTick(function(){P(null,E)}):E}:function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},3594:(Y,L,T)=>{"use strict";function p(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var N=T(5859),y=T(6589),x=N.Buffer,u=N.kMaxLength,g=global.crypto||global.msCrypto,C=Math.pow(2,32)-1;function P(b,w){if("number"!=typeof b||b!=b)throw new TypeError("offset must be a number");if(b>C||b<0)throw new TypeError("offset must be a uint32");if(b>u||b>w)throw new RangeError("offset out of range")}function E(b,w,I){if("number"!=typeof b||b!=b)throw new TypeError("size must be a number");if(b>C||b<0)throw new TypeError("size must be a uint32");if(b+w>I||b>u)throw new RangeError("buffer too small")}function h(b,w,I,D){if(process.browser){var O=new Uint8Array(b.buffer,w,I);return g.getRandomValues(O),D?void process.nextTick(function(){D(null,b)}):b}if(!D)return y(I).copy(b,w),b;y(I,function(B,U){if(B)return D(B);U.copy(b,w),D(null,b)})}g&&g.getRandomValues||!process.browser?(L.randomFill=function(b,w,I,D){if(!(x.isBuffer(b)||b instanceof global.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof w)D=w,w=0,I=b.length;else if("function"==typeof I)D=I,I=b.length-w;else if("function"!=typeof D)throw new TypeError('"cb" argument must be a function');return P(w,b.length),E(I,w,b.length),h(b,w,I,D)},L.randomFillSync=function(b,w,I){if(void 0===w&&(w=0),!(x.isBuffer(b)||b instanceof global.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return P(w,b.length),void 0===I&&(I=b.length-w),E(I,w,b.length),h(b,w,I)}):(L.randomFill=p,L.randomFillSync=p)},5429:(Y,L,T)=>{"use strict";var N=T(8228),y=60103;if("function"==typeof Symbol&&Symbol.for){var v=Symbol.for;y=v("react.element"),v("react.portal"),v("react.fragment"),v("react.strict_mode"),v("react.profiler"),v("react.provider"),v("react.context"),v("react.forward_ref"),v("react.suspense"),v("react.memo"),v("react.lazy")}"function"==typeof Symbol&&Symbol;function b(d){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+d,m=1;m<arguments.length;m++)i+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+d+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I={};function D(d,i,m){this.props=d,this.context=i,this.refs=I,this.updater=m||w}function k(){}function O(d,i,m){this.props=d,this.context=i,this.refs=I,this.updater=m||w}D.prototype.isReactComponent={},D.prototype.setState=function(d,i){if("object"!=typeof d&&"function"!=typeof d&&null!=d)throw Error(b(85));this.updater.enqueueSetState(this,d,i,"setState")},D.prototype.forceUpdate=function(d){this.updater.enqueueForceUpdate(this,d,"forceUpdate")},k.prototype=D.prototype;var V=O.prototype=new k;V.constructor=O,N(V,D.prototype),V.isPureReactComponent=!0;var B_current=null,U=Object.prototype.hasOwnProperty,j={key:!0,ref:!0,__self:!0,__source:!0};L.createElement=function(d,i,m){var q,z={},J=null,ce=null;if(null!=i)for(q in void 0!==i.ref&&(ce=i.ref),void 0!==i.key&&(J=""+i.key),i)U.call(i,q)&&!j.hasOwnProperty(q)&&(z[q]=i[q]);var se=arguments.length-2;if(1===se)z.children=m;else if(1<se){for(var he=Array(se),ve=0;ve<se;ve++)he[ve]=arguments[ve+2];z.children=he}if(d&&d.defaultProps)for(q in se=d.defaultProps)void 0===z[q]&&(z[q]=se[q]);return{$$typeof:y,type:d,key:J,ref:ce,props:z,_owner:B_current}}},8139:(Y,L,T)=>{"use strict";Y.exports=T(5429)},8230:Y=>{"use strict";var T={};function p(g,C,P){P||(P=Error);var v=function(h){function _(b,w,I){return h.call(this,function(h,_,b){return"string"==typeof C?C:C(h,_,b)}(b,w,I))||this}return function(g,C){g.prototype=Object.create(C.prototype),g.prototype.constructor=g,g.__proto__=C}(_,h),_}(P);v.prototype.name=P.name,v.prototype.code=g,T[g]=v}function N(g,C){if(Array.isArray(g)){var P=g.length;return g=g.map(function(E){return String(E)}),P>2?"one of ".concat(C," ").concat(g.slice(0,P-1).join(", "),", or ")+g[P-1]:2===P?"one of ".concat(C," ").concat(g[0]," or ").concat(g[1]):"of ".concat(C," ").concat(g[0])}return"of ".concat(C," ").concat(String(g))}p("ERR_INVALID_OPT_VALUE",function(g,C){return'The value "'+C+'" is invalid for option "'+g+'"'},TypeError),p("ERR_INVALID_ARG_TYPE",function(g,C,P){var E,v;if("string"==typeof C&&function(g,C,P){return g.substr(0,C.length)===C}(C,"not ")?(E="must not be",C=C.replace(/^not /,"")):E="must be",function(g,C,P){return(void 0===P||P>g.length)&&(P=g.length),g.substring(P-C.length,P)===C}(g," argument"))v="The ".concat(g," ").concat(E," ").concat(N(C,"type"));else{var h=function(g,C,P){return"number"!=typeof P&&(P=0),!(P+".".length>g.length)&&-1!==g.indexOf(".",P)}(g)?"property":"argument";v='The "'.concat(g,'" ').concat(h," ").concat(E," ").concat(N(C,"type"))}return v+". Received type ".concat(typeof P)},TypeError),p("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),p("ERR_METHOD_NOT_IMPLEMENTED",function(g){return"The "+g+" method is not implemented"}),p("ERR_STREAM_PREMATURE_CLOSE","Premature close"),p("ERR_STREAM_DESTROYED",function(g){return"Cannot call "+g+" after a stream was destroyed"}),p("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),p("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),p("ERR_STREAM_WRITE_AFTER_END","write after end"),p("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),p("ERR_UNKNOWN_ENCODING",function(g){return"Unknown encoding: "+g},TypeError),p("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Y.exports.q=T},942:(Y,L,T)=>{"use strict";var p=Object.keys||function(v){var h=[];for(var _ in v)h.push(_);return h};Y.exports=C;var N=T(2833),y=T(7807);T(9879)(C,N);for(var x=p(y.prototype),u=0;u<x.length;u++){var g=x[u];C.prototype[g]||(C.prototype[g]=y.prototype[g])}function C(v){if(!(this instanceof C))return new C(v);N.call(this,v),y.call(this,v),this.allowHalfOpen=!0,v&&(!1===v.readable&&(this.readable=!1),!1===v.writable&&(this.writable=!1),!1===v.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",P)))}function P(){this._writableState.ended||process.nextTick(E,this)}function E(v){v.end()}Object.defineProperty(C.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(C.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(C.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(h){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=h,this._writableState.destroyed=h)}})},619:(Y,L,T)=>{"use strict";Y.exports=N;var p=T(5431);function N(y){if(!(this instanceof N))return new N(y);p.call(this,y)}T(9879)(N,p),N.prototype._transform=function(y,x,u){u(null,y)}},2833:(Y,L,T)=>{"use strict";var p;Y.exports=R,R.ReadableState=ge,T(3105);var v,y=function(ye,Se){return ye.listeners(Se).length},x=T(5112),u=T(3875).Buffer,g=global.Uint8Array||function(){},E=T(4616);v=E&&E.debuglog?E.debuglog("stream"):function(){};var B,U,j,h=T(9370),_=T(806),w=T(2903).getHighWaterMark,I=T(8230).q,D=I.ERR_INVALID_ARG_TYPE,k=I.ERR_STREAM_PUSH_AFTER_EOF,O=I.ERR_METHOD_NOT_IMPLEMENTED,V=I.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;T(9879)(R,x);var W=_.errorOrDestroy,X=["error","close","destroy","pause","resume"];function ge(ue,ye,Se){p=p||T(942),"boolean"!=typeof Se&&(Se=ye instanceof p),this.objectMode=!!(ue=ue||{}).objectMode,Se&&(this.objectMode=this.objectMode||!!ue.readableObjectMode),this.highWaterMark=w(this,ue,"readableHighWaterMark",Se),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==ue.emitClose,this.autoDestroy=!!ue.autoDestroy,this.destroyed=!1,this.defaultEncoding=ue.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ue.encoding&&(B||(B=T(2519).s),this.decoder=new B(ue.encoding),this.encoding=ue.encoding)}function R(ue){if(p=p||T(942),!(this instanceof R))return new R(ue);this._readableState=new ge(ue,this,this instanceof p),this.readable=!0,ue&&("function"==typeof ue.read&&(this._read=ue.read),"function"==typeof ue.destroy&&(this._destroy=ue.destroy)),x.call(this)}function r(ue,ye,Se,ie,ee){v("readableAddChunk",ye);var le,Z=ue._readableState;if(null===ye)Z.reading=!1,function(ue,ye){if(v("onEofChunk"),!ye.ended){if(ye.decoder){var Se=ye.decoder.end();Se&&Se.length&&(ye.buffer.push(Se),ye.length+=ye.objectMode?1:Se.length)}ye.ended=!0,ye.sync?d(ue):(ye.needReadable=!1,ye.emittedReadable||(ye.emittedReadable=!0,i(ue)))}}(ue,Z);else if(ee||(le=function(ue,ye){var Se;return!function(ue){return u.isBuffer(ue)||ue instanceof g}(ye)&&"string"!=typeof ye&&void 0!==ye&&!ue.objectMode&&(Se=new D("chunk",["string","Buffer","Uint8Array"],ye)),Se}(Z,ye)),le)W(ue,le);else if(Z.objectMode||ye&&ye.length>0)if("string"!=typeof ye&&!Z.objectMode&&Object.getPrototypeOf(ye)!==u.prototype&&(ye=function(ue){return u.from(ue)}(ye)),ie)Z.endEmitted?W(ue,new V):s(ue,Z,ye,!0);else if(Z.ended)W(ue,new k);else{if(Z.destroyed)return!1;Z.reading=!1,Z.decoder&&!Se?(ye=Z.decoder.write(ye),Z.objectMode||0!==ye.length?s(ue,Z,ye,!1):m(ue,Z)):s(ue,Z,ye,!1)}else ie||(Z.reading=!1,m(ue,Z));return!Z.ended&&(Z.length<Z.highWaterMark||0===Z.length)}function s(ue,ye,Se,ie){ye.flowing&&0===ye.length&&!ye.sync?(ye.awaitDrain=0,ue.emit("data",Se)):(ye.length+=ye.objectMode?1:Se.length,ie?ye.buffer.unshift(Se):ye.buffer.push(Se),ye.needReadable&&d(ue)),m(ue,ye)}Object.defineProperty(R.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(ye){!this._readableState||(this._readableState.destroyed=ye)}}),R.prototype.destroy=_.destroy,R.prototype._undestroy=_.undestroy,R.prototype._destroy=function(ue,ye){ye(ue)},R.prototype.push=function(ue,ye){var ie,Se=this._readableState;return Se.objectMode?ie=!0:"string"==typeof ue&&((ye=ye||Se.defaultEncoding)!==Se.encoding&&(ue=u.from(ue,ye),ye=""),ie=!0),r(this,ue,ye,!1,ie)},R.prototype.unshift=function(ue){return r(this,ue,null,!0,!1)},R.prototype.isPaused=function(){return!1===this._readableState.flowing},R.prototype.setEncoding=function(ue){B||(B=T(2519).s);var ye=new B(ue);this._readableState.decoder=ye,this._readableState.encoding=this._readableState.decoder.encoding;for(var Se=this._readableState.buffer.head,ie="";null!==Se;)ie+=ye.write(Se.data),Se=Se.next;return this._readableState.buffer.clear(),""!==ie&&this._readableState.buffer.push(ie),this._readableState.length=ie.length,this};var a=1073741824;function M(ue,ye){return ue<=0||0===ye.length&&ye.ended?0:ye.objectMode?1:ue!=ue?ye.flowing&&ye.length?ye.buffer.head.data.length:ye.length:(ue>ye.highWaterMark&&(ye.highWaterMark=function(ue){return ue>=a?ue=a:(ue--,ue|=ue>>>1,ue|=ue>>>2,ue|=ue>>>4,ue|=ue>>>8,ue|=ue>>>16,ue++),ue}(ue)),ue<=ye.length?ue:ye.ended?ye.length:(ye.needReadable=!0,0))}function d(ue){var ye=ue._readableState;v("emitReadable",ye.needReadable,ye.emittedReadable),ye.needReadable=!1,ye.emittedReadable||(v("emitReadable",ye.flowing),ye.emittedReadable=!0,process.nextTick(i,ue))}function i(ue){var ye=ue._readableState;v("emitReadable_",ye.destroyed,ye.length,ye.ended),!ye.destroyed&&(ye.length||ye.ended)&&(ue.emit("readable"),ye.emittedReadable=!1),ye.needReadable=!ye.flowing&&!ye.ended&&ye.length<=ye.highWaterMark,ve(ue)}function m(ue,ye){ye.readingMore||(ye.readingMore=!0,process.nextTick(q,ue,ye))}function q(ue,ye){for(;!ye.reading&&!ye.ended&&(ye.length<ye.highWaterMark||ye.flowing&&0===ye.length);){var Se=ye.length;if(v("maybeReadMore read 0"),ue.read(0),Se===ye.length)break}ye.readingMore=!1}function J(ue){var ye=ue._readableState;ye.readableListening=ue.listenerCount("readable")>0,ye.resumeScheduled&&!ye.paused?ye.flowing=!0:ue.listenerCount("data")>0&&ue.resume()}function ce(ue){v("readable nexttick read 0"),ue.read(0)}function he(ue,ye){v("resume",ye.reading),ye.reading||ue.read(0),ye.resumeScheduled=!1,ue.emit("resume"),ve(ue),ye.flowing&&!ye.reading&&ue.read(0)}function ve(ue){var ye=ue._readableState;for(v("flow",ye.flowing);ye.flowing&&null!==ue.read(););}function ae(ue,ye){return 0===ye.length?null:(ye.objectMode?Se=ye.buffer.shift():!ue||ue>=ye.length?(Se=ye.decoder?ye.buffer.join(""):1===ye.buffer.length?ye.buffer.first():ye.buffer.concat(ye.length),ye.buffer.clear()):Se=ye.buffer.consume(ue,ye.decoder),Se);var Se}function de(ue){var ye=ue._readableState;v("endReadable",ye.endEmitted),ye.endEmitted||(ye.ended=!0,process.nextTick(Re,ye,ue))}function Re(ue,ye){if(v("endReadableNT",ue.endEmitted,ue.length),!ue.endEmitted&&0===ue.length&&(ue.endEmitted=!0,ye.readable=!1,ye.emit("end"),ue.autoDestroy)){var Se=ye._writableState;(!Se||Se.autoDestroy&&Se.finished)&&ye.destroy()}}function Ee(ue,ye){for(var Se=0,ie=ue.length;Se<ie;Se++)if(ue[Se]===ye)return Se;return-1}R.prototype.read=function(ue){v("read",ue),ue=parseInt(ue,10);var ye=this._readableState,Se=ue;if(0!==ue&&(ye.emittedReadable=!1),0===ue&&ye.needReadable&&((0!==ye.highWaterMark?ye.length>=ye.highWaterMark:ye.length>0)||ye.ended))return v("read: emitReadable",ye.length,ye.ended),0===ye.length&&ye.ended?de(this):d(this),null;if(0===(ue=M(ue,ye))&&ye.ended)return 0===ye.length&&de(this),null;var ee,ie=ye.needReadable;return v("need readable",ie),(0===ye.length||ye.length-ue<ye.highWaterMark)&&v("length less than watermark",ie=!0),ye.ended||ye.reading?v("reading or ended",ie=!1):ie&&(v("do read"),ye.reading=!0,ye.sync=!0,0===ye.length&&(ye.needReadable=!0),this._read(ye.highWaterMark),ye.sync=!1,ye.reading||(ue=M(Se,ye))),null===(ee=ue>0?ae(ue,ye):null)?(ye.needReadable=ye.length<=ye.highWaterMark,ue=0):(ye.length-=ue,ye.awaitDrain=0),0===ye.length&&(ye.ended||(ye.needReadable=!0),Se!==ue&&ye.ended&&de(this)),null!==ee&&this.emit("data",ee),ee},R.prototype._read=function(ue){W(this,new O("_read()"))},R.prototype.pipe=function(ue,ye){var Se=this,ie=this._readableState;switch(ie.pipesCount){case 0:ie.pipes=ue;break;case 1:ie.pipes=[ie.pipes,ue];break;default:ie.pipes.push(ue)}ie.pipesCount+=1,v("pipe count=%d opts=%j",ie.pipesCount,ye);var Z=ye&&!1===ye.end||ue===process.stdout||ue===process.stderr?Fe:Oe;function Oe(){v("onend"),ue.end()}ie.endEmitted?process.nextTick(Z):Se.once("end",Z),ue.on("unpipe",function le(ct,Ve){v("onunpipe"),ct===Se&&Ve&&!1===Ve.hasUnpiped&&(Ve.hasUnpiped=!0,v("cleanup"),ue.removeListener("close",Ye),ue.removeListener("finish",De),ue.removeListener("drain",we),ue.removeListener("error",Me),ue.removeListener("unpipe",le),Se.removeListener("end",Oe),Se.removeListener("end",Fe),Se.removeListener("data",Ne),Te=!0,ie.awaitDrain&&(!ue._writableState||ue._writableState.needDrain)&&we())});var we=function(ue){return function(){var Se=ue._readableState;v("pipeOnDrain",Se.awaitDrain),Se.awaitDrain&&Se.awaitDrain--,0===Se.awaitDrain&&y(ue,"data")&&(Se.flowing=!0,ve(ue))}}(Se);ue.on("drain",we);var Te=!1;function Ne(ct){v("ondata");var Ve=ue.write(ct);v("dest.write",Ve),!1===Ve&&((1===ie.pipesCount&&ie.pipes===ue||ie.pipesCount>1&&-1!==Ee(ie.pipes,ue))&&!Te&&(v("false write response, pause",ie.awaitDrain),ie.awaitDrain++),Se.pause())}function Me(ct){v("onerror",ct),Fe(),ue.removeListener("error",Me),0===y(ue,"error")&&W(ue,ct)}function Ye(){ue.removeListener("finish",De),Fe()}function De(){v("onfinish"),ue.removeListener("close",Ye),Fe()}function Fe(){v("unpipe"),Se.unpipe(ue)}return Se.on("data",Ne),function(ue,ye,Se){if("function"==typeof ue.prependListener)return ue.prependListener(ye,Se);ue._events&&ue._events[ye]?Array.isArray(ue._events[ye])?ue._events[ye].unshift(Se):ue._events[ye]=[Se,ue._events[ye]]:ue.on(ye,Se)}(ue,"error",Me),ue.once("close",Ye),ue.once("finish",De),ue.emit("pipe",Se),ie.flowing||(v("pipe resume"),Se.resume()),ue},R.prototype.unpipe=function(ue){var ye=this._readableState,Se={hasUnpiped:!1};if(0===ye.pipesCount)return this;if(1===ye.pipesCount)return ue&&ue!==ye.pipes||(ue||(ue=ye.pipes),ye.pipes=null,ye.pipesCount=0,ye.flowing=!1,ue&&ue.emit("unpipe",this,Se)),this;if(!ue){var ie=ye.pipes,ee=ye.pipesCount;ye.pipes=null,ye.pipesCount=0,ye.flowing=!1;for(var Z=0;Z<ee;Z++)ie[Z].emit("unpipe",this,{hasUnpiped:!1});return this}var le=Ee(ye.pipes,ue);return-1===le||(ye.pipes.splice(le,1),ye.pipesCount-=1,1===ye.pipesCount&&(ye.pipes=ye.pipes[0]),ue.emit("unpipe",this,Se)),this},R.prototype.addListener=R.prototype.on=function(ue,ye){var Se=x.prototype.on.call(this,ue,ye),ie=this._readableState;return"data"===ue?(ie.readableListening=this.listenerCount("readable")>0,!1!==ie.flowing&&this.resume()):"readable"===ue&&!ie.endEmitted&&!ie.readableListening&&(ie.readableListening=ie.needReadable=!0,ie.flowing=!1,ie.emittedReadable=!1,v("on readable",ie.length,ie.reading),ie.length?d(this):ie.reading||process.nextTick(ce,this)),Se},R.prototype.removeListener=function(ue,ye){var Se=x.prototype.removeListener.call(this,ue,ye);return"readable"===ue&&process.nextTick(J,this),Se},R.prototype.removeAllListeners=function(ue){var ye=x.prototype.removeAllListeners.apply(this,arguments);return("readable"===ue||void 0===ue)&&process.nextTick(J,this),ye},R.prototype.resume=function(){var ue=this._readableState;return ue.flowing||(v("resume"),ue.flowing=!ue.readableListening,function(ue,ye){ye.resumeScheduled||(ye.resumeScheduled=!0,process.nextTick(he,ue,ye))}(this,ue)),ue.paused=!1,this},R.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},R.prototype.wrap=function(ue){var ye=this,Se=this._readableState,ie=!1;for(var ee in ue.on("end",function(){if(v("wrapped end"),Se.decoder&&!Se.ended){var le=Se.decoder.end();le&&le.length&&ye.push(le)}ye.push(null)}),ue.on("data",function(le){v("wrapped data"),Se.decoder&&(le=Se.decoder.write(le)),Se.objectMode&&null==le||!(Se.objectMode||le&&le.length)||ye.push(le)||(ie=!0,ue.pause())}),ue)void 0===this[ee]&&"function"==typeof ue[ee]&&(this[ee]=function(Oe){return function(){return ue[Oe].apply(ue,arguments)}}(ee));for(var Z=0;Z<X.length;Z++)ue.on(X[Z],this.emit.bind(this,X[Z]));return this._read=function(le){v("wrapped _read",le),ie&&(ie=!1,ue.resume())},this},"function"==typeof Symbol&&(R.prototype[Symbol.asyncIterator]=function(){return void 0===U&&(U=T(9983)),U(this)}),Object.defineProperty(R.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(R.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(R.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ye){this._readableState&&(this._readableState.flowing=ye)}}),R._fromList=ae,Object.defineProperty(R.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(R.from=function(ue,ye){return void 0===j&&(j=T(3659)),j(R,ue,ye)})},5431:(Y,L,T)=>{"use strict";Y.exports=P;var p=T(8230).q,N=p.ERR_METHOD_NOT_IMPLEMENTED,y=p.ERR_MULTIPLE_CALLBACK,x=p.ERR_TRANSFORM_ALREADY_TRANSFORMING,u=p.ERR_TRANSFORM_WITH_LENGTH_0,g=T(942);function C(h,_){var b=this._transformState;b.transforming=!1;var w=b.writecb;if(null===w)return this.emit("error",new y);b.writechunk=null,b.writecb=null,null!=_&&this.push(_),w(h);var I=this._readableState;I.reading=!1,(I.needReadable||I.length<I.highWaterMark)&&this._read(I.highWaterMark)}function P(h){if(!(this instanceof P))return new P(h);g.call(this,h),this._transformState={afterTransform:C.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,h&&("function"==typeof h.transform&&(this._transform=h.transform),"function"==typeof h.flush&&(this._flush=h.flush)),this.on("prefinish",E)}function E(){var h=this;"function"!=typeof this._flush||this._readableState.destroyed?v(this,null,null):this._flush(function(_,b){v(h,_,b)})}function v(h,_,b){if(_)return h.emit("error",_);if(null!=b&&h.push(b),h._writableState.length)throw new u;if(h._transformState.transforming)throw new x;return h.push(null)}T(9879)(P,g),P.prototype.push=function(h,_){return this._transformState.needTransform=!1,g.prototype.push.call(this,h,_)},P.prototype._transform=function(h,_,b){b(new N("_transform()"))},P.prototype._write=function(h,_,b){var w=this._transformState;if(w.writecb=b,w.writechunk=h,w.writeencoding=_,!w.transforming){var I=this._readableState;(w.needTransform||I.needReadable||I.length<I.highWaterMark)&&this._read(I.highWaterMark)}},P.prototype._read=function(h){var _=this._transformState;null===_.writechunk||_.transforming?_.needTransform=!0:(_.transforming=!0,this._transform(_.writechunk,_.writeencoding,_.afterTransform))},P.prototype._destroy=function(h,_){g.prototype._destroy.call(this,h,function(b){_(b)})}},7807:(Y,L,T)=>{"use strict";function N(ve){var ae=this;this.next=null,this.entry=null,this.finish=function(){!function(ve,ae,de){var Re=ve.entry;for(ve.entry=null;Re;){var Ee=Re.callback;ae.pendingcb--,Ee(undefined),Re=Re.next}ae.corkedRequestsFree.next=ve}(ae,ve)}}var y;Y.exports=ge,ge.WritableState=X;var K,x={deprecate:T(5822)},u=T(5112),g=T(3875).Buffer,C=global.Uint8Array||function(){},v=T(806),_=T(2903).getHighWaterMark,b=T(8230).q,w=b.ERR_INVALID_ARG_TYPE,I=b.ERR_METHOD_NOT_IMPLEMENTED,D=b.ERR_MULTIPLE_CALLBACK,k=b.ERR_STREAM_CANNOT_PIPE,O=b.ERR_STREAM_DESTROYED,V=b.ERR_STREAM_NULL_VALUES,B=b.ERR_STREAM_WRITE_AFTER_END,U=b.ERR_UNKNOWN_ENCODING,j=v.errorOrDestroy;function W(){}function X(ve,ae,de){y=y||T(942),"boolean"!=typeof de&&(de=ae instanceof y),this.objectMode=!!(ve=ve||{}).objectMode,de&&(this.objectMode=this.objectMode||!!ve.writableObjectMode),this.highWaterMark=_(this,ve,"writableHighWaterMark",de),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===ve.decodeStrings),this.defaultEncoding=ve.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ee){!function(ve,ae){var de=ve._writableState,Re=de.sync,Ee=de.writecb;if("function"!=typeof Ee)throw new D;if(function(ve){ve.writing=!1,ve.writecb=null,ve.length-=ve.writelen,ve.writelen=0}(de),ae)!function(ve,ae,de,Re,Ee){--ae.pendingcb,de?(process.nextTick(Ee,Re),process.nextTick(ce,ve,ae),ve._writableState.errorEmitted=!0,j(ve,Re)):(Ee(Re),ve._writableState.errorEmitted=!0,j(ve,Re),ce(ve,ae))}(ve,de,Re,ae,Ee);else{var ue=q(de)||ve.destroyed;!ue&&!de.corked&&!de.bufferProcessing&&de.bufferedRequest&&m(ve,de),Re?process.nextTick(d,ve,de,ue,Ee):d(ve,de,ue,Ee)}}(ae,Ee)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==ve.emitClose,this.autoDestroy=!!ve.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new N(this)}function ge(ve){var ae=this instanceof(y=y||T(942));if(!ae&&!K.call(ge,this))return new ge(ve);this._writableState=new X(ve,this,ae),this.writable=!0,ve&&("function"==typeof ve.write&&(this._write=ve.write),"function"==typeof ve.writev&&(this._writev=ve.writev),"function"==typeof ve.destroy&&(this._destroy=ve.destroy),"function"==typeof ve.final&&(this._final=ve.final)),u.call(this)}function a(ve,ae,de,Re,Ee,ue,ye){ae.writelen=Re,ae.writecb=ye,ae.writing=!0,ae.sync=!0,ae.destroyed?ae.onwrite(new O("write")):de?ve._writev(Ee,ae.onwrite):ve._write(Ee,ue,ae.onwrite),ae.sync=!1}function d(ve,ae,de,Re){de||function(ve,ae){0===ae.length&&ae.needDrain&&(ae.needDrain=!1,ve.emit("drain"))}(ve,ae),ae.pendingcb--,Re(),ce(ve,ae)}function m(ve,ae){ae.bufferProcessing=!0;var de=ae.bufferedRequest;if(ve._writev&&de&&de.next){var Ee=new Array(ae.bufferedRequestCount),ue=ae.corkedRequestsFree;ue.entry=de;for(var ye=0,Se=!0;de;)Ee[ye]=de,de.isBuf||(Se=!1),de=de.next,ye+=1;Ee.allBuffers=Se,a(ve,ae,!0,ae.length,Ee,"",ue.finish),ae.pendingcb++,ae.lastBufferedRequest=null,ue.next?(ae.corkedRequestsFree=ue.next,ue.next=null):ae.corkedRequestsFree=new N(ae),ae.bufferedRequestCount=0}else{for(;de;){var ie=de.chunk;if(a(ve,ae,!1,ae.objectMode?1:ie.length,ie,de.encoding,de.callback),de=de.next,ae.bufferedRequestCount--,ae.writing)break}null===de&&(ae.lastBufferedRequest=null)}ae.bufferedRequest=de,ae.bufferProcessing=!1}function q(ve){return ve.ending&&0===ve.length&&null===ve.bufferedRequest&&!ve.finished&&!ve.writing}function z(ve,ae){ve._final(function(de){ae.pendingcb--,de&&j(ve,de),ae.prefinished=!0,ve.emit("prefinish"),ce(ve,ae)})}function ce(ve,ae){var de=q(ae);if(de&&(function(ve,ae){!ae.prefinished&&!ae.finalCalled&&("function"!=typeof ve._final||ae.destroyed?(ae.prefinished=!0,ve.emit("prefinish")):(ae.pendingcb++,ae.finalCalled=!0,process.nextTick(z,ve,ae)))}(ve,ae),0===ae.pendingcb&&(ae.finished=!0,ve.emit("finish"),ae.autoDestroy))){var Re=ve._readableState;(!Re||Re.autoDestroy&&Re.endEmitted)&&ve.destroy()}return de}T(9879)(ge,u),X.prototype.getBuffer=function(){for(var ae=this.bufferedRequest,de=[];ae;)de.push(ae),ae=ae.next;return de},function(){try{Object.defineProperty(X.prototype,"buffer",{get:x.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(ve){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(K=Function.prototype[Symbol.hasInstance],Object.defineProperty(ge,Symbol.hasInstance,{value:function(ae){return!!K.call(this,ae)||this===ge&&ae&&ae._writableState instanceof X}})):K=function(ae){return ae instanceof this},ge.prototype.pipe=function(){j(this,new k)},ge.prototype.write=function(ve,ae,de){var Re=this._writableState,Ee=!1,ue=!Re.objectMode&&function(ve){return g.isBuffer(ve)||ve instanceof C}(ve);return ue&&!g.isBuffer(ve)&&(ve=function(ve){return g.from(ve)}(ve)),"function"==typeof ae&&(de=ae,ae=null),ue?ae="buffer":ae||(ae=Re.defaultEncoding),"function"!=typeof de&&(de=W),Re.ending?function(ve,ae){var de=new B;j(ve,de),process.nextTick(ae,de)}(this,de):(ue||function(ve,ae,de,Re){var Ee;return null===de?Ee=new V:"string"!=typeof de&&!ae.objectMode&&(Ee=new w("chunk",["string","Buffer"],de)),!Ee||(j(ve,Ee),process.nextTick(Re,Ee),!1)}(this,Re,ve,de))&&(Re.pendingcb++,Ee=function(ve,ae,de,Re,Ee,ue){if(!de){var ye=function(ve,ae,de){return!ve.objectMode&&!1!==ve.decodeStrings&&"string"==typeof ae&&(ae=g.from(ae,de)),ae}(ae,Re,Ee);Re!==ye&&(de=!0,Ee="buffer",Re=ye)}var Se=ae.objectMode?1:Re.length;ae.length+=Se;var ie=ae.length<ae.highWaterMark;if(ie||(ae.needDrain=!0),ae.writing||ae.corked){var ee=ae.lastBufferedRequest;ae.lastBufferedRequest={chunk:Re,encoding:Ee,isBuf:de,callback:ue,next:null},ee?ee.next=ae.lastBufferedRequest:ae.bufferedRequest=ae.lastBufferedRequest,ae.bufferedRequestCount+=1}else a(ve,ae,!1,Se,Re,Ee,ue);return ie}(this,Re,ue,ve,ae,de)),Ee},ge.prototype.cork=function(){this._writableState.corked++},ge.prototype.uncork=function(){var ve=this._writableState;ve.corked&&(ve.corked--,!ve.writing&&!ve.corked&&!ve.bufferProcessing&&ve.bufferedRequest&&m(this,ve))},ge.prototype.setDefaultEncoding=function(ae){if("string"==typeof ae&&(ae=ae.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ae+"").toLowerCase())>-1))throw new U(ae);return this._writableState.defaultEncoding=ae,this},Object.defineProperty(ge.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(ge.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),ge.prototype._write=function(ve,ae,de){de(new I("_write()"))},ge.prototype._writev=null,ge.prototype.end=function(ve,ae,de){var Re=this._writableState;return"function"==typeof ve?(de=ve,ve=null,ae=null):"function"==typeof ae&&(de=ae,ae=null),null!=ve&&this.write(ve,ae),Re.corked&&(Re.corked=1,this.uncork()),Re.ending||function(ve,ae,de){ae.ending=!0,ce(ve,ae),de&&(ae.finished?process.nextTick(de):ve.once("finish",de)),ae.ended=!0,ve.writable=!1}(this,Re,de),this},Object.defineProperty(ge.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(ge.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(ae){!this._writableState||(this._writableState.destroyed=ae)}}),ge.prototype.destroy=v.destroy,ge.prototype._undestroy=v.undestroy,ge.prototype._destroy=function(ve,ae){ae(ve)}},9983:(Y,L,T)=>{"use strict";var p;function N(O,V,B){return V in O?Object.defineProperty(O,V,{value:B,enumerable:!0,configurable:!0,writable:!0}):O[V]=B,O}var y=T(6820),x=Symbol("lastResolve"),u=Symbol("lastReject"),g=Symbol("error"),C=Symbol("ended"),P=Symbol("lastPromise"),E=Symbol("handlePromise"),v=Symbol("stream");function h(O,V){return{value:O,done:V}}function _(O){var V=O[x];if(null!==V){var B=O[v].read();null!==B&&(O[P]=null,O[x]=null,O[u]=null,V(h(B,!1)))}}function b(O){process.nextTick(_,O)}var I=Object.getPrototypeOf(function(){}),D=Object.setPrototypeOf((N(p={get stream(){return this[v]},next:function(){var V=this,B=this[g];if(null!==B)return Promise.reject(B);if(this[C])return Promise.resolve(h(void 0,!0));if(this[v].destroyed)return new Promise(function(X,K){process.nextTick(function(){V[g]?K(V[g]):X(h(void 0,!0))})});var j,U=this[P];if(U)j=new Promise(function(O,V){return function(B,U){O.then(function(){V[C]?B(h(void 0,!0)):V[E](B,U)},U)}}(U,this));else{var W=this[v].read();if(null!==W)return Promise.resolve(h(W,!1));j=new Promise(this[E])}return this[P]=j,j}},Symbol.asyncIterator,function(){return this}),N(p,"return",function(){var V=this;return new Promise(function(B,U){V[v].destroy(null,function(j){j?U(j):B(h(void 0,!0))})})}),p),I);Y.exports=function(V){var B,U=Object.create(D,(N(B={},v,{value:V,writable:!0}),N(B,x,{value:null,writable:!0}),N(B,u,{value:null,writable:!0}),N(B,g,{value:null,writable:!0}),N(B,C,{value:V._readableState.endEmitted,writable:!0}),N(B,E,{value:function(W,X){var K=U[v].read();K?(U[P]=null,U[x]=null,U[u]=null,W(h(K,!1))):(U[x]=W,U[u]=X)},writable:!0}),B));return U[P]=null,y(V,function(j){if(j&&"ERR_STREAM_PREMATURE_CLOSE"!==j.code){var W=U[u];return null!==W&&(U[P]=null,U[x]=null,U[u]=null,W(j)),void(U[g]=j)}var X=U[x];null!==X&&(U[P]=null,U[x]=null,U[u]=null,X(h(void 0,!0))),U[C]=!0}),V.on("readable",b.bind(null,U)),U}},9370:(Y,L,T)=>{"use strict";function p(b,w){var I=Object.keys(b);if(Object.getOwnPropertySymbols){var D=Object.getOwnPropertySymbols(b);w&&(D=D.filter(function(k){return Object.getOwnPropertyDescriptor(b,k).enumerable})),I.push.apply(I,D)}return I}function y(b,w,I){return w in b?Object.defineProperty(b,w,{value:I,enumerable:!0,configurable:!0,writable:!0}):b[w]=I,b}function u(b,w){for(var I=0;I<w.length;I++){var D=w[I];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(b,D.key,D)}}var P=T(3875).Buffer,v=T(2361).inspect,h=v&&v.custom||"inspect";function _(b,w,I){P.prototype.copy.call(b,w,I)}Y.exports=function(){function b(){(function(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")})(this,b),this.head=null,this.tail=null,this.length=0}return function(b,w,I){w&&u(b.prototype,w)}(b,[{key:"push",value:function(I){var D={data:I,next:null};this.length>0?this.tail.next=D:this.head=D,this.tail=D,++this.length}},{key:"unshift",value:function(I){var D={data:I,next:this.head};0===this.length&&(this.tail=D),this.head=D,++this.length}},{key:"shift",value:function(){if(0!==this.length){var I=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,I}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(I){if(0===this.length)return"";for(var D=this.head,k=""+D.data;D=D.next;)k+=I+D.data;return k}},{key:"concat",value:function(I){if(0===this.length)return P.alloc(0);for(var D=P.allocUnsafe(I>>>0),k=this.head,O=0;k;)_(k.data,D,O),O+=k.data.length,k=k.next;return D}},{key:"consume",value:function(I,D){var k;return I<this.head.data.length?(k=this.head.data.slice(0,I),this.head.data=this.head.data.slice(I)):k=I===this.head.data.length?this.shift():D?this._getString(I):this._getBuffer(I),k}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(I){var D=this.head,k=1,O=D.data;for(I-=O.length;D=D.next;){var V=D.data,B=I>V.length?V.length:I;if(O+=B===V.length?V:V.slice(0,I),0==(I-=B)){B===V.length?(++k,this.head=D.next?D.next:this.tail=null):(this.head=D,D.data=V.slice(B));break}++k}return this.length-=k,O}},{key:"_getBuffer",value:function(I){var D=P.allocUnsafe(I),k=this.head,O=1;for(k.data.copy(D),I-=k.data.length;k=k.next;){var V=k.data,B=I>V.length?V.length:I;if(V.copy(D,D.length-I,0,B),0==(I-=B)){B===V.length?(++O,this.head=k.next?k.next:this.tail=null):(this.head=k,k.data=V.slice(B));break}++O}return this.length-=O,D}},{key:h,value:function(I,D){return v(this,function(b){for(var w=1;w<arguments.length;w++){var I=null!=arguments[w]?arguments[w]:{};w%2?p(Object(I),!0).forEach(function(D){y(b,D,I[D])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(I)):p(Object(I)).forEach(function(D){Object.defineProperty(b,D,Object.getOwnPropertyDescriptor(I,D))})}return b}({},D,{depth:0,customInspect:!1}))}}]),b}()},806:Y=>{"use strict";function T(u,g){y(u,g),p(u)}function p(u){u._writableState&&!u._writableState.emitClose||u._readableState&&!u._readableState.emitClose||u.emit("close")}function y(u,g){u.emit("error",g)}Y.exports={destroy:function(u,g){var C=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(g?g(u):u&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(y,this,u)):process.nextTick(y,this,u)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(u||null,function(v){!g&&v?C._writableState?C._writableState.errorEmitted?process.nextTick(p,C):(C._writableState.errorEmitted=!0,process.nextTick(T,C,v)):process.nextTick(T,C,v):g?(process.nextTick(p,C),g(v)):process.nextTick(p,C)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(u,g){var C=u._readableState,P=u._writableState;C&&C.autoDestroy||P&&P.autoDestroy?u.destroy(g):u.emit("error",g)}}},6820:(Y,L,T)=>{"use strict";var p=T(8230).q.ERR_STREAM_PREMATURE_CLOSE;function y(){}Y.exports=function u(g,C,P){if("function"==typeof C)return u(g,null,C);C||(C={}),P=function(g){var C=!1;return function(){if(!C){C=!0;for(var P=arguments.length,E=new Array(P),v=0;v<P;v++)E[v]=arguments[v];g.apply(this,E)}}}(P||y);var E=C.readable||!1!==C.readable&&g.readable,v=C.writable||!1!==C.writable&&g.writable,h=function(){g.writable||b()},_=g._writableState&&g._writableState.finished,b=function(){v=!1,_=!0,E||P.call(g)},w=g._readableState&&g._readableState.endEmitted,I=function(){E=!1,w=!0,v||P.call(g)},D=function(B){P.call(g,B)},k=function(){var B;return E&&!w?((!g._readableState||!g._readableState.ended)&&(B=new p),P.call(g,B)):v&&!_?((!g._writableState||!g._writableState.ended)&&(B=new p),P.call(g,B)):void 0},O=function(){g.req.on("finish",b)};return function(g){return g.setHeader&&"function"==typeof g.abort}(g)?(g.on("complete",b),g.on("abort",k),g.req?O():g.on("request",O)):v&&!g._writableState&&(g.on("end",h),g.on("close",h)),g.on("end",I),g.on("finish",b),!1!==C.error&&g.on("error",D),g.on("close",k),function(){g.removeListener("complete",b),g.removeListener("abort",k),g.removeListener("request",O),g.req&&g.req.removeListener("finish",b),g.removeListener("end",h),g.removeListener("close",h),g.removeListener("finish",b),g.removeListener("end",I),g.removeListener("error",D),g.removeListener("close",k)}}},3659:Y=>{Y.exports=function(){throw new Error("Readable.from is not available in the browser")}},6076:(Y,L,T)=>{"use strict";var p,y=T(8230).q,x=y.ERR_MISSING_ARGS,u=y.ERR_STREAM_DESTROYED;function g(b){if(b)throw b}function P(b,w,I,D){D=function(b){var w=!1;return function(){w||(w=!0,b.apply(void 0,arguments))}}(D);var k=!1;b.on("close",function(){k=!0}),void 0===p&&(p=T(6820)),p(b,{readable:w,writable:I},function(V){if(V)return D(V);k=!0,D()});var O=!1;return function(V){if(!k&&!O){if(O=!0,function(b){return b.setHeader&&"function"==typeof b.abort}(b))return b.abort();if("function"==typeof b.destroy)return b.destroy();D(V||new u("pipe"))}}}function E(b){b()}function v(b,w){return b.pipe(w)}function h(b){return b.length&&"function"==typeof b[b.length-1]?b.pop():g}Y.exports=function(){for(var b=arguments.length,w=new Array(b),I=0;I<b;I++)w[I]=arguments[I];var D=h(w);if(Array.isArray(w[0])&&(w=w[0]),w.length<2)throw new x("streams");var k,O=w.map(function(V,B){var U=B<w.length-1;return P(V,U,B>0,function(W){k||(k=W),W&&O.forEach(E),!U&&(O.forEach(E),D(k))})});return w.reduce(v)}},2903:(Y,L,T)=>{"use strict";var p=T(8230).q.ERR_INVALID_OPT_VALUE;Y.exports={getHighWaterMark:function(x,u,g,C){var P=function(x,u,g){return null!=x.highWaterMark?x.highWaterMark:u?x[g]:null}(u,C,g);if(null!=P){if(!isFinite(P)||Math.floor(P)!==P||P<0)throw new p(C?g:"highWaterMark",P);return Math.floor(P)}return x.objectMode?16:16384}}},5112:(Y,L,T)=>{Y.exports=T(3105).EventEmitter},8300:(Y,L,T)=>{(L=Y.exports=T(2833)).Stream=L,L.Readable=L,L.Writable=T(7807),L.Duplex=T(942),L.Transform=T(5431),L.PassThrough=T(619),L.finished=T(6820),L.pipeline=T(6076)},5207:(Y,L,T)=>{"use strict";var p=T(3875).Buffer,N=T(9879),y=T(5414),x=new Array(16),u=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],g=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],C=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],P=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],E=[0,1518500249,1859775393,2400959708,2840853838],v=[1352829926,1548603684,1836072691,2053994217,0];function h(){y.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function _(O,V){return O<<V|O>>>32-V}function b(O,V,B,U,j,W,X,K){return _(O+(V^B^U)+W+X|0,K)+j|0}function w(O,V,B,U,j,W,X,K){return _(O+(V&B|~V&U)+W+X|0,K)+j|0}function I(O,V,B,U,j,W,X,K){return _(O+((V|~B)^U)+W+X|0,K)+j|0}function D(O,V,B,U,j,W,X,K){return _(O+(V&U|B&~U)+W+X|0,K)+j|0}function k(O,V,B,U,j,W,X,K){return _(O+(V^(B|~U))+W+X|0,K)+j|0}N(h,y),h.prototype._update=function(){for(var O=x,V=0;V<16;++V)O[V]=this._block.readInt32LE(4*V);for(var B=0|this._a,U=0|this._b,j=0|this._c,W=0|this._d,X=0|this._e,K=0|this._a,ge=0|this._b,R=0|this._c,r=0|this._d,s=0|this._e,l=0;l<80;l+=1){var a,f;l<16?(a=b(B,U,j,W,X,O[u[l]],E[0],C[l]),f=k(K,ge,R,r,s,O[g[l]],v[0],P[l])):l<32?(a=w(B,U,j,W,X,O[u[l]],E[1],C[l]),f=D(K,ge,R,r,s,O[g[l]],v[1],P[l])):l<48?(a=I(B,U,j,W,X,O[u[l]],E[2],C[l]),f=I(K,ge,R,r,s,O[g[l]],v[2],P[l])):l<64?(a=D(B,U,j,W,X,O[u[l]],E[3],C[l]),f=w(K,ge,R,r,s,O[g[l]],v[3],P[l])):(a=k(B,U,j,W,X,O[u[l]],E[4],C[l]),f=b(K,ge,R,r,s,O[g[l]],v[4],P[l])),B=X,X=W,W=_(j,10),j=U,U=a,K=s,s=r,r=_(R,10),R=ge,ge=f}var M=this._b+j+r|0;this._b=this._c+W+s|0,this._c=this._d+X+K|0,this._d=this._e+B+ge|0,this._e=this._a+U+R|0,this._a=M},h.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var O=p.alloc?p.alloc(20):new p(20);return O.writeInt32LE(this._a,0),O.writeInt32LE(this._b,4),O.writeInt32LE(this._c,8),O.writeInt32LE(this._d,12),O.writeInt32LE(this._e,16),O},Y.exports=h},5859:(Y,L,T)=>{var p=T(3875),N=p.Buffer;function y(u,g){for(var C in u)g[C]=u[C]}function x(u,g,C){return N(u,g,C)}N.from&&N.alloc&&N.allocUnsafe&&N.allocUnsafeSlow?Y.exports=p:(y(p,L),L.Buffer=x),y(N,x),x.from=function(u,g,C){if("number"==typeof u)throw new TypeError("Argument must not be a number");return N(u,g,C)},x.alloc=function(u,g,C){if("number"!=typeof u)throw new TypeError("Argument must be a number");var P=N(u);return void 0!==g?"string"==typeof C?P.fill(g,C):P.fill(g):P.fill(0),P},x.allocUnsafe=function(u){if("number"!=typeof u)throw new TypeError("Argument must be a number");return N(u)},x.allocUnsafeSlow=function(u){if("number"!=typeof u)throw new TypeError("Argument must be a number");return p.SlowBuffer(u)}},8114:(Y,L,T)=>{"use strict";var x,p=T(3875),N=p.Buffer,y={};for(x in p)!p.hasOwnProperty(x)||"SlowBuffer"===x||"Buffer"===x||(y[x]=p[x]);var u=y.Buffer={};for(x in N)!N.hasOwnProperty(x)||"allocUnsafe"===x||"allocUnsafeSlow"===x||(u[x]=N[x]);if(y.Buffer.prototype=N.prototype,(!u.from||u.from===Uint8Array.from)&&(u.from=function(g,C,P){if("number"==typeof g)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof g);if(g&&void 0===g.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);return N(g,C,P)}),u.alloc||(u.alloc=function(g,C,P){if("number"!=typeof g)throw new TypeError('The "size" argument must be of type number. Received type '+typeof g);if(g<0||g>=2*(1<<30))throw new RangeError('The value "'+g+'" is invalid for option "size"');var E=N(g);return C&&0!==C.length?"string"==typeof P?E.fill(C,P):E.fill(C):E.fill(0),E}),!y.kStringMaxLength)try{y.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(g){}y.constants||(y.constants={MAX_LENGTH:y.kMaxLength},y.kStringMaxLength&&(y.constants.MAX_STRING_LENGTH=y.kStringMaxLength)),Y.exports=y},3437:(Y,L,T)=>{var p=T(5859).Buffer;function N(y,x){this._block=p.alloc(y),this._finalSize=x,this._blockSize=y,this._len=0}N.prototype.update=function(y,x){"string"==typeof y&&(y=p.from(y,x=x||"utf8"));for(var u=this._block,g=this._blockSize,C=y.length,P=this._len,E=0;E<C;){for(var v=P%g,h=Math.min(C-E,g-v),_=0;_<h;_++)u[v+_]=y[E+_];E+=h,(P+=h)%g==0&&this._update(u)}return this._len+=C,this},N.prototype.digest=function(y){var x=this._len%this._blockSize;this._block[x]=128,this._block.fill(0,x+1),x>=this._finalSize&&(this._update(this._block),this._block.fill(0));var u=8*this._len;if(u<=4294967295)this._block.writeUInt32BE(u,this._blockSize-4);else{var g=(4294967295&u)>>>0;this._block.writeUInt32BE((u-g)/4294967296,this._blockSize-8),this._block.writeUInt32BE(g,this._blockSize-4)}this._update(this._block);var P=this._hash();return y?P.toString(y):P},N.prototype._update=function(){throw new Error("_update must be implemented by subclass")},Y.exports=N},5829:(Y,L,T)=>{var p=Y.exports=function(y){y=y.toLowerCase();var x=p[y];if(!x)throw new Error(y+" is not supported (we accept pull requests)");return new x};p.sha=T(6356),p.sha1=T(7338),p.sha224=T(4280),p.sha256=T(857),p.sha384=T(6203),p.sha512=T(5976)},6356:(Y,L,T)=>{var p=T(9879),N=T(3437),y=T(5859).Buffer,x=[1518500249,1859775393,-1894007588,-899497514],u=new Array(80);function g(){this.init(),this._w=u,N.call(this,64,56)}function C(v){return v<<5|v>>>27}function P(v){return v<<30|v>>>2}function E(v,h,_,b){return 0===v?h&_|~h&b:2===v?h&_|h&b|_&b:h^_^b}p(g,N),g.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},g.prototype._update=function(v){for(var h=this._w,_=0|this._a,b=0|this._b,w=0|this._c,I=0|this._d,D=0|this._e,k=0;k<16;++k)h[k]=v.readInt32BE(4*k);for(;k<80;++k)h[k]=h[k-3]^h[k-8]^h[k-14]^h[k-16];for(var O=0;O<80;++O){var V=~~(O/20),B=C(_)+E(V,b,w,I)+D+h[O]+x[V]|0;D=I,I=w,w=P(b),b=_,_=B}this._a=_+this._a|0,this._b=b+this._b|0,this._c=w+this._c|0,this._d=I+this._d|0,this._e=D+this._e|0},g.prototype._hash=function(){var v=y.allocUnsafe(20);return v.writeInt32BE(0|this._a,0),v.writeInt32BE(0|this._b,4),v.writeInt32BE(0|this._c,8),v.writeInt32BE(0|this._d,12),v.writeInt32BE(0|this._e,16),v},Y.exports=g},7338:(Y,L,T)=>{var p=T(9879),N=T(3437),y=T(5859).Buffer,x=[1518500249,1859775393,-1894007588,-899497514],u=new Array(80);function g(){this.init(),this._w=u,N.call(this,64,56)}function C(h){return h<<1|h>>>31}function P(h){return h<<5|h>>>27}function E(h){return h<<30|h>>>2}function v(h,_,b,w){return 0===h?_&b|~_&w:2===h?_&b|_&w|b&w:_^b^w}p(g,N),g.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},g.prototype._update=function(h){for(var _=this._w,b=0|this._a,w=0|this._b,I=0|this._c,D=0|this._d,k=0|this._e,O=0;O<16;++O)_[O]=h.readInt32BE(4*O);for(;O<80;++O)_[O]=C(_[O-3]^_[O-8]^_[O-14]^_[O-16]);for(var V=0;V<80;++V){var B=~~(V/20),U=P(b)+v(B,w,I,D)+k+_[V]+x[B]|0;k=D,D=I,I=E(w),w=b,b=U}this._a=b+this._a|0,this._b=w+this._b|0,this._c=I+this._c|0,this._d=D+this._d|0,this._e=k+this._e|0},g.prototype._hash=function(){var h=y.allocUnsafe(20);return h.writeInt32BE(0|this._a,0),h.writeInt32BE(0|this._b,4),h.writeInt32BE(0|this._c,8),h.writeInt32BE(0|this._d,12),h.writeInt32BE(0|this._e,16),h},Y.exports=g},4280:(Y,L,T)=>{var p=T(9879),N=T(857),y=T(3437),x=T(5859).Buffer,u=new Array(64);function g(){this.init(),this._w=u,y.call(this,64,56)}p(g,N),g.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},g.prototype._hash=function(){var C=x.allocUnsafe(28);return C.writeInt32BE(this._a,0),C.writeInt32BE(this._b,4),C.writeInt32BE(this._c,8),C.writeInt32BE(this._d,12),C.writeInt32BE(this._e,16),C.writeInt32BE(this._f,20),C.writeInt32BE(this._g,24),C},Y.exports=g},857:(Y,L,T)=>{var p=T(9879),N=T(3437),y=T(5859).Buffer,x=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],u=new Array(64);function g(){this.init(),this._w=u,N.call(this,64,56)}function C(b,w,I){return I^b&(w^I)}function P(b,w,I){return b&w|I&(b|w)}function E(b){return(b>>>2|b<<30)^(b>>>13|b<<19)^(b>>>22|b<<10)}function v(b){return(b>>>6|b<<26)^(b>>>11|b<<21)^(b>>>25|b<<7)}function h(b){return(b>>>7|b<<25)^(b>>>18|b<<14)^b>>>3}function _(b){return(b>>>17|b<<15)^(b>>>19|b<<13)^b>>>10}p(g,N),g.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},g.prototype._update=function(b){for(var w=this._w,I=0|this._a,D=0|this._b,k=0|this._c,O=0|this._d,V=0|this._e,B=0|this._f,U=0|this._g,j=0|this._h,W=0;W<16;++W)w[W]=b.readInt32BE(4*W);for(;W<64;++W)w[W]=_(w[W-2])+w[W-7]+h(w[W-15])+w[W-16]|0;for(var X=0;X<64;++X){var K=j+v(V)+C(V,B,U)+x[X]+w[X]|0,ge=E(I)+P(I,D,k)|0;j=U,U=B,B=V,V=O+K|0,O=k,k=D,D=I,I=K+ge|0}this._a=I+this._a|0,this._b=D+this._b|0,this._c=k+this._c|0,this._d=O+this._d|0,this._e=V+this._e|0,this._f=B+this._f|0,this._g=U+this._g|0,this._h=j+this._h|0},g.prototype._hash=function(){var b=y.allocUnsafe(32);return b.writeInt32BE(this._a,0),b.writeInt32BE(this._b,4),b.writeInt32BE(this._c,8),b.writeInt32BE(this._d,12),b.writeInt32BE(this._e,16),b.writeInt32BE(this._f,20),b.writeInt32BE(this._g,24),b.writeInt32BE(this._h,28),b},Y.exports=g},6203:(Y,L,T)=>{var p=T(9879),N=T(5976),y=T(3437),x=T(5859).Buffer,u=new Array(160);function g(){this.init(),this._w=u,y.call(this,128,112)}p(g,N),g.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},g.prototype._hash=function(){var C=x.allocUnsafe(48);function P(E,v,h){C.writeInt32BE(E,h),C.writeInt32BE(v,h+4)}return P(this._ah,this._al,0),P(this._bh,this._bl,8),P(this._ch,this._cl,16),P(this._dh,this._dl,24),P(this._eh,this._el,32),P(this._fh,this._fl,40),C},Y.exports=g},5976:(Y,L,T)=>{var p=T(9879),N=T(3437),y=T(5859).Buffer,x=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],u=new Array(160);function g(){this.init(),this._w=u,N.call(this,128,112)}function C(D,k,O){return O^D&(k^O)}function P(D,k,O){return D&k|O&(D|k)}function E(D,k){return(D>>>28|k<<4)^(k>>>2|D<<30)^(k>>>7|D<<25)}function v(D,k){return(D>>>14|k<<18)^(D>>>18|k<<14)^(k>>>9|D<<23)}function h(D,k){return(D>>>1|k<<31)^(D>>>8|k<<24)^D>>>7}function _(D,k){return(D>>>1|k<<31)^(D>>>8|k<<24)^(D>>>7|k<<25)}function b(D,k){return(D>>>19|k<<13)^(k>>>29|D<<3)^D>>>6}function w(D,k){return(D>>>19|k<<13)^(k>>>29|D<<3)^(D>>>6|k<<26)}function I(D,k){return D>>>0<k>>>0?1:0}p(g,N),g.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},g.prototype._update=function(D){for(var k=this._w,O=0|this._ah,V=0|this._bh,B=0|this._ch,U=0|this._dh,j=0|this._eh,W=0|this._fh,X=0|this._gh,K=0|this._hh,ge=0|this._al,R=0|this._bl,r=0|this._cl,s=0|this._dl,l=0|this._el,a=0|this._fl,f=0|this._gl,M=0|this._hl,A=0;A<32;A+=2)k[A]=D.readInt32BE(4*A),k[A+1]=D.readInt32BE(4*A+4);for(;A<160;A+=2){var d=k[A-30],i=k[A-30+1],m=h(d,i),q=_(i,d),z=b(d=k[A-4],i=k[A-4+1]),J=w(i,d),he=k[A-32],ve=k[A-32+1],ae=q+k[A-14+1]|0,de=m+k[A-14]+I(ae,q)|0;de=(de=de+z+I(ae=ae+J|0,J)|0)+he+I(ae=ae+ve|0,ve)|0,k[A]=de,k[A+1]=ae}for(var Re=0;Re<160;Re+=2){de=k[Re],ae=k[Re+1];var Ee=P(O,V,B),ue=P(ge,R,r),ye=E(O,ge),Se=E(ge,O),ie=v(j,l),ee=v(l,j),Z=x[Re],le=x[Re+1],Oe=C(j,W,X),we=C(l,a,f),Te=M+ee|0,yt=K+ie+I(Te,M)|0;yt=(yt=(yt=yt+Oe+I(Te=Te+we|0,we)|0)+Z+I(Te=Te+le|0,le)|0)+de+I(Te=Te+ae|0,ae)|0;var Ne=Se+ue|0,Me=ye+Ee+I(Ne,Se)|0;K=X,M=f,X=W,f=a,W=j,a=l,j=U+yt+I(l=s+Te|0,s)|0,U=B,s=r,B=V,r=R,V=O,R=ge,O=yt+Me+I(ge=Te+Ne|0,Te)|0}this._al=this._al+ge|0,this._bl=this._bl+R|0,this._cl=this._cl+r|0,this._dl=this._dl+s|0,this._el=this._el+l|0,this._fl=this._fl+a|0,this._gl=this._gl+f|0,this._hl=this._hl+M|0,this._ah=this._ah+O+I(this._al,ge)|0,this._bh=this._bh+V+I(this._bl,R)|0,this._ch=this._ch+B+I(this._cl,r)|0,this._dh=this._dh+U+I(this._dl,s)|0,this._eh=this._eh+j+I(this._el,l)|0,this._fh=this._fh+W+I(this._fl,a)|0,this._gh=this._gh+X+I(this._gl,f)|0,this._hh=this._hh+K+I(this._hl,M)|0},g.prototype._hash=function(){var D=y.allocUnsafe(64);function k(O,V,B){D.writeInt32BE(O,B),D.writeInt32BE(V,B+4)}return k(this._ah,this._al,0),k(this._bh,this._bl,8),k(this._ch,this._cl,16),k(this._dh,this._dl,24),k(this._eh,this._el,32),k(this._fh,this._fl,40),k(this._gh,this._gl,48),k(this._hh,this._hl,56),D},Y.exports=g},6917:(Y,L,T)=>{Y.exports=y;var p=T(3105).EventEmitter;function y(){p.call(this)}T(9879)(y,p),y.Readable=T(2833),y.Writable=T(7807),y.Duplex=T(942),y.Transform=T(5431),y.PassThrough=T(619),y.finished=T(6820),y.pipeline=T(6076),y.Stream=y,y.prototype.pipe=function(x,u){var g=this;function C(w){x.writable&&!1===x.write(w)&&g.pause&&g.pause()}function P(){g.readable&&g.resume&&g.resume()}g.on("data",C),x.on("drain",P),!x._isStdio&&(!u||!1!==u.end)&&(g.on("end",v),g.on("close",h));var E=!1;function v(){E||(E=!0,x.end())}function h(){E||(E=!0,"function"==typeof x.destroy&&x.destroy())}function _(w){if(b(),0===p.listenerCount(this,"error"))throw w}function b(){g.removeListener("data",C),x.removeListener("drain",P),g.removeListener("end",v),g.removeListener("close",h),g.removeListener("error",_),x.removeListener("error",_),g.removeListener("end",b),g.removeListener("close",b),x.removeListener("close",b)}return g.on("error",_),x.on("error",_),g.on("end",b),g.on("close",b),x.on("close",b),x.emit("pipe",g),x}},2519:(Y,L,T)=>{"use strict";var p=T(4374).Buffer,N=p.isEncoding||function(O){switch((O=""+O)&&O.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function u(O){var V;switch(this.encoding=function(O){var V=function(O){if(!O)return"utf8";for(var V;;)switch(O){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return O;default:if(V)return;O=(""+O).toLowerCase(),V=!0}}(O);if("string"!=typeof V&&(p.isEncoding===N||!N(O)))throw new Error("Unknown encoding: "+O);return V||O}(O),this.encoding){case"utf16le":this.text=_,this.end=b,V=4;break;case"utf8":this.fillLast=E,V=4;break;case"base64":this.text=w,this.end=I,V=3;break;default:return this.write=D,void(this.end=k)}this.lastNeed=0,this.lastTotal=0,this.lastChar=p.allocUnsafe(V)}function g(O){return O<=127?0:O>>5==6?2:O>>4==14?3:O>>3==30?4:O>>6==2?-1:-2}function E(O){var V=this.lastTotal-this.lastNeed,B=function(O,V,B){if(128!=(192&V[0]))return O.lastNeed=0,"\ufffd";if(O.lastNeed>1&&V.length>1){if(128!=(192&V[1]))return O.lastNeed=1,"\ufffd";if(O.lastNeed>2&&V.length>2&&128!=(192&V[2]))return O.lastNeed=2,"\ufffd"}}(this,O);return void 0!==B?B:this.lastNeed<=O.length?(O.copy(this.lastChar,V,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(O.copy(this.lastChar,V,0,O.length),void(this.lastNeed-=O.length))}function _(O,V){if((O.length-V)%2==0){var B=O.toString("utf16le",V);if(B){var U=B.charCodeAt(B.length-1);if(U>=55296&&U<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=O[O.length-2],this.lastChar[1]=O[O.length-1],B.slice(0,-1)}return B}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=O[O.length-1],O.toString("utf16le",V,O.length-1)}function b(O){var V=O&&O.length?this.write(O):"";return this.lastNeed?V+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):V}function w(O,V){var B=(O.length-V)%3;return 0===B?O.toString("base64",V):(this.lastNeed=3-B,this.lastTotal=3,1===B?this.lastChar[0]=O[O.length-1]:(this.lastChar[0]=O[O.length-2],this.lastChar[1]=O[O.length-1]),O.toString("base64",V,O.length-B))}function I(O){var V=O&&O.length?this.write(O):"";return this.lastNeed?V+this.lastChar.toString("base64",0,3-this.lastNeed):V}function D(O){return O.toString(this.encoding)}function k(O){return O&&O.length?this.write(O):""}L.s=u,u.prototype.write=function(O){if(0===O.length)return"";var V,B;if(this.lastNeed){if(void 0===(V=this.fillLast(O)))return"";B=this.lastNeed,this.lastNeed=0}else B=0;return B<O.length?V?V+this.text(O,B):this.text(O,B):V||""},u.prototype.end=function(O){var V=O&&O.length?this.write(O):"";return this.lastNeed?V+"\ufffd":V},u.prototype.text=function(O,V){var B=function(O,V,B){var U=V.length-1;if(U<B)return 0;var j=g(V[U]);return j>=0?(j>0&&(O.lastNeed=j-1),j):--U<B||-2===j?0:(j=g(V[U]))>=0?(j>0&&(O.lastNeed=j-2),j):--U<B||-2===j?0:(j=g(V[U]))>=0?(j>0&&(2===j?j=0:O.lastNeed=j-3),j):0}(this,O,V);if(!this.lastNeed)return O.toString("utf8",V);this.lastTotal=B;var U=O.length-(B-this.lastNeed);return O.copy(this.lastChar,0,U),O.toString("utf8",V,U)},u.prototype.fillLast=function(O){if(this.lastNeed<=O.length)return O.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);O.copy(this.lastChar,this.lastTotal-this.lastNeed,0,O.length),this.lastNeed-=O.length}},4374:(Y,L,T)=>{var p=T(3875),N=p.Buffer;function y(u,g){for(var C in u)g[C]=u[C]}function x(u,g,C){return N(u,g,C)}N.from&&N.alloc&&N.allocUnsafe&&N.allocUnsafeSlow?Y.exports=p:(y(p,L),L.Buffer=x),x.prototype=Object.create(N.prototype),y(N,x),x.from=function(u,g,C){if("number"==typeof u)throw new TypeError("Argument must not be a number");return N(u,g,C)},x.alloc=function(u,g,C){if("number"!=typeof u)throw new TypeError("Argument must be a number");var P=N(u);return void 0!==g?"string"==typeof C?P.fill(g,C):P.fill(g):P.fill(0),P},x.allocUnsafe=function(u){if("number"!=typeof u)throw new TypeError("Argument must be a number");return N(u)},x.allocUnsafeSlow=function(u){if("number"!=typeof u)throw new TypeError("Argument must be a number");return p.SlowBuffer(u)}},5822:Y=>{function T(p){try{if(!global.localStorage)return!1}catch(y){return!1}var N=global.localStorage[p];return null!=N&&"true"===String(N).toLowerCase()}Y.exports=function(p,N){if(T("noDeprecation"))return p;var y=!1;return function(){if(!y){if(T("throwDeprecation"))throw new Error(N);T("traceDeprecation")?console.trace(N):console.warn(N),y=!0}return p.apply(this,arguments)}}},8952:(Y,L,T)=>{"use strict";function p(t){return"function"==typeof t}let N=!1;const y={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else N&&console.log("RxJS: Back to a better error behavior. Thank you. <3");N=t},get useDeprecatedSynchronousErrorHandling(){return N}};function x(t){setTimeout(()=>{throw t},0)}const u={closed:!0,next(t){},error(t){if(y.useDeprecatedSynchronousErrorHandling)throw t;x(t)},complete(){}},g=Array.isArray||(t=>t&&"number"==typeof t.length);function C(t){return null!==t&&"object"==typeof t}const E=(()=>{function t(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,o)=>`${o+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return t.prototype=Object.create(Error.prototype),t})();class v{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:o,_unsubscribe:c,_subscriptions:S}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof v)n.remove(this);else if(null!==n)for(let F=0;F<n.length;++F)n[F].remove(this);if(p(c)){o&&(this._unsubscribe=void 0);try{c.call(this)}catch(F){e=F instanceof E?h(F.errors):[F]}}if(g(S)){let F=-1,H=S.length;for(;++F<H;){const G=S[F];if(C(G))try{G.unsubscribe()}catch(re){e=e||[],re instanceof E?e=e.concat(h(re.errors)):e.push(re)}}}if(e)throw new E(e)}add(e){let n=e;if(!e)return v.EMPTY;switch(typeof e){case"function":n=new v(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof v)){const S=n;n=new v,n._subscriptions=[S]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:o}=n;if(null===o)n._parentOrParents=this;else if(o instanceof v){if(o===this)return n;n._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return n;o.push(this)}const c=this._subscriptions;return null===c?this._subscriptions=[n]:c.push(n),n}remove(e){const n=this._subscriptions;if(n){const o=n.indexOf(e);-1!==o&&n.splice(o,1)}}}var t;function h(t){return t.reduce((e,n)=>e.concat(n instanceof E?n.errors:n),[])}v.EMPTY=((t=new v).closed=!0,t);const _="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class w extends v{constructor(e,n,o){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=u;break;case 1:if(!e){this.destination=u;break}if("object"==typeof e){e instanceof w?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new I(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new I(this,e,n,o)}}[_](){return this}static create(e,n,o){const c=new w(e,n,o);return c.syncErrorThrowable=!1,c}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class I extends w{constructor(e,n,o,c){super(),this._parentSubscriber=e;let S,F=this;p(n)?S=n:n&&(S=n.next,o=n.error,c=n.complete,n!==u&&(F=Object.create(n),p(F.unsubscribe)&&this.add(F.unsubscribe.bind(F)),F.unsubscribe=this.unsubscribe.bind(this))),this._context=F,this._next=S,this._error=o,this._complete=c}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:n}=this;y.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:n}=this,{useDeprecatedSynchronousErrorHandling:o}=y;if(this._error)o&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(n.syncErrorThrowable)o?(n.syncErrorValue=e,n.syncErrorThrown=!0):x(e),this.unsubscribe();else{if(this.unsubscribe(),o)throw e;x(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const n=()=>this._complete.call(this._context);y.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,n){try{e.call(this._context,n)}catch(o){if(this.unsubscribe(),y.useDeprecatedSynchronousErrorHandling)throw o;x(o)}}__tryOrSetError(e,n,o){if(!y.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,o)}catch(c){return y.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=c,e.syncErrorThrown=!0,!0):(x(c),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const O="function"==typeof Symbol&&Symbol.observable||"@@observable";function V(t){return t}let j=(()=>{class t{constructor(n){this._isScalar=!1,n&&(this._subscribe=n)}lift(n){const o=new t;return o.source=this,o.operator=n,o}subscribe(n,o,c){const{operator:S}=this,F=function(t,e,n){if(t){if(t instanceof w)return t;if(t[_])return t[_]()}return t||e||n?new w(t,e,n):new w(u)}(n,o,c);if(F.add(S?S.call(F,this.source):this.source||y.useDeprecatedSynchronousErrorHandling&&!F.syncErrorThrowable?this._subscribe(F):this._trySubscribe(F)),y.useDeprecatedSynchronousErrorHandling&&F.syncErrorThrowable&&(F.syncErrorThrowable=!1,F.syncErrorThrown))throw F.syncErrorValue;return F}_trySubscribe(n){try{return this._subscribe(n)}catch(o){y.useDeprecatedSynchronousErrorHandling&&(n.syncErrorThrown=!0,n.syncErrorValue=o),function(t){for(;t;){const{closed:e,destination:n,isStopped:o}=t;if(e||o)return!1;t=n&&n instanceof w?n:null}return!0}(n)?n.error(o):console.warn(o)}}forEach(n,o){return new(o=W(o))((c,S)=>{let F;F=this.subscribe(H=>{try{n(H)}catch(G){S(G),F&&F.unsubscribe()}},S,c)})}_subscribe(n){const{source:o}=this;return o&&o.subscribe(n)}[O](){return this}pipe(...n){return 0===n.length?this:function(t){return 0===t.length?V:1===t.length?t[0]:function(n){return t.reduce((o,c)=>c(o),n)}}(n)(this)}toPromise(n){return new(n=W(n))((o,c)=>{let S;this.subscribe(F=>S=F,F=>c(F),()=>o(S))})}}return t.create=e=>new t(e),t})();function W(t){if(t||(t=y.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const K=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class ge extends v{constructor(e,n){super(),this.subject=e,this.subscriber=n,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,n=e.observers;if(this.subject=null,!n||0===n.length||e.isStopped||e.closed)return;const o=n.indexOf(this.subscriber);-1!==o&&n.splice(o,1)}}class R extends w{constructor(e){super(e),this.destination=e}}let r=(()=>{class t extends j{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[_](){return new R(this)}lift(n){const o=new s(this,this);return o.operator=n,o}next(n){if(this.closed)throw new K;if(!this.isStopped){const{observers:o}=this,c=o.length,S=o.slice();for(let F=0;F<c;F++)S[F].next(n)}}error(n){if(this.closed)throw new K;this.hasError=!0,this.thrownError=n,this.isStopped=!0;const{observers:o}=this,c=o.length,S=o.slice();for(let F=0;F<c;F++)S[F].error(n);this.observers.length=0}complete(){if(this.closed)throw new K;this.isStopped=!0;const{observers:n}=this,o=n.length,c=n.slice();for(let S=0;S<o;S++)c[S].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(n){if(this.closed)throw new K;return super._trySubscribe(n)}_subscribe(n){if(this.closed)throw new K;return this.hasError?(n.error(this.thrownError),v.EMPTY):this.isStopped?(n.complete(),v.EMPTY):(this.observers.push(n),new ge(this,n))}asObservable(){const n=new j;return n.source=this,n}}return t.create=(e,n)=>new s(e,n),t})();class s extends r{constructor(e,n){super(),this.destination=e,this.source=n}next(e){const{destination:n}=this;n&&n.next&&n.next(e)}error(e){const{destination:n}=this;n&&n.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:n}=this;return n?this.source.subscribe(e):v.EMPTY}}function l(t){return t&&"function"==typeof t.schedule}function a(t,e){return function(o){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return o.lift(new f(t,e))}}class f{constructor(e,n){this.project=e,this.thisArg=n}call(e,n){return n.subscribe(new M(e,this.project,this.thisArg))}}class M extends w{constructor(e,n,o){super(e),this.project=n,this.count=0,this.thisArg=o||this}_next(e){let n;try{n=this.project.call(this.thisArg,e,this.count++)}catch(o){return void this.destination.error(o)}this.destination.next(n)}}const A=t=>e=>{for(let n=0,o=t.length;n<o&&!e.closed;n++)e.next(t[n]);e.complete()},m="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",ce=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function se(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const he=t=>{if(t&&"function"==typeof t[O])return(t=>e=>{const n=t[O]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)})(t);if(ce(t))return A(t);if(se(t))return(t=>e=>(t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,x),e))(t);if(t&&"function"==typeof t[m])return(t=>e=>{const n=t[m]();for(;;){let o;try{o=n.next()}catch(c){return e.error(c),e}if(o.done){e.complete();break}if(e.next(o.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e})(t);{const n=`You provided ${C(t)?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(n)}};function de(t,e){return new j(n=>{const o=new v;let c=0;return o.add(e.schedule(function(){c!==t.length?(n.next(t[c++]),n.closed||o.add(this.schedule())):n.complete()})),o})}function Se(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[O]}(t))return function(t,e){return new j(n=>{const o=new v;return o.add(e.schedule(()=>{const c=t[O]();o.add(c.subscribe({next(S){o.add(e.schedule(()=>n.next(S)))},error(S){o.add(e.schedule(()=>n.error(S)))},complete(){o.add(e.schedule(()=>n.complete()))}}))})),o})}(t,e);if(se(t))return function(t,e){return new j(n=>{const o=new v;return o.add(e.schedule(()=>t.then(c=>{o.add(e.schedule(()=>{n.next(c),o.add(e.schedule(()=>n.complete()))}))},c=>{o.add(e.schedule(()=>n.error(c)))}))),o})}(t,e);if(ce(t))return de(t,e);if(function(t){return t&&"function"==typeof t[m]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new j(n=>{const o=new v;let c;return o.add(()=>{c&&"function"==typeof c.return&&c.return()}),o.add(e.schedule(()=>{c=t[m](),o.add(e.schedule(function(){if(n.closed)return;let S,F;try{const H=c.next();S=H.value,F=H.done}catch(H){return void n.error(H)}F?n.complete():(n.next(S),this.schedule())}))})),o})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof j?t:new j(he(t))}class ie extends w{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Z extends w{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function we(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(we((c,S)=>Se(t(c,S)).pipe(a((F,H)=>e(c,F,S,H))),n)):("number"==typeof e&&(n=e),o=>o.lift(new Te(t,n)))}class Te{constructor(e,n=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=n}call(e,n){return n.subscribe(new yt(e,this.project,this.concurrent))}}class yt extends Z{constructor(e,n,o=Number.POSITIVE_INFINITY){super(e),this.project=n,this.concurrent=o,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let n;const o=this.index++;try{n=this.project(e,o)}catch(c){return void this.destination.error(c)}this.active++,this._innerSub(n)}_innerSub(e){const n=new ie(this),o=this.destination;o.add(n);const c=function(t,e){if(e.closed)return;if(t instanceof j)return t.subscribe(e);let n;try{n=he(t)(e)}catch(o){e.error(o)}return n}(e,n);c!==n&&o.add(c)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Me(t=Number.POSITIVE_INFINITY){return we(V,t)}function Ye(t,e){return e?de(t,e):new j(A(t))}function Fe(){return function(e){return e.lift(new ct(e))}}class ct{constructor(e){this.connectable=e}call(e,n){const{connectable:o}=this;o._refCount++;const c=new Ve(e,o),S=n.subscribe(c);return c.closed||(c.connection=o.connect()),S}}class Ve extends w{constructor(e,n){super(e),this.connectable=n}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const n=e._refCount;if(n<=0)return void(this.connection=null);if(e._refCount=n-1,n>1)return void(this.connection=null);const{connection:o}=this,c=e._connection;this.connection=null,c&&(!o||c===o)&&c.unsubscribe()}}class Ke extends j{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new v,e.add(this.source.subscribe(new nt(this.getSubject(),this))),e.closed&&(this._connection=null,e=v.EMPTY)),e}refCount(){return Fe()(this)}}const Zt=(()=>{const t=Ke.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class nt extends R{constructor(e,n){super(e),this.connectable=n}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const n=e._connection;e._refCount=0,e._subject=null,e._connection=null,n&&n.unsubscribe()}}}function Nn(){return new r}function Ge(t){for(let e in t)if(t[e]===Ge)return e;throw Error("Could not find renamed property on target object.")}function qe(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(qe).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function We(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const Dn=Ge({__forward_ref__:Ge});function ft(t){return t.__forward_ref__=ft,t.toString=function(){return qe(this())},t}function Ue(t){return function(t){return"function"==typeof t&&t.hasOwnProperty(Dn)&&t.__forward_ref__===ft}(t)?t():t}class it extends Error{constructor(e,n){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(e,n)),this.code=e}}function sn(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():function(t){return"string"==typeof t?t:null==t?"":String(t)}(t)}function Qe(t,e){const n=e?` in ${e}`:"";throw new it("201",`No provider for ${sn(t)} found${n}`)}function $t(t,e){null==t&&function(t,e,n,o){throw new Error(`ASSERTION ERROR: ${t}`+(null==o?"":` [Expected=> ${n} ${o} ${e} <=Actual]`))}(e,t,null,"!=")}function xt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Jt(t){return{providers:t.providers||[],imports:t.imports||[]}}function tn(t){return Sn(t,wo)||Sn(t,ps)}function Sn(t,e){return t.hasOwnProperty(e)?t[e]:null}function Ni(t){return t&&(t.hasOwnProperty(Uo)||t.hasOwnProperty(Co))?t[Uo]:null}const wo=Ge({\u0275prov:Ge}),Uo=Ge({\u0275inj:Ge}),ps=Ge({ngInjectableDef:Ge}),Co=Ge({ngInjectorDef:Ge});var Ut=(()=>((Ut=Ut||{})[Ut.Default=0]="Default",Ut[Ut.Host=1]="Host",Ut[Ut.Self=2]="Self",Ut[Ut.SkipSelf=4]="SkipSelf",Ut[Ut.Optional=8]="Optional",Ut))();let Vo;function $r(t){const e=Vo;return Vo=t,e}function Mo(t,e,n){const o=tn(t);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:n&Ut.Optional?null:void 0!==e?e:void Qe(qe(t),"Injector")}function Vr(t){return{toString:t}.toString()}var br=(()=>((br=br||{})[br.OnPush=0]="OnPush",br[br.Default=1]="Default",br))(),Jn=(()=>((Jn=Jn||{})[Jn.Emulated=0]="Emulated",Jn[Jn.None=2]="None",Jn[Jn.ShadowDom=3]="ShadowDom",Jn))();const _o="undefined"!=typeof globalThis&&globalThis,Ra="undefined"!=typeof window&&window,Ho="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,vs="undefined"!=typeof global&&global,cn=_o||vs||Ra||Ho,Li={},An=[],to=Ge({\u0275cmp:Ge}),Zn=Ge({\u0275dir:Ge}),no=Ge({\u0275pipe:Ge}),ms=Ge({\u0275mod:Ge}),jo=Ge({\u0275loc:Ge}),Hr=Ge({\u0275fac:Ge}),di=Ge({__NG_ELEMENT_ID__:Ge});let ys=0;function zo(t){return Vr(()=>{const n={},o={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===br.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||An,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Jn.Emulated,id:"c",styles:t.styles||An,_:null,setInput:null,schemas:t.schemas||null,tView:null},c=t.directives,S=t.features,F=t.pipes;return o.id+=ys++,o.inputs=Eo(t.inputs,n),o.outputs=Eo(t.outputs),S&&S.forEach(H=>H(o)),o.directiveDefs=c?()=>("function"==typeof c?c():c).map(Wo):null,o.pipeDefs=F?()=>("function"==typeof F?F():F).map(ro):null,o})}function Wo(t){return cr(t)||function(t){return t[Zn]||null}(t)}function ro(t){return function(t){return t[no]||null}(t)}const hi={};function io(t){return Vr(()=>{const e={type:t.type,bootstrap:t.bootstrap||An,declarations:t.declarations||An,imports:t.imports||An,exports:t.exports||An,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(hi[t.id]=t.type),e})}function Eo(t,e){if(null==t)return Li;const n={};for(const o in t)if(t.hasOwnProperty(o)){let c=t[o],S=c;Array.isArray(c)&&(S=c[1],c=c[0]),n[c]=o,e&&(e[c]=S)}return n}const _r=zo;function cr(t){return t[to]||null}function fr(t,e){const n=t[ms]||null;if(!n&&!0===e)throw new Error(`Type ${qe(t)} does not have '\u0275mod' property.`);return n}function et(t){return Array.isArray(t)&&"object"==typeof t[1]}function pt(t){return Array.isArray(t)&&!0===t[1]}function bt(t){return 0!=(8&t.flags)}function vt(t){return 2==(2&t.flags)}function wt(t){return 1==(1&t.flags)}function Ot(t){return null!==t.template}function Dt(t){return 0!=(512&t[2])}function lo(t,e){return t.hasOwnProperty(Hr)?t[Hr]:null}class Yu{constructor(e,n,o){this.previousValue=e,this.currentValue=n,this.firstChange=o}isFirstChange(){return this.firstChange}}function Pa(t){return t.type.prototype.ngOnChanges&&(t.setInput=u0),Oa}function Oa(){const t=Xu(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===Li)t.previous=e;else for(let o in e)n[o]=e[o];t.current=null,this.ngOnChanges(e)}}function u0(t,e,n,o){const c=Xu(t)||function(t,e){return t[Lc]=e}(t,{previous:Li,current:null}),S=c.current||(c.current={}),F=c.previous,H=this.declaredInputs[n],G=F[H];S[H]=new Yu(G&&G.currentValue,e,F===Li),t[o]=e}const Lc="__ngSimpleChanges__";function Xu(t){return t[Lc]||null}let Na;function Hn(t){return!!t.listen}const Ko={createRenderer:(t,e)=>void 0!==Na?Na:"undefined"!=typeof document?document:void 0};function rr(t){for(;Array.isArray(t);)t=t[0];return t}function qr(t,e){return rr(e[t.index])}function Fa(t,e){return t.data[e]}function kr(t,e){const n=e[t];return et(n)?n:n[0]}function Ba(t){return 128==(128&t[2])}function Ui(t,e){return null==e?null:t[e]}function Es(t){t[18]=0}function Ua(t,e){t[5]+=e;let n=t,o=t[3];for(;null!==o&&(1===e&&1===n[5]||-1===e&&0===n[5]);)o[5]+=e,n=o,o=o[3]}const Wt={lFrame:al(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function tl(){return Wt.bindingsEnabled}function _t(){return Wt.lFrame.lView}function yn(){return Wt.lFrame.tView}function Va(t){return Wt.lFrame.contextLView=t,t[8]}function ir(){let t=nl();for(;null!==t&&64===t.type;)t=t.parent;return t}function nl(){return Wt.lFrame.currentTNode}function ti(t,e){const n=Wt.lFrame;n.currentTNode=t,n.isParent=e}function Zo(){return Wt.lFrame.isParent}function Ts(){return Wt.isInCheckNoChangesMode}function Is(t){Wt.isInCheckNoChangesMode=t}function Kc(t,e){const n=Wt.lFrame;n.bindingIndex=n.bindingRootIndex=t,za(e)}function za(t){Wt.lFrame.currentDirectiveIndex=t}function qa(t){Wt.lFrame.currentQueryIndex=t}function Zc(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ol(t,e,n){if(n&Ut.SkipSelf){let c=e,S=t;for(;!(c=c.parent,null!==c||n&Ut.Host||(c=Zc(S),null===c||(S=S[15],10&c.type))););if(null===c)return!1;e=c,t=S}const o=Wt.lFrame=sl();return o.currentTNode=e,o.lView=t,!0}function As(t){const e=sl(),n=t[1];Wt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function sl(){const t=Wt.lFrame,e=null===t?null:t.child;return null===e?al(t):e}function al(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ul(){const t=Wt.lFrame;return Wt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ll=ul;function Ds(){const t=ul();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function wr(){return Wt.lFrame.selectedIndex}function Hi(t){Wt.lFrame.selectedIndex=t}function or(t,e){for(let n=e.directiveStart,o=e.directiveEnd;n<o;n++){const S=t.data[n].type.prototype,{ngAfterContentInit:F,ngAfterContentChecked:H,ngAfterViewInit:G,ngAfterViewChecked:re,ngOnDestroy:fe}=S;F&&(t.contentHooks||(t.contentHooks=[])).push(-n,F),H&&((t.contentHooks||(t.contentHooks=[])).push(n,H),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,H)),G&&(t.viewHooks||(t.viewHooks=[])).push(-n,G),re&&((t.viewHooks||(t.viewHooks=[])).push(n,re),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,re)),null!=fe&&(t.destroyHooks||(t.destroyHooks=[])).push(n,fe)}}function Ao(t,e,n){fl(t,e,3,n)}function Os(t,e,n,o){(3&t[2])===n&&fl(t,e,n,o)}function Wa(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function fl(t,e,n,o){const S=null!=o?o:-1,F=e.length-1;let H=0;for(let G=void 0!==o?65535&t[18]:0;G<F;G++)if("number"==typeof e[G+1]){if(H=e[G],null!=o&&H>=o)break}else e[G]<0&&(t[18]+=65536),(H<S||-1==S)&&(rf(t,n,e,G),t[18]=(4294901760&t[18])+G+2),G++}function rf(t,e,n,o){const c=n[o]<0,S=n[o+1],H=t[c?-n[o]:n[o]];if(c){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{S.call(H)}finally{}}}else try{S.call(H)}finally{}}class Qo{constructor(e,n,o){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=o}}function ht(t,e,n){const o=Hn(t);let c=0;for(;c<n.length;){const S=n[c];if("number"==typeof S){if(0!==S)break;c++;const F=n[c++],H=n[c++],G=n[c++];o?t.setAttribute(e,H,G,F):e.setAttributeNS(F,H,G)}else{const F=S,H=n[++c];tt(F)?o&&t.setProperty(e,F,H):o?t.setAttribute(e,F,H):e.setAttribute(F,H),c++}}return c}function je(t){return 3===t||4===t||6===t}function tt(t){return 64===t.charCodeAt(0)}function Et(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let o=0;o<e.length;o++){const c=e[o];"number"==typeof c?n=c:0===n||Tt(t,n,c,null,-1===n||2===n?e[++o]:null)}}return t}function Tt(t,e,n,o,c){let S=0,F=t.length;if(-1===e)F=-1;else for(;S<t.length;){const H=t[S++];if("number"==typeof H){if(H===e){F=-1;break}if(H>e){F=S-1;break}}}for(;S<t.length;){const H=t[S];if("number"==typeof H)break;if(H===n){if(null===o)return void(null!==c&&(t[S+1]=c));if(o===t[S+1])return void(t[S+2]=c)}S++,null!==o&&S++,null!==c&&S++}-1!==F&&(t.splice(F,0,e),S=F+1),t.splice(S++,0,n),null!==o&&t.splice(S++,0,o),null!==c&&t.splice(S++,0,c)}function Lt(t){return-1!==t}function Rt(t){return 32767&t}function nn(t,e){let n=function(t){return t>>16}(t),o=e;for(;n>0;)o=o[15],n--;return o}let Kn=!0;function Un(t){const e=Kn;return Kn=t,e}let co=0;function Wr(t,e){const n=Ga(t,e);if(-1!==n)return n;const o=e[1];o.firstCreatePass&&(t.injectorIndex=e.length,ks(o.data,t),ks(e,null),ks(o.blueprint,null));const c=dl(t,e),S=t.injectorIndex;if(Lt(c)){const F=Rt(c),H=nn(c,e),G=H[1].data;for(let re=0;re<8;re++)e[S+re]=H[F+re]|G[F+re]}return e[S+8]=c,S}function ks(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ga(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function dl(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,o=null,c=e;for(;null!==c;){const S=c[1],F=S.type;if(o=2===F?S.declTNode:1===F?c[6]:null,null===o)return-1;if(n++,c=c[15],-1!==o.injectorIndex)return o.injectorIndex|n<<16}return-1}function hl(t,e,n){!function(t,e,n){let o;"string"==typeof n?o=n.charCodeAt(0)||0:n.hasOwnProperty(di)&&(o=n[di]),null==o&&(o=n[di]=co++);const c=255&o;e.data[t+(c>>5)]|=1<<c}(t,e,n)}function h0(t,e,n){if(n&Ut.Optional)return t;Qe(e,"NodeInjector")}function p0(t,e,n,o){if(n&Ut.Optional&&void 0===o&&(o=null),0==(n&(Ut.Self|Ut.Host))){const c=t[9],S=$r(void 0);try{return c?c.get(e,o,n&Ut.Optional):Mo(e,o,n&Ut.Optional)}finally{$r(S)}}return h0(o,e,n)}function g0(t,e,n,o=Ut.Default,c){if(null!==t){const S=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(di)?t[di]:void 0;return"number"==typeof e?e>=0?255&e:tb:e}(n);if("function"==typeof S){if(!ol(e,t,o))return o&Ut.Host?h0(c,n,o):p0(e,n,o,c);try{const F=S(o);if(null!=F||o&Ut.Optional)return F;Qe(n)}finally{ll()}}else if("number"==typeof S){let F=null,H=Ga(t,e),G=-1,re=o&Ut.Host?e[16][6]:null;for((-1===H||o&Ut.SkipSelf)&&(G=-1===H?dl(t,e):e[H+8],-1!==G&&y0(o,!1)?(F=e[1],H=Rt(G),e=nn(G,e)):H=-1);-1!==H;){const fe=e[1];if(m0(S,H,fe.data)){const _e=nb(H,e,n,F,o,re);if(_e!==v0)return _e}G=e[H+8],-1!==G&&y0(o,e[1].data[H+8]===re)&&m0(S,H,e)?(F=fe,H=Rt(G),e=nn(G,e)):H=-1}}}return p0(e,n,o,c)}const v0={};function tb(){return new Ns(ir(),_t())}function nb(t,e,n,o,c,S){const F=e[1],H=F.data[t+8],fe=function(t,e,n,o,c){const S=t.providerIndexes,F=e.data,H=1048575&S,G=t.directiveStart,fe=S>>20,Ie=c?H+fe:t.directiveEnd;for(let ke=o?H:H+fe;ke<Ie;ke++){const Le=F[ke];if(ke<G&&n===Le||ke>=G&&Le.type===n)return ke}if(c){const ke=F[G];if(ke&&Ot(ke)&&ke.type===n)return G}return null}(H,F,n,null==o?vt(H)&&Kn:o!=F&&0!=(3&H.type),c&Ut.Host&&S===H);return null!==fe?$a(e,F,fe,H):v0}function $a(t,e,n,o){let c=t[n];const S=e.data;if(function(t){return t instanceof Qo}(c)){const F=c;F.resolving&&function(t,e){throw new it("200",`Circular dependency in DI detected for ${t}`)}(sn(S[n]));const H=Un(F.canSeeViewProviders);F.resolving=!0;const G=F.injectImpl?$r(F.injectImpl):null;ol(t,o,Ut.Default);try{c=t[n]=F.factory(void 0,S,t,o),e.firstCreatePass&&n>=o.directiveStart&&function(t,e,n){const{ngOnChanges:o,ngOnInit:c,ngDoCheck:S}=e.type.prototype;if(o){const F=Pa(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,F),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,F)}c&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,c),S&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,S),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,S))}(n,S[n],e)}finally{null!==G&&$r(G),Un(H),F.resolving=!1,ll()}}return c}function m0(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function y0(t,e){return!(t&Ut.Self||t&Ut.Host&&e)}class Ns{constructor(e,n){this._tNode=e,this._lView=n}get(e,n){return g0(this._tNode,this._lView,e,void 0,n)}}const Fs="__parameters__";function Xo(t,e,n){return Vr(()=>{const o=function(t){return function(...n){if(t){const o=t(...n);for(const c in o)this[c]=o[c]}}}(e);function c(...S){if(this instanceof c)return o.apply(this,S),this;const F=new c(...S);return H.annotation=F,H;function H(G,re,fe){const _e=G.hasOwnProperty(Fs)?G[Fs]:Object.defineProperty(G,Fs,{value:[]})[Fs];for(;_e.length<=fe;)_e.push(null);return(_e[fe]=_e[fe]||[]).push(F),G}}return n&&(c.prototype=Object.create(n.prototype)),c.prototype.ngMetadataName=t,c.annotationCls=c,c})}class Vn{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=xt({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}function zi(t,e){t.forEach(n=>Array.isArray(n)?zi(n,e):e(n))}function vl(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function es(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const Qa={},ff="__NG_DI_FLAG__",Vs="ngTempTokenPath",vb=/\n/gm,df="__source",hf=Ge({provide:String,useValue:Ge});let Ya;function Hs(t){const e=Ya;return Ya=t,e}function yb(t,e=Ut.Default){if(void 0===Ya)throw new Error("inject() must be called from an injection context");return null===Ya?Mo(t,void 0,e):Ya.get(t,e&Ut.Optional?null:void 0,e)}function vn(t,e=Ut.Default){return(Vo||yb)(Ue(t),e)}function ts(t){const e=[];for(let n=0;n<t.length;n++){const o=Ue(t[n]);if(Array.isArray(o)){if(0===o.length)throw new Error("Arguments array must have arguments.");let c,S=Ut.Default;for(let F=0;F<o.length;F++){const H=o[F],G=bb(H);"number"==typeof G?-1===G?c=H.token:S|=G:c=H}e.push(vn(c,S))}else e.push(vn(o))}return e}function Xa(t,e){return t[ff]=e,t.prototype[ff]=e,t}function bb(t){return t[ff]}function S0(t,e,n,o){const c=t[Vs];throw e[df]&&c.unshift(e[df]),t.message=function(t,e,n,o=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let c=qe(e);if(Array.isArray(e))c=e.map(qe).join(" -> ");else if("object"==typeof e){let S=[];for(let F in e)if(e.hasOwnProperty(F)){let H=e[F];S.push(F+":"+("string"==typeof H?JSON.stringify(H):qe(H)))}c=`{${S.join(", ")}}`}return`${n}${o?"("+o+")":""}[${c}]: ${t.replace(vb,"\n  ")}`}("\n"+t.message,c,n,o),t.ngTokenPath=c,t[Vs]=null,t}const eu=Xa(Xo("Inject",t=>({token:t})),-1),qi=Xa(Xo("Optional"),8),ns=Xa(Xo("SkipSelf"),4),q0="__ngContext__";function Ar(t,e){t[q0]=e}function Mf(t){const e=function(t){return t[q0]||null}(t);return e?Array.isArray(e)?e:e.lView:null}function _l(t){return t.ngOriginalError}function dw(t,...e){t.error(...e)}class is{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e),o=this._findContext(e),c=function(t){return t&&t.ngErrorLogger||dw}(e);c(this._console,"ERROR",e),n&&c(this._console,"ORIGINAL ERROR",n),o&&c(this._console,"ERROR CONTEXT",o)}_findContext(e){return e?function(t){return t.ngDebugContext}(e)||this._findContext(_l(e)):null}_findOriginalError(e){let n=e&&_l(e);for(;n&&_l(n);)n=_l(n);return n||null}}const X0=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(cn))();function $i(t){return t instanceof Function?t():t}var Zr=(()=>((Zr=Zr||{})[Zr.Important=1]="Important",Zr[Zr.DashCase=2]="DashCase",Zr))();function Ef(t,e){return undefined(t,e)}function su(t){const e=t[3];return pt(e)?e[3]:e}function Tf(t){return ip(t[13])}function If(t){return ip(t[4])}function ip(t){for(;null!==t&&!pt(t);)t=t[4];return t}function Ws(t,e,n,o,c){if(null!=o){let S,F=!1;pt(o)?S=o:et(o)&&(F=!0,o=o[0]);const H=rr(o);0===t&&null!==n?null==c?cp(e,n,H):os(e,n,H,c||null,!0):1===t&&null!==n?os(e,n,H,c||null,!0):2===t?function(t,e,n){const o=El(t,e);o&&function(t,e,n,o){Hn(t)?t.removeChild(e,n,o):e.removeChild(n)}(t,o,e,n)}(e,H,F):3===t&&e.destroyNode(H),null!=S&&function(t,e,n,o,c){const S=n[7];S!==rr(n)&&Ws(e,t,o,S,c);for(let H=10;H<n.length;H++){const G=n[H];au(G[1],G,t,e,o,S)}}(e,t,S,n,c)}}function Rf(t,e,n){return Hn(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function sp(t,e){const n=t[9],o=n.indexOf(e),c=e[3];1024&e[2]&&(e[2]&=-1025,Ua(c,-1)),n.splice(o,1)}function Af(t,e){if(t.length<=10)return;const n=10+e,o=t[n];if(o){const c=o[17];null!==c&&c!==t&&sp(c,o),e>0&&(t[n-1][4]=o[4]);const S=es(t,10+e);!function(t,e){au(t,e,e[11],2,null,null),e[0]=null,e[6]=null}(o[1],o);const F=S[19];null!==F&&F.detachView(S[1]),o[3]=null,o[4]=null,o[2]&=-129}return o}function ap(t,e){if(!(256&e[2])){const n=e[11];Hn(n)&&n.destroyNode&&au(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Df(t[1],t);for(;e;){let n=null;if(et(e))n=e[13];else{const o=e[10];o&&(n=o)}if(!n){for(;e&&!e[4]&&e!==t;)et(e)&&Df(e[1],e),e=e[3];null===e&&(e=t),et(e)&&Df(e[1],e),n=e&&e[4]}e=n}}(e)}}function Df(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let o=0;o<n.length;o+=2){const c=e[n[o]];if(!(c instanceof Qo)){const S=n[o+1];if(Array.isArray(S))for(let F=0;F<S.length;F+=2){const H=c[S[F]],G=S[F+1];try{G.call(H)}finally{}}else try{S.call(c)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,o=e[7];let c=-1;if(null!==n)for(let S=0;S<n.length-1;S+=2)if("string"==typeof n[S]){const F=n[S+1],H="function"==typeof F?F(e):rr(e[F]),G=o[c=n[S+2]],re=n[S+3];"boolean"==typeof re?H.removeEventListener(n[S],G,re):re>=0?o[c=re]():o[c=-re].unsubscribe(),S+=2}else{const F=o[c=n[S+1]];n[S].call(F)}if(null!==o){for(let S=c+1;S<o.length;S++)o[S]();e[7]=null}}(t,e),1===e[1].type&&Hn(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&pt(e[3])){n!==e[3]&&sp(n,e);const o=e[19];null!==o&&o.detachView(t)}}}function up(t,e,n){return function(t,e,n){let o=e;for(;null!==o&&40&o.type;)o=(e=o).parent;if(null===o)return n[0];if(2&o.flags){const c=t.data[o.directiveStart].encapsulation;if(c===Jn.None||c===Jn.Emulated)return null}return qr(o,n)}(t,e.parent,n)}function os(t,e,n,o,c){Hn(t)?t.insertBefore(e,n,o,c):e.insertBefore(n,o,c)}function cp(t,e,n){Hn(t)?t.appendChild(e,n):e.appendChild(n)}function fp(t,e,n,o,c){null!==o?os(t,e,n,o,c):cp(t,e,n)}function El(t,e){return Hn(t)?t.parentNode(e):e.parentNode}let pp=function(t,e,n){return 40&t.type?qr(t,n):null};function Tl(t,e,n,o){const c=up(t,o,e),S=e[11],H=function(t,e,n){return pp(t,e,n)}(o.parent||e[6],o,e);if(null!=c)if(Array.isArray(n))for(let G=0;G<n.length;G++)fp(S,c,n[G],H,!1);else fp(S,c,n,H,!1)}function Il(t,e){if(null!==e){const n=e.type;if(3&n)return qr(e,t);if(4&n)return Of(-1,t[e.index]);if(8&n){const o=e.child;if(null!==o)return Il(t,o);{const c=t[e.index];return pt(c)?Of(-1,c):rr(c)}}if(32&n)return Ef(e,t)()||rr(t[e.index]);{const o=vp(t,e);return null!==o?Array.isArray(o)?o[0]:Il(su(t[16]),o):Il(t,e.next)}}return null}function vp(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Of(t,e){const n=10+t+1;if(n<e.length){const o=e[n],c=o[1].firstChild;if(null!==c)return Il(o,c)}return e[7]}function kf(t,e,n,o,c,S,F){for(;null!=n;){const H=o[n.index],G=n.type;if(F&&0===e&&(H&&Ar(rr(H),o),n.flags|=4),64!=(64&n.flags))if(8&G)kf(t,e,n.child,o,c,S,!1),Ws(e,t,c,H,S);else if(32&G){const re=Ef(n,o);let fe;for(;fe=re();)Ws(e,t,c,fe,S);Ws(e,t,c,H,S)}else 16&G?yp(t,e,o,n,c,S):Ws(e,t,c,H,S);n=F?n.projectionNext:n.next}}function au(t,e,n,o,c,S){kf(n,o,t.firstChild,e,c,S,!1)}function yp(t,e,n,o,c,S){const F=n[16],G=F[6].projection[o.projection];if(Array.isArray(G))for(let re=0;re<G.length;re++)Ws(e,t,c,G[re],S);else kf(t,e,G,F[3],c,S,!0)}function bp(t,e,n){Hn(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Nf(t,e,n){Hn(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function wp(t,e,n){let o=t.length;for(;;){const c=t.indexOf(e,n);if(-1===c)return c;if(0===c||t.charCodeAt(c-1)<=32){const S=e.length;if(c+S===o||t.charCodeAt(c+S)<=32)return c}n=c+1}}const Cp="ng-template";function Bw(t,e,n){let o=0;for(;o<t.length;){let c=t[o++];if(n&&"class"===c){if(c=t[o],-1!==wp(c.toLowerCase(),e,0))return!0}else if(1===c){for(;o<t.length&&"string"==typeof(c=t[o++]);)if(c.toLowerCase()===e)return!0;return!1}}return!1}function Mp(t){return 4===t.type&&t.value!==Cp}function Uw(t,e,n){return e===(4!==t.type||n?t.value:Cp)}function Vw(t,e,n){let o=4;const c=t.attrs||[],S=function(t){for(let e=0;e<t.length;e++)if(je(t[e]))return e;return t.length}(c);let F=!1;for(let H=0;H<e.length;H++){const G=e[H];if("number"!=typeof G){if(!F)if(4&o){if(o=2|1&o,""!==G&&!Uw(t,G,n)||""===G&&1===e.length){if(bi(o))return!1;F=!0}}else{const re=8&o?G:e[++H];if(8&o&&null!==t.attrs){if(!Bw(t.attrs,re,n)){if(bi(o))return!1;F=!0}continue}const _e=Hw(8&o?"class":G,c,Mp(t),n);if(-1===_e){if(bi(o))return!1;F=!0;continue}if(""!==re){let Ie;Ie=_e>S?"":c[_e+1].toLowerCase();const ke=8&o?Ie:null;if(ke&&-1!==wp(ke,re,0)||2&o&&re!==Ie){if(bi(o))return!1;F=!0}}}}else{if(!F&&!bi(o)&&!bi(G))return!1;if(F&&bi(G))continue;F=!1,o=G|1&o}}return bi(o)||F}function bi(t){return 0==(1&t)}function Hw(t,e,n,o){if(null===e)return-1;let c=0;if(o||!n){let S=!1;for(;c<e.length;){const F=e[c];if(F===t)return c;if(3===F||6===F)S=!0;else{if(1===F||2===F){let H=e[++c];for(;"string"==typeof H;)H=e[++c];continue}if(4===F)break;if(0===F){c+=4;continue}}c+=S?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const o=t[n];if("number"==typeof o)return-1;if(o===e)return n;n++}return-1}(e,t)}function _p(t,e,n=!1){for(let o=0;o<e.length;o++)if(Vw(t,e[o],n))return!0;return!1}function Sp(t,e){return t?":not("+e.trim()+")":e}function Gw(t){let e=t[0],n=1,o=2,c="",S=!1;for(;n<t.length;){let F=t[n];if("string"==typeof F)if(2&o){const H=t[++n];c+="["+F+(H.length>0?'="'+H+'"':"")+"]"}else 8&o?c+="."+F:4&o&&(c+=" "+F);else""!==c&&!bi(F)&&(e+=Sp(S,c),c=""),o=F,S=S||!bi(o);n++}return""!==c&&(e+=Sp(S,c)),e}const Xt={};function xl(t){Ep(yn(),_t(),wr()+t,Ts())}function Ep(t,e,n,o){if(!o)if(3==(3&e[2])){const S=t.preOrderCheckHooks;null!==S&&Ao(e,S,n)}else{const S=t.preOrderHooks;null!==S&&Os(e,S,0,n)}Hi(n)}function Np(t,e){const n=t.contentQueries;if(null!==n)for(let o=0;o<n.length;o+=2){const c=n[o],S=n[o+1];if(-1!==S){const F=t.data[S];qa(c),F.contentQueries(2,e[S],S)}}}function uu(t,e,n,o,c,S,F,H,G,re){const fe=e.blueprint.slice();return fe[0]=c,fe[2]=140|o,Es(fe),fe[3]=fe[15]=t,fe[8]=n,fe[10]=F||t&&t[10],fe[11]=H||t&&t[11],fe[12]=G||t&&t[12]||null,fe[9]=re||t&&t[9]||null,fe[6]=S,fe[16]=2==e.type?t[16]:fe,fe}function Gs(t,e,n,o,c){let S=t.data[e];if(null===S)S=function(t,e,n,o,c){const S=nl(),F=Zo(),G=t.data[e]=function(t,e,n,o,c,S){return{type:n,index:o,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:S,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,F?S:S&&S.parent,n,e,o,c);return null===t.firstChild&&(t.firstChild=G),null!==S&&(F?null==S.child&&null!==G.parent&&(S.child=G):null===S.next&&(S.next=G)),G}(t,e,n,o,c),Wt.lFrame.inI18n&&(S.flags|=64);else if(64&S.type){S.type=n,S.value=o,S.attrs=c;const F=function(){const t=Wt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();S.injectorIndex=null===F?-1:F.injectorIndex}return ti(S,!0),S}function $s(t,e,n,o){if(0===n)return-1;const c=e.length;for(let S=0;S<n;S++)e.push(o),t.blueprint.push(o),t.data.push(null);return c}function lu(t,e,n){As(e);try{const o=t.viewQuery;null!==o&&ed(1,o,n);const c=t.template;null!==c&&Lp(t,e,c,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Np(t,e),t.staticViewQueries&&ed(2,t.viewQuery,n);const S=t.components;null!==S&&function(t,e){for(let n=0;n<e.length;n++)EC(t,e[n])}(e,S)}catch(o){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),o}finally{e[2]&=-5,Ds()}}function Ks(t,e,n,o){const c=e[2];if(256==(256&c))return;As(e);const S=Ts();try{Es(e),function(t){Wt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&Lp(t,e,n,2,o);const F=3==(3&c);if(!S)if(F){const re=t.preOrderCheckHooks;null!==re&&Ao(e,re,null)}else{const re=t.preOrderHooks;null!==re&&Os(e,re,0,null),Wa(e,0)}if(function(t){for(let e=Tf(t);null!==e;e=If(e)){if(!e[2])continue;const n=e[9];for(let o=0;o<n.length;o++){const c=n[o],S=c[3];0==(1024&c[2])&&Ua(S,1),c[2]|=1024}}}(e),function(t){for(let e=Tf(t);null!==e;e=If(e))for(let n=10;n<e.length;n++){const o=e[n],c=o[1];Ba(o)&&Ks(c,o,c.template,o[8])}}(e),null!==t.contentQueries&&Np(t,e),!S)if(F){const re=t.contentCheckHooks;null!==re&&Ao(e,re)}else{const re=t.contentHooks;null!==re&&Os(e,re,1),Wa(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let o=0;o<n.length;o++){const c=n[o];if(c<0)Hi(~c);else{const S=c,F=n[++o],H=n[++o];Kc(F,S),H(2,e[S])}}}finally{Hi(-1)}}(t,e);const H=t.components;null!==H&&function(t,e){for(let n=0;n<e.length;n++)SC(t,e[n])}(e,H);const G=t.viewQuery;if(null!==G&&ed(2,G,o),!S)if(F){const re=t.viewCheckHooks;null!==re&&Ao(e,re)}else{const re=t.viewHooks;null!==re&&Os(e,re,2),Wa(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),S||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ua(e[3],-1))}finally{Ds()}}function oC(t,e,n,o){const c=e[10],S=!Ts(),F=function(t){return 4==(4&t[2])}(e);try{S&&!F&&c.begin&&c.begin(),F&&lu(t,e,o),Ks(t,e,n,o)}finally{S&&!F&&c.end&&c.end()}}function Lp(t,e,n,o,c){const S=wr(),F=2&o;try{Hi(-1),F&&e.length>20&&Ep(t,e,20,Ts()),n(o,c)}finally{Hi(S)}}function Gf(t,e,n){!tl()||(function(t,e,n,o){const c=n.directiveStart,S=n.directiveEnd;t.firstCreatePass||Wr(n,e),Ar(o,e);const F=n.initialInputs;for(let H=c;H<S;H++){const G=t.data[H],re=Ot(G);re&&bC(e,n,G);const fe=$a(e,t,H,n);Ar(fe,e),null!==F&&wC(0,H-c,fe,G,0,F),re&&(kr(n.index,e)[8]=fe)}}(t,e,n,qr(n,e)),128==(128&n.flags)&&function(t,e,n){const o=n.directiveStart,c=n.directiveEnd,F=n.index,H=Wt.lFrame.currentDirectiveIndex;try{Hi(F);for(let G=o;G<c;G++){const re=t.data[G],fe=e[G];za(G),(null!==re.hostBindings||0!==re.hostVars||null!==re.hostAttrs)&&Wp(re,fe)}}finally{Hi(-1),za(H)}}(t,e,n))}function $f(t,e,n=qr){const o=e.localNames;if(null!==o){let c=e.index+1;for(let S=0;S<o.length;S+=2){const F=o[S+1],H=-1===F?n(e,t):t[F];t[c++]=H}}}function Bp(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Pl(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Pl(t,e,n,o,c,S,F,H,G,re){const fe=20+o,_e=fe+c,Ie=function(t,e){const n=[];for(let o=0;o<e;o++)n.push(o<t?null:Xt);return n}(fe,_e),ke="function"==typeof re?re():re;return Ie[1]={type:t,blueprint:Ie,template:n,queries:null,viewQuery:H,declTNode:e,data:Ie.slice().fill(null,fe),bindingStartIndex:fe,expandoStartIndex:_e,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof S?S():S,pipeRegistry:"function"==typeof F?F():F,firstChild:null,schemas:G,consts:ke,incompleteFirstPass:!1}}function jp(t,e,n){for(let o in t)if(t.hasOwnProperty(o)){const c=t[o];(n=null===n?{}:n).hasOwnProperty(o)?n[o].push(e,c):n[o]=[e,c]}return n}function Kf(t,e,n,o){let c=!1;if(tl()){const S=function(t,e,n){const o=t.directiveRegistry;let c=null;if(o)for(let S=0;S<o.length;S++){const F=o[S];_p(n,F.selectors,!1)&&(c||(c=[]),hl(Wr(n,e),t,F.type),Ot(F)?(Gp(t,n),c.unshift(F)):c.push(F))}return c}(t,e,n),F=null===o?null:{"":-1};if(null!==S){c=!0,$p(n,t.data.length,S.length);for(let fe=0;fe<S.length;fe++){const _e=S[fe];_e.providersResolver&&_e.providersResolver(_e)}let H=!1,G=!1,re=$s(t,e,S.length,null);for(let fe=0;fe<S.length;fe++){const _e=S[fe];n.mergedAttrs=Et(n.mergedAttrs,_e.hostAttrs),Kp(t,n,e,re,_e),yC(re,_e,F),null!==_e.contentQueries&&(n.flags|=8),(null!==_e.hostBindings||null!==_e.hostAttrs||0!==_e.hostVars)&&(n.flags|=128);const Ie=_e.type.prototype;!H&&(Ie.ngOnChanges||Ie.ngOnInit||Ie.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),H=!0),!G&&(Ie.ngOnChanges||Ie.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),G=!0),re++}!function(t,e){const o=e.directiveEnd,c=t.data,S=e.attrs,F=[];let H=null,G=null;for(let re=e.directiveStart;re<o;re++){const fe=c[re],_e=fe.inputs,Ie=null===S||Mp(e)?null:CC(_e,S);F.push(Ie),H=jp(_e,re,H),G=jp(fe.outputs,re,G)}null!==H&&(H.hasOwnProperty("class")&&(e.flags|=16),H.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=F,e.inputs=H,e.outputs=G}(t,n)}F&&function(t,e,n){if(e){const o=t.localNames=[];for(let c=0;c<e.length;c+=2){const S=n[e[c+1]];if(null==S)throw new it("301",`Export of name '${e[c+1]}' not found!`);o.push(e[c],S)}}}(n,o,F)}return n.mergedAttrs=Et(n.mergedAttrs,n.attrs),c}function qp(t,e,n,o,c,S){const F=S.hostBindings;if(F){let H=t.hostBindingOpCodes;null===H&&(H=t.hostBindingOpCodes=[]);const G=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(H)!=G&&H.push(G),H.push(o,c,F)}}function Wp(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Gp(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function yC(t,e,n){if(n){if(e.exportAs)for(let o=0;o<e.exportAs.length;o++)n[e.exportAs[o]]=t;Ot(e)&&(n[""]=t)}}function $p(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Kp(t,e,n,o,c){t.data[o]=c;const S=c.factory||(c.factory=lo(c.type)),F=new Qo(S,Ot(c),null);t.blueprint[o]=F,n[o]=F,qp(t,e,0,o,$s(t,n,c.hostVars,Xt),c)}function bC(t,e,n){const o=qr(e,t),c=Bp(n),S=t[10],F=Ol(t,uu(t,c,null,n.onPush?64:16,o,e,S,S.createRenderer(o,n),null,null));t[e.index]=F}function wC(t,e,n,o,c,S){const F=S[e];if(null!==F){const H=o.setInput;for(let G=0;G<F.length;){const re=F[G++],fe=F[G++],_e=F[G++];null!==H?o.setInput(n,_e,re,fe):n[fe]=_e}}}function CC(t,e){let n=null,o=0;for(;o<e.length;){const c=e[o];if(0!==c)if(5!==c){if("number"==typeof c)break;t.hasOwnProperty(c)&&(null===n&&(n=[]),n.push(c,t[c],e[o+1])),o+=2}else o+=2;else o+=4}return n}function Jp(t,e,n,o){return new Array(t,!0,!1,e,null,0,o,n,null,null)}function SC(t,e){const n=kr(e,t);if(Ba(n)){const o=n[1];80&n[2]?Ks(o,n,o.template,n[8]):n[5]>0&&Zf(n)}}function Zf(t){for(let o=Tf(t);null!==o;o=If(o))for(let c=10;c<o.length;c++){const S=o[c];if(1024&S[2]){const F=S[1];Ks(F,S,F.template,S[8])}else S[5]>0&&Zf(S)}const n=t[1].components;if(null!==n)for(let o=0;o<n.length;o++){const c=kr(n[o],t);Ba(c)&&c[5]>0&&Zf(c)}}function EC(t,e){const n=kr(e,t),o=n[1];(function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(o,n),lu(o,n,n[8])}function Ol(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Qf(t){for(;t;){t[2]|=64;const e=su(t);if(Dt(t)&&!e)return t;t=e}return null}function Xf(t,e,n){const o=e[10];o.begin&&o.begin();try{Ks(t,e,t.template,n)}catch(c){throw eg(e,c),c}finally{o.end&&o.end()}}function Zp(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],o=Mf(n),c=o[1];oC(c,o,c.template,n)}}(t[8])}function ed(t,e,n){qa(0),e(t,n)}const AC=(()=>Promise.resolve(null))();function Qp(t){return t[7]||(t[7]=[])}function Yp(t){return t.cleanup||(t.cleanup=[])}function eg(t,e){const n=t[9],o=n?n.get(is,null):null;o&&o.handleError(e)}function tg(t,e,n,o,c){for(let S=0;S<n.length;){const F=n[S++],H=n[S++],G=e[F],re=t.data[F];null!==re.setInput?re.setInput(G,c,o,H):G[H]=c}}function kl(t,e,n){let o=n?t.styles:null,c=n?t.classes:null,S=0;if(null!==e)for(let F=0;F<e.length;F++){const H=e[F];"number"==typeof H?S=H:1==S?c=We(c,H):2==S&&(o=We(o,H+": "+e[++F]+";"))}n?t.styles=o:t.stylesWithoutHost=o,n?t.classes=c:t.classesWithoutHost=c}const Js=new Vn("INJECTOR",-1);class ng{get(e,n=Qa){if(n===Qa){const o=new Error(`NullInjectorError: No provider for ${qe(e)}!`);throw o.name="NullInjectorError",o}return n}}const cu=new Vn("Set Injector scope."),fu={},OC={};let td;function rg(){return void 0===td&&(td=new ng),td}function ig(t,e=null,n=null,o){return new NC(t,n,e||rg(),o)}class NC{constructor(e,n,o,c=null){this.parent=o,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const S=[];n&&zi(n,H=>this.processProvider(H,e,n)),zi([e],H=>this.processInjectorType(H,[],S)),this.records.set(Js,Zs(void 0,this));const F=this.records.get(cu);this.scope=null!=F?F.value:null,this.source=c||("object"==typeof e?null:qe(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,n=Qa,o=Ut.Default){this.assertNotDestroyed();const c=Hs(this),S=$r(void 0);try{if(!(o&Ut.SkipSelf)){let H=this.records.get(e);if(void 0===H){const G=function(t){return"function"==typeof t||"object"==typeof t&&t instanceof Vn}(e)&&tn(e);H=G&&this.injectableDefInScope(G)?Zs(nd(e),fu):null,this.records.set(e,H)}if(null!=H)return this.hydrate(e,H)}return(o&Ut.Self?rg():this.parent).get(e,n=o&Ut.Optional&&n===Qa?null:n)}catch(F){if("NullInjectorError"===F.name){if((F[Vs]=F[Vs]||[]).unshift(qe(e)),c)throw F;return S0(F,e,"R3InjectorError",this.source)}throw F}finally{$r(S),Hs(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((o,c)=>e.push(qe(c))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,n,o){if(!(e=Ue(e)))return!1;let c=Ni(e);const S=null==c&&e.ngModule||void 0,F=void 0===S?e:S,H=-1!==o.indexOf(F);if(void 0!==S&&(c=Ni(S)),null==c)return!1;if(null!=c.imports&&!H){let fe;o.push(F);try{zi(c.imports,_e=>{this.processInjectorType(_e,n,o)&&(void 0===fe&&(fe=[]),fe.push(_e))})}finally{}if(void 0!==fe)for(let _e=0;_e<fe.length;_e++){const{ngModule:Ie,providers:ke}=fe[_e];zi(ke,Le=>this.processProvider(Le,Ie,ke||An))}}this.injectorDefTypes.add(F);const G=lo(F)||(()=>new F);this.records.set(F,Zs(G,fu));const re=c.providers;if(null!=re&&!H){const fe=e;zi(re,_e=>this.processProvider(_e,fe,re))}return void 0!==S&&void 0!==e.providers}processProvider(e,n,o){let c=Qs(e=Ue(e))?e:Ue(e&&e.provide);const S=function(t,e,n){return sg(t)?Zs(void 0,t.useValue):Zs(function(t,e,n){let o;if(Qs(t)){const c=Ue(t);return lo(c)||nd(c)}if(sg(t))o=()=>Ue(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))o=()=>t.useFactory(...ts(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))o=()=>vn(Ue(t.useExisting));else{const c=Ue(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return lo(c)||nd(c);o=()=>new c(...ts(t.deps))}return o}(t),fu)}(e);if(Qs(e)||!0!==e.multi)this.records.get(c);else{let F=this.records.get(c);F||(F=Zs(void 0,fu,!0),F.factory=()=>ts(F.multi),this.records.set(c,F)),c=e,F.multi.push(e)}this.records.set(c,S)}hydrate(e,n){return n.value===fu&&(n.value=OC,n.value=n.factory()),"object"==typeof n.value&&n.value&&function(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this.onDestroy.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=Ue(e.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function nd(t){const e=tn(t),n=null!==e?e.factory:lo(t);if(null!==n)return n;if(t instanceof Vn)throw new Error(`Token ${qe(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const o=function(t,e){const n=[];for(let o=0;o<t;o++)n.push(e);return n}(e,"?");throw new Error(`Can't resolve all parameters for ${qe(t)}: (${o.join(", ")}).`)}const n=function(t){const e=t&&(t[wo]||t[ps]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Zs(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function sg(t){return null!==t&&"object"==typeof t&&hf in t}function Qs(t){return"function"==typeof t}const ag=function(t,e,n){return function(t,e=null,n=null,o){const c=ig(t,e,n,o);return c._resolveInjectorDefTypes(),c}({name:n},e,t,n)};class Fn{static create(e,n){return Array.isArray(e)?ag(e,n,""):ag(e.providers,e.parent,e.name||"")}}function n2(t,e){or(Mf(t)[1],ir())}Fn.THROW_IF_NOT_FOUND=Qa,Fn.NULL=new ng,Fn.\u0275prov=xt({token:Fn,providedIn:"any",factory:()=>vn(Js)}),Fn.__NG_ELEMENT_ID__=-1;let Nl=null;function Ys(){if(!Nl){const t=cn.Symbol;if(t&&t.iterator)Nl=t.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<e.length;++n){const o=e[n];"entries"!==o&&"size"!==o&&Map.prototype[o]===Map.prototype.entries&&(Nl=o)}}}return Nl}function hu(t){return!!ld(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ys()in t)}function ld(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Fl(t,e,n,o,c,S,F,H){const G=_t(),re=yn(),fe=t+20,_e=re.firstCreatePass?function(t,e,n,o,c,S,F,H,G){const re=e.consts,fe=Gs(e,t,4,F||null,Ui(re,H));Kf(e,n,fe,Ui(re,G)),or(e,fe);const _e=fe.tViews=Pl(2,fe,o,c,S,e.directiveRegistry,e.pipeRegistry,null,e.schemas,re);return null!==e.queries&&(e.queries.template(e,fe),_e.queries=e.queries.embeddedTView(fe)),fe}(fe,re,G,e,n,o,c,S,F):re.data[fe];ti(_e,!1);const Ie=G[11].createComment("");Tl(re,G,Ie,_e),Ar(Ie,G),Ol(G,G[fe]=Jp(Ie,G,Ie,_e)),wt(_e)&&Gf(re,G,_e),null!=F&&$f(G,_e,H)}function hn(t,e=Ut.Default){const n=_t();return null===n?vn(t,e):g0(ir(),n,Ue(t),e)}function gu(t,e,n){const o=_t();return function(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}(o,Wt.lFrame.bindingIndex++,e)&&function(t,e,n,o,c,S,F,H){const G=qr(e,n);let fe,re=e.inputs;!H&&null!=re&&(fe=re[o])?(tg(t,n,fe,o,c),vt(e)&&function(t,e){const n=kr(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(o=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(o),c=null!=F?F(c,e.value||"",o):c,Hn(S)?S.setProperty(G,o,c):tt(o)||(G.setProperty?G.setProperty(o,c):G[o]=c))}(yn(),function(){const t=Wt.lFrame;return Fa(t.tView,t.selectedIndex)}(),o,t,e,o[11],n,!1),gu}function pd(t,e,n,o,c){const F=c?"class":"style";tg(t,n,e.inputs[F],F,o)}function Zi(t,e,n,o){const c=_t(),S=yn(),F=20+t,H=c[11],G=c[F]=Rf(H,e,Wt.lFrame.currentNamespace),re=S.firstCreatePass?function(t,e,n,o,c,S,F){const H=e.consts,re=Gs(e,t,2,c,Ui(H,S));return Kf(e,n,re,Ui(H,F)),null!==re.attrs&&kl(re,re.attrs,!1),null!==re.mergedAttrs&&kl(re,re.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,re),re}(F,S,c,0,e,n,o):S.data[F];ti(re,!0);const fe=re.mergedAttrs;null!==fe&&ht(H,G,fe);const _e=re.classes;null!==_e&&Nf(H,G,_e);const Ie=re.styles;null!==Ie&&bp(H,G,Ie),64!=(64&re.flags)&&Tl(S,c,G,re),0===Wt.lFrame.elementDepthCount&&Ar(G,c),Wt.lFrame.elementDepthCount++,wt(re)&&(Gf(S,c,re),function(t,e,n){if(bt(e)){const c=e.directiveEnd;for(let S=e.directiveStart;S<c;S++){const F=t.data[S];F.contentQueries&&F.contentQueries(1,n[S],S)}}}(S,re,c)),null!==o&&$f(c,re)}function Qi(){let t=ir();Zo()?Wt.lFrame.isParent=!1:(t=t.parent,ti(t,!1));const e=t;Wt.lFrame.elementDepthCount--;const n=yn();n.firstCreatePass&&(or(n,t),bt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&pd(n,e,_t(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&pd(n,e,_t(),e.stylesWithoutHost,!1)}function gd(){return _t()}function vd(t){return!!t&&"function"==typeof t.then}const Qg=function(t){return!!t&&"function"==typeof t.subscribe};function Ul(t,e,n,o){const c=_t(),S=yn(),F=ir();return function(t,e,n,o,c,S,F,H){const G=wt(o),fe=t.firstCreatePass&&Yp(t),_e=e[8],Ie=Qp(e);let ke=!0;if(3&o.type||H){const $e=qr(o,e),St=H?H($e):$e,Ct=Ie.length,kt=H?zt=>H(rr(zt[o.index])):o.index;if(Hn(n)){let zt=null;if(!H&&G&&(zt=function(t,e,n,o){const c=t.cleanup;if(null!=c)for(let S=0;S<c.length-1;S+=2){const F=c[S];if(F===n&&c[S+1]===o){const H=e[7],G=c[S+2];return H.length>G?H[G]:null}"string"==typeof F&&(S+=2)}return null}(t,e,c,o.index)),null!==zt)(zt.__ngLastListenerFn__||zt).__ngNextListenerFn__=S,zt.__ngLastListenerFn__=S,ke=!1;else{S=md(o,e,_e,S,!1);const ln=n.listen(St,c,S);Ie.push(S,ln),fe&&fe.push(c,kt,Ct,Ct+1)}}else S=md(o,e,_e,S,!0),St.addEventListener(c,S,F),Ie.push(S),fe&&fe.push(c,kt,Ct,F)}else S=md(o,e,_e,S,!1);const Le=o.outputs;let mt;if(ke&&null!==Le&&(mt=Le[c])){const $e=mt.length;if($e)for(let St=0;St<$e;St+=2){const yr=e[mt[St]][mt[St+1]].subscribe(S),fi=Ie.length;Ie.push(S,yr),fe&&fe.push(c,o.index,fi,-(fi+1))}}}(S,c,c[11],F,t,e,!!n,o),Ul}function ev(t,e,n,o){try{return!1!==n(o)}catch(c){return eg(t,c),!1}}function md(t,e,n,o,c){return function S(F){if(F===Function)return o;const H=2&t.flags?kr(t.index,e):e;0==(32&e[2])&&Qf(H);let G=ev(e,0,o,F),re=S.__ngNextListenerFn__;for(;re;)G=ev(e,0,re,F)&&G,re=re.__ngNextListenerFn__;return c&&!1===G&&(F.preventDefault(),F.returnValue=!1),G}}function Vl(t=1){return function(t){return(Wt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Wt.lFrame.contextLView))[8]}(t)}function mu(t,e=""){const n=_t(),o=yn(),c=t+20,S=o.firstCreatePass?Gs(o,c,1,e,null):o.data[c],F=n[c]=function(t,e){return Hn(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Tl(o,n,F,S),ti(S,!1)}const as=void 0;var xM=["en",[["a","p"],["AM","PM"],as],[["AM","PM"],as,as],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],as,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],as,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",as,"{1} 'at' {0}",as],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ca={};function Gv(t){return t in ca||(ca[t]=cn.ng&&cn.ng.common&&cn.ng.common.locales&&cn.ng.common.locales[t]),ca[t]}var Pt=(()=>((Pt=Pt||{})[Pt.LocaleId=0]="LocaleId",Pt[Pt.DayPeriodsFormat=1]="DayPeriodsFormat",Pt[Pt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Pt[Pt.DaysFormat=3]="DaysFormat",Pt[Pt.DaysStandalone=4]="DaysStandalone",Pt[Pt.MonthsFormat=5]="MonthsFormat",Pt[Pt.MonthsStandalone=6]="MonthsStandalone",Pt[Pt.Eras=7]="Eras",Pt[Pt.FirstDayOfWeek=8]="FirstDayOfWeek",Pt[Pt.WeekendRange=9]="WeekendRange",Pt[Pt.DateFormat=10]="DateFormat",Pt[Pt.TimeFormat=11]="TimeFormat",Pt[Pt.DateTimeFormat=12]="DateTimeFormat",Pt[Pt.NumberSymbols=13]="NumberSymbols",Pt[Pt.NumberFormats=14]="NumberFormats",Pt[Pt.CurrencyCode=15]="CurrencyCode",Pt[Pt.CurrencySymbol=16]="CurrencySymbol",Pt[Pt.CurrencyName=17]="CurrencyName",Pt[Pt.Currencies=18]="Currencies",Pt[Pt.Directionality=19]="Directionality",Pt[Pt.PluralCase=20]="PluralCase",Pt[Pt.ExtraData=21]="ExtraData",Pt))();const jl="en-US";let $v=jl;function Cd(t){$t(t,"Expected localeId to be defined"),"string"==typeof t&&($v=t.toLowerCase().replace(/_/g,"-"))}class ym{}const wm="ngComponent";class R_{resolveComponentFactory(e){throw function(t){const e=Error(`No component factory found for ${qe(t)}. Did you add it to @NgModule.entryComponents?`);return e[wm]=t,e}(e)}}class us{}function $l(...t){}function da(t,e){return new Ei(qr(t,e))}us.NULL=new R_;const P_=function(){return da(ir(),_t())};let Ei=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=P_,t})();class Kl{}let Rd=(()=>{class t{}return t.\u0275prov=xt({token:t,providedIn:"root",factory:()=>null}),t})();class Ad{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const _m=new Ad("12.2.2");class Sm{constructor(){}supports(e){return hu(e)}create(e){return new B_(e)}}const F_=(t,e)=>e;class B_{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||F_}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,o=this._removalsHead,c=0,S=null;for(;n||o;){const F=!o||n&&n.currentIndex<Tm(o,c,S)?n:o,H=Tm(F,c,S),G=F.currentIndex;if(F===o)c--,o=o._nextRemoved;else if(n=n._next,null==F.previousIndex)c++;else{S||(S=[]);const re=H-c,fe=G-c;if(re!=fe){for(let Ie=0;Ie<re;Ie++){const ke=Ie<S.length?S[Ie]:S[Ie]=0,Le=ke+Ie;fe<=Le&&Le<re&&(S[Ie]=ke+1)}S[F.previousIndex]=fe-re}}H!==G&&e(F,H,G)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!hu(e))throw new Error(`Error trying to diff '${qe(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let c,S,F,n=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(let H=0;H<this.length;H++)S=e[H],F=this._trackByFn(H,S),null!==n&&Object.is(n.trackById,F)?(o&&(n=this._verifyReinsertion(n,S,F,H)),Object.is(n.item,S)||this._addIdentityChange(n,S)):(n=this._mismatch(n,S,F,H),o=!0),n=n._next}else c=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Ys()]();let o;for(;!(o=n.next()).done;)e(o.value)}}(e,H=>{F=this._trackByFn(c,H),null!==n&&Object.is(n.trackById,F)?(o&&(n=this._verifyReinsertion(n,H,F,c)),Object.is(n.item,H)||this._addIdentityChange(n,H)):(n=this._mismatch(n,H,F,c),o=!0),n=n._next,c++}),this.length=c;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,o,c){let S;return null===e?S=this._itTail:(S=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,S,c)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(o,c))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,S,c)):e=this._addAfter(new U_(n,o),S,c),e}_verifyReinsertion(e,n,o,c){let S=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==S?e=this._reinsertAfter(S,e._prev,c):e.currentIndex!=c&&(e.currentIndex=c,this._addToMoves(e,c)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const c=e._prevRemoved,S=e._nextRemoved;return null===c?this._removalsHead=S:c._nextRemoved=S,null===S?this._removalsTail=c:S._prevRemoved=c,this._insertAfter(e,n,o),this._addToMoves(e,o),e}_moveAfter(e,n,o){return this._unlink(e),this._insertAfter(e,n,o),this._addToMoves(e,o),e}_addAfter(e,n,o){return this._insertAfter(e,n,o),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,o){const c=null===n?this._itHead:n._next;return e._next=c,e._prev=n,null===c?this._itTail=e:c._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new Em),this._linkedRecords.put(e),e.currentIndex=o,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,o=e._next;return null===n?this._itHead=o:n._next=o,null===o?this._itTail=n:o._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Em),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class U_{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class V_{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===n||n<=o.currentIndex)&&Object.is(o.trackById,e))return o;return null}remove(e){const n=e._prevDup,o=e._nextDup;return null===n?this._head=o:n._nextDup=o,null===o?this._tail=n:o._prevDup=n,null===this._head}}class Em{constructor(){this.map=new Map}put(e){const n=e.trackById;let o=this.map.get(n);o||(o=new V_,this.map.set(n,o)),o.add(e)}get(e,n){const c=this.map.get(e);return c?c.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Tm(t,e,n){const o=t.previousIndex;if(null===o)return o;let c=0;return n&&o<n.length&&(c=n[o]),o+e+c}class Im{constructor(){}supports(e){return e instanceof Map||ld(e)}create(){return new H_}}class H_{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||ld(e)))throw new Error(`Error trying to diff '${qe(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(o,c)=>{if(n&&n.key===c)this._maybeAddToChanges(n,o),this._appendAfter=n,n=n._next;else{const S=this._getOrCreateRecordForKey(c,o);n=this._insertBeforeOrAppend(n,S)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let o=n;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const o=e._prev;return n._next=e,n._prev=o,e._prev=n,o&&(o._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const c=this._records.get(e);this._maybeAddToChanges(c,n);const S=c._prev,F=c._next;return S&&(S._next=F),F&&(F._prev=S),c._next=null,c._prev=null,c}const o=new j_(e);return this._records.set(e,o),o.currentValue=n,this._addToAdditions(o),o}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(o=>n(e[o],o))}}class j_{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function xm(){return new Mu([new Sm])}let Mu=(()=>{class t{constructor(n){this.factories=n}static create(n,o){if(null!=o){const c=o.factories.slice();n=n.concat(c)}return new t(n)}static extend(n){return{provide:t,useFactory:o=>t.create(n,o||xm()),deps:[[t,new ns,new qi]]}}find(n){const o=this.factories.find(c=>c.supports(n));if(null!=o)return o;throw new Error(`Cannot find a differ supporting object '${n}' of type '${function(t){return t.name||typeof t}(n)}'`)}}return t.\u0275prov=xt({token:t,providedIn:"root",factory:xm}),t})();function Rm(){return new ha([new Im])}let ha=(()=>{class t{constructor(n){this.factories=n}static create(n,o){if(o){const c=o.factories.slice();n=n.concat(c)}return new t(n)}static extend(n){return{provide:t,useFactory:o=>t.create(n,o||Rm()),deps:[[t,new ns,new qi]]}}find(n){const o=this.factories.find(c=>c.supports(n));if(o)return o;throw new Error(`Cannot find a differ supporting object '${n}'`)}}return t.\u0275prov=xt({token:t,providedIn:"root",factory:Rm}),t})();function Jl(t,e,n,o,c=!1){for(;null!==n;){const S=e[n.index];if(null!==S&&o.push(rr(S)),pt(S))for(let H=10;H<S.length;H++){const G=S[H],re=G[1].firstChild;null!==re&&Jl(G[1],G,re,o)}const F=n.type;if(8&F)Jl(t,e,n.child,o);else if(32&F){const H=Ef(n,e);let G;for(;G=H();)o.push(G)}else if(16&F){const H=vp(e,n);if(Array.isArray(H))o.push(...H);else{const G=su(e[16]);Jl(G[1],G,H,o,!0)}}n=c?n.projectionNext:n.next}return o}class _u{constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,n=e[1];return Jl(n,e,n.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(pt(e)){const n=e[8],o=n?n.indexOf(this):-1;o>-1&&(Af(e,o),es(n,o))}this._attachedToViewContainer=!1}ap(this._lView[1],this._lView)}onDestroy(e){!function(t,e,n,o){const c=Qp(e);null===n?c.push(o):(c.push(n),t.firstCreatePass&&Yp(t).push(o,c.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){Qf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Xf(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Is(!0);try{Xf(t,e,n)}finally{Is(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(t,e){au(t,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class q_ extends _u{constructor(e){super(e),this._view=e}detectChanges(){Zp(this._view)}checkNoChanges(){!function(t){Is(!0);try{Zp(t)}finally{Is(!1)}}(this._view)}get context(){return null}}const Z_=[new Im],Y_=new Mu([new Sm]),X_=new ha(Z_),t3=function(){return function(t,e){return 4&t.type?new r3(e,t,da(t,e)):null}(ir(),_t())};let vo=(()=>{class t{}return t.__NG_ELEMENT_ID__=t3,t})();const n3=vo,r3=class extends n3{constructor(e,n,o){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=o}createEmbeddedView(e){const n=this._declarationTContainer.tViews,o=uu(this._declarationLView,n,e,16,null,n.declTNode,null,null,null,null);o[17]=this._declarationLView[this._declarationTContainer.index];const S=this._declarationLView[19];return null!==S&&(o[19]=S.createEmbeddedView(n)),lu(n,o,e),new _u(o)}};class ls{}const a3=function(){return function(t,e){let n;const o=e[t.index];if(pt(o))n=o;else{let c;if(8&t.type)c=rr(o);else{const S=e[11];c=S.createComment("");const F=qr(t,e);os(S,El(S,F),c,function(t,e){return Hn(t)?t.nextSibling(e):e.nextSibling}(S,F),!1)}e[t.index]=n=Jp(o,e,c,t),Ol(e,n)}return new Am(n,t,e)}(ir(),_t())};let eo=(()=>{class t{}return t.__NG_ELEMENT_ID__=a3,t})();const l3=eo,Am=class extends l3{constructor(e,n,o){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=o}get element(){return da(this._hostTNode,this._hostLView)}get injector(){return new Ns(this._hostTNode,this._hostLView)}get parentInjector(){const e=dl(this._hostTNode,this._hostLView);if(Lt(e)){const n=nn(e,this._hostLView),o=Rt(e);return new Ns(n[1].data[o+8],n)}return new Ns(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=Dm(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,o){const c=e.createEmbeddedView(n||{});return this.insert(c,o),c}createComponent(e,n,o,c,S){const F=o||this.parentInjector;if(!S&&null==e.ngModule&&F){const G=F.get(ls,null);G&&(S=G)}const H=e.create(F,c,void 0,S);return this.insert(H.hostView,n),H}insert(e,n){const o=e._lView,c=o[1];if(function(t){return pt(t[3])}(o)){const fe=this.indexOf(e);if(-1!==fe)this.detach(fe);else{const _e=o[3],Ie=new Am(_e,_e[6],_e[3]);Ie.detach(Ie.indexOf(e))}}const S=this._adjustIndex(n),F=this._lContainer;!function(t,e,n,o){const c=10+o,S=n.length;o>0&&(n[c-1][4]=e),o<S-10?(e[4]=n[c],vl(n,10+o,e)):(n.push(e),e[4]=null),e[3]=n;const F=e[17];null!==F&&n!==F&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(F,e);const H=e[19];null!==H&&H.insertView(t),e[2]|=128}(c,o,F,S);const H=Of(S,F),G=o[11],re=El(G,F[7]);return null!==re&&function(t,e,n,o,c,S){o[0]=c,o[6]=e,au(t,o,n,1,c,S)}(c,F[6],G,o,re,H),e.attachToViewContainerRef(),vl(Dd(F),S,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=Dm(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),o=Af(this._lContainer,n);o&&(es(Dd(this._lContainer),n),ap(o[1],o))}detach(e){const n=this._adjustIndex(e,-1),o=Af(this._lContainer,n);return o&&null!=es(Dd(this._lContainer),n)?new _u(o):null}_adjustIndex(e,n=0){return null==e?this.length+n:e}};function Dm(t){return t[8]}function Dd(t){return t[8]||(t[8]=[])}const ma={};class Ym extends us{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=cr(e);return new ey(n,this.ngModule)}}function Xm(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const oS=new Vn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>X0});class ey extends ym{constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function(t){return t.map(Gw).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return Xm(this.componentDef.inputs)}get outputs(){return Xm(this.componentDef.outputs)}create(e,n,o,c){const S=(c=c||this.ngModule)?function(t,e){return{get:(n,o,c)=>{const S=t.get(n,ma,c);return S!==ma||o===ma?S:e.get(n,o,c)}}}(e,c.injector):e,F=S.get(Kl,Ko),H=S.get(Rd,null),G=F.createRenderer(null,this.componentDef),re=this.componentDef.selectors[0][0]||"div",fe=o?function(t,e,n){if(Hn(t))return t.selectRootElement(e,n===Jn.ShadowDom);let o="string"==typeof e?t.querySelector(e):e;return o.textContent="",o}(G,o,this.componentDef.encapsulation):Rf(F.createRenderer(null,this.componentDef),re,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(re)),_e=this.componentDef.onPush?576:528,Ie=function(t,e){return{components:[],scheduler:t||X0,clean:AC,playerHandler:e||null,flags:0}}(),ke=Pl(0,null,null,1,0,null,null,null,null,null),Le=uu(null,ke,Ie,_e,null,null,F,G,H,S);let mt,$e;As(Le);try{const St=function(t,e,n,o,c,S){const F=n[1];n[20]=t;const G=Gs(F,20,2,"#host",null),re=G.mergedAttrs=e.hostAttrs;null!==re&&(kl(G,re,!0),null!==t&&(ht(c,t,re),null!==G.classes&&Nf(c,t,G.classes),null!==G.styles&&bp(c,t,G.styles)));const fe=o.createRenderer(t,e),_e=uu(n,Bp(e),null,e.onPush?64:16,n[20],G,o,fe,S||null,null);return F.firstCreatePass&&(hl(Wr(G,n),F,e.type),Gp(F,G),$p(G,n.length,1)),Ol(n,_e),n[20]=_e}(fe,this.componentDef,Le,F,G);if(fe)if(o)ht(G,fe,["ng-version",_m.full]);else{const{attrs:Ct,classes:kt}=function(t){const e=[],n=[];let o=1,c=2;for(;o<t.length;){let S=t[o];if("string"==typeof S)2===c?""!==S&&e.push(S,t[++o]):8===c&&n.push(S);else{if(!bi(c))break;c=S}o++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);Ct&&ht(G,fe,Ct),kt&&kt.length>0&&Nf(G,fe,kt.join(" "))}if($e=Fa(ke,20),void 0!==n){const Ct=$e.projection=[];for(let kt=0;kt<this.ngContentSelectors.length;kt++){const zt=n[kt];Ct.push(null!=zt?Array.from(zt):null)}}mt=function(t,e,n,o,c){const S=n[1],F=function(t,e,n){const o=ir();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Kp(t,o,e,$s(t,e,1,null),n));const c=$a(e,t,o.directiveStart,o);Ar(c,e);const S=qr(o,e);return S&&Ar(S,e),c}(S,n,e);if(o.components.push(F),t[8]=F,c&&c.forEach(G=>G(F,e)),e.contentQueries){const G=ir();e.contentQueries(1,F,G.directiveStart)}const H=ir();return!S.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Hi(H.index),qp(n[1],H,0,H.directiveStart,H.directiveEnd,e),Wp(e,F)),F}(St,this.componentDef,Le,Ie,[n2]),lu(ke,Le,null)}finally{Ds()}return new uS(this.componentType,mt,da($e,Le),Le,$e)}}class uS extends class{}{constructor(e,n,o,c,S){super(),this.location=o,this._rootLView=c,this._tNode=S,this.instance=n,this.hostView=this.changeDetectorRef=new q_(c),this.componentType=e}get injector(){return new Ns(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const ya=new Map;class fS extends ls{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ym(this);const o=fr(e),c=function(t){return t[jo]||null}(e);c&&Cd(c),this._bootstrapComponents=$i(o.bootstrap),this._r3Injector=ig(e,n,[{provide:ls,useValue:this},{provide:us,useValue:this.componentFactoryResolver}],qe(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,n=Fn.THROW_IF_NOT_FOUND,o=Ut.Default){return e===Fn||e===ls||e===Js?this:this._r3Injector.get(e,n,o)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class qd extends class{}{constructor(e){super(),this.moduleType=e,null!==fr(e)&&function(t){const e=new Set;!function n(o){const c=fr(o,!0),S=c.id;null!==S&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${qe(e)} vs ${qe(e.name)}`)}(S,ya.get(S),o),ya.set(S,o));const F=$i(c.imports);for(const H of F)e.has(H)||(e.add(H),n(H))}(t)}(e)}create(e){return new fS(this.moduleType,e)}}function Wd(t){return e=>{setTimeout(t,void 0,e)}}const mo=class extends r{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,o){var c,S,F;let H=e,G=n||(()=>null),re=o;if(e&&"object"==typeof e){const _e=e;H=null===(c=_e.next)||void 0===c?void 0:c.bind(_e),G=null===(S=_e.error)||void 0===S?void 0:S.bind(_e),re=null===(F=_e.complete)||void 0===F?void 0:F.bind(_e)}this.__isAsync&&(G=Wd(G),H&&(H=Wd(H)),re&&(re=Wd(re)));const fe=super.subscribe({next:H,error:G,complete:re});return e instanceof v&&e.add(fe),fe}};Symbol;const ic=new Vn("Application Initializer");let wa=(()=>{class t{constructor(n){this.appInits=n,this.resolve=$l,this.reject=$l,this.initialized=!1,this.done=!1,this.donePromise=new Promise((o,c)=>{this.resolve=o,this.reject=c})}runInitializers(){if(this.initialized)return;const n=[],o=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const S=this.appInits[c]();if(vd(S))n.push(S);else if(Qg(S)){const F=new Promise((H,G)=>{S.subscribe({complete:H,error:G})});n.push(F)}}Promise.all(n).then(()=>{o()}).catch(c=>{this.reject(c)}),0===n.length&&o(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(vn(ic,8))},t.\u0275prov=xt({token:t,factory:t.\u0275fac}),t})();const Nu=new Vn("AppId"),vE={provide:Nu,useFactory:function(){return`${nh()}${nh()}${nh()}`},deps:[]};function nh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ay=new Vn("Platform Initializer"),rh=new Vn("Platform ID"),mE=new Vn("appBootstrapListener");let ih=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=xt({token:t,factory:t.\u0275fac}),t})();const No=new Vn("LocaleId"),Dy=new Vn("DefaultCurrencyCode");class bE{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}const oh=function(t){return new qd(t)},wE=oh,CE=function(t){return Promise.resolve(oh(t))},Py=function(t){const e=oh(t),o=$i(fr(t).declarations).reduce((c,S)=>{const F=cr(S);return F&&c.push(new ey(F)),c},[]);return new bE(e,o)},ME=Py,_E=function(t){return Promise.resolve(Py(t))};let sc=(()=>{class t{constructor(){this.compileModuleSync=wE,this.compileModuleAsync=CE,this.compileModuleAndAllComponentsSync=ME,this.compileModuleAndAllComponentsAsync=_E}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=xt({token:t,factory:t.\u0275fac}),t})();const TE=(()=>Promise.resolve(0))();function sh(t){"undefined"==typeof Zone?TE.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Ir{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new mo(!1),this.onMicrotaskEmpty=new mo(!1),this.onStable=new mo(!1),this.onError=new mo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!o&&n,c.shouldCoalesceRunChangeDetection=o,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function(){let t=cn.requestAnimationFrame,e=cn.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const o=e[Zone.__symbol__("OriginalDelegate")];o&&(e=o)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(cn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,uh(t),t.isCheckStableRunning=!0,ah(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),uh(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,o,c,S,F,H)=>{try{return Oy(t),n.invokeTask(c,S,F,H)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===S.type||t.shouldCoalesceRunChangeDetection)&&e(),ky(t)}},onInvoke:(n,o,c,S,F,H,G)=>{try{return Oy(t),n.invoke(c,S,F,H,G)}finally{t.shouldCoalesceRunChangeDetection&&e(),ky(t)}},onHasTask:(n,o,c,S)=>{n.hasTask(c,S),o===c&&("microTask"==S.change?(t._hasPendingMicrotasks=S.microTask,uh(t),ah(t)):"macroTask"==S.change&&(t.hasPendingMacrotasks=S.macroTask))},onHandleError:(n,o,c,S)=>(n.handleError(c,S),t.runOutsideAngular(()=>t.onError.emit(S)),!1)})}(c)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ir.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ir.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,n,o){return this._inner.run(e,n,o)}runTask(e,n,o,c){const S=this._inner,F=S.scheduleEventTask("NgZoneEvent: "+c,e,xE,$l,$l);try{return S.runTask(F,n,o)}finally{S.cancelTask(F)}}runGuarded(e,n,o){return this._inner.runGuarded(e,n,o)}runOutsideAngular(e){return this._outer.run(e)}}const xE={};function ah(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function uh(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Oy(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ky(t){t._nesting--,ah(t)}class DE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new mo,this.onMicrotaskEmpty=new mo,this.onStable=new mo,this.onError=new mo}run(e,n,o){return e.apply(n,o)}runGuarded(e,n,o){return e.apply(n,o)}runOutsideAngular(e){return e()}runTask(e,n,o,c){return e.apply(n,o)}}let lh=(()=>{class t{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ir.assertNotInAngularZone(),sh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())sh(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(n)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,o,c){let S=-1;o&&o>0&&(S=setTimeout(()=>{this._callbacks=this._callbacks.filter(F=>F.timeoutId!==S),n(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:n,timeoutId:S,updateCb:c})}whenStable(n,o,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,o,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,o,c){return[]}}return t.\u0275fac=function(n){return new(n||t)(vn(Ir))},t.\u0275prov=xt({token:t,factory:t.\u0275fac}),t})(),Ny=(()=>{class t{constructor(){this._applications=new Map,ch.addToWindow(this)}registerApplication(n,o){this._applications.set(n,o)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,o=!0){return ch.findTestabilityInTree(this,n,o)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=xt({token:t,factory:t.\u0275fac}),t})();class PE{addToWindow(e){}findTestabilityInTree(e,n,o){return null}}let ch=new PE,Ly=!0,Fy=!1;let xi;const Uy=new Vn("AllowMultipleToken");function Vy(t,e,n=[]){const o=`Platform: ${e}`,c=new Vn(o);return(S=[])=>{let F=Hy();if(!F||F.injector.get(Uy,!1))if(t)t(n.concat(S).concat({provide:c,useValue:!0}));else{const H=n.concat(S).concat({provide:c,useValue:!0},{provide:cu,useValue:"platform"});!function(t){if(xi&&!xi.destroyed&&!xi.injector.get(Uy,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");xi=t.get(jy);const e=t.get(Ay,null);e&&e.forEach(n=>n())}(Fn.create({providers:H,name:o}))}return function(t){const e=Hy();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(c)}}function Hy(){return xi&&!xi.destroyed?xi:null}let jy=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,o){const H=function(t,e){let n;return n="noop"===t?new DE:("zone.js"===t?void 0:t)||new Ir({enableLongStackTrace:(Fy=!0,Ly),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(o?o.ngZone:void 0,{ngZoneEventCoalescing:o&&o.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:o&&o.ngZoneRunCoalescing||!1}),G=[{provide:Ir,useValue:H}];return H.run(()=>{const re=Fn.create({providers:G,parent:this.injector,name:n.moduleType.name}),fe=n.create(re),_e=fe.injector.get(is,null);if(!_e)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return H.runOutsideAngular(()=>{const Ie=H.onError.subscribe({next:ke=>{_e.handleError(ke)}});fe.onDestroy(()=>{fh(this._modules,fe),Ie.unsubscribe()})}),function(t,e,n){try{const o=n();return vd(o)?o.catch(c=>{throw e.runOutsideAngular(()=>t.handleError(c)),c}):o}catch(o){throw e.runOutsideAngular(()=>t.handleError(o)),o}}(_e,H,()=>{const Ie=fe.injector.get(wa);return Ie.runInitializers(),Ie.donePromise.then(()=>(Cd(fe.injector.get(No,jl)||jl),this._moduleDoBootstrap(fe),fe))})})}bootstrapModule(n,o=[]){const c=zy({},o);return function(t,e,n){const o=new qd(n);return Promise.resolve(o)}(0,0,n).then(S=>this.bootstrapModuleFactory(S,c))}_moduleDoBootstrap(n){const o=n.injector.get(Lu);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(c=>o.bootstrap(c));else{if(!n.instance.ngDoBootstrap)throw new Error(`The module ${qe(n.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);n.instance.ngDoBootstrap(o)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(vn(Fn))},t.\u0275prov=xt({token:t,factory:t.\u0275fac}),t})();function zy(t,e){return Array.isArray(e)?e.reduce(zy,t):Object.assign(Object.assign({},t),e)}let Lu=(()=>{class t{constructor(n,o,c,S,F){this._zone=n,this._injector=o,this._exceptionHandler=c,this._componentFactoryResolver=S,this._initStatus=F,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const H=new j(re=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{re.next(this._stable),re.complete()})}),G=new j(re=>{let fe;this._zone.runOutsideAngular(()=>{fe=this._zone.onStable.subscribe(()=>{Ir.assertNotInAngularZone(),sh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,re.next(!0))})})});const _e=this._zone.onUnstable.subscribe(()=>{Ir.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{re.next(!1)}))});return()=>{fe.unsubscribe(),_e.unsubscribe()}});this.isStable=function(...t){let e=Number.POSITIVE_INFINITY,n=null,o=t[t.length-1];return l(o)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof o&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof j?t[0]:Me(e)(Ye(t,n))}(H,G.pipe(t=>Fe()(function(t,e){return function(o){let c;c="function"==typeof t?t:function(){return t};const S=Object.create(o,Zt);return S.source=o,S.subjectFactory=c,S}}(Nn)(t))))}bootstrap(n,o){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let c;c=n instanceof ym?n:this._componentFactoryResolver.resolveComponentFactory(n),this.componentTypes.push(c.componentType);const S=function(t){return t.isBoundToModule}(c)?void 0:this._injector.get(ls),H=c.create(Fn.NULL,[],o||c.selector,S),G=H.location.nativeElement,re=H.injector.get(lh,null),fe=re&&H.injector.get(Ny);return re&&fe&&fe.registerApplication(G,re),H.onDestroy(()=>{this.detachView(H.hostView),fh(this.components,H),fe&&fe.unregisterApplication(G)}),this._loadComponent(H),H}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const o=n;this._views.push(o),o.attachToAppRef(this)}detachView(n){const o=n;fh(this._views,o),o.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(mE,[]).concat(this._bootstrapListeners).forEach(c=>c(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(n){return new(n||t)(vn(Ir),vn(Fn),vn(is),vn(us),vn(wa))},t.\u0275prov=xt({token:t,factory:t.\u0275fac}),t})();function fh(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const oT=Vy(null,"core",[{provide:rh,useValue:"unknown"},{provide:jy,deps:[Fn]},{provide:Ny,deps:[]},{provide:ih,deps:[]}]),cT=[{provide:Lu,useClass:Lu,deps:[Ir,Fn,is,us,wa]},{provide:oS,deps:[Ir],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(n){e.push(n)}}},{provide:wa,useClass:wa,deps:[[new qi,ic]]},{provide:sc,useClass:sc,deps:[]},vE,{provide:Mu,useFactory:function(){return Y_},deps:[]},{provide:ha,useFactory:function(){return X_},deps:[]},{provide:No,useFactory:function(t){return Cd(t=t||"undefined"!=typeof $localize&&$localize.locale||jl),t},deps:[[new eu(No),new qi,new ns]]},{provide:Dy,useValue:"USD"}];let dT=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(vn(Lu))},t.\u0275mod=io({type:t}),t.\u0275inj=Jt({providers:cT}),t})(),vc=null;function Hu(){return vc}const xr=new Vn("DocumentToken");var dr=(()=>((dr=dr||{})[dr.Zero=0]="Zero",dr[dr.One=1]="One",dr[dr.Two=2]="Two",dr[dr.Few=3]="Few",dr[dr.Many=4]="Many",dr[dr.Other=5]="Other",dr))();const wI=function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Gv(e);if(n)return n;const o=e.split("-")[0];if(n=Gv(o),n)return n;if("en"===o)return xM;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[Pt.PluralCase]};class Tc{}let JI=(()=>{class t extends Tc{constructor(n){super(),this.locale=n}getPluralCategory(n,o){switch(wI(o||this.locale)(n)){case dr.Zero:return"zero";case dr.One:return"one";case dr.Two:return"two";case dr.Few:return"few";case dr.Many:return"many";default:return"other"}}}return t.\u0275fac=function(n){return new(n||t)(vn(No))},t.\u0275prov=xt({token:t,factory:t.\u0275fac}),t})(),x1=(()=>{class t{constructor(n,o){this._viewContainer=n,this._context=new nx,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=o}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){R1("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){R1("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,o){return!0}}return t.\u0275fac=function(n){return new(n||t)(hn(eo),hn(vo))},t.\u0275dir=_r({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class nx{constructor(){this.$implicit=null,this.ngIf=null}}function R1(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${qe(e)}'.`)}let xx=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=io({type:t}),t.\u0275inj=Jt({providers:[{provide:Tc,useClass:JI}]}),t})();class Bh extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(t){vc||(vc=t)}(new Bh)}onAndCancel(e,n,o){return e.addEventListener(n,o,!1),()=>{e.removeEventListener(n,o,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=(qu=qu||document.querySelector("base"),qu?qu.getAttribute("href"):null);return null==n?null:function(t){Ic=Ic||document.createElement("a"),Ic.setAttribute("href",t);const e=Ic.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){qu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const o=n.indexOf("="),[c,S]=-1==o?[n,""]:[n.slice(0,o),n.slice(o+1)];if(c.trim()===e)return decodeURIComponent(S)}return null}(document.cookie,e)}}let Ic,qu=null;const k1=new Vn("TRANSITION_ID"),Bx=[{provide:ic,useFactory:function(t,e,n){return()=>{n.get(wa).donePromise.then(()=>{const o=Hu(),c=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let S=0;S<c.length;S++)o.remove(c[S])})}},deps:[k1,xr,Fn],multi:!0}];class Uh{static init(){!function(t){ch=t}(new Uh)}addToWindow(e){cn.getAngularTestability=(o,c=!0)=>{const S=e.findTestabilityInTree(o,c);if(null==S)throw new Error("Could not find testability for element.");return S},cn.getAllAngularTestabilities=()=>e.getAllTestabilities(),cn.getAllAngularRootElements=()=>e.getAllRootElements(),cn.frameworkStabilizers||(cn.frameworkStabilizers=[]),cn.frameworkStabilizers.push(o=>{const c=cn.getAllAngularTestabilities();let S=c.length,F=!1;const H=function(G){F=F||G,S--,0==S&&o(F)};c.forEach(function(G){G.whenStable(H)})})}findTestabilityInTree(e,n,o){if(null==n)return null;const c=e.getTestability(n);return null!=c?c:o?Hu().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null}}let Ux=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=xt({token:t,factory:t.\u0275fac}),t})();const Wu=new Vn("EventManagerPlugins");let Rc=(()=>{class t{constructor(n,o){this._zone=o,this._eventNameToPlugin=new Map,n.forEach(c=>c.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,o,c){return this._findPluginFor(o).addEventListener(n,o,c)}addGlobalEventListener(n,o,c){return this._findPluginFor(o).addGlobalEventListener(n,o,c)}getZone(){return this._zone}_findPluginFor(n){const o=this._eventNameToPlugin.get(n);if(o)return o;const c=this._plugins;for(let S=0;S<c.length;S++){const F=c[S];if(F.supports(n))return this._eventNameToPlugin.set(n,F),F}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(vn(Wu),vn(Ir))},t.\u0275prov=xt({token:t,factory:t.\u0275fac}),t})();class Vh{constructor(e){this._doc=e}addGlobalEventListener(e,n,o){const c=Hu().getGlobalEventTarget(this._doc,e);if(!c)throw new Error(`Unsupported event target ${c} for event ${n}`);return this.addEventListener(c,n,o)}}let L1=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(n){const o=new Set;n.forEach(c=>{this._stylesSet.has(c)||(this._stylesSet.add(c),o.add(c))}),this.onStylesAdded(o)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=xt({token:t,factory:t.\u0275fac}),t})(),Gu=(()=>{class t extends L1{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,o,c){n.forEach(S=>{const F=this._doc.createElement("style");F.textContent=S,c.push(o.appendChild(F))})}addHost(n){const o=[];this._addStylesToHost(this._stylesSet,n,o),this._hostNodes.set(n,o)}removeHost(n){const o=this._hostNodes.get(n);o&&o.forEach(F1),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((o,c)=>{this._addStylesToHost(n,c,o)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(F1))}}return t.\u0275fac=function(n){return new(n||t)(vn(xr))},t.\u0275prov=xt({token:t,factory:t.\u0275fac}),t})();function F1(t){Hu().remove(t)}const Hh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},jh=/%COMP%/g;function Ac(t,e,n){for(let o=0;o<e.length;o++){let c=e[o];Array.isArray(c)?Ac(t,c,n):(c=c.replace(jh,t),n.push(c))}return n}function V1(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let zh=(()=>{class t{constructor(n,o,c){this.eventManager=n,this.sharedStylesHost=o,this.appId=c,this.rendererByCompId=new Map,this.defaultRenderer=new qh(n)}createRenderer(n,o){if(!n||!o)return this.defaultRenderer;switch(o.encapsulation){case Jn.Emulated:{let c=this.rendererByCompId.get(o.id);return c||(c=new e6(this.eventManager,this.sharedStylesHost,o,this.appId),this.rendererByCompId.set(o.id,c)),c.applyToHost(n),c}case 1:case Jn.ShadowDom:return new t6(this.eventManager,this.sharedStylesHost,n,o);default:if(!this.rendererByCompId.has(o.id)){const c=Ac(o.id,o.styles,[]);this.sharedStylesHost.addStyles(c),this.rendererByCompId.set(o.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(vn(Rc),vn(Gu),vn(Nu))},t.\u0275prov=xt({token:t,factory:t.\u0275fac}),t})();class qh{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,n){return n?document.createElementNS(Hh[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){e.appendChild(n)}insertBefore(e,n,o){e&&e.insertBefore(n,o)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let o="string"==typeof e?document.querySelector(e):e;if(!o)throw new Error(`The selector "${e}" did not match any elements`);return n||(o.textContent=""),o}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,o,c){if(c){n=c+":"+n;const S=Hh[c];S?e.setAttributeNS(S,n,o):e.setAttribute(n,o)}else e.setAttribute(n,o)}removeAttribute(e,n,o){if(o){const c=Hh[o];c?e.removeAttributeNS(c,n):e.removeAttribute(`${o}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,o,c){c&(Zr.DashCase|Zr.Important)?e.style.setProperty(n,o,c&Zr.Important?"important":""):e.style[n]=o}removeStyle(e,n,o){o&Zr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,o){e[n]=o}setValue(e,n){e.nodeValue=n}listen(e,n,o){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,V1(o)):this.eventManager.addEventListener(e,n,V1(o))}}class e6 extends qh{constructor(e,n,o,c){super(e),this.component=o;const S=Ac(c+"-"+o.id,o.styles,[]);n.addStyles(S),this.contentAttr=function(t){return"_ngcontent-%COMP%".replace(jh,t)}(c+"-"+o.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(jh,t)}(c+"-"+o.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const o=super.createElement(e,n);return super.setAttribute(o,this.contentAttr,""),o}}class t6 extends qh{constructor(e,n,o,c){super(e),this.sharedStylesHost=n,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const S=Ac(c.id,c.styles,[]);for(let F=0;F<S.length;F++){const H=document.createElement("style");H.textContent=S[F],this.shadowRoot.appendChild(H)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,o){return super.insertBefore(this.nodeOrShadowRoot(e),n,o)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let n6=(()=>{class t extends Vh{constructor(n){super(n)}supports(n){return!0}addEventListener(n,o,c){return n.addEventListener(o,c,!1),()=>this.removeEventListener(n,o,c)}removeEventListener(n,o,c){return n.removeEventListener(o,c)}}return t.\u0275fac=function(n){return new(n||t)(vn(xr))},t.\u0275prov=xt({token:t,factory:t.\u0275fac}),t})();const z1=["alt","control","meta","shift"],l6={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},q1={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},c6={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let f6=(()=>{class t extends Vh{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,o,c){const S=t.parseEventName(o),F=t.eventCallback(S.fullKey,c,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Hu().onAndCancel(n,S.domEventName,F))}static parseEventName(n){const o=n.toLowerCase().split("."),c=o.shift();if(0===o.length||"keydown"!==c&&"keyup"!==c)return null;const S=t._normalizeKey(o.pop());let F="";if(z1.forEach(G=>{const re=o.indexOf(G);re>-1&&(o.splice(re,1),F+=G+".")}),F+=S,0!=o.length||0===S.length)return null;const H={};return H.domEventName=c,H.fullKey=F,H}static getEventFullKey(n){let o="",c=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&q1.hasOwnProperty(e)&&(e=q1[e]))}return l6[e]||e}(n);return c=c.toLowerCase()," "===c?c="space":"."===c&&(c="dot"),z1.forEach(S=>{S!=c&&c6[S](n)&&(o+=S+".")}),o+=c,o}static eventCallback(n,o,c){return S=>{t.getEventFullKey(S)===n&&c.runGuarded(()=>o(S))}}static _normalizeKey(n){switch(n){case"esc":return"escape";default:return n}}}return t.\u0275fac=function(n){return new(n||t)(vn(xr))},t.\u0275prov=xt({token:t,factory:t.\u0275fac}),t})();const b6=Vy(oT,"browser",[{provide:rh,useValue:"browser"},{provide:Ay,useValue:function(){Bh.makeCurrent(),Uh.init()},multi:!0},{provide:xr,useFactory:function(){return function(t){Na=t}(document),document},deps:[]}]),w6=[[],{provide:cu,useValue:"root"},{provide:is,useFactory:function(){return new is},deps:[]},{provide:Wu,useClass:n6,multi:!0,deps:[xr,Ir,rh]},{provide:Wu,useClass:f6,multi:!0,deps:[xr]},[],{provide:zh,useClass:zh,deps:[Rc,Gu,Nu]},{provide:Kl,useExisting:zh},{provide:L1,useExisting:Gu},{provide:Gu,useClass:Gu,deps:[xr]},{provide:lh,useClass:lh,deps:[Ir]},{provide:Rc,useClass:Rc,deps:[Wu,Ir]},{provide:class{},useClass:Ux,deps:[]},[]];let C6=(()=>{class t{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:t,providers:[{provide:Nu,useValue:n.appId},{provide:k1,useExisting:Nu},Bx]}}}return t.\u0275fac=function(n){return new(n||t)(vn(t,12))},t.\u0275mod=io({type:t}),t.\u0275inj=Jt({providers:w6,imports:[xx,dT]}),t})();"undefined"!=typeof window&&window;var Dc=T(8239),R6=T(5436);class Jh{constructor(){this.middlewares={}}static getInstance(){return this._instance||(this._instance=new Jh),this._instance}subscribe(e,n){this.middlewares[e]=n}create(){return console.log("[CustomStore][create]"),window.WebChat.createStore({},({dispatch:n})=>o=>c=>{let S=c;if(c&&c.payload)for(const F of Object.keys(this.middlewares)){const H=this.middlewares[F];if(H.applicable(S)){const G=H.apply(S);G.dispatchAction&&n(G.dispatchAction),G.nextAction&&(S=G.nextAction)}}return o(S)})}}var _a=T(8139);const G1=t=>{if(t){const e=t.split(/\s/).reduce((n,o)=>n+o.slice(0,1),"");return e.length>1?e.substring(0,2).toUpperCase():t.substring(0,2).toUpperCase()}return""};var Sa=(()=>(function(t){t.Sending="sending",t.SendFailed="send failed",t.Sent="sent"}(Sa||(Sa={})),Sa))();class F6{constructor(e){this.dataMaskingRules=e,console.log("[DataMaskingRules]"),console.log(this.dataMaskingRules)}applicable(e){const{text:n}=e.payload;return!!(Object.keys(this.dataMaskingRules).length>0&&n&&"WEB_CHAT/SEND_MESSAGE"===e.type)}apply(e){return{dispatchAction:null,nextAction:this.applyDataMasking(e)}}applyDataMasking(e){let{text:o}=e.payload;if(Object.keys(this.dataMaskingRules).length>0)for(const c of Object.values(this.dataMaskingRules)){const S=new RegExp(c,"g");let F;for(;F=S.exec(o);){const H=F[0].replace(/./g,"#");o=o.replace(F[0],H)}}return e.payload.text=o,e}}const Pc_omnichannelConfig_orgId="d367c413-e0b9-408b-ae1c-382499b369ae",Pc_omnichannelConfig_orgUrl="https://omnichannel-crm.omnichannelengagementhub.com",Pc_omnichannelConfig_widgetId="3a352b95-5d67-4e47-af28-eca029b03928";let Zh=(()=>{class t{}return t.canUploadAttachment=!1,t})();function Oc(t,e){return new j(n=>{const o=t.length;if(0===o)return void n.complete();const c=new Array(o);let S=0,F=0;for(let H=0;H<o;H++){const G=Se(t[H]);let re=!1;n.add(G.subscribe({next:fe=>{re||(re=!0,F++),c[H]=fe},error:fe=>n.error(fe),complete:()=>{S++,(S===o||!re)&&(F===o&&n.next(e?e.reduce((fe,_e,Ie)=>(fe[_e]=c[Ie],fe),{}):c),n.complete())}}))}})}class q6 extends v{constructor(e,n){super()}schedule(e,n=0){return this}}class W6 extends q6{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){if(this.closed)return this;this.state=e;const o=this.id,c=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(c,o,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(c,this.id,n),this}requestAsyncId(e,n,o=0){return setInterval(e.flush.bind(e,this),o)}recycleAsyncId(e,n,o=0){if(null!==o&&this.delay===o&&!1===this.pending)return n;clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const o=this._execute(e,n);if(o)return o;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let c,o=!1;try{this.work(e)}catch(S){o=!0,c=!!S&&S||new Error(S)}if(o)return this.unsubscribe(),c}_unsubscribe(){const e=this.id,n=this.scheduler,o=n.actions,c=o.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==c&&o.splice(c,1),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null}}let $1=(()=>{class t{constructor(n,o=t.now){this.SchedulerAction=n,this.now=o}schedule(n,o=0,c){return new this.SchedulerAction(this,n).schedule(c,o)}}return t.now=()=>Date.now(),t})();class Bo extends $1{constructor(e,n=$1.now){super(e,()=>Bo.delegate&&Bo.delegate!==this?Bo.delegate.now():n()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,n=0,o){return Bo.delegate&&Bo.delegate!==this?Bo.delegate.schedule(e,n,o):super.schedule(e,n,o)}flush(e){const{actions:n}=this;if(this.active)return void n.push(e);let o;this.active=!0;do{if(o=e.execute(e.state,e.delay))break}while(e=n.shift());if(this.active=!1,o){for(;e=n.shift();)e.unsubscribe();throw o}}}const K6=new class extends Bo{}(class extends W6{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,o=0){return null!==o&&o>0||null===o&&this.delay>0?super.requestAsyncId(e,n,o):e.flush(this)}}),J6=new j(t=>t.complete());class ci{constructor(e,n,o){this.kind=e,this.value=n,this.error=o,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,n,o){switch(this.kind){case"N":return e&&e(this.value);case"E":return n&&n(this.error);case"C":return o&&o()}}accept(e,n,o){return e&&"function"==typeof e.next?this.observe(e):this.do(e,n,o)}toObservable(){switch(this.kind){case"N":return function(...t){let e=t[t.length-1];return l(e)?(t.pop(),de(t,e)):Ye(t)}(this.value);case"E":return function(t,e){return new j(n=>n.error(t))}(this.error);case"C":return function(t){return t?function(t){return new j(e=>t.schedule(()=>e.complete()))}(t):J6}()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new ci("N",e):ci.undefinedValueNotification}static createError(e){return new ci("E",void 0,e)}static createComplete(){return ci.completeNotification}}ci.completeNotification=new ci("C"),ci.undefinedValueNotification=new ci("N",void 0);class kc extends w{constructor(e,n,o=0){super(e),this.scheduler=n,this.delay=o}static dispatch(e){const{notification:n,destination:o}=e;n.observe(o),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(kc.dispatch,this.delay,new n4(e,this.destination)))}_next(e){this.scheduleMessage(ci.createNext(e))}_error(e){this.scheduleMessage(ci.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(ci.createComplete()),this.unsubscribe()}}class n4{constructor(e,n){this.notification=e,this.destination=n}}class K1 extends r{constructor(e=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,o){super(),this.scheduler=o,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const n=this._events;n.push(e),n.length>this._bufferSize&&n.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new r4(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const n=this._infiniteTimeWindow,o=n?this._events:this._trimBufferThenGetEvents(),c=this.scheduler,S=o.length;let F;if(this.closed)throw new K;if(this.isStopped||this.hasError?F=v.EMPTY:(this.observers.push(e),F=new ge(this,e)),c&&e.add(e=new kc(e,c)),n)for(let H=0;H<S&&!e.closed;H++)e.next(o[H]);else for(let H=0;H<S&&!e.closed;H++)e.next(o[H].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),F}_getNow(){return(this.scheduler||K6).now()}_trimBufferThenGetEvents(){const e=this._getNow(),n=this._bufferSize,o=this._windowTime,c=this._events,S=c.length;let F=0;for(;F<S&&!(e-c[F].time<o);)F++;return S>n&&(F=Math.max(F,S-n)),F>0&&c.splice(0,F),c}}class r4{constructor(e,n){this.time=e,this.value=n}}let i4=(()=>{class t{constructor(n){this.document=n,this._loadedLibraries={}}lazyLoad(){return function(...t){if(1===t.length){const e=t[0];if(g(e))return Oc(e,null);if(C(e)&&Object.getPrototypeOf(e)===Object.prototype){const n=Object.keys(e);return Oc(n.map(o=>e[o]),n)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Oc(t=1===t.length&&g(t[0])?t[0]:t,null).pipe(a(n=>e(...n)))}return Oc(t,null)}([this.loadScript("https://cdn.botframework.com/botframework-webchat/4.9.2/webchat.js")])}loadScript(n){if(this._loadedLibraries[n])return this._loadedLibraries[n].asObservable();this._loadedLibraries[n]=new K1;const o=this.document.createElement("script");return o.type="text/javascript",o.async=!0,o.src=n,o.onload=()=>{this._loadedLibraries[n].next(),this._loadedLibraries[n].complete()},this.document.body.appendChild(o),this._loadedLibraries[n].asObservable()}loadStyle(n){if(this._loadedLibraries[n])return this._loadedLibraries[n].asObservable();this._loadedLibraries[n]=new K1;const o=this.document.createElement("link");return o.type="text/css",o.href=n,o.rel="stylesheet",o.onload=()=>{this._loadedLibraries[n].next(),this._loadedLibraries[n].complete()},document.getElementsByTagName("head")[0].appendChild(o),this._loadedLibraries[n].asObservable()}}return t.\u0275fac=function(n){return new(n||t)(vn(xr))},t.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function o4(t,e){1&t&&(Zi(0,"div",8),Zi(1,"span",9),mu(2," \u{1f440} "),Qi(),Qi())}function s4(t,e){if(1&t){const n=gd();Zi(0,"div",3),Zi(1,"div",4),mu(2,"LiveChat with Omnichannel Chat SDK "),Zi(3,"span",5),Ul("click",function(){return Va(n),Vl().endChat()}),mu(4," \u274c "),Qi(),Qi(),Fl(5,o4,3,0,"div",6),function(t,e,n,o){Zi(t,e,n,o),Qi()}(6,"div",7),Qi()}if(2&t){const n=Vl();xl(5),gu("ngIf",n.loading)}}function a4(t,e){if(1&t){const n=gd();Zi(0,"div",10),Ul("click",function(){return Va(n),Vl().startChat()}),Zi(1,"span"),mu(2," \u{1f44b} "),Qi(),Qi()}}const J1=(()=>{const t={orgId:Pc_omnichannelConfig_orgId||"",orgUrl:Pc_omnichannelConfig_orgUrl||"",widgetId:Pc_omnichannelConfig_widgetId||""},e=new URLSearchParams(window.location.search);return null!==e.get("orgUrl")&&(t.orgUrl=e.get("orgUrl")),null!==e.get("orgId")&&(t.orgId=e.get("orgId")),null!==e.get("widgetId")&&(t.widgetId=e.get("widgetId")),t})(),Z1=(()=>{const t={telemetry:{disable:!1,ariaTelemetryKey:""}},e=new URLSearchParams(window.location.search);return null!==e.get("telemetry")&&(t.telemetry.disable="true"!=e.get("telemetry")),null!==e.get("ariaTelemetryKey")&&(t.telemetry.ariaTelemetryKey=e.get("ariaTelemetryKey")||""),t})(),Q1=(()=>{const t={disable:!0},e=new URLSearchParams(window.location.search);return null!==e.get("debug")&&(t.disable="true"!=e.get("debug")),t})();console.log("%c [OmnichannelConfig]","background-color:#001433;color:#fff"),console.log(J1),console.log("%c [debugConfig]","background-color:#001433;color:#fff"),console.log(Q1),console.log("%c [telemetryConfig]","background-color:#001433;color:#fff"),console.log(Z1);const u4=(console.log("[createAvatarMiddleware]"),()=>e=>n=>{console.log("[AvatarMiddleware]");const{activity:{channelData:{tags:o},from:{name:c},text:S},fromUser:F}=n;return console.log(n),o&&o.includes("system")?(console.log(`[AvatarMiddleware][Message][System] ${S}`),_a.createElement("div",null,"\u2757")):null!=F&&(F?F?(console.log(`[AvatarMiddleware][Message][Customer] ${S}`),_a.createElement("div",{className:"webchat__avatar"},_a.createElement("p",{className:"webchat__avatar_initials"}," ",G1(c)||"CU","  "))):e(n):(console.log(`[AvatarMiddleware][Message][Agent] ${S}`),_a.createElement("div",{className:"webchat__avatar"},_a.createElement("p",{className:"webchat__avatar_initials"}," ",G1(c)," "))))}),l4=(console.log("[createActivityMiddleware]"),()=>e=>n=>{if(console.log("%c [ActivityMiddleware]","background: #2a9fd4; color: #fff"),console.log(n),n.activity){if(n.activity.channelData&&n.activity.channelData.tags&&n.activity.channelData.tags.includes("system"))return console.log(`%c [ActivityMiddleware][Message][System] ${n.activity.text}`,"background: #2a9fd4; color: #fff"),o=>_a.createElement("div",{key:n.activity.id,className:"system-message"},e(n)(o));if(void 0===n.activity.text||null==n.activity.text)return e(n);"bot"===n.activity.from.role&&console.log(`%c [ActivityMiddleware][Message][Agent] ${n.activity.text}`,"background: #2a9fd4; color: #fff"),"user"===n.activity.from.role&&console.log(`%c [ActivityMiddleware][Message][Customer] ${n.activity.text}`,"background: #2a9fd4; color: #fff")}return e(n)}),c4=()=>e=>n=>{console.log("%c [activityStatusMiddleware]","background: #238636; color: #fff"),console.log(n);let o="";(t=>t.activity.channelData&&t.activity.channelData.tags&&t.activity.channelData.tags.includes("system"))(n)?o="System":(t=>"bot"===t.activity.from.role)(n)?o="Agent":(t=>"user"===t.activity.from.role)(n)&&(o="Customer"),console.log(`%c [activityStatusMiddleware][Message][${o}] ${n.activity.text}`,"background: #238636; color: #fff"),n.sendState===Sa.Sent?console.log(`%c [activityStatusMiddleware][Message][${o}][Status] Sent!`,"background: #238636; color: #fff"):n.sendState===Sa.Sending?console.log(`%c [activityStatusMiddleware][Message][${o}][Status] Sending...`,"background: #238636; color: #fff"):n.sendState===Sa.SendFailed&&console.log(`%c [activityStatusMiddleware][Message][${o}][Status] Failed :(`,"background: #238636; color: #fff")},Y1={bubbleBorderRadius:10,bubbleNubSize:10,bubbleNubOffset:15,bubbleFromUserBorderRadius:10,bubbleFromUserNubSize:10,bubbleFromUserNubOffset:15,bubbleFromUserBackground:"rgb(246, 246, 246)"};let d4=(()=>{class t{constructor(n,o){this.webChatControlService=n,this.document=o,this.title="angular-botframework-webchat-control",this.webChat=null,this.chatSDK=null,this.chatAdapter=null,this.loading=!1,this.hasChatStarted=!1,this.webChatStore=null}ngOnInit(){var n=this;return(0,Dc.Z)(function*(){console.log("[ngOnInit]"),n.webChatControlService.lazyLoad().subscribe(function(){var o=(0,Dc.Z)(function*(c){n.webChat=window.WebChat;const S=Object.assign({},Z1),F=new R6.Mg(J1,S);F.setDebug(!Q1.disable),yield F.initialize(),n.chatSDK=F,n.webChat=window.WebChat,(t=>{Zh.canUploadAttachment="true"===t.LiveWSAndLiveChatEngJoin.msdyn_enablefileattachmentsforcustomers||!1})(yield F.getLiveChatConfig()),Y1.hideUploadButton=!Zh.canUploadAttachment;const G=localStorage.getItem("liveChatContext");G&&Object.keys(JSON.parse(G)).length>0&&(console.log("[liveChatContext]"),console.log(G))});return function(c){return o.apply(this,arguments)}}())})()}startChat(){var n=this;return(0,Dc.Z)(function*(){var o,c,S,F;console.log("[startChat]");const H=yield null===(o=n.chatSDK)||void 0===o?void 0:o.getDataMaskingRules();console.log(H);const G=(console.log("[createCustomStore]"),Jh.getInstance());n.webChatStore=G.create(),G.subscribe("DataMasking",(t=>(console.log("[createDataMaskingMiddleware]"),new F6(t)))(H));const re={},fe=localStorage.getItem("liveChatContext");fe&&Object.keys(JSON.parse(fe)).length>0&&(console.log("[liveChatContext]"),re.liveChatContext=JSON.parse(fe)),n.hasChatStarted=!0,n.loading=!0,yield null===(c=n.chatSDK)||void 0===c?void 0:c.startChat(re);const _e=yield null===(S=n.chatSDK)||void 0===S?void 0:S.getCurrentLiveChatContext();_e&&Object.keys(_e).length&&localStorage.setItem("liveChatContext",JSON.stringify(_e));const Ie=yield null===(F=n.chatSDK)||void 0===F?void 0:F.createChatAdapter();n.chatAdapter=Ie,n.loading=!1,n.webChat.renderWebChat({directLine:Ie,sendTypingIndicator:!0,styleOptions:Y1,store:n.webChatStore,avatarMiddleware:u4,activityMiddleware:l4,activityStatusMiddleware:c4},n.document.getElementById("chat-container"))})()}endChat(){var n=this;return(0,Dc.Z)(function*(){var o;console.log("[endChat]"),yield null===(o=n.chatSDK)||void 0===o?void 0:o.endChat(),n.hasChatStarted=!1;const c=n.document.getElementById("chat-container");for(;c.firstChild;)c.firstChild.remove()})()}}return t.\u0275fac=function(n){return new(n||t)(hn(i4),hn(xr))},t.\u0275cmp=zo({type:t,selectors:[["app-root"]],decls:3,vars:2,consts:[["id","root"],["id","chat-root",4,"ngIf"],["id","chat-button",3,"click",4,"ngIf"],["id","chat-root"],[1,"chat-header"],[3,"click"],["id","loading-screen",4,"ngIf"],["id","chat-container"],["id","loading-screen"],["id","loader"],["id","chat-button",3,"click"]],template:function(n,o){1&n&&(Zi(0,"div",0),Fl(1,s4,7,1,"div",1),Fl(2,a4,3,0,"div",2),Qi()),2&n&&(xl(1),gu("ngIf",o.hasChatStarted),xl(1),gu("ngIf",!o.hasChatStarted&&!o.loading))},directives:[x1],styles:['body[_ngcontent-%COMP%]{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}code[_ngcontent-%COMP%]{font-family:source-code-pro,Menlo,Monaco,Consolas,"Courier New",monospace}#chat-root[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:400px;max-width:400px;min-height:600px;max-height:600px;width:400px;height:600px;position:fixed;right:0;bottom:0;border-radius:4px;margin:0 20px 60px 0;box-shadow:0 0 15px 2px #161b224d;font-family:"Segoe UI",Arial,sans-serif}#chat-container[_ngcontent-%COMP%]{width:100%;height:100%}.chat-header[_ngcontent-%COMP%]{border-bottom:#E6E6E6 solid 1px;padding:10px;display:flex;justify-content:space-between;cursor:pointer}#loading-screen[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:400px;max-width:400px;min-height:600px;max-height:600px;width:400px;height:600px;position:fixed;right:0;bottom:0;border-radius:4px;margin:0 20px 60px 0;box-shadow:0 0 15px 2px #161b224d;align-items:center;justify-content:center}@keyframes spin{to{transform:rotate(360deg)}}#loader[_ngcontent-%COMP%]{font-size:120px;animation:spin 2s linear infinite}#chat-button[_ngcontent-%COMP%]{position:fixed;right:0;bottom:0;border-radius:32px;background-color:#0078d4;box-shadow:0 0 5px 2px #0078d4;padding:10px;margin:0 20px 20px 0;color:#fff;font-size:32px;cursor:pointer}#chat-button[_ngcontent-%COMP%]:hover{box-shadow:0 0 20px 2px #0078d4;transition:all 2s}']}),t})(),h4=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=io({type:t,bootstrap:[d4]}),t.\u0275inj=Jt({providers:[],imports:[[C6]]}),t})();(function(){if(Fy)throw new Error("Cannot enable prod mode after platform setup.");Ly=!1})(),b6().bootstrapModule(h4).catch(t=>console.error(t))},4762:(Y,L,T)=>{"use strict";function x(R,r){var s={};for(var l in R)Object.prototype.hasOwnProperty.call(R,l)&&r.indexOf(l)<0&&(s[l]=R[l]);if(null!=R&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(l=Object.getOwnPropertySymbols(R);a<l.length;a++)r.indexOf(l[a])<0&&Object.prototype.propertyIsEnumerable.call(R,l[a])&&(s[l[a]]=R[l[a]])}return s}function k(R){return this instanceof k?(this.v=R,this):new k(R)}function O(R,r,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a,l=s.apply(R,r||[]),f=[];return a={},M("next"),M("throw"),M("return"),a[Symbol.asyncIterator]=function(){return this},a;function M(z){l[z]&&(a[z]=function(J){return new Promise(function(ce,se){f.push([z,J,ce,se])>1||A(z,J)})})}function A(z,J){try{!function(z){z.value instanceof k?Promise.resolve(z.value.v).then(i,m):q(f[0][2],z)}(l[z](J))}catch(ce){q(f[0][3],ce)}}function i(z){A("next",z)}function m(z){A("throw",z)}function q(z,J){z(J),f.shift(),f.length&&A(f[0][0],f[0][1])}}function V(R){var r,s;return r={},l("next"),l("throw",function(a){throw a}),l("return"),r[Symbol.iterator]=function(){return this},r;function l(a,f){r[a]=R[a]?function(M){return(s=!s)?{value:k(R[a](M)),done:"return"===a}:f?f(M):M}:f}}function B(R){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,r=R[Symbol.asyncIterator];return r?r.call(R):(R=function(R){var r="function"==typeof Symbol&&Symbol.iterator,s=r&&R[r],l=0;if(s)return s.call(R);if(R&&"number"==typeof R.length)return{next:function(){return R&&l>=R.length&&(R=void 0),{value:R&&R[l++],done:!R}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}(R),s={},l("next"),l("throw"),l("return"),s[Symbol.asyncIterator]=function(){return this},s);function l(f){s[f]=R[f]&&function(M){return new Promise(function(A,d){!function(f,M,A,d){Promise.resolve(d).then(function(i){f({value:i,done:A})},M)}(A,d,(M=R[f](M)).done,M.value)})}}}T.d(L,{_T:()=>x,qq:()=>k,FC:()=>O,V2:()=>V,KL:()=>B})},950:()=>{},6601:()=>{},8623:()=>{},7748:()=>{},5568:()=>{},6619:()=>{},7108:()=>{},2361:()=>{},4616:()=>{},8979:Y=>{function L(p,N,y,x,u,g,C){try{var P=p[g](C),E=P.value}catch(v){return void y(v)}P.done?N(E):Promise.resolve(E).then(x,u)}Y.exports=function(p){return function(){var N=this,y=arguments;return new Promise(function(x,u){var g=p.apply(N,y);function C(E){L(g,x,u,C,P,"next",E)}function P(E){L(g,x,u,C,P,"throw",E)}C(void 0)})}},Y.exports.__esModule=!0,Y.exports.default=Y.exports},9901:Y=>{Y.exports=function(T,p){if(!(T instanceof p))throw new TypeError("Cannot call a class as a function")},Y.exports.__esModule=!0,Y.exports.default=Y.exports},9524:(Y,L,T)=>{var p=T(8262);function N(x,u){for(var g=0;g<u.length;g++){var C=u[g];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(x,p(C.key),C)}}Y.exports=function(x,u,g){return u&&N(x.prototype,u),g&&N(x,g),Object.defineProperty(x,"prototype",{writable:!1}),x},Y.exports.__esModule=!0,Y.exports.default=Y.exports},5633:(Y,L,T)=>{var p=T(8262);Y.exports=function(y,x,u){return(x=p(x))in y?Object.defineProperty(y,x,{value:u,enumerable:!0,configurable:!0,writable:!0}):y[x]=u,y},Y.exports.__esModule=!0,Y.exports.default=Y.exports},3621:Y=>{Y.exports=function(T){return T&&T.__esModule?T:{default:T}},Y.exports.__esModule=!0,Y.exports.default=Y.exports},3443:(Y,L,T)=>{var p=T(4738).default;function N(){"use strict";Y.exports=N=function(){return y},Y.exports.__esModule=!0,Y.exports.default=Y.exports;var y={},x=Object.prototype,u=x.hasOwnProperty,g=Object.defineProperty||function(a,f,M){a[f]=M.value},C="function"==typeof Symbol?Symbol:{},P=C.iterator||"@@iterator",E=C.asyncIterator||"@@asyncIterator",v=C.toStringTag||"@@toStringTag";function h(a,f,M){return Object.defineProperty(a,f,{value:M,enumerable:!0,configurable:!0,writable:!0}),a[f]}try{h({},"")}catch(a){h=function(M,A,d){return M[A]=d}}function _(a,f,M,A){var i=Object.create((f&&f.prototype instanceof I?f:I).prototype),m=new r(A||[]);return g(i,"_invoke",{value:X(a,M,m)}),i}function b(a,f,M){try{return{type:"normal",arg:a.call(f,M)}}catch(A){return{type:"throw",arg:A}}}y.wrap=_;var w={};function I(){}function D(){}function k(){}var O={};h(O,P,function(){return this});var V=Object.getPrototypeOf,B=V&&V(V(s([])));B&&B!==x&&u.call(B,P)&&(O=B);var U=k.prototype=I.prototype=Object.create(O);function j(a){["next","throw","return"].forEach(function(f){h(a,f,function(M){return this._invoke(f,M)})})}function W(a,f){function M(d,i,m,q){var z=b(a[d],a,i);if("throw"!==z.type){var J=z.arg,ce=J.value;return ce&&"object"==p(ce)&&u.call(ce,"__await")?f.resolve(ce.__await).then(function(se){M("next",se,m,q)},function(se){M("throw",se,m,q)}):f.resolve(ce).then(function(se){J.value=se,m(J)},function(se){return M("throw",se,m,q)})}q(z.arg)}var A;g(this,"_invoke",{value:function(i,m){function q(){return new f(function(z,J){M(i,m,z,J)})}return A=A?A.then(q,q):q()}})}function X(a,f,M){var A="suspendedStart";return function(d,i){if("executing"===A)throw new Error("Generator is already running");if("completed"===A){if("throw"===d)throw i;return{value:void 0,done:!0}}for(M.method=d,M.arg=i;;){var m=M.delegate;if(m){var q=K(m,M);if(q){if(q===w)continue;return q}}if("next"===M.method)M.sent=M._sent=M.arg;else if("throw"===M.method){if("suspendedStart"===A)throw A="completed",M.arg;M.dispatchException(M.arg)}else"return"===M.method&&M.abrupt("return",M.arg);A="executing";var z=b(a,f,M);if("normal"===z.type){if(A=M.done?"completed":"suspendedYield",z.arg===w)continue;return{value:z.arg,done:M.done}}"throw"===z.type&&(A="completed",M.method="throw",M.arg=z.arg)}}}function K(a,f){var M=f.method,A=a.iterator[M];if(void 0===A)return f.delegate=null,"throw"===M&&a.iterator.return&&(f.method="return",f.arg=void 0,K(a,f),"throw"===f.method)||"return"!==M&&(f.method="throw",f.arg=new TypeError("The iterator does not provide a '"+M+"' method")),w;var d=b(A,a.iterator,f.arg);if("throw"===d.type)return f.method="throw",f.arg=d.arg,f.delegate=null,w;var i=d.arg;return i?i.done?(f[a.resultName]=i.value,f.next=a.nextLoc,"return"!==f.method&&(f.method="next",f.arg=void 0),f.delegate=null,w):i:(f.method="throw",f.arg=new TypeError("iterator result is not an object"),f.delegate=null,w)}function ge(a){var f={tryLoc:a[0]};1 in a&&(f.catchLoc=a[1]),2 in a&&(f.finallyLoc=a[2],f.afterLoc=a[3]),this.tryEntries.push(f)}function R(a){var f=a.completion||{};f.type="normal",delete f.arg,a.completion=f}function r(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(ge,this),this.reset(!0)}function s(a){if(a){var f=a[P];if(f)return f.call(a);if("function"==typeof a.next)return a;if(!isNaN(a.length)){var M=-1,A=function d(){for(;++M<a.length;)if(u.call(a,M))return d.value=a[M],d.done=!1,d;return d.value=void 0,d.done=!0,d};return A.next=A}}return{next:l}}function l(){return{value:void 0,done:!0}}return D.prototype=k,g(U,"constructor",{value:k,configurable:!0}),g(k,"constructor",{value:D,configurable:!0}),D.displayName=h(k,v,"GeneratorFunction"),y.isGeneratorFunction=function(a){var f="function"==typeof a&&a.constructor;return!!f&&(f===D||"GeneratorFunction"===(f.displayName||f.name))},y.mark=function(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,k):(a.__proto__=k,h(a,v,"GeneratorFunction")),a.prototype=Object.create(U),a},y.awrap=function(a){return{__await:a}},j(W.prototype),h(W.prototype,E,function(){return this}),y.AsyncIterator=W,y.async=function(a,f,M,A,d){void 0===d&&(d=Promise);var i=new W(_(a,f,M,A),d);return y.isGeneratorFunction(f)?i:i.next().then(function(m){return m.done?m.value:i.next()})},j(U),h(U,v,"Generator"),h(U,P,function(){return this}),h(U,"toString",function(){return"[object Generator]"}),y.keys=function(a){var f=Object(a),M=[];for(var A in f)M.push(A);return M.reverse(),function d(){for(;M.length;){var i=M.pop();if(i in f)return d.value=i,d.done=!1,d}return d.done=!0,d}},y.values=s,r.prototype={constructor:r,reset:function(f){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!f)for(var M in this)"t"===M.charAt(0)&&u.call(this,M)&&!isNaN(+M.slice(1))&&(this[M]=void 0)},stop:function(){this.done=!0;var f=this.tryEntries[0].completion;if("throw"===f.type)throw f.arg;return this.rval},dispatchException:function(f){if(this.done)throw f;var M=this;function A(J,ce){return m.type="throw",m.arg=f,M.next=J,ce&&(M.method="next",M.arg=void 0),!!ce}for(var d=this.tryEntries.length-1;d>=0;--d){var i=this.tryEntries[d],m=i.completion;if("root"===i.tryLoc)return A("end");if(i.tryLoc<=this.prev){var q=u.call(i,"catchLoc"),z=u.call(i,"finallyLoc");if(q&&z){if(this.prev<i.catchLoc)return A(i.catchLoc,!0);if(this.prev<i.finallyLoc)return A(i.finallyLoc)}else if(q){if(this.prev<i.catchLoc)return A(i.catchLoc,!0)}else{if(!z)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return A(i.finallyLoc)}}}},abrupt:function(f,M){for(var A=this.tryEntries.length-1;A>=0;--A){var d=this.tryEntries[A];if(d.tryLoc<=this.prev&&u.call(d,"finallyLoc")&&this.prev<d.finallyLoc){var i=d;break}}i&&("break"===f||"continue"===f)&&i.tryLoc<=M&&M<=i.finallyLoc&&(i=null);var m=i?i.completion:{};return m.type=f,m.arg=M,i?(this.method="next",this.next=i.finallyLoc,w):this.complete(m)},complete:function(f,M){if("throw"===f.type)throw f.arg;return"break"===f.type||"continue"===f.type?this.next=f.arg:"return"===f.type?(this.rval=this.arg=f.arg,this.method="return",this.next="end"):"normal"===f.type&&M&&(this.next=M),w},finish:function(f){for(var M=this.tryEntries.length-1;M>=0;--M){var A=this.tryEntries[M];if(A.finallyLoc===f)return this.complete(A.completion,A.afterLoc),R(A),w}},catch:function(f){for(var M=this.tryEntries.length-1;M>=0;--M){var A=this.tryEntries[M];if(A.tryLoc===f){var d=A.completion;if("throw"===d.type){var i=d.arg;R(A)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(f,M,A){return this.delegate={iterator:s(f),resultName:M,nextLoc:A},"next"===this.method&&(this.arg=void 0),w}},y}Y.exports=N,Y.exports.__esModule=!0,Y.exports.default=Y.exports},1600:(Y,L,T)=>{var p=T(4738).default;Y.exports=function(y,x){if("object"!==p(y)||null===y)return y;var u=y[Symbol.toPrimitive];if(void 0!==u){var g=u.call(y,x||"default");if("object"!==p(g))return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===x?String:Number)(y)},Y.exports.__esModule=!0,Y.exports.default=Y.exports},8262:(Y,L,T)=>{var p=T(4738).default,N=T(1600);Y.exports=function(x){var u=N(x,"string");return"symbol"===p(u)?u:String(u)},Y.exports.__esModule=!0,Y.exports.default=Y.exports},4738:Y=>{function L(T){return Y.exports=L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},Y.exports.__esModule=!0,Y.exports.default=Y.exports,L(T)}Y.exports=L,Y.exports.__esModule=!0,Y.exports.default=Y.exports},617:(Y,L,T)=>{var p=T(3443)();Y.exports=p;try{regeneratorRuntime=p}catch(N){"object"==typeof globalThis?globalThis.regeneratorRuntime=p:Function("r","regeneratorRuntime = r")(p)}},8239:(Y,L,T)=>{"use strict";function p(y,x,u,g,C,P,E){try{var v=y[P](E),h=v.value}catch(_){return void u(_)}v.done?x(h):Promise.resolve(h).then(g,C)}function N(y){return function(){var x=this,u=arguments;return new Promise(function(g,C){var P=y.apply(x,u);function E(h){p(P,g,C,E,v,"next",h)}function v(h){p(P,g,C,E,v,"throw",h)}E(void 0)})}}T.d(L,{Z:()=>N})},2861:Y=>{"use strict";Y.exports={i8:"1.1.1"}},6638:Y=>{"use strict";Y.exports={i8:"1.1.0"}},1528:Y=>{"use strict";Y.exports={i8:"0.3.2"}},5500:Y=>{"use strict";Y.exports={i8:"0.1.2"}},8464:Y=>{"use strict";Y.exports=JSON.parse('{"i8":"1.2.1-main.738e43c"}')},5233:Y=>{"use strict";Y.exports={i8:"0.1.2"}},8593:Y=>{"use strict";Y.exports=JSON.parse('{"_from":"axios@^0.21.4","_id":"axios@0.21.4","_inBundle":false,"_integrity":"sha512-ut5vewkiu8jjGBdqpM44XxjuCjq9LAKeHVmoVfHVzy8eHgxxq8SbAVQNovDA8mVi05kP0Ea/n/UzcSHcTJQfNg==","_location":"/axios","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"axios@^0.21.4","name":"axios","escapedName":"axios","rawSpec":"^0.21.4","saveSpec":null,"fetchSpec":"^0.21.4"},"_requiredBy":["/@microsoft/ocsdk","/@microsoft/omnichannel-ic3core"],"_resolved":"https://registry.npmjs.org/axios/-/axios-0.21.4.tgz","_shasum":"c67b90dc0568e5c1cf2b0b858c43ba28e2eda575","_spec":"axios@^0.21.4","_where":"/home/runner/work/omnichannel-demos/omnichannel-demos/angular-botframework-webchat-control/node_modules/@microsoft/ocsdk","author":{"name":"Matt Zabriskie"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"bugs":{"url":"https://github.com/axios/axios/issues"},"bundleDependencies":false,"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}],"dependencies":{"follow-redirects":"^1.14.0"},"deprecated":false,"description":"Promise based HTTP client for the browser and node.js","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"homepage":"https://axios-http.com","jsdelivr":"dist/axios.min.js","keywords":["xhr","http","ajax","promise","node"],"license":"MIT","main":"index.js","name":"axios","repository":{"type":"git","url":"git+https://github.com/axios/axios.git"},"scripts":{"build":"NODE_ENV=production grunt build","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","examples":"node ./examples/server.js","fix":"eslint --fix lib/**/*.js","postversion":"git push && git push --tags","preversion":"npm test","start":"node ./sandbox/server.js","test":"grunt test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},"typings":"./index.d.ts","unpkg":"dist/axios.min.js","version":"0.21.4"}')},4946:Y=>{"use strict";Y.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},8770:Y=>{"use strict";Y.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},1308:Y=>{"use strict";Y.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},9799:Y=>{"use strict";Y.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},8597:Y=>{"use strict";Y.exports={i8:"6.5.4"}},2562:Y=>{"use strict";Y.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')}},Y=>{Y(Y.s=8952)}]);