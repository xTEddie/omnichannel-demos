(self.webpackChunkangular_botframework_webchat_control=self.webpackChunkangular_botframework_webchat_control||[]).push([[179],{8255:Y=>{function L(T){return Promise.resolve().then(()=>{var p=new Error("Cannot find module '"+T+"'");throw p.code="MODULE_NOT_FOUND",p})}L.keys=()=>[],L.resolve=L,L.id=8255,Y.exports=L},5283:(Y,L,T)=>{"use strict";T.d(L,{_:()=>p});class p extends Error{constructor(x){super(x),this.name="AbortError"}}},8682:(Y,L,T)=>{"use strict";T.r(L),T.d(L,{ChatClient:()=>Qo,ChatThreadClient:()=>Gn});var p={};T.r(p),T.d(p,{AddChatParticipantsRequest:()=>Ve,AddChatParticipantsResult:()=>On,ChatError:()=>it,ChatMessage:()=>En,ChatMessageContent:()=>Ge,ChatMessageReadReceipt:()=>He,ChatMessageReadReceiptsCollection:()=>Ct,ChatMessagesCollection:()=>Je,ChatParticipant:()=>dt,ChatParticipantsCollection:()=>ut,ChatThreadItem:()=>ze,ChatThreadProperties:()=>qn,ChatThreadsItemCollection:()=>ft,CommunicationErrorResponse:()=>Mt,CommunicationIdentifierModel:()=>We,CommunicationUserIdentifierModel:()=>Vt,CreateChatThreadRequest:()=>Ke,CreateChatThreadResult:()=>st,MicrosoftTeamsUserIdentifierModel:()=>ct,PhoneNumberIdentifierModel:()=>qe,SendChatMessageRequest:()=>Dn,SendChatMessageResult:()=>ot,SendReadReceiptRequest:()=>at,SendTypingNotificationRequest:()=>ht,UpdateChatMessageRequest:()=>Pn,UpdateChatThreadRequest:()=>sn});var N=T(8239),m=T(4762),x=T(1326);const u=(0,x.YR)("communication-chat");var g=T(3105),M=T(2305),I=T(9432);const h=(0,T(1259).q)({packagePrefix:"Azure.Communication",namespace:"Microsoft.Communication"});var C=T(8199);const w=se=>{const{id:K}=se,X=(0,m._T)(se,["id"]);return Object.assign(Object.assign({},X),{communicationIdentifier:(0,C.J)(K)})},P=se=>{const{communicationIdentifier:K}=se,X=(0,m._T)(se,["communicationIdentifier"]);return Object.assign(Object.assign({},X),{id:(0,C.H)(K)})},k=se=>{const{participants:K,initiatorCommunicationIdentifier:X}=se,he=(0,m._T)(se,["participants","initiatorCommunicationIdentifier"]);let Me=Object.assign({},he);if(X){const Oe=(0,C.H)(X);Me=Object.assign(Object.assign({},Me),{initiator:Oe})}return K&&(Me=Object.assign(Object.assign({},Me),{participants:null==K?void 0:K.map(Oe=>P(Oe))})),Me},O=se=>{const{content:K,senderCommunicationIdentifier:X}=se,he=(0,m._T)(se,["content","senderCommunicationIdentifier"]);let Me=Object.assign({},he);if(K&&(Me=Object.assign(Object.assign({},Me),{content:k(K)})),X){const Oe=(0,C.H)(X);Me=Object.assign(Object.assign({},Me),{sender:Oe})}return Me},U=se=>{const{createdByCommunicationIdentifier:K}=se,X=(0,m._T)(se,["createdByCommunicationIdentifier"]);return K?Object.assign(Object.assign({},X),{createdBy:(0,C.H)(K)}):Object.assign({},X)},H=se=>{const{senderCommunicationIdentifier:K}=se,X=(0,m._T)(se,["senderCommunicationIdentifier"]);return Object.assign(Object.assign({},X),{sender:(0,C.H)(K)})};function te(se){let K="";for(let X=0;X<se.length;X++)K+=String.fromCharCode(se[X]);return btoa(K)}function $(se){const K=atob(se),X=new Uint8Array(K.length);for(let he=0;he<K.length;he++)X[he]=K.charCodeAt(he);return X}const R="$",r="_";function s(se,K){return"Composite"!==K&&"Dictionary"!==K&&("string"==typeof se||"number"==typeof se||"boolean"==typeof se||null!==(null==K?void 0:K.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i))||null==se)}const l=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,f=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;function d(se,K){var X,he;const Me=se.parsedHeaders;if("HEAD"===se.request.method)return Object.assign(Object.assign({},Me),{body:se.parsedBody});const Oe=K&&K.bodyMapper,Pe=Boolean(null==Oe?void 0:Oe.nullable),Ue=null==Oe?void 0:Oe.type.name;if("Stream"===Ue)return Object.assign(Object.assign({},Me),{blobBody:se.blobBody,readableStreamBody:se.readableStreamBody});const gt="Composite"===Ue&&Oe.type.modelProperties||{},Ze=Object.keys(gt).some(nt=>""===gt[nt].serializedName);if("Sequence"===Ue||Ze){const nt=null!==(X=se.parsedBody)&&void 0!==X?X:[];for(const _t of Object.keys(gt))gt[_t].serializedName&&(nt[_t]=null===(he=se.parsedBody)||void 0===he?void 0:he[_t]);if(Me)for(const _t of Object.keys(Me))nt[_t]=Me[_t];return!Pe||se.parsedBody||Me||0!==Object.getOwnPropertyNames(gt).length?nt:null}return function(se){const K=Object.assign(Object.assign({},se.headers),se.body);return se.hasNullableType&&0===Object.getOwnPropertyNames(K).length?se.shouldWrapBody?{body:null}:null:se.shouldWrapBody?Object.assign(Object.assign({},se.headers),{body:se.body}):K}({body:se.parsedBody,headers:Me,hasNullableType:Pe,shouldWrapBody:s(se.parsedBody,Ue)})}class i{constructor(K={},X=!1){this.modelMappers=K,this.isXML=X}validateConstraints(K,X,he){const Me=(Oe,Pe)=>{throw new Error(`"${he}" with value "${X}" should satisfy the constraint "${Oe}": ${Pe}.`)};if(K.constraints&&null!=X){const{ExclusiveMaximum:Oe,ExclusiveMinimum:Pe,InclusiveMaximum:Ue,InclusiveMinimum:gt,MaxItems:Ze,MaxLength:nt,MinItems:_t,MinLength:Tt,MultipleOf:Lt,Pattern:Rt,UniqueItems:Bt}=K.constraints;if(void 0!==Oe&&X>=Oe&&Me("ExclusiveMaximum",Oe),void 0!==Pe&&X<=Pe&&Me("ExclusiveMinimum",Pe),void 0!==Ue&&X>Ue&&Me("InclusiveMaximum",Ue),void 0!==gt&&X<gt&&Me("InclusiveMinimum",gt),void 0!==Ze&&X.length>Ze&&Me("MaxItems",Ze),void 0!==nt&&X.length>nt&&Me("MaxLength",nt),void 0!==_t&&X.length<_t&&Me("MinItems",_t),void 0!==Tt&&X.length<Tt&&Me("MinLength",Tt),void 0!==Lt&&X%Lt!=0&&Me("MultipleOf",Lt),Rt){const nn="string"==typeof Rt?new RegExp(Rt):Rt;("string"!=typeof X||null===X.match(nn))&&Me("Pattern",Rt)}Bt&&X.some((nn,Kn,Un)=>Un.indexOf(nn)!==Kn)&&Me("UniqueItems",Bt)}}serialize(K,X,he,Me={xml:{}}){var Oe,Pe,Ue;const gt={xml:{rootName:null!==(Oe=Me.xml.rootName)&&void 0!==Oe?Oe:"",includeRoot:null!==(Pe=Me.xml.includeRoot)&&void 0!==Pe&&Pe,xmlCharKey:null!==(Ue=Me.xml.xmlCharKey)&&void 0!==Ue?Ue:r}};let Ze={};const nt=K.type.name;he||(he=K.serializedName),null!==nt.match(/^Sequence$/i)&&(Ze=[]),K.isConstant&&(X=K.defaultValue);const{required:_t,nullable:Tt}=K;if(_t&&Tt&&void 0===X)throw new Error(`${he} cannot be undefined.`);if(_t&&!Tt&&null==X)throw new Error(`${he} cannot be null or undefined.`);if(!_t&&!1===Tt&&null===X)throw new Error(`${he} cannot be null.`);return null==X||null!==nt.match(/^any$/i)?Ze=X:null!==nt.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)?Ze=function(se,K,X){if(null!=X)if(null!==se.match(/^Number$/i)){if("number"!=typeof X)throw new Error(`${K} with value ${X} must be of type number.`)}else if(null!==se.match(/^String$/i)){if("string"!=typeof X.valueOf())throw new Error(`${K} with value "${X}" must be of type string.`)}else if(null!==se.match(/^Uuid$/i)){if("string"!=typeof X.valueOf()||!function(se){return f.test(se)}(X))throw new Error(`${K} with value "${X}" must be of type string and a valid uuid.`)}else if(null!==se.match(/^Boolean$/i)){if("boolean"!=typeof X)throw new Error(`${K} with value ${X} must be of type boolean.`)}else if(null!==se.match(/^Stream$/i)){const he=typeof X;if(!("string"===he||"function"==typeof X.pipe||X instanceof ArrayBuffer||ArrayBuffer.isView(X)||("function"==typeof Blob||"object"==typeof Blob)&&X instanceof Blob||"function"===he))throw new Error(`${K} must be a string, Blob, ArrayBuffer, ArrayBufferView, NodeJS.ReadableStream, or () => NodeJS.ReadableStream.`)}return X}(nt,he,X):null!==nt.match(/^Enum$/i)?Ze=function(se,K,X){if(!K)throw new Error(`Please provide a set of allowedValues to validate ${se} as an Enum Type.`);if(!K.some(Me=>"string"==typeof Me.valueOf()?Me.toLowerCase()===X.toLowerCase():Me===X))throw new Error(`${X} is not a valid value for ${se}. The valid values are: ${JSON.stringify(K)}.`);return X}(he,K.type.allowedValues,X):null!==nt.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)?Ze=function(se,K,X){if(null!=K)if(null!==se.match(/^Date$/i)){if(!(K instanceof Date||"string"==typeof K.valueOf()&&!isNaN(Date.parse(K))))throw new Error(`${X} must be an instanceof Date or a string in ISO8601 format.`);K=K instanceof Date?K.toISOString().substring(0,10):new Date(K).toISOString().substring(0,10)}else if(null!==se.match(/^DateTime$/i)){if(!(K instanceof Date||"string"==typeof K.valueOf()&&!isNaN(Date.parse(K))))throw new Error(`${X} must be an instanceof Date or a string in ISO8601 format.`);K=K instanceof Date?K.toISOString():new Date(K).toISOString()}else if(null!==se.match(/^DateTimeRfc1123$/i)){if(!(K instanceof Date||"string"==typeof K.valueOf()&&!isNaN(Date.parse(K))))throw new Error(`${X} must be an instanceof Date or a string in RFC-1123 format.`);K=K instanceof Date?K.toUTCString():new Date(K).toUTCString()}else if(null!==se.match(/^UnixTime$/i)){if(!(K instanceof Date||"string"==typeof K.valueOf()&&!isNaN(Date.parse(K))))throw new Error(`${X} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);K=function(se){if(se)return"string"==typeof se.valueOf()&&(se=new Date(se)),Math.floor(se.getTime()/1e3)}(K)}else if(null!==se.match(/^TimeSpan$/i)&&!function(se){return l.test(se)}(K))throw new Error(`${X} must be a string in ISO 8601 format. Instead was "${K}".`);return K}(nt,X,he):null!==nt.match(/^ByteArray$/i)?Ze=function(se,K){if(null!=K){if(!(K instanceof Uint8Array))throw new Error(`${se} must be of type Uint8Array.`);K=te(K)}return K}(he,X):null!==nt.match(/^Base64Url$/i)?Ze=function(se,K){if(null!=K){if(!(K instanceof Uint8Array))throw new Error(`${se} must be of type Uint8Array.`);K=function(se){if(se){if(!(se instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");return function(se,K){let X=se.length;for(;X-1>=0&&"="===se[X-1];)--X;return se.substr(0,X)}(te(se)).replace(/\+/g,"-").replace(/\//g,"_")}}(K)}return K}(he,X):null!==nt.match(/^Sequence$/i)?Ze=function(se,K,X,he,Me,Oe){var Pe;if(!Array.isArray(X))throw new Error(`${he} must be of type Array.`);let Ue=K.type.element;if(!Ue||"object"!=typeof Ue)throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${he}.`);"Composite"===Ue.type.name&&Ue.type.className&&(Ue=null!==(Pe=se.modelMappers[Ue.type.className])&&void 0!==Pe?Pe:Ue);const gt=[];for(let Ze=0;Ze<X.length;Ze++){const nt=se.serialize(Ue,X[Ze],he,Oe);if(Me&&Ue.xmlNamespace){const _t=Ue.xmlNamespacePrefix?`xmlns:${Ue.xmlNamespacePrefix}`:"xmlns";"Composite"===Ue.type.name?(gt[Ze]=Object.assign({},nt),gt[Ze][R]={[_t]:Ue.xmlNamespace}):(gt[Ze]={},gt[Ze][Oe.xml.xmlCharKey]=nt,gt[Ze][R]={[_t]:Ue.xmlNamespace})}else gt[Ze]=nt}return gt}(this,K,X,he,Boolean(this.isXML),gt):null!==nt.match(/^Dictionary$/i)?Ze=function(se,K,X,he,Me,Oe){if("object"!=typeof X)throw new Error(`${he} must be of type object.`);const Pe=K.type.value;if(!Pe||"object"!=typeof Pe)throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${he}.`);const Ue={};for(const gt of Object.keys(X)){const Ze=se.serialize(Pe,X[gt],he,Oe);Ue[gt]=ue(Pe,Ze,Me,Oe)}if(Me&&K.xmlNamespace){const Ze=Ue;return Ze[R]={[K.xmlNamespacePrefix?`xmlns:${K.xmlNamespacePrefix}`:"xmlns"]:K.xmlNamespace},Ze}return Ue}(this,K,X,he,Boolean(this.isXML),gt):null!==nt.match(/^Composite$/i)&&(Ze=function(se,K,X,he,Me,Oe){if(Be(se,K)&&(K=_e(se,K,X,"clientName")),null!=X){const Pe={},Ue=ee(se,K,he);for(const Ze of Object.keys(Ue)){const nt=Ue[Ze];if(nt.readOnly)continue;let _t,Tt=Pe;if(se.isXML)_t=nt.xmlIsWrapped?nt.xmlName:nt.xmlElementName||nt.xmlName;else{const Lt=ge(nt.serializedName);_t=Lt.pop();for(const Rt of Lt)null==Tt[Rt]&&(null!=X[Ze]||void 0!==nt.defaultValue)&&(Tt[Rt]={}),Tt=Tt[Rt]}if(null!=Tt){if(Me&&K.xmlNamespace){const Kn=K.xmlNamespacePrefix?`xmlns:${K.xmlNamespacePrefix}`:"xmlns";Tt[R]=Object.assign(Object.assign({},Tt[R]),{[Kn]:K.xmlNamespace})}const Lt=""!==nt.serializedName?he+"."+nt.serializedName:he;let Rt=X[Ze];const Bt=Be(se,K);Bt&&Bt.clientName===Ze&&null==Rt&&(Rt=K.serializedName);const nn=se.serialize(nt,Rt,Lt,Oe);if(void 0!==nn&&null!=_t){const Kn=ue(nt,nn,Me,Oe);Me&&nt.xmlIsAttribute?(Tt[R]=Tt[R]||{},Tt[R][_t]=nn):Tt[_t]=Me&&nt.xmlIsWrapped?{[nt.xmlElementName]:Kn}:Kn}}}const gt=function(se,K,X){const he=K.type.additionalProperties;if(!he&&K.type.className){const Me=re(se,K,X);return null==Me?void 0:Me.type.additionalProperties}return he}(se,K,he);if(gt){const Ze=Object.keys(Ue);for(const nt in X)Ze.every(Tt=>Tt!==nt)&&(Pe[nt]=se.serialize(gt,X[nt],he+'["'+nt+'"]',Oe))}return Pe}return X}(this,K,X,he,Boolean(this.isXML),gt)),Ze}deserialize(K,X,he,Me={xml:{}}){var Oe,Pe,Ue,gt;const Ze={xml:{rootName:null!==(Oe=Me.xml.rootName)&&void 0!==Oe?Oe:"",includeRoot:null!==(Pe=Me.xml.includeRoot)&&void 0!==Pe&&Pe,xmlCharKey:null!==(Ue=Me.xml.xmlCharKey)&&void 0!==Ue?Ue:r},ignoreUnknownProperties:null!==(gt=Me.ignoreUnknownProperties)&&void 0!==gt&&gt};if(null==X)return this.isXML&&"Sequence"===K.type.name&&!K.xmlIsWrapped&&(X=[]),void 0!==K.defaultValue&&(X=K.defaultValue),X;let nt;const _t=K.type.name;if(he||(he=K.serializedName),null!==_t.match(/^Composite$/i))nt=function(se,K,X,he,Me){var Oe,Pe;const Ue=null!==(Oe=Me.xml.xmlCharKey)&&void 0!==Oe?Oe:r;Be(se,K)&&(K=_e(se,K,X,"serializedName"));const gt=ee(se,K,he);let Ze={};const nt=[];for(const Tt of Object.keys(gt)){const Lt=gt[Tt],Rt=ge(gt[Tt].serializedName);nt.push(Rt[0]);const{serializedName:Bt,xmlName:nn,xmlElementName:Kn}=Lt;let Un=he;""!==Bt&&void 0!==Bt&&(Un=he+"."+Bt);const yi=Lt.headerCollectionPrefix;if(yi){const Nn={};for(const sr of Object.keys(X))sr.startsWith(yi)&&(Nn[sr.substring(yi.length)]=se.deserialize(Lt.type.value,X[sr],Un,Me)),nt.push(sr);Ze[Tt]=Nn}else if(se.isXML)if(Lt.xmlIsAttribute&&X[R])Ze[Tt]=se.deserialize(Lt,X[R][nn],Un,Me);else if(Lt.xmlIsMsText)void 0!==X[Ue]?Ze[Tt]=X[Ue]:"string"==typeof X&&(Ze[Tt]=X);else{const Nn=Kn||nn||Bt;if(Lt.xmlIsWrapped){const sr=X[nn],co=null!==(Pe=null==sr?void 0:sr[Kn])&&void 0!==Pe?Pe:[];Ze[Tt]=se.deserialize(Lt,co,Un,Me),nt.push(nn)}else Ze[Tt]=se.deserialize(Lt,X[Nn],Un,Me),nt.push(Nn)}else{let Nn,sr=X;for(const Wr of Rt){if(!sr)break;sr=sr[Wr]}Nn=sr;const co=K.type.polymorphicDiscriminator;let Yo;if(co&&Tt===co.clientName&&null==Nn&&(Nn=K.serializedName),Array.isArray(X[Tt])&&""===gt[Tt].serializedName){Nn=X[Tt];const Wr=se.deserialize(Lt,Nn,Un,Me);for(const[ks,Ga]of Object.entries(Ze))Object.prototype.hasOwnProperty.call(Wr,ks)||(Wr[ks]=Ga);Ze=Wr}else(void 0!==Nn||void 0!==Lt.defaultValue)&&(Yo=se.deserialize(Lt,Nn,Un,Me),Ze[Tt]=Yo)}}const _t=K.type.additionalProperties;if(_t){const Tt=Lt=>{for(const Rt in gt)if(ge(gt[Rt].serializedName)[0]===Lt)return!1;return!0};for(const Lt in X)Tt(Lt)&&(Ze[Lt]=se.deserialize(_t,X[Lt],he+'["'+Lt+'"]',Me))}else if(X&&!Me.ignoreUnknownProperties)for(const Tt of Object.keys(X))void 0===Ze[Tt]&&!nt.includes(Tt)&&!Re(Tt,Me)&&(Ze[Tt]=X[Tt]);return Ze}(this,K,X,he,Ze);else{if(this.isXML){const Tt=Ze.xml.xmlCharKey;void 0!==X[R]&&void 0!==X[Tt]&&(X=X[Tt])}null!==_t.match(/^Number$/i)?(nt=parseFloat(X),isNaN(nt)&&(nt=X)):null!==_t.match(/^Boolean$/i)?nt="true"===X||"false"!==X&&X:null!==_t.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)?nt=X:null!==_t.match(/^(Date|DateTime|DateTimeRfc1123)$/i)?nt=new Date(X):null!==_t.match(/^UnixTime$/i)?nt=function(se){if(se)return new Date(1e3*se)}(X):null!==_t.match(/^ByteArray$/i)?nt=$(X):null!==_t.match(/^Base64Url$/i)?nt=function(se){if(se){if(se&&"string"!=typeof se.valueOf())throw new Error("Please provide an input of type string for converting to Uint8Array");return $(se=se.replace(/-/g,"+").replace(/_/g,"/"))}}(X):null!==_t.match(/^Sequence$/i)?nt=function(se,K,X,he,Me){var Oe;let Pe=K.type.element;if(!Pe||"object"!=typeof Pe)throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${he}`);if(X){Array.isArray(X)||(X=[X]),"Composite"===Pe.type.name&&Pe.type.className&&(Pe=null!==(Oe=se.modelMappers[Pe.type.className])&&void 0!==Oe?Oe:Pe);const Ue=[];for(let gt=0;gt<X.length;gt++)Ue[gt]=se.deserialize(Pe,X[gt],`${he}[${gt}]`,Me);return Ue}return X}(this,K,X,he,Ze):null!==_t.match(/^Dictionary$/i)&&(nt=function(se,K,X,he,Me){const Oe=K.type.value;if(!Oe||"object"!=typeof Oe)throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${he}`);if(X){const Pe={};for(const Ue of Object.keys(X))Pe[Ue]=se.deserialize(Oe,X[Ue],he,Me);return Pe}return X}(this,K,X,he,Ze))}return K.isConstant&&(nt=K.defaultValue),nt}}function b(se={},K=!1){return new i(se,K)}function ge(se){const K=[];let X="";if(se){const he=se.split(".");for(const Me of he)"\\"===Me.charAt(Me.length-1)?X+=Me.substr(0,Me.length-1)+".":(X+=Me,K.push(X),X="")}return K}function re(se,K,X){const he=K.type.className;if(!he)throw new Error(`Class name for model "${X}" is not provided in the mapper "${JSON.stringify(K,void 0,2)}".`);return se.modelMappers[he]}function ee(se,K,X){let he=K.type.modelProperties;if(!he){const Me=re(se,K,X);if(!Me)throw new Error(`mapper() cannot be null or undefined for model "${K.type.className}".`);if(he=null==Me?void 0:Me.type.modelProperties,!he)throw new Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(Me)}" of type "${K.type.className}" for object "${X}".`)}return he}function ue(se,K,X,he){if(!X||!se.xmlNamespace)return K;const Oe={[se.xmlNamespacePrefix?`xmlns:${se.xmlNamespacePrefix}`:"xmlns"]:se.xmlNamespace};if(["Composite"].includes(se.type.name)){if(K[R])return K;{const Ue=Object.assign({},K);return Ue[R]=Oe,Ue}}const Pe={};return Pe[he.xml.xmlCharKey]=K,Pe[R]=Oe,Pe}function Re(se,K){return[R,K.xml.xmlCharKey].includes(se)}function _e(se,K,X,he){var Me;const Oe=Be(se,K);if(Oe){let Pe=Oe[he];if(Pe){"serializedName"===he&&(Pe=Pe.replace(/\\/gi,""));const Ue=X[Pe],gt=null!==(Me=K.type.uberParent)&&void 0!==Me?Me:K.type.className;if("string"==typeof Ue&&gt){const Ze=function(se,K,X){const he=[X];for(;he.length;){const Me=he.shift(),Oe=K===Me?K:Me+"."+K;if(Object.prototype.hasOwnProperty.call(se,Oe))return se[Oe];for(const[Pe,Ue]of Object.entries(se))Pe.startsWith(Me+".")&&Ue.type.uberParent===Me&&Ue.type.className&&he.push(Ue.type.className)}}(se.modelMappers.discriminators,Ue,gt);Ze&&(K=Ze)}}}return K}function Be(se,K){return K.type.polymorphicDiscriminator||Ae(se,K.type.uberParent)||Ae(se,K.type.className)}function Ae(se,K){return K&&se.modelMappers[K]&&se.modelMappers[K].type.polymorphicDiscriminator}const Ct={type:{name:"Composite",className:"ChatMessageReadReceiptsCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatMessageReadReceipt"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},He={type:{name:"Composite",className:"ChatMessageReadReceipt",modelProperties:{senderCommunicationIdentifier:{serializedName:"senderCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},chatMessageId:{serializedName:"chatMessageId",required:!0,type:{name:"String"}},readOn:{serializedName:"readOn",required:!0,type:{name:"DateTime"}}}}},We={type:{name:"Composite",className:"CommunicationIdentifierModel",modelProperties:{rawId:{serializedName:"rawId",type:{name:"String"}},communicationUser:{serializedName:"communicationUser",type:{name:"Composite",className:"CommunicationUserIdentifierModel"}},phoneNumber:{serializedName:"phoneNumber",type:{name:"Composite",className:"PhoneNumberIdentifierModel"}},microsoftTeamsUser:{serializedName:"microsoftTeamsUser",type:{name:"Composite",className:"MicrosoftTeamsUserIdentifierModel"}}}}},Vt={type:{name:"Composite",className:"CommunicationUserIdentifierModel",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}}}}},qe={type:{name:"Composite",className:"PhoneNumberIdentifierModel",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"String"}}}}},ct={type:{name:"Composite",className:"MicrosoftTeamsUserIdentifierModel",modelProperties:{userId:{serializedName:"userId",required:!0,type:{name:"String"}},isAnonymous:{serializedName:"isAnonymous",type:{name:"Boolean"}},cloud:{serializedName:"cloud",type:{name:"String"}}}}},Mt={type:{name:"Composite",className:"CommunicationErrorResponse",modelProperties:{error:{serializedName:"error",type:{name:"Composite",className:"ChatError"}}}}},it={type:{name:"Composite",className:"ChatError",modelProperties:{code:{serializedName:"code",required:!0,type:{name:"String"}},message:{serializedName:"message",required:!0,type:{name:"String"}},target:{serializedName:"target",readOnly:!0,type:{name:"String"}},details:{serializedName:"details",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}},innerError:{serializedName:"innererror",type:{name:"Composite",className:"ChatError"}}}}},at={type:{name:"Composite",className:"SendReadReceiptRequest",modelProperties:{chatMessageId:{serializedName:"chatMessageId",required:!0,type:{name:"String"}}}}},Dn={type:{name:"Composite",className:"SendChatMessageRequest",modelProperties:{content:{serializedName:"content",required:!0,type:{name:"String"}},senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}},type:{serializedName:"type",type:{name:"Enum",allowedValues:["text","html","topicUpdated","participantAdded","participantRemoved"]}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},ot={type:{name:"Composite",className:"SendChatMessageResult",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}}}}},Je={type:{name:"Composite",className:"ChatMessagesCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatMessage"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},En={type:{name:"Composite",className:"ChatMessage",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},type:{serializedName:"type",required:!0,type:{name:"Enum",allowedValues:["text","html","topicUpdated","participantAdded","participantRemoved"]}},sequenceId:{serializedName:"sequenceId",required:!0,type:{name:"String"}},version:{serializedName:"version",required:!0,type:{name:"String"}},content:{serializedName:"content",type:{name:"Composite",className:"ChatMessageContent"}},senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}},createdOn:{serializedName:"createdOn",required:!0,type:{name:"DateTime"}},senderCommunicationIdentifier:{serializedName:"senderCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},editedOn:{serializedName:"editedOn",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},Ge={type:{name:"Composite",className:"ChatMessageContent",modelProperties:{message:{serializedName:"message",type:{name:"String"}},topic:{serializedName:"topic",type:{name:"String"}},participants:{serializedName:"participants",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},initiatorCommunicationIdentifier:{serializedName:"initiatorCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}}}}},dt={type:{name:"Composite",className:"ChatParticipant",modelProperties:{communicationIdentifier:{serializedName:"communicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},displayName:{serializedName:"displayName",type:{name:"String"}},shareHistoryTime:{serializedName:"shareHistoryTime",type:{name:"DateTime"}}}}},Pn={type:{name:"Composite",className:"UpdateChatMessageRequest",modelProperties:{content:{serializedName:"content",type:{name:"String"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},ut={type:{name:"Composite",className:"ChatParticipantsCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Ve={type:{name:"Composite",className:"AddChatParticipantsRequest",modelProperties:{participants:{serializedName:"participants",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}}}}},On={type:{name:"Composite",className:"AddChatParticipantsResult",modelProperties:{invalidParticipants:{serializedName:"invalidParticipants",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}}}}},Ke={type:{name:"Composite",className:"CreateChatThreadRequest",modelProperties:{topic:{serializedName:"topic",required:!0,type:{name:"String"}},participants:{serializedName:"participants",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}}}}},st={type:{name:"Composite",className:"CreateChatThreadResult",modelProperties:{chatThread:{serializedName:"chatThread",type:{name:"Composite",className:"ChatThreadProperties"}},invalidParticipants:{serializedName:"invalidParticipants",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}}}}},qn={type:{name:"Composite",className:"ChatThreadProperties",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},topic:{serializedName:"topic",required:!0,type:{name:"String"}},createdOn:{serializedName:"createdOn",required:!0,type:{name:"DateTime"}},createdByCommunicationIdentifier:{serializedName:"createdByCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}}}}},ft={type:{name:"Composite",className:"ChatThreadsItemCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatThreadItem"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},ze={type:{name:"Composite",className:"ChatThreadItem",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},topic:{serializedName:"topic",required:!0,type:{name:"String"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},lastMessageReceivedOn:{serializedName:"lastMessageReceivedOn",readOnly:!0,type:{name:"DateTime"}}}}},sn={type:{name:"Composite",className:"UpdateChatThreadRequest",modelProperties:{topic:{serializedName:"topic",type:{name:"String"}}}}},ht={type:{name:"Composite",className:"SendTypingNotificationRequest",modelProperties:{senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}}}}},tt={parameterPath:"accept",mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},Qt={parameterPath:"endpoint",mapper:{serializedName:"endpoint",required:!0,type:{name:"String"}},skipEncoding:!0},et={parameterPath:"chatThreadId",mapper:{serializedName:"chatThreadId",required:!0,type:{name:"String"}}},Xe={parameterPath:["options","maxPageSize"],mapper:{serializedName:"maxPageSize",type:{name:"Number"}}},kn={parameterPath:["options","skip"],mapper:{serializedName:"skip",type:{name:"Number"}}},Ye={parameterPath:"apiVersion",mapper:{defaultValue:"2021-09-07",isConstant:!0,serializedName:"api-version",type:{name:"String"}}},lt={parameterPath:["options","contentType"],mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},un={parameterPath:"sendReadReceiptRequest",mapper:at},Ht={parameterPath:"sendChatMessageRequest",mapper:Dn},jt={parameterPath:["options","startTime"],mapper:{serializedName:"startTime",type:{name:"DateTime"}}},bn={parameterPath:"chatMessageId",mapper:{serializedName:"chatMessageId",required:!0,type:{name:"String"}}},dn={parameterPath:["options","contentType"],mapper:{defaultValue:"application/merge-patch+json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},pn={parameterPath:"updateChatMessageRequest",mapper:Pn},In={parameterPath:"participantCommunicationIdentifier",mapper:We},rn={parameterPath:"addChatParticipantsRequest",mapper:Ve},Cn={parameterPath:"updateChatThreadRequest",mapper:sn},Kt={parameterPath:["options","sendTypingNotificationRequest"],mapper:ht},Nt={parameterPath:"nextLink",mapper:{serializedName:"nextLink",required:!0,type:{name:"String"}},skipEncoding:!0},xn={parameterPath:"createChatThreadRequest",mapper:Ke};class Mn{constructor(K){this.client=K}listChatReadReceipts(K,X){return this.client.sendOperationRequest({chatThreadId:K,options:X},Rn)}sendChatReadReceipt(K,X,he){return this.client.sendOperationRequest({chatThreadId:K,sendReadReceiptRequest:X,options:he},Zt)}sendChatMessage(K,X,he){return this.client.sendOperationRequest({chatThreadId:K,sendChatMessageRequest:X,options:he},tn)}listChatMessages(K,X){return this.client.sendOperationRequest({chatThreadId:K,options:X},_n)}getChatMessage(K,X,he){return this.client.sendOperationRequest({chatThreadId:K,chatMessageId:X,options:he},Oi)}updateChatMessage(K,X,he,Me){return this.client.sendOperationRequest({chatThreadId:K,chatMessageId:X,updateChatMessageRequest:he,options:Me},ki)}deleteChatMessage(K,X,he){return this.client.sendOperationRequest({chatThreadId:K,chatMessageId:X,options:he},Ni)}listChatParticipants(K,X){return this.client.sendOperationRequest({chatThreadId:K,options:X},wo)}removeChatParticipant(K,X,he){return this.client.sendOperationRequest({chatThreadId:K,participantCommunicationIdentifier:X,options:he},Uo)}addChatParticipants(K,X,he){return this.client.sendOperationRequest({chatThreadId:K,addChatParticipantsRequest:X,options:he},ps)}updateChatThreadProperties(K,X,he){return this.client.sendOperationRequest({chatThreadId:K,updateChatThreadRequest:X,options:he},Co)}getChatThreadProperties(K,X){return this.client.sendOperationRequest({chatThreadId:K,options:X},Ut)}sendTypingNotification(K,X){return this.client.sendOperationRequest({chatThreadId:K,options:X},Vo)}listChatReadReceiptsNext(K,X,he){return this.client.sendOperationRequest({chatThreadId:K,nextLink:X,options:he},Ur)}listChatMessagesNext(K,X,he){return this.client.sendOperationRequest({chatThreadId:K,nextLink:X,options:he},$r)}listChatParticipantsNext(K,X,he){return this.client.sendOperationRequest({chatThreadId:K,nextLink:X,options:he},Mo)}}const xt=b(p,!1),Rn={path:"/chat/threads/{chatThreadId}/readReceipts",httpMethod:"GET",responses:{200:{bodyMapper:Ct},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},queryParameters:[Xe,kn,Ye],urlParameters:[Qt,et],headerParameters:[tt],serializer:xt},Zt={path:"/chat/threads/{chatThreadId}/readReceipts",httpMethod:"POST",responses:{200:{},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},requestBody:un,queryParameters:[Ye],urlParameters:[Qt,et],headerParameters:[tt,lt],mediaType:"json",serializer:xt},tn={path:"/chat/threads/{chatThreadId}/messages",httpMethod:"POST",responses:{201:{bodyMapper:ot},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},requestBody:Ht,queryParameters:[Ye],urlParameters:[Qt,et],headerParameters:[tt,lt],mediaType:"json",serializer:xt},_n={path:"/chat/threads/{chatThreadId}/messages",httpMethod:"GET",responses:{200:{bodyMapper:Je},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},queryParameters:[Xe,Ye,jt],urlParameters:[Qt,et],headerParameters:[tt],serializer:xt},Oi={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"GET",responses:{200:{bodyMapper:En},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},queryParameters:[Ye],urlParameters:[Qt,et,bn],headerParameters:[tt],serializer:xt},ki={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"PATCH",responses:{204:{},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},requestBody:pn,queryParameters:[Ye],urlParameters:[Qt,et,bn],headerParameters:[tt,dn],mediaType:"json",serializer:xt},Ni={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"DELETE",responses:{204:{},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},queryParameters:[Ye],urlParameters:[Qt,et,bn],headerParameters:[tt],serializer:xt},wo={path:"/chat/threads/{chatThreadId}/participants",httpMethod:"GET",responses:{200:{bodyMapper:ut},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},queryParameters:[Xe,kn,Ye],urlParameters:[Qt,et],headerParameters:[tt],serializer:xt},Uo={path:"/chat/threads/{chatThreadId}/participants/:remove",httpMethod:"POST",responses:{204:{},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},requestBody:In,queryParameters:[Ye],urlParameters:[Qt,et],headerParameters:[tt,lt],mediaType:"json",serializer:xt},ps={path:"/chat/threads/{chatThreadId}/participants/:add",httpMethod:"POST",responses:{201:{bodyMapper:On},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},requestBody:rn,queryParameters:[Ye],urlParameters:[Qt,et],headerParameters:[tt,lt],mediaType:"json",serializer:xt},Co={path:"/chat/threads/{chatThreadId}",httpMethod:"PATCH",responses:{204:{},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},requestBody:Cn,queryParameters:[Ye],urlParameters:[Qt,et],headerParameters:[tt,dn],mediaType:"json",serializer:xt},Ut={path:"/chat/threads/{chatThreadId}",httpMethod:"GET",responses:{200:{bodyMapper:qn},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},queryParameters:[Ye],urlParameters:[Qt,et],headerParameters:[tt],serializer:xt},Vo={path:"/chat/threads/{chatThreadId}/typing",httpMethod:"POST",responses:{200:{},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},requestBody:Kt,queryParameters:[Ye],urlParameters:[Qt,et],headerParameters:[tt,lt],mediaType:"json",serializer:xt},Ur={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Ct},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},queryParameters:[Xe,kn,Ye],urlParameters:[Qt,et,Nt],headerParameters:[tt],serializer:xt},$r={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Je},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},queryParameters:[Xe,Ye,jt],urlParameters:[Qt,et,Nt],headerParameters:[tt],serializer:xt},Mo={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:ut},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},queryParameters:[Xe,kn,Ye],urlParameters:[Qt,et,Nt],headerParameters:[tt],serializer:xt};class xa{constructor(K){this.client=K}createChatThread(K,X){return this.client.sendOperationRequest({createChatThreadRequest:K,options:X},br)}listChatThreads(K){return this.client.sendOperationRequest({options:K},Ku)}deleteChatThread(K,X){return this.client.sendOperationRequest({chatThreadId:K,options:X},gs)}listChatThreadsNext(K,X){return this.client.sendOperationRequest({nextLink:K,options:X},Jn)}}const Vr=b(p,!1),br={path:"/chat/threads",httpMethod:"POST",responses:{201:{bodyMapper:st},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},requestBody:xn,queryParameters:[Ye],urlParameters:[Qt],headerParameters:[tt,lt,{parameterPath:["options","repeatabilityRequestId"],mapper:{serializedName:"repeatability-request-id",type:{name:"String"}}}],mediaType:"json",serializer:Vr},Ku={path:"/chat/threads",httpMethod:"GET",responses:{200:{bodyMapper:ft},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},queryParameters:[Xe,Ye,jt],urlParameters:[Qt],headerParameters:[tt],serializer:Vr},gs={path:"/chat/threads/{chatThreadId}",httpMethod:"DELETE",responses:{204:{},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},queryParameters:[Ye],urlParameters:[Qt,et],headerParameters:[tt],serializer:Vr},Jn={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:ft},401:{bodyMapper:Mt,isError:!0},403:{bodyMapper:Mt,isError:!0},429:{bodyMapper:Mt,isError:!0},503:{bodyMapper:Mt,isError:!0}},queryParameters:[Xe,Ye,jt],urlParameters:[Qt,Nt],headerParameters:[tt],serializer:Vr};function _o(se){return se.toLowerCase()}class Ho{constructor(K){if(this._headersMap=new Map,K)for(const X of Object.keys(K))this.set(X,K[X])}set(K,X){this._headersMap.set(_o(K),{name:K,value:String(X)})}get(K){var X;return null===(X=this._headersMap.get(_o(K)))||void 0===X?void 0:X.value}has(K){return this._headersMap.has(_o(K))}delete(K){this._headersMap.delete(_o(K))}toJSON(K={}){const X={};if(K.preserveCase)for(const he of this._headersMap.values())X[he.name]=he.value;else for(const[he,Me]of this._headersMap)X[he]=Me.value;return X}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return function*(se){for(const K of se.values())yield[K.name,K.value]}(this._headersMap)}}function vs(se){return new Ho(se)}var cn,Nc=new Uint8Array(16);function Ju(){if(!cn&&!(cn="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return cn(Nc)}const Li=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,to=function(se){return"string"==typeof se&&Li.test(se)};for(var Zn=[],no=0;no<256;++no)Zn.push((no+256).toString(16).substr(1));const di=function(se,K,X){var he=(se=se||{}).random||(se.rng||Ju)();if(he[6]=15&he[6]|64,he[8]=63&he[8]|128,K){X=X||0;for(var Me=0;Me<16;++Me)K[X+Me]=he[Me];return K}return function(se){var K=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,X=(Zn[se[K+0]]+Zn[se[K+1]]+Zn[se[K+2]]+Zn[se[K+3]]+"-"+Zn[se[K+4]]+Zn[se[K+5]]+"-"+Zn[se[K+6]]+Zn[se[K+7]]+"-"+Zn[se[K+8]]+Zn[se[K+9]]+"-"+Zn[se[K+10]]+Zn[se[K+11]]+Zn[se[K+12]]+Zn[se[K+13]]+Zn[se[K+14]]+Zn[se[K+15]]).toLowerCase();if(!to(X))throw TypeError("Stringified UUID is invalid");return X}(he)};class qo{constructor(K){var X,he,Me,Oe,Pe,Ue,gt;this.url=K.url,this.body=K.body,this.headers=null!==(X=K.headers)&&void 0!==X?X:vs(),this.method=null!==(he=K.method)&&void 0!==he?he:"GET",this.timeout=null!==(Me=K.timeout)&&void 0!==Me?Me:0,this.formData=K.formData,this.disableKeepAlive=null!==(Oe=K.disableKeepAlive)&&void 0!==Oe&&Oe,this.proxySettings=K.proxySettings,this.streamResponseStatusCodes=K.streamResponseStatusCodes,this.withCredentials=null!==(Pe=K.withCredentials)&&void 0!==Pe&&Pe,this.abortSignal=K.abortSignal,this.tracingOptions=K.tracingOptions,this.onUploadProgress=K.onUploadProgress,this.onDownloadProgress=K.onDownloadProgress,this.requestId=K.requestId||di(),this.allowInsecureConnection=null!==(Ue=K.allowInsecureConnection)&&void 0!==Ue&&Ue,this.enableBrowserStreams=null!==(gt=K.enableBrowserStreams)&&void 0!==gt&&gt}}function Wo(se){return!("object"!=typeof se||null===se||Array.isArray(se)||se instanceof RegExp||se instanceof Date)}function ro(se){if(Wo(se)){const X="string"==typeof se.message;return"string"==typeof se.name&&X}return!1}function hi(se){if(ro(se))return se.message;{let K;try{K="object"==typeof se&&se?JSON.stringify(se):String(se)}catch(X){K="[unable to stringify input]"}return`Unknown error ${K}`}}const io={},So="REDACTED",Eo=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],_r=["api-version"];class tr{constructor({additionalAllowedHeaderNames:K=[],additionalAllowedQueryParameters:X=[]}={}){K=Eo.concat(K),X=_r.concat(X),this.allowedHeaderNames=new Set(K.map(he=>he.toLowerCase())),this.allowedQueryParameters=new Set(X.map(he=>he.toLowerCase()))}sanitize(K){const X=new Set;return JSON.stringify(K,(he,Me)=>{if(Me instanceof Error)return Object.assign(Object.assign({},Me),{name:Me.name,message:Me.message});if("headers"===he)return this.sanitizeHeaders(Me);if("url"===he)return this.sanitizeUrl(Me);if("query"===he)return this.sanitizeQuery(Me);if("body"!==he&&"response"!==he&&"operationSpec"!==he){if(Array.isArray(Me)||Wo(Me)){if(X.has(Me))return"[Circular]";X.add(Me)}return Me}},2)}sanitizeHeaders(K){const X={};for(const he of Object.keys(K))X[he]=this.allowedHeaderNames.has(he.toLowerCase())?K[he]:So;return X}sanitizeQuery(K){if("object"!=typeof K||null===K)return K;const X={};for(const he of Object.keys(K))X[he]=this.allowedQueryParameters.has(he.toLowerCase())?K[he]:So;return X}sanitizeUrl(K){if("string"!=typeof K||null===K)return K;const X=new URL(K);if(!X.search)return K;for(const[he]of X.searchParams)this.allowedQueryParameters.has(he.toLowerCase())||X.searchParams.set(he,So);return X.toString()}}const cr=new tr;let ur=(()=>{class se extends Error{constructor(X,he={}){super(X),this.name="RestError",this.code=he.code,this.statusCode=he.statusCode,this.request=he.request,this.response=he.response,Object.setPrototypeOf(this,se.prototype)}[io](){return`RestError: ${this.message} \n ${cr.sanitize(this)}`}}return se.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",se.PARSE_ERROR="PARSE_ERROR",se})();function fr(se,K,X){let he=K.parameterPath;const Me=K.mapper;let Oe;if("string"==typeof he&&(he=[he]),Array.isArray(he)){if(he.length>0)if(Me.isConstant)Oe=Me.defaultValue;else{let Pe=bs(se,he);!Pe.propertyFound&&X&&(Pe=bs(X,he));let Ue=!1;Pe.propertyFound||(Ue=Me.required||"options"===he[0]&&2===he.length),Oe=Ue?Me.defaultValue:Pe.propertyValue}}else{Me.required&&(Oe={});for(const Pe in he){const Ze=fr(se,{parameterPath:he[Pe],mapper:Me.type.modelProperties[Pe]},X);void 0!==Ze&&(Oe||(Oe={}),Oe[Pe]=Ze)}}return Oe}function bs(se,K){const X={propertyFound:!1};let he=0;for(;he<K.length;++he){const Me=K[he];if(!se||!(Me in se))break;se=se[Me]}return he===K.length&&(X.propertyValue=se,X.propertyFound=!0),X}const Sr=new WeakMap,It=Symbol.for("@azure/core-client original request");function Tn(se){if(function(se){return It in se}(se))return Tn(se[It]);let K=Sr.get(se);return K||(K={},Sr.set(se,K)),K}const Er=["application/json","text/json"],pi=["application/xml","application/atom+xml"];function Wn(se){let K;const he=Tn(se.request),Me=null==he?void 0:he.operationSpec;return Me&&(K=(null==he?void 0:he.operationResponseGetter)?null==he?void 0:he.operationResponseGetter(Me,se):Me.responses[se.status]),K}function To(se){const X=Tn(se.request),he=null==X?void 0:X.shouldDeserialize;let Me;return Me=void 0===he||("boolean"==typeof he?he:he(se)),Me}function Jt(){return(Jt=(0,N.Z)(function*(se,K,X,he,Me){const Oe=yield Go(se,K,X,he,Me);if(!To(Oe))return Oe;const Pe=Tn(Oe.request),Ue=null==Pe?void 0:Pe.operationSpec;if(!Ue||!Ue.responses)return Oe;const gt=Wn(Oe),{error:Ze,shouldReturnResponse:nt}=Xr(Oe,Ue,gt,he);if(Ze)throw Ze;if(nt)return Oe;if(gt){if(gt.bodyMapper){let _t=Oe.parsedBody;Ue.isXML&&"Sequence"===gt.bodyMapper.type.name&&(_t="object"==typeof _t?_t[gt.bodyMapper.xmlElementName]:[]);try{Oe.parsedBody=Ue.serializer.deserialize(gt.bodyMapper,_t,"operationRes.parsedBody",he)}catch(Tt){throw new ur(`Error ${Tt} occurred in deserializing the responseBody - ${Oe.bodyAsText}`,{statusCode:Oe.status,request:Oe.request,response:Oe})}}else"HEAD"===Ue.httpMethod&&(Oe.parsedBody=X.status>=200&&X.status<300);gt.headersMapper&&(Oe.parsedHeaders=Ue.serializer.deserialize(gt.headersMapper,Oe.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0}))}return Oe})).apply(this,arguments)}function Xr(se,K,X,he){var Me;const Oe=200<=se.status&&se.status<300;if(function(se){const K=Object.keys(se.responses);return 0===K.length||1===K.length&&"default"===K[0]}(K)?Oe:X){if(!X)return{error:null,shouldReturnResponse:!1};if(!X.isError)return{error:null,shouldReturnResponse:!1}}const Ue=null!=X?X:K.responses.default,gt=(null===(Me=se.request.streamResponseStatusCodes)||void 0===Me?void 0:Me.has(se.status))?`Unexpected status code: ${se.status}`:se.bodyAsText,Ze=new ur(gt,{statusCode:se.status,request:se.request,response:se});if(!Ue)throw Ze;const nt=Ue.bodyMapper,_t=Ue.headersMapper;try{if(se.parsedBody){const Tt=se.parsedBody;let Lt;if(nt){let Bt=Tt;if(K.isXML&&"Sequence"===nt.type.name){Bt=[];const nn=nt.xmlElementName;"object"==typeof Tt&&nn&&(Bt=Tt[nn])}Lt=K.serializer.deserialize(nt,Bt,"error.response.parsedBody",he)}const Rt=Tt.error||Lt||Tt;Ze.code=Rt.code,Rt.message&&(Ze.message=Rt.message),nt&&(Ze.response.parsedBody=Lt)}se.headers&&_t&&(Ze.response.parsedHeaders=K.serializer.deserialize(_t,se.headers.toJSON(),"operationRes.parsedHeaders"))}catch(Tt){Ze.message=`Error "${Tt.message}" occurred in deserializing the responseBody - "${se.bodyAsText}" for the default response.`}return{error:Ze,shouldReturnResponse:!1}}function Go(se,K,X,he,Me){return ei.apply(this,arguments)}function ei(){return(ei=(0,N.Z)(function*(se,K,X,he,Me){var Oe;if(!(null===(Oe=X.request.streamResponseStatusCodes)||void 0===Oe?void 0:Oe.has(X.status))&&X.bodyAsText){const Pe=X.bodyAsText,Ue=X.headers.get("Content-Type")||"",gt=Ue?Ue.split(";").map(Ze=>Ze.toLowerCase()):[];try{if(0===gt.length||gt.some(Ze=>-1!==se.indexOf(Ze)))return X.parsedBody=JSON.parse(Pe),X;if(gt.some(Ze=>-1!==K.indexOf(Ze))){if(!Me)throw new Error("Parsing XML not supported.");const Ze=yield Me(Pe,he.xml);return X.parsedBody=Ze,X}}catch(Ze){throw new ur(`Error "${Ze}" occurred while parsing the response body - ${X.bodyAsText}.`,{code:Ze.code||ur.PARSE_ERROR,statusCode:X.status,request:X.request,response:X})}}return X})).apply(this,arguments)}const Yn=(0,x.YR)("core-rest-pipeline"),Rr=new Set(["Deserialize","Serialize","Retry","Sign"]);class Sn{constructor(K){var X;this._policies=[],this._policies=null!==(X=null==K?void 0:K.slice(0))&&void 0!==X?X:[],this._orderedPolicies=void 0}addPolicy(K,X={}){if(X.phase&&X.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(X.phase&&!Rr.has(X.phase))throw new Error(`Invalid phase name: ${X.phase}`);if(X.afterPhase&&!Rr.has(X.afterPhase))throw new Error(`Invalid afterPhase name: ${X.afterPhase}`);this._policies.push({policy:K,options:X}),this._orderedPolicies=void 0}removePolicy(K){const X=[];return this._policies=this._policies.filter(he=>!(K.name&&he.policy.name===K.name||K.phase&&he.options.phase===K.phase)||(X.push(he.policy),!1)),this._orderedPolicies=void 0,X}sendRequest(K,X){return this.getOrderedPolicies().reduceRight((Oe,Pe)=>Ue=>Pe.sendRequest(Ue,Oe),Oe=>K.sendRequest(Oe))(X)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new Sn(this._policies)}static create(){return new Sn}orderPolicies(){const K=[],X=new Map;function he(Rt){return{name:Rt,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}const Me=he("Serialize"),Oe=he("None"),Pe=he("Deserialize"),Ue=he("Retry"),gt=he("Sign"),Ze=[Me,Oe,Pe,Ue,gt];function nt(Rt){return"Retry"===Rt?Ue:"Serialize"===Rt?Me:"Deserialize"===Rt?Pe:"Sign"===Rt?gt:Oe}for(const Rt of this._policies){const Bt=Rt.policy,nn=Rt.options,Kn=Bt.name;if(X.has(Kn))throw new Error("Duplicate policy names not allowed in pipeline");const Un={policy:Bt,dependsOn:new Set,dependants:new Set};nn.afterPhase&&(Un.afterPhase=nt(nn.afterPhase),Un.afterPhase.hasAfterPolicies=!0),X.set(Kn,Un),nt(nn.phase).policies.add(Un)}for(const Rt of this._policies){const{policy:Bt,options:nn}=Rt,Kn=Bt.name,Un=X.get(Kn);if(!Un)throw new Error(`Missing node for policy ${Kn}`);if(nn.afterPolicies)for(const yi of nn.afterPolicies){const Nn=X.get(yi);Nn&&(Un.dependsOn.add(Nn),Nn.dependants.add(Un))}if(nn.beforePolicies)for(const yi of nn.beforePolicies){const Nn=X.get(yi);Nn&&(Nn.dependsOn.add(Un),Un.dependants.add(Nn))}}function _t(Rt){Rt.hasRun=!0;for(const Bt of Rt.policies)if((!Bt.afterPhase||Bt.afterPhase.hasRun&&!Bt.afterPhase.policies.size)&&0===Bt.dependsOn.size){K.push(Bt.policy);for(const nn of Bt.dependants)nn.dependsOn.delete(Bt);X.delete(Bt.policy.name),Rt.policies.delete(Bt)}}function Tt(){for(const Rt of Ze){if(_t(Rt),Rt.policies.size>0&&Rt!==Oe)return void(Oe.hasRun||_t(Oe));Rt.hasAfterPolicies&&_t(Oe)}}let Lt=0;for(;X.size>0;){Lt++;const Rt=K.length;if(Tt(),K.length<=Rt&&Lt>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return K}}function vt(se){const K=new Map;K.set("core-rest-pipeline","1.10.1"),function(se){const K=self.navigator;se.set("OS",(K.oscpu||K.platform).replace(" ",""))}(K);const X=function(se){const K=[];for(const[X,he]of se)K.push(he?`${X}/${he}`:X);return K.join(" ")}(K);return se?`${se} ${X}`:X}const bt="x-ms-useragent";new Error("decompressResponsePolicy is not supported in browser environment");var Ft=T(5283);function pr(se,K,X){return new Promise((he,Me)=>{let Oe,Pe;const Ue=()=>Me(new Ft._((null==X?void 0:X.abortErrorMsg)?null==X?void 0:X.abortErrorMsg:"The operation was aborted.")),gt=()=>{(null==X?void 0:X.abortSignal)&&Pe&&X.abortSignal.removeEventListener("abort",Pe)};if(Pe=()=>(Oe&&clearTimeout(Oe),gt(),Ue()),(null==X?void 0:X.abortSignal)&&X.abortSignal.aborted)return Ue();Oe=setTimeout(()=>{gt(),he(K)},se),(null==X?void 0:X.abortSignal)&&X.abortSignal.addEventListener("abort",Pe)})}function nr(se,K){const X=se.headers.get(K);if(!X)return;const he=Number(X);return Number.isNaN(he)?void 0:he}const $n="Retry-After",Bi=["retry-after-ms","x-ms-retry-after-ms",$n];function uo(se){if(se&&[429,503].includes(se.status))try{for(const Me of Bi){const Oe=nr(se,Me);if(0===Oe||Oe)return Oe*(Me===$n?1e3:1)}const K=se.headers.get($n);if(!K)return;const he=Date.parse(K)-Date.now();return Number.isFinite(he)?Math.max(0,he):void 0}catch(K){return}}function r0(se={}){var K,X;const he=null!==(K=se.retryDelayInMs)&&void 0!==K?K:1e3,Me=null!==(X=se.maxRetryDelayInMs)&&void 0!==X?X:64e3;let Oe=he;return{name:"exponentialRetryStrategy",retry({retryCount:Pe,response:Ue,responseError:gt}){const Ze=function(se){return!!se&&("ETIMEDOUT"===se.code||"ESOCKETTIMEDOUT"===se.code||"ECONNREFUSED"===se.code||"ECONNRESET"===se.code||"ENOENT"===se.code)}(gt),nt=Ze&&se.ignoreSystemErrors,_t=function(se){return Boolean(se&&void 0!==se.status&&(se.status>=500||408===se.status)&&501!==se.status&&505!==se.status)}(Ue),Tt=_t&&se.ignoreHttpStatusCodes;if(Ue&&(function(se){return Number.isFinite(uo(se))}(Ue)||!_t)||Tt||nt)return{skipStrategy:!0};if(gt&&!Ze&&!_t)return{errorToThrow:gt};const Rt=Oe*Math.pow(2,Pe),Bt=Math.min(Me,Rt);return Oe=Bt/2+function(se,K){return se=Math.ceil(se),K=Math.floor(K),Math.floor(Math.random()*(K-se+1))+se}(0,Bt/2),{retryAfterInMs:Oe}}}}const Cs=(0,x.YR)("core-rest-pipeline retryPolicy");function s0(se,K={maxRetries:3}){const X=K.logger||Cs;return{name:"retryPolicy",sendRequest:(he,Me)=>(0,N.Z)(function*(){var Oe,Pe;let Ue,gt,Ze=-1;e:for(;;){Ze+=1,Ue=void 0,gt=void 0;try{X.info(`Retry ${Ze}: Attempting to send request`,he.requestId),Ue=yield Me(he),X.info(`Retry ${Ze}: Received a response from request`,he.requestId)}catch(nt){if(X.error(`Retry ${Ze}: Received an error from request`,he.requestId),gt=nt,!nt||"RestError"!==gt.name)throw nt;Ue=gt.response}if(null===(Oe=he.abortSignal)||void 0===Oe?void 0:Oe.aborted)throw X.error(`Retry ${Ze}: Request aborted.`),new Ft._;if(Ze>=(null!==(Pe=K.maxRetries)&&void 0!==Pe?Pe:3)){if(X.info(`Retry ${Ze}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),gt)throw gt;if(Ue)return Ue;throw new Error("Maximum retries reached with no response or error to throw")}X.info(`Retry ${Ze}: Processing ${se.length} retry strategies.`);t:for(const nt of se){const _t=nt.logger||Cs;_t.info(`Retry ${Ze}: Processing retry strategy ${nt.name}.`);const Tt=nt.retry({retryCount:Ze,response:Ue,responseError:gt});if(Tt.skipStrategy){_t.info(`Retry ${Ze}: Skipped.`);continue t}const{errorToThrow:Lt,retryAfterInMs:Rt,redirectTo:Bt}=Tt;if(Lt)throw _t.error(`Retry ${Ze}: Retry strategy ${nt.name} throws error:`,Lt),Lt;if(Rt||0===Rt){_t.info(`Retry ${Ze}: Retry strategy ${nt.name} retries after ${Rt}`),yield pr(Rt,void 0,{abortSignal:he.abortSignal});continue e}if(Bt){_t.info(`Retry ${Ze}: Retry strategy ${nt.name} redirects to ${Bt}`),he.url=Bt;continue e}}if(gt)throw X.info("None of the retry strategies could work with the received error. Throwing it."),gt;if(Ue)return X.info("None of the retry strategies could work with the received response. Returning it."),Ue}})()}}new Error("proxyPolicy is not supported in browser environment");const Io={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function Na(se={}){let K=new $o(se.parentContext);return se.span&&(K=K.setValue(Io.span,se.span)),se.namespace&&(K=K.setValue(Io.namespace,se.namespace)),K}class $o{constructor(K){this._contextMap=K instanceof $o?new Map(K._contextMap):new Map}setValue(K,X){const he=new $o(this);return he._contextMap.set(K,X),he}getValue(K){return this._contextMap.get(K)}deleteValue(K){const X=new $o(this);return X._contextMap.delete(K),X}}let Hn;function Ko(){return Hn||(Hn={createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(se,K)=>({span:{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{}},tracingContext:Na({parentContext:K.tracingContext})}),withContext:(se,K,...X)=>K(...X)}),Hn}function Fa(se){const K=Sn.create();return K.addPolicy({name:"formDataPolicy",sendRequest:(se,K)=>(0,N.Z)(function*(){if(se.formData){const X=se.formData,he=new FormData;for(const Oe of Object.keys(X)){const Pe=X[Oe];if(Array.isArray(Pe))for(const Ue of Pe)he.append(Oe,Ue);else he.append(Oe,Pe)}se.body=he,se.formData=void 0;const Me=se.headers.get("Content-Type");Me&&-1!==Me.indexOf("application/x-www-form-urlencoded")?se.body=new URLSearchParams(he).toString():Me&&-1!==Me.indexOf("multipart/form-data")&&se.headers.delete("Content-Type")}return K(se)})()}),K.addPolicy(function(se={}){const K=vt(se.userAgentPrefix);return{name:"userAgentPolicy",sendRequest:(X,he)=>(0,N.Z)(function*(){return X.headers.has(bt)||X.headers.set(bt,K),he(X)})()}}(se.userAgentOptions)),K.addPolicy(function(se="x-ms-client-request-id"){return{name:"setClientRequestIdPolicy",sendRequest:(K,X)=>(0,N.Z)(function*(){return K.headers.has(se)||K.headers.set(se,K.requestId),X(K)})()}}()),K.addPolicy(function(se={}){var K;return{name:"defaultRetryPolicy",sendRequest:s0([{name:"throttlingRetryStrategy",retry({response:se}){const K=uo(se);return Number.isFinite(K)?{retryAfterInMs:K}:{skipStrategy:!0}}},r0(se)],{maxRetries:null!==(K=se.maxRetries)&&void 0!==K?K:3}).sendRequest}}(se.retryOptions),{phase:"Retry"}),K.addPolicy(function(se={}){const K=vt(se.userAgentPrefix),X=function(){try{return function(se){const{namespace:K,packageName:X,packageVersion:he}=se;function Me(nt,_t,Tt){var Lt;const Rt=Ko().startSpan(nt,Object.assign(Object.assign({},Tt),{packageName:X,packageVersion:he,tracingContext:null===(Lt=null==_t?void 0:_t.tracingOptions)||void 0===Lt?void 0:Lt.tracingContext}));let Bt=Rt.tracingContext;const nn=Rt.span;return Bt.getValue(Io.namespace)||(Bt=Bt.setValue(Io.namespace,K)),nn.setAttribute("az.namespace",Bt.getValue(Io.namespace)),{span:nn,updatedOptions:Object.assign({},_t,{tracingOptions:Object.assign(Object.assign({},null==_t?void 0:_t.tracingOptions),{tracingContext:Bt})})}}function Pe(){return(Pe=(0,N.Z)(function*(nt,_t,Tt,Lt){const{span:Rt,updatedOptions:Bt}=Me(nt,_t,Lt);try{const nn=yield Ue(Bt.tracingOptions.tracingContext,()=>Promise.resolve(Tt(Bt,Rt)));return Rt.setStatus({status:"success"}),nn}catch(nn){throw Rt.setStatus({status:"error",error:nn}),nn}finally{Rt.end()}})).apply(this,arguments)}function Ue(nt,_t,...Tt){return Ko().withContext(nt,_t,...Tt)}return{startSpan:Me,withSpan:function(nt,_t,Tt,Lt){return Pe.apply(this,arguments)},withContext:Ue,parseTraceparentHeader:function(nt){return Ko().parseTraceparentHeader(nt)},createRequestHeaders:function(nt){return Ko().createRequestHeaders(nt)}}}({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:"1.10.1"})}catch(se){return void Yn.warning(`Error when creating the TracingClient: ${hi(se)}`)}}();return{name:"tracingPolicy",sendRequest:(he,Me)=>(0,N.Z)(function*(){var Oe,Pe;if(!X||!(null===(Oe=he.tracingOptions)||void 0===Oe?void 0:Oe.tracingContext))return Me(he);const{span:Ue,tracingContext:gt}=null!==(Pe=function(se,K,X){try{const{span:he,updatedOptions:Me}=se.startSpan(`HTTP ${K.method}`,{tracingOptions:K.tracingOptions},{spanKind:"client",spanAttributes:{"http.method":K.method,"http.url":K.url,requestId:K.requestId}});if(!he.isRecording())return void he.end();X&&he.setAttribute("http.user_agent",X);const Oe=se.createRequestHeaders(Me.tracingOptions.tracingContext);for(const[Pe,Ue]of Object.entries(Oe))K.headers.set(Pe,Ue);return{span:he,tracingContext:Me.tracingOptions.tracingContext}}catch(he){return void Yn.warning(`Skipping creating a tracing span due to an error: ${hi(he)}`)}}(X,he,K))&&void 0!==Pe?Pe:{};if(!Ue||!gt)return Me(he);try{const Ze=yield X.withContext(gt,Me,he);return function(se,K){try{se.setAttribute("http.status_code",K.status);const X=K.headers.get("x-ms-request-id");X&&se.setAttribute("serviceRequestId",X),se.setStatus({status:"success"}),se.end()}catch(X){Yn.warning(`Skipping tracing span processing due to an error: ${hi(X)}`)}}(Ue,Ze),Ze}catch(Ze){throw function(se,K){try{se.setStatus({status:"error",error:ro(K)?K:void 0}),function(se){return se instanceof ur||ro(se)&&"RestError"===se.name}(K)&&K.statusCode&&se.setAttribute("http.status_code",K.statusCode),se.end()}catch(X){Yn.warning(`Skipping tracing span processing due to an error: ${hi(X)}`)}}(Ue,Ze),Ze}})()}}(se.userAgentOptions),{afterPhase:"Retry"}),K.addPolicy(function(se={}){var K;const X=null!==(K=se.logger)&&void 0!==K?K:Yn.info,he=new tr({additionalAllowedHeaderNames:se.additionalAllowedHeaderNames,additionalAllowedQueryParameters:se.additionalAllowedQueryParameters});return{name:"logPolicy",sendRequest:(Me,Oe)=>(0,N.Z)(function*(){if(!X.enabled)return Oe(Me);X(`Request: ${he.sanitize(Me)}`);const Pe=yield Oe(Me);return X(`Response status code: ${Pe.status}`),X(`Headers: ${he.sanitize(Pe.headers)}`),Pe})()}}(se.loggingOptions),{afterPhase:"Sign"}),K}const xo={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4};function Ss(){return(Ss=(0,N.Z)(function*(se,K,X){function he(){return Me.apply(this,arguments)}function Me(){return(Me=(0,N.Z)(function*(){if(!(Date.now()<X)){const Pe=yield se();if(null===Pe)throw new Error("Failed to refresh access token.");return Pe}try{return yield se()}catch(Pe){return null}})).apply(this,arguments)}let Oe=yield he();for(;null===Oe;)yield pr(K),Oe=yield he();return Oe})).apply(this,arguments)}function Ui(se){return Es.apply(this,arguments)}function Es(){return(Es=(0,N.Z)(function*(se){const{scopes:K,getAccessToken:X,request:he}=se,Me={abortSignal:he.abortSignal,tracingOptions:he.tracingOptions},Oe=yield X(K,Me);Oe&&se.request.headers.set("Authorization",`Bearer ${Oe.token}`)})).apply(this,arguments)}function Gt(se){var K;const{credential:X,scopes:he,challengeCallbacks:Me}=se,Oe=se.logger||Yn,Pe=Object.assign({authorizeRequest:null!==(K=null==Me?void 0:Me.authorizeRequest)&&void 0!==K?K:Ui,authorizeRequestOnChallenge:null==Me?void 0:Me.authorizeRequestOnChallenge},Me),Ue=X?function(se,K){let Me,X=null,he=null;const Oe=Object.assign(Object.assign({},xo),K),Pe={get isRefreshing(){return null!==X},get shouldRefresh(){var gt;return!Pe.isRefreshing&&(null!==(gt=null==he?void 0:he.expiresOnTimestamp)&&void 0!==gt?gt:0)-Oe.refreshWindowInMs<Date.now()},get mustRefresh(){return null===he||he.expiresOnTimestamp-Oe.forcedRefreshWindowInMs<Date.now()}};function Ue(gt,Ze){var nt;return Pe.isRefreshing||(X=function(se,K,X){return Ss.apply(this,arguments)}(()=>se.getToken(gt,Ze),Oe.retryIntervalInMs,null!==(nt=null==he?void 0:he.expiresOnTimestamp)&&void 0!==nt?nt:Date.now()).then(Tt=>(X=null,he=Tt,Me=Ze.tenantId,he)).catch(Tt=>{throw X=null,he=null,Me=void 0,Tt})),X}return function(){var gt=(0,N.Z)(function*(Ze,nt){return Me!==nt.tenantId||Boolean(nt.claims)||Pe.mustRefresh?Ue(Ze,nt):(Pe.shouldRefresh&&Ue(Ze,nt),he)});return function(Ze,nt){return gt.apply(this,arguments)}}()}(X):()=>Promise.resolve(null);return{name:"bearerTokenAuthenticationPolicy",sendRequest:(gt,Ze)=>(0,N.Z)(function*(){if(!gt.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");let nt,_t;yield Pe.authorizeRequest({scopes:Array.isArray(he)?he:[he],request:gt,getAccessToken:Ue,logger:Oe});try{nt=yield Ze(gt)}catch(Tt){_t=Tt,nt=Tt.response}if(Pe.authorizeRequestOnChallenge&&401===(null==nt?void 0:nt.status)&&function(se){const K=se.headers.get("WWW-Authenticate");if(401===se.status&&K)return K}(nt)&&(yield Pe.authorizeRequestOnChallenge({scopes:Array.isArray(he)?he:[he],request:gt,response:nt,getAccessToken:Ue,logger:Oe})))return Ze(gt);if(_t)throw _t;return nt})()}}function Vi(se){const{parameterPath:K,mapper:X}=se;let he;return he="string"==typeof K?K:Array.isArray(K)?K.join("."):X.serializedName,he}function ir(se){return Boolean(se&&"function"==typeof se.getReader&&"function"==typeof se.tee)}function nl(se){return("function"==typeof Blob||"object"==typeof Blob)&&se instanceof Blob}class Jo{sendRequest(K){return(0,N.Z)(function*(){if("https:"!==new URL(K.url).protocol&&!K.allowInsecureConnection)throw new Error(`Cannot connect to ${K.url} while allowInsecureConnection is false.`);if(K.proxySettings)throw new Error("HTTP proxy is not supported in browser environment");try{return yield function(se){return Zo.apply(this,arguments)}(K)}catch(Me){throw function(se,K){var X;return se&&"AbortError"===(null==se?void 0:se.name)?se:new ur(`Error sending request: ${se.message}`,{code:null!==(X=null==se?void 0:se.code)&&void 0!==X?X:ur.REQUEST_SEND_ERROR,request:K})}(Me,K)}})()}}function Zo(){return(Zo=(0,N.Z)(function*(se){const{abortController:K,abortControllerCleanup:X}=Gc(se);try{const he=Is(se.headers),Me=ni(se),Oe=yield fetch(se.url,{body:Me,method:se.method,headers:he,signal:K.signal,credentials:se.withCredentials?"include":"same-origin",cache:"no-store"});return nl(se.body)&&se.onUploadProgress&&se.onUploadProgress({loadedBytes:se.body.size}),Ha(Oe,se)}finally{X&&X()}})).apply(this,arguments)}function Ha(se,K){return rl.apply(this,arguments)}function rl(){return(rl=(0,N.Z)(function*(se,K){var X,he;const Oe={request:K,headers:Tr(se),status:se.status},Pe=ir(se.body)?ja(se.body,K.onDownloadProgress):se.body;if((null===(X=K.streamResponseStatusCodes)||void 0===X?void 0:X.has(Number.POSITIVE_INFINITY))||(null===(he=K.streamResponseStatusCodes)||void 0===he?void 0:he.has(Oe.status)))if(K.enableBrowserStreams)Oe.browserStreamBody=null!=Pe?Pe:void 0;else{const Ue=new Response(Pe);Oe.blobBody=Ue.blob()}else{const Ue=new Response(Pe);Oe.bodyAsText=yield Ue.text()}return Oe})).apply(this,arguments)}function Gc(se){const K=new AbortController;let X,he;if(se.abortSignal){if(se.abortSignal.aborted)throw new Ft._("The operation was aborted.");he=Me=>{"abort"===Me.type&&K.abort()},se.abortSignal.addEventListener("abort",he),X=()=>{var Me;he&&(null===(Me=se.abortSignal)||void 0===Me||Me.removeEventListener("abort",he))}}return se.timeout>0&&setTimeout(()=>{K.abort()},se.timeout),{abortController:K,abortControllerCleanup:X}}function Is(se){const K=new Headers;for(const[X,he]of se)K.append(X,he);return K}function Tr(se){const K=vs();for(const[X,he]of se.headers)K.set(X,he);return K}function ni(se){const K="function"==typeof se.body?se.body():se.body;if(function(se){return se&&"function"==typeof se.pipe}(K))throw new Error("Node streams are not supported in browser environment.");return ir(K)?ja(K,se.onUploadProgress):K}function ja(se,K){let X=0;if(function(se){return void 0!==se.pipeThrough&&void 0!==self.TransformStream}(se))return se.pipeThrough(new TransformStream({transform(he,Me){null!==he?(Me.enqueue(he),X+=he.length,K&&K({loadedBytes:X})):Me.terminate()}}));{const he=se.getReader();return new ReadableStream({pull:Me=>(0,N.Z)(function*(){var Oe;const{done:Pe,value:Ue}=yield he.read();if(Pe||!Ue)return Me.close(),void he.releaseLock();X+=null!==(Oe=null==Ue?void 0:Ue.length)&&void 0!==Oe?Oe:0,Me.enqueue(Ue),K&&K({loadedBytes:X})})()})}}let xs;const Jc={CSV:",",SSV:" ",Multi:"Multi",TSV:"\t",Pipes:"|"};function Rs(se,K){let X=se;for(const[he,Me]of K)X=X.split(he).join(Me);return X}const al=(0,x.YR)("core-client");class cl extends class extends class{constructor(K={}){var X,he;if(this._requestContentType=K.requestContentType,this._endpoint=null!==(X=K.endpoint)&&void 0!==X?X:K.baseUri,K.baseUri&&al.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=K.allowInsecureConnection,this._httpClient=K.httpClient||(xs||(xs=new Jo),xs),this.pipeline=K.pipeline||function(se){const K=function(se){if(se.credentialScopes){const K=se.credentialScopes;return Array.isArray(K)?K.map(X=>new URL(X).toString()):new URL(K).toString()}if(se.endpoint)return`${se.endpoint}/.default`;if(se.baseUri)return`${se.baseUri}/.default`;if(se.credential&&!se.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}(se),X=se.credential&&K?{credentialScopes:K,credential:se.credential}:void 0;return function(se={}){const K=Fa(null!=se?se:{});return se.credentialOptions&&K.addPolicy(Gt({credential:se.credentialOptions.credential,scopes:se.credentialOptions.credentialScopes})),K.addPolicy(function(se={}){const K=se.stringifyXML;return{name:"serializationPolicy",sendRequest:(X,he)=>(0,N.Z)(function*(){const Me=Tn(X),Oe=null==Me?void 0:Me.operationSpec,Pe=null==Me?void 0:Me.operationArguments;return Oe&&Pe&&(function(se,K,X){var he,Me;if(X.headerParameters)for(const Pe of X.headerParameters){let Ue=fr(K,Pe);if(null!=Ue||Pe.mapper.required){Ue=X.serializer.serialize(Pe.mapper,Ue,Vi(Pe));const gt=Pe.mapper.headerCollectionPrefix;if(gt)for(const Ze of Object.keys(Ue))se.headers.set(gt+Ze,Ue[Ze]);else se.headers.set(Pe.mapper.serializedName||Vi(Pe),Ue)}}const Oe=null===(Me=null===(he=K.options)||void 0===he?void 0:he.requestOptions)||void 0===Me?void 0:Me.customHeaders;if(Oe)for(const Pe of Object.keys(Oe))se.headers.set(Pe,Oe[Pe])}(X,Pe,Oe),function(se,K,X,he=function(){throw new Error("XML serialization unsupported!")}){var Me,Oe,Pe,Ue,gt;const Ze=null===(Me=K.options)||void 0===Me?void 0:Me.serializerOptions,nt={xml:{rootName:null!==(Oe=null==Ze?void 0:Ze.xml.rootName)&&void 0!==Oe?Oe:"",includeRoot:null!==(Pe=null==Ze?void 0:Ze.xml.includeRoot)&&void 0!==Pe&&Pe,xmlCharKey:null!==(Ue=null==Ze?void 0:Ze.xml.xmlCharKey)&&void 0!==Ue?Ue:r}},_t=nt.xml.xmlCharKey;if(X.requestBody&&X.requestBody.mapper){se.body=fr(K,X.requestBody);const Tt=X.requestBody.mapper,{required:Lt,serializedName:Rt,xmlName:Bt,xmlElementName:nn,xmlNamespace:Kn,xmlNamespacePrefix:Un,nullable:yi}=Tt,Nn=Tt.type.name;try{if(null!=se.body||yi&&null===se.body||Lt){const sr=Vi(X.requestBody);se.body=X.serializer.serialize(Tt,se.body,sr,nt);const co="Stream"===Nn;if(X.isXML){const Yo=Un?`xmlns:${Un}`:"xmlns",Wr=function(se,K,X,he,Me){if(se&&!["Composite","Sequence","Dictionary"].includes(X)){const Oe={};return Oe[Me.xml.xmlCharKey]=he,Oe[R]={[K]:se},Oe}return he}(Kn,Yo,Nn,se.body,nt);"Sequence"===Nn?se.body=he(function(se,K,X,he){if(Array.isArray(se)||(se=[se]),!X||!he)return{[K]:se};const Me={[K]:se};return Me[R]={[X]:he},Me}(Wr,nn||Bt||Rt,Yo,Kn),{rootName:Bt||Rt,xmlCharKey:_t}):co||(se.body=he(Wr,{rootName:Bt||Rt,xmlCharKey:_t}))}else{if("String"===Nn&&((null===(gt=X.contentType)||void 0===gt?void 0:gt.match("text/plain"))||"text"===X.mediaType))return;co||(se.body=JSON.stringify(se.body))}}}catch(sr){throw new Error(`Error "${sr.message}" occurred in serializing the payload - ${JSON.stringify(Rt,void 0,"  ")}.`)}}else if(X.formDataParameters&&X.formDataParameters.length>0){se.formData={};for(const Tt of X.formDataParameters){const Lt=fr(K,Tt);if(null!=Lt){const Rt=Tt.mapper.serializedName||Vi(Tt);se.formData[Rt]=X.serializer.serialize(Tt.mapper,Lt,Vi(Tt),nt)}}}}(X,Pe,Oe,K)),he(X)})()}}(se.serializationOptions),{phase:"Serialize"}),K.addPolicy(function(se={}){var K,X,he,Me,Oe,Pe,Ue;const gt=null!==(X=null===(K=se.expectedContentTypes)||void 0===K?void 0:K.json)&&void 0!==X?X:Er,Ze=null!==(Me=null===(he=se.expectedContentTypes)||void 0===he?void 0:he.xml)&&void 0!==Me?Me:pi,nt=se.parseXML,_t=se.serializerOptions,Tt={xml:{rootName:null!==(Oe=null==_t?void 0:_t.xml.rootName)&&void 0!==Oe?Oe:"",includeRoot:null!==(Pe=null==_t?void 0:_t.xml.includeRoot)&&void 0!==Pe&&Pe,xmlCharKey:null!==(Ue=null==_t?void 0:_t.xml.xmlCharKey)&&void 0!==Ue?Ue:r}};return{name:"deserializationPolicy",sendRequest:(Lt,Rt)=>(0,N.Z)(function*(){const Bt=yield Rt(Lt);return function(se,K,X,he,Me){return Jt.apply(this,arguments)}(gt,Ze,Bt,Tt,nt)})()}}(se.deserializationOptions),{phase:"Deserialize"}),K}(Object.assign(Object.assign({},se),{credentialOptions:X}))}(K),null===(he=K.additionalPolicies)||void 0===he?void 0:he.length)for(const{policy:Me,position:Oe}of K.additionalPolicies)this.pipeline.addPolicy(Me,{afterPhase:"perRetry"===Oe?"Sign":void 0})}sendRequest(K){var X=this;return(0,N.Z)(function*(){return X.pipeline.sendRequest(X._httpClient,K)})()}sendOperationRequest(K,X){var he=this;return(0,N.Z)(function*(){const Me=X.baseUrl||he._endpoint;if(!Me)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");const Oe=function(se,K,X,he){const Me=function(se,K,X){var he;const Me=new Map;if(null===(he=se.urlParameters)||void 0===he?void 0:he.length)for(const Oe of se.urlParameters){let Pe=fr(K,Oe,X);const Ue=Vi(Oe);Pe=se.serializer.serialize(Oe.mapper,Pe,Ue),Oe.skipEncoding||(Pe=encodeURIComponent(Pe)),Me.set(`{${Oe.mapper.serializedName||Ue}}`,Pe)}return Me}(K,X,he);let Oe=!1,Pe=Rs(se,Me);if(K.path){let Ze=Rs(K.path,Me);"/{nextLink}"===K.path&&Ze.startsWith("/")&&(Ze=Ze.substring(1)),function(se){return se.includes("://")}(Ze)?(Pe=Ze,Oe=!0):Pe=function(se,K){if(!K)return se;const X=new URL(se);let he=X.pathname;he.endsWith("/")||(he=`${he}/`),K.startsWith("/")&&(K=K.substring(1));const Me=K.indexOf("?");if(-1!==Me){const Oe=K.substring(0,Me),Pe=K.substring(Me+1);he+=Oe,Pe&&(X.search=X.search?`${X.search}&${Pe}`:Pe)}else he+=K;return X.pathname=he,X.toString()}(Pe,Ze)}const{queryParams:Ue,sequenceParams:gt}=function(se,K,X){var he;const Me=new Map,Oe=new Set;if(null===(he=se.queryParameters)||void 0===he?void 0:he.length)for(const Pe of se.queryParameters){"Sequence"===Pe.mapper.type.name&&Pe.mapper.serializedName&&Oe.add(Pe.mapper.serializedName);let Ue=fr(K,Pe,X);if(null!=Ue||Pe.mapper.required){Ue=se.serializer.serialize(Pe.mapper,Ue,Vi(Pe));const gt=Pe.collectionFormat?Jc[Pe.collectionFormat]:"";if(Array.isArray(Ue)&&(Ue=Ue.map(Ze=>null==Ze?"":Ze)),"Multi"===Pe.collectionFormat&&0===Ue.length)continue;Array.isArray(Ue)&&("SSV"===Pe.collectionFormat||"TSV"===Pe.collectionFormat)&&(Ue=Ue.join(gt)),Pe.skipEncoding||(Ue=Array.isArray(Ue)?Ue.map(Ze=>encodeURIComponent(Ze)):encodeURIComponent(Ue)),Array.isArray(Ue)&&("CSV"===Pe.collectionFormat||"Pipes"===Pe.collectionFormat)&&(Ue=Ue.join(gt)),Me.set(Pe.mapper.serializedName||Vi(Pe),Ue)}}return{queryParams:Me,sequenceParams:Oe}}(K,X,he);return Pe=function(se,K,X,he=!1){if(0===K.size)return se;const Me=new URL(se),Oe=function(se){const K=new Map;if(!se||"?"!==se[0])return K;const X=(se=se.slice(1)).split("&");for(const he of X){const[Me,Oe]=he.split("=",2),Pe=K.get(Me);Pe?Array.isArray(Pe)?Pe.push(Oe):K.set(Me,[Pe,Oe]):K.set(Me,Oe)}return K}(Me.search);for(const[Ue,gt]of K){const Ze=Oe.get(Ue);if(Array.isArray(Ze))if(Array.isArray(gt)){Ze.push(...gt);const nt=new Set(Ze);Oe.set(Ue,Array.from(nt))}else Ze.push(gt);else Ze?(Array.isArray(gt)?gt.unshift(Ze):X.has(Ue)&&Oe.set(Ue,[Ze,gt]),he||Oe.set(Ue,gt)):Oe.set(Ue,gt)}const Pe=[];for(const[Ue,gt]of Oe)if("string"==typeof gt)Pe.push(`${Ue}=${gt}`);else if(Array.isArray(gt))for(const Ze of gt)Pe.push(`${Ue}=${Ze}`);else Pe.push(`${Ue}=${gt}`);return Me.search=Pe.length?`?${Pe.join("&")}`:"",Me.toString()}(Pe,Ue,gt,Oe),Pe}(Me,X,K,he),Pe=new qo({url:Oe});Pe.method=X.httpMethod;const Ue=Tn(Pe);Ue.operationSpec=X,Ue.operationArguments=K;const gt=X.contentType||he._requestContentType;gt&&X.requestBody&&Pe.headers.set("Content-Type",gt);const Ze=K.options;if(Ze){const nt=Ze.requestOptions;nt&&(nt.timeout&&(Pe.timeout=nt.timeout),nt.onUploadProgress&&(Pe.onUploadProgress=nt.onUploadProgress),nt.onDownloadProgress&&(Pe.onDownloadProgress=nt.onDownloadProgress),void 0!==nt.shouldDeserialize&&(Ue.shouldDeserialize=nt.shouldDeserialize),nt.allowInsecureConnection&&(Pe.allowInsecureConnection=!0)),Ze.abortSignal&&(Pe.abortSignal=Ze.abortSignal),Ze.tracingOptions&&(Pe.tracingOptions=Ze.tracingOptions)}he._allowInsecureConnection&&(Pe.allowInsecureConnection=!0),void 0===Pe.streamResponseStatusCodes&&(Pe.streamResponseStatusCodes=function(se){const K=new Set;for(const X in se.responses){const he=se.responses[X];he.bodyMapper&&"Stream"===he.bodyMapper.type.name&&K.add(Number(X))}return K}(X));try{const nt=yield he.sendRequest(Pe),_t=d(nt,X.responses[nt.status]);return(null==Ze?void 0:Ze.onResponse)&&Ze.onResponse(nt,_t),_t}catch(nt){if("object"==typeof nt&&(null==nt?void 0:nt.response)){const _t=nt.response,Tt=d(_t,X.responses[nt.statusCode]||X.responses.default);nt.details=Tt,(null==Ze?void 0:Ze.onResponse)&&Ze.onResponse(_t,Tt,nt)}throw nt}})()}}{constructor(K,X){if(void 0===K)throw new Error("'endpoint' cannot be null");X||(X={});const Me="azsdk-js-azure-communication-chat/1.1.0",Oe=X.userAgentOptions&&X.userAgentOptions.userAgentPrefix?`${X.userAgentOptions.userAgentPrefix} ${Me}`:`${Me}`;super(Object.assign(Object.assign(Object.assign({},{requestContentType:"application/json; charset=utf-8"}),X),{userAgentOptions:{userAgentPrefix:Oe},baseUri:X.endpoint||"{endpoint}"})),this.endpoint=K,this.apiVersion=X.apiVersion||"2021-09-07"}}{constructor(K,X){super(K,X),this.chatThread=new Mn(this),this.chat=new xa(this)}}const wr=se=>Gt({credential:{getToken:(X,he)=>se.getToken({abortSignal:null==he?void 0:he.abortSignal})},scopes:[]});class Gn{constructor(K,X,he,Me={}){this.endpoint=K,this.timeOfLastTypingRequest=void 0,this.threadId=X,this.tokenCredential=he;const Oe=Object.assign(Object.assign({},Me),{loggingOptions:{logger:u.info}});this.client=new cl(this.endpoint,Object.assign({endpoint:this.endpoint},Oe));const Pe=wr(this.tokenCredential);this.client.pipeline.addPolicy(Pe)}getProperties(K={}){var X=this;return(0,N.Z)(function*(){const{span:he,updatedOptions:Me}=h("ChatClient-GetProperties",K);try{const Oe=yield X.client.chatThread.getChatThreadProperties(X.threadId,Me);return U(Oe)}catch(Oe){throw he.setStatus({code:I.Qn.ERROR,message:Oe.message}),Oe}finally{he.end()}})()}updateTopic(K,X={}){var he=this;return(0,N.Z)(function*(){const{span:Me,updatedOptions:Oe}=h("ChatThreadClient-UpdateTopic",X);try{yield he.client.chatThread.updateChatThreadProperties(he.threadId,{topic:K},Oe)}catch(Pe){throw Me.setStatus({code:I.Qn.ERROR,message:Pe.message}),Pe}finally{Me.end()}})()}sendMessage(K,X={}){var he=this;return(0,N.Z)(function*(){const{span:Me,updatedOptions:Oe}=h("ChatThreadClient-SendMessage",X);try{return he.timeOfLastTypingRequest=void 0,yield he.client.chatThread.sendChatMessage(he.threadId,Object.assign(Object.assign({},K),X),Oe)}catch(Pe){throw Me.setStatus({code:I.Qn.ERROR,message:Pe.message}),Pe}finally{Me.end()}})()}getMessage(K,X={}){var he=this;return(0,N.Z)(function*(){const{span:Me,updatedOptions:Oe}=h("ChatThreadClient-GetMessage",X);try{const Pe=yield he.client.chatThread.getChatMessage(he.threadId,K,Oe);return O(Pe)}catch(Pe){throw Me.setStatus({code:I.Qn.ERROR,message:Pe.message}),Pe}finally{Me.end()}})()}listMessagesPage(K,X={}){return(0,m.FC)(this,arguments,function*(){if(!K.continuationToken){const Me=yield(0,m.qq)(this.client.chatThread.listChatMessages(this.threadId,X));K.continuationToken=Me.nextLink,Me.value&&(yield yield(0,m.qq)(Me.value.map(O,this)))}for(;K.continuationToken;){const Me=yield(0,m.qq)(this.client.chatThread.listChatMessagesNext(this.threadId,K.continuationToken,X));if(K.continuationToken=Me.nextLink,!Me.value)break;yield yield(0,m.qq)(Me.value.map(O,this))}})}listMessagesAll(K){return(0,m.FC)(this,arguments,function*(){var he,Me;try{for(var Pe,Oe=(0,m.KL)(this.listMessagesPage({},K));!(Pe=yield(0,m.qq)(Oe.next())).done;){const Ue=Pe.value;yield(0,m.qq)(yield*(0,m.V2)((0,m.KL)(Ue)))}}catch(Ue){he={error:Ue}}finally{try{Pe&&!Pe.done&&(Me=Oe.return)&&(yield(0,m.qq)(Me.call(Oe)))}finally{if(he)throw he.error}}})}listMessages(K={}){const{span:X,updatedOptions:he}=h("ChatThreadClient-ListMessages",K);try{const Me=this.listMessagesAll(he);return{next:()=>Me.next(),[Symbol.asyncIterator](){return this},byPage:(Oe={})=>this.listMessagesPage(Oe,he)}}catch(Me){throw X.setStatus({code:I.Qn.ERROR,message:Me.message}),Me}finally{X.end()}}deleteMessage(K,X={}){var he=this;return(0,N.Z)(function*(){const{span:Me,updatedOptions:Oe}=h("ChatThreadClient-DeleteMessage",X);try{yield he.client.chatThread.deleteChatMessage(he.threadId,K,Oe)}catch(Pe){throw Me.setStatus({code:I.Qn.ERROR,message:Pe.message}),Pe}finally{Me.end()}})()}updateMessage(K,X={}){var he=this;return(0,N.Z)(function*(){const{span:Me,updatedOptions:Oe}=h("ChatThreadClient-UpdateMessage",X);try{yield he.client.chatThread.updateChatMessage(he.threadId,K,X,Oe)}catch(Pe){throw Me.setStatus({code:I.Qn.ERROR,message:Pe.message}),Pe}finally{Me.end()}})()}addParticipants(K,X={}){var he=this;return(0,N.Z)(function*(){const{span:Me,updatedOptions:Oe}=h("ChatThreadClient-AddParticipants",X);try{return yield he.client.chatThread.addChatParticipants(he.threadId,(se=>{var K;return{participants:null===(K=se.participants)||void 0===K?void 0:K.map(X=>w(X))}})(K),Oe)}catch(Pe){throw Me.setStatus({code:I.Qn.ERROR,message:Pe.message}),Pe}finally{Me.end()}})()}listParticipantsPage(K,X={}){return(0,m.FC)(this,arguments,function*(){if(!K.continuationToken){const Me=yield(0,m.qq)(this.client.chatThread.listChatParticipants(this.threadId,X));K.continuationToken=Me.nextLink,Me.value&&(yield yield(0,m.qq)(Me.value.map(P,this)))}for(;K.continuationToken;){const Me=yield(0,m.qq)(this.client.chatThread.listChatParticipantsNext(this.threadId,K.continuationToken,X));if(K.continuationToken=Me.nextLink,!Me.value)break;yield yield(0,m.qq)(Me.value.map(P,this))}})}listParticipantsAll(K){return(0,m.FC)(this,arguments,function*(){var he,Me;try{for(var Pe,Oe=(0,m.KL)(this.listParticipantsPage({},K));!(Pe=yield(0,m.qq)(Oe.next())).done;){const Ue=Pe.value;yield(0,m.qq)(yield*(0,m.V2)((0,m.KL)(Ue)))}}catch(Ue){he={error:Ue}}finally{try{Pe&&!Pe.done&&(Me=Oe.return)&&(yield(0,m.qq)(Me.call(Oe)))}finally{if(he)throw he.error}}})}listParticipants(K={}){const{span:X,updatedOptions:he}=h("ChatThreadClient-ListParticipants",K);try{const Me=this.listParticipantsAll(he);return{next:()=>Me.next(),[Symbol.asyncIterator](){return this},byPage:(Oe={})=>this.listParticipantsPage(Oe,he)}}catch(Me){throw X.setStatus({code:I.Qn.ERROR,message:Me.message}),Me}finally{X.end()}}removeParticipant(K,X={}){var he=this;return(0,N.Z)(function*(){const{span:Me,updatedOptions:Oe}=h("ChatThreadClient-RemoveParticipant",X);try{yield he.client.chatThread.removeChatParticipant(he.threadId,(0,C.J)(K),Oe)}catch(Pe){throw Me.setStatus({code:I.Qn.ERROR,message:Pe.message}),Pe}finally{Me.end()}})()}sendTypingNotification(K={}){var X=this;return(0,N.Z)(function*(){const{span:he,updatedOptions:Me}=h("ChatThreadClient-SendTypingNotification",K);try{const Oe=new Date,{senderDisplayName:Pe}=Me,Ue=(0,m._T)(Me,["senderDisplayName"]);return X.canPostTypingNotification(Oe)?(yield X.client.chatThread.sendTypingNotification(X.threadId,Object.assign({sendTypingNotificationRequest:{senderDisplayName:Pe}},Ue)),X.timeOfLastTypingRequest=Oe,!0):(u.info(`Typing Notification NOT Send. [thread_id=${X.threadId}]`),!1)}catch(Oe){throw he.setStatus({code:I.Qn.ERROR,message:Oe.message}),Oe}finally{he.end()}})()}sendReadReceipt(K,X={}){var he=this;return(0,N.Z)(function*(){const{span:Me,updatedOptions:Oe}=h("ChatThreadClient-SendReadReceipt",X);try{yield he.client.chatThread.sendChatReadReceipt(he.threadId,K,Oe)}catch(Pe){throw Me.setStatus({code:I.Qn.ERROR,message:Pe.message}),Pe}finally{Me.end()}})()}listReadReceiptsPage(K,X={}){return(0,m.FC)(this,arguments,function*(){if(!K.continuationToken){const Me=yield(0,m.qq)(this.client.chatThread.listChatReadReceipts(this.threadId,X));K.continuationToken=Me.nextLink,Me.value&&(yield yield(0,m.qq)(Me.value.map(H,this)))}for(;K.continuationToken;){const Me=yield(0,m.qq)(this.client.chatThread.listChatReadReceiptsNext(this.threadId,K.continuationToken,X));if(K.continuationToken=Me.nextLink,!Me.value)break;yield yield(0,m.qq)(Me.value.map(H,this))}})}listReadReceiptsAll(K){return(0,m.FC)(this,arguments,function*(){var he,Me;try{for(var Pe,Oe=(0,m.KL)(this.listReadReceiptsPage({},K));!(Pe=yield(0,m.qq)(Oe.next())).done;){const Ue=Pe.value;yield(0,m.qq)(yield*(0,m.V2)((0,m.KL)(Ue)))}}catch(Ue){he={error:Ue}}finally{try{Pe&&!Pe.done&&(Me=Oe.return)&&(yield(0,m.qq)(Me.call(Oe)))}finally{if(he)throw he.error}}})}listReadReceipts(K={}){const{span:X,updatedOptions:he}=h("ChatThreadClient-ListChatReadReceipts",K);try{const Me=this.listReadReceiptsAll(he);return{next:()=>Me.next(),[Symbol.asyncIterator](){return this},byPage:(Oe={})=>this.listReadReceiptsPage(Oe,he)}}catch(Me){throw X.setStatus({code:I.Qn.ERROR,message:Me.message}),Me}finally{X.end()}}canPostTypingNotification(K){return!(this.timeOfLastTypingRequest&&K.getTime()-this.timeOfLastTypingRequest.getTime()<8e3&&(u.info(`Typing interval check failed. [last_request=${this.timeOfLastTypingRequest}]`),1))}}var Ps,Yc=new Uint8Array(16);function Xc(){if(!Ps&&!(Ps="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ps(Yc)}const ef=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,nf=function(se){return"string"==typeof se&&ef.test(se)};for(var or=[],Ao=0;Ao<256;++Ao)or.push((Ao+256).toString(16).substr(1));const rf=function(se,K,X){var he=(se=se||{}).random||(se.rng||Xc)();if(he[6]=15&he[6]|64,he[8]=63&he[8]|128,K){X=X||0;for(var Me=0;Me<16;++Me)K[X+Me]=he[Me];return K}return function(se){var K=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,X=(or[se[K+0]]+or[se[K+1]]+or[se[K+2]]+or[se[K+3]]+"-"+or[se[K+4]]+or[se[K+5]]+"-"+or[se[K+6]]+or[se[K+7]]+"-"+or[se[K+8]]+or[se[K+9]]+"-"+or[se[K+10]]+or[se[K+11]]+or[se[K+12]]+or[se[K+13]]+or[se[K+14]]+or[se[K+15]]).toLowerCase();if(!nf(X))throw TypeError("Stringified UUID is invalid");return X}(he)};class Qo{constructor(K,X,he={}){this.endpoint=K,this.signalingClient=void 0,this.emitter=new g.EventEmitter,this.isRealtimeNotificationsStarted=!1,this.tokenCredential=X,this.clientOptions=Object.assign({},he);const Me=Object.assign(Object.assign({},he),{loggingOptions:{logger:u.info}});this.client=new cl(this.endpoint,Object.assign({endpoint:this.endpoint},Me));const Oe=wr(this.tokenCredential);this.client.pipeline.addPolicy(Oe),this.signalingClient=((se,K,X)=>{var he;return new M.CommunicationSignalingClient(se,K,{environment:null!==(he=null==X?void 0:X.environment)&&void 0!==he?he:void 0})})(X,u,he.signalingClientOptions)}getChatThreadClient(K){return new Gn(this.endpoint,K,this.tokenCredential,this.clientOptions)}createChatThread(K,X={}){var he=this;return(0,N.Z)(function*(){var Me,Oe;const{span:Pe,updatedOptions:Ue}=h("ChatClient-CreateChatThread",X);try{Ue.idempotencyToken=null!==(Me=Ue.idempotencyToken)&&void 0!==Me?Me:rf();const gt=(se=>{const{idempotencyToken:X}=se,he=(0,m._T)(se,["participants","idempotencyToken"]);return Object.assign({repeatabilityRequestId:X},he)})(Ue);return(se=>{const{chatThread:K}=se,X=(0,m._T)(se,["chatThread"]);return K?Object.assign(Object.assign({},X),{chatThread:U(K)}):Object.assign({},X)})(yield he.client.chat.createChatThread({topic:K.topic,participants:null===(Oe=X.participants)||void 0===Oe?void 0:Oe.map(nt=>w(nt))},gt))}catch(gt){throw Pe.setStatus({code:I.Qn.ERROR,message:gt.message}),gt}finally{Pe.end()}})()}listChatThreadsPage(K,X={}){return(0,m.FC)(this,arguments,function*(){if(!K.continuationToken){const Me=yield(0,m.qq)(this.client.chat.listChatThreads(X));K.continuationToken=Me.nextLink,Me.value&&(yield yield(0,m.qq)(Me.value))}for(;K.continuationToken;){const Me=yield(0,m.qq)(this.client.chat.listChatThreadsNext(K.continuationToken,X));if(K.continuationToken=Me.nextLink,!Me.value)break;yield yield(0,m.qq)(Me.value)}})}listChatThreadsAll(K){return(0,m.FC)(this,arguments,function*(){var he,Me;try{for(var Pe,Oe=(0,m.KL)(this.listChatThreadsPage({},K));!(Pe=yield(0,m.qq)(Oe.next())).done;){const Ue=Pe.value;yield(0,m.qq)(yield*(0,m.V2)((0,m.KL)(Ue)))}}catch(Ue){he={error:Ue}}finally{try{Pe&&!Pe.done&&(Me=Oe.return)&&(yield(0,m.qq)(Me.call(Oe)))}finally{if(he)throw he.error}}})}listChatThreads(K={}){const{span:X,updatedOptions:he}=h("ChatClient-ListChatThreads",K);try{const Me=this.listChatThreadsAll(he);return{next:()=>Me.next(),[Symbol.asyncIterator](){return this},byPage:(Oe={})=>this.listChatThreadsPage(Oe,he)}}catch(Me){throw X.setStatus({code:I.Qn.ERROR,message:Me.message}),Me}finally{X.end()}}deleteChatThread(K,X={}){var he=this;return(0,N.Z)(function*(){const{span:Me,updatedOptions:Oe}=h("ChatClient-DeleteChatThread",X);try{yield he.client.chat.deleteChatThread(K,Oe)}catch(Pe){throw Me.setStatus({code:I.Qn.ERROR,message:Pe.message}),Pe}finally{Me.end()}})()}startRealtimeNotifications(){var K=this;return(0,N.Z)(function*(){if(void 0===K.signalingClient)throw new Error("Realtime notifications are not supported in node js.");K.isRealtimeNotificationsStarted||(K.isRealtimeNotificationsStarted=!0,yield K.signalingClient.start(),K.subscribeToSignalingEvents())})()}stopRealtimeNotifications(){var K=this;return(0,N.Z)(function*(){if(void 0===K.signalingClient)throw new Error("Realtime notifications are not supported in node js.");K.isRealtimeNotificationsStarted=!1,yield K.signalingClient.stop(),K.emitter.removeAllListeners()})()}on(K,X){if(void 0===this.signalingClient)throw new Error("Realtime notifications are only supported in the browser.");if(!this.isRealtimeNotificationsStarted)throw new Error("You must call startRealtimeNotifications before you can subscribe to events.");this.emitter.on(K,X)}off(K,X){if(void 0===this.signalingClient)throw new Error("Realtime notifications are only supported in the browser.");this.emitter.removeListener(K,X)}subscribeToSignalingEvents(){if(void 0===this.signalingClient)throw new Error("Realtime notifications are only supported in the browser.");this.signalingClient.on("chatMessageReceived",K=>{this.emitter.emit("chatMessageReceived",K)}),this.signalingClient.on("chatMessageEdited",K=>{this.emitter.emit("chatMessageEdited",K)}),this.signalingClient.on("chatMessageDeleted",K=>{this.emitter.emit("chatMessageDeleted",K)}),this.signalingClient.on("typingIndicatorReceived",K=>{this.emitter.emit("typingIndicatorReceived",K)}),this.signalingClient.on("readReceiptReceived",K=>{this.emitter.emit("readReceiptReceived",K)}),this.signalingClient.on("chatThreadCreated",K=>{this.emitter.emit("chatThreadCreated",K)}),this.signalingClient.on("chatThreadDeleted",K=>{this.emitter.emit("chatThreadDeleted",K)}),this.signalingClient.on("chatThreadPropertiesUpdated",K=>{this.emitter.emit("chatThreadPropertiesUpdated",K)}),this.signalingClient.on("participantsAdded",K=>{this.emitter.emit("participantsAdded",K)}),this.signalingClient.on("participantsRemoved",K=>{this.emitter.emit("participantsRemoved",K)})}}},8199:(Y,L,T)=>{"use strict";T.d(L,{J:()=>g,H:()=>M});var p=T(4762),N=T(6361);const m=(A,I)=>void 0===I?A:Object.assign(Object.assign({},A),{rawId:I}),x=(A,I)=>{const y=Object.keys(A)[0],h=A[y];if(I in h)return h[I];throw new Error(`Property ${I} is required for identifier of type ${y}.`)},g=A=>{var I,y;const h=(0,N.n9)(A);switch(h.kind){case"communicationUser":return{communicationUser:{id:h.communicationUserId}};case"phoneNumber":return m({phoneNumber:{value:h.phoneNumber}},h.rawId);case"microsoftTeamsUser":return m({microsoftTeamsUser:{userId:h.microsoftTeamsUserId,isAnonymous:null!==(I=h.isAnonymous)&&void 0!==I&&I,cloud:null!==(y=h.cloud)&&void 0!==y?y:"public"}},h.rawId);case"unknown":return{rawId:h.id};default:throw new Error(`Can't serialize an identifier with kind ${h.kind}`)}},M=A=>{(A=>{const y=(0,p._T)(A,["rawId"]),h=Object.keys(y);if(h.length>1)throw new Error(`Only one of the properties in ${JSON.stringify(h)} should be present.`)})(A);const{communicationUser:I,microsoftTeamsUser:y,phoneNumber:h}=A;return I?{kind:"communicationUser",communicationUserId:x({communicationUser:I},"id")}:h?{kind:"phoneNumber",phoneNumber:x({phoneNumber:h},"value"),rawId:x({phoneNumber:A},"rawId")}:y?{kind:"microsoftTeamsUser",microsoftTeamsUserId:x({microsoftTeamsUser:y},"userId"),isAnonymous:x({microsoftTeamsUser:y},"isAnonymous"),cloud:x({microsoftTeamsUser:y},"cloud"),rawId:x({microsoftTeamsUser:A},"rawId")}:{kind:"unknown",id:x({unknown:A},"rawId")}}},6361:(Y,L,T)=>{"use strict";T.d(L,{sE:()=>p,Nc:()=>N,OU:()=>m,vJ:()=>x,n9:()=>u});const p=g=>"string"==typeof g.communicationUserId,N=g=>"string"==typeof g.phoneNumber,m=g=>"string"==typeof g.microsoftTeamsUserId,x=g=>"string"==typeof g.id,u=g=>p(g)?Object.assign(Object.assign({},g),{kind:"communicationUser"}):N(g)?Object.assign(Object.assign({},g),{kind:"phoneNumber"}):m(g)?Object.assign(Object.assign({},g),{kind:"microsoftTeamsUser"}):Object.assign(Object.assign({},g),{kind:"unknown"})},9116:(Y,L,T)=>{"use strict";T.r(L),T.d(L,{AzureCommunicationTokenCredential:()=>y,createCommunicationAccessKeyCredentialPolicy:()=>B,createCommunicationAuthPolicy:()=>$,deserializeCommunicationIdentifier:()=>d.H,getIdentifierKind:()=>D.n9,isCommunicationUserIdentifier:()=>D.sE,isKeyCredential:()=>f,isMicrosoftTeamsUserIdentifier:()=>D.OU,isPhoneNumberIdentifier:()=>D.Nc,isUnknownIdentifier:()=>D.vJ,parseClientArguments:()=>_,parseConnectionString:()=>s,serializeCommunicationIdentifier:()=>d.J});var p=T(8239),N=T(4934),m=T.n(N);const x=i=>{const{exp:b}=m()(i);return{token:i,expiresOnTimestamp:1e3*b}};class u{constructor(b){this.token=b}getToken(){var b=this;return(0,p.Z)(function*(){return b.token})()}dispose(){}}const g={token:"",expiresOnTimestamp:-10};class I{constructor(b){this.refreshingIntervalInMs=6e5,this.activeTokenFetching=null,this.activeTokenUpdating=null,this.disposed=!1;const{tokenRefresher:z,token:q,refreshProactively:J}=b;this.refresh=z,this.currentToken=q?x(q):g,this.refreshProactively=null!=J&&J,this.refreshProactively&&this.scheduleRefresh()}getToken(b){var z=this;return(0,p.Z)(function*(){if(!z.isCurrentTokenExpiringSoon)return z.currentToken;const q=z.updateTokenAndReschedule(null==b?void 0:b.abortSignal);return z.isCurrentTokenValid||(yield q),z.currentToken})()}dispose(){this.disposed=!0,this.activeTokenFetching=null,this.activeTokenUpdating=null,this.currentToken=g,this.activeTimeout&&clearTimeout(this.activeTimeout)}updateTokenAndReschedule(b){var z=this;return(0,p.Z)(function*(){if(z.activeTokenUpdating)return z.activeTokenUpdating;z.activeTokenUpdating=z.refreshTokenAndReschedule(b);try{yield z.activeTokenUpdating}finally{z.activeTokenUpdating=null}})()}refreshTokenAndReschedule(b){var z=this;return(0,p.Z)(function*(){z.currentToken=yield z.refreshToken(b),z.refreshProactively&&z.scheduleRefresh()})()}refreshToken(b){var z=this;return(0,p.Z)(function*(){try{return z.activeTokenFetching||(z.activeTokenFetching=z.refresh(b)),x(yield z.activeTokenFetching)}finally{z.activeTokenFetching=null}})()}scheduleRefresh(){if(this.disposed)return;this.activeTimeout&&clearTimeout(this.activeTimeout);const b=this.currentToken.expiresOnTimestamp-Date.now()-this.refreshingIntervalInMs;this.activeTimeout=setTimeout(()=>this.updateTokenAndReschedule(),b)}get isCurrentTokenValid(){return this.currentToken&&Date.now()<this.currentToken.expiresOnTimestamp}get isCurrentTokenExpiringSoon(){return!this.currentToken||Date.now()>=this.currentToken.expiresOnTimestamp-this.refreshingIntervalInMs}}class y{constructor(b){this.disposed=!1,this.tokenCredential="string"==typeof b?new u(x(b)):new I(b)}getToken(b){var z=this;return(0,p.Z)(function*(){z.throwIfDisposed();const q=yield z.tokenCredential.getToken(b);return z.throwIfDisposed(),q})()}dispose(){this.disposed=!0,this.tokenCredential.dispose()}throwIfDisposed(){if(this.disposed)throw new Error("User credential is disposed")}}var h=T(2462),C=T(369),v=T(7694);const w=i=>(new TextEncoder).encode(i);function P(i){if("function"!=typeof btoa)throw new Error("Your browser environment is missing the global `btoa` function");const b=new Uint8Array(i);let z="";for(const q of b)z+=String.fromCharCode(q);return btoa(z)}const k=globalThis,O=()=>{if(!k)throw new Error("Could not find global");if(!k.crypto||!k.crypto.subtle)throw new Error("Browser does not support cryptography functions");return k.crypto.subtle},V=function(){var i=(0,p.Z)(function*(b){const z=w(b);return P(yield O().digest("SHA-256",z))});return function(z){return i.apply(this,arguments)}}(),U=function(){var i=(0,p.Z)(function*(b,z){const q={name:"HMAC",hash:{name:"SHA-256"}},J=w(z),ge=function(i){if("function"!=typeof atob)throw new Error("Your browser environment is missing the global `atob` function");const b=atob(i),z=new Uint8Array(b.length);for(let q=0;q<b.length;q++)z[q]=b.charCodeAt(q);return z}(b),me=O(),le=yield me.importKey("raw",ge,q,!1,["sign"]);return P(yield me.sign(q,le,J))});return function(z,q){return i.apply(this,arguments)}}(),B=i=>({create:(b,z)=>new H(i,b,z)});class H extends h.U{constructor(b,z,q){super(z,q),this.accessKey=b}signRequest(b){var z=this;return(0,p.Z)(function*(){const q=b.method.toUpperCase(),J=(new Date).toUTCString(),ge=yield V(b.body||""),me="x-ms-date",le=`${me};host;x-ms-content-sha256`,fe=C.UK.parse(b.url),ae=fe.getQuery(),de=ae?`${fe.getPath()}?${ae}`:fe.getPath(),xe=fe.getPort(),Ce=xe?`${fe.getHost()}:${xe}`:fe.getHost(),oe=`${q}\n${de}\n${J};${Ce};${ge}`,we=yield U(z.accessKey.key,oe);return v.UG&&b.headers.set("Host",Ce||""),b.headers.set(me,J),b.headers.set("x-ms-content-sha256",ge),b.headers.set("Authorization",`HMAC-SHA256 SignedHeaders=${le}&Signature=${we}`),b})()}sendRequest(b){var z=this;return(0,p.Z)(function*(){if(!b)throw new Error("webResource cannot be null or undefined");return z._nextPolicy.sendRequest(yield z.signRequest(b))})()}}var W=T(434),te=T(6354);const $=i=>(0,W.c)(i)?(0,te.v)(i,"https://communication.azure.com//.default"):B(i);class pe{constructor(b){if(!b)throw new Error("key must be a non-empty string");this._key=b}get key(){return this._key}update(b){this._key=b}}const R=/endpoint=(.*);accesskey=(.*)/i,s=i=>{const b=(i=>{const b=i.match(R);if((null==b?void 0:b[1])&&b[2])return{endpoint:b[1],credential:new pe(b[2])}})(i);if(b)return b;throw new Error(`Invalid connection string ${i}`)},a=i=>{if(!(i=>{var b;const z=C.UK.parse(i);return!!(null===(b=z.getScheme())||void 0===b?void 0:b.match(/^http[s]?/))&&void 0!==z.getHost()&&""!==z.getHost()&&(void 0===z.getPath()||""===z.getPath()||"/"===z.getPath())})(i))throw new Error(`Invalid endpoint url ${i}`)},f=i=>i&&"string"==typeof i.key&&void 0===i.getToken,_=(i,b)=>{if(f(b)||(0,W.c)(b))return a(i),{url:i,credential:b};{const{endpoint:z,credential:q}=s(i);return a(z),{url:z,credential:q}}};var D=T(6361),d=T(8199)},2305:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";function _interopDefault(Y){return Y&&"object"==typeof Y&&"default"in Y?Y.default:Y}var coreHttp=_interopDefault(__webpack_require__(8003)),commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function unwrapExports(Y){return Y&&Y.__esModule&&Object.prototype.hasOwnProperty.call(Y,"default")?Y.default:Y}function createCommonjsModule(Y,L){return Y(L={exports:{}},L.exports),L.exports}var tsregistrar=createCommonjsModule(function(Y,L){Y.exports=function(T){function p(m){if(N[m])return N[m].exports;var x=N[m]={i:m,l:!1,exports:{}};return T[m].call(x.exports,x,x.exports,p),x.l=!0,x.exports}var N={};return p.m=T,p.c=N,p.i=function(m){return m},p.d=function(m,x,u){p.o(m,x)||Object.defineProperty(m,x,{configurable:!1,enumerable:!0,get:u})},p.n=function(m){var x=m&&m.__esModule?function(){return m.default}:function(){return m};return p.d(x,"a",x),x},p.o=function(m,x){return Object.prototype.hasOwnProperty.call(m,x)},p.p="",p(p.s=1)}([function(T,p,N){Object.defineProperty(p,"__esModule",{value:!0}),p.toJson=function(u){try{return JSON.stringify(u)}catch(g){return"Unable to serialize object of type "+typeof u}};var x=function(){function u(){this.start=Date.now()}return Object.defineProperty(u.prototype,"duration",{get:function(){return Date.now()-this.start},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"startTime",{get:function(){return this.start},enumerable:!0,configurable:!0}),u.prototype.reset=function(){this.start=Date.now()},u}();p.Timespan=x},function(T,p,N){var h,x=this&&this.__extends||(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,v){C.__proto__=v}||function(C,v){for(var w in v)v.hasOwnProperty(w)&&(C[w]=v[w])},function(C,v){function w(){this.constructor=C}h(C,v),C.prototype=null===v?Object.create(v):(w.prototype=v.prototype,new w)}),u=this&&this.__awaiter||function(h,C,v,w){return new(v||(v=Promise))(function(S,P){function k(U){try{V(w.next(U))}catch(B){P(B)}}function O(U){try{V(w.throw(U))}catch(B){P(B)}}function V(U){U.done?S(U.value):new v(function(B){B(U.value)}).then(k,O)}V((w=w.apply(h,C||[])).next())})},g=this&&this.__generator||function(h,C){function v(U){return function(B){return function(U){if(S)throw new TypeError("Generator is already executing.");for(;V;)try{if(S=1,P&&(k=2&U[0]?P.return:U[0]?P.throw||((k=P.return)&&k.call(P),0):P.next)&&!(k=k.call(P,U[1])).done)return k;switch(P=0,k&&(U=[2&U[0],k.value]),U[0]){case 0:case 1:k=U;break;case 4:return V.label++,{value:U[1],done:!1};case 5:V.label++,P=U[1],U=[0];continue;case 7:U=V.ops.pop(),V.trys.pop();continue;default:if(!(k=(k=V.trys).length>0&&k[k.length-1])&&(6===U[0]||2===U[0])){V=0;continue}if(3===U[0]&&(!k||U[1]>k[0]&&U[1]<k[3])){V.label=U[1];break}if(6===U[0]&&V.label<k[1]){V.label=k[1],k=U;break}if(k&&V.label<k[2]){V.label=k[2],V.ops.push(U);break}k[2]&&V.ops.pop(),V.trys.pop();continue}U=C.call(h,V)}catch(B){U=[6,B],P=0}finally{S=k=0}if(5&U[0])throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}([U,B])}}var S,P,k,O,V={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return O={next:v(0),throw:v(1),return:v(2)},"function"==typeof Symbol&&(O[Symbol.iterator]=function(){return this}),O};Object.defineProperty(p,"__esModule",{value:!0});var M=N(0),A=function(h){function C(v){var w=h.call(this,v)||this;return w.name="CancelationError",w}return x(C,h),C}(Error),I=function(){function h(C,v,w){this.logger=C,this.maxBackoffInMs=v,this.initialDelay=w,this.backoffCount=0,this.id=++h.idCounter}return h.prototype.delay=function(C){var v=this;if(void 0!==this.timerHandle)throw new Error("Retry sequence logical failure");if(-1===this.backoffCount)return new Promise(function(S,P){P(new A("Cancelled"))});var w=this.calculateNextBackoffMs();return this.backoffCount++,this.logger.info("[RegistrarClient] Backing off "+C+" for "+w+" milliseconds with ID "+this.id),new Promise(function(S,P){v.cancelFunc=P,v.timerHandle=setTimeout(function(){v.logger.info("[RegistrarClient] Back off for "+C+" with ID "+v.id+" complete"),v.timerHandle=void 0,S()},w)})},h.prototype.cancel=function(){void 0!==this.timerHandle&&(this.logger.debug("Resetting back off"),clearTimeout(this.timerHandle),void 0!==this.cancelFunc&&this.cancelFunc(new A("Cancelled"))),this.backoffCount=-1},h.prototype.calculateNextBackoffMs=function(){var C=1+.4*(Math.random()-.5),v=this.initialDelay*Math.pow(2,this.backoffCount)*C;return v=Math.round(v),Math.min(this.maxBackoffInMs,v)},h.idCounter=0,h}(),y=function(){function h(C,v,w){this.logger=C,this.skypeTokenProvider=v,this.options=w,this.backoffs={}}return h.prototype.setTelemetryLogger=function(C){this.eventLogger=C},h.prototype.register=function(C,v){return u(this,void 0,void 0,function(){return g(this,function(w){switch(w.label){case 0:return[4,this.performRegistration(C,v,"pr_set_registration")];case 1:return w.sent(),this.cachedRegistrationParams=[C,v],[2]}})})},h.prototype.unregister=function(){return u(this,void 0,void 0,function(){var C;return g(this,function(v){switch(v.label){case 0:return this.logger.info("[RegistrarClient] sending unregister request"),C=new Request(this.options.registrarUrl+"/"+this.options.registrationId,{method:"DELETE",mode:"cors",headers:new Headers({accept:"application/json, text/javascript"})}),[4,this.callRegistrar(C,"pr_delete_registration")];case 1:return v.sent(),[2]}})})},h.prototype.cancelPendingRequests=function(){var C=this;Object.keys(this.backoffs).forEach(function(v){C.backoffs[v].cancel()}),this.backoffs={}},h.prototype.resendRegistration=function(){return u(this,void 0,void 0,function(){return g(this,function(C){switch(C.label){case 0:if(!this.cachedRegistrationParams)throw new Error("Re-registration failed because there is no registration parameters cached");return[4,this.performRegistration(this.cachedRegistrationParams[0],this.cachedRegistrationParams[1],"pr_resend_registration")];case 1:return C.sent(),[2]}})})},h.prototype.performRegistration=function(C,v,w){return u(this,void 0,void 0,function(){var S,P;return g(this,function(k){switch(k.label){case 0:return this.logger.info("[RegistrarClient] Sending register request"),S={clientDescription:C,registrationId:this.options.registrationId,nodeId:"",transports:v},P=new Request(this.options.registrarUrl,{method:"POST",mode:"cors",headers:new Headers({"content-type":"application/json",accept:"application/json, text/javascript"}),body:M.toJson(S)}),[4,this.callRegistrar(P,w)];case 1:return k.sent(),[2]}})})},h.prototype.startBackoff=function(){var C=new I(this.logger,this.options.maxRetryDelayMs,this.options.initialRetryDelayMs);return this.backoffs[C.id]=C,C},h.prototype.stopBackoff=function(C){C.cancel(),delete this.backoffs[C.id]},h.prototype.getSkypeToken=function(){return u(this,void 0,void 0,function(){var C,v,S;return g(this,function(P){switch(P.label){case 0:C=this.startBackoff(),P.label=1;case 1:return P.trys.push([1,3,,8]),this.logger.info("[RegistrarClient] Asking for a new skypetoken"),[4,this.skypeTokenProvider(!0)];case 2:return v=P.sent(),this.stopBackoff(C),[2,v];case 3:P.sent(),P.label=4;case 4:return P.trys.push([4,6,,7]),[4,C.delay("Fetching a new skypetoken")];case 5:return P.sent(),[3,8];case 6:throw S=P.sent(),this.stopBackoff(C),S;case 7:return[3,8];case 8:return[3,1];case 9:return[2]}})})},h.prototype.callRegistrar=function(C,v){return u(this,void 0,void 0,function(){var w,S,P,k,O,V,U,B,H,W,te,$,R;return g(this,function(r){switch(r.label){case 0:return w=this.startBackoff(),[4,this.skypeTokenProvider(!1)];case 1:S=r.sent(),this.setSkypeTokenHeader(C,S),P=new M.Timespan,r.label=2;case 2:k=void 0,r.label=3;case 3:return r.trys.push([3,8,13,14]),O=C.clone(),[4,this.fetchWithTimeout(O)];case 4:return 401!==(k=r.sent()).status?[3,6]:(V=this.setSkypeTokenHeader,U=[C],[4,this.getSkypeToken()]);case 5:return V.apply(this,U.concat([r.sent()])),[3,20];case 6:if(k.status>=500&&k.status<600)throw new Error("Fetch for '"+C.url+"' failed with "+k.status+" "+k.statusText);r.label=7;case 7:return[3,14];case 8:B=r.sent(),this.logger.error("[RegistrarClient] Request failed with "+B),r.label=9;case 9:return r.trys.push([9,11,,12]),[4,w.delay("Registrar call retry")];case 10:return r.sent(),[3,20];case 11:throw H=r.sent(),this.logger.error("[RegistrarClient] Request cancelled"),this.stopBackoff(w),H;case 12:return[3,14];case 13:return this.sendTelemetryEvent(v,C,k,P),[7];case 14:return this.stopBackoff(w),k.ok?[2,k]:[3,15];case 15:W=void 0,r.label=16;case 16:return r.trys.push([16,18,,19]),$=(te=JSON).stringify,[4,k.json()];case 17:return W=$.apply(te,[r.sent()]),[3,19];case 18:return r.sent(),W="no details",[3,19];case 19:throw R="Fetch for '"+C.url+"' failed with "+k.status+" "+k.statusText+" ("+W+", MS-CV: "+k.headers.get("MS-CV")+")",this.logger.error("[RegistrarClient] "+R),new Error(R);case 20:return[3,2];case 21:return[2]}})})},h.prototype.setSkypeTokenHeader=function(C,v){C.headers.set("X-Skypetoken",v)},h.prototype.fetchWithTimeout=function(C){var v=this;return new Promise(function(w,S){fetch(C).then(w).catch(S),0!==v.options.requestTimeoutMs&&setTimeout(S,v.options.requestTimeoutMs,new Error("Fetch for '"+C.url+"' timed out"))})},h.prototype.sendTelemetryEvent=function(C,v,w,S){void 0!==this.eventLogger&&this.eventLogger.logEvent({name:C,properties:{url:{value:v.url},result_code:{value:void 0!==w?w.status:0},begin_timestamp:{value:S.startTime},elapsed:{value:S.duration}}})},h}();p.RegistrarClient=y,p.createRegistrarClient=function(h,C,v){return new y(h,C,v)}}])});unwrapExports(tsregistrar);var tstrouter=createCommonjsModule(function(module,exports){var L;L=function(__WEBPACK_EXTERNAL_MODULE_20__){return function(Y){function L(p){if(T[p])return T[p].exports;var N=T[p]={i:p,l:!1,exports:{}};return Y[p].call(N.exports,N,N.exports,L),N.l=!0,N.exports}var T={};return L.m=Y,L.c=T,L.i=function(p){return p},L.d=function(p,N,m){L.o(p,N)||Object.defineProperty(p,N,{configurable:!1,enumerable:!0,get:m})},L.n=function(p){var N=p&&p.__esModule?function(){return p.default}:function(){return p};return L.d(N,"a",N),N},L.o=function(p,N){return Object.prototype.hasOwnProperty.call(p,N)},L.p="",L(L.s=19)}([function(Y,L,T){Object.defineProperty(L,"__esModule",{value:!0});var p=function(){function N(m,x){this.name=m,this.logger=x}return N.prototype.debug=function(m){this.logger.debug("["+this.name+"] "+m)},N.prototype.info=function(m){this.logger.info("["+this.name+"] "+m)},N.prototype.warn=function(m){this.logger.warn("["+this.name+"] "+m)},N.prototype.error=function(m){this.logger.error("["+this.name+"] "+m)},N}();L.Logger=p},function(Y,L,T){Object.defineProperty(L,"__esModule",{value:!0}),L.constants={TROUTER_INIT:"trouterinit",TROUTER_READY_EVENT:"trouterReadyEvent",TROUTER_READY_TIMEOUT:"trouterReadyTimeout",TROUTER_TOKEN_REQUEST:"trouterTokenRequest",TROUTER_TOKEN_GET_SUCCEEDED:"trouterTokenGetSucceeded",TROUTER_TOKEN_GET_FAILED:"trouterTokenGetFailed",TROUTER_RECONNECTING:"trouterReconnecting",RENEWAL:"renewal",NEW_CONNECTION:"newConnection",ENDPOINT_REGISTRATION_FAILED:"endpointRegistrationFailed"},L.CLIENT_VERSION="2021.32.00.1",L.HANDLED_MESSAGE_ACK=200,L.UNHANDLED_MESSAGE_ACK=404,L.FAILED_MESSAGE_ACK=500},function(Y,L,T){var N;Object.defineProperty(L,"__esModule",{value:!0}),(N=L.UserActivityState||(L.UserActivityState={}))[N.Unknown=0]="Unknown",N[N.Active=1]="Active",N[N.Inactive=2]="Inactive",L.HttpHeaders=function(){},function(N){N[N.Unknown=0]="Unknown",N[N.Connected=2]="Connected",N[N.Disconnected=3]="Disconnected",N[N.Switching=9]="Switching"}(L.TrouterState||(L.TrouterState={}))},function(Y,L,T){Object.defineProperty(L,"__esModule",{value:!0}),L.toJson=function(g){try{return JSON.stringify(g)}catch(M){return"Unable to serialize object of type "+typeof g}},L.calculateTtlInSec=function(g){var M=Math.round((new Date).getTime()/1e3);return void 0!==g&&g>M?g-M:0},L.calculateExpireTsInSec=function(g){return Math.round((new Date).getTime()/1e3)+g};var x=function(){function g(M){this.base=void 0!==M?M:this.createCorrelationVectorBase(),this.extension=0}return g.extend=function(M){return new g(M)},g.prototype.increase=function(){this.extension++},g.prototype.value=function(){return this.base+"."+this.extension},g.prototype.createCorrelationVectorBase=function(){for(var M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0987654321/+",A="AQgw",I="",y=0;y<21;y++)I+=M.charAt(Math.floor(Math.random()*M.length));return I+A.charAt(Math.floor(Math.random()*A.length))},g}();L.CorrelationVector=x;var u=function(){function g(){this.start=Date.now()}return Object.defineProperty(g.prototype,"duration",{get:function(){return Date.now()-this.start},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"startTime",{get:function(){return this.start},enumerable:!0,configurable:!0}),g.prototype.reset=function(){this.start=Date.now()},g}();L.Timespan=u},function(Y,L){var T;T=function(){return this}();try{T=T||Function("return this")()||(0,eval)("this")}catch(p){"object"==typeof window&&(T=window)}Y.exports=T},function(Y,L,T){Object.defineProperty(L,"__esModule",{value:!0});var m,p=T(3),N=function(){function m(x,u,g,M,A,I,y){this.connectionId=x,this.connectedClientId=u,this.domId=g,this.unsecureUrl=M,this.url=A,this.c2cUrlBase=I,this.expirationTsSec=y}return m.prototype.getRemainingTtlInSec=function(){return p.calculateTtlInSec(this.expirationTsSec)},m}();L.ServerState=N,(m=L.UserActivityEventReason||(L.UserActivityEventReason={}))[m.Unknown=0]="Unknown",m[m.Modified=1]="Modified",m[m.Snapshot=2]="Snapshot",m[m.Connected=3]="Connected"},function(Y,L,T){Object.defineProperty(L,"__esModule",{value:!0});var p=T(1),N=function(){function m(x){this.logger=x,this.messageHandlers=[]}return m.prototype.register=function(x){if(this.messageHandlers.some(function(u){return u===x}))throw new Error("Registering the same handler twice is not allowed");this.messageHandlers.push(x)},m.prototype.clear=function(){this.logger.debug("Clearing message handlers"),this.messageHandlers=[]},m.prototype.active=function(){return this.messageHandlers.length>0},m.prototype.handleMessage=function(x){for(var u={resultCode:p.UNHANDLED_MESSAGE_ACK,isHandled:!1},g=0,M=this.messageHandlers;g<M.length;g++){var I=this.safeExecuteHandle(M[g],x);if(void 0!==I&&(void 0===I.isHandled||I.isHandled))return void 0===I.resultCode&&(I.resultCode=p.HANDLED_MESSAGE_ACK),I}return u},m.prototype.safeExecuteHandle=function(x,u){try{return x.handleMessage(u)}catch(g){return void this.logger.warn("A trouter message handler is throwing exceptions. exception: "+g)}},m}();L.MessageHandlerRegistry=N},function(Y,L,T){var N=this&&this.__awaiter||function(x,u,g,M){return new(g||(g=Promise))(function(A,I){function y(v){try{C(M.next(v))}catch(w){I(w)}}function h(v){try{C(M.throw(v))}catch(w){I(w)}}function C(v){v.done?A(v.value):new g(function(w){w(v.value)}).then(y,h)}C((M=M.apply(x,u||[])).next())})},m=this&&this.__generator||function(x,u){function g(v){return function(w){return function(v){if(A)throw new TypeError("Generator is already executing.");for(;C;)try{if(A=1,I&&(y=2&v[0]?I.return:v[0]?I.throw||((y=I.return)&&y.call(I),0):I.next)&&!(y=y.call(I,v[1])).done)return y;switch(I=0,y&&(v=[2&v[0],y.value]),v[0]){case 0:case 1:y=v;break;case 4:return C.label++,{value:v[1],done:!1};case 5:C.label++,I=v[1],v=[0];continue;case 7:v=C.ops.pop(),C.trys.pop();continue;default:if(!(y=(y=C.trys).length>0&&y[y.length-1])&&(6===v[0]||2===v[0])){C=0;continue}if(3===v[0]&&(!y||v[1]>y[0]&&v[1]<y[3])){C.label=v[1];break}if(6===v[0]&&C.label<y[1]){C.label=y[1],y=v;break}if(y&&C.label<y[2]){C.label=y[2],C.ops.push(v);break}y[2]&&C.ops.pop(),C.trys.pop();continue}v=u.call(x,C)}catch(w){v=[6,w],I=0}finally{A=y=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([v,w])}}var A,I,y,h,C={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return h={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h};Object.defineProperty(L,"__esModule",{value:!0}),L.addCacheAsBackupTo=function(x){var u,g=this;return function(M){return N(g,void 0,void 0,function(){return m(this,function(A){return M&&(u=void 0),[2,new Promise(function(I,y){x(M).then(function(h){u=h,I(h)}).catch(function(h){void 0!==u&&u.length>0&&I(u),y(h)})})]})})}}},function(Y,L,T){var p=this&&this.__awaiter||function(y,h,C,v){return new(C||(C=Promise))(function(w,S){function P(V){try{O(v.next(V))}catch(U){S(U)}}function k(V){try{O(v.throw(V))}catch(U){S(U)}}function O(V){V.done?w(V.value):new C(function(U){U(V.value)}).then(P,k)}O((v=v.apply(y,h||[])).next())})},N=this&&this.__generator||function(y,h){function C(V){return function(U){return function(V){if(w)throw new TypeError("Generator is already executing.");for(;O;)try{if(w=1,S&&(P=2&V[0]?S.return:V[0]?S.throw||((P=S.return)&&P.call(S),0):S.next)&&!(P=P.call(S,V[1])).done)return P;switch(S=0,P&&(V=[2&V[0],P.value]),V[0]){case 0:case 1:P=V;break;case 4:return O.label++,{value:V[1],done:!1};case 5:O.label++,S=V[1],V=[0];continue;case 7:V=O.ops.pop(),O.trys.pop();continue;default:if(!(P=(P=O.trys).length>0&&P[P.length-1])&&(6===V[0]||2===V[0])){O=0;continue}if(3===V[0]&&(!P||V[1]>P[0]&&V[1]<P[3])){O.label=V[1];break}if(6===V[0]&&O.label<P[1]){O.label=P[1],P=V;break}if(P&&O.label<P[2]){O.label=P[2],O.ops.push(V);break}P[2]&&O.ops.pop(),O.trys.pop();continue}V=h.call(y,O)}catch(U){V=[6,U],S=0}finally{w=P=0}if(5&V[0])throw V[1];return{value:V[0]?V[1]:void 0,done:!0}}([V,U])}}var w,S,P,k,O={label:0,sent:function(){if(1&P[0])throw P[1];return P[1]},trys:[],ops:[]};return k={next:C(0),throw:C(1),return:C(2)},"function"==typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k};Object.defineProperty(L,"__esModule",{value:!0});var m=T(3),x=T(2),u=T(0),g=T(16),M=T(18),A=function(){function y(h,C){this.state=h,this.correlationVector=void 0!==C?C:m.CorrelationVector.extend()}return y.prototype.getStateString=function(){switch(this.state){case x.UserActivityState.Active:return"active";case x.UserActivityState.Inactive:return"inactive";case x.UserActivityState.Unknown:return"unknown";default:return"undefined"}},y.prototype.toEventObject=function(){return{state:this.getStateString(),cv:this.correlationVector.value()}},y.prototype.toEventJSON=function(){return m.toJson(this.toEventObject())},y}();L.UserActivityObject=A;var I=function(){function y(h,C,v,w){this.logFunc=h,this.options=C,this.tokenProvider=v,this.listener=w,this.logger=new u.Logger("Manager",h),this.logger.info("Created TrouterManager with options "+m.toJson(this.options)),this.fsm=new M.TrouterManagerFsm(h,this),this.baseEndpointUrl="",this.processedMessageLoss={},this.userActivityObject=new A(x.UserActivityState.Unknown)}return y.prototype.start=function(){this.fsm.start()},y.prototype.stop=function(h){this.fsm.stop(h)},y.prototype.configure=function(h){this.options=h,void 0!==this.firstConnection&&this.firstConnection.configure(h),void 0!==this.secondConnection&&this.secondConnection.configure(h),this.logger.info("Reconfigured TrouterManager with options "+m.toJson(this.options))},y.prototype.checkConnection=function(h){void 0!==this.firstConnection&&this.firstConnection.checkConnection(h),void 0!==this.secondConnection&&this.secondConnection.checkConnection(h)},y.prototype.resendRegistration=function(){return p(this,void 0,void 0,function(){return N(this,function(h){return void 0!==this.secondConnection?(this.logger.info("Resending registration on the second/new connection"),[2,this.secondConnection.resendRegistration()]):void 0!==this.firstConnection?(this.logger.info("Resending registration on the first/current connection"),[2,this.firstConnection.resendRegistration()]):(this.logger.info("No connection to resend registration on, will be done upon (re)connect"),[2])})})},y.prototype.getServerState=function(){if(void 0!==this.firstConnection)return this.firstConnection.getServerState()},y.prototype.getState=function(){return this.fsm.getState()},y.prototype.startFirstConnection=function(){var h=new g.TrouterConnection(this.logFunc,this.options,this,this.tokenProvider,this.userActivityObject);this.firstConnection=h,this.getConnectionCache().then(function(C){h.start(C)}).catch()},y.prototype.startSecondConnection=function(){this.secondConnection=new g.TrouterConnection(this.logFunc,this.options,this,this.tokenProvider,this.userActivityObject),this.secondConnection.start()},y.prototype.stopFirstConnection=function(h){void 0!==this.firstConnection&&(this.firstConnection.stop(h),this.storedFirstConnection=this.firstConnection,this.firstConnection=void 0)},y.prototype.stopSecondConnection=function(h){void 0!==this.secondConnection&&(this.secondConnection.stop(h),this.secondConnection=void 0)},y.prototype.stopSecondConnectionDelayed=function(){if(void 0!==this.secondConnection){var h=this.secondConnection;this.secondConnection=void 0,this.logger.info("Closing an inactive connection in "+Math.round(this.options.lingeringConnectionDelayMs/1e3)+"s"),setTimeout(function(){h.stop(!0)},this.options.lingeringConnectionDelayMs)}},y.prototype.forceStopLingeringConnection=function(){this.storedFirstConnection&&(this.storedFirstConnection.stop(!1),this.storedFirstConnection=void 0)},y.prototype.switchConnections=function(){var h=this.firstConnection;this.firstConnection=this.secondConnection,this.secondConnection=h},y.prototype.doesSecondConnectionExist=function(){return void 0!==this.secondConnection},y.prototype.dispatchConnected=function(){if(void 0!==this.firstConnection){var h=this.firstConnection.getServerState(),C="/"===h.url.slice(-1)?h.url.slice(0,-1):h.url,v={baseEndpointUrl:C,newEndpointUrl:C!==this.baseEndpointUrl,c2cUrlBase:h.c2cUrlBase,clientId:h.connectedClientId,connectionId:h.connectionId,connectionTtlSec:h.getRemainingTtlInSec()};this.baseEndpointUrl=C,this.listener.onTrouterConnected(h.url,v)}},y.prototype.dispatchReconnecting=function(){this.listener.onTrouterDisconnected&&this.listener.onTrouterDisconnected()},y.prototype.dispatchStopped=function(){this.listener.onTrouterDisconnected&&this.listener.onTrouterDisconnected()},y.prototype.dispatchRegistrationState=function(h){this.options.registrationStateCallback&&this.options.registrationStateCallback(h)},y.prototype.onDownstreamRequest=function(h,C,v){var S={id:C.id,status:0,headers:{},body:"",send:function(){return S.status<=100||S.status>=999?3:(v.writeHead(S.status,S.headers),v.end(S.body))}};this.listener.onTrouterRequest({id:C.id,method:C.method,path:"/"+C.shortUrl,body:C.body,headers:C.headers},S)},y.prototype.onConnected=function(h){this.fsm.onConnected(h===this.firstConnection)},y.prototype.onRegistered=function(h){this.fsm.onRegistered(h===this.firstConnection)},y.prototype.onUnregistered=function(h){this.fsm.onUnregistered(h===this.firstConnection||h===this.storedFirstConnection)},y.prototype.onReconnecting=function(h){this.fsm.onReconnecting(h===this.firstConnection)},y.prototype.onReconnectIsRequired=function(h){this.fsm.onReconnectionRequired(h===this.firstConnection)},y.prototype.onDisconnected=function(h){this.fsm.onDisconnected(h===this.storedFirstConnection),this.storedFirstConnection=void 0},y.prototype.onUserActivityStateAccepted=function(h){this.listener.onTrouterUserActivityStateAccepted&&this.listener.onTrouterUserActivityStateAccepted(h)},y.prototype.onConnectionParametersUpdated=function(h){this.setConnectionCache(h)},y.prototype.setUserActivityState=function(h,C){return this.userActivityObject=new A(h,m.CorrelationVector.extend(C)),void 0!==this.secondConnection?(this.logger.info("Setting user activity "+this.userActivityObject.toEventJSON()+" on the second/new connection"),void this.secondConnection.setUserActivityState(this.userActivityObject)):void 0!==this.firstConnection?(this.logger.info("Setting user activity "+this.userActivityObject.toEventJSON()+" on the first/current connection"),void this.firstConnection.setUserActivityState(this.userActivityObject)):void 0},y.prototype.onTrouterMessageLost=function(h){var C=this;if(this.listener.onTrouterMessageLoss)if(h&&h.length){var v=h.filter(function(S){return void 0!==C.processedMessageLoss[S.tag+"-"+S.etag]});if(v.length&&(this.logger.warn("onTrouterMessageLoss - removing duplicates and sending event to server"),this.sendProcessedDroppedIndicators(v),!(h=h.filter(function(S){return void 0===C.processedMessageLoss[S.tag+"-"+S.etag]})).length))return void this.logger.warn("onTrouterMessageLoss - All the data are duplicated");if(!this.listener.onTrouterMessageLoss(h.map(function(S){return S.tag})))return void this.logger.warn("onTrouterMessageLoss - flow tags have not been processed by listeners");h.forEach(function(S){C.processedMessageLoss[S.tag+"-"+S.etag]=""}),this.sendProcessedDroppedIndicators(h)}else this.logger.warn("onTrouterMessageLoss - no flow tags have been provided")},y.prototype.getConnectionCache=function(){var h=this;return this.options.connectionCache?(this.logger.debug("Querying host's connection cache"),this.options.connectionCache.onGetTrouterConnectionCache().then(function(C){return C?JSON.parse(C):void 0}).catch(function(C){return h.logger.warn("Invalid connection cache content provided: "+C),h.connectionCache})):Promise.resolve(this.connectionCache)},y.prototype.setConnectionCache=function(h){if(this.connectionCache=h,this.options.connectionCache)try{this.options.connectionCache.onSetTrouterConnectionCache(JSON.stringify(h))}catch(C){this.logger.warn("Error setting external connection cache: "+C)}},y.prototype.sendProcessedDroppedIndicators=function(h){return void 0!==this.firstConnection?void this.firstConnection.sendProcessedDroppedIndicators(h):void 0!==this.secondConnection?void this.secondConnection.sendProcessedDroppedIndicators(h):void 0},y}();L.TrouterManager=I},function(Y,L,T){Object.defineProperty(L,"__esModule",{value:!0});var p=function(){function N(m){this.logger=m}return N.prototype.getPromise=function(){var m=this;return void 0!==this.url?(this.logger.debug("[TrouterUrlPromise] returning previously resolved url: "+this.url),Promise.resolve(this.url)):(void 0===this.pendingPromise?(this.logger.debug("[TrouterUrlPromise] creating and returning promise"),this.pendingPromise=new Promise(function(x,u){m.pendingPromiseResolveRef=x,m.pendingPromiseRejectRef=u})):this.logger.debug("[TrouterUrlPromise] returning existing promise"),this.pendingPromise)},N.prototype.resolveUrl=function(m){this.url=m,this.logger.debug("[TrouterUrlPromise] got url: "+this.url);var x=this.pendingPromiseResolveRef;this.pendingPromise=void 0,this.pendingPromiseResolveRef=void 0,this.pendingPromiseRejectRef=void 0,void 0!==x&&(this.logger.debug("[TrouterUrlPromise] resolving promise"),x(m))},N.prototype.rejectUrl=function(m){this.logger.debug("[TrouterUrlPromise] aborting");var x=this.pendingPromiseRejectRef;this.url=void 0,this.pendingPromise=void 0,this.pendingPromiseResolveRef=void 0,this.pendingPromiseRejectRef=void 0,void 0!==x&&(this.logger.debug("[TrouterUrlPromise] rejecting promise"),x(m))},N.prototype.resetUrl=function(){this.logger.debug("[TrouterUrlPromise] resetting url"),this.url=void 0},N}();L.TrouterUrlPromise=p},function(module,exports,__nested_webpack_require_43418__){(function(global,module){var Y,L,T;Y=module.exports,L=void 0===global?window:global,T=Y,T.version="0.9.6",T.protocol=1,T.transports=[],T.j=[],T.sockets={},T.connect=function(p,N){var m,x,u=T.util.parseUri(p);L&&L.location&&(u.protocol=u.protocol||L.location.protocol.slice(0,-1),u.host=u.host||(L.document?L.document.domain:L.location.hostname),u.port=u.port||L.location.port),m=T.util.uniqueUri(u);var g={host:u.host,secure:"https"==u.protocol,port:u.port||("https"==u.protocol?443:80),query:u.query||""};return T.util.merge(g,N),!g["force new connection"]&&T.sockets[m]||(x=new T.Socket(g)),!g["force new connection"]&&x&&(T.sockets[m]=x),(x=x||T.sockets[m]).of(u.path.length>1?u.path:"")};var io=module.exports;(function(Y,L){var T=Y.util={},p=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,N=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];T.parseUri=function(x){for(var u=p.exec(x||""),g={},M=14;M--;)g[N[M]]=u[M]||"";return g},T.uniqueUri=function(x){var u=x.protocol,g=x.host,M=x.port;return"document"in L?(g=g||document.domain,M=M||("https"==u&&"https:"!==document.location.protocol?443:document.location.port)):(g=g||"localhost",M||"https"!=u||(M=443)),(u||"http")+"://"+g+":"+(M||80)},T.query=function(x,u){var g=T.chunkQuery(x||""),M=[];for(var A in T.merge(g,T.chunkQuery(u||"")),g)g.hasOwnProperty(A)&&M.push(A+"="+g[A]);return M.length?"?"+M.join("&"):""},T.chunkQuery=function(x){for(var u,g={},M=x.split("&"),A=0,I=M.length;A<I;++A)(u=M[A].split("="))[0]&&(g[u[0]]=u[1]);return g};var m=!1;T.load=function(x){if("document"in L&&"complete"===document.readyState||m)return x();T.on(L,"load",x,!1)},T.on=function(x,u,g,M){x.attachEvent?x.attachEvent("on"+u,g):x.addEventListener&&x.addEventListener(u,g,M)},T.request=function(x){if(x&&"undefined"!=typeof XDomainRequest)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!x||T.ua.hasCORS))return new XMLHttpRequest;if(!x)try{return new(window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(u){}return null},"undefined"!=typeof window&&T.load(function(){m=!0}),T.defer=function(x){if(!T.ua.webkit||"undefined"!=typeof importScripts)return x();T.load(function(){setTimeout(x,100)})},T.merge=function(x,u,g,M){var A,I=M||[],y=void 0===g?2:g;for(A in u)u.hasOwnProperty(A)&&T.indexOf(I,A)<0&&("object"==typeof x[A]&&y?T.merge(x[A],u[A],y-1,I):(x[A]=u[A],I.push(u[A])));return x},T.mixin=function(x,u){T.merge(x.prototype,u.prototype)},T.inherit=function(x,u){function g(){}g.prototype=u.prototype,x.prototype=new g},T.isArray=Array.isArray||function(x){return"[object Array]"===Object.prototype.toString.call(x)},T.intersect=function(x,u){for(var g=[],M=x.length>u.length?x:u,A=x.length>u.length?u:x,I=0,y=A.length;I<y;I++)~T.indexOf(M,A[I])&&g.push(A[I]);return g},T.indexOf=function(x,u,g){var M=x.length;for(g=g<0?g+M<0?0:g+M:g||0;g<M&&x[g]!==u;g++);return M<=g?-1:g},T.toArray=function(x){for(var u=[],g=0,M=x.length;g<M;g++)u.push(x[g]);return u},T.ua={},T.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var x=new XMLHttpRequest}catch(u){return!1}return null!=x.withCredentials}(),T.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent)})(void 0!==io?io:module.exports,void 0===global?window:global),function(Y,L){function T(){}Y.EventEmitter=T,T.prototype.addListener=T.prototype.on=function(p,N){return this.$events||(this.$events={}),this.$events[p]?L.util.isArray(this.$events[p])?this.$events[p].push(N):this.$events[p]=[this.$events[p],N]:this.$events[p]=N,this},T.prototype.once=function(p,N){function m(){x.removeListener(p,m),N.apply(this,arguments)}var x=this;return m.listener=N,this.on(p,m),this},T.prototype.removeListener=function(p,N){if(this.$events&&this.$events[p]){var m=this.$events[p];if(L.util.isArray(m)){for(var x=-1,u=0,g=m.length;u<g;u++)if(m[u]===N||m[u].listener&&m[u].listener===N){x=u;break}if(x<0)return this;m.splice(x,1),m.length||delete this.$events[p]}else(m===N||m.listener&&m.listener===N)&&delete this.$events[p]}return this},T.prototype.removeAllListeners=function(p){return this.$events&&this.$events[p]&&(this.$events[p]=null),this},T.prototype.listeners=function(p){return this.$events||(this.$events={}),this.$events[p]||(this.$events[p]=[]),L.util.isArray(this.$events[p])||(this.$events[p]=[this.$events[p]]),this.$events[p]},T.prototype.emit=function(p){if(!this.$events)return!1;var N=this.$events[p];if(!N)return!1;var m=Array.prototype.slice.call(arguments,1);if("function"==typeof N)N.apply(this,m);else{if(!L.util.isArray(N))return!1;for(var x=N.slice(),u=0,g=x.length;u<g;u++)x[u].apply(this,m)}return!0}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),function(exports,nativeJSON){function f(Y){return Y<10?"0"+Y:Y}function date(Y,L){return isFinite(Y.valueOf())?Y.getUTCFullYear()+"-"+f(Y.getUTCMonth()+1)+"-"+f(Y.getUTCDate())+"T"+f(Y.getUTCHours())+":"+f(Y.getUTCMinutes())+":"+f(Y.getUTCSeconds())+"Z":null}function quote(Y){return escapable.lastIndex=0,escapable.test(Y)?'"'+Y.replace(escapable,function(L){var T=meta[L];return"string"==typeof T?T:"\\u"+("0000"+L.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+Y+'"'}function str(Y,L){var T,p,N,m,x,u=gap,g=L[Y];switch(g instanceof Date&&(g=date(Y)),"function"==typeof rep&&(g=rep.call(L,Y,g)),typeof g){case"string":return quote(g);case"number":return isFinite(g)?String(g):"null";case"boolean":case"null":return String(g);case"object":if(!g)return"null";if(gap+=indent,x=[],"[object Array]"===Object.prototype.toString.apply(g)){for(m=g.length,T=0;T<m;T+=1)x[T]=str(T,g)||"null";return N=0===x.length?"[]":gap?"[\n"+gap+x.join(",\n"+gap)+"\n"+u+"]":"["+x.join(",")+"]",gap=u,N}if(rep&&"object"==typeof rep)for(m=rep.length,T=0;T<m;T+=1)"string"==typeof rep[T]&&(N=str(p=rep[T],g))&&x.push(quote(p)+(gap?": ":":")+N);else for(p in g)Object.prototype.hasOwnProperty.call(g,p)&&(N=str(p,g))&&x.push(quote(p)+(gap?": ":":")+N);return N=0===x.length?"{}":gap?"{\n"+gap+x.join(",\n"+gap)+"\n"+u+"}":"{"+x.join(",")+"}",gap=u,N}}if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={},cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;JSON.stringify=function(Y,L,T){var p;if(gap="",indent="","number"==typeof T)for(p=0;p<T;p+=1)indent+=" ";else"string"==typeof T&&(indent=T);if(rep=L,L&&"function"!=typeof L&&("object"!=typeof L||"number"!=typeof L.length))throw new Error("JSON.stringify");return str("",{"":Y})},JSON.parse=function(text,reviver){function walk(Y,L){var T,p,N=Y[L];if(N&&"object"==typeof N)for(T in N)Object.prototype.hasOwnProperty.call(N,T)&&(void 0!==(p=walk(N,T))?N[T]=p:delete N[T]);return reviver.call(Y,L,N)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(Y){return"\\u"+("0000"+Y.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}(void 0!==io?io:module.exports,"undefined"!=typeof JSON?JSON:void 0),function(Y,L){var T=Y.parser={},p=T.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],N=T.reasons=["transport not supported","client not handshaken","unauthorized"],m=T.advice=["reconnect"],x=L.JSON,u=L.util.indexOf;T.encodePacket=function(M){var A=u(p,M.type),I=M.id||"",y=M.endpoint||"",h=M.ack,C=null;switch(M.type){case"error":var v=M.reason?u(N,M.reason):"",w=M.advice?u(m,M.advice):"";""===v&&""===w||(C=v+(""!==w?"+"+w:""));break;case"message":""!==M.data&&(C=M.data);break;case"event":var S={name:M.name};M.args&&M.args.length&&(S.args=M.args),C=x.stringify(S);break;case"json":C=x.stringify(M.data);break;case"connect":M.qs&&(C=M.qs);break;case"ack":C=M.ackId+(M.args&&M.args.length?"+"+x.stringify(M.args):"")}var P=[A,I+("data"==h?"+":""),y];return null!=C&&P.push(C),P.join(":")},T.encodePayload=function(M){var A="";if(1==M.length)return M[0];for(var I=0,y=M.length;I<y;I++)A+="\ufffd"+M[I].length+"\ufffd"+M[I];return A};var g=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;T.decodePacket=function(M){if(!(A=M.match(g)))return{};var I=A[2]||"",y=(M=A[5]||"",{type:p[A[1]],endpoint:A[4]||""});switch(I&&(y.id=I,y.ack=!A[3]||"data"),y.type){case"error":var A=M.split("+");y.reason=N[A[0]]||"",y.advice=m[A[1]]||"";break;case"message":y.data=M||"";break;case"event":try{var h=x.parse(M);y.name=h.name,y.args=h.args}catch(v){}y.args=y.args||[];break;case"json":try{y.data=x.parse(M)}catch(v){}break;case"connect":y.qs=M||"";break;case"ack":if((A=M.match(/^([0-9]+)(\+)?(.*)/))&&(y.ackId=A[1],y.args=[],A[3]))try{y.args=A[3]?x.parse(A[3]):[]}catch(v){}break;case"disconnect":y.reason=M}return y},T.decodePayload=function(M){if("\ufffd"==M.charAt(0)){for(var A=[],I=1,y="";I<M.length;I++)"\ufffd"==M.charAt(I)?(A.push(T.decodePacket(M.substr(I+1).substr(0,y))),I+=Number(y)+1,y=""):y+=M.charAt(I);return A}return[T.decodePacket(M)]}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),function(Y,L){function T(p,N){this.socket=p,this.sessid=N,this.connectErrorCallback=void 0,this.isOpened=!1}Y.Transport=T,L.util.mixin(T,L.EventEmitter),T.prototype.onData=function(p){if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),""!==p){var N=L.parser.decodePayload(p);if(N&&N.length)for(var m=0,x=N.length;m<x;m++)this.onPacket(N[m])}return this},T.prototype.onPacket=function(p){return this.socket.setHeartbeatTimeout(),"heartbeat"==p.type?this.onHeartbeat():("connect"==p.type&&""==p.endpoint&&this.onConnect(),"error"==p.type&&"reconnect"==p.advice&&(this.isOpened=!1),this.socket.onPacket(p),this)},T.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var p=this;this.closeTimeout=setTimeout(function(){p.onDisconnect()},this.socket.closeTimeout)}},T.prototype.onDisconnect=function(){return this.close&&this.isOpened&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},T.prototype.onConnect=function(){return this.socket.onConnect(),this.connectErrorCallback=void 0,this},T.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},T.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},T.prototype.packet=function(p){this.send(L.parser.encodePacket(p))},T.prototype.onHeartbeat=function(p){this.packet({type:"heartbeat"})},T.prototype.onOpen=function(){this.isOpened=!0,this.clearCloseTimeout(),this.socket.onOpen()},T.prototype.onClose=function(){this.isOpened=!1,this.socket.onClose(),this.onDisconnect()},T.prototype.prepareUrl=function(){var p=this.socket.options;return this.scheme()+"://"+p.host+":"+p.port+"/"+p.resource+"/"+L.protocol+"/"+this.name+"/"+this.sessid},T.prototype.ready=function(p,N){N.call(this)},T.prototype.clearEventHandlers=function(){return this}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),function(Y,L,T){function p(m){if(this.options={port:80,secure:!1,document:"document"in T&&document,resource:"socket.io",transports:L.transports.slice(),"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!0,"auto connect":!0,"flash policy port":10843},L.util.merge(this.options,m),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.disconnected=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||L.util.ua.hasCORS)){var x=this;L.util.on(T,"unload",function(){x.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function N(){}Y.Socket=p,L.util.mixin(p,L.EventEmitter),p.prototype.of=function(m){return this.namespaces[m]||(this.namespaces[m]=new L.SocketNamespace(this,m),""!==m&&this.namespaces[m].packet({type:"connect"})),this.namespaces[m]},p.prototype.publish=function(){var m;for(var x in this.emit.apply(this,arguments),this.namespaces)this.namespaces.hasOwnProperty(x)&&(m=this.of(x)).$emit.apply(m,arguments)},p.prototype.handshake=function(m){function x(h){h instanceof Error?u.onError(h.message):m.apply(null,h.split(":"))}var u=this,g=this.options;if(!u.disconnected){var M=["http"+(g.secure?"s":"")+":/",g.host+":"+g.port,g.resource,L.protocol,L.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!L.util.ua.hasCORS){var A=document.getElementsByTagName("script")[0],I=document.createElement("script");I.src=M+"&jsonp="+L.j.length,A.parentNode.insertBefore(I,A),L.j.push(function(h){x(h),I.parentNode.removeChild(I)})}else{var y=L.util.request();y.open("GET",M,!0),y.withCredentials=!0,y.onreadystatechange=function(){4==y.readyState&&(y.onreadystatechange=N,200==y.status?x(y.responseText):!u.reconnecting&&u.onError(y.responseText))},y.send(null)}}},p.prototype.getTransport=function(m){for(var x,u=m||this.transports,g=0;x=u[g];g++)if(L.Transport[x]&&L.Transport[x].check(this)&&(!this.isXDomain()||L.Transport[x].xdomainCheck()))return new L.Transport[x](this,this.sessionid);return null},p.prototype.connect=function(m){if(this.connecting||this.disconnected)return this;var x=this;return this.handshake(function(u,g,M,A){function I(){if(!x.connected&&!x.disconnected)if(x.connecting=!1,clearTimeout(x.connectTimeoutTimer),x.options["try multiple transports"]){for(;x.remainingTransports.length>0&&x.remainingTransports.splice(0,1)[0]!=x.transport.name;);x.remainingTransports.length?y(x.remainingTransports):x.publish("connect_failed")}else x.publish("connect_failed")}function y(h){if(x.transport&&(x.transport.clearTimeouts(),x.transport.clearEventHandlers()),x.transport=x.getTransport(h),!x.transport||x.disconnected)return x.publish("connect_failed");x.transport.ready(x,function(){x.connecting=!0,x.publish("connecting",x.transport.name),x.transport.open(I),x.options["connect timeout"]&&(x.connectTimeoutTimer=setTimeout(function(){I()},x.options["connect timeout"]))})}x.sessionid=u,x.closeTimeout=1e3*M+2e3,x.heartbeatTimeout=1e3*g+2e3,x.transports=A?L.util.intersect(A.split(","),x.options.transports):x.options.transports,x.setHeartbeatTimeout(),x.remainingTransports=x.transports.slice(0),y(x.transports),x.once("connect",function(){clearTimeout(x.connectTimeoutTimer),m&&"function"==typeof m&&m()})}),this},p.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);var m=this;this.heartbeatTimeoutTimer=setTimeout(function(){m.transport.onClose()},this.heartbeatTimeout)},p.prototype.packet=function(m){return this.connected&&!this.doBuffer?this.transport.packet(m):this.buffer.push(m),this},p.prototype.setBuffer=function(m){this.doBuffer=m,!m&&this.connected&&this.buffer.length&&(this.transport.payload(this.buffer),this.buffer=[])},p.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this.disconnected=!0,this},p.prototype.disconnectSync=function(){L.util.request().open("GET",this.resource+"/"+L.protocol+"/"+this.sessionid,!0),this.onDisconnect("booted")},p.prototype.isXDomain=function(){return this.options.host!==T.location.hostname||this.options.port!=(T.location.port||("https:"==T.location.protocol?443:80))},p.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},p.prototype.onOpen=function(){this.open=!0},p.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},p.prototype.onPacket=function(m){this.of(m.endpoint).onPacket(m)},p.prototype.onError=function(m){m&&m.advice&&"reconnect"===m.advice&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",m&&m.reason?m.reason:m)},p.prototype.onDisconnect=function(m){var x=this.connected,u=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1,(x||u)&&(this.transport.close(),this.transport.clearTimeouts(),x&&(this.publish("disconnect",m),"booted"!=m&&this.options.reconnect&&!this.reconnecting&&this.reconnect()))},p.prototype.reconnect=function(){function m(){if(u.connected){for(var I in u.namespaces)u.namespaces.hasOwnProperty(I)&&""!==I&&u.namespaces[I].packet({type:"connect"});u.publish("reconnect",u.transport.name,u.reconnectionAttempts)}clearTimeout(u.reconnectionTimer),u.removeListener("connect_failed",x),u.removeListener("connect",x),u.reconnecting=!1,delete u.reconnectionAttempts,delete u.reconnectionDelay,delete u.reconnectionTimer,delete u.redoTransports,u.options["try multiple transports"]=M}function x(){if(u.reconnecting)return u.connected?m():u.connecting&&u.reconnecting?u.reconnectionTimer=setTimeout(x,1e3):void(u.reconnectionAttempts++>=g?u.redoTransports?(u.publish("reconnect_failed"),m()):(u.on("connect_failed",x),u.options["try multiple transports"]=!0,u.transport=u.getTransport(),u.redoTransports=!0,u.connect()):(u.reconnectionDelay<A&&(u.reconnectionDelay*=2),u.connect(),u.publish("reconnecting",u.reconnectionDelay,u.reconnectionAttempts),u.reconnectionTimer=setTimeout(x,u.reconnectionDelay)))}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var u=this,g=this.options["max reconnection attempts"],M=this.options["try multiple transports"],A=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(x,this.reconnectionDelay),this.on("connect",x)}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports,void 0===global?window:global),function(Y,L){function T(N,m){this.socket=N,this.name=m||"",this.flags={},this.json=new p(this,"json"),this.ackPackets=0,this.acks={}}function p(N,m){this.namespace=N,this.name=m}Y.SocketNamespace=T,L.util.mixin(T,L.EventEmitter),T.prototype.$emit=L.EventEmitter.prototype.emit,T.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},T.prototype.packet=function(N){return N.endpoint=this.name,this.socket.packet(N),this.flags={},this},T.prototype.send=function(N,m){var x={type:this.flags.json?"json":"message",data:N};return"function"==typeof m&&(x.id=++this.ackPackets,x.ack=!0,this.acks[x.id]=m),this.packet(x)},T.prototype.emit=function(N){var m=Array.prototype.slice.call(arguments,1),x=m[m.length-1],u={type:"event",name:N};return"function"==typeof x&&(u.id=++this.ackPackets,u.ack="data",this.acks[u.id]=x,m=m.slice(0,m.length-1)),u.args=m,this.packet(u)},T.prototype.disconnect=function(){return""===this.name?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},T.prototype.onPacket=function(N){function m(){x.packet({type:"ack",args:L.util.toArray(arguments),ackId:N.id})}var x=this;switch(N.type){case"connect":this.$emit("connect");break;case"disconnect":""===this.name?this.socket.onDisconnect(N.reason||"booted"):this.$emit("disconnect",N.reason||"");break;case"message":case"json":var u=["message",N.data];"data"==N.ack?u.push(m):N.ack&&this.packet({type:"ack",ackId:N.id}),this.$emit.apply(this,u);break;case"event":u=[N.name].concat(N.args),"data"==N.ack&&u.push(m),this.$emit.apply(this,u);break;case"ack":this.acks[N.ackId]&&(this.acks[N.ackId].apply(this,N.args),delete this.acks[N.ackId]);break;case"error":N.advice?this.socket.onError(N):this.$emit("unauthorized"==N.reason?"connect_failed":"error",N.reason)}},p.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},p.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),function(Y,L,T){function p(m){L.Transport.apply(this,arguments)}function N(){}Y.websocket=p,L.util.inherit(p,L.Transport),p.prototype.name="websocket",p.prototype.open=function(m){var x,u=L.util.query(this.socket.options.query),g=this;return this.connectErrorCallback=m,x||(x=T.MozWebSocket||T.WebSocket),this.websocket=new x(this.prepareUrl()+u),this.websocket.onopen=function(){g.onOpen(),g.socket.setBuffer(!1)},this.websocket.onmessage=function(M){g.onData(M.data)},this.websocket.onclose=function(){g.onClose(),g.socket.setBuffer(!0)},this.websocket.onerror=function(M){g.onError(M)},this},p.prototype.send=function(m){return this.websocket.send(m),this},p.prototype.payload=function(m){for(var x=0,u=m.length;x<u;x++)this.packet(m[x]);return this},p.prototype.close=function(){return this.websocket.close(),this},p.prototype.onError=function(m){void 0!==this.connectErrorCallback&&(this.connectErrorCallback(),this.connectErrorCallback=void 0),this.socket.onError(m)},p.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},p.check=function(){return"WebSocket"in T&&!("__addTask"in WebSocket)||"MozWebSocket"in T},p.xdomainCheck=function(){return!0},p.prototype.clearEventHandlers=function(){return this.websocket&&(this.websocket.onopen=this.websocket.onmessage=this.websocket.onclose=this.websocket.onerror=N),this},L.transports.push("websocket")}(void 0!==io?io.Transport:module.exports,void 0!==io?io:module.parent.exports,void 0===global?window:global),function(Y,L,T){function p(m){m&&(L.Transport.apply(this,arguments),this.sendBuffer=[])}function N(){}Y.XHR=p,L.util.inherit(p,L.Transport),p.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},p.prototype.payload=function(m){for(var x=[],u=0,g=m.length;u<g;u++)x.push(L.parser.encodePacket(m[u]));this.send(L.parser.encodePayload(x))},p.prototype.send=function(m){return this.post(m),this},p.prototype.post=function(m){var g=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),T.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=function(){this.onload=N,g.socket.setBuffer(!1)}:this.sendXHR.onreadystatechange=function(){4==this.readyState&&(this.onreadystatechange=N,g.posting=!1,200==this.status?(g.socket.setBuffer(!1),clearTimeout(g.sendXHR.ackTimeoutTimer)):g.onClose())},this.sendXHR.send(m),g.sendXHR.ackTimeoutTimer=setTimeout(function(){g.onClose()},g.socket.options.ackTimeoutMs)},p.prototype.close=function(){return this.onClose(),this},p.prototype.request=function(m){var x=L.util.request(this.socket.isXDomain()),u=L.util.query(this.socket.options.query,"t="+ +new Date);if(x.open(m||"GET",this.prepareUrl()+u,!0),"POST"==m)try{x.setRequestHeader?x.setRequestHeader("Content-type","text/plain;charset=UTF-8"):x.contentType="text/plain"}catch(g){}return x},p.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},p.check=function(m,x){try{var u=L.util.request(x),g=T.XDomainRequest&&u instanceof XDomainRequest;if(u&&(!g||(m&&m.options&&m.options.secure?"https:":"http:")==T.location.protocol))return!0}catch(I){}return!1},p.xdomainCheck=function(){return p.check(null,!0)},p.prototype.clearEventHandlers=function(){return this.sendXHR&&(this.sendXHR.onreadystatechange=this.sendXHR.onload=N),this}}(void 0!==io?io.Transport:module.exports,void 0!==io?io:module.parent.exports,void 0===global?window:global),function(Y,L,T){function p(){L.Transport.XHR.apply(this,arguments)}function N(){}Y["xhr-polling"]=p,L.util.inherit(p,L.Transport.XHR),L.util.merge(p,L.Transport.XHR),p.prototype.name="xhr-polling",p.prototype.open=function(m){return this.connectErrorCallback=m,L.Transport.XHR.prototype.open.call(this),!1},p.prototype.get=function(){if(this.isOpened){var g=this;this.xhr=this.request(),T.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=function(){g.connectErrorCallback=void 0,this.onload=N,this.onerror=N,g.onData(this.responseText),g.get()},this.xhr.onerror=function(){g.onClose(),void 0!==g.connectErrorCallback&&(g.connectErrorCallback(),g.connectErrorCallback=void 0)}):this.xhr.onreadystatechange=function(){4==this.readyState&&(this.onreadystatechange=N,200==this.status?(g.connectErrorCallback=void 0,g.onData(this.responseText),g.get()):(g.onClose(),void 0!==g.connectErrorCallback&&(g.connectErrorCallback(),g.connectErrorCallback=void 0)))},this.xhr.send(null)}},p.prototype.onClose=function(){if(L.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=N;try{this.xhr.abort()}catch(m){}this.xhr=null}},p.prototype.ready=function(m,x){var u=this;L.util.defer(function(){x.call(u)})},p.prototype.clearEventHandlers=function(){return L.Transport.XHR.prototype.clearEventHandlers.call(this),this.xhr&&(this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=N),this},L.transports.push("xhr-polling")}(void 0!==io?io.Transport:module.exports,void 0!==io?io:module.parent.exports,void 0===global?window:global),exports.io=io}).call(exports,__nested_webpack_require_43418__(4),__nested_webpack_require_43418__(13)(module))},function(Y,L,T){(function(p,N){Y.exports=function(){function x(_e){return"function"==typeof _e}function A(){var _e=setTimeout;return function(){return _e(I,1)}}function I(){for(var _e=0;_e<le;_e+=2)(0,re[_e])(re[_e+1]),re[_e]=void 0,re[_e+1]=void 0;le=0}function y(_e,Be){var Ae=arguments,Le=this,Ct=new this.constructor(C);void 0===Ct[Z]&&a(Ct);var We,He=Le._state;return He?(We=Ae[He-1],de(function(){return r(He,Ct,We,Le._result)})):te(Le,Ct,_e,Be),Ct}function h(_e){if(_e&&"object"==typeof _e&&_e.constructor===this)return _e;var Ae=new this(C);return U(Ae,_e),Ae}function C(){}function S(_e){try{return _e.then}catch(Be){return Ee.error=Be,Ee}}function V(_e,Be,Ae){Be.constructor===_e.constructor&&Ae===y&&Be.constructor.resolve===h?function(_e,Be){Be._state===Re?H(_e,Be._result):Be._state===Te?W(_e,Be._result):te(Be,void 0,function(Ae){return U(_e,Ae)},function(Ae){return W(_e,Ae)})}(_e,Be):Ae===Ee?W(_e,Ee.error):void 0===Ae?H(_e,Be):x(Ae)?function(_e,Be,Ae){de(function(Le){var Ct=!1,He=function(_e,Be,Ae,Le){try{_e.call(Be,Ae,Le)}catch(Ct){return Ct}}(Ae,Be,function(We){Ct||(Ct=!0,Be!==We?U(Le,We):H(Le,We))},function(We){Ct||(Ct=!0,W(Le,We))});!Ct&&He&&(Ct=!0,W(Le,He))},_e)}(_e,Be,Ae):H(_e,Be)}function U(_e,Be){_e===Be?W(_e,new TypeError("You cannot resolve a promise with itself")):function(_e){return"function"==typeof _e||"object"==typeof _e&&null!==_e}(Be)?V(_e,Be,S(Be)):H(_e,Be)}function B(_e){_e._onerror&&_e._onerror(_e._result),$(_e)}function H(_e,Be){_e._state===ue&&(_e._result=Be,_e._state=Re,0!==_e._subscribers.length&&de($,_e))}function W(_e,Be){_e._state===ue&&(_e._state=Te,_e._result=Be,de(B,_e))}function te(_e,Be,Ae,Le){var Ct=_e._subscribers,He=Ct.length;_e._onerror=null,Ct[He]=Be,Ct[He+Re]=Ae,Ct[He+Te]=Le,0===He&&_e._state&&de($,_e)}function $(_e){var Be=_e._subscribers,Ae=_e._state;if(0!==Be.length){for(var Le=void 0,Ct=void 0,He=_e._result,We=0;We<Be.length;We+=3)Ct=Be[We+Ae],(Le=Be[We])?r(Ae,Le,Ct,He):Ct(He);_e._subscribers.length=0}}function pe(){this.error=null}function r(_e,Be,Ae,Le){var Ct=x(Ae),He=void 0,We=void 0,Vt=void 0,qe=void 0;if(Ct){if((He=function(_e,Be){try{return _e(Be)}catch(Ae){return $e.error=Ae,$e}}(Ae,Le))===$e?(qe=!0,We=He.error,He=null):Vt=!0,Be===He)return void W(Be,new TypeError("A promises callback cannot return that same promise."))}else He=Le,Vt=!0;Be._state!==ue||(Ct&&Vt?U(Be,He):qe?W(Be,We):_e===Re?H(Be,He):_e===Te&&W(Be,He))}function a(_e){_e[Z]=Ne++,_e._state=void 0,_e._result=void 0,_e._subscribers=[]}function f(_e,Be){this._instanceConstructor=_e,this.promise=new _e(C),this.promise[Z]||a(this.promise),me(Be)?(this._input=Be,this.length=Be.length,this._remaining=Be.length,this._result=new Array(this.length),0===this.length?H(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&H(this.promise,this._result))):W(this.promise,new Error("Array Methods must be provided an Array"))}function q(_e){this[Z]=Ne++,this._result=this._state=void 0,this._subscribers=[],C!==_e&&("function"!=typeof _e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof q?function(_e,Be){try{Be(function(Ae){U(_e,Ae)},function(Ae){W(_e,Ae)})}catch(Ae){W(_e,Ae)}}(this,_e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}var _e,Be,Ae,me=Array.isArray?Array.isArray:function(_e){return"[object Array]"===Object.prototype.toString.call(_e)},le=0,fe=void 0,ae=void 0,de=function(_e,Be){re[le]=_e,re[le+1]=Be,2===(le+=2)&&(ae?ae(I):ee())},xe="undefined"!=typeof window?window:void 0,Ce=xe||{},oe=Ce.MutationObserver||Ce.WebKitMutationObserver,we="undefined"==typeof self&&void 0!==p&&"[object process]"==={}.toString.call(p),ye="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,re=new Array(1e3),ee=void 0;ee=we?function(){return p.nextTick(I)}:oe?(_e=0,Be=new oe(I),Ae=document.createTextNode(""),Be.observe(Ae,{characterData:!0}),function(){Ae.data=_e=++_e%2}):ye?function(){var _e=new MessageChannel;return _e.port1.onmessage=I,function(){return _e.port2.postMessage(0)}}():void 0===xe?function(){try{var _e=T(21);return void 0!==(fe=_e.runOnLoop||_e.runOnContext)?function(){fe(I)}:A()}catch(Be){return A()}}():A();var Z=Math.random().toString(36).substring(16),ue=void 0,Re=1,Te=2,Ee=new pe,$e=new pe,Ne=0;return f.prototype._enumerate=function(){for(var _e=this.length,Be=this._input,Ae=0;this._state===ue&&Ae<_e;Ae++)this._eachEntry(Be[Ae],Ae)},f.prototype._eachEntry=function(_e,Be){var Ae=this._instanceConstructor,Le=Ae.resolve;if(Le===h){var Ct=S(_e);if(Ct===y&&_e._state!==ue)this._settledAt(_e._state,Be,_e._result);else if("function"!=typeof Ct)this._remaining--,this._result[Be]=_e;else if(Ae===q){var He=new Ae(C);V(He,_e,Ct),this._willSettleAt(He,Be)}else this._willSettleAt(new Ae(function(We){return We(_e)}),Be)}else this._willSettleAt(Le(_e),Be)},f.prototype._settledAt=function(_e,Be,Ae){var Le=this.promise;Le._state===ue&&(this._remaining--,_e===Te?W(Le,Ae):this._result[Be]=Ae),0===this._remaining&&H(Le,this._result)},f.prototype._willSettleAt=function(_e,Be){var Ae=this;te(_e,void 0,function(Le){return Ae._settledAt(Re,Be,Le)},function(Le){return Ae._settledAt(Te,Be,Le)})},q.all=function(_e){return new f(this,_e).promise},q.race=function(_e){var Be=this;return new Be(me(_e)?function(Ae,Le){for(var Ct=_e.length,He=0;He<Ct;He++)Be.resolve(_e[He]).then(Ae,Le)}:function(Ae,Le){return Le(new TypeError("You must pass an array to race."))})},q.resolve=h,q.reject=function(_e){var Ae=new this(C);return W(Ae,_e),Ae},q._setScheduler=function(_e){ae=_e},q._setAsap=function(_e){de=_e},q._asap=de,q.prototype={constructor:q,then:y,catch:function(_e){return this.then(null,_e)}},q.polyfill=function(){var _e=void 0;if(void 0!==N)_e=N;else if("undefined"!=typeof self)_e=self;else try{_e=Function("return this")()}catch(Le){throw new Error("polyfill failed because global object is unavailable in this environment")}var Be=_e.Promise;if(Be){var Ae=null;try{Ae=Object.prototype.toString.call(Be.resolve())}catch(Le){}if("[object Promise]"===Ae&&!Be.cast)return}_e.Promise=q},q.Promise=q,q}()}).call(L,T(12),T(4))},function(Y,L){function T(){throw new Error("setTimeout has not been defined")}function p(){throw new Error("clearTimeout has not been defined")}function N(S){if(A===setTimeout)return setTimeout(S,0);if((A===T||!A)&&setTimeout)return A=setTimeout,setTimeout(S,0);try{return A(S,0)}catch(P){try{return A.call(null,S,0)}catch(k){return A.call(this,S,0)}}}function x(){v&&h&&(v=!1,h.length?C=h.concat(C):w=-1,C.length&&u())}function u(){if(!v){var S=N(x);v=!0;for(var P=C.length;P;){for(h=C,C=[];++w<P;)h&&h[w].run();w=-1,P=C.length}h=null,v=!1,function(S){if(I===clearTimeout)return clearTimeout(S);if((I===p||!I)&&clearTimeout)return I=clearTimeout,clearTimeout(S);try{I(S)}catch(P){try{return I.call(null,S)}catch(k){return I.call(this,S)}}}(S)}}function g(S,P){this.fun=S,this.array=P}function M(){}var A,I,y=Y.exports={};!function(){try{A="function"==typeof setTimeout?setTimeout:T}catch(S){A=T}try{I="function"==typeof clearTimeout?clearTimeout:p}catch(S){I=p}}();var h,C=[],v=!1,w=-1;y.nextTick=function(S){var P=new Array(arguments.length-1);if(arguments.length>1)for(var k=1;k<arguments.length;k++)P[k-1]=arguments[k];C.push(new g(S,P)),1!==C.length||v||N(u)},g.prototype.run=function(){this.fun.apply(null,this.array)},y.title="browser",y.browser=!0,y.env={},y.argv=[],y.version="",y.versions={},y.on=M,y.addListener=M,y.once=M,y.off=M,y.removeListener=M,y.removeAllListeners=M,y.emit=M,y.prependListener=M,y.prependOnceListener=M,y.listeners=function(S){return[]},y.binding=function(S){throw new Error("process.binding is not supported")},y.cwd=function(){return"/"},y.chdir=function(S){throw new Error("process.chdir is not supported")},y.umask=function(){return 0}},function(Y,L){Y.exports=function(T){return T.webpackPolyfill||(T.deprecate=function(){},T.paths=[],T.children||(T.children=[]),Object.defineProperty(T,"loaded",{enumerable:!0,get:function(){return T.l}}),Object.defineProperty(T,"id",{enumerable:!0,get:function(){return T.i}}),T.webpackPolyfill=1),T}},function(Y,L,T){Object.defineProperty(L,"__esModule",{value:!0});var u,h,p=T(3),N=T(1),m=T(0);L.ResponseData=function(C){this.id=C,this.status=200,this.headers={},this.body=""},(h=u=L.ClientEventName||(L.ClientEventName={})).Connected="trouter_js_client_connected",h.Disconnected="trouter_js_client_disconnected",h.Error="trouter_js_client_error",h.Progress="trouter_js_client_progress",h.Response="trouter_js_client_response",h.Request="trouter_js_client_request",h.CheckConnection="trouter_js_client_check_connection",h.Registration="trouter_js_client_registration",h.Unregistration="trouter_js_client_unregistration";var g=function(C,v,w,S,P){this.stepName=C,this.operation=v,this.delta=w,this.ts=S,this.error=P};L.TrackerStep=g,L.Properties=function(){};var A=function(){this.numberOfPingReplies=0,this.connectedTimestamp=0,this.isNewUrl=!1,this.transportType="",this.connectionNumber=0},I=function(){this.enabled=!1,this.numberOfStepsToMaintain=40,this.logHealthCheckError=!1,this.sendProgressTimeoutSecs=55,this.logSendPingError=!1,this.maxBackoffInMs=12e4,this.trouter_js_client_connected=!1,this.trouter_js_client_disconnected=!1,this.trouter_js_client_error=!1,this.trouter_js_client_progress=!1,this.trouter_js_client_response=!1,this.trouter_js_client_request=!1,this.trouter_js_client_registration=!1,this.trouter_js_client_unregistration=!1,this.trouter_js_client_check_connection=!0},y=function(){function h(C,v,w,S,P,k,O){this.clientId=v,this.clientInfo=w,this.getServerState=S,this.endpointId=P,this.clientCorrelationID=k,this.environment=O,this.logger=new m.Logger("ConnectionTracker",C),this.clientCorrelationID=void 0!==k?k:"",this.steps=[],this.connectionAttempt=0,this.totalStepCount=0,this.beginTimestamp=new p.Timespan,this.eventLogSettings=new I,this.connectedInfo=new A}return h.prototype.enable=function(C){this.eventLogSettings.enabled=!0,this.eventLogger=C},h.prototype.disable=function(){this.eventLogSettings.enabled=!1},h.prototype.sendProgress=function(C){this.steps.length>0&&this.sendTelemetry(u.Progress,C,this.steps)},h.prototype.cancelProgressTimer=function(){void 0!==this.progressTimeout&&(clearTimeout(this.progressTimeout),this.progressTimeout=void 0)},h.prototype.resetProgressSendTimer=function(){var C=this;this.cancelProgressTimer(),void 0!==this.eventLogSettings.sendProgressTimeoutSecs&&this.eventLogSettings.sendProgressTimeoutSecs>0&&(this.progressTimeout=setTimeout(function(){C.sendProgress({reason:"timeout",timeoutSecs:C.eventLogSettings.sendProgressTimeoutSecs})},1e3*this.eventLogSettings.sendProgressTimeoutSecs))},h.prototype.setConnectedInfo=function(C,v){this.connectedInfo.numberOfPingReplies=0,this.connectedInfo.connectedTimestamp=Date.now(),this.connectedInfo.isNewUrl=C,this.connectedInfo.transportType=v,++this.connectedInfo.connectionNumber},h.prototype.clearConnectedInfo=function(){this.connectedInfo.numberOfPingReplies=0,this.connectedInfo.connectedTimestamp=0,this.connectedInfo.isNewUrl=!0,this.connectedInfo.transportType=""},h.prototype.copyProperties=function(C,v){for(var w=0,S=Object.keys(v);w<S.length;w++){var P=S[w];v.hasOwnProperty(P)&&void 0!==v[P]&&(C[P.replace(/-/g,"_")]={value:v[P]})}},h.prototype.increasePingResponseCount=function(){++this.connectedInfo.numberOfPingReplies},h.prototype.sendTelemetry=function(C,v,w){try{if(!0===this.eventLogSettings.enabled&&!0===this.eventLogSettings[C]&&void 0!==this.eventLogger){var S=this.getServerState(),P={name:C,properties:{connectionAttempt:{value:this.connectionAttempt},epid:{value:this.endpointId},clientCorrelationID:{value:this.clientCorrelationID},steps:{value:p.toJson(w)},clientID:{value:this.clientId},eventVersion:{value:3},environment:{value:this.environment},cv:{value:N.CLIENT_VERSION},ua:{value:this.clientInfo.ua},connectionId:{value:S.connectionId},connectedClientId:{value:S.connectedClientId},domId:{value:S.domId},url:{value:S.unsecureUrl},surl:{value:S.url},ttlInSecs:{value:S.getRemainingTtlInSec()},numberOfPingReplies:{value:this.connectedInfo.numberOfPingReplies},connectedTimestamp:{value:this.connectedInfo.connectedTimestamp},isNewUrl:{value:this.connectedInfo.isNewUrl},transportType:{value:this.connectedInfo.transportType},connectionNumber:{value:this.connectedInfo.connectionNumber}}};this.copyProperties(P.properties,v),this.eventLogger.logEvent(P)}}catch(k){this.logger.warn("error in sending event "+C+": "+p.toJson(k))}},h.prototype.createStep=function(C,v,w){return new g(C,v,this.beginTimestamp.duration,Date.now(),w)},h.prototype.addStep=function(C,v,w){if(!1!==this.eventLogSettings.enabled&&(0===this.steps.length&&this.beginTimestamp.reset(),this.steps.push(this.createStep(C,v,w)),++this.totalStepCount,void 0!==this.eventLogSettings.numberOfStepsToMaintain&&this.steps.length>this.eventLogSettings.numberOfStepsToMaintain)){var S=this.steps.slice(0);this.steps.length=0,this.sendTelemetry(u.Progress,{reason:"flush"},S)}},h.prototype.trackStart=function(C){this.addStep(C,"start")},h.prototype.trackEnd=function(C){this.addStep(C,"end")},h.prototype.trackError=function(C,v,w,S){void 0===w&&(w=!0),"health"===C&&!0!==this.eventLogSettings.logHealthCheckError||"ping"===C&&!1===this.eventLogSettings.logSendPingError||(void 0===S&&(S="error"),!0===w&&this.addStep(C,S,v),this.sendTelemetry(u.Error,{},[this.createStep(C,S,v)]))},h.prototype.trackProgress=function(C,v){this.addStep(C,v)},h.prototype.trackConnected=function(C,v){this.setConnectedInfo(C,v);var w=this.steps.slice(0),S=this.totalStepCount,P=this.beginTimestamp.duration;this.steps.length=0,this.totalStepCount=0,this.sendTelemetry(u.Connected,{stepCount:w.length,totalStepCount:S,connectionEstablishmentMs_Total:P},w),this.cancelProgressTimer()},h.prototype.trackDisconnected=function(C){C.sessionLengthMS=Date.now()-this.connectedInfo.connectedTimestamp,this.sendTelemetry(u.Disconnected,C,[]),this.resetProgressSendTimer()},h.prototype.trackNewConnection=function(){++this.connectionAttempt},h.prototype.trackRequest=function(C,v){var w={};void 0!==v&&(w.hasError=!0,w.error=v);try{if(C){w.requestID=C.id,w.httpMethod=C.method,w.url=C.url,w.bodyLength=C.body.length,w.shortUrl=C.shortUrl,w.requestTimeStamp=C.startTS,w.correlationVector=C.correlationVector;for(var S=C.headers,P=0,k=Object.keys(S);P<k.length;P++){var O=k[P];S.hasOwnProperty(O)&&(w[O]=S[O])}}}catch(V){w.hasError=!0,w.error=w.error+" error creating request context "+p.toJson(V)}this.sendTelemetry(u.Request,w,[])},h.prototype.trackResponse=function(C,v,w,S){var P={};void 0!==S&&(P.hasError=!0,P.error=S);try{if(P.responseTimestamp=void 0!==w?w.sentTS:Date.now(),C){P.requestID=C.id,P.httpMethod=C.method,P.shortUrl=C.shortUrl,P.correlationVector=C.correlationVector;for(var k=C.headers,O=0,V=Object.keys(k);O<V.length;O++){var U=V[O];k.hasOwnProperty(U)&&(P[U]=k[U])}}w&&(P.latencyMS=v,P.responseCode=w.status,P.responseLength=w.body.length)}catch(B){P.hasError=!0,P.error=P.error+" error creating response context "+p.toJson(B)}this.sendTelemetry(u.Response,P,[])},h.prototype.sendResponseError=function(C,v,w){this.trackResponse(v,void 0,w,C)},h.prototype.close=function(){this.sendProgress({reason:"closed"}),this.steps.length=0,this.cancelProgressTimer()},h.prototype.mergeSettings=function(C){if(C){this.eventLogSettings.numberOfStepsToMaintain=Math.min(40,Math.max(10,void 0!==C.numberOfStepsToMaintain?C.numberOfStepsToMaintain:0));var v=Math.min(3600,Math.max(55,void 0!==C.sendProgressTimeoutSecs?C.sendProgressTimeoutSecs:0));this.eventLogSettings.logHealthCheckError=C.logHealthCheckError,this.eventLogSettings.logSendPingError=C.logSendPingError;for(var w=0,S=Object.keys(u).map(function(k){return u[k]});w<S.length;w++){var P=S[w];C.hasOwnProperty(P)&&void 0!==C[P]&&(this.eventLogSettings[P]=C[P])}this.eventLogSettings.sendProgressTimeoutSecs!==v&&(this.eventLogSettings.sendProgressTimeoutSecs=v,this.resetProgressSendTimer())}},h}();L.ConnectionTracker=y},function(Y,L,T){Object.defineProperty(L,"__esModule",{value:!0});var p=function(){function N(m,x){this.logger=m,this.maxBackoffInMs=x,this.backoffId=0,this.backoffCount=0}return N.calculateNextBackoffMs=function(m,x){var u=1+.4*(Math.random()-.5),g=1e3*Math.pow(2,m)*u;return g=Math.round(g),Math.min(x,g)},N.prototype.setMaxBackoffMs=function(m){this.maxBackoffInMs=m},N.prototype.backoff=function(m,x){var u=this;void 0!==this.timerHandle&&(this.logger.debug("Clearing current back off"),clearTimeout(this.timerHandle),this.timerHandle=void 0);var g=N.calculateNextBackoffMs(this.backoffCount,this.maxBackoffInMs);this.backoffId++,this.backoffCount++,this.logger.info("Backing off "+m+" for "+g+" milliseconds with ID "+this.backoffId),this.timerHandle=setTimeout(function(){u.logger.info("Back off for "+m+" with ID "+u.backoffId+" complete, invoking handler"),u.timerHandle=void 0,x()},g)},N.prototype.reset=function(){void 0!==this.timerHandle&&(this.logger.debug("Resetting back off"),clearTimeout(this.timerHandle),this.timerHandle=void 0),this.backoffCount=0},N}();L.ExponentialBackoff=p},function(Y,L,T){var p=this&&this.__assign||Object.assign||function(U){for(var B,H=1,W=arguments.length;H<W;H++)for(var te in B=arguments[H])Object.prototype.hasOwnProperty.call(B,te)&&(U[te]=B[te]);return U};Object.defineProperty(L,"__esModule",{value:!0});var N=T(20),m=T(11),x=T(3),u=T(14),g=T(1),M=T(15),A=T(2),I=T(5),y=T(0),h=T(17),C=T(10),v=function(){this.cv=g.CLIENT_VERSION,this.ua="",this.hr="",this.v=""},w=function(){this["force new connection"]=!0,this.reconnect=!1,this.query="",this.ackTimeoutMs=5e3},S="MS-CV",P=function(){function U(B){this.cvCounter=0;var H=JSON.parse(B);this.startTS=H.hasOwnProperty("startTS")?H.startTS:0,this.url=H.hasOwnProperty("url")?H.url:"",this.shortUrl=H.hasOwnProperty("shortUrl")?H.shortUrl:"",this.body=H.hasOwnProperty("body")?H.body:"",this.headers=H.hasOwnProperty("headers")?H.headers:{},this.id=H.hasOwnProperty("id")&&"number"==typeof H.id?H.id:-1,this.method=H.hasOwnProperty("method")?H.method:"",this.replied=!1,this.timedout=!1,this.timeoutTimerId=0,this.receivedCv=this.headers[S],this.updateCvHeader()}return Object.defineProperty(U.prototype,"correlationVector",{get:function(){return this.receivedCv?this.receivedCv+"."+this.cvCounter:""},enumerable:!0,configurable:!0}),U.prototype.on=function(B,H){"data"===B?this.dataCallback=H:"end"===B&&("function"==typeof this.dataCallback&&this.dataCallback(this.body),H())},U.prototype.incrementCorrelationVector=function(){++this.cvCounter,this.updateCvHeader()},U.prototype.updateCvHeader=function(){var B=this.correlationVector;B&&(this.headers[S]=B)},U}(),k=function(){function U(B,H,W){this.request=B,this.responseData=H,this.sendResponse=W}return U.prototype.writeHead=function(B,H){this.responseData.status=B,this.responseData.headers=H},U.prototype.write=function(B){this.responseData.body+=B},U.prototype.end=function(B){return B&&(this.responseData.body+=B),this.sendResponse(this.request,this.responseData)},U}(),O=function(B){this.name=B,this.args={},this.timeoutTimerId=0},V=function(){function U(B,H,W,te,$){var pe=this;this.options=H,this.manager=W,this.tokenProvider=te,this.connectionId="",this.inIncallMode=!1,this.connectionAttempt=0,this.connectedClientId="",this.c2cUrlBase="",this.pendingTimers={},this.lastDisconnectReason="",this.UNKNOWN_TRANSPORT="unknown_transport",this.logger=new y.Logger("Connection",B),this.timeoutOptions=this.options.timeoutOptions,this.healthBackoff=new M.ExponentialBackoff(this.logger,this.timeoutOptions.maxBackoffMs),this.tokenBackoff=new M.ExponentialBackoff(this.logger,this.timeoutOptions.maxBackoffMs),this.clientID=Date.now(),"undefined"!=typeof window&&window.location&&(this.domId=window.location.hostname),this.clientInfo=new v,this.clientInfo.cv=g.CLIENT_VERSION,this.clientInfo.ua="",this.options&&this.options.clientInfo&&(this.clientInfo.ua=this.safeString(this.options.clientInfo.ua),this.clientInfo.v=this.safeString(this.options.clientInfo.v)),this.connectionTracker=new u.ConnectionTracker(B,this.clientID,this.clientInfo,function(){return pe.getServerState()},this.options.endpointId,this.options.clientCorrelationID,this.options.environment),this.applyConnectionTrackerOptions(H),this.fsm=new h.TrouterFsm(B,this,this.options.incallModeTimeoutMs>0),H.registration&&(this.registrarClient=N.createRegistrarClient(B,this.tokenProvider,{registrarUrl:H.registration.registrarUrl,registrationId:H.registration.registrationId,requestTimeoutMs:H.timeoutOptions.fetchTimeoutMs,initialRetryDelayMs:1e3,maxRetryDelayMs:H.timeoutOptions.maxBackoffMs})),this.userActivityState=$}return U.prototype.start=function(B){this.logger.info("Starting"),this.externalConnectParams=B,this.fsm.start()},U.prototype.stop=function(B){this.logger.info("Stopping"),this.connectionTracker.close(),this.fsm.stop(B)},U.prototype.configure=function(B){var H=this.options.trouterUrl!==B.trouterUrl;this.options=B,this.applyConnectionTrackerOptions(B),H&&this.onTrouterReconnect()},U.prototype.checkConnection=function(B){this.logger.info("checkConnection called with "+B),this.fsm.checkConnection(B),B&&this.connectionTracker.sendTelemetry(u.ClientEventName.CheckConnection,{disconnectDetected:B},[])},U.prototype.getServerState=function(){return new I.ServerState(this.connectionId,this.connectedClientId,this.domId?this.domId:"",this.allocateResult?this.allocateResult.url:"",this.allocateResult?this.allocateResult.surl:"",this.c2cUrlBase,this.connectionExpireTimestampInSecs)},U.prototype.getToken=function(B,H){var W=this;this.logger.info("Getting token "+(H?"with backoff":"without backoff"));var te=function(){W.connectionTracker.trackStart("token"),W.tokenProvider(!B).then(function($){W.logger.debug("token is received"),W.connectionTracker.trackEnd("token"),W.fsm.onTokenReceived($)}).catch(function($){var pe=x.toJson($.stack);W.logger.error("Getting token failed, will retry after timeout. Error: "+pe),W.connectionTracker.trackError("token",pe),W.getToken(B,!0)})};H?this.tokenBackoff.backoff("getting token",te):(this.tokenBackoff.reset(),te())},U.prototype.startConnectionTimer=function(){var B=this;this.stopConnectionTimer(),this.logger.debug("Starting connection timeout for "+this.timeoutOptions.connectionTimeoutMs+" ms"),this.connectionTimeoutId=setTimeout(function(){B.logger.info("Connection timeout is fired"),B.fsm.onConnectingTimeout()},this.timeoutOptions.connectionTimeoutMs)},U.prototype.stopConnectionTimer=function(){this.connectionTimeoutId&&(this.logger.debug("Stopping connection timeout"),clearTimeout(this.connectionTimeoutId),this.connectionTimeoutId=void 0)},U.prototype.startPingTimer=function(){var B=this;"websocket"===this.transportTypeName?(this.logger.debug("Starting ping timeout for "+this.timeoutOptions.pingTimeoutMs+" ms"),this.pingTimerId=setInterval(function(){B.logger.info("Ping interval fired"),B.fsm.onPingInterval()},this.timeoutOptions.pingTimeoutMs)):this.logger.debug("Not starting ping for transport "+this.transportTypeName)},U.prototype.stopPingTimer=function(){this.pingTimerId&&(this.logger.debug("Stopping ping timeout"),this.clearPingResponseTimer(),clearInterval(this.pingTimerId),this.pingTimerId=void 0)},U.prototype.shouldSkipRegistration=function(){return void 0===this.options.registration},U.prototype.hasCustomRegisterTtl=function(){return this.options.registration&&this.options.registration.registrarTtlSec},U.prototype.startRegisterTimer=function(){var B=this;void 0!==this.registrationTimerId&&this.stopRegisterTimer();var H=this.getRegistrationTtl()-30;this.logger.debug("Starting registration timeout for "+H+" sec"),this.registrationTimerId=setTimeout(function(){B.logger.info("Registration timeout is fired"),B.registrationTimerId=setTimeout(function(){B.registrationTimerId=void 0,B.logger.debug("Re-registration did not happen in time"),B.dispatchUnregistered()},3e4),B.fsm.onRegistrationTimeout()},1e3*H)},U.prototype.stopRegisterTimer=function(){this.registrationTimerId&&(this.logger.debug("Stopping registration timeout"),clearTimeout(this.registrationTimerId),this.registrationTimerId=void 0)},U.prototype.resendRegistration=function(){if(!this.registrarClient)throw new Error("Trouter Client not configured to handle registrations");return this.registrarClient.resendRegistration()},U.prototype.buildSocketIoUrlParams=function(){if(!this.allocateResult)throw new Error("Allocate result is undefined in buildSocketIoUrlParams()");var B={};if(this.allocateResult.connectparams)for(var H=this.allocateResult.connectparams,W=0,te=Object.keys(H);W<te.length;W++){var $=te[W];H.hasOwnProperty($)&&void 0!==H[$]&&(B[$]=H[$])}return B.v="v4",B.tc=encodeURI(x.toJson(this.clientInfo)),B.timeout=this.timeoutOptions.pingTimeoutMs/1e3,B.auth="true",this.options.endpointId&&(B.epid=this.options.endpointId),this.userActivityState.state!==A.UserActivityState.Unknown&&(B.userActivity=encodeURI(x.toJson(this.userActivityState.toEventObject()))),this.appendConnectedClientIds(this.buildQuery(B),!0)},U.prototype.startSocketIo=function(){var B=this;if(this.logger.info("Starting socket io"),this.connectionTracker.trackStart("connectSocket"),!this.allocateResult)throw new Error("Allocate result is undefined in startSocketIo()");var H=this.options.ioOptions||new w;if(H["force new connection"]=!0,H.reconnect=!1,H.query=this.buildSocketIoUrlParams(),this.logger.info("connecting to "+this.allocateResult.socketio+"?"+H.query),this.stopSocketIo(),this.socket=(this.options.io||C).connect(this.allocateResult.socketio,H),void 0===this.socket)throw new Error("Can't create Socket.io object");this.socket.on("connecting",function(W){B.onSocketConnecting(W)}),this.socket.on("connect",function(){B.onSocketConnect()}),this.socket.on("connect_failed",function(W){B.onSocketConnectFailed(W)}),this.socket.on("disconnect",function(W){B.onSocketDisconnect(W)}),this.socket.on("reconnect",function(){B.onSocketReconnect()}),this.socket.on("reconnect_failed",function(W){B.onSocketReconnectFailed(W)}),this.socket.on("reconnecting",function(){B.onSocketReconnecting()}),this.socket.on("error",function(W){B.onSocketError(W)}),this.socket.on("message",function(W){B.onSocketMessage(W)}),this.socket.on("trouter.connected",function(W){B.onTrouterConnected(W)}),this.socket.on("trouter.reconnect",function(){B.onTrouterReconnect()}),this.socket.on("trouter.message_loss",function(W){B.onTrouterMessageLoss(W)})},U.prototype.stopSocketIo=function(){if(this.socket){this.logger.info("clearing socket.io");try{for(var B=0,H=["connecting","connect","connect_failed","disconnect","reconnect","reconnect_failed","reconnecting","error","message","trouter.connected","trouter.reconnect","trouter.message_loss"];B<H.length;B++)this.socket.removeAllListeners(H[B]);this.socket.disconnect(),this.logger.debug("cleared socket"),this.socket=void 0}catch(te){this.logger.error("exception in disconnecting previous socket. Error: "+x.toJson(te.stack))}}},U.prototype.dispatchConnected=function(){this.logger.info("dispatching connected"),this.manager.onConnected(this)},U.prototype.dispatchRegistered=function(){this.logger.info("dispatching registered"),this.manager.onRegistered(this)},U.prototype.dispatchUnregistered=function(){this.logger.info("dispatching unregistered"),this.manager.onUnregistered(this)},U.prototype.dispatchDownstreamRequest=function(B){var H=this;this.logger.info("dispatching downstream request");try{var W=new k(B,new u.ResponseData(B.id),function(te,$){return H.logger.info("sending response to downstream"),H.sendResponse(te,$)});this.manager.onDownstreamRequest(this,B,W)}catch(te){this.logger.error("exception in socket.on message. Error : "+x.toJson(te.stack))}},U.prototype.dispatchReconnecting=function(){this.logger.info("dispatching reconnecting"),this.manager.onReconnecting(this)},U.prototype.dispatchReconnectIsRequired=function(){this.logger.info("dispatching reconnect is required by server"),this.manager.onReconnectIsRequired(this)},U.prototype.dispatchDisconnected=function(){this.logger.info("dispatching disconnected"),this.manager.onDisconnected(this)},U.prototype.dispatchTrouterMessageLost=function(B){this.logger.info("dispatching trouter lost message"),this.manager.onTrouterMessageLost(B)},U.prototype.sendProcessedDroppedIndicators=function(B){var H=this;try{this.logger.info("emitting processed flow tags to the server");var W=new O("trouter.processed_message_loss");W.args={droppedIndicators:B},this.sendDownstreamEvent(W,function(){H.logger.info("emitted processed flow tags to the server")})}catch($){var te=x.toJson($.stack);this.logger.error("unable to send processed message loss event. Error: "+te),this.connectionTracker.trackError("trouter.processed_message_loss",te,!1)}},U.prototype.resetAllocationConnectionParams=function(){this.allocateResult&&(this.logger.info("Resetting allocation connection parameters"),this.allocateResult.connectparams=void 0)},U.prototype.sendAllocateRequest=function(B){var H=this;this.connectionAttempt++,this.connectionTracker.trackNewConnection();var W=this.options.trouterUrl,te=W,$=this.allocateResult&&this.allocateResult.connectparams;if(!$){var pe=this.externalConnectParams;pe&&pe.se&&parseInt(pe.se,10)<=Date.now()+36e5&&(this.logger.warn("Dropping expired cached connection parameters: "+new Date(parseInt(pe.se,10))),this.externalConnectParams=pe=void 0),pe&&pe.serviceUrl!==te&&(this.logger.warn("Dropping cached connection parameters for a different environment ("+pe.serviceUrl+", now "+te+")"),this.externalConnectParams=pe=void 0),pe&&pe.reconnectUrl?(te=pe.reconnectUrl,$=p({},pe,{reconnectUrl:void 0})):$=pe}te=this.appendCorrelationIds(te,!1),te=this.appendEndpointId(te,!1),$&&(te+="&"+this.buildQuery($),$.v||(te+="&v=v4"));var R=new Request(te,{method:"POST",mode:"cors",headers:new Headers({"X-Skypetoken":B,"Content-Type":"text/plain"})});this.logger.info("sendAllocateRequest: POST "+te),this.connectionTracker.trackStart("allocation");var r=-1;this.fetchWithTimeout(R,this.timeoutOptions.fetchTimeoutMs).then(function(s){if(r=s.status,!s.ok)throw new Error(s.statusText);var l=s.headers.get("content-type");if(!l||"application/json"!==l&&"application/json;"!==l.substring(0,17))throw new Error("Content-type '"+l+"' is unexpected");return H.connectionTracker.trackEnd("allocation"),s.json()}).then(function(s){H.onAllocationResponse(s,W)}).catch(function(s){var l=s+", status code "+r;H.logger.error("Allocation request failed. Error: "+l),H.connectionTracker.trackError("allocation",l),H.externalConnectParams&&H.connectionAttempt>2&&(r>=400&&r<=599?(H.logger.warn(H.connectionAttempt+" connection attempts, server-side failure: erasing external connection parameters"),H.externalConnectParams=void 0):H.externalConnectParams.reconnectUrl&&(H.logger.warn(H.connectionAttempt+" connection attempts, erasing reconnect URL"),delete H.externalConnectParams.reconnectUrl)),H.fsm.onAllocationFailed(401===r)})},U.prototype.sendPingRequest=function(){var B=this;if(this.socket&&void 0===this.pingResponseTimerId)try{this.logger.info("emitting ping event"),this.socket.emit("ping",function(){B.onPingResponse()}),this.pingResponseTimerId=setTimeout(function(){B.logger.error("Ping response timeout is fired"),B.clearPingResponseTimer(),B.fsm.onPingResponseTimeout()},this.timeoutOptions.pongTimeoutMs)}catch(W){var H=x.toJson(W.stack);this.logger.error("unable to send ping. Error: "+H),this.connectionTracker.trackError("ping",H,!1)}},U.prototype.setUserActivityState=function(B){var H=B.state!==this.userActivityState.state;this.userActivityState=B,this.fsm.onSetUserActivityState(B,H)},U.prototype.sendUserActivityState=function(B,H){this.userActivityState.state!==A.UserActivityState.Unknown&&("websocket"===this.transportTypeName&&H?this.sendUserActivityStateMultiple(B===I.UserActivityEventReason.Connected?2:1):"xhr-polling"===this.transportTypeName&&B===I.UserActivityEventReason.Modified&&this.fsm.forceReconnect())},U.prototype.sendRegisterRequest=function(){var B=this;if(!this.options.registration||!this.registrarClient)throw new Error("Internal error - options.registration is undefined");if(!this.allocateResult)throw new Error("Allocate result is undefined in sendRegisterRequest()");this.logger.info("sending register request");var H=new x.Timespan;this.connectionTracker.trackStart("registration"),this.registrarClient.register({appId:this.options.registration.pnhAppId,aesKey:"",languageId:"en-US",platform:this.options.registration.platform,templateKey:this.options.registration.pnhTemplateKey,platformUIVersion:this.options.registration.platformUIVersion,productContext:this.options.registration.productContext},{TROUTER:[{context:this.options.registration.context,path:this.allocateResult.surl,ttl:this.getRegistrationTtl()}]}).then(function(){B.logger.info("Register request successful"),B.connectionTracker.trackEnd("registration"),B.fsm.onRegistrationSucceed(),B.connectionTracker.sendTelemetry(u.ClientEventName.Registration,{duration:H.duration},[])}).catch(function(W){B.logger.error("Register request failed. Error: "+W),B.connectionTracker.trackError("registration",W.message),B.fsm.onRegistrationFailed(!1),B.connectionTracker.sendTelemetry(u.ClientEventName.Registration,{duration:H.duration},[])})},U.prototype.sendUnregisterRequest=function(){var B=this;this.logger.info("sending unregister request");var H=new x.Timespan;if(!this.options.registration||!this.registrarClient)throw new Error("Internal error - options.registration is undefined");this.connectionTracker.trackStart("unregistration"),this.registrarClient.unregister().then(function(){B.logger.info("Unregister request successful"),B.connectionTracker.trackEnd("unregistration"),B.fsm.onUnregistrationSucceed(),B.connectionTracker.sendTelemetry(u.ClientEventName.Unregistration,{duration:H.duration},[])}).catch(function(W){B.logger.error("Unregister request failed. Error: "+W),B.connectionTracker.trackError("unregistration",W.message),B.fsm.onUnregistrationFailed(!1),B.connectionTracker.sendTelemetry(u.ClientEventName.Unregistration,{duration:H.duration},[])})},U.prototype.fetchWithTimeout=function(B,H){return new m.Promise(function(W,te){fetch(B).then(W).catch(te),0!==H&&setTimeout(te,H,new Error("Fetch for '"+B.url+"' timed out"))})},U.prototype.resetTokenBackoff=function(){this.tokenBackoff.reset()},U.prototype.resetRegisterBackoff=function(){this.registrarClient&&this.registrarClient.cancelPendingRequests()},U.prototype.clearTimers=function(){this.logger.debug("Clearing all pending downstream events related timers");for(var B=0,H=Object.keys(this.pendingTimers);B<H.length;B++)this.clearTimer(Number(H[B]))},U.prototype.restartIncallModeTimer=function(){var B=this;this.clearIncallModeTimerId(),this.logger.debug("Restarting incall mode timer"),this.incallModeTimerId=setTimeout(function(){B.logger.info("Call mode timer fired"),B.fsm.onIncallModeTimer()},this.options.incallModeTimeoutMs)},U.prototype.enterIncallMode=function(){this.logger.info("Entering incall mode"),this.timeoutOptions=this.options.incallTimeoutOptions,this.healthBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.tokenBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.inIncallMode=!0},U.prototype.exitIncallMode=function(){this.logger.info("Exiting incall mode"),this.clearIncallModeTimerId(),this.timeoutOptions=this.options.timeoutOptions,this.healthBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.tokenBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.inIncallMode=!1},U.prototype.isIncallMode=function(){return this.inIncallMode},U.prototype.onSocketConnecting=function(B){this.logger.info("onSocketConnecting("+B+")"),this.transportTypeName=B,this.connectionTracker.trackProgress("connecting",this.transportTypeName),this.fsm.onConnecting()},U.prototype.onSocketConnect=function(){this.logger.info("onSocketConnect")},U.prototype.onSocketConnectFailed=function(B){this.logger.error("onSocketConnectFailed"),this.connectionTracker.trackError("connect_failed",B,!0,this.transportTypeName?this.transportTypeName:this.UNKNOWN_TRANSPORT),this.fsm.onConnectingFailed()},U.prototype.onSocketDisconnect=function(B){this.logger.error("onSocketDisconnect, reason: "+B);var H={reason:B,serverClosed:!this.fsm.isActive()};this.connectionTracker.trackDisconnected(H),this.connectionTracker.clearConnectedInfo();var W=H.sessionLengthMS||0;"dup"===B&&"dup"===this.lastDisconnectReason&&W<this.options.duplicateDisconnectThresholdMs&&(this.logger.warn("Socket was closed by server as Duplicate for the second time in a row after "+W+" ms which is below the threshold of "+this.options.duplicateDisconnectThresholdMs+" ms. Resetting cached connection parameters and making a new allocation."),this.resetAllocationConnectionParams()),this.lastDisconnectReason=B,this.fsm.onSocketError(void 0),this.connectionExpireTimestampInSecs=void 0},U.prototype.onSocketReconnect=function(){this.logger.error("onSocketReconnect"),this.fsm.onTrouterConnected()},U.prototype.onSocketReconnectFailed=function(B){this.logger.error("onSocketReconnectFailed with '"+B+"'"),this.fsm.onSocketError("string"==typeof B?B:void 0)},U.prototype.onSocketReconnecting=function(){this.logger.error("onSocketReconnecting")},U.prototype.onSocketError=function(B){this.logger.error("onSocketError with '"+x.toJson(B)+"'"),this.connectionTracker.trackError("connectSocket",B),this.fsm.onSocketError("string"==typeof B?B:void 0)},U.prototype.onSocketMessage=function(B){var W,H=this;this.logger.info("onSocketMessage");try{var te=(W=new P(B)).headers&&W.headers["X-Microsoft-Skype-Chain-ID"];this.logger.info("Received request N "+W.id+(te?" Chain-Id "+te:"")+" CV "+W.correlationVector+" to '"+W.url+"'"),W.startTS=Date.now(),W.url&&this.urlPath&&0===W.url.indexOf(this.urlPath)&&(W.shortUrl=W.url.substring(this.urlPath.length))}catch(R){var pe=x.toJson(R.stack);return this.logger.error("unable to parse request. Error: "+pe),this.connectionTracker.trackRequest(void 0,pe),void this.connectionTracker.sendResponseError("unable to parse request, error: "+R)}W.timeoutTimerId=setTimeout(function(){if(!W.replied){H.logger.error("Request "+W.id+" timed out");var R=new u.ResponseData(W.id);R.status=504,R.headers={"Trouter-Responder":"ClientLib"},H.sendResponse(W,R),W.timedout=!0}},this.timeoutOptions.requestTimeoutMs);try{this.connectionTracker.trackRequest(W),this.fsm.onDownstreamRequest(W)}catch(R){this.logger.error("exception in socket.on message. Error: "+x.toJson(R.stack)),this.connectionTracker.sendResponseError(R.message,W,void 0)}},U.prototype.onTrouterConnected=function(B){if(this.allocateResult){this.logger.info("onTrouterConnected: "+this.allocateResult.url),this.socket&&this.socket.socket&&this.socket.socket.options&&this.socket.socket.options.query&&(this.socket.socket.options.query+="&connected=true"),this.urlPath=this.allocateResult.url.replace(/https?:\/\/([A-z0-9\:\$\-\_\.\+\!\*\"\(\)\,]*)\//,"/");var H=this.connectedUrl!==this.allocateResult.url;this.connectedUrl=this.allocateResult.url,this.connectionExpireTimestampInSecs=x.calculateExpireTsInSec(B.ttl),this.connectionTracker.trackEnd("connectSocket"),this.connectionTracker.trackConnected(H,this.transportTypeName?this.transportTypeName:this.UNKNOWN_TRANSPORT),this.fsm.onTrouterConnected()}else this.logger.error("Invalid internal state - received onTrouterConnected while allocateResult is not set")},U.prototype.onTrouterReconnect=function(){this.logger.info("onTrouterReconnect"),this.fsm.onReconnectRequired()},U.prototype.onTrouterMessageLoss=function(B){this.logger.info("onTrouterMessageLoss"),this.fsm.onTrouterMessageLost(B.droppedIndicators)},U.prototype.onAllocationResponse=function(B,H){if(this.logger.info("Received allocation response "+JSON.stringify(B)),this.allocateResult=B,this.externalConnectParams=void 0,this.connectionExpireTimestampInSecs=x.calculateExpireTsInSec(+B.ttl),this.connectionId=this.allocateResult.id||"",this.connectedClientId=this.allocateResult.ccid,this.logger.info("connected client id set {connectedClientId:"+this.connectedClientId+"}"),this.c2cUrlBase=B.curlb||"",""===this.c2cUrlBase){var te=B.surl.indexOf("://");te>=0&&(te=B.surl.indexOf("/",te+3))>=5&&":3443"===B.surl.substr(te-5,5)&&(this.c2cUrlBase=B.surl.substr(0,te-5))}var $=p({serviceUrl:H,reconnectUrl:B.socketio+"v4/a"},B.connectparams);this.manager.onConnectionParametersUpdated($),this.fsm.onAllocationSucceed()},U.prototype.onPingResponse=function(){this.logger.info("onPingResponse"),this.connectionTracker.increasePingResponseCount(),this.clearPingResponseTimer(),this.fsm.onPingResponse()},U.prototype.clearPingResponseTimer=function(){void 0!==this.pingResponseTimerId&&(clearTimeout(this.pingResponseTimerId),this.pingResponseTimerId=void 0)},U.prototype.buildQuery=function(B){for(var H=[],W=0,te=Object.keys(B);W<te.length;W++){var $=te[W];B.hasOwnProperty($)&&void 0!==B[$]&&H.push($+"="+B[$])}return H.join("&")},U.prototype.appendConnectedClientIds=function(B,H){var W="";B.indexOf("ccid=")<0&&(W="ccid="+this.connectedClientId+"&"),this.domId&&(W+="dom="+this.domId+"&"),W.length>0&&(W=W.slice(0,-1));var te=H||-1!==B.indexOf("?")?"&":"?";return this.appendCorrelationIds(B+te+W,H)},U.prototype.appendEndpointId=function(B,H){var W=H||-1!==B.indexOf("?")?"&":"?";return B.indexOf("epid")<0&&this.options.endpointId?""+B+W+"epid="+this.options.endpointId:B},U.prototype.appendCorrelationIds=function(B,H){var W=H||-1!==B.indexOf("?")?"&":"?";return B.indexOf("cor_id")<0?""+B+W+"cor_id="+this.options.clientCorrelationID+"&con_num="+this.clientID+"_"+this.connectionAttempt:B},U.prototype.getHealthUrl=function(B){return B.substring(0,B.lastIndexOf("/a"))+"/h"},U.prototype.safeString=function(B){return"string"==typeof B?B:""},U.prototype.sendResponse=function(B,H){if(B.timedout)return this.logger.error("Request "+B.id+" already timed out"),1;if(B.replied)return this.logger.error("Response for request "+B.id+" already sent"),2;clearTimeout(B.timeoutTimerId),B.timeoutTimerId=0,B.replied=!0,H.headers=H.headers||{};var W=B.correlationVector;this.logger.info("Sending response for request N "+B.id+" CV "+W+" with status "+H.status),W&&(H.headers[S]=W),B.headers&&B.headers["trouter-request"]&&!H.headers["trouter-request"]&&(H.headers["trouter-request"]=B.headers["trouter-request"]);var te=Date.now()-B.startTS;if(H.headers["trouter-client"]=x.toJson({cd:te}),this.logger.debug("response: "+x.toJson(H)),!this.socket)return this.connectionTracker.sendResponseError("no socket",B,H),4;try{return this.socket.send(x.toJson(H)),H.sentTS=Date.now(),B.incrementCorrelationVector(),this.connectionTracker.trackResponse(B,te,H),"websocket"===this.transportTypeName&&this.sendPingRequest(),0}catch(pe){var $="unable to send data on response.end. Error: "+x.toJson(pe.stack);return this.logger.error($),this.connectionTracker.sendResponseError($,B,H),4}},U.prototype.sendUserActivityStateMultiple=function(B){var H=this,W=new O("user.activity"),te=this.userActivityState.toEventObject();W.args=te,this.userActivityState.correlationVector.increase(),this.logger.debug("Sending user activity '"+this.userActivityState.toEventJSON()+"', remaining "+(B-1)),this.sendDownstreamEvent(W,function(){if(H.logger.info("User activity state: "+te.state+", cv: "+te.cv+" accepted"),H.manager.onUserActivityStateAccepted&&H.manager.onUserActivityStateAccepted(te.cv),H.clearTimer(W.timeoutTimerId),B>1){var $=setTimeout(function(){H.clearTimer($),H.sendUserActivityStateMultiple(B-1)},H.options.userActivitySecondResendDelayMs);H.registerTimer($,"user.activity/resend")}}),W.timeoutTimerId=setTimeout(function(){H.logger.error("Activity state response timeout is fired"),H.fsm.onActivityStateResponseTimeout(),H.clearTimer(W.timeoutTimerId)},this.timeoutOptions.userActivityResponseTimeoutMs),this.registerTimer(W.timeoutTimerId,"user.activity/response")},U.prototype.sendDownstreamEvent=function(B,H){this.logger.info("Sending downstream event "+B.name),this.socket&&this.socket.emit(B.name,B.args,H)},U.prototype.registerTimer=function(B,H){this.logger.debug("registering timer "+B+" -> "+H),this.pendingTimers[B]=H},U.prototype.clearTimer=function(B){this.logger.debug("clearing timer "+B+" -> "+this.pendingTimers[B]),delete this.pendingTimers[B],clearTimeout(B)},U.prototype.getRegistrationTtl=function(){var B=x.calculateTtlInSec(this.connectionExpireTimestampInSecs);return this.logger.debug("Current connectionID will expire in "+B+" seconds"),this.options.registration&&this.options.registration.registrarTtlSec&&B>0?Math.min(this.options.registration.registrarTtlSec,B):this.options.registration&&this.options.registration.registrarTtlSec?this.options.registration.registrarTtlSec:B>0?B:3600},U.prototype.clearIncallModeTimerId=function(){void 0!==this.incallModeTimerId&&(this.logger.debug("Clearing in-call mode timer"),clearTimeout(this.incallModeTimerId),this.incallModeTimerId=void 0)},U.prototype.applyConnectionTrackerOptions=function(B){try{B.eventLogger&&"function"==typeof B.eventLogger.logEvent?(this.connectionTracker.mergeSettings(B.telemetrySettings),this.connectionTracker.enable(B.eventLogger)):this.logger.warn("Trouter client event logging disabled due to invalid configuration.")}catch(H){this.logger.warn("Trouter client event logging disabled. Error: "+x.toJson(H.stack)),this.connectionTracker.disable()}},U}();L.TrouterConnection=V},function(Y,L,T){Object.defineProperty(L,"__esModule",{value:!0});var p,g,x,N=T(5),m=T(0);(g=p=L.State||(L.State={}))[g.Initial=0]="Initial",g[g.RetrievingToken=1]="RetrievingToken",g[g.Allocating=2]="Allocating",g[g.Handshaking=3]="Handshaking",g[g.Connecting=4]="Connecting",g[g.Connected=5]="Connected",g[g.UnregisteringRetrievingToken=6]="UnregisteringRetrievingToken",g[g.Unregistering=7]="Unregistering",function(g){g[g.Initial=0]="Initial",g[g.RetrievingToken=1]="RetrievingToken",g[g.Registering=2]="Registering",g[g.Registered=3]="Registered",g[g.NotRegistered=4]="NotRegistered"}(x||(x={}));var u=function(){function g(M,A,I){this.worker=A,this.incallModeEnabled=I,this.state=p.Initial,this.connectionErrors=0,this.logger=new m.Logger("ConnectionFsm",M),this.connectedSubstate=x.Initial}return g.prototype.getState=function(){return this.state},g.prototype.isActive=function(){return this.state===p.Allocating||this.state===p.Connected||this.state===p.Handshaking||this.state===p.Connecting||this.state===p.RetrievingToken},g.prototype.start=function(){return this.state===p.Initial?(this.setState(p.RetrievingToken),this.worker.getToken(!0,!1),!0):(this.showIgnored("start"),!1)},g.prototype.stop=function(M){M&&(this.connectedSubstate=x.Initial),this.worker.isIncallMode()&&this.worker.exitIncallMode(),this.worker.resetTokenBackoff(),this.worker.resetRegisterBackoff(),this.worker.stopConnectionTimer(),this.worker.stopPingTimer(),this.worker.clearTimers(),this.state!==p.Connecting&&this.state!==p.Handshaking&&this.state!==p.Connected||this.worker.stopSocketIo(),this.isRegistered()&&this.state!==p.UnregisteringRetrievingToken&&this.state!==p.Unregistering?(this.setState(p.UnregisteringRetrievingToken),this.worker.stopRegisterTimer(),this.worker.getToken(!0,!1)):(this.setState(p.Initial),this.worker.dispatchDisconnected())},g.prototype.onTokenReceived=function(M){this.state===p.RetrievingToken?(this.setState(p.Allocating),this.worker.startConnectionTimer(),this.worker.sendAllocateRequest(M)):this.state===p.Connected&&this.connectedSubstate===x.RetrievingToken?(this.connectedSubstate=x.Registering,this.worker.sendRegisterRequest()):this.state===p.UnregisteringRetrievingToken?(this.setState(p.Unregistering),this.worker.sendUnregisterRequest()):this.showIgnored("onTokenReceived")},g.prototype.checkConnection=function(M){M&&this.onPingInterval()},g.prototype.onAllocationSucceed=function(){return this.state===p.Allocating?(this.setState(p.Handshaking),this.connectedSubstate===x.Registered&&this.worker.dispatchUnregistered(),this.connectedSubstate=x.Initial,this.worker.startSocketIo(),!0):(this.showIgnored("onAllocationSucceed"),!1)},g.prototype.onAllocationFailed=function(M){this.state===p.Allocating?(this.setState(p.RetrievingToken),this.worker.stopConnectionTimer(),this.worker.getToken(!M,!0)):this.showIgnored("onAllocationFailed")},g.prototype.onConnectingTimeout=function(){this.state===p.Allocating||this.state===p.Connecting||this.state===p.Handshaking?(this.setState(p.RetrievingToken),this.resetAllocationIfNecessary(void 0),this.worker.stopSocketIo(),this.worker.getToken(!0,!1)):this.showIgnored("onConnectingTimeout")},g.prototype.onConnecting=function(){this.state===p.Handshaking?this.setState(p.Connecting):this.showIgnored("onConnecting")},g.prototype.onConnectingFailed=function(){this.state===p.Connecting?this.onConnectingTimeout():this.state===p.Handshaking?(this.logger.error("Unexpected error in Socket.io - no valid transports"),this.onConnectingTimeout()):this.showIgnored("onConnectingFailed")},g.prototype.onSocketError=function(M){this.state===p.Handshaking||this.state===p.Connected?(this.worker.stopSocketIo(),this.worker.stopPingTimer(),this.worker.clearTimers(),this.worker.stopConnectionTimer(),this.state!==p.Connected&&this.worker.resetAllocationConnectionParams(),this.setState(p.RetrievingToken),this.worker.dispatchReconnecting(),this.worker.getToken(!0,!1)):this.showIgnored("onSocketError")},g.prototype.onTrouterConnected=function(){this.state===p.Connecting?(this.setState(p.Connected),this.worker.resetTokenBackoff(),this.worker.stopConnectionTimer(),this.worker.sendUserActivityState(N.UserActivityEventReason.Connected,!0),this.worker.startPingTimer(),this.worker.dispatchConnected(),this.connectionErrors=0,this.worker.shouldSkipRegistration()?(this.connectedSubstate=x.NotRegistered,this.worker.dispatchRegistered()):(this.connectedSubstate=x.RetrievingToken,this.worker.getToken(!0,!1))):this.showIgnored("onTrouterConnected")},g.prototype.onReconnectRequired=function(){this.worker.dispatchReconnectIsRequired()},g.prototype.onDownstreamRequest=function(M){this.state===p.Connected?(this.switchToIncallModeIfEnabled(),this.worker.dispatchDownstreamRequest(M)):this.showIgnored("onDownstreamRequest")},g.prototype.onTrouterMessageLost=function(M){this.state===p.Connected?this.worker.dispatchTrouterMessageLost(M):this.showIgnored("onTrouterMessageLost")},g.prototype.onPingInterval=function(){this.state===p.Connected?this.worker.sendPingRequest():this.showIgnored("onPingInterval")},g.prototype.onPingResponseTimeout=function(){this.onMissedResponse("onPingResponseTimeout")},g.prototype.onPingResponse=function(){this.state===p.Connected||this.showIgnored("onPingResponse")},g.prototype.onRegistrationFailed=function(M){this.state===p.Connected&&this.connectedSubstate===x.Registering?(this.connectedSubstate=x.RetrievingToken,this.worker.getToken(!M,!0)):this.showIgnored("onRegistrationFailed")},g.prototype.onRegistrationSucceed=function(){this.state===p.Connected?(this.connectedSubstate===x.Registering&&(this.connectedSubstate=x.Registered,this.worker.dispatchRegistered()),this.worker.hasCustomRegisterTtl()&&this.worker.startRegisterTimer()):this.showIgnored("onRegistrationSucceed")},g.prototype.onRegistrationTimeout=function(){this.state===p.Connected&&this.connectedSubstate!==x.NotRegistered?(this.connectedSubstate=x.RetrievingToken,this.worker.getToken(!0,!1)):this.showIgnored("onRegistrationTimeout")},g.prototype.onUnregistrationFailed=function(M){this.state===p.Unregistering?(this.setState(p.UnregisteringRetrievingToken),this.worker.getToken(!M,!M)):this.showIgnored("onUnregistrationFailed")},g.prototype.onUnregistrationSucceed=function(){this.state===p.Unregistering?(this.setState(p.Initial),this.worker.dispatchUnregistered(),this.worker.dispatchDisconnected()):this.showIgnored("onUnregistrationSucceed")},g.prototype.onIncallModeTimer=function(){this.worker.exitIncallMode(),this.state===p.Connected?(this.worker.stopPingTimer(),this.worker.startPingTimer()):this.showIgnored("onIncallModeTimer")},g.prototype.onSetUserActivityState=function(M,A){A?(this.logger.info("Changing user activity state to '"+M.toEventJSON()+"'"),this.worker.sendUserActivityState(N.UserActivityEventReason.Modified,this.state===p.Connected)):this.logger.debug("Not changing the same user activity state '"+M.toEventJSON()+"'")},g.prototype.onActivityStateResponseTimeout=function(){this.onMissedResponse("onActivityStateResponseTimeout")},g.prototype.forceReconnect=function(){this.setState(p.RetrievingToken),this.worker.resetTokenBackoff(),this.worker.stopConnectionTimer(),this.worker.stopPingTimer(),this.worker.clearTimers(),this.worker.stopSocketIo(),this.worker.dispatchReconnecting(),this.worker.getToken(!0,!1)},g.prototype.onMissedResponse=function(M){this.state===p.Connected?(this.setState(p.RetrievingToken),this.worker.stopPingTimer(),this.worker.clearTimers(),this.worker.stopSocketIo(),this.worker.dispatchReconnecting(),this.worker.getToken(!0,!1)):this.showIgnored(M)},g.prototype.showIgnored=function(M){this.logger.debug("Ignoring event '"+M+"' in state '"+p[this.state]+"'")},g.prototype.setState=function(M){this.logger.info("Switching from state '"+p[this.state]+"' to state '"+p[M]+"'"),this.state!==M?this.state=M:this.logger.error("Attempt to switching into the current state '"+p[M]+"'")},g.prototype.resetAllocationIfNecessary=function(M){this.connectionErrors++,this.connectionErrors>=2||void 0!==M&&/^4\d\d /.test(M)?(this.logger.error("Connection error count is "+this.connectionErrors+" - will reset allocation"),this.connectionErrors=0):this.logger.info("Connection error count is "+this.connectionErrors+" - will NOT reset allocation")},g.prototype.isRegistered=function(){return this.connectedSubstate===x.Registered||this.connectedSubstate===x.Registering},g.prototype.switchToIncallModeIfEnabled=function(){this.incallModeEnabled&&(this.worker.isIncallMode()||(this.worker.enterIncallMode(),this.worker.stopPingTimer(),this.worker.startPingTimer()),this.worker.restartIncallModeTimer())},g}();L.TrouterFsm=u},function(Y,L,T){Object.defineProperty(L,"__esModule",{value:!0});var p=T(2),N=T(0),m=function(){function x(u,g){this.worker=g,this.state=p.TrouterState.Unknown,this.logger=new N.Logger("ManagerFsm",u)}return x.prototype.start=function(){this.state===p.TrouterState.Unknown?(this.setState(p.TrouterState.Disconnected),this.worker.forceStopLingeringConnection(),this.worker.startFirstConnection()):this.showIgnored("start")},x.prototype.stop=function(u){this.state!==p.TrouterState.Unknown?(this.setState(p.TrouterState.Unknown),this.worker.stopFirstConnection(!0===u),this.worker.stopSecondConnection(!0===u)):this.showIgnored("stop")},x.prototype.getState=function(){return this.state},x.prototype.onConnected=function(u){this.state===p.TrouterState.Disconnected&&u?this.worker.doesSecondConnectionExist()?this.setState(p.TrouterState.Switching):(this.setState(p.TrouterState.Connected),this.worker.dispatchConnected()):this.showIgnored("onConnected("+u+")")},x.prototype.onRegistered=function(u){this.state!==p.TrouterState.Disconnected||u?this.state!==p.TrouterState.Switching||u||(this.setState(p.TrouterState.Connected),this.worker.switchConnections(),this.worker.stopSecondConnectionDelayed(),this.worker.dispatchConnected()):(this.setState(p.TrouterState.Connected),this.worker.switchConnections(),this.worker.stopSecondConnection(!0),this.worker.dispatchConnected()),this.worker.dispatchRegistrationState(!0)},x.prototype.onUnregistered=function(u){u&&this.worker.dispatchRegistrationState(!1)},x.prototype.onReconnecting=function(u){this.state===p.TrouterState.Connected&&u||this.state===p.TrouterState.Switching&&u?(this.setState(p.TrouterState.Disconnected),this.worker.dispatchReconnecting()):this.showIgnored("onReconnecting("+u+")")},x.prototype.onReconnectionRequired=function(u){this.state===p.TrouterState.Connected&&u?(this.setState(p.TrouterState.Switching),this.worker.startSecondConnection()):this.state===p.TrouterState.Disconnected&&u?this.worker.startSecondConnection():this.showIgnored("onReconnectionRequired("+u+")")},x.prototype.onDisconnected=function(u){this.state===p.TrouterState.Unknown&&u?this.worker.dispatchStopped():this.showIgnored("onDisconnected("+u+")")},x.prototype.showIgnored=function(u){this.logger.info("Ignoring event '"+u+"' in state '"+p.TrouterState[this.state]+"'")},x.prototype.setState=function(u){this.logger.info("Switching from state '"+p.TrouterState[this.state]+"' to state '"+p.TrouterState[u]+"'"),this.state!==u?this.state=u:this.logger.error("Attempt to switching into the current state '"+p.TrouterState[u]+"'")},x}();L.TrouterManagerFsm=m},function(Y,L,T){function p(k,O){if(!O)return k;var V=g({},k,{enabled:O.TelemetryEnabled});return void 0!==O.ClientTelemetryEventEnabled&&(V=g({},V,O.ClientTelemetryEventEnabled)),V}function N(k,O){return{clientInfo:{ua:k.trouterSettings.productName,v:k.trouterSettings.version},ioOptions:{ackTimeoutMs:5e3},clientCorrelationID:k.trouterSettings.sessionId,environment:k.trouterSettings.environment,telemetrySettings:p(k.telemetryConfig.settings,O),eventLogger:k.telemetryConfig.eventLogger,endpointId:k.trouterSettings.registrationId,trouterUrl:O&&O.TrouterConnectionUrl||k.trouterSettings.trouterServiceUrl,registration:k.trouterSettings.registrarServiceUrl?{registrarUrl:k.trouterSettings.registrarServiceUrl,registrationId:k.trouterSettings.registrationId||"",pnhAppId:k.trouterSettings.pnhAppId||"",platform:k.trouterSettings.platform||"",pnhTemplateKey:k.trouterSettings.pnhTemplate||"",platformUIVersion:k.trouterSettings.platformUIVersion||"",productContext:k.trouterSettings.pnhProductContext||void 0,context:k.trouterSettings.pnhContext||"",registrarTtlSec:(k.trouterSettings.maxRegistrationTimeInMs||0)/1e3}:void 0,timeoutOptions:g({connectionTimeoutMs:k.trouterSettings.trouterConnectTimeoutInMs||3e4,fetchTimeoutMs:1e4,pingTimeoutMs:4e4,pongTimeoutMs:5e3,maxBackoffMs:3e4,requestTimeoutMs:5e3,userActivityResponseTimeoutMs:1e4},k.trouterSettings.timeoutOptions),incallTimeoutOptions:g({connectionTimeoutMs:1e4,fetchTimeoutMs:5e3,pingTimeoutMs:5e3,pongTimeoutMs:2e3,maxBackoffMs:1e4,requestTimeoutMs:5e3,userActivityResponseTimeoutMs:1e4},k.trouterSettings.incallTimeoutOptions),incallModeTimeoutMs:k.trouterSettings.incallModeTimeoutMs||0,lingeringConnectionDelayMs:6e4,userActivitySecondResendDelayMs:k.trouterSettings.userActivitySecondResendDelayMs||1e4,duplicateDisconnectThresholdMs:1e4,connectionCache:k.connectionCache,registrationStateCallback:k.registrationStateCallbackForAcsDoNotUse}}var g=this&&this.__assign||Object.assign||function(k){for(var O,V=1,U=arguments.length;V<U;V++)for(var B in O=arguments[V])Object.prototype.hasOwnProperty.call(O,B)&&(k[B]=O[B]);return k},M=this&&this.__awaiter||function(k,O,V,U){return new(V||(V=Promise))(function(B,H){function W(pe){try{$(U.next(pe))}catch(R){H(R)}}function te(pe){try{$(U.throw(pe))}catch(R){H(R)}}function $(pe){pe.done?B(pe.value):new V(function(R){R(pe.value)}).then(W,te)}$((U=U.apply(k,O||[])).next())})},A=this&&this.__generator||function(k,O){function V(pe){return function(R){return function(pe){if(B)throw new TypeError("Generator is already executing.");for(;$;)try{if(B=1,H&&(W=2&pe[0]?H.return:pe[0]?H.throw||((W=H.return)&&W.call(H),0):H.next)&&!(W=W.call(H,pe[1])).done)return W;switch(H=0,W&&(pe=[2&pe[0],W.value]),pe[0]){case 0:case 1:W=pe;break;case 4:return $.label++,{value:pe[1],done:!1};case 5:$.label++,H=pe[1],pe=[0];continue;case 7:pe=$.ops.pop(),$.trys.pop();continue;default:if(!(W=(W=$.trys).length>0&&W[W.length-1])&&(6===pe[0]||2===pe[0])){$=0;continue}if(3===pe[0]&&(!W||pe[1]>W[0]&&pe[1]<W[3])){$.label=pe[1];break}if(6===pe[0]&&$.label<W[1]){$.label=W[1],W=pe;break}if(W&&$.label<W[2]){$.label=W[2],$.ops.push(pe);break}W[2]&&$.ops.pop(),$.trys.pop();continue}pe=O.call(k,$)}catch(R){pe=[6,R],H=0}finally{B=W=0}if(5&pe[0])throw pe[1];return{value:pe[0]?pe[1]:void 0,done:!0}}([pe,R])}}var B,H,W,te,$={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return te={next:V(0),throw:V(1),return:V(2)},"function"==typeof Symbol&&(te[Symbol.iterator]=function(){return this}),te};Object.defineProperty(L,"__esModule",{value:!0});var I=T(1),y=T(2);L.TrouterState=y.TrouterState,L.UserActivityState=y.UserActivityState;var h=T(0),C=T(6),v=T(7),w=T(8),S=T(9),P=function(){function k(O){this.logProvider=O,this.stateChangedListeners=[],this.logger=new h.Logger("Trouter",O),this.trouterUrlPromise=new S.TrouterUrlPromise(O),this.messageHandlers=new C.MessageHandlerRegistry(O),this.listeners={},this.connectionInfo=null,this.logger.info("Created TrouterService version "+I.CLIENT_VERSION)}return k.prototype.start=function(O){this.logger.info("Start"),O.trouterSettings.disableInternalSkypeTokenCache||(O.skypeTokenProvider=v.addCacheAsBackupTo(O.skypeTokenProvider)),this.trouterCfg=O;var U=N(O,this.ecsCfg);void 0===this.trouterServer&&(this.trouterServer=new w.TrouterManager(this.logProvider,U,O.skypeTokenProvider,this)),this.trouterServer.start()},k.prototype.stop=function(O){this.logger.info("close connection"),this.trouterUrlPromise.rejectUrl(new Error("TrouterService is stopped")),void 0!==this.trouterServer&&this.trouterServer.stop(O)},k.prototype.setEcsConfig=function(O){return M(this,void 0,void 0,function(){var V=this;return A(this,function(U){return[2,new Promise(function(B,H){if(V.ecsCfg=O.TrouterJScriptClient,V.logger.info("Setting ECS configuration to "+JSON.stringify(V.ecsCfg)),void 0!==V.trouterServer&&void 0!==V.trouterCfg){var W=N(V.trouterCfg,V.ecsCfg);V.trouterServer.configure(W)}B()})]})})},k.prototype.checkConnection=function(O){void 0!==this.trouterServer&&this.trouterServer.checkConnection(O||!1)},k.prototype.resendRegistration=function(){return M(this,void 0,void 0,function(){return A(this,function(O){if(!this.trouterServer)throw new Error("resendRegistration called too early");return[2,this.trouterServer.resendRegistration()]})})},k.prototype.registerListener=function(O,V){return""===V||"/"!==V[0]||V.indexOf("?")>=0||V.indexOf("#")>=0?(this.logger.error("Listener path '"+V+"' is not valid"),!1):this.listeners[V]?(this.logger.error("Another listener is already registered for path '"+V+"'"),!1):(this.listeners[V]=O,this.logger.debug("Listener for path '"+V+"' registered"),this.connectionInfo&&O.onTrouterConnected(this.connectionInfo.baseEndpointUrl+V,this.connectionInfo),!0)},k.prototype.unregisterListener=function(O){for(var V=[],U=0,B=Object.keys(this.listeners);U<B.length;U++)this.listeners[H=B[U]]===O&&V.push(H);if(0===V.length)return!1;for(var W=0,te=V;W<te.length;W++){var H;delete this.listeners[H=te[W]]}return this.logger.debug("Listener for path(s) '"+V.join("', '")+"' unregistered"),!0},k.prototype.onTrouterConnected=function(O,V){this.logger.debug("Trouter is now connected");for(var U=0,B=Object.keys(this.listeners);U<B.length;U++){var H=B[U];try{this.listeners[H].onTrouterConnected(V.baseEndpointUrl+H,V)}catch(W){this.logger.error("Listener '"+H+"' threw an exception from onTrouterConnected(): "+W)}}this.connectionInfo=V,this.trouterUrlPromise.resolveUrl(O),this.notifyStateChanged(y.TrouterState.Connected,{url:O,getRemainingTtlInSec:function(){return V.connectionTtlSec}})},k.prototype.onTrouterDisconnected=function(){this.logger.debug("Trouter is now disconnected"),this.connectionInfo=null;for(var O=0,V=Object.keys(this.listeners);O<V.length;O++){var U=V[O],B=this.listeners[U];if(B.onTrouterDisconnected)try{B.onTrouterDisconnected()}catch(H){this.logger.error("Listener '"+U+"' threw an exception from onTrouterDisconnected(): "+H)}}this.notifyStateChanged(y.TrouterState.Disconnected)},k.prototype.onTrouterRequest=function(O,V){for(var U="",B=0,H=Object.keys(this.listeners);B<H.length;B++){var W=H[B];O.path.substring(0,W.length)===W&&W.length>U.length&&(U=W)}if(""===U)this.tryMessageHandlers(O,V)||(V.status=404,V.headers={"Trouter-Responder":"ClientLib"},V.send());else try{this.listeners[U].onTrouterRequest(O,V)}catch(te){this.logger.error("Listener '"+U+"' threw an exception from onTrouterRequest(): "+te),V.status=500,V.headers={"Trouter-Responder":"ClientLib"},V.send()}},k.prototype.onTrouterMessageLoss=function(O){this.logger.info("onTrouterMessageLoss called with value "+O);for(var V=!0,U=0,B=Object.keys(this.listeners);U<B.length;U++){var H=B[U],W=this.listeners[H];if(W.onTrouterMessageLoss)try{void 0===(V=W.onTrouterMessageLoss(O)&&V)&&(this.logger.error("Listener '"+H+"' did not response with boolean value onTrouterMessageLoss()"),V=!1)}catch(te){this.logger.error("Listener '"+H+"' threw an exception from onTrouterMessageLoss(): "+te),V=!1}}return V},k.prototype.onTrouterUserActivityStateAccepted=function(O){this.logger.debug("onTrouterUserActivityStateAccepted cv: "+O);for(var V=0,U=Object.keys(this.listeners);V<U.length;V++){var B=U[V],H=this.listeners[B];if(H.onTrouterUserActivityStateAccepted)try{H.onTrouterUserActivityStateAccepted(O)}catch(W){this.logger.error("Listener '"+B+"' threw an exception from onTrouterUserActivityStateAccepted(): "+W)}}},k.prototype.setUserActivityState=function(O,V){if(O!==y.UserActivityState.Active&&O!==y.UserActivityState.Inactive)throw new Error("setUserActivityState called with unsupported value "+O);if(this.logger.info("setUserActivityState called with value "+y.UserActivityState[O]),!this.trouterServer||this.state()===y.TrouterState.Unknown)throw new Error("setUserActivityState called too early");this.trouterServer.setUserActivityState(O,V)},k.prototype.state=function(){return void 0!==this.trouterServer?this.trouterServer.getState():y.TrouterState.Unknown},k.prototype.getServerState=function(){if(void 0!==this.trouterServer)return this.trouterServer.getServerState()},k.prototype.getTrouterUrlAsync=function(){return void 0!==this.trouterServer?this.trouterUrlPromise.getPromise():Promise.reject(new Error("TrouterService has not been started"))},k.prototype.onStateChanged=function(O){if(this.logger.info("onStateChanged called"),void 0===O)this.stateChangedListeners=this.stateChangedListeners.filter(function(U){return void 0===U.wrappedCallback});else{this.offStateChanged(O);var V=function(U,B){O(U,B?B.url:"")};V.wrappedCallback=O,this.stateChangedListeners.push(V)}},k.prototype.offStateChanged=function(O){this.logger.info("offStateChanged called");var V=this.stateChangedListeners.length;return this.stateChangedListeners=this.stateChangedListeners.filter(function(U){return U.wrappedCallback!==O}),V>this.stateChangedListeners.length},k.prototype.addCallback=function(O){this.logger.info("addListener called"),-1===this.stateChangedListeners.indexOf(O,0)&&void 0!==O&&this.stateChangedListeners.push(O)},k.prototype.removeCallback=function(O){this.logger.info("removeListener called");var V=this.stateChangedListeners.indexOf(O,0);return V>-1&&(this.stateChangedListeners.splice(V,1),!0)},k.prototype.registerMessageHandler=function(O){this.logger.info("registerMessageHandler is called"),this.messageHandlers.register(O)},k.prototype.clearMessageHandlers=function(){this.logger.info("clearMessageHandlers is called"),this.messageHandlers.clear()},k.prototype.notifyStateChanged=function(O,V){var U=this;this.logger.info("notifyStateChanged called, will forward to "+this.stateChangedListeners.length+" listeners"),this.stateChangedListeners.forEach(function(B){try{B(O,V)}catch(H){U.logger.error("Error in callback "+H)}})},k.prototype.tryMessageHandlers=function(O,V){if(!this.messageHandlers.active())return!1;var U,B=null;try{B=(U=JSON.parse(O.body))&&(U.evt||U.eventId)||null}catch(te){}var W=this.messageHandlers.handleMessage({eventId:B,url:(this.connectionInfo?this.connectionInfo.baseEndpointUrl:"")+O.path,body:U,rawBody:O.body,headers:O.headers});return!!W.isHandled&&(V.status=W.resultCode,W.responseHeaders&&(V.headers=W.responseHeaders),W.responseBody&&(V.body=W.responseBody),V.send(),!0)},k}();L.TrouterService=P,L.createTrouterService=function(k){return new P(k)},L.getTrouterServiceVersion=function(){return I.CLIENT_VERSION},L.replaceTrouterUrlBase=function(k,O){var V=k.indexOf("://");if(V>=0){var U=k.indexOf("/",V+3);if(U>=0)return O+k.substr(U)}return""}},function(Y,L){Y.exports=__WEBPACK_EXTERNAL_MODULE_20__},function(Y,L){}])},module.exports=L(tsregistrar)});unwrapExports(tstrouter);var constants=createCommonjsModule(function(Y,L){var N;L.__esModule=!0,L.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES=3,L.GCCHIGH_TROUTER_SERVICE_URL="https://go.trouter.gov.teams.microsoft.us/v4/a",L.GCCHIGH_REGISTRAR_SERVICE_URL="https://registrar.gov.teams.microsoft.us/V3/registrations",L.DOD_TROUTER_SERVICE_URL="https://go.trouter.dod.teams.microsoft.us/v4/a",L.DOD_REGISTRAR_SERVICE_URL="https://registrar.dod.teams.microsoft.us/V3/registrations",L.INT_TROUTER_SERVICE_URL="https://go.trouter-int.skype.net/v4/a",L.INT_REGISTRAR_SERVICE_URL="https://edge.skype.net/registrar/testenv/v3/registrations",L.PUBLIC_TROUTER_SERVICE_URL="https://go.trouter.skype.com/v4/a",L.PUBLIC_REGISTRAR_SERVICE_URL="https://edge.skype.com/registrar/prod/v3/registrations",(N=L.CloudType||(L.CloudType={})).Public="Public",N.GccHigh="GCC High",N.Dod="DoD",function(N){N.OrgId="orgid",N.Acs="acs",N.Spool="spool",N.GccHigh="gcch",N.GccHighAcs="gcch-acs",N.Dod="dod",N.DodAcs="dod-acs"}(L.CloudPrefix||(L.CloudPrefix={}))});unwrapExports(constants);var constants_1=constants.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES,constants_2=constants.GCCHIGH_TROUTER_SERVICE_URL,constants_3=constants.GCCHIGH_REGISTRAR_SERVICE_URL,constants_4=constants.DOD_TROUTER_SERVICE_URL,constants_5=constants.DOD_REGISTRAR_SERVICE_URL,constants_6=constants.INT_TROUTER_SERVICE_URL,constants_7=constants.INT_REGISTRAR_SERVICE_URL,constants_8=constants.PUBLIC_TROUTER_SERVICE_URL,constants_9=constants.PUBLIC_REGISTRAR_SERVICE_URL,constants_10=constants.CloudType,constants_11=constants.CloudPrefix,TrouterUtils=createCommonjsModule(function(Y,L){var T=commonjsGlobal&&commonjsGlobal.__awaiter||function(P,k,O,V){return new(O||(O=Promise))(function(B,H){function W(pe){try{$(V.next(pe))}catch(R){H(R)}}function te(pe){try{$(V.throw(pe))}catch(R){H(R)}}function $(pe){pe.done?B(pe.value):function(B){return B instanceof O?B:new O(function(H){H(B)})}(pe.value).then(W,te)}$((V=V.apply(P,k||[])).next())})},p=commonjsGlobal&&commonjsGlobal.__generator||function(P,k){var V,U,B,H,O={label:0,sent:function(){if(1&B[0])throw B[1];return B[1]},trys:[],ops:[]};return H={next:W(0),throw:W(1),return:W(2)},"function"==typeof Symbol&&(H[Symbol.iterator]=function(){return this}),H;function W($){return function(pe){return function($){if(V)throw new TypeError("Generator is already executing.");for(;O;)try{if(V=1,U&&(B=2&$[0]?U.return:$[0]?U.throw||((B=U.return)&&B.call(U),0):U.next)&&!(B=B.call(U,$[1])).done)return B;switch(U=0,B&&($=[2&$[0],B.value]),$[0]){case 0:case 1:B=$;break;case 4:return O.label++,{value:$[1],done:!1};case 5:O.label++,U=$[1],$=[0];continue;case 7:$=O.ops.pop(),O.trys.pop();continue;default:if(!(B=(B=O.trys).length>0&&B[B.length-1])&&(6===$[0]||2===$[0])){O=0;continue}if(3===$[0]&&(!B||$[1]>B[0]&&$[1]<B[3])){O.label=$[1];break}if(6===$[0]&&O.label<B[1]){O.label=B[1],B=$;break}if(B&&O.label<B[2]){O.label=B[2],O.ops.push($);break}B[2]&&O.ops.pop(),O.trys.pop();continue}$=k.call(P,O)}catch(pe){$=[6,pe],U=0}finally{V=B=0}if(5&$[0])throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}([$,pe])}}};L.__esModule=!0;var N=new Map([["chatMessageReceived",200],["typingIndicatorReceived",245],["readReceiptReceived",246],["chatMessageEdited",247],["chatMessageDeleted",248],["chatThreadCreated",257],["chatThreadPropertiesUpdated",258],["chatThreadDeleted",259],["participantsAdded",260],["participantsRemoved",261]]),m="8:orgid:",x="8:dod:",u="8:gcch:",g="8:teamsvisitor:";L.toMessageHandler=function(P,k){var O=N.get(P);return{handleMessage:function(V){var U=null;if((null==V?void 0:V.rawBody)&&(U=JSON.parse(V.rawBody)),null!==U&&U.eventId===O){var B=y(P,U);if(null!==B)return k(B),{isHandled:!0,resultCode:200}}}}};var y=function(P,k){if("chatMessageReceived"===P)return{threadId:(O=k).groupId,sender:h(O.senderId),senderDisplayName:O.senderDisplayName,recipient:h(O.recipientMri),id:O.messageId,createdOn:new Date(O.originalArrivalTime),version:O.version,type:O.messageType,message:O.messageBody,metadata:C(O.acsChatMessageMetadata)};if("chatMessageEdited"===P)return{threadId:(O=k).groupId,sender:h(O.senderId),senderDisplayName:O.senderDisplayName,recipient:h(O.recipientMri),id:O.messageId,createdOn:new Date(O.originalArrivalTime),version:O.version,message:O.messageBody,editedOn:new Date(O.edittime),type:O.messageType,metadata:C(O.acsChatMessageMetadata)};if("chatMessageDeleted"===P)return{threadId:(O=k).groupId,sender:h(O.senderId),senderDisplayName:O.senderDisplayName,recipient:h(O.recipientMri),id:O.messageId,createdOn:new Date(O.originalArrivalTime),version:O.version,deletedOn:new Date(O.deletetime),type:O.messageType};if("typingIndicatorReceived"===P)return{threadId:(O=k).groupId,sender:h(O.senderId),senderDisplayName:O.senderDisplayName,recipient:h(O.recipientMri),version:O.version,receivedOn:new Date(O.originalArrivalTime)};if("readReceiptReceived"===P){var O=k,B=JSON.parse(O.messageBody).consumptionhorizon.split(";");return{threadId:O.groupId,sender:h(O.senderId),senderDisplayName:"",recipient:h(O.recipientMri),chatMessageId:O.messageId,readOn:new Date(+B[1])}}if("chatThreadCreated"===P){O=k;var H=JSON.parse(unescape(O.createdBy)),W=JSON.parse(unescape(O.members)),te=JSON.parse(unescape(O.properties)),$={id:h(H.participantId),displayName:H.displayName},pe=W.map(function(q){return{id:h(q.participantId),displayName:q.displayName}});return{threadId:O.threadId,createdOn:new Date(O.createTime),createdBy:$,version:O.version,participants:pe,properties:te}}if("chatThreadPropertiesUpdated"===P){O=k;var R=JSON.parse(unescape(O.editedBy)),r=(te=JSON.parse(unescape(O.properties)),{id:h(R.participantId),displayName:R.displayName});return{threadId:O.threadId,updatedOn:new Date(O.editTime),updatedBy:r,version:O.version,properties:te}}if("chatThreadDeleted"===P){O=k;var s=JSON.parse(unescape(O.deletedBy)),l={id:h(s.participantId),displayName:s.displayName};return{threadId:O.threadId,deletedOn:new Date(O.deleteTime),deletedBy:l,version:O.version}}if("participantsAdded"===P){O=k;var a=JSON.parse(unescape(O.addedBy)),f=JSON.parse(unescape(O.participantsAdded)),_={id:h(a.participantId),displayName:a.displayName};return pe=f.map(function(J){return{id:h(J.participantId),displayName:J.displayName,shareHistoryTime:new Date(J.shareHistoryTime)}}),{threadId:O.threadId,addedOn:new Date(O.time),addedBy:_,version:O.version,participantsAdded:pe}}if("participantsRemoved"===P){O=k;var D=JSON.parse(unescape(O.removedBy)),d=JSON.parse(unescape(O.participantsRemoved)),i={id:h(D.participantId),displayName:D.displayName};return pe=d.map(function(J){return{id:h(J.participantId),displayName:J.displayName,shareHistoryTime:new Date(J.shareHistoryTime)}}),{threadId:O.threadId,removedOn:new Date(O.time),removedBy:i,version:O.version,participantsRemoved:pe}}return null};L.toLogProvider=function(P){return{log:function(){for(var k=[],O=0;O<arguments.length;O++)k[O]=arguments[O];return P.info(k)},warn:function(){for(var k=[],O=0;O<arguments.length;O++)k[O]=arguments[O];return P.warning(k)},error:function(){for(var k=[],O=0;O<arguments.length;O++)k[O]=arguments[O];return P.error(k)},debug:function(){for(var k=[],O=0;O<arguments.length;O++)k[O]=arguments[O];return P.verbose(k)},info:function(){for(var k=[],O=0;O<arguments.length;O++)k[O]=arguments[O];return P.verbose(k)}}},L.toTelemetrySender=function(P){return{logEvent:function(k){return P.info(k)}}};var h=function(P){return P.startsWith(m)?{kind:"microsoftTeamsUser",rawId:P,microsoftTeamsUserId:P.substring(m.length),isAnonymous:!1,cloud:"public"}:P.startsWith(x)?{kind:"microsoftTeamsUser",rawId:P,microsoftTeamsUserId:P.substring(x.length),isAnonymous:!1,cloud:"dod"}:P.startsWith(u)?{kind:"microsoftTeamsUser",rawId:P,microsoftTeamsUserId:P.substring(u.length),isAnonymous:!1,cloud:"gcch"}:P.startsWith(g)?{kind:"microsoftTeamsUser",rawId:P,microsoftTeamsUserId:P.substring(g.length),isAnonymous:!0}:P.startsWith("4:")?{kind:"phoneNumber",rawId:P,phoneNumber:P.substring("4:".length)}:P.startsWith("8:acs:")||P.startsWith("8:spool:")?{kind:"communicationUser",communicationUserId:P}:{kind:"unknown",id:P}},C=function(P){return null==P||""===P||"null"===P?{}:JSON.parse(P)};function v(P){return coreHttp.isNode?Buffer.from(P,"base64").toString():atob(P)}function S(P){switch(P.substring(0,P.indexOf(":"))){case constants.CloudPrefix.OrgId:case constants.CloudPrefix.Acs:case constants.CloudPrefix.Spool:return constants.CloudType.Public;case constants.CloudPrefix.GccHigh:case constants.CloudPrefix.GccHighAcs:return constants.CloudType.GccHigh;case constants.CloudPrefix.Dod:case constants.CloudPrefix.DodAcs:return constants.CloudType.Dod;default:return constants.CloudType.Public}}L.base64decode=v,L.getCloudTypeFromCredential=function(P){return T(void 0,void 0,void 0,function(){var k;return p(this,function(B){switch(B.label){case 0:return[4,P.getToken()];case 1:return k=B.sent(),[2,S(function(P){var O=(null==P?void 0:P.split("."))[1];if(void 0===O)throw new Error("Invalid token");return O=O.replace(/-/g,"+").replace(/_/g,"/"),JSON.parse(decodeURIComponent(escape(v(O))))}(null==k?void 0:k.token).skypeid)]}})})}});unwrapExports(TrouterUtils);var TrouterUtils_1=TrouterUtils.toMessageHandler,TrouterUtils_2=TrouterUtils.toLogProvider,TrouterUtils_3=TrouterUtils.toTelemetrySender,TrouterUtils_4=TrouterUtils.base64decode,TrouterUtils_5=TrouterUtils.getCloudTypeFromCredential,TrouterSettings=createCommonjsModule(function(Y,L){var T=commonjsGlobal&&commonjsGlobal.__awaiter||function(M,A,I,y){return new(I||(I=Promise))(function(C,v){function w(k){try{P(y.next(k))}catch(O){v(O)}}function S(k){try{P(y.throw(k))}catch(O){v(O)}}function P(k){k.done?C(k.value):function(C){return C instanceof I?C:new I(function(v){v(C)})}(k.value).then(w,S)}P((y=y.apply(M,A||[])).next())})},p=commonjsGlobal&&commonjsGlobal.__generator||function(M,A){var y,h,C,v,I={label:0,sent:function(){if(1&C[0])throw C[1];return C[1]},trys:[],ops:[]};return v={next:w(0),throw:w(1),return:w(2)},"function"==typeof Symbol&&(v[Symbol.iterator]=function(){return this}),v;function w(P){return function(k){return function(P){if(y)throw new TypeError("Generator is already executing.");for(;I;)try{if(y=1,h&&(C=2&P[0]?h.return:P[0]?h.throw||((C=h.return)&&C.call(h),0):h.next)&&!(C=C.call(h,P[1])).done)return C;switch(h=0,C&&(P=[2&P[0],C.value]),P[0]){case 0:case 1:C=P;break;case 4:return I.label++,{value:P[1],done:!1};case 5:I.label++,h=P[1],P=[0];continue;case 7:P=I.ops.pop(),I.trys.pop();continue;default:if(!(C=(C=I.trys).length>0&&C[C.length-1])&&(6===P[0]||2===P[0])){I=0;continue}if(3===P[0]&&(!C||P[1]>C[0]&&P[1]<C[3])){I.label=P[1];break}if(6===P[0]&&I.label<C[1]){I.label=C[1],C=P;break}if(C&&I.label<C[2]){I.label=C[2],I.ops.push(P);break}C[2]&&I.ops.pop(),I.trys.pop();continue}P=A.call(M,I)}catch(k){P=[6,k],h=0}finally{y=C=0}if(5&P[0])throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}([P,k])}}};L.__esModule=!0;var N={version:"1.0.0",registrationId:"",sessionId:"",pnhAppId:"AcsWeb",pnhTemplate:"AcsWeb_Chat_1.2",platform:"SPOOL",platformUIVersion:"0.0.0",environment:"",productName:"acs-chat-web",trouterServiceUrl:constants.PUBLIC_TROUTER_SERVICE_URL,registrarServiceUrl:constants.PUBLIC_REGISTRAR_SERVICE_URL,registrarRefreshTimeoutInMs:35e4,timeoutOptions:{connectionTimeoutMs:2e4,fetchTimeoutMs:1e4,pingTimeoutMs:4e4,pongTimeoutMs:5e3,maxBackoffMs:5e4,requestTimeoutMs:5e3},maxRegistrationTimeInMs:72e5},m=function(){var M=N;return M.registrationId=coreHttp.generateUuid(),M.sessionId=coreHttp.generateUuid(),M};L.createSettings=function(M,A){return T(void 0,void 0,void 0,function(){var I,y,h;return p(this,function(C){switch(C.label){case 0:return"INT"!==(null==A?void 0:A.environment)?[3,1]:(I=function(){var M=m();return M.pnhAppId="cns-e2e-test",M.pnhTemplate="cns-e2e-test:1.2",M.registrarServiceUrl=constants.INT_REGISTRAR_SERVICE_URL,M.trouterServiceUrl=constants.INT_TROUTER_SERVICE_URL,M}(),[3,3]);case 1:return[4,TrouterUtils.getCloudTypeFromCredential(M)];case 2:y=C.sent(),I=y===constants.CloudType.GccHigh?function(){var M=m();return M.registrarServiceUrl=constants.GCCHIGH_REGISTRAR_SERVICE_URL,M.trouterServiceUrl=constants.GCCHIGH_TROUTER_SERVICE_URL,M}():y===constants.CloudType.Dod?function(){var M=m();return M.registrarServiceUrl=constants.DOD_REGISTRAR_SERVICE_URL,M.trouterServiceUrl=constants.DOD_TROUTER_SERVICE_URL,M}():m(),C.label=3;case 3:return I.maxRegistrationTimeInMs=null!==(h=null==A?void 0:A.registrationTimeInMs)&&void 0!==h?h:N.maxRegistrationTimeInMs,[2,I]}})})},L.defaultTelemetrySettings={enabled:!1}});unwrapExports(TrouterSettings);var TrouterSettings_1=TrouterSettings.createSettings,TrouterSettings_2=TrouterSettings.defaultTelemetrySettings,SignalingClient=createCommonjsModule(function(Y,L){var x,T=commonjsGlobal&&commonjsGlobal.__awaiter||function(x,u,g,M){return new(g||(g=Promise))(function(I,y){function h(w){try{v(M.next(w))}catch(S){y(S)}}function C(w){try{v(M.throw(w))}catch(S){y(S)}}function v(w){w.done?I(w.value):function(I){return I instanceof g?I:new g(function(y){y(I)})}(w.value).then(h,C)}v((M=M.apply(x,u||[])).next())})},p=commonjsGlobal&&commonjsGlobal.__generator||function(x,u){var M,A,I,y,g={label:0,sent:function(){if(1&I[0])throw I[1];return I[1]},trys:[],ops:[]};return y={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(y[Symbol.iterator]=function(){return this}),y;function h(v){return function(w){return function(v){if(M)throw new TypeError("Generator is already executing.");for(;g;)try{if(M=1,A&&(I=2&v[0]?A.return:v[0]?A.throw||((I=A.return)&&I.call(A),0):A.next)&&!(I=I.call(A,v[1])).done)return I;switch(A=0,I&&(v=[2&v[0],I.value]),v[0]){case 0:case 1:I=v;break;case 4:return g.label++,{value:v[1],done:!1};case 5:g.label++,A=v[1],v=[0];continue;case 7:v=g.ops.pop(),g.trys.pop();continue;default:if(!(I=(I=g.trys).length>0&&I[I.length-1])&&(6===v[0]||2===v[0])){g=0;continue}if(3===v[0]&&(!I||v[1]>I[0]&&v[1]<I[3])){g.label=v[1];break}if(6===v[0]&&g.label<I[1]){g.label=I[1],I=v;break}if(I&&g.label<I[2]){g.label=I[2],g.ops.push(v);break}I[2]&&g.ops.pop(),g.trys.pop();continue}v=u.call(x,g)}catch(w){v=[6,w],A=0}finally{M=I=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([v,w])}}};L.__esModule=!0,(x=L.ConnectionState||(L.ConnectionState={}))[x.Unknown=0]="Unknown",x[x.Connected=2]="Connected",x[x.Disconnected=3]="Disconnected",x[x.Switching=9]="Switching";var m=function(){function x(u,g,M){this.credential=u,this.logger=g,this.options=M,this.stateChangedListener=null,this.tokenFetchRetries=0,this.trouter=tstrouter.createTrouterService(TrouterUtils.toLogProvider(g))}return x.prototype.start=function(){return T(this,void 0,void 0,function(){var u,g,M=this;return p(this,function(A){switch(A.label){case 0:return void 0!==this.config?[3,2]:(u=this,g={},[4,TrouterSettings.createSettings(this.credential,this.options)]);case 1:u.config=(g.trouterSettings=A.sent(),g.skypeTokenProvider=function(I){return T(M,void 0,void 0,function(){var y,h;return p(this,function(C){switch(C.label){case 0:return I?(this.tokenFetchRetries+=1,this.tokenFetchRetries>constants.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES?[4,this.stop(!0)]:[3,2]):[3,3];case 1:throw C.sent(),new Error("Access token is expired and failed to fetch a valid one after "+constants.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES+" retries");case 2:return[3,4];case 3:this.tokenFetchRetries=0,C.label=4;case 4:return h=(y=Promise).resolve,[4,this.credential.getToken()];case 5:return[2,h.apply(y,[C.sent().token])]}})})},g.telemetryConfig={eventLogger:TrouterUtils.toTelemetrySender(this.logger),settings:TrouterSettings.defaultTelemetrySettings},g),A.label=2;case 2:return this.trouter.start(this.config),this.trouter.setUserActivityState(tstrouter.UserActivityState.Active),[2]}})})},x.prototype.stop=function(u){return T(this,void 0,void 0,function(){return p(this,function(g){return this.trouter.offStateChanged(this.stateChangedListener),this.trouter.clearMessageHandlers(),this.trouter.stop(null!=u?u:this.tokenFetchRetries>constants.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES),[2]})})},x.prototype.on=function(u,g){if("connectionChanged"===u)return this.trouter.offStateChanged(this.stateChangedListener),this.stateChangedListener=function(M,A){return g(M)},void this.trouter.onStateChanged(this.stateChangedListener);this.trouter.registerMessageHandler(TrouterUtils.toMessageHandler(u,g))},x}();L.CommunicationSignalingClient=m});unwrapExports(SignalingClient);var SignalingClient_1=SignalingClient.ConnectionState,SignalingClient_2=SignalingClient.CommunicationSignalingClient,src=createCommonjsModule(function(Y,L){L.__esModule=!0,function(p){for(var N in p)L.hasOwnProperty(N)||(L[N]=p[N])}(SignalingClient)}),index=unwrapExports(src);module.exports=index},434:(Y,L,T)=>{"use strict";function p(N){return N&&"function"==typeof N.getToken&&(void 0===N.signRequest||N.getToken.length>0)}T.d(L,{c:()=>p})},1138:(Y,L,T)=>{"use strict";T.d(L,{M:()=>p});var p=(()=>{return(N=p||(p={}))[N.OFF=0]="OFF",N[N.ERROR=1]="ERROR",N[N.WARNING=2]="WARNING",N[N.INFO=3]="INFO",p;var N})()},8003:(Y,L,T)=>{"use strict";function p(ve){return ve.toLowerCase()}function N(ve){if(ve&&"object"==typeof ve){const Q=ve;if("function"==typeof Q.rawHeaders&&"function"==typeof Q.clone&&"function"==typeof Q.get&&"function"==typeof Q.set&&"function"==typeof Q.contains&&"function"==typeof Q.remove&&"function"==typeof Q.headersArray&&"function"==typeof Q.headerValues&&"function"==typeof Q.headerNames&&"function"==typeof Q.toJson)return!0}return!1}T.r(L),T.d(L,{AccessTokenRefresher:()=>Fi,ApiKeyCredentials:()=>ws,BaseRequestPolicy:()=>Ee.U,BasicAuthenticationCredentials:()=>Aa,Constants:()=>dn.g,DefaultHttpClient:()=>oe,ExpiringAccessTokenCache:()=>so,HttpHeaders:()=>m,HttpPipelineLogLevel:()=>Z.M,MapperType:()=>b,QueryCollectionFormat:()=>Ur,RequestPolicyOptions:()=>Ee._,RestError:()=>Ce,RetryMode:()=>Kt,Serializer:()=>I,ServiceClient:()=>Tn,TopicCredentials:()=>ao,URLBuilder:()=>ge.UK,URLQuery:()=>ge.$4,WebResource:()=>q,XML_ATTRKEY:()=>A.c,XML_CHARKEY:()=>A.I,applyMixins:()=>M.ef,bearerTokenAuthenticationPolicy:()=>$r.v,createPipelineFromOptions:()=>Wn,createSpanFunction:()=>ei,delay:()=>pn.g,deserializationPolicy:()=>Je,deserializeResponseBody:()=>On,disableResponseDecompressionPolicy:()=>xa,encodeUri:()=>M.Hh,executePromisesSequentially:()=>M.Zf,exponentialRetryPolicy:()=>Cn,flattenResponse:()=>Xr,generateClientRequestIdPolicy:()=>br,generateUuid:()=>M.Rl,getDefaultProxySettings:()=>vs,getDefaultUserAgentValue:()=>Co,isDuration:()=>M._9,isNode:()=>M.UG,isTokenCredential:()=>Oi.c,isValidUuid:()=>M.TP,keepAlivePolicy:()=>ze,logPolicy:()=>xt,operationOptionsToRequestOptionsBase:()=>Re,parseXML:()=>He,promiseToCallback:()=>M._Q,promiseToServiceCallback:()=>M.yj,proxyPolicy:()=>cn,redirectPolicy:()=>Qt,serializeObject:()=>d,signingPolicy:()=>ys,stringifyXML:()=>at,stripRequest:()=>M.Fl,stripResponse:()=>M.eg,systemErrorRetryPolicy:()=>zo,throttlingRetryPolicy:()=>Eo,tracingPolicy:()=>It,userAgentPolicy:()=>Ut});class m{constructor(Q){if(this._headersMap={},Q)for(const ne in Q)this.set(ne,Q[ne])}set(Q,ne){this._headersMap[p(Q)]={name:Q,value:ne.toString()}}get(Q){const ne=this._headersMap[p(Q)];return ne?ne.value:void 0}contains(Q){return!!this._headersMap[p(Q)]}remove(Q){const ne=this.contains(Q);return delete this._headersMap[p(Q)],ne}rawHeaders(){return this.toJson({preserveCase:!0})}headersArray(){const Q=[];for(const ne in this._headersMap)Q.push(this._headersMap[ne]);return Q}headerNames(){const Q=[],ne=this.headersArray();for(let be=0;be<ne.length;++be)Q.push(ne[be].name);return Q}headerValues(){const Q=[],ne=this.headersArray();for(let be=0;be<ne.length;++be)Q.push(ne[be].value);return Q}toJson(Q={}){const ne={};if(Q.preserveCase)for(const be in this._headersMap){const De=this._headersMap[be];ne[De.name]=De.value}else for(const be in this._headersMap){const De=this._headersMap[be];ne[p(De.name)]=De.value}return ne}toString(){return JSON.stringify(this.toJson({preserveCase:!0}))}clone(){const Q={};for(const ne in this._headersMap){const be=this._headersMap[ne];Q[be.name]=be.value}return new m(Q)}}function u(ve){let Q="";for(let ne=0;ne<ve.length;ne++)Q+=String.fromCharCode(ve[ne]);return btoa(Q)}function g(ve){const Q=atob(ve),ne=new Uint8Array(Q.length);for(let be=0;be<Q.length;be++)ne[be]=Q.charCodeAt(be);return ne}var M=T(7694),A=T(4510);class I{constructor(Q={},ne){this.modelMappers=Q,this.isXML=ne}validateConstraints(Q,ne,be){const De=(je,rt)=>{throw new Error(`"${be}" with value "${ne}" should satisfy the constraint "${je}": ${rt}.`)};if(Q.constraints&&null!=ne){const je=ne,{ExclusiveMaximum:rt,ExclusiveMinimum:pt,InclusiveMaximum:yt,InclusiveMinimum:vt,MaxItems:bt,MaxLength:Ot,MinItems:Dt,MinLength:At,MultipleOf:gn,Pattern:fn,UniqueItems:qt}=Q.constraints;null!=rt&&je>=rt&&De("ExclusiveMaximum",rt),null!=pt&&je<=pt&&De("ExclusiveMinimum",pt),null!=yt&&je>yt&&De("InclusiveMaximum",yt),null!=vt&&je<vt&&De("InclusiveMinimum",vt);const Ft=ne;if(null!=bt&&Ft.length>bt&&De("MaxItems",bt),null!=Ot&&Ft.length>Ot&&De("MaxLength",Ot),null!=Dt&&Ft.length<Dt&&De("MinItems",Dt),null!=At&&Ft.length<At&&De("MinLength",At),null!=gn&&je%gn!=0&&De("MultipleOf",gn),fn){const Bn="string"==typeof fn?new RegExp(fn):fn;("string"!=typeof ne||null===ne.match(Bn))&&De("Pattern",fn)}qt&&Ft.some((Bn,pr,nr)=>nr.indexOf(Bn)!==pr)&&De("UniqueItems",qt)}}serialize(Q,ne,be,De={}){var je,rt,pt;const yt={rootName:null!==(je=De.rootName)&&void 0!==je?je:"",includeRoot:null!==(rt=De.includeRoot)&&void 0!==rt&&rt,xmlCharKey:null!==(pt=De.xmlCharKey)&&void 0!==pt?pt:A.I};let vt={};const bt=Q.type.name;be||(be=Q.serializedName),null!==bt.match(/^Sequence$/i)&&(vt=[]),Q.isConstant&&(ne=Q.defaultValue);const{required:Ot,nullable:Dt}=Q;if(Ot&&Dt&&void 0===ne)throw new Error(`${be} cannot be undefined.`);if(Ot&&!Dt&&null==ne)throw new Error(`${be} cannot be null or undefined.`);if(!Ot&&!1===Dt&&null===ne)throw new Error(`${be} cannot be null.`);return null==ne||null!==bt.match(/^any$/i)?vt=ne:null!==bt.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)?vt=function(ve,Q,ne){if(null!=ne)if(null!==ve.match(/^Number$/i)){if("number"!=typeof ne)throw new Error(`${Q} with value ${ne} must be of type number.`)}else if(null!==ve.match(/^String$/i)){if("string"!=typeof ne.valueOf())throw new Error(`${Q} with value "${ne}" must be of type string.`)}else if(null!==ve.match(/^Uuid$/i)){if("string"!=typeof ne.valueOf()||!M.TP(ne))throw new Error(`${Q} with value "${ne}" must be of type string and a valid uuid.`)}else if(null!==ve.match(/^Boolean$/i)){if("boolean"!=typeof ne)throw new Error(`${Q} with value ${ne} must be of type boolean.`)}else if(null!==ve.match(/^Stream$/i)){const be=typeof ne;if(!("string"===be||"function"===be||ne instanceof ArrayBuffer||ArrayBuffer.isView(ne)||("function"==typeof Blob||"object"==typeof Blob)&&ne instanceof Blob))throw new Error(`${Q} must be a string, Blob, ArrayBuffer, ArrayBufferView, or a function returning NodeJS.ReadableStream.`)}return ne}(bt,be,ne):null!==bt.match(/^Enum$/i)?vt=function(ve,Q,ne){if(!Q)throw new Error(`Please provide a set of allowedValues to validate ${ve} as an Enum Type.`);if(!Q.some(De=>"string"==typeof De.valueOf()?De.toLowerCase()===ne.toLowerCase():De===ne))throw new Error(`${ne} is not a valid value for ${ve}. The valid values are: ${JSON.stringify(Q)}.`);return ne}(be,Q.type.allowedValues,ne):null!==bt.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)?vt=function(ve,Q,ne){if(null!=Q)if(null!==ve.match(/^Date$/i)){if(!(Q instanceof Date||"string"==typeof Q.valueOf()&&!isNaN(Date.parse(Q))))throw new Error(`${ne} must be an instanceof Date or a string in ISO8601 format.`);Q=Q instanceof Date?Q.toISOString().substring(0,10):new Date(Q).toISOString().substring(0,10)}else if(null!==ve.match(/^DateTime$/i)){if(!(Q instanceof Date||"string"==typeof Q.valueOf()&&!isNaN(Date.parse(Q))))throw new Error(`${ne} must be an instanceof Date or a string in ISO8601 format.`);Q=Q instanceof Date?Q.toISOString():new Date(Q).toISOString()}else if(null!==ve.match(/^DateTimeRfc1123$/i)){if(!(Q instanceof Date||"string"==typeof Q.valueOf()&&!isNaN(Date.parse(Q))))throw new Error(`${ne} must be an instanceof Date or a string in RFC-1123 format.`);Q=Q instanceof Date?Q.toUTCString():new Date(Q).toUTCString()}else if(null!==ve.match(/^UnixTime$/i)){if(!(Q instanceof Date||"string"==typeof Q.valueOf()&&!isNaN(Date.parse(Q))))throw new Error(`${ne} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);Q=function(ve){if(ve)return"string"==typeof ve.valueOf()&&(ve=new Date(ve)),Math.floor(ve.getTime()/1e3)}(Q)}else if(null!==ve.match(/^TimeSpan$/i)&&!M._9(Q))throw new Error(`${ne} must be a string in ISO 8601 format. Instead was "${Q}".`);return Q}(bt,ne,be):null!==bt.match(/^ByteArray$/i)?vt=function(ve,Q){let ne="";if(null!=Q){if(!(Q instanceof Uint8Array))throw new Error(`${ve} must be of type Uint8Array.`);ne=u(Q)}return ne}(be,ne):null!==bt.match(/^Base64Url$/i)?vt=function(ve,Q){let ne="";if(null!=Q){if(!(Q instanceof Uint8Array))throw new Error(`${ve} must be of type Uint8Array.`);ne=function(ve){if(ve){if(!(ve instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");return function(ve,Q){let ne=ve.length;for(;ne-1>=0&&"="===ve[ne-1];)--ne;return ve.substr(0,ne)}(u(ve)).replace(/\+/g,"-").replace(/\//g,"_")}}(Q)||""}return ne}(be,ne):null!==bt.match(/^Sequence$/i)?vt=function(ve,Q,ne,be,De,je){if(!Array.isArray(ne))throw new Error(`${be} must be of type Array.`);const rt=Q.type.element;if(!rt||"object"!=typeof rt)throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${be}.`);const pt=[];for(let yt=0;yt<ne.length;yt++){const vt=ve.serialize(rt,ne[yt],be,je);if(De&&rt.xmlNamespace){const bt=rt.xmlNamespacePrefix?`xmlns:${rt.xmlNamespacePrefix}`:"xmlns";"Composite"===rt.type.name?(pt[yt]=Object.assign({},vt),pt[yt][A.c]={[bt]:rt.xmlNamespace}):(pt[yt]={},pt[yt][je.xmlCharKey]=vt,pt[yt][A.c]={[bt]:rt.xmlNamespace})}else pt[yt]=vt}return pt}(this,Q,ne,be,Boolean(this.isXML),yt):null!==bt.match(/^Dictionary$/i)?vt=function(ve,Q,ne,be,De,je){if("object"!=typeof ne)throw new Error(`${be} must be of type object.`);const rt=Q.type.value;if(!rt||"object"!=typeof rt)throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${be}.`);const pt={};for(const yt of Object.keys(ne)){const vt=ve.serialize(rt,ne[yt],be,je);pt[yt]=R(rt,vt,De,je)}if(De&&Q.xmlNamespace){const vt=pt;return vt[A.c]={[Q.xmlNamespacePrefix?`xmlns:${Q.xmlNamespacePrefix}`:"xmlns"]:Q.xmlNamespace},vt}return pt}(this,Q,ne,be,Boolean(this.isXML),yt):null!==bt.match(/^Composite$/i)&&(vt=function(ve,Q,ne,be,De,je){if(_(ve,Q)&&(Q=f(ve,Q,ne,"clientName")),null!=ne){const rt={},pt=$(ve,Q,be);for(const vt of Object.keys(pt)){const bt=pt[vt];if(bt.readOnly)continue;let Ot,Dt=rt;if(ve.isXML)Ot=bt.xmlIsWrapped?bt.xmlName:bt.xmlElementName||bt.xmlName;else{const At=v(bt.serializedName);Ot=At.pop();for(const gn of At)null==Dt[gn]&&(null!=ne[vt]||void 0!==bt.defaultValue)&&(Dt[gn]={}),Dt=Dt[gn]}if(null!=Dt){if(De&&Q.xmlNamespace){const Ft=Q.xmlNamespacePrefix?`xmlns:${Q.xmlNamespacePrefix}`:"xmlns";Dt[A.c]=Object.assign(Object.assign({},Dt[A.c]),{[Ft]:Q.xmlNamespace})}const At=""!==bt.serializedName?be+"."+bt.serializedName:be;let gn=ne[vt];const fn=_(ve,Q);fn&&fn.clientName===vt&&null==gn&&(gn=Q.serializedName);const qt=ve.serialize(bt,gn,At,je);if(void 0!==qt&&null!=Ot){const Ft=R(bt,qt,De,je);De&&bt.xmlIsAttribute?(Dt[A.c]=Dt[A.c]||{},Dt[A.c][Ot]=qt):Dt[Ot]=De&&bt.xmlIsWrapped?{[bt.xmlElementName]:Ft}:Ft}}}const yt=function(ve,Q,ne){const be=Q.type.additionalProperties;if(!be&&Q.type.className){const De=te(ve,Q,ne);return null==De?void 0:De.type.additionalProperties}return be}(ve,Q,be);if(yt){const vt=Object.keys(pt);for(const bt in ne)vt.every(Dt=>Dt!==bt)&&(rt[bt]=ve.serialize(yt,ne[bt],be+'["'+bt+'"]',je))}return rt}return ne}(this,Q,ne,be,Boolean(this.isXML),yt)),vt}deserialize(Q,ne,be,De={}){var je,rt,pt;const yt={rootName:null!==(je=De.rootName)&&void 0!==je?je:"",includeRoot:null!==(rt=De.includeRoot)&&void 0!==rt&&rt,xmlCharKey:null!==(pt=De.xmlCharKey)&&void 0!==pt?pt:A.I};if(null==ne)return this.isXML&&"Sequence"===Q.type.name&&!Q.xmlIsWrapped&&(ne=[]),void 0!==Q.defaultValue&&(ne=Q.defaultValue),ne;let vt;const bt=Q.type.name;if(be||(be=Q.serializedName),null!==bt.match(/^Composite$/i))vt=function(ve,Q,ne,be,De){var je,rt;const pt=null!==(je=De.xmlCharKey)&&void 0!==je?je:A.I;_(ve,Q)&&(Q=f(ve,Q,ne,"serializedName"));const yt=$(ve,Q,be);let vt={};const bt=[];for(const Dt of Object.keys(yt)){const At=yt[Dt],gn=v(yt[Dt].serializedName);bt.push(gn[0]);const{serializedName:fn,xmlName:qt,xmlElementName:Ft}=At;let Bn=be;""!==fn&&void 0!==fn&&(Bn=be+"."+fn);const pr=At.headerCollectionPrefix;if(pr){const nr={};for(const $n of Object.keys(ne))$n.startsWith(pr)&&(nr[$n.substring(pr.length)]=ve.deserialize(At.type.value,ne[$n],Bn,De)),bt.push($n);vt[Dt]=nr}else if(ve.isXML)if(At.xmlIsAttribute&&ne[A.c])vt[Dt]=ve.deserialize(At,ne[A.c][qt],Bn,De);else if(At.xmlIsMsText)void 0!==ne[pt]?vt[Dt]=ne[pt]:"string"==typeof ne&&(vt[Dt]=ne);else{const nr=Ft||qt||fn;if(At.xmlIsWrapped){const $n=ne[qt],Bi=null!==(rt=null==$n?void 0:$n[Ft])&&void 0!==rt?rt:[];vt[Dt]=ve.deserialize(At,Bi,Bn,De)}else vt[Dt]=ve.deserialize(At,ne[nr],Bn,De)}else{let nr,$n=ne;for(const vi of gn){if(!$n)break;$n=$n[vi]}nr=$n;const Bi=Q.type.polymorphicDiscriminator;let uo;if(Bi&&Dt===Bi.clientName&&null==nr&&(nr=Q.serializedName),Array.isArray(ne[Dt])&&""===yt[Dt].serializedName){nr=ne[Dt];const vi=ve.deserialize(At,nr,Bn,De);for(const[Da,Zu]of Object.entries(vt))Object.prototype.hasOwnProperty.call(vi,Da)||(vi[Da]=Zu);vt=vi}else(void 0!==nr||void 0!==At.defaultValue)&&(uo=ve.deserialize(At,nr,Bn,De),vt[Dt]=uo)}}const Ot=Q.type.additionalProperties;if(Ot){const Dt=At=>{for(const gn in yt)if(v(yt[gn].serializedName)[0]===At)return!1;return!0};for(const At in ne)Dt(At)&&(vt[At]=ve.deserialize(Ot,ne[At],be+'["'+At+'"]',De))}else if(ne)for(const Dt of Object.keys(ne))void 0===vt[Dt]&&!bt.includes(Dt)&&!r(Dt,De)&&(vt[Dt]=ne[Dt]);return vt}(this,Q,ne,be,yt);else{if(this.isXML){const Ot=yt.xmlCharKey,Dt=ne;null!=Dt[A.c]&&null!=Dt[Ot]&&(ne=Dt[Ot])}null!==bt.match(/^Number$/i)?(vt=parseFloat(ne),isNaN(vt)&&(vt=ne)):null!==bt.match(/^Boolean$/i)?vt="true"===ne||"false"!==ne&&ne:null!==bt.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)?vt=ne:null!==bt.match(/^(Date|DateTime|DateTimeRfc1123)$/i)?vt=new Date(ne):null!==bt.match(/^UnixTime$/i)?vt=function(ve){if(ve)return new Date(1e3*ve)}(ne):null!==bt.match(/^ByteArray$/i)?vt=g(ne):null!==bt.match(/^Base64Url$/i)?vt=function(ve){if(ve){if(ve&&"string"!=typeof ve.valueOf())throw new Error("Please provide an input of type string for converting to Uint8Array");return g(ve=ve.replace(/-/g,"+").replace(/_/g,"/"))}}(ne):null!==bt.match(/^Sequence$/i)?vt=function(ve,Q,ne,be,De){const je=Q.type.element;if(!je||"object"!=typeof je)throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${be}`);if(ne){Array.isArray(ne)||(ne=[ne]);const rt=[];for(let pt=0;pt<ne.length;pt++)rt[pt]=ve.deserialize(je,ne[pt],`${be}[${pt}]`,De);return rt}return ne}(this,Q,ne,be,yt):null!==bt.match(/^Dictionary$/i)&&(vt=function(ve,Q,ne,be,De){const je=Q.type.value;if(!je||"object"!=typeof je)throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${be}`);if(ne){const rt={};for(const pt of Object.keys(ne))rt[pt]=ve.deserialize(je,ne[pt],be,De);return rt}return ne}(this,Q,ne,be,yt))}return Q.isConstant&&(vt=Q.defaultValue),vt}}function v(ve){const Q=[];let ne="";if(ve){const be=ve.split(".");for(const De of be)"\\"===De.charAt(De.length-1)?ne+=De.substr(0,De.length-1)+".":(ne+=De,Q.push(ne),ne="")}return Q}function te(ve,Q,ne){const be=Q.type.className;if(!be)throw new Error(`Class name for model "${ne}" is not provided in the mapper "${JSON.stringify(Q,void 0,2)}".`);return ve.modelMappers[be]}function $(ve,Q,ne){let be=Q.type.modelProperties;if(!be){const De=te(ve,Q,ne);if(!De)throw new Error(`mapper() cannot be null or undefined for model "${Q.type.className}".`);if(be=null==De?void 0:De.type.modelProperties,!be)throw new Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(De)}" of type "${Q.type.className}" for object "${ne}".`)}return be}function R(ve,Q,ne,be){if(!ne||!ve.xmlNamespace)return Q;const je={[ve.xmlNamespacePrefix?`xmlns:${ve.xmlNamespacePrefix}`:"xmlns"]:ve.xmlNamespace};if(["Composite"].includes(ve.type.name)){if(Q[A.c])return Q;{const pt=Object.assign({},Q);return pt[A.c]=je,pt}}const rt={};return rt[be.xmlCharKey]=Q,rt[A.c]=je,rt}function r(ve,Q){return[A.c,Q.xmlCharKey].includes(ve)}function f(ve,Q,ne,be){const De=_(ve,Q);if(De){const je=De[be];if(null!=je){const rt=ne[je];if(null!=rt){const pt=Q.type.uberParent||Q.type.className,vt=ve.modelMappers.discriminators[rt===pt?rt:pt+"."+rt];vt&&(Q=vt)}}}return Q}function _(ve,Q){return Q.type.polymorphicDiscriminator||D(ve,Q.type.uberParent)||D(ve,Q.type.className)}function D(ve,Q){return Q&&ve.modelMappers[Q]&&ve.modelMappers[Q].type.polymorphicDiscriminator}function d(ve){const Q=ve;if(null!=ve){if(ve instanceof Uint8Array)return u(ve);if(ve instanceof Date)return ve.toISOString();if(Array.isArray(ve)){const ne=[];for(let be=0;be<ve.length;be++)ne.push(d(ve[be]));return ne}if("object"==typeof ve){const ne={};for(const be in ve)ne[be]=d(Q[be]);return ne}return ve}}const b=function(ve){const Q={};for(const ne of["Base64Url","Boolean","ByteArray","Composite","Date","DateTime","DateTimeRfc1123","Dictionary","Enum","Number","Object","Sequence","String","Stream","TimeSpan","UnixTime"])Q[ne]=ne;return Q}();class q{constructor(Q,ne,be,De,je,rt,pt,yt,vt,bt,Ot,Dt,At,gn,fn){this.streamResponseBody=rt,this.streamResponseStatusCodes=fn,this.url=Q||"",this.method=ne||"GET",this.headers=N(je)?je:new m(je),this.body=be,this.query=De,this.formData=void 0,this.withCredentials=pt||!1,this.abortSignal=yt,this.timeout=vt||0,this.onUploadProgress=bt,this.onDownloadProgress=Ot,this.proxySettings=Dt,this.keepAlive=At,this.decompressResponse=gn,this.requestId=this.headers.get("x-ms-client-request-id")||(0,M.Rl)()}validateRequestProperties(){if(!this.method)throw new Error("WebResource.method is required.");if(!this.url)throw new Error("WebResource.url is required.")}prepare(Q){if(!Q)throw new Error("options object is required");if(null==Q.method||"string"!=typeof Q.method.valueOf())throw new Error("options.method must be a string.");if(Q.url&&Q.pathTemplate)throw new Error("options.url and options.pathTemplate are mutually exclusive. Please provide exactly one of them.");if(!(null!=Q.pathTemplate&&"string"==typeof Q.pathTemplate.valueOf()||null!=Q.url&&"string"==typeof Q.url.valueOf()))throw new Error("Please provide exactly one of options.pathTemplate or options.url.");if(Q.url){if("string"!=typeof Q.url)throw new Error('options.url must be of type "string".');this.url=Q.url}if(Q.method){const ne=["GET","PUT","HEAD","DELETE","OPTIONS","POST","PATCH","TRACE"];if(-1===ne.indexOf(Q.method.toUpperCase()))throw new Error('The provided method "'+Q.method+'" is invalid. Supported HTTP methods are: '+JSON.stringify(ne))}if(this.method=Q.method.toUpperCase(),Q.pathTemplate){const{pathTemplate:ne,pathParameters:be}=Q;if("string"!=typeof ne)throw new Error('options.pathTemplate must be of type "string".');Q.baseUrl||(Q.baseUrl="https://management.azure.com");const De=Q.baseUrl;let je=De+(De.endsWith("/")?"":"/")+(ne.startsWith("/")?ne.slice(1):ne);const rt=je.match(/({[\w-]*\s*[\w-]*})/gi);if(rt&&rt.length){if(!be)throw new Error(`pathTemplate: ${ne} has been provided. Hence, options.pathParameters must also be provided.`);rt.forEach(function(pt){const yt=pt.slice(1,-1),vt=be[yt];if(null==vt||"string"!=typeof vt&&"object"!=typeof vt){const bt=JSON.stringify(be,void 0,2);throw new Error(`pathTemplate: ${ne} contains the path parameter ${yt} however, it is not present in parameters: ${bt}.The value of the path parameter can either be a "string" of the form { ${yt}: "some sample value" } or it can be an "object" of the form { "${yt}": { value: "some sample value", skipUrlEncoding: true } }.`)}if("string"==typeof vt.valueOf()&&(je=je.replace(pt,encodeURIComponent(vt))),"object"==typeof vt.valueOf()){if(!vt.value)throw new Error(`options.pathParameters[${yt}] is of type "object" but it does not contain a "value" property.`);je=je.replace(pt,vt.skipUrlEncoding?vt.value:encodeURIComponent(vt.value))}})}this.url=je}if(Q.queryParameters){const ne=Q.queryParameters;if("object"!=typeof ne)throw new Error('options.queryParameters must be of type object. It should be a JSON object of "query-parameter-name" as the key and the "query-parameter-value" as the value. The "query-parameter-value" may be fo type "string" or an "object" of the form { value: "query-parameter-value", skipUrlEncoding: true }.');this.url&&-1===this.url.indexOf("?")&&(this.url+="?");const be=[];this.query={};for(const De in ne){const je=ne[De];if(je)if("string"==typeof je)be.push(De+"="+encodeURIComponent(je)),this.query[De]=encodeURIComponent(je);else if("object"==typeof je){if(!je.value)throw new Error(`options.queryParameters[${De}] is of type "object" but it does not contain a "value" property.`);je.skipUrlEncoding?(be.push(De+"="+je.value),this.query[De]=je.value):(be.push(De+"="+encodeURIComponent(je.value)),this.query[De]=encodeURIComponent(je.value))}}this.url+=be.join("&")}if(Q.headers){const ne=Q.headers;for(const be of Object.keys(Q.headers))this.headers.set(be,ne[be])}return this.headers.get("accept-language")||this.headers.set("accept-language","en-US"),!this.headers.get("x-ms-client-request-id")&&!Q.disableClientRequestId&&this.headers.set("x-ms-client-request-id",this.requestId),this.headers.get("Content-Type")||this.headers.set("Content-Type","application/json; charset=utf-8"),this.body=Q.body,null!=Q.body&&(Q.bodyIsStream?(this.headers.get("Transfer-Encoding")||this.headers.set("Transfer-Encoding","chunked"),"application/octet-stream"!==this.headers.get("Content-Type")&&this.headers.set("Content-Type","application/octet-stream")):(Q.serializationMapper&&(this.body=new I(Q.mappers).serialize(Q.serializationMapper,Q.body,"requestBody")),Q.disableJsonStringifyOnBody||(this.body=JSON.stringify(Q.body)))),Q.spanOptions&&(this.spanOptions=Q.spanOptions),Q.tracingContext&&(this.tracingContext=Q.tracingContext),this.abortSignal=Q.abortSignal,this.onDownloadProgress=Q.onDownloadProgress,this.onUploadProgress=Q.onUploadProgress,this}clone(){const Q=new q(this.url,this.method,this.body,this.query,this.headers&&this.headers.clone(),this.streamResponseBody,this.withCredentials,this.abortSignal,this.timeout,this.onUploadProgress,this.onDownloadProgress,this.proxySettings,this.keepAlive,this.decompressResponse,this.streamResponseStatusCodes);return this.formData&&(Q.formData=this.formData),this.operationSpec&&(Q.operationSpec=this.operationSpec),this.shouldDeserialize&&(Q.shouldDeserialize=this.shouldDeserialize),this.operationResponseGetter&&(Q.operationResponseGetter=this.operationResponseGetter),Q}}var J=T(5283),ge=T(369);const me="REDACTED",le=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],fe=["api-version"];class ae{constructor({allowedHeaderNames:Q=[],allowedQueryParameters:ne=[]}={}){Q=Array.isArray(Q)?le.concat(Q):le,ne=Array.isArray(ne)?fe.concat(ne):fe,this.allowedHeaderNames=new Set(Q.map(be=>be.toLowerCase())),this.allowedQueryParameters=new Set(ne.map(be=>be.toLowerCase()))}sanitize(Q){const ne=new Set;return JSON.stringify(Q,(be,De)=>{if(De instanceof Error)return Object.assign(Object.assign({},De),{name:De.name,message:De.message});if("_headersMap"===be)return this.sanitizeHeaders(De);if("url"===be)return this.sanitizeUrl(De);if("query"===be)return this.sanitizeQuery(De);if("body"!==be&&"response"!==be&&"operationSpec"!==be){if(Array.isArray(De)||(0,M.Kn)(De)){if(ne.has(De))return"[Circular]";ne.add(De)}return De}},2)}sanitizeHeaders(Q){return this.sanitizeObject(Q,this.allowedHeaderNames,(ne,be)=>ne[be].value)}sanitizeQuery(Q){return this.sanitizeObject(Q,this.allowedQueryParameters,(ne,be)=>ne[be])}sanitizeObject(Q,ne,be){if("object"!=typeof Q||null===Q)return Q;const De={};for(const je of Object.keys(Q))De[je]=ne.has(je.toLowerCase())?be(Q,je):me;return De}sanitizeUrl(Q){if("string"!=typeof Q||null===Q)return Q;const ne=ge.UK.parse(Q),be=ne.getQuery();if(!be)return Q;const De=ge.$4.parse(be);for(const je of De.keys())this.allowedQueryParameters.has(je.toLowerCase())||De.set(je,me);return ne.setQuery(De.toString()),ne.toString()}}const de={},xe=new ae;let Ce=(()=>{class ve extends Error{constructor(ne,be,De,je,rt){super(ne),this.name="RestError",this.code=be,this.statusCode=De,this.request=je,this.response=rt,Object.setPrototypeOf(this,ve.prototype)}[de](){return`RestError: ${this.message} \n ${xe.sanitize(this)}`}}return ve.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",ve.PARSE_ERROR="PARSE_ERROR",ve})();class oe{sendRequest(Q){var ne;const be=new XMLHttpRequest;if(Q.proxySettings)throw new Error("HTTP proxy is not supported in browser environment");const De=Q.abortSignal;if(De){if(De.aborted)return Promise.reject(new J._("The operation was aborted."));const je=()=>{be.abort()};De.addEventListener("abort",je),be.addEventListener("readystatechange",()=>{be.readyState===XMLHttpRequest.DONE&&De.removeEventListener("abort",je)})}if(ye(be.upload,Q.onUploadProgress),ye(be,Q.onDownloadProgress),Q.formData){const je=Q.formData,rt=new FormData,pt=(vt,bt)=>{bt&&Object.prototype.hasOwnProperty.call(bt,"value")&&Object.prototype.hasOwnProperty.call(bt,"options")?rt.append(vt,bt.value,bt.options):rt.append(vt,bt)};for(const vt of Object.keys(je)){const bt=je[vt];if(Array.isArray(bt))for(let Ot=0;Ot<bt.length;Ot++)pt(vt,bt[Ot]);else pt(vt,bt)}Q.body=rt,Q.formData=void 0;const yt=Q.headers.get("Content-Type");yt&&-1!==yt.indexOf("multipart/form-data")&&Q.headers.remove("Content-Type")}be.open(Q.method,Q.url),be.timeout=Q.timeout,be.withCredentials=Q.withCredentials;for(const je of Q.headers.headersArray())be.setRequestHeader(je.name,je.value);return be.responseType=(null===(ne=Q.streamResponseStatusCodes)||void 0===ne?void 0:ne.size)||Q.streamResponseBody?"blob":"text",be.send(void 0===Q.body?null:Q.body),new Promise("blob"===be.responseType?(je,rt)=>{(function(ve,Q,ne,be){ve.addEventListener("readystatechange",()=>{var De;if(ve.readyState===XMLHttpRequest.HEADERS_RECEIVED)if(Q.streamResponseBody||(null===(De=Q.streamResponseStatusCodes)||void 0===De?void 0:De.has(ve.status))){const je=new Promise((rt,pt)=>{ve.addEventListener("load",()=>{rt(ve.response)}),ee(Q,ve,pt)});ne({request:Q,status:ve.status,headers:re(ve),blobBody:je})}else ve.addEventListener("load",()=>{if(ve.response){const je=new FileReader;je.onload=function(rt){var pt;const yt=null===(pt=rt.target)||void 0===pt?void 0:pt.result;ne({request:Q,status:ve.status,headers:re(ve),bodyAsText:yt})},je.onerror=function(rt){be(je.error)},je.readAsText(ve.response,"UTF-8")}else ne({request:Q,status:ve.status,headers:re(ve)})})})})(be,Q,je,rt),ee(Q,be,rt)}:function(je,rt){be.addEventListener("load",()=>je({request:Q,status:be.status,headers:re(be),bodyAsText:be.responseText})),ee(Q,be,rt)})}}function ye(ve,Q){Q&&ve.addEventListener("progress",ne=>Q({loadedBytes:ne.loaded}))}function re(ve){const Q=new m,ne=ve.getAllResponseHeaders().trim().split(/[\r\n]+/);for(const be of ne){const De=be.indexOf(":"),je=be.slice(0,De),rt=be.slice(De+2);Q.set(je,rt)}return Q}function ee(ve,Q,ne){Q.addEventListener("error",()=>ne(new Ce(`Failed to send request to ${ve.url}`,Ce.REQUEST_SEND_ERROR,void 0,ve)));const be=new J._("The operation was aborted.");Q.addEventListener("abort",()=>ne(be)),Q.addEventListener("timeout",()=>ne(be))}var Z=T(1138),ue=T(4762);function Re(ve){const{requestOptions:Q,tracingOptions:ne}=ve;let De=(0,ue._T)(ve,["requestOptions","tracingOptions"]);return Q&&(De=Object.assign(Object.assign({},De),Q)),ne&&(De.tracingContext=ne.tracingContext,De.spanOptions=null==ne?void 0:ne.spanOptions),De}var Te=T(8239),Ee=T(2462);if(!(self.document&&self.DOMParser&&self.Node&&self.XMLSerializer))throw new Error('This library depends on the following DOM objects: ["document", "DOMParser", "Node", "XMLSerializer"] to parse XML, but some of these are undefined. You may provide a polyfill to make these globally available in order to support your environment. For more information, please refer to https://aka.ms/azsdk/js/web-workers. ');let $e,_e,Ae,Ct,We;function Ne(){return $e||($e=document.implementation.createDocument(null,null,null)),$e}function Be(){return _e||(_e=new DOMParser),_e}function He(ve,Q={}){var ne,be,De,je;try{const rt={rootName:null!==(ne=Q.rootName)&&void 0!==ne?ne:"",includeRoot:null!==(be=Q.includeRoot)&&void 0!==be&&be,xmlCharKey:null!==(De=Q.xmlCharKey)&&void 0!==De?De:A.I},pt=Be().parseFromString(null!==(je=null==Ct?void 0:Ct.createHTML(ve))&&void 0!==je?je:ve,"application/xml");let yt;return function(ve){const Q=ve.getElementsByTagName("parsererror");if(Q.length>0&&function(){var ve,Q;if(void 0===We)try{const ne=null!==(ve=null==Ct?void 0:Ct.createHTML("INVALID"))&&void 0!==ve?ve:"INVALID";We=null!==(Q=Be().parseFromString(ne,"text/xml").getElementsByTagName("parsererror")[0].namespaceURI)&&void 0!==Q?Q:""}catch(ne){We=""}return We}())for(let ne=0;ne<Q.length;ne++)if(Q[ne].namespaceURI===We)throw new Error(Q[ne].innerHTML)}(pt),yt=it(rt.includeRoot?pt:pt.childNodes[0],rt),Promise.resolve(yt)}catch(rt){return Promise.reject(rt)}}function it(ve,Q){let ne={};const be=ve.childNodes.length,De=ve.childNodes[0],je=De&&1===be&&De.nodeType===Node.TEXT_NODE&&De.nodeValue||void 0,rt=function(ve){return function(ve){return!!ve.attributes}(ve)&&ve.hasAttributes()?ve:void 0}(ve);if(rt){ne[A.c]={};for(let pt=0;pt<rt.attributes.length;pt++){const yt=rt.attributes[pt];ne[A.c][yt.nodeName]=yt.nodeValue}je&&(ne[Q.xmlCharKey]=je)}else 0===be?ne="":je&&(ne=je);if(!je)for(let pt=0;pt<be;pt++){const yt=ve.childNodes[pt];if(yt.nodeType!==Node.TEXT_NODE){const vt=it(yt,Q);ne[yt.nodeName]?Array.isArray(ne[yt.nodeName])?ne[yt.nodeName].push(vt):ne[yt.nodeName]=[ne[yt.nodeName],vt]:ne[yt.nodeName]=vt}}return ne}function at(ve,Q={}){var ne,be,De;const je={rootName:null!==(ne=Q.rootName)&&void 0!==ne?ne:"root",includeRoot:null!==(be=Q.includeRoot)&&void 0!==be&&be,xmlCharKey:null!==(De=Q.xmlCharKey)&&void 0!==De?De:A.I},rt=ot(ve,je.rootName,je)[0];return'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+(Ae||(Ae=new XMLSerializer),Ae).serializeToString(rt)}function Dn(ve){const Q=[];for(const ne of Object.keys(ve)){const be=Ne().createAttribute(ne);be.value=ve[ne].toString(),Q.push(be)}return Q}function ot(ve,Q,ne){if(null==ve||"string"==typeof ve||"number"==typeof ve||"boolean"==typeof ve){const be=Ne().createElement(Q);return be.textContent=null==ve?"":ve.toString(),[be]}if(Array.isArray(ve)){const be=[];for(const De of ve)for(const je of ot(De,Q,ne))be.push(je);return be}if("object"==typeof ve){const be=Ne().createElement(Q);for(const De of Object.keys(ve))if(De===A.c)for(const je of Dn(ve[De]))be.attributes.setNamedItem(je);else if(De===ne.xmlCharKey)be.textContent=ve[De].toString();else for(const je of ot(ve[De],De,ne))be.appendChild(je);return[be]}throw new Error(`Illegal value passed to buildObject: ${ve}`)}function Je(ve,Q){return{create:(ne,be)=>new Pn(ne,be,ve,Q)}}void 0!==self.trustedTypes&&(Ct=self.trustedTypes.createPolicy("@azure/core-http#xml.browser",{createHTML:ve=>ve}));const En=["application/json","text/json"],Ge=["application/xml","application/atom+xml"],dt={expectedContentTypes:{json:En,xml:Ge}};class Pn extends Ee.U{constructor(Q,ne,be,De={}){var je;super(Q,ne),this.jsonContentTypes=be&&be.json||En,this.xmlContentTypes=be&&be.xml||Ge,this.xmlCharKey=null!==(je=De.xmlCharKey)&&void 0!==je?je:A.I}sendRequest(Q){var ne=this;return(0,Te.Z)(function*(){return ne._nextPolicy.sendRequest(Q).then(be=>On(ne.jsonContentTypes,ne.xmlContentTypes,be,{xmlCharKey:ne.xmlCharKey}))})()}}function On(ve,Q,ne,be={}){var De,je,rt;const pt={rootName:null!==(De=be.rootName)&&void 0!==De?De:"",includeRoot:null!==(je=be.includeRoot)&&void 0!==je&&je,xmlCharKey:null!==(rt=be.xmlCharKey)&&void 0!==rt?rt:A.I};return function(ve,Q,ne,be){var De;const je=pt=>{const bt=new Ce(`Error "${pt}" occurred while parsing the response body - ${ne.bodyAsText}.`,pt.code||Ce.PARSE_ERROR,ne.status,ne.request,ne);return Promise.reject(bt)};if(!(null===(De=ne.request.streamResponseStatusCodes)||void 0===De?void 0:De.has(ne.status))&&!ne.request.streamResponseBody&&ne.bodyAsText){const pt=ne.bodyAsText,yt=ne.headers.get("Content-Type")||"",vt=yt?yt.split(";").map(bt=>bt.toLowerCase()):[];if(0===vt.length||vt.some(bt=>-1!==ve.indexOf(bt)))return new Promise(bt=>{ne.parsedBody=JSON.parse(pt),bt(ne)}).catch(je);if(vt.some(bt=>-1!==Q.indexOf(bt)))return He(pt,be).then(bt=>(ne.parsedBody=bt,ne)).catch(je)}return Promise.resolve(ne)}(ve,Q,ne,pt).then(yt=>{if(!function(ve){const Q=ve.request.shouldDeserialize;let ne;return ne=void 0===Q||("boolean"==typeof Q?Q:Q(ve)),ne}(yt))return yt;const vt=yt.request.operationSpec;if(!vt||!vt.responses)return yt;const bt=function(ve){let Q;const ne=ve.request,be=ne.operationSpec;if(be){const De=ne.operationResponseGetter;Q=De?De(be,ve):be.responses[ve.status]}return Q}(yt),{error:Ot,shouldReturnResponse:Dt}=function(ve,Q,ne){var be;const De=200<=ve.status&&ve.status<300;if(function(ve){const Q=Object.keys(ve.responses);return 0===Q.length||1===Q.length&&"default"===Q[0]}(Q)?De:ne){if(!ne)return{error:null,shouldReturnResponse:!1};if(!ne.isError)return{error:null,shouldReturnResponse:!1}}const rt=null!=ne?ne:Q.responses.default,yt=(null===(be=ve.request.streamResponseStatusCodes)||void 0===be?void 0:be.has(ve.status))||ve.request.streamResponseBody?`Unexpected status code: ${ve.status}`:ve.bodyAsText,vt=new Ce(yt,void 0,ve.status,ve.request,ve);if(!rt)throw vt;const bt=rt.bodyMapper,Ot=rt.headersMapper;try{if(ve.parsedBody){const Dt=ve.parsedBody;let At;if(bt){let fn=Dt;Q.isXML&&bt.type.name===b.Sequence&&(fn="object"==typeof Dt?Dt[bt.xmlElementName]:[]),At=Q.serializer.deserialize(bt,fn,"error.response.parsedBody")}const gn=Dt.error||At||Dt;vt.code=gn.code,gn.message&&(vt.message=gn.message),bt&&(vt.response.parsedBody=At)}ve.headers&&Ot&&(vt.response.parsedHeaders=Q.serializer.deserialize(Ot,ve.headers.toJson(),"operationRes.parsedHeaders"))}catch(Dt){vt.message=`Error "${Dt.message}" occurred in deserializing the responseBody - "${ve.bodyAsText}" for the default response.`}return{error:vt,shouldReturnResponse:!1}}(yt,vt,bt);if(Ot)throw Ot;if(Dt)return yt;if(bt){if(bt.bodyMapper){let At=yt.parsedBody;vt.isXML&&bt.bodyMapper.type.name===b.Sequence&&(At="object"==typeof At?At[bt.bodyMapper.xmlElementName]:[]);try{yt.parsedBody=vt.serializer.deserialize(bt.bodyMapper,At,"operationRes.parsedBody",be)}catch(gn){throw new Ce(`Error ${gn} occurred in deserializing the responseBody - ${yt.bodyAsText}`,void 0,yt.status,yt.request,yt)}}else"HEAD"===vt.httpMethod&&(yt.parsedBody=ne.status>=200&&ne.status<300);bt.headersMapper&&(yt.parsedHeaders=vt.serializer.deserialize(bt.headersMapper,yt.headers.toJson(),"operationRes.parsedHeaders",be))}return yt})}const ft={enable:!0};function ze(ve){return{create:(Q,ne)=>new sn(Q,ne,ve||ft)}}class sn extends Ee.U{constructor(Q,ne,be){super(Q,ne),this.keepAliveOptions=be}sendRequest(Q){var ne=this;return(0,Te.Z)(function*(){return Q.keepAlive=ne.keepAliveOptions.enable,ne._nextPolicy.sendRequest(Q)})()}}const ht=["GET","HEAD"],tt={handleRedirects:!0,maxRetries:20};function Qt(ve=20){return{create:(Q,ne)=>new et(Q,ne,ve)}}class et extends Ee.U{constructor(Q,ne,be=20){super(Q,ne),this.maxRetries=be}sendRequest(Q){return this._nextPolicy.sendRequest(Q).then(ne=>Xe(this,ne,0))}}function Xe(ve,Q,ne){const{request:be,status:De}=Q,je=Q.headers.get("location");if(je&&(300===De||301===De&&ht.includes(be.method)||302===De&&ht.includes(be.method)||303===De&&"POST"===be.method||307===De)&&(!ve.maxRetries||ne<ve.maxRetries)){const rt=ge.UK.parse(be.url);return rt.setPath(je),be.url=rt.toString(),303===De&&(be.method="GET",delete be.body),ve._nextPolicy.sendRequest(be).then(pt=>Xe(ve,pt,ne+1))}return Promise.resolve(Q)}function Ht(ve){return"number"==typeof ve}function jt(ve,Q,ne,be,De){return!!Q(be,De)&&ne.retryCount<ve}function bn(ve,Q={retryCount:0,retryInterval:0},ne){ne&&(Q.error&&(ne.innerError=Q.error),Q.error=ne),Q.retryCount++;let be=Math.pow(2,Q.retryCount-1)-1;return be*=.8*ve.retryInterval+Math.floor(Math.random()*(.4*ve.retryInterval)),Q.retryInterval=Math.min(ve.minRetryInterval+be,ve.maxRetryInterval),Q}var dn=T(8006),pn=T(9484);const rn=(0,T(1326).YR)("core-http");function Cn(ve,Q,ne){return{create:(be,De)=>new xn(be,De,ve,Q,ne)}}var Kt=(()=>{return(ve=Kt||(Kt={}))[ve.Exponential=0]="Exponential",Kt;var ve})();const Nt={maxRetries:3,retryDelayInMs:3e4,maxRetryDelayInMs:9e4};class xn extends Ee.U{constructor(Q,ne,be,De,je){super(Q,ne),this.retryCount=Ht(be)?be:3,this.retryInterval=Ht(De)?De:3e4,this.maxRetryInterval=Ht(je)?je:9e4}sendRequest(Q){return this._nextPolicy.sendRequest(Q.clone()).then(ne=>wn(this,Q,ne)).catch(ne=>wn(this,Q,ne.response,void 0,ne))}}function wn(ve,Q,ne,be,De){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,Te.Z)(function*(ve,Q,ne,be,De){be=bn({retryInterval:ve.retryInterval,minRetryInterval:0,maxRetryInterval:ve.maxRetryInterval},be,De);const rt=Q.abortSignal&&Q.abortSignal.aborted;if(rt||!jt(ve.retryCount,function(pt){const yt=null==pt?void 0:pt.status;return!(503===yt&&(null==ne?void 0:ne.headers.get(dn.g.HeaderConstants.RETRY_AFTER))||void 0===yt||yt<500&&408!==yt||501===yt||505===yt)},be,ne)){if(rt||De||!ne)throw be.error||new Ce("Failed to send the request.",Ce.REQUEST_SEND_ERROR,ne&&ne.status,ne&&ne.request,ne);return ne}rn.info(`Retrying request in ${be.retryInterval}`);try{yield(0,pn.g)(be.retryInterval);const pt=yield ve._nextPolicy.sendRequest(Q.clone());return wn(ve,Q,pt,be)}catch(pt){return wn(ve,Q,ne,be,pt)}})).apply(this,arguments)}function xt(ve={}){return{create:(Q,ne)=>new Rn(Q,ne,ve)}}class Rn extends Ee.U{constructor(Q,ne,{logger:be=rn.info,allowedHeaderNames:De=[],allowedQueryParameters:je=[]}={}){super(Q,ne),this.logger=be,this.sanitizer=new ae({allowedHeaderNames:De,allowedQueryParameters:je})}get allowedHeaderNames(){return this.sanitizer.allowedHeaderNames}set allowedHeaderNames(Q){this.sanitizer.allowedHeaderNames=Q}get allowedQueryParameters(){return this.sanitizer.allowedQueryParameters}set allowedQueryParameters(Q){this.sanitizer.allowedQueryParameters=Q}sendRequest(Q){return this.logger.enabled?(this.logRequest(Q),this._nextPolicy.sendRequest(Q).then(ne=>this.logResponse(ne))):this._nextPolicy.sendRequest(Q)}logRequest(Q){this.logger(`Request: ${this.sanitizer.sanitize(Q)}`)}logResponse(Q){return this.logger(`Response status code: ${Q.status}`),this.logger(`Headers: ${this.sanitizer.sanitize(Q.headers)}`),Q}}function Zt(ve){return tn(ve.parameterPath,ve.mapper)}function tn(ve,Q){let ne;return ne="string"==typeof ve?ve:Array.isArray(ve)?ve.join("."):Q.serializedName,ne}var Oi=T(434);const ps=function(){return"x-ms-useragent"};function Co(){const ve=[{key:"core-http",value:dn.g.coreHttpVersion}],Q=function(){const ve=self.navigator;return[{key:"OS",value:(ve.oscpu||ve.platform).replace(" ","")}]}();return function(ve,Q=" ",ne="/"){return ve.map(be=>`${be.key}${be.value?`${ne}${be.value}`:""}`).join(Q)}(ve.concat(Q))}function Ut(ve){const Q=ve&&null!=ve.key?ve.key:"x-ms-useragent",ne=ve&&null!=ve.value?ve.value:Co();return{create:(be,De)=>new Vo(be,De,Q,ne)}}class Vo extends Ee.U{constructor(Q,ne,be,De){super(Q,ne),this._nextPolicy=Q,this._options=ne,this.headerKey=be,this.headerValue=De}sendRequest(Q){return this.addUserAgentHeader(Q),this._nextPolicy.sendRequest(Q)}addUserAgentHeader(Q){Q.headers||(Q.headers=new m),!Q.headers.get(this.headerKey)&&this.headerValue&&Q.headers.set(this.headerKey,this.headerValue)}}var Ur=(()=>{return(ve=Ur||(Ur={})).Csv=",",ve.Ssv=" ",ve.Tsv="\t",ve.Pipes="|",ve.Multi="Multi",Ur;var ve})(),$r=T(6354);const Mo=new Error("DisableResponseDecompressionPolicy is not supported in browser environment");function xa(){return{create:(ve,Q)=>{throw Mo}}}function br(ve="x-ms-client-request-id"){return{create:(Q,ne)=>new Ku(Q,ne,ve)}}class Ku extends Ee.U{constructor(Q,ne,be){super(Q,ne),this._requestIdHeaderName=be}sendRequest(Q){return Q.headers.contains(this._requestIdHeaderName)||Q.headers.set(this._requestIdHeaderName,Q.requestId),this._nextPolicy.sendRequest(Q)}}let gs;class Ra extends Ee.U{constructor(Q,ne){super(Q,ne)}sendRequest(Q){var ne=this;return(0,Te.Z)(function*(){if("string"==typeof Q.body&&Q.body.startsWith("[")){const be=JSON.parse(Q.body);Array.isArray(be)&&(Q.body=be.map(De=>JSON.stringify(De)+"\n").join(""))}return ne._nextPolicy.sendRequest(Q)})()}}const Ho=new Error("ProxyPolicy is not supported in browser environment");function vs(ve){}function cn(ve){return{create:(Q,ne)=>{throw Ho}}}class Li extends Ee.U{constructor(Q,ne,be=30){super(Q,ne),this._retryTimeout=be}sendRequest(Q){return this._nextPolicy.sendRequest(Q.clone()).then(ne=>function(ve,Q,ne){if(409===ne.status){const be=function(ve){let Q,ne;if(ve){try{ne=JSON.parse(ve)}catch(be){}if(ne&&ne.error&&ne.error.message&&ne.error.code&&"MissingSubscriptionRegistration"===ne.error.code){const be=ne.error.message.match(/.*'(.*)'/i);be&&(Q=be.pop())}}return Q}(ne.bodyAsText);if(be){const De=function(ve){let Q;const ne=ve.match(/.*\/subscriptions\/[a-f0-9-]+\//gi);if(!ne||!ne[0])throw new Error(`Unable to extract subscriptionId from the given url - ${ve}.`);return Q=ne[0],Q}(Q.url);return function(ve,Q,ne,be){return jo.apply(this,arguments)}(ve,De,be,Q).catch(()=>!1).then(je=>je?(Q.headers.set("x-ms-client-request-id",M.Rl()),ve._nextPolicy.sendRequest(Q.clone())):ne)}}return Promise.resolve(ne)}(this,Q,ne))}}function to(ve,Q=!1){const ne=ve.clone();return Q&&(ne.url=ve.url),ne.headers.set("x-ms-client-request-id",M.Rl()),ne.headers.set("Content-Type","application/json; charset=utf-8"),ne}function jo(){return(jo=(0,Te.Z)(function*(ve,Q,ne,be){const De=`${Q}providers/${ne}/register?api-version=2016-02-01`,je=`${Q}providers/${ne}?api-version=2016-02-01`,rt=to(be);if(rt.method="POST",rt.url=De,200!==(yield ve._nextPolicy.sendRequest(rt)).status)throw new Error(`Autoregistration of ${ne} failed. Please try registering manually.`);return Hr(ve,je,be)})).apply(this,arguments)}function Hr(ve,Q,ne){return di.apply(this,arguments)}function di(){return(di=(0,Te.Z)(function*(ve,Q,ne){const be=to(ne);be.url=Q,be.method="GET";const De=yield ve._nextPolicy.sendRequest(be),je=De.parsedBody;return!(!De.parsedBody||!je.registrationState||"Registered"!==je.registrationState)||(yield(0,pn.g)(1e3*ve._retryTimeout),Hr(ve,Q,ne))})).apply(this,arguments)}function ys(ve){return{create:(Q,ne)=>new qo(Q,ne,ve)}}class qo extends Ee.U{constructor(Q,ne,be){super(Q,ne),this.authenticationProvider=be}signRequest(Q){return this.authenticationProvider.signRequest(Q)}sendRequest(Q){return this.signRequest(Q).then(ne=>this._nextPolicy.sendRequest(ne))}}function zo(ve,Q,ne,be){return{create:(De,je)=>new Wo(De,je,ve,Q,ne,be)}}class Wo extends Ee.U{constructor(Q,ne,be,De,je,rt){super(Q,ne),this.retryCount=Ht(be)?be:3,this.retryInterval=Ht(De)?De:3e4,this.minRetryInterval=Ht(je)?je:3e3,this.maxRetryInterval=Ht(rt)?rt:9e4}sendRequest(Q){return this._nextPolicy.sendRequest(Q.clone()).catch(ne=>ro(this,Q,ne.response,ne))}}function ro(ve,Q,ne,be,De){return hi.apply(this,arguments)}function hi(){return(hi=(0,Te.Z)(function*(ve,Q,ne,be,De){if(De=bn(ve,De,be),!jt(ve.retryCount,function(rt,pt){return!(!pt||!pt.code||"ETIMEDOUT"!==pt.code&&"ESOCKETTIMEDOUT"!==pt.code&&"ECONNREFUSED"!==pt.code&&"ECONNRESET"!==pt.code&&"ENOENT"!==pt.code)},De,ne,be))return be?Promise.reject(De.error):ne;try{return yield(0,pn.g)(De.retryInterval),ve._nextPolicy.sendRequest(Q.clone())}catch(rt){return ro(ve,Q,ne,rt,De)}})).apply(this,arguments)}const So=dn.g.HttpConstants.StatusCodes;function Eo(){return{create:(ve,Q)=>new tr(ve,Q)}}const _r="The operation was aborted.";class tr extends Ee.U{constructor(Q,ne,be){super(Q,ne),this.numberOfRetries=0,this._handleResponse=be||this._defaultResponseHandler}sendRequest(Q){var ne=this;return(0,Te.Z)(function*(){const be=yield ne._nextPolicy.sendRequest(Q.clone());return be.status!==So.TooManyRequests&&be.status!==So.ServiceUnavailable?be:ne._handleResponse(Q,be)})()}_defaultResponseHandler(Q,ne){var be=this;return(0,Te.Z)(function*(){var De;const je=ne.headers.get(dn.g.HeaderConstants.RETRY_AFTER);if(je){const rt=tr.parseRetryAfterHeader(je);if(rt){if(be.numberOfRetries+=1,yield(0,pn.g)(rt,{abortSignal:Q.abortSignal,abortErrorMsg:_r}),null===(De=Q.abortSignal)||void 0===De?void 0:De.aborted)throw new J._(_r);return be.numberOfRetries<3?be.sendRequest(Q):be._nextPolicy.sendRequest(Q)}}return ne})()}static parseRetryAfterHeader(Q){const ne=Number(Q);return Number.isNaN(ne)?tr.parseDateRetryAfterHeader(Q):1e3*ne}static parseDateRetryAfterHeader(Q){try{const ne=Date.now(),De=Date.parse(Q)-ne;return Number.isNaN(De)?void 0:De}catch(ne){return}}}var cr=T(1259),ur=T(9432);const Sr=(0,cr.q)({packagePrefix:"",namespace:""});function It(ve={}){return{create:(Q,ne)=>new on(Q,ne,ve)}}class on extends Ee.U{constructor(Q,ne,be){super(Q,ne),this.userAgent=be.userAgent}sendRequest(Q){var ne=this;return(0,Te.Z)(function*(){if(!Q.tracingContext)return ne._nextPolicy.sendRequest(Q);const be=ne.tryCreateSpan(Q);if(!be)return ne._nextPolicy.sendRequest(Q);try{const De=yield ne._nextPolicy.sendRequest(Q);return ne.tryProcessResponse(be,De),De}catch(De){throw ne.tryProcessError(be,De),De}})()}tryCreateSpan(Q){var ne;try{const{span:be}=Sr(`HTTP ${Q.method}`,{tracingOptions:{spanOptions:Object.assign(Object.assign({},Q.spanOptions),{kind:ur.MU.CLIENT}),tracingContext:Q.tracingContext}});if(!be.isRecording())return void be.end();const De=null===(ne=Q.tracingContext)||void 0===ne?void 0:ne.getValue(Symbol.for("az.namespace"));"string"==typeof De&&be.setAttribute("az.namespace",De),be.setAttributes({"http.method":Q.method,"http.url":Q.url,requestId:Q.requestId}),this.userAgent&&be.setAttribute("http.user_agent",this.userAgent);const je=be.spanContext(),rt=function(ve){const Q=[];if(ve.traceId||Q.push("traceId"),ve.spanId||Q.push("spanId"),Q.length)return;const be=(ve.traceFlags||0).toString(16);return`00-${ve.traceId}-${ve.spanId}-${1===be.length?`0${be}`:be}`}(je);if(rt&&(0,ur.BM)(je)){Q.headers.set("traceparent",rt);const pt=je.traceState&&je.traceState.serialize();pt&&Q.headers.set("tracestate",pt)}return be}catch(be){return void rn.warning(`Skipping creating a tracing span due to an error: ${be.message}`)}}tryProcessError(Q,ne){try{Q.setStatus({code:ur.Qn.ERROR,message:ne.message}),ne.statusCode&&Q.setAttribute("http.status_code",ne.statusCode),Q.end()}catch(be){rn.warning(`Skipping tracing span processing due to an error: ${be.message}`)}}tryProcessResponse(Q,ne){try{Q.setAttribute("http.status_code",ne.status);const be=ne.headers.get("x-ms-request-id");be&&Q.setAttribute("serviceRequestId",be),Q.setStatus({code:ur.Qn.OK}),Q.end()}catch(be){rn.warning(`Skipping tracing span processing due to an error: ${be.message}`)}}}class Tn{constructor(Q,ne){let be;if(ne||(ne={}),this._withCredentials=ne.withCredentials||!1,this._httpClient=ne.httpClient||(gs||(gs=new oe),gs),this._requestPolicyOptions=new Ee._(ne.httpPipelineLogger),Array.isArray(ne.requestPolicyFactories))rn.info("ServiceClient: using custom request policies"),be=ne.requestPolicyFactories;else{let De;if((0,Oi.c)(Q))rn.info("ServiceClient: creating bearer token authentication policy from provided credentials"),De=(()=>{let rt;const pt=this,yt=ne;return{create(vt,bt){const Ot=function(ve,Q){if(null==ve?void 0:ve.credentialScopes){const ne=ve.credentialScopes;return Array.isArray(ne)?ne.map(be=>new URL(be).toString()):new URL(ne).toString()}if(Q)return`${Q}/.default`}(yt,pt.baseUri);if(!Ot)throw new Error("When using credential, the ServiceClient must contain a baseUri or a credentialScopes in ServiceClientOptions. Unable to create a bearerTokenAuthenticationPolicy");return null==rt&&(rt=(0,$r.v)(Q,Ot)),rt.create(vt,bt)}}})();else if(Q&&"function"==typeof Q.signRequest)rn.info("ServiceClient: creating signing policy from provided credentials"),De=ys(Q);else if(null!=Q)throw new Error("The credentials argument must implement the TokenCredential interface");if(rn.info("ServiceClient: using default request policies"),be=function(ve,Q){const ne=[];Q.generateClientRequestIdHeader&&ne.push(br(Q.clientRequestIdHeaderName)),ve&&ne.push(ve);const be=Qn(Q.userAgentHeaderName,ps),De=Qn(Q.userAgent,Co);return be&&De&&ne.push(Ut({key:be,value:De})),ne.push(Qt()),ne.push(function(ve=30){return{create:(Q,ne)=>new Li(Q,ne,ve)}}(Q.rpRegistrationRetryTimeout)),Q.noRetryPolicy||(ne.push(Cn()),ne.push(zo()),ne.push(Eo())),ne.push(Je(Q.deserializationContentTypes)),M.UG&&ne.push(cn()),ne.push(xt({logger:rn.info})),ne}(De,ne),ne.requestPolicyFactories){const je=ne.requestPolicyFactories(be);je&&(be=je)}}this._requestPolicyFactories=be}sendRequest(Q){if(null==Q||"object"!=typeof Q)throw new Error("options cannot be null or undefined and it must be of type object.");let ne;try{!function(ve){if(ve&&"object"==typeof ve){const Q=ve;if("string"==typeof Q.url&&"string"==typeof Q.method&&"object"==typeof Q.headers&&N(Q.headers)&&"function"==typeof Q.validateRequestProperties&&"function"==typeof Q.prepare&&"function"==typeof Q.clone)return!0}return!1}(Q)?(ne=new q,ne=ne.prepare(Q)):(Q.validateRequestProperties(),ne=Q)}catch(De){return Promise.reject(De)}let be=this._httpClient;if(this._requestPolicyFactories&&this._requestPolicyFactories.length>0)for(let De=this._requestPolicyFactories.length-1;De>=0;--De)be=this._requestPolicyFactories[De].create(be,this._requestPolicyOptions);return be.sendRequest(ne)}sendOperationRequest(Q,ne,be){var De=this;return(0,Te.Z)(function*(){var je;"function"==typeof Q.options&&(be=Q.options,Q.options=void 0);const rt=null===(je=Q.options)||void 0===je?void 0:je.serializerOptions,pt=new q;let yt;try{const bt=ne.baseUrl||De.baseUri;if(!bt)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a baseUri string property that contains the base URL to use.");pt.method=ne.httpMethod,pt.operationSpec=ne;const Ot=ge.UK.parse(bt);if(ne.path&&Ot.appendPath(ne.path),ne.urlParameters&&ne.urlParameters.length>0)for(const qt of ne.urlParameters){let Ft=jr(De,Q,qt,ne.serializer);Ft=ne.serializer.serialize(qt.mapper,Ft,Zt(qt),rt),qt.skipEncoding||(Ft=encodeURIComponent(Ft)),Ot.replaceAll(`{${qt.mapper.serializedName||Zt(qt)}}`,Ft)}if(ne.queryParameters&&ne.queryParameters.length>0)for(const qt of ne.queryParameters){let Ft=jr(De,Q,qt,ne.serializer);if(null!=Ft){if(Ft=ne.serializer.serialize(qt.mapper,Ft,Zt(qt),rt),null!=qt.collectionFormat)if(qt.collectionFormat===Ur.Multi){if(0===Ft.length)continue;for(const Bn in Ft){const pr=Ft[Bn];Ft[Bn]=null==pr?"":pr.toString()}}else(qt.collectionFormat===Ur.Ssv||qt.collectionFormat===Ur.Tsv)&&(Ft=Ft.join(qt.collectionFormat));if(!qt.skipEncoding)if(Array.isArray(Ft))for(const Bn in Ft)null!=Ft[Bn]&&(Ft[Bn]=encodeURIComponent(Ft[Bn]));else Ft=encodeURIComponent(Ft);null!=qt.collectionFormat&&qt.collectionFormat!==Ur.Multi&&qt.collectionFormat!==Ur.Ssv&&qt.collectionFormat!==Ur.Tsv&&(Ft=Ft.join(qt.collectionFormat)),Ot.setQueryParameter(qt.mapper.serializedName||Zt(qt),Ft)}}pt.url=Ot.toString();const Dt=ne.contentType||De.requestContentType;if(Dt&&ne.requestBody&&pt.headers.set("Content-Type",Dt),ne.headerParameters)for(const qt of ne.headerParameters){let Ft=jr(De,Q,qt,ne.serializer);if(null!=Ft){Ft=ne.serializer.serialize(qt.mapper,Ft,Zt(qt),rt);const Bn=qt.mapper.headerCollectionPrefix;if(Bn)for(const pr of Object.keys(Ft))pt.headers.set(Bn+pr,Ft[pr]);else pt.headers.set(qt.mapper.serializedName||Zt(qt),Ft)}}const At=Q.options;if(At){if(At.customHeaders)for(const qt in At.customHeaders)pt.headers.set(qt,At.customHeaders[qt]);At.abortSignal&&(pt.abortSignal=At.abortSignal),At.timeout&&(pt.timeout=At.timeout),At.onUploadProgress&&(pt.onUploadProgress=At.onUploadProgress),At.onDownloadProgress&&(pt.onDownloadProgress=At.onDownloadProgress),At.spanOptions&&(pt.spanOptions=At.spanOptions),At.tracingContext&&(pt.tracingContext=At.tracingContext),null!=At.shouldDeserialize&&(pt.shouldDeserialize=At.shouldDeserialize)}let gn,fn;pt.withCredentials=De._withCredentials,function(ve,Q,ne,be){var De,je,rt,pt,yt,vt;const bt=null!==(je=null===(De=ne.options)||void 0===De?void 0:De.serializerOptions)&&void 0!==je?je:{},Ot={rootName:null!==(rt=bt.rootName)&&void 0!==rt?rt:"",includeRoot:null!==(pt=bt.includeRoot)&&void 0!==pt&&pt,xmlCharKey:null!==(yt=bt.xmlCharKey)&&void 0!==yt?yt:A.I},Dt=bt.xmlCharKey;if(be.requestBody&&be.requestBody.mapper){Q.body=jr(ve,ne,be.requestBody,be.serializer);const At=be.requestBody.mapper,{required:gn,xmlName:fn,xmlElementName:qt,serializedName:Ft,xmlNamespace:Bn,xmlNamespacePrefix:pr}=At,nr=At.type.name;try{if(null!=Q.body||gn){const $n=Zt(be.requestBody);Q.body=be.serializer.serialize(At,Q.body,$n,Ot);const Bi=nr===b.Stream;if(be.isXML){const uo=pr?`xmlns:${pr}`:"xmlns",vi=function(ve,Q,ne,be,De){if(ve&&!["Composite","Sequence","Dictionary"].includes(ne)){const je={};return je[De.xmlCharKey]=be,je[A.c]={[Q]:ve},je}return be}(Bn,uo,nr,Q.body,Ot);nr===b.Sequence?Q.body=at(M.WQ(vi,qt||fn||Ft,uo,Bn),{rootName:fn||Ft,xmlCharKey:Dt}):Bi||(Q.body=at(vi,{rootName:fn||Ft,xmlCharKey:Dt}))}else{if(nr===b.String&&((null===(vt=be.contentType)||void 0===vt?void 0:vt.match("text/plain"))||"text"===be.mediaType))return;Bi||(Q.body=JSON.stringify(Q.body))}}}catch($n){throw new Error(`Error "${$n.message}" occurred in serializing the payload - ${JSON.stringify(Ft,void 0,"  ")}.`)}}else if(be.formDataParameters&&be.formDataParameters.length>0){Q.formData={};for(const At of be.formDataParameters){const gn=jr(ve,ne,At,be.serializer);if(null!=gn){const fn=At.mapper.serializedName||Zt(At);Q.formData[fn]=be.serializer.serialize(At.mapper,gn,Zt(At),Ot)}}}}(De,pt,Q,ne),void 0===pt.streamResponseStatusCodes&&(pt.streamResponseStatusCodes=function(ve){const Q=new Set;for(const ne in ve.responses){const be=ve.responses[ne];be.bodyMapper&&be.bodyMapper.type.name===b.Stream&&Q.add(Number(ne))}return Q}(ne));try{gn=yield De.sendRequest(pt)}catch(qt){fn=qt}fn?(fn.response&&(fn.details=Xr(fn.response,ne.responses[fn.statusCode]||ne.responses.default)),yt=Promise.reject(fn)):yt=Promise.resolve(Xr(gn,ne.responses[gn.status]))}catch(bt){yt=Promise.reject(bt)}const vt=be;return vt&&yt.then(bt=>vt(null,bt._response.parsedBody,bt._response.request,bt._response)).catch(bt=>vt(bt)),yt})()}}function Qn(ve,Q){let ne;return"string"==typeof ve?ne=ve:(ne=Q(),"function"==typeof ve&&(ne=ve(ne))),ne}function Wn(ve,Q){const ne=[];let be;if(ve.sendStreamingJson&&ne.push({create:(ve,Q)=>new Ra(ve,Q)}),ve.userAgentOptions&&ve.userAgentOptions.userAgentPrefix){const vt=[];vt.push(ve.userAgentOptions.userAgentPrefix);const bt=Co();-1===vt.indexOf(bt)&&vt.push(bt),be=vt.join(" ")}const De=Object.assign(Object.assign({},ft),ve.keepAliveOptions),je=Object.assign(Object.assign({},Nt),ve.retryOptions),rt=Object.assign(Object.assign({},tt),ve.redirectOptions);M.UG&&ne.push(cn());const pt=Object.assign(Object.assign({},dt),ve.deserializationOptions),yt=Object.assign({},ve.loggingOptions);return ne.push(It({userAgent:be}),ze(De),Ut({value:be}),br(),Je(pt.expectedContentTypes),Eo(),zo(),Cn(je.maxRetries,je.retryDelayInMs,je.maxRetryDelayInMs)),rt.handleRedirects&&ne.push(Qt(rt.maxRetries)),Q&&ne.push(Q),ne.push(xt(yt)),M.UG&&!1===ve.decompressResponse&&ne.push(xa()),{httpClient:ve.httpClient,requestPolicyFactories:ne}}function jr(ve,Q,ne,be){return Jt(ve,Q,ne.parameterPath,ne.mapper,be)}function Jt(ve,Q,ne,be,De){var je;let rt;"string"==typeof ne&&(ne=[ne]);const pt=null===(je=Q.options)||void 0===je?void 0:je.serializerOptions;if(Array.isArray(ne)){if(ne.length>0){if(be.isConstant)rt=be.defaultValue;else{let vt=oo(Q,ne);vt.propertyFound||(vt=oo(ve,ne));let bt=!1;vt.propertyFound||(bt=be.required||"options"===ne[0]&&2===ne.length),rt=bt?be.defaultValue:vt.propertyValue}const yt=tn(ne,be);De.serialize(be,rt,yt,pt)}}else{be.required&&(rt={});for(const yt in ne){const vt=be.type.modelProperties[yt],bt=ne[yt],Ot=Jt(ve,Q,bt,vt,De),Dt=tn(bt,vt);De.serialize(vt,Ot,Dt,pt),null!=Ot&&(rt||(rt={}),rt[yt]=Ot)}}return rt}function oo(ve,Q){const ne={propertyFound:!1};let be=0;for(;be<Q.length;++be){const De=Q[be];if(null==ve||!(De in ve))break;ve=ve[De]}return be===Q.length&&(ne.propertyValue=ve,ne.propertyFound=!0),ne}function Xr(ve,Q){const ne=ve.parsedHeaders,be=Q&&Q.bodyMapper,De=je=>Object.defineProperty(je,"_response",{value:ve});if(be){const je=be.type.name;if("Stream"===je)return De(Object.assign(Object.assign({},ne),{blobBody:ve.blobBody,readableStreamBody:ve.readableStreamBody}));const rt="Composite"===je&&be.type.modelProperties||{},pt=Object.keys(rt).some(yt=>""===rt[yt].serializedName);if("Sequence"===je||pt){const yt=[...ve.parsedBody||[]];for(const vt of Object.keys(rt))rt[vt].serializedName&&(yt[vt]=ve.parsedBody[vt]);if(ne)for(const vt of Object.keys(ne))yt[vt]=ne[vt];return De(yt),yt}if("Composite"===je||"Dictionary"===je)return De(Object.assign(Object.assign({},ne),ve.parsedBody))}return be||"HEAD"===ve.request.method||M.ty(ve.parsedBody)?De(Object.assign(Object.assign({},ne),{body:ve.parsedBody})):De(Object.assign(Object.assign({},ne),ve.parsedBody))}function ei(ve){return(0,cr.q)(ve)}class so{constructor(Q=12e4){this.cachedToken=void 0,this.tokenRefreshBufferMs=Q}setCachedToken(Q){this.cachedToken=Q}getCachedToken(){return this.cachedToken&&Date.now()+this.tokenRefreshBufferMs>=this.cachedToken.expiresOnTimestamp&&(this.cachedToken=void 0),this.cachedToken}}class Fi{constructor(Q,ne,be=3e4){this.credential=Q,this.scopes=ne,this.requiredMillisecondsBeforeNewRefresh=be,this.lastCalled=0}isReady(){return!this.lastCalled||Date.now()-this.lastCalled>this.requiredMillisecondsBeforeNewRefresh}getToken(Q){var ne=this;return(0,Te.Z)(function*(){ne.lastCalled=Date.now();const be=yield ne.credential.getToken(ne.scopes,Q);return ne.promise=void 0,be||void 0})()}refresh(Q){return this.promise||(this.promise=this.getToken(Q)),this.promise}}const Rr=dn.g.HeaderConstants;class Aa{constructor(Q,ne,be="Basic"){if(this.authorizationScheme="Basic",null==Q||"string"!=typeof Q.valueOf())throw new Error("userName cannot be null or undefined and must be of type string.");if(null==ne||"string"!=typeof ne.valueOf())throw new Error("password cannot be null or undefined and must be of type string.");this.userName=Q,this.password=ne,this.authorizationScheme=be}signRequest(Q){const be=`${this.authorizationScheme} ${ve=`${this.userName}:${this.password}`,btoa(ve)}`;var ve;return Q.headers||(Q.headers=new m),Q.headers.set(Rr.AUTHORIZATION,be),Promise.resolve(Q)}}class ws{constructor(Q){if(!Q||Q&&!Q.inHeader&&!Q.inQuery)throw new Error('options cannot be null or undefined. Either "inHeader" or "inQuery" property of the options object needs to be provided.');this.inHeader=Q.inHeader,this.inQuery=Q.inQuery}signRequest(Q){if(!Q)return Promise.reject(new Error('webResource cannot be null or undefined and must be of type "object".'));if(this.inHeader){Q.headers||(Q.headers=new m);for(const ne in this.inHeader)Q.headers.set(ne,this.inHeader[ne])}if(this.inQuery){if(!Q.url)return Promise.reject(new Error("url cannot be null in the request object."));Q.url.indexOf("?")<0&&(Q.url+="?");for(const ne in this.inQuery)Q.url.endsWith("?")||(Q.url+="&"),Q.url+=`${ne}=${this.inQuery[ne]}`}return Promise.resolve(Q)}}class ao extends ws{constructor(Q){if(!Q||Q&&"string"!=typeof Q)throw new Error("topicKey cannot be null or undefined and must be of type string.");super({inHeader:{"aeg-sas-key":Q}})}}},6354:(Y,L,T)=>{"use strict";T.d(L,{v:()=>I});var p=T(8239),N=T(2462),m=T(8006),x=T(9484);const u={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4};function M(){return(M=(0,p.Z)(function*(y,h,C){function v(){return w.apply(this,arguments)}function w(){return(w=(0,p.Z)(function*(){if(!(Date.now()<C)){const P=yield y();if(null===P)throw new Error("Failed to refresh access token.");return P}try{return yield y()}catch(P){return null}})).apply(this,arguments)}let S=yield v();for(;null===S;)yield(0,x.g)(h),S=yield v();return S})).apply(this,arguments)}function I(y,h){const C=function(y,h,C){let v=null,w=null;const S=Object.assign(Object.assign({},u),C),P={get isRefreshing(){return null!==v},get shouldRefresh(){var O;return!P.isRefreshing&&(null!==(O=null==w?void 0:w.expiresOnTimestamp)&&void 0!==O?O:0)-S.refreshWindowInMs<Date.now()},get mustRefresh(){return null===w||w.expiresOnTimestamp-S.forcedRefreshWindowInMs<Date.now()}};function k(O){var V;return P.isRefreshing||(v=function(y,h,C){return M.apply(this,arguments)}(()=>y.getToken(h,O),S.retryIntervalInMs,null!==(V=null==w?void 0:w.expiresOnTimestamp)&&void 0!==V?V:Date.now()).then(B=>(v=null,w=B,w)).catch(B=>{throw v=null,w=null,B})),v}return function(){var O=(0,p.Z)(function*(V){return P.mustRefresh?k(V):(P.shouldRefresh&&k(V),w)});return function(V){return O.apply(this,arguments)}}()}(y,h);class v extends N.U{constructor(S,P){super(S,P)}sendRequest(S){var P=this;return(0,p.Z)(function*(){if(!S.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");const{token:k}=yield C({abortSignal:S.abortSignal,tracingOptions:{tracingContext:S.tracingContext}});return S.headers.set(m.g.HeaderConstants.AUTHORIZATION,`Bearer ${k}`),P._nextPolicy.sendRequest(S)})()}}return{create:(w,S)=>new v(w,S)}}},2462:(Y,L,T)=>{"use strict";T.d(L,{U:()=>N,_:()=>m});var p=T(1138);class N{constructor(u,g){this._nextPolicy=u,this._options=g}shouldLog(u){return this._options.shouldLog(u)}log(u,g){this._options.log(u,g)}}class m{constructor(u){this._logger=u}shouldLog(u){return!!this._logger&&u!==p.M.OFF&&u<=this._logger.minimumLogLevel}log(u,g){this._logger&&this.shouldLog(u)&&this._logger.log(u,g)}}},369:(Y,L,T)=>{"use strict";T.d(L,{$4:()=>N,UK:()=>m});var p=T(7694);class N{constructor(){this._rawQuery={}}any(){return Object.keys(this._rawQuery).length>0}keys(){return Object.keys(this._rawQuery)}set(H,W){const te=W;if(H)if(null!=te){const $=Array.isArray(te)?te:te.toString();this._rawQuery[H]=$}else delete this._rawQuery[H]}get(H){return H?this._rawQuery[H]:void 0}toString(){let H="";for(const W in this._rawQuery){H&&(H+="&");const te=this._rawQuery[W];if(Array.isArray(te)){const $=[];for(const pe of te)$.push(`${W}=${pe}`);H+=$.join("&")}else H+=`${W}=${te}`}return H}static parse(H){const W=new N;if(H){H.startsWith("?")&&(H=H.substring(1));let te="ParameterName",$="",pe="";for(let R=0;R<H.length;++R){const r=H[R];switch(te){case"ParameterName":switch(r){case"=":te="ParameterValue";break;case"&":$="",pe="";break;default:$+=r}break;case"ParameterValue":switch(r){case"&":W.set($,pe),$="",pe="",te="ParameterName";break;default:pe+=r}break;default:throw new Error("Unrecognized URLQuery parse state: "+te)}}"ParameterValue"===te&&W.set($,pe)}return W}}class m{setScheme(H){H?this.set(H,"SCHEME"):this._scheme=void 0}getScheme(){return this._scheme}setHost(H){H?this.set(H,"SCHEME_OR_HOST"):this._host=void 0}getHost(){return this._host}setPort(H){null==H||""===H?this._port=void 0:this.set(H.toString(),"PORT")}getPort(){return this._port}setPath(H){if(H){const W=H.indexOf("://");if(-1!==W){const te=H.lastIndexOf("/",W);this.set(-1===te?H:H.substr(te+1),"SCHEME")}else this.set(H,"PATH")}else this._path=void 0}appendPath(H){if(H){let W=this.getPath();W&&(W.endsWith("/")||(W+="/"),H.startsWith("/")&&(H=H.substring(1)),H=W+H),this.set(H,"PATH")}}getPath(){return this._path}setQuery(H){this._query=H?N.parse(H):void 0}setQueryParameter(H,W){H&&(this._query||(this._query=new N),this._query.set(H,W))}getQueryParameterValue(H){return this._query?this._query.get(H):void 0}getQuery(){return this._query?this._query.toString():void 0}set(H,W){const te=new g(H,W);for(;te.next();){const $=te.current();let pe;if($)switch($.type){case"SCHEME":this._scheme=$.text||void 0;break;case"HOST":this._host=$.text||void 0;break;case"PORT":this._port=$.text||void 0;break;case"PATH":pe=$.text||void 0,(!this._path||"/"===this._path||"/"!==pe)&&(this._path=pe);break;case"QUERY":this._query=N.parse($.text);break;default:throw new Error(`Unrecognized URLTokenType: ${$.type}`)}}}toString(){let H="";return this._scheme&&(H+=`${this._scheme}://`),this._host&&(H+=this._host),this._port&&(H+=`:${this._port}`),this._path&&(this._path.startsWith("/")||(H+="/"),H+=this._path),this._query&&this._query.any()&&(H+=`?${this._query.toString()}`),H}replaceAll(H,W){H&&(this.setScheme((0,p.ko)(this.getScheme(),H,W)),this.setHost((0,p.ko)(this.getHost(),H,W)),this.setPort((0,p.ko)(this.getPort(),H,W)),this.setPath((0,p.ko)(this.getPath(),H,W)),this.setQuery((0,p.ko)(this.getQuery(),H,W)))}static parse(H){const W=new m;return W.set(H,"SCHEME_OR_HOST"),W}}class x{constructor(H,W){this.text=H,this.type=W}static scheme(H){return new x(H,"SCHEME")}static host(H){return new x(H,"HOST")}static port(H){return new x(H,"PORT")}static path(H){return new x(H,"PATH")}static query(H){return new x(H,"QUERY")}}class g{constructor(H,W){this._text=H,this._textLength=H?H.length:0,this._currentState=null!=W?W:"SCHEME_OR_HOST",this._currentIndex=0}current(){return this._currentToken}next(){if(A(this))switch(this._currentState){case"SCHEME":!function(B){const H=function(B){return C(B,H=>function(B){const H=B.charCodeAt(0);return 48<=H&&H<=57||65<=H&&H<=90||97<=H&&H<=122}(H))}(B);B._currentToken=x.scheme(H),B._currentState=A(B)?"HOST":"DONE"}(this);break;case"SCHEME_OR_HOST":!function(B){const H=w(B,":","/","?");A(B)?":"===I(B)?"://"===h(B,3)?(B._currentToken=x.scheme(H),B._currentState="HOST"):(B._currentToken=x.host(H),B._currentState="PORT"):(B._currentToken=x.host(H),B._currentState="/"===I(B)?"PATH":"QUERY"):(B._currentToken=x.host(H),B._currentState="DONE")}(this);break;case"HOST":!function(B){"://"===h(B,3)&&y(B,3);const H=w(B,":","/","?");B._currentToken=x.host(H),B._currentState=A(B)?":"===I(B)?"PORT":"/"===I(B)?"PATH":"QUERY":"DONE"}(this);break;case"PORT":!function(B){":"===I(B)&&y(B);const H=w(B,"/","?");B._currentToken=x.port(H),B._currentState=A(B)?"/"===I(B)?"PATH":"QUERY":"DONE"}(this);break;case"PATH":!function(B){const H=w(B,"?");B._currentToken=x.path(H),B._currentState=A(B)?"QUERY":"DONE"}(this);break;case"QUERY":!function(B){"?"===I(B)&&y(B);const H=function(B){let H="";return B._currentIndex<B._textLength&&(H=B._text.substring(B._currentIndex),B._currentIndex=B._textLength),H}(B);B._currentToken=x.query(H),B._currentState="DONE"}(this);break;default:throw new Error(`Unrecognized URLTokenizerState: ${this._currentState}`)}else this._currentToken=void 0;return!!this._currentToken}}function A(B){return B._currentIndex<B._textLength}function I(B){return B._text[B._currentIndex]}function y(B,H){A(B)&&(H||(H=1),B._currentIndex+=H)}function h(B,H){let W=B._currentIndex+H;return B._textLength<W&&(W=B._textLength),B._text.substring(B._currentIndex,W)}function C(B,H){let W="";for(;A(B);){const te=I(B);if(!H(te))break;W+=te,y(B)}return W}function w(B,...H){return C(B,W=>-1===H.indexOf(W))}},8006:(Y,L,T)=>{"use strict";T.d(L,{g:()=>p});const p={coreHttpVersion:"2.3.1",HTTP:"http:",HTTPS:"https:",HTTP_PROXY:"HTTP_PROXY",HTTPS_PROXY:"HTTPS_PROXY",NO_PROXY:"NO_PROXY",ALL_PROXY:"ALL_PROXY",HttpConstants:{HttpVerbs:{PUT:"PUT",GET:"GET",DELETE:"DELETE",POST:"POST",MERGE:"MERGE",HEAD:"HEAD",PATCH:"PATCH"},StatusCodes:{TooManyRequests:429,ServiceUnavailable:503}},HeaderConstants:{AUTHORIZATION:"authorization",AUTHORIZATION_SCHEME:"Bearer",RETRY_AFTER:"Retry-After",USER_AGENT:"User-Agent"}}},4510:(Y,L,T)=>{"use strict";T.d(L,{c:()=>p,I:()=>N});const p="$",N="_"},7694:(Y,L,T)=>{"use strict";T.d(L,{ef:()=>pe,Hh:()=>k,Zf:()=>H,Rl:()=>B,_9:()=>r,UG:()=>S,Kn:()=>f,ty:()=>l,TP:()=>U,WQ:()=>$,_Q:()=>W,yj:()=>te,ko:()=>s,Fl:()=>V,eg:()=>O});var N,p=T(4510),m=new Uint8Array(16);function x(){if(!N&&!(N="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return N(m)}const u=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,M=function(_){return"string"==typeof _&&u.test(_)};for(var A=[],I=0;I<256;++I)A.push((I+256).toString(16).substr(1));const v=function(_,D,d){var i=(_=_||{}).random||(_.rng||x)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,D){d=d||0;for(var b=0;b<16;++b)D[d+b]=i[b];return D}return function(_){var D=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=(A[_[D+0]]+A[_[D+1]]+A[_[D+2]]+A[_[D+3]]+"-"+A[_[D+4]]+A[_[D+5]]+"-"+A[_[D+6]]+A[_[D+7]]+"-"+A[_[D+8]]+A[_[D+9]]+"-"+A[_[D+10]]+A[_[D+11]]+A[_[D+12]]+A[_[D+13]]+A[_[D+14]]+A[_[D+15]]).toLowerCase();if(!M(d))throw TypeError("Stringified UUID is invalid");return d}(i)},w=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i,S="undefined"!=typeof process&&!!process.version&&!!process.versions&&!!process.versions.node;function k(_){return encodeURIComponent(_).replace(/!/g,"%21").replace(/"/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function O(_){const D={};return D.body=_.bodyAsText,D.headers=_.headers,D.status=_.status,D}function V(_){const D=_.clone();return D.headers&&D.headers.remove("authorization"),D}function U(_){return w.test(_)}function B(){return v()}function H(_,D){let d=Promise.resolve(D);return _.forEach(i=>{d=d.then(i)}),d}function W(_){if("function"!=typeof _.then)throw new Error("The provided input is not a Promise.");return D=>{_.then(d=>D(void 0,d)).catch(d=>{D(d)})}}function te(_){if("function"!=typeof _.then)throw new Error("The provided input is not a Promise.");return D=>{_.then(d=>process.nextTick(D,void 0,d.parsedBody,d.request,d)).catch(d=>{process.nextTick(D,d)})}}function $(_,D,d,i){if(Array.isArray(_)||(_=[_]),!d||!i)return{[D]:_};const b={[D]:_};return b[p.c]={[d]:i},b}function pe(_,D){const d=_;D.forEach(i=>{Object.getOwnPropertyNames(i.prototype).forEach(b=>{d.prototype[b]=i.prototype[b]})})}const R=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function r(_){return R.test(_)}function s(_,D,d){return _&&D?_.split(D).join(d||""):_}function l(_){return"object"!=typeof _&&"function"!=typeof _||null===_}function f(_){return!("object"!=typeof _||null===_||Array.isArray(_)||_ instanceof RegExp||_ instanceof Date)}},1259:(Y,L,T)=>{"use strict";T.d(L,{q:()=>u});var p=T(9432),N=T(2999),m=T(3259);function u(g){return function(M,A){const I=(0,p.Yz)(),y=(null==A?void 0:A.tracingOptions)||{},h=Object.assign({kind:p.MU.INTERNAL},y.spanOptions),C=g.packagePrefix?`${g.packagePrefix}.${M}`:M;let v;v=function(){var g;if("undefined"==typeof process)return!1;const M=null===(g=process.env.AZURE_TRACING_DISABLED)||void 0===g?void 0:g.toLowerCase();return"false"!==M&&"0"!==M&&Boolean(M)}()?N.g.wrapSpanContext(m.Rr):I.startSpan(C,h,y.tracingContext),g.namespace&&v.setAttribute("az.namespace",g.namespace);let w=y.spanOptions||{};v.isRecording()&&g.namespace&&(w=Object.assign(Object.assign({},y.spanOptions),{attributes:Object.assign(Object.assign({},h.attributes),{"az.namespace":g.namespace})}));const S=Object.assign(Object.assign({},y),{spanOptions:w,tracingContext:(0,p.WZ)(y.tracingContext||p.Do.active(),v)});return{span:v,updatedOptions:Object.assign(Object.assign({},A),{tracingOptions:S})}}}},9432:(Y,L,T)=>{"use strict";T.d(L,{MU:()=>x,Qn:()=>C,Do:()=>h,Yz:()=>y,BM:()=>I,WZ:()=>g});var N=T(723).c.getInstance(),m=T(2999),x=(()=>{return(v=x||(x={}))[v.INTERNAL=0]="INTERNAL",v[v.SERVER=1]="SERVER",v[v.CLIENT=2]="CLIENT",v[v.PRODUCER=3]="PRODUCER",v[v.CONSUMER=4]="CONSUMER",x;var v})();function g(v,w){return m.g.setSpan(v,w)}function I(v){return m.g.isSpanContextValid(v)}function y(v,w){return m.g.getTracer(v||"azure/core-tracing",w)}const h=N;var C=(()=>{return(v=C||(C={}))[v.UNSET=0]="UNSET",v[v.OK=1]="OK",v[v.ERROR=2]="ERROR",C;var v})()},9484:(Y,L,T)=>{"use strict";T.d(L,{g:()=>g});var p=T(5283);function g(M,A){return new Promise((I,y)=>{let h,C;const v=()=>{var S;return y(new p._(null!==(S=null==A?void 0:A.abortErrorMsg)&&void 0!==S?S:"The operation was aborted."))},w=()=>{(null==A?void 0:A.abortSignal)&&C&&A.abortSignal.removeEventListener("abort",C)};if(C=()=>(function(M){return null!=M}(h)&&clearTimeout(h),w(),v()),(null==A?void 0:A.abortSignal)&&A.abortSignal.aborted)return v();h=setTimeout(()=>{w(),I()},M),(null==A?void 0:A.abortSignal)&&A.abortSignal.addEventListener("abort",C)})}},1326:(Y,L,T)=>{"use strict";T.d(L,{YR:()=>W});const N="undefined"!=typeof process&&process.env&&process.env.DEBUG||void 0;let m,x=[],u=[];const g=[];N&&A(N);const M=Object.assign(r=>h(r),{enable:A,enabled:I,disable:function(){const r=m||"";return A(""),r},log:function(...r){if(r.length>0){const s=String(r[0]);s.includes(":error")?console.error(...r):s.includes(":warning")?console.warn(...r):s.includes(":info")?console.info(...r):(s.includes(":verbose"),console.debug(...r))}}});function A(r){m=r,x=[],u=[];const s=/\*/g,l=r.split(",").map(a=>a.trim().replace(s,".*?"));for(const a of l)a.startsWith("-")?u.push(new RegExp(`^${a.substr(1)}$`)):x.push(new RegExp(`^${a}$`));for(const a of g)a.enabled=I(a.namespace)}function I(r){if(r.endsWith("*"))return!0;for(const s of u)if(s.test(r))return!1;for(const s of x)if(s.test(r))return!0;return!1}function h(r){const s=Object.assign(function(...a){!s.enabled||(a.length>0&&(a[0]=`${r} ${a[0]}`),s.log(...a))},{enabled:I(r),destroy:C,log:M.log,namespace:r,extend:v});return g.push(s),s}function C(){const r=g.indexOf(this);return r>=0&&(g.splice(r,1),!0)}function v(r){const s=h(`${this.namespace}:${r}`);return s.log=this.log,s}const w=M,S=new Set,P="undefined"!=typeof process&&process.env&&process.env.AZURE_LOG_LEVEL||void 0;let k;const O=w("azure");O.log=(...r)=>{w.log(...r)};const V=["verbose","info","warning","error"];P&&(R(P)?function(r){if(r&&!R(r))throw new Error(`Unknown log level '${r}'. Acceptable values: ${V.join(",")}`);k=r;const s=[];for(const l of S)pe(l)&&s.push(l.namespace);w.enable(s.join(","))}(P):console.error(`AZURE_LOG_LEVEL set to unknown log level '${P}'; logging is not enabled. Acceptable values: ${V.join(", ")}.`));const H={verbose:400,info:300,warning:200,error:100};function W(r){const s=O.extend(r);return te(O,s),{error:$(s,"error"),warning:$(s,"warning"),info:$(s,"info"),verbose:$(s,"verbose")}}function te(r,s){s.log=(...l)=>{r.log(...l)}}function $(r,s){const l=Object.assign(r.extend(s),{level:s});if(te(r,l),pe(l)){const a=w.disable();w.enable(a+","+l.namespace)}return S.add(l),l}function pe(r){return!!(k&&H[r.level]<=H[k])}function R(r){return V.includes(r)}},5413:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var N=p(T(9901)),m=p(T(5633)),x=T(2e3),u=function g(){(0,N.default)(this,g)};L.default=u,(0,m.default)(u,"requiredOmnichannelConfigurationParameters",["orgUrl","orgId","widgetId"]),(0,m.default)(u,"defaultHeaders",{"Content-Type":"application/json"}),(0,m.default)(u,"bypassCacheHeaders",{"Cache-Control":"no-store, must-revalidate, no-cache","X-Cache-Control":"no-store"}),(0,m.default)(u,"defaultChannelId",x.ChannelId.LCW),(0,m.default)(u,"defaultLocale","en-us"),(0,m.default)(u,"noContentStatusCode",204),(0,m.default)(u,"tooManyRequestsStatusCode",429),(0,m.default)(u,"sensitiveProperties",["AuthenticatedUserToken"]),(0,m.default)(u,"transactionid","transaction-id"),(0,m.default)(u,"customerDisplayName","customerDisplayName"),(0,m.default)(u,"hiddenContentPlaceholder","*content hidden*"),(0,m.default)(u,"axiosTimeoutErrorCode","ECONNABORTED")},2e3:(Y,L)=>{"use strict";var T,A,p,N,m,x,u,g,M;Object.defineProperty(L,"__esModule",{value:!0}),L.SDKError=L.LiveChatVersion=L.OCSDKTelemetryEvent=L.ChannelId=L.OperatingSystem=L.DeviceType=L.Browser=L.BrowserVendor=void 0,L.BrowserVendor=T,(A=T||(L.BrowserVendor=T={})).IE="IE",A.CHROME="Chrome",A.FIREFOX="Firefox",A.SAFARI="Safari",A.EDGE="Edge",A.EDGE_CHROMIUM="Edg",A.OPERA="Opera",A.UNKNOWN="Unknown",L.Browser=p,function(A){A[A.Chrome=0]="Chrome",A[A.Firefox=1]="Firefox",A[A.Ie=2]="Ie",A[A.Edge=3]="Edge",A[A.Safari=4]="Safari",A[A.None=5]="None"}(p||(L.Browser=p={})),L.DeviceType=N,function(A){A.Desktop="Desktop",A.Mobile="Mobile",A.Tablet="Tablet"}(N||(L.DeviceType=N={})),L.OperatingSystem=m,function(A){A.WINDOWS="Windows",A.MACOSX="Mac OS X",A.WINDOWS_PHONE="Windows Phone",A.WINDOWS_RT="Windows RT",A.IOS="iOS",A.ANDROID="Android",A.LINUX="Linux",A.UNKNOWN="Unknown"}(m||(L.OperatingSystem=m={})),L.ChannelId=x,function(A){A.LCW="lcw",A.SMS="sms",A.FACEBOOK="facebook",A.WECHAT="wechat"}(x||(L.ChannelId=x={})),L.OCSDKTelemetryEvent=u,function(A){A.GETCHATCONFIG="GetChatConfig",A.GETCHATCONFIGSUCCESS="GetChatConfigSucceeded",A.GETRECONNECTABLECHATS="GetReconnnectableChats",A.GETRECONNECTAVAILABILITY="GetReconnnectableAvailability",A.GETCHATTOKENSTARTED="GetChatTokenStarted",A.GETCHATTOKENSUCCEEDED="GetChatTokenSucceeded",A.GETCHATTOKENFAILED="GetChatTokenFailed",A.GETLWISTATUSSTARTED="GetLwiStatusStarted",A.GETLWISTATUSSUCCEEDED="GetLwiStatusSucceeded",A.GETLWISTATUSFAILED="GetLwiStatusFailed",A.SESSIONINITSTARTED="SessionInitStarted",A.SESSIONINITSUCCEEDED="SessionInitSucceeded",A.SESSIONINITFAILED="SessionInitFailed",A.SESSIONCLOSESTARTED="SessionCloseStarted",A.SESSIONCLOSESUCCEEDED="SessionCloseSucceeded",A.SESSIONCLOSEFAILED="SessionCloseFailed",A.SUBMITPOSTCHATSTARTED="SubmitPostChatStarted",A.SUBMITPOSTCHATSUCCEEDED="SubmitPostChatSucceeded",A.SUBMITPOSTCHATFAILED="SubmitPostChatFailed",A.GETCHATTRANSCRIPTSTARTED="GetChatTranscriptStarted",A.GETCHATTRANSCRIPTSUCCEEDED="GetChatTranscriptSucceeded",A.GETCHATTRANSCRIPTFAILED="GetChatTranscriptFailed",A.EMAILTRANSCRIPTSTARTED="EmailTranscriptStarted",A.EMAILTRANSCRIPTSUCCEEDED="EmailTranscriptSucceeded",A.EMAILTRANSCRIPTFAILED="EmailTranscriptFailed",A.FETCHDATAMASKINGSTARTED="FetchDataMaskingStarted",A.FETCHDATAMASKINGSUCCEEDED="FetchDataMaskingSucceeded",A.FETCHDATAMASKINGFAILED="FetchDataMaskingFailed",A.SECONDARYCHANNELEVENTREQUESTSTARTED="SecondaryChannelEventRequestStarted",A.SECONDARYCHANNELEVENTREQUESTSUCCEEDED="SecondaryChannelEventRequestSucceeded",A.SECONDARYCHANNELEVENTREQUESTFAILED="SecondaryChannelEventRequestFailed",A.GETSURVEYINVITELINKSTARTED="GetSurveyInviteLinkStarted",A.GETSURVEYINVITELINKSUCCEEDED="GetSurveyInviteLinkSucceeded",A.GETSURVEYINVITELINKFAILED="GetSurveyInviteLinkFailed",A.VALIDATEAUTHCHATRECORDSTARTED="ValidateAuthChatRecordStarted",A.VALIDATEAUTHCHATRECORDSUCCEEDED="ValidateAuthChatRecordSucceeded",A.VALIDATEAUTHCHATRECORDFAILED="ValidateAuthChatRecordFailed",A.GETAGENTAVAILABILITYSTARTED="GetAgentAvailabilityStarted",A.GETAGENTAVAILABILITYSUCCEEDED="GetAgentAvailabilitySucceeded",A.GETAGENTAVAILABILITYFAILED="GetAgentAvailabilityFailed",A.SENDTYPINGINDICATORFAILED="SendTypingIndicatorFailed",A.SENDTYPINGINDICATORSUCCEEDED="SendTypingIndicatorSucceeded"}(u||(L.OCSDKTelemetryEvent=u={})),L.LiveChatVersion=g,function(A){A[A.V1=1]="V1",A[A.V2=2]="V2"}(g||(L.LiveChatVersion=g={})),L.SDKError=M,function(A){A.ClientHTTPTimeoutErrorName="ClientHTTPTimeoutError",A.ClientHTTPTimeoutErrorMessage="Server took too long to respond"}(M||(L.SDKError=M={}))},3096:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var N=p(T(9901)),m=p(T(9524));L.default=function(){function u(){(0,N.default)(this,u)}return(0,m.default)(u,null,[{key:"OCSDKLOAD",get:function(){return"oc:sdk:load"}}]),u}()},4950:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var N=p(T(9901)),m=p(T(5633)),x=function u(){(0,N.default)(this,u)};L.default=x,(0,m.default)(x,"supportedLocales",["ar-sa","bg-bg","ca-es","cs-cz","da-dk","de-de","el-gr","en-us","es-es","et-ee","eu-es","fi-fi","fr-fr","gl-es","he-il","hi-in","hr-hr","hu-hu","id-id","it-it","ja-jp","kk-kz","ko-kr","lt-lt","lv-lv","ms-my","nb-no","nl-nl","pl-pl","pt-br","pt-pt","ro-ro","ru-ru","sk-sk","sl-si","sr-cyrl-cs","sr-latn-cs","sv-se","th-th","tr-tr","uk-ua","vi-vn","zh-cn","zh-hk","zh-tw"])},4162:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var N=p(T(9901)),m=p(T(9524)),x=p(T(5633)),u=p(T(7276));L.default=function(){function M(A){(0,N.default)(this,M),(0,x.default)(this,"logger",void 0),this.logger=A}return(0,m.default)(M,[{key:"log",value:function(I,y,h,C){if(this.isLoggingEnabled()){var v=u.default.GETTELEMETRYEVENTDATA(y,h,C);this.logEvent(I,v)}}},{key:"logEvent",value:function(I,y){this.isLoggingEnabled()&&setTimeout(this.logger.logClientSdkTelemetryEvent.bind(this.logger),0,I,y)}},{key:"isLoggingEnabled",value:function(){return!this.isNullOrUndefined(this.logger)}},{key:"isNullOrUndefined",value:function(I){return null==I}}]),M}()},2172:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var N=p(T(9901)),m=p(T(5633)),x=function u(){(0,N.default)(this,u)};L.default=x,(0,m.default)(x,"LiveChatConfigPath","livechatconnector/config"),(0,m.default)(x,"LiveChatSessionInitPath","livechatconnector/sessioninit"),(0,m.default)(x,"LiveChatAuthSessionInitPath","livechatconnector/auth/sessioninit"),(0,m.default)(x,"LiveChatGetChatTokenPath","livechatconnector/getchattoken"),(0,m.default)(x,"LiveChatv2GetChatTokenPath","livechatconnector/v2/getchattoken"),(0,m.default)(x,"LiveChatAuthGetChatTokenPath","livechatconnector/auth/getchattoken"),(0,m.default)(x,"LiveChatv2AuthGetChatTokenPath","livechatconnector/v2/auth/getchattoken"),(0,m.default)(x,"LiveChatSessionClosePath","livechatconnector/sessionclose"),(0,m.default)(x,"LiveChatAuthSessionClosePath","livechatconnector/auth/sessionclose"),(0,m.default)(x,"LiveChatSubmitPostChatPath","survey/submitpostchat"),(0,m.default)(x,"LiveChatAuthSubmitPostChatPath","survey/auth/submitpostchat"),(0,m.default)(x,"LiveChatGetSurveyInviteLinkPath","livechatconnector/getsurveyinvite"),(0,m.default)(x,"LiveChatAuthGetSurveyInviteLinkPath","livechatconnector/auth/getsurveyinvite"),(0,m.default)(x,"LiveChatGetChatTranscriptPath","livechatconnector/getchattranscripts"),(0,m.default)(x,"LiveChatv2GetChatTranscriptPath","livechatconnector/v2/getchattranscripts"),(0,m.default)(x,"LiveChatAuthGetChatTranscriptPath","livechatconnector/auth/getchattranscripts"),(0,m.default)(x,"LiveChatv2AuthGetChatTranscriptPath","livechatconnector/v2/auth/getchattranscripts"),(0,m.default)(x,"LiveChatTranscriptEmailRequestPath","livechatconnector/createemailrequest"),(0,m.default)(x,"LiveChatAuthTranscriptEmailRequestPath","livechatconnector/auth/createemailrequest"),(0,m.default)(x,"LiveChatFetchDataMaskingInfoPath","livechatconnector/fetchdatamaskinginfo"),(0,m.default)(x,"LiveChatSecondaryChannelEventPath","livechatconnector/secondarychannelevent"),(0,m.default)(x,"LiveChatAuthSecondaryChannelEventPath","livechatconnector/auth/secondarychannelevent"),(0,m.default)(x,"LiveChatLiveWorkItemDetailsPath","livechatconnector/getliveworkitemdetails"),(0,m.default)(x,"LiveChatAuthLiveWorkItemDetailsPath","livechatconnector/auth/getliveworkitemdetails"),(0,m.default)(x,"LiveChatGetReconnectableChatsPath","livechatconnector/auth/reconnectablechats"),(0,m.default)(x,"LiveChatReconnectAvailabilityPath","livechatconnector/reconnect"),(0,m.default)(x,"LiveChatValidateAuthChatMapRecordPath","livechatconnector/auth/validateauthchatmaprecord"),(0,m.default)(x,"GetAgentAvailabilityPath","livechatconnector/auth/getagentavailability"),(0,m.default)(x,"SendTypingIndicatorPath","inbound/typingindicator/livechat/sendtypingindicator")},1858:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var N=p(T(9901)),m=p(T(5633)),x=function u(){(0,N.default)(this,u)};L.default=x,(0,m.default)(x,"authenticatedUserToken","AuthenticatedUserToken"),(0,m.default)(x,"authorization","Authorization"),(0,m.default)(x,"organizationId","OrganizationId"),(0,m.default)(x,"widgetAppId","widgetAppId"),(0,m.default)(x,"requestId","Request-Id")},6528:(Y,L)=>{"use strict";var T,p;Object.defineProperty(L,"__esModule",{value:!0}),L.LogLevel=void 0,L.LogLevel=T,(p=T||(L.LogLevel=T={})).INFO="INFO",p.DEBUG="DEBUG",p.WARN="WARN",p.ERROR="ERROR"},8634:(Y,L,T)=>{"use strict";var p=T(3621),N=T(4738);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var m=p(T(617)),x=p(T(8979)),u=p(T(4738)),g=p(T(9901)),M=p(T(9524)),A=p(T(5633)),I=T(2e3),y=p(T(8686)),h=T(4717),C=p(T(5413)),v=T(6812),w=p(T(4950)),S=T(9569),P=T(6528),k=T(7169),O=p(T(2172)),V=p(T(1858)),U=T(3945),B=p(T(1729)),H=T(8566),W=function(D,d){if(D&&D.__esModule)return D;if(null===D||"object"!==N(D)&&"function"!=typeof D)return{default:D};var i=pe(d);if(i&&i.has(D))return i.get(D);var b={},z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var q in D)if("default"!==q&&Object.prototype.hasOwnProperty.call(D,q)){var J=z?Object.getOwnPropertyDescriptor(D,q):null;J&&(J.get||J.set)?Object.defineProperty(b,q,J):b[q]=D[q]}return b.default=D,i&&i.set(D,b),b}(T(9726)),te=T(9114),$=p(T(2867));function pe(D){if("function"!=typeof WeakMap)return null;var d=new WeakMap,i=new WeakMap;return(pe=function(z){return z?i:d})(D)}function r(D,d){var i=Object.keys(D);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(D);d&&(b=b.filter(function(z){return Object.getOwnPropertyDescriptor(D,z).enumerable})),i.push.apply(i,b)}return i}function s(D){for(var d=1;d<arguments.length;d++){var i=null!=arguments[d]?arguments[d]:{};d%2?r(Object(i),!0).forEach(function(b){(0,A.default)(D,b,i[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach(function(b){Object.defineProperty(D,b,Object.getOwnPropertyDescriptor(i,b))})}return D}function l(D,d){var i="undefined"!=typeof Symbol&&D[Symbol.iterator]||D["@@iterator"];if(!i){if(Array.isArray(D)||(i=function(D,d){if(D){if("string"==typeof D)return f(D,d);var i=Object.prototype.toString.call(D).slice(8,-1);if("Object"===i&&D.constructor&&(i=D.constructor.name),"Map"===i||"Set"===i)return Array.from(D);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return f(D,d)}}(D))||d&&D&&"number"==typeof D.length){i&&(D=i);var b=0,z=function(){};return{s:z,n:function(){return b>=D.length?{done:!0}:{done:!1,value:D[b++]}},e:function(le){throw le},f:z}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var ge,q=!0,J=!1;return{s:function(){i=i.call(D)},n:function(){var le=i.next();return q=le.done,le},e:function(le){J=!0,ge=le},f:function(){try{!q&&null!=i.return&&i.return()}finally{if(J)throw ge}}}}function f(D,d){(null==d||d>D.length)&&(d=D.length);for(var i=0,b=new Array(d);i<d;i++)b[i]=D[i];return b}var _=function(){function D(d){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D.defaultConfiguration,b=arguments.length>2?arguments[2]:void 0;(0,g.default)(this,D),this.omnichannelConfiguration=d,this.configuration=i,this.logger=b,(0,A.default)(this,"liveChatVersion",void 0),(!Object.keys(this.configuration).length||"object"!==(0,u.default)(i))&&(this.configuration=D.defaultConfiguration);for(var z=0,q=Object.keys(D.defaultConfiguration);z<q.length;z++){var J=q[z];this.configuration.hasOwnProperty(J)||(this.configuration["".concat(J)]=D.defaultConfiguration["".concat(J)])}for(var ge=0,me=Object.keys(D.defaultConfiguration.requestTimeoutConfig);ge<me.length;ge++){var le=me[ge];this.configuration.requestTimeoutConfig.hasOwnProperty(le)||(this.configuration.requestTimeoutConfig["".concat(le)]=D.defaultConfiguration.requestTimeoutConfig["".concat(le)])}var fe=d.channelId;if(!Object.values(I.ChannelId).includes(fe))throw new Error("Invalid channelId");var xe,ae=Object.keys(d),de=l(C.default.requiredOmnichannelConfigurationParameters);try{for(de.s();!(xe=de.n()).done;){var Ce=xe.value;if(!ae.includes(Ce))throw new Error("Missing '".concat(Ce,"' in OmnichannelConfiguration"))}}catch(oe){de.e(oe)}finally{de.f()}this.liveChatVersion=I.LiveChatVersion.V1}return(0,M.default)(D,[{key:"getChatConfig",value:(d=(0,x.default)(m.default.mark(function b(z){var q,J,ge,me,le,fe,ae,de,xe,Ce,oe,we=arguments;return m.default.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return J=we.length>1&&void 0!==we[1]&&we[1],ge=U.Timer.TIMER(),this.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.GETCHATCONFIG,"Get Chat config started",z),z||(z=(0,H.uuidv4)()),me="/".concat(O.default.LiveChatConfigPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"?requestId=").concat(z,"&channelId=").concat(this.omnichannelConfiguration.channelId),le="GET",fe="".concat(this.omnichannelConfiguration.orgUrl).concat(me),ae=y.default.create(),(0,B.default)(ae,{retries:this.configuration.maxRequestRetriesOnFailure}),de={},J&&(de=s(s({},C.default.bypassCacheHeaders),de)),re.next=13,ae.get(fe,{headers:de,timeout:null!==(q=this.configuration.defaultRequestTimeout)&&void 0!==q?q:this.configuration.requestTimeoutConfig.getChatConfig});case 13:return Ce=ge.milliSecondsElapsed,(oe=(xe=re.sent).data).LiveChatVersion&&oe.LiveChatVersion===I.LiveChatVersion.V2&&(this.liveChatVersion=oe.LiveChatVersion),oe.headers={},xe.headers&&xe.headers.date&&(oe.headers.date=xe.headers.date),this.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.GETCHATCONFIGSUCCESS,"Get Chat config succeeded",z,xe,Ce,me,le),re.abrupt("return",oe);case 21:case"end":return re.stop()}},b,this)})),function(b){return d.apply(this,arguments)})},{key:"getLWIDetails",value:function(){var d=(0,x.default)(m.default.mark(function b(z){var q,ge,me,le,fe,ae,de,xe,Ce,oe,we,J=this,ye=arguments;return m.default.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ge=ye.length>1&&void 0!==ye[1]?ye[1]:{},me=U.Timer.TIMER(),this.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.GETLWISTATUSSTARTED,"Get LWI Details Started",z),z||(z=(0,H.uuidv4)()),le="/".concat(O.default.LiveChatLiveWorkItemDetailsPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z),fe=y.default.create(),(0,B.default)(fe,{retries:this.configuration.maxRequestRetriesOnFailure}),de=ge.reconnectId,xe=C.default.defaultHeaders,(ae=ge.authenticatedUserToken)&&(le="/".concat(O.default.LiveChatAuthLiveWorkItemDetailsPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z),xe[V.default.authenticatedUserToken]=ae),de&&(le+="/".concat(de)),le+="?channelId=".concat(this.omnichannelConfiguration.channelId),Ce="".concat(this.omnichannelConfiguration.orgUrl).concat(le),we={headers:xe,method:oe="GET",url:Ce,timeout:null!==(q=this.configuration.defaultRequestTimeout)&&void 0!==q?q:this.configuration.requestTimeoutConfig.getLWIDetails},ee.abrupt("return",new Promise(function(){var Z=(0,x.default)(m.default.mark(function ue(Re,Te){var Ee,Ne;return m.default.wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.prev=0,Ae.next=3,fe(we);case 3:Ne=(Ee=Ae.sent).data,J.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.GETLWISTATUSSUCCEEDED,"Get LWI Details succeeded",z,Ee,me.milliSecondsElapsed,le,oe),Re(Ne),Ae.next=16;break;case 10:Ae.prev=10,Ae.t0=Ae.catch(0),J.logWithLogger(P.LogLevel.ERROR,I.OCSDKTelemetryEvent.GETLWISTATUSFAILED,"Get LWI Details failed",z,void 0,me.milliSecondsElapsed,le,oe,Ae.t0),Ae.t0.code===C.default.axiosTimeoutErrorCode&&(0,$.default)(),Te();case 16:case"end":return Ae.stop()}},ue,null,[[0,10]])}));return function(ue,Re){return Z.apply(this,arguments)}}()));case 16:case"end":return ee.stop()}},b,this)}));return function(b){return d.apply(this,arguments)}}()},{key:"getChatToken",value:function(){var d=(0,x.default)(m.default.mark(function b(z){var q,ge,me,le,fe,ae,de,xe,Ce,oe,we,ye,re,ee,J=this,Z=arguments;return m.default.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:if(ge=Z.length>1&&void 0!==Z[1]?Z[1]:{},me=Z.length>2&&void 0!==Z[2]?Z[2]:0,le=U.Timer.TIMER(),fe=ge.reconnectId,ae=ge.authenticatedUserToken,de=ge.currentLiveChatVersion,this.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.GETCHATTOKENSTARTED,"Get Chat Token Started",z),!(me<0)){Re.next=7;break}throw new Error("Invalid currentRetryCount");case 7:return z||(z=(0,H.uuidv4)()),xe=C.default.defaultHeaders,Ce="/".concat(O.default.LiveChatGetChatTokenPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z),this.liveChatVersion===I.LiveChatVersion.V2||de&&de===I.LiveChatVersion.V2?(Ce="/".concat(O.default.LiveChatv2GetChatTokenPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z),ae&&(Ce="/".concat(O.default.LiveChatv2AuthGetChatTokenPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z),xe[V.default.authenticatedUserToken]=ae)):ae&&(Ce="/".concat(O.default.LiveChatAuthGetChatTokenPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z),xe[V.default.authenticatedUserToken]=ae),fe&&(Ce+="/".concat(fe)),oe="channelId=".concat(this.omnichannelConfiguration.channelId),Ce+="?".concat(oe),we="".concat(this.omnichannelConfiguration.orgUrl).concat(Ce),re={headers:xe,method:ye="GET",url:we,timeout:null!==(q=this.configuration.defaultRequestTimeout)&&void 0!==q?q:this.configuration.requestTimeoutConfig.getChatToken},ee=y.default.create(),(0,B.default)(ee,{retries:this.configuration.maxRequestRetriesOnFailure,retryOn429:this.configuration.getChatTokenRetryOn429}),Re.abrupt("return",new Promise(function(){var Te=(0,x.default)(m.default.mark(function Ee($e,Ne){var _e,Be,Ae,Le,Ct;return m.default.wrap(function(Vt){for(;;)switch(Vt.prev=Vt.next){case 0:return _e=void 0,Vt.prev=1,Vt.next=4,ee(re);case 4:if(Ae=le.milliSecondsElapsed,!(Le=(Be=Vt.sent).data)){Vt.next=12;break}return Le.requestId=z,J.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.GETCHATTOKENSUCCEEDED,"Get Chat Token succeeded",z,Be,Ae,Ce,ye),$e(Le),Vt.abrupt("return");case 12:if(!fe||Be.status!==C.default.noContentStatusCode){Vt.next=15;break}return Ne(Be),Vt.abrupt("return");case 15:Vt.next=25;break;case 17:if(Vt.prev=17,Vt.t0=Vt.catch(1),J.logWithLogger(P.LogLevel.ERROR,I.OCSDKTelemetryEvent.GETCHATTOKENFAILED,"Get Chat Token failed",z,void 0,le.milliSecondsElapsed,Ce,ye,Vt.t0),_e=Vt.t0,(null===(Ct=Vt.t0.response)||void 0===Ct?void 0:Ct.status)!==C.default.tooManyRequestsStatusCode||J.configuration.getChatTokenRetryOn429){Vt.next=25;break}return Ne(Vt.t0),Vt.abrupt("return");case 25:if(!(me+1>=J.configuration.getChatTokenRetryCount)){Vt.next=28;break}return _e&&_e.code==C.default.axiosTimeoutErrorCode?(0,$.default)():Ne(new Error("The retry for getchattoken has exceeded its max value of ".concat(J.configuration.getChatTokenRetryCount))),Vt.abrupt("return");case 28:setTimeout(function(){J.getChatToken(z,ge,me+1).then(function(qe){return $e(qe)}).catch(function(qe){return Ne(qe)})},J.configuration.getChatTokenTimeBetweenRetriesOnFailure);case 29:case"end":return Vt.stop()}},Ee,null,[[1,17]])}));return function(Ee,$e){return Te.apply(this,arguments)}}()));case 20:case"end":return Re.stop()}},b,this)}));return function(b){return d.apply(this,arguments)}}()},{key:"getReconnectableChats",value:function(){var d=(0,x.default)(m.default.mark(function b(z){var q,ge,me,le,fe,ae,xe,Ce,oe,J=this;return m.default.wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return ge=U.Timer.TIMER(),me=z.authenticatedUserToken,this.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.GETRECONNECTABLECHATS,"Get Reconnectable chat Started"),le="/".concat(O.default.LiveChatGetReconnectableChatsPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(this.omnichannelConfiguration.orgId,"?channelId=").concat(this.omnichannelConfiguration.channelId),(fe=C.default.defaultHeaders)[V.default.authenticatedUserToken]=me,ae="".concat(this.omnichannelConfiguration.orgUrl).concat(le),xe={headers:fe,method:"GET",url:ae,timeout:null!==(q=this.configuration.defaultRequestTimeout)&&void 0!==q?q:this.configuration.requestTimeoutConfig.getReconnectableChats},Ce=y.default.create(),oe=this.omnichannelConfiguration.orgId,ye.abrupt("return",new Promise(function(){var re=(0,x.default)(m.default.mark(function ee(Z,ue){var Re,Te,Ee;return m.default.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return _e.prev=0,_e.next=3,Ce(xe);case 3:if(Te=ge.milliSecondsElapsed,!(Ee=(Re=_e.sent).data)){_e.next=10;break}return J.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.GETRECONNECTABLECHATS,"Get Reconnectable Chats Succeeded and old session returned",oe,Re,Te,le,"GET"),Z(Ee),_e.abrupt("return");case 10:return Z(),_e.abrupt("return");case 14:return _e.prev=14,_e.t0=_e.catch(0),J.logWithLogger(P.LogLevel.ERROR,I.OCSDKTelemetryEvent.GETRECONNECTABLECHATS,"Get Reconnectable Chats failed",oe,void 0,ge.milliSecondsElapsed,le,"GET",_e.t0),_e.t0.code===C.default.axiosTimeoutErrorCode&&(0,$.default)(),ue(_e.t0),_e.abrupt("return");case 21:case"end":return _e.stop()}},ee,null,[[0,14]])}));return function(ee,Z){return re.apply(this,arguments)}}()));case 12:case"end":return ye.stop()}},b,this)}));return function(b){return d.apply(this,arguments)}}()},{key:"getReconnectAvailability",value:function(){var d=(0,x.default)(m.default.mark(function b(z){var q,ge,me,le,fe,de,xe,J=this;return m.default.wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return ge=U.Timer.TIMER(),this.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.GETRECONNECTAVAILABILITY,"Get Reconnectable availability Started"),me="/".concat(O.default.LiveChatReconnectAvailabilityPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z),le=C.default.defaultHeaders,fe="".concat(this.omnichannelConfiguration.orgUrl).concat(me),de={headers:le,method:"GET",url:fe,timeout:null!==(q=this.configuration.defaultRequestTimeout)&&void 0!==q?q:this.configuration.requestTimeoutConfig.getReconnectAvailability},xe=y.default.create(),oe.abrupt("return",new Promise(function(){var we=(0,x.default)(m.default.mark(function ye(re,ee){var Z,ue,Re;return m.default.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return $e.prev=0,$e.next=3,xe(de);case 3:if(ue=ge.milliSecondsElapsed,!(Re=(Z=$e.sent).data)){$e.next=10;break}return J.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.GETRECONNECTAVAILABILITY,"Get Reconnect availability succeeded",void 0,Z,ue,me,"GET"),re(Re),$e.abrupt("return");case 10:return J.logWithLogger(P.LogLevel.WARN,I.OCSDKTelemetryEvent.GETRECONNECTAVAILABILITY,"Get Reconnect availability didn't send any valid data",void 0,Z,ue,me,"GET"),re(),$e.abrupt("return");case 15:return $e.prev=15,$e.t0=$e.catch(0),J.logWithLogger(P.LogLevel.ERROR,I.OCSDKTelemetryEvent.GETRECONNECTAVAILABILITY,"Get Reconnect Availability failed",void 0,void 0,ge.milliSecondsElapsed,me,"GET",$e.t0),$e.t0.code===C.default.axiosTimeoutErrorCode&&(0,$.default)(),ee($e.t0),$e.abrupt("return");case 22:case"end":return $e.stop()}},ye,null,[[0,15]])}));return function(ye,re){return we.apply(this,arguments)}}()));case 9:case"end":return oe.stop()}},b,this)}));return function(b){return d.apply(this,arguments)}}()},{key:"getAgentAvailability",value:function(){var d=(0,x.default)(m.default.mark(function b(z){var q,ge,me,le,fe,ae,de,xe,Ce,oe,we,ye,re,ee,Z,J=this,ue=arguments;return m.default.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:if(ge=ue.length>1&&void 0!==ue[1]?ue[1]:{},me=U.Timer.TIMER(),this.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.GETAGENTAVAILABILITYSTARTED,"Get agent availability Started",z),le="/".concat(O.default.GetAgentAvailabilityPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z,"?channelId=lcw"),fe=y.default.create(),(0,B.default)(fe,{retries:this.configuration.maxRequestRetriesOnFailure}),de=ge.initContext,xe=ge.getContext,Ce=C.default.defaultHeaders,(ae=ge.authenticatedUserToken)&&(Ce[V.default.authenticatedUserToken]=ae),we={orgId:this.omnichannelConfiguration.orgId,widgetId:this.omnichannelConfiguration.widgetId},(oe=de||{})&&oe.customContextData&&(ye=te.CustomContextData.sort(oe.customContextData),Object.assign(we,{customContext:ye})),oe.portalcontactid&&Object.assign(we,{portalcontactid:oe.portalcontactid}),oe.cacheKey=W.createHash("sha256").update(JSON.stringify(we)).digest("hex").toString(),!xe||window.document){Te.next=16;break}return Te.abrupt("return",Promise.reject(new Error("getContext is only supported on web browsers")));case 16:if(xe&&(oe.browser=h.BrowserInfo.getBrowserName(),oe.device=v.DeviceInfo.getDeviceType(),oe.originurl=window.location.href,oe.os=k.OSInfo.getOsType()),oe.locale||(oe.locale=C.default.defaultLocale),!oe.locale||w.default.supportedLocales.includes(oe.locale)){Te.next=20;break}return Te.abrupt("return",Promise.reject(new Error("Unsupported locale: '".concat(oe.locale,"'"))));case 20:return re="".concat(this.omnichannelConfiguration.orgUrl).concat(le),Z={data:oe,headers:Ce,method:ee="POST",url:re,timeout:null!==(q=this.configuration.defaultRequestTimeout)&&void 0!==q?q:this.configuration.requestTimeoutConfig.getAgentAvailability},Te.abrupt("return",new Promise(function(){var Ee=(0,x.default)(m.default.mark(function $e(Ne,_e){var Be,Ae,Le;return m.default.wrap(function(We){for(;;)switch(We.prev=We.next){case 0:return We.prev=0,We.next=3,fe(Z);case 3:Ae=me.milliSecondsElapsed,(Le=(Be=We.sent).data)&&(J.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.GETAGENTAVAILABILITYSUCCEEDED,"Get agent availability succeeded",z,Be,Ae,le,ee),Ne(Le)),We.next=15;break;case 9:We.prev=9,We.t0=We.catch(0),J.logWithLogger(P.LogLevel.ERROR,I.OCSDKTelemetryEvent.GETAGENTAVAILABILITYFAILED,"Get agent availability failed",z,void 0,me.milliSecondsElapsed,le,ee,We.t0),We.t0.code===C.default.axiosTimeoutErrorCode&&(0,$.default)(),_e(We.t0);case 15:case"end":return We.stop()}},$e,null,[[0,9]])}));return function($e,Ne){return Ee.apply(this,arguments)}}()));case 24:case"end":return Te.stop()}},b,this)}));return function(b){return d.apply(this,arguments)}}()},{key:"sessionInit",value:function(){var d=(0,x.default)(m.default.mark(function b(z){var q,J,ge,me,le,fe,ae,de,xe,Ce,oe,we,ye,re,ee,Te=arguments;return m.default.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:if(J=Te.length>1&&void 0!==Te[1]?Te[1]:{},ge=U.Timer.TIMER(),this.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.SESSIONINITSTARTED,"Session Init Started",z),me=y.default.create(),(0,B.default)(me,{retries:this.configuration.maxRequestRetriesOnFailure}),le=J.reconnectId,fe=J.authenticatedUserToken,ae=J.initContext,de=J.getContext,xe=C.default.defaultHeaders,Ce="/".concat(O.default.LiveChatSessionInitPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z),fe&&(Ce="/".concat(O.default.LiveChatAuthSessionInitPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z),xe[V.default.authenticatedUserToken]=fe),le&&(Ce+="/".concat(le)),oe="channelId=".concat(this.omnichannelConfiguration.channelId),Ce+="?".concat(oe),we=ae||{},!de||window.document){$e.next=15;break}return $e.abrupt("return",Promise.reject(new Error("getContext is only supported on web browsers")));case 15:if(de&&(we.browser=h.BrowserInfo.getBrowserName(),we.device=v.DeviceInfo.getDeviceType(),we.originurl=window.location.href,we.os=k.OSInfo.getOsType()),we.locale||(we.locale=C.default.defaultLocale),!we.locale||w.default.supportedLocales.includes(we.locale)){$e.next=19;break}return $e.abrupt("return",Promise.reject(new Error("Unsupported locale: '".concat(we.locale,"'"))));case 19:return ye="".concat(this.omnichannelConfiguration.orgUrl).concat(Ce),ee={data:we,headers:xe,method:re="POST",url:ye,timeout:null!==(q=this.configuration.defaultRequestTimeout)&&void 0!==q?q:this.configuration.requestTimeoutConfig.sessionInit},$e.prev=22,$e.next=25,me(ee);case 25:this.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.SESSIONINITSUCCEEDED,"Session Init Succeeded",z,$e.sent,ge.milliSecondsElapsed,Ce,re,void 0,we),$e.next=36;break;case 30:throw $e.prev=30,$e.t0=$e.catch(22),this.logWithLogger(P.LogLevel.ERROR,I.OCSDKTelemetryEvent.SESSIONINITFAILED,"Session Init failed",z,void 0,ge.milliSecondsElapsed,Ce,re,$e.t0,we),$e.t0.code===C.default.axiosTimeoutErrorCode&&(0,$.default)(),$e.t0;case 36:case"end":return $e.stop()}},b,this,[[22,30]])}));return function(b){return d.apply(this,arguments)}}()},{key:"sessionClose",value:function(){var d=(0,x.default)(m.default.mark(function b(z){var q,ge,me,le,fe,ae,de,xe,oe,we,ye,re,ee,J=this,Z=arguments;return m.default.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return ge=Z.length>1&&void 0!==Z[1]?Z[1]:{},me=U.Timer.TIMER(),this.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.SESSIONCLOSESTARTED,"Session Close Started",z),le="/".concat(O.default.LiveChatSessionClosePath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z,"?channelId=").concat(this.omnichannelConfiguration.channelId),fe=y.default.create(),(0,B.default)(fe,{retries:this.configuration.maxRequestRetriesOnFailure}),ae=ge.authenticatedUserToken,de=ge.isReconnectChat,xe=ge.isPersistentChat,oe=C.default.defaultHeaders,(we={}).chatId=ge.chatId,ae&&(le="/".concat(O.default.LiveChatAuthSessionClosePath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z,"?channelId=").concat(this.omnichannelConfiguration.channelId),oe[V.default.authenticatedUserToken]=ae),de&&(le+="&isReconnectChat=true"),xe&&(le+="&isPersistentChat=true"),ye="".concat(this.omnichannelConfiguration.orgUrl).concat(le),ee={data:we,headers:oe,method:re="POST",url:ye,timeout:null!==(q=this.configuration.defaultRequestTimeout)&&void 0!==q?q:this.configuration.requestTimeoutConfig.sessionClose},Re.abrupt("return",new Promise(function(){var Te=(0,x.default)(m.default.mark(function Ee($e,Ne){return m.default.wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:return Ct.prev=0,Ct.next=3,fe(ee);case 3:J.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.SESSIONCLOSESUCCEEDED,"Session Close succeeded",z,Ct.sent,me.milliSecondsElapsed,le,re),$e(),Ct.next=15;break;case 9:Ct.prev=9,Ct.t0=Ct.catch(0),J.logWithLogger(P.LogLevel.ERROR,I.OCSDKTelemetryEvent.SESSIONCLOSEFAILED,"Session close failed",z,void 0,me.milliSecondsElapsed,le,re,Ct.t0),Ct.t0.code===C.default.axiosTimeoutErrorCode&&(0,$.default)(),Ne();case 15:case"end":return Ct.stop()}},Ee,null,[[0,9]])}));return function(Ee,$e){return Te.apply(this,arguments)}}()));case 17:case"end":return Re.stop()}},b,this)}));return function(b){return d.apply(this,arguments)}}()},{key:"validateAuthChatRecord",value:function(){var d=(0,x.default)(m.default.mark(function b(z,q){var J,ge,me,le,fe,ae,de,xe,Ce,oe,we,ye,re;return m.default.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ge=U.Timer.TIMER(),this.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.VALIDATEAUTHCHATRECORDSTARTED,"Validate Auth Chat Record Started",z),me=q.authenticatedUserToken,le=q.chatId,fe="/".concat(O.default.LiveChatValidateAuthChatMapRecordPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(le,"/").concat(z,"?channelId=").concat(this.omnichannelConfiguration.channelId),ae=y.default.create(),(0,B.default)(ae,{retries:this.configuration.maxRequestRetriesOnFailure}),de=C.default.defaultHeaders,me&&(de[V.default.authenticatedUserToken]=me),xe="".concat(this.omnichannelConfiguration.orgUrl).concat(fe),oe={headers:de,method:Ce="GET",url:xe,timeout:null!==(J=this.configuration.defaultRequestTimeout)&&void 0!==J?J:this.configuration.requestTimeoutConfig.validateAuthChatRecordTimeout},ue.prev=11,ue.next=14,ae(oe);case 14:if(re=ge.milliSecondsElapsed,!0!==(null===(we=(ye=ue.sent).data)||void 0===we?void 0:we.authChatExist)){ue.next=21;break}return this.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.VALIDATEAUTHCHATRECORDSUCCEEDED,"Validate Auth Chat Record succeeded",z,ye,re,fe,Ce),ue.abrupt("return",Promise.resolve(ye.data));case 21:return this.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.VALIDATEAUTHCHATRECORDFAILED,"Validate Auth Chat Record Failed. Record is not found or request is not authorized",z,ye,re,fe,Ce),ue.abrupt("return",Promise.reject(new Error("Validate Auth Chat Record Failed. Record is not found or request is not authorized")));case 23:ue.next=35;break;case 25:if(ue.prev=25,ue.t0=ue.catch(11),this.logWithLogger(P.LogLevel.ERROR,I.OCSDKTelemetryEvent.VALIDATEAUTHCHATRECORDFAILED,"Validate Auth Chat Record failed",z,void 0,ge.milliSecondsElapsed,fe,Ce,ue.t0),ue.t0.code===C.default.axiosTimeoutErrorCode&&(0,$.default)(),"Error: Request failed with status code 404"!==ue.t0.toString()){ue.next=34;break}return ue.abrupt("return",Promise.resolve({}));case 34:return ue.abrupt("return",Promise.reject());case 35:case"end":return ue.stop()}},b,this,[[11,25]])}));return function(b,z){return d.apply(this,arguments)}}()},{key:"submitPostChatResponse",value:function(){var d=(0,x.default)(m.default.mark(function b(z,q){var J,me,le,fe,ae,de,xe,Ce,oe,we,ge=this,ye=arguments;return m.default.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return me=ye.length>2&&void 0!==ye[2]?ye[2]:{},le=U.Timer.TIMER(),this.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.SUBMITPOSTCHATSTARTED,"Submit Post Chat Started",z),fe="/".concat(O.default.LiveChatSubmitPostChatPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z,"?channelId=").concat(this.omnichannelConfiguration.channelId),ae=y.default.create(),(0,B.default)(ae,{retries:this.configuration.maxRequestRetriesOnFailure}),xe=C.default.defaultHeaders,(de=me.authenticatedUserToken)&&(fe="/".concat(O.default.LiveChatAuthSubmitPostChatPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z,"?channelId=").concat(this.omnichannelConfiguration.channelId),xe[V.default.authenticatedUserToken]=de),Ce="".concat(this.omnichannelConfiguration.orgUrl).concat(fe),oe="POST",we={data:JSON.stringify(q),headers:xe,method:oe,url:Ce,timeout:null!==(J=this.configuration.defaultRequestTimeout)&&void 0!==J?J:this.configuration.requestTimeoutConfig.submitPostChatResponse},ee.abrupt("return",new Promise(function(){var Z=(0,x.default)(m.default.mark(function ue(Re,Te){return m.default.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return Be.prev=0,Be.next=3,ae(we);case 3:ge.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.SUBMITPOSTCHATSUCCEEDED,"Submit Post Chat succeeded",z,Be.sent,le.milliSecondsElapsed,fe,oe),Re(),Be.next=15;break;case 9:Be.prev=9,Be.t0=Be.catch(0),ge.logWithLogger(P.LogLevel.ERROR,I.OCSDKTelemetryEvent.SUBMITPOSTCHATFAILED,"Submit Post Chat Failed",z,void 0,le.milliSecondsElapsed,fe,oe,Be.t0),Be.t0.code===C.default.axiosTimeoutErrorCode&&(0,$.default)(),Te();case 15:case"end":return Be.stop()}},ue,null,[[0,9]])}));return function(ue,Re){return Z.apply(this,arguments)}}()));case 13:case"end":return ee.stop()}},b,this)}));return function(b,z){return d.apply(this,arguments)}}()},{key:"getSurveyInviteLink",value:function(){var d=(0,x.default)(m.default.mark(function b(z,q){var J,me,le,fe,ae,de,xe,Ce,oe,we,ye,ge=this,re=arguments;return m.default.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return me=re.length>2&&void 0!==re[2]?re[2]:{},le=U.Timer.TIMER(),this.logger&&this.logger.log(P.LogLevel.INFO,I.OCSDKTelemetryEvent.GETSURVEYINVITELINKSTARTED,{SurveyOwnerId:z},"Get Survey Invite Link Started"),fe="/".concat(O.default.LiveChatGetSurveyInviteLinkPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(z),ae=y.default.create(),(0,B.default)(ae,{retries:this.configuration.maxRequestRetriesOnFailure}),xe=me.requestId,Ce=C.default.defaultHeaders,(de=me.authenticatedUserToken)&&(fe="/".concat(O.default.LiveChatAuthGetSurveyInviteLinkPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(z),Ce[V.default.authenticatedUserToken]=de,Ce[V.default.widgetAppId]=this.omnichannelConfiguration.widgetId),xe&&(Ce[V.default.requestId]=xe),oe="".concat(this.omnichannelConfiguration.orgUrl).concat(fe),we="POST",ye={data:JSON.stringify(q),headers:Ce,method:we,url:oe,timeout:null!==(J=this.configuration.defaultRequestTimeout)&&void 0!==J?J:this.configuration.requestTimeoutConfig.getSurveyInviteLink},Z.abrupt("return",new Promise(function(){var ue=(0,x.default)(m.default.mark(function Re(Te,Ee){var $e,Ne;return m.default.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return Le.prev=0,Le.next=3,ae(ye);case 3:Ne=($e=Le.sent).data,ge.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.GETSURVEYINVITELINKSUCCEEDED,"Get Survey Invite Link Succeeded",xe,$e,le.milliSecondsElapsed,fe,we),Te(Ne),Le.next=16;break;case 10:Le.prev=10,Le.t0=Le.catch(0),ge.logWithLogger(P.LogLevel.ERROR,I.OCSDKTelemetryEvent.GETSURVEYINVITELINKFAILED,"Get Survey Invite Link failed",xe,void 0,le.milliSecondsElapsed,fe,we,Le.t0),Le.t0.code===C.default.axiosTimeoutErrorCode&&(0,$.default)(),Ee();case 16:case"end":return Le.stop()}},Re,null,[[0,10]])}));return function(Re,Te){return ue.apply(this,arguments)}}()));case 14:case"end":return Z.stop()}},b,this)}));return function(b,z){return d.apply(this,arguments)}}()},{key:"getChatTranscripts",value:function(){var d=(0,x.default)(m.default.mark(function b(z,q,J){var ge,le,fe,ae,de,xe,Ce,oe,we,ye,re,me=this,ee=arguments;return m.default.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return le=ee.length>3&&void 0!==ee[3]?ee[3]:{},fe=U.Timer.TIMER(),this.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.GETCHATTRANSCRIPTSTARTED,"Get Chat Transcript Started",z),ae="/".concat(O.default.LiveChatGetChatTranscriptPath,"/").concat(q,"/").concat(z,"?channelId=").concat(this.omnichannelConfiguration.channelId),de=y.default.create(),(0,B.default)(de,{retries:this.configuration.maxRequestRetriesOnFailure}),xe=le.authenticatedUserToken,Ce=le.currentLiveChatVersion,(oe=C.default.defaultHeaders)[V.default.organizationId]=this.omnichannelConfiguration.orgId,oe[V.default.widgetAppId]=this.omnichannelConfiguration.widgetId,oe[V.default.authorization]=J,this.liveChatVersion===I.LiveChatVersion.V2||Ce&&Ce===I.LiveChatVersion.V2?(ae="/".concat(O.default.LiveChatv2GetChatTranscriptPath,"/").concat(q,"/").concat(z,"?channelId=").concat(this.omnichannelConfiguration.channelId),xe&&(ae="/".concat(O.default.LiveChatv2AuthGetChatTranscriptPath,"/").concat(q,"/").concat(z,"?channelId=").concat(this.omnichannelConfiguration.channelId))):xe&&(ae="/".concat(O.default.LiveChatAuthGetChatTranscriptPath,"/").concat(q,"/").concat(z,"?channelId=").concat(this.omnichannelConfiguration.channelId)),we="".concat(this.omnichannelConfiguration.orgUrl).concat(ae),re={headers:oe,method:ye="GET",url:we,timeout:null!==(ge=this.configuration.defaultRequestTimeout)&&void 0!==ge?ge:this.configuration.requestTimeoutConfig.getChatTranscripts},ue.abrupt("return",new Promise(function(){var Re=(0,x.default)(m.default.mark(function Te(Ee,$e){var Ne,Be;return m.default.wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:return Ct.prev=0,Ct.next=3,de(re);case 3:Be=(Ne=Ct.sent).data,me.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.GETCHATTRANSCRIPTSUCCEEDED,"Get Chat Transcript succeeded",z,Ne,fe.milliSecondsElapsed,ae,ye),Ee(Be),Ct.next=16;break;case 10:Ct.prev=10,Ct.t0=Ct.catch(0),me.logWithLogger(P.LogLevel.ERROR,I.OCSDKTelemetryEvent.GETCHATTRANSCRIPTFAILED,"Get Chat Transcript failed",z,void 0,fe.milliSecondsElapsed,ae,ye,Ct.t0),Ct.t0.code===C.default.axiosTimeoutErrorCode&&(0,$.default)(),$e(Ct.t0);case 16:case"end":return Ct.stop()}},Te,null,[[0,10]])}));return function(Te,Ee){return Re.apply(this,arguments)}}()));case 16:case"end":return ue.stop()}},b,this)}));return function(b,z,q){return d.apply(this,arguments)}}()},{key:"emailTranscript",value:function(){var d=(0,x.default)(m.default.mark(function b(z,q,J){var ge,le,fe,ae,de,xe,Ce,oe,we,ye,me=this,re=arguments;return m.default.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return le=re.length>3&&void 0!==re[3]?re[3]:{},fe=U.Timer.TIMER(),this.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.EMAILTRANSCRIPTSTARTED,"Email Transcript Started",z),ae="/".concat(O.default.LiveChatTranscriptEmailRequestPath,"/").concat(z,"?channelId=").concat(this.omnichannelConfiguration.channelId),de=y.default.create(),(0,B.default)(de,{retries:this.configuration.maxRequestRetriesOnFailure}),xe=le.authenticatedUserToken,(Ce=C.default.defaultHeaders)[V.default.organizationId]=this.omnichannelConfiguration.orgId,Ce[V.default.widgetAppId]=this.omnichannelConfiguration.widgetId,Ce[V.default.authorization]=q,xe&&(ae="/".concat(O.default.LiveChatAuthTranscriptEmailRequestPath,"/").concat(z,"?channelId=").concat(this.omnichannelConfiguration.channelId)),oe="".concat(this.omnichannelConfiguration.orgUrl).concat(ae),we="POST",ye={data:JSON.stringify(J),headers:Ce,method:we,url:oe,timeout:null!==(ge=this.configuration.defaultRequestTimeout)&&void 0!==ge?ge:this.configuration.requestTimeoutConfig.emailTranscript},Z.abrupt("return",new Promise(function(){var ue=(0,x.default)(m.default.mark(function Re(Te,Ee){return m.default.wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.prev=0,Ae.next=3,de(ye);case 3:me.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.EMAILTRANSCRIPTSUCCEEDED,"Email Transcript succeeded",z,Ae.sent,fe.milliSecondsElapsed,ae,we),Te(),Ae.next=15;break;case 9:Ae.prev=9,Ae.t0=Ae.catch(0),me.logWithLogger(P.LogLevel.ERROR,I.OCSDKTelemetryEvent.EMAILTRANSCRIPTFAILED,"Email Transcript Failed",z,void 0,fe.milliSecondsElapsed,ae,we,Ae.t0),Ae.t0.code===C.default.axiosTimeoutErrorCode&&(0,$.default)(),Ee();case 15:case"end":return Ae.stop()}},Re,null,[[0,9]])}));return function(Re,Te){return ue.apply(this,arguments)}}()));case 16:case"end":return Z.stop()}},b,this)}));return function(b,z,q){return d.apply(this,arguments)}}()},{key:"fetchDataMaskingInfo",value:function(){var d=(0,x.default)(m.default.mark(function b(z){var q,ge,me,le,fe,ae,xe,J=this;return m.default.wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return ge=U.Timer.TIMER(),this.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.FETCHDATAMASKINGSTARTED,"Fetch Data Masking Started",z),z||(z=(0,H.uuidv4)()),me="/".concat(O.default.LiveChatFetchDataMaskingInfoPath,"/").concat(this.omnichannelConfiguration.orgId),le=y.default.create(),(0,B.default)(le,{retries:this.configuration.maxRequestRetriesOnFailure}),(fe=C.default.defaultHeaders)[V.default.organizationId]=this.omnichannelConfiguration.orgId,fe[V.default.requestId]=z,ae="".concat(this.omnichannelConfiguration.orgUrl).concat(me),xe={headers:fe,method:"GET",url:ae,timeout:null!==(q=this.configuration.defaultRequestTimeout)&&void 0!==q?q:this.configuration.requestTimeoutConfig.fetchDataMaskingInfo},oe.abrupt("return",new Promise(function(){var we=(0,x.default)(m.default.mark(function ye(re,ee){var Z,Re;return m.default.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return $e.prev=0,$e.next=3,le(xe);case 3:Re=(Z=$e.sent).data,J.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.FETCHDATAMASKINGSUCCEEDED,"Fetch Data Masking succeeded",z,Z,ge.milliSecondsElapsed,me,"GET"),re(Re),$e.next=16;break;case 10:$e.prev=10,$e.t0=$e.catch(0),J.logWithLogger(P.LogLevel.ERROR,I.OCSDKTelemetryEvent.FETCHDATAMASKINGFAILED,"Fetch Data Masking Failed",z,void 0,ge.milliSecondsElapsed,me,"GET",$e.t0),$e.t0.code===C.default.axiosTimeoutErrorCode&&(0,$.default)(),ee();case 16:case"end":return $e.stop()}},ye,null,[[0,10]])}));return function(ye,re){return we.apply(this,arguments)}}()));case 13:case"end":return oe.stop()}},b,this)}));return function(b){return d.apply(this,arguments)}}()},{key:"makeSecondaryChannelEventRequest",value:function(){var d=(0,x.default)(m.default.mark(function b(z,q){var J,ge,me,le,fe,ae,de,xe,Ce,oe,ee=arguments;return m.default.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ge=ee.length>2&&void 0!==ee[2]?ee[2]:{},me=U.Timer.TIMER(),this.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.SECONDARYCHANNELEVENTREQUESTSTARTED,"Secondary Channel Event Request Started",z),le="/".concat(O.default.LiveChatSecondaryChannelEventPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z),fe=y.default.create(),(0,B.default)(fe,{retries:this.configuration.maxRequestRetriesOnFailure}),ae=ge.authenticatedUserToken,(de=C.default.defaultHeaders)[V.default.organizationId]=this.omnichannelConfiguration.orgId,ae&&(de[V.default.authenticatedUserToken]=ae,le="/".concat(O.default.LiveChatAuthSecondaryChannelEventPath,"/").concat(this.omnichannelConfiguration.orgId,"/").concat(this.omnichannelConfiguration.widgetId,"/").concat(z)),le+="?channelId="+C.default.defaultChannelId,xe="".concat(this.omnichannelConfiguration.orgUrl).concat(le),Ce="POST",oe={data:JSON.stringify(q),headers:de,method:Ce,url:xe,timeout:null!==(J=this.configuration.defaultRequestTimeout)&&void 0!==J?J:this.configuration.requestTimeoutConfig.makeSecondaryChannelEventRequest},ue.prev=14,ue.next=17,fe(oe);case 17:this.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.SECONDARYCHANNELEVENTREQUESTSUCCEEDED,"Secondary Channel Event Request Succeeded",z,ue.sent,me.milliSecondsElapsed,le,Ce),ue.next=28;break;case 22:throw ue.prev=22,ue.t0=ue.catch(14),this.logWithLogger(P.LogLevel.ERROR,I.OCSDKTelemetryEvent.SECONDARYCHANNELEVENTREQUESTFAILED,"Secondary Channel Event Request Failed",z,void 0,me.milliSecondsElapsed,le,Ce,ue.t0),ue.t0.code===C.default.axiosTimeoutErrorCode&&(0,$.default)(),ue.t0;case 28:case"end":return ue.stop()}},b,this,[[14,22]])}));return function(b,z){return d.apply(this,arguments)}}()},{key:"sendTypingIndicator",value:function(){var d=(0,x.default)(m.default.mark(function b(z,q){var J,me,le,fe,ae,de,xe,Ce,oe,we,ge=this,ye=arguments;return m.default.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(me=ye.length>2&&void 0!==ye[2]?ye[2]:{},q&&q===I.LiveChatVersion.V2){ee.next=3;break}return ee.abrupt("return",Promise.resolve());case 3:if(le=U.Timer.TIMER(),fe=me.customerDisplayName,q&&q===I.LiveChatVersion.V2){ee.next=7;break}throw new Error("Typing indicator is only supported on v2");case 7:return ae="/".concat(O.default.SendTypingIndicatorPath,"/").concat(z),de=y.default.create(),(xe=C.default.defaultHeaders)[V.default.organizationId]=this.omnichannelConfiguration.orgId,fe&&(xe[C.default.customerDisplayName]=fe),Ce="".concat(this.omnichannelConfiguration.orgUrl).concat(ae),we={headers:xe,method:oe="POST",url:Ce,timeout:null!==(J=this.configuration.defaultRequestTimeout)&&void 0!==J?J:this.configuration.requestTimeoutConfig.sendTypingIndicator},ee.abrupt("return",new Promise(function(){var Z=(0,x.default)(m.default.mark(function ue(Re,Te){return m.default.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return Be.prev=0,Be.next=3,de(we);case 3:ge.logWithLogger(P.LogLevel.INFO,I.OCSDKTelemetryEvent.SENDTYPINGINDICATORSUCCEEDED,"Send Typing Indicator Succeeded",z,Be.sent,le.milliSecondsElapsed,ae,oe),Re(),Be.next=15;break;case 9:Be.prev=9,Be.t0=Be.catch(0),ge.logWithLogger(P.LogLevel.ERROR,I.OCSDKTelemetryEvent.SENDTYPINGINDICATORFAILED,"Send Typing Indicator Failed",z,void 0,le.milliSecondsElapsed,ae,oe,Be.t0),Be.t0.code===C.default.axiosTimeoutErrorCode&&(0,$.default)(),Te(Be.t0);case 15:case"end":return Be.stop()}},ue,null,[[0,9]])}));return function(ue,Re){return Z.apply(this,arguments)}}()));case 16:case"end":return ee.stop()}},b,this)}));return function(b,z){return d.apply(this,arguments)}}()},{key:"logWithLogger",value:function(i,b,z,q,J,ge,me,le,fe,ae){var de;if(this.logger){fe&&S.LoggingSanitizer.stripErrorSensitiveProperties(fe);var xe=void 0;ae&&((xe=s({},ae)).customContextData&&S.LoggingSanitizer.stripCustomContextDataValues(xe.customContextData),xe.preChatResponse&&S.LoggingSanitizer.stripPreChatResponse(xe.preChatResponse),S.LoggingSanitizer.stripGeolocation(xe));var Ce={RequestId:q,Region:null==J?void 0:J.data.Region,ElapsedTimeInMilliseconds:ge,TransactionId:null==J?void 0:J.headers[C.default.transactionid],RequestPath:me,RequestMethod:le,ResponseStatusCode:J?J.status:fe?null===(de=fe.response)||void 0===de?void 0:de.status:void 0,ExceptionDetails:fe,RequestPayload:xe};this.logger.log(i,b,Ce,z)}}}]),D;var d}();L.default=_,(0,A.default)(_,"defaultRequestTimeoutConfig",{getChatConfig:3e4,getLWIDetails:5e3,getChatToken:1e4,sessionInit:5e3,sessionClose:1e4,getReconnectableChats:5e3,getReconnectAvailability:5e3,submitPostChatResponse:1e4,getSurveyInviteLink:1e4,getChatTranscripts:3e4,emailTranscript:5e3,fetchDataMaskingInfo:1e3,makeSecondaryChannelEventRequest:5e3,getAgentAvailability:5e3,sendTypingIndicator:5e3,validateAuthChatRecordTimeout:5e3}),(0,A.default)(_,"defaultConfiguration",{getChatTokenRetryCount:10,getChatTokenTimeBetweenRetriesOnFailure:1e4,getChatTokenRetryOn429:!1,maxRequestRetriesOnFailure:3,defaultRequestTimeout:void 0,requestTimeoutConfig:_.defaultRequestTimeoutConfig})},4491:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var N=p(T(9901)),m=p(T(9524)),x=p(T(5413)),u=p(T(4162)),g=p(T(8634));L.default=function(){function A(){(0,N.default)(this,A)}return(0,m.default)(A,null,[{key:"getSDK",value:function(y,h,C){var v=new u.default(C);return new g.default({channelId:y.channelId||x.default.defaultChannelId,orgId:y.orgId,orgUrl:y.orgUrl,widgetId:y.widgetId},h||{},v)}}]),A}()},4717:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.BrowserInfo=L.UNKNOWN_VERSION=void 0;var N=p(T(9901)),m=p(T(9524)),x=p(T(5633)),u=T(2e3),g="([\\d,.]+)";L.UNKNOWN_VERSION="U";var A=function(){function I(){(0,N.default)(this,I)}return(0,m.default)(I,null,[{key:"getUserAgent",value:function(){return this.userAgent()}},{key:"userAgentContainsString",value:function(h){return this.getUserAgent().indexOf(h)>-1}},{key:"isChrome",value:function(){return this.userAgentContainsString(u.BrowserVendor.CHROME)&&!this.userAgentContainsString(u.BrowserVendor.EDGE)&&!this.userAgentContainsString(u.BrowserVendor.EDGE_CHROMIUM)}},{key:"isIe",value:function(){return this.userAgentContainsString("Trident")}},{key:"isEdge",value:function(){return this.userAgentContainsString(u.BrowserVendor.EDGE)||this.userAgentContainsString(u.BrowserVendor.EDGE_CHROMIUM)}},{key:"isOpera",value:function(){return this.userAgentContainsString("OPR/")}},{key:"getBrowserName",value:function(){return this.isOpera()?u.BrowserVendor.OPERA:this.isEdge()?u.BrowserVendor.EDGE:this.isChrome()?u.BrowserVendor.CHROME:this.userAgentContainsString(u.BrowserVendor.FIREFOX)?u.BrowserVendor.FIREFOX:this.userAgentContainsString(u.BrowserVendor.SAFARI)?u.BrowserVendor.SAFARI:this.isIe()?u.BrowserVendor.IE:u.BrowserVendor.UNKNOWN}},{key:"getBrowserVersion",value:function(){var h=this;return this.isIe()?function(){var S=h.getUserAgent(),P=S.match(new RegExp(u.BrowserVendor.IE+" "+g));if(P)return P[1];var k=S.match(new RegExp("rv:"+g));return k?k[1]:void 0}():function(S){S===u.BrowserVendor.SAFARI&&(S="Version"),S===u.BrowserVendor.OPERA&&(S="OPR"),S===u.BrowserVendor.EDGE&&(S="Edge?");var P=h.getUserAgent().match(new RegExp(S+"/"+g));return P?P[1]:"U"}(this.getBrowserName())}}]),I}();L.BrowserInfo=A,(0,x.default)(A,"userAgent",function(){return window.navigator.userAgent})},9114:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.CustomContextData=void 0;var N=p(T(9901)),m=p(T(9524));L.CustomContextData=function(){function u(){(0,N.default)(this,u)}return(0,m.default)(u,null,[{key:"sort",value:function(M){var A=new Array;return Object.keys(M).forEach(function(I){if(M&&M["".concat(I)]){var y={key:I,value:M["".concat(I)]};A.push(y)}}),A.sort(function(I,y){var h=I.key.toUpperCase(),C=y.key.toUpperCase();return h<C?-1:h>C?1:0}),A}}]),u}()},6812:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.DeviceInfo=void 0;var N=p(T(9901)),m=p(T(9524)),x=T(2e3);L.DeviceInfo=function(){function g(){(0,N.default)(this,g)}return(0,m.default)(g,null,[{key:"getDeviceType",value:function(){return window.navigator.userAgent.match(/(android|ipod|windows phone|wpdesktop|windows ce|blackberry\w*|meego|webos|palm|symbian|pda|\w*?mobile\w*?|\w*?phone\w*?)/i)?x.DeviceType.Mobile:window.navigator.userAgent.match(/tablet|ipad/i)?x.DeviceType.Tablet:x.DeviceType.Desktop}}]),g}()},682:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var N=p(T(9901)),m=p(T(9524));L.default=function(){function u(){(0,N.default)(this,u)}return(0,m.default)(u,null,[{key:"raiseCustomEvent",value:function(M,A){var I=u.createCustomEvent(M,A);window.dispatchEvent(I)}},{key:"createCustomEvent",value:function(M,A){var I=A?{detail:A}:void 0,y=null;try{y=new CustomEvent(M,I)}catch(h){(y=document.createEvent("CustomEvent")).initCustomEvent(M,!0,!0,I)}return y}}]),u}()},9569:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.LoggingSanitizer=void 0;var N=p(T(4738)),m=p(T(9901)),x=p(T(9524)),u=p(T(5413));L.LoggingSanitizer=function(){function M(){(0,m.default)(this,M)}return(0,x.default)(M,null,[{key:"stripCustomContextDataValues",value:function(I){var y;null===(y=Object.keys(I))||void 0===y||y.forEach(function(h){var C;null!==(C=I["".concat(h)])&&void 0!==C&&C.value&&(I["".concat(h)].value=u.default.hiddenContentPlaceholder)})}},{key:"stripPreChatResponse",value:function(I){Object.keys(I).forEach(function(y){I["".concat(y)]&&"Type"!==y&&(I["".concat(y)]=u.default.hiddenContentPlaceholder)})}},{key:"stripGeolocation",value:function(I){Object.keys(I).includes("longitude")&&(I.longitude=u.default.hiddenContentPlaceholder),Object.keys(I).includes("latitude")&&(I.latitude=u.default.hiddenContentPlaceholder)}},{key:"stripErrorSensitiveProperties",value:function(I){var y,C,h=this;I&&"object"===(0,N.default)(I)&&(null===(y=Object.keys(I))||void 0===y?void 0:y.length)>0&&(null===(C=Object.keys(I))||void 0===C||C.forEach(function(v){if(-1!==u.default.sensitiveProperties.indexOf(v)&&delete I["".concat(v)],"data"===v){var w;if("string"==typeof I[v])try{w=JSON.parse(I[v])}catch(S){w=void 0}w&&(Object.keys(w).includes("preChatResponse")&&M.stripPreChatResponse(w.preChatResponse),Object.keys(w).includes("customContextData")&&M.stripCustomContextDataValues(w.customContextData),M.stripGeolocation(w),I[v]=JSON.stringify(w))}null===I["".concat(v)]||"object"!==(0,N.default)(I["".concat(v)])||h.stripErrorSensitiveProperties(I["".concat(v)])}))}}]),M}()},7169:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.OSInfo=void 0;var N=p(T(9901)),m=p(T(9524)),x=T(2e3);L.OSInfo=function(){function g(){(0,N.default)(this,g)}return(0,m.default)(g,null,[{key:"getOsType",value:function(){var S=function(){return window.navigator.userAgent};return S().match(/windows\sphone\s\d+\.\d+/i)?x.OperatingSystem.WINDOWS_PHONE:S().match(/ arm;/i)?x.OperatingSystem.WINDOWS_RT:S().match(/(iPad|iPhone|iPod)(?=.*like Mac OS X)/i)?x.OperatingSystem.IOS:S().match(/android/i)?x.OperatingSystem.ANDROID:S().match(/(linux|joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|cros)/i)?x.OperatingSystem.LINUX:S().match(/(macintosh|mac os x)/i)?x.OperatingSystem.MACOSX:S().match(/(windows|win32)/i)?x.OperatingSystem.WINDOWS:x.OperatingSystem.UNKNOWN}}]),g}()},7276:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var N=p(T(9901)),m=p(T(9524));L.default=function(){function u(){(0,N.default)(this,u)}return(0,m.default)(u,null,[{key:"GETTELEMETRYEVENTDATA",value:function(M,A,I){return{Description:I,ElapsedTimeInMilliseconds:A.ElapsedTimeInMilliseconds,Event:M,ExceptionDetails:A.ExceptionDetails,Region:A.Region,RequestId:A.RequestId,TransactionId:A.TransactionId,RequestPayload:A.RequestPayload,RequestPath:A.RequestPath,RequestMethod:A.RequestMethod,ResponseStatusCode:A.ResponseStatusCode}}}]),u}()},3945:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.Timer=void 0;var N=p(T(9901)),m=p(T(9524));L.Timer=function(){function u(){(0,N.default)(this,u)}return(0,m.default)(u,null,[{key:"TIMER",value:function(){var M=(new Date).getTime();return{get milliSecondsElapsed(){return(new Date).getTime()-M}}}}]),u}()},1729:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var N=p(T(5413)),m=p(T(6440));L.default=function(M,A){null==A.retryOn429&&(A.retryOn429=!0);var y=A.retries,h=1;M.interceptors.response.use(void 0,function(S){var P=S.config,k=S.response;return!P||k&&k.status===N.default.tooManyRequestsStatusCode&&!1===A.retryOn429?Promise.reject(S):h<y?(h++,new Promise(function(V){return(0,m.default)(1e3).then(function(){return V(M(P))})})):Promise.reject(S)})}},6440:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0,L.default=function(m){return new Promise(function(x){return setTimeout(x,m)})}},2867:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=void 0;var p=T(2e3);L.default=function(){var u="".concat(p.SDKError.ClientHTTPTimeoutErrorName,": ").concat(p.SDKError.ClientHTTPTimeoutErrorMessage);throw new Error(u)}},8566:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.uuidv4=void 0,L.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(N){var m=16*Math.random()|0;return("x"===N?m:3&m|8).toString(16)})}},3762:(Y,L,T)=>{"use strict";var p=T(3621);Object.defineProperty(L,"__esModule",{value:!0}),Object.defineProperty(L,"SDKProvider",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(L,"uuidv4",{enumerable:!0,get:function(){return g.uuidv4}});var N=p(T(4738)),m=p(T(3096)),x=p(T(4491)),u=p(T(682)),g=T(8566);!function(){if(void 0===global.window&&(global.window=global),void 0===("undefined"==typeof window?"undefined":(0,N.default)(window)))throw new Error("window object not found");"Microsoft"in window||(window.Microsoft={}),"CRM"in window.Microsoft||(window.Microsoft.CRM={}),"Omnichannel"in window.Microsoft.CRM||(window.Microsoft.CRM.Omnichannel={}),"SDK"in window.Microsoft.CRM.Omnichannel||(window.Microsoft.CRM.Omnichannel.SDK={SDKProvider:x.default,Util:{uuidv4:g.uuidv4}}),window.document&&u.default.raiseCustomEvent(m.default.OCSDKLOAD)}()},7987:function(Y,L){"use strict";var T=this&&this.__assign||function(){return(T=Object.assign||function(N){for(var m,x=1,u=arguments.length;x<u;x++)for(var g in m=arguments[x])Object.prototype.hasOwnProperty.call(m,g)&&(N[g]=m[g]);return N}).apply(this,arguments)};Object.defineProperty(L,"__esModule",{value:!0});var p=function(){function N(m){this.debug=!1,this.debug=!1,this.logger=m}return N.prototype.setDebug=function(m){this.debug=m},N.prototype.log=function(m,x,u){var g,M=T({Event:x},u);this.debug&&console.log(M),null===(g=this.logger)||void 0===g||g.logClientSdkTelemetryEvent(m,M)},N}();L.default=p},9237:function(Y,L,T){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(U){for(var B,H=1,W=arguments.length;H<W;H++)for(var te in B=arguments[H])Object.prototype.hasOwnProperty.call(B,te)&&(U[te]=B[te]);return U}).apply(this,arguments)},N=this&&this.__awaiter||function(U,B,H,W){return new(H||(H=Promise))(function($,pe){function R(l){try{s(W.next(l))}catch(a){pe(a)}}function r(l){try{s(W.throw(l))}catch(a){pe(a)}}function s(l){l.done?$(l.value):function($){return $ instanceof H?$:new H(function(pe){pe($)})}(l.value).then(R,r)}s((W=W.apply(U,B||[])).next())})},m=this&&this.__generator||function(U,B){var W,te,$,pe,H={label:0,sent:function(){if(1&$[0])throw $[1];return $[1]},trys:[],ops:[]};return pe={next:R(0),throw:R(1),return:R(2)},"function"==typeof Symbol&&(pe[Symbol.iterator]=function(){return this}),pe;function R(s){return function(l){return function(s){if(W)throw new TypeError("Generator is already executing.");for(;H;)try{if(W=1,te&&($=2&s[0]?te.return:s[0]?te.throw||(($=te.return)&&$.call(te),0):te.next)&&!($=$.call(te,s[1])).done)return $;switch(te=0,$&&(s=[2&s[0],$.value]),s[0]){case 0:case 1:$=s;break;case 4:return H.label++,{value:s[1],done:!1};case 5:H.label++,te=s[1],s=[0];continue;case 7:s=H.ops.pop(),H.trys.pop();continue;default:if(!($=($=H.trys).length>0&&$[$.length-1])&&(6===s[0]||2===s[0])){H=0;continue}if(3===s[0]&&(!$||s[1]>$[0]&&s[1]<$[3])){H.label=s[1];break}if(6===s[0]&&H.label<$[1]){H.label=$[1],$=s;break}if($&&H.label<$[2]){H.label=$[2],H.ops.push(s);break}$[2]&&H.ops.pop(),H.trys.pop();continue}s=B.call(U,H)}catch(l){s=[6,l],te=0}finally{W=$=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(L,"__esModule",{value:!0});var x=T(7643),u=(()=>{return(U=u||(u={})).Create="Create",U.Upload="Upload",u;var U})(),g=(()=>{return(U=g||(g={})).CreateDocumentType="sharing/file",U.UploadDocumentType="original",U.CreateImageType="pish/image",U.UploadImageType="imgpsh",g;var U})(),M=(()=>{return(U=M||(M={})).Accept="Accept",U.AcceptEncoding="Accept-Encoding",U.BehaviorOverride="BehaviorOverride",U.Authorization="Authorization",U.ClientVersion="X-MS-Client-Version",U.ContentType="Content-Type",M;var U})(),A=(()=>{return(U=A||(A={})).applicationFormUrlEncoded="application/x-www-form-urlencoded",U.applicationJson="application/json",A;var U})(),I=(()=>{return(U=I||(I={})).Expired="expired",U.Failed="failed",U.InProgress="in progress",U.Malware="malware",U.Ready="ready",I;var U})(),y=["image/jpeg","image/png","image/gif"],h=function(U){U.regionGTMS||(U.regionGTMS={ams:"https://us-api.asm.skype.com"})},C=function(U){var B;return(B={})[M.Authorization]="skype_token "+U,B[M.ClientVersion]="os=Windows; osVer=10; proc=Win32; lcid=en-us; deviceType=1; country=IN; clientName=swc; clientVer=912/0.106.0.34//swc",B},w=function(U){return U&&U.length>0?U:y},S=function(U,B,H){return w(H).includes(U.toLowerCase())?B===u.Create?g.CreateImageType:g.UploadImageType:B===u.Create?g.CreateDocumentType:g.UploadDocumentType};L.default={skypeTokenAuth:function(U){return N(void 0,void 0,void 0,function(){var B,W,$,pe,R;return m(this,function(r){switch(r.label){case 0:x.default.debug&&console.log("[API][skypeTokenAuth]"),h(U),B=(U.amsEndpoint||(null===(R=U.regionGTMS)||void 0===R?void 0:R.ams))+"/v1/skypetokenauth",(pe={})[M.Authorization]="skype_token "+U.token,pe[M.Accept]=A.applicationJson,pe[M.BehaviorOverride]="redirectAs404",pe[M.ContentType]=A.applicationFormUrlEncoded,W={headers:pe,method:"POST",body:"skypetoken="+U.token},r.label=1;case 1:return r.trys.push([1,3,,4]),[4,fetch(B,W)];case 2:return[2,r.sent()];case 3:throw $=r.sent(),!x.default.silentError&&console.log($),new Error("AMSAuth");case 4:return[2]}})})},createObject:function(U,B,H,W){return N(void 0,void 0,void 0,function(){var te,$,pe,R,r,s,f,_,D,d;return m(this,function(i){switch(i.label){case 0:x.default.debug&&console.log("[API][createObject]"),(_={})[U]=["read"],te=_,$=S(B.type,u.Create,W),pe={filename:B.name,permissions:te,type:$},h(H),R=(H.amsEndpoint||(null===(d=null==H?void 0:H.regionGTMS)||void 0===d?void 0:d.ams))+"/v1/objects",r=p(p({},C(H.token)),((D={})[M.ContentType]=A.applicationJson,D)),s={headers:r,method:"POST",body:JSON.stringify(pe),credentials:"include"},i.label=1;case 1:return i.trys.push([1,4,,5]),[4,fetch(R,s)];case 2:return[4,i.sent().json()];case 3:return[2,i.sent()];case 4:throw f=i.sent(),!x.default.silentError&&console.log(f),new Error("AMSCreateObjectFailed");case 5:return[2]}})})},uploadDocument:function(U,B,H,W){return N(void 0,void 0,void 0,function(){var te,$,pe,R,s,l,a;return m(this,function(f){switch(f.label){case 0:x.default.debug&&console.log("[API][uploadDocument]"),h(H),te=S(B.type,u.Upload,W),$=(H.amsEndpoint||(null===(a=null==H?void 0:H.regionGTMS)||void 0===a?void 0:a.ams))+"/v1/objects/"+U+"/content/"+te,pe=p(p({},C(H.token)),((l={})[M.ContentType]=A.applicationFormUrlEncoded,l)),R={headers:pe,method:"PUT",body:B.data?B.data:B},f.label=1;case 1:return f.trys.push([1,3,,4]),[4,fetch($,R)];case 2:return f.sent(),[2,{name:B.name,size:B.size,type:B.type,id:U,url:$,fileSharingProtocolType:0}];case 3:throw s=f.sent(),!x.default.silentError&&console.log(s),new Error("AMSUploadDocumentFailed");case 4:return[2]}})})},getViewStatus:function(U,B,H){return N(void 0,void 0,void 0,function(){var W,te,$,R,r,s,a,f;return m(this,function(_){switch(_.label){case 0:x.default.debug&&console.log("[API][getViewStatus]"),h(B),W=(B.amsEndpoint||(null===(f=null==B?void 0:B.regionGTMS)||void 0===f?void 0:f.ams))+"/v1/objects/"+U.id+"/views/"+(w(H).includes(U.type)?"imgpsh_fullsize_anim":"original")+"/status",te=C(B.token),$={headers:te,method:"GET"},_.label=1;case 1:return _.trys.push([1,4,,5]),[4,fetch(W,$)];case 2:return[4,_.sent().json()];case 3:if(R=_.sent(),r=R.content_state,s=R.view_state,!R.view_location)throw new Error("view_location is empty");if(s&&s!==I.Ready.toString()&&!x.default.silentError&&console.error("view_state is not ready"),r===I.Expired.toString())throw new Error("content_state is expired");return[2,R];case 4:throw a=_.sent(),!x.default.silentError&&console.log(a),new Error("AMSGetViewStatusFailed");case 5:return[2]}})})},getView:function(U,B,H,W){return N(void 0,void 0,void 0,function(){var te,$,pe,s;return m(this,function(l){switch(l.label){case 0:x.default.debug&&console.log("[API][getView]"),h(H),te=B,$=C(H.token),w(W).includes(U.type)&&($[M.Accept]="image/webp,image/ *,*/*;q=0.8",$[M.AcceptEncoding]="gzip, deflate, sdch, br"),pe={headers:$,method:"GET"},l.label=1;case 1:return l.trys.push([1,4,,5]),[4,fetch(te,pe)];case 2:return[4,l.sent().blob()];case 3:return[2,l.sent()];case 4:throw s=l.sent(),!x.default.silentError&&console.log(s),new Error("AMSGetViewFailed");case 5:return[2]}})})}}},4543:function(Y,L,T){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(v){for(var w,S=1,P=arguments.length;S<P;S++)for(var k in w=arguments[S])Object.prototype.hasOwnProperty.call(w,k)&&(v[k]=w[k]);return v}).apply(this,arguments)},N=this&&this.__awaiter||function(v,w,S,P){return new(S||(S=Promise))(function(O,V){function U(W){try{H(P.next(W))}catch(te){V(te)}}function B(W){try{H(P.throw(W))}catch(te){V(te)}}function H(W){W.done?O(W.value):function(O){return O instanceof S?O:new S(function(V){V(O)})}(W.value).then(U,B)}H((P=P.apply(v,w||[])).next())})},m=this&&this.__generator||function(v,w){var P,k,O,V,S={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return V={next:U(0),throw:U(1),return:U(2)},"function"==typeof Symbol&&(V[Symbol.iterator]=function(){return this}),V;function U(H){return function(W){return function(H){if(P)throw new TypeError("Generator is already executing.");for(;S;)try{if(P=1,k&&(O=2&H[0]?k.return:H[0]?k.throw||((O=k.return)&&O.call(k),0):k.next)&&!(O=O.call(k,H[1])).done)return O;switch(k=0,O&&(H=[2&H[0],O.value]),H[0]){case 0:case 1:O=H;break;case 4:return S.label++,{value:H[1],done:!1};case 5:S.label++,k=H[1],H=[0];continue;case 7:H=S.ops.pop(),S.trys.pop();continue;default:if(!(O=(O=S.trys).length>0&&O[O.length-1])&&(6===H[0]||2===H[0])){S=0;continue}if(3===H[0]&&(!O||H[1]>O[0]&&H[1]<O[3])){S.label=H[1];break}if(6===H[0]&&S.label<O[1]){S.label=O[1],O=H;break}if(O&&S.label<O[2]){S.label=O[2],S.ops.push(H);break}O[2]&&S.ops.pop(),S.trys.pop();continue}H=w.call(v,S)}catch(W){H=[6,W],k=0}finally{P=O=0}if(5&H[0])throw H[1];return{value:H[0]?H[1]:void 0,done:!0}}([H,W])}}};Object.defineProperty(L,"__esModule",{value:!0});var x=T(2782),u=T(7643),g=T(4239),M=T(9638),A=T(759),I=T(8202),y=x.sdkVersion,C=function(){function v(w,S){void 0===w&&(w=void 0),void 0===S&&(S=void 0),this.runtimeId=I.uuidv4(),this.clientId=I.uuidv4(),this.origin=window.location.origin,this.requestCallbacks={},this.debug=!1,this.iframeLoaded=!1,this.logger=w,this.iframeId="Microsoft_Omnichannel_AMSClient_Iframe_Window",S&&S.multiClient&&(this.iframeId=this.clientId)}return v.prototype.setDebug=function(w){this.debug=w},v.prototype.setup=function(){return N(this,void 0,void 0,function(){var w=this;return m(this,function(S){switch(S.label){case 0:if(this.debug&&console.log("[FramedClient][initialize]"),this.onMessageEvent(function(P){return w.handleEvent(P)}),!g.default.isBrowser())throw new Error("FramedMode was used in non-Web platform");return[4,this.loadIframe()];case 1:return S.sent(),this.iframeLoaded||!u.default.silentError&&console.error("iframe not loaded"),[2]}})})},v.prototype.initialize=function(w){return N(this,void 0,void 0,function(){return m(this,function(S){switch(S.label){case 0:return this.debug&&console.log("[FramedClient][initialize]"),this.chatToken=w.chatToken,[4,this.skypeTokenAuth()];case 1:return S.sent(),[2]}})})},v.prototype.skypeTokenAuth=function(w){return void 0===w&&(w=null),N(this,void 0,void 0,function(){var S,P=this;return m(this,function(k){switch(k.label){case 0:return this.debug&&console.log("[FramedClient][skypeAuth]"),S={chatToken:w||this.chatToken},[4,this.loadIframe()];case 1:return k.sent(),[2,new Promise(function(O,V){P.postMessage(A.default.Request,M.default.SkypeTokenAuth,S,O,V)})]}})})},v.prototype.createObject=function(w,S,P,k){return void 0===P&&(P=null),void 0===k&&(k=[]),N(this,void 0,void 0,function(){var O,V=this;return m(this,function(U){switch(U.label){case 0:return this.debug&&console.log("[FramedClient][createObject]"),O={id:w,file:S,chatToken:P||this.chatToken,supportedImagesMimeTypes:k},[4,this.loadIframe()];case 1:return U.sent(),[2,new Promise(function(B,H){V.postMessage(A.default.Request,M.default.CreateObject,O,B,H)})]}})})},v.prototype.uploadDocument=function(w,S,P,k){return void 0===P&&(P=null),void 0===k&&(k=[]),N(this,void 0,void 0,function(){var O,V=this;return m(this,function(U){switch(U.label){case 0:return this.debug&&console.log("[FramedClient][uploadDocument]"),O={documentId:w,file:S,chatToken:P||this.chatToken,supportedImagesMimeTypes:k},[4,this.loadIframe()];case 1:return U.sent(),[2,new Promise(function(B,H){V.postMessage(A.default.Request,M.default.UploadDocument,O,B,H)})]}})})},v.prototype.getViewStatus=function(w,S,P){return void 0===S&&(S=null),void 0===P&&(P=[]),N(this,void 0,void 0,function(){var k,O=this;return m(this,function(V){switch(V.label){case 0:return k={fileMetadata:w,chatToken:S||this.chatToken,supportedImagesMimeTypes:P},[4,this.loadIframe()];case 1:return V.sent(),[2,new Promise(function(U,B){O.postMessage(A.default.Request,M.default.GetViewStatus,k,U,B)})]}})})},v.prototype.getView=function(w,S,P,k){return void 0===P&&(P=null),void 0===k&&(k=[]),N(this,void 0,void 0,function(){var O,V=this;return m(this,function(U){switch(U.label){case 0:return O={fileMetadata:w,viewLocation:S,chatToken:P||this.chatToken,supportedImagesMimeTypes:k},[4,this.loadIframe()];case 1:return U.sent(),[2,new Promise(function(B,H){V.postMessage(A.default.Request,M.default.GetView,O,B,H)})]}})})},v.prototype.fetchBlob=function(w){return N(this,void 0,void 0,function(){var k;return m(this,function(O){switch(O.label){case 0:return O.trys.push([0,3,,4]),[4,fetch(w)];case 1:return[4,O.sent().blob()];case 2:return[2,O.sent()];case 3:throw k=O.sent(),!u.default.silentError&&console.log(k),new Error("fetchBlob");case 4:return[2]}})})},v.prototype.onMessageEvent=function(w){window.addEventListener("message",w,!0)},v.prototype.postMessage=function(w,S,P,k,O){void 0===P&&(P={}),void 0===k&&(k=function(U){return{}}),void 0===O&&(O=function(U){return{}});var V=I.uuidv4();this.requestCallbacks[V]={resolve:k,reject:O},this.targetWindow?this.targetWindow.postMessage(p({runtimeId:this.runtimeId,clientId:this.clientId,requestId:V,eventType:w,eventName:S},P),"*"):!u.default.silentError&&console.error("Target window not found!")},v.prototype.handleEvent=function(w){var S;return N(this,void 0,void 0,function(){var P;return m(this,function(k){return w.origin===this.origin||x.baseUrl.includes(w.origin)?(w.data.clientId!==this.clientId||(this.debug&&console.log(w),w.source&&(this.targetWindow=w.source),w.data.eventType===A.default.Response&&(this.debug&&console.log("[FramedClient][Response]"),P=w.data,w.data.eventName===M.default.SkypeTokenAuth?P.requestId in this.requestCallbacks&&(this.requestCallbacks[P.requestId].resolve(),delete this.requestCallbacks[P.requestId]):w.data.eventName===M.default.CreateObject||w.data.eventName===M.default.UploadDocument||w.data.eventName===M.default.GetViewStatus||w.data.eventName===M.default.GetView?P.requestId in this.requestCallbacks&&(this.requestCallbacks[P.requestId].resolve(P.response),delete this.requestCallbacks[P.requestId]):w.data.eventName===M.default.SendTelemetry&&(null===(S=this.logger)||void 0===S||S.log(P.logLevel,P.logData.Event,P.logData)))),[2]):[2]})})},v.prototype.dispose=function(){var w;null===(w=document.getElementById(this.iframeId))||void 0===w||w.remove(),this.requestCallbacks={},this.iframeLoaded=!1},v.prototype.loadIframe=function(){return N(this,void 0,void 0,function(){var w=this;return m(this,function(S){return[2,new Promise(function(P,k){if(Array.from(document.getElementsByTagName("iframe")).filter(function(B){return B.id==w.iframeId}).length)return P();var U=document.createElement("iframe");U.id=w.iframeId,U.src=x.baseUrl+"/"+y+"/iframe.html?clientId="+w.clientId+"&debug="+w.debug+"&telemetry=true",U.addEventListener("load",function(){w.debug&&console.log("iframe loaded!"),w.iframeLoaded=!0,P()}),U.addEventListener("error",function(){k()}),document.head.append(U)})]})})},v}();L.default=C},1700:function(Y,L,T){"use strict";var p=this&&this.__awaiter||function(y,h,C,v){return new(C||(C=Promise))(function(S,P){function k(U){try{V(v.next(U))}catch(B){P(B)}}function O(U){try{V(v.throw(U))}catch(B){P(B)}}function V(U){U.done?S(U.value):function(S){return S instanceof C?S:new C(function(P){P(S)})}(U.value).then(k,O)}V((v=v.apply(y,h||[])).next())})},N=this&&this.__generator||function(y,h){var v,w,S,P,C={label:0,sent:function(){if(1&S[0])throw S[1];return S[1]},trys:[],ops:[]};return P={next:k(0),throw:k(1),return:k(2)},"function"==typeof Symbol&&(P[Symbol.iterator]=function(){return this}),P;function k(V){return function(U){return function(V){if(v)throw new TypeError("Generator is already executing.");for(;C;)try{if(v=1,w&&(S=2&V[0]?w.return:V[0]?w.throw||((S=w.return)&&S.call(w),0):w.next)&&!(S=S.call(w,V[1])).done)return S;switch(w=0,S&&(V=[2&V[0],S.value]),V[0]){case 0:case 1:S=V;break;case 4:return C.label++,{value:V[1],done:!1};case 5:C.label++,w=V[1],V=[0];continue;case 7:V=C.ops.pop(),C.trys.pop();continue;default:if(!(S=(S=C.trys).length>0&&S[S.length-1])&&(6===V[0]||2===V[0])){C=0;continue}if(3===V[0]&&(!S||V[1]>S[0]&&V[1]<S[3])){C.label=V[1];break}if(6===V[0]&&C.label<S[1]){C.label=S[1],S=V;break}if(S&&C.label<S[2]){C.label=S[2],C.ops.push(V);break}S[2]&&C.ops.pop(),C.trys.pop();continue}V=h.call(y,C)}catch(U){V=[6,U],w=0}finally{v=S=0}if(5&V[0])throw V[1];return{value:V[0]?V[1]:void 0,done:!0}}([V,U])}}};Object.defineProperty(L,"__esModule",{value:!0});var m=T(9237),x=T(9638),u=T(4239),g=T(1781),M=T(8202),A=T(786),I=function(){function y(h){void 0===h&&(h=void 0),this.runtimeId=M.uuidv4(),this.debug=!1,this.logger=h,u.default.isBrowser()&&console.error("FramedMode should be used on Web platform"),h&&(this.scenarioMarker=new g.default(h),this.scenarioMarker.setRuntimeId(this.runtimeId))}return y.prototype.setDebug=function(h){this.debug=h},y.prototype.setup=function(){return p(this,void 0,void 0,function(){return N(this,function(h){return[2,Promise.resolve()]})})},y.prototype.initialize=function(h){return p(this,void 0,void 0,function(){return N(this,function(C){switch(C.label){case 0:return this.debug&&console.log("[FramedlessClient][initialize]"),this.chatToken=h.chatToken,[4,this.skypeTokenAuth()];case 1:return C.sent(),[2]}})})},y.prototype.skypeTokenAuth=function(h){var C,v,w,S,P,k,O,V;return void 0===h&&(h=null),p(this,void 0,void 0,function(){var U,B;return N(this,function(H){switch(H.label){case 0:null===(C=this.scenarioMarker)||void 0===C||C.startScenario(x.default.SkypeTokenAuth,{AMSClientRuntimeId:this.runtimeId,ChatId:h?h.chatId:null===(v=this.chatToken)||void 0===v?void 0:v.chatId}),H.label=1;case 1:return H.trys.push([1,3,,4]),[4,m.default.skypeTokenAuth(h||this.chatToken)];case 2:return(U=H.sent()).ok||null===(w=this.scenarioMarker)||void 0===w||w.failScenario(x.default.SkypeTokenAuth,{AMSClientRuntimeId:this.runtimeId,ChatId:h?h.chatId:null===(S=this.chatToken)||void 0===S?void 0:S.chatId,ExceptionDetails:{status:U.status}}),null===(P=this.scenarioMarker)||void 0===P||P.completeScenario(x.default.SkypeTokenAuth,{AMSClientRuntimeId:this.runtimeId,ChatId:h?h.chatId:null===(k=this.chatToken)||void 0===k?void 0:k.chatId}),[2,U];case 3:throw B=H.sent(),null===(O=this.scenarioMarker)||void 0===O||O.failScenario(x.default.SkypeTokenAuth,{AMSClientRuntimeId:this.runtimeId,ChatId:h?h.chatId:null===(V=this.chatToken)||void 0===V?void 0:V.chatId,ExceptionDetails:B}),new Error("skypeTokenAuth");case 4:return[2]}})})},y.prototype.createObject=function(h,C,v,w){var S,P,k,O,V,U;return void 0===v&&(v=null),void 0===w&&(w=[]),p(this,void 0,void 0,function(){var B,H;return N(this,function(W){switch(W.label){case 0:null===(S=this.scenarioMarker)||void 0===S||S.startScenario(x.default.CreateObject,{AMSClientRuntimeId:this.runtimeId,ChatId:v?v.chatId:null===(P=this.chatToken)||void 0===P?void 0:P.chatId,MimeType:C.type,FileExtension:A.default(C.name)}),W.label=1;case 1:return W.trys.push([1,3,,4]),[4,m.default.createObject(h,C,v||this.chatToken,w)];case 2:return B=W.sent(),null===(k=this.scenarioMarker)||void 0===k||k.completeScenario(x.default.CreateObject,{AMSClientRuntimeId:this.runtimeId,ChatId:v?v.chatId:null===(O=this.chatToken)||void 0===O?void 0:O.chatId,DocumentId:null==B?void 0:B.id,MimeType:C.type,FileExtension:A.default(C.name)}),[2,B];case 3:throw H=W.sent(),null===(V=this.scenarioMarker)||void 0===V||V.failScenario(x.default.CreateObject,{AMSClientRuntimeId:this.runtimeId,ChatId:v?v.chatId:null===(U=this.chatToken)||void 0===U?void 0:U.chatId,MimeType:C.type,FileExtension:A.default(C.name),ExceptionDetails:H}),new Error("createObject");case 4:return[2]}})})},y.prototype.uploadDocument=function(h,C,v,w){var S,P,k,O,V,U;return void 0===v&&(v=null),void 0===w&&(w=[]),p(this,void 0,void 0,function(){var B,H;return N(this,function(W){switch(W.label){case 0:null===(S=this.scenarioMarker)||void 0===S||S.startScenario(x.default.UploadDocument,{AMSClientRuntimeId:this.runtimeId,ChatId:v?v.chatId:null===(P=this.chatToken)||void 0===P?void 0:P.chatId,DocumentId:h,MimeType:C.type,FileExtension:A.default(C.name)}),W.label=1;case 1:return W.trys.push([1,3,,4]),[4,m.default.uploadDocument(h,C,v||this.chatToken,w)];case 2:return B=W.sent(),null===(k=this.scenarioMarker)||void 0===k||k.completeScenario(x.default.UploadDocument,{AMSClientRuntimeId:this.runtimeId,ChatId:v?v.chatId:null===(O=this.chatToken)||void 0===O?void 0:O.chatId,DocumentId:h,MimeType:C.type,FileExtension:A.default(C.name)}),[2,B];case 3:throw H=W.sent(),null===(V=this.scenarioMarker)||void 0===V||V.failScenario(x.default.UploadDocument,{AMSClientRuntimeId:this.runtimeId,ChatId:v?v.chatId:null===(U=this.chatToken)||void 0===U?void 0:U.chatId,DocumentId:h,MimeType:C.type,FileExtension:A.default(C.name),ExceptionDetails:H}),new Error("uploadDocument");case 4:return[2]}})})},y.prototype.getViewStatus=function(h,C,v){var w,S,P,k,O,V;return void 0===C&&(C=null),void 0===v&&(v=[]),p(this,void 0,void 0,function(){var U,B;return N(this,function(H){switch(H.label){case 0:null===(w=this.scenarioMarker)||void 0===w||w.startScenario(x.default.GetViewStatus,{AMSClientRuntimeId:this.runtimeId,ChatId:C?C.chatId:null===(S=this.chatToken)||void 0===S?void 0:S.chatId,DocumentId:null==h?void 0:h.id,MimeType:null==h?void 0:h.type,FileExtension:A.default((null==h?void 0:h.name)||"")}),H.label=1;case 1:return H.trys.push([1,3,,4]),[4,m.default.getViewStatus(h,C||this.chatToken,v)];case 2:return U=H.sent(),null===(P=this.scenarioMarker)||void 0===P||P.completeScenario(x.default.GetViewStatus,{AMSClientRuntimeId:this.runtimeId,ChatId:C?C.chatId:null===(k=this.chatToken)||void 0===k?void 0:k.chatId,DocumentId:null==h?void 0:h.id,MimeType:null==h?void 0:h.type,FileExtension:A.default((null==h?void 0:h.name)||"")}),[2,U];case 3:throw B=H.sent(),null===(O=this.scenarioMarker)||void 0===O||O.failScenario(x.default.GetViewStatus,{AMSClientRuntimeId:this.runtimeId,ChatId:C?C.chatId:null===(V=this.chatToken)||void 0===V?void 0:V.chatId,DocumentId:null==h?void 0:h.id,MimeType:null==h?void 0:h.type,FileExtension:A.default((null==h?void 0:h.name)||""),ExceptionDetails:B}),new Error("getViewStatus");case 4:return[2]}})})},y.prototype.getView=function(h,C,v,w){var S,P,k,O,V,U;return void 0===v&&(v=null),void 0===w&&(w=[]),p(this,void 0,void 0,function(){var B,H;return N(this,function(W){switch(W.label){case 0:null===(S=this.scenarioMarker)||void 0===S||S.startScenario(x.default.GetView,{AMSClientRuntimeId:this.runtimeId,ChatId:v?v.chatId:null===(P=this.chatToken)||void 0===P?void 0:P.chatId,DocumentId:null==h?void 0:h.id,MimeType:null==h?void 0:h.type,FileExtension:A.default((null==h?void 0:h.name)||"")}),W.label=1;case 1:return W.trys.push([1,3,,4]),[4,m.default.getView(h,C,v||this.chatToken,w)];case 2:return B=W.sent(),null===(k=this.scenarioMarker)||void 0===k||k.completeScenario(x.default.GetView,{AMSClientRuntimeId:this.runtimeId,ChatId:v?v.chatId:null===(O=this.chatToken)||void 0===O?void 0:O.chatId,DocumentId:null==h?void 0:h.id,MimeType:null==h?void 0:h.type,FileExtension:A.default((null==h?void 0:h.name)||"")}),[2,B];case 3:throw H=W.sent(),null===(V=this.scenarioMarker)||void 0===V||V.failScenario(x.default.GetView,{AMSClientRuntimeId:this.runtimeId,ChatId:v?v.chatId:null===(U=this.chatToken)||void 0===U?void 0:U.chatId,DocumentId:null==h?void 0:h.id,MimeType:null==h?void 0:h.type,FileExtension:A.default((null==h?void 0:h.name)||""),ExceptionDetails:H}),new Error("getView");case 4:return[2]}})})},y.prototype.fetchBlob=function(h){return p(this,void 0,void 0,function(){var w;return N(this,function(S){switch(S.label){case 0:return S.trys.push([0,3,,4]),[4,fetch(h)];case 1:return[4,S.sent().blob()];case 2:return[2,S.sent()];case 3:throw w=S.sent(),console.log(w),new Error("fetchBlob");case 4:return[2]}})})},y}();L.default=I},7643:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.silentError=!0,p.debug=!1,p}();L.default=T},5356:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={})).INFO="INFO",p.DEBUG="DEBUG",p.WARN="WARN",p.ERROR="ERROR",p.LOG="LOG",T;var p})();L.default=T},9638:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={})).IframeLoaded="AMSIframeLoaded",p.SkypeTokenAuth="AMSSkypeTokenAuth",p.CreateObject="AMSCreateObject",p.UploadDocument="AMSUploadDocument",p.GetViewStatus="AMSGetViewStatus",p.GetView="AMSGetView",p.SendTelemetry="AMSSendTelemetry",T;var p})();L.default=T},759:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={})).None="None",p.Request="Request",p.Response="Response",T;var p})();L.default=T},2782:(Y,L)=>{L.baseUrl="https://comms.omnichannelengagementhub.com/ams",L.sdkVersion="0.1.4"},3285:function(Y,L,T){"use strict";var p=this&&this.__awaiter||function(A,I,y,h){return new(y||(y=Promise))(function(v,w){function S(O){try{k(h.next(O))}catch(V){w(V)}}function P(O){try{k(h.throw(O))}catch(V){w(V)}}function k(O){O.done?v(O.value):function(v){return v instanceof y?v:new y(function(w){w(v)})}(O.value).then(S,P)}k((h=h.apply(A,I||[])).next())})},N=this&&this.__generator||function(A,I){var h,C,v,w,y={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return w={next:S(0),throw:S(1),return:S(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function S(k){return function(O){return function(k){if(h)throw new TypeError("Generator is already executing.");for(;y;)try{if(h=1,C&&(v=2&k[0]?C.return:k[0]?C.throw||((v=C.return)&&v.call(C),0):C.next)&&!(v=v.call(C,k[1])).done)return v;switch(C=0,v&&(k=[2&k[0],v.value]),k[0]){case 0:case 1:v=k;break;case 4:return y.label++,{value:k[1],done:!1};case 5:y.label++,C=k[1],k=[0];continue;case 7:k=y.ops.pop(),y.trys.pop();continue;default:if(!(v=(v=y.trys).length>0&&v[v.length-1])&&(6===k[0]||2===k[0])){y=0;continue}if(3===k[0]&&(!v||k[1]>v[0]&&k[1]<v[3])){y.label=k[1];break}if(6===k[0]&&y.label<v[1]){y.label=v[1],v=k;break}if(v&&y.label<v[2]){y.label=v[2],y.ops.push(k);break}v[2]&&y.ops.pop(),y.trys.pop();continue}k=I.call(A,y)}catch(O){k=[6,O],C=0}finally{h=v=0}if(5&k[0])throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}([k,O])}}};Object.defineProperty(L,"__esModule",{value:!0});var m=T(7987),x=T(4543),u=T(1700),g=T(7643);L.default=function(A){return p(void 0,void 0,void 0,function(){var I,y,h;return N(this,function(C){switch(C.label){case 0:return A.debug&&console.log("[createAMSClient] "+(A.framedMode?"FramedClient":"FramedlessClient")),I=new m.default(A.logger),y={multiClient:A.multiClient||!1},[4,(h=A.framedMode?new x.default(I,y):new u.default(I)).setup()];case 1:return C.sent(),A.debug&&h.setDebug(A.debug||!1),g.default.debug=A.debug||!1,g.default.silentError=A.silentError||!0,[2,h]}})})}},7463:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(3285),N=T(1700),m=T(4543);L.default=p.default,function(){if(void 0===typeof window)throw new Error("window object not found");"Microsoft"in window||(window.Microsoft={}),"CRM"in window.Microsoft||(window.Microsoft.CRM={}),"Omnichannel"in window.Microsoft.CRM||(window.Microsoft.CRM.Omnichannel={}),"AMSClient"in window.Microsoft.CRM.Omnichannel||(window.Microsoft.CRM.Omnichannel.AMS={SDK:{createAMSClient:p.default,FramedClient:m.default,FramedlessClient:N.default}})}()},8898:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.failEvent=L.completeEvent=L.startEvent=void 0,L.startEvent=function(m){return m+"Started"},L.completeEvent=function(m){return m+"Completed"},L.failEvent=function(m){return m+"Failed"}},1781:function(Y,L,T){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(M){for(var A,I=1,y=arguments.length;I<y;I++)for(var h in A=arguments[I])Object.prototype.hasOwnProperty.call(A,h)&&(M[h]=A[h]);return M}).apply(this,arguments)};Object.defineProperty(L,"__esModule",{value:!0});var N=T(5356),m=T(2782),x=T(8898),u=T(7339),g=function(){function M(A){this.runtimeId="",this.sdkVersion="",this.logger=A,this.sdkVersion=m.sdkVersion,this.telemetryEvents=new Map}return M.prototype.setRuntimeId=function(A){this.runtimeId=A},M.prototype.startScenario=function(A,I){if(void 0===I&&(I={}),!this.telemetryEvents.has(A)){var y=new u.default;y.start(),this.telemetryEvents.set(A,y)}var h=p({AMSClientRuntimeId:this.runtimeId,Event:x.startEvent(A),AMSClientVersion:this.sdkVersion},I);this.logger.log(N.default.INFO,A,h)},M.prototype.failScenario=function(A,I){if(void 0===I&&(I={}),this.telemetryEvents.has(A)){var y=this.telemetryEvents.get(A);this.telemetryEvents.delete(A);var h=p({AMSClientRuntimeId:this.runtimeId,Event:x.failEvent(A),AMSClientVersion:this.sdkVersion,ElapsedTimeInMilliseconds:y.stop()},I);this.logger.log(N.default.ERROR,A,h)}else console.warn("'"+A+"' event has not started.")},M.prototype.completeScenario=function(A,I){if(void 0===I&&(I={}),this.telemetryEvents.has(A)){var y=this.telemetryEvents.get(A);this.telemetryEvents.delete(A);var h=p({AMSClientRuntimeId:this.runtimeId,Event:x.completeEvent(A),AMSClientVersion:this.sdkVersion,ElapsedTimeInMilliseconds:y.stop()},I);this.logger.log(N.default.INFO,A,h)}else console.warn("'"+A+"' event has not started.")},M}();L.default=g},7339:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.prototype.start=function(){this.timeStart=(new Date).getTime()},p.prototype.stop=function(){return(new Date).getTime()-this.timeStart},p}();L.default=T},786:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=function(p){if(!p)return"";var N=p.split(".");if(N.length>2)return"."+N[N.length-1];if(2==N.length){var m=N[0],x=N[1];return!m&&x?"":m&&!x?".":"."+N[N.length-1]}return""}},4239:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.isReactNative=L.isNode=L.isBrowser=void 0,L.isBrowser=function(){return"undefined"!=typeof window&&void 0!==window.document},L.isNode=function(){return"undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node},L.isReactNative=function(){return"undefined"!=typeof navigator&&"ReactNative"==navigator.product},L.default={isBrowser:L.isBrowser,isNode:L.isNode,isReactNative:L.isReactNative}},8202:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.uuidv4=void 0,L.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(p){var N=16*Math.random()|0;return("x"===p?N:3&N|8).toString(16)})}},7626:function(Y,L,T){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(me){for(var le,fe=1,ae=arguments.length;fe<ae;fe++)for(var de in le=arguments[fe])Object.prototype.hasOwnProperty.call(le,de)&&(me[de]=le[de]);return me}).apply(this,arguments)},N=this&&this.__awaiter||function(me,le,fe,ae){return new(fe||(fe=Promise))(function(xe,Ce){function oe(re){try{ye(ae.next(re))}catch(ee){Ce(ee)}}function we(re){try{ye(ae.throw(re))}catch(ee){Ce(ee)}}function ye(re){re.done?xe(re.value):function(xe){return xe instanceof fe?xe:new fe(function(Ce){Ce(xe)})}(re.value).then(oe,we)}ye((ae=ae.apply(me,le||[])).next())})},m=this&&this.__generator||function(me,le){var ae,de,xe,Ce,fe={label:0,sent:function(){if(1&xe[0])throw xe[1];return xe[1]},trys:[],ops:[]};return Ce={next:oe(0),throw:oe(1),return:oe(2)},"function"==typeof Symbol&&(Ce[Symbol.iterator]=function(){return this}),Ce;function oe(ye){return function(re){return function(ye){if(ae)throw new TypeError("Generator is already executing.");for(;fe;)try{if(ae=1,de&&(xe=2&ye[0]?de.return:ye[0]?de.throw||((xe=de.return)&&xe.call(de),0):de.next)&&!(xe=xe.call(de,ye[1])).done)return xe;switch(de=0,xe&&(ye=[2&ye[0],xe.value]),ye[0]){case 0:case 1:xe=ye;break;case 4:return fe.label++,{value:ye[1],done:!1};case 5:fe.label++,de=ye[1],ye=[0];continue;case 7:ye=fe.ops.pop(),fe.trys.pop();continue;default:if(!(xe=(xe=fe.trys).length>0&&xe[xe.length-1])&&(6===ye[0]||2===ye[0])){fe=0;continue}if(3===ye[0]&&(!xe||ye[1]>xe[0]&&ye[1]<xe[3])){fe.label=ye[1];break}if(6===ye[0]&&fe.label<xe[1]){fe.label=xe[1],xe=ye;break}if(xe&&fe.label<xe[2]){fe.label=xe[2],fe.ops.push(ye);break}xe[2]&&fe.ops.pop(),fe.trys.pop();continue}ye=le.call(me,fe)}catch(re){ye=[6,re],de=0}finally{ae=xe=0}if(5&ye[0])throw ye[1];return{value:ye[0]?ye[1]:void 0,done:!0}}([ye,re])}}},x=this&&this.__spreadArrays||function(){for(var me=0,le=0,fe=arguments.length;le<fe;le++)me+=arguments[le].length;var ae=Array(me),de=0;for(le=0;le<fe;le++)for(var xe=arguments[le],Ce=0,oe=xe.length;Ce<oe;Ce++,de++)ae[de]=xe[Ce];return ae};Object.defineProperty(L,"__esModule",{value:!0});var u=T(2811),g=T(2902),M=T(3762),A=T(6403),I=T(8290),y=T(6345),h=T(8098),C=T(641),v=T(8953),w=T(2921),S=T(6419),P=T(7474),k=T(7587),O=T(7925),V=T(2900),U=T(4694),B=T(2217),H=T(6194),W=T(8191),te=T(5642),$=T(448),pe=T(3372),R=T(6233),r=T(4352),s=T(5655),l=T(1247),a=T(9600),f=T(7463),_=T(9340),D=T(838),d=T(6633),i=T(813),b=T(6032),z=T(9425),q=T(4674),J=T(7616),ge=function(){function me(le,fe){var de,xe,Ce,oe,we,ye,re,ee,Z,ae=this;void 0===fe&&(fe=C.defaultChatSDKConfig),this.ACSClient=null,this.AMSClient=null,this.authSettings=null,this.authenticatedUserToken=null,this.conversation=null,this.callingOption=S.default.NoCalling,this.telemetry=null,this.ic3ClientLogger=null,this.ocSdkLogger=null,this.acsClientLogger=null,this.acsAdapterLogger=null,this.callingSdkLogger=null,this.amsClientLogger=null,this.isPersistentChat=!1,this.isChatReconnect=!1,this.reconnectId=null,this.refreshTokenTimer=null,this.populateInitChatOptionalParam=function(ue,Re){if(ue.initContext.locale=I.getLocaleStringFromId(ae.localeId),Re.customContext&&(ue.initContext.customContextData=Re.customContext),Re.browser&&(ue.initContext.browser=Re.browser),Re.os&&(ue.initContext.os=Re.os),Re.locale&&(ue.initContext.locale=Re.locale),Re.device&&(ue.initContext.device=Re.device),Re.preChatResponse&&(ue.initContext.preChatResponse=Re.preChatResponse),Re.portalContactId&&(ue.initContext.portalcontactid=Re.portalContactId),Re.sendDefaultInitContext){if(h.default.isNode()||h.default.isReactNative()){var Te={response:k.default.UnsupportedPlatform,message:"sendDefaultInitContext is only supported on browser"};throw console.error(Te.message),ae.scenarioMarker.failScenario(a.default.GetAgentAvailability,{RequestId:ae.requestId,ChatId:ae.chatToken.chatId,ExceptionDetails:JSON.stringify(Te)}),new Error(Te.response)}ue.getContext=!0}return Re.initContext&&(ue.initContext=Re.initContext),ae.authenticatedUserToken&&(ue.authenticatedUserToken=ae.authenticatedUserToken),ae.chatToken.chatId&&(ue.initContext.chatId=ae.chatToken.chatId),ue},this.debug=!1,this.runtimeId=M.uuidv4(),this.omnichannelConfig=le,this.chatSDKConfig=p(p({},C.defaultChatSDKConfig),fe),this.isInitialized=!1,this.liveChatVersion=W.default.V1,this.localeId=I.defaultLocaleId,this.requestId=M.uuidv4(),this.chatToken={},this.liveChatConfig={},this.dataMaskingRules={},this.authSettings=null,this.preChatSurvey=null,this.telemetry=D.default(this.debug),this.scenarioMarker=new l.default(this.omnichannelConfig),this.ic3ClientLogger=u.createIC3ClientLogger(this.omnichannelConfig),this.ocSdkLogger=u.createOCSDKLogger(this.omnichannelConfig),this.acsClientLogger=u.createACSClientLogger(this.omnichannelConfig),this.acsAdapterLogger=u.createACSAdapterLogger(this.omnichannelConfig),this.callingSdkLogger=u.createCallingSDKLogger(this.omnichannelConfig),this.amsClientLogger=u.createAMSClientLogger(this.omnichannelConfig),this.scenarioMarker.useTelemetry(this.telemetry),this.ic3ClientLogger.useTelemetry(this.telemetry),this.ocSdkLogger.useTelemetry(this.telemetry),this.acsClientLogger.useTelemetry(this.telemetry),this.acsAdapterLogger.useTelemetry(this.telemetry),this.callingSdkLogger.useTelemetry(this.telemetry),this.amsClientLogger.useTelemetry(this.telemetry),this.scenarioMarker.setRuntimeId(this.runtimeId),this.ic3ClientLogger.setRuntimeId(this.runtimeId),this.ocSdkLogger.setRuntimeId(this.runtimeId),this.acsClientLogger.setRuntimeId(this.runtimeId),this.acsAdapterLogger.setRuntimeId(this.runtimeId),this.callingSdkLogger.setRuntimeId(this.runtimeId),this.amsClientLogger.setRuntimeId(this.runtimeId),J.default(le),C.default(fe),(null===(de=this.chatSDKConfig.telemetry)||void 0===de?void 0:de.disable)&&(null===(xe=this.telemetry)||void 0===xe||xe.disable()),(null===(Ce=this.chatSDKConfig.telemetry)||void 0===Ce?void 0:Ce.ariaTelemetryKey)&&this.telemetry.initialize(this.chatSDKConfig.telemetry.ariaTelemetryKey),null===(oe=this.ic3ClientLogger)||void 0===oe||oe.setRequestId(this.requestId),null===(we=this.ocSdkLogger)||void 0===we||we.setRequestId(this.requestId),null===(ye=this.acsClientLogger)||void 0===ye||ye.setRequestId(this.requestId),null===(re=this.acsAdapterLogger)||void 0===re||re.setRequestId(this.requestId),null===(ee=this.callingSdkLogger)||void 0===ee||ee.setRequestId(this.requestId),null===(Z=this.amsClientLogger)||void 0===Z||Z.setRequestId(this.requestId)}return me.prototype.setDebug=function(le){var fe,ae,de,xe,Ce,oe,we,ye;this.debug=le,null===(fe=this.AMSClient)||void 0===fe||fe.setDebug(le),null===(ae=this.telemetry)||void 0===ae||ae.setDebug(le),this.scenarioMarker.setDebug(le),null===(de=this.ic3ClientLogger)||void 0===de||de.setDebug(le),null===(xe=this.ocSdkLogger)||void 0===xe||xe.setDebug(le),null===(Ce=this.acsClientLogger)||void 0===Ce||Ce.setDebug(le),null===(oe=this.acsAdapterLogger)||void 0===oe||oe.setDebug(le),null===(we=this.callingSdkLogger)||void 0===we||we.setDebug(le),null===(ye=this.amsClientLogger)||void 0===ye||ye.setDebug(le)},me.prototype.initialize=function(le){return void 0===le&&(le={}),N(this,void 0,void 0,function(){var fe,de,xe;return m(this,function(oe){switch(oe.label){case 0:if(this.scenarioMarker.startScenario(a.default.InitializeChatSDK),this.isInitialized)return this.scenarioMarker.completeScenario(a.default.InitializeChatSDK),[2,this.liveChatConfig];oe.label=1;case 1:return oe.trys.push([1,8,,9]),this.OCSDKProvider=M.SDKProvider,fe=this,[4,M.SDKProvider.getSDK(this.omnichannelConfig,{},this.ocSdkLogger)];case 2:return fe.OCClient=oe.sent(),[4,this.getChatConfig(le.getLiveChatConfigOptionalParams||{})];case 3:return oe.sent(),this.liveChatVersion!==W.default.V2?[3,5]:(this.ACSClient=new g.default(this.acsClientLogger),de=this,[4,f.default({framedMode:h.isBrowser(),multiClient:!0,debug:!1,logger:this.amsClientLogger})]);case 4:return de.AMSClient=oe.sent(),[3,7];case 5:return xe=this,[4,this.getIC3Client()];case 6:xe.IC3Client=oe.sent(),oe.label=7;case 7:return this.isInitialized=!0,this.scenarioMarker.completeScenario(a.default.InitializeChatSDK),[3,9];case 8:return oe.sent(),this.scenarioMarker.failScenario(a.default.InitializeChatSDK),[3,9];case 9:return[2,this.liveChatConfig]}})})},me.prototype.getChatReconnectContext=function(le){return void 0===le&&(le={}),N(this,void 0,void 0,function(){var fe,de,xe,oe,we,Ce;return m(this,function(ye){switch(ye.label){case 0:if(this.scenarioMarker.startScenario(a.default.GetChatReconnectContext,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),fe={reconnectId:null,redirectURL:null},!this.authenticatedUserToken)return[3,5];ye.label=1;case 1:return ye.trys.push([1,3,,4]),[4,this.OCClient.getReconnectableChats({authenticatedUserToken:this.authenticatedUserToken})];case 2:return(de=ye.sent())&&de.reconnectid&&(fe.reconnectId=de.reconnectid),this.scenarioMarker.completeScenario(a.default.GetChatReconnectContext,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,4];case 3:return xe=ye.sent(),Ce={response:"OCClientGetReconnectableChatsFailed"},this.scenarioMarker.failScenario(a.default.GetChatReconnectContext,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(Ce)}),console.error("OmnichannelChatSDK/GetChatReconnectContext/error "+xe),[3,4];case 4:return[3,9];case 5:if(!le.reconnectId)return[3,9];ye.label=6;case 6:return ye.trys.push([6,8,,9]),[4,this.OCClient.getReconnectAvailability(le.reconnectId)];case 7:return(oe=ye.sent())&&!oe.isReconnectAvailable?oe.reconnectRedirectionURL&&(fe.redirectURL=oe.reconnectRedirectionURL):fe.reconnectId=le.reconnectId,this.scenarioMarker.completeScenario(a.default.GetChatReconnectContext,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,9];case 8:return we=ye.sent(),Ce={response:"OCClientGetReconnectAvailabilityFailed"},this.scenarioMarker.failScenario(a.default.GetChatReconnectContext,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(Ce)}),console.error("OmnichannelChatSDK/GetChatReconnectContext/error "+we),[3,9];case 9:return[2,fe]}})})},me.prototype.startChat=function(le){var fe,ae,de,xe,Ce,oe,we,ye,re,ee,Z,ue,Re,Te,Ee,$e,Ne,_e,Be,Ae;return void 0===le&&(le={}),N(this,void 0,void 0,function(){var Ct,We,ct,it,at,Dn,ot,Je,En,Ge,Pn,ut,Ve,qe,On=this;return m(this,function(Ke){switch(Ke.label){case 0:return this.scenarioMarker.startScenario(a.default.StartChat,{RequestId:this.requestId}),h.default.isNode()||h.default.isReactNative()||this.IC3Client||this.liveChatVersion!==W.default.V1?[3,2]:(Ct=this,[4,this.getIC3Client()]);case 1:Ct.IC3Client=Ke.sent(),Ke.label=2;case 2:if(this.isChatReconnect&&!(null===(fe=this.chatSDKConfig.chatReconnect)||void 0===fe?void 0:fe.disable)&&!this.isPersistentChat&&le.reconnectId&&(this.reconnectId=le.reconnectId),!this.isPersistentChat||(null===(ae=this.chatSDKConfig.persistentChat)||void 0===ae?void 0:ae.disable))return[3,6];Ke.label=3;case 3:return Ke.trys.push([3,5,,6]),[4,this.OCClient.getReconnectableChats({authenticatedUserToken:this.authenticatedUserToken})];case 4:return(We=Ke.sent())&&We.reconnectid&&(this.reconnectId=We.reconnectid),[3,6];case 5:throw Ke.sent(),qe={response:"OCClientGetReconnectableChatsFailed"},Error(qe.response);case 6:return le.liveChatContext&&Object.keys(le.liveChatContext).length>0&&!this.reconnectId?(this.chatToken=le.liveChatContext.chatToken||{},this.requestId=le.liveChatContext.requestId||M.uuidv4(),[4,this.getConversationDetails()]):[3,8];case 7:if(ct=Ke.sent(),0===Object.keys(ct).length)throw qe={response:"InvalidConversation"},this.scenarioMarker.failScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(qe)}),console.error("Conversation not found"),Error(qe.response);if(ct.state===te.default.WrapUp||ct.state===te.default.Closed)throw qe={response:"ClosedConversation"},this.scenarioMarker.failScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(qe)}),console.error("Unable to join conversation that's in '"+ct.state+"' state"),Error(qe.response);Ke.label=8;case 8:return this.authSettings?this.authenticatedUserToken?[3,10]:[4,this.setAuthTokenProvider(this.chatSDKConfig.getAuthToken)]:[3,14];case 9:Ke.sent(),Ke.label=10;case 10:if(!(le.liveChatContext&&Object.keys(le.liveChatContext).length>0))return[3,14];this.chatToken=le.liveChatContext.chatToken||{},this.requestId=le.liveChatContext.requestId||M.uuidv4(),Ke.label=11;case 11:return Ke.trys.push([11,13,,14]),[4,this.OCClient.validateAuthChatRecord(this.requestId,{authenticatedUserToken:this.authenticatedUserToken,chatId:this.chatToken.chatId})];case 12:return Ke.sent(),[3,14];case 13:throw Ke.sent(),qe={response:"OCClientValidateAuthChatRecordFailed",message:"InvalidAuthChatRecord"},this.scenarioMarker.failScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(qe)}),Error(qe.response);case 14:return this.chatToken&&0===Object.keys(this.chatToken).length?[4,this.getChatToken(!1)]:[3,16];case 15:Ke.sent(),Ke.label=16;case 16:return null===(de=this.ic3ClientLogger)||void 0===de||de.setChatId(this.chatToken.chatId||""),null===(xe=this.ocSdkLogger)||void 0===xe||xe.setChatId(this.chatToken.chatId||""),null===(Ce=this.acsClientLogger)||void 0===Ce||Ce.setChatId(this.chatToken.chatId||""),null===(oe=this.acsAdapterLogger)||void 0===oe||oe.setChatId(this.chatToken.chatId||""),null===(we=this.callingSdkLogger)||void 0===we||we.setChatId(this.chatToken.chatId||""),null===(ye=this.amsClientLogger)||void 0===ye||ye.setChatId(this.chatToken.chatId||""),(it=this.populateInitChatOptionalParam(it={initContext:{}},le)).initContext.isProactiveChat=!!le.isProactiveChat,(this.isPersistentChat&&!(null===(re=this.chatSDKConfig.persistentChat)||void 0===re?void 0:re.disable)||this.isChatReconnect&&!(null===(ee=this.chatSDKConfig.chatReconnect)||void 0===ee?void 0:ee.disable)&&!this.isPersistentChat)&&(it.reconnectId=this.reconnectId),"true"!==(null===(ue=null===(Z=this.liveChatConfig)||void 0===Z?void 0:Z.LiveWSAndLiveChatEngJoin)||void 0===ue?void 0:ue.msdyn_requestvisitorlocation)?[3,18]:[4,b.getLocationInfo(this.scenarioMarker,this.chatToken.chatId,this.requestId)];case 17:at=Ke.sent(),it.initContext.latitude=at.latitude,it.initContext.longitude=at.longitude,Ke.label=18;case 18:if(le.liveChatContext)return[3,22];Ke.label=19;case 19:return Ke.trys.push([19,21,,22]),[4,this.OCClient.sessionInit(this.requestId,it)];case 20:return Ke.sent(),[3,22];case 21:throw Dn=Ke.sent(),qe={response:"OCClientSessionInitFailed"},(null===(Re=Dn)||void 0===Re?void 0:Re.isAxiosError)&&(null===(Ee=null===(Te=Dn.response)||void 0===Te?void 0:Te.headers)||void 0===Ee?void 0:Ee.errorcode.toString())===R.default.WidgetUseOutsideOperatingHour.toString()&&(qe.response=R.default[R.default.WidgetUseOutsideOperatingHour].toString(),qe.message="Widget used outside of operating hours",console.error(qe.message)),this.scenarioMarker.failScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(qe)}),new Error(qe.response);case 22:if(this.liveChatVersion!==W.default.V2)return[3,33];ot={token:this.chatToken.token,id:this.chatToken.visitorId||"teamsvisitor",threadId:this.chatToken.chatId,environmentUrl:this.chatToken.acsEndpoint,pollingInterval:3e4},Ke.label=23;case 23:return Ke.trys.push([23,25,,26]),[4,null===($e=this.ACSClient)||void 0===$e?void 0:$e.initialize({token:ot.token,environmentUrl:ot.environmentUrl})];case 24:return Ke.sent(),[3,26];case 25:return Je=Ke.sent(),qe={response:"ACSClientInitializeFailed"},this.scenarioMarker.failScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(qe)}),console.error("OmnichannelChatSDK/startChat/initialize/error "+Je),[2,Je];case 26:return Ke.trys.push([26,28,,29]),En=this,[4,null===(Ne=this.ACSClient)||void 0===Ne?void 0:Ne.joinConversation({id:ot.id,threadId:ot.threadId,pollingInterval:ot.pollingInterval})];case 27:return En.conversation=Ke.sent(),this.scenarioMarker.completeScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,29];case 28:throw Ge=Ke.sent(),qe={response:"ACSClientJoinConversationFailed"},this.scenarioMarker.failScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(qe)}),console.error("OmnichannelChatSDK/startChat/joinConversation/error "+Ge),Error(qe.response);case 29:return Ke.trys.push([29,31,,32]),[4,null===(_e=this.AMSClient)||void 0===_e?void 0:_e.initialize({chatToken:this.chatToken})];case 30:return Ke.sent(),[3,32];case 31:throw Ke.sent(),qe={response:"AMSClientInitializeFailed"},this.scenarioMarker.failScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(qe)}),Error(qe.response);case 32:return[3,39];case 33:return Ke.trys.push([33,35,,36]),[4,this.IC3Client.initialize({token:this.chatToken.token,regionGtms:this.chatToken.regionGTMS,visitor:!0})];case 34:return Ke.sent(),[3,36];case 35:return Pn=Ke.sent(),qe={response:"IC3ClientInitializeFailed"},this.scenarioMarker.failScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(qe)}),console.error("OmnichannelChatSDK/startChat/initialize/error "+Pn),[2,Pn];case 36:return Ke.trys.push([36,38,,39]),ut=this,[4,this.IC3Client.joinConversation(this.chatToken.chatId)];case 37:return ut.conversation=Ke.sent(),this.scenarioMarker.completeScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,39];case 38:return Ve=Ke.sent(),qe={response:"IC3ClientJoinConversationFailed"},this.scenarioMarker.failScenario(a.default.StartChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify(qe)}),console.error("OmnichannelChatSDK/startChat/joinConversation/error "+Ve),[2,Ve];case 39:return this.isPersistentChat&&!(null===(Be=this.chatSDKConfig.persistentChat)||void 0===Be?void 0:Be.disable)&&(this.refreshTokenTimer=setInterval(function(){return N(On,void 0,void 0,function(){return m(this,function(st){switch(st.label){case 0:return[4,this.getChatToken(!1)];case 1:return st.sent(),this.updateChatToken(this.chatToken.token,this.chatToken.regionGTMS),[2]}})})},null===(Ae=this.chatSDKConfig.persistentChat)||void 0===Ae?void 0:Ae.tokenUpdateTime)),[2]}})})},me.prototype.endChat=function(){var le,fe,ae,de,xe,Ce,oe,we,ye,re,ee,Z,ue,Re,Te;return N(this,void 0,void 0,function(){var Ee,$e,Ne,_e;return m(this,function(Ae){switch(Ae.label){case 0:this.scenarioMarker.startScenario(a.default.EndChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),Ee={},this.isPersistentChat&&!(null===(le=this.chatSDKConfig.persistentChat)||void 0===le?void 0:le.disable)&&($e=null!==this.reconnectId,Ee.isPersistentChat=this.isPersistentChat,Ee.isReconnectChat=$e),this.isChatReconnect&&!(null===(fe=this.chatSDKConfig.chatReconnect)||void 0===fe?void 0:fe.disable)&&!this.isPersistentChat&&(this.requestId=(Ne=null!==this.reconnectId)?this.reconnectId:this.requestId,Ee.isReconnectChat=Ne),this.authenticatedUserToken&&(Ee.authenticatedUserToken=this.authenticatedUserToken),Ae.label=1;case 1:return Ae.trys.push([1,3,,4]),[4,this.OCClient.sessionClose(this.requestId,Ee)];case 2:return Ae.sent(),this.scenarioMarker.completeScenario(a.default.EndChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),null===(ae=this.conversation)||void 0===ae||ae.disconnect(),this.conversation=null,this.requestId=M.uuidv4(),this.chatToken={},this.reconnectId=null,this.IC3Client&&(this.IC3Client.dispose(),!h.default.isNode()&&!h.default.isReactNative()&&y.removeElementById(this.IC3Client.id),this.IC3Client=null),null===(de=this.ic3ClientLogger)||void 0===de||de.setRequestId(this.requestId),null===(xe=this.ic3ClientLogger)||void 0===xe||xe.setChatId(""),null===(Ce=this.ocSdkLogger)||void 0===Ce||Ce.setRequestId(this.requestId),null===(oe=this.ocSdkLogger)||void 0===oe||oe.setChatId(""),null===(we=this.acsClientLogger)||void 0===we||we.setRequestId(this.requestId),null===(ye=this.acsClientLogger)||void 0===ye||ye.setChatId(""),null===(re=this.acsAdapterLogger)||void 0===re||re.setRequestId(this.requestId),null===(ee=this.acsAdapterLogger)||void 0===ee||ee.setChatId(""),null===(Z=this.callingSdkLogger)||void 0===Z||Z.setRequestId(this.requestId),null===(ue=this.callingSdkLogger)||void 0===ue||ue.setChatId(""),null===(Re=this.amsClientLogger)||void 0===Re||Re.setRequestId(this.requestId),null===(Te=this.amsClientLogger)||void 0===Te||Te.setChatId(""),[3,4];case 3:return _e=Ae.sent(),this.scenarioMarker.failScenario(a.default.EndChat,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify({response:"OCClientSessionCloseFailed"})}),console.error("OmnichannelChatSDK/endChat/error "+_e),[2,_e];case 4:return null!==this.refreshTokenTimer&&(clearInterval(this.refreshTokenTimer),this.refreshTokenTimer=null),[2]}})})},me.prototype.getCurrentLiveChatContext=function(){return N(this,void 0,void 0,function(){var le,fe,ae;return m(this,function(de){switch(de.label){case 0:return[4,this.getChatToken()];case 1:return le=de.sent(),this.scenarioMarker.startScenario(a.default.GetCurrentLiveChatContext,{RequestId:fe=this.requestId,ChatId:le.chatId}),ae={chatToken:le,requestId:fe},0===Object.keys(ae.chatToken).length?[2,{}]:(this.scenarioMarker.completeScenario(a.default.GetCurrentLiveChatContext,{RequestId:fe,ChatId:le.chatId}),[2,ae])}})})},me.prototype.getConversationDetails=function(){var le,fe,ae,de;return N(this,void 0,void 0,function(){var xe,Ce,ye,re,ee,Z,ue;return m(this,function(Re){switch(Re.label){case 0:this.scenarioMarker.startScenario(a.default.GetConversationDetails,{RequestId:this.requestId,ChatId:(null===(le=this.chatToken)||void 0===le?void 0:le.chatId)||""}),xe={},this.isPersistentChat&&!(null===(fe=this.chatSDKConfig.persistentChat)||void 0===fe?void 0:fe.disable)&&this.reconnectId&&(xe.reconnectId=this.reconnectId),this.isChatReconnect&&!(null===(ae=this.chatSDKConfig.chatReconnect)||void 0===ae?void 0:ae.disable)&&!this.isPersistentChat&&this.reconnectId&&(xe.reconnectId=this.reconnectId),this.authenticatedUserToken&&(xe.authenticatedUserToken=this.authenticatedUserToken),Re.label=1;case 1:return Re.trys.push([1,3,,4]),[4,this.OCClient.getLWIDetails(this.requestId,xe)];case 2:return Ce=Re.sent(),re=Ce.CanRenderPostChat,ee=Ce.ParticipantType,Z={state:Ce.State,conversationId:Ce.ConversationId},(ye=Ce.AgentAcceptedOn)&&(Z.agentAcceptedOn=ye),re&&(Z.canRenderPostChat=re),ee&&(Z.participantType=ee),this.scenarioMarker.completeScenario(a.default.GetConversationDetails,{RequestId:this.requestId,ChatId:(null===(de=this.chatToken)||void 0===de?void 0:de.chatId)||""}),[2,Z];case 3:return ue=Re.sent(),this.scenarioMarker.failScenario(a.default.GetConversationDetails,{RequestId:this.requestId,ChatId:this.chatToken.chatId||""}),console.error("OmnichannelChatSDK/getConversationDetails/error "+ue),[3,4];case 4:return[2,{}]}})})},me.prototype.getPreChatSurvey=function(le){return void 0===le&&(le=!0),N(this,void 0,void 0,function(){var fe;return m(this,function(ae){this.scenarioMarker.startScenario(a.default.GetPreChatSurvey);try{return fe=le?JSON.parse(this.preChatSurvey):this.preChatSurvey,this.scenarioMarker.completeScenario(a.default.GetPreChatSurvey),[2,fe]}catch(de){this.scenarioMarker.failScenario(a.default.GetPreChatSurvey)}return[2]})})},me.prototype.getLiveChatConfig=function(le){return N(this,void 0,void 0,function(){return m(this,function(fe){return le&&!0!==le.useRuntimeCache?[2,this.getChatConfig({sendCacheHeaders:(null==le?void 0:le.sendCacheHeaders)||!1})]:[2,this.liveChatConfig]})})},me.prototype.getChatToken=function(le){var fe,ae;return void 0===le&&(le=!0),N(this,void 0,void 0,function(){var de,xe,oe,ye,re,ee,Z,ue,Re;return m(this,function(Ee){switch(Ee.label){case 0:if(this.scenarioMarker.startScenario(a.default.GetChatToken,{RequestId:this.requestId}),le)return[3,5];Ee.label=1;case 1:return Ee.trys.push([1,3,,4]),de={},this.authenticatedUserToken&&(de.authenticatedUserToken=this.authenticatedUserToken),this.isPersistentChat&&!(null===(fe=this.chatSDKConfig.persistentChat)||void 0===fe?void 0:fe.disable)&&(de.reconnectId=this.reconnectId),this.isChatReconnect&&!(null===(ae=this.chatSDKConfig.chatReconnect)||void 0===ae?void 0:ae.disable)&&!this.isPersistentChat&&(de.reconnectId=this.reconnectId),[4,this.OCClient.getChatToken(this.requestId,de)];case 2:return xe=Ee.sent(),oe=xe.Token,ye=xe.ExpiresIn,re=xe.VisitorId,ee=xe.VoiceVideoCallToken,Z=xe.ACSEndpoint,ue=xe.AttachmentConfiguration,this.chatToken={chatId:xe.ChatId,regionGTMS:JSON.parse(xe.RegionGtms),requestId:this.requestId,token:oe,expiresIn:ye,visitorId:re,voiceVideoCallToken:ee,acsEndpoint:Z},ue&&ue.AttachmentServiceEndpoint&&(this.chatToken.amsEndpoint=ue.AttachmentServiceEndpoint),this.scenarioMarker.completeScenario(a.default.GetChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,4];case 3:return Re=Ee.sent(),this.scenarioMarker.failScenario(a.default.GetChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify({response:"OCClientGetChatTokenFailed"})}),console.error("OmnichannelChatSDK/getChatToken/error "+Re),[3,4];case 4:return[3,6];case 5:this.scenarioMarker.completeScenario(a.default.GetChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),Ee.label=6;case 6:return[2,this.chatToken]}})})},me.prototype.getCallingToken=function(){return N(this,void 0,void 0,function(){return m(this,function(le){return this.chatToken&&0===Object.keys(this.chatToken).length?[2,""]:this.chatToken.voiceVideoCallToken?(this.debug&&console.log("calling:acs"),[2,this.chatToken.voiceVideoCallToken.Token]):(this.debug&&console.log("calling:skype"),[2,this.chatToken.token])})})},me.prototype.getMessages=function(){var le;return N(this,void 0,void 0,function(){var fe;return m(this,function(de){switch(de.label){case 0:this.scenarioMarker.startScenario(a.default.GetMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),de.label=1;case 1:return de.trys.push([1,3,,4]),[4,null===(le=this.conversation)||void 0===le?void 0:le.getMessages()];case 2:return fe=de.sent(),this.scenarioMarker.completeScenario(a.default.GetMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,fe];case 3:return de.sent(),this.scenarioMarker.failScenario(a.default.GetMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,4];case 4:return[2]}})})},me.prototype.getDataMaskingRules=function(){return N(this,void 0,void 0,function(){return m(this,function(le){return[2,this.dataMaskingRules]})})},me.prototype.sendMessage=function(le){var fe;return N(this,void 0,void 0,function(){var ae,de,xe,Ce,oe,we,re,ee,Z,ue,Te;return m(this,function($e){switch($e.label){case 0:if(this.scenarioMarker.startScenario(a.default.SendMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),de=(ae=this.chatSDKConfig.dataMasking).disable,xe=ae.maskingCharacter,Ce=le.content,Object.keys(this.dataMaskingRules).length>0&&!de)for(oe=0,we=Object.values(this.dataMaskingRules);oe<we.length;oe++)for(re=new RegExp(we[oe],"g"),ee=void 0;ee=re.exec(Ce);)Z=ee[0].replace(/./g,xe),Ce=Ce.replace(ee[0],Z);if(le.content=Ce,this.liveChatVersion!==W.default.V2)return[3,5];(ue={content:le.content}).metadata={widgetId:this.omnichannelConfig.widgetId,clientMessageId:Date.now().toString()},le.metadata&&(ue.metadata=p(p({},ue.metadata),le.metadata)),$e.label=1;case 1:return $e.trys.push([1,3,,4]),[4,null===(fe=this.conversation)||void 0===fe?void 0:fe.sendMessage(ue)];case 2:return $e.sent(),this.scenarioMarker.completeScenario(a.default.SendMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,4];case 3:throw $e.sent(),this.scenarioMarker.failScenario(a.default.SendMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),new Error("ChatSDKSendMessageFailed");case 4:return[3,9];case 5:Te={content:le.content,timestamp:new Date,contentType:$.default.Text,deliveryMode:V.default.Bridged,messageType:pe.default.UserMessage,properties:void 0,tags:x(i.defaultMessageTags),sender:{displayName:"Customer",id:"customer",type:r.default.User}},le.tags&&(Te.tags=le.tags),le.timestamp&&(Te.timestamp=le.timestamp),$e.label=6;case 6:return $e.trys.push([6,8,,9]),[4,this.conversation.sendMessage(Te)];case 7:return $e.sent(),this.scenarioMarker.completeScenario(a.default.SendMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,9];case 8:throw $e.sent(),this.scenarioMarker.failScenario(a.default.SendMessages,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),new Error("ChatSDKSendMessageFailed");case 9:return[2]}})})},me.prototype.onNewMessage=function(le,fe){var ae,de;return void 0===fe&&(fe={}),N(this,void 0,void 0,function(){var xe,oe,we,re,ee,Ce,Z,ue,ye,Re,Te,Ee=this;return m(this,function($e){switch($e.label){case 0:return this.scenarioMarker.startScenario(a.default.OnNewMessage,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.liveChatVersion!==W.default.V2?[3,3]:(xe=new Set,fe.rehydrate?(this.debug&&console.log("[OmnichannelChatSDK][onNewMessage] rehydrate"),[4,this.getMessages()]):[3,2]);case 1:for(Ce=$e.sent(),oe=0,we=Ce.reverse();oe<we.length;oe++)!xe.has(re=(ye=we[oe]).id)&&(xe.add(re),le(ye));$e.label=2;case 2:try{null===(ae=this.conversation)||void 0===ae||ae.registerOnNewMessage(function(Ne){var _e=Ne.id,Be=_.default(Ne,{liveChatVersion:Ee.liveChatVersion,debug:Ee.debug});xe.has(_e)||(le(Be),xe.add(_e))}),this.scenarioMarker.completeScenario(a.default.OnNewMessage,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(Ne){this.scenarioMarker.failScenario(a.default.OnNewMessage,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}return[3,6];case 3:return ee=new Set,fe.rehydrate?(this.debug&&console.log("[OmnichannelChatSDK][onNewMessage] rehydrate"),[4,this.getMessages()]):[3,5];case 4:if(Ce=$e.sent())for(Z=0,ue=Ce.reverse();Z<ue.length;Z++)!ee.has(Re=(ye=ue[Z]).clientmessageid)&&(ee.add(Re),Te=_.default(ye,{liveChatVersion:this.liveChatVersion,debug:this.debug}),le(Te));$e.label=5;case 5:try{null===(de=this.conversation)||void 0===de||de.registerOnNewMessage(function(Ne){var _e=Ne.clientmessageid,Be=Ne.messageType;if(!z.isCustomerMessage(Ne)&&!ee.has(_e)&&Be!==pe.default.Typing){var Ae=_.default(Ne,{liveChatVersion:Ee.liveChatVersion,debug:Ee.debug});le(Ae)}}),this.scenarioMarker.completeScenario(a.default.OnNewMessage,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(Ne){this.scenarioMarker.failScenario(a.default.OnNewMessage,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}$e.label=6;case 6:return[2]}})})},me.prototype.sendTypingEvent=function(){return N(this,void 0,void 0,function(){var fe,ae,de,xe;return m(this,function(Ce){switch(Ce.label){case 0:if(this.scenarioMarker.startScenario(a.default.SendTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.liveChatVersion!==W.default.V2)return[3,6];Ce.label=1;case 1:return Ce.trys.push([1,4,,5]),[4,this.OCClient.sendTypingIndicator(this.requestId,W.default.V2,{customerDisplayName:v.default.Customer})];case 2:return Ce.sent(),[4,this.conversation.sendTyping()];case 3:return Ce.sent(),this.scenarioMarker.completeScenario(a.default.SendTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,5];case 4:throw Ce.sent(),this.scenarioMarker.failScenario(a.default.SendTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),new Error("OCClientSendTypingFailed");case 5:return[3,12];case 6:fe="{isTyping: 0}",Ce.label=7;case 7:return Ce.trys.push([7,11,,12]),[4,this.conversation.indicateTypingStatus(0)];case 8:return Ce.sent(),[4,this.conversation.getMembers()];case 9:return ae=Ce.sent(),de=ae.filter(function(oe){return oe.type===r.default.Bot}),[4,this.conversation.sendMessageToBot(de[0].id,{payload:fe})];case 10:return Ce.sent(),this.scenarioMarker.completeScenario(a.default.SendTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,12];case 11:return xe=Ce.sent(),console.error("OmnichannelChatSDK/sendTypingEvent/error"),this.scenarioMarker.failScenario(a.default.SendTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,xe];case 12:return[2]}})})},me.prototype.onTypingEvent=function(le){var fe;return N(this,void 0,void 0,function(){return m(this,function(ae){if(this.scenarioMarker.startScenario(a.default.OnTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.liveChatVersion===W.default.V2)try{this.conversation.onTypingEvent(le),this.scenarioMarker.completeScenario(a.default.OnTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(de){this.scenarioMarker.failScenario(a.default.OnTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}else try{null===(fe=this.conversation)||void 0===fe||fe.registerOnNewMessage(function(de){var xe=de.messageType;z.isCustomerMessage(de)||xe===pe.default.Typing&&le(de)}),this.scenarioMarker.completeScenario(a.default.OnTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(de){this.scenarioMarker.failScenario(a.default.OnTypingEvent,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}return[2]})})},me.prototype.onAgentEndSession=function(le){var fe;return N(this,void 0,void 0,function(){var ae=this;return m(this,function(de){if(this.scenarioMarker.startScenario(a.default.OnAgentEndSession,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.liveChatVersion===W.default.V2)try{this.conversation.registerOnThreadUpdate(function(xe){le(xe)}),this.scenarioMarker.completeScenario(a.default.OnAgentEndSession,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(xe){this.scenarioMarker.failScenario(a.default.OnAgentEndSession,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}else try{null===(fe=this.conversation)||void 0===fe||fe.registerOnThreadUpdate(function(xe){1===xe.members.length&&(le(xe),null!==ae.refreshTokenTimer&&(clearInterval(ae.refreshTokenTimer),ae.refreshTokenTimer=null))}),this.scenarioMarker.completeScenario(a.default.OnAgentEndSession,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}catch(xe){this.scenarioMarker.failScenario(a.default.OnAgentEndSession,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}return[2]})})},me.prototype.uploadFileAttachment=function(le){var fe,ae,de,xe;return N(this,void 0,void 0,function(){var Ce,oe,we,ye,re,ee,Re,Z,Te;return m(this,function(Ee){switch(Ee.label){case 0:return this.scenarioMarker.startScenario(a.default.UploadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.liveChatVersion!==W.default.V2?[3,7]:[4,null===(fe=this.AMSClient)||void 0===fe?void 0:fe.createObject(null===(ae=this.chatToken)||void 0===ae?void 0:ae.chatId,le)];case 1:return Ce=Ee.sent(),oe=Ce.id,[4,null===(de=this.AMSClient)||void 0===de?void 0:de.uploadDocument(oe,le)];case 2:we=Ee.sent(),ye={amsReferences:JSON.stringify([oe]),amsreferences:JSON.stringify([oe])},re={amsMetadata:JSON.stringify([{contentType:le.type,fileName:le.name}])},ee={content:"",metadata:p(p({widgetId:this.omnichannelConfig.widgetId,clientMessageId:Date.now().toString()},ye),re)},Z={content:"",timestamp:new Date,contentType:$.default.Text,deliveryMode:V.default.Bridged,messageType:pe.default.UserMessage,tags:x(i.defaultMessageTags),sender:{displayName:"Customer",id:"customer",type:r.default.User},fileMetadata:we},Ee.label=3;case 3:return Ee.trys.push([3,5,,6]),[4,null===(xe=this.conversation)||void 0===xe?void 0:xe.sendMessage(ee)];case 4:return Ee.sent(),this.scenarioMarker.completeScenario(a.default.UploadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,Z];case 5:return Ee.sent(),console.error("OmnichannelChatSDK/uploadFileAttachment/sendMessage/error"),this.scenarioMarker.failScenario(a.default.UploadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,6];case 6:return[2,{}];case 7:return Re=void 0,h.default.isReactNative()||h.default.isNode()?[4,this.conversation.sendFileData(le,U.default.AmsBasedFileSharing)]:[3,9];case 8:return Re=Ee.sent(),[3,11];case 9:return[4,this.conversation.uploadFile(le,U.default.AmsBasedFileSharing)];case 10:Re=Ee.sent(),Ee.label=11;case 11:Z={content:"",timestamp:new Date,contentType:$.default.Text,deliveryMode:V.default.Bridged,messageType:pe.default.UserMessage,tags:x(i.defaultMessageTags),sender:{displayName:"Customer",id:"customer",type:r.default.User},fileMetadata:Re},Ee.label=12;case 12:return Ee.trys.push([12,14,,15]),[4,this.conversation.sendFileMessage(Re,Z)];case 13:return Ee.sent(),this.scenarioMarker.completeScenario(a.default.UploadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,Z];case 14:return Te=Ee.sent(),console.error("OmnichannelChatSDK/uploadFileAttachment/error: "+Te),this.scenarioMarker.failScenario(a.default.UploadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,Te];case 15:return[2]}})})},me.prototype.downloadFileAttachment=function(le){var fe,ae;return N(this,void 0,void 0,function(){var de,xe,Ce,we,ye;return m(this,function(re){switch(re.label){case 0:if(this.scenarioMarker.startScenario(a.default.DownloadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),this.liveChatVersion!==W.default.V2)return[3,6];re.label=1;case 1:return re.trys.push([1,4,,5]),[4,null===(fe=this.AMSClient)||void 0===fe?void 0:fe.getViewStatus(le)];case 2:return de=re.sent(),xe=de.view_location,[4,null===(ae=this.AMSClient)||void 0===ae?void 0:ae.getView(le,xe)];case 3:return Ce=re.sent(),this.scenarioMarker.completeScenario(a.default.DownloadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,Ce];case 4:throw re.sent(),this.scenarioMarker.failScenario(a.default.DownloadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),new Error("DownloadFileAttachmentFailed");case 5:return[3,9];case 6:return re.trys.push([6,8,,9]),[4,this.conversation.downloadFile(le)];case 7:return we=re.sent(),this.scenarioMarker.completeScenario(a.default.DownloadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,we];case 8:throw ye=re.sent(),console.error("OmnichannelChatSDK/downloadFileAttachment/error: "+ye),this.scenarioMarker.failScenario(a.default.DownloadFileAttachment,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),new Error("DownloadFileAttachmentFailed");case 9:return[2]}})})},me.prototype.emailLiveChatTranscript=function(le){return N(this,void 0,void 0,function(){var fe,ae,de;return m(this,function(xe){fe={},this.scenarioMarker.startScenario(a.default.EmailLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId});try{return this.authenticatedUserToken&&(fe.authenticatedUserToken=this.authenticatedUserToken),ae={ChatId:this.chatToken.chatId,EmailAddress:le.emailAddress,DefaultAttachmentMessage:le.attachmentMessage,CustomerLocale:le.locale||I.getLocaleStringFromId(this.localeId)},de=this.OCClient.emailTranscript(this.requestId,this.chatToken.token,ae,fe),this.scenarioMarker.completeScenario(a.default.EmailLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,de]}catch(Ce){console.error("OmnichannelChatSDK/emailLiveChatTranscript/error: "+Ce),this.scenarioMarker.failScenario(a.default.EmailLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}return[2]})})},me.prototype.getLiveChatTranscript=function(){return N(this,void 0,void 0,function(){var le,fe;return m(this,function(ae){le={},this.scenarioMarker.startScenario(a.default.GetLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId});try{return this.authenticatedUserToken&&(le.authenticatedUserToken=this.authenticatedUserToken),fe=this.OCClient.getChatTranscripts(this.requestId,this.chatToken.chatId,this.chatToken.token,le),this.scenarioMarker.completeScenario(a.default.GetLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[2,fe]}catch(de){this.scenarioMarker.failScenario(a.default.GetLiveChatTranscript,{RequestId:this.requestId,ChatId:this.chatToken.chatId})}return[2]})})},me.prototype.createChatAdapter=function(le){var fe;return void 0===le&&(le={}),N(this,void 0,void 0,function(){var ae,de,xe;return m(this,function(Ce){return h.default.isNode()||h.default.isReactNative()?[2,Promise.reject("ChatAdapter is only supported on browser")]:(de=[P.default.ACS,P.default.IC3,P.default.DirectLine],(ae=le.protocol)&&!de.includes(ae)?[2,Promise.reject("ChatAdapter for protocol "+ae+" currently not supported")]:ae===P.default.DirectLine?[2,A.createDirectLine(le,this.chatSDKConfig,this.liveChatVersion,P.default.DirectLine,this.telemetry,this.scenarioMarker)]:ae===P.default.ACS||this.liveChatVersion===W.default.V2?(xe=new w.default(this.AMSClient,this.acsAdapterLogger),[2,A.createACSAdapter(le,this.chatSDKConfig,this.liveChatVersion,P.default.ACS,this.telemetry,this.scenarioMarker,this.omnichannelConfig,this.chatToken,xe,null===(fe=this.ACSClient)||void 0===fe?void 0:fe.getChatClient(),this.acsAdapterLogger)]):ae===P.default.IC3||this.liveChatVersion===W.default.V1?[2,A.createIC3Adapter(le,this.chatSDKConfig,this.liveChatVersion,P.default.IC3,this.telemetry,this.scenarioMarker,this.chatToken,this.IC3Client,this.ic3ClientLogger)]:[2,Promise.reject("ChatAdapter for protocol "+ae+" currently not supported")])})})},me.prototype.getVoiceVideoCalling=function(le){return void 0===le&&(le={}),N(this,void 0,void 0,function(){var fe,ae,xe,Ce,oe,we=this;return m(this,function(ye){switch(ye.label){case 0:if(this.scenarioMarker.startScenario(a.default.GetVoiceVideoCalling),h.default.isNode()||h.default.isReactNative())throw fe={response:"UnsupportedPlatform",message:"VoiceVideoCalling is only supported on browser"},this.scenarioMarker.failScenario(a.default.GetVoiceVideoCalling,{ExceptionDetails:JSON.stringify(fe)}),new Error(fe.response);if(this.callingOption.toString()===S.default.NoCalling.toString())throw fe={response:"FeatureDisabled",message:"Voice and video call is not enabled"},this.scenarioMarker.failScenario(a.default.GetVoiceVideoCalling,{ExceptionDetails:JSON.stringify(fe)}),new Error(fe.response);return[4,this.getChatConfig()];case 1:return ae=ye.sent(),xe=ae.LiveWSAndLiveChatEngJoin.msdyn_widgetsnippet,Ce=new RegExp('src="(https:\\/\\/[\\w-.]+)[\\w-.\\/]+"'),(oe=xe.match(Ce))&&oe.length?[2,new Promise(function(re){return N(we,void 0,void 0,function(){var ee,Z,Re,ue=this;return m(this,function(Te){switch(Te.label){case 0:return ee=oe[1]+"/livechatwidget/WebChatControl/lib/CallingBundle.js",null===(Re=this.telemetry)||void 0===Re||Re.setCDNPackages({VoiceVideoCalling:ee}),Z={logger:this.callingSdkLogger},[4,y.loadScript(ee,function(){return N(ue,void 0,void 0,function(){var Ee;return m(this,function($e){switch($e.label){case 0:return this.debug&&console.debug(ee+" loaded!"),[4,d.default(p(p({},le),Z))];case 1:return Ee=$e.sent(),this.scenarioMarker.completeScenario(a.default.GetVoiceVideoCalling),Ee.useScenarioMarker(this.scenarioMarker),re(Ee),[2]}})})},function(){return N(ue,void 0,void 0,function(){var Ee;return m(this,function($e){throw Ee={response:"VoiceVideoCallingLoadFailed",message:"Failed to load VoiceVideoCalling"},this.scenarioMarker.failScenario(a.default.GetVoiceVideoCalling,{ExceptionDetails:JSON.stringify(Ee)}),new Error(Ee.response)})})})];case 1:return Te.sent(),[2]}})})})]:[2]}})})},me.prototype.getPostChatSurveyContext=function(){return N(this,void 0,void 0,function(){var le,ae,xe,Ce,oe,we,ye,re,ee,Z,ue,Te,Ee,$e,_e;return m(this,function(Be){switch(Be.label){case 0:this.scenarioMarker.startScenario(a.default.GetPostChatSurveyContext,{RequestId:this.requestId}),Be.label=1;case 1:return Be.trys.push([1,6,,7]),xe=(ae=this.liveChatConfig.LiveWSAndLiveChatEngJoin).msfp_sourcesurveyidentifier,Ce=ae.msfp_botsourcesurveyidentifier,oe=ae.postConversationSurveyOwnerId,we=ae.postConversationBotSurveyOwnerId,"true"!==ae.msdyn_postconversationsurveyenable?[3,4]:[4,this.getConversationDetails()];case 2:return ye=Be.sent(),re="True"===(null==ye?void 0:ye.canRenderPostChat),Z={FormId:"Bot"===(ee=null==ye?void 0:ye.participantType)?Ce:xe,ConversationId:le=null==ye?void 0:ye.conversationId,OCLocaleCode:I.getLocaleStringFromId(this.localeId)},ue={requestId:this.requestId},this.authenticatedUserToken&&(ue.authenticatedUserToken=this.authenticatedUserToken),[4,this.OCClient.getSurveyInviteLink("Bot"===ee?we:oe,Z,ue)];case 3:return Te=Be.sent(),Ee=void 0,$e=void 0,null!=Te?null==Te.inviteList||1!=Te.inviteList.length?(this.scenarioMarker.failScenario(a.default.GetPostChatSurveyContext,{ConversationId:le,RequestId:this.requestId,ExceptionDetails:"Survey Invite link failed to send response."}),[2,Promise.reject("Survey Invite link failed to send response.")]):(Ee=Te.inviteList[0].invitationLink,null!=Te.formsProLocaleCode&&($e=Te.formsProLocaleCode),[2,Promise.resolve({participantJoined:re,participantType:ee,surveyInviteLink:Ee,formsProLocale:$e})]):(this.scenarioMarker.failScenario(a.default.GetPostChatSurveyContext,{ConversationId:le,RequestId:this.requestId,ExceptionDetails:"surveyInviteLinkResponse is null."}),[2,Promise.reject("surveyInviteLinkResponse is null.")]);case 4:return this.scenarioMarker.failScenario(a.default.GetPostChatSurveyContext,{RequestId:this.requestId,ExceptionDetails:"Post Chat Survey is disabled. Please check the Omnichannel Administration Portal."}),[2,Promise.reject("Post Chat is disabled from admin side.")];case 5:return[3,7];case 6:return _e=Be.sent(),this.scenarioMarker.failScenario(a.default.GetPostChatSurveyContext,{ConversationId:null!=le?le:"",RequestId:this.requestId,ExceptionDetails:JSON.stringify(_e)}),[2,Promise.reject("Retrieving post chat context failed "+JSON.stringify(_e))];case 7:return[2]}})})},me.prototype.getAgentAvailability=function(le){return void 0===le&&(le={}),N(this,void 0,void 0,function(){var fe,ae,xe,Ce=this;return m(this,function(oe){switch(oe.label){case 0:fe=function(we,ye,re){void 0===re&&(re="");var ee={response:we,message:ye};throw Ce.scenarioMarker.failScenario(a.default.GetAgentAvailability,{RequestId:Ce.requestId,ExceptionDetails:JSON.stringify(ee),ChatId:re}),new Error(ee.message)},this.scenarioMarker.startScenario(a.default.GetAgentAvailability,{RequestId:this.requestId}),this.authSettings||fe("Unsupported","GetAgentAvailability is supported only for authenticated live chat widget."),this.authenticatedUserToken||fe("UndefinedAuthToken","Missing AuthToken for GetAgentAvailability."),this.conversation&&fe("InvalidOperation","GetAgentAvailability can only be called before a chat has started.",this.chatToken.chatId),ae=this.populateInitChatOptionalParam(ae={initContext:{}},le),oe.label=1;case 1:return oe.trys.push([1,3,,4]),[4,this.OCClient.getAgentAvailability(this.requestId,ae)];case 2:return[2,oe.sent()];case 3:return xe=oe.sent(),fe("GetAgentAvailabilityFailed",xe.message),[3,4];case 4:return[2]}})})},me.prototype.getIC3Client=function(){return N(this,void 0,void 0,function(){var le,fe=this;return m(this,function(ae){switch(ae.label){case 0:return h.default.isNode()||h.default.isReactNative()?(this.debug&&console.debug("IC3Core"),this.scenarioMarker.startScenario(a.default.GetIC3Client),this.IC3SDKProvider=H.SDKProvider,[4,H.SDKProvider.getSDK({hostType:B.default.Page,protocolType:s.default.IC3V1SDK})]):[3,2];case 1:return(le=ae.sent()).setDebug(this.debug),this.scenarioMarker.completeScenario(a.default.GetIC3Client),[2,le];case 2:return this.debug&&console.debug("IC3Client"),[2,new Promise(function(de,xe){return N(fe,void 0,void 0,function(){var Ce,oe,ye,we=this;return m(this,function(re){switch(re.label){case 0:return Ce=this.resolveIC3ClientUrl(),null===(ye=this.telemetry)||void 0===ye||ye.setCDNPackages({IC3Client:Ce}),this.scenarioMarker.startScenario(a.default.GetIC3Client),this.IC3SDKProvider?[4,this.IC3SDKProvider.getSDK({hostType:B.default.IFrame,protocolType:s.default.IC3V1SDK,logger:this.ic3ClientLogger})]:[3,2];case 1:return oe=re.sent(),[2,de(oe)];case 2:return window.addEventListener("ic3:sdk:load",function(){return N(we,void 0,void 0,function(){var ee,Z,ue;return m(this,function(Re){switch(Re.label){case 0:return this.debug&&console.debug("ic3:sdk:load"),ee=window.Microsoft.CRM.Omnichannel.IC3Client.SDK,this.IC3SDKProvider=Z=ee.SDKProvider,[4,Z.getSDK({hostType:B.default.IFrame,protocolType:s.default.IC3V1SDK,logger:this.ic3ClientLogger})];case 1:return ue=Re.sent(),this.scenarioMarker.completeScenario(a.default.GetIC3Client),de(ue),[2]}})})}),[4,y.loadScript(Ce,function(){we.debug&&console.debug("IC3Client loaded!")},function(){we.scenarioMarker.failScenario(a.default.GetIC3Client,{ExceptionDetails:JSON.stringify({response:"IC3ClientLoadFailed"})}),xe("Failed to load IC3Client")})];case 3:return re.sent(),[2]}})})})]}})})},me.prototype.getChatConfig=function(le){return void 0===le&&(le={}),N(this,void 0,void 0,function(){var fe,de,xe,Ce,oe,we,Z,ue,Re,Te,Ee,$e,Ne,_e;return m(this,function(Be){switch(Be.label){case 0:fe=le.sendCacheHeaders,Be.label=1;case 1:return Be.trys.push([1,5,,6]),[4,this.OCClient.getChatConfig(this.requestId,!0===fe)];case 2:return de=Be.sent(),xe=de.DataMaskingInfo,Ce=de.LiveChatConfigAuthSettings,oe=de.LiveWSAndLiveChatEngJoin,we=de.LiveChatVersion,this.localeId=de.ChatWidgetLanguage.msdyn_localeid||I.defaultLocaleId,this.liveChatVersion=we||W.default.V1,this.debug&&console.log("[OmnichannelChatSDK][getChatConfig][liveChatVersion] "+this.liveChatVersion),xe.setting.msdyn_maskforcustomer&&(this.dataMaskingRules=xe.dataMaskingRules),Ce&&(this.authSettings=Ce),Z=oe.PreChatSurvey,Re=oe.msdyn_callingoptions,$e=!0===(ue=oe.msdyn_prechatenabled)||"true"==ue,Ne=!0===(Ee=oe.msdyn_enablechatreconnect)||"true"==Ee,(null==(Te=oe.msdyn_conversationmode)?void 0:Te.toString())===O.default.PersistentChat.toString()&&(this.isPersistentChat=!0),Ne&&!this.isPersistentChat&&(this.isChatReconnect=!0),$e&&Z&&Z.trim().length>0&&(this.preChatSurvey=Z),this.authSettings?[4,this.setAuthTokenProvider(this.chatSDKConfig.getAuthToken)]:[3,4];case 3:Be.sent(),Be.label=4;case 4:return this.preChatSurvey&&this.debug&&console.log("Prechat Survey!"),this.callingOption=Re,this.liveChatConfig=de,[2,this.liveChatConfig];case 5:return _e=Be.sent(),console.error("OmnichannelChatSDK/getChatConfig/error "+_e),[2,_e];case 6:return[2]}})})},me.prototype.resolveIC3ClientUrl=function(){return q.default.resolveIC3ClientUrl(this.chatSDKConfig)},me.prototype.resolveChatAdapterUrl=function(le){return q.default.resolveChatAdapterUrl(this.chatSDKConfig,this.liveChatVersion,le)},me.prototype.updateChatToken=function(le,fe){return N(this,void 0,void 0,function(){var ae,de;return m(this,function(Ce){switch(Ce.label){case 0:this.scenarioMarker.startScenario(a.default.UpdateChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),Ce.label=1;case 1:return Ce.trys.push([1,4,,5]),ae={token:le,regionGtms:fe,visitor:!0},this.liveChatVersion!==W.default.V1?[3,3]:[4,this.IC3Client.initialize(ae)];case 2:Ce.sent(),Ce.label=3;case 3:return this.scenarioMarker.completeScenario(a.default.UpdateChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId}),[3,5];case 4:return de=Ce.sent(),this.scenarioMarker.failScenario(a.default.UpdateChatToken,{RequestId:this.requestId,ChatId:this.chatToken.chatId,ExceptionDetails:JSON.stringify({response:"UpdateChatTokenFailed"})}),console.error("OmnichannelChatSDK/updateChatToken/error "+de),[3,5];case 5:return[2]}})})},me.prototype.setAuthTokenProvider=function(le){return N(this,void 0,void 0,function(){var fe,ae;return m(this,function(xe){switch(xe.label){case 0:if(this.scenarioMarker.startScenario(a.default.GetAuthToken),this.chatSDKConfig.getAuthToken=le,!this.chatSDKConfig.getAuthToken)return[3,5];xe.label=1;case 1:return xe.trys.push([1,3,,4]),[4,this.chatSDKConfig.getAuthToken()];case 2:return(fe=xe.sent())?(this.authenticatedUserToken=fe,this.scenarioMarker.completeScenario(a.default.GetAuthToken)):(ae={response:"UndefinedAuthToken"},this.scenarioMarker.failScenario(a.default.GetAuthToken,{ExceptionDetails:JSON.stringify(ae)})),[3,4];case 3:return xe.sent(),ae={response:"GetAuthTokenFailed"},this.scenarioMarker.failScenario(a.default.GetAuthToken,{ExceptionDetails:JSON.stringify(ae)}),[3,4];case 4:return[3,6];case 5:ae={response:"GetAuthTokenNotFound"},this.scenarioMarker.failScenario(a.default.GetAuthToken,{ExceptionDetails:JSON.stringify(ae)}),xe.label=6;case 6:return[2]}})})},me}();L.default=ge},6633:function(Y,L,T){"use strict";var p=this&&this.__awaiter||function(I,y,h,C){return new(h||(h=Promise))(function(w,S){function P(V){try{O(C.next(V))}catch(U){S(U)}}function k(V){try{O(C.throw(V))}catch(U){S(U)}}function O(V){V.done?w(V.value):function(w){return w instanceof h?w:new h(function(S){S(w)})}(V.value).then(P,k)}O((C=C.apply(I,y||[])).next())})},N=this&&this.__generator||function(I,y){var C,v,w,S,h={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return S={next:P(0),throw:P(1),return:P(2)},"function"==typeof Symbol&&(S[Symbol.iterator]=function(){return this}),S;function P(O){return function(V){return function(O){if(C)throw new TypeError("Generator is already executing.");for(;h;)try{if(C=1,v&&(w=2&O[0]?v.return:O[0]?v.throw||((w=v.return)&&w.call(v),0):v.next)&&!(w=w.call(v,O[1])).done)return w;switch(v=0,w&&(O=[2&O[0],w.value]),O[0]){case 0:case 1:w=O;break;case 4:return h.label++,{value:O[1],done:!1};case 5:h.label++,v=O[1],O=[0];continue;case 7:O=h.ops.pop(),h.trys.pop();continue;default:if(!(w=(w=h.trys).length>0&&w[w.length-1])&&(6===O[0]||2===O[0])){h=0;continue}if(3===O[0]&&(!w||O[1]>w[0]&&O[1]<w[3])){h.label=O[1];break}if(6===O[0]&&h.label<w[1]){h.label=w[1],w=O;break}if(w&&h.label<w[2]){h.label=w[2],h.ops.push(O);break}w[2]&&h.ops.pop(),h.trys.pop();continue}O=y.call(I,h)}catch(V){O=[6,V],v=0}finally{C=w=0}if(5&O[0])throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}([O,V])}}};Object.defineProperty(L,"__esModule",{value:!0}),L.VoiceVideoCallingProxy=void 0;var m=T(9600),x=(()=>{return(I=x||(x={}))[I.Voice=19237e4]="Voice",I[I.Video=19238e4]="Video",I[I.Cobrowse=19239e4]="Cobrowse",x;var I})(),u=(()=>{return(I=u||(u={})).Accept="accept",I.Reject="reject",I.Connect="connect",I.End="end",u;var I})(),g=(()=>{return(I=g||(g={})).CallAdded="callAdded",I.LocalVideoStreamAdded="localVideoStreamAdded",I.LocalVideoStreamRemoved="localVideoStreamRemoved",I.RemoteVideoStreamAdded="remoteVideoStreamAdded",I.RemoteVideoStreamRemoved="remoteVideoStreamRemoved",I.CallDisconnected="callDisconnected",I.ParticipantDisconnected="participantDisconnected",I.IncomingCallEnded="incomingCallEnded",g;var I})(),M=function(){function I(){this.debug=!1,this.callClientName="ElevateToVoiceVideo",this.proxy=window["Microsoft.Omnichannel.Calling.SDK"].VoiceVideoCalling,this.proxyInstance=this.proxy.getInstance()}return I.getInstance=function(){return this._instance||(this._instance=new I),this._instance},I.prototype.setDebug=function(y){this.debug=y},I.prototype.useScenarioMarker=function(y){this.scenarioMarker=y},I.prototype.load=function(y){return void 0===y&&(y={}),p(this,void 0,void 0,function(){return N(this,function(h){return y.logger&&(this.logger=y.logger),this.proxyInstance.load(y),[2]})})},I.prototype.isInitialized=function(){return this.proxyInstance.isInitialized()},I.prototype.initialize=function(y){var h,C,v,w,S,P,k,O;return p(this,void 0,void 0,function(){var V;return N(this,function(U){switch(U.label){case 0:return this.debug&&console.debug("[VoiceVideoCallingProxy] VoiceVideoCallingParams: "+JSON.stringify(y)),this.callingParams=y,null===(h=this.scenarioMarker)||void 0===h||h.startScenario(m.default.InitializeVoiceVideoCallingSDK),this.debug&&console.debug("[VoiceVideoCallingProxy][initialize] _isLoaded: "+this.proxyInstance._isLoaded),this.proxyInstance._isLoaded?[3,2]:[4,this.proxyInstance.load({logger:this.logger||void 0})];case 1:U.sent(),U.label=2;case 2:return U.trys.push([2,4,,5]),[4,this.proxyInstance.initialize({callClientName:this.callClientName,accesstoken:(null===(v=null===(C=this.callingParams)||void 0===C?void 0:C.chatToken.voiceVideoCallToken)||void 0===v?void 0:v.Token)||(null===(w=this.callingParams)||void 0===w?void 0:w.chatToken.token),selfVideoHTMLElementId:null===(S=this.callingParams)||void 0===S?void 0:S.selfVideoHTMLElementId,remoteVideoHTMLElementId:null===(P=this.callingParams)||void 0===P?void 0:P.remoteVideoHTMLElementId})];case 3:return U.sent(),null===(k=this.scenarioMarker)||void 0===k||k.completeScenario(m.default.InitializeVoiceVideoCallingSDK),[3,5];case 4:return V=U.sent(),console.log(V),null===(O=this.scenarioMarker)||void 0===O||O.failScenario(m.default.InitializeVoiceVideoCallingSDK),[3,5];case 5:return[2]}})})},I.prototype.addEventListener=function(y,h){var C=this;this.proxyInstance.registerEvent(y,function(v){var w=v.callId;y===g.CallAdded&&(C.callId=w),C.debug&&console.debug("[VoiceVideoCallingProxy]["+y+"] callId: "+w),w===C.callId&&h(v)})},I.prototype.isMicrophoneMuted=function(){return this.proxyInstance.isMicrophoneMuted({callClientName:this.callClientName,callId:this.callId})},I.prototype.acceptCall=function(y){var h,C,v,w,S,P;return void 0===y&&(y={}),p(this,void 0,void 0,function(){var k,O,V,H,B;return N(this,function(W){switch(W.label){case 0:O=(k=this).callClientName,V=k.callId,null===(h=this.scenarioMarker)||void 0===h||h.startScenario(y.withVideo?m.default.AcceptVideoCall:m.default.AcceptVoiceCall,{CallId:V||""}),this.debug&&console.debug("[VoiceVideoCallingProxy][acceptCall] callId: "+V),this.debug&&console.debug(y),W.label=1;case 1:return W.trys.push([1,3,,4]),[4,this.proxyInstance.acceptCall({callClientName:O,callId:V,withVideo:y.withVideo||!1})];case 2:return W.sent(),[3,4];case 3:return W.sent(),B={response:y.withVideo?"AcceptVideoCallFailed":"AcceptVoiceCallFailed"},null===(C=this.scenarioMarker)||void 0===C||C.failScenario(y.withVideo?m.default.AcceptVideoCall:m.default.AcceptVoiceCall,{CallId:V||"",ExceptionDetails:JSON.stringify(B)}),[3,4];case 4:H={SecondaryChannelType:y.withVideo?x.Video:x.Voice,SecondaryChannelEventType:u.Accept};try{null===(v=this.callingParams)||void 0===v||v.OCClient.makeSecondaryChannelEventRequest(null===(w=this.callingParams)||void 0===w?void 0:w.chatToken.requestId,H),null===(S=this.scenarioMarker)||void 0===S||S.completeScenario(y.withVideo?m.default.AcceptVideoCall:m.default.AcceptVoiceCall,{CallId:V||""}),this.debug&&console.debug("[VoiceVideoCallingProxy][acceptCall][makeSecondaryChannelEventRequest]")}catch(te){B={response:"OCClientMakeSecondaryChannelEventRequestFailed"},null===(P=this.scenarioMarker)||void 0===P||P.failScenario(y.withVideo?m.default.AcceptVideoCall:m.default.AcceptVoiceCall,{CallId:V||"",ExceptionDetails:JSON.stringify(B)}),console.error("[VoiceVideoCallingProxy][acceptCall][makeSecondaryChannelEventRequest] Failure "+te)}return[2]}})})},I.prototype.rejectCall=function(){var y,h,C,v,w,S;return p(this,void 0,void 0,function(){var P,k,O,B,U;return N(this,function(H){switch(H.label){case 0:k=(P=this).callClientName,O=P.callId,null===(y=this.scenarioMarker)||void 0===y||y.startScenario(m.default.RejectCall,{CallId:O||""}),this.debug&&console.debug("[VoiceVideoCallingProxy][rejectCall] callId: "+O),H.label=1;case 1:return H.trys.push([1,3,,4]),[4,this.proxyInstance.rejectCall({callClientName:k,callId:O})];case 2:return H.sent(),null===(h=this.scenarioMarker)||void 0===h||h.completeScenario(m.default.RejectCall,{CallId:O||""}),[3,4];case 3:return H.sent(),U={response:"RejectCallFailed"},null===(C=this.scenarioMarker)||void 0===C||C.failScenario(m.default.RejectCall,{CallId:O||"",ExceptionDetails:JSON.stringify(U)}),[3,4];case 4:B={SecondaryChannelType:this.isRemoteVideoEnabled()?x.Video:x.Voice,SecondaryChannelEventType:u.Reject};try{null===(v=this.callingParams)||void 0===v||v.OCClient.makeSecondaryChannelEventRequest(null===(w=this.callingParams)||void 0===w?void 0:w.chatToken.requestId,B),this.debug&&console.debug("[VoiceVideoCallingProxy][rejectCall][makeSecondaryChannelEventRequest]")}catch(W){return U={response:"OCClientMakeSecondaryChannelEventRequestFailed"},null===(S=this.scenarioMarker)||void 0===S||S.failScenario(m.default.RejectCall,{CallId:O||"",ExceptionDetails:JSON.stringify(U)}),console.error("[VoiceVideoCallingProxy][rejectCall][makeSecondaryChannelEventRequest] Failure "+W),[2,W]}return[2]}})})},I.prototype.stopCall=function(){var y,h,C,v,w;return p(this,void 0,void 0,function(){var S,P,k,O;return N(this,function(U){switch(U.label){case 0:P=(S=this).callClientName,k=S.callId,null===(y=this.scenarioMarker)||void 0===y||y.startScenario(m.default.StopCall,{CallId:k||""}),this.debug&&console.debug("[VoiceVideoCallingProxy][stopCall] callId: "+k),O=!!(null===(C=null===(h=this.callingParams)||void 0===h?void 0:h.chatToken.voiceVideoCallToken)||void 0===C?void 0:C.Token),U.label=1;case 1:return U.trys.push([1,3,,4]),[4,this.proxyInstance.stopCall({callClientName:P,callId:k,forEveryone:O})];case 2:return U.sent(),null===(v=this.scenarioMarker)||void 0===v||v.completeScenario(m.default.StopCall,{CallId:k||""}),[3,4];case 3:return U.sent(),null===(w=this.scenarioMarker)||void 0===w||w.failScenario(m.default.StopCall,{CallId:k||""}),[3,4];case 4:return[2]}})})},I.prototype.toggleMute=function(){return p(this,void 0,void 0,function(){var y;return N(this,function(v){return[2,this.proxyInstance.toggleMute({callClientName:(y=this).callClientName,callId:y.callId})]})})},I.prototype.isRemoteVideoEnabled=function(){return this.proxyInstance.isRemoteVideoEnabled({callClientName:this.callClientName,callId:this.callId})},I.prototype.isLocalVideoEnabled=function(){return this.proxyInstance.isLocalVideoEnabled({callClientName:this.callClientName,callId:this.callId})},I.prototype.toggleLocalVideo=function(){return p(this,void 0,void 0,function(){var y;return N(this,function(v){return[2,this.proxyInstance.toggleLocalVideo({callClientName:(y=this).callClientName,callId:y.callId})]})})},I.prototype.isInACall=function(){return this.proxyInstance.isInACall({callClientName:this.callClientName,callId:this.callId})},I.prototype.renderVideoStreams=function(){return this.proxyInstance.renderVideoStreams({callClientName:this.callClientName,callId:this.callId})},I.prototype.disposeVideoRenderers=function(){return this.proxyInstance.disposeVideoRenderers({callClientName:this.callClientName,callId:this.callId})},I.prototype.close=function(){this.debug&&console.debug("[VoiceVideoCallingProxy][close]"),this.proxyInstance.dispose(),this.callingParams=void 0,this.callId=void 0},I.prototype.onCallAdded=function(y){var h=g.CallAdded;this.debug&&console.debug("[VoiceVideoCallingProxy]["+h+"]"),this.addEventListener(h,y)},I.prototype.onLocalVideoStreamAdded=function(y){var h=g.LocalVideoStreamAdded;this.debug&&console.debug("[VoiceVideoCallingProxy]["+h+"]"),this.addEventListener(h,y)},I.prototype.onLocalVideoStreamRemoved=function(y){var h=g.LocalVideoStreamRemoved;this.debug&&console.debug("[VoiceVideoCallingProxy]["+h+"]"),this.addEventListener(h,y)},I.prototype.onRemoteVideoStreamAdded=function(y){var h=g.RemoteVideoStreamAdded;this.debug&&console.debug("[VoiceVideoCallingProxy]["+h+"]"),this.addEventListener(h,y)},I.prototype.onRemoteVideoStreamRemoved=function(y){var h=g.RemoteVideoStreamRemoved;this.debug&&console.debug("[VoiceVideoCallingProxy]["+h+"]"),this.addEventListener(h,y)},I.prototype.onCallDisconnected=function(y){var h=this,C=g.CallDisconnected;this.debug&&console.debug("[VoiceVideoCallingProxy]["+C+"]"),this.addEventListener(C,function(v){return p(h,void 0,void 0,function(){var w,S,P,k,O,V,U;return N(this,function(B){w={SecondaryChannelType:x.Voice,SecondaryChannelEventType:u.End},null===(P=this.scenarioMarker)||void 0===P||P.startScenario(m.default.OnCallDisconnected,{CallId:this.callId||""});try{null===(k=this.callingParams)||void 0===k||k.OCClient.makeSecondaryChannelEventRequest(null===(O=this.callingParams)||void 0===O?void 0:O.chatToken.requestId,w),this.debug&&console.debug("[VoiceVideoCallingProxy][onCallDisconnected][makeSecondaryChannelEventRequest]"),null===(V=this.scenarioMarker)||void 0===V||V.completeScenario(m.default.OnCallDisconnected,{CallId:this.callId||""})}catch(H){console.error("[VoiceVideoCallingProxy][onCallDisconnected][makeSecondaryChannelEventRequest] Failure "+H),S={response:"OCClientMakeSecondaryChannelEventRequestFailed"},null===(U=this.scenarioMarker)||void 0===U||U.failScenario(m.default.OnCallDisconnected,{CallId:this.callId||"",ExceptionDetails:JSON.stringify(S)})}return this.clearRemoteVideoElementChildren(),y(v),[2]})})})},I.prototype.clearRemoteVideoElementChildren=function(){var y,h;if(null===(y=this.callingParams)||void 0===y?void 0:y.remoteVideoHTMLElementId)for(var C=document.getElementById(null===(h=this.callingParams)||void 0===h?void 0:h.remoteVideoHTMLElementId);null==C?void 0:C.firstChild;)this.debug&&console.debug("[VoiceVideoCallingProxy][clearRemoteVideoElement]"),C.firstChild.remove()},I}();L.VoiceVideoCallingProxy=M,L.default=function(I){return void 0===I&&(I={}),p(void 0,void 0,void 0,function(){var y;return N(this,function(h){switch(h.label){case 0:return[4,(y=M.getInstance()).load({logger:I.logger||void 0})];case 1:return h.sent(),[2,Promise.resolve(y)]}})})}},4151:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.ariaTelemetryKey=L.webChatDirectLineVersion=L.webChatACSAdapterVersion=L.webChatIC3AdapterVersion=L.ic3ClientVersion=void 0,L.ic3ClientVersion="2021.08.14.1",L.webChatIC3AdapterVersion="0.1.0-master.2dba07b",L.webChatACSAdapterVersion="0.0.35-beta.12",L.webChatDirectLineVersion="0.15.1",L.ariaTelemetryKey="c7655518acf1403f93ff6b9f77942f0a-d01a02fd-6b50-4de3-a566-62eda11f93bc-7083"},6419:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={}))[p.NoCalling=19235e4]="NoCalling",p[p.VideoAndVoiceCalling=192350001]="VideoAndVoiceCalling",p[p.VoiceOnly=192350002]="VoiceOnly",T;var p})();L.default=T},7587:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={})).ChatAdapterInitializationFailure="ChatAdapterInitializationFailure",p.ScriptLoadFailure="ScriptLoadFailure",p.UnsupportedPlatform="UnsupportedPlatform",T;var p})();L.default=T},7925:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={}))[p.LiveChat=19235e4]="LiveChat",p[p.PersistentChat=192350001]="PersistentChat",T;var p})();L.default=T},8191:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={}))[p.V1=1]="V1",p[p.V2=2]="V2",T;var p})();L.default=T},5642:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={})).Active="Active",p.Closed="Closed",p.Open="Open",p.Waiting="Waiting",p.WrapUp="WrapUp",T;var p})();L.default=T},6233:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={}))[p.WidgetUseOutsideOperatingHour=705]="WidgetUseOutsideOperatingHour",T;var p})();L.default=T},1974:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={})).Text="text",p.TopicUpdated="topicUpdated",p.ParticipantAdded="participantAdded",p.ParticipantRemoved="participantRemoved",T;var p})();L.default=T},2902:function(Y,L,T){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(S){for(var P,k=1,O=arguments.length;k<O;k++)for(var V in P=arguments[k])Object.prototype.hasOwnProperty.call(P,V)&&(S[V]=P[V]);return S}).apply(this,arguments)},N=this&&this.__awaiter||function(S,P,k,O){return new(k||(k=Promise))(function(U,B){function H($){try{te(O.next($))}catch(pe){B(pe)}}function W($){try{te(O.throw($))}catch(pe){B(pe)}}function te($){$.done?U($.value):function(U){return U instanceof k?U:new k(function(B){B(U)})}($.value).then(H,W)}te((O=O.apply(S,P||[])).next())})},m=this&&this.__generator||function(S,P){var O,V,U,B,k={label:0,sent:function(){if(1&U[0])throw U[1];return U[1]},trys:[],ops:[]};return B={next:H(0),throw:H(1),return:H(2)},"function"==typeof Symbol&&(B[Symbol.iterator]=function(){return this}),B;function H(te){return function($){return function(te){if(O)throw new TypeError("Generator is already executing.");for(;k;)try{if(O=1,V&&(U=2&te[0]?V.return:te[0]?V.throw||((U=V.return)&&U.call(V),0):V.next)&&!(U=U.call(V,te[1])).done)return U;switch(V=0,U&&(te=[2&te[0],U.value]),te[0]){case 0:case 1:U=te;break;case 4:return k.label++,{value:te[1],done:!1};case 5:k.label++,V=te[1],te=[0];continue;case 7:te=k.ops.pop(),k.trys.pop();continue;default:if(!(U=(U=k.trys).length>0&&U[U.length-1])&&(6===te[0]||2===te[0])){k=0;continue}if(3===te[0]&&(!U||te[1]>U[0]&&te[1]<U[3])){k.label=te[1];break}if(6===te[0]&&k.label<U[1]){k.label=U[1],U=te;break}if(U&&k.label<U[2]){k.label=U[2],k.ops.push(te);break}U[2]&&k.ops.pop(),k.trys.pop();continue}te=P.call(S,k)}catch($){te=[6,$],V=0}finally{O=U=0}if(5&te[0])throw te[1];return{value:te[0]?te[1]:void 0,done:!0}}([te,$])}}};Object.defineProperty(L,"__esModule",{value:!0}),L.ACSConversation=void 0;var x=T(1974),u=T(8953),g=T(8682),M=T(9116),A=T(9340),I=T(813),y=T(2900),h=T(8191),C=(()=>{return(S=C||(C={})).InitializeACSClient="InitializeACSClient",S.InitializeACSConversation="InitializeACSConversation",S.GetParticipants="GetParticipants",S.RegisterOnNewMessage="RegisterOnNewMessage",S.RegisterOnThreadUpdate="RegisterOnThreadUpdate",S.OnTypingEvent="OnTypingEvent",S.GetMessages="GetMessages",S.SendMessage="SendMessage",S.SendTyping="SendTyping",S.Disconnect="Disconnect",C;var S})(),v=function(){function S(P,k,O){void 0===O&&(O=null),this.logger=null,this.logger=O,this.tokenCredential=P,this.chatClient=k,this.eventListeners={}}return S.prototype.initialize=function(P){var k,O,V,U,B;return N(this,void 0,void 0,function(){var H,W,$,te,pe;return m(this,function(R){switch(R.label){case 0:null===(k=this.logger)||void 0===k||k.startScenario(C.InitializeACSConversation),this.sessionInfo=P,R.label=1;case 1:return R.trys.push([1,3,,4]),H=this,[4,null===(O=this.chatClient)||void 0===O?void 0:O.getChatThreadClient(P.threadId)];case 2:return H.chatThreadClient=R.sent(),[3,4];case 3:throw W=R.sent(),te={response:"ChatClientGetChatThreadClientFailure",errorObject:""+W},null===(V=this.logger)||void 0===V||V.failScenario(C.InitializeACSConversation,{ExceptionDetails:JSON.stringify(te)}),new Error("GetChatThreadClientFailed");case 4:return R.trys.push([4,6,,7]),[4,this.chatClient.startRealtimeNotifications()];case 5:return R.sent(),[3,7];case 6:throw $=R.sent(),te={response:"StartRealtimeNotificationsFailed",errorObject:""+$},null===(U=this.logger)||void 0===U||U.failScenario(C.InitializeACSConversation,{ExceptionDetails:JSON.stringify(te)}),new Error(te.response);case 7:return pe=this,[4,this.createParticipantsMapping()];case 8:return pe.participantsMapping=R.sent(),null===(B=this.logger)||void 0===B||B.completeScenario(C.InitializeACSConversation),[2]}})})},S.prototype.getMessages=function(){var P,k,O,V,U;return N(this,void 0,void 0,function(){var B,H,W,te,R,r,s;return m(this,function(l){switch(l.label){case 0:null===(P=this.logger)||void 0===P||P.startScenario(C.GetMessages),B=[],l.label=1;case 1:return l.trys.push([1,9,,10]),[4,this.chatThreadClient.listMessages()];case 2:return[4,(H=l.sent()).next()];case 3:W=l.sent(),l.label=4;case 4:return W.done?[3,8]:(te=W.value).type===x.default.Text?[3,6]:[4,H.next()];case 5:return W=l.sent(),[3,4];case 6:return(null===(k=te.content)||void 0===k?void 0:k.message)&&Object.assign(te,{content:null===(O=te.content)||void 0===O?void 0:O.message}),Object.assign(te.sender,{alias:this.participantsMapping[te.sender.communicationUserId].displayName}),R=A.default(te,{liveChatVersion:h.default.V2}),B.push(R),[4,H.next()];case 7:return W=l.sent(),[3,4];case 8:return null===(V=this.logger)||void 0===V||V.completeScenario(C.GetMessages),[3,10];case 9:throw r=l.sent(),s={errorObject:""+r},null===(U=this.logger)||void 0===U||U.failScenario(C.GetMessages,{ExceptionDetails:JSON.stringify(s)}),new Error(C.GetMessages);case 10:return[2,B]}})})},S.prototype.getParticipants=function(){var P,k,O;return N(this,void 0,void 0,function(){var V,U,B,W,te;return m(this,function($){switch($.label){case 0:null===(P=this.logger)||void 0===P||P.startScenario(C.GetParticipants),V=[],$.label=1;case 1:return $.trys.push([1,7,,8]),[4,this.chatThreadClient.listParticipants()];case 2:return[4,(U=$.sent()).next()];case 3:B=$.sent(),$.label=4;case 4:return B.done?[3,6]:(V.push(B.value),[4,U.next()]);case 5:return B=$.sent(),[3,4];case 6:return null===(k=this.logger)||void 0===k||k.completeScenario(C.GetParticipants),[3,8];case 7:throw W=$.sent(),te={errorObject:""+W},null===(O=this.logger)||void 0===O||O.failScenario(C.GetParticipants,{ExceptionDetails:JSON.stringify(te)}),new Error(C.GetParticipants);case 8:return[2,V]}})})},S.prototype.registerOnNewMessage=function(P){var k,O,V,U,B;return N(this,void 0,void 0,function(){var H,W,te,$,pe,R,r=this;return m(this,function(s){switch(s.label){case 0:null===(k=this.logger)||void 0===k||k.startScenario(C.RegisterOnNewMessage),H=!1,W=new Set,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,(te=function(l){return N(r,void 0,void 0,function(){var a,f,_,D,d;return m(this,function(q){switch(q.label){case 0:if(H)return[2];q.label=1;case 1:return q.trys.push([1,3,,4]),[4,this.getMessages()];case 2:for(a=q.sent(),f=0,_=a.reverse();f<_.length;f++)d=(D=_[f]).id,D.sender.displayName!==u.default.Customer&&(W.has(d)||(P(D),W.add(d)));return[3,4];case 3:return q.sent(),[3,4];case 4:return setTimeout(function(){te(l)},l),[2]}})})})(null===(O=this.sessionInfo)||void 0===O?void 0:O.pollingInterval)];case 2:return s.sent(),$=function(l){var a;H=!0;var f=l.id,_=l.sender;_.communicationUserId===(null===(a=r.sessionInfo)||void 0===a?void 0:a.id)||W.has(f)||(l.message&&Object.assign(l,{content:l.message}),Object.assign(l.sender,{alias:r.participantsMapping[_.communicationUserId].displayName}),P(l),W.add(f))},null===(V=this.chatClient)||void 0===V||V.on("chatMessageReceived",$),this.trackListener("chatMessageReceived",$),null===(U=this.logger)||void 0===U||U.completeScenario(C.RegisterOnNewMessage),[3,4];case 3:throw pe=s.sent(),R={errorObject:""+pe},null===(B=this.logger)||void 0===B||B.failScenario(C.RegisterOnNewMessage,{ExceptionDetails:JSON.stringify(R)}),new Error(C.RegisterOnNewMessage);case 4:return[2]}})})},S.prototype.registerOnThreadUpdate=function(P){var k,O,V,U;return N(this,void 0,void 0,function(){var B;return m(this,function(H){null===(k=this.logger)||void 0===k||k.startScenario(C.RegisterOnThreadUpdate);try{B=function(W){P(W)},null===(O=this.chatClient)||void 0===O||O.on("participantsRemoved",B),this.trackListener("participantsRemoved",B),null===(V=this.logger)||void 0===V||V.completeScenario(C.RegisterOnThreadUpdate)}catch(W){null===(U=this.logger)||void 0===U||U.failScenario(C.RegisterOnThreadUpdate)}return[2]})})},S.prototype.onTypingEvent=function(P){var k,O,V,U;return N(this,void 0,void 0,function(){var B;return m(this,function(H){null===(k=this.logger)||void 0===k||k.startScenario(C.OnTypingEvent);try{B=function(W){W.sender.communicationUserId!==W.recipient.communicationUserId&&P(W)},null===(O=this.chatClient)||void 0===O||O.on("typingIndicatorReceived",B),this.trackListener("typingIndicatorReceived",B),null===(V=this.logger)||void 0===V||V.completeScenario(C.OnTypingEvent)}catch(W){null===(U=this.logger)||void 0===U||U.failScenario(C.OnTypingEvent)}return[2]})})},S.prototype.sendMessage=function(P){var k,O,V,U;return N(this,void 0,void 0,function(){var B,H;return m(this,function(te){switch(te.label){case 0:null===(k=this.logger)||void 0===k||k.startScenario(C.SendMessage),P.metadata||(P.metadata={}),B={content:P.content},H={senderDisplayName:u.default.Customer,metadata:p({deliveryMode:y.default.Bridged,tags:I.defaultMessageTags.join(",")},P.metadata)},te.label=1;case 1:return te.trys.push([1,3,,4]),[4,null===(O=this.chatThreadClient)||void 0===O?void 0:O.sendMessage(B,H)];case 2:return te.sent(),null===(V=this.logger)||void 0===V||V.completeScenario(C.SendMessage),[3,4];case 3:throw te.sent(),null===(U=this.logger)||void 0===U||U.failScenario(C.SendMessage),new Error("SendMessageFailed");case 4:return[2]}})})},S.prototype.sendTyping=function(){var P,k,O,V;return N(this,void 0,void 0,function(){return m(this,function(B){switch(B.label){case 0:null===(P=this.logger)||void 0===P||P.startScenario(C.SendTyping),B.label=1;case 1:return B.trys.push([1,3,,4]),[4,null===(k=this.chatThreadClient)||void 0===k?void 0:k.sendTypingNotification()];case 2:return B.sent(),null===(O=this.logger)||void 0===O||O.completeScenario(C.SendTyping),[3,4];case 3:throw B.sent(),null===(V=this.logger)||void 0===V||V.failScenario(C.SendTyping),new Error("SendTypingFailed");case 4:return[2]}})})},S.prototype.sendFileMessage=function(){return N(this,void 0,void 0,function(){return m(this,function(P){return[2,void 0]})})},S.prototype.sendFileData=function(){return N(this,void 0,void 0,function(){return m(this,function(P){return[2,void 0]})})},S.prototype.uploadFile=function(){return N(this,void 0,void 0,function(){return m(this,function(P){return[2,void 0]})})},S.prototype.downloadFile=function(){return N(this,void 0,void 0,function(){return m(this,function(P){return[2,void 0]})})},S.prototype.disconnect=function(){var P,k,O;return N(this,void 0,void 0,function(){var V,U,B,H,$=this;return m(this,function(pe){null===(P=this.logger)||void 0===P||P.startScenario(C.Disconnect);try{for(V=function(R,r){r.forEach(function(s){$.chatClient.off(R,s)})},U=0,B=Object.entries(this.eventListeners);U<B.length;U++)V((H=B[U])[0],H[1]);null===(k=this.logger)||void 0===k||k.completeScenario(C.Disconnect)}catch(R){null===(O=this.logger)||void 0===O||O.failScenario(C.Disconnect)}return[2]})})},S.prototype.createParticipantsMapping=function(){return N(this,void 0,void 0,function(){var P,k,O,V,U,B,H;return m(this,function(W){switch(W.label){case 0:return[4,this.getParticipants()];case 1:for(P=W.sent(),k={},O=0,V=P;O<V.length;O++)B=(U=V[O]).id,Object.keys(k).includes(B.communicationUserId)||Object.assign(k,((H={})[B.communicationUserId]=U,H));return[2,k]}})})},S.prototype.trackListener=function(P,k){P in this.eventListeners||(this.eventListeners[P]=[]),this.eventListeners[P].push(k)},S}();L.ACSConversation=v;var w=function(){function S(P){void 0===P&&(P=null),this.logger=null,this.tokenCredential=null,this.chatClient=null,this.logger=P}return S.prototype.initialize=function(P){var k,O,V,U;return N(this,void 0,void 0,function(){var B;return m(this,function(H){null===(k=this.logger)||void 0===k||k.startScenario(C.InitializeACSClient);try{this.tokenCredential=new M.AzureCommunicationTokenCredential(P.token)}catch(W){throw B={response:"CreateTokenCredentialFailure",errorObject:""+W},null===(O=this.logger)||void 0===O||O.failScenario(C.InitializeACSClient,{ExceptionDetails:JSON.stringify(B)}),new Error("CreateTokenCredentialFailed")}try{this.chatClient=new g.ChatClient(P.environmentUrl,this.tokenCredential)}catch(W){throw B={response:"CreateChatClientFailure",errorObject:""+W},null===(V=this.logger)||void 0===V||V.failScenario(C.InitializeACSClient,{ExceptionDetails:JSON.stringify(B)}),new Error("CreateChatClientFailed")}return null===(U=this.logger)||void 0===U||U.completeScenario(C.InitializeACSClient),[2]})})},S.prototype.joinConversation=function(P){return N(this,void 0,void 0,function(){var k;return m(this,function(O){switch(O.label){case 0:return[4,(k=new v(this.tokenCredential,this.chatClient,this.logger)).initialize(P)];case 1:return O.sent(),[2,k]}})})},S.prototype.getChatClient=function(){return this.chatClient},S}();L.default=w},8953:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={})).Customer="Customer",p.Agent="__agent__",p.System="__system__",T;var p})();L.default=T},7474:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default={IC3:"IC3",DirectLine:"DirectLine",ACS:"ACS"}},813:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.defaultMessageTags=L.customerMessageTag=L.channelIdTag=void 0,L.channelIdTag="ChannelId-lcw",L.customerMessageTag="FromCustomer",L.defaultMessageTags=[L.channelIdTag,L.customerMessageTag]},3709:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.ResourceType=L.FileSharingProtocolType=L.PersonType=L.MessageType=L.DeliveryMode=L.MessageContentType=void 0;var T=function(){function g(){}return g.RichText="RichText",g.Text="Text",g}();L.MessageContentType=T;var p=function(){function g(){}return g.Bridged="bridged",g.Unbridged="unbridged",g}();L.DeliveryMode=p;var g,N=function(){function g(){}return g.UserMessage="UserMessage",g.SwiftCard="SwiftCard",g.Typing="Control/Typing",g.ClearTyping="Control/ClearTyping",g.LiveState="Control/LiveState",g}();L.MessageType=N,(g=L.PersonType||(L.PersonType={}))[g.Unknown=0]="Unknown",g[g.User=1]="User",g[g.Bot=2]="Bot",function(g){g[g.AmsBasedFileSharing=0]="AmsBasedFileSharing"}(L.FileSharingProtocolType||(L.FileSharingProtocolType={}));var u=function(){function g(){}return g.NewMessage="NewMessage",g.MessageUpdate="MessageUpdate",g.UserPresence="UserPresence",g.ConversationUpdate="ConversationUpdate",g.ThreadUpdate="ThreadUpdate",g}();L.ResourceType=u},2921:function(Y,L){"use strict";var T=this&&this.__awaiter||function(u,g,M,A){return new(M||(M=Promise))(function(y,h){function C(S){try{w(A.next(S))}catch(P){h(P)}}function v(S){try{w(A.throw(S))}catch(P){h(P)}}function w(S){S.done?y(S.value):function(y){return y instanceof M?y:new M(function(h){h(y)})}(S.value).then(C,v)}w((A=A.apply(u,g||[])).next())})},p=this&&this.__generator||function(u,g){var A,I,y,h,M={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return h={next:C(0),throw:C(1),return:C(2)},"function"==typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h;function C(w){return function(S){return function(w){if(A)throw new TypeError("Generator is already executing.");for(;M;)try{if(A=1,I&&(y=2&w[0]?I.return:w[0]?I.throw||((y=I.return)&&y.call(I),0):I.next)&&!(y=y.call(I,w[1])).done)return y;switch(I=0,y&&(w=[2&w[0],y.value]),w[0]){case 0:case 1:y=w;break;case 4:return M.label++,{value:w[1],done:!1};case 5:M.label++,I=w[1],w=[0];continue;case 7:w=M.ops.pop(),M.trys.pop();continue;default:if(!(y=(y=M.trys).length>0&&y[y.length-1])&&(6===w[0]||2===w[0])){M=0;continue}if(3===w[0]&&(!y||w[1]>y[0]&&w[1]<y[3])){M.label=w[1];break}if(6===w[0]&&M.label<y[1]){M.label=y[1],y=w;break}if(y&&M.label<y[2]){M.label=y[2],M.ops.push(w);break}y[2]&&M.ops.pop(),M.trys.pop();continue}w=g.call(u,M)}catch(S){w=[6,S],I=0}finally{A=y=0}if(5&w[0])throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}([w,S])}}};Object.defineProperty(L,"__esModule",{value:!0});var m=(()=>{return(u=m||(m={})).AMSUpload="AMSUpload",u.AMSDownload="AMSDownload",u.GetFileIds="GetFileIds",u.CreateFileIdProperty="CreateFileIdProperty",u.GetFileMetadata="GetFileMetadata",u.CreateFileMetadataProperty="CreateFileMetadataProperty",m;var u})(),x=function(){function u(g,M){void 0===M&&(M=null),this.logger=M,this.amsClient=g}return u.prototype.uploadFiles=function(g){return T(this,void 0,void 0,function(){var M=this;return p(this,function(A){return[2,Promise.all(g.map(function(I){return T(M,void 0,void 0,function(){return p(this,function(y){return[2,this.uploadFileToAMS(I)]})})}))]})})},u.prototype.downloadFiles=function(g){return T(this,void 0,void 0,function(){var M=this;return p(this,function(A){return[2,Promise.all(g.map(function(I){return T(M,void 0,void 0,function(){return p(this,function(y){return[2,this.downloadFileFromAMS(I)]})})}))]})})},u.prototype.updatePermissions=function(){return T(this,void 0,void 0,function(){return p(this,function(g){return[2,void 0]})})},u.prototype.getFileIds=function(g){var M,A,I;if(g&&(g.amsReferences||g.amsreferences)){null===(M=this.logger)||void 0===M||M.startScenario(m.GetFileIds);try{var y=void 0;return(null==g?void 0:g.amsReferences)&&(y=JSON.parse(null==g?void 0:g.amsReferences)),(null==g?void 0:g.amsreferences)&&(y=JSON.parse(null==g?void 0:g.amsreferences)),null===(A=this.logger)||void 0===A||A.completeScenario(m.GetFileIds),y}catch(C){return void(null===(I=this.logger)||void 0===I||I.failScenario(m.GetFileIds,{ExceptionDetails:JSON.stringify({metadata:""+g,errorObject:""+C})}))}}},u.prototype.createFileIdProperty=function(g){var M,A,I;if(g){null===(M=this.logger)||void 0===M||M.startScenario(m.CreateFileIdProperty);try{var y={amsReferences:JSON.stringify(g),amsreferences:JSON.stringify(g)};return null===(A=this.logger)||void 0===A||A.completeScenario(m.CreateFileIdProperty),y}catch(C){return void(null===(I=this.logger)||void 0===I||I.failScenario(m.CreateFileIdProperty,{ExceptionDetails:JSON.stringify({fileIds:""+g,errorObject:""+C})}))}}},u.prototype.getFileMetadata=function(g){var M,A,I;if(g&&g.amsMetadata){null===(M=this.logger)||void 0===M||M.startScenario(m.GetFileMetadata);try{var y=JSON.parse(null==g?void 0:g.amsMetadata);return null===(A=this.logger)||void 0===A||A.completeScenario(m.GetFileMetadata),y}catch(C){return void(null===(I=this.logger)||void 0===I||I.failScenario(m.GetFileMetadata,{ExceptionDetails:JSON.stringify({metadata:""+g,errorObject:""+C})}))}}},u.prototype.createFileMetadataProperty=function(g){var M,A,I;if(g){null===(M=this.logger)||void 0===M||M.startScenario(m.CreateFileMetadataProperty);try{var y={amsMetadata:JSON.stringify(g)};return null===(A=this.logger)||void 0===A||A.completeScenario(m.CreateFileMetadataProperty),y}catch(C){return void(null===(I=this.logger)||void 0===I||I.failScenario(m.CreateFileMetadataProperty,{ExceptionDetails:JSON.stringify({metadata:""+g,errorObject:""+C})}))}}},u.prototype.createBotAttachment=function(g){return!g||Object.keys(g),null},u.prototype.uploadFileToAMS=function(g){var M,A,I,y,h;return T(this,void 0,void 0,function(){var C,v,S,P,k,O,w;return p(this,function(V){switch(V.label){case 0:if(null===(M=this.logger)||void 0===M||M.startScenario(m.AMSUpload),!g.contentUrl||!g.name)return[3,12];C=void 0,V.label=1;case 1:return V.trys.push([1,3,,4]),[4,this.amsClient.fetchBlob(g.contentUrl)];case 2:return C=V.sent(),[3,4];case 3:return v=V.sent(),w={response:"AMSFetchBlobFailure",errorObject:""+v},null===(A=this.logger)||void 0===A||A.failScenario(m.AMSUpload,{ExceptionDetails:JSON.stringify(w)}),[2,void 0];case 4:S=new File([C],g.name,{type:g.contentType}),P=void 0,V.label=5;case 5:return V.trys.push([5,7,,8]),[4,this.amsClient.createObject(this.amsClient.chatToken.chatId,S)];case 6:return P=V.sent(),[3,8];case 7:return k=V.sent(),w={response:"AMSCreateObjectFailure",errorObject:""+k},null===(I=this.logger)||void 0===I||I.failScenario(m.AMSUpload,{ExceptionDetails:JSON.stringify(w)}),[2,void 0];case 8:return V.trys.push([8,10,,11]),[4,this.amsClient.uploadDocument(P.id,S)];case 9:return V.sent(),[3,11];case 10:return O=V.sent(),w={response:"AMSUploadDocumentFailure",errorObject:""+O},null===(y=this.logger)||void 0===y||y.failScenario(m.AMSUpload,{ExceptionDetails:JSON.stringify(w)}),[2,void 0];case 11:return null===(h=this.logger)||void 0===h||h.completeScenario(m.AMSUpload),[2,{fileId:P.id,metadata:{contentType:g.contentType,fileName:g.name}}];case 12:return[2]}})})},u.prototype.downloadFileFromAMS=function(g){var M,A,I,y;return T(this,void 0,void 0,function(){var h,C,v,S,P,k,w,O;return p(this,function(V){switch(V.label){case 0:if(null===(M=this.logger)||void 0===M||M.startScenario(m.AMSDownload),!(g.fileId&&g.metadata&&g.metadata.fileName))return[3,9];h={id:g.fileId,type:g.metadata.contentType,name:g.metadata.fileName},C=void 0,V.label=1;case 1:return V.trys.push([1,3,,4]),[4,this.amsClient.getViewStatus(h)];case 2:return C=V.sent(),[3,4];case 3:return v=V.sent(),w={response:"AMSGetViewStatusFailure",errorObject:""+v},null===(A=this.logger)||void 0===A||A.failScenario(m.AMSDownload,{ExceptionDetails:JSON.stringify(w)}),[2,void 0];case 4:S=C.view_location,P=void 0,V.label=5;case 5:return V.trys.push([5,7,,8]),[4,this.amsClient.getView(h,S)];case 6:return P=V.sent(),[3,8];case 7:return k=V.sent(),w={response:"AMSGetViewFailure",errorObject:""+k},null===(I=this.logger)||void 0===I||I.failScenario(m.AMSDownload,{ExceptionDetails:JSON.stringify(w)}),[2,void 0];case 8:return O=new File([P],g.metadata.fileName,{type:g.metadata.contentType}),null===(y=this.logger)||void 0===y||y.completeScenario(m.AMSDownload),[2,O];case 9:return[2]}})})},u}();L.default=x},7432:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(813),N=T(3709);L.default=function(x){return function(){return function(g){return function(M){return M&&M.channelData&&(M.channelData.tags||(M.channelData.tags=[]),M.channelData.tags.includes(p.channelIdTag)||M.channelData.tags.push(p.channelIdTag),M.channelData.tags.includes(p.customerMessageTag)||M.channelData.tags.push(p.customerMessageTag),M.channelData.metadata||(M.channelData.metadata={}),M.channelData.metadata.deliveryMode||(M.channelData.metadata.deliveryMode=N.DeliveryMode.Bridged),x.widgetId&&(M.channelData.metadata.widgetId=x.widgetId)),g(M)}}}}},5480:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=function(){return function(){return function(N){return function(m){var x=JSON.parse(JSON.stringify(m));if(x&&x.channelData&&x.channelData.tags){var u=x.channelData.tags;if("string"==typeof u)return N(m);if(u instanceof Array)x.channelData.tags=u.toString();else if("object"==typeof x.channelData.tags)try{x.channelData.tags=JSON.stringify(u)}catch(g){console.error(g)}}return N(x)}}}}},3968:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=function(){return function(){return function(N){return function(m){var x=JSON.parse(JSON.stringify(m));if(x&&x.channelData&&x.channelData.tags){var u=x.channelData.tags;if("string"==typeof u)try{x.channelData.tags=JSON.parse(u)}catch(g){x.channelData.tags=u.split(",")}}return N(x)}}}}},9451:(Y,L)=>{"use strict";var p;Object.defineProperty(L,"__esModule",{value:!0}),(p=L._BondDataType||(L._BondDataType={}))[p._BT_STOP=0]="_BT_STOP",p[p._BT_STOP_BASE=1]="_BT_STOP_BASE",p[p._BT_BOOL=2]="_BT_BOOL",p[p._BT_DOUBLE=8]="_BT_DOUBLE",p[p._BT_STRING=9]="_BT_STRING",p[p._BT_STRUCT=10]="_BT_STRUCT",p[p._BT_LIST=11]="_BT_LIST",p[p._BT_MAP=13]="_BT_MAP",p[p._BT_INT32=16]="_BT_INT32",p[p._BT_INT64=17]="_BT_INT64"},1464:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(6649),N=T(5644),m=T(514);L._Utf8_GetBytes=function(h){for(var C=[],v=0;v<h.length;++v){var w=h.charCodeAt(v);w<128?C.push(w):w<2048?C.push(192|w>>6,128|63&w):w<55296||w>=57344?C.push(224|w>>12,128|w>>6&63,128|63&w):(w=65536+((1023&w)<<10|1023&h.charCodeAt(++v)),C.push(240|w>>18,128|w>>12&63,128|w>>6&63,128|63&w))}return C},L._Base64_GetString=function(h){for(var C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",v=[],w=h.length%3,P=0,k=h.length-w;P<k;P+=3)v.push([C.charAt((U=O=(h[P]<<16)+(h[P+1]<<8)+h[P+2])>>18&63),C.charAt(U>>12&63),C.charAt(U>>6&63),C.charAt(63&U)].join(""));var U;switch(w){case 1:var O;v.push(C.charAt((O=h[h.length-1])>>2)),v.push(C.charAt(O<<4&63)),v.push("==");break;case 2:var V=(h[h.length-2]<<8)+h[h.length-1];v.push(C.charAt(V>>10)),v.push(C.charAt(V>>4&63)),v.push(C.charAt(V<<2&63)),v.push("=")}return v.join("")},L._Varint_GetBytes=function(h){for(var C=[];4294967168&h;)C.push(127&h|128),h>>>=7;return C.push(127&h),C},L._Varint64_GetBytes=function(h){for(var C=h.low,v=h.high,w=[];v||4294967168&C;)w.push(127&C|128),C=(127&v)<<25|C>>>7,v>>>=7;return w.push(127&C),w},L._Double_GetBytes=function(h){if(m.BrowserChecker._IsDataViewSupport()){var C=new DataView(new ArrayBuffer(8));C.setFloat64(0,h,!0);for(var v=[],w=0;w<8;++w)v.push(C.getUint8(w));return v}return N.FloatUtils._ConvertNumberToArray(h,!0)},L._Zigzag_EncodeZigzag32=function(h){return(h=p.Number._ToInt32(h))<<1^h>>31},L._Zigzag_EncodeZigzag64=function(h){var C=h.low,v=h.high,w=v<<1|C>>>31,S=C<<1;2147483648&v&&(w=~w,S=~S);var P=new p.UInt64("0");return P.low=S,P.high=w,P}},5644:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p._ConvertNumberToArray=function(N,m){if(!N)return m?this._doubleZero:this._floatZero;var u=m?52:23,g=(1<<(m?11:8)-1)-1,M=1-g,A=g,I=N<0?1:0;N=Math.abs(N);for(var y=Math.floor(N),h=N-y,C=2*(g+2)+u,v=new Array(C),w=0;w<C;)v[w++]=0;for(w=g+2;w&&y;)v[--w]=y%2,y=Math.floor(y/2);for(w=g+1;w<C-1&&h>0;)(h*=2)>=1?(v[++w]=1,--h):v[++w]=0;for(var S=0;S<C&&!v[S];)S++;var P=g+1-S,k=S+u;if(v[k+1]){for(w=k;w>S&&(v[w]=1-v[w],!v);--w);w===S&&++P}if(P>A||y)return I?m?this._doubleNegInifinity:this._floatNegInifinity:m?this._doubleInifinity:this._floatInifinity;if(P<M)return m?this._doubleZero:this._floatZero;if(m){var O=0;for(w=0;w<20;++w)O=O<<1|v[++S];for(var V=0;w<52;++w)V=V<<1|v[++S];return[255&V,V>>8&255,V>>16&255,V>>>24,255&(O=I<<31|2147483647&(O|=P+g<<20)),O>>8&255,O>>16&255,O>>>24]}var B=0;for(w=0;w<23;++w)B=B<<1|v[++S];return[255&(B=I<<31|2147483647&(B|=P+g<<23)),B>>8&255,B>>16&255,B>>>24]},p._floatZero=[0,0,0,0],p._doubleZero=[0,0,0,0,0,0,0,0],p._floatInifinity=[0,0,128,127],p._floatNegInifinity=[0,0,128,255],p._doubleInifinity=[0,0,0,0,0,0,240,127],p._doubleNegInifinity=[0,0,0,0,0,0,240,255],p}();L.FloatUtils=T},67:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(6649),N=function(){function m(){this._buffer=[]}return m.prototype._WriteByte=function(x){this._buffer.push(p.Number._ToByte(x))},m.prototype._Write=function(x,u,g){for(;g--;)this._WriteByte(x[u++])},m.prototype._GetBuffer=function(){return this._buffer},m}();L.MemoryStream=N},4356:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(9451);L._BondDataType=p._BondDataType;var N=T(1464);L._Encoding=N;var m=T(67);L.IO=m;var x=T(6649);L.Int64=x.Int64,L.UInt64=x.UInt64,L.Number=x.Number;var u=function(){function g(M){this._stream=M}return g.prototype._WriteBlob=function(M){this._stream._Write(M,0,M.length)},g.prototype._WriteBool=function(M){this._stream._WriteByte(M?1:0)},g.prototype._WriteContainerBegin=function(M,A){this._WriteUInt8(A),this._WriteUInt32(M)},g.prototype._WriteMapContainerBegin=function(M,A,I){this._WriteUInt8(A),this._WriteUInt8(I),this._WriteUInt32(M)},g.prototype._WriteDouble=function(M){var A=N._Double_GetBytes(M);this._stream._Write(A,0,A.length)},g.prototype._WriteFieldBegin=function(M,A,I){A<=5?this._stream._WriteByte(M|A<<5):A<=255?(this._stream._WriteByte(192|M),this._stream._WriteByte(A)):(this._stream._WriteByte(224|M),this._stream._WriteByte(A),this._stream._WriteByte(A>>8))},g.prototype._WriteInt32=function(M){M=N._Zigzag_EncodeZigzag32(M),this._WriteUInt32(M)},g.prototype._WriteInt64=function(M){this._WriteUInt64(N._Zigzag_EncodeZigzag64(M))},g.prototype._WriteString=function(M){if(""===M)this._WriteUInt32(0);else{var A=N._Utf8_GetBytes(M);this._WriteUInt32(A.length),this._stream._Write(A,0,A.length)}},g.prototype._WriteStructEnd=function(M){this._WriteUInt8(M?p._BondDataType._BT_STOP_BASE:p._BondDataType._BT_STOP)},g.prototype._WriteUInt32=function(M){var A=N._Varint_GetBytes(x.Number._ToUInt32(M));this._stream._Write(A,0,A.length)},g.prototype._WriteUInt64=function(M){var A=N._Varint64_GetBytes(M);this._stream._Write(A,0,A.length)},g.prototype._WriteUInt8=function(M){this._stream._WriteByte(x.Number._ToUInt8(M))},g}();L.CompactBinaryProtocolWriter=u},6649:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function m(x){this.low=0,this.high=0,this.low=parseInt(x,10),this.low<0&&(this.high=-1)}return m.prototype._Equals=function(x){var u=new m(x);return this.low===u.low&&this.high===u.high},m}();L.Int64=T;var p=function(){function m(x){this.low=0,this.high=0,this.low=parseInt(x,10)}return m.prototype._Equals=function(x){var u=new m(x);return this.low===u.low&&this.high===u.high},m}();L.UInt64=p;var N=function(){function m(){}return m._ToByte=function(x){return this._ToUInt8(x)},m._ToUInt8=function(x){return 255&x},m._ToInt32=function(x){return 2147483647&x|2147483648&x},m._ToUInt32=function(x){return 4294967295&x},m}();L.Number=N},514:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p._IsDataViewSupport=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},p}();L.BrowserChecker=T},4501:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(N){this.clockSkewRefreshDurationInMins=N,this._reset()}return p.prototype.allowRequestSending=function(){return this._isFirstRequest&&!this._clockSkewSet?(this._isFirstRequest=!1,this._allowRequestSending=!1,!0):this._allowRequestSending},p.prototype.shouldAddClockSkewHeaders=function(){return this._shouldAddClockSkewHeaders},p.prototype.getClockSkewHeaderValue=function(){return this._clockSkewHeaderValue},p.prototype.setClockSkew=function(N){this._clockSkewSet||(N?this._clockSkewHeaderValue=N:this._shouldAddClockSkewHeaders=!1,this._clockSkewSet=!0,this._allowRequestSending=!0)},p.prototype._reset=function(){var N=this;this._isFirstRequest=!0,this._clockSkewSet=!1,this._allowRequestSending=!0,this._shouldAddClockSkewHeaders=!0,this._clockSkewHeaderValue="use-collector-delta",this.clockSkewRefreshDurationInMins>0&&setTimeout(function(){return N._reset()},6e4*this.clockSkewRefreshDurationInMins)},p}();L.default=T},7190:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=function(){function N(){this._killedTokenDictionary={}}return N.prototype.setKillSwitchTenants=function(m,x){if(m&&x)try{var u=m.split(",");if("this-request-only"===x)return u;for(var g=1e3*parseInt(x,10),M=0;M<u.length;++M)this._killedTokenDictionary[u[M]]=Date.now()+g}catch(A){return[]}return[]},N.prototype.isTenantKilled=function(m){return void 0!==this._killedTokenDictionary[m]&&this._killedTokenDictionary[m]>Date.now()||(delete this._killedTokenDictionary[m],!1)},N}();L.default=p},2551:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.addNotificationListener=function(N){this.listeners.push(N)},p.removeNotificationListener=function(N){for(var m=this.listeners.indexOf(N);m>-1;)this.listeners.splice(m,1),m=this.listeners.indexOf(N)},p.eventsSent=function(N){for(var m=this,x=function(M){u.listeners[M].eventsSent&&setTimeout(function(){return m.listeners[M].eventsSent(N)},0)},u=this,g=0;g<this.listeners.length;++g)x(g)},p.eventsDropped=function(N,m){for(var x=this,u=function(A){g.listeners[A].eventsDropped&&setTimeout(function(){return x.listeners[A].eventsDropped(N,m)},0)},g=this,M=0;M<this.listeners.length;++M)u(M)},p.eventsRetrying=function(N){for(var m=this,x=function(M){u.listeners[M].eventsRetrying&&setTimeout(function(){return m.listeners[M].eventsRetrying(N)},0)},u=this,g=0;g<this.listeners.length;++g)x(g)},p.eventsRejected=function(N,m){for(var x=this,u=function(A){g.listeners[A].eventsRejected&&setTimeout(function(){return x.listeners[A].eventsRejected(N,m)},0)},g=this,M=0;M<this.listeners.length;++M)u(M)},p.listeners=[],p}();L.default=T},2659:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(676),N=function(){function m(x,u){this._outboundQueue=x,this._maxNumberOfEvents=u,this._currentBatch={},this._currentNumEventsInBatch=0}return m.prototype.addEventToBatch=function(x){if(x.priority===p.AWTEventPriority.Immediate_sync){var u={};return u[x.apiKey]=[x],u}return this._currentNumEventsInBatch>=this._maxNumberOfEvents&&this.flushBatch(),void 0===this._currentBatch[x.apiKey]&&(this._currentBatch[x.apiKey]=[]),this._currentBatch[x.apiKey].push(x),this._currentNumEventsInBatch++,null},m.prototype.flushBatch=function(){this._currentNumEventsInBatch>0&&(this._outboundQueue.push(this._currentBatch),this._currentBatch={},this._currentNumEventsInBatch=0)},m.prototype.hasBatch=function(){return this._currentNumEventsInBatch>0},m}();L.default=N},7270:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var x=function(){function u(){}return u.shouldRetryForStatus=function(g){return!(g>=300&&g<500&&408!==g||501===g||505===g)},u.getMillisToBackoffForRetry=function(g){var M,y=Math.floor(1200*Math.random())+2400;return M=Math.pow(4,g)*y,Math.min(M,12e4)},u}();L.default=x},6064:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(4356),N=T(676),m=T(2551),x=T(5593),u=2936012,g=function(){function M(){}return M.getPayloadBlob=function(A,I){var h,y=!1,C=new p.IO.MemoryStream,v=new p.CompactBinaryProtocolWriter(C);for(var w in v._WriteFieldBegin(p._BondDataType._BT_MAP,3,null),v._WriteMapContainerBegin(I,p._BondDataType._BT_STRING,p._BondDataType._BT_LIST),A)if(y)h||(h={}),h[w]=A[w],delete A[w];else if(A.hasOwnProperty(w)){v._WriteString(w);var S=A[w];v._WriteContainerBegin(1,p._BondDataType._BT_STRUCT),v._WriteFieldBegin(p._BondDataType._BT_STRING,2,null),v._WriteString("act_default_source"),v._WriteFieldBegin(p._BondDataType._BT_STRING,5,null),v._WriteString(x.newGuid()),v._WriteFieldBegin(p._BondDataType._BT_INT64,6,null),v._WriteInt64(x.numberToBondInt64(Date.now())),v._WriteFieldBegin(p._BondDataType._BT_LIST,8,null);var P=C._GetBuffer().length+1;v._WriteContainerBegin(A[w].length,p._BondDataType._BT_STRUCT);for(var k=C._GetBuffer().length-P,O=0;O<S.length;++O){var V=C._GetBuffer().length;if(this.writeEvent(S[O],v),C._GetBuffer().length-V>u)m.default.eventsRejected([S[O]],N.AWTEventsRejectedReason.SizeLimitExceeded),S.splice(O--,1),C._GetBuffer().splice(V),this._addNewDataPackageSize(S.length,C,k,P);else if(C._GetBuffer().length>u){C._GetBuffer().splice(V),h||(h={}),A[w]=S.splice(0,O),h[w]=S,this._addNewDataPackageSize(A[w].length,C,k,P),y=!0;break}}v._WriteStructEnd(!1)}return v._WriteStructEnd(!1),{payloadBlob:C._GetBuffer(),remainingRequest:h}},M._addNewDataPackageSize=function(A,I,y,h){for(var C=p._Encoding._Varint_GetBytes(p.Number._ToUInt32(A)),v=0;v<y;++v){if(!(v<C.length)){I._GetBuffer().slice(h+v,y-v);break}I._GetBuffer()[h+v]=C[v]}},M.writeEvent=function(A,I){I._WriteFieldBegin(p._BondDataType._BT_STRING,1,null),I._WriteString(A.id),I._WriteFieldBegin(p._BondDataType._BT_INT64,3,null),I._WriteInt64(x.numberToBondInt64(A.timestamp)),I._WriteFieldBegin(p._BondDataType._BT_STRING,5,null),I._WriteString(A.type),I._WriteFieldBegin(p._BondDataType._BT_STRING,6,null),I._WriteString(A.name);var y={},h=0,C={},v=0,w={},S=0,P={},k=0,O={},V=0,U={},B=0,H={},W=0;for(var te in A.properties)if(A.properties.hasOwnProperty(te))if(($=A.properties[te]).cc>0)H[te]=$,W++;else if($.pii>0)U[te]=$,B++;else switch($.type){case N.AWTPropertyType.String:y[te]=$.value,h++;break;case N.AWTPropertyType.Int64:C[te]=$.value,v++;break;case N.AWTPropertyType.Double:w[te]=$.value,S++;break;case N.AWTPropertyType.Boolean:P[te]=$.value,k++;break;case N.AWTPropertyType.Date:O[te]=$.value,V++}if(h)for(var te in I._WriteFieldBegin(p._BondDataType._BT_MAP,13,null),I._WriteMapContainerBegin(h,p._BondDataType._BT_STRING,p._BondDataType._BT_STRING),y)if(y.hasOwnProperty(te)){var pe=y[te];I._WriteString(te),I._WriteString(pe.toString())}if(B)for(var te in I._WriteFieldBegin(p._BondDataType._BT_MAP,30,null),I._WriteMapContainerBegin(B,p._BondDataType._BT_STRING,p._BondDataType._BT_STRUCT),U)if(U.hasOwnProperty(te)){var $=U[te];I._WriteString(te),I._WriteFieldBegin(p._BondDataType._BT_INT32,1,null),I._WriteInt32(1),I._WriteFieldBegin(p._BondDataType._BT_INT32,2,null),I._WriteInt32($.pii),I._WriteFieldBegin(p._BondDataType._BT_STRING,3,null),I._WriteString($.value.toString()),I._WriteStructEnd(!1)}if(k)for(var te in I._WriteFieldBegin(p._BondDataType._BT_MAP,31,null),I._WriteMapContainerBegin(k,p._BondDataType._BT_STRING,p._BondDataType._BT_BOOL),P)P.hasOwnProperty(te)&&(pe=P[te],I._WriteString(te),I._WriteBool(pe));if(V)for(var te in I._WriteFieldBegin(p._BondDataType._BT_MAP,32,null),I._WriteMapContainerBegin(V,p._BondDataType._BT_STRING,p._BondDataType._BT_INT64),O)O.hasOwnProperty(te)&&(pe=O[te],I._WriteString(te),I._WriteInt64(x.numberToBondInt64(pe)));if(v)for(var te in I._WriteFieldBegin(p._BondDataType._BT_MAP,33,null),I._WriteMapContainerBegin(v,p._BondDataType._BT_STRING,p._BondDataType._BT_INT64),C)C.hasOwnProperty(te)&&(pe=C[te],I._WriteString(te),I._WriteInt64(x.numberToBondInt64(pe)));if(S)for(var te in I._WriteFieldBegin(p._BondDataType._BT_MAP,34,null),I._WriteMapContainerBegin(S,p._BondDataType._BT_STRING,p._BondDataType._BT_DOUBLE),w)w.hasOwnProperty(te)&&(pe=w[te],I._WriteString(te),I._WriteDouble(pe));if(W)for(var te in I._WriteFieldBegin(p._BondDataType._BT_MAP,36,null),I._WriteMapContainerBegin(W,p._BondDataType._BT_STRING,p._BondDataType._BT_STRUCT),H)H.hasOwnProperty(te)&&($=H[te],I._WriteString(te),I._WriteFieldBegin(p._BondDataType._BT_INT32,1,null),I._WriteInt32($.cc),I._WriteFieldBegin(p._BondDataType._BT_STRING,2,null),I._WriteString($.value.toString()),I._WriteStructEnd(!1));I._WriteStructEnd(!1)},M.base64Encode=function(A){return p._Encoding._Base64_GetString(A)},M}();L.default=g},5816:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(5593),N=T(2551),m=T(676),u=function(){function g(){}return g.initialize=function(M){var A=this;this._sendStats=M,this._isInitalized=!0,N.default.addNotificationListener({eventsSent:function(I){A._addStat("records_sent_count",I.length,I[0].apiKey)},eventsDropped:function(I,y){switch(y){case m.AWTEventsDroppedReason.NonRetryableStatus:A._addStat("d_send_fail",I.length,I[0].apiKey),A._addStat("records_dropped_count",I.length,I[0].apiKey);break;case m.AWTEventsDroppedReason.MaxRetryLimit:A._addStat("d_retry_limit",I.length,I[0].apiKey),A._addStat("records_dropped_count",I.length,I[0].apiKey);break;case m.AWTEventsDroppedReason.QueueFull:A._addStat("d_queue_full",I.length,I[0].apiKey)}},eventsRejected:function(I,y){switch(y){case m.AWTEventsRejectedReason.InvalidEvent:A._addStat("r_inv",I.length,I[0].apiKey);break;case m.AWTEventsRejectedReason.KillSwitch:A._addStat("r_kl",I.length,I[0].apiKey);break;case m.AWTEventsRejectedReason.SizeLimitExceeded:A._addStat("r_size",I.length,I[0].apiKey)}A._addStat("r_count",I.length,I[0].apiKey)},eventsRetrying:null}),setTimeout(function(){return A.flush()},6e4)},g.teardown=function(){this._isInitalized&&(this.flush(),this._isInitalized=!1)},g.eventReceived=function(M){g._addStat("records_received_count",1,M)},g.flush=function(){var M=this;if(this._isInitalized){for(var A in this._stats)this._stats.hasOwnProperty(A)&&this._sendStats(this._stats[A],A);this._stats={},setTimeout(function(){return M.flush()},6e4)}},g._addStat=function(M,A,I){if(this._isInitalized&&I!==p.StatsApiKey){var y=p.getTenantId(I);this._stats[y]||(this._stats[y]={}),this._stats[y][M]=this._stats[y][M]?this._stats[y][M]+A:A}},g._isInitalized=!1,g._stats={},g}();L.default=u},676:(Y,L)=>{"use strict";var g;Object.defineProperty(L,"__esModule",{value:!0}),(g=L.AWTPropertyType||(L.AWTPropertyType={}))[g.Unspecified=0]="Unspecified",g[g.String=1]="String",g[g.Int64=2]="Int64",g[g.Double=3]="Double",g[g.Boolean=4]="Boolean",g[g.Date=5]="Date",function(g){g[g.NotSet=0]="NotSet",g[g.DistinguishedName=1]="DistinguishedName",g[g.GenericData=2]="GenericData",g[g.IPV4Address=3]="IPV4Address",g[g.IPv6Address=4]="IPv6Address",g[g.MailSubject=5]="MailSubject",g[g.PhoneNumber=6]="PhoneNumber",g[g.QueryString=7]="QueryString",g[g.SipAddress=8]="SipAddress",g[g.SmtpAddress=9]="SmtpAddress",g[g.Identity=10]="Identity",g[g.Uri=11]="Uri",g[g.Fqdn=12]="Fqdn",g[g.IPV4AddressLegacy=13]="IPV4AddressLegacy"}(L.AWTPiiKind||(L.AWTPiiKind={})),function(g){g[g.NotSet=0]="NotSet",g[g.GenericContent=1]="GenericContent"}(L.AWTCustomerContentKind||(L.AWTCustomerContentKind={})),function(g){g[g.Low=1]="Low",g[g.Normal=2]="Normal",g[g.High=3]="High",g[g.Immediate_sync=5]="Immediate_sync"}(L.AWTEventPriority||(L.AWTEventPriority={})),function(g){g[g.NonRetryableStatus=1]="NonRetryableStatus",g[g.QueueFull=3]="QueueFull",g[g.MaxRetryLimit=4]="MaxRetryLimit"}(L.AWTEventsDroppedReason||(L.AWTEventsDroppedReason={})),function(g){g[g.InvalidEvent=1]="InvalidEvent",g[g.SizeLimitExceeded=2]="SizeLimitExceeded",g[g.KillSwitch=3]="KillSwitch"}(L.AWTEventsRejectedReason||(L.AWTEventsRejectedReason={}))},5593:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(6649),N=T(676),m=/[xy]/g,g=null;L.EventNameAndTypeRegex=/^[a-zA-Z]([a-zA-Z0-9]|_){2,98}[a-zA-Z0-9]$/,L.EventNameDotRegex=/\./g,L.PropertyNameRegex=/^[a-zA-Z](([a-zA-Z0-9|_|\.]){0,98}[a-zA-Z0-9])?$/,L.StatsApiKey="a387cfcf60114a43a7699f9fbb49289e-9bceb9fe-1c06-460f-96c5-6a0b247358bc-7238";var M=g,A=g,I=g;function C(i){return"string"==typeof i}function v(i){return"number"==typeof i}function w(i){return"boolean"==typeof i}function S(i){return i instanceof Date}function P(i){return 1e4*(i+621355968e5)}function $(){return!("undefined"==typeof navigator||!navigator.product)&&"ReactNative"===navigator.product}function pe(){return"object"==typeof self&&"ServiceWorkerGlobalScope"===self.constructor.name}function R(i){return i<10?"0"+i:i.toString()}function d(i){return void 0===i||i===g||""===i}L.numberToBondInt64=function(i){var b=new p.Int64("0");return b.low=4294967295&i,b.high=Math.floor(i/4294967296),b},L.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(m,function(i){var b=16*Math.random()|0;return("x"===i?b:3&b|8).toString(16)})},L.isString=C,L.isNumber=v,L.isBoolean=w,L.isDate=S,L.msToTicks=P,L.getTenantId=function(i){var b=i.indexOf("-");return b>-1?i.substring(0,b):""},L.isBeaconsSupported=function(){return M===g&&(M="undefined"!=typeof navigator&&Boolean(navigator.sendBeacon)),M},L.isUint8ArrayAvailable=function(){return A===g&&(A="undefined"!=typeof Uint8Array&&!function(){if("undefined"!=typeof navigator&&navigator.userAgent){var i=navigator.userAgent.toLowerCase();if((i.indexOf("safari")>=0||i.indexOf("firefox")>=0)&&i.indexOf("chrome")<0)return!0}return!1}()&&!$()),A},L.isPriority=function(i){return!(!v(i)||!(i>=1&&i<=3||5===i))},L.sanitizeProperty=function(i,b){return!L.PropertyNameRegex.test(i)||d(b)||(d(b.value)&&(b={value:b,type:N.AWTPropertyType.Unspecified}),b.type=function(i,b){switch(b=function(i){return!!(v(i)&&i>=0&&i<=4)}(b)?b:N.AWTPropertyType.Unspecified){case N.AWTPropertyType.Unspecified:return function(i){switch(typeof i){case"string":return N.AWTPropertyType.String;case"boolean":return N.AWTPropertyType.Boolean;case"number":return N.AWTPropertyType.Double;case"object":return S(i)?N.AWTPropertyType.Date:g}return g}(i);case N.AWTPropertyType.String:return C(i)?b:g;case N.AWTPropertyType.Boolean:return w(i)?b:g;case N.AWTPropertyType.Date:return S(i)&&NaN!==i.getTime()?b:g;case N.AWTPropertyType.Int64:return v(i)&&i%1==0?b:g;case N.AWTPropertyType.Double:return v(i)?b:g}return g}(b.value,b.type),!b.type)||(S(b.value)&&(b.value=P(b.value.getTime())),b.pii>0&&b.cc>0)?g:b.pii?function(i){return!!(v(i)&&i>=0&&i<=13)}(b.pii)?b:g:b.cc?function(i){return!!(v(i)&&i>=0&&i<=1)}(b.cc)?b:g:b},L.getISOString=function(i){return i.getUTCFullYear()+"-"+R(i.getUTCMonth()+1)+"-"+R(i.getUTCDate())+"T"+R(i.getUTCHours())+":"+R(i.getUTCMinutes())+":"+R(i.getUTCSeconds())+"."+function(i){return i<10?"00"+i:i<100?"0"+i:i.toString()}(i.getUTCMilliseconds())+"Z"},L.useXDomainRequest=function(){if(I===g){var i=new XMLHttpRequest;I=void 0===i.withCredentials&&"undefined"!=typeof XDomainRequest}return I},L.useFetchRequest=function(){return $()||pe()},L.isReactNative=$,L.isServiceWorkerGlobalScope=pe},4094:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(5593),N="MicrosoftApplicationsTelemetryDeviceId",m="MicrosoftApplicationsTelemetryFirstLaunchTime",g_WIN=/(windows|win32)/i,g_WINRT=/ arm;/i,g_WINPHONE=/windows\sphone\s\d+\.\d+/i,g_OSX=/(macintosh|mac os x)/i,g_IOS=/(iPad|iPhone|iPod)(?=.*like Mac OS X)/i,g_LINUX=/(linux|joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)/i,g_ANDROID=/android/i,g_CROS=/CrOS/i,M={5.1:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1","10.0":"10"},A="([\\d,.]+)",y="Unknown",h="undefined",C=function(){function v(){}return v.addPropertyStorageOverride=function(w){return!!w&&(this._propertyStorage=w,!0)},v.autoCollect=function(w,S,P){if(this._semanticContext=w,this._disableCookies=S,this._autoCollect(),!P&&typeof navigator!==h&&(P=navigator.userAgent||""),this._autoCollectFromUserAgent(P),this._disableCookies&&!this._propertyStorage)return this._deleteCookie(N),void this._deleteCookie(m);(this._propertyStorage||this._areCookiesAvailable&&!this._disableCookies)&&this._autoCollectDeviceId()},v.checkAndSaveDeviceId=function(w){if(w){var S=this._getData(N),P=this._getData(m);S!==w&&(P=p.getISOString(new Date)),this._saveData(N,w),this._saveData(m,P),this._setFirstLaunchTime(P)}},v._autoCollectDeviceId=function(){var w=this._getData(N);w||(w=p.newGuid()),this._semanticContext.setDeviceId(w)},v._autoCollect=function(){typeof document!==h&&document.documentElement&&this._semanticContext.setAppLanguage(document.documentElement.lang),typeof navigator!==h&&this._semanticContext.setUserLanguage(navigator.userLanguage||navigator.language);var w=(new Date).getTimezoneOffset(),S=w%60,P=(w-S)/60,k="+";P>0&&(k="-"),P=Math.abs(P),S=Math.abs(S),this._semanticContext.setUserTimeZone(k+(P<10?"0"+P:P.toString())+":"+(S<10?"0"+S:S.toString()))},v._autoCollectFromUserAgent=function(w){if(w){var S=this._getBrowserName(w);this._semanticContext.setDeviceBrowserName(S),this._semanticContext.setDeviceBrowserVersion(this._getBrowserVersion(w,S));var P=this._getOsName(w);this._semanticContext.setDeviceOsName(P),this._semanticContext.setDeviceOsVersion(this._getOsVersion(w,P))}},v._getBrowserName=function(w){return this._userAgentContainsString("OPR/",w)?"Opera":this._userAgentContainsString("PhantomJS",w)?"PhantomJS":this._userAgentContainsString("Edge",w)||this._userAgentContainsString("Edg",w)?"Edge":this._userAgentContainsString("Electron",w)?"Electron":this._userAgentContainsString("Chrome",w)?"Chrome":this._userAgentContainsString("Trident",w)?"MSIE":this._userAgentContainsString("Firefox",w)?"Firefox":this._userAgentContainsString("Safari",w)?"Safari":this._userAgentContainsString("SkypeShell",w)?"SkypeShell":y},v._setFirstLaunchTime=function(w){if(!isNaN(w)){var S=new Date;S.setTime(parseInt(w,10)),w=p.getISOString(S)}this.firstLaunchTime=w},v._userAgentContainsString=function(w,S){return S.indexOf(w)>-1},v._getBrowserVersion=function(w,S){if("MSIE"===S)return this._getIeVersion(w);if("Edge"===S){var P=this._getOtherVersion(S,w);return P===y?this._getOtherVersion("Edg",w):P}return this._getOtherVersion(S,w)},v._getIeVersion=function(w){var S=w.match(new RegExp("MSIE "+A));if(S)return S[1];var P=w.match(new RegExp("rv:"+A));return P?P[1]:void 0},v._getOtherVersion=function(w,S){"Safari"===w&&(w="Version");var P=S.match(new RegExp(w+"/"+A));return P?P[1]:y},v._getOsName=function(w){return w.match(g_WINPHONE)?"Windows Phone":w.match(g_WINRT)?"Windows RT":w.match(g_IOS)?"iOS":w.match(g_ANDROID)?"Android":w.match(g_LINUX)?"Linux":w.match(g_OSX)?"Mac OS X":w.match(g_WIN)?"Windows":w.match(g_CROS)?"Chrome OS":y},v._getOsVersion=function(w,S){return"Windows"===S?this._getGenericOsVersion(w,"Windows NT"):"Android"===S?this._getGenericOsVersion(w,S):"Mac OS X"===S?this._getMacOsxVersion(w):y},v._getGenericOsVersion=function(w,S){var P=w.match(new RegExp(S+" "+A));return P?M[P[1]]?M[P[1]]:P[1]:y},v._getMacOsxVersion=function(w){var S=w.match(new RegExp("Mac OS X ([\\d,_,.]+)"));if(S){var P=S[1].replace(/_/g,".");if(P){var k=this._getDelimiter(P);return k?P.split(k)[0]:P}}return y},v._getDelimiter=function(w){return w.indexOf(".")>-1?".":w.indexOf("_")>-1?"_":null},v._saveData=function(w,S){if(this._propertyStorage)this._propertyStorage.setProperty(w,S);else if(this._areCookiesAvailable){var P=new Date;P.setTime(P.getTime()+31536e6);var k="expires="+P.toUTCString();document.cookie=w+"="+S+"; "+k}},v._getData=function(w){if(this._propertyStorage)return this._propertyStorage.getProperty(w)||"";if(this._areCookiesAvailable){w+="=";for(var S=document.cookie.split(";"),P=0;P<S.length;P++){for(var k=S[P],O=0;" "===k.charAt(O);)O++;if(0===(k=k.substring(O)).indexOf(w))return k.substring(w.length,k.length)}}return""},v._deleteCookie=function(w){this._areCookiesAvailable&&(document.cookie=w+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;")},v._disableCookies=!1,v._areCookiesAvailable=typeof document!==h&&typeof document.cookie!==h,v}();L.default=C},58:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(5593),N=T(676),m=function(){function x(u){this._event={name:"",properties:{}},u&&this.setName(u)}return x.prototype.setName=function(u){this._event.name=u},x.prototype.getName=function(){return this._event.name},x.prototype.setType=function(u){this._event.type=u},x.prototype.getType=function(){return this._event.type},x.prototype.setTimestamp=function(u){this._event.timestamp=u},x.prototype.getTimestamp=function(){return this._event.timestamp},x.prototype.setEventPriority=function(u){this._event.priority=u},x.prototype.getEventPriority=function(){return this._event.priority},x.prototype.setProperty=function(u,g,M){void 0===M&&(M=N.AWTPropertyType.Unspecified);var A={value:g,type:M,pii:N.AWTPiiKind.NotSet,cc:N.AWTCustomerContentKind.NotSet};null!==(A=p.sanitizeProperty(u,A))?this._event.properties[u]=A:delete this._event.properties[u]},x.prototype.setPropertyWithPii=function(u,g,M,A){void 0===A&&(A=N.AWTPropertyType.Unspecified);var I={value:g,type:A,pii:M,cc:N.AWTCustomerContentKind.NotSet};null!==(I=p.sanitizeProperty(u,I))?this._event.properties[u]=I:delete this._event.properties[u]},x.prototype.setPropertyWithCustomerContent=function(u,g,M,A){void 0===A&&(A=N.AWTPropertyType.Unspecified);var I={value:g,type:A,pii:N.AWTPiiKind.NotSet,cc:M};null!==(I=p.sanitizeProperty(u,I))?this._event.properties[u]=I:delete this._event.properties[u]},x.prototype.getPropertyMap=function(){return this._event.properties},x.prototype.getEvent=function(){return this._event},x}();L.default=m},9449:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(676),N=T(6064),m=T(7270),x=T(7190),u=T(4501),g=T(8779),M=T(5593),A=T(2551),I=T(4023),C="POST",v=function(){function w(S,P,k,O,V){var U=this;this._requestQueue=S,this._queueManager=k,this._httpInterface=O,this._urlString="?qsp=true&content-type=application%2Fbond-compact-binary&client-id=NO_AUTH&sdk-version="+g.FullVersionString,this._killSwitch=new x.default,this._paused=!1,this._useBeacons=!1,this._activeConnections=0,this._clockSkewManager=new u.default(V),M.isUint8ArrayAvailable()||(this._urlString+="&content-encoding=base64"),this._urlString=P+this._urlString,this._httpInterface||(this._useBeacons=!M.isReactNative(),this._httpInterface={sendPOST:function(B,H,W,te,$,pe){try{if(M.useFetchRequest())fetch(B,{body:H,method:C}).then(function(s){var l={};s.headers&&s.headers.forEach(function(a,f){l[f]=a}),$(s.status,l)}).catch(function(s){te(0,{})});else if(M.useXDomainRequest()){var R=new XDomainRequest;R.open(C,B),R.onload=function(){$(200,null)},R.onerror=function(){te(400,null)},R.ontimeout=function(){W(500,null)},R.send(H)}else{var r=new XMLHttpRequest;r.open(C,B,!pe),r.onload=function(){$(r.status,U._convertAllHeadersToMap(r.getAllResponseHeaders()))},r.onerror=function(){te(r.status,U._convertAllHeadersToMap(r.getAllResponseHeaders()))},r.ontimeout=function(){W(r.status,U._convertAllHeadersToMap(r.getAllResponseHeaders()))},r.send(H)}}catch(s){te(400,null)}}})}return w.prototype.hasIdleConnection=function(){return this._activeConnections<2},w.prototype.sendQueuedRequests=function(){for(;this.hasIdleConnection()&&!this._paused&&this._requestQueue.length>0&&this._clockSkewManager.allowRequestSending();)this._activeConnections++,this._sendRequest(this._requestQueue.shift(),0,!1);this.hasIdleConnection()&&I.default.scheduleTimer()},w.prototype.isCompletelyIdle=function(){return 0===this._activeConnections},w.prototype.teardown=function(){for(;this._requestQueue.length>0;)this._sendRequest(this._requestQueue.shift(),0,!0)},w.prototype.pause=function(){this._paused=!0},w.prototype.resume=function(){this._paused=!1,this.sendQueuedRequests()},w.prototype.removeQueuedRequests=function(){this._requestQueue.length=0},w.prototype.sendSynchronousRequest=function(S,P){this._paused&&(S[P][0].priority=p.AWTEventPriority.High),this._activeConnections++,this._sendRequest(S,0,!1,!0)},w.prototype._sendRequest=function(S,P,k,O){var V=this;void 0===O&&(O=!1);try{if(this._paused)return this._activeConnections--,void this._queueManager.addBackRequest(S);var U=0,B="";for(var H in S)S.hasOwnProperty(H)&&(this._killSwitch.isTenantKilled(H)?(A.default.eventsRejected(S[H],p.AWTEventsRejectedReason.KillSwitch),delete S[H]):(B.length>0&&(B+=","),B+=H,U++));if(U>0){var W=N.default.getPayloadBlob(S,U);W.remainingRequest&&this._requestQueue.push(W.remainingRequest);var te=this._urlString+"&x-apikey="+B+"&client-time-epoch-millis="+Date.now().toString();this._clockSkewManager.shouldAddClockSkewHeaders()&&(te=te+"&time-delta-to-apply-millis="+this._clockSkewManager.getClockSkewHeaderValue());var $;for(var H in $=M.isUint8ArrayAvailable()?new Uint8Array(W.payloadBlob):N.default.base64Encode(W.payloadBlob),S)if(S.hasOwnProperty(H))for(var pe=0;pe<S[H].length;++pe)S[H][pe].sendAttempt>0?S[H][pe].sendAttempt++:S[H][pe].sendAttempt=1;if(this._useBeacons&&k&&M.isBeaconsSupported()&&navigator.sendBeacon(te,$))return;this._httpInterface.sendPOST(te,$,function(R,r){V._retryRequestIfNeeded(R,r,S,U,B,P,k,O)},function(R,r){V._retryRequestIfNeeded(R,r,S,U,B,P,k,O)},function(R,r){V._retryRequestIfNeeded(R,r,S,U,B,P,k,O)},k||O)}else k||this._handleRequestFinished(!1,{},k,O)}catch(R){this._handleRequestFinished(!1,{},k,O)}},w.prototype._retryRequestIfNeeded=function(S,P,k,O,V,U,B,H){var W=this,te=!0;if(void 0!==S){if(P){var $=this._killSwitch.setKillSwitchTenants(P["kill-tokens"],P["kill-duration-seconds"]);this._clockSkewManager.setClockSkew(P["time-delta-millis"]);for(var pe=0;pe<$.length;++pe)A.default.eventsRejected(k[$[pe]],p.AWTEventsRejectedReason.KillSwitch),delete k[$[pe]],O--}else this._clockSkewManager.setClockSkew(null);if(200===S)return void this._handleRequestFinished(!0,k,B,H);(!m.default.shouldRetryForStatus(S)||O<=0)&&(te=!1)}if(te)if(H)this._activeConnections--,k[V][0].priority=p.AWTEventPriority.High,this._queueManager.addBackRequest(k);else if(U<1){for(var R in k)k.hasOwnProperty(R)&&A.default.eventsRetrying(k[R]);setTimeout(function(){return W._sendRequest(k,U+1,!1)},m.default.getMillisToBackoffForRetry(U))}else this._activeConnections--,I.default.backOffTransmission(),this._queueManager.addBackRequest(k);else this._handleRequestFinished(!1,k,B,H)},w.prototype._handleRequestFinished=function(S,P,k,O){for(var V in S&&I.default.clearBackOff(),P)P.hasOwnProperty(V)&&(S?A.default.eventsSent(P[V]):A.default.eventsDropped(P[V],p.AWTEventsDroppedReason.NonRetryableStatus));this._activeConnections--,!O&&!k&&this.sendQueuedRequests()},w.prototype._convertAllHeadersToMap=function(S){var P={};if(S)for(var k=S.split("\n"),O=0;O<k.length;++O){var V=k[O].split(": ");P[V[0]]=V[1]}return P},w}();L.default=v},7613:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(676),N=T(5640),m=T(4189),x=T(6208),u=T(4023),g=T(2551),M=T(4094),A=function(){function I(){}return I.initialize=function(y,h){if(void 0===h&&(h={}),!this._isInitialized)return this._isInitialized=!0,m.default.defaultTenantToken=y,this._overrideValuesFromConfig(h),this._config.disableCookiesUsage&&!this._config.propertyStorageOverride&&(m.default.sessionEnabled=!1),M.default.addPropertyStorageOverride(this._config.propertyStorageOverride),M.default.autoCollect(m.default.semanticContext,this._config.disableCookiesUsage,this._config.userAgent),u.default.initialize(this._config),m.default.loggingEnabled=!0,this._config.enableAutoUserSession&&(this.getLogger().logSession(N.AWTSessionState.Started),window.addEventListener("beforeunload",this.flushAndTeardown)),this.getLogger()},I.getSemanticContext=function(){return m.default.semanticContext},I.flush=function(y){this._isInitialized&&!this._isDestroyed&&u.default.flush(y)},I.flushAndTeardown=function(){this._isInitialized&&!this._isDestroyed&&(this._config.enableAutoUserSession&&this.getLogger().logSession(N.AWTSessionState.Ended),u.default.flushAndTeardown(),m.default.loggingEnabled=!1,this._isDestroyed=!0)},I.pauseTransmission=function(){this._isInitialized&&!this._isDestroyed&&u.default.pauseTransmission()},I.resumeTransmision=function(){this._isInitialized&&!this._isDestroyed&&u.default.resumeTransmision()},I.setTransmitProfile=function(y){this._isInitialized&&!this._isDestroyed&&u.default.setTransmitProfile(y)},I.loadTransmitProfiles=function(y){this._isInitialized&&!this._isDestroyed&&u.default.loadTransmitProfiles(y)},I.setContext=function(y,h,C){void 0===C&&(C=p.AWTPropertyType.Unspecified),m.default.logManagerContext.setProperty(y,h,C)},I.setContextWithPii=function(y,h,C,v){void 0===v&&(v=p.AWTPropertyType.Unspecified),m.default.logManagerContext.setPropertyWithPii(y,h,C,v)},I.setContextWithCustomerContent=function(y,h,C,v){void 0===v&&(v=p.AWTPropertyType.Unspecified),m.default.logManagerContext.setPropertyWithCustomerContent(y,h,C,v)},I.getLogger=function(y){var h=y;return(!h||h===m.default.defaultTenantToken)&&(h=""),this._loggers[h]||(this._loggers[h]=new x.default(h)),this._loggers[h]},I.addNotificationListener=function(y){g.default.addNotificationListener(y)},I.removeNotificationListener=function(y){g.default.removeNotificationListener(y)},I._overrideValuesFromConfig=function(y){y.collectorUri&&(this._config.collectorUri=y.collectorUri),y.cacheMemorySizeLimitInNumberOfEvents>0&&(this._config.cacheMemorySizeLimitInNumberOfEvents=y.cacheMemorySizeLimitInNumberOfEvents),y.httpXHROverride&&y.httpXHROverride.sendPOST&&(this._config.httpXHROverride=y.httpXHROverride),y.propertyStorageOverride&&y.propertyStorageOverride.getProperty&&y.propertyStorageOverride.setProperty&&(this._config.propertyStorageOverride=y.propertyStorageOverride),y.userAgent&&(this._config.userAgent=y.userAgent),y.disableCookiesUsage&&(this._config.disableCookiesUsage=y.disableCookiesUsage),y.canSendStatEvent&&(this._config.canSendStatEvent=y.canSendStatEvent),y.enableAutoUserSession&&"undefined"!=typeof window&&window.addEventListener&&(this._config.enableAutoUserSession=y.enableAutoUserSession),y.clockSkewRefreshDurationInMins>0&&(this._config.clockSkewRefreshDurationInMins=y.clockSkewRefreshDurationInMins)},I._loggers={},I._isInitialized=!1,I._isDestroyed=!1,I._config={collectorUri:"https://browser.pipe.aria.microsoft.com/Collector/3.0/",cacheMemorySizeLimitInNumberOfEvents:1e4,disableCookiesUsage:!1,canSendStatEvent:function(y){return!0},clockSkewRefreshDurationInMins:0},I}();L.default=A},4189:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(58),N=T(1009),m=function(){function x(){}return x.logManagerContext=new p.default,x.sessionEnabled=!0,x.loggingEnabled=!1,x.defaultTenantToken="",x.semanticContext=new N.default(!0,x.logManagerContext),x}();L.default=m},6208:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(676),N=T(5640),m=T(58),x=T(5593),u=T(5816),g=T(2551),M=T(4023),A=T(4189),I=T(8779),y=T(1009),h=T(4094),C=function(){function v(w){this._apiKey=w,this._contextProperties=new m.default,this._semanticContext=new y.default(!1,this._contextProperties),this._sessionStartTime=0,this._createInitId()}return v.prototype.setContext=function(w,S,P){void 0===P&&(P=p.AWTPropertyType.Unspecified),this._contextProperties.setProperty(w,S,P)},v.prototype.setContextWithPii=function(w,S,P,k){void 0===k&&(k=p.AWTPropertyType.Unspecified),this._contextProperties.setPropertyWithPii(w,S,P,k)},v.prototype.setContextWithCustomerContent=function(w,S,P,k){void 0===k&&(k=p.AWTPropertyType.Unspecified),this._contextProperties.setPropertyWithCustomerContent(w,S,P,k)},v.prototype.getSemanticContext=function(){return this._semanticContext},v.prototype.logEvent=function(w){if(A.default.loggingEnabled){this._apiKey||(this._apiKey=A.default.defaultTenantToken,this._createInitId());var S=!0;x.isString(w)?w={name:w}:w instanceof m.default&&(w=w.getEvent(),S=!1),u.default.eventReceived(this._apiKey),v._logEvent(v._getInternalEvent(w,this._apiKey,S),this._contextProperties)}},v.prototype.logSession=function(w,S){if(A.default.sessionEnabled){var P={name:"session",type:"session",properties:{}};if(v._addPropertiesToEvent(P,S),P.priority=p.AWTEventPriority.High,w===N.AWTSessionState.Started){if(this._sessionStartTime>0)return;this._sessionStartTime=(new Date).getTime(),this._sessionId=x.newGuid(),this.setContext("Session.Id",this._sessionId),P.properties["Session.State"]="Started"}else{if(w!==N.AWTSessionState.Ended)return;if(0===this._sessionStartTime)return;var k=Math.floor(((new Date).getTime()-this._sessionStartTime)/1e3);P.properties["Session.Id"]=this._sessionId,P.properties["Session.State"]="Ended",P.properties["Session.Duration"]=k.toString(),P.properties["Session.DurationBucket"]=v._getSessionDurationFromTime(k),this._sessionStartTime=0,this.setContext("Session.Id",null),this._sessionId=void 0}P.properties["Session.FirstLaunchTime"]=h.default.firstLaunchTime,this.logEvent(P)}},v.prototype.getSessionId=function(){return this._sessionId},v.prototype.logFailure=function(w,S,P,k,O){if(w&&S){var V={name:"failure",type:"failure",properties:{}};v._addPropertiesToEvent(V,O),V.properties["Failure.Signature"]=w,V.properties["Failure.Detail"]=S,P&&(V.properties["Failure.Category"]=P),k&&(V.properties["Failure.Id"]=k),V.priority=p.AWTEventPriority.High,this.logEvent(V)}},v.prototype.logPageView=function(w,S,P,k,O,V){if(w&&S){var U={name:"pageview",type:"pageview",properties:{}};v._addPropertiesToEvent(U,V),U.properties["PageView.Id"]=w,U.properties["PageView.Name"]=S,P&&(U.properties["PageView.Category"]=P),k&&(U.properties["PageView.Uri"]=k),O&&(U.properties["PageView.ReferrerUri"]=O),this.logEvent(U)}},v.prototype._createInitId=function(){!v._initIdMap[this._apiKey]&&this._apiKey&&(v._initIdMap[this._apiKey]=x.newGuid())},v._addPropertiesToEvent=function(w,S){if(S)for(var P in S instanceof m.default&&(S=S.getEvent()),S.name&&(w.name=S.name),S.priority&&(w.priority=S.priority),S.properties)S.properties.hasOwnProperty(P)&&(w.properties[P]=S.properties[P])},v._getSessionDurationFromTime=function(w){return w<0?"Undefined":w<=3?"UpTo3Sec":w<=10?"UpTo10Sec":w<=30?"UpTo30Sec":w<=60?"UpTo60Sec":w<=180?"UpTo3Min":w<=600?"UpTo10Min":w<=1800?"UpTo30Min":"Above30Min"},v._logEvent=function(w,S){w.name&&x.isString(w.name)?(w.name=w.name.toLowerCase(),w.name=w.name.replace(x.EventNameDotRegex,"_"),w.type=w.type&&x.isString(w.type)?w.type.toLowerCase():"custom",x.EventNameAndTypeRegex.test(w.name)&&x.EventNameAndTypeRegex.test(w.type)?((!x.isNumber(w.timestamp)||w.timestamp<0)&&(w.timestamp=(new Date).getTime()),w.properties||(w.properties={}),this._addContextIfAbsent(w,S.getPropertyMap()),this._addContextIfAbsent(w,A.default.logManagerContext.getPropertyMap()),this._setDefaultProperty(w,"EventInfo.InitId",this._getInitId(w.apiKey)),this._setDefaultProperty(w,"EventInfo.Sequence",this._getSequenceId(w.apiKey)),this._setDefaultProperty(w,"EventInfo.SdkVersion",I.FullVersionString),this._setDefaultProperty(w,"EventInfo.Name",w.name),this._setDefaultProperty(w,"EventInfo.Time",new Date(w.timestamp).toISOString()),x.isPriority(w.priority)||(w.priority=p.AWTEventPriority.Normal),this._sendEvent(w)):g.default.eventsRejected([w],p.AWTEventsRejectedReason.InvalidEvent)):g.default.eventsRejected([w],p.AWTEventsRejectedReason.InvalidEvent)},v._addContextIfAbsent=function(w,S){if(S)for(var P in S)S.hasOwnProperty(P)&&(w.properties[P]||(w.properties[P]=S[P]))},v._setDefaultProperty=function(w,S,P){w.properties[S]={value:P,pii:p.AWTPiiKind.NotSet,type:p.AWTPropertyType.String}},v._sendEvent=function(w){M.default.sendEvent(w)},v._getInternalEvent=function(w,S,P){if(w.properties=w.properties||{},P)for(var k in w.properties)w.properties.hasOwnProperty(k)&&(w.properties[k]=x.sanitizeProperty(k,w.properties[k]),null===w.properties[k]&&delete w.properties[k]);var O=w;return O.id=x.newGuid(),O.apiKey=S,O},v._getInitId=function(w){return v._initIdMap[w]},v._getSequenceId=function(w){return void 0===v._sequenceIdMap[w]&&(v._sequenceIdMap[w]=0),(++v._sequenceIdMap[w]).toString()},v._sequenceIdMap={},v._initIdMap={},v}();L.default=C},4220:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(676),N=T(9449),m=T(4023),x=T(2659),u=T(2551),g=T(5593),y=function(){function h(C,v,w,S){this._queueSizeLimit=v,this._isCurrentlyUploadingNow=!1,this._uploadNowQueue=[],this._shouldDropEventsOnPause=!1,this._paused=!1,this._queueSize=0,this._outboundQueue=[],this._inboundQueues={},this._inboundQueues[p.AWTEventPriority.High]=[],this._inboundQueues[p.AWTEventPriority.Normal]=[],this._inboundQueues[p.AWTEventPriority.Low]=[],this._addEmptyQueues(),this._batcher=new x.default(this._outboundQueue,500),this._httpManager=new N.default(this._outboundQueue,C,this,w,S)}return h.prototype.addEvent=function(C){g.isPriority(C.priority)||(C.priority=p.AWTEventPriority.Normal),C.priority===p.AWTEventPriority.Immediate_sync?this._httpManager.sendSynchronousRequest(this._batcher.addEventToBatch(C),C.apiKey):this._queueSize<this._queueSizeLimit||this._dropEventWithPriorityOrLess(C.priority)?this._addEventToProperQueue(C):u.default.eventsDropped([C],p.AWTEventsDroppedReason.QueueFull)},h.prototype.sendEventsForPriorityAndAbove=function(C){this._batchEvents(C),this._httpManager.sendQueuedRequests()},h.prototype.hasEvents=function(){return(this._inboundQueues[p.AWTEventPriority.High][0].length>0||this._inboundQueues[p.AWTEventPriority.Normal][0].length>0||this._inboundQueues[p.AWTEventPriority.Low][0].length>0||this._batcher.hasBatch())&&this._httpManager.hasIdleConnection()},h.prototype.addBackRequest=function(C){if(!this._paused||!this._shouldDropEventsOnPause){for(var v in C)if(C.hasOwnProperty(v))for(var w=0;w<C[v].length;++w)C[v][w].sendAttempt<6?this.addEvent(C[v][w]):u.default.eventsDropped([C[v][w]],p.AWTEventsDroppedReason.MaxRetryLimit);m.default.scheduleTimer()}},h.prototype.teardown=function(){this._paused||(this._batchEvents(p.AWTEventPriority.Low),this._httpManager.teardown())},h.prototype.uploadNow=function(C){var v=this;this._addEmptyQueues(),this._isCurrentlyUploadingNow?this._uploadNowQueue.push(C):(this._isCurrentlyUploadingNow=!0,setTimeout(function(){return v._uploadNow(C)},0))},h.prototype.pauseTransmission=function(){this._paused=!0,this._httpManager.pause(),this._shouldDropEventsOnPause&&(this._queueSize-=this._inboundQueues[p.AWTEventPriority.High][0].length+this._inboundQueues[p.AWTEventPriority.Normal][0].length+this._inboundQueues[p.AWTEventPriority.Low][0].length,this._inboundQueues[p.AWTEventPriority.High][0]=[],this._inboundQueues[p.AWTEventPriority.Normal][0]=[],this._inboundQueues[p.AWTEventPriority.Low][0]=[],this._httpManager.removeQueuedRequests())},h.prototype.resumeTransmission=function(){this._paused=!1,this._httpManager.resume()},h.prototype.shouldDropEventsOnPause=function(C){this._shouldDropEventsOnPause=C},h.prototype._removeFirstQueues=function(){this._inboundQueues[p.AWTEventPriority.High].shift(),this._inboundQueues[p.AWTEventPriority.Normal].shift(),this._inboundQueues[p.AWTEventPriority.Low].shift()},h.prototype._addEmptyQueues=function(){this._inboundQueues[p.AWTEventPriority.High].push([]),this._inboundQueues[p.AWTEventPriority.Normal].push([]),this._inboundQueues[p.AWTEventPriority.Low].push([])},h.prototype._addEventToProperQueue=function(C){(!this._paused||!this._shouldDropEventsOnPause)&&(this._queueSize++,this._inboundQueues[C.priority][this._inboundQueues[C.priority].length-1].push(C))},h.prototype._dropEventWithPriorityOrLess=function(C){for(var v=p.AWTEventPriority.Low;v<=C;){if(this._inboundQueues[v][this._inboundQueues[v].length-1].length>0)return u.default.eventsDropped([this._inboundQueues[v][this._inboundQueues[v].length-1].shift()],p.AWTEventsDroppedReason.QueueFull),!0;v++}return!1},h.prototype._batchEvents=function(C){for(var v=p.AWTEventPriority.High;v>=C;){for(;this._inboundQueues[v][0].length>0;){var w=this._inboundQueues[v][0].pop();this._queueSize--,this._batcher.addEventToBatch(w)}v--}this._batcher.flushBatch()},h.prototype._uploadNow=function(C){var v=this;this.hasEvents()&&this.sendEventsForPriorityAndAbove(p.AWTEventPriority.Low),this._checkOutboundQueueEmptyAndSent(function(){v._removeFirstQueues(),null!=C&&C(),v._uploadNowQueue.length>0?setTimeout(function(){return v._uploadNow(v._uploadNowQueue.shift())},0):(v._isCurrentlyUploadingNow=!1,v.hasEvents()&&m.default.scheduleTimer())})},h.prototype._checkOutboundQueueEmptyAndSent=function(C){var v=this;this._httpManager.isCompletelyIdle()?C():setTimeout(function(){return v._checkOutboundQueueEmptyAndSent(C)},250)},h}();L.default=y},1009:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(4094),N=T(676),m=T(5640),x="UserInfo.IdType",u=function(){function g(M,A){this._allowDeviceFields=M,this._properties=A}return g.prototype.setAppId=function(M){this._addContext("AppInfo.Id",M)},g.prototype.setAppVersion=function(M){this._addContext("AppInfo.Version",M)},g.prototype.setAppLanguage=function(M){this._addContext("AppInfo.Language",M)},g.prototype.setDeviceId=function(M){this._allowDeviceFields&&(p.default.checkAndSaveDeviceId(M),this._addContext("DeviceInfo.Id",M))},g.prototype.setDeviceOsName=function(M){this._allowDeviceFields&&this._addContext("DeviceInfo.OsName",M)},g.prototype.setDeviceOsVersion=function(M){this._allowDeviceFields&&this._addContext("DeviceInfo.OsVersion",M)},g.prototype.setDeviceBrowserName=function(M){this._allowDeviceFields&&this._addContext("DeviceInfo.BrowserName",M)},g.prototype.setDeviceBrowserVersion=function(M){this._allowDeviceFields&&this._addContext("DeviceInfo.BrowserVersion",M)},g.prototype.setDeviceMake=function(M){this._allowDeviceFields&&this._addContext("DeviceInfo.Make",M)},g.prototype.setDeviceModel=function(M){this._allowDeviceFields&&this._addContext("DeviceInfo.Model",M)},g.prototype.setUserId=function(M,A,I){if(!isNaN(I)&&null!==I&&I>=0&&I<=12)this._addContext(x,I.toString());else{var y=void 0;switch(A){case N.AWTPiiKind.SipAddress:y=m.AWTUserIdType.SipAddress;break;case N.AWTPiiKind.PhoneNumber:y=m.AWTUserIdType.PhoneNumber;break;case N.AWTPiiKind.SmtpAddress:y=m.AWTUserIdType.EmailAddress;break;default:y=m.AWTUserIdType.Unknown}this._addContext(x,y.toString())}if(isNaN(A)||null===A||A===N.AWTPiiKind.NotSet||A>13)switch(I){case m.AWTUserIdType.Skype:A=N.AWTPiiKind.Identity;break;case m.AWTUserIdType.EmailAddress:A=N.AWTPiiKind.SmtpAddress;break;case m.AWTUserIdType.PhoneNumber:A=N.AWTPiiKind.PhoneNumber;break;case m.AWTUserIdType.SipAddress:A=N.AWTPiiKind.SipAddress;break;default:A=N.AWTPiiKind.NotSet}this._addContextWithPii("UserInfo.Id",M,A)},g.prototype.setUserAdvertisingId=function(M){this._addContext("UserInfo.AdvertisingId",M)},g.prototype.setUserTimeZone=function(M){this._addContext("UserInfo.TimeZone",M)},g.prototype.setUserLanguage=function(M){this._addContext("UserInfo.Language",M)},g.prototype._addContext=function(M,A){"string"==typeof A&&this._properties.setProperty(M,A)},g.prototype._addContextWithPii=function(M,A,I){"string"==typeof A&&this._properties.setPropertyWithPii(M,A,I)},g}();L.default=u},2621:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(4023),N=function(){function m(){}return m.setEventsHandler=function(x){p.default.setEventsHandler(x)},m.getEventsHandler=function(){return p.default.getEventsHandler()},m.scheduleTimer=function(){p.default.scheduleTimer()},m}();L.default=N},4023:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(1842),N=T(676),m=T(4220),x=T(5816),u=T(58),g=T(7613),M=T(5593),y="awt_stats",h=function(){function C(){}return C.setEventsHandler=function(v){this._eventHandler=v},C.getEventsHandler=function(){return this._eventHandler},C.scheduleTimer=function(){var v=this,w=this._profiles[this._currentProfile][2];this._timeout<0&&w>=0&&!this._paused&&(this._eventHandler.hasEvents()?(0===w&&this._currentBackoffCount>0&&(w=1),this._timeout=setTimeout(function(){return v._batchAndSendEvents()},w*(1<<this._currentBackoffCount)*1e3)):this._timerCount=0)},C.initialize=function(v){var w=this;this._newEventsAllowed=!0,this._config=v,this._eventHandler=new m.default(v.collectorUri,v.cacheMemorySizeLimitInNumberOfEvents,v.httpXHROverride,v.clockSkewRefreshDurationInMins),this._initializeProfiles(),x.default.initialize(function(S,P){if(w._config.canSendStatEvent(y)){var k=new u.default(y);for(var O in k.setEventPriority(N.AWTEventPriority.High),k.setProperty("TenantId",P),S)S.hasOwnProperty(O)&&k.setProperty(O,S[O].toString());g.default.getLogger(M.StatsApiKey).logEvent(k)}})},C.setTransmitProfile=function(v){this._currentProfile!==v&&void 0!==this._profiles[v]&&(this.clearTimeout(),this._currentProfile=v,this.scheduleTimer())},C.loadTransmitProfiles=function(v){for(var w in this._resetTransmitProfiles(),v)if(v.hasOwnProperty(w)){if(3!==v[w].length)continue;for(var S=2;S>=0;--S)if(v[w][S]<0){for(var P=S;P>=0;--P)v[w][P]=-1;break}for(S=2;S>0;--S)v[w][S]>0&&v[w][S-1]>0&&(v[w][S-1]=Math.ceil(v[w][S-1]/v[w][S])*v[w][S]);this._profiles[w]=v[w]}},C.sendEvent=function(v){this._newEventsAllowed&&(this._currentBackoffCount>0&&v.priority===N.AWTEventPriority.Immediate_sync&&(v.priority=N.AWTEventPriority.High),this._eventHandler.addEvent(v),this.scheduleTimer())},C.flush=function(v){var w=(new Date).getTime();!this._paused&&this._lastUploadNowCall+3e4<w&&(this._lastUploadNowCall=w,this._timeout>-1&&(clearTimeout(this._timeout),this._timeout=-1),this._eventHandler.uploadNow(v))},C.pauseTransmission=function(){this._paused||(this.clearTimeout(),this._eventHandler.pauseTransmission(),this._paused=!0)},C.resumeTransmision=function(){this._paused&&(this._paused=!1,this._eventHandler.resumeTransmission(),this.scheduleTimer())},C.flushAndTeardown=function(){x.default.teardown(),this._newEventsAllowed=!1,this.clearTimeout(),this._eventHandler.teardown()},C.backOffTransmission=function(){this._currentBackoffCount<4&&(this._currentBackoffCount++,this.clearTimeout(),this.scheduleTimer())},C.clearBackOff=function(){this._currentBackoffCount>0&&(this._currentBackoffCount=0,this.clearTimeout(),this.scheduleTimer())},C._resetTransmitProfiles=function(){this.clearTimeout(),this._initializeProfiles(),this._currentProfile=p.AWT_REAL_TIME,this.scheduleTimer()},C.clearTimeout=function(){this._timeout>0&&(clearTimeout(this._timeout),this._timeout=-1,this._timerCount=0)},C._batchAndSendEvents=function(){var v=N.AWTEventPriority.High;this._timerCount++,this._timerCount*this._profiles[this._currentProfile][2]===this._profiles[this._currentProfile][0]?(v=N.AWTEventPriority.Low,this._timerCount=0):this._timerCount*this._profiles[this._currentProfile][2]===this._profiles[this._currentProfile][1]&&(v=N.AWTEventPriority.Normal),this._eventHandler.sendEventsForPriorityAndAbove(v),this._timeout=-1,this.scheduleTimer()},C._initializeProfiles=function(){this._profiles={},this._profiles[p.AWT_REAL_TIME]=[4,2,1],this._profiles[p.AWT_NEAR_REAL_TIME]=[12,6,3],this._profiles[p.AWT_BEST_EFFORT]=[36,18,9]},C._newEventsAllowed=!1,C._currentProfile=p.AWT_REAL_TIME,C._timeout=-1,C._currentBackoffCount=0,C._paused=!1,C._timerCount=0,C._lastUploadNowCall=0,C}();L.default=h},5234:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(676);L.AWTPropertyType=p.AWTPropertyType,L.AWTPiiKind=p.AWTPiiKind,L.AWTEventPriority=p.AWTEventPriority,L.AWTEventsDroppedReason=p.AWTEventsDroppedReason,L.AWTEventsRejectedReason=p.AWTEventsRejectedReason,L.AWTCustomerContentKind=p.AWTCustomerContentKind;var N=T(5640);L.AWTUserIdType=N.AWTUserIdType,L.AWTSessionState=N.AWTSessionState;var m=T(1842);L.AWT_BEST_EFFORT=m.AWT_BEST_EFFORT,L.AWT_NEAR_REAL_TIME=m.AWT_NEAR_REAL_TIME,L.AWT_REAL_TIME=m.AWT_REAL_TIME;var x=T(58);L.AWTEventProperties=x.default;var u=T(6208);L.AWTLogger=u.default;var g=T(7613);L.AWTLogManager=g.default;var M=T(2621);L.AWTTransmissionManager=M.default;var A=T(6064);L.AWTSerializer=A.default;var I=T(1009);L.AWTSemanticContext=I.default,L.AWT_COLLECTOR_URL_UNITED_STATES="https://us.pipe.aria.microsoft.com/Collector/3.0/",L.AWT_COLLECTOR_URL_GERMANY="https://de.pipe.aria.microsoft.com/Collector/3.0/",L.AWT_COLLECTOR_URL_JAPAN="https://jp.pipe.aria.microsoft.com/Collector/3.0/",L.AWT_COLLECTOR_URL_AUSTRALIA="https://au.pipe.aria.microsoft.com/Collector/3.0/",L.AWT_COLLECTOR_URL_EUROPE="https://eu.pipe.aria.microsoft.com/Collector/3.0/",L.AWT_COLLECTOR_URL_USGOV_DOD="https://pf.pipe.aria.microsoft.com/Collector/3.0",L.AWT_COLLECTOR_URL_USGOV_DOJ="https://tb.pipe.aria.microsoft.com/Collector/3.0"},1842:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.AWT_REAL_TIME="REAL_TIME",L.AWT_NEAR_REAL_TIME="NEAR_REAL_TIME",L.AWT_BEST_EFFORT="BEST_EFFORT"},5640:(Y,L)=>{"use strict";var N;Object.defineProperty(L,"__esModule",{value:!0}),(N=L.AWTUserIdType||(L.AWTUserIdType={}))[N.Unknown=0]="Unknown",N[N.MSACID=1]="MSACID",N[N.MSAPUID=2]="MSAPUID",N[N.ANID=3]="ANID",N[N.OrgIdCID=4]="OrgIdCID",N[N.OrgIdPUID=5]="OrgIdPUID",N[N.UserObjectId=6]="UserObjectId",N[N.Skype=7]="Skype",N[N.Yammer=8]="Yammer",N[N.EmailAddress=9]="EmailAddress",N[N.PhoneNumber=10]="PhoneNumber",N[N.SipAddress=11]="SipAddress",N[N.MUID=12]="MUID",function(N){N[N.Started=0]="Started",N[N.Ended=1]="Ended"}(L.AWTSessionState||(L.AWTSessionState={}))},8779:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.Version="1.8.7",L.FullVersionString="AWT-Web-JS-"+L.Version},5436:(Y,L,T)=>{"use strict";L.Mg=void 0;T(3762),T(8290),T(9425);T(2900);T(6194);T(448),T(3372);var I=T(7626);L.Mg=I.default,T(4352)},2235:function(Y,L,T){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(h){for(var C,v=1,w=arguments.length;v<w;v++)for(var S in C=arguments[v])Object.prototype.hasOwnProperty.call(C,S)&&(h[S]=C[S]);return h}).apply(this,arguments)};Object.defineProperty(L,"__esModule",{value:!0});var N=T(4151),m=T(676),x=T(5234),u=T(7095),g=T(3037),M=T(4151),A=T(8098),I=(()=>((I||(I={})).ReactNative="ReactNative",I))(),y=function(){function h(){}return h.initialize=function(C){this._debug&&console.log("[AriaTelemetry][logger][initialize][custom]"),h._logger=x.AWTLogManager.initialize(C)},h.setDebug=function(C){h._debug=C},h.disable=function(){this._debug&&console.log("[AriaTelemetry][disable]"),h._disable=!0},h.setCDNPackages=function(C){h._CDNPackagesInfo=p(p({},h._CDNPackagesInfo),C)},h.info=function(C,v){var w;void 0===v&&(v=g.default.EVENTS);var S={name:g.default.EVENTS,properties:p(p(p(p(p({},h.populateBaseProperties()),h.fillWebPlatformData()),h.fillMobilePlatformData()),C),{LogLevel:u.default.INFO}),priority:m.AWTEventPriority.High};v==g.default.IC3CLIENT&&(S={name:g.default.IC3CLIENT,properties:p(p(p({},h.populateIC3ClientBaseProperties()),C),{LogLevel:u.default.INFO}),priority:m.AWTEventPriority.High}),v==g.default.OCSDK&&(S={name:g.default.OCSDK,properties:p(p(p({},h.populateOCSDKBaseProperties()),C),{LogLevel:u.default.INFO}),priority:m.AWTEventPriority.High}),v==g.default.ACSCLIENT&&(S={name:g.default.ACSCLIENT,properties:p(p(p({},h.populateACSClientBaseProperties()),C),{LogLevel:u.default.INFO}),priority:m.AWTEventPriority.High}),v==g.default.ACSADAPTER&&(S={name:g.default.ACSADAPTER,properties:p(p(p({},h.populateACSAdapterBaseProperties()),C),{LogLevel:u.default.INFO}),priority:m.AWTEventPriority.High}),v==g.default.CALLINGSDK&&(S={name:g.default.CALLINGSDK,properties:p(p(p({},h.populateCallingSDKBaseProperties()),C),{LogLevel:u.default.INFO}),priority:m.AWTEventPriority.High}),v==g.default.AMSCLIENT&&(S={name:g.default.AMSCLIENT,properties:p(p(p({},h.populateAMSClientBaseProperties()),C),{LogLevel:u.default.INFO}),priority:m.AWTEventPriority.High}),this._debug&&console.log("[AriaTelemetry][info] "+v),this._debug&&console.log(S),this._debug&&console.log(S.properties.Event),!h._disable&&(null===(w=h.logger)||void 0===w||w.logEvent(S))},h.debug=function(C,v){var w;void 0===v&&(v=g.default.EVENTS);var S={name:g.default.EVENTS,properties:p(p(p(p(p({},h.populateBaseProperties()),h.fillWebPlatformData()),h.fillMobilePlatformData()),C),{LogLevel:u.default.DEBUG}),priority:m.AWTEventPriority.High};v==g.default.IC3CLIENT&&(S={name:g.default.IC3CLIENT,properties:p(p(p({},h.populateIC3ClientBaseProperties()),C),{LogLevel:u.default.DEBUG}),priority:m.AWTEventPriority.High}),v==g.default.OCSDK&&(S={name:g.default.OCSDK,properties:p(p(p({},h.populateOCSDKBaseProperties()),C),{LogLevel:u.default.DEBUG}),priority:m.AWTEventPriority.High}),v==g.default.ACSCLIENT&&(S={name:g.default.ACSCLIENT,properties:p(p(p({},h.populateACSClientBaseProperties()),C),{LogLevel:u.default.DEBUG}),priority:m.AWTEventPriority.High}),v==g.default.ACSADAPTER&&(S={name:g.default.ACSADAPTER,properties:p(p(p({},h.populateACSAdapterBaseProperties()),C),{LogLevel:u.default.DEBUG}),priority:m.AWTEventPriority.High}),v==g.default.CALLINGSDK&&(S={name:g.default.CALLINGSDK,properties:p(p(p({},h.populateCallingSDKBaseProperties()),C),{LogLevel:u.default.DEBUG}),priority:m.AWTEventPriority.High}),v==g.default.AMSCLIENT&&(S={name:g.default.AMSCLIENT,properties:p(p(p({},h.populateAMSClientBaseProperties()),C),{LogLevel:u.default.DEBUG}),priority:m.AWTEventPriority.High}),this._debug&&console.log("[AriaTelemetry][debug] "+v),this._debug&&console.log(S),this._debug&&console.log(S.properties.Event),!h._disable&&(null===(w=h.logger)||void 0===w||w.logEvent(S))},h.warn=function(C,v){var w;void 0===v&&(v=g.default.EVENTS);var S={name:g.default.EVENTS,properties:p(p(p(p(p({},h.populateBaseProperties()),h.fillWebPlatformData()),h.fillMobilePlatformData()),C),{LogLevel:u.default.WARN}),priority:m.AWTEventPriority.High};v==g.default.IC3CLIENT&&(S={name:g.default.IC3CLIENT,properties:p(p(p({},h.populateIC3ClientBaseProperties()),C),{LogLevel:u.default.WARN}),priority:m.AWTEventPriority.High}),v==g.default.OCSDK&&(S={name:g.default.OCSDK,properties:p(p(p({},h.populateOCSDKBaseProperties()),C),{LogLevel:u.default.WARN}),priority:m.AWTEventPriority.High}),v==g.default.ACSCLIENT&&(S={name:g.default.ACSCLIENT,properties:p(p(p({},h.populateACSClientBaseProperties()),C),{LogLevel:u.default.WARN}),priority:m.AWTEventPriority.High}),v==g.default.ACSADAPTER&&(S={name:g.default.ACSADAPTER,properties:p(p(p({},h.populateACSAdapterBaseProperties()),C),{LogLevel:u.default.WARN}),priority:m.AWTEventPriority.High}),v==g.default.CALLINGSDK&&(S={name:g.default.CALLINGSDK,properties:p(p(p({},h.populateCallingSDKBaseProperties()),C),{LogLevel:u.default.WARN}),priority:m.AWTEventPriority.High}),v==g.default.AMSCLIENT&&(S={name:g.default.AMSCLIENT,properties:p(p(p({},h.populateAMSClientBaseProperties()),C),{LogLevel:u.default.WARN}),priority:m.AWTEventPriority.High}),this._debug&&console.log("[AriaTelemetry][warn] "+v),this._debug&&console.log(S),this._debug&&console.log(S.properties.Event),!h._disable&&(null===(w=h.logger)||void 0===w||w.logEvent(S))},h.error=function(C,v){var w;void 0===v&&(v=g.default.EVENTS);var S={name:g.default.EVENTS,properties:p(p(p(p(p({},h.populateBaseProperties()),h.fillWebPlatformData()),h.fillMobilePlatformData()),C),{LogLevel:u.default.ERROR}),priority:m.AWTEventPriority.High};v==g.default.IC3CLIENT&&(S={name:g.default.IC3CLIENT,properties:p(p(p({},h.populateIC3ClientBaseProperties()),C),{LogLevel:u.default.ERROR}),priority:m.AWTEventPriority.High}),v==g.default.OCSDK&&(S={name:g.default.OCSDK,properties:p(p(p({},h.populateOCSDKBaseProperties()),C),{LogLevel:u.default.ERROR}),priority:m.AWTEventPriority.High}),v==g.default.ACSCLIENT&&(S={name:g.default.ACSCLIENT,properties:p(p(p({},h.populateACSClientBaseProperties()),C),{LogLevel:u.default.ERROR}),priority:m.AWTEventPriority.High}),v==g.default.ACSADAPTER&&(S={name:g.default.ACSADAPTER,properties:p(p(p({},h.populateACSAdapterBaseProperties()),C),{LogLevel:u.default.ERROR}),priority:m.AWTEventPriority.High}),v==g.default.CALLINGSDK&&(S={name:g.default.CALLINGSDK,properties:p(p(p({},h.populateCallingSDKBaseProperties()),C),{LogLevel:u.default.ERROR}),priority:m.AWTEventPriority.High}),v==g.default.AMSCLIENT&&(S={name:g.default.AMSCLIENT,properties:p(p(p({},h.populateAMSClientBaseProperties()),C),{LogLevel:u.default.ERROR}),priority:m.AWTEventPriority.High}),this._debug&&console.log("[AriaTelemetry][error] "+v),this._debug&&console.log(S),this._debug&&console.log(S.properties.Event),!h._disable&&(null===(w=h.logger)||void 0===w||w.logEvent(S))},h.log=function(C,v){var w;void 0===v&&(v=g.default.EVENTS);var S={name:g.default.EVENTS,properties:p(p(p(p(p({},h.populateBaseProperties()),h.fillWebPlatformData()),h.fillMobilePlatformData()),C),{LogLevel:u.default.LOG}),priority:m.AWTEventPriority.High};v==g.default.IC3CLIENT&&(S={name:g.default.IC3CLIENT,properties:p(p(p({},h.populateIC3ClientBaseProperties()),C),{LogLevel:u.default.LOG}),priority:m.AWTEventPriority.High}),v==g.default.OCSDK&&(S={name:g.default.OCSDK,properties:p(p(p({},h.populateOCSDKBaseProperties()),C),{LogLevel:u.default.LOG}),priority:m.AWTEventPriority.High}),v==g.default.ACSCLIENT&&(S={name:g.default.ACSCLIENT,properties:p(p(p({},h.populateACSClientBaseProperties()),C),{LogLevel:u.default.LOG}),priority:m.AWTEventPriority.High}),v==g.default.ACSADAPTER&&(S={name:g.default.ACSADAPTER,properties:p(p(p({},h.populateACSAdapterBaseProperties()),C),{LogLevel:u.default.LOG}),priority:m.AWTEventPriority.High}),v==g.default.CALLINGSDK&&(S={name:g.default.CALLINGSDK,properties:p(p(p({},h.populateCallingSDKBaseProperties()),C),{LogLevel:u.default.LOG}),priority:m.AWTEventPriority.High}),v==g.default.AMSCLIENT&&(S={name:g.default.AMSCLIENT,properties:p(p(p({},h.populateAMSClientBaseProperties()),C),{LogLevel:u.default.LOG}),priority:m.AWTEventPriority.High}),this._debug&&console.log("[AriaTelemetry][log]"),this._debug&&console.log(S),this._debug&&console.log(S.properties.Event),!h._disable&&(null===(w=h.logger)||void 0===w||w.logEvent(S))},Object.defineProperty(h,"logger",{get:function(){return h._logger||(this._debug&&console.log("[AriaTelemetry][logger][initialize]"),h._logger=x.AWTLogManager.initialize(N.ariaTelemetryKey)),h._logger},enumerable:!1,configurable:!0}),h.populateBaseProperties=function(){var C={OCSDK:T(1528).i8,IC3Core:T(5233).i8,ACSChat:T(2861).i8,ACSCommon:T(6638).i8,AMSClient:T(5500).i8};return{ChatSDKRuntimeId:"",OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",CallId:"",Domain:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:"",ChatSDKVersion:T(8464).i8,NPMPackagesInfo:JSON.stringify(C),CDNPackagesInfo:JSON.stringify(h._CDNPackagesInfo),PlatformDetails:""}},h.fillMobilePlatformData=function(){var C={},v={};if(!A.isReactNative())return C;try{var S=T(Object(function(){var k=new Error("Cannot find module 'react-native'");throw k.code="MODULE_NOT_FOUND",k}())).Platform;v.Renderer=I.ReactNative,C.DeviceInfo_OsVersion=S.Version,v.DeviceInfo_OsVersion=S.Version,"android"===S.OS.toLowerCase()?(C.DeviceInfo_OsName="Android",v.DeviceInfo_OsName="Android"):"ios"===S.OS.toLowerCase()?(C.DeviceInfo_OsName="iOS",v.DeviceInfo_OsName="iOS"):(C.DeviceInfo_OsName=""+S.OS,v.DeviceInfo_OsName=""+S.OS),this._debug&&console.log("[AriaTelemetry][fillMobilePlatformData]["+C.DeviceInfo_OsName+"]")}catch(P){this._debug&&console.log("[AriaTelemetry][fillMobilePlatformData][Web]")}return C.PlatformDetails=JSON.stringify(v),C},h.fillWebPlatformData=function(){var C={};if(!A.isBrowser())return C;try{C.Domain=window.location.origin||"",this._debug&&console.log("[AriaTelemetry][fillWebPlatformData]")}catch(v){this._debug&&console.log("[AriaTelemetry][fillWebPlatformData][Error]")}return C},h.populateIC3ClientBaseProperties=function(){return{ChatSDKRuntimeId:"",OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",Event:"",Description:"",SubscriptionId:"",EndpointId:"",EndpointUrl:"",ErrorCode:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:"",IC3ClientVersion:M.ic3ClientVersion}},h.populateOCSDKBaseProperties=function(){return{ChatSDKRuntimeId:"",OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",TransactionId:"",Event:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:"",OCSDKVersion:T(1528).i8}},h.populateACSClientBaseProperties=function(){return{ChatSDKRuntimeId:"",OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",Event:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:"",ACSChatVersion:T(2861).i8}},h.populateACSAdapterBaseProperties=function(){return{ChatSDKRuntimeId:"",OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",Event:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:"",ACSAdapterVersion:M.webChatACSAdapterVersion}},h.populateCallingSDKBaseProperties=function(){return{ChatSDKRuntimeId:"",OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",CallId:"",Event:"",Description:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:""}},h.populateAMSClientBaseProperties=function(){return{ChatSDKRuntimeId:"",OrgId:"",OrgUrl:"",WidgetId:"",RequestId:"",ChatId:"",Event:"",ExceptionDetails:"",ElapsedTimeInMilliseconds:"",AMSClientVersion:T(5500).i8}},h._debug=!1,h._disable=!1,h}();L.default=y},7941:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.failEvent=L.completeEvent=L.startEvent=void 0,L.startEvent=function(T){return T+"Started"},L.completeEvent=function(T){return T+"Completed"},L.failEvent=function(T){return T+"Failed"}},7095:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={})).INFO="INFO",p.DEBUG="DEBUG",p.WARN="WARN",p.ERROR="ERROR",p.LOG="LOG",T;var p})();L.default=T},1247:function(Y,L,T){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(g){for(var M,A=1,I=arguments.length;A<I;A++)for(var y in M=arguments[A])Object.prototype.hasOwnProperty.call(M,y)&&(g[y]=M[y]);return g}).apply(this,arguments)};Object.defineProperty(L,"__esModule",{value:!0});var N=T(3037),m=T(8485),x=T(7941),u=function(){function g(M){this.omnichannelConfig=M,this.runtimeId="",this.telemetry=null,this.debug=!1,this.telemetryEvents=new Map,this.scenarioType=N.default.EVENTS}return g.prototype.setDebug=function(M){var A;this.debug=M,null===(A=this.telemetry)||void 0===A||A.setDebug(M)},g.prototype.setScenarioType=function(M){this.scenarioType=M},g.prototype.setRuntimeId=function(M){this.runtimeId=M},g.prototype.useTelemetry=function(M){this.debug&&console.log("[ScenarioMarker][useTelemetry]"),this.telemetry=M},g.prototype.startScenario=function(M,A){var I;if(void 0===A&&(A={}),this.debug&&console.log("[ScenarioMarker][startScenario]"),!this.telemetryEvents.has(M)){var y=new m.default;y.start(),this.telemetryEvents.set(M,y)}var h=p({ChatSDKRuntimeId:this.runtimeId,Event:x.startEvent(M),OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId},A);null===(I=this.telemetry)||void 0===I||I.info(h,this.scenarioType)},g.prototype.failScenario=function(M,A){var I;if(void 0===A&&(A={}),this.debug&&console.log("[ScenarioMarker][failScenario]"),this.telemetryEvents.has(M)){var y=this.telemetryEvents.get(M);this.telemetryEvents.delete(M);var h=p({ChatSDKRuntimeId:this.runtimeId,Event:x.failEvent(M),OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,ElapsedTimeInMilliseconds:y.stop()},A);null===(I=this.telemetry)||void 0===I||I.error(h,this.scenarioType)}else console.warn("'"+M+"' event has not started.")},g.prototype.completeScenario=function(M,A){var I;if(void 0===A&&(A={}),this.debug&&console.log("[ScenarioMarker][completeScenario]"),this.telemetryEvents.has(M)){var y=this.telemetryEvents.get(M);this.telemetryEvents.delete(M);var h=p({ChatSDKRuntimeId:this.runtimeId,Event:x.completeEvent(M),OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,ElapsedTimeInMilliseconds:y.stop()},A);null===(I=this.telemetry)||void 0===I||I.info(h,this.scenarioType)}else console.warn("'"+M+"' event has not started.")},g}();L.default=u},3037:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={})).EVENTS="occhatsdk_events",p.IC3CLIENT="occhatsdk_ic3clientevents",p.OCSDK="occhatsdk_ocsdkevents",p.ACSCLIENT="occhatsdk_acsclientevents",p.ACSADAPTER="occhatsdk_acsadapterevents",p.CALLINGSDK="occhatsdk_callingsdkevents",p.AMSCLIENT="occhatsdk_amsclientevents",p.UNDEFINED="undefined",T;var p})();L.default=T},8485:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.prototype.start=function(){this.timeStart=(new Date).getTime()},p.prototype.stop=function(){return(new Date).getTime()-this.timeStart},p}();L.default=T},9600:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={})).ValidateOmnichannelConfig="ValidateOmnichannelConfig",p.ValidateSDKConfig="ValidateSDKConfig",p.InitializeChatSDK="InitializeChatSDK",p.StartChat="StartChat",p.EndChat="EndChat",p.GetLiveChatConfig="GetLiveChatConfig",p.GetAuthToken="GetAuthToken",p.GetPreChatSurvey="GetPreChatSurvey",p.GetChatToken="GetChatToken",p.GetConversationDetails="GetConversationDetails",p.GetCurrentLiveChatContext="GetCurrentLiveChatContext",p.GetMessages="GetMessages",p.SendMessages="SendMessages",p.SendTypingEvent="SendTypingEvent",p.OnAgentEndSession="OnAgentEndSession",p.OnNewMessage="OnNewMessage",p.OnTypingEvent="OnTypingEvent",p.UploadFileAttachment="UploadFileAttachment",p.DownloadFileAttachment="DownloadFileAttachment",p.EmailLiveChatTranscript="EmailLiveChatTranscript",p.GetLiveChatTranscript="GetLiveChatTranscript",p.CreateIC3Adapter="CreateChatAdapter",p.CreateACSAdapter="CreateACSAdapter",p.CreateDirectLine="CreateDirectLine",p.GetVoiceVideoCalling="GetVoiceVideoCalling",p.GetIC3Client="GetIC3Client",p.InitializeVoiceVideoCallingSDK="InitializeVoiceVideoCallingSDK",p.AcceptVoiceCall="AcceptVoiceCall",p.AcceptVideoCall="AcceptVideoCall",p.RejectCall="RejectCall",p.StopCall="StopCall",p.OnCallDisconnected="OnCallDisconnected",p.UpdateChatToken="UpdateChatToken",p.GetChatReconnectContext="GetChatReconnectContext",p.GetPostChatSurveyContext="GetPostChatSurveyContext",p.GetAgentAvailability="GetAgentAvailability",p.GetGeolocation="GetGeolocation",T;var p})();L.default=T},6345:function(Y,L,T){"use strict";var p=this&&this.__awaiter||function(A,I,y,h){return new(y||(y=Promise))(function(v,w){function S(O){try{k(h.next(O))}catch(V){w(V)}}function P(O){try{k(h.throw(O))}catch(V){w(V)}}function k(O){O.done?v(O.value):function(v){return v instanceof y?v:new y(function(w){w(v)})}(O.value).then(S,P)}k((h=h.apply(A,I||[])).next())})},N=this&&this.__generator||function(A,I){var h,C,v,w,y={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return w={next:S(0),throw:S(1),return:S(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function S(k){return function(O){return function(k){if(h)throw new TypeError("Generator is already executing.");for(;y;)try{if(h=1,C&&(v=2&k[0]?C.return:k[0]?C.throw||((v=C.return)&&v.call(C),0):C.next)&&!(v=v.call(C,k[1])).done)return v;switch(C=0,v&&(k=[2&k[0],v.value]),k[0]){case 0:case 1:v=k;break;case 4:return y.label++,{value:k[1],done:!1};case 5:y.label++,C=k[1],k=[0];continue;case 7:k=y.ops.pop(),y.trys.pop();continue;default:if(!(v=(v=y.trys).length>0&&v[v.length-1])&&(6===k[0]||2===k[0])){y=0;continue}if(3===k[0]&&(!v||k[1]>v[0]&&k[1]<v[3])){y.label=k[1];break}if(6===k[0]&&y.label<v[1]){y.label=v[1],v=k;break}if(v&&y.label<v[2]){y.label=v[2],y.ops.push(k);break}v[2]&&y.ops.pop(),y.trys.pop();continue}k=I.call(A,y)}catch(O){k=[6,O],C=0}finally{h=v=0}if(5&k[0])throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}([k,O])}}};Object.defineProperty(L,"__esModule",{value:!0}),L.removeElementById=L.loadScript=void 0;var m=T(1584),g=function(A,I,y,h,C){return void 0===I&&(I=function(){}),void 0===y&&(y=function(){}),void 0===h&&(h=3),void 0===C&&(C=0),p(void 0,void 0,void 0,function(){return N(this,function(v){return[2,new Promise(function(w,S){return p(void 0,void 0,void 0,function(){var O;return N(this,function(V){switch(V.label){case 0:return Array.from(document.getElementsByTagName("script")).filter(function(U){return U.src==A}).length?[4,I()]:[3,2];case 1:return V.sent(),[2,w()];case 2:return(O=document.createElement("script")).setAttribute("src",A),O.setAttribute("type","text/javascript"),document.head.appendChild(O),O.addEventListener("load",function(){return p(void 0,void 0,void 0,function(){return N(this,function(U){switch(U.label){case 0:return[4,I()];case 1:return U.sent(),w(),[2]}})})}),O.addEventListener("error",function(){return p(void 0,void 0,void 0,function(){var U,B;return N(this,function(H){switch(H.label){case 0:return++C>=h?[4,y()]:[3,2];case 1:return H.sent(),[2,S(new Error("Resource failed to load, or can't be used."))];case 2:return O.remove(),U=1e3*Math.min(Math.pow(2,C)+Math.random(),60),[4,m.default(U)];case 3:H.sent(),H.label=4;case 4:return H.trys.push([4,6,,7]),[4,g(A,I,y,h,C)];case 5:return H.sent(),[3,7];case 6:return B=H.sent(),S(B),[3,7];case 7:return[2]}})})}),[2]}})})})]})})};L.loadScript=g;var M=function(A){var I;null===(I=document.getElementById(A))||void 0===I||I.remove()};L.removeElementById=M,L.default={loadScript:g,removeElementById:M}},6403:function(Y,L,T){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(P){for(var k,O=1,V=arguments.length;O<V;O++)for(var U in k=arguments[O])Object.prototype.hasOwnProperty.call(k,U)&&(P[U]=k[U]);return P}).apply(this,arguments)},N=this&&this.__awaiter||function(P,k,O,V){return new(O||(O=Promise))(function(B,H){function W(pe){try{$(V.next(pe))}catch(R){H(R)}}function te(pe){try{$(V.throw(pe))}catch(R){H(R)}}function $(pe){pe.done?B(pe.value):function(B){return B instanceof O?B:new O(function(H){H(B)})}(pe.value).then(W,te)}$((V=V.apply(P,k||[])).next())})},m=this&&this.__generator||function(P,k){var V,U,B,H,O={label:0,sent:function(){if(1&B[0])throw B[1];return B[1]},trys:[],ops:[]};return H={next:W(0),throw:W(1),return:W(2)},"function"==typeof Symbol&&(H[Symbol.iterator]=function(){return this}),H;function W($){return function(pe){return function($){if(V)throw new TypeError("Generator is already executing.");for(;O;)try{if(V=1,U&&(B=2&$[0]?U.return:$[0]?U.throw||((B=U.return)&&B.call(U),0):U.next)&&!(B=B.call(U,$[1])).done)return B;switch(U=0,B&&($=[2&$[0],B.value]),$[0]){case 0:case 1:B=$;break;case 4:return O.label++,{value:$[1],done:!1};case 5:O.label++,U=$[1],$=[0];continue;case 7:$=O.ops.pop(),O.trys.pop();continue;default:if(!(B=(B=O.trys).length>0&&B[B.length-1])&&(6===$[0]||2===$[0])){O=0;continue}if(3===$[0]&&(!B||$[1]>B[0]&&$[1]<B[3])){O.label=$[1];break}if(6===$[0]&&O.label<B[1]){O.label=B[1],B=$;break}if(B&&O.label<B[2]){O.label=B[2],O.ops.push($);break}B[2]&&O.ops.pop(),O.trys.pop();continue}$=k.call(P,O)}catch(pe){$=[6,pe],U=0}finally{V=B=0}if(5&$[0])throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}([$,pe])}}},x=this&&this.__spreadArrays||function(){for(var P=0,k=0,O=arguments.length;k<O;k++)P+=arguments[k].length;var V=Array(P),U=0;for(k=0;k<O;k++)for(var B=arguments[k],H=0,W=B.length;H<W;H++,U++)V[U]=B[H];return V};Object.defineProperty(L,"__esModule",{value:!0}),L.createIC3Adapter=L.createACSAdapter=L.createDirectLine=void 0;var u=T(8953),g=T(7587),M=T(7432),A=T(5480),I=T(3968),y=T(6345),h=T(9600),C=T(4674),v=function(P,k,O,V,U,B){return N(void 0,void 0,void 0,function(){var H,W,te,pe,R,$;return m(this,function(r){switch(r.label){case 0:H=P.DirectLine?P.DirectLine.options:{},W=C.default.resolveChatAdapterUrl(k,O,V),null==U||U.setCDNPackages({DirectLine:W}),B.startScenario(h.default.CreateDirectLine),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,y.loadScript(W)];case 2:return r.sent(),[3,4];case 3:throw te=r.sent(),$={response:g.default.ScriptLoadFailure,errorObject:""+te},B.failScenario(h.default.CreateDirectLine,{ExceptionDetails:JSON.stringify($)}),new Error("Failed to load DirectLine");case 4:try{return pe=window.DirectLine,R=new pe.DirectLine(p({},H)),B.completeScenario(h.default.CreateDirectLine),[2,R]}catch(s){throw $={response:g.default.ChatAdapterInitializationFailure,errorObject:""+s},B.failScenario(h.default.CreateDirectLine,{ExceptionDetails:JSON.stringify($)}),new Error("Failed to create DirectLine")}return[2]}})})};L.createDirectLine=v;var w=function(P,k,O,V,U,B,H,W,te,$,pe){return N(void 0,void 0,void 0,function(){var R,r,s,l,a,f,_,D,i,b,d;return m(this,function(z){switch(z.label){case 0:R=P.ACSAdapter?P.ACSAdapter.options:{},r=C.default.resolveChatAdapterUrl(k,O,V),null==U||U.setCDNPackages({ACSAdapter:r}),s=[M.default({widgetId:H.widgetId}),A.default()],l=[I.default()],a=(null==R?void 0:R.egressMiddleware)?x(R.egressMiddleware,s):x(s),f=(null==R?void 0:R.ingressMiddleware)?x(R.ingressMiddleware,l):x(l),_=p(p({enableAdaptiveCards:!0,enableThreadMemberUpdateNotification:!0,enableLeaveThreadOnWindowClosed:!1},R),{ingressMiddleware:f,egressMiddleware:a}),B.startScenario(h.default.CreateACSAdapter),z.label=1;case 1:return z.trys.push([1,3,,4]),[4,y.loadScript(r)];case 2:return z.sent(),[3,4];case 3:throw D=z.sent(),d={response:g.default.ScriptLoadFailure,errorObject:""+D},B.failScenario(h.default.CreateACSAdapter,{ExceptionDetails:JSON.stringify(d)}),new Error("Failed to load ACSAdapter");case 4:try{return i=window.ChatAdapter,b=i.createACSAdapter(W.token,W.visitorId||"teamsvisitor",W.chatId,W.acsEndpoint,te,3e4,u.default.Customer,$,pe,_),B.completeScenario(h.default.CreateACSAdapter),[2,b]}catch(q){throw d={response:g.default.ChatAdapterInitializationFailure,errorObject:""+q},B.failScenario(h.default.CreateACSAdapter,{ExceptionDetails:JSON.stringify(d)}),new Error("Failed to create ACSAdapter")}return[2]}})})};L.createACSAdapter=w;var S=function(P,k,O,V,U,B,H,W,te){return N(void 0,void 0,void 0,function(){var $,pe,R,s,l,r;return m(this,function(a){switch(a.label){case 0:$=P.IC3Adapter?P.IC3Adapter.options:{},pe=C.default.resolveChatAdapterUrl(k,O,V),null==U||U.setCDNPackages({IC3Adapter:pe}),B.startScenario(h.default.CreateIC3Adapter),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,y.loadScript(pe)];case 2:return a.sent(),[3,4];case 3:throw R=a.sent(),r={response:g.default.ScriptLoadFailure,errorObject:""+R},B.failScenario(h.default.CreateIC3Adapter,{ExceptionDetails:JSON.stringify(r)}),new Error("Failed to load IC3Adapter");case 4:s=p({chatToken:H,userDisplayName:"Customer",userId:H.visitorId||"teamsvisitor",sdkURL:C.default.resolveIC3ClientUrl(k),sdk:W},$);try{return(l=new window.Microsoft.BotFramework.WebChat.IC3Adapter(s)).logger=te,B.completeScenario(h.default.CreateIC3Adapter),[2,l]}catch(f){throw r={response:g.default.ChatAdapterInitializationFailure,errorObject:""+f},B.failScenario(h.default.CreateIC3Adapter,{ExceptionDetails:JSON.stringify(r)}),new Error("Failed to create IC3Adapter")}return[2]}})})};L.createIC3Adapter=S,L.default={createDirectLine:v,createACSAdapter:w,createIC3Adapter:S}},9340:function(Y,L,T){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(u){for(var g,M=1,A=arguments.length;M<A;M++)for(var I in g=arguments[M])Object.prototype.hasOwnProperty.call(g,I)&&(u[I]=g[I]);return u}).apply(this,arguments)};Object.defineProperty(L,"__esModule",{value:!0});var N=T(8191),m=T(3709);L.default=function(u,g){var M={};if(M.liveChatVersion=g.liveChatVersion||N.default.V1,g.debug&&console.log(u),g.liveChatVersion===N.default.V2){var y=u.content,h=u.metadata,C=u.sender,v=u.senderDisplayName,w=u.createdOn;if(M.id=u.id,M.messageid=void 0,M.clientmessageid=void 0,M.deliveryMode=void 0,M.properties={},M.content=y||"",M.properties.tags=h&&h.tags?h.tags:[],M.tags=h&&h.tags?h.tags.replace(/\"/g,"").split(",").filter(function(B){return B.length>0}):[],M.timestamp=w,M.messageType=m.MessageType.UserMessage,M.sender={id:C.communicationUserId,displayName:v,type:m.PersonType.Bot},h&&h.amsMetadata&&h.amsReferences||h.amsreferences)try{var S=JSON.parse(h.amsMetadata),P=JSON.parse(h.amsreferences||h.amsReferences),k=S[0],O=k.fileName,V=k.contentType;M.fileMetadata={},M.fileMetadata.fileSharingProtocolType=0,M.fileMetadata.id=P[0],M.fileMetadata.name=O,M.fileMetadata.size=0,M.fileMetadata.type=V,M.fileMetadata.url=""}catch(B){}}else M.id=u.clientmessageid,M=p({},u);return M}},838:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(2235);L.default=function(m){return void 0===m&&(m=!1),p.default.setDebug(m),p.default}},1775:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.getDirectLineCDNUrl=L.getACSAdapterCDNUrl=L.getIC3AdapterCDNUrl=L.getIC3ClientCDNUrl=void 0;var p=T(4151),N=function(g){return void 0===g&&(g=p.ic3ClientVersion),"https://comms.omnichannelengagementhub.com/release/"+g+"/Scripts/SDK/SDK.min.js"};L.getIC3ClientCDNUrl=N;var m=function(g){return void 0===g&&(g=p.webChatIC3AdapterVersion),"https://webchatic3.blob.core.windows.net/webchat-ic3adapter/"+g+"/botframework-webchat-adapter-ic3.production.min.js"};L.getIC3AdapterCDNUrl=m;var x=function(g){return void 0===g&&(g=p.webChatACSAdapterVersion),"https://unpkg.com/acs_webchat-chat-adapter@"+g+"/dist/chat-adapter.js"};L.getACSAdapterCDNUrl=x;var u=function(g){return void 0===g&&(g=p.webChatDirectLineVersion),"https://unpkg.com/botframework-directlinejs@"+g+"/dist/directline.js"};L.getDirectLineCDNUrl=u,L.default={getIC3ClientCDNUrl:N,getIC3AdapterCDNUrl:m,getACSAdapterCDNUrl:x,getDirectLineCDNUrl:u}},8290:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.defaultLocaleString=L.defaultLocaleId=L.getLocaleIdFromString=L.getLocaleStringFromId=void 0;var T={1025:"ar-sa",1026:"bg-bg",1027:"ca-es",1029:"cs-cz",1030:"da-dk",1031:"de-de",1032:"el-gr",1033:"en-us",3082:"es-es",1061:"et-ee",1069:"eu-es",1035:"fi-fi",1036:"fr-fr",1110:"gl-es",1037:"he-il",1081:"hi-in",1050:"hr-hr",1038:"hu-hu",1057:"id-id",1040:"it-it",1041:"ja-jp",1087:"kk-kz",1042:"ko-kr",1063:"lt-lt",1062:"lv-lv",1086:"ms-my",1044:"nb-no",1043:"nl-nl",1045:"pl-pl",1046:"pt-br",2070:"pt-pt",1048:"ro-ro",1049:"ru-ru",1051:"sk-sk",1060:"sl-si",3098:"sr-cyrl-cs",2074:"sr-latn-cs",1053:"sv-se",1054:"th-th",1055:"tr-tr",1058:"uk-ua",1066:"vi-vn",2052:"zh-cn",3076:"zh-hk",1028:"zh-tw"};L.getLocaleStringFromId=function(p){var N=Object.keys(T).find(function(m){return m===p});return N?T[N]:L.defaultLocaleString},L.getLocaleIdFromString=function(p){var N=Object.keys(T).find(function(m){return T[m]===p});return null!=N?N:L.defaultLocaleId},L.defaultLocaleId="1033",L.defaultLocaleString="en-us"},6032:function(Y,L,T){"use strict";var p=this&&this.__awaiter||function(u,g,M,A){return new(M||(M=Promise))(function(y,h){function C(S){try{w(A.next(S))}catch(P){h(P)}}function v(S){try{w(A.throw(S))}catch(P){h(P)}}function w(S){S.done?y(S.value):function(y){return y instanceof M?y:new M(function(h){h(y)})}(S.value).then(C,v)}w((A=A.apply(u,g||[])).next())})},N=this&&this.__generator||function(u,g){var A,I,y,h,M={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return h={next:C(0),throw:C(1),return:C(2)},"function"==typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h;function C(w){return function(S){return function(w){if(A)throw new TypeError("Generator is already executing.");for(;M;)try{if(A=1,I&&(y=2&w[0]?I.return:w[0]?I.throw||((y=I.return)&&y.call(I),0):I.next)&&!(y=y.call(I,w[1])).done)return y;switch(I=0,y&&(w=[2&w[0],y.value]),w[0]){case 0:case 1:y=w;break;case 4:return M.label++,{value:w[1],done:!1};case 5:M.label++,I=w[1],w=[0];continue;case 7:w=M.ops.pop(),M.trys.pop();continue;default:if(!(y=(y=M.trys).length>0&&y[y.length-1])&&(6===w[0]||2===w[0])){M=0;continue}if(3===w[0]&&(!y||w[1]>y[0]&&w[1]<y[3])){M.label=w[1];break}if(6===w[0]&&M.label<y[1]){M.label=y[1],y=w;break}if(y&&M.label<y[2]){M.label=y[2],M.ops.push(w);break}y[2]&&M.ops.pop(),M.trys.pop();continue}w=g.call(u,M)}catch(S){w=[6,S],I=0}finally{A=y=0}if(5&w[0])throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}([w,S])}}};Object.defineProperty(L,"__esModule",{value:!0}),L.getLocationInfo=void 0;var m=T(9600),x=T(8098);L.getLocationInfo=function(u,g,M){return p(void 0,void 0,void 0,function(){var A;return N(this,function(I){return A=function(y,h){var C;console.error(y,h);try{C=JSON.stringify({Response:y,ExceptionalDetails:h})}catch(v){C=JSON.stringify({Response:y})}u.failScenario(m.default.GetGeolocation,{RequestId:M,ChatId:g,ExceptionDetails:C})},[2,new Promise(function(y,h){u.startScenario(m.default.GetGeolocation,{RequestId:M});var C={latitude:"",longitude:""};(x.default.isNode()||x.default.isReactNative()||!navigator.geolocation)&&(A("Unsupported"),y(C)),navigator.geolocation.getCurrentPosition(function(S){try{C.latitude=S.coords.latitude.toString(),C.longitude=S.coords.longitude.toString(),u.completeScenario(m.default.GetGeolocation,{RequestId:M,ChatId:g}),y(C)}catch(P){A("GetGeolocationFailed",P),y(C)}},function(S){A("GetGeolocationFailed",S),y(C)})})]})})}},2811:function(Y,L,T){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(h){for(var C,v=1,w=arguments.length;v<w;v++)for(var S in C=arguments[v])Object.prototype.hasOwnProperty.call(C,S)&&(h[S]=C[S]);return h}).apply(this,arguments)};Object.defineProperty(L,"__esModule",{value:!0}),L.createAMSClientLogger=L.createCallingSDKLogger=L.createACSAdapterLogger=L.createACSClientLogger=L.createOCSDKLogger=L.createIC3ClientLogger=L.AMSClientLogger=L.CallingSDKLogger=L.ACSAdapterLogger=L.ACSClientLogger=L.OCSDKLogger=L.IC3ClientLogger=void 0;var N=T(7095),m=T(3037),x=T(1247),u=function(){function h(C){this.omnichannelConfig=C,this.debug=!1,this.runtimeId="",this.requestId="",this.chatId="",this.telemetry=null,this.debug=!1}return h.prototype.setDebug=function(C){this.debug=C},h.prototype.setRuntimeId=function(C){this.runtimeId=C},h.prototype.setRequestId=function(C){this.requestId=C},h.prototype.setChatId=function(C){this.chatId=C},h.prototype.useTelemetry=function(C){this.debug&&console.log("[IC3ClientLogger][useTelemetry]"),this.telemetry=C},h.prototype.logClientSdkTelemetryEvent=function(C,v){var w,S,P,k;this.debug&&console.log("[IC3ClientLogger][logClientSdkTelemetryEvent]["+C+"]"),this.debug&&console.log(v);var O={ChatSDKRuntimeId:this.runtimeId,OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,RequestId:this.requestId,ChatId:this.chatId},V=p(p({},v),{ExceptionDetails:v.ExceptionDetails?JSON.stringify(v.ExceptionDetails):""});switch(C){case N.default.DEBUG:null===(w=this.telemetry)||void 0===w||w.debug(p(p({},O),V),m.default.IC3CLIENT);break;case N.default.WARN:null===(S=this.telemetry)||void 0===S||S.warn(p(p({},O),V),m.default.IC3CLIENT);break;case N.default.ERROR:null===(P=this.telemetry)||void 0===P||P.error(p(p({},O),V),m.default.IC3CLIENT);break;case N.default.INFO:default:null===(k=this.telemetry)||void 0===k||k.info(p(p({},O),V),m.default.IC3CLIENT)}},h}();L.IC3ClientLogger=u;var g=function(){function h(C){this.omnichannelConfig=C,this.debug=!1,this.runtimeId="",this.requestId="",this.chatId="",this.telemetry=null,this.debug=!1}return h.prototype.setDebug=function(C){this.debug=C},h.prototype.setRuntimeId=function(C){this.runtimeId=C},h.prototype.setRequestId=function(C){this.requestId=C},h.prototype.setChatId=function(C){this.chatId=C},h.prototype.useTelemetry=function(C){this.debug&&console.log("[OCSDKLogger][useTelemetry]"),this.telemetry=C},h.prototype.logClientSdkTelemetryEvent=function(C,v){var w,S,P,k;this.debug&&console.log("[OCSDKLogger][logClientSdkTelemetryEvent]["+C+"]"),this.debug&&console.log(v);var O={ChatSDKRuntimeId:this.runtimeId,OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,RequestId:this.requestId,ChatId:this.chatId},V=p(p({},v),{ExceptionDetails:v.ExceptionDetails?JSON.stringify(v.ExceptionDetails):""});switch(C){case N.default.DEBUG:null===(w=this.telemetry)||void 0===w||w.debug(p(p({},O),V),m.default.OCSDK);break;case N.default.WARN:null===(S=this.telemetry)||void 0===S||S.warn(p(p({},O),V),m.default.OCSDK);break;case N.default.ERROR:null===(P=this.telemetry)||void 0===P||P.error(p(p({},O),V),m.default.OCSDK);break;case N.default.INFO:default:null===(k=this.telemetry)||void 0===k||k.info(p(p({},O),V),m.default.OCSDK)}},h}();L.OCSDKLogger=g;var M=function(){function h(C){this.omnichannelConfig=C,this.debug=!1,this.runtimeId="",this.requestId="",this.chatId="",this.telemetry=null,this.scenarioMarker=null,this.debug=!1,this.scenarioMarker=new x.default(C),this.scenarioMarker.setScenarioType(m.default.ACSCLIENT)}return h.prototype.setDebug=function(C){var v;this.debug=C,null===(v=this.scenarioMarker)||void 0===v||v.setDebug(C)},h.prototype.setRuntimeId=function(C){var v;this.runtimeId=C,null===(v=this.scenarioMarker)||void 0===v||v.setRuntimeId(C)},h.prototype.setRequestId=function(C){this.requestId=C},h.prototype.setChatId=function(C){this.chatId=C},h.prototype.useTelemetry=function(C){var v;this.debug&&console.log("[ACSClientLogger][useTelemetry]"),this.telemetry=C,null===(v=this.scenarioMarker)||void 0===v||v.useTelemetry(this.telemetry)},h.prototype.logClientSdkTelemetryEvent=function(C,v){var w,S,P,k;this.debug&&console.log("[ACSClientLogger][logClientSdkTelemetryEvent]["+C+"]"),this.debug&&console.log(v);var O={ChatSDKRuntimeId:this.runtimeId,OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,RequestId:this.requestId,ChatId:this.chatId},V=p(p({},v),{ExceptionDetails:v.ExceptionDetails?JSON.stringify(v.ExceptionDetails):""});switch(C){case N.default.DEBUG:null===(w=this.telemetry)||void 0===w||w.debug(p(p({},O),V),m.default.ACSCLIENT);break;case N.default.WARN:null===(S=this.telemetry)||void 0===S||S.warn(p(p({},O),V),m.default.ACSCLIENT);break;case N.default.ERROR:null===(P=this.telemetry)||void 0===P||P.error(p(p({},O),V),m.default.ACSCLIENT);break;case N.default.INFO:default:null===(k=this.telemetry)||void 0===k||k.info(p(p({},O),V),m.default.ACSCLIENT)}},h.prototype.startScenario=function(C,v){var w;void 0===v&&(v={}),null===(w=this.scenarioMarker)||void 0===w||w.startScenario(C,p(p({},{RequestId:this.requestId,ChatId:this.chatId}),v))},h.prototype.failScenario=function(C,v){var w;void 0===v&&(v={}),null===(w=this.scenarioMarker)||void 0===w||w.failScenario(C,p(p({},{RequestId:this.requestId,ChatId:this.chatId}),v))},h.prototype.completeScenario=function(C,v){var w;void 0===v&&(v={}),null===(w=this.scenarioMarker)||void 0===w||w.completeScenario(C,p(p({},{RequestId:this.requestId,ChatId:this.chatId}),v))},h}();L.ACSClientLogger=M;var A=function(){function h(C){this.omnichannelConfig=C,this.debug=!1,this.runtimeId="",this.requestId="",this.chatId="",this.telemetry=null,this.scenarioMarker=null,this.debug=!1,this.scenarioMarker=new x.default(C),this.scenarioMarker.setScenarioType(m.default.ACSADAPTER)}return h.prototype.setDebug=function(C){var v;this.debug=C,null===(v=this.scenarioMarker)||void 0===v||v.setDebug(C)},h.prototype.setRuntimeId=function(C){var v;this.runtimeId=C,null===(v=this.scenarioMarker)||void 0===v||v.setRuntimeId(this.runtimeId)},h.prototype.setRequestId=function(C){this.requestId=C},h.prototype.setChatId=function(C){this.chatId=C},h.prototype.useTelemetry=function(C){var v;this.debug&&console.log("[ACSAdapterLogger][useTelemetry]"),this.telemetry=C,null===(v=this.scenarioMarker)||void 0===v||v.useTelemetry(this.telemetry)},h.prototype.logEvent=function(C,v){var w,S,P,k;this.debug&&console.log("[ACSAdapterLogger][logClientSdkTelemetryEvent]["+C+"]"),this.debug&&console.log(v);var O={ChatSDKRuntimeId:this.runtimeId,OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,RequestId:this.requestId,ChatId:this.chatId},V=p(p({},v),{ExceptionDetails:v.ExceptionDetails?JSON.stringify(v.ExceptionDetails):""});switch(C){case N.default.DEBUG:null===(w=this.telemetry)||void 0===w||w.debug(p(p({},O),V),m.default.ACSADAPTER);break;case N.default.WARN:null===(S=this.telemetry)||void 0===S||S.warn(p(p({},O),V),m.default.ACSADAPTER);break;case N.default.ERROR:null===(P=this.telemetry)||void 0===P||P.error(p(p({},O),V),m.default.ACSADAPTER);break;case N.default.INFO:default:null===(k=this.telemetry)||void 0===k||k.info(p(p({},O),V),m.default.ACSADAPTER)}},h.prototype.startScenario=function(C,v){var w;void 0===v&&(v={}),null===(w=this.scenarioMarker)||void 0===w||w.startScenario(C,p(p({},{RequestId:this.requestId,ChatId:this.chatId}),v))},h.prototype.failScenario=function(C,v){var w;void 0===v&&(v={}),null===(w=this.scenarioMarker)||void 0===w||w.failScenario(C,p(p({},{RequestId:this.requestId,ChatId:this.chatId}),v))},h.prototype.completeScenario=function(C,v){var w;void 0===v&&(v={}),null===(w=this.scenarioMarker)||void 0===w||w.completeScenario(C,p(p({},{RequestId:this.requestId,ChatId:this.chatId}),v))},h}();L.ACSAdapterLogger=A;var I=function(){function h(C){this.omnichannelConfig=C,this.debug=!1,this.runtimeId="",this.requestId="",this.chatId="",this.telemetry=null,this.debug=!1}return h.prototype.setDebug=function(C){this.debug=C},h.prototype.setRuntimeId=function(C){this.runtimeId=C},h.prototype.setRequestId=function(C){this.requestId=C},h.prototype.setChatId=function(C){this.chatId=C},h.prototype.useTelemetry=function(C){this.debug&&console.log("[CallingSDKLogger][useTelemetry]"),this.telemetry=C},h.prototype.logCallingSdkTelemetryEvent=function(C,v){var w,S,P,k;this.debug&&console.log("[CallingSDKLogger][logClientSdkTelemetryEvent]["+C+"]"),this.debug&&console.log(v);var O={ChatSDKRuntimeId:this.runtimeId,OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,RequestId:this.requestId,ChatId:this.chatId},V=p(p({},v),{ExceptionDetails:v.ExceptionDetails?JSON.stringify(v.ExceptionDetails):""});switch(C){case N.default.DEBUG:null===(w=this.telemetry)||void 0===w||w.debug(p(p({},O),V),m.default.CALLINGSDK);break;case N.default.WARN:null===(S=this.telemetry)||void 0===S||S.warn(p(p({},O),V),m.default.CALLINGSDK);break;case N.default.ERROR:null===(P=this.telemetry)||void 0===P||P.error(p(p({},O),V),m.default.CALLINGSDK);break;case N.default.INFO:default:null===(k=this.telemetry)||void 0===k||k.info(p(p({},O),V),m.default.CALLINGSDK)}},h}();L.CallingSDKLogger=I;var y=function(){function h(C){this.omnichannelConfig=C,this.debug=!1,this.runtimeId="",this.requestId="",this.chatId="",this.telemetry=null,this.debug=!1}return h.prototype.setDebug=function(C){this.debug=C},h.prototype.setRuntimeId=function(C){this.runtimeId=C},h.prototype.setRequestId=function(C){this.requestId=C},h.prototype.setChatId=function(C){this.chatId=C},h.prototype.useTelemetry=function(C){this.debug&&console.log("[AMSClientLogger][useTelemetry]"),this.telemetry=C},h.prototype.logClientSdkTelemetryEvent=function(C,v){var w,S,P,k;this.debug&&console.log("[AMSClientLogger][logClientSdkTelemetryEvent]["+C+"]"),this.debug&&console.log(v);var O={ChatSDKRuntimeId:this.runtimeId,OrgId:this.omnichannelConfig.orgId,OrgUrl:this.omnichannelConfig.orgUrl,WidgetId:this.omnichannelConfig.widgetId,RequestId:this.requestId,ChatId:this.chatId},V=p(p({},v),{ExceptionDetails:v.ExceptionDetails?JSON.stringify(v.ExceptionDetails):""});switch(C){case N.default.DEBUG:null===(w=this.telemetry)||void 0===w||w.debug(p(p({},O),V),m.default.AMSCLIENT);break;case N.default.WARN:null===(S=this.telemetry)||void 0===S||S.warn(p(p({},O),V),m.default.AMSCLIENT);break;case N.default.ERROR:null===(P=this.telemetry)||void 0===P||P.error(p(p({},O),V),m.default.AMSCLIENT);break;case N.default.INFO:default:null===(k=this.telemetry)||void 0===k||k.info(p(p({},O),V),m.default.AMSCLIENT)}},h}();L.AMSClientLogger=y,L.createIC3ClientLogger=function(h,C){void 0===C&&(C=!1);var v=new u(h);return v.setDebug(C),v},L.createOCSDKLogger=function(h,C){void 0===C&&(C=!1);var v=new g(h);return v.setDebug(C),v},L.createACSClientLogger=function(h,C){void 0===C&&(C=!1);var v=new M(h);return v.setDebug(C),v},L.createACSAdapterLogger=function(h,C){void 0===C&&(C=!1);var v=new A(h);return v.setDebug(C),v},L.createCallingSDKLogger=function(h,C){void 0===C&&(C=!1);var v=new I(h);return v.setDebug(C),v},L.createAMSClientLogger=function(h,C){void 0===C&&(C=!1);var v=new y(h);return v.setDebug(C),v}},8098:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.isReactNative=L.isNode=L.isBrowser=void 0,L.isBrowser=function(){return"undefined"!=typeof window&&void 0!==window.document},L.isNode=function(){return"undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node},L.isReactNative=function(){return"undefined"!=typeof navigator&&"ReactNative"==navigator.product},L.default={isBrowser:L.isBrowser,isNode:L.isNode,isReactNative:L.isReactNative}},1584:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.default=function(p){return new Promise(function(N){return setTimeout(N,p)})}},4674:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.resolveChatAdapterUrl=L.resolveIC3ClientUrl=void 0;var p=T(8191),N=T(7474),m=T(1775),x=function(I){return I.ic3Config&&"ic3ClientCDNUrl"in I.ic3Config?I.ic3Config.ic3ClientCDNUrl:I.ic3Config&&"ic3ClientVersion"in I.ic3Config?m.default.getIC3ClientCDNUrl(I.ic3Config.ic3ClientVersion):m.default.getIC3ClientCDNUrl()};L.resolveIC3ClientUrl=x;var A=function(I,y,h){if(h&&![N.default.ACS,N.default.IC3,N.default.DirectLine].includes(h))throw new Error("ChatAdapter for protocol "+h+" currently not supported");return h===N.default.DirectLine?function(I){return I.chatAdapterConfig&&"webChatDirectLineCDNUrl"in I.chatAdapterConfig?I.chatAdapterConfig.webChatDirectLineCDNUrl:I.chatAdapterConfig&&"webChatDirectLineVersion"in I.chatAdapterConfig?m.default.getDirectLineCDNUrl(I.chatAdapterConfig.webChatDirectLineVersion):m.default.getDirectLineCDNUrl()}(I):h===N.default.ACS||y===p.default.V2?function(I){return I.chatAdapterConfig&&"webChatACSAdapterCDNUrl"in I.chatAdapterConfig?I.chatAdapterConfig.webChatACSAdapterCDNUrl:I.chatAdapterConfig&&"webChatACSAdapterVersion"in I.chatAdapterConfig?m.default.getACSAdapterCDNUrl(I.chatAdapterConfig.webChatACSAdapterVersion):m.default.getACSAdapterCDNUrl()}(I):h===N.default.IC3||y===p.default.V1?function(I){return I.chatAdapterConfig&&"webChatIC3AdapterCDNUrl"in I.chatAdapterConfig?I.chatAdapterConfig.webChatIC3AdapterCDNUrl:I.chatAdapterConfig&&"webChatIC3AdapterVersion"in I.chatAdapterConfig?m.default.getIC3AdapterCDNUrl(I.chatAdapterConfig.webChatIC3AdapterVersion):m.default.getIC3AdapterCDNUrl()}(I):""};L.resolveChatAdapterUrl=A,L.default={resolveIC3ClientUrl:x,resolveChatAdapterUrl:A}},9425:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.isCustomerMessage=L.isSystemMessage=void 0;var p=T(3372),N=T(8953);L.isSystemMessage=function(m){var u=m.properties,g=m.messageType===p.default.UserMessage&&u&&u.tags&&u.tags.includes("system"),M=m.tags&&m.tags.includes("system");return g||M||!1},L.isCustomerMessage=function(m){var x=m.sender;return x&&x.id&&x.id.includes("contacts/8:")||x&&x.displayName&&x.displayName===N.default.Customer||!1}},7616:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=["orgUrl","orgId","widgetId"];L.default=function(N){if(!N)throw new Error("OmnichannelConfiguration not found");for(var m=Object.keys(N),x=0,u=T;x<u.length;x++){var g=u[x];if(!m.includes(g))throw new Error("Missing '"+g+"' in OmnichannelConfiguration")}}},641:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.defaultChatSDKConfig=void 0;var N={dataMasking:{disable:!1,maskingCharacter:"#"},telemetry:{disable:!1,ariaTelemetryKey:T(4151).ariaTelemetryKey},persistentChat:{disable:!0,tokenUpdateTime:216e5},chatReconnect:{disable:!0}};L.defaultChatSDKConfig=N,L.default=function(g){g.dataMasking&&function(g){"boolean"!=typeof g.disable&&(g.disable=N.dataMasking.disable),("string"!=typeof g.maskingCharacter||1!==g.maskingCharacter.length)&&(g.maskingCharacter=N.dataMasking.maskingCharacter)}(g.dataMasking),g.persistentChat&&function(g){("number"!=typeof g.tokenUpdateTime||!g.tokenUpdateTime)&&(g.tokenUpdateTime=N.persistentChat.tokenUpdateTime)}(g.persistentChat)}},5145:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.read="read",p}();L.default=T},3865:function(Y,L,T){"use strict";var p=this&&this.__awaiter||function(v,w,S,P){return new(S||(S=Promise))(function(O,V){function U(W){try{H(P.next(W))}catch(te){V(te)}}function B(W){try{H(P.throw(W))}catch(te){V(te)}}function H(W){W.done?O(W.value):function(O){return O instanceof S?O:new S(function(V){V(O)})}(W.value).then(U,B)}H((P=P.apply(v,w||[])).next())})},N=this&&this.__generator||function(v,w){var P,k,O,V,S={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return V={next:U(0),throw:U(1),return:U(2)},"function"==typeof Symbol&&(V[Symbol.iterator]=function(){return this}),V;function U(H){return function(W){return function(H){if(P)throw new TypeError("Generator is already executing.");for(;S;)try{if(P=1,k&&(O=2&H[0]?k.return:H[0]?k.throw||((O=k.return)&&O.call(k),0):k.next)&&!(O=O.call(k,H[1])).done)return O;switch(k=0,O&&(H=[2&H[0],O.value]),H[0]){case 0:case 1:O=H;break;case 4:return S.label++,{value:H[1],done:!1};case 5:S.label++,k=H[1],H=[0];continue;case 7:H=S.ops.pop(),S.trys.pop();continue;default:if(!(O=(O=S.trys).length>0&&O[O.length-1])&&(6===H[0]||2===H[0])){S=0;continue}if(3===H[0]&&(!O||H[1]>O[0]&&H[1]<O[3])){S.label=H[1];break}if(6===H[0]&&S.label<O[1]){S.label=O[1],O=H;break}if(O&&S.label<O[2]){S.label=O[2],S.ops.push(H);break}O[2]&&S.ops.pop(),S.trys.pop();continue}H=w.call(v,S)}catch(W){H=[6,W],k=0}finally{P=O=0}if(5&H[0])throw H[1];return{value:H[0]?H[1]:void 0,done:!0}}([H,W])}}};Object.defineProperty(L,"__esModule",{value:!0});var m=T(501),x=T(6849),u=T(5874),g=T(2915),M=T(1927),A=T(6648),I=T(5145),y=T(6355),h=T(8636),C=function(){function v(){}return v.getDocumentTypeFromContentType=function(w){return h.default.isDocumentTypeImage(w)?m.default.DocumentTypeImage:m.default.DocumentTypeFile},v.createNewDocument=function(w,S,P){return p(this,void 0,void 0,function(){var O,V,U,B,H;return N(this,function(W){return(H={})[w]=[I.default[I.default.read]],O={filename:S.name,permissions:H,type:v.getDocumentTypeFromContentType(S.type)},V=M.default.getAmsObjectsUrl(P.RegionGtms),(U=A.default.getDefaultAMSHeaders(P.SkypeToken))[x.default.ContentTypeHeader]=m.default.ContentTypeJson,B={data:JSON.stringify(O),headers:U,type:u.default.POST,url:V},[2,g.HttpClient.MakeRequest(B)]})})},v.uploadDocument=function(w,S,P){return p(this,void 0,void 0,function(){var k,O,V;return N(this,function(B){return console.log("AmsHelper.ts uploadDocument(): "+w+", "+S+", "+P),k=h.default.isDocumentTypeImage(S.type),O=M.default.getAmsObjectContentUrl(w,P.RegionGtms,k),V=A.default.getDefaultAMSHeaders(P.SkypeToken),[2,g.HttpClient.MakeRequest({data:S.data,headers:V,processData:!1,type:u.default.PUT,url:O})]})})},v.getFileStatus=function(w,S){var P=h.default.isImageType(w.type),k=M.default.getAmsStatusUrl(w.id,S.RegionGtms,P);return this.getViewStatus(k,S).then(function(O){return O.scan&&O.scan.status===m.default.Malware?y.default.Error:O.view_state===m.default.Ready?y.default.Success:O.scan&&O.scan.status===m.default.InProgress||O.view_state&&O.view_state!==m.default.Failed?y.default.InProgress:y.default.Error}).catch(function(){return Promise.reject({})})},v.downloadDocument=function(w,S){var P=this,k=h.default.isImageType(w.type),O=M.default.getAmsStatusUrl(w.id,S.RegionGtms,k);return new Promise(function(V){P.getViewUri(O,S).then(function(U){var B=new Headers;return B.append("Authorization","skype_token "+S.SkypeToken),B.append("X-MS-Client-Version",m.default.ClientVersion),k&&(B.append("accept",m.default.AMSAcceptHeaderValue),B.append("Accept-Encoding",m.default.AMSAcceptEncodingHeaderValue)),fetch(U,{headers:B,method:u.default.GET}).then(function(W){V(W.blob())}).catch(function(){return Promise.reject({})})})})},v.getViewUri=function(w,S){var P=this;return this.getViewStatus(w,S).then(function(k){return!k.view_location||k.view_state===m.default.Failed||k.scan&&k.scan.status===m.default.Malware?Promise.reject({}):k.view_state&&k.view_state!==m.default.Ready?P.getViewUri(w,S):k.content_state===m.default.Expired?Promise.reject({}):Promise.resolve(k.view_location)}).catch(function(){return Promise.reject("")})},v.getViewStatus=function(w,S){var P=this;return console.log("AmsHelper.ts getViewStatus(): "+w+", "+S),new Promise(function(k){setTimeout(k,m.default.DelayForAms)}).then(function(){var k=A.default.getDefaultAMSViewHeaders(S.SkypeToken);return g.HttpClient.MakeRequest({headers:k,type:u.default.GET,url:w}).then(function(V){return V.status_location&&!V.view_state?P.getViewStatus(V.status_location,S):Promise.resolve(V)}).catch(function(V){return Promise.reject(401===V.status||403===V.status?"unauthorized":{})})})},v}();L.default=C},501:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.NewMessageEvent="NewMessage",p.MessageUpdateEvent="MessageUpdate",p.ThreadUpdateEvent="ThreadUpdate",p.ConversationUpdateEvent="ConversationUpdate",p.HttpLongPoll="HttpLongPoll",p.ContentTypeJson="application/json",p.ContentTypeTextPlain="text/plain;charset=UTF-8",p.ContentTypeForm="application/x-www-form-urlencoded",p.RedirectAs404="redirectAs404",p.NoCache="no-cache",p.User="user",p.Web="web",p.ClientInfoValue="os=Windows; osVer=10; proc=Win32; lcid=en-us; deviceType=1; country=IN; clientName=swc; clientVer=912/0.106.0.34//swc",p.TextPlainMimeType="text/plain",p.SwcName="SWC",p.Image="image",p.ClientVersion="937/0.123.0.9",p.DelayForAms=50,p.Reset_Flag="reset_ic3_needed",p.Malware="malware",p.Ready="ready",p.InProgress="in progress",p.Failed="failed",p.Expired="expired",p.ImageView="imgpsh_fullsize_anim",p.FileView="original",p.DocumentTypeImage="pish/image",p.DocumentTypeFile="sharing/file",p.ImageContent="imgpsh",p.FileContent="original",p.AMSAcceptHeaderValue="image/webp,image/ *,*/*;q=0.8",p.AMSAcceptEncodingHeaderValue="gzip, deflate, sdch, br",p.AMSAuthorizationSkypeTokenValue="skype_token ",p.stabilizePollMaxRetryCount=50,p.timeBetweenStabilizingPoll=1e3,p.retryCount=2,p.retry404Count=3,p.retryOtherCount=3,p.liveStateRetryCount=3,p.timeBetweenOperationRetry=1e3,p.heartBeatDuration=3e4,p.endpointRequestLog="Endpoint request",p.subscriptionRequestLog="Subscription request",p.setPropertiesRequestLog="Set message properties request",p.unsubscribeRequestLog="Unsubscribe from endpoint request",p.pollRequestLog="Polling",p.oldInitializer="Old initializer",p.newInitializer="New Initializer",p.skypeTokenAuthURL="/v1/skypetokenauth",p.skypeTokenConstantForData="skypetoken=",p}();L.default=T},1927:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(501),N=T(6849),m=T(909),x=function(){function u(){}return u.getV2EndpointUrl=function(g,M){return M.chatService+"/v2/users/ME/endpoints/"+g},u.getThreadUrl=function(g,M){return M.chatService+"/v1/threads/"+g+"?view=msnp24Equivalent"},u.getMessagesUrl=function(g,M){return M.chatService+"/v1/users/ME/conversations/"+g+"/messages"},u.getBotMessagesUrl=function(g,M){return M.chatService+"/v1/agents/"+g+"/invoke"},u.getAmsObjectsUrl=function(g){return m.default.sanitizeUrlWithBackSlash(g.ams)+"v1/objects"},u.getAmsObjectContentUrl=function(g,M,A){void 0===A&&(A=!1);var I=A?p.default.ImageContent:p.default.FileContent;return m.default.sanitizeUrlWithBackSlash(M.ams)+"v1/objects/"+g+"/content/"+I},u.getAmsObjectViewUrl=function(g,M,A){void 0===A&&(A=!1);var I=A?p.default.ImageView:p.default.FileView;return m.default.sanitizeUrlWithBackSlash(M.ams)+"v1/objects/"+g+"/views/"+I},u.getAmsStatusUrl=function(g,M,A){void 0===A&&(A=!1);var I=A?p.default.ImageView:p.default.FileView;return m.default.sanitizeUrlWithBackSlash(M.ams)+"v1/objects/"+g+"/views/"+I+"/status"},u.getV1EndpointUrl=function(g){return g.chatService+"/v1/users/ME/endpoints"},u.getV1DeleteEndpointUrl=function(g,M){return g.chatService+"/v1/users/ME/endpoints/"+M},u.getV1SubscriptionUrl=function(g){return g.chatService+"/v1/users/ME/endpoints/SELF/subscriptions"},u.getV1PollUrl=function(g,M){return g.chatService+"/v1/users/ME/endpoints/SELF/subscriptions/"+M+"/poll"},u.getV1SetPropertiesUrl=function(g){return g.chatService+"/v1/users/ME/endpoints/SELF/properties?name="+N.default.SetEndpointProperty},u}();L.default=x},8636:function(Y,L,T){"use strict";var p=this&&this.__assign||function(){return(p=Object.assign||function(w){for(var S,P=1,k=arguments.length;P<k;P++)for(var O in S=arguments[P])Object.prototype.hasOwnProperty.call(S,O)&&(w[O]=S[O]);return w}).apply(this,arguments)};Object.defineProperty(L,"__esModule",{value:!0});var N=T(501),m=T(2900),x=T(4694),u=T(3787),g=T(448),M=T(3207),A=T(3372),I=T(4352),y=T(1927),h=T(7708),C=T(909),v=function(){function w(){}return w.createMessageData=function(S){var k=S.content,O=w.createBaseMessageData(S.contentType===g.default.Text?M.default.Text:M.default.RichTextHtml,S.contentType.toString(),k);return O.properties=this.getMessageProperties(S),C.default.isNullOrUndefined(S.sender.displayName)||(O.imdisplayname=S.sender.displayName),O},w.createBaseMessageData=function(S,P,k){return{"Has-Mentions":"false",clientmessageid:Date.now().toString(),composetime:(new Date).toISOString(),content:k,contenttype:P,messagetype:S}},w.getMessageProperties=function(S){var P={};if(P.deliveryMode=S.deliveryMode.toString(),S.tags){var k=[];S.tags.forEach(function(O){k.push(O)}),P.tags=k.join()}return P},w.createTypingStatusThreadMessageData=function(S,P){var k="";switch(S){case h.default.Typing:k=M.default.ControlTyping;break;case h.default.ClearTyping:k=M.default.ControlClearTyping}var O=w.createBaseMessageData(k,g.default.Text,"");return C.default.isNullOrUndefined(P)||(O=p(p({},P),O)),O},w.createBotMessageData=function(S,P){return JSON.stringify({conversation:{id:S},value:P})},w.createFileMessage=function(S,P,k){var O=M.default.Text,V=g.default.Text.toString().toLowerCase(),U=w.createBaseMessageData(O,V.toString(),"");return U.amsreferences=JSON.stringify([S.id]),U.properties=JSON.stringify(this.createFileMessageProperties(S,P,k)),C.default.isNullOrUndefined(k.sender.displayName)||(U.imdisplayname=k.sender.displayName),U},w.createFileMessageProperties=function(S,P,k){var O={};if(O.deliveryMode=k.deliveryMode.toString(),O.files=JSON.stringify([this.createFileProperty(S,P)]),O.importance="",O.subject="",k.tags){var V=[];k.tags.forEach(function(U){V.push(U)}),O.tags=V.join()}return O},w.createFileProperty=function(S,P){var k=!!w.isDocumentTypeImage(S.type);return{"@type":"http://schema.skype.com/File",type:S.type,itemid:"",baseUrl:"",providerData:"",version:2,id:S.id,title:S.name,state:"active",objectUrl:y.default.getAmsObjectViewUrl(S.id,P.RegionGtms,k),fileName:S.name,fileType:w.getNameAndExtension(S.name).extension,botFileProperties:{url:y.default.getAmsObjectViewUrl(S.id,P.RegionGtms,k)},fileInfo:{fileUrl:y.default.getAmsObjectContentUrl(S.id,P.RegionGtms,k),siteUrl:"",serverRelativeUrl:""},filePreview:{previewUrl:""}}},w.getNameAndExtension=function(S){var P=(S||"").split("."),k="",O="";return P.length>1?(O=P.pop().toLowerCase(),k=P.join(".")):(O="",k=P[0]),{name:k,extension:O}},w.createIRawMessage=function(S,P,k){var V,U,O={clientmessageid:S.clientmessageid,content:S.content,contentType:w.getMessageContentType(S),deliveryMode:C.default.isNullOrUndefined(S.properties)||S.properties.deliveryMode!==m.default.Bridged?m.default.Unbridged:m.default.Bridged,messageType:w.getMessageType(S),properties:S.properties,sender:{displayName:S.imdisplayname,id:S.from,type:w.getPersonType(S.from)},timestamp:new Date(Date.parse(S.originalarrivaltime))};(k&&(O.resourceType=k),C.default.isNullOrUndefined(S.properties)||C.default.isNullOrEmptyString(S.properties.tags))||(V=S.properties.tags.split(","),O.tags=V);if(!C.default.isNullOrUndefined(S.properties)&&!C.default.isNullOrEmptyString(S.properties.files)&&(U=JSON.parse(S.properties.files)).length>0){var B=U[0].id;C.default.isNullOrUndefined(B)&&S.amsreferences&&(B=S.amsreferences[0]);var H=w.getFileUrl(U[0],B,P);O.fileMetadata={fileSharingProtocolType:x.default.AmsBasedFileSharing,id:B,name:U[0].fileName,size:U[0].version,type:U[0].fileType,url:H}}return O},w.createIRawThread=function(S){return{id:S.id,members:S.members,messages:S.messages,properties:S.properties,rosterVersion:S.rosterVersion,type:S.type,version:S.version}},w.getConversationIdFromUrl=function(S){var P=S&&S.match(/\/(\d+:[^\/]*)[\/]?/);return P&&P[1]?P[1]:void 0},w.isSystemMessage=function(S){var P=!1;return C.default.isNullOrEmptyString(S.messagetype)||(P=w.getSystemMessageTypes().reduce(function(k,O){return k||0===S.messagetype.toLowerCase().indexOf(O.toLowerCase())},P)),P},w.getPersonType=function(S){var P=I.default.Unknown,k=S.split("/").pop();return 0===k.indexOf("28:")?P=I.default.Bot:0===k.indexOf("19:")&&(P=I.default.User),P},w.isImageType=function(S){switch(S.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"bmp":case"tiff":case"jfif":return!0;default:return!1}},w.getMessageType=function(S){var P;switch(S.messagetype){case A.default.Typing:P=A.default.Typing;break;case A.default.ClearTyping:P=A.default.ClearTyping;break;default:P=A.default.UserMessage}return P},w.getMessageContentType=function(S){var k=S.contenttype?S.contenttype:S.messagetype;return k===M.default.Text.toLowerCase()||k.indexOf(N.default.TextPlainMimeType)>=0?g.default.Text:g.default.RichText},w.getSystemMessageTypes=function(){return["ThreadActivity"]},w.getFileUrl=function(S,P,k){var V,O=S.fileInfo;if(O&&O.fileUrl)V=O.fileUrl;else if(P){var U=w.isImageType(S.fileType);V=y.default.getAmsObjectContentUrl(P,k.RegionGtms,U)}return V},w.isDocumentTypeImage=function(S){return-1!==S.indexOf(N.default.Image)},w.getDomainRegexp=function(){return new RegExp(/^(https?:.+?\.microsoft\.com)/i)},w.parseDomain=function(S){var P=S.match(w.getDomainRegexp());return P?P[1]:null},w.parseChatServiceHostUrl=function(S){return w.parseDomain(S)},w.shouldRetryOnFailure=function(S){return S!==u.default.Accepted&&S!==u.default.Created},w}();L.default=v},909:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(6849),N=function(){function m(){}return m.isNullOrEmptyString=function(x){return m.isNullOrUndefined(x)||""===x},m.isNullOrUndefinedOrEmptyArray=function(x){return m.isNullOrUndefined(x)||0===x.length},m.isNullOrUndefined=function(x){return null==x},m.isPrimitiveString=function(x){return"string"==typeof x},m.convertStringToBoolean=function(x){return!m.isNullOrUndefined(x)&&"true"===x.toLowerCase()},m.sanitizeUrlWithBackSlash=function(x){return x.endsWith("/")?x:x+"/"},m.getRegistrationTokenValue=function(x){var u=x.match(/registrationToken=(.+); expires=(\d+)/);return u&&u.length>=2?p.default.RegistrationTokenHeaderValue+u[1]:""},m.addQueryParametersToPath=function(x,u){var g=x;if(!m.isNullOrUndefined(u))for(var M in g.indexOf("?")>=0||(g+="?"),u)if(u.hasOwnProperty(M)){var A=M+"="+u[M];"?"!==g[g.length-1]&&(A="&"+A),g+=A}return g},m.getResponseHeader=function(x,u){var g;return m.isNullOrUndefined(x)||(g=x.headers[u]),g},m.timer=function(){var x=(new Date).getTime();return{get milliSecondsElapsed(){return(new Date).getTime()-x}}},m.concatArrays=function(x,u){!m.isNullOrUndefined(x)&&!m.isNullOrUndefined(u)&&u.forEach(function(g){x.push(g)})},m}();L.default=N},1288:function(Y,L,T){"use strict";var p=this&&this.__awaiter||function(g,M,A,I){return new(A||(A=Promise))(function(h,C){function v(P){try{S(I.next(P))}catch(k){C(k)}}function w(P){try{S(I.throw(P))}catch(k){C(k)}}function S(P){P.done?h(P.value):function(h){return h instanceof A?h:new A(function(C){C(h)})}(P.value).then(v,w)}S((I=I.apply(g,M||[])).next())})},N=this&&this.__generator||function(g,M){var I,y,h,C,A={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return C={next:v(0),throw:v(1),return:v(2)},"function"==typeof Symbol&&(C[Symbol.iterator]=function(){return this}),C;function v(S){return function(P){return function(S){if(I)throw new TypeError("Generator is already executing.");for(;A;)try{if(I=1,y&&(h=2&S[0]?y.return:S[0]?y.throw||((h=y.return)&&h.call(y),0):y.next)&&!(h=h.call(y,S[1])).done)return h;switch(y=0,h&&(S=[2&S[0],h.value]),S[0]){case 0:case 1:h=S;break;case 4:return A.label++,{value:S[1],done:!1};case 5:A.label++,y=S[1],S=[0];continue;case 7:S=A.ops.pop(),A.trys.pop();continue;default:if(!(h=(h=A.trys).length>0&&h[h.length-1])&&(6===S[0]||2===S[0])){A=0;continue}if(3===S[0]&&(!h||S[1]>h[0]&&S[1]<h[3])){A.label=S[1];break}if(6===S[0]&&A.label<h[1]){A.label=h[1],h=S;break}if(h&&A.label<h[2]){A.label=h[2],A.ops.push(S);break}h[2]&&A.ops.pop(),A.trys.pop();continue}S=M.call(g,A)}catch(P){S=[6,P],y=0}finally{I=h=0}if(5&S[0])throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}([S,P])}}};Object.defineProperty(L,"__esModule",{value:!0});var m=T(2217),x=T(737),u=function(){function g(M){this.hostType=m.default.Page,this.id=(0,x.uuidv4)(),this.protocolType=M,this.newConversationMessageListeners={},this.threadUpdateListeners={},this.debug=!1}return g.prototype.setDebug=function(M){this.debug=M},g.prototype.joinConversation=function(M,A){var I=this;return this.onJoinConversation(M,A).then(function(y){return{disconnect:I.disconnectFromConversation.bind(I,y),downloadFile:I.downloadFile.bind(I,y),getFileStatus:I.getFileStatus.bind(I,y),getMembers:I.getMembers.bind(I,y),getMessages:I.getMessages.bind(I,y),id:y.id,indicateTypingStatus:I.indicateTypingStatus.bind(I,y),registerOnNewMessage:I.registerOnNewMessage.bind(I,y),registerOnThreadUpdate:I.registerOnThreadUpdate.bind(I,y),sendFileMessage:I.sendFileMessage.bind(I,y),sendMessage:I.sendMessage.bind(I,y),sendMessageToBot:I.sendMessageToBot.bind(I,y),uploadFile:I.uploadFile.bind(I,y),sendFileData:I.sendFileData.bind(I,y)}})},g.prototype.registerOnNewMessage=function(M,A){return p(this,void 0,void 0,function(){return N(this,function(I){return[2,Promise.resolve()]})})},g.prototype.registerOnThreadUpdate=function(M,A){return p(this,void 0,void 0,function(){return N(this,function(I){return[2,Promise.resolve()]})})},g.prototype.uploadFile=function(M,A,I){return Promise.resolve()},g.prototype.downloadFile=function(M,A){return this.debug&&console.debug("IC3Core/ClientBridge/downloadFile"),this.downloadFileData(M,A).then(function(I){if(I&&I.size)return I;var h=new Blob([new Uint8Array(I)]);return!h||0===h.size&&""===h.type?I:h})},g}();L.default=u},2518:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(333),N=T(2217),m=function(){function x(){}return x.getClientBridge=function(u){switch(u.hostType){case N.default.IFrame:throw new Error("Framed bridge not implemented for "+u.hostType+" in IC3Core");case N.default.Page:return new p.default(u.protocolType);default:throw new Error("Client bridge not implemented for "+u.hostType+" in IC3Core")}},x}();L.default=m},333:function(Y,L,T){"use strict";var A,p=this&&this.__extends||(A=function(I,y){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,C){h.__proto__=C}||function(h,C){for(var v in C)Object.prototype.hasOwnProperty.call(C,v)&&(h[v]=C[v])})(I,y)},function(I,y){if("function"!=typeof y&&null!==y)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function h(){this.constructor=I}A(I,y),I.prototype=null===y?Object.create(y):(h.prototype=y.prototype,new h)}),N=this&&this.__awaiter||function(A,I,y,h){return new(y||(y=Promise))(function(v,w){function S(O){try{k(h.next(O))}catch(V){w(V)}}function P(O){try{k(h.throw(O))}catch(V){w(V)}}function k(O){O.done?v(O.value):function(v){return v instanceof y?v:new y(function(w){w(v)})}(O.value).then(S,P)}k((h=h.apply(A,I||[])).next())})},m=this&&this.__generator||function(A,I){var h,C,v,w,y={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return w={next:S(0),throw:S(1),return:S(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function S(k){return function(O){return function(k){if(h)throw new TypeError("Generator is already executing.");for(;y;)try{if(h=1,C&&(v=2&k[0]?C.return:k[0]?C.throw||((v=C.return)&&v.call(C),0):C.next)&&!(v=v.call(C,k[1])).done)return v;switch(C=0,v&&(k=[2&k[0],v.value]),k[0]){case 0:case 1:v=k;break;case 4:return y.label++,{value:k[1],done:!1};case 5:y.label++,C=k[1],k=[0];continue;case 7:k=y.ops.pop(),y.trys.pop();continue;default:if(!(v=(v=y.trys).length>0&&v[v.length-1])&&(6===k[0]||2===k[0])){y=0;continue}if(3===k[0]&&(!v||k[1]>v[0]&&k[1]<v[3])){y.label=k[1];break}if(6===k[0]&&y.label<v[1]){y.label=v[1],v=k;break}if(v&&y.label<v[2]){y.label=v[2],y.ops.push(k);break}v[2]&&y.ops.pop(),y.trys.pop();continue}k=I.call(A,y)}catch(O){k=[6,O],C=0}finally{h=v=0}if(5&k[0])throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}([k,O])}}};Object.defineProperty(L,"__esModule",{value:!0});var x=T(1288),u=T(2217),g=T(9515),M=function(A){function I(y){var h=A.call(this,y)||this;return h.hostType=u.default.Page,h.protocolAdapter=new g.default("",h.hostType),h}return p(I,A),I.prototype.setup=function(y){return Promise.resolve()},I.prototype.update=function(y){return Promise.resolve()},I.prototype.onRegisterOnNewMessage=function(y){return Promise.resolve()},I.prototype.onRegisterOnThreadUpdate=function(y){return Promise.resolve()},I.prototype.initialize=function(y){return this.protocolAdapter.initialize(y)},I.prototype.dispose=function(){return this.protocolAdapter.dispose()},I.prototype.sendMessage=function(y,h){return this.protocolAdapter.sendMessage(y,h)},I.prototype.sendFileMessage=function(y,h,C){return this.protocolAdapter.sendFileMessage(y,h,C)},I.prototype.getMessages=function(y){return this.protocolAdapter.getMessages(y)},I.prototype.disconnectFromConversation=function(y){return this.protocolAdapter.disconnectFromConversation(y)},I.prototype.onJoinConversation=function(y,h){return this.protocolAdapter.joinConversation(y,h)},I.prototype.sendFileData=function(y,h,C){return this.protocolAdapter.sendFileData(y,h,C)},I.prototype.downloadFileData=function(y,h){return this.protocolAdapter.downloadFileData(y,h)},I.prototype.getFileStatus=function(y,h){return this.protocolAdapter.getFileStatus(y,h)},I.prototype.indicateTypingStatus=function(y,h,C){return this.protocolAdapter.indicateTypingStatus(y,h,C)},I.prototype.sendMessageToBot=function(y,h,C){return this.protocolAdapter.sendMessageToBot(y,h,C)},I.prototype.getMembers=function(y){return this.protocolAdapter.getMembers(y)},I.prototype.registerOnNewMessage=function(y,h){return N(this,void 0,void 0,function(){return m(this,function(C){return this.protocolAdapter.registerOnNewMessage(y,h),[2,Promise.resolve()]})})},I.prototype.registerOnThreadUpdate=function(y,h){return N(this,void 0,void 0,function(){return m(this,function(C){return this.protocolAdapter.registerOnThreadUpdate(y,h),[2,Promise.resolve()]})})},I.prototype.setDebug=function(y){void 0===y&&(y=!1),this.protocolAdapter.setDebug(y)},I}(x.default);L.default=M},1218:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(3865),N=T(501),m=T(4694),x=T(6355),u=T(2217),g=T(2915),M=T(5256),A=T(6849),I=T(5874),y=T(3671),h=T(752),C=T(448),v=T(3207),w=T(5655),S=T(6648),P=T(1927),k=T(8636),O=T(909),V=function(){function U(B){this.hostType=u.default.Page,this.protocolType=w.default.IC3V1SDK,this.id=B,this.conversations=[],this.newConversationMessageListeners={},this.threadUpdateListeners={},this.internalConversationsData={},this.liveStateFailureCount=0,this.debug=!1}return U.prototype.startPolling=function(){this.ic3Initializer&&this.ic3Initializer.startPolling()},U.prototype.stopPolling=function(){this.ic3Initializer&&this.ic3Initializer.stopPolling()},U.prototype.setup=function(B){return this.logger=B.logger,g.HttpClient.setLogger(this.logger),Promise.resolve()},U.prototype.initialize=function(B){return this.setupSession(B),Promise.resolve()},U.prototype.update=function(B){return Promise.resolve()},U.prototype.dispose=function(){return this.conversations=[],this.newConversationMessageListeners={},this.threadUpdateListeners={},this.internalConversationsData={},Promise.resolve()},U.prototype.joinConversation=function(B,H){var W;void 0===H&&(H=!0);var te=O.default.timer(),$={id:B};return-1===this.conversations.findIndex(function(R){return R.id===$.id})&&(this.conversations.push($),this.newConversationMessageListeners[$.id]=this.newConversationMessageListeners[$.id]||[],this.threadUpdateListeners[$.id]=this.threadUpdateListeners[$.id]||[]),null===(W=this.logger)||void 0===W||W.log(h.default.INFO,y.default.JoinConversation,{ElapsedTimeInMilliseconds:te.milliSecondsElapsed,EndpointUrl:this.EndpointUrl,EndpointId:this.EndpointId}),!O.default.isNullOrUndefined(H)&&!0===H&&this.sendHeartBeat($.id),Promise.resolve($)},U.prototype.sendLiveState=function(B){var H=this;this.debug&&console.debug("IC3Core/sendLiveState");var $=k.default.createBaseMessageData(v.default.LiveState,C.default.Text,"");return this.sendMessageToIC3(B,$).then(function(){return H.liveStateFailureCount=0,Promise.resolve()}).catch(function(pe){var R;H.liveStateFailureCount++,H.liveStateFailureCount>=N.default.liveStateRetryCount&&(null===(R=H.logger)||void 0===R||R.log(h.default.ERROR,y.default.SendLiveStateFailure,{ExceptionDetails:pe,EndpointUrl:H.EndpointUrl,EndpointId:H.EndpointId}),H.stopHeartBeat(),H.liveStateFailureCount=0)})},U.prototype.sendHeartBeat=function(B){this.heartBeatTimer||(this.debug&&console.debug("IC3Core/sendHeartBeat"),this.sendLiveState(B),this.heartBeatTimer=window.setInterval(this.sendLiveState.bind(this,B),N.default.heartBeatDuration))},U.prototype.stopHeartBeat=function(){clearInterval(this.heartBeatTimer)},U.prototype.sendMessage=function(B,H){var W=k.default.createMessageData(H);return this.sendMessageToIC3(B.id,W)},U.prototype.getMessages=function(B){var H=this,W=S.default.getDefaultGetMessagesQueryParameters(),te=O.default.addQueryParametersToPath(P.default.getMessagesUrl(B.id,this.ic3Info.RegionGtms),W),$=S.default.getDefaultIC3Headers();return $[A.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,$[A.default.ContentTypeHeader]=N.default.ContentTypeJson,g.HttpClient.MakeRequest({enableExponentialBackoff:!0,headers:$,redirect404RetryCount:N.default.retryCount,retryCount:N.default.retryCount,shouldRedirectOn404:!1,shouldResetOnFailure:!1,shouldRetryOnFailure:k.default.shouldRetryOnFailure,timeBetweenRetry:N.default.timeBetweenOperationRetry,type:I.default.GET,url:te}).then(function(R){for(var r=[],s=0,l=R.messages;s<l.length;s++){var a=l[s];k.default.isSystemMessage(a)||r.push(k.default.createIRawMessage(a,H.ic3Info))}return H.getAllMessagesFromBackwardLinkUrl(R._metadata.backwardLink,W.startTime,r)})},U.prototype.registerOnNewMessage=function(B,H){var W;return this.newConversationMessageListeners[B.id].push(H),null===(W=this.logger)||void 0===W||W.log(h.default.INFO,y.default.RegisterOnNewMessage,{EndpointUrl:this.EndpointUrl,EndpointId:this.EndpointId}),Promise.resolve()},U.prototype.registerOnThreadUpdate=function(B,H){var W;return this.threadUpdateListeners[B.id].push(H),null===(W=this.logger)||void 0===W||W.log(h.default.INFO,y.default.RegisterOnThreadUpdate,{EndpointUrl:this.EndpointUrl,EndpointId:this.EndpointId}),Promise.resolve()},U.prototype.disconnectFromConversation=function(B){return this.conversations.findIndex(function(H){return H.id===B.id}),delete this.internalConversationsData[B.id],this.ic3Info.visitor&&(this.stopHeartBeat(),this.stopPolling()),Promise.resolve()},U.prototype.sendFileData=function(B,H,W){var te=this;if(O.default.isNullOrUndefined(W)&&(W=m.default.AmsBasedFileSharing),H.size<=0)throw new Error("File size is lesser or equal to zero.");var $={fileSharingProtocolType:W,id:"",name:H.name,size:H.size,type:H.type,url:""};return new Promise(function(pe,R){p.default.createNewDocument(B.id,H,te.ic3Info).then(function(r){$.id=r.id;var s=k.default.isDocumentTypeImage(H.type);$.url=P.default.getAmsObjectContentUrl(r.id,te.ic3Info.RegionGtms,s),p.default.uploadDocument(r.id,H,te.ic3Info).then(function(){pe($)}).catch(function(l){R(l)})}).catch(function(r){R(r)})})},U.prototype.sendFileMessage=function(B,H,W){return this.sendMessageToIC3(B.id,k.default.createFileMessage(H,this.ic3Info,W))},U.prototype.downloadFileData=function(B,H){var W=this;return this.debug&&console.debug("IC3Core/IC3ClientAdapter/downloadFileData"),new Promise(function(te,$){var pe=H.fileSharingProtocolType;O.default.isNullOrUndefined(pe)&&(pe=m.default.AmsBasedFileSharing),pe===m.default.AmsBasedFileSharing?p.default.downloadDocument(H,W.ic3Info).then(function(R){te(R)}).catch(function(R){$(R)}):$("This Protocol is not implemented")})},U.prototype.getFileStatus=function(B,H){var W=this;return new Promise(function(te,$){var pe=H.fileSharingProtocolType;O.default.isNullOrUndefined(pe)&&(pe=m.default.AmsBasedFileSharing),pe===m.default.AmsBasedFileSharing?p.default.getFileStatus(H,W.ic3Info).then(function(R){te(R)}).catch(function(R){$(x.default.Error+" e")}):$("This Protocol is not implemented")})},U.prototype.indicateTypingStatus=function(B,H,W){var te=k.default.createTypingStatusThreadMessageData(H,W);return this.sendMessageToIC3(B.id,te)},U.prototype.sendMessageToBot=function(B,H,W){var te=k.default.createBotMessageData(B.id,W),$=P.default.getBotMessagesUrl(H,this.ic3Info.RegionGtms),pe=S.default.getDefaultIC3Headers();return pe[A.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,pe[A.default.ContentTypeHeader]=N.default.ContentTypeTextPlain,g.HttpClient.MakeRequest({data:te,dataType:M.default.TEXT,enableExponentialBackoff:!0,headers:pe,redirect404RetryCount:N.default.retryCount,retryCount:N.default.retryCount,shouldRedirectOn404:!1,shouldResetOnFailure:!1,shouldRetryOnFailure:k.default.shouldRetryOnFailure,timeBetweenRetry:N.default.timeBetweenOperationRetry,type:I.default.POST,url:$})},U.prototype.getMembers=function(B){var H=this.internalConversationsData[B.id].members,W=[];return O.default.isNullOrUndefinedOrEmptyArray(H)||H.forEach(function(te){var $={displayName:te.friendlyName,id:te.id,type:k.default.getPersonType(te.id)};W.push($)}),Promise.resolve(W)},U.prototype.sendMessageToIC3=function(B,H){var W=P.default.getMessagesUrl(B,this.ic3Info.RegionGtms),te=S.default.getDefaultIC3Headers();te[A.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,te[A.default.ContentTypeHeader]=N.default.ContentTypeJson;var $={data:JSON.stringify(H),enableExponentialBackoff:!0,headers:te,redirect404RetryCount:N.default.retryCount,retryCount:N.default.retryCount,shouldRedirectOn404:!1,shouldResetOnFailure:!1,shouldRetryOnFailure:k.default.shouldRetryOnFailure,timeBetweenRetry:N.default.timeBetweenOperationRetry,type:I.default.POST,url:W};return g.HttpClient.MakeRequest($)},U.prototype.onNewMessage=function(B,H,W){var $,te=this,pe=O.default.timer();try{B&&(O.default.isNullOrUndefined(this.newConversationMessageListeners[B.id])||k.default.isSystemMessage(H)||this.newConversationMessageListeners[B.id].forEach(function(r){r(k.default.createIRawMessage(H,te.ic3Info,W))}))}catch(r){return void(null===($=this.logger)||void 0===$||$.log(h.default.ERROR,y.default.OnNewMessageFailure,{ExceptionDetails:r,ElapsedTimeInMilliseconds:pe.milliSecondsElapsed,EndpointUrl:this.EndpointUrl,EndpointId:this.EndpointId}))}},U.prototype.onThreadUpdate=function(B,H){var W,te=O.default.timer();try{B&&(O.default.isNullOrUndefined(this.threadUpdateListeners[B.id])||this.threadUpdateListeners[B.id].forEach(function(pe){pe(k.default.createIRawThread(H))}))}catch(pe){return void(null===(W=this.logger)||void 0===W||W.log(h.default.ERROR,y.default.OnThreadUpdateFailure,{ExceptionDetails:pe,ElapsedTimeInMilliseconds:te.milliSecondsElapsed,EndpointUrl:this.EndpointUrl,EndpointId:this.EndpointId}))}},U.prototype.getAllMessagesFromBackwardLinkUrl=function(B,H,W){var te=this;return O.default.isNullOrEmptyString(B)?Promise.resolve(W):this.getMessagesFromBackwardLinkUrl(B,H).then(function($){for(var pe=0,R=$.messages;pe<R.length;pe++){var r=R[pe];k.default.isSystemMessage(r)||W.push(k.default.createIRawMessage(r,te.ic3Info))}return te.getAllMessagesFromBackwardLinkUrl($._metadata.backwardLink,H,W)})},U.prototype.getMessagesFromBackwardLinkUrl=function(B,H){var te=O.default.addQueryParametersToPath(B,{startTime:H}),$=S.default.getDefaultIC3Headers();return $[A.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,$[A.default.ContentTypeHeader]=N.default.ContentTypeJson,g.HttpClient.MakeRequest({enableExponentialBackoff:!0,headers:$,redirect404RetryCount:N.default.retryCount,retryCount:N.default.retryCount,shouldRedirectOn404:!1,shouldResetOnFailure:!1,shouldRetryOnFailure:k.default.shouldRetryOnFailure,timeBetweenRetry:N.default.timeBetweenOperationRetry,type:I.default.GET,url:te})},U.prototype.setupSession=function(B){this.ic3Info={SkypeToken:B.token,RegionGtms:B.regionGtms,visitor:B.visitor},O.default.isNullOrUndefined(this.ic3Info)||(this.EndpointId=this.ic3Info.endpointId,this.EndpointUrl=this.ic3Info.RegionGtms?this.ic3Info.RegionGtms.chatService:"")},U.prototype.setDebug=function(B){void 0===B&&(B=!1),this.debug=B},U}();L.default=V},9515:function(Y,L,T){"use strict";var V,p=this&&this.__extends||(V=function(U,B){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(H,W){H.__proto__=W}||function(H,W){for(var te in W)Object.prototype.hasOwnProperty.call(W,te)&&(H[te]=W[te])})(U,B)},function(U,B){if("function"!=typeof B&&null!==B)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");function H(){this.constructor=U}V(U,B),U.prototype=null===B?Object.create(B):(H.prototype=B.prototype,new H)}),N=this&&this.__awaiter||function(V,U,B,H){return new(B||(B=Promise))(function(te,$){function pe(s){try{r(H.next(s))}catch(l){$(l)}}function R(s){try{r(H.throw(s))}catch(l){$(l)}}function r(s){s.done?te(s.value):function(te){return te instanceof B?te:new B(function($){$(te)})}(s.value).then(pe,R)}r((H=H.apply(V,U||[])).next())})},m=this&&this.__generator||function(V,U){var H,W,te,$,B={label:0,sent:function(){if(1&te[0])throw te[1];return te[1]},trys:[],ops:[]};return $={next:pe(0),throw:pe(1),return:pe(2)},"function"==typeof Symbol&&($[Symbol.iterator]=function(){return this}),$;function pe(r){return function(s){return function(r){if(H)throw new TypeError("Generator is already executing.");for(;B;)try{if(H=1,W&&(te=2&r[0]?W.return:r[0]?W.throw||((te=W.return)&&te.call(W),0):W.next)&&!(te=te.call(W,r[1])).done)return te;switch(W=0,te&&(r=[2&r[0],te.value]),r[0]){case 0:case 1:te=r;break;case 4:return B.label++,{value:r[1],done:!1};case 5:B.label++,W=r[1],r=[0];continue;case 7:r=B.ops.pop(),B.trys.pop();continue;default:if(!(te=(te=B.trys).length>0&&te[te.length-1])&&(6===r[0]||2===r[0])){B=0;continue}if(3===r[0]&&(!te||r[1]>te[0]&&r[1]<te[3])){B.label=r[1];break}if(6===r[0]&&B.label<te[1]){B.label=te[1],te=r;break}if(te&&B.label<te[2]){B.label=te[2],B.ops.push(r);break}te[2]&&B.ops.pop(),B.trys.pop();continue}r=U.call(V,B)}catch(s){r=[6,s],W=0}finally{H=te=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(L,"__esModule",{value:!0});var x=T(501),u=T(6849),g=T(5874),M=T(1218),A=T(7037),I=T(3671),y=T(2915),h=T(752),C=T(5655),v=T(6648),w=T(5785),S=T(1927),P=T(8636),k=T(909),O=function(V){function U(B,H){var W=V.call(this,B)||this;return W.debug&&console.debug("IC3Core/Constructor"),W.protocolType=C.default.IC3V1SDK,W.hostType=H,W.ic3Initializer=new A.default,W}return p(U,V),U.prototype.startPolling=function(){V.prototype.startPolling.call(this)},U.prototype.stopPolling=function(){V.prototype.stopPolling.call(this)},U.prototype.setup=function(B){return V.prototype.setup.call(this,B)},U.prototype.initialize=function(B){var H=this;return V.prototype.initialize.call(this,B).then(function(){var te;return null===(te=H.ic3Initializer)||void 0===te?void 0:te.setup(H.logger).then(function(){return H.setSkypeTokenCookie()}).then(function(){var $;return null===($=H.ic3Initializer)||void 0===$?void 0:$.setIc3Info(H.ic3Info)}).then(function(){var $;return null===($=H.ic3Initializer)||void 0===$?void 0:$.initializeIC3(H.handlePollData.bind(H))}).then(function($){H.ic3Info=$})})},U.prototype.update=function(B){var H=this;return V.prototype.update.call(this,B).then(function(){return H.updateToken({RegionGtms:B.regionGtms,SkypeToken:B.token,visitor:B.visitor})})},U.prototype.dispose=function(){var B;return N(this,void 0,void 0,function(){return m(this,function(H){return null===(B=this.ic3Initializer)||void 0===B||B.stopPolling(),this.heartBeatTimer&&clearInterval(this.heartBeatTimer),Promise.resolve(),[2]})})},U.prototype.joinConversation=function(B,H){var W=this,te=k.default.timer();return V.prototype.joinConversation.call(this,B,H).then(function($){return W.getThreadRequest($.id).then(function(pe){return W.internalConversationsData[$.id]={id:B,members:pe.members},$}).catch(function(pe){return W.logger&&W.logger.log(h.default.WARN,I.default.JoinConversationV1GetThreadRequestFailed,{Description:"Unable to retrieve thread: "+pe,ElapsedTimeInMilliseconds:te.milliSecondsElapsed,EndpointUrl:W.EndpointUrl,EndpointId:W.ic3Info.endpointId}),W.internalConversationsData[$.id]={id:B,members:[]},$})})},U.prototype.sendMessage=function(B,H){return V.prototype.sendMessage.call(this,B,H)},U.prototype.sendFileMessage=function(B,H,W){return V.prototype.sendFileMessage.call(this,B,H,W)},U.prototype.getMessages=function(B){return V.prototype.getMessages.call(this,B)},U.prototype.registerOnNewMessage=function(B,H){return V.prototype.registerOnNewMessage.call(this,B,H)},U.prototype.registerOnThreadUpdate=function(B,H){return V.prototype.registerOnThreadUpdate.call(this,B,H)},U.prototype.disconnectFromConversation=function(B){return V.prototype.disconnectFromConversation.call(this,B)},U.prototype.setSkypeTokenCookie=function(){var B=this.ic3Info.RegionGtms.ams.concat(x.default.skypeTokenAuthURL),H=v.default.getDefaultBaseIC3Headers();return H[u.default.ContentTypeHeader]=x.default.ContentTypeForm,y.HttpClient.MakeRequest({data:x.default.skypeTokenConstantForData+this.ic3Info.SkypeToken,enableExponentialBackoff:!0,useXHRWithCredentials:!0,headers:H,redirect404RetryCount:x.default.retryCount,retryCount:x.default.retryCount,shouldRedirectOn404:!1,shouldResetOnFailure:!1,shouldRetryOnFailure:P.default.shouldRetryOnFailure,timeBetweenRetry:x.default.timeBetweenOperationRetry,type:g.default.POST,url:B})},U.prototype.getThreadRequest=function(B){var H=S.default.getThreadUrl(B,this.ic3Info.RegionGtms),W=v.default.getDefaultBaseIC3Headers();return W[u.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,y.HttpClient.MakeRequest({enableExponentialBackoff:!0,headers:W,redirect404RetryCount:x.default.retryCount,retryCount:x.default.retryCount,shouldRedirectOn404:!0,shouldRetryOnFailure:P.default.shouldRetryOnFailure,timeBetweenRetry:x.default.timeBetweenOperationRetry,type:g.default.GET,url:H})},U.prototype.newMessageReceived=function(B,H,W){V.prototype.onNewMessage.call(this,B,H,W)},U.prototype.newThreadUpdate=function(B,H){V.prototype.onThreadUpdate.call(this,B,H)},U.prototype.handleNewMessageEvent=function(B){var H;H=B.resource&&B.resource.conversationid?B.resource.conversationid:P.default.getConversationIdFromUrl(B.resource.conversationLink?B.resource.conversationLink:B.resourceLink);var W=this.conversations.findIndex(function($){return $.id===H});this.newMessageReceived(this.conversations[W],B.resource,B.resourceType)},U.prototype.handleConversationUpdateEvent=function(B){},U.prototype.handleThreadUpdate=function(B){if(B.resourceType===w.default.ThreadUpdate){var H;H=B.resource&&B.resource.id?B.resource.id:P.default.getConversationIdFromUrl(B.resource.messages?B.resource.messages:B.resourceLink);var W=this.conversations.findIndex(function($){return $.id===H});this.newThreadUpdate(this.conversations[W],B.resource)}},U.prototype.handlePollData=function(B){if(B&&B.eventMessages)for(var H=0,W=B.eventMessages;H<W.length;H++)this.handlePollEventMessage(W[H])},U.prototype.handlePollEventMessage=function(B){B.resourceType===w.default.NewMessage||B.resourceType===w.default.MessageUpdate?this.handleNewMessageEvent(B):B.resourceType===w.default.ThreadUpdate?this.handleThreadUpdate(B):B.resourceType===w.default.ConversationUpdate&&this.handleConversationUpdateEvent(B)},U.prototype.updateToken=function(B){return N(this,void 0,void 0,function(){var H,W,te,$,pe,R,r,s,l,a,_=this;return m(this,function(D){switch(D.label){case 0:return this.logger&&this.logger.log(h.default.INFO,I.default.UpdateToken,{EndpointUrl:this.EndpointUrl,EndpointId:this.ic3Info.endpointId}),H=[],W=function(d){d&&d.eventMessages&&k.default.concatArrays(H,d.eventMessages)},te=[],$=function(d){d&&d.eventMessages&&k.default.concatArrays(te,d.eventMessages)},pe=this.ic3Initializer,R=new A.default,r=this.updateTokenClearTimeoutHandle,s=this.ic3Info,pe.getPoller().onNewData=W,this.logger?[4,R.setup(this.logger)]:[3,2];case 1:D.sent(),D.label=2;case 2:return[2,R.setIc3Info(B).then(function(){return R.initializeIC3($)}).then(function(d){l=d}).then(function(){return _.getMatchingIC3EventIndex(H,te)}).then(function(d){a=d}).then(function(){return pe.reset(!0)}).then(function(){return _.syncPollingData(H,te,a)}).then(function(){_.ic3Info=l,_.ic3Initializer=R,_.ic3Initializer.getPoller().onNewData=_.handlePollData.bind(_)}).catch(function(d){throw _.updateTokenClearTimeoutHandle!==r&&(clearTimeout(_.updateTokenClearTimeoutHandle),_.updateTokenClearTimeoutHandle=r),_.ic3Info=s,_.ic3Initializer.getPoller().onNewData=_.handlePollData.bind(_),_.ic3Initializer.getPoller().start(),new Error("Update token failed: "+(d&&d.message))})]}})})},U.prototype.getMatchingIC3EventIndex=function(B,H,W){var te=this;return new Promise(function($,pe){if((W=W||0)===x.default.stabilizePollMaxRetryCount)$({newPollIndex:-1,previousPollIndex:-1});else{for(var R=0,r=0;R<B.length&&r<H.length;){var s=B[R];if(s.time===H[r].time)return void $({newPollIndex:r,previousPollIndex:R});new Date(s.time)<new Date(s.time)?R++:r++}setTimeout(function(){te.getMatchingIC3EventIndex(B,H,W+1).then(function(a){$(a)}).catch(function(a){pe(a)})},x.default.timeBetweenStabilizingPoll)}})},U.prototype.syncPollingData=function(B,H,W){this.logger&&this.logger.log(h.default.INFO,I.default.SyncingPollData,{EndpointUrl:this.EndpointUrl,EndpointId:this.ic3Info.endpointId});var te=W.previousPollIndex,$=W.newPollIndex+1;-1===W.previousPollIndex&&-1===W.newPollIndex&&(te=B.length-1,$=0);for(var pe=0;pe<=te;pe++)this.handlePollEventMessage(B[pe]);for(pe=$;pe<H.length;pe++)this.handlePollEventMessage(H[pe])},U}(M.default);L.default=O},7037:function(Y,L,T){"use strict";var p=this&&this.__awaiter||function(O,V,U,B){return new(U||(U=Promise))(function(W,te){function $(r){try{R(B.next(r))}catch(s){te(s)}}function pe(r){try{R(B.throw(r))}catch(s){te(s)}}function R(r){r.done?W(r.value):function(W){return W instanceof U?W:new U(function(te){te(W)})}(r.value).then($,pe)}R((B=B.apply(O,V||[])).next())})},N=this&&this.__generator||function(O,V){var B,H,W,te,U={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return te={next:$(0),throw:$(1),return:$(2)},"function"==typeof Symbol&&(te[Symbol.iterator]=function(){return this}),te;function $(R){return function(r){return function(R){if(B)throw new TypeError("Generator is already executing.");for(;U;)try{if(B=1,H&&(W=2&R[0]?H.return:R[0]?H.throw||((W=H.return)&&W.call(H),0):H.next)&&!(W=W.call(H,R[1])).done)return W;switch(H=0,W&&(R=[2&R[0],W.value]),R[0]){case 0:case 1:W=R;break;case 4:return U.label++,{value:R[1],done:!1};case 5:U.label++,H=R[1],R=[0];continue;case 7:R=U.ops.pop(),U.trys.pop();continue;default:if(!(W=(W=U.trys).length>0&&W[W.length-1])&&(6===R[0]||2===R[0])){U=0;continue}if(3===R[0]&&(!W||R[1]>W[0]&&R[1]<W[3])){U.label=R[1];break}if(6===R[0]&&U.label<W[1]){U.label=W[1],W=R;break}if(W&&U.label<W[2]){U.label=W[2],U.ops.push(R);break}W[2]&&U.ops.pop(),U.trys.pop();continue}R=V.call(O,U)}catch(r){R=[6,r],H=0}finally{B=W=0}if(5&R[0])throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}([R,r])}}};Object.defineProperty(L,"__esModule",{value:!0});var m=T(501),x=T(6849),u=T(5850),g=T(8311),M=T(6648),A=T(1927),I=T(909),y=T(3805),h=T(752),C=T(3671),v=T(3787),w=T(8636),S=T(2915),P=T(5874),k=function(){function O(){this.debug=!1,this.current404RetryCount=0,this.currentOtherRetryCount=0,this.skipUnsubscribe=!1,this.telemetryMessage="",this.errorCode="",this.pollDataHandler=function(V){},this.resetRetryCount()}return O.prototype.setup=function(V){return p(this,void 0,void 0,function(){return N(this,function(U){return this.logger=V,[2]})})},O.prototype.getPoller=function(){var V=this.pollDataHandler.bind(this);return this.poller||(this.poller=new y.default(this.ic3Info,V,this.redirectErrorHandler.bind(this),this.onRequestCreationFailure.bind(this))),this.poller},O.prototype.setIc3Info=function(V){return p(this,void 0,void 0,function(){var U;return N(this,function(B){return U={RegionGtms:JSON.parse(JSON.stringify(V.RegionGtms)),SkypeToken:V.SkypeToken,visitor:V.visitor},this.ic3Info=U,[2]})})},O.prototype.initializeIC3=function(V){var B,U=this;return V&&(this.pollDataHandler=V),null===(B=this.logger)||void 0===B||B.log(h.default.INFO,C.default.IC3InitializationBegins,{Description:"Endpoint to poll is "+JSON.stringify(this.ic3Info.RegionGtms.chatService),EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.createEndpoint().then(function(){return U.createSubscription()}).then(function(){return U.setEndpointProperty()}).then(function(){return U.startPolling(V)}).then(function(){return U.resetRetryCount()}).then(function(){return Promise.resolve(U.ic3Info)}).catch(function(W){return U.redirectErrorHandler(W)})},O.prototype.startPolling=function(V){var U,B=!V&&this.pollDataHandler?this.pollDataHandler.bind(this):this.pollDataHandler;this.poller||(this.poller=new y.default(this.ic3Info,B,this.redirectErrorHandler.bind(this),this.onRequestCreationFailure.bind(this))),this.poller.ic3Info=this.ic3Info,null===(U=this.logger)||void 0===U||U.log(h.default.INFO,C.default.IC3StartedPolling,{EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.poller.start()},O.prototype.stopPolling=function(V){var U;null===(U=this.logger)||void 0===U||U.log(h.default.INFO,C.default.IC3StoppedPolling,{Description:(V?m.default.oldInitializer:m.default.newInitializer)+" stopped polling.",EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.poller&&this.poller.stop()},O.prototype.reset=function(V){return this.stopPolling(V),this.unsubscribeFromEndpoint()},O.prototype.resetRetryCount=function(){this.current404RetryCount=0,this.currentOtherRetryCount=0},O.prototype.onEndpointCreationFailure=function(V){this.onRequestCreationFailure(V,m.default.endpointRequestLog)},O.prototype.onEndpointCreationSuccess=function(V){var U,B,H=I.default.getResponseHeader(V,x.default.SetRegistrationTokenHeader);I.default.isNullOrUndefined(H)||(this.ic3Info.RegistrationToken=I.default.getRegistrationTokenValue(H));var W=I.default.getResponseHeader(V,x.default.LocationHeader);if(!I.default.isNullOrUndefined(W)){var te=W.match(/endpoints\/(%7B[\da-z\-]+%7D)/);this.ic3Info.endpointId=te&&te[1],null===(U=this.logger)||void 0===U||U.log(h.default.INFO,C.default.IC3EndpointCreationSuccess,{Description:"IC3 endpoint Id is "+this.ic3Info.endpointId,EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),V.status===v.default.Created&&w.default.parseChatServiceHostUrl(W)!==this.ic3Info.RegionGtms.chatService&&(this.ic3Info.RegionGtms.chatService=w.default.parseChatServiceHostUrl(W),null===(B=this.logger)||void 0===B||B.log(h.default.WARN,C.default.OnRequestCreationSuccessRedirect,{Description:"Endpoint changed",EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}))}},O.prototype.createEndpointRequest=function(){var V=A.default.getV1EndpointUrl(this.ic3Info.RegionGtms),U=M.default.getDefaultIC3Headers();U[x.default.AuthenticationHeader]=x.default.SkypeTokenHeaderValue+this.ic3Info.SkypeToken,U[x.default.ContentTypeHeader]=m.default.ContentTypeJson;var H={endpointFeatures:[g.default.Agent,g.default.InviteFree,g.default.MessageProperties].join(",")},W={callbackOnFailure:this.onEndpointCreationFailure.bind(this),callbackOnSuccess:this.onEndpointCreationSuccess.bind(this),data:JSON.stringify(H),enableExponentialBackoff:!0,headers:U,redirect404RetryCount:m.default.retryCount,retryCount:m.default.retryCount,shouldRedirectOn404:!0,shouldResetOnFailure:!0,shouldRetryOnFailure:w.default.shouldRetryOnFailure,timeBetweenRetry:m.default.timeBetweenOperationRetry,type:P.default.POST,url:V};return S.HttpClient.MakeRequest(W)},O.prototype.createEndpoint=function(){var V=this;return this.createEndpointRequest().then(function(U){return U.subscriptions&&U.subscriptions.length>0&&(V.ic3Info.subscriptionId=U.subscriptions[0].id),U})},O.prototype.onSubscriptionCreationFailure=function(V){this.onRequestCreationFailure(V,m.default.subscriptionRequestLog)},O.prototype.onSubscriptionCreationSuccess=function(V){var U,B=I.default.getResponseHeader(V,x.default.LocationHeader)||"";V.status===v.default.Created&&!I.default.isNullOrUndefined(B)&&w.default.parseChatServiceHostUrl(B)!==this.ic3Info.RegionGtms.chatService&&(this.ic3Info.RegionGtms.chatService=w.default.parseChatServiceHostUrl(B),null===(U=this.logger)||void 0===U||U.log(h.default.WARN,C.default.OnRequestCreationSuccessRedirect,{Description:"Endpoint changed",EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}));var H=B.match(/\/(\d+)$/);H&&(this.ic3Info.subscriptionId=H[1])},O.prototype.createSubscriptionRequest=function(){var V=A.default.getV1SubscriptionUrl(this.ic3Info.RegionGtms),U=M.default.getDefaultIC3Headers();U[x.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,U[x.default.ContentTypeHeader]=m.default.ContentTypeJson;var B={channelType:m.default.HttpLongPoll,interestedResources:[u.default.ConversationMessages,u.default.ConversationProperties,u.default.Threads,u.default.Contacts]},H={callbackOnFailure:this.onSubscriptionCreationFailure.bind(this),callbackOnSuccess:this.onSubscriptionCreationSuccess.bind(this),data:JSON.stringify(B),enableExponentialBackoff:!0,headers:U,redirect404RetryCount:m.default.retryCount,retryCount:m.default.retryCount,shouldRedirectOn404:!0,shouldResetOnFailure:!0,shouldRetryOnFailure:w.default.shouldRetryOnFailure,timeBetweenRetry:m.default.timeBetweenOperationRetry,type:P.default.POST,url:V};return S.HttpClient.MakeRequest(H)},O.prototype.createSubscription=function(){return this.createSubscriptionRequest()},O.prototype.onSetEndpointPropertyCreationFailure=function(V){this.onRequestCreationFailure(V,m.default.setPropertiesRequestLog)},O.prototype.setEndpointProperty=function(){if(this.ic3Info.visitor)return Promise.resolve();var V=A.default.getV1SetPropertiesUrl(this.ic3Info.RegionGtms),U={};U[x.default.SetEndpointProperty]=!0;var H=M.default.getDefaultIC3Headers();H[x.default.AuthenticationHeader]=x.default.SkypeTokenHeaderValue+this.ic3Info.SkypeToken,H[x.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,H[x.default.ContentTypeHeader]=m.default.ContentTypeJson;var W={callbackOnFailure:this.onSetEndpointPropertyCreationFailure.bind(this),data:JSON.stringify(U),enableExponentialBackoff:!0,headers:H,redirect404RetryCount:m.default.retryCount,retryCount:m.default.retryCount,shouldRedirectOn404:!0,shouldResetOnFailure:!0,shouldRetryOnFailure:w.default.shouldRetryOnFailure,timeBetweenRetry:m.default.timeBetweenOperationRetry,type:P.default.PUT,url:V};return S.HttpClient.MakeRequest(W)},O.prototype.onUnsubscribeCreationFailure=function(V){this.onRequestCreationFailure(V,m.default.unsubscribeRequestLog)},O.prototype.unsubscribeFromEndpoint=function(){if(this.ic3Info.visitor||I.default.isNullOrUndefined(this.ic3Info.endpointId)||this.skipUnsubscribe)return this.skipUnsubscribe=!0,Promise.resolve();var V=A.default.getV1DeleteEndpointUrl(this.ic3Info.RegionGtms,this.ic3Info.endpointId),U=M.default.getDefaultIC3Headers();U[x.default.AuthenticationHeader]=x.default.SkypeTokenHeaderValue+this.ic3Info.SkypeToken,U[x.default.RegistrationTokenHeader]=this.ic3Info.RegistrationToken,U[x.default.ContentTypeHeader]=m.default.ContentTypeJson;var B={callbackOnFailure:this.onUnsubscribeCreationFailure.bind(this),enableExponentialBackoff:!0,headers:U,redirect404RetryCount:m.default.retryCount,retryCount:m.default.retryCount,shouldRedirectOn404:!0,shouldResetOnFailure:!0,shouldRetryOnFailure:w.default.shouldRetryOnFailure,timeBetweenRetry:m.default.timeBetweenOperationRetry,type:P.default.DELETE,url:V};return S.HttpClient.MakeRequest(B)},O.prototype.onRequestCreationFailure=function(V,U){var B,H,W=I.default.getResponseHeader(V,x.default.LocationHeader);this.telemetryMessage=U+" failed. Error Code: "+V.status+".",this.errorCode=V.status.toString(),this.skipUnsubscribe=!0,V.status!==v.default.Redirect||I.default.isNullOrEmptyString(W)?(null===(H=this.logger)||void 0===H||H.log(h.default.WARN,C.default.ResetOnRequestCreationFailure,{Description:this.telemetryMessage+" Trying to reset.",ErrorCode:V.status.toString(),EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.current404RetryCount=0,this.currentOtherRetryCount++):(null===(B=this.logger)||void 0===B||B.log(h.default.WARN,C.default.RedirectOnRequestCreationFailure,{Description:this.telemetryMessage+" Trying to redirect.",ErrorCode:V.status.toString(),EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.onRequestCreationFailureRedirect(V))},O.prototype.redirectErrorHandler=function(V){var B,U=this;return V.message===m.default.Reset_Flag&&this.current404RetryCount<=m.default.retry404Count&&this.currentOtherRetryCount<=m.default.retryCount?this.reset().then(function(){return U.initializeIC3()}):(null===(B=this.logger)||void 0===B||B.log(h.default.ERROR,C.default.MaxRetryCountReachedForRedirect,{Description:"Fatal Error. Initialization failed. Maximum retry count reached. Exiting. "+this.telemetryMessage,ErrorCode:this.errorCode,ExceptionDetails:V,EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId}),this.reset().then(function(){return Promise.reject(V.message)}))},O.prototype.onRequestCreationFailureRedirect=function(V){var U;this.current404RetryCount++,this.currentOtherRetryCount=0,this.ic3Info.RegionGtms.chatService=w.default.parseChatServiceHostUrl(I.default.getResponseHeader(V,x.default.LocationHeader)),null===(U=this.logger)||void 0===U||U.log(h.default.WARN,C.default.OnRequestCreationFailureRedirect,{Description:"Endpoint changed.",EndpointUrl:this.ic3Info.RegionGtms.chatService,EndpointId:this.ic3Info.endpointId})},O}();L.default=k},9202:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(2518),N=T(1356),m=function(){function x(){}return x.getSDK=function(u){return new Promise(function(g){var A=p.default.getClientBridge({hostType:u.hostType,protocolType:u.protocolType}),I={logger:new N.default(A,u.logger)};return A.setup(I).then(function(){var y={dispose:A.dispose.bind(A),id:A.id,initialize:A.initialize.bind(A),joinConversation:A.joinConversation.bind(A),update:A.update.bind(A),setDebug:A.setDebug.bind(A)};return g(y)})})},x}();L.default=m},2915:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.HttpClient=void 0;var p=T(909),N=T(501),m=T(3671),x=T(752),u=T(6849),g=T(3787),M=T(8686),A=function(){function I(){}return I.MakeRequest=function(y){return new Promise(function(C,v){var P=0,k=y.retryCount||1,O={url:y.url,method:y.type,data:y.data,timeout:y.timeout,headers:y.headers,withCredentials:y.useXHRWithCredentials||!1},V=function(){M.default.request(O).then(function(U){!function(U,B){if(B.status>=400){var H={ResponseText:B.statusText,Status:status};I.logWarning("Requesting "+y.url,B.status,H)}y.callbackOnSuccess&&y.callbackOnSuccess(B),C(U)}(U.data,U)}).catch(function(U){!function(U){var B,H,W,te,$,pe,R,r,s,l,a={ErrorThrown:U.message,ResponseText:null===(B=U.response)||void 0===B?void 0:B.statusText,Status:null===(H=U.response)||void 0===H?void 0:H.status},f=function(){var b,z;I.logError("Request to "+y.url+" failed.",(null===(b=U.response)||void 0===b?void 0:b.status)||0,a),v(new Error((null===(z=U.response)||void 0===z?void 0:z.statusText)||""))},_=function(){var b;I.logError("Request to "+y.url+" failed. Resetting endpoint.",(null===(b=U.response)||void 0===b?void 0:b.status)||0,a),y.callbackOnFailure&&y.callbackOnFailure(U),v(new Error(N.default.Reset_Flag))},D=function(){var b;P++;var z=y.timeBetweenRetry||0;(y.enableExponentialBackoff||(null===(b=U.response)||void 0===b?void 0:b.status)===g.default.TooManyRequests)&&(z*=Math.exp(P)),setTimeout(function(){V()},z)},d=null===(W=U.response)||void 0===W?void 0:W.headers[u.default.LocationHeader],i=null===(te=U.response)||void 0===te?void 0:te.headers[u.default.SetRegistrationTokenHeader];(null===($=U.response)||void 0===$?void 0:$.status)!==g.default.Redirect||p.default.isNullOrEmptyString(d)?(null===(pe=U.response)||void 0===pe?void 0:pe.status)!==g.default.Unauthorized&&(null===(R=U.response)||void 0===R?void 0:R.status)!==g.default.Forbidden||p.default.isNullOrEmptyString(i)?P<=k&&y.shouldRetryOnFailure&&y.shouldRetryOnFailure((null===(s=U.response)||void 0===s?void 0:s.status)||0)||(null===(l=U.response)||void 0===l?void 0:l.status)===g.default.TooManyRequests?D():y.shouldResetOnFailure?_():f():P<=k&&y.shouldRetryOnFailure&&y.shouldRetryOnFailure((null===(r=U.response)||void 0===r?void 0:r.status)||0)?(y.headers&&(y.headers[u.default.RegistrationTokenHeader]=p.default.getRegistrationTokenValue(i)),D()):y.shouldResetOnFailure?_():f():y.shouldRedirectOn404?_():P<=k?(y.url=d,D()):f()}(U)})};V()})},I.isClientError=function(y){if(!y)return!1;var h=y.message,C=!1;return p.default.isNullOrEmptyString(h)||(C=h.search(/Status- 40\d/)>=-1),C},I.setLogger=function(y){I.logger=y},I.logError=function(y,h,C){I.logger&&I.logger.log(x.default.ERROR,m.default.HTTPRequestFailed,{Description:y,ErrorCode:h.toString(),ExceptionDetails:C})},I.logWarning=function(y,h,C){I.logger&&I.logger.log(x.default.INFO,m.default.HTTPRequestUnusualResponse,{Description:y,ErrorCode:h.toString(),ExceptionDetails:C})},I}();L.HttpClient=A},3787:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.OK=200,p.Created=201,p.Accepted=202,p.NoContent=204,p.Unauthorized=401,p.Forbidden=403,p.Redirect=404,p.TooManyRequests=429,p.InternalServerError=500,p.ServiceUnavailable=503,p.NotFound=729,p}();L.default=T},5256:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.TEXT="text",p}();L.default=T},6849:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.LocationHeader="location",p.SetRegistrationTokenHeader="set-registrationtoken",p.RegistrationTokenHeader="RegistrationToken",p.RegistrationTokenHeaderValue="registrationToken=",p.ContentTypeHeader="content-type",p.AuthenticationHeader="authentication",p.BehaviorOverrideHeader="behavioroverride",p.SkypeTokenHeaderValue="skypetoken=",p.SetEndpointProperty="supportsMessageProperties",p}();L.default=T},5874:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={})).GET="get",p.POST="post",p.PUT="put",p.DELETE="delete",T;var p})();L.default=T},6648:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(501),N=T(737),m=function(){function x(){}return x.getDefaultIC3Headers=function(){return{Accept:p.default.ContentTypeJson,BehaviorOverride:p.default.RedirectAs404,ClientInfo:p.default.ClientInfoValue,ContextId:"tcid="+(0,N.uuidv4)(),Expires:0,Pragma:p.default.NoCache,"x-ms-client-type":p.default.Web,"x-ms-user-type":p.default.User}},x.getDefaultBaseIC3Headers=function(){return{Accept:p.default.ContentTypeJson,BehaviorOverride:p.default.RedirectAs404,"content-type":p.default.ContentTypeJson}},x.getDefaultGetMessagesQueryParameters=function(){return{pageSize:20,startTime:0,view:"msnp24Equivalent|supportsMessageProperties"}},x.getDefaultAMSHeaders=function(u){return{Authorization:p.default.AMSAuthorizationSkypeTokenValue+u,"X-MS-Client-Version":p.default.ClientInfoValue}},x.getDefaultAMSViewHeaders=function(u){return{Accept:p.default.AMSAcceptHeaderValue,"Accept-Encoding":p.default.AMSAcceptEncodingHeaderValue,Authorization:p.default.AMSAuthorizationSkypeTokenValue+u,"X-MS-Client-Version":p.default.ClientInfoValue}},x}();L.default=m},6194:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.SDKProvider=void 0;var p=T(9202);L.SDKProvider=p.default},2217:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.IFrame=0,p.Page=1,p}();L.default=T},5655:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.IC3V1SDK=0,p.IC3V2SDK=1,p.MockIC3SDK=2,p}();L.default=T},3671:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={})).JoinConversation="JoinConversation",p.RegisterOnNewMessage="RegisterOnNewMessage",p.RegisterOnThreadUpdate="RegisterOnThreadUpdate",p.OnNewMessageFailure="OnNewMessageFailure",p.OnThreadUpdateFailure="OnThreadUpdateFailure",p.SendLiveStateFailure="SendLiveStateFailure",p.JoinConversationV1GetThreadRequestFailed="JoinConversationV1GetThreadRequestFailed",p.UpdateToken="UpdateToken",p.SyncingPollData="SyncingPollData",p.IC3InitializationBegins="IC3InitializationBegins",p.IC3StartedPolling="IC3StartedPolling",p.IC3StoppedPolling="IC3StoppedPolling",p.IC3EndpointCreationSuccess="IC3EndpointCreationSuccess",p.RedirectOnRequestCreationFailure="RedirectOnRequestCreationFailure",p.ResetOnRequestCreationFailure="ResetOnRequestCreationFailure",p.MaxRetryCountReachedForRedirect="MaxRetryCountReachedForRedirect",p.OnRequestCreationFailureRedirect="OnRequestCreationFailureRedirect",p.OnRequestCreationSuccessRedirect="OnRequestCreationSuccessRedirect",p.ErrorDuringPolling="ErrorDuringPolling",p.HTTPRequestFailed="HTTPRequestFailed",p.HTTPRequestUnusualResponse="HTTPRequestUnusualResponse",T;var p})();L.default=T},752:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={})).INFO="INFO",p.DEBUG="DEBUG",p.WARN="WARN",p.ERROR="ERROR",T;var p})();L.default=T},1356:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(909),N=T(8261),m=function(){function x(u,g){this.sdk=u,this.logger=g}return x.prototype.log=function(u,g,M){if(this.isLoggingEnabled()){var A=N.default.getTelemetryEventData(this.sdk,g,M);this.logEvent(u,A)}},x.prototype.logEvent=function(u,g){this.isLoggingEnabled()&&setTimeout(this.logger.logClientSdkTelemetryEvent.bind(this.logger),0,u,g)},x.prototype.isLoggingEnabled=function(){return!p.default.isNullOrUndefined(this.logger)},x}();L.default=m},8261:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.getTelemetryEventData=function(N,m,x){return{Description:x.Description,ElapsedTimeInMilliseconds:x.ElapsedTimeInMilliseconds,EndpointUrl:x.EndpointUrl,EndpointId:x.EndpointId,ErrorCode:x.ErrorCode,Event:m,ExceptionDetails:x.ExceptionDetails,ShouldBubbleToHost:x.ShouldBubbleToHost,SubscriptionId:N.id}},p}();L.default=T},2900:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.Bridged="bridged",p.Unbridged="unbridged",p}();L.default=T},4694:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={}))[p.AmsBasedFileSharing=0]="AmsBasedFileSharing",T;var p})();L.default=T},6355:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={}))[p.Unknown=0]="Unknown",p[p.InProgress=1]="InProgress",p[p.Success=2]="Success",p[p.Error=3]="Error",T;var p})();L.default=T},5850:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.ConversationProperties="/v1/users/ME/conversations/ALL/properties",p.ConversationMessages="/v1/users/ME/conversations/ALL/messages",p.Threads="/v1/threads/ALL",p.Contacts="/v1/users/ME/contacts/ALL",p}();L.default=T},8311:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.Agent="Agent",p.MessageProperties="MessageProperties",p.InviteFree="InviteFree",p}();L.default=T},448:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.RichText="RichText",p.Text="Text",p}();L.default=T},3207:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.Text="Text",p.RichText="RichText",p.RichTextHtml="RichText/Html",p.ControlTyping="Control/Typing",p.ControlClearTyping="Control/ClearTyping",p.LiveState="Control/LiveState",p}();L.default=T},3372:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.UserMessage="UserMessage",p.SwiftCard="SwiftCard",p.Typing="Control/Typing",p.ClearTyping="Control/ClearTyping",p.LiveState="Control/LiveState",p}();L.default=T},4352:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={}))[p.Unknown=0]="Unknown",p[p.User=1]="User",p[p.Bot=2]="Bot",T;var p})();L.default=T},5785:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=function(){function p(){}return p.NewMessage="NewMessage",p.MessageUpdate="MessageUpdate",p.UserPresence="UserPresence",p.ConversationUpdate="ConversationUpdate",p.ThreadUpdate="ThreadUpdate",p}();L.default=T},7708:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var T=(()=>{return(p=T||(T={}))[p.Typing=0]="Typing",p[p.ClearTyping=1]="ClearTyping",T;var p})();L.default=T},3805:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(1927),N=T(2553),m=T(501),x=function(){function u(g,M,A,I){this.isPolling=!1,this._ic3Info=g,this._onNewData=M,this._onError=A,this.callbackOnFailure=I}return u.prototype.start=function(){return this.isPolling||(this.isPolling=!0,this.startPolling()),Promise.resolve()},u.prototype.stop=function(){return this.isPolling=!1,Promise.resolve()},Object.defineProperty(u.prototype,"onNewData",{get:function(){return this._onNewData},set:function(g){this._onNewData=g},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"onError",{get:function(){return this._onError},set:function(g){this._onError=g},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"setCallbackOnFailure",{set:function(g){this.setCallbackOnFailure=g},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"ic3Info",{get:function(){return this._ic3Info},set:function(g){this._ic3Info=g},enumerable:!1,configurable:!0}),u.prototype.startPolling=function(){var g=this;this.isPolling&&this.poll().then(function(M){g.isPolling&&g._onNewData&&g._onNewData(M)}).catch(function(M){g._onError&&g._onError(M)}).then(function(){g.startPolling()})},u.prototype.poll=function(){var g=p.default.getV1PollUrl(this._ic3Info.RegionGtms,this._ic3Info.subscriptionId);return N.default.poll(g,this._ic3Info.RegistrationToken,this.callbackOnEachRequestCompleted.bind(this))},u.prototype.callbackOnEachRequestCompleted=function(g){this.callbackOnFailure(g,m.default.pollRequestLog)},u}();L.default=x},2553:(Y,L,T)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});var p=T(501),N=T(2915),m=T(6849),x=T(5874),u=T(6648),g=T(8636),M=function(){function A(){}return A.poll=function(I,y,h){var C=u.default.getDefaultIC3Headers();C[m.default.RegistrationTokenHeader]=y,C[m.default.ContentTypeHeader]=p.default.ContentTypeJson;var v=JSON.stringify({});return N.HttpClient.MakeRequest({callbackOnFailure:h,data:v,enableExponentialBackoff:!0,headers:C,redirect404RetryCount:p.default.retryCount,retryCount:p.default.retryCount,shouldRedirectOn404:!0,shouldResetOnFailure:!0,shouldRetryOnFailure:g.default.shouldRetryOnFailure,timeBetweenRetry:p.default.timeBetweenOperationRetry,type:x.default.POST,url:I})},A}();L.default=M},737:(Y,L)=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),L.uuidv4=void 0,L.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(p){var N=16*Math.random()|0;return("x"===p?N:3&N|8).toString(16)})}},723:(Y,L,T)=>{"use strict";T.d(L,{c:()=>h});var p=T(9334),N=function(C,v){var w="function"==typeof Symbol&&C[Symbol.iterator];if(!w)return C;var P,O,S=w.call(C),k=[];try{for(;(void 0===v||v-- >0)&&!(P=S.next()).done;)k.push(P.value)}catch(V){O={error:V}}finally{try{P&&!P.done&&(w=S.return)&&w.call(S)}finally{if(O)throw O.error}}return k},m=function(C,v,w){if(w||2===arguments.length)for(var k,S=0,P=v.length;S<P;S++)(k||!(S in v))&&(k||(k=Array.prototype.slice.call(v,0,S)),k[S]=v[S]);return C.concat(k||Array.prototype.slice.call(v))},x=function(){function C(){}return C.prototype.active=function(){return p.I},C.prototype.with=function(v,w,S){for(var P=[],k=3;k<arguments.length;k++)P[k-3]=arguments[k];return w.call.apply(w,m([S],N(P),!1))},C.prototype.bind=function(v,w){return w},C.prototype.enable=function(){return this},C.prototype.disable=function(){return this},C}(),u=T(5090),g=T(3770),M=function(C,v){var w="function"==typeof Symbol&&C[Symbol.iterator];if(!w)return C;var P,O,S=w.call(C),k=[];try{for(;(void 0===v||v-- >0)&&!(P=S.next()).done;)k.push(P.value)}catch(V){O={error:V}}finally{try{P&&!P.done&&(w=S.return)&&w.call(S)}finally{if(O)throw O.error}}return k},A=function(C,v,w){if(w||2===arguments.length)for(var k,S=0,P=v.length;S<P;S++)(k||!(S in v))&&(k||(k=Array.prototype.slice.call(v,0,S)),k[S]=v[S]);return C.concat(k||Array.prototype.slice.call(v))},I="context",y=new x,h=function(){function C(){}return C.getInstance=function(){return this._instance||(this._instance=new C),this._instance},C.prototype.setGlobalContextManager=function(v){return(0,u.TG)(I,v,g.G.instance())},C.prototype.active=function(){return this._getContextManager().active()},C.prototype.with=function(v,w,S){for(var P,k=[],O=3;O<arguments.length;O++)k[O-3]=arguments[O];return(P=this._getContextManager()).with.apply(P,A([v,w,S],M(k),!1))},C.prototype.bind=function(v,w){return this._getContextManager().bind(v,w)},C.prototype._getContextManager=function(){return(0,u.Rd)(I)||y},C.prototype.disable=function(){this._getContextManager().disable(),(0,u.J_)(I,g.G.instance())},C}()},3770:(Y,L,T)=>{"use strict";T.d(L,{G:()=>h});var p=T(5090),x=function(){function C(v){this._namespace=v.namespace||"DiagComponentLogger"}return C.prototype.debug=function(){for(var v=[],w=0;w<arguments.length;w++)v[w]=arguments[w];return u("debug",this._namespace,v)},C.prototype.error=function(){for(var v=[],w=0;w<arguments.length;w++)v[w]=arguments[w];return u("error",this._namespace,v)},C.prototype.info=function(){for(var v=[],w=0;w<arguments.length;w++)v[w]=arguments[w];return u("info",this._namespace,v)},C.prototype.warn=function(){for(var v=[],w=0;w<arguments.length;w++)v[w]=arguments[w];return u("warn",this._namespace,v)},C.prototype.verbose=function(){for(var v=[],w=0;w<arguments.length;w++)v[w]=arguments[w];return u("verbose",this._namespace,v)},C}();function u(C,v,w){var S=(0,p.Rd)("diag");if(S)return w.unshift(v),S[C].apply(S,function(C,v,w){if(w||2===arguments.length)for(var k,S=0,P=v.length;S<P;S++)(k||!(S in v))&&(k||(k=Array.prototype.slice.call(v,0,S)),k[S]=v[S]);return C.concat(k||Array.prototype.slice.call(v))}([],function(C,v){var w="function"==typeof Symbol&&C[Symbol.iterator];if(!w)return C;var P,O,S=w.call(C),k=[];try{for(;(void 0===v||v-- >0)&&!(P=S.next()).done;)k.push(P.value)}catch(V){O={error:V}}finally{try{P&&!P.done&&(w=S.return)&&w.call(S)}finally{if(O)throw O.error}}return k}(w),!1))}var g=(()=>{return(C=g||(g={}))[C.NONE=0]="NONE",C[C.ERROR=30]="ERROR",C[C.WARN=50]="WARN",C[C.INFO=60]="INFO",C[C.DEBUG=70]="DEBUG",C[C.VERBOSE=80]="VERBOSE",C[C.ALL=9999]="ALL",g;var C})(),A=function(C,v){var w="function"==typeof Symbol&&C[Symbol.iterator];if(!w)return C;var P,O,S=w.call(C),k=[];try{for(;(void 0===v||v-- >0)&&!(P=S.next()).done;)k.push(P.value)}catch(V){O={error:V}}finally{try{P&&!P.done&&(w=S.return)&&w.call(S)}finally{if(O)throw O.error}}return k},I=function(C,v,w){if(w||2===arguments.length)for(var k,S=0,P=v.length;S<P;S++)(k||!(S in v))&&(k||(k=Array.prototype.slice.call(v,0,S)),k[S]=v[S]);return C.concat(k||Array.prototype.slice.call(v))},h=function(){function C(){function v(P){return function(){for(var k=[],O=0;O<arguments.length;O++)k[O]=arguments[O];var V=(0,p.Rd)("diag");if(V)return V[P].apply(V,I([],A(k),!1))}}var w=this;w.setLogger=function(P,k){var O,V,U;if(void 0===k&&(k={logLevel:g.INFO}),P===w){var B=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return w.error(null!==(O=B.stack)&&void 0!==O?O:B.message),!1}"number"==typeof k&&(k={logLevel:k});var H=(0,p.Rd)("diag"),W=function(C,v){function w(S,P){var k=v[S];return"function"==typeof k&&C>=P?k.bind(v):function(){}}return C<g.NONE?C=g.NONE:C>g.ALL&&(C=g.ALL),v=v||{},{error:w("error",g.ERROR),warn:w("warn",g.WARN),info:w("info",g.INFO),debug:w("debug",g.DEBUG),verbose:w("verbose",g.VERBOSE)}}(null!==(V=k.logLevel)&&void 0!==V?V:g.INFO,P);if(H&&!k.suppressOverrideMessage){var te=null!==(U=(new Error).stack)&&void 0!==U?U:"<failed to generate stacktrace>";H.warn("Current logger will be overwritten from "+te),W.warn("Current logger will overwrite one already registered from "+te)}return(0,p.TG)("diag",W,w,!0)},w.disable=function(){(0,p.J_)("diag",w)},w.createComponentLogger=function(P){return new x(P)},w.verbose=v("verbose"),w.debug=v("debug"),w.info=v("info"),w.warn=v("warn"),w.error=v("error")}return C.instance=function(){return this._instance||(this._instance=new C),this._instance},C}()},9334:(Y,L,T)=>{"use strict";function p(x){return Symbol.for(x)}T.d(L,{Y:()=>p,I:()=>m});var m=new function x(u){var g=this;g._currentContext=u?new Map(u):new Map,g.getValue=function(M){return g._currentContext.get(M)},g.setValue=function(M,A){var I=new x(g._currentContext);return I._currentContext.set(M,A),I},g.deleteValue=function(M){var A=new x(g._currentContext);return A._currentContext.delete(M),A}}},5090:(Y,L,T)=>{"use strict";T.d(L,{Rd:()=>y,TG:()=>I,J_:()=>h});var p="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:{},N="1.4.0",m=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,u=function(C){var v=new Set([C]),w=new Set,S=C.match(m);if(!S)return function(){return!1};var P_major=+S[1],P_minor=+S[2],P_patch=+S[3];if(null!=S[4])return function(U){return U===C};function k(V){return w.add(V),!1}function O(V){return v.add(V),!0}return function(U){if(v.has(U))return!0;if(w.has(U))return!1;var B=U.match(m);if(!B)return k(U);var H_minor=+B[2],H_patch=+B[3];return null!=B[4]||P_major!==+B[1]?k(U):0===P_major?P_minor===H_minor&&P_patch<=H_patch?O(U):k(U):P_minor<=H_minor?O(U):k(U)}}(N),g=N.split(".")[0],M=Symbol.for("opentelemetry.js.api."+g),A=p;function I(C,v,w,S){var P;void 0===S&&(S=!1);var k=A[M]=null!==(P=A[M])&&void 0!==P?P:{version:N};if(!S&&k[C]){var O=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+C);return w.error(O.stack||O.message),!1}return k.version!==N?(O=new Error("@opentelemetry/api: All API registration versions must match"),w.error(O.stack||O.message),!1):(k[C]=v,w.debug("@opentelemetry/api: Registered a global for "+C+" v"+N+"."),!0)}function y(C){var v,w,S=null===(v=A[M])||void 0===v?void 0:v.version;if(S&&u(S))return null===(w=A[M])||void 0===w?void 0:w[C]}function h(C,v){v.debug("@opentelemetry/api: Unregistering a global for "+C+" v"+N+".");var w=A[M];w&&delete w[C]}},2999:(Y,L,T)=>{"use strict";T.d(L,{g:()=>l});var p=T(5090),N=T(723),m=T(9334),x=T(3259),u=function(){function a(f){void 0===f&&(f=x.Rr),this._spanContext=f}return a.prototype.spanContext=function(){return this._spanContext},a.prototype.setAttribute=function(f,_){return this},a.prototype.setAttributes=function(f){return this},a.prototype.addEvent=function(f,_){return this},a.prototype.setStatus=function(f){return this},a.prototype.updateName=function(f){return this},a.prototype.end=function(f){},a.prototype.isRecording=function(){return!1},a.prototype.recordException=function(f,_){},a}(),g=(0,m.Y)("OpenTelemetry Context Key SPAN");function M(a){return a.getValue(g)||void 0}function A(){return M(N.c.getInstance().active())}function I(a,f){return a.setValue(g,f)}function y(a){return a.deleteValue(g)}function h(a,f){return I(a,new u(f))}function C(a){var f;return null===(f=M(a))||void 0===f?void 0:f.spanContext()}var v=/^([0-9a-f]{32})$/i,w=/^[0-9a-f]{16}$/i;function k(a){return function(a){return v.test(a)&&a!==x.AE}(a.traceId)&&function(a){return w.test(a)&&a!==x.fQ}(a.spanId)}function O(a){return new u(a)}var V=N.c.getInstance(),U=function(){function a(){}return a.prototype.startSpan=function(f,_,D){if(void 0===D&&(D=V.active()),Boolean(null==_?void 0:_.root))return new u;var i=D&&C(D);return function(a){return"object"==typeof a&&"string"==typeof a.spanId&&"string"==typeof a.traceId&&"number"==typeof a.traceFlags}(i)&&k(i)?new u(i):new u},a.prototype.startActiveSpan=function(f,_,D,d){var i,b,z;if(!(arguments.length<2)){2===arguments.length?z=_:3===arguments.length?(i=_,z=D):(i=_,b=D,z=d);var q=null!=b?b:V.active(),J=this.startSpan(f,i,q),ge=I(q,J);return V.with(ge,z,void 0,J)}},a}(),H=new U,W=function(){function a(f,_,D,d){this._provider=f,this.name=_,this.version=D,this.options=d}return a.prototype.startSpan=function(f,_,D){return this._getTracer().startSpan(f,_,D)},a.prototype.startActiveSpan=function(f,_,D,d){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},a.prototype._getTracer=function(){if(this._delegate)return this._delegate;var f=this._provider.getDelegateTracer(this.name,this.version,this.options);return f?(this._delegate=f,this._delegate):H},a}(),$=new(function(){function a(){}return a.prototype.getTracer=function(f,_,D){return new U},a}()),pe=function(){function a(){}return a.prototype.getTracer=function(f,_,D){var d;return null!==(d=this.getDelegateTracer(f,_,D))&&void 0!==d?d:new W(this,f,_,D)},a.prototype.getDelegate=function(){var f;return null!==(f=this._delegate)&&void 0!==f?f:$},a.prototype.setDelegate=function(f){this._delegate=f},a.prototype.getDelegateTracer=function(f,_,D){var d;return null===(d=this._delegate)||void 0===d?void 0:d.getTracer(f,_,D)},a}(),R=T(3770),r="trace",l=function(){function a(){this._proxyTracerProvider=new pe,this.wrapSpanContext=O,this.isSpanContextValid=k,this.deleteSpan=y,this.getSpan=M,this.getActiveSpan=A,this.getSpanContext=C,this.setSpan=I,this.setSpanContext=h}return a.getInstance=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.setGlobalTracerProvider=function(f){var _=(0,p.TG)(r,this._proxyTracerProvider,R.G.instance());return _&&this._proxyTracerProvider.setDelegate(f),_},a.prototype.getTracerProvider=function(){return(0,p.Rd)(r)||this._proxyTracerProvider},a.prototype.getTracer=function(f,_){return this.getTracerProvider().getTracer(f,_)},a.prototype.disable=function(){(0,p.J_)(r,R.G.instance()),this._proxyTracerProvider=new pe},a}().getInstance()},3259:(Y,L,T)=>{"use strict";T.d(L,{fQ:()=>N,Rr:()=>x,AE:()=>m});var p=(()=>{return(u=p||(p={}))[u.NONE=0]="NONE",u[u.SAMPLED=1]="SAMPLED",p;var u})(),N="0000000000000000",m="00000000000000000000000000000000",x={traceId:m,spanId:N,traceFlags:p.NONE}},2016:(Y,L,T)=>{"use strict";const p=L;p.bignum=T(2260),p.define=T(7738).define,p.base=T(8384),p.constants=T(2779),p.decoders=T(1274),p.encoders=T(7549)},7738:(Y,L,T)=>{"use strict";const p=T(7549),N=T(1274),m=T(9879);function u(g,M){this.name=g,this.body=M,this.decoders={},this.encoders={}}L.define=function(M,A){return new u(M,A)},u.prototype._createNamed=function(M){const A=this.name;function I(y){this._initNamed(y,A)}return m(I,M),I.prototype._initNamed=function(h,C){M.call(this,h,C)},new I(this)},u.prototype._getDecoder=function(M){return this.decoders.hasOwnProperty(M=M||"der")||(this.decoders[M]=this._createNamed(N[M])),this.decoders[M]},u.prototype.decode=function(M,A,I){return this._getDecoder(A).decode(M,I)},u.prototype._getEncoder=function(M){return this.encoders.hasOwnProperty(M=M||"der")||(this.encoders[M]=this._createNamed(p[M])),this.encoders[M]},u.prototype.encode=function(M,A,I){return this._getEncoder(A).encode(M,I)}},2227:(Y,L,T)=>{"use strict";const p=T(9879),N=T(4475).b,m=T(8114).Buffer;function x(g,M){N.call(this,M),m.isBuffer(g)?(this.base=g,this.offset=0,this.length=g.length):this.error("Input not Buffer")}function u(g,M){if(Array.isArray(g))this.length=0,this.value=g.map(function(A){return u.isEncoderBuffer(A)||(A=new u(A,M)),this.length+=A.length,A},this);else if("number"==typeof g){if(!(0<=g&&g<=255))return M.error("non-byte EncoderBuffer value");this.value=g,this.length=1}else if("string"==typeof g)this.value=g,this.length=m.byteLength(g);else{if(!m.isBuffer(g))return M.error("Unsupported type: "+typeof g);this.value=g,this.length=g.length}}p(x,N),L.C=x,x.isDecoderBuffer=function(M){return M instanceof x||"object"==typeof M&&m.isBuffer(M.base)&&"DecoderBuffer"===M.constructor.name&&"number"==typeof M.offset&&"number"==typeof M.length&&"function"==typeof M.save&&"function"==typeof M.restore&&"function"==typeof M.isEmpty&&"function"==typeof M.readUInt8&&"function"==typeof M.skip&&"function"==typeof M.raw},x.prototype.save=function(){return{offset:this.offset,reporter:N.prototype.save.call(this)}},x.prototype.restore=function(M){const A=new x(this.base);return A.offset=M.offset,A.length=this.offset,this.offset=M.offset,N.prototype.restore.call(this,M.reporter),A},x.prototype.isEmpty=function(){return this.offset===this.length},x.prototype.readUInt8=function(M){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(M||"DecoderBuffer overrun")},x.prototype.skip=function(M,A){if(!(this.offset+M<=this.length))return this.error(A||"DecoderBuffer overrun");const I=new x(this.base);return I._reporterState=this._reporterState,I.offset=this.offset,I.length=this.offset+M,this.offset+=M,I},x.prototype.raw=function(M){return this.base.slice(M?M.offset:this.offset,this.length)},L.R=u,u.isEncoderBuffer=function(M){return M instanceof u||"object"==typeof M&&"EncoderBuffer"===M.constructor.name&&"number"==typeof M.length&&"function"==typeof M.join},u.prototype.join=function(M,A){return M||(M=m.alloc(this.length)),A||(A=0),0===this.length||(Array.isArray(this.value)?this.value.forEach(function(I){I.join(M,A),A+=I.length}):("number"==typeof this.value?M[A]=this.value:"string"==typeof this.value?M.write(this.value,A):m.isBuffer(this.value)&&this.value.copy(M,A),A+=this.length)),M}},8384:(Y,L,T)=>{"use strict";const p=L;p.Reporter=T(4475).b,p.DecoderBuffer=T(2227).C,p.EncoderBuffer=T(2227).R,p.Node=T(4652)},4652:(Y,L,T)=>{"use strict";const p=T(4475).b,N=T(2227).R,m=T(2227).C,x=T(6055),u=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],g=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(u);function A(y,h,C){const v={};this._baseState=v,v.name=C,v.enc=y,v.parent=h||null,v.children=null,v.tag=null,v.args=null,v.reverseArgs=null,v.choice=null,v.optional=!1,v.any=!1,v.obj=!1,v.use=null,v.useDecoder=null,v.key=null,v.default=null,v.explicit=null,v.implicit=null,v.contains=null,v.parent||(v.children=[],this._wrap())}Y.exports=A;const I=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];A.prototype.clone=function(){const h=this._baseState,C={};I.forEach(function(w){C[w]=h[w]});const v=new this.constructor(C.parent);return v._baseState=C,v},A.prototype._wrap=function(){const h=this._baseState;g.forEach(function(C){this[C]=function(){const w=new this.constructor(this);return h.children.push(w),w[C].apply(w,arguments)}},this)},A.prototype._init=function(h){const C=this._baseState;x(null===C.parent),h.call(this),C.children=C.children.filter(function(v){return v._baseState.parent===this},this),x.equal(C.children.length,1,"Root node can have only one child")},A.prototype._useArgs=function(h){const C=this._baseState,v=h.filter(function(w){return w instanceof this.constructor},this);h=h.filter(function(w){return!(w instanceof this.constructor)},this),0!==v.length&&(x(null===C.children),C.children=v,v.forEach(function(w){w._baseState.parent=this},this)),0!==h.length&&(x(null===C.args),C.args=h,C.reverseArgs=h.map(function(w){if("object"!=typeof w||w.constructor!==Object)return w;const S={};return Object.keys(w).forEach(function(P){P==(0|P)&&(P|=0),S[w[P]]=P}),S}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(y){A.prototype[y]=function(){throw new Error(y+" not implemented for encoding: "+this._baseState.enc)}}),u.forEach(function(y){A.prototype[y]=function(){const C=this._baseState,v=Array.prototype.slice.call(arguments);return x(null===C.tag),C.tag=y,this._useArgs(v),this}}),A.prototype.use=function(h){x(h);const C=this._baseState;return x(null===C.use),C.use=h,this},A.prototype.optional=function(){return this._baseState.optional=!0,this},A.prototype.def=function(h){const C=this._baseState;return x(null===C.default),C.default=h,C.optional=!0,this},A.prototype.explicit=function(h){const C=this._baseState;return x(null===C.explicit&&null===C.implicit),C.explicit=h,this},A.prototype.implicit=function(h){const C=this._baseState;return x(null===C.explicit&&null===C.implicit),C.implicit=h,this},A.prototype.obj=function(){const h=this._baseState,C=Array.prototype.slice.call(arguments);return h.obj=!0,0!==C.length&&this._useArgs(C),this},A.prototype.key=function(h){const C=this._baseState;return x(null===C.key),C.key=h,this},A.prototype.any=function(){return this._baseState.any=!0,this},A.prototype.choice=function(h){const C=this._baseState;return x(null===C.choice),C.choice=h,this._useArgs(Object.keys(h).map(function(v){return h[v]})),this},A.prototype.contains=function(h){const C=this._baseState;return x(null===C.use),C.contains=h,this},A.prototype._decode=function(h,C){const v=this._baseState;if(null===v.parent)return h.wrapResult(v.children[0]._decode(h,C));let k,w=v.default,S=!0,P=null;if(null!==v.key&&(P=h.enterKey(v.key)),v.optional){let O=null;if(null!==v.explicit?O=v.explicit:null!==v.implicit?O=v.implicit:null!==v.tag&&(O=v.tag),null!==O||v.any){if(S=this._peekTag(h,O,v.any),h.isError(S))return S}else{const V=h.save();try{null===v.choice?this._decodeGeneric(v.tag,h,C):this._decodeChoice(h,C),S=!0}catch(U){S=!1}h.restore(V)}}if(v.obj&&S&&(k=h.enterObject()),S){if(null!==v.explicit){const V=this._decodeTag(h,v.explicit);if(h.isError(V))return V;h=V}const O=h.offset;if(null===v.use&&null===v.choice){let V;v.any&&(V=h.save());const U=this._decodeTag(h,null!==v.implicit?v.implicit:v.tag,v.any);if(h.isError(U))return U;v.any?w=h.raw(V):h=U}if(C&&C.track&&null!==v.tag&&C.track(h.path(),O,h.length,"tagged"),C&&C.track&&null!==v.tag&&C.track(h.path(),h.offset,h.length,"content"),v.any||(w=null===v.choice?this._decodeGeneric(v.tag,h,C):this._decodeChoice(h,C)),h.isError(w))return w;if(!v.any&&null===v.choice&&null!==v.children&&v.children.forEach(function(U){U._decode(h,C)}),v.contains&&("octstr"===v.tag||"bitstr"===v.tag)){const V=new m(w);w=this._getUse(v.contains,h._reporterState.obj)._decode(V,C)}}return v.obj&&S&&(w=h.leaveObject(k)),null===v.key||null===w&&!0!==S?null!==P&&h.exitKey(P):h.leaveKey(P,v.key,w),w},A.prototype._decodeGeneric=function(h,C,v){const w=this._baseState;return"seq"===h||"set"===h?null:"seqof"===h||"setof"===h?this._decodeList(C,h,w.args[0],v):/str$/.test(h)?this._decodeStr(C,h,v):"objid"===h&&w.args?this._decodeObjid(C,w.args[0],w.args[1],v):"objid"===h?this._decodeObjid(C,null,null,v):"gentime"===h||"utctime"===h?this._decodeTime(C,h,v):"null_"===h?this._decodeNull(C,v):"bool"===h?this._decodeBool(C,v):"objDesc"===h?this._decodeStr(C,h,v):"int"===h||"enum"===h?this._decodeInt(C,w.args&&w.args[0],v):null!==w.use?this._getUse(w.use,C._reporterState.obj)._decode(C,v):C.error("unknown tag: "+h)},A.prototype._getUse=function(h,C){const v=this._baseState;return v.useDecoder=this._use(h,C),x(null===v.useDecoder._baseState.parent),v.useDecoder=v.useDecoder._baseState.children[0],v.implicit!==v.useDecoder._baseState.implicit&&(v.useDecoder=v.useDecoder.clone(),v.useDecoder._baseState.implicit=v.implicit),v.useDecoder},A.prototype._decodeChoice=function(h,C){const v=this._baseState;let w=null,S=!1;return Object.keys(v.choice).some(function(P){const k=h.save(),O=v.choice[P];try{const V=O._decode(h,C);if(h.isError(V))return!1;w={type:P,value:V},S=!0}catch(V){return h.restore(k),!1}return!0},this),S?w:h.error("Choice not matched")},A.prototype._createEncoderBuffer=function(h){return new N(h,this.reporter)},A.prototype._encode=function(h,C,v){const w=this._baseState;if(null!==w.default&&w.default===h)return;const S=this._encodeValue(h,C,v);return void 0===S||this._skipDefault(S,C,v)?void 0:S},A.prototype._encodeValue=function(h,C,v){const w=this._baseState;if(null===w.parent)return w.children[0]._encode(h,C||new p);let S=null;if(this.reporter=C,w.optional&&void 0===h){if(null===w.default)return;h=w.default}let P=null,k=!1;if(w.any)S=this._createEncoderBuffer(h);else if(w.choice)S=this._encodeChoice(h,C);else if(w.contains)P=this._getUse(w.contains,v)._encode(h,C),k=!0;else if(w.children)P=w.children.map(function(O){if("null_"===O._baseState.tag)return O._encode(null,C,h);if(null===O._baseState.key)return C.error("Child should have a key");const V=C.enterKey(O._baseState.key);if("object"!=typeof h)return C.error("Child expected, but input is not object");const U=O._encode(h[O._baseState.key],C,h);return C.leaveKey(V),U},this).filter(function(O){return O}),P=this._createEncoderBuffer(P);else if("seqof"===w.tag||"setof"===w.tag){if(!w.args||1!==w.args.length)return C.error("Too many args for : "+w.tag);if(!Array.isArray(h))return C.error("seqof/setof, but data is not Array");const O=this.clone();O._baseState.implicit=null,P=this._createEncoderBuffer(h.map(function(V){return this._getUse(this._baseState.args[0],h)._encode(V,C)},O))}else null!==w.use?S=this._getUse(w.use,v)._encode(h,C):(P=this._encodePrimitive(w.tag,h),k=!0);if(!w.any&&null===w.choice){const O=null!==w.implicit?w.implicit:w.tag,V=null===w.implicit?"universal":"context";null===O?null===w.use&&C.error("Tag could be omitted only for .use()"):null===w.use&&(S=this._encodeComposite(O,k,V,P))}return null!==w.explicit&&(S=this._encodeComposite(w.explicit,!1,"context",S)),S},A.prototype._encodeChoice=function(h,C){const v=this._baseState,w=v.choice[h.type];return w||x(!1,h.type+" not found in "+JSON.stringify(Object.keys(v.choice))),w._encode(h.value,C)},A.prototype._encodePrimitive=function(h,C){const v=this._baseState;if(/str$/.test(h))return this._encodeStr(C,h);if("objid"===h&&v.args)return this._encodeObjid(C,v.reverseArgs[0],v.args[1]);if("objid"===h)return this._encodeObjid(C,null,null);if("gentime"===h||"utctime"===h)return this._encodeTime(C,h);if("null_"===h)return this._encodeNull();if("int"===h||"enum"===h)return this._encodeInt(C,v.args&&v.reverseArgs[0]);if("bool"===h)return this._encodeBool(C);if("objDesc"===h)return this._encodeStr(C,h);throw new Error("Unsupported tag: "+h)},A.prototype._isNumstr=function(h){return/^[0-9 ]*$/.test(h)},A.prototype._isPrintstr=function(h){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(h)}},4475:(Y,L,T)=>{"use strict";const p=T(9879);function N(x){this._reporterState={obj:null,path:[],options:x||{},errors:[]}}function m(x,u){this.path=x,this.rethrow(u)}L.b=N,N.prototype.isError=function(u){return u instanceof m},N.prototype.save=function(){const u=this._reporterState;return{obj:u.obj,pathLen:u.path.length}},N.prototype.restore=function(u){const g=this._reporterState;g.obj=u.obj,g.path=g.path.slice(0,u.pathLen)},N.prototype.enterKey=function(u){return this._reporterState.path.push(u)},N.prototype.exitKey=function(u){const g=this._reporterState;g.path=g.path.slice(0,u-1)},N.prototype.leaveKey=function(u,g,M){const A=this._reporterState;this.exitKey(u),null!==A.obj&&(A.obj[g]=M)},N.prototype.path=function(){return this._reporterState.path.join("/")},N.prototype.enterObject=function(){const u=this._reporterState,g=u.obj;return u.obj={},g},N.prototype.leaveObject=function(u){const g=this._reporterState,M=g.obj;return g.obj=u,M},N.prototype.error=function(u){let g;const M=this._reporterState,A=u instanceof m;if(g=A?u:new m(M.path.map(function(I){return"["+JSON.stringify(I)+"]"}).join(""),u.message||u,u.stack),!M.options.partial)throw g;return A||M.errors.push(g),g},N.prototype.wrapResult=function(u){const g=this._reporterState;return g.options.partial?{result:this.isError(u)?null:u,errors:g.errors}:u},p(m,Error),m.prototype.rethrow=function(u){if(this.message=u+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,m),!this.stack)try{throw new Error(this.message)}catch(g){this.stack=g.stack}return this}},2953:(Y,L)=>{"use strict";function T(p){const N={};return Object.keys(p).forEach(function(m){(0|m)==m&&(m|=0),N[p[m]]=m}),N}L.tagClass={0:"universal",1:"application",2:"context",3:"private"},L.tagClassByName=T(L.tagClass),L.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},L.tagByName=T(L.tag)},2779:(Y,L,T)=>{"use strict";const p=L;p._reverse=function(m){const x={};return Object.keys(m).forEach(function(u){(0|u)==u&&(u|=0),x[m[u]]=u}),x},p.der=T(2953)},4163:(Y,L,T)=>{"use strict";const p=T(9879),N=T(2260),m=T(2227).C,x=T(4652),u=T(2953);function g(y){this.enc="der",this.name=y.name,this.entity=y,this.tree=new M,this.tree._init(y.body)}function M(y){x.call(this,"der",y)}function A(y,h){let C=y.readUInt8(h);if(y.isError(C))return C;const v=u.tagClass[C>>6],w=0==(32&C);if(31==(31&C)){let P=C;for(C=0;128==(128&P);){if(P=y.readUInt8(h),y.isError(P))return P;C<<=7,C|=127&P}}else C&=31;return{cls:v,primitive:w,tag:C,tagStr:u.tag[C]}}function I(y,h,C){let v=y.readUInt8(C);if(y.isError(v))return v;if(!h&&128===v)return null;if(0==(128&v))return v;const w=127&v;if(w>4)return y.error("length octect is too long");v=0;for(let S=0;S<w;S++){v<<=8;const P=y.readUInt8(C);if(y.isError(P))return P;v|=P}return v}Y.exports=g,g.prototype.decode=function(h,C){return m.isDecoderBuffer(h)||(h=new m(h,C)),this.tree._decode(h,C)},p(M,x),M.prototype._peekTag=function(h,C,v){if(h.isEmpty())return!1;const w=h.save(),S=A(h,'Failed to peek tag: "'+C+'"');return h.isError(S)?S:(h.restore(w),S.tag===C||S.tagStr===C||S.tagStr+"of"===C||v)},M.prototype._decodeTag=function(h,C,v){const w=A(h,'Failed to decode tag of "'+C+'"');if(h.isError(w))return w;let S=I(h,w.primitive,'Failed to get length of "'+C+'"');if(h.isError(S))return S;if(!v&&w.tag!==C&&w.tagStr!==C&&w.tagStr+"of"!==C)return h.error('Failed to match tag: "'+C+'"');if(w.primitive||null!==S)return h.skip(S,'Failed to match body of: "'+C+'"');const P=h.save(),k=this._skipUntilEnd(h,'Failed to skip indefinite length body: "'+this.tag+'"');return h.isError(k)?k:(S=h.offset-P.offset,h.restore(P),h.skip(S,'Failed to match body of: "'+C+'"'))},M.prototype._skipUntilEnd=function(h,C){for(;;){const v=A(h,C);if(h.isError(v))return v;const w=I(h,v.primitive,C);if(h.isError(w))return w;let S;if(S=v.primitive||null!==w?h.skip(w):this._skipUntilEnd(h,C),h.isError(S))return S;if("end"===v.tagStr)break}},M.prototype._decodeList=function(h,C,v,w){const S=[];for(;!h.isEmpty();){const P=this._peekTag(h,"end");if(h.isError(P))return P;const k=v.decode(h,"der",w);if(h.isError(k)&&P)break;S.push(k)}return S},M.prototype._decodeStr=function(h,C){if("bitstr"===C){const v=h.readUInt8();return h.isError(v)?v:{unused:v,data:h.raw()}}if("bmpstr"===C){const v=h.raw();if(v.length%2==1)return h.error("Decoding of string type: bmpstr length mismatch");let w="";for(let S=0;S<v.length/2;S++)w+=String.fromCharCode(v.readUInt16BE(2*S));return w}if("numstr"===C){const v=h.raw().toString("ascii");return this._isNumstr(v)?v:h.error("Decoding of string type: numstr unsupported characters")}if("octstr"===C)return h.raw();if("objDesc"===C)return h.raw();if("printstr"===C){const v=h.raw().toString("ascii");return this._isPrintstr(v)?v:h.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(C)?h.raw().toString():h.error("Decoding of string type: "+C+" unsupported")},M.prototype._decodeObjid=function(h,C,v){let w;const S=[];let P=0,k=0;for(;!h.isEmpty();)k=h.readUInt8(),P<<=7,P|=127&k,0==(128&k)&&(S.push(P),P=0);if(128&k&&S.push(P),w=v?S:[S[0]/40|0,S[0]%40].concat(S.slice(1)),C){let U=C[w.join(" ")];void 0===U&&(U=C[w.join(".")]),void 0!==U&&(w=U)}return w},M.prototype._decodeTime=function(h,C){const v=h.raw().toString();let w,S,P,k,O,V;if("gentime"===C)w=0|v.slice(0,4),S=0|v.slice(4,6),P=0|v.slice(6,8),k=0|v.slice(8,10),O=0|v.slice(10,12),V=0|v.slice(12,14);else{if("utctime"!==C)return h.error("Decoding "+C+" time is not supported yet");w=0|v.slice(0,2),S=0|v.slice(2,4),P=0|v.slice(4,6),k=0|v.slice(6,8),O=0|v.slice(8,10),V=0|v.slice(10,12),w=w<70?2e3+w:1900+w}return Date.UTC(w,S-1,P,k,O,V,0)},M.prototype._decodeNull=function(){return null},M.prototype._decodeBool=function(h){const C=h.readUInt8();return h.isError(C)?C:0!==C},M.prototype._decodeInt=function(h,C){const v=h.raw();let w=new N(v);return C&&(w=C[w.toString(10)]||w),w},M.prototype._use=function(h,C){return"function"==typeof h&&(h=h(C)),h._getDecoder("der").tree}},1274:(Y,L,T)=>{"use strict";const p=L;p.der=T(4163),p.pem=T(773)},773:(Y,L,T)=>{"use strict";const p=T(9879),N=T(8114).Buffer,m=T(4163);function x(u){m.call(this,u),this.enc="pem"}p(x,m),Y.exports=x,x.prototype.decode=function(g,M){const A=g.toString().split(/[\r\n]+/g),I=M.label.toUpperCase(),y=/^-----(BEGIN|END) ([^-]+)-----$/;let h=-1,C=-1;for(let S=0;S<A.length;S++){const P=A[S].match(y);if(null!==P&&P[2]===I){if(-1!==h){if("END"!==P[1])break;C=S;break}if("BEGIN"!==P[1])break;h=S}}if(-1===h||-1===C)throw new Error("PEM section not found for: "+I);const v=A.slice(h+1,C).join("");v.replace(/[^a-z0-9+/=]+/gi,"");const w=N.from(v,"base64");return m.prototype.decode.call(this,w,M)}},5079:(Y,L,T)=>{"use strict";const p=T(9879),N=T(8114).Buffer,m=T(4652),x=T(2953);function u(I){this.enc="der",this.name=I.name,this.entity=I,this.tree=new g,this.tree._init(I.body)}function g(I){m.call(this,"der",I)}function M(I){return I<10?"0"+I:I}Y.exports=u,u.prototype.encode=function(y,h){return this.tree._encode(y,h).join()},p(g,m),g.prototype._encodeComposite=function(y,h,C,v){const w=function(I,y,h,C){let v;if("seqof"===I?I="seq":"setof"===I&&(I="set"),x.tagByName.hasOwnProperty(I))v=x.tagByName[I];else{if("number"!=typeof I||(0|I)!==I)return C.error("Unknown tag: "+I);v=I}return v>=31?C.error("Multi-octet tag encoding unsupported"):(y||(v|=32),v|=x.tagClassByName[h||"universal"]<<6,v)}(y,h,C,this.reporter);if(v.length<128){const k=N.alloc(2);return k[0]=w,k[1]=v.length,this._createEncoderBuffer([k,v])}let S=1;for(let k=v.length;k>=256;k>>=8)S++;const P=N.alloc(2+S);P[0]=w,P[1]=128|S;for(let k=1+S,O=v.length;O>0;k--,O>>=8)P[k]=255&O;return this._createEncoderBuffer([P,v])},g.prototype._encodeStr=function(y,h){if("bitstr"===h)return this._createEncoderBuffer([0|y.unused,y.data]);if("bmpstr"===h){const C=N.alloc(2*y.length);for(let v=0;v<y.length;v++)C.writeUInt16BE(y.charCodeAt(v),2*v);return this._createEncoderBuffer(C)}return"numstr"===h?this._isNumstr(y)?this._createEncoderBuffer(y):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===h?this._isPrintstr(y)?this._createEncoderBuffer(y):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(h)||"objDesc"===h?this._createEncoderBuffer(y):this.reporter.error("Encoding of string type: "+h+" unsupported")},g.prototype._encodeObjid=function(y,h,C){if("string"==typeof y){if(!h)return this.reporter.error("string objid given, but no values map found");if(!h.hasOwnProperty(y))return this.reporter.error("objid not found in values map");y=h[y].split(/[\s.]+/g);for(let P=0;P<y.length;P++)y[P]|=0}else if(Array.isArray(y)){y=y.slice();for(let P=0;P<y.length;P++)y[P]|=0}if(!Array.isArray(y))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(y));if(!C){if(y[1]>=40)return this.reporter.error("Second objid identifier OOB");y.splice(0,2,40*y[0]+y[1])}let v=0;for(let P=0;P<y.length;P++){let k=y[P];for(v++;k>=128;k>>=7)v++}const w=N.alloc(v);let S=w.length-1;for(let P=y.length-1;P>=0;P--){let k=y[P];for(w[S--]=127&k;(k>>=7)>0;)w[S--]=128|127&k}return this._createEncoderBuffer(w)},g.prototype._encodeTime=function(y,h){let C;const v=new Date(y);return"gentime"===h?C=[M(v.getUTCFullYear()),M(v.getUTCMonth()+1),M(v.getUTCDate()),M(v.getUTCHours()),M(v.getUTCMinutes()),M(v.getUTCSeconds()),"Z"].join(""):"utctime"===h?C=[M(v.getUTCFullYear()%100),M(v.getUTCMonth()+1),M(v.getUTCDate()),M(v.getUTCHours()),M(v.getUTCMinutes()),M(v.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+h+" time is not supported yet"),this._encodeStr(C,"octstr")},g.prototype._encodeNull=function(){return this._createEncoderBuffer("")},g.prototype._encodeInt=function(y,h){if("string"==typeof y){if(!h)return this.reporter.error("String int or enum given, but no values map");if(!h.hasOwnProperty(y))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(y));y=h[y]}if("number"!=typeof y&&!N.isBuffer(y)){const w=y.toArray();!y.sign&&128&w[0]&&w.unshift(0),y=N.from(w)}if(N.isBuffer(y)){let w=y.length;0===y.length&&w++;const S=N.alloc(w);return y.copy(S),0===y.length&&(S[0]=0),this._createEncoderBuffer(S)}if(y<128)return this._createEncoderBuffer(y);if(y<256)return this._createEncoderBuffer([0,y]);let C=1;for(let w=y;w>=256;w>>=8)C++;const v=new Array(C);for(let w=v.length-1;w>=0;w--)v[w]=255&y,y>>=8;return 128&v[0]&&v.unshift(0),this._createEncoderBuffer(N.from(v))},g.prototype._encodeBool=function(y){return this._createEncoderBuffer(y?255:0)},g.prototype._use=function(y,h){return"function"==typeof y&&(y=y(h)),y._getEncoder("der").tree},g.prototype._skipDefault=function(y,h,C){const v=this._baseState;let w;if(null===v.default)return!1;const S=y.join();if(void 0===v.defaultBuffer&&(v.defaultBuffer=this._encodeValue(v.default,h,C).join()),S.length!==v.defaultBuffer.length)return!1;for(w=0;w<S.length;w++)if(S[w]!==v.defaultBuffer[w])return!1;return!0}},7549:(Y,L,T)=>{"use strict";const p=L;p.der=T(5079),p.pem=T(6163)},6163:(Y,L,T)=>{"use strict";const p=T(9879),N=T(5079);function m(x){N.call(this,x),this.enc="pem"}p(m,N),Y.exports=m,m.prototype.encode=function(u,g){const A=N.prototype.encode.call(this,u).toString("base64"),I=["-----BEGIN "+g.label+"-----"];for(let y=0;y<A.length;y+=64)I.push(A.slice(y,y+64));return I.push("-----END "+g.label+"-----"),I.join("\n")}},2260:function(Y,L,T){!function(p,N){"use strict";function m(R,r){if(!R)throw new Error(r||"Assertion failed")}function x(R,r){R.super_=r;var s=function(){};s.prototype=r.prototype,R.prototype=new s,R.prototype.constructor=R}function u(R,r,s){if(u.isBN(R))return R;this.negative=0,this.words=null,this.length=0,this.red=null,null!==R&&(("le"===r||"be"===r)&&(s=r,r=10),this._init(R||0,r||10,s||"be"))}var g;"object"==typeof p?p.exports=u:N.BN=u,u.BN=u,u.wordSize=26;try{g="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:T(950).Buffer}catch(R){}function M(R,r){var s=R.charCodeAt(r);return s>=65&&s<=70?s-55:s>=97&&s<=102?s-87:s-48&15}function A(R,r,s){var l=M(R,s);return s-1>=r&&(l|=M(R,s-1)<<4),l}function I(R,r,s,l){for(var a=0,f=Math.min(R.length,s),_=r;_<f;_++){var D=R.charCodeAt(_)-48;a*=l,a+=D>=49?D-49+10:D>=17?D-17+10:D}return a}u.isBN=function(r){return r instanceof u||null!==r&&"object"==typeof r&&r.constructor.wordSize===u.wordSize&&Array.isArray(r.words)},u.max=function(r,s){return r.cmp(s)>0?r:s},u.min=function(r,s){return r.cmp(s)<0?r:s},u.prototype._init=function(r,s,l){if("number"==typeof r)return this._initNumber(r,s,l);if("object"==typeof r)return this._initArray(r,s,l);"hex"===s&&(s=16),m(s===(0|s)&&s>=2&&s<=36);var a=0;"-"===(r=r.toString().replace(/\s+/g,""))[0]&&(a++,this.negative=1),a<r.length&&(16===s?this._parseHex(r,a,l):(this._parseBase(r,s,a),"le"===l&&this._initArray(this.toArray(),s,l)))},u.prototype._initNumber=function(r,s,l){r<0&&(this.negative=1,r=-r),r<67108864?(this.words=[67108863&r],this.length=1):r<4503599627370496?(this.words=[67108863&r,r/67108864&67108863],this.length=2):(m(r<9007199254740992),this.words=[67108863&r,r/67108864&67108863,1],this.length=3),"le"===l&&this._initArray(this.toArray(),s,l)},u.prototype._initArray=function(r,s,l){if(m("number"==typeof r.length),r.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(r.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var f,_,D=0;if("be"===l)for(a=r.length-1,f=0;a>=0;a-=3)this.words[f]|=(_=r[a]|r[a-1]<<8|r[a-2]<<16)<<D&67108863,this.words[f+1]=_>>>26-D&67108863,(D+=24)>=26&&(D-=26,f++);else if("le"===l)for(a=0,f=0;a<r.length;a+=3)this.words[f]|=(_=r[a]|r[a+1]<<8|r[a+2]<<16)<<D&67108863,this.words[f+1]=_>>>26-D&67108863,(D+=24)>=26&&(D-=26,f++);return this.strip()},u.prototype._parseHex=function(r,s,l){this.length=Math.ceil((r.length-s)/6),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var D,f=0,_=0;if("be"===l)for(a=r.length-1;a>=s;a-=2)D=A(r,s,a)<<f,this.words[_]|=67108863&D,f>=18?(f-=18,this.words[_+=1]|=D>>>26):f+=8;else for(a=(r.length-s)%2==0?s+1:s;a<r.length;a+=2)D=A(r,s,a)<<f,this.words[_]|=67108863&D,f>=18?(f-=18,this.words[_+=1]|=D>>>26):f+=8;this.strip()},u.prototype._parseBase=function(r,s,l){this.words=[0],this.length=1;for(var a=0,f=1;f<=67108863;f*=s)a++;a--,f=f/s|0;for(var _=r.length-l,D=_%a,d=Math.min(_,_-D)+l,i=0,b=l;b<d;b+=a)i=I(r,b,b+a,s),this.imuln(f),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i);if(0!==D){var z=1;for(i=I(r,b,r.length,s),b=0;b<D;b++)z*=s;this.imuln(z),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i)}this.strip()},u.prototype.copy=function(r){r.words=new Array(this.length);for(var s=0;s<this.length;s++)r.words[s]=this.words[s];r.length=this.length,r.negative=this.negative,r.red=this.red},u.prototype.clone=function(){var r=new u(null);return this.copy(r),r},u.prototype._expand=function(r){for(;this.length<r;)this.words[this.length++]=0;return this},u.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},u.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},u.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],C=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function w(R,r,s){s.negative=r.negative^R.negative;var l=R.length+r.length|0;s.length=l,l=l-1|0;var a=0|R.words[0],f=0|r.words[0],_=a*f,d=_/67108864|0;s.words[0]=67108863&_;for(var i=1;i<l;i++){for(var b=d>>>26,z=67108863&d,q=Math.min(i,r.length-1),J=Math.max(0,i-R.length+1);J<=q;J++)b+=(_=(a=0|R.words[i-J|0])*(f=0|r.words[J])+z)/67108864|0,z=67108863&_;s.words[i]=0|z,d=0|b}return 0!==d?s.words[i]=0|d:s.length--,s.strip()}u.prototype.toString=function(r,s){var l;if(s=0|s||1,16===(r=r||10)||"hex"===r){l="";for(var a=0,f=0,_=0;_<this.length;_++){var D=this.words[_],d=(16777215&(D<<a|f)).toString(16);l=0!=(f=D>>>24-a&16777215)||_!==this.length-1?y[6-d.length]+d+l:d+l,(a+=2)>=26&&(a-=26,_--)}for(0!==f&&(l=f.toString(16)+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}if(r===(0|r)&&r>=2&&r<=36){var i=h[r],b=C[r];l="";var z=this.clone();for(z.negative=0;!z.isZero();){var q=z.modn(b).toString(r);l=(z=z.idivn(b)).isZero()?q+l:y[i-q.length]+q+l}for(this.isZero()&&(l="0"+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}m(!1,"Base should be between 2 and 36")},u.prototype.toNumber=function(){var r=this.words[0];return 2===this.length?r+=67108864*this.words[1]:3===this.length&&1===this.words[2]?r+=4503599627370496+67108864*this.words[1]:this.length>2&&m(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-r:r},u.prototype.toJSON=function(){return this.toString(16)},u.prototype.toBuffer=function(r,s){return m(void 0!==g),this.toArrayLike(g,r,s)},u.prototype.toArray=function(r,s){return this.toArrayLike(Array,r,s)},u.prototype.toArrayLike=function(r,s,l){var a=this.byteLength(),f=l||Math.max(1,a);m(a<=f,"byte array longer than desired length"),m(f>0,"Requested array length <= 0"),this.strip();var d,i,_="le"===s,D=new r(f),b=this.clone();if(_){for(i=0;!b.isZero();i++)d=b.andln(255),b.iushrn(8),D[i]=d;for(;i<f;i++)D[i]=0}else{for(i=0;i<f-a;i++)D[i]=0;for(i=0;!b.isZero();i++)d=b.andln(255),b.iushrn(8),D[f-i-1]=d}return D},u.prototype._countBits=Math.clz32?function(r){return 32-Math.clz32(r)}:function(r){var s=r,l=0;return s>=4096&&(l+=13,s>>>=13),s>=64&&(l+=7,s>>>=7),s>=8&&(l+=4,s>>>=4),s>=2&&(l+=2,s>>>=2),l+s},u.prototype._zeroBits=function(r){if(0===r)return 26;var s=r,l=0;return 0==(8191&s)&&(l+=13,s>>>=13),0==(127&s)&&(l+=7,s>>>=7),0==(15&s)&&(l+=4,s>>>=4),0==(3&s)&&(l+=2,s>>>=2),0==(1&s)&&l++,l},u.prototype.bitLength=function(){var s=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+s},u.prototype.zeroBits=function(){if(this.isZero())return 0;for(var r=0,s=0;s<this.length;s++){var l=this._zeroBits(this.words[s]);if(r+=l,26!==l)break}return r},u.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},u.prototype.toTwos=function(r){return 0!==this.negative?this.abs().inotn(r).iaddn(1):this.clone()},u.prototype.fromTwos=function(r){return this.testn(r-1)?this.notn(r).iaddn(1).ineg():this.clone()},u.prototype.isNeg=function(){return 0!==this.negative},u.prototype.neg=function(){return this.clone().ineg()},u.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},u.prototype.iuor=function(r){for(;this.length<r.length;)this.words[this.length++]=0;for(var s=0;s<r.length;s++)this.words[s]=this.words[s]|r.words[s];return this.strip()},u.prototype.ior=function(r){return m(0==(this.negative|r.negative)),this.iuor(r)},u.prototype.or=function(r){return this.length>r.length?this.clone().ior(r):r.clone().ior(this)},u.prototype.uor=function(r){return this.length>r.length?this.clone().iuor(r):r.clone().iuor(this)},u.prototype.iuand=function(r){var s;s=this.length>r.length?r:this;for(var l=0;l<s.length;l++)this.words[l]=this.words[l]&r.words[l];return this.length=s.length,this.strip()},u.prototype.iand=function(r){return m(0==(this.negative|r.negative)),this.iuand(r)},u.prototype.and=function(r){return this.length>r.length?this.clone().iand(r):r.clone().iand(this)},u.prototype.uand=function(r){return this.length>r.length?this.clone().iuand(r):r.clone().iuand(this)},u.prototype.iuxor=function(r){var s,l;this.length>r.length?(s=this,l=r):(s=r,l=this);for(var a=0;a<l.length;a++)this.words[a]=s.words[a]^l.words[a];if(this!==s)for(;a<s.length;a++)this.words[a]=s.words[a];return this.length=s.length,this.strip()},u.prototype.ixor=function(r){return m(0==(this.negative|r.negative)),this.iuxor(r)},u.prototype.xor=function(r){return this.length>r.length?this.clone().ixor(r):r.clone().ixor(this)},u.prototype.uxor=function(r){return this.length>r.length?this.clone().iuxor(r):r.clone().iuxor(this)},u.prototype.inotn=function(r){m("number"==typeof r&&r>=0);var s=0|Math.ceil(r/26),l=r%26;this._expand(s),l>0&&s--;for(var a=0;a<s;a++)this.words[a]=67108863&~this.words[a];return l>0&&(this.words[a]=~this.words[a]&67108863>>26-l),this.strip()},u.prototype.notn=function(r){return this.clone().inotn(r)},u.prototype.setn=function(r,s){m("number"==typeof r&&r>=0);var l=r/26|0,a=r%26;return this._expand(l+1),this.words[l]=s?this.words[l]|1<<a:this.words[l]&~(1<<a),this.strip()},u.prototype.iadd=function(r){var s,l,a;if(0!==this.negative&&0===r.negative)return this.negative=0,s=this.isub(r),this.negative^=1,this._normSign();if(0===this.negative&&0!==r.negative)return r.negative=0,s=this.isub(r),r.negative=1,s._normSign();this.length>r.length?(l=this,a=r):(l=r,a=this);for(var f=0,_=0;_<a.length;_++)this.words[_]=67108863&(s=(0|l.words[_])+(0|a.words[_])+f),f=s>>>26;for(;0!==f&&_<l.length;_++)this.words[_]=67108863&(s=(0|l.words[_])+f),f=s>>>26;if(this.length=l.length,0!==f)this.words[this.length]=f,this.length++;else if(l!==this)for(;_<l.length;_++)this.words[_]=l.words[_];return this},u.prototype.add=function(r){var s;return 0!==r.negative&&0===this.negative?(r.negative=0,s=this.sub(r),r.negative^=1,s):0===r.negative&&0!==this.negative?(this.negative=0,s=r.sub(this),this.negative=1,s):this.length>r.length?this.clone().iadd(r):r.clone().iadd(this)},u.prototype.isub=function(r){if(0!==r.negative){r.negative=0;var s=this.iadd(r);return r.negative=1,s._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(r),this.negative=1,this._normSign();var a,f,l=this.cmp(r);if(0===l)return this.negative=0,this.length=1,this.words[0]=0,this;l>0?(a=this,f=r):(a=r,f=this);for(var _=0,D=0;D<f.length;D++)_=(s=(0|a.words[D])-(0|f.words[D])+_)>>26,this.words[D]=67108863&s;for(;0!==_&&D<a.length;D++)_=(s=(0|a.words[D])+_)>>26,this.words[D]=67108863&s;if(0===_&&D<a.length&&a!==this)for(;D<a.length;D++)this.words[D]=a.words[D];return this.length=Math.max(this.length,D),a!==this&&(this.negative=1),this.strip()},u.prototype.sub=function(r){return this.clone().isub(r)};var S=function(r,s,l){var d,i,b,a=r.words,f=s.words,_=l.words,D=0,z=0|a[0],q=8191&z,J=z>>>13,ge=0|a[1],me=8191&ge,le=ge>>>13,fe=0|a[2],ae=8191&fe,de=fe>>>13,xe=0|a[3],Ce=8191&xe,oe=xe>>>13,we=0|a[4],ye=8191&we,re=we>>>13,ee=0|a[5],Z=8191&ee,ue=ee>>>13,Re=0|a[6],Te=8191&Re,Ee=Re>>>13,$e=0|a[7],Ne=8191&$e,_e=$e>>>13,Be=0|a[8],Ae=8191&Be,Le=Be>>>13,Ct=0|a[9],He=8191&Ct,We=Ct>>>13,Vt=0|f[0],qe=8191&Vt,ct=Vt>>>13,Mt=0|f[1],it=8191&Mt,at=Mt>>>13,Dn=0|f[2],ot=8191&Dn,Je=Dn>>>13,En=0|f[3],Ge=8191&En,dt=En>>>13,Pn=0|f[4],ut=8191&Pn,Ve=Pn>>>13,On=0|f[5],Ke=8191&On,st=On>>>13,qn=0|f[6],ft=8191&qn,ze=qn>>>13,sn=0|f[7],ht=8191&sn,tt=sn>>>13,Qt=0|f[8],et=8191&Qt,Xe=Qt>>>13,kn=0|f[9],Ye=8191&kn,lt=kn>>>13;l.negative=r.negative^s.negative,l.length=19;var un=(D+(d=Math.imul(q,qe))|0)+((8191&(i=(i=Math.imul(q,ct))+Math.imul(J,qe)|0))<<13)|0;D=((b=Math.imul(J,ct))+(i>>>13)|0)+(un>>>26)|0,un&=67108863,d=Math.imul(me,qe),i=(i=Math.imul(me,ct))+Math.imul(le,qe)|0,b=Math.imul(le,ct);var Ht=(D+(d=d+Math.imul(q,it)|0)|0)+((8191&(i=(i=i+Math.imul(q,at)|0)+Math.imul(J,it)|0))<<13)|0;D=((b=b+Math.imul(J,at)|0)+(i>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,d=Math.imul(ae,qe),i=(i=Math.imul(ae,ct))+Math.imul(de,qe)|0,b=Math.imul(de,ct),d=d+Math.imul(me,it)|0,i=(i=i+Math.imul(me,at)|0)+Math.imul(le,it)|0,b=b+Math.imul(le,at)|0;var jt=(D+(d=d+Math.imul(q,ot)|0)|0)+((8191&(i=(i=i+Math.imul(q,Je)|0)+Math.imul(J,ot)|0))<<13)|0;D=((b=b+Math.imul(J,Je)|0)+(i>>>13)|0)+(jt>>>26)|0,jt&=67108863,d=Math.imul(Ce,qe),i=(i=Math.imul(Ce,ct))+Math.imul(oe,qe)|0,b=Math.imul(oe,ct),d=d+Math.imul(ae,it)|0,i=(i=i+Math.imul(ae,at)|0)+Math.imul(de,it)|0,b=b+Math.imul(de,at)|0,d=d+Math.imul(me,ot)|0,i=(i=i+Math.imul(me,Je)|0)+Math.imul(le,ot)|0,b=b+Math.imul(le,Je)|0;var bn=(D+(d=d+Math.imul(q,Ge)|0)|0)+((8191&(i=(i=i+Math.imul(q,dt)|0)+Math.imul(J,Ge)|0))<<13)|0;D=((b=b+Math.imul(J,dt)|0)+(i>>>13)|0)+(bn>>>26)|0,bn&=67108863,d=Math.imul(ye,qe),i=(i=Math.imul(ye,ct))+Math.imul(re,qe)|0,b=Math.imul(re,ct),d=d+Math.imul(Ce,it)|0,i=(i=i+Math.imul(Ce,at)|0)+Math.imul(oe,it)|0,b=b+Math.imul(oe,at)|0,d=d+Math.imul(ae,ot)|0,i=(i=i+Math.imul(ae,Je)|0)+Math.imul(de,ot)|0,b=b+Math.imul(de,Je)|0,d=d+Math.imul(me,Ge)|0,i=(i=i+Math.imul(me,dt)|0)+Math.imul(le,Ge)|0,b=b+Math.imul(le,dt)|0;var dn=(D+(d=d+Math.imul(q,ut)|0)|0)+((8191&(i=(i=i+Math.imul(q,Ve)|0)+Math.imul(J,ut)|0))<<13)|0;D=((b=b+Math.imul(J,Ve)|0)+(i>>>13)|0)+(dn>>>26)|0,dn&=67108863,d=Math.imul(Z,qe),i=(i=Math.imul(Z,ct))+Math.imul(ue,qe)|0,b=Math.imul(ue,ct),d=d+Math.imul(ye,it)|0,i=(i=i+Math.imul(ye,at)|0)+Math.imul(re,it)|0,b=b+Math.imul(re,at)|0,d=d+Math.imul(Ce,ot)|0,i=(i=i+Math.imul(Ce,Je)|0)+Math.imul(oe,ot)|0,b=b+Math.imul(oe,Je)|0,d=d+Math.imul(ae,Ge)|0,i=(i=i+Math.imul(ae,dt)|0)+Math.imul(de,Ge)|0,b=b+Math.imul(de,dt)|0,d=d+Math.imul(me,ut)|0,i=(i=i+Math.imul(me,Ve)|0)+Math.imul(le,ut)|0,b=b+Math.imul(le,Ve)|0;var pn=(D+(d=d+Math.imul(q,Ke)|0)|0)+((8191&(i=(i=i+Math.imul(q,st)|0)+Math.imul(J,Ke)|0))<<13)|0;D=((b=b+Math.imul(J,st)|0)+(i>>>13)|0)+(pn>>>26)|0,pn&=67108863,d=Math.imul(Te,qe),i=(i=Math.imul(Te,ct))+Math.imul(Ee,qe)|0,b=Math.imul(Ee,ct),d=d+Math.imul(Z,it)|0,i=(i=i+Math.imul(Z,at)|0)+Math.imul(ue,it)|0,b=b+Math.imul(ue,at)|0,d=d+Math.imul(ye,ot)|0,i=(i=i+Math.imul(ye,Je)|0)+Math.imul(re,ot)|0,b=b+Math.imul(re,Je)|0,d=d+Math.imul(Ce,Ge)|0,i=(i=i+Math.imul(Ce,dt)|0)+Math.imul(oe,Ge)|0,b=b+Math.imul(oe,dt)|0,d=d+Math.imul(ae,ut)|0,i=(i=i+Math.imul(ae,Ve)|0)+Math.imul(de,ut)|0,b=b+Math.imul(de,Ve)|0,d=d+Math.imul(me,Ke)|0,i=(i=i+Math.imul(me,st)|0)+Math.imul(le,Ke)|0,b=b+Math.imul(le,st)|0;var In=(D+(d=d+Math.imul(q,ft)|0)|0)+((8191&(i=(i=i+Math.imul(q,ze)|0)+Math.imul(J,ft)|0))<<13)|0;D=((b=b+Math.imul(J,ze)|0)+(i>>>13)|0)+(In>>>26)|0,In&=67108863,d=Math.imul(Ne,qe),i=(i=Math.imul(Ne,ct))+Math.imul(_e,qe)|0,b=Math.imul(_e,ct),d=d+Math.imul(Te,it)|0,i=(i=i+Math.imul(Te,at)|0)+Math.imul(Ee,it)|0,b=b+Math.imul(Ee,at)|0,d=d+Math.imul(Z,ot)|0,i=(i=i+Math.imul(Z,Je)|0)+Math.imul(ue,ot)|0,b=b+Math.imul(ue,Je)|0,d=d+Math.imul(ye,Ge)|0,i=(i=i+Math.imul(ye,dt)|0)+Math.imul(re,Ge)|0,b=b+Math.imul(re,dt)|0,d=d+Math.imul(Ce,ut)|0,i=(i=i+Math.imul(Ce,Ve)|0)+Math.imul(oe,ut)|0,b=b+Math.imul(oe,Ve)|0,d=d+Math.imul(ae,Ke)|0,i=(i=i+Math.imul(ae,st)|0)+Math.imul(de,Ke)|0,b=b+Math.imul(de,st)|0,d=d+Math.imul(me,ft)|0,i=(i=i+Math.imul(me,ze)|0)+Math.imul(le,ft)|0,b=b+Math.imul(le,ze)|0;var rn=(D+(d=d+Math.imul(q,ht)|0)|0)+((8191&(i=(i=i+Math.imul(q,tt)|0)+Math.imul(J,ht)|0))<<13)|0;D=((b=b+Math.imul(J,tt)|0)+(i>>>13)|0)+(rn>>>26)|0,rn&=67108863,d=Math.imul(Ae,qe),i=(i=Math.imul(Ae,ct))+Math.imul(Le,qe)|0,b=Math.imul(Le,ct),d=d+Math.imul(Ne,it)|0,i=(i=i+Math.imul(Ne,at)|0)+Math.imul(_e,it)|0,b=b+Math.imul(_e,at)|0,d=d+Math.imul(Te,ot)|0,i=(i=i+Math.imul(Te,Je)|0)+Math.imul(Ee,ot)|0,b=b+Math.imul(Ee,Je)|0,d=d+Math.imul(Z,Ge)|0,i=(i=i+Math.imul(Z,dt)|0)+Math.imul(ue,Ge)|0,b=b+Math.imul(ue,dt)|0,d=d+Math.imul(ye,ut)|0,i=(i=i+Math.imul(ye,Ve)|0)+Math.imul(re,ut)|0,b=b+Math.imul(re,Ve)|0,d=d+Math.imul(Ce,Ke)|0,i=(i=i+Math.imul(Ce,st)|0)+Math.imul(oe,Ke)|0,b=b+Math.imul(oe,st)|0,d=d+Math.imul(ae,ft)|0,i=(i=i+Math.imul(ae,ze)|0)+Math.imul(de,ft)|0,b=b+Math.imul(de,ze)|0,d=d+Math.imul(me,ht)|0,i=(i=i+Math.imul(me,tt)|0)+Math.imul(le,ht)|0,b=b+Math.imul(le,tt)|0;var Cn=(D+(d=d+Math.imul(q,et)|0)|0)+((8191&(i=(i=i+Math.imul(q,Xe)|0)+Math.imul(J,et)|0))<<13)|0;D=((b=b+Math.imul(J,Xe)|0)+(i>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,d=Math.imul(He,qe),i=(i=Math.imul(He,ct))+Math.imul(We,qe)|0,b=Math.imul(We,ct),d=d+Math.imul(Ae,it)|0,i=(i=i+Math.imul(Ae,at)|0)+Math.imul(Le,it)|0,b=b+Math.imul(Le,at)|0,d=d+Math.imul(Ne,ot)|0,i=(i=i+Math.imul(Ne,Je)|0)+Math.imul(_e,ot)|0,b=b+Math.imul(_e,Je)|0,d=d+Math.imul(Te,Ge)|0,i=(i=i+Math.imul(Te,dt)|0)+Math.imul(Ee,Ge)|0,b=b+Math.imul(Ee,dt)|0,d=d+Math.imul(Z,ut)|0,i=(i=i+Math.imul(Z,Ve)|0)+Math.imul(ue,ut)|0,b=b+Math.imul(ue,Ve)|0,d=d+Math.imul(ye,Ke)|0,i=(i=i+Math.imul(ye,st)|0)+Math.imul(re,Ke)|0,b=b+Math.imul(re,st)|0,d=d+Math.imul(Ce,ft)|0,i=(i=i+Math.imul(Ce,ze)|0)+Math.imul(oe,ft)|0,b=b+Math.imul(oe,ze)|0,d=d+Math.imul(ae,ht)|0,i=(i=i+Math.imul(ae,tt)|0)+Math.imul(de,ht)|0,b=b+Math.imul(de,tt)|0,d=d+Math.imul(me,et)|0,i=(i=i+Math.imul(me,Xe)|0)+Math.imul(le,et)|0,b=b+Math.imul(le,Xe)|0;var Kt=(D+(d=d+Math.imul(q,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(q,lt)|0)+Math.imul(J,Ye)|0))<<13)|0;D=((b=b+Math.imul(J,lt)|0)+(i>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,d=Math.imul(He,it),i=(i=Math.imul(He,at))+Math.imul(We,it)|0,b=Math.imul(We,at),d=d+Math.imul(Ae,ot)|0,i=(i=i+Math.imul(Ae,Je)|0)+Math.imul(Le,ot)|0,b=b+Math.imul(Le,Je)|0,d=d+Math.imul(Ne,Ge)|0,i=(i=i+Math.imul(Ne,dt)|0)+Math.imul(_e,Ge)|0,b=b+Math.imul(_e,dt)|0,d=d+Math.imul(Te,ut)|0,i=(i=i+Math.imul(Te,Ve)|0)+Math.imul(Ee,ut)|0,b=b+Math.imul(Ee,Ve)|0,d=d+Math.imul(Z,Ke)|0,i=(i=i+Math.imul(Z,st)|0)+Math.imul(ue,Ke)|0,b=b+Math.imul(ue,st)|0,d=d+Math.imul(ye,ft)|0,i=(i=i+Math.imul(ye,ze)|0)+Math.imul(re,ft)|0,b=b+Math.imul(re,ze)|0,d=d+Math.imul(Ce,ht)|0,i=(i=i+Math.imul(Ce,tt)|0)+Math.imul(oe,ht)|0,b=b+Math.imul(oe,tt)|0,d=d+Math.imul(ae,et)|0,i=(i=i+Math.imul(ae,Xe)|0)+Math.imul(de,et)|0,b=b+Math.imul(de,Xe)|0;var Nt=(D+(d=d+Math.imul(me,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(me,lt)|0)+Math.imul(le,Ye)|0))<<13)|0;D=((b=b+Math.imul(le,lt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,d=Math.imul(He,ot),i=(i=Math.imul(He,Je))+Math.imul(We,ot)|0,b=Math.imul(We,Je),d=d+Math.imul(Ae,Ge)|0,i=(i=i+Math.imul(Ae,dt)|0)+Math.imul(Le,Ge)|0,b=b+Math.imul(Le,dt)|0,d=d+Math.imul(Ne,ut)|0,i=(i=i+Math.imul(Ne,Ve)|0)+Math.imul(_e,ut)|0,b=b+Math.imul(_e,Ve)|0,d=d+Math.imul(Te,Ke)|0,i=(i=i+Math.imul(Te,st)|0)+Math.imul(Ee,Ke)|0,b=b+Math.imul(Ee,st)|0,d=d+Math.imul(Z,ft)|0,i=(i=i+Math.imul(Z,ze)|0)+Math.imul(ue,ft)|0,b=b+Math.imul(ue,ze)|0,d=d+Math.imul(ye,ht)|0,i=(i=i+Math.imul(ye,tt)|0)+Math.imul(re,ht)|0,b=b+Math.imul(re,tt)|0,d=d+Math.imul(Ce,et)|0,i=(i=i+Math.imul(Ce,Xe)|0)+Math.imul(oe,et)|0,b=b+Math.imul(oe,Xe)|0;var xn=(D+(d=d+Math.imul(ae,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(ae,lt)|0)+Math.imul(de,Ye)|0))<<13)|0;D=((b=b+Math.imul(de,lt)|0)+(i>>>13)|0)+(xn>>>26)|0,xn&=67108863,d=Math.imul(He,Ge),i=(i=Math.imul(He,dt))+Math.imul(We,Ge)|0,b=Math.imul(We,dt),d=d+Math.imul(Ae,ut)|0,i=(i=i+Math.imul(Ae,Ve)|0)+Math.imul(Le,ut)|0,b=b+Math.imul(Le,Ve)|0,d=d+Math.imul(Ne,Ke)|0,i=(i=i+Math.imul(Ne,st)|0)+Math.imul(_e,Ke)|0,b=b+Math.imul(_e,st)|0,d=d+Math.imul(Te,ft)|0,i=(i=i+Math.imul(Te,ze)|0)+Math.imul(Ee,ft)|0,b=b+Math.imul(Ee,ze)|0,d=d+Math.imul(Z,ht)|0,i=(i=i+Math.imul(Z,tt)|0)+Math.imul(ue,ht)|0,b=b+Math.imul(ue,tt)|0,d=d+Math.imul(ye,et)|0,i=(i=i+Math.imul(ye,Xe)|0)+Math.imul(re,et)|0,b=b+Math.imul(re,Xe)|0;var wn=(D+(d=d+Math.imul(Ce,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(Ce,lt)|0)+Math.imul(oe,Ye)|0))<<13)|0;D=((b=b+Math.imul(oe,lt)|0)+(i>>>13)|0)+(wn>>>26)|0,wn&=67108863,d=Math.imul(He,ut),i=(i=Math.imul(He,Ve))+Math.imul(We,ut)|0,b=Math.imul(We,Ve),d=d+Math.imul(Ae,Ke)|0,i=(i=i+Math.imul(Ae,st)|0)+Math.imul(Le,Ke)|0,b=b+Math.imul(Le,st)|0,d=d+Math.imul(Ne,ft)|0,i=(i=i+Math.imul(Ne,ze)|0)+Math.imul(_e,ft)|0,b=b+Math.imul(_e,ze)|0,d=d+Math.imul(Te,ht)|0,i=(i=i+Math.imul(Te,tt)|0)+Math.imul(Ee,ht)|0,b=b+Math.imul(Ee,tt)|0,d=d+Math.imul(Z,et)|0,i=(i=i+Math.imul(Z,Xe)|0)+Math.imul(ue,et)|0,b=b+Math.imul(ue,Xe)|0;var Mn=(D+(d=d+Math.imul(ye,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(ye,lt)|0)+Math.imul(re,Ye)|0))<<13)|0;D=((b=b+Math.imul(re,lt)|0)+(i>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,d=Math.imul(He,Ke),i=(i=Math.imul(He,st))+Math.imul(We,Ke)|0,b=Math.imul(We,st),d=d+Math.imul(Ae,ft)|0,i=(i=i+Math.imul(Ae,ze)|0)+Math.imul(Le,ft)|0,b=b+Math.imul(Le,ze)|0,d=d+Math.imul(Ne,ht)|0,i=(i=i+Math.imul(Ne,tt)|0)+Math.imul(_e,ht)|0,b=b+Math.imul(_e,tt)|0,d=d+Math.imul(Te,et)|0,i=(i=i+Math.imul(Te,Xe)|0)+Math.imul(Ee,et)|0,b=b+Math.imul(Ee,Xe)|0;var xt=(D+(d=d+Math.imul(Z,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(Z,lt)|0)+Math.imul(ue,Ye)|0))<<13)|0;D=((b=b+Math.imul(ue,lt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,d=Math.imul(He,ft),i=(i=Math.imul(He,ze))+Math.imul(We,ft)|0,b=Math.imul(We,ze),d=d+Math.imul(Ae,ht)|0,i=(i=i+Math.imul(Ae,tt)|0)+Math.imul(Le,ht)|0,b=b+Math.imul(Le,tt)|0,d=d+Math.imul(Ne,et)|0,i=(i=i+Math.imul(Ne,Xe)|0)+Math.imul(_e,et)|0,b=b+Math.imul(_e,Xe)|0;var Rn=(D+(d=d+Math.imul(Te,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(Te,lt)|0)+Math.imul(Ee,Ye)|0))<<13)|0;D=((b=b+Math.imul(Ee,lt)|0)+(i>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,d=Math.imul(He,ht),i=(i=Math.imul(He,tt))+Math.imul(We,ht)|0,b=Math.imul(We,tt),d=d+Math.imul(Ae,et)|0,i=(i=i+Math.imul(Ae,Xe)|0)+Math.imul(Le,et)|0,b=b+Math.imul(Le,Xe)|0;var Zt=(D+(d=d+Math.imul(Ne,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(Ne,lt)|0)+Math.imul(_e,Ye)|0))<<13)|0;D=((b=b+Math.imul(_e,lt)|0)+(i>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,d=Math.imul(He,et),i=(i=Math.imul(He,Xe))+Math.imul(We,et)|0,b=Math.imul(We,Xe);var tn=(D+(d=d+Math.imul(Ae,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(Ae,lt)|0)+Math.imul(Le,Ye)|0))<<13)|0;D=((b=b+Math.imul(Le,lt)|0)+(i>>>13)|0)+(tn>>>26)|0,tn&=67108863;var _n=(D+(d=Math.imul(He,Ye))|0)+((8191&(i=(i=Math.imul(He,lt))+Math.imul(We,Ye)|0))<<13)|0;return D=((b=Math.imul(We,lt))+(i>>>13)|0)+(_n>>>26)|0,_n&=67108863,_[0]=un,_[1]=Ht,_[2]=jt,_[3]=bn,_[4]=dn,_[5]=pn,_[6]=In,_[7]=rn,_[8]=Cn,_[9]=Kt,_[10]=Nt,_[11]=xn,_[12]=wn,_[13]=Mn,_[14]=xt,_[15]=Rn,_[16]=Zt,_[17]=tn,_[18]=_n,0!==D&&(_[19]=D,l.length++),l};function k(R,r,s){return(new O).mulp(R,r,s)}function O(R,r){this.x=R,this.y=r}Math.imul||(S=w),u.prototype.mulTo=function(r,s){var a=this.length+r.length;return 10===this.length&&10===r.length?S(this,r,s):a<63?w(this,r,s):a<1024?function(R,r,s){s.negative=r.negative^R.negative,s.length=R.length+r.length;for(var l=0,a=0,f=0;f<s.length-1;f++){var _=a;a=0;for(var D=67108863&l,d=Math.min(f,r.length-1),i=Math.max(0,f-R.length+1);i<=d;i++){var J=(0|R.words[f-i])*(0|r.words[i]),ge=67108863&J;D=67108863&(ge=ge+D|0),a+=(_=(_=_+(J/67108864|0)|0)+(ge>>>26)|0)>>>26,_&=67108863}s.words[f]=D,l=_,_=a}return 0!==l?s.words[f]=l:s.length--,s.strip()}(this,r,s):k(this,r,s)},O.prototype.makeRBT=function(r){for(var s=new Array(r),l=u.prototype._countBits(r)-1,a=0;a<r;a++)s[a]=this.revBin(a,l,r);return s},O.prototype.revBin=function(r,s,l){if(0===r||r===l-1)return r;for(var a=0,f=0;f<s;f++)a|=(1&r)<<s-f-1,r>>=1;return a},O.prototype.permute=function(r,s,l,a,f,_){for(var D=0;D<_;D++)a[D]=s[r[D]],f[D]=l[r[D]]},O.prototype.transform=function(r,s,l,a,f,_){this.permute(_,r,s,l,a,f);for(var D=1;D<f;D<<=1)for(var d=D<<1,i=Math.cos(2*Math.PI/d),b=Math.sin(2*Math.PI/d),z=0;z<f;z+=d)for(var q=i,J=b,ge=0;ge<D;ge++){var me=l[z+ge],le=a[z+ge],fe=l[z+ge+D],ae=a[z+ge+D],de=q*fe-J*ae;ae=q*ae+J*fe,l[z+ge]=me+(fe=de),a[z+ge]=le+ae,l[z+ge+D]=me-fe,a[z+ge+D]=le-ae,ge!==d&&(de=i*q-b*J,J=i*J+b*q,q=de)}},O.prototype.guessLen13b=function(r,s){var l=1|Math.max(s,r),a=1&l,f=0;for(l=l/2|0;l;l>>>=1)f++;return 1<<f+1+a},O.prototype.conjugate=function(r,s,l){if(!(l<=1))for(var a=0;a<l/2;a++){var f=r[a];r[a]=r[l-a-1],r[l-a-1]=f,f=s[a],s[a]=-s[l-a-1],s[l-a-1]=-f}},O.prototype.normalize13b=function(r,s){for(var l=0,a=0;a<s/2;a++){var f=8192*Math.round(r[2*a+1]/s)+Math.round(r[2*a]/s)+l;r[a]=67108863&f,l=f<67108864?0:f/67108864|0}return r},O.prototype.convert13b=function(r,s,l,a){for(var f=0,_=0;_<s;_++)l[2*_]=8191&(f+=0|r[_]),l[2*_+1]=8191&(f>>>=13),f>>>=13;for(_=2*s;_<a;++_)l[_]=0;m(0===f),m(0==(-8192&f))},O.prototype.stub=function(r){for(var s=new Array(r),l=0;l<r;l++)s[l]=0;return s},O.prototype.mulp=function(r,s,l){var a=2*this.guessLen13b(r.length,s.length),f=this.makeRBT(a),_=this.stub(a),D=new Array(a),d=new Array(a),i=new Array(a),b=new Array(a),z=new Array(a),q=new Array(a),J=l.words;J.length=a,this.convert13b(r.words,r.length,D,a),this.convert13b(s.words,s.length,b,a),this.transform(D,_,d,i,a,f),this.transform(b,_,z,q,a,f);for(var ge=0;ge<a;ge++){var me=d[ge]*z[ge]-i[ge]*q[ge];i[ge]=d[ge]*q[ge]+i[ge]*z[ge],d[ge]=me}return this.conjugate(d,i,a),this.transform(d,i,J,_,a,f),this.conjugate(J,_,a),this.normalize13b(J,a),l.negative=r.negative^s.negative,l.length=r.length+s.length,l.strip()},u.prototype.mul=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),this.mulTo(r,s)},u.prototype.mulf=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),k(this,r,s)},u.prototype.imul=function(r){return this.clone().mulTo(r,this)},u.prototype.imuln=function(r){m("number"==typeof r),m(r<67108864);for(var s=0,l=0;l<this.length;l++){var a=(0|this.words[l])*r,f=(67108863&a)+(67108863&s);s>>=26,s+=a/67108864|0,s+=f>>>26,this.words[l]=67108863&f}return 0!==s&&(this.words[l]=s,this.length++),this},u.prototype.muln=function(r){return this.clone().imuln(r)},u.prototype.sqr=function(){return this.mul(this)},u.prototype.isqr=function(){return this.imul(this.clone())},u.prototype.pow=function(r){var s=function(R){for(var r=new Array(R.bitLength()),s=0;s<r.length;s++){var a=s%26;r[s]=(R.words[s/26|0]&1<<a)>>>a}return r}(r);if(0===s.length)return new u(1);for(var l=this,a=0;a<s.length&&0===s[a];a++,l=l.sqr());if(++a<s.length)for(var f=l.sqr();a<s.length;a++,f=f.sqr())0!==s[a]&&(l=l.mul(f));return l},u.prototype.iushln=function(r){m("number"==typeof r&&r>=0);var f,s=r%26,l=(r-s)/26,a=67108863>>>26-s<<26-s;if(0!==s){var _=0;for(f=0;f<this.length;f++){var D=this.words[f]&a;this.words[f]=(0|this.words[f])-D<<s|_,_=D>>>26-s}_&&(this.words[f]=_,this.length++)}if(0!==l){for(f=this.length-1;f>=0;f--)this.words[f+l]=this.words[f];for(f=0;f<l;f++)this.words[f]=0;this.length+=l}return this.strip()},u.prototype.ishln=function(r){return m(0===this.negative),this.iushln(r)},u.prototype.iushrn=function(r,s,l){var a;m("number"==typeof r&&r>=0),a=s?(s-s%26)/26:0;var f=r%26,_=Math.min((r-f)/26,this.length),D=67108863^67108863>>>f<<f,d=l;if(a-=_,a=Math.max(0,a),d){for(var i=0;i<_;i++)d.words[i]=this.words[i];d.length=_}if(0!==_)if(this.length>_)for(this.length-=_,i=0;i<this.length;i++)this.words[i]=this.words[i+_];else this.words[0]=0,this.length=1;var b=0;for(i=this.length-1;i>=0&&(0!==b||i>=a);i--){var z=0|this.words[i];this.words[i]=b<<26-f|z>>>f,b=z&D}return d&&0!==b&&(d.words[d.length++]=b),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},u.prototype.ishrn=function(r,s,l){return m(0===this.negative),this.iushrn(r,s,l)},u.prototype.shln=function(r){return this.clone().ishln(r)},u.prototype.ushln=function(r){return this.clone().iushln(r)},u.prototype.shrn=function(r){return this.clone().ishrn(r)},u.prototype.ushrn=function(r){return this.clone().iushrn(r)},u.prototype.testn=function(r){m("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return!(this.length<=l||!(this.words[l]&1<<s))},u.prototype.imaskn=function(r){m("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return m(0===this.negative,"imaskn works only with positive numbers"),this.length<=l?this:(0!==s&&l++,this.length=Math.min(l,this.length),0!==s&&(this.words[this.length-1]&=67108863^67108863>>>s<<s),this.strip())},u.prototype.maskn=function(r){return this.clone().imaskn(r)},u.prototype.iaddn=function(r){return m("number"==typeof r),m(r<67108864),r<0?this.isubn(-r):0!==this.negative?1===this.length&&(0|this.words[0])<r?(this.words[0]=r-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(r),this.negative=1,this):this._iaddn(r)},u.prototype._iaddn=function(r){this.words[0]+=r;for(var s=0;s<this.length&&this.words[s]>=67108864;s++)this.words[s]-=67108864,s===this.length-1?this.words[s+1]=1:this.words[s+1]++;return this.length=Math.max(this.length,s+1),this},u.prototype.isubn=function(r){if(m("number"==typeof r),m(r<67108864),r<0)return this.iaddn(-r);if(0!==this.negative)return this.negative=0,this.iaddn(r),this.negative=1,this;if(this.words[0]-=r,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var s=0;s<this.length&&this.words[s]<0;s++)this.words[s]+=67108864,this.words[s+1]-=1;return this.strip()},u.prototype.addn=function(r){return this.clone().iaddn(r)},u.prototype.subn=function(r){return this.clone().isubn(r)},u.prototype.iabs=function(){return this.negative=0,this},u.prototype.abs=function(){return this.clone().iabs()},u.prototype._ishlnsubmul=function(r,s,l){var f;this._expand(r.length+l);var _,D=0;for(f=0;f<r.length;f++){_=(0|this.words[f+l])+D;var d=(0|r.words[f])*s;D=((_-=67108863&d)>>26)-(d/67108864|0),this.words[f+l]=67108863&_}for(;f<this.length-l;f++)D=(_=(0|this.words[f+l])+D)>>26,this.words[f+l]=67108863&_;if(0===D)return this.strip();for(m(-1===D),D=0,f=0;f<this.length;f++)D=(_=-(0|this.words[f])+D)>>26,this.words[f]=67108863&_;return this.negative=1,this.strip()},u.prototype._wordDiv=function(r,s){var l,a=this.clone(),f=r,_=0|f.words[f.length-1];0!=(l=26-this._countBits(_))&&(f=f.ushln(l),a.iushln(l),_=0|f.words[f.length-1]);var i,d=a.length-f.length;if("mod"!==s){(i=new u(null)).length=d+1,i.words=new Array(i.length);for(var b=0;b<i.length;b++)i.words[b]=0}var z=a.clone()._ishlnsubmul(f,1,d);0===z.negative&&(a=z,i&&(i.words[d]=1));for(var q=d-1;q>=0;q--){var J=67108864*(0|a.words[f.length+q])+(0|a.words[f.length+q-1]);for(J=Math.min(J/_|0,67108863),a._ishlnsubmul(f,J,q);0!==a.negative;)J--,a.negative=0,a._ishlnsubmul(f,1,q),a.isZero()||(a.negative^=1);i&&(i.words[q]=J)}return i&&i.strip(),a.strip(),"div"!==s&&0!==l&&a.iushrn(l),{div:i||null,mod:a}},u.prototype.divmod=function(r,s,l){return m(!r.isZero()),this.isZero()?{div:new u(0),mod:new u(0)}:0!==this.negative&&0===r.negative?(_=this.neg().divmod(r,s),"mod"!==s&&(a=_.div.neg()),"div"!==s&&(f=_.mod.neg(),l&&0!==f.negative&&f.iadd(r)),{div:a,mod:f}):0===this.negative&&0!==r.negative?(_=this.divmod(r.neg(),s),"mod"!==s&&(a=_.div.neg()),{div:a,mod:_.mod}):0!=(this.negative&r.negative)?(_=this.neg().divmod(r.neg(),s),"div"!==s&&(f=_.mod.neg(),l&&0!==f.negative&&f.isub(r)),{div:_.div,mod:f}):r.length>this.length||this.cmp(r)<0?{div:new u(0),mod:this}:1===r.length?"div"===s?{div:this.divn(r.words[0]),mod:null}:"mod"===s?{div:null,mod:new u(this.modn(r.words[0]))}:{div:this.divn(r.words[0]),mod:new u(this.modn(r.words[0]))}:this._wordDiv(r,s);var a,f,_},u.prototype.div=function(r){return this.divmod(r,"div",!1).div},u.prototype.mod=function(r){return this.divmod(r,"mod",!1).mod},u.prototype.umod=function(r){return this.divmod(r,"mod",!0).mod},u.prototype.divRound=function(r){var s=this.divmod(r);if(s.mod.isZero())return s.div;var l=0!==s.div.negative?s.mod.isub(r):s.mod,a=r.ushrn(1),f=r.andln(1),_=l.cmp(a);return _<0||1===f&&0===_?s.div:0!==s.div.negative?s.div.isubn(1):s.div.iaddn(1)},u.prototype.modn=function(r){m(r<=67108863);for(var s=(1<<26)%r,l=0,a=this.length-1;a>=0;a--)l=(s*l+(0|this.words[a]))%r;return l},u.prototype.idivn=function(r){m(r<=67108863);for(var s=0,l=this.length-1;l>=0;l--){var a=(0|this.words[l])+67108864*s;this.words[l]=a/r|0,s=a%r}return this.strip()},u.prototype.divn=function(r){return this.clone().idivn(r)},u.prototype.egcd=function(r){m(0===r.negative),m(!r.isZero());var s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),_=new u(0),D=new u(1),d=0;s.isEven()&&l.isEven();)s.iushrn(1),l.iushrn(1),++d;for(var i=l.clone(),b=s.clone();!s.isZero();){for(var z=0,q=1;0==(s.words[0]&q)&&z<26;++z,q<<=1);if(z>0)for(s.iushrn(z);z-- >0;)(a.isOdd()||f.isOdd())&&(a.iadd(i),f.isub(b)),a.iushrn(1),f.iushrn(1);for(var J=0,ge=1;0==(l.words[0]&ge)&&J<26;++J,ge<<=1);if(J>0)for(l.iushrn(J);J-- >0;)(_.isOdd()||D.isOdd())&&(_.iadd(i),D.isub(b)),_.iushrn(1),D.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(_),f.isub(D)):(l.isub(s),_.isub(a),D.isub(f))}return{a:_,b:D,gcd:l.iushln(d)}},u.prototype._invmp=function(r){m(0===r.negative),m(!r.isZero());var z,s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),_=l.clone();s.cmpn(1)>0&&l.cmpn(1)>0;){for(var D=0,d=1;0==(s.words[0]&d)&&D<26;++D,d<<=1);if(D>0)for(s.iushrn(D);D-- >0;)a.isOdd()&&a.iadd(_),a.iushrn(1);for(var i=0,b=1;0==(l.words[0]&b)&&i<26;++i,b<<=1);if(i>0)for(l.iushrn(i);i-- >0;)f.isOdd()&&f.iadd(_),f.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(f)):(l.isub(s),f.isub(a))}return(z=0===s.cmpn(1)?a:f).cmpn(0)<0&&z.iadd(r),z},u.prototype.gcd=function(r){if(this.isZero())return r.abs();if(r.isZero())return this.abs();var s=this.clone(),l=r.clone();s.negative=0,l.negative=0;for(var a=0;s.isEven()&&l.isEven();a++)s.iushrn(1),l.iushrn(1);for(;;){for(;s.isEven();)s.iushrn(1);for(;l.isEven();)l.iushrn(1);var f=s.cmp(l);if(f<0){var _=s;s=l,l=_}else if(0===f||0===l.cmpn(1))break;s.isub(l)}return l.iushln(a)},u.prototype.invm=function(r){return this.egcd(r).a.umod(r)},u.prototype.isEven=function(){return 0==(1&this.words[0])},u.prototype.isOdd=function(){return 1==(1&this.words[0])},u.prototype.andln=function(r){return this.words[0]&r},u.prototype.bincn=function(r){m("number"==typeof r);var s=r%26,l=(r-s)/26,a=1<<s;if(this.length<=l)return this._expand(l+1),this.words[l]|=a,this;for(var f=a,_=l;0!==f&&_<this.length;_++){var D=0|this.words[_];f=(D+=f)>>>26,this.words[_]=D&=67108863}return 0!==f&&(this.words[_]=f,this.length++),this},u.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},u.prototype.cmpn=function(r){var l,s=r<0;if(0!==this.negative&&!s)return-1;if(0===this.negative&&s)return 1;if(this.strip(),this.length>1)l=1;else{s&&(r=-r),m(r<=67108863,"Number is too big");var a=0|this.words[0];l=a===r?0:a<r?-1:1}return 0!==this.negative?0|-l:l},u.prototype.cmp=function(r){if(0!==this.negative&&0===r.negative)return-1;if(0===this.negative&&0!==r.negative)return 1;var s=this.ucmp(r);return 0!==this.negative?0|-s:s},u.prototype.ucmp=function(r){if(this.length>r.length)return 1;if(this.length<r.length)return-1;for(var s=0,l=this.length-1;l>=0;l--){var a=0|this.words[l],f=0|r.words[l];if(a!==f){a<f?s=-1:a>f&&(s=1);break}}return s},u.prototype.gtn=function(r){return 1===this.cmpn(r)},u.prototype.gt=function(r){return 1===this.cmp(r)},u.prototype.gten=function(r){return this.cmpn(r)>=0},u.prototype.gte=function(r){return this.cmp(r)>=0},u.prototype.ltn=function(r){return-1===this.cmpn(r)},u.prototype.lt=function(r){return-1===this.cmp(r)},u.prototype.lten=function(r){return this.cmpn(r)<=0},u.prototype.lte=function(r){return this.cmp(r)<=0},u.prototype.eqn=function(r){return 0===this.cmpn(r)},u.prototype.eq=function(r){return 0===this.cmp(r)},u.red=function(r){return new $(r)},u.prototype.toRed=function(r){return m(!this.red,"Already a number in reduction context"),m(0===this.negative,"red works only with positives"),r.convertTo(this)._forceRed(r)},u.prototype.fromRed=function(){return m(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},u.prototype._forceRed=function(r){return this.red=r,this},u.prototype.forceRed=function(r){return m(!this.red,"Already a number in reduction context"),this._forceRed(r)},u.prototype.redAdd=function(r){return m(this.red,"redAdd works only with red numbers"),this.red.add(this,r)},u.prototype.redIAdd=function(r){return m(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,r)},u.prototype.redSub=function(r){return m(this.red,"redSub works only with red numbers"),this.red.sub(this,r)},u.prototype.redISub=function(r){return m(this.red,"redISub works only with red numbers"),this.red.isub(this,r)},u.prototype.redShl=function(r){return m(this.red,"redShl works only with red numbers"),this.red.shl(this,r)},u.prototype.redMul=function(r){return m(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.mul(this,r)},u.prototype.redIMul=function(r){return m(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.imul(this,r)},u.prototype.redSqr=function(){return m(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},u.prototype.redISqr=function(){return m(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},u.prototype.redSqrt=function(){return m(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},u.prototype.redInvm=function(){return m(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},u.prototype.redNeg=function(){return m(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},u.prototype.redPow=function(r){return m(this.red&&!r.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,r)};var V={k256:null,p224:null,p192:null,p25519:null};function U(R,r){this.name=R,this.p=new u(r,16),this.n=this.p.bitLength(),this.k=new u(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function B(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function H(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function W(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function te(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function $(R){if("string"==typeof R){var r=u._prime(R);this.m=r.p,this.prime=r}else m(R.gtn(1),"modulus must be greater than 1"),this.m=R,this.prime=null}function pe(R){$.call(this,R),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new u(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}U.prototype._tmp=function(){var r=new u(null);return r.words=new Array(Math.ceil(this.n/13)),r},U.prototype.ireduce=function(r){var l,s=r;do{this.split(s,this.tmp),l=(s=(s=this.imulK(s)).iadd(this.tmp)).bitLength()}while(l>this.n);var a=l<this.n?-1:s.ucmp(this.p);return 0===a?(s.words[0]=0,s.length=1):a>0?s.isub(this.p):void 0!==s.strip?s.strip():s._strip(),s},U.prototype.split=function(r,s){r.iushrn(this.n,0,s)},U.prototype.imulK=function(r){return r.imul(this.k)},x(B,U),B.prototype.split=function(r,s){for(var l=4194303,a=Math.min(r.length,9),f=0;f<a;f++)s.words[f]=r.words[f];if(s.length=a,r.length<=9)return r.words[0]=0,void(r.length=1);var _=r.words[9];for(s.words[s.length++]=_&l,f=10;f<r.length;f++){var D=0|r.words[f];r.words[f-10]=(D&l)<<4|_>>>22,_=D}r.words[f-10]=_>>>=22,r.length-=0===_&&r.length>10?10:9},B.prototype.imulK=function(r){r.words[r.length]=0,r.words[r.length+1]=0,r.length+=2;for(var s=0,l=0;l<r.length;l++){var a=0|r.words[l];r.words[l]=67108863&(s+=977*a),s=64*a+(s/67108864|0)}return 0===r.words[r.length-1]&&(r.length--,0===r.words[r.length-1]&&r.length--),r},x(H,U),x(W,U),x(te,U),te.prototype.imulK=function(r){for(var s=0,l=0;l<r.length;l++){var a=19*(0|r.words[l])+s,f=67108863&a;a>>>=26,r.words[l]=f,s=a}return 0!==s&&(r.words[r.length++]=s),r},u._prime=function(r){if(V[r])return V[r];var s;if("k256"===r)s=new B;else if("p224"===r)s=new H;else if("p192"===r)s=new W;else{if("p25519"!==r)throw new Error("Unknown prime "+r);s=new te}return V[r]=s,s},$.prototype._verify1=function(r){m(0===r.negative,"red works only with positives"),m(r.red,"red works only with red numbers")},$.prototype._verify2=function(r,s){m(0==(r.negative|s.negative),"red works only with positives"),m(r.red&&r.red===s.red,"red works only with red numbers")},$.prototype.imod=function(r){return this.prime?this.prime.ireduce(r)._forceRed(this):r.umod(this.m)._forceRed(this)},$.prototype.neg=function(r){return r.isZero()?r.clone():this.m.sub(r)._forceRed(this)},$.prototype.add=function(r,s){this._verify2(r,s);var l=r.add(s);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},$.prototype.iadd=function(r,s){this._verify2(r,s);var l=r.iadd(s);return l.cmp(this.m)>=0&&l.isub(this.m),l},$.prototype.sub=function(r,s){this._verify2(r,s);var l=r.sub(s);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},$.prototype.isub=function(r,s){this._verify2(r,s);var l=r.isub(s);return l.cmpn(0)<0&&l.iadd(this.m),l},$.prototype.shl=function(r,s){return this._verify1(r),this.imod(r.ushln(s))},$.prototype.imul=function(r,s){return this._verify2(r,s),this.imod(r.imul(s))},$.prototype.mul=function(r,s){return this._verify2(r,s),this.imod(r.mul(s))},$.prototype.isqr=function(r){return this.imul(r,r.clone())},$.prototype.sqr=function(r){return this.mul(r,r)},$.prototype.sqrt=function(r){if(r.isZero())return r.clone();var s=this.m.andln(3);if(m(s%2==1),3===s){var l=this.m.add(new u(1)).iushrn(2);return this.pow(r,l)}for(var a=this.m.subn(1),f=0;!a.isZero()&&0===a.andln(1);)f++,a.iushrn(1);m(!a.isZero());var _=new u(1).toRed(this),D=_.redNeg(),d=this.m.subn(1).iushrn(1),i=this.m.bitLength();for(i=new u(2*i*i).toRed(this);0!==this.pow(i,d).cmp(D);)i.redIAdd(D);for(var b=this.pow(i,a),z=this.pow(r,a.addn(1).iushrn(1)),q=this.pow(r,a),J=f;0!==q.cmp(_);){for(var ge=q,me=0;0!==ge.cmp(_);me++)ge=ge.redSqr();m(me<J);var le=this.pow(b,new u(1).iushln(J-me-1));z=z.redMul(le),b=le.redSqr(),q=q.redMul(b),J=me}return z},$.prototype.invm=function(r){var s=r._invmp(this.m);return 0!==s.negative?(s.negative=0,this.imod(s).redNeg()):this.imod(s)},$.prototype.pow=function(r,s){if(s.isZero())return new u(1).toRed(this);if(0===s.cmpn(1))return r.clone();var a=new Array(16);a[0]=new u(1).toRed(this),a[1]=r;for(var f=2;f<a.length;f++)a[f]=this.mul(a[f-1],r);var _=a[0],D=0,d=0,i=s.bitLength()%26;for(0===i&&(i=26),f=s.length-1;f>=0;f--){for(var b=s.words[f],z=i-1;z>=0;z--){var q=b>>z&1;_!==a[0]&&(_=this.sqr(_)),0!==q||0!==D?(D<<=1,D|=q,(4==++d||0===f&&0===z)&&(_=this.mul(_,a[D]),d=0,D=0)):d=0}i=26}return _},$.prototype.convertTo=function(r){var s=r.umod(this.m);return s===r?s.clone():s},$.prototype.convertFrom=function(r){var s=r.clone();return s.red=null,s},u.mont=function(r){return new pe(r)},x(pe,$),pe.prototype.convertTo=function(r){return this.imod(r.ushln(this.shift))},pe.prototype.convertFrom=function(r){var s=this.imod(r.mul(this.rinv));return s.red=null,s},pe.prototype.imul=function(r,s){if(r.isZero()||s.isZero())return r.words[0]=0,r.length=1,r;var l=r.imul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),_=f;return f.cmp(this.m)>=0?_=f.isub(this.m):f.cmpn(0)<0&&(_=f.iadd(this.m)),_._forceRed(this)},pe.prototype.mul=function(r,s){if(r.isZero()||s.isZero())return new u(0)._forceRed(this);var l=r.mul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),_=f;return f.cmp(this.m)>=0?_=f.isub(this.m):f.cmpn(0)<0&&(_=f.iadd(this.m)),_._forceRed(this)},pe.prototype.invm=function(r){return this.imod(r._invmp(this.m).mul(this.r2))._forceRed(this)}}(Y=T.nmd(Y),this)},8686:(Y,L,T)=>{Y.exports=T(5454)},4054:(Y,L,T)=>{"use strict";var p=T(9471),N=T(5650),m=T(300),x=T(7790),u=T(4634),g=T(1929),M=T(2984),A=T(5886);Y.exports=function(y){return new Promise(function(C,v){var w=y.data,S=y.headers,P=y.responseType;p.isFormData(w)&&delete S["Content-Type"];var k=new XMLHttpRequest;if(y.auth){var O=y.auth.username||"",V=y.auth.password?unescape(encodeURIComponent(y.auth.password)):"";S.Authorization="Basic "+btoa(O+":"+V)}var U=u(y.baseURL,y.url);function B(){if(k){var W="getAllResponseHeaders"in k?g(k.getAllResponseHeaders()):null;N(C,v,{data:P&&"text"!==P&&"json"!==P?k.response:k.responseText,status:k.status,statusText:k.statusText,headers:W,config:y,request:k}),k=null}}if(k.open(y.method.toUpperCase(),x(U,y.params,y.paramsSerializer),!0),k.timeout=y.timeout,"onloadend"in k?k.onloadend=B:k.onreadystatechange=function(){!k||4!==k.readyState||0===k.status&&(!k.responseURL||0!==k.responseURL.indexOf("file:"))||setTimeout(B)},k.onabort=function(){!k||(v(A("Request aborted",y,"ECONNABORTED",k)),k=null)},k.onerror=function(){v(A("Network Error",y,null,k)),k=null},k.ontimeout=function(){var te="timeout of "+y.timeout+"ms exceeded";y.timeoutErrorMessage&&(te=y.timeoutErrorMessage),v(A(te,y,y.transitional&&y.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",k)),k=null},p.isStandardBrowserEnv()){var H=(y.withCredentials||M(U))&&y.xsrfCookieName?m.read(y.xsrfCookieName):void 0;H&&(S[y.xsrfHeaderName]=H)}"setRequestHeader"in k&&p.forEach(S,function(te,$){void 0===w&&"content-type"===$.toLowerCase()?delete S[$]:k.setRequestHeader($,te)}),p.isUndefined(y.withCredentials)||(k.withCredentials=!!y.withCredentials),P&&"json"!==P&&(k.responseType=y.responseType),"function"==typeof y.onDownloadProgress&&k.addEventListener("progress",y.onDownloadProgress),"function"==typeof y.onUploadProgress&&k.upload&&k.upload.addEventListener("progress",y.onUploadProgress),y.cancelToken&&y.cancelToken.promise.then(function(te){!k||(k.abort(),v(te),k=null)}),w||(w=null),k.send(w)})}},5454:(Y,L,T)=>{"use strict";var p=T(9471),N=T(1533),m=T(3227),x=T(4018);function g(A){var I=new m(A),y=N(m.prototype.request,I);return p.extend(y,m.prototype,I),p.extend(y,I),y}var M=g(T(2567));M.Axios=m,M.create=function(I){return g(x(M.defaults,I))},M.Cancel=T(8728),M.CancelToken=T(701),M.isCancel=T(2130),M.all=function(I){return Promise.all(I)},M.spread=T(8908),M.isAxiosError=T(9541),Y.exports=M,Y.exports.default=M},8728:Y=>{"use strict";function L(T){this.message=T}L.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},L.prototype.__CANCEL__=!0,Y.exports=L},701:(Y,L,T)=>{"use strict";var p=T(8728);function N(m){if("function"!=typeof m)throw new TypeError("executor must be a function.");var x;this.promise=new Promise(function(M){x=M});var u=this;m(function(M){u.reason||(u.reason=new p(M),x(u.reason))})}N.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},N.source=function(){var x;return{token:new N(function(M){x=M}),cancel:x}},Y.exports=N},2130:Y=>{"use strict";Y.exports=function(T){return!(!T||!T.__CANCEL__)}},3227:(Y,L,T)=>{"use strict";var p=T(9471),N=T(7790),m=T(3976),x=T(6764),u=T(4018),g=T(3558),M=g.validators;function A(I){this.defaults=I,this.interceptors={request:new m,response:new m}}A.prototype.request=function(y){"string"==typeof y?(y=arguments[1]||{}).url=arguments[0]:y=y||{},(y=u(this.defaults,y)).method=y.method?y.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var h=y.transitional;void 0!==h&&g.assertOptions(h,{silentJSONParsing:M.transitional(M.boolean,"1.0.0"),forcedJSONParsing:M.transitional(M.boolean,"1.0.0"),clarifyTimeoutError:M.transitional(M.boolean,"1.0.0")},!1);var C=[],v=!0;this.interceptors.request.forEach(function(B){"function"==typeof B.runWhen&&!1===B.runWhen(y)||(v=v&&B.synchronous,C.unshift(B.fulfilled,B.rejected))});var S,w=[];if(this.interceptors.response.forEach(function(B){w.push(B.fulfilled,B.rejected)}),!v){var P=[x,void 0];for(Array.prototype.unshift.apply(P,C),P=P.concat(w),S=Promise.resolve(y);P.length;)S=S.then(P.shift(),P.shift());return S}for(var k=y;C.length;){var O=C.shift(),V=C.shift();try{k=O(k)}catch(U){V(U);break}}try{S=x(k)}catch(U){return Promise.reject(U)}for(;w.length;)S=S.then(w.shift(),w.shift());return S},A.prototype.getUri=function(y){return y=u(this.defaults,y),N(y.url,y.params,y.paramsSerializer).replace(/^\?/,"")},p.forEach(["delete","get","head","options"],function(y){A.prototype[y]=function(h,C){return this.request(u(C||{},{method:y,url:h,data:(C||{}).data}))}}),p.forEach(["post","put","patch"],function(y){A.prototype[y]=function(h,C,v){return this.request(u(v||{},{method:y,url:h,data:C}))}}),Y.exports=A},3976:(Y,L,T)=>{"use strict";var p=T(9471);function N(){this.handlers=[]}N.prototype.use=function(x,u,g){return this.handlers.push({fulfilled:x,rejected:u,synchronous:!!g&&g.synchronous,runWhen:g?g.runWhen:null}),this.handlers.length-1},N.prototype.eject=function(x){this.handlers[x]&&(this.handlers[x]=null)},N.prototype.forEach=function(x){p.forEach(this.handlers,function(g){null!==g&&x(g)})},Y.exports=N},4634:(Y,L,T)=>{"use strict";var p=T(5164),N=T(1540);Y.exports=function(x,u){return x&&!p(u)?N(x,u):u}},5886:(Y,L,T)=>{"use strict";var p=T(9570);Y.exports=function(m,x,u,g,M){var A=new Error(m);return p(A,x,u,g,M)}},6764:(Y,L,T)=>{"use strict";var p=T(9471),N=T(4284),m=T(2130),x=T(2567);function u(g){g.cancelToken&&g.cancelToken.throwIfRequested()}Y.exports=function(M){return u(M),M.headers=M.headers||{},M.data=N.call(M,M.data,M.headers,M.transformRequest),M.headers=p.merge(M.headers.common||{},M.headers[M.method]||{},M.headers),p.forEach(["delete","get","head","post","put","patch","common"],function(y){delete M.headers[y]}),(M.adapter||x.adapter)(M).then(function(y){return u(M),y.data=N.call(M,y.data,y.headers,M.transformResponse),y},function(y){return m(y)||(u(M),y&&y.response&&(y.response.data=N.call(M,y.response.data,y.response.headers,M.transformResponse))),Promise.reject(y)})}},9570:Y=>{"use strict";Y.exports=function(T,p,N,m,x){return T.config=p,N&&(T.code=N),T.request=m,T.response=x,T.isAxiosError=!0,T.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},T}},4018:(Y,L,T)=>{"use strict";var p=T(9471);Y.exports=function(m,x){x=x||{};var u={},g=["url","method","data"],M=["headers","auth","proxy","params"],A=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],I=["validateStatus"];function y(w,S){return p.isPlainObject(w)&&p.isPlainObject(S)?p.merge(w,S):p.isPlainObject(S)?p.merge({},S):p.isArray(S)?S.slice():S}function h(w){p.isUndefined(x[w])?p.isUndefined(m[w])||(u[w]=y(void 0,m[w])):u[w]=y(m[w],x[w])}p.forEach(g,function(S){p.isUndefined(x[S])||(u[S]=y(void 0,x[S]))}),p.forEach(M,h),p.forEach(A,function(S){p.isUndefined(x[S])?p.isUndefined(m[S])||(u[S]=y(void 0,m[S])):u[S]=y(void 0,x[S])}),p.forEach(I,function(S){S in x?u[S]=y(m[S],x[S]):S in m&&(u[S]=y(void 0,m[S]))});var C=g.concat(M).concat(A).concat(I),v=Object.keys(m).concat(Object.keys(x)).filter(function(S){return-1===C.indexOf(S)});return p.forEach(v,h),u}},5650:(Y,L,T)=>{"use strict";var p=T(5886);Y.exports=function(m,x,u){var g=u.config.validateStatus;u.status&&g&&!g(u.status)?x(p("Request failed with status code "+u.status,u.config,null,u.request,u)):m(u)}},4284:(Y,L,T)=>{"use strict";var p=T(9471),N=T(2567);Y.exports=function(x,u,g){var M=this||N;return p.forEach(g,function(I){x=I.call(M,x,u)}),x}},2567:(Y,L,T)=>{"use strict";var p=T(9471),N=T(2196),m=T(9570),x={"Content-Type":"application/x-www-form-urlencoded"};function u(I,y){!p.isUndefined(I)&&p.isUndefined(I["Content-Type"])&&(I["Content-Type"]=y)}var I,A={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(I=T(4054)),I),transformRequest:[function(y,h){return N(h,"Accept"),N(h,"Content-Type"),p.isFormData(y)||p.isArrayBuffer(y)||p.isBuffer(y)||p.isStream(y)||p.isFile(y)||p.isBlob(y)?y:p.isArrayBufferView(y)?y.buffer:p.isURLSearchParams(y)?(u(h,"application/x-www-form-urlencoded;charset=utf-8"),y.toString()):p.isObject(y)||h&&"application/json"===h["Content-Type"]?(u(h,"application/json"),function(I,y,h){if(p.isString(I))try{return(0,JSON.parse)(I),p.trim(I)}catch(C){if("SyntaxError"!==C.name)throw C}return(0,JSON.stringify)(I)}(y)):y}],transformResponse:[function(y){var h=this.transitional,w=!(h&&h.silentJSONParsing)&&"json"===this.responseType;if(w||h&&h.forcedJSONParsing&&p.isString(y)&&y.length)try{return JSON.parse(y)}catch(S){if(w)throw"SyntaxError"===S.name?m(S,this,"E_JSON_PARSE"):S}return y}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(y){return y>=200&&y<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};p.forEach(["delete","get","head"],function(y){A.headers[y]={}}),p.forEach(["post","put","patch"],function(y){A.headers[y]=p.merge(x)}),Y.exports=A},1533:Y=>{"use strict";Y.exports=function(T,p){return function(){for(var m=new Array(arguments.length),x=0;x<m.length;x++)m[x]=arguments[x];return T.apply(p,m)}}},7790:(Y,L,T)=>{"use strict";var p=T(9471);function N(m){return encodeURIComponent(m).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}Y.exports=function(x,u,g){if(!u)return x;var M;if(g)M=g(u);else if(p.isURLSearchParams(u))M=u.toString();else{var A=[];p.forEach(u,function(h,C){null==h||(p.isArray(h)?C+="[]":h=[h],p.forEach(h,function(w){p.isDate(w)?w=w.toISOString():p.isObject(w)&&(w=JSON.stringify(w)),A.push(N(C)+"="+N(w))}))}),M=A.join("&")}if(M){var I=x.indexOf("#");-1!==I&&(x=x.slice(0,I)),x+=(-1===x.indexOf("?")?"?":"&")+M}return x}},1540:Y=>{"use strict";Y.exports=function(T,p){return p?T.replace(/\/+$/,"")+"/"+p.replace(/^\/+/,""):T}},300:(Y,L,T)=>{"use strict";var p=T(9471);Y.exports=p.isStandardBrowserEnv()?{write:function(x,u,g,M,A,I){var y=[];y.push(x+"="+encodeURIComponent(u)),p.isNumber(g)&&y.push("expires="+new Date(g).toGMTString()),p.isString(M)&&y.push("path="+M),p.isString(A)&&y.push("domain="+A),!0===I&&y.push("secure"),document.cookie=y.join("; ")},read:function(x){var u=document.cookie.match(new RegExp("(^|;\\s*)("+x+")=([^;]*)"));return u?decodeURIComponent(u[3]):null},remove:function(x){this.write(x,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},5164:Y=>{"use strict";Y.exports=function(T){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(T)}},9541:Y=>{"use strict";Y.exports=function(T){return"object"==typeof T&&!0===T.isAxiosError}},2984:(Y,L,T)=>{"use strict";var p=T(9471);Y.exports=p.isStandardBrowserEnv()?function(){var u,m=/(msie|trident)/i.test(navigator.userAgent),x=document.createElement("a");function g(M){var A=M;return m&&(x.setAttribute("href",A),A=x.href),x.setAttribute("href",A),{href:x.href,protocol:x.protocol?x.protocol.replace(/:$/,""):"",host:x.host,search:x.search?x.search.replace(/^\?/,""):"",hash:x.hash?x.hash.replace(/^#/,""):"",hostname:x.hostname,port:x.port,pathname:"/"===x.pathname.charAt(0)?x.pathname:"/"+x.pathname}}return u=g(window.location.href),function(A){var I=p.isString(A)?g(A):A;return I.protocol===u.protocol&&I.host===u.host}}():function(){return!0}},2196:(Y,L,T)=>{"use strict";var p=T(9471);Y.exports=function(m,x){p.forEach(m,function(g,M){M!==x&&M.toUpperCase()===x.toUpperCase()&&(m[x]=g,delete m[M])})}},1929:(Y,L,T)=>{"use strict";var p=T(9471),N=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];Y.exports=function(x){var g,M,A,u={};return x&&p.forEach(x.split("\n"),function(y){if(A=y.indexOf(":"),g=p.trim(y.substr(0,A)).toLowerCase(),M=p.trim(y.substr(A+1)),g){if(u[g]&&N.indexOf(g)>=0)return;u[g]="set-cookie"===g?(u[g]?u[g]:[]).concat([M]):u[g]?u[g]+", "+M:M}}),u}},8908:Y=>{"use strict";Y.exports=function(T){return function(N){return T.apply(null,N)}}},3558:(Y,L,T)=>{"use strict";var p=T(8593),N={};["object","boolean","number","function","string","symbol"].forEach(function(M,A){N[M]=function(y){return typeof y===M||"a"+(A<1?"n ":" ")+M}});var m={},x=p.version.split(".");function u(M,A){for(var I=A?A.split("."):x,y=M.split("."),h=0;h<3;h++){if(I[h]>y[h])return!0;if(I[h]<y[h])return!1}return!1}N.transitional=function(A,I,y){var h=I&&u(I);function C(v,w){return"[Axios v"+p.version+"] Transitional option '"+v+"'"+w+(y?". "+y:"")}return function(v,w,S){if(!1===A)throw new Error(C(w," has been removed in "+I));return h&&!m[w]&&(m[w]=!0,console.warn(C(w," has been deprecated since v"+I+" and will be removed in the near future"))),!A||A(v,w,S)}},Y.exports={isOlderVersion:u,assertOptions:function(M,A,I){if("object"!=typeof M)throw new TypeError("options must be an object");for(var y=Object.keys(M),h=y.length;h-- >0;){var C=y[h],v=A[C];if(v){var w=M[C],S=void 0===w||v(w,C,M);if(!0!==S)throw new TypeError("option "+C+" must be "+S)}else if(!0!==I)throw Error("Unknown option "+C)}},validators:N}},9471:(Y,L,T)=>{"use strict";var p=T(1533),N=Object.prototype.toString;function m($){return"[object Array]"===N.call($)}function x($){return void 0===$}function h($){return null!==$&&"object"==typeof $}function C($){if("[object Object]"!==N.call($))return!1;var pe=Object.getPrototypeOf($);return null===pe||pe===Object.prototype}function P($){return"[object Function]"===N.call($)}function B($,pe){if(null!=$)if("object"!=typeof $&&($=[$]),m($))for(var R=0,r=$.length;R<r;R++)pe.call(null,$[R],R,$);else for(var s in $)Object.prototype.hasOwnProperty.call($,s)&&pe.call(null,$[s],s,$)}Y.exports={isArray:m,isArrayBuffer:function($){return"[object ArrayBuffer]"===N.call($)},isBuffer:function($){return null!==$&&!x($)&&null!==$.constructor&&!x($.constructor)&&"function"==typeof $.constructor.isBuffer&&$.constructor.isBuffer($)},isFormData:function($){return"undefined"!=typeof FormData&&$ instanceof FormData},isArrayBufferView:function($){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView($):$&&$.buffer&&$.buffer instanceof ArrayBuffer},isString:function($){return"string"==typeof $},isNumber:function($){return"number"==typeof $},isObject:h,isPlainObject:C,isUndefined:x,isDate:function($){return"[object Date]"===N.call($)},isFile:function($){return"[object File]"===N.call($)},isBlob:function($){return"[object Blob]"===N.call($)},isFunction:P,isStream:function($){return h($)&&P($.pipe)},isURLSearchParams:function($){return"undefined"!=typeof URLSearchParams&&$ instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:B,merge:function H(){var $={};function pe(s,l){$[l]=C($[l])&&C(s)?H($[l],s):C(s)?H({},s):m(s)?s.slice():s}for(var R=0,r=arguments.length;R<r;R++)B(arguments[R],pe);return $},extend:function($,pe,R){return B(pe,function(s,l){$[l]=R&&"function"==typeof s?p(s,R):s}),$},trim:function($){return $.trim?$.trim():$.replace(/^\s+|\s+$/g,"")},stripBOM:function($){return 65279===$.charCodeAt(0)&&($=$.slice(1)),$}}},6434:(Y,L)=>{"use strict";L.byteLength=function(v){var w=g(v),P=w[1];return 3*(w[0]+P)/4-P},L.toByteArray=function(v){var w,B,S=g(v),P=S[0],k=S[1],O=new N(function(v,w,S){return 3*(w+S)/4-S}(0,P,k)),V=0,U=k>0?P-4:P;for(B=0;B<U;B+=4)w=p[v.charCodeAt(B)]<<18|p[v.charCodeAt(B+1)]<<12|p[v.charCodeAt(B+2)]<<6|p[v.charCodeAt(B+3)],O[V++]=w>>16&255,O[V++]=w>>8&255,O[V++]=255&w;return 2===k&&(w=p[v.charCodeAt(B)]<<2|p[v.charCodeAt(B+1)]>>4,O[V++]=255&w),1===k&&(w=p[v.charCodeAt(B)]<<10|p[v.charCodeAt(B+1)]<<4|p[v.charCodeAt(B+2)]>>2,O[V++]=w>>8&255,O[V++]=255&w),O},L.fromByteArray=function(v){for(var w,S=v.length,P=S%3,k=[],O=16383,V=0,U=S-P;V<U;V+=O)k.push(h(v,V,V+O>U?U:V+O));return 1===P?k.push(T[(w=v[S-1])>>2]+T[w<<4&63]+"=="):2===P&&k.push(T[(w=(v[S-2]<<8)+v[S-1])>>10]+T[w>>4&63]+T[w<<2&63]+"="),k.join("")};for(var T=[],p=[],N="undefined"!=typeof Uint8Array?Uint8Array:Array,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",x=0,u=m.length;x<u;++x)T[x]=m[x],p[m.charCodeAt(x)]=x;function g(v){var w=v.length;if(w%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var S=v.indexOf("=");return-1===S&&(S=w),[S,S===w?0:4-S%4]}function y(v){return T[v>>18&63]+T[v>>12&63]+T[v>>6&63]+T[63&v]}function h(v,w,S){for(var k=[],O=w;O<S;O+=3)k.push(y((v[O]<<16&16711680)+(v[O+1]<<8&65280)+(255&v[O+2])));return k.join("")}p["-".charCodeAt(0)]=62,p["_".charCodeAt(0)]=63},2630:function(Y,L,T){!function(p,N){"use strict";function m(l,a){if(!l)throw new Error(a||"Assertion failed")}function x(l,a){l.super_=a;var f=function(){};f.prototype=a.prototype,l.prototype=new f,l.prototype.constructor=l}function u(l,a,f){if(u.isBN(l))return l;this.negative=0,this.words=null,this.length=0,this.red=null,null!==l&&(("le"===a||"be"===a)&&(f=a,a=10),this._init(l||0,a||10,f||"be"))}var g;"object"==typeof p?p.exports=u:N.BN=u,u.BN=u,u.wordSize=26;try{g="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:T(6601).Buffer}catch(l){}function M(l,a){var f=l.charCodeAt(a);return f>=48&&f<=57?f-48:f>=65&&f<=70?f-55:f>=97&&f<=102?f-87:void m(!1,"Invalid character in "+l)}function A(l,a,f){var _=M(l,f);return f-1>=a&&(_|=M(l,f-1)<<4),_}function I(l,a,f,_){for(var D=0,d=0,i=Math.min(l.length,f),b=a;b<i;b++){var z=l.charCodeAt(b)-48;D*=_,d=z>=49?z-49+10:z>=17?z-17+10:z,m(z>=0&&d<_,"Invalid character"),D+=d}return D}function y(l,a){l.words=a.words,l.length=a.length,l.negative=a.negative,l.red=a.red}if(u.isBN=function(a){return a instanceof u||null!==a&&"object"==typeof a&&a.constructor.wordSize===u.wordSize&&Array.isArray(a.words)},u.max=function(a,f){return a.cmp(f)>0?a:f},u.min=function(a,f){return a.cmp(f)<0?a:f},u.prototype._init=function(a,f,_){if("number"==typeof a)return this._initNumber(a,f,_);if("object"==typeof a)return this._initArray(a,f,_);"hex"===f&&(f=16),m(f===(0|f)&&f>=2&&f<=36);var D=0;"-"===(a=a.toString().replace(/\s+/g,""))[0]&&(D++,this.negative=1),D<a.length&&(16===f?this._parseHex(a,D,_):(this._parseBase(a,f,D),"le"===_&&this._initArray(this.toArray(),f,_)))},u.prototype._initNumber=function(a,f,_){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[67108863&a],this.length=1):a<4503599627370496?(this.words=[67108863&a,a/67108864&67108863],this.length=2):(m(a<9007199254740992),this.words=[67108863&a,a/67108864&67108863,1],this.length=3),"le"===_&&this._initArray(this.toArray(),f,_)},u.prototype._initArray=function(a,f,_){if(m("number"==typeof a.length),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var d,i,b=0;if("be"===_)for(D=a.length-1,d=0;D>=0;D-=3)this.words[d]|=(i=a[D]|a[D-1]<<8|a[D-2]<<16)<<b&67108863,this.words[d+1]=i>>>26-b&67108863,(b+=24)>=26&&(b-=26,d++);else if("le"===_)for(D=0,d=0;D<a.length;D+=3)this.words[d]|=(i=a[D]|a[D+1]<<8|a[D+2]<<16)<<b&67108863,this.words[d+1]=i>>>26-b&67108863,(b+=24)>=26&&(b-=26,d++);return this._strip()},u.prototype._parseHex=function(a,f,_){this.length=Math.ceil((a.length-f)/6),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var b,d=0,i=0;if("be"===_)for(D=a.length-1;D>=f;D-=2)b=A(a,f,D)<<d,this.words[i]|=67108863&b,d>=18?(d-=18,this.words[i+=1]|=b>>>26):d+=8;else for(D=(a.length-f)%2==0?f+1:f;D<a.length;D+=2)b=A(a,f,D)<<d,this.words[i]|=67108863&b,d>=18?(d-=18,this.words[i+=1]|=b>>>26):d+=8;this._strip()},u.prototype._parseBase=function(a,f,_){this.words=[0],this.length=1;for(var D=0,d=1;d<=67108863;d*=f)D++;D--,d=d/f|0;for(var i=a.length-_,b=i%D,z=Math.min(i,i-b)+_,q=0,J=_;J<z;J+=D)q=I(a,J,J+D,f),this.imuln(d),this.words[0]+q<67108864?this.words[0]+=q:this._iaddn(q);if(0!==b){var ge=1;for(q=I(a,J,a.length,f),J=0;J<b;J++)ge*=f;this.imuln(ge),this.words[0]+q<67108864?this.words[0]+=q:this._iaddn(q)}this._strip()},u.prototype.copy=function(a){a.words=new Array(this.length);for(var f=0;f<this.length;f++)a.words[f]=this.words[f];a.length=this.length,a.negative=this.negative,a.red=this.red},u.prototype._move=function(a){y(a,this)},u.prototype.clone=function(){var a=new u(null);return this.copy(a),a},u.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},u.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},u.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{u.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(l){u.prototype.inspect=h}else u.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var C=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],v=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],w=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function k(l,a,f){f.negative=a.negative^l.negative;var _=l.length+a.length|0;f.length=_,_=_-1|0;var D=0|l.words[0],d=0|a.words[0],i=D*d,z=i/67108864|0;f.words[0]=67108863&i;for(var q=1;q<_;q++){for(var J=z>>>26,ge=67108863&z,me=Math.min(q,a.length-1),le=Math.max(0,q-l.length+1);le<=me;le++)J+=(i=(D=0|l.words[q-le|0])*(d=0|a.words[le])+ge)/67108864|0,ge=67108863&i;f.words[q]=0|ge,z=0|J}return 0!==z?f.words[q]=0|z:f.length--,f._strip()}u.prototype.toString=function(a,f){var _;if(f=0|f||1,16===(a=a||10)||"hex"===a){_="";for(var D=0,d=0,i=0;i<this.length;i++){var b=this.words[i],z=(16777215&(b<<D|d)).toString(16);d=b>>>24-D&16777215,(D+=2)>=26&&(D-=26,i--),_=0!==d||i!==this.length-1?C[6-z.length]+z+_:z+_}for(0!==d&&(_=d.toString(16)+_);_.length%f!=0;)_="0"+_;return 0!==this.negative&&(_="-"+_),_}if(a===(0|a)&&a>=2&&a<=36){var q=v[a],J=w[a];_="";var ge=this.clone();for(ge.negative=0;!ge.isZero();){var me=ge.modrn(J).toString(a);_=(ge=ge.idivn(J)).isZero()?me+_:C[q-me.length]+me+_}for(this.isZero()&&(_="0"+_);_.length%f!=0;)_="0"+_;return 0!==this.negative&&(_="-"+_),_}m(!1,"Base should be between 2 and 36")},u.prototype.toNumber=function(){var a=this.words[0];return 2===this.length?a+=67108864*this.words[1]:3===this.length&&1===this.words[2]?a+=4503599627370496+67108864*this.words[1]:this.length>2&&m(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-a:a},u.prototype.toJSON=function(){return this.toString(16,2)},g&&(u.prototype.toBuffer=function(a,f){return this.toArrayLike(g,a,f)}),u.prototype.toArray=function(a,f){return this.toArrayLike(Array,a,f)},u.prototype.toArrayLike=function(a,f,_){this._strip();var D=this.byteLength(),d=_||Math.max(1,D);m(D<=d,"byte array longer than desired length"),m(d>0,"Requested array length <= 0");var i=function(a,f){return a.allocUnsafe?a.allocUnsafe(f):new a(f)}(a,d);return this["_toArrayLike"+("le"===f?"LE":"BE")](i,D),i},u.prototype._toArrayLikeLE=function(a,f){for(var _=0,D=0,d=0,i=0;d<this.length;d++){var b=this.words[d]<<i|D;a[_++]=255&b,_<a.length&&(a[_++]=b>>8&255),_<a.length&&(a[_++]=b>>16&255),6===i?(_<a.length&&(a[_++]=b>>24&255),D=0,i=0):(D=b>>>24,i+=2)}if(_<a.length)for(a[_++]=D;_<a.length;)a[_++]=0},u.prototype._toArrayLikeBE=function(a,f){for(var _=a.length-1,D=0,d=0,i=0;d<this.length;d++){var b=this.words[d]<<i|D;a[_--]=255&b,_>=0&&(a[_--]=b>>8&255),_>=0&&(a[_--]=b>>16&255),6===i?(_>=0&&(a[_--]=b>>24&255),D=0,i=0):(D=b>>>24,i+=2)}if(_>=0)for(a[_--]=D;_>=0;)a[_--]=0},u.prototype._countBits=Math.clz32?function(a){return 32-Math.clz32(a)}:function(a){var f=a,_=0;return f>=4096&&(_+=13,f>>>=13),f>=64&&(_+=7,f>>>=7),f>=8&&(_+=4,f>>>=4),f>=2&&(_+=2,f>>>=2),_+f},u.prototype._zeroBits=function(a){if(0===a)return 26;var f=a,_=0;return 0==(8191&f)&&(_+=13,f>>>=13),0==(127&f)&&(_+=7,f>>>=7),0==(15&f)&&(_+=4,f>>>=4),0==(3&f)&&(_+=2,f>>>=2),0==(1&f)&&_++,_},u.prototype.bitLength=function(){var f=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+f},u.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,f=0;f<this.length;f++){var _=this._zeroBits(this.words[f]);if(a+=_,26!==_)break}return a},u.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},u.prototype.toTwos=function(a){return 0!==this.negative?this.abs().inotn(a).iaddn(1):this.clone()},u.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},u.prototype.isNeg=function(){return 0!==this.negative},u.prototype.neg=function(){return this.clone().ineg()},u.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},u.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var f=0;f<a.length;f++)this.words[f]=this.words[f]|a.words[f];return this._strip()},u.prototype.ior=function(a){return m(0==(this.negative|a.negative)),this.iuor(a)},u.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},u.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},u.prototype.iuand=function(a){var f;f=this.length>a.length?a:this;for(var _=0;_<f.length;_++)this.words[_]=this.words[_]&a.words[_];return this.length=f.length,this._strip()},u.prototype.iand=function(a){return m(0==(this.negative|a.negative)),this.iuand(a)},u.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},u.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},u.prototype.iuxor=function(a){var f,_;this.length>a.length?(f=this,_=a):(f=a,_=this);for(var D=0;D<_.length;D++)this.words[D]=f.words[D]^_.words[D];if(this!==f)for(;D<f.length;D++)this.words[D]=f.words[D];return this.length=f.length,this._strip()},u.prototype.ixor=function(a){return m(0==(this.negative|a.negative)),this.iuxor(a)},u.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},u.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},u.prototype.inotn=function(a){m("number"==typeof a&&a>=0);var f=0|Math.ceil(a/26),_=a%26;this._expand(f),_>0&&f--;for(var D=0;D<f;D++)this.words[D]=67108863&~this.words[D];return _>0&&(this.words[D]=~this.words[D]&67108863>>26-_),this._strip()},u.prototype.notn=function(a){return this.clone().inotn(a)},u.prototype.setn=function(a,f){m("number"==typeof a&&a>=0);var _=a/26|0,D=a%26;return this._expand(_+1),this.words[_]=f?this.words[_]|1<<D:this.words[_]&~(1<<D),this._strip()},u.prototype.iadd=function(a){var f,_,D;if(0!==this.negative&&0===a.negative)return this.negative=0,f=this.isub(a),this.negative^=1,this._normSign();if(0===this.negative&&0!==a.negative)return a.negative=0,f=this.isub(a),a.negative=1,f._normSign();this.length>a.length?(_=this,D=a):(_=a,D=this);for(var d=0,i=0;i<D.length;i++)this.words[i]=67108863&(f=(0|_.words[i])+(0|D.words[i])+d),d=f>>>26;for(;0!==d&&i<_.length;i++)this.words[i]=67108863&(f=(0|_.words[i])+d),d=f>>>26;if(this.length=_.length,0!==d)this.words[this.length]=d,this.length++;else if(_!==this)for(;i<_.length;i++)this.words[i]=_.words[i];return this},u.prototype.add=function(a){var f;return 0!==a.negative&&0===this.negative?(a.negative=0,f=this.sub(a),a.negative^=1,f):0===a.negative&&0!==this.negative?(this.negative=0,f=a.sub(this),this.negative=1,f):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},u.prototype.isub=function(a){if(0!==a.negative){a.negative=0;var f=this.iadd(a);return a.negative=1,f._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var D,d,_=this.cmp(a);if(0===_)return this.negative=0,this.length=1,this.words[0]=0,this;_>0?(D=this,d=a):(D=a,d=this);for(var i=0,b=0;b<d.length;b++)i=(f=(0|D.words[b])-(0|d.words[b])+i)>>26,this.words[b]=67108863&f;for(;0!==i&&b<D.length;b++)i=(f=(0|D.words[b])+i)>>26,this.words[b]=67108863&f;if(0===i&&b<D.length&&D!==this)for(;b<D.length;b++)this.words[b]=D.words[b];return this.length=Math.max(this.length,b),D!==this&&(this.negative=1),this._strip()},u.prototype.sub=function(a){return this.clone().isub(a)};var O=function(a,f,_){var z,q,J,D=a.words,d=f.words,i=_.words,b=0,ge=0|D[0],me=8191&ge,le=ge>>>13,fe=0|D[1],ae=8191&fe,de=fe>>>13,xe=0|D[2],Ce=8191&xe,oe=xe>>>13,we=0|D[3],ye=8191&we,re=we>>>13,ee=0|D[4],Z=8191&ee,ue=ee>>>13,Re=0|D[5],Te=8191&Re,Ee=Re>>>13,$e=0|D[6],Ne=8191&$e,_e=$e>>>13,Be=0|D[7],Ae=8191&Be,Le=Be>>>13,Ct=0|D[8],He=8191&Ct,We=Ct>>>13,Vt=0|D[9],qe=8191&Vt,ct=Vt>>>13,Mt=0|d[0],it=8191&Mt,at=Mt>>>13,Dn=0|d[1],ot=8191&Dn,Je=Dn>>>13,En=0|d[2],Ge=8191&En,dt=En>>>13,Pn=0|d[3],ut=8191&Pn,Ve=Pn>>>13,On=0|d[4],Ke=8191&On,st=On>>>13,qn=0|d[5],ft=8191&qn,ze=qn>>>13,sn=0|d[6],ht=8191&sn,tt=sn>>>13,Qt=0|d[7],et=8191&Qt,Xe=Qt>>>13,kn=0|d[8],Ye=8191&kn,lt=kn>>>13,un=0|d[9],Ht=8191&un,jt=un>>>13;_.negative=a.negative^f.negative,_.length=19;var bn=(b+(z=Math.imul(me,it))|0)+((8191&(q=(q=Math.imul(me,at))+Math.imul(le,it)|0))<<13)|0;b=((J=Math.imul(le,at))+(q>>>13)|0)+(bn>>>26)|0,bn&=67108863,z=Math.imul(ae,it),q=(q=Math.imul(ae,at))+Math.imul(de,it)|0,J=Math.imul(de,at);var dn=(b+(z=z+Math.imul(me,ot)|0)|0)+((8191&(q=(q=q+Math.imul(me,Je)|0)+Math.imul(le,ot)|0))<<13)|0;b=((J=J+Math.imul(le,Je)|0)+(q>>>13)|0)+(dn>>>26)|0,dn&=67108863,z=Math.imul(Ce,it),q=(q=Math.imul(Ce,at))+Math.imul(oe,it)|0,J=Math.imul(oe,at),z=z+Math.imul(ae,ot)|0,q=(q=q+Math.imul(ae,Je)|0)+Math.imul(de,ot)|0,J=J+Math.imul(de,Je)|0;var pn=(b+(z=z+Math.imul(me,Ge)|0)|0)+((8191&(q=(q=q+Math.imul(me,dt)|0)+Math.imul(le,Ge)|0))<<13)|0;b=((J=J+Math.imul(le,dt)|0)+(q>>>13)|0)+(pn>>>26)|0,pn&=67108863,z=Math.imul(ye,it),q=(q=Math.imul(ye,at))+Math.imul(re,it)|0,J=Math.imul(re,at),z=z+Math.imul(Ce,ot)|0,q=(q=q+Math.imul(Ce,Je)|0)+Math.imul(oe,ot)|0,J=J+Math.imul(oe,Je)|0,z=z+Math.imul(ae,Ge)|0,q=(q=q+Math.imul(ae,dt)|0)+Math.imul(de,Ge)|0,J=J+Math.imul(de,dt)|0;var In=(b+(z=z+Math.imul(me,ut)|0)|0)+((8191&(q=(q=q+Math.imul(me,Ve)|0)+Math.imul(le,ut)|0))<<13)|0;b=((J=J+Math.imul(le,Ve)|0)+(q>>>13)|0)+(In>>>26)|0,In&=67108863,z=Math.imul(Z,it),q=(q=Math.imul(Z,at))+Math.imul(ue,it)|0,J=Math.imul(ue,at),z=z+Math.imul(ye,ot)|0,q=(q=q+Math.imul(ye,Je)|0)+Math.imul(re,ot)|0,J=J+Math.imul(re,Je)|0,z=z+Math.imul(Ce,Ge)|0,q=(q=q+Math.imul(Ce,dt)|0)+Math.imul(oe,Ge)|0,J=J+Math.imul(oe,dt)|0,z=z+Math.imul(ae,ut)|0,q=(q=q+Math.imul(ae,Ve)|0)+Math.imul(de,ut)|0,J=J+Math.imul(de,Ve)|0;var rn=(b+(z=z+Math.imul(me,Ke)|0)|0)+((8191&(q=(q=q+Math.imul(me,st)|0)+Math.imul(le,Ke)|0))<<13)|0;b=((J=J+Math.imul(le,st)|0)+(q>>>13)|0)+(rn>>>26)|0,rn&=67108863,z=Math.imul(Te,it),q=(q=Math.imul(Te,at))+Math.imul(Ee,it)|0,J=Math.imul(Ee,at),z=z+Math.imul(Z,ot)|0,q=(q=q+Math.imul(Z,Je)|0)+Math.imul(ue,ot)|0,J=J+Math.imul(ue,Je)|0,z=z+Math.imul(ye,Ge)|0,q=(q=q+Math.imul(ye,dt)|0)+Math.imul(re,Ge)|0,J=J+Math.imul(re,dt)|0,z=z+Math.imul(Ce,ut)|0,q=(q=q+Math.imul(Ce,Ve)|0)+Math.imul(oe,ut)|0,J=J+Math.imul(oe,Ve)|0,z=z+Math.imul(ae,Ke)|0,q=(q=q+Math.imul(ae,st)|0)+Math.imul(de,Ke)|0,J=J+Math.imul(de,st)|0;var Cn=(b+(z=z+Math.imul(me,ft)|0)|0)+((8191&(q=(q=q+Math.imul(me,ze)|0)+Math.imul(le,ft)|0))<<13)|0;b=((J=J+Math.imul(le,ze)|0)+(q>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,z=Math.imul(Ne,it),q=(q=Math.imul(Ne,at))+Math.imul(_e,it)|0,J=Math.imul(_e,at),z=z+Math.imul(Te,ot)|0,q=(q=q+Math.imul(Te,Je)|0)+Math.imul(Ee,ot)|0,J=J+Math.imul(Ee,Je)|0,z=z+Math.imul(Z,Ge)|0,q=(q=q+Math.imul(Z,dt)|0)+Math.imul(ue,Ge)|0,J=J+Math.imul(ue,dt)|0,z=z+Math.imul(ye,ut)|0,q=(q=q+Math.imul(ye,Ve)|0)+Math.imul(re,ut)|0,J=J+Math.imul(re,Ve)|0,z=z+Math.imul(Ce,Ke)|0,q=(q=q+Math.imul(Ce,st)|0)+Math.imul(oe,Ke)|0,J=J+Math.imul(oe,st)|0,z=z+Math.imul(ae,ft)|0,q=(q=q+Math.imul(ae,ze)|0)+Math.imul(de,ft)|0,J=J+Math.imul(de,ze)|0;var Kt=(b+(z=z+Math.imul(me,ht)|0)|0)+((8191&(q=(q=q+Math.imul(me,tt)|0)+Math.imul(le,ht)|0))<<13)|0;b=((J=J+Math.imul(le,tt)|0)+(q>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,z=Math.imul(Ae,it),q=(q=Math.imul(Ae,at))+Math.imul(Le,it)|0,J=Math.imul(Le,at),z=z+Math.imul(Ne,ot)|0,q=(q=q+Math.imul(Ne,Je)|0)+Math.imul(_e,ot)|0,J=J+Math.imul(_e,Je)|0,z=z+Math.imul(Te,Ge)|0,q=(q=q+Math.imul(Te,dt)|0)+Math.imul(Ee,Ge)|0,J=J+Math.imul(Ee,dt)|0,z=z+Math.imul(Z,ut)|0,q=(q=q+Math.imul(Z,Ve)|0)+Math.imul(ue,ut)|0,J=J+Math.imul(ue,Ve)|0,z=z+Math.imul(ye,Ke)|0,q=(q=q+Math.imul(ye,st)|0)+Math.imul(re,Ke)|0,J=J+Math.imul(re,st)|0,z=z+Math.imul(Ce,ft)|0,q=(q=q+Math.imul(Ce,ze)|0)+Math.imul(oe,ft)|0,J=J+Math.imul(oe,ze)|0,z=z+Math.imul(ae,ht)|0,q=(q=q+Math.imul(ae,tt)|0)+Math.imul(de,ht)|0,J=J+Math.imul(de,tt)|0;var Nt=(b+(z=z+Math.imul(me,et)|0)|0)+((8191&(q=(q=q+Math.imul(me,Xe)|0)+Math.imul(le,et)|0))<<13)|0;b=((J=J+Math.imul(le,Xe)|0)+(q>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,z=Math.imul(He,it),q=(q=Math.imul(He,at))+Math.imul(We,it)|0,J=Math.imul(We,at),z=z+Math.imul(Ae,ot)|0,q=(q=q+Math.imul(Ae,Je)|0)+Math.imul(Le,ot)|0,J=J+Math.imul(Le,Je)|0,z=z+Math.imul(Ne,Ge)|0,q=(q=q+Math.imul(Ne,dt)|0)+Math.imul(_e,Ge)|0,J=J+Math.imul(_e,dt)|0,z=z+Math.imul(Te,ut)|0,q=(q=q+Math.imul(Te,Ve)|0)+Math.imul(Ee,ut)|0,J=J+Math.imul(Ee,Ve)|0,z=z+Math.imul(Z,Ke)|0,q=(q=q+Math.imul(Z,st)|0)+Math.imul(ue,Ke)|0,J=J+Math.imul(ue,st)|0,z=z+Math.imul(ye,ft)|0,q=(q=q+Math.imul(ye,ze)|0)+Math.imul(re,ft)|0,J=J+Math.imul(re,ze)|0,z=z+Math.imul(Ce,ht)|0,q=(q=q+Math.imul(Ce,tt)|0)+Math.imul(oe,ht)|0,J=J+Math.imul(oe,tt)|0,z=z+Math.imul(ae,et)|0,q=(q=q+Math.imul(ae,Xe)|0)+Math.imul(de,et)|0,J=J+Math.imul(de,Xe)|0;var xn=(b+(z=z+Math.imul(me,Ye)|0)|0)+((8191&(q=(q=q+Math.imul(me,lt)|0)+Math.imul(le,Ye)|0))<<13)|0;b=((J=J+Math.imul(le,lt)|0)+(q>>>13)|0)+(xn>>>26)|0,xn&=67108863,z=Math.imul(qe,it),q=(q=Math.imul(qe,at))+Math.imul(ct,it)|0,J=Math.imul(ct,at),z=z+Math.imul(He,ot)|0,q=(q=q+Math.imul(He,Je)|0)+Math.imul(We,ot)|0,J=J+Math.imul(We,Je)|0,z=z+Math.imul(Ae,Ge)|0,q=(q=q+Math.imul(Ae,dt)|0)+Math.imul(Le,Ge)|0,J=J+Math.imul(Le,dt)|0,z=z+Math.imul(Ne,ut)|0,q=(q=q+Math.imul(Ne,Ve)|0)+Math.imul(_e,ut)|0,J=J+Math.imul(_e,Ve)|0,z=z+Math.imul(Te,Ke)|0,q=(q=q+Math.imul(Te,st)|0)+Math.imul(Ee,Ke)|0,J=J+Math.imul(Ee,st)|0,z=z+Math.imul(Z,ft)|0,q=(q=q+Math.imul(Z,ze)|0)+Math.imul(ue,ft)|0,J=J+Math.imul(ue,ze)|0,z=z+Math.imul(ye,ht)|0,q=(q=q+Math.imul(ye,tt)|0)+Math.imul(re,ht)|0,J=J+Math.imul(re,tt)|0,z=z+Math.imul(Ce,et)|0,q=(q=q+Math.imul(Ce,Xe)|0)+Math.imul(oe,et)|0,J=J+Math.imul(oe,Xe)|0,z=z+Math.imul(ae,Ye)|0,q=(q=q+Math.imul(ae,lt)|0)+Math.imul(de,Ye)|0,J=J+Math.imul(de,lt)|0;var wn=(b+(z=z+Math.imul(me,Ht)|0)|0)+((8191&(q=(q=q+Math.imul(me,jt)|0)+Math.imul(le,Ht)|0))<<13)|0;b=((J=J+Math.imul(le,jt)|0)+(q>>>13)|0)+(wn>>>26)|0,wn&=67108863,z=Math.imul(qe,ot),q=(q=Math.imul(qe,Je))+Math.imul(ct,ot)|0,J=Math.imul(ct,Je),z=z+Math.imul(He,Ge)|0,q=(q=q+Math.imul(He,dt)|0)+Math.imul(We,Ge)|0,J=J+Math.imul(We,dt)|0,z=z+Math.imul(Ae,ut)|0,q=(q=q+Math.imul(Ae,Ve)|0)+Math.imul(Le,ut)|0,J=J+Math.imul(Le,Ve)|0,z=z+Math.imul(Ne,Ke)|0,q=(q=q+Math.imul(Ne,st)|0)+Math.imul(_e,Ke)|0,J=J+Math.imul(_e,st)|0,z=z+Math.imul(Te,ft)|0,q=(q=q+Math.imul(Te,ze)|0)+Math.imul(Ee,ft)|0,J=J+Math.imul(Ee,ze)|0,z=z+Math.imul(Z,ht)|0,q=(q=q+Math.imul(Z,tt)|0)+Math.imul(ue,ht)|0,J=J+Math.imul(ue,tt)|0,z=z+Math.imul(ye,et)|0,q=(q=q+Math.imul(ye,Xe)|0)+Math.imul(re,et)|0,J=J+Math.imul(re,Xe)|0,z=z+Math.imul(Ce,Ye)|0,q=(q=q+Math.imul(Ce,lt)|0)+Math.imul(oe,Ye)|0,J=J+Math.imul(oe,lt)|0;var Mn=(b+(z=z+Math.imul(ae,Ht)|0)|0)+((8191&(q=(q=q+Math.imul(ae,jt)|0)+Math.imul(de,Ht)|0))<<13)|0;b=((J=J+Math.imul(de,jt)|0)+(q>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,z=Math.imul(qe,Ge),q=(q=Math.imul(qe,dt))+Math.imul(ct,Ge)|0,J=Math.imul(ct,dt),z=z+Math.imul(He,ut)|0,q=(q=q+Math.imul(He,Ve)|0)+Math.imul(We,ut)|0,J=J+Math.imul(We,Ve)|0,z=z+Math.imul(Ae,Ke)|0,q=(q=q+Math.imul(Ae,st)|0)+Math.imul(Le,Ke)|0,J=J+Math.imul(Le,st)|0,z=z+Math.imul(Ne,ft)|0,q=(q=q+Math.imul(Ne,ze)|0)+Math.imul(_e,ft)|0,J=J+Math.imul(_e,ze)|0,z=z+Math.imul(Te,ht)|0,q=(q=q+Math.imul(Te,tt)|0)+Math.imul(Ee,ht)|0,J=J+Math.imul(Ee,tt)|0,z=z+Math.imul(Z,et)|0,q=(q=q+Math.imul(Z,Xe)|0)+Math.imul(ue,et)|0,J=J+Math.imul(ue,Xe)|0,z=z+Math.imul(ye,Ye)|0,q=(q=q+Math.imul(ye,lt)|0)+Math.imul(re,Ye)|0,J=J+Math.imul(re,lt)|0;var xt=(b+(z=z+Math.imul(Ce,Ht)|0)|0)+((8191&(q=(q=q+Math.imul(Ce,jt)|0)+Math.imul(oe,Ht)|0))<<13)|0;b=((J=J+Math.imul(oe,jt)|0)+(q>>>13)|0)+(xt>>>26)|0,xt&=67108863,z=Math.imul(qe,ut),q=(q=Math.imul(qe,Ve))+Math.imul(ct,ut)|0,J=Math.imul(ct,Ve),z=z+Math.imul(He,Ke)|0,q=(q=q+Math.imul(He,st)|0)+Math.imul(We,Ke)|0,J=J+Math.imul(We,st)|0,z=z+Math.imul(Ae,ft)|0,q=(q=q+Math.imul(Ae,ze)|0)+Math.imul(Le,ft)|0,J=J+Math.imul(Le,ze)|0,z=z+Math.imul(Ne,ht)|0,q=(q=q+Math.imul(Ne,tt)|0)+Math.imul(_e,ht)|0,J=J+Math.imul(_e,tt)|0,z=z+Math.imul(Te,et)|0,q=(q=q+Math.imul(Te,Xe)|0)+Math.imul(Ee,et)|0,J=J+Math.imul(Ee,Xe)|0,z=z+Math.imul(Z,Ye)|0,q=(q=q+Math.imul(Z,lt)|0)+Math.imul(ue,Ye)|0,J=J+Math.imul(ue,lt)|0;var Rn=(b+(z=z+Math.imul(ye,Ht)|0)|0)+((8191&(q=(q=q+Math.imul(ye,jt)|0)+Math.imul(re,Ht)|0))<<13)|0;b=((J=J+Math.imul(re,jt)|0)+(q>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,z=Math.imul(qe,Ke),q=(q=Math.imul(qe,st))+Math.imul(ct,Ke)|0,J=Math.imul(ct,st),z=z+Math.imul(He,ft)|0,q=(q=q+Math.imul(He,ze)|0)+Math.imul(We,ft)|0,J=J+Math.imul(We,ze)|0,z=z+Math.imul(Ae,ht)|0,q=(q=q+Math.imul(Ae,tt)|0)+Math.imul(Le,ht)|0,J=J+Math.imul(Le,tt)|0,z=z+Math.imul(Ne,et)|0,q=(q=q+Math.imul(Ne,Xe)|0)+Math.imul(_e,et)|0,J=J+Math.imul(_e,Xe)|0,z=z+Math.imul(Te,Ye)|0,q=(q=q+Math.imul(Te,lt)|0)+Math.imul(Ee,Ye)|0,J=J+Math.imul(Ee,lt)|0;var Zt=(b+(z=z+Math.imul(Z,Ht)|0)|0)+((8191&(q=(q=q+Math.imul(Z,jt)|0)+Math.imul(ue,Ht)|0))<<13)|0;b=((J=J+Math.imul(ue,jt)|0)+(q>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,z=Math.imul(qe,ft),q=(q=Math.imul(qe,ze))+Math.imul(ct,ft)|0,J=Math.imul(ct,ze),z=z+Math.imul(He,ht)|0,q=(q=q+Math.imul(He,tt)|0)+Math.imul(We,ht)|0,J=J+Math.imul(We,tt)|0,z=z+Math.imul(Ae,et)|0,q=(q=q+Math.imul(Ae,Xe)|0)+Math.imul(Le,et)|0,J=J+Math.imul(Le,Xe)|0,z=z+Math.imul(Ne,Ye)|0,q=(q=q+Math.imul(Ne,lt)|0)+Math.imul(_e,Ye)|0,J=J+Math.imul(_e,lt)|0;var tn=(b+(z=z+Math.imul(Te,Ht)|0)|0)+((8191&(q=(q=q+Math.imul(Te,jt)|0)+Math.imul(Ee,Ht)|0))<<13)|0;b=((J=J+Math.imul(Ee,jt)|0)+(q>>>13)|0)+(tn>>>26)|0,tn&=67108863,z=Math.imul(qe,ht),q=(q=Math.imul(qe,tt))+Math.imul(ct,ht)|0,J=Math.imul(ct,tt),z=z+Math.imul(He,et)|0,q=(q=q+Math.imul(He,Xe)|0)+Math.imul(We,et)|0,J=J+Math.imul(We,Xe)|0,z=z+Math.imul(Ae,Ye)|0,q=(q=q+Math.imul(Ae,lt)|0)+Math.imul(Le,Ye)|0,J=J+Math.imul(Le,lt)|0;var _n=(b+(z=z+Math.imul(Ne,Ht)|0)|0)+((8191&(q=(q=q+Math.imul(Ne,jt)|0)+Math.imul(_e,Ht)|0))<<13)|0;b=((J=J+Math.imul(_e,jt)|0)+(q>>>13)|0)+(_n>>>26)|0,_n&=67108863,z=Math.imul(qe,et),q=(q=Math.imul(qe,Xe))+Math.imul(ct,et)|0,J=Math.imul(ct,Xe),z=z+Math.imul(He,Ye)|0,q=(q=q+Math.imul(He,lt)|0)+Math.imul(We,Ye)|0,J=J+Math.imul(We,lt)|0;var Oi=(b+(z=z+Math.imul(Ae,Ht)|0)|0)+((8191&(q=(q=q+Math.imul(Ae,jt)|0)+Math.imul(Le,Ht)|0))<<13)|0;b=((J=J+Math.imul(Le,jt)|0)+(q>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,z=Math.imul(qe,Ye),q=(q=Math.imul(qe,lt))+Math.imul(ct,Ye)|0,J=Math.imul(ct,lt);var ki=(b+(z=z+Math.imul(He,Ht)|0)|0)+((8191&(q=(q=q+Math.imul(He,jt)|0)+Math.imul(We,Ht)|0))<<13)|0;b=((J=J+Math.imul(We,jt)|0)+(q>>>13)|0)+(ki>>>26)|0,ki&=67108863;var Ni=(b+(z=Math.imul(qe,Ht))|0)+((8191&(q=(q=Math.imul(qe,jt))+Math.imul(ct,Ht)|0))<<13)|0;return b=((J=Math.imul(ct,jt))+(q>>>13)|0)+(Ni>>>26)|0,Ni&=67108863,i[0]=bn,i[1]=dn,i[2]=pn,i[3]=In,i[4]=rn,i[5]=Cn,i[6]=Kt,i[7]=Nt,i[8]=xn,i[9]=wn,i[10]=Mn,i[11]=xt,i[12]=Rn,i[13]=Zt,i[14]=tn,i[15]=_n,i[16]=Oi,i[17]=ki,i[18]=Ni,0!==b&&(i[19]=b,_.length++),_};function V(l,a,f){f.negative=a.negative^l.negative,f.length=l.length+a.length;for(var _=0,D=0,d=0;d<f.length-1;d++){var i=D;D=0;for(var b=67108863&_,z=Math.min(d,a.length-1),q=Math.max(0,d-l.length+1);q<=z;q++){var le=(0|l.words[d-q])*(0|a.words[q]),fe=67108863&le;b=67108863&(fe=fe+b|0),D+=(i=(i=i+(le/67108864|0)|0)+(fe>>>26)|0)>>>26,i&=67108863}f.words[d]=b,_=i,i=D}return 0!==_?f.words[d]=_:f.length--,f._strip()}function U(l,a,f){return V(l,a,f)}function B(l,a){this.x=l,this.y=a}Math.imul||(O=k),u.prototype.mulTo=function(a,f){var D=this.length+a.length;return 10===this.length&&10===a.length?O(this,a,f):D<63?k(this,a,f):D<1024?V(this,a,f):U(this,a,f)},B.prototype.makeRBT=function(a){for(var f=new Array(a),_=u.prototype._countBits(a)-1,D=0;D<a;D++)f[D]=this.revBin(D,_,a);return f},B.prototype.revBin=function(a,f,_){if(0===a||a===_-1)return a;for(var D=0,d=0;d<f;d++)D|=(1&a)<<f-d-1,a>>=1;return D},B.prototype.permute=function(a,f,_,D,d,i){for(var b=0;b<i;b++)D[b]=f[a[b]],d[b]=_[a[b]]},B.prototype.transform=function(a,f,_,D,d,i){this.permute(i,a,f,_,D,d);for(var b=1;b<d;b<<=1)for(var z=b<<1,q=Math.cos(2*Math.PI/z),J=Math.sin(2*Math.PI/z),ge=0;ge<d;ge+=z)for(var me=q,le=J,fe=0;fe<b;fe++){var ae=_[ge+fe],de=D[ge+fe],xe=_[ge+fe+b],Ce=D[ge+fe+b],oe=me*xe-le*Ce;Ce=me*Ce+le*xe,_[ge+fe]=ae+(xe=oe),D[ge+fe]=de+Ce,_[ge+fe+b]=ae-xe,D[ge+fe+b]=de-Ce,fe!==z&&(oe=q*me-J*le,le=q*le+J*me,me=oe)}},B.prototype.guessLen13b=function(a,f){var _=1|Math.max(f,a),D=1&_,d=0;for(_=_/2|0;_;_>>>=1)d++;return 1<<d+1+D},B.prototype.conjugate=function(a,f,_){if(!(_<=1))for(var D=0;D<_/2;D++){var d=a[D];a[D]=a[_-D-1],a[_-D-1]=d,d=f[D],f[D]=-f[_-D-1],f[_-D-1]=-d}},B.prototype.normalize13b=function(a,f){for(var _=0,D=0;D<f/2;D++){var d=8192*Math.round(a[2*D+1]/f)+Math.round(a[2*D]/f)+_;a[D]=67108863&d,_=d<67108864?0:d/67108864|0}return a},B.prototype.convert13b=function(a,f,_,D){for(var d=0,i=0;i<f;i++)_[2*i]=8191&(d+=0|a[i]),_[2*i+1]=8191&(d>>>=13),d>>>=13;for(i=2*f;i<D;++i)_[i]=0;m(0===d),m(0==(-8192&d))},B.prototype.stub=function(a){for(var f=new Array(a),_=0;_<a;_++)f[_]=0;return f},B.prototype.mulp=function(a,f,_){var D=2*this.guessLen13b(a.length,f.length),d=this.makeRBT(D),i=this.stub(D),b=new Array(D),z=new Array(D),q=new Array(D),J=new Array(D),ge=new Array(D),me=new Array(D),le=_.words;le.length=D,this.convert13b(a.words,a.length,b,D),this.convert13b(f.words,f.length,J,D),this.transform(b,i,z,q,D,d),this.transform(J,i,ge,me,D,d);for(var fe=0;fe<D;fe++){var ae=z[fe]*ge[fe]-q[fe]*me[fe];q[fe]=z[fe]*me[fe]+q[fe]*ge[fe],z[fe]=ae}return this.conjugate(z,q,D),this.transform(z,q,le,i,D,d),this.conjugate(le,i,D),this.normalize13b(le,D),_.negative=a.negative^f.negative,_.length=a.length+f.length,_._strip()},u.prototype.mul=function(a){var f=new u(null);return f.words=new Array(this.length+a.length),this.mulTo(a,f)},u.prototype.mulf=function(a){var f=new u(null);return f.words=new Array(this.length+a.length),U(this,a,f)},u.prototype.imul=function(a){return this.clone().mulTo(a,this)},u.prototype.imuln=function(a){var f=a<0;f&&(a=-a),m("number"==typeof a),m(a<67108864);for(var _=0,D=0;D<this.length;D++){var d=(0|this.words[D])*a,i=(67108863&d)+(67108863&_);_>>=26,_+=d/67108864|0,_+=i>>>26,this.words[D]=67108863&i}return 0!==_&&(this.words[D]=_,this.length++),f?this.ineg():this},u.prototype.muln=function(a){return this.clone().imuln(a)},u.prototype.sqr=function(){return this.mul(this)},u.prototype.isqr=function(){return this.imul(this.clone())},u.prototype.pow=function(a){var f=function(l){for(var a=new Array(l.bitLength()),f=0;f<a.length;f++)a[f]=l.words[f/26|0]>>>f%26&1;return a}(a);if(0===f.length)return new u(1);for(var _=this,D=0;D<f.length&&0===f[D];D++,_=_.sqr());if(++D<f.length)for(var d=_.sqr();D<f.length;D++,d=d.sqr())0!==f[D]&&(_=_.mul(d));return _},u.prototype.iushln=function(a){m("number"==typeof a&&a>=0);var d,f=a%26,_=(a-f)/26,D=67108863>>>26-f<<26-f;if(0!==f){var i=0;for(d=0;d<this.length;d++){var b=this.words[d]&D;this.words[d]=(0|this.words[d])-b<<f|i,i=b>>>26-f}i&&(this.words[d]=i,this.length++)}if(0!==_){for(d=this.length-1;d>=0;d--)this.words[d+_]=this.words[d];for(d=0;d<_;d++)this.words[d]=0;this.length+=_}return this._strip()},u.prototype.ishln=function(a){return m(0===this.negative),this.iushln(a)},u.prototype.iushrn=function(a,f,_){var D;m("number"==typeof a&&a>=0),D=f?(f-f%26)/26:0;var d=a%26,i=Math.min((a-d)/26,this.length),b=67108863^67108863>>>d<<d,z=_;if(D-=i,D=Math.max(0,D),z){for(var q=0;q<i;q++)z.words[q]=this.words[q];z.length=i}if(0!==i)if(this.length>i)for(this.length-=i,q=0;q<this.length;q++)this.words[q]=this.words[q+i];else this.words[0]=0,this.length=1;var J=0;for(q=this.length-1;q>=0&&(0!==J||q>=D);q--){var ge=0|this.words[q];this.words[q]=J<<26-d|ge>>>d,J=ge&b}return z&&0!==J&&(z.words[z.length++]=J),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},u.prototype.ishrn=function(a,f,_){return m(0===this.negative),this.iushrn(a,f,_)},u.prototype.shln=function(a){return this.clone().ishln(a)},u.prototype.ushln=function(a){return this.clone().iushln(a)},u.prototype.shrn=function(a){return this.clone().ishrn(a)},u.prototype.ushrn=function(a){return this.clone().iushrn(a)},u.prototype.testn=function(a){m("number"==typeof a&&a>=0);var f=a%26,_=(a-f)/26;return!(this.length<=_||!(this.words[_]&1<<f))},u.prototype.imaskn=function(a){m("number"==typeof a&&a>=0);var f=a%26,_=(a-f)/26;return m(0===this.negative,"imaskn works only with positive numbers"),this.length<=_?this:(0!==f&&_++,this.length=Math.min(_,this.length),0!==f&&(this.words[this.length-1]&=67108863^67108863>>>f<<f),this._strip())},u.prototype.maskn=function(a){return this.clone().imaskn(a)},u.prototype.iaddn=function(a){return m("number"==typeof a),m(a<67108864),a<0?this.isubn(-a):0!==this.negative?1===this.length&&(0|this.words[0])<=a?(this.words[0]=a-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},u.prototype._iaddn=function(a){this.words[0]+=a;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},u.prototype.isubn=function(a){if(m("number"==typeof a),m(a<67108864),a<0)return this.iaddn(-a);if(0!==this.negative)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this._strip()},u.prototype.addn=function(a){return this.clone().iaddn(a)},u.prototype.subn=function(a){return this.clone().isubn(a)},u.prototype.iabs=function(){return this.negative=0,this},u.prototype.abs=function(){return this.clone().iabs()},u.prototype._ishlnsubmul=function(a,f,_){var d;this._expand(a.length+_);var i,b=0;for(d=0;d<a.length;d++){i=(0|this.words[d+_])+b;var z=(0|a.words[d])*f;b=((i-=67108863&z)>>26)-(z/67108864|0),this.words[d+_]=67108863&i}for(;d<this.length-_;d++)b=(i=(0|this.words[d+_])+b)>>26,this.words[d+_]=67108863&i;if(0===b)return this._strip();for(m(-1===b),b=0,d=0;d<this.length;d++)b=(i=-(0|this.words[d])+b)>>26,this.words[d]=67108863&i;return this.negative=1,this._strip()},u.prototype._wordDiv=function(a,f){var _,D=this.clone(),d=a,i=0|d.words[d.length-1];0!=(_=26-this._countBits(i))&&(d=d.ushln(_),D.iushln(_),i=0|d.words[d.length-1]);var q,z=D.length-d.length;if("mod"!==f){(q=new u(null)).length=z+1,q.words=new Array(q.length);for(var J=0;J<q.length;J++)q.words[J]=0}var ge=D.clone()._ishlnsubmul(d,1,z);0===ge.negative&&(D=ge,q&&(q.words[z]=1));for(var me=z-1;me>=0;me--){var le=67108864*(0|D.words[d.length+me])+(0|D.words[d.length+me-1]);for(le=Math.min(le/i|0,67108863),D._ishlnsubmul(d,le,me);0!==D.negative;)le--,D.negative=0,D._ishlnsubmul(d,1,me),D.isZero()||(D.negative^=1);q&&(q.words[me]=le)}return q&&q._strip(),D._strip(),"div"!==f&&0!==_&&D.iushrn(_),{div:q||null,mod:D}},u.prototype.divmod=function(a,f,_){return m(!a.isZero()),this.isZero()?{div:new u(0),mod:new u(0)}:0!==this.negative&&0===a.negative?(i=this.neg().divmod(a,f),"mod"!==f&&(D=i.div.neg()),"div"!==f&&(d=i.mod.neg(),_&&0!==d.negative&&d.iadd(a)),{div:D,mod:d}):0===this.negative&&0!==a.negative?(i=this.divmod(a.neg(),f),"mod"!==f&&(D=i.div.neg()),{div:D,mod:i.mod}):0!=(this.negative&a.negative)?(i=this.neg().divmod(a.neg(),f),"div"!==f&&(d=i.mod.neg(),_&&0!==d.negative&&d.isub(a)),{div:i.div,mod:d}):a.length>this.length||this.cmp(a)<0?{div:new u(0),mod:this}:1===a.length?"div"===f?{div:this.divn(a.words[0]),mod:null}:"mod"===f?{div:null,mod:new u(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new u(this.modrn(a.words[0]))}:this._wordDiv(a,f);var D,d,i},u.prototype.div=function(a){return this.divmod(a,"div",!1).div},u.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},u.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},u.prototype.divRound=function(a){var f=this.divmod(a);if(f.mod.isZero())return f.div;var _=0!==f.div.negative?f.mod.isub(a):f.mod,D=a.ushrn(1),d=a.andln(1),i=_.cmp(D);return i<0||1===d&&0===i?f.div:0!==f.div.negative?f.div.isubn(1):f.div.iaddn(1)},u.prototype.modrn=function(a){var f=a<0;f&&(a=-a),m(a<=67108863);for(var _=(1<<26)%a,D=0,d=this.length-1;d>=0;d--)D=(_*D+(0|this.words[d]))%a;return f?-D:D},u.prototype.modn=function(a){return this.modrn(a)},u.prototype.idivn=function(a){var f=a<0;f&&(a=-a),m(a<=67108863);for(var _=0,D=this.length-1;D>=0;D--){var d=(0|this.words[D])+67108864*_;this.words[D]=d/a|0,_=d%a}return this._strip(),f?this.ineg():this},u.prototype.divn=function(a){return this.clone().idivn(a)},u.prototype.egcd=function(a){m(0===a.negative),m(!a.isZero());var f=this,_=a.clone();f=0!==f.negative?f.umod(a):f.clone();for(var D=new u(1),d=new u(0),i=new u(0),b=new u(1),z=0;f.isEven()&&_.isEven();)f.iushrn(1),_.iushrn(1),++z;for(var q=_.clone(),J=f.clone();!f.isZero();){for(var ge=0,me=1;0==(f.words[0]&me)&&ge<26;++ge,me<<=1);if(ge>0)for(f.iushrn(ge);ge-- >0;)(D.isOdd()||d.isOdd())&&(D.iadd(q),d.isub(J)),D.iushrn(1),d.iushrn(1);for(var le=0,fe=1;0==(_.words[0]&fe)&&le<26;++le,fe<<=1);if(le>0)for(_.iushrn(le);le-- >0;)(i.isOdd()||b.isOdd())&&(i.iadd(q),b.isub(J)),i.iushrn(1),b.iushrn(1);f.cmp(_)>=0?(f.isub(_),D.isub(i),d.isub(b)):(_.isub(f),i.isub(D),b.isub(d))}return{a:i,b,gcd:_.iushln(z)}},u.prototype._invmp=function(a){m(0===a.negative),m(!a.isZero());var ge,f=this,_=a.clone();f=0!==f.negative?f.umod(a):f.clone();for(var D=new u(1),d=new u(0),i=_.clone();f.cmpn(1)>0&&_.cmpn(1)>0;){for(var b=0,z=1;0==(f.words[0]&z)&&b<26;++b,z<<=1);if(b>0)for(f.iushrn(b);b-- >0;)D.isOdd()&&D.iadd(i),D.iushrn(1);for(var q=0,J=1;0==(_.words[0]&J)&&q<26;++q,J<<=1);if(q>0)for(_.iushrn(q);q-- >0;)d.isOdd()&&d.iadd(i),d.iushrn(1);f.cmp(_)>=0?(f.isub(_),D.isub(d)):(_.isub(f),d.isub(D))}return(ge=0===f.cmpn(1)?D:d).cmpn(0)<0&&ge.iadd(a),ge},u.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var f=this.clone(),_=a.clone();f.negative=0,_.negative=0;for(var D=0;f.isEven()&&_.isEven();D++)f.iushrn(1),_.iushrn(1);for(;;){for(;f.isEven();)f.iushrn(1);for(;_.isEven();)_.iushrn(1);var d=f.cmp(_);if(d<0){var i=f;f=_,_=i}else if(0===d||0===_.cmpn(1))break;f.isub(_)}return _.iushln(D)},u.prototype.invm=function(a){return this.egcd(a).a.umod(a)},u.prototype.isEven=function(){return 0==(1&this.words[0])},u.prototype.isOdd=function(){return 1==(1&this.words[0])},u.prototype.andln=function(a){return this.words[0]&a},u.prototype.bincn=function(a){m("number"==typeof a);var f=a%26,_=(a-f)/26,D=1<<f;if(this.length<=_)return this._expand(_+1),this.words[_]|=D,this;for(var d=D,i=_;0!==d&&i<this.length;i++){var b=0|this.words[i];d=(b+=d)>>>26,this.words[i]=b&=67108863}return 0!==d&&(this.words[i]=d,this.length++),this},u.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},u.prototype.cmpn=function(a){var _,f=a<0;if(0!==this.negative&&!f)return-1;if(0===this.negative&&f)return 1;if(this._strip(),this.length>1)_=1;else{f&&(a=-a),m(a<=67108863,"Number is too big");var D=0|this.words[0];_=D===a?0:D<a?-1:1}return 0!==this.negative?0|-_:_},u.prototype.cmp=function(a){if(0!==this.negative&&0===a.negative)return-1;if(0===this.negative&&0!==a.negative)return 1;var f=this.ucmp(a);return 0!==this.negative?0|-f:f},u.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var f=0,_=this.length-1;_>=0;_--){var D=0|this.words[_],d=0|a.words[_];if(D!==d){D<d?f=-1:D>d&&(f=1);break}}return f},u.prototype.gtn=function(a){return 1===this.cmpn(a)},u.prototype.gt=function(a){return 1===this.cmp(a)},u.prototype.gten=function(a){return this.cmpn(a)>=0},u.prototype.gte=function(a){return this.cmp(a)>=0},u.prototype.ltn=function(a){return-1===this.cmpn(a)},u.prototype.lt=function(a){return-1===this.cmp(a)},u.prototype.lten=function(a){return this.cmpn(a)<=0},u.prototype.lte=function(a){return this.cmp(a)<=0},u.prototype.eqn=function(a){return 0===this.cmpn(a)},u.prototype.eq=function(a){return 0===this.cmp(a)},u.red=function(a){return new r(a)},u.prototype.toRed=function(a){return m(!this.red,"Already a number in reduction context"),m(0===this.negative,"red works only with positives"),a.convertTo(this)._forceRed(a)},u.prototype.fromRed=function(){return m(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},u.prototype._forceRed=function(a){return this.red=a,this},u.prototype.forceRed=function(a){return m(!this.red,"Already a number in reduction context"),this._forceRed(a)},u.prototype.redAdd=function(a){return m(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},u.prototype.redIAdd=function(a){return m(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},u.prototype.redSub=function(a){return m(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},u.prototype.redISub=function(a){return m(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},u.prototype.redShl=function(a){return m(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},u.prototype.redMul=function(a){return m(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},u.prototype.redIMul=function(a){return m(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},u.prototype.redSqr=function(){return m(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},u.prototype.redISqr=function(){return m(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},u.prototype.redSqrt=function(){return m(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},u.prototype.redInvm=function(){return m(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},u.prototype.redNeg=function(){return m(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},u.prototype.redPow=function(a){return m(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var H={k256:null,p224:null,p192:null,p25519:null};function W(l,a){this.name=l,this.p=new u(a,16),this.n=this.p.bitLength(),this.k=new u(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function te(){W.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function $(){W.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function pe(){W.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function R(){W.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function r(l){if("string"==typeof l){var a=u._prime(l);this.m=a.p,this.prime=a}else m(l.gtn(1),"modulus must be greater than 1"),this.m=l,this.prime=null}function s(l){r.call(this,l),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new u(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}W.prototype._tmp=function(){var a=new u(null);return a.words=new Array(Math.ceil(this.n/13)),a},W.prototype.ireduce=function(a){var _,f=a;do{this.split(f,this.tmp),_=(f=(f=this.imulK(f)).iadd(this.tmp)).bitLength()}while(_>this.n);var D=_<this.n?-1:f.ucmp(this.p);return 0===D?(f.words[0]=0,f.length=1):D>0?f.isub(this.p):void 0!==f.strip?f.strip():f._strip(),f},W.prototype.split=function(a,f){a.iushrn(this.n,0,f)},W.prototype.imulK=function(a){return a.imul(this.k)},x(te,W),te.prototype.split=function(a,f){for(var _=4194303,D=Math.min(a.length,9),d=0;d<D;d++)f.words[d]=a.words[d];if(f.length=D,a.length<=9)return a.words[0]=0,void(a.length=1);var i=a.words[9];for(f.words[f.length++]=i&_,d=10;d<a.length;d++){var b=0|a.words[d];a.words[d-10]=(b&_)<<4|i>>>22,i=b}a.words[d-10]=i>>>=22,a.length-=0===i&&a.length>10?10:9},te.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var f=0,_=0;_<a.length;_++){var D=0|a.words[_];a.words[_]=67108863&(f+=977*D),f=64*D+(f/67108864|0)}return 0===a.words[a.length-1]&&(a.length--,0===a.words[a.length-1]&&a.length--),a},x($,W),x(pe,W),x(R,W),R.prototype.imulK=function(a){for(var f=0,_=0;_<a.length;_++){var D=19*(0|a.words[_])+f,d=67108863&D;D>>>=26,a.words[_]=d,f=D}return 0!==f&&(a.words[a.length++]=f),a},u._prime=function(a){if(H[a])return H[a];var f;if("k256"===a)f=new te;else if("p224"===a)f=new $;else if("p192"===a)f=new pe;else{if("p25519"!==a)throw new Error("Unknown prime "+a);f=new R}return H[a]=f,f},r.prototype._verify1=function(a){m(0===a.negative,"red works only with positives"),m(a.red,"red works only with red numbers")},r.prototype._verify2=function(a,f){m(0==(a.negative|f.negative),"red works only with positives"),m(a.red&&a.red===f.red,"red works only with red numbers")},r.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(y(a,a.umod(this.m)._forceRed(this)),a)},r.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},r.prototype.add=function(a,f){this._verify2(a,f);var _=a.add(f);return _.cmp(this.m)>=0&&_.isub(this.m),_._forceRed(this)},r.prototype.iadd=function(a,f){this._verify2(a,f);var _=a.iadd(f);return _.cmp(this.m)>=0&&_.isub(this.m),_},r.prototype.sub=function(a,f){this._verify2(a,f);var _=a.sub(f);return _.cmpn(0)<0&&_.iadd(this.m),_._forceRed(this)},r.prototype.isub=function(a,f){this._verify2(a,f);var _=a.isub(f);return _.cmpn(0)<0&&_.iadd(this.m),_},r.prototype.shl=function(a,f){return this._verify1(a),this.imod(a.ushln(f))},r.prototype.imul=function(a,f){return this._verify2(a,f),this.imod(a.imul(f))},r.prototype.mul=function(a,f){return this._verify2(a,f),this.imod(a.mul(f))},r.prototype.isqr=function(a){return this.imul(a,a.clone())},r.prototype.sqr=function(a){return this.mul(a,a)},r.prototype.sqrt=function(a){if(a.isZero())return a.clone();var f=this.m.andln(3);if(m(f%2==1),3===f){var _=this.m.add(new u(1)).iushrn(2);return this.pow(a,_)}for(var D=this.m.subn(1),d=0;!D.isZero()&&0===D.andln(1);)d++,D.iushrn(1);m(!D.isZero());var i=new u(1).toRed(this),b=i.redNeg(),z=this.m.subn(1).iushrn(1),q=this.m.bitLength();for(q=new u(2*q*q).toRed(this);0!==this.pow(q,z).cmp(b);)q.redIAdd(b);for(var J=this.pow(q,D),ge=this.pow(a,D.addn(1).iushrn(1)),me=this.pow(a,D),le=d;0!==me.cmp(i);){for(var fe=me,ae=0;0!==fe.cmp(i);ae++)fe=fe.redSqr();m(ae<le);var de=this.pow(J,new u(1).iushln(le-ae-1));ge=ge.redMul(de),J=de.redSqr(),me=me.redMul(J),le=ae}return ge},r.prototype.invm=function(a){var f=a._invmp(this.m);return 0!==f.negative?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},r.prototype.pow=function(a,f){if(f.isZero())return new u(1).toRed(this);if(0===f.cmpn(1))return a.clone();var D=new Array(16);D[0]=new u(1).toRed(this),D[1]=a;for(var d=2;d<D.length;d++)D[d]=this.mul(D[d-1],a);var i=D[0],b=0,z=0,q=f.bitLength()%26;for(0===q&&(q=26),d=f.length-1;d>=0;d--){for(var J=f.words[d],ge=q-1;ge>=0;ge--){var me=J>>ge&1;i!==D[0]&&(i=this.sqr(i)),0!==me||0!==b?(b<<=1,b|=me,(4==++z||0===d&&0===ge)&&(i=this.mul(i,D[b]),z=0,b=0)):z=0}q=26}return i},r.prototype.convertTo=function(a){var f=a.umod(this.m);return f===a?f.clone():f},r.prototype.convertFrom=function(a){var f=a.clone();return f.red=null,f},u.mont=function(a){return new s(a)},x(s,r),s.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},s.prototype.convertFrom=function(a){var f=this.imod(a.mul(this.rinv));return f.red=null,f},s.prototype.imul=function(a,f){if(a.isZero()||f.isZero())return a.words[0]=0,a.length=1,a;var _=a.imul(f),D=_.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=_.isub(D).iushrn(this.shift),i=d;return d.cmp(this.m)>=0?i=d.isub(this.m):d.cmpn(0)<0&&(i=d.iadd(this.m)),i._forceRed(this)},s.prototype.mul=function(a,f){if(a.isZero()||f.isZero())return new u(0)._forceRed(this);var _=a.mul(f),D=_.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),d=_.isub(D).iushrn(this.shift),i=d;return d.cmp(this.m)>=0?i=d.isub(this.m):d.cmpn(0)<0&&(i=d.iadd(this.m)),i._forceRed(this)},s.prototype.invm=function(a){return this.imod(a._invmp(this.m).mul(this.r2))._forceRed(this)}}(Y=T.nmd(Y),this)},4761:(Y,L,T)=>{var p;function N(x){this.rand=x}if(Y.exports=function(u){return p||(p=new N(null)),p.generate(u)},Y.exports.Rand=N,N.prototype.generate=function(u){return this._rand(u)},N.prototype._rand=function(u){if(this.rand.getBytes)return this.rand.getBytes(u);for(var g=new Uint8Array(u),M=0;M<g.length;M++)g[M]=this.rand.getByte();return g},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?N.prototype._rand=function(u){var g=new Uint8Array(u);return self.crypto.getRandomValues(g),g}:self.msCrypto&&self.msCrypto.getRandomValues?N.prototype._rand=function(u){var g=new Uint8Array(u);return self.msCrypto.getRandomValues(g),g}:"object"==typeof window&&(N.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var m=T(9726);if("function"!=typeof m.randomBytes)throw new Error("Not supported");N.prototype._rand=function(u){return m.randomBytes(u)}}catch(x){}},875:(Y,L,T)=>{var p=T(5859).Buffer;function N(A){p.isBuffer(A)||(A=p.from(A));for(var I=A.length/4|0,y=new Array(I),h=0;h<I;h++)y[h]=A.readUInt32BE(4*h);return y}function m(A){for(;0<A.length;A++)A[0]=0}function x(A,I,y,h,C){for(var B,H,W,te,v=y[0],w=y[1],S=y[2],P=y[3],k=A[0]^I[0],O=A[1]^I[1],V=A[2]^I[2],U=A[3]^I[3],$=4,pe=1;pe<C;pe++)B=v[k>>>24]^w[O>>>16&255]^S[V>>>8&255]^P[255&U]^I[$++],H=v[O>>>24]^w[V>>>16&255]^S[U>>>8&255]^P[255&k]^I[$++],W=v[V>>>24]^w[U>>>16&255]^S[k>>>8&255]^P[255&O]^I[$++],te=v[U>>>24]^w[k>>>16&255]^S[O>>>8&255]^P[255&V]^I[$++],k=B,O=H,V=W,U=te;return B=(h[k>>>24]<<24|h[O>>>16&255]<<16|h[V>>>8&255]<<8|h[255&U])^I[$++],H=(h[O>>>24]<<24|h[V>>>16&255]<<16|h[U>>>8&255]<<8|h[255&k])^I[$++],W=(h[V>>>24]<<24|h[U>>>16&255]<<16|h[k>>>8&255]<<8|h[255&O])^I[$++],te=(h[U>>>24]<<24|h[k>>>16&255]<<16|h[O>>>8&255]<<8|h[255&V])^I[$++],[B>>>=0,H>>>=0,W>>>=0,te>>>=0]}var u=[0,1,2,4,8,16,32,64,128,27,54],g=function(){for(var A=new Array(256),I=0;I<256;I++)A[I]=I<128?I<<1:I<<1^283;for(var y=[],h=[],C=[[],[],[],[]],v=[[],[],[],[]],w=0,S=0,P=0;P<256;++P){var k=S^S<<1^S<<2^S<<3^S<<4;y[w]=k=k>>>8^255&k^99,h[k]=w;var O=A[w],V=A[O],U=A[V],B=257*A[k]^16843008*k;C[0][w]=B<<24|B>>>8,C[1][w]=B<<16|B>>>16,C[2][w]=B<<8|B>>>24,C[3][w]=B,v[0][k]=(B=16843009*U^65537*V^257*O^16843008*w)<<24|B>>>8,v[1][k]=B<<16|B>>>16,v[2][k]=B<<8|B>>>24,v[3][k]=B,0===w?w=S=1:(w=O^A[A[A[U^O]]],S^=A[A[S]])}return{SBOX:y,INV_SBOX:h,SUB_MIX:C,INV_SUB_MIX:v}}();function M(A){this._key=N(A),this._reset()}M.blockSize=16,M.keySize=32,M.prototype.blockSize=M.blockSize,M.prototype.keySize=M.keySize,M.prototype._reset=function(){for(var A=this._key,I=A.length,y=I+6,h=4*(y+1),C=[],v=0;v<I;v++)C[v]=A[v];for(v=I;v<h;v++){var w=C[v-1];v%I==0?(w=g.SBOX[(w=w<<8|w>>>24)>>>24]<<24|g.SBOX[w>>>16&255]<<16|g.SBOX[w>>>8&255]<<8|g.SBOX[255&w],w^=u[v/I|0]<<24):I>6&&v%I==4&&(w=g.SBOX[w>>>24]<<24|g.SBOX[w>>>16&255]<<16|g.SBOX[w>>>8&255]<<8|g.SBOX[255&w]),C[v]=C[v-I]^w}for(var S=[],P=0;P<h;P++){var k=h-P,O=C[k-(P%4?0:4)];S[P]=P<4||k<=4?O:g.INV_SUB_MIX[0][g.SBOX[O>>>24]]^g.INV_SUB_MIX[1][g.SBOX[O>>>16&255]]^g.INV_SUB_MIX[2][g.SBOX[O>>>8&255]]^g.INV_SUB_MIX[3][g.SBOX[255&O]]}this._nRounds=y,this._keySchedule=C,this._invKeySchedule=S},M.prototype.encryptBlockRaw=function(A){return x(A=N(A),this._keySchedule,g.SUB_MIX,g.SBOX,this._nRounds)},M.prototype.encryptBlock=function(A){var I=this.encryptBlockRaw(A),y=p.allocUnsafe(16);return y.writeUInt32BE(I[0],0),y.writeUInt32BE(I[1],4),y.writeUInt32BE(I[2],8),y.writeUInt32BE(I[3],12),y},M.prototype.decryptBlock=function(A){var I=(A=N(A))[1];A[1]=A[3],A[3]=I;var y=x(A,this._invKeySchedule,g.INV_SUB_MIX,g.INV_SBOX,this._nRounds),h=p.allocUnsafe(16);return h.writeUInt32BE(y[0],0),h.writeUInt32BE(y[3],4),h.writeUInt32BE(y[2],8),h.writeUInt32BE(y[1],12),h},M.prototype.scrub=function(){m(this._keySchedule),m(this._invKeySchedule),m(this._key)},Y.exports.AES=M},295:(Y,L,T)=>{var p=T(875),N=T(5859).Buffer,m=T(5834),x=T(9879),u=T(4504),g=T(3910),M=T(1643);function y(h,C,v,w){m.call(this);var S=N.alloc(4,0);this._cipher=new p.AES(C);var P=this._cipher.encryptBlock(S);this._ghash=new u(P),v=function(h,C,v){if(12===C.length)return h._finID=N.concat([C,N.from([0,0,0,1])]),N.concat([C,N.from([0,0,0,2])]);var w=new u(v),S=C.length,P=S%16;w.update(C),P&&w.update(N.alloc(P=16-P,0)),w.update(N.alloc(8,0));var k=8*S,O=N.alloc(8);O.writeUIntBE(k,0,8),w.update(O),h._finID=w.state;var V=N.from(h._finID);return M(V),V}(this,v,P),this._prev=N.from(v),this._cache=N.allocUnsafe(0),this._secCache=N.allocUnsafe(0),this._decrypt=w,this._alen=0,this._len=0,this._mode=h,this._authTag=null,this._called=!1}x(y,m),y.prototype._update=function(h){if(!this._called&&this._alen){var C=16-this._alen%16;C<16&&(C=N.alloc(C,0),this._ghash.update(C))}this._called=!0;var v=this._mode.encrypt(this,h);return this._ghash.update(this._decrypt?h:v),this._len+=h.length,v},y.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var h=g(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(h,C){var v=0;h.length!==C.length&&v++;for(var w=Math.min(h.length,C.length),S=0;S<w;++S)v+=h[S]^C[S];return v}(h,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=h,this._cipher.scrub()},y.prototype.getAuthTag=function(){if(this._decrypt||!N.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},y.prototype.setAuthTag=function(C){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=C},y.prototype.setAAD=function(C){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(C),this._alen+=C.length},Y.exports=y},9586:(Y,L,T)=>{var p=T(6481),N=T(3617),m=T(4946);L.createCipher=L.Cipher=p.createCipher,L.createCipheriv=L.Cipheriv=p.createCipheriv,L.createDecipher=L.Decipher=N.createDecipher,L.createDecipheriv=L.Decipheriv=N.createDecipheriv,L.listCiphers=L.getCiphers=function(){return Object.keys(m)}},3617:(Y,L,T)=>{var p=T(295),N=T(5859).Buffer,m=T(9396),x=T(9223),u=T(5834),g=T(875),M=T(2367);function I(w,S,P){u.call(this),this._cache=new y,this._last=void 0,this._cipher=new g.AES(S),this._prev=N.from(P),this._mode=w,this._autopadding=!0}function y(){this.cache=N.allocUnsafe(0)}function C(w,S,P){var k=m[w.toLowerCase()];if(!k)throw new TypeError("invalid suite type");if("string"==typeof P&&(P=N.from(P)),"GCM"!==k.mode&&P.length!==k.iv)throw new TypeError("invalid iv length "+P.length);if("string"==typeof S&&(S=N.from(S)),S.length!==k.key/8)throw new TypeError("invalid key length "+S.length);return"stream"===k.type?new x(k.module,S,P,!0):"auth"===k.type?new p(k.module,S,P,!0):new I(k.module,S,P)}T(9879)(I,u),I.prototype._update=function(w){this._cache.add(w);for(var S,P,k=[];S=this._cache.get(this._autopadding);)P=this._mode.decrypt(this,S),k.push(P);return N.concat(k)},I.prototype._final=function(){var w=this._cache.flush();if(this._autopadding)return function(w){var S=w[15];if(S<1||S>16)throw new Error("unable to decrypt data");for(var P=-1;++P<S;)if(w[P+(16-S)]!==S)throw new Error("unable to decrypt data");if(16!==S)return w.slice(0,16-S)}(this._mode.decrypt(this,w));if(w)throw new Error("data not multiple of block length")},I.prototype.setAutoPadding=function(w){return this._autopadding=!!w,this},y.prototype.add=function(w){this.cache=N.concat([this.cache,w])},y.prototype.get=function(w){var S;if(w){if(this.cache.length>16)return S=this.cache.slice(0,16),this.cache=this.cache.slice(16),S}else if(this.cache.length>=16)return S=this.cache.slice(0,16),this.cache=this.cache.slice(16),S;return null},y.prototype.flush=function(){if(this.cache.length)return this.cache},L.createDecipher=function(w,S){var P=m[w.toLowerCase()];if(!P)throw new TypeError("invalid suite type");var k=M(S,!1,P.key,P.iv);return C(w,k.key,k.iv)},L.createDecipheriv=C},6481:(Y,L,T)=>{var p=T(9396),N=T(295),m=T(5859).Buffer,x=T(9223),u=T(5834),g=T(875),M=T(2367);function I(w,S,P){u.call(this),this._cache=new h,this._cipher=new g.AES(S),this._prev=m.from(P),this._mode=w,this._autopadding=!0}T(9879)(I,u),I.prototype._update=function(w){this._cache.add(w);for(var S,P,k=[];S=this._cache.get();)P=this._mode.encrypt(this,S),k.push(P);return m.concat(k)};var y=m.alloc(16,16);function h(){this.cache=m.allocUnsafe(0)}function C(w,S,P){var k=p[w.toLowerCase()];if(!k)throw new TypeError("invalid suite type");if("string"==typeof S&&(S=m.from(S)),S.length!==k.key/8)throw new TypeError("invalid key length "+S.length);if("string"==typeof P&&(P=m.from(P)),"GCM"!==k.mode&&P.length!==k.iv)throw new TypeError("invalid iv length "+P.length);return"stream"===k.type?new x(k.module,S,P):"auth"===k.type?new N(k.module,S,P):new I(k.module,S,P)}I.prototype._final=function(){var w=this._cache.flush();if(this._autopadding)return w=this._mode.encrypt(this,w),this._cipher.scrub(),w;if(!w.equals(y))throw this._cipher.scrub(),new Error("data not multiple of block length")},I.prototype.setAutoPadding=function(w){return this._autopadding=!!w,this},h.prototype.add=function(w){this.cache=m.concat([this.cache,w])},h.prototype.get=function(){if(this.cache.length>15){var w=this.cache.slice(0,16);return this.cache=this.cache.slice(16),w}return null},h.prototype.flush=function(){for(var w=16-this.cache.length,S=m.allocUnsafe(w),P=-1;++P<w;)S.writeUInt8(w,P);return m.concat([this.cache,S])},L.createCipheriv=C,L.createCipher=function(w,S){var P=p[w.toLowerCase()];if(!P)throw new TypeError("invalid suite type");var k=M(S,!1,P.key,P.iv);return C(w,k.key,k.iv)}},4504:(Y,L,T)=>{var p=T(5859).Buffer,N=p.alloc(16,0);function x(g){var M=p.allocUnsafe(16);return M.writeUInt32BE(g[0]>>>0,0),M.writeUInt32BE(g[1]>>>0,4),M.writeUInt32BE(g[2]>>>0,8),M.writeUInt32BE(g[3]>>>0,12),M}function u(g){this.h=g,this.state=p.alloc(16,0),this.cache=p.allocUnsafe(0)}u.prototype.ghash=function(g){for(var M=-1;++M<g.length;)this.state[M]^=g[M];this._multiply()},u.prototype._multiply=function(){for(var A,y,g=function(g){return[g.readUInt32BE(0),g.readUInt32BE(4),g.readUInt32BE(8),g.readUInt32BE(12)]}(this.h),M=[0,0,0,0],h=-1;++h<128;){for(0!=(this.state[~~(h/8)]&1<<7-h%8)&&(M[0]^=g[0],M[1]^=g[1],M[2]^=g[2],M[3]^=g[3]),y=0!=(1&g[3]),A=3;A>0;A--)g[A]=g[A]>>>1|(1&g[A-1])<<31;g[0]=g[0]>>>1,y&&(g[0]=g[0]^225<<24)}this.state=x(M)},u.prototype.update=function(g){this.cache=p.concat([this.cache,g]);for(var M;this.cache.length>=16;)M=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(M)},u.prototype.final=function(g,M){return this.cache.length&&this.ghash(p.concat([this.cache,N],16)),this.ghash(x([0,g,0,M])),this.state},Y.exports=u},1643:Y=>{Y.exports=function(T){for(var N,p=T.length;p--;){if(255!==(N=T.readUInt8(p))){N++,T.writeUInt8(N,p);break}T.writeUInt8(0,p)}}},4552:(Y,L,T)=>{var p=T(3910);L.encrypt=function(N,m){var x=p(m,N._prev);return N._prev=N._cipher.encryptBlock(x),N._prev},L.decrypt=function(N,m){var x=N._prev;N._prev=m;var u=N._cipher.decryptBlock(m);return p(u,x)}},7606:(Y,L,T)=>{var p=T(5859).Buffer,N=T(3910);function m(x,u,g){var M=u.length,A=N(u,x._cache);return x._cache=x._cache.slice(M),x._prev=p.concat([x._prev,g?u:A]),A}L.encrypt=function(x,u,g){for(var A,M=p.allocUnsafe(0);u.length;){if(0===x._cache.length&&(x._cache=x._cipher.encryptBlock(x._prev),x._prev=p.allocUnsafe(0)),!(x._cache.length<=u.length)){M=p.concat([M,m(x,u,g)]);break}M=p.concat([M,m(x,u.slice(0,A=x._cache.length),g)]),u=u.slice(A)}return M}},7850:(Y,L,T)=>{var p=T(5859).Buffer;function N(x,u,g){for(var h,C,A=-1,y=0;++A<8;)y+=(128&(C=x._cipher.encryptBlock(x._prev)[0]^(h=u&1<<7-A?128:0)))>>A%8,x._prev=m(x._prev,g?h:C);return y}function m(x,u){var g=x.length,M=-1,A=p.allocUnsafe(x.length);for(x=p.concat([x,p.from([u])]);++M<g;)A[M]=x[M]<<1|x[M+1]>>7;return A}L.encrypt=function(x,u,g){for(var M=u.length,A=p.allocUnsafe(M),I=-1;++I<M;)A[I]=N(x,u[I],g);return A}},6377:(Y,L,T)=>{var p=T(5859).Buffer;function N(m,x,u){var M=m._cipher.encryptBlock(m._prev)[0]^x;return m._prev=p.concat([m._prev.slice(1),p.from([u?x:M])]),M}L.encrypt=function(m,x,u){for(var g=x.length,M=p.allocUnsafe(g),A=-1;++A<g;)M[A]=N(m,x[A],u);return M}},9306:(Y,L,T)=>{var p=T(3910),N=T(5859).Buffer,m=T(1643);function x(g){var M=g._cipher.encryptBlockRaw(g._prev);return m(g._prev),M}L.encrypt=function(g,M){var A=Math.ceil(M.length/16),I=g._cache.length;g._cache=N.concat([g._cache,N.allocUnsafe(16*A)]);for(var y=0;y<A;y++){var h=x(g),C=I+16*y;g._cache.writeUInt32BE(h[0],C+0),g._cache.writeUInt32BE(h[1],C+4),g._cache.writeUInt32BE(h[2],C+8),g._cache.writeUInt32BE(h[3],C+12)}var v=g._cache.slice(0,M.length);return g._cache=g._cache.slice(M.length),p(M,v)}},8562:(Y,L)=>{L.encrypt=function(T,p){return T._cipher.encryptBlock(p)},L.decrypt=function(T,p){return T._cipher.decryptBlock(p)}},9396:(Y,L,T)=>{var p={ECB:T(8562),CBC:T(4552),CFB:T(7606),CFB8:T(6377),CFB1:T(7850),OFB:T(7461),CTR:T(9306),GCM:T(9306)},N=T(4946);for(var m in N)N[m].module=p[N[m].mode];Y.exports=N},7461:(Y,L,T)=>{var p=T(3910);function N(m){return m._prev=m._cipher.encryptBlock(m._prev),m._prev}L.encrypt=function(m,x){for(;m._cache.length<x.length;)m._cache=Buffer.concat([m._cache,N(m)]);var u=m._cache.slice(0,x.length);return m._cache=m._cache.slice(x.length),p(x,u)}},9223:(Y,L,T)=>{var p=T(875),N=T(5859).Buffer,m=T(5834);function u(g,M,A,I){m.call(this),this._cipher=new p.AES(M),this._prev=N.from(A),this._cache=N.allocUnsafe(0),this._secCache=N.allocUnsafe(0),this._decrypt=I,this._mode=g}T(9879)(u,m),u.prototype._update=function(g){return this._mode.encrypt(this,g,this._decrypt)},u.prototype._final=function(){this._cipher.scrub()},Y.exports=u},7991:(Y,L,T)=>{var p=T(3796),N=T(9586),m=T(9396),x=T(3908),u=T(2367);function A(h,C,v){if(h=h.toLowerCase(),m[h])return N.createCipheriv(h,C,v);if(x[h])return new p({key:C,iv:v,mode:h});throw new TypeError("invalid suite type")}function I(h,C,v){if(h=h.toLowerCase(),m[h])return N.createDecipheriv(h,C,v);if(x[h])return new p({key:C,iv:v,mode:h,decrypt:!0});throw new TypeError("invalid suite type")}L.createCipher=L.Cipher=function(h,C){var v,w;if(h=h.toLowerCase(),m[h])v=m[h].key,w=m[h].iv;else{if(!x[h])throw new TypeError("invalid suite type");v=8*x[h].key,w=x[h].iv}var S=u(C,!1,v,w);return A(h,S.key,S.iv)},L.createCipheriv=L.Cipheriv=A,L.createDecipher=L.Decipher=function(h,C){var v,w;if(h=h.toLowerCase(),m[h])v=m[h].key,w=m[h].iv;else{if(!x[h])throw new TypeError("invalid suite type");v=8*x[h].key,w=x[h].iv}var S=u(C,!1,v,w);return I(h,S.key,S.iv)},L.createDecipheriv=L.Decipheriv=I,L.listCiphers=L.getCiphers=function(){return Object.keys(x).concat(N.getCiphers())}},3796:(Y,L,T)=>{var p=T(5834),N=T(8534),m=T(9879),x=T(5859).Buffer,u={"des-ede3-cbc":N.CBC.instantiate(N.EDE),"des-ede3":N.EDE,"des-ede-cbc":N.CBC.instantiate(N.EDE),"des-ede":N.EDE,"des-cbc":N.CBC.instantiate(N.DES),"des-ecb":N.DES};function g(M){p.call(this);var y,A=M.mode.toLowerCase(),I=u[A];y=M.decrypt?"decrypt":"encrypt";var h=M.key;x.isBuffer(h)||(h=x.from(h)),("des-ede"===A||"des-ede-cbc"===A)&&(h=x.concat([h,h.slice(0,8)]));var C=M.iv;x.isBuffer(C)||(C=x.from(C)),this._des=I.create({key:h,iv:C,type:y})}u.des=u["des-cbc"],u.des3=u["des-ede3-cbc"],Y.exports=g,m(g,p),g.prototype._update=function(M){return x.from(this._des.update(M))},g.prototype._final=function(){return x.from(this._des.final())}},3908:(Y,L)=>{L["des-ecb"]={key:8,iv:0},L["des-cbc"]=L.des={key:8,iv:8},L["des-ede3-cbc"]=L.des3={key:24,iv:8},L["des-ede3"]={key:24,iv:0},L["des-ede-cbc"]={key:16,iv:8},L["des-ede"]={key:16,iv:0}},5842:(Y,L,T)=>{var p=T(2630),N=T(6589);function x(g){var A,M=g.modulus.byteLength();do{A=new p(N(M))}while(A.cmp(g.modulus)>=0||!A.umod(g.prime1)||!A.umod(g.prime2));return A}function u(g,M){var A=function(g){var M=x(g);return{blinder:M.toRed(p.mont(g.modulus)).redPow(new p(g.publicExponent)).fromRed(),unblinder:M.invm(g.modulus)}}(M),I=M.modulus.byteLength(),y=new p(g).mul(A.blinder).umod(M.modulus),h=y.toRed(p.mont(M.prime1)),C=y.toRed(p.mont(M.prime2)),v=M.coefficient,w=M.prime1,S=M.prime2,P=h.redPow(M.exponent1).fromRed(),k=C.redPow(M.exponent2).fromRed(),O=P.isub(k).imul(v).umod(w).imul(S);return k.iadd(O).imul(A.unblinder).umod(M.modulus).toArrayLike(Buffer,"be",I)}u.getr=x,Y.exports=u},6380:(Y,L,T)=>{Y.exports=T(8770)},3566:(Y,L,T)=>{var p=T(6329).Buffer,N=T(2506),m=T(8300),x=T(9879),u=T(7052),g=T(8022),M=T(8770);function A(C){m.Writable.call(this);var v=M[C];if(!v)throw new Error("Unknown message digest");this._hashType=v.hash,this._hash=N(v.hash),this._tag=v.id,this._signType=v.sign}function I(C){m.Writable.call(this);var v=M[C];if(!v)throw new Error("Unknown message digest");this._hash=N(v.hash),this._tag=v.id,this._signType=v.sign}function y(C){return new A(C)}function h(C){return new I(C)}Object.keys(M).forEach(function(C){M[C].id=p.from(M[C].id,"hex"),M[C.toLowerCase()]=M[C]}),x(A,m.Writable),A.prototype._write=function(v,w,S){this._hash.update(v),S()},A.prototype.update=function(v,w){return"string"==typeof v&&(v=p.from(v,w)),this._hash.update(v),this},A.prototype.sign=function(v,w){this.end();var S=this._hash.digest(),P=u(S,v,this._hashType,this._signType,this._tag);return w?P.toString(w):P},x(I,m.Writable),I.prototype._write=function(v,w,S){this._hash.update(v),S()},I.prototype.update=function(v,w){return"string"==typeof v&&(v=p.from(v,w)),this._hash.update(v),this},I.prototype.verify=function(v,w,S){"string"==typeof w&&(w=p.from(w,S)),this.end();var P=this._hash.digest();return g(w,P,v,this._signType,this._tag)},Y.exports={Sign:y,Verify:h,createSign:y,createVerify:h}},7052:(Y,L,T)=>{var p=T(6329).Buffer,N=T(5903),m=T(5842),x=T(5247).ec,u=T(2630),g=T(1997),M=T(1308);function C(k,O,V,U){if((k=p.from(k.toArray())).length<O.byteLength()){var B=p.alloc(O.byteLength()-k.length);k=p.concat([B,k])}var H=V.length,W=function(k,O){k=(k=v(k,O)).mod(O);var V=p.from(k.toArray());if(V.length<O.byteLength()){var U=p.alloc(O.byteLength()-V.length);V=p.concat([U,V])}return V}(V,O),te=p.alloc(H);te.fill(1);var $=p.alloc(H);return $=N(U,$).update(te).update(p.from([0])).update(k).update(W).digest(),te=N(U,$).update(te).digest(),{k:$=N(U,$).update(te).update(p.from([1])).update(k).update(W).digest(),v:te=N(U,$).update(te).digest()}}function v(k,O){var V=new u(k),U=(k.length<<3)-O.bitLength();return U>0&&V.ishrn(U),V}function S(k,O,V){var U,B;do{for(U=p.alloc(0);8*U.length<k.bitLength();)O.v=N(V,O.k).update(O.v).digest(),U=p.concat([U,O.v]);B=v(U,k),O.k=N(V,O.k).update(O.v).update(p.from([0])).digest(),O.v=N(V,O.k).update(O.v).digest()}while(-1!==B.cmp(k));return B}function P(k,O,V,U){return k.toRed(u.mont(V)).redPow(O).fromRed().mod(U)}Y.exports=function(k,O,V,U,B){var H=g(O);if(H.curve){if("ecdsa"!==U&&"ecdsa/rsa"!==U)throw new Error("wrong private key type");return function(k,O){var V=M[O.curve.join(".")];if(!V)throw new Error("unknown curve "+O.curve.join("."));var H=new x(V).keyFromPrivate(O.privateKey).sign(k);return p.from(H.toDER())}(k,H)}if("dsa"===H.type){if("dsa"!==U)throw new Error("wrong private key type");return function(k,O,V){for(var $,U=O.params.priv_key,B=O.params.p,H=O.params.q,W=O.params.g,te=new u(0),pe=v(k,H).mod(H),R=!1,r=C(U,H,k,V);!1===R;)te=P(W,$=S(H,r,V),B,H),0===(R=$.invm(H).imul(pe.add(U.mul(te))).mod(H)).cmpn(0)&&(R=!1,te=new u(0));return function(k,O){k=k.toArray(),O=O.toArray(),128&k[0]&&(k=[0].concat(k)),128&O[0]&&(O=[0].concat(O));var U=[48,k.length+O.length+4,2,k.length];return U=U.concat(k,[2,O.length],O),p.from(U)}(te,R)}(k,H,V)}if("rsa"!==U&&"ecdsa/rsa"!==U)throw new Error("wrong private key type");k=p.concat([B,k]);for(var W=H.modulus.byteLength(),te=[0,1];k.length+te.length+1<W;)te.push(255);te.push(0);for(var $=-1;++$<k.length;)te.push(k[$]);return m(te,H)},Y.exports.getKey=C,Y.exports.makeKey=S},8022:(Y,L,T)=>{var p=T(6329).Buffer,N=T(2630),m=T(5247).ec,x=T(1997),u=T(1308);function I(y,h){if(y.cmpn(0)<=0)throw new Error("invalid sig");if(y.cmp(h)>=h)throw new Error("invalid sig")}Y.exports=function(y,h,C,v,w){var S=x(C);if("ec"===S.type){if("ecdsa"!==v&&"ecdsa/rsa"!==v)throw new Error("wrong public key type");return function(y,h,C){var v=u[C.data.algorithm.curve.join(".")];if(!v)throw new Error("unknown curve "+C.data.algorithm.curve.join("."));return new m(v).verify(h,y,C.data.subjectPrivateKey.data)}(y,h,S)}if("dsa"===S.type){if("dsa"!==v)throw new Error("wrong public key type");return function(y,h,C){var v=C.data.p,w=C.data.q,S=C.data.g,P=C.data.pub_key,k=x.signature.decode(y,"der"),O=k.s,V=k.r;I(O,w),I(V,w);var U=N.mont(v),B=O.invm(w);return 0===S.toRed(U).redPow(new N(h).mul(B).mod(w)).fromRed().mul(P.toRed(U).redPow(V.mul(B).mod(w)).fromRed()).mod(v).mod(w).cmp(V)}(y,h,S)}if("rsa"!==v&&"ecdsa/rsa"!==v)throw new Error("wrong public key type");h=p.concat([w,h]);for(var P=S.modulus.byteLength(),k=[1],O=0;h.length+k.length+2<P;)k.push(255),O++;k.push(0);for(var V=-1;++V<h.length;)k.push(h[V]);k=p.from(k);var U=N.mont(S.modulus);y=(y=new N(y).toRed(U)).redPow(new N(S.publicExponent)),y=p.from(y.fromRed().toArray());var B=O<8?1:0;for(P=Math.min(y.length,k.length),y.length!==k.length&&(B=1),V=-1;++V<P;)B|=y[V]^k[V];return 0===B}},6329:(Y,L,T)=>{var p=T(3875),N=p.Buffer;function m(u,g){for(var M in u)g[M]=u[M]}function x(u,g,M){return N(u,g,M)}N.from&&N.alloc&&N.allocUnsafe&&N.allocUnsafeSlow?Y.exports=p:(m(p,L),L.Buffer=x),x.prototype=Object.create(N.prototype),m(N,x),x.from=function(u,g,M){if("number"==typeof u)throw new TypeError("Argument must not be a number");return N(u,g,M)},x.alloc=function(u,g,M){if("number"!=typeof u)throw new TypeError("Argument must be a number");var A=N(u);return void 0!==g?"string"==typeof M?A.fill(g,M):A.fill(g):A.fill(0),A},x.allocUnsafe=function(u){if("number"!=typeof u)throw new TypeError("Argument must be a number");return N(u)},x.allocUnsafeSlow=function(u){if("number"!=typeof u)throw new TypeError("Argument must be a number");return p.SlowBuffer(u)}},3910:Y=>{Y.exports=function(T,p){for(var N=Math.min(T.length,p.length),m=new Buffer(N),x=0;x<N;++x)m[x]=T[x]^p[x];return m}},3875:(Y,L,T)=>{"use strict";var p=T(6434),N=T(2658),m="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;L.Buffer=M,L.SlowBuffer=function(re){return+re!=re&&(re=0),M.alloc(+re)},L.INSPECT_MAX_BYTES=50;var x=2147483647;function g(re){if(re>x)throw new RangeError('The value "'+re+'" is invalid for option "size"');var ee=new Uint8Array(re);return Object.setPrototypeOf(ee,M.prototype),ee}function M(re,ee,Z){if("number"==typeof re){if("string"==typeof ee)throw new TypeError('The "string" argument must be of type string. Received type number');return h(re)}return A(re,ee,Z)}function A(re,ee,Z){if("string"==typeof re)return function(re,ee){if(("string"!=typeof ee||""===ee)&&(ee="utf8"),!M.isEncoding(ee))throw new TypeError("Unknown encoding: "+ee);var Z=0|V(re,ee),ue=g(Z),Re=ue.write(re,ee);return Re!==Z&&(ue=ue.slice(0,Re)),ue}(re,ee);if(ArrayBuffer.isView(re))return function(re){if(oe(re,Uint8Array)){var ee=new Uint8Array(re);return S(ee.buffer,ee.byteOffset,ee.byteLength)}return v(re)}(re);if(null==re)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof re);if(oe(re,ArrayBuffer)||re&&oe(re.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(oe(re,SharedArrayBuffer)||re&&oe(re.buffer,SharedArrayBuffer)))return S(re,ee,Z);if("number"==typeof re)throw new TypeError('The "value" argument must not be of type number. Received type number');var ue=re.valueOf&&re.valueOf();if(null!=ue&&ue!==re)return M.from(ue,ee,Z);var Re=function(re){if(M.isBuffer(re)){var ee=0|k(re.length),Z=g(ee);return 0===Z.length||re.copy(Z,0,0,ee),Z}return void 0!==re.length?"number"!=typeof re.length||we(re.length)?g(0):v(re):"Buffer"===re.type&&Array.isArray(re.data)?v(re.data):void 0}(re);if(Re)return Re;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof re[Symbol.toPrimitive])return M.from(re[Symbol.toPrimitive]("string"),ee,Z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof re)}function I(re){if("number"!=typeof re)throw new TypeError('"size" argument must be of type number');if(re<0)throw new RangeError('The value "'+re+'" is invalid for option "size"')}function h(re){return I(re),g(re<0?0:0|k(re))}function v(re){for(var ee=re.length<0?0:0|k(re.length),Z=g(ee),ue=0;ue<ee;ue+=1)Z[ue]=255&re[ue];return Z}function S(re,ee,Z){if(ee<0||re.byteLength<ee)throw new RangeError('"offset" is outside of buffer bounds');if(re.byteLength<ee+(Z||0))throw new RangeError('"length" is outside of buffer bounds');var ue;return ue=void 0===ee&&void 0===Z?new Uint8Array(re):void 0===Z?new Uint8Array(re,ee):new Uint8Array(re,ee,Z),Object.setPrototypeOf(ue,M.prototype),ue}function k(re){if(re>=x)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+x.toString(16)+" bytes");return 0|re}function V(re,ee){if(M.isBuffer(re))return re.length;if(ArrayBuffer.isView(re)||oe(re,ArrayBuffer))return re.byteLength;if("string"!=typeof re)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof re);var Z=re.length,ue=arguments.length>2&&!0===arguments[2];if(!ue&&0===Z)return 0;for(var Re=!1;;)switch(ee){case"ascii":case"latin1":case"binary":return Z;case"utf8":case"utf-8":return fe(re).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Z;case"hex":return Z>>>1;case"base64":return xe(re).length;default:if(Re)return ue?-1:fe(re).length;ee=(""+ee).toLowerCase(),Re=!0}}function U(re,ee,Z){var ue=!1;if((void 0===ee||ee<0)&&(ee=0),ee>this.length||((void 0===Z||Z>this.length)&&(Z=this.length),Z<=0)||(Z>>>=0)<=(ee>>>=0))return"";for(re||(re="utf8");;)switch(re){case"hex":return d(this,ee,Z);case"utf8":case"utf-8":return l(this,ee,Z);case"ascii":return _(this,ee,Z);case"latin1":case"binary":return D(this,ee,Z);case"base64":return s(this,ee,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i(this,ee,Z);default:if(ue)throw new TypeError("Unknown encoding: "+re);re=(re+"").toLowerCase(),ue=!0}}function B(re,ee,Z){var ue=re[ee];re[ee]=re[Z],re[Z]=ue}function H(re,ee,Z,ue,Re){if(0===re.length)return-1;if("string"==typeof Z?(ue=Z,Z=0):Z>2147483647?Z=2147483647:Z<-2147483648&&(Z=-2147483648),we(Z=+Z)&&(Z=Re?0:re.length-1),Z<0&&(Z=re.length+Z),Z>=re.length){if(Re)return-1;Z=re.length-1}else if(Z<0){if(!Re)return-1;Z=0}if("string"==typeof ee&&(ee=M.from(ee,ue)),M.isBuffer(ee))return 0===ee.length?-1:W(re,ee,Z,ue,Re);if("number"==typeof ee)return ee&=255,"function"==typeof Uint8Array.prototype.indexOf?Re?Uint8Array.prototype.indexOf.call(re,ee,Z):Uint8Array.prototype.lastIndexOf.call(re,ee,Z):W(re,[ee],Z,ue,Re);throw new TypeError("val must be string, number or Buffer")}function W(re,ee,Z,ue,Re){var _e,Te=1,Ee=re.length,$e=ee.length;if(void 0!==ue&&("ucs2"===(ue=String(ue).toLowerCase())||"ucs-2"===ue||"utf16le"===ue||"utf-16le"===ue)){if(re.length<2||ee.length<2)return-1;Te=2,Ee/=2,$e/=2,Z/=2}function Ne(Ct,He){return 1===Te?Ct[He]:Ct.readUInt16BE(He*Te)}if(Re){var Be=-1;for(_e=Z;_e<Ee;_e++)if(Ne(re,_e)===Ne(ee,-1===Be?0:_e-Be)){if(-1===Be&&(Be=_e),_e-Be+1===$e)return Be*Te}else-1!==Be&&(_e-=_e-Be),Be=-1}else for(Z+$e>Ee&&(Z=Ee-$e),_e=Z;_e>=0;_e--){for(var Ae=!0,Le=0;Le<$e;Le++)if(Ne(re,_e+Le)!==Ne(ee,Le)){Ae=!1;break}if(Ae)return _e}return-1}function te(re,ee,Z,ue){Z=Number(Z)||0;var Re=re.length-Z;ue?(ue=Number(ue))>Re&&(ue=Re):ue=Re;var Te=ee.length;ue>Te/2&&(ue=Te/2);for(var Ee=0;Ee<ue;++Ee){var $e=parseInt(ee.substr(2*Ee,2),16);if(we($e))return Ee;re[Z+Ee]=$e}return Ee}function $(re,ee,Z,ue){return Ce(fe(ee,re.length-Z),re,Z,ue)}function pe(re,ee,Z,ue){return Ce(function(re){for(var ee=[],Z=0;Z<re.length;++Z)ee.push(255&re.charCodeAt(Z));return ee}(ee),re,Z,ue)}function R(re,ee,Z,ue){return Ce(xe(ee),re,Z,ue)}function r(re,ee,Z,ue){return Ce(function(re,ee){for(var Z,ue,Te=[],Ee=0;Ee<re.length&&!((ee-=2)<0);++Ee)ue=(Z=re.charCodeAt(Ee))>>8,Te.push(Z%256),Te.push(ue);return Te}(ee,re.length-Z),re,Z,ue)}function s(re,ee,Z){return p.fromByteArray(0===ee&&Z===re.length?re:re.slice(ee,Z))}function l(re,ee,Z){Z=Math.min(re.length,Z);for(var ue=[],Re=ee;Re<Z;){var Ne,_e,Be,Ae,Te=re[Re],Ee=null,$e=Te>239?4:Te>223?3:Te>191?2:1;if(Re+$e<=Z)switch($e){case 1:Te<128&&(Ee=Te);break;case 2:128==(192&(Ne=re[Re+1]))&&(Ae=(31&Te)<<6|63&Ne)>127&&(Ee=Ae);break;case 3:_e=re[Re+2],128==(192&(Ne=re[Re+1]))&&128==(192&_e)&&(Ae=(15&Te)<<12|(63&Ne)<<6|63&_e)>2047&&(Ae<55296||Ae>57343)&&(Ee=Ae);break;case 4:_e=re[Re+2],Be=re[Re+3],128==(192&(Ne=re[Re+1]))&&128==(192&_e)&&128==(192&Be)&&(Ae=(15&Te)<<18|(63&Ne)<<12|(63&_e)<<6|63&Be)>65535&&Ae<1114112&&(Ee=Ae)}null===Ee?(Ee=65533,$e=1):Ee>65535&&(ue.push((Ee-=65536)>>>10&1023|55296),Ee=56320|1023&Ee),ue.push(Ee),Re+=$e}return function(re){var ee=re.length;if(ee<=a)return String.fromCharCode.apply(String,re);for(var Z="",ue=0;ue<ee;)Z+=String.fromCharCode.apply(String,re.slice(ue,ue+=a));return Z}(ue)}L.kMaxLength=x,!(M.TYPED_ARRAY_SUPPORT=function(){try{var re=new Uint8Array(1),ee={foo:function(){return 42}};return Object.setPrototypeOf(ee,Uint8Array.prototype),Object.setPrototypeOf(re,ee),42===re.foo()}catch(Z){return!1}}())&&"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(M.prototype,"parent",{enumerable:!0,get:function(){if(M.isBuffer(this))return this.buffer}}),Object.defineProperty(M.prototype,"offset",{enumerable:!0,get:function(){if(M.isBuffer(this))return this.byteOffset}}),M.poolSize=8192,M.from=function(re,ee,Z){return A(re,ee,Z)},Object.setPrototypeOf(M.prototype,Uint8Array.prototype),Object.setPrototypeOf(M,Uint8Array),M.alloc=function(re,ee,Z){return function(re,ee,Z){return I(re),re<=0?g(re):void 0!==ee?"string"==typeof Z?g(re).fill(ee,Z):g(re).fill(ee):g(re)}(re,ee,Z)},M.allocUnsafe=function(re){return h(re)},M.allocUnsafeSlow=function(re){return h(re)},M.isBuffer=function(ee){return null!=ee&&!0===ee._isBuffer&&ee!==M.prototype},M.compare=function(ee,Z){if(oe(ee,Uint8Array)&&(ee=M.from(ee,ee.offset,ee.byteLength)),oe(Z,Uint8Array)&&(Z=M.from(Z,Z.offset,Z.byteLength)),!M.isBuffer(ee)||!M.isBuffer(Z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ee===Z)return 0;for(var ue=ee.length,Re=Z.length,Te=0,Ee=Math.min(ue,Re);Te<Ee;++Te)if(ee[Te]!==Z[Te]){ue=ee[Te],Re=Z[Te];break}return ue<Re?-1:Re<ue?1:0},M.isEncoding=function(ee){switch(String(ee).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},M.concat=function(ee,Z){if(!Array.isArray(ee))throw new TypeError('"list" argument must be an Array of Buffers');if(0===ee.length)return M.alloc(0);var ue;if(void 0===Z)for(Z=0,ue=0;ue<ee.length;++ue)Z+=ee[ue].length;var Re=M.allocUnsafe(Z),Te=0;for(ue=0;ue<ee.length;++ue){var Ee=ee[ue];if(oe(Ee,Uint8Array))Te+Ee.length>Re.length?M.from(Ee).copy(Re,Te):Uint8Array.prototype.set.call(Re,Ee,Te);else{if(!M.isBuffer(Ee))throw new TypeError('"list" argument must be an Array of Buffers');Ee.copy(Re,Te)}Te+=Ee.length}return Re},M.byteLength=V,M.prototype._isBuffer=!0,M.prototype.swap16=function(){var ee=this.length;if(ee%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Z=0;Z<ee;Z+=2)B(this,Z,Z+1);return this},M.prototype.swap32=function(){var ee=this.length;if(ee%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Z=0;Z<ee;Z+=4)B(this,Z,Z+3),B(this,Z+1,Z+2);return this},M.prototype.swap64=function(){var ee=this.length;if(ee%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Z=0;Z<ee;Z+=8)B(this,Z,Z+7),B(this,Z+1,Z+6),B(this,Z+2,Z+5),B(this,Z+3,Z+4);return this},M.prototype.toLocaleString=M.prototype.toString=function(){var ee=this.length;return 0===ee?"":0===arguments.length?l(this,0,ee):U.apply(this,arguments)},M.prototype.equals=function(ee){if(!M.isBuffer(ee))throw new TypeError("Argument must be a Buffer");return this===ee||0===M.compare(this,ee)},M.prototype.inspect=function(){var ee="",Z=L.INSPECT_MAX_BYTES;return ee=this.toString("hex",0,Z).replace(/(.{2})/g,"$1 ").trim(),this.length>Z&&(ee+=" ... "),"<Buffer "+ee+">"},m&&(M.prototype[m]=M.prototype.inspect),M.prototype.compare=function(ee,Z,ue,Re,Te){if(oe(ee,Uint8Array)&&(ee=M.from(ee,ee.offset,ee.byteLength)),!M.isBuffer(ee))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ee);if(void 0===Z&&(Z=0),void 0===ue&&(ue=ee?ee.length:0),void 0===Re&&(Re=0),void 0===Te&&(Te=this.length),Z<0||ue>ee.length||Re<0||Te>this.length)throw new RangeError("out of range index");if(Re>=Te&&Z>=ue)return 0;if(Re>=Te)return-1;if(Z>=ue)return 1;if(this===ee)return 0;for(var Ee=(Te>>>=0)-(Re>>>=0),$e=(ue>>>=0)-(Z>>>=0),Ne=Math.min(Ee,$e),_e=this.slice(Re,Te),Be=ee.slice(Z,ue),Ae=0;Ae<Ne;++Ae)if(_e[Ae]!==Be[Ae]){Ee=_e[Ae],$e=Be[Ae];break}return Ee<$e?-1:$e<Ee?1:0},M.prototype.includes=function(ee,Z,ue){return-1!==this.indexOf(ee,Z,ue)},M.prototype.indexOf=function(ee,Z,ue){return H(this,ee,Z,ue,!0)},M.prototype.lastIndexOf=function(ee,Z,ue){return H(this,ee,Z,ue,!1)},M.prototype.write=function(ee,Z,ue,Re){if(void 0===Z)Re="utf8",ue=this.length,Z=0;else if(void 0===ue&&"string"==typeof Z)Re=Z,ue=this.length,Z=0;else{if(!isFinite(Z))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");Z>>>=0,isFinite(ue)?(ue>>>=0,void 0===Re&&(Re="utf8")):(Re=ue,ue=void 0)}var Te=this.length-Z;if((void 0===ue||ue>Te)&&(ue=Te),ee.length>0&&(ue<0||Z<0)||Z>this.length)throw new RangeError("Attempt to write outside buffer bounds");Re||(Re="utf8");for(var Ee=!1;;)switch(Re){case"hex":return te(this,ee,Z,ue);case"utf8":case"utf-8":return $(this,ee,Z,ue);case"ascii":case"latin1":case"binary":return pe(this,ee,Z,ue);case"base64":return R(this,ee,Z,ue);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r(this,ee,Z,ue);default:if(Ee)throw new TypeError("Unknown encoding: "+Re);Re=(""+Re).toLowerCase(),Ee=!0}},M.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var a=4096;function _(re,ee,Z){var ue="";Z=Math.min(re.length,Z);for(var Re=ee;Re<Z;++Re)ue+=String.fromCharCode(127&re[Re]);return ue}function D(re,ee,Z){var ue="";Z=Math.min(re.length,Z);for(var Re=ee;Re<Z;++Re)ue+=String.fromCharCode(re[Re]);return ue}function d(re,ee,Z){var ue=re.length;(!ee||ee<0)&&(ee=0),(!Z||Z<0||Z>ue)&&(Z=ue);for(var Re="",Te=ee;Te<Z;++Te)Re+=ye[re[Te]];return Re}function i(re,ee,Z){for(var ue=re.slice(ee,Z),Re="",Te=0;Te<ue.length-1;Te+=2)Re+=String.fromCharCode(ue[Te]+256*ue[Te+1]);return Re}function b(re,ee,Z){if(re%1!=0||re<0)throw new RangeError("offset is not uint");if(re+ee>Z)throw new RangeError("Trying to access beyond buffer length")}function z(re,ee,Z,ue,Re,Te){if(!M.isBuffer(re))throw new TypeError('"buffer" argument must be a Buffer instance');if(ee>Re||ee<Te)throw new RangeError('"value" argument is out of bounds');if(Z+ue>re.length)throw new RangeError("Index out of range")}function q(re,ee,Z,ue,Re,Te){if(Z+ue>re.length)throw new RangeError("Index out of range");if(Z<0)throw new RangeError("Index out of range")}function J(re,ee,Z,ue,Re){return ee=+ee,Z>>>=0,Re||q(re,0,Z,4),N.write(re,ee,Z,ue,23,4),Z+4}function ge(re,ee,Z,ue,Re){return ee=+ee,Z>>>=0,Re||q(re,0,Z,8),N.write(re,ee,Z,ue,52,8),Z+8}M.prototype.slice=function(ee,Z){var ue=this.length;(ee=~~ee)<0?(ee+=ue)<0&&(ee=0):ee>ue&&(ee=ue),(Z=void 0===Z?ue:~~Z)<0?(Z+=ue)<0&&(Z=0):Z>ue&&(Z=ue),Z<ee&&(Z=ee);var Re=this.subarray(ee,Z);return Object.setPrototypeOf(Re,M.prototype),Re},M.prototype.readUintLE=M.prototype.readUIntLE=function(ee,Z,ue){ee>>>=0,Z>>>=0,ue||b(ee,Z,this.length);for(var Re=this[ee],Te=1,Ee=0;++Ee<Z&&(Te*=256);)Re+=this[ee+Ee]*Te;return Re},M.prototype.readUintBE=M.prototype.readUIntBE=function(ee,Z,ue){ee>>>=0,Z>>>=0,ue||b(ee,Z,this.length);for(var Re=this[ee+--Z],Te=1;Z>0&&(Te*=256);)Re+=this[ee+--Z]*Te;return Re},M.prototype.readUint8=M.prototype.readUInt8=function(ee,Z){return ee>>>=0,Z||b(ee,1,this.length),this[ee]},M.prototype.readUint16LE=M.prototype.readUInt16LE=function(ee,Z){return ee>>>=0,Z||b(ee,2,this.length),this[ee]|this[ee+1]<<8},M.prototype.readUint16BE=M.prototype.readUInt16BE=function(ee,Z){return ee>>>=0,Z||b(ee,2,this.length),this[ee]<<8|this[ee+1]},M.prototype.readUint32LE=M.prototype.readUInt32LE=function(ee,Z){return ee>>>=0,Z||b(ee,4,this.length),(this[ee]|this[ee+1]<<8|this[ee+2]<<16)+16777216*this[ee+3]},M.prototype.readUint32BE=M.prototype.readUInt32BE=function(ee,Z){return ee>>>=0,Z||b(ee,4,this.length),16777216*this[ee]+(this[ee+1]<<16|this[ee+2]<<8|this[ee+3])},M.prototype.readIntLE=function(ee,Z,ue){ee>>>=0,Z>>>=0,ue||b(ee,Z,this.length);for(var Re=this[ee],Te=1,Ee=0;++Ee<Z&&(Te*=256);)Re+=this[ee+Ee]*Te;return Re>=(Te*=128)&&(Re-=Math.pow(2,8*Z)),Re},M.prototype.readIntBE=function(ee,Z,ue){ee>>>=0,Z>>>=0,ue||b(ee,Z,this.length);for(var Re=Z,Te=1,Ee=this[ee+--Re];Re>0&&(Te*=256);)Ee+=this[ee+--Re]*Te;return Ee>=(Te*=128)&&(Ee-=Math.pow(2,8*Z)),Ee},M.prototype.readInt8=function(ee,Z){return ee>>>=0,Z||b(ee,1,this.length),128&this[ee]?-1*(255-this[ee]+1):this[ee]},M.prototype.readInt16LE=function(ee,Z){ee>>>=0,Z||b(ee,2,this.length);var ue=this[ee]|this[ee+1]<<8;return 32768&ue?4294901760|ue:ue},M.prototype.readInt16BE=function(ee,Z){ee>>>=0,Z||b(ee,2,this.length);var ue=this[ee+1]|this[ee]<<8;return 32768&ue?4294901760|ue:ue},M.prototype.readInt32LE=function(ee,Z){return ee>>>=0,Z||b(ee,4,this.length),this[ee]|this[ee+1]<<8|this[ee+2]<<16|this[ee+3]<<24},M.prototype.readInt32BE=function(ee,Z){return ee>>>=0,Z||b(ee,4,this.length),this[ee]<<24|this[ee+1]<<16|this[ee+2]<<8|this[ee+3]},M.prototype.readFloatLE=function(ee,Z){return ee>>>=0,Z||b(ee,4,this.length),N.read(this,ee,!0,23,4)},M.prototype.readFloatBE=function(ee,Z){return ee>>>=0,Z||b(ee,4,this.length),N.read(this,ee,!1,23,4)},M.prototype.readDoubleLE=function(ee,Z){return ee>>>=0,Z||b(ee,8,this.length),N.read(this,ee,!0,52,8)},M.prototype.readDoubleBE=function(ee,Z){return ee>>>=0,Z||b(ee,8,this.length),N.read(this,ee,!1,52,8)},M.prototype.writeUintLE=M.prototype.writeUIntLE=function(ee,Z,ue,Re){ee=+ee,Z>>>=0,ue>>>=0,Re||z(this,ee,Z,ue,Math.pow(2,8*ue)-1,0);var Ee=1,$e=0;for(this[Z]=255&ee;++$e<ue&&(Ee*=256);)this[Z+$e]=ee/Ee&255;return Z+ue},M.prototype.writeUintBE=M.prototype.writeUIntBE=function(ee,Z,ue,Re){ee=+ee,Z>>>=0,ue>>>=0,Re||z(this,ee,Z,ue,Math.pow(2,8*ue)-1,0);var Ee=ue-1,$e=1;for(this[Z+Ee]=255&ee;--Ee>=0&&($e*=256);)this[Z+Ee]=ee/$e&255;return Z+ue},M.prototype.writeUint8=M.prototype.writeUInt8=function(ee,Z,ue){return ee=+ee,Z>>>=0,ue||z(this,ee,Z,1,255,0),this[Z]=255&ee,Z+1},M.prototype.writeUint16LE=M.prototype.writeUInt16LE=function(ee,Z,ue){return ee=+ee,Z>>>=0,ue||z(this,ee,Z,2,65535,0),this[Z]=255&ee,this[Z+1]=ee>>>8,Z+2},M.prototype.writeUint16BE=M.prototype.writeUInt16BE=function(ee,Z,ue){return ee=+ee,Z>>>=0,ue||z(this,ee,Z,2,65535,0),this[Z]=ee>>>8,this[Z+1]=255&ee,Z+2},M.prototype.writeUint32LE=M.prototype.writeUInt32LE=function(ee,Z,ue){return ee=+ee,Z>>>=0,ue||z(this,ee,Z,4,4294967295,0),this[Z+3]=ee>>>24,this[Z+2]=ee>>>16,this[Z+1]=ee>>>8,this[Z]=255&ee,Z+4},M.prototype.writeUint32BE=M.prototype.writeUInt32BE=function(ee,Z,ue){return ee=+ee,Z>>>=0,ue||z(this,ee,Z,4,4294967295,0),this[Z]=ee>>>24,this[Z+1]=ee>>>16,this[Z+2]=ee>>>8,this[Z+3]=255&ee,Z+4},M.prototype.writeIntLE=function(ee,Z,ue,Re){if(ee=+ee,Z>>>=0,!Re){var Te=Math.pow(2,8*ue-1);z(this,ee,Z,ue,Te-1,-Te)}var Ee=0,$e=1,Ne=0;for(this[Z]=255&ee;++Ee<ue&&($e*=256);)ee<0&&0===Ne&&0!==this[Z+Ee-1]&&(Ne=1),this[Z+Ee]=(ee/$e>>0)-Ne&255;return Z+ue},M.prototype.writeIntBE=function(ee,Z,ue,Re){if(ee=+ee,Z>>>=0,!Re){var Te=Math.pow(2,8*ue-1);z(this,ee,Z,ue,Te-1,-Te)}var Ee=ue-1,$e=1,Ne=0;for(this[Z+Ee]=255&ee;--Ee>=0&&($e*=256);)ee<0&&0===Ne&&0!==this[Z+Ee+1]&&(Ne=1),this[Z+Ee]=(ee/$e>>0)-Ne&255;return Z+ue},M.prototype.writeInt8=function(ee,Z,ue){return ee=+ee,Z>>>=0,ue||z(this,ee,Z,1,127,-128),ee<0&&(ee=255+ee+1),this[Z]=255&ee,Z+1},M.prototype.writeInt16LE=function(ee,Z,ue){return ee=+ee,Z>>>=0,ue||z(this,ee,Z,2,32767,-32768),this[Z]=255&ee,this[Z+1]=ee>>>8,Z+2},M.prototype.writeInt16BE=function(ee,Z,ue){return ee=+ee,Z>>>=0,ue||z(this,ee,Z,2,32767,-32768),this[Z]=ee>>>8,this[Z+1]=255&ee,Z+2},M.prototype.writeInt32LE=function(ee,Z,ue){return ee=+ee,Z>>>=0,ue||z(this,ee,Z,4,2147483647,-2147483648),this[Z]=255&ee,this[Z+1]=ee>>>8,this[Z+2]=ee>>>16,this[Z+3]=ee>>>24,Z+4},M.prototype.writeInt32BE=function(ee,Z,ue){return ee=+ee,Z>>>=0,ue||z(this,ee,Z,4,2147483647,-2147483648),ee<0&&(ee=4294967295+ee+1),this[Z]=ee>>>24,this[Z+1]=ee>>>16,this[Z+2]=ee>>>8,this[Z+3]=255&ee,Z+4},M.prototype.writeFloatLE=function(ee,Z,ue){return J(this,ee,Z,!0,ue)},M.prototype.writeFloatBE=function(ee,Z,ue){return J(this,ee,Z,!1,ue)},M.prototype.writeDoubleLE=function(ee,Z,ue){return ge(this,ee,Z,!0,ue)},M.prototype.writeDoubleBE=function(ee,Z,ue){return ge(this,ee,Z,!1,ue)},M.prototype.copy=function(ee,Z,ue,Re){if(!M.isBuffer(ee))throw new TypeError("argument should be a Buffer");if(ue||(ue=0),!Re&&0!==Re&&(Re=this.length),Z>=ee.length&&(Z=ee.length),Z||(Z=0),Re>0&&Re<ue&&(Re=ue),Re===ue||0===ee.length||0===this.length)return 0;if(Z<0)throw new RangeError("targetStart out of bounds");if(ue<0||ue>=this.length)throw new RangeError("Index out of range");if(Re<0)throw new RangeError("sourceEnd out of bounds");Re>this.length&&(Re=this.length),ee.length-Z<Re-ue&&(Re=ee.length-Z+ue);var Te=Re-ue;return this===ee&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(Z,ue,Re):Uint8Array.prototype.set.call(ee,this.subarray(ue,Re),Z),Te},M.prototype.fill=function(ee,Z,ue,Re){if("string"==typeof ee){if("string"==typeof Z?(Re=Z,Z=0,ue=this.length):"string"==typeof ue&&(Re=ue,ue=this.length),void 0!==Re&&"string"!=typeof Re)throw new TypeError("encoding must be a string");if("string"==typeof Re&&!M.isEncoding(Re))throw new TypeError("Unknown encoding: "+Re);if(1===ee.length){var Te=ee.charCodeAt(0);("utf8"===Re&&Te<128||"latin1"===Re)&&(ee=Te)}}else"number"==typeof ee?ee&=255:"boolean"==typeof ee&&(ee=Number(ee));if(Z<0||this.length<Z||this.length<ue)throw new RangeError("Out of range index");if(ue<=Z)return this;var Ee;if(Z>>>=0,ue=void 0===ue?this.length:ue>>>0,ee||(ee=0),"number"==typeof ee)for(Ee=Z;Ee<ue;++Ee)this[Ee]=ee;else{var $e=M.isBuffer(ee)?ee:M.from(ee,Re),Ne=$e.length;if(0===Ne)throw new TypeError('The value "'+ee+'" is invalid for argument "value"');for(Ee=0;Ee<ue-Z;++Ee)this[Ee+Z]=$e[Ee%Ne]}return this};var me=/[^+/0-9A-Za-z-_]/g;function fe(re,ee){ee=ee||1/0;for(var Z,ue=re.length,Re=null,Te=[],Ee=0;Ee<ue;++Ee){if((Z=re.charCodeAt(Ee))>55295&&Z<57344){if(!Re){if(Z>56319){(ee-=3)>-1&&Te.push(239,191,189);continue}if(Ee+1===ue){(ee-=3)>-1&&Te.push(239,191,189);continue}Re=Z;continue}if(Z<56320){(ee-=3)>-1&&Te.push(239,191,189),Re=Z;continue}Z=65536+(Re-55296<<10|Z-56320)}else Re&&(ee-=3)>-1&&Te.push(239,191,189);if(Re=null,Z<128){if((ee-=1)<0)break;Te.push(Z)}else if(Z<2048){if((ee-=2)<0)break;Te.push(Z>>6|192,63&Z|128)}else if(Z<65536){if((ee-=3)<0)break;Te.push(Z>>12|224,Z>>6&63|128,63&Z|128)}else{if(!(Z<1114112))throw new Error("Invalid code point");if((ee-=4)<0)break;Te.push(Z>>18|240,Z>>12&63|128,Z>>6&63|128,63&Z|128)}}return Te}function xe(re){return p.toByteArray(function(re){if((re=(re=re.split("=")[0]).trim().replace(me,"")).length<2)return"";for(;re.length%4!=0;)re+="=";return re}(re))}function Ce(re,ee,Z,ue){for(var Re=0;Re<ue&&!(Re+Z>=ee.length||Re>=re.length);++Re)ee[Re+Z]=re[Re];return Re}function oe(re,ee){return re instanceof ee||null!=re&&null!=re.constructor&&null!=re.constructor.name&&re.constructor.name===ee.name}function we(re){return re!=re}var ye=function(){for(var re="0123456789abcdef",ee=new Array(256),Z=0;Z<16;++Z)for(var ue=16*Z,Re=0;Re<16;++Re)ee[ue+Re]=re[Z]+re[Re];return ee}()},5834:(Y,L,T)=>{var p=T(5859).Buffer,N=T(6917).Transform,m=T(2519).s;function u(g){N.call(this),this.hashMode="string"==typeof g,this.hashMode?this[g]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}T(9879)(u,N),u.prototype.update=function(g,M,A){"string"==typeof g&&(g=p.from(g,M));var I=this._update(g);return this.hashMode?this:(A&&(I=this._toString(I,A)),I)},u.prototype.setAutoPadding=function(){},u.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},u.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},u.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},u.prototype._transform=function(g,M,A){var I;try{this.hashMode?this._update(g):this.push(this._update(g))}catch(y){I=y}finally{A(I)}},u.prototype._flush=function(g){var M;try{this.push(this.__final())}catch(A){M=A}g(M)},u.prototype._finalOrDigest=function(g){var M=this.__final()||p.alloc(0);return g&&(M=this._toString(M,g,!0)),M},u.prototype._toString=function(g,M,A){if(this._decoder||(this._decoder=new m(M),this._encoding=M),this._encoding!==M)throw new Error("can't switch encodings");var I=this._decoder.write(g);return A&&(I+=this._decoder.end()),I},Y.exports=u},4892:(Y,L,T)=>{var p=T(5247),N=T(6479);Y.exports=function(M){return new x(M)};var m={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function x(g){this.curveType=m[g],this.curveType||(this.curveType={name:g}),this.curve=new p.ec(this.curveType.name),this.keys=void 0}function u(g,M,A){Array.isArray(g)||(g=g.toArray());var I=new Buffer(g);if(A&&I.length<A){var y=new Buffer(A-I.length);y.fill(0),I=Buffer.concat([y,I])}return M?I.toString(M):I}m.p224=m.secp224r1,m.p256=m.secp256r1=m.prime256v1,m.p192=m.secp192r1=m.prime192v1,m.p384=m.secp384r1,m.p521=m.secp521r1,x.prototype.generateKeys=function(g,M){return this.keys=this.curve.genKeyPair(),this.getPublicKey(g,M)},x.prototype.computeSecret=function(g,M,A){return M=M||"utf8",Buffer.isBuffer(g)||(g=new Buffer(g,M)),u(this.curve.keyFromPublic(g).getPublic().mul(this.keys.getPrivate()).getX(),A,this.curveType.byteLength)},x.prototype.getPublicKey=function(g,M){var A=this.keys.getPublic("compressed"===M,!0);return"hybrid"===M&&(A[0]=A[A.length-1]%2?7:6),u(A,g)},x.prototype.getPrivateKey=function(g){return u(this.keys.getPrivate(),g)},x.prototype.setPublicKey=function(g,M){return M=M||"utf8",Buffer.isBuffer(g)||(g=new Buffer(g,M)),this.keys._importPublic(g),this},x.prototype.setPrivateKey=function(g,M){M=M||"utf8",Buffer.isBuffer(g)||(g=new Buffer(g,M));var A=new N(g);return A=A.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(A),this}},6479:function(Y,L,T){!function(p,N){"use strict";function m(R,r){if(!R)throw new Error(r||"Assertion failed")}function x(R,r){R.super_=r;var s=function(){};s.prototype=r.prototype,R.prototype=new s,R.prototype.constructor=R}function u(R,r,s){if(u.isBN(R))return R;this.negative=0,this.words=null,this.length=0,this.red=null,null!==R&&(("le"===r||"be"===r)&&(s=r,r=10),this._init(R||0,r||10,s||"be"))}var g;"object"==typeof p?p.exports=u:N.BN=u,u.BN=u,u.wordSize=26;try{g="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:T(8623).Buffer}catch(R){}function M(R,r){var s=R.charCodeAt(r);return s>=65&&s<=70?s-55:s>=97&&s<=102?s-87:s-48&15}function A(R,r,s){var l=M(R,s);return s-1>=r&&(l|=M(R,s-1)<<4),l}function I(R,r,s,l){for(var a=0,f=Math.min(R.length,s),_=r;_<f;_++){var D=R.charCodeAt(_)-48;a*=l,a+=D>=49?D-49+10:D>=17?D-17+10:D}return a}u.isBN=function(r){return r instanceof u||null!==r&&"object"==typeof r&&r.constructor.wordSize===u.wordSize&&Array.isArray(r.words)},u.max=function(r,s){return r.cmp(s)>0?r:s},u.min=function(r,s){return r.cmp(s)<0?r:s},u.prototype._init=function(r,s,l){if("number"==typeof r)return this._initNumber(r,s,l);if("object"==typeof r)return this._initArray(r,s,l);"hex"===s&&(s=16),m(s===(0|s)&&s>=2&&s<=36);var a=0;"-"===(r=r.toString().replace(/\s+/g,""))[0]&&(a++,this.negative=1),a<r.length&&(16===s?this._parseHex(r,a,l):(this._parseBase(r,s,a),"le"===l&&this._initArray(this.toArray(),s,l)))},u.prototype._initNumber=function(r,s,l){r<0&&(this.negative=1,r=-r),r<67108864?(this.words=[67108863&r],this.length=1):r<4503599627370496?(this.words=[67108863&r,r/67108864&67108863],this.length=2):(m(r<9007199254740992),this.words=[67108863&r,r/67108864&67108863,1],this.length=3),"le"===l&&this._initArray(this.toArray(),s,l)},u.prototype._initArray=function(r,s,l){if(m("number"==typeof r.length),r.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(r.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var f,_,D=0;if("be"===l)for(a=r.length-1,f=0;a>=0;a-=3)this.words[f]|=(_=r[a]|r[a-1]<<8|r[a-2]<<16)<<D&67108863,this.words[f+1]=_>>>26-D&67108863,(D+=24)>=26&&(D-=26,f++);else if("le"===l)for(a=0,f=0;a<r.length;a+=3)this.words[f]|=(_=r[a]|r[a+1]<<8|r[a+2]<<16)<<D&67108863,this.words[f+1]=_>>>26-D&67108863,(D+=24)>=26&&(D-=26,f++);return this.strip()},u.prototype._parseHex=function(r,s,l){this.length=Math.ceil((r.length-s)/6),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var D,f=0,_=0;if("be"===l)for(a=r.length-1;a>=s;a-=2)D=A(r,s,a)<<f,this.words[_]|=67108863&D,f>=18?(f-=18,this.words[_+=1]|=D>>>26):f+=8;else for(a=(r.length-s)%2==0?s+1:s;a<r.length;a+=2)D=A(r,s,a)<<f,this.words[_]|=67108863&D,f>=18?(f-=18,this.words[_+=1]|=D>>>26):f+=8;this.strip()},u.prototype._parseBase=function(r,s,l){this.words=[0],this.length=1;for(var a=0,f=1;f<=67108863;f*=s)a++;a--,f=f/s|0;for(var _=r.length-l,D=_%a,d=Math.min(_,_-D)+l,i=0,b=l;b<d;b+=a)i=I(r,b,b+a,s),this.imuln(f),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i);if(0!==D){var z=1;for(i=I(r,b,r.length,s),b=0;b<D;b++)z*=s;this.imuln(z),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i)}this.strip()},u.prototype.copy=function(r){r.words=new Array(this.length);for(var s=0;s<this.length;s++)r.words[s]=this.words[s];r.length=this.length,r.negative=this.negative,r.red=this.red},u.prototype.clone=function(){var r=new u(null);return this.copy(r),r},u.prototype._expand=function(r){for(;this.length<r;)this.words[this.length++]=0;return this},u.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},u.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},u.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],C=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function w(R,r,s){s.negative=r.negative^R.negative;var l=R.length+r.length|0;s.length=l,l=l-1|0;var a=0|R.words[0],f=0|r.words[0],_=a*f,d=_/67108864|0;s.words[0]=67108863&_;for(var i=1;i<l;i++){for(var b=d>>>26,z=67108863&d,q=Math.min(i,r.length-1),J=Math.max(0,i-R.length+1);J<=q;J++)b+=(_=(a=0|R.words[i-J|0])*(f=0|r.words[J])+z)/67108864|0,z=67108863&_;s.words[i]=0|z,d=0|b}return 0!==d?s.words[i]=0|d:s.length--,s.strip()}u.prototype.toString=function(r,s){var l;if(s=0|s||1,16===(r=r||10)||"hex"===r){l="";for(var a=0,f=0,_=0;_<this.length;_++){var D=this.words[_],d=(16777215&(D<<a|f)).toString(16);l=0!=(f=D>>>24-a&16777215)||_!==this.length-1?y[6-d.length]+d+l:d+l,(a+=2)>=26&&(a-=26,_--)}for(0!==f&&(l=f.toString(16)+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}if(r===(0|r)&&r>=2&&r<=36){var i=h[r],b=C[r];l="";var z=this.clone();for(z.negative=0;!z.isZero();){var q=z.modn(b).toString(r);l=(z=z.idivn(b)).isZero()?q+l:y[i-q.length]+q+l}for(this.isZero()&&(l="0"+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}m(!1,"Base should be between 2 and 36")},u.prototype.toNumber=function(){var r=this.words[0];return 2===this.length?r+=67108864*this.words[1]:3===this.length&&1===this.words[2]?r+=4503599627370496+67108864*this.words[1]:this.length>2&&m(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-r:r},u.prototype.toJSON=function(){return this.toString(16)},u.prototype.toBuffer=function(r,s){return m(void 0!==g),this.toArrayLike(g,r,s)},u.prototype.toArray=function(r,s){return this.toArrayLike(Array,r,s)},u.prototype.toArrayLike=function(r,s,l){var a=this.byteLength(),f=l||Math.max(1,a);m(a<=f,"byte array longer than desired length"),m(f>0,"Requested array length <= 0"),this.strip();var d,i,_="le"===s,D=new r(f),b=this.clone();if(_){for(i=0;!b.isZero();i++)d=b.andln(255),b.iushrn(8),D[i]=d;for(;i<f;i++)D[i]=0}else{for(i=0;i<f-a;i++)D[i]=0;for(i=0;!b.isZero();i++)d=b.andln(255),b.iushrn(8),D[f-i-1]=d}return D},u.prototype._countBits=Math.clz32?function(r){return 32-Math.clz32(r)}:function(r){var s=r,l=0;return s>=4096&&(l+=13,s>>>=13),s>=64&&(l+=7,s>>>=7),s>=8&&(l+=4,s>>>=4),s>=2&&(l+=2,s>>>=2),l+s},u.prototype._zeroBits=function(r){if(0===r)return 26;var s=r,l=0;return 0==(8191&s)&&(l+=13,s>>>=13),0==(127&s)&&(l+=7,s>>>=7),0==(15&s)&&(l+=4,s>>>=4),0==(3&s)&&(l+=2,s>>>=2),0==(1&s)&&l++,l},u.prototype.bitLength=function(){var s=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+s},u.prototype.zeroBits=function(){if(this.isZero())return 0;for(var r=0,s=0;s<this.length;s++){var l=this._zeroBits(this.words[s]);if(r+=l,26!==l)break}return r},u.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},u.prototype.toTwos=function(r){return 0!==this.negative?this.abs().inotn(r).iaddn(1):this.clone()},u.prototype.fromTwos=function(r){return this.testn(r-1)?this.notn(r).iaddn(1).ineg():this.clone()},u.prototype.isNeg=function(){return 0!==this.negative},u.prototype.neg=function(){return this.clone().ineg()},u.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},u.prototype.iuor=function(r){for(;this.length<r.length;)this.words[this.length++]=0;for(var s=0;s<r.length;s++)this.words[s]=this.words[s]|r.words[s];return this.strip()},u.prototype.ior=function(r){return m(0==(this.negative|r.negative)),this.iuor(r)},u.prototype.or=function(r){return this.length>r.length?this.clone().ior(r):r.clone().ior(this)},u.prototype.uor=function(r){return this.length>r.length?this.clone().iuor(r):r.clone().iuor(this)},u.prototype.iuand=function(r){var s;s=this.length>r.length?r:this;for(var l=0;l<s.length;l++)this.words[l]=this.words[l]&r.words[l];return this.length=s.length,this.strip()},u.prototype.iand=function(r){return m(0==(this.negative|r.negative)),this.iuand(r)},u.prototype.and=function(r){return this.length>r.length?this.clone().iand(r):r.clone().iand(this)},u.prototype.uand=function(r){return this.length>r.length?this.clone().iuand(r):r.clone().iuand(this)},u.prototype.iuxor=function(r){var s,l;this.length>r.length?(s=this,l=r):(s=r,l=this);for(var a=0;a<l.length;a++)this.words[a]=s.words[a]^l.words[a];if(this!==s)for(;a<s.length;a++)this.words[a]=s.words[a];return this.length=s.length,this.strip()},u.prototype.ixor=function(r){return m(0==(this.negative|r.negative)),this.iuxor(r)},u.prototype.xor=function(r){return this.length>r.length?this.clone().ixor(r):r.clone().ixor(this)},u.prototype.uxor=function(r){return this.length>r.length?this.clone().iuxor(r):r.clone().iuxor(this)},u.prototype.inotn=function(r){m("number"==typeof r&&r>=0);var s=0|Math.ceil(r/26),l=r%26;this._expand(s),l>0&&s--;for(var a=0;a<s;a++)this.words[a]=67108863&~this.words[a];return l>0&&(this.words[a]=~this.words[a]&67108863>>26-l),this.strip()},u.prototype.notn=function(r){return this.clone().inotn(r)},u.prototype.setn=function(r,s){m("number"==typeof r&&r>=0);var l=r/26|0,a=r%26;return this._expand(l+1),this.words[l]=s?this.words[l]|1<<a:this.words[l]&~(1<<a),this.strip()},u.prototype.iadd=function(r){var s,l,a;if(0!==this.negative&&0===r.negative)return this.negative=0,s=this.isub(r),this.negative^=1,this._normSign();if(0===this.negative&&0!==r.negative)return r.negative=0,s=this.isub(r),r.negative=1,s._normSign();this.length>r.length?(l=this,a=r):(l=r,a=this);for(var f=0,_=0;_<a.length;_++)this.words[_]=67108863&(s=(0|l.words[_])+(0|a.words[_])+f),f=s>>>26;for(;0!==f&&_<l.length;_++)this.words[_]=67108863&(s=(0|l.words[_])+f),f=s>>>26;if(this.length=l.length,0!==f)this.words[this.length]=f,this.length++;else if(l!==this)for(;_<l.length;_++)this.words[_]=l.words[_];return this},u.prototype.add=function(r){var s;return 0!==r.negative&&0===this.negative?(r.negative=0,s=this.sub(r),r.negative^=1,s):0===r.negative&&0!==this.negative?(this.negative=0,s=r.sub(this),this.negative=1,s):this.length>r.length?this.clone().iadd(r):r.clone().iadd(this)},u.prototype.isub=function(r){if(0!==r.negative){r.negative=0;var s=this.iadd(r);return r.negative=1,s._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(r),this.negative=1,this._normSign();var a,f,l=this.cmp(r);if(0===l)return this.negative=0,this.length=1,this.words[0]=0,this;l>0?(a=this,f=r):(a=r,f=this);for(var _=0,D=0;D<f.length;D++)_=(s=(0|a.words[D])-(0|f.words[D])+_)>>26,this.words[D]=67108863&s;for(;0!==_&&D<a.length;D++)_=(s=(0|a.words[D])+_)>>26,this.words[D]=67108863&s;if(0===_&&D<a.length&&a!==this)for(;D<a.length;D++)this.words[D]=a.words[D];return this.length=Math.max(this.length,D),a!==this&&(this.negative=1),this.strip()},u.prototype.sub=function(r){return this.clone().isub(r)};var S=function(r,s,l){var d,i,b,a=r.words,f=s.words,_=l.words,D=0,z=0|a[0],q=8191&z,J=z>>>13,ge=0|a[1],me=8191&ge,le=ge>>>13,fe=0|a[2],ae=8191&fe,de=fe>>>13,xe=0|a[3],Ce=8191&xe,oe=xe>>>13,we=0|a[4],ye=8191&we,re=we>>>13,ee=0|a[5],Z=8191&ee,ue=ee>>>13,Re=0|a[6],Te=8191&Re,Ee=Re>>>13,$e=0|a[7],Ne=8191&$e,_e=$e>>>13,Be=0|a[8],Ae=8191&Be,Le=Be>>>13,Ct=0|a[9],He=8191&Ct,We=Ct>>>13,Vt=0|f[0],qe=8191&Vt,ct=Vt>>>13,Mt=0|f[1],it=8191&Mt,at=Mt>>>13,Dn=0|f[2],ot=8191&Dn,Je=Dn>>>13,En=0|f[3],Ge=8191&En,dt=En>>>13,Pn=0|f[4],ut=8191&Pn,Ve=Pn>>>13,On=0|f[5],Ke=8191&On,st=On>>>13,qn=0|f[6],ft=8191&qn,ze=qn>>>13,sn=0|f[7],ht=8191&sn,tt=sn>>>13,Qt=0|f[8],et=8191&Qt,Xe=Qt>>>13,kn=0|f[9],Ye=8191&kn,lt=kn>>>13;l.negative=r.negative^s.negative,l.length=19;var un=(D+(d=Math.imul(q,qe))|0)+((8191&(i=(i=Math.imul(q,ct))+Math.imul(J,qe)|0))<<13)|0;D=((b=Math.imul(J,ct))+(i>>>13)|0)+(un>>>26)|0,un&=67108863,d=Math.imul(me,qe),i=(i=Math.imul(me,ct))+Math.imul(le,qe)|0,b=Math.imul(le,ct);var Ht=(D+(d=d+Math.imul(q,it)|0)|0)+((8191&(i=(i=i+Math.imul(q,at)|0)+Math.imul(J,it)|0))<<13)|0;D=((b=b+Math.imul(J,at)|0)+(i>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,d=Math.imul(ae,qe),i=(i=Math.imul(ae,ct))+Math.imul(de,qe)|0,b=Math.imul(de,ct),d=d+Math.imul(me,it)|0,i=(i=i+Math.imul(me,at)|0)+Math.imul(le,it)|0,b=b+Math.imul(le,at)|0;var jt=(D+(d=d+Math.imul(q,ot)|0)|0)+((8191&(i=(i=i+Math.imul(q,Je)|0)+Math.imul(J,ot)|0))<<13)|0;D=((b=b+Math.imul(J,Je)|0)+(i>>>13)|0)+(jt>>>26)|0,jt&=67108863,d=Math.imul(Ce,qe),i=(i=Math.imul(Ce,ct))+Math.imul(oe,qe)|0,b=Math.imul(oe,ct),d=d+Math.imul(ae,it)|0,i=(i=i+Math.imul(ae,at)|0)+Math.imul(de,it)|0,b=b+Math.imul(de,at)|0,d=d+Math.imul(me,ot)|0,i=(i=i+Math.imul(me,Je)|0)+Math.imul(le,ot)|0,b=b+Math.imul(le,Je)|0;var bn=(D+(d=d+Math.imul(q,Ge)|0)|0)+((8191&(i=(i=i+Math.imul(q,dt)|0)+Math.imul(J,Ge)|0))<<13)|0;D=((b=b+Math.imul(J,dt)|0)+(i>>>13)|0)+(bn>>>26)|0,bn&=67108863,d=Math.imul(ye,qe),i=(i=Math.imul(ye,ct))+Math.imul(re,qe)|0,b=Math.imul(re,ct),d=d+Math.imul(Ce,it)|0,i=(i=i+Math.imul(Ce,at)|0)+Math.imul(oe,it)|0,b=b+Math.imul(oe,at)|0,d=d+Math.imul(ae,ot)|0,i=(i=i+Math.imul(ae,Je)|0)+Math.imul(de,ot)|0,b=b+Math.imul(de,Je)|0,d=d+Math.imul(me,Ge)|0,i=(i=i+Math.imul(me,dt)|0)+Math.imul(le,Ge)|0,b=b+Math.imul(le,dt)|0;var dn=(D+(d=d+Math.imul(q,ut)|0)|0)+((8191&(i=(i=i+Math.imul(q,Ve)|0)+Math.imul(J,ut)|0))<<13)|0;D=((b=b+Math.imul(J,Ve)|0)+(i>>>13)|0)+(dn>>>26)|0,dn&=67108863,d=Math.imul(Z,qe),i=(i=Math.imul(Z,ct))+Math.imul(ue,qe)|0,b=Math.imul(ue,ct),d=d+Math.imul(ye,it)|0,i=(i=i+Math.imul(ye,at)|0)+Math.imul(re,it)|0,b=b+Math.imul(re,at)|0,d=d+Math.imul(Ce,ot)|0,i=(i=i+Math.imul(Ce,Je)|0)+Math.imul(oe,ot)|0,b=b+Math.imul(oe,Je)|0,d=d+Math.imul(ae,Ge)|0,i=(i=i+Math.imul(ae,dt)|0)+Math.imul(de,Ge)|0,b=b+Math.imul(de,dt)|0,d=d+Math.imul(me,ut)|0,i=(i=i+Math.imul(me,Ve)|0)+Math.imul(le,ut)|0,b=b+Math.imul(le,Ve)|0;var pn=(D+(d=d+Math.imul(q,Ke)|0)|0)+((8191&(i=(i=i+Math.imul(q,st)|0)+Math.imul(J,Ke)|0))<<13)|0;D=((b=b+Math.imul(J,st)|0)+(i>>>13)|0)+(pn>>>26)|0,pn&=67108863,d=Math.imul(Te,qe),i=(i=Math.imul(Te,ct))+Math.imul(Ee,qe)|0,b=Math.imul(Ee,ct),d=d+Math.imul(Z,it)|0,i=(i=i+Math.imul(Z,at)|0)+Math.imul(ue,it)|0,b=b+Math.imul(ue,at)|0,d=d+Math.imul(ye,ot)|0,i=(i=i+Math.imul(ye,Je)|0)+Math.imul(re,ot)|0,b=b+Math.imul(re,Je)|0,d=d+Math.imul(Ce,Ge)|0,i=(i=i+Math.imul(Ce,dt)|0)+Math.imul(oe,Ge)|0,b=b+Math.imul(oe,dt)|0,d=d+Math.imul(ae,ut)|0,i=(i=i+Math.imul(ae,Ve)|0)+Math.imul(de,ut)|0,b=b+Math.imul(de,Ve)|0,d=d+Math.imul(me,Ke)|0,i=(i=i+Math.imul(me,st)|0)+Math.imul(le,Ke)|0,b=b+Math.imul(le,st)|0;var In=(D+(d=d+Math.imul(q,ft)|0)|0)+((8191&(i=(i=i+Math.imul(q,ze)|0)+Math.imul(J,ft)|0))<<13)|0;D=((b=b+Math.imul(J,ze)|0)+(i>>>13)|0)+(In>>>26)|0,In&=67108863,d=Math.imul(Ne,qe),i=(i=Math.imul(Ne,ct))+Math.imul(_e,qe)|0,b=Math.imul(_e,ct),d=d+Math.imul(Te,it)|0,i=(i=i+Math.imul(Te,at)|0)+Math.imul(Ee,it)|0,b=b+Math.imul(Ee,at)|0,d=d+Math.imul(Z,ot)|0,i=(i=i+Math.imul(Z,Je)|0)+Math.imul(ue,ot)|0,b=b+Math.imul(ue,Je)|0,d=d+Math.imul(ye,Ge)|0,i=(i=i+Math.imul(ye,dt)|0)+Math.imul(re,Ge)|0,b=b+Math.imul(re,dt)|0,d=d+Math.imul(Ce,ut)|0,i=(i=i+Math.imul(Ce,Ve)|0)+Math.imul(oe,ut)|0,b=b+Math.imul(oe,Ve)|0,d=d+Math.imul(ae,Ke)|0,i=(i=i+Math.imul(ae,st)|0)+Math.imul(de,Ke)|0,b=b+Math.imul(de,st)|0,d=d+Math.imul(me,ft)|0,i=(i=i+Math.imul(me,ze)|0)+Math.imul(le,ft)|0,b=b+Math.imul(le,ze)|0;var rn=(D+(d=d+Math.imul(q,ht)|0)|0)+((8191&(i=(i=i+Math.imul(q,tt)|0)+Math.imul(J,ht)|0))<<13)|0;D=((b=b+Math.imul(J,tt)|0)+(i>>>13)|0)+(rn>>>26)|0,rn&=67108863,d=Math.imul(Ae,qe),i=(i=Math.imul(Ae,ct))+Math.imul(Le,qe)|0,b=Math.imul(Le,ct),d=d+Math.imul(Ne,it)|0,i=(i=i+Math.imul(Ne,at)|0)+Math.imul(_e,it)|0,b=b+Math.imul(_e,at)|0,d=d+Math.imul(Te,ot)|0,i=(i=i+Math.imul(Te,Je)|0)+Math.imul(Ee,ot)|0,b=b+Math.imul(Ee,Je)|0,d=d+Math.imul(Z,Ge)|0,i=(i=i+Math.imul(Z,dt)|0)+Math.imul(ue,Ge)|0,b=b+Math.imul(ue,dt)|0,d=d+Math.imul(ye,ut)|0,i=(i=i+Math.imul(ye,Ve)|0)+Math.imul(re,ut)|0,b=b+Math.imul(re,Ve)|0,d=d+Math.imul(Ce,Ke)|0,i=(i=i+Math.imul(Ce,st)|0)+Math.imul(oe,Ke)|0,b=b+Math.imul(oe,st)|0,d=d+Math.imul(ae,ft)|0,i=(i=i+Math.imul(ae,ze)|0)+Math.imul(de,ft)|0,b=b+Math.imul(de,ze)|0,d=d+Math.imul(me,ht)|0,i=(i=i+Math.imul(me,tt)|0)+Math.imul(le,ht)|0,b=b+Math.imul(le,tt)|0;var Cn=(D+(d=d+Math.imul(q,et)|0)|0)+((8191&(i=(i=i+Math.imul(q,Xe)|0)+Math.imul(J,et)|0))<<13)|0;D=((b=b+Math.imul(J,Xe)|0)+(i>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,d=Math.imul(He,qe),i=(i=Math.imul(He,ct))+Math.imul(We,qe)|0,b=Math.imul(We,ct),d=d+Math.imul(Ae,it)|0,i=(i=i+Math.imul(Ae,at)|0)+Math.imul(Le,it)|0,b=b+Math.imul(Le,at)|0,d=d+Math.imul(Ne,ot)|0,i=(i=i+Math.imul(Ne,Je)|0)+Math.imul(_e,ot)|0,b=b+Math.imul(_e,Je)|0,d=d+Math.imul(Te,Ge)|0,i=(i=i+Math.imul(Te,dt)|0)+Math.imul(Ee,Ge)|0,b=b+Math.imul(Ee,dt)|0,d=d+Math.imul(Z,ut)|0,i=(i=i+Math.imul(Z,Ve)|0)+Math.imul(ue,ut)|0,b=b+Math.imul(ue,Ve)|0,d=d+Math.imul(ye,Ke)|0,i=(i=i+Math.imul(ye,st)|0)+Math.imul(re,Ke)|0,b=b+Math.imul(re,st)|0,d=d+Math.imul(Ce,ft)|0,i=(i=i+Math.imul(Ce,ze)|0)+Math.imul(oe,ft)|0,b=b+Math.imul(oe,ze)|0,d=d+Math.imul(ae,ht)|0,i=(i=i+Math.imul(ae,tt)|0)+Math.imul(de,ht)|0,b=b+Math.imul(de,tt)|0,d=d+Math.imul(me,et)|0,i=(i=i+Math.imul(me,Xe)|0)+Math.imul(le,et)|0,b=b+Math.imul(le,Xe)|0;var Kt=(D+(d=d+Math.imul(q,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(q,lt)|0)+Math.imul(J,Ye)|0))<<13)|0;D=((b=b+Math.imul(J,lt)|0)+(i>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,d=Math.imul(He,it),i=(i=Math.imul(He,at))+Math.imul(We,it)|0,b=Math.imul(We,at),d=d+Math.imul(Ae,ot)|0,i=(i=i+Math.imul(Ae,Je)|0)+Math.imul(Le,ot)|0,b=b+Math.imul(Le,Je)|0,d=d+Math.imul(Ne,Ge)|0,i=(i=i+Math.imul(Ne,dt)|0)+Math.imul(_e,Ge)|0,b=b+Math.imul(_e,dt)|0,d=d+Math.imul(Te,ut)|0,i=(i=i+Math.imul(Te,Ve)|0)+Math.imul(Ee,ut)|0,b=b+Math.imul(Ee,Ve)|0,d=d+Math.imul(Z,Ke)|0,i=(i=i+Math.imul(Z,st)|0)+Math.imul(ue,Ke)|0,b=b+Math.imul(ue,st)|0,d=d+Math.imul(ye,ft)|0,i=(i=i+Math.imul(ye,ze)|0)+Math.imul(re,ft)|0,b=b+Math.imul(re,ze)|0,d=d+Math.imul(Ce,ht)|0,i=(i=i+Math.imul(Ce,tt)|0)+Math.imul(oe,ht)|0,b=b+Math.imul(oe,tt)|0,d=d+Math.imul(ae,et)|0,i=(i=i+Math.imul(ae,Xe)|0)+Math.imul(de,et)|0,b=b+Math.imul(de,Xe)|0;var Nt=(D+(d=d+Math.imul(me,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(me,lt)|0)+Math.imul(le,Ye)|0))<<13)|0;D=((b=b+Math.imul(le,lt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,d=Math.imul(He,ot),i=(i=Math.imul(He,Je))+Math.imul(We,ot)|0,b=Math.imul(We,Je),d=d+Math.imul(Ae,Ge)|0,i=(i=i+Math.imul(Ae,dt)|0)+Math.imul(Le,Ge)|0,b=b+Math.imul(Le,dt)|0,d=d+Math.imul(Ne,ut)|0,i=(i=i+Math.imul(Ne,Ve)|0)+Math.imul(_e,ut)|0,b=b+Math.imul(_e,Ve)|0,d=d+Math.imul(Te,Ke)|0,i=(i=i+Math.imul(Te,st)|0)+Math.imul(Ee,Ke)|0,b=b+Math.imul(Ee,st)|0,d=d+Math.imul(Z,ft)|0,i=(i=i+Math.imul(Z,ze)|0)+Math.imul(ue,ft)|0,b=b+Math.imul(ue,ze)|0,d=d+Math.imul(ye,ht)|0,i=(i=i+Math.imul(ye,tt)|0)+Math.imul(re,ht)|0,b=b+Math.imul(re,tt)|0,d=d+Math.imul(Ce,et)|0,i=(i=i+Math.imul(Ce,Xe)|0)+Math.imul(oe,et)|0,b=b+Math.imul(oe,Xe)|0;var xn=(D+(d=d+Math.imul(ae,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(ae,lt)|0)+Math.imul(de,Ye)|0))<<13)|0;D=((b=b+Math.imul(de,lt)|0)+(i>>>13)|0)+(xn>>>26)|0,xn&=67108863,d=Math.imul(He,Ge),i=(i=Math.imul(He,dt))+Math.imul(We,Ge)|0,b=Math.imul(We,dt),d=d+Math.imul(Ae,ut)|0,i=(i=i+Math.imul(Ae,Ve)|0)+Math.imul(Le,ut)|0,b=b+Math.imul(Le,Ve)|0,d=d+Math.imul(Ne,Ke)|0,i=(i=i+Math.imul(Ne,st)|0)+Math.imul(_e,Ke)|0,b=b+Math.imul(_e,st)|0,d=d+Math.imul(Te,ft)|0,i=(i=i+Math.imul(Te,ze)|0)+Math.imul(Ee,ft)|0,b=b+Math.imul(Ee,ze)|0,d=d+Math.imul(Z,ht)|0,i=(i=i+Math.imul(Z,tt)|0)+Math.imul(ue,ht)|0,b=b+Math.imul(ue,tt)|0,d=d+Math.imul(ye,et)|0,i=(i=i+Math.imul(ye,Xe)|0)+Math.imul(re,et)|0,b=b+Math.imul(re,Xe)|0;var wn=(D+(d=d+Math.imul(Ce,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(Ce,lt)|0)+Math.imul(oe,Ye)|0))<<13)|0;D=((b=b+Math.imul(oe,lt)|0)+(i>>>13)|0)+(wn>>>26)|0,wn&=67108863,d=Math.imul(He,ut),i=(i=Math.imul(He,Ve))+Math.imul(We,ut)|0,b=Math.imul(We,Ve),d=d+Math.imul(Ae,Ke)|0,i=(i=i+Math.imul(Ae,st)|0)+Math.imul(Le,Ke)|0,b=b+Math.imul(Le,st)|0,d=d+Math.imul(Ne,ft)|0,i=(i=i+Math.imul(Ne,ze)|0)+Math.imul(_e,ft)|0,b=b+Math.imul(_e,ze)|0,d=d+Math.imul(Te,ht)|0,i=(i=i+Math.imul(Te,tt)|0)+Math.imul(Ee,ht)|0,b=b+Math.imul(Ee,tt)|0,d=d+Math.imul(Z,et)|0,i=(i=i+Math.imul(Z,Xe)|0)+Math.imul(ue,et)|0,b=b+Math.imul(ue,Xe)|0;var Mn=(D+(d=d+Math.imul(ye,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(ye,lt)|0)+Math.imul(re,Ye)|0))<<13)|0;D=((b=b+Math.imul(re,lt)|0)+(i>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,d=Math.imul(He,Ke),i=(i=Math.imul(He,st))+Math.imul(We,Ke)|0,b=Math.imul(We,st),d=d+Math.imul(Ae,ft)|0,i=(i=i+Math.imul(Ae,ze)|0)+Math.imul(Le,ft)|0,b=b+Math.imul(Le,ze)|0,d=d+Math.imul(Ne,ht)|0,i=(i=i+Math.imul(Ne,tt)|0)+Math.imul(_e,ht)|0,b=b+Math.imul(_e,tt)|0,d=d+Math.imul(Te,et)|0,i=(i=i+Math.imul(Te,Xe)|0)+Math.imul(Ee,et)|0,b=b+Math.imul(Ee,Xe)|0;var xt=(D+(d=d+Math.imul(Z,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(Z,lt)|0)+Math.imul(ue,Ye)|0))<<13)|0;D=((b=b+Math.imul(ue,lt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,d=Math.imul(He,ft),i=(i=Math.imul(He,ze))+Math.imul(We,ft)|0,b=Math.imul(We,ze),d=d+Math.imul(Ae,ht)|0,i=(i=i+Math.imul(Ae,tt)|0)+Math.imul(Le,ht)|0,b=b+Math.imul(Le,tt)|0,d=d+Math.imul(Ne,et)|0,i=(i=i+Math.imul(Ne,Xe)|0)+Math.imul(_e,et)|0,b=b+Math.imul(_e,Xe)|0;var Rn=(D+(d=d+Math.imul(Te,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(Te,lt)|0)+Math.imul(Ee,Ye)|0))<<13)|0;D=((b=b+Math.imul(Ee,lt)|0)+(i>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,d=Math.imul(He,ht),i=(i=Math.imul(He,tt))+Math.imul(We,ht)|0,b=Math.imul(We,tt),d=d+Math.imul(Ae,et)|0,i=(i=i+Math.imul(Ae,Xe)|0)+Math.imul(Le,et)|0,b=b+Math.imul(Le,Xe)|0;var Zt=(D+(d=d+Math.imul(Ne,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(Ne,lt)|0)+Math.imul(_e,Ye)|0))<<13)|0;D=((b=b+Math.imul(_e,lt)|0)+(i>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,d=Math.imul(He,et),i=(i=Math.imul(He,Xe))+Math.imul(We,et)|0,b=Math.imul(We,Xe);var tn=(D+(d=d+Math.imul(Ae,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(Ae,lt)|0)+Math.imul(Le,Ye)|0))<<13)|0;D=((b=b+Math.imul(Le,lt)|0)+(i>>>13)|0)+(tn>>>26)|0,tn&=67108863;var _n=(D+(d=Math.imul(He,Ye))|0)+((8191&(i=(i=Math.imul(He,lt))+Math.imul(We,Ye)|0))<<13)|0;return D=((b=Math.imul(We,lt))+(i>>>13)|0)+(_n>>>26)|0,_n&=67108863,_[0]=un,_[1]=Ht,_[2]=jt,_[3]=bn,_[4]=dn,_[5]=pn,_[6]=In,_[7]=rn,_[8]=Cn,_[9]=Kt,_[10]=Nt,_[11]=xn,_[12]=wn,_[13]=Mn,_[14]=xt,_[15]=Rn,_[16]=Zt,_[17]=tn,_[18]=_n,0!==D&&(_[19]=D,l.length++),l};function k(R,r,s){return(new O).mulp(R,r,s)}function O(R,r){this.x=R,this.y=r}Math.imul||(S=w),u.prototype.mulTo=function(r,s){var a=this.length+r.length;return 10===this.length&&10===r.length?S(this,r,s):a<63?w(this,r,s):a<1024?function(R,r,s){s.negative=r.negative^R.negative,s.length=R.length+r.length;for(var l=0,a=0,f=0;f<s.length-1;f++){var _=a;a=0;for(var D=67108863&l,d=Math.min(f,r.length-1),i=Math.max(0,f-R.length+1);i<=d;i++){var J=(0|R.words[f-i])*(0|r.words[i]),ge=67108863&J;D=67108863&(ge=ge+D|0),a+=(_=(_=_+(J/67108864|0)|0)+(ge>>>26)|0)>>>26,_&=67108863}s.words[f]=D,l=_,_=a}return 0!==l?s.words[f]=l:s.length--,s.strip()}(this,r,s):k(this,r,s)},O.prototype.makeRBT=function(r){for(var s=new Array(r),l=u.prototype._countBits(r)-1,a=0;a<r;a++)s[a]=this.revBin(a,l,r);return s},O.prototype.revBin=function(r,s,l){if(0===r||r===l-1)return r;for(var a=0,f=0;f<s;f++)a|=(1&r)<<s-f-1,r>>=1;return a},O.prototype.permute=function(r,s,l,a,f,_){for(var D=0;D<_;D++)a[D]=s[r[D]],f[D]=l[r[D]]},O.prototype.transform=function(r,s,l,a,f,_){this.permute(_,r,s,l,a,f);for(var D=1;D<f;D<<=1)for(var d=D<<1,i=Math.cos(2*Math.PI/d),b=Math.sin(2*Math.PI/d),z=0;z<f;z+=d)for(var q=i,J=b,ge=0;ge<D;ge++){var me=l[z+ge],le=a[z+ge],fe=l[z+ge+D],ae=a[z+ge+D],de=q*fe-J*ae;ae=q*ae+J*fe,l[z+ge]=me+(fe=de),a[z+ge]=le+ae,l[z+ge+D]=me-fe,a[z+ge+D]=le-ae,ge!==d&&(de=i*q-b*J,J=i*J+b*q,q=de)}},O.prototype.guessLen13b=function(r,s){var l=1|Math.max(s,r),a=1&l,f=0;for(l=l/2|0;l;l>>>=1)f++;return 1<<f+1+a},O.prototype.conjugate=function(r,s,l){if(!(l<=1))for(var a=0;a<l/2;a++){var f=r[a];r[a]=r[l-a-1],r[l-a-1]=f,f=s[a],s[a]=-s[l-a-1],s[l-a-1]=-f}},O.prototype.normalize13b=function(r,s){for(var l=0,a=0;a<s/2;a++){var f=8192*Math.round(r[2*a+1]/s)+Math.round(r[2*a]/s)+l;r[a]=67108863&f,l=f<67108864?0:f/67108864|0}return r},O.prototype.convert13b=function(r,s,l,a){for(var f=0,_=0;_<s;_++)l[2*_]=8191&(f+=0|r[_]),l[2*_+1]=8191&(f>>>=13),f>>>=13;for(_=2*s;_<a;++_)l[_]=0;m(0===f),m(0==(-8192&f))},O.prototype.stub=function(r){for(var s=new Array(r),l=0;l<r;l++)s[l]=0;return s},O.prototype.mulp=function(r,s,l){var a=2*this.guessLen13b(r.length,s.length),f=this.makeRBT(a),_=this.stub(a),D=new Array(a),d=new Array(a),i=new Array(a),b=new Array(a),z=new Array(a),q=new Array(a),J=l.words;J.length=a,this.convert13b(r.words,r.length,D,a),this.convert13b(s.words,s.length,b,a),this.transform(D,_,d,i,a,f),this.transform(b,_,z,q,a,f);for(var ge=0;ge<a;ge++){var me=d[ge]*z[ge]-i[ge]*q[ge];i[ge]=d[ge]*q[ge]+i[ge]*z[ge],d[ge]=me}return this.conjugate(d,i,a),this.transform(d,i,J,_,a,f),this.conjugate(J,_,a),this.normalize13b(J,a),l.negative=r.negative^s.negative,l.length=r.length+s.length,l.strip()},u.prototype.mul=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),this.mulTo(r,s)},u.prototype.mulf=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),k(this,r,s)},u.prototype.imul=function(r){return this.clone().mulTo(r,this)},u.prototype.imuln=function(r){m("number"==typeof r),m(r<67108864);for(var s=0,l=0;l<this.length;l++){var a=(0|this.words[l])*r,f=(67108863&a)+(67108863&s);s>>=26,s+=a/67108864|0,s+=f>>>26,this.words[l]=67108863&f}return 0!==s&&(this.words[l]=s,this.length++),this},u.prototype.muln=function(r){return this.clone().imuln(r)},u.prototype.sqr=function(){return this.mul(this)},u.prototype.isqr=function(){return this.imul(this.clone())},u.prototype.pow=function(r){var s=function(R){for(var r=new Array(R.bitLength()),s=0;s<r.length;s++){var a=s%26;r[s]=(R.words[s/26|0]&1<<a)>>>a}return r}(r);if(0===s.length)return new u(1);for(var l=this,a=0;a<s.length&&0===s[a];a++,l=l.sqr());if(++a<s.length)for(var f=l.sqr();a<s.length;a++,f=f.sqr())0!==s[a]&&(l=l.mul(f));return l},u.prototype.iushln=function(r){m("number"==typeof r&&r>=0);var f,s=r%26,l=(r-s)/26,a=67108863>>>26-s<<26-s;if(0!==s){var _=0;for(f=0;f<this.length;f++){var D=this.words[f]&a;this.words[f]=(0|this.words[f])-D<<s|_,_=D>>>26-s}_&&(this.words[f]=_,this.length++)}if(0!==l){for(f=this.length-1;f>=0;f--)this.words[f+l]=this.words[f];for(f=0;f<l;f++)this.words[f]=0;this.length+=l}return this.strip()},u.prototype.ishln=function(r){return m(0===this.negative),this.iushln(r)},u.prototype.iushrn=function(r,s,l){var a;m("number"==typeof r&&r>=0),a=s?(s-s%26)/26:0;var f=r%26,_=Math.min((r-f)/26,this.length),D=67108863^67108863>>>f<<f,d=l;if(a-=_,a=Math.max(0,a),d){for(var i=0;i<_;i++)d.words[i]=this.words[i];d.length=_}if(0!==_)if(this.length>_)for(this.length-=_,i=0;i<this.length;i++)this.words[i]=this.words[i+_];else this.words[0]=0,this.length=1;var b=0;for(i=this.length-1;i>=0&&(0!==b||i>=a);i--){var z=0|this.words[i];this.words[i]=b<<26-f|z>>>f,b=z&D}return d&&0!==b&&(d.words[d.length++]=b),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},u.prototype.ishrn=function(r,s,l){return m(0===this.negative),this.iushrn(r,s,l)},u.prototype.shln=function(r){return this.clone().ishln(r)},u.prototype.ushln=function(r){return this.clone().iushln(r)},u.prototype.shrn=function(r){return this.clone().ishrn(r)},u.prototype.ushrn=function(r){return this.clone().iushrn(r)},u.prototype.testn=function(r){m("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return!(this.length<=l||!(this.words[l]&1<<s))},u.prototype.imaskn=function(r){m("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return m(0===this.negative,"imaskn works only with positive numbers"),this.length<=l?this:(0!==s&&l++,this.length=Math.min(l,this.length),0!==s&&(this.words[this.length-1]&=67108863^67108863>>>s<<s),this.strip())},u.prototype.maskn=function(r){return this.clone().imaskn(r)},u.prototype.iaddn=function(r){return m("number"==typeof r),m(r<67108864),r<0?this.isubn(-r):0!==this.negative?1===this.length&&(0|this.words[0])<r?(this.words[0]=r-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(r),this.negative=1,this):this._iaddn(r)},u.prototype._iaddn=function(r){this.words[0]+=r;for(var s=0;s<this.length&&this.words[s]>=67108864;s++)this.words[s]-=67108864,s===this.length-1?this.words[s+1]=1:this.words[s+1]++;return this.length=Math.max(this.length,s+1),this},u.prototype.isubn=function(r){if(m("number"==typeof r),m(r<67108864),r<0)return this.iaddn(-r);if(0!==this.negative)return this.negative=0,this.iaddn(r),this.negative=1,this;if(this.words[0]-=r,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var s=0;s<this.length&&this.words[s]<0;s++)this.words[s]+=67108864,this.words[s+1]-=1;return this.strip()},u.prototype.addn=function(r){return this.clone().iaddn(r)},u.prototype.subn=function(r){return this.clone().isubn(r)},u.prototype.iabs=function(){return this.negative=0,this},u.prototype.abs=function(){return this.clone().iabs()},u.prototype._ishlnsubmul=function(r,s,l){var f;this._expand(r.length+l);var _,D=0;for(f=0;f<r.length;f++){_=(0|this.words[f+l])+D;var d=(0|r.words[f])*s;D=((_-=67108863&d)>>26)-(d/67108864|0),this.words[f+l]=67108863&_}for(;f<this.length-l;f++)D=(_=(0|this.words[f+l])+D)>>26,this.words[f+l]=67108863&_;if(0===D)return this.strip();for(m(-1===D),D=0,f=0;f<this.length;f++)D=(_=-(0|this.words[f])+D)>>26,this.words[f]=67108863&_;return this.negative=1,this.strip()},u.prototype._wordDiv=function(r,s){var l,a=this.clone(),f=r,_=0|f.words[f.length-1];0!=(l=26-this._countBits(_))&&(f=f.ushln(l),a.iushln(l),_=0|f.words[f.length-1]);var i,d=a.length-f.length;if("mod"!==s){(i=new u(null)).length=d+1,i.words=new Array(i.length);for(var b=0;b<i.length;b++)i.words[b]=0}var z=a.clone()._ishlnsubmul(f,1,d);0===z.negative&&(a=z,i&&(i.words[d]=1));for(var q=d-1;q>=0;q--){var J=67108864*(0|a.words[f.length+q])+(0|a.words[f.length+q-1]);for(J=Math.min(J/_|0,67108863),a._ishlnsubmul(f,J,q);0!==a.negative;)J--,a.negative=0,a._ishlnsubmul(f,1,q),a.isZero()||(a.negative^=1);i&&(i.words[q]=J)}return i&&i.strip(),a.strip(),"div"!==s&&0!==l&&a.iushrn(l),{div:i||null,mod:a}},u.prototype.divmod=function(r,s,l){return m(!r.isZero()),this.isZero()?{div:new u(0),mod:new u(0)}:0!==this.negative&&0===r.negative?(_=this.neg().divmod(r,s),"mod"!==s&&(a=_.div.neg()),"div"!==s&&(f=_.mod.neg(),l&&0!==f.negative&&f.iadd(r)),{div:a,mod:f}):0===this.negative&&0!==r.negative?(_=this.divmod(r.neg(),s),"mod"!==s&&(a=_.div.neg()),{div:a,mod:_.mod}):0!=(this.negative&r.negative)?(_=this.neg().divmod(r.neg(),s),"div"!==s&&(f=_.mod.neg(),l&&0!==f.negative&&f.isub(r)),{div:_.div,mod:f}):r.length>this.length||this.cmp(r)<0?{div:new u(0),mod:this}:1===r.length?"div"===s?{div:this.divn(r.words[0]),mod:null}:"mod"===s?{div:null,mod:new u(this.modn(r.words[0]))}:{div:this.divn(r.words[0]),mod:new u(this.modn(r.words[0]))}:this._wordDiv(r,s);var a,f,_},u.prototype.div=function(r){return this.divmod(r,"div",!1).div},u.prototype.mod=function(r){return this.divmod(r,"mod",!1).mod},u.prototype.umod=function(r){return this.divmod(r,"mod",!0).mod},u.prototype.divRound=function(r){var s=this.divmod(r);if(s.mod.isZero())return s.div;var l=0!==s.div.negative?s.mod.isub(r):s.mod,a=r.ushrn(1),f=r.andln(1),_=l.cmp(a);return _<0||1===f&&0===_?s.div:0!==s.div.negative?s.div.isubn(1):s.div.iaddn(1)},u.prototype.modn=function(r){m(r<=67108863);for(var s=(1<<26)%r,l=0,a=this.length-1;a>=0;a--)l=(s*l+(0|this.words[a]))%r;return l},u.prototype.idivn=function(r){m(r<=67108863);for(var s=0,l=this.length-1;l>=0;l--){var a=(0|this.words[l])+67108864*s;this.words[l]=a/r|0,s=a%r}return this.strip()},u.prototype.divn=function(r){return this.clone().idivn(r)},u.prototype.egcd=function(r){m(0===r.negative),m(!r.isZero());var s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),_=new u(0),D=new u(1),d=0;s.isEven()&&l.isEven();)s.iushrn(1),l.iushrn(1),++d;for(var i=l.clone(),b=s.clone();!s.isZero();){for(var z=0,q=1;0==(s.words[0]&q)&&z<26;++z,q<<=1);if(z>0)for(s.iushrn(z);z-- >0;)(a.isOdd()||f.isOdd())&&(a.iadd(i),f.isub(b)),a.iushrn(1),f.iushrn(1);for(var J=0,ge=1;0==(l.words[0]&ge)&&J<26;++J,ge<<=1);if(J>0)for(l.iushrn(J);J-- >0;)(_.isOdd()||D.isOdd())&&(_.iadd(i),D.isub(b)),_.iushrn(1),D.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(_),f.isub(D)):(l.isub(s),_.isub(a),D.isub(f))}return{a:_,b:D,gcd:l.iushln(d)}},u.prototype._invmp=function(r){m(0===r.negative),m(!r.isZero());var z,s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),_=l.clone();s.cmpn(1)>0&&l.cmpn(1)>0;){for(var D=0,d=1;0==(s.words[0]&d)&&D<26;++D,d<<=1);if(D>0)for(s.iushrn(D);D-- >0;)a.isOdd()&&a.iadd(_),a.iushrn(1);for(var i=0,b=1;0==(l.words[0]&b)&&i<26;++i,b<<=1);if(i>0)for(l.iushrn(i);i-- >0;)f.isOdd()&&f.iadd(_),f.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(f)):(l.isub(s),f.isub(a))}return(z=0===s.cmpn(1)?a:f).cmpn(0)<0&&z.iadd(r),z},u.prototype.gcd=function(r){if(this.isZero())return r.abs();if(r.isZero())return this.abs();var s=this.clone(),l=r.clone();s.negative=0,l.negative=0;for(var a=0;s.isEven()&&l.isEven();a++)s.iushrn(1),l.iushrn(1);for(;;){for(;s.isEven();)s.iushrn(1);for(;l.isEven();)l.iushrn(1);var f=s.cmp(l);if(f<0){var _=s;s=l,l=_}else if(0===f||0===l.cmpn(1))break;s.isub(l)}return l.iushln(a)},u.prototype.invm=function(r){return this.egcd(r).a.umod(r)},u.prototype.isEven=function(){return 0==(1&this.words[0])},u.prototype.isOdd=function(){return 1==(1&this.words[0])},u.prototype.andln=function(r){return this.words[0]&r},u.prototype.bincn=function(r){m("number"==typeof r);var s=r%26,l=(r-s)/26,a=1<<s;if(this.length<=l)return this._expand(l+1),this.words[l]|=a,this;for(var f=a,_=l;0!==f&&_<this.length;_++){var D=0|this.words[_];f=(D+=f)>>>26,this.words[_]=D&=67108863}return 0!==f&&(this.words[_]=f,this.length++),this},u.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},u.prototype.cmpn=function(r){var l,s=r<0;if(0!==this.negative&&!s)return-1;if(0===this.negative&&s)return 1;if(this.strip(),this.length>1)l=1;else{s&&(r=-r),m(r<=67108863,"Number is too big");var a=0|this.words[0];l=a===r?0:a<r?-1:1}return 0!==this.negative?0|-l:l},u.prototype.cmp=function(r){if(0!==this.negative&&0===r.negative)return-1;if(0===this.negative&&0!==r.negative)return 1;var s=this.ucmp(r);return 0!==this.negative?0|-s:s},u.prototype.ucmp=function(r){if(this.length>r.length)return 1;if(this.length<r.length)return-1;for(var s=0,l=this.length-1;l>=0;l--){var a=0|this.words[l],f=0|r.words[l];if(a!==f){a<f?s=-1:a>f&&(s=1);break}}return s},u.prototype.gtn=function(r){return 1===this.cmpn(r)},u.prototype.gt=function(r){return 1===this.cmp(r)},u.prototype.gten=function(r){return this.cmpn(r)>=0},u.prototype.gte=function(r){return this.cmp(r)>=0},u.prototype.ltn=function(r){return-1===this.cmpn(r)},u.prototype.lt=function(r){return-1===this.cmp(r)},u.prototype.lten=function(r){return this.cmpn(r)<=0},u.prototype.lte=function(r){return this.cmp(r)<=0},u.prototype.eqn=function(r){return 0===this.cmpn(r)},u.prototype.eq=function(r){return 0===this.cmp(r)},u.red=function(r){return new $(r)},u.prototype.toRed=function(r){return m(!this.red,"Already a number in reduction context"),m(0===this.negative,"red works only with positives"),r.convertTo(this)._forceRed(r)},u.prototype.fromRed=function(){return m(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},u.prototype._forceRed=function(r){return this.red=r,this},u.prototype.forceRed=function(r){return m(!this.red,"Already a number in reduction context"),this._forceRed(r)},u.prototype.redAdd=function(r){return m(this.red,"redAdd works only with red numbers"),this.red.add(this,r)},u.prototype.redIAdd=function(r){return m(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,r)},u.prototype.redSub=function(r){return m(this.red,"redSub works only with red numbers"),this.red.sub(this,r)},u.prototype.redISub=function(r){return m(this.red,"redISub works only with red numbers"),this.red.isub(this,r)},u.prototype.redShl=function(r){return m(this.red,"redShl works only with red numbers"),this.red.shl(this,r)},u.prototype.redMul=function(r){return m(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.mul(this,r)},u.prototype.redIMul=function(r){return m(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.imul(this,r)},u.prototype.redSqr=function(){return m(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},u.prototype.redISqr=function(){return m(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},u.prototype.redSqrt=function(){return m(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},u.prototype.redInvm=function(){return m(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},u.prototype.redNeg=function(){return m(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},u.prototype.redPow=function(r){return m(this.red&&!r.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,r)};var V={k256:null,p224:null,p192:null,p25519:null};function U(R,r){this.name=R,this.p=new u(r,16),this.n=this.p.bitLength(),this.k=new u(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function B(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function H(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function W(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function te(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function $(R){if("string"==typeof R){var r=u._prime(R);this.m=r.p,this.prime=r}else m(R.gtn(1),"modulus must be greater than 1"),this.m=R,this.prime=null}function pe(R){$.call(this,R),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new u(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}U.prototype._tmp=function(){var r=new u(null);return r.words=new Array(Math.ceil(this.n/13)),r},U.prototype.ireduce=function(r){var l,s=r;do{this.split(s,this.tmp),l=(s=(s=this.imulK(s)).iadd(this.tmp)).bitLength()}while(l>this.n);var a=l<this.n?-1:s.ucmp(this.p);return 0===a?(s.words[0]=0,s.length=1):a>0?s.isub(this.p):void 0!==s.strip?s.strip():s._strip(),s},U.prototype.split=function(r,s){r.iushrn(this.n,0,s)},U.prototype.imulK=function(r){return r.imul(this.k)},x(B,U),B.prototype.split=function(r,s){for(var l=4194303,a=Math.min(r.length,9),f=0;f<a;f++)s.words[f]=r.words[f];if(s.length=a,r.length<=9)return r.words[0]=0,void(r.length=1);var _=r.words[9];for(s.words[s.length++]=_&l,f=10;f<r.length;f++){var D=0|r.words[f];r.words[f-10]=(D&l)<<4|_>>>22,_=D}r.words[f-10]=_>>>=22,r.length-=0===_&&r.length>10?10:9},B.prototype.imulK=function(r){r.words[r.length]=0,r.words[r.length+1]=0,r.length+=2;for(var s=0,l=0;l<r.length;l++){var a=0|r.words[l];r.words[l]=67108863&(s+=977*a),s=64*a+(s/67108864|0)}return 0===r.words[r.length-1]&&(r.length--,0===r.words[r.length-1]&&r.length--),r},x(H,U),x(W,U),x(te,U),te.prototype.imulK=function(r){for(var s=0,l=0;l<r.length;l++){var a=19*(0|r.words[l])+s,f=67108863&a;a>>>=26,r.words[l]=f,s=a}return 0!==s&&(r.words[r.length++]=s),r},u._prime=function(r){if(V[r])return V[r];var s;if("k256"===r)s=new B;else if("p224"===r)s=new H;else if("p192"===r)s=new W;else{if("p25519"!==r)throw new Error("Unknown prime "+r);s=new te}return V[r]=s,s},$.prototype._verify1=function(r){m(0===r.negative,"red works only with positives"),m(r.red,"red works only with red numbers")},$.prototype._verify2=function(r,s){m(0==(r.negative|s.negative),"red works only with positives"),m(r.red&&r.red===s.red,"red works only with red numbers")},$.prototype.imod=function(r){return this.prime?this.prime.ireduce(r)._forceRed(this):r.umod(this.m)._forceRed(this)},$.prototype.neg=function(r){return r.isZero()?r.clone():this.m.sub(r)._forceRed(this)},$.prototype.add=function(r,s){this._verify2(r,s);var l=r.add(s);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},$.prototype.iadd=function(r,s){this._verify2(r,s);var l=r.iadd(s);return l.cmp(this.m)>=0&&l.isub(this.m),l},$.prototype.sub=function(r,s){this._verify2(r,s);var l=r.sub(s);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},$.prototype.isub=function(r,s){this._verify2(r,s);var l=r.isub(s);return l.cmpn(0)<0&&l.iadd(this.m),l},$.prototype.shl=function(r,s){return this._verify1(r),this.imod(r.ushln(s))},$.prototype.imul=function(r,s){return this._verify2(r,s),this.imod(r.imul(s))},$.prototype.mul=function(r,s){return this._verify2(r,s),this.imod(r.mul(s))},$.prototype.isqr=function(r){return this.imul(r,r.clone())},$.prototype.sqr=function(r){return this.mul(r,r)},$.prototype.sqrt=function(r){if(r.isZero())return r.clone();var s=this.m.andln(3);if(m(s%2==1),3===s){var l=this.m.add(new u(1)).iushrn(2);return this.pow(r,l)}for(var a=this.m.subn(1),f=0;!a.isZero()&&0===a.andln(1);)f++,a.iushrn(1);m(!a.isZero());var _=new u(1).toRed(this),D=_.redNeg(),d=this.m.subn(1).iushrn(1),i=this.m.bitLength();for(i=new u(2*i*i).toRed(this);0!==this.pow(i,d).cmp(D);)i.redIAdd(D);for(var b=this.pow(i,a),z=this.pow(r,a.addn(1).iushrn(1)),q=this.pow(r,a),J=f;0!==q.cmp(_);){for(var ge=q,me=0;0!==ge.cmp(_);me++)ge=ge.redSqr();m(me<J);var le=this.pow(b,new u(1).iushln(J-me-1));z=z.redMul(le),b=le.redSqr(),q=q.redMul(b),J=me}return z},$.prototype.invm=function(r){var s=r._invmp(this.m);return 0!==s.negative?(s.negative=0,this.imod(s).redNeg()):this.imod(s)},$.prototype.pow=function(r,s){if(s.isZero())return new u(1).toRed(this);if(0===s.cmpn(1))return r.clone();var a=new Array(16);a[0]=new u(1).toRed(this),a[1]=r;for(var f=2;f<a.length;f++)a[f]=this.mul(a[f-1],r);var _=a[0],D=0,d=0,i=s.bitLength()%26;for(0===i&&(i=26),f=s.length-1;f>=0;f--){for(var b=s.words[f],z=i-1;z>=0;z--){var q=b>>z&1;_!==a[0]&&(_=this.sqr(_)),0!==q||0!==D?(D<<=1,D|=q,(4==++d||0===f&&0===z)&&(_=this.mul(_,a[D]),d=0,D=0)):d=0}i=26}return _},$.prototype.convertTo=function(r){var s=r.umod(this.m);return s===r?s.clone():s},$.prototype.convertFrom=function(r){var s=r.clone();return s.red=null,s},u.mont=function(r){return new pe(r)},x(pe,$),pe.prototype.convertTo=function(r){return this.imod(r.ushln(this.shift))},pe.prototype.convertFrom=function(r){var s=this.imod(r.mul(this.rinv));return s.red=null,s},pe.prototype.imul=function(r,s){if(r.isZero()||s.isZero())return r.words[0]=0,r.length=1,r;var l=r.imul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),_=f;return f.cmp(this.m)>=0?_=f.isub(this.m):f.cmpn(0)<0&&(_=f.iadd(this.m)),_._forceRed(this)},pe.prototype.mul=function(r,s){if(r.isZero()||s.isZero())return new u(0)._forceRed(this);var l=r.mul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),_=f;return f.cmp(this.m)>=0?_=f.isub(this.m):f.cmpn(0)<0&&(_=f.iadd(this.m)),_._forceRed(this)},pe.prototype.invm=function(r){return this.imod(r._invmp(this.m).mul(this.r2))._forceRed(this)}}(Y=T.nmd(Y),this)},2506:(Y,L,T)=>{"use strict";var p=T(9879),N=T(3264),m=T(5207),x=T(5829),u=T(5834);function g(M){u.call(this,"digest"),this._hash=M}p(g,u),g.prototype._update=function(M){this._hash.update(M)},g.prototype._final=function(){return this._hash.digest()},Y.exports=function(A){return"md5"===(A=A.toLowerCase())?new N:"rmd160"===A||"ripemd160"===A?new m:new g(x(A))}},4464:(Y,L,T)=>{var p=T(3264);Y.exports=function(N){return(new p).update(N).digest()}},5903:(Y,L,T)=>{"use strict";var p=T(9879),N=T(3715),m=T(5834),x=T(5859).Buffer,u=T(4464),g=T(5207),M=T(5829),A=x.alloc(128);function I(y,h){m.call(this,"digest"),"string"==typeof h&&(h=x.from(h));var C="sha512"===y||"sha384"===y?128:64;this._alg=y,this._key=h,h.length>C?h=("rmd160"===y?new g:M(y)).update(h).digest():h.length<C&&(h=x.concat([h,A],C));for(var w=this._ipad=x.allocUnsafe(C),S=this._opad=x.allocUnsafe(C),P=0;P<C;P++)w[P]=54^h[P],S[P]=92^h[P];this._hash="rmd160"===y?new g:M(y),this._hash.update(w)}p(I,m),I.prototype._update=function(y){this._hash.update(y)},I.prototype._final=function(){var y=this._hash.digest();return("rmd160"===this._alg?new g:M(this._alg)).update(this._opad).update(y).digest()},Y.exports=function(h,C){return"rmd160"===(h=h.toLowerCase())||"ripemd160"===h?new I("rmd160",C):"md5"===h?new N(u,C):new I(h,C)}},3715:(Y,L,T)=>{"use strict";var p=T(9879),N=T(5859).Buffer,m=T(5834),x=N.alloc(128),u=64;function g(M,A){m.call(this,"digest"),"string"==typeof A&&(A=N.from(A)),this._alg=M,this._key=A,A.length>u?A=M(A):A.length<u&&(A=N.concat([A,x],u));for(var I=this._ipad=N.allocUnsafe(u),y=this._opad=N.allocUnsafe(u),h=0;h<u;h++)I[h]=54^A[h],y[h]=92^A[h];this._hash=[I]}p(g,m),g.prototype._update=function(M){this._hash.push(M)},g.prototype._final=function(){var M=this._alg(N.concat(this._hash));return this._alg(N.concat([this._opad,M]))},Y.exports=g},9726:(Y,L,T)=>{"use strict";L.randomBytes=L.rng=L.pseudoRandomBytes=L.prng=T(6589),L.createHash=L.Hash=T(2506),L.createHmac=L.Hmac=T(5903);var p=T(6380),N=Object.keys(p),m=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(N);L.getHashes=function(){return m};var x=T(4161);L.pbkdf2=x.pbkdf2,L.pbkdf2Sync=x.pbkdf2Sync;var u=T(7991);L.Cipher=u.Cipher,L.createCipher=u.createCipher,L.Cipheriv=u.Cipheriv,L.createCipheriv=u.createCipheriv,L.Decipher=u.Decipher,L.createDecipher=u.createDecipher,L.Decipheriv=u.Decipheriv,L.createDecipheriv=u.createDecipheriv,L.getCiphers=u.getCiphers,L.listCiphers=u.listCiphers;var g=T(2322);L.DiffieHellmanGroup=g.DiffieHellmanGroup,L.createDiffieHellmanGroup=g.createDiffieHellmanGroup,L.getDiffieHellman=g.getDiffieHellman,L.createDiffieHellman=g.createDiffieHellman,L.DiffieHellman=g.DiffieHellman;var M=T(3566);L.createSign=M.createSign,L.Sign=M.Sign,L.createVerify=M.createVerify,L.Verify=M.Verify,L.createECDH=T(4892);var A=T(7537);L.publicEncrypt=A.publicEncrypt,L.privateEncrypt=A.privateEncrypt,L.publicDecrypt=A.publicDecrypt,L.privateDecrypt=A.privateDecrypt;var I=T(3594);L.randomFill=I.randomFill,L.randomFillSync=I.randomFillSync,L.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},L.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},8534:(Y,L,T)=>{"use strict";L.utils=T(6157),L.Cipher=T(2243),L.DES=T(2917),L.CBC=T(8029),L.EDE=T(1082)},8029:(Y,L,T)=>{"use strict";var p=T(6055),N=T(9879),m={};function x(g){p.equal(g.length,8,"Invalid IV length"),this.iv=new Array(8);for(var M=0;M<this.iv.length;M++)this.iv[M]=g[M]}L.instantiate=function(g){function M(h){g.call(this,h),this._cbcInit()}N(M,g);for(var A=Object.keys(m),I=0;I<A.length;I++){var y=A[I];M.prototype[y]=m[y]}return M.create=function(C){return new M(C)},M},m._cbcInit=function(){var M=new x(this.options.iv);this._cbcState=M},m._update=function(M,A,I,y){var C=this.constructor.super_.prototype,v=this._cbcState.iv;if("encrypt"===this.type){for(var w=0;w<this.blockSize;w++)v[w]^=M[A+w];for(C._update.call(this,v,0,I,y),w=0;w<this.blockSize;w++)v[w]=I[y+w]}else{for(C._update.call(this,M,A,I,y),w=0;w<this.blockSize;w++)I[y+w]^=v[w];for(w=0;w<this.blockSize;w++)v[w]=M[A+w]}}},2243:(Y,L,T)=>{"use strict";var p=T(6055);function N(m){this.options=m,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}Y.exports=N,N.prototype._init=function(){},N.prototype.update=function(x){return 0===x.length?[]:"decrypt"===this.type?this._updateDecrypt(x):this._updateEncrypt(x)},N.prototype._buffer=function(x,u){for(var g=Math.min(this.buffer.length-this.bufferOff,x.length-u),M=0;M<g;M++)this.buffer[this.bufferOff+M]=x[u+M];return this.bufferOff+=g,g},N.prototype._flushBuffer=function(x,u){return this._update(this.buffer,0,x,u),this.bufferOff=0,this.blockSize},N.prototype._updateEncrypt=function(x){var u=0,g=0,A=new Array(((this.bufferOff+x.length)/this.blockSize|0)*this.blockSize);0!==this.bufferOff&&(u+=this._buffer(x,u),this.bufferOff===this.buffer.length&&(g+=this._flushBuffer(A,g)));for(var I=x.length-(x.length-u)%this.blockSize;u<I;u+=this.blockSize)this._update(x,u,A,g),g+=this.blockSize;for(;u<x.length;u++,this.bufferOff++)this.buffer[this.bufferOff]=x[u];return A},N.prototype._updateDecrypt=function(x){for(var u=0,g=0,M=Math.ceil((this.bufferOff+x.length)/this.blockSize)-1,A=new Array(M*this.blockSize);M>0;M--)u+=this._buffer(x,u),g+=this._flushBuffer(A,g);return u+=this._buffer(x,u),A},N.prototype.final=function(x){var u,g;return x&&(u=this.update(x)),g="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),u?u.concat(g):g},N.prototype._pad=function(x,u){if(0===u)return!1;for(;u<x.length;)x[u++]=0;return!0},N.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var x=new Array(this.blockSize);return this._update(this.buffer,0,x,0),x},N.prototype._unpad=function(x){return x},N.prototype._finalDecrypt=function(){p.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var x=new Array(this.blockSize);return this._flushBuffer(x,0),this._unpad(x)}},2917:(Y,L,T)=>{"use strict";var p=T(6055),N=T(9879),m=T(6157),x=T(2243);function u(){this.tmp=new Array(2),this.keys=null}function g(A){x.call(this,A);var I=new u;this._desState=I,this.deriveKeys(I,A.key)}N(g,x),Y.exports=g,g.create=function(I){return new g(I)};var M=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];g.prototype.deriveKeys=function(I,y){I.keys=new Array(32),p.equal(y.length,this.blockSize,"Invalid key length");var h=m.readUInt32BE(y,0),C=m.readUInt32BE(y,4);m.pc1(h,C,I.tmp,0),h=I.tmp[0],C=I.tmp[1];for(var v=0;v<I.keys.length;v+=2){var w=M[v>>>1];h=m.r28shl(h,w),C=m.r28shl(C,w),m.pc2(h,C,I.keys,v)}},g.prototype._update=function(I,y,h,C){var v=this._desState,w=m.readUInt32BE(I,y),S=m.readUInt32BE(I,y+4);m.ip(w,S,v.tmp,0),w=v.tmp[0],S=v.tmp[1],"encrypt"===this.type?this._encrypt(v,w,S,v.tmp,0):this._decrypt(v,w,S,v.tmp,0),S=v.tmp[1],m.writeUInt32BE(h,w=v.tmp[0],C),m.writeUInt32BE(h,S,C+4)},g.prototype._pad=function(I,y){for(var h=I.length-y,C=y;C<I.length;C++)I[C]=h;return!0},g.prototype._unpad=function(I){for(var y=I[I.length-1],h=I.length-y;h<I.length;h++)p.equal(I[h],y);return I.slice(0,I.length-y)},g.prototype._encrypt=function(I,y,h,C,v){for(var w=y,S=h,P=0;P<I.keys.length;P+=2){var k=I.keys[P],O=I.keys[P+1];m.expand(S,I.tmp,0);var V=m.substitute(k^=I.tmp[0],O^=I.tmp[1]),B=S;S=(w^m.permute(V))>>>0,w=B}m.rip(S,w,C,v)},g.prototype._decrypt=function(I,y,h,C,v){for(var w=h,S=y,P=I.keys.length-2;P>=0;P-=2){var k=I.keys[P],O=I.keys[P+1];m.expand(w,I.tmp,0);var V=m.substitute(k^=I.tmp[0],O^=I.tmp[1]),B=w;w=(S^m.permute(V))>>>0,S=B}m.rip(w,S,C,v)}},1082:(Y,L,T)=>{"use strict";var p=T(6055),N=T(9879),m=T(2243),x=T(2917);function u(M,A){p.equal(A.length,24,"Invalid key length");var I=A.slice(0,8),y=A.slice(8,16),h=A.slice(16,24);this.ciphers="encrypt"===M?[x.create({type:"encrypt",key:I}),x.create({type:"decrypt",key:y}),x.create({type:"encrypt",key:h})]:[x.create({type:"decrypt",key:h}),x.create({type:"encrypt",key:y}),x.create({type:"decrypt",key:I})]}function g(M){m.call(this,M);var A=new u(this.type,this.options.key);this._edeState=A}N(g,m),Y.exports=g,g.create=function(A){return new g(A)},g.prototype._update=function(A,I,y,h){var C=this._edeState;C.ciphers[0]._update(A,I,y,h),C.ciphers[1]._update(y,h,y,h),C.ciphers[2]._update(y,h,y,h)},g.prototype._pad=x.prototype._pad,g.prototype._unpad=x.prototype._unpad},6157:(Y,L)=>{"use strict";L.readUInt32BE=function(x,u){return(x[0+u]<<24|x[1+u]<<16|x[2+u]<<8|x[3+u])>>>0},L.writeUInt32BE=function(x,u,g){x[0+g]=u>>>24,x[1+g]=u>>>16&255,x[2+g]=u>>>8&255,x[3+g]=255&u},L.ip=function(x,u,g,M){for(var A=0,I=0,y=6;y>=0;y-=2){for(var h=0;h<=24;h+=8)A<<=1,A|=u>>>h+y&1;for(h=0;h<=24;h+=8)A<<=1,A|=x>>>h+y&1}for(y=6;y>=0;y-=2){for(h=1;h<=25;h+=8)I<<=1,I|=u>>>h+y&1;for(h=1;h<=25;h+=8)I<<=1,I|=x>>>h+y&1}g[M+0]=A>>>0,g[M+1]=I>>>0},L.rip=function(x,u,g,M){for(var A=0,I=0,y=0;y<4;y++)for(var h=24;h>=0;h-=8)A<<=1,A|=u>>>h+y&1,A<<=1,A|=x>>>h+y&1;for(y=4;y<8;y++)for(h=24;h>=0;h-=8)I<<=1,I|=u>>>h+y&1,I<<=1,I|=x>>>h+y&1;g[M+0]=A>>>0,g[M+1]=I>>>0},L.pc1=function(x,u,g,M){for(var A=0,I=0,y=7;y>=5;y--){for(var h=0;h<=24;h+=8)A<<=1,A|=u>>h+y&1;for(h=0;h<=24;h+=8)A<<=1,A|=x>>h+y&1}for(h=0;h<=24;h+=8)A<<=1,A|=u>>h+y&1;for(y=1;y<=3;y++){for(h=0;h<=24;h+=8)I<<=1,I|=u>>h+y&1;for(h=0;h<=24;h+=8)I<<=1,I|=x>>h+y&1}for(h=0;h<=24;h+=8)I<<=1,I|=x>>h+y&1;g[M+0]=A>>>0,g[M+1]=I>>>0},L.r28shl=function(x,u){return x<<u&268435455|x>>>28-u};var T=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];L.pc2=function(x,u,g,M){for(var A=0,I=0,y=T.length>>>1,h=0;h<y;h++)A<<=1,A|=x>>>T[h]&1;for(h=y;h<T.length;h++)I<<=1,I|=u>>>T[h]&1;g[M+0]=A>>>0,g[M+1]=I>>>0},L.expand=function(x,u,g){var M=0,A=0;M=(1&x)<<5|x>>>27;for(var I=23;I>=15;I-=4)M<<=6,M|=x>>>I&63;for(I=11;I>=3;I-=4)A|=x>>>I&63,A<<=6;A|=(31&x)<<1|x>>>31,u[g+0]=M>>>0,u[g+1]=A>>>0};var p=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];L.substitute=function(x,u){for(var g=0,M=0;M<4;M++)g<<=4,g|=p[64*M+(x>>>18-6*M&63)];for(M=0;M<4;M++)g<<=4,g|=p[256+64*M+(u>>>18-6*M&63)];return g>>>0};var N=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];L.permute=function(x){for(var u=0,g=0;g<N.length;g++)u<<=1,u|=x>>>N[g]&1;return u>>>0},L.padSplit=function(x,u,g){for(var M=x.toString(2);M.length<u;)M="0"+M;for(var A=[],I=0;I<u;I+=g)A.push(M.slice(I,I+g));return A.join(" ")}},2322:(Y,L,T)=>{var p=T(4069),N=T(9799),m=T(6374),u={binary:!0,hex:!0,base64:!0};L.DiffieHellmanGroup=L.createDiffieHellmanGroup=L.getDiffieHellman=function(M){var A=new Buffer(N[M].prime,"hex"),I=new Buffer(N[M].gen,"hex");return new m(A,I)},L.createDiffieHellman=L.DiffieHellman=function g(M,A,I,y){return Buffer.isBuffer(A)||void 0===u[A]?g(M,"binary",A,I):(A=A||"binary",y=y||"binary",I=I||new Buffer([2]),Buffer.isBuffer(I)||(I=new Buffer(I,y)),"number"==typeof M?new m(p(M,I),I,!0):(Buffer.isBuffer(M)||(M=new Buffer(M,A)),new m(M,I,!0)))}},6374:(Y,L,T)=>{var p=T(4980),m=new(T(4398)),x=new p(24),u=new p(11),g=new p(10),M=new p(3),A=new p(7),I=T(4069),y=T(6589);function h(k,O){return O=O||"utf8",Buffer.isBuffer(k)||(k=new Buffer(k,O)),this._pub=new p(k),this}function C(k,O){return O=O||"utf8",Buffer.isBuffer(k)||(k=new Buffer(k,O)),this._priv=new p(k),this}Y.exports=S;var v={};function S(k,O,V){this.setGenerator(O),this.__prime=new p(k),this._prime=p.mont(this.__prime),this._primeLen=k.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,V?(this.setPublicKey=h,this.setPrivateKey=C):this._primeCode=8}function P(k,O){var V=new Buffer(k.toArray());return O?V.toString(O):V}Object.defineProperty(S.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(k,O){var V=O.toString("hex"),U=[V,k.toString(16)].join("_");if(U in v)return v[U];var H,B=0;if(k.isEven()||!I.simpleSieve||!I.fermatTest(k)||!m.test(k))return B+=1,v[U]=B+="02"===V||"05"===V?8:4,B;switch(m.test(k.shrn(1))||(B+=2),V){case"02":k.mod(x).cmp(u)&&(B+=8);break;case"05":(H=k.mod(g)).cmp(M)&&H.cmp(A)&&(B+=8);break;default:B+=4}return v[U]=B,B}(this.__prime,this.__gen)),this._primeCode}}),S.prototype.generateKeys=function(){return this._priv||(this._priv=new p(y(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},S.prototype.computeSecret=function(k){var O=(k=(k=new p(k)).toRed(this._prime)).redPow(this._priv).fromRed(),V=new Buffer(O.toArray()),U=this.getPrime();if(V.length<U.length){var B=new Buffer(U.length-V.length);B.fill(0),V=Buffer.concat([B,V])}return V},S.prototype.getPublicKey=function(O){return P(this._pub,O)},S.prototype.getPrivateKey=function(O){return P(this._priv,O)},S.prototype.getPrime=function(k){return P(this.__prime,k)},S.prototype.getGenerator=function(k){return P(this._gen,k)},S.prototype.setGenerator=function(k,O){return O=O||"utf8",Buffer.isBuffer(k)||(k=new Buffer(k,O)),this.__gen=k,this._gen=new p(k),this}},4069:(Y,L,T)=>{var p=T(6589);Y.exports=B,B.simpleSieve=V,B.fermatTest=U;var N=T(4980),m=new N(24),u=new(T(4398)),g=new N(1),M=new N(2),A=new N(5),h=(new N(16),new N(8),new N(10)),C=new N(3),w=(new N(7),new N(11)),S=new N(4),k=(new N(12),null);function V(H){for(var W=function(){if(null!==k)return k;var W=[];W[0]=2;for(var te=1,$=3;$<1048576;$+=2){for(var pe=Math.ceil(Math.sqrt($)),R=0;R<te&&W[R]<=pe&&$%W[R]!=0;R++);te!==R&&W[R]<=pe||(W[te++]=$)}return k=W,W}(),te=0;te<W.length;te++)if(0===H.modn(W[te]))return 0===H.cmpn(W[te]);return!0}function U(H){var W=N.mont(H);return 0===M.toRed(W).redPow(H.subn(1)).fromRed().cmpn(1)}function B(H,W){if(H<16)return new N(2===W||5===W?[140,123]:[140,39]);W=new N(W);for(var te,$;;){for(te=new N(p(Math.ceil(H/8)));te.bitLength()>H;)te.ishrn(1);if(te.isEven()&&te.iadd(g),te.testn(1)||te.iadd(M),W.cmp(M)){if(!W.cmp(A))for(;te.mod(h).cmp(C);)te.iadd(S)}else for(;te.mod(m).cmp(w);)te.iadd(S);if(V($=te.shrn(1))&&V(te)&&U($)&&U(te)&&u.test($)&&u.test(te))return te}}},4980:function(Y,L,T){!function(p,N){"use strict";function m(R,r){if(!R)throw new Error(r||"Assertion failed")}function x(R,r){R.super_=r;var s=function(){};s.prototype=r.prototype,R.prototype=new s,R.prototype.constructor=R}function u(R,r,s){if(u.isBN(R))return R;this.negative=0,this.words=null,this.length=0,this.red=null,null!==R&&(("le"===r||"be"===r)&&(s=r,r=10),this._init(R||0,r||10,s||"be"))}var g;"object"==typeof p?p.exports=u:N.BN=u,u.BN=u,u.wordSize=26;try{g="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:T(7748).Buffer}catch(R){}function M(R,r){var s=R.charCodeAt(r);return s>=65&&s<=70?s-55:s>=97&&s<=102?s-87:s-48&15}function A(R,r,s){var l=M(R,s);return s-1>=r&&(l|=M(R,s-1)<<4),l}function I(R,r,s,l){for(var a=0,f=Math.min(R.length,s),_=r;_<f;_++){var D=R.charCodeAt(_)-48;a*=l,a+=D>=49?D-49+10:D>=17?D-17+10:D}return a}u.isBN=function(r){return r instanceof u||null!==r&&"object"==typeof r&&r.constructor.wordSize===u.wordSize&&Array.isArray(r.words)},u.max=function(r,s){return r.cmp(s)>0?r:s},u.min=function(r,s){return r.cmp(s)<0?r:s},u.prototype._init=function(r,s,l){if("number"==typeof r)return this._initNumber(r,s,l);if("object"==typeof r)return this._initArray(r,s,l);"hex"===s&&(s=16),m(s===(0|s)&&s>=2&&s<=36);var a=0;"-"===(r=r.toString().replace(/\s+/g,""))[0]&&(a++,this.negative=1),a<r.length&&(16===s?this._parseHex(r,a,l):(this._parseBase(r,s,a),"le"===l&&this._initArray(this.toArray(),s,l)))},u.prototype._initNumber=function(r,s,l){r<0&&(this.negative=1,r=-r),r<67108864?(this.words=[67108863&r],this.length=1):r<4503599627370496?(this.words=[67108863&r,r/67108864&67108863],this.length=2):(m(r<9007199254740992),this.words=[67108863&r,r/67108864&67108863,1],this.length=3),"le"===l&&this._initArray(this.toArray(),s,l)},u.prototype._initArray=function(r,s,l){if(m("number"==typeof r.length),r.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(r.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var f,_,D=0;if("be"===l)for(a=r.length-1,f=0;a>=0;a-=3)this.words[f]|=(_=r[a]|r[a-1]<<8|r[a-2]<<16)<<D&67108863,this.words[f+1]=_>>>26-D&67108863,(D+=24)>=26&&(D-=26,f++);else if("le"===l)for(a=0,f=0;a<r.length;a+=3)this.words[f]|=(_=r[a]|r[a+1]<<8|r[a+2]<<16)<<D&67108863,this.words[f+1]=_>>>26-D&67108863,(D+=24)>=26&&(D-=26,f++);return this.strip()},u.prototype._parseHex=function(r,s,l){this.length=Math.ceil((r.length-s)/6),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var D,f=0,_=0;if("be"===l)for(a=r.length-1;a>=s;a-=2)D=A(r,s,a)<<f,this.words[_]|=67108863&D,f>=18?(f-=18,this.words[_+=1]|=D>>>26):f+=8;else for(a=(r.length-s)%2==0?s+1:s;a<r.length;a+=2)D=A(r,s,a)<<f,this.words[_]|=67108863&D,f>=18?(f-=18,this.words[_+=1]|=D>>>26):f+=8;this.strip()},u.prototype._parseBase=function(r,s,l){this.words=[0],this.length=1;for(var a=0,f=1;f<=67108863;f*=s)a++;a--,f=f/s|0;for(var _=r.length-l,D=_%a,d=Math.min(_,_-D)+l,i=0,b=l;b<d;b+=a)i=I(r,b,b+a,s),this.imuln(f),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i);if(0!==D){var z=1;for(i=I(r,b,r.length,s),b=0;b<D;b++)z*=s;this.imuln(z),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i)}this.strip()},u.prototype.copy=function(r){r.words=new Array(this.length);for(var s=0;s<this.length;s++)r.words[s]=this.words[s];r.length=this.length,r.negative=this.negative,r.red=this.red},u.prototype.clone=function(){var r=new u(null);return this.copy(r),r},u.prototype._expand=function(r){for(;this.length<r;)this.words[this.length++]=0;return this},u.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},u.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},u.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],C=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function w(R,r,s){s.negative=r.negative^R.negative;var l=R.length+r.length|0;s.length=l,l=l-1|0;var a=0|R.words[0],f=0|r.words[0],_=a*f,d=_/67108864|0;s.words[0]=67108863&_;for(var i=1;i<l;i++){for(var b=d>>>26,z=67108863&d,q=Math.min(i,r.length-1),J=Math.max(0,i-R.length+1);J<=q;J++)b+=(_=(a=0|R.words[i-J|0])*(f=0|r.words[J])+z)/67108864|0,z=67108863&_;s.words[i]=0|z,d=0|b}return 0!==d?s.words[i]=0|d:s.length--,s.strip()}u.prototype.toString=function(r,s){var l;if(s=0|s||1,16===(r=r||10)||"hex"===r){l="";for(var a=0,f=0,_=0;_<this.length;_++){var D=this.words[_],d=(16777215&(D<<a|f)).toString(16);l=0!=(f=D>>>24-a&16777215)||_!==this.length-1?y[6-d.length]+d+l:d+l,(a+=2)>=26&&(a-=26,_--)}for(0!==f&&(l=f.toString(16)+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}if(r===(0|r)&&r>=2&&r<=36){var i=h[r],b=C[r];l="";var z=this.clone();for(z.negative=0;!z.isZero();){var q=z.modn(b).toString(r);l=(z=z.idivn(b)).isZero()?q+l:y[i-q.length]+q+l}for(this.isZero()&&(l="0"+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}m(!1,"Base should be between 2 and 36")},u.prototype.toNumber=function(){var r=this.words[0];return 2===this.length?r+=67108864*this.words[1]:3===this.length&&1===this.words[2]?r+=4503599627370496+67108864*this.words[1]:this.length>2&&m(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-r:r},u.prototype.toJSON=function(){return this.toString(16)},u.prototype.toBuffer=function(r,s){return m(void 0!==g),this.toArrayLike(g,r,s)},u.prototype.toArray=function(r,s){return this.toArrayLike(Array,r,s)},u.prototype.toArrayLike=function(r,s,l){var a=this.byteLength(),f=l||Math.max(1,a);m(a<=f,"byte array longer than desired length"),m(f>0,"Requested array length <= 0"),this.strip();var d,i,_="le"===s,D=new r(f),b=this.clone();if(_){for(i=0;!b.isZero();i++)d=b.andln(255),b.iushrn(8),D[i]=d;for(;i<f;i++)D[i]=0}else{for(i=0;i<f-a;i++)D[i]=0;for(i=0;!b.isZero();i++)d=b.andln(255),b.iushrn(8),D[f-i-1]=d}return D},u.prototype._countBits=Math.clz32?function(r){return 32-Math.clz32(r)}:function(r){var s=r,l=0;return s>=4096&&(l+=13,s>>>=13),s>=64&&(l+=7,s>>>=7),s>=8&&(l+=4,s>>>=4),s>=2&&(l+=2,s>>>=2),l+s},u.prototype._zeroBits=function(r){if(0===r)return 26;var s=r,l=0;return 0==(8191&s)&&(l+=13,s>>>=13),0==(127&s)&&(l+=7,s>>>=7),0==(15&s)&&(l+=4,s>>>=4),0==(3&s)&&(l+=2,s>>>=2),0==(1&s)&&l++,l},u.prototype.bitLength=function(){var s=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+s},u.prototype.zeroBits=function(){if(this.isZero())return 0;for(var r=0,s=0;s<this.length;s++){var l=this._zeroBits(this.words[s]);if(r+=l,26!==l)break}return r},u.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},u.prototype.toTwos=function(r){return 0!==this.negative?this.abs().inotn(r).iaddn(1):this.clone()},u.prototype.fromTwos=function(r){return this.testn(r-1)?this.notn(r).iaddn(1).ineg():this.clone()},u.prototype.isNeg=function(){return 0!==this.negative},u.prototype.neg=function(){return this.clone().ineg()},u.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},u.prototype.iuor=function(r){for(;this.length<r.length;)this.words[this.length++]=0;for(var s=0;s<r.length;s++)this.words[s]=this.words[s]|r.words[s];return this.strip()},u.prototype.ior=function(r){return m(0==(this.negative|r.negative)),this.iuor(r)},u.prototype.or=function(r){return this.length>r.length?this.clone().ior(r):r.clone().ior(this)},u.prototype.uor=function(r){return this.length>r.length?this.clone().iuor(r):r.clone().iuor(this)},u.prototype.iuand=function(r){var s;s=this.length>r.length?r:this;for(var l=0;l<s.length;l++)this.words[l]=this.words[l]&r.words[l];return this.length=s.length,this.strip()},u.prototype.iand=function(r){return m(0==(this.negative|r.negative)),this.iuand(r)},u.prototype.and=function(r){return this.length>r.length?this.clone().iand(r):r.clone().iand(this)},u.prototype.uand=function(r){return this.length>r.length?this.clone().iuand(r):r.clone().iuand(this)},u.prototype.iuxor=function(r){var s,l;this.length>r.length?(s=this,l=r):(s=r,l=this);for(var a=0;a<l.length;a++)this.words[a]=s.words[a]^l.words[a];if(this!==s)for(;a<s.length;a++)this.words[a]=s.words[a];return this.length=s.length,this.strip()},u.prototype.ixor=function(r){return m(0==(this.negative|r.negative)),this.iuxor(r)},u.prototype.xor=function(r){return this.length>r.length?this.clone().ixor(r):r.clone().ixor(this)},u.prototype.uxor=function(r){return this.length>r.length?this.clone().iuxor(r):r.clone().iuxor(this)},u.prototype.inotn=function(r){m("number"==typeof r&&r>=0);var s=0|Math.ceil(r/26),l=r%26;this._expand(s),l>0&&s--;for(var a=0;a<s;a++)this.words[a]=67108863&~this.words[a];return l>0&&(this.words[a]=~this.words[a]&67108863>>26-l),this.strip()},u.prototype.notn=function(r){return this.clone().inotn(r)},u.prototype.setn=function(r,s){m("number"==typeof r&&r>=0);var l=r/26|0,a=r%26;return this._expand(l+1),this.words[l]=s?this.words[l]|1<<a:this.words[l]&~(1<<a),this.strip()},u.prototype.iadd=function(r){var s,l,a;if(0!==this.negative&&0===r.negative)return this.negative=0,s=this.isub(r),this.negative^=1,this._normSign();if(0===this.negative&&0!==r.negative)return r.negative=0,s=this.isub(r),r.negative=1,s._normSign();this.length>r.length?(l=this,a=r):(l=r,a=this);for(var f=0,_=0;_<a.length;_++)this.words[_]=67108863&(s=(0|l.words[_])+(0|a.words[_])+f),f=s>>>26;for(;0!==f&&_<l.length;_++)this.words[_]=67108863&(s=(0|l.words[_])+f),f=s>>>26;if(this.length=l.length,0!==f)this.words[this.length]=f,this.length++;else if(l!==this)for(;_<l.length;_++)this.words[_]=l.words[_];return this},u.prototype.add=function(r){var s;return 0!==r.negative&&0===this.negative?(r.negative=0,s=this.sub(r),r.negative^=1,s):0===r.negative&&0!==this.negative?(this.negative=0,s=r.sub(this),this.negative=1,s):this.length>r.length?this.clone().iadd(r):r.clone().iadd(this)},u.prototype.isub=function(r){if(0!==r.negative){r.negative=0;var s=this.iadd(r);return r.negative=1,s._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(r),this.negative=1,this._normSign();var a,f,l=this.cmp(r);if(0===l)return this.negative=0,this.length=1,this.words[0]=0,this;l>0?(a=this,f=r):(a=r,f=this);for(var _=0,D=0;D<f.length;D++)_=(s=(0|a.words[D])-(0|f.words[D])+_)>>26,this.words[D]=67108863&s;for(;0!==_&&D<a.length;D++)_=(s=(0|a.words[D])+_)>>26,this.words[D]=67108863&s;if(0===_&&D<a.length&&a!==this)for(;D<a.length;D++)this.words[D]=a.words[D];return this.length=Math.max(this.length,D),a!==this&&(this.negative=1),this.strip()},u.prototype.sub=function(r){return this.clone().isub(r)};var S=function(r,s,l){var d,i,b,a=r.words,f=s.words,_=l.words,D=0,z=0|a[0],q=8191&z,J=z>>>13,ge=0|a[1],me=8191&ge,le=ge>>>13,fe=0|a[2],ae=8191&fe,de=fe>>>13,xe=0|a[3],Ce=8191&xe,oe=xe>>>13,we=0|a[4],ye=8191&we,re=we>>>13,ee=0|a[5],Z=8191&ee,ue=ee>>>13,Re=0|a[6],Te=8191&Re,Ee=Re>>>13,$e=0|a[7],Ne=8191&$e,_e=$e>>>13,Be=0|a[8],Ae=8191&Be,Le=Be>>>13,Ct=0|a[9],He=8191&Ct,We=Ct>>>13,Vt=0|f[0],qe=8191&Vt,ct=Vt>>>13,Mt=0|f[1],it=8191&Mt,at=Mt>>>13,Dn=0|f[2],ot=8191&Dn,Je=Dn>>>13,En=0|f[3],Ge=8191&En,dt=En>>>13,Pn=0|f[4],ut=8191&Pn,Ve=Pn>>>13,On=0|f[5],Ke=8191&On,st=On>>>13,qn=0|f[6],ft=8191&qn,ze=qn>>>13,sn=0|f[7],ht=8191&sn,tt=sn>>>13,Qt=0|f[8],et=8191&Qt,Xe=Qt>>>13,kn=0|f[9],Ye=8191&kn,lt=kn>>>13;l.negative=r.negative^s.negative,l.length=19;var un=(D+(d=Math.imul(q,qe))|0)+((8191&(i=(i=Math.imul(q,ct))+Math.imul(J,qe)|0))<<13)|0;D=((b=Math.imul(J,ct))+(i>>>13)|0)+(un>>>26)|0,un&=67108863,d=Math.imul(me,qe),i=(i=Math.imul(me,ct))+Math.imul(le,qe)|0,b=Math.imul(le,ct);var Ht=(D+(d=d+Math.imul(q,it)|0)|0)+((8191&(i=(i=i+Math.imul(q,at)|0)+Math.imul(J,it)|0))<<13)|0;D=((b=b+Math.imul(J,at)|0)+(i>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,d=Math.imul(ae,qe),i=(i=Math.imul(ae,ct))+Math.imul(de,qe)|0,b=Math.imul(de,ct),d=d+Math.imul(me,it)|0,i=(i=i+Math.imul(me,at)|0)+Math.imul(le,it)|0,b=b+Math.imul(le,at)|0;var jt=(D+(d=d+Math.imul(q,ot)|0)|0)+((8191&(i=(i=i+Math.imul(q,Je)|0)+Math.imul(J,ot)|0))<<13)|0;D=((b=b+Math.imul(J,Je)|0)+(i>>>13)|0)+(jt>>>26)|0,jt&=67108863,d=Math.imul(Ce,qe),i=(i=Math.imul(Ce,ct))+Math.imul(oe,qe)|0,b=Math.imul(oe,ct),d=d+Math.imul(ae,it)|0,i=(i=i+Math.imul(ae,at)|0)+Math.imul(de,it)|0,b=b+Math.imul(de,at)|0,d=d+Math.imul(me,ot)|0,i=(i=i+Math.imul(me,Je)|0)+Math.imul(le,ot)|0,b=b+Math.imul(le,Je)|0;var bn=(D+(d=d+Math.imul(q,Ge)|0)|0)+((8191&(i=(i=i+Math.imul(q,dt)|0)+Math.imul(J,Ge)|0))<<13)|0;D=((b=b+Math.imul(J,dt)|0)+(i>>>13)|0)+(bn>>>26)|0,bn&=67108863,d=Math.imul(ye,qe),i=(i=Math.imul(ye,ct))+Math.imul(re,qe)|0,b=Math.imul(re,ct),d=d+Math.imul(Ce,it)|0,i=(i=i+Math.imul(Ce,at)|0)+Math.imul(oe,it)|0,b=b+Math.imul(oe,at)|0,d=d+Math.imul(ae,ot)|0,i=(i=i+Math.imul(ae,Je)|0)+Math.imul(de,ot)|0,b=b+Math.imul(de,Je)|0,d=d+Math.imul(me,Ge)|0,i=(i=i+Math.imul(me,dt)|0)+Math.imul(le,Ge)|0,b=b+Math.imul(le,dt)|0;var dn=(D+(d=d+Math.imul(q,ut)|0)|0)+((8191&(i=(i=i+Math.imul(q,Ve)|0)+Math.imul(J,ut)|0))<<13)|0;D=((b=b+Math.imul(J,Ve)|0)+(i>>>13)|0)+(dn>>>26)|0,dn&=67108863,d=Math.imul(Z,qe),i=(i=Math.imul(Z,ct))+Math.imul(ue,qe)|0,b=Math.imul(ue,ct),d=d+Math.imul(ye,it)|0,i=(i=i+Math.imul(ye,at)|0)+Math.imul(re,it)|0,b=b+Math.imul(re,at)|0,d=d+Math.imul(Ce,ot)|0,i=(i=i+Math.imul(Ce,Je)|0)+Math.imul(oe,ot)|0,b=b+Math.imul(oe,Je)|0,d=d+Math.imul(ae,Ge)|0,i=(i=i+Math.imul(ae,dt)|0)+Math.imul(de,Ge)|0,b=b+Math.imul(de,dt)|0,d=d+Math.imul(me,ut)|0,i=(i=i+Math.imul(me,Ve)|0)+Math.imul(le,ut)|0,b=b+Math.imul(le,Ve)|0;var pn=(D+(d=d+Math.imul(q,Ke)|0)|0)+((8191&(i=(i=i+Math.imul(q,st)|0)+Math.imul(J,Ke)|0))<<13)|0;D=((b=b+Math.imul(J,st)|0)+(i>>>13)|0)+(pn>>>26)|0,pn&=67108863,d=Math.imul(Te,qe),i=(i=Math.imul(Te,ct))+Math.imul(Ee,qe)|0,b=Math.imul(Ee,ct),d=d+Math.imul(Z,it)|0,i=(i=i+Math.imul(Z,at)|0)+Math.imul(ue,it)|0,b=b+Math.imul(ue,at)|0,d=d+Math.imul(ye,ot)|0,i=(i=i+Math.imul(ye,Je)|0)+Math.imul(re,ot)|0,b=b+Math.imul(re,Je)|0,d=d+Math.imul(Ce,Ge)|0,i=(i=i+Math.imul(Ce,dt)|0)+Math.imul(oe,Ge)|0,b=b+Math.imul(oe,dt)|0,d=d+Math.imul(ae,ut)|0,i=(i=i+Math.imul(ae,Ve)|0)+Math.imul(de,ut)|0,b=b+Math.imul(de,Ve)|0,d=d+Math.imul(me,Ke)|0,i=(i=i+Math.imul(me,st)|0)+Math.imul(le,Ke)|0,b=b+Math.imul(le,st)|0;var In=(D+(d=d+Math.imul(q,ft)|0)|0)+((8191&(i=(i=i+Math.imul(q,ze)|0)+Math.imul(J,ft)|0))<<13)|0;D=((b=b+Math.imul(J,ze)|0)+(i>>>13)|0)+(In>>>26)|0,In&=67108863,d=Math.imul(Ne,qe),i=(i=Math.imul(Ne,ct))+Math.imul(_e,qe)|0,b=Math.imul(_e,ct),d=d+Math.imul(Te,it)|0,i=(i=i+Math.imul(Te,at)|0)+Math.imul(Ee,it)|0,b=b+Math.imul(Ee,at)|0,d=d+Math.imul(Z,ot)|0,i=(i=i+Math.imul(Z,Je)|0)+Math.imul(ue,ot)|0,b=b+Math.imul(ue,Je)|0,d=d+Math.imul(ye,Ge)|0,i=(i=i+Math.imul(ye,dt)|0)+Math.imul(re,Ge)|0,b=b+Math.imul(re,dt)|0,d=d+Math.imul(Ce,ut)|0,i=(i=i+Math.imul(Ce,Ve)|0)+Math.imul(oe,ut)|0,b=b+Math.imul(oe,Ve)|0,d=d+Math.imul(ae,Ke)|0,i=(i=i+Math.imul(ae,st)|0)+Math.imul(de,Ke)|0,b=b+Math.imul(de,st)|0,d=d+Math.imul(me,ft)|0,i=(i=i+Math.imul(me,ze)|0)+Math.imul(le,ft)|0,b=b+Math.imul(le,ze)|0;var rn=(D+(d=d+Math.imul(q,ht)|0)|0)+((8191&(i=(i=i+Math.imul(q,tt)|0)+Math.imul(J,ht)|0))<<13)|0;D=((b=b+Math.imul(J,tt)|0)+(i>>>13)|0)+(rn>>>26)|0,rn&=67108863,d=Math.imul(Ae,qe),i=(i=Math.imul(Ae,ct))+Math.imul(Le,qe)|0,b=Math.imul(Le,ct),d=d+Math.imul(Ne,it)|0,i=(i=i+Math.imul(Ne,at)|0)+Math.imul(_e,it)|0,b=b+Math.imul(_e,at)|0,d=d+Math.imul(Te,ot)|0,i=(i=i+Math.imul(Te,Je)|0)+Math.imul(Ee,ot)|0,b=b+Math.imul(Ee,Je)|0,d=d+Math.imul(Z,Ge)|0,i=(i=i+Math.imul(Z,dt)|0)+Math.imul(ue,Ge)|0,b=b+Math.imul(ue,dt)|0,d=d+Math.imul(ye,ut)|0,i=(i=i+Math.imul(ye,Ve)|0)+Math.imul(re,ut)|0,b=b+Math.imul(re,Ve)|0,d=d+Math.imul(Ce,Ke)|0,i=(i=i+Math.imul(Ce,st)|0)+Math.imul(oe,Ke)|0,b=b+Math.imul(oe,st)|0,d=d+Math.imul(ae,ft)|0,i=(i=i+Math.imul(ae,ze)|0)+Math.imul(de,ft)|0,b=b+Math.imul(de,ze)|0,d=d+Math.imul(me,ht)|0,i=(i=i+Math.imul(me,tt)|0)+Math.imul(le,ht)|0,b=b+Math.imul(le,tt)|0;var Cn=(D+(d=d+Math.imul(q,et)|0)|0)+((8191&(i=(i=i+Math.imul(q,Xe)|0)+Math.imul(J,et)|0))<<13)|0;D=((b=b+Math.imul(J,Xe)|0)+(i>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,d=Math.imul(He,qe),i=(i=Math.imul(He,ct))+Math.imul(We,qe)|0,b=Math.imul(We,ct),d=d+Math.imul(Ae,it)|0,i=(i=i+Math.imul(Ae,at)|0)+Math.imul(Le,it)|0,b=b+Math.imul(Le,at)|0,d=d+Math.imul(Ne,ot)|0,i=(i=i+Math.imul(Ne,Je)|0)+Math.imul(_e,ot)|0,b=b+Math.imul(_e,Je)|0,d=d+Math.imul(Te,Ge)|0,i=(i=i+Math.imul(Te,dt)|0)+Math.imul(Ee,Ge)|0,b=b+Math.imul(Ee,dt)|0,d=d+Math.imul(Z,ut)|0,i=(i=i+Math.imul(Z,Ve)|0)+Math.imul(ue,ut)|0,b=b+Math.imul(ue,Ve)|0,d=d+Math.imul(ye,Ke)|0,i=(i=i+Math.imul(ye,st)|0)+Math.imul(re,Ke)|0,b=b+Math.imul(re,st)|0,d=d+Math.imul(Ce,ft)|0,i=(i=i+Math.imul(Ce,ze)|0)+Math.imul(oe,ft)|0,b=b+Math.imul(oe,ze)|0,d=d+Math.imul(ae,ht)|0,i=(i=i+Math.imul(ae,tt)|0)+Math.imul(de,ht)|0,b=b+Math.imul(de,tt)|0,d=d+Math.imul(me,et)|0,i=(i=i+Math.imul(me,Xe)|0)+Math.imul(le,et)|0,b=b+Math.imul(le,Xe)|0;var Kt=(D+(d=d+Math.imul(q,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(q,lt)|0)+Math.imul(J,Ye)|0))<<13)|0;D=((b=b+Math.imul(J,lt)|0)+(i>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,d=Math.imul(He,it),i=(i=Math.imul(He,at))+Math.imul(We,it)|0,b=Math.imul(We,at),d=d+Math.imul(Ae,ot)|0,i=(i=i+Math.imul(Ae,Je)|0)+Math.imul(Le,ot)|0,b=b+Math.imul(Le,Je)|0,d=d+Math.imul(Ne,Ge)|0,i=(i=i+Math.imul(Ne,dt)|0)+Math.imul(_e,Ge)|0,b=b+Math.imul(_e,dt)|0,d=d+Math.imul(Te,ut)|0,i=(i=i+Math.imul(Te,Ve)|0)+Math.imul(Ee,ut)|0,b=b+Math.imul(Ee,Ve)|0,d=d+Math.imul(Z,Ke)|0,i=(i=i+Math.imul(Z,st)|0)+Math.imul(ue,Ke)|0,b=b+Math.imul(ue,st)|0,d=d+Math.imul(ye,ft)|0,i=(i=i+Math.imul(ye,ze)|0)+Math.imul(re,ft)|0,b=b+Math.imul(re,ze)|0,d=d+Math.imul(Ce,ht)|0,i=(i=i+Math.imul(Ce,tt)|0)+Math.imul(oe,ht)|0,b=b+Math.imul(oe,tt)|0,d=d+Math.imul(ae,et)|0,i=(i=i+Math.imul(ae,Xe)|0)+Math.imul(de,et)|0,b=b+Math.imul(de,Xe)|0;var Nt=(D+(d=d+Math.imul(me,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(me,lt)|0)+Math.imul(le,Ye)|0))<<13)|0;D=((b=b+Math.imul(le,lt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,d=Math.imul(He,ot),i=(i=Math.imul(He,Je))+Math.imul(We,ot)|0,b=Math.imul(We,Je),d=d+Math.imul(Ae,Ge)|0,i=(i=i+Math.imul(Ae,dt)|0)+Math.imul(Le,Ge)|0,b=b+Math.imul(Le,dt)|0,d=d+Math.imul(Ne,ut)|0,i=(i=i+Math.imul(Ne,Ve)|0)+Math.imul(_e,ut)|0,b=b+Math.imul(_e,Ve)|0,d=d+Math.imul(Te,Ke)|0,i=(i=i+Math.imul(Te,st)|0)+Math.imul(Ee,Ke)|0,b=b+Math.imul(Ee,st)|0,d=d+Math.imul(Z,ft)|0,i=(i=i+Math.imul(Z,ze)|0)+Math.imul(ue,ft)|0,b=b+Math.imul(ue,ze)|0,d=d+Math.imul(ye,ht)|0,i=(i=i+Math.imul(ye,tt)|0)+Math.imul(re,ht)|0,b=b+Math.imul(re,tt)|0,d=d+Math.imul(Ce,et)|0,i=(i=i+Math.imul(Ce,Xe)|0)+Math.imul(oe,et)|0,b=b+Math.imul(oe,Xe)|0;var xn=(D+(d=d+Math.imul(ae,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(ae,lt)|0)+Math.imul(de,Ye)|0))<<13)|0;D=((b=b+Math.imul(de,lt)|0)+(i>>>13)|0)+(xn>>>26)|0,xn&=67108863,d=Math.imul(He,Ge),i=(i=Math.imul(He,dt))+Math.imul(We,Ge)|0,b=Math.imul(We,dt),d=d+Math.imul(Ae,ut)|0,i=(i=i+Math.imul(Ae,Ve)|0)+Math.imul(Le,ut)|0,b=b+Math.imul(Le,Ve)|0,d=d+Math.imul(Ne,Ke)|0,i=(i=i+Math.imul(Ne,st)|0)+Math.imul(_e,Ke)|0,b=b+Math.imul(_e,st)|0,d=d+Math.imul(Te,ft)|0,i=(i=i+Math.imul(Te,ze)|0)+Math.imul(Ee,ft)|0,b=b+Math.imul(Ee,ze)|0,d=d+Math.imul(Z,ht)|0,i=(i=i+Math.imul(Z,tt)|0)+Math.imul(ue,ht)|0,b=b+Math.imul(ue,tt)|0,d=d+Math.imul(ye,et)|0,i=(i=i+Math.imul(ye,Xe)|0)+Math.imul(re,et)|0,b=b+Math.imul(re,Xe)|0;var wn=(D+(d=d+Math.imul(Ce,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(Ce,lt)|0)+Math.imul(oe,Ye)|0))<<13)|0;D=((b=b+Math.imul(oe,lt)|0)+(i>>>13)|0)+(wn>>>26)|0,wn&=67108863,d=Math.imul(He,ut),i=(i=Math.imul(He,Ve))+Math.imul(We,ut)|0,b=Math.imul(We,Ve),d=d+Math.imul(Ae,Ke)|0,i=(i=i+Math.imul(Ae,st)|0)+Math.imul(Le,Ke)|0,b=b+Math.imul(Le,st)|0,d=d+Math.imul(Ne,ft)|0,i=(i=i+Math.imul(Ne,ze)|0)+Math.imul(_e,ft)|0,b=b+Math.imul(_e,ze)|0,d=d+Math.imul(Te,ht)|0,i=(i=i+Math.imul(Te,tt)|0)+Math.imul(Ee,ht)|0,b=b+Math.imul(Ee,tt)|0,d=d+Math.imul(Z,et)|0,i=(i=i+Math.imul(Z,Xe)|0)+Math.imul(ue,et)|0,b=b+Math.imul(ue,Xe)|0;var Mn=(D+(d=d+Math.imul(ye,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(ye,lt)|0)+Math.imul(re,Ye)|0))<<13)|0;D=((b=b+Math.imul(re,lt)|0)+(i>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,d=Math.imul(He,Ke),i=(i=Math.imul(He,st))+Math.imul(We,Ke)|0,b=Math.imul(We,st),d=d+Math.imul(Ae,ft)|0,i=(i=i+Math.imul(Ae,ze)|0)+Math.imul(Le,ft)|0,b=b+Math.imul(Le,ze)|0,d=d+Math.imul(Ne,ht)|0,i=(i=i+Math.imul(Ne,tt)|0)+Math.imul(_e,ht)|0,b=b+Math.imul(_e,tt)|0,d=d+Math.imul(Te,et)|0,i=(i=i+Math.imul(Te,Xe)|0)+Math.imul(Ee,et)|0,b=b+Math.imul(Ee,Xe)|0;var xt=(D+(d=d+Math.imul(Z,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(Z,lt)|0)+Math.imul(ue,Ye)|0))<<13)|0;D=((b=b+Math.imul(ue,lt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,d=Math.imul(He,ft),i=(i=Math.imul(He,ze))+Math.imul(We,ft)|0,b=Math.imul(We,ze),d=d+Math.imul(Ae,ht)|0,i=(i=i+Math.imul(Ae,tt)|0)+Math.imul(Le,ht)|0,b=b+Math.imul(Le,tt)|0,d=d+Math.imul(Ne,et)|0,i=(i=i+Math.imul(Ne,Xe)|0)+Math.imul(_e,et)|0,b=b+Math.imul(_e,Xe)|0;var Rn=(D+(d=d+Math.imul(Te,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(Te,lt)|0)+Math.imul(Ee,Ye)|0))<<13)|0;D=((b=b+Math.imul(Ee,lt)|0)+(i>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,d=Math.imul(He,ht),i=(i=Math.imul(He,tt))+Math.imul(We,ht)|0,b=Math.imul(We,tt),d=d+Math.imul(Ae,et)|0,i=(i=i+Math.imul(Ae,Xe)|0)+Math.imul(Le,et)|0,b=b+Math.imul(Le,Xe)|0;var Zt=(D+(d=d+Math.imul(Ne,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(Ne,lt)|0)+Math.imul(_e,Ye)|0))<<13)|0;D=((b=b+Math.imul(_e,lt)|0)+(i>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,d=Math.imul(He,et),i=(i=Math.imul(He,Xe))+Math.imul(We,et)|0,b=Math.imul(We,Xe);var tn=(D+(d=d+Math.imul(Ae,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(Ae,lt)|0)+Math.imul(Le,Ye)|0))<<13)|0;D=((b=b+Math.imul(Le,lt)|0)+(i>>>13)|0)+(tn>>>26)|0,tn&=67108863;var _n=(D+(d=Math.imul(He,Ye))|0)+((8191&(i=(i=Math.imul(He,lt))+Math.imul(We,Ye)|0))<<13)|0;return D=((b=Math.imul(We,lt))+(i>>>13)|0)+(_n>>>26)|0,_n&=67108863,_[0]=un,_[1]=Ht,_[2]=jt,_[3]=bn,_[4]=dn,_[5]=pn,_[6]=In,_[7]=rn,_[8]=Cn,_[9]=Kt,_[10]=Nt,_[11]=xn,_[12]=wn,_[13]=Mn,_[14]=xt,_[15]=Rn,_[16]=Zt,_[17]=tn,_[18]=_n,0!==D&&(_[19]=D,l.length++),l};function k(R,r,s){return(new O).mulp(R,r,s)}function O(R,r){this.x=R,this.y=r}Math.imul||(S=w),u.prototype.mulTo=function(r,s){var a=this.length+r.length;return 10===this.length&&10===r.length?S(this,r,s):a<63?w(this,r,s):a<1024?function(R,r,s){s.negative=r.negative^R.negative,s.length=R.length+r.length;for(var l=0,a=0,f=0;f<s.length-1;f++){var _=a;a=0;for(var D=67108863&l,d=Math.min(f,r.length-1),i=Math.max(0,f-R.length+1);i<=d;i++){var J=(0|R.words[f-i])*(0|r.words[i]),ge=67108863&J;D=67108863&(ge=ge+D|0),a+=(_=(_=_+(J/67108864|0)|0)+(ge>>>26)|0)>>>26,_&=67108863}s.words[f]=D,l=_,_=a}return 0!==l?s.words[f]=l:s.length--,s.strip()}(this,r,s):k(this,r,s)},O.prototype.makeRBT=function(r){for(var s=new Array(r),l=u.prototype._countBits(r)-1,a=0;a<r;a++)s[a]=this.revBin(a,l,r);return s},O.prototype.revBin=function(r,s,l){if(0===r||r===l-1)return r;for(var a=0,f=0;f<s;f++)a|=(1&r)<<s-f-1,r>>=1;return a},O.prototype.permute=function(r,s,l,a,f,_){for(var D=0;D<_;D++)a[D]=s[r[D]],f[D]=l[r[D]]},O.prototype.transform=function(r,s,l,a,f,_){this.permute(_,r,s,l,a,f);for(var D=1;D<f;D<<=1)for(var d=D<<1,i=Math.cos(2*Math.PI/d),b=Math.sin(2*Math.PI/d),z=0;z<f;z+=d)for(var q=i,J=b,ge=0;ge<D;ge++){var me=l[z+ge],le=a[z+ge],fe=l[z+ge+D],ae=a[z+ge+D],de=q*fe-J*ae;ae=q*ae+J*fe,l[z+ge]=me+(fe=de),a[z+ge]=le+ae,l[z+ge+D]=me-fe,a[z+ge+D]=le-ae,ge!==d&&(de=i*q-b*J,J=i*J+b*q,q=de)}},O.prototype.guessLen13b=function(r,s){var l=1|Math.max(s,r),a=1&l,f=0;for(l=l/2|0;l;l>>>=1)f++;return 1<<f+1+a},O.prototype.conjugate=function(r,s,l){if(!(l<=1))for(var a=0;a<l/2;a++){var f=r[a];r[a]=r[l-a-1],r[l-a-1]=f,f=s[a],s[a]=-s[l-a-1],s[l-a-1]=-f}},O.prototype.normalize13b=function(r,s){for(var l=0,a=0;a<s/2;a++){var f=8192*Math.round(r[2*a+1]/s)+Math.round(r[2*a]/s)+l;r[a]=67108863&f,l=f<67108864?0:f/67108864|0}return r},O.prototype.convert13b=function(r,s,l,a){for(var f=0,_=0;_<s;_++)l[2*_]=8191&(f+=0|r[_]),l[2*_+1]=8191&(f>>>=13),f>>>=13;for(_=2*s;_<a;++_)l[_]=0;m(0===f),m(0==(-8192&f))},O.prototype.stub=function(r){for(var s=new Array(r),l=0;l<r;l++)s[l]=0;return s},O.prototype.mulp=function(r,s,l){var a=2*this.guessLen13b(r.length,s.length),f=this.makeRBT(a),_=this.stub(a),D=new Array(a),d=new Array(a),i=new Array(a),b=new Array(a),z=new Array(a),q=new Array(a),J=l.words;J.length=a,this.convert13b(r.words,r.length,D,a),this.convert13b(s.words,s.length,b,a),this.transform(D,_,d,i,a,f),this.transform(b,_,z,q,a,f);for(var ge=0;ge<a;ge++){var me=d[ge]*z[ge]-i[ge]*q[ge];i[ge]=d[ge]*q[ge]+i[ge]*z[ge],d[ge]=me}return this.conjugate(d,i,a),this.transform(d,i,J,_,a,f),this.conjugate(J,_,a),this.normalize13b(J,a),l.negative=r.negative^s.negative,l.length=r.length+s.length,l.strip()},u.prototype.mul=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),this.mulTo(r,s)},u.prototype.mulf=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),k(this,r,s)},u.prototype.imul=function(r){return this.clone().mulTo(r,this)},u.prototype.imuln=function(r){m("number"==typeof r),m(r<67108864);for(var s=0,l=0;l<this.length;l++){var a=(0|this.words[l])*r,f=(67108863&a)+(67108863&s);s>>=26,s+=a/67108864|0,s+=f>>>26,this.words[l]=67108863&f}return 0!==s&&(this.words[l]=s,this.length++),this},u.prototype.muln=function(r){return this.clone().imuln(r)},u.prototype.sqr=function(){return this.mul(this)},u.prototype.isqr=function(){return this.imul(this.clone())},u.prototype.pow=function(r){var s=function(R){for(var r=new Array(R.bitLength()),s=0;s<r.length;s++){var a=s%26;r[s]=(R.words[s/26|0]&1<<a)>>>a}return r}(r);if(0===s.length)return new u(1);for(var l=this,a=0;a<s.length&&0===s[a];a++,l=l.sqr());if(++a<s.length)for(var f=l.sqr();a<s.length;a++,f=f.sqr())0!==s[a]&&(l=l.mul(f));return l},u.prototype.iushln=function(r){m("number"==typeof r&&r>=0);var f,s=r%26,l=(r-s)/26,a=67108863>>>26-s<<26-s;if(0!==s){var _=0;for(f=0;f<this.length;f++){var D=this.words[f]&a;this.words[f]=(0|this.words[f])-D<<s|_,_=D>>>26-s}_&&(this.words[f]=_,this.length++)}if(0!==l){for(f=this.length-1;f>=0;f--)this.words[f+l]=this.words[f];for(f=0;f<l;f++)this.words[f]=0;this.length+=l}return this.strip()},u.prototype.ishln=function(r){return m(0===this.negative),this.iushln(r)},u.prototype.iushrn=function(r,s,l){var a;m("number"==typeof r&&r>=0),a=s?(s-s%26)/26:0;var f=r%26,_=Math.min((r-f)/26,this.length),D=67108863^67108863>>>f<<f,d=l;if(a-=_,a=Math.max(0,a),d){for(var i=0;i<_;i++)d.words[i]=this.words[i];d.length=_}if(0!==_)if(this.length>_)for(this.length-=_,i=0;i<this.length;i++)this.words[i]=this.words[i+_];else this.words[0]=0,this.length=1;var b=0;for(i=this.length-1;i>=0&&(0!==b||i>=a);i--){var z=0|this.words[i];this.words[i]=b<<26-f|z>>>f,b=z&D}return d&&0!==b&&(d.words[d.length++]=b),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},u.prototype.ishrn=function(r,s,l){return m(0===this.negative),this.iushrn(r,s,l)},u.prototype.shln=function(r){return this.clone().ishln(r)},u.prototype.ushln=function(r){return this.clone().iushln(r)},u.prototype.shrn=function(r){return this.clone().ishrn(r)},u.prototype.ushrn=function(r){return this.clone().iushrn(r)},u.prototype.testn=function(r){m("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return!(this.length<=l||!(this.words[l]&1<<s))},u.prototype.imaskn=function(r){m("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return m(0===this.negative,"imaskn works only with positive numbers"),this.length<=l?this:(0!==s&&l++,this.length=Math.min(l,this.length),0!==s&&(this.words[this.length-1]&=67108863^67108863>>>s<<s),this.strip())},u.prototype.maskn=function(r){return this.clone().imaskn(r)},u.prototype.iaddn=function(r){return m("number"==typeof r),m(r<67108864),r<0?this.isubn(-r):0!==this.negative?1===this.length&&(0|this.words[0])<r?(this.words[0]=r-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(r),this.negative=1,this):this._iaddn(r)},u.prototype._iaddn=function(r){this.words[0]+=r;for(var s=0;s<this.length&&this.words[s]>=67108864;s++)this.words[s]-=67108864,s===this.length-1?this.words[s+1]=1:this.words[s+1]++;return this.length=Math.max(this.length,s+1),this},u.prototype.isubn=function(r){if(m("number"==typeof r),m(r<67108864),r<0)return this.iaddn(-r);if(0!==this.negative)return this.negative=0,this.iaddn(r),this.negative=1,this;if(this.words[0]-=r,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var s=0;s<this.length&&this.words[s]<0;s++)this.words[s]+=67108864,this.words[s+1]-=1;return this.strip()},u.prototype.addn=function(r){return this.clone().iaddn(r)},u.prototype.subn=function(r){return this.clone().isubn(r)},u.prototype.iabs=function(){return this.negative=0,this},u.prototype.abs=function(){return this.clone().iabs()},u.prototype._ishlnsubmul=function(r,s,l){var f;this._expand(r.length+l);var _,D=0;for(f=0;f<r.length;f++){_=(0|this.words[f+l])+D;var d=(0|r.words[f])*s;D=((_-=67108863&d)>>26)-(d/67108864|0),this.words[f+l]=67108863&_}for(;f<this.length-l;f++)D=(_=(0|this.words[f+l])+D)>>26,this.words[f+l]=67108863&_;if(0===D)return this.strip();for(m(-1===D),D=0,f=0;f<this.length;f++)D=(_=-(0|this.words[f])+D)>>26,this.words[f]=67108863&_;return this.negative=1,this.strip()},u.prototype._wordDiv=function(r,s){var l,a=this.clone(),f=r,_=0|f.words[f.length-1];0!=(l=26-this._countBits(_))&&(f=f.ushln(l),a.iushln(l),_=0|f.words[f.length-1]);var i,d=a.length-f.length;if("mod"!==s){(i=new u(null)).length=d+1,i.words=new Array(i.length);for(var b=0;b<i.length;b++)i.words[b]=0}var z=a.clone()._ishlnsubmul(f,1,d);0===z.negative&&(a=z,i&&(i.words[d]=1));for(var q=d-1;q>=0;q--){var J=67108864*(0|a.words[f.length+q])+(0|a.words[f.length+q-1]);for(J=Math.min(J/_|0,67108863),a._ishlnsubmul(f,J,q);0!==a.negative;)J--,a.negative=0,a._ishlnsubmul(f,1,q),a.isZero()||(a.negative^=1);i&&(i.words[q]=J)}return i&&i.strip(),a.strip(),"div"!==s&&0!==l&&a.iushrn(l),{div:i||null,mod:a}},u.prototype.divmod=function(r,s,l){return m(!r.isZero()),this.isZero()?{div:new u(0),mod:new u(0)}:0!==this.negative&&0===r.negative?(_=this.neg().divmod(r,s),"mod"!==s&&(a=_.div.neg()),"div"!==s&&(f=_.mod.neg(),l&&0!==f.negative&&f.iadd(r)),{div:a,mod:f}):0===this.negative&&0!==r.negative?(_=this.divmod(r.neg(),s),"mod"!==s&&(a=_.div.neg()),{div:a,mod:_.mod}):0!=(this.negative&r.negative)?(_=this.neg().divmod(r.neg(),s),"div"!==s&&(f=_.mod.neg(),l&&0!==f.negative&&f.isub(r)),{div:_.div,mod:f}):r.length>this.length||this.cmp(r)<0?{div:new u(0),mod:this}:1===r.length?"div"===s?{div:this.divn(r.words[0]),mod:null}:"mod"===s?{div:null,mod:new u(this.modn(r.words[0]))}:{div:this.divn(r.words[0]),mod:new u(this.modn(r.words[0]))}:this._wordDiv(r,s);var a,f,_},u.prototype.div=function(r){return this.divmod(r,"div",!1).div},u.prototype.mod=function(r){return this.divmod(r,"mod",!1).mod},u.prototype.umod=function(r){return this.divmod(r,"mod",!0).mod},u.prototype.divRound=function(r){var s=this.divmod(r);if(s.mod.isZero())return s.div;var l=0!==s.div.negative?s.mod.isub(r):s.mod,a=r.ushrn(1),f=r.andln(1),_=l.cmp(a);return _<0||1===f&&0===_?s.div:0!==s.div.negative?s.div.isubn(1):s.div.iaddn(1)},u.prototype.modn=function(r){m(r<=67108863);for(var s=(1<<26)%r,l=0,a=this.length-1;a>=0;a--)l=(s*l+(0|this.words[a]))%r;return l},u.prototype.idivn=function(r){m(r<=67108863);for(var s=0,l=this.length-1;l>=0;l--){var a=(0|this.words[l])+67108864*s;this.words[l]=a/r|0,s=a%r}return this.strip()},u.prototype.divn=function(r){return this.clone().idivn(r)},u.prototype.egcd=function(r){m(0===r.negative),m(!r.isZero());var s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),_=new u(0),D=new u(1),d=0;s.isEven()&&l.isEven();)s.iushrn(1),l.iushrn(1),++d;for(var i=l.clone(),b=s.clone();!s.isZero();){for(var z=0,q=1;0==(s.words[0]&q)&&z<26;++z,q<<=1);if(z>0)for(s.iushrn(z);z-- >0;)(a.isOdd()||f.isOdd())&&(a.iadd(i),f.isub(b)),a.iushrn(1),f.iushrn(1);for(var J=0,ge=1;0==(l.words[0]&ge)&&J<26;++J,ge<<=1);if(J>0)for(l.iushrn(J);J-- >0;)(_.isOdd()||D.isOdd())&&(_.iadd(i),D.isub(b)),_.iushrn(1),D.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(_),f.isub(D)):(l.isub(s),_.isub(a),D.isub(f))}return{a:_,b:D,gcd:l.iushln(d)}},u.prototype._invmp=function(r){m(0===r.negative),m(!r.isZero());var z,s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),_=l.clone();s.cmpn(1)>0&&l.cmpn(1)>0;){for(var D=0,d=1;0==(s.words[0]&d)&&D<26;++D,d<<=1);if(D>0)for(s.iushrn(D);D-- >0;)a.isOdd()&&a.iadd(_),a.iushrn(1);for(var i=0,b=1;0==(l.words[0]&b)&&i<26;++i,b<<=1);if(i>0)for(l.iushrn(i);i-- >0;)f.isOdd()&&f.iadd(_),f.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(f)):(l.isub(s),f.isub(a))}return(z=0===s.cmpn(1)?a:f).cmpn(0)<0&&z.iadd(r),z},u.prototype.gcd=function(r){if(this.isZero())return r.abs();if(r.isZero())return this.abs();var s=this.clone(),l=r.clone();s.negative=0,l.negative=0;for(var a=0;s.isEven()&&l.isEven();a++)s.iushrn(1),l.iushrn(1);for(;;){for(;s.isEven();)s.iushrn(1);for(;l.isEven();)l.iushrn(1);var f=s.cmp(l);if(f<0){var _=s;s=l,l=_}else if(0===f||0===l.cmpn(1))break;s.isub(l)}return l.iushln(a)},u.prototype.invm=function(r){return this.egcd(r).a.umod(r)},u.prototype.isEven=function(){return 0==(1&this.words[0])},u.prototype.isOdd=function(){return 1==(1&this.words[0])},u.prototype.andln=function(r){return this.words[0]&r},u.prototype.bincn=function(r){m("number"==typeof r);var s=r%26,l=(r-s)/26,a=1<<s;if(this.length<=l)return this._expand(l+1),this.words[l]|=a,this;for(var f=a,_=l;0!==f&&_<this.length;_++){var D=0|this.words[_];f=(D+=f)>>>26,this.words[_]=D&=67108863}return 0!==f&&(this.words[_]=f,this.length++),this},u.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},u.prototype.cmpn=function(r){var l,s=r<0;if(0!==this.negative&&!s)return-1;if(0===this.negative&&s)return 1;if(this.strip(),this.length>1)l=1;else{s&&(r=-r),m(r<=67108863,"Number is too big");var a=0|this.words[0];l=a===r?0:a<r?-1:1}return 0!==this.negative?0|-l:l},u.prototype.cmp=function(r){if(0!==this.negative&&0===r.negative)return-1;if(0===this.negative&&0!==r.negative)return 1;var s=this.ucmp(r);return 0!==this.negative?0|-s:s},u.prototype.ucmp=function(r){if(this.length>r.length)return 1;if(this.length<r.length)return-1;for(var s=0,l=this.length-1;l>=0;l--){var a=0|this.words[l],f=0|r.words[l];if(a!==f){a<f?s=-1:a>f&&(s=1);break}}return s},u.prototype.gtn=function(r){return 1===this.cmpn(r)},u.prototype.gt=function(r){return 1===this.cmp(r)},u.prototype.gten=function(r){return this.cmpn(r)>=0},u.prototype.gte=function(r){return this.cmp(r)>=0},u.prototype.ltn=function(r){return-1===this.cmpn(r)},u.prototype.lt=function(r){return-1===this.cmp(r)},u.prototype.lten=function(r){return this.cmpn(r)<=0},u.prototype.lte=function(r){return this.cmp(r)<=0},u.prototype.eqn=function(r){return 0===this.cmpn(r)},u.prototype.eq=function(r){return 0===this.cmp(r)},u.red=function(r){return new $(r)},u.prototype.toRed=function(r){return m(!this.red,"Already a number in reduction context"),m(0===this.negative,"red works only with positives"),r.convertTo(this)._forceRed(r)},u.prototype.fromRed=function(){return m(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},u.prototype._forceRed=function(r){return this.red=r,this},u.prototype.forceRed=function(r){return m(!this.red,"Already a number in reduction context"),this._forceRed(r)},u.prototype.redAdd=function(r){return m(this.red,"redAdd works only with red numbers"),this.red.add(this,r)},u.prototype.redIAdd=function(r){return m(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,r)},u.prototype.redSub=function(r){return m(this.red,"redSub works only with red numbers"),this.red.sub(this,r)},u.prototype.redISub=function(r){return m(this.red,"redISub works only with red numbers"),this.red.isub(this,r)},u.prototype.redShl=function(r){return m(this.red,"redShl works only with red numbers"),this.red.shl(this,r)},u.prototype.redMul=function(r){return m(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.mul(this,r)},u.prototype.redIMul=function(r){return m(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.imul(this,r)},u.prototype.redSqr=function(){return m(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},u.prototype.redISqr=function(){return m(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},u.prototype.redSqrt=function(){return m(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},u.prototype.redInvm=function(){return m(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},u.prototype.redNeg=function(){return m(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},u.prototype.redPow=function(r){return m(this.red&&!r.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,r)};var V={k256:null,p224:null,p192:null,p25519:null};function U(R,r){this.name=R,this.p=new u(r,16),this.n=this.p.bitLength(),this.k=new u(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function B(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function H(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function W(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function te(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function $(R){if("string"==typeof R){var r=u._prime(R);this.m=r.p,this.prime=r}else m(R.gtn(1),"modulus must be greater than 1"),this.m=R,this.prime=null}function pe(R){$.call(this,R),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new u(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}U.prototype._tmp=function(){var r=new u(null);return r.words=new Array(Math.ceil(this.n/13)),r},U.prototype.ireduce=function(r){var l,s=r;do{this.split(s,this.tmp),l=(s=(s=this.imulK(s)).iadd(this.tmp)).bitLength()}while(l>this.n);var a=l<this.n?-1:s.ucmp(this.p);return 0===a?(s.words[0]=0,s.length=1):a>0?s.isub(this.p):void 0!==s.strip?s.strip():s._strip(),s},U.prototype.split=function(r,s){r.iushrn(this.n,0,s)},U.prototype.imulK=function(r){return r.imul(this.k)},x(B,U),B.prototype.split=function(r,s){for(var l=4194303,a=Math.min(r.length,9),f=0;f<a;f++)s.words[f]=r.words[f];if(s.length=a,r.length<=9)return r.words[0]=0,void(r.length=1);var _=r.words[9];for(s.words[s.length++]=_&l,f=10;f<r.length;f++){var D=0|r.words[f];r.words[f-10]=(D&l)<<4|_>>>22,_=D}r.words[f-10]=_>>>=22,r.length-=0===_&&r.length>10?10:9},B.prototype.imulK=function(r){r.words[r.length]=0,r.words[r.length+1]=0,r.length+=2;for(var s=0,l=0;l<r.length;l++){var a=0|r.words[l];r.words[l]=67108863&(s+=977*a),s=64*a+(s/67108864|0)}return 0===r.words[r.length-1]&&(r.length--,0===r.words[r.length-1]&&r.length--),r},x(H,U),x(W,U),x(te,U),te.prototype.imulK=function(r){for(var s=0,l=0;l<r.length;l++){var a=19*(0|r.words[l])+s,f=67108863&a;a>>>=26,r.words[l]=f,s=a}return 0!==s&&(r.words[r.length++]=s),r},u._prime=function(r){if(V[r])return V[r];var s;if("k256"===r)s=new B;else if("p224"===r)s=new H;else if("p192"===r)s=new W;else{if("p25519"!==r)throw new Error("Unknown prime "+r);s=new te}return V[r]=s,s},$.prototype._verify1=function(r){m(0===r.negative,"red works only with positives"),m(r.red,"red works only with red numbers")},$.prototype._verify2=function(r,s){m(0==(r.negative|s.negative),"red works only with positives"),m(r.red&&r.red===s.red,"red works only with red numbers")},$.prototype.imod=function(r){return this.prime?this.prime.ireduce(r)._forceRed(this):r.umod(this.m)._forceRed(this)},$.prototype.neg=function(r){return r.isZero()?r.clone():this.m.sub(r)._forceRed(this)},$.prototype.add=function(r,s){this._verify2(r,s);var l=r.add(s);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},$.prototype.iadd=function(r,s){this._verify2(r,s);var l=r.iadd(s);return l.cmp(this.m)>=0&&l.isub(this.m),l},$.prototype.sub=function(r,s){this._verify2(r,s);var l=r.sub(s);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},$.prototype.isub=function(r,s){this._verify2(r,s);var l=r.isub(s);return l.cmpn(0)<0&&l.iadd(this.m),l},$.prototype.shl=function(r,s){return this._verify1(r),this.imod(r.ushln(s))},$.prototype.imul=function(r,s){return this._verify2(r,s),this.imod(r.imul(s))},$.prototype.mul=function(r,s){return this._verify2(r,s),this.imod(r.mul(s))},$.prototype.isqr=function(r){return this.imul(r,r.clone())},$.prototype.sqr=function(r){return this.mul(r,r)},$.prototype.sqrt=function(r){if(r.isZero())return r.clone();var s=this.m.andln(3);if(m(s%2==1),3===s){var l=this.m.add(new u(1)).iushrn(2);return this.pow(r,l)}for(var a=this.m.subn(1),f=0;!a.isZero()&&0===a.andln(1);)f++,a.iushrn(1);m(!a.isZero());var _=new u(1).toRed(this),D=_.redNeg(),d=this.m.subn(1).iushrn(1),i=this.m.bitLength();for(i=new u(2*i*i).toRed(this);0!==this.pow(i,d).cmp(D);)i.redIAdd(D);for(var b=this.pow(i,a),z=this.pow(r,a.addn(1).iushrn(1)),q=this.pow(r,a),J=f;0!==q.cmp(_);){for(var ge=q,me=0;0!==ge.cmp(_);me++)ge=ge.redSqr();m(me<J);var le=this.pow(b,new u(1).iushln(J-me-1));z=z.redMul(le),b=le.redSqr(),q=q.redMul(b),J=me}return z},$.prototype.invm=function(r){var s=r._invmp(this.m);return 0!==s.negative?(s.negative=0,this.imod(s).redNeg()):this.imod(s)},$.prototype.pow=function(r,s){if(s.isZero())return new u(1).toRed(this);if(0===s.cmpn(1))return r.clone();var a=new Array(16);a[0]=new u(1).toRed(this),a[1]=r;for(var f=2;f<a.length;f++)a[f]=this.mul(a[f-1],r);var _=a[0],D=0,d=0,i=s.bitLength()%26;for(0===i&&(i=26),f=s.length-1;f>=0;f--){for(var b=s.words[f],z=i-1;z>=0;z--){var q=b>>z&1;_!==a[0]&&(_=this.sqr(_)),0!==q||0!==D?(D<<=1,D|=q,(4==++d||0===f&&0===z)&&(_=this.mul(_,a[D]),d=0,D=0)):d=0}i=26}return _},$.prototype.convertTo=function(r){var s=r.umod(this.m);return s===r?s.clone():s},$.prototype.convertFrom=function(r){var s=r.clone();return s.red=null,s},u.mont=function(r){return new pe(r)},x(pe,$),pe.prototype.convertTo=function(r){return this.imod(r.ushln(this.shift))},pe.prototype.convertFrom=function(r){var s=this.imod(r.mul(this.rinv));return s.red=null,s},pe.prototype.imul=function(r,s){if(r.isZero()||s.isZero())return r.words[0]=0,r.length=1,r;var l=r.imul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),_=f;return f.cmp(this.m)>=0?_=f.isub(this.m):f.cmpn(0)<0&&(_=f.iadd(this.m)),_._forceRed(this)},pe.prototype.mul=function(r,s){if(r.isZero()||s.isZero())return new u(0)._forceRed(this);var l=r.mul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),_=f;return f.cmp(this.m)>=0?_=f.isub(this.m):f.cmpn(0)<0&&(_=f.iadd(this.m)),_._forceRed(this)},pe.prototype.invm=function(r){return this.imod(r._invmp(this.m).mul(this.r2))._forceRed(this)}}(Y=T.nmd(Y),this)},5247:(Y,L,T)=>{"use strict";var p=L;p.version=T(8597).i8,p.utils=T(2946),p.rand=T(4761),p.curve=T(3868),p.curves=T(3346),p.ec=T(7237),p.eddsa=T(1615)},780:(Y,L,T)=>{"use strict";var p=T(4584),N=T(2946),m=N.getNAF,x=N.getJSF,u=N.assert;function g(A,I){this.type=A,this.p=new p(I.p,16),this.red=I.prime?p.red(I.prime):p.mont(this.p),this.zero=new p(0).toRed(this.red),this.one=new p(1).toRed(this.red),this.two=new p(2).toRed(this.red),this.n=I.n&&new p(I.n,16),this.g=I.g&&this.pointFromJSON(I.g,I.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var y=this.n&&this.p.div(this.n);!y||y.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function M(A,I){this.curve=A,this.type=I,this.precomputed=null}Y.exports=g,g.prototype.point=function(){throw new Error("Not implemented")},g.prototype.validate=function(){throw new Error("Not implemented")},g.prototype._fixedNafMul=function(I,y){u(I.precomputed);var h=I._getDoubles(),C=m(y,1,this._bitLength),v=(1<<h.step+1)-(h.step%2==0?2:1);v/=3;var S,P,w=[];for(S=0;S<C.length;S+=h.step){P=0;for(var k=S+h.step-1;k>=S;k--)P=(P<<1)+C[k];w.push(P)}for(var O=this.jpoint(null,null,null),V=this.jpoint(null,null,null),U=v;U>0;U--){for(S=0;S<w.length;S++)(P=w[S])===U?V=V.mixedAdd(h.points[S]):P===-U&&(V=V.mixedAdd(h.points[S].neg()));O=O.add(V)}return O.toP()},g.prototype._wnafMul=function(I,y){for(var h=4,C=I._getNAFPoints(h),v=C.points,w=m(y,h=C.wnd,this._bitLength),S=this.jpoint(null,null,null),P=w.length-1;P>=0;P--){for(var k=0;P>=0&&0===w[P];P--)k++;if(P>=0&&k++,S=S.dblp(k),P<0)break;var O=w[P];u(0!==O),S="affine"===I.type?S.mixedAdd(O>0?v[O-1>>1]:v[-O-1>>1].neg()):S.add(O>0?v[O-1>>1]:v[-O-1>>1].neg())}return"affine"===I.type?S.toP():S},g.prototype._wnafMulAdd=function(I,y,h,C,v){var O,V,U,w=this._wnafT1,S=this._wnafT2,P=this._wnafT3,k=0;for(O=0;O<C;O++){var B=(U=y[O])._getNAFPoints(I);w[O]=B.wnd,S[O]=B.points}for(O=C-1;O>=1;O-=2){var H=O-1,W=O;if(1===w[H]&&1===w[W]){var te=[y[H],null,null,y[W]];0===y[H].y.cmp(y[W].y)?(te[1]=y[H].add(y[W]),te[2]=y[H].toJ().mixedAdd(y[W].neg())):0===y[H].y.cmp(y[W].y.redNeg())?(te[1]=y[H].toJ().mixedAdd(y[W]),te[2]=y[H].add(y[W].neg())):(te[1]=y[H].toJ().mixedAdd(y[W]),te[2]=y[H].toJ().mixedAdd(y[W].neg()));var $=[-3,-1,-5,-7,0,7,5,1,3],pe=x(h[H],h[W]);for(k=Math.max(pe[0].length,k),P[H]=new Array(k),P[W]=new Array(k),V=0;V<k;V++)P[H][V]=$[3*(1+(0|pe[0][V]))+(1+(0|pe[1][V]))],P[W][V]=0,S[H]=te}else P[H]=m(h[H],w[H],this._bitLength),P[W]=m(h[W],w[W],this._bitLength),k=Math.max(P[H].length,k),k=Math.max(P[W].length,k)}var s=this.jpoint(null,null,null),l=this._wnafT4;for(O=k;O>=0;O--){for(var a=0;O>=0;){var f=!0;for(V=0;V<C;V++)l[V]=0|P[V][O],0!==l[V]&&(f=!1);if(!f)break;a++,O--}if(O>=0&&a++,s=s.dblp(a),O<0)break;for(V=0;V<C;V++){var _=l[V];0!==_&&(_>0?U=S[V][_-1>>1]:_<0&&(U=S[V][-_-1>>1].neg()),s="affine"===U.type?s.mixedAdd(U):s.add(U))}}for(O=0;O<C;O++)S[O]=null;return v?s:s.toP()},g.BasePoint=M,M.prototype.eq=function(){throw new Error("Not implemented")},M.prototype.validate=function(){return this.curve.validate(this)},g.prototype.decodePoint=function(I,y){I=N.toArray(I,y);var h=this.p.byteLength();if((4===I[0]||6===I[0]||7===I[0])&&I.length-1==2*h)return 6===I[0]?u(I[I.length-1]%2==0):7===I[0]&&u(I[I.length-1]%2==1),this.point(I.slice(1,1+h),I.slice(1+h,1+2*h));if((2===I[0]||3===I[0])&&I.length-1===h)return this.pointFromX(I.slice(1,1+h),3===I[0]);throw new Error("Unknown point format")},M.prototype.encodeCompressed=function(I){return this.encode(I,!0)},M.prototype._encode=function(I){var y=this.curve.p.byteLength(),h=this.getX().toArray("be",y);return I?[this.getY().isEven()?2:3].concat(h):[4].concat(h,this.getY().toArray("be",y))},M.prototype.encode=function(I,y){return N.encode(this._encode(y),I)},M.prototype.precompute=function(I){if(this.precomputed)return this;var y={doubles:null,naf:null,beta:null};return y.naf=this._getNAFPoints(8),y.doubles=this._getDoubles(4,I),y.beta=this._getBeta(),this.precomputed=y,this},M.prototype._hasDoubles=function(I){if(!this.precomputed)return!1;var y=this.precomputed.doubles;return!!y&&y.points.length>=Math.ceil((I.bitLength()+1)/y.step)},M.prototype._getDoubles=function(I,y){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var h=[this],C=this,v=0;v<y;v+=I){for(var w=0;w<I;w++)C=C.dbl();h.push(C)}return{step:I,points:h}},M.prototype._getNAFPoints=function(I){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var y=[this],h=(1<<I)-1,C=1===h?null:this.dbl(),v=1;v<h;v++)y[v]=y[v-1].add(C);return{wnd:I,points:y}},M.prototype._getBeta=function(){return null},M.prototype.dblp=function(I){for(var y=this,h=0;h<I;h++)y=y.dbl();return y}},6121:(Y,L,T)=>{"use strict";var p=T(2946),N=T(4584),m=T(9879),x=T(780),u=p.assert;function g(A){this.twisted=1!=(0|A.a),this.mOneA=this.twisted&&-1==(0|A.a),this.extended=this.mOneA,x.call(this,"edwards",A),this.a=new N(A.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new N(A.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new N(A.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),u(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|A.c)}function M(A,I,y,h,C){x.BasePoint.call(this,A,"projective"),null===I&&null===y&&null===h?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new N(I,16),this.y=new N(y,16),this.z=h?new N(h,16):this.curve.one,this.t=C&&new N(C,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}m(g,x),Y.exports=g,g.prototype._mulA=function(I){return this.mOneA?I.redNeg():this.a.redMul(I)},g.prototype._mulC=function(I){return this.oneC?I:this.c.redMul(I)},g.prototype.jpoint=function(I,y,h,C){return this.point(I,y,h,C)},g.prototype.pointFromX=function(I,y){(I=new N(I,16)).red||(I=I.toRed(this.red));var h=I.redSqr(),C=this.c2.redSub(this.a.redMul(h)),v=this.one.redSub(this.c2.redMul(this.d).redMul(h)),w=C.redMul(v.redInvm()),S=w.redSqrt();if(0!==S.redSqr().redSub(w).cmp(this.zero))throw new Error("invalid point");var P=S.fromRed().isOdd();return(y&&!P||!y&&P)&&(S=S.redNeg()),this.point(I,S)},g.prototype.pointFromY=function(I,y){(I=new N(I,16)).red||(I=I.toRed(this.red));var h=I.redSqr(),C=h.redSub(this.c2),v=h.redMul(this.d).redMul(this.c2).redSub(this.a),w=C.redMul(v.redInvm());if(0===w.cmp(this.zero)){if(y)throw new Error("invalid point");return this.point(this.zero,I)}var S=w.redSqrt();if(0!==S.redSqr().redSub(w).cmp(this.zero))throw new Error("invalid point");return S.fromRed().isOdd()!==y&&(S=S.redNeg()),this.point(S,I)},g.prototype.validate=function(I){if(I.isInfinity())return!0;I.normalize();var y=I.x.redSqr(),h=I.y.redSqr(),C=y.redMul(this.a).redAdd(h),v=this.c2.redMul(this.one.redAdd(this.d.redMul(y).redMul(h)));return 0===C.cmp(v)},m(M,x.BasePoint),g.prototype.pointFromJSON=function(I){return M.fromJSON(this,I)},g.prototype.point=function(I,y,h,C){return new M(this,I,y,h,C)},M.fromJSON=function(I,y){return new M(I,y[0],y[1],y[2])},M.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},M.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},M.prototype._extDbl=function(){var I=this.x.redSqr(),y=this.y.redSqr(),h=this.z.redSqr();h=h.redIAdd(h);var C=this.curve._mulA(I),v=this.x.redAdd(this.y).redSqr().redISub(I).redISub(y),w=C.redAdd(y),S=w.redSub(h),P=C.redSub(y),k=v.redMul(S),O=w.redMul(P),V=v.redMul(P),U=S.redMul(w);return this.curve.point(k,O,U,V)},M.prototype._projDbl=function(){var C,v,w,S,P,k,I=this.x.redAdd(this.y).redSqr(),y=this.x.redSqr(),h=this.y.redSqr();if(this.curve.twisted){var O=(S=this.curve._mulA(y)).redAdd(h);this.zOne?(C=I.redSub(y).redSub(h).redMul(O.redSub(this.curve.two)),v=O.redMul(S.redSub(h)),w=O.redSqr().redSub(O).redSub(O)):(P=this.z.redSqr(),k=O.redSub(P).redISub(P),C=I.redSub(y).redISub(h).redMul(k),v=O.redMul(S.redSub(h)),w=O.redMul(k))}else S=y.redAdd(h),P=this.curve._mulC(this.z).redSqr(),k=S.redSub(P).redSub(P),C=this.curve._mulC(I.redISub(S)).redMul(k),v=this.curve._mulC(S).redMul(y.redISub(h)),w=S.redMul(k);return this.curve.point(C,v,w)},M.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},M.prototype._extAdd=function(I){var y=this.y.redSub(this.x).redMul(I.y.redSub(I.x)),h=this.y.redAdd(this.x).redMul(I.y.redAdd(I.x)),C=this.t.redMul(this.curve.dd).redMul(I.t),v=this.z.redMul(I.z.redAdd(I.z)),w=h.redSub(y),S=v.redSub(C),P=v.redAdd(C),k=h.redAdd(y),O=w.redMul(S),V=P.redMul(k),U=w.redMul(k),B=S.redMul(P);return this.curve.point(O,V,B,U)},M.prototype._projAdd=function(I){var V,U,y=this.z.redMul(I.z),h=y.redSqr(),C=this.x.redMul(I.x),v=this.y.redMul(I.y),w=this.curve.d.redMul(C).redMul(v),S=h.redSub(w),P=h.redAdd(w),k=this.x.redAdd(this.y).redMul(I.x.redAdd(I.y)).redISub(C).redISub(v),O=y.redMul(S).redMul(k);return this.curve.twisted?(V=y.redMul(P).redMul(v.redSub(this.curve._mulA(C))),U=S.redMul(P)):(V=y.redMul(P).redMul(v.redSub(C)),U=this.curve._mulC(S).redMul(P)),this.curve.point(O,V,U)},M.prototype.add=function(I){return this.isInfinity()?I:I.isInfinity()?this:this.curve.extended?this._extAdd(I):this._projAdd(I)},M.prototype.mul=function(I){return this._hasDoubles(I)?this.curve._fixedNafMul(this,I):this.curve._wnafMul(this,I)},M.prototype.mulAdd=function(I,y,h){return this.curve._wnafMulAdd(1,[this,y],[I,h],2,!1)},M.prototype.jmulAdd=function(I,y,h){return this.curve._wnafMulAdd(1,[this,y],[I,h],2,!0)},M.prototype.normalize=function(){if(this.zOne)return this;var I=this.z.redInvm();return this.x=this.x.redMul(I),this.y=this.y.redMul(I),this.t&&(this.t=this.t.redMul(I)),this.z=this.curve.one,this.zOne=!0,this},M.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},M.prototype.getX=function(){return this.normalize(),this.x.fromRed()},M.prototype.getY=function(){return this.normalize(),this.y.fromRed()},M.prototype.eq=function(I){return this===I||0===this.getX().cmp(I.getX())&&0===this.getY().cmp(I.getY())},M.prototype.eqXToP=function(I){var y=I.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(y))return!0;for(var h=I.clone(),C=this.curve.redN.redMul(this.z);;){if(h.iadd(this.curve.n),h.cmp(this.curve.p)>=0)return!1;if(y.redIAdd(C),0===this.x.cmp(y))return!0}},M.prototype.toP=M.prototype.normalize,M.prototype.mixedAdd=M.prototype.add},3868:(Y,L,T)=>{"use strict";var p=L;p.base=T(780),p.short=T(9918),p.mont=T(2218),p.edwards=T(6121)},2218:(Y,L,T)=>{"use strict";var p=T(4584),N=T(9879),m=T(780),x=T(2946);function u(M){m.call(this,"mont",M),this.a=new p(M.a,16).toRed(this.red),this.b=new p(M.b,16).toRed(this.red),this.i4=new p(4).toRed(this.red).redInvm(),this.two=new p(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function g(M,A,I){m.BasePoint.call(this,M,"projective"),null===A&&null===I?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new p(A,16),this.z=new p(I,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}N(u,m),Y.exports=u,u.prototype.validate=function(A){var I=A.normalize().x,y=I.redSqr(),h=y.redMul(I).redAdd(y.redMul(this.a)).redAdd(I);return 0===h.redSqrt().redSqr().cmp(h)},N(g,m.BasePoint),u.prototype.decodePoint=function(A,I){return this.point(x.toArray(A,I),1)},u.prototype.point=function(A,I){return new g(this,A,I)},u.prototype.pointFromJSON=function(A){return g.fromJSON(this,A)},g.prototype.precompute=function(){},g.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},g.fromJSON=function(A,I){return new g(A,I[0],I[1]||A.one)},g.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},g.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},g.prototype.dbl=function(){var I=this.x.redAdd(this.z).redSqr(),h=this.x.redSub(this.z).redSqr(),C=I.redSub(h),v=I.redMul(h),w=C.redMul(h.redAdd(this.curve.a24.redMul(C)));return this.curve.point(v,w)},g.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},g.prototype.diffAdd=function(A,I){var y=this.x.redAdd(this.z),h=this.x.redSub(this.z),C=A.x.redAdd(A.z),w=A.x.redSub(A.z).redMul(y),S=C.redMul(h),P=I.z.redMul(w.redAdd(S).redSqr()),k=I.x.redMul(w.redISub(S).redSqr());return this.curve.point(P,k)},g.prototype.mul=function(A){for(var I=A.clone(),y=this,h=this.curve.point(null,null),v=[];0!==I.cmpn(0);I.iushrn(1))v.push(I.andln(1));for(var w=v.length-1;w>=0;w--)0===v[w]?(y=y.diffAdd(h,this),h=h.dbl()):(h=y.diffAdd(h,this),y=y.dbl());return h},g.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},g.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},g.prototype.eq=function(A){return 0===this.getX().cmp(A.getX())},g.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},g.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},9918:(Y,L,T)=>{"use strict";var p=T(2946),N=T(4584),m=T(9879),x=T(780),u=p.assert;function g(I){x.call(this,"short",I),this.a=new N(I.a,16).toRed(this.red),this.b=new N(I.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(I),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function M(I,y,h,C){x.BasePoint.call(this,I,"affine"),null===y&&null===h?(this.x=null,this.y=null,this.inf=!0):(this.x=new N(y,16),this.y=new N(h,16),C&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function A(I,y,h,C){x.BasePoint.call(this,I,"jacobian"),null===y&&null===h&&null===C?(this.x=this.curve.one,this.y=this.curve.one,this.z=new N(0)):(this.x=new N(y,16),this.y=new N(h,16),this.z=new N(C,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}m(g,x),Y.exports=g,g.prototype._getEndomorphism=function(y){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var h,C;if(y.beta)h=new N(y.beta,16).toRed(this.red);else{var v=this._getEndoRoots(this.p);h=(h=v[0].cmp(v[1])<0?v[0]:v[1]).toRed(this.red)}if(y.lambda)C=new N(y.lambda,16);else{var w=this._getEndoRoots(this.n);0===this.g.mul(w[0]).x.cmp(this.g.x.redMul(h))?C=w[0]:u(0===this.g.mul(C=w[1]).x.cmp(this.g.x.redMul(h)))}return{beta:h,lambda:C,basis:y.basis?y.basis.map(function(P){return{a:new N(P.a,16),b:new N(P.b,16)}}):this._getEndoBasis(C)}}},g.prototype._getEndoRoots=function(y){var h=y===this.p?this.red:N.mont(y),C=new N(2).toRed(h).redInvm(),v=C.redNeg(),w=new N(3).toRed(h).redNeg().redSqrt().redMul(C);return[v.redAdd(w).fromRed(),v.redSub(w).fromRed()]},g.prototype._getEndoBasis=function(y){for(var O,V,U,B,H,W,te,pe,R,h=this.n.ushrn(Math.floor(this.n.bitLength()/2)),C=y,v=this.n.clone(),w=new N(1),S=new N(0),P=new N(0),k=new N(1),$=0;0!==C.cmpn(0);){var r=v.div(C);pe=v.sub(r.mul(C)),R=P.sub(r.mul(w));var s=k.sub(r.mul(S));if(!U&&pe.cmp(h)<0)O=te.neg(),V=w,U=pe.neg(),B=R;else if(U&&2==++$)break;te=pe,v=C,C=pe,P=w,w=R,k=S,S=s}H=pe.neg(),W=R;var l=U.sqr().add(B.sqr());return H.sqr().add(W.sqr()).cmp(l)>=0&&(H=O,W=V),U.negative&&(U=U.neg(),B=B.neg()),H.negative&&(H=H.neg(),W=W.neg()),[{a:U,b:B},{a:H,b:W}]},g.prototype._endoSplit=function(y){var h=this.endo.basis,C=h[0],v=h[1],w=v.b.mul(y).divRound(this.n),S=C.b.neg().mul(y).divRound(this.n),P=w.mul(C.a),k=S.mul(v.a),O=w.mul(C.b),V=S.mul(v.b);return{k1:y.sub(P).sub(k),k2:O.add(V).neg()}},g.prototype.pointFromX=function(y,h){(y=new N(y,16)).red||(y=y.toRed(this.red));var C=y.redSqr().redMul(y).redIAdd(y.redMul(this.a)).redIAdd(this.b),v=C.redSqrt();if(0!==v.redSqr().redSub(C).cmp(this.zero))throw new Error("invalid point");var w=v.fromRed().isOdd();return(h&&!w||!h&&w)&&(v=v.redNeg()),this.point(y,v)},g.prototype.validate=function(y){if(y.inf)return!0;var h=y.x,C=y.y,v=this.a.redMul(h),w=h.redSqr().redMul(h).redIAdd(v).redIAdd(this.b);return 0===C.redSqr().redISub(w).cmpn(0)},g.prototype._endoWnafMulAdd=function(y,h,C){for(var v=this._endoWnafT1,w=this._endoWnafT2,S=0;S<y.length;S++){var P=this._endoSplit(h[S]),k=y[S],O=k._getBeta();P.k1.negative&&(P.k1.ineg(),k=k.neg(!0)),P.k2.negative&&(P.k2.ineg(),O=O.neg(!0)),v[2*S]=k,v[2*S+1]=O,w[2*S]=P.k1,w[2*S+1]=P.k2}for(var V=this._wnafMulAdd(1,v,w,2*S,C),U=0;U<2*S;U++)v[U]=null,w[U]=null;return V},m(M,x.BasePoint),g.prototype.point=function(y,h,C){return new M(this,y,h,C)},g.prototype.pointFromJSON=function(y,h){return M.fromJSON(this,y,h)},M.prototype._getBeta=function(){if(this.curve.endo){var y=this.precomputed;if(y&&y.beta)return y.beta;var h=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(y){var C=this.curve,v=function(w){return C.point(w.x.redMul(C.endo.beta),w.y)};y.beta=h,h.precomputed={beta:null,naf:y.naf&&{wnd:y.naf.wnd,points:y.naf.points.map(v)},doubles:y.doubles&&{step:y.doubles.step,points:y.doubles.points.map(v)}}}return h}},M.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},M.fromJSON=function(y,h,C){"string"==typeof h&&(h=JSON.parse(h));var v=y.point(h[0],h[1],C);if(!h[2])return v;function w(P){return y.point(P[0],P[1],C)}var S=h[2];return v.precomputed={beta:null,doubles:S.doubles&&{step:S.doubles.step,points:[v].concat(S.doubles.points.map(w))},naf:S.naf&&{wnd:S.naf.wnd,points:[v].concat(S.naf.points.map(w))}},v},M.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},M.prototype.isInfinity=function(){return this.inf},M.prototype.add=function(y){if(this.inf)return y;if(y.inf)return this;if(this.eq(y))return this.dbl();if(this.neg().eq(y))return this.curve.point(null,null);if(0===this.x.cmp(y.x))return this.curve.point(null,null);var h=this.y.redSub(y.y);0!==h.cmpn(0)&&(h=h.redMul(this.x.redSub(y.x).redInvm()));var C=h.redSqr().redISub(this.x).redISub(y.x),v=h.redMul(this.x.redSub(C)).redISub(this.y);return this.curve.point(C,v)},M.prototype.dbl=function(){if(this.inf)return this;var y=this.y.redAdd(this.y);if(0===y.cmpn(0))return this.curve.point(null,null);var h=this.curve.a,C=this.x.redSqr(),v=y.redInvm(),w=C.redAdd(C).redIAdd(C).redIAdd(h).redMul(v),S=w.redSqr().redISub(this.x.redAdd(this.x)),P=w.redMul(this.x.redSub(S)).redISub(this.y);return this.curve.point(S,P)},M.prototype.getX=function(){return this.x.fromRed()},M.prototype.getY=function(){return this.y.fromRed()},M.prototype.mul=function(y){return y=new N(y,16),this.isInfinity()?this:this._hasDoubles(y)?this.curve._fixedNafMul(this,y):this.curve.endo?this.curve._endoWnafMulAdd([this],[y]):this.curve._wnafMul(this,y)},M.prototype.mulAdd=function(y,h,C){var v=[this,h],w=[y,C];return this.curve.endo?this.curve._endoWnafMulAdd(v,w):this.curve._wnafMulAdd(1,v,w,2)},M.prototype.jmulAdd=function(y,h,C){var v=[this,h],w=[y,C];return this.curve.endo?this.curve._endoWnafMulAdd(v,w,!0):this.curve._wnafMulAdd(1,v,w,2,!0)},M.prototype.eq=function(y){return this===y||this.inf===y.inf&&(this.inf||0===this.x.cmp(y.x)&&0===this.y.cmp(y.y))},M.prototype.neg=function(y){if(this.inf)return this;var h=this.curve.point(this.x,this.y.redNeg());if(y&&this.precomputed){var C=this.precomputed,v=function(w){return w.neg()};h.precomputed={naf:C.naf&&{wnd:C.naf.wnd,points:C.naf.points.map(v)},doubles:C.doubles&&{step:C.doubles.step,points:C.doubles.points.map(v)}}}return h},M.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},m(A,x.BasePoint),g.prototype.jpoint=function(y,h,C){return new A(this,y,h,C)},A.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var y=this.z.redInvm(),h=y.redSqr(),C=this.x.redMul(h),v=this.y.redMul(h).redMul(y);return this.curve.point(C,v)},A.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},A.prototype.add=function(y){if(this.isInfinity())return y;if(y.isInfinity())return this;var h=y.z.redSqr(),C=this.z.redSqr(),v=this.x.redMul(h),w=y.x.redMul(C),S=this.y.redMul(h.redMul(y.z)),P=y.y.redMul(C.redMul(this.z)),k=v.redSub(w),O=S.redSub(P);if(0===k.cmpn(0))return 0!==O.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var V=k.redSqr(),U=V.redMul(k),B=v.redMul(V),H=O.redSqr().redIAdd(U).redISub(B).redISub(B),W=O.redMul(B.redISub(H)).redISub(S.redMul(U)),te=this.z.redMul(y.z).redMul(k);return this.curve.jpoint(H,W,te)},A.prototype.mixedAdd=function(y){if(this.isInfinity())return y.toJ();if(y.isInfinity())return this;var h=this.z.redSqr(),C=this.x,v=y.x.redMul(h),w=this.y,S=y.y.redMul(h).redMul(this.z),P=C.redSub(v),k=w.redSub(S);if(0===P.cmpn(0))return 0!==k.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var O=P.redSqr(),V=O.redMul(P),U=C.redMul(O),B=k.redSqr().redIAdd(V).redISub(U).redISub(U),H=k.redMul(U.redISub(B)).redISub(w.redMul(V)),W=this.z.redMul(P);return this.curve.jpoint(B,H,W)},A.prototype.dblp=function(y){if(0===y)return this;if(this.isInfinity())return this;if(!y)return this.dbl();var h;if(this.curve.zeroA||this.curve.threeA){var C=this;for(h=0;h<y;h++)C=C.dbl();return C}var v=this.curve.a,w=this.curve.tinv,S=this.x,P=this.y,k=this.z,O=k.redSqr().redSqr(),V=P.redAdd(P);for(h=0;h<y;h++){var U=S.redSqr(),B=V.redSqr(),H=B.redSqr(),W=U.redAdd(U).redIAdd(U).redIAdd(v.redMul(O)),te=S.redMul(B),$=W.redSqr().redISub(te.redAdd(te)),pe=te.redISub($),R=W.redMul(pe);R=R.redIAdd(R).redISub(H);var r=V.redMul(k);h+1<y&&(O=O.redMul(H)),S=$,k=r,V=R}return this.curve.jpoint(S,V.redMul(w),k)},A.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},A.prototype._zeroDbl=function(){var y,h,C;if(this.zOne){var v=this.x.redSqr(),w=this.y.redSqr(),S=w.redSqr(),P=this.x.redAdd(w).redSqr().redISub(v).redISub(S);P=P.redIAdd(P);var k=v.redAdd(v).redIAdd(v),O=k.redSqr().redISub(P).redISub(P),V=S.redIAdd(S);V=(V=V.redIAdd(V)).redIAdd(V),y=O,h=k.redMul(P.redISub(O)).redISub(V),C=this.y.redAdd(this.y)}else{var U=this.x.redSqr(),B=this.y.redSqr(),H=B.redSqr(),W=this.x.redAdd(B).redSqr().redISub(U).redISub(H);W=W.redIAdd(W);var te=U.redAdd(U).redIAdd(U),$=te.redSqr(),pe=H.redIAdd(H);pe=(pe=pe.redIAdd(pe)).redIAdd(pe),y=$.redISub(W).redISub(W),h=te.redMul(W.redISub(y)).redISub(pe),C=(C=this.y.redMul(this.z)).redIAdd(C)}return this.curve.jpoint(y,h,C)},A.prototype._threeDbl=function(){var y,h,C;if(this.zOne){var v=this.x.redSqr(),w=this.y.redSqr(),S=w.redSqr(),P=this.x.redAdd(w).redSqr().redISub(v).redISub(S);P=P.redIAdd(P);var k=v.redAdd(v).redIAdd(v).redIAdd(this.curve.a),O=k.redSqr().redISub(P).redISub(P);y=O;var V=S.redIAdd(S);V=(V=V.redIAdd(V)).redIAdd(V),h=k.redMul(P.redISub(O)).redISub(V),C=this.y.redAdd(this.y)}else{var U=this.z.redSqr(),B=this.y.redSqr(),H=this.x.redMul(B),W=this.x.redSub(U).redMul(this.x.redAdd(U));W=W.redAdd(W).redIAdd(W);var te=H.redIAdd(H),$=(te=te.redIAdd(te)).redAdd(te);y=W.redSqr().redISub($),C=this.y.redAdd(this.z).redSqr().redISub(B).redISub(U);var pe=B.redSqr();pe=(pe=(pe=pe.redIAdd(pe)).redIAdd(pe)).redIAdd(pe),h=W.redMul(te.redISub(y)).redISub(pe)}return this.curve.jpoint(y,h,C)},A.prototype._dbl=function(){var y=this.curve.a,h=this.x,C=this.y,v=this.z,w=v.redSqr().redSqr(),S=h.redSqr(),P=C.redSqr(),k=S.redAdd(S).redIAdd(S).redIAdd(y.redMul(w)),O=h.redAdd(h),V=(O=O.redIAdd(O)).redMul(P),U=k.redSqr().redISub(V.redAdd(V)),B=V.redISub(U),H=P.redSqr();H=(H=(H=H.redIAdd(H)).redIAdd(H)).redIAdd(H);var W=k.redMul(B).redISub(H),te=C.redAdd(C).redMul(v);return this.curve.jpoint(U,W,te)},A.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var y=this.x.redSqr(),h=this.y.redSqr(),C=this.z.redSqr(),v=h.redSqr(),w=y.redAdd(y).redIAdd(y),S=w.redSqr(),P=this.x.redAdd(h).redSqr().redISub(y).redISub(v),k=(P=(P=(P=P.redIAdd(P)).redAdd(P).redIAdd(P)).redISub(S)).redSqr(),O=v.redIAdd(v);O=(O=(O=O.redIAdd(O)).redIAdd(O)).redIAdd(O);var V=w.redIAdd(P).redSqr().redISub(S).redISub(k).redISub(O),U=h.redMul(V);U=(U=U.redIAdd(U)).redIAdd(U);var B=this.x.redMul(k).redISub(U);B=(B=B.redIAdd(B)).redIAdd(B);var H=this.y.redMul(V.redMul(O.redISub(V)).redISub(P.redMul(k)));H=(H=(H=H.redIAdd(H)).redIAdd(H)).redIAdd(H);var W=this.z.redAdd(P).redSqr().redISub(C).redISub(k);return this.curve.jpoint(B,H,W)},A.prototype.mul=function(y,h){return y=new N(y,h),this.curve._wnafMul(this,y)},A.prototype.eq=function(y){if("affine"===y.type)return this.eq(y.toJ());if(this===y)return!0;var h=this.z.redSqr(),C=y.z.redSqr();if(0!==this.x.redMul(C).redISub(y.x.redMul(h)).cmpn(0))return!1;var v=h.redMul(this.z),w=C.redMul(y.z);return 0===this.y.redMul(w).redISub(y.y.redMul(v)).cmpn(0)},A.prototype.eqXToP=function(y){var h=this.z.redSqr(),C=y.toRed(this.curve.red).redMul(h);if(0===this.x.cmp(C))return!0;for(var v=y.clone(),w=this.curve.redN.redMul(h);;){if(v.iadd(this.curve.n),v.cmp(this.curve.p)>=0)return!1;if(C.redIAdd(w),0===this.x.cmp(C))return!0}},A.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},A.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},3346:(Y,L,T)=>{"use strict";var A,p=L,N=T(7909),m=T(3868),u=T(2946).assert;function g(I){this.curve="short"===I.type?new m.short(I):"edwards"===I.type?new m.edwards(I):new m.mont(I),this.g=this.curve.g,this.n=this.curve.n,this.hash=I.hash,u(this.g.validate(),"Invalid curve"),u(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function M(I,y){Object.defineProperty(p,I,{configurable:!0,enumerable:!0,get:function(){var h=new g(y);return Object.defineProperty(p,I,{configurable:!0,enumerable:!0,value:h}),h}})}p.PresetCurve=g,M("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:N.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),M("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:N.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),M("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:N.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),M("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:N.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),M("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:N.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),M("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:N.sha256,gRed:!1,g:["9"]}),M("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:N.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{A=T(5503)}catch(I){A=void 0}M("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:N.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",A]})},7237:(Y,L,T)=>{"use strict";var p=T(4584),N=T(2730),m=T(2946),x=T(3346),u=T(4761),g=m.assert,M=T(2806),A=T(6799);function I(y){if(!(this instanceof I))return new I(y);"string"==typeof y&&(g(Object.prototype.hasOwnProperty.call(x,y),"Unknown curve "+y),y=x[y]),y instanceof x.PresetCurve&&(y={curve:y}),this.curve=y.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=y.curve.g,this.g.precompute(y.curve.n.bitLength()+1),this.hash=y.hash||y.curve.hash}Y.exports=I,I.prototype.keyPair=function(h){return new M(this,h)},I.prototype.keyFromPrivate=function(h,C){return M.fromPrivate(this,h,C)},I.prototype.keyFromPublic=function(h,C){return M.fromPublic(this,h,C)},I.prototype.genKeyPair=function(h){h||(h={});for(var C=new N({hash:this.hash,pers:h.pers,persEnc:h.persEnc||"utf8",entropy:h.entropy||u(this.hash.hmacStrength),entropyEnc:h.entropy&&h.entropyEnc||"utf8",nonce:this.n.toArray()}),v=this.n.byteLength(),w=this.n.sub(new p(2));;){var S=new p(C.generate(v));if(!(S.cmp(w)>0))return S.iaddn(1),this.keyFromPrivate(S)}},I.prototype._truncateToN=function(h,C){var v=8*h.byteLength()-this.n.bitLength();return v>0&&(h=h.ushrn(v)),!C&&h.cmp(this.n)>=0?h.sub(this.n):h},I.prototype.sign=function(h,C,v,w){"object"==typeof v&&(w=v,v=null),w||(w={}),C=this.keyFromPrivate(C,v),h=this._truncateToN(new p(h,16));for(var S=this.n.byteLength(),P=C.getPrivate().toArray("be",S),k=h.toArray("be",S),O=new N({hash:this.hash,entropy:P,nonce:k,pers:w.pers,persEnc:w.persEnc||"utf8"}),V=this.n.sub(new p(1)),U=0;;U++){var B=w.k?w.k(U):new p(O.generate(this.n.byteLength()));if(!((B=this._truncateToN(B,!0)).cmpn(1)<=0||B.cmp(V)>=0)){var H=this.g.mul(B);if(!H.isInfinity()){var W=H.getX(),te=W.umod(this.n);if(0!==te.cmpn(0)){var $=B.invm(this.n).mul(te.mul(C.getPrivate()).iadd(h));if(0!==($=$.umod(this.n)).cmpn(0)){var pe=(H.getY().isOdd()?1:0)|(0!==W.cmp(te)?2:0);return w.canonical&&$.cmp(this.nh)>0&&($=this.n.sub($),pe^=1),new A({r:te,s:$,recoveryParam:pe})}}}}}},I.prototype.verify=function(h,C,v,w){h=this._truncateToN(new p(h,16)),v=this.keyFromPublic(v,w);var S=(C=new A(C,"hex")).r,P=C.s;if(S.cmpn(1)<0||S.cmp(this.n)>=0||P.cmpn(1)<0||P.cmp(this.n)>=0)return!1;var U,k=P.invm(this.n),O=k.mul(h).umod(this.n),V=k.mul(S).umod(this.n);return this.curve._maxwellTrick?!(U=this.g.jmulAdd(O,v.getPublic(),V)).isInfinity()&&U.eqXToP(S):!(U=this.g.mulAdd(O,v.getPublic(),V)).isInfinity()&&0===U.getX().umod(this.n).cmp(S)},I.prototype.recoverPubKey=function(y,h,C,v){g((3&C)===C,"The recovery param is more than two bits"),h=new A(h,v);var w=this.n,S=new p(y),P=h.r,k=h.s,O=1&C,V=C>>1;if(P.cmp(this.curve.p.umod(this.curve.n))>=0&&V)throw new Error("Unable to find sencond key candinate");P=this.curve.pointFromX(V?P.add(this.curve.n):P,O);var U=h.r.invm(w),B=w.sub(S).mul(U).umod(w),H=k.mul(U).umod(w);return this.g.mulAdd(B,P,H)},I.prototype.getKeyRecoveryParam=function(y,h,C,v){if(null!==(h=new A(h,v)).recoveryParam)return h.recoveryParam;for(var w=0;w<4;w++){var S;try{S=this.recoverPubKey(y,h,w)}catch(P){continue}if(S.eq(C))return w}throw new Error("Unable to find valid recovery factor")}},2806:(Y,L,T)=>{"use strict";var p=T(4584),m=T(2946).assert;function x(u,g){this.ec=u,this.priv=null,this.pub=null,g.priv&&this._importPrivate(g.priv,g.privEnc),g.pub&&this._importPublic(g.pub,g.pubEnc)}Y.exports=x,x.fromPublic=function(g,M,A){return M instanceof x?M:new x(g,{pub:M,pubEnc:A})},x.fromPrivate=function(g,M,A){return M instanceof x?M:new x(g,{priv:M,privEnc:A})},x.prototype.validate=function(){var g=this.getPublic();return g.isInfinity()?{result:!1,reason:"Invalid public key"}:g.validate()?g.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},x.prototype.getPublic=function(g,M){return"string"==typeof g&&(M=g,g=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),M?this.pub.encode(M,g):this.pub},x.prototype.getPrivate=function(g){return"hex"===g?this.priv.toString(16,2):this.priv},x.prototype._importPrivate=function(g,M){this.priv=new p(g,M||16),this.priv=this.priv.umod(this.ec.curve.n)},x.prototype._importPublic=function(g,M){if(g.x||g.y)return"mont"===this.ec.curve.type?m(g.x,"Need x coordinate"):("short"===this.ec.curve.type||"edwards"===this.ec.curve.type)&&m(g.x&&g.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(g.x,g.y));this.pub=this.ec.curve.decodePoint(g,M)},x.prototype.derive=function(g){return g.validate()||m(g.validate(),"public point not validated"),g.mul(this.priv).getX()},x.prototype.sign=function(g,M,A){return this.ec.sign(g,this,M,A)},x.prototype.verify=function(g,M){return this.ec.verify(g,M,this)},x.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},6799:(Y,L,T)=>{"use strict";var p=T(4584),N=T(2946),m=N.assert;function x(I,y){if(I instanceof x)return I;this._importDER(I,y)||(m(I.r&&I.s,"Signature without r or s"),this.r=new p(I.r,16),this.s=new p(I.s,16),this.recoveryParam=void 0===I.recoveryParam?null:I.recoveryParam)}function u(){this.place=0}function g(I,y){var h=I[y.place++];if(!(128&h))return h;var C=15&h;if(0===C||C>4)return!1;for(var v=0,w=0,S=y.place;w<C;w++,S++)v<<=8,v|=I[S],v>>>=0;return!(v<=127)&&(y.place=S,v)}function M(I){for(var y=0,h=I.length-1;!I[y]&&!(128&I[y+1])&&y<h;)y++;return 0===y?I:I.slice(y)}function A(I,y){if(y<128)I.push(y);else{var h=1+(Math.log(y)/Math.LN2>>>3);for(I.push(128|h);--h;)I.push(y>>>(h<<3)&255);I.push(y)}}Y.exports=x,x.prototype._importDER=function(y,h){y=N.toArray(y,h);var C=new u;if(48!==y[C.place++])return!1;var v=g(y,C);if(!1===v||v+C.place!==y.length||2!==y[C.place++])return!1;var w=g(y,C);if(!1===w)return!1;var S=y.slice(C.place,w+C.place);if(C.place+=w,2!==y[C.place++])return!1;var P=g(y,C);if(!1===P||y.length!==P+C.place)return!1;var k=y.slice(C.place,P+C.place);if(0===S[0]){if(!(128&S[1]))return!1;S=S.slice(1)}if(0===k[0]){if(!(128&k[1]))return!1;k=k.slice(1)}return this.r=new p(S),this.s=new p(k),this.recoveryParam=null,!0},x.prototype.toDER=function(y){var h=this.r.toArray(),C=this.s.toArray();for(128&h[0]&&(h=[0].concat(h)),128&C[0]&&(C=[0].concat(C)),h=M(h),C=M(C);!(C[0]||128&C[1]);)C=C.slice(1);var v=[2];A(v,h.length),(v=v.concat(h)).push(2),A(v,C.length);var w=v.concat(C),S=[48];return A(S,w.length),S=S.concat(w),N.encode(S,y)}},1615:(Y,L,T)=>{"use strict";var p=T(7909),N=T(3346),m=T(2946),x=m.assert,u=m.parseBytes,g=T(6014),M=T(6317);function A(I){if(x("ed25519"===I,"only tested with ed25519 so far"),!(this instanceof A))return new A(I);this.curve=I=N[I].curve,this.g=I.g,this.g.precompute(I.n.bitLength()+1),this.pointClass=I.point().constructor,this.encodingLength=Math.ceil(I.n.bitLength()/8),this.hash=p.sha512}Y.exports=A,A.prototype.sign=function(y,h){y=u(y);var C=this.keyFromSecret(h),v=this.hashInt(C.messagePrefix(),y),w=this.g.mul(v),S=this.encodePoint(w),P=this.hashInt(S,C.pubBytes(),y).mul(C.priv()),k=v.add(P).umod(this.curve.n);return this.makeSignature({R:w,S:k,Rencoded:S})},A.prototype.verify=function(y,h,C){y=u(y),h=this.makeSignature(h);var v=this.keyFromPublic(C),w=this.hashInt(h.Rencoded(),v.pubBytes(),y),S=this.g.mul(h.S());return h.R().add(v.pub().mul(w)).eq(S)},A.prototype.hashInt=function(){for(var y=this.hash(),h=0;h<arguments.length;h++)y.update(arguments[h]);return m.intFromLE(y.digest()).umod(this.curve.n)},A.prototype.keyFromPublic=function(y){return g.fromPublic(this,y)},A.prototype.keyFromSecret=function(y){return g.fromSecret(this,y)},A.prototype.makeSignature=function(y){return y instanceof M?y:new M(this,y)},A.prototype.encodePoint=function(y){var h=y.getY().toArray("le",this.encodingLength);return h[this.encodingLength-1]|=y.getX().isOdd()?128:0,h},A.prototype.decodePoint=function(y){var h=(y=m.parseBytes(y)).length-1,C=y.slice(0,h).concat(-129&y[h]),v=0!=(128&y[h]),w=m.intFromLE(C);return this.curve.pointFromY(w,v)},A.prototype.encodeInt=function(y){return y.toArray("le",this.encodingLength)},A.prototype.decodeInt=function(y){return m.intFromLE(y)},A.prototype.isPoint=function(y){return y instanceof this.pointClass}},6014:(Y,L,T)=>{"use strict";var p=T(2946),N=p.assert,m=p.parseBytes,x=p.cachedProperty;function u(g,M){this.eddsa=g,this._secret=m(M.secret),g.isPoint(M.pub)?this._pub=M.pub:this._pubBytes=m(M.pub)}u.fromPublic=function(M,A){return A instanceof u?A:new u(M,{pub:A})},u.fromSecret=function(M,A){return A instanceof u?A:new u(M,{secret:A})},u.prototype.secret=function(){return this._secret},x(u,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),x(u,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),x(u,"privBytes",function(){var M=this.eddsa,A=this.hash(),I=M.encodingLength-1,y=A.slice(0,M.encodingLength);return y[0]&=248,y[I]&=127,y[I]|=64,y}),x(u,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),x(u,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),x(u,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),u.prototype.sign=function(M){return N(this._secret,"KeyPair can only verify"),this.eddsa.sign(M,this)},u.prototype.verify=function(M,A){return this.eddsa.verify(M,A,this)},u.prototype.getSecret=function(M){return N(this._secret,"KeyPair is public only"),p.encode(this.secret(),M)},u.prototype.getPublic=function(M){return p.encode(this.pubBytes(),M)},Y.exports=u},6317:(Y,L,T)=>{"use strict";var p=T(4584),N=T(2946),m=N.assert,x=N.cachedProperty,u=N.parseBytes;function g(M,A){this.eddsa=M,"object"!=typeof A&&(A=u(A)),Array.isArray(A)&&(A={R:A.slice(0,M.encodingLength),S:A.slice(M.encodingLength)}),m(A.R&&A.S,"Signature without R or S"),M.isPoint(A.R)&&(this._R=A.R),A.S instanceof p&&(this._S=A.S),this._Rencoded=Array.isArray(A.R)?A.R:A.Rencoded,this._Sencoded=Array.isArray(A.S)?A.S:A.Sencoded}x(g,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),x(g,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),x(g,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),x(g,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),g.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},g.prototype.toHex=function(){return N.encode(this.toBytes(),"hex").toUpperCase()},Y.exports=g},5503:Y=>{Y.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},2946:(Y,L,T)=>{"use strict";var p=L,N=T(4584),m=T(6055),x=T(4869);p.assert=m,p.toArray=x.toArray,p.zero2=x.zero2,p.toHex=x.toHex,p.encode=x.encode,p.getNAF=function(y,h,C){var v=new Array(Math.max(y.bitLength(),C)+1);v.fill(0);for(var w=1<<h+1,S=y.clone(),P=0;P<v.length;P++){var k,O=S.andln(w-1);S.isOdd()?S.isubn(k=O>(w>>1)-1?(w>>1)-O:O):k=0,v[P]=k,S.iushrn(1)}return v},p.getJSF=function(y,h){var C=[[],[]];y=y.clone(),h=h.clone();for(var S,v=0,w=0;y.cmpn(-v)>0||h.cmpn(-w)>0;){var O,V,P=y.andln(3)+v&3,k=h.andln(3)+w&3;3===P&&(P=-1),3===k&&(k=-1),O=0==(1&P)?0:3!=(S=y.andln(7)+v&7)&&5!==S||2!==k?P:-P,C[0].push(O),V=0==(1&k)?0:3!=(S=h.andln(7)+w&7)&&5!==S||2!==P?k:-k,C[1].push(V),2*v===O+1&&(v=1-v),2*w===V+1&&(w=1-w),y.iushrn(1),h.iushrn(1)}return C},p.cachedProperty=function(y,h,C){var v="_"+h;y.prototype[h]=function(){return void 0!==this[v]?this[v]:this[v]=C.call(this)}},p.parseBytes=function(y){return"string"==typeof y?p.toArray(y,"hex"):y},p.intFromLE=function(y){return new N(y,"hex","le")}},4584:function(Y,L,T){!function(p,N){"use strict";function m(R,r){if(!R)throw new Error(r||"Assertion failed")}function x(R,r){R.super_=r;var s=function(){};s.prototype=r.prototype,R.prototype=new s,R.prototype.constructor=R}function u(R,r,s){if(u.isBN(R))return R;this.negative=0,this.words=null,this.length=0,this.red=null,null!==R&&(("le"===r||"be"===r)&&(s=r,r=10),this._init(R||0,r||10,s||"be"))}var g;"object"==typeof p?p.exports=u:N.BN=u,u.BN=u,u.wordSize=26;try{g="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:T(5568).Buffer}catch(R){}function M(R,r){var s=R.charCodeAt(r);return s>=65&&s<=70?s-55:s>=97&&s<=102?s-87:s-48&15}function A(R,r,s){var l=M(R,s);return s-1>=r&&(l|=M(R,s-1)<<4),l}function I(R,r,s,l){for(var a=0,f=Math.min(R.length,s),_=r;_<f;_++){var D=R.charCodeAt(_)-48;a*=l,a+=D>=49?D-49+10:D>=17?D-17+10:D}return a}u.isBN=function(r){return r instanceof u||null!==r&&"object"==typeof r&&r.constructor.wordSize===u.wordSize&&Array.isArray(r.words)},u.max=function(r,s){return r.cmp(s)>0?r:s},u.min=function(r,s){return r.cmp(s)<0?r:s},u.prototype._init=function(r,s,l){if("number"==typeof r)return this._initNumber(r,s,l);if("object"==typeof r)return this._initArray(r,s,l);"hex"===s&&(s=16),m(s===(0|s)&&s>=2&&s<=36);var a=0;"-"===(r=r.toString().replace(/\s+/g,""))[0]&&(a++,this.negative=1),a<r.length&&(16===s?this._parseHex(r,a,l):(this._parseBase(r,s,a),"le"===l&&this._initArray(this.toArray(),s,l)))},u.prototype._initNumber=function(r,s,l){r<0&&(this.negative=1,r=-r),r<67108864?(this.words=[67108863&r],this.length=1):r<4503599627370496?(this.words=[67108863&r,r/67108864&67108863],this.length=2):(m(r<9007199254740992),this.words=[67108863&r,r/67108864&67108863,1],this.length=3),"le"===l&&this._initArray(this.toArray(),s,l)},u.prototype._initArray=function(r,s,l){if(m("number"==typeof r.length),r.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(r.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var f,_,D=0;if("be"===l)for(a=r.length-1,f=0;a>=0;a-=3)this.words[f]|=(_=r[a]|r[a-1]<<8|r[a-2]<<16)<<D&67108863,this.words[f+1]=_>>>26-D&67108863,(D+=24)>=26&&(D-=26,f++);else if("le"===l)for(a=0,f=0;a<r.length;a+=3)this.words[f]|=(_=r[a]|r[a+1]<<8|r[a+2]<<16)<<D&67108863,this.words[f+1]=_>>>26-D&67108863,(D+=24)>=26&&(D-=26,f++);return this.strip()},u.prototype._parseHex=function(r,s,l){this.length=Math.ceil((r.length-s)/6),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var D,f=0,_=0;if("be"===l)for(a=r.length-1;a>=s;a-=2)D=A(r,s,a)<<f,this.words[_]|=67108863&D,f>=18?(f-=18,this.words[_+=1]|=D>>>26):f+=8;else for(a=(r.length-s)%2==0?s+1:s;a<r.length;a+=2)D=A(r,s,a)<<f,this.words[_]|=67108863&D,f>=18?(f-=18,this.words[_+=1]|=D>>>26):f+=8;this.strip()},u.prototype._parseBase=function(r,s,l){this.words=[0],this.length=1;for(var a=0,f=1;f<=67108863;f*=s)a++;a--,f=f/s|0;for(var _=r.length-l,D=_%a,d=Math.min(_,_-D)+l,i=0,b=l;b<d;b+=a)i=I(r,b,b+a,s),this.imuln(f),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i);if(0!==D){var z=1;for(i=I(r,b,r.length,s),b=0;b<D;b++)z*=s;this.imuln(z),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i)}this.strip()},u.prototype.copy=function(r){r.words=new Array(this.length);for(var s=0;s<this.length;s++)r.words[s]=this.words[s];r.length=this.length,r.negative=this.negative,r.red=this.red},u.prototype.clone=function(){var r=new u(null);return this.copy(r),r},u.prototype._expand=function(r){for(;this.length<r;)this.words[this.length++]=0;return this},u.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},u.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},u.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],C=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function w(R,r,s){s.negative=r.negative^R.negative;var l=R.length+r.length|0;s.length=l,l=l-1|0;var a=0|R.words[0],f=0|r.words[0],_=a*f,d=_/67108864|0;s.words[0]=67108863&_;for(var i=1;i<l;i++){for(var b=d>>>26,z=67108863&d,q=Math.min(i,r.length-1),J=Math.max(0,i-R.length+1);J<=q;J++)b+=(_=(a=0|R.words[i-J|0])*(f=0|r.words[J])+z)/67108864|0,z=67108863&_;s.words[i]=0|z,d=0|b}return 0!==d?s.words[i]=0|d:s.length--,s.strip()}u.prototype.toString=function(r,s){var l;if(s=0|s||1,16===(r=r||10)||"hex"===r){l="";for(var a=0,f=0,_=0;_<this.length;_++){var D=this.words[_],d=(16777215&(D<<a|f)).toString(16);l=0!=(f=D>>>24-a&16777215)||_!==this.length-1?y[6-d.length]+d+l:d+l,(a+=2)>=26&&(a-=26,_--)}for(0!==f&&(l=f.toString(16)+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}if(r===(0|r)&&r>=2&&r<=36){var i=h[r],b=C[r];l="";var z=this.clone();for(z.negative=0;!z.isZero();){var q=z.modn(b).toString(r);l=(z=z.idivn(b)).isZero()?q+l:y[i-q.length]+q+l}for(this.isZero()&&(l="0"+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}m(!1,"Base should be between 2 and 36")},u.prototype.toNumber=function(){var r=this.words[0];return 2===this.length?r+=67108864*this.words[1]:3===this.length&&1===this.words[2]?r+=4503599627370496+67108864*this.words[1]:this.length>2&&m(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-r:r},u.prototype.toJSON=function(){return this.toString(16)},u.prototype.toBuffer=function(r,s){return m(void 0!==g),this.toArrayLike(g,r,s)},u.prototype.toArray=function(r,s){return this.toArrayLike(Array,r,s)},u.prototype.toArrayLike=function(r,s,l){var a=this.byteLength(),f=l||Math.max(1,a);m(a<=f,"byte array longer than desired length"),m(f>0,"Requested array length <= 0"),this.strip();var d,i,_="le"===s,D=new r(f),b=this.clone();if(_){for(i=0;!b.isZero();i++)d=b.andln(255),b.iushrn(8),D[i]=d;for(;i<f;i++)D[i]=0}else{for(i=0;i<f-a;i++)D[i]=0;for(i=0;!b.isZero();i++)d=b.andln(255),b.iushrn(8),D[f-i-1]=d}return D},u.prototype._countBits=Math.clz32?function(r){return 32-Math.clz32(r)}:function(r){var s=r,l=0;return s>=4096&&(l+=13,s>>>=13),s>=64&&(l+=7,s>>>=7),s>=8&&(l+=4,s>>>=4),s>=2&&(l+=2,s>>>=2),l+s},u.prototype._zeroBits=function(r){if(0===r)return 26;var s=r,l=0;return 0==(8191&s)&&(l+=13,s>>>=13),0==(127&s)&&(l+=7,s>>>=7),0==(15&s)&&(l+=4,s>>>=4),0==(3&s)&&(l+=2,s>>>=2),0==(1&s)&&l++,l},u.prototype.bitLength=function(){var s=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+s},u.prototype.zeroBits=function(){if(this.isZero())return 0;for(var r=0,s=0;s<this.length;s++){var l=this._zeroBits(this.words[s]);if(r+=l,26!==l)break}return r},u.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},u.prototype.toTwos=function(r){return 0!==this.negative?this.abs().inotn(r).iaddn(1):this.clone()},u.prototype.fromTwos=function(r){return this.testn(r-1)?this.notn(r).iaddn(1).ineg():this.clone()},u.prototype.isNeg=function(){return 0!==this.negative},u.prototype.neg=function(){return this.clone().ineg()},u.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},u.prototype.iuor=function(r){for(;this.length<r.length;)this.words[this.length++]=0;for(var s=0;s<r.length;s++)this.words[s]=this.words[s]|r.words[s];return this.strip()},u.prototype.ior=function(r){return m(0==(this.negative|r.negative)),this.iuor(r)},u.prototype.or=function(r){return this.length>r.length?this.clone().ior(r):r.clone().ior(this)},u.prototype.uor=function(r){return this.length>r.length?this.clone().iuor(r):r.clone().iuor(this)},u.prototype.iuand=function(r){var s;s=this.length>r.length?r:this;for(var l=0;l<s.length;l++)this.words[l]=this.words[l]&r.words[l];return this.length=s.length,this.strip()},u.prototype.iand=function(r){return m(0==(this.negative|r.negative)),this.iuand(r)},u.prototype.and=function(r){return this.length>r.length?this.clone().iand(r):r.clone().iand(this)},u.prototype.uand=function(r){return this.length>r.length?this.clone().iuand(r):r.clone().iuand(this)},u.prototype.iuxor=function(r){var s,l;this.length>r.length?(s=this,l=r):(s=r,l=this);for(var a=0;a<l.length;a++)this.words[a]=s.words[a]^l.words[a];if(this!==s)for(;a<s.length;a++)this.words[a]=s.words[a];return this.length=s.length,this.strip()},u.prototype.ixor=function(r){return m(0==(this.negative|r.negative)),this.iuxor(r)},u.prototype.xor=function(r){return this.length>r.length?this.clone().ixor(r):r.clone().ixor(this)},u.prototype.uxor=function(r){return this.length>r.length?this.clone().iuxor(r):r.clone().iuxor(this)},u.prototype.inotn=function(r){m("number"==typeof r&&r>=0);var s=0|Math.ceil(r/26),l=r%26;this._expand(s),l>0&&s--;for(var a=0;a<s;a++)this.words[a]=67108863&~this.words[a];return l>0&&(this.words[a]=~this.words[a]&67108863>>26-l),this.strip()},u.prototype.notn=function(r){return this.clone().inotn(r)},u.prototype.setn=function(r,s){m("number"==typeof r&&r>=0);var l=r/26|0,a=r%26;return this._expand(l+1),this.words[l]=s?this.words[l]|1<<a:this.words[l]&~(1<<a),this.strip()},u.prototype.iadd=function(r){var s,l,a;if(0!==this.negative&&0===r.negative)return this.negative=0,s=this.isub(r),this.negative^=1,this._normSign();if(0===this.negative&&0!==r.negative)return r.negative=0,s=this.isub(r),r.negative=1,s._normSign();this.length>r.length?(l=this,a=r):(l=r,a=this);for(var f=0,_=0;_<a.length;_++)this.words[_]=67108863&(s=(0|l.words[_])+(0|a.words[_])+f),f=s>>>26;for(;0!==f&&_<l.length;_++)this.words[_]=67108863&(s=(0|l.words[_])+f),f=s>>>26;if(this.length=l.length,0!==f)this.words[this.length]=f,this.length++;else if(l!==this)for(;_<l.length;_++)this.words[_]=l.words[_];return this},u.prototype.add=function(r){var s;return 0!==r.negative&&0===this.negative?(r.negative=0,s=this.sub(r),r.negative^=1,s):0===r.negative&&0!==this.negative?(this.negative=0,s=r.sub(this),this.negative=1,s):this.length>r.length?this.clone().iadd(r):r.clone().iadd(this)},u.prototype.isub=function(r){if(0!==r.negative){r.negative=0;var s=this.iadd(r);return r.negative=1,s._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(r),this.negative=1,this._normSign();var a,f,l=this.cmp(r);if(0===l)return this.negative=0,this.length=1,this.words[0]=0,this;l>0?(a=this,f=r):(a=r,f=this);for(var _=0,D=0;D<f.length;D++)_=(s=(0|a.words[D])-(0|f.words[D])+_)>>26,this.words[D]=67108863&s;for(;0!==_&&D<a.length;D++)_=(s=(0|a.words[D])+_)>>26,this.words[D]=67108863&s;if(0===_&&D<a.length&&a!==this)for(;D<a.length;D++)this.words[D]=a.words[D];return this.length=Math.max(this.length,D),a!==this&&(this.negative=1),this.strip()},u.prototype.sub=function(r){return this.clone().isub(r)};var S=function(r,s,l){var d,i,b,a=r.words,f=s.words,_=l.words,D=0,z=0|a[0],q=8191&z,J=z>>>13,ge=0|a[1],me=8191&ge,le=ge>>>13,fe=0|a[2],ae=8191&fe,de=fe>>>13,xe=0|a[3],Ce=8191&xe,oe=xe>>>13,we=0|a[4],ye=8191&we,re=we>>>13,ee=0|a[5],Z=8191&ee,ue=ee>>>13,Re=0|a[6],Te=8191&Re,Ee=Re>>>13,$e=0|a[7],Ne=8191&$e,_e=$e>>>13,Be=0|a[8],Ae=8191&Be,Le=Be>>>13,Ct=0|a[9],He=8191&Ct,We=Ct>>>13,Vt=0|f[0],qe=8191&Vt,ct=Vt>>>13,Mt=0|f[1],it=8191&Mt,at=Mt>>>13,Dn=0|f[2],ot=8191&Dn,Je=Dn>>>13,En=0|f[3],Ge=8191&En,dt=En>>>13,Pn=0|f[4],ut=8191&Pn,Ve=Pn>>>13,On=0|f[5],Ke=8191&On,st=On>>>13,qn=0|f[6],ft=8191&qn,ze=qn>>>13,sn=0|f[7],ht=8191&sn,tt=sn>>>13,Qt=0|f[8],et=8191&Qt,Xe=Qt>>>13,kn=0|f[9],Ye=8191&kn,lt=kn>>>13;l.negative=r.negative^s.negative,l.length=19;var un=(D+(d=Math.imul(q,qe))|0)+((8191&(i=(i=Math.imul(q,ct))+Math.imul(J,qe)|0))<<13)|0;D=((b=Math.imul(J,ct))+(i>>>13)|0)+(un>>>26)|0,un&=67108863,d=Math.imul(me,qe),i=(i=Math.imul(me,ct))+Math.imul(le,qe)|0,b=Math.imul(le,ct);var Ht=(D+(d=d+Math.imul(q,it)|0)|0)+((8191&(i=(i=i+Math.imul(q,at)|0)+Math.imul(J,it)|0))<<13)|0;D=((b=b+Math.imul(J,at)|0)+(i>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,d=Math.imul(ae,qe),i=(i=Math.imul(ae,ct))+Math.imul(de,qe)|0,b=Math.imul(de,ct),d=d+Math.imul(me,it)|0,i=(i=i+Math.imul(me,at)|0)+Math.imul(le,it)|0,b=b+Math.imul(le,at)|0;var jt=(D+(d=d+Math.imul(q,ot)|0)|0)+((8191&(i=(i=i+Math.imul(q,Je)|0)+Math.imul(J,ot)|0))<<13)|0;D=((b=b+Math.imul(J,Je)|0)+(i>>>13)|0)+(jt>>>26)|0,jt&=67108863,d=Math.imul(Ce,qe),i=(i=Math.imul(Ce,ct))+Math.imul(oe,qe)|0,b=Math.imul(oe,ct),d=d+Math.imul(ae,it)|0,i=(i=i+Math.imul(ae,at)|0)+Math.imul(de,it)|0,b=b+Math.imul(de,at)|0,d=d+Math.imul(me,ot)|0,i=(i=i+Math.imul(me,Je)|0)+Math.imul(le,ot)|0,b=b+Math.imul(le,Je)|0;var bn=(D+(d=d+Math.imul(q,Ge)|0)|0)+((8191&(i=(i=i+Math.imul(q,dt)|0)+Math.imul(J,Ge)|0))<<13)|0;D=((b=b+Math.imul(J,dt)|0)+(i>>>13)|0)+(bn>>>26)|0,bn&=67108863,d=Math.imul(ye,qe),i=(i=Math.imul(ye,ct))+Math.imul(re,qe)|0,b=Math.imul(re,ct),d=d+Math.imul(Ce,it)|0,i=(i=i+Math.imul(Ce,at)|0)+Math.imul(oe,it)|0,b=b+Math.imul(oe,at)|0,d=d+Math.imul(ae,ot)|0,i=(i=i+Math.imul(ae,Je)|0)+Math.imul(de,ot)|0,b=b+Math.imul(de,Je)|0,d=d+Math.imul(me,Ge)|0,i=(i=i+Math.imul(me,dt)|0)+Math.imul(le,Ge)|0,b=b+Math.imul(le,dt)|0;var dn=(D+(d=d+Math.imul(q,ut)|0)|0)+((8191&(i=(i=i+Math.imul(q,Ve)|0)+Math.imul(J,ut)|0))<<13)|0;D=((b=b+Math.imul(J,Ve)|0)+(i>>>13)|0)+(dn>>>26)|0,dn&=67108863,d=Math.imul(Z,qe),i=(i=Math.imul(Z,ct))+Math.imul(ue,qe)|0,b=Math.imul(ue,ct),d=d+Math.imul(ye,it)|0,i=(i=i+Math.imul(ye,at)|0)+Math.imul(re,it)|0,b=b+Math.imul(re,at)|0,d=d+Math.imul(Ce,ot)|0,i=(i=i+Math.imul(Ce,Je)|0)+Math.imul(oe,ot)|0,b=b+Math.imul(oe,Je)|0,d=d+Math.imul(ae,Ge)|0,i=(i=i+Math.imul(ae,dt)|0)+Math.imul(de,Ge)|0,b=b+Math.imul(de,dt)|0,d=d+Math.imul(me,ut)|0,i=(i=i+Math.imul(me,Ve)|0)+Math.imul(le,ut)|0,b=b+Math.imul(le,Ve)|0;var pn=(D+(d=d+Math.imul(q,Ke)|0)|0)+((8191&(i=(i=i+Math.imul(q,st)|0)+Math.imul(J,Ke)|0))<<13)|0;D=((b=b+Math.imul(J,st)|0)+(i>>>13)|0)+(pn>>>26)|0,pn&=67108863,d=Math.imul(Te,qe),i=(i=Math.imul(Te,ct))+Math.imul(Ee,qe)|0,b=Math.imul(Ee,ct),d=d+Math.imul(Z,it)|0,i=(i=i+Math.imul(Z,at)|0)+Math.imul(ue,it)|0,b=b+Math.imul(ue,at)|0,d=d+Math.imul(ye,ot)|0,i=(i=i+Math.imul(ye,Je)|0)+Math.imul(re,ot)|0,b=b+Math.imul(re,Je)|0,d=d+Math.imul(Ce,Ge)|0,i=(i=i+Math.imul(Ce,dt)|0)+Math.imul(oe,Ge)|0,b=b+Math.imul(oe,dt)|0,d=d+Math.imul(ae,ut)|0,i=(i=i+Math.imul(ae,Ve)|0)+Math.imul(de,ut)|0,b=b+Math.imul(de,Ve)|0,d=d+Math.imul(me,Ke)|0,i=(i=i+Math.imul(me,st)|0)+Math.imul(le,Ke)|0,b=b+Math.imul(le,st)|0;var In=(D+(d=d+Math.imul(q,ft)|0)|0)+((8191&(i=(i=i+Math.imul(q,ze)|0)+Math.imul(J,ft)|0))<<13)|0;D=((b=b+Math.imul(J,ze)|0)+(i>>>13)|0)+(In>>>26)|0,In&=67108863,d=Math.imul(Ne,qe),i=(i=Math.imul(Ne,ct))+Math.imul(_e,qe)|0,b=Math.imul(_e,ct),d=d+Math.imul(Te,it)|0,i=(i=i+Math.imul(Te,at)|0)+Math.imul(Ee,it)|0,b=b+Math.imul(Ee,at)|0,d=d+Math.imul(Z,ot)|0,i=(i=i+Math.imul(Z,Je)|0)+Math.imul(ue,ot)|0,b=b+Math.imul(ue,Je)|0,d=d+Math.imul(ye,Ge)|0,i=(i=i+Math.imul(ye,dt)|0)+Math.imul(re,Ge)|0,b=b+Math.imul(re,dt)|0,d=d+Math.imul(Ce,ut)|0,i=(i=i+Math.imul(Ce,Ve)|0)+Math.imul(oe,ut)|0,b=b+Math.imul(oe,Ve)|0,d=d+Math.imul(ae,Ke)|0,i=(i=i+Math.imul(ae,st)|0)+Math.imul(de,Ke)|0,b=b+Math.imul(de,st)|0,d=d+Math.imul(me,ft)|0,i=(i=i+Math.imul(me,ze)|0)+Math.imul(le,ft)|0,b=b+Math.imul(le,ze)|0;var rn=(D+(d=d+Math.imul(q,ht)|0)|0)+((8191&(i=(i=i+Math.imul(q,tt)|0)+Math.imul(J,ht)|0))<<13)|0;D=((b=b+Math.imul(J,tt)|0)+(i>>>13)|0)+(rn>>>26)|0,rn&=67108863,d=Math.imul(Ae,qe),i=(i=Math.imul(Ae,ct))+Math.imul(Le,qe)|0,b=Math.imul(Le,ct),d=d+Math.imul(Ne,it)|0,i=(i=i+Math.imul(Ne,at)|0)+Math.imul(_e,it)|0,b=b+Math.imul(_e,at)|0,d=d+Math.imul(Te,ot)|0,i=(i=i+Math.imul(Te,Je)|0)+Math.imul(Ee,ot)|0,b=b+Math.imul(Ee,Je)|0,d=d+Math.imul(Z,Ge)|0,i=(i=i+Math.imul(Z,dt)|0)+Math.imul(ue,Ge)|0,b=b+Math.imul(ue,dt)|0,d=d+Math.imul(ye,ut)|0,i=(i=i+Math.imul(ye,Ve)|0)+Math.imul(re,ut)|0,b=b+Math.imul(re,Ve)|0,d=d+Math.imul(Ce,Ke)|0,i=(i=i+Math.imul(Ce,st)|0)+Math.imul(oe,Ke)|0,b=b+Math.imul(oe,st)|0,d=d+Math.imul(ae,ft)|0,i=(i=i+Math.imul(ae,ze)|0)+Math.imul(de,ft)|0,b=b+Math.imul(de,ze)|0,d=d+Math.imul(me,ht)|0,i=(i=i+Math.imul(me,tt)|0)+Math.imul(le,ht)|0,b=b+Math.imul(le,tt)|0;var Cn=(D+(d=d+Math.imul(q,et)|0)|0)+((8191&(i=(i=i+Math.imul(q,Xe)|0)+Math.imul(J,et)|0))<<13)|0;D=((b=b+Math.imul(J,Xe)|0)+(i>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,d=Math.imul(He,qe),i=(i=Math.imul(He,ct))+Math.imul(We,qe)|0,b=Math.imul(We,ct),d=d+Math.imul(Ae,it)|0,i=(i=i+Math.imul(Ae,at)|0)+Math.imul(Le,it)|0,b=b+Math.imul(Le,at)|0,d=d+Math.imul(Ne,ot)|0,i=(i=i+Math.imul(Ne,Je)|0)+Math.imul(_e,ot)|0,b=b+Math.imul(_e,Je)|0,d=d+Math.imul(Te,Ge)|0,i=(i=i+Math.imul(Te,dt)|0)+Math.imul(Ee,Ge)|0,b=b+Math.imul(Ee,dt)|0,d=d+Math.imul(Z,ut)|0,i=(i=i+Math.imul(Z,Ve)|0)+Math.imul(ue,ut)|0,b=b+Math.imul(ue,Ve)|0,d=d+Math.imul(ye,Ke)|0,i=(i=i+Math.imul(ye,st)|0)+Math.imul(re,Ke)|0,b=b+Math.imul(re,st)|0,d=d+Math.imul(Ce,ft)|0,i=(i=i+Math.imul(Ce,ze)|0)+Math.imul(oe,ft)|0,b=b+Math.imul(oe,ze)|0,d=d+Math.imul(ae,ht)|0,i=(i=i+Math.imul(ae,tt)|0)+Math.imul(de,ht)|0,b=b+Math.imul(de,tt)|0,d=d+Math.imul(me,et)|0,i=(i=i+Math.imul(me,Xe)|0)+Math.imul(le,et)|0,b=b+Math.imul(le,Xe)|0;var Kt=(D+(d=d+Math.imul(q,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(q,lt)|0)+Math.imul(J,Ye)|0))<<13)|0;D=((b=b+Math.imul(J,lt)|0)+(i>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,d=Math.imul(He,it),i=(i=Math.imul(He,at))+Math.imul(We,it)|0,b=Math.imul(We,at),d=d+Math.imul(Ae,ot)|0,i=(i=i+Math.imul(Ae,Je)|0)+Math.imul(Le,ot)|0,b=b+Math.imul(Le,Je)|0,d=d+Math.imul(Ne,Ge)|0,i=(i=i+Math.imul(Ne,dt)|0)+Math.imul(_e,Ge)|0,b=b+Math.imul(_e,dt)|0,d=d+Math.imul(Te,ut)|0,i=(i=i+Math.imul(Te,Ve)|0)+Math.imul(Ee,ut)|0,b=b+Math.imul(Ee,Ve)|0,d=d+Math.imul(Z,Ke)|0,i=(i=i+Math.imul(Z,st)|0)+Math.imul(ue,Ke)|0,b=b+Math.imul(ue,st)|0,d=d+Math.imul(ye,ft)|0,i=(i=i+Math.imul(ye,ze)|0)+Math.imul(re,ft)|0,b=b+Math.imul(re,ze)|0,d=d+Math.imul(Ce,ht)|0,i=(i=i+Math.imul(Ce,tt)|0)+Math.imul(oe,ht)|0,b=b+Math.imul(oe,tt)|0,d=d+Math.imul(ae,et)|0,i=(i=i+Math.imul(ae,Xe)|0)+Math.imul(de,et)|0,b=b+Math.imul(de,Xe)|0;var Nt=(D+(d=d+Math.imul(me,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(me,lt)|0)+Math.imul(le,Ye)|0))<<13)|0;D=((b=b+Math.imul(le,lt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,d=Math.imul(He,ot),i=(i=Math.imul(He,Je))+Math.imul(We,ot)|0,b=Math.imul(We,Je),d=d+Math.imul(Ae,Ge)|0,i=(i=i+Math.imul(Ae,dt)|0)+Math.imul(Le,Ge)|0,b=b+Math.imul(Le,dt)|0,d=d+Math.imul(Ne,ut)|0,i=(i=i+Math.imul(Ne,Ve)|0)+Math.imul(_e,ut)|0,b=b+Math.imul(_e,Ve)|0,d=d+Math.imul(Te,Ke)|0,i=(i=i+Math.imul(Te,st)|0)+Math.imul(Ee,Ke)|0,b=b+Math.imul(Ee,st)|0,d=d+Math.imul(Z,ft)|0,i=(i=i+Math.imul(Z,ze)|0)+Math.imul(ue,ft)|0,b=b+Math.imul(ue,ze)|0,d=d+Math.imul(ye,ht)|0,i=(i=i+Math.imul(ye,tt)|0)+Math.imul(re,ht)|0,b=b+Math.imul(re,tt)|0,d=d+Math.imul(Ce,et)|0,i=(i=i+Math.imul(Ce,Xe)|0)+Math.imul(oe,et)|0,b=b+Math.imul(oe,Xe)|0;var xn=(D+(d=d+Math.imul(ae,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(ae,lt)|0)+Math.imul(de,Ye)|0))<<13)|0;D=((b=b+Math.imul(de,lt)|0)+(i>>>13)|0)+(xn>>>26)|0,xn&=67108863,d=Math.imul(He,Ge),i=(i=Math.imul(He,dt))+Math.imul(We,Ge)|0,b=Math.imul(We,dt),d=d+Math.imul(Ae,ut)|0,i=(i=i+Math.imul(Ae,Ve)|0)+Math.imul(Le,ut)|0,b=b+Math.imul(Le,Ve)|0,d=d+Math.imul(Ne,Ke)|0,i=(i=i+Math.imul(Ne,st)|0)+Math.imul(_e,Ke)|0,b=b+Math.imul(_e,st)|0,d=d+Math.imul(Te,ft)|0,i=(i=i+Math.imul(Te,ze)|0)+Math.imul(Ee,ft)|0,b=b+Math.imul(Ee,ze)|0,d=d+Math.imul(Z,ht)|0,i=(i=i+Math.imul(Z,tt)|0)+Math.imul(ue,ht)|0,b=b+Math.imul(ue,tt)|0,d=d+Math.imul(ye,et)|0,i=(i=i+Math.imul(ye,Xe)|0)+Math.imul(re,et)|0,b=b+Math.imul(re,Xe)|0;var wn=(D+(d=d+Math.imul(Ce,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(Ce,lt)|0)+Math.imul(oe,Ye)|0))<<13)|0;D=((b=b+Math.imul(oe,lt)|0)+(i>>>13)|0)+(wn>>>26)|0,wn&=67108863,d=Math.imul(He,ut),i=(i=Math.imul(He,Ve))+Math.imul(We,ut)|0,b=Math.imul(We,Ve),d=d+Math.imul(Ae,Ke)|0,i=(i=i+Math.imul(Ae,st)|0)+Math.imul(Le,Ke)|0,b=b+Math.imul(Le,st)|0,d=d+Math.imul(Ne,ft)|0,i=(i=i+Math.imul(Ne,ze)|0)+Math.imul(_e,ft)|0,b=b+Math.imul(_e,ze)|0,d=d+Math.imul(Te,ht)|0,i=(i=i+Math.imul(Te,tt)|0)+Math.imul(Ee,ht)|0,b=b+Math.imul(Ee,tt)|0,d=d+Math.imul(Z,et)|0,i=(i=i+Math.imul(Z,Xe)|0)+Math.imul(ue,et)|0,b=b+Math.imul(ue,Xe)|0;var Mn=(D+(d=d+Math.imul(ye,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(ye,lt)|0)+Math.imul(re,Ye)|0))<<13)|0;D=((b=b+Math.imul(re,lt)|0)+(i>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,d=Math.imul(He,Ke),i=(i=Math.imul(He,st))+Math.imul(We,Ke)|0,b=Math.imul(We,st),d=d+Math.imul(Ae,ft)|0,i=(i=i+Math.imul(Ae,ze)|0)+Math.imul(Le,ft)|0,b=b+Math.imul(Le,ze)|0,d=d+Math.imul(Ne,ht)|0,i=(i=i+Math.imul(Ne,tt)|0)+Math.imul(_e,ht)|0,b=b+Math.imul(_e,tt)|0,d=d+Math.imul(Te,et)|0,i=(i=i+Math.imul(Te,Xe)|0)+Math.imul(Ee,et)|0,b=b+Math.imul(Ee,Xe)|0;var xt=(D+(d=d+Math.imul(Z,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(Z,lt)|0)+Math.imul(ue,Ye)|0))<<13)|0;D=((b=b+Math.imul(ue,lt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,d=Math.imul(He,ft),i=(i=Math.imul(He,ze))+Math.imul(We,ft)|0,b=Math.imul(We,ze),d=d+Math.imul(Ae,ht)|0,i=(i=i+Math.imul(Ae,tt)|0)+Math.imul(Le,ht)|0,b=b+Math.imul(Le,tt)|0,d=d+Math.imul(Ne,et)|0,i=(i=i+Math.imul(Ne,Xe)|0)+Math.imul(_e,et)|0,b=b+Math.imul(_e,Xe)|0;var Rn=(D+(d=d+Math.imul(Te,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(Te,lt)|0)+Math.imul(Ee,Ye)|0))<<13)|0;D=((b=b+Math.imul(Ee,lt)|0)+(i>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,d=Math.imul(He,ht),i=(i=Math.imul(He,tt))+Math.imul(We,ht)|0,b=Math.imul(We,tt),d=d+Math.imul(Ae,et)|0,i=(i=i+Math.imul(Ae,Xe)|0)+Math.imul(Le,et)|0,b=b+Math.imul(Le,Xe)|0;var Zt=(D+(d=d+Math.imul(Ne,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(Ne,lt)|0)+Math.imul(_e,Ye)|0))<<13)|0;D=((b=b+Math.imul(_e,lt)|0)+(i>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,d=Math.imul(He,et),i=(i=Math.imul(He,Xe))+Math.imul(We,et)|0,b=Math.imul(We,Xe);var tn=(D+(d=d+Math.imul(Ae,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(Ae,lt)|0)+Math.imul(Le,Ye)|0))<<13)|0;D=((b=b+Math.imul(Le,lt)|0)+(i>>>13)|0)+(tn>>>26)|0,tn&=67108863;var _n=(D+(d=Math.imul(He,Ye))|0)+((8191&(i=(i=Math.imul(He,lt))+Math.imul(We,Ye)|0))<<13)|0;return D=((b=Math.imul(We,lt))+(i>>>13)|0)+(_n>>>26)|0,_n&=67108863,_[0]=un,_[1]=Ht,_[2]=jt,_[3]=bn,_[4]=dn,_[5]=pn,_[6]=In,_[7]=rn,_[8]=Cn,_[9]=Kt,_[10]=Nt,_[11]=xn,_[12]=wn,_[13]=Mn,_[14]=xt,_[15]=Rn,_[16]=Zt,_[17]=tn,_[18]=_n,0!==D&&(_[19]=D,l.length++),l};function k(R,r,s){return(new O).mulp(R,r,s)}function O(R,r){this.x=R,this.y=r}Math.imul||(S=w),u.prototype.mulTo=function(r,s){var a=this.length+r.length;return 10===this.length&&10===r.length?S(this,r,s):a<63?w(this,r,s):a<1024?function(R,r,s){s.negative=r.negative^R.negative,s.length=R.length+r.length;for(var l=0,a=0,f=0;f<s.length-1;f++){var _=a;a=0;for(var D=67108863&l,d=Math.min(f,r.length-1),i=Math.max(0,f-R.length+1);i<=d;i++){var J=(0|R.words[f-i])*(0|r.words[i]),ge=67108863&J;D=67108863&(ge=ge+D|0),a+=(_=(_=_+(J/67108864|0)|0)+(ge>>>26)|0)>>>26,_&=67108863}s.words[f]=D,l=_,_=a}return 0!==l?s.words[f]=l:s.length--,s.strip()}(this,r,s):k(this,r,s)},O.prototype.makeRBT=function(r){for(var s=new Array(r),l=u.prototype._countBits(r)-1,a=0;a<r;a++)s[a]=this.revBin(a,l,r);return s},O.prototype.revBin=function(r,s,l){if(0===r||r===l-1)return r;for(var a=0,f=0;f<s;f++)a|=(1&r)<<s-f-1,r>>=1;return a},O.prototype.permute=function(r,s,l,a,f,_){for(var D=0;D<_;D++)a[D]=s[r[D]],f[D]=l[r[D]]},O.prototype.transform=function(r,s,l,a,f,_){this.permute(_,r,s,l,a,f);for(var D=1;D<f;D<<=1)for(var d=D<<1,i=Math.cos(2*Math.PI/d),b=Math.sin(2*Math.PI/d),z=0;z<f;z+=d)for(var q=i,J=b,ge=0;ge<D;ge++){var me=l[z+ge],le=a[z+ge],fe=l[z+ge+D],ae=a[z+ge+D],de=q*fe-J*ae;ae=q*ae+J*fe,l[z+ge]=me+(fe=de),a[z+ge]=le+ae,l[z+ge+D]=me-fe,a[z+ge+D]=le-ae,ge!==d&&(de=i*q-b*J,J=i*J+b*q,q=de)}},O.prototype.guessLen13b=function(r,s){var l=1|Math.max(s,r),a=1&l,f=0;for(l=l/2|0;l;l>>>=1)f++;return 1<<f+1+a},O.prototype.conjugate=function(r,s,l){if(!(l<=1))for(var a=0;a<l/2;a++){var f=r[a];r[a]=r[l-a-1],r[l-a-1]=f,f=s[a],s[a]=-s[l-a-1],s[l-a-1]=-f}},O.prototype.normalize13b=function(r,s){for(var l=0,a=0;a<s/2;a++){var f=8192*Math.round(r[2*a+1]/s)+Math.round(r[2*a]/s)+l;r[a]=67108863&f,l=f<67108864?0:f/67108864|0}return r},O.prototype.convert13b=function(r,s,l,a){for(var f=0,_=0;_<s;_++)l[2*_]=8191&(f+=0|r[_]),l[2*_+1]=8191&(f>>>=13),f>>>=13;for(_=2*s;_<a;++_)l[_]=0;m(0===f),m(0==(-8192&f))},O.prototype.stub=function(r){for(var s=new Array(r),l=0;l<r;l++)s[l]=0;return s},O.prototype.mulp=function(r,s,l){var a=2*this.guessLen13b(r.length,s.length),f=this.makeRBT(a),_=this.stub(a),D=new Array(a),d=new Array(a),i=new Array(a),b=new Array(a),z=new Array(a),q=new Array(a),J=l.words;J.length=a,this.convert13b(r.words,r.length,D,a),this.convert13b(s.words,s.length,b,a),this.transform(D,_,d,i,a,f),this.transform(b,_,z,q,a,f);for(var ge=0;ge<a;ge++){var me=d[ge]*z[ge]-i[ge]*q[ge];i[ge]=d[ge]*q[ge]+i[ge]*z[ge],d[ge]=me}return this.conjugate(d,i,a),this.transform(d,i,J,_,a,f),this.conjugate(J,_,a),this.normalize13b(J,a),l.negative=r.negative^s.negative,l.length=r.length+s.length,l.strip()},u.prototype.mul=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),this.mulTo(r,s)},u.prototype.mulf=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),k(this,r,s)},u.prototype.imul=function(r){return this.clone().mulTo(r,this)},u.prototype.imuln=function(r){m("number"==typeof r),m(r<67108864);for(var s=0,l=0;l<this.length;l++){var a=(0|this.words[l])*r,f=(67108863&a)+(67108863&s);s>>=26,s+=a/67108864|0,s+=f>>>26,this.words[l]=67108863&f}return 0!==s&&(this.words[l]=s,this.length++),this},u.prototype.muln=function(r){return this.clone().imuln(r)},u.prototype.sqr=function(){return this.mul(this)},u.prototype.isqr=function(){return this.imul(this.clone())},u.prototype.pow=function(r){var s=function(R){for(var r=new Array(R.bitLength()),s=0;s<r.length;s++){var a=s%26;r[s]=(R.words[s/26|0]&1<<a)>>>a}return r}(r);if(0===s.length)return new u(1);for(var l=this,a=0;a<s.length&&0===s[a];a++,l=l.sqr());if(++a<s.length)for(var f=l.sqr();a<s.length;a++,f=f.sqr())0!==s[a]&&(l=l.mul(f));return l},u.prototype.iushln=function(r){m("number"==typeof r&&r>=0);var f,s=r%26,l=(r-s)/26,a=67108863>>>26-s<<26-s;if(0!==s){var _=0;for(f=0;f<this.length;f++){var D=this.words[f]&a;this.words[f]=(0|this.words[f])-D<<s|_,_=D>>>26-s}_&&(this.words[f]=_,this.length++)}if(0!==l){for(f=this.length-1;f>=0;f--)this.words[f+l]=this.words[f];for(f=0;f<l;f++)this.words[f]=0;this.length+=l}return this.strip()},u.prototype.ishln=function(r){return m(0===this.negative),this.iushln(r)},u.prototype.iushrn=function(r,s,l){var a;m("number"==typeof r&&r>=0),a=s?(s-s%26)/26:0;var f=r%26,_=Math.min((r-f)/26,this.length),D=67108863^67108863>>>f<<f,d=l;if(a-=_,a=Math.max(0,a),d){for(var i=0;i<_;i++)d.words[i]=this.words[i];d.length=_}if(0!==_)if(this.length>_)for(this.length-=_,i=0;i<this.length;i++)this.words[i]=this.words[i+_];else this.words[0]=0,this.length=1;var b=0;for(i=this.length-1;i>=0&&(0!==b||i>=a);i--){var z=0|this.words[i];this.words[i]=b<<26-f|z>>>f,b=z&D}return d&&0!==b&&(d.words[d.length++]=b),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},u.prototype.ishrn=function(r,s,l){return m(0===this.negative),this.iushrn(r,s,l)},u.prototype.shln=function(r){return this.clone().ishln(r)},u.prototype.ushln=function(r){return this.clone().iushln(r)},u.prototype.shrn=function(r){return this.clone().ishrn(r)},u.prototype.ushrn=function(r){return this.clone().iushrn(r)},u.prototype.testn=function(r){m("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return!(this.length<=l||!(this.words[l]&1<<s))},u.prototype.imaskn=function(r){m("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return m(0===this.negative,"imaskn works only with positive numbers"),this.length<=l?this:(0!==s&&l++,this.length=Math.min(l,this.length),0!==s&&(this.words[this.length-1]&=67108863^67108863>>>s<<s),this.strip())},u.prototype.maskn=function(r){return this.clone().imaskn(r)},u.prototype.iaddn=function(r){return m("number"==typeof r),m(r<67108864),r<0?this.isubn(-r):0!==this.negative?1===this.length&&(0|this.words[0])<r?(this.words[0]=r-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(r),this.negative=1,this):this._iaddn(r)},u.prototype._iaddn=function(r){this.words[0]+=r;for(var s=0;s<this.length&&this.words[s]>=67108864;s++)this.words[s]-=67108864,s===this.length-1?this.words[s+1]=1:this.words[s+1]++;return this.length=Math.max(this.length,s+1),this},u.prototype.isubn=function(r){if(m("number"==typeof r),m(r<67108864),r<0)return this.iaddn(-r);if(0!==this.negative)return this.negative=0,this.iaddn(r),this.negative=1,this;if(this.words[0]-=r,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var s=0;s<this.length&&this.words[s]<0;s++)this.words[s]+=67108864,this.words[s+1]-=1;return this.strip()},u.prototype.addn=function(r){return this.clone().iaddn(r)},u.prototype.subn=function(r){return this.clone().isubn(r)},u.prototype.iabs=function(){return this.negative=0,this},u.prototype.abs=function(){return this.clone().iabs()},u.prototype._ishlnsubmul=function(r,s,l){var f;this._expand(r.length+l);var _,D=0;for(f=0;f<r.length;f++){_=(0|this.words[f+l])+D;var d=(0|r.words[f])*s;D=((_-=67108863&d)>>26)-(d/67108864|0),this.words[f+l]=67108863&_}for(;f<this.length-l;f++)D=(_=(0|this.words[f+l])+D)>>26,this.words[f+l]=67108863&_;if(0===D)return this.strip();for(m(-1===D),D=0,f=0;f<this.length;f++)D=(_=-(0|this.words[f])+D)>>26,this.words[f]=67108863&_;return this.negative=1,this.strip()},u.prototype._wordDiv=function(r,s){var l,a=this.clone(),f=r,_=0|f.words[f.length-1];0!=(l=26-this._countBits(_))&&(f=f.ushln(l),a.iushln(l),_=0|f.words[f.length-1]);var i,d=a.length-f.length;if("mod"!==s){(i=new u(null)).length=d+1,i.words=new Array(i.length);for(var b=0;b<i.length;b++)i.words[b]=0}var z=a.clone()._ishlnsubmul(f,1,d);0===z.negative&&(a=z,i&&(i.words[d]=1));for(var q=d-1;q>=0;q--){var J=67108864*(0|a.words[f.length+q])+(0|a.words[f.length+q-1]);for(J=Math.min(J/_|0,67108863),a._ishlnsubmul(f,J,q);0!==a.negative;)J--,a.negative=0,a._ishlnsubmul(f,1,q),a.isZero()||(a.negative^=1);i&&(i.words[q]=J)}return i&&i.strip(),a.strip(),"div"!==s&&0!==l&&a.iushrn(l),{div:i||null,mod:a}},u.prototype.divmod=function(r,s,l){return m(!r.isZero()),this.isZero()?{div:new u(0),mod:new u(0)}:0!==this.negative&&0===r.negative?(_=this.neg().divmod(r,s),"mod"!==s&&(a=_.div.neg()),"div"!==s&&(f=_.mod.neg(),l&&0!==f.negative&&f.iadd(r)),{div:a,mod:f}):0===this.negative&&0!==r.negative?(_=this.divmod(r.neg(),s),"mod"!==s&&(a=_.div.neg()),{div:a,mod:_.mod}):0!=(this.negative&r.negative)?(_=this.neg().divmod(r.neg(),s),"div"!==s&&(f=_.mod.neg(),l&&0!==f.negative&&f.isub(r)),{div:_.div,mod:f}):r.length>this.length||this.cmp(r)<0?{div:new u(0),mod:this}:1===r.length?"div"===s?{div:this.divn(r.words[0]),mod:null}:"mod"===s?{div:null,mod:new u(this.modn(r.words[0]))}:{div:this.divn(r.words[0]),mod:new u(this.modn(r.words[0]))}:this._wordDiv(r,s);var a,f,_},u.prototype.div=function(r){return this.divmod(r,"div",!1).div},u.prototype.mod=function(r){return this.divmod(r,"mod",!1).mod},u.prototype.umod=function(r){return this.divmod(r,"mod",!0).mod},u.prototype.divRound=function(r){var s=this.divmod(r);if(s.mod.isZero())return s.div;var l=0!==s.div.negative?s.mod.isub(r):s.mod,a=r.ushrn(1),f=r.andln(1),_=l.cmp(a);return _<0||1===f&&0===_?s.div:0!==s.div.negative?s.div.isubn(1):s.div.iaddn(1)},u.prototype.modn=function(r){m(r<=67108863);for(var s=(1<<26)%r,l=0,a=this.length-1;a>=0;a--)l=(s*l+(0|this.words[a]))%r;return l},u.prototype.idivn=function(r){m(r<=67108863);for(var s=0,l=this.length-1;l>=0;l--){var a=(0|this.words[l])+67108864*s;this.words[l]=a/r|0,s=a%r}return this.strip()},u.prototype.divn=function(r){return this.clone().idivn(r)},u.prototype.egcd=function(r){m(0===r.negative),m(!r.isZero());var s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),_=new u(0),D=new u(1),d=0;s.isEven()&&l.isEven();)s.iushrn(1),l.iushrn(1),++d;for(var i=l.clone(),b=s.clone();!s.isZero();){for(var z=0,q=1;0==(s.words[0]&q)&&z<26;++z,q<<=1);if(z>0)for(s.iushrn(z);z-- >0;)(a.isOdd()||f.isOdd())&&(a.iadd(i),f.isub(b)),a.iushrn(1),f.iushrn(1);for(var J=0,ge=1;0==(l.words[0]&ge)&&J<26;++J,ge<<=1);if(J>0)for(l.iushrn(J);J-- >0;)(_.isOdd()||D.isOdd())&&(_.iadd(i),D.isub(b)),_.iushrn(1),D.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(_),f.isub(D)):(l.isub(s),_.isub(a),D.isub(f))}return{a:_,b:D,gcd:l.iushln(d)}},u.prototype._invmp=function(r){m(0===r.negative),m(!r.isZero());var z,s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),_=l.clone();s.cmpn(1)>0&&l.cmpn(1)>0;){for(var D=0,d=1;0==(s.words[0]&d)&&D<26;++D,d<<=1);if(D>0)for(s.iushrn(D);D-- >0;)a.isOdd()&&a.iadd(_),a.iushrn(1);for(var i=0,b=1;0==(l.words[0]&b)&&i<26;++i,b<<=1);if(i>0)for(l.iushrn(i);i-- >0;)f.isOdd()&&f.iadd(_),f.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(f)):(l.isub(s),f.isub(a))}return(z=0===s.cmpn(1)?a:f).cmpn(0)<0&&z.iadd(r),z},u.prototype.gcd=function(r){if(this.isZero())return r.abs();if(r.isZero())return this.abs();var s=this.clone(),l=r.clone();s.negative=0,l.negative=0;for(var a=0;s.isEven()&&l.isEven();a++)s.iushrn(1),l.iushrn(1);for(;;){for(;s.isEven();)s.iushrn(1);for(;l.isEven();)l.iushrn(1);var f=s.cmp(l);if(f<0){var _=s;s=l,l=_}else if(0===f||0===l.cmpn(1))break;s.isub(l)}return l.iushln(a)},u.prototype.invm=function(r){return this.egcd(r).a.umod(r)},u.prototype.isEven=function(){return 0==(1&this.words[0])},u.prototype.isOdd=function(){return 1==(1&this.words[0])},u.prototype.andln=function(r){return this.words[0]&r},u.prototype.bincn=function(r){m("number"==typeof r);var s=r%26,l=(r-s)/26,a=1<<s;if(this.length<=l)return this._expand(l+1),this.words[l]|=a,this;for(var f=a,_=l;0!==f&&_<this.length;_++){var D=0|this.words[_];f=(D+=f)>>>26,this.words[_]=D&=67108863}return 0!==f&&(this.words[_]=f,this.length++),this},u.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},u.prototype.cmpn=function(r){var l,s=r<0;if(0!==this.negative&&!s)return-1;if(0===this.negative&&s)return 1;if(this.strip(),this.length>1)l=1;else{s&&(r=-r),m(r<=67108863,"Number is too big");var a=0|this.words[0];l=a===r?0:a<r?-1:1}return 0!==this.negative?0|-l:l},u.prototype.cmp=function(r){if(0!==this.negative&&0===r.negative)return-1;if(0===this.negative&&0!==r.negative)return 1;var s=this.ucmp(r);return 0!==this.negative?0|-s:s},u.prototype.ucmp=function(r){if(this.length>r.length)return 1;if(this.length<r.length)return-1;for(var s=0,l=this.length-1;l>=0;l--){var a=0|this.words[l],f=0|r.words[l];if(a!==f){a<f?s=-1:a>f&&(s=1);break}}return s},u.prototype.gtn=function(r){return 1===this.cmpn(r)},u.prototype.gt=function(r){return 1===this.cmp(r)},u.prototype.gten=function(r){return this.cmpn(r)>=0},u.prototype.gte=function(r){return this.cmp(r)>=0},u.prototype.ltn=function(r){return-1===this.cmpn(r)},u.prototype.lt=function(r){return-1===this.cmp(r)},u.prototype.lten=function(r){return this.cmpn(r)<=0},u.prototype.lte=function(r){return this.cmp(r)<=0},u.prototype.eqn=function(r){return 0===this.cmpn(r)},u.prototype.eq=function(r){return 0===this.cmp(r)},u.red=function(r){return new $(r)},u.prototype.toRed=function(r){return m(!this.red,"Already a number in reduction context"),m(0===this.negative,"red works only with positives"),r.convertTo(this)._forceRed(r)},u.prototype.fromRed=function(){return m(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},u.prototype._forceRed=function(r){return this.red=r,this},u.prototype.forceRed=function(r){return m(!this.red,"Already a number in reduction context"),this._forceRed(r)},u.prototype.redAdd=function(r){return m(this.red,"redAdd works only with red numbers"),this.red.add(this,r)},u.prototype.redIAdd=function(r){return m(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,r)},u.prototype.redSub=function(r){return m(this.red,"redSub works only with red numbers"),this.red.sub(this,r)},u.prototype.redISub=function(r){return m(this.red,"redISub works only with red numbers"),this.red.isub(this,r)},u.prototype.redShl=function(r){return m(this.red,"redShl works only with red numbers"),this.red.shl(this,r)},u.prototype.redMul=function(r){return m(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.mul(this,r)},u.prototype.redIMul=function(r){return m(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.imul(this,r)},u.prototype.redSqr=function(){return m(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},u.prototype.redISqr=function(){return m(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},u.prototype.redSqrt=function(){return m(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},u.prototype.redInvm=function(){return m(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},u.prototype.redNeg=function(){return m(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},u.prototype.redPow=function(r){return m(this.red&&!r.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,r)};var V={k256:null,p224:null,p192:null,p25519:null};function U(R,r){this.name=R,this.p=new u(r,16),this.n=this.p.bitLength(),this.k=new u(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function B(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function H(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function W(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function te(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function $(R){if("string"==typeof R){var r=u._prime(R);this.m=r.p,this.prime=r}else m(R.gtn(1),"modulus must be greater than 1"),this.m=R,this.prime=null}function pe(R){$.call(this,R),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new u(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}U.prototype._tmp=function(){var r=new u(null);return r.words=new Array(Math.ceil(this.n/13)),r},U.prototype.ireduce=function(r){var l,s=r;do{this.split(s,this.tmp),l=(s=(s=this.imulK(s)).iadd(this.tmp)).bitLength()}while(l>this.n);var a=l<this.n?-1:s.ucmp(this.p);return 0===a?(s.words[0]=0,s.length=1):a>0?s.isub(this.p):void 0!==s.strip?s.strip():s._strip(),s},U.prototype.split=function(r,s){r.iushrn(this.n,0,s)},U.prototype.imulK=function(r){return r.imul(this.k)},x(B,U),B.prototype.split=function(r,s){for(var l=4194303,a=Math.min(r.length,9),f=0;f<a;f++)s.words[f]=r.words[f];if(s.length=a,r.length<=9)return r.words[0]=0,void(r.length=1);var _=r.words[9];for(s.words[s.length++]=_&l,f=10;f<r.length;f++){var D=0|r.words[f];r.words[f-10]=(D&l)<<4|_>>>22,_=D}r.words[f-10]=_>>>=22,r.length-=0===_&&r.length>10?10:9},B.prototype.imulK=function(r){r.words[r.length]=0,r.words[r.length+1]=0,r.length+=2;for(var s=0,l=0;l<r.length;l++){var a=0|r.words[l];r.words[l]=67108863&(s+=977*a),s=64*a+(s/67108864|0)}return 0===r.words[r.length-1]&&(r.length--,0===r.words[r.length-1]&&r.length--),r},x(H,U),x(W,U),x(te,U),te.prototype.imulK=function(r){for(var s=0,l=0;l<r.length;l++){var a=19*(0|r.words[l])+s,f=67108863&a;a>>>=26,r.words[l]=f,s=a}return 0!==s&&(r.words[r.length++]=s),r},u._prime=function(r){if(V[r])return V[r];var s;if("k256"===r)s=new B;else if("p224"===r)s=new H;else if("p192"===r)s=new W;else{if("p25519"!==r)throw new Error("Unknown prime "+r);s=new te}return V[r]=s,s},$.prototype._verify1=function(r){m(0===r.negative,"red works only with positives"),m(r.red,"red works only with red numbers")},$.prototype._verify2=function(r,s){m(0==(r.negative|s.negative),"red works only with positives"),m(r.red&&r.red===s.red,"red works only with red numbers")},$.prototype.imod=function(r){return this.prime?this.prime.ireduce(r)._forceRed(this):r.umod(this.m)._forceRed(this)},$.prototype.neg=function(r){return r.isZero()?r.clone():this.m.sub(r)._forceRed(this)},$.prototype.add=function(r,s){this._verify2(r,s);var l=r.add(s);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},$.prototype.iadd=function(r,s){this._verify2(r,s);var l=r.iadd(s);return l.cmp(this.m)>=0&&l.isub(this.m),l},$.prototype.sub=function(r,s){this._verify2(r,s);var l=r.sub(s);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},$.prototype.isub=function(r,s){this._verify2(r,s);var l=r.isub(s);return l.cmpn(0)<0&&l.iadd(this.m),l},$.prototype.shl=function(r,s){return this._verify1(r),this.imod(r.ushln(s))},$.prototype.imul=function(r,s){return this._verify2(r,s),this.imod(r.imul(s))},$.prototype.mul=function(r,s){return this._verify2(r,s),this.imod(r.mul(s))},$.prototype.isqr=function(r){return this.imul(r,r.clone())},$.prototype.sqr=function(r){return this.mul(r,r)},$.prototype.sqrt=function(r){if(r.isZero())return r.clone();var s=this.m.andln(3);if(m(s%2==1),3===s){var l=this.m.add(new u(1)).iushrn(2);return this.pow(r,l)}for(var a=this.m.subn(1),f=0;!a.isZero()&&0===a.andln(1);)f++,a.iushrn(1);m(!a.isZero());var _=new u(1).toRed(this),D=_.redNeg(),d=this.m.subn(1).iushrn(1),i=this.m.bitLength();for(i=new u(2*i*i).toRed(this);0!==this.pow(i,d).cmp(D);)i.redIAdd(D);for(var b=this.pow(i,a),z=this.pow(r,a.addn(1).iushrn(1)),q=this.pow(r,a),J=f;0!==q.cmp(_);){for(var ge=q,me=0;0!==ge.cmp(_);me++)ge=ge.redSqr();m(me<J);var le=this.pow(b,new u(1).iushln(J-me-1));z=z.redMul(le),b=le.redSqr(),q=q.redMul(b),J=me}return z},$.prototype.invm=function(r){var s=r._invmp(this.m);return 0!==s.negative?(s.negative=0,this.imod(s).redNeg()):this.imod(s)},$.prototype.pow=function(r,s){if(s.isZero())return new u(1).toRed(this);if(0===s.cmpn(1))return r.clone();var a=new Array(16);a[0]=new u(1).toRed(this),a[1]=r;for(var f=2;f<a.length;f++)a[f]=this.mul(a[f-1],r);var _=a[0],D=0,d=0,i=s.bitLength()%26;for(0===i&&(i=26),f=s.length-1;f>=0;f--){for(var b=s.words[f],z=i-1;z>=0;z--){var q=b>>z&1;_!==a[0]&&(_=this.sqr(_)),0!==q||0!==D?(D<<=1,D|=q,(4==++d||0===f&&0===z)&&(_=this.mul(_,a[D]),d=0,D=0)):d=0}i=26}return _},$.prototype.convertTo=function(r){var s=r.umod(this.m);return s===r?s.clone():s},$.prototype.convertFrom=function(r){var s=r.clone();return s.red=null,s},u.mont=function(r){return new pe(r)},x(pe,$),pe.prototype.convertTo=function(r){return this.imod(r.ushln(this.shift))},pe.prototype.convertFrom=function(r){var s=this.imod(r.mul(this.rinv));return s.red=null,s},pe.prototype.imul=function(r,s){if(r.isZero()||s.isZero())return r.words[0]=0,r.length=1,r;var l=r.imul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),_=f;return f.cmp(this.m)>=0?_=f.isub(this.m):f.cmpn(0)<0&&(_=f.iadd(this.m)),_._forceRed(this)},pe.prototype.mul=function(r,s){if(r.isZero()||s.isZero())return new u(0)._forceRed(this);var l=r.mul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),_=f;return f.cmp(this.m)>=0?_=f.isub(this.m):f.cmpn(0)<0&&(_=f.iadd(this.m)),_._forceRed(this)},pe.prototype.invm=function(r){return this.imod(r._invmp(this.m).mul(this.r2))._forceRed(this)}}(Y=T.nmd(Y),this)},3105:Y=>{"use strict";var p,L="object"==typeof Reflect?Reflect:null,T=L&&"function"==typeof L.apply?L.apply:function(U,B,H){return Function.prototype.apply.call(U,B,H)};p=L&&"function"==typeof L.ownKeys?L.ownKeys:Object.getOwnPropertySymbols?function(U){return Object.getOwnPropertyNames(U).concat(Object.getOwnPropertySymbols(U))}:function(U){return Object.getOwnPropertyNames(U)};var m=Number.isNaN||function(U){return U!=U};function x(){x.init.call(this)}Y.exports=x,Y.exports.once=function(V,U){return new Promise(function(B,H){function W($){V.removeListener(U,te),H($)}function te(){"function"==typeof V.removeListener&&V.removeListener("error",W),B([].slice.call(arguments))}O(V,U,te,{once:!0}),"error"!==U&&function(V,U,B){"function"==typeof V.on&&O(V,"error",U,{once:!0})}(V,W)})},x.EventEmitter=x,x.prototype._events=void 0,x.prototype._eventsCount=0,x.prototype._maxListeners=void 0;var u=10;function g(V){if("function"!=typeof V)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof V)}function M(V){return void 0===V._maxListeners?x.defaultMaxListeners:V._maxListeners}function A(V,U,B,H){var W,te,$;if(g(B),void 0===(te=V._events)?(te=V._events=Object.create(null),V._eventsCount=0):(void 0!==te.newListener&&(V.emit("newListener",U,B.listener?B.listener:B),te=V._events),$=te[U]),void 0===$)$=te[U]=B,++V._eventsCount;else if("function"==typeof $?$=te[U]=H?[B,$]:[$,B]:H?$.unshift(B):$.push(B),(W=M(V))>0&&$.length>W&&!$.warned){$.warned=!0;var pe=new Error("Possible EventEmitter memory leak detected. "+$.length+" "+String(U)+" listeners added. Use emitter.setMaxListeners() to increase limit");pe.name="MaxListenersExceededWarning",pe.emitter=V,pe.type=U,pe.count=$.length,function(V){console&&console.warn&&console.warn(V)}(pe)}return V}function I(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function y(V,U,B){var H={fired:!1,wrapFn:void 0,target:V,type:U,listener:B},W=I.bind(H);return W.listener=B,H.wrapFn=W,W}function h(V,U,B){var H=V._events;if(void 0===H)return[];var W=H[U];return void 0===W?[]:"function"==typeof W?B?[W.listener||W]:[W]:B?function(V){for(var U=new Array(V.length),B=0;B<U.length;++B)U[B]=V[B].listener||V[B];return U}(W):v(W,W.length)}function C(V){var U=this._events;if(void 0!==U){var B=U[V];if("function"==typeof B)return 1;if(void 0!==B)return B.length}return 0}function v(V,U){for(var B=new Array(U),H=0;H<U;++H)B[H]=V[H];return B}function O(V,U,B,H){if("function"==typeof V.on)H.once?V.once(U,B):V.on(U,B);else{if("function"!=typeof V.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof V);V.addEventListener(U,function W(te){H.once&&V.removeEventListener(U,W),B(te)})}}Object.defineProperty(x,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(V){if("number"!=typeof V||V<0||m(V))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+V+".");u=V}}),x.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},x.prototype.setMaxListeners=function(U){if("number"!=typeof U||U<0||m(U))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+U+".");return this._maxListeners=U,this},x.prototype.getMaxListeners=function(){return M(this)},x.prototype.emit=function(U){for(var B=[],H=1;H<arguments.length;H++)B.push(arguments[H]);var W="error"===U,te=this._events;if(void 0!==te)W=W&&void 0===te.error;else if(!W)return!1;if(W){var $;if(B.length>0&&($=B[0]),$ instanceof Error)throw $;var pe=new Error("Unhandled error."+($?" ("+$.message+")":""));throw pe.context=$,pe}var R=te[U];if(void 0===R)return!1;if("function"==typeof R)T(R,this,B);else{var r=R.length,s=v(R,r);for(H=0;H<r;++H)T(s[H],this,B)}return!0},x.prototype.on=x.prototype.addListener=function(U,B){return A(this,U,B,!1)},x.prototype.prependListener=function(U,B){return A(this,U,B,!0)},x.prototype.once=function(U,B){return g(B),this.on(U,y(this,U,B)),this},x.prototype.prependOnceListener=function(U,B){return g(B),this.prependListener(U,y(this,U,B)),this},x.prototype.off=x.prototype.removeListener=function(U,B){var H,W,te,$,pe;if(g(B),void 0===(W=this._events))return this;if(void 0===(H=W[U]))return this;if(H===B||H.listener===B)0==--this._eventsCount?this._events=Object.create(null):(delete W[U],W.removeListener&&this.emit("removeListener",U,H.listener||B));else if("function"!=typeof H){for(te=-1,$=H.length-1;$>=0;$--)if(H[$]===B||H[$].listener===B){pe=H[$].listener,te=$;break}if(te<0)return this;0===te?H.shift():function(V,U){for(;U+1<V.length;U++)V[U]=V[U+1];V.pop()}(H,te),1===H.length&&(W[U]=H[0]),void 0!==W.removeListener&&this.emit("removeListener",U,pe||B)}return this},x.prototype.removeAllListeners=function(U){var B,H,W;if(void 0===(H=this._events))return this;if(void 0===H.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==H[U]&&(0==--this._eventsCount?this._events=Object.create(null):delete H[U]),this;if(0===arguments.length){var $,te=Object.keys(H);for(W=0;W<te.length;++W)"removeListener"!==($=te[W])&&this.removeAllListeners($);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(B=H[U]))this.removeListener(U,B);else if(void 0!==B)for(W=B.length-1;W>=0;W--)this.removeListener(U,B[W]);return this},x.prototype.listeners=function(U){return h(this,U,!0)},x.prototype.rawListeners=function(U){return h(this,U,!1)},x.listenerCount=function(V,U){return"function"==typeof V.listenerCount?V.listenerCount(U):C.call(V,U)},x.prototype.listenerCount=C,x.prototype.eventNames=function(){return this._eventsCount>0?p(this._events):[]}},2367:(Y,L,T)=>{var p=T(5859).Buffer,N=T(3264);Y.exports=function(x,u,g,M){if(p.isBuffer(x)||(x=p.from(x,"binary")),u&&(p.isBuffer(u)||(u=p.from(u,"binary")),8!==u.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var A=g/8,I=p.alloc(A),y=p.alloc(M||0),h=p.alloc(0);A>0||M>0;){var C=new N;C.update(h),C.update(x),u&&C.update(u),h=C.digest();var v=0;if(A>0){var w=I.length-A;v=Math.min(A,h.length),h.copy(I,w,0,v),A-=v}if(v<h.length&&M>0){var S=y.length-M,P=Math.min(M,h.length-v);h.copy(y,S,v,v+P),M-=P}}return h.fill(0),{key:I,iv:y}}},5414:(Y,L,T)=>{"use strict";var p=T(5036).Buffer,N=T(8300).Transform;function u(g){N.call(this),this._block=p.allocUnsafe(g),this._blockSize=g,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}T(9879)(u,N),u.prototype._transform=function(g,M,A){var I=null;try{this.update(g,M)}catch(y){I=y}A(I)},u.prototype._flush=function(g){var M=null;try{this.push(this.digest())}catch(A){M=A}g(M)},u.prototype.update=function(g,M){if(function(g,M){if(!p.isBuffer(g)&&"string"!=typeof g)throw new TypeError("Data must be a string or a buffer")}(g),this._finalized)throw new Error("Digest already called");p.isBuffer(g)||(g=p.from(g,M));for(var A=this._block,I=0;this._blockOffset+g.length-I>=this._blockSize;){for(var y=this._blockOffset;y<this._blockSize;)A[y++]=g[I++];this._update(),this._blockOffset=0}for(;I<g.length;)A[this._blockOffset++]=g[I++];for(var h=0,C=8*g.length;C>0;++h)this._length[h]+=C,(C=this._length[h]/4294967296|0)>0&&(this._length[h]-=4294967296*C);return this},u.prototype._update=function(){throw new Error("_update is not implemented")},u.prototype.digest=function(g){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var M=this._digest();void 0!==g&&(M=M.toString(g)),this._block.fill(0),this._blockOffset=0;for(var A=0;A<4;++A)this._length[A]=0;return M},u.prototype._digest=function(){throw new Error("_digest is not implemented")},Y.exports=u},5036:(Y,L,T)=>{var p=T(3875),N=p.Buffer;function m(u,g){for(var M in u)g[M]=u[M]}function x(u,g,M){return N(u,g,M)}N.from&&N.alloc&&N.allocUnsafe&&N.allocUnsafeSlow?Y.exports=p:(m(p,L),L.Buffer=x),x.prototype=Object.create(N.prototype),m(N,x),x.from=function(u,g,M){if("number"==typeof u)throw new TypeError("Argument must not be a number");return N(u,g,M)},x.alloc=function(u,g,M){if("number"!=typeof u)throw new TypeError("Argument must be a number");var A=N(u);return void 0!==g?"string"==typeof M?A.fill(g,M):A.fill(g):A.fill(0),A},x.allocUnsafe=function(u){if("number"!=typeof u)throw new TypeError("Argument must be a number");return N(u)},x.allocUnsafeSlow=function(u){if("number"!=typeof u)throw new TypeError("Argument must be a number");return p.SlowBuffer(u)}},7909:(Y,L,T)=>{var p=L;p.utils=T(8291),p.common=T(1393),p.sha=T(2221),p.ripemd=T(1960),p.hmac=T(1905),p.sha1=p.sha.sha1,p.sha256=p.sha.sha256,p.sha224=p.sha.sha224,p.sha384=p.sha.sha384,p.sha512=p.sha.sha512,p.ripemd160=p.ripemd.ripemd160},1393:(Y,L,T)=>{"use strict";var p=T(8291),N=T(6055);function m(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}L.BlockHash=m,m.prototype.update=function(u,g){if(u=p.toArray(u,g),this.pending=this.pending?this.pending.concat(u):u,this.pendingTotal+=u.length,this.pending.length>=this._delta8){var M=(u=this.pending).length%this._delta8;this.pending=u.slice(u.length-M,u.length),0===this.pending.length&&(this.pending=null),u=p.join32(u,0,u.length-M,this.endian);for(var A=0;A<u.length;A+=this._delta32)this._update(u,A,A+this._delta32)}return this},m.prototype.digest=function(u){return this.update(this._pad()),N(null===this.pending),this._digest(u)},m.prototype._pad=function(){var u=this.pendingTotal,g=this._delta8,M=g-(u+this.padLength)%g,A=new Array(M+this.padLength);A[0]=128;for(var I=1;I<M;I++)A[I]=0;if(u<<=3,"big"===this.endian){for(var y=8;y<this.padLength;y++)A[I++]=0;A[I++]=0,A[I++]=0,A[I++]=0,A[I++]=0,A[I++]=u>>>24&255,A[I++]=u>>>16&255,A[I++]=u>>>8&255,A[I++]=255&u}else for(A[I++]=255&u,A[I++]=u>>>8&255,A[I++]=u>>>16&255,A[I++]=u>>>24&255,A[I++]=0,A[I++]=0,A[I++]=0,A[I++]=0,y=8;y<this.padLength;y++)A[I++]=0;return A}},1905:(Y,L,T)=>{"use strict";var p=T(8291),N=T(6055);function m(x,u,g){if(!(this instanceof m))return new m(x,u,g);this.Hash=x,this.blockSize=x.blockSize/8,this.outSize=x.outSize/8,this.inner=null,this.outer=null,this._init(p.toArray(u,g))}Y.exports=m,m.prototype._init=function(u){u.length>this.blockSize&&(u=(new this.Hash).update(u).digest()),N(u.length<=this.blockSize);for(var g=u.length;g<this.blockSize;g++)u.push(0);for(g=0;g<u.length;g++)u[g]^=54;for(this.inner=(new this.Hash).update(u),g=0;g<u.length;g++)u[g]^=106;this.outer=(new this.Hash).update(u)},m.prototype.update=function(u,g){return this.inner.update(u,g),this},m.prototype.digest=function(u){return this.outer.update(this.inner.digest()),this.outer.digest(u)}},1960:(Y,L,T)=>{"use strict";var p=T(8291),N=T(1393),m=p.rotl32,x=p.sum32,u=p.sum32_3,g=p.sum32_4,M=N.BlockHash;function A(){if(!(this instanceof A))return new A;M.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function I(P,k,O,V){return P<=15?k^O^V:P<=31?k&O|~k&V:P<=47?(k|~O)^V:P<=63?k&V|O&~V:k^(O|~V)}function h(P){return P<=15?1352829926:P<=31?1548603684:P<=47?1836072691:P<=63?2053994217:0}p.inherits(A,M),L.ripemd160=A,A.blockSize=512,A.outSize=160,A.hmacStrength=192,A.padLength=64,A.prototype._update=function(k,O){for(var V=this.h[0],U=this.h[1],B=this.h[2],H=this.h[3],W=this.h[4],te=V,$=U,pe=B,R=H,r=W,s=0;s<80;s++){var l=x(m(g(V,I(s,U,B,H),k[C[s]+O],(P=s)<=15?0:P<=31?1518500249:P<=47?1859775393:P<=63?2400959708:2840853838),w[s]),W);V=W,W=H,H=m(B,10),B=U,U=l,l=x(m(g(te,I(79-s,$,pe,R),k[v[s]+O],h(s)),S[s]),r),te=r,r=R,R=m(pe,10),pe=$,$=l}var P;l=u(this.h[1],B,R),this.h[1]=u(this.h[2],H,r),this.h[2]=u(this.h[3],W,te),this.h[3]=u(this.h[4],V,$),this.h[4]=u(this.h[0],U,pe),this.h[0]=l},A.prototype._digest=function(k){return"hex"===k?p.toHex32(this.h,"little"):p.split32(this.h,"little")};var C=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],v=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],w=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],S=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},2221:(Y,L,T)=>{"use strict";L.sha1=T(3605),L.sha224=T(9643),L.sha256=T(6021),L.sha384=T(3513),L.sha512=T(4958)},3605:(Y,L,T)=>{"use strict";var p=T(8291),N=T(1393),m=T(8491),x=p.rotl32,u=p.sum32,g=p.sum32_5,M=m.ft_1,A=N.BlockHash,I=[1518500249,1859775393,2400959708,3395469782];function y(){if(!(this instanceof y))return new y;A.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}p.inherits(y,A),Y.exports=y,y.blockSize=512,y.outSize=160,y.hmacStrength=80,y.padLength=64,y.prototype._update=function(C,v){for(var w=this.W,S=0;S<16;S++)w[S]=C[v+S];for(;S<w.length;S++)w[S]=x(w[S-3]^w[S-8]^w[S-14]^w[S-16],1);var P=this.h[0],k=this.h[1],O=this.h[2],V=this.h[3],U=this.h[4];for(S=0;S<w.length;S++){var B=~~(S/20),H=g(x(P,5),M(B,k,O,V),U,w[S],I[B]);U=V,V=O,O=x(k,30),k=P,P=H}this.h[0]=u(this.h[0],P),this.h[1]=u(this.h[1],k),this.h[2]=u(this.h[2],O),this.h[3]=u(this.h[3],V),this.h[4]=u(this.h[4],U)},y.prototype._digest=function(C){return"hex"===C?p.toHex32(this.h,"big"):p.split32(this.h,"big")}},9643:(Y,L,T)=>{"use strict";var p=T(8291),N=T(6021);function m(){if(!(this instanceof m))return new m;N.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}p.inherits(m,N),Y.exports=m,m.blockSize=512,m.outSize=224,m.hmacStrength=192,m.padLength=64,m.prototype._digest=function(u){return"hex"===u?p.toHex32(this.h.slice(0,7),"big"):p.split32(this.h.slice(0,7),"big")}},6021:(Y,L,T)=>{"use strict";var p=T(8291),N=T(1393),m=T(8491),x=T(6055),u=p.sum32,g=p.sum32_4,M=p.sum32_5,A=m.ch32,I=m.maj32,y=m.s0_256,h=m.s1_256,C=m.g0_256,v=m.g1_256,w=N.BlockHash,S=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function P(){if(!(this instanceof P))return new P;w.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=S,this.W=new Array(64)}p.inherits(P,w),Y.exports=P,P.blockSize=512,P.outSize=256,P.hmacStrength=192,P.padLength=64,P.prototype._update=function(O,V){for(var U=this.W,B=0;B<16;B++)U[B]=O[V+B];for(;B<U.length;B++)U[B]=g(v(U[B-2]),U[B-7],C(U[B-15]),U[B-16]);var H=this.h[0],W=this.h[1],te=this.h[2],$=this.h[3],pe=this.h[4],R=this.h[5],r=this.h[6],s=this.h[7];for(x(this.k.length===U.length),B=0;B<U.length;B++){var l=M(s,h(pe),A(pe,R,r),this.k[B],U[B]),a=u(y(H),I(H,W,te));s=r,r=R,R=pe,pe=u($,l),$=te,te=W,W=H,H=u(l,a)}this.h[0]=u(this.h[0],H),this.h[1]=u(this.h[1],W),this.h[2]=u(this.h[2],te),this.h[3]=u(this.h[3],$),this.h[4]=u(this.h[4],pe),this.h[5]=u(this.h[5],R),this.h[6]=u(this.h[6],r),this.h[7]=u(this.h[7],s)},P.prototype._digest=function(O){return"hex"===O?p.toHex32(this.h,"big"):p.split32(this.h,"big")}},3513:(Y,L,T)=>{"use strict";var p=T(8291),N=T(4958);function m(){if(!(this instanceof m))return new m;N.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}p.inherits(m,N),Y.exports=m,m.blockSize=1024,m.outSize=384,m.hmacStrength=192,m.padLength=128,m.prototype._digest=function(u){return"hex"===u?p.toHex32(this.h.slice(0,12),"big"):p.split32(this.h.slice(0,12),"big")}},4958:(Y,L,T)=>{"use strict";var p=T(8291),N=T(1393),m=T(6055),x=p.rotr64_hi,u=p.rotr64_lo,g=p.shr64_hi,M=p.shr64_lo,A=p.sum64,I=p.sum64_hi,y=p.sum64_lo,h=p.sum64_4_hi,C=p.sum64_4_lo,v=p.sum64_5_hi,w=p.sum64_5_lo,S=N.BlockHash,P=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function k(){if(!(this instanceof k))return new k;S.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=P,this.W=new Array(160)}function O(l,a,f,_,D){var d=l&f^~l&D;return d<0&&(d+=4294967296),d}function V(l,a,f,_,D,d){var i=a&_^~a&d;return i<0&&(i+=4294967296),i}function U(l,a,f,_,D){var d=l&f^l&D^f&D;return d<0&&(d+=4294967296),d}function B(l,a,f,_,D,d){var i=a&_^a&d^_&d;return i<0&&(i+=4294967296),i}function H(l,a){var d=x(l,a,28)^x(a,l,2)^x(a,l,7);return d<0&&(d+=4294967296),d}function W(l,a){var d=u(l,a,28)^u(a,l,2)^u(a,l,7);return d<0&&(d+=4294967296),d}function te(l,a){var d=x(l,a,14)^x(l,a,18)^x(a,l,9);return d<0&&(d+=4294967296),d}function $(l,a){var d=u(l,a,14)^u(l,a,18)^u(a,l,9);return d<0&&(d+=4294967296),d}function pe(l,a){var d=x(l,a,1)^x(l,a,8)^g(l,a,7);return d<0&&(d+=4294967296),d}function R(l,a){var d=u(l,a,1)^u(l,a,8)^M(l,a,7);return d<0&&(d+=4294967296),d}function r(l,a){var d=x(l,a,19)^x(a,l,29)^g(l,a,6);return d<0&&(d+=4294967296),d}function s(l,a){var d=u(l,a,19)^u(a,l,29)^M(l,a,6);return d<0&&(d+=4294967296),d}p.inherits(k,S),Y.exports=k,k.blockSize=1024,k.outSize=512,k.hmacStrength=192,k.padLength=128,k.prototype._prepareBlock=function(a,f){for(var _=this.W,D=0;D<32;D++)_[D]=a[f+D];for(;D<_.length;D+=2){var d=r(_[D-4],_[D-3]),i=s(_[D-4],_[D-3]),b=_[D-14],z=_[D-13],q=pe(_[D-30],_[D-29]),J=R(_[D-30],_[D-29]),ge=_[D-32],me=_[D-31];_[D]=h(d,i,b,z,q,J,ge,me),_[D+1]=C(d,i,b,z,q,J,ge,me)}},k.prototype._update=function(a,f){this._prepareBlock(a,f);var _=this.W,D=this.h[0],d=this.h[1],i=this.h[2],b=this.h[3],z=this.h[4],q=this.h[5],J=this.h[6],ge=this.h[7],me=this.h[8],le=this.h[9],fe=this.h[10],ae=this.h[11],de=this.h[12],xe=this.h[13],Ce=this.h[14],oe=this.h[15];m(this.k.length===_.length);for(var we=0;we<_.length;we+=2){var ye=Ce,re=oe,ee=te(me,le),Z=$(me,le),ue=O(me,0,fe,0,de),Re=V(0,le,0,ae,0,xe),Te=this.k[we],Ee=this.k[we+1],$e=_[we],Ne=_[we+1],_e=v(ye,re,ee,Z,ue,Re,Te,Ee,$e,Ne),Be=w(ye,re,ee,Z,ue,Re,Te,Ee,$e,Ne);ye=H(D,d),re=W(D,d),ee=U(D,0,i,0,z),Z=B(0,d,0,b,0,q);var Ae=I(ye,re,ee,Z),Le=y(ye,re,ee,Z);Ce=de,oe=xe,de=fe,xe=ae,fe=me,ae=le,me=I(J,ge,_e,Be),le=y(ge,ge,_e,Be),J=z,ge=q,z=i,q=b,i=D,b=d,D=I(_e,Be,Ae,Le),d=y(_e,Be,Ae,Le)}A(this.h,0,D,d),A(this.h,2,i,b),A(this.h,4,z,q),A(this.h,6,J,ge),A(this.h,8,me,le),A(this.h,10,fe,ae),A(this.h,12,de,xe),A(this.h,14,Ce,oe)},k.prototype._digest=function(a){return"hex"===a?p.toHex32(this.h,"big"):p.split32(this.h,"big")}},8491:(Y,L,T)=>{"use strict";var N=T(8291).rotr32;function x(h,C,v){return h&C^~h&v}function u(h,C,v){return h&C^h&v^C&v}function g(h,C,v){return h^C^v}L.ft_1=function(h,C,v,w){return 0===h?x(C,v,w):1===h||3===h?g(C,v,w):2===h?u(C,v,w):void 0},L.ch32=x,L.maj32=u,L.p32=g,L.s0_256=function(h){return N(h,2)^N(h,13)^N(h,22)},L.s1_256=function(h){return N(h,6)^N(h,11)^N(h,25)},L.g0_256=function(h){return N(h,7)^N(h,18)^h>>>3},L.g1_256=function(h){return N(h,17)^N(h,19)^h>>>10}},8291:(Y,L,T)=>{"use strict";var p=T(6055),N=T(9879);function m(s,l){return!(55296!=(64512&s.charCodeAt(l))||l<0||l+1>=s.length)&&56320==(64512&s.charCodeAt(l+1))}function g(s){return(s>>>24|s>>>8&65280|s<<8&16711680|(255&s)<<24)>>>0}function A(s){return 1===s.length?"0"+s:s}function I(s){return 7===s.length?"0"+s:6===s.length?"00"+s:5===s.length?"000"+s:4===s.length?"0000"+s:3===s.length?"00000"+s:2===s.length?"000000"+s:1===s.length?"0000000"+s:s}L.inherits=N,L.toArray=function(s,l){if(Array.isArray(s))return s.slice();if(!s)return[];var a=[];if("string"==typeof s)if(l){if("hex"===l)for((s=s.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(s="0"+s),_=0;_<s.length;_+=2)a.push(parseInt(s[_]+s[_+1],16))}else for(var f=0,_=0;_<s.length;_++){var D=s.charCodeAt(_);D<128?a[f++]=D:D<2048?(a[f++]=D>>6|192,a[f++]=63&D|128):m(s,_)?(D=65536+((1023&D)<<10)+(1023&s.charCodeAt(++_)),a[f++]=D>>18|240,a[f++]=D>>12&63|128,a[f++]=D>>6&63|128,a[f++]=63&D|128):(a[f++]=D>>12|224,a[f++]=D>>6&63|128,a[f++]=63&D|128)}else for(_=0;_<s.length;_++)a[_]=0|s[_];return a},L.toHex=function(s){for(var l="",a=0;a<s.length;a++)l+=A(s[a].toString(16));return l},L.htonl=g,L.toHex32=function(s,l){for(var a="",f=0;f<s.length;f++){var _=s[f];"little"===l&&(_=g(_)),a+=I(_.toString(16))}return a},L.zero2=A,L.zero8=I,L.join32=function(s,l,a,f){var _=a-l;p(_%4==0);for(var D=new Array(_/4),d=0,i=l;d<D.length;d++,i+=4)D[d]=("big"===f?s[i]<<24|s[i+1]<<16|s[i+2]<<8|s[i+3]:s[i+3]<<24|s[i+2]<<16|s[i+1]<<8|s[i])>>>0;return D},L.split32=function(s,l){for(var a=new Array(4*s.length),f=0,_=0;f<s.length;f++,_+=4){var D=s[f];"big"===l?(a[_]=D>>>24,a[_+1]=D>>>16&255,a[_+2]=D>>>8&255,a[_+3]=255&D):(a[_+3]=D>>>24,a[_+2]=D>>>16&255,a[_+1]=D>>>8&255,a[_]=255&D)}return a},L.rotr32=function(s,l){return s>>>l|s<<32-l},L.rotl32=function(s,l){return s<<l|s>>>32-l},L.sum32=function(s,l){return s+l>>>0},L.sum32_3=function(s,l,a){return s+l+a>>>0},L.sum32_4=function(s,l,a,f){return s+l+a+f>>>0},L.sum32_5=function(s,l,a,f,_){return s+l+a+f+_>>>0},L.sum64=function(s,l,a,f){var d=f+s[l+1]>>>0;s[l]=(d<f?1:0)+a+s[l]>>>0,s[l+1]=d},L.sum64_hi=function(s,l,a,f){return(l+f>>>0<l?1:0)+s+a>>>0},L.sum64_lo=function(s,l,a,f){return l+f>>>0},L.sum64_4_hi=function(s,l,a,f,_,D,d,i){var b=0,z=l;return b+=(z=z+f>>>0)<l?1:0,b+=(z=z+D>>>0)<D?1:0,s+a+_+d+(b+=(z=z+i>>>0)<i?1:0)>>>0},L.sum64_4_lo=function(s,l,a,f,_,D,d,i){return l+f+D+i>>>0},L.sum64_5_hi=function(s,l,a,f,_,D,d,i,b,z){var q=0,J=l;return q+=(J=J+f>>>0)<l?1:0,q+=(J=J+D>>>0)<D?1:0,q+=(J=J+i>>>0)<i?1:0,s+a+_+d+b+(q+=(J=J+z>>>0)<z?1:0)>>>0},L.sum64_5_lo=function(s,l,a,f,_,D,d,i,b,z){return l+f+D+i+z>>>0},L.rotr64_hi=function(s,l,a){return(l<<32-a|s>>>a)>>>0},L.rotr64_lo=function(s,l,a){return(s<<32-a|l>>>a)>>>0},L.shr64_hi=function(s,l,a){return s>>>a},L.shr64_lo=function(s,l,a){return(s<<32-a|l>>>a)>>>0}},2730:(Y,L,T)=>{"use strict";var p=T(7909),N=T(4869),m=T(6055);function x(u){if(!(this instanceof x))return new x(u);this.hash=u.hash,this.predResist=!!u.predResist,this.outLen=this.hash.outSize,this.minEntropy=u.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var g=N.toArray(u.entropy,u.entropyEnc||"hex"),M=N.toArray(u.nonce,u.nonceEnc||"hex"),A=N.toArray(u.pers,u.persEnc||"hex");m(g.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(g,M,A)}Y.exports=x,x.prototype._init=function(g,M,A){var I=g.concat(M).concat(A);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var y=0;y<this.V.length;y++)this.K[y]=0,this.V[y]=1;this._update(I),this._reseed=1,this.reseedInterval=281474976710656},x.prototype._hmac=function(){return new p.hmac(this.hash,this.K)},x.prototype._update=function(g){var M=this._hmac().update(this.V).update([0]);g&&(M=M.update(g)),this.K=M.digest(),this.V=this._hmac().update(this.V).digest(),g&&(this.K=this._hmac().update(this.V).update([1]).update(g).digest(),this.V=this._hmac().update(this.V).digest())},x.prototype.reseed=function(g,M,A,I){"string"!=typeof M&&(I=A,A=M,M=null),g=N.toArray(g,M),A=N.toArray(A,I),m(g.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(g.concat(A||[])),this._reseed=1},x.prototype.generate=function(g,M,A,I){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof M&&(I=A,A=M,M=null),A&&(A=N.toArray(A,I||"hex"),this._update(A));for(var y=[];y.length<g;)this.V=this._hmac().update(this.V).digest(),y=y.concat(this.V);var h=y.slice(0,g);return this._update(A),this._reseed++,N.encode(h,M)}},2658:(Y,L)=>{L.read=function(T,p,N,m,x){var u,g,M=8*x-m-1,A=(1<<M)-1,I=A>>1,y=-7,h=N?x-1:0,C=N?-1:1,v=T[p+h];for(h+=C,u=v&(1<<-y)-1,v>>=-y,y+=M;y>0;u=256*u+T[p+h],h+=C,y-=8);for(g=u&(1<<-y)-1,u>>=-y,y+=m;y>0;g=256*g+T[p+h],h+=C,y-=8);if(0===u)u=1-I;else{if(u===A)return g?NaN:1/0*(v?-1:1);g+=Math.pow(2,m),u-=I}return(v?-1:1)*g*Math.pow(2,u-m)},L.write=function(T,p,N,m,x,u){var g,M,A,I=8*u-x-1,y=(1<<I)-1,h=y>>1,C=23===x?Math.pow(2,-24)-Math.pow(2,-77):0,v=m?0:u-1,w=m?1:-1,S=p<0||0===p&&1/p<0?1:0;for(p=Math.abs(p),isNaN(p)||p===1/0?(M=isNaN(p)?1:0,g=y):(g=Math.floor(Math.log(p)/Math.LN2),p*(A=Math.pow(2,-g))<1&&(g--,A*=2),(p+=g+h>=1?C/A:C*Math.pow(2,1-h))*A>=2&&(g++,A/=2),g+h>=y?(M=0,g=y):g+h>=1?(M=(p*A-1)*Math.pow(2,x),g+=h):(M=p*Math.pow(2,h-1)*Math.pow(2,x),g=0));x>=8;T[N+v]=255&M,v+=w,M/=256,x-=8);for(g=g<<x|M,I+=x;I>0;T[N+v]=255&g,v+=w,g/=256,I-=8);T[N+v-w]|=128*S}},9879:Y=>{Y.exports="function"==typeof Object.create?function(T,p){p&&(T.super_=p,T.prototype=Object.create(p.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}))}:function(T,p){if(p){T.super_=p;var N=function(){};N.prototype=p.prototype,T.prototype=new N,T.prototype.constructor=T}}},6099:Y=>{function T(N){this.message=N}(T.prototype=new Error).name="InvalidCharacterError",Y.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(N){var m=String(N).replace(/=+$/,"");if(m.length%4==1)throw new T("'atob' failed: The string to be decoded is not correctly encoded.");for(var u,g,x=0,M=0,A="";g=m.charAt(M++);~g&&(u=x%4?64*u+g:g,x++%4)?A+=String.fromCharCode(255&u>>(-2*x&6)):0)g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(g);return A}},4400:(Y,L,T)=>{var p=T(6099);Y.exports=function(m){var x=m.replace(/-/g,"+").replace(/_/g,"/");switch(x.length%4){case 0:break;case 2:x+="==";break;case 3:x+="=";break;default:throw"Illegal base64url string!"}try{return function(m){return decodeURIComponent(p(m).replace(/(.)/g,function(x,u){var g=u.charCodeAt(0).toString(16).toUpperCase();return g.length<2&&(g="0"+g),"%"+g}))}(x)}catch(u){return p(x)}}},4934:(Y,L,T)=>{"use strict";var p=T(4400);function N(m){this.message=m}(N.prototype=new Error).name="InvalidTokenError",Y.exports=function(m,x){if("string"!=typeof m)throw new N("Invalid token specified");var u=!0===(x=x||{}).header?0:1;try{return JSON.parse(p(m.split(".")[u]))}catch(g){throw new N("Invalid token specified: "+g.message)}},Y.exports.InvalidTokenError=N},3264:(Y,L,T)=>{"use strict";var p=T(9879),N=T(5414),m=T(5859).Buffer,x=new Array(16);function u(){N.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function g(h,C){return h<<C|h>>>32-C}function M(h,C,v,w,S,P,k){return g(h+(C&v|~C&w)+S+P|0,k)+C|0}function A(h,C,v,w,S,P,k){return g(h+(C&w|v&~w)+S+P|0,k)+C|0}function I(h,C,v,w,S,P,k){return g(h+(C^v^w)+S+P|0,k)+C|0}function y(h,C,v,w,S,P,k){return g(h+(v^(C|~w))+S+P|0,k)+C|0}p(u,N),u.prototype._update=function(){for(var h=x,C=0;C<16;++C)h[C]=this._block.readInt32LE(4*C);var v=this._a,w=this._b,S=this._c,P=this._d;v=M(v,w,S,P,h[0],3614090360,7),P=M(P,v,w,S,h[1],3905402710,12),S=M(S,P,v,w,h[2],606105819,17),w=M(w,S,P,v,h[3],3250441966,22),v=M(v,w,S,P,h[4],4118548399,7),P=M(P,v,w,S,h[5],1200080426,12),S=M(S,P,v,w,h[6],2821735955,17),w=M(w,S,P,v,h[7],4249261313,22),v=M(v,w,S,P,h[8],1770035416,7),P=M(P,v,w,S,h[9],2336552879,12),S=M(S,P,v,w,h[10],4294925233,17),w=M(w,S,P,v,h[11],2304563134,22),v=M(v,w,S,P,h[12],1804603682,7),P=M(P,v,w,S,h[13],4254626195,12),S=M(S,P,v,w,h[14],2792965006,17),v=A(v,w=M(w,S,P,v,h[15],1236535329,22),S,P,h[1],4129170786,5),P=A(P,v,w,S,h[6],3225465664,9),S=A(S,P,v,w,h[11],643717713,14),w=A(w,S,P,v,h[0],3921069994,20),v=A(v,w,S,P,h[5],3593408605,5),P=A(P,v,w,S,h[10],38016083,9),S=A(S,P,v,w,h[15],3634488961,14),w=A(w,S,P,v,h[4],3889429448,20),v=A(v,w,S,P,h[9],568446438,5),P=A(P,v,w,S,h[14],3275163606,9),S=A(S,P,v,w,h[3],4107603335,14),w=A(w,S,P,v,h[8],1163531501,20),v=A(v,w,S,P,h[13],2850285829,5),P=A(P,v,w,S,h[2],4243563512,9),S=A(S,P,v,w,h[7],1735328473,14),v=I(v,w=A(w,S,P,v,h[12],2368359562,20),S,P,h[5],4294588738,4),P=I(P,v,w,S,h[8],2272392833,11),S=I(S,P,v,w,h[11],1839030562,16),w=I(w,S,P,v,h[14],4259657740,23),v=I(v,w,S,P,h[1],2763975236,4),P=I(P,v,w,S,h[4],1272893353,11),S=I(S,P,v,w,h[7],4139469664,16),w=I(w,S,P,v,h[10],3200236656,23),v=I(v,w,S,P,h[13],681279174,4),P=I(P,v,w,S,h[0],3936430074,11),S=I(S,P,v,w,h[3],3572445317,16),w=I(w,S,P,v,h[6],76029189,23),v=I(v,w,S,P,h[9],3654602809,4),P=I(P,v,w,S,h[12],3873151461,11),S=I(S,P,v,w,h[15],530742520,16),v=y(v,w=I(w,S,P,v,h[2],3299628645,23),S,P,h[0],4096336452,6),P=y(P,v,w,S,h[7],1126891415,10),S=y(S,P,v,w,h[14],2878612391,15),w=y(w,S,P,v,h[5],4237533241,21),v=y(v,w,S,P,h[12],1700485571,6),P=y(P,v,w,S,h[3],2399980690,10),S=y(S,P,v,w,h[10],4293915773,15),w=y(w,S,P,v,h[1],2240044497,21),v=y(v,w,S,P,h[8],1873313359,6),P=y(P,v,w,S,h[15],4264355552,10),S=y(S,P,v,w,h[6],2734768916,15),w=y(w,S,P,v,h[13],1309151649,21),v=y(v,w,S,P,h[4],4149444226,6),P=y(P,v,w,S,h[11],3174756917,10),S=y(S,P,v,w,h[2],718787259,15),w=y(w,S,P,v,h[9],3951481745,21),this._a=this._a+v|0,this._b=this._b+w|0,this._c=this._c+S|0,this._d=this._d+P|0},u.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var h=m.allocUnsafe(16);return h.writeInt32LE(this._a,0),h.writeInt32LE(this._b,4),h.writeInt32LE(this._c,8),h.writeInt32LE(this._d,12),h},Y.exports=u},4398:(Y,L,T)=>{var p=T(1770),N=T(4761);function m(x){this.rand=x||new N.Rand}Y.exports=m,m.create=function(u){return new m(u)},m.prototype._randbelow=function(u){var g=u.bitLength(),M=Math.ceil(g/8);do{var A=new p(this.rand.generate(M))}while(A.cmp(u)>=0);return A},m.prototype._randrange=function(u,g){var M=g.sub(u);return u.add(this._randbelow(M))},m.prototype.test=function(u,g,M){var A=u.bitLength(),I=p.mont(u),y=new p(1).toRed(I);g||(g=Math.max(1,A/48|0));for(var h=u.subn(1),C=0;!h.testn(C);C++);for(var v=u.shrn(C),w=h.toRed(I);g>0;g--){var P=this._randrange(new p(2),h);M&&M(P);var k=P.toRed(I).redPow(v);if(0!==k.cmp(y)&&0!==k.cmp(w)){for(var O=1;O<C;O++){if(0===(k=k.redSqr()).cmp(y))return!1;if(0===k.cmp(w))break}if(O===C)return!1}}return!0},m.prototype.getDivisor=function(u,g){var M=u.bitLength(),A=p.mont(u),I=new p(1).toRed(A);g||(g=Math.max(1,M/48|0));for(var y=u.subn(1),h=0;!y.testn(h);h++);for(var C=u.shrn(h),v=y.toRed(A);g>0;g--){var w=this._randrange(new p(2),y),S=u.gcd(w);if(0!==S.cmpn(1))return S;var P=w.toRed(A).redPow(C);if(0!==P.cmp(I)&&0!==P.cmp(v)){for(var k=1;k<h;k++){if(0===(P=P.redSqr()).cmp(I))return P.fromRed().subn(1).gcd(u);if(0===P.cmp(v))break}if(k===h)return(P=P.redSqr()).fromRed().subn(1).gcd(u)}}return!1}},1770:function(Y,L,T){!function(p,N){"use strict";function m(R,r){if(!R)throw new Error(r||"Assertion failed")}function x(R,r){R.super_=r;var s=function(){};s.prototype=r.prototype,R.prototype=new s,R.prototype.constructor=R}function u(R,r,s){if(u.isBN(R))return R;this.negative=0,this.words=null,this.length=0,this.red=null,null!==R&&(("le"===r||"be"===r)&&(s=r,r=10),this._init(R||0,r||10,s||"be"))}var g;"object"==typeof p?p.exports=u:N.BN=u,u.BN=u,u.wordSize=26;try{g="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:T(6619).Buffer}catch(R){}function M(R,r){var s=R.charCodeAt(r);return s>=65&&s<=70?s-55:s>=97&&s<=102?s-87:s-48&15}function A(R,r,s){var l=M(R,s);return s-1>=r&&(l|=M(R,s-1)<<4),l}function I(R,r,s,l){for(var a=0,f=Math.min(R.length,s),_=r;_<f;_++){var D=R.charCodeAt(_)-48;a*=l,a+=D>=49?D-49+10:D>=17?D-17+10:D}return a}u.isBN=function(r){return r instanceof u||null!==r&&"object"==typeof r&&r.constructor.wordSize===u.wordSize&&Array.isArray(r.words)},u.max=function(r,s){return r.cmp(s)>0?r:s},u.min=function(r,s){return r.cmp(s)<0?r:s},u.prototype._init=function(r,s,l){if("number"==typeof r)return this._initNumber(r,s,l);if("object"==typeof r)return this._initArray(r,s,l);"hex"===s&&(s=16),m(s===(0|s)&&s>=2&&s<=36);var a=0;"-"===(r=r.toString().replace(/\s+/g,""))[0]&&(a++,this.negative=1),a<r.length&&(16===s?this._parseHex(r,a,l):(this._parseBase(r,s,a),"le"===l&&this._initArray(this.toArray(),s,l)))},u.prototype._initNumber=function(r,s,l){r<0&&(this.negative=1,r=-r),r<67108864?(this.words=[67108863&r],this.length=1):r<4503599627370496?(this.words=[67108863&r,r/67108864&67108863],this.length=2):(m(r<9007199254740992),this.words=[67108863&r,r/67108864&67108863,1],this.length=3),"le"===l&&this._initArray(this.toArray(),s,l)},u.prototype._initArray=function(r,s,l){if(m("number"==typeof r.length),r.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(r.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var f,_,D=0;if("be"===l)for(a=r.length-1,f=0;a>=0;a-=3)this.words[f]|=(_=r[a]|r[a-1]<<8|r[a-2]<<16)<<D&67108863,this.words[f+1]=_>>>26-D&67108863,(D+=24)>=26&&(D-=26,f++);else if("le"===l)for(a=0,f=0;a<r.length;a+=3)this.words[f]|=(_=r[a]|r[a+1]<<8|r[a+2]<<16)<<D&67108863,this.words[f+1]=_>>>26-D&67108863,(D+=24)>=26&&(D-=26,f++);return this.strip()},u.prototype._parseHex=function(r,s,l){this.length=Math.ceil((r.length-s)/6),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var D,f=0,_=0;if("be"===l)for(a=r.length-1;a>=s;a-=2)D=A(r,s,a)<<f,this.words[_]|=67108863&D,f>=18?(f-=18,this.words[_+=1]|=D>>>26):f+=8;else for(a=(r.length-s)%2==0?s+1:s;a<r.length;a+=2)D=A(r,s,a)<<f,this.words[_]|=67108863&D,f>=18?(f-=18,this.words[_+=1]|=D>>>26):f+=8;this.strip()},u.prototype._parseBase=function(r,s,l){this.words=[0],this.length=1;for(var a=0,f=1;f<=67108863;f*=s)a++;a--,f=f/s|0;for(var _=r.length-l,D=_%a,d=Math.min(_,_-D)+l,i=0,b=l;b<d;b+=a)i=I(r,b,b+a,s),this.imuln(f),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i);if(0!==D){var z=1;for(i=I(r,b,r.length,s),b=0;b<D;b++)z*=s;this.imuln(z),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i)}this.strip()},u.prototype.copy=function(r){r.words=new Array(this.length);for(var s=0;s<this.length;s++)r.words[s]=this.words[s];r.length=this.length,r.negative=this.negative,r.red=this.red},u.prototype.clone=function(){var r=new u(null);return this.copy(r),r},u.prototype._expand=function(r){for(;this.length<r;)this.words[this.length++]=0;return this},u.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},u.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},u.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],C=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function w(R,r,s){s.negative=r.negative^R.negative;var l=R.length+r.length|0;s.length=l,l=l-1|0;var a=0|R.words[0],f=0|r.words[0],_=a*f,d=_/67108864|0;s.words[0]=67108863&_;for(var i=1;i<l;i++){for(var b=d>>>26,z=67108863&d,q=Math.min(i,r.length-1),J=Math.max(0,i-R.length+1);J<=q;J++)b+=(_=(a=0|R.words[i-J|0])*(f=0|r.words[J])+z)/67108864|0,z=67108863&_;s.words[i]=0|z,d=0|b}return 0!==d?s.words[i]=0|d:s.length--,s.strip()}u.prototype.toString=function(r,s){var l;if(s=0|s||1,16===(r=r||10)||"hex"===r){l="";for(var a=0,f=0,_=0;_<this.length;_++){var D=this.words[_],d=(16777215&(D<<a|f)).toString(16);l=0!=(f=D>>>24-a&16777215)||_!==this.length-1?y[6-d.length]+d+l:d+l,(a+=2)>=26&&(a-=26,_--)}for(0!==f&&(l=f.toString(16)+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}if(r===(0|r)&&r>=2&&r<=36){var i=h[r],b=C[r];l="";var z=this.clone();for(z.negative=0;!z.isZero();){var q=z.modn(b).toString(r);l=(z=z.idivn(b)).isZero()?q+l:y[i-q.length]+q+l}for(this.isZero()&&(l="0"+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}m(!1,"Base should be between 2 and 36")},u.prototype.toNumber=function(){var r=this.words[0];return 2===this.length?r+=67108864*this.words[1]:3===this.length&&1===this.words[2]?r+=4503599627370496+67108864*this.words[1]:this.length>2&&m(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-r:r},u.prototype.toJSON=function(){return this.toString(16)},u.prototype.toBuffer=function(r,s){return m(void 0!==g),this.toArrayLike(g,r,s)},u.prototype.toArray=function(r,s){return this.toArrayLike(Array,r,s)},u.prototype.toArrayLike=function(r,s,l){var a=this.byteLength(),f=l||Math.max(1,a);m(a<=f,"byte array longer than desired length"),m(f>0,"Requested array length <= 0"),this.strip();var d,i,_="le"===s,D=new r(f),b=this.clone();if(_){for(i=0;!b.isZero();i++)d=b.andln(255),b.iushrn(8),D[i]=d;for(;i<f;i++)D[i]=0}else{for(i=0;i<f-a;i++)D[i]=0;for(i=0;!b.isZero();i++)d=b.andln(255),b.iushrn(8),D[f-i-1]=d}return D},u.prototype._countBits=Math.clz32?function(r){return 32-Math.clz32(r)}:function(r){var s=r,l=0;return s>=4096&&(l+=13,s>>>=13),s>=64&&(l+=7,s>>>=7),s>=8&&(l+=4,s>>>=4),s>=2&&(l+=2,s>>>=2),l+s},u.prototype._zeroBits=function(r){if(0===r)return 26;var s=r,l=0;return 0==(8191&s)&&(l+=13,s>>>=13),0==(127&s)&&(l+=7,s>>>=7),0==(15&s)&&(l+=4,s>>>=4),0==(3&s)&&(l+=2,s>>>=2),0==(1&s)&&l++,l},u.prototype.bitLength=function(){var s=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+s},u.prototype.zeroBits=function(){if(this.isZero())return 0;for(var r=0,s=0;s<this.length;s++){var l=this._zeroBits(this.words[s]);if(r+=l,26!==l)break}return r},u.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},u.prototype.toTwos=function(r){return 0!==this.negative?this.abs().inotn(r).iaddn(1):this.clone()},u.prototype.fromTwos=function(r){return this.testn(r-1)?this.notn(r).iaddn(1).ineg():this.clone()},u.prototype.isNeg=function(){return 0!==this.negative},u.prototype.neg=function(){return this.clone().ineg()},u.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},u.prototype.iuor=function(r){for(;this.length<r.length;)this.words[this.length++]=0;for(var s=0;s<r.length;s++)this.words[s]=this.words[s]|r.words[s];return this.strip()},u.prototype.ior=function(r){return m(0==(this.negative|r.negative)),this.iuor(r)},u.prototype.or=function(r){return this.length>r.length?this.clone().ior(r):r.clone().ior(this)},u.prototype.uor=function(r){return this.length>r.length?this.clone().iuor(r):r.clone().iuor(this)},u.prototype.iuand=function(r){var s;s=this.length>r.length?r:this;for(var l=0;l<s.length;l++)this.words[l]=this.words[l]&r.words[l];return this.length=s.length,this.strip()},u.prototype.iand=function(r){return m(0==(this.negative|r.negative)),this.iuand(r)},u.prototype.and=function(r){return this.length>r.length?this.clone().iand(r):r.clone().iand(this)},u.prototype.uand=function(r){return this.length>r.length?this.clone().iuand(r):r.clone().iuand(this)},u.prototype.iuxor=function(r){var s,l;this.length>r.length?(s=this,l=r):(s=r,l=this);for(var a=0;a<l.length;a++)this.words[a]=s.words[a]^l.words[a];if(this!==s)for(;a<s.length;a++)this.words[a]=s.words[a];return this.length=s.length,this.strip()},u.prototype.ixor=function(r){return m(0==(this.negative|r.negative)),this.iuxor(r)},u.prototype.xor=function(r){return this.length>r.length?this.clone().ixor(r):r.clone().ixor(this)},u.prototype.uxor=function(r){return this.length>r.length?this.clone().iuxor(r):r.clone().iuxor(this)},u.prototype.inotn=function(r){m("number"==typeof r&&r>=0);var s=0|Math.ceil(r/26),l=r%26;this._expand(s),l>0&&s--;for(var a=0;a<s;a++)this.words[a]=67108863&~this.words[a];return l>0&&(this.words[a]=~this.words[a]&67108863>>26-l),this.strip()},u.prototype.notn=function(r){return this.clone().inotn(r)},u.prototype.setn=function(r,s){m("number"==typeof r&&r>=0);var l=r/26|0,a=r%26;return this._expand(l+1),this.words[l]=s?this.words[l]|1<<a:this.words[l]&~(1<<a),this.strip()},u.prototype.iadd=function(r){var s,l,a;if(0!==this.negative&&0===r.negative)return this.negative=0,s=this.isub(r),this.negative^=1,this._normSign();if(0===this.negative&&0!==r.negative)return r.negative=0,s=this.isub(r),r.negative=1,s._normSign();this.length>r.length?(l=this,a=r):(l=r,a=this);for(var f=0,_=0;_<a.length;_++)this.words[_]=67108863&(s=(0|l.words[_])+(0|a.words[_])+f),f=s>>>26;for(;0!==f&&_<l.length;_++)this.words[_]=67108863&(s=(0|l.words[_])+f),f=s>>>26;if(this.length=l.length,0!==f)this.words[this.length]=f,this.length++;else if(l!==this)for(;_<l.length;_++)this.words[_]=l.words[_];return this},u.prototype.add=function(r){var s;return 0!==r.negative&&0===this.negative?(r.negative=0,s=this.sub(r),r.negative^=1,s):0===r.negative&&0!==this.negative?(this.negative=0,s=r.sub(this),this.negative=1,s):this.length>r.length?this.clone().iadd(r):r.clone().iadd(this)},u.prototype.isub=function(r){if(0!==r.negative){r.negative=0;var s=this.iadd(r);return r.negative=1,s._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(r),this.negative=1,this._normSign();var a,f,l=this.cmp(r);if(0===l)return this.negative=0,this.length=1,this.words[0]=0,this;l>0?(a=this,f=r):(a=r,f=this);for(var _=0,D=0;D<f.length;D++)_=(s=(0|a.words[D])-(0|f.words[D])+_)>>26,this.words[D]=67108863&s;for(;0!==_&&D<a.length;D++)_=(s=(0|a.words[D])+_)>>26,this.words[D]=67108863&s;if(0===_&&D<a.length&&a!==this)for(;D<a.length;D++)this.words[D]=a.words[D];return this.length=Math.max(this.length,D),a!==this&&(this.negative=1),this.strip()},u.prototype.sub=function(r){return this.clone().isub(r)};var S=function(r,s,l){var d,i,b,a=r.words,f=s.words,_=l.words,D=0,z=0|a[0],q=8191&z,J=z>>>13,ge=0|a[1],me=8191&ge,le=ge>>>13,fe=0|a[2],ae=8191&fe,de=fe>>>13,xe=0|a[3],Ce=8191&xe,oe=xe>>>13,we=0|a[4],ye=8191&we,re=we>>>13,ee=0|a[5],Z=8191&ee,ue=ee>>>13,Re=0|a[6],Te=8191&Re,Ee=Re>>>13,$e=0|a[7],Ne=8191&$e,_e=$e>>>13,Be=0|a[8],Ae=8191&Be,Le=Be>>>13,Ct=0|a[9],He=8191&Ct,We=Ct>>>13,Vt=0|f[0],qe=8191&Vt,ct=Vt>>>13,Mt=0|f[1],it=8191&Mt,at=Mt>>>13,Dn=0|f[2],ot=8191&Dn,Je=Dn>>>13,En=0|f[3],Ge=8191&En,dt=En>>>13,Pn=0|f[4],ut=8191&Pn,Ve=Pn>>>13,On=0|f[5],Ke=8191&On,st=On>>>13,qn=0|f[6],ft=8191&qn,ze=qn>>>13,sn=0|f[7],ht=8191&sn,tt=sn>>>13,Qt=0|f[8],et=8191&Qt,Xe=Qt>>>13,kn=0|f[9],Ye=8191&kn,lt=kn>>>13;l.negative=r.negative^s.negative,l.length=19;var un=(D+(d=Math.imul(q,qe))|0)+((8191&(i=(i=Math.imul(q,ct))+Math.imul(J,qe)|0))<<13)|0;D=((b=Math.imul(J,ct))+(i>>>13)|0)+(un>>>26)|0,un&=67108863,d=Math.imul(me,qe),i=(i=Math.imul(me,ct))+Math.imul(le,qe)|0,b=Math.imul(le,ct);var Ht=(D+(d=d+Math.imul(q,it)|0)|0)+((8191&(i=(i=i+Math.imul(q,at)|0)+Math.imul(J,it)|0))<<13)|0;D=((b=b+Math.imul(J,at)|0)+(i>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,d=Math.imul(ae,qe),i=(i=Math.imul(ae,ct))+Math.imul(de,qe)|0,b=Math.imul(de,ct),d=d+Math.imul(me,it)|0,i=(i=i+Math.imul(me,at)|0)+Math.imul(le,it)|0,b=b+Math.imul(le,at)|0;var jt=(D+(d=d+Math.imul(q,ot)|0)|0)+((8191&(i=(i=i+Math.imul(q,Je)|0)+Math.imul(J,ot)|0))<<13)|0;D=((b=b+Math.imul(J,Je)|0)+(i>>>13)|0)+(jt>>>26)|0,jt&=67108863,d=Math.imul(Ce,qe),i=(i=Math.imul(Ce,ct))+Math.imul(oe,qe)|0,b=Math.imul(oe,ct),d=d+Math.imul(ae,it)|0,i=(i=i+Math.imul(ae,at)|0)+Math.imul(de,it)|0,b=b+Math.imul(de,at)|0,d=d+Math.imul(me,ot)|0,i=(i=i+Math.imul(me,Je)|0)+Math.imul(le,ot)|0,b=b+Math.imul(le,Je)|0;var bn=(D+(d=d+Math.imul(q,Ge)|0)|0)+((8191&(i=(i=i+Math.imul(q,dt)|0)+Math.imul(J,Ge)|0))<<13)|0;D=((b=b+Math.imul(J,dt)|0)+(i>>>13)|0)+(bn>>>26)|0,bn&=67108863,d=Math.imul(ye,qe),i=(i=Math.imul(ye,ct))+Math.imul(re,qe)|0,b=Math.imul(re,ct),d=d+Math.imul(Ce,it)|0,i=(i=i+Math.imul(Ce,at)|0)+Math.imul(oe,it)|0,b=b+Math.imul(oe,at)|0,d=d+Math.imul(ae,ot)|0,i=(i=i+Math.imul(ae,Je)|0)+Math.imul(de,ot)|0,b=b+Math.imul(de,Je)|0,d=d+Math.imul(me,Ge)|0,i=(i=i+Math.imul(me,dt)|0)+Math.imul(le,Ge)|0,b=b+Math.imul(le,dt)|0;var dn=(D+(d=d+Math.imul(q,ut)|0)|0)+((8191&(i=(i=i+Math.imul(q,Ve)|0)+Math.imul(J,ut)|0))<<13)|0;D=((b=b+Math.imul(J,Ve)|0)+(i>>>13)|0)+(dn>>>26)|0,dn&=67108863,d=Math.imul(Z,qe),i=(i=Math.imul(Z,ct))+Math.imul(ue,qe)|0,b=Math.imul(ue,ct),d=d+Math.imul(ye,it)|0,i=(i=i+Math.imul(ye,at)|0)+Math.imul(re,it)|0,b=b+Math.imul(re,at)|0,d=d+Math.imul(Ce,ot)|0,i=(i=i+Math.imul(Ce,Je)|0)+Math.imul(oe,ot)|0,b=b+Math.imul(oe,Je)|0,d=d+Math.imul(ae,Ge)|0,i=(i=i+Math.imul(ae,dt)|0)+Math.imul(de,Ge)|0,b=b+Math.imul(de,dt)|0,d=d+Math.imul(me,ut)|0,i=(i=i+Math.imul(me,Ve)|0)+Math.imul(le,ut)|0,b=b+Math.imul(le,Ve)|0;var pn=(D+(d=d+Math.imul(q,Ke)|0)|0)+((8191&(i=(i=i+Math.imul(q,st)|0)+Math.imul(J,Ke)|0))<<13)|0;D=((b=b+Math.imul(J,st)|0)+(i>>>13)|0)+(pn>>>26)|0,pn&=67108863,d=Math.imul(Te,qe),i=(i=Math.imul(Te,ct))+Math.imul(Ee,qe)|0,b=Math.imul(Ee,ct),d=d+Math.imul(Z,it)|0,i=(i=i+Math.imul(Z,at)|0)+Math.imul(ue,it)|0,b=b+Math.imul(ue,at)|0,d=d+Math.imul(ye,ot)|0,i=(i=i+Math.imul(ye,Je)|0)+Math.imul(re,ot)|0,b=b+Math.imul(re,Je)|0,d=d+Math.imul(Ce,Ge)|0,i=(i=i+Math.imul(Ce,dt)|0)+Math.imul(oe,Ge)|0,b=b+Math.imul(oe,dt)|0,d=d+Math.imul(ae,ut)|0,i=(i=i+Math.imul(ae,Ve)|0)+Math.imul(de,ut)|0,b=b+Math.imul(de,Ve)|0,d=d+Math.imul(me,Ke)|0,i=(i=i+Math.imul(me,st)|0)+Math.imul(le,Ke)|0,b=b+Math.imul(le,st)|0;var In=(D+(d=d+Math.imul(q,ft)|0)|0)+((8191&(i=(i=i+Math.imul(q,ze)|0)+Math.imul(J,ft)|0))<<13)|0;D=((b=b+Math.imul(J,ze)|0)+(i>>>13)|0)+(In>>>26)|0,In&=67108863,d=Math.imul(Ne,qe),i=(i=Math.imul(Ne,ct))+Math.imul(_e,qe)|0,b=Math.imul(_e,ct),d=d+Math.imul(Te,it)|0,i=(i=i+Math.imul(Te,at)|0)+Math.imul(Ee,it)|0,b=b+Math.imul(Ee,at)|0,d=d+Math.imul(Z,ot)|0,i=(i=i+Math.imul(Z,Je)|0)+Math.imul(ue,ot)|0,b=b+Math.imul(ue,Je)|0,d=d+Math.imul(ye,Ge)|0,i=(i=i+Math.imul(ye,dt)|0)+Math.imul(re,Ge)|0,b=b+Math.imul(re,dt)|0,d=d+Math.imul(Ce,ut)|0,i=(i=i+Math.imul(Ce,Ve)|0)+Math.imul(oe,ut)|0,b=b+Math.imul(oe,Ve)|0,d=d+Math.imul(ae,Ke)|0,i=(i=i+Math.imul(ae,st)|0)+Math.imul(de,Ke)|0,b=b+Math.imul(de,st)|0,d=d+Math.imul(me,ft)|0,i=(i=i+Math.imul(me,ze)|0)+Math.imul(le,ft)|0,b=b+Math.imul(le,ze)|0;var rn=(D+(d=d+Math.imul(q,ht)|0)|0)+((8191&(i=(i=i+Math.imul(q,tt)|0)+Math.imul(J,ht)|0))<<13)|0;D=((b=b+Math.imul(J,tt)|0)+(i>>>13)|0)+(rn>>>26)|0,rn&=67108863,d=Math.imul(Ae,qe),i=(i=Math.imul(Ae,ct))+Math.imul(Le,qe)|0,b=Math.imul(Le,ct),d=d+Math.imul(Ne,it)|0,i=(i=i+Math.imul(Ne,at)|0)+Math.imul(_e,it)|0,b=b+Math.imul(_e,at)|0,d=d+Math.imul(Te,ot)|0,i=(i=i+Math.imul(Te,Je)|0)+Math.imul(Ee,ot)|0,b=b+Math.imul(Ee,Je)|0,d=d+Math.imul(Z,Ge)|0,i=(i=i+Math.imul(Z,dt)|0)+Math.imul(ue,Ge)|0,b=b+Math.imul(ue,dt)|0,d=d+Math.imul(ye,ut)|0,i=(i=i+Math.imul(ye,Ve)|0)+Math.imul(re,ut)|0,b=b+Math.imul(re,Ve)|0,d=d+Math.imul(Ce,Ke)|0,i=(i=i+Math.imul(Ce,st)|0)+Math.imul(oe,Ke)|0,b=b+Math.imul(oe,st)|0,d=d+Math.imul(ae,ft)|0,i=(i=i+Math.imul(ae,ze)|0)+Math.imul(de,ft)|0,b=b+Math.imul(de,ze)|0,d=d+Math.imul(me,ht)|0,i=(i=i+Math.imul(me,tt)|0)+Math.imul(le,ht)|0,b=b+Math.imul(le,tt)|0;var Cn=(D+(d=d+Math.imul(q,et)|0)|0)+((8191&(i=(i=i+Math.imul(q,Xe)|0)+Math.imul(J,et)|0))<<13)|0;D=((b=b+Math.imul(J,Xe)|0)+(i>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,d=Math.imul(He,qe),i=(i=Math.imul(He,ct))+Math.imul(We,qe)|0,b=Math.imul(We,ct),d=d+Math.imul(Ae,it)|0,i=(i=i+Math.imul(Ae,at)|0)+Math.imul(Le,it)|0,b=b+Math.imul(Le,at)|0,d=d+Math.imul(Ne,ot)|0,i=(i=i+Math.imul(Ne,Je)|0)+Math.imul(_e,ot)|0,b=b+Math.imul(_e,Je)|0,d=d+Math.imul(Te,Ge)|0,i=(i=i+Math.imul(Te,dt)|0)+Math.imul(Ee,Ge)|0,b=b+Math.imul(Ee,dt)|0,d=d+Math.imul(Z,ut)|0,i=(i=i+Math.imul(Z,Ve)|0)+Math.imul(ue,ut)|0,b=b+Math.imul(ue,Ve)|0,d=d+Math.imul(ye,Ke)|0,i=(i=i+Math.imul(ye,st)|0)+Math.imul(re,Ke)|0,b=b+Math.imul(re,st)|0,d=d+Math.imul(Ce,ft)|0,i=(i=i+Math.imul(Ce,ze)|0)+Math.imul(oe,ft)|0,b=b+Math.imul(oe,ze)|0,d=d+Math.imul(ae,ht)|0,i=(i=i+Math.imul(ae,tt)|0)+Math.imul(de,ht)|0,b=b+Math.imul(de,tt)|0,d=d+Math.imul(me,et)|0,i=(i=i+Math.imul(me,Xe)|0)+Math.imul(le,et)|0,b=b+Math.imul(le,Xe)|0;var Kt=(D+(d=d+Math.imul(q,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(q,lt)|0)+Math.imul(J,Ye)|0))<<13)|0;D=((b=b+Math.imul(J,lt)|0)+(i>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,d=Math.imul(He,it),i=(i=Math.imul(He,at))+Math.imul(We,it)|0,b=Math.imul(We,at),d=d+Math.imul(Ae,ot)|0,i=(i=i+Math.imul(Ae,Je)|0)+Math.imul(Le,ot)|0,b=b+Math.imul(Le,Je)|0,d=d+Math.imul(Ne,Ge)|0,i=(i=i+Math.imul(Ne,dt)|0)+Math.imul(_e,Ge)|0,b=b+Math.imul(_e,dt)|0,d=d+Math.imul(Te,ut)|0,i=(i=i+Math.imul(Te,Ve)|0)+Math.imul(Ee,ut)|0,b=b+Math.imul(Ee,Ve)|0,d=d+Math.imul(Z,Ke)|0,i=(i=i+Math.imul(Z,st)|0)+Math.imul(ue,Ke)|0,b=b+Math.imul(ue,st)|0,d=d+Math.imul(ye,ft)|0,i=(i=i+Math.imul(ye,ze)|0)+Math.imul(re,ft)|0,b=b+Math.imul(re,ze)|0,d=d+Math.imul(Ce,ht)|0,i=(i=i+Math.imul(Ce,tt)|0)+Math.imul(oe,ht)|0,b=b+Math.imul(oe,tt)|0,d=d+Math.imul(ae,et)|0,i=(i=i+Math.imul(ae,Xe)|0)+Math.imul(de,et)|0,b=b+Math.imul(de,Xe)|0;var Nt=(D+(d=d+Math.imul(me,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(me,lt)|0)+Math.imul(le,Ye)|0))<<13)|0;D=((b=b+Math.imul(le,lt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,d=Math.imul(He,ot),i=(i=Math.imul(He,Je))+Math.imul(We,ot)|0,b=Math.imul(We,Je),d=d+Math.imul(Ae,Ge)|0,i=(i=i+Math.imul(Ae,dt)|0)+Math.imul(Le,Ge)|0,b=b+Math.imul(Le,dt)|0,d=d+Math.imul(Ne,ut)|0,i=(i=i+Math.imul(Ne,Ve)|0)+Math.imul(_e,ut)|0,b=b+Math.imul(_e,Ve)|0,d=d+Math.imul(Te,Ke)|0,i=(i=i+Math.imul(Te,st)|0)+Math.imul(Ee,Ke)|0,b=b+Math.imul(Ee,st)|0,d=d+Math.imul(Z,ft)|0,i=(i=i+Math.imul(Z,ze)|0)+Math.imul(ue,ft)|0,b=b+Math.imul(ue,ze)|0,d=d+Math.imul(ye,ht)|0,i=(i=i+Math.imul(ye,tt)|0)+Math.imul(re,ht)|0,b=b+Math.imul(re,tt)|0,d=d+Math.imul(Ce,et)|0,i=(i=i+Math.imul(Ce,Xe)|0)+Math.imul(oe,et)|0,b=b+Math.imul(oe,Xe)|0;var xn=(D+(d=d+Math.imul(ae,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(ae,lt)|0)+Math.imul(de,Ye)|0))<<13)|0;D=((b=b+Math.imul(de,lt)|0)+(i>>>13)|0)+(xn>>>26)|0,xn&=67108863,d=Math.imul(He,Ge),i=(i=Math.imul(He,dt))+Math.imul(We,Ge)|0,b=Math.imul(We,dt),d=d+Math.imul(Ae,ut)|0,i=(i=i+Math.imul(Ae,Ve)|0)+Math.imul(Le,ut)|0,b=b+Math.imul(Le,Ve)|0,d=d+Math.imul(Ne,Ke)|0,i=(i=i+Math.imul(Ne,st)|0)+Math.imul(_e,Ke)|0,b=b+Math.imul(_e,st)|0,d=d+Math.imul(Te,ft)|0,i=(i=i+Math.imul(Te,ze)|0)+Math.imul(Ee,ft)|0,b=b+Math.imul(Ee,ze)|0,d=d+Math.imul(Z,ht)|0,i=(i=i+Math.imul(Z,tt)|0)+Math.imul(ue,ht)|0,b=b+Math.imul(ue,tt)|0,d=d+Math.imul(ye,et)|0,i=(i=i+Math.imul(ye,Xe)|0)+Math.imul(re,et)|0,b=b+Math.imul(re,Xe)|0;var wn=(D+(d=d+Math.imul(Ce,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(Ce,lt)|0)+Math.imul(oe,Ye)|0))<<13)|0;D=((b=b+Math.imul(oe,lt)|0)+(i>>>13)|0)+(wn>>>26)|0,wn&=67108863,d=Math.imul(He,ut),i=(i=Math.imul(He,Ve))+Math.imul(We,ut)|0,b=Math.imul(We,Ve),d=d+Math.imul(Ae,Ke)|0,i=(i=i+Math.imul(Ae,st)|0)+Math.imul(Le,Ke)|0,b=b+Math.imul(Le,st)|0,d=d+Math.imul(Ne,ft)|0,i=(i=i+Math.imul(Ne,ze)|0)+Math.imul(_e,ft)|0,b=b+Math.imul(_e,ze)|0,d=d+Math.imul(Te,ht)|0,i=(i=i+Math.imul(Te,tt)|0)+Math.imul(Ee,ht)|0,b=b+Math.imul(Ee,tt)|0,d=d+Math.imul(Z,et)|0,i=(i=i+Math.imul(Z,Xe)|0)+Math.imul(ue,et)|0,b=b+Math.imul(ue,Xe)|0;var Mn=(D+(d=d+Math.imul(ye,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(ye,lt)|0)+Math.imul(re,Ye)|0))<<13)|0;D=((b=b+Math.imul(re,lt)|0)+(i>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,d=Math.imul(He,Ke),i=(i=Math.imul(He,st))+Math.imul(We,Ke)|0,b=Math.imul(We,st),d=d+Math.imul(Ae,ft)|0,i=(i=i+Math.imul(Ae,ze)|0)+Math.imul(Le,ft)|0,b=b+Math.imul(Le,ze)|0,d=d+Math.imul(Ne,ht)|0,i=(i=i+Math.imul(Ne,tt)|0)+Math.imul(_e,ht)|0,b=b+Math.imul(_e,tt)|0,d=d+Math.imul(Te,et)|0,i=(i=i+Math.imul(Te,Xe)|0)+Math.imul(Ee,et)|0,b=b+Math.imul(Ee,Xe)|0;var xt=(D+(d=d+Math.imul(Z,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(Z,lt)|0)+Math.imul(ue,Ye)|0))<<13)|0;D=((b=b+Math.imul(ue,lt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,d=Math.imul(He,ft),i=(i=Math.imul(He,ze))+Math.imul(We,ft)|0,b=Math.imul(We,ze),d=d+Math.imul(Ae,ht)|0,i=(i=i+Math.imul(Ae,tt)|0)+Math.imul(Le,ht)|0,b=b+Math.imul(Le,tt)|0,d=d+Math.imul(Ne,et)|0,i=(i=i+Math.imul(Ne,Xe)|0)+Math.imul(_e,et)|0,b=b+Math.imul(_e,Xe)|0;var Rn=(D+(d=d+Math.imul(Te,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(Te,lt)|0)+Math.imul(Ee,Ye)|0))<<13)|0;D=((b=b+Math.imul(Ee,lt)|0)+(i>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,d=Math.imul(He,ht),i=(i=Math.imul(He,tt))+Math.imul(We,ht)|0,b=Math.imul(We,tt),d=d+Math.imul(Ae,et)|0,i=(i=i+Math.imul(Ae,Xe)|0)+Math.imul(Le,et)|0,b=b+Math.imul(Le,Xe)|0;var Zt=(D+(d=d+Math.imul(Ne,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(Ne,lt)|0)+Math.imul(_e,Ye)|0))<<13)|0;D=((b=b+Math.imul(_e,lt)|0)+(i>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,d=Math.imul(He,et),i=(i=Math.imul(He,Xe))+Math.imul(We,et)|0,b=Math.imul(We,Xe);var tn=(D+(d=d+Math.imul(Ae,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(Ae,lt)|0)+Math.imul(Le,Ye)|0))<<13)|0;D=((b=b+Math.imul(Le,lt)|0)+(i>>>13)|0)+(tn>>>26)|0,tn&=67108863;var _n=(D+(d=Math.imul(He,Ye))|0)+((8191&(i=(i=Math.imul(He,lt))+Math.imul(We,Ye)|0))<<13)|0;return D=((b=Math.imul(We,lt))+(i>>>13)|0)+(_n>>>26)|0,_n&=67108863,_[0]=un,_[1]=Ht,_[2]=jt,_[3]=bn,_[4]=dn,_[5]=pn,_[6]=In,_[7]=rn,_[8]=Cn,_[9]=Kt,_[10]=Nt,_[11]=xn,_[12]=wn,_[13]=Mn,_[14]=xt,_[15]=Rn,_[16]=Zt,_[17]=tn,_[18]=_n,0!==D&&(_[19]=D,l.length++),l};function k(R,r,s){return(new O).mulp(R,r,s)}function O(R,r){this.x=R,this.y=r}Math.imul||(S=w),u.prototype.mulTo=function(r,s){var a=this.length+r.length;return 10===this.length&&10===r.length?S(this,r,s):a<63?w(this,r,s):a<1024?function(R,r,s){s.negative=r.negative^R.negative,s.length=R.length+r.length;for(var l=0,a=0,f=0;f<s.length-1;f++){var _=a;a=0;for(var D=67108863&l,d=Math.min(f,r.length-1),i=Math.max(0,f-R.length+1);i<=d;i++){var J=(0|R.words[f-i])*(0|r.words[i]),ge=67108863&J;D=67108863&(ge=ge+D|0),a+=(_=(_=_+(J/67108864|0)|0)+(ge>>>26)|0)>>>26,_&=67108863}s.words[f]=D,l=_,_=a}return 0!==l?s.words[f]=l:s.length--,s.strip()}(this,r,s):k(this,r,s)},O.prototype.makeRBT=function(r){for(var s=new Array(r),l=u.prototype._countBits(r)-1,a=0;a<r;a++)s[a]=this.revBin(a,l,r);return s},O.prototype.revBin=function(r,s,l){if(0===r||r===l-1)return r;for(var a=0,f=0;f<s;f++)a|=(1&r)<<s-f-1,r>>=1;return a},O.prototype.permute=function(r,s,l,a,f,_){for(var D=0;D<_;D++)a[D]=s[r[D]],f[D]=l[r[D]]},O.prototype.transform=function(r,s,l,a,f,_){this.permute(_,r,s,l,a,f);for(var D=1;D<f;D<<=1)for(var d=D<<1,i=Math.cos(2*Math.PI/d),b=Math.sin(2*Math.PI/d),z=0;z<f;z+=d)for(var q=i,J=b,ge=0;ge<D;ge++){var me=l[z+ge],le=a[z+ge],fe=l[z+ge+D],ae=a[z+ge+D],de=q*fe-J*ae;ae=q*ae+J*fe,l[z+ge]=me+(fe=de),a[z+ge]=le+ae,l[z+ge+D]=me-fe,a[z+ge+D]=le-ae,ge!==d&&(de=i*q-b*J,J=i*J+b*q,q=de)}},O.prototype.guessLen13b=function(r,s){var l=1|Math.max(s,r),a=1&l,f=0;for(l=l/2|0;l;l>>>=1)f++;return 1<<f+1+a},O.prototype.conjugate=function(r,s,l){if(!(l<=1))for(var a=0;a<l/2;a++){var f=r[a];r[a]=r[l-a-1],r[l-a-1]=f,f=s[a],s[a]=-s[l-a-1],s[l-a-1]=-f}},O.prototype.normalize13b=function(r,s){for(var l=0,a=0;a<s/2;a++){var f=8192*Math.round(r[2*a+1]/s)+Math.round(r[2*a]/s)+l;r[a]=67108863&f,l=f<67108864?0:f/67108864|0}return r},O.prototype.convert13b=function(r,s,l,a){for(var f=0,_=0;_<s;_++)l[2*_]=8191&(f+=0|r[_]),l[2*_+1]=8191&(f>>>=13),f>>>=13;for(_=2*s;_<a;++_)l[_]=0;m(0===f),m(0==(-8192&f))},O.prototype.stub=function(r){for(var s=new Array(r),l=0;l<r;l++)s[l]=0;return s},O.prototype.mulp=function(r,s,l){var a=2*this.guessLen13b(r.length,s.length),f=this.makeRBT(a),_=this.stub(a),D=new Array(a),d=new Array(a),i=new Array(a),b=new Array(a),z=new Array(a),q=new Array(a),J=l.words;J.length=a,this.convert13b(r.words,r.length,D,a),this.convert13b(s.words,s.length,b,a),this.transform(D,_,d,i,a,f),this.transform(b,_,z,q,a,f);for(var ge=0;ge<a;ge++){var me=d[ge]*z[ge]-i[ge]*q[ge];i[ge]=d[ge]*q[ge]+i[ge]*z[ge],d[ge]=me}return this.conjugate(d,i,a),this.transform(d,i,J,_,a,f),this.conjugate(J,_,a),this.normalize13b(J,a),l.negative=r.negative^s.negative,l.length=r.length+s.length,l.strip()},u.prototype.mul=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),this.mulTo(r,s)},u.prototype.mulf=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),k(this,r,s)},u.prototype.imul=function(r){return this.clone().mulTo(r,this)},u.prototype.imuln=function(r){m("number"==typeof r),m(r<67108864);for(var s=0,l=0;l<this.length;l++){var a=(0|this.words[l])*r,f=(67108863&a)+(67108863&s);s>>=26,s+=a/67108864|0,s+=f>>>26,this.words[l]=67108863&f}return 0!==s&&(this.words[l]=s,this.length++),this},u.prototype.muln=function(r){return this.clone().imuln(r)},u.prototype.sqr=function(){return this.mul(this)},u.prototype.isqr=function(){return this.imul(this.clone())},u.prototype.pow=function(r){var s=function(R){for(var r=new Array(R.bitLength()),s=0;s<r.length;s++){var a=s%26;r[s]=(R.words[s/26|0]&1<<a)>>>a}return r}(r);if(0===s.length)return new u(1);for(var l=this,a=0;a<s.length&&0===s[a];a++,l=l.sqr());if(++a<s.length)for(var f=l.sqr();a<s.length;a++,f=f.sqr())0!==s[a]&&(l=l.mul(f));return l},u.prototype.iushln=function(r){m("number"==typeof r&&r>=0);var f,s=r%26,l=(r-s)/26,a=67108863>>>26-s<<26-s;if(0!==s){var _=0;for(f=0;f<this.length;f++){var D=this.words[f]&a;this.words[f]=(0|this.words[f])-D<<s|_,_=D>>>26-s}_&&(this.words[f]=_,this.length++)}if(0!==l){for(f=this.length-1;f>=0;f--)this.words[f+l]=this.words[f];for(f=0;f<l;f++)this.words[f]=0;this.length+=l}return this.strip()},u.prototype.ishln=function(r){return m(0===this.negative),this.iushln(r)},u.prototype.iushrn=function(r,s,l){var a;m("number"==typeof r&&r>=0),a=s?(s-s%26)/26:0;var f=r%26,_=Math.min((r-f)/26,this.length),D=67108863^67108863>>>f<<f,d=l;if(a-=_,a=Math.max(0,a),d){for(var i=0;i<_;i++)d.words[i]=this.words[i];d.length=_}if(0!==_)if(this.length>_)for(this.length-=_,i=0;i<this.length;i++)this.words[i]=this.words[i+_];else this.words[0]=0,this.length=1;var b=0;for(i=this.length-1;i>=0&&(0!==b||i>=a);i--){var z=0|this.words[i];this.words[i]=b<<26-f|z>>>f,b=z&D}return d&&0!==b&&(d.words[d.length++]=b),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},u.prototype.ishrn=function(r,s,l){return m(0===this.negative),this.iushrn(r,s,l)},u.prototype.shln=function(r){return this.clone().ishln(r)},u.prototype.ushln=function(r){return this.clone().iushln(r)},u.prototype.shrn=function(r){return this.clone().ishrn(r)},u.prototype.ushrn=function(r){return this.clone().iushrn(r)},u.prototype.testn=function(r){m("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return!(this.length<=l||!(this.words[l]&1<<s))},u.prototype.imaskn=function(r){m("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return m(0===this.negative,"imaskn works only with positive numbers"),this.length<=l?this:(0!==s&&l++,this.length=Math.min(l,this.length),0!==s&&(this.words[this.length-1]&=67108863^67108863>>>s<<s),this.strip())},u.prototype.maskn=function(r){return this.clone().imaskn(r)},u.prototype.iaddn=function(r){return m("number"==typeof r),m(r<67108864),r<0?this.isubn(-r):0!==this.negative?1===this.length&&(0|this.words[0])<r?(this.words[0]=r-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(r),this.negative=1,this):this._iaddn(r)},u.prototype._iaddn=function(r){this.words[0]+=r;for(var s=0;s<this.length&&this.words[s]>=67108864;s++)this.words[s]-=67108864,s===this.length-1?this.words[s+1]=1:this.words[s+1]++;return this.length=Math.max(this.length,s+1),this},u.prototype.isubn=function(r){if(m("number"==typeof r),m(r<67108864),r<0)return this.iaddn(-r);if(0!==this.negative)return this.negative=0,this.iaddn(r),this.negative=1,this;if(this.words[0]-=r,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var s=0;s<this.length&&this.words[s]<0;s++)this.words[s]+=67108864,this.words[s+1]-=1;return this.strip()},u.prototype.addn=function(r){return this.clone().iaddn(r)},u.prototype.subn=function(r){return this.clone().isubn(r)},u.prototype.iabs=function(){return this.negative=0,this},u.prototype.abs=function(){return this.clone().iabs()},u.prototype._ishlnsubmul=function(r,s,l){var f;this._expand(r.length+l);var _,D=0;for(f=0;f<r.length;f++){_=(0|this.words[f+l])+D;var d=(0|r.words[f])*s;D=((_-=67108863&d)>>26)-(d/67108864|0),this.words[f+l]=67108863&_}for(;f<this.length-l;f++)D=(_=(0|this.words[f+l])+D)>>26,this.words[f+l]=67108863&_;if(0===D)return this.strip();for(m(-1===D),D=0,f=0;f<this.length;f++)D=(_=-(0|this.words[f])+D)>>26,this.words[f]=67108863&_;return this.negative=1,this.strip()},u.prototype._wordDiv=function(r,s){var l,a=this.clone(),f=r,_=0|f.words[f.length-1];0!=(l=26-this._countBits(_))&&(f=f.ushln(l),a.iushln(l),_=0|f.words[f.length-1]);var i,d=a.length-f.length;if("mod"!==s){(i=new u(null)).length=d+1,i.words=new Array(i.length);for(var b=0;b<i.length;b++)i.words[b]=0}var z=a.clone()._ishlnsubmul(f,1,d);0===z.negative&&(a=z,i&&(i.words[d]=1));for(var q=d-1;q>=0;q--){var J=67108864*(0|a.words[f.length+q])+(0|a.words[f.length+q-1]);for(J=Math.min(J/_|0,67108863),a._ishlnsubmul(f,J,q);0!==a.negative;)J--,a.negative=0,a._ishlnsubmul(f,1,q),a.isZero()||(a.negative^=1);i&&(i.words[q]=J)}return i&&i.strip(),a.strip(),"div"!==s&&0!==l&&a.iushrn(l),{div:i||null,mod:a}},u.prototype.divmod=function(r,s,l){return m(!r.isZero()),this.isZero()?{div:new u(0),mod:new u(0)}:0!==this.negative&&0===r.negative?(_=this.neg().divmod(r,s),"mod"!==s&&(a=_.div.neg()),"div"!==s&&(f=_.mod.neg(),l&&0!==f.negative&&f.iadd(r)),{div:a,mod:f}):0===this.negative&&0!==r.negative?(_=this.divmod(r.neg(),s),"mod"!==s&&(a=_.div.neg()),{div:a,mod:_.mod}):0!=(this.negative&r.negative)?(_=this.neg().divmod(r.neg(),s),"div"!==s&&(f=_.mod.neg(),l&&0!==f.negative&&f.isub(r)),{div:_.div,mod:f}):r.length>this.length||this.cmp(r)<0?{div:new u(0),mod:this}:1===r.length?"div"===s?{div:this.divn(r.words[0]),mod:null}:"mod"===s?{div:null,mod:new u(this.modn(r.words[0]))}:{div:this.divn(r.words[0]),mod:new u(this.modn(r.words[0]))}:this._wordDiv(r,s);var a,f,_},u.prototype.div=function(r){return this.divmod(r,"div",!1).div},u.prototype.mod=function(r){return this.divmod(r,"mod",!1).mod},u.prototype.umod=function(r){return this.divmod(r,"mod",!0).mod},u.prototype.divRound=function(r){var s=this.divmod(r);if(s.mod.isZero())return s.div;var l=0!==s.div.negative?s.mod.isub(r):s.mod,a=r.ushrn(1),f=r.andln(1),_=l.cmp(a);return _<0||1===f&&0===_?s.div:0!==s.div.negative?s.div.isubn(1):s.div.iaddn(1)},u.prototype.modn=function(r){m(r<=67108863);for(var s=(1<<26)%r,l=0,a=this.length-1;a>=0;a--)l=(s*l+(0|this.words[a]))%r;return l},u.prototype.idivn=function(r){m(r<=67108863);for(var s=0,l=this.length-1;l>=0;l--){var a=(0|this.words[l])+67108864*s;this.words[l]=a/r|0,s=a%r}return this.strip()},u.prototype.divn=function(r){return this.clone().idivn(r)},u.prototype.egcd=function(r){m(0===r.negative),m(!r.isZero());var s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),_=new u(0),D=new u(1),d=0;s.isEven()&&l.isEven();)s.iushrn(1),l.iushrn(1),++d;for(var i=l.clone(),b=s.clone();!s.isZero();){for(var z=0,q=1;0==(s.words[0]&q)&&z<26;++z,q<<=1);if(z>0)for(s.iushrn(z);z-- >0;)(a.isOdd()||f.isOdd())&&(a.iadd(i),f.isub(b)),a.iushrn(1),f.iushrn(1);for(var J=0,ge=1;0==(l.words[0]&ge)&&J<26;++J,ge<<=1);if(J>0)for(l.iushrn(J);J-- >0;)(_.isOdd()||D.isOdd())&&(_.iadd(i),D.isub(b)),_.iushrn(1),D.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(_),f.isub(D)):(l.isub(s),_.isub(a),D.isub(f))}return{a:_,b:D,gcd:l.iushln(d)}},u.prototype._invmp=function(r){m(0===r.negative),m(!r.isZero());var z,s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),_=l.clone();s.cmpn(1)>0&&l.cmpn(1)>0;){for(var D=0,d=1;0==(s.words[0]&d)&&D<26;++D,d<<=1);if(D>0)for(s.iushrn(D);D-- >0;)a.isOdd()&&a.iadd(_),a.iushrn(1);for(var i=0,b=1;0==(l.words[0]&b)&&i<26;++i,b<<=1);if(i>0)for(l.iushrn(i);i-- >0;)f.isOdd()&&f.iadd(_),f.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(f)):(l.isub(s),f.isub(a))}return(z=0===s.cmpn(1)?a:f).cmpn(0)<0&&z.iadd(r),z},u.prototype.gcd=function(r){if(this.isZero())return r.abs();if(r.isZero())return this.abs();var s=this.clone(),l=r.clone();s.negative=0,l.negative=0;for(var a=0;s.isEven()&&l.isEven();a++)s.iushrn(1),l.iushrn(1);for(;;){for(;s.isEven();)s.iushrn(1);for(;l.isEven();)l.iushrn(1);var f=s.cmp(l);if(f<0){var _=s;s=l,l=_}else if(0===f||0===l.cmpn(1))break;s.isub(l)}return l.iushln(a)},u.prototype.invm=function(r){return this.egcd(r).a.umod(r)},u.prototype.isEven=function(){return 0==(1&this.words[0])},u.prototype.isOdd=function(){return 1==(1&this.words[0])},u.prototype.andln=function(r){return this.words[0]&r},u.prototype.bincn=function(r){m("number"==typeof r);var s=r%26,l=(r-s)/26,a=1<<s;if(this.length<=l)return this._expand(l+1),this.words[l]|=a,this;for(var f=a,_=l;0!==f&&_<this.length;_++){var D=0|this.words[_];f=(D+=f)>>>26,this.words[_]=D&=67108863}return 0!==f&&(this.words[_]=f,this.length++),this},u.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},u.prototype.cmpn=function(r){var l,s=r<0;if(0!==this.negative&&!s)return-1;if(0===this.negative&&s)return 1;if(this.strip(),this.length>1)l=1;else{s&&(r=-r),m(r<=67108863,"Number is too big");var a=0|this.words[0];l=a===r?0:a<r?-1:1}return 0!==this.negative?0|-l:l},u.prototype.cmp=function(r){if(0!==this.negative&&0===r.negative)return-1;if(0===this.negative&&0!==r.negative)return 1;var s=this.ucmp(r);return 0!==this.negative?0|-s:s},u.prototype.ucmp=function(r){if(this.length>r.length)return 1;if(this.length<r.length)return-1;for(var s=0,l=this.length-1;l>=0;l--){var a=0|this.words[l],f=0|r.words[l];if(a!==f){a<f?s=-1:a>f&&(s=1);break}}return s},u.prototype.gtn=function(r){return 1===this.cmpn(r)},u.prototype.gt=function(r){return 1===this.cmp(r)},u.prototype.gten=function(r){return this.cmpn(r)>=0},u.prototype.gte=function(r){return this.cmp(r)>=0},u.prototype.ltn=function(r){return-1===this.cmpn(r)},u.prototype.lt=function(r){return-1===this.cmp(r)},u.prototype.lten=function(r){return this.cmpn(r)<=0},u.prototype.lte=function(r){return this.cmp(r)<=0},u.prototype.eqn=function(r){return 0===this.cmpn(r)},u.prototype.eq=function(r){return 0===this.cmp(r)},u.red=function(r){return new $(r)},u.prototype.toRed=function(r){return m(!this.red,"Already a number in reduction context"),m(0===this.negative,"red works only with positives"),r.convertTo(this)._forceRed(r)},u.prototype.fromRed=function(){return m(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},u.prototype._forceRed=function(r){return this.red=r,this},u.prototype.forceRed=function(r){return m(!this.red,"Already a number in reduction context"),this._forceRed(r)},u.prototype.redAdd=function(r){return m(this.red,"redAdd works only with red numbers"),this.red.add(this,r)},u.prototype.redIAdd=function(r){return m(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,r)},u.prototype.redSub=function(r){return m(this.red,"redSub works only with red numbers"),this.red.sub(this,r)},u.prototype.redISub=function(r){return m(this.red,"redISub works only with red numbers"),this.red.isub(this,r)},u.prototype.redShl=function(r){return m(this.red,"redShl works only with red numbers"),this.red.shl(this,r)},u.prototype.redMul=function(r){return m(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.mul(this,r)},u.prototype.redIMul=function(r){return m(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.imul(this,r)},u.prototype.redSqr=function(){return m(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},u.prototype.redISqr=function(){return m(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},u.prototype.redSqrt=function(){return m(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},u.prototype.redInvm=function(){return m(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},u.prototype.redNeg=function(){return m(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},u.prototype.redPow=function(r){return m(this.red&&!r.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,r)};var V={k256:null,p224:null,p192:null,p25519:null};function U(R,r){this.name=R,this.p=new u(r,16),this.n=this.p.bitLength(),this.k=new u(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function B(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function H(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function W(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function te(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function $(R){if("string"==typeof R){var r=u._prime(R);this.m=r.p,this.prime=r}else m(R.gtn(1),"modulus must be greater than 1"),this.m=R,this.prime=null}function pe(R){$.call(this,R),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new u(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}U.prototype._tmp=function(){var r=new u(null);return r.words=new Array(Math.ceil(this.n/13)),r},U.prototype.ireduce=function(r){var l,s=r;do{this.split(s,this.tmp),l=(s=(s=this.imulK(s)).iadd(this.tmp)).bitLength()}while(l>this.n);var a=l<this.n?-1:s.ucmp(this.p);return 0===a?(s.words[0]=0,s.length=1):a>0?s.isub(this.p):void 0!==s.strip?s.strip():s._strip(),s},U.prototype.split=function(r,s){r.iushrn(this.n,0,s)},U.prototype.imulK=function(r){return r.imul(this.k)},x(B,U),B.prototype.split=function(r,s){for(var l=4194303,a=Math.min(r.length,9),f=0;f<a;f++)s.words[f]=r.words[f];if(s.length=a,r.length<=9)return r.words[0]=0,void(r.length=1);var _=r.words[9];for(s.words[s.length++]=_&l,f=10;f<r.length;f++){var D=0|r.words[f];r.words[f-10]=(D&l)<<4|_>>>22,_=D}r.words[f-10]=_>>>=22,r.length-=0===_&&r.length>10?10:9},B.prototype.imulK=function(r){r.words[r.length]=0,r.words[r.length+1]=0,r.length+=2;for(var s=0,l=0;l<r.length;l++){var a=0|r.words[l];r.words[l]=67108863&(s+=977*a),s=64*a+(s/67108864|0)}return 0===r.words[r.length-1]&&(r.length--,0===r.words[r.length-1]&&r.length--),r},x(H,U),x(W,U),x(te,U),te.prototype.imulK=function(r){for(var s=0,l=0;l<r.length;l++){var a=19*(0|r.words[l])+s,f=67108863&a;a>>>=26,r.words[l]=f,s=a}return 0!==s&&(r.words[r.length++]=s),r},u._prime=function(r){if(V[r])return V[r];var s;if("k256"===r)s=new B;else if("p224"===r)s=new H;else if("p192"===r)s=new W;else{if("p25519"!==r)throw new Error("Unknown prime "+r);s=new te}return V[r]=s,s},$.prototype._verify1=function(r){m(0===r.negative,"red works only with positives"),m(r.red,"red works only with red numbers")},$.prototype._verify2=function(r,s){m(0==(r.negative|s.negative),"red works only with positives"),m(r.red&&r.red===s.red,"red works only with red numbers")},$.prototype.imod=function(r){return this.prime?this.prime.ireduce(r)._forceRed(this):r.umod(this.m)._forceRed(this)},$.prototype.neg=function(r){return r.isZero()?r.clone():this.m.sub(r)._forceRed(this)},$.prototype.add=function(r,s){this._verify2(r,s);var l=r.add(s);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},$.prototype.iadd=function(r,s){this._verify2(r,s);var l=r.iadd(s);return l.cmp(this.m)>=0&&l.isub(this.m),l},$.prototype.sub=function(r,s){this._verify2(r,s);var l=r.sub(s);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},$.prototype.isub=function(r,s){this._verify2(r,s);var l=r.isub(s);return l.cmpn(0)<0&&l.iadd(this.m),l},$.prototype.shl=function(r,s){return this._verify1(r),this.imod(r.ushln(s))},$.prototype.imul=function(r,s){return this._verify2(r,s),this.imod(r.imul(s))},$.prototype.mul=function(r,s){return this._verify2(r,s),this.imod(r.mul(s))},$.prototype.isqr=function(r){return this.imul(r,r.clone())},$.prototype.sqr=function(r){return this.mul(r,r)},$.prototype.sqrt=function(r){if(r.isZero())return r.clone();var s=this.m.andln(3);if(m(s%2==1),3===s){var l=this.m.add(new u(1)).iushrn(2);return this.pow(r,l)}for(var a=this.m.subn(1),f=0;!a.isZero()&&0===a.andln(1);)f++,a.iushrn(1);m(!a.isZero());var _=new u(1).toRed(this),D=_.redNeg(),d=this.m.subn(1).iushrn(1),i=this.m.bitLength();for(i=new u(2*i*i).toRed(this);0!==this.pow(i,d).cmp(D);)i.redIAdd(D);for(var b=this.pow(i,a),z=this.pow(r,a.addn(1).iushrn(1)),q=this.pow(r,a),J=f;0!==q.cmp(_);){for(var ge=q,me=0;0!==ge.cmp(_);me++)ge=ge.redSqr();m(me<J);var le=this.pow(b,new u(1).iushln(J-me-1));z=z.redMul(le),b=le.redSqr(),q=q.redMul(b),J=me}return z},$.prototype.invm=function(r){var s=r._invmp(this.m);return 0!==s.negative?(s.negative=0,this.imod(s).redNeg()):this.imod(s)},$.prototype.pow=function(r,s){if(s.isZero())return new u(1).toRed(this);if(0===s.cmpn(1))return r.clone();var a=new Array(16);a[0]=new u(1).toRed(this),a[1]=r;for(var f=2;f<a.length;f++)a[f]=this.mul(a[f-1],r);var _=a[0],D=0,d=0,i=s.bitLength()%26;for(0===i&&(i=26),f=s.length-1;f>=0;f--){for(var b=s.words[f],z=i-1;z>=0;z--){var q=b>>z&1;_!==a[0]&&(_=this.sqr(_)),0!==q||0!==D?(D<<=1,D|=q,(4==++d||0===f&&0===z)&&(_=this.mul(_,a[D]),d=0,D=0)):d=0}i=26}return _},$.prototype.convertTo=function(r){var s=r.umod(this.m);return s===r?s.clone():s},$.prototype.convertFrom=function(r){var s=r.clone();return s.red=null,s},u.mont=function(r){return new pe(r)},x(pe,$),pe.prototype.convertTo=function(r){return this.imod(r.ushln(this.shift))},pe.prototype.convertFrom=function(r){var s=this.imod(r.mul(this.rinv));return s.red=null,s},pe.prototype.imul=function(r,s){if(r.isZero()||s.isZero())return r.words[0]=0,r.length=1,r;var l=r.imul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),_=f;return f.cmp(this.m)>=0?_=f.isub(this.m):f.cmpn(0)<0&&(_=f.iadd(this.m)),_._forceRed(this)},pe.prototype.mul=function(r,s){if(r.isZero()||s.isZero())return new u(0)._forceRed(this);var l=r.mul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),_=f;return f.cmp(this.m)>=0?_=f.isub(this.m):f.cmpn(0)<0&&(_=f.iadd(this.m)),_._forceRed(this)},pe.prototype.invm=function(r){return this.imod(r._invmp(this.m).mul(this.r2))._forceRed(this)}}(Y=T.nmd(Y),this)},6055:Y=>{function L(T,p){if(!T)throw new Error(p||"Assertion failed")}Y.exports=L,L.equal=function(p,N,m){if(p!=N)throw new Error(m||"Assertion failed: "+p+" != "+N)}},4869:(Y,L)=>{"use strict";var T=L;function N(x){return 1===x.length?"0"+x:x}function m(x){for(var u="",g=0;g<x.length;g++)u+=N(x[g].toString(16));return u}T.toArray=function(x,u){if(Array.isArray(x))return x.slice();if(!x)return[];var g=[];if("string"!=typeof x){for(var M=0;M<x.length;M++)g[M]=0|x[M];return g}if("hex"===u)for((x=x.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(x="0"+x),M=0;M<x.length;M+=2)g.push(parseInt(x[M]+x[M+1],16));else for(M=0;M<x.length;M++){var A=x.charCodeAt(M),I=A>>8,y=255&A;I?g.push(I,y):g.push(y)}return g},T.zero2=N,T.toHex=m,T.encode=function(u,g){return"hex"===g?m(u):u}},8228:Y=>{"use strict";var L=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;function N(x){if(null==x)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(x)}Y.exports=function(){try{if(!Object.assign)return!1;var x=new String("abc");if(x[5]="de","5"===Object.getOwnPropertyNames(x)[0])return!1;for(var u={},g=0;g<10;g++)u["_"+String.fromCharCode(g)]=g;if("0123456789"!==Object.getOwnPropertyNames(u).map(function(I){return u[I]}).join(""))return!1;var A={};return"abcdefghijklmnopqrst".split("").forEach(function(I){A[I]=I}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},A)).join("")}catch(I){return!1}}()?Object.assign:function(x,u){for(var g,A,M=N(x),I=1;I<arguments.length;I++){for(var y in g=Object(arguments[I]))T.call(g,y)&&(M[y]=g[y]);if(L){A=L(g);for(var h=0;h<A.length;h++)p.call(g,A[h])&&(M[A[h]]=g[A[h]])}}return M}},4673:(Y,L,T)=>{"use strict";var p=T(2016);L.certificate=T(6240);var N=p.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});L.RSAPrivateKey=N;var m=p.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});L.RSAPublicKey=m;var x=p.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(u),this.key("subjectPublicKey").bitstr())});L.PublicKey=x;var u=p.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),g=p.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(u),this.key("subjectPrivateKey").octstr())});L.PrivateKey=g;var M=p.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});L.EncryptedPrivateKey=M;var A=p.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});L.DSAPrivateKey=A,L.DSAparam=p.define("DSAparam",function(){this.int()});var I=p.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(y),this.key("publicKey").optional().explicit(1).bitstr())});L.ECPrivateKey=I;var y=p.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});L.signature=p.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},6240:(Y,L,T)=>{"use strict";var p=T(2016),N=p.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),m=p.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),x=p.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),u=p.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(x),this.key("subjectPublicKey").bitstr())}),g=p.define("RelativeDistinguishedName",function(){this.setof(m)}),M=p.define("RDNSequence",function(){this.seqof(g)}),A=p.define("Name",function(){this.choice({rdnSequence:this.use(M)})}),I=p.define("Validity",function(){this.seq().obj(this.key("notBefore").use(N),this.key("notAfter").use(N))}),y=p.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),h=p.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(x),this.key("issuer").use(A),this.key("validity").use(I),this.key("subject").use(A),this.key("subjectPublicKeyInfo").use(u),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(y).optional())}),C=p.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(h),this.key("signatureAlgorithm").use(x),this.key("signatureValue").bitstr())});Y.exports=C},1553:(Y,L,T)=>{var p=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,N=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,m=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,x=T(2367),u=T(9586),g=T(5859).Buffer;Y.exports=function(M,A){var h,I=M.toString(),y=I.match(p);if(y){var v="aes"+y[1],w=g.from(y[2],"hex"),S=g.from(y[3].replace(/[\r\n]/g,""),"base64"),P=x(A,w.slice(0,8),parseInt(y[1],10)).key,k=[],O=u.createDecipheriv(v,P,w);k.push(O.update(S)),k.push(O.final()),h=g.concat(k)}else{var C=I.match(m);h=g.from(C[2].replace(/[\r\n]/g,""),"base64")}return{tag:I.match(N)[1],data:h}}},1997:(Y,L,T)=>{var p=T(4673),N=T(2562),m=T(1553),x=T(9586),u=T(4161),g=T(5859).Buffer;function M(I){var y;"object"==typeof I&&!g.isBuffer(I)&&(y=I.passphrase,I=I.key),"string"==typeof I&&(I=g.from(I));var w,S,h=m(I,y),C=h.tag,v=h.data;switch(C){case"CERTIFICATE":S=p.certificate.decode(v,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(S||(S=p.PublicKey.decode(v,"der")),w=S.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return p.RSAPublicKey.decode(S.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return S.subjectPrivateKey=S.subjectPublicKey,{type:"ec",data:S};case"1.2.840.10040.4.1":return S.algorithm.params.pub_key=p.DSAparam.decode(S.subjectPublicKey.data,"der"),{type:"dsa",data:S.algorithm.params};default:throw new Error("unknown key id "+w)}case"ENCRYPTED PRIVATE KEY":v=function(I,y){var h=I.algorithm.decrypt.kde.kdeparams.salt,C=parseInt(I.algorithm.decrypt.kde.kdeparams.iters.toString(),10),v=N[I.algorithm.decrypt.cipher.algo.join(".")],w=I.algorithm.decrypt.cipher.iv,S=I.subjectPrivateKey,P=parseInt(v.split("-")[1],10)/8,k=u.pbkdf2Sync(y,h,C,P,"sha1"),O=x.createDecipheriv(v,k,w),V=[];return V.push(O.update(S)),V.push(O.final()),g.concat(V)}(v=p.EncryptedPrivateKey.decode(v,"der"),y);case"PRIVATE KEY":switch(w=(S=p.PrivateKey.decode(v,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return p.RSAPrivateKey.decode(S.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:S.algorithm.curve,privateKey:p.ECPrivateKey.decode(S.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return S.algorithm.params.priv_key=p.DSAparam.decode(S.subjectPrivateKey,"der"),{type:"dsa",params:S.algorithm.params};default:throw new Error("unknown key id "+w)}case"RSA PUBLIC KEY":return p.RSAPublicKey.decode(v,"der");case"RSA PRIVATE KEY":return p.RSAPrivateKey.decode(v,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:p.DSAPrivateKey.decode(v,"der")};case"EC PRIVATE KEY":return{curve:(v=p.ECPrivateKey.decode(v,"der")).parameters.value,privateKey:v.privateKey};default:throw new Error("unknown key type "+C)}}Y.exports=M,M.signature=p.signature},4161:(Y,L,T)=>{L.pbkdf2=T(1898),L.pbkdf2Sync=T(205)},1898:(Y,L,T)=>{var g,h,p=T(5859).Buffer,N=T(9024),m=T(5657),x=T(205),u=T(6933),M=global.crypto&&global.crypto.subtle,A={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},I=[];function C(){return h||(h=global.process&&global.process.nextTick?global.process.nextTick:global.queueMicrotask?global.queueMicrotask:global.setImmediate?global.setImmediate:global.setTimeout)}function v(S,P,k,O,V){return M.importKey("raw",S,{name:"PBKDF2"},!1,["deriveBits"]).then(function(U){return M.deriveBits({name:"PBKDF2",salt:P,iterations:k,hash:{name:V}},U,O<<3)}).then(function(U){return p.from(U)})}Y.exports=function(S,P,k,O,V,U){"function"==typeof V&&(U=V,V=void 0);var B=A[(V=V||"sha1").toLowerCase()];if(B&&"function"==typeof global.Promise){if(N(k,O),S=u(S,m,"Password"),P=u(P,m,"Salt"),"function"!=typeof U)throw new Error("No callback provided to pbkdf2");!function(S,P){S.then(function(k){C()(function(){P(null,k)})},function(k){C()(function(){P(k)})})}(function(S){if(global.process&&!global.process.browser||!M||!M.importKey||!M.deriveBits)return Promise.resolve(!1);if(void 0!==I[S])return I[S];var P=v(g=g||p.alloc(8),g,10,128,S).then(function(){return!0}).catch(function(){return!1});return I[S]=P,P}(B).then(function(H){return H?v(S,P,k,O,B):x(S,P,k,O,V)}),U)}else C()(function(){var H;try{H=x(S,P,k,O,V)}catch(W){return U(W)}U(null,H)})}},5657:Y=>{var L;L=global.process&&global.process.browser?"utf-8":global.process&&global.process.version?parseInt(process.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":"utf-8",Y.exports=L},9024:Y=>{var L=Math.pow(2,30)-1;Y.exports=function(T,p){if("number"!=typeof T)throw new TypeError("Iterations not a number");if(T<0)throw new TypeError("Bad iterations");if("number"!=typeof p)throw new TypeError("Key length not a number");if(p<0||p>L||p!=p)throw new TypeError("Bad key length")}},205:(Y,L,T)=>{var p=T(4464),N=T(5207),m=T(5829),x=T(5859).Buffer,u=T(9024),g=T(5657),M=T(6933),A=x.alloc(128),I={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function y(v,w,S){var P=function(v){return"rmd160"===v||"ripemd160"===v?function(P){return(new N).update(P).digest()}:"md5"===v?p:function(P){return m(v).update(P).digest()}}(v),k="sha512"===v||"sha384"===v?128:64;w.length>k?w=P(w):w.length<k&&(w=x.concat([w,A],k));for(var O=x.allocUnsafe(k+I[v]),V=x.allocUnsafe(k+I[v]),U=0;U<k;U++)O[U]=54^w[U],V[U]=92^w[U];var B=x.allocUnsafe(k+S+4);O.copy(B,0,0,k),this.ipad1=B,this.ipad2=O,this.opad=V,this.alg=v,this.blocksize=k,this.hash=P,this.size=I[v]}y.prototype.run=function(v,w){return v.copy(w,this.blocksize),this.hash(w).copy(this.opad,this.blocksize),this.hash(this.opad)},Y.exports=function(v,w,S,P,k){u(S,P);var O=new y(k=k||"sha1",v=M(v,g,"Password"),(w=M(w,g,"Salt")).length),V=x.allocUnsafe(P),U=x.allocUnsafe(w.length+4);w.copy(U,0,0,w.length);for(var B=0,H=I[k],W=Math.ceil(P/H),te=1;te<=W;te++){U.writeUInt32BE(te,w.length);for(var $=O.run(U,O.ipad1),pe=$,R=1;R<S;R++){pe=O.run(pe,O.ipad2);for(var r=0;r<H;r++)$[r]^=pe[r]}$.copy(V,B),B+=H}return V}},6933:(Y,L,T)=>{var p=T(5859).Buffer;Y.exports=function(N,m,x){if(p.isBuffer(N))return N;if("string"==typeof N)return p.from(N,m);if(ArrayBuffer.isView(N))return p.from(N.buffer);throw new TypeError(x+" must be a string, a Buffer, a typed array or a DataView")}},7537:(Y,L,T)=>{L.publicEncrypt=T(4760),L.privateDecrypt=T(1548),L.privateEncrypt=function(N,m){return L.publicEncrypt(N,m,!0)},L.publicDecrypt=function(N,m){return L.privateDecrypt(N,m,!0)}},444:(Y,L,T)=>{var p=T(2506),N=T(5859).Buffer;function m(x){var u=N.allocUnsafe(4);return u.writeUInt32BE(x,0),u}Y.exports=function(x,u){for(var A,g=N.alloc(0),M=0;g.length<u;)A=m(M++),g=N.concat([g,p("sha1").update(x).update(A).digest()]);return g.slice(0,u)}},6494:function(Y,L,T){!function(p,N){"use strict";function m(R,r){if(!R)throw new Error(r||"Assertion failed")}function x(R,r){R.super_=r;var s=function(){};s.prototype=r.prototype,R.prototype=new s,R.prototype.constructor=R}function u(R,r,s){if(u.isBN(R))return R;this.negative=0,this.words=null,this.length=0,this.red=null,null!==R&&(("le"===r||"be"===r)&&(s=r,r=10),this._init(R||0,r||10,s||"be"))}var g;"object"==typeof p?p.exports=u:N.BN=u,u.BN=u,u.wordSize=26;try{g="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:T(7108).Buffer}catch(R){}function M(R,r){var s=R.charCodeAt(r);return s>=65&&s<=70?s-55:s>=97&&s<=102?s-87:s-48&15}function A(R,r,s){var l=M(R,s);return s-1>=r&&(l|=M(R,s-1)<<4),l}function I(R,r,s,l){for(var a=0,f=Math.min(R.length,s),_=r;_<f;_++){var D=R.charCodeAt(_)-48;a*=l,a+=D>=49?D-49+10:D>=17?D-17+10:D}return a}u.isBN=function(r){return r instanceof u||null!==r&&"object"==typeof r&&r.constructor.wordSize===u.wordSize&&Array.isArray(r.words)},u.max=function(r,s){return r.cmp(s)>0?r:s},u.min=function(r,s){return r.cmp(s)<0?r:s},u.prototype._init=function(r,s,l){if("number"==typeof r)return this._initNumber(r,s,l);if("object"==typeof r)return this._initArray(r,s,l);"hex"===s&&(s=16),m(s===(0|s)&&s>=2&&s<=36);var a=0;"-"===(r=r.toString().replace(/\s+/g,""))[0]&&(a++,this.negative=1),a<r.length&&(16===s?this._parseHex(r,a,l):(this._parseBase(r,s,a),"le"===l&&this._initArray(this.toArray(),s,l)))},u.prototype._initNumber=function(r,s,l){r<0&&(this.negative=1,r=-r),r<67108864?(this.words=[67108863&r],this.length=1):r<4503599627370496?(this.words=[67108863&r,r/67108864&67108863],this.length=2):(m(r<9007199254740992),this.words=[67108863&r,r/67108864&67108863,1],this.length=3),"le"===l&&this._initArray(this.toArray(),s,l)},u.prototype._initArray=function(r,s,l){if(m("number"==typeof r.length),r.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(r.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var f,_,D=0;if("be"===l)for(a=r.length-1,f=0;a>=0;a-=3)this.words[f]|=(_=r[a]|r[a-1]<<8|r[a-2]<<16)<<D&67108863,this.words[f+1]=_>>>26-D&67108863,(D+=24)>=26&&(D-=26,f++);else if("le"===l)for(a=0,f=0;a<r.length;a+=3)this.words[f]|=(_=r[a]|r[a+1]<<8|r[a+2]<<16)<<D&67108863,this.words[f+1]=_>>>26-D&67108863,(D+=24)>=26&&(D-=26,f++);return this.strip()},u.prototype._parseHex=function(r,s,l){this.length=Math.ceil((r.length-s)/6),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var D,f=0,_=0;if("be"===l)for(a=r.length-1;a>=s;a-=2)D=A(r,s,a)<<f,this.words[_]|=67108863&D,f>=18?(f-=18,this.words[_+=1]|=D>>>26):f+=8;else for(a=(r.length-s)%2==0?s+1:s;a<r.length;a+=2)D=A(r,s,a)<<f,this.words[_]|=67108863&D,f>=18?(f-=18,this.words[_+=1]|=D>>>26):f+=8;this.strip()},u.prototype._parseBase=function(r,s,l){this.words=[0],this.length=1;for(var a=0,f=1;f<=67108863;f*=s)a++;a--,f=f/s|0;for(var _=r.length-l,D=_%a,d=Math.min(_,_-D)+l,i=0,b=l;b<d;b+=a)i=I(r,b,b+a,s),this.imuln(f),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i);if(0!==D){var z=1;for(i=I(r,b,r.length,s),b=0;b<D;b++)z*=s;this.imuln(z),this.words[0]+i<67108864?this.words[0]+=i:this._iaddn(i)}this.strip()},u.prototype.copy=function(r){r.words=new Array(this.length);for(var s=0;s<this.length;s++)r.words[s]=this.words[s];r.length=this.length,r.negative=this.negative,r.red=this.red},u.prototype.clone=function(){var r=new u(null);return this.copy(r),r},u.prototype._expand=function(r){for(;this.length<r;)this.words[this.length++]=0;return this},u.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},u.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},u.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],C=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function w(R,r,s){s.negative=r.negative^R.negative;var l=R.length+r.length|0;s.length=l,l=l-1|0;var a=0|R.words[0],f=0|r.words[0],_=a*f,d=_/67108864|0;s.words[0]=67108863&_;for(var i=1;i<l;i++){for(var b=d>>>26,z=67108863&d,q=Math.min(i,r.length-1),J=Math.max(0,i-R.length+1);J<=q;J++)b+=(_=(a=0|R.words[i-J|0])*(f=0|r.words[J])+z)/67108864|0,z=67108863&_;s.words[i]=0|z,d=0|b}return 0!==d?s.words[i]=0|d:s.length--,s.strip()}u.prototype.toString=function(r,s){var l;if(s=0|s||1,16===(r=r||10)||"hex"===r){l="";for(var a=0,f=0,_=0;_<this.length;_++){var D=this.words[_],d=(16777215&(D<<a|f)).toString(16);l=0!=(f=D>>>24-a&16777215)||_!==this.length-1?y[6-d.length]+d+l:d+l,(a+=2)>=26&&(a-=26,_--)}for(0!==f&&(l=f.toString(16)+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}if(r===(0|r)&&r>=2&&r<=36){var i=h[r],b=C[r];l="";var z=this.clone();for(z.negative=0;!z.isZero();){var q=z.modn(b).toString(r);l=(z=z.idivn(b)).isZero()?q+l:y[i-q.length]+q+l}for(this.isZero()&&(l="0"+l);l.length%s!=0;)l="0"+l;return 0!==this.negative&&(l="-"+l),l}m(!1,"Base should be between 2 and 36")},u.prototype.toNumber=function(){var r=this.words[0];return 2===this.length?r+=67108864*this.words[1]:3===this.length&&1===this.words[2]?r+=4503599627370496+67108864*this.words[1]:this.length>2&&m(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-r:r},u.prototype.toJSON=function(){return this.toString(16)},u.prototype.toBuffer=function(r,s){return m(void 0!==g),this.toArrayLike(g,r,s)},u.prototype.toArray=function(r,s){return this.toArrayLike(Array,r,s)},u.prototype.toArrayLike=function(r,s,l){var a=this.byteLength(),f=l||Math.max(1,a);m(a<=f,"byte array longer than desired length"),m(f>0,"Requested array length <= 0"),this.strip();var d,i,_="le"===s,D=new r(f),b=this.clone();if(_){for(i=0;!b.isZero();i++)d=b.andln(255),b.iushrn(8),D[i]=d;for(;i<f;i++)D[i]=0}else{for(i=0;i<f-a;i++)D[i]=0;for(i=0;!b.isZero();i++)d=b.andln(255),b.iushrn(8),D[f-i-1]=d}return D},u.prototype._countBits=Math.clz32?function(r){return 32-Math.clz32(r)}:function(r){var s=r,l=0;return s>=4096&&(l+=13,s>>>=13),s>=64&&(l+=7,s>>>=7),s>=8&&(l+=4,s>>>=4),s>=2&&(l+=2,s>>>=2),l+s},u.prototype._zeroBits=function(r){if(0===r)return 26;var s=r,l=0;return 0==(8191&s)&&(l+=13,s>>>=13),0==(127&s)&&(l+=7,s>>>=7),0==(15&s)&&(l+=4,s>>>=4),0==(3&s)&&(l+=2,s>>>=2),0==(1&s)&&l++,l},u.prototype.bitLength=function(){var s=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+s},u.prototype.zeroBits=function(){if(this.isZero())return 0;for(var r=0,s=0;s<this.length;s++){var l=this._zeroBits(this.words[s]);if(r+=l,26!==l)break}return r},u.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},u.prototype.toTwos=function(r){return 0!==this.negative?this.abs().inotn(r).iaddn(1):this.clone()},u.prototype.fromTwos=function(r){return this.testn(r-1)?this.notn(r).iaddn(1).ineg():this.clone()},u.prototype.isNeg=function(){return 0!==this.negative},u.prototype.neg=function(){return this.clone().ineg()},u.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},u.prototype.iuor=function(r){for(;this.length<r.length;)this.words[this.length++]=0;for(var s=0;s<r.length;s++)this.words[s]=this.words[s]|r.words[s];return this.strip()},u.prototype.ior=function(r){return m(0==(this.negative|r.negative)),this.iuor(r)},u.prototype.or=function(r){return this.length>r.length?this.clone().ior(r):r.clone().ior(this)},u.prototype.uor=function(r){return this.length>r.length?this.clone().iuor(r):r.clone().iuor(this)},u.prototype.iuand=function(r){var s;s=this.length>r.length?r:this;for(var l=0;l<s.length;l++)this.words[l]=this.words[l]&r.words[l];return this.length=s.length,this.strip()},u.prototype.iand=function(r){return m(0==(this.negative|r.negative)),this.iuand(r)},u.prototype.and=function(r){return this.length>r.length?this.clone().iand(r):r.clone().iand(this)},u.prototype.uand=function(r){return this.length>r.length?this.clone().iuand(r):r.clone().iuand(this)},u.prototype.iuxor=function(r){var s,l;this.length>r.length?(s=this,l=r):(s=r,l=this);for(var a=0;a<l.length;a++)this.words[a]=s.words[a]^l.words[a];if(this!==s)for(;a<s.length;a++)this.words[a]=s.words[a];return this.length=s.length,this.strip()},u.prototype.ixor=function(r){return m(0==(this.negative|r.negative)),this.iuxor(r)},u.prototype.xor=function(r){return this.length>r.length?this.clone().ixor(r):r.clone().ixor(this)},u.prototype.uxor=function(r){return this.length>r.length?this.clone().iuxor(r):r.clone().iuxor(this)},u.prototype.inotn=function(r){m("number"==typeof r&&r>=0);var s=0|Math.ceil(r/26),l=r%26;this._expand(s),l>0&&s--;for(var a=0;a<s;a++)this.words[a]=67108863&~this.words[a];return l>0&&(this.words[a]=~this.words[a]&67108863>>26-l),this.strip()},u.prototype.notn=function(r){return this.clone().inotn(r)},u.prototype.setn=function(r,s){m("number"==typeof r&&r>=0);var l=r/26|0,a=r%26;return this._expand(l+1),this.words[l]=s?this.words[l]|1<<a:this.words[l]&~(1<<a),this.strip()},u.prototype.iadd=function(r){var s,l,a;if(0!==this.negative&&0===r.negative)return this.negative=0,s=this.isub(r),this.negative^=1,this._normSign();if(0===this.negative&&0!==r.negative)return r.negative=0,s=this.isub(r),r.negative=1,s._normSign();this.length>r.length?(l=this,a=r):(l=r,a=this);for(var f=0,_=0;_<a.length;_++)this.words[_]=67108863&(s=(0|l.words[_])+(0|a.words[_])+f),f=s>>>26;for(;0!==f&&_<l.length;_++)this.words[_]=67108863&(s=(0|l.words[_])+f),f=s>>>26;if(this.length=l.length,0!==f)this.words[this.length]=f,this.length++;else if(l!==this)for(;_<l.length;_++)this.words[_]=l.words[_];return this},u.prototype.add=function(r){var s;return 0!==r.negative&&0===this.negative?(r.negative=0,s=this.sub(r),r.negative^=1,s):0===r.negative&&0!==this.negative?(this.negative=0,s=r.sub(this),this.negative=1,s):this.length>r.length?this.clone().iadd(r):r.clone().iadd(this)},u.prototype.isub=function(r){if(0!==r.negative){r.negative=0;var s=this.iadd(r);return r.negative=1,s._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(r),this.negative=1,this._normSign();var a,f,l=this.cmp(r);if(0===l)return this.negative=0,this.length=1,this.words[0]=0,this;l>0?(a=this,f=r):(a=r,f=this);for(var _=0,D=0;D<f.length;D++)_=(s=(0|a.words[D])-(0|f.words[D])+_)>>26,this.words[D]=67108863&s;for(;0!==_&&D<a.length;D++)_=(s=(0|a.words[D])+_)>>26,this.words[D]=67108863&s;if(0===_&&D<a.length&&a!==this)for(;D<a.length;D++)this.words[D]=a.words[D];return this.length=Math.max(this.length,D),a!==this&&(this.negative=1),this.strip()},u.prototype.sub=function(r){return this.clone().isub(r)};var S=function(r,s,l){var d,i,b,a=r.words,f=s.words,_=l.words,D=0,z=0|a[0],q=8191&z,J=z>>>13,ge=0|a[1],me=8191&ge,le=ge>>>13,fe=0|a[2],ae=8191&fe,de=fe>>>13,xe=0|a[3],Ce=8191&xe,oe=xe>>>13,we=0|a[4],ye=8191&we,re=we>>>13,ee=0|a[5],Z=8191&ee,ue=ee>>>13,Re=0|a[6],Te=8191&Re,Ee=Re>>>13,$e=0|a[7],Ne=8191&$e,_e=$e>>>13,Be=0|a[8],Ae=8191&Be,Le=Be>>>13,Ct=0|a[9],He=8191&Ct,We=Ct>>>13,Vt=0|f[0],qe=8191&Vt,ct=Vt>>>13,Mt=0|f[1],it=8191&Mt,at=Mt>>>13,Dn=0|f[2],ot=8191&Dn,Je=Dn>>>13,En=0|f[3],Ge=8191&En,dt=En>>>13,Pn=0|f[4],ut=8191&Pn,Ve=Pn>>>13,On=0|f[5],Ke=8191&On,st=On>>>13,qn=0|f[6],ft=8191&qn,ze=qn>>>13,sn=0|f[7],ht=8191&sn,tt=sn>>>13,Qt=0|f[8],et=8191&Qt,Xe=Qt>>>13,kn=0|f[9],Ye=8191&kn,lt=kn>>>13;l.negative=r.negative^s.negative,l.length=19;var un=(D+(d=Math.imul(q,qe))|0)+((8191&(i=(i=Math.imul(q,ct))+Math.imul(J,qe)|0))<<13)|0;D=((b=Math.imul(J,ct))+(i>>>13)|0)+(un>>>26)|0,un&=67108863,d=Math.imul(me,qe),i=(i=Math.imul(me,ct))+Math.imul(le,qe)|0,b=Math.imul(le,ct);var Ht=(D+(d=d+Math.imul(q,it)|0)|0)+((8191&(i=(i=i+Math.imul(q,at)|0)+Math.imul(J,it)|0))<<13)|0;D=((b=b+Math.imul(J,at)|0)+(i>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,d=Math.imul(ae,qe),i=(i=Math.imul(ae,ct))+Math.imul(de,qe)|0,b=Math.imul(de,ct),d=d+Math.imul(me,it)|0,i=(i=i+Math.imul(me,at)|0)+Math.imul(le,it)|0,b=b+Math.imul(le,at)|0;var jt=(D+(d=d+Math.imul(q,ot)|0)|0)+((8191&(i=(i=i+Math.imul(q,Je)|0)+Math.imul(J,ot)|0))<<13)|0;D=((b=b+Math.imul(J,Je)|0)+(i>>>13)|0)+(jt>>>26)|0,jt&=67108863,d=Math.imul(Ce,qe),i=(i=Math.imul(Ce,ct))+Math.imul(oe,qe)|0,b=Math.imul(oe,ct),d=d+Math.imul(ae,it)|0,i=(i=i+Math.imul(ae,at)|0)+Math.imul(de,it)|0,b=b+Math.imul(de,at)|0,d=d+Math.imul(me,ot)|0,i=(i=i+Math.imul(me,Je)|0)+Math.imul(le,ot)|0,b=b+Math.imul(le,Je)|0;var bn=(D+(d=d+Math.imul(q,Ge)|0)|0)+((8191&(i=(i=i+Math.imul(q,dt)|0)+Math.imul(J,Ge)|0))<<13)|0;D=((b=b+Math.imul(J,dt)|0)+(i>>>13)|0)+(bn>>>26)|0,bn&=67108863,d=Math.imul(ye,qe),i=(i=Math.imul(ye,ct))+Math.imul(re,qe)|0,b=Math.imul(re,ct),d=d+Math.imul(Ce,it)|0,i=(i=i+Math.imul(Ce,at)|0)+Math.imul(oe,it)|0,b=b+Math.imul(oe,at)|0,d=d+Math.imul(ae,ot)|0,i=(i=i+Math.imul(ae,Je)|0)+Math.imul(de,ot)|0,b=b+Math.imul(de,Je)|0,d=d+Math.imul(me,Ge)|0,i=(i=i+Math.imul(me,dt)|0)+Math.imul(le,Ge)|0,b=b+Math.imul(le,dt)|0;var dn=(D+(d=d+Math.imul(q,ut)|0)|0)+((8191&(i=(i=i+Math.imul(q,Ve)|0)+Math.imul(J,ut)|0))<<13)|0;D=((b=b+Math.imul(J,Ve)|0)+(i>>>13)|0)+(dn>>>26)|0,dn&=67108863,d=Math.imul(Z,qe),i=(i=Math.imul(Z,ct))+Math.imul(ue,qe)|0,b=Math.imul(ue,ct),d=d+Math.imul(ye,it)|0,i=(i=i+Math.imul(ye,at)|0)+Math.imul(re,it)|0,b=b+Math.imul(re,at)|0,d=d+Math.imul(Ce,ot)|0,i=(i=i+Math.imul(Ce,Je)|0)+Math.imul(oe,ot)|0,b=b+Math.imul(oe,Je)|0,d=d+Math.imul(ae,Ge)|0,i=(i=i+Math.imul(ae,dt)|0)+Math.imul(de,Ge)|0,b=b+Math.imul(de,dt)|0,d=d+Math.imul(me,ut)|0,i=(i=i+Math.imul(me,Ve)|0)+Math.imul(le,ut)|0,b=b+Math.imul(le,Ve)|0;var pn=(D+(d=d+Math.imul(q,Ke)|0)|0)+((8191&(i=(i=i+Math.imul(q,st)|0)+Math.imul(J,Ke)|0))<<13)|0;D=((b=b+Math.imul(J,st)|0)+(i>>>13)|0)+(pn>>>26)|0,pn&=67108863,d=Math.imul(Te,qe),i=(i=Math.imul(Te,ct))+Math.imul(Ee,qe)|0,b=Math.imul(Ee,ct),d=d+Math.imul(Z,it)|0,i=(i=i+Math.imul(Z,at)|0)+Math.imul(ue,it)|0,b=b+Math.imul(ue,at)|0,d=d+Math.imul(ye,ot)|0,i=(i=i+Math.imul(ye,Je)|0)+Math.imul(re,ot)|0,b=b+Math.imul(re,Je)|0,d=d+Math.imul(Ce,Ge)|0,i=(i=i+Math.imul(Ce,dt)|0)+Math.imul(oe,Ge)|0,b=b+Math.imul(oe,dt)|0,d=d+Math.imul(ae,ut)|0,i=(i=i+Math.imul(ae,Ve)|0)+Math.imul(de,ut)|0,b=b+Math.imul(de,Ve)|0,d=d+Math.imul(me,Ke)|0,i=(i=i+Math.imul(me,st)|0)+Math.imul(le,Ke)|0,b=b+Math.imul(le,st)|0;var In=(D+(d=d+Math.imul(q,ft)|0)|0)+((8191&(i=(i=i+Math.imul(q,ze)|0)+Math.imul(J,ft)|0))<<13)|0;D=((b=b+Math.imul(J,ze)|0)+(i>>>13)|0)+(In>>>26)|0,In&=67108863,d=Math.imul(Ne,qe),i=(i=Math.imul(Ne,ct))+Math.imul(_e,qe)|0,b=Math.imul(_e,ct),d=d+Math.imul(Te,it)|0,i=(i=i+Math.imul(Te,at)|0)+Math.imul(Ee,it)|0,b=b+Math.imul(Ee,at)|0,d=d+Math.imul(Z,ot)|0,i=(i=i+Math.imul(Z,Je)|0)+Math.imul(ue,ot)|0,b=b+Math.imul(ue,Je)|0,d=d+Math.imul(ye,Ge)|0,i=(i=i+Math.imul(ye,dt)|0)+Math.imul(re,Ge)|0,b=b+Math.imul(re,dt)|0,d=d+Math.imul(Ce,ut)|0,i=(i=i+Math.imul(Ce,Ve)|0)+Math.imul(oe,ut)|0,b=b+Math.imul(oe,Ve)|0,d=d+Math.imul(ae,Ke)|0,i=(i=i+Math.imul(ae,st)|0)+Math.imul(de,Ke)|0,b=b+Math.imul(de,st)|0,d=d+Math.imul(me,ft)|0,i=(i=i+Math.imul(me,ze)|0)+Math.imul(le,ft)|0,b=b+Math.imul(le,ze)|0;var rn=(D+(d=d+Math.imul(q,ht)|0)|0)+((8191&(i=(i=i+Math.imul(q,tt)|0)+Math.imul(J,ht)|0))<<13)|0;D=((b=b+Math.imul(J,tt)|0)+(i>>>13)|0)+(rn>>>26)|0,rn&=67108863,d=Math.imul(Ae,qe),i=(i=Math.imul(Ae,ct))+Math.imul(Le,qe)|0,b=Math.imul(Le,ct),d=d+Math.imul(Ne,it)|0,i=(i=i+Math.imul(Ne,at)|0)+Math.imul(_e,it)|0,b=b+Math.imul(_e,at)|0,d=d+Math.imul(Te,ot)|0,i=(i=i+Math.imul(Te,Je)|0)+Math.imul(Ee,ot)|0,b=b+Math.imul(Ee,Je)|0,d=d+Math.imul(Z,Ge)|0,i=(i=i+Math.imul(Z,dt)|0)+Math.imul(ue,Ge)|0,b=b+Math.imul(ue,dt)|0,d=d+Math.imul(ye,ut)|0,i=(i=i+Math.imul(ye,Ve)|0)+Math.imul(re,ut)|0,b=b+Math.imul(re,Ve)|0,d=d+Math.imul(Ce,Ke)|0,i=(i=i+Math.imul(Ce,st)|0)+Math.imul(oe,Ke)|0,b=b+Math.imul(oe,st)|0,d=d+Math.imul(ae,ft)|0,i=(i=i+Math.imul(ae,ze)|0)+Math.imul(de,ft)|0,b=b+Math.imul(de,ze)|0,d=d+Math.imul(me,ht)|0,i=(i=i+Math.imul(me,tt)|0)+Math.imul(le,ht)|0,b=b+Math.imul(le,tt)|0;var Cn=(D+(d=d+Math.imul(q,et)|0)|0)+((8191&(i=(i=i+Math.imul(q,Xe)|0)+Math.imul(J,et)|0))<<13)|0;D=((b=b+Math.imul(J,Xe)|0)+(i>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,d=Math.imul(He,qe),i=(i=Math.imul(He,ct))+Math.imul(We,qe)|0,b=Math.imul(We,ct),d=d+Math.imul(Ae,it)|0,i=(i=i+Math.imul(Ae,at)|0)+Math.imul(Le,it)|0,b=b+Math.imul(Le,at)|0,d=d+Math.imul(Ne,ot)|0,i=(i=i+Math.imul(Ne,Je)|0)+Math.imul(_e,ot)|0,b=b+Math.imul(_e,Je)|0,d=d+Math.imul(Te,Ge)|0,i=(i=i+Math.imul(Te,dt)|0)+Math.imul(Ee,Ge)|0,b=b+Math.imul(Ee,dt)|0,d=d+Math.imul(Z,ut)|0,i=(i=i+Math.imul(Z,Ve)|0)+Math.imul(ue,ut)|0,b=b+Math.imul(ue,Ve)|0,d=d+Math.imul(ye,Ke)|0,i=(i=i+Math.imul(ye,st)|0)+Math.imul(re,Ke)|0,b=b+Math.imul(re,st)|0,d=d+Math.imul(Ce,ft)|0,i=(i=i+Math.imul(Ce,ze)|0)+Math.imul(oe,ft)|0,b=b+Math.imul(oe,ze)|0,d=d+Math.imul(ae,ht)|0,i=(i=i+Math.imul(ae,tt)|0)+Math.imul(de,ht)|0,b=b+Math.imul(de,tt)|0,d=d+Math.imul(me,et)|0,i=(i=i+Math.imul(me,Xe)|0)+Math.imul(le,et)|0,b=b+Math.imul(le,Xe)|0;var Kt=(D+(d=d+Math.imul(q,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(q,lt)|0)+Math.imul(J,Ye)|0))<<13)|0;D=((b=b+Math.imul(J,lt)|0)+(i>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,d=Math.imul(He,it),i=(i=Math.imul(He,at))+Math.imul(We,it)|0,b=Math.imul(We,at),d=d+Math.imul(Ae,ot)|0,i=(i=i+Math.imul(Ae,Je)|0)+Math.imul(Le,ot)|0,b=b+Math.imul(Le,Je)|0,d=d+Math.imul(Ne,Ge)|0,i=(i=i+Math.imul(Ne,dt)|0)+Math.imul(_e,Ge)|0,b=b+Math.imul(_e,dt)|0,d=d+Math.imul(Te,ut)|0,i=(i=i+Math.imul(Te,Ve)|0)+Math.imul(Ee,ut)|0,b=b+Math.imul(Ee,Ve)|0,d=d+Math.imul(Z,Ke)|0,i=(i=i+Math.imul(Z,st)|0)+Math.imul(ue,Ke)|0,b=b+Math.imul(ue,st)|0,d=d+Math.imul(ye,ft)|0,i=(i=i+Math.imul(ye,ze)|0)+Math.imul(re,ft)|0,b=b+Math.imul(re,ze)|0,d=d+Math.imul(Ce,ht)|0,i=(i=i+Math.imul(Ce,tt)|0)+Math.imul(oe,ht)|0,b=b+Math.imul(oe,tt)|0,d=d+Math.imul(ae,et)|0,i=(i=i+Math.imul(ae,Xe)|0)+Math.imul(de,et)|0,b=b+Math.imul(de,Xe)|0;var Nt=(D+(d=d+Math.imul(me,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(me,lt)|0)+Math.imul(le,Ye)|0))<<13)|0;D=((b=b+Math.imul(le,lt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,d=Math.imul(He,ot),i=(i=Math.imul(He,Je))+Math.imul(We,ot)|0,b=Math.imul(We,Je),d=d+Math.imul(Ae,Ge)|0,i=(i=i+Math.imul(Ae,dt)|0)+Math.imul(Le,Ge)|0,b=b+Math.imul(Le,dt)|0,d=d+Math.imul(Ne,ut)|0,i=(i=i+Math.imul(Ne,Ve)|0)+Math.imul(_e,ut)|0,b=b+Math.imul(_e,Ve)|0,d=d+Math.imul(Te,Ke)|0,i=(i=i+Math.imul(Te,st)|0)+Math.imul(Ee,Ke)|0,b=b+Math.imul(Ee,st)|0,d=d+Math.imul(Z,ft)|0,i=(i=i+Math.imul(Z,ze)|0)+Math.imul(ue,ft)|0,b=b+Math.imul(ue,ze)|0,d=d+Math.imul(ye,ht)|0,i=(i=i+Math.imul(ye,tt)|0)+Math.imul(re,ht)|0,b=b+Math.imul(re,tt)|0,d=d+Math.imul(Ce,et)|0,i=(i=i+Math.imul(Ce,Xe)|0)+Math.imul(oe,et)|0,b=b+Math.imul(oe,Xe)|0;var xn=(D+(d=d+Math.imul(ae,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(ae,lt)|0)+Math.imul(de,Ye)|0))<<13)|0;D=((b=b+Math.imul(de,lt)|0)+(i>>>13)|0)+(xn>>>26)|0,xn&=67108863,d=Math.imul(He,Ge),i=(i=Math.imul(He,dt))+Math.imul(We,Ge)|0,b=Math.imul(We,dt),d=d+Math.imul(Ae,ut)|0,i=(i=i+Math.imul(Ae,Ve)|0)+Math.imul(Le,ut)|0,b=b+Math.imul(Le,Ve)|0,d=d+Math.imul(Ne,Ke)|0,i=(i=i+Math.imul(Ne,st)|0)+Math.imul(_e,Ke)|0,b=b+Math.imul(_e,st)|0,d=d+Math.imul(Te,ft)|0,i=(i=i+Math.imul(Te,ze)|0)+Math.imul(Ee,ft)|0,b=b+Math.imul(Ee,ze)|0,d=d+Math.imul(Z,ht)|0,i=(i=i+Math.imul(Z,tt)|0)+Math.imul(ue,ht)|0,b=b+Math.imul(ue,tt)|0,d=d+Math.imul(ye,et)|0,i=(i=i+Math.imul(ye,Xe)|0)+Math.imul(re,et)|0,b=b+Math.imul(re,Xe)|0;var wn=(D+(d=d+Math.imul(Ce,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(Ce,lt)|0)+Math.imul(oe,Ye)|0))<<13)|0;D=((b=b+Math.imul(oe,lt)|0)+(i>>>13)|0)+(wn>>>26)|0,wn&=67108863,d=Math.imul(He,ut),i=(i=Math.imul(He,Ve))+Math.imul(We,ut)|0,b=Math.imul(We,Ve),d=d+Math.imul(Ae,Ke)|0,i=(i=i+Math.imul(Ae,st)|0)+Math.imul(Le,Ke)|0,b=b+Math.imul(Le,st)|0,d=d+Math.imul(Ne,ft)|0,i=(i=i+Math.imul(Ne,ze)|0)+Math.imul(_e,ft)|0,b=b+Math.imul(_e,ze)|0,d=d+Math.imul(Te,ht)|0,i=(i=i+Math.imul(Te,tt)|0)+Math.imul(Ee,ht)|0,b=b+Math.imul(Ee,tt)|0,d=d+Math.imul(Z,et)|0,i=(i=i+Math.imul(Z,Xe)|0)+Math.imul(ue,et)|0,b=b+Math.imul(ue,Xe)|0;var Mn=(D+(d=d+Math.imul(ye,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(ye,lt)|0)+Math.imul(re,Ye)|0))<<13)|0;D=((b=b+Math.imul(re,lt)|0)+(i>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,d=Math.imul(He,Ke),i=(i=Math.imul(He,st))+Math.imul(We,Ke)|0,b=Math.imul(We,st),d=d+Math.imul(Ae,ft)|0,i=(i=i+Math.imul(Ae,ze)|0)+Math.imul(Le,ft)|0,b=b+Math.imul(Le,ze)|0,d=d+Math.imul(Ne,ht)|0,i=(i=i+Math.imul(Ne,tt)|0)+Math.imul(_e,ht)|0,b=b+Math.imul(_e,tt)|0,d=d+Math.imul(Te,et)|0,i=(i=i+Math.imul(Te,Xe)|0)+Math.imul(Ee,et)|0,b=b+Math.imul(Ee,Xe)|0;var xt=(D+(d=d+Math.imul(Z,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(Z,lt)|0)+Math.imul(ue,Ye)|0))<<13)|0;D=((b=b+Math.imul(ue,lt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,d=Math.imul(He,ft),i=(i=Math.imul(He,ze))+Math.imul(We,ft)|0,b=Math.imul(We,ze),d=d+Math.imul(Ae,ht)|0,i=(i=i+Math.imul(Ae,tt)|0)+Math.imul(Le,ht)|0,b=b+Math.imul(Le,tt)|0,d=d+Math.imul(Ne,et)|0,i=(i=i+Math.imul(Ne,Xe)|0)+Math.imul(_e,et)|0,b=b+Math.imul(_e,Xe)|0;var Rn=(D+(d=d+Math.imul(Te,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(Te,lt)|0)+Math.imul(Ee,Ye)|0))<<13)|0;D=((b=b+Math.imul(Ee,lt)|0)+(i>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,d=Math.imul(He,ht),i=(i=Math.imul(He,tt))+Math.imul(We,ht)|0,b=Math.imul(We,tt),d=d+Math.imul(Ae,et)|0,i=(i=i+Math.imul(Ae,Xe)|0)+Math.imul(Le,et)|0,b=b+Math.imul(Le,Xe)|0;var Zt=(D+(d=d+Math.imul(Ne,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(Ne,lt)|0)+Math.imul(_e,Ye)|0))<<13)|0;D=((b=b+Math.imul(_e,lt)|0)+(i>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,d=Math.imul(He,et),i=(i=Math.imul(He,Xe))+Math.imul(We,et)|0,b=Math.imul(We,Xe);var tn=(D+(d=d+Math.imul(Ae,Ye)|0)|0)+((8191&(i=(i=i+Math.imul(Ae,lt)|0)+Math.imul(Le,Ye)|0))<<13)|0;D=((b=b+Math.imul(Le,lt)|0)+(i>>>13)|0)+(tn>>>26)|0,tn&=67108863;var _n=(D+(d=Math.imul(He,Ye))|0)+((8191&(i=(i=Math.imul(He,lt))+Math.imul(We,Ye)|0))<<13)|0;return D=((b=Math.imul(We,lt))+(i>>>13)|0)+(_n>>>26)|0,_n&=67108863,_[0]=un,_[1]=Ht,_[2]=jt,_[3]=bn,_[4]=dn,_[5]=pn,_[6]=In,_[7]=rn,_[8]=Cn,_[9]=Kt,_[10]=Nt,_[11]=xn,_[12]=wn,_[13]=Mn,_[14]=xt,_[15]=Rn,_[16]=Zt,_[17]=tn,_[18]=_n,0!==D&&(_[19]=D,l.length++),l};function k(R,r,s){return(new O).mulp(R,r,s)}function O(R,r){this.x=R,this.y=r}Math.imul||(S=w),u.prototype.mulTo=function(r,s){var a=this.length+r.length;return 10===this.length&&10===r.length?S(this,r,s):a<63?w(this,r,s):a<1024?function(R,r,s){s.negative=r.negative^R.negative,s.length=R.length+r.length;for(var l=0,a=0,f=0;f<s.length-1;f++){var _=a;a=0;for(var D=67108863&l,d=Math.min(f,r.length-1),i=Math.max(0,f-R.length+1);i<=d;i++){var J=(0|R.words[f-i])*(0|r.words[i]),ge=67108863&J;D=67108863&(ge=ge+D|0),a+=(_=(_=_+(J/67108864|0)|0)+(ge>>>26)|0)>>>26,_&=67108863}s.words[f]=D,l=_,_=a}return 0!==l?s.words[f]=l:s.length--,s.strip()}(this,r,s):k(this,r,s)},O.prototype.makeRBT=function(r){for(var s=new Array(r),l=u.prototype._countBits(r)-1,a=0;a<r;a++)s[a]=this.revBin(a,l,r);return s},O.prototype.revBin=function(r,s,l){if(0===r||r===l-1)return r;for(var a=0,f=0;f<s;f++)a|=(1&r)<<s-f-1,r>>=1;return a},O.prototype.permute=function(r,s,l,a,f,_){for(var D=0;D<_;D++)a[D]=s[r[D]],f[D]=l[r[D]]},O.prototype.transform=function(r,s,l,a,f,_){this.permute(_,r,s,l,a,f);for(var D=1;D<f;D<<=1)for(var d=D<<1,i=Math.cos(2*Math.PI/d),b=Math.sin(2*Math.PI/d),z=0;z<f;z+=d)for(var q=i,J=b,ge=0;ge<D;ge++){var me=l[z+ge],le=a[z+ge],fe=l[z+ge+D],ae=a[z+ge+D],de=q*fe-J*ae;ae=q*ae+J*fe,l[z+ge]=me+(fe=de),a[z+ge]=le+ae,l[z+ge+D]=me-fe,a[z+ge+D]=le-ae,ge!==d&&(de=i*q-b*J,J=i*J+b*q,q=de)}},O.prototype.guessLen13b=function(r,s){var l=1|Math.max(s,r),a=1&l,f=0;for(l=l/2|0;l;l>>>=1)f++;return 1<<f+1+a},O.prototype.conjugate=function(r,s,l){if(!(l<=1))for(var a=0;a<l/2;a++){var f=r[a];r[a]=r[l-a-1],r[l-a-1]=f,f=s[a],s[a]=-s[l-a-1],s[l-a-1]=-f}},O.prototype.normalize13b=function(r,s){for(var l=0,a=0;a<s/2;a++){var f=8192*Math.round(r[2*a+1]/s)+Math.round(r[2*a]/s)+l;r[a]=67108863&f,l=f<67108864?0:f/67108864|0}return r},O.prototype.convert13b=function(r,s,l,a){for(var f=0,_=0;_<s;_++)l[2*_]=8191&(f+=0|r[_]),l[2*_+1]=8191&(f>>>=13),f>>>=13;for(_=2*s;_<a;++_)l[_]=0;m(0===f),m(0==(-8192&f))},O.prototype.stub=function(r){for(var s=new Array(r),l=0;l<r;l++)s[l]=0;return s},O.prototype.mulp=function(r,s,l){var a=2*this.guessLen13b(r.length,s.length),f=this.makeRBT(a),_=this.stub(a),D=new Array(a),d=new Array(a),i=new Array(a),b=new Array(a),z=new Array(a),q=new Array(a),J=l.words;J.length=a,this.convert13b(r.words,r.length,D,a),this.convert13b(s.words,s.length,b,a),this.transform(D,_,d,i,a,f),this.transform(b,_,z,q,a,f);for(var ge=0;ge<a;ge++){var me=d[ge]*z[ge]-i[ge]*q[ge];i[ge]=d[ge]*q[ge]+i[ge]*z[ge],d[ge]=me}return this.conjugate(d,i,a),this.transform(d,i,J,_,a,f),this.conjugate(J,_,a),this.normalize13b(J,a),l.negative=r.negative^s.negative,l.length=r.length+s.length,l.strip()},u.prototype.mul=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),this.mulTo(r,s)},u.prototype.mulf=function(r){var s=new u(null);return s.words=new Array(this.length+r.length),k(this,r,s)},u.prototype.imul=function(r){return this.clone().mulTo(r,this)},u.prototype.imuln=function(r){m("number"==typeof r),m(r<67108864);for(var s=0,l=0;l<this.length;l++){var a=(0|this.words[l])*r,f=(67108863&a)+(67108863&s);s>>=26,s+=a/67108864|0,s+=f>>>26,this.words[l]=67108863&f}return 0!==s&&(this.words[l]=s,this.length++),this},u.prototype.muln=function(r){return this.clone().imuln(r)},u.prototype.sqr=function(){return this.mul(this)},u.prototype.isqr=function(){return this.imul(this.clone())},u.prototype.pow=function(r){var s=function(R){for(var r=new Array(R.bitLength()),s=0;s<r.length;s++){var a=s%26;r[s]=(R.words[s/26|0]&1<<a)>>>a}return r}(r);if(0===s.length)return new u(1);for(var l=this,a=0;a<s.length&&0===s[a];a++,l=l.sqr());if(++a<s.length)for(var f=l.sqr();a<s.length;a++,f=f.sqr())0!==s[a]&&(l=l.mul(f));return l},u.prototype.iushln=function(r){m("number"==typeof r&&r>=0);var f,s=r%26,l=(r-s)/26,a=67108863>>>26-s<<26-s;if(0!==s){var _=0;for(f=0;f<this.length;f++){var D=this.words[f]&a;this.words[f]=(0|this.words[f])-D<<s|_,_=D>>>26-s}_&&(this.words[f]=_,this.length++)}if(0!==l){for(f=this.length-1;f>=0;f--)this.words[f+l]=this.words[f];for(f=0;f<l;f++)this.words[f]=0;this.length+=l}return this.strip()},u.prototype.ishln=function(r){return m(0===this.negative),this.iushln(r)},u.prototype.iushrn=function(r,s,l){var a;m("number"==typeof r&&r>=0),a=s?(s-s%26)/26:0;var f=r%26,_=Math.min((r-f)/26,this.length),D=67108863^67108863>>>f<<f,d=l;if(a-=_,a=Math.max(0,a),d){for(var i=0;i<_;i++)d.words[i]=this.words[i];d.length=_}if(0!==_)if(this.length>_)for(this.length-=_,i=0;i<this.length;i++)this.words[i]=this.words[i+_];else this.words[0]=0,this.length=1;var b=0;for(i=this.length-1;i>=0&&(0!==b||i>=a);i--){var z=0|this.words[i];this.words[i]=b<<26-f|z>>>f,b=z&D}return d&&0!==b&&(d.words[d.length++]=b),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},u.prototype.ishrn=function(r,s,l){return m(0===this.negative),this.iushrn(r,s,l)},u.prototype.shln=function(r){return this.clone().ishln(r)},u.prototype.ushln=function(r){return this.clone().iushln(r)},u.prototype.shrn=function(r){return this.clone().ishrn(r)},u.prototype.ushrn=function(r){return this.clone().iushrn(r)},u.prototype.testn=function(r){m("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return!(this.length<=l||!(this.words[l]&1<<s))},u.prototype.imaskn=function(r){m("number"==typeof r&&r>=0);var s=r%26,l=(r-s)/26;return m(0===this.negative,"imaskn works only with positive numbers"),this.length<=l?this:(0!==s&&l++,this.length=Math.min(l,this.length),0!==s&&(this.words[this.length-1]&=67108863^67108863>>>s<<s),this.strip())},u.prototype.maskn=function(r){return this.clone().imaskn(r)},u.prototype.iaddn=function(r){return m("number"==typeof r),m(r<67108864),r<0?this.isubn(-r):0!==this.negative?1===this.length&&(0|this.words[0])<r?(this.words[0]=r-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(r),this.negative=1,this):this._iaddn(r)},u.prototype._iaddn=function(r){this.words[0]+=r;for(var s=0;s<this.length&&this.words[s]>=67108864;s++)this.words[s]-=67108864,s===this.length-1?this.words[s+1]=1:this.words[s+1]++;return this.length=Math.max(this.length,s+1),this},u.prototype.isubn=function(r){if(m("number"==typeof r),m(r<67108864),r<0)return this.iaddn(-r);if(0!==this.negative)return this.negative=0,this.iaddn(r),this.negative=1,this;if(this.words[0]-=r,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var s=0;s<this.length&&this.words[s]<0;s++)this.words[s]+=67108864,this.words[s+1]-=1;return this.strip()},u.prototype.addn=function(r){return this.clone().iaddn(r)},u.prototype.subn=function(r){return this.clone().isubn(r)},u.prototype.iabs=function(){return this.negative=0,this},u.prototype.abs=function(){return this.clone().iabs()},u.prototype._ishlnsubmul=function(r,s,l){var f;this._expand(r.length+l);var _,D=0;for(f=0;f<r.length;f++){_=(0|this.words[f+l])+D;var d=(0|r.words[f])*s;D=((_-=67108863&d)>>26)-(d/67108864|0),this.words[f+l]=67108863&_}for(;f<this.length-l;f++)D=(_=(0|this.words[f+l])+D)>>26,this.words[f+l]=67108863&_;if(0===D)return this.strip();for(m(-1===D),D=0,f=0;f<this.length;f++)D=(_=-(0|this.words[f])+D)>>26,this.words[f]=67108863&_;return this.negative=1,this.strip()},u.prototype._wordDiv=function(r,s){var l,a=this.clone(),f=r,_=0|f.words[f.length-1];0!=(l=26-this._countBits(_))&&(f=f.ushln(l),a.iushln(l),_=0|f.words[f.length-1]);var i,d=a.length-f.length;if("mod"!==s){(i=new u(null)).length=d+1,i.words=new Array(i.length);for(var b=0;b<i.length;b++)i.words[b]=0}var z=a.clone()._ishlnsubmul(f,1,d);0===z.negative&&(a=z,i&&(i.words[d]=1));for(var q=d-1;q>=0;q--){var J=67108864*(0|a.words[f.length+q])+(0|a.words[f.length+q-1]);for(J=Math.min(J/_|0,67108863),a._ishlnsubmul(f,J,q);0!==a.negative;)J--,a.negative=0,a._ishlnsubmul(f,1,q),a.isZero()||(a.negative^=1);i&&(i.words[q]=J)}return i&&i.strip(),a.strip(),"div"!==s&&0!==l&&a.iushrn(l),{div:i||null,mod:a}},u.prototype.divmod=function(r,s,l){return m(!r.isZero()),this.isZero()?{div:new u(0),mod:new u(0)}:0!==this.negative&&0===r.negative?(_=this.neg().divmod(r,s),"mod"!==s&&(a=_.div.neg()),"div"!==s&&(f=_.mod.neg(),l&&0!==f.negative&&f.iadd(r)),{div:a,mod:f}):0===this.negative&&0!==r.negative?(_=this.divmod(r.neg(),s),"mod"!==s&&(a=_.div.neg()),{div:a,mod:_.mod}):0!=(this.negative&r.negative)?(_=this.neg().divmod(r.neg(),s),"div"!==s&&(f=_.mod.neg(),l&&0!==f.negative&&f.isub(r)),{div:_.div,mod:f}):r.length>this.length||this.cmp(r)<0?{div:new u(0),mod:this}:1===r.length?"div"===s?{div:this.divn(r.words[0]),mod:null}:"mod"===s?{div:null,mod:new u(this.modn(r.words[0]))}:{div:this.divn(r.words[0]),mod:new u(this.modn(r.words[0]))}:this._wordDiv(r,s);var a,f,_},u.prototype.div=function(r){return this.divmod(r,"div",!1).div},u.prototype.mod=function(r){return this.divmod(r,"mod",!1).mod},u.prototype.umod=function(r){return this.divmod(r,"mod",!0).mod},u.prototype.divRound=function(r){var s=this.divmod(r);if(s.mod.isZero())return s.div;var l=0!==s.div.negative?s.mod.isub(r):s.mod,a=r.ushrn(1),f=r.andln(1),_=l.cmp(a);return _<0||1===f&&0===_?s.div:0!==s.div.negative?s.div.isubn(1):s.div.iaddn(1)},u.prototype.modn=function(r){m(r<=67108863);for(var s=(1<<26)%r,l=0,a=this.length-1;a>=0;a--)l=(s*l+(0|this.words[a]))%r;return l},u.prototype.idivn=function(r){m(r<=67108863);for(var s=0,l=this.length-1;l>=0;l--){var a=(0|this.words[l])+67108864*s;this.words[l]=a/r|0,s=a%r}return this.strip()},u.prototype.divn=function(r){return this.clone().idivn(r)},u.prototype.egcd=function(r){m(0===r.negative),m(!r.isZero());var s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),_=new u(0),D=new u(1),d=0;s.isEven()&&l.isEven();)s.iushrn(1),l.iushrn(1),++d;for(var i=l.clone(),b=s.clone();!s.isZero();){for(var z=0,q=1;0==(s.words[0]&q)&&z<26;++z,q<<=1);if(z>0)for(s.iushrn(z);z-- >0;)(a.isOdd()||f.isOdd())&&(a.iadd(i),f.isub(b)),a.iushrn(1),f.iushrn(1);for(var J=0,ge=1;0==(l.words[0]&ge)&&J<26;++J,ge<<=1);if(J>0)for(l.iushrn(J);J-- >0;)(_.isOdd()||D.isOdd())&&(_.iadd(i),D.isub(b)),_.iushrn(1),D.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(_),f.isub(D)):(l.isub(s),_.isub(a),D.isub(f))}return{a:_,b:D,gcd:l.iushln(d)}},u.prototype._invmp=function(r){m(0===r.negative),m(!r.isZero());var z,s=this,l=r.clone();s=0!==s.negative?s.umod(r):s.clone();for(var a=new u(1),f=new u(0),_=l.clone();s.cmpn(1)>0&&l.cmpn(1)>0;){for(var D=0,d=1;0==(s.words[0]&d)&&D<26;++D,d<<=1);if(D>0)for(s.iushrn(D);D-- >0;)a.isOdd()&&a.iadd(_),a.iushrn(1);for(var i=0,b=1;0==(l.words[0]&b)&&i<26;++i,b<<=1);if(i>0)for(l.iushrn(i);i-- >0;)f.isOdd()&&f.iadd(_),f.iushrn(1);s.cmp(l)>=0?(s.isub(l),a.isub(f)):(l.isub(s),f.isub(a))}return(z=0===s.cmpn(1)?a:f).cmpn(0)<0&&z.iadd(r),z},u.prototype.gcd=function(r){if(this.isZero())return r.abs();if(r.isZero())return this.abs();var s=this.clone(),l=r.clone();s.negative=0,l.negative=0;for(var a=0;s.isEven()&&l.isEven();a++)s.iushrn(1),l.iushrn(1);for(;;){for(;s.isEven();)s.iushrn(1);for(;l.isEven();)l.iushrn(1);var f=s.cmp(l);if(f<0){var _=s;s=l,l=_}else if(0===f||0===l.cmpn(1))break;s.isub(l)}return l.iushln(a)},u.prototype.invm=function(r){return this.egcd(r).a.umod(r)},u.prototype.isEven=function(){return 0==(1&this.words[0])},u.prototype.isOdd=function(){return 1==(1&this.words[0])},u.prototype.andln=function(r){return this.words[0]&r},u.prototype.bincn=function(r){m("number"==typeof r);var s=r%26,l=(r-s)/26,a=1<<s;if(this.length<=l)return this._expand(l+1),this.words[l]|=a,this;for(var f=a,_=l;0!==f&&_<this.length;_++){var D=0|this.words[_];f=(D+=f)>>>26,this.words[_]=D&=67108863}return 0!==f&&(this.words[_]=f,this.length++),this},u.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},u.prototype.cmpn=function(r){var l,s=r<0;if(0!==this.negative&&!s)return-1;if(0===this.negative&&s)return 1;if(this.strip(),this.length>1)l=1;else{s&&(r=-r),m(r<=67108863,"Number is too big");var a=0|this.words[0];l=a===r?0:a<r?-1:1}return 0!==this.negative?0|-l:l},u.prototype.cmp=function(r){if(0!==this.negative&&0===r.negative)return-1;if(0===this.negative&&0!==r.negative)return 1;var s=this.ucmp(r);return 0!==this.negative?0|-s:s},u.prototype.ucmp=function(r){if(this.length>r.length)return 1;if(this.length<r.length)return-1;for(var s=0,l=this.length-1;l>=0;l--){var a=0|this.words[l],f=0|r.words[l];if(a!==f){a<f?s=-1:a>f&&(s=1);break}}return s},u.prototype.gtn=function(r){return 1===this.cmpn(r)},u.prototype.gt=function(r){return 1===this.cmp(r)},u.prototype.gten=function(r){return this.cmpn(r)>=0},u.prototype.gte=function(r){return this.cmp(r)>=0},u.prototype.ltn=function(r){return-1===this.cmpn(r)},u.prototype.lt=function(r){return-1===this.cmp(r)},u.prototype.lten=function(r){return this.cmpn(r)<=0},u.prototype.lte=function(r){return this.cmp(r)<=0},u.prototype.eqn=function(r){return 0===this.cmpn(r)},u.prototype.eq=function(r){return 0===this.cmp(r)},u.red=function(r){return new $(r)},u.prototype.toRed=function(r){return m(!this.red,"Already a number in reduction context"),m(0===this.negative,"red works only with positives"),r.convertTo(this)._forceRed(r)},u.prototype.fromRed=function(){return m(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},u.prototype._forceRed=function(r){return this.red=r,this},u.prototype.forceRed=function(r){return m(!this.red,"Already a number in reduction context"),this._forceRed(r)},u.prototype.redAdd=function(r){return m(this.red,"redAdd works only with red numbers"),this.red.add(this,r)},u.prototype.redIAdd=function(r){return m(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,r)},u.prototype.redSub=function(r){return m(this.red,"redSub works only with red numbers"),this.red.sub(this,r)},u.prototype.redISub=function(r){return m(this.red,"redISub works only with red numbers"),this.red.isub(this,r)},u.prototype.redShl=function(r){return m(this.red,"redShl works only with red numbers"),this.red.shl(this,r)},u.prototype.redMul=function(r){return m(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.mul(this,r)},u.prototype.redIMul=function(r){return m(this.red,"redMul works only with red numbers"),this.red._verify2(this,r),this.red.imul(this,r)},u.prototype.redSqr=function(){return m(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},u.prototype.redISqr=function(){return m(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},u.prototype.redSqrt=function(){return m(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},u.prototype.redInvm=function(){return m(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},u.prototype.redNeg=function(){return m(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},u.prototype.redPow=function(r){return m(this.red&&!r.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,r)};var V={k256:null,p224:null,p192:null,p25519:null};function U(R,r){this.name=R,this.p=new u(r,16),this.n=this.p.bitLength(),this.k=new u(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function B(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function H(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function W(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function te(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function $(R){if("string"==typeof R){var r=u._prime(R);this.m=r.p,this.prime=r}else m(R.gtn(1),"modulus must be greater than 1"),this.m=R,this.prime=null}function pe(R){$.call(this,R),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new u(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}U.prototype._tmp=function(){var r=new u(null);return r.words=new Array(Math.ceil(this.n/13)),r},U.prototype.ireduce=function(r){var l,s=r;do{this.split(s,this.tmp),l=(s=(s=this.imulK(s)).iadd(this.tmp)).bitLength()}while(l>this.n);var a=l<this.n?-1:s.ucmp(this.p);return 0===a?(s.words[0]=0,s.length=1):a>0?s.isub(this.p):void 0!==s.strip?s.strip():s._strip(),s},U.prototype.split=function(r,s){r.iushrn(this.n,0,s)},U.prototype.imulK=function(r){return r.imul(this.k)},x(B,U),B.prototype.split=function(r,s){for(var l=4194303,a=Math.min(r.length,9),f=0;f<a;f++)s.words[f]=r.words[f];if(s.length=a,r.length<=9)return r.words[0]=0,void(r.length=1);var _=r.words[9];for(s.words[s.length++]=_&l,f=10;f<r.length;f++){var D=0|r.words[f];r.words[f-10]=(D&l)<<4|_>>>22,_=D}r.words[f-10]=_>>>=22,r.length-=0===_&&r.length>10?10:9},B.prototype.imulK=function(r){r.words[r.length]=0,r.words[r.length+1]=0,r.length+=2;for(var s=0,l=0;l<r.length;l++){var a=0|r.words[l];r.words[l]=67108863&(s+=977*a),s=64*a+(s/67108864|0)}return 0===r.words[r.length-1]&&(r.length--,0===r.words[r.length-1]&&r.length--),r},x(H,U),x(W,U),x(te,U),te.prototype.imulK=function(r){for(var s=0,l=0;l<r.length;l++){var a=19*(0|r.words[l])+s,f=67108863&a;a>>>=26,r.words[l]=f,s=a}return 0!==s&&(r.words[r.length++]=s),r},u._prime=function(r){if(V[r])return V[r];var s;if("k256"===r)s=new B;else if("p224"===r)s=new H;else if("p192"===r)s=new W;else{if("p25519"!==r)throw new Error("Unknown prime "+r);s=new te}return V[r]=s,s},$.prototype._verify1=function(r){m(0===r.negative,"red works only with positives"),m(r.red,"red works only with red numbers")},$.prototype._verify2=function(r,s){m(0==(r.negative|s.negative),"red works only with positives"),m(r.red&&r.red===s.red,"red works only with red numbers")},$.prototype.imod=function(r){return this.prime?this.prime.ireduce(r)._forceRed(this):r.umod(this.m)._forceRed(this)},$.prototype.neg=function(r){return r.isZero()?r.clone():this.m.sub(r)._forceRed(this)},$.prototype.add=function(r,s){this._verify2(r,s);var l=r.add(s);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},$.prototype.iadd=function(r,s){this._verify2(r,s);var l=r.iadd(s);return l.cmp(this.m)>=0&&l.isub(this.m),l},$.prototype.sub=function(r,s){this._verify2(r,s);var l=r.sub(s);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},$.prototype.isub=function(r,s){this._verify2(r,s);var l=r.isub(s);return l.cmpn(0)<0&&l.iadd(this.m),l},$.prototype.shl=function(r,s){return this._verify1(r),this.imod(r.ushln(s))},$.prototype.imul=function(r,s){return this._verify2(r,s),this.imod(r.imul(s))},$.prototype.mul=function(r,s){return this._verify2(r,s),this.imod(r.mul(s))},$.prototype.isqr=function(r){return this.imul(r,r.clone())},$.prototype.sqr=function(r){return this.mul(r,r)},$.prototype.sqrt=function(r){if(r.isZero())return r.clone();var s=this.m.andln(3);if(m(s%2==1),3===s){var l=this.m.add(new u(1)).iushrn(2);return this.pow(r,l)}for(var a=this.m.subn(1),f=0;!a.isZero()&&0===a.andln(1);)f++,a.iushrn(1);m(!a.isZero());var _=new u(1).toRed(this),D=_.redNeg(),d=this.m.subn(1).iushrn(1),i=this.m.bitLength();for(i=new u(2*i*i).toRed(this);0!==this.pow(i,d).cmp(D);)i.redIAdd(D);for(var b=this.pow(i,a),z=this.pow(r,a.addn(1).iushrn(1)),q=this.pow(r,a),J=f;0!==q.cmp(_);){for(var ge=q,me=0;0!==ge.cmp(_);me++)ge=ge.redSqr();m(me<J);var le=this.pow(b,new u(1).iushln(J-me-1));z=z.redMul(le),b=le.redSqr(),q=q.redMul(b),J=me}return z},$.prototype.invm=function(r){var s=r._invmp(this.m);return 0!==s.negative?(s.negative=0,this.imod(s).redNeg()):this.imod(s)},$.prototype.pow=function(r,s){if(s.isZero())return new u(1).toRed(this);if(0===s.cmpn(1))return r.clone();var a=new Array(16);a[0]=new u(1).toRed(this),a[1]=r;for(var f=2;f<a.length;f++)a[f]=this.mul(a[f-1],r);var _=a[0],D=0,d=0,i=s.bitLength()%26;for(0===i&&(i=26),f=s.length-1;f>=0;f--){for(var b=s.words[f],z=i-1;z>=0;z--){var q=b>>z&1;_!==a[0]&&(_=this.sqr(_)),0!==q||0!==D?(D<<=1,D|=q,(4==++d||0===f&&0===z)&&(_=this.mul(_,a[D]),d=0,D=0)):d=0}i=26}return _},$.prototype.convertTo=function(r){var s=r.umod(this.m);return s===r?s.clone():s},$.prototype.convertFrom=function(r){var s=r.clone();return s.red=null,s},u.mont=function(r){return new pe(r)},x(pe,$),pe.prototype.convertTo=function(r){return this.imod(r.ushln(this.shift))},pe.prototype.convertFrom=function(r){var s=this.imod(r.mul(this.rinv));return s.red=null,s},pe.prototype.imul=function(r,s){if(r.isZero()||s.isZero())return r.words[0]=0,r.length=1,r;var l=r.imul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),_=f;return f.cmp(this.m)>=0?_=f.isub(this.m):f.cmpn(0)<0&&(_=f.iadd(this.m)),_._forceRed(this)},pe.prototype.mul=function(r,s){if(r.isZero()||s.isZero())return new u(0)._forceRed(this);var l=r.mul(s),a=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=l.isub(a).iushrn(this.shift),_=f;return f.cmp(this.m)>=0?_=f.isub(this.m):f.cmpn(0)<0&&(_=f.iadd(this.m)),_._forceRed(this)},pe.prototype.invm=function(r){return this.imod(r._invmp(this.m).mul(this.r2))._forceRed(this)}}(Y=T.nmd(Y),this)},1548:(Y,L,T)=>{var p=T(1997),N=T(444),m=T(4541),x=T(6494),u=T(5842),g=T(2506),M=T(6829),A=T(5859).Buffer;Y.exports=function(v,w,S){var P;P=v.padding?v.padding:S?1:4;var V,k=p(v),O=k.modulus.byteLength();if(w.length>O||new x(w).cmp(k.modulus)>=0)throw new Error("decryption error");V=S?M(new x(w),k):u(w,k);var U=A.alloc(O-V.length);if(V=A.concat([U,V],O),4===P)return function(C,v){var w=C.modulus.byteLength(),S=g("sha1").update(A.alloc(0)).digest(),P=S.length;if(0!==v[0])throw new Error("decryption error");var k=v.slice(1,P+1),O=v.slice(P+1),V=m(k,N(O,P)),U=m(O,N(V,w-P-1));if(function(C,v){C=A.from(C),v=A.from(v);var w=0,S=C.length;C.length!==v.length&&(w++,S=Math.min(C.length,v.length));for(var P=-1;++P<S;)w+=C[P]^v[P];return w}(S,U.slice(0,P)))throw new Error("decryption error");for(var B=P;0===U[B];)B++;if(1!==U[B++])throw new Error("decryption error");return U.slice(B)}(k,V);if(1===P)return function(C,v,w){for(var S=v.slice(0,2),P=2,k=0;0!==v[P++];)if(P>=v.length){k++;break}var O=v.slice(2,P-1);if(("0002"!==S.toString("hex")&&!w||"0001"!==S.toString("hex")&&w)&&k++,O.length<8&&k++,k)throw new Error("decryption error");return v.slice(P)}(0,V,S);if(3===P)return V;throw new Error("unknown padding")}},4760:(Y,L,T)=>{var p=T(1997),N=T(6589),m=T(2506),x=T(444),u=T(4541),g=T(6494),M=T(6829),A=T(5842),I=T(5859).Buffer;Y.exports=function(w,S,P){var k;k=w.padding?w.padding:P?1:4;var V,O=p(w);if(4===k)V=function(v,w){var S=v.modulus.byteLength(),P=w.length,k=m("sha1").update(I.alloc(0)).digest(),O=k.length,V=2*O;if(P>S-V-2)throw new Error("message too long");var U=I.alloc(S-P-V-2),B=S-O-1,H=N(O),W=u(I.concat([k,U,I.alloc(1,1),w],B),x(H,B)),te=u(H,x(W,O));return new g(I.concat([I.alloc(1),te,W],S))}(O,S);else if(1===k)V=function(v,w,S){var O,P=w.length,k=v.modulus.byteLength();if(P>k-11)throw new Error("message too long");return O=S?I.alloc(k-P-3,255):function(v){for(var O,w=I.allocUnsafe(v),S=0,P=N(2*v),k=0;S<v;)k===P.length&&(P=N(2*v),k=0),(O=P[k++])&&(w[S++]=O);return w}(k-P-3),new g(I.concat([I.from([0,S?1:2]),O,I.alloc(1),w],k))}(O,S,P);else{if(3!==k)throw new Error("unknown padding");if((V=new g(S)).cmp(O.modulus)>=0)throw new Error("data too long for modulus")}return P?A(V,O):M(V,O)}},6829:(Y,L,T)=>{var p=T(6494),N=T(5859).Buffer;Y.exports=function(x,u){return N.from(x.toRed(p.mont(u.modulus)).redPow(new p(u.publicExponent)).fromRed().toArray())}},4541:Y=>{Y.exports=function(T,p){for(var N=T.length,m=-1;++m<N;)T[m]^=p[m];return T}},6589:(Y,L,T)=>{"use strict";var p=65536,x=T(5859).Buffer,u=global.crypto||global.msCrypto;Y.exports=u&&u.getRandomValues?function(M,A){if(M>4294967295)throw new RangeError("requested too many random bytes");var I=x.allocUnsafe(M);if(M>0)if(M>p)for(var y=0;y<M;y+=p)u.getRandomValues(I.slice(y,y+p));else u.getRandomValues(I);return"function"==typeof A?process.nextTick(function(){A(null,I)}):I}:function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},3594:(Y,L,T)=>{"use strict";function p(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var N=T(5859),m=T(6589),x=N.Buffer,u=N.kMaxLength,g=global.crypto||global.msCrypto,M=Math.pow(2,32)-1;function A(v,w){if("number"!=typeof v||v!=v)throw new TypeError("offset must be a number");if(v>M||v<0)throw new TypeError("offset must be a uint32");if(v>u||v>w)throw new RangeError("offset out of range")}function I(v,w,S){if("number"!=typeof v||v!=v)throw new TypeError("size must be a number");if(v>M||v<0)throw new TypeError("size must be a uint32");if(v+w>S||v>u)throw new RangeError("buffer too small")}function h(v,w,S,P){if(process.browser){var O=new Uint8Array(v.buffer,w,S);return g.getRandomValues(O),P?void process.nextTick(function(){P(null,v)}):v}if(!P)return m(S).copy(v,w),v;m(S,function(U,B){if(U)return P(U);B.copy(v,w),P(null,v)})}g&&g.getRandomValues||!process.browser?(L.randomFill=function(v,w,S,P){if(!(x.isBuffer(v)||v instanceof global.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof w)P=w,w=0,S=v.length;else if("function"==typeof S)P=S,S=v.length-w;else if("function"!=typeof P)throw new TypeError('"cb" argument must be a function');return A(w,v.length),I(S,w,v.length),h(v,w,S,P)},L.randomFillSync=function(v,w,S){if(void 0===w&&(w=0),!(x.isBuffer(v)||v instanceof global.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return A(w,v.length),void 0===S&&(S=v.length-w),I(S,w,v.length),h(v,w,S)}):(L.randomFill=p,L.randomFillSync=p)},5429:(Y,L,T)=>{"use strict";var N=T(8228),m=60103;if("function"==typeof Symbol&&Symbol.for){var y=Symbol.for;m=y("react.element"),y("react.portal"),y("react.fragment"),y("react.strict_mode"),y("react.profiler"),y("react.provider"),y("react.context"),y("react.forward_ref"),y("react.suspense"),y("react.memo"),y("react.lazy")}"function"==typeof Symbol&&Symbol;function v(d){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+d,b=1;b<arguments.length;b++)i+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+d+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S={};function P(d,i,b){this.props=d,this.context=i,this.refs=S,this.updater=b||w}function k(){}function O(d,i,b){this.props=d,this.context=i,this.refs=S,this.updater=b||w}P.prototype.isReactComponent={},P.prototype.setState=function(d,i){if("object"!=typeof d&&"function"!=typeof d&&null!=d)throw Error(v(85));this.updater.enqueueSetState(this,d,i,"setState")},P.prototype.forceUpdate=function(d){this.updater.enqueueForceUpdate(this,d,"forceUpdate")},k.prototype=P.prototype;var V=O.prototype=new k;V.constructor=O,N(V,P.prototype),V.isPureReactComponent=!0;var U_current=null,B=Object.prototype.hasOwnProperty,H={key:!0,ref:!0,__self:!0,__source:!0};L.createElement=function(d,i,b){var z,q={},J=null,ge=null;if(null!=i)for(z in void 0!==i.ref&&(ge=i.ref),void 0!==i.key&&(J=""+i.key),i)B.call(i,z)&&!H.hasOwnProperty(z)&&(q[z]=i[z]);var me=arguments.length-2;if(1===me)q.children=b;else if(1<me){for(var le=Array(me),fe=0;fe<me;fe++)le[fe]=arguments[fe+2];q.children=le}if(d&&d.defaultProps)for(z in me=d.defaultProps)void 0===q[z]&&(q[z]=me[z]);return{$$typeof:m,type:d,key:J,ref:ge,props:q,_owner:U_current}}},8139:(Y,L,T)=>{"use strict";Y.exports=T(5429)},8230:Y=>{"use strict";var T={};function p(g,M,A){A||(A=Error);var y=function(h){function C(v,w,S){return h.call(this,function(h,C,v){return"string"==typeof M?M:M(h,C,v)}(v,w,S))||this}return function(g,M){g.prototype=Object.create(M.prototype),g.prototype.constructor=g,g.__proto__=M}(C,h),C}(A);y.prototype.name=A.name,y.prototype.code=g,T[g]=y}function N(g,M){if(Array.isArray(g)){var A=g.length;return g=g.map(function(I){return String(I)}),A>2?"one of ".concat(M," ").concat(g.slice(0,A-1).join(", "),", or ")+g[A-1]:2===A?"one of ".concat(M," ").concat(g[0]," or ").concat(g[1]):"of ".concat(M," ").concat(g[0])}return"of ".concat(M," ").concat(String(g))}p("ERR_INVALID_OPT_VALUE",function(g,M){return'The value "'+M+'" is invalid for option "'+g+'"'},TypeError),p("ERR_INVALID_ARG_TYPE",function(g,M,A){var I,y;if("string"==typeof M&&function(g,M,A){return g.substr(0,M.length)===M}(M,"not ")?(I="must not be",M=M.replace(/^not /,"")):I="must be",function(g,M,A){return(void 0===A||A>g.length)&&(A=g.length),g.substring(A-M.length,A)===M}(g," argument"))y="The ".concat(g," ").concat(I," ").concat(N(M,"type"));else{var h=function(g,M,A){return"number"!=typeof A&&(A=0),!(A+".".length>g.length)&&-1!==g.indexOf(".",A)}(g)?"property":"argument";y='The "'.concat(g,'" ').concat(h," ").concat(I," ").concat(N(M,"type"))}return y+". Received type ".concat(typeof A)},TypeError),p("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),p("ERR_METHOD_NOT_IMPLEMENTED",function(g){return"The "+g+" method is not implemented"}),p("ERR_STREAM_PREMATURE_CLOSE","Premature close"),p("ERR_STREAM_DESTROYED",function(g){return"Cannot call "+g+" after a stream was destroyed"}),p("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),p("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),p("ERR_STREAM_WRITE_AFTER_END","write after end"),p("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),p("ERR_UNKNOWN_ENCODING",function(g){return"Unknown encoding: "+g},TypeError),p("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Y.exports.q=T},942:(Y,L,T)=>{"use strict";var p=Object.keys||function(y){var h=[];for(var C in y)h.push(C);return h};Y.exports=M;var N=T(2833),m=T(7807);T(9879)(M,N);for(var x=p(m.prototype),u=0;u<x.length;u++){var g=x[u];M.prototype[g]||(M.prototype[g]=m.prototype[g])}function M(y){if(!(this instanceof M))return new M(y);N.call(this,y),m.call(this,y),this.allowHalfOpen=!0,y&&(!1===y.readable&&(this.readable=!1),!1===y.writable&&(this.writable=!1),!1===y.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",A)))}function A(){this._writableState.ended||process.nextTick(I,this)}function I(y){y.end()}Object.defineProperty(M.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(M.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(M.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(h){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=h,this._writableState.destroyed=h)}})},619:(Y,L,T)=>{"use strict";Y.exports=N;var p=T(5431);function N(m){if(!(this instanceof N))return new N(m);p.call(this,m)}T(9879)(N,p),N.prototype._transform=function(m,x,u){u(null,m)}},2833:(Y,L,T)=>{"use strict";var p;Y.exports=R,R.ReadableState=pe,T(3105);var y,m=function(we,ye){return we.listeners(ye).length},x=T(5112),u=T(3875).Buffer,g=global.Uint8Array||function(){},I=T(4616);y=I&&I.debuglog?I.debuglog("stream"):function(){};var U,B,H,h=T(9370),C=T(806),w=T(2903).getHighWaterMark,S=T(8230).q,P=S.ERR_INVALID_ARG_TYPE,k=S.ERR_STREAM_PUSH_AFTER_EOF,O=S.ERR_METHOD_NOT_IMPLEMENTED,V=S.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;T(9879)(R,x);var W=C.errorOrDestroy,te=["error","close","destroy","pause","resume"];function pe(oe,we,ye){p=p||T(942),"boolean"!=typeof ye&&(ye=we instanceof p),this.objectMode=!!(oe=oe||{}).objectMode,ye&&(this.objectMode=this.objectMode||!!oe.readableObjectMode),this.highWaterMark=w(this,oe,"readableHighWaterMark",ye),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==oe.emitClose,this.autoDestroy=!!oe.autoDestroy,this.destroyed=!1,this.defaultEncoding=oe.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,oe.encoding&&(U||(U=T(2519).s),this.decoder=new U(oe.encoding),this.encoding=oe.encoding)}function R(oe){if(p=p||T(942),!(this instanceof R))return new R(oe);this._readableState=new pe(oe,this,this instanceof p),this.readable=!0,oe&&("function"==typeof oe.read&&(this._read=oe.read),"function"==typeof oe.destroy&&(this._destroy=oe.destroy)),x.call(this)}function r(oe,we,ye,re,ee){y("readableAddChunk",we);var ue,Z=oe._readableState;if(null===we)Z.reading=!1,function(oe,we){if(y("onEofChunk"),!we.ended){if(we.decoder){var ye=we.decoder.end();ye&&ye.length&&(we.buffer.push(ye),we.length+=we.objectMode?1:ye.length)}we.ended=!0,we.sync?d(oe):(we.needReadable=!1,we.emittedReadable||(we.emittedReadable=!0,i(oe)))}}(oe,Z);else if(ee||(ue=function(oe,we){var ye;return!function(oe){return u.isBuffer(oe)||oe instanceof g}(we)&&"string"!=typeof we&&void 0!==we&&!oe.objectMode&&(ye=new P("chunk",["string","Buffer","Uint8Array"],we)),ye}(Z,we)),ue)W(oe,ue);else if(Z.objectMode||we&&we.length>0)if("string"!=typeof we&&!Z.objectMode&&Object.getPrototypeOf(we)!==u.prototype&&(we=function(oe){return u.from(oe)}(we)),re)Z.endEmitted?W(oe,new V):s(oe,Z,we,!0);else if(Z.ended)W(oe,new k);else{if(Z.destroyed)return!1;Z.reading=!1,Z.decoder&&!ye?(we=Z.decoder.write(we),Z.objectMode||0!==we.length?s(oe,Z,we,!1):b(oe,Z)):s(oe,Z,we,!1)}else re||(Z.reading=!1,b(oe,Z));return!Z.ended&&(Z.length<Z.highWaterMark||0===Z.length)}function s(oe,we,ye,re){we.flowing&&0===we.length&&!we.sync?(we.awaitDrain=0,oe.emit("data",ye)):(we.length+=we.objectMode?1:ye.length,re?we.buffer.unshift(ye):we.buffer.push(ye),we.needReadable&&d(oe)),b(oe,we)}Object.defineProperty(R.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(we){!this._readableState||(this._readableState.destroyed=we)}}),R.prototype.destroy=C.destroy,R.prototype._undestroy=C.undestroy,R.prototype._destroy=function(oe,we){we(oe)},R.prototype.push=function(oe,we){var re,ye=this._readableState;return ye.objectMode?re=!0:"string"==typeof oe&&((we=we||ye.defaultEncoding)!==ye.encoding&&(oe=u.from(oe,we),we=""),re=!0),r(this,oe,we,!1,re)},R.prototype.unshift=function(oe){return r(this,oe,null,!0,!1)},R.prototype.isPaused=function(){return!1===this._readableState.flowing},R.prototype.setEncoding=function(oe){U||(U=T(2519).s);var we=new U(oe);this._readableState.decoder=we,this._readableState.encoding=this._readableState.decoder.encoding;for(var ye=this._readableState.buffer.head,re="";null!==ye;)re+=we.write(ye.data),ye=ye.next;return this._readableState.buffer.clear(),""!==re&&this._readableState.buffer.push(re),this._readableState.length=re.length,this};var a=1073741824;function _(oe,we){return oe<=0||0===we.length&&we.ended?0:we.objectMode?1:oe!=oe?we.flowing&&we.length?we.buffer.head.data.length:we.length:(oe>we.highWaterMark&&(we.highWaterMark=function(oe){return oe>=a?oe=a:(oe--,oe|=oe>>>1,oe|=oe>>>2,oe|=oe>>>4,oe|=oe>>>8,oe|=oe>>>16,oe++),oe}(oe)),oe<=we.length?oe:we.ended?we.length:(we.needReadable=!0,0))}function d(oe){var we=oe._readableState;y("emitReadable",we.needReadable,we.emittedReadable),we.needReadable=!1,we.emittedReadable||(y("emitReadable",we.flowing),we.emittedReadable=!0,process.nextTick(i,oe))}function i(oe){var we=oe._readableState;y("emitReadable_",we.destroyed,we.length,we.ended),!we.destroyed&&(we.length||we.ended)&&(oe.emit("readable"),we.emittedReadable=!1),we.needReadable=!we.flowing&&!we.ended&&we.length<=we.highWaterMark,fe(oe)}function b(oe,we){we.readingMore||(we.readingMore=!0,process.nextTick(z,oe,we))}function z(oe,we){for(;!we.reading&&!we.ended&&(we.length<we.highWaterMark||we.flowing&&0===we.length);){var ye=we.length;if(y("maybeReadMore read 0"),oe.read(0),ye===we.length)break}we.readingMore=!1}function J(oe){var we=oe._readableState;we.readableListening=oe.listenerCount("readable")>0,we.resumeScheduled&&!we.paused?we.flowing=!0:oe.listenerCount("data")>0&&oe.resume()}function ge(oe){y("readable nexttick read 0"),oe.read(0)}function le(oe,we){y("resume",we.reading),we.reading||oe.read(0),we.resumeScheduled=!1,oe.emit("resume"),fe(oe),we.flowing&&!we.reading&&oe.read(0)}function fe(oe){var we=oe._readableState;for(y("flow",we.flowing);we.flowing&&null!==oe.read(););}function ae(oe,we){return 0===we.length?null:(we.objectMode?ye=we.buffer.shift():!oe||oe>=we.length?(ye=we.decoder?we.buffer.join(""):1===we.buffer.length?we.buffer.first():we.buffer.concat(we.length),we.buffer.clear()):ye=we.buffer.consume(oe,we.decoder),ye);var ye}function de(oe){var we=oe._readableState;y("endReadable",we.endEmitted),we.endEmitted||(we.ended=!0,process.nextTick(xe,we,oe))}function xe(oe,we){if(y("endReadableNT",oe.endEmitted,oe.length),!oe.endEmitted&&0===oe.length&&(oe.endEmitted=!0,we.readable=!1,we.emit("end"),oe.autoDestroy)){var ye=we._writableState;(!ye||ye.autoDestroy&&ye.finished)&&we.destroy()}}function Ce(oe,we){for(var ye=0,re=oe.length;ye<re;ye++)if(oe[ye]===we)return ye;return-1}R.prototype.read=function(oe){y("read",oe),oe=parseInt(oe,10);var we=this._readableState,ye=oe;if(0!==oe&&(we.emittedReadable=!1),0===oe&&we.needReadable&&((0!==we.highWaterMark?we.length>=we.highWaterMark:we.length>0)||we.ended))return y("read: emitReadable",we.length,we.ended),0===we.length&&we.ended?de(this):d(this),null;if(0===(oe=_(oe,we))&&we.ended)return 0===we.length&&de(this),null;var ee,re=we.needReadable;return y("need readable",re),(0===we.length||we.length-oe<we.highWaterMark)&&y("length less than watermark",re=!0),we.ended||we.reading?y("reading or ended",re=!1):re&&(y("do read"),we.reading=!0,we.sync=!0,0===we.length&&(we.needReadable=!0),this._read(we.highWaterMark),we.sync=!1,we.reading||(oe=_(ye,we))),null===(ee=oe>0?ae(oe,we):null)?(we.needReadable=we.length<=we.highWaterMark,oe=0):(we.length-=oe,we.awaitDrain=0),0===we.length&&(we.ended||(we.needReadable=!0),ye!==oe&&we.ended&&de(this)),null!==ee&&this.emit("data",ee),ee},R.prototype._read=function(oe){W(this,new O("_read()"))},R.prototype.pipe=function(oe,we){var ye=this,re=this._readableState;switch(re.pipesCount){case 0:re.pipes=oe;break;case 1:re.pipes=[re.pipes,oe];break;default:re.pipes.push(oe)}re.pipesCount+=1,y("pipe count=%d opts=%j",re.pipesCount,we);var Z=we&&!1===we.end||oe===process.stdout||oe===process.stderr?Le:Re;function Re(){y("onend"),oe.end()}re.endEmitted?process.nextTick(Z):ye.once("end",Z),oe.on("unpipe",function ue(Ct,He){y("onunpipe"),Ct===ye&&He&&!1===He.hasUnpiped&&(He.hasUnpiped=!0,y("cleanup"),oe.removeListener("close",Be),oe.removeListener("finish",Ae),oe.removeListener("drain",Te),oe.removeListener("error",_e),oe.removeListener("unpipe",ue),ye.removeListener("end",Re),ye.removeListener("end",Le),ye.removeListener("data",Ne),Ee=!0,re.awaitDrain&&(!oe._writableState||oe._writableState.needDrain)&&Te())});var Te=function(oe){return function(){var ye=oe._readableState;y("pipeOnDrain",ye.awaitDrain),ye.awaitDrain&&ye.awaitDrain--,0===ye.awaitDrain&&m(oe,"data")&&(ye.flowing=!0,fe(oe))}}(ye);oe.on("drain",Te);var Ee=!1;function Ne(Ct){y("ondata");var He=oe.write(Ct);y("dest.write",He),!1===He&&((1===re.pipesCount&&re.pipes===oe||re.pipesCount>1&&-1!==Ce(re.pipes,oe))&&!Ee&&(y("false write response, pause",re.awaitDrain),re.awaitDrain++),ye.pause())}function _e(Ct){y("onerror",Ct),Le(),oe.removeListener("error",_e),0===m(oe,"error")&&W(oe,Ct)}function Be(){oe.removeListener("finish",Ae),Le()}function Ae(){y("onfinish"),oe.removeListener("close",Be),Le()}function Le(){y("unpipe"),ye.unpipe(oe)}return ye.on("data",Ne),function(oe,we,ye){if("function"==typeof oe.prependListener)return oe.prependListener(we,ye);oe._events&&oe._events[we]?Array.isArray(oe._events[we])?oe._events[we].unshift(ye):oe._events[we]=[ye,oe._events[we]]:oe.on(we,ye)}(oe,"error",_e),oe.once("close",Be),oe.once("finish",Ae),oe.emit("pipe",ye),re.flowing||(y("pipe resume"),ye.resume()),oe},R.prototype.unpipe=function(oe){var we=this._readableState,ye={hasUnpiped:!1};if(0===we.pipesCount)return this;if(1===we.pipesCount)return oe&&oe!==we.pipes||(oe||(oe=we.pipes),we.pipes=null,we.pipesCount=0,we.flowing=!1,oe&&oe.emit("unpipe",this,ye)),this;if(!oe){var re=we.pipes,ee=we.pipesCount;we.pipes=null,we.pipesCount=0,we.flowing=!1;for(var Z=0;Z<ee;Z++)re[Z].emit("unpipe",this,{hasUnpiped:!1});return this}var ue=Ce(we.pipes,oe);return-1===ue||(we.pipes.splice(ue,1),we.pipesCount-=1,1===we.pipesCount&&(we.pipes=we.pipes[0]),oe.emit("unpipe",this,ye)),this},R.prototype.addListener=R.prototype.on=function(oe,we){var ye=x.prototype.on.call(this,oe,we),re=this._readableState;return"data"===oe?(re.readableListening=this.listenerCount("readable")>0,!1!==re.flowing&&this.resume()):"readable"===oe&&!re.endEmitted&&!re.readableListening&&(re.readableListening=re.needReadable=!0,re.flowing=!1,re.emittedReadable=!1,y("on readable",re.length,re.reading),re.length?d(this):re.reading||process.nextTick(ge,this)),ye},R.prototype.removeListener=function(oe,we){var ye=x.prototype.removeListener.call(this,oe,we);return"readable"===oe&&process.nextTick(J,this),ye},R.prototype.removeAllListeners=function(oe){var we=x.prototype.removeAllListeners.apply(this,arguments);return("readable"===oe||void 0===oe)&&process.nextTick(J,this),we},R.prototype.resume=function(){var oe=this._readableState;return oe.flowing||(y("resume"),oe.flowing=!oe.readableListening,function(oe,we){we.resumeScheduled||(we.resumeScheduled=!0,process.nextTick(le,oe,we))}(this,oe)),oe.paused=!1,this},R.prototype.pause=function(){return y("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(y("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},R.prototype.wrap=function(oe){var we=this,ye=this._readableState,re=!1;for(var ee in oe.on("end",function(){if(y("wrapped end"),ye.decoder&&!ye.ended){var ue=ye.decoder.end();ue&&ue.length&&we.push(ue)}we.push(null)}),oe.on("data",function(ue){y("wrapped data"),ye.decoder&&(ue=ye.decoder.write(ue)),ye.objectMode&&null==ue||!(ye.objectMode||ue&&ue.length)||we.push(ue)||(re=!0,oe.pause())}),oe)void 0===this[ee]&&"function"==typeof oe[ee]&&(this[ee]=function(Re){return function(){return oe[Re].apply(oe,arguments)}}(ee));for(var Z=0;Z<te.length;Z++)oe.on(te[Z],this.emit.bind(this,te[Z]));return this._read=function(ue){y("wrapped _read",ue),re&&(re=!1,oe.resume())},this},"function"==typeof Symbol&&(R.prototype[Symbol.asyncIterator]=function(){return void 0===B&&(B=T(9983)),B(this)}),Object.defineProperty(R.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(R.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(R.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(we){this._readableState&&(this._readableState.flowing=we)}}),R._fromList=ae,Object.defineProperty(R.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(R.from=function(oe,we){return void 0===H&&(H=T(3659)),H(R,oe,we)})},5431:(Y,L,T)=>{"use strict";Y.exports=A;var p=T(8230).q,N=p.ERR_METHOD_NOT_IMPLEMENTED,m=p.ERR_MULTIPLE_CALLBACK,x=p.ERR_TRANSFORM_ALREADY_TRANSFORMING,u=p.ERR_TRANSFORM_WITH_LENGTH_0,g=T(942);function M(h,C){var v=this._transformState;v.transforming=!1;var w=v.writecb;if(null===w)return this.emit("error",new m);v.writechunk=null,v.writecb=null,null!=C&&this.push(C),w(h);var S=this._readableState;S.reading=!1,(S.needReadable||S.length<S.highWaterMark)&&this._read(S.highWaterMark)}function A(h){if(!(this instanceof A))return new A(h);g.call(this,h),this._transformState={afterTransform:M.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,h&&("function"==typeof h.transform&&(this._transform=h.transform),"function"==typeof h.flush&&(this._flush=h.flush)),this.on("prefinish",I)}function I(){var h=this;"function"!=typeof this._flush||this._readableState.destroyed?y(this,null,null):this._flush(function(C,v){y(h,C,v)})}function y(h,C,v){if(C)return h.emit("error",C);if(null!=v&&h.push(v),h._writableState.length)throw new u;if(h._transformState.transforming)throw new x;return h.push(null)}T(9879)(A,g),A.prototype.push=function(h,C){return this._transformState.needTransform=!1,g.prototype.push.call(this,h,C)},A.prototype._transform=function(h,C,v){v(new N("_transform()"))},A.prototype._write=function(h,C,v){var w=this._transformState;if(w.writecb=v,w.writechunk=h,w.writeencoding=C,!w.transforming){var S=this._readableState;(w.needTransform||S.needReadable||S.length<S.highWaterMark)&&this._read(S.highWaterMark)}},A.prototype._read=function(h){var C=this._transformState;null===C.writechunk||C.transforming?C.needTransform=!0:(C.transforming=!0,this._transform(C.writechunk,C.writeencoding,C.afterTransform))},A.prototype._destroy=function(h,C){g.prototype._destroy.call(this,h,function(v){C(v)})}},7807:(Y,L,T)=>{"use strict";function N(fe){var ae=this;this.next=null,this.entry=null,this.finish=function(){!function(fe,ae,de){var xe=fe.entry;for(fe.entry=null;xe;){var Ce=xe.callback;ae.pendingcb--,Ce(undefined),xe=xe.next}ae.corkedRequestsFree.next=fe}(ae,fe)}}var m;Y.exports=pe,pe.WritableState=te;var $,x={deprecate:T(5822)},u=T(5112),g=T(3875).Buffer,M=global.Uint8Array||function(){},y=T(806),C=T(2903).getHighWaterMark,v=T(8230).q,w=v.ERR_INVALID_ARG_TYPE,S=v.ERR_METHOD_NOT_IMPLEMENTED,P=v.ERR_MULTIPLE_CALLBACK,k=v.ERR_STREAM_CANNOT_PIPE,O=v.ERR_STREAM_DESTROYED,V=v.ERR_STREAM_NULL_VALUES,U=v.ERR_STREAM_WRITE_AFTER_END,B=v.ERR_UNKNOWN_ENCODING,H=y.errorOrDestroy;function W(){}function te(fe,ae,de){m=m||T(942),"boolean"!=typeof de&&(de=ae instanceof m),this.objectMode=!!(fe=fe||{}).objectMode,de&&(this.objectMode=this.objectMode||!!fe.writableObjectMode),this.highWaterMark=C(this,fe,"writableHighWaterMark",de),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===fe.decodeStrings),this.defaultEncoding=fe.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ce){!function(fe,ae){var de=fe._writableState,xe=de.sync,Ce=de.writecb;if("function"!=typeof Ce)throw new P;if(function(fe){fe.writing=!1,fe.writecb=null,fe.length-=fe.writelen,fe.writelen=0}(de),ae)!function(fe,ae,de,xe,Ce){--ae.pendingcb,de?(process.nextTick(Ce,xe),process.nextTick(ge,fe,ae),fe._writableState.errorEmitted=!0,H(fe,xe)):(Ce(xe),fe._writableState.errorEmitted=!0,H(fe,xe),ge(fe,ae))}(fe,de,xe,ae,Ce);else{var oe=z(de)||fe.destroyed;!oe&&!de.corked&&!de.bufferProcessing&&de.bufferedRequest&&b(fe,de),xe?process.nextTick(d,fe,de,oe,Ce):d(fe,de,oe,Ce)}}(ae,Ce)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==fe.emitClose,this.autoDestroy=!!fe.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new N(this)}function pe(fe){var ae=this instanceof(m=m||T(942));if(!ae&&!$.call(pe,this))return new pe(fe);this._writableState=new te(fe,this,ae),this.writable=!0,fe&&("function"==typeof fe.write&&(this._write=fe.write),"function"==typeof fe.writev&&(this._writev=fe.writev),"function"==typeof fe.destroy&&(this._destroy=fe.destroy),"function"==typeof fe.final&&(this._final=fe.final)),u.call(this)}function a(fe,ae,de,xe,Ce,oe,we){ae.writelen=xe,ae.writecb=we,ae.writing=!0,ae.sync=!0,ae.destroyed?ae.onwrite(new O("write")):de?fe._writev(Ce,ae.onwrite):fe._write(Ce,oe,ae.onwrite),ae.sync=!1}function d(fe,ae,de,xe){de||function(fe,ae){0===ae.length&&ae.needDrain&&(ae.needDrain=!1,fe.emit("drain"))}(fe,ae),ae.pendingcb--,xe(),ge(fe,ae)}function b(fe,ae){ae.bufferProcessing=!0;var de=ae.bufferedRequest;if(fe._writev&&de&&de.next){var Ce=new Array(ae.bufferedRequestCount),oe=ae.corkedRequestsFree;oe.entry=de;for(var we=0,ye=!0;de;)Ce[we]=de,de.isBuf||(ye=!1),de=de.next,we+=1;Ce.allBuffers=ye,a(fe,ae,!0,ae.length,Ce,"",oe.finish),ae.pendingcb++,ae.lastBufferedRequest=null,oe.next?(ae.corkedRequestsFree=oe.next,oe.next=null):ae.corkedRequestsFree=new N(ae),ae.bufferedRequestCount=0}else{for(;de;){var re=de.chunk;if(a(fe,ae,!1,ae.objectMode?1:re.length,re,de.encoding,de.callback),de=de.next,ae.bufferedRequestCount--,ae.writing)break}null===de&&(ae.lastBufferedRequest=null)}ae.bufferedRequest=de,ae.bufferProcessing=!1}function z(fe){return fe.ending&&0===fe.length&&null===fe.bufferedRequest&&!fe.finished&&!fe.writing}function q(fe,ae){fe._final(function(de){ae.pendingcb--,de&&H(fe,de),ae.prefinished=!0,fe.emit("prefinish"),ge(fe,ae)})}function ge(fe,ae){var de=z(ae);if(de&&(function(fe,ae){!ae.prefinished&&!ae.finalCalled&&("function"!=typeof fe._final||ae.destroyed?(ae.prefinished=!0,fe.emit("prefinish")):(ae.pendingcb++,ae.finalCalled=!0,process.nextTick(q,fe,ae)))}(fe,ae),0===ae.pendingcb&&(ae.finished=!0,fe.emit("finish"),ae.autoDestroy))){var xe=fe._readableState;(!xe||xe.autoDestroy&&xe.endEmitted)&&fe.destroy()}return de}T(9879)(pe,u),te.prototype.getBuffer=function(){for(var ae=this.bufferedRequest,de=[];ae;)de.push(ae),ae=ae.next;return de},function(){try{Object.defineProperty(te.prototype,"buffer",{get:x.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(fe){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?($=Function.prototype[Symbol.hasInstance],Object.defineProperty(pe,Symbol.hasInstance,{value:function(ae){return!!$.call(this,ae)||this===pe&&ae&&ae._writableState instanceof te}})):$=function(ae){return ae instanceof this},pe.prototype.pipe=function(){H(this,new k)},pe.prototype.write=function(fe,ae,de){var xe=this._writableState,Ce=!1,oe=!xe.objectMode&&function(fe){return g.isBuffer(fe)||fe instanceof M}(fe);return oe&&!g.isBuffer(fe)&&(fe=function(fe){return g.from(fe)}(fe)),"function"==typeof ae&&(de=ae,ae=null),oe?ae="buffer":ae||(ae=xe.defaultEncoding),"function"!=typeof de&&(de=W),xe.ending?function(fe,ae){var de=new U;H(fe,de),process.nextTick(ae,de)}(this,de):(oe||function(fe,ae,de,xe){var Ce;return null===de?Ce=new V:"string"!=typeof de&&!ae.objectMode&&(Ce=new w("chunk",["string","Buffer"],de)),!Ce||(H(fe,Ce),process.nextTick(xe,Ce),!1)}(this,xe,fe,de))&&(xe.pendingcb++,Ce=function(fe,ae,de,xe,Ce,oe){if(!de){var we=function(fe,ae,de){return!fe.objectMode&&!1!==fe.decodeStrings&&"string"==typeof ae&&(ae=g.from(ae,de)),ae}(ae,xe,Ce);xe!==we&&(de=!0,Ce="buffer",xe=we)}var ye=ae.objectMode?1:xe.length;ae.length+=ye;var re=ae.length<ae.highWaterMark;if(re||(ae.needDrain=!0),ae.writing||ae.corked){var ee=ae.lastBufferedRequest;ae.lastBufferedRequest={chunk:xe,encoding:Ce,isBuf:de,callback:oe,next:null},ee?ee.next=ae.lastBufferedRequest:ae.bufferedRequest=ae.lastBufferedRequest,ae.bufferedRequestCount+=1}else a(fe,ae,!1,ye,xe,Ce,oe);return re}(this,xe,oe,fe,ae,de)),Ce},pe.prototype.cork=function(){this._writableState.corked++},pe.prototype.uncork=function(){var fe=this._writableState;fe.corked&&(fe.corked--,!fe.writing&&!fe.corked&&!fe.bufferProcessing&&fe.bufferedRequest&&b(this,fe))},pe.prototype.setDefaultEncoding=function(ae){if("string"==typeof ae&&(ae=ae.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ae+"").toLowerCase())>-1))throw new B(ae);return this._writableState.defaultEncoding=ae,this},Object.defineProperty(pe.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(pe.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),pe.prototype._write=function(fe,ae,de){de(new S("_write()"))},pe.prototype._writev=null,pe.prototype.end=function(fe,ae,de){var xe=this._writableState;return"function"==typeof fe?(de=fe,fe=null,ae=null):"function"==typeof ae&&(de=ae,ae=null),null!=fe&&this.write(fe,ae),xe.corked&&(xe.corked=1,this.uncork()),xe.ending||function(fe,ae,de){ae.ending=!0,ge(fe,ae),de&&(ae.finished?process.nextTick(de):fe.once("finish",de)),ae.ended=!0,fe.writable=!1}(this,xe,de),this},Object.defineProperty(pe.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(pe.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(ae){!this._writableState||(this._writableState.destroyed=ae)}}),pe.prototype.destroy=y.destroy,pe.prototype._undestroy=y.undestroy,pe.prototype._destroy=function(fe,ae){ae(fe)}},9983:(Y,L,T)=>{"use strict";var p;function N(O,V,U){return V in O?Object.defineProperty(O,V,{value:U,enumerable:!0,configurable:!0,writable:!0}):O[V]=U,O}var m=T(6820),x=Symbol("lastResolve"),u=Symbol("lastReject"),g=Symbol("error"),M=Symbol("ended"),A=Symbol("lastPromise"),I=Symbol("handlePromise"),y=Symbol("stream");function h(O,V){return{value:O,done:V}}function C(O){var V=O[x];if(null!==V){var U=O[y].read();null!==U&&(O[A]=null,O[x]=null,O[u]=null,V(h(U,!1)))}}function v(O){process.nextTick(C,O)}var S=Object.getPrototypeOf(function(){}),P=Object.setPrototypeOf((N(p={get stream(){return this[y]},next:function(){var V=this,U=this[g];if(null!==U)return Promise.reject(U);if(this[M])return Promise.resolve(h(void 0,!0));if(this[y].destroyed)return new Promise(function(te,$){process.nextTick(function(){V[g]?$(V[g]):te(h(void 0,!0))})});var H,B=this[A];if(B)H=new Promise(function(O,V){return function(U,B){O.then(function(){V[M]?U(h(void 0,!0)):V[I](U,B)},B)}}(B,this));else{var W=this[y].read();if(null!==W)return Promise.resolve(h(W,!1));H=new Promise(this[I])}return this[A]=H,H}},Symbol.asyncIterator,function(){return this}),N(p,"return",function(){var V=this;return new Promise(function(U,B){V[y].destroy(null,function(H){H?B(H):U(h(void 0,!0))})})}),p),S);Y.exports=function(V){var U,B=Object.create(P,(N(U={},y,{value:V,writable:!0}),N(U,x,{value:null,writable:!0}),N(U,u,{value:null,writable:!0}),N(U,g,{value:null,writable:!0}),N(U,M,{value:V._readableState.endEmitted,writable:!0}),N(U,I,{value:function(W,te){var $=B[y].read();$?(B[A]=null,B[x]=null,B[u]=null,W(h($,!1))):(B[x]=W,B[u]=te)},writable:!0}),U));return B[A]=null,m(V,function(H){if(H&&"ERR_STREAM_PREMATURE_CLOSE"!==H.code){var W=B[u];return null!==W&&(B[A]=null,B[x]=null,B[u]=null,W(H)),void(B[g]=H)}var te=B[x];null!==te&&(B[A]=null,B[x]=null,B[u]=null,te(h(void 0,!0))),B[M]=!0}),V.on("readable",v.bind(null,B)),B}},9370:(Y,L,T)=>{"use strict";function p(v,w){var S=Object.keys(v);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(v);w&&(P=P.filter(function(k){return Object.getOwnPropertyDescriptor(v,k).enumerable})),S.push.apply(S,P)}return S}function m(v,w,S){return w in v?Object.defineProperty(v,w,{value:S,enumerable:!0,configurable:!0,writable:!0}):v[w]=S,v}function u(v,w){for(var S=0;S<w.length;S++){var P=w[S];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(v,P.key,P)}}var A=T(3875).Buffer,y=T(2361).inspect,h=y&&y.custom||"inspect";function C(v,w,S){A.prototype.copy.call(v,w,S)}Y.exports=function(){function v(){(function(v,w){if(!(v instanceof w))throw new TypeError("Cannot call a class as a function")})(this,v),this.head=null,this.tail=null,this.length=0}return function(v,w,S){w&&u(v.prototype,w)}(v,[{key:"push",value:function(S){var P={data:S,next:null};this.length>0?this.tail.next=P:this.head=P,this.tail=P,++this.length}},{key:"unshift",value:function(S){var P={data:S,next:this.head};0===this.length&&(this.tail=P),this.head=P,++this.length}},{key:"shift",value:function(){if(0!==this.length){var S=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,S}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(S){if(0===this.length)return"";for(var P=this.head,k=""+P.data;P=P.next;)k+=S+P.data;return k}},{key:"concat",value:function(S){if(0===this.length)return A.alloc(0);for(var P=A.allocUnsafe(S>>>0),k=this.head,O=0;k;)C(k.data,P,O),O+=k.data.length,k=k.next;return P}},{key:"consume",value:function(S,P){var k;return S<this.head.data.length?(k=this.head.data.slice(0,S),this.head.data=this.head.data.slice(S)):k=S===this.head.data.length?this.shift():P?this._getString(S):this._getBuffer(S),k}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(S){var P=this.head,k=1,O=P.data;for(S-=O.length;P=P.next;){var V=P.data,U=S>V.length?V.length:S;if(O+=U===V.length?V:V.slice(0,S),0==(S-=U)){U===V.length?(++k,this.head=P.next?P.next:this.tail=null):(this.head=P,P.data=V.slice(U));break}++k}return this.length-=k,O}},{key:"_getBuffer",value:function(S){var P=A.allocUnsafe(S),k=this.head,O=1;for(k.data.copy(P),S-=k.data.length;k=k.next;){var V=k.data,U=S>V.length?V.length:S;if(V.copy(P,P.length-S,0,U),0==(S-=U)){U===V.length?(++O,this.head=k.next?k.next:this.tail=null):(this.head=k,k.data=V.slice(U));break}++O}return this.length-=O,P}},{key:h,value:function(S,P){return y(this,function(v){for(var w=1;w<arguments.length;w++){var S=null!=arguments[w]?arguments[w]:{};w%2?p(Object(S),!0).forEach(function(P){m(v,P,S[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(S)):p(Object(S)).forEach(function(P){Object.defineProperty(v,P,Object.getOwnPropertyDescriptor(S,P))})}return v}({},P,{depth:0,customInspect:!1}))}}]),v}()},806:Y=>{"use strict";function T(u,g){m(u,g),p(u)}function p(u){u._writableState&&!u._writableState.emitClose||u._readableState&&!u._readableState.emitClose||u.emit("close")}function m(u,g){u.emit("error",g)}Y.exports={destroy:function(u,g){var M=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(g?g(u):u&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(m,this,u)):process.nextTick(m,this,u)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(u||null,function(y){!g&&y?M._writableState?M._writableState.errorEmitted?process.nextTick(p,M):(M._writableState.errorEmitted=!0,process.nextTick(T,M,y)):process.nextTick(T,M,y):g?(process.nextTick(p,M),g(y)):process.nextTick(p,M)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(u,g){var M=u._readableState,A=u._writableState;M&&M.autoDestroy||A&&A.autoDestroy?u.destroy(g):u.emit("error",g)}}},6820:(Y,L,T)=>{"use strict";var p=T(8230).q.ERR_STREAM_PREMATURE_CLOSE;function m(){}Y.exports=function u(g,M,A){if("function"==typeof M)return u(g,null,M);M||(M={}),A=function(g){var M=!1;return function(){if(!M){M=!0;for(var A=arguments.length,I=new Array(A),y=0;y<A;y++)I[y]=arguments[y];g.apply(this,I)}}}(A||m);var I=M.readable||!1!==M.readable&&g.readable,y=M.writable||!1!==M.writable&&g.writable,h=function(){g.writable||v()},C=g._writableState&&g._writableState.finished,v=function(){y=!1,C=!0,I||A.call(g)},w=g._readableState&&g._readableState.endEmitted,S=function(){I=!1,w=!0,y||A.call(g)},P=function(U){A.call(g,U)},k=function(){var U;return I&&!w?((!g._readableState||!g._readableState.ended)&&(U=new p),A.call(g,U)):y&&!C?((!g._writableState||!g._writableState.ended)&&(U=new p),A.call(g,U)):void 0},O=function(){g.req.on("finish",v)};return function(g){return g.setHeader&&"function"==typeof g.abort}(g)?(g.on("complete",v),g.on("abort",k),g.req?O():g.on("request",O)):y&&!g._writableState&&(g.on("end",h),g.on("close",h)),g.on("end",S),g.on("finish",v),!1!==M.error&&g.on("error",P),g.on("close",k),function(){g.removeListener("complete",v),g.removeListener("abort",k),g.removeListener("request",O),g.req&&g.req.removeListener("finish",v),g.removeListener("end",h),g.removeListener("close",h),g.removeListener("finish",v),g.removeListener("end",S),g.removeListener("error",P),g.removeListener("close",k)}}},3659:Y=>{Y.exports=function(){throw new Error("Readable.from is not available in the browser")}},6076:(Y,L,T)=>{"use strict";var p,m=T(8230).q,x=m.ERR_MISSING_ARGS,u=m.ERR_STREAM_DESTROYED;function g(v){if(v)throw v}function A(v,w,S,P){P=function(v){var w=!1;return function(){w||(w=!0,v.apply(void 0,arguments))}}(P);var k=!1;v.on("close",function(){k=!0}),void 0===p&&(p=T(6820)),p(v,{readable:w,writable:S},function(V){if(V)return P(V);k=!0,P()});var O=!1;return function(V){if(!k&&!O){if(O=!0,function(v){return v.setHeader&&"function"==typeof v.abort}(v))return v.abort();if("function"==typeof v.destroy)return v.destroy();P(V||new u("pipe"))}}}function I(v){v()}function y(v,w){return v.pipe(w)}function h(v){return v.length&&"function"==typeof v[v.length-1]?v.pop():g}Y.exports=function(){for(var v=arguments.length,w=new Array(v),S=0;S<v;S++)w[S]=arguments[S];var P=h(w);if(Array.isArray(w[0])&&(w=w[0]),w.length<2)throw new x("streams");var k,O=w.map(function(V,U){var B=U<w.length-1;return A(V,B,U>0,function(W){k||(k=W),W&&O.forEach(I),!B&&(O.forEach(I),P(k))})});return w.reduce(y)}},2903:(Y,L,T)=>{"use strict";var p=T(8230).q.ERR_INVALID_OPT_VALUE;Y.exports={getHighWaterMark:function(x,u,g,M){var A=function(x,u,g){return null!=x.highWaterMark?x.highWaterMark:u?x[g]:null}(u,M,g);if(null!=A){if(!isFinite(A)||Math.floor(A)!==A||A<0)throw new p(M?g:"highWaterMark",A);return Math.floor(A)}return x.objectMode?16:16384}}},5112:(Y,L,T)=>{Y.exports=T(3105).EventEmitter},8300:(Y,L,T)=>{(L=Y.exports=T(2833)).Stream=L,L.Readable=L,L.Writable=T(7807),L.Duplex=T(942),L.Transform=T(5431),L.PassThrough=T(619),L.finished=T(6820),L.pipeline=T(6076)},5207:(Y,L,T)=>{"use strict";var p=T(3875).Buffer,N=T(9879),m=T(5414),x=new Array(16),u=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],g=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],M=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],A=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],I=[0,1518500249,1859775393,2400959708,2840853838],y=[1352829926,1548603684,1836072691,2053994217,0];function h(){m.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function C(O,V){return O<<V|O>>>32-V}function v(O,V,U,B,H,W,te,$){return C(O+(V^U^B)+W+te|0,$)+H|0}function w(O,V,U,B,H,W,te,$){return C(O+(V&U|~V&B)+W+te|0,$)+H|0}function S(O,V,U,B,H,W,te,$){return C(O+((V|~U)^B)+W+te|0,$)+H|0}function P(O,V,U,B,H,W,te,$){return C(O+(V&B|U&~B)+W+te|0,$)+H|0}function k(O,V,U,B,H,W,te,$){return C(O+(V^(U|~B))+W+te|0,$)+H|0}N(h,m),h.prototype._update=function(){for(var O=x,V=0;V<16;++V)O[V]=this._block.readInt32LE(4*V);for(var U=0|this._a,B=0|this._b,H=0|this._c,W=0|this._d,te=0|this._e,$=0|this._a,pe=0|this._b,R=0|this._c,r=0|this._d,s=0|this._e,l=0;l<80;l+=1){var a,f;l<16?(a=v(U,B,H,W,te,O[u[l]],I[0],M[l]),f=k($,pe,R,r,s,O[g[l]],y[0],A[l])):l<32?(a=w(U,B,H,W,te,O[u[l]],I[1],M[l]),f=P($,pe,R,r,s,O[g[l]],y[1],A[l])):l<48?(a=S(U,B,H,W,te,O[u[l]],I[2],M[l]),f=S($,pe,R,r,s,O[g[l]],y[2],A[l])):l<64?(a=P(U,B,H,W,te,O[u[l]],I[3],M[l]),f=w($,pe,R,r,s,O[g[l]],y[3],A[l])):(a=k(U,B,H,W,te,O[u[l]],I[4],M[l]),f=v($,pe,R,r,s,O[g[l]],y[4],A[l])),U=te,te=W,W=C(H,10),H=B,B=a,$=s,s=r,r=C(R,10),R=pe,pe=f}var _=this._b+H+r|0;this._b=this._c+W+s|0,this._c=this._d+te+$|0,this._d=this._e+U+pe|0,this._e=this._a+B+R|0,this._a=_},h.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var O=p.alloc?p.alloc(20):new p(20);return O.writeInt32LE(this._a,0),O.writeInt32LE(this._b,4),O.writeInt32LE(this._c,8),O.writeInt32LE(this._d,12),O.writeInt32LE(this._e,16),O},Y.exports=h},5859:(Y,L,T)=>{var p=T(3875),N=p.Buffer;function m(u,g){for(var M in u)g[M]=u[M]}function x(u,g,M){return N(u,g,M)}N.from&&N.alloc&&N.allocUnsafe&&N.allocUnsafeSlow?Y.exports=p:(m(p,L),L.Buffer=x),m(N,x),x.from=function(u,g,M){if("number"==typeof u)throw new TypeError("Argument must not be a number");return N(u,g,M)},x.alloc=function(u,g,M){if("number"!=typeof u)throw new TypeError("Argument must be a number");var A=N(u);return void 0!==g?"string"==typeof M?A.fill(g,M):A.fill(g):A.fill(0),A},x.allocUnsafe=function(u){if("number"!=typeof u)throw new TypeError("Argument must be a number");return N(u)},x.allocUnsafeSlow=function(u){if("number"!=typeof u)throw new TypeError("Argument must be a number");return p.SlowBuffer(u)}},8114:(Y,L,T)=>{"use strict";var x,p=T(3875),N=p.Buffer,m={};for(x in p)!p.hasOwnProperty(x)||"SlowBuffer"===x||"Buffer"===x||(m[x]=p[x]);var u=m.Buffer={};for(x in N)!N.hasOwnProperty(x)||"allocUnsafe"===x||"allocUnsafeSlow"===x||(u[x]=N[x]);if(m.Buffer.prototype=N.prototype,(!u.from||u.from===Uint8Array.from)&&(u.from=function(g,M,A){if("number"==typeof g)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof g);if(g&&void 0===g.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);return N(g,M,A)}),u.alloc||(u.alloc=function(g,M,A){if("number"!=typeof g)throw new TypeError('The "size" argument must be of type number. Received type '+typeof g);if(g<0||g>=2*(1<<30))throw new RangeError('The value "'+g+'" is invalid for option "size"');var I=N(g);return M&&0!==M.length?"string"==typeof A?I.fill(M,A):I.fill(M):I.fill(0),I}),!m.kStringMaxLength)try{m.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(g){}m.constants||(m.constants={MAX_LENGTH:m.kMaxLength},m.kStringMaxLength&&(m.constants.MAX_STRING_LENGTH=m.kStringMaxLength)),Y.exports=m},3437:(Y,L,T)=>{var p=T(5859).Buffer;function N(m,x){this._block=p.alloc(m),this._finalSize=x,this._blockSize=m,this._len=0}N.prototype.update=function(m,x){"string"==typeof m&&(m=p.from(m,x=x||"utf8"));for(var u=this._block,g=this._blockSize,M=m.length,A=this._len,I=0;I<M;){for(var y=A%g,h=Math.min(M-I,g-y),C=0;C<h;C++)u[y+C]=m[I+C];I+=h,(A+=h)%g==0&&this._update(u)}return this._len+=M,this},N.prototype.digest=function(m){var x=this._len%this._blockSize;this._block[x]=128,this._block.fill(0,x+1),x>=this._finalSize&&(this._update(this._block),this._block.fill(0));var u=8*this._len;if(u<=4294967295)this._block.writeUInt32BE(u,this._blockSize-4);else{var g=(4294967295&u)>>>0;this._block.writeUInt32BE((u-g)/4294967296,this._blockSize-8),this._block.writeUInt32BE(g,this._blockSize-4)}this._update(this._block);var A=this._hash();return m?A.toString(m):A},N.prototype._update=function(){throw new Error("_update must be implemented by subclass")},Y.exports=N},5829:(Y,L,T)=>{var p=Y.exports=function(m){m=m.toLowerCase();var x=p[m];if(!x)throw new Error(m+" is not supported (we accept pull requests)");return new x};p.sha=T(6356),p.sha1=T(7338),p.sha224=T(4280),p.sha256=T(857),p.sha384=T(6203),p.sha512=T(5976)},6356:(Y,L,T)=>{var p=T(9879),N=T(3437),m=T(5859).Buffer,x=[1518500249,1859775393,-1894007588,-899497514],u=new Array(80);function g(){this.init(),this._w=u,N.call(this,64,56)}function M(y){return y<<5|y>>>27}function A(y){return y<<30|y>>>2}function I(y,h,C,v){return 0===y?h&C|~h&v:2===y?h&C|h&v|C&v:h^C^v}p(g,N),g.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},g.prototype._update=function(y){for(var h=this._w,C=0|this._a,v=0|this._b,w=0|this._c,S=0|this._d,P=0|this._e,k=0;k<16;++k)h[k]=y.readInt32BE(4*k);for(;k<80;++k)h[k]=h[k-3]^h[k-8]^h[k-14]^h[k-16];for(var O=0;O<80;++O){var V=~~(O/20),U=M(C)+I(V,v,w,S)+P+h[O]+x[V]|0;P=S,S=w,w=A(v),v=C,C=U}this._a=C+this._a|0,this._b=v+this._b|0,this._c=w+this._c|0,this._d=S+this._d|0,this._e=P+this._e|0},g.prototype._hash=function(){var y=m.allocUnsafe(20);return y.writeInt32BE(0|this._a,0),y.writeInt32BE(0|this._b,4),y.writeInt32BE(0|this._c,8),y.writeInt32BE(0|this._d,12),y.writeInt32BE(0|this._e,16),y},Y.exports=g},7338:(Y,L,T)=>{var p=T(9879),N=T(3437),m=T(5859).Buffer,x=[1518500249,1859775393,-1894007588,-899497514],u=new Array(80);function g(){this.init(),this._w=u,N.call(this,64,56)}function M(h){return h<<1|h>>>31}function A(h){return h<<5|h>>>27}function I(h){return h<<30|h>>>2}function y(h,C,v,w){return 0===h?C&v|~C&w:2===h?C&v|C&w|v&w:C^v^w}p(g,N),g.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},g.prototype._update=function(h){for(var C=this._w,v=0|this._a,w=0|this._b,S=0|this._c,P=0|this._d,k=0|this._e,O=0;O<16;++O)C[O]=h.readInt32BE(4*O);for(;O<80;++O)C[O]=M(C[O-3]^C[O-8]^C[O-14]^C[O-16]);for(var V=0;V<80;++V){var U=~~(V/20),B=A(v)+y(U,w,S,P)+k+C[V]+x[U]|0;k=P,P=S,S=I(w),w=v,v=B}this._a=v+this._a|0,this._b=w+this._b|0,this._c=S+this._c|0,this._d=P+this._d|0,this._e=k+this._e|0},g.prototype._hash=function(){var h=m.allocUnsafe(20);return h.writeInt32BE(0|this._a,0),h.writeInt32BE(0|this._b,4),h.writeInt32BE(0|this._c,8),h.writeInt32BE(0|this._d,12),h.writeInt32BE(0|this._e,16),h},Y.exports=g},4280:(Y,L,T)=>{var p=T(9879),N=T(857),m=T(3437),x=T(5859).Buffer,u=new Array(64);function g(){this.init(),this._w=u,m.call(this,64,56)}p(g,N),g.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},g.prototype._hash=function(){var M=x.allocUnsafe(28);return M.writeInt32BE(this._a,0),M.writeInt32BE(this._b,4),M.writeInt32BE(this._c,8),M.writeInt32BE(this._d,12),M.writeInt32BE(this._e,16),M.writeInt32BE(this._f,20),M.writeInt32BE(this._g,24),M},Y.exports=g},857:(Y,L,T)=>{var p=T(9879),N=T(3437),m=T(5859).Buffer,x=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],u=new Array(64);function g(){this.init(),this._w=u,N.call(this,64,56)}function M(v,w,S){return S^v&(w^S)}function A(v,w,S){return v&w|S&(v|w)}function I(v){return(v>>>2|v<<30)^(v>>>13|v<<19)^(v>>>22|v<<10)}function y(v){return(v>>>6|v<<26)^(v>>>11|v<<21)^(v>>>25|v<<7)}function h(v){return(v>>>7|v<<25)^(v>>>18|v<<14)^v>>>3}function C(v){return(v>>>17|v<<15)^(v>>>19|v<<13)^v>>>10}p(g,N),g.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},g.prototype._update=function(v){for(var w=this._w,S=0|this._a,P=0|this._b,k=0|this._c,O=0|this._d,V=0|this._e,U=0|this._f,B=0|this._g,H=0|this._h,W=0;W<16;++W)w[W]=v.readInt32BE(4*W);for(;W<64;++W)w[W]=C(w[W-2])+w[W-7]+h(w[W-15])+w[W-16]|0;for(var te=0;te<64;++te){var $=H+y(V)+M(V,U,B)+x[te]+w[te]|0,pe=I(S)+A(S,P,k)|0;H=B,B=U,U=V,V=O+$|0,O=k,k=P,P=S,S=$+pe|0}this._a=S+this._a|0,this._b=P+this._b|0,this._c=k+this._c|0,this._d=O+this._d|0,this._e=V+this._e|0,this._f=U+this._f|0,this._g=B+this._g|0,this._h=H+this._h|0},g.prototype._hash=function(){var v=m.allocUnsafe(32);return v.writeInt32BE(this._a,0),v.writeInt32BE(this._b,4),v.writeInt32BE(this._c,8),v.writeInt32BE(this._d,12),v.writeInt32BE(this._e,16),v.writeInt32BE(this._f,20),v.writeInt32BE(this._g,24),v.writeInt32BE(this._h,28),v},Y.exports=g},6203:(Y,L,T)=>{var p=T(9879),N=T(5976),m=T(3437),x=T(5859).Buffer,u=new Array(160);function g(){this.init(),this._w=u,m.call(this,128,112)}p(g,N),g.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},g.prototype._hash=function(){var M=x.allocUnsafe(48);function A(I,y,h){M.writeInt32BE(I,h),M.writeInt32BE(y,h+4)}return A(this._ah,this._al,0),A(this._bh,this._bl,8),A(this._ch,this._cl,16),A(this._dh,this._dl,24),A(this._eh,this._el,32),A(this._fh,this._fl,40),M},Y.exports=g},5976:(Y,L,T)=>{var p=T(9879),N=T(3437),m=T(5859).Buffer,x=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],u=new Array(160);function g(){this.init(),this._w=u,N.call(this,128,112)}function M(P,k,O){return O^P&(k^O)}function A(P,k,O){return P&k|O&(P|k)}function I(P,k){return(P>>>28|k<<4)^(k>>>2|P<<30)^(k>>>7|P<<25)}function y(P,k){return(P>>>14|k<<18)^(P>>>18|k<<14)^(k>>>9|P<<23)}function h(P,k){return(P>>>1|k<<31)^(P>>>8|k<<24)^P>>>7}function C(P,k){return(P>>>1|k<<31)^(P>>>8|k<<24)^(P>>>7|k<<25)}function v(P,k){return(P>>>19|k<<13)^(k>>>29|P<<3)^P>>>6}function w(P,k){return(P>>>19|k<<13)^(k>>>29|P<<3)^(P>>>6|k<<26)}function S(P,k){return P>>>0<k>>>0?1:0}p(g,N),g.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},g.prototype._update=function(P){for(var k=this._w,O=0|this._ah,V=0|this._bh,U=0|this._ch,B=0|this._dh,H=0|this._eh,W=0|this._fh,te=0|this._gh,$=0|this._hh,pe=0|this._al,R=0|this._bl,r=0|this._cl,s=0|this._dl,l=0|this._el,a=0|this._fl,f=0|this._gl,_=0|this._hl,D=0;D<32;D+=2)k[D]=P.readInt32BE(4*D),k[D+1]=P.readInt32BE(4*D+4);for(;D<160;D+=2){var d=k[D-30],i=k[D-30+1],b=h(d,i),z=C(i,d),q=v(d=k[D-4],i=k[D-4+1]),J=w(i,d),le=k[D-32],fe=k[D-32+1],ae=z+k[D-14+1]|0,de=b+k[D-14]+S(ae,z)|0;de=(de=de+q+S(ae=ae+J|0,J)|0)+le+S(ae=ae+fe|0,fe)|0,k[D]=de,k[D+1]=ae}for(var xe=0;xe<160;xe+=2){de=k[xe],ae=k[xe+1];var Ce=A(O,V,U),oe=A(pe,R,r),we=I(O,pe),ye=I(pe,O),re=y(H,l),ee=y(l,H),Z=x[xe],ue=x[xe+1],Re=M(H,W,te),Te=M(l,a,f),Ee=_+ee|0,$e=$+re+S(Ee,_)|0;$e=($e=($e=$e+Re+S(Ee=Ee+Te|0,Te)|0)+Z+S(Ee=Ee+ue|0,ue)|0)+de+S(Ee=Ee+ae|0,ae)|0;var Ne=ye+oe|0,_e=we+Ce+S(Ne,ye)|0;$=te,_=f,te=W,f=a,W=H,a=l,H=B+$e+S(l=s+Ee|0,s)|0,B=U,s=r,U=V,r=R,V=O,R=pe,O=$e+_e+S(pe=Ee+Ne|0,Ee)|0}this._al=this._al+pe|0,this._bl=this._bl+R|0,this._cl=this._cl+r|0,this._dl=this._dl+s|0,this._el=this._el+l|0,this._fl=this._fl+a|0,this._gl=this._gl+f|0,this._hl=this._hl+_|0,this._ah=this._ah+O+S(this._al,pe)|0,this._bh=this._bh+V+S(this._bl,R)|0,this._ch=this._ch+U+S(this._cl,r)|0,this._dh=this._dh+B+S(this._dl,s)|0,this._eh=this._eh+H+S(this._el,l)|0,this._fh=this._fh+W+S(this._fl,a)|0,this._gh=this._gh+te+S(this._gl,f)|0,this._hh=this._hh+$+S(this._hl,_)|0},g.prototype._hash=function(){var P=m.allocUnsafe(64);function k(O,V,U){P.writeInt32BE(O,U),P.writeInt32BE(V,U+4)}return k(this._ah,this._al,0),k(this._bh,this._bl,8),k(this._ch,this._cl,16),k(this._dh,this._dl,24),k(this._eh,this._el,32),k(this._fh,this._fl,40),k(this._gh,this._gl,48),k(this._hh,this._hl,56),P},Y.exports=g},6917:(Y,L,T)=>{Y.exports=m;var p=T(3105).EventEmitter;function m(){p.call(this)}T(9879)(m,p),m.Readable=T(2833),m.Writable=T(7807),m.Duplex=T(942),m.Transform=T(5431),m.PassThrough=T(619),m.finished=T(6820),m.pipeline=T(6076),m.Stream=m,m.prototype.pipe=function(x,u){var g=this;function M(w){x.writable&&!1===x.write(w)&&g.pause&&g.pause()}function A(){g.readable&&g.resume&&g.resume()}g.on("data",M),x.on("drain",A),!x._isStdio&&(!u||!1!==u.end)&&(g.on("end",y),g.on("close",h));var I=!1;function y(){I||(I=!0,x.end())}function h(){I||(I=!0,"function"==typeof x.destroy&&x.destroy())}function C(w){if(v(),0===p.listenerCount(this,"error"))throw w}function v(){g.removeListener("data",M),x.removeListener("drain",A),g.removeListener("end",y),g.removeListener("close",h),g.removeListener("error",C),x.removeListener("error",C),g.removeListener("end",v),g.removeListener("close",v),x.removeListener("close",v)}return g.on("error",C),x.on("error",C),g.on("end",v),g.on("close",v),x.on("close",v),x.emit("pipe",g),x}},2519:(Y,L,T)=>{"use strict";var p=T(4374).Buffer,N=p.isEncoding||function(O){switch((O=""+O)&&O.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function u(O){var V;switch(this.encoding=function(O){var V=function(O){if(!O)return"utf8";for(var V;;)switch(O){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return O;default:if(V)return;O=(""+O).toLowerCase(),V=!0}}(O);if("string"!=typeof V&&(p.isEncoding===N||!N(O)))throw new Error("Unknown encoding: "+O);return V||O}(O),this.encoding){case"utf16le":this.text=C,this.end=v,V=4;break;case"utf8":this.fillLast=I,V=4;break;case"base64":this.text=w,this.end=S,V=3;break;default:return this.write=P,void(this.end=k)}this.lastNeed=0,this.lastTotal=0,this.lastChar=p.allocUnsafe(V)}function g(O){return O<=127?0:O>>5==6?2:O>>4==14?3:O>>3==30?4:O>>6==2?-1:-2}function I(O){var V=this.lastTotal-this.lastNeed,U=function(O,V,U){if(128!=(192&V[0]))return O.lastNeed=0,"\ufffd";if(O.lastNeed>1&&V.length>1){if(128!=(192&V[1]))return O.lastNeed=1,"\ufffd";if(O.lastNeed>2&&V.length>2&&128!=(192&V[2]))return O.lastNeed=2,"\ufffd"}}(this,O);return void 0!==U?U:this.lastNeed<=O.length?(O.copy(this.lastChar,V,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(O.copy(this.lastChar,V,0,O.length),void(this.lastNeed-=O.length))}function C(O,V){if((O.length-V)%2==0){var U=O.toString("utf16le",V);if(U){var B=U.charCodeAt(U.length-1);if(B>=55296&&B<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=O[O.length-2],this.lastChar[1]=O[O.length-1],U.slice(0,-1)}return U}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=O[O.length-1],O.toString("utf16le",V,O.length-1)}function v(O){var V=O&&O.length?this.write(O):"";return this.lastNeed?V+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):V}function w(O,V){var U=(O.length-V)%3;return 0===U?O.toString("base64",V):(this.lastNeed=3-U,this.lastTotal=3,1===U?this.lastChar[0]=O[O.length-1]:(this.lastChar[0]=O[O.length-2],this.lastChar[1]=O[O.length-1]),O.toString("base64",V,O.length-U))}function S(O){var V=O&&O.length?this.write(O):"";return this.lastNeed?V+this.lastChar.toString("base64",0,3-this.lastNeed):V}function P(O){return O.toString(this.encoding)}function k(O){return O&&O.length?this.write(O):""}L.s=u,u.prototype.write=function(O){if(0===O.length)return"";var V,U;if(this.lastNeed){if(void 0===(V=this.fillLast(O)))return"";U=this.lastNeed,this.lastNeed=0}else U=0;return U<O.length?V?V+this.text(O,U):this.text(O,U):V||""},u.prototype.end=function(O){var V=O&&O.length?this.write(O):"";return this.lastNeed?V+"\ufffd":V},u.prototype.text=function(O,V){var U=function(O,V,U){var B=V.length-1;if(B<U)return 0;var H=g(V[B]);return H>=0?(H>0&&(O.lastNeed=H-1),H):--B<U||-2===H?0:(H=g(V[B]))>=0?(H>0&&(O.lastNeed=H-2),H):--B<U||-2===H?0:(H=g(V[B]))>=0?(H>0&&(2===H?H=0:O.lastNeed=H-3),H):0}(this,O,V);if(!this.lastNeed)return O.toString("utf8",V);this.lastTotal=U;var B=O.length-(U-this.lastNeed);return O.copy(this.lastChar,0,B),O.toString("utf8",V,B)},u.prototype.fillLast=function(O){if(this.lastNeed<=O.length)return O.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);O.copy(this.lastChar,this.lastTotal-this.lastNeed,0,O.length),this.lastNeed-=O.length}},4374:(Y,L,T)=>{var p=T(3875),N=p.Buffer;function m(u,g){for(var M in u)g[M]=u[M]}function x(u,g,M){return N(u,g,M)}N.from&&N.alloc&&N.allocUnsafe&&N.allocUnsafeSlow?Y.exports=p:(m(p,L),L.Buffer=x),x.prototype=Object.create(N.prototype),m(N,x),x.from=function(u,g,M){if("number"==typeof u)throw new TypeError("Argument must not be a number");return N(u,g,M)},x.alloc=function(u,g,M){if("number"!=typeof u)throw new TypeError("Argument must be a number");var A=N(u);return void 0!==g?"string"==typeof M?A.fill(g,M):A.fill(g):A.fill(0),A},x.allocUnsafe=function(u){if("number"!=typeof u)throw new TypeError("Argument must be a number");return N(u)},x.allocUnsafeSlow=function(u){if("number"!=typeof u)throw new TypeError("Argument must be a number");return p.SlowBuffer(u)}},5822:Y=>{function T(p){try{if(!global.localStorage)return!1}catch(m){return!1}var N=global.localStorage[p];return null!=N&&"true"===String(N).toLowerCase()}Y.exports=function(p,N){if(T("noDeprecation"))return p;var m=!1;return function(){if(!m){if(T("throwDeprecation"))throw new Error(N);T("traceDeprecation")?console.trace(N):console.warn(N),m=!0}return p.apply(this,arguments)}}},8952:(Y,L,T)=>{"use strict";function p(t){return"function"==typeof t}let N=!1;const m={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else N&&console.log("RxJS: Back to a better error behavior. Thank you. <3");N=t},get useDeprecatedSynchronousErrorHandling(){return N}};function x(t){setTimeout(()=>{throw t},0)}const u={closed:!0,next(t){},error(t){if(m.useDeprecatedSynchronousErrorHandling)throw t;x(t)},complete(){}},g=Array.isArray||(t=>t&&"number"==typeof t.length);function M(t){return null!==t&&"object"==typeof t}const I=(()=>{function t(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,o)=>`${o+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return t.prototype=Object.create(Error.prototype),t})();class y{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:o,_unsubscribe:c,_subscriptions:E}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof y)n.remove(this);else if(null!==n)for(let F=0;F<n.length;++F)n[F].remove(this);if(p(c)){o&&(this._unsubscribe=void 0);try{c.call(this)}catch(F){e=F instanceof I?h(F.errors):[F]}}if(g(E)){let F=-1,j=E.length;for(;++F<j;){const G=E[F];if(M(G))try{G.unsubscribe()}catch(ie){e=e||[],ie instanceof I?e=e.concat(h(ie.errors)):e.push(ie)}}}if(e)throw new I(e)}add(e){let n=e;if(!e)return y.EMPTY;switch(typeof e){case"function":n=new y(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof y)){const E=n;n=new y,n._subscriptions=[E]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:o}=n;if(null===o)n._parentOrParents=this;else if(o instanceof y){if(o===this)return n;n._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return n;o.push(this)}const c=this._subscriptions;return null===c?this._subscriptions=[n]:c.push(n),n}remove(e){const n=this._subscriptions;if(n){const o=n.indexOf(e);-1!==o&&n.splice(o,1)}}}var t;function h(t){return t.reduce((e,n)=>e.concat(n instanceof I?n.errors:n),[])}y.EMPTY=((t=new y).closed=!0,t);const C="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class w extends y{constructor(e,n,o){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=u;break;case 1:if(!e){this.destination=u;break}if("object"==typeof e){e instanceof w?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new S(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new S(this,e,n,o)}}[C](){return this}static create(e,n,o){const c=new w(e,n,o);return c.syncErrorThrowable=!1,c}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class S extends w{constructor(e,n,o,c){super(),this._parentSubscriber=e;let E,F=this;p(n)?E=n:n&&(E=n.next,o=n.error,c=n.complete,n!==u&&(F=Object.create(n),p(F.unsubscribe)&&this.add(F.unsubscribe.bind(F)),F.unsubscribe=this.unsubscribe.bind(this))),this._context=F,this._next=E,this._error=o,this._complete=c}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:n}=this;m.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:n}=this,{useDeprecatedSynchronousErrorHandling:o}=m;if(this._error)o&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(n.syncErrorThrowable)o?(n.syncErrorValue=e,n.syncErrorThrown=!0):x(e),this.unsubscribe();else{if(this.unsubscribe(),o)throw e;x(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const n=()=>this._complete.call(this._context);m.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,n){try{e.call(this._context,n)}catch(o){if(this.unsubscribe(),m.useDeprecatedSynchronousErrorHandling)throw o;x(o)}}__tryOrSetError(e,n,o){if(!m.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,o)}catch(c){return m.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=c,e.syncErrorThrown=!0,!0):(x(c),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const O="function"==typeof Symbol&&Symbol.observable||"@@observable";function V(t){return t}let H=(()=>{class t{constructor(n){this._isScalar=!1,n&&(this._subscribe=n)}lift(n){const o=new t;return o.source=this,o.operator=n,o}subscribe(n,o,c){const{operator:E}=this,F=function(t,e,n){if(t){if(t instanceof w)return t;if(t[C])return t[C]()}return t||e||n?new w(t,e,n):new w(u)}(n,o,c);if(F.add(E?E.call(F,this.source):this.source||m.useDeprecatedSynchronousErrorHandling&&!F.syncErrorThrowable?this._subscribe(F):this._trySubscribe(F)),m.useDeprecatedSynchronousErrorHandling&&F.syncErrorThrowable&&(F.syncErrorThrowable=!1,F.syncErrorThrown))throw F.syncErrorValue;return F}_trySubscribe(n){try{return this._subscribe(n)}catch(o){m.useDeprecatedSynchronousErrorHandling&&(n.syncErrorThrown=!0,n.syncErrorValue=o),function(t){for(;t;){const{closed:e,destination:n,isStopped:o}=t;if(e||o)return!1;t=n&&n instanceof w?n:null}return!0}(n)?n.error(o):console.warn(o)}}forEach(n,o){return new(o=W(o))((c,E)=>{let F;F=this.subscribe(j=>{try{n(j)}catch(G){E(G),F&&F.unsubscribe()}},E,c)})}_subscribe(n){const{source:o}=this;return o&&o.subscribe(n)}[O](){return this}pipe(...n){return 0===n.length?this:function(t){return 0===t.length?V:1===t.length?t[0]:function(n){return t.reduce((o,c)=>c(o),n)}}(n)(this)}toPromise(n){return new(n=W(n))((o,c)=>{let E;this.subscribe(F=>E=F,F=>c(F),()=>o(E))})}}return t.create=e=>new t(e),t})();function W(t){if(t||(t=m.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const $=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class pe extends y{constructor(e,n){super(),this.subject=e,this.subscriber=n,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,n=e.observers;if(this.subject=null,!n||0===n.length||e.isStopped||e.closed)return;const o=n.indexOf(this.subscriber);-1!==o&&n.splice(o,1)}}class R extends w{constructor(e){super(e),this.destination=e}}let r=(()=>{class t extends H{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[C](){return new R(this)}lift(n){const o=new s(this,this);return o.operator=n,o}next(n){if(this.closed)throw new $;if(!this.isStopped){const{observers:o}=this,c=o.length,E=o.slice();for(let F=0;F<c;F++)E[F].next(n)}}error(n){if(this.closed)throw new $;this.hasError=!0,this.thrownError=n,this.isStopped=!0;const{observers:o}=this,c=o.length,E=o.slice();for(let F=0;F<c;F++)E[F].error(n);this.observers.length=0}complete(){if(this.closed)throw new $;this.isStopped=!0;const{observers:n}=this,o=n.length,c=n.slice();for(let E=0;E<o;E++)c[E].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(n){if(this.closed)throw new $;return super._trySubscribe(n)}_subscribe(n){if(this.closed)throw new $;return this.hasError?(n.error(this.thrownError),y.EMPTY):this.isStopped?(n.complete(),y.EMPTY):(this.observers.push(n),new pe(this,n))}asObservable(){const n=new H;return n.source=this,n}}return t.create=(e,n)=>new s(e,n),t})();class s extends r{constructor(e,n){super(),this.destination=e,this.source=n}next(e){const{destination:n}=this;n&&n.next&&n.next(e)}error(e){const{destination:n}=this;n&&n.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:n}=this;return n?this.source.subscribe(e):y.EMPTY}}function l(t){return t&&"function"==typeof t.schedule}function a(t,e){return function(o){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return o.lift(new f(t,e))}}class f{constructor(e,n){this.project=e,this.thisArg=n}call(e,n){return n.subscribe(new _(e,this.project,this.thisArg))}}class _ extends w{constructor(e,n,o){super(e),this.project=n,this.count=0,this.thisArg=o||this}_next(e){let n;try{n=this.project.call(this.thisArg,e,this.count++)}catch(o){return void this.destination.error(o)}this.destination.next(n)}}const D=t=>e=>{for(let n=0,o=t.length;n<o&&!e.closed;n++)e.next(t[n]);e.complete()},b="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",ge=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function me(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const le=t=>{if(t&&"function"==typeof t[O])return(t=>e=>{const n=t[O]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)})(t);if(ge(t))return D(t);if(me(t))return(t=>e=>(t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,x),e))(t);if(t&&"function"==typeof t[b])return(t=>e=>{const n=t[b]();for(;;){let o;try{o=n.next()}catch(c){return e.error(c),e}if(o.done){e.complete();break}if(e.next(o.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e})(t);{const n=`You provided ${M(t)?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(n)}};function de(t,e){return new H(n=>{const o=new y;let c=0;return o.add(e.schedule(function(){c!==t.length?(n.next(t[c++]),n.closed||o.add(this.schedule())):n.complete()})),o})}function ye(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[O]}(t))return function(t,e){return new H(n=>{const o=new y;return o.add(e.schedule(()=>{const c=t[O]();o.add(c.subscribe({next(E){o.add(e.schedule(()=>n.next(E)))},error(E){o.add(e.schedule(()=>n.error(E)))},complete(){o.add(e.schedule(()=>n.complete()))}}))})),o})}(t,e);if(me(t))return function(t,e){return new H(n=>{const o=new y;return o.add(e.schedule(()=>t.then(c=>{o.add(e.schedule(()=>{n.next(c),o.add(e.schedule(()=>n.complete()))}))},c=>{o.add(e.schedule(()=>n.error(c)))}))),o})}(t,e);if(ge(t))return de(t,e);if(function(t){return t&&"function"==typeof t[b]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new H(n=>{const o=new y;let c;return o.add(()=>{c&&"function"==typeof c.return&&c.return()}),o.add(e.schedule(()=>{c=t[b](),o.add(e.schedule(function(){if(n.closed)return;let E,F;try{const j=c.next();E=j.value,F=j.done}catch(j){return void n.error(j)}F?n.complete():(n.next(E),this.schedule())}))})),o})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof H?t:new H(le(t))}class re extends w{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Z extends w{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function Te(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(Te((c,E)=>ye(t(c,E)).pipe(a((F,j)=>e(c,F,E,j))),n)):("number"==typeof e&&(n=e),o=>o.lift(new Ee(t,n)))}class Ee{constructor(e,n=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=n}call(e,n){return n.subscribe(new $e(e,this.project,this.concurrent))}}class $e extends Z{constructor(e,n,o=Number.POSITIVE_INFINITY){super(e),this.project=n,this.concurrent=o,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let n;const o=this.index++;try{n=this.project(e,o)}catch(c){return void this.destination.error(c)}this.active++,this._innerSub(n)}_innerSub(e){const n=new re(this),o=this.destination;o.add(n);const c=function(t,e){if(e.closed)return;if(t instanceof H)return t.subscribe(e);let n;try{n=le(t)(e)}catch(o){e.error(o)}return n}(e,n);c!==n&&o.add(c)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function _e(t=Number.POSITIVE_INFINITY){return Te(V,t)}function Be(t,e){return e?de(t,e):new H(D(t))}function Le(){return function(e){return e.lift(new Ct(e))}}class Ct{constructor(e){this.connectable=e}call(e,n){const{connectable:o}=this;o._refCount++;const c=new He(e,o),E=n.subscribe(c);return c.closed||(c.connection=o.connect()),E}}class He extends w{constructor(e,n){super(e),this.connectable=n}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const n=e._refCount;if(n<=0)return void(this.connection=null);if(e._refCount=n-1,n>1)return void(this.connection=null);const{connection:o}=this,c=e._connection;this.connection=null,c&&(!o||c===o)&&c.unsubscribe()}}class We extends H{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new y,e.add(this.source.subscribe(new qe(this.getSubject(),this))),e.closed&&(this._connection=null,e=y.EMPTY)),e}refCount(){return Le()(this)}}const Vt=(()=>{const t=We.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class qe extends R{constructor(e,n){super(e),this.connectable=n}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const n=e._connection;e._refCount=0,e._subject=null,e._connection=null,n&&n.unsubscribe()}}}function Dn(){return new r}function Je(t){for(let e in t)if(t[e]===Je)return e;throw Error("Could not find renamed property on target object.")}function Ge(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Ge).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function dt(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const Pn=Je({__forward_ref__:Je});function ut(t){return t.__forward_ref__=ut,t.toString=function(){return Ge(this())},t}function Ve(t){return function(t){return"function"==typeof t&&t.hasOwnProperty(Pn)&&t.__forward_ref__===ut}(t)?t():t}class st extends Error{constructor(e,n){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(e,n)),this.code=e}}function sn(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():function(t){return"string"==typeof t?t:null==t?"":String(t)}(t)}function et(t,e){const n=e?` in ${e}`:"";throw new st("201",`No provider for ${sn(t)} found${n}`)}function Kt(t,e){null==t&&function(t,e,n,o){throw new Error(`ASSERTION ERROR: ${t}`+(null==o?"":` [Expected=> ${n} ${o} ${e} <=Actual]`))}(e,t,null,"!=")}function xt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Zt(t){return{providers:t.providers||[],imports:t.imports||[]}}function tn(t){return _n(t,wo)||_n(t,ps)}function _n(t,e){return t.hasOwnProperty(e)?t[e]:null}function Ni(t){return t&&(t.hasOwnProperty(Uo)||t.hasOwnProperty(Co))?t[Uo]:null}const wo=Je({\u0275prov:Je}),Uo=Je({\u0275inj:Je}),ps=Je({ngInjectableDef:Je}),Co=Je({ngInjectorDef:Je});var Ut=(()=>((Ut=Ut||{})[Ut.Default=0]="Default",Ut[Ut.Host=1]="Host",Ut[Ut.Self=2]="Self",Ut[Ut.SkipSelf=4]="SkipSelf",Ut[Ut.Optional=8]="Optional",Ut))();let Vo;function $r(t){const e=Vo;return Vo=t,e}function Mo(t,e,n){const o=tn(t);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:n&Ut.Optional?null:void 0!==e?e:void et(Ge(t),"Injector")}function Vr(t){return{toString:t}.toString()}var br=(()=>((br=br||{})[br.OnPush=0]="OnPush",br[br.Default=1]="Default",br))(),Jn=(()=>((Jn=Jn||{})[Jn.Emulated=0]="Emulated",Jn[Jn.None=2]="None",Jn[Jn.ShadowDom=3]="ShadowDom",Jn))();const _o="undefined"!=typeof globalThis&&globalThis,Ra="undefined"!=typeof window&&window,Ho="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,vs="undefined"!=typeof global&&global,cn=_o||vs||Ra||Ho,Li={},An=[],to=Je({\u0275cmp:Je}),Zn=Je({\u0275dir:Je}),no=Je({\u0275pipe:Je}),ms=Je({\u0275mod:Je}),jo=Je({\u0275loc:Je}),Hr=Je({\u0275fac:Je}),di=Je({__NG_ELEMENT_ID__:Je});let ys=0;function qo(t){return Vr(()=>{const n={},o={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===br.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||An,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Jn.Emulated,id:"c",styles:t.styles||An,_:null,setInput:null,schemas:t.schemas||null,tView:null},c=t.directives,E=t.features,F=t.pipes;return o.id+=ys++,o.inputs=Eo(t.inputs,n),o.outputs=Eo(t.outputs),E&&E.forEach(j=>j(o)),o.directiveDefs=c?()=>("function"==typeof c?c():c).map(Wo):null,o.pipeDefs=F?()=>("function"==typeof F?F():F).map(ro):null,o})}function Wo(t){return cr(t)||function(t){return t[Zn]||null}(t)}function ro(t){return function(t){return t[no]||null}(t)}const hi={};function io(t){return Vr(()=>{const e={type:t.type,bootstrap:t.bootstrap||An,declarations:t.declarations||An,imports:t.imports||An,exports:t.exports||An,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(hi[t.id]=t.type),e})}function Eo(t,e){if(null==t)return Li;const n={};for(const o in t)if(t.hasOwnProperty(o)){let c=t[o],E=c;Array.isArray(c)&&(E=c[1],c=c[0]),n[c]=o,e&&(e[c]=E)}return n}const _r=qo;function cr(t){return t[to]||null}function fr(t,e){const n=t[ms]||null;if(!n&&!0===e)throw new Error(`Type ${Ge(t)} does not have '\u0275mod' property.`);return n}function rt(t){return Array.isArray(t)&&"object"==typeof t[1]}function pt(t){return Array.isArray(t)&&!0===t[1]}function yt(t){return 0!=(8&t.flags)}function vt(t){return 2==(2&t.flags)}function bt(t){return 1==(1&t.flags)}function Ot(t){return null!==t.template}function Dt(t){return 0!=(512&t[2])}function lo(t,e){return t.hasOwnProperty(Hr)?t[Hr]:null}class Yu{constructor(e,n,o){this.previousValue=e,this.currentValue=n,this.firstChange=o}isFirstChange(){return this.firstChange}}function Pa(t){return t.type.prototype.ngOnChanges&&(t.setInput=u0),Oa}function Oa(){const t=Xu(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===Li)t.previous=e;else for(let o in e)n[o]=e[o];t.current=null,this.ngOnChanges(e)}}function u0(t,e,n,o){const c=Xu(t)||function(t,e){return t[Lc]=e}(t,{previous:Li,current:null}),E=c.current||(c.current={}),F=c.previous,j=this.declaredInputs[n],G=F[j];E[j]=new Yu(G&&G.currentValue,e,F===Li),t[o]=e}const Lc="__ngSimpleChanges__";function Xu(t){return t[Lc]||null}let Na;function Hn(t){return!!t.listen}const Ko={createRenderer:(t,e)=>void 0!==Na?Na:"undefined"!=typeof document?document:void 0};function rr(t){for(;Array.isArray(t);)t=t[0];return t}function zr(t,e){return rr(e[t.index])}function Fa(t,e){return t.data[e]}function kr(t,e){const n=e[t];return rt(n)?n:n[0]}function Ba(t){return 128==(128&t[2])}function Ui(t,e){return null==e?null:t[e]}function Es(t){t[18]=0}function Ua(t,e){t[5]+=e;let n=t,o=t[3];for(;null!==o&&(1===e&&1===n[5]||-1===e&&0===n[5]);)o[5]+=e,n=o,o=o[3]}const Gt={lFrame:al(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function tl(){return Gt.bindingsEnabled}function St(){return Gt.lFrame.lView}function yn(){return Gt.lFrame.tView}function Va(t){return Gt.lFrame.contextLView=t,t[8]}function ir(){let t=nl();for(;null!==t&&64===t.type;)t=t.parent;return t}function nl(){return Gt.lFrame.currentTNode}function ti(t,e){const n=Gt.lFrame;n.currentTNode=t,n.isParent=e}function Zo(){return Gt.lFrame.isParent}function Ts(){return Gt.isInCheckNoChangesMode}function Is(t){Gt.isInCheckNoChangesMode=t}function Kc(t,e){const n=Gt.lFrame;n.bindingIndex=n.bindingRootIndex=t,qa(e)}function qa(t){Gt.lFrame.currentDirectiveIndex=t}function za(t){Gt.lFrame.currentQueryIndex=t}function Zc(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ol(t,e,n){if(n&Ut.SkipSelf){let c=e,E=t;for(;!(c=c.parent,null!==c||n&Ut.Host||(c=Zc(E),null===c||(E=E[15],10&c.type))););if(null===c)return!1;e=c,t=E}const o=Gt.lFrame=sl();return o.currentTNode=e,o.lView=t,!0}function As(t){const e=sl(),n=t[1];Gt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function sl(){const t=Gt.lFrame,e=null===t?null:t.child;return null===e?al(t):e}function al(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ul(){const t=Gt.lFrame;return Gt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ll=ul;function Ds(){const t=ul();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function wr(){return Gt.lFrame.selectedIndex}function Hi(t){Gt.lFrame.selectedIndex=t}function or(t,e){for(let n=e.directiveStart,o=e.directiveEnd;n<o;n++){const E=t.data[n].type.prototype,{ngAfterContentInit:F,ngAfterContentChecked:j,ngAfterViewInit:G,ngAfterViewChecked:ie,ngOnDestroy:ce}=E;F&&(t.contentHooks||(t.contentHooks=[])).push(-n,F),j&&((t.contentHooks||(t.contentHooks=[])).push(n,j),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,j)),G&&(t.viewHooks||(t.viewHooks=[])).push(-n,G),ie&&((t.viewHooks||(t.viewHooks=[])).push(n,ie),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,ie)),null!=ce&&(t.destroyHooks||(t.destroyHooks=[])).push(n,ce)}}function Ao(t,e,n){fl(t,e,3,n)}function Os(t,e,n,o){(3&t[2])===n&&fl(t,e,n,o)}function Wa(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function fl(t,e,n,o){const E=null!=o?o:-1,F=e.length-1;let j=0;for(let G=void 0!==o?65535&t[18]:0;G<F;G++)if("number"==typeof e[G+1]){if(j=e[G],null!=o&&j>=o)break}else e[G]<0&&(t[18]+=65536),(j<E||-1==E)&&(rf(t,n,e,G),t[18]=(4294901760&t[18])+G+2),G++}function rf(t,e,n,o){const c=n[o]<0,E=n[o+1],j=t[c?-n[o]:n[o]];if(c){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{E.call(j)}finally{}}}else try{E.call(j)}finally{}}class Qo{constructor(e,n,o){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=o}}function gt(t,e,n){const o=Hn(t);let c=0;for(;c<n.length;){const E=n[c];if("number"==typeof E){if(0!==E)break;c++;const F=n[c++],j=n[c++],G=n[c++];o?t.setAttribute(e,j,G,F):e.setAttributeNS(F,j,G)}else{const F=E,j=n[++c];nt(F)?o&&t.setProperty(e,F,j):o?t.setAttribute(e,F,j):e.setAttribute(F,j),c++}}return c}function Ze(t){return 3===t||4===t||6===t}function nt(t){return 64===t.charCodeAt(0)}function _t(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let o=0;o<e.length;o++){const c=e[o];"number"==typeof c?n=c:0===n||Tt(t,n,c,null,-1===n||2===n?e[++o]:null)}}return t}function Tt(t,e,n,o,c){let E=0,F=t.length;if(-1===e)F=-1;else for(;E<t.length;){const j=t[E++];if("number"==typeof j){if(j===e){F=-1;break}if(j>e){F=E-1;break}}}for(;E<t.length;){const j=t[E];if("number"==typeof j)break;if(j===n){if(null===o)return void(null!==c&&(t[E+1]=c));if(o===t[E+1])return void(t[E+2]=c)}E++,null!==o&&E++,null!==c&&E++}-1!==F&&(t.splice(F,0,e),E=F+1),t.splice(E++,0,n),null!==o&&t.splice(E++,0,o),null!==c&&t.splice(E++,0,c)}function Lt(t){return-1!==t}function Rt(t){return 32767&t}function nn(t,e){let n=function(t){return t>>16}(t),o=e;for(;n>0;)o=o[15],n--;return o}let Kn=!0;function Un(t){const e=Kn;return Kn=t,e}let co=0;function Wr(t,e){const n=Ga(t,e);if(-1!==n)return n;const o=e[1];o.firstCreatePass&&(t.injectorIndex=e.length,ks(o.data,t),ks(e,null),ks(o.blueprint,null));const c=dl(t,e),E=t.injectorIndex;if(Lt(c)){const F=Rt(c),j=nn(c,e),G=j[1].data;for(let ie=0;ie<8;ie++)e[E+ie]=j[F+ie]|G[F+ie]}return e[E+8]=c,E}function ks(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ga(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function dl(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,o=null,c=e;for(;null!==c;){const E=c[1],F=E.type;if(o=2===F?E.declTNode:1===F?c[6]:null,null===o)return-1;if(n++,c=c[15],-1!==o.injectorIndex)return o.injectorIndex|n<<16}return-1}function hl(t,e,n){!function(t,e,n){let o;"string"==typeof n?o=n.charCodeAt(0)||0:n.hasOwnProperty(di)&&(o=n[di]),null==o&&(o=n[di]=co++);const c=255&o;e.data[t+(c>>5)]|=1<<c}(t,e,n)}function h0(t,e,n){if(n&Ut.Optional)return t;et(e,"NodeInjector")}function p0(t,e,n,o){if(n&Ut.Optional&&void 0===o&&(o=null),0==(n&(Ut.Self|Ut.Host))){const c=t[9],E=$r(void 0);try{return c?c.get(e,o,n&Ut.Optional):Mo(e,o,n&Ut.Optional)}finally{$r(E)}}return h0(o,e,n)}function g0(t,e,n,o=Ut.Default,c){if(null!==t){const E=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(di)?t[di]:void 0;return"number"==typeof e?e>=0?255&e:tb:e}(n);if("function"==typeof E){if(!ol(e,t,o))return o&Ut.Host?h0(c,n,o):p0(e,n,o,c);try{const F=E(o);if(null!=F||o&Ut.Optional)return F;et(n)}finally{ll()}}else if("number"==typeof E){let F=null,j=Ga(t,e),G=-1,ie=o&Ut.Host?e[16][6]:null;for((-1===j||o&Ut.SkipSelf)&&(G=-1===j?dl(t,e):e[j+8],-1!==G&&y0(o,!1)?(F=e[1],j=Rt(G),e=nn(G,e)):j=-1);-1!==j;){const ce=e[1];if(m0(E,j,ce.data)){const Se=nb(j,e,n,F,o,ie);if(Se!==v0)return Se}G=e[j+8],-1!==G&&y0(o,e[1].data[j+8]===ie)&&m0(E,j,e)?(F=ce,j=Rt(G),e=nn(G,e)):j=-1}}}return p0(e,n,o,c)}const v0={};function tb(){return new Ns(ir(),St())}function nb(t,e,n,o,c,E){const F=e[1],j=F.data[t+8],ce=function(t,e,n,o,c){const E=t.providerIndexes,F=e.data,j=1048575&E,G=t.directiveStart,ce=E>>20,Ie=c?j+ce:t.directiveEnd;for(let ke=o?j:j+ce;ke<Ie;ke++){const Fe=F[ke];if(ke<G&&n===Fe||ke>=G&&Fe.type===n)return ke}if(c){const ke=F[G];if(ke&&Ot(ke)&&ke.type===n)return G}return null}(j,F,n,null==o?vt(j)&&Kn:o!=F&&0!=(3&j.type),c&Ut.Host&&E===j);return null!==ce?$a(e,F,ce,j):v0}function $a(t,e,n,o){let c=t[n];const E=e.data;if(function(t){return t instanceof Qo}(c)){const F=c;F.resolving&&function(t,e){throw new st("200",`Circular dependency in DI detected for ${t}`)}(sn(E[n]));const j=Un(F.canSeeViewProviders);F.resolving=!0;const G=F.injectImpl?$r(F.injectImpl):null;ol(t,o,Ut.Default);try{c=t[n]=F.factory(void 0,E,t,o),e.firstCreatePass&&n>=o.directiveStart&&function(t,e,n){const{ngOnChanges:o,ngOnInit:c,ngDoCheck:E}=e.type.prototype;if(o){const F=Pa(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,F),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,F)}c&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,c),E&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,E),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,E))}(n,E[n],e)}finally{null!==G&&$r(G),Un(j),F.resolving=!1,ll()}}return c}function m0(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function y0(t,e){return!(t&Ut.Self||t&Ut.Host&&e)}class Ns{constructor(e,n){this._tNode=e,this._lView=n}get(e,n){return g0(this._tNode,this._lView,e,void 0,n)}}const Fs="__parameters__";function Xo(t,e,n){return Vr(()=>{const o=function(t){return function(...n){if(t){const o=t(...n);for(const c in o)this[c]=o[c]}}}(e);function c(...E){if(this instanceof c)return o.apply(this,E),this;const F=new c(...E);return j.annotation=F,j;function j(G,ie,ce){const Se=G.hasOwnProperty(Fs)?G[Fs]:Object.defineProperty(G,Fs,{value:[]})[Fs];for(;Se.length<=ce;)Se.push(null);return(Se[ce]=Se[ce]||[]).push(F),G}}return n&&(c.prototype=Object.create(n.prototype)),c.prototype.ngMetadataName=t,c.annotationCls=c,c})}class Vn{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=xt({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}function qi(t,e){t.forEach(n=>Array.isArray(n)?qi(n,e):e(n))}function vl(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function es(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const Qa={},ff="__NG_DI_FLAG__",Vs="ngTempTokenPath",vb=/\n/gm,df="__source",hf=Je({provide:String,useValue:Je});let Ya;function Hs(t){const e=Ya;return Ya=t,e}function yb(t,e=Ut.Default){if(void 0===Ya)throw new Error("inject() must be called from an injection context");return null===Ya?Mo(t,void 0,e):Ya.get(t,e&Ut.Optional?null:void 0,e)}function vn(t,e=Ut.Default){return(Vo||yb)(Ve(t),e)}function ts(t){const e=[];for(let n=0;n<t.length;n++){const o=Ve(t[n]);if(Array.isArray(o)){if(0===o.length)throw new Error("Arguments array must have arguments.");let c,E=Ut.Default;for(let F=0;F<o.length;F++){const j=o[F],G=bb(j);"number"==typeof G?-1===G?c=j.token:E|=G:c=j}e.push(vn(c,E))}else e.push(vn(o))}return e}function Xa(t,e){return t[ff]=e,t.prototype[ff]=e,t}function bb(t){return t[ff]}function S0(t,e,n,o){const c=t[Vs];throw e[df]&&c.unshift(e[df]),t.message=function(t,e,n,o=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let c=Ge(e);if(Array.isArray(e))c=e.map(Ge).join(" -> ");else if("object"==typeof e){let E=[];for(let F in e)if(e.hasOwnProperty(F)){let j=e[F];E.push(F+":"+("string"==typeof j?JSON.stringify(j):Ge(j)))}c=`{${E.join(", ")}}`}return`${n}${o?"("+o+")":""}[${c}]: ${t.replace(vb,"\n  ")}`}("\n"+t.message,c,n,o),t.ngTokenPath=c,t[Vs]=null,t}const eu=Xa(Xo("Inject",t=>({token:t})),-1),zi=Xa(Xo("Optional"),8),ns=Xa(Xo("SkipSelf"),4),z0="__ngContext__";function Ar(t,e){t[z0]=e}function Mf(t){const e=function(t){return t[z0]||null}(t);return e?Array.isArray(e)?e:e.lView:null}function _l(t){return t.ngOriginalError}function dw(t,...e){t.error(...e)}class is{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e),o=this._findContext(e),c=function(t){return t&&t.ngErrorLogger||dw}(e);c(this._console,"ERROR",e),n&&c(this._console,"ORIGINAL ERROR",n),o&&c(this._console,"ERROR CONTEXT",o)}_findContext(e){return e?function(t){return t.ngDebugContext}(e)||this._findContext(_l(e)):null}_findOriginalError(e){let n=e&&_l(e);for(;n&&_l(n);)n=_l(n);return n||null}}const X0=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(cn))();function $i(t){return t instanceof Function?t():t}var Zr=(()=>((Zr=Zr||{})[Zr.Important=1]="Important",Zr[Zr.DashCase=2]="DashCase",Zr))();function Ef(t,e){return undefined(t,e)}function su(t){const e=t[3];return pt(e)?e[3]:e}function Tf(t){return ip(t[13])}function If(t){return ip(t[4])}function ip(t){for(;null!==t&&!pt(t);)t=t[4];return t}function Ws(t,e,n,o,c){if(null!=o){let E,F=!1;pt(o)?E=o:rt(o)&&(F=!0,o=o[0]);const j=rr(o);0===t&&null!==n?null==c?cp(e,n,j):os(e,n,j,c||null,!0):1===t&&null!==n?os(e,n,j,c||null,!0):2===t?function(t,e,n){const o=El(t,e);o&&function(t,e,n,o){Hn(t)?t.removeChild(e,n,o):e.removeChild(n)}(t,o,e,n)}(e,j,F):3===t&&e.destroyNode(j),null!=E&&function(t,e,n,o,c){const E=n[7];E!==rr(n)&&Ws(e,t,o,E,c);for(let j=10;j<n.length;j++){const G=n[j];au(G[1],G,t,e,o,E)}}(e,t,E,n,c)}}function Rf(t,e,n){return Hn(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function sp(t,e){const n=t[9],o=n.indexOf(e),c=e[3];1024&e[2]&&(e[2]&=-1025,Ua(c,-1)),n.splice(o,1)}function Af(t,e){if(t.length<=10)return;const n=10+e,o=t[n];if(o){const c=o[17];null!==c&&c!==t&&sp(c,o),e>0&&(t[n-1][4]=o[4]);const E=es(t,10+e);!function(t,e){au(t,e,e[11],2,null,null),e[0]=null,e[6]=null}(o[1],o);const F=E[19];null!==F&&F.detachView(E[1]),o[3]=null,o[4]=null,o[2]&=-129}return o}function ap(t,e){if(!(256&e[2])){const n=e[11];Hn(n)&&n.destroyNode&&au(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Df(t[1],t);for(;e;){let n=null;if(rt(e))n=e[13];else{const o=e[10];o&&(n=o)}if(!n){for(;e&&!e[4]&&e!==t;)rt(e)&&Df(e[1],e),e=e[3];null===e&&(e=t),rt(e)&&Df(e[1],e),n=e&&e[4]}e=n}}(e)}}function Df(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let o=0;o<n.length;o+=2){const c=e[n[o]];if(!(c instanceof Qo)){const E=n[o+1];if(Array.isArray(E))for(let F=0;F<E.length;F+=2){const j=c[E[F]],G=E[F+1];try{G.call(j)}finally{}}else try{E.call(c)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,o=e[7];let c=-1;if(null!==n)for(let E=0;E<n.length-1;E+=2)if("string"==typeof n[E]){const F=n[E+1],j="function"==typeof F?F(e):rr(e[F]),G=o[c=n[E+2]],ie=n[E+3];"boolean"==typeof ie?j.removeEventListener(n[E],G,ie):ie>=0?o[c=ie]():o[c=-ie].unsubscribe(),E+=2}else{const F=o[c=n[E+1]];n[E].call(F)}if(null!==o){for(let E=c+1;E<o.length;E++)o[E]();e[7]=null}}(t,e),1===e[1].type&&Hn(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&pt(e[3])){n!==e[3]&&sp(n,e);const o=e[19];null!==o&&o.detachView(t)}}}function up(t,e,n){return function(t,e,n){let o=e;for(;null!==o&&40&o.type;)o=(e=o).parent;if(null===o)return n[0];if(2&o.flags){const c=t.data[o.directiveStart].encapsulation;if(c===Jn.None||c===Jn.Emulated)return null}return zr(o,n)}(t,e.parent,n)}function os(t,e,n,o,c){Hn(t)?t.insertBefore(e,n,o,c):e.insertBefore(n,o,c)}function cp(t,e,n){Hn(t)?t.appendChild(e,n):e.appendChild(n)}function fp(t,e,n,o,c){null!==o?os(t,e,n,o,c):cp(t,e,n)}function El(t,e){return Hn(t)?t.parentNode(e):e.parentNode}let pp=function(t,e,n){return 40&t.type?zr(t,n):null};function Tl(t,e,n,o){const c=up(t,o,e),E=e[11],j=function(t,e,n){return pp(t,e,n)}(o.parent||e[6],o,e);if(null!=c)if(Array.isArray(n))for(let G=0;G<n.length;G++)fp(E,c,n[G],j,!1);else fp(E,c,n,j,!1)}function Il(t,e){if(null!==e){const n=e.type;if(3&n)return zr(e,t);if(4&n)return Of(-1,t[e.index]);if(8&n){const o=e.child;if(null!==o)return Il(t,o);{const c=t[e.index];return pt(c)?Of(-1,c):rr(c)}}if(32&n)return Ef(e,t)()||rr(t[e.index]);{const o=vp(t,e);return null!==o?Array.isArray(o)?o[0]:Il(su(t[16]),o):Il(t,e.next)}}return null}function vp(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Of(t,e){const n=10+t+1;if(n<e.length){const o=e[n],c=o[1].firstChild;if(null!==c)return Il(o,c)}return e[7]}function kf(t,e,n,o,c,E,F){for(;null!=n;){const j=o[n.index],G=n.type;if(F&&0===e&&(j&&Ar(rr(j),o),n.flags|=4),64!=(64&n.flags))if(8&G)kf(t,e,n.child,o,c,E,!1),Ws(e,t,c,j,E);else if(32&G){const ie=Ef(n,o);let ce;for(;ce=ie();)Ws(e,t,c,ce,E);Ws(e,t,c,j,E)}else 16&G?yp(t,e,o,n,c,E):Ws(e,t,c,j,E);n=F?n.projectionNext:n.next}}function au(t,e,n,o,c,E){kf(n,o,t.firstChild,e,c,E,!1)}function yp(t,e,n,o,c,E){const F=n[16],G=F[6].projection[o.projection];if(Array.isArray(G))for(let ie=0;ie<G.length;ie++)Ws(e,t,c,G[ie],E);else kf(t,e,G,F[3],c,E,!0)}function bp(t,e,n){Hn(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Nf(t,e,n){Hn(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function wp(t,e,n){let o=t.length;for(;;){const c=t.indexOf(e,n);if(-1===c)return c;if(0===c||t.charCodeAt(c-1)<=32){const E=e.length;if(c+E===o||t.charCodeAt(c+E)<=32)return c}n=c+1}}const Cp="ng-template";function Bw(t,e,n){let o=0;for(;o<t.length;){let c=t[o++];if(n&&"class"===c){if(c=t[o],-1!==wp(c.toLowerCase(),e,0))return!0}else if(1===c){for(;o<t.length&&"string"==typeof(c=t[o++]);)if(c.toLowerCase()===e)return!0;return!1}}return!1}function Mp(t){return 4===t.type&&t.value!==Cp}function Uw(t,e,n){return e===(4!==t.type||n?t.value:Cp)}function Vw(t,e,n){let o=4;const c=t.attrs||[],E=function(t){for(let e=0;e<t.length;e++)if(Ze(t[e]))return e;return t.length}(c);let F=!1;for(let j=0;j<e.length;j++){const G=e[j];if("number"!=typeof G){if(!F)if(4&o){if(o=2|1&o,""!==G&&!Uw(t,G,n)||""===G&&1===e.length){if(bi(o))return!1;F=!0}}else{const ie=8&o?G:e[++j];if(8&o&&null!==t.attrs){if(!Bw(t.attrs,ie,n)){if(bi(o))return!1;F=!0}continue}const Se=Hw(8&o?"class":G,c,Mp(t),n);if(-1===Se){if(bi(o))return!1;F=!0;continue}if(""!==ie){let Ie;Ie=Se>E?"":c[Se+1].toLowerCase();const ke=8&o?Ie:null;if(ke&&-1!==wp(ke,ie,0)||2&o&&ie!==Ie){if(bi(o))return!1;F=!0}}}}else{if(!F&&!bi(o)&&!bi(G))return!1;if(F&&bi(G))continue;F=!1,o=G|1&o}}return bi(o)||F}function bi(t){return 0==(1&t)}function Hw(t,e,n,o){if(null===e)return-1;let c=0;if(o||!n){let E=!1;for(;c<e.length;){const F=e[c];if(F===t)return c;if(3===F||6===F)E=!0;else{if(1===F||2===F){let j=e[++c];for(;"string"==typeof j;)j=e[++c];continue}if(4===F)break;if(0===F){c+=4;continue}}c+=E?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const o=t[n];if("number"==typeof o)return-1;if(o===e)return n;n++}return-1}(e,t)}function _p(t,e,n=!1){for(let o=0;o<e.length;o++)if(Vw(t,e[o],n))return!0;return!1}function Sp(t,e){return t?":not("+e.trim()+")":e}function Gw(t){let e=t[0],n=1,o=2,c="",E=!1;for(;n<t.length;){let F=t[n];if("string"==typeof F)if(2&o){const j=t[++n];c+="["+F+(j.length>0?'="'+j+'"':"")+"]"}else 8&o?c+="."+F:4&o&&(c+=" "+F);else""!==c&&!bi(F)&&(e+=Sp(E,c),c=""),o=F,E=E||!bi(o);n++}return""!==c&&(e+=Sp(E,c)),e}const Xt={};function xl(t){Ep(yn(),St(),wr()+t,Ts())}function Ep(t,e,n,o){if(!o)if(3==(3&e[2])){const E=t.preOrderCheckHooks;null!==E&&Ao(e,E,n)}else{const E=t.preOrderHooks;null!==E&&Os(e,E,0,n)}Hi(n)}function Np(t,e){const n=t.contentQueries;if(null!==n)for(let o=0;o<n.length;o+=2){const c=n[o],E=n[o+1];if(-1!==E){const F=t.data[E];za(c),F.contentQueries(2,e[E],E)}}}function uu(t,e,n,o,c,E,F,j,G,ie){const ce=e.blueprint.slice();return ce[0]=c,ce[2]=140|o,Es(ce),ce[3]=ce[15]=t,ce[8]=n,ce[10]=F||t&&t[10],ce[11]=j||t&&t[11],ce[12]=G||t&&t[12]||null,ce[9]=ie||t&&t[9]||null,ce[6]=E,ce[16]=2==e.type?t[16]:ce,ce}function Gs(t,e,n,o,c){let E=t.data[e];if(null===E)E=function(t,e,n,o,c){const E=nl(),F=Zo(),G=t.data[e]=function(t,e,n,o,c,E){return{type:n,index:o,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:E,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,F?E:E&&E.parent,n,e,o,c);return null===t.firstChild&&(t.firstChild=G),null!==E&&(F?null==E.child&&null!==G.parent&&(E.child=G):null===E.next&&(E.next=G)),G}(t,e,n,o,c),Gt.lFrame.inI18n&&(E.flags|=64);else if(64&E.type){E.type=n,E.value=o,E.attrs=c;const F=function(){const t=Gt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();E.injectorIndex=null===F?-1:F.injectorIndex}return ti(E,!0),E}function $s(t,e,n,o){if(0===n)return-1;const c=e.length;for(let E=0;E<n;E++)e.push(o),t.blueprint.push(o),t.data.push(null);return c}function lu(t,e,n){As(e);try{const o=t.viewQuery;null!==o&&ed(1,o,n);const c=t.template;null!==c&&Lp(t,e,c,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Np(t,e),t.staticViewQueries&&ed(2,t.viewQuery,n);const E=t.components;null!==E&&function(t,e){for(let n=0;n<e.length;n++)EC(t,e[n])}(e,E)}catch(o){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),o}finally{e[2]&=-5,Ds()}}function Ks(t,e,n,o){const c=e[2];if(256==(256&c))return;As(e);const E=Ts();try{Es(e),function(t){Gt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&Lp(t,e,n,2,o);const F=3==(3&c);if(!E)if(F){const ie=t.preOrderCheckHooks;null!==ie&&Ao(e,ie,null)}else{const ie=t.preOrderHooks;null!==ie&&Os(e,ie,0,null),Wa(e,0)}if(function(t){for(let e=Tf(t);null!==e;e=If(e)){if(!e[2])continue;const n=e[9];for(let o=0;o<n.length;o++){const c=n[o],E=c[3];0==(1024&c[2])&&Ua(E,1),c[2]|=1024}}}(e),function(t){for(let e=Tf(t);null!==e;e=If(e))for(let n=10;n<e.length;n++){const o=e[n],c=o[1];Ba(o)&&Ks(c,o,c.template,o[8])}}(e),null!==t.contentQueries&&Np(t,e),!E)if(F){const ie=t.contentCheckHooks;null!==ie&&Ao(e,ie)}else{const ie=t.contentHooks;null!==ie&&Os(e,ie,1),Wa(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let o=0;o<n.length;o++){const c=n[o];if(c<0)Hi(~c);else{const E=c,F=n[++o],j=n[++o];Kc(F,E),j(2,e[E])}}}finally{Hi(-1)}}(t,e);const j=t.components;null!==j&&function(t,e){for(let n=0;n<e.length;n++)SC(t,e[n])}(e,j);const G=t.viewQuery;if(null!==G&&ed(2,G,o),!E)if(F){const ie=t.viewCheckHooks;null!==ie&&Ao(e,ie)}else{const ie=t.viewHooks;null!==ie&&Os(e,ie,2),Wa(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),E||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ua(e[3],-1))}finally{Ds()}}function oC(t,e,n,o){const c=e[10],E=!Ts(),F=function(t){return 4==(4&t[2])}(e);try{E&&!F&&c.begin&&c.begin(),F&&lu(t,e,o),Ks(t,e,n,o)}finally{E&&!F&&c.end&&c.end()}}function Lp(t,e,n,o,c){const E=wr(),F=2&o;try{Hi(-1),F&&e.length>20&&Ep(t,e,20,Ts()),n(o,c)}finally{Hi(E)}}function Gf(t,e,n){!tl()||(function(t,e,n,o){const c=n.directiveStart,E=n.directiveEnd;t.firstCreatePass||Wr(n,e),Ar(o,e);const F=n.initialInputs;for(let j=c;j<E;j++){const G=t.data[j],ie=Ot(G);ie&&bC(e,n,G);const ce=$a(e,t,j,n);Ar(ce,e),null!==F&&wC(0,j-c,ce,G,0,F),ie&&(kr(n.index,e)[8]=ce)}}(t,e,n,zr(n,e)),128==(128&n.flags)&&function(t,e,n){const o=n.directiveStart,c=n.directiveEnd,F=n.index,j=Gt.lFrame.currentDirectiveIndex;try{Hi(F);for(let G=o;G<c;G++){const ie=t.data[G],ce=e[G];qa(G),(null!==ie.hostBindings||0!==ie.hostVars||null!==ie.hostAttrs)&&Wp(ie,ce)}}finally{Hi(-1),qa(j)}}(t,e,n))}function $f(t,e,n=zr){const o=e.localNames;if(null!==o){let c=e.index+1;for(let E=0;E<o.length;E+=2){const F=o[E+1],j=-1===F?n(e,t):t[F];t[c++]=j}}}function Bp(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Pl(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Pl(t,e,n,o,c,E,F,j,G,ie){const ce=20+o,Se=ce+c,Ie=function(t,e){const n=[];for(let o=0;o<e;o++)n.push(o<t?null:Xt);return n}(ce,Se),ke="function"==typeof ie?ie():ie;return Ie[1]={type:t,blueprint:Ie,template:n,queries:null,viewQuery:j,declTNode:e,data:Ie.slice().fill(null,ce),bindingStartIndex:ce,expandoStartIndex:Se,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof E?E():E,pipeRegistry:"function"==typeof F?F():F,firstChild:null,schemas:G,consts:ke,incompleteFirstPass:!1}}function jp(t,e,n){for(let o in t)if(t.hasOwnProperty(o)){const c=t[o];(n=null===n?{}:n).hasOwnProperty(o)?n[o].push(e,c):n[o]=[e,c]}return n}function Kf(t,e,n,o){let c=!1;if(tl()){const E=function(t,e,n){const o=t.directiveRegistry;let c=null;if(o)for(let E=0;E<o.length;E++){const F=o[E];_p(n,F.selectors,!1)&&(c||(c=[]),hl(Wr(n,e),t,F.type),Ot(F)?(Gp(t,n),c.unshift(F)):c.push(F))}return c}(t,e,n),F=null===o?null:{"":-1};if(null!==E){c=!0,$p(n,t.data.length,E.length);for(let ce=0;ce<E.length;ce++){const Se=E[ce];Se.providersResolver&&Se.providersResolver(Se)}let j=!1,G=!1,ie=$s(t,e,E.length,null);for(let ce=0;ce<E.length;ce++){const Se=E[ce];n.mergedAttrs=_t(n.mergedAttrs,Se.hostAttrs),Kp(t,n,e,ie,Se),yC(ie,Se,F),null!==Se.contentQueries&&(n.flags|=8),(null!==Se.hostBindings||null!==Se.hostAttrs||0!==Se.hostVars)&&(n.flags|=128);const Ie=Se.type.prototype;!j&&(Ie.ngOnChanges||Ie.ngOnInit||Ie.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),j=!0),!G&&(Ie.ngOnChanges||Ie.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),G=!0),ie++}!function(t,e){const o=e.directiveEnd,c=t.data,E=e.attrs,F=[];let j=null,G=null;for(let ie=e.directiveStart;ie<o;ie++){const ce=c[ie],Se=ce.inputs,Ie=null===E||Mp(e)?null:CC(Se,E);F.push(Ie),j=jp(Se,ie,j),G=jp(ce.outputs,ie,G)}null!==j&&(j.hasOwnProperty("class")&&(e.flags|=16),j.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=F,e.inputs=j,e.outputs=G}(t,n)}F&&function(t,e,n){if(e){const o=t.localNames=[];for(let c=0;c<e.length;c+=2){const E=n[e[c+1]];if(null==E)throw new st("301",`Export of name '${e[c+1]}' not found!`);o.push(e[c],E)}}}(n,o,F)}return n.mergedAttrs=_t(n.mergedAttrs,n.attrs),c}function zp(t,e,n,o,c,E){const F=E.hostBindings;if(F){let j=t.hostBindingOpCodes;null===j&&(j=t.hostBindingOpCodes=[]);const G=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(j)!=G&&j.push(G),j.push(o,c,F)}}function Wp(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Gp(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function yC(t,e,n){if(n){if(e.exportAs)for(let o=0;o<e.exportAs.length;o++)n[e.exportAs[o]]=t;Ot(e)&&(n[""]=t)}}function $p(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Kp(t,e,n,o,c){t.data[o]=c;const E=c.factory||(c.factory=lo(c.type)),F=new Qo(E,Ot(c),null);t.blueprint[o]=F,n[o]=F,zp(t,e,0,o,$s(t,n,c.hostVars,Xt),c)}function bC(t,e,n){const o=zr(e,t),c=Bp(n),E=t[10],F=Ol(t,uu(t,c,null,n.onPush?64:16,o,e,E,E.createRenderer(o,n),null,null));t[e.index]=F}function wC(t,e,n,o,c,E){const F=E[e];if(null!==F){const j=o.setInput;for(let G=0;G<F.length;){const ie=F[G++],ce=F[G++],Se=F[G++];null!==j?o.setInput(n,Se,ie,ce):n[ce]=Se}}}function CC(t,e){let n=null,o=0;for(;o<e.length;){const c=e[o];if(0!==c)if(5!==c){if("number"==typeof c)break;t.hasOwnProperty(c)&&(null===n&&(n=[]),n.push(c,t[c],e[o+1])),o+=2}else o+=2;else o+=4}return n}function Jp(t,e,n,o){return new Array(t,!0,!1,e,null,0,o,n,null,null)}function SC(t,e){const n=kr(e,t);if(Ba(n)){const o=n[1];80&n[2]?Ks(o,n,o.template,n[8]):n[5]>0&&Zf(n)}}function Zf(t){for(let o=Tf(t);null!==o;o=If(o))for(let c=10;c<o.length;c++){const E=o[c];if(1024&E[2]){const F=E[1];Ks(F,E,F.template,E[8])}else E[5]>0&&Zf(E)}const n=t[1].components;if(null!==n)for(let o=0;o<n.length;o++){const c=kr(n[o],t);Ba(c)&&c[5]>0&&Zf(c)}}function EC(t,e){const n=kr(e,t),o=n[1];(function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(o,n),lu(o,n,n[8])}function Ol(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Qf(t){for(;t;){t[2]|=64;const e=su(t);if(Dt(t)&&!e)return t;t=e}return null}function Xf(t,e,n){const o=e[10];o.begin&&o.begin();try{Ks(t,e,t.template,n)}catch(c){throw eg(e,c),c}finally{o.end&&o.end()}}function Zp(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],o=Mf(n),c=o[1];oC(c,o,c.template,n)}}(t[8])}function ed(t,e,n){za(0),e(t,n)}const AC=(()=>Promise.resolve(null))();function Qp(t){return t[7]||(t[7]=[])}function Yp(t){return t.cleanup||(t.cleanup=[])}function eg(t,e){const n=t[9],o=n?n.get(is,null):null;o&&o.handleError(e)}function tg(t,e,n,o,c){for(let E=0;E<n.length;){const F=n[E++],j=n[E++],G=e[F],ie=t.data[F];null!==ie.setInput?ie.setInput(G,c,o,j):G[j]=c}}function kl(t,e,n){let o=n?t.styles:null,c=n?t.classes:null,E=0;if(null!==e)for(let F=0;F<e.length;F++){const j=e[F];"number"==typeof j?E=j:1==E?c=dt(c,j):2==E&&(o=dt(o,j+": "+e[++F]+";"))}n?t.styles=o:t.stylesWithoutHost=o,n?t.classes=c:t.classesWithoutHost=c}const Js=new Vn("INJECTOR",-1);class ng{get(e,n=Qa){if(n===Qa){const o=new Error(`NullInjectorError: No provider for ${Ge(e)}!`);throw o.name="NullInjectorError",o}return n}}const cu=new Vn("Set Injector scope."),fu={},OC={};let td;function rg(){return void 0===td&&(td=new ng),td}function ig(t,e=null,n=null,o){return new NC(t,n,e||rg(),o)}class NC{constructor(e,n,o,c=null){this.parent=o,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const E=[];n&&qi(n,j=>this.processProvider(j,e,n)),qi([e],j=>this.processInjectorType(j,[],E)),this.records.set(Js,Zs(void 0,this));const F=this.records.get(cu);this.scope=null!=F?F.value:null,this.source=c||("object"==typeof e?null:Ge(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,n=Qa,o=Ut.Default){this.assertNotDestroyed();const c=Hs(this),E=$r(void 0);try{if(!(o&Ut.SkipSelf)){let j=this.records.get(e);if(void 0===j){const G=function(t){return"function"==typeof t||"object"==typeof t&&t instanceof Vn}(e)&&tn(e);j=G&&this.injectableDefInScope(G)?Zs(nd(e),fu):null,this.records.set(e,j)}if(null!=j)return this.hydrate(e,j)}return(o&Ut.Self?rg():this.parent).get(e,n=o&Ut.Optional&&n===Qa?null:n)}catch(F){if("NullInjectorError"===F.name){if((F[Vs]=F[Vs]||[]).unshift(Ge(e)),c)throw F;return S0(F,e,"R3InjectorError",this.source)}throw F}finally{$r(E),Hs(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((o,c)=>e.push(Ge(c))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,n,o){if(!(e=Ve(e)))return!1;let c=Ni(e);const E=null==c&&e.ngModule||void 0,F=void 0===E?e:E,j=-1!==o.indexOf(F);if(void 0!==E&&(c=Ni(E)),null==c)return!1;if(null!=c.imports&&!j){let ce;o.push(F);try{qi(c.imports,Se=>{this.processInjectorType(Se,n,o)&&(void 0===ce&&(ce=[]),ce.push(Se))})}finally{}if(void 0!==ce)for(let Se=0;Se<ce.length;Se++){const{ngModule:Ie,providers:ke}=ce[Se];qi(ke,Fe=>this.processProvider(Fe,Ie,ke||An))}}this.injectorDefTypes.add(F);const G=lo(F)||(()=>new F);this.records.set(F,Zs(G,fu));const ie=c.providers;if(null!=ie&&!j){const ce=e;qi(ie,Se=>this.processProvider(Se,ce,ie))}return void 0!==E&&void 0!==e.providers}processProvider(e,n,o){let c=Qs(e=Ve(e))?e:Ve(e&&e.provide);const E=function(t,e,n){return sg(t)?Zs(void 0,t.useValue):Zs(function(t,e,n){let o;if(Qs(t)){const c=Ve(t);return lo(c)||nd(c)}if(sg(t))o=()=>Ve(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))o=()=>t.useFactory(...ts(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))o=()=>vn(Ve(t.useExisting));else{const c=Ve(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return lo(c)||nd(c);o=()=>new c(...ts(t.deps))}return o}(t),fu)}(e);if(Qs(e)||!0!==e.multi)this.records.get(c);else{let F=this.records.get(c);F||(F=Zs(void 0,fu,!0),F.factory=()=>ts(F.multi),this.records.set(c,F)),c=e,F.multi.push(e)}this.records.set(c,E)}hydrate(e,n){return n.value===fu&&(n.value=OC,n.value=n.factory()),"object"==typeof n.value&&n.value&&function(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this.onDestroy.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=Ve(e.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function nd(t){const e=tn(t),n=null!==e?e.factory:lo(t);if(null!==n)return n;if(t instanceof Vn)throw new Error(`Token ${Ge(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const o=function(t,e){const n=[];for(let o=0;o<t;o++)n.push(e);return n}(e,"?");throw new Error(`Can't resolve all parameters for ${Ge(t)}: (${o.join(", ")}).`)}const n=function(t){const e=t&&(t[wo]||t[ps]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Zs(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function sg(t){return null!==t&&"object"==typeof t&&hf in t}function Qs(t){return"function"==typeof t}const ag=function(t,e,n){return function(t,e=null,n=null,o){const c=ig(t,e,n,o);return c._resolveInjectorDefTypes(),c}({name:n},e,t,n)};class Fn{static create(e,n){return Array.isArray(e)?ag(e,n,""):ag(e.providers,e.parent,e.name||"")}}function n2(t,e){or(Mf(t)[1],ir())}Fn.THROW_IF_NOT_FOUND=Qa,Fn.NULL=new ng,Fn.\u0275prov=xt({token:Fn,providedIn:"any",factory:()=>vn(Js)}),Fn.__NG_ELEMENT_ID__=-1;let Nl=null;function Ys(){if(!Nl){const t=cn.Symbol;if(t&&t.iterator)Nl=t.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<e.length;++n){const o=e[n];"entries"!==o&&"size"!==o&&Map.prototype[o]===Map.prototype.entries&&(Nl=o)}}}return Nl}function hu(t){return!!ld(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ys()in t)}function ld(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Fl(t,e,n,o,c,E,F,j){const G=St(),ie=yn(),ce=t+20,Se=ie.firstCreatePass?function(t,e,n,o,c,E,F,j,G){const ie=e.consts,ce=Gs(e,t,4,F||null,Ui(ie,j));Kf(e,n,ce,Ui(ie,G)),or(e,ce);const Se=ce.tViews=Pl(2,ce,o,c,E,e.directiveRegistry,e.pipeRegistry,null,e.schemas,ie);return null!==e.queries&&(e.queries.template(e,ce),Se.queries=e.queries.embeddedTView(ce)),ce}(ce,ie,G,e,n,o,c,E,F):ie.data[ce];ti(Se,!1);const Ie=G[11].createComment("");Tl(ie,G,Ie,Se),Ar(Ie,G),Ol(G,G[ce]=Jp(Ie,G,Ie,Se)),bt(Se)&&Gf(ie,G,Se),null!=F&&$f(G,Se,j)}function hn(t,e=Ut.Default){const n=St();return null===n?vn(t,e):g0(ir(),n,Ve(t),e)}function gu(t,e,n){const o=St();return function(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}(o,Gt.lFrame.bindingIndex++,e)&&function(t,e,n,o,c,E,F,j){const G=zr(e,n);let ce,ie=e.inputs;!j&&null!=ie&&(ce=ie[o])?(tg(t,n,ce,o,c),vt(e)&&function(t,e){const n=kr(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(o=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(o),c=null!=F?F(c,e.value||"",o):c,Hn(E)?E.setProperty(G,o,c):nt(o)||(G.setProperty?G.setProperty(o,c):G[o]=c))}(yn(),function(){const t=Gt.lFrame;return Fa(t.tView,t.selectedIndex)}(),o,t,e,o[11],n,!1),gu}function pd(t,e,n,o,c){const F=c?"class":"style";tg(t,n,e.inputs[F],F,o)}function Zi(t,e,n,o){const c=St(),E=yn(),F=20+t,j=c[11],G=c[F]=Rf(j,e,Gt.lFrame.currentNamespace),ie=E.firstCreatePass?function(t,e,n,o,c,E,F){const j=e.consts,ie=Gs(e,t,2,c,Ui(j,E));return Kf(e,n,ie,Ui(j,F)),null!==ie.attrs&&kl(ie,ie.attrs,!1),null!==ie.mergedAttrs&&kl(ie,ie.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,ie),ie}(F,E,c,0,e,n,o):E.data[F];ti(ie,!0);const ce=ie.mergedAttrs;null!==ce&&gt(j,G,ce);const Se=ie.classes;null!==Se&&Nf(j,G,Se);const Ie=ie.styles;null!==Ie&&bp(j,G,Ie),64!=(64&ie.flags)&&Tl(E,c,G,ie),0===Gt.lFrame.elementDepthCount&&Ar(G,c),Gt.lFrame.elementDepthCount++,bt(ie)&&(Gf(E,c,ie),function(t,e,n){if(yt(e)){const c=e.directiveEnd;for(let E=e.directiveStart;E<c;E++){const F=t.data[E];F.contentQueries&&F.contentQueries(1,n[E],E)}}}(E,ie,c)),null!==o&&$f(c,ie)}function Qi(){let t=ir();Zo()?Gt.lFrame.isParent=!1:(t=t.parent,ti(t,!1));const e=t;Gt.lFrame.elementDepthCount--;const n=yn();n.firstCreatePass&&(or(n,t),yt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&pd(n,e,St(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&pd(n,e,St(),e.stylesWithoutHost,!1)}function gd(){return St()}function vd(t){return!!t&&"function"==typeof t.then}const Qg=function(t){return!!t&&"function"==typeof t.subscribe};function Ul(t,e,n,o){const c=St(),E=yn(),F=ir();return function(t,e,n,o,c,E,F,j){const G=bt(o),ce=t.firstCreatePass&&Yp(t),Se=e[8],Ie=Qp(e);let ke=!0;if(3&o.type||j){const Qe=zr(o,e),Et=j?j(Qe):Qe,wt=Ie.length,kt=j?zt=>j(rr(zt[o.index])):o.index;if(Hn(n)){let zt=null;if(!j&&G&&(zt=function(t,e,n,o){const c=t.cleanup;if(null!=c)for(let E=0;E<c.length-1;E+=2){const F=c[E];if(F===n&&c[E+1]===o){const j=e[7],G=c[E+2];return j.length>G?j[G]:null}"string"==typeof F&&(E+=2)}return null}(t,e,c,o.index)),null!==zt)(zt.__ngLastListenerFn__||zt).__ngNextListenerFn__=E,zt.__ngLastListenerFn__=E,ke=!1;else{E=md(o,e,Se,E,!1);const ln=n.listen(Et,c,E);Ie.push(E,ln),ce&&ce.push(c,kt,wt,wt+1)}}else E=md(o,e,Se,E,!0),Et.addEventListener(c,E,F),Ie.push(E),ce&&ce.push(c,kt,wt,F)}else E=md(o,e,Se,E,!1);const Fe=o.outputs;let mt;if(ke&&null!==Fe&&(mt=Fe[c])){const Qe=mt.length;if(Qe)for(let Et=0;Et<Qe;Et+=2){const yr=e[mt[Et]][mt[Et+1]].subscribe(E),fi=Ie.length;Ie.push(E,yr),ce&&ce.push(c,o.index,fi,-(fi+1))}}}(E,c,c[11],F,t,e,!!n,o),Ul}function ev(t,e,n,o){try{return!1!==n(o)}catch(c){return eg(t,c),!1}}function md(t,e,n,o,c){return function E(F){if(F===Function)return o;const j=2&t.flags?kr(t.index,e):e;0==(32&e[2])&&Qf(j);let G=ev(e,0,o,F),ie=E.__ngNextListenerFn__;for(;ie;)G=ev(e,0,ie,F)&&G,ie=ie.__ngNextListenerFn__;return c&&!1===G&&(F.preventDefault(),F.returnValue=!1),G}}function Vl(t=1){return function(t){return(Gt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Gt.lFrame.contextLView))[8]}(t)}function mu(t,e=""){const n=St(),o=yn(),c=t+20,E=o.firstCreatePass?Gs(o,c,1,e,null):o.data[c],F=n[c]=function(t,e){return Hn(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Tl(o,n,F,E),ti(E,!1)}const as=void 0;var xM=["en",[["a","p"],["AM","PM"],as],[["AM","PM"],as,as],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],as,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],as,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",as,"{1} 'at' {0}",as],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ca={};function Gv(t){return t in ca||(ca[t]=cn.ng&&cn.ng.common&&cn.ng.common.locales&&cn.ng.common.locales[t]),ca[t]}var Pt=(()=>((Pt=Pt||{})[Pt.LocaleId=0]="LocaleId",Pt[Pt.DayPeriodsFormat=1]="DayPeriodsFormat",Pt[Pt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Pt[Pt.DaysFormat=3]="DaysFormat",Pt[Pt.DaysStandalone=4]="DaysStandalone",Pt[Pt.MonthsFormat=5]="MonthsFormat",Pt[Pt.MonthsStandalone=6]="MonthsStandalone",Pt[Pt.Eras=7]="Eras",Pt[Pt.FirstDayOfWeek=8]="FirstDayOfWeek",Pt[Pt.WeekendRange=9]="WeekendRange",Pt[Pt.DateFormat=10]="DateFormat",Pt[Pt.TimeFormat=11]="TimeFormat",Pt[Pt.DateTimeFormat=12]="DateTimeFormat",Pt[Pt.NumberSymbols=13]="NumberSymbols",Pt[Pt.NumberFormats=14]="NumberFormats",Pt[Pt.CurrencyCode=15]="CurrencyCode",Pt[Pt.CurrencySymbol=16]="CurrencySymbol",Pt[Pt.CurrencyName=17]="CurrencyName",Pt[Pt.Currencies=18]="Currencies",Pt[Pt.Directionality=19]="Directionality",Pt[Pt.PluralCase=20]="PluralCase",Pt[Pt.ExtraData=21]="ExtraData",Pt))();const jl="en-US";let $v=jl;function Cd(t){Kt(t,"Expected localeId to be defined"),"string"==typeof t&&($v=t.toLowerCase().replace(/_/g,"-"))}class ym{}const wm="ngComponent";class R_{resolveComponentFactory(e){throw function(t){const e=Error(`No component factory found for ${Ge(t)}. Did you add it to @NgModule.entryComponents?`);return e[wm]=t,e}(e)}}class us{}function $l(...t){}function da(t,e){return new Ei(zr(t,e))}us.NULL=new R_;const P_=function(){return da(ir(),St())};let Ei=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=P_,t})();class Kl{}let Rd=(()=>{class t{}return t.\u0275prov=xt({token:t,providedIn:"root",factory:()=>null}),t})();class Ad{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const _m=new Ad("12.2.2");class Sm{constructor(){}supports(e){return hu(e)}create(e){return new B_(e)}}const F_=(t,e)=>e;class B_{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||F_}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,o=this._removalsHead,c=0,E=null;for(;n||o;){const F=!o||n&&n.currentIndex<Tm(o,c,E)?n:o,j=Tm(F,c,E),G=F.currentIndex;if(F===o)c--,o=o._nextRemoved;else if(n=n._next,null==F.previousIndex)c++;else{E||(E=[]);const ie=j-c,ce=G-c;if(ie!=ce){for(let Ie=0;Ie<ie;Ie++){const ke=Ie<E.length?E[Ie]:E[Ie]=0,Fe=ke+Ie;ce<=Fe&&Fe<ie&&(E[Ie]=ke+1)}E[F.previousIndex]=ce-ie}}j!==G&&e(F,j,G)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!hu(e))throw new Error(`Error trying to diff '${Ge(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let c,E,F,n=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(let j=0;j<this.length;j++)E=e[j],F=this._trackByFn(j,E),null!==n&&Object.is(n.trackById,F)?(o&&(n=this._verifyReinsertion(n,E,F,j)),Object.is(n.item,E)||this._addIdentityChange(n,E)):(n=this._mismatch(n,E,F,j),o=!0),n=n._next}else c=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Ys()]();let o;for(;!(o=n.next()).done;)e(o.value)}}(e,j=>{F=this._trackByFn(c,j),null!==n&&Object.is(n.trackById,F)?(o&&(n=this._verifyReinsertion(n,j,F,c)),Object.is(n.item,j)||this._addIdentityChange(n,j)):(n=this._mismatch(n,j,F,c),o=!0),n=n._next,c++}),this.length=c;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,o,c){let E;return null===e?E=this._itTail:(E=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,E,c)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(o,c))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,E,c)):e=this._addAfter(new U_(n,o),E,c),e}_verifyReinsertion(e,n,o,c){let E=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==E?e=this._reinsertAfter(E,e._prev,c):e.currentIndex!=c&&(e.currentIndex=c,this._addToMoves(e,c)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const c=e._prevRemoved,E=e._nextRemoved;return null===c?this._removalsHead=E:c._nextRemoved=E,null===E?this._removalsTail=c:E._prevRemoved=c,this._insertAfter(e,n,o),this._addToMoves(e,o),e}_moveAfter(e,n,o){return this._unlink(e),this._insertAfter(e,n,o),this._addToMoves(e,o),e}_addAfter(e,n,o){return this._insertAfter(e,n,o),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,o){const c=null===n?this._itHead:n._next;return e._next=c,e._prev=n,null===c?this._itTail=e:c._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new Em),this._linkedRecords.put(e),e.currentIndex=o,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,o=e._next;return null===n?this._itHead=o:n._next=o,null===o?this._itTail=n:o._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Em),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class U_{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class V_{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===n||n<=o.currentIndex)&&Object.is(o.trackById,e))return o;return null}remove(e){const n=e._prevDup,o=e._nextDup;return null===n?this._head=o:n._nextDup=o,null===o?this._tail=n:o._prevDup=n,null===this._head}}class Em{constructor(){this.map=new Map}put(e){const n=e.trackById;let o=this.map.get(n);o||(o=new V_,this.map.set(n,o)),o.add(e)}get(e,n){const c=this.map.get(e);return c?c.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Tm(t,e,n){const o=t.previousIndex;if(null===o)return o;let c=0;return n&&o<n.length&&(c=n[o]),o+e+c}class Im{constructor(){}supports(e){return e instanceof Map||ld(e)}create(){return new H_}}class H_{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||ld(e)))throw new Error(`Error trying to diff '${Ge(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(o,c)=>{if(n&&n.key===c)this._maybeAddToChanges(n,o),this._appendAfter=n,n=n._next;else{const E=this._getOrCreateRecordForKey(c,o);n=this._insertBeforeOrAppend(n,E)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let o=n;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const o=e._prev;return n._next=e,n._prev=o,e._prev=n,o&&(o._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const c=this._records.get(e);this._maybeAddToChanges(c,n);const E=c._prev,F=c._next;return E&&(E._next=F),F&&(F._prev=E),c._next=null,c._prev=null,c}const o=new j_(e);return this._records.set(e,o),o.currentValue=n,this._addToAdditions(o),o}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(o=>n(e[o],o))}}class j_{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function xm(){return new Mu([new Sm])}let Mu=(()=>{class t{constructor(n){this.factories=n}static create(n,o){if(null!=o){const c=o.factories.slice();n=n.concat(c)}return new t(n)}static extend(n){return{provide:t,useFactory:o=>t.create(n,o||xm()),deps:[[t,new ns,new zi]]}}find(n){const o=this.factories.find(c=>c.supports(n));if(null!=o)return o;throw new Error(`Cannot find a differ supporting object '${n}' of type '${function(t){return t.name||typeof t}(n)}'`)}}return t.\u0275prov=xt({token:t,providedIn:"root",factory:xm}),t})();function Rm(){return new ha([new Im])}let ha=(()=>{class t{constructor(n){this.factories=n}static create(n,o){if(o){const c=o.factories.slice();n=n.concat(c)}return new t(n)}static extend(n){return{provide:t,useFactory:o=>t.create(n,o||Rm()),deps:[[t,new ns,new zi]]}}find(n){const o=this.factories.find(c=>c.supports(n));if(o)return o;throw new Error(`Cannot find a differ supporting object '${n}'`)}}return t.\u0275prov=xt({token:t,providedIn:"root",factory:Rm}),t})();function Jl(t,e,n,o,c=!1){for(;null!==n;){const E=e[n.index];if(null!==E&&o.push(rr(E)),pt(E))for(let j=10;j<E.length;j++){const G=E[j],ie=G[1].firstChild;null!==ie&&Jl(G[1],G,ie,o)}const F=n.type;if(8&F)Jl(t,e,n.child,o);else if(32&F){const j=Ef(n,e);let G;for(;G=j();)o.push(G)}else if(16&F){const j=vp(e,n);if(Array.isArray(j))o.push(...j);else{const G=su(e[16]);Jl(G[1],G,j,o,!0)}}n=c?n.projectionNext:n.next}return o}class _u{constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,n=e[1];return Jl(n,e,n.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(pt(e)){const n=e[8],o=n?n.indexOf(this):-1;o>-1&&(Af(e,o),es(n,o))}this._attachedToViewContainer=!1}ap(this._lView[1],this._lView)}onDestroy(e){!function(t,e,n,o){const c=Qp(e);null===n?c.push(o):(c.push(n),t.firstCreatePass&&Yp(t).push(o,c.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){Qf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Xf(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Is(!0);try{Xf(t,e,n)}finally{Is(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(t,e){au(t,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class z_ extends _u{constructor(e){super(e),this._view=e}detectChanges(){Zp(this._view)}checkNoChanges(){!function(t){Is(!0);try{Zp(t)}finally{Is(!1)}}(this._view)}get context(){return null}}const Z_=[new Im],Y_=new Mu([new Sm]),X_=new ha(Z_),tS=function(){return function(t,e){return 4&t.type?new rS(e,t,da(t,e)):null}(ir(),St())};let vo=(()=>{class t{}return t.__NG_ELEMENT_ID__=tS,t})();const nS=vo,rS=class extends nS{constructor(e,n,o){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=o}createEmbeddedView(e){const n=this._declarationTContainer.tViews,o=uu(this._declarationLView,n,e,16,null,n.declTNode,null,null,null,null);o[17]=this._declarationLView[this._declarationTContainer.index];const E=this._declarationLView[19];return null!==E&&(o[19]=E.createEmbeddedView(n)),lu(n,o,e),new _u(o)}};class ls{}const aS=function(){return function(t,e){let n;const o=e[t.index];if(pt(o))n=o;else{let c;if(8&t.type)c=rr(o);else{const E=e[11];c=E.createComment("");const F=zr(t,e);os(E,El(E,F),c,function(t,e){return Hn(t)?t.nextSibling(e):e.nextSibling}(E,F),!1)}e[t.index]=n=Jp(o,e,c,t),Ol(e,n)}return new Am(n,t,e)}(ir(),St())};let eo=(()=>{class t{}return t.__NG_ELEMENT_ID__=aS,t})();const lS=eo,Am=class extends lS{constructor(e,n,o){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=o}get element(){return da(this._hostTNode,this._hostLView)}get injector(){return new Ns(this._hostTNode,this._hostLView)}get parentInjector(){const e=dl(this._hostTNode,this._hostLView);if(Lt(e)){const n=nn(e,this._hostLView),o=Rt(e);return new Ns(n[1].data[o+8],n)}return new Ns(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=Dm(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,o){const c=e.createEmbeddedView(n||{});return this.insert(c,o),c}createComponent(e,n,o,c,E){const F=o||this.parentInjector;if(!E&&null==e.ngModule&&F){const G=F.get(ls,null);G&&(E=G)}const j=e.create(F,c,void 0,E);return this.insert(j.hostView,n),j}insert(e,n){const o=e._lView,c=o[1];if(function(t){return pt(t[3])}(o)){const ce=this.indexOf(e);if(-1!==ce)this.detach(ce);else{const Se=o[3],Ie=new Am(Se,Se[6],Se[3]);Ie.detach(Ie.indexOf(e))}}const E=this._adjustIndex(n),F=this._lContainer;!function(t,e,n,o){const c=10+o,E=n.length;o>0&&(n[c-1][4]=e),o<E-10?(e[4]=n[c],vl(n,10+o,e)):(n.push(e),e[4]=null),e[3]=n;const F=e[17];null!==F&&n!==F&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(F,e);const j=e[19];null!==j&&j.insertView(t),e[2]|=128}(c,o,F,E);const j=Of(E,F),G=o[11],ie=El(G,F[7]);return null!==ie&&function(t,e,n,o,c,E){o[0]=c,o[6]=e,au(t,o,n,1,c,E)}(c,F[6],G,o,ie,j),e.attachToViewContainerRef(),vl(Dd(F),E,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=Dm(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),o=Af(this._lContainer,n);o&&(es(Dd(this._lContainer),n),ap(o[1],o))}detach(e){const n=this._adjustIndex(e,-1),o=Af(this._lContainer,n);return o&&null!=es(Dd(this._lContainer),n)?new _u(o):null}_adjustIndex(e,n=0){return null==e?this.length+n:e}};function Dm(t){return t[8]}function Dd(t){return t[8]||(t[8]=[])}const ma={};class Ym extends us{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=cr(e);return new ey(n,this.ngModule)}}function Xm(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const o3=new Vn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>X0});class ey extends ym{constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function(t){return t.map(Gw).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return Xm(this.componentDef.inputs)}get outputs(){return Xm(this.componentDef.outputs)}create(e,n,o,c){const E=(c=c||this.ngModule)?function(t,e){return{get:(n,o,c)=>{const E=t.get(n,ma,c);return E!==ma||o===ma?E:e.get(n,o,c)}}}(e,c.injector):e,F=E.get(Kl,Ko),j=E.get(Rd,null),G=F.createRenderer(null,this.componentDef),ie=this.componentDef.selectors[0][0]||"div",ce=o?function(t,e,n){if(Hn(t))return t.selectRootElement(e,n===Jn.ShadowDom);let o="string"==typeof e?t.querySelector(e):e;return o.textContent="",o}(G,o,this.componentDef.encapsulation):Rf(F.createRenderer(null,this.componentDef),ie,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(ie)),Se=this.componentDef.onPush?576:528,Ie=function(t,e){return{components:[],scheduler:t||X0,clean:AC,playerHandler:e||null,flags:0}}(),ke=Pl(0,null,null,1,0,null,null,null,null,null),Fe=uu(null,ke,Ie,Se,null,null,F,G,j,E);let mt,Qe;As(Fe);try{const Et=function(t,e,n,o,c,E){const F=n[1];n[20]=t;const G=Gs(F,20,2,"#host",null),ie=G.mergedAttrs=e.hostAttrs;null!==ie&&(kl(G,ie,!0),null!==t&&(gt(c,t,ie),null!==G.classes&&Nf(c,t,G.classes),null!==G.styles&&bp(c,t,G.styles)));const ce=o.createRenderer(t,e),Se=uu(n,Bp(e),null,e.onPush?64:16,n[20],G,o,ce,E||null,null);return F.firstCreatePass&&(hl(Wr(G,n),F,e.type),Gp(F,G),$p(G,n.length,1)),Ol(n,Se),n[20]=Se}(ce,this.componentDef,Fe,F,G);if(ce)if(o)gt(G,ce,["ng-version",_m.full]);else{const{attrs:wt,classes:kt}=function(t){const e=[],n=[];let o=1,c=2;for(;o<t.length;){let E=t[o];if("string"==typeof E)2===c?""!==E&&e.push(E,t[++o]):8===c&&n.push(E);else{if(!bi(c))break;c=E}o++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);wt&&gt(G,ce,wt),kt&&kt.length>0&&Nf(G,ce,kt.join(" "))}if(Qe=Fa(ke,20),void 0!==n){const wt=Qe.projection=[];for(let kt=0;kt<this.ngContentSelectors.length;kt++){const zt=n[kt];wt.push(null!=zt?Array.from(zt):null)}}mt=function(t,e,n,o,c){const E=n[1],F=function(t,e,n){const o=ir();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Kp(t,o,e,$s(t,e,1,null),n));const c=$a(e,t,o.directiveStart,o);Ar(c,e);const E=zr(o,e);return E&&Ar(E,e),c}(E,n,e);if(o.components.push(F),t[8]=F,c&&c.forEach(G=>G(F,e)),e.contentQueries){const G=ir();e.contentQueries(1,F,G.directiveStart)}const j=ir();return!E.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Hi(j.index),zp(n[1],j,0,j.directiveStart,j.directiveEnd,e),Wp(e,F)),F}(Et,this.componentDef,Fe,Ie,[n2]),lu(ke,Fe,null)}finally{Ds()}return new u3(this.componentType,mt,da(Qe,Fe),Fe,Qe)}}class u3 extends class{}{constructor(e,n,o,c,E){super(),this.location=o,this._rootLView=c,this._tNode=E,this.instance=n,this.hostView=this.changeDetectorRef=new z_(c),this.componentType=e}get injector(){return new Ns(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const ya=new Map;class f3 extends ls{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ym(this);const o=fr(e),c=function(t){return t[jo]||null}(e);c&&Cd(c),this._bootstrapComponents=$i(o.bootstrap),this._r3Injector=ig(e,n,[{provide:ls,useValue:this},{provide:us,useValue:this.componentFactoryResolver}],Ge(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,n=Fn.THROW_IF_NOT_FOUND,o=Ut.Default){return e===Fn||e===ls||e===Js?this:this._r3Injector.get(e,n,o)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class zd extends class{}{constructor(e){super(),this.moduleType=e,null!==fr(e)&&function(t){const e=new Set;!function n(o){const c=fr(o,!0),E=c.id;null!==E&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${Ge(e)} vs ${Ge(e.name)}`)}(E,ya.get(E),o),ya.set(E,o));const F=$i(c.imports);for(const j of F)e.has(j)||(e.add(j),n(j))}(t)}(e)}create(e){return new f3(this.moduleType,e)}}function Wd(t){return e=>{setTimeout(t,void 0,e)}}const mo=class extends r{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,o){var c,E,F;let j=e,G=n||(()=>null),ie=o;if(e&&"object"==typeof e){const Se=e;j=null===(c=Se.next)||void 0===c?void 0:c.bind(Se),G=null===(E=Se.error)||void 0===E?void 0:E.bind(Se),ie=null===(F=Se.complete)||void 0===F?void 0:F.bind(Se)}this.__isAsync&&(G=Wd(G),j&&(j=Wd(j)),ie&&(ie=Wd(ie)));const ce=super.subscribe({next:j,error:G,complete:ie});return e instanceof y&&e.add(ce),ce}};Symbol;const ic=new Vn("Application Initializer");let wa=(()=>{class t{constructor(n){this.appInits=n,this.resolve=$l,this.reject=$l,this.initialized=!1,this.done=!1,this.donePromise=new Promise((o,c)=>{this.resolve=o,this.reject=c})}runInitializers(){if(this.initialized)return;const n=[],o=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const E=this.appInits[c]();if(vd(E))n.push(E);else if(Qg(E)){const F=new Promise((j,G)=>{E.subscribe({complete:j,error:G})});n.push(F)}}Promise.all(n).then(()=>{o()}).catch(c=>{this.reject(c)}),0===n.length&&o(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(vn(ic,8))},t.\u0275prov=xt({token:t,factory:t.\u0275fac}),t})();const Nu=new Vn("AppId"),vE={provide:Nu,useFactory:function(){return`${nh()}${nh()}${nh()}`},deps:[]};function nh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ay=new Vn("Platform Initializer"),rh=new Vn("Platform ID"),mE=new Vn("appBootstrapListener");let ih=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=xt({token:t,factory:t.\u0275fac}),t})();const No=new Vn("LocaleId"),Dy=new Vn("DefaultCurrencyCode");class bE{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}const oh=function(t){return new zd(t)},wE=oh,CE=function(t){return Promise.resolve(oh(t))},Py=function(t){const e=oh(t),o=$i(fr(t).declarations).reduce((c,E)=>{const F=cr(E);return F&&c.push(new ey(F)),c},[]);return new bE(e,o)},ME=Py,_E=function(t){return Promise.resolve(Py(t))};let sc=(()=>{class t{constructor(){this.compileModuleSync=wE,this.compileModuleAsync=CE,this.compileModuleAndAllComponentsSync=ME,this.compileModuleAndAllComponentsAsync=_E}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=xt({token:t,factory:t.\u0275fac}),t})();const TE=(()=>Promise.resolve(0))();function sh(t){"undefined"==typeof Zone?TE.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Ir{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new mo(!1),this.onMicrotaskEmpty=new mo(!1),this.onStable=new mo(!1),this.onError=new mo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!o&&n,c.shouldCoalesceRunChangeDetection=o,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function(){let t=cn.requestAnimationFrame,e=cn.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const o=e[Zone.__symbol__("OriginalDelegate")];o&&(e=o)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(cn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,uh(t),t.isCheckStableRunning=!0,ah(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),uh(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,o,c,E,F,j)=>{try{return Oy(t),n.invokeTask(c,E,F,j)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===E.type||t.shouldCoalesceRunChangeDetection)&&e(),ky(t)}},onInvoke:(n,o,c,E,F,j,G)=>{try{return Oy(t),n.invoke(c,E,F,j,G)}finally{t.shouldCoalesceRunChangeDetection&&e(),ky(t)}},onHasTask:(n,o,c,E)=>{n.hasTask(c,E),o===c&&("microTask"==E.change?(t._hasPendingMicrotasks=E.microTask,uh(t),ah(t)):"macroTask"==E.change&&(t.hasPendingMacrotasks=E.macroTask))},onHandleError:(n,o,c,E)=>(n.handleError(c,E),t.runOutsideAngular(()=>t.onError.emit(E)),!1)})}(c)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ir.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ir.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,n,o){return this._inner.run(e,n,o)}runTask(e,n,o,c){const E=this._inner,F=E.scheduleEventTask("NgZoneEvent: "+c,e,xE,$l,$l);try{return E.runTask(F,n,o)}finally{E.cancelTask(F)}}runGuarded(e,n,o){return this._inner.runGuarded(e,n,o)}runOutsideAngular(e){return this._outer.run(e)}}const xE={};function ah(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function uh(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Oy(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ky(t){t._nesting--,ah(t)}class DE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new mo,this.onMicrotaskEmpty=new mo,this.onStable=new mo,this.onError=new mo}run(e,n,o){return e.apply(n,o)}runGuarded(e,n,o){return e.apply(n,o)}runOutsideAngular(e){return e()}runTask(e,n,o,c){return e.apply(n,o)}}let lh=(()=>{class t{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ir.assertNotInAngularZone(),sh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())sh(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(n)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,o,c){let E=-1;o&&o>0&&(E=setTimeout(()=>{this._callbacks=this._callbacks.filter(F=>F.timeoutId!==E),n(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:n,timeoutId:E,updateCb:c})}whenStable(n,o,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,o,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,o,c){return[]}}return t.\u0275fac=function(n){return new(n||t)(vn(Ir))},t.\u0275prov=xt({token:t,factory:t.\u0275fac}),t})(),Ny=(()=>{class t{constructor(){this._applications=new Map,ch.addToWindow(this)}registerApplication(n,o){this._applications.set(n,o)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,o=!0){return ch.findTestabilityInTree(this,n,o)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=xt({token:t,factory:t.\u0275fac}),t})();class PE{addToWindow(e){}findTestabilityInTree(e,n,o){return null}}let ch=new PE,Ly=!0,Fy=!1;let xi;const Uy=new Vn("AllowMultipleToken");function Vy(t,e,n=[]){const o=`Platform: ${e}`,c=new Vn(o);return(E=[])=>{let F=Hy();if(!F||F.injector.get(Uy,!1))if(t)t(n.concat(E).concat({provide:c,useValue:!0}));else{const j=n.concat(E).concat({provide:c,useValue:!0},{provide:cu,useValue:"platform"});!function(t){if(xi&&!xi.destroyed&&!xi.injector.get(Uy,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");xi=t.get(jy);const e=t.get(Ay,null);e&&e.forEach(n=>n())}(Fn.create({providers:j,name:o}))}return function(t){const e=Hy();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(c)}}function Hy(){return xi&&!xi.destroyed?xi:null}let jy=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,o){const j=function(t,e){let n;return n="noop"===t?new DE:("zone.js"===t?void 0:t)||new Ir({enableLongStackTrace:(Fy=!0,Ly),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(o?o.ngZone:void 0,{ngZoneEventCoalescing:o&&o.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:o&&o.ngZoneRunCoalescing||!1}),G=[{provide:Ir,useValue:j}];return j.run(()=>{const ie=Fn.create({providers:G,parent:this.injector,name:n.moduleType.name}),ce=n.create(ie),Se=ce.injector.get(is,null);if(!Se)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return j.runOutsideAngular(()=>{const Ie=j.onError.subscribe({next:ke=>{Se.handleError(ke)}});ce.onDestroy(()=>{fh(this._modules,ce),Ie.unsubscribe()})}),function(t,e,n){try{const o=n();return vd(o)?o.catch(c=>{throw e.runOutsideAngular(()=>t.handleError(c)),c}):o}catch(o){throw e.runOutsideAngular(()=>t.handleError(o)),o}}(Se,j,()=>{const Ie=ce.injector.get(wa);return Ie.runInitializers(),Ie.donePromise.then(()=>(Cd(ce.injector.get(No,jl)||jl),this._moduleDoBootstrap(ce),ce))})})}bootstrapModule(n,o=[]){const c=qy({},o);return function(t,e,n){const o=new zd(n);return Promise.resolve(o)}(0,0,n).then(E=>this.bootstrapModuleFactory(E,c))}_moduleDoBootstrap(n){const o=n.injector.get(Lu);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(c=>o.bootstrap(c));else{if(!n.instance.ngDoBootstrap)throw new Error(`The module ${Ge(n.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);n.instance.ngDoBootstrap(o)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(vn(Fn))},t.\u0275prov=xt({token:t,factory:t.\u0275fac}),t})();function qy(t,e){return Array.isArray(e)?e.reduce(qy,t):Object.assign(Object.assign({},t),e)}let Lu=(()=>{class t{constructor(n,o,c,E,F){this._zone=n,this._injector=o,this._exceptionHandler=c,this._componentFactoryResolver=E,this._initStatus=F,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const j=new H(ie=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{ie.next(this._stable),ie.complete()})}),G=new H(ie=>{let ce;this._zone.runOutsideAngular(()=>{ce=this._zone.onStable.subscribe(()=>{Ir.assertNotInAngularZone(),sh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,ie.next(!0))})})});const Se=this._zone.onUnstable.subscribe(()=>{Ir.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{ie.next(!1)}))});return()=>{ce.unsubscribe(),Se.unsubscribe()}});this.isStable=function(...t){let e=Number.POSITIVE_INFINITY,n=null,o=t[t.length-1];return l(o)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof o&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof H?t[0]:_e(e)(Be(t,n))}(j,G.pipe(t=>Le()(function(t,e){return function(o){let c;c="function"==typeof t?t:function(){return t};const E=Object.create(o,Vt);return E.source=o,E.subjectFactory=c,E}}(Dn)(t))))}bootstrap(n,o){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let c;c=n instanceof ym?n:this._componentFactoryResolver.resolveComponentFactory(n),this.componentTypes.push(c.componentType);const E=function(t){return t.isBoundToModule}(c)?void 0:this._injector.get(ls),j=c.create(Fn.NULL,[],o||c.selector,E),G=j.location.nativeElement,ie=j.injector.get(lh,null),ce=ie&&j.injector.get(Ny);return ie&&ce&&ce.registerApplication(G,ie),j.onDestroy(()=>{this.detachView(j.hostView),fh(this.components,j),ce&&ce.unregisterApplication(G)}),this._loadComponent(j),j}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const o=n;this._views.push(o),o.attachToAppRef(this)}detachView(n){const o=n;fh(this._views,o),o.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(mE,[]).concat(this._bootstrapListeners).forEach(c=>c(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(n){return new(n||t)(vn(Ir),vn(Fn),vn(is),vn(us),vn(wa))},t.\u0275prov=xt({token:t,factory:t.\u0275fac}),t})();function fh(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const oT=Vy(null,"core",[{provide:rh,useValue:"unknown"},{provide:jy,deps:[Fn]},{provide:Ny,deps:[]},{provide:ih,deps:[]}]),cT=[{provide:Lu,useClass:Lu,deps:[Ir,Fn,is,us,wa]},{provide:o3,deps:[Ir],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(n){e.push(n)}}},{provide:wa,useClass:wa,deps:[[new zi,ic]]},{provide:sc,useClass:sc,deps:[]},vE,{provide:Mu,useFactory:function(){return Y_},deps:[]},{provide:ha,useFactory:function(){return X_},deps:[]},{provide:No,useFactory:function(t){return Cd(t=t||"undefined"!=typeof $localize&&$localize.locale||jl),t},deps:[[new eu(No),new zi,new ns]]},{provide:Dy,useValue:"USD"}];let dT=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(vn(Lu))},t.\u0275mod=io({type:t}),t.\u0275inj=Zt({providers:cT}),t})(),vc=null;function Hu(){return vc}const xr=new Vn("DocumentToken");var dr=(()=>((dr=dr||{})[dr.Zero=0]="Zero",dr[dr.One=1]="One",dr[dr.Two=2]="Two",dr[dr.Few=3]="Few",dr[dr.Many=4]="Many",dr[dr.Other=5]="Other",dr))();const wI=function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Gv(e);if(n)return n;const o=e.split("-")[0];if(n=Gv(o),n)return n;if("en"===o)return xM;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[Pt.PluralCase]};class Tc{}let JI=(()=>{class t extends Tc{constructor(n){super(),this.locale=n}getPluralCategory(n,o){switch(wI(o||this.locale)(n)){case dr.Zero:return"zero";case dr.One:return"one";case dr.Two:return"two";case dr.Few:return"few";case dr.Many:return"many";default:return"other"}}}return t.\u0275fac=function(n){return new(n||t)(vn(No))},t.\u0275prov=xt({token:t,factory:t.\u0275fac}),t})(),x1=(()=>{class t{constructor(n,o){this._viewContainer=n,this._context=new nx,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=o}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){R1("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){R1("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,o){return!0}}return t.\u0275fac=function(n){return new(n||t)(hn(eo),hn(vo))},t.\u0275dir=_r({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class nx{constructor(){this.$implicit=null,this.ngIf=null}}function R1(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Ge(e)}'.`)}let xx=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=io({type:t}),t.\u0275inj=Zt({providers:[{provide:Tc,useClass:JI}]}),t})();class Bh extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(t){vc||(vc=t)}(new Bh)}onAndCancel(e,n,o){return e.addEventListener(n,o,!1),()=>{e.removeEventListener(n,o,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=(zu=zu||document.querySelector("base"),zu?zu.getAttribute("href"):null);return null==n?null:function(t){Ic=Ic||document.createElement("a"),Ic.setAttribute("href",t);const e=Ic.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){zu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const o=n.indexOf("="),[c,E]=-1==o?[n,""]:[n.slice(0,o),n.slice(o+1)];if(c.trim()===e)return decodeURIComponent(E)}return null}(document.cookie,e)}}let Ic,zu=null;const k1=new Vn("TRANSITION_ID"),Bx=[{provide:ic,useFactory:function(t,e,n){return()=>{n.get(wa).donePromise.then(()=>{const o=Hu(),c=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let E=0;E<c.length;E++)o.remove(c[E])})}},deps:[k1,xr,Fn],multi:!0}];class Uh{static init(){!function(t){ch=t}(new Uh)}addToWindow(e){cn.getAngularTestability=(o,c=!0)=>{const E=e.findTestabilityInTree(o,c);if(null==E)throw new Error("Could not find testability for element.");return E},cn.getAllAngularTestabilities=()=>e.getAllTestabilities(),cn.getAllAngularRootElements=()=>e.getAllRootElements(),cn.frameworkStabilizers||(cn.frameworkStabilizers=[]),cn.frameworkStabilizers.push(o=>{const c=cn.getAllAngularTestabilities();let E=c.length,F=!1;const j=function(G){F=F||G,E--,0==E&&o(F)};c.forEach(function(G){G.whenStable(j)})})}findTestabilityInTree(e,n,o){if(null==n)return null;const c=e.getTestability(n);return null!=c?c:o?Hu().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null}}let Ux=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=xt({token:t,factory:t.\u0275fac}),t})();const Wu=new Vn("EventManagerPlugins");let Rc=(()=>{class t{constructor(n,o){this._zone=o,this._eventNameToPlugin=new Map,n.forEach(c=>c.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,o,c){return this._findPluginFor(o).addEventListener(n,o,c)}addGlobalEventListener(n,o,c){return this._findPluginFor(o).addGlobalEventListener(n,o,c)}getZone(){return this._zone}_findPluginFor(n){const o=this._eventNameToPlugin.get(n);if(o)return o;const c=this._plugins;for(let E=0;E<c.length;E++){const F=c[E];if(F.supports(n))return this._eventNameToPlugin.set(n,F),F}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(vn(Wu),vn(Ir))},t.\u0275prov=xt({token:t,factory:t.\u0275fac}),t})();class Vh{constructor(e){this._doc=e}addGlobalEventListener(e,n,o){const c=Hu().getGlobalEventTarget(this._doc,e);if(!c)throw new Error(`Unsupported event target ${c} for event ${n}`);return this.addEventListener(c,n,o)}}let L1=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(n){const o=new Set;n.forEach(c=>{this._stylesSet.has(c)||(this._stylesSet.add(c),o.add(c))}),this.onStylesAdded(o)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=xt({token:t,factory:t.\u0275fac}),t})(),Gu=(()=>{class t extends L1{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,o,c){n.forEach(E=>{const F=this._doc.createElement("style");F.textContent=E,c.push(o.appendChild(F))})}addHost(n){const o=[];this._addStylesToHost(this._stylesSet,n,o),this._hostNodes.set(n,o)}removeHost(n){const o=this._hostNodes.get(n);o&&o.forEach(F1),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((o,c)=>{this._addStylesToHost(n,c,o)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(F1))}}return t.\u0275fac=function(n){return new(n||t)(vn(xr))},t.\u0275prov=xt({token:t,factory:t.\u0275fac}),t})();function F1(t){Hu().remove(t)}const Hh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},jh=/%COMP%/g;function Ac(t,e,n){for(let o=0;o<e.length;o++){let c=e[o];Array.isArray(c)?Ac(t,c,n):(c=c.replace(jh,t),n.push(c))}return n}function V1(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let qh=(()=>{class t{constructor(n,o,c){this.eventManager=n,this.sharedStylesHost=o,this.appId=c,this.rendererByCompId=new Map,this.defaultRenderer=new zh(n)}createRenderer(n,o){if(!n||!o)return this.defaultRenderer;switch(o.encapsulation){case Jn.Emulated:{let c=this.rendererByCompId.get(o.id);return c||(c=new e6(this.eventManager,this.sharedStylesHost,o,this.appId),this.rendererByCompId.set(o.id,c)),c.applyToHost(n),c}case 1:case Jn.ShadowDom:return new t6(this.eventManager,this.sharedStylesHost,n,o);default:if(!this.rendererByCompId.has(o.id)){const c=Ac(o.id,o.styles,[]);this.sharedStylesHost.addStyles(c),this.rendererByCompId.set(o.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(vn(Rc),vn(Gu),vn(Nu))},t.\u0275prov=xt({token:t,factory:t.\u0275fac}),t})();class zh{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,n){return n?document.createElementNS(Hh[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){e.appendChild(n)}insertBefore(e,n,o){e&&e.insertBefore(n,o)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let o="string"==typeof e?document.querySelector(e):e;if(!o)throw new Error(`The selector "${e}" did not match any elements`);return n||(o.textContent=""),o}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,o,c){if(c){n=c+":"+n;const E=Hh[c];E?e.setAttributeNS(E,n,o):e.setAttribute(n,o)}else e.setAttribute(n,o)}removeAttribute(e,n,o){if(o){const c=Hh[o];c?e.removeAttributeNS(c,n):e.removeAttribute(`${o}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,o,c){c&(Zr.DashCase|Zr.Important)?e.style.setProperty(n,o,c&Zr.Important?"important":""):e.style[n]=o}removeStyle(e,n,o){o&Zr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,o){e[n]=o}setValue(e,n){e.nodeValue=n}listen(e,n,o){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,V1(o)):this.eventManager.addEventListener(e,n,V1(o))}}class e6 extends zh{constructor(e,n,o,c){super(e),this.component=o;const E=Ac(c+"-"+o.id,o.styles,[]);n.addStyles(E),this.contentAttr=function(t){return"_ngcontent-%COMP%".replace(jh,t)}(c+"-"+o.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(jh,t)}(c+"-"+o.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const o=super.createElement(e,n);return super.setAttribute(o,this.contentAttr,""),o}}class t6 extends zh{constructor(e,n,o,c){super(e),this.sharedStylesHost=n,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const E=Ac(c.id,c.styles,[]);for(let F=0;F<E.length;F++){const j=document.createElement("style");j.textContent=E[F],this.shadowRoot.appendChild(j)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,o){return super.insertBefore(this.nodeOrShadowRoot(e),n,o)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let n6=(()=>{class t extends Vh{constructor(n){super(n)}supports(n){return!0}addEventListener(n,o,c){return n.addEventListener(o,c,!1),()=>this.removeEventListener(n,o,c)}removeEventListener(n,o,c){return n.removeEventListener(o,c)}}return t.\u0275fac=function(n){return new(n||t)(vn(xr))},t.\u0275prov=xt({token:t,factory:t.\u0275fac}),t})();const q1=["alt","control","meta","shift"],l6={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},z1={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},c6={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let f6=(()=>{class t extends Vh{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,o,c){const E=t.parseEventName(o),F=t.eventCallback(E.fullKey,c,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Hu().onAndCancel(n,E.domEventName,F))}static parseEventName(n){const o=n.toLowerCase().split("."),c=o.shift();if(0===o.length||"keydown"!==c&&"keyup"!==c)return null;const E=t._normalizeKey(o.pop());let F="";if(q1.forEach(G=>{const ie=o.indexOf(G);ie>-1&&(o.splice(ie,1),F+=G+".")}),F+=E,0!=o.length||0===E.length)return null;const j={};return j.domEventName=c,j.fullKey=F,j}static getEventFullKey(n){let o="",c=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&z1.hasOwnProperty(e)&&(e=z1[e]))}return l6[e]||e}(n);return c=c.toLowerCase()," "===c?c="space":"."===c&&(c="dot"),q1.forEach(E=>{E!=c&&c6[E](n)&&(o+=E+".")}),o+=c,o}static eventCallback(n,o,c){return E=>{t.getEventFullKey(E)===n&&c.runGuarded(()=>o(E))}}static _normalizeKey(n){switch(n){case"esc":return"escape";default:return n}}}return t.\u0275fac=function(n){return new(n||t)(vn(xr))},t.\u0275prov=xt({token:t,factory:t.\u0275fac}),t})();const b6=Vy(oT,"browser",[{provide:rh,useValue:"browser"},{provide:Ay,useValue:function(){Bh.makeCurrent(),Uh.init()},multi:!0},{provide:xr,useFactory:function(){return function(t){Na=t}(document),document},deps:[]}]),w6=[[],{provide:cu,useValue:"root"},{provide:is,useFactory:function(){return new is},deps:[]},{provide:Wu,useClass:n6,multi:!0,deps:[xr,Ir,rh]},{provide:Wu,useClass:f6,multi:!0,deps:[xr]},[],{provide:qh,useClass:qh,deps:[Rc,Gu,Nu]},{provide:Kl,useExisting:qh},{provide:L1,useExisting:Gu},{provide:Gu,useClass:Gu,deps:[xr]},{provide:lh,useClass:lh,deps:[Ir]},{provide:Rc,useClass:Rc,deps:[Wu,Ir]},{provide:class{},useClass:Ux,deps:[]},[]];let C6=(()=>{class t{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:t,providers:[{provide:Nu,useValue:n.appId},{provide:k1,useExisting:Nu},Bx]}}}return t.\u0275fac=function(n){return new(n||t)(vn(t,12))},t.\u0275mod=io({type:t}),t.\u0275inj=Zt({providers:w6,imports:[xx,dT]}),t})();"undefined"!=typeof window&&window;var Dc=T(8239),R6=T(5436);class Jh{constructor(){this.middlewares={}}static getInstance(){return this._instance||(this._instance=new Jh),this._instance}subscribe(e,n){this.middlewares[e]=n}create(){return console.log("[CustomStore][create]"),window.WebChat.createStore({},({dispatch:n})=>o=>c=>{let E=c;if(c&&c.payload)for(const F of Object.keys(this.middlewares)){const j=this.middlewares[F];if(j.applicable(E)){const G=j.apply(E);G.dispatchAction&&n(G.dispatchAction),G.nextAction&&(E=G.nextAction)}}return o(E)})}}var _a=T(8139);const G1=t=>{if(t){const e=t.split(/\s/).reduce((n,o)=>n+o.slice(0,1),"");return e.length>1?e.substring(0,2).toUpperCase():t.substring(0,2).toUpperCase()}return""};var Sa=(()=>(function(t){t.Sending="sending",t.SendFailed="send failed",t.Sent="sent"}(Sa||(Sa={})),Sa))();class F6{constructor(e){this.dataMaskingRules=e,console.log("[DataMaskingRules]"),console.log(this.dataMaskingRules)}applicable(e){const{text:n}=e.payload;return!!(Object.keys(this.dataMaskingRules).length>0&&n&&"WEB_CHAT/SEND_MESSAGE"===e.type)}apply(e){return{dispatchAction:null,nextAction:this.applyDataMasking(e)}}applyDataMasking(e){let{text:o}=e.payload;if(Object.keys(this.dataMaskingRules).length>0)for(const c of Object.values(this.dataMaskingRules)){const E=new RegExp(c,"g");let F;for(;F=E.exec(o);){const j=F[0].replace(/./g,"#");o=o.replace(F[0],j)}}return e.payload.text=o,e}}const Pc_omnichannelConfig_orgId="d367c413-e0b9-408b-ae1c-382499b369ae",Pc_omnichannelConfig_orgUrl="https://omnichannel-crm.omnichannelengagementhub.com",Pc_omnichannelConfig_widgetId="3a352b95-5d67-4e47-af28-eca029b03928";let Zh=(()=>{class t{}return t.canUploadAttachment=!1,t})();function Oc(t,e){return new H(n=>{const o=t.length;if(0===o)return void n.complete();const c=new Array(o);let E=0,F=0;for(let j=0;j<o;j++){const G=ye(t[j]);let ie=!1;n.add(G.subscribe({next:ce=>{ie||(ie=!0,F++),c[j]=ce},error:ce=>n.error(ce),complete:()=>{E++,(E===o||!ie)&&(F===o&&n.next(e?e.reduce((ce,Se,Ie)=>(ce[Se]=c[Ie],ce),{}):c),n.complete())}}))}})}class z6 extends y{constructor(e,n){super()}schedule(e,n=0){return this}}class W6 extends z6{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){if(this.closed)return this;this.state=e;const o=this.id,c=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(c,o,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(c,this.id,n),this}requestAsyncId(e,n,o=0){return setInterval(e.flush.bind(e,this),o)}recycleAsyncId(e,n,o=0){if(null!==o&&this.delay===o&&!1===this.pending)return n;clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const o=this._execute(e,n);if(o)return o;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let c,o=!1;try{this.work(e)}catch(E){o=!0,c=!!E&&E||new Error(E)}if(o)return this.unsubscribe(),c}_unsubscribe(){const e=this.id,n=this.scheduler,o=n.actions,c=o.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==c&&o.splice(c,1),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null}}let $1=(()=>{class t{constructor(n,o=t.now){this.SchedulerAction=n,this.now=o}schedule(n,o=0,c){return new this.SchedulerAction(this,n).schedule(c,o)}}return t.now=()=>Date.now(),t})();class Bo extends $1{constructor(e,n=$1.now){super(e,()=>Bo.delegate&&Bo.delegate!==this?Bo.delegate.now():n()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,n=0,o){return Bo.delegate&&Bo.delegate!==this?Bo.delegate.schedule(e,n,o):super.schedule(e,n,o)}flush(e){const{actions:n}=this;if(this.active)return void n.push(e);let o;this.active=!0;do{if(o=e.execute(e.state,e.delay))break}while(e=n.shift());if(this.active=!1,o){for(;e=n.shift();)e.unsubscribe();throw o}}}const K6=new class extends Bo{}(class extends W6{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,o=0){return null!==o&&o>0||null===o&&this.delay>0?super.requestAsyncId(e,n,o):e.flush(this)}}),J6=new H(t=>t.complete());class ci{constructor(e,n,o){this.kind=e,this.value=n,this.error=o,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,n,o){switch(this.kind){case"N":return e&&e(this.value);case"E":return n&&n(this.error);case"C":return o&&o()}}accept(e,n,o){return e&&"function"==typeof e.next?this.observe(e):this.do(e,n,o)}toObservable(){switch(this.kind){case"N":return function(...t){let e=t[t.length-1];return l(e)?(t.pop(),de(t,e)):Be(t)}(this.value);case"E":return function(t,e){return new H(n=>n.error(t))}(this.error);case"C":return function(t){return t?function(t){return new H(e=>t.schedule(()=>e.complete()))}(t):J6}()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new ci("N",e):ci.undefinedValueNotification}static createError(e){return new ci("E",void 0,e)}static createComplete(){return ci.completeNotification}}ci.completeNotification=new ci("C"),ci.undefinedValueNotification=new ci("N",void 0);class kc extends w{constructor(e,n,o=0){super(e),this.scheduler=n,this.delay=o}static dispatch(e){const{notification:n,destination:o}=e;n.observe(o),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(kc.dispatch,this.delay,new n4(e,this.destination)))}_next(e){this.scheduleMessage(ci.createNext(e))}_error(e){this.scheduleMessage(ci.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(ci.createComplete()),this.unsubscribe()}}class n4{constructor(e,n){this.notification=e,this.destination=n}}class K1 extends r{constructor(e=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,o){super(),this.scheduler=o,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const n=this._events;n.push(e),n.length>this._bufferSize&&n.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new r4(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const n=this._infiniteTimeWindow,o=n?this._events:this._trimBufferThenGetEvents(),c=this.scheduler,E=o.length;let F;if(this.closed)throw new $;if(this.isStopped||this.hasError?F=y.EMPTY:(this.observers.push(e),F=new pe(this,e)),c&&e.add(e=new kc(e,c)),n)for(let j=0;j<E&&!e.closed;j++)e.next(o[j]);else for(let j=0;j<E&&!e.closed;j++)e.next(o[j].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),F}_getNow(){return(this.scheduler||K6).now()}_trimBufferThenGetEvents(){const e=this._getNow(),n=this._bufferSize,o=this._windowTime,c=this._events,E=c.length;let F=0;for(;F<E&&!(e-c[F].time<o);)F++;return E>n&&(F=Math.max(F,E-n)),F>0&&c.splice(0,F),c}}class r4{constructor(e,n){this.time=e,this.value=n}}let i4=(()=>{class t{constructor(n){this.document=n,this._loadedLibraries={}}lazyLoad(){return function(...t){if(1===t.length){const e=t[0];if(g(e))return Oc(e,null);if(M(e)&&Object.getPrototypeOf(e)===Object.prototype){const n=Object.keys(e);return Oc(n.map(o=>e[o]),n)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Oc(t=1===t.length&&g(t[0])?t[0]:t,null).pipe(a(n=>e(...n)))}return Oc(t,null)}([this.loadScript("https://cdn.botframework.com/botframework-webchat/4.9.2/webchat.js")])}loadScript(n){if(this._loadedLibraries[n])return this._loadedLibraries[n].asObservable();this._loadedLibraries[n]=new K1;const o=this.document.createElement("script");return o.type="text/javascript",o.async=!0,o.src=n,o.onload=()=>{this._loadedLibraries[n].next(),this._loadedLibraries[n].complete()},this.document.body.appendChild(o),this._loadedLibraries[n].asObservable()}loadStyle(n){if(this._loadedLibraries[n])return this._loadedLibraries[n].asObservable();this._loadedLibraries[n]=new K1;const o=this.document.createElement("link");return o.type="text/css",o.href=n,o.rel="stylesheet",o.onload=()=>{this._loadedLibraries[n].next(),this._loadedLibraries[n].complete()},document.getElementsByTagName("head")[0].appendChild(o),this._loadedLibraries[n].asObservable()}}return t.\u0275fac=function(n){return new(n||t)(vn(xr))},t.\u0275prov=xt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function o4(t,e){1&t&&(Zi(0,"div",8),Zi(1,"span",9),mu(2," \u{1f440} "),Qi(),Qi())}function s4(t,e){if(1&t){const n=gd();Zi(0,"div",3),Zi(1,"div",4),mu(2,"LiveChat with Omnichannel Chat SDK "),Zi(3,"span",5),Ul("click",function(){return Va(n),Vl().endChat()}),mu(4," \u274c "),Qi(),Qi(),Fl(5,o4,3,0,"div",6),function(t,e,n,o){Zi(t,e,n,o),Qi()}(6,"div",7),Qi()}if(2&t){const n=Vl();xl(5),gu("ngIf",n.loading)}}function a4(t,e){if(1&t){const n=gd();Zi(0,"div",10),Ul("click",function(){return Va(n),Vl().startChat()}),Zi(1,"span"),mu(2," \u{1f44b} "),Qi(),Qi()}}const J1=(()=>{const t={orgId:Pc_omnichannelConfig_orgId||"",orgUrl:Pc_omnichannelConfig_orgUrl||"",widgetId:Pc_omnichannelConfig_widgetId||""},e=new URLSearchParams(window.location.search);return null!==e.get("orgUrl")&&(t.orgUrl=e.get("orgUrl")),null!==e.get("orgId")&&(t.orgId=e.get("orgId")),null!==e.get("widgetId")&&(t.widgetId=e.get("widgetId")),t})(),Z1=(()=>{const t={telemetry:{disable:!1,ariaTelemetryKey:""}},e=new URLSearchParams(window.location.search);return null!==e.get("telemetry")&&(t.telemetry.disable="true"!=e.get("telemetry")),null!==e.get("ariaTelemetryKey")&&(t.telemetry.ariaTelemetryKey=e.get("ariaTelemetryKey")||""),t})(),Q1=(()=>{const t={disable:!0},e=new URLSearchParams(window.location.search);return null!==e.get("debug")&&(t.disable="true"!=e.get("debug")),t})();console.log("%c [OmnichannelConfig]","background-color:#001433;color:#fff"),console.log(J1),console.log("%c [debugConfig]","background-color:#001433;color:#fff"),console.log(Q1),console.log("%c [telemetryConfig]","background-color:#001433;color:#fff"),console.log(Z1);const u4=(console.log("[createAvatarMiddleware]"),()=>e=>n=>{console.log("[AvatarMiddleware]");const{activity:{channelData:{tags:o},from:{name:c},text:E},fromUser:F}=n;return console.log(n),o&&o.includes("system")?(console.log(`[AvatarMiddleware][Message][System] ${E}`),_a.createElement("div",null,"\u2757")):null!=F&&(F?F?(console.log(`[AvatarMiddleware][Message][Customer] ${E}`),_a.createElement("div",{className:"webchat__avatar"},_a.createElement("p",{className:"webchat__avatar_initials"}," ",G1(c)||"CU","  "))):e(n):(console.log(`[AvatarMiddleware][Message][Agent] ${E}`),_a.createElement("div",{className:"webchat__avatar"},_a.createElement("p",{className:"webchat__avatar_initials"}," ",G1(c)," "))))}),l4=(console.log("[createActivityMiddleware]"),()=>e=>n=>{if(console.log("%c [ActivityMiddleware]","background: #2a9fd4; color: #fff"),console.log(n),n.activity){if(n.activity.channelData&&n.activity.channelData.tags&&n.activity.channelData.tags.includes("system"))return console.log(`%c [ActivityMiddleware][Message][System] ${n.activity.text}`,"background: #2a9fd4; color: #fff"),o=>_a.createElement("div",{key:n.activity.id,className:"system-message"},e(n)(o));if(void 0===n.activity.text||null==n.activity.text)return e(n);"bot"===n.activity.from.role&&console.log(`%c [ActivityMiddleware][Message][Agent] ${n.activity.text}`,"background: #2a9fd4; color: #fff"),"user"===n.activity.from.role&&console.log(`%c [ActivityMiddleware][Message][Customer] ${n.activity.text}`,"background: #2a9fd4; color: #fff")}return e(n)}),c4=()=>e=>n=>{console.log("%c [activityStatusMiddleware]","background: #238636; color: #fff"),console.log(n);let o="";(t=>t.activity.channelData&&t.activity.channelData.tags&&t.activity.channelData.tags.includes("system"))(n)?o="System":(t=>"bot"===t.activity.from.role)(n)?o="Agent":(t=>"user"===t.activity.from.role)(n)&&(o="Customer"),console.log(`%c [activityStatusMiddleware][Message][${o}] ${n.activity.text}`,"background: #238636; color: #fff"),n.sendState===Sa.Sent?console.log(`%c [activityStatusMiddleware][Message][${o}][Status] Sent!`,"background: #238636; color: #fff"):n.sendState===Sa.Sending?console.log(`%c [activityStatusMiddleware][Message][${o}][Status] Sending...`,"background: #238636; color: #fff"):n.sendState===Sa.SendFailed&&console.log(`%c [activityStatusMiddleware][Message][${o}][Status] Failed :(`,"background: #238636; color: #fff")},Y1={bubbleBorderRadius:10,bubbleNubSize:10,bubbleNubOffset:15,bubbleFromUserBorderRadius:10,bubbleFromUserNubSize:10,bubbleFromUserNubOffset:15,bubbleFromUserBackground:"rgb(246, 246, 246)"};let d4=(()=>{class t{constructor(n,o){this.webChatControlService=n,this.document=o,this.title="angular-botframework-webchat-control",this.webChat=null,this.chatSDK=null,this.chatAdapter=null,this.loading=!1,this.hasChatStarted=!1,this.webChatStore=null}ngOnInit(){var n=this;return(0,Dc.Z)(function*(){console.log("[ngOnInit]"),n.webChatControlService.lazyLoad().subscribe(function(){var o=(0,Dc.Z)(function*(c){n.webChat=window.WebChat;const E=Object.assign({},Z1),F=new R6.Mg(J1,E);F.setDebug(!Q1.disable),yield F.initialize(),n.chatSDK=F,n.webChat=window.WebChat,(t=>{Zh.canUploadAttachment="true"===t.LiveWSAndLiveChatEngJoin.msdyn_enablefileattachmentsforcustomers||!1})(yield F.getLiveChatConfig()),Y1.hideUploadButton=!Zh.canUploadAttachment;const G=localStorage.getItem("liveChatContext");G&&Object.keys(JSON.parse(G)).length>0&&(console.log("[liveChatContext]"),console.log(G))});return function(c){return o.apply(this,arguments)}}())})()}startChat(){var n=this;return(0,Dc.Z)(function*(){var o,c,E,F;console.log("[startChat]");const j=yield null===(o=n.chatSDK)||void 0===o?void 0:o.getDataMaskingRules();console.log(j);const G=(console.log("[createCustomStore]"),Jh.getInstance());n.webChatStore=G.create(),G.subscribe("DataMasking",(t=>(console.log("[createDataMaskingMiddleware]"),new F6(t)))(j));const ie={},ce=localStorage.getItem("liveChatContext");ce&&Object.keys(JSON.parse(ce)).length>0&&(console.log("[liveChatContext]"),ie.liveChatContext=JSON.parse(ce)),n.hasChatStarted=!0,n.loading=!0,yield null===(c=n.chatSDK)||void 0===c?void 0:c.startChat(ie);const Se=yield null===(E=n.chatSDK)||void 0===E?void 0:E.getCurrentLiveChatContext();Se&&Object.keys(Se).length&&localStorage.setItem("liveChatContext",JSON.stringify(Se));const Ie=yield null===(F=n.chatSDK)||void 0===F?void 0:F.createChatAdapter();n.chatAdapter=Ie,n.loading=!1,n.webChat.renderWebChat({directLine:Ie,sendTypingIndicator:!0,styleOptions:Y1,store:n.webChatStore,avatarMiddleware:u4,activityMiddleware:l4,activityStatusMiddleware:c4},n.document.getElementById("chat-container"))})()}endChat(){var n=this;return(0,Dc.Z)(function*(){var o;console.log("[endChat]"),yield null===(o=n.chatSDK)||void 0===o?void 0:o.endChat(),n.hasChatStarted=!1;const c=n.document.getElementById("chat-container");for(;c.firstChild;)c.firstChild.remove()})()}}return t.\u0275fac=function(n){return new(n||t)(hn(i4),hn(xr))},t.\u0275cmp=qo({type:t,selectors:[["app-root"]],decls:3,vars:2,consts:[["id","root"],["id","chat-root",4,"ngIf"],["id","chat-button",3,"click",4,"ngIf"],["id","chat-root"],[1,"chat-header"],[3,"click"],["id","loading-screen",4,"ngIf"],["id","chat-container"],["id","loading-screen"],["id","loader"],["id","chat-button",3,"click"]],template:function(n,o){1&n&&(Zi(0,"div",0),Fl(1,s4,7,1,"div",1),Fl(2,a4,3,0,"div",2),Qi()),2&n&&(xl(1),gu("ngIf",o.hasChatStarted),xl(1),gu("ngIf",!o.hasChatStarted&&!o.loading))},directives:[x1],styles:['body[_ngcontent-%COMP%]{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}code[_ngcontent-%COMP%]{font-family:source-code-pro,Menlo,Monaco,Consolas,"Courier New",monospace}#chat-root[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:400px;max-width:400px;min-height:600px;max-height:600px;width:400px;height:600px;position:fixed;right:0;bottom:0;border-radius:4px;margin:0 20px 60px 0;box-shadow:0 0 15px 2px #161b224d;font-family:"Segoe UI",Arial,sans-serif}#chat-container[_ngcontent-%COMP%]{width:100%;height:100%}.chat-header[_ngcontent-%COMP%]{border-bottom:#E6E6E6 solid 1px;padding:10px;display:flex;justify-content:space-between;cursor:pointer}#loading-screen[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:400px;max-width:400px;min-height:600px;max-height:600px;width:400px;height:600px;position:fixed;right:0;bottom:0;border-radius:4px;margin:0 20px 60px 0;box-shadow:0 0 15px 2px #161b224d;align-items:center;justify-content:center}@keyframes spin{to{transform:rotate(360deg)}}#loader[_ngcontent-%COMP%]{font-size:120px;animation:spin 2s linear infinite}#chat-button[_ngcontent-%COMP%]{position:fixed;right:0;bottom:0;border-radius:32px;background-color:#0078d4;box-shadow:0 0 5px 2px #0078d4;padding:10px;margin:0 20px 20px 0;color:#fff;font-size:32px;cursor:pointer}#chat-button[_ngcontent-%COMP%]:hover{box-shadow:0 0 20px 2px #0078d4;transition:all 2s}']}),t})(),h4=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=io({type:t,bootstrap:[d4]}),t.\u0275inj=Zt({providers:[],imports:[[C6]]}),t})();(function(){if(Fy)throw new Error("Cannot enable prod mode after platform setup.");Ly=!1})(),b6().bootstrapModule(h4).catch(t=>console.error(t))},4762:(Y,L,T)=>{"use strict";function x(R,r){var s={};for(var l in R)Object.prototype.hasOwnProperty.call(R,l)&&r.indexOf(l)<0&&(s[l]=R[l]);if(null!=R&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(l=Object.getOwnPropertySymbols(R);a<l.length;a++)r.indexOf(l[a])<0&&Object.prototype.propertyIsEnumerable.call(R,l[a])&&(s[l[a]]=R[l[a]])}return s}function k(R){return this instanceof k?(this.v=R,this):new k(R)}function O(R,r,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a,l=s.apply(R,r||[]),f=[];return a={},_("next"),_("throw"),_("return"),a[Symbol.asyncIterator]=function(){return this},a;function _(q){l[q]&&(a[q]=function(J){return new Promise(function(ge,me){f.push([q,J,ge,me])>1||D(q,J)})})}function D(q,J){try{!function(q){q.value instanceof k?Promise.resolve(q.value.v).then(i,b):z(f[0][2],q)}(l[q](J))}catch(ge){z(f[0][3],ge)}}function i(q){D("next",q)}function b(q){D("throw",q)}function z(q,J){q(J),f.shift(),f.length&&D(f[0][0],f[0][1])}}function V(R){var r,s;return r={},l("next"),l("throw",function(a){throw a}),l("return"),r[Symbol.iterator]=function(){return this},r;function l(a,f){r[a]=R[a]?function(_){return(s=!s)?{value:k(R[a](_)),done:"return"===a}:f?f(_):_}:f}}function U(R){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,r=R[Symbol.asyncIterator];return r?r.call(R):(R=function(R){var r="function"==typeof Symbol&&Symbol.iterator,s=r&&R[r],l=0;if(s)return s.call(R);if(R&&"number"==typeof R.length)return{next:function(){return R&&l>=R.length&&(R=void 0),{value:R&&R[l++],done:!R}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}(R),s={},l("next"),l("throw"),l("return"),s[Symbol.asyncIterator]=function(){return this},s);function l(f){s[f]=R[f]&&function(_){return new Promise(function(D,d){!function(f,_,D,d){Promise.resolve(d).then(function(i){f({value:i,done:D})},_)}(D,d,(_=R[f](_)).done,_.value)})}}}T.d(L,{_T:()=>x,qq:()=>k,FC:()=>O,V2:()=>V,KL:()=>U})},950:()=>{},6601:()=>{},8623:()=>{},7748:()=>{},5568:()=>{},6619:()=>{},7108:()=>{},2361:()=>{},4616:()=>{},8979:Y=>{function L(p,N,m,x,u,g,M){try{var A=p[g](M),I=A.value}catch(y){return void m(y)}A.done?N(I):Promise.resolve(I).then(x,u)}Y.exports=function(p){return function(){var N=this,m=arguments;return new Promise(function(x,u){var g=p.apply(N,m);function M(I){L(g,x,u,M,A,"next",I)}function A(I){L(g,x,u,M,A,"throw",I)}M(void 0)})}},Y.exports.__esModule=!0,Y.exports.default=Y.exports},9901:Y=>{Y.exports=function(T,p){if(!(T instanceof p))throw new TypeError("Cannot call a class as a function")},Y.exports.__esModule=!0,Y.exports.default=Y.exports},9524:(Y,L,T)=>{var p=T(8262);function N(x,u){for(var g=0;g<u.length;g++){var M=u[g];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(x,p(M.key),M)}}Y.exports=function(x,u,g){return u&&N(x.prototype,u),g&&N(x,g),Object.defineProperty(x,"prototype",{writable:!1}),x},Y.exports.__esModule=!0,Y.exports.default=Y.exports},5633:(Y,L,T)=>{var p=T(8262);Y.exports=function(m,x,u){return(x=p(x))in m?Object.defineProperty(m,x,{value:u,enumerable:!0,configurable:!0,writable:!0}):m[x]=u,m},Y.exports.__esModule=!0,Y.exports.default=Y.exports},3621:Y=>{Y.exports=function(T){return T&&T.__esModule?T:{default:T}},Y.exports.__esModule=!0,Y.exports.default=Y.exports},3443:(Y,L,T)=>{var p=T(4738).default;function N(){"use strict";Y.exports=N=function(){return m},Y.exports.__esModule=!0,Y.exports.default=Y.exports;var m={},x=Object.prototype,u=x.hasOwnProperty,g=Object.defineProperty||function(a,f,_){a[f]=_.value},M="function"==typeof Symbol?Symbol:{},A=M.iterator||"@@iterator",I=M.asyncIterator||"@@asyncIterator",y=M.toStringTag||"@@toStringTag";function h(a,f,_){return Object.defineProperty(a,f,{value:_,enumerable:!0,configurable:!0,writable:!0}),a[f]}try{h({},"")}catch(a){h=function(_,D,d){return _[D]=d}}function C(a,f,_,D){var i=Object.create((f&&f.prototype instanceof S?f:S).prototype),b=new r(D||[]);return g(i,"_invoke",{value:te(a,_,b)}),i}function v(a,f,_){try{return{type:"normal",arg:a.call(f,_)}}catch(D){return{type:"throw",arg:D}}}m.wrap=C;var w={};function S(){}function P(){}function k(){}var O={};h(O,A,function(){return this});var V=Object.getPrototypeOf,U=V&&V(V(s([])));U&&U!==x&&u.call(U,A)&&(O=U);var B=k.prototype=S.prototype=Object.create(O);function H(a){["next","throw","return"].forEach(function(f){h(a,f,function(_){return this._invoke(f,_)})})}function W(a,f){function _(d,i,b,z){var q=v(a[d],a,i);if("throw"!==q.type){var J=q.arg,ge=J.value;return ge&&"object"==p(ge)&&u.call(ge,"__await")?f.resolve(ge.__await).then(function(me){_("next",me,b,z)},function(me){_("throw",me,b,z)}):f.resolve(ge).then(function(me){J.value=me,b(J)},function(me){return _("throw",me,b,z)})}z(q.arg)}var D;g(this,"_invoke",{value:function(i,b){function z(){return new f(function(q,J){_(i,b,q,J)})}return D=D?D.then(z,z):z()}})}function te(a,f,_){var D="suspendedStart";return function(d,i){if("executing"===D)throw new Error("Generator is already running");if("completed"===D){if("throw"===d)throw i;return{value:void 0,done:!0}}for(_.method=d,_.arg=i;;){var b=_.delegate;if(b){var z=$(b,_);if(z){if(z===w)continue;return z}}if("next"===_.method)_.sent=_._sent=_.arg;else if("throw"===_.method){if("suspendedStart"===D)throw D="completed",_.arg;_.dispatchException(_.arg)}else"return"===_.method&&_.abrupt("return",_.arg);D="executing";var q=v(a,f,_);if("normal"===q.type){if(D=_.done?"completed":"suspendedYield",q.arg===w)continue;return{value:q.arg,done:_.done}}"throw"===q.type&&(D="completed",_.method="throw",_.arg=q.arg)}}}function $(a,f){var _=f.method,D=a.iterator[_];if(void 0===D)return f.delegate=null,"throw"===_&&a.iterator.return&&(f.method="return",f.arg=void 0,$(a,f),"throw"===f.method)||"return"!==_&&(f.method="throw",f.arg=new TypeError("The iterator does not provide a '"+_+"' method")),w;var d=v(D,a.iterator,f.arg);if("throw"===d.type)return f.method="throw",f.arg=d.arg,f.delegate=null,w;var i=d.arg;return i?i.done?(f[a.resultName]=i.value,f.next=a.nextLoc,"return"!==f.method&&(f.method="next",f.arg=void 0),f.delegate=null,w):i:(f.method="throw",f.arg=new TypeError("iterator result is not an object"),f.delegate=null,w)}function pe(a){var f={tryLoc:a[0]};1 in a&&(f.catchLoc=a[1]),2 in a&&(f.finallyLoc=a[2],f.afterLoc=a[3]),this.tryEntries.push(f)}function R(a){var f=a.completion||{};f.type="normal",delete f.arg,a.completion=f}function r(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(pe,this),this.reset(!0)}function s(a){if(a){var f=a[A];if(f)return f.call(a);if("function"==typeof a.next)return a;if(!isNaN(a.length)){var _=-1,D=function d(){for(;++_<a.length;)if(u.call(a,_))return d.value=a[_],d.done=!1,d;return d.value=void 0,d.done=!0,d};return D.next=D}}return{next:l}}function l(){return{value:void 0,done:!0}}return P.prototype=k,g(B,"constructor",{value:k,configurable:!0}),g(k,"constructor",{value:P,configurable:!0}),P.displayName=h(k,y,"GeneratorFunction"),m.isGeneratorFunction=function(a){var f="function"==typeof a&&a.constructor;return!!f&&(f===P||"GeneratorFunction"===(f.displayName||f.name))},m.mark=function(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,k):(a.__proto__=k,h(a,y,"GeneratorFunction")),a.prototype=Object.create(B),a},m.awrap=function(a){return{__await:a}},H(W.prototype),h(W.prototype,I,function(){return this}),m.AsyncIterator=W,m.async=function(a,f,_,D,d){void 0===d&&(d=Promise);var i=new W(C(a,f,_,D),d);return m.isGeneratorFunction(f)?i:i.next().then(function(b){return b.done?b.value:i.next()})},H(B),h(B,y,"Generator"),h(B,A,function(){return this}),h(B,"toString",function(){return"[object Generator]"}),m.keys=function(a){var f=Object(a),_=[];for(var D in f)_.push(D);return _.reverse(),function d(){for(;_.length;){var i=_.pop();if(i in f)return d.value=i,d.done=!1,d}return d.done=!0,d}},m.values=s,r.prototype={constructor:r,reset:function(f){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!f)for(var _ in this)"t"===_.charAt(0)&&u.call(this,_)&&!isNaN(+_.slice(1))&&(this[_]=void 0)},stop:function(){this.done=!0;var f=this.tryEntries[0].completion;if("throw"===f.type)throw f.arg;return this.rval},dispatchException:function(f){if(this.done)throw f;var _=this;function D(J,ge){return b.type="throw",b.arg=f,_.next=J,ge&&(_.method="next",_.arg=void 0),!!ge}for(var d=this.tryEntries.length-1;d>=0;--d){var i=this.tryEntries[d],b=i.completion;if("root"===i.tryLoc)return D("end");if(i.tryLoc<=this.prev){var z=u.call(i,"catchLoc"),q=u.call(i,"finallyLoc");if(z&&q){if(this.prev<i.catchLoc)return D(i.catchLoc,!0);if(this.prev<i.finallyLoc)return D(i.finallyLoc)}else if(z){if(this.prev<i.catchLoc)return D(i.catchLoc,!0)}else{if(!q)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return D(i.finallyLoc)}}}},abrupt:function(f,_){for(var D=this.tryEntries.length-1;D>=0;--D){var d=this.tryEntries[D];if(d.tryLoc<=this.prev&&u.call(d,"finallyLoc")&&this.prev<d.finallyLoc){var i=d;break}}i&&("break"===f||"continue"===f)&&i.tryLoc<=_&&_<=i.finallyLoc&&(i=null);var b=i?i.completion:{};return b.type=f,b.arg=_,i?(this.method="next",this.next=i.finallyLoc,w):this.complete(b)},complete:function(f,_){if("throw"===f.type)throw f.arg;return"break"===f.type||"continue"===f.type?this.next=f.arg:"return"===f.type?(this.rval=this.arg=f.arg,this.method="return",this.next="end"):"normal"===f.type&&_&&(this.next=_),w},finish:function(f){for(var _=this.tryEntries.length-1;_>=0;--_){var D=this.tryEntries[_];if(D.finallyLoc===f)return this.complete(D.completion,D.afterLoc),R(D),w}},catch:function(f){for(var _=this.tryEntries.length-1;_>=0;--_){var D=this.tryEntries[_];if(D.tryLoc===f){var d=D.completion;if("throw"===d.type){var i=d.arg;R(D)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(f,_,D){return this.delegate={iterator:s(f),resultName:_,nextLoc:D},"next"===this.method&&(this.arg=void 0),w}},m}Y.exports=N,Y.exports.__esModule=!0,Y.exports.default=Y.exports},1600:(Y,L,T)=>{var p=T(4738).default;Y.exports=function(m,x){if("object"!==p(m)||null===m)return m;var u=m[Symbol.toPrimitive];if(void 0!==u){var g=u.call(m,x||"default");if("object"!==p(g))return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===x?String:Number)(m)},Y.exports.__esModule=!0,Y.exports.default=Y.exports},8262:(Y,L,T)=>{var p=T(4738).default,N=T(1600);Y.exports=function(x){var u=N(x,"string");return"symbol"===p(u)?u:String(u)},Y.exports.__esModule=!0,Y.exports.default=Y.exports},4738:Y=>{function L(T){return Y.exports=L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},Y.exports.__esModule=!0,Y.exports.default=Y.exports,L(T)}Y.exports=L,Y.exports.__esModule=!0,Y.exports.default=Y.exports},617:(Y,L,T)=>{var p=T(3443)();Y.exports=p;try{regeneratorRuntime=p}catch(N){"object"==typeof globalThis?globalThis.regeneratorRuntime=p:Function("r","regeneratorRuntime = r")(p)}},8239:(Y,L,T)=>{"use strict";function p(m,x,u,g,M,A,I){try{var y=m[A](I),h=y.value}catch(C){return void u(C)}y.done?x(h):Promise.resolve(h).then(g,M)}function N(m){return function(){var x=this,u=arguments;return new Promise(function(g,M){var A=m.apply(x,u);function I(h){p(A,g,M,I,y,"next",h)}function y(h){p(A,g,M,I,y,"throw",h)}I(void 0)})}}T.d(L,{Z:()=>N})},2861:Y=>{"use strict";Y.exports={i8:"1.1.1"}},6638:Y=>{"use strict";Y.exports={i8:"1.1.0"}},1528:Y=>{"use strict";Y.exports={i8:"0.3.3"}},5500:Y=>{"use strict";Y.exports={i8:"0.1.4"}},8464:Y=>{"use strict";Y.exports=JSON.parse('{"i8":"1.2.1-main.cb2cd37"}')},5233:Y=>{"use strict";Y.exports={i8:"0.1.2"}},8593:Y=>{"use strict";Y.exports=JSON.parse('{"_from":"axios@^0.21.4","_id":"axios@0.21.4","_inBundle":false,"_integrity":"sha512-ut5vewkiu8jjGBdqpM44XxjuCjq9LAKeHVmoVfHVzy8eHgxxq8SbAVQNovDA8mVi05kP0Ea/n/UzcSHcTJQfNg==","_location":"/axios","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"axios@^0.21.4","name":"axios","escapedName":"axios","rawSpec":"^0.21.4","saveSpec":null,"fetchSpec":"^0.21.4"},"_requiredBy":["/@microsoft/ocsdk","/@microsoft/omnichannel-ic3core"],"_resolved":"https://registry.npmjs.org/axios/-/axios-0.21.4.tgz","_shasum":"c67b90dc0568e5c1cf2b0b858c43ba28e2eda575","_spec":"axios@^0.21.4","_where":"/home/runner/work/omnichannel-demos/omnichannel-demos/angular-botframework-webchat-control/node_modules/@microsoft/ocsdk","author":{"name":"Matt Zabriskie"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"bugs":{"url":"https://github.com/axios/axios/issues"},"bundleDependencies":false,"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}],"dependencies":{"follow-redirects":"^1.14.0"},"deprecated":false,"description":"Promise based HTTP client for the browser and node.js","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"homepage":"https://axios-http.com","jsdelivr":"dist/axios.min.js","keywords":["xhr","http","ajax","promise","node"],"license":"MIT","main":"index.js","name":"axios","repository":{"type":"git","url":"git+https://github.com/axios/axios.git"},"scripts":{"build":"NODE_ENV=production grunt build","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","examples":"node ./examples/server.js","fix":"eslint --fix lib/**/*.js","postversion":"git push && git push --tags","preversion":"npm test","start":"node ./sandbox/server.js","test":"grunt test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},"typings":"./index.d.ts","unpkg":"dist/axios.min.js","version":"0.21.4"}')},4946:Y=>{"use strict";Y.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},8770:Y=>{"use strict";Y.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},1308:Y=>{"use strict";Y.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},9799:Y=>{"use strict";Y.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},8597:Y=>{"use strict";Y.exports={i8:"6.5.4"}},2562:Y=>{"use strict";Y.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')}},Y=>{Y(Y.s=8952)}]);